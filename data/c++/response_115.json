[{"tags": ["c++", "performance", "assembly", "simd"], "comments": [{"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 1, "creation_date": 1490227483, "post_id": 42964820, "comment_id": 73023785, "body": "Your timing calculations aren&#39;t precise enough for this kind of benchmark. Try running the code with the <a href=\"https://github.com/google/benchmark\" rel=\"nofollow noreferrer\">Google Benchmark library</a> and see what you find out."}, {"owner": {"reputation": 1381, "user_id": 4381807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i4GHo.gif?s=128&g=1", "display_name": "Anty", "link": "https://stackoverflow.com/users/4381807/anty"}, "edited": false, "score": 2, "creation_date": 1490228125, "post_id": 42964820, "comment_id": 73023997, "body": "You need more loop iterations to measure it better, use high resolution timer or use RDTSC/RDTSCP. 1ms you have is noise."}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 6, "creation_date": 1490228130, "post_id": 42964820, "comment_id": 73024000, "body": "For example, you may be bottlenecked by memory."}, {"owner": {"reputation": 1381, "user_id": 4381807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i4GHo.gif?s=128&g=1", "display_name": "Anty", "link": "https://stackoverflow.com/users/4381807/anty"}, "edited": false, "score": 4, "creation_date": 1490228566, "post_id": 42964820, "comment_id": 73024135, "body": "Additionally use -O3 and you will have <code>mulpd   xmm0, XMMWORD PTR [rcx+rax]</code> for C version."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490229469, "post_id": 42964820, "comment_id": 73024378, "body": "This is apparently not C. but C++. Use the correct tags."}, {"owner": {"reputation": 26818, "user_id": 209199, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0b64963e747bf4c8fc20fb379105f204?s=128&d=identicon&r=PG", "display_name": "Cory Nelson", "link": "https://stackoverflow.com/users/209199/cory-nelson"}, "edited": false, "score": 4, "creation_date": 1490229884, "post_id": 42964820, "comment_id": 73024511, "body": "You are absolutely bottlenecked by memory here."}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 1, "creation_date": 1490229908, "post_id": 42964820, "comment_id": 73024519, "body": "There are 16 XMM registers in 64-bit mode. You&#39;re changing the values of registers in your inline assembly with out telling the compiler so the code it generates might end being garbage."}, {"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1490236867, "post_id": 42964820, "comment_id": 73026442, "body": "@Jester Good point. How can I let these functions work without being bottlenecked by memory?"}, {"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "reply_to_user": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1490237073, "post_id": 42964820, "comment_id": 73026491, "body": "@RossRidge Do you mean that I should add these registers to the clobbers list? Also, is there any way to tell the compiler that I&#39;ve used all <code>xmm</code> registers or must I specify them one-by-one? And can I make it run even faster if I make each iteration load/mul/store 16 registers at a time or will it be as fast as just using less registers?"}, {"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "reply_to_user": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 0, "creation_date": 1490237217, "post_id": 42964820, "comment_id": 73026537, "body": "@DanielKamilKozar Sounds interesting, I checked out the link although the only problem is that I have very little experience using Github (actually non-existant, I know, ouch), so I don&#39;t know how I should use it and which folders I should download?"}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 1, "creation_date": 1490241335, "post_id": 42964820, "comment_id": 73027569, "body": "You need add RAX and each individual XMM register you modify in the clobbers. Using all 16 XMM registers probably won&#39;t make a difference because your probably memory bound."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 26818, "user_id": 209199, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0b64963e747bf4c8fc20fb379105f204?s=128&d=identicon&r=PG", "display_name": "Cory Nelson", "link": "https://stackoverflow.com/users/209199/cory-nelson"}, "edited": false, "score": 0, "creation_date": 1490275989, "post_id": 42964820, "comment_id": 73047056, "body": "@CoryNelson, I tested the OPs code (see my answer) and I see a significant improvement with vectorization. I don&#39;t know why. The total memory read and written should be 8*100000*(2+1) = 24 MB (two reads one write). So I agree it should be fairly memory bandwidth bound."}, {"owner": {"reputation": 2109, "user_id": 7030791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pIsKF.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7030791/martin"}, "edited": false, "score": 0, "creation_date": 1490293514, "post_id": 42964820, "comment_id": 73060146, "body": "What is your CPU generation? which platform do you use? BTW if your CPU supports <code>AVX</code> this might make <code>SSE&#47;AVX</code> transition penalty. another point: Use intrinsics. It might be the problem inline assembly might not be faster than intrinsics in [this paper](linkinghub.elsevier.com/retrieve/pii/S014193311630250&zwnj;&#8203;2)"}, {"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "reply_to_user": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1490320886, "post_id": 42964820, "comment_id": 73071689, "body": "@RossRidge You&#39;re right. When I tried Z boson&#39;s program with my <code>mul_asm</code> function it got stuck in the loop. As it turns out the compiler was using <code>eax</code> as loop counter, while I used <code>rax</code> for address offset, which made the loop do (much) more iterations than it should. Now it&#39;s fixed ;)"}, {"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "reply_to_user": {"reputation": 2109, "user_id": 7030791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pIsKF.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7030791/martin"}, "edited": false, "score": 0, "creation_date": 1490322037, "post_id": 42964820, "comment_id": 73071971, "body": "@FackedDeveloper The system I&#39;m working on right now has an Intel Xeon X3470, and since the command <code>lscpu</code> only lists <code>sse4_1</code> and <code>sse4_2</code> and not <code>avx</code> or <code>avx2</code> I&#39;d assume it has no <code>AVX</code> support. The system I&#39;ll run it on later has an Intel Xeon E5-2660, and it has support for <code>AVX2</code> but not <code>AVX-512</code>. The main reason I use inline assembly over intrinsics is because I want to learn to use <code>SIMD</code> instructions in assembly."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 26818, "user_id": 209199, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0b64963e747bf4c8fc20fb379105f204?s=128&d=identicon&r=PG", "display_name": "Cory Nelson", "link": "https://stackoverflow.com/users/209199/cory-nelson"}, "edited": false, "score": 0, "creation_date": 1491825998, "post_id": 42964820, "comment_id": 73709503, "body": "@CoryNelson, the reason I saw a big improvement with vectors was due to <a href=\"https://stackoverflow.com/questions/43256496/avx-scalar-operations-are-much-faster/43277581#43277581\">a bug in the timing function I was using</a>."}], "answers": [{"comments": [{"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 0, "creation_date": 1490236165, "post_id": 42965271, "comment_id": 73026259, "body": "I&#39;ve tried to measure the running time with RDTSCP instead, I updated my question with the new code and results. As I wrote in the update, the amount of cycles vary a lot, propably because the operating system runs other processes inbetween. Is there any way to only count the cycles during my program? Also, how come <code>mul_asm2</code> is so quick when counting cycles? The reason I don&#39;t use <code>-O3</code> is because the system I&#39;ll run the code on later doesn&#39;t allow me to specify flags, and it uses <code>-O2</code>, otherwise I would have used <code>-O3</code> ;) Also, thanks for the tip, I didn&#39;t know such hints was possible."}, {"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 0, "creation_date": 1490237526, "post_id": 42965271, "comment_id": 73026610, "body": "Also, the system I&#39;ll run it on later has support for AVX2, but not the system I&#39;m working on right now, so that&#39;s why I&#39;m only using 128-bit (XMM) registers right now. I&#39;ll change it to 256-bit registers (YMM) later. Would have been cool to use AVX-512 with 512-bit registers (ZMM) but neither of the two systems supports it :&#39;("}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "reply_to_user": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 0, "creation_date": 1490243157, "post_id": 42965271, "comment_id": 73028033, "body": "@fighting_falcon93 the point of fixing the C source instead of writing asm is, that you can just compile for both systems without change of source (on yours it will compile without AVX2, on target it will compile with AVX2 (if proper compile time switches are used)). So why are you still fixing the asm, if the C is enough to produce the optimal vectorized code?"}, {"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "reply_to_user": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 1, "creation_date": 1490255542, "post_id": 42965271, "comment_id": 73032739, "body": "@Ped7g Mainly because I want to learn. I think it&#39;s fun to write assembly and beat the compiler, and very often I notice that the compiler do silly things that isn&#39;t fully optimized. I do a lot of programming where performance is very important, where each millisecond less is better and you want your code to run as fast as it possibly can, for instance in games and when competing against others with who has the faster code on sites like CodeChef etc. So I&#39;m trying to find new ways to push the performance of my implementations to the limit :)"}], "tags": [], "owner": {"reputation": 1381, "user_id": 4381807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i4GHo.gif?s=128&g=1", "display_name": "Anty", "link": "https://stackoverflow.com/users/4381807/anty"}, "is_accepted": false, "score": 8, "last_activity_date": 1490230101, "creation_date": 1490230101, "answer_id": 42965271, "question_id": 42964820, "link": "https://stackoverflow.com/questions/42964820/why-is-this-simd-multiplication-not-faster-than-non-simd-multiplication/42965271#42965271", "title": "Why is this SIMD multiplication not faster than non-SIMD multiplication?", "body": "<p>Your asm code is really OK.\nWhat is not is the way you measure it.\nAs I pointed in comments you should:</p>\n\n<p>a) use way more iterations - 1 million is nothing for modern CPU</p>\n\n<p>b) use HPT for measurement</p>\n\n<p>c) use RDTSC or RDTSCP to count real CPU clocks</p>\n\n<p>Additionally why you are afraid of -O3 opt? Don't forget to build code for your platform so use -march=native. If your CPU supports AVX or AVX2 compiler will take opportunity to produce even better code.</p>\n\n<p>Next thing - give compiler some hints about aliasing and allignment if you know you code.</p>\n\n<p>Here is my version of your <code>mul_c</code> - yes it is GCC specific but you showed you used GCC</p>\n\n<pre><code>void mul_c(double* restrict a, double* restrict b)\n{\n   a = __builtin_assume_aligned (a, 16);\n   b = __builtin_assume_aligned (b, 16);\n\n    for (int i = 0; i != 1000000; ++i)\n    {\n        a[i] = a[i] * b[i];\n    }\n}\n</code></pre>\n\n<p>It will produce:</p>\n\n<pre><code>mul_c(double*, double*):\n        xor     eax, eax\n.L2:\n        movapd  xmm0, XMMWORD PTR [rdi+rax]\n        mulpd   xmm0, XMMWORD PTR [rsi+rax]\n        movaps  XMMWORD PTR [rdi+rax], xmm0\n        add     rax, 16\n        cmp     rax, 8000000\n        jne     .L2\n        rep ret\n</code></pre>\n\n<p>If you have AVX2 and make sure data is 32 bytes aligned it will become</p>\n\n<pre><code>mul_c(double*, double*):\n        xor     eax, eax\n.L2:\n        vmovapd ymm0, YMMWORD PTR [rdi+rax]\n        vmulpd  ymm0, ymm0, YMMWORD PTR [rsi+rax]\n        vmovapd YMMWORD PTR [rdi+rax], ymm0\n        add     rax, 32\n        cmp     rax, 8000000\n        jne     .L2\n        vzeroupper\n        ret\n</code></pre>\n\n<p>So no need for handcrafted asm if compiler can do it for you ;)</p>\n"}, {"comments": [{"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1490263318, "post_id": 42971149, "comment_id": 73037717, "body": "That was my initial though: memory bandwidth bound. But in my tests I still see a significant improvement with vectorization for N=1000000 (2 double arrays so 16 MB)."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490268940, "post_id": 42971149, "comment_id": 73041731, "body": "Well, taking the loop unrolling experiment in the OP (the last experiment) into accont, I think we can conclude that the CPU simply was not able to perform all memory fetches in parallel that are physically possible. So, the OP <i>has</i> hit the memory barrier, just not in terms of throughput, but in terms of latency."}, {"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 0, "creation_date": 1490321690, "post_id": 42971149, "comment_id": 73071899, "body": "@Ermlg Good point. Is there any way of knowing for sure that the implementation is memory bound? Or any other kind of bounds, for instance branch-misprediction bound or input/output bound?"}], "tags": [], "owner": {"reputation": 3670, "user_id": 2831104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fM2Ds.jpg?s=128&g=1", "display_name": "ErmIg", "link": "https://stackoverflow.com/users/2831104/ermig"}, "is_accepted": false, "score": 4, "last_activity_date": 1490259067, "creation_date": 1490259067, "answer_id": 42971149, "question_id": 42964820, "link": "https://stackoverflow.com/questions/42964820/why-is-this-simd-multiplication-not-faster-than-non-simd-multiplication/42971149#42971149", "title": "Why is this SIMD multiplication not faster than non-SIMD multiplication?", "body": "<p>I want to add another point of view to the problem.\nSIMD instructions give big performance boost if there is no memory bound restrictions. But there are too much memory loading and storing operations and too few CPU calculations in current example. So CPU is in time to process incoming data without using SIMD. \nIf you use data of another type (32-bit float for example) or more complex algorithm, memory throughput won't restrict CPU performance and using of SIMD will give more advantages.</p>\n"}, {"comments": [{"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 0, "creation_date": 1490320012, "post_id": 42972674, "comment_id": 73071464, "body": "I tried your program on my system together with my 2 implementations and I added the result to the opening question. I like this answer very much as it&#39;s very detailed and also provides code and measurements as comparison, although before I accept this as an answer, I&#39;d just like a clarification on the question itself. How come that the ordinary C/C++ implementation runs at 1.33 (on my system), while the SIMD implementation runs at 1.09? Is this because it&#39;s memory bound, and if yes, how does one know when your program is memory bound? Are there any ways to optimize this?"}, {"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 0, "creation_date": 1490320340, "post_id": 42972674, "comment_id": 73071544, "body": "Also, how can <code>mul_SSE_OMP</code> be so fast? I put the functions code into godbolt.org but it produces the same assembly code as my <code>mul_asm</code> function, with the only exception that it uses <code>movapd</code> and <code>movaps</code> instead of <code>movupd</code>. I tried to change my function to use these instructions aswell but there was no difference in speed?"}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 0, "creation_date": 1490439344, "post_id": 42972674, "comment_id": 73119514, "body": "@fighting_falcon93, as I explained in test 2 if you compile with <code>-O3</code> the ordinary C implementation is as fast as the SSE version because they both use SIMD."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 0, "creation_date": 1490439454, "post_id": 42972674, "comment_id": 73119538, "body": "@fighting_falcon93, Maybe you mean to ask how the SIMD version is faster than the scalar version if the function is memory bandwidth bound? That&#39;s a good question. Many people here immediately said it&#39;s memory bandwidth bound so the SIMD version should not be faster than the scalar version. That&#39;s not what I see. Being bound by memory bandwidth is not necessarily saying what you see is the maximum memory bandwidth. I get closest to the maximum memory bandwidth using SIMD and multiple threads (using OpenMP). See my updated answer at the end."}, {"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 0, "creation_date": 1490458386, "post_id": 42972674, "comment_id": 73125436, "body": "I&#39;m sorry, maybe I was a bit unclear. What I meant was that when compiling with <code>-O2</code> the compiler only puts 1 <code>double</code> in the <code>xmm0</code> register each iteration. This causes it to make twice as many iterations, twice as many multiplications and twice as many memory operations, but even so, it&#39;s still not twice as slow compared to my implementation in inline assembly. I know that <code>-O3</code> optimizes this, but the questions main focus is around <code>-O2</code> and why the speed difference is so small even though my implementation does only half of the work?"}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 1, "creation_date": 1490600642, "post_id": 42972674, "comment_id": 73165706, "body": "@fighting_falcon93, because your operations is memory bandwidth bound so it does not scale with the number of SIMD lanes or number of threads. However, it still can benefit from multiple threads, unrolling, and SIMD. That&#39;s the part that most people don&#39;t appreciate. I updated my answer from the beginning with more details."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 1, "creation_date": 1490699145, "post_id": 42972674, "comment_id": 73219040, "body": "@fighting_falcon93 I forgot to answer you question about OpenMP.  If you compile with <code>-fopenmp</code> you will see  <code>call    GOMP_parallel</code> and other code so the OpenMP assembly is not the same as without <a href=\"https://godbolt.org/g/yZkH23\" rel=\"nofollow noreferrer\">godbolt.org/g/yZkH23</a>."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 0, "creation_date": 1490790529, "post_id": 42972674, "comment_id": 73268080, "body": "@fighting_falcon93, bad news, I had <code>double mem = 2*sizeof(double)*N*R*1E-9;</code> instead of <code>double mem = 3*sizeof(double)*N*R*1E-9;</code> in my last test of bandwidth which means my numbers were about 30% lower than they should be. With the correct value I get sometimes up to 120% of the max bandwidth. That&#39;s obviously wrong.  I don&#39;t know where the problem is.  It&#39;s either in my formula or the max bandwidth is higher than 34.1 GB/s, or I am doing something wrong with benchmarking. Benchmarking is a pain! But getting more than 100% needs to be understood."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 0, "creation_date": 1490791726, "post_id": 42972674, "comment_id": 73268961, "body": "@fighting_falcon93, okay <code>memset</code> makes sense but <code>memcpy</code> has twice the bandwidth that I expect. I must have forgot something. This leads me to think that I had it correct in my last test."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 0, "creation_date": 1490882803, "post_id": 42972674, "comment_id": 73319641, "body": "@fighting_falcon93, okay, I think I found the problem. I have to initialize the arrays between each test. When I do that <code>memcpy</code> gives the correct bandwidth. I will have to update this tomorrow."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 1, "creation_date": 1490963785, "post_id": 42972674, "comment_id": 73358708, "body": "@fighting_falcon93, I fixed my answer. The problem was that I was using uninitialized arrays. <code>memset(b, 1, sizeof *a * N)</code> fixed it! I rewrote the code. It&#39;s just one file now and much cleaner. I cleaned up the rest of my answer. I am happy with it now."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 0, "creation_date": 1491485471, "post_id": 42972674, "comment_id": 73581971, "body": "There is another problem.  Vex-econded scalar operations are much faster than non-vex-encoded scalar operations <a href=\"https://stackoverflow.com/questions/43256496/avx-scalar-operations-are-much-faster\" title=\"avx scalar operations are much faster\">stackoverflow.com/questions/43256496/&hellip;</a>.  This makes no sense. I will have to update my answer again (or make a new one) when I figure this out. Benchmarking is a PITA!!!"}, {"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 0, "creation_date": 1491492742, "post_id": 42972674, "comment_id": 73587787, "body": "Interesting. I&#39;ll take a look into it aswell, thank you for the info :)"}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 1, "creation_date": 1491822606, "post_id": 42972674, "comment_id": 73707279, "body": "@fighting_falcon93, okay, I updated my answer again with the timing correction. Let me know what you think. I learned a lot from this question."}, {"owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "edited": false, "score": 0, "creation_date": 1491833812, "post_id": 42972674, "comment_id": 73715473, "body": "Very interesting, thanks for the research done and the detailed answer. I&#39;ll experiment further on the things you mentioned to see how I can improve the running time on my machine."}], "tags": [], "owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "is_accepted": true, "score": 9, "last_activity_date": 1491822502, "last_edit_date": 1495542361, "creation_date": 1490263071, "answer_id": 42972674, "question_id": 42964820, "link": "https://stackoverflow.com/questions/42964820/why-is-this-simd-multiplication-not-faster-than-non-simd-multiplication/42972674#42972674", "title": "Why is this SIMD multiplication not faster than non-SIMD multiplication?", "body": "<p>There was <a href=\"https://stackoverflow.com/q/43256496/2542702\">a major bug in the timing function I used</a> for previous benchmarks. This grossly underestimated the bandwidth without vectorization as well as other measurements.  Additionally, there was another problem that was overestimating the bandwidth <a href=\"https://stackoverflow.com/q/43168595/2542702\">due to COW</a> on the array that was read but not written to. Finally, the maximum bandwidth I used was incorrect. I have updated my answer with the corrections and I have left the old answer at the end of this answer.</p>\n\n<hr>\n\n<p>Your operation is memory bandwidth bound. This means the CPU is spending most of its time waiting on slow memory reads and writes. An excellent explanation for this can be found here: <a href=\"https://stackoverflow.com/questions/18159455/why-vectorizing-the-loop-does-not-have-performance-improvement/18159503#18159503\">Why vectorizing the loop does not have performance improvement</a>.</p>\n\n<p>However, I have to disagree slightly with one statement in that answer.</p>\n\n<blockquote>\n  <p>So regardless of how it's optimized, (vectorized, unrolled, etc...) it isn't gonna get much faster.</p>\n</blockquote>\n\n<p>In fact, vectorization<s>, unrolling,</s> and multiple threads can significantly increase the bandwidth even in memory bandwidth bound operations.  The reason is that it is difficult to obtain the maximum memory bandwidth.  A good explanation for this can be found here: <a href=\"https://stackoverflow.com/a/25187492/2542702\">https://stackoverflow.com/a/25187492/2542702</a>. </p>\n\n<p>The rest of my answer will show how vectorization and multiple threads can get closer to the maximum memory bandwidth.</p>\n\n<p>My test system: Ubuntu 16.10, Skylake (i7-6700HQ@2.60GHz), 32GB RAM, dual channel DDR4@2400 GHz. The maximum bandwidth from my system is 38.4 GB/s.</p>\n\n<p>From the code below I produce the following tables. I set the number of thread using OMP_NUM_THREADS e.g. <code>export OMP_NUM_THREADS=4</code>.  The efficiency is <code>bandwidth/max_bandwidth</code>.</p>\n\n<pre><code>-O2 -march=native -fopenmp\nThreads Efficiency\n1       59.2%\n2       76.6%\n4       74.3%\n8       70.7%\n\n-O2 -march=native -fopenmp -funroll-loops\n1       55.8%\n2       76.5%\n4       72.1%\n8       72.2%\n\n-O3 -march=native -fopenmp\n1       63.9%\n2       74.6%\n4       63.9%\n8       63.2%\n\n-O3 -march=native -fopenmp -mprefer-avx128\n1       67.8%\n2       76.0%\n4       63.9%\n8       63.2%\n\n-O3 -march=native -fopenmp -mprefer-avx128 -funroll-loops\n1       68.8%\n2       73.9%\n4       69.0%\n8       66.8%\n</code></pre>\n\n<p>After several iterations of running due to uncertainties in the measurements I have formed the following conclusions:</p>\n\n<ul>\n<li>single threaded scalar operations get more than 50% of the bandwidth.</li>\n<li>two threaded scalar operations get the highest bandwidth.</li>\n<li>single threaded vector operations are faster than single threaded scalar operations.</li>\n<li>single threaded SSE operations are faster than single threaded AVX operations.</li>\n<li>unrolling is not helpful.</li>\n<li>unrolling single-threaded operations is slower than without unrolling.</li>\n<li>more threads than cores (Hyper-Threading) gives a lower bandwidth.</li>\n</ul>\n\n<p><strong>The solution that gives the best bandwidth is scalar operations with two threads.</strong></p>\n\n<p>The code I used to benchmark:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;omp.h&gt;\n\n#define N 10000000\n#define R 100\n\nvoid mul(double *a, double *b) {\n  #pragma omp parallel for\n  for (int i = 0; i&lt;N; i++) a[i] *= b[i];\n}\n\nint main() {\n  double maxbw = 2.4*2*8; // 2.4GHz * 2-channels * 64-bits * 1-byte/8-bits \n  double mem = 3*sizeof(double)*N*R*1E-9; // GB\n\n  double *a = (double*)malloc(sizeof *a * N);\n  double *b = (double*)malloc(sizeof *b * N);\n\n  //due to copy-on-write b must be initialized to get the correct bandwidth\n  //also, GCC will convert malloc + memset(0) to calloc so use memset(1)\n  memset(b, 1, sizeof *b * N);\n\n  double dtime = -omp_get_wtime();\n  for(int i=0; i&lt;R; i++) mul(a,b);\n  dtime += omp_get_wtime();\n  printf(\"%.2f s, %.1f GB/s, %.1f%%\\n\", dtime, mem/dtime, 100*mem/dtime/maxbw);\n\n  free(a), free(b);\n}\n</code></pre>\n\n<hr>\n\n<h2>The old solution with the timing bug</h2>\n\n<p>The modern solution for inline assembly is to use intrinsics. There are still cases where one needs inline assembly but this is not one of them.</p>\n\n<p>One intrinsics solution for you inline assembly approach is simply: </p>\n\n<pre><code>void mul_SSE(double*  a, double*  b) {\n  for (int i = 0; i&lt;N/2; i++) \n      _mm_store_pd(&amp;a[2*i], _mm_mul_pd(_mm_load_pd(&amp;a[2*i]),_mm_load_pd(&amp;b[2*i])));\n}\n</code></pre>\n\n<p>Let me define some test code</p>\n\n<pre><code>#include &lt;x86intrin.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;x86intrin.h&gt;\n#include &lt;omp.h&gt;\n\n#define N 1000000\n#define R 1000\n\ntypedef __attribute__(( aligned(32)))  double aligned_double;\nvoid  (*fp)(aligned_double *a, aligned_double *b);\n\nvoid mul(aligned_double* __restrict a, aligned_double* __restrict b) {\n  for (int i = 0; i&lt;N; i++) a[i] *= b[i];\n}\n\nvoid mul_SSE(double*  a, double*  b) {\n  for (int i = 0; i&lt;N/2; i++) _mm_store_pd(&amp;a[2*i], _mm_mul_pd(_mm_load_pd(&amp;a[2*i]),_mm_load_pd(&amp;b[2*i])));\n}\n\nvoid mul_SSE_NT(double*  a, double*  b) {\n  for (int i = 0; i&lt;N/2; i++) _mm_stream_pd(&amp;a[2*i], _mm_mul_pd(_mm_load_pd(&amp;a[2*i]),_mm_load_pd(&amp;b[2*i])));\n}\n\nvoid mul_SSE_OMP(double*  a, double*  b) {\n  #pragma omp parallel for\n  for (int i = 0; i&lt;N; i++) a[i] *= b[i];\n}\n\nvoid test(aligned_double *a, aligned_double *b, const char *name) {\n  double dtime;\n  const double mem = 3*sizeof(double)*N*R/1024/1024/1024;\n  const double maxbw = 34.1;\n  dtime = -omp_get_wtime();\n  for(int i=0; i&lt;R; i++) fp(a,b);\n  dtime += omp_get_wtime();\n  printf(\"%s \\t time %.2f s, %.1f GB/s, efficency %.1f%%\\n\", name, dtime, mem/dtime, 100*mem/dtime/maxbw);\n}\n\nint main() {\n  double *a = (double*)_mm_malloc(sizeof *a * N, 32);\n  double *b = (double*)_mm_malloc(sizeof *b * N, 32);\n\n  //b must be initialized to get the correct bandwidth!!!\n  memset(a, 1, sizeof *a * N);\n  memset(b, 1, sizeof *a * N);\n\n  fp = mul,         test(a,b, \"mul        \");\n  fp = mul_SSE,     test(a,b, \"mul_SSE    \");\n  fp = mul_SSE_NT,  test(a,b, \"mul_SSE_NT \");\n  fp = mul_SSE_OMP, test(a,b, \"mul_SSE_OMP\");\n\n  _mm_free(a), _mm_free(b);\n}\n</code></pre>\n\n<p>Now the first test</p>\n\n<pre><code>g++ -O2 -fopenmp test.cpp\n./a.out\nmul              time 1.67 s, 13.1 GB/s, efficiency 38.5%\nmul_SSE          time 1.00 s, 21.9 GB/s, efficiency 64.3%\nmul_SSE_NT       time 1.05 s, 20.9 GB/s, efficiency 61.4%\nmul_SSE_OMP      time 0.74 s, 29.7 GB/s, efficiency 87.0%\n</code></pre>\n\n<p>So with <code>-O2</code> which does not vectorize loops we see that the intrinsic SSE version is much faster than the plain C solution <code>mul</code>. <code>efficiency = bandwith_measured/max_bandwidth</code> where the max is 34.1 GB/s for my system. </p>\n\n<p>Second test</p>\n\n<pre><code>g++ -O3 -fopenmp test.cpp\n./a.out\nmul              time 1.05 s, 20.9 GB/s, efficiency 61.2%\nmul_SSE          time 0.99 s, 22.3 GB/s, efficiency 65.3%\nmul_SSE_NT       time 1.01 s, 21.7 GB/s, efficiency 63.7%\nmul_SSE_OMP      time 0.68 s, 32.5 GB/s, efficiency 95.2%\n</code></pre>\n\n<p>With <code>-O3</code> vectorizes the loop and the intrinsic function offers essentially no advantage.</p>\n\n<p>Third test</p>\n\n<pre><code>g++ -O3 -fopenmp -funroll-loops test.cpp\n./a.out\nmul              time 0.85 s, 25.9 GB/s, efficency 76.1%\nmul_SSE          time 0.84 s, 26.2 GB/s, efficency 76.7%\nmul_SSE_NT       time 1.06 s, 20.8 GB/s, efficency 61.0%\nmul_SSE_OMP      time 0.76 s, 29.0 GB/s, efficency 85.0%\n</code></pre>\n\n<p>With <code>-funroll-loops</code> GCC unrolls the loops eight times and we see a significant improvement except for the non-temporal store solution and not real advantage for OpenMP solution.  </p>\n\n<p>Before unrolling the loop the assembly for <code>mul</code> wiht <code>-O3</code> is </p>\n\n<pre><code>    xor     eax, eax\n.L2:\n    movupd  xmm0, XMMWORD PTR [rsi+rax]\n    mulpd   xmm0, XMMWORD PTR [rdi+rax]\n    movaps  XMMWORD PTR [rdi+rax], xmm0\n    add     rax, 16\n    cmp     rax, 8000000\n    jne     .L2\n    rep ret\n</code></pre>\n\n<p>With <code>-O3 -funroll-loops</code> the assembly for <code>mul</code> is:</p>\n\n<pre><code>   xor     eax, eax\n.L2:\n    movupd  xmm0, XMMWORD PTR [rsi+rax]\n    movupd  xmm1, XMMWORD PTR [rsi+16+rax]\n    mulpd   xmm0, XMMWORD PTR [rdi+rax]\n    movupd  xmm2, XMMWORD PTR [rsi+32+rax]\n    mulpd   xmm1, XMMWORD PTR [rdi+16+rax]\n    movupd  xmm3, XMMWORD PTR [rsi+48+rax]\n    mulpd   xmm2, XMMWORD PTR [rdi+32+rax]\n    movupd  xmm4, XMMWORD PTR [rsi+64+rax]\n    mulpd   xmm3, XMMWORD PTR [rdi+48+rax]\n    movupd  xmm5, XMMWORD PTR [rsi+80+rax]\n    mulpd   xmm4, XMMWORD PTR [rdi+64+rax]\n    movupd  xmm6, XMMWORD PTR [rsi+96+rax]\n    mulpd   xmm5, XMMWORD PTR [rdi+80+rax]\n    movupd  xmm7, XMMWORD PTR [rsi+112+rax]\n    mulpd   xmm6, XMMWORD PTR [rdi+96+rax]\n    movaps  XMMWORD PTR [rdi+rax], xmm0\n    mulpd   xmm7, XMMWORD PTR [rdi+112+rax]\n    movaps  XMMWORD PTR [rdi+16+rax], xmm1\n    movaps  XMMWORD PTR [rdi+32+rax], xmm2\n    movaps  XMMWORD PTR [rdi+48+rax], xmm3\n    movaps  XMMWORD PTR [rdi+64+rax], xmm4\n    movaps  XMMWORD PTR [rdi+80+rax], xmm5\n    movaps  XMMWORD PTR [rdi+96+rax], xmm6\n    movaps  XMMWORD PTR [rdi+112+rax], xmm7\n    sub     rax, -128\n    cmp     rax, 8000000\n    jne     .L2\n    rep ret\n</code></pre>\n\n<p>Fourth test </p>\n\n<pre><code>g++ -O3 -fopenmp -mavx test.cpp\n./a.out\nmul              time 0.87 s, 25.3 GB/s, efficiency 74.3%\nmul_SSE          time 0.88 s, 24.9 GB/s, efficiency 73.0%\nmul_SSE_NT       time 1.07 s, 20.6 GB/s, efficiency 60.5%\nmul_SSE_OMP      time 0.76 s, 29.0 GB/s, efficiency 85.2%\n</code></pre>\n\n<p>Now the non-intrinsic function is the fastest (excluding the OpenMP version).</p>\n\n<p>So there is no reason to use intrinsics or inline assembly in this case because we can get the best performance with appropriate compiler options (e.g. <code>-O3</code>, <code>-funroll-loops</code>, <code>-mavx</code>).</p>\n\n<p>Test system: Ubuntu 16.10, Skylake (i7-6700HQ@2.60GHz), 32GB RAM. Maximum memory bandwidth (34.1 GB/s) <a href=\"https://ark.intel.com/products/88967/Intel-Core-i7-6700HQ-Processor-6M-Cache-up-to-3_50-GHz\" rel=\"nofollow noreferrer\">https://ark.intel.com/products/88967/Intel-Core-i7-6700HQ-Processor-6M-Cache-up-to-3_50-GHz</a></p>\n\n<hr>\n\n<p>Here is another solution worth considering. <a href=\"https://stackoverflow.com/q/25921612/2542702\">The <code>cmp</code> instruction is not necessary</a> if we count from -N up to zero and access the arrays as <code>N+i</code>. GCC should have fixed this a long time ago. It eliminates one instruction (though due to macro-op fusion the cmp and jmp often count as one micro-op).</p>\n\n<pre><code>void mul_SSE_v2(double*  a, double*  b) {\n  for (ptrdiff_t i = -N; i&lt;0; i+=2)\n    _mm_store_pd(&amp;a[N + i], _mm_mul_pd(_mm_load_pd(&amp;a[N + i]),_mm_load_pd(&amp;b[N + i])));\n</code></pre>\n\n<p>Assembly with <code>-O3</code></p>\n\n<pre><code>mul_SSE_v2(double*, double*):\n    mov     rax, -1000000\n.L9:\n    movapd  xmm0, XMMWORD PTR [rdi+8000000+rax*8]\n    mulpd   xmm0, XMMWORD PTR [rsi+8000000+rax*8]\n    movaps  XMMWORD PTR [rdi+8000000+rax*8], xmm0\n    add     rax, 2\n    jne     .L9\n    rep ret\n}\n</code></pre>\n\n<p>This optimization will only possibly be helpful the arrays fit e.g. the L1 cache i.e. not reading from main memory.</p>\n\n<hr>\n\n<p>I finally found a way to get the plain C solution to not generate the <code>cmp</code> instruction.</p>\n\n<pre><code>void mul_v2(aligned_double* __restrict a, aligned_double* __restrict b) {\n  for (int i = -N; i&lt;0; i++) a[i] *= b[i];\n}\n</code></pre>\n\n<p>And then call the function from a separate object file like this <code>mul_v2(&amp;a[N],&amp;b[N])</code> so this is perhaps the best solution. However, if you call the function from the same object file (translation unit) as the one it's defined in the GCC generates the <code>cmp</code> instruction again.</p>\n\n<p>Also,</p>\n\n<pre><code>void mul_v3(aligned_double* __restrict a, aligned_double* __restrict b) {\n  for (int i = -N; i&lt;0; i++) a[N+i] *= b[N+i];\n}\n</code></pre>\n\n<p>still generates the <code>cmp</code> instruction and generates the same assembly as the <code>mul</code> function.</p>\n\n<hr>\n\n<p>The function <code>mul_SSE_NT</code> is silly. It uses non-temporal stores which are only useful when only writing to memory but since the function reads and writes to the same address non-temporal stores are not only useless they give inferior results.</p>\n\n<hr>\n\n<p>Previous versions of this answer were getting the wrong bandwidth. The reason was when the arrays were not initialized.</p>\n"}], "owner": {"reputation": 245, "user_id": 2854748, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/66cd6ee62b9302587f51ee6478acc1f4?s=128&d=identicon&r=PG&f=1", "display_name": "fighting_falcon93", "link": "https://stackoverflow.com/users/2854748/fighting-falcon93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2881, "favorite_count": 1, "accepted_answer_id": 42972674, "answer_count": 3, "score": 12, "last_activity_date": 1491822502, "creation_date": 1490226962, "last_edit_date": 1490319580, "question_id": 42964820, "link": "https://stackoverflow.com/questions/42964820/why-is-this-simd-multiplication-not-faster-than-non-simd-multiplication", "title": "Why is this SIMD multiplication not faster than non-SIMD multiplication?", "body": "<p>Let's assume that we have a function that multiplies two arrays of 1000000 doubles each. In C/C++ the function looks like this:</p>\n\n<pre><code>void mul_c(double* a, double* b)\n{\n    for (int i = 0; i != 1000000; ++i)\n    {\n        a[i] = a[i] * b[i];\n    }\n}\n</code></pre>\n\n<p>The compiler produces the following assembly with <code>-O2</code>:</p>\n\n<pre><code>mul_c(double*, double*):\n        xor     eax, eax\n.L2:\n        movsd   xmm0, QWORD PTR [rdi+rax]\n        mulsd   xmm0, QWORD PTR [rsi+rax]\n        movsd   QWORD PTR [rdi+rax], xmm0\n        add     rax, 8\n        cmp     rax, 8000000\n        jne     .L2\n        rep ret\n</code></pre>\n\n<p>From the above assembly it seems that the compiler uses the SIMD instructions, but it only multiplies one double each iteration. So I decided to write the same function in inline assembly instead, where I make full use of the <code>xmm0</code> register and multiply two doubles in one go:</p>\n\n<pre><code>void mul_asm(double* a, double* b)\n{\n    asm volatile\n    (\n        \".intel_syntax noprefix             \\n\\t\"\n        \"xor    rax, rax                    \\n\\t\"\n        \"0:                                 \\n\\t\"\n        \"movupd xmm0, xmmword ptr [rdi+rax] \\n\\t\"\n        \"mulpd  xmm0, xmmword ptr [rsi+rax] \\n\\t\"\n        \"movupd xmmword ptr [rdi+rax], xmm0 \\n\\t\"\n        \"add    rax, 16                     \\n\\t\"\n        \"cmp    rax, 8000000                \\n\\t\"\n        \"jne    0b                          \\n\\t\"\n        \".att_syntax noprefix               \\n\\t\"\n\n        : \n        : \"D\" (a), \"S\" (b)\n        : \"memory\", \"cc\"\n    );\n}\n</code></pre>\n\n<p>After measuring the execution time individually for both of these functions, it seems that both of them takes 1 ms to complete:</p>\n\n<pre><code>&gt; gcc -O2 main.cpp\n&gt; ./a.out &lt; input\n\nmul_c: 1 ms\nmul_asm: 1 ms\n\n[a lot of doubles...]\n</code></pre>\n\n<p>I expected the SIMD implementation to be atleast twice as fast (0 ms) as there is only half the amount of multiplications/memory instructions.</p>\n\n<p>So my question is: <strong>Why isn't the SIMD implementation faster than the ordinary C/C++ implementation when the SIMD implementation only does half the amount of multiplications/memory instructions?</strong></p>\n\n<p>Here's the full program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/time.h&gt;\n\nvoid mul_c(double* a, double* b)\n{\n    for (int i = 0; i != 1000000; ++i)\n    {\n        a[i] = a[i] * b[i];\n    }\n}\n\nvoid mul_asm(double* a, double* b)\n{\n    asm volatile\n    (\n        \".intel_syntax noprefix             \\n\\t\"\n        \"xor    rax, rax                    \\n\\t\"\n        \"0:                                 \\n\\t\"\n        \"movupd xmm0, xmmword ptr [rdi+rax] \\n\\t\"\n        \"mulpd  xmm0, xmmword ptr [rsi+rax] \\n\\t\"\n        \"movupd xmmword ptr [rdi+rax], xmm0 \\n\\t\"\n        \"add    rax, 16                     \\n\\t\"\n        \"cmp    rax, 8000000                \\n\\t\"\n        \"jne    0b                          \\n\\t\"\n        \".att_syntax noprefix               \\n\\t\"\n\n        : \n        : \"D\" (a), \"S\" (b)\n        : \"memory\", \"cc\"\n    );\n}\n\nint main()\n{\n    struct timeval t1;\n    struct timeval t2;\n    unsigned long long time;\n\n    double* a = (double*)malloc(sizeof(double) * 1000000);\n    double* b = (double*)malloc(sizeof(double) * 1000000);\n    double* c = (double*)malloc(sizeof(double) * 1000000);\n\n    for (int i = 0; i != 1000000; ++i)\n    {\n        double v;\n        scanf(\"%lf\", &amp;v);\n        a[i] = v;\n        b[i] = v;\n        c[i] = v;\n    }\n\n    gettimeofday(&amp;t1, NULL);\n    mul_c(a, b);\n    gettimeofday(&amp;t2, NULL);\n    time = 1000 * (t2.tv_sec - t1.tv_sec) + (t2.tv_usec - t1.tv_usec) / 1000;\n    printf(\"mul_c: %llu ms\\n\", time);\n\n    gettimeofday(&amp;t1, NULL);\n    mul_asm(b, c);\n    gettimeofday(&amp;t2, NULL);\n    time = 1000 * (t2.tv_sec - t1.tv_sec) + (t2.tv_usec - t1.tv_usec) / 1000;\n    printf(\"mul_asm: %llu ms\\n\\n\", time);\n\n    for (int i = 0; i != 1000000; ++i)\n    {\n        printf(\"%lf\\t\\t\\t%lf\\n\", a[i], b[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I also tried to to make use of all <code>xmm</code> registers (0-7) and remove instruction dependencies to get better parallell computing:</p>\n\n<pre><code>void mul_asm(double* a, double* b)\n{\n    asm volatile\n    (\n        \".intel_syntax noprefix                 \\n\\t\"\n        \"xor    rax, rax                        \\n\\t\"\n        \"0:                                     \\n\\t\"\n        \"movupd xmm0, xmmword ptr [rdi+rax]     \\n\\t\"\n        \"movupd xmm1, xmmword ptr [rdi+rax+16]  \\n\\t\"\n        \"movupd xmm2, xmmword ptr [rdi+rax+32]  \\n\\t\"\n        \"movupd xmm3, xmmword ptr [rdi+rax+48]  \\n\\t\"\n        \"movupd xmm4, xmmword ptr [rdi+rax+64]  \\n\\t\"\n        \"movupd xmm5, xmmword ptr [rdi+rax+80]  \\n\\t\"\n        \"movupd xmm6, xmmword ptr [rdi+rax+96]  \\n\\t\"\n        \"movupd xmm7, xmmword ptr [rdi+rax+112] \\n\\t\"\n        \"mulpd  xmm0, xmmword ptr [rsi+rax]     \\n\\t\"\n        \"mulpd  xmm1, xmmword ptr [rsi+rax+16]  \\n\\t\"\n        \"mulpd  xmm2, xmmword ptr [rsi+rax+32]  \\n\\t\"\n        \"mulpd  xmm3, xmmword ptr [rsi+rax+48]  \\n\\t\"\n        \"mulpd  xmm4, xmmword ptr [rsi+rax+64]  \\n\\t\"\n        \"mulpd  xmm5, xmmword ptr [rsi+rax+80]  \\n\\t\"\n        \"mulpd  xmm6, xmmword ptr [rsi+rax+96]  \\n\\t\"\n        \"mulpd  xmm7, xmmword ptr [rsi+rax+112] \\n\\t\"\n        \"movupd xmmword ptr [rdi+rax], xmm0     \\n\\t\"\n        \"movupd xmmword ptr [rdi+rax+16], xmm1  \\n\\t\"\n        \"movupd xmmword ptr [rdi+rax+32], xmm2  \\n\\t\"\n        \"movupd xmmword ptr [rdi+rax+48], xmm3  \\n\\t\"\n        \"movupd xmmword ptr [rdi+rax+64], xmm4  \\n\\t\"\n        \"movupd xmmword ptr [rdi+rax+80], xmm5  \\n\\t\"\n        \"movupd xmmword ptr [rdi+rax+96], xmm6  \\n\\t\"\n        \"movupd xmmword ptr [rdi+rax+112], xmm7 \\n\\t\"\n        \"add    rax, 128                        \\n\\t\"\n        \"cmp    rax, 8000000                    \\n\\t\"\n        \"jne    0b                              \\n\\t\"\n        \".att_syntax noprefix                   \\n\\t\"\n\n        : \n        : \"D\" (a), \"S\" (b)\n        : \"memory\", \"cc\"\n    );\n}\n</code></pre>\n\n<p>But it still runs at 1 ms, the same speed as the ordinary C/C++ implementation.</p>\n\n<hr>\n\n<h1>UPDATES</h1>\n\n<p>As suggested by answers/comments, I've implemented another way of measuring the execution time:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid mul_c(double* a, double* b)\n{\n    for (int i = 0; i != 1000000; ++i)\n    {\n        a[i] = a[i] * b[i];\n    }\n}\n\nvoid mul_asm(double* a, double* b)\n{\n    asm volatile\n    (\n        \".intel_syntax noprefix             \\n\\t\"\n        \"xor    rax, rax                    \\n\\t\"\n        \"0:                                 \\n\\t\"\n        \"movupd xmm0, xmmword ptr [rdi+rax] \\n\\t\"\n        \"mulpd  xmm0, xmmword ptr [rsi+rax] \\n\\t\"\n        \"movupd xmmword ptr [rdi+rax], xmm0 \\n\\t\"\n        \"add    rax, 16                     \\n\\t\"\n        \"cmp    rax, 8000000                \\n\\t\"\n        \"jne    0b                          \\n\\t\"\n        \".att_syntax noprefix               \\n\\t\"\n\n        : \n        : \"D\" (a), \"S\" (b)\n        : \"memory\", \"cc\"\n    );\n}\n\nvoid mul_asm2(double* a, double* b)\n{\n    asm volatile\n    (\n        \".intel_syntax noprefix                 \\n\\t\"\n        \"xor    rax, rax                        \\n\\t\"\n        \"0:                                     \\n\\t\"\n        \"movupd xmm0, xmmword ptr [rdi+rax]     \\n\\t\"\n        \"movupd xmm1, xmmword ptr [rdi+rax+16]  \\n\\t\"\n        \"movupd xmm2, xmmword ptr [rdi+rax+32]  \\n\\t\"\n        \"movupd xmm3, xmmword ptr [rdi+rax+48]  \\n\\t\"\n        \"movupd xmm4, xmmword ptr [rdi+rax+64]  \\n\\t\"\n        \"movupd xmm5, xmmword ptr [rdi+rax+80]  \\n\\t\"\n        \"movupd xmm6, xmmword ptr [rdi+rax+96]  \\n\\t\"\n        \"movupd xmm7, xmmword ptr [rdi+rax+112] \\n\\t\"\n        \"mulpd  xmm0, xmmword ptr [rsi+rax]     \\n\\t\"\n        \"mulpd  xmm1, xmmword ptr [rsi+rax+16]  \\n\\t\"\n        \"mulpd  xmm2, xmmword ptr [rsi+rax+32]  \\n\\t\"\n        \"mulpd  xmm3, xmmword ptr [rsi+rax+48]  \\n\\t\"\n        \"mulpd  xmm4, xmmword ptr [rsi+rax+64]  \\n\\t\"\n        \"mulpd  xmm5, xmmword ptr [rsi+rax+80]  \\n\\t\"\n        \"mulpd  xmm6, xmmword ptr [rsi+rax+96]  \\n\\t\"\n        \"mulpd  xmm7, xmmword ptr [rsi+rax+112] \\n\\t\"\n        \"movupd xmmword ptr [rdi+rax], xmm0     \\n\\t\"\n        \"movupd xmmword ptr [rdi+rax+16], xmm1  \\n\\t\"\n        \"movupd xmmword ptr [rdi+rax+32], xmm2  \\n\\t\"\n        \"movupd xmmword ptr [rdi+rax+48], xmm3  \\n\\t\"\n        \"movupd xmmword ptr [rdi+rax+64], xmm4  \\n\\t\"\n        \"movupd xmmword ptr [rdi+rax+80], xmm5  \\n\\t\"\n        \"movupd xmmword ptr [rdi+rax+96], xmm6  \\n\\t\"\n        \"movupd xmmword ptr [rdi+rax+112], xmm7 \\n\\t\"\n        \"add    rax, 128                        \\n\\t\"\n        \"cmp    rax, 8000000                    \\n\\t\"\n        \"jne    0b                              \\n\\t\"\n        \".att_syntax noprefix                   \\n\\t\"\n\n        : \n        : \"D\" (a), \"S\" (b)\n        : \"memory\", \"cc\"\n    );\n}\n\nunsigned long timestamp()\n{\n    unsigned long a;\n\n    asm volatile\n    (\n        \".intel_syntax noprefix \\n\\t\"\n        \"xor   rax, rax         \\n\\t\"\n        \"xor   rdx, rdx         \\n\\t\"\n        \"RDTSCP                 \\n\\t\"\n        \"shl   rdx, 32          \\n\\t\"\n        \"or    rax, rdx         \\n\\t\"\n        \".att_syntax noprefix   \\n\\t\"\n\n        : \"=a\" (a)\n        : \n        : \"memory\", \"cc\"\n    );\n\n    return a;\n}\n\nint main()\n{\n    unsigned long t1;\n    unsigned long t2;\n\n    double* a;\n    double* b;\n\n    a = (double*)malloc(sizeof(double) * 1000000);\n    b = (double*)malloc(sizeof(double) * 1000000);\n\n    for (int i = 0; i != 1000000; ++i)\n    {\n        double v;\n        scanf(\"%lf\", &amp;v);\n        a[i] = v;\n        b[i] = v;\n    }\n\n    t1 = timestamp();\n    mul_c(a, b);\n    //mul_asm(a, b);\n    //mul_asm2(a, b);\n    t2 = timestamp();\n    printf(\"mul_c: %lu cycles\\n\\n\", t2 - t1);\n\n    for (int i = 0; i != 1000000; ++i)\n    {\n        printf(\"%lf\\t\\t\\t%lf\\n\", a[i], b[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>When I run the program with this measurement, I get this result:</p>\n\n<pre><code>mul_c:    ~2163971628 cycles\nmul_asm:  ~2532045184 cycles\nmul_asm2: ~5230488    cycles &lt;-- what???\n</code></pre>\n\n<p>Two things are worth a notice here, first of all, the cycles count vary a LOT, and I assume that's because of the operating system allowing other processes to run inbetween. Is there any way to prevent that or only count the cycles while my program is executed? Also, <code>mul_asm2</code> produces identical output compared to the other two, but it so much faster, how?</p>\n\n<hr>\n\n<p>I tried Z boson's program on my system together with my 2 implementations and got the following result:</p>\n\n<pre><code>&gt; g++ -O2 -fopenmp main.cpp\n&gt; ./a.out\nmul         time 1.33, 18.08 GB/s\nmul_SSE     time 1.13, 21.24 GB/s\nmul_SSE_NT  time 1.51, 15.88 GB/s\nmul_SSE_OMP time 0.79, 30.28 GB/s\nmul_SSE_v2  time 1.12, 21.49 GB/s\nmul_v2      time 1.26, 18.99 GB/s\nmul_asm     time 1.12, 21.50 GB/s\nmul_asm2    time 1.09, 22.08 GB/s\n</code></pre>\n"}, {"tags": ["c++", "vulkan"], "answers": [{"comments": [{"owner": {"reputation": 8395, "user_id": 3007154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7293bd97c47febd218463c27b394c6?s=128&d=identicon&r=PG&f=1", "display_name": "krOoze", "link": "https://stackoverflow.com/users/3007154/krooze"}, "edited": false, "score": 1, "creation_date": 1490277034, "post_id": 42964851, "comment_id": 73047873, "body": "Alternatively he could store <code>pipelineCacheUUID</code> to id particular device without keeping instance alive."}, {"owner": {"reputation": 8395, "user_id": 3007154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7293bd97c47febd218463c27b394c6?s=128&d=identicon&r=PG&f=1", "display_name": "krOoze", "link": "https://stackoverflow.com/users/3007154/krooze"}, "edited": false, "score": 0, "creation_date": 1490277085, "post_id": 42964851, "comment_id": 73047915, "body": "Actually, there is such guarantee for the <b>same</b> <code>VkInstance</code>: &quot;2.4.1. Lifetime of Retrieved Results&quot;."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 8395, "user_id": 3007154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7293bd97c47febd218463c27b394c6?s=128&d=identicon&r=PG&f=1", "display_name": "krOoze", "link": "https://stackoverflow.com/users/3007154/krooze"}, "edited": false, "score": 0, "creation_date": 1490277560, "post_id": 42964851, "comment_id": 73048324, "body": "@krOoze: Actually, <code>pipelineCacheUUID</code> won&#39;t work. I&#39;ve added an explanation of why not."}, {"owner": {"reputation": 8395, "user_id": 3007154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7293bd97c47febd218463c27b394c6?s=128&d=identicon&r=PG&f=1", "display_name": "krOoze", "link": "https://stackoverflow.com/users/3007154/krooze"}, "edited": false, "score": 0, "creation_date": 1490294097, "post_id": 42964851, "comment_id": 73060499, "body": "Interesting. That is actually in contradiction of what the spec says: &quot;<code>pipelineCacheUUID</code> is an array of size <code>VK_UUID_SIZE</code>, containing 8-bit values that represent a <b>universally unique identifier</b> for <b>the device</b>.&quot; Funny thing is they even say so in the Issue you quote: &quot;despite its description in the specification&quot;. :)"}, {"owner": {"reputation": 8395, "user_id": 3007154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7293bd97c47febd218463c27b394c6?s=128&d=identicon&r=PG&f=1", "display_name": "krOoze", "link": "https://stackoverflow.com/users/3007154/krooze"}, "edited": false, "score": 1, "creation_date": 1490294475, "post_id": 42964851, "comment_id": 73060697, "body": "Additionally I would argue that one could want to actually identify device-driver combination, not the actual raw device for the purpose in the Q."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 2, "last_activity_date": 1490277541, "last_edit_date": 1490277541, "creation_date": 1490227120, "answer_id": 42964851, "question_id": 42964751, "link": "https://stackoverflow.com/questions/42964751/are-the-return-values-vkenumeratephysicaldevices-consistent-between-different-vk/42964851#42964851", "title": "Are the return values vkEnumeratePhysicalDevices consistent between different VkInstances?", "body": "<p>The specification provides no such guarantee. So your idea isn't guaranteed to work at all.</p>\n\n<p>It would be better for you to keep the <code>VkInstance</code> around, rather than creating one solely for the purposes of device enumeration. So instead of just storing an index, you store the <code>VkPhysicalDevice</code> and the instance. If they're null, then Vulkan isn't available.</p>\n\n<p>Attempting to use the <code>pipelineCacheUUID</code> won't work either, as the specification does not require it to uniquely identify a device:</p>\n\n<blockquote>\n  <p>used to identify a compatible device and driver combination to use when serializing and de-serializing pipeline state.</p>\n</blockquote>\n\n<p>There's no guarantee that it won't change between instances. However, if you have access to the extensions VK_KHR_get_physical_device_properties2 and VK_KHX_external_memory_capabilities, then you can query the <code>VkPhysicalDeviceIDPropertiesKHX</code> from a device. That includes a <code>deviceUUID</code> which is explicitly required to uniquely identify a particular device, \"across API and driver boundaries\".</p>\n"}], "owner": {"reputation": 399, "user_id": 5539085, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/17c6cd3d7f9cf13f15b3663a6ea97884?s=128&d=identicon&r=PG&f=1", "display_name": "user112513312", "link": "https://stackoverflow.com/users/5539085/user112513312"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 42964851, "answer_count": 1, "score": 0, "last_activity_date": 1490277541, "creation_date": 1490226561, "question_id": 42964751, "link": "https://stackoverflow.com/questions/42964751/are-the-return-values-vkenumeratephysicaldevices-consistent-between-different-vk", "title": "Are the return values vkEnumeratePhysicalDevices consistent between different VkInstances?", "body": "<p>Situation:</p>\n\n<p>I have a function that determines whether or not there is a Vulkan-supported device and returns that device if one is found. If no such device is found, it will return a null value and a legacy code path will be used.</p>\n\n<p>The issue is that, because this function needs to be called <em>before</em> the application uses the Vulkan code path, it has to create it's own temporary <code>VkInstance</code>. The function calls <code>vkEnumeratePhysicalDevices</code> to get the <code>VkPhysicalDevice</code>s, and uses <code>vkGetPhysicalDeviceProperties</code> to determine whether or not there is a suitable device.</p>\n\n<p>The <code>VkPhysicalDevice</code> itself cannot be returned since it's tied to the <code>VkInstance</code> (which is temporary and will be destroyed before the function returns), so instead the function returns the index of the device in the array under the assumption that <code>vkEnumeratePhysicalDevices</code>will return the same array when called a second time on a different <code>VkInstance</code>.</p>\n\n<p>Question:</p>\n\n<p>Is <code>vkEnumeratePhysicalDevices</code> guaranteed to return the same values when called using two different <code>VkInstances</code>? This is assuming the same machine and same instance of the application.</p>\n"}, {"tags": ["c++", "opencv", "computer-vision", "linear-algebra", "pca"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1490230357, "post_id": 42964744, "comment_id": 73024643, "body": "Probably the &quot;eigen&quot; library can help here"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1490230614, "post_id": 42964744, "comment_id": 73024706, "body": "Btw, just reading the abstract of the paper..  why you want to do this? This doesn&#39;t seem a good paper..."}, {"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1490230657, "post_id": 42964744, "comment_id": 73024718, "body": "@Miki why do you say that?"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1490230812, "post_id": 42964744, "comment_id": 73024761, "body": "It&#39;s not published in a top journal/conference for computer vision.. and in 2016 it messes with sift... probably using the last layer of a googlenet as descriptor will give much better results (but I didn&#39;t read the full paper... it&#39;s just an &quot;educated guess&quot;)"}, {"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 1, "creation_date": 1490230979, "post_id": 42964744, "comment_id": 73024801, "body": "@Miki we can&#39;t integrate CNN stuff with VLAD encoding and we want something extremely fast to compute and to find the most similar image in say 10k images in few milliseconds. From my knowledge, this isn&#39;t possible using CNNs (even exploiting GPUs), while a parallel solution on classic descriptors and VLAD encoding in say 128 dimensions could be. It&#39;s a little off topic, but what you think?"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1490231594, "post_id": 42964744, "comment_id": 73024971, "body": "I was thinking of the last FC layer to replace the vlad as final image descriptor. Then you still comparare 4096 dim vectors.... but too many details missing of course... I may be wrong"}, {"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1490257502, "post_id": 42964744, "comment_id": 73033747, "body": "@Miki I don&#39;t know nothing about CNNs, but how do you compare two of these vectors that you&#39;re talking about? With VLAD, you use euclidean distance for that."}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1490261149, "post_id": 42964744, "comment_id": 73036101, "body": "You can use euclidean distance as well..."}, {"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1490261471, "post_id": 42964744, "comment_id": 73036366, "body": "@Miki do you know any already-done implementation of this? I don&#39;t know much about CNNs and I don&#39;t have much time actually to learn them. Thanks for your help btw, I really appreciate it."}, {"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1490261522, "post_id": 42964744, "comment_id": 73036403, "body": "@Miki beside, could you please give a look at <a href=\"http://stackoverflow.com/questions/42971307/hessian-affine-detector-in-opencv\">this</a> question?"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1490289041, "post_id": 42964744, "comment_id": 73057372, "body": "No idea about that... However, I think something like <a href=\"http://www.iis.sinica.edu.tw/~kevinlin311.tw/cvpr16-deepbit.pdf\" rel=\"nofollow noreferrer\">this</a> could easily solve a lot of your problems... <a href=\"https://github.com/kevinlin311tw/cvpr16-deepbit\" rel=\"nofollow noreferrer\">github</a>"}], "owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490226520, "creation_date": 1490226520, "question_id": 42964744, "link": "https://stackoverflow.com/questions/42964744/pca-in-thousands-of-dimensions", "title": "PCA in thousands of dimensions", "body": "<p>I have vectors in 4096 <a href=\"http://www.vlfeat.org/overview/encodings.html\" rel=\"nofollow noreferrer\">VLAD codes</a>, each one of them representing an image. </p>\n\n<p>I have to run PCA on them <em>without reducing their dimension</em> on learning datasets with less than 4096 images (e.g., the <a href=\"http://lear.inrialpes.fr/people/jegou/data.php\" rel=\"nofollow noreferrer\">Holiday dataset</a> with &lt;2k images.) to obtain the rotation matrix <code>A</code>.</p>\n\n<p>In <a href=\"http://search.ieice.org/bin/summary.php?id=e99-d_10_2656\" rel=\"nofollow noreferrer\">this paper</a> (which also explains why I need to run this PCA without dimensionality reduction) they solved the problem with this approach:</p>\n\n<blockquote>\n  <p>For efficient computation of A, we compute at most the first 1,024 eigenvectors by eigendecomposition of the covariance matrix, and\n  the remaining orthogonal complements up to D-dimensional are filled using Gram-Schmidt orthogonalization.</p>\n</blockquote>\n\n<p>Now, how do I implement this using C++ libraries? I'm using OpenCV, but <a href=\"http://docs.opencv.org/trunk/d3/d8d/classcv_1_1PCA.html\" rel=\"nofollow noreferrer\">cv::PCA</a> seems not to offer such a strategy. Is there any way to do this?</p>\n"}, {"tags": ["c++", "sqlite"], "comments": [{"owner": {"reputation": 8173, "user_id": 3299580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5442c85b57162abfc606d86c0083e1d?s=128&d=identicon&r=PG&f=1", "display_name": "The Dark", "link": "https://stackoverflow.com/users/3299580/the-dark"}, "edited": false, "score": 2, "creation_date": 1490226654, "post_id": 42964641, "comment_id": 73023561, "body": "A couple of suggestions - possibly your trace writes aren&#39;t being flushed before the crash, use <code>std:endl</code> to flush them. There is also a ton of methods you aren&#39;t defining in your structure, possibly sqlite is calling one of those (<code>xFullPathname</code> springs to mind), you might need to add dummy functions for the rest. I couldn&#39;t find any documentation on the minumum set of functions you have to define."}, {"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "reply_to_user": {"reputation": 8173, "user_id": 3299580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5442c85b57162abfc606d86c0083e1d?s=128&d=identicon&r=PG&f=1", "display_name": "The Dark", "link": "https://stackoverflow.com/users/3299580/the-dark"}, "edited": false, "score": 0, "creation_date": 1490228316, "post_id": 42964641, "comment_id": 73024060, "body": "@TheDark : This is spot on. Providing a dummy <code>xFullPathname</code> implementation causes the program not to crash anymore, but at the same time I still don&#39;t see the prints from <code>vfs_open</code>. The OP should probably check the return value of <code>sqlite3_open_v2</code>. BTW : You might want to compile your own SQLite on the side with debug symbols in order to find out where it crashes on VFS functions that you don&#39;t have - that&#39;s what I did."}, {"owner": {"reputation": 28237, "user_id": 50394, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/727470ca24cb2dcd153eebaabcb8e217?s=128&d=identicon&r=PG", "display_name": "Luca Matteis", "link": "https://stackoverflow.com/users/50394/luca-matteis"}, "reply_to_user": {"reputation": 8173, "user_id": 3299580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5442c85b57162abfc606d86c0083e1d?s=128&d=identicon&r=PG&f=1", "display_name": "The Dark", "link": "https://stackoverflow.com/users/3299580/the-dark"}, "edited": false, "score": 0, "creation_date": 1490260997, "post_id": 42964641, "comment_id": 73035991, "body": "@TheDark thanks that actually worked. Please answer and I can give you +1."}], "answers": [{"tags": [], "owner": {"reputation": 8173, "user_id": 3299580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5442c85b57162abfc606d86c0083e1d?s=128&d=identicon&r=PG&f=1", "display_name": "The Dark", "link": "https://stackoverflow.com/users/3299580/the-dark"}, "is_accepted": true, "score": 3, "last_activity_date": 1490309394, "creation_date": 1490309394, "answer_id": 42988408, "question_id": 42964641, "link": "https://stackoverflow.com/questions/42964641/sqlite-registering-vfs-causes-segmentation-fault/42988408#42988408", "title": "SQLite registering VFS causes segmentation fault", "body": "<p>The <code>sqlite3_vfs</code> structure has pointers for a lot of functions. I couldn't find any documentation on the minimum set of functions you have to define, so it is probably safer to assume that they are all required, even just as stub functions.</p>\n\n<p>In your case, I guess that sqlite is calling one of the functions you haven't defined yet (possibly <code>xFullPathname</code>), causing an attempt to run a function at NULL.</p>\n"}], "owner": {"reputation": 28237, "user_id": 50394, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/727470ca24cb2dcd153eebaabcb8e217?s=128&d=identicon&r=PG", "display_name": "Luca Matteis", "link": "https://stackoverflow.com/users/50394/luca-matteis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 42988408, "answer_count": 1, "score": 0, "last_activity_date": 1490309394, "creation_date": 1490225842, "last_edit_date": 1490226141, "question_id": 42964641, "link": "https://stackoverflow.com/questions/42964641/sqlite-registering-vfs-causes-segmentation-fault", "title": "SQLite registering VFS causes segmentation fault", "body": "<p>I'm trying to register a <a href=\"https://sqlite.org/vfs.html\" rel=\"nofollow noreferrer\">VFS</a> in SQLite:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"sqlite3.h\"\n\nint vfs_open(sqlite3_vfs* vfs, const char *zName, sqlite3_file* file, int flags, int *pOutFlags)\n{\n\n  std::cout &lt;&lt; \"Hello open\";\n  return SQLITE_OK;\n}\nint vfs_access(sqlite3_vfs* vfs, const char *zName, int flags, int *pResOut)\n{\n  std::cout &lt;&lt; \"Hello access\";\n  return 0;\n}\n\nint main () {\n  static sqlite3_vfs vfs;\n  vfs.iVersion = 1;\n  vfs.szOsFile = 1000;\n  vfs.zName = \"foo\";\n  vfs.xOpen = vfs_open;\n  vfs.xAccess = vfs_access;\n\n  sqlite3_vfs_register(&amp;vfs, 0);\n\n  sqlite3 *db;\n  sqlite3_open_v2(\"db.db\", &amp;db, SQLITE_OPEN_READONLY, \"foo\");\n}\n</code></pre>\n\n<p>But when I run this code I get Segmentation Fault:</p>\n\n<pre><code>$ g++ test.cc libsqlite3.dylib \n$ ./a.out\nSegmentation fault: 11\n</code></pre>\n\n<p>Any help what I'm doing wrong?</p>\n"}, {"tags": ["c++", "debugging"], "comments": [{"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1490226169, "post_id": 42964634, "comment_id": 73023427, "body": "What exactly is the assertion text that you see? Furthermore, what is the type of <code>m_stlMessageList</code>? Also, I notice that <code>POS</code> is not updated inside the loop - have you omitted that code?"}, {"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1490226592, "post_id": 42964634, "comment_id": 73023541, "body": "Assuming <code>m_stlMessageList</code> is a <code>CList</code> and that there is some code that sets <code>POS</code> before the <code>if</code>, if <code>POS</code> is <code>NULL</code>, then <a href=\"https://msdn.microsoft.com/en-us/library/9y10e52d&#40;v=vs.80&#41;.aspx#Anchor_1\" rel=\"nofollow noreferrer\"><code>RemoveTail()</code> will assert</a>."}, {"owner": {"reputation": 77, "user_id": 4970827, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bc387ef087e5c6249202798676d9c0f5?s=128&d=identicon&r=PG&f=1", "display_name": "sallou", "link": "https://stackoverflow.com/users/4970827/sallou"}, "reply_to_user": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1490283253, "post_id": 42964634, "comment_id": 73053066, "body": "The POS is being loaded prior to the while loop by the Position POS = m_stlMessageList.GetHeadPosition(). The type of m_stlMessageList is a CStringList. The only error I see for assertion is the pop-up that says &quot;Debug Assertion Failed&quot; and gives me a line number in the debug version. I added logging code (which I omitted above) to narrow down that it appears the crash is occuring on the while(POS) line. In release mode I get the error &quot;Unhandled exception in  MSVCRT.DLL, Access Violation&quot;."}], "owner": {"reputation": 77, "user_id": 4970827, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bc387ef087e5c6249202798676d9c0f5?s=128&d=identicon&r=PG&f=1", "display_name": "sallou", "link": "https://stackoverflow.com/users/4970827/sallou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1601389671, "creation_date": 1490225813, "last_edit_date": 1601389671, "question_id": 42964634, "link": "https://stackoverflow.com/questions/42964634/c-debug-assert-error-crash-while-loop", "title": "C++ Debug Assert Error / Crash (While Loop)", "body": "<p>I'm debugging a very old application (Visual C++ 6) due to a crash. I have isolated the crash into a while loop. This app reads a bunch of strings from a database and outputs them into a file for processing.</p>\n<p>This while loop appears to be looping through all strings retrieved from the DB and wrapping them in a delimiter/end character. However, the while loop will randomly crash.</p>\n<p>I have a particular set of data containing around <strong>2000 strings</strong>, and at some point, during processing, the loop will crash (or give a debug assertion error in debug mode).</p>\n<p>What's strange is that this loop does not stop in the same location each time (bad string was my first thought), nor is this a common occurrence. This app has processed hundreds of thousands of rows over the years, and yet it chokes on this particular data set somewhat randomly.</p>\n<p>I added some logging code initially (which I've stripped out, and it appears that the crash is occurring on the actual execution/evaluation of the <code>WHILE</code> line.</p>\n<p>Is there anything, in particular, I should look for? I was thinking perhaps this is an index out of bounds error, but I would think it would happen consistently in the same spot with the same data set if that were the case. Does anyone see anything with this code I should double-check, or can offer any advice on how to better troubleshoot this?</p>\n<pre><code>//Definitions\nCStringList          m_stlMessageList;\nCStringList          m_stlMessageIDList;    \n\n\n//Populating list\nrec.Open(CRecordset::forwardOnly, strSQL);\nwhile (!rec.IsEOF())\n{\n    rec.GetFieldValue(&quot;string_id&quot;, strMessageID);\n    strMessageID.TrimRight();\n    rec.GetFieldValue(&quot;string_text&quot;, strMessage);\n    strMessage.TrimRight();\n    rec.GetFieldValue(&quot;string_destination&quot;, strDestination);\n    strDestination.TrimRight();\n    rec.GetFieldValue(&quot;string_ip&quot;, strIP);\n    strIP.TrimRight();\n\n    //Add to the Lists...\n    m_stlMessageIDList.AddTail(strMessageID);\n    m_stlMessageList.AddTail(strMessage);\n\n    rec.MoveNext();\n}\n\n\n\n//Code thats crashing.\nCString strSegment, strTemp, strTmp;\nBOOL    bFirst = TRUE;\nPOSITION POS = m_stlMessageList.GetHeadPosition();\nwhile (POS)\n{\n\n                strSegment     = m_stlMessageList.GetNext(POS);                                                  \n                strTemp        = strSegment.Left(4);\n    \n                            \n                strSegment.Format(strSegment + &quot;%c&quot;, 13);\n                if (POS)\n                {\n                                strTmp = m_stlMessageList.GetPrev(POS);\n                                m_stlMessageList.SetAt(POS, strSegment);\n                                strTmp = m_stlMessageList.GetNext(POS);\n                }\n                else\n                {\n                                m_stlMessageList.RemoveTail();\n                                m_stlMessageList.AddTail(strSegment);\n                }                                                              \n\n}              \n        \n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1490226090, "post_id": 42964621, "comment_id": 73023394, "body": "<code>vector.back()</code> then pop is what you want."}, {"owner": {"reputation": 165, "user_id": 5828858, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a31d59c77f50596e60c4862a9d3b2079?s=128&d=identicon&r=PG&f=1", "display_name": "Neu4Swift", "link": "https://stackoverflow.com/users/5828858/neu4swift"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1490233597, "post_id": 42964621, "comment_id": 73025535, "body": "Thank you very much. Sometimes you are really blind ... Somehow I deleted the line :-)))"}], "answers": [{"tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": false, "score": 1, "last_activity_date": 1490225870, "creation_date": 1490225870, "answer_id": 42964650, "question_id": 42964621, "link": "https://stackoverflow.com/questions/42964621/users-rstu-workspace-main-cpp3813-no-matching-conversion-for-c-style-cas/42964650#42964650", "title": "/Users/rstu/workspace/.../main.cpp:38:13: No matching conversion for C-style cast from &#39;void&#39; to &#39;std::__1::basic_string&lt;char&gt;&#39;", "body": "<p>Check the documentation for <a href=\"http://en.cppreference.com/w/cpp/container/vector/pop_back\" rel=\"nofollow noreferrer\"><code>vector&lt;T&gt;::pop_back()</code></a>.  It doesn't return anything.</p>\n"}], "owner": {"reputation": 165, "user_id": 5828858, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a31d59c77f50596e60c4862a9d3b2079?s=128&d=identicon&r=PG&f=1", "display_name": "Neu4Swift", "link": "https://stackoverflow.com/users/5828858/neu4swift"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490225942, "creation_date": 1490225728, "last_edit_date": 1490225942, "question_id": 42964621, "link": "https://stackoverflow.com/questions/42964621/users-rstu-workspace-main-cpp3813-no-matching-conversion-for-c-style-cas", "title": "/Users/rstu/workspace/.../main.cpp:38:13: No matching conversion for C-style cast from &#39;void&#39; to &#39;std::__1::basic_string&lt;char&gt;&#39;", "body": "<p>It works for <code>int</code>, but not for <code>std::string</code>?\nI do not understand the following error (what am I doing wrong?):</p>\n\n<pre><code>template &lt;class T&gt; class Stack {\nprivate:\n    vector&lt;T&gt; elems;\npublic:\n    void push(T const&amp;);\n    T pop();\n};\n\ntemplate &lt;class T&gt; void Stack&lt;T&gt;::push (T const&amp; elem) {\n    elems.push_back(elem);\n}\n\ntemplate &lt;class T&gt; T Stack&lt;T&gt;::pop () {\n    if (elems.empty()) {\n        throw out_of_range(\"Stack&lt;&gt;::pop(): empty stack\");\n    }\n    T ret = (T)elems.pop_back();         /* &lt;--- ERROR! &lt;&lt;================ */\n    return ret;           \n}\n\nmain(){\n...\n        string X = stringStack.pop();\n        stringStack.pop();\n...\n}\n</code></pre>\n\n<blockquote>\n  <p>Error: No matching conversion for C-style cast from 'void' to 'std::__1::basic_string'</p>\n</blockquote>\n"}, {"tags": ["c++", "vector", "stl", "runtime-error", "invalidoperationexception"], "comments": [{"owner": {"reputation": 51094, "user_id": 210102, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/OViyp.jpg?s=128&g=1", "display_name": "Steve Townsend", "link": "https://stackoverflow.com/users/210102/steve-townsend"}, "edited": false, "score": 0, "creation_date": 1490226511, "post_id": 42964578, "comment_id": 73023517, "body": "what is the type of <code>bar</code>?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1490226574, "post_id": 42964578, "comment_id": 73023538, "body": "<i>but this is just a simplified example of something else that I am trying to do</i> -- What is this &quot;something else&quot;?  There is the <code>erase-remove_if</code> idiom, where you don&#39;t need to write loops to erase items.  Can your &quot;something else&quot; be rewritten to use that?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1490227495, "post_id": 42964578, "comment_id": 73023789, "body": "I suspect that the root of the problem is the thing that you put in your vector."}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1490228500, "post_id": 42964578, "comment_id": 73024115, "body": "As odd as the loop is, it does not explain the crash.  The bug is likely somewhere else, in code you haven&#39;t shown us."}, {"owner": {"reputation": 55, "user_id": 1607640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2b1243c854de2f98f53e039e4ee1bd8?s=128&d=identicon&r=PG", "display_name": "Geof Sawaya", "link": "https://stackoverflow.com/users/1607640/geof-sawaya"}, "edited": false, "score": 0, "creation_date": 1520496135, "post_id": 42964578, "comment_id": 85341305, "body": "Your compiler isn&#39;t giving you the IPO error.  It&#39;s a runtime error"}], "answers": [{"comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1490226225, "post_id": 42964671, "comment_id": 73023441, "body": "@aschepler: I blame the question for not matching my answer :-)"}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1490228588, "post_id": 42964671, "comment_id": 73024139, "body": "TBH, a better fix would be <code>while (!bar.empty()) { bar.erase(bar.begin()); }</code>, or even <code>bar.clear();</code>, although that still wouldn&#39;t explain the crash.  The code in the OP&#39;s question, while probably wrong, isn&#39;t (directly) what is causing the crash."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1490228705, "post_id": 42964671, "comment_id": 73024173, "body": "@cdhowie: well, yes, but I&#39;m assuming that the condition is just a stand-in and not actually representative."}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": false, "score": 2, "last_activity_date": 1490226322, "last_edit_date": 1495541415, "creation_date": 1490226034, "answer_id": 42964671, "question_id": 42964578, "link": "https://stackoverflow.com/questions/42964578/invalid-pointer-operation-error-when-calling-vector-erase-function/42964671#42964671", "title": "Invalid pointer operation error when calling vector.erase() function", "body": "<p>As always when modifying a range while traversing the range, you cannot unconditionally increment the loop counter.</p>\n\n<p>Consider the simple example of a two-element set. When <code>i</code> is <code>0</code>, you remove the first element and increment <code>i</code>. Now <code>i</code> is <code>1</code> and <code>bar.size()</code> is <code>1</code>, and the loop exits, failing to delete the second element.</p>\n\n<p>The standard solution is to make the increment conditional on <em>not</em> modifying the container:</p>\n\n<pre><code>for (int i = 0; i &lt; bar.size(); /* no increment here */) { \n    if (!bar.empty()) {\n        bar.erase(bar.begin());\n    } else {\n        ++i;\n    }\n}\n</code></pre>\n\n<p>When you do modify the container by erasing an element, <code>i</code> stays constant but the range moves one element closer to it. Also incrementing <code>i</code> would be double-counting.</p>\n\n<p>(This is an extremely common mistake, though usually it's expressed in terms of iterators, e.g. <a href=\"https://stackoverflow.com/a/36679843\">here</a> or <a href=\"https://stackoverflow.com/a/29402889\">here</a> or <a href=\"https://stackoverflow.com/a/7435224\">here</a>.)</p>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 1970102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z8AmI.jpg?s=128&g=1", "display_name": "Mudi", "link": "https://stackoverflow.com/users/1970102/mudi"}, "is_accepted": false, "score": 0, "last_activity_date": 1490226981, "creation_date": 1490226981, "answer_id": 42964825, "question_id": 42964578, "link": "https://stackoverflow.com/questions/42964578/invalid-pointer-operation-error-when-calling-vector-erase-function/42964825#42964825", "title": "Invalid pointer operation error when calling vector.erase() function", "body": "<p>The problem is the condition part of the loop <code>bar.size()</code> which keeps changing in each iteration i.e., decreasing in this example by 1.</p>\n\n<p>It is difficult to say what exactly you are trying to achieve within the loop but if you want to execute the loop <code>bar-size ()</code> times then use the follow logic:</p>\n\n<pre><code>const size_t vecSize = bar.size ()\nfor(int i = 0; i &lt; vecSize ; i++) \n{ ..... }\n</code></pre>\n\n<p>Otherwise if you want to execute the loop till <code>bar-size ()</code> is empty, then use the <code>while</code> loop as follows:</p>\n\n<pre><code>while (bar.size &gt; 0)\n{ ..... }\n</code></pre>\n"}], "owner": {"reputation": 653, "user_id": 7254514, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/713bdcd9918ad0f7168a58281fe85046?s=128&d=identicon&r=PG&f=1", "display_name": "Luca Guarro", "link": "https://stackoverflow.com/users/7254514/luca-guarro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 629, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490226981, "creation_date": 1490225416, "question_id": 42964578, "link": "https://stackoverflow.com/questions/42964578/invalid-pointer-operation-error-when-calling-vector-erase-function", "title": "Invalid pointer operation error when calling vector.erase() function", "body": "<p>I am using vector::erase() function to delete the the first element in the vector until it is empty but my compiler is giving me an \"Invalid Pointer Operation\" error.</p>\n\n<p>I have a vector of class-defined objects, foo, called bar.\nI am deleting elements one by one like so:</p>\n\n<pre><code>for(int i = 0; i &lt; bar.size(); i++){ \n        if(!bar.empty()){\n            bar.erase(bar.begin()); \n        }\n}\n</code></pre>\n\n<p>When I run my program, it only completes one iteration (no matter the size) and breaks on the second.\nSpecifically, it breaks on the STL function _Destroy</p>\n\n<pre><code>template&lt;class _TyDtor&gt; inline\n    void _Destroy(_TyDtor _FARQ *_Ptr)\n    {   // destroy object at _Ptr\n    _DESTRUCTOR(_TyDtor, _Ptr);\n    }\n</code></pre>\n\n<p>*note I know there is a clear function that would do this more neatly but this is just a simplified example of something else that I am trying to do</p>\n"}, {"tags": ["c++", "image", "video", "ffmpeg", "video-encoding"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 1613022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0344fd9435b69b3dc1422ed4d0af51b0?s=128&d=identicon&r=PG", "display_name": "fweaks", "link": "https://stackoverflow.com/users/1613022/fweaks"}, "edited": false, "score": 0, "creation_date": 1490232193, "post_id": 42965150, "comment_id": 73025161, "body": "Oh goodness, yes, that is a typo. However I&#39;ve just fixed it up and i&#39;m getting exactly the same results as before (tried with both formats)"}, {"owner": {"reputation": 1, "user_id": 6902544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1360093128f10e6ba6c951eeb2132d0?s=128&d=identicon&r=PG&f=1", "display_name": "Anpu", "link": "https://stackoverflow.com/users/6902544/anpu"}, "reply_to_user": {"reputation": 21, "user_id": 1613022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0344fd9435b69b3dc1422ed4d0af51b0?s=128&d=identicon&r=PG", "display_name": "fweaks", "link": "https://stackoverflow.com/users/1613022/fweaks"}, "edited": false, "score": 0, "creation_date": 1490233876, "post_id": 42965150, "comment_id": 73025618, "body": "What about padding?"}, {"owner": {"reputation": 21, "user_id": 1613022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0344fd9435b69b3dc1422ed4d0af51b0?s=128&d=identicon&r=PG", "display_name": "fweaks", "link": "https://stackoverflow.com/users/1613022/fweaks"}, "edited": false, "score": 0, "creation_date": 1490239506, "post_id": 42965150, "comment_id": 73027103, "body": "I&#39;ve just tried, padding out to 8, 16 and 32 for both height and width. unfortunately it hasn&#39;t worked"}, {"owner": {"reputation": 1, "user_id": 6902544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1360093128f10e6ba6c951eeb2132d0?s=128&d=identicon&r=PG&f=1", "display_name": "Anpu", "link": "https://stackoverflow.com/users/6902544/anpu"}, "reply_to_user": {"reputation": 21, "user_id": 1613022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0344fd9435b69b3dc1422ed4d0af51b0?s=128&d=identicon&r=PG", "display_name": "fweaks", "link": "https://stackoverflow.com/users/1613022/fweaks"}, "edited": false, "score": 0, "creation_date": 1490246207, "post_id": 42965150, "comment_id": 73028907, "body": "What about packed RGB?"}, {"owner": {"reputation": 21, "user_id": 1613022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0344fd9435b69b3dc1422ed4d0af51b0?s=128&d=identicon&r=PG", "display_name": "fweaks", "link": "https://stackoverflow.com/users/1613022/fweaks"}, "edited": false, "score": 0, "creation_date": 1490297554, "post_id": 42965150, "comment_id": 73062403, "body": "Remember it&#39;s erroring before it even reaches the loop. I believe it&#39;s something to do with the way i&#39;m setting the whole thing up, like maybe I&#39;ve missed some setting, or I&#39;m not linking two constructs together properly.   Just to confirm it&#39;s not the number of data buffers, I tried this anyway and it didn&#39;t work"}, {"owner": {"reputation": 1, "user_id": 6902544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1360093128f10e6ba6c951eeb2132d0?s=128&d=identicon&r=PG&f=1", "display_name": "Anpu", "link": "https://stackoverflow.com/users/6902544/anpu"}, "reply_to_user": {"reputation": 21, "user_id": 1613022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0344fd9435b69b3dc1422ed4d0af51b0?s=128&d=identicon&r=PG", "display_name": "fweaks", "link": "https://stackoverflow.com/users/1613022/fweaks"}, "edited": false, "score": 0, "creation_date": 1490337438, "post_id": 42965150, "comment_id": 73076544, "body": "Lack of detailed code samples does make it more complicated than it should be\u2026"}, {"owner": {"reputation": 21, "user_id": 1613022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0344fd9435b69b3dc1422ed4d0af51b0?s=128&d=identicon&r=PG", "display_name": "fweaks", "link": "https://stackoverflow.com/users/1613022/fweaks"}, "edited": false, "score": 0, "creation_date": 1490566054, "post_id": 42965150, "comment_id": 73155583, "body": "I agree!   Thanks for this, I&#39;ll try it soon and get back to you~"}, {"owner": {"reputation": 21, "user_id": 1613022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0344fd9435b69b3dc1422ed4d0af51b0?s=128&d=identicon&r=PG", "display_name": "fweaks", "link": "https://stackoverflow.com/users/1613022/fweaks"}, "edited": false, "score": 0, "creation_date": 1491264398, "post_id": 42965150, "comment_id": 73464991, "body": "I tried this and it at least got the part&#39;s you&#39;ve covered working. (Although I&#39;m going to have to rewrite the planar-&gt;interleaved conversion to use AVX instructions because I have a speed constraint)  I managed to make some more progress on my own after that and am now stuck on the file not being finalised properly. it&#39;s successfully calling <code>av_write_trailer</code>, but the file is left in an open state and cannot be played by applications."}], "tags": [], "owner": {"reputation": 1, "user_id": 6902544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1360093128f10e6ba6c951eeb2132d0?s=128&d=identicon&r=PG&f=1", "display_name": "Anpu", "link": "https://stackoverflow.com/users/6902544/anpu"}, "is_accepted": false, "score": 0, "last_activity_date": 1490337323, "last_edit_date": 1490337323, "creation_date": 1490229263, "answer_id": 42965150, "question_id": 42964210, "link": "https://stackoverflow.com/questions/42964210/combining-planar-rgb-images-into-lossless-video-with-ffmpeg/42965150#42965150", "title": "Combining planar RGB images into lossless video with ffmpeg", "body": "<p>Finally had time to install &amp; build it.\nSo here we go:</p>\n\n<p>1) Activate debug logging. It is very useful.</p>\n\n<pre><code>av_log_set_level(AV_LOG_DEBUG);\n</code></pre>\n\n<p>Do you call registration?</p>\n\n<pre><code>avcodec_register_all();\nav_register_all();\n</code></pre>\n\n<p>2) Looks like the codec that you want to use does not support planar RGB formats.<br>\nFor me AV_PIX_FMT_GBRP failes with \"invalid arguments\" error.<br>\nYou need to specify some packed RGB format (AV_PIX_FMT_RGB24 will do), and convert your separate color channels into a single array.</p>\n\n<pre><code>avFrame-&gt;data[0] = new uint8_t[3*width*paddedHeight];\n. . .\nuint8_t* R, G, B;\nuint8_t* row = avFrame-&gt;data[0];\nwhile(GetNextImageChannels(&amp;R, &amp;G, &amp;B)){\n    for(int iy=0; iy&lt;height; ++iy){\n        for(int ix=0; ix&lt;width; ++ix){\n            row[3*ix+0] = R[ix];\n            row[3*ix+1] = G[ix];\n            row[3*ix+2] = B[ix];\n        }\n        R += width;\n        G += width;\n        B += width;\n        row += 3*width;\n    }\n</code></pre>\n\n<p>3) WebM does not support h264. So it's back to mkv.<br>\nYou need to create video stream:</p>\n\n<pre><code>AVFormatContext* outputContext;\navformat_alloc_output_context2(&amp;outputContext, NULL, \"h264\", \"filename.mkv\");\nAVStream* video_stream = avformat_new_stream(outputContext, codec);\nvideo_stream-&gt;codec = c;\navio_open(&amp;outputContext-&gt;pb, \"filename.mkv\", AVIO_FLAG_WRITE);\navformat_write_header(outputContext, NULL);\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 1613022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0344fd9435b69b3dc1422ed4d0af51b0?s=128&d=identicon&r=PG", "display_name": "fweaks", "link": "https://stackoverflow.com/users/1613022/fweaks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 584, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490337323, "creation_date": 1490223559, "last_edit_date": 1490232101, "question_id": 42964210, "link": "https://stackoverflow.com/questions/42964210/combining-planar-rgb-images-into-lossless-video-with-ffmpeg", "title": "Combining planar RGB images into lossless video with ffmpeg", "body": "<p>I have a series of images already in memory. The images are RGB, but planar, i.e. non-interleaved. I wish to use ffmpeg to losslessly compress these into a video.</p>\n\n<p>Currently I have this (note: i have excluded error checking and cleanup):</p>\n\n<pre><code>av_register_all();\n\nAVCodec* codec = avcodec_find_encoder_by_name(\"libx264rgb\");\n\nAVCodecContext* context = avcodec_alloc_context3(codec);\ncontext-&gt;width = width;\ncontext-&gt;height = paddedHeight;//height padded to a multiple of 8\ncontext-&gt;time_base = AVRational { 1,25 };\ncontext-&gt;gop_size = 10;\ncontext-&gt;max_b_frames = 1;\ncontext-&gt;pix_fmt = AV_PIX_FMT_RGB24;\nav_opt_set(context-&gt;priv_data, \"preset\", \"ultrafast\", 0);\nav_opt_set(context-&gt;priv_data, \"crf\", 0, 0);//lossless\n\navcodec_open2(context, codec, NULL);\n\nAVFrame* avFrame = av_frame_alloc();\nfor (int i = 0; i &lt; AV_NUM_DATA_POINTERS; i++) {\n    avFrame-&gt;data[i] = NULL;\n}\navFrame-&gt;data[0] = new uint8_t[width*paddedHeight];\navFrame-&gt;data[1] = new uint8_t[width*paddedHeight];\navFrame-&gt;data[2] = new uint8_t[width*paddedHeight];\n\nAVFormatContext* outputContext;\navformat_alloc_output_context2(&amp;outputContext, NULL, NULL, \"filename.webm\");\n\nAVStream* outputStream = avformat_new_stream(outputContext, codec);\noutputStream-&gt;codecpar-&gt;width = width;\noutputStream-&gt;codecpar-&gt;height = paddedHeight;\noutputStream-&gt;codecpar-&gt;format = AV_PIX_FMT_GBRP;\noutputStream-&gt;time_base = AVRational { 1,25 };\n\noutputContext-&gt;video_codec = codec;\navio_open2(&amp;outputContext-&gt;pb, \"filepath\\filename.webm\", AVIO_FLAG_WRITE, NULL, NULL);//obviously a real filepath is being used\n\navformat_write_header(outputContext, NULL);\n\nuint8_t* R, G, B;\nwhile(GetNextImageChannels(&amp;R, &amp;G, &amp;B)){\n    memcpy(R, avFrame-&gt;data[0], width * height * sizeof(uint8_t));\n    memcpy(G, avFrame-&gt;data[1], width * height * sizeof(uint8_t));\n    memcpy(B, avFrame-&gt;data[2], width * height * sizeof(uint8_t));\n\n    avcodec_send_frame(context, avFrame);\n\n    AVPacket encodedPacket;\n    avcodec_receive_packet(context, &amp;encodedPacket);\n    av_interleaved_write_frame(outputContext, &amp;encodedPacket);\n}\n\nav_write_trailer(outputContext);\n</code></pre>\n\n<p>This is currently failing at <code>avformat_write_header</code>, giving me an error code of -22, which I believe means invalid arguments of some sort?</p>\n\n<p>I've tried using <code>filename.mkv</code> but that fails at <code>avformat_alloc_output_context2</code> with error code -22</p>\n\n<p>I've tried using the <code>AV_PIX_FMT_GBRP</code> format, but that fails at <code>avcodec_open2</code> with error code -22 as well.</p>\n\n<p>I've found various resources on ffmpeg out there, but most of them are using the commandline application. The few that aren't are very generic, and mostly outdated(using deprecated functions), and are usually converting from one video format to another, and none of them are dealing with planar images.</p>\n\n<p><strong>If you could please help me out with what I'm getting wrong?</strong></p>\n\n<p>EDIT: fixed a typo in the array index</p>\n"}, {"tags": ["c++", "directx", "2d-games"], "comments": [{"owner": {"reputation": 1848, "user_id": 5505741, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K0RGKJuJSu4/AAAAAAAAAAI/AAAAAAAAAFw/aodTCStN3gc/photo.jpg?sz=128", "display_name": "Michael Nastenko", "link": "https://stackoverflow.com/users/5505741/michael-nastenko"}, "edited": false, "score": 0, "creation_date": 1490233822, "post_id": 42964103, "comment_id": 73025594, "body": "How exactly doesn&#39;t it work? What you see and what you expected to see?"}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1490251181, "post_id": 42964103, "comment_id": 73030811, "body": "What width &amp; height did you pick? Remember it has to be a supported display mode."}, {"owner": {"reputation": 13, "user_id": 6288355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65ace5131e093c74a4761a8614fa9602?s=128&d=identicon&r=PG", "display_name": "lvl99knight", "link": "https://stackoverflow.com/users/6288355/lvl99knight"}, "edited": false, "score": 0, "creation_date": 1490305931, "post_id": 42964103, "comment_id": 73067010, "body": "it doesnt work because when I create my directx device, it is a null pointer and my program crashes.  when i use fullscreen but when there is no fullscreen, the directx device is created."}, {"owner": {"reputation": 13, "user_id": 6288355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65ace5131e093c74a4761a8614fa9602?s=128&d=identicon&r=PG", "display_name": "lvl99knight", "link": "https://stackoverflow.com/users/6288355/lvl99knight"}, "edited": false, "score": 0, "creation_date": 1490305963, "post_id": 42964103, "comment_id": 73067028, "body": "I chose 600x480 (rather my book told me to use 600x480)."}, {"owner": {"reputation": 1848, "user_id": 5505741, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K0RGKJuJSu4/AAAAAAAAAAI/AAAAAAAAAFw/aodTCStN3gc/photo.jpg?sz=128", "display_name": "Michael Nastenko", "link": "https://stackoverflow.com/users/5505741/michael-nastenko"}, "edited": false, "score": 0, "creation_date": 1490318921, "post_id": 42964103, "comment_id": 73071207, "body": "Show your <code>CreateDevice</code> call. What <code>HRESULT</code> do you have from <code>CreateDevice</code>? And put all additional data to question itself."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6288355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65ace5131e093c74a4761a8614fa9602?s=128&d=identicon&r=PG", "display_name": "lvl99knight", "link": "https://stackoverflow.com/users/6288355/lvl99knight"}, "edited": false, "score": 0, "creation_date": 1490660473, "post_id": 43024604, "comment_id": 73201520, "body": "Thanks.  I changed my code.  But, it still does not work and is going to take a long time to fix.  I just ditched my code and am now using the code that my book supplied to me."}], "tags": [], "owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "is_accepted": true, "score": 2, "last_activity_date": 1490498313, "creation_date": 1490498313, "answer_id": 43024604, "question_id": 42964103, "link": "https://stackoverflow.com/questions/42964103/directx-present-parameters-windowed-false-not-working/43024604#43024604", "title": "DirectX Present Parameters Windowed=false not working", "body": "<p>From the comments, you suggest that you are using 600x480. It's highly doubtful that this is a supported resolution on your system, more likely, you meant to be using 6<strong>4</strong>0x480. As far as I know, this resolution is supported by essentially every D3D9 driver.</p>\n\n<p>However, hardcoding the resolution is not a robust solution, it's far more practical to follow the advice stated in the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb172588(v=vs.85).aspx\" rel=\"nofollow noreferrer\">documentation</a> for <code>D3DPRESENT_PARAMETERS</code>, and use the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb174314(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>EnumAdapterModes</code></a> function, to get a list of valid resolutions and display formats for your device.</p>\n"}], "owner": {"reputation": 13, "user_id": 6288355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65ace5131e093c74a4761a8614fa9602?s=128&d=identicon&r=PG", "display_name": "lvl99knight", "link": "https://stackoverflow.com/users/6288355/lvl99knight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 0, "accepted_answer_id": 43024604, "answer_count": 1, "score": 0, "last_activity_date": 1490498313, "creation_date": 1490223041, "question_id": 42964103, "link": "https://stackoverflow.com/questions/42964103/directx-present-parameters-windowed-false-not-working", "title": "DirectX Present Parameters Windowed=false not working", "body": "<p>I am trying to make a game.  I am using directx 9 to do so and I have some issues trying to go into full screen mode.  I made a function that initalized all of the Present Parameters .  Everything is fine except when I make windowed = false (ie i set fullscreen to true).</p>\n\n<p>here is my present parameters variable: <code>D3DPRESENT_PARAMETERS d3dpp;</code></p>\n\n<p>Here is the code for the d3dpp variable.  Most if not all of this code comes from a book called Programming 2d Games by charles kelley.</p>\n\n<pre><code>void Graphics::initD3Dpp()\n{\ntry {\n    ZeroMemory(&amp;d3dpp, sizeof(d3dpp));              \n\n    d3dpp.BackBufferWidth = width;\n    d3dpp.BackBufferHeight = height;\n    if (fullscreen)                                  \n        d3dpp.BackBufferFormat = D3DFMT_X8R8G8B8;  \n    else\n        d3dpp.BackBufferFormat = D3DFMT_UNKNOWN;   \n    d3dpp.BackBufferCount = 1;\n    d3dpp.SwapEffect = D3DSWAPEFFECT_DISCARD;\n    d3dpp.hDeviceWindow = mainhwnd;\n    d3dpp.Windowed = (!fullscreen); //THIS LINE RIGHT HERE IS THE ISSUE\n    d3dpp.PresentationInterval = D3DPRESENT_INTERVAL_IMMEDIATE;\n}\ncatch (...)\n{\n    throw(GameError(gameErrorNS::FATAL_ERROR,\n        \"Error initializing D3D presentation parameters\"));\n\n}\n\n} \n</code></pre>\n\n<p>I do not see why .windowed does not work for me.  Please ask me if you need more context.</p>\n"}, {"tags": ["c++", "qt5", "qtserialport"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7753922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad837190952a18090401e55505d20b32?s=128&d=identicon&r=PG&f=1", "display_name": "Xarddrax", "link": "https://stackoverflow.com/users/7753922/xarddrax"}, "edited": false, "score": 0, "creation_date": 1490226630, "post_id": 42964557, "comment_id": 73023552, "body": "Thank you so much. That did it!"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 0, "last_activity_date": 1490225295, "creation_date": 1490225295, "answer_id": 42964557, "question_id": 42964072, "link": "https://stackoverflow.com/questions/42964072/no-matching-function-for-call-when-compile-code-qtserialport-opening-to-read/42964557#42964557", "title": "&quot;No matching function for call&quot; when compile code. [QTSerialPort opening to read]", "body": "<p>You must pass the sender's pointer.</p>\n\n<blockquote>\n  <p><strong>connect</strong>(const QObject *sender, const char *signal, const QObject\n   *receiver, const char *method, Qt::ConnectionType type) </p>\n  \n  <p><strong>connect</strong>(const QObject *sender, const char *signal, const char *method, Qt::ConnectionType type) </p>\n  \n  <p><strong>connect</strong>(const QObject *sender, PointerToMemberFunction signal, const QObject *receiver, PointerToMemberFunction method, Qt::ConnectionType type) </p>\n  \n  <p><strong>connect</strong>(const QObject *sender, PointerToMemberFunction signal, Functor functor)</p>\n  \n  <p><strong>connect</strong>(const QObject *sender, PointerToMemberFunction signal, const QObject *context, Functor functor, Qt::ConnectionType type)</p>\n</blockquote>\n\n<p>Change:</p>\n\n<pre><code>connect(serial, &amp;QSerialPort::readyRead, this,&amp;MainWindow::readSerial);\n</code></pre>\n\n<p>to </p>\n\n<pre><code>connect(&amp;serial, &amp;QSerialPort::readyRead, this,&amp;MainWindow::readSerial);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7753922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad837190952a18090401e55505d20b32?s=128&d=identicon&r=PG&f=1", "display_name": "Xarddrax", "link": "https://stackoverflow.com/users/7753922/xarddrax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 835, "favorite_count": 0, "accepted_answer_id": 42964557, "answer_count": 1, "score": 0, "last_activity_date": 1490225295, "creation_date": 1490222890, "question_id": 42964072, "link": "https://stackoverflow.com/questions/42964072/no-matching-function-for-call-when-compile-code-qtserialport-opening-to-read", "title": "&quot;No matching function for call&quot; when compile code. [QTSerialPort opening to read]", "body": "<p>Self taught rookie coder here, so pardon the mistakes. I am trying to make a program send/read serial data and having issues with the read part of it. I am able to select the comm port from a pull down, and transmit what I need. When i started to code the receive side using numerous examples online, it fails to compile and I cant seem to figure out why. If I exactly copy the code from the QT examples, it <em>may</em> work, but it wont do what I want it to (i.e. use the combo box pull down tab for selection)</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n#include &lt;QDebug&gt;\n#include &lt;QApplication&gt;\n#include &lt;QWidget&gt;\n#include &lt;QSerialPort&gt;\n#include &lt;QSerialPortInfo&gt;\n\n\nQString commPort;\nQSerialPort serial;\nQByteArray charBuffer;\n\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n\n    foreach (const QSerialPortInfo &amp;serialPortInfo, QSerialPortInfo::availablePorts()) //populates the combo box with all availble comm ports.\n        {\n        ui-&gt;comboBox-&gt;addItem(serialPortInfo.portName());\n        commPort=serialPortInfo.portName();\n        }\n}\n\nMainWindow::~MainWindow()\n{\n    delete ui;\n    serial.close();\n}\n\nvoid MainWindow::on_comboBox_activated(const QString &amp;commPort) //selects the chosen comm port.\n{\n    ui-&gt;report-&gt;setText(commPort);\n}\n\nvoid MainWindow::openSerialPort()\n{\n\n    serial.setPortName(commPort);\n\n    if(serial.open(QIODevice::ReadWrite))\n     {\n         qDebug(\"Serial Opened\");\n         ui-&gt;report-&gt;setStyleSheet(\"QLabel{background-color:'green';}\");\n         serial.setBaudRate(QSerialPort::Baud9600);\n         serial.setDataBits(QSerialPort::Data8);\n         serial.setParity(QSerialPort::NoParity);\n         serial.setStopBits(QSerialPort::OneStop);\n         serial.setFlowControl(QSerialPort::NoFlowControl);\n         connect(serial, &amp;QSerialPort::readyRead, this,&amp;MainWindow::readSerial);\n//^^That is the part that fails to compile\n\n     }\n     else\n     {\n         ui-&gt;report-&gt;setStyleSheet(\"QLabel{background-color:'red';}\");\n         qDebug (\"Serial NOT Opened\");\n         qDebug() &lt;&lt; serial.error();\n         qDebug() &lt;&lt; serial.errorString();\n     }\n\n}\n\nvoid MainWindow::on_connectButton_pressed()\n{\n    openSerialPort();\n}\n\nvoid MainWindow::readSerial()\n{\nqDebug()&lt;&lt;(\"serial works\");\n}\n\n*more code follows, but not needed....\n</code></pre>\n\n<p>The line that says \"connect(serial, &amp;QSerialPort::readyRead, this,&amp;MainWindow::readSerial);\"\nIs the culprit giving me the error:\n <strong>mainwindow.cpp:52: error: no matching function for call to 'MainWindow::connect(QSerialPort&amp;, void (QIODevice::<em>)(), MainWindow</em> const, void (MainWindow::*)())'\n          connect(serial, &amp;QSerialPort::readyRead, this, &amp;MainWindow::readSerial);</strong></p>\n\n<p>I tried to read the QObject and QSerialPort library help info, but the SIGNAL and SLOT stuff is too confusing for this amatuer. I also took parts of examples online and pasted to try and fix it,...no dice.</p>\n"}, {"tags": ["c++", "pointers", "casting", "compatibility"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1490223064, "post_id": 42964052, "comment_id": 73022286, "body": "It the CPUs aren&#39;t compatible, can you really have a multi-threaded program running on them? Just using pointers without casting would create problems if the pointer was created on CPU-A and used on CPU-B."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1490223091, "post_id": 42964052, "comment_id": 73022299, "body": "And it&#39;s not just pointers -- global variables shared by the threads won&#39;t be compatible."}, {"owner": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1490223277, "post_id": 42964052, "comment_id": 73022365, "body": "Then multi-cpu or multi-cluster systems will always have compatible cpus."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1490223382, "post_id": 42964052, "comment_id": 73022401, "body": "You said in the question that one thread is 32-bit little-endian, the other is 64-bit big-endian. That&#39;s not compatible."}, {"owner": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1490223514, "post_id": 42964052, "comment_id": 73022465, "body": "I don&#39;t know, if some cpus are adjustable in a way to work as big endian, is this possible?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1490223634, "post_id": 42964052, "comment_id": 73022517, "body": "I haven&#39;t done any work with multi-processor systems like this. But it seems unlikely that you can have a single program running in this mode. When CPU-A writes to a variable, CPU-B won&#39;t be able to read that variable, because it&#39;s in the wrong format."}], "owner": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1490225660, "creation_date": 1490222760, "last_edit_date": 1490225660, "question_id": 42964052, "link": "https://stackoverflow.com/questions/42964052/is-pointer-casting-always-reversible", "title": "Is pointer casting always reversible?", "body": "<p>I'm not sure what happens when there are clusters in system such as big.LITTLE or multi-socket server builts. Could one thread in cpu-A(32 bit native size for int, little-endian) cast integer pointer to char pointer and then data is processed in cpu-B(64 bit native size for int, big-endian) and is re-cast back to integer.</p>\n\n<pre><code>char * c = (char *)floatPtr;  // in cpu-A with float=4 bytes\n..\nfloat * f = (float *) charPtr; // in cpu-B with float=8 bytes\n\n// or cpu switched to compatibility mode between these and started working like a 16-bit cpu?\n</code></pre>\n\n<p>Maybe code will be compiled running on a soft ip core of a fpga which has multiple core types inside? </p>\n\n<p>What about alignment restrictions? Can a CPU-A need 8-byte aligned floats while CPU-B can work with 4-byte aligned floats in same motherboard?  </p>\n\n<p>I'm connecting C# with a \"C\" space C++ dll for opencl computing, I can't have templates in \"C\" space so I decided to use <code>char</code> based array allocator and aligner(and initializer) class for all kinds of buffers from floats to longs and needed to be sure before continuing any further.</p>\n\n<p>Maybe I just warn in documentation so people don't run my library on their servers if they built exotic systems?</p>\n"}, {"tags": ["c++", "datetime", "embedded-linux", "microcontroller", "epoch"], "comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1490225648, "post_id": 42964040, "comment_id": 73023268, "body": "It certainly should. An example of the inaccurate results you say you&#39;re getting, along with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that produces them, would be helpful -- in fact it&#39;s essential if you want an answer to your question. (You know that <code>tm_mday</code> is 1-based, <code>tm_mon</code> is 0-based, and <code>tm_year</code> is 1900-based, right?)"}], "answers": [{"comments": [{"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 1, "creation_date": 1490299410, "post_id": 42967217, "comment_id": 73063507, "body": "According to the <code>C</code> standard, <code>gmtime()</code> is not <i>required</i> to account for leap seconds, but it is allowed to.  This characteristic is left unspecified.  According to POSIX, <code>gmtime()</code> does <i>not</i> account for leap seconds because <code>time_t</code> does <i>not</i> include them in its count from 1970-01-01T00:00:00 UTC.  Subsequently, few, if any, implementations of <code>gmtime()</code> account for leap seconds (I know of none).  Leap years, yes.  Leap seconds, no.  Though you are correct about <code>tm_sec</code>&#39;s range.  In that respect, <code>struct tm</code> can represent a leap second, just <code>time_t</code> can not."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 2, "creation_date": 1490305842, "post_id": 42967217, "comment_id": 73066967, "body": "@HowardHinnant Whether <code>time_t</code> includes leap seconds on Linux and FreeBSD (probably others too) is configurable. When it does include leap seconds, their <code>gmtime()</code> can return a <code>tm_sec</code> value of <code>60</code>. See <a href=\"http://coliru.stacked-crooked.com/a/622da23fd57dabca\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/622da23fd57dabca</a>"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1490305974, "post_id": 42967217, "comment_id": 73067032, "body": "@hvd:  Nice demo with <code>putenv(&quot;TZ=right&#47;UTC&quot;)</code>, thanks."}], "tags": [], "owner": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "is_accepted": false, "score": 1, "last_activity_date": 1490243015, "creation_date": 1490243015, "answer_id": 42967217, "question_id": 42964040, "link": "https://stackoverflow.com/questions/42964040/does-gmtime-function-take-into-account-leap-years/42967217#42967217", "title": "Does gmtime() function take into account leap years?", "body": "<p>Not only does <code>gmtime()</code> support leap years, it also accounts for <strong>leap seconds</strong>, which is why it's <code>tm_sec</code> field's range is defined as [0..60] inclusive.</p>\n"}, {"tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": true, "score": 1, "last_activity_date": 1490373452, "last_edit_date": 1490373452, "creation_date": 1490302741, "answer_id": 42986862, "question_id": 42964040, "link": "https://stackoverflow.com/questions/42964040/does-gmtime-function-take-into-account-leap-years/42986862#42986862", "title": "Does gmtime() function take into account leap years?", "body": "<p>You could use <code>civil_from_days</code> which is derived and explained in detail in Howard Hinnant's <a href=\"http://howardhinnant.github.io/date_algorithms.html#civil_from_days\" rel=\"nofollow noreferrer\">chrono-Compatible Low-Level Date Algorithms</a>.  This function takes a count of days since 1/1/1970 and converts it into a <code>{y, m, d}</code> field.  Once you have that done, you just have to deal with subtracting off the number of days from your milliseconds timestamp to get milliseconds since midnight and then break that down into <code>h:M:s.ms</code>.  </p>\n\n<p>Here's complete code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;cstdint&gt;\n\nint\nmain()\n{\n    using namespace std;\n    int64_t t = 1490285505123;       // milliseconds since epoch\n    int32_t z = (t &gt;= 0 ? t : t - (1000*86400-1))/(1000*86400); // days since epoch\n    t -= z * (1000LL * 86400);       // milliseconds since midnight\n    z += 719468;\n    int32_t era = (z &gt;= 0 ? z : z - 146096) / 146097;\n    int32_t doe = z - era * 146097;\n    int32_t yoe = (doe - doe/1460 + doe/36524 - doe/146096) / 365;\n    int32_t y = yoe + era * 400;\n    int32_t doy = doe - (365*yoe + yoe/4 - yoe/100);\n    int32_t m = (5*doy + 2)/153;\n    int32_t d = doy - (153*m + 2)/5 + 1;  // day\n    m += m &lt; 10 ? 3 : -9;                 // month\n    y += m &lt;= 2;                          // year\n    int32_t h = t / (1000 * 3600);        // hour\n    t -= h * (1000 * 3600);\n    int32_t M = t / (1000 * 60);          // minute\n    t -= M * (1000 * 60);\n    int32_t s = t / 1000;                 // second\n    int32_t ms = t - s * 1000;            // ms\n    cout.fill('0');\n    cout &lt;&lt; setw(4) &lt;&lt; y &lt;&lt; '-' &lt;&lt; setw(2) &lt;&lt; m &lt;&lt; '-' &lt;&lt; setw(2) &lt;&lt; d\n                    &lt;&lt; ' ' &lt;&lt; setw(2) &lt;&lt; h &lt;&lt; ':' &lt;&lt; setw(2) &lt;&lt; M\n                    &lt;&lt; ':' &lt;&lt; setw(2) &lt;&lt; s &lt;&lt; '.' &lt;&lt; setw(3) &lt;&lt; ms &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>Just as an example I've used as input <code>1490285505123ms</code>, and the output is:</p>\n\n<pre><code>2017-03-23 16:11:45.123\n</code></pre>\n\n<p>This takes leap years into account.  It does not take leap seconds into account.  It is very unlikely that your embedded linux system/controller does either, so it would be incorrect to try and do so.</p>\n\n<p>The above algorithm has a very large range of validity for <code>t</code>:</p>\n\n<pre><code>-5877641-06-23 00:00:00.000 &lt;= t &lt;= 5880010-09-09 23:59:59.999\n</code></pre>\n\n<p>(+/- 5.8 million years)</p>\n\n<p>If you don't mind restricting the lower limit of <code>t</code> to <code>0000-03-01 00:00:00.000</code> then you can simplify the computation of <code>era</code> to:</p>\n\n<pre><code>int32_t era = z / 146097;\n</code></pre>\n\n<p>If you can restrict the lower limit of <code>t</code> to <code>1970-01-01 00:00:00.000</code> then the computation of <code>z</code> can be simplified to:</p>\n\n<pre><code>int32_t z = t / (1000 * 86400);  // days since epoch\n</code></pre>\n\n<p>And finally, if you are willing to restrict <code>t</code> to this 400 year range:</p>\n\n<pre><code>2000-03-01 00:00:00.000 &lt;= t &lt;= 2400-02-29 23:59:59.999\n</code></pre>\n\n<p>Then <code>era</code> can become simply:</p>\n\n<pre><code>int32_t const era = 5;\n</code></pre>\n\n<p>Fwiw, here is a <a href=\"https://howardhinnant.github.io/date/date.html\" rel=\"nofollow noreferrer\">high-level date/time library</a> leveraging the C++11/14 <code>&lt;chrono&gt;</code> library that does the exact same computations, just with cleaner syntax.  Your std::lib would have to support <code>&lt;chrono&gt;</code> to use this library:</p>\n\n<pre><code>#include \"date.h\"\n#include &lt;iostream&gt;\n\nint\nmain()\n{\n    using namespace date;\n    using namespace std;\n    using namespace std::chrono;\n    cout &lt;&lt; sys_time&lt;milliseconds&gt;(1490285505123ms) &lt;&lt; '\\n';\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6865291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c2c88b1b27e16a4cea08f62410e45ad?s=128&d=identicon&r=PG&f=1", "display_name": "tue2017", "link": "https://stackoverflow.com/users/6865291/tue2017"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 495, "favorite_count": 0, "accepted_answer_id": 42986862, "answer_count": 2, "score": 1, "last_activity_date": 1490373452, "creation_date": 1490222717, "last_edit_date": 1490223312, "question_id": 42964040, "link": "https://stackoverflow.com/questions/42964040/does-gmtime-function-take-into-account-leap-years", "title": "Does gmtime() function take into account leap years?", "body": "<p>I am working on embedded linux and the system/controller time is kept in the form of milliseconds since 1/1/1970. I am trying to use gmtime but can't get accurate results. Any example to convert this time (milliseconds) to real time hours:minutes:seconds:day:month will be helpful. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1490222244, "post_id": 42963913, "comment_id": 73021924, "body": "It&#39;s not &quot;modulus&quot;, it&#39;s &quot;modulo&quot;. Very different things. The modulus is arguably the second operand, but surely not the result."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1490222268, "post_id": 42963913, "comment_id": 73021931, "body": "Are you asking about negative <code>a</code> or negative <code>b</code>?"}, {"owner": {"reputation": 1720, "user_id": 3130735, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/144eeadac497b4ef167d0012a7d81f86?s=128&d=identicon&r=PG&f=1", "display_name": "TTT", "link": "https://stackoverflow.com/users/3130735/ttt"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1490229202, "post_id": 42963913, "comment_id": 73024307, "body": "@KerrekSB Both, I&#39;m asking what a proper laymen&#39;s interpretation of the % operator is in C++ when either [a] or [b] are negative, because it is not the mathematical definition of modulo where modulus of -a % b can be calculated by adding b to -a until it&#39;s in a positive range. Maybe there isn&#39;t one and this is an unsolvable question, but it&#39;s out for the masses"}], "answers": [{"comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1490223173, "post_id": 42964030, "comment_id": 73022324, "body": "<i>&quot;This matches the mathematical notion of modular equivalence classes ...&quot;</i>. I&#39;m sorry if I misunderstand something, but I don&#39;t think it&#39;s true. For example, following is clearly true: <code>-4 \u2261 6 (mod 10)</code>, but <code>-4 % 10</code> is not equal to <code>6 % 10</code>."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1490224125, "post_id": 42964030, "comment_id": 73022714, "body": "@HolyBlackCat: No, but <code>-4 % 10</code> and <code>6 % 10</code> are congruent modulo 10. That&#39;s why <code>%</code> is misnamed as &quot;modulo&quot;, it&#39;s really &quot;remainder&quot;."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1490225172, "post_id": 42964030, "comment_id": 73023101, "body": "You&#39;re right. I&#39;m arguing only about this: <i>&quot;This matches the mathematical notion of modular equivalence classes, where two integers are congruent modulo n if they differ by an integral multiple of n&quot;</i>, since C <code>%</code> operator doesn&#39;t seem to create the described equivalence classes."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1490225257, "post_id": 42964030, "comment_id": 73023131, "body": "@HolyBlackCat: Correct, <code>%</code> in C (related to this question how?) is not modular equivalence, but remainder. Calling it &quot;modulo&quot; is a misnomer. What I was referring to as matching is the interchange of <code>b</code> and <code>-b</code>. Mathematically, congruence forms <i>equivalence classes</i>, not numbers."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1490225526, "post_id": 42964030, "comment_id": 73023216, "body": "Oops, clearly I&#39;m too sleepy. Should&#39;ve said C++ instead of C. I guess I&#39;m just reading the sentence incorrectly? To me it sounded like you were saying that the <code>%</code> creates the same equivalence classes as <code>mod</code>."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1490225631, "post_id": 42964030, "comment_id": 73023260, "body": "@HolyBlackCat: I see - no, that&#39;s not what I was referring to. I&#39;ll try to reword it."}, {"owner": {"reputation": 1720, "user_id": 3130735, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/144eeadac497b4ef167d0012a7d81f86?s=128&d=identicon&r=PG&f=1", "display_name": "TTT", "link": "https://stackoverflow.com/users/3130735/ttt"}, "edited": false, "score": 0, "creation_date": 1490244812, "post_id": 42964030, "comment_id": 73028456, "body": "Thanks for the answer, I guess I misunderstood the intent of the modulo operator in practice even though I understood the definition and calculation methods by hand. The difference between pure math modulo and the C/C++ % operator was not clear to me until now."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 1720, "user_id": 3130735, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/144eeadac497b4ef167d0012a7d81f86?s=128&d=identicon&r=PG&f=1", "display_name": "TTT", "link": "https://stackoverflow.com/users/3130735/ttt"}, "edited": false, "score": 1, "creation_date": 1490264860, "post_id": 42964030, "comment_id": 73038869, "body": "@rpg711: The one lesson to take away from this is definitely that you should vocalize <code>%</code> as &quot;remainder&quot;, and many problems will go away."}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 6, "last_activity_date": 1490225676, "last_edit_date": 1490225676, "creation_date": 1490222677, "answer_id": 42964030, "question_id": 42963913, "link": "https://stackoverflow.com/questions/42963913/what-actually-is-the-modulo-of-a-negative-number/42964030#42964030", "title": "What, actually, is the modulo of a negative number?", "body": "<p>This used to be implementation-defined in older revisions of C++, but now it's all fully specified:</p>\n\n<ol>\n<li><p>Division truncates, i.e. <code>a / b</code> is the mathematical value with the fractional part discarded. For example, <code>9 / -5</code> is the truncation of &minus;1.8, so it's <code>-1</code>.</p></li>\n<li><p>The remainder operation <code>a % b</code> is defined by the identity you presented. So let's compute: <code>(a / b) * b</code> is <code>-1 * -5</code> is <code>5</code>, so <code>9 % -5</code> is <code>4</code>.</p></li>\n</ol>\n\n<p>By contrast,<code>-9 % 5</code> is <code>-4</code>. So even though <code>a / -b</code> is the same as <code>-a / b</code>, <code>a % -b</code> is in general different from <code>-a % b</code>. (Similarly, the mathematical notion of modular equivalence, where two integers are congruent modulo <code>n</code> if they differ by an integral multiple of <code>n</code>, is invariant under replacing <code>n</code> with <code>-n</code>.)</p>\n"}, {"comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1490225798, "post_id": 42964502, "comment_id": 73023302, "body": "I&#39;m not convinced that there is such a thing as &quot;-9 % 4&quot; in maths, and much less that it&#39;s 3. The equivalence class of -9 is [-9], and [9] = [-1] = [3]. The very concept of equivalence relation implies that there is no single, unique way to express an equivalence class solely with a single element of the original set. <i>Any</i> representative is equally good to represent the class."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1490226074, "post_id": 42964502, "comment_id": 73023391, "body": "@KerrekSB Makes sense. I guess I&#39;ll look more into it tomorrow and will try to clarify the answer."}, {"owner": {"reputation": 150, "user_id": 7420421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d2240496ddd4211f67244ccd62d76c9?s=128&d=identicon&r=PG&f=1", "display_name": "User9123", "link": "https://stackoverflow.com/users/7420421/user9123"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1490226767, "post_id": 42964502, "comment_id": 73023583, "body": "@KerrekSB However it is very convenient to assign to an equivalence class a unique identifier. By convention, we can take it in <code>[0,b[</code> (or <code>]b,0]</code>), or in <code>[0,|b|[</code>. With a unique identifier, it is very easy to know if [m] = [n] because <code>m%b</code> would be the same as <code>n%b</code>, even if their sign differ"}], "tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": false, "score": 4, "last_activity_date": 1490225686, "last_edit_date": 1592644375, "creation_date": 1490225010, "answer_id": 42964502, "question_id": 42963913, "link": "https://stackoverflow.com/questions/42963913/what-actually-is-the-modulo-of-a-negative-number/42964502#42964502", "title": "What, actually, is the modulo of a negative number?", "body": "<p><strong>TL;DR:</strong> There is a difference between modulo operator which is used in math and C++ <code>%</code> operator.</p>\n<p>For example, let <code>f(x) = x % 4</code>. Then:</p>\n<pre><code>x            : -9 -8 -7 -6 -5 -4 -3 -2 -1  0  1  2  3  4  5  6  7  8  9\nf(x) in math :  3  0  1  2  3  0  1  2  3  0  1  2  3  0  1  2  3  0  1\nf(x) in C    : -1 -0 -3 -2 -1  0 -3 -2 -1  0  1  2  3  0  1  2  3  0  1\n                ^~~~~~~~~~~~~~~~~~~~~~~~^\n                 This part is different\n</code></pre>\n<p>You don't need any special tricks to compute C++-style <code>%</code> of a negative number.</p>\n<p>Just use <code>a%b == a - (a/b)*b</code>, which is derived from <code>(a/b)*b + a%b == a</code>.</p>\n<hr />\n<p><strong>Long answer:</strong></p>\n<p><a href=\"http://en.cppreference.com/w/cpp/language/operator_arithmetic#Multiplicative_operators\" rel=\"nofollow noreferrer\">Cppreference</a> says following:</p>\n<blockquote>\n<p>The binary operator % yields the remainder of the integer division of the first operand by the second (after usual arithmetic conversions; note that the operand types must be integral types). If the quotient a/b is representable in the result type, <strong><code>(a/b)*b + a%b == a</code></strong>. If the second operand is zero, the behavior is undefined. If the quotient a/b is not representable in the result type, the behavior of both a/b and a%b is undefined (that means INT_MIN%-1 is undefined on 2's complement systems)</p>\n<p>Note: Until C++11, if one or both operands to binary operator % were negative, the sign of the remainder was implementation-defined, as it depends on the rounding direction of integer division. The function std::div provided well-defined behavior in that case.</p>\n</blockquote>\n<p>The important parts are:</p>\n<ul>\n<li><code>(a/b)*b + a%b == a</code>.</li>\n<li><em>&quot;Until C++11, if one or both operands to binary operator % were negative, the sign of the remainder was implementation-defined.&quot;</em></li>\n</ul>\n<p>This implies that since C++11 the operator is well-defined for negative operands too.</p>\n<p>There is no mention of any special handling of negative operands, thus we can say that above identity words for them too.</p>\n<p>From <code>(a/b)*b + a%b == a</code> we can easily derive a formula for <code>a%b</code>:</p>\n<pre><code>a%b == a - (a/b)*b\n</code></pre>\n<p>If you think about it, this formula ignores the sign of <code>b</code>, works as if the modulo was computed with the absolute value of <code>a</code>, with the sign of <code>a</code> appended to the result.</p>\n<hr />\n<p>If you want to compute the &quot;classical&quot; modulo, you may use something like following function:</p>\n<pre><code>template &lt;typename T, typename TT&gt; constexpr T true_mod(T a, TT b)\n{\n    static_assert(std::is_integral&lt;T&gt;::value &amp;&amp;\n                  std::is_integral&lt;TT&gt;::value, &quot;Argument types must be integral.&quot;);\n    if (a &gt;= 0)\n        return a % b;\n    else\n        return (b &gt;= 0 ? b : -b) - 1 + (a + 1) % b;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150, "user_id": 7420421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d2240496ddd4211f67244ccd62d76c9?s=128&d=identicon&r=PG&f=1", "display_name": "User9123", "link": "https://stackoverflow.com/users/7420421/user9123"}, "is_accepted": false, "score": 2, "last_activity_date": 1579638553, "last_edit_date": 1579638553, "creation_date": 1490226149, "answer_id": 42964684, "question_id": 42963913, "link": "https://stackoverflow.com/questions/42963913/what-actually-is-the-modulo-of-a-negative-number/42964684#42964684", "title": "What, actually, is the modulo of a negative number?", "body": "<blockquote>\n  <p>(a/b)*b + a%b is equal to a</p>\n</blockquote>\n\n<p>Even if this statement is true, the result can change from a language to an other.<br>\nThis difference also depends on the result of the division.</p>\n\n<p>for example, in python, I have:</p>\n\n<pre><code>&gt;&gt;&gt; # in python, use \"//\" for the floor division\n\n&gt;&gt;&gt; 3 // 4              # 0.75 is rounded to 0 : OK\n0\n&gt;&gt;&gt; 3 % 4               # still as expected\n3\n&gt;&gt;&gt; 0 * 4 + 3           # standard valided\n3\n\n&gt;&gt;&gt; (-3) // 4           # -0.75 is rounded to -1, not 0 (the floor)\n-1\n&gt;&gt;&gt; (-3) % 4            # the result is consistant; a modulo garanteed to be between 0 and b is very usefull\n1\n&gt;&gt;&gt; (-1) * 4 + 1         # standard valided\n-3\n\n&gt;&gt;&gt; 3 // (-4)           # -0.75 is rounded to -1, not 0 (the floor)\n-1\n&gt;&gt;&gt; 3 % (-4)            # still a number between 0 and b\n-1\n&gt;&gt;&gt; (-1) * (-4) + (-1)  # standard valided\n3\n</code></pre>\n\n<p>SUMMARY:</p>\n\n<pre><code>MODULO TEST: language=python\na=3  b=4    a/b=0  a%b=3    standard:true\na=-3 b=4    a/b=-1 a%b=1    standard:true\na=3  b=-4   a/b=-1 a%b=-1   standard:true\na=-3 b=-4   a/b=0  a%b=-3   standard:true\n</code></pre>\n\n<hr>\n\n<p>If my memory is good, the modulo doesn't work like that in C, even if the standard is valided. It can be very disturbing.</p>\n\n<p>I've juste written a little programm to test the results in C:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid test(int a, int b) {\n    int q = a/b;\n    int r = a%b;\n    int ok = q*b+r == a;\n    printf(\"a=%-2d b=%-2d   a/b=%-2d a%%b=%-2d   standard:%s\\n\", a, b, q, r, ok?\"true\":\"false\");\n}\n\nint main(int argc, char const *argv[]) {\n    printf(\"MODULO TEST: language=c\\n\");\n    test( 3, 4);\n    test(-3, 4);\n    test( 3,-4);\n    test(-3,-4);\n    return 0;\n}\n</code></pre>\n\n<p>which gives:</p>\n\n<pre><code>MODULO TEST: language=c\na=3  b=4    a/b=0  a%b=3    standard:true\na=-3 b=4    a/b=0  a%b=-3   standard:true\na=3  b=-4   a/b=0  a%b=3    standard:true\na=-3 b=-4   a/b=0  a%b=-3   standard:true\n</code></pre>\n\n<hr>\n\n<p>So yes, the standard is not enough to fix a unique method for the modulo of two (negative) numbers.</p>\n\n<p>You could use this code when the left number has an unknown sign :</p>\n\n<pre><code>int mod = a % b;\nif (mod*b &lt; 0) mod += b;\n</code></pre>\n\n<p>This code will give you a number between 0 and <code>b</code> all the time, like in python (<code>0 &lt;= mod &lt; b</code>, or <code>b &lt; mod &lt;= 0</code> if b is negative).<br>\nThe <code>* b</code> is useless if b is strictly positive (in most of the cases).</p>\n\n<hr>\n\n<p><strong>EDIT</strong></p>\n\n<p>Using a XOR is better than a multiplication, as it prevents overflow.</p>\n\n<pre><code>int mod = a % b;\nif ((mod &lt; 0) ^ (b &lt; 0)) mod += b;\n</code></pre>\n\n<p>And when b is strictly positive:</p>\n\n<pre><code>int mod = a % b;\nif (mod &lt; 0) mod += b;\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT 2 <em>(2018-10-09)</em></strong></p>\n\n<p>Better use this, to use python-style division (modulo between 0 included and b excluded) in C:</p>\n\n<pre><code>int q = a / b;\nint r = a % b;\nif ((b&lt;0) ? (r&lt;0) : (r&gt;0)) {\n    q -= 1;\n    r += b;\n}\n</code></pre>\n\n<p>It prevents \"extremes\" cases like <code>b</code> is negative and divides <code>a</code> (like <code>6 % (-3)</code>). The result must be <code>0</code>.</p>\n"}], "owner": {"reputation": 1720, "user_id": 3130735, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/144eeadac497b4ef167d0012a7d81f86?s=128&d=identicon&r=PG&f=1", "display_name": "TTT", "link": "https://stackoverflow.com/users/3130735/ttt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6214, "favorite_count": 2, "accepted_answer_id": 42964030, "answer_count": 3, "score": 2, "last_activity_date": 1579638553, "creation_date": 1490222087, "last_edit_date": 1490228956, "question_id": 42963913, "link": "https://stackoverflow.com/questions/42963913/what-actually-is-the-modulo-of-a-negative-number", "title": "What, actually, is the modulo of a negative number?", "body": "<p>I have seen many answers for questions concerning modulo of negative numbers. Every answer placed the standard </p>\n\n<blockquote>\n  <p>(a/b)*b + a%b is equal to a</p>\n</blockquote>\n\n<p>explanation. I can calculate any modulo with this method, and I understand it's necessary employ a modulo function that adds b to the value of a%b if it is negative for the modulo to make sense.</p>\n\n<p>I am trying to make sense of this in laymen's terms. Just what is the modulo of a negative number? I read somewhere that you can calculate the proper modulo of negative numbers by hand some laymen's method of just adding numbers together. This would be helpful, because the a/b *b + a%b method is a little tedious.</p>\n\n<p>To clarify, the modulo of a positive number can be interpreted in laymen's terms as the remainder when you divide the numbers. Obviously this isn't true in the case of negative numbers, so how do you properly \"make sense\" of the result?</p>\n"}, {"tags": ["c++", "linked-list"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1490222182, "post_id": 42963883, "comment_id": 73021888, "body": "Not really sure what your code is meant to be doing, but you&#39;re assigning <code>_info = process;</code> every time <code>add_process</code> is called, which is presumably not what you want to do."}, {"owner": {"reputation": 69, "user_id": 4634698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1549793771937877/picture?type=large", "display_name": "Mark Wilcoxen", "link": "https://stackoverflow.com/users/4634698/mark-wilcoxen"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1490222333, "post_id": 42963883, "comment_id": 73021961, "body": "Excuse me for not being clear, <code>process</code> is an incoming object that I would like to add to the Linked List.  Would including the test data help?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1490222764, "post_id": 42963883, "comment_id": 73022161, "body": "I think you may have mashed your linked list and your linked list link classes into one class. This will bring pain. I suggest making two classes: <code>LinkedList</code> and <code>Link</code>. <code>LinkedList</code> contains and manages a list of <code>Links</code>. It has all of the functions that insert, remove , and otherwise modify <code>Link</code>s. <code>Link</code> contains the data, a <code>Process</code> in your case, a pointer to the next <code>Link</code> and nothing else. Generally the stupider the <code>Link</code> class is, the better off you are."}, {"owner": {"reputation": 69, "user_id": 4634698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1549793771937877/picture?type=large", "display_name": "Mark Wilcoxen", "link": "https://stackoverflow.com/users/4634698/mark-wilcoxen"}, "edited": false, "score": 0, "creation_date": 1490222882, "post_id": 42963883, "comment_id": 73022214, "body": "I was looking at some examples of Linked Lists, is what your getting at more like create a Node structure alongside the Linked List class?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1490222952, "post_id": 42963883, "comment_id": 73022239, "body": "Precis-olutely!"}, {"owner": {"reputation": 69, "user_id": 4634698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1549793771937877/picture?type=large", "display_name": "Mark Wilcoxen", "link": "https://stackoverflow.com/users/4634698/mark-wilcoxen"}, "edited": false, "score": 0, "creation_date": 1490223190, "post_id": 42963883, "comment_id": 73022329, "body": "I will definitely keep that in mind, but I&#39;m looking over the project outline and though it doesn&#39;t explicitly say I ~cant~ do that, I&#39;d like to see if there was a way to fix the code I currently have.  Please don&#39;t take this as me brushing off your suggestion!"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1490223638, "post_id": 42963883, "comment_id": 73022521, "body": "No worries, Mark. In your current code, <code>if (_info == NULL)</code> tests whether or not <code>_info</code> is NULL, but <code>Process</code> shows no signs of whether <code>_info</code> can be NULL. Be careful with that. Next, if it is not NULL, you set up a new <code>LinkedList</code>, link to it, and then overwrite the current <code>LinkedList</code>&#39;s <code>_info</code> instead of setting the <code>_info</code> in the new link. This just lost you a <code>Process</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1490223646, "post_id": 42963883, "comment_id": 73022529, "body": "Off topic, be careful in C++ with preceding underscores. They can mean more than you think. What you have here looks safe, but it&#39;s good to know the rules before they bite you: <a href=\"http://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier\" title=\"what are the rules about using an underscore in a c identifier\">stackoverflow.com/questions/228783/&hellip;</a>"}, {"owner": {"reputation": 69, "user_id": 4634698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1549793771937877/picture?type=large", "display_name": "Mark Wilcoxen", "link": "https://stackoverflow.com/users/4634698/mark-wilcoxen"}, "edited": false, "score": 0, "creation_date": 1490225663, "post_id": 42963883, "comment_id": 73023271, "body": "I appreciate all of your help, but I kind of just had a faceplam moment...in my copy constructor I was setting <code>_next</code> to itself instead of the incoming LinkedList object...I about put my forehead though my desk"}], "owner": {"reputation": 69, "user_id": 4634698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1549793771937877/picture?type=large", "display_name": "Mark Wilcoxen", "link": "https://stackoverflow.com/users/4634698/mark-wilcoxen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490221922, "creation_date": 1490221922, "question_id": 42963883, "link": "https://stackoverflow.com/questions/42963883/adding-to-linked-list-leaves-initial-add-null", "title": "Adding to Linked List Leaves Initial Add Null", "body": "<p>I'm currently working on a project about Linked Lists for my Data Structures class and I'm having a bit of trouble implementing an add method to the Linked List class.  Currently, my class definition for the project are as such:</p>\n\n<pre><code>template &lt;class Process&gt;\nclass LinkedList {\n\n   Process _info;\n   LinkedList* _next;\n\n   public:\n      // Methods\n};\n\nclass Process {\n   protected:\n      int memory_request;\n   public:\n      // Methods\n};\n</code></pre>\n\n<p>The Project is to create a Linked List with the List having Process class objects.  The add method I am having trouble with is as followed:</p>\n\n<pre><code>template &lt;class Process&gt;\nvoid LinkedList&lt;Process&gt;::add_process(const Process&amp; process) {\n   if (_info == NULL) {\n      _info = process;\n   }\n   else {\n      LinkedList&lt;Process&gt;* newList = new LinkedList&lt;Process&gt;(_info, _next);\n\n      if (newList == NULL); // throw error TODO\n      _info = process;\n      _next = newList;\n   }\n}\n</code></pre>\n\n<p>When I insert some test data in the main method and run the program, it seems to create the last two items with the last in the list connected to a null Linked List object.  I believe I'm doing this correctly, but I need some help figuring out the issue of where its going wrong.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "class", "oop", "polymorphism"], "comments": [{"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 0, "creation_date": 1490222078, "post_id": 42963874, "comment_id": 73021834, "body": "see here: <a href=\"http://stackoverflow.com/questions/962132/calling-virtual-functions-inside-constructors\" title=\"calling virtual functions inside constructors\">stackoverflow.com/questions/962132/&hellip;</a>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 0, "creation_date": 1490222142, "post_id": 42963874, "comment_id": 73021868, "body": "@marcinj Why don&#39;t you vote to close as a dup?"}], "owner": {"reputation": 134, "user_id": 3335057, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh5.googleusercontent.com/-A_lvTWqQHa4/AAAAAAAAAAI/AAAAAAAAGMA/tL8HfxTnGoE/photo.jpg?sz=128", "display_name": "audrow", "link": "https://stackoverflow.com/users/3335057/audrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "closed_date": 1490222144, "answer_count": 0, "score": 0, "last_activity_date": 1490221887, "creation_date": 1490221887, "question_id": 42963874, "link": "https://stackoverflow.com/questions/42963874/c-how-to-call-subclass-method-from-method-in-superclass", "closed_reason": "Duplicate", "title": "C++ How to call subclass method from method in superclass?", "body": "<p>I'm trying to call a method from the subclass by calling a method in the super class. </p>\n\n<p>Here's an example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Robot {\n  public:\n    Robot() {\n      printf(\"Robot init\\n\");\n      update();\n    }\n    virtual void update() {\n      printf(\"Robot update\\n\");\n    }\n};\n\nclass Terminator: public Robot {\n  public: \n    Terminator(): Robot() {\n      printf(\"Terminator init\\n\");\n    }\n    virtual void update() {\n      printf(\"Terminator update\\n\");\n    }\n};\n\nint main() {\n\n  Terminator terminator;\n  Robot* robot = &amp;terminator;\n}\n</code></pre>\n\n<p>This code returns (with annotation)</p>\n\n<pre><code>Robot init\nRobot update       &lt;--- not what I want\nTerminator init\n</code></pre>\n\n<p>How can I make it return </p>\n\n<pre><code>Robot init\nTerminator update  &lt;--- what I want\nTerminator init\n</code></pre>\n\n<p>using <code>update</code> in the robot the robot constructor?</p>\n"}, {"tags": ["c++", "uwp"], "comments": [{"owner": {"reputation": 14820, "user_id": 5506161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iLSYt.jpg?s=128&g=1", "display_name": "Jay Zuo", "link": "https://stackoverflow.com/users/5506161/jay-zuo"}, "edited": false, "score": 0, "creation_date": 1490275099, "post_id": 42963799, "comment_id": 73046313, "body": "I can&#39;t reproduce your issue. Adding video effect during recording works in my side. Could you share a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that can reproduce your issue?"}], "owner": {"reputation": 71, "user_id": 2593220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd5d54496c50343801961ce56d3db209?s=128&d=identicon&r=PG", "display_name": "James Autry", "link": "https://stackoverflow.com/users/2593220/james-autry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1491772806, "creation_date": 1490221578, "last_edit_date": 1491772806, "question_id": 42963799, "link": "https://stackoverflow.com/questions/42963799/video-effect-while-recording-fails-on-universal-platform-app", "title": "video effect while recording fails on universal platform app", "body": "<p>Using the mediacapture class on a universal platform app, I am attempting to add an overlay effect on a recording.  The overlay effect works fine on the preview, and on recording if I set the effect prior to starting the record.  If I try to set the effect during a recording, the system generates an exception: \"The data specified for the media type is invalid, inconsistent, or not supported by this object\".  What would cause it to fail only during an active record session?</p>\n\n<pre><code>            VideoEffectDefinition^ effect = ref new VideoEffectDefinition(\"CompositionEffectLibrary.CompositionEffect\", props);\n        if (mediaCapture-&gt;MediaCaptureSettings-&gt;VideoDeviceCharacteristic == VideoDeviceCharacteristic::AllStreamsIdentical ||\n            mediaCapture-&gt;MediaCaptureSettings-&gt;VideoDeviceCharacteristic == VideoDeviceCharacteristic::PreviewRecordStreamsIdentical)\n        {\n            // This effect will modify both the preview and the record streams, because they are the same stream.\n            create_task(mediaCapture-&gt;AddVideoEffectAsync(effect, MediaStreamType::VideoRecord))\n                .then([this](IMediaExtension^ mediaExtension)\n            {\n            });\n        }\n\n        else\n        {\n            create_task(mediaCapture-&gt;AddVideoEffectAsync(effect, MediaStreamType::VideoRecord))\n                .then([this, effect](IMediaExtension^ mediaExtension)\n            {\n                auto mediaCapture = m_mediaCaptureMgr.Get();\n                create_task(mediaCapture-&gt;AddVideoEffectAsync(effect, MediaStreamType::VideoPreview))\n                    .then([this](IMediaExtension^ mediaExtension)\n                {\n                });\n            });\n        } // else\n\n    return true;\n</code></pre>\n\n<p>I ran the program with the canned VideoStabilization effect, and had no problems, so it seems to be related to using a custom class.  I am including it also.  There were no compile errors or warnings and uses the Win2D package.</p>\n\n<p>C++ Effect Class</p>\n\n<pre><code>public ref class CompositionEffect sealed : public IBasicVideoEffect\n{\n    CanvasDevice^ _canvasDevice = nullptr;\n    CanvasBitmap^ _overlayBitmap = nullptr;\n    IRandomAccessStream^ _overlayStream;\n    int _offsetX;\n    int _offsetY;\n    int _width;\n    int _height;\n    bool _atTop;\n    int _position;\n    float _opacity;\n    bool _layerCreated = false;\n    CanvasActiveLayer^ _activeLayer = nullptr;\n    Vector&lt;VideoEncodingProperties^&gt;^ _videoEncProps;\n\npublic:\n    CompositionEffect()\n    {\n        VideoEncodingProperties^ encodingProperties = ref new VideoEncodingProperties();\n        encodingProperties-&gt;Subtype = \"ARGB32\";\n        _videoEncProps = ref new Vector&lt;VideoEncodingProperties^&gt;{ encodingProperties };\n    }\n\n    property bool IsReadOnly\n    {\n        virtual bool get() { return true; }\n    }\n\n    property IVectorView&lt;VideoEncodingProperties^&gt; ^SupportedEncodingProperties\n    {\n        virtual IVectorView&lt;VideoEncodingProperties^&gt; ^get() { return _videoEncProps-&gt;GetView(); }\n    }\n\n    property MediaMemoryTypes SupportedMemoryTypes\n    {\n        virtual MediaMemoryTypes get() { return MediaMemoryTypes::Gpu; }\n    }\n\n    property bool TimeIndependent\n    {\n        virtual bool get() { return true; }\n    }\n\n    // Get positional information from loaded image\n    virtual void CompositionEffect::SetEncodingProperties(VideoEncodingProperties^ encodingProperties, IDirect3DDevice^ device)\n    {\n        if (_canvasDevice != nullptr)\n            return;\n\n        _canvasDevice = CanvasDevice::CreateFromDirect3D11Device(device);\n\n        create_task(CanvasBitmap::LoadAsync(_canvasDevice, _overlayStream)).then([this](CanvasBitmap^ bmp)\n        {\n            _overlayBitmap = bmp;\n\n            // overlay at left side of source\n            if (_position == 0)\n            {\n                _offsetX = 0;\n            }\n\n            // overlay at right side of source\n            else if (_position == 2)\n            {\n                _offsetX = _width - bmp-&gt;SizeInPixels.Width;\n            }\n\n            // overlay at center of source\n            else\n            {\n                _offsetX = (_width - bmp-&gt;SizeInPixels.Width) / 2;\n            }\n\n            // Set overlay vertical position\n            if (_atTop)\n            {\n                _offsetY = 0;\n            }\n\n            else\n            {\n                _offsetY = (_height - bmp-&gt;SizeInPixels.Height);\n            }\n        });\n    }\n\n    virtual void Close(MediaEffectClosedReason reason)\n    {\n    }\n\n    virtual void DiscardQueuedFrames() { }\n\n    // Draw overlay image over source image at specified coordinates\n    virtual void ProcessFrame(ProcessVideoFrameContext^ context)\n    {           \n\n        IDirect3DSurface^ outputSurface = context-&gt;OutputFrame-&gt;Direct3DSurface;\n        CanvasRenderTarget^ renderTarget = CanvasRenderTarget::CreateFromDirect3D11Surface(_canvasDevice, outputSurface);\n        CanvasDrawingSession^ drawSession = renderTarget-&gt;CreateDrawingSession();\n        _activeLayer = drawSession-&gt;CreateLayer(_opacity);\n\n        if (_overlayBitmap != nullptr)\n        {\n            drawSession-&gt;DrawImage(_overlayBitmap, (float)_offsetX, (float)_offsetY);\n        }\n\n        delete(_activeLayer);\n    }\n\n    // Set the operational parameters of the effect\n    virtual void SetProperties(IPropertySet^ configuration) \n    {\n        _overlayStream = (IRandomAccessStream^)configuration-&gt;Lookup(\"bitmap\");\n        _width = (int)configuration-&gt;Lookup(\"width\");\n        _height = (int)configuration-&gt;Lookup(\"height\");\n        _opacity = (float)(int)configuration-&gt;Lookup(\"opacity\");\n        _opacity /= 100;\n        _atTop = (bool)configuration-&gt;Lookup(\"attop\");\n        _position = (int)configuration-&gt;Lookup(\"position\");\n    }\n\n};\n</code></pre>\n\n<p>I wrote a simple example in C# and tried it on my development machine, and it failed the same way with the \"data specified for the media type ...\" message.  I then placed the program on another machine, and it worked fine????  I have the effect set up for Cpu instead of Gpu, so it makes no sense for it to behave differently across platforms running the same 4.6 framework.  Here is a link to the test program <a href=\"https://1drv.ms/u/s!AuPA5TUtivDpgmDxXJm7FE5XztxE\" rel=\"nofollow noreferrer\">TestVideoApp2</a></p>\n\n<p>I have discovered some additional info regarding this issue.  It appears that the input stream was set to YUY2.  I changed this to NV12, and it started working.  Unfortunately, I changed cameras and even though the new camera supported this output format, it failed with the invalid media type.  It seems to be related to the input media type vs the supported media type of the effect.  Not sure what the relationship is here but some progress is being made.  Perhaps someone knows what the video input vs effect media types are supposed to be to work properly.</p>\n\n<p>OK, it appears I have to change the input format from the camera (YUY2 or NV12) to ARGB32 in process frame, and probably back to NV12 when I exit, and also set YUY2 or NV12 as supported types. What is failing is that the supported effect media type is ARGB32 and is hitting the NV12 media stream input filter type of the recording.  Does this sound reasonable??  Is there a more straight forward approach as this could get quite painful.</p>\n\n<p>I found a solution to the problem by setting the input format of the effect to YUY2 and then converting it over to BGR8 via SoftwareBitmap.Convert.  From there I did the effect manually via pixel byte arrays and then converted back to YUY2 before returning from ProcessFrame.  This seems to work fine now.  Unfortunately, I cannot use Win2D since it does not support YUY2.  I would like a GPU solution, but for now the CPU solution seems to solve my immediate needs.  Perhaps someone else may be able to come up with a solution using the GPU.</p>\n"}, {"tags": ["c++", "lldb"], "answers": [{"comments": [{"owner": {"reputation": 1400, "user_id": 3861965, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/t09dC.jpg?s=128&g=1", "display_name": "mcansado", "link": "https://stackoverflow.com/users/3861965/mcansado"}, "edited": false, "score": 0, "creation_date": 1490255521, "post_id": 42965643, "comment_id": 73032731, "body": "Exactly what I was looking for!"}], "tags": [], "owner": {"reputation": 20083, "user_id": 2465073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f7ba796598ce99fe9d17b66c119b00?s=128&d=identicon&r=PG", "display_name": "Jim Ingham", "link": "https://stackoverflow.com/users/2465073/jim-ingham"}, "is_accepted": true, "score": 1, "last_activity_date": 1490290627, "last_edit_date": 1490290627, "creation_date": 1490232639, "answer_id": 42965643, "question_id": 42963617, "link": "https://stackoverflow.com/questions/42963617/making-a-c-file-from-within-lldb/42965643#42965643", "title": "Making a C++ file from within lldb", "body": "<p>By \"make\" do you mean run the shell command \"make\" in some directory?  lldb doesn't have any explicit support for the make tool, but you can run any shell command from lldb with the <code>platform shell</code> command.  So for instance:</p>\n\n<pre><code>(lldb) platform shell make\n</code></pre>\n\n<p>If you need to change the current working directory to the one where you would run make, you can do that with:</p>\n\n<pre><code>(lldb) platform set -w &lt;directory&gt;\n</code></pre>\n\n<p>BTW, if you do this often, you can put:</p>\n\n<pre><code>command alias -h \"Run make in the CWD\" -- make platform shell make\n</code></pre>\n\n<p>in your .lldbinit file, and then you can just do:</p>\n\n<pre><code>(lldb) make\n</code></pre>\n"}], "owner": {"reputation": 1400, "user_id": 3861965, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/t09dC.jpg?s=128&g=1", "display_name": "mcansado", "link": "https://stackoverflow.com/users/3861965/mcansado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 42965643, "answer_count": 1, "score": 0, "last_activity_date": 1490290627, "creation_date": 1490220679, "question_id": 42963617, "link": "https://stackoverflow.com/questions/42963617/making-a-c-file-from-within-lldb", "title": "Making a C++ file from within lldb", "body": "<p>When debugging with lldb and understanding what the root of a bug is, you change the file and save it. It would then be convenient to be able to make the file from within lldb. Is there a way of doing this (like you would in gdb)? Not sure if it's relevant but I'm talking about C++ file specifically.</p>\n\n<p>Currently I just <code>quit</code>, make the file again, and launch lldb again but this is time consuming.</p>\n"}, {"tags": ["c++", "boost", "dll", "dependency-injection"], "answers": [{"comments": [{"owner": {"reputation": 765, "user_id": 1292814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40ef9aba49bebc01053a625abcc8c3ba?s=128&d=identicon&r=PG", "display_name": "Innokentiy Alaytsev", "link": "https://stackoverflow.com/users/1292814/innokentiy-alaytsev"}, "edited": false, "score": 0, "creation_date": 1526373841, "post_id": 43526254, "comment_id": 87707467, "body": "Hello! Would you kindly tell what is your final solution to the problem? I am facing the same problem with DI and shared libraries. Right now I am looking at Boost.DI and Google Fruit. It seems like it should be possible to configure injection in runtime by using some kind of factory and dynamic binding mechanics."}, {"owner": {"reputation": 676, "user_id": 521148, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Ze8P9.jpg?s=128&g=1", "display_name": "Andreas Walter", "link": "https://stackoverflow.com/users/521148/andreas-walter"}, "reply_to_user": {"reputation": 765, "user_id": 1292814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40ef9aba49bebc01053a625abcc8c3ba?s=128&d=identicon&r=PG", "display_name": "Innokentiy Alaytsev", "link": "https://stackoverflow.com/users/1292814/innokentiy-alaytsev"}, "edited": false, "score": 0, "creation_date": 1526495741, "post_id": 43526254, "comment_id": 87771864, "body": "@InnokentiyAlaytsev Finally we decided not to use Boost.DI. In fact, we where not using &quot;real&quot; DI for our project, but simply used self contained modules that we loaded according to a configuration during load time of the application."}], "tags": [], "owner": {"reputation": 676, "user_id": 521148, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Ze8P9.jpg?s=128&g=1", "display_name": "Andreas Walter", "link": "https://stackoverflow.com/users/521148/andreas-walter"}, "is_accepted": true, "score": 1, "last_activity_date": 1492709668, "creation_date": 1492709668, "answer_id": 43526254, "question_id": 42963538, "link": "https://stackoverflow.com/questions/42963538/using-boost-di-with-configuration-file-and-shared-libraries/43526254#43526254", "title": "Using boost-di with configuration file and shared libraries", "body": "<p>There is a mechanism to decide during runtime what implementation to use. But due to the compile time approach of Boost DI it seems by design not intended to use it with dynamic libraries.</p>\n\n<p>For a pure compile time injection it looks very smart and nice to use. For my problem, it seems not the right solution.</p>\n"}], "owner": {"reputation": 676, "user_id": 521148, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Ze8P9.jpg?s=128&g=1", "display_name": "Andreas Walter", "link": "https://stackoverflow.com/users/521148/andreas-walter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "accepted_answer_id": 43526254, "answer_count": 1, "score": 1, "last_activity_date": 1492709668, "creation_date": 1490220359, "question_id": 42963538, "link": "https://stackoverflow.com/questions/42963538/using-boost-di-with-configuration-file-and-shared-libraries", "title": "Using boost-di with configuration file and shared libraries", "body": "<p>I am planning a c++ project using dependency injection via boost di. In my opinion I will need a mechanism for dynamically loading libraries too, to be able to realy benefit of dependency injection. </p>\n\n<p>Therefore I consider using boost dll to use a platform independent shared library mechansim. </p>\n\n<p>For dependency configuration I think about using INI-files via boost property tree.</p>\n\n<p>Do you see any major drawback in this approach? \nOr is there another platform independent mechanism/library?</p>\n\n<p>Thanks for your opinions\nAndreas</p>\n"}, {"tags": ["c++", "opengl", "complex-numbers", "freeglut", "mandelbrot"], "comments": [{"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 1, "creation_date": 1490220847, "post_id": 42963484, "comment_id": 73021278, "body": "This is possibly the most inefficient way to use OpenGL here\u2026"}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 1, "creation_date": 1490220880, "post_id": 42963484, "comment_id": 73021290, "body": "@DietrichEpp: Eh, you see 2-3 of these pixel-plotters a month."}, {"owner": {"reputation": 351, "user_id": 3608004, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4f223c3fc887b7b4df86253d3da50d51?s=128&d=identicon&r=PG&f=1", "display_name": "Borzi", "link": "https://stackoverflow.com/users/3608004/borzi"}, "edited": false, "score": 0, "creation_date": 1490221752, "post_id": 42963484, "comment_id": 73021676, "body": "Sorry for being that guy ^^...if you guys have another method you could suggest, id check it out - but this works."}], "answers": [{"comments": [{"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1490221021, "post_id": 42963652, "comment_id": 73021359, "body": "Transposing the 3rd and 4th arguments shouldn&#39;t have any effect."}, {"owner": {"reputation": 351, "user_id": 3608004, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4f223c3fc887b7b4df86253d3da50d51?s=128&d=identicon&r=PG&f=1", "display_name": "Borzi", "link": "https://stackoverflow.com/users/3608004/borzi"}, "edited": false, "score": 2, "creation_date": 1490221868, "post_id": 42963652, "comment_id": 73021738, "body": "This worked perfectly - didn&#39;t even need to tranpose/adjust anything. Thanks!"}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "reply_to_user": {"reputation": 121, "user_id": 5112031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97203bfab26f3f9701042fba47af4ae3?s=128&d=identicon&r=PG&f=1", "display_name": "JSycamore", "link": "https://stackoverflow.com/users/5112031/jsycamore"}, "edited": false, "score": 0, "creation_date": 1521817831, "post_id": 42963652, "comment_id": 85908373, "body": "@NBCKLY: Edited in complete program."}], "tags": [], "owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "is_accepted": true, "score": 2, "last_activity_date": 1521817799, "last_edit_date": 1521817799, "creation_date": 1490220850, "answer_id": 42963652, "question_id": 42963484, "link": "https://stackoverflow.com/questions/42963484/rendering-the-mandelbrot-set-in-opengl/42963652#42963652", "title": "Rendering the mandelbrot set in OpenGl", "body": "<p>The identity <code>GL_PROJECTION</code> matrix doesn't give you a 1-to-1 unit-to-pixel mapping like you're assuming, it's a +/-(1,1,1) cube.</p>\n\n<p>Use <code>glOrtho()</code> to get the matrix you want:</p>\n\n<pre><code>glOrtho( 0, width, 0, height, -1, 1 );\n</code></pre>\n\n<p>All together:</p>\n\n<pre><code>#include &lt;GL/glut.h&gt;\n\n#include &lt;complex&gt;\nusing std::complex;\n\n// Render the Mandelbrot set into the image array.\n// The parameters specify the region on the complex plane to plot.\nvoid compute_mandelbrot( double left, double right, double top, double bottom )\n{\n    // The number of times to iterate before we assume that a point isn't in the\n    // Mandelbrot set.\n    // (You may need to turn this up if you zoom further into the set.)\n    const int MAX_ITERATIONS = 500;\n\n    const int width = glutGet( GLUT_WINDOW_WIDTH );\n    const int height = glutGet( GLUT_WINDOW_HEIGHT );\n\n    glBegin( GL_POINTS ); // start drawing in single pixel mode\n    for( int y = 0; y &lt; height; ++y )\n    {\n        for( int x = 0; x &lt; width; ++x )\n        {\n            // Work out the point in the complex plane that\n            // corresponds to this pixel in the output image.\n            complex&lt;double&gt; c( left + ( x * ( right - left ) / width ),\n                top + ( y * ( bottom - top ) / height ) );\n\n            // Start off z at (0, 0).\n            complex&lt;double&gt; z( 0.0, 0.0 );\n\n            // Iterate z = z^2 + c until z moves more than 2 units\n            // away from (0, 0), or we've iterated too many times.\n            int iterations = 0;\n            while( abs( z ) &lt; 2.0 &amp;&amp; iterations &lt; MAX_ITERATIONS )\n            {\n                z = ( z * z ) + c;\n\n                ++iterations;\n            }\n\n            if( iterations == MAX_ITERATIONS )\n            {\n                glColor3f( 1.0, 0.0, 0.0 ); // Set color to draw mandelbrot\n                // z didn't escape from the circle.\n                // This point is in the Mandelbrot set.\n                glVertex2i( x, y );\n            }\n            else\n            {\n                glColor3f( 0.0, 0.0, 0.0 ); //Set pixel to black\n                // z escaped within less than MAX_ITERATIONS\n                // iterations. This point isn't in the set.\n                glVertex2i( x, y );\n            }\n        }\n    }\n    glEnd();\n}\n\nvoid display()\n{\n    glClearColor( 0.0f, 0.0f, 0.0f, 0.0f );\n    glClear( GL_COLOR_BUFFER_BIT );\n\n    glMatrixMode( GL_PROJECTION );\n    glLoadIdentity();\n    const int width = glutGet( GLUT_WINDOW_WIDTH );\n    const int height = glutGet( GLUT_WINDOW_HEIGHT );\n    glOrtho( 0, width, 0, height, -1, 1 );\n\n    glMatrixMode( GL_MODELVIEW );\n    glLoadIdentity();\n\n    compute_mandelbrot( -2.0, 1.0, 1.125, -1.125 );\n    glutSwapBuffers();\n}\n\nint main( int argc, char** argv )\n{\n    glutInit( &amp;argc, argv );\n    glutInitDisplayMode( GLUT_DOUBLE | GLUT_RGBA );\n    glutInitWindowSize( 300, 300 );\n    glutCreateWindow( \"Mandelbrot\" );\n    glutDisplayFunc( display );\n    glutMainLoop();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 351, "user_id": 3608004, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4f223c3fc887b7b4df86253d3da50d51?s=128&d=identicon&r=PG&f=1", "display_name": "Borzi", "link": "https://stackoverflow.com/users/3608004/borzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2877, "favorite_count": 0, "accepted_answer_id": 42963652, "answer_count": 1, "score": 2, "last_activity_date": 1521817799, "creation_date": 1490220142, "last_edit_date": 1490220641, "question_id": 42963484, "link": "https://stackoverflow.com/questions/42963484/rendering-the-mandelbrot-set-in-opengl", "title": "Rendering the mandelbrot set in OpenGl", "body": "<p>I have to render the mandelbrot set and I was wondering if someone could point out some flaws with my code - at the moment, the output windows just shows a black screen. I think that my mandelbrot mathematics are correct, because I have used the same code to output a .tga of the mandelbrot - is it something to do with the OpenGl method I am using to output the pixels?</p>\n\n<p>Full code:</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n#include &lt;GL\\glew.h&gt;\n#include &lt;GL\\freeglut.h&gt;\n#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;chrono&gt;\n#include &lt;cstdint&gt;\n#include &lt;cstdlib&gt;\n#include &lt;complex&gt;\n#include &lt;fstream&gt;\n#include &lt;thread&gt;\n#include &lt;mutex&gt;\n#include &lt;vector&gt;\n#include &lt;Windows.h&gt;\n\n// Import things we need from the standard library\nusing std::chrono::duration_cast;\nusing std::chrono::milliseconds;\nusing std::complex;\nusing std::cout;\nusing std::endl;\nusing std::ofstream;\n// ...other useful includes\nusing std::cout;\nusing std::endl;\nusing std::thread;\nusing std::mutex;\nusing std::lock;\nusing std::unique_lock;\nusing std::vector;\n\nconst int width = 600, height = 600; // window size\nint windowID;\n\n// The number of times to iterate before we assume that a point isn't in the\n// Mandelbrot set.\n// (You may need to turn this up if you zoom further into the set.)\nconst int MAX_ITERATIONS = 500;\n\nbool fullScreen = false;\nbool need_to_draw = true;\n\n//****************************************\n\n// Render the Mandelbrot set into the image array.\n// The parameters specify the region on the complex plane to plot.\nvoid compute_mandelbrot(double left, double right, double top, double bottom)\n{\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); // clear the screen buffer\n    glBegin(GL_POINTS); // start drawing in single pixel mode\n    for (int y = 0; y &lt; height; ++y)\n    {\n        for (int x = 0; x &lt; width; ++x)\n        {\n            // Work out the point in the complex plane that\n            // corresponds to this pixel in the output image.\n            complex&lt;double&gt; c(left + (x * (right - left) / width),\n                top + (y * (bottom - top) / height));\n\n            // Start off z at (0, 0).\n            complex&lt;double&gt; z(0.0, 0.0);\n\n            // Iterate z = z^2 + c until z moves more than 2 units\n            // away from (0, 0), or we've iterated too many times.\n            int iterations = 0;\n            while (abs(z) &lt; 2.0 &amp;&amp; iterations &lt; MAX_ITERATIONS)\n            {\n                z = (z * z) + c;\n\n                ++iterations;\n            }\n\n            if (iterations == MAX_ITERATIONS)\n            {\n                glColor3f(1.0, 0.0, 0.0); // Set color to draw mandelbrot\n                // z didn't escape from the circle.\n                // This point is in the Mandelbrot set.\n                glVertex2i(x, y);\n            }\n            else\n            {\n                glColor3f(0.0, 0.0, 0.0); //Set pixel to black\n                // z escaped within less than MAX_ITERATIONS\n                // iterations. This point isn't in the set.\n                glVertex2i(x, y);\n            }\n        }\n    }\n    glEnd();\n    glutSwapBuffers();\n    need_to_draw = false;\n}\n\nint main(int argc, char** argv) \n{\n    glutInit(&amp;argc, argv);\n    glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);\n    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);\n    GLsizei windowX = (glutGet(GLUT_SCREEN_WIDTH) - width) / 2;\n    GLsizei windowY = (glutGet(GLUT_SCREEN_HEIGHT) - height) / 2;\n    glutInitWindowPosition(windowX, windowY);\n    glutInitWindowSize(width, height);\n    windowID = glutCreateWindow(\"Mandelbrot\");\n\n    if (need_to_draw)\n    {\n        compute_mandelbrot(-2.0, 1.0, 1.125, -1.125);\n    }\n\n    glShadeModel(GL_SMOOTH);\n    glEnable(GL_DEPTH_TEST);\n    glViewport(0, 0, (GLsizei)width, (GLsizei)height);\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n    glutMainLoop();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "loops", "struct", "fstream"], "comments": [{"owner": {"reputation": 2220, "user_id": 6838526, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2AyH9wsYAa4/AAAAAAAAAAI/AAAAAAAAAEc/9bGwvIdJPDM/photo.jpg?sz=128", "display_name": "Joseph Ireland", "link": "https://stackoverflow.com/users/6838526/joseph-ireland"}, "edited": false, "score": 1, "creation_date": 1490219754, "post_id": 42963340, "comment_id": 73020831, "body": "can we see a sample txt file? what separates the title from the author?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1490222276, "post_id": 42963340, "comment_id": 73021937, "body": "Unanswerable without a sample of the file or guesswork. Guess: you can test input validity with reads of chunks and the <code>&amp;&amp;</code> opperator: <code>if (inFile &gt;&gt; inventory[pos].ISBN &amp;&amp; infile.ignore() &amp;&amp; std::getline(inFile, inventory[pos].title) &amp;&amp;...)</code> but it may be better to read everything as <code>string</code>s with <code>getline</code>and convert the <code>string</code>s to numbers as required after the fact."}, {"owner": {"reputation": 27, "user_id": 7753734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a27513bffa0ba7b988e55876ddb5705?s=128&d=identicon&r=PG&f=1", "display_name": "C. Timmerman", "link": "https://stackoverflow.com/users/7753734/c-timmerman"}, "edited": false, "score": 0, "creation_date": 1490484855, "post_id": 42963340, "comment_id": 73133598, "body": "inventory.txt file:   20451 My First Book Mark Lusk Pearson Publishing 40 45.34 9780316 Brown Family Mason Victor Little Brown 36 105.99 1349877 Story of My Life Norah M Jones CreateSpace Independent Publishing Platform 20 18"}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1490221964, "post_id": 42963531, "comment_id": 73021794, "body": "If your assumptions about the file format are correct, the task is exceedingly hard as few authors and books have a single word name. Solving this problem with is far past the skills of anyone who would be asking a question like this. If you read further into the question, the OP talks about knowing they need to use getline. This suggests either there is a delimiter, shame on OP for not supplying a file sample, that can be used to be used with <code>getline</code>. The suggestion of the creation of use of <code>operator&gt;&gt;</code> is spot on, though, and saves this answer from a downvote."}, {"owner": {"reputation": 27, "user_id": 7753734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a27513bffa0ba7b988e55876ddb5705?s=128&d=identicon&r=PG&f=1", "display_name": "C. Timmerman", "link": "https://stackoverflow.com/users/7753734/c-timmerman"}, "edited": false, "score": 0, "creation_date": 1490353346, "post_id": 42963531, "comment_id": 73085265, "body": "I appreciate your feedback. This is part of a programming assignment for school that is very &#39;hands off&#39; so I might be taking the wrong approach. The reason why I think I need to use getline is because the author and title line on the inventory file is an entire phrase so I need to get the entire string into the array. We were also given a hint to not forget to use .ignore() to remove the \\n from the buffer."}, {"owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "reply_to_user": {"reputation": 27, "user_id": 7753734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a27513bffa0ba7b988e55876ddb5705?s=128&d=identicon&r=PG&f=1", "display_name": "C. Timmerman", "link": "https://stackoverflow.com/users/7753734/c-timmerman"}, "edited": false, "score": 0, "creation_date": 1490354254, "post_id": 42963531, "comment_id": 73085934, "body": "@C.Timmerman I see what you mean. Have a look at <code>std::vector</code> instead of array, as you are using C++, not C. As for the <code>getline()</code>, it could be included in an implementation, but you should remember that there are multiple ways of doing what you want, even without its use, my answer is an example of that. Do you need further clarification/ help for your question?"}], "tags": [], "owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "is_accepted": false, "score": -1, "last_activity_date": 1490358628, "last_edit_date": 1495542331, "creation_date": 1490220332, "answer_id": 42963531, "question_id": 42963340, "link": "https://stackoverflow.com/questions/42963340/need-help-reading-data-from-txt-file-into-an-array-c/42963531#42963531", "title": "Need help reading data from .txt file into an array C++", "body": "<p>Presuming the input format is:</p>\n\n<pre><code>ISBN title author publisher price quantity price\n</code></pre>\n\n<p>i.e., the data members are line white space separated, you could define <code>operator&gt;&gt;</code> for your <code>struct textbook</code>, which could look something like:</p>\n\n<pre><code>std::istream&amp; operator&gt;&gt; (std::istream&amp; is, textbook&amp; t)\n{\n    if (!is) // check input stream status\n    {\n        return is;\n    }\n\n    int ISBN;\n    std::string title;\n    std::string author;\n    std::string publisher;\n    int quantity;\n    double price;\n\n    // simple format check\n    if (is &gt;&gt; ISBN &gt;&gt; title &gt;&gt; author &gt;&gt; publisher &gt;&gt; quantity &gt;&gt; price)\n    {\n          // assuming you additionally define a (assignment) constructor  \n          t = textbook(ISBN, title, author, publisher, quantity, price);\n\n          return is;\n    }\n\n    return is;\n}\n</code></pre>\n\n<p>Then to read your file you simply do:</p>\n\n<pre><code>std::ifstream ifs(...);\n\nstd::vector&lt;textbook&gt; books;\n\ntextbook b; \nwhile (ifs &gt;&gt; b)\n{\n     books.push_back(b);\n}\n</code></pre>\n\n<p>Regarding the use of <code>getline()</code> see this <a href=\"https://stackoverflow.com/questions/35974402/reading-getline-from-cin-into-a-stringstream-c/35974444#35974444\">answer</a>.</p>\n\n<hr>\n"}], "owner": {"reputation": 27, "user_id": 7753734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a27513bffa0ba7b988e55876ddb5705?s=128&d=identicon&r=PG&f=1", "display_name": "C. Timmerman", "link": "https://stackoverflow.com/users/7753734/c-timmerman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 817, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490358628, "creation_date": 1490219544, "last_edit_date": 1490219829, "question_id": 42963340, "link": "https://stackoverflow.com/questions/42963340/need-help-reading-data-from-txt-file-into-an-array-c", "title": "Need help reading data from .txt file into an array C++", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nstruct textbook //Declare struct type\n{\n    int ISBN;\n    string title;\n    string author;\n    string publisher;\n    int quantity;\n    double price;\n};\n\n// Constants\nconst int MAX_SIZE = 100;\n\n// Arrays\ntextbook inventory[MAX_SIZE];\n\nvoid readInventory()\n{\n    // Open inventory file\n    ifstream inFile(\"inventory.txt\");\n\n    // Check for error\n    if (inFile.fail())\n    {\n        cerr &lt;&lt; \"Error opening file\" &lt;&lt; endl;\n        exit(1);\n    }\n\n    // Loop that reads contents of file into the inventory array.\n\n       pos = 0; //position in the array\n\n       while (\n\n        inFile &gt;&gt; inventory[pos].ISBN\n               &gt;&gt; inventory[pos].title\n               &gt;&gt; inventory[pos].author \n                   &gt;&gt; inventory[pos].publisher\n               &gt;&gt; inventory[pos].quantity \n                   &gt;&gt; inventory[pos].price\n          )\n\n    {\n        pos++;\n\n    } \n\n    // Close file \n    inFile.close();\n\n    return;\n\n}\n</code></pre>\n\n<p>Hello,</p>\n\n<p>I need assistance with this function. The goal of this function is to read in the information from a txt file and read it in to an array struct for a textbook. \nThe text file itself is already set up in the correct order for the loop.</p>\n\n<p>My problem is that for the title section, the title of a book might be multiple words like 'My first book\" for example. I know that I have to use a getline to take the line as a string to feed it into the 'title' data type. </p>\n\n<p>I am also missing a inFile.ignore() somewhere but I don not know how to put it into a loop. </p>\n"}, {"tags": ["c++", "ssl", "go", "grpc"], "answers": [{"comments": [{"owner": {"reputation": 10343, "user_id": 1309332, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2CtHJ.png?s=128&g=1", "display_name": "dbn", "link": "https://stackoverflow.com/users/1309332/dbn"}, "edited": false, "score": 0, "creation_date": 1490227615, "post_id": 42964098, "comment_id": 73023832, "body": "Do you understand why the golang client version accepts the connection with my same self-signed root certificate?"}, {"owner": {"reputation": 1639, "user_id": 7187655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hvz9T.png?s=128&g=1", "display_name": "Motakjuq", "link": "https://stackoverflow.com/users/7187655/motakjuq"}, "edited": false, "score": 0, "creation_date": 1490248466, "post_id": 42964098, "comment_id": 73029740, "body": "It looks that go client also has problem with the connection, you have to check the errors when you load the cert and ca, you&#39;re not checking any possible error in both codes"}], "tags": [], "owner": {"reputation": 36869, "user_id": 102371, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/262d914b9ff3f5b7f599de600cf463a8?s=128&d=identicon&r=PG", "display_name": "John Weldon", "link": "https://stackoverflow.com/users/102371/john-weldon"}, "is_accepted": false, "score": 1, "last_activity_date": 1490222995, "creation_date": 1490222995, "answer_id": 42964098, "question_id": 42963332, "link": "https://stackoverflow.com/questions/42963332/connection-error-between-c-grpc-client-and-golang-server/42964098#42964098", "title": "connection error between C++ GRPC client and golang server", "body": "<p>The error message is caused by the certificate being presented is not trusted on the system that the C++ code is running on.</p>\n\n<p>If you're using a self-signed certificate you either need to add your root signing key to the ca-certificates on that system or configure your C++ code to read and recognise that root signing key.</p>\n\n<p>If you provide more information on the keys in your code (I assume the root.crt is your root signing key), someone may be able to give you more specific help.</p>\n"}], "owner": {"reputation": 10343, "user_id": 1309332, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2CtHJ.png?s=128&g=1", "display_name": "dbn", "link": "https://stackoverflow.com/users/1309332/dbn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1355, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490222995, "creation_date": 1490219517, "question_id": 42963332, "link": "https://stackoverflow.com/questions/42963332/connection-error-between-c-grpc-client-and-golang-server", "title": "connection error between C++ GRPC client and golang server", "body": "<p>I'm trying to write a GRPC server that talks to both a C++ and golang client. Since this is all internal to our system, there will be a self-signed certificate that signs the server certificate, and the server will sign the client certificates.</p>\n\n<p>I'm able to connect to the server from the golang client. However, the C++ client doesn't connect, and I see a bunch of errors from the ssl layer. What am I doing incorrectly in my configuration of the C++ grpc client?</p>\n\n<p>(My certificates all use a 2048bit RSA key for now)</p>\n\n<p>Here are the client codes that I thought were equivalent (error handling elided):</p>\n\n<p><strong>Golang:</strong></p>\n\n<pre class=\"lang-golang prettyprint-override\"><code>import (\n    \"crypto/tls\"\n    \"io/ioutil\"\n    \"google.golang.org/grpc\"\n    \"google.golang.org/grpc/credentials\"\n)\n\nfunc getConnection(hostPort string) (*grpc.ClientConn, error) {\n    var config tls.Config\n    cert, _ := tls.LoadX509KeyPair(\"client.crt\", \"client.key\")\n    config.Certificates = append(config.Certificates, cert)\n    b, _ := ioutil.ReadFile(\"root.crt\")\n    config.RootCAs.AppendCertsFromPEM(b)\n\n    options := grpc.WithTransportCredentials(credentials.NewTLS(config))\n    return grpc.Dial(hostPort, options)\n}\n</code></pre>\n\n<p><strong>C++:</strong></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;grpc++/grpc++.h&gt;\n\nstd::shared_ptr&lt;grpc::Channel&gt; get_connection(const std::string&amp; host_port) {\n    auto contents = [](const std::string&amp; filename) -&gt; std::string {\n        std::ifstream fh(filename);\n        std::stringstream buffer;\n        buffer &lt;&lt; fh.rdbuf();\n        fh.close();\n        return buffer.str();\n    };\n\n    auto ssl_options = grpc::SslCredentialsOptions();\n    ssl_options.pem_cert_chain = contents(\"client.crt\");\n    ssl_options.pem_private_key = contents(\"client.key\");\n    ssl_options.pem_root_certs = contents(\"root.crt\");\n    auto creds = grpc::SslCredentials(ssl_options);\n    auto channel = grpc::CreateChannel(hostport, creds);\n}\n</code></pre>\n\n<p>My error messages:</p>\n\n<p><strong>C++ Client error messages</strong></p>\n\n<pre><code>D0322 14:42:12.882767371   11701 env_linux.c:77]             Warning: insecure environment read function 'getenv' used\ngetting job record\nE0322 14:42:12.930157873   11701 ssl_transport_security.c:945] Handshake failed with fatal error SSL_ERROR_SSL: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed.\nE0322 14:42:12.930231627   11701 handshake.c:128]            Security handshake failed: {\"created\":\"@1490218932.930210185\",\"description\":\"Handshake failed\",\"file\":\"src/core/lib/security/transport/handshake.c\",\"file_line\":264,\"tsi_code\":10,\"tsi_error\":\"TSI_PROTOCOL_FAILURE\"}\nE0322 14:42:12.964082644   11701 ssl_transport_security.c:945] Handshake failed with fatal error SSL_ERROR_SSL: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed.\nE0322 14:42:12.964134746   11701 handshake.c:128]            Security handshake failed: {\"created\":\"@1490218932.964114213\",\"description\":\"Handshake failed\",\"file\":\"src/core/lib/security/transport/handshake.c\",\"file_line\":264,\"tsi_code\":10,\"tsi_error\":\"TSI_PROTOCOL_FAILURE\"}\nstd::string JobServerClient::getJobRecord(const string&amp;) const: GRPC connection error 14 []\n</code></pre>\n\n<p><strong>Golang Client error messages</strong></p>\n\n<pre><code>2017/03/22 17:42:12 grpc: Server.Serve failed to create ServerTransport:  connection error: desc = \"transport: EOF\"\n2017/03/22 17:42:12 grpc: Server.Serve failed to create ServerTransport:  connection error: desc = \"transport: EOF\"\n</code></pre>\n\n<p>What additional debugging can I do to determine where the C++ client is going awry?</p>\n"}, {"tags": ["c++", "oop"], "answers": [{"comments": [{"owner": {"reputation": 499, "user_id": 6281636, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/95524308f4f33ad7dac2540300946ba8?s=128&d=identicon&r=PG&f=1", "display_name": "drewpol", "link": "https://stackoverflow.com/users/6281636/drewpol"}, "edited": false, "score": 0, "creation_date": 1490219712, "post_id": 42963363, "comment_id": 73020817, "body": "Yes, and I get an error : <code>error: &#39;settings&#39; has not been declared</code>"}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "reply_to_user": {"reputation": 499, "user_id": 6281636, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/95524308f4f33ad7dac2540300946ba8?s=128&d=identicon&r=PG&f=1", "display_name": "drewpol", "link": "https://stackoverflow.com/users/6281636/drewpol"}, "edited": false, "score": 0, "creation_date": 1490219831, "post_id": 42963363, "comment_id": 73020869, "body": "well, then add <code>#include &quot;settings.h&quot;</code> at the top of myclass.h. This error probably shows up only for myclass.cpp."}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "reply_to_user": {"reputation": 499, "user_id": 6281636, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/95524308f4f33ad7dac2540300946ba8?s=128&d=identicon&r=PG&f=1", "display_name": "drewpol", "link": "https://stackoverflow.com/users/6281636/drewpol"}, "edited": false, "score": 1, "creation_date": 1490219882, "post_id": 42963363, "comment_id": 73020900, "body": "also dont forget about include guards: in settings.h and myclass.h"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 499, "user_id": 6281636, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/95524308f4f33ad7dac2540300946ba8?s=128&d=identicon&r=PG&f=1", "display_name": "drewpol", "link": "https://stackoverflow.com/users/6281636/drewpol"}, "edited": false, "score": 1, "creation_date": 1490220256, "post_id": 42963363, "comment_id": 73021054, "body": "@drewpol And don&#39;t forget to learn some basic C++. Here&#39;s a <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">list of good books</a>."}, {"owner": {"reputation": 499, "user_id": 6281636, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/95524308f4f33ad7dac2540300946ba8?s=128&d=identicon&r=PG&f=1", "display_name": "drewpol", "link": "https://stackoverflow.com/users/6281636/drewpol"}, "edited": false, "score": 0, "creation_date": 1490220257, "post_id": 42963363, "comment_id": 73021055, "body": "Thanks for Your tips. I added include guards. I included also <code>#include &quot;settings.h&quot;</code> in myclass.h. Now in myclass files everythng looks good, but in main file I get error <code>error: &#39;servo1&#39; is not a member of &#39;settings&#39;</code>. I added includes in main file too."}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 0, "creation_date": 1490220595, "post_id": 42963363, "comment_id": 73021184, "body": "sorry for last comment, I have no idea whats wrong now."}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 0, "creation_date": 1490220787, "post_id": 42963363, "comment_id": 73021255, "body": "ok, now its clear to me, servo1 is in settings.cpp, so you have no access to it in main.cpp"}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 1, "creation_date": 1490220857, "post_id": 42963363, "comment_id": 73021281, "body": "you may add <code>namespace settings { extern TServoSettings servo1; }</code> to main.cpp to fix this error. Or maybe to settings.h would be a better place."}], "tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": true, "score": 1, "last_activity_date": 1490219633, "creation_date": 1490219633, "answer_id": 42963363, "question_id": 42963284, "link": "https://stackoverflow.com/questions/42963284/pass-struct-object-from-namespace-as-parameter/42963363#42963363", "title": "Pass struct object from namespace as parameter", "body": "<p>You should qualify your type with namespace name:</p>\n\n<pre><code>CMyclass(settings::TServoSettings * ptr); \n         ^^^^^^^^^^\n</code></pre>\n"}], "owner": {"reputation": 499, "user_id": 6281636, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/95524308f4f33ad7dac2540300946ba8?s=128&d=identicon&r=PG&f=1", "display_name": "drewpol", "link": "https://stackoverflow.com/users/6281636/drewpol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 42963363, "answer_count": 1, "score": -2, "last_activity_date": 1490219633, "creation_date": 1490219291, "question_id": 42963284, "link": "https://stackoverflow.com/questions/42963284/pass-struct-object-from-namespace-as-parameter", "title": "Pass struct object from namespace as parameter", "body": "<p>I have problem with passing struct object from specified namespace as parameter in constructor of class. I have my struct:</p>\n\n<p><strong>settings.h</strong></p>\n\n<pre><code>namespace settings\n{\n    typedef struct\n    {\n        volatile uint8_t ddr;\n        volatile uint8_t port;\n        uint8_t pin1;\n        uint8_t pin2;\n        uint8_t timerChannel;\n        uint8_t showChannel;\n        uint8_t sensePin;\n        uint16_t resistorValue;\n        uint16_t maxCurrent;\n    }TServoSettings;\n}\n</code></pre>\n\n<p><strong>settings.cpp</strong></p>\n\n<pre><code>#include \"settings.h\"\n\nnamespace settings\n{\n     TServoSettings servo1 =\n    {\n            //Here are some values from preprocessor definies\n            SERVO1_DDR,\n            SERVO1_PORT,\n            SERVO1_PIN1,\n            SERVO1_PIN2,\n            SERVO1_TIMER_CHANNEL,\n            SERVO1_SHOW_CHANNEL,\n            SERVO1_SENSE,\n            SERVO1_R,\n            SERVO1_MAXCURR\n    };\n}\n</code></pre>\n\n<p>And then I have my example class:</p>\n\n<p><strong>myclass.h</strong></p>\n\n<pre><code>class CMyclass\n{\npublic:\n    CMyclass(TServoSettings * ptr); //&lt;------HOW CAN I PASS HERE CREATED BEFORE OBJECT OF STRUCTURE FROM   NAMESPACE AS A PARAMETER - POINTER??????\n    ~CMyclass();\n};\n</code></pre>\n\n<p><strong>myclass.cpp</strong></p>\n\n<pre><code>#include \"myclass.h\"\nCMyclass::CMyclass(TServoSettings * ptr) //HOW PASS ??\n{\n    //Do some things with this pointer\n}\n\nCMyclass::CMyclass()\n{\n    //Hothing to do here :(\n}\n</code></pre>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include \"settings.h\"\n#include \"myclass.h\"\n\nint main()\n{\n    CMyclass someobject(&amp;settings::servo1);    //AND HOW PASS HERE ?????\n}\n</code></pre>\n\n<p>I would like to be glad if someone can help me with this.</p>\n"}, {"tags": ["c++", "operator-overloading"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1490219403, "post_id": 42963273, "comment_id": 73020678, "body": "You can read the standard, as well as cppreference.com. Othewise, what is the specific code you&#39;re trying to get working, and what is the error?"}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1490219459, "post_id": 42963273, "comment_id": 73020704, "body": "StackOverflow expects you to state a clear problem you&#39;re facing. To get a general explanation on something, look up the documentation. Otherwise post the actual code that is giving you a hard time."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 2, "creation_date": 1490219506, "post_id": 42963273, "comment_id": 73020723, "body": "Also, they&#39;re called &quot;user-defined literals&quot;, which is perhaps non-obvious. You can find examples <a href=\"http://en.cppreference.com/w/cpp/language/user_literal\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 1, "creation_date": 1490219511, "post_id": 42963273, "comment_id": 73020724, "body": "User defined literals must begin with an underscore, was this your issue? It is also explained on several major sites, including <a href=\"http://en.cppreference.com/w/cpp/language/user_literal\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/user_literal</a> <a href=\"https://msdn.microsoft.com/en-us/library/dn919277.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/dn919277.aspx</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4981832"}, "edited": false, "score": 0, "creation_date": 1490219554, "post_id": 42963273, "comment_id": 73020751, "body": "If you search operator on cppreference.com, operator&quot;&quot; is not anywhere on the site or on the operator page.  The problem I was having was that it always wanted a certain data type as the parameter.  I wanted to look up what they were, but there was nothing."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4981832"}, "edited": false, "score": 0, "creation_date": 1490219596, "post_id": 42963273, "comment_id": 73020771, "body": "Oh!  Thanks AndyG!  I did not know the specific name."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1490219696, "post_id": 42963273, "comment_id": 73020806, "body": "@SamiKuhmonen: But that wouldn&#39;t be reason for it not to compile. I mean, <code>std::chrono::literals</code> don&#39;t use the underscore. It&#39;s just that the ones without underscores are reserved for future use (and you&#39;ll get a warning, but not an error)"}, {"owner": {"reputation": 119, "user_id": 2806536, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/caacd8715a5f30c2d3b52a80b2ce63ce?s=128&d=identicon&r=PG&f=1", "display_name": "LismUK", "link": "https://stackoverflow.com/users/2806536/lismuk"}, "edited": false, "score": 1, "creation_date": 1490219800, "post_id": 42963273, "comment_id": 73020852, "body": "This <a href=\"https://akrzemi1.wordpress.com/2012/08/12/user-defined-literals-part-i/\" rel=\"nofollow noreferrer\">article</a> is pretty good if you have time to read it all. It&#39;ll walk you through user defined literals. :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4981832"}, "edited": false, "score": 0, "creation_date": 1490219915, "post_id": 42963273, "comment_id": 73020915, "body": "Thanks for the article LismUK!"}], "owner": {"user_type": "does_not_exist", "display_name": "user4981832"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1490219263, "creation_date": 1490219263, "question_id": 42963273, "link": "https://stackoverflow.com/questions/42963273/how-to-use-operator", "title": "How to Use operator &quot;&quot;", "body": "<p>I was playing around with some features of C++, and I found that I had to add \"ms\" to the end of a number when sleeping using std::this_thread::sleep_for() in order to show I wanted to sleep for milliseconds.</p>\n\n<pre><code>std::this_thread::sleep_for(100ms); // \"100ms\" becomes 100 milliseconds\n</code></pre>\n\n<p>I then peeked at the definition for this in the chrono.h source code and found this:</p>\n\n<pre><code>inline constexpr chrono::milliseconds operator \"\" ms(unsigned long long _Val)\n{   // return integral milliseconds\n    return (chrono::milliseconds(_Val));\n}\n</code></pre>\n\n<p>There were also overloads for \"s\", \"us\", \"ns\", and more.</p>\n\n<p>I attempted to make my own version of this but ran into a lot of issues.  I naturally looked online for some documentation and no major website (or seemingly any website for that matter) had anything on it.</p>\n\n<p>Could someone answer with the correct format/syntax for using operator \"\"?</p>\n"}, {"tags": ["c++", "sql", "sql-server", "azure"], "answers": [{"comments": [{"owner": {"reputation": 138, "user_id": 2063006, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5f540c7719c7ffbb60bd6eae047d1dcc?s=128&d=identicon&r=PG", "display_name": "Robert Peter Bronstein", "link": "https://stackoverflow.com/users/2063006/robert-peter-bronstein"}, "edited": false, "score": 0, "creation_date": 1490228013, "post_id": 42963387, "comment_id": 73023957, "body": "Well it is crazy as my save with insert sql statement puts it in correctly with sql 2106 database engine but when its saved to sql azure it change it so there is a difference in them.. and sql azure is changing it. and I need an answer to m question on how to fix it."}, {"owner": {"reputation": 62126, "user_id": 5089204, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/xGm6I.jpg?s=128&g=1", "display_name": "Shnugo", "link": "https://stackoverflow.com/users/5089204/shnugo"}, "reply_to_user": {"reputation": 138, "user_id": 2063006, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5f540c7719c7ffbb60bd6eae047d1dcc?s=128&d=identicon&r=PG", "display_name": "Robert Peter Bronstein", "link": "https://stackoverflow.com/users/2063006/robert-peter-bronstein"}, "edited": false, "score": 0, "creation_date": 1490228197, "post_id": 42963387, "comment_id": 73024025, "body": "@RobertPeterBronstein Might be, that your statement is sent within an XML container where all strings <b>must be escaped</b> propely. Once again: I&#39;m pretty sure, that this issue must be solved on the reading side (where the statement is interpreted) rather than on your sending side (where the statement is built)."}, {"owner": {"reputation": 138, "user_id": 2063006, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5f540c7719c7ffbb60bd6eae047d1dcc?s=128&d=identicon&r=PG", "display_name": "Robert Peter Bronstein", "link": "https://stackoverflow.com/users/2063006/robert-peter-bronstein"}, "edited": false, "score": 0, "creation_date": 1490313980, "post_id": 42963387, "comment_id": 73069880, "body": "Thanks it turned out to be in the gridview and not in the database which I am a lot happier about !"}], "tags": [], "owner": {"reputation": 62126, "user_id": 5089204, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/xGm6I.jpg?s=128&g=1", "display_name": "Shnugo", "link": "https://stackoverflow.com/users/5089204/shnugo"}, "is_accepted": false, "score": 0, "last_activity_date": 1490220479, "last_edit_date": 1490220479, "creation_date": 1490219745, "answer_id": 42963387, "question_id": 42963233, "link": "https://stackoverflow.com/questions/42963233/inserting-into-an-sql-azure-database-changes-the-read-into-variable-data-for-a/42963387#42963387", "title": "Inserting into an SQL Azure database changes the read into variable data for a &amp; character to &amp;amp; in the sql field data", "body": "<p>This happens in connection with HTML, XHTML or XML where some characters have a special meaning and therefore must be escaped, or you are using characters, which are not covered by the character encoding your string uses.</p>\n\n<p>You'll <a href=\"https://www.w3schools.com/html/html_entities.asp\" rel=\"nofollow noreferrer\">find a lot of lists like this</a> showing such replacement codes, called <em>entities</em>.</p>\n\n<p>Most usual are <code>&amp;lt;</code>, <code>&amp;gt;</code> and <code>&amp;amp;</code> but there are many more...</p>\n\n<p>In other words: This is not <em>crazy</em>, but a question of <strong>how to read</strong> your data.</p>\n"}, {"tags": [], "owner": {"reputation": 138, "user_id": 2063006, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5f540c7719c7ffbb60bd6eae047d1dcc?s=128&d=identicon&r=PG", "display_name": "Robert Peter Bronstein", "link": "https://stackoverflow.com/users/2063006/robert-peter-bronstein"}, "is_accepted": false, "score": 0, "last_activity_date": 1490229096, "creation_date": 1490229096, "answer_id": 42965119, "question_id": 42963233, "link": "https://stackoverflow.com/questions/42963233/inserting-into-an-sql-azure-database-changes-the-read-into-variable-data-for-a/42965119#42965119", "title": "Inserting into an SQL Azure database changes the read into variable data for a &amp; character to &amp;amp; in the sql field data", "body": "<p>My bad, the data in sql azure is the same as sql in 2016 the problem was with the asp gridview its displaying the &amp; and when that is read it in a session value it contains the &amp; I now need to stop the grid from displaying those characters now. sorry for the wild goose chase.</p>\n"}, {"tags": [], "owner": {"reputation": 138, "user_id": 2063006, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5f540c7719c7ffbb60bd6eae047d1dcc?s=128&d=identicon&r=PG", "display_name": "Robert Peter Bronstein", "link": "https://stackoverflow.com/users/2063006/robert-peter-bronstein"}, "is_accepted": false, "score": 0, "last_activity_date": 1490229556, "creation_date": 1490229556, "answer_id": 42965197, "question_id": 42963233, "link": "https://stackoverflow.com/questions/42963233/inserting-into-an-sql-azure-database-changes-the-read-into-variable-data-for-a/42965197#42965197", "title": "Inserting into an SQL Azure database changes the read into variable data for a &amp; character to &amp;amp; in the sql field data", "body": "<p>It turned out the asp gridview does not display the extra amp; data but when you read it using tankrow.Cells[2].Text; it adds it in while if you use the HttpUtility.HtmlDecode(tankrow.Cells[2].Text); it gets rid of it.</p>\n"}], "owner": {"reputation": 138, "user_id": 2063006, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5f540c7719c7ffbb60bd6eae047d1dcc?s=128&d=identicon&r=PG", "display_name": "Robert Peter Bronstein", "link": "https://stackoverflow.com/users/2063006/robert-peter-bronstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1490229556, "creation_date": 1490219137, "last_edit_date": 1490219371, "question_id": 42963233, "link": "https://stackoverflow.com/questions/42963233/inserting-into-an-sql-azure-database-changes-the-read-into-variable-data-for-a", "title": "Inserting into an SQL Azure database changes the read into variable data for a &amp; character to &amp;amp; in the sql field data", "body": "<p>Hi I have a field data containing a &amp; character ie 1&amp;2 but when that data is read and then inserted into an Azure SQL Database the &amp; symbol is replaced as <code>&amp;amp;</code> so the data is <code>1&amp;amp;2</code>  that's crazy why is Azure doing this and how to prevent it ?</p>\n\n<pre><code>            strcpy(s, \"select ta.Tank_Id, ta.Fish_Id, ta.Date_Assigned, t.Group_Name from Tank_Assignment as ta join Tank as t on t.Tank_Id = ta.Tank_Id join Tank_Group as tg on tg.Group_Name = t.Group_Name where ta.Date_UnAssigned is null\");\n            sprintf(&amp;s[strlen(s)], \" and tg.Site_Name = '%s' ORDER BY ta.Tank_Id\", Site_Name);\n            sql-&gt;exec_direct(s);\n\n            if (!sql-&gt;success() &amp;&amp; sql-&gt;ret != 100) {\n                DisplaySQLError(hW, sql, s);\n            }\n            while (sql-&gt;success() &amp;&amp; sql-&gt;fetch() == MSQL_SUCCESS) {\n                sql-&gt;get_col_str(\"Tank_Id\", sTank_Id);\n                sql-&gt;get_col_str(\"Fish_Id\", sFish_Id);\n                sql-&gt;get_col_str(\"Date_Assigned\", sDate_Assigned);\n                sql-&gt;get_col_str(\"Group_Name\", sGroup_Name);\n\n                strcpy(s, \"insert into sqlazure.ha.dbo.itank\");\n                strcat(s, \" (Tank_Id,Fish_Id,Date_Assigned,Feed,Morts,Moved,Enviro,Weight,Group_Name,User_Id) \");\n                sprintf(&amp;s[strlen(s)], \" VALUES('%s',\", sTank_Id);\n                sprintf(&amp;s[strlen(s)], \" '%s',\", sFish_Id);\n                sprintf(&amp;s[strlen(s)], \" '%s',\", sDate_Assigned);\n                sprintf(&amp;s[strlen(s)], \" '%s',\", \"null\");\n                sprintf(&amp;s[strlen(s)], \" '%s',\", \"null\");\n                sprintf(&amp;s[strlen(s)], \" '%s',\", \"null\");\n                sprintf(&amp;s[strlen(s)], \" '%s',\", \"null\");\n                sprintf(&amp;s[strlen(s)], \" '%s',\", \"null\");\n                sprintf(&amp;s[strlen(s)], \" '%s',\", sGroup_Name);\n                sprintf(&amp;s[strlen(s)], \" '%s')\", _szUsername);\n                sql2-&gt;exec_direct(s);\n\n                if (!sql2-&gt;success() &amp;&amp; sql2-&gt;ret != 100) {\n                    DisplaySQLError(hW, sql, s);\n                }\n\n            }\n            sql-&gt;end_fetch();\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 1771, "user_id": 5644874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AlXxH.jpg?s=128&g=1", "display_name": "Seek Addo", "link": "https://stackoverflow.com/users/5644874/seek-addo"}, "edited": false, "score": 0, "creation_date": 1490218558, "post_id": 42963019, "comment_id": 73020306, "body": "Have you tried this <code>sscanf(ipAddr.c_str(), &quot;%*hu.%hu.%hu.%hu&quot;, &amp;octet2, &amp;octet2, &amp;octet3, &amp;octet4);</code> the * is for ignoring it after reading the value"}, {"owner": {"reputation": 73, "user_id": 7405678, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/baa46420b586e13972797f46a16b23e7?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Luce", "link": "https://stackoverflow.com/users/7405678/joseph-luce"}, "edited": false, "score": 1, "creation_date": 1490218620, "post_id": 42963019, "comment_id": 73020325, "body": "Whats the problem?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1490218657, "post_id": 42963019, "comment_id": 73020343, "body": "problem is <code>&amp;</code> instead of <code>%</code>..."}, {"owner": {"reputation": 73, "user_id": 7405678, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/baa46420b586e13972797f46a16b23e7?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Luce", "link": "https://stackoverflow.com/users/7405678/joseph-luce"}, "edited": false, "score": 0, "creation_date": 1490218697, "post_id": 42963019, "comment_id": 73020366, "body": "Oh typo, fixed it"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1490218809, "post_id": 42963019, "comment_id": 73020418, "body": "besides, I&#39;m not sure of behaviour of that <code>sscanf(ipAddr.c_str(), &quot;%hu.%hu.%hu.%hu&quot;, &amp;octet2, &amp;octet2, &amp;octet3, &amp;octet4);</code>. Which argument is evaluated first in <code>scanf</code> since you&#39;re reusing the same variable. Not sure it&#39;s left to right. Well, maybe."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1490218864, "post_id": 42963019, "comment_id": 73020442, "body": "@Jean-Fran&#231;oisFabre a byte is not an octet on all systems. IP address always consists of octets on all systems, regardless of byte size."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1490218945, "post_id": 42963019, "comment_id": 73020475, "body": "@user2079303 betrayed by too much (or not enough:)) knowledge: &quot;octet&quot; is french for &quot;bytes&quot;! will revert OP edit."}, {"owner": {"reputation": 73, "user_id": 7405678, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/baa46420b586e13972797f46a16b23e7?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Luce", "link": "https://stackoverflow.com/users/7405678/joseph-luce"}, "edited": false, "score": 0, "creation_date": 1490219632, "post_id": 42963019, "comment_id": 73020782, "body": "sscanf goes from left to right"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1490219830, "post_id": 42963019, "comment_id": 73020867, "body": "Have you bench-marked this? Memory bandwidth in a new PC is somewhere in the range 10-20 GB/s, and a million writes of <code>short</code> will be 2 MB. Is this a problem to focus on?"}, {"owner": {"reputation": 73, "user_id": 7405678, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/baa46420b586e13972797f46a16b23e7?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Luce", "link": "https://stackoverflow.com/users/7405678/joseph-luce"}, "edited": false, "score": 0, "creation_date": 1490270202, "post_id": 42963019, "comment_id": 73042545, "body": "Just being nit picky, and I want to understand millisecond improvements more."}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 3, "last_activity_date": 1490218578, "creation_date": 1490218578, "answer_id": 42963094, "question_id": 42963019, "link": "https://stackoverflow.com/questions/42963019/breaking-ip-address-into-octets-but-skip-first-octet-with-sscanf/42963094#42963094", "title": "Breaking IP address into octets but skip first octet with sscanf", "body": "<p>you could scan but not store the first argument by prefixing first format specifier by <code>*</code> to tell <code>sscanf</code> to parse but not store the field (and you only need 3 parameters in that case):</p>\n\n<pre><code>sscanf(ipAddr.c_str(), \"%*hu.%hu.%hu.%hu\", &amp;octet2, &amp;octet3, &amp;octet4);\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 7405678, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/baa46420b586e13972797f46a16b23e7?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Luce", "link": "https://stackoverflow.com/users/7405678/joseph-luce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 42963094, "answer_count": 1, "score": 0, "last_activity_date": 1490218999, "creation_date": 1490218317, "last_edit_date": 1490218999, "question_id": 42963019, "link": "https://stackoverflow.com/questions/42963019/breaking-ip-address-into-octets-but-skip-first-octet-with-sscanf", "title": "Breaking IP address into octets but skip first octet with sscanf", "body": "<pre><code>unsigned short octet2, octet3, octet4;\nsscanf(ipAddr.c_str(), \"%hu.%hu.%hu.%hu\", &amp;octet2, &amp;octet2, &amp;octet3, &amp;octet4);\n</code></pre>\n\n<p>ipAddr is a string.</p>\n\n<p>From the above code, it is successfully breaking the octets up. However, I'd like to just avoid touching the first octet of the IP address. I want to avoid extra operations of writing into octet2 twice. </p>\n\n<p>For example, with the IP address 1.2.3.4, I'll break up the IP address into 2, then 3, then 4 without touching 1.</p>\n\n<p>My operations will be done over a million times, unless there is a better method than sscanf please let me know.</p>\n"}, {"tags": ["c++", "c++11", "shared-ptr"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 4, "creation_date": 1490216352, "post_id": 42962515, "comment_id": 73019202, "body": "Probably: <i>&quot;Unlike std::unique_ptr, the deleter of std::shared_ptr is invoked even if the managed pointer is null.&quot;</i> Source: <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr/~shared_ptr\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/memory/shared_ptr/~shared_ptr</a>"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1490216389, "post_id": 42962515, "comment_id": 73019225, "body": "On one hand, putting that branch in <code>shared_ptr</code> means people would pay extra for it when using the default <code>delete ptr;</code>. On the other, this is probably overshadowed by the reference counting."}, {"owner": {"reputation": 1940, "user_id": 2523211, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/wDa5B.jpg?s=128&g=1", "display_name": "ZivS", "link": "https://stackoverflow.com/users/2523211/zivs"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1490217036, "post_id": 42962515, "comment_id": 73019581, "body": "@RichardCritten, OK, but how can this occur?"}, {"owner": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "edited": false, "score": 0, "creation_date": 1490217421, "post_id": 42962515, "comment_id": 73019765, "body": "it can occur if your <code>CreateMyClass()</code> returns a nullptr. Then shared_ptr dtor will call custom deleter and your check will make sense."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1490219038, "post_id": 42962515, "comment_id": 73020512, "body": "Irrelevant side-note: What little overhead that test involves would likely be made up for by using <code>std::make_shared</code> instead of the plain <code>std::shared_ptr</code> constructor (<code>std::make_shared</code> allocates both <code>shared_ptr</code> management structure and stored object as a single memory block, which the plain constructor can&#39;t do; reduces memory fragmentation and allocator overhead)."}, {"owner": {"reputation": 1940, "user_id": 2523211, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/wDa5B.jpg?s=128&g=1", "display_name": "ZivS", "link": "https://stackoverflow.com/users/2523211/zivs"}, "edited": false, "score": 4, "creation_date": 1490219535, "post_id": 42962515, "comment_id": 73020739, "body": "Except that make_shared can&#39;t take a custom creator/deleter"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1490219787, "post_id": 42962515, "comment_id": 73020846, "body": "@ZivS: Oops, my bad. I guess that&#39;s what <code>std::allocate_shared</code> is for, though writing the allocator instead of just a deleter is a lot more work. Blech."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1490222628, "post_id": 42962515, "comment_id": 73022102, "body": "@ZivS Make shared cannot, but the thing you create <i>can</i> take a custom creator, then an aliasing constructor can switch back to the type you want to expose.  ;)"}], "answers": [{"comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1490220487, "post_id": 42962962, "comment_id": 73021148, "body": "I disagree. It doesn&#39;t matter if the pointer is <code>nullptr</code> or not. Delete has no effect on a <code>nullptr</code>. See Richard Hodges&#39; answer."}, {"owner": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1490221539, "post_id": 42962962, "comment_id": 73021583, "body": "@AndyG delete does not have effect on nullptr, but dereferencing holded pointer with accessing to its member (-&gt;close() in example) in custom deleter does. That&#39;s why custom deleter usually need, it does some work that delete cannot."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1490221933, "post_id": 42962962, "comment_id": 73021770, "body": "Ah, I glanced back at the example, and you&#39;re right. It&#39;s definitely doing something with the pointer before a call to <code>delete</code>. I retract my earlier statement."}], "tags": [], "owner": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "is_accepted": false, "score": 7, "last_activity_date": 1490251797, "last_edit_date": 1495541853, "creation_date": 1490218036, "answer_id": 42962962, "question_id": 42962515, "link": "https://stackoverflow.com/questions/42962515/does-it-make-sense-to-check-for-nullptr-in-custom-deleter-of-shared-ptr/42962962#42962962", "title": "Does it make sense to check for nullptr in custom deleter of shared_ptr?", "body": "<p>Yes, it makes sense actually. Suppose <code>CreateMyClass</code> returns <code>nullptr</code>. Reference count of <code>pMyClass</code> (<code>use_count</code>) becomes <code>1</code>. When <code>pMyClass</code> will be destroyed, <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr/~shared_ptr\" rel=\"nofollow noreferrer\">following will happens</a>:</p>\n\n<blockquote>\n  <p>If <code>*this</code> owns an object and it is the last <code>shared_ptr</code> owning it, the\n  object is destroyed through the owned deleter.</p>\n</blockquote>\n\n<p>So if custom deleter dereferencing a pointer that holded by shared_ptr (<code>ptr-&gt;close()</code> in your code) then it should take care of nullptr checking.</p>\n\n<p>Notice that <a href=\"https://stackoverflow.com/questions/25920681/what-is-the-difference-between-an-empty-and-a-null-stdshared-ptr-in-c\"><em>empty shared_ptr</em> is not the same as <em>null shared_ptr</em></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 9, "last_activity_date": 1490220378, "creation_date": 1490220378, "answer_id": 42963542, "question_id": 42962515, "link": "https://stackoverflow.com/questions/42962515/does-it-make-sense-to-check-for-nullptr-in-custom-deleter-of-shared-ptr/42963542#42963542", "title": "Does it make sense to check for nullptr in custom deleter of shared_ptr?", "body": "<p>The constructor <code>std::shared_ptr&lt;T&gt;::shared_ptr(Y*p)</code> has the requirement that <code>delete p</code> is a valid operation. This is a valid operation when <code>p</code> equals <code>nullptr</code>.</p>\n\n<p>The constructor <code>std::shared_ptr&lt;T&gt;::shared_ptr(Y*p, Del del)</code> has the requirement that <code>del(p)</code> is a valid operation.</p>\n\n<p>If your custom deleter cannot handle <code>p</code> being equal to <code>nullptr</code> then it is not valid to pass a null <code>p</code> in the constructor of <code>shared_ptr</code>.</p>\n\n<p>The constructor you offer as an example can be better presented, thus:</p>\n\n<pre><code>#include &lt;memory&gt;\n\nstruct MyClass {\n    void open() {\n        // note - may throw\n    };\n\n    void close() noexcept {\n        // pre - is open\n    }\n};\n\nstruct Closer\n{\n    void operator()(MyClass* p) const noexcept\n    {\n        p-&gt;close();\n        delete p;  // or return to pool, etc\n    }\n};\n\nauto CreateMyClass() -&gt; std::unique_ptr&lt;MyClass, Closer&gt;\n{\n    // first construct with normal deleter\n    auto p1 = std::make_unique&lt;MyClass&gt;();\n\n    // in case this throws an exception.\n    p1-&gt;open();\n\n    // now it's open, we need a more comprehensive deleter\n    auto p = std::unique_ptr&lt;MyClass, Closer&gt; { p1.release(), Closer() };\n    return p;\n}\n\nint main()\n{\n    auto sp = std::shared_ptr&lt;MyClass&gt;(CreateMyClass());\n}\n</code></pre>\n\n<p>Note that it is now not possible for the shared_ptr to own a null object.</p>\n"}, {"comments": [{"owner": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "edited": false, "score": 0, "creation_date": 1490223375, "post_id": 42963664, "comment_id": 73022397, "body": "Can you clear the state <code>unique_ptr can be implicitly converted to a unique_ptr</code>? Or did you mean <code>to shared_ptr</code>?"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 2, "last_activity_date": 1490223975, "last_edit_date": 1490223975, "creation_date": 1490220928, "answer_id": 42963664, "question_id": 42962515, "link": "https://stackoverflow.com/questions/42962515/does-it-make-sense-to-check-for-nullptr-in-custom-deleter-of-shared-ptr/42963664#42963664", "title": "Does it make sense to check for nullptr in custom deleter of shared_ptr?", "body": "<pre><code>struct deleter {\n  template&lt;class T&gt;\n  void operator()(T*) const {\n    std::cout &lt;&lt; \"deleter run\\n\";\n  }\n};\n\nint main() {\n  std::shared_ptr&lt;int&gt; bob((int*)0, deleter{});\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/ad0c4cfce8663496\" rel=\"nofollow noreferrer\">Live example</a>.</p>\n\n<p>This prints <code>\"deleter run\\n\"</code>.  The deleter is indeed run.</p>\n\n<p>The concept of <em>empty</em> and the concept of <em>owning a nullptr</em> are distinct concepts for <code>shared_ptr</code>.</p>\n\n<p><code>bob</code> is non-<em>empty</em>, yet <code>bob.get()==nullptr</code>.  When non-<em>empty</em>, the destructor is called.</p>\n\n<pre><code>int main() {\n  int x;\n  std::shared_ptr&lt;int&gt; alice( std::shared_ptr&lt;int&gt;{}, &amp;x );\n}\n</code></pre>\n\n<p><code>alice</code> is <em>empty</em>, yet <code>alice.get() != nullptr</code>.  When <code>alice</code> goes out of scope, <code>delete &amp;x</code> is <em>not</em> run (and in fact no destructor is run).</p>\n\n<p>This can only be avoided if you never construct your shared pointer with a null pointer and a deleter.</p>\n\n<p>One way to approach this is to first create a unique pointer with a custom deleter.</p>\n\n<pre><code>template&lt;class Deleter, class T&gt;\nstd::unique_ptr&lt;T, Deleter&gt; change_deleter( std::unique_ptr&lt;T&gt; up, Deleter&amp;&amp; deleter={} ) {\n  return {up.release(), std::forward&lt;Deleter&gt;(deleter)};\n}\n\nstruct close_and_delete_foo; // closes and deletes a foo\n\nstd::unique_ptr&lt;foo, close_and_delete_foo&gt; make_foo() {\n  auto foo = std::make_unique&lt;foo&gt;();\n  if (!foo-&gt;open()) return {};\n  return change_deleter&lt;close_and_delete_foo&gt;(std::move(foo));\n}\n</code></pre>\n\n<p>Unlike <code>shared_ptr</code>, <code>unique_ptr</code> cannot hold <code>nullptr</code> yet be \"non-empty\" (the standard doesn't use the term <em>empty</em> for <code>unique_ptr</code>, instead it talks about <code>.get()==nullptr</code>).</p>\n\n<p><code>unique_ptr</code> can be implicitly converted to a <code>shared_ptr</code>.  If it has <code>nullptr</code>, the resulting <code>shared_ptr</code> is <em>empty</em>, not just holding <code>nullptr</code>.  The destroyer of the <code>unique_ptr</code> is carried over to the <code>shared_ptr</code>.</p>\n\n<hr>\n\n<p>The downside to all of these techniques is that the <code>shared_ptr</code> reference counting memory block is a separate allocation to the object's memory block.  Two allocations is worse than one.</p>\n\n<p>But the <code>make_shared</code> constructor doesn't let you pass in a custom deleter.</p>\n\n<p>If destroying your object cannot throw, you can use the aliasing constructor to be extremely careful:</p>\n\n<pre><code>// empty base optimization enabled:\ntemplate&lt;class T, class D&gt;\nstruct special_destroyed:D {\n  std::optional&lt;T&gt; t;\n  template&lt;class...Ds&gt;\n  special_destroyed(\n    Ds&amp;&amp;...ds\n  ):\n    D(std::forward&lt;Ds&gt;(ds)...)\n  {}\n  ~special_destroyed() {\n     if (t)\n       (*this)(std::addressof(*t));\n  }\n};\nstd::shared_ptr&lt;MyClass&gt; make_myclass() {\n  auto r = std::make_shared&lt; special_destroyed&lt;MyClass, CloseMyClass&gt; &gt;();\n  r-&gt;t.emplace();\n  try {\n    if (!r-&gt;t-&gt;open())\n      return {};\n  } catch(...) {\n    r-&gt;t = std::nullopt;\n    throw;\n  }\n  return {r, std::addressof(*r.t)};\n}\n</code></pre>\n\n<p>Here we manage to use one block for destroyer and reference counting, while permitting a possibly failing <code>open</code> operation, and automatically <code>closing</code> only when the data is actually there.</p>\n\n<p>Note that the destroyer should <em>only</em> close the <code>MyClass</code>, not delete it; deleting is handled by an outer destroyer in the <code>make_shared</code> wrapping the <code>special_destroyed</code>.</p>\n\n<p>This uses C++17 for <code>std::optional</code>, but alternative <code>optional</code>s are available from <code>boost</code> and elsewhere.</p>\n\n<hr>\n\n<p>A raw C++14 solution.  We create a crude <code>optional</code>:</p>\n\n<pre><code>template&lt;class T, class D&gt;\nstruct special_delete:D {\n  using storage = typename std::aligned_storage&lt;sizeof(T), alignof(T)&gt;::type;\n  storage data;\n  bool b_created = false;\n  template&lt;class...Ts&gt;\n  void emplace(Ts&amp;&amp;...ts) {\n    ::new( (void*)&amp;data ) T(std::forward&lt;Ts&gt;(ts)...);\n    b_created=true;\n  }\n  template&lt;std::size_t...Is, class Tuple&gt;\n  void emplace_from_tuple( std::index_sequence&lt;Is...&gt;, Tuple&amp;&amp;tup ) {\n    return emplace( std::get&lt;Is&gt;(std::forward&lt;Tuple&gt;(tup))... );\n  }\n  T* get() {\n    if (b_created)\n      return reinterpret_cast&lt;T*&gt;(&amp;data);\n    else\n      return nullptr;\n  }\n  template&lt;class...Ds&gt;\n  special_delete(Ds&amp;&amp;...ds):D(std::forward&lt;Ds&gt;(ds)...){}\n  ~special_delete() {\n    if (b_created)\n    {\n      (*this)( get() );\n      get()-&gt;~T();\n    }\n  }\n};\nstruct do_nothing {\n  template&lt;class...Ts&gt;\n  void operator()(Ts&amp;&amp;...)const{}\n};\n\ntemplate&lt;class T, class D, class F=do_nothing, class Tuple=std::tuple&lt;&gt;, class...Ds&gt;\nstd::shared_ptr&lt;T&gt; make_special_delete(\n  F&amp;&amp; f={},\n  Tuple&amp;&amp; args=std::tuple&lt;&gt;(),\n  Ds&amp;&amp;...ds\n) {\n  auto r = std::make_shared&lt;special_delete&lt;T,D&gt;&gt;(std::forward&lt;Ds&gt;(ds)...);\n  r-&gt;emplace_from_tuple(\n    std::make_index_sequence&lt;\n      std::tuple_size&lt;std::remove_reference_t&lt;Tuple&gt;&gt;::value\n    &gt;{},\n    std::move(args)\n  );\n  try {\n    f(*r-&gt;get());\n  } catch(...) {\n    r-&gt;b_created = false;\n    r-&gt;get()-&gt;~T();\n    throw;\n  }\n  return {r, r-&gt;get()};\n}\n</code></pre>\n\n<p>This is probably going too far.  Luckily our extremely limited <code>optional</code> can be written easier than a real <code>optional</code>, but I'm not certain I did it all right.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/2129c72b0c267943\" rel=\"nofollow noreferrer\">Live example</a>.</p>\n\n<p>The C++11 version requires manually writing <code>make_index_sequence</code> etc.</p>\n"}], "owner": {"reputation": 1940, "user_id": 2523211, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/wDa5B.jpg?s=128&g=1", "display_name": "ZivS", "link": "https://stackoverflow.com/users/2523211/zivs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2443, "favorite_count": 4, "accepted_answer_id": 42963542, "answer_count": 3, "score": 15, "last_activity_date": 1490251797, "creation_date": 1490216210, "question_id": 42962515, "link": "https://stackoverflow.com/questions/42962515/does-it-make-sense-to-check-for-nullptr-in-custom-deleter-of-shared-ptr", "title": "Does it make sense to check for nullptr in custom deleter of shared_ptr?", "body": "<p>I've seen some code that uses <code>std::shared_ptr</code> with a custom deleter that test the argument for nullptr, for example, <code>MyClass</code> which has a <code>close()</code> method and is constructed with some <code>CreateMyClass</code>:</p>\n\n<pre><code>auto pMyClass = std::shared_ptr&lt;MyClass&gt;(CreateMyClass(), \n                                        [](MyClass* ptr)\n                                        { \n                                            if(ptr) \n                                                ptr-&gt;close(); \n                                        });\n</code></pre>\n\n<p>Does it make sense to test <code>ptr</code> for null-ness in the deleter? \nCan this happen? how?</p>\n"}, {"tags": ["c++", "linux", "sockets", "select", "epoll"], "answers": [{"comments": [{"owner": {"reputation": 308, "user_id": 1566841, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5308502c20cff2f0f9a7b589aa8909d9?s=128&d=identicon&r=PG", "display_name": "Alemarius Nexus", "link": "https://stackoverflow.com/users/1566841/alemarius-nexus"}, "edited": false, "score": 0, "creation_date": 1490217639, "post_id": 42962682, "comment_id": 73019861, "body": "The server is already meant to be run as multiple instances, and clients choose one of the available servers either randomly, or based on load. Adding another layer of multiplexing might be possible, but would require bigger changes to the code, so I don&#39;t want to go with that approach for now. dup2 sounds promising. Now I only have to find out how to ensure that the <code>newfd</code> passed to <code>dup2</code> is not already used somewhere else because I don&#39;t want <code>dup2</code> to be closing random fds."}, {"owner": {"reputation": 308, "user_id": 1566841, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5308502c20cff2f0f9a7b589aa8909d9?s=128&d=identicon&r=PG", "display_name": "Alemarius Nexus", "link": "https://stackoverflow.com/users/1566841/alemarius-nexus"}, "edited": false, "score": 0, "creation_date": 1490218064, "post_id": 42962682, "comment_id": 73020067, "body": "&quot;the number of connections you&#39;re trying to handle is just too large to do from a single process&quot;. Is that really so? They are idle most of the time and when something is transferred, it is actually the same data to all of them (or a group of them). I guess TCP retransmissions might become a problem for that many clients (I have mostly tested with server and clients on the same physical machine, with clients running in different VMs), but if the server takes a few seconds to answer all the requests most of the time, that is fast enough for my use-case."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 308, "user_id": 1566841, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5308502c20cff2f0f9a7b589aa8909d9?s=128&d=identicon&r=PG", "display_name": "Alemarius Nexus", "link": "https://stackoverflow.com/users/1566841/alemarius-nexus"}, "edited": false, "score": 0, "creation_date": 1490219560, "post_id": 42962682, "comment_id": 73020753, "body": "@AlemariusNexus At startup, open as many file descriptors as your configured limit (by opening <code>&#47;dev&#47;null</code>, perhaps). Close the ones below 1,024. You now have a pool of file descriptors to <code>dup2</code> onto. Instead of closing file descriptors when you&#39;re done with them, <code>dup2</code> one of your spare file descriptors onto them."}, {"owner": {"reputation": 308, "user_id": 1566841, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5308502c20cff2f0f9a7b589aa8909d9?s=128&d=identicon&r=PG", "display_name": "Alemarius Nexus", "link": "https://stackoverflow.com/users/1566841/alemarius-nexus"}, "edited": false, "score": 1, "creation_date": 1490219984, "post_id": 42962682, "comment_id": 73020954, "body": "Good idea, that would work. But I just found out about the <code>F_DUPFD</code> flag to <code>fcntl</code>, which seems to do basically the same as <code>dup2</code>, but with a minimum fd number instead of a fixed one, so it selects a valid one automatically."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 1, "last_activity_date": 1490216883, "creation_date": 1490216883, "answer_id": 42962682, "question_id": 42962495, "link": "https://stackoverflow.com/questions/42962495/external-code-using-select-with-large-numbers-of-file-descriptors/42962682#42962682", "title": "External code using select() with large numbers of file descriptors", "body": "<p>I would suggest moving these things into their own process so that they get their own file descriptors. What I would suggest is that you have a protocol that multiplexes a large number of TCP connections over a single TCP connection. Your server would talk to the multiplexers rather than the individual clients. A multiplexer could run on the same machine or different machines, it could handle tens of thousands of client connections and would make only a single connection to the server.</p>\n\n<p>One big advantage of this is that your server machine doesn't have to deal with the large number of TCP connection states. It won't have to deal with Internet junk like dropped packets, retransmissions, duplicate packets, rogue SYNs, slow links, and so on. It won't have to have send buffer for each client but will only have to talk to the fast, clean multiplexers who can do the buffering for clients.</p>\n\n<p>If this is too much work or for some reason impossible, you can use <code>dup2</code> to renumber the file descriptors into higher-numbered descriptors. I strongly suggest using multiplexers though -- the number of connections you're trying to handle is just too large to do from a single process.</p>\n"}], "owner": {"reputation": 308, "user_id": 1566841, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5308502c20cff2f0f9a7b589aa8909d9?s=128&d=identicon&r=PG", "display_name": "Alemarius Nexus", "link": "https://stackoverflow.com/users/1566841/alemarius-nexus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 1, "accepted_answer_id": 42962682, "answer_count": 1, "score": 1, "last_activity_date": 1490216883, "creation_date": 1490216132, "last_edit_date": 1490216583, "question_id": 42962495, "link": "https://stackoverflow.com/questions/42962495/external-code-using-select-with-large-numbers-of-file-descriptors", "title": "External code using select() with large numbers of file descriptors", "body": "<p>I have a server program written in C++ that runs on Linux and implements a push-based messaging service using TCP. Because of the push approach, there might be a lot of simultaneous connections (I'm planning on about 1 million) that have to be kept open for longer amounts of time. Most of the time these connections are idle with the occasional heartbeat, and transfer usually happens in bursts on many of them at the same time.</p>\n\n<p>To make things work, I'm using <code>epoll</code> for multiplexing the large amounts of sockets, and by modifying the <code>RLIMIT_NOFILE</code>, it does actually work quite well for large amounts of sockets.</p>\n\n<p>My problem is that I'm also using other types of connections in the same program, most notably FastCGI (using libfcgi from the FastCGI SDK) for accepting HTTP requests, which use <code>select()</code> for their internal file descriptors. This leads to problems when those file descriptors become larger than 1024 (<code>FD_SETSIZE</code>), which is bound to happen if the <code>epoll</code> part of the program uses up most of the fd numbers below 1024.</p>\n\n<p>I'm wondering what the best way to handle this would be.</p>\n\n<p>Do I just have to modify all external code that uses <code>select()</code> and use <code>poll()</code> instead?</p>\n\n<p>Is there maybe a way to force my <code>epoll</code>-based code (specifically the <code>accept()</code> call) to use only file descriptors above 1024, so that the ones below are reserved for <code>select()</code>-based code?</p>\n\n<p>I understand that it might be possible somehow to increase the value of <code>FD_SETSIZE</code>, but I assume that would hurt performance a lot because of the way <code>select()</code> works, and it strikes me as a hack rather than a real solution.</p>\n"}, {"tags": ["c++", "multiple-inheritance"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 4, "creation_date": 1490216259, "post_id": 42962464, "comment_id": 73019150, "body": "Are you opposed to using <code>DerOne::doSomething(); DerTwo::doSomething();</code>?"}, {"owner": {"reputation": 1074, "user_id": 3560202, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/091b39f1456adeef5a255321f850e27a?s=128&d=identicon&r=PG&f=1", "display_name": "Post Self", "link": "https://stackoverflow.com/users/3560202/post-self"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1490216532, "post_id": 42962464, "comment_id": 73019312, "body": "I mean it adds many lines of code and that function might be called multiple times where always <code>thatSomething</code> of each parent will be called. I could define <code>doSomething</code> in <code>Joined</code>, but that&#39;s just quite wet code. I&#39;d like to automate it"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1490216575, "post_id": 42962464, "comment_id": 73019333, "body": "You can find the reason for this behavior in the reference for <a href=\"http://en.cppreference.com/w/cpp/language/unqualified_lookup\" rel=\"nofollow noreferrer\">unqualified lookup</a> - and it&#39;s not possible to have one function &quot;automagically&quot; call two - a function call has to be unambiguous"}, {"owner": {"reputation": 1074, "user_id": 3560202, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/091b39f1456adeef5a255321f850e27a?s=128&d=identicon&r=PG&f=1", "display_name": "Post Self", "link": "https://stackoverflow.com/users/3560202/post-self"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1490216814, "post_id": 42962464, "comment_id": 73019469, "body": "@UnholySheep Is it possible to make a preprocessor script that finds out which classes a particular class derived from in order to call the corresponding functions?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1490216822, "post_id": 42962464, "comment_id": 73019477, "body": "I got error for ambiguous call <a href=\"http://coliru.stacked-crooked.com/a/f96e0eae414e271d\" rel=\"nofollow noreferrer\">Here</a> as I expect."}, {"owner": {"reputation": 1074, "user_id": 3560202, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/091b39f1456adeef5a255321f850e27a?s=128&d=identicon&r=PG&f=1", "display_name": "Post Self", "link": "https://stackoverflow.com/users/3560202/post-self"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1490216894, "post_id": 42962464, "comment_id": 73019512, "body": "@Jarod42 Yes, but is it possible to have short syntax without that error?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1490217377, "post_id": 42962464, "comment_id": 73019752, "body": "C++ does not behave the way you want it to. Either use the C++ way to get the behaviour you want (explicitly call the two base class functions) or use a different language that behaves like you want."}, {"owner": {"reputation": 1074, "user_id": 3560202, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/091b39f1456adeef5a255321f850e27a?s=128&d=identicon&r=PG&f=1", "display_name": "Post Self", "link": "https://stackoverflow.com/users/3560202/post-self"}, "edited": false, "score": 0, "creation_date": 1490217807, "post_id": 42962464, "comment_id": 73019953, "body": "And can you implicitly inherit the constructor? That would also solve my problem"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1490221876, "post_id": 42962464, "comment_id": 73021743, "body": "C++ is a general purpose language, but the concept of inheritance may not be the best fit. I posted a composition answer."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1490222322, "post_id": 42962464, "comment_id": 73021953, "body": "I think you might also have a diamond problem in your multiple inheritance."}, {"owner": {"reputation": 1074, "user_id": 3560202, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/091b39f1456adeef5a255321f850e27a?s=128&d=identicon&r=PG&f=1", "display_name": "Post Self", "link": "https://stackoverflow.com/users/3560202/post-self"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1490224780, "post_id": 42962464, "comment_id": 73022967, "body": "@KennyOstrom Yeah, that&#39;s what I thought about too"}], "answers": [{"comments": [{"owner": {"reputation": 1074, "user_id": 3560202, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/091b39f1456adeef5a255321f850e27a?s=128&d=identicon&r=PG&f=1", "display_name": "Post Self", "link": "https://stackoverflow.com/users/3560202/post-self"}, "edited": false, "score": 0, "creation_date": 1490225018, "post_id": 42963813, "comment_id": 73023053, "body": "Isn&#39;t <code>std::vector</code> pretty much always a better choice over <code>std::list</code>?"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "reply_to_user": {"reputation": 1074, "user_id": 3560202, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/091b39f1456adeef5a255321f850e27a?s=128&d=identicon&r=PG&f=1", "display_name": "Post Self", "link": "https://stackoverflow.com/users/3560202/post-self"}, "edited": false, "score": 1, "creation_date": 1490276479, "post_id": 42963813, "comment_id": 73047415, "body": "Well, often -- yes, pretty much always -- no. But in this case I&#39;d think vector would be good. No deletes, and the smart pointers are small objects. The important thing is having a container."}], "tags": [], "owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "is_accepted": true, "score": 1, "last_activity_date": 1490222225, "last_edit_date": 1490222225, "creation_date": 1490221641, "answer_id": 42963813, "question_id": 42962464, "link": "https://stackoverflow.com/questions/42962464/how-to-call-same-name-virtual-functions-of-parents/42963813#42963813", "title": "How to call same name virtual functions of parents", "body": "<p>The quick fix is simply to have Joined call both, explicitly. \n(edited to override the virtual function)</p>\n\n<pre><code>virtual void Joined::thatSomething() override\n{\n    DerOne::thatSomething();\n    DerTwo::thatSomething();\n}\n</code></pre>\n\n<p>If that doesn't take care of everthing, then maybe inheritance isn't a good fit.  Composition used to be used a lot more, before all the OOP, and it is still powerful.</p>\n\n<p>If you're expecting a specific thing to happen when you call thatSomething(), but you don't know which one to call, then maybe it's simply not true that Joined is-a DerOne and is-a DerTwo. But it's much easier for Joined to have-a DerOne, and have-a DerTwo, and as many more as you want.</p>\n\n<pre><code>#include &lt;list&gt;\n#include &lt;memory&gt;\nstruct DerHandler\n{\n    std::list&lt;std::unique_ptr&lt;DerBase&gt;&gt; handlers;\n\n    void addHandler(DerBase *p) { \n        handlers.push_back(std::unique_ptr&lt;DerBase&gt;(p)); \n    }\n\n    void doSomething() { \n        for (std::unique_ptr&lt;DerBase&gt; &amp;rp : handlers)\n            rp-&gt;thatSomething();\n    }\n};\n\nstruct Joined : DerHandler {\n    Joined(){\n        addHandler(new DerOne);\n        addHandler(new DerTwo);\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 1074, "user_id": 3560202, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/091b39f1456adeef5a255321f850e27a?s=128&d=identicon&r=PG&f=1", "display_name": "Post Self", "link": "https://stackoverflow.com/users/3560202/post-self"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 42963813, "answer_count": 1, "score": 0, "last_activity_date": 1490222225, "creation_date": 1490216023, "question_id": 42962464, "link": "https://stackoverflow.com/questions/42962464/how-to-call-same-name-virtual-functions-of-parents", "title": "How to call same name virtual functions of parents", "body": "<pre><code>#include &lt;stdio.h&gt;  \n\nstruct Base\n{\n    virtual void thatSomething() = 0;\n    void doSomething() {thatSomething(); }\n};\n\nstruct DerOne : Base\n{\n    virtual void thatSomething() override {std::puts(\"DerOne\"); }\n};\n\nstruct DerTwo : Base\n{\n    virtual void thatSomething() override {std::puts(\"DerTwo\"); }\n};\n\nstruct Joined : DerOne, DerTwo\n{\n    Joined()\n    {\n        Base::doSomething();\n    }\n};\n\nint main()\n{\n    Joined j;\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>DerOne</p>\n</blockquote>\n\n<p>Why is only <code>thatSomething</code> of <code>DerOne</code> called? I expect it to be called of both parent classes of <code>Joined</code>.</p>\n\n<p>@hvd mentioned that with multiple inheritance I have multiple instances of <code>Base</code>.</p>\n\n<p>Also worth mentioning: When I flip the inheritance of <code>Joined</code> (<code>struct Joined : DerTwo, DerOne</code>), I get </p>\n\n<blockquote>\n  <p>DerTwo</p>\n</blockquote>\n\n<p>as output instead.</p>\n\n<p><strong>Only doing <code>doSomething()</code></strong> in the <code>Joined</code> constructor will give me an error for ambiguity of the function call.</p>\n\n<p>When I use <strong>virtual inheritance</strong>, I again get an ambiguity error.</p>\n\n<p>If it is not possible to <strong>call both functions</strong> this way, what other options do I have in order to achieve that with only one line of code that does not address the intermediate classes in the hierarchy or even no line of code implicitly?</p>\n"}, {"tags": ["c++", "machine-learning", "neural-network", "deep-learning"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1490219454, "post_id": 42962386, "comment_id": 73020698, "body": "Groovy. So the crux of the problem is 0,0 is always 0. Can&#39;t see any way it can&#39;t be zero. <code>0*input1wt + 0*input2wt</code> is going to be 0. <code>0 &#47; sqrt(1 + pow(0, 2))</code> also 0."}, {"owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 0, "creation_date": 1490220664, "post_id": 42962386, "comment_id": 73021205, "body": "In the <code>Train</code> function, <code>Neuron</code> objects are being passed by value, so you just end up training a temporary copy of each neuron.  You probably want to pass them by reference (<code>bool Train(Neuron &amp;n1,..</code>) so that any changes made will stay with the original objects."}, {"owner": {"reputation": 1, "user_id": 3572567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f838068ab5b7522ed749cad900dcc842?s=128&d=identicon&r=PG&f=1", "display_name": "thisisaname", "link": "https://stackoverflow.com/users/3572567/thisisaname"}, "reply_to_user": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 0, "creation_date": 1490238710, "post_id": 42962386, "comment_id": 73026903, "body": "@ChristopherOicles I tried that, but It didnt fix it"}, {"owner": {"reputation": 90304, "user_id": 562769, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e86681e49622d52817b36fd2a4c936b7?s=128&d=identicon&r=PG", "display_name": "Martin Thoma", "link": "https://stackoverflow.com/users/562769/martin-thoma"}, "edited": false, "score": 0, "creation_date": 1490252968, "post_id": 42962386, "comment_id": 73031540, "body": "I guess you have two binary inputs and the output is the logical OR? &quot;Training kind of works, but not very well.&quot; - what does that mean?"}, {"owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 0, "creation_date": 1490279181, "post_id": 42962386, "comment_id": 73049662, "body": "In any case, you must use references for the code to function.  One other thing I notice here is that in your backprop step, you are updating weights with the entire calculated error.  Usually, weight updates are reduced to a fraction of the error, determined by a learning rate.   Without this, smooth gradient descent does not happen, each epoch updates all weights too coarsely, to some poorly-performing local optimum."}, {"owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 0, "creation_date": 1490279185, "post_id": 42962386, "comment_id": 73049667, "body": "So I would suggest you select a constant, small learning rate, like 0.1, then wherever you update a weight, multiply the change by this.  Like <code>n1.input1wt += (deltaHiddenSum[0]) * learning_rate;</code>"}, {"owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 0, "creation_date": 1490279685, "post_id": 42962386, "comment_id": 73050034, "body": "Also, weights should be able to take on negative values, but your initialization code only produces positive initial weights -- you should fix this.  Also during weight initialization, the magnitudes seem too large to me, ranging between 0 and just under 1.0.  This might be ok, but I would choose smaller magnitudes, like under 0.2 (with negative values, -0.2 to 0.2).  Better yet, forget about the crappy CRT <code>rand()</code> API and use the <code>&lt;random&gt;</code> library, perhaps using <code>std::normal_distribution</code>."}], "owner": {"reputation": 1, "user_id": 3572567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f838068ab5b7522ed749cad900dcc842?s=128&d=identicon&r=PG&f=1", "display_name": "thisisaname", "link": "https://stackoverflow.com/users/3572567/thisisaname"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490217696, "creation_date": 1490215713, "last_edit_date": 1490217696, "question_id": 42962386, "link": "https://stackoverflow.com/questions/42962386/neural-network-giving-incorrect-answers", "title": "Neural Network giving incorrect answers?", "body": "<p>This is a neural network based off of this article: <a href=\"https://stevenmiller888.github.io/mind-how-to-build-a-neural-network/\" rel=\"nofollow noreferrer\">https://stevenmiller888.github.io/mind-how-to-build-a-neural-network/</a></p>\n\n<p>I tried to follow everything as well as possible, but it doesn't work. Training kind of works, but not very well. Also, any time I enter 0, 0, no matter how I trained it, it responds with 0.\nHeres the inputs:<br>\n0,0  0<br>\n1,0  1<br>\n0,1  1<br>\n1,1  1  </p>\n\n<p>Heres the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;time.h&gt;\n\nusing namespace std;\n\ndouble Sigmoid(double y)\n{\n    return y / sqrt(1 + pow(y, 2));\n}\n\nclass Neuron\n{\npublic:\n    double output;\n    double input1wt;\ndouble input2wt;\ndouble input1;\ndouble input2;\n\ndouble outputwt;\nvoid Init()\n{\n    //  srand(time(NULL));\n    input1wt = rand() / (RAND_MAX + 1.);\n    input2wt = rand() / (RAND_MAX + 1.);\n    outputwt = rand() / (RAND_MAX + 1.);\n}\ndouble Solve()\n{\n    if (input1 != -1 &amp;&amp; input2 != -1)\n    {\n        return Sigmoid(input1*input1wt + input2*input2wt);\n    }\n    else return -1;\n}\n\n};\n\nbool Train(Neuron n1, Neuron n2, Neuron n3, double x, double y, double     targetResult, int iterations)\n{\ndouble deltaOutputSum;\ndouble deltaHiddenSum[3];\nn1.input1 = x;\nn1.input2 = y;\nn2.input1 = x;\nn2.input2 = y;\nn3.input1 = x;\nn3.input2 = y;\nfor (int c = 0; c &lt; iterations; c++)\n{\n    deltaOutputSum = Sigmoid(n1.output * n1.outputwt + n2.output *      n2.outputwt + n3.output * n3.outputwt) * (1 - Sigmoid(n1.output * n1.outputwt + n2.output * n2.outputwt + n3.output * n3.outputwt)) * (targetResult - Sigmoid(n1.output * n1.outputwt + n2.output * n2.outputwt + n3.output * n3.outputwt));\n\n\n    deltaHiddenSum[0] = deltaOutputSum * n1.outputwt * (Sigmoid(n1.input1 * n1.input1wt + n1.input2 * n1.input2wt) * (1 - Sigmoid(n1.input1 * n1.input1wt + n1.input2 * n1.input2wt)));\n    deltaHiddenSum[1] = deltaOutputSum * n2.outputwt * (Sigmoid(n2.input1 * n2.input1wt + n2.input2 * n2.input2wt) * (1 - Sigmoid(n2.input1 * n2.input1wt + n2.input2 * n2.input2wt)));\n    deltaHiddenSum[2] = deltaOutputSum * n3.outputwt * (Sigmoid(n3.input1 * n3.input1wt + n3.input2 * n3.input2wt) * (1 - Sigmoid(n3.input1 * n3.input1wt + n3.input2 * n3.input2wt)));\n\n    n1.outputwt += n1.outputwt * deltaOutputSum;\n    n2.outputwt += n2.outputwt * deltaOutputSum;\n    n3.outputwt += n3.outputwt * deltaOutputSum;\n\n    n1.input1wt += deltaHiddenSum[0];\n    n1.input2wt += deltaHiddenSum[1];\n    n2.input1wt += deltaHiddenSum[2];\n    n2.input2wt += deltaHiddenSum[0];\n    n3.input1wt += deltaHiddenSum[1];\n    n3.input2wt += deltaHiddenSum[2];\n\n    n1.output = n1.Solve();\n    n2.output = n2.Solve();\n    n3.output = n3.Solve();\n}\n\nreturn true;\n}\n\nint main()\n{\nsrand(time(NULL));\nint targetResult = 0;\nint a;\nint b;\nint d;\nint c;\nNeuron n1 = Neuron();\nNeuron n2 = Neuron();\nNeuron n3 = Neuron();\nn1.Init();\nn2.Init();\nn3.Init();\n\nfor (int c = 0; c &lt; 1000000; c++)\n{\n    Train(n1, n2, n3, 1, 1, 0, 1);\n    Train(n1, n2, n3, 1, 0, 1, 1);\n    Train(n1, n2, n3, 0, 0, 0, 1);\n    Train(n1, n2, n3, 0, 1, 1, 1);\n}\ncout &lt;&lt; \"Done\\n\";\n\n\n\nwhile (2)\n{\n    cin &gt;&gt; a;\n    cin &gt;&gt; b;\n    //cin &gt;&gt; d;\n    n1.input1 = a;\n    n1.input2 = b;\n    n2.input1 = a;\n    n2.input2 = b;\n    n3.input1 = a;\n    n3.input2 = b;\n    //Train(n1, n2, n3, a, b, d, 1000);\n    n1.output = n3.Solve();\n    n2.output = n3.Solve();\n    n3.output = n3.Solve();\n\n    cout &lt;&lt; \"\\n\" &lt;&lt; Sigmoid(n1.output * n1.outputwt + n2.output * n2.outputwt + n3.output * n3.outputwt) &lt;&lt; \"\\n\";\n}\nreturn 1;\n}\n</code></pre>\n\n<p>Thanks for reading through this if you can, this has really been bothering me.</p>\n"}, {"tags": ["c++", "string", "int"], "comments": [{"owner": {"reputation": 4083, "user_id": 3303546, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/1Xh6f.jpg?s=128&g=1", "display_name": "Cecilia", "link": "https://stackoverflow.com/users/3303546/cecilia"}, "edited": false, "score": 0, "creation_date": 1490228376, "post_id": 42962193, "comment_id": 73024079, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/9986091/how-do-you-convert-a-string-into-an-array-of-floats\">How do you convert a string into an array of floats?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5716, "user_id": 1105214, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/C15zn.png?s=128&g=1", "display_name": "samis", "link": "https://stackoverflow.com/users/1105214/samis"}, "is_accepted": false, "score": 1, "last_activity_date": 1490215650, "last_edit_date": 1490215650, "creation_date": 1490215217, "answer_id": 42962256, "question_id": 42962193, "link": "https://stackoverflow.com/questions/42962193/converting-a-string-into-multiple-ints/42962256#42962256", "title": "Converting a string into multiple ints", "body": "<p>Try the <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/stof\" rel=\"nofollow noreferrer\"><code>stof</code></a> standard library function.</p>\n\n<pre><code>std::string orbits (\"686.97 365.24\");\nstd::string::size_type sz;     // alias of size_t\n\nfloat mars = std::stof (orbits,&amp;sz);\nfloat earth = std::stof (orbits.substr(sz));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 822, "user_id": 5383169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LuDfE.png?s=128&g=1", "display_name": "Squidy", "link": "https://stackoverflow.com/users/5383169/squidy"}, "is_accepted": true, "score": 2, "last_activity_date": 1490216043, "creation_date": 1490216043, "answer_id": 42962471, "question_id": 42962193, "link": "https://stackoverflow.com/questions/42962193/converting-a-string-into-multiple-ints/42962471#42962471", "title": "Converting a string into multiple ints", "body": "<p>You can use <code>std::stringstream</code>:</p>\n\n<pre><code>std::stringstream ss(\"144.3 432.3 532.3\");\nfloat x, y, z;\nss &gt;&gt; x &gt;&gt; y &gt;&gt; z;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7753527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wtuTz.jpg?s=128&g=1", "display_name": "PurpleReaver", "link": "https://stackoverflow.com/users/7753527/purplereaver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "accepted_answer_id": 42962471, "answer_count": 2, "score": -3, "last_activity_date": 1490216043, "creation_date": 1490215017, "last_edit_date": 1490215834, "question_id": 42962193, "link": "https://stackoverflow.com/questions/42962193/converting-a-string-into-multiple-ints", "title": "Converting a string into multiple ints", "body": "<p>Newbie question but I have a string that gets 3 numbers, such as: </p>\n\n<blockquote>\n  <p>144.3 432.3 532.3</p>\n</blockquote>\n\n<p>Now I define 3 floats with </p>\n\n<pre><code>float x;\nfloat y;\nfloat z;\n</code></pre>\n\n<p>How can I put all the values inside of them? Where,</p>\n\n<pre><code>x = 144.3; \ny = 432.3; \nz = 532.3;\n</code></pre>\n"}, {"tags": ["c++", "brackets"], "comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 3, "creation_date": 1490214893, "post_id": 42962113, "comment_id": 73018364, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/templates\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/templates</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1490214969, "post_id": 42962113, "comment_id": 73018408, "body": "in <code>foo&lt;T&gt;</code>, <code>foo</code> is a template and <code>T</code> is the template parameter. In <code>foo&lt;&gt;</code> there is probably a default for the template parameter"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 2, "creation_date": 1490214978, "post_id": 42962113, "comment_id": 73018413, "body": "C and C++ are different languages - they share a lot of syntax but there&#39;s plenty of differences. You should not assume it&#39;s an easy transition"}, {"owner": {"reputation": 508, "user_id": 7625039, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d30dc8e67ea57081b388fda0589ddafd?s=128&d=identicon&r=PG&f=1", "display_name": "gfdsal", "link": "https://stackoverflow.com/users/7625039/gfdsal"}, "edited": false, "score": 0, "creation_date": 1490215785, "post_id": 42962113, "comment_id": 73018880, "body": "Well I tried googling angle brackets but couldnt find much help before posting here on stacksoverflow. Now it makes so much sense . Thanks!"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 386, "user_id": 1635109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b8f0678727dcf21e474ca20ff2aad38?s=128&d=identicon&r=PG", "display_name": "Shreyas Murali", "link": "https://stackoverflow.com/users/1635109/shreyas-murali"}, "edited": false, "score": 1, "creation_date": 1490216194, "post_id": 42962113, "comment_id": 73019105, "body": "@ShreyasMurali: It is merely showing disapproval of a trial &amp; error learning approach which tries to skip reading books and tutorials."}, {"owner": {"reputation": 487, "user_id": 2267503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2e5mz.png?s=128&g=1", "display_name": "rebusB", "link": "https://stackoverflow.com/users/2267503/rebusb"}, "edited": false, "score": 0, "creation_date": 1547396239, "post_id": 42962113, "comment_id": 95170406, "body": "+1 because templates are deeper into the language, c++ is vast, and sometimes you just need a hint at what you are encountering to move up the learning curve. (although the &quot;I am familiar with the syntax&quot; is clearly a misstatement and OP should feel bad.)"}], "answers": [{"tags": [], "owner": {"reputation": 7020, "user_id": 4822566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HlNVB.png?s=128&g=1", "display_name": "Alex Taylor", "link": "https://stackoverflow.com/users/4822566/alex-taylor"}, "is_accepted": true, "score": 11, "last_activity_date": 1490215121, "last_edit_date": 1490215121, "creation_date": 1490215006, "answer_id": 42962188, "question_id": 42962113, "link": "https://stackoverflow.com/questions/42962113/confusing-angle-brackets-something-in-c/42962188#42962188", "title": "Confusing Angle Brackets &lt; something &gt; in c++", "body": "<p>You're looking at <a href=\"https://en.m.wikipedia.org/wiki/Template_(C%2B%2B)\" rel=\"noreferrer\">C++ templates</a>.</p>\n\n<blockquote>\n  <p>...allows a function or class to work on many different data types without being rewritten for each one.</p>\n</blockquote>\n"}], "owner": {"reputation": 508, "user_id": 7625039, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d30dc8e67ea57081b388fda0589ddafd?s=128&d=identicon&r=PG&f=1", "display_name": "gfdsal", "link": "https://stackoverflow.com/users/7625039/gfdsal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10900, "favorite_count": 1, "accepted_answer_id": 42962188, "answer_count": 1, "score": 5, "last_activity_date": 1490215121, "creation_date": 1490214785, "question_id": 42962113, "link": "https://stackoverflow.com/questions/42962113/confusing-angle-brackets-something-in-c", "title": "Confusing Angle Brackets &lt; something &gt; in c++", "body": "<p>I am coming from c to c++ and familiar with the syntax. But I just came across the code with syntax im not familiar with </p>\n\n<pre><code>int main() {\n    std::shared_ptr &lt; CommonAPI::Runtime &gt; runtime = CommonAPI::Runtime::get();\n    std::shared_ptr&lt;HelloWorldProxy&lt;&gt;&gt; myProxy =\n        runtime-&gt;buildProxy&lt;HelloWorldProxy&gt;(\"local\", \"test\");\n</code></pre>\n\n<p>Can Someone explain what does syntax <code>something &lt; something &gt; something</code> do also what does syntax <code>something&lt;something&lt;&gt;&gt; something</code> do.</p>\n"}, {"tags": ["c++", "opengl", "textures", "sdl-2"], "comments": [{"owner": {"reputation": 584, "user_id": 1736531, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/51dd1349c4296bd27318e4d4ebf22262?s=128&d=identicon&r=PG", "display_name": "picklechips", "link": "https://stackoverflow.com/users/1736531/picklechips"}, "edited": false, "score": 0, "creation_date": 1490215897, "post_id": 42962051, "comment_id": 73018941, "body": "Why is this line commented out? <code>&#47;&#47;glUniformMatrix4fv(ModelLocation, 1, GL_FALSE, glm::value_ptr(Model*Rotation));</code> and what is Rotation?"}, {"owner": {"reputation": 584, "user_id": 1736531, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/51dd1349c4296bd27318e4d4ebf22262?s=128&d=identicon&r=PG", "display_name": "picklechips", "link": "https://stackoverflow.com/users/1736531/picklechips"}, "edited": false, "score": 0, "creation_date": 1490216084, "post_id": 42962051, "comment_id": 73019042, "body": "I&#39;m just gonna go on a limb here and say uncomment that line and remove the rotation bit so it&#39;s just <code>glUniformMatrix4fv(ModelLocation, 1, GL_FALSE, glm::value_ptr(Model));</code>"}, {"owner": {"reputation": 1848, "user_id": 5505741, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K0RGKJuJSu4/AAAAAAAAAAI/AAAAAAAAAFw/aodTCStN3gc/photo.jpg?sz=128", "display_name": "Michael Nastenko", "link": "https://stackoverflow.com/users/5505741/michael-nastenko"}, "edited": false, "score": 1, "creation_date": 1490234871, "post_id": 42962051, "comment_id": 73025891, "body": "You must set <code>ModelMat</code> to different matrices for both draw calls. And I don&#39;t see you setting it at all (except commented line)"}], "owner": {"reputation": 21, "user_id": 6659924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acb0514de271fbe01f3e9e757722bd67?s=128&d=identicon&r=PG&f=1", "display_name": "ErrorCode", "link": "https://stackoverflow.com/users/6659924/errorcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490217385, "creation_date": 1490214610, "last_edit_date": 1490217385, "question_id": 42962051, "link": "https://stackoverflow.com/questions/42962051/opengl-move-one-of-my-two-shapes", "title": "OpenGL Move One Of My Two Shapes", "body": "<p>I'm creating a game in SDL where everything has to be drawn in OpenGL. I've drawn two shapes with different textures and added keyboard controls. My problem is only my Player textured shape should be controllable but instead both of my shapes are stuck together and the vector I thought controlled the enemy position doesn't. Is my problem when I draw? How do I make it so I my player controls only move the player shape.</p>\n\n<pre><code>//Declare transform and model matrix.\n    glm::mat4 Model;  glm::mat4 Rotation; glm::mat4 View;\n    glm::mat4 Projection;\n\n    glm::vec3 Player = glm::vec3(2.0f, 0.5f, -1.0f);\n    GLfloat playermovespeed = 0.1f;\n\n    Projection = glm::ortho(0.0f, 4.0f, 0.0f, 3.0f, -1.0f, 100.0f);\n\n    Model = glm::translate(Model, Player);\n    GLint ProjectionLocation = glGetUniformLocation(shaderProgram, \"ProjectionMat\");\n    glUniformMatrix4fv(ProjectionLocation, 1, GL_FALSE, glm::value_ptr(Projection));\n\n    SDL_GetWindowSize(window, &amp;w, &amp;h);   glViewport(0, 0, w, h);\n    while (WindowOpen)\n    {\n        glBindVertexArray(VAO);\n        glBindTexture(GL_TEXTURE_2D, texture[0]);\n        Model = glm::mat4();\n        Model = glm::translate(Model, glm::vec3(0.0f, 15.0f, 5.0f)); //Position of enemy shape\n        GLint ModelLocation = glGetUniformLocation(shaderProgram, \"ModelMat\");\n        GLint ViewLocation = glGetUniformLocation(shaderProgram, \"ViewMat\");\n        //glUniformMatrix4fv(ModelLocation, 1, GL_FALSE, glm::value_ptr(Model*Rotation));\n        glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_INT, 0);\n        glBindVertexArray(0);\n\n        //Player texture\n        glBindVertexArray(VAO);\n        glBindTexture(GL_TEXTURE_2D, textureA);\n        Model = glm::mat4();                         //y\n        Model = glm::translate(Model, Player); //Position control of ship.\n        ModelLocation = glGetUniformLocation(shaderProgram, \"ModelMat\");\n        glUniformMatrix4fv(ModelLocation, 1, GL_FALSE, glm::value_ptr(Model));\n        glUniformMatrix4fv(ViewLocation, 1, GL_FALSE, glm::value_ptr(View));\n        glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_INT, 0);\n        glBindVertexArray(0);\n\n        SDL_GL_SwapWindow(window);\n        while (SDL_PollEvent(&amp;event))\n        {\n            if (event.type == SDL_QUIT)\n                WindowOpen = false;\n            if (event.type == SDL_KEYDOWN)\n            {\n                switch (event.key.keysym.sym)\n                {\n                case SDLK_RIGHT:\n                    Player.x += playermovespeed;\n                    break;\n                case SDLK_LEFT:\n                    Player.x -= playermovespeed;\n                    break;\n                default:\n                    break;\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>But just in case here is also how I set up everything.</p>\n\n<pre><code>GLfloat vertices[] = {\n        0.5f,  0.5f, 0.0f,    1.0f, 1.0f,   // Top Right\n        0.5f, -0.5f, 0.0f,    1.0f, 0.0f,   // Bottom Right\n        -0.5f, -0.5f, 0.0f,   0.0f, 0.0f,   // Bottom Left\n        -0.5f,  0.5f, 0.0f,   0.0f, 1.0f,\n    };\n    GLuint indices[] = {   start from 0!\n        0, 1, 3,   \n        1, 2, 3,\n    };\n\n//Load image Enemy; //Load image Player; //Load shaders;\n\nGLuint VBO;\n    glGenBuffers(1, &amp;VBO);\n    GLuint EBO;\n    glGenBuffers(1, &amp;EBO);\n    GLuint texture[2];\n    glGenTextures(2, texture);\n    glBindTexture(GL_TEXTURE_2D, texture[0]);\n\n    //set texture parameters. First texture.\n\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, image-&gt;w, image-&gt;h, 0, GL_RGBA, GL_UNSIGNED_BYTE, image-&gt;pixels);\n    glGenerateMipmap(GL_TEXTURE_2D);\n    glBindTexture(GL_TEXTURE_2D, 0);\n    SDL_FreeSurface(image);\n\n    //Second texture same way as first; //Set texture parameters\n\n    GLuint VAO;\n    glGenVertexArrays(1, &amp;VAO);\n    glBindVertexArray(VAO);\n    glBindBuffer(GL_ARRAY_BUFFER, VBO);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO);\n    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices), indices, GL_STATIC_DRAW);\n\n    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (GLvoid*)0);\n    glEnableVertexAttribArray(0);\n    glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (GLvoid*)(3 * sizeof(GLfloat)));\n    glEnableVertexAttribArray(1);\n    glBindVertexArray(0);\n</code></pre>\n"}, {"tags": ["c++", "templates"], "answers": [{"comments": [{"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 1, "creation_date": 1490215937, "post_id": 42962310, "comment_id": 73018968, "body": "But by just adding <code>using T::x</code> at the class scope, the restriction disappears, even though specializations may exist which make <code>x</code> invalid (in which case I guess instantiation would give an error). So I suppose that in a similar fashion, in a compiler&#39;s second pass over the templates, it could either use <code>T::x</code> on its own, or figure out that the unqualified name <code>x</code> is invalid."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 2, "creation_date": 1490216291, "post_id": 42962310, "comment_id": 73019164, "body": "@Danra Yes, it can figure it out at instantiation time. The point is that the compiler would not be able to do any typo checking at template definition time, because every typo is a possible dependent base member."}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1490217239, "post_id": 42962310, "comment_id": 73019680, "body": "That&#39;s a good point. Perhaps that&#39;s the rationale behind it. Theoretically, though, I guess that if compilers and the machines they run on were fast enough so that code editors could fully compile all the code, including template instantiation on the fly, typo catching could just be deferred to that stage."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 1, "creation_date": 1490217314, "post_id": 42962310, "comment_id": 73019711, "body": "@Danra The author of the template code may not be the author of the code code instantiating the template. (Think header-only template libraries.)"}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 16, "last_activity_date": 1490215373, "creation_date": 1490215373, "answer_id": 42962310, "question_id": 42961940, "link": "https://stackoverflow.com/questions/42961940/why-does-the-c-standard-specify-that-unqualified-names-in-a-template-are-non-d/42962310#42962310", "title": "Why does the C++ standard specify that unqualified names in a template are non-dependent?", "body": "<p>This isn't quite what the standard actually says. What it actually says is that dependent base classes are not examined during unqualified name lookup. An unqualified name can of course be dependent given the correct context - that's how ADL in templates works: given a template type parameter <code>T</code>, the <code>foo</code> in <code>foo(T())</code> is a dependent name.</p>\n\n<p>In any event, the reason it can't do this kind of lookup is straightforward: at template definition time, you have no idea what the dependent base class is going to look like, thanks to specializations that may come in later, so you can't do any meaningful lookup. Every misspelled identifier in a template with a dependent base class can't be diagnosed until when it is instantiated, if ever. And since every unqualified identifier might have been from a dependent base class, you'll need some way to answer \"is this a type?\" and \"is this a template?\", since the answers to those questions affect parsing. That means something like the dreaded <code>typename</code> and <code>template</code> keywords, but in far more places.</p>\n"}, {"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1490216433, "post_id": 42962454, "comment_id": 73019253, "body": "We can always make up a rule in this alternate universe that says that whatever we found in, say, the primary template of the dependent base is what <code>x</code> binds to at instantiation time."}, {"owner": {"reputation": 3933, "user_id": 25406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73cff92b3bc15706f0f7bf0fdbfa6e4c?s=128&d=identicon&r=PG", "display_name": "Tomek", "link": "https://stackoverflow.com/users/25406/tomek"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1490216596, "post_id": 42962454, "comment_id": 73019344, "body": "I believe this would break full and partial template specialization then."}], "tags": [], "owner": {"reputation": 3933, "user_id": 25406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73cff92b3bc15706f0f7bf0fdbfa6e4c?s=128&d=identicon&r=PG", "display_name": "Tomek", "link": "https://stackoverflow.com/users/25406/tomek"}, "is_accepted": false, "score": 7, "last_activity_date": 1490215984, "creation_date": 1490215984, "answer_id": 42962454, "question_id": 42961940, "link": "https://stackoverflow.com/questions/42961940/why-does-the-c-standard-specify-that-unqualified-names-in-a-template-are-non-d/42962454#42962454", "title": "Why does the C++ standard specify that unqualified names in a template are non-dependent?", "body": "<p>I think it is a matter of consistency. Consider this, a bit modified example:</p>\n\n<p>header file:</p>\n\n<pre><code>template&lt;typename T&gt;\nclass Base\n{\npublic:\n    T x;\n};\n\nextern int x;\n\ntemplate&lt;typename T&gt;\nclass C : public Base&lt;T&gt;\n{\npublic:\n    bool m() { return x == 0; }\n};\n</code></pre>\n\n<p>and source file:</p>\n\n<pre><code>template&lt;&gt;\nclass Base&lt;int&gt; // but could be anything\n{\npublic:\n    // no x here\n};\n\nint main()\n{\n  C&lt;char&gt; c1;\n  c1.m(); // may select ::x or Base&lt;char&gt;::x\n  C&lt;int&gt; c2;\n  c2.m(); // has only one choice: ::x\n  return(0);\n}\n</code></pre>\n\n<p>Wording in the standard guarantees that compiler will either error out or select whatever symbol it sees at the point of template definition. If the compiler was to defer name resolution to template instantiation it may then select different objects visible at this point and which may surprise the developer.</p>\n\n<p>If the developer WANTS to access dependent name he is required to state this explicitly and he shouldn't be then taken off guard.</p>\n\n<p>Please also note that if the x wasn't available at the point of template definition the following code would break (unexpectedly) One Definition Rule:</p>\n\n<p>one.cpp</p>\n\n<pre><code>#include &lt;template_header&gt;\n\nnamespace {\nint x;\n}\n\nvoid f1()\n{\n  C&lt;int&gt; c1;\n}\n</code></pre>\n\n<p>two.cpp</p>\n\n<pre><code>#include &lt;template_header&gt;\n\nnamespace {\nchar x;\n}\n\nvoid f2()\n{\n  C&lt;int&gt; c2;\n}\n</code></pre>\n\n<p>One would expect that c1 and c2 variables are of the same type and can for example be safely passed two a function taking <code>C&lt;int&gt; const &amp;</code> parameter, but basically the two variables have the same type name but the implementations differ.</p>\n"}, {"comments": [{"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 1, "creation_date": 1491672378, "post_id": 43298043, "comment_id": 73661934, "body": "Good chance this will break though once MSVC&#39;s template handling is C++98 standards compliant :) (AFAIK it still isn&#39;t in VC++2017, see for example <a href=\"https://blogs.msdn.microsoft.com/vcblog/2016/11/16/permissive-switch/\" rel=\"nofollow noreferrer\">blogs.msdn.microsoft.com/vcblog/2016/11/16/permissive-switch</a>&zwnj;&#8203;)"}], "tags": [], "owner": {"reputation": 10133, "user_id": 341971, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/humD6.jpg?s=128&g=1", "display_name": "Uri", "link": "https://stackoverflow.com/users/341971/uri"}, "is_accepted": false, "score": 1, "last_activity_date": 1491671546, "creation_date": 1491671546, "answer_id": 43298043, "question_id": 42961940, "link": "https://stackoverflow.com/questions/42961940/why-does-the-c-standard-specify-that-unqualified-names-in-a-template-are-non-d/43298043#43298043", "title": "Why does the C++ standard specify that unqualified names in a template are non-dependent?", "body": "<p>Whether compliant with the standard or not, in Visual Studio 2015 - this isn't an issue at all. Moreover, despite the comment from Tomek, the compiler takes the correct x</p>\n\n<pre><code>static int x = 42;\n\ntemplate&lt;typename T&gt;\nclass Base {\npublic:\n    T x;\n    Base() { x = 43; }\n};\n\ntemplate&lt;&gt;\nclass Base&lt;int&gt; { };\n\ntemplate&lt;typename T&gt;\nclass C :public Base&lt;T&gt;\n{\npublic:\n    int m() { return x; }\n};\n\nvoid main() {\n    C&lt;int&gt; cint;\n    C&lt;char&gt; cchar;\n\n    std::cout &lt;&lt; \"cint: \" &lt;&lt; cint.m() &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"cchar: \" &lt;&lt; cchar.m() &lt;&lt; std::endl;\n}\n\n// Output is:\n// cint: 42\n// cchar: 43\n</code></pre>\n"}], "owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 814, "favorite_count": 2, "accepted_answer_id": 42962310, "answer_count": 3, "score": 16, "last_activity_date": 1491671546, "creation_date": 1490214253, "last_edit_date": 1495535452, "question_id": 42961940, "link": "https://stackoverflow.com/questions/42961940/why-does-the-c-standard-specify-that-unqualified-names-in-a-template-are-non-d", "title": "Why does the C++ standard specify that unqualified names in a template are non-dependent?", "body": "<p>Why is it that the C++ standard specify that unqualified names in a template are non-dependent?</p>\n\n<p>e.g. </p>\n\n<pre><code>template&lt;typename T&gt;\nclass Base\n{\npublic:\n    T x;\n};\n\ntemplate&lt;typename T&gt;\nclass C : public Base&lt;T&gt;\n{\npublic:\n    bool m() { return x == 0; } // Error: undeclared identifier 'x'\n};\n</code></pre>\n\n<p>Quoting from the accepted answer to an SO <a href=\"https://stackoverflow.com/questions/605497/accessing-inherited-variable-from-templated-parent-class\">question</a> about how to overcome the restriction:</p>\n\n<blockquote>\n  <p>The standard specifies that unqualified names in a template are\n  non-dependent and must be looked up when the template is defined. The\n  definition of a dependent base class is unknown at that time\n  (specializations of the base class template may exist) so unqualified\n  names are unable to be resolved.</p>\n</blockquote>\n\n<p>However, the quoted and other answers do not specify <em>why</em> this is what the standard specifies. What is the rationale for this restriction?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 6633, "user_id": 2378300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/852aed09b52c7514ed23f75f2921f6cc?s=128&d=identicon&r=PG", "display_name": "Jonas", "link": "https://stackoverflow.com/users/2378300/jonas"}, "edited": false, "score": 0, "creation_date": 1490214078, "post_id": 42961807, "comment_id": 73017905, "body": "@Jonas He&#39;s not trying to initialize it, he&#39;s trying to update it in a method."}, {"owner": {"reputation": 43, "user_id": 7734411, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gQD7OlkZwbU/AAAAAAAAAAI/AAAAAAAAAGM/U28cIwWtW-M/photo.jpg?sz=128", "display_name": "Amor", "link": "https://stackoverflow.com/users/7734411/amor"}, "edited": false, "score": 0, "creation_date": 1490214409, "post_id": 42961807, "comment_id": 73018094, "body": "first i am  declare the rate without static but it wasn&#39;t work"}], "answers": [{"tags": [], "owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1490214089, "creation_date": 1490214089, "answer_id": 42961896, "question_id": 42961807, "link": "https://stackoverflow.com/questions/42961807/undefined-reference-to-savingrate/42961896#42961896", "title": "undefined reference to `saving::rate&#39;", "body": "<p>In <code>Saving.h</code>, you declared the static variable:</p>\n\n<pre><code>static double rate;\n</code></pre>\n\n<p>But you still need to <em>define it</em> (in other words instantiate it). To do so you should add this to <code>Saving.cpp</code>:</p>\n\n<pre><code> double saving::rate = 0;\n</code></pre>\n\n<p>Without that, the linker cannot find the actual variable, so any reference to it will result in a linker error.</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 7734411, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gQD7OlkZwbU/AAAAAAAAAAI/AAAAAAAAAGM/U28cIwWtW-M/photo.jpg?sz=128", "display_name": "Amor", "link": "https://stackoverflow.com/users/7734411/amor"}, "edited": false, "score": 0, "creation_date": 1490214640, "post_id": 42961935, "comment_id": 73018220, "body": "yes it worked  tnx"}], "tags": [], "owner": {"reputation": 584, "user_id": 1736531, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/51dd1349c4296bd27318e4d4ebf22262?s=128&d=identicon&r=PG", "display_name": "picklechips", "link": "https://stackoverflow.com/users/1736531/picklechips"}, "is_accepted": false, "score": 0, "last_activity_date": 1490214211, "creation_date": 1490214211, "answer_id": 42961935, "question_id": 42961807, "link": "https://stackoverflow.com/questions/42961807/undefined-reference-to-savingrate/42961935#42961935", "title": "undefined reference to `saving::rate&#39;", "body": "<p>Because saving is a static member, you have to have it initialized beforehand.</p>\n\n<p>In your <code>saving.cpp</code> file, add this line after including all the headers:</p>\n\n<p><code>double saving::rate = 0</code></p>\n\n<pre><code>Your code should then like this:\n#include&lt;iostream&gt;\n#include\"saving.h\"\nusing namespace std;\n\ndouble saving::rate = 0; //With this line here\n\nsaving :: saving(double newSavebal){\n   savebal = newSavebal;\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 7734411, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gQD7OlkZwbU/AAAAAAAAAAI/AAAAAAAAAGM/U28cIwWtW-M/photo.jpg?sz=128", "display_name": "Amor", "link": "https://stackoverflow.com/users/7734411/amor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1490682580, "answer_count": 2, "score": 1, "last_activity_date": 1490214211, "creation_date": 1490213764, "last_edit_date": 1490213981, "question_id": 42961807, "link": "https://stackoverflow.com/questions/42961807/undefined-reference-to-savingrate", "closed_reason": "Duplicate", "title": "undefined reference to `saving::rate&#39;", "body": "<p>I am write this code but when i compile this code with g++ in arch linux i recive this error</p>\n\n<blockquote>\n<pre><code>  /tmp/ccG7axw1.o: In function `saving::calculate()':\n  saving.cpp:(.text+0x3a): undefined reference to `saving::rate'\n  /tmp/ccG7axw1.o: In function `saving::modify()':\n  saving.cpp:(.text+0x93): undefined reference to `saving::rate'\n  collect2: error: ld returned 1 exit status\n</code></pre>\n</blockquote>\n\n<p>saving.h</p>\n\n<pre><code>class saving{\nprivate :\n    double savebal;\npublic :\n    saving(double newSavebal); \n    double calculate();\n    void modify();\n    static double rate;\n};\n</code></pre>\n\n<p>saving.cpp</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include\"saving.h\"\nusing namespace std;\nsaving :: saving(double newSavebal){\n   savebal = newSavebal;\n}\ndouble saving :: calculate(){\n    savebal += (savebal * (rate / 100))/12;\n}\n\nvoid saving :: modify(){\n    cout&lt;&lt;\"Please enter the new rate\"&lt;&lt;endl;\n    cin&gt;&gt;rate;\n}\n</code></pre>\n\n<p>mainSaving.cpp</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include\"saving.h\"\nusing namespace std;\nvoid menu(saving );\nint main(){\n      saving s1(500);\n      menu(s1);\n}\n\n  void menu(saving s){\n    int m;\n    cout&lt;&lt;\"1) calculate month interest\\n\";\n    cout&lt;&lt;\"2) change rate of interest\\n\";\n    cin&gt;&gt;m;\n    switch(m){\n        case 1 :\n         s.calculate();\n         break;\n        case 2 :\n         s.modify();\n         break;\n\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "deadlock", "notify"], "comments": [{"owner": {"reputation": 252, "user_id": 4208360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7c25f8bfb5b065fed9fa20dbe7ddc7?s=128&d=identicon&r=PG&f=1", "display_name": "mkcms", "link": "https://stackoverflow.com/users/4208360/mkcms"}, "edited": false, "score": 0, "creation_date": 1490214006, "post_id": 42961725, "comment_id": 73017875, "body": "You need to make sure that <code>thread_even()</code> calls <code>even.wait()</code> before <code>thread_odd()</code> calls <code>even.notify_all()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 457, "user_id": 3798283, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/395e4f1b43ea999f5f6d41ee21bdf52d?s=128&d=identicon&r=PG&f=1", "display_name": "user3798283", "link": "https://stackoverflow.com/users/3798283/user3798283"}, "edited": false, "score": 0, "creation_date": 1490403057, "post_id": 42962079, "comment_id": 73112268, "body": "Masterpiece . Should have thought that . Thank you very much ."}], "tags": [], "owner": {"reputation": 1230, "user_id": 4064372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/225de4472e4e944d85254f42f778d20d?s=128&d=identicon&r=PG&f=1", "display_name": "Edd", "link": "https://stackoverflow.com/users/4064372/edd"}, "is_accepted": false, "score": 2, "last_activity_date": 1490214714, "last_edit_date": 1495541421, "creation_date": 1490214714, "answer_id": 42962079, "question_id": 42961725, "link": "https://stackoverflow.com/questions/42961725/notifyall-not-working-in-c-multithreading-causing-deadlock/42962079#42962079", "title": "notifyall not working in C++ multithreading . Causing deadlock", "body": "<p>As a general rule in a concurrent program, when you want to access a shared resource to read it and modify it (in your case, modulo operator on num is first reading and num++ is writing), you need to obtain mutual exclusive access to that resource and <strong>not release it</strong> until you're done with that resource. </p>\n\n<p>Your lock is going to be released when it exists the if-statement scope so you are not following this rule.</p>\n\n<p>If you modify your code as follows, you won't deadlock:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;mutex&gt;\n#include &lt;condition_variable&gt;\n#include &lt;thread&gt;\nusing namespace std;\nint num = 1;\n#define NUM 20\ncondition_variable odd;\ncondition_variable even;\nmutex mut;\nvoid thread_odd()\n{\n    while(num &lt; NUM -1)\n    {\n        unique_lock&lt;mutex&gt; lock(mut);\n        if(num%2 != 1)\n        {\n            odd.wait(lock);\n        }\n        cout&lt;&lt;\"ODD : \"&lt;&lt;num&lt;&lt;endl;\n        num++;\n        lock.unlock();\n        even.notify_all();  // Line X\n    }\n}\nvoid thread_even()\n{\n    while(num &lt; NUM )\n    {\n        unique_lock&lt;mutex&gt; lock(mut);\n        if(num%2 != 0)\n        {\n            even.wait(lock);\n        }\n        cout&lt;&lt;\"EVEN : \"&lt;&lt;num&lt;&lt;endl;\n        num++;\n        lock.unlock();\n        odd.notify_all();\n    }\n}\nint main()\n{\n    thread t1(thread_odd), t2(thread_even);\n    t1.join();\n    t2.join();\n    return 0;\n}\n</code></pre>\n\n<p>Notice how I am releasing the lock before notifying. In C++ this is not only possible (as opposed to Java) but recommended as you will decrease the chances of having the releaser greedily re-enter the critical block. You'll get some more insights into this last point <a href=\"https://stackoverflow.com/questions/17101922/do-i-have-to-acquire-lock-before-calling-condition-variable-notify-one\">here</a>.</p>\n"}], "owner": {"reputation": 457, "user_id": 3798283, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/395e4f1b43ea999f5f6d41ee21bdf52d?s=128&d=identicon&r=PG&f=1", "display_name": "user3798283", "link": "https://stackoverflow.com/users/3798283/user3798283"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 724, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1490214714, "creation_date": 1490213431, "question_id": 42961725, "link": "https://stackoverflow.com/questions/42961725/notifyall-not-working-in-c-multithreading-causing-deadlock", "title": "notifyall not working in C++ multithreading . Causing deadlock", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;mutex&gt;\n#include &lt;condition_variable&gt;\n#include &lt;thread&gt;\nusing namespace std;\nint num = 1;\n#define NUM 20\ncondition_variable odd;\ncondition_variable even;\nmutex mut;\nvoid thread_odd()\n{\n        while(num &lt; NUM -1)\n        {\n            if(num%2 != 1)\n            {\n                  unique_lock&lt;mutex&gt; lock(mut);\n                  odd.wait(lock);\n            }\n            cout&lt;&lt;\"ODD : \"&lt;&lt;num&lt;&lt;endl;\n            num++;\n            even.notify_all();  // Line X\n        }\n}\nvoid thread_even()\n{\n        while(num &lt; NUM )\n        {\n            if(num%2 != 0)\n            {\n                  unique_lock&lt;mutex&gt; lock(mut);\n                  even.wait(lock);\n            }\n            cout&lt;&lt;\"EVEN : \"&lt;&lt;num&lt;&lt;endl;\n            num++;\n            odd.notify_all();\n        }\n}\nint main()\n{\n       thread t1(thread_odd), t2(thread_even);\n       t1.join();\n       t2.join();\n       return 0;\n}\n</code></pre>\n\n<p>/*   Above is the program to print ODD &amp; EVEN numbers in synchronized manner ( one by one ) . The code is working fine most of the time . \n            But it is getting into a deadlock situation sometimes . \n            That is happening when odd thread is hitting notify_all but before the even thread wakes up it odd thread acquires the lock and then as it finds wait condition it goes into wait while the even thread hasn't wake up . \n            Leaving a dealock situation . I tried replacing notify_all to notify_one , \n            but the problem still persists . Is there any change in the design required ? \n            Or is there anything which I am missing completely ? */</p>\n"}, {"tags": ["c++", "iterator"], "answers": [{"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1490215791, "post_id": 42962094, "comment_id": 73018889, "body": "Ah, you&#39;re right. <code>*this</code> is a <code>row_iterator&amp;</code>, and <code>**this</code> is an <code>int&amp;</code>."}, {"owner": {"reputation": 97, "user_id": 1953419, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b7f2424b0a1b3c064c48f740fe7340e7?s=128&d=identicon&r=PG", "display_name": "Juan I. Perotti", "link": "https://stackoverflow.com/users/1953419/juan-i-perotti"}, "edited": false, "score": 0, "creation_date": 1490215914, "post_id": 42962094, "comment_id": 73018953, "body": "It makes sense. I have tested it and it worked as you say. I will add the test."}, {"owner": {"reputation": 274, "user_id": 5333904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4dbccef000a502b74ba490b8d96caad?s=128&d=identicon&r=PG&f=1", "display_name": "Pandatyr", "link": "https://stackoverflow.com/users/5333904/pandatyr"}, "reply_to_user": {"reputation": 97, "user_id": 1953419, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b7f2424b0a1b3c064c48f740fe7340e7?s=128&d=identicon&r=PG", "display_name": "Juan I. Perotti", "link": "https://stackoverflow.com/users/1953419/juan-i-perotti"}, "edited": false, "score": 0, "creation_date": 1490216184, "post_id": 42962094, "comment_id": 73019101, "body": "@Juan I&#39;ve added a brief explanation as to what&#39;s going on in the conversion for completeness&#39; sake."}], "tags": [], "owner": {"reputation": 274, "user_id": 5333904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4dbccef000a502b74ba490b8d96caad?s=128&d=identicon&r=PG&f=1", "display_name": "Pandatyr", "link": "https://stackoverflow.com/users/5333904/pandatyr"}, "is_accepted": true, "score": 3, "last_activity_date": 1490216015, "last_edit_date": 1490216015, "creation_date": 1490214739, "answer_id": 42962094, "question_id": 42961685, "link": "https://stackoverflow.com/questions/42961685/c-custom-iterator-and-this/42962094#42962094", "title": "C++ custom iterator and (*this)", "body": "<p>Your second assumption is correct. Your first is not. </p>\n\n<p>You must keep in mind that the type of <code>this</code> is <code>row_iterator*</code>, thus, the result type of <code>*this</code> is <code>row_iterator</code>, which, due to the existence of your <code>operator bool()</code> can be contextually converted to bool which is what happens in your second assignment (<code>bool b = *this</code>). </p>\n\n<p>In your first assignment (<code>int i = (*this)</code>) there is no suitable conversion from <code>row_iterator</code> to <code>int</code>. There is, however, a conversion to <code>bool</code> and converting a <code>bool</code> to an <code>int</code> is possible too, so in its current state, your first assignment will result in <code>i</code> being 1 if <code>operator bool()</code> returns true and 0 otherwise.</p>\n\n<p>In order to fix this, you need to dereference <code>this</code> twice.</p>\n\n<p>To elaborate, <a href=\"http://en.cppreference.com/w/cpp/language/implicit_conversion\" rel=\"nofollow noreferrer\">implicit conversion</a> (which is what's happening here) consists of up to three conversions:</p>\n\n<blockquote>\n  <ol>\n  <li>zero or one <em>standard conversion sequence</em></li>\n  <li>zero or one <em>user-defined conversion</em> </li>\n  <li>zero or one <em>standard conversion sequence</em>.</li>\n  </ol>\n</blockquote>\n\n<p>Standard conversion sequences consist of:</p>\n\n<blockquote>\n  <ol>\n  <li>zero or one <em>lvalue transformation</em></li>\n  <li>zero or one <em>numeric promotion or conversion</em></li>\n  <li>zero or one <em>function pointer conversion</em> (c++17 and up )</li>\n  <li>zero or one <em>qualification adjustment</em></li>\n  </ol>\n</blockquote>\n\n<p>Since the standard conversion sequence does not allow pointers to be dereferenced, the only way dereferencing can occur during implicit conversion is if it is done in a user-defined conversion function.</p>\n"}], "owner": {"reputation": 97, "user_id": 1953419, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b7f2424b0a1b3c064c48f740fe7340e7?s=128&d=identicon&r=PG", "display_name": "Juan I. Perotti", "link": "https://stackoverflow.com/users/1953419/juan-i-perotti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 42962094, "answer_count": 1, "score": 0, "last_activity_date": 1490217072, "creation_date": 1490213316, "last_edit_date": 1490217072, "question_id": 42961685, "link": "https://stackoverflow.com/questions/42961685/c-custom-iterator-and-this", "title": "C++ custom iterator and (*this)", "body": "<p>I am definining a custom iterator</p>\n\n<pre><code>class row_iterator {\n    // To iterate over nodes.\n    friend class Hamiltonian;\n    public:\n        typedef row_iterator                 self_type;\n        typedef int                          value_type;\n        typedef std::forward_iterator_tag    iterator_category;\n        row_iterator( const Bipartite &amp; B ) : _B( other._B ) , _i( 0 ) {}\n        row_iterator( const Bipartite &amp; B , const int i ) : _B( other._B ) , _i( i ) {}\n        row_iterator( const self_type &amp; other ) : _B( other._B ) , _i( other._i ) {}\n        self_type operator=( const self_type &amp; other ) { _B = other._B; _i = other._i; return ( * this ); }\n        self_type operator++()           { _i++; return ( * this ); } // PREFIX\n        self_type operator++( int junk ) { self_type tmp = ( * this ); _i++; return tmp; } // POSTFIX  \n        value_type &amp; operator*() { return _i; }\n        //value_type * operator-&gt;() { return &amp; _i; }\n        bool operator==( const self_type &amp; rhs ) { return ( _i == rhs._i ) and ( _B == rhs._B ); }\n        bool operator!=( const self_type &amp; rhs ) { return ( _i != rhs._i ) or  ( _B != rhs._B ); }\n        operator bool() { return _i &lt; _B.num_rows(); }\n\n        void test_func() {\n            int i = ( * this );\n            bool b = ( * this );\n        }\n\n    private:\n        Bipartite &amp; _B;\n        int _i;\n    };\n</code></pre>\n\n<p>Pay attention to the function <code>test_func()</code>. Now the question... </p>\n\n<p>If I write</p>\n\n<pre><code>int i = ( * this );\n</code></pre>\n\n<p>I assume that <code>int operator*()</code> is called. On the other hand, if I write</p>\n\n<pre><code>bool b = ( * this );\n</code></pre>\n\n<p>I assume that <code>operator bool()</code> is called. Is this the case?</p>\n\n<hr>\n\n<p><strong>EDIT</strong>: Here I add the test that checks that the voted answer is correct.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass iter {\n    public:\n        typedef iter                         self_type;\n        typedef int                          value_type;\n        typedef std::forward_iterator_tag    iterator_category;\n        iter( int imax ) : _i( 0 ) , _imax( imax ) {}\n        value_type operator*() { return _i; }\n        self_type operator++()           { _i++; return ( * this ); } // PREFIX\n        self_type operator++( int junk ) { self_type tmp = ( * this ); ++( * this ); return tmp; } // POSTFIX  \n        operator bool() { return _i &lt; _imax; }\n        void test() {\n            bool b = ( * this );\n            int q = ( * this );\n            int i = ( * ( * this ) );\n            std::cout &lt;&lt; \"b = \" &lt;&lt; b &lt;&lt; \" , q = \" &lt;&lt; q &lt;&lt; \" , i = \" &lt;&lt; i &lt;&lt; std::endl;\n        }\n    private:\n        int _i;\n        int _imax;\n};\n\nint main( void ) {\n\n    iter it( 10 );\n    while ( ( bool ) it ) {\n        it.test();\n        it++;\n    }\n\n}\n</code></pre>\n\n<p>The output, reads:</p>\n\n<pre><code>b = 1 , q = 1 , i = 0\nb = 1 , q = 1 , i = 1\nb = 1 , q = 1 , i = 2\nb = 1 , q = 1 , i = 3\nb = 1 , q = 1 , i = 4\nb = 1 , q = 1 , i = 5\nb = 1 , q = 1 , i = 6\nb = 1 , q = 1 , i = 7\nb = 1 , q = 1 , i = 8\nb = 1 , q = 1 , i = 9\n</code></pre>\n"}, {"tags": ["c++", "matlab", "segmentation-fault", "mex"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1490212488, "post_id": 42961359, "comment_id": 73017089, "body": "There is no such thing as C/C++ - they are two separate languages"}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1490213019, "post_id": 42961359, "comment_id": 73017384, "body": "It should be possible to access the data in this way. But you should check the type of the array <code>arr</code>. It might not be doubles, then you&#39;d be reading out of bounds."}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1490213220, "post_id": 42961359, "comment_id": 73017507, "body": "And, of course, you should be reading the array sizes as well, don&#39;t make assumptions like this. Next, check the indexing: if the sizes in MATLAB really are 144x192x256, then you should index <code>(k*192+j)*144+i</code>. But that won&#39;t make a difference with seg faults."}], "answers": [{"tags": [], "owner": {"reputation": 32458, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "is_accepted": true, "score": 2, "last_activity_date": 1506538777, "last_edit_date": 1506538777, "creation_date": 1490212783, "answer_id": 42961530, "question_id": 42961359, "link": "https://stackoverflow.com/questions/42961359/matlab-tensor-indexing-in-c/42961530#42961530", "title": "MATLAB Tensor Indexing in C++", "body": "<p>You have some errors in the indexing of the row mayor and column mayor <code>Idx</code>. Additionally, naively accessing the data can lead to very slow times due to random memory access (memory latency is key! <a href=\"https://stackoverflow.com/questions/36034322/time-performance-when-permuting-and-casting-double-to-float\">Read more here</a>). </p>\n\n<p>The best way to pass from MATLAB to C++ types (From 3D to 1D) is following the example below. </p>\n\n<hr>\n\n<hr>\n\n<p>In this example we illustrate how to take a double real-type 3D matrix from MATLAB, and pass it to a C <code>double*</code> array. </p>\n\n<p>The main objectives of this example are showing how to obtain data from MATLAB MEX arrays and to highlight some small details in matrix storage and handling.</p>\n\n<h1>matrixIn.cpp</h1>\n\n<pre><code>#include \"mex.h\"\n\nvoid mexFunction(int  nlhs , mxArray *plhs[],\n        int nrhs, mxArray const *prhs[]){\n   // check amount of inputs\n   if (nrhs!=1) {\n        mexErrMsgIdAndTxt(\"matrixIn:InvalidInput\", \"Invalid number of inputs to MEX file.\");\n    }\n\n   // check type of input\n   if( !mxIsDouble(prhs[0]) || mxIsComplex(prhs[0])){\n        mexErrMsgIdAndTxt(\"matrixIn:InvalidType\",  \"Input matrix must be a double, non-complex array.\");\n   }\n\n   // extract the data\n   double const * const matrixAux= static_cast&lt;double const *&gt;(mxGetData(prhs[0]));\n\n   // Get matrix size\n   const mwSize *sizeInputMatrix= mxGetDimensions(prhs[0]);\n\n   // allocate array in C. Note: its 1D array, not 3D even if our input is 3D\n   double*  matrixInC= (double*)malloc(sizeInputMatrix[0] *sizeInputMatrix[1] *sizeInputMatrix[2]* sizeof(double));\n\n\n   // MATLAB is column major, not row major (as C). We need to reorder the numbers\n   // Basically permutes dimensions   \n\n   // NOTE: the ordering of the loops is optimized for fastest memory access! \n   // This improves the speed in about 300% \n\n    const int size0 = sizeInputMatrix[0]; // Const makes compiler optimization kick in\n    const int size1 = sizeInputMatrix[1];\n    const int size2 = sizeInputMatrix[2];\n\n    for (int j = 0; j &lt; size2; j++)\n    {\n        int jOffset = j*size0*size1; // this saves re-computation time\n        for (int k = 0; k &lt; size0; k++)\n        {\n            int kOffset = k*size1; // this saves re-computation time\n            for (int i = 0; i &lt; size1; i++)\n            {\n                int iOffset = i*size0; \n                matrixInC[i + jOffset + kOffset] = matrixAux[iOffset + jOffset + k];\n            }\n        }\n    }\n\n    // we are done!\n\n    // Use your C matrix here\n\n    // free memory\n    free(matrixInC);\n    return;\n}\n</code></pre>\n\n<hr>\n\n<p>The relevant concepts to be aware of:</p>\n\n<ul>\n<li><p>MATLAB matrices are all 1D in memory, no matter how many dimensions they have when used in MATLAB. This is also true for most (if not all) main matrix representation in C/C++ libraries, as allows optimization and faster execution.</p></li>\n<li><p>You need to explicitly copy matrices from MATLAB to C in a loop.</p></li>\n<li><p>MATLAB matrices are stored in column major order, as in Fortran, but C/C++ and most modern languages are row major. It is important to permute the input matrix , or else the data will look completely different. </p></li>\n</ul>\n\n<p>The relevant function in this example are:</p>\n\n<ul>\n<li><code>mxIsDouble</code> checks if input is <code>double</code> type.</li>\n<li><code>mxIsComplex</code> checks if input is real or imaginary.</li>\n<li><code>mxGetData</code> returns a pointer to the real data in the input array. <code>NULL</code> if there is no real data.</li>\n<li><code>mxGetDimensions</code> returns an pointer to a <code>mwSize</code> array, with the size of the dimension in each index.</li>\n</ul>\n"}], "owner": {"reputation": 2106, "user_id": 588959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3a95696a0bc1b7e3c9e7c0fc6778dcaf?s=128&d=identicon&r=PG", "display_name": "Jack H", "link": "https://stackoverflow.com/users/588959/jack-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 42961530, "answer_count": 1, "score": 1, "last_activity_date": 1506538777, "creation_date": 1490212183, "last_edit_date": 1490212579, "question_id": 42961359, "link": "https://stackoverflow.com/questions/42961359/matlab-tensor-indexing-in-c", "title": "MATLAB Tensor Indexing in C++", "body": "<p>I am attempting to load in a .mat file containing a tensor of known dimensions in C++; <code>144x192x256</code>.</p>\n\n<p>I have adjusted the linear index for the read operation to be column major as in MATLAB. However I am still getting memory access issues. </p>\n\n<pre><code>void FeatureLoader::readMat(const std::string &amp;fname, Image&lt; std::vector&lt;float&gt; &gt; *out) {\n    //Read MAT file.\n    const char mode = 'r';\n    MATFile *matFile = matOpen(fname.c_str(), &amp;mode);\n    if (matFile == NULL) {\n        throw std::runtime_error(\"Cannot read MAT file.\");\n    }\n\n\n    //Copy the data from column major to row major storage.\n    float *newData = newImage-&gt;GetData();\n    const mxArray *arr = matGetVariable(matFile, \"map\");\n    if (arr == NULL) {\n        throw std::runtime_error(\"Cannot read variable.\");\n    }\n\n    double *arrData = (double*)mxGetPr(arr);\n#pragma omp parallel for\n    for (int i = 0; i &lt; 144; i++) {\n#pragma omp parallel for\n        for (int j = 0; j &lt; 192; j++) {\n            for (int k = 0; k &lt; 256; k++) {\n                int rowMajIdx = (i * 192 + j) * 256 + k;\n                int colMajIdx = (j * 144 + i) * 256 + k;\n                newData[rowMajIdx] = static_cast&lt;float&gt;(arrData[colMajIdx]);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>In the above snippet, am I right to be accessing the data linearly as with a flattened 3D array in C++? For example:-</p>\n\n<pre><code>idx_row_major = (x*WIDTH + y)*DEPTH + z\nidx_col_major = (y*HEIGHT + x)*DEPTH + z\n</code></pre>\n\n<p>Is this the underlying representation that MATLAB uses?</p>\n"}, {"tags": ["c++", "containers", "frequency"], "comments": [{"owner": {"reputation": 2089, "user_id": 3022583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/re7Fa.png?s=128&g=1", "display_name": "Santiago Varela", "link": "https://stackoverflow.com/users/3022583/santiago-varela"}, "edited": false, "score": 0, "creation_date": 1490212186, "post_id": 42961345, "comment_id": 73016905, "body": "By container you preferably mean data structure?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1490212241, "post_id": 42961345, "comment_id": 73016938, "body": "Sounds like you want a <code>std::map&lt;int, int&gt;</code>"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1490212249, "post_id": 42961345, "comment_id": 73016942, "body": "Asking for code is generally frowned upon. Also I find it a bit unclear what exactly the problem is or what the criteria are? What&#39;s wrong with a simple <code>std::vector</code>? Or maybe a <code>std::map</code>?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1490212273, "post_id": 42961345, "comment_id": 73016959, "body": "You only showed us a picture.  You didn&#39;t give information on what the actual data items it is you need to keep / record."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1490212436, "post_id": 42961345, "comment_id": 73017056, "body": "What are the possible ranges for a and b?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1490213373, "post_id": 42961345, "comment_id": 73017591, "body": "When in doubt, choose <code>std::vector</code>. Only when you have a real reason why that won&#39;t work, look for alternatives.  Good rule of thumb."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 1, "creation_date": 1490290194, "post_id": 42961345, "comment_id": 73058122, "body": "As @NathanOlivier mentioned - use <code>std::map&lt;int, int&gt;</code> where first template (key) will be representing X-Axis, since both keys and values of X-Axis must be unique, and the second one will be representing value of that key, meaning: position in Y-Axis. EDIT: To you update: if you have, for example <code>std::vector&lt;std::vector&gt;&gt; a(5, std::vector&lt;int&gt;(5));</code> you can access it simply by using <code>operator[]</code>. So a[0][0] will be top left record of your &#39;matrix&#39;"}, {"owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 1, "creation_date": 1490291413, "post_id": 42961345, "comment_id": 73058886, "body": "<code>vector&lt;int&gt;</code> is enough"}], "answers": [{"tags": [], "owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "is_accepted": false, "score": 2, "last_activity_date": 1490292727, "last_edit_date": 1490292727, "creation_date": 1490290692, "answer_id": 42983187, "question_id": 42961345, "link": "https://stackoverflow.com/questions/42961345/what-c-container-should-i-choose-for-frequency-graph/42983187#42983187", "title": "What C++ container should I choose for frequency graph?", "body": "<blockquote>\n  <p>What container should I use and how do go about implementing that in the simplest way?</p>\n</blockquote>\n\n<p>A possible container would be a <code>std::map&lt;key, frequency&gt;</code>, both of which are of type <code>int</code>, with the additional advantage of your values being sorted. Then you could simply read values by something like:</p>\n\n<pre><code>std::map&lt;int, int&gt; data;\n\nint key;\nwhile (std::cin &gt;&gt; key)\n{\n    ++data[key]; // increment the frequency of a given key*\n}\n</code></pre>\n\n<blockquote>\n  <p>To access the <code>data</code> you could use iterators, like so:</p>\n</blockquote>\n\n<pre><code>for (auto it = data.begin; it != data.end(); ++it)\n{\n    // iterator to key  \n    std::cout &lt;&lt; it-&gt;first &lt;&lt;\": \"&lt;&lt; it-&gt;second &lt;&lt;\"\\n\";\n                              // iterator to frequency\n}\n</code></pre>\n\n<p>Which will print a two-column table of your data.</p>\n\n<h2>Second, even simpler approach:</h2>\n\n<p>You could use a <code>std::vector&lt;frequency&gt;</code>, where <code>frequency</code> is of type <code>int</code>, and your data would be the indexes of the <code>std::vector</code>, <strong>however</strong>, you should know the <em>range**</em> of your data so that you can use it as an initial vector size:\ni.e. <code>std::vector&lt;int&gt; data(5, 0)</code> could hold values with <em>range</em> <code>5</code>.</p>\n\n<p>Then if, for example, your data is consisted of the integers: [0, 4], you could have:</p>\n\n<pre><code>std::vector&lt;int&gt; data(5, 0); // five elements with initial value 0\n\nint key;\nwhile(std::cin &gt;&gt; key)  // assuming key &gt;= 0 &amp;&amp; key &lt; 5\n{\n    data[key] += 1;  \n} \n</code></pre>\n\n<p>and then print with:</p>\n\n<pre><code>for (int i= 0; i &lt; data.size(); ++i)\n{\n    std::cout &lt;&lt; i &lt;&lt;\": \"&lt;&lt; data[i] &lt;&lt;\"\\n\";\n}\n</code></pre>\n\n<hr>\n\n<p><sup>* The default initial <code>frequency</code> value of a distinct <code>key</code> is: <code>0</code>, so you can simply use the key to access and increment an element.</sup></p>\n\n<p><sup>**range - difference between the lowest and highest values.</sup></p>\n"}], "owner": {"reputation": 11, "user_id": 4265586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1a4ab3d6e5bb89821135813f92c6a92?s=128&d=identicon&r=PG", "display_name": "Are Riff", "link": "https://stackoverflow.com/users/4265586/are-riff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1490381669, "creation_date": 1490212117, "last_edit_date": 1490295044, "question_id": 42961345, "link": "https://stackoverflow.com/questions/42961345/what-c-container-should-i-choose-for-frequency-graph", "title": "What C++ container should I choose for frequency graph?", "body": "<p>I have a little project. I want to make a frequency graph something like this:</p>\n\n<pre><code>a-axis\n3|    x\n2|`   x        x\n1|    x  x     x\n0| x  x  x     x\n |`_____________`\n   2  4  6  7  9  b-axis\n</code></pre>\n\n<p>What container should I use and how do go about implementing that in the simplest way.</p>\n\n<ul>\n<li>The container should also record zero value (frequency).</li>\n</ul>\n\n<p>I find it difficult to correct implement the container. Is there are any sample code I can look at? Or anybody can write a sample for me to study here.</p>\n\n<p>Update:\nI was thinking of making <code>std::map&lt;int,std::vector&lt;int&gt;&gt; keyAndMap</code>\nHow do I access the vector which is inside keyAndMap?\nBecause I somehow can't do <code>keyAndMap.insert(std::make_pair&lt;int,std::vector&lt;int&gt;&gt;(bAxis,bVec.push_back(bValue)));</code>\nThe main problem I think is how to generate unique vector for each key in std::map?</p>\n\n<pre><code>const int tries = 21;\nstd::vector&lt;int&gt;values;\nstd::map&lt;int,std::vector&lt;int&gt;&gt;keyAndMap;\nfor (int i = 1; i &lt; tries; i++)\n{\n    int n = i;\n    int cycle = calculate(n);\n    /*This next line is an error... why?*/\n    keyAndMap.insert(std::make_pair&lt;int,std::vector&lt;int&gt;&gt;(cycle,values.push_back(i)));\n}\n</code></pre>\n\n<p>although if i somehow got through that line, my logic here is flawed because the vector is not unique to each key. \nEach 'x' in the little pretty graph i drew is gained with each pass in the loop.\nSo for each b-axis (2,4,6,7, and 9) should be in their own std::vector</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 2, "creation_date": 1490212285, "post_id": 42961339, "comment_id": 73016968, "body": "The file will still have an active inode. inodes are kept alive through reference counting. Your open file handle is a reference."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1490212368, "post_id": 42961339, "comment_id": 73017019, "body": "When a file is opened, the process receives a descriptor or file stream pointing to the inode of the file. Deleting the file only removes the file entry in the directory. The inodes are not returned to the filesystem until the last reference is closed."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490212491, "post_id": 42961339, "comment_id": 73017093, "body": "A filename in a directory is not the file. Unix is not Windows."}, {"owner": {"reputation": 327, "user_id": 2685189, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/74d91b5a5b3ce513dbc54f86cf2baee1?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Bergemann", "link": "https://stackoverflow.com/users/2685189/frank-bergemann"}, "edited": false, "score": 0, "creation_date": 1490213078, "post_id": 42961339, "comment_id": 73017425, "body": "I know for file descriptors and accordingly showing up in /proc/[pid]/fd/.... How is this reference counting modelled for mmap()?"}], "answers": [{"tags": [], "owner": {"reputation": 1664, "user_id": 1851678, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/bdcff1b7cdb4a88526e436ad7550c9a4?s=128&d=identicon&r=PG", "display_name": "Zoso", "link": "https://stackoverflow.com/users/1851678/zoso"}, "is_accepted": false, "score": 1, "last_activity_date": 1614676692, "last_edit_date": 1614676692, "creation_date": 1526489132, "answer_id": 50376124, "question_id": 42961339, "link": "https://stackoverflow.com/questions/42961339/mmap-after-deleting-the-file/50376124#50376124", "title": "mmap() after deleting the file", "body": "<p>Here's what's happening.</p>\n<p>The first thing to check is</p>\n<pre><code>$ls -i /tmp/demo-file.dat\n65 /tmp/demo-file.dat\n</code></pre>\n<p>Note the inode number of the file is 65.</p>\n<p>On starting the program, here's what it has in its <code>lsof</code> output (apart from other entries not relevant to the current discourse)</p>\n<pre><code>a.out   29271 zoso    3u   REG   0,21        5       65 /tmp/demo-file.dat\n</code></pre>\n<p>This is a result of the <code>open()</code> that's been done. Note that the inode number is the same as the other file. The <code>open()</code> has increased the ref count on the same inode. Also, note that <code>REG</code> indicates a regular file.</p>\n<p>Now if the file is deleted (using <code>rm</code> etc.), here's what the <code>lsof</code> looks like</p>\n<pre><code>a.out   29271 zoso    3u   REG   0,21        5       65 /tmp/demo-file.dat (deleted)\n</code></pre>\n<p>This is expected since the file that was opened has been deleted but the handle that to its inode still is open in the process.</p>\n<p>Moving on to the mmap, and here's the <code>lsof</code> output</p>\n<pre><code>a.out   29271 zoso  DEL    REG   0,21                65 /tmp/demo-file.dat\na.out   29271 zoso    3u   REG   0,21        5       65 /tmp/demo-file.dat (deleted)\n</code></pre>\n<p>Now there's another new entry but note that this is of type <code>DEL</code> which indicates (lifting from <a href=\"https://linux.die.net/man/8/lsof\" rel=\"nofollow noreferrer\">lsof</a> man page):</p>\n<blockquote>\n<p>''DEL'' for a Linux map file that has been deleted;</p>\n</blockquote>\n<p>Since <code>lsof</code> can't stat the original file anymore, it puts this mapping as <code>DEL</code> with no size of course, yet note that the inode number still remains the same i.e 65.</p>\n<p>Now after <code>close()</code> has been called on the fd here's what <code>lsof</code> shows</p>\n<pre><code>a.out   29271 zoso  DEL    REG   0,21                65 /tmp/demo-file.dat\n</code></pre>\n<p>Note that the <code>(deleted)</code> entry is gone since that fd to a <code>REG</code> file has been closed and now only the mmap'd memory remains.</p>\n<p>After <code>munmap()</code> this entry too is gone (no more references to <code>/tmp/demo-file.dat</code> and finally the program ends.</p>\n"}], "owner": {"reputation": 327, "user_id": 2685189, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/74d91b5a5b3ce513dbc54f86cf2baee1?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Bergemann", "link": "https://stackoverflow.com/users/2685189/frank-bergemann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1831, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1614676692, "creation_date": 1490212092, "last_edit_date": 1490212447, "question_id": 42961339, "link": "https://stackoverflow.com/questions/42961339/mmap-after-deleting-the-file", "title": "mmap() after deleting the file", "body": "<p>I was told, that mmap() might be in trouble, if someone deletes the original file. I was wondering if that really happens. So i created some little test-program. I am using linux.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;sys/mman.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n\nint main(int, char**)\n{\n    char const * const fileName = \"/tmp/demo-file.dat\";\n    size_t size;\n\n    {\n        struct stat st;\n        stat(fileName, &amp;st);\n        size = st.st_size;\n    }\n\n    int fd = open(fileName, O_RDWR);\n    if (fd == -1)\n    {\n        std::cout &lt;&lt; \"open() failed, errno = \" &lt;&lt; errno &lt;&lt; \":\" &lt;&lt; strerror(errno) &lt;&lt; std::endl;\n        return (-1);\n    }\n    else\n    {\n        std::cout &lt;&lt; \"open() done (ok)\" &lt;&lt; std::endl;\n    }\n\n    for (int i = 20; i &gt; 0; --i)\n    {\n        std::cout &lt;&lt; \"file open()'ed, wait #\" &lt;&lt; i &lt;&lt; \" seconds before mmap()\" &lt;&lt; std::endl;\n        sleep(1);\n    }\n\n    void *data = mmap((void*)0L, size, PROT_READ, MAP_SHARED, fd, (off_t)0);\n    if (data == (void*)-1)\n    {\n        std::cout &lt;&lt; \"mmap() failed, errno = \" &lt;&lt; errno &lt;&lt; \":\" &lt;&lt; strerror(errno) &lt;&lt; std::endl;\n    }\n    else\n    {\n        std::cout &lt;&lt; \"mmap() done (ok)\" &lt;&lt; std::endl;\n    }\n\n    for (int i = 20; i &gt; 0; --i)\n    {\n        std::cout &lt;&lt; \"going to close() socket in #\" &lt;&lt; i &lt;&lt; \" seconds\" &lt;&lt; std::endl;\n        sleep (1);\n    }\n\n    close(fd);\n\n    for (int i = 30; i &gt; 0; --i)\n    {\n        std::cout &lt;&lt; \"going to umap() files in #\" &lt;&lt; i &lt;&lt; \" seconds (still accessing the data)\" &lt;&lt; std::endl;\n        for (unsigned int x = 0; x &lt; size; ++x)\n        {\n            char cp = *(char*) (data + x);\n            (void) cp;\n        }\n        sleep(1);\n    }\n\n    munmap(data, size);\n\n    for (int i = 30; i &gt; 0; --i)\n    {\n        std::cout &lt;&lt; \"going to terminate #\" &lt;&lt; i &lt;&lt; \" seconds\" &lt;&lt; std::endl;\n        sleep(1);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Whenever i delete the file - after the open() operation - it doesn't have negative impact to then mmap(). I can still acess the data in the test program.\nWhen i delete the file right after close(), but before mmap(), it works. I can also still see the old file in the /proc/[pid]/fd/ area:</p>\n\n<pre><code>lrwx------ 1 frank frank 64 M\u00e4r 22 20:28 3 -&gt; /tmp/demo-file.dat (deleted)\n</code></pre>\n\n<p>The rest of the program works.</p>\n\n<p>Even when i delete the file <strong>after</strong> the close() it still succeeds to access the mmap() data.\nHowever in both cases, <strong>after</strong> the close() i cannot see the </p>\n\n<pre><code>lrwx------ 1 frank frank 64 M\u00e4r 22 20:28 3 -&gt; /tmp/demo-file.dat (deleted)\n</code></pre>\n\n<p>anymore. (btw: where is then noted, that this file \"still exists somehow\"?)</p>\n\n<p>So is it the opposite, that it is guaranteed, that mmap() will still be able to operate on the data, even if the file was manually deleted (in a shell or by some other process)?</p>\n"}, {"tags": ["c++", "fstream"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1490211552, "post_id": 42961132, "comment_id": 73016524, "body": "Hint: the <code>operator &gt;&gt;</code> of a stream stops when it sees white space"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1490212024, "post_id": 42961132, "comment_id": 73016807, "body": "Everything after <code>:</code> is an <code>int</code>. Why do you need to read it into a string?"}, {"owner": {"reputation": 851, "user_id": 3185580, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4d9a0d273cc49e05b5bbe6fbb57fd050?s=128&d=identicon&r=PG", "display_name": "SaschaP", "link": "https://stackoverflow.com/users/3185580/saschap"}, "edited": false, "score": 0, "creation_date": 1490214542, "post_id": 42961132, "comment_id": 73018173, "body": "how about the lengths of each line? are they all the same? if so, you could get the integers by picking them from the lines, e.g: <code>a = stoi(line[3])</code>. If not you could split each line by [space] and then extract your numbers..."}], "owner": {"reputation": 11, "user_id": 7436521, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XVFR4uz2zZk/AAAAAAAAAAI/AAAAAAAAABY/z_nnqu7JAdM/photo.jpg?sz=128", "display_name": "Emil Gustafsson", "link": "https://stackoverflow.com/users/7436521/emil-gustafsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 215, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490211949, "creation_date": 1490211416, "last_edit_date": 1490211949, "question_id": 42961132, "link": "https://stackoverflow.com/questions/42961132/c-read-from-txt-to-int-and-string", "title": "C++ - Read from .txt to int and string", "body": "<p>I'm trying to figure out how to read data from a text file to int and/or string but it's beyond my knowledge.</p>\n\n<p>My text file is structured like this: </p>\n\n<pre><code>a: 1 b:  1 c: 1 d: 1 e: 1 f: 1 |\na: 2 b:  2 c: 2 d: 2 e: 2 f: 2 |\na: 3 b:  3 c: 3 d: 3 e: 3 f: 3 |\n</code></pre>\n\n<p>My plan is read each row (1 loop) and somehow tell the computer to read what is after the : to either a string or an int. </p>\n\n<pre><code>void load(Class &amp;x) {\n    int a;\n    std::string b;\n    int c;\n    std::string d;\n    int e;\n    int f;\n\n    std::string textFile;\n    std::cout &lt;&lt; \"File Name: \";\n    std::cin &gt;&gt; textFile;\n\n    std::ifstream txtfile(textFile + \".txt\");\n\n    if (txtfile.is_open()) {\n        std::cout &lt;&lt; \"File Loaded Successfully!\" &lt;&lt; std::endl;\n    for(int i = 0; i &lt; 2 /*Number of rows in .txt file!*/; i++){\n            // I want to read from .txt to a, b, c, d, e, f.\n            x.add(a, b, c, d, e, f);\n        }\n    }\n    else {\n        std::cout &lt;&lt; \"File could not be opened.\" &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "sql-server", "sockets", "tcp", "oledb"], "comments": [{"owner": {"reputation": 83, "user_id": 2023473, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5fdc67238a62ed12ea7a85f2d1677c7e?s=128&d=identicon&r=PG", "display_name": "Jack Allen", "link": "https://stackoverflow.com/users/2023473/jack-allen"}, "edited": false, "score": 0, "creation_date": 1490213490, "post_id": 42960847, "comment_id": 73017658, "body": "Adding one more detail here..   I&#39;m now running TCPView from SysInternals..   When running TCPView all of the open connections in the TIME_WAIT state don&#39;t appear to be coming from the Windows Services I wrote, but rather the process name is identified as System Process."}, {"owner": {"reputation": 83, "user_id": 2023473, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5fdc67238a62ed12ea7a85f2d1677c7e?s=128&d=identicon&r=PG", "display_name": "Jack Allen", "link": "https://stackoverflow.com/users/2023473/jack-allen"}, "edited": false, "score": 0, "creation_date": 1490214214, "post_id": 42960847, "comment_id": 73017977, "body": "I&#39;ve seeing hundreds of entries in TCPView that look like the following:    Process   PID  Protocol   Local Address Local Port Remote Address Remote Port State                                                                                                             [System Process]   0    TCP    localservername  50547  remoteservername ms-sql-s    TIME_WAIT                                                                                                   What could [System Process] be, with PID of 0???"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1490226521, "post_id": 42960847, "comment_id": 73023521, "body": "See <a href=\"http://stackoverflow.com/questions/22802847/tcp-connection-owned-by-pid-zero\" title=\"tcp connection owned by pid zero\">stackoverflow.com/questions/22802847/&hellip;</a>"}, {"owner": {"reputation": 9430, "user_id": 90287, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7305d6dadbd3a1dd3ec73a9e8b96c660?s=128&d=identicon&r=PG", "display_name": "Rami A.", "link": "https://stackoverflow.com/users/90287/rami-a"}, "edited": false, "score": 0, "creation_date": 1491861653, "post_id": 42960847, "comment_id": 73731363, "body": "Are there any relevant entries in the Windows event log?"}, {"owner": {"reputation": 83, "user_id": 2023473, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5fdc67238a62ed12ea7a85f2d1677c7e?s=128&d=identicon&r=PG", "display_name": "Jack Allen", "link": "https://stackoverflow.com/users/2023473/jack-allen"}, "edited": false, "score": 0, "creation_date": 1491881924, "post_id": 42960847, "comment_id": 73736482, "body": "There are no relevant entries in the Windows event log."}], "owner": {"reputation": 83, "user_id": 2023473, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5fdc67238a62ed12ea7a85f2d1677c7e?s=128&d=identicon&r=PG", "display_name": "Jack Allen", "link": "https://stackoverflow.com/users/2023473/jack-allen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2081, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490210468, "creation_date": 1490210468, "question_id": 42960847, "link": "https://stackoverflow.com/questions/42960847/seeing-lots-of-tcp-connections-to-sql-server-in-time-wait-state", "title": "Seeing lots of TCP Connections to SQL Server in TIME_WAIT state", "body": "<p>I have several Windows Services that I developed that connect to SQL Server 2008 R2 via TCP/IP on port 1433.</p>\n\n<p>The application is written so that only ONE connection per service is used to connect to SQL Server.   But I may see several hundred connections to port 1433 all in the Time Wait state for a given Service.  </p>\n\n<p>Whenever one of my Services disconnects or connects from SQL Server, I'm absolutely positive that an entry is written to a log file.   Yet for the hundreds of TCP connections to SQL Server that are no log entries whatsoever.</p>\n\n<p>The obvious thought is that my Service is opening and closing a connection to SQL Server for every transaction, but that is not the case here. </p>\n\n<p>As a matter of fact I will see hundreds of tcp connections to SQL Server in the TIME_WAIT state on one of my Services one minute, and the next minute they will all be gone, and then a different Windows Service that I developed will have hundreds of tcp connections to SQL Server in the TIME_WAIT State.   Yet both Windows Services process transactions continuously every second..  </p>\n\n<p>Is there any possible explanation as to how all these TCP connections to SQL Server occur without my Service actually explicitly opening and closing the database connection?   Maybe a MS Bug somewhere??   </p>\n"}, {"tags": ["c++", "image", "c++11", "opencv3.0"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1490212508, "post_id": 42960582, "comment_id": 73017109, "body": "The code you wrote won&#39;t compile.  When posting code, try to post actual code."}], "answers": [{"tags": [], "owner": {"reputation": 2273, "user_id": 7661119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nkofM.jpg?s=128&g=1", "display_name": "Ervin Szilagyi", "link": "https://stackoverflow.com/users/7661119/ervin-szilagyi"}, "is_accepted": false, "score": 0, "last_activity_date": 1490214537, "creation_date": 1490214537, "answer_id": 42962019, "question_id": 42960582, "link": "https://stackoverflow.com/questions/42960582/increment-the-value-of-each-pixel-of-an-image/42962019#42962019", "title": "Increment the value of each pixel of an image", "body": "<p><code>Vec3b</code> is a vector which contains 3 bytes (chars). Each byte denotes the value of an individual BGR (blue, green, red) or RGB channel. You should traverse this vector and modify each channel independently. Be careful, because we are talking about bytes, each byte should take a value between 0 and 255. I suggest setting a threshold for avoiding overflow.</p>\n\n<p>Note: if you don't care about alpha channel, I suggest loading your image with CV_LOAD_IMAGE_COLOR. This will ensure that your image is loaded in the BGR format.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6339713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc1412dc370c0a905fb94a30e2771b46?s=128&d=identicon&r=PG&f=1", "display_name": "niranjan reddy", "link": "https://stackoverflow.com/users/6339713/niranjan-reddy"}, "is_accepted": false, "score": 0, "last_activity_date": 1546325864, "creation_date": 1546325864, "answer_id": 53993599, "question_id": 42960582, "link": "https://stackoverflow.com/questions/42960582/increment-the-value-of-each-pixel-of-an-image/53993599#53993599", "title": "Increment the value of each pixel of an image", "body": "<pre><code>cv::Mat Image =cv::imread(\"image.jpg\");\nuint8_t * orig_ptr = (uint8_t*)Image.data;\nfor (int y = 0; y &lt; Image.rows; y++)\n{\n   for (int x = 0; x &lt; Image.cols; x++)\n    {\n          /*Reading Pizel Values*/\n          int R = orig_ptr[x * 3 + y*Image.step + 2];/*R -Pixel*/\n          int G = orig_ptr[x * 3 + y*Image.step + 1];/*G-Pixel*/\n          int B = orig_ptr[x * 3 + y*Image.step];    /*B-Pixel*/\n\n          /*Updating Values*/\n\n          orig_ptr[x * 3 + y*Image.step + 2] = cv::saturate_cast&lt;uint8_t&gt;(R + 50);\n          orig_ptr[x * 3 + y*Image.step + 1] =cv::saturate_cast&lt;uint8_t&gt;(G + 50);\n          orig_ptr[x * 3 + y*Image.step]=cv::saturate_cast&lt;uint8_t&gt;(B + 50);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6587451, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DoPJf2X6VSs/AAAAAAAAAAI/AAAAAAAAAAA/_SL7mL4JdGM/photo.jpg?sz=128", "display_name": "Rohit", "link": "https://stackoverflow.com/users/6587451/rohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1546325864, "creation_date": 1490209549, "last_edit_date": 1490212441, "question_id": 42960582, "link": "https://stackoverflow.com/questions/42960582/increment-the-value-of-each-pixel-of-an-image", "title": "Increment the value of each pixel of an image", "body": "<p>I have an image. I want to modify the image in such a way that the value of each pixel is increased by a particular margin.  Next I want to save the newly created image and display it. </p>\n\n<p>I tried changing each pixel value but was only able to set it to constant value. I don't want all the pixels to be constant but their value should increase by (lets say) 50.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"opencv2/highgui/highgui.hpp\"\n\nusing namespace std;\nusing namespace cv;\n\nint main()\n{\n  Mat image;\n  image =   imread(\"/home/rohit_136/Desktop/image.jpg\",CV_LOAD_IMAGE_UNCHANGED);\n  for (int i = 0; i &lt; image.cols; i++) {\n    for (int j = 0; j &lt; image.rows; j++) {\n      Vec3b intensity = image.at&lt;Vec3b&gt;(j, i)=50\n    }\n  }\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "debugging", "assembly", "reverse-engineering", "stack-trace"], "comments": [{"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 1, "creation_date": 1490214144, "post_id": 42960568, "comment_id": 73017941, "body": "Arguments are passed in registers, not on the stack, under x64 Windows. At point of execution shown in your first screenshot those registers would have been overwritten by previous calls to other functions. If the argument is still needed at that point of execution then it would have been moved to another register or saved on the stack. If it&#39;s not then its probably lost. In the former case the PDB file should give the debugger enough information to locate the argument, and in that case it should show up under the Locals tab and you can inspect the contents of any structure arguments there."}, {"owner": {"reputation": 569, "user_id": 1481186, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lGHWH.jpg?s=128&g=1", "display_name": "NucS", "link": "https://stackoverflow.com/users/1481186/nucs"}, "reply_to_user": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1490214489, "post_id": 42960568, "comment_id": 73018145, "body": "The <code>Locals</code> window is empty on any of the call stacks, every callstack has different registers - I&#39;ll try to surf through those to see if I can get anything."}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 1, "creation_date": 1490215127, "post_id": 42960568, "comment_id": 73018495, "body": "Well, if you somehow find the address of one of the structure in memory you should be able to inspect it by putting something like <code>(struct StructPlayer *) 0x12345678</code> into the watch window. You can also put some random valid address if you just want to see what members it has. That assumes the PDB file has type information, if not then then only way to find how the structure laid out is by painstakingly analyzing how the code uses the structure."}, {"owner": {"reputation": 569, "user_id": 1481186, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lGHWH.jpg?s=128&g=1", "display_name": "NucS", "link": "https://stackoverflow.com/users/1481186/nucs"}, "reply_to_user": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1490215425, "post_id": 42960568, "comment_id": 73018681, "body": "I think I managed to isolate a <code>struct StructPlayer*</code> through understanding ida decompiled. Upon settings a watch I get &#39;identifier &quot;StructPlayer&quot; is undefined&#39;.. I also tried to look the structure up in IDA - it seems to be absent/undefined."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1490219568, "post_id": 42960568, "comment_id": 73020764, "body": "your pdb really not containing type information. only public symbols. all what can be extracted from pdb - <a href=\"https://www.sendspace.com/file/3jebrb\" rel=\"nofollow noreferrer\">here</a> and if you have no src code you can not fix bug in exe, so what is your goal ?"}, {"owner": {"reputation": 569, "user_id": 1481186, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lGHWH.jpg?s=128&g=1", "display_name": "NucS", "link": "https://stackoverflow.com/users/1481186/nucs"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1490219828, "post_id": 42960568, "comment_id": 73020866, "body": "@RbMm, The software is working mainly with a SQL database - if I can get my hands on either the player id or item id, I&#39;ll be able to reproduce and fix the bug. The bug is caused by a bad row out of &gt;100k rows in the database."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1490276855, "post_id": 42960568, "comment_id": 73047724, "body": "<code>StructItem::deletePendingItem()</code> is static method with no parameters. so really in-depended from <code>StructItem</code> and called based on some global conditions - some static var &gt;= 10, time &gt;= lasttime + 100ms"}, {"owner": {"reputation": 319, "user_id": 7250424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hCY5W.jpg?s=128&g=1", "display_name": "julian", "link": "https://stackoverflow.com/users/7250424/julian"}, "edited": false, "score": 1, "creation_date": 1490383640, "post_id": 42960568, "comment_id": 73104843, "body": "this may shock you but there is a <a href=\"http://reverseengineering.stackexchange.com/\">reverse engineering site on SE</a> where you can ask questions about reverse engineering"}], "owner": {"reputation": 569, "user_id": 1481186, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lGHWH.jpg?s=128&g=1", "display_name": "NucS", "link": "https://stackoverflow.com/users/1481186/nucs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 719, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1490209502, "creation_date": 1490209502, "question_id": 42960568, "link": "https://stackoverflow.com/questions/42960568/extracting-structure-from-a-memory-dump-without-sourcecode", "title": "Extracting structure from a memory dump without sourcecode", "body": "<p><strong>Issue Summary</strong><br>\nOur company work with a discontinued program.<br>\nWe have the <code>.exe</code> obviously and a <code>.pdb</code> (possibly that it doesn't include structures).<br>\nThe <code>exe</code> is a compiled <code>VC++</code>.<br>\nWhen the software crashes, it dumps its memory into a <code>.dmp</code> which I can open through Visual Studio but since we <strong>do not</strong> have the sourcecode - the information I can extract is very little.<br>\nWe can see the stack and what the exception is (memory violation) but we need to find out what were the arguments that were passed into the function in order to understand what causes the crash.<br>\nThe arguments are a pointer to a structure which holds the valuable information.<br></p>\n\n<p><strong>Pictures</strong><br>\nThe following is what I can view through Visual Studio 2017 (Enterprise) - note: no managed memory debug available.\n<a href=\"https://i.stack.imgur.com/T8r6t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/T8r6t.png\" alt=\"\"></a></p>\n\n<p>Dump Summary (weights 2.4gb, 150mb zipped):\n<a href=\"https://i.stack.imgur.com/HcUlU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HcUlU.png\" alt=\"\"></a></p>\n\n<p><strong>Decompiles</strong><br>\nall are via <code>ida pro</code> and ordered by the stack:<br>\n(0) <a href=\"http://pastebin.com/Y4vTidwV\" rel=\"nofollow noreferrer\"><code>StructItem::deletePendingItem(void)</code></a><br>\n(1) <a href=\"http://pastebin.com/vdDp0rjj\" rel=\"nofollow noreferrer\"><code>StructItem::PendFreeItem_(struct StructItem *a1, const char *a2, int a3)</code></a><br>\n(2) <a href=\"http://pastebin.com/shppjrWV\" rel=\"nofollow noreferrer\"><code>onTakeItem(struct StructPlayer *a1, struct TS_CS_TAKE_ITEM *a2)</code></a><br></p>\n\n<p><strong>For deeper look</strong><br>\n<a href=\"https://mega.nz/#!5NUzVCbR!hatv3-rqwcO9l5soxs3d10xNE7AzNK9CRrWeMRUi94k\" rel=\"nofollow noreferrer\">A rar with the <code>exe</code> and <code>pdb</code></a>, I'm afraid I cant post here the memory dump but feel free to contact me directly for it.</p>\n\n<p><strong>What I'm looking for</strong><br>\nThere are two structures i'm interested in:<br>\n<code>StructPlayer</code> and <code>StructItem</code>, both can provide me an integer to point towards the database index.<br>\nstring for <code>StructItem</code> is probably stored in the Database and only has a reference to its index.</p>\n\n<p><strong>My knowledge and skills</strong><br>\nHonestly, I barely know assembly - I have a general picture of what and how.<br>\nIf the answer could point to a reverse engineering beginner - it would be awesome.</p>\n\n<p><strong>THE QUESTION</strong></p>\n\n<ol>\n<li>From a memory dump, <code>exe</code> and a <code>pdb</code> - how can I extract a\nstructure data from the called function (showed in the stack)\ndirectly from the dump.</li>\n<li>How can I find out the structures data order from a <code>pdb</code> and an <code>exe</code></li>\n<li>Which programs will help me to do that and how.</li>\n</ol>\n"}, {"tags": ["c++", "c++11", "shared-ptr"], "comments": [{"owner": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 3, "creation_date": 1490209342, "post_id": 42960496, "comment_id": 73015288, "body": "So you can e.g. std::cout &lt;&lt; ptr just like with a bare pointer"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 6, "creation_date": 1490209370, "post_id": 42960496, "comment_id": 73015301, "body": "What would operator &gt;&gt; possibly do? Raw pointers don&#39;t support that operator either."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1490209784, "post_id": 42960496, "comment_id": 73015541, "body": "@NeilButterworth: <code>std::basic_istream</code> has an <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt\" rel=\"nofollow noreferrer\"><code>operator&gt;&gt;( void*&amp; value )</code></a> for reading a raw pointer. That might be dangerous for a <code>shared_ptr</code>, although a <code>shared_ptr</code> can be constructed from a raw pointer, so it is not out of the realm of possible to create an <code>operator&gt;&gt;</code> for direct assignment to a <code>shared_ptr</code>. Though that wouldn&#39;t work if a custom deleter is needed, you would have to read the pointer first and then construct a new <code>shared_ptr</code> with it so you can specify a deleter."}, {"owner": {"reputation": 2174, "user_id": 2369389, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/f3URs.jpg?s=128&g=1", "display_name": "madduci", "link": "https://stackoverflow.com/users/2369389/madduci"}, "edited": false, "score": 0, "creation_date": 1490211643, "post_id": 42960496, "comment_id": 73016580, "body": "I guess it&#39;s more for debugging/logging purpose rather than other causes. Having the address printed out might be helpful with some debuggers."}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 0, "last_activity_date": 1490213156, "creation_date": 1490213156, "answer_id": 42961644, "question_id": 42960496, "link": "https://stackoverflow.com/questions/42960496/why-does-stdshared-ptr-provide-operator/42961644#42961644", "title": "Why does std::shared_ptr provide operator&lt;&lt;?", "body": "<p>Because it is a potentially useful thing that <code>&lt;&lt;</code> does on a raw pointer.  It is safe, and it is what raw pointers do, and <code>shared_ptr</code> is supposed to be used to replace raw pointers in some situations.</p>\n\n<p>In comparsion, <code>&gt;&gt;</code> would very rarely make sense.  Unlike a raw pointer, storing a pointer value in a shared pointer takes ownership of it.</p>\n\n<p>I can <code>some_stream &gt;&gt; raw_ptr</code> and unless I do something with <code>ptr</code> nothing goes wrong; a bit strange, but nothing immediately breaks.</p>\n\n<p>Doing the same to <code>shared_ptr</code> would only be safe in extremely esoteric situations.  In those situations, having to take a step where we first populate a raw pointer then load it into the shared pointer doesn't seem like an overly burdensome requirement.</p>\n"}], "owner": {"reputation": 11861, "user_id": 1899020, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c6f377132e8aad22b97bfcc85adffdb?s=128&d=identicon&r=PG", "display_name": "user1899020", "link": "https://stackoverflow.com/users/1899020/user1899020"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 220, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1490213156, "creation_date": 1490209267, "last_edit_date": 1490210351, "question_id": 42960496, "link": "https://stackoverflow.com/questions/42960496/why-does-stdshared-ptr-provide-operator", "title": "Why does std::shared_ptr provide operator&lt;&lt;?", "body": "<p><code>std::shared_ptr</code> provides <code>operator&lt;&lt;</code> which just writes out its address. There is no <code>operator&gt;&gt;</code> and only the address without the content is recorded. I am wondering in which cases it is useful.</p>\n"}, {"tags": ["c++", "string", "file", "int", "loading"], "answers": [{"comments": [{"owner": {"reputation": 2273, "user_id": 7661119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nkofM.jpg?s=128&g=1", "display_name": "Ervin Szilagyi", "link": "https://stackoverflow.com/users/7661119/ervin-szilagyi"}, "edited": false, "score": 0, "creation_date": 1490209783, "post_id": 42960549, "comment_id": 73015539, "body": "What if all those information (<code>engine_switch</code>, <code>map_switch </code>, ...) are into one line?"}, {"owner": {"reputation": 13, "user_id": 7753090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/660fbcd71fdd4840c5b368732b805512?s=128&d=identicon&r=PG&f=1", "display_name": "Sumerechny", "link": "https://stackoverflow.com/users/7753090/sumerechny"}, "edited": false, "score": 0, "creation_date": 1490209799, "post_id": 42960549, "comment_id": 73015555, "body": "I wrote something like this: std::getline(file, engine_switch);         std::getline(file, map_switch);         std::getline(file, sub_map_switch);         std::getline(file, player_name);         std::getline(file, player_class); and I get an error &quot;no matching function for call to &#39;getline(std::ifstream&amp;, int&amp;&#39;"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1490209801, "post_id": 42960549, "comment_id": 73015557, "body": "Worth editing to add a note on the difficulties that can arise from mixing <code>std::getline</code> with <code>operator&gt;&gt;</code>, specifically <code>&gt;&gt;</code> leaving a linefeed in the buffer for <code>getline</code> to trip over."}, {"owner": {"reputation": 584, "user_id": 1736531, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/51dd1349c4296bd27318e4d4ebf22262?s=128&d=identicon&r=PG", "display_name": "picklechips", "link": "https://stackoverflow.com/users/1736531/picklechips"}, "reply_to_user": {"reputation": 13, "user_id": 7753090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/660fbcd71fdd4840c5b368732b805512?s=128&d=identicon&r=PG&f=1", "display_name": "Sumerechny", "link": "https://stackoverflow.com/users/7753090/sumerechny"}, "edited": false, "score": 0, "creation_date": 1490210418, "post_id": 42960549, "comment_id": 73015887, "body": "@Sumerechny Sorry, that&#39;s my mistake. Notice the error message tells you whats wrong, getline doesn&#39;t accept integer values. I missed that in your code. So for those you will still need to use the <code>&gt;&gt;</code> operator."}, {"owner": {"reputation": 584, "user_id": 1736531, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/51dd1349c4296bd27318e4d4ebf22262?s=128&d=identicon&r=PG", "display_name": "picklechips", "link": "https://stackoverflow.com/users/1736531/picklechips"}, "reply_to_user": {"reputation": 2273, "user_id": 7661119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nkofM.jpg?s=128&g=1", "display_name": "Ervin Szilagyi", "link": "https://stackoverflow.com/users/7661119/ervin-szilagyi"}, "edited": false, "score": 1, "creation_date": 1490210508, "post_id": 42960549, "comment_id": 73015942, "body": "@ErvinSzilagyi Well then that&#39;s a poor design decision and would need to be separated by some other character, in which case you could add the third parameter to <code>getline</code> to only get up to that specified character."}, {"owner": {"reputation": 2273, "user_id": 7661119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nkofM.jpg?s=128&g=1", "display_name": "Ervin Szilagyi", "link": "https://stackoverflow.com/users/7661119/ervin-szilagyi"}, "edited": false, "score": 0, "creation_date": 1490210768, "post_id": 42960549, "comment_id": 73016071, "body": "@picklechips You are right. You should include this in your response."}], "tags": [], "owner": {"reputation": 584, "user_id": 1736531, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/51dd1349c4296bd27318e4d4ebf22262?s=128&d=identicon&r=PG", "display_name": "picklechips", "link": "https://stackoverflow.com/users/1736531/picklechips"}, "is_accepted": false, "score": 0, "last_activity_date": 1490210578, "last_edit_date": 1490210578, "creation_date": 1490209429, "answer_id": 42960549, "question_id": 42960383, "link": "https://stackoverflow.com/questions/42960383/c-reading-a-txt-file-containing-multiple-kinds-of-variables/42960549#42960549", "title": "C++ Reading a txt file containing multiple kinds of variables", "body": "<p>You need to use <code>getline</code> instead of the <code>&gt;&gt;</code> operator in your <code>load-game</code> function.</p>\n\n<p>Instead of doing <code>file &gt;&gt; player_name</code> do <code>getline(file, player_name)</code>\nThis should be used in replacement of every occurrence of <code>file &gt;&gt; someVar</code></p>\n\n<p><strong>EDIT</strong>: I didn't realize the others were integer values. For those you should still be using the <code>&gt;&gt;</code> operator.</p>\n"}, {"comments": [{"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1490210095, "post_id": 42960653, "comment_id": 73015715, "body": "Exactly.  But if you write a new line after each string, the input would read &quot;Jowhn WIlliam Doe&quot; skip the new line, and then read &quot;hero B&quot; in the second string."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1490210207, "post_id": 42960653, "comment_id": 73015782, "body": "Yeah sorry about that. Misread your point. But on the re-read the code is exposed to the end of line left in the stream after <code>file &gt;&gt; sub_map_switch;</code>"}, {"owner": {"reputation": 13, "user_id": 7753090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/660fbcd71fdd4840c5b368732b805512?s=128&d=identicon&r=PG&f=1", "display_name": "Sumerechny", "link": "https://stackoverflow.com/users/7753090/sumerechny"}, "edited": false, "score": 0, "creation_date": 1490210300, "post_id": 42960653, "comment_id": 73015825, "body": "Something must be still wrong because now my program reads player_name as player_class and player_name is empty. By the way it puts every word now, so it&#39;s good, but still not it."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 13, "user_id": 7753090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/660fbcd71fdd4840c5b368732b805512?s=128&d=identicon&r=PG&f=1", "display_name": "Sumerechny", "link": "https://stackoverflow.com/users/7753090/sumerechny"}, "edited": false, "score": 0, "creation_date": 1490210534, "post_id": 42960653, "comment_id": 73015957, "body": "Well, saw that coming. @Sumerechny add <code>file.ignore()</code> (or <code>file.ignore(numeric_limits&lt;streamsize&gt;::max(), &#39;\\n&#39;);</code> if you really want to be sure, but remember to <code>#include &lt;limits&gt;</code> to get <code>max</code>) after <code>file &gt;&gt; sub_map_switch;</code> to eat up the trailing end of line. Otherwise <code>getline</code> finds the end of line and returns immediately."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1490210623, "post_id": 42960653, "comment_id": 73015995, "body": "Yes, sorry I didn&#39;t see that you already put a new lien after each of your fields.  So what happens, it that <code>file&gt;&gt;sub_map_switch</code> extracts the integer.  The next char to read is the trailing newline.  So in your case you first need to <a href=\"http://www.cplusplus.com/reference/istream/istream/ignore/\" rel=\"nofollow noreferrer\"><code>ignore()</code></a> the trailing newline before doing the <code>getline()</code>.  Attention the ignore is only needed when you do a <code>getline()</code> after a <code>&gt;&gt;</code> ; not between two <code>getline()</code>"}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 0, "last_activity_date": 1490209800, "creation_date": 1490209800, "answer_id": 42960653, "question_id": 42960383, "link": "https://stackoverflow.com/questions/42960383/c-reading-a-txt-file-containing-multiple-kinds-of-variables/42960653#42960653", "title": "C++ Reading a txt file containing multiple kinds of variables", "body": "<p>When you extract a string from a stream, spaces are considered as separators.<br>\nIt's even worse: in your code, the <code>player_name</code> is followed by <code>player_class</code> which is also a string. How should your program interpret this : </p>\n\n<pre><code>10 15 20 John William Doe hero B \n</code></pre>\n\n<p>How would your program guess that <code>John William Doe</code> is a composed name and <code>hero B</code> the category ?  </p>\n\n<p>The simplest solution is to write all your strings on a separate line in the file.  When you load it you can then read it with <a href=\"http://www.cplusplus.com/reference/string/string/getline/\" rel=\"nofollow noreferrer\"><code>getline()</code></a>:  </p>\n\n<pre><code>file &gt;&gt; engine_switch; // this is int\nfile &gt;&gt; map_switch; // this is int\nfile &gt;&gt; sub_map_switch;  /this is int\ngetline (file, player_name);  //string\ngetline (file, player_class; //string\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7753090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/660fbcd71fdd4840c5b368732b805512?s=128&d=identicon&r=PG&f=1", "display_name": "Sumerechny", "link": "https://stackoverflow.com/users/7753090/sumerechny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 42960653, "answer_count": 2, "score": 0, "last_activity_date": 1490219188, "creation_date": 1490208907, "last_edit_date": 1490219188, "question_id": 42960383, "link": "https://stackoverflow.com/questions/42960383/c-reading-a-txt-file-containing-multiple-kinds-of-variables", "title": "C++ Reading a txt file containing multiple kinds of variables", "body": "<p>My skills are very basic. I'm trying to make save and load functions for a text game. This is my code:</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n\n#include \"variables.h\"\n\n// CORE FUNCTIONS\nvoid save_game()\n{\n    std::ofstream file((savefile_path + \"/\" + player_name + \".txt\").c_str());\n    if (file.is_open())\n    {\n        file &lt;&lt; engine_switch &lt;&lt; std::endl;  //int\n        file &lt;&lt; map_switch &lt;&lt; std::endl;     // int\n        file &lt;&lt; sub_map_switch &lt;&lt; std::endl;  // int\n        file &lt;&lt; player_name &lt;&lt; std::endl;  //string\n        file &lt;&lt; player_class &lt;&lt; std::endl;  // string\n        //file &lt;&lt;  &lt;&lt; endl;\n        file.close();\n    }\n    else\n    {\n        std::cout &lt;&lt; \"A PROBLEM OCCURED\";\n        system(\"pause\");\n    }\n    return;\n}\n\nvoid load_game()\n{\n    system(\"cls\");\n\n    std::cout &lt;&lt; \"ENTER THE SAVE FILE NAME (SAME AS YOUR CHARACTER NAME)\\nOR PRESS ENTER TO GO BACK TO MAIN MENU: \";\n    fflush(stdin);\n    getline(std::cin, player_name);\n    std::string name=player_name;\n    std::ifstream file((savefile_path + \"/\" + player_name + \".txt\").c_str());\n    if(file)\n    {\n        file &gt;&gt; engine_switch; // this is int\n        file &gt;&gt; map_switch; // this is int\n        file &gt;&gt; sub_map_switch;  /this is int\n        file &gt;&gt; player_name;  //string\n        file &gt;&gt; player_class; //string\n        //file &gt;&gt; ;\n        return;\n    }\n    else\n    {\n        if(player_name==\"\\0\")\n        {\n            engine_switch=1;\n            return;\n        }\n        else\n        {\n            system(\"cls\");\n\n            std::cout &lt;&lt; \"COULDN'T OPEN THE SAVE FILE\" &lt;&lt; std::endl;\n            system(\"pause\");\n            load_game();\n        }\n    }\n    engine_switch=1;\n    return;\n}\n</code></pre>\n\n<p>The problem happens when I enter a player_name compound of multiple words separated with a space. For example when I enter \"name name\" the <code>player_name</code> becomes name and the <code>player_class</code> becomes name and the actual <code>player_class</code> is not put into any variable.</p>\n\n<p>I tried the <code>rdbuf()</code> function, but didn't work and I don't even understand it yet. I tried it with <code>stream</code>, <code>string</code>, <code>c.str()</code>, everything I found on the web and could comprehend, but it always comes out wrong.</p>\n"}, {"tags": ["c++", "literals", "integer-overflow", "long-long"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 2, "creation_date": 1490208758, "post_id": 42960290, "comment_id": 73014954, "body": "integer overflow - you are using an integer literal that fits in an <code>int</code> and after the multiplication it overflows - only after that is it converted to <code>long long</code> - you can explicitly force the literal to be treated as a <code>long long</code> by attaching a <code>ll</code> suffix"}, {"owner": {"reputation": 603, "user_id": 6016071, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bYAFA.jpg?s=128&g=1", "display_name": "JimmyNJ", "link": "https://stackoverflow.com/users/6016071/jimmynj"}, "edited": false, "score": 0, "creation_date": 1490208864, "post_id": 42960290, "comment_id": 73015011, "body": "I can confirm I get the same result on VS2015, Windows 10 , 64bit build."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "edited": false, "score": 0, "creation_date": 1490209484, "post_id": 42960290, "comment_id": 73015356, "body": "@Rama dead on agree with you, but this has better answers. Going to change the title of this question to make it a bit more useful to searching."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1614243611, "post_id": 42960290, "comment_id": 117327812, "body": "Another duplicate: <a href=\"https://stackoverflow.com/q/66354756\">Why does long long n = 2000*2000*2000*2000; overflow?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 2, "last_activity_date": 1490208886, "creation_date": 1490208886, "answer_id": 42960374, "question_id": 42960290, "link": "https://stackoverflow.com/questions/42960290/3-1000000000-overflows-as-an-int-but-the-variable-is-long-long-why/42960374#42960374", "title": "3 * 1000000000 overflows as an int, but the variable is long long. Why?", "body": "<p>What you do with a result doesn't affect how that result is calculated. So the fact that you store the result in a <code>long long</code> doesn't change the fact that the numbers you multiplied in the second line of code were not <code>long long</code>s and so they overflowed. In the third line of code, the constant is a <code>long long</code>, so the multiplication is performed on <code>long long</code>s.</p>\n"}, {"tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": true, "score": 11, "last_activity_date": 1490208977, "creation_date": 1490208977, "answer_id": 42960407, "question_id": 42960290, "link": "https://stackoverflow.com/questions/42960290/3-1000000000-overflows-as-an-int-but-the-variable-is-long-long-why/42960407#42960407", "title": "3 * 1000000000 overflows as an int, but the variable is long long. Why?", "body": "<p>Integer constants are, by default <code>int</code>s.</p>\n\n<pre><code>1000000000\n</code></pre>\n\n<p>That can fit into an <code>int</code>. So, this constant gets parsed as an <code>int</code>. But multiplying it by 3 overflows int.</p>\n\n<pre><code>10000000000\n</code></pre>\n\n<p>This is too big to an int, so this constant is a <code>long long</code>, so the resulting multiplication does not overflow.</p>\n\n<p>Solution: explicitly use <code>long long</code> constants:</p>\n\n<pre><code>long long calcOne = 3 * 100000000LL;     // 3e8, essentially\nlong long calcTwo = 3 * 1000000000LL;    // 3e9, essentially\nlong long calcThree = 3 * 10000000000LL; // 3e10, essentially\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 603, "user_id": 6016071, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bYAFA.jpg?s=128&g=1", "display_name": "JimmyNJ", "link": "https://stackoverflow.com/users/6016071/jimmynj"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1490209243, "post_id": 42960470, "comment_id": 73015239, "body": "@HolyBlackCat : correcting. Thx"}], "tags": [], "owner": {"reputation": 603, "user_id": 6016071, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bYAFA.jpg?s=128&g=1", "display_name": "JimmyNJ", "link": "https://stackoverflow.com/users/6016071/jimmynj"}, "is_accepted": false, "score": 2, "last_activity_date": 1490209288, "last_edit_date": 1490209288, "creation_date": 1490209181, "answer_id": 42960470, "question_id": 42960290, "link": "https://stackoverflow.com/questions/42960290/3-1000000000-overflows-as-an-int-but-the-variable-is-long-long-why/42960470#42960470", "title": "3 * 1000000000 overflows as an int, but the variable is long long. Why?", "body": "<p>The compiler saw this </p>\n\n<pre><code>long long calcOne = (int) 3 * (int) 100000000;     // 3e8, essentially\nlong long calcTwo = (int) 3 * (int) 1000000000;    // 3e9, essentially\nlong long calcThree = (int) 3 * (long long) 10000000000; // 3e10, essentially\n</code></pre>\n\n<p>And so the <code>calcTwo</code> right hand value was inferred as an <code>int</code> type and then over flowed. You see the over flow as a negative long. </p>\n\n<pre><code>long long calcOne = 3LL * 100000000LL;     // 3e8, essentially\nlong long calcTwo = 3LL * 1000000000LL;    // 3e9, essentially\nlong long calcThree = 3LL * 10000000000LL; // 3e10, essentially\n</code></pre>\n\n<p>To avoid this in the future, be explicit as to the types of your static values.To tell the compiler a number is a <code>long long</code> post fix it with LL.</p>\n"}, {"tags": [], "owner": {"reputation": 1045, "user_id": 1258361, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ce20935b2cb15f6605994899106c1b2a?s=128&d=identicon&r=PG", "display_name": "user1258361", "link": "https://stackoverflow.com/users/1258361/user1258361"}, "is_accepted": false, "score": 0, "last_activity_date": 1490211485, "creation_date": 1490211485, "answer_id": 42961150, "question_id": 42960290, "link": "https://stackoverflow.com/questions/42960290/3-1000000000-overflows-as-an-int-but-the-variable-is-long-long-why/42961150#42961150", "title": "3 * 1000000000 overflows as an int, but the variable is long long. Why?", "body": "<p>Most programming languages rank number types by size. The size/rank/type of a numeric expression is (usually) the type of the highest-ranked value in the expression.</p>\n\n<p>Example: int * double -> double</p>\n\n<p>Your program has:\nlong long int = int * int.</p>\n\n<p>What's happening is that the result of int * int is an int. So your program will multiply first and treat the result in a signed integer (maximum value ~= 2 billion, so it wraps around into negative numbers). Then, this negative value gets stored in the long long int.</p>\n\n<p>300 million (your first multiplication) fits in an int. No problem there. I'm guessing the third works properly because the compiler is smart enough to know that 30 billion doesn't fit in a 32-bit int and automatically gives it a 64-bit long long int.</p>\n"}], "owner": {"reputation": 107, "user_id": 7596235, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OP8ic.jpg?s=128&g=1", "display_name": "John Voss", "link": "https://stackoverflow.com/users/7596235/john-voss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3346, "favorite_count": 0, "closed_date": 1490211780, "accepted_answer_id": 42960407, "answer_count": 4, "score": 7, "last_activity_date": 1614243736, "creation_date": 1490208611, "last_edit_date": 1614243736, "question_id": 42960290, "link": "https://stackoverflow.com/questions/42960290/3-1000000000-overflows-as-an-int-but-the-variable-is-long-long-why", "closed_reason": "Duplicate", "title": "3 * 1000000000 overflows as an int, but the variable is long long. Why?", "body": "<p>I have a simple c++ app that performs the following calculations</p>\n\n<pre><code>long long calcOne = 3 * 100000000;     // 3e8, essentially\nlong long calcTwo = 3 * 1000000000;    // 3e9, essentially\nlong long calcThree = 3 * 10000000000; // 3e10, essentially\n</code></pre>\n\n<p>If I write the result of each calculation I get the following output:</p>\n\n<pre><code>calcOne = 300000000\ncalcTwo = -1294967296\ncalcThree = 30000000000\n</code></pre>\n\n<p>So why does the second calculation fail? As far as I can tell it is within the limits of a long long type (calcThree was larger...).</p>\n\n<p>I am using Visual Studio 2015 on Windows 10. Thanks in advance.</p>\n"}, {"tags": ["c++", "arrays", "pointers", "parameter-passing", "pass-by-value"], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 1470296, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/gYfCn.jpg?s=128&g=1", "display_name": "Marke", "link": "https://stackoverflow.com/users/1470296/marke"}, "edited": false, "score": 1, "creation_date": 1490212145, "post_id": 42960774, "comment_id": 73016887, "body": "Wow thank you! I feel stupid not noticing that, I was focused on pointers because I don&#39;t know a whole a lot about them"}, {"owner": {"reputation": 186, "user_id": 4228463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/um2cb.jpg?s=128&g=1", "display_name": "Haris Gu\u0161i\u0107", "link": "https://stackoverflow.com/users/4228463/haris-gu%c5%a1i%c4%87"}, "reply_to_user": {"reputation": 179, "user_id": 1470296, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/gYfCn.jpg?s=128&g=1", "display_name": "Marke", "link": "https://stackoverflow.com/users/1470296/marke"}, "edited": false, "score": 0, "creation_date": 1490212788, "post_id": 42960774, "comment_id": 73017264, "body": "It&#39;s ok, it happens to all of us :)"}], "tags": [], "owner": {"reputation": 186, "user_id": 4228463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/um2cb.jpg?s=128&g=1", "display_name": "Haris Gu\u0161i\u0107", "link": "https://stackoverflow.com/users/4228463/haris-gu%c5%a1i%c4%87"}, "is_accepted": true, "score": 2, "last_activity_date": 1490210240, "creation_date": 1490210240, "answer_id": 42960774, "question_id": 42960281, "link": "https://stackoverflow.com/questions/42960281/change-array-value-from-another-class-in-c/42960774#42960774", "title": "Change array value from another class in C++", "body": "<p>You are getting the error because H is null.</p>\n\n<p>The mistake is in the Heap::initialize(Element, int) method.\nYou are assigning the local variable H of the Heap object you are calling the method in, instead of the object you are returning.</p>\n\n<pre><code>Heap Heap::initialize(int n){\n    H = new Element[n]; // You are assigning H for the current heap object\n    Heap h; // Here you are creating a new Heap object\n    h.capacity = n; \n    h.size = 0;\n    return h; // You haven't assigned h.H\n}\n</code></pre>\n\n<p>Why are you creating a new Heap object and returning it?\nYou can make the initialize method a void, like this:</p>\n\n<pre><code>void Heap::initialize(int n) {\n    H = new Element[n];\n    capacity = n;\n    size = 0;\n}\n</code></pre>\n\n<p>Or if you need to return a new Heap object you can do it like this:</p>\n\n<pre><code>Heap Heap::initialize(int n) {\n    Heap h;\n    h.H = new Element[n];\n    h.capacity = n; \n    h.size = 0;\n    return h; // You have assigned h.H\n}\n</code></pre>\n\n<p>Hope this was helpful.</p>\n"}], "owner": {"reputation": 179, "user_id": 1470296, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/gYfCn.jpg?s=128&g=1", "display_name": "Marke", "link": "https://stackoverflow.com/users/1470296/marke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1391, "favorite_count": 0, "accepted_answer_id": 42960774, "answer_count": 1, "score": 0, "last_activity_date": 1490210240, "creation_date": 1490208582, "question_id": 42960281, "link": "https://stackoverflow.com/questions/42960281/change-array-value-from-another-class-in-c", "title": "Change array value from another class in C++", "body": "<p>I'm getting Segmentation Fault error.  I'm fairly new to C++ so not really familiar with pointers and other such things.  This seems to be a fundamental aspect but i can't seem to figure it out, I've spent countless hours on it. </p>\n\n<p>I have 5 files element.h, element.cpp, heap.h, heap.cpp, main.cpp </p>\n\n<p>error occurs on the line </p>\n\n<blockquote>\n  <p>h.setElements(e,i);</p>\n</blockquote>\n\n<p>Which is a function in Heap.cpp</p>\n\n<p>I know it has something to do with arrays</p>\n\n<p>MAIN.CPP</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"heap.h\"\n#include \"element.h\"\nusing namespace std;\n\nint main(){\n  Heap h;\n  h = h.initialize(3);\n\n  for(int i=0;i&lt;h.getCapacity(); ++i){\n    Element e;\n    e.setKey(i);\n    h.setElements(e,i); // Error occurs here\n}\n\n   h.printHeap(h);\n   return 0;\n}\n</code></pre>\n\n<p>HEAP.H</p>\n\n<pre><code>#ifndef heap_h\n#define heap_h\n#include \"element.h\"\n#include &lt;iostream&gt;\nusing namespace std;\n\nclass Heap {\n public:\n\n\n    Element* getElements();\n    void setElements(Element e,int index);\n    Heap initialize(int n);\n    void printHeap(Heap heap);\n\n\n  private:\n       int capacity;\n       int size;\n       Element* H;\n  };\n\n\n  #endif\n</code></pre>\n\n<p>HEAP.CPP</p>\n\n<pre><code>#include \"heap.h\"\n\n\nHeap Heap::initialize(int n){\n  H = new Element[n];\n  Heap h;\n  h.capacity = n;\n  h.size = 0;\n  return h;\n}\n\n\nvoid Heap::printHeap(Heap heap){\n    for(int i=0;i&lt;heap.capacity;++i){\n      cout &lt;&lt; \"Element \" &lt;&lt; i &lt;&lt; \" = \" &lt;&lt; H[i].getKey() &lt;&lt; endl;\n    }\n}\n\n\n void Heap::setCapacity(int nCapacity ) {\n   capacity = nCapacity;\n }\n\n int Heap::getCapacity(void) {\n    return capacity;\n }\n\nvoid Heap::setSize(int nSize ) {\n    size = nSize;\n}\n\n int Heap::getSize(void) {\n    return size;\n }\n Element* Heap::getElements(void){\n     return H;\n  }\n void Heap::setElements(Element e,int index){\n      H[index] = e;\n }\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "compiler-errors", "g++"], "answers": [{"comments": [{"owner": {"reputation": 1074, "user_id": 3560202, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/091b39f1456adeef5a255321f850e27a?s=128&d=identicon&r=PG&f=1", "display_name": "Post Self", "link": "https://stackoverflow.com/users/3560202/post-self"}, "edited": false, "score": 0, "creation_date": 1490210383, "post_id": 42960717, "comment_id": 73015868, "body": "Weird how this bug persisted so long. Thanks for <code>puts</code>, by the way. I have  implemented my own version of that up to now!"}, {"owner": {"reputation": 1074, "user_id": 3560202, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/091b39f1456adeef5a255321f850e27a?s=128&d=identicon&r=PG&f=1", "display_name": "Post Self", "link": "https://stackoverflow.com/users/3560202/post-self"}, "edited": false, "score": 0, "creation_date": 1490210448, "post_id": 42960717, "comment_id": 73015916, "body": "A bit off topic: Can I force <code>Joined</code> to call a method of <code>Base</code>? Or do I have to do it manually?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 1074, "user_id": 3560202, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/091b39f1456adeef5a255321f850e27a?s=128&d=identicon&r=PG&f=1", "display_name": "Post Self", "link": "https://stackoverflow.com/users/3560202/post-self"}, "edited": false, "score": 0, "creation_date": 1490211182, "post_id": 42960717, "comment_id": 73016305, "body": "@kim366 Oh, you mean a regular method, after construction? You&#39;d have to do that manually, but do keep in mind that you have multiple inheritance, so you have two <code>Base</code> instances for which you might need to do that."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": true, "score": 1, "last_activity_date": 1490210042, "creation_date": 1490210042, "answer_id": 42960717, "question_id": 42960280, "link": "https://stackoverflow.com/questions/42960280/c3881-in-visual-studio-while-it-compiles-without-any-problems-in-g/42960717#42960717", "title": "C3881 in Visual Studio, while it compiles without any problems in g++", "body": "<p>This is a GCC bug. What it's doing cannot work, even without checking the standard.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct Base {\n    Base() { puts(\"Base()\"); }\n    Base(int) { puts(\"Base(int)\"); }\n};\n\nstruct DerOne : Base { };\n\nstruct DerTwo : Base { };\n\nstruct Joined : DerOne, DerTwo {\n    using Base::Base;\n};\n\nint main() {\n    Joined j {4};\n}\n</code></pre>\n\n<p>With GCC, this allows a <code>Joined(int)</code> constructor to be created from the <code>Base(int)</code> signature, but it <em>doesn't</em> call the <code>Base(int)</code> implementation (and cannot, because there are no <code>DerOne</code> or <code>DerTwo</code> constructors which would call it), so this ends up printing <code>Base()</code> twice.</p>\n\n<p>clang rejects it just like Visual Studio does.</p>\n"}], "owner": {"reputation": 1074, "user_id": 3560202, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/091b39f1456adeef5a255321f850e27a?s=128&d=identicon&r=PG&f=1", "display_name": "Post Self", "link": "https://stackoverflow.com/users/3560202/post-self"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 42960717, "answer_count": 1, "score": 1, "last_activity_date": 1490210042, "creation_date": 1490208581, "question_id": 42960280, "link": "https://stackoverflow.com/questions/42960280/c3881-in-visual-studio-while-it-compiles-without-any-problems-in-g", "title": "C3881 in Visual Studio, while it compiles without any problems in g++", "body": "<pre><code>struct Base\n{\n};\n\nstruct DerOne : Base\n{\n};\n\nstruct DerTwo : Base\n{\n};\n\nstruct Joined : DerOne, DerTwo\n{\n    using Base::Base;\n};\n\nint main()\n{\n    Joined j;\n    return 0;\n}\n</code></pre>\n\n<p>produces </p>\n\n<blockquote>\n  <p>Error C3881 can only inherit constructor from direct base </p>\n</blockquote>\n\n<p>in Visual Studio, while it works fine in g++. Is this code correct?</p>\n"}, {"tags": ["android", "c++", "image", "yuv", "libyuv"], "comments": [{"owner": {"reputation": 7020, "user_id": 4822566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HlNVB.png?s=128&g=1", "display_name": "Alex Taylor", "link": "https://stackoverflow.com/users/4822566/alex-taylor"}, "edited": false, "score": 0, "creation_date": 1490216622, "post_id": 42960251, "comment_id": 73019361, "body": "For what it&#39;s worth, a full green YUV image probably means your <code>byteArray</code> is full of 0."}, {"owner": {"reputation": 9491, "user_id": 5631145, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lgSfD.jpg?s=128&g=1", "display_name": "Francisco Durdin Garcia", "link": "https://stackoverflow.com/users/5631145/francisco-durdin-garcia"}, "reply_to_user": {"reputation": 7020, "user_id": 4822566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HlNVB.png?s=128&g=1", "display_name": "Alex Taylor", "link": "https://stackoverflow.com/users/4822566/alex-taylor"}, "edited": false, "score": 0, "creation_date": 1490216936, "post_id": 42960251, "comment_id": 73019532, "body": "it is not, the data of the 3 input and output bytearrays have info"}, {"owner": {"reputation": 3419, "user_id": 2401265, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/16369b0c7c1f0fff22ff47be0a22289a?s=128&d=identicon&r=PG", "display_name": "gmetax", "link": "https://stackoverflow.com/users/2401265/gmetax"}, "edited": false, "score": 0, "creation_date": 1490862719, "post_id": 42960251, "comment_id": 73304874, "body": "@FranciscoDurdinGarcia have you tried my answer ?"}, {"owner": {"reputation": 9491, "user_id": 5631145, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lgSfD.jpg?s=128&g=1", "display_name": "Francisco Durdin Garcia", "link": "https://stackoverflow.com/users/5631145/francisco-durdin-garcia"}, "reply_to_user": {"reputation": 3419, "user_id": 2401265, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/16369b0c7c1f0fff22ff47be0a22289a?s=128&d=identicon&r=PG", "display_name": "gmetax", "link": "https://stackoverflow.com/users/2401265/gmetax"}, "edited": false, "score": 0, "creation_date": 1490864812, "post_id": 42960251, "comment_id": 73306284, "body": "@gmetax yes, I tried, and the result is the same. Is not about the output frame, I think is more about the format of that byteArray not conform well with <code>I420Scale</code> method"}, {"owner": {"reputation": 3419, "user_id": 2401265, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/16369b0c7c1f0fff22ff47be0a22289a?s=128&d=identicon&r=PG", "display_name": "gmetax", "link": "https://stackoverflow.com/users/2401265/gmetax"}, "edited": false, "score": 0, "creation_date": 1490866751, "post_id": 42960251, "comment_id": 73307649, "body": "have you tried to print the i420_input_frame.data to check with the  <a href=\"http://rawpixels.net/\" rel=\"nofollow noreferrer\">rawpixels.net</a> that you have the input correct?"}, {"owner": {"reputation": 9491, "user_id": 5631145, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lgSfD.jpg?s=128&g=1", "display_name": "Francisco Durdin Garcia", "link": "https://stackoverflow.com/users/5631145/francisco-durdin-garcia"}, "edited": false, "score": 0, "creation_date": 1490866829, "post_id": 42960251, "comment_id": 73307706, "body": "Yes, the image that I posted on the question(the good one) is the input frame exported to YUV and visualized in rawpixels.net"}, {"owner": {"reputation": 3419, "user_id": 2401265, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/16369b0c7c1f0fff22ff47be0a22289a?s=128&d=identicon&r=PG", "display_name": "gmetax", "link": "https://stackoverflow.com/users/2401265/gmetax"}, "edited": false, "score": 0, "creation_date": 1490867250, "post_id": 42960251, "comment_id": 73308051, "body": "for debug I would print   <code>i420_input_frame.data</code> <code>i420_input_frame.y</code> <code>i420_input_frame.u</code> <code>i420_input_frame.v</code>  before <code>&#47;&#47;Generate output frame</code> just to be sure that all the pointers are correct"}], "answers": [{"tags": [], "owner": {"reputation": 3419, "user_id": 2401265, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/16369b0c7c1f0fff22ff47be0a22289a?s=128&d=identicon&r=PG", "display_name": "gmetax", "link": "https://stackoverflow.com/users/2401265/gmetax"}, "is_accepted": false, "score": 1, "last_activity_date": 1490789762, "last_edit_date": 1490789762, "creation_date": 1490777522, "answer_id": 43088738, "question_id": 42960251, "link": "https://stackoverflow.com/questions/42960251/problems-when-scaling-a-yuv-image-using-libyuv-library/43088738#43088738", "title": "Problems when scaling a YUV image using libyuv library", "body": "<p>You can try that code that it uses the <code>y_size</code> instead of full size of your array. </p>\n\n<pre><code>    ...\n    //Get input and output length\n    int input_size = env-&gt;GetArrayLength(yuvByteArray_);\n    int y_size = src_width * src_height;\n    int out_size = out_height * out_width;\n\n    //Generate input frame\n    i420_input_frame.width = src_width;\n    i420_input_frame.height = src_height;\n    i420_input_frame.data = (uint8_t *) yuvByteArray;\n    i420_input_frame.y = i420_input_frame.data;\n    i420_input_frame.u = i420_input_frame.y + y_size;\n    i420_input_frame.v = i420_input_frame.u + y_size / 4;\n\n    //Generate output frame\n    free(i420_output_frame.data);\n    i420_output_frame.width = out_width;\n    i420_output_frame.height = out_height;\n    i420_output_frame.data = new unsigned char[out_size * 3 / 2];\n    i420_output_frame.y = i420_output_frame.data;\n    i420_output_frame.u = i420_output_frame.y + out_size;\n    i420_output_frame.v = i420_output_frame.u + out_size / 4;\n    ...\n</code></pre>\n\n<p>probably your code is based on that <a href=\"https://github.com/begeekmyfriend/yasea/blob/master/library/src/main/libenc/jni/libenc.cc\" rel=\"nofollow noreferrer\">https://github.com/begeekmyfriend/yasea/blob/master/library/src/main/libenc/jni/libenc.cc</a> and according to that code you have to use the <code>y_size</code></p>\n"}, {"comments": [{"owner": {"reputation": 3419, "user_id": 2401265, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/16369b0c7c1f0fff22ff47be0a22289a?s=128&d=identicon&r=PG", "display_name": "gmetax", "link": "https://stackoverflow.com/users/2401265/gmetax"}, "edited": false, "score": 0, "creation_date": 1490792616, "post_id": 43094123, "comment_id": 73269681, "body": "actually you have posted your answer 37 minutes after I edited the part i was wrong :)"}], "tags": [], "owner": {"reputation": 4208, "user_id": 2617694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c893cae0d46067a287e0dfaca01127?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/2617694/dave"}, "is_accepted": false, "score": 0, "last_activity_date": 1490792042, "creation_date": 1490792042, "answer_id": 43094123, "question_id": 42960251, "link": "https://stackoverflow.com/questions/42960251/problems-when-scaling-a-yuv-image-using-libyuv-library/43094123#43094123", "title": "Problems when scaling a YUV image using libyuv library", "body": "<p>gmetax is almost correct.</p>\n\n<p>You are using the size of the entire array where you should be using the size of the Y component, which is <code>src_width * src_height</code>.</p>\n\n<p>gmetax's answer is wrong in that he has put <code>y_size</code> in place of <code>out_size</code> when defining the output frame. The correct code snippet, I believe, would look like:</p>\n\n<pre><code>//Get input and output length\nint input_size = env-&gt;GetArrayLength(yuvByteArray_);\nint y_size = src_width * src_height;\nint out_size = out_height * out_width;\n\n//Generate input frame\ni420_input_frame.width = src_width;\ni420_input_frame.height = src_height;\ni420_input_frame.data = (uint8_t *) yuvByteArray;\ni420_input_frame.y = i420_input_frame.data;\ni420_input_frame.u = i420_input_frame.y + y_size;\ni420_input_frame.v = i420_input_frame.u + y_size / 4;\n\n//Generate output frame\nfree(i420_output_frame.data);\ni420_output_frame.width = out_width;\ni420_output_frame.height = out_height;\ni420_output_frame.data = new unsigned char[out_size * 3 / 2];\ni420_output_frame.y = i420_output_frame.data;\ni420_output_frame.u = i420_output_frame.y + out_size;\ni420_output_frame.v = i420_output_frame.u + out_size / 4;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3419, "user_id": 2401265, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/16369b0c7c1f0fff22ff47be0a22289a?s=128&d=identicon&r=PG", "display_name": "gmetax", "link": "https://stackoverflow.com/users/2401265/gmetax"}, "edited": false, "score": 0, "creation_date": 1491313012, "post_id": 43191372, "comment_id": 73489148, "body": "so you are suggesting to him to use the same size (y size) as we have already suggested (me and Dave)"}, {"owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "reply_to_user": {"reputation": 3419, "user_id": 2401265, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/16369b0c7c1f0fff22ff47be0a22289a?s=128&d=identicon&r=PG", "display_name": "gmetax", "link": "https://stackoverflow.com/users/2401265/gmetax"}, "edited": false, "score": 0, "creation_date": 1491314719, "post_id": 43191372, "comment_id": 73490575, "body": "@gmetax I found it important to note that the actual frame size should be used, and to provide a method to calculate it from the size of the array. The method you propose to calculate it is different, but what is the correct solution depends on the needs of the OP. Be patient."}], "tags": [], "owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "is_accepted": false, "score": 1, "last_activity_date": 1491260313, "last_edit_date": 1491260313, "creation_date": 1491242535, "answer_id": 43191372, "question_id": 42960251, "link": "https://stackoverflow.com/questions/42960251/problems-when-scaling-a-yuv-image-using-libyuv-library/43191372#43191372", "title": "Problems when scaling a YUV image using libyuv library", "body": "<p>You have an issue with the input size of the frame:</p>\n\n<p>It should be:</p>\n\n<pre><code>int input_array_size = env-&gt;GetArrayLength(yuvByteArray_);\nint input_size = input_array_size * 2 / 3; //This is the frame size\n</code></pre>\n\n<p>For example, If you have a Frame that is 6x4</p>\n\n<p>Chanel <strong>y</strong> size: 6*4 = 24</p>\n\n<pre><code> 1 2 3 4 5 6\n _ _ _ _ _ _\n|_|_|_|_|_|_| 1\n|_|_|_|_|_|_| 2\n|_|_|_|_|_|_| 3\n|_|_|_|_|_|_| 4\n</code></pre>\n\n<p>Chanel <strong>u</strong> size: 3*2 = 6</p>\n\n<pre><code>  1   2   3 \n _ _ _ _ _ _\n|   |   |   | \n|_ _|_ _|_ _| 1\n|   |   |   | \n|_ _|_ _|_ _| 2\n</code></pre>\n\n<p>Chanel <strong>v</strong> size: 3*2 = 6</p>\n\n<pre><code>  1   2   3 \n _ _ _ _ _ _\n|   |   |   | \n|_ _|_ _|_ _| 1\n|   |   |   | \n|_ _|_ _|_ _| 2\n</code></pre>\n\n<p>Array Size = 6*4+3*2+3*2 = 36<br>\nBut actual Frame Size = channel <strong>y</strong> Size = 36 * 2 / 3 = 24</p>\n"}, {"tags": [], "owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1493855978, "last_edit_date": 1493855978, "creation_date": 1493855379, "answer_id": 43771762, "question_id": 42960251, "link": "https://stackoverflow.com/questions/42960251/problems-when-scaling-a-yuv-image-using-libyuv-library/43771762#43771762", "title": "Problems when scaling a YUV image using libyuv library", "body": "<p>You are trying to scale your YUV422 image as if it was YUV420, no wonder the colors are all messed up. First of all you need to figure out what exactly format of your YUV input buffer. From documentation of <a href=\"https://developer.android.com/reference/android/graphics/ImageFormat.html#YUV_422_888\" rel=\"nofollow noreferrer\">YUV_422_888</a> it looks like it may represent planar as well as interleaved formats (if pixel stride is not 1). From your results it looks like your source is planar and processing of Y plane is ok, but your error is in handling U and V planes. To get scaling right:</p>\n\n<ul>\n<li>You have to figure out if your <code>U</code> and <code>V</code> planes are interleaved or\nplanar. Most likely they are planar as well.</li>\n<li>Use <code>ScalePlane</code> from libyuv to scale <code>U</code> and <code>V</code> separately. Perhaps\nif you step into <code>I420Scale</code> it calls <code>ScalePlane</code> for individual\nplanes. Do the same, but use correct linesizes for your <code>U</code> and <code>V</code>\nplanes (each is twice larger than what I420Scale expects).</li>\n</ul>\n\n<p>Some tips how to figure out if you have planar or interleaved <code>U</code> and <code>V</code>: try to skip scaling of your image and saving it, to ensure that you get correct result (identical to the source). Then try to zero out <code>U</code> frame or <code>V</code> frame and see what you get. If <code>U</code> and <code>V</code> are planar and you memset <code>U</code> plane to zero you should see entire picture changing color. If they are interleaved you'll get half of picture changing and the other one staying the same. Same way you can check your assumptions about sizes, linesizes, and offsets of your planes. Once you are sure about your YUV format and layout you can scale individual planes if your input is planar, or if you have interleaved input first you need to deinterleave planes and then scale them.</p>\n\n<p>Alternatively, you can use libswscale from ffmpeg/libav and try different formats to find correct one and then use libyuv.</p>\n"}, {"tags": [], "owner": {"reputation": 9491, "user_id": 5631145, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lgSfD.jpg?s=128&g=1", "display_name": "Francisco Durdin Garcia", "link": "https://stackoverflow.com/users/5631145/francisco-durdin-garcia"}, "is_accepted": true, "score": 0, "last_activity_date": 1542274658, "creation_date": 1542274658, "answer_id": 53316383, "question_id": 42960251, "link": "https://stackoverflow.com/questions/42960251/problems-when-scaling-a-yuv-image-using-libyuv-library/53316383#53316383", "title": "Problems when scaling a YUV image using libyuv library", "body": "<p>The green images was caused by one of the planes being full of 0's. This means that one of the planes was empty. This was caused because I was converting from YUV NV21 instead of YUV I420. The images from the framework of camera in android comes as I420 YUVs.</p>\n\n<p>We need to convert them to YUV I420 to work properly with Libyuv. After that we can start using the multiple operations that the library offer you. Like rotate, scale etc.</p>\n\n<p>Here is the snipped about how the scaling method looks:</p>\n\n<pre><code>JNIEXPORT jint JNICALL\nJava_com_aa_project_images_yuv_myJNIcl_scaleI420(JNIEnv *env, jclass type,\n                                                 jobject srcBufferY,\n                                                 jobject srcBufferU,\n                                                 jobject srcBufferV,\n                                                 jint srcWidth, jint srcHeight,\n                                                 jobject dstBufferY,\n                                                 jobject dstBufferU,\n                                                 jobject dstBufferV,\n                                                 jint dstWidth, jint dstHeight,\n                                                 jint filterMode) {\n\n    const uint8_t *srcY = static_cast&lt;uint8_t *&gt;(env-&gt;GetDirectBufferAddress(srcBufferY));\n    const uint8_t *srcU = static_cast&lt;uint8_t *&gt;(env-&gt;GetDirectBufferAddress(srcBufferU));\n    const uint8_t *srcV = static_cast&lt;uint8_t *&gt;(env-&gt;GetDirectBufferAddress(srcBufferV));\n    uint8_t *dstY = static_cast&lt;uint8_t *&gt;(env-&gt;GetDirectBufferAddress(dstBufferY));\n    uint8_t *dstU = static_cast&lt;uint8_t *&gt;(env-&gt;GetDirectBufferAddress(dstBufferU));\n    uint8_t *dstV = static_cast&lt;uint8_t *&gt;(env-&gt;GetDirectBufferAddress(dstBufferV));\n\n    return libyuv::I420Scale(srcY, srcWidth,\n                             srcU, srcWidth / 2,\n                             srcV, srcWidth / 2,\n                             srcWidth, srcHeight,\n                             dstY, dstWidth,\n                             dstU, dstWidth / 2,\n                             dstV, dstWidth / 2,\n                             dstWidth, dstHeight,\n                             static_cast&lt;libyuv::FilterMode&gt;(filterMode));\n}\n</code></pre>\n"}], "owner": {"reputation": 9491, "user_id": 5631145, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lgSfD.jpg?s=128&g=1", "display_name": "Francisco Durdin Garcia", "link": "https://stackoverflow.com/users/5631145/francisco-durdin-garcia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3485, "favorite_count": 1, "accepted_answer_id": 53316383, "answer_count": 5, "score": 27, "last_activity_date": 1542274658, "creation_date": 1490208507, "last_edit_date": 1513138604, "question_id": 42960251, "link": "https://stackoverflow.com/questions/42960251/problems-when-scaling-a-yuv-image-using-libyuv-library", "title": "Problems when scaling a YUV image using libyuv library", "body": "<p>I'm developing a camera app based on <code>Camera API 2</code> and I have found several problems using the <a href=\"https://chromium.googlesource.com/libyuv/libyuv/\" rel=\"nofollow noreferrer\">libyuv</a>.\nI want to convert <code>YUV_420_888</code> images retrieved from a ImageReader, but I'm having some problems with scaling in a reprocessable surface.</p>\n\n<p>In essence: Images come out with tones of green instead of having the corresponding tones (I'm exporting the .yuv files and checking them using <a href=\"http://rawpixels.net/\" rel=\"nofollow noreferrer\">http://rawpixels.net/</a>).</p>\n\n<p>You can see an input example here: <a href=\"https://i.stack.imgur.com/j0zZj.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j0zZj.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>And what I get after I perform scaling: <a href=\"https://i.stack.imgur.com/Ws9Rt.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ws9Rt.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I think I am doing something wrong with strides, or providing an invalid YUV format (maybe I have to transform the image to another format?). However, I can't figure out where is the error since I don't know how to correlate the green color to the scaling algorithm.</p>\n\n<p>This is the conversion code I am using, you can ignore the return NULL as there is further processing that is not related to the problem.</p>\n\n<pre><code>#include &lt;jni.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;android/log.h&gt;\n#include &lt;inc/libyuv/scale.h&gt;\n#include &lt;inc/libyuv.h&gt;\n#include &lt;stdio.h&gt;\n\n\n#define  LOG_TAG    \"libyuv-jni\"\n\n#define unused(x) UNUSED_ ## x __attribute__((__unused__))\n#define  LOGD(...)  __android_log_print(ANDROID_LOG_DEBUG, LOG_TAG, __VA_ARGS__)\n#define  LOGE(...)  __android_log_print(ANDROID_LOG_ERROR, LOG_TAG, __VA_ARGS_)\n\nstruct YuvFrame {\n    int width;\n    int height;\n    uint8_t *data;\n    uint8_t *y;\n    uint8_t *u;\n    uint8_t *v;\n};\n\nstatic struct YuvFrame i420_input_frame;\nstatic struct YuvFrame i420_output_frame;\n\nextern \"C\" {\n\nJNIEXPORT jbyteArray JNICALL\nJava_com_android_camera3_camera_hardware_session_output_photo_yuv_YuvJniInterface_scale420YuvByteArray(\n        JNIEnv *env, jclass /*clazz*/, jbyteArray yuvByteArray_, jint src_width, jint src_height,\n        jint out_width, jint out_height) {\n\n    jbyte *yuvByteArray = env-&gt;GetByteArrayElements(yuvByteArray_, NULL);\n\n    //Get input and output length\n    int input_size = env-&gt;GetArrayLength(yuvByteArray_);\n    int out_size = out_height * out_width;\n\n    //Generate input frame\n    i420_input_frame.width = src_width;\n    i420_input_frame.height = src_height;\n    i420_input_frame.data = (uint8_t *) yuvByteArray;\n    i420_input_frame.y = i420_input_frame.data;\n    i420_input_frame.u = i420_input_frame.y + input_size;\n    i420_input_frame.v = i420_input_frame.u + input_size / 4;\n\n    //Generate output frame\n    free(i420_output_frame.data);\n    i420_output_frame.width = out_width;\n    i420_output_frame.height = out_height;\n    i420_output_frame.data = new unsigned char[out_size * 3 / 2];\n    i420_output_frame.y = i420_output_frame.data;\n    i420_output_frame.u = i420_output_frame.y + out_size;\n    i420_output_frame.v = i420_output_frame.u + out_size / 4;\n    libyuv::FilterMode mode = libyuv::FilterModeEnum::kFilterBilinear;\n\n    int result = I420Scale(i420_input_frame.y, i420_input_frame.width,\n                           i420_input_frame.u, i420_input_frame.width / 2,\n                           i420_input_frame.v, i420_input_frame.width / 2,\n                           i420_input_frame.width, i420_input_frame.height,\n                           i420_output_frame.y, i420_output_frame.width,\n                           i420_output_frame.u, i420_output_frame.width / 2,\n                           i420_output_frame.v, i420_output_frame.width / 2,\n                           i420_output_frame.width, i420_output_frame.height,\n                           mode);\n    LOGD(\"Image result %d\", result);\n    env-&gt;ReleaseByteArrayElements(yuvByteArray_, yuvByteArray, 0);\n    return NULL;\n}\n</code></pre>\n"}, {"tags": ["c++", "macos", "visual-studio"], "comments": [{"owner": {"reputation": 3612, "user_id": 2422013, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/VwKps.jpg?s=128&g=1", "display_name": "AStopher", "link": "https://stackoverflow.com/users/2422013/astopher"}, "edited": false, "score": 0, "creation_date": 1490207857, "post_id": 42960056, "comment_id": 73014442, "body": "You create a new solution/project, not choose it as a file type (unless I&#39;m missing something here)."}, {"owner": {"reputation": 679, "user_id": 5947872, "user_type": "registered", "accept_rate": 54, "profile_image": "https://lh6.googleusercontent.com/-jgsMcinw23E/AAAAAAAAAAI/AAAAAAAAACQ/SWL6aicRz2A/photo.jpg?sz=128", "display_name": "Dylan Harness", "link": "https://stackoverflow.com/users/5947872/dylan-harness"}, "reply_to_user": {"reputation": 3612, "user_id": 2422013, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/VwKps.jpg?s=128&g=1", "display_name": "AStopher", "link": "https://stackoverflow.com/users/2422013/astopher"}, "edited": false, "score": 0, "creation_date": 1490207932, "post_id": 42960056, "comment_id": 73014486, "body": "@cybermonkey it is not available as a solution type (<a href=\"https://puu.sh/uUSUc/8a7065d111.png\" rel=\"nofollow noreferrer\">puu.sh/uUSUc/8a7065d111.png</a>) Is there a way to add solution types?"}], "answers": [{"tags": [], "owner": {"reputation": 679, "user_id": 5947872, "user_type": "registered", "accept_rate": 54, "profile_image": "https://lh6.googleusercontent.com/-jgsMcinw23E/AAAAAAAAAAI/AAAAAAAAACQ/SWL6aicRz2A/photo.jpg?sz=128", "display_name": "Dylan Harness", "link": "https://stackoverflow.com/users/5947872/dylan-harness"}, "is_accepted": true, "score": 1, "last_activity_date": 1490403978, "creation_date": 1490403978, "answer_id": 43011407, "question_id": 42960056, "link": "https://stackoverflow.com/questions/42960056/is-it-possible-to-create-c-project-in-the-new-visual-studio-code-for-mac/43011407#43011407", "title": "Is it possible to create c++ project in the new visual studio code for mac?", "body": "<p>I'm not really sure why people voted this down. The correct answer is <strong>no, you cannot create or run c++ projects in Visual Studio for macOS beta at this time.</strong></p>\n"}], "owner": {"reputation": 679, "user_id": 5947872, "user_type": "registered", "accept_rate": 54, "profile_image": "https://lh6.googleusercontent.com/-jgsMcinw23E/AAAAAAAAAAI/AAAAAAAAACQ/SWL6aicRz2A/photo.jpg?sz=128", "display_name": "Dylan Harness", "link": "https://stackoverflow.com/users/5947872/dylan-harness"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 43011407, "answer_count": 1, "score": 1, "last_activity_date": 1490403978, "creation_date": 1490207778, "last_edit_date": 1490207984, "question_id": 42960056, "link": "https://stackoverflow.com/questions/42960056/is-it-possible-to-create-c-project-in-the-new-visual-studio-code-for-mac", "title": "Is it possible to create c++ project in the new visual studio code for mac?", "body": "<p>Seems to be missing as a file type in new files, do I need to add some kind of extension or something? I know I can create .cpp files but I'm not sure how to build and run them with the gcc once I do. Documentation seems to be difficult to find, as the web is cluttered with VSCode docs, and VS for Windows docs.</p>\n\n<p><strong>Edit</strong>\nI know you normally select it as a solution type. It is not available as a solution type.</p>\n"}, {"tags": ["c++", "vector", "constructor"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1490207651, "post_id": 42960006, "comment_id": 73014330, "body": "It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming.  Further reading: <b><a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a></b>"}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1490207991, "post_id": 42960006, "comment_id": 73014520, "body": "How about <code>using CustomVector = std::vector&lt;unsigned short int&gt;;</code> ;)"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1490208048, "post_id": 42960006, "comment_id": 73014557, "body": "It appears he needs <code>using colorTuple = std::array&lt;unsigned short int&gt;;</code>, and then <code>std::array&lt;colorTuple&gt; cols;</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 4, "creation_date": 1490208121, "post_id": 42960006, "comment_id": 73014595, "body": "If you only and always have 3 elements, consider <code>std::array</code>; however a <code>class Colour</code> with <code>red</code>, <code>green</code> and <code>blue</code> members may be easier to read."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 2, "creation_date": 1490208540, "post_id": 42960006, "comment_id": 73014833, "body": "Your code is incomplete; in particular, it seems to be missing a <code>main()</code> function. Please <a href=\"https://stackoverflow.com/posts/42960006/edit\">edit</a> your code so it&#39;s a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your problem, then we can try to reproduce and solve it. You should also read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}], "answers": [{"tags": [], "owner": {"reputation": 738, "user_id": 7711045, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HrhBw.png?s=128&g=1", "display_name": "Alejandro C De Baca", "link": "https://stackoverflow.com/users/7711045/alejandro-c-de-baca"}, "is_accepted": false, "score": 0, "last_activity_date": 1490208154, "last_edit_date": 1490208154, "creation_date": 1490207885, "answer_id": 42960084, "question_id": 42960006, "link": "https://stackoverflow.com/questions/42960006/c-vector-assignment-in-constructor-error/42960084#42960084", "title": "C++ : Vector assignment in constructor error", "body": "<p>Your vectors have no capacity. Vectors don't automatically resize when using the subscript operator. You can call the resize() method on colA and colB, and pass in one greater than the max of {RED,GREEN,BLUE} before setting the values. For example, if BLUE is the largest in your enum:</p>\n\n<pre><code>Corners::Corners() {\n    colA.resize(BLUE + 1);\n    colB.resize(BLUE + 1);\n\n    colA[RED] = 5;\n    colA[GREEN] = 5;\n    colA[BLUE] = 5;\n\n    colB[RED] = 31;\n    colB[GREEN] = 63;\n    colB[BLUE] = 31;\n\n    colC=colA;\n    colD=colB;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1490208354, "post_id": 42960182, "comment_id": 73014735, "body": "Your member initialization list is needlessly complex, you are invoking the <code>vector</code> copy constructor when you should be using the initialization constructor. You can simplify the list to just this: <code>: colA(3), colB(3)</code> (<code>colC</code> and <code>colD</code> are assigned in the body and so don&#39;t need explicit construction, and there is no <code>colE</code> declared)."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 2, "creation_date": 1490208646, "post_id": 42960182, "comment_id": 73014898, "body": "<code>Corners::Corners() : colA{5, 5, 5}, colB{31,63,31}, colC(colA), colD(colD) {}</code>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1490209490, "post_id": 42960182, "comment_id": 73015361, "body": "Just note that <code>colA{5, 5, 5}, colB{31,63,31}</code> only works in C++11 and later"}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1490209715, "post_id": 42960182, "comment_id": 73015491, "body": "Yes you&#39;re right, but C++ is already 6 years old... Most modern compilers support it."}, {"owner": {"reputation": 111, "user_id": 5251084, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-f7XDjhCO5is/AAAAAAAAAAI/AAAAAAAAAD8/ntDT5GRJSH0/photo.jpg?sz=128", "display_name": "Em Ka", "link": "https://stackoverflow.com/users/5251084/em-ka"}, "edited": false, "score": 0, "creation_date": 1490452483, "post_id": 42960182, "comment_id": 73123430, "body": "Thanks, it fixed the problem"}], "tags": [], "owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "is_accepted": true, "score": 2, "last_activity_date": 1490208906, "last_edit_date": 1490208906, "creation_date": 1490208257, "answer_id": 42960182, "question_id": 42960006, "link": "https://stackoverflow.com/questions/42960006/c-vector-assignment-in-constructor-error/42960182#42960182", "title": "C++ : Vector assignment in constructor error", "body": "<p>the vectors are length 0, so you cannot assign to locations. You first have to initialize their length.</p>\n\n<pre><code>Corners::Corners()\n   : colA(3)\n   , colB(3)\n   , colC(3)\n   , colD(3)\n{\n    colA[RED] = 5;\n    colA[GREEN] = 5;\n    colA[BLUE] = 5;\n\n    colB[RED] = 31;\n    colB[GREEN] = 63;\n    colB[BLUE] = 31;\n\n    colC=colA;\n    colD=colB;\n}\n</code></pre>\n\n<p>Or even like Mooing Duck suggested.</p>\n\n<pre><code>Corners::Corners()\n   : colA{5, 5, 5}\n   , colB{31, 63, 31}\n   , colC(colA)\n   , colD(colB)\n{}\n</code></pre>\n\n<p>.. which could be inlined, like he shows.</p>\n\n<p>but maybe you should switch to <code>std::array&lt;unsigned short int, 3&gt;</code>.\nAnd use <code>using CustomArray=std::array&lt;unsigned short int, 3&gt;;</code> so you don't have to write that long definition every time.</p>\n\n<p>edit: and as user4581301 suggests, even better is:</p>\n\n<pre><code>struct Color {\n    unsigned short int Red;\n    unsigned short int Green;\n    unsigned short int Blue;\n};\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 5251084, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-f7XDjhCO5is/AAAAAAAAAAI/AAAAAAAAAD8/ntDT5GRJSH0/photo.jpg?sz=128", "display_name": "Em Ka", "link": "https://stackoverflow.com/users/5251084/em-ka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 42960182, "answer_count": 2, "score": -1, "last_activity_date": 1490208906, "creation_date": 1490207605, "last_edit_date": 1490208474, "question_id": 42960006, "link": "https://stackoverflow.com/questions/42960006/c-vector-assignment-in-constructor-error", "title": "C++ : Vector assignment in constructor error", "body": "<p>in my program i Have following class:</p>\n\n<pre><code>#ifndef CORNERS_H\n#define CORNERS_H\n\n#include &lt;vector&gt;\n\nclass Corners{\npublic:\n    Corners();\n    Corners( std::vector&lt;unsigned short int&gt;,std::vector&lt;unsigned short int&gt; );\n    Corners( std::vector&lt;unsigned short int&gt;,std::vector&lt;unsigned short int&gt;,\n            std::vector&lt;unsigned short int&gt;, std::vector&lt;unsigned short int&gt; );\n\n    void set2Corners( std::vector&lt;unsigned short int&gt;,std::vector&lt;unsigned short int&gt; );\n    void set4Corners( std::vector&lt;unsigned short int&gt;,std::vector&lt;unsigned short int&gt;,\n            std::vector&lt;unsigned short int&gt;, std::vector&lt;unsigned short int&gt; );\n\n    std::vector&lt;unsigned short int&gt; getA();\n    std::vector&lt;unsigned short int&gt; getB();\n    std::vector&lt;unsigned short int&gt; getC();\n    std::vector&lt;unsigned short int&gt; getD();\n\n\nprivate:\n    std::vector&lt;unsigned short int&gt; colA;\n    std::vector&lt;unsigned short int&gt; colB;\n    std::vector&lt;unsigned short int&gt; colC;\n    std::vector&lt;unsigned short int&gt; colD;\n};\n\n#endif // CORNERS_H\n</code></pre>\n\n<p>Default constructor for this class looks like this:</p>\n\n<pre><code>Corners::Corners(){\n\n    colA[RED] = 5;\n    colA[GREEN] = 5;\n    colA[BLUE] = 5;\n\n    colB[RED] = 31;\n    colB[GREEN] = 63;\n    colB[BLUE] = 31;\n\n    colC=colA;\n    colD=colB;\n\n}\n</code></pre>\n\n<p>RED GREEN BLUE are enums defined in another file.\nFor my whole program, I get no errors when building.\nWhen i want to make instance of the class in my main, for example:</p>\n\n<pre><code>Corners start;\n</code></pre>\n\n<p>When I run the program, it freezes and quits with error \"Segmentation fault\".I have no idea why it is so, does anyone has any idea? </p>\n"}, {"tags": ["c++", "visual-studio"], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 6200616, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/900c8dcb209d48c22041874e1f4bbd54?s=128&d=identicon&r=PG", "display_name": "Ausche", "link": "https://stackoverflow.com/users/6200616/ausche"}, "edited": false, "score": 0, "creation_date": 1490208941, "post_id": 42960172, "comment_id": 73015043, "body": "Thank you, I&#39;m still learning how to make libraries so I wasn&#39;t sure if that was the solution. Is it possible to create dynamic or static link libraries with classes with non-static member-functions though? I need to be able to create modifiable objects from these classes and the tutorials only show static-type member functions."}, {"owner": {"reputation": 86, "user_id": 4347811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xhpHy.jpg?s=128&g=1", "display_name": "Craig K", "link": "https://stackoverflow.com/users/4347811/craig-k"}, "reply_to_user": {"reputation": 139, "user_id": 6200616, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/900c8dcb209d48c22041874e1f4bbd54?s=128&d=identicon&r=PG", "display_name": "Ausche", "link": "https://stackoverflow.com/users/6200616/ausche"}, "edited": false, "score": 0, "creation_date": 1490210105, "post_id": 42960172, "comment_id": 73015725, "body": "@Ausche Yes you can use non-static methods. The examples only used static method for brevity."}, {"owner": {"reputation": 139, "user_id": 6200616, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/900c8dcb209d48c22041874e1f4bbd54?s=128&d=identicon&r=PG", "display_name": "Ausche", "link": "https://stackoverflow.com/users/6200616/ausche"}, "edited": false, "score": 0, "creation_date": 1490210766, "post_id": 42960172, "comment_id": 73016067, "body": "Awesome I&#39;m going to try this out. Thank you!"}], "tags": [], "owner": {"reputation": 86, "user_id": 4347811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xhpHy.jpg?s=128&g=1", "display_name": "Craig K", "link": "https://stackoverflow.com/users/4347811/craig-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1490208234, "last_edit_date": 1495541416, "creation_date": 1490208234, "answer_id": 42960172, "question_id": 42959870, "link": "https://stackoverflow.com/questions/42959870/sharing-classes-within-one-solution/42960172#42960172", "title": "Sharing classes within one solution", "body": "<p>From what you described a class library would be the solution. This would allow you to share your two classes between both projects. In C++ there are two types of class libraries the Static Link Library and the Dynamic Link Library.</p>\n\n<p>Here is a nice answer from a <a href=\"https://stackoverflow.com/questions/2649334/difference-between-static-and-shared-libraries\">previous StackOverflow question</a> which should aid you in determining which type of class library to use.</p>\n\n<p>I have also included two separate links from Microsoft, since you tagged your post with Visual Studio, on how to create and use a library of each type.</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/ms235627.aspx\" rel=\"nofollow noreferrer\">MSDN: Static Link Library Tutorial</a></p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/ms235636.aspx\" rel=\"nofollow noreferrer\">MSDN: Dynamic Link Library Tutorial</a></p>\n"}], "owner": {"reputation": 139, "user_id": 6200616, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/900c8dcb209d48c22041874e1f4bbd54?s=128&d=identicon&r=PG", "display_name": "Ausche", "link": "https://stackoverflow.com/users/6200616/ausche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 42960172, "answer_count": 1, "score": 0, "last_activity_date": 1490208234, "creation_date": 1490207108, "question_id": 42959870, "link": "https://stackoverflow.com/questions/42959870/sharing-classes-within-one-solution", "title": "Sharing classes within one solution", "body": "<p>I'm working on a utility (for practice) that has two tools that a user can run. </p>\n\n<p>I want to know if there's an outer layer within a solution where I can build classes that are recognized by all projects of said solution.</p>\n\n<p>I'm at the point where both tools are finished and I want to add the two projects to one solution. However, these tools can share a few non-static classes and I really want to avoid having multiple of the same .cpp/.h files for each project so if I need to edit or add to a shared class, I don't have to copy/paste the edits into each project.</p>\n\n<p>I tried using resource files, but they won't add .h or .cpp files. I tried adding the classes to their own project and then using them as references in the other projects, but the classes within the other projects won't recognize them. I also looked around at creating a library, but I'm not sure if it's possible to create non-static libraries as these projects will have multiple objects of the shared classes.</p>\n\n<p>I'm very visual and I'm not sure if I explained my issue well so here's a simple diagram of what I want. Each arrow shows who each project can \"be aware of\" so-to-speak (conceptually similar to class inheritance). The bold First Project is the solution's entrance; essentially just where the user specifies which tool to run.</p>\n\n<p><a href=\"https://i.stack.imgur.com/551YQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/551YQ.png\" alt=\"File structure diagram\"></a></p>\n"}, {"tags": ["c++", "visual-studio-2015", "windbg"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1490207673, "post_id": 42959847, "comment_id": 73014345, "body": "You say <i>&quot;when I run lmi Project1.exe&quot;</i> but you show <code>lm Project1.exe</code>.  Note that <code>lmi</code> is an extension command."}, {"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1490207749, "post_id": 42959847, "comment_id": 73014380, "body": "@RichardCritten thanks, that was typo, I fixed it."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1490207857, "post_id": 42959847, "comment_id": 73014443, "body": "It&#39;s loading the Project1 symbols from an unusual directory, I would expect it to load them from the build dir.  Have files been copied about since the build.  It looks like it is loading them from the symbol cache so picking up an old version.  If so try deleting the pdb file from the symbol cache."}, {"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1490208162, "post_id": 42959847, "comment_id": 73014622, "body": "@RichardCritten The project or any of its files are not copied after build. I also deleted the pdb file from cache but it didn&#39;t change anything. Yes it does point to weird paths, I don&#39;t have even <code>f:\\dd</code> folder on my system."}], "answers": [{"comments": [{"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "edited": false, "score": 0, "creation_date": 1490278098, "post_id": 42963553, "comment_id": 73048753, "body": "thanks, both good answers. Turn out I was confusing <code>lm</code> with <code>!lmi</code>, the later does take full module name with extension like <code>!lmi Project1.exe</code>. And this build was debug build."}], "tags": [], "owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "is_accepted": false, "score": 1, "last_activity_date": 1490221373, "last_edit_date": 1495540462, "creation_date": 1490220443, "answer_id": 42963553, "question_id": 42959847, "link": "https://stackoverflow.com/questions/42959847/why-does-the-checksum-fail-for-pdb-files-with-windbg/42963553#42963553", "title": "Why does the checksum fail for pdb files with Windbg?", "body": "<blockquote>\n  <p>when I run lm Project1.exe, it doesn't understand Project1.exe</p>\n</blockquote>\n\n<p>The <code>lm Project1.exe</code> command fails for 2 reasons:</p>\n\n<ol>\n<li>The module name is <code>Project1</code> and not <code>Project1.exe</code></li>\n<li>The command is missing another m: <code>lm m Project1</code></li>\n</ol>\n\n<blockquote>\n  <p>It actually doesn't even say <code>private pdb symbols</code> for the main Project1.exe module almost like it can't find the symbols!?</p>\n</blockquote>\n\n<p>I'd say that's normal for a release build. Private information is stripped.</p>\n\n<blockquote>\n  <p>it shows C next to Project1 module which means checksum mismatched</p>\n</blockquote>\n\n<p>Regarding the C for checksum, the help says:</p>\n\n<pre><code>The checksum is missing, not accessible, or equal to zero.\n</code></pre>\n\n<p>IMHO, for the identification of a PDB, the timestamp is reliable enough, a checksum is not needed. You can use <a href=\"http://www.debuginfo.com/tools/chkmatch.html\" rel=\"nofollow noreferrer\">chkmatch</a> to check if your executable matches your symbols.</p>\n\n<p>I get the C warning for my C# programs in Debug and Release build, but I don't have problems.</p>\n\n<p>In the comments you say:</p>\n\n<blockquote>\n  <p>I don't have even f:\\dd folder on my system.</p>\n</blockquote>\n\n<p>This is probably generated by the linker. You use static linking and this embeds some C++ runtime stuff in your executable where the source was compiled by Microsoft.</p>\n\n<p>And someone else says:</p>\n\n<blockquote>\n  <p>It's loading the Project1 symbols from an unusual directory,</p>\n</blockquote>\n\n<p>That's true, but the symbols of your application could be stored in the symbol store, depending on the symbol path configuration.</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/30019889/how-to-set-up-symbols-in-windbg\">How to set up symbols in WinDbg</a>. In your case it should be</p>\n\n<pre><code>.sympath C:\\path\\to\\your\\symbols\n.symfix+ C:\\microsoft\\symbols\n.reload\n</code></pre>\n\n<blockquote>\n  <p>why can't windbg not able to find things </p>\n</blockquote>\n\n<p>What are you expecting to find?</p>\n\n<blockquote>\n  <p>and is not producing meaningful results?</p>\n</blockquote>\n\n<p>Which part of the output is not meaningful to you?</p>\n"}, {"comments": [{"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "edited": false, "score": 0, "creation_date": 1490294799, "post_id": 42966578, "comment_id": 73060870, "body": "It was indeed debug build but I noticed the C still appears when I did release build as well (I did clear the symbol cache again)."}, {"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "edited": false, "score": 0, "creation_date": 1490298440, "post_id": 42966578, "comment_id": 73062927, "body": "Turns out default for release build is also no checksum, I had to set it myself in linker &gt; advanced properties, then C went away. In it can  be set for debug build as well."}], "tags": [], "owner": {"reputation": 7454, "user_id": 3622813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ndlyo.jpg?s=128&g=1", "display_name": "blabb", "link": "https://stackoverflow.com/users/3622813/blabb"}, "is_accepted": true, "score": 1, "last_activity_date": 1490238694, "last_edit_date": 1495541415, "creation_date": 1490238694, "answer_id": 42966578, "question_id": 42959847, "link": "https://stackoverflow.com/questions/42959847/why-does-the-checksum-fail-for-pdb-files-with-windbg/42966578#42966578", "title": "Why does the checksum fail for pdb files with Windbg?", "body": "<p>You need to  set the /release switch in your project for chksum to be set the default for debug buulds is nochksum<br>\nAnd default for release buikds is setchksum</p>\n\n<p><a href=\"https://stackoverflow.com/questions/25629962/unable-to-verify-checksum-for-exe/25638480#25638480\">Unable to verify checksum for exe</a></p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/h8ksa72a.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/h8ksa72a.aspx</a></p>\n\n<p>For using lm with modulename you need -m switch.    </p>\n\n<p>Like.  Lm -m pro*<br>\nYou can use wildcards for modname. Windbg will show all the modules matching the pattern</p>\n\n<p>The. F:\\dd path are from crt sources.  They are available in your vs src folder. Since they are hardcoded path </p>\n\n<p>You may need to copy the src folder to the exact directory structure in your local machine</p>\n\n<p>Viz md f:\\dd........\\  and xcopy the whole src folder to that path. Windbg will pick the souces</p>\n\n<p>If. You compile debug or release your pdb is not stripped they remain private pdb unless you used pdbcopy or binplace to strip the private symbols</p>\n\n<p>Your stack shows terminateprocess. It means. It is past your user code   you may need to open your source file manually. Using. Lsa ls commands</p>\n\n<p>Typing from mobile so i may edit this further to add info</p>\n"}], "owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1363, "favorite_count": 0, "accepted_answer_id": 42966578, "answer_count": 2, "score": 1, "last_activity_date": 1490238694, "creation_date": 1490207014, "last_edit_date": 1490209345, "question_id": 42959847, "link": "https://stackoverflow.com/questions/42959847/why-does-the-checksum-fail-for-pdb-files-with-windbg", "title": "Why does the checksum fail for pdb files with Windbg?", "body": "<p>I created a simple console demo application in VS2015 which simulates a crash. I run the executable with windbg to debug it for demo purposes. The application runs and crashes as expected.</p>\n\n<p>But here is when windbg is weird.</p>\n\n<p>I can't see the code corresponding to call-stack functions when I have built it on same machine. The source code line next to call stack is not where source code is, it almost has no reference to my sample code (a single main.cpp file).</p>\n\n<pre><code>0:000&gt; kb\n # ChildEBP RetAddr  Args to Child              \n00 0036f7e8 77a18e12 ffffffff 00000000 00000000 ntdll!NtTerminateProcess+0x12\n01 0036f804 756c79c4 00000000 77e8f3b0 ffffffff ntdll!RtlExitUserProcess+0x85\n02 0036f818 0f4891b8 00000000 0036f840 0f48916c kernel32!ExitProcessStub+0x12\n03 0036f824 0f48916c 00000000 0036f84c 0036f850 ucrtbased!exit_or_terminate_process+0x38 [d:\\rs1\\minkernel\\crts\\ucrt\\src\\appcrt\\startup\\exit.cpp @ 130]\n04 0036f840 0f489452 00000000 00000000 00000000 ucrtbased!common_exit+0x5c [d:\\rs1\\minkernel\\crts\\ucrt\\src\\appcrt\\startup\\exit.cpp @ 265]\n05 0036f854 00e42348 00000000 c0bb032f 00000000 ucrtbased!exit+0x12 [d:\\rs1\\minkernel\\crts\\ucrt\\src\\appcrt\\startup\\exit.cpp @ 278]\n06 0036f8b0 00e421cd 0036f8c0 00e424e8 0036f8cc Project1!__scrt_common_main_seh+0x168 [f:\\dd\\vctools\\crt\\vcstartup\\src\\startup\\exe_common.inl @ 262]\n07 0036f8b8 00e424e8 0036f8cc 756c336a 7efde000 Project1!__scrt_common_main+0xd [f:\\dd\\vctools\\crt\\vcstartup\\src\\startup\\exe_common.inl @ 296]\n08 0036f8c0 756c336a 7efde000 0036f90c 779f9902 Project1!wmainCRTStartup+0x8 [f:\\dd\\vctools\\crt\\vcstartup\\src\\startup\\exe_wmain.cpp @ 17]\n09 0036f8cc 779f9902 7efde000 7dbc800d 00000000 kernel32!BaseThreadInitThunk+0xe\n0a 0036f90c 779f98d5 00e4134d 7efde000 00000000 ntdll!__RtlUserThreadStart+0x70\n0b 0036f924 00000000 00e4134d 7efde000 00000000 ntdll!_RtlUserThreadStart+0x1b\n</code></pre>\n\n<p>when I run <code>lm Project1.exe</code>, it doesn't understand Project1.exe</p>\n\n<pre><code>0:000&gt; lm Project1.exe\nUnknown option 'P'\nUnknown option 'r'\nUnknown option 'j'\n                 ^ Syntax error in 'lm Project1.exe'\n</code></pre>\n\n<p>More interestingly when I run <code>lm</code> command, it shows <code>C</code> next to <code>Project1</code> module which means checksum mismatched, but why? it was built on same machine and symbol files should match 100% but it apparently doesn't. </p>\n\n<pre><code>0:000&gt; lm\nstart    end        module name\n00e30000 00e51000   Project1 C (pdb symbols)          C:\\Program Files (x86)\\Windows Kits\\10\\Debuggers\\x86\\sym\\Project1.pdb\\73D98E9A3EDD4D4D8AE90DF76040737D1\\Project1.pdb\n0f000000 0f006000   detoured   (deferred)             \n0f3d0000 0f546000   ucrtbased   (private pdb symbols)  C:\\Program Files (x86)\\Windows Kits\\10\\Debuggers\\x86\\sym\\ucrtbased.pdb\\D9FF3B7405474C158B4E3C2FBCC108362\\ucrtbased.pdb\n</code></pre>\n\n<p>It actually doesn't even say <code>private pdb symbols</code> for the main <code>Project1.exe</code> module almost like it can't find the symbols!?</p>\n\n<p>The checksum issue is also reflected in <code>k</code> command</p>\n\n<pre><code>0:000&gt; k\n # ChildEBP RetAddr  \n00 002df984 77a18e12 ntdll!NtTerminateProcess+0x12\n01 002df9a0 756c79c4 ntdll!RtlExitUserProcess+0x85\n02 002df9b4 608c91b8 kernel32!ExitProcessStub+0x12\n03 002df9c0 608c916c ucrtbased!exit_or_terminate_process+0x38 [d:\\rs1\\minkernel\\crts\\ucrt\\src\\appcrt\\startup\\exit.cpp @ 130]\n04 002df9dc 608c9452 ucrtbased!common_exit+0x5c [d:\\rs1\\minkernel\\crts\\ucrt\\src\\appcrt\\startup\\exit.cpp @ 265]\n*** WARNING: Unable to verify checksum for Project1.exe\n05 002df9f0 012a2348 ucrtbased!exit+0x12 [d:\\rs1\\minkernel\\crts\\ucrt\\src\\appcrt\\startup\\exit.cpp @ 278]\n06 002dfa4c 012a21cd Project1!__scrt_common_main_seh+0x168 [f:\\dd\\vctools\\crt\\vcstartup\\src\\startup\\exe_common.inl @ 262]\n07 002dfa54 012a24e8 Project1!__scrt_common_main+0xd [f:\\dd\\vctools\\crt\\vcstartup\\src\\startup\\exe_common.inl @ 296]\n08 002dfa5c 756c336a Project1!wmainCRTStartup+0x8 [f:\\dd\\vctools\\crt\\vcstartup\\src\\startup\\exe_wmain.cpp @ 17]\n09 002dfa68 779f9902 kernel32!BaseThreadInitThunk+0xe\n0a 002dfaa8 779f98d5 ntdll!__RtlUserThreadStart+0x70\n0b 002dfac0 00000000 ntdll!_RtlUserThreadStart+0x1b\n</code></pre>\n\n<p>When this simple project is built on the same machine, why can't windbg not able to find things and is not producing meaningful results?</p>\n"}, {"tags": ["c++", "c++11", "stl", "c-preprocessor", "iota"], "comments": [{"owner": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "edited": false, "score": 0, "creation_date": 1490207021, "post_id": 42959812, "comment_id": 73013991, "body": "Maybe relevant <a href=\"https://stackoverflow.com/questions/5242524/converting-int-to-string-in-c\" title=\"converting int to string in c\">stackoverflow.com/questions/5242524/&hellip;</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1490207146, "post_id": 42959812, "comment_id": 73014074, "body": "You <a href=\"http://stackoverflow.com/questions/5047971/how-do-i-check-for-c11-support\">test for C++11</a> and depending on the result you pick which header to use."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "edited": false, "score": 0, "creation_date": 1490207188, "post_id": 42959812, "comment_id": 73014097, "body": "@TonyJ: That&#39;s about <code>itoa</code>, not <a href=\"http://en.cppreference.com/w/cpp/algorithm/iota\" rel=\"nofollow noreferrer\">std::iota</a>."}, {"owner": {"reputation": 1005, "user_id": 3800049, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/uX9zP.png?s=128&g=1", "display_name": "jvtrudel", "link": "https://stackoverflow.com/users/3800049/jvtrudel"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1490207450, "post_id": 42959812, "comment_id": 73014221, "body": "@NathanOliver yes! something like <code>#if __cplusplus &lt;= 199711L</code> would be nice. But starting from which version of c++ does it use numeric?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1490207497, "post_id": 42959812, "comment_id": 73014243, "body": "@jvtrudel per <a href=\"http://en.cppreference.com/w/cpp/algorithm/iota\" rel=\"nofollow noreferrer\">this</a>, C++11"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 3, "creation_date": 1490207587, "post_id": 42959812, "comment_id": 73014294, "body": "@jvtrudel: compare against <code>201103L</code>. Or you could just include both if it doesn&#39;t impact your compile time unacceptably."}, {"owner": {"reputation": 1005, "user_id": 3800049, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/uX9zP.png?s=128&g=1", "display_name": "jvtrudel", "link": "https://stackoverflow.com/users/3800049/jvtrudel"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1490207864, "post_id": 42959812, "comment_id": 73014446, "body": "I know where to find the documentation, but I&#39;m not familiar with the versioning scheme. It don&#39;t appear in the documentation as far as I can see @NathanOliver"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1490208081, "post_id": 42959812, "comment_id": 73014575, "body": "@jvtrudel Not sure if there is a versioning scheme defined somewhere.  You can find the values though in [cpp.predefined] in the standard. (most likely there are using YYYYMM)"}, {"owner": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1490208181, "post_id": 42959812, "comment_id": 73014633, "body": "@FredLarson Oh I just learned something, I read what std::iota does, <a href=\"http://en.cppreference.com/w/cpp/algorithm/iota\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/algorithm/iota</a>, but what what does iota stand for?"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "edited": false, "score": 2, "creation_date": 1490208270, "post_id": 42959812, "comment_id": 73014686, "body": "@TonyJ as I stated in my answer, iota is the Greek letter \u03b9 and the name iota is taken from the programming language APL. It&#39;s a Greek letter used in mathematics to denote a set of consecutive numbers."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1490208828, "post_id": 42959812, "comment_id": 73014989, "body": "<code>iota</code> and <code>itoa</code> do look dangerously similar."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1490210206, "post_id": 42959812, "comment_id": 73015779, "body": "As far as I can tell, <code>iota</code> has been in <code>&lt;numeric&gt;</code> going <a href=\"https://www.sgi.com/tech/stl/iota.html\" rel=\"nofollow noreferrer\">all the way back to the SGI STL</a>. When was it in <code>&lt;algorithm&gt;</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 1005, "user_id": 3800049, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/uX9zP.png?s=128&g=1", "display_name": "jvtrudel", "link": "https://stackoverflow.com/users/3800049/jvtrudel"}, "edited": false, "score": 0, "creation_date": 1490209882, "post_id": 42959982, "comment_id": 73015595, "body": "I don&#39;t need a proof... Just want to understand how to dig in the STL source code and history. Looking at the header source is a good hint, but where is the git/svn of STL?"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 1005, "user_id": 3800049, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/uX9zP.png?s=128&g=1", "display_name": "jvtrudel", "link": "https://stackoverflow.com/users/3800049/jvtrudel"}, "edited": false, "score": 0, "creation_date": 1490210010, "post_id": 42959982, "comment_id": 73015668, "body": "I don&#39;t know @jvtrudel, when I had found myself in similar situations digging into the header or/and source files was the way to go! =)"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1490210278, "post_id": 42959982, "comment_id": 73015815, "body": "Do you have any evidence that <code>iota</code> has ever been in <code>&lt;algorithm&gt;</code>?"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1490210743, "post_id": 42959982, "comment_id": 73016056, "body": "Apart from the Quora link @T.C., which mentions its existence, but not its header file, it is evident from this SO <a href=\"http://stackoverflow.com/questions/26579703/iota-increment-vector-of-a-class-c\">post</a> that at least two humans used from <code>&lt;algorithm&gt;</code>."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1490211580, "post_id": 42959982, "comment_id": 73016549, "body": "So basically you claim it was &quot;moved in C++11&quot; because of an internal GCC implementation detail (that <code>&lt;algorithm&gt;</code> by happenstance pulls in <code>&lt;random&gt;</code> which by happenstance pulls in <code>&lt;numeric&gt;</code>)?"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1490212010, "post_id": 42959982, "comment_id": 73016800, "body": "I am not sure what you mean @T.C., but I would say it was re-introduced, rather than moved...Updated my answer."}, {"owner": {"reputation": 1005, "user_id": 3800049, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/uX9zP.png?s=128&g=1", "display_name": "jvtrudel", "link": "https://stackoverflow.com/users/3800049/jvtrudel"}, "edited": false, "score": 1, "creation_date": 1490212833, "post_id": 42959982, "comment_id": 73017293, "body": "I have a collaborator that use it from algorithm; that&#39;s why i need preproc option. At least, that&#39;s what I guess, but he have a whole bunch of other headers... but not numeric."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 1, "last_activity_date": 1490211981, "last_edit_date": 1495541850, "creation_date": 1490207522, "answer_id": 42959982, "question_id": 42959812, "link": "https://stackoverflow.com/questions/42959812/stl-iota-include-file-change/42959982#42959982", "title": "STL iota include file change", "body": "<p><a href=\"http://www.cplusplus.com/reference/numeric/iota/\" rel=\"nofollow noreferrer\">iota</a> (from the Greek \u03b9) was re-introduced in <code>&lt;numeric&gt;</code> when <a href=\"/questions/tagged/c%2b%2b11\" class=\"post-tag\" title=\"show questions tagged &#39;c++11&#39;\" rel=\"tag\">c++11</a> arrived, as you can see in the <a href=\"http://www.cplusplus.com/reference/numeric/\" rel=\"nofollow noreferrer\">ref</a>. So you check if your in an environment without it, and include the old header, or else, include the new header.</p>\n\n<p>Something like this might do the trick:</p>\n\n<pre><code>#if __cplusplus &lt;= 199711L\n  #include &lt;algorithm&gt;\n#else\n  #include &lt;numeric&gt;\n#endif\n</code></pre>\n\n<p><a href=\"/questions/tagged/c%2b%2b11\" class=\"post-tag\" title=\"show questions tagged &#39;c++11&#39;\" rel=\"tag\">c++11</a> sets the value of <code>__cplusplus</code> to <code>201103L</code>. That asserts full conformance to the 2011 standard; it doesn't tell you about partial conformance or compiler extensions. If <code>__cplusplus</code> is set to 201103L, then either the compiler fully conforms or it's lying to you. If it's not, then you can't really tell which features it supports. </p>\n\n<p>Read more in this <a href=\"https://stackoverflow.com/questions/5047971/how-do-i-check-for-c11-support\">answer</a>.</p>\n\n<p>Moreover, this Quora <a href=\"https://www.quora.com/What-new-algorithms-were-introduced-in-the-C++-standard-library-in-C++11\" rel=\"nofollow noreferrer\">post</a> also agrees with the change (or to be honest; re-introduce) of <code>std::iota</code> to have happened with <a href=\"/questions/tagged/c%2b%2b11\" class=\"post-tag\" title=\"show questions tagged &#39;c++11&#39;\" rel=\"tag\">c++11</a>.</p>\n\n<hr>\n\n<p><sub>If you can afford it, just include both libraries.</sub></p>\n"}, {"tags": [], "owner": {"reputation": 3197, "user_id": 4709300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pGfqW.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4709300/chris"}, "is_accepted": false, "score": 1, "last_activity_date": 1490207676, "creation_date": 1490207676, "answer_id": 42960032, "question_id": 42959812, "link": "https://stackoverflow.com/questions/42959812/stl-iota-include-file-change/42960032#42960032", "title": "STL iota include file change", "body": "<p>What you want to do is check if the <code>__cplusplus</code> variable is below a certain point and if it is <code>#include &lt;algorithm&gt;</code> if not then <code>#include &lt;numeric&gt;</code></p>\n\n<pre><code>#if __cplusplus &lt;= 199711L\n  #include &lt;algorithm&gt;\n#else\n  #include &lt;numeric&gt;\n#endif\n</code></pre>\n\n<p>This should work for just about any library that you need to do this with, just note that you may have to change the <code>199711L</code> to the appropriate number.</p>\n"}, {"comments": [{"owner": {"reputation": 1005, "user_id": 3800049, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/uX9zP.png?s=128&g=1", "display_name": "jvtrudel", "link": "https://stackoverflow.com/users/3800049/jvtrudel"}, "edited": false, "score": 0, "creation_date": 1490216221, "post_id": 42961717, "comment_id": 73019125, "body": "Interesting... But the compiler that I have seen use <code>std::iota</code> without <code>&lt;numeric&gt;</code> is a mvsc, not gcc. But I do not know the version, that&#39;s why I was looking at a change in the STL library. The same (or even worst) mess probably happened their."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": false, "score": 4, "last_activity_date": 1490214398, "last_edit_date": 1490214398, "creation_date": 1490213419, "answer_id": 42961717, "question_id": 42959812, "link": "https://stackoverflow.com/questions/42959812/stl-iota-include-file-change/42961717#42961717", "title": "STL iota include file change", "body": "<p><code>iota</code> was never \"moved\" from <code>&lt;algorithm&gt;</code>. C++03 doesn't have <code>std::iota</code> in any header, and no conforming implementation can provide it, because <code>iota</code> is not a reserved name and this is required to work:</p>\n\n<pre><code>#define iota arbitrary preprocessing token sequence like this and *that and \"!\" and \\\n             -13833rfa231fn7or.other.line.noise.that.happens.to.be.a.pp.number\n#include &lt;every-standard-header-here&gt;\n</code></pre>\n\n<p>It was added to <code>&lt;numeric&gt;</code> in C++11 and was in <a href=\"https://www.sgi.com/tech/stl/iota.html\" rel=\"nofollow noreferrer\">the SGI STL</a>'s <code>&lt;numeric&gt;</code> too as an extension. It has never been in <code>&lt;algorithm&gt;</code> and so can't possibly be moved from it.</p>\n\n<p>Now, because standard library headers are allowed to include each other in arbitrary ways, it happens that GCC &lt;= 5's <code>&lt;algorithm&gt;</code> in C++11 mode included <code>&lt;random&gt;</code> by happenstance, which included <code>&lt;numeric&gt;</code> by happenstance. That's a mere implementation detail that you shouldn't be relying upon, and GCC 6 no longer does that. The fix for that is to simply include the correct header, which is, and has always been, <code>&lt;numeric&gt;</code>.</p>\n"}], "owner": {"reputation": 1005, "user_id": 3800049, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/uX9zP.png?s=128&g=1", "display_name": "jvtrudel", "link": "https://stackoverflow.com/users/3800049/jvtrudel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 535, "favorite_count": 0, "accepted_answer_id": 42959982, "answer_count": 3, "score": 2, "last_activity_date": 1490214398, "creation_date": 1490206907, "last_edit_date": 1490207714, "question_id": 42959812, "link": "https://stackoverflow.com/questions/42959812/stl-iota-include-file-change", "title": "STL iota include file change", "body": "<p>The <code>iota</code> function was formerly in the <code>&lt;algorithm&gt;</code> header. It has been change to <code>&lt;numeric&gt;</code>. </p>\n\n<p>I need to keep the old way for backward compatibility so I would like to use preprocessor option to select the right header to include.</p>\n\n<p>When does this changed and which preprocessor option should I use?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 3, "creation_date": 1490206709, "post_id": 42959732, "comment_id": 73013782, "body": "<a href=\"http://en.cppreference.com/w/cpp/algorithm/all_any_none_of\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/algorithm/all_any_none_of</a>"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1490206883, "post_id": 42959732, "comment_id": 73013895, "body": "@nwp there are two things I hate about those. First, most are not available until C++17. Second, there&#39;s no default predicate for simple checking of booleans."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1490207217, "post_id": 42959732, "comment_id": 73014115, "body": "@MarkRansom Well, you can write your own <code>all_of</code> based on <code>std::all_of</code> that saves you the need to write that lambda. I probably would not."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1490208085, "post_id": 42959732, "comment_id": 73014578, "body": "@nwp nor would I, I&#39;d just use the old-fashioned for loop."}], "answers": [{"tags": [], "owner": {"reputation": 10380, "user_id": 8877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZfOB5.png?s=128&g=1", "display_name": "&#208;\u0430n", "link": "https://stackoverflow.com/users/8877/%c3%90%d0%b0n"}, "is_accepted": false, "score": 5, "last_activity_date": 1490207219, "last_edit_date": 1490207219, "creation_date": 1490206857, "answer_id": 42959796, "question_id": 42959732, "link": "https://stackoverflow.com/questions/42959732/elegant-way-to-or-and-member-of-all-elements-in-array-in-c11/42959796#42959796", "title": "Elegant way to OR/AND member of all elements in array in C++11?", "body": "<p>An \"elegant\" C++ way would be to use <a href=\"http://en.cppreference.com/w/cpp/utility/bitset\" rel=\"nofollow noreferrer\"><code>std::bitset</code></a>.</p>\n\n<pre><code>std::bitset&lt;32&gt; a;\n</code></pre>\n\n<p>There are <a href=\"http://en.cppreference.com/w/cpp/utility/bitset/all_any_none\" rel=\"nofollow noreferrer\">member functions</a> that you can then use to test whether:</p>\n\n<ul>\n<li>all bits are set to true, <code>a.all()</code></li>\n<li>any bits are set to true, <code>a.any()</code></li>\n<li>none of the bits are set to true, <code>a.none()</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "is_accepted": true, "score": 1, "last_activity_date": 1490258493, "creation_date": 1490258493, "answer_id": 42970967, "question_id": 42959732, "link": "https://stackoverflow.com/questions/42959732/elegant-way-to-or-and-member-of-all-elements-in-array-in-c11/42970967#42970967", "title": "Elegant way to OR/AND member of all elements in array in C++11?", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/algorithm/all_any_none_of\" rel=\"nofollow noreferrer\"><code>std::all_of</code></a> seems to fit closest to your problem.</p>\n\n<pre><code>std::all_of(std::begin(a), std::end(a), [](const A &amp;a){return a.field;});\n</code></pre>\n\n<hr>\n\n<p>Besides <code>#include &lt;algorithm&gt;</code> for <code>std::all_of</code> you may need to <code>#include &lt;iterator&gt;</code> for <code>std::begin</code> and <code>std::end</code>.</p>\n"}], "owner": {"reputation": 1307, "user_id": 3199553, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100000455527913/picture?type=large", "display_name": "stanleyli", "link": "https://stackoverflow.com/users/3199553/stanleyli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 42970967, "answer_count": 2, "score": 2, "last_activity_date": 1490258493, "creation_date": 1490206656, "question_id": 42959732, "link": "https://stackoverflow.com/questions/42959732/elegant-way-to-or-and-member-of-all-elements-in-array-in-c11", "title": "Elegant way to OR/AND member of all elements in array in C++11?", "body": "<p>I have a </p>\n\n<pre><code>struct A {\n   bool field;\n};\n</code></pre>\n\n<p>so for an array <code>A a[32]</code>, I want to check if all elements in this array have <code>field</code> as true. What is a good way to do that? I can think about using <code>std::accumulate</code>. Is it the best way in C++11?</p>\n"}, {"tags": ["c++", "visual-studio", "visual-c++"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1490206985, "post_id": 42959719, "comment_id": 73013968, "body": "Have you recently added one or more build configurations? <code>&#47;MDd</code> is the switch for multi-threaded dynamic debug build. I have seen similar added to build outputs to distinguish their build type(s)."}, {"owner": {"reputation": 1555, "user_id": 1340021, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/7a12d786f68fedfc466c808ba67a5267?s=128&d=identicon&r=PG", "display_name": "Bungles", "link": "https://stackoverflow.com/users/1340021/bungles"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1490210859, "post_id": 42959719, "comment_id": 73016117, "body": "Nope. Source code changes only. Under what conditions to VS normally do this?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1490212550, "post_id": 42959719, "comment_id": 73017130, "body": "It doesn&#39;t do it automatically, but the output target name can be set in one of the project properties screens."}, {"owner": {"reputation": 1555, "user_id": 1340021, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/7a12d786f68fedfc466c808ba67a5267?s=128&d=identicon&r=PG", "display_name": "Bungles", "link": "https://stackoverflow.com/users/1340021/bungles"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1490212790, "post_id": 42959719, "comment_id": 73017266, "body": "While i could change the output target name of my dependency library to match what VS is expecting, I&#39;d prefer to be able to name libraries as i see fit and tell VS to link with what I tell it to.  That&#39;s what it was doing before with no problems."}, {"owner": {"reputation": 1555, "user_id": 1340021, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/7a12d786f68fedfc466c808ba67a5267?s=128&d=identicon&r=PG", "display_name": "Bungles", "link": "https://stackoverflow.com/users/1340021/bungles"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1490221872, "post_id": 42959719, "comment_id": 73021740, "body": "My top-level project which uses the dependency spits out two .lib files of its own.  the first is /MT for C++ and the second is /MD for .net consumption.  Two different project files.  Interestingly, the C++ /MT project does NOT assume &#39;mt&#39; or &#39;mtd&#39; is on the end of the dependency name."}], "answers": [{"tags": [], "owner": {"reputation": 1555, "user_id": 1340021, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/7a12d786f68fedfc466c808ba67a5267?s=128&d=identicon&r=PG", "display_name": "Bungles", "link": "https://stackoverflow.com/users/1340021/bungles"}, "is_accepted": true, "score": 0, "last_activity_date": 1490223328, "creation_date": 1490223328, "answer_id": 42964156, "question_id": 42959719, "link": "https://stackoverflow.com/questions/42959719/how-to-stop-visual-studio-from-putting-mdd-at-the-end-of-library-names/42964156#42964156", "title": "How to stop Visual Studio from putting &#39;mdd&#39; at the end of library names", "body": "<p>I've found two workarounds for this problem, but don't like either one of them.  Hopefully someone is able to explain why these steps were unnecessary and then all of a sudden necessary.</p>\n\n<p>The first and most obvious work-around is to modify the dependency's project settings so the target output filename matches what the consuming project is expecting -- namely, 'mylibrarymdd.lib'.</p>\n\n<p>The second work-around is to use \"/NODEFAULTLIB:mylibrarymdd.lib\".  This is required for every individual dependency with the auto-naming issue.</p>\n\n<p>To get to the correct (IMHO) solution, one would need to know WHY Visual Studio is creating a \"default library dependency\" of 'mylibraryMDD.lib' in the first place.  As I stated, it wasn't doing so before and there have been no recent updates to Visual Studio or the project files themselves.</p>\n\n<p>I did find that there was a change to a dependency of 'mylibrary'.  It pulls in the static OpenSSL libraries and those were updated.  It's unclear how that would cause the above behavior, however.</p>\n"}], "owner": {"reputation": 1555, "user_id": 1340021, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/7a12d786f68fedfc466c808ba67a5267?s=128&d=identicon&r=PG", "display_name": "Bungles", "link": "https://stackoverflow.com/users/1340021/bungles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 42964156, "answer_count": 1, "score": -1, "last_activity_date": 1490223328, "creation_date": 1490206634, "question_id": 42959719, "link": "https://stackoverflow.com/questions/42959719/how-to-stop-visual-studio-from-putting-mdd-at-the-end-of-library-names", "title": "How to stop Visual Studio from putting &#39;mdd&#39; at the end of library names", "body": "<p>I use Visual Studio 2013 to make a CLR-compatible version of my C++ code library ('mylibrary.lib').  It's been working fine for years, but all of a sudden I'm getting 'LNK1104' errors because Visual Studio is looking for 'mylibrarymdd.lib'.</p>\n\n<p>Why is it suddenly, magically tacking on 'mdd' to the library name instead of using the .lib file I specified?  And how do I get it to stop doing this?</p>\n"}, {"tags": ["c++", "constants", "static-variables"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 3, "creation_date": 1490206472, "post_id": 42959633, "comment_id": 73013603, "body": "Did you compile with optimizations enabled?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1490206530, "post_id": 42959633, "comment_id": 73013654, "body": "Debug or release build and if release what optimisation level?  If debug build why do you expect this optimisation to happen?"}, {"owner": {"reputation": 321, "user_id": 3817226, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/943b48f687dded361c08ef916ae6412c?s=128&d=identicon&r=PG&f=1", "display_name": "josecm", "link": "https://stackoverflow.com/users/3817226/josecm"}, "edited": false, "score": 0, "creation_date": 1490206806, "post_id": 42959633, "comment_id": 73013849, "body": "Thank you for the quick response! And yeah I was both compiling with debug and -O0. Removed debug flag, and with O2 and the problem completely went away! Sorry for the noob question!"}], "answers": [{"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 1, "last_activity_date": 1490206637, "creation_date": 1490206637, "answer_id": 42959720, "question_id": 42959633, "link": "https://stackoverflow.com/questions/42959633/static-const-variable-as-macro/42959720#42959720", "title": "static const variable as macro", "body": "<p>If you take <code>myx</code>'s address, then it must exist. If you don't, the compiler is free to elide it. </p>\n\n<p>Any good compiler with optimisations switched on will do this.</p>\n"}, {"tags": [], "owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "is_accepted": false, "score": 0, "last_activity_date": 1490206717, "creation_date": 1490206717, "answer_id": 42959753, "question_id": 42959633, "link": "https://stackoverflow.com/questions/42959633/static-const-variable-as-macro/42959753#42959753", "title": "static const variable as macro", "body": "<p>If optimizations are enabled the codes generated with macro and constant are the same, see <a href=\"https://godbolt.org/g/wMycjj\" rel=\"nofollow noreferrer\">demo</a>.</p>\n"}], "owner": {"reputation": 321, "user_id": 3817226, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/943b48f687dded361c08ef916ae6412c?s=128&d=identicon&r=PG&f=1", "display_name": "josecm", "link": "https://stackoverflow.com/users/3817226/josecm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1490206717, "creation_date": 1490206371, "last_edit_date": 1490206565, "question_id": 42959633, "link": "https://stackoverflow.com/questions/42959633/static-const-variable-as-macro", "title": "static const variable as macro", "body": "<p>I'm programming in C++ and want to use static const variables instead of macros for magic values. In the example:</p>\n\n<pre><code>static const int myx = 10;\n\nint incbyx(int y){\n    return y + myx;\n}\n</code></pre>\n\n<p>The assembly generated directly uses the value 10:</p>\n\n<pre><code>103ec8: e283300a    add r3, r3, #10\n</code></pre>\n\n<p>However I see the variable still occupies space in memory. I came to this conclusion by using objdump with --syms option: </p>\n\n<pre><code>001059a8 l     O .data  00000004 myx\n</code></pre>\n\n<p>I don't see the need for this, since the variable itself is never referenced. Can I instruct the compiler/linker not to save space in the data section for it? Or do you have any other suggestion not involving macros?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "edited": false, "score": 1, "creation_date": 1490206344, "post_id": 42959588, "comment_id": 73013516, "body": "<code>it calculates its own line count</code>: I doubt it does..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1490206459, "post_id": 42959588, "comment_id": 73013593, "body": "Whenever you feel the need to say &quot;I heard something about X&quot;, consider if you can say where you heard it. If you can&#39;t do that, keep quiet about it."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1490207229, "post_id": 42959588, "comment_id": 73014120, "body": "Regarding <code>Count</code>: The Muppet API was deprecated after Henson died. On the less flip side, <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html\" rel=\"nofollow noreferrer\">you are probably thinking <code>__COUNTER__</code>.</a> I don&#39;t think this is what you want."}, {"owner": {"reputation": 4121, "user_id": 19674, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5057291c386d12733d4123a1e277384e?s=128&d=identicon&r=PG", "display_name": "Jon Trauntvein", "link": "https://stackoverflow.com/users/19674/jon-trauntvein"}, "edited": false, "score": 0, "creation_date": 1490213017, "post_id": 42959588, "comment_id": 73017382, "body": "I seem to recall that there is a preprocessor value, <b>LINE</b>, that specifies the current line.  You could create a macro that stores the count at the beginning of the function and another that subtracts the first at the end of the function."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 6840311, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eaf6d3c340e19df0971005a121464eb2?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/6840311/marco"}, "edited": false, "score": 0, "creation_date": 1490207096, "post_id": 42959724, "comment_id": 73014038, "body": "So  every statement that reoccurs is being counted as an executed line of code? Kinda feel silly if true."}, {"owner": {"reputation": 5957, "user_id": 997196, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/E5hdR.png?s=128&g=1", "display_name": "Rivasa", "link": "https://stackoverflow.com/users/997196/rivasa"}, "reply_to_user": {"reputation": 37, "user_id": 6840311, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eaf6d3c340e19df0971005a121464eb2?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/6840311/marco"}, "edited": false, "score": 0, "creation_date": 1490215218, "post_id": 42959724, "comment_id": 73018555, "body": "@Marco No idea if true or not. Simply going off an assumption in case it might be what is needed."}], "tags": [], "owner": {"reputation": 5957, "user_id": 997196, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/E5hdR.png?s=128&g=1", "display_name": "Rivasa", "link": "https://stackoverflow.com/users/997196/rivasa"}, "is_accepted": false, "score": 2, "last_activity_date": 1490206645, "creation_date": 1490206645, "answer_id": 42959724, "question_id": 42959588, "link": "https://stackoverflow.com/questions/42959588/line-count-for-a-function/42959724#42959724", "title": "Line Count for a function", "body": "<p>I'm going to assume you mean that <code>it calculates its own line count</code> means that it's counting how many times the innermost loop works.</p>\n\n<p>You can do something like this:</p>\n\n<pre><code>typedef double Matrix[100][100];\n\nint multiply(Matrix A, Matrix B, Matrix C, int n){\n    int count = 0;\n    //n is the actual matrix order\n    for (int i = 0; i &lt; n; ++i){\n        for (int j = 0; j &lt; n; ++j){\n            C[i][j] = 0;\n            for (int k = 0; k &lt; n; ++k){\n                C[i][j] += A[i][k] * B[k][j];\n                count++;\n            }\n        }\n    }\n    return count;\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 6840311, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eaf6d3c340e19df0971005a121464eb2?s=128&d=identicon&r=PG&f=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/6840311/marco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "closed_date": 1490207777, "answer_count": 1, "score": -3, "last_activity_date": 1490208289, "creation_date": 1490206232, "last_edit_date": 1490208289, "question_id": 42959588, "link": "https://stackoverflow.com/questions/42959588/line-count-for-a-function", "closed_reason": "Needs details or clarity", "title": "Line Count for a function", "body": "<p>I have to take the following function  and code it up so as it runs, it calculates its own line count. I'm just wondering if its possible to do this on code and have the number stored in an int lineCount? I heard something about using a #predefined Macro called <strong>Count</strong>? </p>\n"}, {"tags": ["c++", "c++11", "boost"], "comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 1, "creation_date": 1490205881, "post_id": 42959431, "comment_id": 73013220, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2221517/how-do-i-generate-an-error-or-warning-in-the-c-preprocessor\">How do I generate an error or warning in the C preprocessor?</a>"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1490205903, "post_id": 42959431, "comment_id": 73013237, "body": "Generally speaking - if a header is meant to be private, it should not be delivered to the end user in the first place. If it is delivered to the user - it is a public header."}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1490205927, "post_id": 42959431, "comment_id": 73013252, "body": "Depending on the conditions allowing the inclusion of the private headers, you could put an <code>#if !(condition) #error #endif</code> in your header."}, {"owner": {"reputation": 9316, "user_id": 22080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9868663fca5718ef83e3ee55c41d13c?s=128&d=identicon&r=PG", "display_name": "Harald Scheirich", "link": "https://stackoverflow.com/users/22080/harald-scheirich"}, "edited": false, "score": 1, "creation_date": 1490207548, "post_id": 42959431, "comment_id": 73014268, "body": "Shouldn&#39;t be closed, this is not really a duplicate of the referred question, the answer by @jpo38 makes a valid point and provides instruction to other people who think of attempting this"}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 4, "last_activity_date": 1490207676, "last_edit_date": 1490207676, "creation_date": 1490205898, "answer_id": 42959480, "question_id": 42959431, "link": "https://stackoverflow.com/questions/42959431/throw-compile-error-warning-if-private-headers-included-directly-by-users/42959480#42959480", "title": "Throw compile error/warning if private headers included directly by users", "body": "<p>Define some token in your public headers.</p>\n\n<p>Clear it at the end of your public headers.</p>\n\n<p>Test for it in your private headers.</p>\n\n<p>Users can still bypass it, but cannot bypass it with a simple <code>#include</code>.</p>\n\n<p>The warning or error generated should state what they did, and what they should do instead.</p>\n\n<p>Public header:</p>\n\n<pre><code> #pragma once\n #define IN_MY_PUBLIC_HEADER_OH_WOW\n\n #include \"private_header.h\"\n\n #undef IN_MY_PUBLIC_HEADER_OH_WOW\n</code></pre>\n\n<p>Private header:</p>\n\n<pre><code> #pragma once\n #ifndef IN_MY_PUBLIC_HEADER_OH_WOW\n #error __FILE__ should only be included via the public headers, never directly in your code\n #endif\n</code></pre>\n\n<p>Select a better token name than <code>IN_MY_PUBLIC_HEADER_OH_WOW</code>.  Do not include two <code>__</code> in a row, or start with a <code>_</code> followed by a capital letter to avoid conflicting with restrictions in the standard.</p>\n\n<p>This prevents you from directly including a private header accidentally, but still permits you to indirectly include it via the public header.</p>\n"}, {"tags": [], "owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "is_accepted": false, "score": 4, "last_activity_date": 1490207993, "last_edit_date": 1495539978, "creation_date": 1490206020, "answer_id": 42959520, "question_id": 42959431, "link": "https://stackoverflow.com/questions/42959431/throw-compile-error-warning-if-private-headers-included-directly-by-users/42959520#42959520", "title": "Throw compile error/warning if private headers included directly by users", "body": "<p>What we commonly do is separate public and private headers in different folders. Then you can decide not to give access to the end user to the private folder (by not sending it to him or by not making it be part of compiler include search path). </p>\n\n<p><strong>This requires that public headers do not include private headers</strong> (what you apparently want to do). This should always be doable if the code is well organized: public headers should use <a href=\"https://stackoverflow.com/questions/553682/when-can-i-use-a-forward-declaration\">forward declarations</a> or <a href=\"https://stackoverflow.com/questions/60570/why-should-the-pimpl-idiom-be-used\">pimpl idiom</a> for classes defined in private headers and only source files should include the private headers. Without that, <strong>it makes no sense to provide public headers that include private headers you don't want people to include</strong>...because they will include them anyway in the end simply by including the public ones!!</p>\n"}], "owner": {"reputation": 2861, "user_id": 1008115, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Nmtel.jpg?s=128&g=1", "display_name": "PnotNP", "link": "https://stackoverflow.com/users/1008115/pnotnp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "closed_date": 1490211709, "answer_count": 2, "score": -1, "last_activity_date": 1490207993, "creation_date": 1490205748, "last_edit_date": 1490206594, "question_id": 42959431, "link": "https://stackoverflow.com/questions/42959431/throw-compile-error-warning-if-private-headers-included-directly-by-users", "closed_reason": "Needs details or clarity", "title": "Throw compile error/warning if private headers included directly by users", "body": "<p>In my c++ code I have defined few public and private headers. Private headers are meant to be included only by these public headers based on certain #ifdefs.</p>\n\n<p>How to throw error or warning to the user if user directly includes these private headers?</p>\n"}, {"tags": ["c++", "multithreading", "mbed"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1490205618, "post_id": 42959344, "comment_id": 73013059, "body": "Classes don&#39;t run. Functions run."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1490206155, "post_id": 42959344, "comment_id": 73013399, "body": "Why did you expect them to run concurrently? I don&#39;t see any threading related code in your example."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6418642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c5d177c00a5c0af0330d9bcc75f23a1?s=128&d=identicon&r=PG&f=1", "display_name": "Safe", "link": "https://stackoverflow.com/users/6418642/safe"}, "is_accepted": false, "score": 0, "last_activity_date": 1490206414, "creation_date": 1490206414, "answer_id": 42959643, "question_id": 42959344, "link": "https://stackoverflow.com/questions/42959344/c-both-classes-do-not-run-concurrently/42959643#42959643", "title": "C++: both classes do not run concurrently", "body": "<p>You need to use some mechanism to create new threads or processes. Your implementation is sequential, there is nothing you do that tells the code to run concurrently. </p>\n\n<p>You should take a look at some threads libraries (pthreads for example, or if you have access to c++11, there are thread functionality there) or how to create new processes as well as some kind of message passing interface between these processes.</p>\n"}, {"tags": [], "owner": {"reputation": 24757, "user_id": 107642, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/672b033bf66f18d40cff3278f12f8f90?s=128&d=identicon&r=PG", "display_name": "Jan Jongboom", "link": "https://stackoverflow.com/users/107642/jan-jongboom"}, "is_accepted": false, "score": 0, "last_activity_date": 1490208214, "creation_date": 1490208214, "answer_id": 42960168, "question_id": 42959344, "link": "https://stackoverflow.com/questions/42959344/c-both-classes-do-not-run-concurrently/42960168#42960168", "title": "C++: both classes do not run concurrently", "body": "<p>Create two threads, one for each ultrasonic sensor:</p>\n\n<pre><code>void read_left_sensor() {\n    while (1) {\n        // do the reading\n        wait(0.5f);\n    }\n}\n\nint main() {\n    Thread left_thread;\n    left_thread.start(&amp;read_left_sensor);\n\n    Thread right_thread;\n    right_thread.start(&amp;read_right_sensor);\n\n    while (1) {\n        // put your control code for the vehicle here\n        wait(0.1f);\n    }\n}\n</code></pre>\n\n<p>You can use global variables to write to when reading the sensor, and read them in your main loop. The memory is shared.</p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 7762075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ac78d7498a08cb43b93263d998d348f?s=128&d=identicon&r=PG&f=1", "display_name": "robgrimmer", "link": "https://stackoverflow.com/users/7762075/robgrimmer"}, "is_accepted": false, "score": 0, "last_activity_date": 1490463220, "creation_date": 1490463220, "answer_id": 43019649, "question_id": 42959344, "link": "https://stackoverflow.com/questions/42959344/c-both-classes-do-not-run-concurrently/43019649#43019649", "title": "C++: both classes do not run concurrently", "body": "<p>Your first problem is that you have placed code outside of your infinite while(true) loop. This later code will never run. But maybe you know this.</p>\n\n<pre><code>int main() {\n\n    while(true) {\n        us_right();\n        us_left();\n    } // &lt;- Loops back to the start of while()\n\n   // You Never pass this point!!!\n\n   if (distanceLeft &lt; 10 || distanceRight &lt; 10) {\n            // Do stuff etc.\n   }\n   wait(0.2);\n}\n</code></pre>\n\n<p>But, I think you are expecting us_right() and us_left() to happen at exactly the same time. You cannot do that in a sequential environment. </p>\n\n<p>Jan Jongboom is correct in suggesting you could use Threads. This allows the 'OS' to designate time for each piece of code to run. But it is still not truly parallel. Each function (classes are a different thing) will get a chance to run. One will run, and when it is finished (or during a wait) another function will get its chance to run.</p>\n\n<p>As you are using an mbed, I'd suggest that your project is an <em>MBED OS 5 project</em>\n(you select this when you start a new project). Otherwise you'll need to use an RTOS library. There is a blinky example using threads that should sum it up well. <a href=\"https://docs.mbed.com/docs/mbed-os-api-reference/en/latest/APIs/tasks/rtos/#thread\" rel=\"nofollow noreferrer\">Here is more info</a>.</p>\n\n<p>Threading can be dangerous for someone without experience. So stick to a simple implementation to start with. Make sure you understand what/why/how you are doing it.</p>\n\n<p><strong>Aside:</strong> From a hardware perspective, running ultrasonic sensors in parallel is actually not ideal. They both broadcast the same frequency, and can hear each other. Triggering them at the same time, they interfere with each other. </p>\n\n<p>Imagine two people shouting words in a closed room. If they take turns, it will be obvious what they are saying. If they both shout at the same time, it will be very hard!</p>\n\n<p>So actually, not being able to run in parallel is probably a good thing.</p>\n"}], "owner": {"reputation": 7, "user_id": 7752923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e3563243ad62a01ea77a51e367f9eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Eyamba", "link": "https://stackoverflow.com/users/7752923/eyamba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1490463220, "creation_date": 1490205518, "question_id": 42959344, "link": "https://stackoverflow.com/questions/42959344/c-both-classes-do-not-run-concurrently", "title": "C++: both classes do not run concurrently", "body": "<p>its my first time here. My code is suppose to make two ultrasonic sensors function at the same time using an mbed. However, i cant seem to make both classes void us_right() and void us_left() in the code run concurrently. Help please :(</p>\n\n<pre><code>#include \"mbed.h\"\nDigitalOut triggerRight(p9); \nDigitalIn echoRight(p10);\nDigitalOut triggerLeft(p13); \nDigitalIn echoLeft(p14);\n//DigitalOut myled(LED1); //monitor trigger\n//DigitalOut myled2(LED2); //monitor echo\nPwmOut steering(p21);\nPwmOut velocity(p22);\nint distanceRight = 0, distanceLeft = 0;\nint correctionRight = 0, correctionLeft = 0;\nTimer sonarRight, sonarLeft;\n\nfloat vo=0;\n\n// Velocity expects -1 (reverse) to +1 (forward)\nvoid Velocity(float v) {\n    v=v+1;\n    if (v&gt;=0 &amp;&amp; v&lt;=2) {\n        if (vo&gt;=1 &amp;&amp; v&lt;1) {                 //\n            velocity.pulsewidth(0.0014);    // this is required to\n            wait(0.1);                      //\n            velocity.pulsewidth(0.0015);    // move into reverse\n            wait(0.1);                      //\n        }                                   //\n        velocity.pulsewidth(v/2000+0.001);\n        vo=v;\n    }\n}\n\n// Steering expects -1 (left) to +1 (right)\nvoid Steering(float s) {\n    s=s+1;\n    if (s&gt;=0 &amp;&amp; s&lt;=2) {\n        steering.pulsewidth(s/2000+0.001);\n    }\n}\n\nvoid us_right() {\n    sonarRight.reset();\n    sonarRight.start();\n    while (echoRight==2) {};\n    sonarRight.stop();\n    correctionRight = sonarLeft.read_us();\n    triggerRight = 1;\n    sonarRight.reset();\n    wait_us(10.0);\n    triggerRight = 0;\n    while (echoRight==0) {};\n  //  myled2=echoRight;\n    sonarRight.start();\n    while (echoRight==1) {};\n    sonarRight.stop();\n    distanceRight = ((sonarRight.read_us()-correctionRight)/58.0);\n    printf(\"Distance from Right is: %d cm \\n\\r\",distanceRight);\n}\n\nvoid us_left() {\n    sonarLeft.reset();\n    sonarLeft.start();\n    while (echoLeft==2) {};\n    sonarLeft.stop();\n    correctionLeft = sonarLeft.read_us();\n    triggerLeft = 1;\n    sonarLeft.reset();\n    wait_us(10.0);\n    triggerLeft = 0;\n    while (echoLeft==0) {};\n  //  myled2=echoLeft;\n    sonarLeft.start();\n    while (echoLeft==1) {};\n    sonarLeft.stop();\n    distanceLeft = (sonarLeft.read_us()-correctionLeft)/58.0;\n    printf(\"Distance from Left is: %d cm \\n\\r\",distanceLeft);\n}\n\nint main() {\n    while(true) {\n        us_right();\n        us_left();\n    }\n   if (distanceLeft &lt; 10 || distanceRight &lt; 10) {\n            if (distanceLeft &lt; distanceRight) {\n                for(int i=0; i&gt;-100; i--) {       // Go left\n                    Steering(i/100.0);\n                    wait(0.1);\n                }\n            }\n            if (distanceLeft &gt; distanceRight) {\n                for(int i=0; i&gt;100; i++) {       // Go Right\n                    Steering(i/100.0);\n                    wait(0.1);\n                }\n            }              \n    }\n        wait(0.2);\n}\n</code></pre>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 3, "creation_date": 1490205522, "post_id": 42959269, "comment_id": 73013004, "body": "Something important is missing from your question. That would be an actual question. &quot;My homework doesn&#39;t compile&quot;, without even showing the compilation error, is not a question."}, {"owner": {"reputation": 1223, "user_id": 2366842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1db1f21d133e897903c931feb815012b?s=128&d=identicon&r=PG", "display_name": "user2366842", "link": "https://stackoverflow.com/users/2366842/user2366842"}, "edited": false, "score": 0, "creation_date": 1490205661, "post_id": 42959269, "comment_id": 73013082, "body": "Nothing specifically wrong with asking questions about homework, but yes, ask a question.  Show what you&#39;ve tried thus far, and expand upon what is/isn&#39;t working for you.  In general, &quot;my code doesn&#39;t work&quot; isn&#39;t a very good way to get a response.  More specifically, what errors happen when you try and compile, and what steps have you gone through to try and fix them?"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1490205873, "post_id": 42959269, "comment_id": 73013215, "body": "You defined setMake to return a string, but you don&#39;t use a return value and you don&#39;t return anything."}, {"owner": {"reputation": 3, "user_id": 6684809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/252091c07f012ef01e5df627bc2899f0?s=128&d=identicon&r=PG&f=1", "display_name": "Colin Powers", "link": "https://stackoverflow.com/users/6684809/colin-powers"}, "edited": false, "score": 0, "creation_date": 1490419541, "post_id": 42959269, "comment_id": 73115006, "body": "I thought &quot;Missing type specifier&quot; was clear enough.   I dont get this website. You go too into detail with your problem, you get downvoted by trolls. You give the code and straight to the point with the title and the question, you get downvoted by trolls."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6684809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/252091c07f012ef01e5df627bc2899f0?s=128&d=identicon&r=PG&f=1", "display_name": "Colin Powers", "link": "https://stackoverflow.com/users/6684809/colin-powers"}, "edited": false, "score": 0, "creation_date": 1490419766, "post_id": 42960015, "comment_id": 73115038, "body": "Thank you this was very helpful. Turns out, my teacher didnt know for whatever reason visual studios, decided the uising namespace std; was missing from the car.h file. My Teacher said since it is linked to the main drive, it shouldnt need it. But thats what was causing the Type specifier error."}], "tags": [], "owner": {"reputation": 584, "user_id": 1736531, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/51dd1349c4296bd27318e4d4ebf22262?s=128&d=identicon&r=PG", "display_name": "picklechips", "link": "https://stackoverflow.com/users/1736531/picklechips"}, "is_accepted": true, "score": 0, "last_activity_date": 1490207630, "creation_date": 1490207630, "answer_id": 42960015, "question_id": 42959269, "link": "https://stackoverflow.com/questions/42959269/errormissing-type-specifier/42960015#42960015", "title": "ERROR:Missing type specifier", "body": "<p>In your <code>setMake</code> function it's declared as a string but returns no value. I believe you forgot to return the passed value.</p>\n\n<pre><code>//************\n// setMake\n//************\nstring Car::setMake(string carMake)\n{\n\n    make = carMake;\n    return make; // This line should do the trick\n\n}\n</code></pre>\n\n<p>I do suggest next time taking a closer look at what the compiler outputs, since it likely gave you a line number and even the name of the function where the issue was.</p>\n\n<p><strong>Side note</strong>: Generally set functions are declared as void since they usually don't need to return anything.</p>\n"}], "owner": {"reputation": 3, "user_id": 6684809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/252091c07f012ef01e5df627bc2899f0?s=128&d=identicon&r=PG&f=1", "display_name": "Colin Powers", "link": "https://stackoverflow.com/users/6684809/colin-powers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "closed_date": 1490210718, "accepted_answer_id": 42960015, "answer_count": 1, "score": -5, "last_activity_date": 1490419652, "creation_date": 1490205250, "last_edit_date": 1490419652, "question_id": 42959269, "link": "https://stackoverflow.com/questions/42959269/errormissing-type-specifier", "closed_reason": "Needs details or clarity", "title": "ERROR:Missing type specifier", "body": "<p>I am writing a car class program for my C++ class, and the only part Visual studios wont work with is anything to do with \"string and make\". I commented them out and the program runs just fine. Our teacher asked us to split it up to 3 separate pages. The error, as posted in the title is MISSING TYPE SPECIFIER. Turns out all that was needed was \"using namespace std;\" in the car.h file. </p>\n\n<p>Thank you for your help.</p>\n\n<pre><code>    #include \"stdafx.h\"\n    #include &lt;iostream&gt;\n    #include &lt;string&gt;\n    #include &lt;iomanip&gt;\n    #include \"Car.h\"\n    using namespace std;\n\n\n    int main()\n    {\n        // Declare car object\n        Car myCar;\n        int speed = 0, year;\n        string make;\n\n\n        cout &lt;&lt; \"This program will help you with your Car!\" &lt;&lt; endl;   //         intro message\n\n        cout &lt;&lt; \"Please enter the Year\" &lt;&lt; endl;   // store year\n        cin &gt;&gt; year;\n\n        cout &lt;&lt; \"Please enter the Make of the car\" &lt;&lt; endl;   // store make\n        cin &gt;&gt; make;\n\n\n        // call member functions to set car year and make.\n        myCar.setYear(2013);\n        myCar.setMake(\"Mustang GT\");\n\n        // call member functions to get car year and make\n        cout &lt;&lt; \"Your car's current year is: \" &lt;&lt;  myCar.getYear() &lt;&lt; endl;\n        cout &lt;&lt; \"Your car's current make is: \" &lt;&lt; myCar.getMake;\n        cout &lt;&lt; \"Your car's current speed is : \" &lt;&lt; speed &lt;&lt; \" mph\" &lt;&lt; endl;\n\n\n\n\n\n        return 0;\n     }\n</code></pre>\n\n<p>Here is Car.h</p>\n\n<pre><code>#pragma once\n#ifndef CAR_H\n#define CAR_H\n\n\n\n// Car class declaration\nclass Car\n{\n    private:\n        string make;\n        int year;\n        int speed;\n\n    public:\n        int myCar(int year, string make, int speed);\n\n        int setYear(int carYear);\n\n        int setSpeed(int carSpeed);\n\n        string setMake(string carMake);\n\n        int getYear();\n\n        int getSpeed();\n\n        string getMake();\n\n        void accelerate();\n\n        void brake();\n\n\n};\n</code></pre>\n\n<p>And here is Car.cpp</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;iomanip&gt;\n#include \"Car.h\"\nusing namespace std;\n\n\n//***\n//myCar\n//**\nint Car::myCar(int year, string make, int speed)\n{\n    int setYear(int year);\n    string setMake(string make);\n    return year, make, speed;\n}\n\n\n//**********\n// setYear\n//*********\nint Car::setYear(int carYear)\n{\n    year = carYear;\n    return carYear;\n\n}\n\n\n//************\n// setMake\n//************\nstring Car::setMake(string carMake)\n{\n\n    make = carMake;\n\n\n}\n//***    \n\n//***\n//setSpeed\n//***\nint Car::setSpeed(int carSpeed)\n{\n    speed = carSpeed;\n    return carSpeed;\n\n\n}\n//***\n\n//***\n//getYear\n//***\nint Car::getYear()\n{\n\n    return year;\n\n}\n//***\n\n//***\n//getMake\n//***\nstring Car::getMake()\n{\n    return make;\n\n}\n\n\n//***\n//getSpeed\n//***\nint Car::getSpeed()\n{\n\n    return speed;\n\n}\n//***\n\n//***\n// Accelerate\n//***\nvoid Car::accelerate()\n{\n    int speed = 0;\n    speed += 5;\n\n\n}\n//***\n\n//***\n// Brake\n//***\nvoid Car::brake()\n{\n    int speed = 0;\n    speed -= 5;\n\n}\n//***\n</code></pre>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1490205255, "post_id": 42959204, "comment_id": 73012829, "body": "This is where you would want to use <code>getline</code>."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1490205991, "post_id": 42959204, "comment_id": 73013296, "body": "break only exits the for loop, not the while loop."}, {"owner": {"reputation": 107, "user_id": 7752831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f23e6607db20ff4d95bceb7488488ed?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Kara", "link": "https://stackoverflow.com/users/7752831/okara"}, "edited": false, "score": 0, "creation_date": 1490211790, "post_id": 42959204, "comment_id": 73016667, "body": "getline would work? Because its a little weird hw user could write sentences that finishes in next line. About break, how can i make it for while loop. I need to stop taking inputs when program sees &quot;@&quot; or program needs to read only before &quot;@&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 3811633, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RxEl7.jpg?s=128&g=1", "display_name": "Matttheawesome1", "link": "https://stackoverflow.com/users/3811633/matttheawesome1"}, "edited": false, "score": 0, "creation_date": 1490374736, "post_id": 42990815, "comment_id": 73099772, "body": "My reason for questioning the use of ending on @ character is this: since in your code the user is never instructed to input the @ character to end the program, what happens if they never input a @ character? Your program will loop indefinitely, and the only reason you specify for doing so is that you don&#39;t know when your paragraph will end, thought I&#39;d clear that up real quick."}, {"owner": {"reputation": 107, "user_id": 7752831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f23e6607db20ff4d95bceb7488488ed?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Kara", "link": "https://stackoverflow.com/users/7752831/okara"}, "edited": false, "score": 0, "creation_date": 1490392096, "post_id": 42990815, "comment_id": 73108920, "body": "That is what homework wants. I wrote a do-while loop and yes i need to make an infinite loop if user never input a @. And i now how to get input from a user thx for that tho :)"}], "tags": [], "owner": {"reputation": 65, "user_id": 3811633, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RxEl7.jpg?s=128&g=1", "display_name": "Matttheawesome1", "link": "https://stackoverflow.com/users/3811633/matttheawesome1"}, "is_accepted": false, "score": 0, "last_activity_date": 1490325495, "creation_date": 1490325495, "answer_id": 42990815, "question_id": 42959204, "link": "https://stackoverflow.com/questions/42959204/i-need-to-write-a-code-that-takes-inputsentences-from-user-and-stops-at/42990815#42990815", "title": "I need to write a code that takes input(sentences) from user and stops at @", "body": "<p>I don't understand why you have the need to exit the program on reading the @ character... But this is how you read a sentence, hope this helps.</p>\n\n<pre><code> #include &lt;iostream&gt;\n #include &lt;string&gt;\n\n using std::cin;\n using std::cout;\n using std::string;\n using std::getline;\n //You could do using namespace std, but that uses a lot more methods and functions \n //that you don't need.\n\n int main(int argc, char* argv[])\n {\n         string parag;\n\n         cout &lt;&lt; \"Enter your sentence here: \";\n         getline(cin, parag); //Get the input until the user enters a newline. \n                             //usually via pressing enter.\n         cout &lt;&lt; \"\\nYou entered: \" &lt;&lt; parag; //The newline escape sequence is \\n\n         cin.ignore(); //Pause the program until newline is received.\n }\n</code></pre>\n\n<p><strong>Example output</strong></p>\n\n\n\n<pre><code> $ ./OutputParag.exe\n Enter your sentence here: My input string is a sentence.\n\n You entered: My input string is a sentence.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 107, "user_id": 7752831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f23e6607db20ff4d95bceb7488488ed?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Kara", "link": "https://stackoverflow.com/users/7752831/okara"}, "is_accepted": true, "score": 2, "last_activity_date": 1581405961, "last_edit_date": 1581405961, "creation_date": 1490392895, "answer_id": 43009856, "question_id": 42959204, "link": "https://stackoverflow.com/questions/42959204/i-need-to-write-a-code-that-takes-inputsentences-from-user-and-stops-at/43009856#43009856", "title": "I need to write a code that takes input(sentences) from user and stops at @", "body": "<pre><code>do\n\n{\n    parag = \"\";\n\ncin &gt;&gt; word;\n\nwhile (word != \"@\")\n{   \n    parag += word + \" \";\n    cin &gt;&gt; word;\n\n}\nparag = parag.substr (0, parag.length()-1); //Takes all characters but \"@\" at the end\n\nToLower(parag); //This code is in header file that our teacher gave us. Makes all characters lower case in order to make our code \"case insensitive\".\n\n}while ( ( CheckInput(parag) ) ); // This checks inputs(obviously) if inputs are correctly entered. \n</code></pre>\n\n<p>This is what i wrote after going to class and learning about do-while loop if anyone interested. Program will take infinite \"cin\" to create a paragraph. About why getline(cin, parag) wouldn't work user could write something like this</p>\n\n<p>\"Roses are red</p>\n\n<p>Violets are blue. @\"</p>\n\n<p>As you see sentence is not in the same line and getline takes only one line as inputs. And best part is (pls dont judge i am a beginner) with \"do\" i can say something like this if the input is wrong. \"Please enter your input again\" and i can take inputs without closing my program till all inputs are right. </p>\n\n<p>Rest my homework is about taking paragraph from user. Dividing paragraph to sentences as user inputs (with finding dots). Reversing all the sentences, asking user to write reverse sentences and compare those inputs with programs to see if user give reverse sentences all correctly and if not say how many mistakes did user do.</p>\n"}], "owner": {"reputation": 107, "user_id": 7752831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f23e6607db20ff4d95bceb7488488ed?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Kara", "link": "https://stackoverflow.com/users/7752831/okara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2532, "favorite_count": 1, "accepted_answer_id": 43009856, "answer_count": 2, "score": -1, "last_activity_date": 1581405961, "creation_date": 1490205069, "question_id": 42959204, "link": "https://stackoverflow.com/questions/42959204/i-need-to-write-a-code-that-takes-inputsentences-from-user-and-stops-at", "title": "I need to write a code that takes input(sentences) from user and stops at @", "body": "<p>As i said i need to write this code as my hw however i need to write this in while loop because we dont know how big will user write their sentences or how many sentences they will write. It is going to be a paragraph</p>\n\n<pre><code>string word;\nstring parag;\nwhile (cin &gt;&gt; word)\n{\n    parag += word;\n    for ( unsigned int k = 0; k &lt; parag.length(); k++ )\n    {\n        if (parag.at(k) == '@')\n        break;\n    }\n}\n</code></pre>\n\n<p>I know there are problems here but it wont stop even if i wrote \"@\". I dont know what to do i am just a beginner. </p>\n"}, {"tags": ["c++", "list", "inheritance", "type-conversion"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1490205129, "post_id": 42959192, "comment_id": 73012734, "body": "&quot;I was under the impression that in this case, the program would simply &#39;skip&#39; the parts of PolyMine that are not in Poly&quot; You were mistaken.  A <code>list&lt;Poly&gt;</code> and <code>list&lt;PolyMine&gt;</code> are 100% unrelated, and the compiler knows it."}, {"owner": {"reputation": 383, "user_id": 1640138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qNdkK.png?s=128&g=1", "display_name": "ProudOne", "link": "https://stackoverflow.com/users/1640138/proudone"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1490205320, "post_id": 42959192, "comment_id": 73012869, "body": "@MooingDuck My confusion stems from the simplicity of being able to do this: <code>Poly a = b;</code> where b is a &#39;PolyMine&#39;. It&#39;s just &#39;downgraded&#39;, if you will. Thanks for the comment."}, {"owner": {"reputation": 584, "user_id": 1736531, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/51dd1349c4296bd27318e4d4ebf22262?s=128&d=identicon&r=PG", "display_name": "picklechips", "link": "https://stackoverflow.com/users/1736531/picklechips"}, "edited": false, "score": 1, "creation_date": 1490205942, "post_id": 42959192, "comment_id": 73013265, "body": "I&#39;m not sure if this will work or not, but you could try passing in a list of pointers to Triangulate. That way you can have PolyMine objects stored in it. Might be worth getting a little more familiar with polymorphism.  <code>std::list&lt;Poly *&gt; outlinePolygons; &#47;&#47; Still fill it with PolyMine objects</code>  Then you could try passing that in. Again not sure if it&#39;ll work but worth a shot"}, {"owner": {"reputation": 383, "user_id": 1640138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qNdkK.png?s=128&g=1", "display_name": "ProudOne", "link": "https://stackoverflow.com/users/1640138/proudone"}, "reply_to_user": {"reputation": 584, "user_id": 1736531, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/51dd1349c4296bd27318e4d4ebf22262?s=128&d=identicon&r=PG", "display_name": "picklechips", "link": "https://stackoverflow.com/users/1736531/picklechips"}, "edited": false, "score": 0, "creation_date": 1490206056, "post_id": 42959192, "comment_id": 73013335, "body": "@picklechips Triangulate is a library function I cannot edit. If there is no &quot;convenient&quot; solution, I will likely have to just iterate and convert each item. Thanks for the comment."}, {"owner": {"reputation": 584, "user_id": 1736531, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/51dd1349c4296bd27318e4d4ebf22262?s=128&d=identicon&r=PG", "display_name": "picklechips", "link": "https://stackoverflow.com/users/1736531/picklechips"}, "edited": false, "score": 1, "creation_date": 1490206103, "post_id": 42959192, "comment_id": 73013361, "body": "I understand, and you shouldn&#39;t have to edit it. Santiago Varela just posted an answer with what I was saying, take a look there."}, {"owner": {"reputation": 2089, "user_id": 3022583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/re7Fa.png?s=128&g=1", "display_name": "Santiago Varela", "link": "https://stackoverflow.com/users/3022583/santiago-varela"}, "edited": false, "score": 0, "creation_date": 1490206348, "post_id": 42959192, "comment_id": 73013518, "body": "Triangulate(const std::list&lt;Poly*&gt;&amp; l1, std::list&lt;Poly*&gt; &amp; l1); is this the function signature? Or Triangulate(const std::list&lt;Poly*&gt;*&amp; l1, std::list&lt;Poly*&gt;* &amp; l1);? Mind sharing the signature for Triangulate, so we can finish helping you with your problem."}, {"owner": {"reputation": 383, "user_id": 1640138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qNdkK.png?s=128&g=1", "display_name": "ProudOne", "link": "https://stackoverflow.com/users/1640138/proudone"}, "reply_to_user": {"reputation": 2089, "user_id": 3022583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/re7Fa.png?s=128&g=1", "display_name": "Santiago Varela", "link": "https://stackoverflow.com/users/3022583/santiago-varela"}, "edited": false, "score": 0, "creation_date": 1490207129, "post_id": 42959192, "comment_id": 73014060, "body": "@SantiagoVarela Thank you kindly for all the work you&#39;ve done already. The signature is <code>Triangulate(std::list&lt;Poly&gt; *inpolys, std::list&lt;Poly&gt; *outtris);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 584, "user_id": 1736531, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/51dd1349c4296bd27318e4d4ebf22262?s=128&d=identicon&r=PG", "display_name": "picklechips", "link": "https://stackoverflow.com/users/1736531/picklechips"}, "edited": false, "score": 0, "creation_date": 1490206430, "post_id": 42959529, "comment_id": 73013576, "body": "You&#39;ll also have to remember to delete the objects when you&#39;re done with them when doing it this way."}, {"owner": {"reputation": 2089, "user_id": 3022583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/re7Fa.png?s=128&g=1", "display_name": "Santiago Varela", "link": "https://stackoverflow.com/users/3022583/santiago-varela"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1490206565, "post_id": 42959529, "comment_id": 73013674, "body": "Thanks. @GuillaumeRacicot has now used std::unique_ptr (smart pointer) which takes away the pain of having to deallocate (delete) memory."}], "tags": [], "owner": {"reputation": 2089, "user_id": 3022583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/re7Fa.png?s=128&g=1", "display_name": "Santiago Varela", "link": "https://stackoverflow.com/users/3022583/santiago-varela"}, "is_accepted": true, "score": 1, "last_activity_date": 1490208020, "last_edit_date": 1490208020, "creation_date": 1490206042, "answer_id": 42959529, "question_id": 42959192, "link": "https://stackoverflow.com/questions/42959192/list-of-subclass-objects-reinterpreted-as-a-list-of-base-class-objects-c11/42959529#42959529", "title": "List of subclass objects reinterpreted as a list of base class objects? (C++11)", "body": "<p>In C++ you use pointers and dynamic memory for Generalisation/Inheritance.</p>\n\n<p>You can make your lists to Poly pointers:</p>\n\n<pre><code>std::list&lt;std::unique_ptr&lt;Poly&gt;&gt; outlinePolygons;\nstd::list&lt;std::unique_ptr&lt;Poly&gt;&gt; resultTriangles;\n\nPoly* childPoly = new PolyMine;\nPoly* childPoly2 = new AnotherPoly;  // Another derived class from Poly\noutlinePolygons.insert(childPoly);\noutlinePolygons.insert(childPoly2);\n</code></pre>\n\n<p>In this way you're storing all <code>Poly</code> references to your concrete derived objects.</p>\n\n<h2>Update</h2>\n\n<p>Knowing that the <code>Triangulate</code> function signature is:</p>\n\n<pre><code>Triangulate(std::list&lt;Poly&gt; *inpolys, std::list&lt;Poly&gt; *outtris);\n</code></pre>\n\n<p>Your lists can now be instantiated with smart pointers like so:</p>\n\n<pre><code>std::unique_ptr&lt;std::list&lt;Poly&gt;&gt; outlinePolygons = new std::list&lt;Poly&gt;;\nstd::unique_ptr&lt;std::list&lt;Poly&gt;&gt; resultTriangles = new std::list&lt;Poly&gt;;\n</code></pre>\n\n<p><code>Triangulate</code> will now work, but I foresee that there will be a problem, because <code>std::list&lt;Poly*&gt;</code> or <code>std::list&lt;std:unique_ptr&lt;&lt;Poly&gt;&gt;</code> is different from <code>std::list&lt;Poly&gt;*</code>, which is what <code>Triangulate</code> expects as its two arguments. You will not be able to populate list <code>std::list&lt;Poly&gt;*</code> with <code>PolyMine</code> derived class objects, unless you can create another function which takes <code>Poly*</code> lists:</p>\n\n<pre><code>Triangulate(std::list&lt;Poly*&gt; *inpolys, std::list&lt;Poly*&gt; *outtris); // A function with the same name but different parameter types is allowed in C++.\n</code></pre>\n"}], "owner": {"reputation": 383, "user_id": 1640138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qNdkK.png?s=128&g=1", "display_name": "ProudOne", "link": "https://stackoverflow.com/users/1640138/proudone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1101, "favorite_count": 0, "accepted_answer_id": 42959529, "answer_count": 1, "score": 1, "last_activity_date": 1490208020, "creation_date": 1490205028, "question_id": 42959192, "link": "https://stackoverflow.com/questions/42959192/list-of-subclass-objects-reinterpreted-as-a-list-of-base-class-objects-c11", "title": "List of subclass objects reinterpreted as a list of base class objects? (C++11)", "body": "<p>I've been working with a library that provides polygonal triangulation. Since I'm trying to tack on some more information (an ID and a bunch of methods) to the polygons it consumes and the triangles it returns, I inherited its internal polygon class (Poly) to create my own polygon class (PolyMine). I have a list of hundreds of those Polygons, enough of them that iterating them for any conversion takes quite a while. I cannot allocate memory beforehand as I'm consuming an unknown number of polygons from an SVG file at runtime.</p>\n\n<p>Here's the definition:</p>\n\n<pre><code>class PolyMine : public Poly\n{\npublic:\n  void AddPoint(float _x, float _y);\n\nprivate:\n  int id\n  // ...etc\n}\n</code></pre>\n\n<p>I'm creating a list of objects:</p>\n\n<pre><code>std::list&lt;PolyMine&gt; outlinePolygons;\nstd::list&lt;PolyMine&gt; resultTriangles;\n</code></pre>\n\n<p>and wanted to use them in the triangulation:</p>\n\n<pre><code>Triangulate(&amp;outlinePolygons, &amp;resultTriangles);\n</code></pre>\n\n<p>but, as people with more experience in C++ might already see, this isn't working as <code>Triangulate</code> expects a pointer to a <code>Poly</code> list. Now, I was under the impression that in this case, the program would simply 'skip' the parts of <code>PolyMine</code> that are not in <code>Poly</code> and use the list as such. </p>\n\n<p>After attempting to google the issue, I haven't come up with anything except C# solutions. At this point, I'm assuming I lack the verbage to actually formulate a good search query.</p>\n\n<p>Do I really have to iterate over the list just to recast the children to their parent type? Is there a conversion I am missing? Is this not even possible or plausible? Any hints are appreciated.</p>\n"}, {"tags": ["c++", "directshow", "skype", "graphedit"], "comments": [{"owner": {"reputation": 3061, "user_id": 881712, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/852956f1a8a603a7d09d10e856f821be?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/881712/mark"}, "edited": false, "score": 0, "creation_date": 1490205202, "post_id": 42959100, "comment_id": 73012801, "body": "I&#39;ve just noticed that Skype &quot;forces&quot; a smaller resolution! That&#39;s because I get such a weird behavior."}, {"owner": {"reputation": 3061, "user_id": 881712, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/852956f1a8a603a7d09d10e856f821be?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/881712/mark"}, "edited": false, "score": 0, "creation_date": 1490206011, "post_id": 42959100, "comment_id": 73013308, "body": "I confirm. I should take care of calling of <code>SetMediaType</code> and change all the sizes according."}], "owner": {"reputation": 3061, "user_id": 881712, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/852956f1a8a603a7d09d10e856f821be?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/881712/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490204735, "creation_date": 1490204735, "question_id": 42959100, "link": "https://stackoverflow.com/questions/42959100/issues-testing-a-directshow-filter-in-skype", "title": "Issues testing a DirectShow filter in Skype", "body": "<p>This is the <code>FillBuffer</code> function:</p>\n\n<pre><code>HRESULT CVCamStream::FillBuffer(IMediaSample *pms)\n{\n    REFERENCE_TIME rtNow;\n    REFERENCE_TIME avgFrameTime = ((VIDEOINFOHEADER*)m_mt.pbFormat)-&gt;AvgTimePerFrame;\n\n    rtNow = m_rtLastTime;\n    m_rtLastTime += avgFrameTime;\n    pms-&gt;SetTime(&amp;rtNow, &amp;m_rtLastTime);\n    pms-&gt;SetSyncPoint(TRUE);\n\n    BYTE *pData;\n    pms-&gt;GetPointer(&amp;pData);\n    long lDataLen = pms-&gt;GetSize();\n\n    ProcessFrame(hdc, &amp;pData);\n\n    return NOERROR;\n}\n</code></pre>\n\n<p>and here what I do inside <code>ProcessFrame</code>:</p>\n\n<pre><code>void ProcessFrame(HDC hdc, BYTE **lpbitmap)\n{\n    BYTE *q = *lpbitmap;\n    const int32_t height = 640;\n    const int32_t width = 480;\n    for (int y = 0; y &lt; height; y++)\n    {\n        uint8_t* p = bgra_image_data;\n        for (int x = 0; x &lt; width; x++)\n        {\n            if (p[3] &gt; 0) for (int i = 0; i &lt; 3; i++) q[i] = p[i];\n\n            p += 4;\n            q += 3;\n        }\n    }\n}\n</code></pre>\n\n<p>In details, I'm playing with the bytes of a <code>BRGA</code> images, with the same dimensions.</p>\n\n<p>Well, using graphedt it works like a charm!\nInstead, selecting this filter as Skype source sometimes it renders completely black, sometimes it messes up everything - the image is not readable.</p>\n\n<p>In any case after few seconds it crashes due to a write access violation.\nDo you see any evidence of errors in my code, that graphedt might ignore?</p>\n"}, {"tags": ["c++", "c++14", "overload-resolution"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1490204893, "post_id": 42959061, "comment_id": 73012600, "body": "<i>where I would expect the float overload to be chosen</i> -- Why would you expect this overload to occur?"}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1490205069, "post_id": 42959061, "comment_id": 73012696, "body": "@PaulMcKenzie because that does happen with e.g. base * 2, and it would be great to be able not to have to think about whether you&#39;re using a built-in operator or a function, and therefore whether you do or don&#39;t need to specify a float explicitly if you want the correct overload to run."}, {"owner": {"reputation": 10133, "user_id": 341971, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/humD6.jpg?s=128&g=1", "display_name": "Uri", "link": "https://stackoverflow.com/users/341971/uri"}, "edited": false, "score": 0, "creation_date": 1491671627, "post_id": 42959061, "comment_id": 73661676, "body": "No problems in Visual Studio"}], "answers": [{"tags": [], "owner": {"reputation": 107, "user_id": 2229283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e521b92f4b2c08dc363e0288a5313e6f?s=128&d=identicon&r=PG", "display_name": "saykou", "link": "https://stackoverflow.com/users/2229283/saykou"}, "is_accepted": false, "score": 0, "last_activity_date": 1490205068, "creation_date": 1490205068, "answer_id": 42959203, "question_id": 42959061, "link": "https://stackoverflow.com/questions/42959061/why-does-stdpow-of-a-float-and-int-invoke-this-overload/42959203#42959203", "title": "Why does std::pow of a float and int invoke this overload?", "body": "<p>From cpp <a href=\"http://en.cppreference.com/w/cpp/numeric/math/pow\" rel=\"nofollow noreferrer\">reference</a></p>\n\n<blockquote>\n  <p>7) A set of overloads or a function template for all combinations of\n  arguments of arithmetic type not covered by 1-3). If any argument has\n  integral type, it is cast to double. If any argument is long double,\n  then the return type Promoted is also long double, otherwise the\n  return type is always double.</p>\n</blockquote>\n\n<p>\"If any argument has integral type, it is cast to double\" \nthen it would call, converting your double to float.</p>\n\n<pre><code>float       pow( float base, float exp );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1490205304, "post_id": 42959220, "comment_id": 73012857, "body": "Is this just a general comment in the <code>std::pow</code> reference which is a result of the general overload rules, or is this special behavior implemented for <code>std::pow</code>?"}, {"owner": {"reputation": 21240, "user_id": 951423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UlSg8.png?s=128&g=1", "display_name": "Pixelchemist", "link": "https://stackoverflow.com/users/951423/pixelchemist"}, "reply_to_user": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1490205385, "post_id": 42959220, "comment_id": 73012916, "body": "@Danra: It holds for all math functions. I added the standard text."}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1490205705, "post_id": 42959220, "comment_id": 73013114, "body": "Thanks, what I meant was whether this overload choosing behavior was due to the general C++ overloading resolution rules. It seems it isn&#39;t, so I guess either compilers have special overloading resolution behavior for these functions, or the standard library implementations do some hacks. Here&#39;s the demonstration about the same issue not occurring with my own defined function <a href=\"https://wandbox.org/permlink/l4rocKUvLEiXzdHY\" rel=\"nofollow noreferrer\">wandbox.org/permlink/l4rocKUvLEiXzdHY</a>"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 1, "creation_date": 1490205823, "post_id": 42959220, "comment_id": 73013182, "body": "@Danra It absolutely is because of the general C++ overloading rules."}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1490205845, "post_id": 42959220, "comment_id": 73013195, "body": "Looking closer, the standard library trick being used is shown in the full warning text: &quot;implicit conversion loses floating-point precision: &#39;typename std::__lazy_enable_if&lt;std::is_arithmetic&lt;float&gt;::value &amp;&amp; std::is_arithmetic&lt;int&gt;::value, std::__promote&lt;float, int&gt; &gt;::type&#39; (aka &#39;double&#39;) to &#39;float&#39; [-Wconversion]&quot;"}, {"owner": {"reputation": 21240, "user_id": 951423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UlSg8.png?s=128&g=1", "display_name": "Pixelchemist", "link": "https://stackoverflow.com/users/951423/pixelchemist"}, "reply_to_user": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 2, "creation_date": 1490205848, "post_id": 42959220, "comment_id": 73013199, "body": "@Danra: No there is not any magic overload resolution. Your example is missing the overloads demanded by the standard."}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 0, "creation_date": 1490205914, "post_id": 42959220, "comment_id": 73013242, "body": "I see now. Thanks!"}], "tags": [], "owner": {"reputation": 21240, "user_id": 951423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UlSg8.png?s=128&g=1", "display_name": "Pixelchemist", "link": "https://stackoverflow.com/users/951423/pixelchemist"}, "is_accepted": true, "score": 4, "last_activity_date": 1490205363, "last_edit_date": 1592644375, "creation_date": 1490205107, "answer_id": 42959220, "question_id": 42959061, "link": "https://stackoverflow.com/questions/42959061/why-does-stdpow-of-a-float-and-int-invoke-this-overload/42959220#42959220", "title": "Why does std::pow of a float and int invoke this overload?", "body": "<p>Since C++11, mixed argument <a href=\"http://en.cppreference.com/w/cpp/numeric/math/pow\" rel=\"nofollow noreferrer\"><code>pow</code></a> has any integral argument cast to double. The return type of the mixed argument functions is always <code>double</code> except when one argument is <code>long double</code> then the result is <code>long double</code>.</p>\n<blockquote>\n<h2>[c.math]</h2>\n<p>In addition to the double versions of the math functions in , C++ adds float and long double overloaded versions of these functions, with the same semantics.</p>\n<p>Moreover, there shall be additional overloads sufficient to ensure:</p>\n<ul>\n<li><p>If any argument corresponding to a double parameter has type long double, then all arguments corresponding to double parameters are effectively cast to long double.</p>\n</li>\n<li><p>Otherwise, if any argument corresponding to a double parameter has type double or an integer type, then all arguments corresponding to double parameters are effectively cast to double.</p>\n</li>\n<li><p>Otherwise, all arguments corresponding to double parameters are effectively cast to float.</p>\n</li>\n</ul>\n</blockquote>\n<p>So to sum up:</p>\n<ul>\n<li>One argument <code>long double</code> &gt;&gt; <code>long double</code></li>\n<li>Both arguments <code>float</code> &gt;&gt; <code>float</code></li>\n<li>Otherwise &gt;&gt; <code>double</code></li>\n</ul>\n"}], "owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 42959220, "answer_count": 2, "score": 4, "last_activity_date": 1490205363, "creation_date": 1490204637, "last_edit_date": 1490205117, "question_id": 42959061, "link": "https://stackoverflow.com/questions/42959061/why-does-stdpow-of-a-float-and-int-invoke-this-overload", "title": "Why does std::pow of a float and int invoke this overload?", "body": "<p>The following:</p>\n\n<pre><code>#include &lt;cmath&gt;\n\nint main()\n{\n    float base = 2.0f;\n    float result = std::pow(base, 2);\n    return 0;\n}\n</code></pre>\n\n<p>Triggers a <code>-Wconversion</code> warning in case it is turned on. <a href=\"https://wandbox.org/permlink/rGvRPgZXFtbM8WM8\" rel=\"nofollow noreferrer\">Wandbox</a></p>\n\n<p>It seems that the <code>double</code> overload of <code>std::pow</code> is invoked, where I would expect the <code>float</code> overload to be chosen (with the <code>int</code> exponent being cast to <code>float</code>). Can someone who knows his overloads please explain why?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1490204775, "post_id": 42959004, "comment_id": 73012515, "body": "You have undefined behavior in the line <code>People[counter] = sPerson;</code>. You need to use <code>push_back</code> for adding new elements, since there is no guarantee that <code>People[counter]</code> will point to a valid memory (unless you used <code>resize</code> first)."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1490204985, "post_id": 42959004, "comment_id": 73012651, "body": "Do not do <code>typedef struct</code> in C++, it is ugly and completely redundant."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1490205205, "post_id": 42959004, "comment_id": 73012804, "body": "@AlgirdasPreid\u017eius OP does show <code>resize()</code> in his code"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1490205521, "post_id": 42959004, "comment_id": 73013003, "body": "@Slava Then, I guess I am blind. I guess, since the <code>resize</code> was hidden among the <code>struct</code>, and global(?) variable definitions, I didn&#39;t see the <code>resize</code> there. Now, I doubt that the snippet is even from the global scope. In addition, OP still has UB, if the number of elements exceed <code>100</code>, since he doesn&#39;t have any checks to enforce such a limit (and I neglected to mention that, since I didn&#39;t even see the <code>resize</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1490205087, "post_id": 42959145, "comment_id": 73012708, "body": "&quot;already present with the fastest search algorithms&quot; this statement is at least questionable if not wrong."}, {"owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1490205172, "post_id": 42959145, "comment_id": 73012775, "body": "@Slava: Would &quot;with non-linear search algorithm&quot; be more accurate? <code>std::set</code> search is binary, isn&#39;t it?"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1490206682, "post_id": 42959145, "comment_id": 73013767, "body": "The problem with <code>set</code>/<code>map</code> is that it can&#39;t have <i>two</i> keys simultaneously. The problem defines two keys, Name+Address and BirthCertificate."}, {"owner": {"reputation": 49, "user_id": 975081, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3f15dd3cb1a74d87d2d77587ab8aef93?s=128&d=identicon&r=PG", "display_name": "TheDoctor Bombastic", "link": "https://stackoverflow.com/users/975081/thedoctor-bombastic"}, "edited": false, "score": 0, "creation_date": 1490218191, "post_id": 42959145, "comment_id": 73020124, "body": "Thank you for the anwer. Unfortunatelly I cannot use set, neither map. It is  in the introduction of the taks for the Software programming."}], "tags": [], "owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "is_accepted": false, "score": 1, "last_activity_date": 1490205097, "last_edit_date": 1490205097, "creation_date": 1490204911, "answer_id": 42959145, "question_id": 42959004, "link": "https://stackoverflow.com/questions/42959004/lower-bound-for-vector-of-a-struct-applied-for-comparing-strings/42959145#42959145", "title": "lower_bound for vector of a struct applied for comparing strings", "body": "<p><code>std::lower_bound</code> can only be used fr sorted containers (else, you'll get an invalid result...with no warning/error), which is not the case of your <code>std::vector</code>.</p>\n\n<p>The easiest would be to store your elements in a sorted container. Like a <code>std::set</code> or <code>std::map</code>. Then your sorted container will be able to report if an object is already present with non-linear search algorithm.</p>\n\n<p>Those container will require you to provide a comparison operator:</p>\n\n<pre><code>bool operator&lt;(const SPERSON&amp; left, const SPERSON&amp; right )\n{\n    return left.name &lt; right.name;\n}\n</code></pre>\n\n<p>Then do:</p>\n\n<pre><code>std::set&lt;SPERSON&gt; People;\n</code></pre>\n\n<p>Add elements by using:</p>\n\n<pre><code>if ( People.find( sPerson ) == People.end() )\n    People.insert( sPerson );\n// else: item with same name already exists!\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 177, "user_id": 4624418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3c561373417cec1efdc0148a1b7f84a?s=128&d=identicon&r=PG&f=1", "display_name": "deep_rugs", "link": "https://stackoverflow.com/users/4624418/deep-rugs"}, "is_accepted": false, "score": 0, "last_activity_date": 1490205650, "creation_date": 1490205650, "answer_id": 42959393, "question_id": 42959004, "link": "https://stackoverflow.com/questions/42959004/lower-bound-for-vector-of-a-struct-applied-for-comparing-strings/42959393#42959393", "title": "lower_bound for vector of a struct applied for comparing strings", "body": "<p>If space is not an issue in your program, you can use <code>std::map</code>.</p>\n\n<p>Maintain a map <em>m1</em> of . Whenever you call <code>NewPerson()</code> update the map m1. </p>\n\n<p>Maintain another map <em>m2</em>, for . Whenever you call <code>NewPerson()</code> update the map m2. </p>\n\n<p>Every time you add call <code>NewPerson()</code>  call the <code>find()</code>  of both m1 and m2. </p>\n\n<p><code> map.find()</code>  is logarithmic.</p>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 975081, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3f15dd3cb1a74d87d2d77587ab8aef93?s=128&d=identicon&r=PG", "display_name": "TheDoctor Bombastic", "link": "https://stackoverflow.com/users/975081/thedoctor-bombastic"}, "edited": false, "score": 0, "creation_date": 1490218244, "post_id": 42959650, "comment_id": 73020140, "body": "Thank you for the answer. I have tried it and it does not work in this case:  CPeople people;  assert ( person.NewPerson( &quot;Jean&quot;, &quot;Kolejni&quot;, &quot;abcdef&quot; ) );  assert ( ! person.NewCompany ( &quot;jEan, &quot;kOlEjNi&quot;, &quot;1234&quot; ) );    In the second case it should return false, but it returns true, so it adds a new record although the person with the name and address is same, there is a difference in the capital letters. So it is perhaps sensitive."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 49, "user_id": 975081, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3f15dd3cb1a74d87d2d77587ab8aef93?s=128&d=identicon&r=PG", "display_name": "TheDoctor Bombastic", "link": "https://stackoverflow.com/users/975081/thedoctor-bombastic"}, "edited": false, "score": 0, "creation_date": 1490220155, "post_id": 42959650, "comment_id": 73021021, "body": "OK, I misunderstand criteria you using to search, answer is updated"}, {"owner": {"reputation": 49, "user_id": 975081, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3f15dd3cb1a74d87d2d77587ab8aef93?s=128&d=identicon&r=PG", "display_name": "TheDoctor Bombastic", "link": "https://stackoverflow.com/users/975081/thedoctor-bombastic"}, "edited": false, "score": 0, "creation_date": 1490402907, "post_id": 42959650, "comment_id": 73112241, "body": "Thank you very much Slava. Finally it works, that is great. I updated my text, if you please have a look at it, you can see it bello the line. Thank you."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1490220112, "last_edit_date": 1490220112, "creation_date": 1490206431, "answer_id": 42959650, "question_id": 42959004, "link": "https://stackoverflow.com/questions/42959004/lower-bound-for-vector-of-a-struct-applied-for-comparing-strings/42959650#42959650", "title": "lower_bound for vector of a struct applied for comparing strings", "body": "<p>First of all <code>typedef struct</code> is completely unnecessary in C++, just define your structure:</p>\n\n<pre><code>struct SPerson {\n   string name;\n   string address;\n   string birthcertificatenumber;\n};\nstd::vector&lt;SPerson&gt; People;\n</code></pre>\n\n<p>unlike C you can use <code>struct</code> name without keyword <code>struct</code> hence that idiom is redundant.</p>\n\n<p>Now to be able to use <code>std::lower_bound</code> your data must be sorted. As you have 2 different criteria you would have to create index to speed up your lookup:</p>\n\n<pre><code>std::vector&lt;SPerson&gt; People;\nstd::vector&lt;size_t&gt; idxNameAddress;\nstd::vector&lt;size_t&gt; idxBirthCertificate;\n</code></pre>\n\n<p>and you need to keep indexes updated when you insert new person:</p>\n\n<pre><code>bool insertPerson( const SPerson &amp;p ) {\n    const auto cmpNameAddress = []( size_t u1, size_t u2 ) {\n         const SPerson &amp;p1 = People[u1];\n         const SPerson &amp;p2 = People[u2];\n         return std::tie( p1.name, p1.address ) &lt; std::tie( p2.name, p2.address );\n    }\n    const auto cmpBirthSert = []( size_t u1, size_t u2 ) {\n         const SPerson &amp;p1 = People[u1];\n         const SPerson &amp;p2 = People[u2];\n         return p1.birthcertificate &lt; p2.birthcertificate;\n    }\n}\n    size_t newId = People.size();\n    People.push_back( p );\n    auto p1 = std::equal_range( idxNameAddress.begin(), idxNameAddress.end(), newId, cmpNameAddress );\n    auto p2 = std::equal_range( idxBirthCertificate.begin(), idxBirthCertificate.end(), newId, cmpBirthSert );\n\n    if( p1.first != p1.second or p2.first != p2.second ) {\n        People.pop_back();\n        return false; // already there\n    }\n    idxNameAddress.insert( p1.first, newId );\n    idxBirthCertificate.insert( p2.first, newId );\n    return true;\n}\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 975081, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3f15dd3cb1a74d87d2d77587ab8aef93?s=128&d=identicon&r=PG", "display_name": "TheDoctor Bombastic", "link": "https://stackoverflow.com/users/975081/thedoctor-bombastic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 653, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1490403129, "creation_date": 1490204462, "last_edit_date": 1490403129, "question_id": 42959004, "link": "https://stackoverflow.com/questions/42959004/lower-bound-for-vector-of-a-struct-applied-for-comparing-strings", "title": "lower_bound for vector of a struct applied for comparing strings", "body": "<p>I would like to ask you for a question, but firstly I will explain it...</p>\n\n<p>I have a structure SPerson in the vector People.</p>\n\n<pre><code>typedef struct SPERSON {\n   string name;\n   string address;\n   string birthcertificatenumber;\n} SPerson;\nstd::vector&lt;SPerson&gt; People;\nPeople.resize(100);\ncounter = 0;\n</code></pre>\n\n<p>There is a class where is the function for adding a new person</p>\n\n<pre><code>bool NewPerson(const string &amp; name, const string &amp; address, const string &amp; birthcertifikatenumber)\n{\n   SPerson sPerson;\n   sPerson.name = name;\n   sPerson.address = address;\n   sPerson.birthcertificatenumber = birthcertificatenumber;\n   People[counter] = sPerson;\n   counter++;\n return true;\n}\n</code></pre>\n\n<p>In this function I need to check whether there is already a person WITH THE SAME NAME \"AND\" ADDRESS OR a person WITH THE BIRTH CERTIFICATE NUMBER</p>\n\n<p>I need to search it logharitmicaly, not linearly. </p>\n\n<p>I used the function inside the NewPerson that is below which works how I want but when having a lot of data, it is slow and I need to have quicker. I have heard about lower_bound function\nfor binary search, but I do not know how to apply it for my case. Can you please give me an advice. Thank you.</p>\n\n<pre><code> auto it = find_if(begin(People), end(People), [=] (SPerson const&amp; f) { \n    return (((strcasecmp(name.c_str(), f.name.c_str()) == 0) and (strcasecmp(address.c_str(), f.address.c_str()) == 0)) or (f.birthcertifikatenumber == birthcertifikatenumber));  \n    });\nbool found = (it != end(People)); \nif (found == true)\n{    \n    return false;\n}\n</code></pre>\n\n<hr>\n\n<p>@Slava: Thank you, it actually works just fine.</p>\n\n<p>I have these records on input:</p>\n\n<ul>\n<li>Name: John, address:eee, birth date certificate:abcdef</li>\n<li>Name: Pierre, address:aaa, birth date certificate:123456</li>\n<li>Name: Jean, address:bbb, birth date certificate:1234</li>\n<li>Name: Peter, address:ccc, birth date certificate:ABCDEF</li>\n</ul>\n\n<p>It sorts by the birt date cerfificate just like this:</p>\n\n<ul>\n<li>Name: Jean, address:bbb, birth date certificate:1234</li>\n<li>Name: Pierre, address:aaa, birth date certificate:123456</li>\n<li>Name: Peter, address:ccc, birth date certificate:ABCDEF</li>\n<li>Name: John, address:eee, birth date certificate:abcdef</li>\n</ul>\n\n<p>And by the name and address it sorts like this:</p>\n\n<ul>\n<li>Name: Jean, address:bbb, birth date certificate:1234</li>\n<li>Name: John, address:eee, birth date certificate:abcdef</li>\n<li>Name: Peter, address:ccc, birth date certificate:ABCDEF</li>\n<li>Name: Pierre, address:aaa, birth date certificate:123456</li>\n</ul>\n\n<p>Great, thank you. Now I would like to find a person either by its name and address or by the birth date cerfificat, so I can call the functions like:\nErasePerson(\"Peter\", \"ccc\");  // erasing the person by its name and address\nErasePerson(\"123456\");  // erasing the person by its birth date cerfificate</p>\n\n<p>I would like to use the O(log n), so now I would like to find the specific person and erase it. I am not sure how to use the lower_bound function. I have tried some things, but no success. I am not sure how to create the compare function and if that I have is correct.</p>\n\n<pre><code> struct SPerson {\n     string name;\n     string address;\n     string birthdatecertificate;\n};   \nstd::vector&lt;SPerson&gt; VPeople;\nstd::vector&lt;size_t&gt; idxNameAddress;\n\nbool People::ErasePerson(const string &amp; name, const string &amp; address)\n{\n   SPerson Person;\n   Person.name = name;\n   Person.address = address;\n   Person.birthdatecertificate= \"\"; \n\n  std::lower_bound(idxNameAddress.begin(), idxNameAddress.end(), Person, cmpFunction);\nreturn false;\n}\n</code></pre>\n"}, {"tags": ["c++", "language-lawyer", "value-categories"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1490204233, "post_id": 42958730, "comment_id": 73012186, "body": "I don&#39;t get it.  in <code>(x &gt; y ? x : y)</code> <code>x</code> is not grater than <code>y</code> so <code>y</code> is the result but you print <code>x</code> expecting it to be changed."}, {"owner": {"reputation": 7072, "user_id": 1816262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IcKpN.png?s=128&g=1", "display_name": "OMGtechy", "link": "https://stackoverflow.com/users/1816262/omgtechy"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1490204397, "post_id": 42958730, "comment_id": 73012286, "body": "@NathanOliver doh, you&#39;re right, I&#39;ll edit the question"}, {"owner": {"reputation": 7072, "user_id": 1816262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IcKpN.png?s=128&g=1", "display_name": "OMGtechy", "link": "https://stackoverflow.com/users/1816262/omgtechy"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1490204555, "post_id": 42958730, "comment_id": 73012387, "body": "@WhozCraig editted, my question is has reduced to &quot;why is this the case&quot; now, because I can&#39;t see why it&#39;d act like an <code>int&amp;</code> rather than just assigning to some dummy variable."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1490204817, "post_id": 42958730, "comment_id": 73012544, "body": "Well, the behaviour you&#39;re seeing is certainly correct. Each term (<code>x</code> and <code>y</code>) are glvalues of the same value category (in this case lvalue) and type (in this case <code>int</code>), so the result of the expression per the standard you cited should be an lvalue <code>int</code>. So the root of your question is why this is not treated as an xvalue? Is that right? Isn&#39;t the answer to that exactly what you cited? <i>&quot;...the result is of that type and value category ...&quot;</i>"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1490212113, "post_id": 42958730, "comment_id": 73016862, "body": "@WhozCraig Rather, I think OMG is asking &quot;is there a guarantee in the standard that the lvalue that <code>true?x:y</code> returns is <code>x</code> and not some anonymous lvalue conjured out of thin air, whose value happens to be the same as <code>x</code>&quot;.  OMG, this may(?) vary from one version of C++ to another; can you be specific about what version(s) of C++ you are asking about?"}, {"owner": {"reputation": 7072, "user_id": 1816262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IcKpN.png?s=128&g=1", "display_name": "OMGtechy", "link": "https://stackoverflow.com/users/1816262/omgtechy"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1490221234, "post_id": 42958730, "comment_id": 73021459, "body": "@Yakk yes, that is what I mean. I&#39;d be interested to know how it changed over time, but I&#39;m most interested in the latest standard (which is C++14 at the time of writing)."}], "owner": {"reputation": 7072, "user_id": 1816262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IcKpN.png?s=128&g=1", "display_name": "OMGtechy", "link": "https://stackoverflow.com/users/1816262/omgtechy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 2, "answer_count": 0, "score": 3, "last_activity_date": 1490204472, "creation_date": 1490203657, "last_edit_date": 1490204472, "question_id": 42958730, "link": "https://stackoverflow.com/questions/42958730/do-assignments-to-the-result-of-conditional-expressions-where-the-second-and-thi", "title": "Do assignments to the result of conditional expressions where the second and third operands are variables of the same type and value category persist?", "body": "<p>Whilst learning about value categories, I found that the following snippet compiled and run just fine:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main() {\n    int x = 1;\n    int y = 2;\n    (true ? x : y) = 4;\n    std::cout &lt;&lt; x &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Here's the output:</p>\n\n<pre><code>4\n</code></pre>\n\n<p>First, I checked whether this statement was legal C++, and I believe it is because of the following:</p>\n\n<blockquote>\n  <p><strong>N4296 5.16.4 Conditional operator [expr.cond]</strong></p>\n  \n  <p>If the second and third operands are glvalues of the same value\n  category and have the same type, the result is of that type and value\n  category and it is a bit-field if the second or the third operand is a\n  bit-field, or if both are bit-fields.</p>\n</blockquote>\n\n<p>Given that both <code>x</code> and <code>y</code> are lvalues (and therefore glvalues), the result of the conditional expression in both cases is an lvalue. On this basis, the expression seems valid. However what's not clear is whether this should have any effect.</p>\n\n<p>The reason I am not sure whether the conditional statements should have an effect is because the type of the second and third operand type is <code>int</code>. Even if this result <code>int</code> is an lvalue, that doesn't meant it has to refer to <code>x</code> or <code>y</code>. It could essentially be a dummy variable, leading to no effect, and be standard conforming. In other words, I see no reason for it to resolve to an <code>int&amp;</code> rather than a separate <code>int</code>.</p>\n\n<p><strong>My question is...</strong></p>\n\n<p>Is this behaviour correct and why?</p>\n\n<hr>\n\n<p><sub>I took a look at <a href=\"https://stackoverflow.com/questions/8535226/return-type-of-ternary-conditional-operator\">this question</a> beforehand, but don't believe it answers my question. The answers to this question refer to an older standard, with different wording, and don't answer my question about whether the result is an <code>int&amp;</code> to <code>x</code> or not.</sub></p>\n"}, {"tags": ["c++", "3d", "game-engine", "sdl-2", "vulkan"], "answers": [{"comments": [{"owner": {"reputation": 947, "user_id": 1788024, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e0dc0ea761caf9029402fa3d9527aed?s=128&d=identicon&r=PG&f=1", "display_name": "BulBul", "link": "https://stackoverflow.com/users/1788024/bulbul"}, "edited": false, "score": 0, "creation_date": 1490207790, "post_id": 42959758, "comment_id": 73014400, "body": "thank you for your kind support now it works just fine, i use multiple header and .cpp files, so i somehow end up using it at the end of all inclusions."}], "tags": [], "owner": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "is_accepted": true, "score": 7, "last_activity_date": 1490206729, "creation_date": 1490206729, "answer_id": 42959758, "question_id": 42958642, "link": "https://stackoverflow.com/questions/42958642/cannot-use-vkcreatewin32surfacekhr-to-create-vulkan-surface/42959758#42959758", "title": "Cannot use vkCreateWin32SurfaceKHR to create vulkan surface", "body": "<p>Put the <code>#define VK_USE_PLATFORM_WIN32_KHR</code> <em>before</em> you <code>#include &lt;vulkan\\vulkan.h&gt;</code></p>\n\n<p>then you can grab the native info you need from SDL_GetWindowWMInfo.</p>\n"}], "owner": {"reputation": 947, "user_id": 1788024, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e0dc0ea761caf9029402fa3d9527aed?s=128&d=identicon&r=PG&f=1", "display_name": "BulBul", "link": "https://stackoverflow.com/users/1788024/bulbul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2702, "favorite_count": 0, "accepted_answer_id": 42959758, "answer_count": 1, "score": 4, "last_activity_date": 1490206729, "creation_date": 1490203383, "question_id": 42958642, "link": "https://stackoverflow.com/questions/42958642/cannot-use-vkcreatewin32surfacekhr-to-create-vulkan-surface", "title": "Cannot use vkCreateWin32SurfaceKHR to create vulkan surface", "body": "<p>I want to use vulkan with SDL2 but I am stuck at the surface creation stage, i cannot use <strong>vkCreateWin32SurfaceKHR</strong> extension function as well as <strong>VkWin32SurfaceCreateInfoKHR</strong> extension struct as they are undefined, while i don't have any issues using other extension elements like <strong>(vkGetPhysicalDeviceSurfaceSupportKHR , etc ..)</strong>, does the surface extension needs a separate header file? how can i get it to work?</p>\n\n<p>the preprocessor directives i use are as follows</p>\n\n<pre><code>#include &lt;vulkan\\vulkan.h&gt;\n#include &lt;SDL.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;exception&gt;\n#define VK_USE_PLATFORM_WIN32_KHR\n</code></pre>\n\n<p>Please note that i have used Vulkan with glfw without having any program this is my second attempt of running vulkan, so i don't think i have any driver support issue.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 4, "creation_date": 1490202914, "post_id": 42958353, "comment_id": 73011342, "body": "A basic rule in C++ is to declare in headers but define in only one compile unit. Put the definitions in a cpp file and change the headers to only declare the const chars*."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 1, "creation_date": 1490203031, "post_id": 42958353, "comment_id": 73011425, "body": "@doug No, that&#39;s not a basic rule of C++ - it is a rule in C."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1490203677, "post_id": 42958353, "comment_id": 73011841, "body": "@doug: That rule taken literally would mean that you could not define classes in header files, only forward-declare them."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1490203807, "post_id": 42958353, "comment_id": 73011926, "body": "By the way, you should not use <code>ALL_UPPERCASE</code> for anything but macros. Using <code>ALL_UPPERCASE</code> for constants is either a C-ism or a Java-ism, but it has no place in C++."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1490204198, "post_id": 42958353, "comment_id": 73012168, "body": "@Neil and Christian. true, I should have said instantiate objects in only one compiling unit, and there are exceptions to that for templates and definitions defined within a class declaration. The general rule does apply to the OP&#39;s usage."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1490204473, "post_id": 42958353, "comment_id": 73012336, "body": "@doug No, it doesn&#39;t. Using things like <code>const int MEANING = 42</code> in header files is very common C++ practice, and was in fact invented by Stroustrup to do away with #define macros. The OP is simply extending this practice to pointers, which is  also very common in C++ programs."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1490204807, "post_id": 42958353, "comment_id": 73012537, "body": "@Neil, of course, as your answer shows. In such a case the scope is limited to the compilation unit. Much as a static definition is local. The OP&#39;s definitions were global."}], "answers": [{"comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1490203717, "post_id": 42958454, "comment_id": 73011872, "body": "What about <code>auto const CBSD_GATE_TO_SAS  = &quot;CbsdGate_SAS_INOUT&quot;;</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1490204072, "post_id": 42958454, "comment_id": 73012087, "body": "@Christian Depends how wedded to auto you are, I guess."}, {"owner": {"reputation": 1037, "user_id": 2932861, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/aed4de86bda84c7b1c5032905775f64d?s=128&d=identicon&r=PG", "display_name": "LostInTheFrequencyDomain", "link": "https://stackoverflow.com/users/2932861/lostinthefrequencydomain"}, "edited": false, "score": 0, "creation_date": 1490204245, "post_id": 42958454, "comment_id": 73012194, "body": "I like the const char* const ... way of doing things better. It is clear what is going on. Thanks for the answers."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "is_accepted": true, "score": 6, "last_activity_date": 1490203543, "last_edit_date": 1490203543, "creation_date": 1490202896, "answer_id": 42958454, "question_id": 42958353, "link": "https://stackoverflow.com/questions/42958353/c-const-declrations-duplicate-symbols-issue/42958454#42958454", "title": "C++ : const declrations duplicate symbols issue", "body": "<p>Firstly, names like this <code>__GATENAMES__</code>, (any name starting with an underscore and an uppercase letter or containing two consecutive underscores) is reserved for the C++ implementation - you shgould not be creating such names in your own code.</p>\n\n<p>Secondly, your constness is a bit mixed up, instead of things like:</p>\n\n<pre><code>const char*   CBSD_GATE_TO_SAS            = \"CbsdGate_SAS_INOUT\";\n</code></pre>\n\n<p>you want:</p>\n\n<pre><code> const char *  const CBSD_GATE_TO_SAS            = \"CbsdGate_SAS_INOUT\";\n</code></pre>\n\n<p>In other words, it's the pointer that's got to be const to limit the linkage of the pointer, not the thing pointed to (although in this case that also has to be const).</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1490204038, "post_id": 42958716, "comment_id": 73012067, "body": "If you want these things to be compile-time constants, which you probably do, then only the second of the above is an option."}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 0, "creation_date": 1490205342, "post_id": 42958716, "comment_id": 73012885, "body": "@NeilButterworth why not third solution? This at least makes sure that no duplicated string literals will exists. I know linkers might merge them, but I dont think it is guaranteed."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1490205502, "post_id": 42958716, "comment_id": 73012988, "body": "At compile time, when compiling a file that includes the header, the compiler can only see <code>extern const char* CBSD_GATE_TO_SAS;</code>, but to use it at compile time it needs to see the actual string literal that the variable points to, and in fact the variable needs to be a constant."}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 0, "creation_date": 1490206754, "post_id": 42958716, "comment_id": 73013815, "body": "But what is it good for at compile time? Compiler will any way store address of literal to use it at runtime, ie. with strcmp or strcat. Maybe OP is going to use it in some advanced constexpr classes which will do some compile time computations with those strings - but it was not in the question."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1490206941, "post_id": 42958716, "comment_id": 73013940, "body": "&quot;Compiler will any way store address of literal to use it at runtime&quot; - no it won&#39;t. The address won&#39;t be known until link time."}], "tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": false, "score": 1, "last_activity_date": 1490203608, "creation_date": 1490203608, "answer_id": 42958716, "question_id": 42958353, "link": "https://stackoverflow.com/questions/42958353/c-const-declrations-duplicate-symbols-issue/42958716#42958716", "title": "C++ : const declrations duplicate symbols issue", "body": "<p>The reason for your linker errors is that non const variables have external linkage, and since you defined them in multiple translation units (by including a header), linker complains.</p>\n\n<p>There are three ways to fix your code. First is to change linkage of your <code>const char*</code> string literals, by making them static. This way they have internal linkage, and each translation unit which includes them will not share them with other translation units - so also linker will not complain:</p>\n\n<pre><code>static const char*   CBSD_GATE_TO_SAS            = \"CbsdGate_SAS_INOUT\";\n^^^^^^ \n</code></pre>\n\n<p>Second one is to make them const:</p>\n\n<pre><code>const char* const  CBSD_GATE_TO_SAS            = \"CbsdGate_SAS_INOUT\";\n            ^^^^^\n</code></pre>\n\n<p>which is actually quite similar to making them static, they have now internal linkage. </p>\n\n<p>Third way is to declare them in header file and define in one single translation unit.: </p>\n\n<pre><code>// in header file\nnamespace GateNames\n{\nextern const char* CBSD_GATE_TO_SAS         ;\n};\n</code></pre>\n\n<p>in some .cpp file:</p>\n\n<pre><code>namespace GateNames\n{\nconst char*   CBSD_GATE_TO_SAS            = \"CbsdGate_SAS_INOUT\";\n};\n</code></pre>\n"}], "owner": {"reputation": 1037, "user_id": 2932861, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/aed4de86bda84c7b1c5032905775f64d?s=128&d=identicon&r=PG", "display_name": "LostInTheFrequencyDomain", "link": "https://stackoverflow.com/users/2932861/lostinthefrequencydomain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 753, "favorite_count": 0, "accepted_answer_id": 42958454, "answer_count": 2, "score": 2, "last_activity_date": 1490203608, "creation_date": 1490202624, "question_id": 42958353, "link": "https://stackoverflow.com/questions/42958353/c-const-declrations-duplicate-symbols-issue", "title": "C++ : const declrations duplicate symbols issue", "body": "<p>I want to avoid #defines in my code. Accordingly, I have the following in a header file :</p>\n\n<pre><code> #ifndef __GATENAMES__\n #define __GATENAMES__\n\n  namespace GateNames\n  {\n  const char*   CBSD_GATE_TO_SAS            = \"CbsdGate_SAS_INOUT\";\n  const char*   CBSD_GATE_TO_SAS_OUT        = \"CbsdGate_SAS_INOUT$o\";\n  const char*   CBSD_GATE_TO_SAS_IN         = \"CbsdGate_SAS_INOUT$i\";\n  const char*   SAS_GATE_TO_CBSD            = \"SasGate_CBSD_INOUT\";\n  const char*   SAS_GATE_TO_ESC         = \"SasGate_ESC_INOUT\";\n  const char*  SAS_GATE_TO_ESC_OUT         = \"SasGate_ESC_INOUT$o\";\n  const char*  SAS_GATE_TO_ESC_IN         = \"SasGate_ESC_INOUT$i\";\n};\n#endif\n</code></pre>\n\n<p>This header file is included in various places in my code. However, the linker complains that the symbols are multiply defined:</p>\n\n<pre><code>../out/gcc-debug/src/CbsdSim.o:(.data.rel.local+0x0): multiple definition of `GateNames::CBSD_GATE_TO_SAS'\n</code></pre>\n\n<p>How can I get around this problem? Thanks.</p>\n"}, {"tags": ["c++", "macos", "operating-system", "afp"], "owner": {"reputation": 778, "user_id": 223122, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/35c757f40f686b95f3023209fcf4fe5f?s=128&d=identicon&r=PG", "display_name": "Eugene Pankov", "link": "https://stackoverflow.com/users/223122/eugene-pankov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1490202472, "creation_date": 1490202472, "question_id": 42958308, "link": "https://stackoverflow.com/questions/42958308/os-x-api-to-mount-a-network-volume", "title": "OS X API to mount a network volume", "body": "<p>I'm trying to programmatically mount an AFP Volume in a most efficient way. Since <code>AFPMountURL</code> and the rest of AppleShareClient framework is deprecated, what is the current best way to mount network volumes on OS X?</p>\n\n<p>I would like to avoid juggling with encoding complex usernames in URLs (i.e. <code>afp://user%40domain:pass@host...</code>, <code>smb://DOMAIN;user:pass@host/..</code> etc.) and get straight to the lowest level where I'd preferably be able to pass raw username, password, host and path directly to the system.</p>\n"}, {"tags": ["c++", "qt", "gdi+", "qimage", "qpixmap"], "answers": [{"tags": [], "owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "is_accepted": true, "score": 0, "last_activity_date": 1490209729, "creation_date": 1490209729, "answer_id": 42960630, "question_id": 42958027, "link": "https://stackoverflow.com/questions/42958027/convert-gdi-plus-bitmap-to-qpixmap/42960630#42960630", "title": "Convert GDI Plus Bitmap to QPixmap", "body": "<p>I assume you have \"Bitmap\" object in your hand. \nAlso I assume your development environment supports both \"Windows programming\" and \"Qt\".</p>\n\n<p>Based on above assumptions, you can get the <code>HICON</code> from the \"Bitmap\" and pass it to \"<code>QPixmap QtWin::fromHICON(HICON icon</code>)\".</p>\n\n<p>Steps:</p>\n\n<p>First you have to include \"<code>Gdiplus.h</code>\".\nAlso include \"<code>QtWin</code>\".</p>\n\n<pre><code>HICON hIcon;\nStatus st = &lt;&lt;Your Bitmap Object&gt;&gt;.GetHICON(&amp;hIcon);\nQPixmap pixM = QtWin::fromHICON(hIcon);\n</code></pre>\n\n<p>Try this. \nThe above code is untested. \nIt gives an idea.</p>\n"}, {"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1490216447, "creation_date": 1490216447, "answer_id": 42962573, "question_id": 42958027, "link": "https://stackoverflow.com/questions/42958027/convert-gdi-plus-bitmap-to-qpixmap/42962573#42962573", "title": "Convert GDI Plus Bitmap to QPixmap", "body": "<blockquote>\n  <p>I don't NEED to access pixel data</p>\n</blockquote>\n\n<p>You don't, but Qt most certainly does. Qt does not use GDI for rendering widgets - instead, it uses the raster backend that operates on a <code>QImage</code>. Under the hood a <code>QPixmap</code> is just a wrapper around a <code>QImage</code> and it's cheap to convert between the two as it doesn't copy any image data.</p>\n\n<p>So, whatever route you choose will involve <code>QImage</code> at some point, even if it's in the form of a <code>QPixmap</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 187, "user_id": 7595822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23df3ffb3d53626b653a779d74ad1ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/7595822/ian"}, "is_accepted": false, "score": 0, "last_activity_date": 1501017955, "creation_date": 1501017955, "answer_id": 45313768, "question_id": 42958027, "link": "https://stackoverflow.com/questions/42958027/convert-gdi-plus-bitmap-to-qpixmap/45313768#45313768", "title": "Convert GDI Plus Bitmap to QPixmap", "body": "<p>I had a method of doing this where I flipped the red and blue bytes, then used the following code to convert it from a Gdiplus::Bitmap to a QPixmap:</p>\n\n<pre><code>QPixmap getAsQPixmap(Gdiplus::Bitmap bitmap)\n{\n   // One of my functions to flip blue and red bytes of the image\n   _flipBlueWithRed();\n\n   // m_pBytes is a pointer to an unsigned char that marks the start of the image\n   // It was retrieved from locking the Gdiplus::Bitmap\n   auto result = QPixmap::fromImage(QImage(m_pBytes, getWidth(), getHeight(), QImage::Format_RGB888));\n\n   // Restore data back to original state\n   _flipBlueWithRed();\n\n   return result;\n}\n</code></pre>\n\n<p>This method, however, was slow and took a good 60 milliseconds to execute.  So my new method was to save the Gdiplus::Bitmap to file, and use the path to that file to read in from QPixmap's constructor.  <strong>This method is MUCH faster, around 5 milliseconds.</strong></p>\n\n<pre><code>QPixmap getAsQPixmap(GdiPlus::Bitmap bitmap)\n{\n    std::string path = \"C:/path_to_img.....png\";\n\n    // One of my functions to unlock the Gdi+ bitmap\n    _unlockGdiPlusBitmap();\n\n    // Get Clsid\n    CLSID pngClsid;\n    getEncoderClsid(format_mime, &amp;pngClsid);\n\n    // Save bitmap\n    // stringToWString() was a function that I wrote to convert a standard string to be a wide string\n    bitmap-&gt;Save(stringToWString(path).c_str(), static_cast&lt;const CLSID*&gt;(&amp;pngClsid));\n\n    // Lock bitmap\n    _lockGdiPlusBitmap();\n\n    // Create the QPixmap\n    QPixmap new_img(path);\n\n    return new_img;\n}\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 7595822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23df3ffb3d53626b653a779d74ad1ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/7595822/ian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 797, "favorite_count": 2, "accepted_answer_id": 42960630, "answer_count": 3, "score": 0, "last_activity_date": 1501017955, "creation_date": 1490201575, "question_id": 42958027, "link": "https://stackoverflow.com/questions/42958027/convert-gdi-plus-bitmap-to-qpixmap", "title": "Convert GDI Plus Bitmap to QPixmap", "body": "<p>I have a GdiPlus::Bitmap object, and I need to build a function that converts it to a QPixmap.  I'm using Qt 5.8.0, and performance is a concern of mine.  I cannot find anything about this online, even searching for GDI+ images to QImages.  I don't NEED to access pixel data, so all I have to do is get a GDI+ bitmap converted into something that can be displayed in a QWidget.  </p>\n\n<p>The most promising solution I've found so far is to use the fromHBitMap() in QtWin: <a href=\"http://doc.qt.io/qt-5/qtwin.html#fromHBITMAP\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/qtwin.html#fromHBITMAP</a>, but I don't have the required knowledge/experience to be able to understand handles to bitmaps.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 4, "creation_date": 1490202071, "post_id": 42957989, "comment_id": 73010824, "body": "Are you reading your compiler warnings?  Look at your <code>findLinkLocation</code>.  See the ambiguous usage of <code>row</code> and <code>col</code>?  You use them as parameters, then declare totally different <code>row</code> and <code>col</code> for your loops.  So what are you trying to do there?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1490202801, "post_id": 42957989, "comment_id": 73011278, "body": "Given the problem with <code>findLinkLocation</code>, the <code>row</code> and <code>col</code> values are garbage, uninitialized values, and you&#39;re using them as if they have good values."}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 0, "creation_date": 1490204148, "post_id": 42957989, "comment_id": 73012142, "body": "Since the answer is already posted, might I ask why you didn&#39;t make this as a class? board looks totally like a member variable and your functions totally like methods. Also, I&#39;d recommend that you provide parameter names with your function declarations, since that is not clear from the signature alone. And by the way, you shouldn&#39;t write &quot;almost finished&quot; when you ran it the first time - debugging can take <i>longer</i> than writing it initially."}, {"owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "edited": false, "score": 1, "creation_date": 1490204261, "post_id": 42957989, "comment_id": 73012203, "body": "You need to be a little cleverer, even for a brute force algorithm. This method will generate an exponential number of invalid boards. You need to build a list of allowed numbers for each location and only try those."}, {"owner": {"reputation": 366, "user_id": 4991953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UWcJl.jpg?s=128&g=1", "display_name": "Trevor", "link": "https://stackoverflow.com/users/4991953/trevor"}, "reply_to_user": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "edited": false, "score": 0, "creation_date": 1490205641, "post_id": 42957989, "comment_id": 73013071, "body": "@MalcolmMcLean This looks like a university assignment teaching recursion (Based on the fact that it looks almost identical to an assignment out of one of my textbooks), which would likely mean performance isn&#39;t an issue."}], "answers": [{"comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1490204041, "post_id": 42958337, "comment_id": 73012071, "body": "<i>Row and col have their default constructors being called</i> This is wrong. <code>int</code> doesn&#39;t have a constructor."}], "tags": [], "owner": {"reputation": 366, "user_id": 4991953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UWcJl.jpg?s=128&g=1", "display_name": "Trevor", "link": "https://stackoverflow.com/users/4991953/trevor"}, "is_accepted": false, "score": -1, "last_activity_date": 1490275780, "last_edit_date": 1495542331, "creation_date": 1490202560, "answer_id": 42958337, "question_id": 42957989, "link": "https://stackoverflow.com/questions/42957989/sudoku-bactracking-help-needed/42958337#42958337", "title": "sudoku bactracking help needed", "body": "<p>It may be due to the following block:</p>\n\n<pre><code>int row, col;\n\nif (!findBlankLocation(board, row, col))\n    return true;\n</code></pre>\n\n<p>So the value's of <code>row</code> and <code>col</code> are undefined (Not the same as being initialized to zero). See <a href=\"https://stackoverflow.com/questions/1597405/what-happens-to-a-declared-uninitialized-variable-in-c-does-it-have-a-value\">here</a> as to why their values are undefined.</p>\n\n<p>UPDATE:</p>\n\n<p>After further investigation, it looks like you are expecting <code>findBlankLocation(board,row,col)</code> to return <code>row</code> and <code>col</code> by reference. However, it is not. </p>\n\n<pre><code>bool findBlankLocation(int board[9][9], int &amp;row, int &amp;col)\n{\n  for(int row=0; row&lt;9;row++)\n    for(int col=0; col&lt;9;col++)\n      if(board[row][col] == 0)\n        return true;\n  return false;\n}\n</code></pre>\n\n<p>The code above is using your local declaration of <code>row</code> and <code>col</code> for <code>if(board[row][col] == 0)</code>. So once it finds the row and column, it returns true without passing the values by reference in the <code>row</code> and <code>col</code> parameters. Later, you use <code>row</code> and <code>col</code> in the <code>solveBoard</code> function, assuming they are filled with valid data, when they actually will not be. In order for <code>findBlankLocation</code> pass <code>row</code> and <code>col</code> by reference, it should look like the following:</p>\n\n<pre><code>bool findBlankLocation(int board[9][9], int &amp;row, int &amp;col)\n{\n  for(row = 0; row &lt; 9; ++row)\n    for(col = 0; col &lt; 9; ++col)\n      if(board[row][col] == 0)\n        return true;\n  return false;\n}\n</code></pre>\n\n<p>This way you are not redefining <code>row</code> and <code>col</code>, and <code>row</code> and <code>col</code> will actually contain valid data.</p>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 0, "last_activity_date": 1490205073, "creation_date": 1490205073, "answer_id": 42959205, "question_id": 42957989, "link": "https://stackoverflow.com/questions/42957989/sudoku-bactracking-help-needed/42959205#42959205", "title": "sudoku bactracking help needed", "body": "<p>In </p>\n\n<pre><code>bool findBlankLocation(int board[9][9], int &amp;row, int &amp;col)\n{\n    for(int row=0; row&lt;9;row++)\n        for(int col=0; col&lt;9;col++)\n            if(board[row][col] == 0)\n               return true;\n    return false;\n}\n</code></pre>\n\n<p><code>for(int row=0; row&lt;9;row++)</code> defines a new local variable named <code>row</code> that exists only within the <code>for</code> loop and hides the <code>int &amp;row</code> parameter. This loop-local <code>row</code> is updated and lost on loop exit, leaving the parameter <code>row</code> unchanged. The calling function then attempts to use the uninitialized variable it expected to be updated inside <code>findBlankLocation</code> and triggers undefined behaviour.</p>\n\n<p>GCC warns of this:</p>\n\n<blockquote>\n  <p>..\\src\\main.cpp:34:6: warning: unused parameter 'row' [-Wunused-parameter]\n   bool findBlankLocation(int board[9][9], int &amp;row, int &amp;col)</p>\n</blockquote>\n\n<p>So does Visual Studio if you turn the warnings up to level 4. </p>\n\n<blockquote>\n  <p>1>d:\\jobs\\consoleapplication1\\consoleapplication1\\consoleapplication1.cpp(36): warning C4457: declaration of 'row' hides function parameter\n  1>  d:\\jobs\\consoleapplication1\\consoleapplication1\\consoleapplication1.cpp(34): note: see declaration of 'row'\n  1>d:\\jobs\\consoleapplication1\\consoleapplication1\\consoleapplication1.cpp(34): warning C4100: 'row': unreferenced formal parameter</p>\n</blockquote>\n\n<p>The warnings are there to help you. Turn them on and pay heed.</p>\n\n<p>The same bug affects <code>col</code>.</p>\n\n<h1>Solution</h1>\n\n<pre><code>bool findBlankLocation(int board[9][9], int &amp;row, int &amp;col)\n{\n    for (row = 0; row &lt; 9; row++) // now uses row parameter\n        for (col = 0; col &lt; 9; col++) // now uses col parameter\n            if (board[row][col] == 0)\n                return true;\n    return false;\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 7752512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a3136f5e12e7ccdad8cba617f46b90e?s=128&d=identicon&r=PG&f=1", "display_name": "Rmedina", "link": "https://stackoverflow.com/users/7752512/rmedina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 42959205, "answer_count": 2, "score": 0, "last_activity_date": 1490275780, "creation_date": 1490201450, "last_edit_date": 1490201692, "question_id": 42957989, "link": "https://stackoverflow.com/questions/42957989/sudoku-bactracking-help-needed", "title": "sudoku bactracking help needed", "body": "<p>I am currently working on sudoku solver that utilizes backtracking in order to solve the sudoku. I am almost finished but it crashes and I have no idea why,I tried searching the problems here related to sudoku backtracking but not much light was shed, as far as I could narrow down the problem, i know it is in my solveBoard function but still not sure, I also tried searching throught different sites and got some help but not enough. any help? thanks in advance</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nbool findBlankLocation(int board[9][9], int&amp;, int&amp;);\nbool inColumn(int [9][9], int, int);\nbool inRow(int [9][9], int, int);\nbool inBox(int [9][9], int, int, int);\nbool blankLocation(int[9][9], int, int, int);\nvoid printBoard(int [9][9]);\nbool solveBoard(int [9][9]);\n\nint main()\n{\n    int board[9][9] =  {{3, 0, 6, 5, 0, 8, 4, 0, 0},\n                        {5, 2, 0, 0, 0, 0, 0, 0, 0},\n                        {0, 8, 7, 0, 0, 0, 0, 3, 1},\n                        {0, 0, 3, 0, 1, 0, 0, 8, 0},\n                        {9, 0, 0, 8, 6, 3, 0, 0, 5},\n                        {0, 5, 0, 0, 9, 0, 6, 0, 0},\n                        {1, 3, 0, 0, 0, 0, 2, 5, 0},\n                        {0, 0, 0, 0, 0, 0, 0, 7, 4},\n                        {0, 0, 5, 2, 0, 6, 3, 0, 0}};\n\n\n\n    if(solveBoard(board) == true)\n        printBoard(board);\n    else\n        cout &lt;&lt; \"\\n\\n&gt;&gt;&gt;&gt;No existe solucion...\";\n\n\n    return 0;\n }\n\nbool findBlankLocation(int board[9][9], int &amp;row, int &amp;col)\n{\n    for(int row=0; row&lt;9;row++)\n        for(int col=0; col&lt;9;col++)\n            if(board[row][col] == 0)\n               return true;\n    return false;\n}\n\nbool inColumn(int board[9][9], int col, int number)\n{\n    for(int row=0; row&lt;9; row++)\n        if(number == board[row][col])\n            return true;\n    return false;\n}\n\nbool inRow(int board [9][9], int row, int number)\n{\n    for(int col=0; col&lt;9; col++)\n        if(number == board[row][col])\n            return true;\n    return false;\n}\n\nbool inBox(int board[9][9], int startRow, int startColumn, int num)\n{\n    for(int row = 0; row&lt;3; row++)\n        for(int col = 0; col&lt;3; col++)\n            if(board[row+startRow][col+startColumn] == num)\n                return true;\n    return false;\n}\n\nvoid printBoard(int board[9][9])\n{\n    for (int i = 0; i &lt; 9; i++)\n    {\n        for (int j = 0; j &lt; 9; j++)\n            cout &lt;&lt; \"  \" &lt;&lt; board[i][j];\n        cout &lt;&lt; endl;\n    }\n}\n\nbool blankLocation(int board[9][9], int row, int col, int num)\n{\nreturn !inColumn(board, col, num) &amp;&amp; !inRow(board, row, num) \n&amp;&amp; !inBox( board,  row-row%3, col-col%3, num);\n}\n\nbool solveBoard(int board[9][9])\n{\n    int row, col;\n\n    if (!findBlankLocation(board, row, col))\n        return true;\n\n    for (int num = 1; num &lt;= 9; num++)\n    {\n\n        if (blankLocation(board, row, col, num))\n        {\n            board[row][col] = num;\n\n            if (solveBoard(board))\n                return true;\n\n            board[row][col] = 0;\n        }\n     }\n\n    return false;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1490201520, "post_id": 42957970, "comment_id": 73010462, "body": "<code>iostream</code> is a header (a file). <code>std</code> is a <code>namespace</code>, <code>cout</code> and <code>cin</code> are objects within the <code>std</code> namespace."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1490201528, "post_id": 42957970, "comment_id": 73010470, "body": "cout and cin are not functions, they are objects"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1490201630, "post_id": 42957970, "comment_id": 73010543, "body": "@ryan iostream is also a type in the standard library -  it&#39;s a typedef for <code>basic_iostream&lt;char&gt;</code>"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1490202665, "post_id": 42957970, "comment_id": 73011195, "body": "This is a starting point: <a href=\"http://en.cppreference.com/w/cpp/header\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/header</a>"}], "answers": [{"tags": [], "owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "is_accepted": false, "score": 1, "last_activity_date": 1490203077, "creation_date": 1490203077, "answer_id": 42958524, "question_id": 42957970, "link": "https://stackoverflow.com/questions/42957970/hierarchy-of-namespaces-headers-and-objects/42958524#42958524", "title": "Hierarchy of namespaces, headers and objects", "body": "<blockquote>\n  <p>From what I understand, the namespace std contains all of C++ standard\n  libraries, and one of the standard libraries is the iostream and it\n  has the functions cout and cin.</p>\n</blockquote>\n\n<p>Not quite.</p>\n\n<ul>\n<li>Although almost all of the standard library is in namespace <code>std</code>, we also have the C components outside of <code>std</code> when using the old header form (<code>&lt;stdio.h&gt;</code> instead of <code>&lt;cstdio&gt;</code>), and the <code>assert</code> macro, which is not scoped.</li>\n<li><code>std::cin</code> and <code>std::cout</code> are not functions but objects.</li>\n<li><code>&lt;iostream&gt;</code> is just the name of a header which contains <em>parts</em> of what the C++ ISO standard officially names \"Input/output library\" (<code>std::iostream</code> is a rarely used <code>typedef</code> for the <code>std::basic_iostream&lt;char&gt;</code> class).</li>\n<li>Certain components of the library can be pulled in by different <code>#include</code>s. For example, <code>std::initializer_list</code> becomes available through <code>&lt;initializer_list&gt;</code> or through includes like <code>&lt;vector&gt;</code>.</li>\n</ul>\n\n<p>Without going into too much detail, header files and scoping are two <strong>orthogonal</strong> concepts in C++. In other words, they exist in parallel to each other. There is no useful hierarchy among/between them.</p>\n"}, {"comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1490203430, "post_id": 42958577, "comment_id": 73011687, "body": "It should be noted that the standard itself is inconsistent regarding the pluralisation. In &#167;17.1, it talks about &quot;the contents of the C++ standard library&quot; and &quot;the components in the library&quot;. But the section headings say, for example, &quot;String library&quot;, not &quot;String library component&quot;."}], "tags": [], "owner": {"reputation": 11800, "user_id": 1594913, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tLf29.jpg?s=128&g=1", "display_name": "JBL", "link": "https://stackoverflow.com/users/1594913/jbl"}, "is_accepted": false, "score": 1, "last_activity_date": 1490203204, "creation_date": 1490203204, "answer_id": 42958577, "question_id": 42957970, "link": "https://stackoverflow.com/questions/42957970/hierarchy-of-namespaces-headers-and-objects/42958577#42958577", "title": "Hierarchy of namespaces, headers and objects", "body": "<p>You are correct when you assume that  everything that's in the standard library is contained in the <code>std</code> namespace, <em>with a few exceptions</em>, as per 17.6.1.1/\u00a73 in the standard:</p>\n\n<blockquote>\n  <p>All library entities except macros, <strong>operator new</strong> and <strong>operator delete</strong> are defined within the namespace <strong>std</strong> or namespaces nested within namespace <strong>std</strong>. It is unspecified whether names declared in a specific namespace are declared directly in that namespace or in an inline namespace inside that namespace.</p>\n</blockquote>\n\n<p>Then, when you say \"the libraries\", there's only one library here, the \"standard library\". <code>iostream</code> is a header of this library. But that doesn't mean everything from a header is in a specific namespace. </p>\n\n<p>For example, <code>cin</code> and <code>cout</code> are directly in the <code>std</code> namespace, but are included with the <code>&lt;iostream&gt;</code> header.</p>\n"}], "owner": {"reputation": 1338, "user_id": 6011446, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/eea046eb7c11841247cacf65304aa6aa?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Raghavendra", "link": "https://stackoverflow.com/users/6011446/nikhil-raghavendra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490243924, "creation_date": 1490201418, "last_edit_date": 1490243924, "question_id": 42957970, "link": "https://stackoverflow.com/questions/42957970/hierarchy-of-namespaces-headers-and-objects", "title": "Hierarchy of namespaces, headers and objects", "body": "<p>From what I understand, the namespace std contains all of C++ standard libraries, and one of the standard libraries is the iostream and it has the objects cout and cin. </p>\n\n<pre><code>std namespace \n       |\n   iostream\n       |\n   cout, cin\n</code></pre>\n\n<p>Is the above structure correct? Or is it different?</p>\n"}, {"tags": ["c++", "sockets", "boost"], "comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1490201710, "post_id": 42957943, "comment_id": 73010597, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/32273929/boost-async-read-until-combine-match-condition-with-limit-size-to-read\" title=\"boost async read until combine match condition with limit size to read\">stackoverflow.com/questions/32273929/&hellip;</a>"}, {"owner": {"reputation": 325, "user_id": 5174953, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0Qk1N.jpg?s=128&g=1", "display_name": "PMcK", "link": "https://stackoverflow.com/users/5174953/pmck"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1490201993, "post_id": 42957943, "comment_id": 73010767, "body": "Not exactly what I was looking for."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1490203106, "post_id": 42957943, "comment_id": 73011474, "body": "What are you looking for, then?"}, {"owner": {"reputation": 51094, "user_id": 210102, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/OViyp.jpg?s=128&g=1", "display_name": "Steve Townsend", "link": "https://stackoverflow.com/users/210102/steve-townsend"}, "edited": false, "score": 0, "creation_date": 1490203982, "post_id": 42957943, "comment_id": 73012028, "body": "<code>endless</code> is subjective. You could implement such a limit yourself using a pragmatic choice of upper bound for your use case."}, {"owner": {"reputation": 325, "user_id": 5174953, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0Qk1N.jpg?s=128&g=1", "display_name": "PMcK", "link": "https://stackoverflow.com/users/5174953/pmck"}, "edited": false, "score": 0, "creation_date": 1490257355, "post_id": 42957943, "comment_id": 73033677, "body": "Thanks for this and also for the other responses. I seemed to have opened a can of worms here. We do have an internet facing app so we will need to look at using async_read_some and some sort of function object. In the meantime, I;ll use a fixed sized buffer and assume that a buffer overflow is an invalid message"}], "answers": [{"comments": [{"owner": {"reputation": 325, "user_id": 5174953, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0Qk1N.jpg?s=128&g=1", "display_name": "PMcK", "link": "https://stackoverflow.com/users/5174953/pmck"}, "edited": false, "score": 0, "creation_date": 1490257324, "post_id": 42959352, "comment_id": 73033661, "body": "Thanks for this and also for the other responses. I seemed to have opened a can of worms here. We do have an internet facing app so we will need to look at using async_read_some and some sort of function object. In the meantime, I;ll use a fixed sized buffer and assume that a buffer overflow is an invalid message."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 325, "user_id": 5174953, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0Qk1N.jpg?s=128&g=1", "display_name": "PMcK", "link": "https://stackoverflow.com/users/5174953/pmck"}, "edited": false, "score": 0, "creation_date": 1490266276, "post_id": 42959352, "comment_id": 73039919, "body": "@PMcK the internet is about the most worm-filled can there is... :)"}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 0, "last_activity_date": 1490205544, "creation_date": 1490205544, "answer_id": 42959352, "question_id": 42957943, "link": "https://stackoverflow.com/questions/42957943/can-boostasioasync-read-until-detect-an-endless-stream/42959352#42959352", "title": "Can boost::asio::async_read_until detect an endless stream", "body": "<p>You can use version 4 of the 4 overloads:</p>\n\n<p><a href=\"http://www.boost.org/doc/libs/1_62_0/doc/html/boost_asio/reference/async_read_until/overload4.html\" rel=\"nofollow noreferrer\">http://www.boost.org/doc/libs/1_62_0/doc/html/boost_asio/reference/async_read_until/overload4.html</a></p>\n\n<p>In your function object, which would normally be an interface to a state machine, you can count characters, detect illegal data streams or any other means necessary.</p>\n\n<p>It's probably worth mentioning that if your application is running in a hostile environment (i.e. internet-facing) then you will probably want to use <code>async_read_some</code> to feed your state machine and will want a timer to catch and kill connections that sit and consume resources.</p>\n"}], "owner": {"reputation": 325, "user_id": 5174953, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0Qk1N.jpg?s=128&g=1", "display_name": "PMcK", "link": "https://stackoverflow.com/users/5174953/pmck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 147, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490205544, "creation_date": 1490201329, "last_edit_date": 1592644375, "question_id": 42957943, "link": "https://stackoverflow.com/questions/42957943/can-boostasioasync-read-until-detect-an-endless-stream", "title": "Can boost::asio::async_read_until detect an endless stream", "body": "<p>I am using boost::asio::async_read_until to read a message from a socket, using a newline as a delimiter.</p>\n<p>e.g. boost::asio::async_read_until(socket, buffer, &quot;\\n&quot;, .....)</p>\n<p>Everything is hunkey dorey and works fine.</p>\n<p>Is there an alternative way to use this function, or a similar one, that can detect an endless sequence of characters that do not have a newline constant in them.</p>\n<p>e.g. a malicious user might fire a continuous sequence of ZEROS at my server</p>\n<h1>socat /dev/zero TCP4:localhost:55555</h1>\n<p>I can't be the first person in history to have come across this problem</p>\n"}, {"tags": ["c++", "c++11", "random"], "comments": [{"owner": {"reputation": 1243, "user_id": 1129815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lROzF.jpg?s=128&g=1", "display_name": "Steeve", "link": "https://stackoverflow.com/users/1129815/steeve"}, "edited": false, "score": 0, "creation_date": 1490201373, "post_id": 42957940, "comment_id": 73010341, "body": "What&#39;s <code>x.geta()</code>?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1490201400, "post_id": 42957940, "comment_id": 73010362, "body": "what is the error you get?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1490201478, "post_id": 42957940, "comment_id": 73010416, "body": "from that code i would expect an error like &quot;geta() not declared&quot;"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1490201511, "post_id": 42957940, "comment_id": 73010451, "body": "please post the full error message and real code"}, {"owner": {"reputation": 560, "user_id": 6598108, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/ORByM.jpg?s=128&g=1", "display_name": "drbombe", "link": "https://stackoverflow.com/users/6598108/drbombe"}, "edited": false, "score": 0, "creation_date": 1490201511, "post_id": 42957940, "comment_id": 73010452, "body": "it should be getrnorm(). Just updated the codes a little. It reported that seed is not defined in the class."}, {"owner": {"reputation": 560, "user_id": 6598108, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/ORByM.jpg?s=128&g=1", "display_name": "drbombe", "link": "https://stackoverflow.com/users/6598108/drbombe"}, "edited": false, "score": 0, "creation_date": 1490201615, "post_id": 42957940, "comment_id": 73010536, "body": "/testcpp.cpp|8|error: unknown type name &#39;seed&#39;| /testcpp.cpp|9|error: expected parameter declarator|"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1490201814, "post_id": 42957940, "comment_id": 73010660, "body": "Also related: <a href=\"http://stackoverflow.com/questions/11490988/c-compile-time-error-expected-identifier-before-numeric-constant\" title=\"c compile time error expected identifier before numeric constant\">stackoverflow.com/questions/11490988/&hellip;</a>. Short answer: use constructor initialization lists or brace-initialization e.g. <code>std::default_random_engine generator{seed};</code> and <code>std::normal_distribution&lt;&gt; rnorm{0,1};</code>. For the second, the default args are <code>0</code> and <code>1</code>, so <code>std::normal_distribution&lt;&gt; rnorm;</code> should work just fine."}, {"owner": {"reputation": 560, "user_id": 6598108, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/ORByM.jpg?s=128&g=1", "display_name": "drbombe", "link": "https://stackoverflow.com/users/6598108/drbombe"}, "edited": false, "score": 0, "creation_date": 1490202176, "post_id": 42957940, "comment_id": 73010898, "body": "Thank you so much to point me in the right direction!!"}], "owner": {"reputation": 560, "user_id": 6598108, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/ORByM.jpg?s=128&g=1", "display_name": "drbombe", "link": "https://stackoverflow.com/users/6598108/drbombe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "closed_date": 1490201490, "answer_count": 0, "score": 0, "last_activity_date": 1494421233, "creation_date": 1490201316, "last_edit_date": 1494421233, "question_id": 42957940, "link": "https://stackoverflow.com/questions/42957940/c11-random-number-generator-in-a-class", "closed_reason": "Duplicate", "title": "C++11: Random number generator in a class", "body": "<blockquote>\n  <p>This question has been solved! The key is to use <code>{}</code> initiation\n  instead of  using <code>()</code>. So change it to \n  <code>std::normal_distribution&lt;&gt; rnorm{0,1};</code> although you may see many old online examples still using <code>()</code>.</p>\n</blockquote>\n\n<p>I was thinking to generate random normal with a fixed seed for reproducible research. To illustrate my question well, I made the following minimalist codes. It reports error when I put the random generator in a class. What's wrong with the first code block? How can I fix it? Many thanks for your help!</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;random&gt;\nusing namespace std;\n\nclass RandNorm{\nprivate:\n    unsigned seed = 12345;\n    std::default_random_engine generator(seed);\n    std::normal_distribution&lt;&gt; rnorm(0,1);\n\npublic:\n    double getrnorm(){\n    return rnorm(generator);\n    }\n\n};\n\nint main() {\n  RandNorm x;\n  cout &lt;&lt; x.getrnorm() &lt;&lt; endl;\n  return 0;\n}\n</code></pre>\n\n<p>But it works well it I just put in in the main function as below</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;random&gt;\nusing namespace std;\n\nint main() {\n\n    unsigned seed = 12345;\n    std::default_random_engine generator(seed);\n    std::normal_distribution&lt;&gt; rnorm(0,1);\n\n    for(int i=1; i&lt;10; i++){\n        cout &lt;&lt; rnorm(generator) &lt;&lt; endl;\n    }\n\n return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "copy-constructor", "move-semantics"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1490201326, "post_id": 42957922, "comment_id": 73010305, "body": "Look up &quot;copy elision&quot;."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1490201476, "post_id": 42957922, "comment_id": 73010415, "body": "Try compiling with <code>-fno-elide-constructors</code>"}], "owner": {"reputation": 147, "user_id": 4542163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11c6e72818073b9206ee93da554e914f?s=128&d=identicon&r=PG&f=1", "display_name": "Zhao Chen", "link": "https://stackoverflow.com/users/4542163/zhao-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "closed_date": 1490201343, "answer_count": 0, "score": 0, "last_activity_date": 1490201264, "creation_date": 1490201264, "question_id": 42957922, "link": "https://stackoverflow.com/questions/42957922/c11-copy-move-control-doesnt-work-in-my-supposed-way", "closed_reason": "Duplicate", "title": "c++11 copy/move control doesn&#39;t work in my supposed way", "body": "<p>I am learning c++11 copy and move semantics, and have written some experimental code to verify my thoughts, but the output really baffled me.</p>\n\n<pre><code>class CP{\npublic:\nCP(int input):val(input){\n    cout &lt;&lt; \"constructor\" &lt;&lt; endl;\n}\n\nCP(const CP&amp; rhs){\n    //initialize 'val' using in-class initializer\n    cout &lt;&lt; \"cp constructor\" &lt;&lt; endl;\n}\n\nCP(CP&amp;&amp; rhs) noexcept {\n    //initialize 'val using in-class initializer\n    cout &lt;&lt; \"move constructor\"&lt;&lt; endl;\n}\n\nCP&amp; operator=(CP&amp;&amp; rhs) noexcept{\n    cout &lt;&lt; \"move operator=\" &lt;&lt; endl;\n    return *this;\n}\n\nCP&amp; operator=(const CP&amp; rhs){\n    cout &lt;&lt; \"operator=\" &lt;&lt; endl;\n    return *this;\n\n}\n\n~CP(){\n    cout &lt;&lt; \"destructor\" &lt;&lt; endl;\n}\nprivate:\n    int val = 0;\n};\n\nCP fun()\n{\n    return CP(42);\n}\n\nint main() {\n    CP cp1 = fun();\n    cout &lt;&lt; \"---\" &lt;&lt; endl;\n    CP cp2 = std::move(cp1);\n    cout &lt;&lt; \"---move out of scope---\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>This code outputs:</p>\n\n<pre><code>constructor\n---\nmove constructor\n---move out of scope---\ndestructor\ndestructor\n</code></pre>\n\n<p>What contradict my understandings is the output of the code </p>\n\n<pre><code>CP cp1 = fun(); \n</code></pre>\n\n<p>To the best of my knowledge, fun() returns a value of class CP, and thus a rvalue, so the move constructor of class CP should be called to initialize variable cp1. But according to the output, it seems that none of my defined functions are called in the initialization process of the variable cp1.</p>\n\n<p>My question is :</p>\n\n<ol>\n<li><p>Are my declarations and definitions of class CP's copy control functions correct?</p></li>\n<li><p>What is wrong with my understanding, and how is cp1 initialized?</p></li>\n</ol>\n\n<p>Any help would be appreciated, and thanks in advance.</p>\n"}, {"tags": ["c++", "reference", "shared-ptr"], "comments": [{"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 1, "creation_date": 1490199862, "post_id": 42957355, "comment_id": 73009280, "body": "In the example provided what is <code>aVec</code>? What type?"}, {"owner": {"reputation": 113, "user_id": 6932805, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3-2BBTKuaAs/AAAAAAAAAAI/AAAAAAAAACs/0E5GNvnWzLQ/photo.jpg?sz=128", "display_name": "Fan", "link": "https://stackoverflow.com/users/6932805/fan"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 1, "creation_date": 1490199973, "post_id": 42957355, "comment_id": 73009348, "body": "Sorry, it&#39;s a vector of shared_ptr"}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 1, "creation_date": 1490199974, "post_id": 42957355, "comment_id": 73009350, "body": "I suppose you could have a reference, to a pointer that is null. (edit: added a comma :&gt;)"}, {"owner": {"reputation": 638, "user_id": 4262207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-iHUQgHLj_t0/AAAAAAAAAAI/AAAAAAAAACM/nE_ak8mRoJE/photo.jpg?sz=128", "display_name": "lolololol ol", "link": "https://stackoverflow.com/users/4262207/lolololol-ol"}, "edited": false, "score": 1, "creation_date": 1490200073, "post_id": 42957355, "comment_id": 73009419, "body": "aRef is a reference, so it can never be null.  It can be an alias to a valid pointer that is indeed null...if that&#39;s what you mean."}, {"owner": {"reputation": 113, "user_id": 6932805, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3-2BBTKuaAs/AAAAAAAAAAI/AAAAAAAAACs/0E5GNvnWzLQ/photo.jpg?sz=128", "display_name": "Fan", "link": "https://stackoverflow.com/users/6932805/fan"}, "edited": false, "score": 0, "creation_date": 1490200267, "post_id": 42957355, "comment_id": 73009558, "body": "Yes, that&#39;s what I want to say. It can be a ref to a null pointer. But it can not be null itself. While the pointer here is, if aRef is still a pointer."}, {"owner": {"reputation": 2068, "user_id": 1925996, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/05256a041ac14a50a2054679fcc85a34?s=128&d=identicon&r=PG", "display_name": "piedar", "link": "https://stackoverflow.com/users/1925996/piedar"}, "edited": false, "score": 0, "creation_date": 1490200683, "post_id": 42957355, "comment_id": 73009856, "body": "What is the definition of <code>THROW_RUNTIME_IFNULLPTR</code>?  Have you tested whether it works with <code>shared_ptr</code>?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1490200756, "post_id": 42957355, "comment_id": 73009903, "body": "regarding: &quot;The reference is just to not increment the counter. I&#39;m very confused about that.&quot; A <code>shared_ptr</code> is a reference-counted pointer. Every time the <code>shared_ptr</code> is copied, the reference count is increased. Every time a copy is destroyed, the count is decreased. When the reference count hits zero, the pointer is <code>delete</code>ed. By usiung a reference, the <code>shared_ptr</code> is not copied, saving the copy construction and destruction and thus reference count overhead."}], "answers": [{"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 2, "last_activity_date": 1490200493, "last_edit_date": 1490200493, "creation_date": 1490199918, "answer_id": 42957451, "question_id": 42957355, "link": "https://stackoverflow.com/questions/42957355/is-a-reference-of-a-shared-ptr-still-a-pointer/42957451#42957451", "title": "Is a reference of a shared_ptr still a pointer?", "body": "<p>aRef is a reference. It is an alias for an object. </p>\n\n<p>A pointer is a separate object that perhaps points to another object.</p>\n\n<p>In this case aRef is a reference to an object of type <code>std::shared_ptr&lt;Something&gt;</code>. </p>\n\n<p>The code is roughly equivalent to this:</p>\n\n<pre><code>auto first = aVec.begin();\nauto last = aVec.end();\nfor( ; first != last ; ++first) {\n    std::shared_ptr&lt;Something&gt; const&amp; aRef = *first;\n    if (aRef.get() != nullptr) {\n        aRef-&gt;getX();\n    }\n    else {\n        // handle the case where aRef is not pointing at an object\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1490200512, "post_id": 42957562, "comment_id": 73009721, "body": "Just note that it also have <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr/operator_cmp\" rel=\"nofollow noreferrer\"><code>template&lt; class T &gt; bool operator==( const shared_ptr&lt;T&gt;&amp; lhs, std::nullptr_t rhs );</code></a> so <code>if ( aRef == nullptr )</code> is also valid."}], "tags": [], "owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "is_accepted": false, "score": 5, "last_activity_date": 1490200246, "creation_date": 1490200246, "answer_id": 42957562, "question_id": 42957355, "link": "https://stackoverflow.com/questions/42957355/is-a-reference-of-a-shared-ptr-still-a-pointer/42957562#42957562", "title": "Is a reference of a shared_ptr still a pointer?", "body": "<p><code>std::shared_ptr</code> has <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr/operator_bool\" rel=\"noreferrer\"><code>explicit operator bool()</code></a>, so in this code</p>\n\n<pre><code>if ( aRef )\n</code></pre>\n\n<p>that operator will be called, and it returns true if underlying pointer is not null.</p>\n"}, {"tags": [], "owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "is_accepted": false, "score": 8, "last_activity_date": 1490200982, "creation_date": 1490200982, "answer_id": 42957832, "question_id": 42957355, "link": "https://stackoverflow.com/questions/42957355/is-a-reference-of-a-shared-ptr-still-a-pointer/42957832#42957832", "title": "Is a reference of a shared_ptr still a pointer?", "body": "<blockquote>\n  <p>In my mind, <code>aRef</code> is a reference which can never be null.</p>\n</blockquote>\n\n<p>Yes and no. A reference can be everything which the object it refers to can be. If that object is, say, an <code>int</code> or a <code>std::string</code> or a <code>std::vector&lt;double&gt;</code>, then of course it cannot be null (or <code>nullptr</code>, to be precise).</p>\n\n<p>If that object, however, is a pointer, for example an <code>int*</code>, or a <code>void*</code>, or a <code>MyClass*</code>, then it can be <code>nullptr</code> because the pointer can be <code>nullptr</code>.</p>\n\n<p>Now in your case, the object being referred to is a <code>std::shared_ptr</code>. It cannot technically be <code>nullptr</code>, but it can <em>represent</em> <code>nullptr</code> by being in a state in which <code>get()</code> returns <code>nullptr</code>.</p>\n\n<blockquote>\n  <p>While I was told that (by <code>auto &amp;</code>) <code>aRef</code> is still a pointer so it's possible that it's null.</p>\n</blockquote>\n\n<p>More precisely: <code>aRef</code> is still a <code>std::shared_ptr</code>, so it's possible that it still represents <code>nullptr</code>.</p>\n"}], "owner": {"reputation": 113, "user_id": 6932805, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3-2BBTKuaAs/AAAAAAAAAAI/AAAAAAAAACs/0E5GNvnWzLQ/photo.jpg?sz=128", "display_name": "Fan", "link": "https://stackoverflow.com/users/6932805/fan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 379, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1490200982, "creation_date": 1490199613, "last_edit_date": 1490200137, "question_id": 42957355, "link": "https://stackoverflow.com/questions/42957355/is-a-reference-of-a-shared-ptr-still-a-pointer", "title": "Is a reference of a shared_ptr still a pointer?", "body": "<p>Recently I have a doubt in my work about the reference of a <code>shared_ptr</code>. Here is the code. </p>\n\n<pre><code>for (const auto &amp; aRef : aVec) {\n    THROW_RUNTIME_IFNULLPTR(aRef);\n    // do sth\n}\n</code></pre>\n\n<p>This is the code of my colleague. In my mind, <code>aRef</code> is a reference which can never be null. While I was told that (by <code>auto &amp;</code>) <code>aRef</code> is still a pointer so it's possible that it's null. The reference is just to not increment the counter. I'm very confused about that. </p>\n\n<p>However, it should be like</p>\n\n<pre><code>for (const auto &amp; aRef : aVec) {\n    // THROW_RUNTIME_IFNULLPTR(aRef);\n    if ( aRef ) {\n        aRef-&gt;getX();\n    }\n    // do sth\n} \n</code></pre>\n\n<p>Am I wrong about this? I don't think that <code>aRef</code> is a pointer.</p>\n"}, {"tags": ["c++", "c++14", "c++17"], "comments": [{"owner": {"reputation": 5508, "user_id": 498424, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ig1qY.jpg?s=128&g=1", "display_name": "Raxvan", "link": "https://stackoverflow.com/users/498424/raxvan"}, "edited": false, "score": 1, "creation_date": 1490199800, "post_id": 42957323, "comment_id": 73009238, "body": "use function overloading"}, {"owner": {"reputation": 10744, "user_id": 671092, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ba5a30d29c197eaf9dbcd9feec3bafd2?s=128&d=identicon&r=PG&f=1", "display_name": "gd1", "link": "https://stackoverflow.com/users/671092/gd1"}, "edited": false, "score": 2, "creation_date": 1490199842, "post_id": 42957323, "comment_id": 73009268, "body": "Unless there&#39;s a very good reason not to do that, I&#39;d return a struct. Then you get what you want from it. By doing this you can declare the result variable const, by the way."}], "answers": [{"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1490200675, "post_id": 42957403, "comment_id": 73009852, "body": "I don&#39;t understand the downvote either. Let&#39;s wipe it out. This is an old-fashioned way, but that doesn&#39;t make it a bad way."}, {"owner": {"reputation": 10744, "user_id": 671092, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ba5a30d29c197eaf9dbcd9feec3bafd2?s=128&d=identicon&r=PG&f=1", "display_name": "gd1", "link": "https://stackoverflow.com/users/671092/gd1"}, "edited": false, "score": 0, "creation_date": 1490201242, "post_id": 42957403, "comment_id": 73010242, "body": "I didn&#39;t downvote, but I think a function taking four pointers as <i>potentially optional</i> output (nonconst) parameters, in C++, is a horror show."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 10744, "user_id": 671092, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ba5a30d29c197eaf9dbcd9feec3bafd2?s=128&d=identicon&r=PG&f=1", "display_name": "gd1", "link": "https://stackoverflow.com/users/671092/gd1"}, "edited": false, "score": 0, "creation_date": 1490201460, "post_id": 42957403, "comment_id": 73010405, "body": "@gd1: there are other ways. But this one is simple and <i>depending on context and requirement</i> can be perfectly appropriate. That being said, if you are speaking of a general design, a function take for optional io parameters is weird whatever the language..."}, {"owner": {"reputation": 1033, "user_id": 7667894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9cbd2317a1ddffc1e8f9ca0ff56b6f6?s=128&d=identicon&r=PG&f=1", "display_name": "AlexG", "link": "https://stackoverflow.com/users/7667894/alexg"}, "reply_to_user": {"reputation": 10744, "user_id": 671092, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ba5a30d29c197eaf9dbcd9feec3bafd2?s=128&d=identicon&r=PG&f=1", "display_name": "gd1", "link": "https://stackoverflow.com/users/671092/gd1"}, "edited": false, "score": 1, "creation_date": 1490201591, "post_id": 42957403, "comment_id": 73010517, "body": "@gd1 I totally agree and wouldn&#39;t do that myself, but with that little context from the original question it&#39;s a valid choice."}, {"owner": {"reputation": 10744, "user_id": 671092, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ba5a30d29c197eaf9dbcd9feec3bafd2?s=128&d=identicon&r=PG&f=1", "display_name": "gd1", "link": "https://stackoverflow.com/users/671092/gd1"}, "edited": false, "score": 0, "creation_date": 1490202641, "post_id": 42957403, "comment_id": 73011174, "body": "The OP can probably design the function however they want, so it&#39;d make sense to suggest a design that works in most cases and doesn&#39;t look so alarmingly old-fashioned and error-prone. Unless there&#39;s a compelling case to follow that route (and I am very sceptical there is in this case even though I can&#39;t look at the whole program)..."}, {"owner": {"reputation": 4578, "user_id": 6626554, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Cn7Ya.png?s=128&g=1", "display_name": "TheWaterProgrammer", "link": "https://stackoverflow.com/users/6626554/thewaterprogrammer"}, "edited": false, "score": 0, "creation_date": 1490271353, "post_id": 42957403, "comment_id": 73043379, "body": "trying to figure if I can use the new <code>std::optional</code> offering from C++"}], "tags": [], "owner": {"reputation": 1033, "user_id": 7667894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9cbd2317a1ddffc1e8f9ca0ff56b6f6?s=128&d=identicon&r=PG&f=1", "display_name": "AlexG", "link": "https://stackoverflow.com/users/7667894/alexg"}, "is_accepted": false, "score": 4, "last_activity_date": 1490200069, "last_edit_date": 1490200069, "creation_date": 1490199753, "answer_id": 42957403, "question_id": 42957323, "link": "https://stackoverflow.com/questions/42957323/avoid-creating-temporary-vars-for-params-which-are-not-defaulted/42957403#42957403", "title": "Avoid creating temporary vars for params which are not defaulted?", "body": "<p>C++ rules of thumb:\nreferences when you make something mandatory\npointers when you make something optional. Of course, the code in that function needs to account for nullptr that can be passed.</p>\n\n<p>Make it</p>\n\n<pre><code>void Func(int* pParam_1, bool* pParam_2, float* pParam_3, double* pParam_4) {\n// some logic\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 10744, "user_id": 671092, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ba5a30d29c197eaf9dbcd9feec3bafd2?s=128&d=identicon&r=PG&f=1", "display_name": "gd1", "link": "https://stackoverflow.com/users/671092/gd1"}, "edited": false, "score": 0, "creation_date": 1490210031, "post_id": 42957613, "comment_id": 73015675, "body": "That&#39;s <i>the</i> sensible advice here. I&#39;d also encourage the use of const on the result variable unless there&#39;s a compelling reason not to."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 10744, "user_id": 671092, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ba5a30d29c197eaf9dbcd9feec3bafd2?s=128&d=identicon&r=PG&f=1", "display_name": "gd1", "link": "https://stackoverflow.com/users/671092/gd1"}, "edited": false, "score": 0, "creation_date": 1490210583, "post_id": 42957613, "comment_id": 73015979, "body": "@gd1 The compelling reason not to is so you can move from the result."}, {"owner": {"reputation": 10744, "user_id": 671092, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ba5a30d29c197eaf9dbcd9feec3bafd2?s=128&d=identicon&r=PG&f=1", "display_name": "gd1", "link": "https://stackoverflow.com/users/671092/gd1"}, "edited": false, "score": 0, "creation_date": 1490210678, "post_id": 42957613, "comment_id": 73016022, "body": "If you don&#39;t have to (and, well, if the struct is made of those things...) you&#39;d rather have one less variable you can screw up, the compiler helpfully preventing you from doing so."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1490211668, "post_id": 42957613, "comment_id": 73016593, "body": "I cannot get &quot;<code>operator tie</code>&quot; technique to work.  Sad."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 6, "last_activity_date": 1490200381, "creation_date": 1490200381, "answer_id": 42957613, "question_id": 42957323, "link": "https://stackoverflow.com/questions/42957323/avoid-creating-temporary-vars-for-params-which-are-not-defaulted/42957613#42957613", "title": "Avoid creating temporary vars for params which are not defaulted?", "body": "<p>When you have <em>four</em> out parameters, like you do here:</p>\n\n<pre><code>void Func(int &amp; param_1, bool &amp; param_2, float &amp; param_3, double &amp; param_4);\n</code></pre>\n\n<p>That suggests that really you want to return one objects with 4 members, like:</p>\n\n<pre><code>std::tuple&lt;int, bool, float, double&gt; Func();\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>struct X {\n    int some;\n    bool meaningful;\n    float names;\n    double here;\n};\n\nX Func();\n</code></pre>\n\n<p>That way, you can just write:</p>\n\n<pre><code>auto res = Func();\n</code></pre>\n\n<p>and then just use the fields you want. </p>\n\n<hr />\n\n<p>In C++17, with structured bindings, that can be:</p>\n\n<pre><code>auto [ival, bval, _1, _2] = Func();\n</code></pre>\n\n<p>There's not really a clear way to express the notion that you don't care about the 3rd and 4th members, but this isn't bad. </p>\n"}, {"comments": [{"owner": {"reputation": 10744, "user_id": 671092, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ba5a30d29c197eaf9dbcd9feec3bafd2?s=128&d=identicon&r=PG&f=1", "display_name": "gd1", "link": "https://stackoverflow.com/users/671092/gd1"}, "edited": false, "score": 1, "creation_date": 1490201130, "post_id": 42957616, "comment_id": 73010167, "body": "Unless there is a very strong case (and I seriously doubt it) against it, I&#39;d return a struct."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 10744, "user_id": 671092, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ba5a30d29c197eaf9dbcd9feec3bafd2?s=128&d=identicon&r=PG&f=1", "display_name": "gd1", "link": "https://stackoverflow.com/users/671092/gd1"}, "edited": false, "score": 1, "creation_date": 1490201182, "post_id": 42957616, "comment_id": 73010203, "body": "@gd1: I agree, personally I don&#39;t like tuples, std::pair is borderline for me."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1490210299, "post_id": 42957616, "comment_id": 73015823, "body": "@Bathsheba How is <code>pair</code> better than <code>tuple</code>?  I&#39;d order them the other way around; <code>tuple</code> at least is useful in generic code to bundle data for later consumption; meanwhile <code>pair</code> is code smell everywhere."}, {"owner": {"reputation": 10744, "user_id": 671092, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ba5a30d29c197eaf9dbcd9feec3bafd2?s=128&d=identicon&r=PG&f=1", "display_name": "gd1", "link": "https://stackoverflow.com/users/671092/gd1"}, "edited": false, "score": 1, "creation_date": 1490211740, "post_id": 42957616, "comment_id": 73016629, "body": "Even though they are useful tools in many situations, especially <code>std::tuple</code> with templates, I don&#39;t think any client-facing interface should neither accept nor return a <code>std::pair</code> or a <code>std::tuple</code>. They have no semantics, they&#39;re just &quot;a few things&quot;. When <code>std::tuple</code> was introduced, I was quivering as I thought &quot;anyone too lazy to be bothered to write a struct will return a <code>std::tuple</code> of unnamed &#39;things&#39;&quot;. I didn&#39;t have to wait for long."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1490201153, "last_edit_date": 1490201153, "creation_date": 1490200399, "answer_id": 42957616, "question_id": 42957323, "link": "https://stackoverflow.com/questions/42957323/avoid-creating-temporary-vars-for-params-which-are-not-defaulted/42957616#42957616", "title": "Avoid creating temporary vars for params which are not defaulted?", "body": "<p>With a non-<code>const</code> reference such as you have, no. You could consider function overloading, returning a <code>struct</code>containing those values, or even a <code>std::tuple</code> from C++11 onwards. (Note that <code>std::tuple</code> gets a significant upgrade in C++14.)</p>\n\n<p>It would make things nicer if you made your references <code>const</code><sup>*</sup> and rely on the returned values for the results. Then you can pass <em>anonymous temporaries</em> to your function at the call site:</p>\n\n<pre><code>/*something*/ Func(const int&amp; param_1, const bool&amp; param_2, /*etc*/) {\n}\n</code></pre>\n\n<p>and call with <code>Func(1, true)</code> etc. With <code>const</code> references, you can even supply default values:</p>\n\n<pre><code>/*something*/ Func(const int&amp; param_1 = 1, const bool&amp; params_2 = true, /*etc*/){\n</code></pre>\n\n<hr>\n\n<p><sup>*</sup> Some compilers allow <em>binding</em> of an anonymous temporary to a non-<code>const</code> reference as an extension / unintentional bug. But I wouldn't rely on that if I were you.</p>\n"}, {"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1490208368, "post_id": 42958779, "comment_id": 73014745, "body": "I don&#39;t understand why you <code>std::remove_reference_t</code>; and its existence confused me and I answered basically a duplicate of yours.  In what situation is that <code>remove_reference_t</code> needed?"}, {"owner": {"reputation": 11117, "user_id": 1554020, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/49118fbd7e64a00bc99b19d41e5e28e0?s=128&d=identicon&r=PG", "display_name": "yuri kilochek", "link": "https://stackoverflow.com/users/1554020/yuri-kilochek"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1490210207, "post_id": 42958779, "comment_id": 73015781, "body": "@Yakk you are correct, it is superfluous here; appended lvalue reference will collapse whatever ref-qualifiers <code>T</code> has. Edited accordingly."}], "tags": [], "owner": {"reputation": 11117, "user_id": 1554020, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/49118fbd7e64a00bc99b19d41e5e28e0?s=128&d=identicon&r=PG", "display_name": "yuri kilochek", "link": "https://stackoverflow.com/users/1554020/yuri-kilochek"}, "is_accepted": false, "score": 1, "last_activity_date": 1490210952, "last_edit_date": 1490210952, "creation_date": 1490203800, "answer_id": 42958779, "question_id": 42957323, "link": "https://stackoverflow.com/questions/42957323/avoid-creating-temporary-vars-for-params-which-are-not-defaulted/42958779#42958779", "title": "Avoid creating temporary vars for params which are not defaulted?", "body": "<p>You can, but you have to be aware that the dummy temporaries will die at the end of the full-expression:</p>\n\n<pre><code>template &lt;typename T&gt;\nT&amp; stay(T&amp;&amp; x = T()) {\n    return x;\n}\n\nvoid Func(int&amp; param_1, bool&amp; param_2, float&amp; param_3, double&amp; param_4) {\n   //some logic\n}\n\nint main() {\n    int arg_1; float arg_3;\n    Func(arg_1, stay&lt;bool&gt;(), arg_3, stay(42.0));\n}\n</code></pre>\n\n<p><code>stay</code> converts rvalue to lvalue, and so is opposite of <code>std::move</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 11117, "user_id": 1554020, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/49118fbd7e64a00bc99b19d41e5e28e0?s=128&d=identicon&r=PG", "display_name": "yuri kilochek", "link": "https://stackoverflow.com/users/1554020/yuri-kilochek"}, "edited": false, "score": 0, "creation_date": 1490210444, "post_id": 42960204, "comment_id": 73015910, "body": "Doesn&#39;t lifetime of the default temporary bound to <code>t</code> end at the end of <code>at_lvalue</code>?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 11117, "user_id": 1554020, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/49118fbd7e64a00bc99b19d41e5e28e0?s=128&d=identicon&r=PG", "display_name": "yuri kilochek", "link": "https://stackoverflow.com/users/1554020/yuri-kilochek"}, "edited": false, "score": 1, "creation_date": 1490210488, "post_id": 42960204, "comment_id": 73015935, "body": "@yurikilochek No, it ends at the &quot;end of the line&quot; where you call <code>as_lvalue</code>.  Binding to a reference doesn&#39;t shorten their lifetime.  The <code>{}</code> exists at the location of call, and the explicit <code>false</code> also there.  Annoyingly, I cannot work out how to do an <code>ignored_reference()</code> construct without using a <code>static</code> variable; <code>operator T()</code> cannot take an argument!"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1490211655, "last_edit_date": 1490211655, "creation_date": 1490208311, "answer_id": 42960204, "question_id": 42957323, "link": "https://stackoverflow.com/questions/42957323/avoid-creating-temporary-vars-for-params-which-are-not-defaulted/42960204#42960204", "title": "Avoid creating temporary vars for params which are not defaulted?", "body": "<blockquote>\n  <p>sort of create the float and double variables on the fly at the moment of invoking the method</p>\n</blockquote>\n\n<p>To do this, create an anonymous temporary with the value you want.  Then cast it so you can bind to an lvalue reference.</p>\n\n<pre><code>template&lt;class T&gt;\nT&amp; as_lvalue(T&amp;&amp; t={}){return t;}\n\nvoid Func(int&amp; param_1, bool&amp; param_2, float&amp; param_3, double&amp; param_4) {\n}\n\nint main() {\n  int a1;\n  float a3;\n  Func(a1, as_lvalue(false), a3, as_lvalue(3.14));\n}\n</code></pre>\n\n<p><code>as_lvalue</code> takes an rvalue (or lvalue!) and casts it to an lvalue of the same type.  It can then bind to an lvalue reference, and be discarded at the end of the expression.</p>\n\n<p>If you don't care what their value is you can even do:</p>\n\n<pre><code>int main() {\n  int a1;\n  float a3;\n  Func(a1, as_lvalue&lt;bool&gt;(), a3, as_lvalue&lt;double&gt;());\n}\n</code></pre>\n\n<p>Note that using reference parameters as pure-out parameters is a bit of code smell.  When you use them, reference parameters should be in-out parameters; their value coming in and out should have use.</p>\n\n<p>Parameters where you both carry data in and take it out are also dangerous, as it makes it harder to reason about the behavior of the function.</p>\n\n<p>One approach that is extremely clean is to take and return a struct.</p>\n\n<pre><code>struct FuncArgs {\n  int param_1;\n  bool param_2;\n  float param_3;\n  double param_4;\n};\nFuncArgs Func(FuncArgs) {\n  //some logic\n}\n</code></pre>\n\n<p>people can call it like this:</p>\n\n<pre><code>Func({3, true, 42.f, 3.14})\n</code></pre>\n\n<p>and get the return data like this: </p>\n\n<pre><code>auto r = Func({3, true, 42.f, 3.14})\nint param1 = r.param1;\nbool param2 = r.param2;\n</code></pre>\n\n<p>ignoring the returned <code>param3</code> and <code>param4</code>.</p>\n\n<p>In C++17, they can even do:</p>\n\n<pre><code>auto[param1, param2, donotcare, alsodonotcare] = Func({3, true, 42.f, 3.14});\n</code></pre>\n\n<p>sadly there is no way to completely skip the <code>donotcare</code> and <code>alsodonotcare</code> fields.</p>\n\n<p>If, however, your data is pure-out results, we just strip the <code>FuncArgs</code> arguments.</p>\n\n<p>Now, modifying every location that calls <code>Func</code> may be annoying; but thanks to the wonder of overloading, we can just write:</p>\n\n<pre><code>inline FuncArgs Func() {\n  FuncArgs args;\n  Func(args.param1, args.param2, args.param3, args.param4);\n  return args;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>inline FuncArgs Func(FuncArgs args) {\n  Func(args.param1, args.param2, args.param3, args.param4);\n  return args;\n}\n</code></pre>\n\n<p>and both happily live beside each other.  Existing code need not be touched; new code is.</p>\n"}], "owner": {"reputation": 4578, "user_id": 6626554, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Cn7Ya.png?s=128&g=1", "display_name": "TheWaterProgrammer", "link": "https://stackoverflow.com/users/6626554/thewaterprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 42957613, "answer_count": 5, "score": 3, "last_activity_date": 1490211655, "creation_date": 1490199519, "last_edit_date": 1490200437, "question_id": 42957323, "link": "https://stackoverflow.com/questions/42957323/avoid-creating-temporary-vars-for-params-which-are-not-defaulted", "title": "Avoid creating temporary vars for params which are not defaulted?", "body": "<p>This might sound a crazy question possibly.</p>\n\n<p>in my C++ code, I created a method like this</p>\n\n<pre><code>void Func(int &amp; param_1, bool &amp; param_2, float &amp; param_3, double &amp; param_4) {\n   //some logic\n}\n</code></pre>\n\n<p>So I call the method in <code>main</code> like below:</p>\n\n<pre><code>int i_val;\nbool b_val;\nfloat f_val;\ndouble d_val;\n\n//invoke Func here\nFunc(i_val, b_val, f_val, d_val);\n</code></pre>\n\n<p><strong>Question:</strong> Is there some way to avoid creation of the temporary variables  <code>i_val, b_val, f_val</code> and so on ? And create them in the line of the invocation itself ?</p>\n\n<p>I am interested only in creating <code>i_val</code> and <code>b_val</code> and get their values.  <code>f_val</code> and <code>d_val</code> are unnecessary for me but necessary in some other call which doesn't concern me here. Is there a way to avoid creating the temporary vars just to pass each param into the call ?</p>\n\n<p><strong>I know we can make the last 2 params as default params</strong> but having default params makes the function params oblivious to the caller. Is there a way without making the last 2 params default ? sort of create the float and double variables on the fly at the moment of invoking the method</p>\n\n<p><em>I understand that I will get cross-questions on why you do not want to use default params but just checking if there is a possibility :)</em></p>\n"}, {"tags": ["c++", "string", "sorting", "binary-search-tree", "preorder"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1490200120, "post_id": 42957322, "comment_id": 73009446, "body": "Debugger.  Use a debugger.  A debugger will allow you to execute each statement, one at a time, and <i>watch</i> values of variables.  Edit your post with details about the suspect statement, after you use the debugger."}, {"owner": {"reputation": 830, "user_id": 7735711, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/phq5j.jpg?s=128&g=1", "display_name": "Tu\u011fberk Kaan Duman", "link": "https://stackoverflow.com/users/7735711/tu%c4%9fberk-kaan-duman"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1490200498, "post_id": 42957322, "comment_id": 73009709, "body": "Hi @ThomasMatthews I&#39;m quite unsure about how to use a debugger. Is there any native way to debug in Visual Studio C++ Express edition? Thanks for your reply."}], "answers": [{"comments": [{"owner": {"reputation": 830, "user_id": 7735711, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/phq5j.jpg?s=128&g=1", "display_name": "Tu\u011fberk Kaan Duman", "link": "https://stackoverflow.com/users/7735711/tu%c4%9fberk-kaan-duman"}, "edited": false, "score": 0, "creation_date": 1490203878, "post_id": 42958335, "comment_id": 73011971, "body": "How do I make a tree without sorting then? Because when I try all I get as output is weird things, like <code>A</code> or <code>A F F</code>. Doesn&#39;t work properly."}, {"owner": {"reputation": 1051, "user_id": 7192989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1d41f45e6cacfb3d4195a9878880724?s=128&d=identicon&r=PG", "display_name": "Rinat Veliakhmedov", "link": "https://stackoverflow.com/users/7192989/rinat-veliakhmedov"}, "reply_to_user": {"reputation": 830, "user_id": 7735711, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/phq5j.jpg?s=128&g=1", "display_name": "Tu\u011fberk Kaan Duman", "link": "https://stackoverflow.com/users/7735711/tu%c4%9fberk-kaan-duman"}, "edited": false, "score": 0, "creation_date": 1490206992, "post_id": 42958335, "comment_id": 73013971, "body": "It is a tree. Even a linked list is technically a tree. If you ask how to make a <i>balanced</i> tree (tree with max height of log(n)), then you have to implement balancing for your tree (google it). I don&#39;t understand what you mean by &#39;make a tree without sorting&#39;? You already implemented a working binary search tree. If you just want a tree that is always log(n) height, take a look at &quot;heap (data structure)&quot;, but heap tree is not a binary search tree."}, {"owner": {"reputation": 830, "user_id": 7735711, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/phq5j.jpg?s=128&g=1", "display_name": "Tu\u011fberk Kaan Duman", "link": "https://stackoverflow.com/users/7735711/tu%c4%9fberk-kaan-duman"}, "edited": false, "score": 0, "creation_date": 1490207333, "post_id": 42958335, "comment_id": 73014169, "body": "I meant, if I want to create a tree like that: <a href=\"https://d2vlcm61l7u1fs.cloudfront.net/media%2F991%2F99188ce0-2ecc-478e-93b3-ada532011ac0%2Fphpstal8r.png\" rel=\"nofollow noreferrer\">d2vlcm61l7u1fs.cloudfront.net/&hellip;</a>  What should I do? Without making B go to the right, C to the right, D to the right etc... All should just appear like the one in the image. I fail to do that."}, {"owner": {"reputation": 1051, "user_id": 7192989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1d41f45e6cacfb3d4195a9878880724?s=128&d=identicon&r=PG", "display_name": "Rinat Veliakhmedov", "link": "https://stackoverflow.com/users/7192989/rinat-veliakhmedov"}, "reply_to_user": {"reputation": 830, "user_id": 7735711, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/phq5j.jpg?s=128&g=1", "display_name": "Tu\u011fberk Kaan Duman", "link": "https://stackoverflow.com/users/7735711/tu%c4%9fberk-kaan-duman"}, "edited": false, "score": 0, "creation_date": 1490207947, "post_id": 42958335, "comment_id": 73014495, "body": "Either balance your tree (hard way), or just change your <code>add</code> method: use <i>breadth first traversal</i> instead of <i>depth first traversal</i> and insert new node at first empty space you find."}], "tags": [], "owner": {"reputation": 1051, "user_id": 7192989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1d41f45e6cacfb3d4195a9878880724?s=128&d=identicon&r=PG", "display_name": "Rinat Veliakhmedov", "link": "https://stackoverflow.com/users/7192989/rinat-veliakhmedov"}, "is_accepted": true, "score": 1, "last_activity_date": 1490202549, "creation_date": 1490202549, "answer_id": 42958335, "question_id": 42957322, "link": "https://stackoverflow.com/questions/42957322/why-my-code-wont-do-preorder-form-correctly-in-binary-search-tree/42958335#42958335", "title": "Why my code won&#39;t do preorder form correctly in Binary Search Tree?", "body": "<p>In your test example <code>A B C D E F</code> your tree is basically a linked list. First, you insert <code>A</code>, so it becomes your new root. <code>B</code> is bigger than <code>A</code>, so when you insert it, it goes as a right child. The same happens for all next strings:</p>\n\n<p><code>A</code>-><code>B</code>-><code>C</code>-><code>D</code>-><code>E</code>-><code>F</code>.</p>\n\n<p>So when you traverse your tree from left, you just print your list as it is since there are no left child in any of the nodes in the tree. When you traverse it from the right, you just print it backwards.</p>\n\n<p>Since your tree is unbalanced, this is an expected behaviour. There are no bugs in your code from what I can see. Try to add balancing or make another root.</p>\n"}], "owner": {"reputation": 830, "user_id": 7735711, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/phq5j.jpg?s=128&g=1", "display_name": "Tu\u011fberk Kaan Duman", "link": "https://stackoverflow.com/users/7735711/tu%c4%9fberk-kaan-duman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 42958335, "answer_count": 1, "score": 1, "last_activity_date": 1490202549, "creation_date": 1490199518, "question_id": 42957322, "link": "https://stackoverflow.com/questions/42957322/why-my-code-wont-do-preorder-form-correctly-in-binary-search-tree", "title": "Why my code won&#39;t do preorder form correctly in Binary Search Tree?", "body": "<p>I edited a code for a binary search tree, for strings. But there's a small problem. When I enter a simple input like A B C D E F, my program says the pre-order form is <code>A B C D E F</code>... which it should actually be <code>A B D E C F</code>.</p>\n\n<blockquote>\n  <p>Since, it should print the word at the root then print the word at the left subtree in pre-order and then print the word at\n  the right subtree in pre-order.</p>\n</blockquote>\n\n<p>Post order also should print <code>D E B F C A</code> but it prints <code>A B C D E F</code> and in-order should've printed <code>D B E A F C</code>... but it just gave me <code>F E D C B A</code>.</p>\n\n<p>Any help is appreciated, I don't know what went wrong.</p>\n\n<p>Here is the working full source code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;conio.h&gt;\nusing namespace std;\n\nclass Node {\nstring word;\nNode* left;\nNode* right;\npublic:\nNode() { word=-1; left=NULL; right=NULL; };\nvoid setWord(string aWord) { word = aWord; };\nvoid setLeft(Node* aLeft) { left = aLeft; };\nvoid setRight(Node* aRight) { right = aRight; };\nstring Word() { return word; };\nNode* Left() { return left; };\nNode* Right() { return right; };\n};\n\nclass Tree {\n Node* root;\npublic:\n Tree();\n ~Tree();\n Node* Root() { return root; };\n void addNode(string word);\n void inOrder(Node* n);\n void preOrder(Node* n);\n void postOrder(Node* n);\nprivate:\n void addNode(string word, Node* leaf);\n void freeNode(Node* leaf);\n};\n\nTree::Tree() {\n root = NULL;\n}\n\nTree::~Tree() {\n freeNode(root);\n}\n\nvoid Tree::freeNode(Node* leaf)\n{\nif ( leaf != NULL )\n{\n   freeNode(leaf-&gt;Left());\n   freeNode(leaf-&gt;Right());\n   delete leaf;\n}\n}\n\nvoid Tree::addNode(string word) {\n if ( root == NULL ) {\n    Node* n = new Node();\n    n-&gt;setWord(word);\n    root = n;\n }\n else {\n   addNode(word, root);\n }\n }\n\nvoid Tree::addNode(string word, Node* leaf) {\nif ( word &lt;= leaf-&gt;Word() ) {\n   if ( leaf-&gt;Left() != NULL )\n      addNode(word, leaf-&gt;Left());\n   else {\n      Node* n = new Node();\n      n-&gt;setWord(word);\n      leaf-&gt;setLeft(n);\n   }\n}\nelse {\n   if ( leaf-&gt;Right() != NULL )\n      addNode(word, leaf-&gt;Right());\n   else {\n      Node* n = new Node();\n      n-&gt;setWord(word);\n      leaf-&gt;setRight(n);\n   }\n}\n}\n\nvoid Tree::inOrder(Node* n) {\nif ( n ) {\n   inOrder(n-&gt;Left());\n   cout &lt;&lt; n-&gt;Word() &lt;&lt; \" \";\n   inOrder(n-&gt;Right());\n}\n}\n\nvoid Tree::preOrder(Node* n) {\nif ( n ) {\n   cout &lt;&lt; n-&gt;Word() &lt;&lt; \" \";\n   preOrder(n-&gt;Left());\n   preOrder(n-&gt;Right());\n}\n}\n\n\nvoid Tree::postOrder(Node* n) {\nif ( n ) {\n   postOrder(n-&gt;Left());\n   postOrder(n-&gt;Right());\n   cout &lt;&lt; n-&gt;Word() &lt;&lt; \" \";\n}\n}\n\nint main() {\nstring word;\nTree* tree = new Tree();\nwhile(word != \"end\"){\n   cin &gt;&gt; word;\n   if(word == \"end\"){\n       break;\n   }\n   tree-&gt;addNode(word);\n}\n\ncout &lt;&lt; \"In order traversal\" &lt;&lt; endl;\ntree-&gt;inOrder(tree-&gt;Root());\ncout &lt;&lt; endl;\n\ncout &lt;&lt; \"Pre order traversal\" &lt;&lt; endl;\ntree-&gt;preOrder(tree-&gt;Root());\ncout &lt;&lt; endl;\n\ncout &lt;&lt; \"Post order traversal\" &lt;&lt; endl;\ntree-&gt;postOrder(tree-&gt;Root());\ncout &lt;&lt; endl;\n\ndelete tree;\n_getch();\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 877, "user_id": 3666903, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/1i0Z6.jpg?s=128&g=1", "display_name": "bl4ckb0ne", "link": "https://stackoverflow.com/users/3666903/bl4ckb0ne"}, "edited": false, "score": 0, "creation_date": 1490200251, "post_id": 42957315, "comment_id": 73009541, "body": "Why use auto if a for loop? The chances to obtain undefined behaviour are  really high."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1490208632, "post_id": 42957315, "comment_id": 73014894, "body": "There&#39;s no need for that cast there, unless you are just trying to suppress compiler warnings."}], "answers": [{"comments": [{"owner": {"reputation": 707, "user_id": 6518168, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/828d5d9965ce458c668b904baac1e19a?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry J", "link": "https://stackoverflow.com/users/6518168/dmitry-j"}, "edited": false, "score": 0, "creation_date": 1490202192, "post_id": 42957419, "comment_id": 73010904, "body": "loop is supposed to be done for <code>i</code> = <code>expression</code> as well, so you should write <code>auto i = expression+1</code>. Personally, I find this way less readable, but of course it&#39;s a matter of test. Anyway, thank you for confirming that my variant is safe."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 707, "user_id": 6518168, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/828d5d9965ce458c668b904baac1e19a?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry J", "link": "https://stackoverflow.com/users/6518168/dmitry-j"}, "edited": false, "score": 0, "creation_date": 1490202987, "post_id": 42957419, "comment_id": 73011398, "body": "@DmitryJ oh, you are correct about the initial iteration. Good point."}, {"owner": {"reputation": 3933, "user_id": 25406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73cff92b3bc15706f0f7bf0fdbfa6e4c?s=128&d=identicon&r=PG", "display_name": "Tomek", "link": "https://stackoverflow.com/users/25406/tomek"}, "edited": false, "score": 0, "creation_date": 1490205676, "post_id": 42957419, "comment_id": 73013091, "body": "Not sure about this +1 part. What if expression evaluates to std::numeric_limits::max&lt;decltype(i)&gt;?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 3933, "user_id": 25406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73cff92b3bc15706f0f7bf0fdbfa6e4c?s=128&d=identicon&r=PG", "display_name": "Tomek", "link": "https://stackoverflow.com/users/25406/tomek"}, "edited": false, "score": 0, "creation_date": 1490208207, "post_id": 42957419, "comment_id": 73014645, "body": "@Tomek indeed, this approach can not handle that case. Depends on the context whether that is a problem. The most ideal case to use this is if you simply want <code>expression</code> number of iterations, rather than numbers starting from <code>expression</code> (which isn&#39;t exactly the behaviour of the loop in question)."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 4, "last_activity_date": 1490208376, "last_edit_date": 1490208376, "creation_date": 1490199837, "answer_id": 42957419, "question_id": 42957315, "link": "https://stackoverflow.com/questions/42957315/c-safe-counting-backwards-to-zero-for-auto-integral-type/42957419#42957419", "title": "c++ safe counting backwards to zero for &quot;auto&quot; integral type", "body": "<p>It is safe. But in my opinion, it is difficult to read and the safety/correctness is not necessarily intuitive (after all, why would you even ask otherwise). I propose:</p>\n\n<pre><code>for(auto i = expression; i-- &gt; 0;)\n</code></pre>\n\n<p>(Also known as the \"goes to\" operator, when formatted differently: <code>i --&gt; 0</code>).</p>\n\n<hr>\n\n<p>Edit: As pointed out, this doesn't have exactly the same behaviour as the loop in question. The initial value of <code>expression</code> is not iterated, instead the loop will start from <code>expression - 1</code> (and therefore there will be exactly <code>expression</code> number of iterations).</p>\n"}, {"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1490200241, "post_id": 42957503, "comment_id": 73009533, "body": "Instead of an infinite loop, the behaviour would be undefined."}], "tags": [], "owner": {"reputation": 669, "user_id": 6253379, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/VDrH9.png?s=128&g=1", "display_name": "Nikos Kazazakis", "link": "https://stackoverflow.com/users/6253379/nikos-kazazakis"}, "is_accepted": false, "score": 1, "last_activity_date": 1490200415, "last_edit_date": 1490200415, "creation_date": 1490200090, "answer_id": 42957503, "question_id": 42957315, "link": "https://stackoverflow.com/questions/42957315/c-safe-counting-backwards-to-zero-for-auto-integral-type/42957503#42957503", "title": "c++ safe counting backwards to zero for &quot;auto&quot; integral type", "body": "<p>It can actually be quite dangerous because you allow <code>expression</code> to potentially be negative. If this happens, your code will start counting from the value of <code>expression</code> to negative infinity, which is undefined behaviour (nobody knows what will happen after <code>i</code> hits the integer limit). You basically have a for loop without a break clause.</p>\n"}], "owner": {"reputation": 707, "user_id": 6518168, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/828d5d9965ce458c668b904baac1e19a?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry J", "link": "https://stackoverflow.com/users/6518168/dmitry-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 42957419, "answer_count": 2, "score": 1, "last_activity_date": 1490208376, "creation_date": 1490199488, "question_id": 42957315, "link": "https://stackoverflow.com/questions/42957315/c-safe-counting-backwards-to-zero-for-auto-integral-type", "title": "c++ safe counting backwards to zero for &quot;auto&quot; integral type", "body": "<p>Let <code>expression</code> be something which type is integral, known during compile-time, maybe signed, maybe unsigned. Is it safe to count backward to zero following way (assuming that actual value of expression is non-negative)?</p>\n\n<pre><code>for(auto i = expression; i!= static_cast&lt;decltype(i)&gt;(-1); --i) {\n  //something\n}\n</code></pre>\n"}, {"tags": ["c++", "winapi", "gdi"], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 4, "last_activity_date": 1490202560, "last_edit_date": 1490202560, "creation_date": 1490201183, "answer_id": 42957904, "question_id": 42957269, "link": "https://stackoverflow.com/questions/42957269/how-to-use-bitmapv5header-with-createdibitmap-function/42957904#42957904", "title": "How to use BITMAPV5HEADER with CreateDIBitmap function", "body": "<p>Yes, the type-casts are fine.</p>\n\n<p>The <a href=\"https://msdn.microsoft.com/en-us/library/dd183381.aspx\" rel=\"nofollow noreferrer\"><code>BITMAPV5HEADER</code></a> documentation states:</p>\n\n<blockquote>\n  <p>The <code>BITMAPV5HEADER</code> structure is the bitmap information header file. <strong>It is an extended version of the <a href=\"https://msdn.microsoft.com/en-us/library/dd183376.aspx\" rel=\"nofollow noreferrer\"><code>BITMAPINFOHEADER</code></a> structure.</strong></p>\n</blockquote>\n\n<p>The first 11 fields of <code>BITMAPV5HEADER</code> match the fields in <code>BITMAPINFOHEADER</code>.  As such, you can safely pass in a type-casted <code>BITMAPV5HEADER*</code> pointer to the <code>lpbmih</code> parameter where a <code>BITMAPINFOHEADER*</code> pointer is expected.</p>\n\n<p>The <code>lpbmi</code> parameter, on the other hand, is another story.  It is expecting a <code>BITMAPINFO*</code> pointer, but you are giving it a type-casted <code>BITMAPV5HEADER*</code> pointer instead.  Technically, a <code>BITMAPV5HEADER</code> is not an extension of <code>BITMAPINFO</code>, so you should be passing in a separate <code>BITMAPINFO</code> variable instead of your <code>BITMAPV5HEADER</code> variable.</p>\n\n<p>However, <code>BITMAPINFO</code> starts with a <code>BITMAPINFOHEADER</code>, so the first 11 fields of <code>BITMAPV5HEADER</code> will satisfy the <code>BITMAPINFO::bmiHeader</code> field.  And you are setting the header's <code>biBitCount</code> field to 32 and <code>biCompression</code> field to <code>BI_RGB</code>, so there is no color table used, so <code>CreateDIBitmap()</code> will not try to access the <code>BITMAPINFO::bmiColors</code> field and end up reading your <code>BITMAPV5HEADER</code>'s alpha/gamma fields as RGB values.  So in this particular configuration, passing a type-casted <code>BITMAPV5HEADER*</code> pointer to the <code>lpbmi</code> parameter where a <code>BITMAPINFO*</code> pointer is expected is also \"safe\".</p>\n"}], "owner": {"reputation": 3061, "user_id": 881712, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/852956f1a8a603a7d09d10e856f821be?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/881712/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 0, "accepted_answer_id": 42957904, "answer_count": 1, "score": 1, "last_activity_date": 1490202560, "creation_date": 1490199371, "last_edit_date": 1490200997, "question_id": 42957269, "link": "https://stackoverflow.com/questions/42957269/how-to-use-bitmapv5header-with-createdibitmap-function", "title": "How to use BITMAPV5HEADER with CreateDIBitmap function", "body": "<p>I'm trying to use a <a href=\"https://msdn.microsoft.com/en-us/library/dd183381.aspx\" rel=\"nofollow noreferrer\"><code>BITMAPV5HEADER</code></a> to create a bitmap that has the alpha channel:</p>\n\n<pre><code>BITMAPV5HEADER bi;\nbi.bV5Size = sizeof(BITMAPV5HEADER);\nbi.bV5Width = width;\nbi.bV5Height = -height;\nbi.bV5Planes = 1;\nbi.bV5BitCount = 32;\nbi.bV5Compression = BI_RGB;\nbi.bV5SizeImage = 0;\nbi.bV5XPelsPerMeter = 0;\nbi.bV5YPelsPerMeter = 0;\nbi.bV5ClrUsed = 0;\nbi.bV5ClrImportant = 0;\nbi.bV5AlphaMask = 0x000000FF;\nbi.bV5RedMask = 0x0000FF00;\nbi.bV5GreenMask = 0x00FF0000;\nbi.bV5BlueMask = 0xFF000000;\nbi.bV5CSType = LCS_sRGB;\nbi.bV5Endpoints = CIEXYZTRIPLE();\nbi.bV5GammaRed = 0;\nbi.bV5GammaGreen = 0;\nbi.bV5GammaBlue = 0;\nbi.bV5Intent = LCS_GM_IMAGES;\nbi.bV5ProfileData = 0;\nbi.bV5ProfileSize = 0;\nbi.bV5Reserved = 0;\n\n*hBmp = CreateDIBitmap(hdc, (BITMAPINFOHEADER *) &amp;bi, CBM_INIT, data, (BITMAPINFO *)&amp;bi, DIB_RGB_COLORS);\n</code></pre>\n\n<p>But I'm unsure if the type-cast is correct. The <a href=\"https://msdn.microsoft.com/en-us/library/dd183491.aspx\" rel=\"nofollow noreferrer\"><code>CreateDIBitmap()</code> documentation</a> is unclear, because in the field definition it says:</p>\n\n<blockquote>\n  <p><em>In</em>\u00a0const BITMAPINFOHEADER *lpbmih,</p>\n</blockquote>\n\n<p>and in the description:</p>\n\n<blockquote>\n  <p>lpbmih [in]<br>\n  A pointer to a bitmap information header structure, BITMAPV5HEADER.</p>\n</blockquote>\n"}, {"tags": ["c++", "overloading"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1490199150, "post_id": 42957146, "comment_id": 73008767, "body": "Show the full error, most compilers will list the alternatives"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1490199174, "post_id": 42957146, "comment_id": 73008783, "body": "I believe, because there already <i>exists</i> a standard overload for this."}, {"owner": {"reputation": 654, "user_id": 4743711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l0qvK.png?s=128&g=1", "display_name": "Loreto", "link": "https://stackoverflow.com/users/4743711/loreto"}, "edited": false, "score": 1, "creation_date": 1490199271, "post_id": 42957146, "comment_id": 73008853, "body": "read this <a href=\"http://stackoverflow.com/a/24088197/4743711\">stackoverflow.com/a/24088197/4743711</a>"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1490199302, "post_id": 42957146, "comment_id": 73008875, "body": "...The standard version is templated on the output stream as well. At a guess you&#39;ve made an overload with one argument non-templated, and the standard offers an overload with the other argument non-templated."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1490199385, "post_id": 42957146, "comment_id": 73008928, "body": "Try <code>template &lt;class T, class CharT, class Traits&gt;</code>...<code>std::basic_ostream&lt;CharT, Traits&gt;&amp; os</code>..."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1490199472, "post_id": 42957146, "comment_id": 73008979, "body": "and yep, <a href=\"http://coliru.stacked-crooked.com/a/c950b510f82688d7\" rel=\"nofollow noreferrer\">I&#39;m right</a>"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1490204385, "post_id": 42957146, "comment_id": 73012277, "body": "@ForceBru an already present overload doesn&#39;t necessarily mean overload ambiguity. For that to happen, the candidates need to be ambiguous with regards to which is more specialized. The problem here is that the arguments for the candidates aren&#39;t consistently more specialized one way or the other as is required for one candidate to be chosen over the other."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1490202753, "post_id": 42957361, "comment_id": 73011254, "body": "&quot;<i>You can get the behavior you expect by making your version of operator&lt;&lt; use the same template argument for the first argument</i>&quot; - shouldn&#39;t the return value also be templated to match the argument? <code>template&lt;class T, class CharT, class Traits&gt; inline std::basic_ostream&lt;CharT, Traits&gt;&amp; operator&lt;&lt;(std::basic_ostream&lt;CharT, Traits&gt;&amp; os, T const&amp; t)</code>.  <code>std::ostream</code> is a specialization of <code>std::basic_ostream</code> for <code>char</code>, but what if <code>CharT</code> is not <code>char</code>?"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1490202899, "post_id": 42957361, "comment_id": 73011329, "body": "@RemyLebeau yep, thanks for the catch (though it actually doesn&#39;t change the overload resolution here. Fun times.)"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1490203851, "post_id": 42957361, "comment_id": 73011953, "body": "I think that&#39;s it. I could list the full set of rules defining how parameters are determined to be more specialized, but that&#39;s a bit excessive considering these are relatively simple cases, and those are long (and easily discovered by following the links to the standard)"}], "tags": [], "owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "is_accepted": true, "score": 3, "last_activity_date": 1490203512, "last_edit_date": 1490203512, "creation_date": 1490199619, "answer_id": 42957361, "question_id": 42957146, "link": "https://stackoverflow.com/questions/42957146/why-operator-is-ambiguous/42957361#42957361", "title": "Why operator&lt;&lt; is ambiguous?", "body": "<p>Your version of <code>operator&lt;&lt;</code> here is templated on one argument, and so is the version supplied by the standard. </p>\n\n<p>The problem lies in that your version (We'll call it function <em>a</em>) is templated on one argument:</p>\n\n<pre><code>template&lt;class T&gt;\ninline std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, T const&amp; t)\n{       \n    return os;\n}\n</code></pre>\n\n<p>and from <a href=\"http://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt2\" rel=\"nofollow noreferrer\">cppreference</a>, you can see the standard's overload for <code>const char*</code> (we'll call it <em>b</em>) is templated on the other:</p>\n\n<pre><code>template&lt; class Traits &gt;\nbasic_ostream&lt;char,Traits&gt;&amp; operator&lt;&lt;( basic_ostream&lt;char,Traits&gt;&amp; os,  \n                                        const char* s );\n</code></pre>\n\n<p>You can get the behavior you expect by making your version of <code>operator&lt;&lt;</code> use the same template argument for the first argument (this one is <em>c</em>):</p>\n\n<pre><code>template&lt;class T, class CharT, class Traits&gt;\ninline std::basic_ostream&lt;CharT, Traits&gt;&amp; operator&lt;&lt;(std::basic_ostream&lt;CharT, Traits&gt;&amp; os, T const&amp; t)\n{       \n        return os;\n}\n</code></pre>\n\n<p>compiles happily, as you can see <a href=\"http://coliru.stacked-crooked.com/a/503a53af124b175b\" rel=\"nofollow noreferrer\">on coliru</a>.</p>\n\n<p>This is because template overload selection chooses the most specialized template when selecting an overload with multiple candidate template functions.</p>\n\n<p>Specifically, first the template is transformed:</p>\n\n<p><a href=\"http://eel.is/c++draft/temp.func.order\" rel=\"nofollow noreferrer\">[temp.func.order]:</a></p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li><p><strong>Partial ordering selects which of two function templates is more specialized</strong> than the other by transforming each template in turn (see next paragraph) and performing template argument deduction using the function type. The deduction process determines whether one of the templates is more specialized than the other. If so, the more specialized template is the one chosen by the partial ordering process.</p></li>\n  <li><p>To produce the transformed template, for each type, non-type, or template template parameter (including template parameter packs thereof) synthesize a unique type, value, or class template respectively and substitute it for each occurrence of that parameter in the function type of the template. <em>[\u2009Note: The type replacing the placeholder in the type of the value synthesized for a non-type template parameter is also a unique synthesized type. \u2009\u2014\u2009end note\u2009]</em> ...</p></li>\n  </ol>\n</blockquote>\n\n<p><a href=\"http://eel.is/c++draft/temp.deduct.partial\" rel=\"nofollow noreferrer\">[temp.deduct.partial]:</a></p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li><p>Two sets of types are used to determine the partial ordering. For each of the templates involved there is the original function type and the transformed function type. <em>[\u2009Note: The creation of the transformed type is described in [temp.func.order]. \u2009\u2014\u2009end note\u2009]</em> The deduction process uses the transformed type as the argument template and the original type of the other template as the parameter template. This process is done twice for each type involved in the partial ordering comparison: once using the transformed template-1 as the argument template and template-2 as the parameter template and again using the transformed template-2 as the argument template and template-1 as the parameter template.</p></li>\n  <li><p>The types used to determine the ordering depend on the context in which the partial ordering is done:</p>\n  \n  <ol>\n  <li>In the context of a function call, the types used are those function parameter types for which the function call has arguments.</li>\n  </ol></li>\n  </ol>\n  \n  <p>...</p>\n  \n  <ol start=\"10\">\n  <li>Function template F is at least as specialized as function template G if, for each pair of types used to determine the ordering, the type from F is at least as specialized as the type from G. F is more specialized than G if F is at least as specialized as G and G is not at least as specialized as F.</li>\n  </ol>\n</blockquote>\n\n<p>So, we want the parts of the templates that are the function arguments.</p>\n\n<pre><code>a) T                 =&gt;  std::ostream&amp;,                     T const&amp;\nb) CharT, Traits     =&gt;  std::basic_ostream&lt;CharT, Traits&gt;, const char*\nc) T, CharT, Traits  =&gt;  std::basic_ostream&lt;CharT, Traits&gt;, T const&amp;\n</code></pre>\n\n<p>For the first argument of these functions, <em>a</em> is more specialized than <em>b</em> and <em>c</em>. </p>\n\n<p>For the second argument of these functions, <em>b</em> is more specialized than <em>a</em> and <em>c</em>.</p>\n\n<p>As we learned in [temp.deduct.partial]/10, argument deduction requires all relevant arguments of a function <em>f1</em> to be at least as specialized as all arguments of a function <em>f2</em> for the function <em>f1</em> to be at least as specialized as <em>f2</em>, <em>a</em> cannot here be more specialized than <em>b</em>, since each have one argument more specialized than the other's matching argument.</p>\n\n<p>This isn't the case with <em>c</em>, as both <em>a</em> and <em>c</em> have all arguments at least as specialized as the arguments in <em>c</em>.</p>\n\n<p>Thus, overload resolution will be ambiguous in choosing between <em>a</em> and <em>b</em> because <em>a</em> is at least as specialized as <em>b</em> and <em>b</em> is at least as specialized as <em>a</em>. The ambiguity is removed by using <em>c</em> instead of <em>a</em> because <em>b</em> is at least as specialized as <em>c</em>, but the reverse is not true.</p>\n\n<p>As we know from [temp.func.order]/2, the more specialized function wins overload resolution, and with the use of <em>c</em> rather than <em>a</em>, the winner is <em>b</em>, and the line <code>std::cout &lt;&lt; \"hello\";</code> prints <code>hello</code> to the console.</p>\n"}, {"tags": [], "owner": {"reputation": 1889, "user_id": 7038446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38faf3b21f6b84c3d25269cf3919d8a?s=128&d=identicon&r=PG&f=1", "display_name": "felix", "link": "https://stackoverflow.com/users/7038446/felix"}, "is_accepted": false, "score": 0, "last_activity_date": 1490203990, "last_edit_date": 1490203990, "creation_date": 1490203174, "answer_id": 42958566, "question_id": 42957146, "link": "https://stackoverflow.com/questions/42957146/why-operator-is-ambiguous/42958566#42958566", "title": "Why operator&lt;&lt; is ambiguous?", "body": "<p>There is a function template</p>\n\n<pre><code>template &lt;class Traits&gt;\n... operator&lt;&lt;(basic_ostream&lt;char, Traits&gt; &amp;, const char *); // @1\n</code></pre>\n\n<p>declared in the standard library.</p>\n\n<p>After substitution, the conversion required to call standard's specialization and yours, a.k.a.</p>\n\n<pre><code>template&lt;class T&gt;\n... operator&lt;&lt;(std::ostream&amp; os, T const&amp; t); // @2\n</code></pre>\n\n<p>is both ranked as <strong>exact match</strong>.</p>\n\n<p>Then the compiler try to solve this call by <a href=\"http://en.cppreference.com/w/cpp/language/function_template#Function_template_overloading\" rel=\"nofollow noreferrer\">partial ordering rules</a>:</p>\n\n<pre><code>@1 from transformed @2 :\n(basic_ostream&lt;char, T&gt; &amp;, const char *) from (std::ostream&amp; os, U const&amp; t)\n: P2 = const char *, A2 = U const &amp; : deduction fails\n\n@2 from transformed @1 :\n(std::ostream&amp; os, T const&amp; t) from (basic_ostream&lt;char, U&gt; &amp;, const char *)\n: P1 = std::ostream&amp;, A1 = basic_ostream&lt;char, U&gt; &amp; : deduction fails\n</code></pre>\n\n<p>thus neither is more specialized, the call is ambiguous.</p>\n\n<hr>\n\n<p>There are some other candidates:</p>\n\n<pre><code>operator&lt;&lt;(basic_ostream&lt;_CharT, _Traits&gt;&amp;, const char*)\noperator&lt;&lt;(basic_ostream&lt;_CharT, _Traits&gt;&amp;, const _CharT*)\n</code></pre>\n\n<p>But sadly, they both are less specialized than the big brother @1 in this case. So I kicked them out...</p>\n\n<p>And some more, but these two are just for making the error message less readable.</p>\n\n<pre><code>operator&lt;&lt;(bool __n)\noperator&lt;&lt;(const void* __p)\n</code></pre>\n"}], "owner": {"reputation": 11861, "user_id": 1899020, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c6f377132e8aad22b97bfcc85adffdb?s=128&d=identicon&r=PG", "display_name": "user1899020", "link": "https://stackoverflow.com/users/1899020/user1899020"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 1, "accepted_answer_id": 42957361, "answer_count": 2, "score": 2, "last_activity_date": 1490203990, "creation_date": 1490199037, "question_id": 42957146, "link": "https://stackoverflow.com/questions/42957146/why-operator-is-ambiguous", "title": "Why operator&lt;&lt; is ambiguous?", "body": "<p>I defined a function template in global scope as</p>\n\n<pre><code>template&lt;class T&gt;\ninline std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, T const&amp; t)\n{       \n    return os;\n}\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>std::cout &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>doesn't compile because of ambiguity. I think it is function overloading and the compile can resolve it, and choose the more specific version for <code>char const*</code>. Why doesn't compile?</p>\n"}, {"tags": ["c++", "vector", "struct"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1490198598, "post_id": 42956938, "comment_id": 73008350, "body": "Where did you define your <code>menu</code>, or <code>makeAccount</code> functions? All I can see in your example are declarations. EDIT: if there&#39;s multiple files including this header, then <code>vector &lt;Account&gt; bankAccounts;</code> will be defined multiple times in all translation units. Consider using <code>extern</code> when <i>declaring</i> the global variable, and then, define it <i>once</i> in a single translation unit."}, {"owner": {"reputation": 15, "user_id": 7719182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab69a3855b21e5cfc2bde8da5c92de69?s=128&d=identicon&r=PG&f=1", "display_name": "zycoactivtheory", "link": "https://stackoverflow.com/users/7719182/zycoactivtheory"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1490198859, "post_id": 42956938, "comment_id": 73008536, "body": "sorry, I edited it accordingly, with one more cpp file."}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1490199124, "post_id": 42956938, "comment_id": 73008751, "body": "You promised <code>void makeAccount(vector &lt;Account&gt;&amp;)</code> but didn&#39;t deliver; I can only see <code>void makeAccount()</code>"}, {"owner": {"reputation": 15, "user_id": 7719182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab69a3855b21e5cfc2bde8da5c92de69?s=128&d=identicon&r=PG&f=1", "display_name": "zycoactivtheory", "link": "https://stackoverflow.com/users/7719182/zycoactivtheory"}, "edited": false, "score": 0, "creation_date": 1490199974, "post_id": 42956938, "comment_id": 73009349, "body": "thanks for all the suggestions. I edited the code accordingly. unfortunately the same errors still show. The edited code itself might be wrong, I&#39;m not entirely sure."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 7719182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab69a3855b21e5cfc2bde8da5c92de69?s=128&d=identicon&r=PG&f=1", "display_name": "zycoactivtheory", "link": "https://stackoverflow.com/users/7719182/zycoactivtheory"}, "edited": false, "score": 0, "creation_date": 1490199938, "post_id": 42957212, "comment_id": 73009331, "body": "followed your advice &amp; edited the code accordingly, but the program still shows the same errors. I might&#39;ve edited it wrong"}, {"owner": {"reputation": 3075, "user_id": 1790154, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/64e5ca55fc4105591eb9c1cf24a5d878?s=128&d=identicon&r=PG", "display_name": "zhm", "link": "https://stackoverflow.com/users/1790154/zhm"}, "reply_to_user": {"reputation": 15, "user_id": 7719182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab69a3855b21e5cfc2bde8da5c92de69?s=128&d=identicon&r=PG&f=1", "display_name": "zycoactivtheory", "link": "https://stackoverflow.com/users/7719182/zycoactivtheory"}, "edited": false, "score": 0, "creation_date": 1490200109, "post_id": 42957212, "comment_id": 73009440, "body": "@zycoactivtheory Both two errors still exist? Or there are different errors other than the ones in your question?"}, {"owner": {"reputation": 3075, "user_id": 1790154, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/64e5ca55fc4105591eb9c1cf24a5d878?s=128&d=identicon&r=PG", "display_name": "zhm", "link": "https://stackoverflow.com/users/1790154/zhm"}, "reply_to_user": {"reputation": 15, "user_id": 7719182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab69a3855b21e5cfc2bde8da5c92de69?s=128&d=identicon&r=PG&f=1", "display_name": "zycoactivtheory", "link": "https://stackoverflow.com/users/7719182/zycoactivtheory"}, "edited": false, "score": 0, "creation_date": 1490200249, "post_id": 42957212, "comment_id": 73009539, "body": "@zycoactivtheory Please edit your question with your modified code, so we can know what is going wrong."}, {"owner": {"reputation": 3075, "user_id": 1790154, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/64e5ca55fc4105591eb9c1cf24a5d878?s=128&d=identicon&r=PG", "display_name": "zhm", "link": "https://stackoverflow.com/users/1790154/zhm"}, "reply_to_user": {"reputation": 15, "user_id": 7719182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab69a3855b21e5cfc2bde8da5c92de69?s=128&d=identicon&r=PG&f=1", "display_name": "zycoactivtheory", "link": "https://stackoverflow.com/users/7719182/zycoactivtheory"}, "edited": false, "score": 0, "creation_date": 1490200337, "post_id": 42957212, "comment_id": 73009606, "body": "@zycoactivtheory You should define <code>vector &lt;Account&gt; bankAccounts;</code> in  <b>one of</b> your cpp file, not both."}, {"owner": {"reputation": 15, "user_id": 7719182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab69a3855b21e5cfc2bde8da5c92de69?s=128&d=identicon&r=PG&f=1", "display_name": "zycoactivtheory", "link": "https://stackoverflow.com/users/7719182/zycoactivtheory"}, "edited": false, "score": 0, "creation_date": 1490200443, "post_id": 42957212, "comment_id": 73009669, "body": "the code was modified, and it is within the original post. I indicated where I edited using //edited and such. EDIT: ok will try that now."}, {"owner": {"reputation": 3075, "user_id": 1790154, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/64e5ca55fc4105591eb9c1cf24a5d878?s=128&d=identicon&r=PG", "display_name": "zhm", "link": "https://stackoverflow.com/users/1790154/zhm"}, "reply_to_user": {"reputation": 15, "user_id": 7719182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab69a3855b21e5cfc2bde8da5c92de69?s=128&d=identicon&r=PG&f=1", "display_name": "zycoactivtheory", "link": "https://stackoverflow.com/users/7719182/zycoactivtheory"}, "edited": false, "score": 0, "creation_date": 1490200443, "post_id": 42957212, "comment_id": 73009671, "body": "@zycoactivtheory And for another issue, <code>vector &lt;Account&gt;&amp;</code> is not equal to <code>vector&lt;Account&gt;</code>. First is reference, second is object. Parameter in your definition of <code>makeAccount()</code> should be reference (same with parameter type in your declaration)."}, {"owner": {"reputation": 15, "user_id": 7719182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab69a3855b21e5cfc2bde8da5c92de69?s=128&d=identicon&r=PG&f=1", "display_name": "zycoactivtheory", "link": "https://stackoverflow.com/users/7719182/zycoactivtheory"}, "edited": false, "score": 0, "creation_date": 1490200613, "post_id": 42957212, "comment_id": 73009799, "body": "OK! The program runs successfully. Thanks for the help Martin! Let me see if the code works as intended though."}], "tags": [], "owner": {"reputation": 3075, "user_id": 1790154, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/64e5ca55fc4105591eb9c1cf24a5d878?s=128&d=identicon&r=PG", "display_name": "zhm", "link": "https://stackoverflow.com/users/1790154/zhm"}, "is_accepted": true, "score": 0, "last_activity_date": 1490200023, "last_edit_date": 1490200023, "creation_date": 1490199211, "answer_id": 42957212, "question_id": 42956938, "link": "https://stackoverflow.com/questions/42956938/program-keeps-on-giving-such-lnk-errors/42957212#42957212", "title": "Program keeps on giving such LNK errors", "body": "<p><strong>1.</strong> <code>bankAccounts</code> already defined in function_file.obj.</p>\n\n<p>You should define <code>bankAccounts</code> in your cpp file. Because if you define it in header file, when you include your header in multiple cpp files, there would be multiple definition of <code>backAccounts</code>.</p>\n\n<p>If you needs it in multiple cpp files, use <code>extern</code> to declare(not define) it in your header file:</p>\n\n<pre><code>extern vector &lt;Account&gt; bankAccounts;\n</code></pre>\n\n<p>And in <strong>one of</strong> your cpp file, define it as:</p>\n\n<pre><code>vector &lt;Account&gt; bankAccounts;\n</code></pre>\n\n<p><strong>2.</strong> unresolved external symbol <code>void makeAccount()</code></p>\n\n<p>Definition of <code>makeAccount()</code> should be like:</p>\n\n<pre><code>void makeAccount(vector &lt;Account&gt;&amp;)\n{\n   // do something\n}\n</code></pre>\n\n<p>While you are defining it as <code>void makeAccount(vector&lt;Account&gt;)</code>. Please notice the difference. In your declaration, parameter is <strong>reference to a vector</strong>, while in your definition, parameter is <strong>vector object</strong>.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 7719182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab69a3855b21e5cfc2bde8da5c92de69?s=128&d=identicon&r=PG&f=1", "display_name": "zycoactivtheory", "link": "https://stackoverflow.com/users/7719182/zycoactivtheory"}, "edited": false, "score": 0, "creation_date": 1490200040, "post_id": 42957333, "comment_id": 73009399, "body": "thanks for the suggestions.  \t followed your advice &amp; edited the code accordingly, but the program still shows the same errors. I might&#39;ve edited it wrong however. As for the using namespace std; I will drop that habit as soon as my university course is finished. The professor recommends students to use it at least for  her course."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 15, "user_id": 7719182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab69a3855b21e5cfc2bde8da5c92de69?s=128&d=identicon&r=PG&f=1", "display_name": "zycoactivtheory", "link": "https://stackoverflow.com/users/7719182/zycoactivtheory"}, "edited": false, "score": 0, "creation_date": 1490200129, "post_id": 42957333, "comment_id": 73009456, "body": "@zycoactivtheory Did you recompile your source files, before trying to link <code>.obj</code> files together?"}, {"owner": {"reputation": 15, "user_id": 7719182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab69a3855b21e5cfc2bde8da5c92de69?s=128&d=identicon&r=PG&f=1", "display_name": "zycoactivtheory", "link": "https://stackoverflow.com/users/7719182/zycoactivtheory"}, "edited": false, "score": 0, "creation_date": 1490200323, "post_id": 42957333, "comment_id": 73009591, "body": "sorry! some clarification please.... I&#39;m using Visual Studios, and as a novice, I have no idea what it means to link .obj files together. I just build &amp; run (also by the command ctrl + f5)"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 15, "user_id": 7719182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab69a3855b21e5cfc2bde8da5c92de69?s=128&d=identicon&r=PG&f=1", "display_name": "zycoactivtheory", "link": "https://stackoverflow.com/users/7719182/zycoactivtheory"}, "edited": false, "score": 1, "creation_date": 1490200371, "post_id": 42957333, "comment_id": 73009632, "body": "@zycoactivtheory 1) Please don&#39;t try to fix your code in the question, because, then, it becomes useless in long-term research. 2) You read my answer wrong. I even emphasized, that you need to define it in <b>one</b> of the .cpp files, but you, once again defined it in both. 3) <code>vector &lt;Account&gt;&amp;</code> is not the same as <code>vector &lt;Account&gt;</code>, meaning - you still didn&#39;t provide a definition for <code>void makeAccount(vector &lt;Account&gt;&amp;);</code>."}, {"owner": {"reputation": 15, "user_id": 7719182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab69a3855b21e5cfc2bde8da5c92de69?s=128&d=identicon&r=PG&f=1", "display_name": "zycoactivtheory", "link": "https://stackoverflow.com/users/7719182/zycoactivtheory"}, "edited": false, "score": 0, "creation_date": 1490200881, "post_id": 42957333, "comment_id": 73009981, "body": "1) I left the original code in there and just added some comments &amp; additional lines of code to indicate where it was modified. Would that still cause an issue with long-term research? 2) Yes, sorry about that. I fixed it accordingly in my program. 3) Yes, thank you, I also just fixed that. The gentleman below also pointed these out. The program runs successfully now. The only thing left is to test out its functionality and see if it works as intended. , really appreciate the help Algirdas!"}], "tags": [], "owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "is_accepted": false, "score": 0, "last_activity_date": 1490199937, "last_edit_date": 1495539978, "creation_date": 1490199562, "answer_id": 42957333, "question_id": 42956938, "link": "https://stackoverflow.com/questions/42956938/program-keeps-on-giving-such-lnk-errors/42957333#42957333", "title": "Program keeps on giving such LNK errors", "body": "<ol>\n<li><p>The error message of the first error, which can be abridged to:</p>\n\n<blockquote>\n  <p>main_file.obj : error LNK2005: <code>std::vector&lt;Account&gt; bankAccounts</code> already defined in function_file.obj</p>\n</blockquote>\n\n<p>The reason for this error is that included files are copy-pasted in place of <code>#include</code>. That way, the <code>std::vector&lt;Account&gt; bankAccounts</code> is defined in both files (and they are, completely separate objects!), so the linker complains because of the multiple-definitions.</p>\n\n<p>To solve this, in the header file, <em>declare</em> the global variable as <code>extern std::vector&lt;Account&gt; bankAccounts</code>, and then define it, in <strong>one</strong> of the .cpp files as <code>std::vector&lt;Account&gt; bankAccounts</code>. <code>extern</code>, only declares that there will be such a variable defined, at some point, and since you will be defining a global variable once, the linker won't see multiple definitions of said variable.</p></li>\n<li><p>The second error is just like it sounds: you declared (and tried to call a function with signature <code>void makeAccount(vector &lt;Account&gt;&amp;);</code>, however, you defined a function with signature <code>void makeAccount();</code>, leaving the function <code>void makeAccount(vector &lt;Account&gt;&amp;);</code> undefined. Fix the definition of a function to include the parameter, present in its declarations:</p>\n\n<pre><code>void makeAccount(vector &lt;Account&gt;&amp;) {\n    return;\n}\n</code></pre></li>\n</ol>\n\n<hr>\n\n<p>Unrelated to your issues, but I felt that I should mention several more things:</p>\n\n<ol>\n<li>Don't use <code>using namespace std;</code>, especially in the header files, <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">it is considered a bad practice</a>.</li>\n<li>How is your code even reaching the linker stage? It shouldn't even compile, because <code>Account</code> is declared after the <code>void makeAccount(vector &lt;Account&gt;&amp;);</code>, and at the point of such function declaration - <code>struct</code> <code>Account</code> is not known to the compiler.</li>\n</ol>\n"}], "owner": {"reputation": 15, "user_id": 7719182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab69a3855b21e5cfc2bde8da5c92de69?s=128&d=identicon&r=PG&f=1", "display_name": "zycoactivtheory", "link": "https://stackoverflow.com/users/7719182/zycoactivtheory"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 42957212, "answer_count": 2, "score": 0, "last_activity_date": 1490200023, "creation_date": 1490198503, "last_edit_date": 1490199828, "question_id": 42956938, "link": "https://stackoverflow.com/questions/42956938/program-keeps-on-giving-such-lnk-errors", "title": "Program keeps on giving such LNK errors", "body": "<p>header.h</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;ctime&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\n//vector &lt;Account&gt; bankAccounts; this is taken out.\n\nextern vector &lt;Account&gt; bankAccounts; //edited\n\n\n\n\nstruct Account {\n    int accountNumber;\n    string lastName;\n    string firstName;\n    double accountbalance;\n};\n\nvoid menu(int*);\nvoid makeAccount(vector &lt;Account&gt;&amp;);\n</code></pre>\n\n<p>cpp</p>\n\n<pre><code>#include \"Header.h\"\n\nvoid menu(int*);\nvoid makeAccount(vector &lt;Account&gt;&amp;);\nvector &lt;Account&gt; bankAccounts; //edited \n\n\nint main() {\n\n\n\nint input = 0;\nint *inputPtr = &amp;input;\n\n\nmenu(inputPtr);\n\nswitch (input) {\ncase 1:\n    makeAccount(bankAccounts);\n\n     }\n}\n</code></pre>\n\n<p>another cpp</p>\n\n<pre><code>#include \"Header.h\"\n\nvector &lt;Account&gt; bankAccounts; edited;\n\nvoid menu(int *inputPtr) {\n\n    int select = 0;\n\n    cout &lt;&lt; \"Welcome to MadeUp Banking. Select options below: \\n\";\n    cout &lt;&lt; \"\\t 1. Make new account. \\n\";\n    cout &lt;&lt; \"\\t 2. Display to an account. \\n\";\n    cout &lt;&lt; \"\\t 3. Deposit to an account. \\n\";\n    cout &lt;&lt; \"\\t 4. Withdraw from an account. \\n\";\n    cout &lt;&lt; \"\\t 5. Print account. \\n\";\n    cout &lt;&lt; \"\\t 6. Delete an account. \\n\";\n    cout &lt;&lt; \"\\t 7. Quit. \\n\";\n    cout &lt;&lt; \"Selection: \";\n    cin &gt;&gt; select;\n    *inputPtr = select;\n\n}\n\n\n\nvoid makeAccount(vector &lt;Account&gt; bankAccounts) {\n    //edited vector &lt;Account&gt; bankAccounts within makeAccount()\n\nreturn;\n</code></pre>\n\n<p>}</p>\n\n<p>When program is ran, the error gives: </p>\n\n<blockquote>\n  <p>main_file.obj : error LNK2005: \"class std::vector > bankAccounts\" (?bankAccounts@@3V?$vector@UAccount@@V?$allocator@UAccount@@@std@@@std@@A) already defined in function_file.obj\n  1>main_file.obj : error LNK2019: unresolved external symbol \"void __cdecl makeAccount(class std::vector > &amp;)\" (?makeAccount@@YAXAAV?$vector@UAccount@@V?$allocator@UAccount@@@std@@@std@@@Z) referenced in function _main</p>\n</blockquote>\n\n<p>How do I go about fixing this error?\nSorry I'm a rookie coder, if more details are needed, then please tell me and I will edit accordingly. Thank you for the help in advance.</p>\n"}, {"tags": ["c++", "opengl", "windows-10", "glfw"], "comments": [{"owner": {"reputation": 703, "user_id": 5778900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jh1qL.png?s=128&g=1", "display_name": "pleluron", "link": "https://stackoverflow.com/users/5778900/pleluron"}, "edited": false, "score": 0, "creation_date": 1490198205, "post_id": 42956613, "comment_id": 73008056, "body": "How do you measure performance? For GPU performance you should use timer query objects."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1490201440, "post_id": 42956613, "comment_id": 73010395, "body": "Does it also happens if you render to the primary monitor?"}, {"owner": {"reputation": 51, "user_id": 7691648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feb85d153aff83eaa45ce185370a4ee2?s=128&d=identicon&r=PG&f=1", "display_name": "efpkop", "link": "https://stackoverflow.com/users/7691648/efpkop"}, "reply_to_user": {"reputation": 703, "user_id": 5778900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jh1qL.png?s=128&g=1", "display_name": "pleluron", "link": "https://stackoverflow.com/users/5778900/pleluron"}, "edited": false, "score": 0, "creation_date": 1490218723, "post_id": 42956613, "comment_id": 73020375, "body": "@pleluron, I&#39;m measuring performance using the StopWatchInterface class that is provided by NVidia as part of their Cuda SDK (described in the helper_timer.h header there).  I&#39;m assuming this will be accurate in describing GPU performance."}, {"owner": {"reputation": 51, "user_id": 7691648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feb85d153aff83eaa45ce185370a4ee2?s=128&d=identicon&r=PG&f=1", "display_name": "efpkop", "link": "https://stackoverflow.com/users/7691648/efpkop"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1490218822, "post_id": 42956613, "comment_id": 73020422, "body": "@Ripi2, yes - even when I render full screen to the main display, I&#39;m seeing the same performance issues."}, {"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1490257679, "post_id": 42956613, "comment_id": 73033851, "body": "Are the two displays driven by the same graphics card?"}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1490257971, "post_id": 42956613, "comment_id": 73034010, "body": "Try eliminating parameters : make sure there are no other processes running in parallel, load the source data in memory before rendering the video to avoid disk accesses, make sure your code doesn&#39;t rely on any other externals (like network). If that doesn&#39;t point you in a direction, run the code in a profiler to figure out where that extra time is spent."}], "owner": {"reputation": 51, "user_id": 7691648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feb85d153aff83eaa45ce185370a4ee2?s=128&d=identicon&r=PG&f=1", "display_name": "efpkop", "link": "https://stackoverflow.com/users/7691648/efpkop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 308, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1490197758, "creation_date": 1490197758, "question_id": 42956613, "link": "https://stackoverflow.com/questions/42956613/frame-rate-inconsistent-between-runs-of-opengl-software", "title": "Frame rate inconsistent between runs of OpenGL software", "body": "<p>I'm developing with: Windows 10 Pro 64-bit, Visual Studio 2015, OpenGL, GLFW</p>\n\n<p>I've written software that renders video to a secondary monitor in full-screen mode.  The first time I compile and run the code, it will render at frame rates just over approximately 200 FPS.  Sometimes I can stop and re-run the same executable (either from Windows explorer or directly from within Visual Studio) and the same frame rate is reported.  But then, inexplicably, I'll run it and the frame rate drops to about 60 FPS.  </p>\n\n<p>I know that this would seem to be a vsync issue.  But the secondary monitor I'm rendering to has a refresh rate of 120 Hz.  Furthermore, I set glfwSwapInterval(0) from the get-go which should make the software run independent of the vsync signal.  (I literally want to render at the fastest frame rate possible &lt;= but do this repeatably ... eventually, I plan to implement my own 'sleep' or 'wait' function to slow it down.  But, right now, I just need to get consistent frame performance).</p>\n\n<p>This seems to me to be operating system dependent.  So I downloaded System Explorer software and set the priority of this software to 'Real Time' but that does not seem to solve the problem.</p>\n\n<p>What could possibly be causing this frame slowdown from just under 5 ms per frame to over 16 ms?   What can I do to get my software to run unhindered by the operating system? </p>\n"}, {"tags": ["c++", "c", "json", "string"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7668048, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/36f00fab604a9dd514fa867f4c9f025e?s=128&d=identicon&r=PG&f=1", "display_name": "ari", "link": "https://stackoverflow.com/users/7668048/ari"}, "edited": false, "score": 0, "creation_date": 1490199152, "post_id": 42956807, "comment_id": 73008768, "body": "It doesn&#39;t produce the desired results.  json_object <i>jobj = json_object_new_object();                                                          json_object</i> root = json_object_new_object ();                                               json_object_object_add(jobj, &quot;author-details&quot;, root);   I added this before the code I provided earlier.  json_object *jobj = json_object_new_object(); json_object *jStr1 = json_object_new_string(&quot;Joys of Programming&quot;); json_object *jstr2 = json_object_new_int(10);  It prints  { &quot;author-details&quot;: { }, &quot;name&quot;: &quot;Joys of Programming&quot;, &quot;Number of Posts&quot;: 10 }"}], "tags": [], "owner": {"reputation": 2265, "user_id": 5379, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/582d1ca83c33f9792f5fa014097fc116?s=128&d=identicon&r=PG", "display_name": "Dominic Dos Santos", "link": "https://stackoverflow.com/users/5379/dominic-dos-santos"}, "is_accepted": false, "score": 0, "last_activity_date": 1490198188, "creation_date": 1490198188, "answer_id": 42956807, "question_id": 42956555, "link": "https://stackoverflow.com/questions/42956555/creating-json-string-using-json-lib/42956807#42956807", "title": "Creating json string using json lib", "body": "<p>Create a new JSON object and add the one you already created as a child.</p>\n\n<p>Just insert code like this after what you've already written:</p>\n\n<pre><code>json_object* root = json_object_new_object();\njson_object_object_add(root, \"author-details\", jobj); // This is the same \"jobj\" as original code snippet.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 7668048, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/36f00fab604a9dd514fa867f4c9f025e?s=128&d=identicon&r=PG&f=1", "display_name": "ari", "link": "https://stackoverflow.com/users/7668048/ari"}, "is_accepted": false, "score": 0, "last_activity_date": 1490199681, "creation_date": 1490199681, "answer_id": 42957380, "question_id": 42956555, "link": "https://stackoverflow.com/questions/42956555/creating-json-string-using-json-lib/42957380#42957380", "title": "Creating json string using json lib", "body": "<p>Based on the comment from Dominic, I was able to figure out the correct answer. </p>\n\n<pre><code>json_object *jobj = json_object_new_object();\njson_object* root = json_object_new_object();\njson_object_object_add(jobj, \"author-details\", root);\njson_object *jStr1 = json_object_new_string(\"Joys of Programming\");\njson_object *jstr2 = json_object_new_int(10);\njson_object_object_add(root,\"name\", jStr1 );\njson_object_object_add(root,\"Number of Posts\", jstr2 );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 713, "user_id": 4880288, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OycAQxKvySg/AAAAAAAAAAI/AAAAAAAAEQ0/nM_F7pKQCgQ/photo.jpg?sz=128", "display_name": "mgarey", "link": "https://stackoverflow.com/users/4880288/mgarey"}, "edited": false, "score": 1, "creation_date": 1490200846, "post_id": 42957715, "comment_id": 73009963, "body": "I second the motion to use nlohmann&#39;s library. I&#39;ve used it before without too much trouble and with success."}, {"owner": {"reputation": 21, "user_id": 7668048, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/36f00fab604a9dd514fa867f4c9f025e?s=128&d=identicon&r=PG&f=1", "display_name": "ari", "link": "https://stackoverflow.com/users/7668048/ari"}, "edited": false, "score": 0, "creation_date": 1490239683, "post_id": 42957715, "comment_id": 73027154, "body": "Thanks all for recommending nlohmann&#39;s JSON. I will try that out. To jump start,  If someone can throw snippet of how to parse json data/object like above using the nlohman&#39;s json library that would be great."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1490242869, "last_edit_date": 1490242869, "creation_date": 1490200659, "answer_id": 42957715, "question_id": 42956555, "link": "https://stackoverflow.com/questions/42956555/creating-json-string-using-json-lib/42957715#42957715", "title": "Creating json string using json lib", "body": "<p>To paraphrase an old advertisement, \"libjson users would rather fight than switch.\"</p>\n\n<p>At least I assume you must like fighting with the library. Using <a href=\"https://github.com/nlohmann/json\" rel=\"nofollow noreferrer\">nlohmann's JSON library</a>, you could use code like this:</p>\n\n<pre><code>nlohmann::json j {\n    { \"author-details\", {\n            { \"name\", \"Joys of Programming\" },\n            { \"Number of Posts\", 10 }\n        }\n    } \n};\n</code></pre>\n\n<p>At least to me, this seems somewhat simpler and more readable.</p>\n\n<p>Parsing is about equally straightforward. For example, let's assume we had a file named <code>somefile.json</code> that contained the JSON data shown above. To read and parse it, we could do something like this:</p>\n\n<pre><code>nlohmann::json j;\n\nstd::ifstream in(\"somefile.json\");\n\nin &gt;&gt; j;   // Read the file and parse it into a json object\n\n// Let's start by retrieving and printing the name.\nstd::cout &lt;&lt; j[\"author-details\"][\"name\"];\n</code></pre>\n\n<p>Or, let's assume we found a post, so we want to increment the count of posts. This is one place that things get...less tasteful--we can't increment the value as directly as we'd like; we have to obtain the value, add one, then assign the result (like we would in lesser languages that lack <code>++</code>):</p>\n\n<pre><code>j[\"author-details\"][\"Number of Posts\"] = j[\"author-details\"][\"Number of Posts\"] + 1;\n</code></pre>\n\n<p>Then we want to write out the result. If we want it \"dense\" (e.g., we're going to transmit it over a network for some other machine to read it) we can just use <code>&lt;&lt;</code>:</p>\n\n<pre><code>somestream &lt;&lt; j;\n</code></pre>\n\n<p>On the other hand, we might want to pretty-print it so a person can read it more easily. The library respects the width we set with <code>setw</code>, so to have it print out indented with 4-column tab stops, we can do:</p>\n\n<pre><code>somestream &lt;&lt; std::setw(4) &lt;&lt; j;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7668048, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/36f00fab604a9dd514fa867f4c9f025e?s=128&d=identicon&r=PG&f=1", "display_name": "ari", "link": "https://stackoverflow.com/users/7668048/ari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1197, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1490242869, "creation_date": 1490197620, "last_edit_date": 1490197651, "question_id": 42956555, "link": "https://stackoverflow.com/questions/42956555/creating-json-string-using-json-lib", "title": "Creating json string using json lib", "body": "<p>I am using <a href=\"https://linuxprograms.wordpress.com/2010/05/20/json-c-libjson-tutorial/\" rel=\"nofollow noreferrer\">jsonc-libjson</a> to create a json string like below.</p>\n\n<pre><code>{ \"author-details\": {\n        \"name\" : \"Joys of Programming\",\n        \"Number of Posts\" : 10\n    }\n}\n</code></pre>\n\n<p>My code looks like below</p>\n\n<pre><code>json_object *jobj = json_object_new_object();\njson_object *jStr1 = json_object_new_string(\"Joys of Programming\");\njson_object *jstr2 = json_object_new_int(\"10\");\njson_object_object_add(jobj,\"name\", jStr1 );\njson_object_object_add(jobj,\"Number of Posts\", jstr2 );\n</code></pre>\n\n<p>this gives me json string </p>\n\n<pre><code>{\n \"name\" : \"Joys of Programming\",\n    \"Number of Posts\" : 10\n}\n</code></pre>\n\n<p>How do I add the top part associated with author details? </p>\n"}, {"tags": ["c++", "exception", "testing", "automated-tests", "googletest"], "answers": [{"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 3, "last_activity_date": 1490198802, "creation_date": 1490198802, "answer_id": 42957041, "question_id": 42956538, "link": "https://stackoverflow.com/questions/42956538/can-i-know-which-exception-was-thrown-inside-a-gtest-expect-no-throw-or-assert/42957041#42957041", "title": "Can I know which exception was thrown inside a gtest EXPECT_NO_THROW (or ASSERT_NO_THROW)?", "body": "<p>Here's one way:</p>\n\n<pre><code>#include &lt;exception&gt;\n#include &lt;stdexcept&gt;\n#include &lt;ostream&gt;\n#include &lt;iostream&gt; // for the test\n#include &lt;gtest/gtest.h&gt;\nnamespace detail {\n\n    struct unwrapper\n    {\n        unwrapper(std::exception_ptr pe) : pe_(pe) {}\n\n        operator bool() const {\n            return bool(pe_);\n        }\n\n        friend auto operator&lt;&lt;(std::ostream&amp; os, unwrapper const&amp; u) -&gt; std::ostream&amp;\n        {\n            try {\n                std::rethrow_exception(u.pe_);\n                return os &lt;&lt; \"no exception\";\n            }\n            catch(std::runtime_error const&amp; e)\n            {\n                return os &lt;&lt; \"runtime_error: \" &lt;&lt; e.what();\n            }\n            catch(std::logic_error const&amp; e)\n            {\n                return os &lt;&lt; \"logic_error: \" &lt;&lt; e.what();\n            }\n            catch(std::exception const&amp; e)\n            {\n                return os &lt;&lt; \"exception: \" &lt;&lt; e.what();\n            }\n            catch(...)\n            {\n                return os &lt;&lt; \"non-standard exception\";\n            }\n\n        }\n        std::exception_ptr pe_;\n    };\n\n}\n\nauto unwrap(std::exception_ptr pe)\n{\n    return detail::unwrapper(pe);\n}\n\n\ntemplate&lt;class F&gt;\n::testing::AssertionResult does_not_throw(F&amp;&amp; f)\n         {\n             try {\n                 f();\n                 return ::testing::AssertionSuccess();\n             }\n             catch(...) {\n                 return ::testing::AssertionFailure() &lt;&lt; unwrap(std::current_exception());\n             }\n         };\n\n\nTEST(a, b)\n{\n    ASSERT_TRUE(does_not_throw([] { throw std::runtime_error(\"i threw\"); }));\n}\n</code></pre>\n\n<p>example output:</p>\n\n<pre><code>Running main() from gtest_main.cc\n[==========] Running 1 test from 1 test case.\n[----------] Global test environment set-up.\n[----------] 1 test from a\n[ RUN      ] a.b\n/Users/rhodges/play/project/nod.cpp:66: Failure\nValue of: does_not_throw([] { throw std::runtime_error(\"i threw\"); })\n  Actual: false (runtime_error: i threw)\nExpected: true\n[  FAILED  ] a.b (1 ms)\n[----------] 1 test from a (1 ms total)\n\n[----------] Global test environment tear-down\n[==========] 1 test from 1 test case ran. (1 ms total)\n[  PASSED  ] 0 tests.\n[  FAILED  ] 1 test, listed below:\n[  FAILED  ] a.b\n\n 1 FAILED TEST\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95, "user_id": 6193097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c16e5c7a7d1d9bb6a5a641e42896e88f?s=128&d=identicon&r=PG&f=1", "display_name": "San Mosy", "link": "https://stackoverflow.com/users/6193097/san-mosy"}, "edited": false, "score": 0, "creation_date": 1490371072, "post_id": 42996454, "comment_id": 73097312, "body": "I agree. This can also easily defined in an helper function or, even simplier, a macro in order to keep the one-line structure"}], "tags": [], "owner": {"reputation": 1622, "user_id": 7343388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0dc7456b14b1a70bd862e8495d36a6?s=128&d=identicon&r=PG", "display_name": "Soeren", "link": "https://stackoverflow.com/users/7343388/soeren"}, "is_accepted": false, "score": 2, "last_activity_date": 1490351747, "last_edit_date": 1490351747, "creation_date": 1490349700, "answer_id": 42996454, "question_id": 42956538, "link": "https://stackoverflow.com/questions/42956538/can-i-know-which-exception-was-thrown-inside-a-gtest-expect-no-throw-or-assert/42996454#42996454", "title": "Can I know which exception was thrown inside a gtest EXPECT_NO_THROW (or ASSERT_NO_THROW)?", "body": "<p>An alternative to the answer by Richard Hodges, is to use a <strong>try-catch structure</strong> inside the test-body. This solution comes from the very good book <a href=\"https://pragprog.com/book/lotdd/modern-c-programming-with-test-driven-development\" rel=\"nofollow noreferrer\">Modern C++ Programming with Test-Driven Development</a> written by Jeff Langr. </p>\n\n<p>A complete working example could look like the following:</p>\n\n<pre><code>#include &lt;stdexcept&gt;\n#include \"gtest/gtest.h\"\n\nstruct foo\n{\n  void bar() {\n    throw std::runtime_error(\"unexpected error\");\n  }\n};\n\nTEST(foo_test, does_not_throw)\n{\n  foo f;\n  try {\n    f.bar();\n    SUCCEED();\n  }\n  catch (std::exception const &amp; err) {\n    FAIL() &lt;&lt; err.what();\n  }\n}\n\nint main(int argc, char **argv) {\n::testing::InitGoogleTest(&amp;argc, argv);\n  return RUN_ALL_TESTS();\n}\n</code></pre>\n\n<p>And the ouput:</p>\n\n<pre><code>[==========] Running 1 test from 1 test case.\n[----------] Global test environment set-up.\n[----------] 1 test from foo_test\n[ RUN      ] foo_test.does_not_throw\n    /Users/Soeren/Documents/cmakeProject/src/applications/modelTest/main.cpp(26): error: Failed\nunexpected error messages\n[  FAILED  ] foo_test.does_not_throw (1 ms)\n[----------] 1 test from foo_test (1 ms total)\n\n[----------] Global test environment tear-down\n[==========] 1 test from 1 test case ran. (3 ms total)\n[  PASSED  ] 0 tests.\n[  FAILED  ] 1 test, listed below:\n[  FAILED  ] foo_test.does_not_throw\n\n 1 FAILED TEST\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 10872971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KyzoD.png?s=128&g=1", "display_name": "Mustafa Kemal GILOR", "link": "https://stackoverflow.com/users/10872971/mustafa-kemal-gilor"}, "is_accepted": false, "score": 0, "last_activity_date": 1590919250, "creation_date": 1590919250, "answer_id": 62114492, "question_id": 42956538, "link": "https://stackoverflow.com/questions/42956538/can-i-know-which-exception-was-thrown-inside-a-gtest-expect-no-throw-or-assert/62114492#62114492", "title": "Can I know which exception was thrown inside a gtest EXPECT_NO_THROW (or ASSERT_NO_THROW)?", "body": "<p>I am a little bit late to the party, but here's one approach which works:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>/**\n * @brief Wrap a code block with try-catch, handle exceptions thrown, print them\n * into EXCEPT_STREAM and rethrow.\n */\n#define PRINT_AND_RETHROW(CODE_BLOCK, EXCEPT_STREAM) try{do{ CODE_BLOCK }while(0);}catch(const std::exception&amp; ex){ EXCEPT_STREAM &lt;&lt; \"std::exception thrown: \" &lt;&lt; ex.what() &lt;&lt; std::endl; throw;  }catch(...){ EXCEPT_STREAM &lt;&lt; \"unknown structure thrown\" &lt;&lt; std::endl; throw;}\n\n\n/**\n * @brief Wrap a code block with try-catch, handle exceptions thrown, print them\n * into std::cerr and rethrow.\n */\n#define PRINT_STDERR_AND_RETHROW(CODE_BLOCK) PRINT_AND_RETHROW(CODE_BLOCK, std::cerr)\n\n#define EXPECT_NO_THROW_PRINT(CODE_BLOCK) EXPECT_NO_THROW(SPECTRE_PRINT_STDERR_AND_RETHROW(CODE_BLOCK))\n\n#define ASSERT_NO_THROW_PRINT(CODE_BLOCK) ASSERT_NO_THROW(SPECTRE_PRINT_STDERR_AND_RETHROW(CODE_BLOCK))\n\n</code></pre>\n\n<p>Later in code, replace <code>*_NO_THROW</code>'s with <code>*_NO_THROW_PRINT</code> and voila.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>\nvoid f(){\n    throw std::runtime_error{\"this should be printed\"};\n}\n\nTEST(test, test){\n    EXPECT_NO_THROW_PRINT( f(); );\n}\n\n</code></pre>\n\n<p>Expected output of test case above:</p>\n\n<pre><code>Running main() from /build/googletest-qXr8Ln/googletest-1.10.0/googletest/src/gtest_main.cc\nNote: Randomizing tests' orders with a seed of 60645 .\n[==========] Running 2 tests from 2 test suites.\n[----------] Global test environment set-up.\n[----------] 1 test from test\n[ RUN      ] test.test\nstd::exception thrown: this should be printed\n/workspace/libasync/test/ut_executor_factory.cpp:56: Failure\nExpected: try{do{ f(); }while(0);}catch(const std::exception&amp; ex){ std::cerr &lt;&lt; \"std::exception thrown: \" &lt;&lt; ex.what() &lt;&lt; std::endl; throw; }catch(...){ std::cerr &lt;&lt; \"unknown structure thrown\" &lt;&lt; std::endl; throw;} doesn't throw an exception.\n  Actual: it throws.\n[  FAILED  ] test.test (0 ms)\n[----------] 1 test from test (0 ms total)\n\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 6193097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c16e5c7a7d1d9bb6a5a641e42896e88f?s=128&d=identicon&r=PG&f=1", "display_name": "San Mosy", "link": "https://stackoverflow.com/users/6193097/san-mosy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3831, "favorite_count": 1, "accepted_answer_id": 42957041, "answer_count": 3, "score": 3, "last_activity_date": 1590919250, "creation_date": 1490197580, "last_edit_date": 1490857092, "question_id": 42956538, "link": "https://stackoverflow.com/questions/42956538/can-i-know-which-exception-was-thrown-inside-a-gtest-expect-no-throw-or-assert", "title": "Can I know which exception was thrown inside a gtest EXPECT_NO_THROW (or ASSERT_NO_THROW)?", "body": "<p>To test my C++ project I am using GoogleTest framework.\nNormally I can use the following syntax to easily debug a failure:</p>\n\n<pre><code>EXPECT_TRUE(*statement*) &lt;&lt; *debugMessage*;\n</code></pre>\n\n<p>When I use the macro EXPECT_NO_THROW (or ASSERT_NO_THROW) I might of course do the same, but I do not have access to the exception object that was thrown (and caught) inside the macro itself and so the <em>debugMessage</em> cannot tell me anything about it.</p>\n\n<p>Is it possible to show information about this exception in any way?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Is not possible without any custom function/macro.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 7, "creation_date": 1490196861, "post_id": 42956229, "comment_id": 73007043, "body": "Sounds like you could use a <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>"}, {"owner": {"reputation": 11, "user_id": 6443962, "user_type": "registered", "profile_image": "https://graph.facebook.com/618130728343113/picture?type=large", "display_name": "Shuvam Pargal", "link": "https://stackoverflow.com/users/6443962/shuvam-pargal"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1490196943, "post_id": 42956229, "comment_id": 73007104, "body": "seeking for help not for suggestions"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1490197064, "post_id": 42956229, "comment_id": 73007192, "body": "Well one declaration have an <code>&amp;</code> in it, the other does not. That makes a <i>very</i> big difference, one that any beginners book would tell you about."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 1, "creation_date": 1490197104, "post_id": 42956229, "comment_id": 73007223, "body": "Have you done any research on this? What has it told you and where are you stuck with its results?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1490197123, "post_id": 42956229, "comment_id": 73007239, "body": "Start your research here: <a href=\"http://stackoverflow.com/questions/6877052/use-of-the-operator-in-c-function-signatures\" title=\"use of the operator in c function signatures\">stackoverflow.com/questions/6877052/&hellip;</a>"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1490197698, "post_id": 42956229, "comment_id": 73007689, "body": "<i>seeking for help not for suggestions</i>. Really?"}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1490200809, "post_id": 42956229, "comment_id": 73009936, "body": "You shouldn&#39;t be writing C++ until you understand the difference between the two, and the way to learn the difference is from <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">a good C++ book</a>."}], "answers": [{"comments": [{"owner": {"reputation": 885, "user_id": 1758897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hMoc1.png?s=128&g=1", "display_name": "basslo", "link": "https://stackoverflow.com/users/1758897/basslo"}, "edited": false, "score": 1, "creation_date": 1490197741, "post_id": 42956320, "comment_id": 73007720, "body": "the first form is not necessarily more expensive all depends of the size of class1 if it is bigger than a reference so what you are saying is true otherwise it is not."}, {"owner": {"reputation": 7763, "user_id": 5924721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LWjjj.png?s=128&g=1", "display_name": "Frank Puffer", "link": "https://stackoverflow.com/users/5924721/frank-puffer"}, "reply_to_user": {"reputation": 885, "user_id": 1758897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hMoc1.png?s=128&g=1", "display_name": "basslo", "link": "https://stackoverflow.com/users/1758897/basslo"}, "edited": false, "score": 0, "creation_date": 1490198144, "post_id": 42956320, "comment_id": 73008018, "body": "@basslo: That&#39;s correct and that&#39;s why I wrote &quot;can be expensive&quot;. However in my experience it is unlikely that copying a class is less expensive (from memory consumption and computation point of view) than copying a reference. It does not only depend on the size of the class but mainly on what the copy constructor does."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1490198257, "post_id": 42956320, "comment_id": 73008095, "body": "Generally if <code>sizeof(type) &lt;= sizeof(void*)</code> then passing by reference or value doesn&#39;t matter."}, {"owner": {"reputation": 7763, "user_id": 5924721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LWjjj.png?s=128&g=1", "display_name": "Frank Puffer", "link": "https://stackoverflow.com/users/5924721/frank-puffer"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1490198570, "post_id": 42956320, "comment_id": 73008331, "body": "@NathanOliver: What if the copy constructor does some complicated stuff? (I am not saying that a copy constructor <i>should</i> do this.)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1490199987, "post_id": 42956320, "comment_id": 73009361, "body": "@FrankPuffer There are certainly exceptions.  Almost anything that stores a pointer should be passed by reference."}], "tags": [], "owner": {"reputation": 7763, "user_id": 5924721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LWjjj.png?s=128&g=1", "display_name": "Frank Puffer", "link": "https://stackoverflow.com/users/5924721/frank-puffer"}, "is_accepted": true, "score": 3, "last_activity_date": 1490198755, "last_edit_date": 1490198755, "creation_date": 1490197108, "answer_id": 42956320, "question_id": 42956229, "link": "https://stackoverflow.com/questions/42956229/passing-constant-class-as-argument-in-function/42956320#42956320", "title": "Passing Constant Class as argument in function", "body": "<p>The main difference is that </p>\n\n<pre><code>A(const class1 a);\n</code></pre>\n\n<p>will create a local copy of <code>a</code> inside <code>A</code> which can be expensive (from both memory and computational point of view) while</p>\n\n<pre><code>A(const class1 &amp;a);\n</code></pre>\n\n<p>will not create a copy.</p>\n\n<p>Therefore passing the reference (2nd version) is usually the preferred way.</p>\n"}], "owner": {"reputation": 11, "user_id": 6443962, "user_type": "registered", "profile_image": "https://graph.facebook.com/618130728343113/picture?type=large", "display_name": "Shuvam Pargal", "link": "https://stackoverflow.com/users/6443962/shuvam-pargal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 42956320, "answer_count": 1, "score": -1, "last_activity_date": 1490198755, "creation_date": 1490196839, "last_edit_date": 1490197122, "question_id": 42956229, "link": "https://stackoverflow.com/questions/42956229/passing-constant-class-as-argument-in-function", "title": "Passing Constant Class as argument in function", "body": "<p>what is the difference between </p>\n\n<pre><code>void A(const class1 a);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>void A(const class1 &amp;a);\n</code></pre>\n\n<p>in C++.</p>\n\n<p>I am not able to differentiate these two.</p>\n"}, {"tags": ["c++", "arduino", "char", "invalid-characters", "uint"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1490196249, "post_id": 42955918, "comment_id": 73006524, "body": "How is <code>setDateTime</code> defined?"}, {"owner": {"reputation": 839, "user_id": 4375582, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/b7020e98061f16befbcf28016c03ba67?s=128&d=identicon&r=PG&f=1", "display_name": "sdd", "link": "https://stackoverflow.com/users/4375582/sdd"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1490196347, "post_id": 42955918, "comment_id": 73006610, "body": "@NathanOliver See edit"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1490196417, "post_id": 42955918, "comment_id": 73006665, "body": "Okay.  So you need to split the string into parameters that match how <code>setDateTime</code> is defined."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 4, "creation_date": 1490196513, "post_id": 42955918, "comment_id": 73006744, "body": "You&#39;re feeding a string (<code>char *</code>) to a function that expects integer parameters... that&#39;s an invalid conversion (as the compiler is telling you). What do you expect?"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 3, "creation_date": 1490196865, "post_id": 42955918, "comment_id": 73007047, "body": "Also, I guess there are multiple declarations for <code>setDateTime()</code>, as 1) the one you&#39;re showing us shouldn&#39;t work with <code>(__DATE__, __TIME__)</code> either, and 2) the one you&#39;re showing us is not expecting <code>uint32_t</code> which is what the compiler complains about."}, {"owner": {"reputation": 5508, "user_id": 794749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pfE2l.jpg?s=128&g=1", "display_name": "gre_gor", "link": "https://stackoverflow.com/users/794749/gre-gor"}, "edited": false, "score": 1, "creation_date": 1490197229, "post_id": 42955918, "comment_id": 73007336, "body": "Why screw around with strings if you could just call <code>clock.setDateTime(2017,3,22,16,20,4)</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 3075, "user_id": 1790154, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/64e5ca55fc4105591eb9c1cf24a5d878?s=128&d=identicon&r=PG", "display_name": "zhm", "link": "https://stackoverflow.com/users/1790154/zhm"}, "is_accepted": true, "score": 1, "last_activity_date": 1490197441, "creation_date": 1490197441, "answer_id": 42956456, "question_id": 42955918, "link": "https://stackoverflow.com/questions/42955918/error-invalid-conversion-from-char-to-uint32-t/42956456#42956456", "title": "error: invalid conversion from &#39;char*&#39; to &#39;uint32_t", "body": "<p><code>setDateTime()</code> accepts <code>int</code>s as parameters, yet you give it <code>char</code> array.</p>\n\n<p>The call should be:</p>\n\n<pre><code>clock.setDataTime(2017, 3, 22, 16, 20, 4);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 2, "last_activity_date": 1490197678, "last_edit_date": 1592644375, "creation_date": 1490197678, "answer_id": 42956578, "question_id": 42955918, "link": "https://stackoverflow.com/questions/42955918/error-invalid-conversion-from-char-to-uint32-t/42956578#42956578", "title": "error: invalid conversion from &#39;char*&#39; to &#39;uint32_t", "body": "<p><code>setDateTime()</code> takes the date as a succession of integers:</p>\n<pre><code>setDateTime(year, month, day, hours, minutes, seconds);\n</code></pre>\n<hr />\n<p>Bonus: according to <code>man strcat</code>:</p>\n<blockquote>\n<pre><code>char *strcat(char *dest, const char *src);\n</code></pre>\n<h3>Description</h3>\n<p>The <code>strcat()</code> function appends the <em>src</em> string to the <em>dest</em> string, ...</p>\n</blockquote>\n<p>Since you use it this way:</p>\n<pre><code>char dateTime[20];\nstrcat(dateTime, &quot;2017,03,22,16,20,04&quot;);\n</code></pre>\n<p>you append <code>&quot;2017,03,22,16,20,04&quot;</code> to unitialized memory, which is <em>undefined behaviour</em>.</p>\n"}], "owner": {"reputation": 839, "user_id": 4375582, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/b7020e98061f16befbcf28016c03ba67?s=128&d=identicon&r=PG&f=1", "display_name": "sdd", "link": "https://stackoverflow.com/users/4375582/sdd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1376, "favorite_count": 0, "accepted_answer_id": 42956456, "answer_count": 2, "score": -7, "last_activity_date": 1490197678, "creation_date": 1490196161, "last_edit_date": 1490196336, "question_id": 42955918, "link": "https://stackoverflow.com/questions/42955918/error-invalid-conversion-from-char-to-uint32-t", "title": "error: invalid conversion from &#39;char*&#39; to &#39;uint32_t", "body": "<p>I am trying to manually set up a RTC clock.\nWhen doen automatically, this is the working code:</p>\n\n<pre><code>clock.setDateTime((__DATE__, __TIME__));\n</code></pre>\n\n<p>But now I want to set it manually and this is what I am trying:</p>\n\n<pre><code>char dateTime[20];\nstrcat(dateTime, \"2017,03,22,16,20,04\");\n//clock.setDateTime((__DATE__, __TIME__));\nclock.setDateTime(dateTime);\n</code></pre>\n\n<p>I get the following error(at the last line):</p>\n\n<pre><code>error: invalid conversion from 'char*' to 'uint32_t {aka long unsigned int}' [-fpermissive]\n</code></pre>\n\n<p>How to solve?</p>\n\n<p>EDIT:\nThis is how setDateTime is defined:</p>\n\n<pre><code>void setDateTime(uint16_t year, uint8_t month, uint8_t day, uint8_t hour, uint8_t minute, uint8_t second);\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1059, "user_id": 1835778, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/292c204ccfb0a75696ffa77137283cba?s=128&d=identicon&r=PG", "display_name": "Abstraction", "link": "https://stackoverflow.com/users/1835778/abstraction"}, "edited": false, "score": 0, "creation_date": 1490195894, "post_id": 42955754, "comment_id": 73006222, "body": "Did you place template function implementation in .cpp-file?"}, {"owner": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "edited": false, "score": 0, "creation_date": 1490197155, "post_id": 42955754, "comment_id": 73007264, "body": "you declared a friend <code>template&lt;typename F&gt;         friend Matrix&lt;T&gt; scalar_operation(const Matrix&lt;T&gt; &amp;a, const T b, F f);</code> but there is no such function, you have only <code>template&lt;typename T, typename F&gt;         Matrix&lt;T&gt; scalar_operation(const Matrix&lt;T&gt; &amp;a, const T b, F f);</code>"}, {"owner": {"reputation": 3, "user_id": 7752032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9356549c129c61c75edf19d1a8aa81e?s=128&d=identicon&r=PG&f=1", "display_name": "jlesniak", "link": "https://stackoverflow.com/users/7752032/jlesniak"}, "reply_to_user": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "edited": false, "score": 0, "creation_date": 1490201947, "post_id": 42955754, "comment_id": 73010737, "body": "@em2er so does the line <code>template&lt;class T&gt;</code> before the Matrix class body not work? Because with the overloaded operator functions, I don&#39;t declare them with a <code>template&lt;typename T&gt;</code> inside the body of the Matrix class, but they still work"}, {"owner": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "edited": false, "score": 1, "creation_date": 1490202988, "post_id": 42955754, "comment_id": 73011400, "body": "<code>template&lt;F&gt; friend scalar_operation</code> declares friend function with one template parameter, the code you provided contains no such functions, but it has <code>template&lt;T, F&gt; scalar_operation</code>, that does not  fit to your friend declaration. friend operator+&lt;&gt; fits to template&lt;T&gt; operator+ so there is no problem. Declare <code>template&lt;typename T, typename F&gt;         friend Matrix&lt;T&gt; scalar_operation(const Matrix&lt;T&gt; &amp;a, const T b, F f);</code> i think it is the solution."}, {"owner": {"reputation": 3, "user_id": 7752032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9356549c129c61c75edf19d1a8aa81e?s=128&d=identicon&r=PG&f=1", "display_name": "jlesniak", "link": "https://stackoverflow.com/users/7752032/jlesniak"}, "reply_to_user": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "edited": false, "score": 0, "creation_date": 1490203389, "post_id": 42955754, "comment_id": 73011656, "body": "@em2er Thanks! Your method worked, I just had to use a variable other than &#39;T&#39; so the compiler wouldn&#39;t confuse it with <code>template&lt;class T&gt;</code> outside of the Matrix class body"}, {"owner": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1490203958, "post_id": 42955754, "comment_id": 73012014, "body": "@Someprogrammerdude the question is not a duplicate, read comments above. Please remove duplication flag"}, {"owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "edited": false, "score": 0, "creation_date": 1490205623, "post_id": 42955754, "comment_id": 73013060, "body": "The duplicates may initially seem obscure, but they sole the issue. You have effectively told the compiler there is a function suitable for compilation (declaration) and linkage, the compilation succeeds, but the function doesn&#39;t exist (there is no definition; declaration and definition are not the same thing) - thus the linker fails. Template parameters matter in cases such as these, so does the functions definition."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "edited": false, "score": 0, "creation_date": 1490259637, "post_id": 42955754, "comment_id": 73035007, "body": "@em2er this has a slight downside of declaring every instantiation of scalar_operation a friend, instead of just those that take a <code>Matrix&lt;T&gt;</code>."}, {"owner": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1490260077, "post_id": 42955754, "comment_id": 73035345, "body": "@n.m. Do you mean that <code>scal_op&lt;double,..&gt;</code> will get private access for <code>Matrix&lt;float&gt;</code>?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "edited": false, "score": 0, "creation_date": 1490261546, "post_id": 42955754, "comment_id": 73036417, "body": "@em2er yes exactly"}, {"owner": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1490262375, "post_id": 42955754, "comment_id": 73037015, "body": "@n.m. if you have a good solution to avoid this, it will be very nice if you post it as answer. I have no idea how to resolve this without code redesign."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "edited": false, "score": 0, "creation_date": 1490264096, "post_id": 42955754, "comment_id": 73038283, "body": "@em2er I don&#39;t, wonder if there is one."}], "answers": [{"tags": [], "owner": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "is_accepted": true, "score": 0, "last_activity_date": 1490272769, "last_edit_date": 1490272769, "creation_date": 1490258275, "answer_id": 42970894, "question_id": 42955754, "link": "https://stackoverflow.com/questions/42955754/templated-function-not-found-during-compilation/42970894#42970894", "title": "templated function not found during compilation", "body": "<p>The code has the following problem: class <code>Matrix</code> declares the friend function <code>friend template&lt;typename F&gt; scalar_operation(...)</code> (yes, friend keyword not only states the private access, it also declares a function), but there is no such function in outer scope. There is only the <code>template&lt;typename T, typename F&gt; scalar_operation</code>, that does not satisfy friend Matrix's declaration. Why? Let's try to pseudocode instantiations that can be made with <code>float</code> and <code>std::plus&lt;float&gt;</code> (return values and arguments omitted for shortness):<br>\n<code>friend scalar_operation&lt;std::plus&lt;float&gt;&gt;(...)</code><br>\nand<br>\n       <code>scalar_operation&lt;float, std::plus&lt;float&gt;&gt;(...)</code>.<br>\nAs we can see they are different. So during compilation we have no problem: we have proper friend scalar_operation declaration that satisfies calling convention inside <code>operator+</code>. But no definitions of such declaration can be made, and we get a problem while linking. The solution is a proper friend declaration:<br>\n<code>template&lt;typename TT, typename F&gt;\nfriend Matrix&lt;TT&gt; scalar_operation(const Matrix&lt;TT&gt; &amp;, const TT, F);</code></p>\n"}], "owner": {"reputation": 3, "user_id": 7752032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9356549c129c61c75edf19d1a8aa81e?s=128&d=identicon&r=PG&f=1", "display_name": "jlesniak", "link": "https://stackoverflow.com/users/7752032/jlesniak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 42970894, "answer_count": 1, "score": 0, "last_activity_date": 1490272769, "creation_date": 1490195801, "last_edit_date": 1490201973, "question_id": 42955754, "link": "https://stackoverflow.com/questions/42955754/templated-function-not-found-during-compilation", "title": "templated function not found during compilation", "body": "<p>I have a matrix class that supports operations with scalar values that I implemented using operator overloading. Since each overloaded operator function has the same body except for the operator being used, I decided to create a generic function that would accept a function along with the matrix and a scalar value to consolidate my code.</p>\n\n<p>Here is the generic function and it being called from the overloaded addition operator function:</p>\n\n<pre><code>    // Generic function to take care of matrix operations\n    template&lt;typename T, typename F&gt;\n    Matrix&lt;T&gt; scalar_operation(const Matrix&lt;T&gt; &amp;a, const T b, F f) {\n        std::vector&lt;std::vector&lt;T&gt; &gt; new_els = a.elements;\n        typename std::vector&lt;std::vector&lt;T&gt; &gt;::iterator it = new_els.begin();\n        typename std::vector&lt;T&gt;::iterator it_in;\n\n        for (; it != new_els.end(); ++it) {\n            it_in = it-&gt;begin();\n            for (; it_in != it-&gt;end(); ++it_in) {\n                *it_in = f(*it_in, b);\n            }\n        }\n        return Matrix&lt;T&gt;(new_els);\n    }\n\n    // Add scalar to all values in Matrix\n    template&lt;typename T&gt;\n    Matrix&lt;T&gt; operator+(const Matrix&lt;T&gt; &amp;a, const T b) {\n        return scalar_operation(a, b, std::plus&lt;T&gt;()); \n    }\n</code></pre>\n\n<p>And here are the functions declared in the matrix class:</p>\n\n<pre><code>    template&lt;class T&gt;\n    class Matrix {\n        template&lt;typename F&gt;\n        friend Matrix&lt;T&gt; scalar_operation(const Matrix&lt;T&gt; &amp;a, const T b, F f);\n\n        friend Matrix&lt;T&gt; operator+&lt;&gt;(const Matrix&lt;T&gt; &amp;a, const T b);\n        friend Matrix&lt;T&gt; operator-&lt;&gt;(const Matrix&lt;T&gt; &amp;a, const T b);\n        friend Matrix&lt;T&gt; operator*&lt;&gt;(const Matrix&lt;T&gt; &amp;a, const T b);\n        friend Matrix&lt;T&gt; operator/&lt;&gt;(const Matrix&lt;T&gt; &amp;a, const T b);\n</code></pre>\n\n<p>When I implemented the overloaded operator functions separately, they worked, but with this implementation, I get the following compiler error:</p>\n\n<pre><code>    Undefined symbols for architecture x86_64:\n    \"Matrix&lt;float&gt; scalar_operation&lt;std::__1::plus&lt;float&gt; &gt;(Matrix&lt;float&gt; const&amp;, float, std::__1::plus&lt;float&gt;)\", referenced from:\n        Matrix&lt;float&gt; operator+&lt;float&gt;(Matrix&lt;float&gt; const&amp;, float) in matrix_test-3188cd.o\n    ld: symbol(s) not found for architecture x86_64\n</code></pre>\n\n<p>I imagine my error is related to the <code>Matrix&lt;float&gt; scalar_operation&lt;std::__1::plus&lt;float&gt; &gt;(</code> line because it looks like the linker is searching for a function with this header, which is slightly different from how it's declared in my file, but I've tried modifying my declaration and it throws additional errors. </p>\n\n<p>Why am I getting this error and how can I fix it? Thanks!</p>\n\n<p>EDIT: To clear up some confusion, all the code has been implemented in the header file since it is a templated class. There is no corresponding .cpp file.</p>\n"}, {"tags": ["c++", "arrays", "validation"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 3, "creation_date": 1490195580, "post_id": 42955666, "comment_id": 73005992, "body": "How is <i>what</i> possible?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1490195674, "post_id": 42955666, "comment_id": 73006065, "body": "You have a function that reads some input and &quot;validates&quot; it, what is the problem with it?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1490195761, "post_id": 42955666, "comment_id": 73006127, "body": "With C++, you could build something that enables you to write <code>cin &gt;&gt; Foo(arr[i], -50, 50)</code>. Google &quot;overloading istream &gt;&gt;&quot;. Alas, the boring simple way is probably more practical."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1490196691, "post_id": 42955666, "comment_id": 73006895, "body": "Prefer to use <code>std::vector</code>.  Arrays have the possibility of buffer overflow, and are difficult to pass to functions (compared to vectors)."}], "answers": [{"comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1490195785, "post_id": 42955727, "comment_id": 73006154, "body": "You might want to add the <code>cin &gt;&gt; temp</code> as part of the condition in the <code>if</code> statement."}, {"owner": {"reputation": 3277, "user_id": 5490549, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/hwaF6.png?s=128&g=1", "display_name": "IntoTheDeep", "link": "https://stackoverflow.com/users/5490549/intothedeep"}, "edited": false, "score": 0, "creation_date": 1490196071, "post_id": 42955727, "comment_id": 73006364, "body": "No no, I have validation method, which I want to combine in main"}, {"owner": {"reputation": 3277, "user_id": 5490549, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/hwaF6.png?s=128&g=1", "display_name": "IntoTheDeep", "link": "https://stackoverflow.com/users/5490549/intothedeep"}, "edited": false, "score": 0, "creation_date": 1490196491, "post_id": 42955727, "comment_id": 73006725, "body": "In your answer if input is not valid, it will not prompt again. In my method it prompts till valid"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1490196660, "post_id": 42955727, "comment_id": 73006867, "body": "You most likely want <code>cin.good() &amp;&amp; validateInput(temp)</code>, i.e. <code>&amp;&amp;</code> instead of logical bit-and <code>&amp;</code>. For <code>bool</code> the only difference will be in that <code>&amp;&amp;</code> does short-cicuit evaluation, but for non-bools, <code>&amp;</code> is very different from <code>&amp;&amp;</code>."}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1490198471, "post_id": 42955727, "comment_id": 73008256, "body": "@vsoftco: that was a typo :)"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1490199257, "post_id": 42955727, "comment_id": 73008847, "body": "@VittorioRomeo Yes I knew :) I wrote the rest of the comment more for completeness."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": false, "score": 2, "last_activity_date": 1490198465, "last_edit_date": 1490198465, "creation_date": 1490195735, "answer_id": 42955727, "question_id": 42955666, "link": "https://stackoverflow.com/questions/42955666/c-validate-input-value-before-add-it-to-array/42955727#42955727", "title": "c++ validate input value before add it to array", "body": "<p>Your <code>validateInput</code> should just deal with validation: it should answer <strong>\"is <code>x</code> valid or not valid?\"</strong></p>\n\n<pre><code>bool validateInput(int x)\n{\n    return val &gt;= -50 &amp;&amp; val &lt;= 50;\n}\n</code></pre>\n\n<p>When reading from <em>stdin</em>, use <code>validateInput</code> and branch accordingly:</p>\n\n<pre><code>for(int i = 0; i &lt; 5; i++)\n{\n    int temp;\n    cin &gt;&gt; temp;\n\n    if(cin.good() &amp;&amp; validateInput(temp))\n    {\n        arr[i] = temp;\n    }\n    else\n    {\n        cout &lt;&lt; \"Invalid input! number must be between -50 and 50\" &lt;&lt; endl;\n        // handle invalid input\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>If you want to further abstract the idea of \"only reading valid numbers from <code>std::cin</code>\", you can use an <em>higher-order function</em>:</p>\n\n<pre><code>template &lt;typename TFValid, typename TFInvalid, typename TFInvalidIO&gt;\ndecltype(auto) processInput(TFValid&amp;&amp; f_valid, TFInvalid&amp;&amp; f_invalid, TFInvalidIO&amp;&amp; f_invalid_io)\n{\n     int temp;\n     cin &gt;&gt; temp;\n\n     if(!cin.good()) \n     {\n         // Invalid IO.\n         return std::forward&lt;TFInvalidIO&gt;(f_invalid_io)();\n     }\n\n     if(validateInput(temp))\n     {\n         // Valid IO and datum.\n         return std::forward&lt;TFValid&gt;(f_valid)(temp);\n     }\n\n     // Valid IO, but invalid datum.\n     return std::forward&lt;TFInvalid&gt;(f_invalid)(temp);\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>for(int i = 0; i &lt; 5; i++)\n{\n    processInput([&amp;](int x){ arr[i] = x; },\n                 [](int x){ cout &lt;&lt; x &lt;&lt; \" is invalid\"; },\n                 []{ cout &lt;&lt; \"Error reading from cin\"; });\n}\n</code></pre>\n\n<p>If you want more genericity you can also pass <code>validateInput</code> and the type of input as an additional parameters.</p>\n"}, {"comments": [{"owner": {"reputation": 3277, "user_id": 5490549, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/hwaF6.png?s=128&g=1", "display_name": "IntoTheDeep", "link": "https://stackoverflow.com/users/5490549/intothedeep"}, "edited": false, "score": 0, "creation_date": 1490196653, "post_id": 42955948, "comment_id": 73006863, "body": "In your answer if input is not valid, it will not prompt again. In my method it prompts till valid"}, {"owner": {"reputation": 1274, "user_id": 1257146, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/30c95c84e3ee54ad98c2a25b674b612e?s=128&d=identicon&r=PG", "display_name": "Harry", "link": "https://stackoverflow.com/users/1257146/harry"}, "reply_to_user": {"reputation": 3277, "user_id": 5490549, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/hwaF6.png?s=128&g=1", "display_name": "IntoTheDeep", "link": "https://stackoverflow.com/users/5490549/intothedeep"}, "edited": false, "score": 0, "creation_date": 1490200293, "post_id": 42955948, "comment_id": 73009576, "body": "@TeodorKolev How so? If input is invalid <code>_currentIdx</code> is not increased and it will prompt again for the given array index."}], "tags": [], "owner": {"reputation": 1274, "user_id": 1257146, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/30c95c84e3ee54ad98c2a25b674b612e?s=128&d=identicon&r=PG", "display_name": "Harry", "link": "https://stackoverflow.com/users/1257146/harry"}, "is_accepted": false, "score": 0, "last_activity_date": 1490196197, "creation_date": 1490196197, "answer_id": 42955948, "question_id": 42955666, "link": "https://stackoverflow.com/questions/42955666/c-validate-input-value-before-add-it-to-array/42955948#42955948", "title": "c++ validate input value before add it to array", "body": "<p>Vittorio's answer above is spot on. For completeness, if you want exactly 5 elements:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nbool validateInput(int inValue)\n{\n  return inValue &gt;= -50 &amp;&amp; inValue &lt;= 50;\n}\n\nint main()\n{\n  int _arr[5];\n  int _currentIdx = 0;\n  int _tmp;\n  while (_currentIdx &lt; 5)\n  {\n    cin &gt;&gt; _tmp;\n    if (validateInput(_tmp))\n    {\n      _arr[_currentIdx] = _tmp;\n      _currentIdx++;\n    }\n    else\n    {\n      cout &lt;&lt; \"Invalid input! number must be between -50 and 50\" &lt;&lt; endl;\n    }\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1490201467, "post_id": 42956423, "comment_id": 73010410, "body": "There&#39;s no <code>temp</code> in the question.  Are you sure this is an answer?"}], "tags": [], "owner": {"reputation": 3277, "user_id": 5490549, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/hwaF6.png?s=128&g=1", "display_name": "IntoTheDeep", "link": "https://stackoverflow.com/users/5490549/intothedeep"}, "is_accepted": true, "score": 0, "last_activity_date": 1490205172, "last_edit_date": 1490205172, "creation_date": 1490197360, "answer_id": 42956423, "question_id": 42955666, "link": "https://stackoverflow.com/questions/42955666/c-validate-input-value-before-add-it-to-array/42956423#42956423", "title": "c++ validate input value before add it to array", "body": "<p>replace</p>\n\n<pre><code>cin &gt;&gt; temp;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>arr[i] = validateInput(\"some str\");\n</code></pre>\n"}], "owner": {"reputation": 3277, "user_id": 5490549, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/hwaF6.png?s=128&g=1", "display_name": "IntoTheDeep", "link": "https://stackoverflow.com/users/5490549/intothedeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 42956423, "answer_count": 3, "score": 0, "last_activity_date": 1490205172, "creation_date": 1490195539, "last_edit_date": 1490205140, "question_id": 42955666, "link": "https://stackoverflow.com/questions/42955666/c-validate-input-value-before-add-it-to-array", "title": "c++ validate input value before add it to array", "body": "<p>My target is to validate input value before add it into array. Current code used:</p>\n\n<pre><code>int main()\n{\n    int temp;\n    int arr[5];\n    for(int i = 0; i &lt; 5; i++)\n    {\n        // validate here\n        cin &gt;&gt; arr[i];\n    }\n    return 0;\n}\n</code></pre>\n\n<p>and my validation method:</p>\n\n<pre><code>int validateInput(string prompt)\n{\n    int val;\n    while (true)\n    {\n        cin.clear();\n        cin.sync();\n        cout &lt;&lt; prompt;\n        cin &gt;&gt; val;\n        if (cin.good() &amp;&amp; val &gt;= -50 &amp;&amp; val &lt;= 50)\n        {\n            break;\n        }\n        else\n            cin.clear();\n        cout &lt;&lt; \"Invalid input! number must be between -50 and 50\" &lt;&lt; endl;\n    }\n    return val;\n}\n</code></pre>\n\n<p>How is that possible?</p>\n"}, {"tags": ["c++", "qt", "visual-studio-2012", "compiler-errors", "visual-studio-2017"], "comments": [{"owner": {"reputation": 3075, "user_id": 1790154, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/64e5ca55fc4105591eb9c1cf24a5d878?s=128&d=identicon&r=PG", "display_name": "zhm", "link": "https://stackoverflow.com/users/1790154/zhm"}, "edited": false, "score": 1, "creation_date": 1490198597, "post_id": 42955587, "comment_id": 73008349, "body": "Qt latest version seems not support VS 2017 yet. I see the most latest qt-vs addin in <a href=\"http://download.qt.io/archive/vsaddin/\" rel=\"nofollow noreferrer\">Qt Archive</a> is VS 2015."}, {"owner": {"reputation": 23, "user_id": 7720998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c19e6a2ef7c8cca7f6dfc4a334d98a0?s=128&d=identicon&r=PG&f=1", "display_name": "Tachekentya", "link": "https://stackoverflow.com/users/7720998/tachekentya"}, "reply_to_user": {"reputation": 3075, "user_id": 1790154, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/64e5ca55fc4105591eb9c1cf24a5d878?s=128&d=identicon&r=PG", "display_name": "zhm", "link": "https://stackoverflow.com/users/1790154/zhm"}, "edited": false, "score": 0, "creation_date": 1490211398, "post_id": 42955587, "comment_id": 73016450, "body": "Many thanks. From the page you gave me, I think qt-vs-tools-msvc2013-2.1.1.vsix will work for me. Do you know what do I need to do after download the file?"}, {"owner": {"reputation": 3075, "user_id": 1790154, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/64e5ca55fc4105591eb9c1cf24a5d878?s=128&d=identicon&r=PG", "display_name": "zhm", "link": "https://stackoverflow.com/users/1790154/zhm"}, "edited": false, "score": 0, "creation_date": 1490231765, "post_id": 42955587, "comment_id": 73025024, "body": "You need to install the qt-vs addin, and then configure Qt settings to include your Qt install directory, Qt project settings to set your Qt version, in Visual Studio."}, {"owner": {"reputation": 5425, "user_id": 1932557, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/51KPf.jpg?s=128&g=1", "display_name": "Bahramdun Adil", "link": "https://stackoverflow.com/users/1932557/bahramdun-adil"}, "edited": false, "score": 0, "creation_date": 1493739325, "post_id": 42955587, "comment_id": 74526778, "body": "I also have the same problem with Qt and VS 2017, but I don&#39;t want to reinstall the VS to 2015. Is there any other way."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3682290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9179ced92c1f9ef6f3ef94facd501ba?s=128&d=identicon&r=PG&f=1", "display_name": "hejerdal", "link": "https://stackoverflow.com/users/3682290/hejerdal"}, "is_accepted": false, "score": 0, "last_activity_date": 1493881553, "last_edit_date": 1495540030, "creation_date": 1493881553, "answer_id": 43776089, "question_id": 42955587, "link": "https://stackoverflow.com/questions/42955587/qt-creator-compiler-config-issue-visual-studio-2017/43776089#43776089", "title": "Qt Creator Compiler Config Issue visual studio 2017", "body": "<p>To compile VS2013/Qt5 project under VS2017 you need to install full VS2013 together with VS2017. I tried <a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=40760\" rel=\"nofollow noreferrer\">MS Build Tools</a> but that's not sufficient because <a href=\"https://stackoverflow.com/questions/37721281/installing-platform-toolset-v120-under-visual-studio-2015\">does not include</a> unmanadged C++ compiler (cl.exe). Also, you need proper version of Qt itself and Qt VS Tools (aka Qt VS Addin). At the moment beta with VS2017 support is <a href=\"http://download.qt.io/development_releases/vsaddin/\" rel=\"nofollow noreferrer\">available</a>.</p>\n"}], "owner": {"reputation": 23, "user_id": 7720998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c19e6a2ef7c8cca7f6dfc4a334d98a0?s=128&d=identicon&r=PG&f=1", "display_name": "Tachekentya", "link": "https://stackoverflow.com/users/7720998/tachekentya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 5574, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1493881553, "creation_date": 1490195364, "last_edit_date": 1495540477, "question_id": 42955587, "link": "https://stackoverflow.com/questions/42955587/qt-creator-compiler-config-issue-visual-studio-2017", "title": "Qt Creator Compiler Config Issue visual studio 2017", "body": "<p>I have a problem very similar to \n<a href=\"https://stackoverflow.com/questions/37685474/qt-creator-compiler-config-issue\">Qt Creator Compiler Config Issue</a></p>\n\n<p>I have a code in one computer that run with qt 5.4.2msvc2013. In this computer everything works fine, I have these packages installed for the kit:\n<a href=\"https://i.stack.imgur.com/t0Iy4.png\" rel=\"nofollow noreferrer\">Build &amp; run kits</a></p>\n\n<p>but now I am trying to run the same program in a new computer and I can not get my projects to 'Build and Run'.</p>\n\n<p>I tried to install visual studio 2017 but it didn't work. I think the problem is that I don't know what do I have to install in the visual studio package to run something with Qt 5.4.2msvc2013 64bit2</p>\n\n<p>Here is what I installed of visual studio 2017 in the computer that doesn't work\n<a href=\"https://i.stack.imgur.com/Xdhxp.png\" rel=\"nofollow noreferrer\">Visual Studio 2017</a></p>\n\n<p>thank you for any help!</p>\n"}, {"tags": ["c++", "while-loop"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1490194917, "post_id": 42955380, "comment_id": 73005461, "body": "even if you print the last star first, it will appear in the first line..."}, {"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1490195063, "post_id": 42955380, "comment_id": 73005593, "body": "Can you please give an example with numbers, so the order is more clear? I don&#39;t really understand what you are asking at the moment."}, {"owner": {"reputation": 1059, "user_id": 1835778, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/292c204ccfb0a75696ffa77137283cba?s=128&d=identicon&r=PG", "display_name": "Abstraction", "link": "https://stackoverflow.com/users/1835778/abstraction"}, "edited": false, "score": 3, "creation_date": 1490195066, "post_id": 42955380, "comment_id": 73005597, "body": "Do you mean you want your program to output in console <i>higher</i> than previous output? If so, it&#39;s impossible via <code>cout</code> (which - long story short - creates strictly left-to-right, top-to-bottom text stream)."}, {"owner": {"reputation": 57, "user_id": 7573927, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8380a11be4ec241b3327fcf8dd6f57ab?s=128&d=identicon&r=PG&f=1", "display_name": "Jawad Adil", "link": "https://stackoverflow.com/users/7573927/jawad-adil"}, "edited": false, "score": 0, "creation_date": 1490195107, "post_id": 42955380, "comment_id": 73005630, "body": "actually i m writing code for four different inputs such that their outputs should vary"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1490195247, "post_id": 42955380, "comment_id": 73005729, "body": "note that your question is about output, not while loops, because not matter in what order you perform <code>cout &lt;&lt; &quot;* \\n&quot;;</code> it will print a star and go to the next line"}, {"owner": {"reputation": 57, "user_id": 7573927, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8380a11be4ec241b3327fcf8dd6f57ab?s=128&d=identicon&r=PG&f=1", "display_name": "Jawad Adil", "link": "https://stackoverflow.com/users/7573927/jawad-adil"}, "edited": false, "score": 0, "creation_date": 1490195275, "post_id": 42955380, "comment_id": 73005749, "body": "i am trying to write code for this [link]www.jawadadil.tk/uploads/Screenshot_2.png"}, {"owner": {"reputation": 57, "user_id": 7573927, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8380a11be4ec241b3327fcf8dd6f57ab?s=128&d=identicon&r=PG&f=1", "display_name": "Jawad Adil", "link": "https://stackoverflow.com/users/7573927/jawad-adil"}, "edited": false, "score": 0, "creation_date": 1490195304, "post_id": 42955380, "comment_id": 73005769, "body": "tobi303 see this picture"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1490195330, "post_id": 42955380, "comment_id": 73005796, "body": "you just need to place some empty lines before the stars..."}, {"owner": {"reputation": 57, "user_id": 7573927, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8380a11be4ec241b3327fcf8dd6f57ab?s=128&d=identicon&r=PG&f=1", "display_name": "Jawad Adil", "link": "https://stackoverflow.com/users/7573927/jawad-adil"}, "edited": false, "score": 0, "creation_date": 1490195386, "post_id": 42955380, "comment_id": 73005848, "body": "no that will not be the solution"}, {"owner": {"reputation": 1059, "user_id": 1835778, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/292c204ccfb0a75696ffa77137283cba?s=128&d=identicon&r=PG", "display_name": "Abstraction", "link": "https://stackoverflow.com/users/1835778/abstraction"}, "edited": false, "score": 0, "creation_date": 1490195449, "post_id": 42955380, "comment_id": 73005898, "body": "@JawadAdil Write it line by line, leaving spaces if you don&#39;t need stars in a particular column on this particular line. (There exist OS-dependent options like <code>initgraph()</code>, but I wouldn&#39;t recommend resorting to them.)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1490195461, "post_id": 42955380, "comment_id": 73005907, "body": "why not? anyhow you have to print multiple columns while you print only one. In that case not full blank lines, but empty entries, before printing the start"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1490195527, "post_id": 42955380, "comment_id": 73005954, "body": "imho you are on the wrong track. You dont need to print them from bottom up, you just have to print them that they are aligned bottom up. No need to reverse the while loop or the order in which you print them"}, {"owner": {"reputation": 17954, "user_id": 1248008, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Z3JaL.png?s=128&g=1", "display_name": "Jonas Sch&#228;fer", "link": "https://stackoverflow.com/users/1248008/jonas-sch%c3%a4fer"}, "edited": false, "score": 0, "creation_date": 1490254004, "post_id": 42955380, "comment_id": 73031960, "body": "I took the liberty to edit the actual question you posed in the comments into your question to prevent your question from becoming closed. The answers already base on that. If you feel I am mis-representing your actual question, roll the edit back and/or let me know."}], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1490195526, "creation_date": 1490195526, "answer_id": 42955661, "question_id": 42955380, "link": "https://stackoverflow.com/questions/42955380/how-to-create-an-ascii-art-bar-chart-in-c/42955661#42955661", "title": "How to create an ASCII-Art bar chart in C++?", "body": "<p>Standard C++ doesn't provide any way to do that.</p>\n\n<p>Given the requirement you've shown in the comments (you want to create a bar graph out of characters), what you probably want to do is start by creating a 2D array of characters the size of the output you're going to create.</p>\n\n<ul>\n<li>Start by filling it with space characters. </li>\n<li>Then fill in asterisks where needed to create your chart. Since it's just an array, you can access elements in any order you prefer.</li>\n<li>Then write it out to the screen from left to right, top to bottom.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 166, "user_id": 7553110, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A18Xc.jpg?s=128&g=1", "display_name": "kubre", "link": "https://stackoverflow.com/users/7553110/kubre"}, "is_accepted": false, "score": 0, "last_activity_date": 1490196272, "creation_date": 1490196272, "answer_id": 42955978, "question_id": 42955380, "link": "https://stackoverflow.com/questions/42955380/how-to-create-an-ascii-art-bar-chart-in-c/42955978#42955978", "title": "How to create an ASCII-Art bar chart in C++?", "body": "<p>I can say try to find how many no of rows in your full screen mode you have\nFollow these steps:</p>\n\n<ol>\n<li>Print the screen from top to bottom with stars.</li>\n<li>Then count those stars to get idea how many lines(row) on your screen are.</li>\n</ol>\n\n<p>ex.</p>\n\n<pre><code>*\n*\n*\n*\n</code></pre>\n\n<p>This means you have 4 rows.</p>\n\n<ol start=\"3\">\n<li>Then take input from user.</li>\n<li>Now subtract user input from no of rows. i.e. 4\nso if user give you 2 as input then fill screen with two spaces then 2 stars. </li>\n</ol>\n"}], "owner": {"reputation": 57, "user_id": 7573927, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8380a11be4ec241b3327fcf8dd6f57ab?s=128&d=identicon&r=PG&f=1", "display_name": "Jawad Adil", "link": "https://stackoverflow.com/users/7573927/jawad-adil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 867, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1490253957, "creation_date": 1490194844, "last_edit_date": 1490253957, "question_id": 42955380, "link": "https://stackoverflow.com/questions/42955380/how-to-create-an-ascii-art-bar-chart-in-c", "title": "How to create an ASCII-Art bar chart in C++?", "body": "<p>I have a question regarding C++ while loop. I want to draw an ASCII-Art bar chart such as this:</p>\n\n<pre><code>      *\n*     *\n* *   *\n* * * *\n* * * *\n* * * *\n</code></pre>\n\n<p>For this I need to fill the output from below. I have the following code which draws a single bar from \"top to bottom\", but I need to somehow leave the space above the bar so that the other bars fit nicely:</p>\n\n<pre><code>#include&lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    int a,n;\n    cout &lt;&lt; \"Enter a value in range 5-20 \\n\";\n    cin &gt;&gt; a;\n    while (n&lt;a) {\n        cout&lt;&lt;\"* \\n\";\n        n=n+1;\n    }\n }\n</code></pre>\n\n<p>As mentioned, this code doesn\u2019t leave space above the bar, so it won\u2019t align with other bars. How can I solve this?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 6, "creation_date": 1490194993, "post_id": 42955353, "comment_id": 73005534, "body": "Past mistakes + backwards compatibility = redundancy. This is very opinion based and broad."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7750295"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1490195077, "post_id": 42955353, "comment_id": 73005607, "body": "@nwp, nah sure? I mean the answer should probably just be something like: &quot;it is simply for readability&quot; or &quot;this one ... is quite different because it takes blablabl&quot; :)"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7751370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f08fd2275b05c39a1ed38a467b03ae98?s=128&d=identicon&r=PG&f=1", "display_name": "G.Andrei", "link": "https://stackoverflow.com/users/7751370/g-andrei"}, "is_accepted": false, "score": -2, "last_activity_date": 1490195023, "creation_date": 1490195023, "answer_id": 42955458, "question_id": 42955353, "link": "https://stackoverflow.com/questions/42955353/why-are-there-multiple-ways-of-initializing-variables-in-c/42955458#42955458", "title": "Why are there multiple ways of initializing variables in c++?", "body": "<p>Oh, it is because , all of datatypes are an object.\nThey all have blind initializers, that is same as the default-constructor(initializer) of the classes.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7750295"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "closed_date": 1490198819, "answer_count": 1, "score": 1, "last_activity_date": 1490195023, "creation_date": 1490194777, "question_id": 42955353, "link": "https://stackoverflow.com/questions/42955353/why-are-there-multiple-ways-of-initializing-variables-in-c", "closed_reason": "Duplicate", "title": "Why are there multiple ways of initializing variables in c++?", "body": "<p>Why are there multiple ways of initializing variables in c++ instead of just one?\nFrom my knowledge you can do these:</p>\n\n<pre><code>int x = 0;\nint y (2);\nint c {3};\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "boost", "boost-spirit", "boost-spirit-qi", "boost-spirit-x3"], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 2, "last_activity_date": 1490228503, "creation_date": 1490228503, "answer_id": 42965043, "question_id": 42955312, "link": "https://stackoverflow.com/questions/42955312/spirit-x3-rule-cannot-synthesize-attribute-of-type-boostiterator-range-in-a-se/42965043#42965043", "title": "spirit x3 rule cannot synthesize attribute of type boost::iterator_range in a sequence parser", "body": "<p>Interesting. Actually it does compile:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/61250495b6d00a6b\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/spirit/home/x3.hpp&gt;\n\nnamespace x3 = boost::spirit::x3;\n\nint main() {\n    std::string const str(\"x123x\");\n    boost::iterator_range&lt;std::string::const_iterator&gt; attr;\n    if(x3::parse(boost::begin(str), boost::end(str), x3::raw[+x3::digit], attr)) {\n        std::cout&lt;&lt;\"Match! attr = \"&lt;&lt;attr&lt;&lt;std::endl;\n    } else {\n        std::cout&lt;&lt;\"Not match!\"&lt;&lt;std::endl;\n    }\n}\n</code></pre>\n\n<p>The thing that makes it break is the surrounding context:</p>\n\n<pre><code>// simple (ok):\nx3::parse(boost::begin(str), boost::end(str), x3::raw[+x3::digit], attr);\n// ok:\nparse(boost::begin(str), boost::end(str), x3::eps &gt;&gt; x3::raw[+x3::digit], attr);\nparse(boost::begin(str), boost::end(str), x3::raw[+x3::digit] &gt;&gt; x3::eps, attr);\n// breaks:\nparse(boost::begin(str), boost::end(str), x3::eps &gt;&gt; x3::raw[+x3::digit] &gt;&gt; x3::eps, attr);\n</code></pre>\n\n<p>My guess is somehow the meta-programming erronously treats <code>iterator_range</code> as a Fusion sequence in such a case. Of course I think that's a bug.</p>\n\n<p>You should report this upstream.</p>\n\n<p>Sadly I haven't found a \"homeopathic\" workaround.</p>\n"}], "owner": {"reputation": 681, "user_id": 5247961, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/788ce8003aaf31a8860b4f24dcdcc8fe?s=128&d=identicon&r=PG&f=1", "display_name": "Han", "link": "https://stackoverflow.com/users/5247961/han"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 1, "accepted_answer_id": 42965043, "answer_count": 1, "score": 3, "last_activity_date": 1490228503, "creation_date": 1490194667, "question_id": 42955312, "link": "https://stackoverflow.com/questions/42955312/spirit-x3-rule-cannot-synthesize-attribute-of-type-boostiterator-range-in-a-se", "title": "spirit x3 rule cannot synthesize attribute of type boost::iterator_range in a sequence parser", "body": "<p>In a simple parser test <a href=\"http://coliru.stacked-crooked.com/a/5b3bde9736c9fc43\" rel=\"nofollow noreferrer\">Live On Coliru</a>,   </p>\n\n<pre><code>std::string str(\"x123x\");\nboost::iterator_range&lt;boost::range_iterator&lt;decltype(str)&gt;::type&gt; attr;\nif( x3::parse( boost::begin(str), boost::end(str), x3::lit('x') &gt;&gt; x3::raw[+x3::digit] &gt;&gt; x3::lit('x'), attr ) ) {\n    std::cout&lt;&lt;\"Match! attr = \"&lt;&lt;attr&lt;&lt;std::endl;\n} else {\n    std::cout&lt;&lt;\"Not match!\"&lt;&lt;std::endl;\n}\n</code></pre>\n\n<p>The parser</p>\n\n<pre><code>x3::lit('x') &gt;&gt; x3::raw[+x3::digit] &gt;&gt; x3::lit('x')\n</code></pre>\n\n<p>is supposed to synthesize an attribute of type <code>boost::iterator_range&lt;Iterator&gt;</code>. But it cannot compile. If we remove either of the two <code>x3::lit('x')</code>, it compiles. The same code compiles with qi though <a href=\"http://coliru.stacked-crooked.com/a/972e47819f1a7ab1\" rel=\"nofollow noreferrer\">Live on Coliru</a>. </p>\n"}, {"tags": ["c++", "templates", "macros"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1490194733, "post_id": 42955275, "comment_id": 73005306, "body": "A request for a macro whose expansion text is not valid C cannot be the subject of a valid C question.  Tags edited."}, {"owner": {"reputation": 1059, "user_id": 1835778, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/292c204ccfb0a75696ffa77137283cba?s=128&d=identicon&r=PG", "display_name": "Abstraction", "link": "https://stackoverflow.com/users/1835778/abstraction"}, "edited": false, "score": 1, "creation_date": 1490194742, "post_id": 42955275, "comment_id": 73005320, "body": "Why don&#39;t you want to use a template function instead?"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1490194804, "post_id": 42955275, "comment_id": 73005376, "body": "It cannot be done with macros (at least not if you want it to work for types like <code>map&lt;int, string&gt;</code>) but you can easily do it with a function."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1490194818, "post_id": 42955275, "comment_id": 73005390, "body": "Why a macro!? Why!?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1490194869, "post_id": 42955275, "comment_id": 73005433, "body": "Because job security: They are harder to debug."}], "answers": [{"comments": [{"owner": {"reputation": 10545, "user_id": 238902, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BRFti.png?s=128&g=1", "display_name": "Default", "link": "https://stackoverflow.com/users/238902/default"}, "edited": false, "score": 0, "creation_date": 1490196162, "post_id": 42955494, "comment_id": 73006439, "body": "why use <code>const</code> here?"}, {"owner": {"reputation": 48, "user_id": 2668312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b7dc123d3557f88db14e38b4a8f147a7?s=128&d=identicon&r=PG", "display_name": "ZhuZhi", "link": "https://stackoverflow.com/users/2668312/zhuzhi"}, "edited": false, "score": 0, "creation_date": 1490197241, "post_id": 42955494, "comment_id": 73007342, "body": "Thank you, will this be inlined?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 48, "user_id": 2668312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b7dc123d3557f88db14e38b4a8f147a7?s=128&d=identicon&r=PG", "display_name": "ZhuZhi", "link": "https://stackoverflow.com/users/2668312/zhuzhi"}, "edited": false, "score": 1, "creation_date": 1490199553, "post_id": 42955494, "comment_id": 73009050, "body": "@ZhuZhi I&#39;d be very surprised if it weren&#39;t."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 10545, "user_id": 238902, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BRFti.png?s=128&g=1", "display_name": "Default", "link": "https://stackoverflow.com/users/238902/default"}, "edited": false, "score": 0, "creation_date": 1490199590, "post_id": 42955494, "comment_id": 73009081, "body": "@Default just a habit. It doesn&#39;t need to change later :)"}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": false, "score": 2, "last_activity_date": 1490195117, "creation_date": 1490195117, "answer_id": 42955494, "question_id": 42955275, "link": "https://stackoverflow.com/questions/42955275/specific-c-macro/42955494#42955494", "title": "Specific C++ Macro", "body": "<p>This cannot be a macro, but surely a function template will be fine:</p>\n\n<pre><code>template &lt;class U, class T&gt;\nU safe_cast(T *obj) {\n    auto * const p = dynamic_cast&lt;U&gt;(obj);\n    assert(p);\n    return p;\n}\n</code></pre>\n\n<p>Call as you would <code>dynamic_cast</code> with a pointer.</p>\n"}, {"tags": [], "owner": {"reputation": 5440, "user_id": 860566, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/7b3c9600bd9d213f52750ac083c1ac28?s=128&d=identicon&r=PG", "display_name": "Thomas Russell", "link": "https://stackoverflow.com/users/860566/thomas-russell"}, "is_accepted": false, "score": 1, "last_activity_date": 1490195820, "creation_date": 1490195820, "answer_id": 42955765, "question_id": 42955275, "link": "https://stackoverflow.com/questions/42955275/specific-c-macro/42955765#42955765", "title": "Specific C++ Macro", "body": "<p>Don't use a macro. There's no reason why we cannot use a template function here, and so we should!</p>\n\n<pre><code>template &lt;typename T, typename U&gt;\nT safe_cast_helper( U&amp; u, std::true_type )\n{\n    try {\n        return dynamic_cast&lt;T&gt;(u);\n    }\n    catch (std::bad_cast&amp; e)\n    {\n        assert( false &amp;&amp; \"Exception thrown!\" ); // Or something better!\n    }\n}\n\ntemplate &lt;typename T, typename U&gt;\nT safe_cast_helper( U&amp; u, std::false_type )\n{\n    auto ptr = dynamic_cast&lt;T&gt;(u);\n    assert( ptr );\n    return ptr;\n}\n\ntemplate &lt;typename T, typename U&gt;\nT safe_cast( U&amp; u )\n{\n    return safe_cast_helper&lt;T&gt;( u, std::is_reference&lt;T&gt;::type() );\n}\n</code></pre>\n\n<p>You can use this as you would normally use a <code>dynamic_cast</code>, with either a reference or a pointer. I would, however, recommend improving the error reporting somewhat! Perhaps a write to log or something would be prudent before assert'ing out.</p>\n"}], "owner": {"reputation": 48, "user_id": 2668312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b7dc123d3557f88db14e38b4a8f147a7?s=128&d=identicon&r=PG", "display_name": "ZhuZhi", "link": "https://stackoverflow.com/users/2668312/zhuzhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490197761, "creation_date": 1490194595, "last_edit_date": 1490197761, "question_id": 42955275, "link": "https://stackoverflow.com/questions/42955275/specific-c-macro", "title": "Specific C++ Macro", "body": "<p>I would like a C++ Macro that will turn something that looks like this:</p>\n\n<pre><code>safe_cast&lt;Type&gt;(object)\n</code></pre>\n\n<p>into</p>\n\n<pre><code>Assert(dynamic_cast&lt;Type&gt;(object))\n</code></pre>\n\n<p>Is this possible?</p>\n\n<p>I could do it using: <code>safe_cast(Type, object)</code>, but it's not what I am after.</p>\n"}, {"tags": ["python", "c++", "amazon-web-services", "amazon-ec2", "amazon-elastic-beanstalk"], "comments": [{"owner": {"reputation": 2089, "user_id": 3022583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/re7Fa.png?s=128&g=1", "display_name": "Santiago Varela", "link": "https://stackoverflow.com/users/3022583/santiago-varela"}, "edited": false, "score": 0, "creation_date": 1490196210, "post_id": 42955145, "comment_id": 73006490, "body": "Could you show your minimal hello world function and how you&#39;re calling it in application.py?"}, {"owner": {"reputation": 787, "user_id": 1624507, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/328d73d388faff3a952ec71444835aac?s=128&d=identicon&r=PG", "display_name": "Hamid Bazargani", "link": "https://stackoverflow.com/users/1624507/hamid-bazargani"}, "reply_to_user": {"reputation": 2089, "user_id": 3022583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/re7Fa.png?s=128&g=1", "display_name": "Santiago Varela", "link": "https://stackoverflow.com/users/3022583/santiago-varela"}, "edited": false, "score": 0, "creation_date": 1490200165, "post_id": 42955145, "comment_id": 73009475, "body": "@SantiagoVarela I added the minimal code for <code>application.py</code>"}, {"owner": {"reputation": 2089, "user_id": 3022583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/re7Fa.png?s=128&g=1", "display_name": "Santiago Varela", "link": "https://stackoverflow.com/users/3022583/santiago-varela"}, "edited": false, "score": 0, "creation_date": 1490200349, "post_id": 42955145, "comment_id": 73009613, "body": "This is giving you the internal server error and no more information?"}, {"owner": {"reputation": 787, "user_id": 1624507, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/328d73d388faff3a952ec71444835aac?s=128&d=identicon&r=PG", "display_name": "Hamid Bazargani", "link": "https://stackoverflow.com/users/1624507/hamid-bazargani"}, "reply_to_user": {"reputation": 2089, "user_id": 3022583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/re7Fa.png?s=128&g=1", "display_name": "Santiago Varela", "link": "https://stackoverflow.com/users/3022583/santiago-varela"}, "edited": false, "score": 0, "creation_date": 1490200755, "post_id": 42955145, "comment_id": 73009902, "body": "@SantiagoVarela Yes."}], "owner": {"reputation": 787, "user_id": 1624507, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/328d73d388faff3a952ec71444835aac?s=128&d=identicon&r=PG", "display_name": "Hamid Bazargani", "link": "https://stackoverflow.com/users/1624507/hamid-bazargani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 375, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1490200832, "creation_date": 1490194315, "last_edit_date": 1490200832, "question_id": 42955145, "link": "https://stackoverflow.com/questions/42955145/c-hello-world-executed-on-aws-beanstalk", "title": "C++ Hello world executed on AWS beanstalk", "body": "<p>I've created a Python based web application on the <a href=\"http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/Welcome.html\" rel=\"nofollow noreferrer\">AWS Elastic Beanstalk</a> instance. Now I want to execute a simple C++ executable from Python application (e.g. <code>application.py</code>)\nI was able to pre-configure the instance with build-essential and g++, make, etc.\nHowever, when I call my Hello world application through python application, I get internal server error.</p>\n\n<p>In fact, I am seeking for a solution to run a C++ application on AWS beanstalk. My attempts include:</p>\n\n<ol>\n<li><p>Building c++ file using Makefile through calling make command from <code>application.py</code> and then running it. (No success)</p></li>\n<li><p>Building the executable and copying it to AWS EB and then run it. (No success)</p></li>\n<li><p>Creating a FastCGI application to do the same thing. But I don't know how to deploy it on the AWS EB instance. </p></li>\n</ol>\n\n<p>I know that C++ is not among the list of languages supported by AWS EB. But there should be a way to deploy a C++ executable on the cloud.</p>\n\n<p>So, I'd appreciate any help or suggestions.</p>\n\n<p><strong>Edit:</strong>\nHere is the code for <code>application.py</code>:</p>\n\n<pre><code>from flask import Flask\nimport subprocess as sp\n\ndef say_hello(username = \"Hamid\"):\n\n    ll = []\n\n    proc = sp.Popen(['make'], stdout=sp.PIPE, stderr=sp.PIPE, bufsize=1)\n    with proc.stdout:\n        for line in proc.stdout:\n            ll.append(line)  \n\n    proc.wait()\n\n    proc = sp.Popen(['./helloworld'], stdout=sp.PIPE, stderr=sp.PIPE, bufsize=1)\n    with proc.stdout:\n        for line in proc.stdout:\n            ll.append(line)    \n\n    proc.wait()\n\n    str_out = \"\"\n    for l in ll:\n        str_out += str(l) + \"  \"\n    return '&lt;p&gt;Application output is: %s !&lt;/p&gt;\\n' % str_out\n\n# some bits of text for the page.\nheader_text = '''\n    &lt;html&gt;\\n&lt;head&gt; &lt;title&gt;EB Flask Test&lt;/title&gt; &lt;/head&gt;\\n&lt;body&gt;'''\ninstructions = '''\n    &lt;p&gt;&lt;em&gt;Hint&lt;/em&gt;: This is a RESTful web service! Append a username\n    to the URL (for example: &lt;code&gt;/Thelonious&lt;/code&gt;) to say hello to\n    someone specific.&lt;/p&gt;\\n'''\nhome_link = '&lt;p&gt;&lt;a href=\"/\"&gt;Back&lt;/a&gt;&lt;/p&gt;\\n'\nfooter_text = '&lt;/body&gt;\\n&lt;/html&gt;'\n\n# EB looks for an 'application' callable by default.\napplication = Flask(__name__)\n\n# add a rule for the index page.\napplication.add_url_rule('/', 'index', (lambda: header_text +\n    say_hello() + instructions + footer_text))\n\n# add a rule when the page is accessed with a name appended to the site\n# URL.\napplication.add_url_rule('/&lt;username&gt;', 'hello', (lambda username:\n    header_text + say_hello(username) + home_link + footer_text))\n\n# run the app.\nif __name__ == \"__main__\":\n    # Setting debug to True enables debug output. This line should be\n    # removed before deploying a production app.\n    application.debug = True\n    application.run()\n</code></pre>\n"}, {"tags": ["c++", "class", "reference"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 3, "creation_date": 1490194156, "post_id": 42955039, "comment_id": 73004788, "body": "In <code>static vector&lt;int&gt; def();</code> <code>def</code> is a function, not a vector. See &quot;most vexing parse&quot;."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1490194354, "post_id": 42955039, "comment_id": 73004962, "body": "@nwp It&#39;s not really related to the most vexing parse, since that syntax (with parentheses) can <i>only</i> be used to declare member functions, not member variables."}, {"owner": {"reputation": 504, "user_id": 7155015, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/99ccb1305420ee9350efd765c5e75fc5?s=128&d=identicon&r=PG", "display_name": "LRDPRDX", "link": "https://stackoverflow.com/users/7155015/lrdprdx"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1490194385, "post_id": 42955039, "comment_id": 73004996, "body": "@nwp. Thank you. Sorry for my stupidity. I knew it should work."}], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1490194209, "creation_date": 1490194209, "answer_id": 42955101, "question_id": 42955039, "link": "https://stackoverflow.com/questions/42955039/default-reference-argument-in-c/42955101#42955101", "title": "Default reference argument in C++", "body": "<p>How about function <em>overloading</em>?</p>\n\n<p>You could make an overloaded function taking only one argument, and then use an empty dummy vector to call the two-argument function.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7751370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f08fd2275b05c39a1ed38a467b03ae98?s=128&d=identicon&r=PG&f=1", "display_name": "G.Andrei", "link": "https://stackoverflow.com/users/7751370/g-andrei"}, "edited": false, "score": 0, "creation_date": 1490194548, "post_id": 42955198, "comment_id": 73005147, "body": "I first thought like &quot;Some programmer dude&quot; but, you asked vector reference value ?"}], "tags": [], "owner": {"reputation": 1, "user_id": 7751370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f08fd2275b05c39a1ed38a467b03ae98?s=128&d=identicon&r=PG&f=1", "display_name": "G.Andrei", "link": "https://stackoverflow.com/users/7751370/g-andrei"}, "is_accepted": false, "score": -1, "last_activity_date": 1490194447, "creation_date": 1490194447, "answer_id": 42955198, "question_id": 42955039, "link": "https://stackoverflow.com/questions/42955039/default-reference-argument-in-c/42955198#42955198", "title": "Default reference argument in C++", "body": "<p>Your function def() might return always same value.</p>\n\n<p>So, I think you need to use \"#define\" as default &amp; reference vector.</p>\n"}, {"tags": [], "owner": {"reputation": 565, "user_id": 7705264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46450f795008d4ab8c078dfdf858afe?s=128&d=identicon&r=PG&f=1", "display_name": "em2er", "link": "https://stackoverflow.com/users/7705264/em2er"}, "is_accepted": true, "score": 2, "last_activity_date": 1490195118, "last_edit_date": 1490195118, "creation_date": 1490194481, "answer_id": 42955216, "question_id": 42955039, "link": "https://stackoverflow.com/questions/42955039/default-reference-argument-in-c/42955216#42955216", "title": "Default reference argument in C++", "body": "<p><code>static vector&lt;int&gt; def();</code> declares a static function <code>def</code> that returns a <code>vector&lt;int&gt;</code>. use <code>static vector&lt;int&gt; def{};</code>  or <code>static vector&lt;int&gt; def;</code> instead </p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1490203701, "creation_date": 1490203701, "answer_id": 42958742, "question_id": 42955039, "link": "https://stackoverflow.com/questions/42955039/default-reference-argument-in-c/42958742#42958742", "title": "Default reference argument in C++", "body": "<p>You can use a method overload, like @Someprogrammerdude suggested:</p>\n\n<pre><code>class mizer {\n  ...\n  public:\n    ...\n    void getDeviation( vector&lt;double&gt;&amp; );\n    void getDeviation( vector&lt;double&gt;&amp;, vector&lt;int&gt;&amp; );\n    ...\n};\n\nvoid mizer::getDeviation( vector&lt;double&gt;&amp; best_mass )\n{\n   vector&lt;int&gt; ignored; \n   getDeviation( best_mass, ignored );\n}\n\nvoid mizer::getDeviation( vector&lt;double&gt;&amp; best_mass, vector&lt;int&gt;&amp; best_comb )\n{\n   ...\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>mizer m;\nvector&lt;double&gt; mass;\nm.getDeviation( mass );\n</code></pre>\n\n<p></p>\n\n<pre><code>mizer m;\nvector&lt;double&gt; mass;\nvector&lt;int&gt; comb;\nm.getDeviation( mass, comb );\n</code></pre>\n\n<p>But that is still going to allocate memory for the content of <code>best_comb</code> even if the caller does not want it.</p>\n\n<p>Alternatively, you can make the optional parameter be a pointer instead of a reference:</p>\n\n<pre><code>class mizer {\n  ...\n  public:\n    ...\n    void getDeviation( vector&lt;double&gt;&amp;, vector&lt;int&gt;* = nullptr );\n    ...\n};\n\nvoid mizer::getDeviation( vector&lt;double&gt;&amp; best_mass, vector&lt;int&gt;* best_comb )\n{\n   ...\n   if (best_comb) best_comb-&gt;push_back(...);\n   ...\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>mizer m;\nvector&lt;double&gt; mass;\nm.getDeviation( mass );\n</code></pre>\n\n<p></p>\n\n<pre><code>mizer m;\nvector&lt;double&gt; mass;\nvector&lt;int&gt; comb;\nm.getDeviation( mass, &amp;comb );\n</code></pre>\n\n<p>Now no memory is allocated for the content of <code>best_comb</code> unless the caller wants it.</p>\n"}], "owner": {"reputation": 504, "user_id": 7155015, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/99ccb1305420ee9350efd765c5e75fc5?s=128&d=identicon&r=PG", "display_name": "LRDPRDX", "link": "https://stackoverflow.com/users/7155015/lrdprdx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 42955216, "answer_count": 4, "score": 1, "last_activity_date": 1490203701, "creation_date": 1490194072, "last_edit_date": 1490194167, "question_id": 42955039, "link": "https://stackoverflow.com/questions/42955039/default-reference-argument-in-c", "title": "Default reference argument in C++", "body": "<p>I have class <code>mizer</code>:</p>\n\n<pre><code>class mizer {\n  ...\n  public:\n    ...\n    void getDeviation( vector&lt;double&gt;&amp;, vector&lt;int&gt;&amp; )\n...\n};\n</code></pre>\n\n<p>with realization:</p>\n\n<pre><code>void mizer::getDeviation( vector&lt;double&gt;&amp; best_mass, vector&lt;int&gt;&amp; best_comb ){\n   ...\n}\n</code></pre>\n\n<p>But sometimes I do not want to provide the second argument <code>best_comb</code>. So I want to set default or something:</p>\n\n<pre><code>void mizer::getDeviation( ..., vector&lt;int&gt;&amp; best_comb = default )\n</code></pre>\n\n<p>I tried:</p>\n\n<pre><code>static vector&lt;int&gt; def();\n...\nvoid mizer::getDeviation( ..., vector&lt;int&gt;&amp; best_comb = def )\n</code></pre>\n\n<p>But it is not working:</p>\n\n<pre><code>/minimizer/mizer.C:69:69: error: \nnon-const lvalue reference to   type 'vector&lt;int&gt;'  cannot bind to a value of unrelated type 'vector&lt;int&gt; ()'double mizer::getDeviation( vector&lt;double&gt;&amp;  best_mass, vector&lt;int&gt;&amp; best_comb=def ){\n</code></pre>\n\n<p>How to set default <code>vector</code> reference variable?</p>\n"}, {"tags": ["c++", "opencv", "shape", "pca", "area"], "comments": [{"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1490714363, "post_id": 42955007, "comment_id": 73230515, "body": "Any sample images you can share?"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 1, "creation_date": 1490722153, "post_id": 42955007, "comment_id": 73235669, "body": "And also the relevant part of the code"}, {"owner": {"reputation": 9602, "user_id": 2571705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9b0015a3abdccadd4ed3dd2e6c69bf?s=128&d=identicon&r=PG", "display_name": "dhanushka", "link": "https://stackoverflow.com/users/2571705/dhanushka"}, "edited": false, "score": 2, "creation_date": 1491208625, "post_id": 42955007, "comment_id": 73432894, "body": "Obtain the Fourier descriptors of the contour, set frequency components above a selected threshold to zero, then take the inverse Fourier transform. This way you can get a smoothed version of the contour, to which you can apply PCA. See <a href=\"http://demonstrations.wolfram.com/FourierDescriptors/\" rel=\"nofollow noreferrer\">here</a> for a nice demonstration."}], "answers": [{"tags": [], "owner": {"reputation": 714, "user_id": 2847782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EeZbJ.jpg?s=128&g=1", "display_name": "raullalves", "link": "https://stackoverflow.com/users/2847782/raullalves"}, "is_accepted": false, "score": 1, "last_activity_date": 1491064042, "last_edit_date": 1491064042, "creation_date": 1490719630, "answer_id": 43075357, "question_id": 42955007, "link": "https://stackoverflow.com/questions/42955007/opencv-pca-analysis-on-bw-image-area-vs-shape-is-there-already-an-implemen/43075357#43075357", "title": "OpenCV - PCA analysis on BW image - area vs shape - is there already an implementation?", "body": "<p>There are few parameters that you could change, in which may improve your system.</p>\n\n<p>First is the threshold you use to binarize your image. I don't know what your application is about, but you could use other color systems, or normalize your image by cromacity, and after that, apply the new threshold.</p>\n\n<p>Other aspect is to exclude shapes (contours) that have bigger or smaller area that what you are expecting. </p>\n\n<p>To add up, you may use a blur filter before detect contours.</p>\n"}, {"tags": [], "owner": {"reputation": 160, "user_id": 4804658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe51ed0e97975ed7572f6ea68409bbef?s=128&d=identicon&r=PG", "display_name": "lec00q", "link": "https://stackoverflow.com/users/4804658/lec00q"}, "is_accepted": true, "score": 2, "last_activity_date": 1490775487, "creation_date": 1490775487, "answer_id": 43088051, "question_id": 42955007, "link": "https://stackoverflow.com/questions/42955007/opencv-pca-analysis-on-bw-image-area-vs-shape-is-there-already-an-implemen/43088051#43088051", "title": "OpenCV - PCA analysis on BW image - area vs shape - is there already an implementation?", "body": "<p>Given that we have received very limited information about your problem (posting images would help a lot) and you do not seem to know the probability density function of the noise, your best bet is to consider the noise to be Gaussian.</p>\n\n<p>As such, and following your intuition, my suggested approach is to take a few (by a few I mean statistically relevant but not raising the computation time that much) random points that lie inside the object and compute the PCA.</p>\n\n<p>Repeat this procedure in an iterative loop and store somewhere the resulting rotation angles you get from the application of the PCA to the object shape.</p>\n\n<p>Stop once you have enough point, compute the mean of the rotation angles: this is a decent estimate of the true angle. Compute also the standard deviation to get a measure of the quality of your estimation. By \"enough points\" you can consider that ~30 points is usually considered to be \"enough\" for being representative of the underlying population according to the <em>central limit theorem</em>.</p>\n\n<p>If you want, you can improve on this approach in many ways, for example doing robust estimation of the true angle once you have collected enough points. It all depends on the data you have at hand...take my suggestion just as a starting point.</p>\n"}, {"tags": [], "owner": {"reputation": 173, "user_id": 5445816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ead78666215a5f5792f6c56efcd3d27a?s=128&d=identicon&r=PG&f=1", "display_name": "Mathias", "link": "https://stackoverflow.com/users/5445816/mathias"}, "is_accepted": false, "score": 1, "last_activity_date": 1491227716, "creation_date": 1491227716, "answer_id": 43186551, "question_id": 42955007, "link": "https://stackoverflow.com/questions/42955007/opencv-pca-analysis-on-bw-image-area-vs-shape-is-there-already-an-implemen/43186551#43186551", "title": "OpenCV - PCA analysis on BW image - area vs shape - is there already an implementation?", "body": "<p>I don't know how the noise looks but when you say \"small dirt\" I think it might be only some few pixels that is a lot smaller then the object it self, but it might be attached to the object. To reduce this noise it might be possible to perform an opening (morphology) on the binary image.</p>\n\n<p><a href=\"http://docs.opencv.org/2.4/doc/tutorials/imgproc/opening_closing_hats/opening_closing_hats.html\" rel=\"nofollow noreferrer\">http://docs.opencv.org/2.4/doc/tutorials/imgproc/opening_closing_hats/opening_closing_hats.html</a></p>\n"}], "owner": {"reputation": 579, "user_id": 3387542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/276b6025ed7608c503469f90e3f9c72a?s=128&d=identicon&r=PG&f=1", "display_name": "user3387542", "link": "https://stackoverflow.com/users/3387542/user3387542"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 1, "accepted_answer_id": 43088051, "answer_count": 3, "score": 2, "last_activity_date": 1491227716, "creation_date": 1490193995, "last_edit_date": 1490718912, "question_id": 42955007, "link": "https://stackoverflow.com/questions/42955007/opencv-pca-analysis-on-bw-image-area-vs-shape-is-there-already-an-implemen", "title": "OpenCV - PCA analysis on BW image - area vs shape - is there already an implementation?", "body": "<p>The shape of an object is detected on a bw image. The object is a black continuous shape, the background is white.\nWe use PCA (<a href=\"http://docs.opencv.org/3.1.0/d1/dee/tutorial_introduction_to_pca.html\" rel=\"nofollow noreferrer\">http://docs.opencv.org/3.1.0/d1/dee/tutorial_introduction_to_pca.html</a>) to get the object direction and align the object. Currently the shape itself (the points on the contour) is the input to the opencv PCA implementation. This usually works very well. But from time to time there is small dirt on the object border, causing the shape to pass around the dirt. This causes more points and more weight on one side, slightly turning the object.</p>\n\n<p>Idea: Instead of the contour, we use the area of the object as input for our PCA analysis. The issue there, to check all points on if they are inside the contour and then use them for PCA slows the application down. This part will be about 52352 times slower.</p>\n\n<p>New Approach: We take random points in the image, check if they are inside the shape and if so, use them for our PCA. We have to see if we can get the consistent quality needed from this approach.</p>\n\n<p>Is there already a similar implementation in opencv which is using the area instead of the shape?\nAnother approach would be to put a mesh over the object and use the mesh points inside the object for PCA.\nIs there already something similar available one can just use or does one quickly need to implement something like this?</p>\n\n<p>Going for straight lines around the object isn't an option.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 1, "creation_date": 1490193722, "post_id": 42954858, "comment_id": 73004419, "body": "see that semicolon after your second for-loop?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1490193786, "post_id": 42954858, "comment_id": 73004486, "body": "<code>for (i = 2; i &lt; sqrt(100); i++);</code> don&#39;t do an awful lot, innit. Use braces; everywhere, not just where you really need them."}, {"owner": {"reputation": 57, "user_id": 7744911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/272c05250757f4dccf3a8a3a3df6cfc3?s=128&d=identicon&r=PG&f=1", "display_name": "John Young", "link": "https://stackoverflow.com/users/7744911/john-young"}, "edited": false, "score": 0, "creation_date": 1490194507, "post_id": 42954858, "comment_id": 73005106, "body": "oh I know ,thanks a lot"}], "answers": [{"tags": [], "owner": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "is_accepted": true, "score": 0, "last_activity_date": 1490193744, "creation_date": 1490193744, "answer_id": 42954895, "question_id": 42954858, "link": "https://stackoverflow.com/questions/42954858/mistake-in-the-code-find-prime-number-from1-to-100/42954895#42954895", "title": "mistake in the code\uff08find prime number from1 to 100\uff09", "body": "<p>Your outer <code>for</code> loop doesn't have a body.</p>\n\n<p><code>for (i = 2; i &lt; sqrt(100); i++);</code></p>\n\n<p>Get rid of the semicolon. Always use <code>curly braces</code> to mark the boundaries of your loops even if the loop body is just a single statement.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7751370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f08fd2275b05c39a1ed38a467b03ae98?s=128&d=identicon&r=PG&f=1", "display_name": "G.Andrei", "link": "https://stackoverflow.com/users/7751370/g-andrei"}, "is_accepted": false, "score": 0, "last_activity_date": 1490194784, "creation_date": 1490194784, "answer_id": 42955356, "question_id": 42954858, "link": "https://stackoverflow.com/questions/42954858/mistake-in-the-code-find-prime-number-from1-to-100/42955356#42955356", "title": "mistake in the code\uff08find prime number from1 to 100\uff09", "body": "<p>You have inputed \"for (i = 2; i &lt; sqrt(100); i++);\" and the code line run, not having a body. It only loops several times and finishes.\nBecause of \";\" last.\nIf you delete the character \";\" it can run well.</p>\n"}], "owner": {"reputation": 57, "user_id": 7744911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/272c05250757f4dccf3a8a3a3df6cfc3?s=128&d=identicon&r=PG&f=1", "display_name": "John Young", "link": "https://stackoverflow.com/users/7744911/john-young"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 1, "accepted_answer_id": 42954895, "answer_count": 2, "score": -2, "last_activity_date": 1490194784, "creation_date": 1490193655, "question_id": 42954858, "link": "https://stackoverflow.com/questions/42954858/mistake-in-the-code-find-prime-number-from1-to-100", "title": "mistake in the code\uff08find prime number from1 to 100\uff09", "body": "<p>I think it's right,but it can't find the prime number.I don't know what mistakes it have.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;cmath&gt;\nusing namespace std;\nint main()\n{\n    int i, j, n, a[101];\n    for (i = 1; i &lt;= 100; i++)\n        a[i] = i;\n    a[1] = 0;\n    for (i = 2; i &lt; sqrt(100); i++);\n    for (j = i + 1; j &lt;= 100; j++)\n    {\n        if (a[i] != 0 &amp;&amp; a[j] != 0)\n            if (a[j] % a[i] == 0)\n                a[j] = 0;\n    }\n    cout &lt;&lt; endl;\n    for (i = 1; i &lt;= 100; i++)\n    {\n        if (a[i] != 0)cout &lt;&lt; a[i] &lt;&lt; \" \";\n    }\n    cout &lt;&lt; endl;\n    system(\"pause\");\n}\n</code></pre>\n\n<p>it output all the numbers from 2 to 99 ,not the prime numbers</p>\n"}, {"tags": ["c++", "switch-statement"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1490193773, "post_id": 42954854, "comment_id": 73004464, "body": "Because it falls through - that&#39;s why you added the <code>break</code>s in the first place"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 1, "creation_date": 1490193780, "post_id": 42954854, "comment_id": 73004477, "body": "<i>&quot;Without a break it also checks case 2 ...&quot;</i> no it doesn&#39;t check case 2, it just executes the code with no more case checking."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1490193967, "post_id": 42954854, "comment_id": 73004640, "body": "By the way, the reference explains it: <a href=\"http://en.cppreference.com/w/cpp/language/switch\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/switch</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1059, "user_id": 1835778, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/292c204ccfb0a75696ffa77137283cba?s=128&d=identicon&r=PG", "display_name": "Abstraction", "link": "https://stackoverflow.com/users/1835778/abstraction"}, "is_accepted": true, "score": 1, "last_activity_date": 1490193847, "creation_date": 1490193847, "answer_id": 42954939, "question_id": 42954854, "link": "https://stackoverflow.com/questions/42954854/control-flow-of-switch-statements-without-breaks/42954939#42954939", "title": "Control Flow of switch statements without breaks", "body": "<p><code>case</code> labels of <code>switch</code> operator don't \"check\" anything, they're basically <code>goto</code> labels. One could even write:</p>\n\n<pre><code>const int count = 12;\nchar dest[count], src[count] = \"abracadabra\", *from = src, *to = dest;\nint n = 1 + (count - 1) / 8;\nswitch (count % 8) {\n    case 0: do { *to++ = *from++;\n    case 7:      *to++ = *from++;\n    case 6:      *to++ = *from++;\n    case 5:      *to++ = *from++;\n    case 4:      *to++ = *from++;\n    case 3:      *to++ = *from++;\n    case 2:      *to++ = *from++;\n    case 1:      *to++ = *from++;\n               } while (--n &gt; 0);\n}\nprintf(\"%s\\n\", dest);\n</code></pre>\n"}], "owner": {"reputation": 4737, "user_id": 1684118, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/77575b6a2f7dc3dbb3a7b25ea4ab4012?s=128&d=identicon&r=PG", "display_name": "machinery", "link": "https://stackoverflow.com/users/1684118/machinery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 534, "favorite_count": 0, "accepted_answer_id": 42954939, "answer_count": 1, "score": 0, "last_activity_date": 1490193847, "creation_date": 1490193653, "question_id": 42954854, "link": "https://stackoverflow.com/questions/42954854/control-flow-of-switch-statements-without-breaks", "title": "Control Flow of switch statements without breaks", "body": "<p>I have a question regarding the following switch statement:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    int x = 1;\n\n    switch (x)\n    {\n        case 1:\n            cout &lt;&lt; \"x is 1\" &lt;&lt; endl;\n            //break;\n        case 2:\n            cout &lt;&lt; \"x is 2\" &lt;&lt; endl;\n            //break;\n\n        default:\n            cout &lt;&lt; \"x is something else\" &lt;&lt; endl;\n    }\n\n}\n</code></pre>\n\n<p>With break it works as expected but when I comment out the breaks the output is:</p>\n\n<blockquote>\n  <p>x is 1<br>\n  x is 2<br>\n  x is something else</p>\n</blockquote>\n\n<p>I expect the output to be</p>\n\n<blockquote>\n  <p>x is 1<br>\n  x is something else</p>\n</blockquote>\n\n<p>because x == 1 and case 1 is executed. Without a break it also checks case 2 which should not be executed because x != 2. At the end default is executed.</p>\n\n<p>Why is case 2 executed in this case?</p>\n"}]