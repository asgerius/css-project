[{"tags": ["c++", "pointers", "stack"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1542842438, "post_id": 53421804, "comment_id": 93718039, "body": "<code>cardDesc</code> has room for exactly one character. You read 128 characters into that and you&#39;re gonna have a bad time."}, {"owner": {"reputation": 148, "user_id": 10018988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AtClz.jpg?s=128&g=1", "display_name": "Max", "link": "https://stackoverflow.com/users/10018988/max"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1542842617, "post_id": 53421804, "comment_id": 93718103, "body": "Is there a way I can make it able to store 128 characters but still work as a pointer?"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1542842691, "post_id": 53421804, "comment_id": 93718122, "body": "How about <code>char cardDesc[128];</code> ...."}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 1, "creation_date": 1542843039, "post_id": 53421804, "comment_id": 93718243, "body": "Why are you messing with C-style strings in C++? What&#39;s the problem with <code>std::string</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1542843329, "post_id": 53421852, "comment_id": 93718333, "body": "Where does the null terminator go?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1542845450, "post_id": 53421852, "comment_id": 93718919, "body": "@user4581301 inside <code>cardDesc</code>, according to the documentation of <code>strcpy_s</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1542845614, "post_id": 53421852, "comment_id": 93718960, "body": "Can&#39;t argue that. What I&#39;m worried about is is the originator 128 characters plus terminator or 128 including terminator. Could be dropping a character."}], "tags": [], "owner": {"reputation": 5195, "user_id": 4005175, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/3N6Ze.jpg?s=128&g=1", "display_name": "Martin Heraleck&#253;", "link": "https://stackoverflow.com/users/4005175/martin-heraleck%c3%bd"}, "is_accepted": true, "score": 5, "last_activity_date": 1542842727, "creation_date": 1542842727, "answer_id": 53421852, "question_id": 53421804, "link": "https://stackoverflow.com/questions/53421804/debug-error-stack-around-the-variable-carddesc-was-corrupted/53421852#53421852", "title": "Debug error: stack around the variable &#39;cardDesc&#39; was corrupted", "body": "<p>You are copying 128 characters into <code>char cardDesc</code>, which represents only 1 character.</p>\n\n<p>You should change the type of <code>cardDesc</code> to a char-array:</p>\n\n<pre><code>char cardDesc[128];\n// ...\nm_D3D-&gt;GetVideoCardInfo(&amp;cardMem, cardDesc);\n//                                ^ no &amp;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 1, "last_activity_date": 1542843608, "last_edit_date": 1542843608, "creation_date": 1542843163, "answer_id": 53421916, "question_id": 53421804, "link": "https://stackoverflow.com/questions/53421804/debug-error-stack-around-the-variable-carddesc-was-corrupted/53421916#53421916", "title": "Debug error: stack around the variable &#39;cardDesc&#39; was corrupted", "body": "<h1>TL;DR</h1>\n\n<pre><code>std::string GetVideoCardInfo(int &amp; memoryVar)\n{\n    memoryVar = m_videoCardMemory;\n    return m_videoCardDescription;;\n}\n\n\nbool writeGPUnameDesc() {\n    int cardMem;\n    std::string cardDesc = m_D3D-&gt;GetVideoCardInfo(cardMem); \n\n    std::ofstream myfile;\n    myfile.open(\"gpuNameAndDesc.txt\");\n    myfile &lt;&lt; \"Graphics card name: \" &lt;&lt; cardDesc;\n    myfile &lt;&lt; \" - Graphics card memory: \" &lt;&lt; cardMem;\n    myfile.close();\n\n    return true;\n}\n</code></pre>\n\n<h1>Explanation</h1>\n\n<pre><code>strcpy_s(cardName, 128, m_videoCardDescription);\n</code></pre>\n\n<p>is a blatant lie. The size of <code>cardName</code> is exactly one character. If you lie to <code>strcpy_s</code> its extra checking to make sure you don't overrun the buffer cannot help you.</p>\n\n<h1>Inferior solutions</h1>\n\n<p>Replace</p>\n\n<pre><code>char cardDesc;   \n</code></pre>\n\n<p>with </p>\n\n<pre><code>char cardDesc[129]; \n</code></pre>\n\n<p>The better approach gets rid of the <a href=\"https://stackoverflow.com/questions/47882/what-is-a-magic-number-and-why-is-it-bad\">magic numbers</a> entirely.</p>\n\n<p>Up near the top of the file</p>\n\n<pre><code>namespace // annonymous namespace. Contents will not leak out of the file\n{\n    constexpr int MAX_CARD_NAME_LENGTH = 129 // 128 plus room for nul terminator\n}\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>void GetVideoCardInfo(int* memoryVar, char* cardName)\n{\n    strcpy_s(cardName, MAX_CARD_NAME_LENGTH, m_videoCardDescription);\n    *memoryVar = m_videoCardMemory;\n    return;\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>bool writeGPUnameDesc() {\n    char cardDesc[MAX_CARD_NAME_LENGTH]; // now an array\n    int cardMem;\n    m_D3D-&gt;GetVideoCardInfo(&amp;cardMem, cardDesc); // don't need to take address of array\n\n    std::ofstream myfile;\n    myfile.open(\"gpuNameAndDesc.txt\");\n    myfile &lt;&lt; \"Graphics card name: \" &lt;&lt; cardDesc;\n    myfile &lt;&lt; \" - Graphics card memory: \" &lt;&lt; cardMem;\n    myfile.close();\n\n    return true;\n}\n</code></pre>\n"}], "owner": {"reputation": 148, "user_id": 10018988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AtClz.jpg?s=128&g=1", "display_name": "Max", "link": "https://stackoverflow.com/users/10018988/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 53421852, "answer_count": 2, "score": 0, "last_activity_date": 1542843608, "creation_date": 1542842357, "last_edit_date": 1542842473, "question_id": 53421804, "link": "https://stackoverflow.com/questions/53421804/debug-error-stack-around-the-variable-carddesc-was-corrupted", "title": "Debug error: stack around the variable &#39;cardDesc&#39; was corrupted", "body": "<p>TITLE.\nThe function i'm using is this:</p>\n\n<pre><code>void GetVideoCardInfo(int* memoryVar, char* cardName)\n{\n    strcpy_s(cardName, 128, m_videoCardDescription);\n    *memoryVar = m_videoCardMemory;\n    return;\n}\n</code></pre>\n\n<p>m_videoCardDescription is a '128 character long' character array that has the description of my video card in it. Here is where I am calling the function:</p>\n\n<pre><code>bool writeGPUnameDesc() {\n    char cardDesc;\n    int cardMem;\n    m_D3D-&gt;GetVideoCardInfo(&amp;cardMem, &amp;cardDesc);\n\n    std::ofstream myfile;\n    myfile.open(\"gpuNameAndDesc.txt\");\n    myfile &lt;&lt; \"Graphics card name: \" &lt;&lt; cardDesc;\n    myfile &lt;&lt; \" - Graphics card memory: \" &lt;&lt; cardMem;\n    myfile.close();\n\n    return true;\n}\n</code></pre>\n\n<p>When I run the program a message box pops up that says Runtime-check failure #2\nand the title. If anyone can help thanks in advance.</p>\n"}, {"tags": ["java", "c++", "java-native-interface", "native", "javacpp"], "comments": [{"owner": {"reputation": 427, "user_id": 8480874, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1t2Jx.png?s=128&g=1", "display_name": "Chris Mc", "link": "https://stackoverflow.com/users/8480874/chris-mc"}, "edited": false, "score": 0, "creation_date": 1542853026, "post_id": 53421770, "comment_id": 93720411, "body": "The command for generating the JNI headers is <code>javah</code> did you run that? I think your java version might be relevant to the answer. here&#39;s the <a href=\"https://www.math.uni-hamburg.de/doc/java/tutorial/native1.1/stepbystep/index.html\" rel=\"nofollow noreferrer\">tutorial</a> I used in early 2017. Thank google for saving all my history. I&#39;m using java 8"}, {"owner": {"reputation": 3372, "user_id": 1088790, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/bN5qc.jpg?s=128&g=1", "display_name": "haelix", "link": "https://stackoverflow.com/users/1088790/haelix"}, "reply_to_user": {"reputation": 427, "user_id": 8480874, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1t2Jx.png?s=128&g=1", "display_name": "Chris Mc", "link": "https://stackoverflow.com/users/8480874/chris-mc"}, "edited": false, "score": 0, "creation_date": 1542882963, "post_id": 53421770, "comment_id": 93732062, "body": "I know about <code>javah</code> (or <code>javac -h</code>) but I was under the impression JavaCPP would do this for you, since it parses the C++ project and generates the Java side of things. Running javah would be the easier things it does."}, {"owner": {"reputation": 3372, "user_id": 1088790, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/bN5qc.jpg?s=128&g=1", "display_name": "haelix", "link": "https://stackoverflow.com/users/1088790/haelix"}, "reply_to_user": {"reputation": 427, "user_id": 8480874, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1t2Jx.png?s=128&g=1", "display_name": "Chris Mc", "link": "https://stackoverflow.com/users/8480874/chris-mc"}, "edited": false, "score": 0, "creation_date": 1542883053, "post_id": 53421770, "comment_id": 93732109, "body": "Oh and you tutorial doesn&#39;t have to do with the JavaCPP library, it&#39;s barebone JNI (which I&#39;m switching to)."}], "answers": [{"tags": [], "owner": {"reputation": 4789, "user_id": 523744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c48446db0f9d0ead468326a8ca5f791?s=128&d=identicon&r=PG", "display_name": "Samuel Audet", "link": "https://stackoverflow.com/users/523744/samuel-audet"}, "is_accepted": false, "score": 1, "last_activity_date": 1545698998, "last_edit_date": 1545698998, "creation_date": 1545633833, "answer_id": 53910046, "question_id": 53421770, "link": "https://stackoverflow.com/questions/53421770/javacpp-how-to-actually-generate-the-c-jni-wrappers/53910046#53910046", "title": "JavaCPP - how to actually generate the C++ JNI wrappers?", "body": "<p>The new <a href=\"https://github.com/bytedeco/javacpp/wiki/Mapping-Recipes\" rel=\"nofollow noreferrer\">Mapping Recipes for C/C++ Libraries</a> wiki page should clarify all this, but let me know if there is still anything unclear, and I will provide additional precisions here.</p>\n\n<p>In this case, we could call JavaCPP on <code>Mpf</code> with the <code>@Properties(target=\"Client\", ...)</code> value set, creating a class called <code>Client</code>, so the series of commands would look like this:</p>\n\n<pre><code>$ javac -cp javacpp.jar Mpf.java\n$ java -jar javacpp.jar Mpf\n$ javac -cp javacpp.jar Client.java\n$ java -jar javacpp.jar Client\n</code></pre>\n"}], "owner": {"reputation": 3372, "user_id": 1088790, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/bN5qc.jpg?s=128&g=1", "display_name": "haelix", "link": "https://stackoverflow.com/users/1088790/haelix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1802, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1545698998, "creation_date": 1542842120, "question_id": 53421770, "link": "https://stackoverflow.com/questions/53421770/javacpp-how-to-actually-generate-the-c-jni-wrappers", "title": "JavaCPP - how to actually generate the C++ JNI wrappers?", "body": "<p>I'm trying to use JavaCPP to create java bindings for some C++ library. The process has 2 aspects</p>\n\n<ul>\n<li>A linux shared library (.so) needs to be built, containing the native entry points (JNIEXPORT). It so happens my library is header-only so I just pass the includes to JavaCPP</li>\n<li>A java class needs to be generated with methods using the \"native\" keyword, whose signatures correspond to those on the native side</li>\n</ul>\n\n<p>The Java \"properties\" file (the part which describes how to build the .so and how to generate the Java file) looks like this:</p>\n\n<pre><code>@Properties(\n    //target = \"Client\",  // NOTE: with this commented, .so gets built; with it enabled, Java class gets written\n    value = @Platform(\n        includepath = {\"jnigen/src/main/cpp/mpf\"},\n        include = \"ClientWrapper.hpp\"\n    )\n)\npublic class Mpf implements InfoMapper {\n    public void map(InfoMap infoMap) {\n        infoMap.put(new Info(\"mpf::ClientWrapper\").pointerTypes(\"Client\"));\n    }\n}\n</code></pre>\n\n<p>The problem is, I can't for the life of me generate the C++ bindings. I know because the .so doesn't contain the entry points, looking at it with <code>nm -D X.so</code>. If I specify a \"target\" property the Java class gets outputted, which <strong>does</strong> look good, but no <code>.so</code>. If I leave out <code>target</code> property, the .so is successfully built, but <strong>it has no bindings</strong>. I also see it hasn't got them, by passing -nodelete to the <code>java -jar javacpp.jar</code> so it keeps the generated cpp files - they only have marshalling code inside and not my stuff (one class).</p>\n\n<p>The JavaCPP documentation is a nightmare, and the steps are so entagled I can't work it out. Suggestions for alternative libraries are also welcome. Thanks.</p>\n"}, {"tags": ["c++", "aix", "memset", "xlc"], "comments": [{"owner": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "edited": false, "score": 0, "creation_date": 1542861092, "post_id": 53421744, "comment_id": 93722157, "body": "I might have already said that C++ is problematic even on popular platforms like MS Windows or GnuLinux, but on exotic platforms like AIX it is downright deadly. Also there are gcc&#39;s <i>include-fixed</i> header-files: they are usually not match with the actual header file they silently replace. <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Fixed-Headers.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/Fixed-Headers.html</a>"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1542879886, "post_id": 53421744, "comment_id": 93730075, "body": "Workaround: <code>(std::memset)(x, 0x00, 32);</code>. If at all possible, develop on a normal system like MSVC++, Clang or G++, and then port to XLC. Don&#39;t try to debug heap errors on such exotics."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1542880556, "post_id": 53421744, "comment_id": 93730518, "body": "@MSalters - Thanks. Yeah, we are clean on BSDs, Linux, OS X, Solaris, and Windows using the tools described at <a href=\"https://www.cryptopp.com/wiki/Release_process#Analysis_Tools\" rel=\"nofollow noreferrer\">Analysis Tools</a>. We are trying to track down the cause of Clang 7.0 self test failures on PowerPC. Clang 7.0 is the latest and I just got it to build from sources for the platform. I suspect it is a buggy compiler (we already filed a few bugs, like <a href=\"https://bugs.llvm.org/show_bug.cgi?id=39704\" rel=\"nofollow noreferrer\">LLVM Issue 39704</a>)."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1543174531, "post_id": 53421744, "comment_id": 93812903, "body": "@MSalters - The LLVM patch by Nemanja Ivanovic for Issue 39704 fixed out failed self tests. It seems Clang was removing some of our loads and stores because the LLVM functions were annotated incorrectly. LLVM thought they needed to be 16-byte aligned when they only needed 1-byte alignment."}], "answers": [{"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1542879732, "post_id": 53421937, "comment_id": 93729970, "body": "From that manual: &quot;these functions will be removed in a future release&quot;. It might not be worth the trouble to get this working, only to remove the whole mechanism in 2019."}], "tags": [], "owner": {"reputation": 21, "user_id": 10688376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2cbdbc1d128577c02c20b2b196c7d4?s=128&d=identicon&r=PG&f=1", "display_name": "user10688376", "link": "https://stackoverflow.com/users/10688376/user10688376"}, "is_accepted": false, "score": 1, "last_activity_date": 1542843311, "creation_date": 1542843311, "answer_id": 53421937, "question_id": 53421744, "link": "https://stackoverflow.com/questions/53421744/std-debug-memset-is-not-declared/53421937#53421937", "title": "&quot;std::_debug_memset&quot; is not declared", "body": "<p>You should try including <code>&lt;string.h&gt;</code> instead and using unqualified <code>memset</code>. According to the <a href=\"https://micro.ustc.edu.cn/power/C%2B%2B/IBM%2520XL%2520C_C%2B%2B%2520Enterprise%2520Edition%2520V9.0%2520for%2520AIX:%2520Programming%2520Guide.pdf\" rel=\"nofollow noreferrer\">IBM XL C/C++ Programming Guide</a>, <code>_debug_memset</code> lives in <code>string.h</code>. So the question becomes, shouldn't <code>&lt;cstring&gt;</code> make it available via <code>std::</code>? In the <a href=\"https://www.ibm.com/developerworks/rational/cafe/docBodyAttachments/2655-102-1-3459/standlib.pdf\" rel=\"nofollow noreferrer\">IBM XL C/C++ Standard Library reference</a>, it shows all of the using declarations, and the debug functions are not there.</p>\n\n<pre><code>namespace std\n{\nusing ::size_t; using ::memcmp; using ::memcpy; using ::memmove;\nusing ::memset; using ::strcat; using ::strcmp; using ::strcoll;\nusing ::strcpy; using ::strcspn; using ::strerror; using ::strlen;\nusing ::strncat; using ::strncmp; using ::strncpy; using ::strspn;\nusing ::strtok; using ::strxfrm;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": false, "score": 1, "last_activity_date": 1543174644, "last_edit_date": 1543174644, "creation_date": 1542881636, "answer_id": 53428587, "question_id": 53421744, "link": "https://stackoverflow.com/questions/53421744/std-debug-memset-is-not-declared/53428587#53428587", "title": "&quot;std::_debug_memset&quot; is not declared", "body": "<p>Based on @user10688376's observation here's what I've come up with. I think it is technically undefined behavior because I am not allowed to put symbols like <code>_debug_memset</code> and <code>_debug_memcpy</code> in the <code>std</code> namespace. At this point potential UB is better than a failed compile and no testing.</p>\n\n<pre><code>#if defined(_AIX) &amp;&amp; (defined(__xlc__) || defined(__xlC__) || defined(__ibmxl__))\n# if defined(__DEBUG_ALLOC__)\nnamespace std {\n  using ::_debug_memset;\n  using ::_debug_memcpy;\n}\n# endif\n#endif\n</code></pre>\n\n<p><code>_AIX</code> is used because it identifies the operating system. Debug heaps are not available on the Linux gear. (Some IBM XLC compilers run on Linux, too).</p>\n\n<p><code>__xlc__</code> and <code>__xlC__</code> are used to detect IBM XLC compiler 13.0 and earlier. This compiler is built completely by IBM.</p>\n\n<p><code>__ibmxl__</code> is used to detect IBM XLC compiler 13.1 and later. This compiler uses a Clang front-end and IBM back-end. I <em>think</em> this is the \"LLC\" compiler referred to in <a href=\"https://reviews.llvm.org/D7951?id=21078\" rel=\"nofollow noreferrer\">LLVM Review 21078</a>.</p>\n\n<p><code>__DEBUG_ALLOC__</code> is used because the compiler sets it for <code>-qheapdebug</code>.</p>\n"}], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1543174644, "creation_date": 1542841897, "last_edit_date": 1542847444, "question_id": 53421744, "link": "https://stackoverflow.com/questions/53421744/std-debug-memset-is-not-declared", "title": "&quot;std::_debug_memset&quot; is not declared", "body": "<p>I'm working on GCC119 from the compile farm. The machine is AIX 7.1, POWER8 with IBM XLC 13.1. I'm trying to use the debug heap:</p>\n\n<pre><code>gcc119$ cat test.cxx\n#include &lt;altivec.h&gt;\n#undef vector\n#undef pixel\n#undef bool\n\n#include &lt;cstdlib&gt;\n\nint main(int argc, char* argv[])\n{\n  unsigned char x[32];\n  std::memset(x, 0x00, 32);\n\n  return 0;\n}\n</code></pre>\n\n<p>A compile results in:</p>\n\n<pre><code>gcc119$ xlC -DDEBUG -g3 -O0 -qheapdebug -qro test.cxx -o test.exe\n\"test.cxx\", line 11.3: 1540-0130 (S) \"std::_debug_memset\" is not declared.\n</code></pre>\n\n<p>Both <code>&lt;cstring&gt;</code> and <code>&lt;string.h&gt;</code> result in the error. I also tried including <code>&lt;cstdlib&gt;</code> and <code>&lt;stdlib.h&gt;</code>, and they resulted in the same error.</p>\n\n<p>The <a href=\"https://www.ibm.com/support/knowledgecenter/SSGH3R_13.1.3/com.ibm.compilers.aix.doc/proguide.pdf\" rel=\"nofollow noreferrer\">Optimization and Programming Guide</a> manual has a good discussion of debugging memory functions, but the treatment is C only. It does not appear to treat C++.</p>\n\n<p>How does one use debug heaps in a C++ program?</p>\n\n<hr>\n\n<pre><code>gcc119$ oslevel -s\n7200-00-01-1543\n\ngcc119$ xlC -qversion\nIBM XL C/C++ for AIX, V13.1.3 (5725-C72, 5765-J07)\nVersion: 13.01.0003.0004\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "winapi", "mapping", "shared-memory"], "comments": [{"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 1, "creation_date": 1542843212, "post_id": 53421690, "comment_id": 93718296, "body": "We can&#39;t understand it either without actually seeing all the relevant code. Please see <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> and <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "edited": false, "score": 1, "creation_date": 1542843307, "post_id": 53421690, "comment_id": 93718327, "body": "m_key_shmem is a string that identifies the shared memroy, s_shmem is the handle that you get when you do a lookup/create with the m_key_shmem, and you get m_buffer from mapping the the s_shmem handle. You can then use that memory, my guess is that the m_key_mutex is used to synchronize between processes that uses the shared memory."}, {"owner": {"reputation": 1895, "user_id": 6129428, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7dab9d0dec9975a9de1237243c42804?s=128&d=identicon&r=PG&f=1", "display_name": "Hadi GhahremanNezhad", "link": "https://stackoverflow.com/users/6129428/hadi-ghahremannezhad"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1542843906, "post_id": 53421690, "comment_id": 93718493, "body": "@ChristopherPisz I know this is vague but stack overflow dowsn&#39;t let me share all the code. I think there is a limit for amount of code you put here"}, {"owner": {"reputation": 1895, "user_id": 6129428, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7dab9d0dec9975a9de1237243c42804?s=128&d=identicon&r=PG&f=1", "display_name": "Hadi GhahremanNezhad", "link": "https://stackoverflow.com/users/6129428/hadi-ghahremannezhad"}, "reply_to_user": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "edited": false, "score": 0, "creation_date": 1542844002, "post_id": 53421690, "comment_id": 93718515, "body": "@TonyJ Thank you! your response was helpful. Is it possible to know who is using the handle and shared memory while debugging?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1542844102, "post_id": 53421690, "comment_id": 93718541, "body": "For someone who&#39;s &quot;new to C++&quot;, the best use of their time would be to focus on learning the fundamentals of this most complicated general purpose programming language in use today, such as: scoping (local, global, dynamic), classes, inheritance, templates, and other parts of C++ that takes years of study to learn proficiently. This will produce far better results than trying to figure out how highly technical, operating system-specific system calls work, without even having a good grasp on the fundamentals of the language."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1542844249, "post_id": 53421690, "comment_id": 93718573, "body": "Agree with Sam. Windows API should be left alone until one doesn&#39;t feel new to the language."}, {"owner": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "edited": false, "score": 1, "creation_date": 1542844270, "post_id": 53421690, "comment_id": 93718581, "body": "@HadiGhahremanNezhad The same handle can only be created with the exact same string, so it&#39;s likely the same code(likely from another process) that&#39;s using it. I don&#39;t know anyways to find who else is using it, if there is a way you will find it on win32 MSDNdocumentation."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1542845269, "post_id": 53421690, "comment_id": 93718873, "body": "@HadiGhahremanNezhad Stack Overflow has a code size to description metric. The logic is large blocks of code must be one hell of a big problem and require a lot of description. Part of your job as the asker is to provide the minimum code that  exposes the bug and still runs (a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>) . There is method to this madness. Crafting a MCVE A)forces you to  consider every line of code you include in it and B) drastically reduces the amount of noise concealing the bug. Often you don&#39;t get far into the MCVE before one of those two pretty much hands the bug to you, eliminating the need for the question"}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1542992527, "post_id": 53421690, "comment_id": 93773664, "body": "You should read the MSDN documentation for <code>CreateFileMappingA</code> and <code>MapViewOfFile</code>."}], "owner": {"reputation": 1895, "user_id": 6129428, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7dab9d0dec9975a9de1237243c42804?s=128&d=identicon&r=PG&f=1", "display_name": "Hadi GhahremanNezhad", "link": "https://stackoverflow.com/users/6129428/hadi-ghahremannezhad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542992538, "creation_date": 1542841572, "last_edit_date": 1542992538, "question_id": 53421690, "link": "https://stackoverflow.com/questions/53421690/cannot-understand-the-details-of-using-shared-memory", "title": "Cannot understand the details of using shared memory", "body": "<p>I am new to C++ and I don't understand what is happening in this piece of program:</p>\n\n<pre><code>    class FasterRCNN {\nprivate:\n    int m_base_model;\n    std::string m_key_mutex = \"\";\n    HANDLE  m_mutex = INVALID_HANDLE_VALUE;\n    std::string m_key_shmem = \"\";\n    HANDLE  m_shmem = INVALID_HANDLE_VALUE;\n    DWORD m_size = 0;\n    char* m_buffer = nullptr;\n    std::vector&lt;std::string&gt; m_class_map;\npublic:\n    void Create(int base_model, std::string model_path, std::string classfile, DWORD size = 10000, float filter_threshold = 0.4F) {\n        m_base_model = base_model;\n        m_key_shmem = this-&gt;GetKey() + \"_shmem\";\n        m_key_mutex = this-&gt;GetKey() + \"_mutex\";\n        m_size = size;\n\n        m_mutex = ::CreateMutexA(nullptr, FALSE, m_key_mutex.c_str());\n        m_shmem = ::CreateFileMappingA(INVALID_HANDLE_VALUE, nullptr, PAGE_READWRITE, 0, m_size, m_key_shmem.c_str());\n        m_buffer = (char*)::MapViewOfFile(m_shmem, FILE_MAP_ALL_ACCESS, 0, 0, m_size);\n        m_buffer[0] = 0;\n</code></pre>\n\n<p>I can't understand how <strong>m_buffer</strong> gets it's values in last lines.\nI know that:</p>\n\n<ul>\n<li><strong>GetKey</strong> is for getting millisecond part of time</li>\n<li><p>m_buffer[0] works like a flag:</p>\n\n<p>//0 = load model</p>\n\n<p>//1 = send image path</p>\n\n<p>//2 = detect</p>\n\n<p>//3 = receive</p>\n\n<p>//9 = terminate signal</p></li>\n</ul>\n\n<p>Can I understand this by using threads window?</p>\n"}, {"tags": ["c++", "istream"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1542841268, "post_id": 53421600, "comment_id": 93717656, "body": "<code>Base *aa = Base::create(file); </code>  - don&#39;t do that - no need to use a pointer."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1542841354, "post_id": 53421600, "comment_id": 93717686, "body": "To be a real complete example, we also need your input file please."}, {"owner": {"reputation": 87, "user_id": 6121837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffbc3404a5277a74649d47821525b573?s=128&d=identicon&r=PG&f=1", "display_name": "N. Colostate", "link": "https://stackoverflow.com/users/6121837/n-colostate"}, "edited": false, "score": 0, "creation_date": 1542841466, "post_id": 53421600, "comment_id": 93717728, "body": "I added it.  It&#39;s below main."}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 6121837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffbc3404a5277a74649d47821525b573?s=128&d=identicon&r=PG&f=1", "display_name": "N. Colostate", "link": "https://stackoverflow.com/users/6121837/n-colostate"}, "edited": false, "score": 0, "creation_date": 1542842813, "post_id": 53421719, "comment_id": 93718162, "body": "Is there a way to fix my logic in my operator&gt;&gt; function so that it doesn&#39;t fail?  in &gt;&gt; *aa; works without error, but I need to use the if-statement you highlighted in your response."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 87, "user_id": 6121837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffbc3404a5277a74649d47821525b573?s=128&d=identicon&r=PG&f=1", "display_name": "N. Colostate", "link": "https://stackoverflow.com/users/6121837/n-colostate"}, "edited": false, "score": 0, "creation_date": 1542843522, "post_id": 53421719, "comment_id": 93718375, "body": "Yes. The full response I have in mind is lengthy and I can&#39;t get to it for a few hours."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1542859635, "last_edit_date": 1542859635, "creation_date": 1542841756, "answer_id": 53421719, "question_id": 53421600, "link": "https://stackoverflow.com/questions/53421600/read-file-to-istream-replacing-class-variables/53421719#53421719", "title": "Read file to istream replacing class variables", "body": "<p>Use of</p>\n\n<pre><code>if((in &gt;&gt; *aa).fail())             // Read file contents\n   cerr &lt;&lt; \"Read failed\" &lt;&lt; '\\n';\n</code></pre>\n\n<p>is a problem. The way you have implemenented <code>operator&gt;&gt;(std::istream &amp;, Base &amp;)</code>, that logic is bound to fail every time.</p>\n\n<p>You have a loop in the function</p>\n\n<pre><code>while(getline(ifs, line)) {\n   ...\n}\n</code></pre>\n\n<p>That loop will break only when there is nothing to read from the file or there is an error in reading the contents of the file. When that loop exits, <code>ifs.fail()</code> will always be true.</p>\n\n<p>You should replace the <code>if</code> statement with just:</p>\n\n<pre><code>in &gt;&gt; *aa;\n</code></pre>\n\n<p>If you need to do any error checking and print appropriate error messages, that has to be done inside <code>operator&gt;&gt;(std::istream &amp;, Base &amp;)</code>.</p>\n\n<h3>Update, in response to OP's comment</h3>\n\n<p>One way to make sure that the <code>istream</code> does not get to the point where <code>ifs.fail()</code> is always <code>true</code> is to know what's expected ahead of time.</p>\n\n<p>If the number of lines expected in the file is the first input, then, it is possible to read all the data and return from the function such that <code>ifs.fail()</code> is <code>false</code>.</p>\n\n<p>Sample input:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>type1\n3\n111\n222\n333\n</code></pre>\n\n<p>Then, the <code>oprator&gt;&gt;</code> function can be defined as:</p>\n\n<pre><code>std::stream&amp; operator&gt;&gt;(std::istream&amp; ifs, Base&amp; val) \n{\n   std::string line;\n   if ( !getline(ifs, line) ) // type of file\n   {\n      // Problem reading. No point trying to read more.\n      return ifs;\n   }\n\n   if(line == \"type1\") \n      val.filetype = \"type1\";\n   if(line == \"type2\")\n      val.filetype = \"type2\";\n\n   // read remaining contents\n\n   int numLines = 0;\n   if ( !(ifs &gt;&gt; numLines) )\n   {\n      // Problem reading. No point trying to read more.\n      return ifs;\n   }\n\n   val.vec.clear();    // clear old vector\n   vector&lt;int&gt; inner;  // inner vec to push onto main vec\n\n   for ( int n = 0; n &lt; numLines; ++n )\n   {\n      if ( !getline(ifs, line))\n      {\n         // Problem reading. No point trying to read more.\n         return ifs;\n      }\n\n      for(size_t i = 0; i &lt; line.length(); i++) \n      {\n         inner.push_back(line[i]);\n      }\n\n      val.vec.push_back(inner);\n      inner.clear();\n   }\n\n   val.height = val.vec.size();\n   val.width = val.vec[0].size();\n   val.max = val.vec[height-1][width-1];\n\n   return ifs;\n}\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 6121837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffbc3404a5277a74649d47821525b573?s=128&d=identicon&r=PG&f=1", "display_name": "N. Colostate", "link": "https://stackoverflow.com/users/6121837/n-colostate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 53421719, "answer_count": 1, "score": 1, "last_activity_date": 1542859635, "creation_date": 1542841004, "last_edit_date": 1542843111, "question_id": 53421600, "link": "https://stackoverflow.com/questions/53421600/read-file-to-istream-replacing-class-variables", "title": "Read file to istream replacing class variables", "body": "<p>I understand how to implement a overloaded ostream operator but I'm a little confused on a overloaded istream operator.  All the examples online only show a brief demonstration (i.e. is >> val; ) which doesn't help me in context with my class variables and methods. In my main, I'm trying to read in a file and replace the pointers contents with the file contents. I have a factory method and read method that does that already but I'm trying to overload my istream operator to do the same.  <strong>However, although the pointers contents are replaced, I still receive the cerr message below. Am I supposed to pass something to the ifs in my >> function?</strong></p>\n\n<p>Here is my main</p>\n\n<pre><code>int main() {\n\n  // factory method instantiates all class variables\n  Base *aa = Base::create(file);     // it works\n\n  ifstream in(file2);\n  if((in &gt;&gt; *aa).fail())             // Read file contents\n    cerr &lt;&lt; \"Read failed\" &lt;&lt; '\\n'; \n\n  cout &lt;&lt; *aa;                       // prints vector contents\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>// file     // file2      cout &lt;&lt; *aa     SupposedToBe\n555         111           Read Failed     111\n555         222           111             222\n555         333           222             333\n                          333\n</code></pre>\n\n<p>What I have so far (.cpp)</p>\n\n<pre><code>istream &amp;operator&gt;&gt;(istream &amp;ifs, Base &amp;val) {\n\n  string line;\n  getline(ifs, line); // type of file\n\n  if(line == \"type1\") \n    val.filetype = \"type1\";\n  if(line == \"type2\")\n    val.filetype = \"type2\";\n\n  val.vec.clear();    // clear old vector\n  vector&lt;int&gt; inner;  // inner vec to push onto main vec\n\n  // read remaining contents\n  while(getline(ifs, line)) {\n\n    for(size_t i = 0; i &lt; line.length(); i++) \n       inner.push_back(line[i]);\n\n    val.vec.push_back(inner);\n    inner.clear();\n  }\n\n  val.height = val.vec.size();\n  val.width = val.vec[0].size();\n  val.max = val.vec[height-1][width-1];\n\n  return ifs;\n}\n</code></pre>\n\n<p>My overloaded ostream function looks a lot different that what is displayed above (i.e. lots of os &lt;&lt; value).  But, whenever I do ifs >> value, I get all kinds of compiler errors (i.e. I tried just doing ifs >> val.image; ifs >> val.height; etc. but all I got was compiler errors).  What am I supposed to pass to the istream (in the above function) so the error above (below main) doesn't display. </p>\n\n<p>.h file for reference</p>\n\n<pre><code>class Base \n{\n  protected:\n    std::vector&lt;std::vector&lt;int&gt; &gt; vec;\n    std::string filetype;\n    int width, height, max;\n    Base() = default;\n    Base &amp;operator=(const Base &amp;) = default;\n  public:\n    static Base* create(std::string filename);\n    virtual ~Base();\n    // read by derived class\n    virtual void read(std::string filename) = 0;\n    friend std::istream &amp;operator&gt;&gt;(std::istream &amp;, Base &amp;);\n    friend std::ostream &amp;operator&lt;&lt;(std::ostream &amp;, const Image &amp;);\n};\n</code></pre>\n"}, {"tags": ["c++", "reference"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1542845140, "post_id": 53421559, "comment_id": 93718828, "body": "I suspect the answer is because you ran the code without turning on any optimizations."}, {"owner": {"reputation": 1095, "user_id": 7813604, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c05e209ba1c9aecc893a588b77b5d82f?s=128&d=identicon&r=PG&f=1", "display_name": "Kindred", "link": "https://stackoverflow.com/users/7813604/kindred"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1542859020, "post_id": 53421559, "comment_id": 93721631, "body": "@MooingDuck: I was (re-)thinking about whether C++ would do the optimization as python before I fell asleep, then now I just wake up and realize that it should be either the converse/reverse question or C++ should handle it better. What&#39;s the canonical way/mechanism when C++ doing this?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1542866747, "post_id": 53421559, "comment_id": 93723753, "body": "By default, compilers generate unoptimized builds, which make it <i>far</i> easier to step through and debug. However, every compiler also has a flag you can pass telling it to build an optimized build, which will shrink it down and make it fast and small.  How are you compiling your code?"}, {"owner": {"reputation": 1095, "user_id": 7813604, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c05e209ba1c9aecc893a588b77b5d82f?s=128&d=identicon&r=PG&f=1", "display_name": "Kindred", "link": "https://stackoverflow.com/users/7813604/kindred"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1542867103, "post_id": 53421559, "comment_id": 93723888, "body": "@MooingDuck: I just clicked run on <a href=\"https://ideone.com\" rel=\"nofollow noreferrer\">ideone.com</a>, I did try to find so called optimization options there but it seems like they don&#39;t have one. I haven&#39;t learned much about optimization since I rarely thinking about optimization."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1542870864, "post_id": 53421559, "comment_id": 93725388, "body": "ptr_user7813604 <a href=\"http://coliru.stacked-crooked.com/\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com</a> lets you pass -O0 through -O3 flags to the compiler, letting you see various results. (-O0 is the default of no optimization, -O3 is the maximum optimizations)"}], "answers": [{"comments": [{"owner": {"reputation": 1095, "user_id": 7813604, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c05e209ba1c9aecc893a588b77b5d82f?s=128&d=identicon&r=PG&f=1", "display_name": "Kindred", "link": "https://stackoverflow.com/users/7813604/kindred"}, "edited": false, "score": 0, "creation_date": 1542841515, "post_id": 53421624, "comment_id": 93717743, "body": "So since <code>const</code> is just compile time checking it has nothing to do with constant?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1542842310, "post_id": 53421624, "comment_id": 93717996, "body": "A prvalue is an expression, not a temporary object. Also there may or may not be a temporary object materialized at some stage for a prvalue.  Reference binding causes temporary materialization."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 1095, "user_id": 7813604, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c05e209ba1c9aecc893a588b77b5d82f?s=128&d=identicon&r=PG&f=1", "display_name": "Kindred", "link": "https://stackoverflow.com/users/7813604/kindred"}, "edited": false, "score": 0, "creation_date": 1542848217, "post_id": 53421624, "comment_id": 93719494, "body": "@ptr_user7813604: I&#39;d rather say that &quot;constant&quot; is too vague a term for that question to be meaningful. Lots of things can be constant in different ways in C++ (e.g. types, expressions, initialization)."}, {"owner": {"reputation": 1095, "user_id": 7813604, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c05e209ba1c9aecc893a588b77b5d82f?s=128&d=identicon&r=PG&f=1", "display_name": "Kindred", "link": "https://stackoverflow.com/users/7813604/kindred"}, "edited": false, "score": 0, "creation_date": 1542866595, "post_id": 53421624, "comment_id": 93723697, "body": "So is literal just the parameter needed to create the so called temporary object? And <i>the important point here is that each such object is a distinct object</i> is not reasonable for me, why it&#39;s distinct?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 1095, "user_id": 7813604, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c05e209ba1c9aecc893a588b77b5d82f?s=128&d=identicon&r=PG&f=1", "display_name": "Kindred", "link": "https://stackoverflow.com/users/7813604/kindred"}, "edited": false, "score": 1, "creation_date": 1542886387, "post_id": 53421624, "comment_id": 93734059, "body": "@ptr_user7813604: Maybe it helps if you think of literals as being part of the source code, but object creation as part of the runtime behaviour? Source code doesn&#39;t create objects, only <i>execution</i> does. The source code (in this case, the literal) determines <i>how</i> objects are created at runtime. Temporary objects are distinct by their very nature; a temporary object has no aliases. No two unrelated expressions denote the same temporary object (until you start binding the temporary to some reference). That&#39;s how the language has been designed."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1542886469, "post_id": 53421624, "comment_id": 93734101, "body": "@M.M: That&#39;s true, but I didn&#39;t want to go too deep distinguishing (evaluated!) expressions from the objects they designate. (And the materialization thing is new in C++17, the notion of temporaries used to be somewhat less clearly defined previously.) Do feel free to post an answer that explains it (or propose an edit)."}, {"owner": {"reputation": 1095, "user_id": 7813604, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c05e209ba1c9aecc893a588b77b5d82f?s=128&d=identicon&r=PG&f=1", "display_name": "Kindred", "link": "https://stackoverflow.com/users/7813604/kindred"}, "edited": false, "score": 0, "creation_date": 1542886719, "post_id": 53421624, "comment_id": 93734235, "body": "I&#39;m reading your comment, and will give you my feedback. btw I asked a question about exactly <i>why it&#39;s distinct</i> when waiting your reply if <a href=\"https://stackoverflow.com/q/53426022/7813604\">you could take a look</a> since I think you&#39;re more clear about what I&#39;m asking about."}, {"owner": {"reputation": 1095, "user_id": 7813604, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c05e209ba1c9aecc893a588b77b5d82f?s=128&d=identicon&r=PG&f=1", "display_name": "Kindred", "link": "https://stackoverflow.com/users/7813604/kindred"}, "edited": false, "score": 0, "creation_date": 1542887460, "post_id": 53421624, "comment_id": 93734676, "body": "OK, I think my problem is that I haven&#39;t myself accepted that it&#39;s <i>by their very nature</i>. If I said it&#39;s because optimization can always done later, would this agree with yours?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 1095, "user_id": 7813604, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c05e209ba1c9aecc893a588b77b5d82f?s=128&d=identicon&r=PG&f=1", "display_name": "Kindred", "link": "https://stackoverflow.com/users/7813604/kindred"}, "edited": false, "score": 1, "creation_date": 1542887742, "post_id": 53421624, "comment_id": 93734836, "body": "@ptr_user7813604: I&#39;d say optimization is an unrelated topic that doesn&#39;t affect the present question, which is all about the object model and the nature of expressions in the language. All those are core parts of the C++ design. Ultimately the immediate answer is always &quot;because that&#39;s how the language works&quot;, so perhaps a more satisfying question would be why the language has been designed this way. Temporary objects are <i>not</i> non-temporary objects in some global cache, they are truly temporary in the sense of being (newly, uniquely) created just at the point where they&#39;re needed."}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 6, "last_activity_date": 1542841097, "creation_date": 1542841097, "answer_id": 53421624, "question_id": 53421559, "link": "https://stackoverflow.com/questions/53421559/why-references-to-the-same-constant-take-distinct-memory-space-in-c/53421624#53421624", "title": "Why references to the same constant take distinct memory space in C++?", "body": "<p>Your <code>123</code> isn't a \"constant\". Rather, it is a <em>literal</em>. A literal forms an expression that is a prvalue (i.e. a temporary object initialized with the value of given by the literal). When you bind that expression to are reference, the lifetime of that object is extended to that of the reference, but the important point here is that each such object is a distinct object, and thus has a distinct address.</p>\n\n<p>If you will, the text string \"123\" provides a rule for how to create objects, but it is not by itself an object. You can rewrite your code to make this more explicit:</p>\n\n<pre><code>const int &amp; r = int(123);   // temporary of type \"int\" and value \"123\"\n</code></pre>\n\n<p>(There's no single such thing as \"a constant\" in C++. There are lots of things that are constant in one way or another, but they all need more detailed consideration.)</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 4, "last_activity_date": 1542844641, "last_edit_date": 1542844641, "creation_date": 1542841236, "answer_id": 53421646, "question_id": 53421559, "link": "https://stackoverflow.com/questions/53421559/why-references-to-the-same-constant-take-distinct-memory-space-in-c/53421646#53421646", "title": "Why references to the same constant take distinct memory space in C++?", "body": "<p>The literal is not an object. The references do not refer to the literal. When you initialise a reference using a literal, a temporary object will be created, and the lifetime of the temporary object is bound to the lifetime of the reference.</p>\n\n<p>The objects (one local variable, two temporaries) are separate and distinct objects despite having the same value. Since they're separate, they occupy separate memory locations. The standard mandates this, and that makes it possible to identify and distinguish objects based on their memory address.</p>\n"}, {"comments": [{"owner": {"reputation": 1095, "user_id": 7813604, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c05e209ba1c9aecc893a588b77b5d82f?s=128&d=identicon&r=PG&f=1", "display_name": "Kindred", "link": "https://stackoverflow.com/users/7813604/kindred"}, "edited": false, "score": 0, "creation_date": 1542870097, "post_id": 53422288, "comment_id": 93725037, "body": "This remind me of quantum mechanics in a sense that my observation is part of the experiment. By the way I have trouble to understand this kind of language rule, <i>... are guaranteed to ...</i> for what?"}, {"owner": {"reputation": 322, "user_id": 6049796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84a091eb4e10af942d3de4432607a319?s=128&d=identicon&r=PG&f=1", "display_name": "Euri Pinhollow", "link": "https://stackoverflow.com/users/6049796/euri-pinhollow"}, "reply_to_user": {"reputation": 1095, "user_id": 7813604, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c05e209ba1c9aecc893a588b77b5d82f?s=128&d=identicon&r=PG&f=1", "display_name": "Kindred", "link": "https://stackoverflow.com/users/7813604/kindred"}, "edited": false, "score": 1, "creation_date": 1542872872, "post_id": 53422288, "comment_id": 93726325, "body": "@ptr_user7813604 that&#39;s philosophical question and you will need to dive into C++ drafts and proposals to find answer. One of the probable reasons is that object identity can be used in computations - you can never distinguish r1 from r2 without having name if object they refer to is same."}, {"owner": {"reputation": 1095, "user_id": 7813604, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c05e209ba1c9aecc893a588b77b5d82f?s=128&d=identicon&r=PG&f=1", "display_name": "Kindred", "link": "https://stackoverflow.com/users/7813604/kindred"}, "edited": false, "score": 0, "creation_date": 1542874004, "post_id": 53422288, "comment_id": 93726861, "body": "OK I like this reason, and I will make a further induction that then the compiler can only do optimization up to a theoretical limit, where everything is almost indistinguishable. btw I like philosophical question because it doesn&#39;t necessarily have an answer."}, {"owner": {"reputation": 1095, "user_id": 7813604, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c05e209ba1c9aecc893a588b77b5d82f?s=128&d=identicon&r=PG&f=1", "display_name": "Kindred", "link": "https://stackoverflow.com/users/7813604/kindred"}, "edited": false, "score": 0, "creation_date": 1542874572, "post_id": 53422288, "comment_id": 93727129, "body": "I don&#39;t understand your <i>[&quot;] Since the references are bound to 3 distinct temporary, then you cannot observe these objects on <b>overlapping addresses</b>. [.&quot;]</i>, does it mean that <i><b>some</b> of them has the same address</i>?"}, {"owner": {"reputation": 322, "user_id": 6049796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84a091eb4e10af942d3de4432607a319?s=128&d=identicon&r=PG&f=1", "display_name": "Euri Pinhollow", "link": "https://stackoverflow.com/users/6049796/euri-pinhollow"}, "reply_to_user": {"reputation": 1095, "user_id": 7813604, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c05e209ba1c9aecc893a588b77b5d82f?s=128&d=identicon&r=PG&f=1", "display_name": "Kindred", "link": "https://stackoverflow.com/users/7813604/kindred"}, "edited": false, "score": 0, "creation_date": 1542887176, "post_id": 53422288, "comment_id": 93734484, "body": "@ptr_user7813604 &quot;overlapping&quot; refers not to the address of first byte but to the range of addresses objects occupy. This limitation means that no byte can be occupied by more than one object (except as said in excerpt)."}], "tags": [], "owner": {"reputation": 573, "user_id": 7636018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IQbgw.jpg?s=128&g=1", "display_name": "Julien Villemure-Fr&#233;chette", "link": "https://stackoverflow.com/users/7636018/julien-villemure-fr%c3%a9chette"}, "is_accepted": false, "score": 4, "last_activity_date": 1542846393, "creation_date": 1542846393, "answer_id": 53422288, "question_id": 53421559, "link": "https://stackoverflow.com/questions/53421559/why-references-to-the-same-constant-take-distinct-memory-space-in-c/53422288#53422288", "title": "Why references to the same constant take distinct memory space in C++?", "body": "<p>The three declaration statements:</p>\n\n<pre><code>const int &amp;r1 = 123;\nconst int &amp;r2 = 123;\nconst int &amp;r3 = r2;\n</code></pre>\n\n<p>will initialize 3 temporary objects with lifetime extended to be equal to the scope of their respective variables. Now, there is a language rule that says: </p>\n\n<blockquote>\n  <p>Any two objects with overlapping lifetimes (that are not bit fields)\n  are guaranteed to have different addresses unless one of them is a\n  subobject of another or provides storage for another, or if they are\n  subobjects of different type within the same complete object, and one\n  of them is a zero-size base.</p>\n</blockquote>\n\n<p>Since the references are bound to 3 distinct temporary, then you cannot observe these objects on overlapping addresses.</p>\n\n<p>Interestingly, the As-if rule might probably permit the program to allocate all three temporary objects at the same address but only if your compiler and linker can theoretically prove that your program can never observe the these objects as allocated at the same address. In your example, this is infeasible since you print the address of the objects.</p>\n"}], "owner": {"reputation": 1095, "user_id": 7813604, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c05e209ba1c9aecc893a588b77b5d82f?s=128&d=identicon&r=PG&f=1", "display_name": "Kindred", "link": "https://stackoverflow.com/users/7813604/kindred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 53421624, "answer_count": 3, "score": 3, "last_activity_date": 1542869212, "creation_date": 1542840771, "last_edit_date": 1542869212, "question_id": 53421559, "link": "https://stackoverflow.com/questions/53421559/why-references-to-the-same-constant-take-distinct-memory-space-in-c", "title": "Why references to the same constant take distinct memory space in C++?", "body": "<p>I'm new to the idea of reference in C++, I have a question concerning the memory allocation of reference to a pure number constant. (Another thing I want to check first is that I suspect <em>const reference</em>, which I frequently came across, means <em>reference to const</em>, but I'm not sure.)</p>\n\n<p>Here is my <a href=\"https://ideone.com/ErlrWn\" rel=\"nofollow noreferrer\">testing on ideone.com</a>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n\n    const int r0 = 123;\n    const int &amp;r1 = 123;\n    const int &amp;r2 = 123;\n    const int &amp;r3 = r2;\n\n    printf(\"%p\\n\", (void *)&amp;r0);\n    printf(\"%p\\n\", (void *)&amp;r1);\n    printf(\"%p\\n\", (void *)&amp;r2);\n    printf(\"%p\\n\", (void *)&amp;r3);\n\n    return 0;\n}\n</code></pre>\n\n<p>and the result:</p>\n\n<pre><code>0x7ffee3bd74c4\n0x7ffee3bd74c8\n0x7ffee3bd74cc\n0x7ffee3bd74cc\n</code></pre>\n\n<p>The reason <code>r2</code> is the same as <code>r3</code> is clear from this <a href=\"https://stackoverflow.com/a/1179994/7813604\">answer - How does a C++ reference look, memory-wise?</a>, which says it's depending on compiler. But I'm thinking about why compiler doesn't also make <code>r0</code>,<code>r1</code>,<code>r2</code> all the same, since all have the same pure constant value <code>123</code>. (or called prvalue if no wrong search)</p>\n\n<p>As a note: After some search on this site, I found a most related <a href=\"https://stackoverflow.com/a/30340596/7813604\">question - but in python</a>. Although different language but I thought the idea should be the same/similar: from the link, if my program were written in python then there will be only one <code>123</code> is in the memory space for saving space.</p>\n\n<p>Some other answers I've read:</p>\n\n<ol>\n<li><a href=\"https://stackoverflow.com/a/39481856/7813604\">C++ do references occupy memory</a>: This answer suggests that if it's necessary then <code>int &amp;x</code> is implemented as <code>*(pointer_to_x)</code>.</li>\n<li><a href=\"https://stackoverflow.com/a/1179959/7813604\">How does a C++ reference look, memory-wise?</a>: This answer suggests that compiler will try its best to save space.</li>\n</ol>\n"}, {"tags": ["c++", "las"], "comments": [{"owner": {"reputation": 874, "user_id": 3352222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6lYp.jpg?s=128&g=1", "display_name": "ravnsgaard", "link": "https://stackoverflow.com/users/3352222/ravnsgaard"}, "edited": false, "score": 0, "creation_date": 1542840931, "post_id": 53421517, "comment_id": 93717545, "body": "You&#39;re missing the return type from the <code>PointCloud::read</code> definition. And you have unmatched braces; I think there is a closing brace (<code>}</code>) too much at the bottom."}, {"owner": {"reputation": 117, "user_id": 7699994, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/97e7d38a9720ad81693e9c4f3eda6118?s=128&d=identicon&r=PG&f=1", "display_name": "p0ps1c1e", "link": "https://stackoverflow.com/users/7699994/p0ps1c1e"}, "reply_to_user": {"reputation": 874, "user_id": 3352222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6lYp.jpg?s=128&g=1", "display_name": "ravnsgaard", "link": "https://stackoverflow.com/users/3352222/ravnsgaard"}, "edited": false, "score": 0, "creation_date": 1542852749, "post_id": 53421517, "comment_id": 93720367, "body": "@ravnsgaard, do I still need to specify a return type even though it&#39;s void?"}, {"owner": {"reputation": 874, "user_id": 3352222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6lYp.jpg?s=128&g=1", "display_name": "ravnsgaard", "link": "https://stackoverflow.com/users/3352222/ravnsgaard"}, "edited": false, "score": 0, "creation_date": 1542890200, "post_id": 53421517, "comment_id": 93736120, "body": "Yes, you do. You&#39;re running into an ancient rule in the system (inherited from C) that makes anything not explicitly declared an <code>int</code>. Your compiler should have more to say about this... What compiler are you using? What version?"}, {"owner": {"reputation": 117, "user_id": 7699994, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/97e7d38a9720ad81693e9c4f3eda6118?s=128&d=identicon&r=PG&f=1", "display_name": "p0ps1c1e", "link": "https://stackoverflow.com/users/7699994/p0ps1c1e"}, "reply_to_user": {"reputation": 874, "user_id": 3352222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6lYp.jpg?s=128&g=1", "display_name": "ravnsgaard", "link": "https://stackoverflow.com/users/3352222/ravnsgaard"}, "edited": false, "score": 0, "creation_date": 1542910523, "post_id": 53421517, "comment_id": 93746495, "body": "I&#39;m running GCC im not sure the version as I&#39;m on Windows and its kind of a pain to check"}, {"owner": {"reputation": 117, "user_id": 7699994, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/97e7d38a9720ad81693e9c4f3eda6118?s=128&d=identicon&r=PG&f=1", "display_name": "p0ps1c1e", "link": "https://stackoverflow.com/users/7699994/p0ps1c1e"}, "reply_to_user": {"reputation": 874, "user_id": 3352222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6lYp.jpg?s=128&g=1", "display_name": "ravnsgaard", "link": "https://stackoverflow.com/users/3352222/ravnsgaard"}, "edited": false, "score": 0, "creation_date": 1542911274, "post_id": 53421517, "comment_id": 93746760, "body": "So what should the return type be in this case? Sorry I&#39;m a C++ newbie"}, {"owner": {"reputation": 874, "user_id": 3352222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6lYp.jpg?s=128&g=1", "display_name": "ravnsgaard", "link": "https://stackoverflow.com/users/3352222/ravnsgaard"}, "edited": false, "score": 1, "creation_date": 1542913639, "post_id": 53421517, "comment_id": 93747483, "body": "You&#39;re not returning anything. So, the return type should be <code>void</code>. It already is in your declaration, but there&#39;s no return type on your definition. This mismatch is what the compiler&#39;s complaining about."}], "owner": {"reputation": 117, "user_id": 7699994, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/97e7d38a9720ad81693e9c4f3eda6118?s=128&d=identicon&r=PG&f=1", "display_name": "p0ps1c1e", "link": "https://stackoverflow.com/users/7699994/p0ps1c1e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 693, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542859232, "creation_date": 1542840586, "last_edit_date": 1542859232, "question_id": 53421517, "link": "https://stackoverflow.com/questions/53421517/reading-las-file-into-c", "title": "Reading .las file into C++", "body": "<p>I'm fairly new at C++, but I'm trying to read in a .las file. I'm sort of following <a href=\"https://www.youtube.com/watch?v=vdaWvEH2xNU\" rel=\"nofollow noreferrer\">this youtube video</a>, but I'm still having some issues reading in the file.</p>\n\n<p>I'm getting several errors:</p>\n\n<pre><code>error: prototype for 'int PointCloud::read(const string&amp;)' does not match any in class 'PointCloud'|\ncandidate is: void PointCloud::read(const string&amp;)|\nexpected declaration before '}' token|\nerror: prototype for 'int PointCloud::read(const string&amp;)' does not match any    in class 'PointCloud'|\nerror: candidate is: void PointCloud::read(const string&amp;)|\nerror: expected declaration before '}' token|\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>#ifndef POINTCLOUD_H\n#define POINTCLOUD_H\n#include &lt;stdint.h&gt;\n#include &lt;string&gt;\n\nclass PointCloud\n{\n\npublic:\n    PointCloud(const std::string &amp;path);\n\nprivate:\nstruct Header\n        {\n            char magic[4];\n            uint16_t fileSourceID;\n            uint16_t globalEncoding;\n            uint32_t guidData1;\n            uint16_t guidData2;\n            uint16_t guidData3;\n            uint8_t guidData4;\n            uint8_t versionMaj, versionMin;\n            char systemIdentifier[32];\n            char genSoftware[32];\n            uint16_t creationDay, creationYear;\n            uint16_t headerSize;\n            uint32_t pointDataOffset;\n            uint32_t numVarLenRecords;\n            char pointDataFormat;\n            uint16_t pointDataRecordLen;\n            uint32_t pointRecordNum;\n            uint32_t pointReturnNum[5];\n            double  scaleX, scaleY, scaleZ;\n            double offX, offY, offZ;\n            double maxX, maxY, maxZ;\n            double minX, minY, minZ;\n        };\n    void read(const std::string &amp;path);\n\n};\n\n#endif //POINTCLOUD_H\n\n#include \"PointCloud.h\"\n#include &lt;iostream&gt;\n#include &lt;stdexcept&gt;\n#include &lt;fstream&gt;&gt;\n\nusing namespace std;\nPointCloud::read(const string &amp;path)\n  {\n    ifstream inf(path, ios::binary);\n    if(inf.is_open())\n      {\n        Header header;\n        inf.read((char *))&amp;header, sizeof(header));\n        cout &lt;&lt; header.versionMaj &lt;&lt; \",\" &lt;&lt; header.versionMin &lt;&lt; endl;\n      }\n        else\n      {\n        cout &lt;&lt; \"Error: No file found\" &lt;&lt; endl;\n      }\n    }\n}\n</code></pre>\n\n<p>I'm not sure why it is complaining about the prototype I think I have everything right in the header. Also all the variables in the header struct come from <a href=\"https://www.asprs.org/wp-content/uploads/2010/12/asprs_las_format_v12.pdf\" rel=\"nofollow noreferrer\">this link</a>.</p>\n\n<p>Any help would be greatly appreciated. \nThanks</p>\n"}, {"tags": ["c++", "windows", "segmentation-fault", "release", "ifstream"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1542840772, "post_id": 53421495, "comment_id": 93717498, "body": "Post the smallest code you can come up with that compiles, runs, and shows the problem. Posting snippets that you think might be the source of the problem is rarely productive."}, {"owner": {"reputation": 12289, "user_id": 3764804, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/fZQON.png?s=128&g=1", "display_name": "BullyWiiPlaza", "link": "https://stackoverflow.com/users/3764804/bullywiiplaza"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1542841285, "post_id": 53421495, "comment_id": 93717666, "body": "@PeteBecker: I can&#39;t do that. When I place the file reading code snippet in <code>main()</code> it works normally. But in my code it causes an exit code of <code>0xC0000005 (Access Violation)</code> instead of executing the <code>std::ifstream</code> constructor successfully..."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1542843588, "post_id": 53421495, "comment_id": 93718387, "body": "It&#39;s probably not the stream at all, but what you&#39;re doing elsewhere (most likely trashing the heap or the stack).  That is why @PeteBecker is saying you need to post more code."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1542848405, "post_id": 53421495, "comment_id": 93719537, "body": "Since tho code works fine in isolation, the problem is probably somewhere else. This kind of thing usually is the result of a stray pointer that hasn\u2019t been properly initialized or a write outside the bounds of an array. Those can be nasty to track down."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1542863495, "post_id": 53421495, "comment_id": 93722795, "body": "The crash is not at the <code>lea ecx, [edi+10h]</code>. That&#39;s the return address on the stack, which is nowhere near the actual crash point."}, {"owner": {"reputation": 12289, "user_id": 3764804, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/fZQON.png?s=128&g=1", "display_name": "BullyWiiPlaza", "link": "https://stackoverflow.com/users/3764804/bullywiiplaza"}, "edited": false, "score": 0, "creation_date": 1543094399, "post_id": 53421495, "comment_id": 93796319, "body": "I compared all variables from the <code>Linux</code> binary as well as the <code>Windows</code> one during execution. No memory corruption occurred. Even just calling the <code>ifstream</code> constructor causes the <code>ACCESS_VIOLATION</code> <code>0xC0000005</code> error code crash: <code>std::ifstream stream;</code> This should rule out quite a lot. Any ideas?"}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1543118771, "post_id": 53421495, "comment_id": 93800113, "body": "The corruption isn&#39;t in your variables. It&#39;s in the variables internal to the system (like the ones that keep track of which memory on the heap is being used for what). You could try using a heap verifier tool, like valgrind or pageheap."}, {"owner": {"reputation": 12289, "user_id": 3764804, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/fZQON.png?s=128&g=1", "display_name": "BullyWiiPlaza", "link": "https://stackoverflow.com/users/3764804/bullywiiplaza"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1543154897, "post_id": 53421495, "comment_id": 93807036, "body": "@RaymondChen: I found some minor memory leaks using <code>valgrind</code> and fixed them. Now <code>valgrind</code> is happy. This didn&#39;t help solve the problem in this question though."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1543794239, "post_id": 53585664, "comment_id": 94034883, "body": "More likely you have a bug in the code , that happens to not cause an exception in MSVC for now. But even if you do think it is a bug in g++ for windows, it would be helpful to others to try and make a MCVE so that the bug can be addressed"}, {"owner": {"reputation": 12289, "user_id": 3764804, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/fZQON.png?s=128&g=1", "display_name": "BullyWiiPlaza", "link": "https://stackoverflow.com/users/3764804/bullywiiplaza"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1543794631, "post_id": 53585664, "comment_id": 94034973, "body": "@M.M: It&#39;s not a bug in my code if calling the <code>ifstream</code> constructor blank without any argments causes an exception. There is nothing wrong. 2 compilers say it&#39;s fine and 1 crashes the binary at this point (and always!). Also I debugged and inspected all variables and there is no corruption. There you go. Making an <code>MCVE</code> is troublesome since the bug can&#39;t be replicated that easily."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1543795741, "post_id": 53585664, "comment_id": 94035202, "body": "If you can&#39;t replicate the bug then you have no basis for claiming it to be a compiler bug . &quot;I haven&#39;t found any bug in my code&quot; does not mean there is no bug in your code."}, {"owner": {"reputation": 12289, "user_id": 3764804, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/fZQON.png?s=128&g=1", "display_name": "BullyWiiPlaza", "link": "https://stackoverflow.com/users/3764804/bullywiiplaza"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1543797394, "post_id": 53585664, "comment_id": 94035491, "body": "That may be true but using <code>MSVC</code> for <code>Windows</code> is generally better than <code>MinGW</code> and I never ran into those always occurring crashing problems in regards to the <code>ifstream</code> anymore so I stopped caring about replicating this bug in an <code>MCVE</code>. The <code>MinGW</code> toolchain I used is a special distribution so it&#39;s high likely it may be the sole reason for the bug but we may never know after all. As long as everything works on <code>Windows</code> and <code>Linux</code> with at least one compiler it&#39;s all good. :)"}], "tags": [], "owner": {"reputation": 12289, "user_id": 3764804, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/fZQON.png?s=128&g=1", "display_name": "BullyWiiPlaza", "link": "https://stackoverflow.com/users/3764804/bullywiiplaza"}, "is_accepted": true, "score": -1, "last_activity_date": 1543793603, "creation_date": 1543793603, "answer_id": 53585664, "question_id": 53421495, "link": "https://stackoverflow.com/questions/53421495/stdifstream-crashes-in-release-build-on-windows-with-exit-code-0xc0000409-unk/53585664#53585664", "title": "std::ifstream crashes in release build on Windows with exit code 0xC0000409: Unknown software exception", "body": "<p>This seems to be a <a href=\"https://nuwen.net/mingw.html\" rel=\"nofollow noreferrer\"><code>MinGW</code></a> compiler bug since when using <code>MSVC</code> in <code>Visual Studio</code> to compile the code, the same exception does not occur either.</p>\n"}], "owner": {"reputation": 12289, "user_id": 3764804, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/fZQON.png?s=128&g=1", "display_name": "BullyWiiPlaza", "link": "https://stackoverflow.com/users/3764804/bullywiiplaza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "accepted_answer_id": 53585664, "answer_count": 1, "score": -2, "last_activity_date": 1543940382, "creation_date": 1542840426, "last_edit_date": 1543940382, "question_id": 53421495, "link": "https://stackoverflow.com/questions/53421495/stdifstream-crashes-in-release-build-on-windows-with-exit-code-0xc0000409-unk", "title": "std::ifstream crashes in release build on Windows with exit code 0xC0000409: Unknown software exception", "body": "<p>I'm reading a file using <code>std::ifstream</code>:</p>\n\n<pre><code>printf(\"Before stream initialization\\n\");\nifstream stream(file_path, ios::binary);\nprintf(\"Stream initialized\\n\");\nifstream::pos_type position = stream.tellg();\nauto file_size = position;\nprintf(\"Position acquired\\n\");\n</code></pre>\n\n<p>However, the program crashes in the release mode of the binary. Here is the compiled assembly code snippet:</p>\n\n<pre><code>.text:0000000000413411                 lea     rcx, aBeforeStreamIn ; \"Before stream initialization\\n\"\n.text:0000000000413418                 mov     rbx, rax\n.text:000000000041341B                 call    _ZL6printfPKcz  ; printf(char const*,...)\n.text:000000000041341B ;   } // starts at 41340C\n.text:0000000000413420                 lea     rdi, [rsp+878h+var_248]\n.text:0000000000413428                 lea     rcx, [rdi+0D8h] ; this\n.text:000000000041342F                 mov     [rsp+878h+var_820], rdi\n.text:0000000000413434                 call    _ZNSt8ios_baseC1Ev ; std::ios_base::ios_base(void)\n.text:0000000000413439                 xor     r8d, r8d\n.text:000000000041343C                 mov     rax, cs:_refptr__ZTVSt9basic_iosIcSt11char_traitsIcEE\n.text:0000000000413443                 xor     edx, edx\n.text:0000000000413445                 mov     [rsp+878h+var_90], r8w\n.text:000000000041344E                 pxor    xmm0, xmm0\n.text:0000000000413452                 movaps  [rsp+878h+var_88], xmm0\n.text:000000000041345A                 movaps  [rsp+878h+var_78], xmm0\n.text:0000000000413462                 mov     [rsp+878h+var_98], 0\n.text:000000000041346E                 add     rax, 10h\n.text:0000000000413472                 mov     [rsp+878h+var_170], rax\n.text:000000000041347A                 mov     rax, cs:_refptr__ZTTSt14basic_ifstreamIcSt11char_traitsIcEE\n.text:0000000000413481                 mov     rsi, [rax+8]\n.text:0000000000413485                 mov     rcx, [rax+10h]\n.text:0000000000413489                 mov     rax, [rsi-18h]\n.text:000000000041348D                 mov     [rsp+878h+var_248], rsi\n.text:0000000000413495                 mov     [rsp+878h+var_7E8], rcx\n.text:000000000041349D                 mov     [rsp+878h+var_7F0], rsi\n.text:00000000004134A5                 mov     [rsp+rax+878h+var_248], rcx\n.text:00000000004134AD                 mov     [rsp+878h+var_240], 0\n.text:00000000004134B9                 mov     rcx, [rsi-18h]\n.text:00000000004134BD                 add     rcx, rdi\n.text:00000000004134C0 ;   try {\n.text:00000000004134C0                 call    _ZNSt9basic_iosIcSt11char_traitsIcEE4initEPSt15basic_streambufIcS1_E ; std::basic_ios&lt;char,std::char_traits&lt;char&gt;&gt;::init(std::basic_streambuf&lt;char,std::char_traits&lt;char&gt;&gt; *)\n.text:00000000004134C0 ;   } // starts at 4134C0\n.text:00000000004134C5                 mov     rax, cs:_refptr__ZTVSt14basic_ifstreamIcSt11char_traitsIcEE\n.text:00000000004134CC                 lea     rcx, [rdi+10h]\n.text:00000000004134D0                 add     rax, 18h\n.text:00000000004134D4                 mov     [rsp+878h+var_248], rax\n.text:00000000004134DC                 mov     rax, cs:_refptr__ZTVSt14basic_ifstreamIcSt11char_traitsIcEE\n.text:00000000004134E3                 add     rax, 40h\n.text:00000000004134E7                 mov     [rsp+878h+var_170], rax\n.text:00000000004134EF ;   try {\n.text:00000000004134EF                 call    _ZNSt13basic_filebufIcSt11char_traitsIcEEC1Ev ; std::basic_filebuf&lt;char,std::char_traits&lt;char&gt;&gt;::basic_filebuf(void)\n.text:00000000004134EF ;   } // starts at 4134EF\n.text:00000000004134F4                 lea     rdx, [rdi+10h]\n.text:00000000004134F8                 lea     rcx, [rdi+0D8h]\n.text:00000000004134FF ;   try {\n.text:00000000004134FF                 call    _ZNSt9basic_iosIcSt11char_traitsIcEE4initEPSt15basic_streambufIcS1_E ; std::basic_ios&lt;char,std::char_traits&lt;char&gt;&gt;::init(std::basic_streambuf&lt;char,std::char_traits&lt;char&gt;&gt; *)\n.text:0000000000413504                 lea     rcx, [rdi+10h]\n.text:0000000000413508                 mov     r8d, 0Eh\n.text:000000000041350E                 mov     rdx, rbx\n.text:0000000000413511                 call    _ZNSt13basic_filebufIcSt11char_traitsIcEE4openEPKcSt13_Ios_Openmode ; std::basic_filebuf&lt;char,std::char_traits&lt;char&gt;&gt;::open(char const*,std::_Ios_Openmode)\n.text:0000000000413516                 mov     rdx, [rsp+878h+var_248]\n.text:000000000041351E                 add     rdi, [rdx-18h]\n.text:0000000000413522                 test    rax, rax\n.text:0000000000413525                 mov     rcx, rdi\n.text:0000000000413528                 jz      loc_414688\n.text:000000000041352E                 xor     edx, edx\n.text:0000000000413530                 call    _ZNSt9basic_iosIcSt11char_traitsIcEE5clearESt12_Ios_Iostate ; std::basic_ios&lt;char,std::char_traits&lt;char&gt;&gt;::clear(std::_Ios_Iostate)\n.text:0000000000413530 ;   } // starts at 4134FF\n.text:0000000000413535\n.text:0000000000413535 loc_413535:                             ; CODE XREF: PointerSearcher::parse_pointer_map(void)+1363\u2193j\n.text:0000000000413535                 lea     rcx, aStreamInitiali ; \"Stream initialized\\n\"\n.text:000000000041353C ;   try {\n.text:000000000041353C                 call    _ZL6printfPKcz  ; printf(char const*,...)\n</code></pre>\n\n<p>In my function it crashes at this line:</p>\n\n<pre><code>.text:0000000000413504                 lea     rcx, [rdi+10h]\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>Before stream initialization\n\nProcess finished with exit code -1073741819 (0xC0000409)\n</code></pre>\n\n<p>The stacktrace is:</p>\n\n<pre><code>std::locale::operator=(std::locale const&amp;)\nstd::ios_base::_M_init()\nstd::basic_ios&lt;char, std::char_traits&lt;char&gt; &gt;::init(std::basic_streambuf&lt;char, std::char_traits&lt;char&gt; &gt;*)\nMyExecutable::myFunction()\n</code></pre>\n\n<p>The crash only happens in the <code>Windows</code> binary. The binary works in release mode for <code>Linux</code>. I'm using the <code>MinGW</code> compiler to compile the Windows binary and the compilation flags are:</p>\n\n<pre><code>-fopenmp -O3 -DNDEBUG\n</code></pre>\n\n<p>They're the default <code>CMake</code> release build flags. I also made sure the passed <code>file_path</code> is correct.</p>\n\n<p><code>gdb</code> says:</p>\n\n<pre><code>Thread 1 received signal SIGSEGV, Segmentation fault.\n0x00000000004a2521 in std::locale::operator=(std::locale const&amp;) ()\n\nThread 1 received signal SIGSEGV, Segmentation fault.\n0x00000000004a2521 in std::locale::operator=(std::locale const&amp;) ()\n[Thread 48616.0xc508 exited with code 3221225477]\n[Thread 48616.0xc510 exited with code 3221225477]\n[Thread 48616.0xc638 exited with code 3221225477]\n[Inferior 1 (process 48616) exited with code 030000000005]\n</code></pre>\n\n<p>The compiler version:</p>\n\n<pre><code>\"C:\\Program Files\\mingw-w64\\x86_64-8.1.0-win32-seh-rt_v6-rev0\\mingw64\\bin\\x86_64-w64-mingw32-gcc.exe\" --version\nx86_64-w64-mingw32-gcc.exe (x86_64-win32-seh-rev0, Built by MinGW-W64 project) 8.1.0\nCopyright (C) 2018 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n</code></pre>\n\n<p>Does anyone have an idea what went wrong and how to fix it?</p>\n"}, {"tags": ["c++", "macos"], "comments": [{"owner": {"reputation": 2068, "user_id": 402891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3ba541a3204f4ea4b274049a152489c5?s=128&d=identicon&r=PG", "display_name": "interfect", "link": "https://stackoverflow.com/users/402891/interfect"}, "edited": false, "score": 0, "creation_date": 1542840376, "post_id": 53421455, "comment_id": 93717377, "body": "How did you go about installing your compiler? In particular, do you have the Xcode command line tools also installed? Also, what command are you using to build the file that produces that error when you run it?"}, {"owner": {"reputation": 304, "user_id": 10041044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/706553dcb45ddee4b6a61e236ed71c63?s=128&d=identicon&r=PG&f=1", "display_name": "asa", "link": "https://stackoverflow.com/users/10041044/asa"}, "reply_to_user": {"reputation": 2068, "user_id": 402891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3ba541a3204f4ea4b274049a152489c5?s=128&d=identicon&r=PG", "display_name": "interfect", "link": "https://stackoverflow.com/users/402891/interfect"}, "edited": false, "score": 0, "creation_date": 1542840671, "post_id": 53421455, "comment_id": 93717461, "body": "I did a simple <code>brew install gpp</code>, and I don&#39;t have install Xcode yet. Basically, the gpp command, like gpp <code>gpp main.cpp</code>"}, {"owner": {"reputation": 2068, "user_id": 402891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3ba541a3204f4ea4b274049a152489c5?s=128&d=identicon&r=PG", "display_name": "interfect", "link": "https://stackoverflow.com/users/402891/interfect"}, "edited": false, "score": 1, "creation_date": 1542841355, "post_id": 53421455, "comment_id": 93717687, "body": "<code>gpp</code> is just the preprocessor. It doesn&#39;t compile, and it doesn&#39;t bring the standard library along with it when you install it; it just substitutes in included files if it can find them. You are probably looking for the <code>g++</code> command from the <code>gcc</code> Homebrew package instead."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 13991633, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GivLNsSKnQ1gqlvKbK16qARiJXELiuXN_SBXFAcoQ=k-s128", "display_name": "David Canonigo", "link": "https://stackoverflow.com/users/13991633/david-canonigo"}, "is_accepted": false, "score": 0, "last_activity_date": 1599614492, "creation_date": 1599614492, "answer_id": 63803507, "question_id": 53421455, "link": "https://stackoverflow.com/questions/53421455/iostream-on-macosx/63803507#63803507", "title": "IOstream on MacOSX", "body": "<p>I used xcode-select --install on the terminal and everything started working.</p>\n<p>Best of luck</p>\n"}], "owner": {"reputation": 304, "user_id": 10041044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/706553dcb45ddee4b6a61e236ed71c63?s=128&d=identicon&r=PG&f=1", "display_name": "asa", "link": "https://stackoverflow.com/users/10041044/asa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 369, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1599614492, "creation_date": 1542840185, "question_id": 53421455, "link": "https://stackoverflow.com/questions/53421455/iostream-on-macosx", "title": "IOstream on MacOSX", "body": "<p>I just got a Macbook, and I just installed gpp to make some programs in C++, but when I am including iostream, i am getting this error :</p>\n\n<p><code>main.cpp:2: error: Requested include file not found</code></p>\n\n<p>Here is my code :</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main() {\n    std::cout &lt;&lt; \"test\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Thanks if you can help me !</p>\n"}, {"tags": ["c++", "mysql", "visual-studio-2017"], "comments": [{"owner": {"reputation": 7007, "user_id": 10195153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VnLka.jpg?s=128&g=1", "display_name": "danblack", "link": "https://stackoverflow.com/users/10195153/danblack"}, "edited": false, "score": 0, "creation_date": 1542840886, "post_id": 53421429, "comment_id": 93717533, "body": "Show the SQL error, and format the code. Show the table structure too <code>SHOW CREATE TABLE university.student</code>."}, {"owner": {"reputation": 41, "user_id": 10682584, "user_type": "registered", "profile_image": "https://graph.facebook.com/1429747733825176/picture?type=large", "display_name": "Sazzad", "link": "https://stackoverflow.com/users/10682584/sazzad"}, "reply_to_user": {"reputation": 7007, "user_id": 10195153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VnLka.jpg?s=128&g=1", "display_name": "danblack", "link": "https://stackoverflow.com/users/10195153/danblack"}, "edited": false, "score": 0, "creation_date": 1542841706, "post_id": 53421429, "comment_id": 93717800, "body": "Sir, I have edited my post? Is it okey now? Do I also attach the screenshot of the sql error?"}, {"owner": {"reputation": 41, "user_id": 10682584, "user_type": "registered", "profile_image": "https://graph.facebook.com/1429747733825176/picture?type=large", "display_name": "Sazzad", "link": "https://stackoverflow.com/users/10682584/sazzad"}, "reply_to_user": {"reputation": 7007, "user_id": 10195153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VnLka.jpg?s=128&g=1", "display_name": "danblack", "link": "https://stackoverflow.com/users/10195153/danblack"}, "edited": false, "score": 0, "creation_date": 1542842185, "post_id": 53421429, "comment_id": 93717959, "body": "Sir, I also have attach the database table and sql error in the screenshot"}, {"owner": {"reputation": 355, "user_id": 5719485, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Py3gI.jpg?s=128&g=1", "display_name": "Pararera", "link": "https://stackoverflow.com/users/5719485/pararera"}, "edited": false, "score": 0, "creation_date": 1542842316, "post_id": 53421429, "comment_id": 93717997, "body": "@Sazzad Print and share formated query. Guess you have problem(s) with formating the query."}, {"owner": {"reputation": 41, "user_id": 10682584, "user_type": "registered", "profile_image": "https://graph.facebook.com/1429747733825176/picture?type=large", "display_name": "Sazzad", "link": "https://stackoverflow.com/users/10682584/sazzad"}, "edited": false, "score": 0, "creation_date": 1542842971, "post_id": 53421429, "comment_id": 93718218, "body": "I also think, the problem is with the query, But I&#39;m surprised same code worked in the tutorial I&#39;ve share here, he done that in vs10, and I&#39;ve check and recheck the code that I&#39;ve done all the same as the tutorial. Now I don&#39;t understand why the same come should not work for me.."}], "owner": {"reputation": 41, "user_id": 10682584, "user_type": "registered", "profile_image": "https://graph.facebook.com/1429747733825176/picture?type=large", "display_name": "Sazzad", "link": "https://stackoverflow.com/users/10682584/sazzad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1576083608, "creation_date": 1542840041, "last_edit_date": 1576083608, "question_id": 53421429, "link": "https://stackoverflow.com/questions/53421429/cannot-insert-data-in-mysql-database-from-windows-form-application-in-c", "title": "Cannot insert data in mysql database from windows form application in c++", "body": "<p>I'm using <code>VS-2017</code> and MySql 8.0 and I am trying to insert data from windows form application in <code>c++</code>; the project was run properly, but the query is not correct. I guess, when I insert data and click the save button I created, it says: </p>\n\n<blockquote>\n  <p>\"you have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \" at line 1\"</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/jB7WM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jB7WM.png\" alt=\"enter image description here\"></a></p>\n\n<p>But I can insert data from the code manually (you can see the comment in the code which work), but i can not insert from the form! I done everything according to this video <a href=\"https://www.youtube.com/watch?v=3_iZ9FR0JmE&amp;index=10&amp;list=PLS1QulWo1RIZz6uDid--I09EOImRmPHS0\" rel=\"nofollow noreferrer\">tutorial</a></p>\n\n<p>Now how can I do that? My code is here:</p>\n\n<pre><code>private: System::Void button5_Click(System::Object^  sender, System::EventArgs^  e) {\n    String^ constring = L\"datasource= 127.0.0.1; port= 3306;username=root;password=12712\";\n    MySqlConnection^ conDataBase = gcnew MySqlConnection(constring);\n    MySqlCommand^ cmdDataBase = gcnew MySqlCommand(\"INSERT INTO `university`.`student` (`id`,`name`,`password`)  values('\"+this-&gt;id_txt-&gt;Text+\"','\"+this-&gt;name_txt-&gt;Text+\"','\"+this-&gt;password_txt-&gt;Text+\"' ;\", conDataBase);\n   //MySqlCommand^ cmdDataBase = gcnew MySqlCommand(\"INSERT INTO `university`.`student` (`id`, `name`, `password`) VALUES ('7', 'ah', '77'); \", conDataBase);\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1542839469, "post_id": 53421279, "comment_id": 93717102, "body": "Most things, like functions and (most) variables are alligned on some size that&#39;s not a multiple of a single byte. so the last bit will never be anything but zero."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1542839570, "post_id": 53421279, "comment_id": 93717125, "body": "Obvious question - which compiler?"}, {"owner": {"reputation": 31, "user_id": 9416167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xcofi.png?s=128&g=1", "display_name": "Mansour", "link": "https://stackoverflow.com/users/9416167/mansour"}, "edited": false, "score": 0, "creation_date": 1542840753, "post_id": 53421279, "comment_id": 93717486, "body": "@NeilButterworth I dont know .. I downloaded the compiled binary from <a href=\"https://www.foxitsoftware.com/downloads/\" rel=\"nofollow noreferrer\">foxitsoftware.com/downloads</a>"}, {"owner": {"reputation": 31, "user_id": 9416167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xcofi.png?s=128&g=1", "display_name": "Mansour", "link": "https://stackoverflow.com/users/9416167/mansour"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1542841145, "post_id": 53421279, "comment_id": 93717607, "body": "@JesperJuhl I see your point, but still I dont see why the check in first place .."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1542843069, "post_id": 53421279, "comment_id": 93718254, "body": "Multiple inheritance shenanigans, most likely.  Matters a lot for member function pointers that <i>might</i> reference an object of a class that uses virtual inheritance.  Googling &quot;v-table thunks&quot; for the compiler you use could well pay off."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1542843269, "post_id": 53421279, "comment_id": 93718315, "body": "x86_64 calling convention, <code>rdi</code> holds the first argument passed to the function, so whatever is passed is being tested odd/even for whatever reason."}], "answers": [{"tags": [], "owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "is_accepted": false, "score": 4, "last_activity_date": 1542842435, "creation_date": 1542842435, "answer_id": 53421813, "question_id": 53421279, "link": "https://stackoverflow.com/questions/53421279/why-compilers-test-the-least-significant-bit-in-an-address/53421813#53421813", "title": "Why compilers test the least significant bit in an address?", "body": "<p>I am guessing that the compiler uses odd addresses to indicate funky function pointers, perhaps indicating indirection through the class vtable, or some other mapping, perhaps for dynamic loaded code, where r8 is the class pointer?</p>\n\n<p>My best guess is this is a pointer to member function, and that could either be a simple member function, or a virtual function. If it is simple it is the raw address and if it is virtual it is the funky pointer value.</p>\n\n<p>If the \"pointer\" is even, then it is used directly, if it is odd it plings through r8 (probably the object instance) and rdi, and I have no idea what is in rdi, before applying rax as an offset with the 1 subtracted. It will depend heavily on the calling conventions of the platform and whatever tricks the compiler is playing.</p>\n\n<pre><code>0x0000000000bc724e &lt;+80&gt;:    mov    rax,QWORD PTR [r8+0x8]\n0x0000000000bc7252 &lt;+84&gt;:    test   al,0x1\n0x0000000000bc7254 &lt;+86&gt;:    je     0xbc7263 &lt;_ZN24CPDF_StreamContentParser10OnOperatorEPKc+101&gt;\n0x0000000000bc7256 &lt;+88&gt;:    mov    rdx,QWORD PTR [r8+0x10]\n0x0000000000bc725a &lt;+92&gt;:    mov    rdx,QWORD PTR [rdi+rdx*1]\n0x0000000000bc725e &lt;+96&gt;:    mov    rax,QWORD PTR [rdx+rax*1-0x1]\n0x0000000000bc7263 &lt;+101&gt;:   imul   r9,r9,0x18\n0x0000000000bc7267 &lt;+105&gt;:   lea    rdx,[rip+0x180f402]        # 0x23d6670 &lt;_ZL9g_OpCodes&gt;\n0x0000000000bc726e &lt;+112&gt;:   add    rdi,QWORD PTR [rdx+r9*1+0x10]\n0x0000000000bc7273 &lt;+117&gt;:   call   rax\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 76, "user_id": 5669873, "user_type": "registered", "profile_image": "https://graph.facebook.com/974320705975177/picture?type=large", "display_name": "Insu Yun", "link": "https://stackoverflow.com/users/5669873/insu-yun"}, "is_accepted": true, "score": 2, "last_activity_date": 1573505740, "creation_date": 1573505740, "answer_id": 58808579, "question_id": 53421279, "link": "https://stackoverflow.com/questions/53421279/why-compilers-test-the-least-significant-bit-in-an-address/58808579#58808579", "title": "Why compilers test the least significant bit in an address?", "body": "<p>The last value is used for specifying whether the function pointer is virtual or not.</p>\n\n<p>If the LSB of a function pointer is 1, it means that the function is virtual, so a binary should use the virtual function table to call this function. Otherwise, the binary uses the function pointer as a function address.</p>\n\n<p>You can see this behavior from the following code (mostly from <a href=\"https://www.geeksforgeeks.org/virtual-function-cpp/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/virtual-function-cpp/</a>).</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// CPP program to illustrate\n// concept of Virtual Functions\n#include&lt;iostream&gt;\nusing namespace std;\n\nclass base\n{\npublic:\n    virtual void print ()\n    { cout&lt;&lt; \"print base class\" &lt;&lt;endl; }\n\n    virtual void wow ()\n    { cout&lt;&lt; \"print base class\" &lt;&lt;endl; }\n\n    void show ()\n    { cout&lt;&lt; \"show base class\" &lt;&lt;endl; }\n};\n\nclass derived:public base\n{\npublic:\n    void print ()\n    { cout&lt;&lt; \"print derived class\" &lt;&lt;endl; }\n\n    void show ()\n    { cout&lt;&lt; \"show derived class\" &lt;&lt;endl; }\n};\n\nint main()\n{\n    base *bptr;\n    derived d;\n    bptr = &amp;d;\n\n    //virtual function, binded at runtime\n    printf(\"%p\\n\", &amp;derived::print);\n\n    //virtual function, binded at runtime\n    printf(\"%p\\n\", &amp;derived::wow);\n\n    // Non-virtual function, binded at compile time\n    printf(\"%p\\n\", &amp;derived::show);\n}\n</code></pre>\n\n<p>If you run this program, you will get</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ ./run\n0x1\n0x9\n0x5594923dac92\n</code></pre>\n\n<p>This shows that pointers for virtual functions are actually offsets with LSB 1,\nand the non-virtual function's pointer is the function address itself.</p>\n"}], "owner": {"reputation": 31, "user_id": 9416167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xcofi.png?s=128&g=1", "display_name": "Mansour", "link": "https://stackoverflow.com/users/9416167/mansour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 1, "accepted_answer_id": 58808579, "answer_count": 2, "score": 2, "last_activity_date": 1573505740, "creation_date": 1542839005, "last_edit_date": 1542839520, "question_id": 53421279, "link": "https://stackoverflow.com/questions/53421279/why-compilers-test-the-least-significant-bit-in-an-address", "title": "Why compilers test the least significant bit in an address?", "body": "<p>Consider this function in <a href=\"https://github.com/coolwanglu/PDFium.js/blob/master/core/src/fpdfapi/fpdf_page/fpdf_page_parser.cpp\" rel=\"nofollow noreferrer\">https://github.com/coolwanglu/PDFium.js/blob/master/core/src/fpdfapi/fpdf_page/fpdf_page_parser.cpp</a>:</p>\n\n<pre><code>FX_BOOL CPDF_StreamContentParser::OnOperator(FX_LPCSTR op)\n{\n    int i = 0;\n    FX_DWORD opid = 0;\n    while (i &lt; 4 &amp;&amp; op[i]) {\n        opid = (opid &lt;&lt; 8) + op[i];\n        i ++;\n    }\n    while (i &lt; 4) {\n        opid &lt;&lt;= 8;\n        i ++;\n    };\n    int low = 0, high = sizeof g_OpCodes / sizeof(struct _OpCode) - 1;\n    while (low &lt;= high) {\n        int middle = (low + high) / 2;\n        int compare = opid - g_OpCodes[middle].m_OpId;\n        if (compare == 0) {\n            (this-&gt;*g_OpCodes[middle].m_OpHandler)();\n            return TRUE;\n        } else if (compare &lt; 0) {\n            high = middle - 1;\n        } else {\n            low = middle + 1;\n        }\n    }\n    return m_CompatCount != 0;\n}\n</code></pre>\n\n<p>This function is used in FoxitReader 2.4 and it is compiled as: </p>\n\n<pre><code>Dump of assembler code for function _ZN24CPDF_StreamContentParser10OnOperatorEPKc:\n   0x0000000000bc71fe &lt;+0&gt;: xor    edx,edx\n   0x0000000000bc7200 &lt;+2&gt;: xor    eax,eax\n   0x0000000000bc7202 &lt;+4&gt;: movsx  r8d,BYTE PTR [rsi+rdx*1]\n   0x0000000000bc7207 &lt;+9&gt;: mov    ecx,edx\n   0x0000000000bc7209 &lt;+11&gt;:    test   r8b,r8b\n   0x0000000000bc720c &lt;+14&gt;:    je     0xbc7222 &lt;_ZN24CPDF_StreamContentParser10OnOperatorEPKc+36&gt;\n   0x0000000000bc720e &lt;+16&gt;:    shl    eax,0x8\n   0x0000000000bc7211 &lt;+19&gt;:    inc    rdx\n   0x0000000000bc7214 &lt;+22&gt;:    add    eax,r8d\n   0x0000000000bc7217 &lt;+25&gt;:    cmp    rdx,0x4\n   0x0000000000bc721b &lt;+29&gt;:    jne    0xbc7202 &lt;_ZN24CPDF_StreamContentParser10OnOperatorEPKc+4&gt;\n   0x0000000000bc721d &lt;+31&gt;:    mov    ecx,0x4\n   0x0000000000bc7222 &lt;+36&gt;:    cmp    ecx,0x4\n   0x0000000000bc7225 &lt;+39&gt;:    je     0xbc722e &lt;_ZN24CPDF_StreamContentParser10OnOperatorEPKc+48&gt;\n   0x0000000000bc7227 &lt;+41&gt;:    shl    eax,0x8\n   0x0000000000bc722a &lt;+44&gt;:    inc    ecx\n   0x0000000000bc722c &lt;+46&gt;:    jmp    0xbc7222 &lt;_ZN24CPDF_StreamContentParser10OnOperatorEPKc+36&gt;\n   0x0000000000bc722e &lt;+48&gt;:    lea    r10,[rip+0x180f43b]        # 0x23d6670 &lt;_ZL9g_OpCodes&gt;\n   0x0000000000bc7235 &lt;+55&gt;:    mov    cl,0x48\n   0x0000000000bc7237 &lt;+57&gt;:    xor    esi,esi\n   0x0000000000bc7239 &lt;+59&gt;:    lea    edx,[rsi+rcx*1]\n   0x0000000000bc723c &lt;+62&gt;:    sar    edx,1\n   0x0000000000bc723e &lt;+64&gt;:    movsxd r9,edx\n   0x0000000000bc7241 &lt;+67&gt;:    imul   r8,r9,0x18\n   0x0000000000bc7245 &lt;+71&gt;:    add    r8,r10\n   0x0000000000bc7248 &lt;+74&gt;:    cmp    eax,DWORD PTR [r8]\n   0x0000000000bc724b &lt;+77&gt;:    jne    0xbc727c &lt;_ZN24CPDF_StreamContentParser10OnOperatorEPKc+126&gt;\n   0x0000000000bc724d &lt;+79&gt;:    push   rcx\n   0x0000000000bc724e &lt;+80&gt;:    mov    rax,QWORD PTR [r8+0x8]\n   0x0000000000bc7252 &lt;+84&gt;:    test   al,0x1\n   0x0000000000bc7254 &lt;+86&gt;:    je     0xbc7263 &lt;_ZN24CPDF_StreamContentParser10OnOperatorEPKc+101&gt;\n   0x0000000000bc7256 &lt;+88&gt;:    mov    rdx,QWORD PTR [r8+0x10]\n   0x0000000000bc725a &lt;+92&gt;:    mov    rdx,QWORD PTR [rdi+rdx*1]\n   0x0000000000bc725e &lt;+96&gt;:    mov    rax,QWORD PTR [rdx+rax*1-0x1]\n   0x0000000000bc7263 &lt;+101&gt;:   imul   r9,r9,0x18\n   0x0000000000bc7267 &lt;+105&gt;:   lea    rdx,[rip+0x180f402]        # 0x23d6670 &lt;_ZL9g_OpCodes&gt;\n   0x0000000000bc726e &lt;+112&gt;:   add    rdi,QWORD PTR [rdx+r9*1+0x10]\n   0x0000000000bc7273 &lt;+117&gt;:   call   rax\n   0x0000000000bc7275 &lt;+119&gt;:   mov    eax,0x1\n   0x0000000000bc727a &lt;+124&gt;:   pop    rdx\n   0x0000000000bc727b &lt;+125&gt;:   ret    \n   0x0000000000bc727c &lt;+126&gt;:   jns    0xbc7283 &lt;_ZN24CPDF_StreamContentParser10OnOperatorEPKc+133&gt;\n   0x0000000000bc727e &lt;+128&gt;:   lea    ecx,[rdx-0x1]\n   0x0000000000bc7281 &lt;+131&gt;:   jmp    0xbc7286 &lt;_ZN24CPDF_StreamContentParser10OnOperatorEPKc+136&gt;\n   0x0000000000bc7283 &lt;+133&gt;:   lea    esi,[rdx+0x1]\n   0x0000000000bc7286 &lt;+136&gt;:   cmp    esi,ecx\n   0x0000000000bc7288 &lt;+138&gt;:   jle    0xbc7239 &lt;_ZN24CPDF_StreamContentParser10OnOperatorEPKc+59&gt;\n   0x0000000000bc728a &lt;+140&gt;:   xor    eax,eax\n   0x0000000000bc728c &lt;+142&gt;:   cmp    DWORD PTR [rdi+0x454],0x0\n   0x0000000000bc7293 &lt;+149&gt;:   setne  al\n   0x0000000000bc7296 &lt;+152&gt;:   ret    \nEnd of assembler dump.\n</code></pre>\n\n<p>Please note instructions +84 through +96 which corresponds to <code>(this-&gt;*g_OpCodes[middle].m_OpHandler)();</code>. The register rax holds the pointer to the handler function, but instead of calling it directly the compiler adds those instructions and test for the least significant bit, why? </p>\n\n<p>I found other instances of this in other functions. Like in the function void CFX_Renderer::render(const Scanline&amp; sl) in \n<a href=\"https://github.com/priority5/qt/blob/2a6b2348ced4cb42e8e3c320a6e5aa3606c0d5a1/qtwebengine/src/3rdparty/chromium/third_party/pdfium/core/fxge/agg/fx_agg_driver.cpp\" rel=\"nofollow noreferrer\">https://github.com/priority5/qt/blob/2a6b2348ced4cb42e8e3c320a6e5aa3606c0d5a1/qtwebengine/src/3rdparty/chromium/third_party/pdfium/core/fxge/agg/fx_agg_driver.cpp</a> :</p>\n\n<pre><code> (this-&gt;*composite_span)(..args..);\n</code></pre>\n\n<p>which corresponds to: </p>\n\n<pre><code>   0x0000000000c40a6c &lt;+480&gt;:   test   dl,0x1\n   0x0000000000c40a6f &lt;+483&gt;:   mov    rax,rdx\n   0x0000000000c40a72 &lt;+486&gt;:   je     0xc40a7d &lt;_ZN12CFX_Renderer6renderIN5fxagg10scanline_uIhEEEEvRKT_+497&gt;\n   0x0000000000c40a74 &lt;+488&gt;:   mov    rax,QWORD PTR [rbx+rdi*1]\n   0x0000000000c40a78 &lt;+492&gt;:   mov    rax,QWORD PTR [rdx+rax*1-0x1]\n   0x0000000000c40a7d &lt;+497&gt;:   mov    edx,DWORD PTR [r15+0x4]\n</code></pre>\n"}, {"tags": ["c++", "data-structures"], "comments": [{"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 4, "creation_date": 1542838481, "post_id": 53421184, "comment_id": 93716760, "body": "Are the objects you want to store of the same type? If so you can simply use a <code>std::vector&lt;YourObject&gt;</code>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1542838515, "post_id": 53421184, "comment_id": 93716772, "body": "<a href=\"https://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a>"}, {"owner": {"reputation": 14634, "user_id": 64348, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/h3b3u.png?s=128&g=1", "display_name": "Kit", "link": "https://stackoverflow.com/users/64348/kit"}, "edited": false, "score": 0, "creation_date": 1542838650, "post_id": 53421184, "comment_id": 93716819, "body": "You need to indicate in your question what you mean by <i>store</i>. Do you mean in memory or something more permanent?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1542839820, "post_id": 53421184, "comment_id": 93717212, "body": "As @Fran&#231;oisAndrieux already said. Use a <code>std::vector</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 1, "creation_date": 1542842890, "post_id": 53421557, "comment_id": 93718190, "body": "Is there a reason you suggest using raw owning pointers and adding another level of indirection where <code>std::vector&lt;pigeon&gt;</code> already does what the OP wants?"}, {"owner": {"reputation": 112, "user_id": 10469457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bd0fd6e7af6122221a47cd5e87e6f8c?s=128&d=identicon&r=PG&f=1", "display_name": "kara", "link": "https://stackoverflow.com/users/10469457/kara"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1542843548, "post_id": 53421557, "comment_id": 93718379, "body": "Op wants to store dynamic objects. When you use vector&lt;pigeon&gt; it first copies the object and stores it. This is not dynamic storing. And some point of view it is not efficient."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 1, "creation_date": 1542843759, "post_id": 53421557, "comment_id": 93718442, "body": "There is always <a href=\"https://en.cppreference.com/w/cpp/container/vector/emplace_back\" rel=\"nofollow noreferrer\">emplace_back()</a> and smart pointers."}, {"owner": {"reputation": 112, "user_id": 10469457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bd0fd6e7af6122221a47cd5e87e6f8c?s=128&d=identicon&r=PG&f=1", "display_name": "kara", "link": "https://stackoverflow.com/users/10469457/kara"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1542844012, "post_id": 53421557, "comment_id": 93718519, "body": "Can you give an example of usage of these?"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1542844234, "post_id": 53421557, "comment_id": 93718570, "body": "<code>pigeons.emplace_back()</code> with arguments that match a constructor of <code>pigeon</code> will construct the element to insert into the vector in-place directly in the memory managed by the vector. No temporaries, no copying."}, {"owner": {"reputation": 112, "user_id": 10469457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bd0fd6e7af6122221a47cd5e87e6f8c?s=128&d=identicon&r=PG&f=1", "display_name": "kara", "link": "https://stackoverflow.com/users/10469457/kara"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1542844613, "post_id": 53421557, "comment_id": 93718684, "body": "C++ isn&#39;t a high-level language like C# or Java. It has pointers and, it uses pointers. Seeing pointers and references in C++ something that you can&#39;t avoid."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1542845075, "post_id": 53421557, "comment_id": 93718812, "body": "Yes, there are reasons for using raw pointers that *don&#39;t* own the resources they point to. There is no reason however to use raw resource owning pointers since C++11. You earlier tried to argue with efficiency (<i>And some point of view it is not efficient.</i>). However adding another layer of indirection and scattering the pigeons throughout the memory instead of keeping them in a consecutive memory area for no real reason will deteriorate performance, not enhance it."}, {"owner": {"reputation": 112, "user_id": 10469457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bd0fd6e7af6122221a47cd5e87e6f8c?s=128&d=identicon&r=PG&f=1", "display_name": "kara", "link": "https://stackoverflow.com/users/10469457/kara"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1542845751, "post_id": 53421557, "comment_id": 93718983, "body": "I am student actually not C++ expert of course. But I thought it is efficient because assume you have two of 1 Gb objects and you want to change the order of the objects. Vector without pointers you should rewrite the minimum 2gb of data. With pointers you should just rewrite some bytes. This is my opinion, of course, I prefer using pointers."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 2, "creation_date": 1542846652, "post_id": 53421557, "comment_id": 93719198, "body": "If copying objects is very expensive, don&#39;t copy. There are better ways like having a collection of indexes around that you reorder instead of the objects in the vector. Maybe use a <code>std::list&lt;std::unique_ptr&lt;pigeon&gt;&gt;</code>."}], "tags": [], "owner": {"reputation": 112, "user_id": 10469457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bd0fd6e7af6122221a47cd5e87e6f8c?s=128&d=identicon&r=PG&f=1", "display_name": "kara", "link": "https://stackoverflow.com/users/10469457/kara"}, "is_accepted": false, "score": 0, "last_activity_date": 1542840759, "creation_date": 1542840759, "answer_id": 53421557, "question_id": 53421184, "link": "https://stackoverflow.com/questions/53421184/how-to-make-a-dynamic-storage-of-objects-c/53421557#53421557", "title": "How to make a dynamic storage of objects (c++)", "body": "<p>Make vector with pointer of your class:</p>\n\n<pre><code>std::vector&lt;pigeon*&gt; pigeons;\n</code></pre>\n\n<p>Then allocate new pigeon object and push it into your vector:</p>\n\n<pre><code>pigeon * pig = new pigeon(\"pigeon\");\npigeons.push_back(pig);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": true, "score": 1, "last_activity_date": 1542844300, "last_edit_date": 1542844300, "creation_date": 1542843544, "answer_id": 53421965, "question_id": 53421184, "link": "https://stackoverflow.com/questions/53421184/how-to-make-a-dynamic-storage-of-objects-c/53421965#53421965", "title": "How to make a dynamic storage of objects (c++)", "body": "<p>As it was already pointed out in the comments, you should preferably use a container that handles its resources following the <a href=\"https://en.wikipedia.org/wiki/Resource_acquisition_is_initialization\" rel=\"nofollow noreferrer\">RAII/RDID-idiom</a> ( \"Resource Acquisition Is Initialisation\" / \"Resource Destruction is Deletion\") so you don't have to worry about it yourself. This is also a simple way of preventing resource leaks when an exception is thrown.</p>\n\n<p>One of the commonly used containers of the C++ standard library is <a href=\"https://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector&lt;&gt;</code></a>.</p>\n\n<p>You'd use it like this (just to give you an initial idea, please refer to the documentation for further explanation and examples):</p>\n\n<pre><code>#include &lt;vector&gt;\n\n// ...\n\n{\n    std::vector&lt;pigeon&gt; pigeons;\n\n    pigeons.push_back(\"Karl\");   // add three pigeons\n    pigeons.push_back(\"Franz\");  // at the end of the\n    pigeons.push_back(\"Xaver\");  // vector\n\n    pigeons[1]; // access \"Franz\"\n\n    for(auto /* maybe const */ &amp;p : pigeons) {  // iterate over the vector\n        // do something with pigeon p\n    }\n\n} // pigeons goes out of scope, its destructor is called which\n  // takes care of deallocating the memory used by the vector.\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 10642778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e035ac5bf5c98f776759d32b5b20917?s=128&d=identicon&r=PG&f=1", "display_name": "NipIsTrue", "link": "https://stackoverflow.com/users/10642778/nipistrue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 53421965, "answer_count": 2, "score": 0, "last_activity_date": 1542844300, "creation_date": 1542838429, "question_id": 53421184, "link": "https://stackoverflow.com/questions/53421184/how-to-make-a-dynamic-storage-of-objects-c", "title": "How to make a dynamic storage of objects (c++)", "body": "<p>I am a beginner to programming and I am trying to find a way to create a dynamic storage of objects of my pigeon class. Here is my code:</p>\n\n<pre><code>class pigeon {\npublic:\n    pigeon(std::string nameI);\n    void outputInfo();\nprivate:\n    std::string name;\n};\n</code></pre>\n\n<p>The idea is that I want to be able to add a new object, have a place to store its information, then be able to add another object, and so on. I have no idea where to start with this or even what data structure to use, I have no experience storing objects.</p>\n"}, {"tags": ["c++", "tensorflow", "deep-learning", "c-api"], "answers": [{"tags": [], "owner": {"reputation": 2310, "user_id": 3656081, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/69071f1a4855e7a35b785ca46e150962?s=128&d=identicon&r=PG&f=1", "display_name": "tangy", "link": "https://stackoverflow.com/users/3656081/tangy"}, "is_accepted": true, "score": 1, "last_activity_date": 1542840899, "last_edit_date": 1542840899, "creation_date": 1542839790, "answer_id": 53421394, "question_id": 53421074, "link": "https://stackoverflow.com/questions/53421074/reshaping-tensor-in-c/53421394#53421394", "title": "Reshaping Tensor in C", "body": "<p>Tensorflow C API operates with a <code>(data,dims)</code> model - treating data as a flat raw array supplied with the needed dimensions.</p>\n\n<p><strong>Step 1</strong>: Allocating a <code>new</code> Tensor</p>\n\n<p>Have a look at <code>TF_AllocateTensor</code>(<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/c/c_api.h#L248\" rel=\"nofollow noreferrer\">ref</a>):</p>\n\n<pre><code>TF_CAPI_EXPORT extern TF_Tensor* TF_AllocateTensor(TF_DataType,\n                                                   const int64_t* dims,\n                                                   int num_dims, size_t len);\n</code></pre>\n\n<p>Here: </p>\n\n<ol>\n<li><code>TF_DataType</code>: The <code>TF</code> equivalent of the data type you need from <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/c/c_api.h#L99\" rel=\"nofollow noreferrer\">here</a>.</li>\n<li><code>dims</code>: Array corresponding to dimensions of tensor to be allocated eg. <code>{1, 1, 80, 80}</code></li>\n<li><code>num_dims</code>: length of dims(<code>4</code> above)</li>\n<li><code>len</code>: reduce(dims, *): i.e. 1*1*80*80*sizeof(DataType) = 6400*sizeof(DataType).</li>\n</ol>\n\n<p><strong>Step 2</strong>: Copying data</p>\n\n<pre><code>// Get the tensor buffer\nauto buff = (DataType *)TF_TensorData(output_of_tf_allocate);\n// std::memcpy() ...\n</code></pre>\n\n<p><a href=\"https://github.com/saatviks/peloton/blob/master/src/brain/util/tf_session_entity/tf_session_entity_input.cpp#L45\" rel=\"nofollow noreferrer\">Here</a> is some sample code from a project I did a while back on writing a very light Tensorflow C-API Wrapper.</p>\n\n<p>So, essentially your reshape will involve allocating your new tensor and copying the data from the original tensor into <code>buff</code>.</p>\n\n<p>The Tensorflow C API isnt meant for regular usage and thus is harder to learn + lacking documentation. I figured a lot of this out with experimentation. Any suggestions from the more experienced developers out there?</p>\n"}], "owner": {"reputation": 117, "user_id": 3858668, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5iUpm.png?s=128&g=1", "display_name": "srishti", "link": "https://stackoverflow.com/users/3858668/srishti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 687, "favorite_count": 4, "accepted_answer_id": 53421394, "answer_count": 1, "score": 1, "last_activity_date": 1542840899, "creation_date": 1542837702, "question_id": 53421074, "link": "https://stackoverflow.com/questions/53421074/reshaping-tensor-in-c", "title": "Reshaping Tensor in C", "body": "<p>How can I reshape TF_Tensor* using Tensorflow's C_api as it's being done in C++?</p>\n\n<pre><code>TensorShape inputShape({1,1,80,80});\n\nTensor inputTensor;\nTensor newTensor;\n\nbool result = inputTensor-&gt;CopyFrom(newTensor, inputShape);\n</code></pre>\n\n<p>I don't see a similar method using the tensorflow's c_api.</p>\n"}, {"tags": ["c++", "lambda", "c++17", "generic-lambda"], "comments": [{"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1542838523, "post_id": 53421055, "comment_id": 93716774, "body": "You seem to be forgetting that a member function needs an object. Once a member function is wrapped with <code>bind</code>, you pass that object as a first argument. Alternatively, make <code>openWallet</code> and <code>middleware</code> static member functions"}], "answers": [{"comments": [{"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1542838788, "post_id": 53421189, "comment_id": 93716872, "body": "Perhaps I&#39;m missing something in this answer, but the middleware function is not getting called here - the output is <code>request</code>, not <code>request - from the middleware</code>."}, {"owner": {"reputation": 1098, "user_id": 6497438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95d4986f27a3f0a255bf095e3b1fd3de?s=128&d=identicon&r=PG&f=1", "display_name": "evan", "link": "https://stackoverflow.com/users/6497438/evan"}, "reply_to_user": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1542839528, "post_id": 53421189, "comment_id": 93717120, "body": "You&#39;re right. I missed the part about going through middleware... Updated my answer."}, {"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1542840223, "post_id": 53421189, "comment_id": 93717330, "body": "I quite like this one as we don&#39;t have to specify the std::bind in the router call, keeping it a bit cleaner. Thanks!"}], "tags": [], "owner": {"reputation": 1098, "user_id": 6497438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95d4986f27a3f0a255bf095e3b1fd3de?s=128&d=identicon&r=PG&f=1", "display_name": "evan", "link": "https://stackoverflow.com/users/6497438/evan"}, "is_accepted": true, "score": 2, "last_activity_date": 1542840056, "last_edit_date": 1542840056, "creation_date": 1542838457, "answer_id": 53421189, "question_id": 53421055, "link": "https://stackoverflow.com/questions/53421055/implementing-middleware-function-using-member-functions-with-lambdas-bind/53421189#53421189", "title": "Implementing middleware function using member functions with lambdas/bind", "body": "<p>Your router function needs to return a function that will call the specified member function with a specific instance of the class.</p>\n\n<pre><code>void dispatch()\n{\n    const auto router = [this](auto function) {\n        return std::bind(function, this, _1, _2);\n    };\n\n    Post(\"/wallet/open\", router(&amp;ApiDispatcher::openWallet));\n}\n</code></pre>\n\n<p>Or, and I missed this originally, to route everything through the middleware function, easiest I could find was.</p>\n\n<pre><code>void dispatch()\n{\n    const auto router = [this](auto function) {\n        return [this, function](auto a, auto b) {\n            middleware(a, b, std::bind(function, this, _1, _2));\n        };\n    };\n\n    Post(\"/wallet/open\", router(&amp;ApiDispatcher::openWallet));\n}\n</code></pre>\n\n<p>Or, if you'd rather use bind, then you'll have to force the inner bind to be a function first, and do.</p>\n\n<pre><code>void dispatch()\n{\n    const auto router = [this](auto function) {\n        std::function&lt;void(std::string, std::string)&gt; func = std::bind(function, this, _1, _2);\n        return std::bind(&amp;ApiDispatcher::middleware, this, _1, _2, func);\n    };\n\n    Post(\"/wallet/open\", router(&amp;ApiDispatcher::openWallet));\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1542839148, "post_id": 53421255, "comment_id": 93716995, "body": "This works great, thank you! Is it possible to extract some of the logic into a separate function? I&#39;m not sure if I prefer this method or the bind method I was using - both aren&#39;t great readability wise, unfortunately."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "reply_to_user": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1542839252, "post_id": 53421255, "comment_id": 93717033, "body": "Most likely, I&#39;m not entirely sure what you mean though. Extract which part?"}, {"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1542839451, "post_id": 53421255, "comment_id": 93717092, "body": "I want to make quite a few Post() calls, so I&#39;m wanting the second argument to be as lightweight as possible. something like <code>Post(&quot;&#47;wallet&#47;open&quot;, router(openWallet))</code> would be best, where the router function handles the nested lambdas we&#39;re using here. I can&#39;t figure out how to pass a member function (openWallet) to router without doing the lambda inline."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "reply_to_user": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1542839802, "post_id": 53421255, "comment_id": 93717204, "body": "At the very least you would have to change the <code>router</code> call to also take the pointer to the object on which to call <code>openWallet</code>. Something like <code>router(&quot;&#47;wallet&#47;open&quot;, router(this, &amp;ApiDispatcher::openWallet);</code>."}, {"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1542840172, "post_id": 53421255, "comment_id": 93717319, "body": "Not sure how that would work - We could pass the this argument, along with the function, but how would we call the function on the specific class instance? Perhaps with a function pointer, somehow?"}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "reply_to_user": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1542841236, "post_id": 53421255, "comment_id": 93717643, "body": "@Zpalmtree An edit to show an example of how it could be done. It feels a bit strange to me though instinctively since <code>this</code> is pre-captured in <code>dispatch</code> and then used on the pointer passed in later. But for the code shown it is safe."}], "tags": [], "owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "is_accepted": false, "score": 2, "last_activity_date": 1542841060, "last_edit_date": 1542841060, "creation_date": 1542838880, "answer_id": 53421255, "question_id": 53421055, "link": "https://stackoverflow.com/questions/53421055/implementing-middleware-function-using-member-functions-with-lambdas-bind/53421255#53421255", "title": "Implementing middleware function using member functions with lambdas/bind", "body": "<p>I find it easier to reason with lambdas, and from what I understand they are to be prefered over <code>std::bind</code> for performance reasons.</p>\n\n<pre><code>void dispatch()\n{\n    Post(\"/wallet/open\", [&amp;](std::string req_1, std::string res_1){\n        middleware(req_1, res_1, [&amp;](std::string req_2, std::string res_2){\n            openWallet(req_2, res_2);\n        });\n    });\n}\n</code></pre>\n\n<p>Each call to a member function is wrappen in a lambda here.\nYou should probably be using <code>const std::string&amp;</code> as arguments to avoid copies for all the calls.</p>\n\n<p>Another thing to point out for performance. As long as you are only forwarding function calls (you are not storing the callable for later use) you can change <code>middleware</code> and <code>Post</code> to templates. The callable would be the template parameter and you will not have to pay the overhead of <code>std::function</code>.</p>\n\n<pre><code>template &lt;typename F&gt;\nvoid middleware(std::string req, std::string res, F handler)\n{\n    // do some processing\n    handler(req + \" - from the middleware\", res);\n}\n\ntemplate &lt;typename F&gt;\nvoid Post(std::string method, F f)\n{\n    // wait for a http request\n    f(\"request\", \"response\");\n}\n</code></pre>\n\n<p><strong>Edit</strong></p>\n\n<p>To extract some of the logic in the way I think you mean, you pass a pointer-to-member-function.</p>\n\n<pre><code>void dispatch()\n{\n    auto const router = [&amp;](auto m_fptr) {\n        return [&amp;, m_fptr](std::string req, std::string res) {\n            middleware(req, res, [&amp;](std::string req_2, std::string res_2) {\n                (this-&gt;*m_fptr)(req_2, res_2);\n            });\n        };\n    };\n\n    Post(\"/wallet/open\", router(&amp;ApiDispatcher::openWallet));\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 1, "last_activity_date": 1542839939, "last_edit_date": 1542839939, "creation_date": 1542839426, "answer_id": 53421346, "question_id": 53421055, "link": "https://stackoverflow.com/questions/53421055/implementing-middleware-function-using-member-functions-with-lambdas-bind/53421346#53421346", "title": "Implementing middleware function using member functions with lambdas/bind", "body": "<p>Not sure... but seems to me that your idea was writing this or something similar</p>\n\n<pre><code>    const auto router = [this](auto function)\n    {\n        std::function&lt;void(std::string req, std::string res)&gt; fn\n           = std::bind(function, this, _1, _2);\n        return std::bind(&amp;ApiDispatcher::middleware, this, _1, _2, fn);\n    };\n</code></pre>\n\n<p>But I suggest to follow the lambda-inside-lambda solution proposed by super.</p>\n"}, {"comments": [{"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1542839592, "post_id": 53421349, "comment_id": 93717133, "body": "Perfect! I knew there was a missing <code>this</code> somewhere, but wasn&#39;t sure where to put it. This is exactly what I was looking for."}, {"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1542839749, "post_id": 53421349, "comment_id": 93717191, "body": "I&#39;ve gotten pretty used to using <code>auto</code> in lambda&#39;s with C++17, as I find it makes my code much more readable - I wasn&#39;t aware it could break conversions like this."}, {"owner": {"reputation": 10521, "user_id": 1316462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de3149d5f602449f41083ca17a5ceab?s=128&d=identicon&r=PG&f=1", "display_name": "Jans", "link": "https://stackoverflow.com/users/1316462/jans"}, "reply_to_user": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1542840224, "post_id": 53421349, "comment_id": 93717331, "body": "Yeah, You can keep the <code>auto</code> but still need to trigger the implicit conversion before the second <code>std::bind</code> ... (check the edit)."}], "tags": [], "owner": {"reputation": 10521, "user_id": 1316462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de3149d5f602449f41083ca17a5ceab?s=128&d=identicon&r=PG&f=1", "display_name": "Jans", "link": "https://stackoverflow.com/users/1316462/jans"}, "is_accepted": false, "score": 1, "last_activity_date": 1542850542, "last_edit_date": 1542850542, "creation_date": 1542839444, "answer_id": 53421349, "question_id": 53421055, "link": "https://stackoverflow.com/questions/53421055/implementing-middleware-function-using-member-functions-with-lambdas-bind/53421349#53421349", "title": "Implementing middleware function using member functions with lambdas/bind", "body": "<p>The root of the problem is because of the parameter on the <code>router</code> lambda and how the <code>std::bind</code> inside the the lambda will interpret it.</p>\n\n<p>let assume  that you've fixed the call to <code>router</code> inside <code>dispatch</code>, replacing:</p>\n\n<pre><code>Post(\"/wallet/open\", router(&amp;ApiDispatcher::openWallet));\n</code></pre>\n\n<p>by the appropriate form:</p>\n\n<pre><code>Post(\"/wallet/open\", router(std::bind(&amp;ApiDispatcher::openWallet, this, _1, _2)));\n</code></pre>\n\n<p>then by <a href=\"https://en.cppreference.com/w/cpp/utility/functional/bind#Member_function_operator.28.29\" rel=\"nofollow noreferrer\">cppreference</a>, the <code>function</code> parameter of the lambda <code>router</code> will be deduced to be a bind expression and as consequence the <code>std::bind</code> inside <code>router</code> will see that this parameter satisfy <code>std::is_bind_expression&lt;T&gt;::value == true</code> and no conversion to <code>std::function</code> will be attempted when invoking <code>middleware</code>.</p>\n\n<p>To fix it you need to specify explicitly the type of <code>function</code> parameter on <code>router</code> lambda, as:</p>\n\n<pre><code>const auto router = [this](std::function&lt;void(std::string req, std::string res)&gt; function)\n{\n    return std::bind(&amp;ApiDispatcher::middleware, this, _1, _2, function);\n};\n</code></pre>\n\n<p>Doing it this way the implicit conversion of </p>\n\n<pre><code>std::bind(&amp;ApiDispatcher::openWallet, this, _1, _2)\n</code></pre>\n\n<p>to <code>std::function</code> takes place before calling </p>\n\n<pre><code>std::bind(&amp;ApiDispatcher::middleware, this, _1, _2, function)\n</code></pre>\n\n<p>or alternatively you keep the <code>auto</code>, and trigger the implicit conversion inside the lambda:</p>\n\n<pre><code>const auto router = [this](auto function)\n{\n    std::function&lt;void(std::string req, std::string res)&gt; func = function;\n    return std::bind(&amp;ApiDispatcher::middleware, this, _1, _2, func);\n};\n</code></pre>\n"}], "owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 53421189, "answer_count": 4, "score": 4, "last_activity_date": 1542850542, "creation_date": 1542837605, "last_edit_date": 1542839699, "question_id": 53421055, "link": "https://stackoverflow.com/questions/53421055/implementing-middleware-function-using-member-functions-with-lambdas-bind", "title": "Implementing middleware function using member functions with lambdas/bind", "body": "<p>I have a function, <code>Post()</code>, that takes two arguments - a <code>std::string</code> path to listen for requests on, and a <code>std::function&lt;void(Request &amp;, Response &amp;)&gt;</code> to handle an incoming request. Note that I can't modify <code>Post()</code>.</p>\n\n<p>For example:</p>\n\n<pre><code>m_server.Post(\"/wallet/open\", [this](auto req, auto res)\n{\n    std::cout &lt;&lt; req.body &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I'm trying to pass the request through a middleware function, and then forward on to the handler function. </p>\n\n<p>The handler function and the middleware function are member functions. The setup of the Post() binding takes place within a member function of the same class.</p>\n\n<p>This works:</p>\n\n<pre><code>m_server.Post(\"/wallet/open\", [this](auto req, auto res){\n    auto f = std::bind(&amp;ApiDispatcher::openWallet, this, _1, _2);\n    middleware(req, res, f);\n});\n</code></pre>\n\n<p>However, I'm hooking up a reasonable amount of requests, and it would be nice to abstract this into a function, so we can just call, for example</p>\n\n<p><code>m_server.Post(\"/wallet/open\", router(openWallet));</code></p>\n\n<p>I managed to get something like this working, but I can't figure out how to make it work when using member functions. This works great if everything is a free function:</p>\n\n<pre><code>const auto router = [](auto function)\n{\n    return std::bind(middleware, _1, _2, function);\n};\n\nm_server.Post(\"/wallet/open\", router(openWallet))\n        .Post(\"/wallet/keyimport\", router(keyImportWallet))\n        .Post(\"/wallet/seedimport\", router(seedImportWallet))\n        .Post(\"/wallet/viewkeyimport\", router(importViewWallet))\n        .Post(\"/wallet/create\", router(createWallet))\n</code></pre>\n\n<p>However, my attempt to get it working for member functions doesn't work, and I can't really figure out what the error message is telling me:</p>\n\n<pre><code>const auto router = [](auto function)\n{\n    return std::bind(&amp;ApiDispatcher::middleware, _1, _2, function);\n};\n\nm_server.Post(\"/wallet/open\", router(&amp;ApiDispatcher::openWallet))\n        .Post(\"/wallet/keyimport\", router(&amp;ApiDispatcher::keyImportWallet))\n        .Post(\"/wallet/seedimport\", router(&amp;ApiDispatcher::seedImportWallet))\n        .Post(\"/wallet/viewkeyimport\", router(&amp;ApiDispatcher::importViewWallet))\n        .Post(\"/wallet/create\", router(&amp;ApiDispatcher::createWallet))\n</code></pre>\n\n<p>The router function by itself works. I think the issue is I'm not calling the handler functions on <code>this</code>. I tried doing this instead: </p>\n\n<pre><code>m_server.Post(\"/wallet/open\", router(std::bind(&amp;ApiDispatcher::openWallet, this, _1, _2)));\n</code></pre>\n\n<p>But then I get an error about \"Wrong number of arguments for pointer-to-member\".</p>\n\n<p>Here's a minimal example to replicate the problem:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;functional&gt;\n\nusing namespace std::placeholders;\n\nclass ApiDispatcher\n{\n    public:\n        void middleware(std::string req, std::string res, std::function&lt;void(std::string req, std::string res)&gt; handler)\n        {\n            // do some processing\n            handler(req + \" - from the middleware\", res);\n        }\n\n        void dispatch()\n        {\n            const auto router = [](auto function)\n            {\n                return std::bind(&amp;ApiDispatcher::middleware, _1, _2, function);\n            };\n\n            /* Uncommenting this line breaks compilation */\n            // Post(\"/wallet/open\", router(&amp;ApiDispatcher::openWallet));\n        }\n\n        void openWallet(std::string req, std::string res)\n        {\n            std::cout &lt;&lt; req &lt;&lt; std::endl;\n        }\n\n        void Post(std::string method, std::function&lt;void(std::string req, std::string res)&gt; f)\n        {\n            // wait for a http request\n            f(\"request\", \"response\");\n        }    \n};\n\nint main()\n{\n    ApiDispatcher server;\n    server.dispatch();\n}\n</code></pre>\n\n<p>Thanks. Sorry the post was so long.</p>\n"}, {"tags": ["c++", "v8", "embedded-v8"], "answers": [{"comments": [{"owner": {"reputation": 1606, "user_id": 6060256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FTSYI.jpg?s=128&g=1", "display_name": "informaticienzero", "link": "https://stackoverflow.com/users/6060256/informaticienzero"}, "edited": false, "score": 1, "creation_date": 1556809468, "post_id": 53429918, "comment_id": 98562397, "body": "Thanks for your answer. It was a good clue to fix my problem. ;)"}], "tags": [], "owner": {"reputation": 11066, "user_id": 1461984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fd6ae6b70c8a0b9eab9cab7136cd3b7?s=128&d=identicon&r=PG", "display_name": "pinepain", "link": "https://stackoverflow.com/users/1461984/pinepain"}, "is_accepted": false, "score": 1, "last_activity_date": 1542885912, "creation_date": 1542885912, "answer_id": 53429918, "question_id": 53421030, "link": "https://stackoverflow.com/questions/53421030/v8-functiontemplategetfunction-crashes-with-access-violation/53429918#53429918", "title": "v8 FunctionTemplate::GetFunction() crashes with Access Violation", "body": "<p>To <code>GetFunction</code> you need to have <code>Context</code> and enter it. Depends on what v8 version you use, there are methods which require <code>Isolate</code> and <code>Context</code> be passed explicitly. In general, this is what v8 internally moves to - to pass <code>Isolate</code> and <code>Context</code> to methods that require that (there couldb some inconsistency, though).</p>\n"}], "owner": {"reputation": 143, "user_id": 1928604, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0cd4b5f2c784e8e5bfa35c06594ab813?s=128&d=identicon&r=PG", "display_name": "\u0141ukasz Stalmach", "link": "https://stackoverflow.com/users/1928604/%c5%81ukasz-stalmach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 327, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542885912, "creation_date": 1542837453, "question_id": 53421030, "link": "https://stackoverflow.com/questions/53421030/v8-functiontemplategetfunction-crashes-with-access-violation", "title": "v8 FunctionTemplate::GetFunction() crashes with Access Violation", "body": "<p>I have a really simple method that initializes v8, I am unable to track the reason (other v8 stuff works just fine):</p>\n\n<pre><code>void JavascriptEngine::init() {\n    m_platform = v8::platform::NewDefaultPlatform();\n\n    v8::V8::InitializeExternalStartupData(\".\");\n\n    v8::V8::InitializeICU();\n    v8::V8::InitializePlatform(&amp;*m_platform);\n    v8::V8::Initialize();\n\n    v8::Isolate::CreateParams create_params;\n    create_params.array_buffer_allocator = \n        v8::ArrayBuffer::Allocator::NewDefaultAllocator();\n    m_isolate = v8::Isolate::New(create_params);\n\n    v8::Isolate::Scope isolate_scope(m_isolate);\n    v8::HandleScope handle_scope(m_isolate);\n\n    m_context = make_unique&lt;v8::Persistent&lt;v8::Context&gt;&gt;(m_isolate, \n        create_new_context());\n\n    v8::Local&lt;v8::FunctionTemplate&gt; t = v8::FunctionTemplate::New(m_isolate);\n    t-&gt;SetClassName(v8::String::NewFromUtf8(m_isolate, \"Test\", v8::NewStringType::kNormal).ToLocalChecked());\n    t-&gt;Set(m_isolate, \"func_property\", v8::Number::New(m_isolate, 1));\n\n    auto f = t-&gt;GetFunction(); // CRASH\n\n    ...//rest of the code\n}\n</code></pre>\n\n<p>Error I got:</p>\n\n<pre><code>Exception thrown: read access violation.\n**this** was nullptr.\n</code></pre>\n\n<p>Using Visual Studio 2017. What am I missing?</p>\n"}, {"tags": ["c++", "arrays", "text"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1542836834, "post_id": 53420911, "comment_id": 93716222, "body": "What&#39;s the point of <code>while (input &gt;&gt; number)</code>? Why do you have both a <code>while</code> loop and a <code>for</code> loop? It&#39;s hard to understand why your code does what it does because there are no comments."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1542836931, "post_id": 53420911, "comment_id": 93716245, "body": "&quot;So I have two simple questions&quot; - then you should ask <i>two</i> individual questions."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1542837107, "post_id": 53420911, "comment_id": 93716315, "body": "Why are you using C-style arrays where you have to worry about passing their size instead of using <code>std::array</code>s or <code>std::vector</code>s that know their <code>.size()</code>?"}, {"owner": {"reputation": 1899, "user_id": 8854921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b76055b306b4dbab08ee558957f52e?s=128&d=identicon&r=PG&f=1", "display_name": "Bo R", "link": "https://stackoverflow.com/users/8854921/bo-r"}, "edited": false, "score": 0, "creation_date": 1542837250, "post_id": 53420911, "comment_id": 93716361, "body": "You pass an array that holds 91 elements, thus 92 is technically out of the question :-). Your for-loop collects 91 elements! But you waste first line on the while-loop. If your input has 92 numbers, then the while loop is gone thru only once."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1542837338, "post_id": 53420911, "comment_id": 93716390, "body": "Your <code>getTempData</code> function can fall out the end without returning a value. That&#39;s Undefined Behaviour. Don&#39;t do that."}, {"owner": {"reputation": 5, "user_id": 10687950, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GPYXUszIRyc/AAAAAAAAAAI/AAAAAAAAFhw/UpwchbTo3Uw/photo.jpg?sz=128", "display_name": "Moose", "link": "https://stackoverflow.com/users/10687950/moose"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1542837800, "post_id": 53420911, "comment_id": 93716546, "body": "@JesperJuhl I did sense there were better ways to do it, but it&#39;s for an assignment so I assume there&#39;s some benefit in learning it the harder way"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1542837891, "post_id": 53420911, "comment_id": 93716577, "body": "@Moose Only if you want to stay in the past and write C++ like we did in the bad old days, 20 years ago. My guess is; your teacher is just not up-to-date with modern C++ (17, or 14 if you must)."}, {"owner": {"reputation": 5, "user_id": 10687950, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GPYXUszIRyc/AAAAAAAAAAI/AAAAAAAAFhw/UpwchbTo3Uw/photo.jpg?sz=128", "display_name": "Moose", "link": "https://stackoverflow.com/users/10687950/moose"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1542838388, "post_id": 53420911, "comment_id": 93716722, "body": "@JesperJuhl Ah that&#39;s really unfortunate! My teacher seems competent, but I guess he has to follow the book/curriculum. And also, thanks for the advice about the function, we were told to use to make it void, but I thought using if (!input) was better than what we were taught. I still have a lot to learn obviously."}, {"owner": {"reputation": 5, "user_id": 10687950, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GPYXUszIRyc/AAAAAAAAAAI/AAAAAAAAFhw/UpwchbTo3Uw/photo.jpg?sz=128", "display_name": "Moose", "link": "https://stackoverflow.com/users/10687950/moose"}, "reply_to_user": {"reputation": 1899, "user_id": 8854921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b76055b306b4dbab08ee558957f52e?s=128&d=identicon&r=PG&f=1", "display_name": "Bo R", "link": "https://stackoverflow.com/users/8854921/bo-r"}, "edited": false, "score": 0, "creation_date": 1542838532, "post_id": 53420911, "comment_id": 93716778, "body": "@BoR Hahaha techinically out of the question was great. I&#39;m getting the 0-91 confused, so thanks for the clarification."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1542838631, "post_id": 53420911, "comment_id": 93716813, "body": "@Moose If you declare a function to return a type ( <code>int</code> in this case), then it <i>must</i> return that type on <i>all</i> paths."}, {"owner": {"reputation": 5, "user_id": 10687950, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GPYXUszIRyc/AAAAAAAAAAI/AAAAAAAAFhw/UpwchbTo3Uw/photo.jpg?sz=128", "display_name": "Moose", "link": "https://stackoverflow.com/users/10687950/moose"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1542838751, "post_id": 53420911, "comment_id": 93716857, "body": "@Jesper Juhl That makes sense, I assumed it just had to return something. Didn&#39;t realize there were differnet paths. Thanks, I&#39;m learning a lot."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 10687950, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GPYXUszIRyc/AAAAAAAAAAI/AAAAAAAAFhw/UpwchbTo3Uw/photo.jpg?sz=128", "display_name": "Moose", "link": "https://stackoverflow.com/users/10687950/moose"}, "edited": false, "score": 0, "creation_date": 1542837129, "post_id": 53420949, "comment_id": 93716322, "body": "Ohh okay, that makes sense. Thanks so much. I got it from here <a href=\"https://www.reddit.com/r/learnprogramming/comments/2wwv6i/c_creating_writing_to_and_displaying_text_files/\" rel=\"nofollow noreferrer\">reddit.com/r/learnprogramming/comments/2wwv6i/&hellip;</a> and I clearly don&#39;t understand it well. Also, it seems to work by returning 1, but I don&#39;t know."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 5, "user_id": 10687950, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GPYXUszIRyc/AAAAAAAAAAI/AAAAAAAAFhw/UpwchbTo3Uw/photo.jpg?sz=128", "display_name": "Moose", "link": "https://stackoverflow.com/users/10687950/moose"}, "edited": false, "score": 1, "creation_date": 1542837455, "post_id": 53420949, "comment_id": 93716427, "body": "@Moose Piece of advice: Do not ever use code you don&#39;t understand unless you are very, very experienced. That is a very difficult thing to do and if you&#39;re thinking it&#39;s some kind of shortcut to having to figure things out for yourself, you&#39;re <i>very</i> wrong. If you want to use code someone else wrote and you are not an experienced coder, you <i>must</i> thoroughly understand what it does and how it does it."}, {"owner": {"reputation": 5, "user_id": 10687950, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GPYXUszIRyc/AAAAAAAAAAI/AAAAAAAAFhw/UpwchbTo3Uw/photo.jpg?sz=128", "display_name": "Moose", "link": "https://stackoverflow.com/users/10687950/moose"}, "edited": false, "score": 0, "creation_date": 1542838625, "post_id": 53420949, "comment_id": 93716811, "body": "Throughly understand is the key word. I thought I understood what that code was doing, but I was completely off. And now I undertand your previous comment about returning something if everything is well."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1542837379, "last_edit_date": 1542837379, "creation_date": 1542837003, "answer_id": 53420949, "question_id": 53420911, "link": "https://stackoverflow.com/questions/53420911/unable-to-have-function-properly-populate-array-from-text-file-seems-to-skip-fi/53420949#53420949", "title": "Unable to have function properly populate array from text file, seems to skip first line/be one off", "body": "<pre><code>while (input &gt;&gt; number)\n</code></pre>\n\n<p>This reads the first number and throws it away. Simply remove this line of code.</p>\n\n<p>Also, you should probably add error checking to <code>input &gt;&gt; temperatures[i];</code>. And your function needs to return something if all is well -- currently there is no <code>return</code> statement at the end. Also, your loop only collects 91 elements.</p>\n"}, {"tags": [], "owner": {"reputation": 1899, "user_id": 8854921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b76055b306b4dbab08ee558957f52e?s=128&d=identicon&r=PG&f=1", "display_name": "Bo R", "link": "https://stackoverflow.com/users/8854921/bo-r"}, "is_accepted": true, "score": 0, "last_activity_date": 1542837903, "creation_date": 1542837903, "answer_id": 53421105, "question_id": 53420911, "link": "https://stackoverflow.com/questions/53420911/unable-to-have-function-properly-populate-array-from-text-file-seems-to-skip-fi/53421105#53421105", "title": "Unable to have function properly populate array from text file, seems to skip first line/be one off", "body": "<p>What you are trying to achieve seems to boil down to this:</p>\n\n<pre><code>#include &lt;fstream&gt;\n\nint getTempData(double temperatures[]) {\n    std::ifstream input(\"pgm6.txt\");\n\n    int i;\n    for (i = 0; i &lt; 92 &amp;&amp; input &gt;&gt; temperatures[i]; i++) {\n        // deliberate empty line\n    }\n    // input will close file on exiting function\n    return i; // returns number of elements found\n}\n\n\nint main() {\n    const int ARRAY_SIZE = 92;\n    double temperatures[ARRAY_SIZE];\n    getTempData(temperatures);\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 10687950, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GPYXUszIRyc/AAAAAAAAAAI/AAAAAAAAFhw/UpwchbTo3Uw/photo.jpg?sz=128", "display_name": "Moose", "link": "https://stackoverflow.com/users/10687950/moose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 53421105, "answer_count": 2, "score": 0, "last_activity_date": 1542837903, "creation_date": 1542836773, "last_edit_date": 1542837694, "question_id": 53420911, "link": "https://stackoverflow.com/questions/53420911/unable-to-have-function-properly-populate-array-from-text-file-seems-to-skip-fi", "title": "Unable to have function properly populate array from text file, seems to skip first line/be one off", "body": "<p>So I have two simple questions. One is my function okay for reading a text file composed of one number on each line and passing it an array inside main()? And is the text file opening/closing properly or do I not understand the code? </p>\n\n<p>And secondly, I can't seem to fill my array correctly. There's 92 numbers/lines, but I can only seem to get 91 elements. It seems to skip the first number, but I'm not sure why. When I'm debugging I can see \"number\" reading the the first line, but I don't know where it goes.</p>\n\n<p>The text file is 92 numbers with decimals, with a number in each line like this..and the first number is in the first line, no space above and no vertical space between the numbers.</p>\n\n<p>31.11</p>\n\n<p>25.22\n... </p>\n\n<pre><code>int getTempData(double temperatures[]) {\n\n    ifstream input(\"pgm6.txt\");\n\n    if (!input) \n        return 1; // closes input file\n\n    string number;\n\n    while (input &gt;&gt; number)\n\n        for (int i = 0; i &lt; 91; i++)\n\n        {\n            input &gt;&gt; temperatures[i];\n        }\n}\n</code></pre>\n\n<p>and inside main()</p>\n\n<pre><code>const int ARRAY_SIZE = 91;\ndouble temperatures[ARRAY_SIZE];\ngetTempData(temperatures);\n</code></pre>\n\n<p>Edit: Thanks so much for the help everyone. I learned my lesson in not using code I don't quite understand from here: <a href=\"https://www.reddit.com/r/learnprogramming/comments/2wwv6i/c_creating_writing_to_and_displaying_text_files/\" rel=\"nofollow noreferrer\">https://www.reddit.com/r/learnprogramming/comments/2wwv6i/c_creating_writing_to_and_displaying_text_files/</a></p>\n\n<pre><code>#include &lt;fstream&gt; // Instead of &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std; // Nothing too much wrong with this...\nint main() {\n\n    ifstream input(\"input.txt\"); // Open the file \"input.txt\" for reading \n    (if = input file)\n\n    if ( !input ) // Did the file open correctly?\n    return 1;\n\n    ifstream output(\"output.txt\"); // Open the file \"output.txt\" for writing \n    (of = output file)\n\n    if ( !output ) // Did the file open correctly?\n    return 1; // C++ automatically closes the input file!\n\n    string word;\n\n    **while ( input &gt;&gt; word )** // Read a word while the file isn't at its \n      end\n\n    output &lt;&lt; word &lt;&lt; '\\n'; // Write the word on its own line\n\n    // C++ automatically closes the output file\n   // C++ automatically closes the input file\n}\n</code></pre>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "edited": false, "score": 0, "creation_date": 1542835903, "post_id": 53420654, "comment_id": 93715860, "body": "Address 0x100. If I add an offset of 0x5 to this address, what is the resulting address?"}, {"owner": {"reputation": 1, "user_id": 10688037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e60a5b89e3385a05a7f4d2d0d22934?s=128&d=identicon&r=PG&f=1", "display_name": "Massimo Di Stasi", "link": "https://stackoverflow.com/users/10688037/massimo-di-stasi"}, "edited": false, "score": 0, "creation_date": 1542835944, "post_id": 53420654, "comment_id": 93715884, "body": "MPops did anyone answer the question cause if they did could you maybe link it."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1542836153, "post_id": 53420654, "comment_id": 93715954, "body": "An offset is just a value added to the original address. Like; if the original address is 100 and the offset is 42, the resulting address is 142. What part of that do you not understand?"}, {"owner": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "edited": false, "score": 0, "creation_date": 1542836571, "post_id": 53420654, "comment_id": 93716119, "body": "@MassimoDiStasi Unfortunately, I&#39;m not gonna use up more of my time to look for that. However, have you given thought to the question I gave you? If you can answer that, I&#39;m sure you will be able to solve this larger problem yourself! You can do it! :)"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "edited": false, "score": 0, "creation_date": 1542836610, "post_id": 53420654, "comment_id": 93716131, "body": "@MPops than just close this one as a duplicate?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1542836878, "post_id": 53420654, "comment_id": 93716234, "body": "Looks like a similar problem has been asked for over the years.  Something in <a href=\"https://stackoverflow.com/search?q=AmmoOffsets\">this search</a> might help you."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1542840306, "post_id": 53420654, "comment_id": 93717355, "body": "Hacking other processes memory is not a trivial task. Even if you get the math right, you may still be looking in the wrong spot. Programs (and operating systems) that want to make these sorts of tricks harder move things around. A hard coded offset may only be valid once in a blue moon."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1542837781, "post_id": 53420988, "comment_id": 93716541, "body": "Eeek. C style cast."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1542837939, "post_id": 53420988, "comment_id": 93716590, "body": "Not useful with ReadProcessMemory"}], "tags": [], "owner": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "is_accepted": false, "score": 1, "last_activity_date": 1542837241, "creation_date": 1542837241, "answer_id": 53420988, "question_id": 53420654, "link": "https://stackoverflow.com/questions/53420654/how-do-i-write-to-addresses-with-offsets/53420988#53420988", "title": "How do I write to addresses with offsets?", "body": "<pre><code>uint32_t address = /*some value*/;\nuint32_t offset = /*some value*/;\nuint32_t final_address = address + offset;\nuint32_t result = *(uint32_t*) final_address;\n</code></pre>\n\n<p>This is technically how you access an \"address\" with an \"offset\". Granted, this will likely give you a seg fault 99% of the time, but this is a way to do it.</p>\n"}, {"tags": [], "owner": {"reputation": 2634, "user_id": 8985046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oqc2A.jpg?s=128&g=1", "display_name": "GuidedHacking", "link": "https://stackoverflow.com/users/8985046/guidedhacking"}, "is_accepted": false, "score": 0, "last_activity_date": 1580579838, "creation_date": 1580579838, "answer_id": 60019641, "question_id": 53420654, "link": "https://stackoverflow.com/questions/53420654/how-do-i-write-to-addresses-with-offsets/60019641#60019641", "title": "How do I write to addresses with offsets?", "body": "<p>To get the final address of your pointer chain, the address of the ammo variable you can use this function, then just call WriteProcessMemory on ammoAddr.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>uintptr_t FindDMAAddy(HANDLE hProc, uintptr_t ptr, std::vector&lt;unsigned int&gt; offsets)\n{\n    uintptr_t addr = ptr;\n    for (unsigned int i = 0; i &lt; offsets.size(); ++i)\n    {\n        ReadProcessMemory(hProc, (BYTE*)addr, &amp;addr, sizeof(addr), 0);\n        addr += offsets[i];\n    }\n    return addr;\n}\n\nuintptr_t ammoAddr = FindDMAAddy(hProcess, dynamicPtrBaseAddr, { 0x374, 0x14, 0x0 });\n\nWriteProcessMemory(ProccessHandle, (LPCVOID)ammoAddr, &amp;ModdedAmmo, sizeof(ModdedAmmo), 0);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10688037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e60a5b89e3385a05a7f4d2d0d22934?s=128&d=identicon&r=PG&f=1", "display_name": "Massimo Di Stasi", "link": "https://stackoverflow.com/users/10688037/massimo-di-stasi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1580579838, "creation_date": 1542835432, "last_edit_date": 1542835706, "question_id": 53420654, "link": "https://stackoverflow.com/questions/53420654/how-do-i-write-to-addresses-with-offsets", "title": "How do I write to addresses with offsets?", "body": "<p>I am making an external hack code but I can't(don't know) how to write to a addresses \nEX:0x0471604 \nthat has an offset of 0x14\nIf anyone could be so kind as to teach me I would be ecstatic\nhere's a sample of my code  so Y'all can maybe point out where I went wrong:</p>\n\n<pre><code> #include &lt;iostream&gt;\n #include &lt;string&gt;\n #include &lt;cstring&gt;\n\n #include &lt;Windows.h&gt;\n\n DWORD Ammo = 0x028FA348;\n DWORD AmmoOffsets[] = {0x348,0x14,0x0};\n DWORD PointedAmmo;\n int ModdedAmmo = 1000;\n\n void AmmoMod()\n {\n      HANDLE ProccessHandle = \n      OpenProcess(PROCESS_ALL_ACCESS, FALSE, GameProcessID);\n      ReadProcessMemory(ProccessHandle, (LPCVOID)(Ammo + AmmoOffsets), &amp;PointedAmmo, sizeof(PointedAmmo), 0);\n      WriteProcessMemory(ProccessHandle, (LPCVOID)PointedAmmo, &amp;ModdedAmmo, sizeof(ModdedAmmo), 0);\n }\n</code></pre>\n"}, {"tags": ["c++", "data-structures", "struct"], "comments": [{"owner": {"reputation": 634, "user_id": 4450986, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/NFN4Q.png?s=128&g=1", "display_name": "Pierre-Antoine Guillaume", "link": "https://stackoverflow.com/users/4450986/pierre-antoine-guillaume"}, "edited": false, "score": 7, "creation_date": 1542835538, "post_id": 53420631, "comment_id": 93715713, "body": "Is there a reason for you to use C-style array ? Is there a reason to use raw pointers ?"}, {"owner": {"reputation": 1477, "user_id": 5899776, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/64b8e28377778d1b8ad57198ba46c319?s=128&d=identicon&r=PG&f=1", "display_name": "van dench", "link": "https://stackoverflow.com/users/5899776/van-dench"}, "reply_to_user": {"reputation": 634, "user_id": 4450986, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/NFN4Q.png?s=128&g=1", "display_name": "Pierre-Antoine Guillaume", "link": "https://stackoverflow.com/users/4450986/pierre-antoine-guillaume"}, "edited": false, "score": 0, "creation_date": 1542835612, "post_id": 53420631, "comment_id": 93715747, "body": "@PierreAntoineGuillaume is there a reason not to?"}, {"owner": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "edited": false, "score": 0, "creation_date": 1542835779, "post_id": 53420631, "comment_id": 93715810, "body": "I would try to avoid assigning dynamic pointers to objects whose scope they don&#39;t belong in. This might work as the function you are creating the arrays is <code>main</code>, but if this were ANY other scope, the allocated array would become out of scope as soon as you leave that function/scope/block.  Why not create it dynamically and free it when finished?"}, {"owner": {"reputation": 65, "user_id": 4616785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/731dcba32009722cc4452df5a9357c2b?s=128&d=identicon&r=PG&f=1", "display_name": "NoobestPros", "link": "https://stackoverflow.com/users/4616785/noobestpros"}, "reply_to_user": {"reputation": 634, "user_id": 4450986, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/NFN4Q.png?s=128&g=1", "display_name": "Pierre-Antoine Guillaume", "link": "https://stackoverflow.com/users/4450986/pierre-antoine-guillaume"}, "edited": false, "score": 0, "creation_date": 1542835791, "post_id": 53420631, "comment_id": 93715818, "body": "@PierreAntoineGuillaume the raw pointers will be used for divide and conquer algorithms later. As for C-style arrays, I am not sure what the difference is. I created my arrays like that as a sample"}, {"owner": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "edited": false, "score": 1, "creation_date": 1542835848, "post_id": 53420631, "comment_id": 93715832, "body": "Also, it&#39;s hard to answer this kind of question because you actually have 3/4 questions embedded into 1."}, {"owner": {"reputation": 65, "user_id": 4616785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/731dcba32009722cc4452df5a9357c2b?s=128&d=identicon&r=PG&f=1", "display_name": "NoobestPros", "link": "https://stackoverflow.com/users/4616785/noobestpros"}, "reply_to_user": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "edited": false, "score": 0, "creation_date": 1542835850, "post_id": 53420631, "comment_id": 93715834, "body": "@MPops yes, I plan on later, when I use a divide and conquer method, to allocate memory for those arrays. I assume it&#39;s much better to allocate in main and assign it to the struct like that?"}, {"owner": {"reputation": 634, "user_id": 4450986, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/NFN4Q.png?s=128&g=1", "display_name": "Pierre-Antoine Guillaume", "link": "https://stackoverflow.com/users/4450986/pierre-antoine-guillaume"}, "reply_to_user": {"reputation": 1477, "user_id": 5899776, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/64b8e28377778d1b8ad57198ba46c319?s=128&d=identicon&r=PG&f=1", "display_name": "van dench", "link": "https://stackoverflow.com/users/5899776/van-dench"}, "edited": false, "score": 2, "creation_date": 1542835854, "post_id": 53420631, "comment_id": 93715837, "body": "@vandench I guess so. I think handeling references and stl objects makes a better learning for c++. Memory leaks are definitely an issue in numerous programs because it is a complex problem, linked to hard to understand problems like error handeling. So I&#39;d advice std::vectors and smart pointers instead."}, {"owner": {"reputation": 634, "user_id": 4450986, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/NFN4Q.png?s=128&g=1", "display_name": "Pierre-Antoine Guillaume", "link": "https://stackoverflow.com/users/4450986/pierre-antoine-guillaume"}, "edited": false, "score": 0, "creation_date": 1542836366, "post_id": 53420631, "comment_id": 93716040, "body": "@NoobestPros decide on a question to ask, then ask one at a time. Keep in mind that stack overflow is not designed to learn, but to find a peer-reviewed and state-of-art answer to a detailed question. Try to find some information on these concepts : &quot;c++ references&quot; &quot;STL&quot; &quot;iterator&quot;. an exemple of the implementation would be in there : <a href=\"https://stackoverflow.com/a/28910332/4450986\">stackoverflow.com/a/28910332/4450986</a>, but I don&#39;t know if that&#39;d help you."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 1, "creation_date": 1542836396, "post_id": 53420631, "comment_id": 93716056, "body": "Your edit just broke your question.  It was fine before then.  I was about to comment that yes: it is (was) fine, except overly complicated because you could have just used <code>= { real, imag }</code> since array types are elided to a pointer."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1542836717, "post_id": 53420631, "comment_id": 93716182, "body": "Please use containers and smart pointers in preference over C-style arrays and manual memory management. A naked <code>delete</code> is a <i>major</i> code smell in modern C++."}], "answers": [{"tags": [], "owner": {"reputation": 655, "user_id": 7553580, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oOJ6J4iHCnw/AAAAAAAAAAI/AAAAAAAALkQ/hU3c1g5hLPs/photo.jpg?sz=128", "display_name": "Hal Jarrett", "link": "https://stackoverflow.com/users/7553580/hal-jarrett"}, "is_accepted": false, "score": 1, "last_activity_date": 1542836679, "creation_date": 1542836679, "answer_id": 53420890, "question_id": 53420631, "link": "https://stackoverflow.com/questions/53420631/struct-with-pointers-in-c/53420890#53420890", "title": "Struct with Pointers in C++", "body": "<p>To answer the second part of your question, in the statement:</p>\n\n<pre><code>typedef struct myStruct {\n    //...\n} structType, *ptrToStructType;\n</code></pre>\n\n<p>The resulting type definitions are <code>structType</code>, being shorthand for <code>struct myStruct</code>, and <code>ptrToStructType</code> being short for <code>structType*</code>. Struct identifiers are optional (<code>myStruct</code> in this example, ommited in yours).</p>\n\n<p>See:\n<a href=\"https://stackoverflow.com/questions/7624019/confusion-with-typedef-and-pointers-in-c\">Confusion with typedef and pointers in C</a></p>\n"}, {"tags": [], "owner": {"reputation": 1899, "user_id": 8854921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b76055b306b4dbab08ee558957f52e?s=128&d=identicon&r=PG&f=1", "display_name": "Bo R", "link": "https://stackoverflow.com/users/8854921/bo-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1542839006, "creation_date": 1542839006, "answer_id": 53421280, "question_id": 53420631, "link": "https://stackoverflow.com/questions/53420631/struct-with-pointers-in-c/53421280#53421280", "title": "Struct with Pointers in C++", "body": "<p>To answer the first question, yes you <em>can</em> assign the pointers that way and is correct.  But anybody reviewing the code could be confused.  Thus renaming members and variables it can be a lot clearer.</p>\n\n<p>In assigning complex by first defining it and then assigning the individual members it is clear that don't become mixed as it is easy with direct initialization to assign reals to imaginaries and vice versa.</p>\n\n<pre><code>struct complexnums {\n    float * reals;  // A ptr to array of reals\n    float * imags;  // A ptr to array of imaginarys\n};\n\nint main()\n{\n    float realArray [] = {1.0, 2.0, 3.0, 4.0};\n    float imagArray [] = {0.5, 1.0, 1.5, 2.0};\n\n    complexnums complex;\n    complex.reals = realArray;\n    complex.imags = imagArray;\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 4616785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/731dcba32009722cc4452df5a9357c2b?s=128&d=identicon&r=PG&f=1", "display_name": "NoobestPros", "link": "https://stackoverflow.com/users/4616785/noobestpros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1542839006, "creation_date": 1542835315, "last_edit_date": 1542836695, "question_id": 53420631, "link": "https://stackoverflow.com/questions/53420631/struct-with-pointers-in-c", "title": "Struct with Pointers in C++", "body": "<p>I haven't been brushed up on my Data Structures and I am encountering a problem using structures.</p>\n\n<p>I want to create a structure that will be pointers to values from an array I take from an input file.</p>\n\n<p>Say for example I created a structure here:</p>\n\n<pre><code>struct complexnums {\n    float * real;  //A ptr to real list\n    float * imag;  //A ptr to imag list\n};\n\nint main()\n{\n    //Lets say this is an array I have taken from file input\n    float real [] = {1.0, 2.0, 3.0, 4.0};\n    float imag [] = {0.5, 1.0, 1.5, 2.0};\n\n    //How can I assign the structure ptr's to these arrays?\n    //Do I do it like this?\n    complexnums complex = {&amp;real[0],&amp;imag[0]};\n}\n</code></pre>\n\n<p>Given the example, above is that the correct way to assign the values to it? Will the struct actually get the pointers to those values above?</p>\n\n<p>Also I was looking at a sample of how a struct look like and this person did this.</p>\n\n<pre><code>typedef struct {\n    int sample;\n    int *test1;\n}\nstruct1, *struct2;\n</code></pre>\n\n<p>What is the difference between <code>struct1</code> and <code>struct2</code>?</p>\n\n<p>Sorry and let me know if this is understandable. If not I'll try to edit it the best I can.</p>\n"}, {"tags": ["c++", "sockets", "udp", "3dsmax"], "comments": [{"owner": {"reputation": 4681, "user_id": 6651824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LWsU0.jpg?s=128&g=1", "display_name": "LWimsey", "link": "https://stackoverflow.com/users/6651824/lwimsey"}, "edited": false, "score": 0, "creation_date": 1542834982, "post_id": 53420388, "comment_id": 93715489, "body": "You can use <code>netstat</code> to check whether the UDP port is still opened after the server code was moved."}, {"owner": {"reputation": 114, "user_id": 2373276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ae10a4e25b91a105f949c1acb722f32?s=128&d=identicon&r=PG", "display_name": "A_Kz", "link": "https://stackoverflow.com/users/2373276/a-kz"}, "reply_to_user": {"reputation": 4681, "user_id": 6651824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LWsU0.jpg?s=128&g=1", "display_name": "LWimsey", "link": "https://stackoverflow.com/users/6651824/lwimsey"}, "edited": false, "score": 0, "creation_date": 1542835850, "post_id": 53420388, "comment_id": 93715833, "body": "@LWimsey I&#39;ll check it out. thanks"}, {"owner": {"reputation": 114, "user_id": 2373276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ae10a4e25b91a105f949c1acb722f32?s=128&d=identicon&r=PG", "display_name": "A_Kz", "link": "https://stackoverflow.com/users/2373276/a-kz"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1542835897, "post_id": 53420388, "comment_id": 93715854, "body": "@user4581301 you&#39;re right. I edited the post to avoid more downvotes. Thank you"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1542839460, "post_id": 53420388, "comment_id": 93717098, "body": "Note, after <code>recvfrom()</code> exits, your <code>printf</code> and <code>PushPrompt</code> calls assume the <code>buffer</code> is null-terminated, but that is not guaranteed. You need to take the return value of <code>recvfrom()</code> into account to know how much of the <code>buffer</code> has been filled. Also, your 3DS code should NOT be calling <code>WSAStartup()</code> on every new thread created. Ideally it should be called only once, such as at app startup, or at least when the plugin is loaded. But, if you do call it in every thread, then you need to call <code>WSACleanup()</code> before the thread exits."}, {"owner": {"reputation": 114, "user_id": 2373276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ae10a4e25b91a105f949c1acb722f32?s=128&d=identicon&r=PG", "display_name": "A_Kz", "link": "https://stackoverflow.com/users/2373276/a-kz"}, "edited": false, "score": 0, "creation_date": 1542875274, "post_id": 53420388, "comment_id": 93727483, "body": "So why it works fine as a separate program? In 3Ds code <code>recvfrom</code> always return <code>SOCKET_ERROR</code>. And your mentioned issue will come up only if the plugin is going to get loaded twice or more since it sees the requested port is busy. But basically, it must work once."}, {"owner": {"reputation": 1771, "user_id": 8742287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YDdei.jpg?s=128&g=1", "display_name": "Alex Khoroshylov", "link": "https://stackoverflow.com/users/8742287/alex-khoroshylov"}, "edited": false, "score": 0, "creation_date": 1548463923, "post_id": 53420388, "comment_id": 95563693, "body": "@A_Kz: if this question is still valid, have you adjusted firewall rules for 3dsmax.exe?"}], "owner": {"reputation": 114, "user_id": 2373276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ae10a4e25b91a105f949c1acb722f32?s=128&d=identicon&r=PG", "display_name": "A_Kz", "link": "https://stackoverflow.com/users/2373276/a-kz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1542839125, "creation_date": 1542833926, "last_edit_date": 1542839125, "question_id": 53420388, "link": "https://stackoverflow.com/questions/53420388/c-udp-server-doesnt-receive-packets", "title": "c++ udp server doesn&#39;t receive packets", "body": "<p>I've written a UDP receiver in C++ with a Java client.</p>\n\n<p>The client's receiver IP (C++ server) is set like <code>192.168.1.xxx</code> as server and client are in a private network on different devices.</p>\n\n<p>Everything works just fine.</p>\n\n<p>On another hand. I have a 3ds Max plugin which forks a thread to do some async stuff. The problem is when I run the mentioned C++ server code in that thread, it receives nothing.</p>\n\n<p>Does the thread run in a local environment that can't access <code>192.168.1.xxx</code>?</p>\n\n<p><strong>maxsdk C++ part</strong></p>\n\n<pre><code>void InitWinsock()\n{\n    WSADATA wsaData;\n    WSAStartup(MAKEWORD(2, 2), &amp;wsaData);\n}\n\nvoid update_state(Interface* ip)\n{\n    SOCKET socketS;\n\n    InitWinsock();\n    struct sockaddr_in local;\n    struct sockaddr_in from;\n    int fromlen = sizeof(from);\n    local.sin_family = AF_INET;\n    local.sin_port = htons(12345);\n    local.sin_addr.s_addr = inet_addr(\"192.168.1.106\");\n\n    socketS = socket(AF_INET, SOCK_DGRAM, 0);\n    bind(socketS, (sockaddr*)&amp;local, sizeof(local));\n    char buffer[1024];\n    while (1)\n    {\n        ZeroMemory(buffer, sizeof(buffer));\n\n        if (recvfrom(socketS, buffer, sizeof(buffer), 0, (sockaddr*)&amp;from, &amp;fromlen) != SOCKET_ERROR)\n        {\n            printf(\"Received message from %s: %s\\n\", inet_ntoa(from.sin_addr), buffer);\n            ip-&gt;PushPrompt((wchar_t*)buffer);\n            //sendto(socketS, buffer, sizeof(buffer), 0, (sockaddr*)&amp;from,    fromlen);\n        }\n\n        Sleep(50);\n    }\n    closesocket(socketS);\n\n    return;\n}\n\nvoid PCamMaxPlugin::BeginEditParams(Interface* ip,IUtil* iu) \n{\n    this-&gt;iu = iu;\n    hPanel = ip-&gt;AddRollupPage(\n        hInstance,\n        MAKEINTRESOURCE(IDD_PANEL),\n        DlgProc,\n        GetString(IDS_PARAMS),\n        0);\n    thread (update_state, ip).detach();\n    ip-&gt;PushPrompt(_M(\"----\"));\n}\n</code></pre>\n\n<p><strong>C++ udp server</strong>  </p>\n\n<pre><code>#include &lt;winsock.h&gt;\n#include &lt;cstdio&gt;\n\n#pragma comment(lib, \"Ws2_32.lib\")\n\nvoid InitWinsock()\n{\n    WSADATA wsaData;\n    WSAStartup(MAKEWORD(2, 2), &amp;wsaData);\n}\n\nint main()\n{\n    SOCKET socketS;\n\n    InitWinsock();\n    struct sockaddr_in local;\n    struct sockaddr_in from;\n    int fromlen = sizeof(from);\n    local.sin_family = AF_INET;\n    local.sin_port = htons(12345);\n    local.sin_addr.s_addr = inet_addr(\"192.168.1.106\");\n\n    socketS = socket(AF_INET, SOCK_DGRAM, 0);\n    bind(socketS, (sockaddr*)&amp;local, sizeof(local));\n    char buffer[1024];\n    while (1)\n    {\n        ZeroMemory(buffer, sizeof(buffer));\n        if (recvfrom(socketS, buffer, sizeof(buffer), 0, (sockaddr*)&amp;from, &amp;fromlen) != SOCKET_ERROR)\n        {\n            printf(\"Received message from %s: %s\\n\", inet_ntoa(from.sin_addr), buffer);\n            //sendto(socketS, buffer, sizeof(buffer), 0, (sockaddr*)&amp;from, fromlen);\n        }\n        Sleep(50);\n    }\n    closesocket(socketS);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "directx", "hlsl"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 8549803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363389efe102913ddf5df77dcac08376?s=128&d=identicon&r=PG&f=1", "display_name": "MattBT12", "link": "https://stackoverflow.com/users/8549803/mattbt12"}, "edited": false, "score": 0, "creation_date": 1542849046, "post_id": 53422391, "comment_id": 93719626, "body": "I&#39;ve fixed this, but after running the shader through Visual Studio&#39;s graphics debugger it appears that nothing is being written to the stream output buffer; it remains 40 bytes in size with every element being 0. This is despite the stream output buffer being assigned and the shader outputting geometry. I&#39;ve edited my post to include the shader creation, in case that might be incorrect."}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "reply_to_user": {"reputation": 51, "user_id": 8549803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363389efe102913ddf5df77dcac08376?s=128&d=identicon&r=PG&f=1", "display_name": "MattBT12", "link": "https://stackoverflow.com/users/8549803/mattbt12"}, "edited": false, "score": 0, "creation_date": 1542849445, "post_id": 53422391, "comment_id": 93719704, "body": "Well, one thing that did strike me as a bit odd about your code up there is that your buffers seem tiny. I assumed you had a reason for that. But now that I notice that your strides are the same as the buffer sizes: You are aware of the fact that the <code>ByteWidth</code> is supposed to be the size of the entire buffer and not just the size of a single vertex?"}, {"owner": {"reputation": 51, "user_id": 8549803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363389efe102913ddf5df77dcac08376?s=128&d=identicon&r=PG&f=1", "display_name": "MattBT12", "link": "https://stackoverflow.com/users/8549803/mattbt12"}, "edited": false, "score": 0, "creation_date": 1542851856, "post_id": 53422391, "comment_id": 93720175, "body": "I figured as much given what the documentation does on MSDN; I must&#39;ve forgotten to change it back to what it was after tinkering with it (that&#39;s what I get for programming at 1 in the morning). Right now I&#39;m just setting the byte width to be a very large value that doesn&#39;t change because I don&#39;t know the number of vertices that will be in the buffer. Is this the best approach for this situation? Or is there a strategy for dynamically sizing the buffer?"}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "reply_to_user": {"reputation": 51, "user_id": 8549803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363389efe102913ddf5df77dcac08376?s=128&d=identicon&r=PG&f=1", "display_name": "MattBT12", "link": "https://stackoverflow.com/users/8549803/mattbt12"}, "edited": false, "score": 0, "creation_date": 1542883427, "post_id": 53422391, "comment_id": 93732334, "body": "Well, setting it to &quot;a very large value&quot; should be good enough to make it do something (as long as that very large value is not so large that the allocation fails, of course). Obviously, it&#39;s not the best approach in general to just blindly allocate some arbitrary, huge amount of memory. In the case of stream output, you should have at least some idea how much geometry your application is going to process and be able to derive some worst-case size that the buffer needs to be!?"}, {"owner": {"reputation": 51, "user_id": 8549803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363389efe102913ddf5df77dcac08376?s=128&d=identicon&r=PG&f=1", "display_name": "MattBT12", "link": "https://stackoverflow.com/users/8549803/mattbt12"}, "edited": false, "score": 0, "creation_date": 1542922761, "post_id": 53422391, "comment_id": 93750218, "body": "I do know roughly how much data will be output, but sizing the buffer for a worst case scenario seems somewhat inefficient. I was just curious to see if there&#39;s a better way of doing it that I hadn&#39;t thought of."}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "reply_to_user": {"reputation": 51, "user_id": 8549803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363389efe102913ddf5df77dcac08376?s=128&d=identicon&r=PG&f=1", "display_name": "MattBT12", "link": "https://stackoverflow.com/users/8549803/mattbt12"}, "edited": false, "score": 0, "creation_date": 1542930233, "post_id": 53422391, "comment_id": 93751853, "body": "Well, you could look how much geometry you get the first time and then use a smaller buffer next time. D3D11 does not have any built-in feature I&#39;m aware of to dynamically adapt the size of a buffer to how much geometry is streamed into it. So I&#39;m afraid you&#39;re on your own to figure out what approach makes the most sense in your application\u2026"}], "tags": [], "owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "is_accepted": true, "score": 1, "last_activity_date": 1542848157, "last_edit_date": 1542848157, "creation_date": 1542847173, "answer_id": 53422391, "question_id": 53419965, "link": "https://stackoverflow.com/questions/53419965/directx11-geometry-shader-with-stream-output/53422391#53422391", "title": "DirectX11 - Geometry Shader with Stream Output", "body": "<p>In addition to just the actual vertex data, buffers used as targets for the Stream Output Stage maintain some internal state to keep track of how much geometry was written out. <code>DrawAuto()</code> relies on this information to know how much geometry to draw. When you copy just the vertex data out of your stream output buffer into a plain <code>D3D11_BIND_VERTEX_BUFFER</code>, this information will be lost.</p>\n\n<p>Relevant quote from <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/d3d11/nf-d3d11-id3d11devicecontext-drawauto\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n\n<blockquote>\n  <p>DrawAuto only works when drawing with one input buffer bound as an input to the IA stage at slot 0. Applications must create the SO buffer resource with both binding flags, D3D11_BIND_VERTEX_BUFFER and D3D11_BIND_STREAM_OUTPUT.</p>\n</blockquote>\n\n<p>I'm not sure if it's supposed to be possible to copy data from one stream output buffer to another and <code>DrawAuto()</code> from there. I guess that might work. What you are doing at the moment, however, is definitely not supposed to work according to the documentation. Ideally, you'd just avoid copying the data. If you really must copy the data (for whatever reason), I suggest you nevertheless first try drawing directly from the buffer you streamed into to make sure everything else is set up correctly and only once that works try to copy into another buffer that has both vertex and stream output bind flags set&hellip;</p>\n"}], "owner": {"reputation": 51, "user_id": 8549803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363389efe102913ddf5df77dcac08376?s=128&d=identicon&r=PG&f=1", "display_name": "MattBT12", "link": "https://stackoverflow.com/users/8549803/mattbt12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 616, "favorite_count": 0, "accepted_answer_id": 53422391, "answer_count": 1, "score": 1, "last_activity_date": 1542848877, "creation_date": 1542831865, "last_edit_date": 1542848877, "question_id": 53419965, "link": "https://stackoverflow.com/questions/53419965/directx11-geometry-shader-with-stream-output", "title": "DirectX11 - Geometry Shader with Stream Output", "body": "<p>I'm trying to stream out data from the geometry shader to use as a vertex buffer to be input into another shader. However, this doesn't seem to be working, and the debug layer is telling me nothing. Is there something I'm doing wrong with the buffer descriptions?</p>\n\n<p>Here's how I'm creating the output buffer:</p>\n\n<pre><code>D3D11_BUFFER_DESC outputBufferDesc;\nZeroMemory(&amp;outputBufferDesc, sizeof(outputBufferDesc));\noutputBufferDesc.ByteWidth = sizeof(XMFLOAT4) + 2 * sizeof(XMFLOAT3);\noutputBufferDesc.Usage = D3D11_USAGE_DEFAULT;\noutputBufferDesc.BindFlags = D3D11_BIND_STREAM_OUTPUT;\noutputBufferDesc.CPUAccessFlags = 0;\noutputBufferDesc.MiscFlags = 0;\noutputBufferDesc.StructureByteStride = 0;\n\nresult = renderer-&gt;CreateBuffer(&amp;outputBufferDesc, NULL, &amp;outputBuffer);\nif (result != S_OK)\n{\n    MessageBox(NULL, filename, L\"Failed to create stream output buffer\", MB_OK);\n    exit(0);\n}\n\nUINT offset[1] = { 0 };\ndeviceContext-&gt;SOSetTargets(1, &amp;outputBuffer, offset);\n</code></pre>\n\n<p>And the draw call for the first shader:</p>\n\n<pre><code>deviceContext-&gt;VSSetShader(vertexShader, NULL, 0);\ndeviceContext-&gt;PSSetShader(pixelShader, NULL, 0);\ndeviceContext-&gt;GSSetShader(streamOutputGeometryShader, NULL, 0);\n\n// Render the triangle.\ndeviceContext-&gt;DrawIndexed(indexCount, 0, 0);\n\nUINT offset[1] = { 0 };\nID3D11Buffer* pNullBuffer = 0;\ndeviceContext-&gt;SOSetTargets(1, &amp;pNullBuffer, offset);\n</code></pre>\n\n<p>And where I copy the information from that buffer into a second buffer:</p>\n\n<pre><code>D3D11_BUFFER_DESC vertexBufferDesc;\nZeroMemory(&amp;vertexBufferDesc, sizeof(vertexBufferDesc));\nvertexBufferDesc.ByteWidth = sizeof(XMFLOAT4) + 2 * sizeof(XMFLOAT3);\nvertexBufferDesc.Usage = D3D11_USAGE_DEFAULT;\nvertexBufferDesc.BindFlags = D3D11_BIND_VERTEX_BUFFER;\nvertexBufferDesc.CPUAccessFlags = 0;\nvertexBufferDesc.MiscFlags = 0;\nvertexBufferDesc.StructureByteStride = 0;\n\nresult = renderer-&gt;CreateBuffer(&amp;vertexBufferDesc, NULL, &amp;vertexBuffer);\nif (result != S_OK)\n{\n\n    MessageBox(NULL, L\"Failed to create output mesh vertex buffer\", L\"Failed\", MB_OK);\n    exit(0);\n\n}\n\ndeviceContext-&gt;CopyResource(vertexBuffer, buffer);\n</code></pre>\n\n<p>And where I set the input topology for the mesh using the vertex buffer:</p>\n\n<pre><code>unsigned int stride;\nunsigned int offset;\n\n// Set vertex buffer stride and offset.\nstride = sizeof(XMFLOAT4) + 2 * sizeof(XMFLOAT3);\noffset = 0;\n\ndeviceContext-&gt;IASetVertexBuffers(0, 1, &amp;vertexBuffer, &amp;stride, &amp;offset);\ndeviceContext-&gt;IASetPrimitiveTopology(D3D11_PRIMITIVE_TOPOLOGY_TRIANGLELIST);\n</code></pre>\n\n<p>And finally, the draw call for the second shader is simple:</p>\n\n<pre><code>deviceContext-&gt;DrawAuto();\n</code></pre>\n\n<p>EDIT: The geometry is being computed in the geometry shader correctly, but it's not being streamed out. I've included the geometry shader creation code below:</p>\n\n<pre><code>D3D11_SO_DECLARATION_ENTRY SODeclarationEntry[3] =\n{\n\n    { 0, \"SV_POSITION\", 0, 0, 4, 0 },\n    { 0, \"NORMAL\", 0, 0, 3, 0 },\n    { 0, \"TEXCOORD\", 0, 0, 3, 0 }\n\n};\n\n// Create the geometry shader from the buffer.\nresult = renderer-&gt;CreateGeometryShaderWithStreamOutput(geometryShaderBuffer-&gt;GetBufferPointer(), geometryShaderBuffer-&gt;GetBufferSize(), SODeclarationEntry, _countof(SODeclarationEntry),\n    NULL, 0, D3D11_SO_NO_RASTERIZED_STREAM, NULL, &amp;streamOutputGeometryShader);\n</code></pre>\n"}, {"tags": ["c++", "vector", "openmp"], "comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1542878346, "post_id": 53419780, "comment_id": 93729115, "body": "Nobody can tell, without knowing the types of <code>result</code> and <code>matrix</code> at least, and whether there&#39;s any aliasing of the two."}, {"owner": {"reputation": 165, "user_id": 10172959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9403fac64ce94b37ef2455655eb1d51?s=128&d=identicon&r=PG&f=1", "display_name": "vydesaster", "link": "https://stackoverflow.com/users/10172959/vydesaster"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1542910344, "post_id": 53419780, "comment_id": 93746432, "body": "result and vector1 are stl double vectors. Matrix is a class which holds the three vectors that are needed to describe a sparse matrix in CSR format."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1542910681, "post_id": 53419780, "comment_id": 93746558, "body": "A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would make the question much clearer - could you <a href=\"https://stackoverflow.com/posts/53419780/edit\">edit</a> so that others can reproduce and diagnose the issue you&#39;re seeing?"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1542910951, "post_id": 53419780, "comment_id": 93746659, "body": "BTW, if you&#39;re comparing <code>int</code> against <code>std::size_t</code> like that, it suggests you have nowhere near enough compiler warnings enabled."}], "answers": [{"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1542910870, "post_id": 53427285, "comment_id": 93746621, "body": "You should probably point out that there will be very little (possibly negative) speed increase from parallelisation when the <i>entire body of the loop</i> is in an <code>atomic</code> block."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1542911537, "post_id": 53427285, "comment_id": 93746832, "body": "It&#39;s probably more efficient to make the elements of <code>result</code> be some suitable <code>std::atomic&lt;&gt;</code> type instead.  If not, at least bring the computation of lhs and rhs ahead of the <code>atomic</code> section, so only the <code>+=</code> is affected."}, {"owner": {"reputation": 1480, "user_id": 10450594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae4c6a0ca94b3094b25f18e66d8368ff?s=128&d=identicon&r=PG&f=1", "display_name": "Brice", "link": "https://stackoverflow.com/users/10450594/brice"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1542962545, "post_id": 53427285, "comment_id": 93759270, "body": "I have already stated that <i>since atomic increment is slower than standard increment, it may make the parallel code slower than the serial one</i>. Then I do not know for sure in which direction the balance between one fast op at a time and several slow ones in parallel will point. This depends on too many factors and there may still be a small performance improvement."}, {"owner": {"reputation": 165, "user_id": 10172959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9403fac64ce94b37ef2455655eb1d51?s=128&d=identicon&r=PG&f=1", "display_name": "vydesaster", "link": "https://stackoverflow.com/users/10172959/vydesaster"}, "edited": false, "score": 0, "creation_date": 1543000824, "post_id": 53427285, "comment_id": 93776415, "body": "I have tried the atomic pragma and it worked fine. But as stated, the performance decreased. But I am totaly fine with that. At least I am getting reproducable results."}], "tags": [], "owner": {"reputation": 1480, "user_id": 10450594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae4c6a0ca94b3094b25f18e66d8368ff?s=128&d=identicon&r=PG&f=1", "display_name": "Brice", "link": "https://stackoverflow.com/users/10450594/brice"}, "is_accepted": true, "score": 0, "last_activity_date": 1542877672, "creation_date": 1542877672, "answer_id": 53427285, "question_id": 53419780, "link": "https://stackoverflow.com/questions/53419780/different-results-when-using-more-than-one-thread/53427285#53427285", "title": "Different results when using more than one thread", "body": "<p>The increment operation should indeed be made atomic to make sure two threads are not updating the value at the same time, which would be a <a href=\"https://en.wikipedia.org/wiki/Race_condition#Software\" rel=\"nofollow noreferrer\">race condition</a>. This will make the code correct, but since atomic increment is slower than standard increment, it may make the parallel code slower than the serial one overall.<br>\nPerformance may also be affected by <a href=\"https://en.wikipedia.org/wiki/False_sharing\" rel=\"nofollow noreferrer\">false-sharing</a>: if the vector size is not much greater than the number of threads, it will often happen that two threads attempt to increment values belonging to the same cache line and much time is spent synchronizing the cache between CPUs.</p>\n\n<pre><code>#pragma omp parallel for num_threads(m_numthreads)\n    for (int i = 0; i &lt; matrix.get_rowptr()-&gt;size() - 1; ++i)\n        for (int j = matrix.get_rowptr()-&gt;operator[](i); j &lt; matrix.get_rowptr()-&gt;operator[](i + 1); ++j)\n        {\n            #pragma omp atomic\n            result[matrix.get_columnindex()-&gt;operator[](j)] += matrix.get_value()-&gt;operator[](j) * vector1[i];\n        }\n</code></pre>\n\n<p>This being said, for a given element in the result vector, the order in which the various products are added to make that element will not be the same in the serial and parallel cases. Rounding errors will add differently and one should not expect the serial and parallel results to be the same, but rather the difference between these results to be small relative to the precision of the <em>float</em> or <em>double</em> format.</p>\n"}, {"comments": [{"owner": {"reputation": 165, "user_id": 10172959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9403fac64ce94b37ef2455655eb1d51?s=128&d=identicon&r=PG&f=1", "display_name": "vydesaster", "link": "https://stackoverflow.com/users/10172959/vydesaster"}, "edited": false, "score": 0, "creation_date": 1543954406, "post_id": 53554038, "comment_id": 94101829, "body": "Thank you very much, Toby. You nailed it. Sorry I was not able to post the code in the last days."}], "tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 0, "last_activity_date": 1543567321, "creation_date": 1543567321, "answer_id": 53554038, "question_id": 53419780, "link": "https://stackoverflow.com/questions/53419780/different-results-when-using-more-than-one-thread/53554038#53554038", "title": "Different results when using more than one thread", "body": "<p>Without a reproducible example, I've had to guess at the context of this code:</p>\n\n<pre><code>#include &lt;vector&gt;\n\nclass SparseMatrix\n{\n    std::vector&lt;double&gt; values = { 5, 8, 3, 6, };\n    std::vector&lt;std::size_t&gt; rows = { 0, 0, 2, 3, 4, };\n    std::vector&lt;std::size_t&gt; cols = { 1, 2, 1, 1, };\n\npublic:\n    const std::vector&lt;std::size_t&gt; *get_rowptr() const { return &amp;rows; };\n    const std::vector&lt;std::size_t&gt; *get_columnindex() const { return &amp;cols; };\n    const std::vector&lt;double&gt; *get_value() const { return &amp;values; };\n};\n\n#include &lt;array&gt;\n#include &lt;iostream&gt;\nint main()\n{\n    SparseMatrix matrix;\n\n    std::array&lt;double, 4&gt; result{};\n    std::array&lt;double, 4&gt; vector1{ 1, 2, 3, 4 };\n\n#pragma omp parallel for\n    for (int i = 0; i &lt; matrix.get_rowptr()-&gt;size() - 1; ++i)\n    {\n        for (int j = matrix.get_rowptr()-&gt;operator[](i); j &lt; matrix.get_rowptr()-&gt;operator[](i + 1); ++j)\n        {\n            result[matrix.get_columnindex()-&gt;operator[](j)] += matrix.get_value()-&gt;operator[](j) * vector1[i];\n        }\n    }\n\n    for (auto const&amp; i: result)\n        std::cout &lt;&lt; i &lt;&lt; \" \";\n    std::cout &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>With some suitable variables we can simplify the code so we see what's going on:</p>\n\n<pre><code>    auto const&amp; rows = *matrix.get_rowptr();\n    auto const&amp; cols = *matrix.get_columnindex();\n    auto const&amp; values = *matrix.get_value();\n\n #pragma omp parallel for\n    for (std::size_t i = 0;  i &lt; rows.size() - 1;  ++i)\n    {\n        for (std::size_t j = rows[i];  j &lt; rows[i+1];  ++j)\n        {\n            result[cols[j]] += values[j] * vector1[i];\n        }\n    }\n</code></pre>\n\n<p>Now we can see in the body of the loop that we're assigning to a result entry that other threads may also be writing to.  We need to serialize the access to <code>result[cols[j]]</code> so that only one thread at a time is executing the <code>+=</code>.  We can do that by marking that operation indivisible, using the OMP <code>atomic</code> keyword:</p>\n\n<pre><code>#pragma omp parallel for\n    for (std::size_t i = 0;  i &lt; rows.size() - 1;  ++i)\n    {\n        for (std::size_t j = rows[i];  j &lt; rows[i+1];  ++j)\n        {\n            auto&amp; dest = result[cols[j]];\n            auto const term = values[j] * vector1[i];\n#pragma omp atomic\n            dest += term;\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 10172959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9403fac64ce94b37ef2455655eb1d51?s=128&d=identicon&r=PG&f=1", "display_name": "vydesaster", "link": "https://stackoverflow.com/users/10172959/vydesaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 53427285, "answer_count": 2, "score": -1, "last_activity_date": 1543567321, "creation_date": 1542831039, "last_edit_date": 1542911712, "question_id": 53419780, "link": "https://stackoverflow.com/questions/53419780/different-results-when-using-more-than-one-thread", "title": "Different results when using more than one thread", "body": "<p>The following code performs a transpose matrix-vector multiplication where the matrix is sparse and stored in CSR format. Depending on the number of threads the result is different. I think the reason is the concurrent memory access and addition.\nIs there a way to use multithreading but keep the result the same as for single threading?</p>\n\n<pre><code>#pragma omp parallel for num_threads(m_numthreads)\n    for (int i = 0; i &lt; matrix.get_rowptr()-&gt;size() - 1; ++i)\n    {\n        for (int j = matrix.get_rowptr()-&gt;operator[](i); j &lt; matrix.get_rowptr()-&gt;operator[](i + 1); ++j)\n        {\n            result[matrix.get_columnindex()-&gt;operator[](j)] += matrix.get_value()-&gt;operator[](j) * vector1[i];\n        }\n    }\n</code></pre>\n"}, {"tags": ["c++", "c++builder", "stringgrid"], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1542839812, "creation_date": 1542839812, "answer_id": 53421399, "question_id": 53419712, "link": "https://stackoverflow.com/questions/53419712/coloring-cells-in-c-builder-stringgrid/53421399#53421399", "title": "Coloring cells in C++ builder, StringGrid", "body": "<h2>You are painting on the wrong <code>Canvas</code>.</h2>\n\n<p>Inside your <code>OnDrawCell</code> event handler, <code>this</code> refers to the parent Form, because the handler is a member of the <code>TTetrisGame</code> class. As such, you are painting on the Form's <code>Canvas</code>. You need to paint on the Grid's <code>Canvas</code> instead:</p>\n\n<pre><code>void __fastcall TTetrisGame::DrawGrid1DrawCell(TObject *Sender, int ACol, int ARow, TRect &amp;Rect, TGridDrawState State)\n{\n    DrawGrid1-&gt;Canvas-&gt;Brush-&gt;Color=clBlue;\n    DrawGrid1-&gt;Canvas-&gt;FillRect(Rect);\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7838474"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 563, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542839812, "creation_date": 1542830659, "last_edit_date": 1542839733, "question_id": 53419712, "link": "https://stackoverflow.com/questions/53419712/coloring-cells-in-c-builder-stringgrid", "title": "Coloring cells in C++ builder, StringGrid", "body": "<p>I tried to do this:</p>\n\n<pre><code>void __fastcall TTetrisGame::DrawGrid1DrawCell(TObject *Sender, int ACol, int ARow,\n    TRect &amp;Rect, TGridDrawState State)\n{\n    this-&gt;Canvas-&gt;Brush-&gt;Color=clBlue;\n    this-&gt;Canvas-&gt;FillRect(Rect);\n}\n</code></pre>\n\n<p>But it is a really weird result. I put my StringGrid in the middle of the window but I can't see any Blue color. Instead, it is transparent. I see a colored blue Grid in the right top corner of my window.</p>\n\n<p>What am I doing wrong?</p>\n\n<p>How can I color each cell individually?</p>\n"}, {"tags": ["c++", "boost", "computational-geometry", "boost-geometry"], "answers": [{"comments": [{"owner": {"reputation": 941, "user_id": 3605689, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/683bacbb1ecb282b5a3c36c4fac01e32?s=128&d=identicon&r=PG&f=1", "display_name": "user129186", "link": "https://stackoverflow.com/users/3605689/user129186"}, "edited": false, "score": 0, "creation_date": 1542836546, "post_id": 53420534, "comment_id": 93716103, "body": "This solution will unfortunately miss any intersections on the adjacent polyline segments of the common point."}, {"owner": {"reputation": 710, "user_id": 10666424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Co513.png?s=128&g=1", "display_name": "trollingchar", "link": "https://stackoverflow.com/users/10666424/trollingchar"}, "reply_to_user": {"reputation": 941, "user_id": 3605689, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/683bacbb1ecb282b5a3c36c4fac01e32?s=128&d=identicon&r=PG&f=1", "display_name": "user129186", "link": "https://stackoverflow.com/users/3605689/user129186"}, "edited": false, "score": 0, "creation_date": 1542838530, "post_id": 53420534, "comment_id": 93716777, "body": "@user129186, I thought you wanted to avoid detecting intersection in the common point. But maybe you want to check if adjacent segments partially coincide with red segment?"}], "tags": [], "owner": {"reputation": 710, "user_id": 10666424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Co513.png?s=128&g=1", "display_name": "trollingchar", "link": "https://stackoverflow.com/users/10666424/trollingchar"}, "is_accepted": false, "score": 0, "last_activity_date": 1542834727, "creation_date": 1542834727, "answer_id": 53420534, "question_id": 53419620, "link": "https://stackoverflow.com/questions/53419620/boost-geometry-intersection-using-an-open-interval/53420534#53420534", "title": "Boost geometry : intersection using an open interval", "body": "<p>If I understood you correctly, you want to check if the segment intersects with polyline in point other than its connected point.</p>\n\n<p>So you need to check only segments that do not have shared endpoint with red segment (see picture). You may skip those who do have same endpoint with red segment or you may want to handle them in a different way, for example, check if entire segments coincide.</p>\n\n<p>I didn't work with c++ for a long time so I write pseudo code:</p>\n\n<pre><code>foreach (segment in polyline) {\n    if (\n        segment.A != redSegment.A &amp;&amp;\n        segment.A != redSegment.B &amp;&amp;\n        segment.B != redSegment.A &amp;&amp;\n        segment.B != redSegment.B &amp;&amp;\n        intersect (segment, redSegment)\n    ) {\n        return true;\n    }\n}\nreturn false;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Urn13.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Urn13.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 941, "user_id": 3605689, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/683bacbb1ecb282b5a3c36c4fac01e32?s=128&d=identicon&r=PG&f=1", "display_name": "user129186", "link": "https://stackoverflow.com/users/3605689/user129186"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542834727, "creation_date": 1542830162, "question_id": 53419620, "link": "https://stackoverflow.com/questions/53419620/boost-geometry-intersection-using-an-open-interval", "title": "Boost geometry : intersection using an open interval", "body": "<p>I have a polyline and a line segment. One of the endpoints of the line segment is always also a point of the polyline.</p>\n\n<p>Example:\nline segment: (1,2),(3,3)\npolyline: (3,3),(10,10),(15,30)</p>\n\n<p>I want to use boost geometry in order to find whether the line segment and the polyline have an intersection. However, it is okay for them to intersect at the connected point. In this case, (3,3).</p>\n\n<p><code>boost::geometry::intersects</code> will always return <code>true</code> in this case. I would like to make an exception for the common point, but still have it return <code>true</code> if there is an intersection at any other point. Is there a clever way to go about this? Or do I have to use <code>boost::geometry::intersection</code> and iterate over the results?</p>\n"}, {"tags": ["c#", "c++", "interop", "pinvoke", "marshalling"], "comments": [{"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 1, "creation_date": 1542876999, "post_id": 53419367, "comment_id": 93728345, "body": "double[,] is a multi-dimensional array, not a jagged array (double[][] is). A C# multi-dimensional array is like a C/C++ multi-dimensional array (binary layout is the same). So, can you clarify what you&#39;re after exactly?"}, {"owner": {"reputation": 718, "user_id": 783336, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/76eb38db3f71a213443ecf3f9df915f7?s=128&d=identicon&r=PG", "display_name": "myusrn", "link": "https://stackoverflow.com/users/783336/myusrn"}, "reply_to_user": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1542884586, "post_id": 53419367, "comment_id": 93733034, "body": "@Simon thanks for pointed that out. Based on your comment and Martin&#39;s I realized i&#39;m dealing with trying to pass a 2d array form of multi-dimensional array and receive one as a return value.  I think I will update my original post to correct the title and add &quot;update&quot; details commenting on what appears to be interesting parts of making this work."}], "answers": [{"comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 718, "user_id": 783336, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/76eb38db3f71a213443ecf3f9df915f7?s=128&d=identicon&r=PG", "display_name": "myusrn", "link": "https://stackoverflow.com/users/783336/myusrn"}, "edited": false, "score": 1, "creation_date": 1542879754, "post_id": 53419681, "comment_id": 93729984, "body": "@myusrn Flattening the array to 1D sounds like an excellent idea."}, {"owner": {"reputation": 718, "user_id": 783336, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/76eb38db3f71a213443ecf3f9df915f7?s=128&d=identicon&r=PG", "display_name": "myusrn", "link": "https://stackoverflow.com/users/783336/myusrn"}, "edited": false, "score": 0, "creation_date": 1542884387, "post_id": 53419681, "comment_id": 93732901, "body": "I have things now working.  what helped was your comment about not being able to new an array of pointers as I was doing in example and what c++ actually doesn&#39;t with that statement that.  what this made me realize, confirmed through testing, is that pinvoke can only pass and accept as a return jagged arrays vs 2d arrays.  This also led to more simplified DllImport statements and some interesting marshalling code to prepare for passing the 2d array converted to jagged array and to process returned jagged array converted to 2d array."}, {"owner": {"reputation": 718, "user_id": 783336, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/76eb38db3f71a213443ecf3f9df915f7?s=128&d=identicon&r=PG", "display_name": "myusrn", "link": "https://stackoverflow.com/users/783336/myusrn"}, "edited": false, "score": 0, "creation_date": 1542908053, "post_id": 53419681, "comment_id": 93745578, "body": "i&#39;m wanting to mark your response as the answer as it led to me getting things to work but as you can see in my &quot;update&quot; section of my original ask which has code associated with what ended up working it seems &quot;double ** values&quot; worked and not &quot;double*** values&quot; wasn&#39;t working for me. not sure why that was."}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1542879697, "last_edit_date": 1542879697, "creation_date": 1542830486, "answer_id": 53419681, "question_id": 53419367, "link": "https://stackoverflow.com/questions/53419367/pinvoke-marshalling-of-2d-multidimensional-array-of-type-double-as-input-and-out/53419681#53419681", "title": "pinvoke marshalling of 2d multidimensional array of type double as input and output between c# and c++", "body": "<p>This code:</p>\n\n<pre><code>*values = new double[*valuesOuterLen, *valuesInnerLen];\n</code></pre>\n\n<p>does not do what you think it does. (I shortened the variable names because they just complicate things.)</p>\n\n<p>C++ inherits from C a lack of multi-dimensional arrays.  What it does have is arrays of arrays, or arrays of pointers to arrays.  In both cases you index these as <code>array[firstIndex][secondIndex]</code>.  You can't <code>new</code> an array of pointers like that, you have to write something like:</p>\n\n<pre><code>double*** values;  // Triple pointer!  Ow!!  *values is a pointer to\n                   // (an array of) pointers to (arrays of) doubles.\n*values = new double*[*valuesOuterLen];\nfor (size_t i=0; i&lt;valuesOuterLen; i++) {\n    (*values)[i] = new double[*valuesInnerLen];\n}\n</code></pre>\n\n<p>What you have actually invoked is the C++ comma operator, which evaluates and discards the first operand, and then evaluates the second operand.  Crank your compiler warnings up; a good compiler will warn that the first operand has no side-effects.</p>\n"}], "owner": {"reputation": 718, "user_id": 783336, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/76eb38db3f71a213443ecf3f9df915f7?s=128&d=identicon&r=PG", "display_name": "myusrn", "link": "https://stackoverflow.com/users/783336/myusrn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 930, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1543113122, "creation_date": 1542828926, "last_edit_date": 1543113122, "question_id": 53419367, "link": "https://stackoverflow.com/questions/53419367/pinvoke-marshalling-of-2d-multidimensional-array-of-type-double-as-input-and-out", "title": "pinvoke marshalling of 2d multidimensional array of type double as input and output between c# and c++", "body": "<p>I have the following c# and c++ pinvoke marshalling of 2d multidimensional array of type double matter I'm trying to solve.  </p>\n\n<p>I've reviewed the following hit to get what I have currently <a href=\"https://stackoverflow.com/questions/21138248/p-invoke-with-arrays-of-double-marshalling-data-between-c-sharp-and-c\">P/Invoke with arrays of double - marshalling data between C# and C++</a> .</p>\n\n<p>I've reviewed <a href=\"https://stackoverflow.com/questions/6327196/marshalling-c-sharp-jagged-array-to-c\">Marshalling C# Jagged Array to C++</a> which has a very good scenario match but it's not clear how to go from answer to all aspects of implementation.</p>\n\n<p>My issue, I think if i'm on right path so far, is how I unwind the c++ <code>*outputArray = new double[*outputArrayRows, *outputArrayCols];</code> that is successfully passed back from DllImport enabled call to the c# <code>IntPtr outputArrayPtr</code> variable into the <code>var outputArray = new double[outputArrayRows, outputArrayCols];</code> variable I need in order to proceed.</p>\n\n<p>Question = Any insights on if the for loop is the right next step and what extraction syntax I use inside of it?</p>\n\n<p>c++ side of things  </p>\n\n<pre><code>extern \"C\" __declspec(dllexport) void SomeFunction(double** inputArray, int inputArrayRows, int inputArrayCols,\n    double** outputArray, int* outputArrayRows, int* outputArrayCols)\n{\n    // just initialize the output results for testing purposes no value assignment as of yet\n    *outputArrayRows = 10;\n    *outputArrayCols = 2;\n    *outputArray = new double[*outputArrayRows, *outputArrayCols];\n    return;\n}\n\nextern \"C\" __declspec(dllexport)DllExport void FreeArray(double** allocatedArrayPtr)\n{\n    delete[] allocatedArrayPtr;\n}\n</code></pre>\n\n<p>c# side of things  </p>\n\n<pre><code>[DllImport(dllName /*, CallingConvention = CallingConvention.Cdecl */)]\nstatic extern void SomeFunction(double[,] inputArray, int inputArrayRows, int inputArrayCols, \n    out IntPtr outputArray, out int outputArrayRows, out int outputArrayCols);\n[DllImport(dllName /*, CallingConvention = CallingConvention.Cdecl */)]\nstatic extern void FreeArray(IntPtr allocatedArrayPtr);\n\n[TestMethod]\npublic void DllImport_SomeFunction_ShouldNotThrowException()\n{\n    var inputArray = new double[,] { { 1, 2, 3 }, { 4, 5, 6 }, { 7, 8, 9 } };\n\n    IntPtr outputArrayPtr; int outputArrayRows, outputArrayCols;\n    DllImportUnitTests.SomeFunction(inputArray, inputArray.GetLength(0), inputArray.GetLength(1), \n        out outputArrayPtr, out outputArrayRows, out outputArrayCols);\n    var outputArray = new double[outputArrayRows, outputArrayCols];\n    IntPtr[] outputArrayPtrArray = new IntPtr[outputArrayRows];\n    //Marshal.Copy(outputArrayPtr, outputArray, 0, outputArrayRows); // overload for double[] but not for double[,]\n    Marshal.Copy(outputArrayPtr, outputArrayPtrArray, 0, outputArrayRows);\n    FreeArray(outputArrayPtr);\n    for (var i = 0; i &lt; outputArrayPtrArray.Length; i++)\n    {\n        Marshal.Copy(outputArrayPtrArray[i], outputArray[i ???], 0, outputArrayCols);\n    }\n\n    Assert.IsNotNull(outputArray);\n}\n</code></pre>\n\n<p><br></p>\n\n<h1>update containing answer [ / what worked for me ]</h1>\n\n<p>Based on comments I updated title to denote this issue has to do with trying to pass and receive a 2d [ / multi-dimensional ] array not a jagged array.  That said what became apparent in my tests is that vs17 c++ windows desktop dll project environment only does jagged arrays [ e.g. c++ <code>DllExport double** SomeFunction(double** inputArray, . . .</code> and <code>double** returnArray = new double*[numberOfRows]</code> and c# <code>double[][] dogLegValues = new double[numberOfRows][/* numberOfCols not specified */];</code> ].  Below i'm adding the c# pinvoke DllImport and c++ function signatures that I was able to get things working with and some of the interesting marshalling code for prepping the 2d array for passing as jagged array and for processing the returned jagged array eventually converting it to 2d array that caller was expecting if that helps others.</p>\n\n<p>c# DllImport statement and comments capturing findings</p>\n\n<pre><code>[DllImport(dllName /*, CallingConvention = CallingConvention.Cdecl */)]\n//static extern /* double[] */ IntPtr SomeFunction(double[] inputArray, int inputArrayRows, out int outputArrayRows); // pinvoke can marshal double[] 1d array input but not output\nstatic extern /* double[,] */ IntPtr SomeFunction(/* double[,] */ IntPtr[] inputArray, int inputArrayRows, out int outputArrayRows); // pinvoke cannot marshal double[,] 2d array input or output\n</code></pre>\n\n<p>c++ function signature </p>\n\n<pre><code>#define DllExport extern \"C\" __declspec(dllexport)\n//DllExport double* SomeFunction(double* inputArray, int inputArrayRows, int* outputArrayRows) // using flattened 2d array input and output\nDllExport double** SomeFunction(double** inputArray, int inputArrayRows, int* outputArraysRows) // using 2d converted to jagged array [ of arrays ] input and output\n</code></pre>\n\n<p>c# marshaling code for 2d array flattened into 1d array</p>\n\n<pre><code>int outputArrayRows; const int outputArrayCols = 2;\ndouble[] inputArrayFlattened = new double[inputArray.Length];\n//var index = 0; foreach (var value in inputArray) { inputArrayFlattened[index] = value; index++; } // more concise flattening but adds a stack frame variable \nfor (var i = 0; i &lt; inputArray.GetLength(0); i++) { for (var j = 0; j &lt; inputArray.GetLength(1); j++) inputArrayFlattened[i * inputArray.GetLength(1) + j] = (double)inputArray.GetValue(i, j); }\nIntPtr outputArrayPtr = MyUnitTests.SomeFunction(inputArrayFlattened, inputArray.Length, out dogLegValuesRows);\ndouble[] outputArray = new double[outputArrayCols]; Marshal.Copy(outputArrayPtr, outputArray, 0, outputArrayCols);\n</code></pre>\n\n<p>c# marshaling code for 2d array</p>\n\n<pre><code>IntPtr[] inputArrayPtr = new IntPtr[inputArray.GetLength(0)];\nvar inputArrayJagged = inputArray.ToJaggedArray();\nfor (var i = 0; i &lt; inputArrayJagged.Length; i++)\n{\n    IntPtr inputArrayJaggedRowPtr = Marshal.AllocCoTaskMem(sizeof(double) * inputArrayJagged[i].Length);\n    Marshal.Copy(inputArrayJagged[i], 0, inputArrayJaggedRowPtr, inputArrayJagged[i].Length);\n    inputArrayPtr[i] = inputArrayJaggedRowPtr;\n}\nIntPtr outputArrayJaggedPtr = MyUnitTests.SomeFunction(inputArrayPtr, inputArray.GetLength(0), out outputArrayRows);\nIntPtr[] outputArrayJaggedPtrArray = new IntPtr[outputArrayRows];\nMarshal.Copy(outputArrayJaggedPtr, outputArrayJaggedPtrArray, 0, outputArrayRows);\n//FreeArray(outputArrayJaggedPtr); // doesn't appear we need this given passing result back as return value and no issue when returning 1 row but crashes when returning 2 rows\n\ndouble[][] outputArray = new double[outputArrayRows][/* outputArrayCols not specified */];\nfor (var i = 0; i &lt; outputArrayJaggedPtrArray.Length; i++)\n{\n    outputArray[i] = new double[outputArrayCols]; // can't do this with a double[,] 2d array or can you ???\n    double[] outputArrayJaggedRow = new double[outputArrayCols]; \n    Marshal.Copy(outputArrayJaggedPtrArray[i], outputArrayJaggedRow, 0, outputArrayCols);\n    outputArray[i] = outputArrayJaggedRow;\n}\n\nvar results = outputArray.ToTwoDimensionalArray();\n</code></pre>\n\n<p>c++ jagged array initialization and assignment examples</p>\n\n<pre><code>// hard coded test return values used to get pinvoke marshalling worked out using flattened 2d array input and output\ndouble* returnArray = new double[2]; // or new double[outputDataCols] \nreturnArray[0] = 1234.56; returnArray[1] = 98.76; dogLegValuesRows = 1;\n\n// hard coded test return values used to get pinvoke marshalling worked out using 2d converted to jagged array [ of arrays ] input and output\ndouble** returnArray = new double*[2]; // or new double*[*outputDataRows]\nreturnArray[0] = new double[2]; // or new double[*outputDataCols]\nreturnArray[0][0] = 1234.56; returnArray[0][1] = 98.76; //*outputDataRows = 1;\nreturnArray[1] = new double[2]; // or new double[*outputDataCols]\nreturnArray[1][0] = 7890.12; returnArray[1][1] = 34.56; *outputDataRows = 2;\n</code></pre>\n"}, {"tags": ["c++", "refactoring", "c++14"], "comments": [{"owner": {"reputation": 43, "user_id": 1797728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7fc3cf1d89cebf7480efa6b2033d981?s=128&d=identicon&r=PG", "display_name": "cjquines", "link": "https://stackoverflow.com/users/1797728/cjquines"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1542829530, "post_id": 53419349, "comment_id": 93713155, "body": "@drescherjm I accidentally pressed submit when I wasn&#39;t finished writing the question yet. Oops!"}, {"owner": {"reputation": 3183, "user_id": 3063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94037fcc56672e711673c00feba9d62a?s=128&d=identicon&r=PG", "display_name": "palotasb", "link": "https://stackoverflow.com/users/3063/palotasb"}, "edited": false, "score": 1, "creation_date": 1542832637, "post_id": 53419349, "comment_id": 93714482, "body": "Take a template or an <code>std::function</code> parameter pair that you call in the body of the loop in the <code>if</code>/<code>else</code> blocks."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1542833071, "post_id": 53419349, "comment_id": 93714668, "body": "overuse of <code>break</code> and <code>continue</code> is just as good as <code>goto</code>. Use a while loop when the break condition is anything more compilcated than: &quot;iterate from a to b&quot;"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1542833324, "post_id": 53419349, "comment_id": 93714772, "body": "btw you added some code, but there is still no <code>continue</code> or <code>break</code> in your example ;)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1542833433, "post_id": 53419349, "comment_id": 93714811, "body": "how to refactor the code depends on the part you dont show"}, {"owner": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "edited": false, "score": 1, "creation_date": 1542834470, "post_id": 53419349, "comment_id": 93715271, "body": "Not sure what&#39;s unclear here...  avoiding duplication of control structures is a valid question (with non-obvious answers)."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 1797728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7fc3cf1d89cebf7480efa6b2033d981?s=128&d=identicon&r=PG", "display_name": "cjquines", "link": "https://stackoverflow.com/users/1797728/cjquines"}, "edited": false, "score": 0, "creation_date": 1542859923, "post_id": 53421390, "comment_id": 93721861, "body": "Right, I can handle those cases with return values. Thanks."}], "tags": [], "owner": {"reputation": 1899, "user_id": 8854921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b76055b306b4dbab08ee558957f52e?s=128&d=identicon&r=PG&f=1", "display_name": "Bo R", "link": "https://stackoverflow.com/users/8854921/bo-r"}, "is_accepted": true, "score": 0, "last_activity_date": 1542839756, "creation_date": 1542839756, "answer_id": 53421390, "question_id": 53419349, "link": "https://stackoverflow.com/questions/53419349/how-do-i-refactor-duplicate-control-structures/53421390#53421390", "title": "How do I refactor duplicate control structures?", "body": "<p>If you <em>really</em> want/insist to have the same inner control in the loop context with <code>break</code>, <code>continue</code>, and <code>return</code> then the proposed solution is <strong>macros</strong> :-(.</p>\n\n<p>On the other hand, if the <code>doSomethingFG12</code> functions all have a defined interface, then compliment your generic control structure to handle the case with <code>break</code>, <code>continue</code>, and <code>return</code> to make a choice from there return values.</p>\n"}], "owner": {"reputation": 43, "user_id": 1797728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7fc3cf1d89cebf7480efa6b2033d981?s=128&d=identicon&r=PG", "display_name": "cjquines", "link": "https://stackoverflow.com/users/1797728/cjquines"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 53421390, "answer_count": 1, "score": 0, "last_activity_date": 1542839756, "creation_date": 1542828842, "last_edit_date": 1542829505, "question_id": 53419349, "link": "https://stackoverflow.com/questions/53419349/how-do-i-refactor-duplicate-control-structures", "title": "How do I refactor duplicate control structures?", "body": "<p>I have duplicated control structures which are exactly the same, and the difference is how things happen inside. In particular, I don\u2019t know how to deal with <code>break</code>, <code>continue</code>, and <code>return</code>. For example:</p>\n\n<pre><code>int f() {\n  for (int i = 0; i &lt; 10; i++) {\n    for (int j = 0; j &lt; 10; j++) {\n      if (isFoo(i, j)) {\n        // doSomethingF1\n      } else {\n        // doSomethingF2\n      }\n    }\n  }\n}\n\nint g() {\n  for (int i = 0; i &lt; 10; i++) {\n    for (int j = 0; j &lt; 10; j++) {\n      if (isFoo(i, j)) {\n        // doSomethingG1\n      } else {\n        // doSomethingG2\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>where <code>doSomething</code>s rely on <code>i</code> and <code>j</code>, and need to <code>break</code> or <code>continue</code> through the <code>j</code> loop, and <code>return</code> out of the function. How do I factor this out to get rid of the duplication?</p>\n\n<p>I thought of writing a function that would take the <code>doSomething</code>s as arguments, but I'm not sure how to deal with the <code>break</code>s, <code>continue</code>s, or <code>return</code>s.</p>\n\n<p><em>[I'm not fine with the duplication since there are some checks on <code>i</code> and <code>j</code> in <code>f()</code>, <code>g()</code>, and like four other functions that are exactly the same; the only difference is a few lines of code.]</em></p>\n"}, {"tags": ["c++", "arrays", "matrix"], "comments": [{"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 2, "creation_date": 1542829209, "post_id": 53419317, "comment_id": 93713021, "body": "Start with a list of all uppercase and lowercase letters in a separate, one dimensional array. Remove two at random. Then, swap each element in that array with a random element selected from anywhere within the array. (This is &quot;shuffle&quot; randomization known to players of card games and MP3 files.) <i>Then</i> put the results into your 2D array,"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1542829397, "post_id": 53419317, "comment_id": 93713111, "body": "With the exception of removing two letters at random, your attempt seems to be doing pretty much what I said. What&#39;s wrong with your approach?"}, {"owner": {"reputation": 101, "user_id": 10687607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/945c3cf8a36ca1db8df28bc8ad5fb4c9?s=128&d=identicon&r=PG", "display_name": "Luthien", "link": "https://stackoverflow.com/users/10687607/luthien"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1542987338, "post_id": 53419317, "comment_id": 93771476, "body": "I have to use a 2d array and I have to use only 1 according to the assignment. I made something like this :  ` for (int i = 0; i &lt; ROWS; i++)  \t{ \t\tfor (int j = 0; j &lt; 5; ++j)  \t\t{ \t\t\t \t\t\tharf[i][j] = rand() % 25 + &#39;A&#39;;  \t\t} \t}  \tfor (int i = 0; i &lt; ROWS; i++)  \t{ \t\tfor (int j = 5; j &lt; 10; ++j)  \t\t{ \t\t\t \t\t\tharf[i][j] = rand() % 25 + &#39;a&#39;;  \t\t} \t} `  but it is repeating characters. @TimRandall @Mpops"}, {"owner": {"reputation": 101, "user_id": 10687607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/945c3cf8a36ca1db8df28bc8ad5fb4c9?s=128&d=identicon&r=PG", "display_name": "Luthien", "link": "https://stackoverflow.com/users/10687607/luthien"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1542987650, "post_id": 53419317, "comment_id": 93771613, "body": "Btw nothing is wrong except mine is missing V and v all the time but it should be randomly like everytime 2 letters will be missing but different. But I can not create two separate matrix or other 1d arrays."}], "answers": [{"comments": [{"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1542840842, "post_id": 53420844, "comment_id": 93717521, "body": "No need in steps 4,5,6 to remove letters. just walk through the first 50 array elements and enter them sequentially in the 5x10 matrix"}, {"owner": {"reputation": 101, "user_id": 10687607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/945c3cf8a36ca1db8df28bc8ad5fb4c9?s=128&d=identicon&r=PG", "display_name": "Luthien", "link": "https://stackoverflow.com/users/10687607/luthien"}, "edited": false, "score": 0, "creation_date": 1542987171, "post_id": 53420844, "comment_id": 93771384, "body": "I am only allowed to create one matrix (I know it is dumb). but thanks for your answer."}], "tags": [], "owner": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "is_accepted": false, "score": 0, "last_activity_date": 1542836446, "creation_date": 1542836446, "answer_id": 53420844, "question_id": 53419317, "link": "https://stackoverflow.com/questions/53419317/non-recurring-randomized-2d-char-array-that-contains-alphabet-for-c-beginner/53420844#53420844", "title": "Non-recurring, Randomized, 2D Char Array That Contains Alphabet For C++ Beginner", "body": "<ol>\n<li>Create array of length 52.</li>\n<li>Fill this array with the letters of the alphabet, in order if you want.\n<code>[abcde.....XYZ]</code></li>\n<li>Shuffle the entire array. \n<code>[dPYka....slqEr]</code></li>\n<li>Remove the last two characters in the array.\n<code>[dPYka...slq]</code></li>\n<li>Now, to access your random letters, simply read either the first or last character in the array and remove it each time you read one.\n<code>[dPYka...slq]</code> --> <code>[dPYka...sl]</code> (read a 'q')</li>\n<li>Fill your 2 dimensional array by accessing one letter at a time from this array, making sure to remove letters as you go.</li>\n</ol>\n\n<p>If you do it this way, the random letters removed will be purely random (ha*) and the final 5x10 matrix will also be purely random (ha*).</p>\n\n<p>*let's not get into the properties of truly random number generators.</p>\n"}], "owner": {"reputation": 101, "user_id": 10687607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/945c3cf8a36ca1db8df28bc8ad5fb4c9?s=128&d=identicon&r=PG", "display_name": "Luthien", "link": "https://stackoverflow.com/users/10687607/luthien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1542836446, "creation_date": 1542828732, "question_id": 53419317, "link": "https://stackoverflow.com/questions/53419317/non-recurring-randomized-2d-char-array-that-contains-alphabet-for-c-beginner", "title": "Non-recurring, Randomized, 2D Char Array That Contains Alphabet For C++ Beginner", "body": "<p>Assignment wants from us to create a matrix 5x10 containing English letters randomly and non-recurringly. But since there are 52 letters and 50 rooms in the matrix I had to put away to of them. But if I can randomly generate them there still will me two letter missing but not the same ones.</p>\n\n<p>my code is like this so far;</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;ctime&gt; //for srand (number randomize)\n\nusing namespace std;\n\nint main()\n{\n    srand(time(0)); // generates random number \n\n    const int ROWS = 5; //declaration of rows\n\n    const int COLUMNS = 10; //declaration of columns\n\n    //writing content of the matrix\n\n    //I took out two letter (v and V) because matrix limit was 50 but all letters were 52\n\n    char harf[ROWS][COLUMNS] = {\n                     {'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J'},\n                     {'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T'},\n                     {'U', 'W', 'X', 'Y', 'Z', 'a', 'b', 'c', 'd', 'e'},\n                     {'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o'},\n                     {'p', 'q', 'r', 's', 't', 'u', 'w', 'x', 'y', 'z'}\n    };\n\n\n    for (int i = 0; i &lt; ROWS; i++)\n\n    {\n        for (int j = 0; j &lt; COLUMNS; ++j)\n\n        {\n            //generates a random index number\n\n            int index1 = rand() % 5; //random numbers 0 to 5\n\n            int index2 = rand() % 10; //random numbers 0 to 10\n\n\n            //swaps harf [i][j] with harf [index1][index2] for it won't be repating itself\n\n            char temp = harf[i][j];\n\n            harf[i][j] = harf[index1][index2];\n\n            harf[index1][index2] = temp;\n        }\n    }\n\n    //printing header and random order matrix\n\n    cout &lt;&lt; \"Random and nonrecurring matrix\" &lt;&lt; endl &lt;&lt; endl;\n\n    for (int i = 0; i &lt; ROWS; ++i)\n\n    {\n\n        for (int j = 0; j &lt; COLUMNS; ++j)\n\n            cout &lt;&lt; harf[i][j] &lt;&lt; \"     \";\n\n        cout &lt;&lt; endl &lt;&lt; endl;\n\n    }\n</code></pre>\n\n<p>I tried to make this way;</p>\n\n<blockquote>\n  <p>char harf[ROWS][COLUMNS];</p>\n  \n  <p>for (int i = 0; i &lt; ROWS; i++)</p>\n  \n  <p>{     for (int j = 0; j &lt; COLUMNS; ++j)</p>\n  \n  <p>{</p>\n\n<pre><code>  harf[i][j] = rand() % 25 + 65 &amp;&amp; rand() % 25 + 97;      } }\n</code></pre>\n</blockquote>\n\n<p>I also tried the same thing with  \" || \" but does not seem to work.</p>\n\n<p>Since this is an assignment I can not use anything more advanced than this kind of expressions. Can someone please tell me how to put the English alphabet into that matrix? </p>\n"}, {"tags": ["c++", "regex"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 2, "creation_date": 1542828376, "post_id": 53419226, "comment_id": 93712631, "body": "The rest of the code is a regular expression."}, {"owner": {"reputation": 91, "user_id": 7663764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d3475e513fba0436d17b926a890b884?s=128&d=identicon&r=PG&f=1", "display_name": "KenB", "link": "https://stackoverflow.com/users/7663764/kenb"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1542828451, "post_id": 53419226, "comment_id": 93712670, "body": "Yes, my question is what does it mean? What is it trying to do?"}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1542828467, "post_id": 53419226, "comment_id": 93712677, "body": "I don&#39;t envy you at all, C++11 has a lot of good stuff that&#39;s missing in C++98. And regular expressions are much harder to read than they are to write."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1542829019, "post_id": 53419226, "comment_id": 93712941, "body": "Have you tried reading a regexp tutorial, such as www.regular-expression.info?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1542829071, "post_id": 53419226, "comment_id": 93712963, "body": "You can also paste the regexp into regex101.com. It will show a description of what each piece means."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1542829400, "post_id": 53419226, "comment_id": 93713115, "body": "Regular expressions are a good example of write-only languages."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1542829470, "post_id": 53419226, "comment_id": 93713133, "body": "If the linked question doesn&#39;t answer your question ((it lists the languages it covers, and C++ isn&#39;t one of them - OTOH, this is all pretty basic), @mention me, and I will reopen it."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1542829570, "post_id": 53419226, "comment_id": 93713176, "body": "Your options are: 1. Use Boost Regexp.  2.  Rewrite the parser by hand.  3.  Rewrite using (eg) flex/bison.  4.  Decide that all the previous are too expensive, and (biting the bullet) upgrade to C++11."}, {"owner": {"reputation": 91, "user_id": 7663764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d3475e513fba0436d17b926a890b884?s=128&d=identicon&r=PG&f=1", "display_name": "KenB", "link": "https://stackoverflow.com/users/7663764/kenb"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1542829598, "post_id": 53419226, "comment_id": 93713185, "body": "@MartinBonner I still couldn&#39;t figure it out, I&#39;d a look over the internet, although I guess I`m fairly new to programming."}, {"owner": {"reputation": 91, "user_id": 7663764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d3475e513fba0436d17b926a890b884?s=128&d=identicon&r=PG&f=1", "display_name": "KenB", "link": "https://stackoverflow.com/users/7663764/kenb"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1542829658, "post_id": 53419226, "comment_id": 93713209, "body": "@MartinBonner unfortunately, I&#39;m going to have to go with the second option and rewrite this by hand, which is why I wanted to understand it first."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1542829814, "post_id": 53419226, "comment_id": 93713280, "body": "So why doesn&#39;t the linked duplicate cover your question?"}, {"owner": {"reputation": 91, "user_id": 7663764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d3475e513fba0436d17b926a890b884?s=128&d=identicon&r=PG&f=1", "display_name": "KenB", "link": "https://stackoverflow.com/users/7663764/kenb"}, "edited": false, "score": 0, "creation_date": 1542830411, "post_id": 53419226, "comment_id": 93713552, "body": "I honestly still don&#39;t understand the answer to my question"}, {"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "edited": false, "score": 1, "creation_date": 1542833076, "post_id": 53419226, "comment_id": 93714669, "body": "I can&#39;t answer since it&#39;s been marked as duplicate unfortunately. Did something like regex101.com not solve explain it well enough?"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1542836644, "post_id": 53419226, "comment_id": 93716144, "body": "It is a dupe of &quot;What does this regex mean&quot; because all you need to understand a simple regex like this is there. There are tons of links to online regex debuggers. See <a href=\"https://regex101.com/r/szSyRA/1\" rel=\"nofollow noreferrer\">your pattern explanation and demo</a>. It the same as <a href=\"https://regex101.com/r/szSyRA/3\" rel=\"nofollow noreferrer\">this one without capturing groups</a>."}], "owner": {"reputation": 91, "user_id": 7663764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d3475e513fba0436d17b926a890b884?s=128&d=identicon&r=PG&f=1", "display_name": "KenB", "link": "https://stackoverflow.com/users/7663764/kenb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "closed_date": 1542829222, "answer_count": 0, "score": 3, "last_activity_date": 1542828288, "creation_date": 1542828288, "question_id": 53419226, "link": "https://stackoverflow.com/questions/53419226/what-does-this-convoluted-regex-line-do-in-c", "closed_reason": "Duplicate", "title": "What does this convoluted regex line do in c++", "body": "<p>I've a C++11 file using regex that I'm converting to a C++98 file. In the file, I've this line that does some manipulation that I don't understand.</p>\n\n<p><code>regex separator_regex(R\"((([[:alpha:]]:[^:;]*)|([^:;]*))([:;]|$))\");</code>.</p>\n\n<p>If I'm correct, <code>seperator_regex</code> is a regex class, and R is used as a raw string literal so the code doesn't exit out. However, what is the rest of the snippet trying to do?</p>\n"}, {"tags": ["c++", "arrays", "object", "boost"], "comments": [{"owner": {"reputation": 1494, "user_id": 5962321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kaylT.png?s=128&g=1", "display_name": "Silmathoron", "link": "https://stackoverflow.com/users/5962321/silmathoron"}, "edited": false, "score": 0, "creation_date": 1542828719, "post_id": 53419171, "comment_id": 93712788, "body": "Hi Allan Paz, from your question, it is not clear what the problem is; could you specify what goes wrong? (error message, wrong output...) so it is easier for other people to answer your question?"}, {"owner": {"reputation": 1, "user_id": 5969055, "user_type": "registered", "profile_image": "https://graph.facebook.com/984386648275643/picture?type=large", "display_name": "Allan Paz", "link": "https://stackoverflow.com/users/5969055/allan-paz"}, "reply_to_user": {"reputation": 1494, "user_id": 5962321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kaylT.png?s=128&g=1", "display_name": "Silmathoron", "link": "https://stackoverflow.com/users/5962321/silmathoron"}, "edited": false, "score": 0, "creation_date": 1542889458, "post_id": 53419171, "comment_id": 93735750, "body": "Sure, I&#39;m having difficulties to insert an array (the lppPhysical) inside the cassettes (array of objects) like the above structure. My code only inserts the IppPhysical as an object in the cassettes."}, {"owner": {"reputation": 1494, "user_id": 5962321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kaylT.png?s=128&g=1", "display_name": "Silmathoron", "link": "https://stackoverflow.com/users/5962321/silmathoron"}, "edited": false, "score": 0, "creation_date": 1542894021, "post_id": 53419171, "comment_id": 93738191, "body": "This is still unclear... Am I then correct in assuming that the structure you posted is your current output and that it is not what you want? If so could you please post the desired output?"}, {"owner": {"reputation": 1, "user_id": 5969055, "user_type": "registered", "profile_image": "https://graph.facebook.com/984386648275643/picture?type=large", "display_name": "Allan Paz", "link": "https://stackoverflow.com/users/5969055/allan-paz"}, "reply_to_user": {"reputation": 1494, "user_id": 5962321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kaylT.png?s=128&g=1", "display_name": "Silmathoron", "link": "https://stackoverflow.com/users/5962321/silmathoron"}, "edited": false, "score": 0, "creation_date": 1542894633, "post_id": 53419171, "comment_id": 93738550, "body": "The mentioned structure is the correct one(mock), I need to translate this structure using boost library, but I am having difficulties on the lppPhysical part(Insert an array of objects as a child of the cassettes, which is an array of objects."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5969055, "user_type": "registered", "profile_image": "https://graph.facebook.com/984386648275643/picture?type=large", "display_name": "Allan Paz", "link": "https://stackoverflow.com/users/5969055/allan-paz"}, "is_accepted": false, "score": 0, "last_activity_date": 1542981517, "creation_date": 1542981517, "answer_id": 53448062, "question_id": 53419171, "link": "https://stackoverflow.com/questions/53419171/iam-having-some-problems-with-boost-json-in-c/53448062#53448062", "title": "I&#39;am having some problems with boost json in c++", "body": "<p>Finally found a solution to my case, it's pretty simple but was hard to find since I am not too familiar with this library.</p>\n\n<pre><code>        //LppPhysical insertion\n        lppPhysicalInfo.put(\"positionName\", ph_unit-&gt;lpPhysicalPositionName);\n        lppPhysicalInfo.put(\"count\", cash_unit-&gt;ulCount);\n        lppPhysical.push_back(std::make_pair(\"\", lppPhysicalInfo));\n\n        //Cassettes insertions\n        cassettesInfo.put(\"value\", cash_unit-&gt;ulValues);\n        cassettesInfo.put(\"currency\", std::string(cash_unit-&gt;cCurrencyID).substr(0, 3));\n        cassettesInfo.put(\"CDMType\", cash_unit-&gt;usType);\n        cassettesInfo.add_child(\"lppPhysical\", lppPhysical.get_child(\"\"));\n        cassettes.push_back(std::make_pair(\"\", cassettesInfo));\n\n        //External information insertion\n        arquivo.put(\"event_date\", \"DateValue\");\n        arquivo.put(\"event_log\", \"LogValue\");\n        arquivo.add_child(\"cassettes\", cassettes);\n\n        //Json creator\n        write_json(\"C:\\\\Temp\\\\assassino.json\", arquivo); \n</code></pre>\n\n<p>On the lppPhysical I just make a pair with all its content and on the Cassettes' insertion I just added the lppPhysical as a child of the cassettes and that's it. Now the lppPhysical is an array of object insde the Cassettes which is also an array of objects</p>\n"}], "owner": {"reputation": 1, "user_id": 5969055, "user_type": "registered", "profile_image": "https://graph.facebook.com/984386648275643/picture?type=large", "display_name": "Allan Paz", "link": "https://stackoverflow.com/users/5969055/allan-paz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542981517, "creation_date": 1542828047, "last_edit_date": 1542830447, "question_id": 53419171, "link": "https://stackoverflow.com/questions/53419171/iam-having-some-problems-with-boost-json-in-c", "title": "I&#39;am having some problems with boost json in c++", "body": "<p>I see that have a lot of questions very similar to mine, but I don\u00b4t see any solutions that fit with my problem.</p>\n\n<p>I' am trying to create a JSON with boost library with the below structure:</p>\n\n<pre><code>{\n  \"event_date\": \"2018-06-11T09:35:48.867Z\",\n  \"event_log\": \"2018-06-11 09:35:43,253 - recycler [TRACE]: Running recycler::WITHDRAW\",\n  \"cassettes\": [\n      {\n          \"value\" : \"0\",\n          \"currency\": \"BRL\",\n          \"CDMType\" : \"WFS_CDM_TYPEREJECTCASSETTE\",\n          \"lppPhysical\" : [\n              {\n                  \"positionName\" : \"BIN1A\",\n                  \"count\" : \"3\"\n              }\n          ]\n      },\n      {.....},{.....}\n    ]\n}\n</code></pre>\n\n<p>Below we will have the code that I have now:</p>\n\n<pre><code>boost::property_tree::ptree children, children2, child, child1, child2, child3, child4, child5, cassettes;\n\nchild1.put(\"value\", \"cash_unit-&gt;ulValues\");\nchild2.put(\"currency\", \"std::string(cash_unit-&gt;cCurrencyID).substr(0, 3)\");\nchild3.put(\"CDMType\", \"cash_unit-&gt;usType\");\n\nchild4.put(\"lppPhysical.positionName\", \"ph_unit-&gt;lpPhysicalPositionName\");\nchild5.put(\"lppPhysical.count\", \"cash_unit-&gt;ulCount\");\n\ncassettes.put(\"event_date\", \"2018-06-11T09:35:48.867Z\");\ncassettes.put(\"event_log\", \"2018-06-11 09:35:43,253 - recycler [TRACE]: Running recycler::WITHDRAW\");\n\nchildren.push_back(std::make_pair(\"\", child1));\nchildren.push_back(std::make_pair(\"\", child2));\nchildren.push_back(std::make_pair(\"\", child3));\n\nchildren2.push_back(std::make_pair(\"\", child4));\nchildren2.push_back(std::make_pair(\"\", child5));\n\ncassettes.add_child(\"cassettes\", children);\n\nwrite_json(\"C:\\\\Temp\\\\test.json\", cassettes);`\n</code></pre>\n\n<p>Summarizing, I'm having difficulties to put an array of objects inside of an array of objects.</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1542828604, "post_id": 53419156, "comment_id": 93712732, "body": "Somewhat related: <code>char lab_names[5][2];</code> can only store 1 letter plus a null terminator per person. If <code>std:: string</code> is available for use consider <code>string lab_names[5][2];</code> This will hold whole names, allocating space as required. Note that the way the data is stored will give you problems with names like Victor Von Doom, and Von Doom is not the sort of person you should upset by getting his name wrong."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1542828725, "post_id": 53419156, "comment_id": 93712789, "body": "You are headed in a generally bad direction. Start by reading your way through the file token by token (in this case a token would be anything surrounded by whitespace) and writing it to the console. Once you can correctly read a file you can consider moving on to reading and storing. The <code>&gt;&gt;</code> should help you greatly."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1542829450, "post_id": 53419156, "comment_id": 93713127, "body": "Opening the same file twice at the same time is not a good idea. Usually the second opener loses and the file fails to open. If you want to read a file and write to the file, 1. open the file for reading. 2. read the file into memory 3. close the file. 4. update the copy of the file in memory. 5. open the file for writing. overwrite the file with the copy in memory. Trying to modify a text file in place reading and writing at the same time sounds more efficient but is orders of magnitude more difficult and that soaks up any savings darn fast."}, {"owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 0, "creation_date": 1542830491, "post_id": 53419156, "comment_id": 93713589, "body": "You are asked to use <code>getline</code> but you use <code>get</code>"}], "owner": {"reputation": 1, "user_id": 10687610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f743cd598d33e7f6ce752bbb495fd608?s=128&d=identicon&r=PG&f=1", "display_name": "drakefire", "link": "https://stackoverflow.com/users/10687610/drakefire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542831139, "creation_date": 1542827981, "last_edit_date": 1542831139, "question_id": 53419156, "link": "https://stackoverflow.com/questions/53419156/placing-two-2-d-arrays-into-a-text-file", "title": "Placing two 2-d arrays into a text file", "body": "<p>I'm having trouble getting a code that takes an array input of first name and last name, and another array that stores lab scores. </p>\n\n<p>The rules I have to follow are.</p>\n\n<ol>\n<li><p>Initialize 2D char arrays by taking input from user, using cin.getline() function instead of cin. This 2D array holds the name record for all five students, where each row corresponds to one student.</p></li>\n<li><p>Initialize 2D int type array for lab scores using rand() function with not lab score being greater than 10. This 2D array hold score of total 4 labs of all students/</p></li>\n<li><p>Finallys write the data into a text file in the following format, where the first row should be written as it is:\nExample:</p></li>\n</ol>\n\n<p>Name1 Lname1 7 6 3 5</p>\n\n<p>Name2 Lname2 10 2 6 7</p>\n\n<p>.</p>\n\n<p>.</p>\n\n<p>Name5 Lname5 6 5 4 3 </p>\n\n<p>This is my code so far:</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\nusing namespace std;\n\nint main()\n{\n    ofstream fout, fin;\n    char lab_names[5][2];\n    int lab_grades[5][4];\n    fout.open(\"lab_grade.txt\",ios::app);\n    fin.open(\"lab_grade.txt\",ios::app);\n\n    for(int i=0; i&lt;4; i++)\n    {\n        for(int k=0; k&lt;5; k++)\n        {\n            if(lab_names[i][k]==lab_names[0][0])\n            {\n                cin.get(lab_names[0][0]);\n            }\n            if(lab_names[i][k]==lab_names[0][1])\n            {\n                cin.get(lab_names[0][1]);\n            }\n            if(lab_names[i][k]==lab_names[1][0])\n            {\n                cin.get(lab_names[5][2]);\n            }\n            if(lab_names[i][k]==lab_names[1][1])\n            {\n                cin.get(lab_names[5][2]);\n            }\n            if(lab_names[i][k]==lab_names[2][0])\n            {\n                cin.get(lab_names[5][2]);\n            }\n            if(lab_names[i][k]==lab_names[2][1])\n            {\n                cin.get(lab_names[5][2]);\n            }\n            if(lab_names[i][k]==lab_names[3][0])\n            {\n                cin.get(lab_names[5][2]);\n            }\n            if(lab_names[i][k]==lab_names[3][1])\n            {\n                cin.get(lab_names[5][2]);\n            }\n            if(lab_names[i][k]==lab_names[4][0])\n            {\n                cin.get(lab_names[5][2]);\n            }\n            if(lab_names[i][k]==lab_names[4][1])\n            {\n                cin.get(lab_names[5][2]);\n            }\n            else\n            {\n                lab_grades[i][k]=rand()%10+1;\n            }\n\n        }\n        cout&lt;&lt;\"\\n\";\n    }\n                fout&lt;&lt;lab_grades;\n            fout.close();\n            return 0;\n}\n</code></pre>\n\n<p>Can someone help me get this sorted out?</p>\n\n<p>When I use getline it causes several problems and doesn't allow the program to even attempt to run.</p>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 1494, "user_id": 5962321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kaylT.png?s=128&g=1", "display_name": "Silmathoron", "link": "https://stackoverflow.com/users/5962321/silmathoron"}, "edited": false, "score": 1, "creation_date": 1542829312, "post_id": 53419147, "comment_id": 93713068, "body": "Hi bartlomiej.n, this looks quite surprising, could you also include the output from <code>cmake .</code> run from source dir, and check whether you indeed mentioned all cmake file in you questions?"}, {"owner": {"reputation": 1494, "user_id": 5962321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kaylT.png?s=128&g=1", "display_name": "Silmathoron", "link": "https://stackoverflow.com/users/5962321/silmathoron"}, "edited": false, "score": 1, "creation_date": 1542829396, "post_id": 53419147, "comment_id": 93713109, "body": "Otherwise, possible problems on Windows usually come from whitespaces in the folder names (e.g. &quot;Program Files&quot;), so you might want to quote all your paths, though I don&#39;t see why this would not happen with <code>cmake .</code>..."}, {"owner": {"reputation": 410, "user_id": 3592913, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1594603418/picture?type=large", "display_name": "bartlomiej.n", "link": "https://stackoverflow.com/users/3592913/bartlomiej-n"}, "reply_to_user": {"reputation": 1494, "user_id": 5962321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kaylT.png?s=128&g=1", "display_name": "Silmathoron", "link": "https://stackoverflow.com/users/5962321/silmathoron"}, "edited": false, "score": 0, "creation_date": 1542889518, "post_id": 53419147, "comment_id": 93735789, "body": "Yes, I included the whole <code>CMakeLists.txt</code> file here. There&#39;s not much more in the project really except for that - a &quot;hello world&quot; <code>main.cpp</code> file and Vulkan headers/libraries in the <code>lib</code> folder the project. There is no whitespace in folder names anywhere. C/C++ compilers are recognized without a problem on <code>cmake .</code>. I&#39;ll provide the output of this command later today on both platforms once I get back from work."}, {"owner": {"reputation": 1494, "user_id": 5962321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kaylT.png?s=128&g=1", "display_name": "Silmathoron", "link": "https://stackoverflow.com/users/5962321/silmathoron"}, "edited": false, "score": 1, "creation_date": 1543009698, "post_id": 53419147, "comment_id": 93779065, "body": "did you make any progress on this issue? I&#39;m curious about what could cause this..."}, {"owner": {"reputation": 410, "user_id": 3592913, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1594603418/picture?type=large", "display_name": "bartlomiej.n", "link": "https://stackoverflow.com/users/3592913/bartlomiej-n"}, "reply_to_user": {"reputation": 1494, "user_id": 5962321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kaylT.png?s=128&g=1", "display_name": "Silmathoron", "link": "https://stackoverflow.com/users/5962321/silmathoron"}, "edited": false, "score": 0, "creation_date": 1543079888, "post_id": 53419147, "comment_id": 93792631, "body": "I&#39;m working on it. Provided output from working <code>cmake ..</code> on Ubuntu above. What makes this case even weirder is that i moved up from the root project directory to its parent, created a test directory and ran <code>cmake ..\\hello-vulkan</code> from there on Windows... and everything succeeded."}, {"owner": {"reputation": 1494, "user_id": 5962321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kaylT.png?s=128&g=1", "display_name": "Silmathoron", "link": "https://stackoverflow.com/users/5962321/silmathoron"}, "edited": false, "score": 1, "creation_date": 1543080056, "post_id": 53419147, "comment_id": 93792688, "body": "did you try forcing the compiler? you can find an example <a href=\"https://stackoverflow.com/questions/23235601/cmake-the-c-compiler-identification-is-unknown\">here</a>"}, {"owner": {"reputation": 410, "user_id": 3592913, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1594603418/picture?type=large", "display_name": "bartlomiej.n", "link": "https://stackoverflow.com/users/3592913/bartlomiej-n"}, "reply_to_user": {"reputation": 1494, "user_id": 5962321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kaylT.png?s=128&g=1", "display_name": "Silmathoron", "link": "https://stackoverflow.com/users/5962321/silmathoron"}, "edited": false, "score": 0, "creation_date": 1543082454, "post_id": 53419147, "comment_id": 93793302, "body": "@Silmathoron Forcing the generator to <code>cmake -G &quot;Visual Studio 15 2017&quot; ..</code> seems to work. Thank you! No idea why does this happen just for this directory. It&#39;s completely empty :)"}, {"owner": {"reputation": 410, "user_id": 3592913, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1594603418/picture?type=large", "display_name": "bartlomiej.n", "link": "https://stackoverflow.com/users/3592913/bartlomiej-n"}, "reply_to_user": {"reputation": 1494, "user_id": 5962321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kaylT.png?s=128&g=1", "display_name": "Silmathoron", "link": "https://stackoverflow.com/users/5962321/silmathoron"}, "edited": false, "score": 0, "creation_date": 1543083081, "post_id": 53419147, "comment_id": 93793474, "body": "Ok, it seems that something must&#39;ve been changed in the meantime, since it works even without forcing the compiler now. No idea, but it seems to work without specifying the generator now"}, {"owner": {"reputation": 1494, "user_id": 5962321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kaylT.png?s=128&g=1", "display_name": "Silmathoron", "link": "https://stackoverflow.com/users/5962321/silmathoron"}, "edited": false, "score": 0, "creation_date": 1543083439, "post_id": 53419147, "comment_id": 93793584, "body": "Mhh, this sounds like an outdated cmake cache that you forgot to clear ^^"}, {"owner": {"reputation": 410, "user_id": 3592913, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1594603418/picture?type=large", "display_name": "bartlomiej.n", "link": "https://stackoverflow.com/users/3592913/bartlomiej-n"}, "reply_to_user": {"reputation": 1494, "user_id": 5962321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kaylT.png?s=128&g=1", "display_name": "Silmathoron", "link": "https://stackoverflow.com/users/5962321/silmathoron"}, "edited": false, "score": 0, "creation_date": 1543086291, "post_id": 53419147, "comment_id": 93794280, "body": "That is entirely possible :)"}], "owner": {"reputation": 410, "user_id": 3592913, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1594603418/picture?type=large", "display_name": "bartlomiej.n", "link": "https://stackoverflow.com/users/3592913/bartlomiej-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 412, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543079460, "creation_date": 1542827958, "last_edit_date": 1543079460, "question_id": 53419147, "link": "https://stackoverflow.com/questions/53419147/running-cmake-in-a-different-build-directory-on-windows", "title": "Running cmake in a different build directory on Windows", "body": "<p>I run CMake using <code>cmake ..</code> in order to make it output all the generated files in a different directory. This runs fine on Ubuntu, but breaks on Windows 10 when I try to run it. Running <code>cmake .</code> from the root project directory seems to work fine on both platforms. The output of <code>cmake ..</code> on Windows is:</p>\n\n<pre><code>PS D:\\Development\\cpp\\hello-vulkan\\build&gt; cmake ..\n-- Building for: Visual Studio 15 2017\n-- Selecting Windows SDK version 10.0.16299.0 to target Windows 10.0.17134.\n-- The C compiler identification is unknown\n-- The CXX compiler identification is unknown\nCMake Error at CMakeLists.txt:3 (project):\n  No CMAKE_C_COMPILER could be found.\nCMake Error at CMakeLists.txt:3 (project):\n  No CMAKE_CXX_COMPILER could be found.\n-- Configuring incomplete, errors occurred!\n</code></pre>\n\n<p>The CMakeLists.txt is specified here: </p>\n\n<pre><code>include(${CMAKE_ROOT}/Modules/ExternalProject.cmake)\ncmake_minimum_required(VERSION 3.10)\nproject(hello_vulkan)\n\n# Download and setup GLFW\nset(GLFW_DIR        ${PROJECT_SOURCE_DIR}/lib/glfw)\nset(GLFW_BINARY_DIR ${GLFW_DIR}/bin)\nExternalProject_Add(\n    glfw\n    PREFIX         ${GLFW_DIR}\n    GIT_REPOSITORY https://github.com/glfw/glfw.git\n    GIT_TAG        3.2.1\n    INSTALL_DIR    ${GLFW_BINARY_DIR}\n    CMAKE_ARGS     -DCMAKE_INSTALL_PREFIX=${GLFW_BINARY_DIR}\n)\n\n# Link Vulkan and GLFW\nset(VULKAN_DIR      ${PROJECT_SOURCE_DIR}/lib/vulkan)\ninclude_directories(${VULKAN_DIR}/include)\nlink_directories(\n    ${VULKAN_DIR}/lib\n    ${GLFW_BINARY_DIR}\n)\n\n# Setup project\nset(CMAKE_CXX_STANDARD             17)\nset(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin)\nset(EXECUTABLE_OUTPUT_PATH         ${PROJECT_SOURCE_DIR}/build/)\nset(SOURCES                        source/main.cpp)\n\nadd_executable(hello_vulkan ${SOURCES})\nadd_dependencies(hello_vulkan glfw)\n</code></pre>\n\n<p>Any ideas what to do for it to work when running from a different directory on Windows?</p>\n\n<p>Edit:\nHere is the output from <code>cmake ..</code> on Ubuntu:</p>\n\n<pre><code>cmake ..\n-- The C compiler identification is GNU 7.3.0\n-- The CXX compiler identification is GNU 7.3.0\n-- Check for working C compiler: /usr/bin/cc\n-- Check for working C compiler: /usr/bin/cc -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Check for working CXX compiler: /usr/bin/c++\n-- Check for working CXX compiler: /usr/bin/c++ -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Configuring done\n-- Generating done\n-- Build files have been written to: /mnt/d/Development/cpp/hello-vulkan/build\n</code></pre>\n"}, {"tags": ["c++", "c++17", "constexpr", "if-constexpr"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1542827975, "post_id": 53419133, "comment_id": 93712423, "body": "What&#39;s the intent here of using <code>constexpr</code>? Why not a template?"}, {"owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 4, "creation_date": 1542827990, "post_id": 53419133, "comment_id": 93712429, "body": "constexpr cannot have side effects, thus this would be contradictory"}, {"owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 0, "creation_date": 1542828068, "post_id": 53419133, "comment_id": 93712477, "body": "BTW, you can have your constructor constexpr, thus I don&#39;t get the use case..."}, {"owner": {"reputation": 788, "user_id": 5677080, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/lfQXf.jpg?s=128&g=1", "display_name": "Martin Kopeck&#253;", "link": "https://stackoverflow.com/users/5677080/martin-kopeck%c3%bd"}, "edited": false, "score": 0, "creation_date": 1542828245, "post_id": 53419133, "comment_id": 93712567, "body": "My Task is to do custom O(1) memory pool based allocation. I need to evaluate the count at compile time to select appropriate memory partition having chunks of adequate size."}, {"owner": {"reputation": 788, "user_id": 5677080, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/lfQXf.jpg?s=128&g=1", "display_name": "Martin Kopeck&#253;", "link": "https://stackoverflow.com/users/5677080/martin-kopeck%c3%bd"}, "edited": false, "score": 0, "creation_date": 1542828291, "post_id": 53419133, "comment_id": 93712593, "body": "The operator new can be made templated?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1542828699, "post_id": 53419133, "comment_id": 93712782, "body": "There is no such thing as compile-time dynamic memory allocation. Allocating memory for your program at compile time is by definition just specifying a quantity of static memory necessary at runtime. If you can calculate at compile time you need <code>N</code> bytes at runtime for your task, then just have a properly aligned <code>static</code> buffer of size <code>N</code>."}, {"owner": {"reputation": 788, "user_id": 5677080, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/lfQXf.jpg?s=128&g=1", "display_name": "Martin Kopeck&#253;", "link": "https://stackoverflow.com/users/5677080/martin-kopeck%c3%bd"}, "edited": false, "score": 0, "creation_date": 1542828852, "post_id": 53419133, "comment_id": 93712859, "body": "The memory chunks are made statically while the dynamic allocation itself is substituted by assigning the chunk from the memory pool..."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1542830548, "post_id": 53419133, "comment_id": 93713616, "body": "I can&#39;t see how this would work, conceptually. Either you know at compile time what address will be returned, or you don&#39;t. The first case is compatible with <code>constexpr</code>, the second with dynamic memory allocation."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 5, "creation_date": 1542830645, "post_id": 53419133, "comment_id": 93713655, "body": "It doesn&#39;t matter anyway. [expr.const] prohibits <i>new-expression</i>s in constant expressions across the board."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 6, "creation_date": 1542831016, "post_id": 53419133, "comment_id": 93713805, "body": "You want to look at the C++2a papers trying to make everything constexpr."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1542835641, "post_id": 53419133, "comment_id": 93715762, "body": "@Fran&#231;oisAndrieux Read this: <a href=\"http://open-std.org/JTC1/SC22/WG21/docs/papers/2018/p0784r1.html\" rel=\"nofollow noreferrer\">open-std.org/JTC1/SC22/WG21/docs/papers/2018/p0784r1.html</a>"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1582713911, "post_id": 53419133, "comment_id": 106869752, "body": "Man, these comments did <i>not</i> age well \u2026"}], "answers": [{"comments": [{"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 1, "creation_date": 1542831540, "post_id": 53419646, "comment_id": 93714021, "body": "I&#39;m not 100% sure that this is correct. Doesn&#39;t this talk about the case when there are several declarations of the same function (with the same signature)? I don&#39;t really see the rationale behind, if one overload was <code>constexpr</code>, then all of them must be <code>constexpr</code> as well."}, {"owner": {"reputation": 2984, "user_id": 525578, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0c69739c03de1550680e5d24874c927?s=128&d=identicon&r=PG", "display_name": "Serg", "link": "https://stackoverflow.com/users/525578/serg"}, "edited": false, "score": 0, "creation_date": 1568556698, "post_id": 53419646, "comment_id": 102303498, "body": "Which version of standard has been mentioned?"}], "tags": [], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "is_accepted": false, "score": 4, "last_activity_date": 1542830807, "last_edit_date": 1542830807, "creation_date": 1542830293, "answer_id": 53419646, "question_id": 53419133, "link": "https://stackoverflow.com/questions/53419133/constexpr-operator-new/53419646#53419646", "title": "Constexpr operator new", "body": "<p>You can't overload operator <code>new</code> to be <code>constexpr</code>, the main problem is attributed to the C++ standard directive <em>\u00a79.1.5/1 The <code>constexpr</code> specifier [dcl.constexpr]</em> (<strong>Emphasis Mine</strong>):</p>\n\n<blockquote>\n  <p>The <code>constexpr</code> specifier shall be applied only to the definition of a\n  variable or variable template or the declaration of a function or\n  function template. A function or static data member declared with the\n  <code>constexpr</code> specifier is implicitly an inline function or variable\n  (9.1.6). <strong>If any declaration of a function or function template has a\n  <code>constexpr</code> specifier, then all its declarations shall contain the\n  <code>constexpr</code> specifier</strong>.</p>\n</blockquote>\n\n<p>That is, in order to overload operator <code>new</code> all its previous declarations must also be <code>constexpr</code>, which they aren't and thus overloading it as <code>constexpr</code> you get a compile time error.</p>\n"}], "owner": {"reputation": 788, "user_id": 5677080, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/lfQXf.jpg?s=128&g=1", "display_name": "Martin Kopeck&#253;", "link": "https://stackoverflow.com/users/5677080/martin-kopeck%c3%bd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1498, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1548515855, "creation_date": 1542827915, "last_edit_date": 1548515855, "question_id": 53419133, "link": "https://stackoverflow.com/questions/53419133/constexpr-operator-new", "title": "Constexpr operator new", "body": "<p>Is it possible to overload the operator new to be constexpr function? Something like:</p>\n\n<pre><code>constexpr void * operator new( std::size_t count );\n</code></pre>\n\n<p>The reason why would be to execute constexpr function within the overloaded operator body where count argument value would be an input data... As the operator is invoked by:</p>\n\n<pre><code>SomeClass * foo = new SomeClass(); \n</code></pre>\n\n<p>The size of the data type is know at compile time, isn\u2019t it? (<code>count== sizeof(SomeClass)</code>) So the count can be considered as compile time constant? </p>\n\n<pre><code>constexpr void * operator new( std::size_t count )\n{\n  if constexpr ( count &gt;= 10 ) { /* do some compile-time business */ }\n}\n</code></pre>\n\n<p>Many thanks in advance to anyone willing to help!</p>\n"}, {"tags": ["c++", "arrays", "multidimensional-array"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1542827406, "post_id": 53418957, "comment_id": 93712194, "body": "<code>rand()</code> returns a number between 0 and RAND_MAX. You can normalize it with <code>(float)rand() &#47; RAND_MAX</code>, which will give a number between 0 and 1."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1542827496, "post_id": 53418957, "comment_id": 93712229, "body": "But modern C++ has better ways to do this: <a href=\"https://en.cppreference.com/w/cpp/numeric/random\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/numeric/random</a>"}, {"owner": {"reputation": 65, "user_id": 9627705, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-duEOc0wEUNg/AAAAAAAAAAI/AAAAAAAAAH4/Ji-CS4SYZVo/photo.jpg?sz=128", "display_name": "Jake Blazer", "link": "https://stackoverflow.com/users/9627705/jake-blazer"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1542827600, "post_id": 53418957, "comment_id": 93712270, "body": "Yes that works, but I get decimals, I want whole numbers"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1542827661, "post_id": 53418957, "comment_id": 93712294, "body": "<code>rand() % 4 + 1</code>."}, {"owner": {"reputation": 65, "user_id": 9627705, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-duEOc0wEUNg/AAAAAAAAAAI/AAAAAAAAAH4/Ji-CS4SYZVo/photo.jpg?sz=128", "display_name": "Jake Blazer", "link": "https://stackoverflow.com/users/9627705/jake-blazer"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1542827748, "post_id": 53418957, "comment_id": 93712330, "body": "Awesome, thank you Johnny :) Appreciate the help"}], "owner": {"reputation": 65, "user_id": 9627705, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-duEOc0wEUNg/AAAAAAAAAAI/AAAAAAAAAH4/Ji-CS4SYZVo/photo.jpg?sz=128", "display_name": "Jake Blazer", "link": "https://stackoverflow.com/users/9627705/jake-blazer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "closed_date": 1542827384, "answer_count": 0, "score": 1, "last_activity_date": 1542827162, "creation_date": 1542827162, "question_id": 53418957, "link": "https://stackoverflow.com/questions/53418957/how-do-i-fill-my-2d-array-with-random-numbers", "closed_reason": "Duplicate", "title": "How do I fill my 2D array with random numbers?", "body": "<p>I am trying to fill my 2D array with random numbers, but I get random big numbers rather than random numbers between 1 and 4</p>\n\n<p>Here is what I am trying to accomplish:</p>\n\n<ul>\n<li>When user is asked: Enter a number between 1 and 12 : (user enters) <strong>5</strong></li>\n<li>The user will get a 5x5 Array since they entered 5</li>\n<li>Then I want to fill the 2D array with random numbers between 1 and 4</li>\n</ul>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdio&gt;\n#include &lt;cmath&gt;\n#include &lt;cstdlib&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\ndouble Atemp = 0;\ndouble Utemp = 0;\ndouble Working = 0;\ndouble Total = 0;\nchar Answer = 'x';\nint Umain;\nconst int LG_GRID = 12;\nconst int ROWS = 3;\nconst int COLS = 3;\nconst float DIV = 4;\n\ntypedef float Table[ROWS][COLS];\n\n\nvoid displayOverview ();\n\nvoid playOrQuit();\n\nvoid promptNumber();\n\nvoid outputSubSquare(Table table, int x, int y);\nvoid fillTableWithRands(Table table);\nvoid outputTable(Table table);\n\n\nint main(){\n\n    displayOverview();\n\n    playOrQuit();\n\n    srand(time(NULL));\n    Table myTable;\n\n    fillTableWithRands(myTable);\n    outputTable(myTable);\n\n\n\n    return 0;\n}\n\nvoid displayOverview(){\n\n}\n\nvoid playOrQuit(){\n\n    string playOrNot;\n\n    cout &lt;&lt; \"If you want to play please press 'p' for play, and 'q' if you wish to quit\\n\";\n    cin &gt;&gt; playOrNot;\n\n    if(playOrNot == \"p\"){\n        cout &lt;&lt; \"Awesome, lets start playing !!! \\n\";\n\n    }if(playOrNot == \"q\"){\n        cout &lt;&lt; \"Alright then, see you soon !!\\n\";\n        exit(0);\n    }if(playOrNot != \"p\" &amp;&amp; playOrNot != \"q\"){\n        cout &lt;&lt; \"Invalid entry !!\\n\";\n        exit(0);\n    }\n}\n\n\nvoid promptNumber(){\n\n    do{\n      cout &lt;&lt; \"Please Enter numbers between 1 and 12: \";\n      cin &gt;&gt; Umain;\n      if(Umain &lt;= 12){\n            for (Utemp = Umain; Utemp &gt; 0; Utemp--){\n          cout &lt;&lt; \"Please enter a number between 1 and 4: \";\n          cin &gt;&gt; Atemp;\n            }\n      }else{\n    cout &lt;&lt; \"Not within limit :(\\n\";\n      }\n    }while (Answer == 'y');\n}\n\nvoid fillTableWithRands(Table table){\n\n  for(int i = 0; i&lt;ROWS; i++){\n    for (int j = 0; j&lt;COLS; j++){\n      table[i][j]  = (float)(rand())*DIV;\n    }\n  }\n}\n\nvoid outputTable(Table table){\n  for(int i = 0; i&lt;ROWS; i++){\n    for (int j = 0; j&lt;COLS; j++){\n      cout &lt;&lt; table[i][j] &lt;&lt; \"\\t\";\n    }\n    cout &lt;&lt; endl;\n  }\n}\n</code></pre>\n"}, {"tags": ["c++", "data-structures", "graph"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1542826273, "post_id": 53418725, "comment_id": 93711608, "body": "<code>std::map</code> does not provide <code>O(1)</code> lookup, it has <code>O(logN)</code> lookup. You need <code>std::unordered_map</code> for <code>O(1)</code> lookup."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1542826485, "post_id": 53418725, "comment_id": 93711733, "body": "You cannot beat an adjacency matrix in terms of sheer speed."}, {"owner": {"reputation": 67, "user_id": 3953728, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/3e7e884129fe50cd4f054200e8f566ea?s=128&d=identicon&r=PG&f=1", "display_name": "TheSalamander", "link": "https://stackoverflow.com/users/3953728/thesalamander"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1542826670, "post_id": 53418725, "comment_id": 93711818, "body": "@NathanOliver Thanks!"}, {"owner": {"reputation": 67, "user_id": 3953728, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/3e7e884129fe50cd4f054200e8f566ea?s=128&d=identicon&r=PG&f=1", "display_name": "TheSalamander", "link": "https://stackoverflow.com/users/3953728/thesalamander"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1542826721, "post_id": 53418725, "comment_id": 93711844, "body": "@n.m. How can you use an adjacency matrix for a multigraph? I would have used one if it were not a multigraph."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1542826987, "post_id": 53418725, "comment_id": 93711986, "body": "Matrix cells can contain any data. You can put the number of edges between the corresponding vertices there, or a list/set/container of edges if edges need to carry additional data."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1542826997, "post_id": 53418725, "comment_id": 93711990, "body": "Have you considered <code>std::multimap</code> or <code>std::unordered_multimap</code>?"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1542827647, "post_id": 53418725, "comment_id": 93712289, "body": "You also have a problem with the adjacency list being O(n) on a dense graph. You can reduce that to log n by keeping it sorted, but you can do better with <a href=\"https://en.cppreference.com/w/cpp/container/unordered_multiset\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/unordered_multiset</a> (although test it, I had some trouble understanding the &quot;equal_range&quot; lookup iteration the first time I used it.) Assuming the number of edges between two vertices is small compared to the total number of vertices, this should be O(1), although with some nasty constants compared to a full adjacency matrix, which takes space, but is fast. (If dense, already using that much space.)"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1542839008, "post_id": 53418725, "comment_id": 93716950, "body": "Do you have any guarantees or domain knowledge about number of edges M vs number of vertices N? In the worst case, M can be infinite (multigraph). Is M closer to N or N*N?"}, {"owner": {"reputation": 67, "user_id": 3953728, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/3e7e884129fe50cd4f054200e8f566ea?s=128&d=identicon&r=PG&f=1", "display_name": "TheSalamander", "link": "https://stackoverflow.com/users/3953728/thesalamander"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1542841001, "post_id": 53418725, "comment_id": 93717566, "body": "@KennyOstrom M is definitely closer to N for this multigraph."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 1, "creation_date": 1542900702, "post_id": 53418725, "comment_id": 93742032, "body": "My first recommendation would be to look for an existing graph library. Documented, publicly tested, probably already optimized. For home-projects, you say you mainly want fast lookup if edges are connected, so ... do you care that it&#39;s a multigraph? You can kind of ignore all the extras and use unordered_map&lt;unordered_set&gt;. I mention that option because multiple edges don&#39;t matter for &quot;is there an edge&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 1107, "user_id": 1979005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c41193776c04ed1d39c21ea82e4d0024?s=128&d=identicon&r=PG", "display_name": "ameed", "link": "https://stackoverflow.com/users/1979005/ameed"}, "is_accepted": false, "score": 0, "last_activity_date": 1543049605, "creation_date": 1543049605, "answer_id": 53456635, "question_id": 53418725, "link": "https://stackoverflow.com/questions/53418725/what-is-the-best-data-structure-to-represent-a-multigraph-using-stl-in-c/53456635#53456635", "title": "What is the best data structure to represent a multigraph using STL in C++?", "body": "<p>If the number of vertices N is small, it's probably easiest to use an adjacency matrix <code>unordered_map&lt;int, unordered_map&lt;int, int&gt;&gt; graph</code>, where <code>graph[u][v]</code> is the number of edges from <code>u</code> to <code>v</code>.</p>\n\n<p>If your vertex numbers all range from 0 to N&ndash;1, or 1 to N, or similar, you can simplify this to <code>vector&lt;vector&lt;int&gt;&gt; graph</code>, or even <code>int graph[][]</code> if N is known at compile time.</p>\n\n<p>If N is large, and if the graph is sparse, as you indicated (since M &approx; N), it's probably best to use a set for each vertex: <code>unordered_map&lt;int, unordered_set&lt;int&gt;&gt; graph</code> or <code>vector&lt;unordered_set&lt;int&gt;&gt; graph</code>, where <code>graph[u]</code> is the set of all vertices <code>v</code> with an edge from <code>u</code> to <code>v</code>.</p>\n\n<p>Notice that I'm using the <code>unordered_map</code> and <code>unordered_set</code> collections, which provide O(1) access on average. In the worst case, their performance is linear in the size of the map or set, as with any hash-based container.</p>\n\n<p>And if you don't want to deal with all this and want a ready-made solution, consider the Boost Graph Library, NGraph, LEMON, or Google OR-Tools.</p>\n"}], "owner": {"reputation": 67, "user_id": 3953728, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/3e7e884129fe50cd4f054200e8f566ea?s=128&d=identicon&r=PG&f=1", "display_name": "TheSalamander", "link": "https://stackoverflow.com/users/3953728/thesalamander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 380, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1543049605, "creation_date": 1542826088, "question_id": 53418725, "link": "https://stackoverflow.com/questions/53418725/what-is-the-best-data-structure-to-represent-a-multigraph-using-stl-in-c", "title": "What is the best data structure to represent a multigraph using STL in C++?", "body": "<p>I'm looking for some data structure to store a multigraph in C++ but I want to make use of the STL as much as possible. Currently I am using something similar to a seperate chaining hash table: <code>std::map&lt;int,std::vector&lt;int&gt;&gt;</code>. The key of the map is the vertex and the value is a <code>std::vector&lt;int&gt;</code> that contains all of the different vertices that form an edge with the key.</p>\n\n<p>I'm mainly interested in O(1) lookups to see whether or not a vertex shares an edge with another vertex. Since this is an unweighted multigraph the vertex could share multiple edges with another vertex.</p>\n\n<p>The graph is guaranteed to have an eulerian circuit and hamiltonian circuit, but I'm not sure if that is relevant or not.</p>\n\n<p>Do you guys have any recommendations for a better data structure using the STL than <code>std::map&lt;int,std::vector&lt;int&gt;&gt;</code>?</p>\n"}, {"tags": ["c++", "class", "memory-management", "stack", "static-allocation"], "comments": [{"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 1, "creation_date": 1542825347, "post_id": 53418519, "comment_id": 93711182, "body": "Your question is more or less akin to &quot;Is it possible to create class String without using memory in C++?&quot;"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1542825395, "post_id": 53418519, "comment_id": 93711200, "body": "@RobertHarvey, do you mean &quot;without using dynamic memory&quot;?"}, {"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1542825437, "post_id": 53418519, "comment_id": 93711212, "body": "@RSahu Why would you want to?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1542825448, "post_id": 53418519, "comment_id": 93711220, "body": "There is no way to avoid dynamic allocation unless you have some sort of limit.  Is there a reason you want to avoid the dynamic allocation?  Also, you may want to look into Small String Optimization"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1542825465, "post_id": 53418519, "comment_id": 93711228, "body": "I believe you are right. Dynamic size = dynamic allocation."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1542825567, "post_id": 53418519, "comment_id": 93711270, "body": "@RobertHarvey, I don&#39;t. I was trying to get clarification on your comment."}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1542825894, "post_id": 53418519, "comment_id": 93711423, "body": "Unclear: your answer has a lot of inconsistensies."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1542826901, "post_id": 53418519, "comment_id": 93711937, "body": "Declare a large static array as your heap and manage it like there&#39;s no tomorrow.  That&#39;s the short answer."}, {"owner": {"reputation": 21, "user_id": 5854841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3b595135592578b9ff79b54708f3eef?s=128&d=identicon&r=PG&f=1", "display_name": "mnurzyns", "link": "https://stackoverflow.com/users/5854841/mnurzyns"}, "edited": false, "score": 0, "creation_date": 1542826983, "post_id": 53418519, "comment_id": 93711982, "body": "Ok maybe I would like to simplify my problem (it&#39;s only academic thinking about memory managment): I need create class which will have represent NULL-terminated character array can not use HEAP memory, can use only STACK, do not want to use too big (or too small) buffer -&gt; wasting of memory on stack, SSO still use dynamic allocation on heap for bigger strings"}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1542827107, "post_id": 53418519, "comment_id": 93712054, "body": "@MarcinNurzy\u0144ski see my answer, it is possible to &#39;dynamicly&#39; allocate memory on the stack."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1542827370, "post_id": 53418519, "comment_id": 93712179, "body": "What&#39;s the scenario you have these requirements for? Maybe it actually is an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY-problem</a>."}, {"owner": {"reputation": 21, "user_id": 5854841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3b595135592578b9ff79b54708f3eef?s=128&d=identicon&r=PG&f=1", "display_name": "mnurzyns", "link": "https://stackoverflow.com/users/5854841/mnurzyns"}, "edited": false, "score": 0, "creation_date": 1542827686, "post_id": 53418519, "comment_id": 93712306, "body": "It&#39;s not XY-problem, because it&#39;s only contemplation about memory managment."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1542826036, "post_id": 53418670, "comment_id": 93711497, "body": "What happens if the string needs to be bigger than the buffer?"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1542826080, "post_id": 53418670, "comment_id": 93711513, "body": "+1 I was just about to make some convoluted example with placement new into a global <code>int8_t mem[1024*1024];</code>."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1542826122, "post_id": 53418670, "comment_id": 93711533, "body": "@NathanOliver I guess it should throw"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1542826231, "post_id": 53418670, "comment_id": 93711588, "body": "@NathanOliver Same thing as if your dynamically allocated string needs to be bigger than your heap :P"}, {"owner": {"reputation": 21, "user_id": 5854841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3b595135592578b9ff79b54708f3eef?s=128&d=identicon&r=PG&f=1", "display_name": "mnurzyns", "link": "https://stackoverflow.com/users/5854841/mnurzyns"}, "edited": false, "score": 0, "creation_date": 1542827169, "post_id": 53418670, "comment_id": 93712087, "body": "So if for example I create buffer for 500 char and then use only 23 of them, then I could shrink buffer to only 23? Rest of memory can be used by program - or only for other String objects?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 21, "user_id": 5854841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3b595135592578b9ff79b54708f3eef?s=128&d=identicon&r=PG&f=1", "display_name": "mnurzyns", "link": "https://stackoverflow.com/users/5854841/mnurzyns"}, "edited": false, "score": 1, "creation_date": 1542831289, "post_id": 53418670, "comment_id": 93713909, "body": "@MarcinNurzy\u0144ski, shrinking is not the right thing to do. When you use that buffer as heap memory of only <code>String</code> or other objects also is entirely up to you."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1542866177, "post_id": 53418670, "comment_id": 93723550, "body": "Problem with buffer, if small enough: It might get fragmented, if you often create and destroy strings. A level of indirection might help: Maintain a separate pointer array, array pointers point into buffer whereas string pointers into the array. Then you could move around strings within the buffer, if need be. C# does something similar under the hoods. Drawback: You need <i>additional</i> memory, indirection is slightly slower and meeting real time condition gets much harder. So it might or not be suitable, and you need to find a good compromise between buffer size and maximum number of strings."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 4, "last_activity_date": 1542825858, "creation_date": 1542825858, "answer_id": 53418670, "question_id": 53418519, "link": "https://stackoverflow.com/questions/53418519/is-it-possible-to-create-class-string-without-using-heap-in-c/53418670#53418670", "title": "Is it possible to create class String without using heap in C++?", "body": "<p>You asked:</p>\n\n<blockquote>\n  <p>Do you have any idea? Maybe is any way to create buffor wchich I will shrink to fit?</p>\n</blockquote>\n\n<p>In theory, yes you can. You can use a pre-allocated buffer as your heap memory. However, you'll have to write your own code to manage that buffer. Doable but not something I would recommend.</p>\n"}, {"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1542827281, "post_id": 53418849, "comment_id": 93712141, "body": "But usability is quite limited - how would you return the string to calling function?"}, {"owner": {"reputation": 21, "user_id": 5854841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3b595135592578b9ff79b54708f3eef?s=128&d=identicon&r=PG&f=1", "display_name": "mnurzyns", "link": "https://stackoverflow.com/users/5854841/mnurzyns"}, "edited": false, "score": 0, "creation_date": 1542827450, "post_id": 53418849, "comment_id": 93712213, "body": "I saw this question before, but still I&#39;m not sure that _alloca will solve this problem? If I use _alloca inside my c-tor it will &quot;frees its memory when you leave a function&quot;. How I will get this char array afer c-tor end?"}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1542830517, "post_id": 53418849, "comment_id": 93713603, "body": "@Aconcagua on the stack i suppose ?"}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 21, "user_id": 5854841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3b595135592578b9ff79b54708f3eef?s=128&d=identicon&r=PG&f=1", "display_name": "mnurzyns", "link": "https://stackoverflow.com/users/5854841/mnurzyns"}, "edited": false, "score": 0, "creation_date": 1542830794, "post_id": 53418849, "comment_id": 93713712, "body": "@MarcinNurzy\u0144ski Im not sure, you just need the allocation to happend outside - everything else can be handled inside c-tor, perhaps if its always inlined - I have, myself, zero experience in using _alloca though."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1542832107, "post_id": 53418849, "comment_id": 93714255, "body": "@darune If function f shall determine size by itself and then create the string appropriately? You&#39;d have to split any such function into two parts (&#39;f_init` to determine size, then alloca, then <code>f_fini</code> to fill the object). In worst case, you&#39;d need a double hierarchy of function calls. In doubt if this is really practicable..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1542832359, "post_id": 53418849, "comment_id": 93714359, "body": "@darune <i>&#39;you just need the allocation to happend outside&#39;</i> - almost yells for a combination of <code>alloca</code> and placement new. We&#39;d yet need a way to make sure the destructor gets called before the stack-allocated memory is given back. Perhaps via some helper object created together with alloca? Suppose we&#39;d not get around macros if we don&#39;t want to have to do every single step again and again by hand."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1542839859, "post_id": 53418849, "comment_id": 93717227, "body": "I tried to create a dynamic array class using <code>alloca</code> and came to the conclusion it was impossible. I forget why but I have encountered at least one other person who came to the same conclusion for the same reason. Something about <code>alloca</code> only keeping memory until the end of the function that calls it. If a constructor calls it the memory disappears at the end of the constructor. I think I cobbled something together with macros in the end. But nothing like a string really."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1542865225, "post_id": 53418849, "comment_id": 93723259, "body": "Side note: if string contents are allocated on stack, move semantics definitely get impossible..."}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1542877758, "post_id": 53418849, "comment_id": 93728784, "body": "@Galik and those who say its impossible - see my example in my updated answer. I wonder for what reason you came to the conclusion it wasn&#39;t possible ?"}], "tags": [], "owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "is_accepted": true, "score": 2, "last_activity_date": 1542877581, "last_edit_date": 1542877581, "creation_date": 1542826600, "answer_id": 53418849, "question_id": 53418519, "link": "https://stackoverflow.com/questions/53418519/is-it-possible-to-create-class-string-without-using-heap-in-c/53418849#53418849", "title": "Is it possible to create class String without using heap in C++?", "body": "<p>You asked:</p>\n\n<blockquote>\n  <p>Is it possible to create class String without using heap in C++?</p>\n</blockquote>\n\n<p>In fact, yes, it possible to <strong>dynamicly allocate memory on the stack</strong> by using <code>_alloca</code> or similiar platform dependent function. See this other answer for more details:\n<a href=\"https://stackoverflow.com/questions/6335023/c-how-to-allocate-memory-dynamically-on-stack\">C++ How to allocate memory dynamically on stack?</a></p>\n\n<p>I would recommend against it and be absolutely sure that was the best alternative before commencing.</p>\n\n<p><strong>Update</strong>:\nI created an example with inlined constructer for demonstration purpose using <code>gcc</code>:</p>\n\n<p>Compiler explorer Link:\n<a href=\"https://godbolt.org/z/M1F5VD\" rel=\"nofollow noreferrer\">https://godbolt.org/z/M1F5VD</a></p>\n\n<p>Full code:</p>\n\n<pre><code>#include &lt;alloca.h&gt;\n\nstruct String {\n  __attribute__((always_inline)) inline String(size_t size) {\n     bytes= static_cast&lt;char*&gt;(alloca( size ));// alloca() memory gets allocated here\n  }\n  char* bytes;\n};\n\nint workWithString( ) \n{\n   //std::string teststr(\"test\");\n   String mystrclass(1000);\n   mystrclass.bytes[0] = 'a';\n   mystrclass.bytes[1] = 0;\n   return 0;\n}  // alloca() memory only gets freed here\n\n\n\nint main() {\n    return workWithString();\n   }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "is_accepted": false, "score": 1, "last_activity_date": 1542832007, "creation_date": 1542832007, "answer_id": 53419989, "question_id": 53418519, "link": "https://stackoverflow.com/questions/53418519/is-it-possible-to-create-class-string-without-using-heap-in-c/53419989#53419989", "title": "Is it possible to create class String without using heap in C++?", "body": "<p>I'm a bit confused with your question. You want to have <code>std:: string</code> without a heap and without size restrictions. Sorry to bring this to you: you can't have infinite memory.</p>\n\n<p>If you have an pool of memory you want to dedicate to strings without it being fixed size for each string, an allocator can do so.\nThe default allocator for the containers does new, however you can replace it without having to duplicate the internals of string.</p>\n"}], "owner": {"reputation": 21, "user_id": 5854841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3b595135592578b9ff79b54708f3eef?s=128&d=identicon&r=PG&f=1", "display_name": "mnurzyns", "link": "https://stackoverflow.com/users/5854841/mnurzyns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 0, "accepted_answer_id": 53418849, "answer_count": 3, "score": 0, "last_activity_date": 1542877581, "creation_date": 1542825280, "question_id": 53418519, "link": "https://stackoverflow.com/questions/53418519/is-it-possible-to-create-class-string-without-using-heap-in-c", "title": "Is it possible to create class String without using heap in C++?", "body": "<p>I would like to write me own class String which will have interface similar to std::string. String class shall not use dynamic memory allocation.</p>\n\n<p>I need to have a c-tor:</p>\n\n<pre><code>String(char* ptrToFirstCharInTab, char* ptrToLastElementInTab);\n</code></pre>\n\n<p>And there should be tab which contains different (not know) number of element, so I do not know size while compiling.</p>\n\n<p>In my opinion it's impossible, because if we do not know size of our array before compilation we can not create it without dynamic allocation - of course creating buffer for 500 char and then String class can be only 500 it' not my expections. </p>\n\n<p>Do you have any idea? Maybe is any way to create buffor wchich I will shrink to fit? Thanks for help!</p>\n"}, {"tags": ["c++", "opengl", "glfw", "glew"], "comments": [{"owner": {"reputation": 5371, "user_id": 7019311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2981ebd25241785e1495e511caa61a?s=128&d=identicon&r=PG&f=1", "display_name": "hidefromkgb", "link": "https://stackoverflow.com/users/7019311/hidefromkgb"}, "edited": false, "score": 2, "creation_date": 1542827824, "post_id": 53418369, "comment_id": 93712363, "body": "Thought #1: You are requesting OpenGL v2.0 but are trying to make it compile and run shaders designed for OpenGL 4.5 (at least the <code>#version</code> directive suggests so)."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1542827891, "post_id": 53418369, "comment_id": 93712391, "body": "That is quite a mountain of code to review. Can you cut that down to size, something more minimal we can inspect?"}, {"owner": {"reputation": 19, "user_id": 10564261, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fTrvDZkWiiw/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDVlX3qlsE-GwhX7oEUSqlVstpQjA/mo/photo.jpg?sz=128", "display_name": "Riccardo Ripanti", "link": "https://stackoverflow.com/users/10564261/riccardo-ripanti"}, "reply_to_user": {"reputation": 5371, "user_id": 7019311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2981ebd25241785e1495e511caa61a?s=128&d=identicon&r=PG&f=1", "display_name": "hidefromkgb", "link": "https://stackoverflow.com/users/7019311/hidefromkgb"}, "edited": false, "score": 0, "creation_date": 1542830477, "post_id": 53418369, "comment_id": 93713579, "body": "@hidefromkgb Are the glfwWindowHint() functions that specify that? cause I didn&#39;t really understand their meaning and if it is like that, how should I write? (anyway that&#39;s not the problem, cause it was previously working with that)"}, {"owner": {"reputation": 19, "user_id": 10564261, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fTrvDZkWiiw/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDVlX3qlsE-GwhX7oEUSqlVstpQjA/mo/photo.jpg?sz=128", "display_name": "Riccardo Ripanti", "link": "https://stackoverflow.com/users/10564261/riccardo-ripanti"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1542830615, "post_id": 53418369, "comment_id": 93713648, "body": "@tadman I tried to write only the most important things, probably the only thing I can remove is the Ellipse constructor, but then you have to trust me when I say I initialized all the buffers correctly"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1542832946, "post_id": 53418369, "comment_id": 93714613, "body": "You specify vertex coordinates with tuple size of 4 (<code>x</code>, <code>y</code>, <code>z</code>, <code>w</code> - <a href=\"https://en.wikipedia.org/wiki/Homogeneous_coordinates\" rel=\"nofollow noreferrer\">homogeneous coordinates</a>) - <code>glVertexArrayAttribFormat(vao, coord_loc, 4, ...)</code>. How do you initialize the <code>w</code> component of the vertices?"}, {"owner": {"reputation": 19, "user_id": 10564261, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fTrvDZkWiiw/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDVlX3qlsE-GwhX7oEUSqlVstpQjA/mo/photo.jpg?sz=128", "display_name": "Riccardo Ripanti", "link": "https://stackoverflow.com/users/10564261/riccardo-ripanti"}, "edited": false, "score": 0, "creation_date": 1542834326, "post_id": 53418369, "comment_id": 93715210, "body": "When, in the main file, I call the constructor of the ellipse the first parameter is the center of the ellipse, and it&#39;s a vec4, so it uses the same w as the the one of the vector that you pass in the constructor"}, {"owner": {"reputation": 5371, "user_id": 7019311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2981ebd25241785e1495e511caa61a?s=128&d=identicon&r=PG&f=1", "display_name": "hidefromkgb", "link": "https://stackoverflow.com/users/7019311/hidefromkgb"}, "edited": false, "score": 0, "creation_date": 1542835153, "post_id": 53418369, "comment_id": 93715565, "body": "@RiccardoRipanti <a href=\"https://www.glfw.org/docs/latest/window_guide.html#window_hints_ctx\" rel=\"nofollow noreferrer\">See here</a>. You should rather try <code>GLFW_CONTEXT_VERSION_MAJOR</code> = 4 and <code>GLFW_CONTEXT_VERSION_MINOR</code> = 5 if you really intend to use the shaders mentioned in the question."}, {"owner": {"reputation": 19, "user_id": 10564261, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fTrvDZkWiiw/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDVlX3qlsE-GwhX7oEUSqlVstpQjA/mo/photo.jpg?sz=128", "display_name": "Riccardo Ripanti", "link": "https://stackoverflow.com/users/10564261/riccardo-ripanti"}, "reply_to_user": {"reputation": 5371, "user_id": 7019311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2981ebd25241785e1495e511caa61a?s=128&d=identicon&r=PG&f=1", "display_name": "hidefromkgb", "link": "https://stackoverflow.com/users/7019311/hidefromkgb"}, "edited": false, "score": 0, "creation_date": 1542836048, "post_id": 53418369, "comment_id": 93715916, "body": "Ok @hidefromkgb, thank you, but as I expected, that was not the problem. Not trying to say your clarification was useless: I appreciate those things too, because I&#39;d like to be, one day, a good programmer and a good programmer is precise (especially when taliking about c/c++)"}], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 10564261, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fTrvDZkWiiw/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDVlX3qlsE-GwhX7oEUSqlVstpQjA/mo/photo.jpg?sz=128", "display_name": "Riccardo Ripanti", "link": "https://stackoverflow.com/users/10564261/riccardo-ripanti"}, "is_accepted": true, "score": 1, "last_activity_date": 1543232416, "creation_date": 1543232416, "answer_id": 53480335, "question_id": 53418369, "link": "https://stackoverflow.com/questions/53418369/opengl-glfw-c-program-doesnt-draw-anything/53480335#53480335", "title": "OpenGL/GLFW C++ program doesn&#39;t draw anything", "body": "<p>After many tries I finally found what the problem was:</p>\n\n<p>In the GLObjects.h file I declare some variables as static, because, if I don't do so, it generates some multiple definition errors. Declaring them as static solves that problem, but creates another one, because now each file has it's own copy of those variables.</p>\n\n<p>So what I did, instead, to solve the problem, is to declare those variables as extern, and then define them in the GLObject.cpp file.</p>\n"}], "owner": {"reputation": 19, "user_id": 10564261, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fTrvDZkWiiw/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDVlX3qlsE-GwhX7oEUSqlVstpQjA/mo/photo.jpg?sz=128", "display_name": "Riccardo Ripanti", "link": "https://stackoverflow.com/users/10564261/riccardo-ripanti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "accepted_answer_id": 53480335, "answer_count": 1, "score": -2, "last_activity_date": 1543232416, "creation_date": 1542824651, "last_edit_date": 1542915933, "question_id": 53418369, "link": "https://stackoverflow.com/questions/53418369/opengl-glfw-c-program-doesnt-draw-anything", "title": "OpenGL/GLFW C++ program doesn&#39;t draw anything", "body": "<p>So, I made this program that has three main files:</p>\n\n<ul>\n<li>a main.cpp file, which contains the program itself</li>\n<li>one which contains GLObject class, which is the base class for every object</li>\n<li>one that contains the Ellipse class, a derivated object</li>\n</ul>\n\n<p>While I was implementing the object class (before I only had the ellipse one, then I decided to make a rectangle and found some pieces in common) I run into a problem, which is that in the screen nothing appears.</p>\n\n<p>The GLObject.cpp contains the definitions of the \"GLObjectsInit()\" functions, which sets up the drawing program (draw_program) and all the offsets and matrix strides of the unfiorm block declared inside that program.</p>\n\n<pre><code>void GLObjectsInit()\n{\n    CompileDrawProgram(); // Compiles the draw_program\n\n    coord_loc = glGetAttribLocation(draw_program, \"coord\");\n    color_loc = glGetAttribLocation(draw_program, \"color\");\n\n    static const GLchar* uniformNames[4] = {\n        \"TransformBlock.res\",\n        \"TransformBlock.tsl\",\n        \"TransformBlock.rot\",\n        \"TransformBlock.scale\"\n    };\n    GLuint uniformIndices[4];\n    glGetUniformIndices(draw_program, 4, uniformNames, uniformIndices);\n\n    GLint uniformOffsets[4];\n    GLint matrixStrides[4];\n    glGetActiveUniformsiv(draw_program, 4, uniformIndices, GL_UNIFORM_OFFSET, uniformOffsets);\n    glGetActiveUniformsiv(draw_program, 4, uniformIndices, GL_UNIFORM_MATRIX_STRIDE, matrixStrides);\n\n    resolution_offset = uniformOffsets[0];\n    translation_offset = uniformOffsets[1];\n    rotation_matrix_offset = uniformOffsets[2];\n    rotation_matrix_stride = uniformOffsets[2];\n    scale_offset = uniformOffsets[3];\n}\n</code></pre>\n\n<p>Drawing program:</p>\n\n<p>Vertex shader:</p>\n\n<pre><code>#version 450 core\nin vec4 coord;\nin vec4 color;\nlayout(std140, binding = 0) uniform TransformBlock\n{\n    vec4 res;\n    vec4 tsl;\n    vec4 scale;\n    mat4 rot;\n} trs;\n\nout vec4 color_vs;\nvoid main(void)\n{\n    color_vs = color;\n    gl_Position = ((coord * trs.scale * trs.rot) + trs.tsl) * trs.res;\n}\n</code></pre>\n\n<p>Fragment shader:</p>\n\n<pre><code>#version 450 core\n\nout vec4 color;\nin vec4 color_vs;\n\nvoid main(void)\n{\n    color = color_vs;\n}\n</code></pre>\n\n<p>The .h files contains only the headers to include and the declaration of some static variables (declared as static in order to avoid a multiple definition error):</p>\n\n<pre><code>#define _USE_MATH_DEFINES\n#include &lt;math.h&gt;\n#include &lt;glm.hpp&gt;\n#define GLEW_STATIC\n#include &lt;GL/glew.h&gt;\n#include &lt;GLFW/glfw3.h&gt;\n\nstatic GLuint draw_program;\n\nstatic GLuint coord_loc, color_loc;\nstatic GLuint resolution_offset, translation_offset, scale_offset;\nstatic GLuint rotation_matrix_offset, rotation_matrix_stride;\n</code></pre>\n\n<p>The ellipse object has some methods to modify the object position and scale and also has a draw() method (I will write only the draw() method and the constructor function, because I don't think the other ones are involved in the problem).</p>\n\n<p>Ellipse.h:</p>\n\n<pre><code>#include \"GLObject.h\"\n\nclass Ellipse//: public GLObject\n{\nprotected:\n    GLuint points_buffer, uniforms_buffer, vao;\n    vertex* points;\n    unsigned int size;\n    bool fill;\n\n    double ang;\n    glm::mat4 rotation_matrix;\n    glm::vec4 center, scale;\n\npublic:\n    void Draw();\n\n    //Other methods\n\n    Ellipse(double w, double h, glm::vec4 cen, bool fill, glm::vec4 col = glm::vec4(1, 1, 1, 1));\n    Ellipse(double r, glm::vec4 cen, bool fill, glm::vec4 col = glm::vec4(1, 1, 1, 1)) :\n        Ellipse(r, r, cen, fill, col) {}\n\n    ~Ellipse();\n};\n</code></pre>\n\n<p>Ellipse.cpp:</p>\n\n<pre><code>#include \"Ellipse.h\"\nusing namespace std;\n\nvoid Ellipse::Draw()\n{\n    GLFWwindow* window = glfwGetCurrentContext();\n\n    glUseProgram(draw_program);\n    glBindVertexArray(vao);\n    glBindBufferBase(GL_UNIFORM_BUFFER, 0, uniforms_buffer);\n\n    int w, h;   glm::vec4 res;\n    glfwGetFramebufferSize(window, &amp;w, &amp;h);\n    glViewport(0, 0, w, h);\n\n    if (w &gt; h) res = glm::vec4(static_cast&lt;float&gt;(h) / w, 1, 1, 1);\n    else       res = glm::vec4(1, static_cast&lt;float&gt;(w) / h, 1, 1);\n\n    glNamedBufferSubData(uniforms_buffer, resolution_offset, sizeof(glm::vec4), &amp;res);\n\n    if (fill) glDrawArrays(GL_TRIANGLES, 0, size);\n    else      glDrawArrays(GL_LINES, 0, size);\n}\n\nEllipse::Ellipse(double w, double h, glm::vec4 cen, bool fill, glm::vec4 col)\n{\n    // Calculate the ellipse\n\n    glCreateVertexArrays(1, &amp;vao);\n\n    glCreateBuffers(1, &amp;uniforms_buffer);\n    glNamedBufferStorage(uniforms_buffer, sizeof(GLfloat) * 112, NULL, GL_DYNAMIC_STORAGE_BIT);\n\n    glCreateBuffers(1, &amp;points_buffer);\n    glNamedBufferStorage(points_buffer, sizeof(vertex) * size, points, GL_DYNAMIC_STORAGE_BIT);\n    glVertexArrayVertexBuffer(vao, 0, points_buffer, 0, sizeof(vertex));\n\n    glVertexArrayAttribBinding(vao, coord_loc, 0);\n    glVertexArrayAttribFormat(vao, coord_loc, 4, GL_FLOAT, GL_FALSE, offsetof(vertex, coord));\n    glEnableVertexArrayAttrib(vao, coord_loc);\n\n    glVertexArrayAttribBinding(vao, color_loc, 0);\n    glVertexArrayAttribFormat(vao, color_loc, 4, GL_FLOAT, GL_FALSE, offsetof(vertex, color));\n    glEnableVertexArrayAttrib(vao, color_loc);\n\n    center = cen;   ang = 0;\n    scale = glm::vec4(w, h, 1, 1);\n    rotation_matrix = glm::mat4(1);\n\n    glNamedBufferSubData(uniforms_buffer, scale_offset, sizeof(glm::vec4), &amp;scale);\n    glNamedBufferSubData(uniforms_buffer, translation_offset, sizeof(glm::vec4), &amp;center);\n    glNamedBufferSubData(uniforms_buffer, rotation_matrix_offset, sizeof(glm::mat4), &amp;rotation_matrix[0]);\n}\n\nEllipse::~Ellipse()\n{\n    glDeleteBuffers(1, &amp;points_buffer);\n    glDeleteBuffers(1, &amp;uniforms_buffer);\n    glDeleteVertexArrays(1, &amp;vao);\n    delete[] points;\n}\n</code></pre>\n\n<p>The main is only that:</p>\n\n<pre><code>#include \"Ellipse.h\"\nusing namespace std;\n\nint main()\n{\n    glfwInit();\n\n    glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 2);\n    glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 0);\n\n    GLFWwindow* window = glfwCreateWindow(500, 500, \"Title\", NULL, NULL);\n    glfwMakeContextCurrent(window);\n\n    glewExperimental = GL_TRUE;\n    glewInit();\n\n    glfwSwapInterval(1);\n\n    GLObjectsInit();\n    Ellipse ball1(0.25, 0.25, glm::vec4(0, 0, 0.5, 1), true);\n\n    while (!glfwWindowShouldClose(window))\n    {\n        glfwPollEvents();\n        glClear(GL_COLOR_BUFFER_BIT);\n        ball1.Draw();\n        glfwSwapBuffers(window);\n    }\n    glfwDestroyWindow(window);\n    glfwTerminate();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "clang"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1542824466, "post_id": 53418306, "comment_id": 93710832, "body": "Mangled symbols and names are a product of the compilation process."}, {"owner": {"reputation": 967, "user_id": 3053638, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/31d44fd6f71253880b035b066ad1e266?s=128&d=identicon&r=PG", "display_name": "Gaetano", "link": "https://stackoverflow.com/users/3053638/gaetano"}, "edited": false, "score": 1, "creation_date": 1542824703, "post_id": 53418306, "comment_id": 93710935, "body": "true, but you can instrument eg. clang-query to get all function declarations. However I&#39;m not sure how to use clang&#39;s mangler to compute the mangled name of those function declarations"}], "owner": {"reputation": 967, "user_id": 3053638, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/31d44fd6f71253880b035b066ad1e266?s=128&d=identicon&r=PG", "display_name": "Gaetano", "link": "https://stackoverflow.com/users/3053638/gaetano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1542824345, "creation_date": 1542824345, "question_id": 53418306, "link": "https://stackoverflow.com/questions/53418306/how-to-extract-all-symbols-that-will-be-generated-using-clang", "title": "how to extract all symbols that will be generated using clang?", "body": "<p>If I compile a translation unit I'm able to extract all the symbol names using <code>objdump</code> or <code>nm</code>. \nAs I'm not interested in the generated artefact itself, I'd like to avoid compilation if possible. </p>\n\n<p>Is there a way to use clang-tooling to extract the symbols / mangled function name?</p>\n"}, {"tags": ["c++", "qt", "qt5", "qtreeview", "qstandarditemmodel"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1542826001, "post_id": 53418180, "comment_id": 93711471, "body": "How do you identify that one row is a child of another row ?, We could assume many things with the table you show, but it is better if you indicate it clearly"}, {"owner": {"reputation": 407, "user_id": 2185284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/442e696b0340670f0ea9e2424b800fd1?s=128&d=identicon&r=PG", "display_name": "awaisharoon", "link": "https://stackoverflow.com/users/2185284/awaisharoon"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1542826844, "post_id": 53418180, "comment_id": 93711906, "body": "GroupCode of child element matches the ActCod of parent element."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1542910937, "post_id": 53418180, "comment_id": 93746647, "body": "Did my solution work for you? Any feedback?"}], "answers": [{"comments": [{"owner": {"reputation": 407, "user_id": 2185284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/442e696b0340670f0ea9e2424b800fd1?s=128&d=identicon&r=PG", "display_name": "awaisharoon", "link": "https://stackoverflow.com/users/2185284/awaisharoon"}, "edited": false, "score": 0, "creation_date": 1542912202, "post_id": 53420163, "comment_id": 93747068, "body": "This works but it does not go for deeper menus. e.g. rootNode only has parent items which is correct, but every parrent can have multiple child, and each child can also have multiple children of it&#39;s own. Your code somewhat works but it also misplaces the nodes under other nodes which do not have any parent-child relationship that is matching the <code>GroupCode</code> to <code>ActCod</code> see this image: <a href=\"https://imgur.com/a/ubHJFhM\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 407, "user_id": 2185284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/442e696b0340670f0ea9e2424b800fd1?s=128&d=identicon&r=PG", "display_name": "awaisharoon", "link": "https://stackoverflow.com/users/2185284/awaisharoon"}, "edited": false, "score": 0, "creation_date": 1542912501, "post_id": 53420163, "comment_id": 93747142, "body": "@user2185284 Strange, just in my example I implemented a similar example to show that my solution works for several levels, if you are using sqlite you could share the .db, or if you are using another database you could share a .sql that contains the data. Are you using my last code?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 407, "user_id": 2185284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/442e696b0340670f0ea9e2424b800fd1?s=128&d=identicon&r=PG", "display_name": "awaisharoon", "link": "https://stackoverflow.com/users/2185284/awaisharoon"}, "edited": false, "score": 0, "creation_date": 1542912715, "post_id": 53420163, "comment_id": 93747199, "body": "@user2185284 I see that there are Group Code empty but in the table that you show in your question are 0, do not you think that would bring problems?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 407, "user_id": 2185284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/442e696b0340670f0ea9e2424b800fd1?s=128&d=identicon&r=PG", "display_name": "awaisharoon", "link": "https://stackoverflow.com/users/2185284/awaisharoon"}, "edited": false, "score": 0, "creation_date": 1542914018, "post_id": 53420163, "comment_id": 93747609, "body": "@user2185284 I just tested your data and it works correctly as my update shows"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 407, "user_id": 2185284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/442e696b0340670f0ea9e2424b800fd1?s=128&d=identicon&r=PG", "display_name": "awaisharoon", "link": "https://stackoverflow.com/users/2185284/awaisharoon"}, "edited": false, "score": 0, "creation_date": 1542915110, "post_id": 53420163, "comment_id": 93747970, "body": "@user2185284 If you have used my second code I just realized that I had errors, please try it again :-)"}, {"owner": {"reputation": 407, "user_id": 2185284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/442e696b0340670f0ea9e2424b800fd1?s=128&d=identicon&r=PG", "display_name": "awaisharoon", "link": "https://stackoverflow.com/users/2185284/awaisharoon"}, "edited": false, "score": 0, "creation_date": 1542966926, "post_id": 53420163, "comment_id": 93761590, "body": "I still cannot produce the result as yours. Is it because I have more child elements attached to the elements that I provided screenshot of? btw syntax <code>MyEnum::SomethingElse</code> is not standard c++. see here<a href=\"https://stackoverflow.com/questions/5188554/my-enum-is-not-a-class-or-namespace\">link</a>. I used <code>RelationRoles coderole = CodeRole;</code> and replaced <code>RelationRoles::CodeRole</code> with <code>CodeRole</code>."}, {"owner": {"reputation": 407, "user_id": 2185284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/442e696b0340670f0ea9e2424b800fd1?s=128&d=identicon&r=PG", "display_name": "awaisharoon", "link": "https://stackoverflow.com/users/2185284/awaisharoon"}, "edited": false, "score": 0, "creation_date": 1542969843, "post_id": 53420163, "comment_id": 93763129, "body": "I exported sql file but I don&#39;t know how do I send it to you not publicly?"}, {"owner": {"reputation": 407, "user_id": 2185284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/442e696b0340670f0ea9e2424b800fd1?s=128&d=identicon&r=PG", "display_name": "awaisharoon", "link": "https://stackoverflow.com/users/2185284/awaisharoon"}, "edited": false, "score": 0, "creation_date": 1542969989, "post_id": 53420163, "comment_id": 93763197, "body": "group code of root element(s) is empty. So it is assumed that it is zero, and this shouldn&#39;t pose a problem because there are no other nodes with groupcode zero or empty."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 407, "user_id": 2185284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/442e696b0340670f0ea9e2424b800fd1?s=128&d=identicon&r=PG", "display_name": "awaisharoon", "link": "https://stackoverflow.com/users/2185284/awaisharoon"}, "edited": false, "score": 0, "creation_date": 1542985178, "post_id": 53420163, "comment_id": 93770527, "body": "@user2185284 actually both forms are correct, I just wanted to be explicit, try not using the enumeration and replace <code>RelationRoles::CodeRole</code> with <code>Qt::UserRole +1000</code>"}, {"owner": {"reputation": 407, "user_id": 2185284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/442e696b0340670f0ea9e2424b800fd1?s=128&d=identicon&r=PG", "display_name": "awaisharoon", "link": "https://stackoverflow.com/users/2185284/awaisharoon"}, "edited": false, "score": 0, "creation_date": 1543123001, "post_id": 53420163, "comment_id": 93800704, "body": "you can get the sql file <a href=\"https://drive.google.com/open?id=1sdd2k7WzJGsVXDXRVlgvyaUoVgNOStlP\" rel=\"nofollow noreferrer\">here</a> I will delete it once you have obtained it."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 407, "user_id": 2185284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/442e696b0340670f0ea9e2424b800fd1?s=128&d=identicon&r=PG", "display_name": "awaisharoon", "link": "https://stackoverflow.com/users/2185284/awaisharoon"}, "edited": false, "score": 0, "creation_date": 1543124477, "post_id": 53420163, "comment_id": 93800900, "body": "@user2185284 Add an update where I explain the solution, the problem is that the data is not sorted, so you must do it with <code>ORDER BY ActCod ASC</code>: <code>QSqlQuery query(&quot;SELECT GroupCode, AcName, ActCod from adm_ac ORDER BY ActCod ASC&quot;);  </code>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 407, "user_id": 2185284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/442e696b0340670f0ea9e2424b800fd1?s=128&d=identicon&r=PG", "display_name": "awaisharoon", "link": "https://stackoverflow.com/users/2185284/awaisharoon"}, "edited": false, "score": 0, "creation_date": 1558455757, "post_id": 53420163, "comment_id": 99103902, "body": "@user2185284 what happened ?"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": false, "score": 1, "last_activity_date": 1543125210, "last_edit_date": 1543125210, "creation_date": 1542832858, "answer_id": 53420163, "question_id": 53418180, "link": "https://stackoverflow.com/questions/53418180/populate-qtreeview-as-parent-and-child-nodes-from-database/53420163#53420163", "title": "Populate QTreeView as parent and child nodes from database", "body": "<p>One possible is to save the <code>ActCod</code> in a role and then do a parent search through <code>GroupCode</code> using the <code>match()</code> method:</p>\n\n<pre><code>#include &lt;QtWidgets&gt;\n#include &lt;QtSql&gt;\n\nstatic bool createConnection(){\n    QSqlDatabase db = QSqlDatabase::addDatabase(\"QSQLITE\");\n    db.setDatabaseName(\":memory:\");\n    if (!db.open()) {\n        qDebug()&lt;&lt;\"Cannot open database\\n\"\n                  \"Unable to establish a database connection.\\n\"\n                  \"This example needs SQLite support. Please read \"\n                  \"the Qt SQL driver documentation for information how \"\n                  \"to build it.\\n\\n\"\n                  \"Click Cancel to exit.\";\n        return false;\n    }\n    QSqlQuery query;\n    if(!query.exec(\"CREATE TABLE adm_ac(\"\n                   \"AcName TEXT,\"\n                   \"ActCod INTEGER,\"\n                   \"GroupCode INTEGER\"\n                   \")\"))\n        qDebug()&lt;&lt;query.lastError().text();\n    query.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"parent1\\\", 1, 0)\");\n    query.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"child1\\\", 101, 1)\");\n    query.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"parent2\\\", 2, 0)\");\n    query.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"child2\\\", 201, 2)\");\n    query.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"A\\\", 10000, 101)\");\n    query.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"B\\\", 10001, 201)\");\n    query.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"C\\\", 100000, 10000)\");\n    query.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"D\\\", 100001, 10001)\");\n    return true;\n}\n\nenum RelationRoles{\n    CodeRole = Qt::UserRole + 1000,\n};\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    if(!createConnection())\n        return -1;\n    QStandardItemModel model;\n    QSqlQuery  query(\"SELECT GroupCode, AcName, ActCod from adm_ac\");\n    const QSqlRecord rec = query.record();\n    while (query.next()) {\n        QString AcName = query.value(rec.indexOf(\"AcName\")).toString();\n        int GroupCode = query.value(rec.indexOf(\"GroupCode\")).toInt();\n        int ActCod = query.value(rec.indexOf(\"ActCod\")).toInt();\n        QStandardItem *it = new QStandardItem(AcName);\n        it-&gt;setData(ActCod, RelationRoles::CodeRole);\n        if(GroupCode == 0)\n            model.invisibleRootItem()-&gt;appendRow(it);\n        else{\n            QModelIndexList ixs = model.match(model.index(0, 0),\n                                              RelationRoles::CodeRole,\n                                              GroupCode,\n                                              1,\n                                              Qt::MatchExactly| Qt::MatchRecursive);\n            if(ixs.size() &gt; 0){\n                QStandardItem *parent = model.itemFromIndex(ixs.first());\n                parent-&gt;appendRow(it);\n            }\n        }\n    }\n    QTreeView w;\n    w.setModel(&amp;model);\n    w.expandAll();\n    w.show();\n    return a.exec();\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/PV4wz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PV4wz.png\" alt=\"enter image description here\"></a></p>\n\n<p>In your case:</p>\n\n<pre><code>// ...\nenum RelationRoles{\n    CodeRole = Qt::UserRole + 1000,\n};\n// ...\nstandardModel = new QStandardItemModel(this);\nQSqlQuery  query(\"SELECT GroupCode, AcName, ActCod from adm_ac\");\nconst QSqlRecord rec = query.record();\nwhile (query.next()) {\n    QString AcName = query.value(rec.indexOf(\"AcName\")).toString();\n    int GroupCode = query.value(rec.indexOf(\"GroupCode\")).toInt();\n    int ActCod = query.value(rec.indexOf(\"ActCod\")).toInt();\n    QStandardItem *it = new QStandardItem(AcName);\n    it-&gt;setData(ActCod, RelationRoles::CodeRole);\n    if(GroupCode == 0)\n        standardModel-&gt;invisibleRootItem()-&gt;appendRow(it);\n    else{\n        QModelIndexList ixs = standardModel-&gt;match(model.index(0, 0),\n                                          RelationRoles::CodeRole,\n                                          GroupCode,\n                                          1,\n                                          Qt::MatchExactly| Qt::MatchRecursive);\n        if(ixs.size() &gt; 0){\n            QStandardItem *parent = standardModel-&gt;itemFromIndex(ixs.first());\n            parent-&gt;appendRow(it);\n        }\n    }\n}\n\nui-&gt;treeView-&gt;setModel(standardModel);\n</code></pre>\n\n<p>The advantage is that we do not have to create a container like QMap, and thus we can avoid problems of accessing not allowed memory as well as duplicity of elements.</p>\n\n<hr>\n\n<p><strong>UPDATE1:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/LhlNq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LhlNq.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>// ...\nQSqlQuery query;\nif(!query.exec(\"CREATE TABLE adm_ac(\"\n               \"AcName TEXT,\"\n               \"ActCod INTEGER,\"\n               \"GroupCode INTEGER\"\n               \")\"))\n    qDebug()&lt;&lt;query.lastError().text();\nquery.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"EXPENSES\\\", 5, 0)\");\nquery.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"SALES\\\", 4, 0)\");\nquery.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"ASSETS\\\", 1, 0)\");\nquery.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"CAPITAL\\\", 3, 0)\");\nquery.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"LIAILITIES\\\", 2, 0)\");\nquery.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"CURRENT ASSETS\\\", 102, 1)\");\nquery.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"FIXED ASSETS\\\", 101, 1)\");\nquery.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"INTANGIBLE FIXED ASSETS\\\", 10102, 101)\");\nquery.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"ACCUM.DEP. FIXED ASSETS\\\", 10103, 101)\");\nquery.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"TANGIBLE FIXED ASSETS\\\", 10101, 101)\");\nquery.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"MACHINERY\\\", 1010102, 10101)\");\nquery.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"COMPUTERS\\\", 1010103, 10101)\");\nquery.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"LAND\\\", 1010101, 10101)\");\nquery.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"OFFICE EQUIPMENTS\\\", 1010104, 10101)\");\nquery.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"MOTOR VEHICLES\\\", 1010105, 10101)\");\nquery.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"COMPUTER SOFTWARE\\\", 1010203, 10102)\");\nquery.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"GOODWILL\\\", 10102001, 10102)\");\nquery.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"PATENTS &amp; TRADE MARKS\\\", 10102002, 10102)\");\nquery.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"ACC.DEP- MOTOR VEHICLES\\\", 10103004, 10103)\");\nquery.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"ACC.DEP- OFFICE EQUIPMENTS\\\", 10103003, 10103)\");\nquery.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"ACC.DEP- MACHINERY\\\", 10103001, 10103)\");\nquery.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"ACC.DEP- COMPUTERS\\\", 10103002, 10103)\");\nquery.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"ACCOUNTS RECEIVABLE\\\", 10205, 102)\");\nquery.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"STOCK\\\", 1010105, 102)\");\nquery.exec(\"insert into adm_ac(AcName, ActCod, GroupCode) values(\\\"DEPOSITS &amp; PREPAYMENTS\\\", 10212, 102)\");\nreturn true;\n// ...\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/t3Vd5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/t3Vd5.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>UPDATE2:</strong></p>\n\n<p>I forgot to mention that in my solution I assumed that the data was ordered since in my algorithm I consider that the parent is before the children but in the general case it is not correct, so it must be ordered using: <code>ORDER BY ActCod ASC</code></p>\n\n<pre><code>QSqlQuery query(\"SELECT GroupCode, AcName, ActCod from adm_ac ORDER BY ActCod ASC\"); \n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/41U0N.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/41U0N.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 407, "user_id": 2185284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/442e696b0340670f0ea9e2424b800fd1?s=128&d=identicon&r=PG", "display_name": "awaisharoon", "link": "https://stackoverflow.com/users/2185284/awaisharoon"}, "edited": false, "score": 0, "creation_date": 1542909631, "post_id": 53420453, "comment_id": 93746165, "body": "<code>class QStandardItem has no member named setProperty, Property</code>. Variable <code>pNode</code> is also not declared, did you mean to use the variable <code>p</code>?"}, {"owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "reply_to_user": {"reputation": 407, "user_id": 2185284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/442e696b0340670f0ea9e2424b800fd1?s=128&d=identicon&r=PG", "display_name": "awaisharoon", "link": "https://stackoverflow.com/users/2185284/awaisharoon"}, "edited": false, "score": 0, "creation_date": 1542911216, "post_id": 53420453, "comment_id": 93746746, "body": "@user2185284: yes, pNode mean p, QStandardItem is not QObject derived so setProperty does not work. I modified my answer to correct it, please give it a try."}, {"owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "reply_to_user": {"reputation": 407, "user_id": 2185284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/442e696b0340670f0ea9e2424b800fd1?s=128&d=identicon&r=PG", "display_name": "awaisharoon", "link": "https://stackoverflow.com/users/2185284/awaisharoon"}, "edited": false, "score": 0, "creation_date": 1542972152, "post_id": 53420453, "comment_id": 93764265, "body": "@user2185284: the root&#39;s groupCode is 0 as described in your question ? or my setData() does not work :("}, {"owner": {"reputation": 407, "user_id": 2185284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/442e696b0340670f0ea9e2424b800fd1?s=128&d=identicon&r=PG", "display_name": "awaisharoon", "link": "https://stackoverflow.com/users/2185284/awaisharoon"}, "edited": false, "score": 0, "creation_date": 1543068560, "post_id": 53420453, "comment_id": 93789562, "body": "root&#39;s groupcode is empty. so it is zero. How does the test code still work?"}, {"owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "reply_to_user": {"reputation": 407, "user_id": 2185284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/442e696b0340670f0ea9e2424b800fd1?s=128&d=identicon&r=PG", "display_name": "awaisharoon", "link": "https://stackoverflow.com/users/2185284/awaisharoon"}, "edited": false, "score": 0, "creation_date": 1543097204, "post_id": 53420453, "comment_id": 93796908, "body": "@user2185284: do you insert the rootNode into the map with key 0 as the code shown above ? Without it, the tree cannot be built."}, {"owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "reply_to_user": {"reputation": 407, "user_id": 2185284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/442e696b0340670f0ea9e2424b800fd1?s=128&d=identicon&r=PG", "display_name": "awaisharoon", "link": "https://stackoverflow.com/users/2185284/awaisharoon"}, "edited": false, "score": 0, "creation_date": 1543098123, "post_id": 53420453, "comment_id": 93797077, "body": "@user2185284 : once the rootNode was added to the map, its childs can find it and will be appended correctly."}, {"owner": {"reputation": 407, "user_id": 2185284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/442e696b0340670f0ea9e2424b800fd1?s=128&d=identicon&r=PG", "display_name": "awaisharoon", "link": "https://stackoverflow.com/users/2185284/awaisharoon"}, "edited": false, "score": 0, "creation_date": 1543122799, "post_id": 53420453, "comment_id": 93800677, "body": "Yes, I did not modify your example."}, {"owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "reply_to_user": {"reputation": 407, "user_id": 2185284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/442e696b0340670f0ea9e2424b800fd1?s=128&d=identicon&r=PG", "display_name": "awaisharoon", "link": "https://stackoverflow.com/users/2185284/awaisharoon"}, "edited": false, "score": 0, "creation_date": 1543135273, "post_id": 53420453, "comment_id": 93802545, "body": "@user2185284: the test code works for you but did not work with your data ? We have apps with same kind of data set as your with 40k+ items and it works without problem. Did you try to add some debug information ?"}, {"owner": {"reputation": 407, "user_id": 2185284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/442e696b0340670f0ea9e2424b800fd1?s=128&d=identicon&r=PG", "display_name": "awaisharoon", "link": "https://stackoverflow.com/users/2185284/awaisharoon"}, "edited": false, "score": 0, "creation_date": 1548073628, "post_id": 53420453, "comment_id": 95400529, "body": "I revisited this and this solution works better. My understanding of qt programming wasn&#39;t good enough to understand this solution before -:)"}, {"owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "reply_to_user": {"reputation": 407, "user_id": 2185284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/442e696b0340670f0ea9e2424b800fd1?s=128&d=identicon&r=PG", "display_name": "awaisharoon", "link": "https://stackoverflow.com/users/2185284/awaisharoon"}, "edited": false, "score": 0, "creation_date": 1548084002, "post_id": 53420453, "comment_id": 95406372, "body": "@user2185284 : Nice to hear that the solution worked for you."}], "tags": [], "owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "is_accepted": true, "score": 1, "last_activity_date": 1542988512, "last_edit_date": 1542988512, "creation_date": 1542834252, "answer_id": 53420453, "question_id": 53418180, "link": "https://stackoverflow.com/questions/53418180/populate-qtreeview-as-parent-and-child-nodes-from-database/53420453#53420453", "title": "Populate QTreeView as parent and child nodes from database", "body": "<p>Here is an other way to build your tree. This code take care also the case that child nodes were loaded before its parent. The tree will be built in two pass :</p>\n\n<ol>\n<li>Load all items to the map</li>\n<li>Build the tree from the map</li>\n</ol>\n\n<p><strong>EDIT:</strong> We use setData() function instead of setProperty since QStardardItem is not QObject derived.</p>\n\n<pre><code>    enum GroupCodeRoleEnum{\n        GroupCodeRole = Qt::UserRole + 1001,\n    };\n\n    while(itemqry-&gt;next())\n    {\n        int groupcode =itemqry-&gt;value(0).toInt();\n        QString acname = itemqry-&gt;value(1).toString();\n        int ActCod = itemqry-&gt;value(2).toInt();\n        QStandardItem *itemmap = new QStandardItem(acname);\n\n        itemMap-&gt;setData(groupcode, GroupCodeRole );\n\n        //map of ActCod to itemmap, not GroupCode\n        rowItemMap.insert(ActCod, itemmap) );\n\n    } //End of while -- every node were now loaded.\n\n    //build the tree\n    rowItemMap.insert (0, rootNode ) ;\n\n    foreach( QStandardItem * p, rowItemMap.values() ){\n        int groupCode = p-&gt;data( GroupCodeRole ).toInt();\n\n        //find the parent from the map\n        if( p != rootNode ){\n\n            QMap&lt;int, QStandardItem* &gt;::iterator it = rowItemMap.find( groupCode );\n\n            if( it != rowItemMap.end() ){\n\n                QStandardItem* pParent = it.value();\n                pParent-&gt;appendRow( p );\n            }else {\n                qDebug() &lt;&lt; \"Parent not exist for groupCode\" &lt;&lt; groupCode; \n            }\n\n        }//nomal node\n\n    } //foreach  \n\n    ui-&gt;treeView-&gt;setModel(standardModel);\n</code></pre>\n\n<p><strong>TEST CODE:</strong></p>\n\n<pre><code>        QStandardItemModel *standardModel = new QStandardItemModel(this);\n        QStandardItem *rootNode = standardModel-&gt;invisibleRootItem();\n\n        //Simulate your while() loop.\n        addItem(1, 0, \"parent 1\");\n        addItem(101, 1, \"child 1\");\n        addItem(2, 0, \"parent 2\");\n        addItem(201, 2, \"child 2\");\n\n        //childs were loaded before parents\n\n        addItem(301, 3, \"child 3\");\n        addItem(401, 4, \"child 4\");\n        addItem(501, 5, \"child 5\");\n\n        addItem(3, 2, \"parent 3\");\n        addItem(4, 2, \"parent 4\");\n        addItem(5, 2, \"parent 5\");\n\n        //build the tree\n        m_map.insert (0, rootNode ) ;\n\n        foreach( QStandardItem * p, m_map.values() ){\n            int groupCode = p-&gt;data( GroupCodeRole ).toInt();\n\n            //find the parent from the map\n            if( p != rootNode ){\n\n                QMap&lt;int, QStandardItem* &gt;::iterator it = m_map.find( groupCode );\n\n                if( it != m_map.end() ){\n\n                    QStandardItem* pParent = it.value();\n                    pParent-&gt;appendRow( p );\n                }else {\n                    qDebug() &lt;&lt; \"Parent not exist for groupCode\" &lt;&lt; groupCode;\n                }\n\n            }//nomal node\n\n        } //foreach\n\n        ui-&gt;treeView-&gt;setModel(standardModel);\n    }\n\n    void MainWindow::addItem(int Act, int nGroupCode, QString szName)\n    {\n            QStandardItem *itemmap = new QStandardItem( szName );\n\n            itemmap-&gt;setData(nGroupCode, GroupCodeRole );\n\n            //map of ActCod to itemmap, not GroupCode\n            m_map.insert(Act, itemmap);\n\n    }\n</code></pre>\n\n<p>The tree was built :</p>\n\n<p><a href=\"https://i.stack.imgur.com/5TWqw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5TWqw.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 407, "user_id": 2185284, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/442e696b0340670f0ea9e2424b800fd1?s=128&d=identicon&r=PG", "display_name": "awaisharoon", "link": "https://stackoverflow.com/users/2185284/awaisharoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 981, "favorite_count": 0, "accepted_answer_id": 53420453, "answer_count": 2, "score": 1, "last_activity_date": 1543125857, "creation_date": 1542823807, "last_edit_date": 1543125857, "question_id": 53418180, "link": "https://stackoverflow.com/questions/53418180/populate-qtreeview-as-parent-and-child-nodes-from-database", "title": "Populate QTreeView as parent and child nodes from database", "body": "<p>I have data stored in the following columns in the database  </p>\n\n<pre><code>|AcName|ActCod|GroupCode|\n\n|parent1| |1|   |0|\n\n|child1|  |101| |1|\n\n|parent2| |2|   |0|\n\n|child2|  |201| |2|\n</code></pre>\n\n<p>I am using a <code>QTreeView</code>, <code>QStandardItemModel</code>, and <code>QStandardItem</code> to create this treeview however I don't know how to append the child to the parent.\nI stored <code>QStandardItem</code> items into a <code>QMap</code> but how do I append child nodes to parent and parent nodes to <code>rootNode</code>?</p>\n\n<p>the code.</p>\n\n<pre><code>standardModel = new QStandardItemModel(this);\nQStandardItem *rootNode = standardModel-&gt;invisibleRootItem();\nQSqlQuery *itemqry = new QSqlQuery(\"SELECT GroupCode, AcName, ActCod from adm_ac\");\nwhile(itemqry-&gt;next()){\n    int groupcode =itemqry-&gt;value(0).toInt();\n    QString acname = itemqry-&gt;value(1).toString();\n    int ActCod = itemqry-&gt;value(2).toInt();\n    QStandardItem *itemmap = new QStandardItem(acname);\n    rowItemMap.insert(groupcode, itemmap);\n\n    }\n}\n ui-&gt;treeView-&gt;setModel(standardModel);\n</code></pre>\n\n<p>the header file.</p>\n\n<pre><code>QStandardItemModel *standardModel;\nQStandardItem *acName1;\nQStandardItem *acName2;\nQMap&lt;int, QStandardItem*&gt; rowItemMap;\n</code></pre>\n"}, {"tags": ["c++", "arrays", "function"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1542823551, "post_id": 53418081, "comment_id": 93710470, "body": "Wrap your function in a class, and use a singleton there to get the data you want."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 4, "creation_date": 1542823637, "post_id": 53418081, "comment_id": 93710505, "body": "OT but a bug: <code>while(!inFile.eof()){</code> <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\" title=\"why is iostreameof inside a loop condition considered wrong\">stackoverflow.com/questions/5605125/&hellip;</a>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1542824128, "post_id": 53418081, "comment_id": 93710673, "body": "Why are you counting the lines?! Total waste of electrons."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1542824172, "post_id": 53418081, "comment_id": 93710694, "body": "My guess is the OP can&#39;t use std::vector. That is not at all clear since the line count is not used and we don&#39;t know where <code>a</code> and <code>b</code> are declared or allocated."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1542824243, "post_id": 53418081, "comment_id": 93710729, "body": "@drescherjm cannot use vector but can use seekg? Found an idiot professor."}], "answers": [{"comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1542823980, "post_id": 53418179, "comment_id": 93710605, "body": "I don&#39;t think that&#39;s what OP wants. <code>a</code> and <code>b</code> are read inside <code>f</code>, not outside."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1542824153, "post_id": 53418179, "comment_id": 93710686, "body": "Basically the function uses a bunch of parameters that are in a file, and OP doesn&#39;t want to load them each time the function is called."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1542824187, "post_id": 53418179, "comment_id": 93710700, "body": "This gives the OP some tools to work with.  I don&#39;t like giving 100% solutions, I like to make the posters think."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1542824364, "post_id": 53418179, "comment_id": 93710785, "body": "Also, there is a design smell that the OP should be using a <code>class</code> that models the record, instead of using parallel containers."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1542823999, "last_edit_date": 1542823999, "creation_date": 1542823803, "answer_id": 53418179, "question_id": 53418081, "link": "https://stackoverflow.com/questions/53418081/passing-an-array-from-txt-file-to-a-function/53418179#53418179", "title": "Passing an array from txt file to a function", "body": "<p>Your <code>f</code> function takes 1 (one) value, not an array.  </p>\n\n<p>You want to use <code>std::vector&lt;double&gt;</code> instead of array, if you want to pass the data.  </p>\n\n<p>Your loop should be:  </p>\n\n<pre><code>double value1, value2;\nstd::vector&lt;double&gt; a;\nstd::vector&lt;double&gt; b;\nwhile (inFile &gt;&gt; value1 &gt;&gt; value2)\n{\n   a.push_back(value1);\n   b.push_back(value2);\n}\n</code></pre>\n\n<p>You can use your <code>f</code> function:  </p>\n\n<pre><code>const size_t size = a.size();\nfor (size_t index = 0; index &lt; size; ++size)\n{\n  double result = f(a[index]);\n  //...\n}\n</code></pre>\n\n<p><strong>Edit 1: Function to Load</strong><br>\nYou could create an input function and call it once in <code>main</code>:  </p>\n\n<pre><code>void input_data(std::istream&amp; input, std::vector&lt;double&gt;&amp; a, std::vector&lt;double&gt;&amp; b)\n{\n  double value1, value2;\n  while (input &gt;&gt; value1 &gt;&gt; value2)\n  {\n     a.push_back(value1);\n     b.push_back(value2);\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 10076512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59f11263c2bdd1a90783f098a74aaf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Psyphy", "link": "https://stackoverflow.com/users/10076512/psyphy"}, "edited": false, "score": 0, "creation_date": 1542834928, "post_id": 53418202, "comment_id": 93715469, "body": "This is what I need. Thank you!"}, {"owner": {"reputation": 25, "user_id": 10076512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59f11263c2bdd1a90783f098a74aaf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Psyphy", "link": "https://stackoverflow.com/users/10076512/psyphy"}, "edited": false, "score": 0, "creation_date": 1543872905, "post_id": 53418202, "comment_id": 94066942, "body": "I have been testing your idea, but I can&#39;t get it to work. I have tried different variations based on the same idea, but using literally what you have posted I get <code>error: &#39;DataHolder&#39; does not refer to a value     auto&amp; d = DataHolder.getInstance();</code>"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 25, "user_id": 10076512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59f11263c2bdd1a90783f098a74aaf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Psyphy", "link": "https://stackoverflow.com/users/10076512/psyphy"}, "edited": false, "score": 0, "creation_date": 1543874679, "post_id": 53418202, "comment_id": 94067630, "body": "Oops, sorry, it&#39;s ::"}], "tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": true, "score": 0, "last_activity_date": 1543874689, "last_edit_date": 1543874689, "creation_date": 1542823914, "answer_id": 53418202, "question_id": 53418081, "link": "https://stackoverflow.com/questions/53418081/passing-an-array-from-txt-file-to-a-function/53418202#53418202", "title": "Passing an array from txt file to a function", "body": "<p>Let's create an instance that will read your data.</p>\n\n<pre><code>class DataHolder\n{\n    DataHolder()\n    {\n    ifstream inFile;\n\n    inFile.open(\"data.txt\");\n\n    double v1, v2;\n\n    while(inFile &gt;&gt; v1 &gt;&gt; v2){\n        a.push_back(v1); \n        b.push_back(v2);\n    }\n    }\npublic:\n    static DataHolder&amp; getInstance()\n    {\n        static DataHolder d;\n        return d;\n    }\n    std::vector&lt;double&gt; a, b;\n};\n</code></pre>\n\n<p>Then in your function, use the data holder:</p>\n\n<pre><code>double f(double x)\n{\n    auto&amp; d = DataHolder::getInstance();\n    // use the holders data\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 10076512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59f11263c2bdd1a90783f098a74aaf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Psyphy", "link": "https://stackoverflow.com/users/10076512/psyphy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 53418202, "answer_count": 2, "score": -1, "last_activity_date": 1543874689, "creation_date": 1542823385, "question_id": 53418081, "link": "https://stackoverflow.com/questions/53418081/passing-an-array-from-txt-file-to-a-function", "title": "Passing an array from txt file to a function", "body": "<p>I have a simple function of the form:</p>\n\n<pre><code>double f(double x)\n{\n...\n}\n</code></pre>\n\n<p>For that function, I want to use data from a txt file, which I pass to an array:</p>\n\n<pre><code>ifstream inFile;\n\n    inFile.open(\"data.txt\");\n\n\n    //Counting lines\n    string s;\n    int nlines=0;\n\n    while(!inFile.eof()){\n        getline(inFile, s);\n        nlines++;\n    }\n\n    inFile.seekg(0, ios::beg);\n\n    while(!inFile.eof()){\n        inFile &gt;&gt; a[entry_data];\n        inFile &gt;&gt; b[entry_data++]; \n    }\n\n    inFile.close();\n</code></pre>\n\n<p>If I put this code inside the function <code>f</code>, each time the function is called, it will have to open the file, create the array... and so on. I want to avoid this by defining the array just the first time the function is called, or before. How can I do this?</p>\n\n<p>I know that if I define the array in the main scope and pass it to the function as an argument I can solve this, but I want to keep the main scope as clean as possible. Thanks!</p>\n"}, {"tags": ["c++", "arduino", "rfid"], "comments": [{"owner": {"reputation": 5508, "user_id": 794749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pfE2l.jpg?s=128&g=1", "display_name": "gre_gor", "link": "https://stackoverflow.com/users/794749/gre-gor"}, "edited": false, "score": 0, "creation_date": 1542823576, "post_id": 53417783, "comment_id": 93710480, "body": "<code>blockcontent</code> is a byte array, <code>readbackblock[j]</code> is a single byte and <code>&quot;1&quot;</code> is a string (a nul terminated char array). You can&#39;t compare those with <code>==</code>."}, {"owner": {"reputation": 13, "user_id": 10216191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45efe9707045093e8b59e8250835c14c?s=128&d=identicon&r=PG&f=1", "display_name": "ahsan", "link": "https://stackoverflow.com/users/10216191/ahsan"}, "reply_to_user": {"reputation": 5508, "user_id": 794749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pfE2l.jpg?s=128&g=1", "display_name": "gre_gor", "link": "https://stackoverflow.com/users/794749/gre-gor"}, "edited": false, "score": 0, "creation_date": 1542824227, "post_id": 53417783, "comment_id": 93710722, "body": "@gre_gor what should I do?"}, {"owner": {"reputation": 1428, "user_id": 2819922, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e61964f3e5cdcde3dc90370e0cdfe2d4?s=128&d=identicon&r=PG&f=1", "display_name": "datafiddler", "link": "https://stackoverflow.com/users/2819922/datafiddler"}, "edited": false, "score": 1, "creation_date": 1542898462, "post_id": 53417783, "comment_id": 93740750, "body": "@ahsan you should learn about data types. And you should post minimal, but complete code"}, {"owner": {"reputation": 13, "user_id": 10216191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45efe9707045093e8b59e8250835c14c?s=128&d=identicon&r=PG&f=1", "display_name": "ahsan", "link": "https://stackoverflow.com/users/10216191/ahsan"}, "edited": false, "score": 0, "creation_date": 1542992608, "post_id": 53417783, "comment_id": 93773684, "body": "ok I will but how can I retrieve the information from an RDIF card can someone please tell me that"}], "owner": {"reputation": 13, "user_id": 10216191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45efe9707045093e8b59e8250835c14c?s=128&d=identicon&r=PG&f=1", "display_name": "ahsan", "link": "https://stackoverflow.com/users/10216191/ahsan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542823822, "creation_date": 1542822064, "last_edit_date": 1542823822, "question_id": 53417783, "link": "https://stackoverflow.com/questions/53417783/retrieving-information-from-rfid-card-using-ardunio", "title": "Retrieving information from RFID card using Ardunio", "body": "<p>I'm working on RFID attendance management system using Arduino.<br>\nI'm saving the data on the second block on Arduino. The only data I'm saving is  \"1\".</p>\n\n<p>Here's my code:</p>\n\n<pre><code>void setup() {\n    Serial.begin(9600);        \n    SPI.begin();               \n}\n\nint block=2;\n\nbyte blockcontent[16] = {\"1\"};\n//byte blockcontent[16] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};\nbyte readbackblock[18];\n\nvoid loop()\n{       \n    mfrc522.PCD_Init(); \n    for (byte i = 0; i &lt; 6; i++) {\n        key.keyByte[i] = 0xFF;\n    }\n\n    if ( ! mfrc522.PICC_IsNewCardPresent()) {\n        return;\n    }\n\n    if ( ! mfrc522.PICC_ReadCardSerial()) {\n        return;\n    }\n\n    Serial.println(\"card selected\");         \n    writeBlock(block, blockcontent);\n    readBlock(block, readbackblock);\n    Serial.print(\"read block: \");\n    for (int j=0 ; j&lt;16 ; j++)\n    {\n        Serial.write (readbackblock[j]);\n        if(readbackblock[j]==\"1\"){\n            Serial.print(\"Test completed!!\");\n        }\n    }\n    Serial.println(\"\");        \n}\n</code></pre>\n\n<p><strong>My Issue:</strong></p>\n\n<p>I wanted to retrieve the data from the Arduino and do something with it. I know that by using Serial.write (<code>readbackblock[j]</code>) we transmits the ASCII numbers as human-readable characters to the serial monitor ( and I get \"1\" on the Serial Monitor) but the following if statement is not working.</p>\n\n<pre><code>if(readbackblock[j]==\"1\"){\n    Serial.print(\"Test completed!!\");\n}\n</code></pre>\n"}, {"tags": ["c++", "class", "templates", "casting", "implicit-conversion"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1542821404, "post_id": 53417606, "comment_id": 93709445, "body": "No implicit conversion will happen with a template function.  You have to manually cast, if you want it converted to something it is not."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1542821471, "post_id": 53417606, "comment_id": 93709475, "body": "please provide the code that causes the error (see also <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>). Its not  clear how <code>myFunc</code> and <code>A</code> are related."}, {"owner": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1542821842, "post_id": 53417606, "comment_id": 93709646, "body": "@NathanOliver If <code>myFunc</code> is untemplated and takes, for instance, an <code>std::vector&lt;float&gt;</code> as argument, <code>foo</code> is cast implicitely. Shouldn&#39;t the default value for <code>myFunc</code> template (<code>float</code>)  be used then?"}, {"owner": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1542821883, "post_id": 53417606, "comment_id": 93709668, "body": "@user463035818 I&#39;ve added a small <code>main()</code> to reproduce the error. <code>A</code> and <code>myFunc</code> aren&#39;t related."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1542823746, "post_id": 53417606, "comment_id": 93710534, "body": "The default argument is irrelevant because the entire conversion template is a red herring. You can declare it as <code>operator std::vector&lt;T&gt;()</code> and you will still get the same error. You can make the entire class <code>A</code> non-template either andbut makes no difference, still the same error."}], "answers": [{"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 1, "last_activity_date": 1542823384, "creation_date": 1542823384, "answer_id": 53418080, "question_id": 53417606, "link": "https://stackoverflow.com/questions/53417606/how-to-implicitly-convert-class-template-object-when-passing-as-argument-to-func/53418080#53418080", "title": "How to implicitly convert class template object when passing as argument to function template?", "body": "<p>Implicit conversions are not considered when attempting to deduce template parameters. Since <code>A&lt;int&gt;</code> cannot match <code>const std::vector&lt;T&gt;</code>, the <code>myFunc</code> template is not a viable candidate. This remains true even if you <a href=\"https://godbolt.org/z/mFtT_Y\" rel=\"nofollow noreferrer\">explicitly instantiate</a> it beforehand (and even if the conversion operator is <a href=\"https://godbolt.org/z/WBPisc\" rel=\"nofollow noreferrer\">not templated</a>).</p>\n\n<p>For overload resolution, implicit conversion <em>are</em> considered, which is why the non-templated version works. The templated version never gets to participate because it is not a viable candidate.</p>\n"}, {"tags": [], "owner": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "is_accepted": false, "score": 1, "last_activity_date": 1542823442, "creation_date": 1542823442, "answer_id": 53418093, "question_id": 53417606, "link": "https://stackoverflow.com/questions/53417606/how-to-implicitly-convert-class-template-object-when-passing-as-argument-to-func/53418093#53418093", "title": "How to implicitly convert class template object when passing as argument to function template?", "body": "<p>The problem is that template argument deduction does not consider implicit conversions, so when you write <code>myFunc(foo)</code> the compiler is unable to determine a type for T.  And that's really the end of the story.</p>\n\n<p>See <a href=\"https://en.cppreference.com/w/cpp/language/template_argument_deduction\" rel=\"nofollow noreferrer\">Template argument deduction</a> on C++ reference.</p>\n\n<p>Walter E. Brown gave a fantastic talk about how function templates work (including why you should call them <em>function templates</em> and not <em>templatized functions</em>) at CppCon2018 which I highly recommend.</p>\n\n<p>See \"<a href=\"https://www.youtube.com/watch?v=NIDEjY5ywqU\" rel=\"nofollow noreferrer\">C++ Function Templates: How Do They Really Work?</a>\" on youtube.</p>\n"}], "owner": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1542878467, "creation_date": 1542821291, "last_edit_date": 1542822489, "question_id": 53417606, "link": "https://stackoverflow.com/questions/53417606/how-to-implicitly-convert-class-template-object-when-passing-as-argument-to-func", "title": "How to implicitly convert class template object when passing as argument to function template?", "body": "<p>Considering the following small code snippet:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass A{\npublic:\n    A() { };\n    ~A() { };\n    // ...\n    template &lt;typename outT = T&gt; operator std::vector&lt;outT&gt;(){ /* implicit/explicit cast to std::vector */ }    \n};\n\ntemplate &lt;typename T = float&gt;\nvoid myFunc(const std::vector&lt;T&gt;&amp; _arg){\n    printf(\"myFunc\\n\");\n}\n\nint main(int argc, char const *argv[]) { \n    A&lt;int&gt; foo;\n    myFunc(foo);\n}\n</code></pre>\n\n<p>When trying to compile, I get the error </p>\n\n<pre><code>template argument deduction/substitution failed: [...]  \u2018A&lt;int&gt;\u2019 is not derived from \u2018const std::vector&lt;T&gt;\u2019\n</code></pre>\n\n<p>While, on the other hand, if <code>myFunc</code> is not a template, it will compile and run just fine. I assume the error is caused by the fact that since <code>myFunc</code> accepts multiple vector types as argument, the compiler does not know to what type it should convert <code>foo</code> to. However, shouldn't the default template values be used as fallback in such case? Is there an alternative way to be able to pass an object of class <code>A</code> to <code>myFunc</code>?</p>\n"}, {"tags": ["c++", "visual-studio-2010", "enable-if"], "comments": [{"owner": {"reputation": 516, "user_id": 6490190, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c28036f5e41e1db1ea8d989c9264820?s=128&d=identicon&r=PG", "display_name": "Yuriy", "link": "https://stackoverflow.com/users/6490190/yuriy"}, "edited": false, "score": 0, "creation_date": 1542820236, "post_id": 53417181, "comment_id": 93708892, "body": "What about uncompilable template specialization for false?"}, {"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "reply_to_user": {"reputation": 516, "user_id": 6490190, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c28036f5e41e1db1ea8d989c9264820?s=128&d=identicon&r=PG", "display_name": "Yuriy", "link": "https://stackoverflow.com/users/6490190/yuriy"}, "edited": false, "score": 0, "creation_date": 1542820325, "post_id": 53417181, "comment_id": 93708935, "body": "I&#39;m not quite sure what you mean sorry."}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1542820550, "post_id": 53417181, "comment_id": 93709039, "body": "tag dispatching/full specialization/or <a href=\"https://wandbox.org/permlink/62FcHRPEkc6onwUq\" rel=\"nofollow noreferrer\">CRTP</a>"}, {"owner": {"reputation": 516, "user_id": 6490190, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c28036f5e41e1db1ea8d989c9264820?s=128&d=identicon&r=PG", "display_name": "Yuriy", "link": "https://stackoverflow.com/users/6490190/yuriy"}, "edited": false, "score": 0, "creation_date": 1542821156, "post_id": 53417181, "comment_id": 93709343, "body": "You can create specialization of Foo&lt;false&gt; with some kind of static_assert inside void DoStuff(){}. Or just do as @NathanOliver says)"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1542821879, "post_id": 53417181, "comment_id": 93709666, "body": "Have you considered just upgrading your (almost) decade old compiler and using modern C++?"}, {"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1542822631, "post_id": 53417181, "comment_id": 93710030, "body": "@jesper legacy code with legacy support contracts to paying customers. a.k.a the real world."}], "answers": [{"comments": [{"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1542822766, "post_id": 53417409, "comment_id": 93710097, "body": "Specialising the entire class is difficult if I only have one method I want to disable and 50 standard ones. But a useful answer anyway."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 1, "creation_date": 1542822912, "post_id": 53417409, "comment_id": 93710159, "body": "@bradgonesurfing In that case you could leverage inheritance.  Put all of the common functions in a base and specialize for the differences.  This will save a lot of code replication (it&#39;s the DRY way)."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 4, "last_activity_date": 1542820577, "creation_date": 1542820577, "answer_id": 53417409, "question_id": 53417181, "link": "https://stackoverflow.com/questions/53417181/is-there-a-way-to-disable-member-function-in-a-template-class-in-c-for-visual/53417409#53417409", "title": "Is there a way to disable member function in a template class in c++ for visual studio 2010 ( no default function template params )", "body": "<p>You could specialize the entire class like</p>\n\n<pre><code>template &lt;bool enable&gt;\nstruct Foo {};\n\ntemplate &lt;&gt;\nstruct Foo&lt;true&gt; {\n    void DoStuff(){}\n};\n\ntemplate &lt;&gt;\nstruct Foo&lt;false&gt; {\n\n};\n</code></pre>\n\n<p>And then</p>\n\n<pre><code>int main(){\n    // Compiles\n    Foo&lt;true&gt;().DoStuff();\n    // Fails\n    Foo&lt;false&gt;().DoStuff();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 463, "user_id": 2657179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/516fe6fe86e7f822cbcd6f670a6b06da?s=128&d=identicon&r=PG", "display_name": "Kilian", "link": "https://stackoverflow.com/users/2657179/kilian"}, "is_accepted": false, "score": 2, "last_activity_date": 1542822389, "last_edit_date": 1542822389, "creation_date": 1542821589, "answer_id": 53417679, "question_id": 53417181, "link": "https://stackoverflow.com/questions/53417181/is-there-a-way-to-disable-member-function-in-a-template-class-in-c-for-visual/53417679#53417679", "title": "Is there a way to disable member function in a template class in c++ for visual studio 2010 ( no default function template params )", "body": "<p>You could discard DoStuff via SFINAE:</p>\n\n<pre><code>template&lt;bool enable&gt;\nstruct Foo {\nprivate:\n    static void SFINAE_Helper(std::true_type);\n    typedef std::integral_constant&lt;bool, enable&gt; tag;\npublic:\n    decltype(SFINAE_Helper(tag())) DoStuff() { }\n};\n</code></pre>\n\n<p>Besides the fact that this code is quite unreadable it has the advantage, that you do not need to make extra specializations but can have all your code in one class template.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>An alternative could look like that:</p>\n\n<pre><code>template&lt;bool enable&gt;\nstruct Foo {\nprivate:\n    typedef std::enable_if&lt;enable&gt; enable_tag;\npublic:\n    typename enable_tag::type DoStuff() {}\n};\n</code></pre>\n"}], "owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1542822389, "creation_date": 1542819790, "question_id": 53417181, "link": "https://stackoverflow.com/questions/53417181/is-there-a-way-to-disable-member-function-in-a-template-class-in-c-for-visual", "title": "Is there a way to disable member function in a template class in c++ for visual studio 2010 ( no default function template params )", "body": "<p>For example</p>\n\n<pre><code>#include \"boost/type_traits.hpp\"\ntemplate &lt;bool enable&gt;\nstruct Foo {\n\n    template &lt;bool e = enable&gt;\n    typename boost::enable_if_c&lt;e,void&gt;::type  DoStuff(){}\n\n};\n\nint main(){\n    // Compiles\n    Foo&lt;true&gt;().DoStuff();\n    // Fails\n    Foo&lt;false&gt;().DoStuff();\n}\n</code></pre>\n\n<p>will work in modern compilers but not with visual studio 2010 which does not allow default template params for functions / methods. Is there another way to formulate the same task that will work with VS2010?</p>\n"}, {"tags": ["c++", "arrays", "linear-search"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 8, "creation_date": 1542818987, "post_id": 53416894, "comment_id": 93708187, "body": "It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming. Further reading: <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>"}, {"owner": {"reputation": 4480, "user_id": 2261062, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15756b0278dbf58ae90d2ffe8accbb81?s=128&d=identicon&r=PG", "display_name": "Sembei Norimaki", "link": "https://stackoverflow.com/users/2261062/sembei-norimaki"}, "edited": false, "score": 8, "creation_date": 1542819075, "post_id": 53416894, "comment_id": 93708233, "body": "<code>i != &#39;\\0&#39;</code> ???"}], "answers": [{"comments": [{"owner": {"reputation": 4480, "user_id": 2261062, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15756b0278dbf58ae90d2ffe8accbb81?s=128&d=identicon&r=PG", "display_name": "Sembei Norimaki", "link": "https://stackoverflow.com/users/2261062/sembei-norimaki"}, "edited": false, "score": 0, "creation_date": 1542819166, "post_id": 53416948, "comment_id": 93708280, "body": "maybe the op wants to start checking the sentence at the 3rd element..."}], "tags": [], "owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "is_accepted": false, "score": 3, "last_activity_date": 1542819607, "last_edit_date": 1542819607, "creation_date": 1542819078, "answer_id": 53416948, "question_id": 53416894, "link": "https://stackoverflow.com/questions/53416894/c-linear-search-returning-just-0/53416948#53416948", "title": "C++ Linear search returning just 0", "body": "<p>Your condition in the for loop is wrong, you are not checking the string only the index. Also if your character did not match, you do not want to exit immediately.</p>\n\n<p>The correct code would be:</p>\n\n<pre><code>for(int i = 0; sentence[i] != '\\0'; i++)\n{\n    if(sentence[i] == input)\n    {\n        return i;        \n    }\n}\nreturn -1;\n</code></pre>\n\n<p>If you want to start the search at the third character you should first ensure that your string has at least three elements:</p>\n\n<pre><code>if(strlen(sentence)&gt;=3)\n{\n    for(int i = 2; sentence[i] != '\\0'; i++)\n    {\n        ...\n    }\n    ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 7776701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c83f2ff6f6406ff28ee8ca22b30431?s=128&d=identicon&r=PG&f=1", "display_name": "sode", "link": "https://stackoverflow.com/users/7776701/sode"}, "is_accepted": false, "score": 3, "last_activity_date": 1542819634, "last_edit_date": 1542819634, "creation_date": 1542819309, "answer_id": 53417033, "question_id": 53416894, "link": "https://stackoverflow.com/questions/53416894/c-linear-search-returning-just-0/53417033#53417033", "title": "C++ Linear search returning just 0", "body": "<p>For your search function, you are only really checking the first character in the loop, then returning.  You should move \"return -1;\" outside of the for loop as then it will only be called after the entire string was checked for the value and it was not found.</p>\n\n<pre><code>int search(char input, char sentence[]) {\n    for (int i = 2; sentence[i] != '\\0'; i++) {\n        if (sentence[i] == input) {\n            return i;\n        }\n    }\n    return -1;\n}\n</code></pre>\n\n<p>in addition to changing the conditions of the for loop as other users mentioned.</p>\n"}], "owner": {"reputation": 1, "user_id": 6478812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cd6e3e7f5dfc55ff2d59e3056980505?s=128&d=identicon&r=PG&f=1", "display_name": "siddarth saha", "link": "https://stackoverflow.com/users/6478812/siddarth-saha"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "closed_date": 1542821689, "answer_count": 2, "score": -6, "last_activity_date": 1542819634, "creation_date": 1542818893, "last_edit_date": 1542818980, "question_id": 53416894, "link": "https://stackoverflow.com/questions/53416894/c-linear-search-returning-just-0", "closed_reason": "Not suitable for this site", "title": "C++ Linear search returning just 0", "body": "<p>So I am a newbie in C++, I do code in JS, for some reason I can't figure out the mistake here, please help me out. thanks! </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint search(char input, char sentence[]){\n    for(int i = 2; i != '\\0'; i++){\n        if(sentence[i] == input){\n            return i;        \n\n        }else{ return -1; }\n    }\n}\n\nint main()\n{\n    char key[20] = \"hey my name is sid!\";\n    char ser = 'm';\n   cout &lt;&lt; search(ser,key);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "cmake", "clion"], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 5610226, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f1d8ef4399bf1bcc8ada20258ba77f8f?s=128&d=identicon&r=PG&f=1", "display_name": "bugraarslan", "link": "https://stackoverflow.com/users/5610226/bugraarslan"}, "edited": false, "score": 0, "creation_date": 1542827471, "post_id": 53416887, "comment_id": 93712221, "body": "I did not get what should I do. Can you explain a little more or post a link about?"}], "tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": false, "score": 1, "last_activity_date": 1542818871, "creation_date": 1542818871, "answer_id": 53416887, "question_id": 53416784, "link": "https://stackoverflow.com/questions/53416784/cmake-cant-link-shared-library-subdirectory/53416887#53416887", "title": "CMake - Can&#39;t link shared library (subdirectory)", "body": "<p>When you build a static library, there is no linking taking place. It doesn't check that you have all required libraries.</p>\n\n<p>When you do the same for shared librarie,s then on some platforms (like Windows, or on Linux with -X defs, I think), you need to solve all references.</p>\n\n<p>And you have a shared library.</p>\n"}], "owner": {"reputation": 133, "user_id": 5610226, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f1d8ef4399bf1bcc8ada20258ba77f8f?s=128&d=identicon&r=PG&f=1", "display_name": "bugraarslan", "link": "https://stackoverflow.com/users/5610226/bugraarslan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 305, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542818871, "creation_date": 1542818526, "question_id": 53416784, "link": "https://stackoverflow.com/questions/53416784/cmake-cant-link-shared-library-subdirectory", "title": "CMake - Can&#39;t link shared library (subdirectory)", "body": "<p>I am using CLion and mingw-w64.</p>\n\n<p>My executable's CMakeLists.txt:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.12)\nproject(test_exe)\n\nset(CMAKE_CXX_STANDARD 17)\nset(CMAKE_RUNTIME_OUTPUT_DIRECTORY \"D:\\\\test\")\n\nadd_subdirectory(test_lib)\ninclude_directories(test_lib/include;test_lib/deps/include)\nlink_directories(test_lib/deps/lib)\n\nadd_executable(test_exe main.cpp)\ntarget_link_libraries(test_exe test_lib)\n</code></pre>\n\n<p>test_lib's CMakeLists.txt:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.12)\nproject(test_lib)\n\nset(CMAKE_CXX_STANDARD 17)\n\ninclude_directories(include;deps/include)\nlink_directories(deps/lib)\n\nfile(GLOB_RECURSE LIB_SOURCES \"include/*.*\" \"src/*.*\")\n\nadd_library(test_lib SHARED ${LIB_SOURCES})\ntarget_link_libraries(test_lib libfreetype.a libpugixml.dll.a)\n</code></pre>\n\n<p>The problem is that when I add library with <code>add_library(test_lib SHARED ${LIB_SOURCES})</code> I get <code>undefined reference</code> errors but when I add the library with <code>add_library(test_lib ${LIB_SOURCES})</code> it works perfectly.</p>\n\n<p>An empty project links as expected (both SHARED and STATIC) but I wonder why this one is not working? Because of the libraries I link in the test_lib's CMakeLists.txt?</p>\n"}, {"tags": ["c++", "c", "pragma"], "comments": [{"owner": {"reputation": 31218, "user_id": 211160, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Z2fk7.png?s=128&g=1", "display_name": "HostileFork says dont trust SE", "link": "https://stackoverflow.com/users/211160/hostilefork-says-dont-trust-se"}, "edited": false, "score": 24, "creation_date": 1542818431, "post_id": 53416657, "comment_id": 93707855, "body": "<i>Is there even any reason to include a single file multiple times?</i> =&gt; Could be.  A file might have conditional compilation <code>#ifdefs</code> in it.  So you might say <code>#define MODE_ONE 1</code> and then <code>#include &quot;has-modes.h&quot;</code>, and then <code>#undef MODE_ONE</code> with <code>#define MODE_TWO 1</code> and <code>#include &quot;has-modes.h&quot;</code> again.  The preprocessor is agnostic about these kinds of things, and maybe sometimes they can make sense."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 66, "creation_date": 1542818463, "post_id": 53416657, "comment_id": 93707874, "body": "It would make sense as the default.  Just not the one they picked when C programmers still rode horses, carried guns and had 16KB of memory"}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1542818622, "post_id": 53416657, "comment_id": 93707963, "body": "@Fran&#231;oisAndrieux but the duplicate seems to ask same thing about include guards in general not only #pragma once."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 11, "creation_date": 1542818728, "post_id": 53416657, "comment_id": 93708024, "body": "You can include <code>&lt;assert.h&gt;</code> multiple times, with different definitions of <code>NDEBUG</code>, in the same source file."}, {"owner": {"reputation": 969, "user_id": 9119391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91441ccec1aeff26e087429cf3d0b2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Cache", "link": "https://stackoverflow.com/users/9119391/johnny-cache"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1542818844, "post_id": 53416657, "comment_id": 93708098, "body": "@Fran&#231;oisAndrieux Fair enough. That should be more clear."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 3, "creation_date": 1542818890, "post_id": 53416657, "comment_id": 93708132, "body": "As for <code>#pragma once</code> itself, there are hardware environments (typically with networked drives and possible multiple paths to the same header) where it won&#39;t work right."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1542819017, "post_id": 53416657, "comment_id": 93708204, "body": "It would be a breaking change, and would require a new means to disable it - two good reasons not to change."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1542819073, "post_id": 53416657, "comment_id": 93708232, "body": "Y&#39;all answering in comments: the dupe target is still open for answers..."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1542819159, "post_id": 53416657, "comment_id": 93708275, "body": "@BaummitAugen: But that question is not asking about <code>#pragma once</code>, so those answers would not be appropriate. It asks about include-guards."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1542819258, "post_id": 53416657, "comment_id": 93708349, "body": "@NicolBolas All answers in this comment thread appear to apply the exact same way to classical include guards as they do to <code>#pragma once</code> afaict."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1542819339, "post_id": 53416657, "comment_id": 93708401, "body": "@BaummitAugen: Irrelevant. The &quot;duplicate&quot; is not asking about <code>#pramga once</code>, so an answer explaining <i>only</i> how <code>#pragma once</code> doesn&#39;t work would be off-topic. Notice how the answer to this question doesn&#39;t talk about include-guards or even the failures of <code>#pragma once</code>; it instead talks about where multiple inclusions are useful. Which would also not be an appropriate answer to the &quot;duplicate&quot;."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1542820075, "post_id": 53416657, "comment_id": 93708793, "body": "@JohnnyCache should I interpret your last comment in a way that you are not really interested in an answer, but rather are trolling and mark your question for moderators as such?"}, {"owner": {"reputation": 969, "user_id": 9119391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91441ccec1aeff26e087429cf3d0b2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Cache", "link": "https://stackoverflow.com/users/9119391/johnny-cache"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1542820177, "post_id": 53416657, "comment_id": 93708861, "body": "@SergeyA I&#39;m very much interested in an answer, but the fact that people keep marking and unmarking it as duplicate is curious as well. In fact, that&#39;s why I&#39;ve commented with that remark, instead of editing it into the question."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1542820586, "post_id": 53416657, "comment_id": 93709055, "body": "I remember multiple inclusion of the same headers being used in <code>c</code> more than we would use it in <code>c++</code>. A compiler would not want to break this usage however."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 12, "creation_date": 1542820820, "post_id": 53416657, "comment_id": 93709176, "body": "If you have <code>#pragma once</code> assumed, what is the way of countermanding that default?  <code>#pragma many</code>?  How many compilers have implemented anything like that?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1542822372, "post_id": 53416657, "comment_id": 93709893, "body": "@JonathanLeffler That&#39;s not a real argument though. If default <code>#pragma once</code> and an opt-out <code>#pragma many</code> was implementable and considered a good idea to the point that the standard wants it, compilers would implement it. The question here is essentially why that is not happening."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1542824356, "post_id": 53416657, "comment_id": 93710781, "body": "@MaxLanghof: It&#39;s mainly pointing out that changing the default requires a way to ensure that <code>&lt;assert.h&gt;</code> \u2014 to name (once again) the Standard C example of a header that must be includable multiple times in a single TU with (potentially) <i>different</i> effects on each occasion \u2014 continues to work correctly.  Making <code>#pragma once</code> the default probably won&#39;t happen because it would disrupt working code, and there are already other workable alternatives available within the standard.  One day, maybe, there might be <code>#pragma STDC once</code> \u2014 which would nominally be the way it would be standardized."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 2, "creation_date": 1542824933, "post_id": 53416657, "comment_id": 93711018, "body": "TL;DR because the C++ build system is an ancient joke and programmers have come to depend on its quirks"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1542827618, "post_id": 53416657, "comment_id": 93712278, "body": "I do not want to know how much back-room fighting there was over re-purposing <code>auto</code>."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 2, "creation_date": 1542829234, "post_id": 53416657, "comment_id": 93713035, "body": "Also see <a href=\"https://stackoverflow.com/questions/1143936/pragma-once-vs-include-guards/34884735#34884735\">#pragma once vs include guards?</a> and the part <b><i>#pragma once has unfixable bugs. It should never be used.</i></b> As I understand it, headers created through links create a lot of problems."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1542829447, "post_id": 53416657, "comment_id": 93713126, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/a/34884735/608639\">#pragma once vs include guards?</a>"}, {"owner": {"reputation": 215, "user_id": 4406754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/280c38f4cc343f0f3be19b35d2195c91?s=128&d=identicon&r=PG&f=1", "display_name": "jamesqf", "link": "https://stackoverflow.com/users/4406754/jamesqf"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1542864578, "post_id": 53416657, "comment_id": 93723067, "body": "@Hans Passant: Sorry, but I still ride my horse, and have been known to carry a gun when I do, since there are bears &amp; mountain lions out there."}], "answers": [{"comments": [{"owner": {"reputation": 969, "user_id": 9119391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91441ccec1aeff26e087429cf3d0b2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Cache", "link": "https://stackoverflow.com/users/9119391/johnny-cache"}, "edited": false, "score": 0, "creation_date": 1542819013, "post_id": 53416898, "comment_id": 93708202, "body": "That sounds overly complex. Any reason not to just include those definitions in the file in the first place?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 969, "user_id": 9119391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91441ccec1aeff26e087429cf3d0b2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Cache", "link": "https://stackoverflow.com/users/9119391/johnny-cache"}, "edited": false, "score": 2, "creation_date": 1542819062, "post_id": 53416898, "comment_id": 93708227, "body": "@JohnnyCache: The example is a simplified version of how X-macros work. Please read the link; they&#39;re extremely useful in some cases for doing complex manipulations of tabular data. In any significant usage of X-macros, there would be no way you could just &quot;include those definitions in the file&quot;."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 969, "user_id": 9119391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91441ccec1aeff26e087429cf3d0b2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Cache", "link": "https://stackoverflow.com/users/9119391/johnny-cache"}, "edited": false, "score": 2, "creation_date": 1542819092, "post_id": 53416898, "comment_id": 93708236, "body": "@Johnny - yes - one good reason is to ensure consistency (hard to do by hand when you have just a few dozen elements, never mind hundreds)."}, {"owner": {"reputation": 969, "user_id": 9119391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91441ccec1aeff26e087429cf3d0b2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Cache", "link": "https://stackoverflow.com/users/9119391/johnny-cache"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1542819158, "post_id": 53416898, "comment_id": 93708274, "body": "@TobySpeight Heh, I suppose I could spare a single line of code to avoid writing thousands somewhere else. Makes sense."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 1, "creation_date": 1542819173, "post_id": 53416898, "comment_id": 93708290, "body": "To avoid duplication. Especially if the file is large. Admittedly, you could just use a big macro containing the X macro list but since projects could be using this, mandating <code>#pragma once</code> behavior would be a breaking change."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1542851078, "post_id": 53416898, "comment_id": 93720016, "body": "In many cases, the file being included will be the output of another program."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1542896895, "post_id": 53416898, "comment_id": 93739884, "body": "@Leushenko I agree (see my comment above the one above yours). In the absence of an actually compelling use case for it, I&#39;d mandate <code>include_once</code> semantics for all includes. I don&#39;t think it would be hard to implement. You can simply start hashing and the possibly memcmp-aring once you see two or more includes with the same size."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 27, "last_activity_date": 1542819564, "last_edit_date": 1542819564, "creation_date": 1542818916, "answer_id": 53416898, "question_id": 53416657, "link": "https://stackoverflow.com/questions/53416657/why-isnt-pragma-once-automatically-assumed/53416898#53416898", "title": "Why isn&#39;t #pragma once automatically assumed?", "body": "<p>Including multiple times is usable e.g., with the <a href=\"https://en.wikipedia.org/wiki/X_Macro\" rel=\"noreferrer\">X-macro</a> technique:</p>\n\n<p><em>data.inc:</em></p>\n\n<pre><code>X(ONE)\nX(TWO)\nX(THREE)\n</code></pre>\n\n<p><em>use_data_inc_twice.c</em></p>\n\n<pre><code>enum data_e { \n#define X(V) V,\n   #include \"data.inc\"\n#undef X\n};\nchar const* data_e__strings[]={\n#define X(V) [V]=#V,\n   #include \"data.inc\"\n#undef X\n};\n</code></pre>\n\n<p>I don't know about any other use.</p>\n"}, {"comments": [{"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 1, "creation_date": 1542819460, "post_id": 53417025, "comment_id": 93708469, "body": "This would still work if all headers were pragma once. As long as you didn&#39;t include the generated data more than once."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 2, "creation_date": 1542819565, "post_id": 53417025, "comment_id": 93708527, "body": "@PSkocik But maybe I <i>need</i> to include it more than once. Why shouldn&#39;t I be able to?"}, {"owner": {"reputation": 969, "user_id": 9119391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91441ccec1aeff26e087429cf3d0b2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Cache", "link": "https://stackoverflow.com/users/9119391/johnny-cache"}, "edited": false, "score": 2, "creation_date": 1542820092, "post_id": 53417025, "comment_id": 93708805, "body": "@JesperJuhl That&#39;s the point. You won&#39;t <i>need</i> to include it more than once ever. You currently have the option, but the alternative isn&#39;t much worse, if at all."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 9, "creation_date": 1542821327, "post_id": 53417025, "comment_id": 93709420, "body": "@PSkocik If I change the value of <code>#define</code>s before each include that changes the behaviour of the included file then I may very well need to include it multiple times to get those different behaviours in different parts of my source file."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 38, "last_activity_date": 1542909269, "last_edit_date": 1542909269, "creation_date": 1542819280, "answer_id": 53417025, "question_id": 53416657, "link": "https://stackoverflow.com/questions/53416657/why-isnt-pragma-once-automatically-assumed/53417025#53417025", "title": "Why isn&#39;t #pragma once automatically assumed?", "body": "<p>You can use <code>#include</code> <em>anywhere</em> in a file, not just at global scope - like, inside a function (and multiple times if needed). Sure, ugly and not good style, but possible and occasionally sensible (depending on the file you include). If <code>#include</code> was only ever a one time thing then that wouldn't work. <code>#include</code> just does dumb text substitution (cut'n'paste) after all, and not everything you include has to be a header file. You might - for example - <code>#include</code> a file containing auto generated data containing the raw data to initialize a <code>std::vector</code>. Like</p>\n\n<pre><code>std::vector&lt;int&gt; data = {\n#include \"my_generated_data.txt\"\n}\n</code></pre>\n\n<p>And have \"my_generated_data.txt\" be something generated by the build system during compilation.</p>\n\n<p>Or maybe I'm lazy/silly/stupid and put this in a file (<em>very</em> contrived example):</p>\n\n<pre><code>const noexcept;\n</code></pre>\n\n<p>and then I do</p>\n\n<pre><code>class foo {\n    void f1()\n    #include \"stupid.file\"\n    int f2(int)\n    #include \"stupid.file\"\n};\n</code></pre>\n\n<p>Another, slightly less contrived, example would be a source file where many functions need to use a large amount of types in a namespace, but you don't want to just say <code>using namespace foo;</code> globally since that would polute the global namespace with a lot of other stuff you don't want. So you create a file \"foo\" containing</p>\n\n<pre><code>using std::vector;\nusing std::array;\nusing std::rotate;\n... You get the idea ...\n</code></pre>\n\n<p>And then you do this in your source file</p>\n\n<pre><code>void f1() {\n#include \"foo\" // needs \"stuff\"\n}\n\nvoid f2() {\n    // Doesn't need \"stuff\"\n}\n\nvoid f3() {\n#include \"foo\" // also needs \"stuff\"\n}\n</code></pre>\n\n<p>Note: I'm not advocating doing things like this. But it is possible and done in some codebases and I don't see why it should not be allowed. It <em>does</em> have its uses.</p>\n\n<p>It could also be that the file you include behaves differently depending on the value of certain macros (<code>#define</code>s). So you may want to include the file in multiple locations, after first having changed some value, so you get different behaviour in different parts of your source file.</p>\n"}, {"comments": [{"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1542971540, "post_id": 53417233, "comment_id": 93763960, "body": "It would not hinder <i>any</i> of that. OP asked about a <i>default</i> behaviour, not an unchangeable behaviour. It would be entirely sensible to change the default and instead provide a preprocessor flag <code>#pragma reentrant</code> or something along these lines. Hindsight is 20/20."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1543274331, "post_id": 53417233, "comment_id": 93851199, "body": "It would hinder it in the sense of forcing people to update their libraries and dependencies, @KonradRudolph.  Not always a problem, but it could cause issues with some legacy programs.  Ideally, there would also be a command-line switch to specify whether the default is <code>once</code> or <code>reentrant</code>, to mitigate this or other potential issues."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1543312284, "post_id": 53417233, "comment_id": 93863077, "body": "@JustinTime Well as my comment says it\u2019s clearly not a backwards compatible (and therefore feasible) change. The question, however, was why it was <i>initially</i> designed that way, not why it\u2019s not being changed. And the answer to that is, unambiguously, that the original design was a huge mistake with far-reaching consequences."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 10, "last_activity_date": 1542819987, "creation_date": 1542819987, "answer_id": 53417233, "question_id": 53416657, "link": "https://stackoverflow.com/questions/53416657/why-isnt-pragma-once-automatically-assumed/53417233#53417233", "title": "Why isn&#39;t #pragma once automatically assumed?", "body": "<p>No, this would significantly hinder the options available to, for example, library writers. For example, Boost.Preprocessor allows one to use pre-processor loops, and the only way to achieve those is by multiple inclusions of the same file.</p>\n\n<p>And Boost.Preprocessor is a building block for many very useful libraries.</p>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1542827154, "post_id": 53417790, "comment_id": 93712079, "body": "<a href=\"https://stackoverflow.com/a/34884735/4581301\">And another take on why not standardize <code>once</code></a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 4, "creation_date": 1542829560, "post_id": 53417790, "comment_id": 93713172, "body": "In particular, <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=52566\" rel=\"nofollow noreferrer\">see this example</a> for a case of where <code>pragma once</code> fails but include guards would have worked. Identifying files by location doesn&#39;t work either because sometimes the same file occurs multiple times in a project (e.g. you have 2 submodules that both include a header-only library in their headers and check out their own copy of it)"}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 6, "creation_date": 1542833933, "post_id": 53417790, "comment_id": 93715036, "body": "Not all pragmas are implementation-specific extensions. E.g. <a href=\"https://en.cppreference.com/w/c/preprocessor/impl#Standard_pragmas\" rel=\"nofollow noreferrer\"><code>#pragma STDC</code> family</a>. But they all do control implementation-defined behavior."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 4, "creation_date": 1542840150, "post_id": 53417790, "comment_id": 93717312, "body": "@user4581301 This answer over exaggerates the problem with pragma once and does not consider troubles due to include guards. In both case some discipline is needed. With include guards one must make sure to use a name that will not be used in an other file (which will happen after a file copy modify). With pragma once, one has to decide what is the unique right place for its file, which is a good thing after all."}, {"owner": {"reputation": 188404, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1542845211, "post_id": 53417790, "comment_id": 93718856, "body": "So I&#39;d say two files are the same if <code>fwrite</code>&#39;ing to one modifies the other... I think that&#39;s reasonable? So I guess the question is not actually detecting if two files are the same, but rather doing so without actually writing to them?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 188404, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1542851492, "post_id": 53417790, "comment_id": 93720102, "body": "@Mehrdad: It would be reasonable for the Standard to say that an implementation is free to ignore <code>#pragma once</code> in any case where, for whatever reason, it believes (rightly or wrongly) that two files may be distinct, but requiring that an implementation read everything in a file that is going to be skipped falls in the realm of Just Plain Dumb.  Perhaps a &quot;assume remainder of file is blank except for any required balancing <code>#endif</code> directives would be more useful, but there&#39;s no reason not to encourage implementations to provide an efficient means of..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1542851515, "post_id": 53417790, "comment_id": 93720113, "body": "...avoiding excessive file accesses during compilation on a best-effort basis."}, {"owner": {"reputation": 188404, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1542852989, "post_id": 53417790, "comment_id": 93720403, "body": "@supercat: Confused, why would you need to read the whole file that might be skipped? The implementation could just write 1 character to the <code>#pragma once</code> itself and see if it changes the other file it&#39;s trying to test against."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 188404, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 3, "creation_date": 1542869232, "post_id": 53417790, "comment_id": 93724685, "body": "@Mehrdad: Are you seriously suggesting that compilers write to source files!?  If a compiler sees <code>#ifndef XX</code>, it must can&#39;t know whether there&#39;s anything following the corresponding <code>#endif</code> until it&#39;s read the entire file.  A compiler that keeps track of whether the outermost <code>#ifndef</code> encloses the entire file and notes what macro it checks may be able to avoid rescanning the file, but a directive to <i>say</i> there&#39;s nothing of importance following the current point would seem seem nicer than relying upon compilers to remember such things."}, {"owner": {"reputation": 188404, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1542870384, "post_id": 53417790, "comment_id": 93725161, "body": "@supercat: no, you&#39;re just not reading. I said <i>&quot;So I guess the question is not actually detecting if two files are the same, but rather doing so without actually writing to them?&quot;</i> to which you objected and said it&#39;s dumb to read a file that you would skip to which I responded that is not necessary to which you responded by forgetting what I wrote... the rest of what you wrote doesn&#39;t really make sense either, <code>#pragma once</code> already does something and that is one way to do it."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1542899083, "post_id": 53417790, "comment_id": 93741099, "body": "@supercat implementation is already free to ignore pragma once or any pragmas really. Hence why there is no pressure to standardize it, since you can already use it and get &quot;mostly working but slightly different on all platforms&quot; behavior. Actual introduction of it into standard would bring nothing more to the table if it&#39;s not actually specified how ti works and this is hard as discussed."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1542902325, "post_id": 53417790, "comment_id": 93742857, "body": "Good standards should offer recommendations instead of just requirements; in many cases, the former are <i>far</i> more valuable."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 2105, "user_id": 8718773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34213fbac0a5b09b9ff8abe458e6b87a?s=128&d=identicon&r=PG&f=1", "display_name": "Giacomo Alzetta", "link": "https://stackoverflow.com/users/8718773/giacomo-alzetta"}, "edited": false, "score": 0, "creation_date": 1542962661, "post_id": 53417790, "comment_id": 93759329, "body": "@GiacomoAlzetta There are other concerns (network drives for example). And as a compiler writer, you can&#39;t just tell people (or rather corporate &quot;customers&quot;) &quot;f*ck your code&quot;."}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 86, "last_activity_date": 1542822407, "last_edit_date": 1542822407, "creation_date": 1542822079, "answer_id": 53417790, "question_id": 53416657, "link": "https://stackoverflow.com/questions/53416657/why-isnt-pragma-once-automatically-assumed/53417790#53417790", "title": "Why isn&#39;t #pragma once automatically assumed?", "body": "<p>There are multiple related questions here:</p>\n\n<ul>\n<li><p><strong>Why is <code>#pragma once</code> not automatically enforced?</strong><br>\nBecause there are situations in which you want to include files more than once.</p></li>\n<li><p><strong>Why would you want to include a file multiple times?</strong><br>\nSeveral reasons have been given in other answers (Boost.Preprocessor, X-Macros, including data files). I would like to add a particular example of \"avoid code duplication\": <strong>OpenFOAM</strong> encourages a style where <code>#include</code>ing bits and pieces within functions is a common concept. See for example <a href=\"https://stackoverflow.com/questions/15336494/using-include-to-include-sections-of-code\">this</a> discussion.</p></li>\n<li><p><strong>Ok, but why is it not the default with an opt-out?</strong><br>\nBecause it is not actually specified by the standard. <code>#pragma</code>s are by definition implementation-specific extensions.</p></li>\n<li><p><strong>Why has <code>#pragma once</code> not become a standardized feature yet (as it is widely supported)?</strong><br>\nBecause pinning down what is \"the same file\" in a platform-agnostic way is actually surprisingly hard. <a href=\"https://stackoverflow.com/a/23699893\">See this answer for more information</a>.</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 16855, "user_id": 1502345, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1beba9dc5373529ea99d294b23118d1b?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Aidley", "link": "https://stackoverflow.com/users/1502345/jack-aidley"}, "edited": false, "score": 5, "creation_date": 1542889650, "post_id": 53419896, "comment_id": 93735858, "body": "As usual, to understand C and C++, you need to understand their history."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1542918708, "post_id": 53419896, "comment_id": 93749033, "body": "It is <a href=\"https://herbsutter.com/2018/11/13/trip-report-fall-iso-c-standards-meeting-san-diego/\" rel=\"nofollow noreferrer\">reasonable to expect</a> that modules will land in February."}, {"owner": {"reputation": 41224, "user_id": 29639, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/J38sS.jpg?s=128&g=1", "display_name": "T.E.D.", "link": "https://stackoverflow.com/users/29639/t-e-d"}, "reply_to_user": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 7, "creation_date": 1542931322, "post_id": 53419896, "comment_id": 93752022, "body": "@DavisHerring - Yes, but which February?"}], "tags": [], "owner": {"reputation": 41224, "user_id": 29639, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/J38sS.jpg?s=128&g=1", "display_name": "T.E.D.", "link": "https://stackoverflow.com/users/29639/t-e-d"}, "is_accepted": false, "score": 21, "last_activity_date": 1542831537, "creation_date": 1542831537, "answer_id": 53419896, "question_id": 53416657, "link": "https://stackoverflow.com/questions/53416657/why-isnt-pragma-once-automatically-assumed/53419896#53419896", "title": "Why isn&#39;t #pragma once automatically assumed?", "body": "<p>You seem to be operating under the assumption that the purpose of the \"#include\" feature even existing in the language is to provide support for decomposition of programs into multiple compilation units. <strong>That is incorrect.</strong></p>\n\n<p>It can perform that role, but that was not its intended purpose. C was <a href=\"https://en.wikipedia.org/wiki/C_(programming_language)#Early_developments\" rel=\"noreferrer\">originally developed</a> as slightly higher-level language than PDP-11 <a href=\"https://en.wikipedia.org/wiki/MACRO-11\" rel=\"noreferrer\">Macro-11</a> Assembly for reimplementing Unix. It had a macro preprocessor because that was a feature of Macro-11. It had the ability to textually include macros from another file because that was a feature of Macro-11 that the existing Unix they were porting to their new C compiler had made use of.</p>\n\n<p>Now it turns out that \"#include\" is <em>useful</em> for separating code into compilation units, as (arguably) a bit of a hack. However, the fact that this hack existed meant that it became The Way that is done in C. The fact that a way existed meant no new method ever <em>needed</em> to be created to provide this functionality, so nothing safer (eg: not vulnerable to multiple-inclusion) was ever created. Since it was already in C, it got copied into C++ along with most of the rest of C's syntax and idioms.</p>\n\n<p>There is a proposal for giving C++ <a href=\"https://cppdepend.com/blog/?p=228\" rel=\"noreferrer\">a proper module system</a> so this 45 year old preprocessor hack can finally be dispensed with. I don't know how imminent this is though. I've been hearing about it being in the works for more than a decade.</p>\n"}, {"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1542859992, "post_id": 53422608, "comment_id": 93721879, "body": "I would say your use case is a motivating example for the <code>_Pragma</code> directive. The same pragmas can now be expanded from regular macros. So no need to include more than once."}], "tags": [], "owner": {"reputation": 1597, "user_id": 5162810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pDGmO.jpg?s=128&g=1", "display_name": "Graham", "link": "https://stackoverflow.com/users/5162810/graham"}, "is_accepted": false, "score": 8, "last_activity_date": 1542849507, "last_edit_date": 1542849507, "creation_date": 1542849170, "answer_id": 53422608, "question_id": 53416657, "link": "https://stackoverflow.com/questions/53416657/why-isnt-pragma-once-automatically-assumed/53422608#53422608", "title": "Why isn&#39;t #pragma once automatically assumed?", "body": "<p>In the firmware for the product I mainly work on, we need to be able to specify where functions and global/static variables should be allocated in memory. Real-time processing needs to live in L1 memory on chip so the processor can access it directly, fast. Less important processing can go in L2 memory on chip. And anything that doesn't need to be handled particularly promptly can live in the external DDR and go through caching, because it doesn't matter if it's a little slower.</p>\n\n<p>The #pragma to allocate where things go is a long, non-trivial line. It'd be easy to get it wrong.  The effect of getting it wrong would be that the code/data would be silently put into default (DDR) memory, and the effect of <em>that</em> might be closed-loop control stopping working for no reason that's easy to see.</p>\n\n<p>So I use include files, which contain just that pragma. My code now looks like this.</p>\n\n<p>Header file... </p>\n\n<pre><code>#ifndef HEADERFILE_H\n#define HEADERFILE_H\n\n#include \"set_fast_storage.h\"\n\n/* Declare variables */\n\n#include \"set_slow_storage.h\"\n\n/* Declare functions for initialisation on startup */\n\n#include \"set_fast_storage.h\"\n\n/* Declare functions for real-time processing */\n\n#include \"set_storage_default.h\"\n\n#endif\n</code></pre>\n\n<p>And source...</p>\n\n<pre><code>#include \"headerfile.h\"\n\n#include \"set_fast_storage.h\"\n\n/* Define variables */\n\n#include \"set_slow_storage.h\"\n\n/* Define functions for initialisation on startup */\n\n#include \"set_fast_storage.h\"\n\n/* Define functions for real-time processing */\n</code></pre>\n\n<p>You'll notice multiple inclusions of the same file there, even just in the header. If I mistype something now, the compiler will tell me it can't find the include file \"set_fat_storage.h\" and I can easily fix it.</p>\n\n<p>So in answer to your question, this is a real, practical example of where multiple inclusion is required.</p>\n"}], "owner": {"reputation": 969, "user_id": 9119391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91441ccec1aeff26e087429cf3d0b2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Cache", "link": "https://stackoverflow.com/users/9119391/johnny-cache"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6880, "favorite_count": 13, "accepted_answer_id": 53417790, "answer_count": 6, "score": 82, "last_activity_date": 1543350501, "creation_date": 1542818134, "last_edit_date": 1542818935, "question_id": 53416657, "link": "https://stackoverflow.com/questions/53416657/why-isnt-pragma-once-automatically-assumed", "title": "Why isn&#39;t #pragma once automatically assumed?", "body": "<p>What's the point of telling the compiler specifically to include the file only once? Wouldn't it make sense by default? Is there even any reason to include a single file multiple times? Why not just assume it? Is it to do with specific hardware?</p>\n"}, {"tags": ["c++", "c++11", "parameter-passing", "function-pointers"], "comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1542817941, "post_id": 53416573, "comment_id": 93707552, "body": "<code>pass_function(s)</code> is of type <code>void</code> because you called the function. And then you tried to pass the return value."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 1, "creation_date": 1542818066, "post_id": 53416573, "comment_id": 93707633, "body": "your <code>takes_a_function</code> is noop"}, {"owner": {"reputation": 8101, "user_id": 9199167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqdLV.jpg?s=128&g=1", "display_name": "Max Vollmer", "link": "https://stackoverflow.com/users/9199167/max-vollmer"}, "edited": false, "score": 0, "creation_date": 1542818067, "post_id": 53416573, "comment_id": 93707634, "body": "Could you describe what you are actually trying to achieve here?"}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1542818386, "last_edit_date": 1542818386, "creation_date": 1542818080, "answer_id": 53416643, "question_id": 53416573, "link": "https://stackoverflow.com/questions/53416573/pass-string-array-as-argument-with-function-pointer/53416643#53416643", "title": "Pass string array as argument with function pointer", "body": "<p>The correct syntax is:</p>\n\n<pre><code>takes_a_function(pass_function);\n</code></pre>\n\n<p>Alternatively:</p>\n\n<pre><code>void pass_function(std::string args[]);\n\nvoid takes_a_function(void(*function)(std::string[]), std::string args[]) {\n    function(args);\n}\n\nint main() {\n    std::string s[] = { \"hello\", \"World\" };\n    takes_a_function(pass_function, s);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "is_accepted": true, "score": 1, "last_activity_date": 1542828437, "creation_date": 1542828437, "answer_id": 53419257, "question_id": 53416573, "link": "https://stackoverflow.com/questions/53416573/pass-string-array-as-argument-with-function-pointer/53419257#53419257", "title": "Pass string array as argument with function pointer", "body": "<blockquote>\n  <p>would prefer a cleaner was of doing it if possible.</p>\n</blockquote>\n\n<p>From here</p>\n\n<pre><code>takes_a_function(pass_function(s));\n                 ^^^^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>it looks like you want to pass a something callable(<code>pass_function</code>) to another function(<code>takes_a_function</code>), after <em>binding</em> the argument(<em>string array</em>). If so, you have better options in C++.</p>\n\n<p>First use either <code>std::vector&lt;std::string&gt;</code> or <code>std::array&lt;std::string, 2&gt;</code>(<em>if size is known</em>) to store the strings. Secondly, the passing of callable to another function, by either of the following ways:</p>\n\n<ol>\n<li><p><strong>Using a <a href=\"https://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow noreferrer\">lambda</a> and\n<a href=\"https://en.cppreference.com/w/cpp/utility/functional/bind\" rel=\"nofollow noreferrer\">std::bind</a></strong></p>\n\n<p>Make <code>takes_a_function</code> as a template function and then after\nbinding with the argument pass the callable object(<code>pass_function</code>\nas a lambda function) to it.</p>\n\n<pre><code>#include &lt;vector&gt;     // std::vector\n#include &lt;functional&gt; // std::bind\n\ntemplate&lt;typename Callable&gt; \nvoid takes_a_function(const Callable &amp;function) \n{\n    function(); // direckt call\n}\n\nint main()\n{\n    std::vector&lt;std::string&gt; s{ \"hello\", \"World\" };\n    auto pass_function = [](const std::vector&lt;std::string&gt; &amp;args) { /*do something*/ };\n\n    takes_a_function(std::bind(pass_function, s));        \n    return 0;\n}\n</code></pre></li>\n<li><p><strong>Using function pointer</strong></p>\n\n<p>If the function pointer is unavoidable, you need two arguments in\n<code>takes_a_function</code>, one should be the function pointer and the other\nshould be the array of strings.</p>\n\n<pre><code>#include &lt;vector&gt;     // std::vector\n\n// convenience type\nusing fPtrType = void(*)(std::vector&lt;std::string&gt; const&amp;);\n\nvoid pass_function(const std::vector&lt;std::string&gt; &amp;args) { /*do something*/ };\n\nvoid takes_a_function(const fPtrType &amp;function, const std::vector&lt;std::string&gt; &amp;args)\n{\n    function(args); // call with args\n}\n\nint main()\n{\n    std::vector&lt;std::string&gt; s{ \"hello\", \"World\" };\n    takes_a_function(pass_function, s);\n    return 0;\n}\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 51, "user_id": 7138232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb4da9b59b39d99587a259be0b98bc20?s=128&d=identicon&r=PG&f=1", "display_name": "117PeterM", "link": "https://stackoverflow.com/users/7138232/117peterm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 473, "favorite_count": 0, "accepted_answer_id": 53419257, "answer_count": 2, "score": 0, "last_activity_date": 1542980647, "creation_date": 1542817858, "last_edit_date": 1542980647, "question_id": 53416573, "link": "https://stackoverflow.com/questions/53416573/pass-string-array-as-argument-with-function-pointer", "title": "Pass string array as argument with function pointer", "body": "<p>I'm trying to pass <em>a function pointer</em> to another <em>function</em>, which has a string array as arguments. so far I have the following:</p>\n\n<pre><code>void pass_function(string args[]) {    \n    //so something with args.\n}\n\nvoid takes_a_function(void(*function)(string[])) {\n    function;\n}\n\nint main()\n{\n    string s[] = { \"hello\", \"World\" };\n    takes_a_function(pass_function(s));\n\n    system(\"pause\");    \n    return 0;\n}\n</code></pre>\n\n<p>the issue appears to be that that the parameter <code>pass_function(s)</code> is casting as a <code>void</code> rather than <code>void(*function)(sting *)</code></p>\n\n<p>I'm imagining it requires a cast but would prefer a cleaner was of doing it if possible.</p>\n"}, {"tags": ["c++", "windows", "visual-studio", "webrtc", "native"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1542819308, "post_id": 53416549, "comment_id": 93708381, "body": "It would be helpful to see the exact error messages."}, {"owner": {"reputation": 563, "user_id": 2143724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dff359c940a896ba893cecf78eed193?s=128&d=identicon&r=PG", "display_name": "karsten", "link": "https://stackoverflow.com/users/2143724/karsten"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1542884128, "post_id": 53416549, "comment_id": 93732729, "body": "@drescherjm: I added more info. I removed asking for documentation."}, {"owner": {"reputation": 563, "user_id": 2143724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dff359c940a896ba893cecf78eed193?s=128&d=identicon&r=PG", "display_name": "karsten", "link": "https://stackoverflow.com/users/2143724/karsten"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1543003210, "post_id": 53416549, "comment_id": 93777200, "body": "I found some more information: current state <a href=\"http://webrtcbydralex.com/index.php/2018/10/14/libwebrtc-is-open-source-how-hard-can-it-be/\" rel=\"nofollow noreferrer\">link</a>   Cmake installer <a href=\"https://github.com/aisouard/libwebrtc\" rel=\"nofollow noreferrer\">link</a>. Cmake description <a href=\"http://webrtcbydralex.com/index.php/2015/07/22/automating-libwebrtc-build-with-cmake/\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 563, "user_id": 2143724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dff359c940a896ba893cecf78eed193?s=128&d=identicon&r=PG", "display_name": "karsten", "link": "https://stackoverflow.com/users/2143724/karsten"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1545041882, "post_id": 53416549, "comment_id": 94474422, "body": "I found out that cosmosoftware.io offers precompiled pakages for in my opinion a small price. My company decided to save money, time and effort by doing this. Probably there are more companies like this. I have to say that I am relieved, I was starting to feel a mixture of anger and depression after days of struggle. I hope nobody sees this as advertisement, I do not get any money for it..."}], "owner": {"reputation": 563, "user_id": 2143724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dff359c940a896ba893cecf78eed193?s=128&d=identicon&r=PG", "display_name": "karsten", "link": "https://stackoverflow.com/users/2143724/karsten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 850, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542886077, "creation_date": 1542817789, "last_edit_date": 1542886077, "question_id": 53416549, "link": "https://stackoverflow.com/questions/53416549/use-native-webrtc-library-with-windows-visualstudio-visual-c-2017", "title": "Use native WebRTC library with Windows VisualStudio/Visual C++ 2017", "body": "<p>I am new to WebRTC, and I started with installing the ready-to-use library package available at <a href=\"https://sourcey.com/precompiled-webrtc-libraries/\" rel=\"nofollow noreferrer\">Sourcey</a>. </p>\n\n<p>Using VS2017 I created a simple \"hello world\" console application which includes one of the webrtc native API headers.</p>\n\n<p>I added the additional include path (Project config > C++ > general > add. include) and link path (Project config > Linker > add. library path).</p>\n\n<p>But I got a lot of compile errors: from them I dreived that the Windows platform was not recognised, and it tried to include Unix* Headers like instead. So first fix was to add <code>WEBRTC_WIN</code>  to the preprocessor symbols.</p>\n\n<p>Still I got many (1076) other errors, mostly dubious, e.g. complaining about '::' in <code>std::numeric_limits&lt;int&gt;::max()</code> .</p>\n\n<p>Second fix: I added <code>#define NOMINMAX</code> in my source file. It seems that Windows usually defines macros min() and max() which corrupt the c++ code.</p>\n\n<p>So now 2 errors, complaining about <code>_vsnwprintf()</code> function maybe being not safe. As it recommended I set _CRT_SECURE_NO_WARNINGS but had to do this in the project configuration, it was not enough to set it in the source file including! </p>\n\n<p>Lack of documentation on these problems with the native WebRTC libs is really annoying! Also not in the forum <a href=\"https://groups.google.com/forum/#!forum/discuss-webrtc\" rel=\"nofollow noreferrer\">Google discuss webrtc</a>. More user experiences? Tipps?</p>\n\n<p>Edit: I found a nice tutorial which discourages directly using Native API and instead recommends using QT Wrapper: <a href=\"https://de.slideshare.net/alexpiwi5/iitrtc-2017-qt-webrtc-tutorial-qt-janus-client\" rel=\"nofollow noreferrer\">Tutorial</a></p>\n"}, {"tags": ["c++", "recursion", "tree", "binary-search-tree"], "comments": [{"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1542817967, "post_id": 53416543, "comment_id": 93707571, "body": "Why do you ignore the result of <code>find</code> in your <code>else</code> branch? Try to follow your code logically on some simple example."}, {"owner": {"reputation": 32100, "user_id": 1033581, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e8891617e36b8d1254eb3ce1a5662da4?s=128&d=identicon&r=PG", "display_name": "C\u0153ur", "link": "https://stackoverflow.com/users/1033581/c%c5%93ur"}, "edited": false, "score": 0, "creation_date": 1546242397, "post_id": 53416543, "comment_id": 94806917, "body": "Please move your solution to an answer of its own, thank you."}], "answers": [{"tags": [], "owner": {"reputation": 396, "user_id": 5799793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6GkCY.jpg?s=128&g=1", "display_name": "Little Boy Blue", "link": "https://stackoverflow.com/users/5799793/little-boy-blue"}, "is_accepted": false, "score": 1, "last_activity_date": 1542818424, "creation_date": 1542818424, "answer_id": 53416750, "question_id": 53416543, "link": "https://stackoverflow.com/questions/53416543/recursive-boolean-function-for-a-binary-search-tree/53416750#53416750", "title": "Recursive boolean function for a binary search tree", "body": "<p>For binary search trees, you, of course, want to walk down the tree until you find the value or reach nullptr. I'll write out a search function real quick here:</p>\n\n<pre><code>bool search(Node * node, int value){\n    if(node == nullptr) //If it's nullptr, we've reached the end without finding value.\n        return false;\n    if(node-&gt;value == value) //If it's value, we've found it!\n        return true;\n    if(node-&gt;value &gt; value) //If value is less than node's value, go to left.\n        return search(node-&gt;left, value);\n    if(node-&gt;value &lt; value) //If value is greater than node's value, go to right.\n        return search(node-&gt;right, value);\n}\n</code></pre>\n\n<p>This is a recursive search for an organized tree (without using templates, for the sake of simplicity). Therefore, in a binary search tree, you first need to check if node is <code>nullptr</code>, then if it is <code>value</code>, and then go from there.</p>\n"}], "owner": {"reputation": 1, "user_id": 10592503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4xcDd.png?s=128&g=1", "display_name": "Harnold", "link": "https://stackoverflow.com/users/10592503/harnold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1264, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546242381, "creation_date": 1542817781, "last_edit_date": 1592644375, "question_id": 53416543, "link": "https://stackoverflow.com/questions/53416543/recursive-boolean-function-for-a-binary-search-tree", "title": "Recursive boolean function for a binary search tree", "body": "<p>I have a class implementing binary search tree and one of my private methods is method <code>bool find(Node&lt;Key, Info&gt; * &amp;node, Key _key);</code>, where <code>node</code> stands for a pointer to a node, we start searching from and <code>_key</code> stands for a unique for every node key.\nMy method is implemented as follows:</p>\n<pre><code>template&lt;typename Key, typename Info&gt;\nbool BST&lt;Key, Info&gt;::find(Node&lt;Key, Info&gt;* &amp;node, Key _key)\n{\n    if (node)\n    {\n        if (node-&gt;key == _key)\n        {\n            return true;\n        }\n        else\n        {\n            find(node-&gt;left, _key);\n            find(node-&gt;right, _key);\n            return false;\n        }\n    }\n    else return false;\n}\n</code></pre>\n<p>And it doesn't return true, even if the element with the given key exists. I added a printing command just before return statement and it executes so my function seems to find the given node, but I guess my understanding is wrong and it still somehow returns false.</p>\n<hr />\n<h1>Solved</h1>\n<p>The solution to my problem seems to be found :)</p>\n<pre><code>template&lt;typename Key, typename Info&gt;\nbool BST&lt;Key, Info&gt;::find(Node&lt;Key, Info&gt;* &amp;node, Key _key)\n{\n    if (node)\n    {\n        if (node-&gt;key == _key)\n        {\n            return true;\n        }\n        else if(_key&lt;node-&gt;key)\n            return find(node-&gt;left, _key);\n        else \n            return find(node-&gt;right, _key);\n    }\n    else return false;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1542817610, "post_id": 53416426, "comment_id": 93707330, "body": "Please edit your question to include the actual and expected output. Also please read about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1542817902, "post_id": 53416426, "comment_id": 93707523, "body": "It doesn&#39;t matter how you organize your member initialization list, it always initializes base type first, then members in the order they appear in your class definition. It looks like you intend <code>radius</code> to be initialized first, but it won&#39;t be."}, {"owner": {"reputation": 1189, "user_id": 9232218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7ced53adbb0ba08d1cea65a43b124d?s=128&d=identicon&r=PG&f=1", "display_name": "Yastanub", "link": "https://stackoverflow.com/users/9232218/yastanub"}, "edited": false, "score": 1, "creation_date": 1542818348, "post_id": 53416426, "comment_id": 93707809, "body": "Please listen to your compiler warnings which should have told you that your functions do not return any values. If you got no warnings enable them by using <code>-Wall</code> compiler flag."}, {"owner": {"reputation": 3, "user_id": 10686785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3951dd1ea75be8b0054844a8e83a0e83?s=128&d=identicon&r=PG&f=1", "display_name": "Alraku", "link": "https://stackoverflow.com/users/10686785/alraku"}, "reply_to_user": {"reputation": 1189, "user_id": 9232218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7ced53adbb0ba08d1cea65a43b124d?s=128&d=identicon&r=PG&f=1", "display_name": "Yastanub", "link": "https://stackoverflow.com/users/9232218/yastanub"}, "edited": false, "score": 0, "creation_date": 1542828146, "post_id": 53416426, "comment_id": 93712518, "body": "You are right @Yastanub - i have just turned it on. Anyway - i use GNU GCC compiler but do you recommend any other, better ones?"}], "answers": [{"comments": [{"owner": {"reputation": 1189, "user_id": 9232218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7ced53adbb0ba08d1cea65a43b124d?s=128&d=identicon&r=PG&f=1", "display_name": "Yastanub", "link": "https://stackoverflow.com/users/9232218/yastanub"}, "edited": false, "score": 1, "creation_date": 1542818340, "post_id": 53416598, "comment_id": 93707803, "body": "You could as well get rid of the local variables in <code>funkcja_circuit</code> and <code>funkcja_pole</code> since it seems like they were supposed to initialize the members. Or it was wanted that they change the members in that case they should still do."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 1189, "user_id": 9232218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7ced53adbb0ba08d1cea65a43b124d?s=128&d=identicon&r=PG&f=1", "display_name": "Yastanub", "link": "https://stackoverflow.com/users/9232218/yastanub"}, "edited": false, "score": 0, "creation_date": 1542818620, "post_id": 53416598, "comment_id": 93707960, "body": "@Yastanub Oh yes, I agree. I just kept the local variables because of the display for OP."}, {"owner": {"reputation": 3, "user_id": 10686785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3951dd1ea75be8b0054844a8e83a0e83?s=128&d=identicon&r=PG&f=1", "display_name": "Alraku", "link": "https://stackoverflow.com/users/10686785/alraku"}, "edited": false, "score": 0, "creation_date": 1542828332, "post_id": 53416598, "comment_id": 93712609, "body": "I see you have only added &quot;private:&quot; segment into the code - did you mean about any other improvments to make my code look more organized?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1542840342, "post_id": 53416598, "comment_id": 93717366, "body": "Also the initialization order iirc"}], "tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": true, "score": 3, "last_activity_date": 1542817946, "creation_date": 1542817946, "answer_id": 53416598, "question_id": 53416426, "link": "https://stackoverflow.com/questions/53416426/c-write-function-writes-nan-instead-of-proper-value/53416598#53416598", "title": "C++ write_function writes &quot;Nan&quot; instead of proper value", "body": "<p>You are not returning the computed values:</p>\n\n<pre><code>double funkcja_pole(double A)\n{\n    double pole = 3.14 * A*A;\n    std::cout &lt;&lt; \"pole:\" &lt;&lt; pole &lt;&lt; std::endl;\n    return pole;\n}\n</code></pre>\n\n<p>You should refactor your code so that everything is a little bit more organized:</p>\n\n<pre><code>class Circle: public Figura\n{\nprivate:\n    double radius;\npublic:\n    Circle(double);\n\nvoid write()\n{\n    std::cout &lt;&lt; \"Radius = \" &lt;&lt; radius &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Pole = \" &lt;&lt; pole &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Circuit = \" &lt;&lt; circuit &lt;&lt; std::endl;\n}\nprivate:\ndouble funkcja_pole(double A)\n{\n    double pole = 3.14 * A*A;\n    std::cout &lt;&lt; \"pole:\" &lt;&lt; pole &lt;&lt; std::endl;\n    return pole;\n}\ndouble funkcja_circuit(double B)\n{\n    double circuit = 3.14 * 2*B;\n    std::cout &lt;&lt; \"circuit:\" &lt;&lt; circuit &lt;&lt; std::endl;\n    return circuit;\n}\n};\n\nFigura::Figura(double POLE, double CIRCUIT):\n    pole(POLE), circuit(CIRCUIT) {}\n\nCircle::Circle(double RADIUS):\n    Figura(funkcja_pole(RADIUS),funkcja_circuit(RADIUS)), radius(RADIUS) {}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10686785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3951dd1ea75be8b0054844a8e83a0e83?s=128&d=identicon&r=PG&f=1", "display_name": "Alraku", "link": "https://stackoverflow.com/users/10686785/alraku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 53416598, "answer_count": 1, "score": 0, "last_activity_date": 1542817946, "creation_date": 1542817450, "last_edit_date": 1542817751, "question_id": 53416426, "link": "https://stackoverflow.com/questions/53416426/c-write-function-writes-nan-instead-of-proper-value", "title": "C++ write_function writes &quot;Nan&quot; instead of proper value", "body": "<p>I have an assignment to make a class with a figures and i have to use constructors to implement it. The problem is my write function only writes properly the value of the given circuit but neither pole nor circuit. Instead of writes \"nan\". </p>\n\n<p>I have added \"debbuging couts\" to check if the function counts the pole and circuit properly.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n\nclass Figura\n{\nprotected:\n    double pole;\n    double circuit;\npublic:\n    virtual double funkcja_pole(double A) = 0;\n    virtual double funkcja_circuit(double B) = 0;\n    virtual void write() = 0;\n\n    Figura(double, double);\n};\n\nclass Circle: public Figura\n{\nprivate:\n    double radius;\npublic:\n    Circle(double);\n\nvoid write()\n{\n    std::cout &lt;&lt; \"Radius = \" &lt;&lt; radius &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Pole = \" &lt;&lt; pole &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Circuit = \" &lt;&lt; circuit &lt;&lt; std::endl;\n}\ndouble funkcja_pole(double A)\n{\n    pole = 3.14 * A*A;\n    std::cout &lt;&lt; \"pole:\" &lt;&lt; pole &lt;&lt; std::endl;\n}\ndouble funkcja_circuit(double B)\n{\n    circuit = 3.14 * 2*B;\n    std::cout &lt;&lt; \"circuit:\" &lt;&lt; circuit &lt;&lt; std::endl;\n}\n};\n\nFigura::Figura(double POLE, double CIRCUIT):\n    pole(POLE), circuit(CIRCUIT) {}\n\nCircle::Circle(double RADIUS):\n    radius(RADIUS), Figura(funkcja_pole(RADIUS),funkcja_circuit(RADIUS)) {}\n\nint main()\n{\n    Circle my_circle(2);\n    Figura *wsk;\n    wsk = &amp;my_circle;\n    wsk-&gt;write();\n}\n</code></pre>\n\n<p>Result:\n<img src=\"https://i.stack.imgur.com/2jknh.png\" alt=\"\"></p>\n"}, {"tags": ["c++", "c", "gcc"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 7, "creation_date": 1542817302, "post_id": 53416375, "comment_id": 93707109, "body": "c++ doesn&#39;t allow 0 sized c arrays or c arrays of unknown sizes. Possible duplicate : <a href=\"https://stackoverflow.com/questions/9722632/what-happens-if-i-define-a-0-size-array-in-c-c\" title=\"what happens if i define a 0 size array in c c\">stackoverflow.com/questions/9722632/&hellip;</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 7, "creation_date": 1542817351, "post_id": 53416375, "comment_id": 93707144, "body": "You will do yourself a favor if you think of C and C++ as two completely separate languages that just happen to share a lot of the same keywords."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1542817354, "post_id": 53416375, "comment_id": 93707147, "body": "The code is invalid in C and C++. You need to pay attention to diagnostic messages issued by C compiler as well."}, {"owner": {"reputation": 484, "user_id": 7758765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c6963ac41170217e28cf1b41358a1b?s=128&d=identicon&r=PG&f=1", "display_name": "Welgriv", "link": "https://stackoverflow.com/users/7758765/welgriv"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1542817355, "post_id": 53416375, "comment_id": 93707149, "body": "@Fran&#231;oisAndrieux but C does ?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 3, "creation_date": 1542817358, "post_id": 53416375, "comment_id": 93707150, "body": "C and C++ are different languages, so why expect them to behave the same way?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1542817389, "post_id": 53416375, "comment_id": 93707166, "body": "@Welgriv I don&#39;t know if it does. I&#39;m choosing not to assume the rules of c based on my knowledge of c++. Don&#39;t take my not mentioning the rules of c as implying that it&#39;s allowed. Edit : I see now from the wording of the question how my comment could have been seen as stating a difference between c++ and c rather than just stating a fact about c++. Sorry for the confusion."}, {"owner": {"reputation": 484, "user_id": 7758765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c6963ac41170217e28cf1b41358a1b?s=128&d=identicon&r=PG&f=1", "display_name": "Welgriv", "link": "https://stackoverflow.com/users/7758765/welgriv"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1542817410, "post_id": 53416375, "comment_id": 93707185, "body": "@AnT Ok so my <code>gcc</code> is wrong ? &gt;&lt;"}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 0, "creation_date": 1542817953, "post_id": 53416375, "comment_id": 93707564, "body": "@Welgriv didn&#39;t you just ignore conformance warnings of your compiler?"}, {"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "reply_to_user": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 0, "creation_date": 1542818019, "post_id": 53416375, "comment_id": 93707601, "body": "Welgriv, they put you through the ringer on this one, but it&#39;s actuallly a good question, and you included all the information we needed to see taht when invoked with default settings, <code>gcc</code> does indeed compile  this without further errors.  @&#214;&#246;Tiib, did you actually bother trying it ?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1542818030, "post_id": 53416375, "comment_id": 93707607, "body": "@Welgriv: It is often wrong. But not in this case. Just rememberr that GCC often by default reports many serious language &quot;errors&quot; as &quot;warnings&quot;. You simply ignored its complaints. Specifying <code>-std=...</code> and <code>-pedantic-errors</code> in command line might help you to pay more attention to such errors."}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "reply_to_user": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1542818312, "post_id": 53416375, "comment_id": 93707786, "body": "@DanFarrell gcc gives conformance warnings with -pedantic not by default since by default it compiles some sort of &quot;gnuC&quot; language not C."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1542832186, "post_id": 53416375, "comment_id": 93714283, "body": "<a href=\"https://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/Zero-Length.html</a> for a description of the extension."}], "answers": [{"comments": [{"owner": {"reputation": 484, "user_id": 7758765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c6963ac41170217e28cf1b41358a1b?s=128&d=identicon&r=PG&f=1", "display_name": "Welgriv", "link": "https://stackoverflow.com/users/7758765/welgriv"}, "edited": false, "score": 1, "creation_date": 1542817491, "post_id": 53416422, "comment_id": 93707251, "body": "So why did it compile and execute correctly with my gcc ?"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "reply_to_user": {"reputation": 484, "user_id": 7758765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c6963ac41170217e28cf1b41358a1b?s=128&d=identicon&r=PG&f=1", "display_name": "Welgriv", "link": "https://stackoverflow.com/users/7758765/welgriv"}, "edited": false, "score": 0, "creation_date": 1542817588, "post_id": 53416422, "comment_id": 93707323, "body": "@Welgriv Did you pay attention to warnings (and enabled them)?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 484, "user_id": 7758765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c6963ac41170217e28cf1b41358a1b?s=128&d=identicon&r=PG&f=1", "display_name": "Welgriv", "link": "https://stackoverflow.com/users/7758765/welgriv"}, "edited": false, "score": 0, "creation_date": 1542817619, "post_id": 53416422, "comment_id": 93707337, "body": "@Welgriv: No, it didn&#39;t! The word &quot;compile&quot; in C world has very specific meaning: it means &quot;passed the compilation process without any language-mandated diagnostic messages&quot;. This code does not compile in GCC: see for yourself <a href=\"http://coliru.stacked-crooked.com/a/63b110261be01aa3\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/63b110261be01aa3</a> The warning you see is exactly that: a language-mandated diagnostic message indicating a constraint violation (an error) in your code. What happened next (whether it executed or not) does not matter at all. Your code is not valid C."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 484, "user_id": 7758765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c6963ac41170217e28cf1b41358a1b?s=128&d=identicon&r=PG&f=1", "display_name": "Welgriv", "link": "https://stackoverflow.com/users/7758765/welgriv"}, "edited": false, "score": 0, "creation_date": 1542817621, "post_id": 53416422, "comment_id": 93707339, "body": "@Welgriv When compiling such code I get <code>warning: flexible array initialization is a GNU extension</code>, which means, that it is not part of C language, but is enabled by a compiler extension."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 484, "user_id": 7758765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c6963ac41170217e28cf1b41358a1b?s=128&d=identicon&r=PG&f=1", "display_name": "Welgriv", "link": "https://stackoverflow.com/users/7758765/welgriv"}, "edited": false, "score": 0, "creation_date": 1542817768, "post_id": 53416422, "comment_id": 93707432, "body": "@Welgriv    Try disabling GNU language extensions by passing the <code>-std=</code> option with something that does not enable gnu stuff. Like <code>-std=c11</code>. And crank up the warnings. Also; the fact that something <i>compiles</i> means nothing more than that it is syntactically valid. It says <i>nothing</i> about whether it is <i>correct</i>. &quot;It compiles&quot; is a <i>very low</i> bar."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1542817835, "post_id": 53416422, "comment_id": 93707475, "body": "If you are not good with observing compiler diagnostics and telling which messages are actually &quot;errors&quot;, get a habit of running GCC with <code>-std=... -pedantic-errors</code> flags."}, {"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1542818547, "post_id": 53416422, "comment_id": 93707908, "body": "@AlgirdasPreid\u017eius silently changing the compiler flags in your example and then telling the OP <i>thier</i> command didn&#39;t compile without warning is frustratingly deceptive.  Why not just say the truthful thing - that gcc will compile invalid code if not told to be pedantic about things!"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1542822138, "post_id": 53416422, "comment_id": 93709776, "body": "@DanFarrell But, that what pedantic means: To be pedantic about adhering to the standard, without using any compiler extensions, that accepts non-standard code. Which is what I already said in my original comment (in slightly different words). So, I fail to see the deception (Especially, since &quot;deception&quot; means &quot;<i>the act of causing someone to accept as true or valid what is false or invalid</i>&quot; (<a href=\"https://www.merriam-webster.com/dictionary/deception\" rel=\"nofollow noreferrer\">source</a>), what, about my original comment was false, or invalid?)"}, {"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1542822829, "post_id": 53416422, "comment_id": 93710125, "body": "@AlgirdasPreid\u017eius, because you said &quot;No, it didn&#39;t&quot; when it fact it <i>did</i> compile and run successfully exactly as the OP showed."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 1, "creation_date": 1542823432, "post_id": 53416422, "comment_id": 93710417, "body": "@Dan Farrell: It&#39;s, again, a confusion created by different interpretations of the term <i>compile</i>. Some people believe that if the compiler created an executable, then the code &quot;compiled and ran successfully&quot;, where &quot;success&quot;  is based on their naive expectations (as opposed to language spec). That&#39;s a rather useless understanding of the term for C/C++ purposes. A more mature and meaningful interpretation of the term is, again: &quot;code compiled&quot; = &quot;code passed the compilation process without any language-mandated diagnostic messages&quot;. In this case the code did not really compile."}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 7, "last_activity_date": 1542830482, "last_edit_date": 1542830482, "creation_date": 1542817436, "answer_id": 53416422, "question_id": 53416375, "link": "https://stackoverflow.com/questions/53416375/why-this-different-behaviour-of-structure-initialization-in-c-and-c/53416422#53416422", "title": "Why this different behaviour of structure initialization in C and C++?", "body": "<p>The code is invalid in C. This is not allowed in C</p>\n\n<pre><code>typedef struct{\n  int i;\n  int tab[];\n}mystr;\n\nmystr a = {1,{0,1,2}};\n</code></pre>\n\n<p>Whatever behavior you observe in C mode is a quirk of your compiler that has nothing to do with the language. The compiler supports the code as a non-standard feature, <em>an extension</em>.</p>\n\n<p>Your code is also invalid in C++, but for a reason that is completely different from what was reported by your compiler. In C++ you are not allowed to have <code>[]</code> arrays as class members at all. The compiler lets it slip through (as an <em>extension</em> again), but fails in another spot later.</p>\n\n<p>So, the answer to your question would be: the compiler you are using has different quirks/extensions in C mode than in C++ mode. Which is not surprising, since these are very different languages.</p>\n"}, {"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1542818877, "post_id": 53416739, "comment_id": 93708118, "body": "Additionally, if one wants <code>gcc</code> to be of more help in identifying nonstandardisms, then turning off GNU extensions via the <code>-std=</code> option (e.g. <code>-std=c11</code>) is in order.  Even then, however, the compiler does not promise to diagnose <i>all</i> standard conformance issues."}], "tags": [], "owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "is_accepted": false, "score": 1, "last_activity_date": 1542818830, "last_edit_date": 1542818830, "creation_date": 1542818361, "answer_id": 53416739, "question_id": 53416375, "link": "https://stackoverflow.com/questions/53416375/why-this-different-behaviour-of-structure-initialization-in-c-and-c/53416739#53416739", "title": "Why this different behaviour of structure initialization in C and C++?", "body": "<p>Everything in the upvoted answer might be accurate, but it dances around the root of your question.  You're absolutely right - on debian and alpine docker images, and a gcc invocation that doesn't include <code>-pedantic</code> does compile this and run it without complaint:</p>\n\n<pre><code>root@45c9da7956c8:/# cat t.c; gcc -std=c11 -o t t.c &amp;&amp; ./t;\n#include &lt;stdio.h&gt;\n\ntypedef struct{\n  int i;\n  int tab[];\n}mystr;\n\nmystr a = {1,{0,1,2}};\n\nint main(void){\n  printf(\"%d%d%d\\n\",a.i,a.tab[0],a.tab[1]);\n  return 0;\n}\n101\n</code></pre>\n\n<p>Gcc is a very accomodating compiler, and will work with things that can only be described accurately as out of spec.  That doesn't necessarily make it a bad compiler - but it does make it a poor test of whether code is standards compliant.  <code>-pedantic</code> will help with that.</p>\n\n<p>I'll echo the point made in the question comments that it really is conceptually best to think of C and C++ as completely different languages.   At least, I can't think of a case where getting C code to compile on a c++ compiler would have any value.  Thinking of them as completely separate is a valid model for how they act in real life.  </p>\n"}], "owner": {"reputation": 484, "user_id": 7758765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c6963ac41170217e28cf1b41358a1b?s=128&d=identicon&r=PG&f=1", "display_name": "Welgriv", "link": "https://stackoverflow.com/users/7758765/welgriv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 53416422, "answer_count": 2, "score": 1, "last_activity_date": 1542830482, "creation_date": 1542817266, "last_edit_date": 1542828008, "question_id": 53416375, "link": "https://stackoverflow.com/questions/53416375/why-this-different-behaviour-of-structure-initialization-in-c-and-c", "title": "Why this different behaviour of structure initialization in C and C++?", "body": "<p>Code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct{\n  int i;\n  int tab[];\n}mystr;\n\nmystr a = {1,{0,1,2}};\n\nint main(void){\n  printf(\"%d%d%d\\n\",a.i,a.tab[0],a.tab[1]);\n  return 0;\n}\n</code></pre>\n\n<p>C compiling :</p>\n\n<pre><code>$ gcc main.c -o main &amp;&amp; ./main\n101\n</code></pre>\n\n<p>C++ compiling :</p>\n\n<pre><code>$ g++ main.c -o main &amp;&amp; ./main\nmain.c:8:27: error: too many initializers for \u2018int [0]\u2019\n const mystr a = {1,{0,1,2}};\n                           ^\n</code></pre>\n\n<p>I do understand the problem, it is that <code>tab</code> have no any memory allocated. But why this is ok for C ? Why do C++ doesn't automatically allocate the memory space for the <code>tab</code> ?\nI Know that structures are similar to objects in C++ but may be there is some subtleties that I do not know about global object instantiation ?</p>\n"}, {"tags": ["c++", "compiler-errors"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1542817065, "post_id": 53416270, "comment_id": 93706978, "body": "Can you provide a working example and where the error appears."}, {"owner": {"reputation": 1090, "user_id": 5428089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99553cd40613c219df839d5e30c15e3e?s=128&d=identicon&r=PG&f=1", "display_name": "karastojko", "link": "https://stackoverflow.com/users/5428089/karastojko"}, "edited": false, "score": 0, "creation_date": 1542817543, "post_id": 53416270, "comment_id": 93707293, "body": "<code>Carte::Carte(ifstream&amp;)</code> is the only constructor and the non-existing default constructor is being called at <code>Carte c</code>. Define at least <code>Carte() = default;</code>"}], "owner": {"reputation": 1, "user_id": 10686874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1a481f8422985eed057690392942b5c?s=128&d=identicon&r=PG&f=1", "display_name": "MAITRE_BOUD", "link": "https://stackoverflow.com/users/10686874/maitre-boud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "closed_date": 1542817116, "answer_count": 0, "score": 0, "last_activity_date": 1542816940, "creation_date": 1542816940, "question_id": 53416270, "link": "https://stackoverflow.com/questions/53416270/no-matching-constructor-for-inatialization-of-a-class", "closed_reason": "Duplicate", "title": "No matching constructor for inatialization of a class", "body": "<p>I am a starting C++ and need to make a MineSweeper game, I have difficulties with Class and Objects... \nHere is the error I can't resolve.It seems like I can't create an object of type Carte... The error is near the end of the main file in the function OuvreCase..\nIt would be nice if someone more experienced could help me out a little bit! \nThanks in advance!\nKind regards </p>\n\n<p>.h file :</p>\n\n<pre><code>#ifndef _CARTE_H_\n#define _CARTE_H_\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nenum Case\n{\n    Chiffre,\n    Libre,\n    Mine\n};\n\nclass Carte\n{\n    vector&lt;vector&lt;bool&gt;&gt; casesOuvertes;\n    vector&lt;vector&lt;Case&gt;&gt; cases;\n    int nbMines;\n\nvoid UpdateCarte();\n\npublic:\nCarte(ifstream&amp;);\n\nCase GetCase(int ligne, int colonne) const;\nint GetNbMinesAdjacentes(int ligne, int colonne) const;\nint GetNbLigne() const;\nint GetNbColonne() const;\nvoid Ouvre(int ligne, int colonne);\nbool EstOuvert(int ligne, int colonne) const;\nbool EstFini() const;\nfriend ostream&amp; operator&lt;&lt;(ostream&amp; out, const Carte&amp; carte);\n};\n\nostream&amp; operator&lt;&lt;(ostream&amp; out, const Carte&amp; carte);\n\n#endif\n</code></pre>\n\n<p>Main: </p>\n\n<pre><code>#include \"Carte.h\"\n#include \"Utilities.h\"\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;limits&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n{\n// Prototypes\nbool OuvreCase(Carte&amp; carte, int ligne, int colonne);\n\nstring nomFichierCarte;\n\n// 1. Lire le nom du fichier contenant la carte de jeu\ncout &lt;&lt; \"Entrez le nom du fichier contenant la carte : \";\ncin &gt;&gt; nomFichierCarte;\n\n// 2. Ouvrir le fichier\nifstream fichierCarte(nomFichierCarte);\n// 3. Tant que le nom du fichier est different de \"quitter\" et que le fichier demande n'a pas pus etre ouvert\nwhile (nomFichierCarte != \"quitter\" &amp;&amp; !fichierCarte.is_open())\n{\n    // 3.1 Afficher un message d'erreur\n    cout &lt;&lt; \"Fichier introuvable!\" &lt;&lt; endl &lt;&lt; \"Entrez le nom du fichier contenant la carte : \";\n    // 3.2 Redemander un nom de fichier\n    cin &gt;&gt; nomFichierCarte;\n    // 3.3 Tenter d'ouvrir a nouveau le fichier\n    fichierCarte.open(nomFichierCarte);\n}\n\n// 4. Si le fichier a bien ete ouvert\nif (fichierCarte.is_open())\n{\n    // 4.1 Creer la carte a partir du fichier\n    Carte carte(fichierCarte);\n\n    //4.2 Afficher la carte\n    cout &lt;&lt; carte;\n\n    int ligne = 0;\n    int colonne = 0;\n    // 4.3 Tant qu'on ne veut pas quitter\n    while (ligne != -1)\n    {\n        // 4.3.1 Lire la ligne a essayer\n        cout &lt;&lt; \"Entrez la ligne : \";\n        // 4.3.2 Tant qu'on ne lit pas un nombre entier\n        while (!(cin &gt;&gt; ligne))\n        {\n            // 4.3.2.1 Afficher un message d'erreur et redemander le numero de ligne\n            cout &lt;&lt; \"Erreur! Vous devez entrer une nombre entier! \" &lt;&lt; endl &lt;&lt; \"Entrez la ligne : \";\n            // 4.3.2.2 Vider le tampon de lecture\n            cin.clear();\n            // 4.3.2.3 Ignorer tous les caracteres deja entres\n            cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n');\n        }\n\n        // 4.3.3 Si la ligne est negative\n        if (ligne &lt; 0)\n        {\n            // 4.3.3.1 On quitte le jeu\n            return 0;\n        }\n\n        // 4.3.4 Lire la colonne a essayer\n        cout &lt;&lt; \"Entrez la colonne : \";\n        // 4.3.5 Tant qu'on ne lit pas un nombre entier\n        while (!(cin &gt;&gt; colonne))\n        {\n            // 4.3.5.1 Afficher un message d'erreur et redemander le numero de colonne\n            cout &lt;&lt; \"Erreur! Vous devez entrer une nombre entier! \" &lt;&lt; endl &lt;&lt; \"Entrez la colonne : \";\n            // 4.3.5.2 Vider le tampon de lecture\n            cin.clear();\n            // 4.3.5.3 Ignorer tous les caracteres deja entres\n            cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n');\n        }\n\n        // 4.3.6 Effacer tout l'ecran\n        Console::ClearScreen();\n\n        // 4.3.7 Ouvre la case demande, si on ne peut pas\n        if (!OuvreCase(carte, ligne, colonne))\n        {\n            // 4.3.7.1 Affiche un message d'erreur et indique de quitter le jeu\n            ligne = -1;\n            cout &lt;&lt; \"Vous avez touche une mine!!!\" &lt;&lt; endl;\n        }\n        //    4.3.8 Sinon, si on vient de terminer la partie\n        else if(carte.EstFini())\n        {\n            // 4.3.8.1 Affiche un message de felicitation et indique de quitter le jeu\n            ligne = -1;\n            cout &lt;&lt; \"Vous avez gagne!\" &lt;&lt; endl;\n        }\n\n        else (OuvreCase(carte, ligne, colonne));\n\n\n        // 4.3.9 Affiche la carte\n        cout &lt;&lt; carte;\n    }\n}\nreturn 0;\n}\n\n\n\nbool OuvreCase(Carte&amp; carte, int ligne, int colonne)\n{\n    Carte c; // HERE is my problem, I can't declare an object of type Carte\n    //1.1 Si la ligne demander est dans la carte\n    if (ligne &lt;= 0 &amp;&amp; ligne &lt; Carte::GetNbLigne() &amp;&amp; colonne &gt;= 0 &amp;&amp;                colonne &lt; Carte::GetNbColonne())\n{\n\n}\n\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "constructor", "new-operator"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 7, "creation_date": 1542816879, "post_id": 53416195, "comment_id": 93706842, "body": "Use <code>std::vector</code> and spare your sanity."}], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1542824609, "last_edit_date": 1592644375, "creation_date": 1542823577, "answer_id": 53418125, "question_id": 53416195, "link": "https://stackoverflow.com/questions/53416195/how-to-initialize-dynamic-object-array/53418125#53418125", "title": "how to initialize dynamic object array", "body": "<blockquote>\n<p>Because at the time of using new keyword only array dimension can be mentioned not the arguments for constructor.</p>\n</blockquote>\n<p>The canonical way in the c++ language is to use <a href=\"https://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a>:</p>\n<pre><code>std::vector&lt;int&gt; array(10, 42);\n                //     ^   ^\n                //     |   | the value\n                //     |  the size\n</code></pre>\n<p>Another way to initialize the <code>std::vector</code> with different values is to use a <a href=\"https://en.cppreference.com/w/cpp/utility/initializer_list\" rel=\"nofollow noreferrer\"><code>std::initializer_list</code></a> like so:</p>\n<pre><code>std::vector&lt;int&gt; array = { 1, 2 , 3, 4, 5, 6 , 55, 0, -2, 42, -16 };\n</code></pre>\n<hr />\n<h3>Note:</h3>\n<p>In c++ you should use <code>new</code> and <code>delete</code> only for <em><strong>very rare</strong></em> cases in your own code. These are really advanced and you have to be 100% sure that your use case really demands to do that.</p>\n<p>Manual memory management is usually not necessary at all, and the c++ standard library provides</p>\n<ul>\n<li>a very broad collection of <a href=\"https://en.cppreference.com/w/cpp/container\" rel=\"nofollow noreferrer\">Container classes</a></li>\n<li>a number of <a href=\"https://en.cppreference.com/w/cpp/memory\" rel=\"nofollow noreferrer\">Smart pointer classes</a></li>\n</ul>\n<p>which relieve you from all of the pitfalls of manual dynamic memory management.<br />\nJust use that stuff, anyone who demands you to do something else is most probably incompetent, or was fooled by myths telling that using the stuff from the standard library would imply a significant performance impact.</p>\n"}], "owner": {"reputation": 1, "user_id": 8556609, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7QvVMWPTmDc/AAAAAAAAAAI/AAAAAAAAGz8/yxxBiUknAeA/photo.jpg?sz=128", "display_name": "YUVRAJ SINGH", "link": "https://stackoverflow.com/users/8556609/yuvraj-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1542824609, "creation_date": 1542816731, "question_id": 53416195, "link": "https://stackoverflow.com/questions/53416195/how-to-initialize-dynamic-object-array", "title": "how to initialize dynamic object array", "body": "<p>what if i create array of objects dynamically , then how to initialize instance data members . Because at the time of using new keyword only array dimension can be mentioned not the arguments for constructor.</p>\n"}, {"tags": ["c++", "c++11", "templates"], "comments": [{"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1542816680, "post_id": 53416106, "comment_id": 93706721, "body": "<code>Foo&lt;T&gt;</code> and <code>Foo&lt;T, E&gt;</code> are different templates."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1542816705, "post_id": 53416106, "comment_id": 93706740, "body": "It&#39;s not clear to me what you mean by &quot;I want to specialise Foo with a template class&quot; but you might want to specialize with a type that encodes both types, like <code>Foo&lt;std::tuple&lt;int, bool&gt;&gt;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 253, "user_id": 10628642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5af7ca537382d36126d74d33ee4faab4?s=128&d=identicon&r=PG&f=1", "display_name": "Sasidiran Sangamanautram", "link": "https://stackoverflow.com/users/10628642/sasidiran-sangamanautram"}, "edited": false, "score": 0, "creation_date": 1542817006, "post_id": 53416194, "comment_id": 93706943, "body": "Thanks. I think I&#39;ll do it this way."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 253, "user_id": 10628642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5af7ca537382d36126d74d33ee4faab4?s=128&d=identicon&r=PG&f=1", "display_name": "Sasidiran Sangamanautram", "link": "https://stackoverflow.com/users/10628642/sasidiran-sangamanautram"}, "edited": false, "score": 0, "creation_date": 1542817232, "post_id": 53416194, "comment_id": 93707077, "body": "@SasidiranSangamanautram I just noticed in your Q you want to use <code>Foo</code> like <code>Foo&lt;1, true&gt;</code>.  Is that really what you want to use <code>Foo</code>?"}, {"owner": {"reputation": 253, "user_id": 10628642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5af7ca537382d36126d74d33ee4faab4?s=128&d=identicon&r=PG&f=1", "display_name": "Sasidiran Sangamanautram", "link": "https://stackoverflow.com/users/10628642/sasidiran-sangamanautram"}, "edited": false, "score": 0, "creation_date": 1542818013, "post_id": 53416194, "comment_id": 93707596, "body": "Almost yes, the first argument is actually an enum but I simplified it to an int."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 253, "user_id": 10628642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5af7ca537382d36126d74d33ee4faab4?s=128&d=identicon&r=PG&f=1", "display_name": "Sasidiran Sangamanautram", "link": "https://stackoverflow.com/users/10628642/sasidiran-sangamanautram"}, "edited": false, "score": 0, "creation_date": 1542818157, "post_id": 53416194, "comment_id": 93707684, "body": "@SasidiranSangamanautram Okay.  I&#39;ve added to the answer how to get that since what I first proposed is different."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 5, "last_activity_date": 1542818131, "last_edit_date": 1542818131, "creation_date": 1542816728, "answer_id": 53416194, "question_id": 53416106, "link": "https://stackoverflow.com/questions/53416106/how-can-i-specialise-a-template-with-a-template/53416194#53416194", "title": "How can I specialise a template with a template?", "body": "<p>You need to change the primary template to</p>\n\n<pre><code>template&lt;class T, bool B&gt;\nclass Foo\n{\n};\n</code></pre>\n\n<p>and then you can specialize it like</p>\n\n<pre><code>template&lt;&gt;\nclass Foo&lt;int, true&gt;\n{\n};\n\ntemplate&lt;&gt;\nclass Foo&lt;int, false&gt;\n{\n};\n...\n</code></pre>\n\n<p>and then you would use it like</p>\n\n<pre><code>Foo&lt;int, true&gt; FooT;\nFoo&lt;int, false&gt; FooF;\n</code></pre>\n\n<hr>\n\n<p>If you are going to use values for the first parameter like</p>\n\n<pre><code>Foo&lt;1, true&gt;\n</code></pre>\n\n<p>Then the primary template should be</p>\n\n<pre><code>template&lt;int I, bool B&gt;\nclass Foo\n{\n};\n</code></pre>\n\n<p>and then you can specialize it like</p>\n\n<pre><code>template&lt;&gt;\nclass Foo&lt;1, true&gt;\n{\n};\n\ntemplate&lt;&gt;\nclass Foo&lt;1, false&gt;\n{\n};\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 4, "last_activity_date": 1542816775, "creation_date": 1542816775, "answer_id": 53416214, "question_id": 53416106, "link": "https://stackoverflow.com/questions/53416106/how-can-i-specialise-a-template-with-a-template/53416214#53416214", "title": "How can I specialise a template with a template?", "body": "<p>This is not directly possible. Your template wants a single parameter, you can't specialize it for two. However, you can (partially) specialize it for some other type which is a template of two parameters. </p>\n\n<p>Example:</p>\n\n<pre><code>template&lt;class T&gt;\nclass Foo;\n\ntemplate&lt;int, bool&gt; class tag;\n\ntemplate&lt;int&gt;\nclass Foo&lt;tag&lt;int, true&gt;&gt; { ... };\n\ntemplate&lt;int&gt;\nclass Foo&lt;tag&lt;int, false&gt;&gt; { ... };\n</code></pre>\n\n<p>And than you can use it </p>\n\n<pre><code>Foo&lt;tag&lt;1, true&gt;&gt; foo;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 516, "user_id": 6490190, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c28036f5e41e1db1ea8d989c9264820?s=128&d=identicon&r=PG", "display_name": "Yuriy", "link": "https://stackoverflow.com/users/6490190/yuriy"}, "is_accepted": true, "score": 1, "last_activity_date": 1542818488, "creation_date": 1542818488, "answer_id": 53416774, "question_id": 53416106, "link": "https://stackoverflow.com/questions/53416106/how-can-i-specialise-a-template-with-a-template/53416774#53416774", "title": "How can I specialise a template with a template?", "body": "<p>Seems like default value for template argument.</p>\n\n<pre><code>template&lt;class T, bool flag = false&gt;\nclass Foo\n{\n};\n\ntemplate&lt;&gt;\nclass Foo&lt;int&gt;\n{\n    //\"false\" specialization (default)\n};\n\ntemplate&lt;&gt;\nclass Foo&lt;int, true&gt;\n{\n    //\"true\" specialization\n};\n</code></pre>\n"}], "owner": {"reputation": 253, "user_id": 10628642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5af7ca537382d36126d74d33ee4faab4?s=128&d=identicon&r=PG&f=1", "display_name": "Sasidiran Sangamanautram", "link": "https://stackoverflow.com/users/10628642/sasidiran-sangamanautram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 53416774, "answer_count": 3, "score": 0, "last_activity_date": 1542818488, "creation_date": 1542816480, "question_id": 53416106, "link": "https://stackoverflow.com/questions/53416106/how-can-i-specialise-a-template-with-a-template", "title": "How can I specialise a template with a template?", "body": "<p>Consider a template class</p>\n\n<pre><code>template&lt;class T&gt;\nclass Foo\n{\n};\n</code></pre>\n\n<p>for which I can write a simple specialisation</p>\n\n<pre><code>template&lt;&gt;\nclass Foo&lt;int&gt;\n{\n};\n</code></pre>\n\n<p>I have a situation where I want to specialise Foo with a template class, in detail with a bool which serves as a compile-time flag:</p>\n\n<pre><code>template&lt;&gt;\nclass Foo&lt;int, bool&gt; // Clearly not the correct notation.\n{\n\n}\n</code></pre>\n\n<p>Uses would include Foo&lt;1, true> and Foo&lt;1, false>.</p>\n\n<p>What is the correct notation for the class name, where I've marked \"Clearly not the correct notation.\"?</p>\n\n<p>I code to the C++11 standard.</p>\n"}, {"tags": ["c++", "multithreading", "debugging", "visual-studio-2015"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1542816237, "post_id": 53415963, "comment_id": 93706463, "body": "<a href=\"https://stackoverflow.com/questions/2448155/setthreadname-not-working-with-visual-studio-2005\" title=\"setthreadname not working with visual studio 2005\">stackoverflow.com/questions/2448155/&hellip;</a>"}, {"owner": {"reputation": 5746, "user_id": 1563833, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f3d7ae271e46eb178e7dd4f2ef760e6f?s=128&d=identicon&r=PG", "display_name": "Wyck", "link": "https://stackoverflow.com/users/1563833/wyck"}, "edited": false, "score": 0, "creation_date": 1542817496, "post_id": 53415963, "comment_id": 93707255, "body": "Also <a href=\"https://docs.microsoft.com/en-us/visualstudio/debugger/how-to-set-a-thread-name-in-native-code?view=vs-2017\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/visualstudio/debugger/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 2586156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e89b57ec21caca479c3912ca2d97ac9b?s=128&d=identicon&r=PG", "display_name": "user2586156", "link": "https://stackoverflow.com/users/2586156/user2586156"}, "edited": false, "score": 0, "creation_date": 1542818590, "post_id": 53415963, "comment_id": 93707936, "body": "How to you convert thread::id to DWORD?"}, {"owner": {"reputation": 51483, "user_id": 7460777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/938b7ee32587b28c8634edec4a0f90c2?s=128&d=identicon&r=PG&f=1", "display_name": "Leo Liu-MSFT", "link": "https://stackoverflow.com/users/7460777/leo-liu-msft"}, "edited": false, "score": 0, "creation_date": 1542870207, "post_id": 53415963, "comment_id": 93725080, "body": "Check if this thread helps: <a href=\"https://stackoverflow.com/questions/10121560/stdthread-naming-your-thread\" title=\"stdthread naming your thread\">stackoverflow.com/questions/10121560/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 2586156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e89b57ec21caca479c3912ca2d97ac9b?s=128&d=identicon&r=PG", "display_name": "user2586156", "link": "https://stackoverflow.com/users/2586156/user2586156"}, "edited": false, "score": 0, "creation_date": 1543242130, "post_id": 53415963, "comment_id": 93835967, "body": "Thank you, that worked."}], "owner": {"reputation": 1, "user_id": 2586156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e89b57ec21caca479c3912ca2d97ac9b?s=128&d=identicon&r=PG", "display_name": "user2586156", "link": "https://stackoverflow.com/users/2586156/user2586156"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "closed_date": 1543242138, "answer_count": 0, "score": 0, "last_activity_date": 1542855576, "creation_date": 1542815988, "last_edit_date": 1542855576, "question_id": 53415963, "link": "https://stackoverflow.com/questions/53415963/how-to-give-a-custom-name-to-thread-in-visual-studio-2015", "closed_reason": "Duplicate", "title": "How to give a custom name to thread in Visual Studio 2015?", "body": "<p>The class below is just an example of a wrapper I made to use the thread library. </p>\n\n<p>I assign a name and id for every thread I spawn using this wrapper. For ease of debugging multi-threaded applications, I would like to see the name of the thread displayed on my thread menu in Visual studio 2015 (see image attached). </p>\n\n<p>Is that possible? </p>\n\n<p>I would like to forward a custom name to visual studio or in other words I would like to name my worker threads. </p>\n\n<pre><code>//// Identity ////////////////////////////////////////////////////////\nclass Thread\n{\n//// Structors ///////////////////////////////////////////////////////\npublic:\n// Constructor.\nThread (const string&amp; name, const ThreadType type, const function&lt;void ()&gt;&amp; task);\n// Destructor.\n~Thread ();\n\n\npublic:\nthread::id id;                               \nstring name;                                 ///&lt; The descriptive name of the thread.\nconst ThreadType type;                       ///&lt; The classification type of the thread.\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/prf9C.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/prf9C.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "macos", "icc"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1542815954, "post_id": 53415922, "comment_id": 93706283, "body": "Is icpc picking up the command line tools from XCode properly (if you installed them)?"}, {"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1542816103, "post_id": 53415922, "comment_id": 93706380, "body": "Show 10 lines around 94"}, {"owner": {"reputation": 348, "user_id": 2393329, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ghTjd.jpg?s=128&g=1", "display_name": "crevell", "link": "https://stackoverflow.com/users/2393329/crevell"}, "edited": false, "score": 0, "creation_date": 1542816419, "post_id": 53415922, "comment_id": 93706565, "body": "Xcode command line tools are installed. The offending file is a part thereof."}, {"owner": {"reputation": 348, "user_id": 2393329, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ghTjd.jpg?s=128&g=1", "display_name": "crevell", "link": "https://stackoverflow.com/users/2393329/crevell"}, "edited": false, "score": 0, "creation_date": 1542816429, "post_id": 53415922, "comment_id": 93706572, "body": "The lines around 94 are as follows:     #if !defined(_LIBCPP_HAS_NO_PRAGMA_SYSTEM_HEADER)     #pragma GCC system_header     #endif          #include_next &lt;stdlib.h&gt;          #ifdef __cplusplus          extern &quot;C++&quot; {"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1542816487, "post_id": 53415922, "comment_id": 93706612, "body": "Does it work if you include the C++ version of that file, <code>#include &lt;cstdlib&gt;</code>?"}, {"owner": {"reputation": 348, "user_id": 2393329, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ghTjd.jpg?s=128&g=1", "display_name": "crevell", "link": "https://stackoverflow.com/users/2393329/crevell"}, "edited": false, "score": 0, "creation_date": 1542816493, "post_id": 53415922, "comment_id": 93706617, "body": "That&#39;s badly formatted but not sure how to change it in a comment."}, {"owner": {"reputation": 348, "user_id": 2393329, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ghTjd.jpg?s=128&g=1", "display_name": "crevell", "link": "https://stackoverflow.com/users/2393329/crevell"}, "edited": false, "score": 0, "creation_date": 1542816537, "post_id": 53415922, "comment_id": 93706645, "body": "The full trace shows that <code>stdlib.h</code> is being called from <code>cstdlib</code>"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1542816639, "post_id": 53415922, "comment_id": 93706696, "body": "Perhaps <code>icpc</code> does not honor the (I presume) <code>clang</code> mechanism (mimics the <code>gcc</code> mechanism) for chaining include files."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1542816708, "post_id": 53415922, "comment_id": 93706744, "body": "It should go up to /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/incl&zwnj;&#8203;ude/, not v1"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1542816728, "post_id": 53415922, "comment_id": 93706755, "body": "I think the intent of that line is to include the XCode header, which should be at <code>&#47;Library&#47;Developer&#47;CommandLineTools&#47;SDKs&#47;MacOSX.sdk&#47;usr&#47;incl&zwnj;&#8203;ude</code>."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1542816779, "post_id": 53415922, "comment_id": 93706781, "body": "Is your version of ICPC compatible with Mojave?"}, {"owner": {"reputation": 348, "user_id": 2393329, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ghTjd.jpg?s=128&g=1", "display_name": "crevell", "link": "https://stackoverflow.com/users/2393329/crevell"}, "edited": false, "score": 0, "creation_date": 1542816781, "post_id": 53415922, "comment_id": 93706784, "body": "I&#39;ve found a solution. Will post an answer to my question. Thanks for the input all."}], "answers": [{"tags": [], "owner": {"reputation": 348, "user_id": 2393329, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ghTjd.jpg?s=128&g=1", "display_name": "crevell", "link": "https://stackoverflow.com/users/2393329/crevell"}, "is_accepted": true, "score": 2, "last_activity_date": 1542816840, "creation_date": 1542816840, "answer_id": 53416240, "question_id": 53415922, "link": "https://stackoverflow.com/questions/53415922/catastrophic-error-cannot-open-source-file-stdlib-h/53416240#53416240", "title": "catastrophic error: cannot open source file &quot;stdlib.h&quot;", "body": "<p>This problem was eventually solved by running the <code>macOS_SDK_headers_for_macOS_10.14.pkg</code> installer located at <code>/Library/Developer/CommandLineTools/Packages</code></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14801040, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14Gijkg6KlpcsU_89sOQpgCO2oE2AkPq-YGJsDmD5UA=k-s128", "display_name": "Oscar Molina", "link": "https://stackoverflow.com/users/14801040/oscar-molina"}, "is_accepted": false, "score": 0, "last_activity_date": 1607602553, "creation_date": 1607602553, "answer_id": 65234342, "question_id": 53415922, "link": "https://stackoverflow.com/questions/53415922/catastrophic-error-cannot-open-source-file-stdlib-h/65234342#65234342", "title": "catastrophic error: cannot open source file &quot;stdlib.h&quot;", "body": "<p>The following command helped me on MacOSX Big Sur: <code>export CPLUS_INCLUDE_PATH=/Library/Developer/CommandLineTools/SDKs/MacOSX10.15.sdk/usr/include/</code></p>\n"}], "owner": {"reputation": 348, "user_id": 2393329, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ghTjd.jpg?s=128&g=1", "display_name": "crevell", "link": "https://stackoverflow.com/users/2393329/crevell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2037, "favorite_count": 0, "accepted_answer_id": 53416240, "answer_count": 2, "score": 3, "last_activity_date": 1607602802, "creation_date": 1542815878, "last_edit_date": 1607602802, "question_id": 53415922, "link": "https://stackoverflow.com/questions/53415922/catastrophic-error-cannot-open-source-file-stdlib-h", "title": "catastrophic error: cannot open source file &quot;stdlib.h&quot;", "body": "<p>When compiling a C++ project, I have recently begun to see the following error:</p>\n\n<pre><code>/Library/Developer/CommandLineTools/usr/include/c++/v1/stdlib.h(94): catastrophic error: cannot open source file \"stdlib.h\"\n#include_next &lt;stdlib.h&gt;\n</code></pre>\n\n<p>This is very strange because the offending line <code>#include_next &lt;stdlib.h&gt;</code> is within the file <code>/Library/Developer/CommandLineTools/usr/include/c++/v1/stdlib.h</code> meaning the file is somehow trying to include itself and failing. </p>\n\n<p>This is a default system file so I don't understand why it should be broken suddenly. And advice would be greatly appreciated.</p>\n\n<p>(Running on macOS Mojave with Intel icpc compiler)</p>\n"}, {"tags": ["c++", "aix", "intrinsics", "xlc"], "answers": [{"comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1542819462, "post_id": 53416302, "comment_id": 93708470, "body": "Thanks again @Rafik. What, exactly, does <code>__rotatel4</code> do? The description says <i>&quot;Rotate Left Word&quot;</i> but does not say more. I thought it was an intrinsic for a customary C rotate, but judging from the number of failed self tests it does something else."}, {"owner": {"reputation": 341, "user_id": 8311639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56b4e25d73662bad7049f0fa75a0150?s=128&d=identicon&r=PG&f=1", "display_name": "Rafik Zurob", "link": "https://stackoverflow.com/users/8311639/rafik-zurob"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1542841220, "post_id": 53416302, "comment_id": 93717635, "body": "It rotates the first argument by the number of arguments specified by the second argument.  Here is an example:  <code>#include &lt;stdio.h&gt; #include &lt;builtins.h&gt;  int main() {   unsigned int a, b, c;       a = 0xabcdef01;       for (int i=0; i &lt; 8; ++i) {         b = __rotatel4(a, 4 * i);         printf(&quot;0x%08x\\n&quot;, b);       }   return 0; }</code>  Prints:  <code>0xabcdef01 0xbcdef01a 0xcdef01ab 0xdef01abc 0xef01abcd 0xf01abcde 0x01abcdef 0x1abcdef0</code>"}], "tags": [], "owner": {"reputation": 341, "user_id": 8311639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56b4e25d73662bad7049f0fa75a0150?s=128&d=identicon&r=PG&f=1", "display_name": "Rafik Zurob", "link": "https://stackoverflow.com/users/8311639/rafik-zurob"}, "is_accepted": true, "score": 2, "last_activity_date": 1542817762, "last_edit_date": 1542817762, "creation_date": 1542817013, "answer_id": 53416302, "question_id": 53415781, "link": "https://stackoverflow.com/questions/53415781/the-name-lookup-for-rotatel4-did-not-find-a-declaration/53416302#53416302", "title": "The name lookup for &quot;__rotatel4&quot; did not find a declaration", "body": "<p>For XL C/C++ V12.1, you'll need to include <code>&lt;builtins.h&gt;</code>:</p>\n\n<pre><code>$ cat aaa.cpp\n#include &lt;cstdlib&gt;\n\nunsigned int Foo (unsigned int x)\n{\n  return __rotatel4(x, 4U);\n}\n$ xlC aaa.cpp -c\n\"aaa.cpp\", line 5.10: 1540-0274 (S) The name lookup for \"__rotatel4\" did not find a declaration.\n$ cat aaa.cpp\n#include &lt;cstdlib&gt;\n#include &lt;builtins.h&gt;\n\nunsigned int Foo (unsigned int x)\n{\n  return __rotatel4(x, 4U);\n}\n$ xlC aaa.cpp -c\n$\n</code></pre>\n\n<p>For the upcoming 16.1 release, which is in beta, you don't need it.  (It will work with and without it.)</p>\n"}], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 53416302, "answer_count": 1, "score": 1, "last_activity_date": 1542817762, "creation_date": 1542815445, "question_id": 53415781, "link": "https://stackoverflow.com/questions/53415781/the-name-lookup-for-rotatel4-did-not-find-a-declaration", "title": "The name lookup for &quot;__rotatel4&quot; did not find a declaration", "body": "<p>I'm working on GCC111 from the compile farm. The machine is AIX 7.1, POWER7 with IBM XLC 12.1. I'm trying to use <code>__rotatel4</code>:</p>\n\n<pre><code>$ cat test.cxx\n#include &lt;cstdlib&gt;\n\nunsigned int Foo (unsigned int x)\n{\n  return __rotatel4(x, 4U);\n}\n</code></pre>\n\n<p>A compile results in:</p>\n\n<pre><code>$ xlC -O3 -c test.cxx\n\"test.cxx\", line 5.10: 1540-0274 (S) The name lookup for \"__rotatel4\" did not find a declaration.\n</code></pre>\n\n<p>According to the compiler manual <a href=\"https://www-01.ibm.com/support/docview.wss?uid=swg27024204\" rel=\"nofollow noreferrer\">IBM XL C/C++ for AIX, V12.1</a> (p. 486) the intrinsics should be available. Here is the prototype, and it does not have restrictions like POWER6:</p>\n\n<pre><code>unsigned int __rotatel4 (unsigned int rs, unsigned int shift)\n</code></pre>\n\n<p>Adding <code>-qarch=pwr7</code> and/or <code>-D_XOPEN_SOURCE=600</code> resulted in the same error. I found <a href=\"https://www-01.ibm.com/support/docview.wss?uid=swg21315623\" rel=\"nofollow noreferrer\">Unexpected name lookup error \"1540-0274 (S)\" when compiling code with templates</a>, but it does not seem to apply here.</p>\n\n<p>How does one use <code>__rotatel4</code> in a program?</p>\n\n<hr>\n\n<pre><code>gcc111$ oslevel -s\n7100-03-02-1412\n\ngcc111$ xlC -qversion\nIBM XL C/C++ for AIX, V12.1 (5765-J02, 5725-C72)\nVersion: 12.01.0000.0000\n</code></pre>\n"}, {"tags": ["python", "c++", "boost", "ctypes"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1542815860, "post_id": 53415722, "comment_id": 93706229, "body": "A ctypes type is not a Boost one, this cannot work for obvious reasons."}, {"owner": {"reputation": 123, "user_id": 1470354, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2fe4a73981e7e1af20517a8c7fc8a75e?s=128&d=identicon&r=PG", "display_name": "Behzad", "link": "https://stackoverflow.com/users/1470354/behzad"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1542816240, "post_id": 53415722, "comment_id": 93706464, "body": "I&#39;m not sure I understand, this code is functional if I were to use this  test_mod.test_boost_func(100.0).   I haven&#39;t defined that argument as a boost type. You are saying I can&#39;t pass a ctype as argument to a C++ function?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1542816286, "post_id": 53415722, "comment_id": 93706489, "body": "Yes. A ctypes type is not a standard type, and Boost doesn&#39;t know how to extract its content, hence the error."}], "owner": {"reputation": 123, "user_id": 1470354, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2fe4a73981e7e1af20517a8c7fc8a75e?s=128&d=identicon&r=PG", "display_name": "Behzad", "link": "https://stackoverflow.com/users/1470354/behzad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542815207, "creation_date": 1542815207, "question_id": 53415722, "link": "https://stackoverflow.com/questions/53415722/combining-boost-and-ctypes", "title": "Combining boost and ctypes", "body": "<p>I'm trying to pass a ctypes argument to a C++ module exposed by boost. I'm getting the following error:</p>\n\n<pre><code>File \"ctype_test.py\", line 7, in &lt;module&gt;\n    test_mod.test_boost_func(i)\nBoost.Python.ArgumentError: Python argument types in\n    test_mod.test_boost_func(c_double)\ndid not match C++ signature:\n    test_boost_func(double i)\n</code></pre>\n\n<p>I understand that the type I am passing does not that in the C++ function. I don't know what I'm missing to make the double type in the Python code.</p>\n\n<p>C++ code to generate the boost python module:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;array&gt;\n\n#include &lt;boost/python.hpp&gt;\n#include &lt;boost/python/args.hpp&gt;\n\n\nvoid test_boost_func(double i) {\n\n    std::cout &lt;&lt; i &lt;&lt; std::endl;\n\n}\n\nBOOST_PYTHON_MODULE(test_mod)\n{\n    boost::python::def(\"test_boost_func\", &amp;test_boost_func, (boost::python::arg(\"i\") ));\n}\n</code></pre>\n\n<p>python code using ctypes to create and pass the argument:</p>\n\n<pre><code>import ctypes\nimport test_mod\n\nif __name__ == \"__main__\":\n    i = ctypes.c_double(100.0)\n    test_mod.test_boost_func(i)\n</code></pre>\n"}, {"tags": ["c++", "windows", "qt", "qprocess", "multiplatform"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10301832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd1b7cce0f31f643a32b73d39a73eeed?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto", "link": "https://stackoverflow.com/users/10301832/roberto"}, "edited": false, "score": 0, "creation_date": 1542962540, "post_id": 53415887, "comment_id": 93759267, "body": "Thanks for your help!"}], "tags": [], "owner": {"reputation": 620, "user_id": 6520107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a47f891c7c0e86ff5a885881233feca1?s=128&d=identicon&r=PG&f=1", "display_name": "Siliace", "link": "https://stackoverflow.com/users/6520107/siliace"}, "is_accepted": false, "score": 0, "last_activity_date": 1542815746, "creation_date": 1542815746, "answer_id": 53415887, "question_id": 53415688, "link": "https://stackoverflow.com/questions/53415688/run-qt-qprocess-independently-on-the-os/53415887#53415887", "title": "Run Qt QProcess independently on the OS", "body": "<p>You can use Q_OS macros. Something like that should works (not tested):</p>\n\n<pre><code>#if defined Q_OS_WIN\nQString python_path = \"my_python_path/python.exe\";\n#else\nQString python_path = \"my_python_path/python\";\n#endif\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10301832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd1b7cce0f31f643a32b73d39a73eeed?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto", "link": "https://stackoverflow.com/users/10301832/roberto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542815746, "creation_date": 1542815077, "last_edit_date": 1542815176, "question_id": 53415688, "link": "https://stackoverflow.com/questions/53415688/run-qt-qprocess-independently-on-the-os", "title": "Run Qt QProcess independently on the OS", "body": "<p>I am developing an application on QT in C++ and I learned recently how to use it, therefore I am still not totally confident. I am struggling with this: I am developing on Linux but I would like to make it work also on Windows. The C++ code calls a Python script (passing some arguments to it), and to achieve my aim I am using </p>\n\n<p><code>QDir::separator()</code> </p>\n\n<p>to separate the folders names(the arguments list contains some paths), and this should be useful to my purpose, because it will use automatically / for Linux and \\ on Windows (correct me if I am wrong). </p>\n\n<p>The code looks like this:</p>\n\n<pre><code>python_path= my_python_path/python;\nscript_path=../script.py;\n\n\nQStringList arguments;\narguments &lt;&lt; QString(script_path);\narguments &lt;&lt; QString(arg1);\narguments &lt;&lt; QString(arg2);\n\n\nQProcess *p = new QProcess( this );\n\nif (p){\n\n  p-&gt;start(python_path,arguments);\n}\n</code></pre>\n\n<p>Now my problem: on Windows I should use:</p>\n\n<pre><code> python_path= my_python_path/python.exe;\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code> python_path= my_python_path/python;\n</code></pre>\n\n<p>How to treat this multi platform development on QT? Detect the system and use a if? Or is there some better solution?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "libstdc++", "abi", "libc++", "object-files"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1542815246, "post_id": 53415544, "comment_id": 93705818, "body": "Goal may mean that they don&#39;t agree at this stage?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1542817863, "post_id": 53415544, "comment_id": 93707500, "body": "noexcept is missing, it is part of the function signature."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1542876187, "post_id": 53415544, "comment_id": 93727940, "body": "@Hans but is <code>noexcept</code> also part of the ABI?"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1542972256, "post_id": 53415544, "comment_id": 93764321, "body": "@MatthieuBrucher no, it means &quot;some low-level features such as exception objects, rtti and memory allocation&quot; not <code>std::set</code> and <code>std::string</code>."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1542972318, "post_id": 53415544, "comment_id": 93764356, "body": "@rubenvb it&#39;s not part of the mangled name, but is part of the type. But that&#39;s irrelevant here. The problem is much less subtle than that."}, {"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 1, "creation_date": 1542972563, "post_id": 53415544, "comment_id": 93764483, "body": "Did you maybe read the goal as &quot;except for&quot; instead of just &quot;for&quot;? You disable RTTI and exceptions and worry about <code>std::allocator</code> as if you think that exception objects, rtti and memory allocation are the things that are <i>not</i> compatible, when in fact they are the <b>only things</b> that are."}], "answers": [{"tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": true, "score": 3, "last_activity_date": 1542972201, "creation_date": 1542972201, "answer_id": 53445795, "question_id": 53415544, "link": "https://stackoverflow.com/questions/53415544/when-why-are-libstdc-and-libc-symbols-incompatible/53445795#53445795", "title": "When/why are libstdc++ and libc++ symbols incompatible?", "body": "<blockquote>\n  <p>So, is the problem <code>std::allocator&lt;char&gt;</code>?</p>\n</blockquote>\n\n<p>What? No. It's <strong>everything</strong> in your example.</p>\n\n<p>The doc you quoted clearly says the goal is compatibility for \"low-level features such as exception objects, rtti and memory allocation\".</p>\n\n<p><code>std::set</code> and <code>std::string</code> are not \"low-level features such as exception objects, rtti and memory allocation\". They are very definitely not compatible between libc++ and libstdc++, which are completely different libraries with completely different implementations.</p>\n\n<p>The compatible pieces are things like <code>std::type_info</code> and <code>std::exception</code> (and the derived exception types in <code>&lt;stdexcept&gt;</code>) because those are part of the basic language runtime. Anything above that, such as containers, strings, algorithms, I/O, locales etc. is not compatible.</p>\n"}], "owner": {"reputation": 898, "user_id": 6557621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qbma7.png?s=128&g=1", "display_name": "MCCCS", "link": "https://stackoverflow.com/users/6557621/mcccs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 53445795, "answer_count": 1, "score": -1, "last_activity_date": 1542972201, "creation_date": 1542814630, "question_id": 53415544, "link": "https://stackoverflow.com/questions/53415544/when-why-are-libstdc-and-libc-symbols-incompatible", "title": "When/why are libstdc++ and libc++ symbols incompatible?", "body": "<p>Setup:</p>\n\n<p><code>test.cpp</code></p>\n\n<pre><code>#include &lt;set&gt;\n#include &lt;string&gt;\n\nvoid common_config_file_iterator(const std::set&lt;std::string&gt;&amp; allowed_options) {}\n</code></pre>\n\n<p><code>include.cpp</code></p>\n\n<pre><code>#include &lt;set&gt;\n#include &lt;string&gt;\n\nvoid common_config_file_iterator(const std::set&lt;std::string&gt;&amp;) noexcept;\n\nint main() {\n    std::set&lt;std::string&gt; set;\n    common_config_file_iterator(set);\n    return 0;\n}\n</code></pre>\n\n<p><code>test.sh</code></p>\n\n<pre><code>clang++-7 test.cpp -c -O3 -fno-rtti -fno-exceptions -o test.o\ng++-8 test.o include.cpp -O3 -fno-rtti -fno-exceptions -o test\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"common_config_file_iterator(std::set&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;, std::less&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt;, std::allocator&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; &gt; &gt; const&amp;)\", referenced from:\n      _main in ccWoGgrX.o\nld: symbol(s) not found for architecture x86_64\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>So I did <code>nm -g test.o</code>:</p>\n\n<pre><code>0000000000000000 T __Z27common_config_file_iteratorRKNSt3__13setINS_12basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEENS_4lessIS6_EENS4_IS6_EEEE\n</code></pre>\n\n<p>According to <a href=\"https://demangler.com/\" rel=\"nofollow noreferrer\">demangler.com</a>, it means:</p>\n\n<pre><code>common_config_file_iterator(std::__1::set&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;, std::__1::less&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; &gt;, std::__1::allocator&lt;std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; &gt; &gt; const&amp;)\n</code></pre>\n\n<p><a href=\"https://libcxx.llvm.org/#goals\" rel=\"nofollow noreferrer\">Libc++ says</a>:</p>\n\n<blockquote>\n  <p>[Features and Goals:] ABI compatibility with gcc's libstdc++ for some low-level features such as exception objects, rtti and memory allocation.</p>\n</blockquote>\n\n<p>So, is the problem <code>std::allocator&lt;char&gt;</code>?</p>\n\n<p>Note that I use the macOS assembler.</p>\n\n<p>Curiosity caused by <a href=\"https://github.com/bitcoin/bitcoin/issues/3228\" rel=\"nofollow noreferrer\">this issue</a> and <a href=\"https://github.com/boostorg/program_options/blob/4b81beaaa995026ebdc032bfe809f64a5056ce88/src/config_file.cpp#L23\" rel=\"nofollow noreferrer\">boost/program-options</a>.</p>\n"}, {"tags": ["c++", "opengl", "netbeans", "cygwin", "mingw"], "comments": [{"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1542821938, "post_id": 53415465, "comment_id": 93709695, "body": "You need to tell in your <code>makefile</code> the directories to search for external, already compiled, libraries."}, {"owner": {"reputation": 9, "user_id": 7576356, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KGi4hACrFWI/AAAAAAAAAAI/AAAAAAAAAGg/1tldmkhDHuw/photo.jpg?sz=128", "display_name": "Deepak Suresh S", "link": "https://stackoverflow.com/users/7576356/deepak-suresh-s"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1542941345, "post_id": 53415465, "comment_id": 93753500, "body": "Already linked the libraries"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1542978361, "post_id": 53415465, "comment_id": 93767355, "body": "Your error says &quot;cannot find&quot; followed by a wrong filename &quot;-lglew32s&quot;. You should review your makefile; it seems you set the libraries in wrong parameter."}], "owner": {"reputation": 9, "user_id": 7576356, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KGi4hACrFWI/AAAAAAAAAAI/AAAAAAAAAGg/1tldmkhDHuw/photo.jpg?sz=128", "display_name": "Deepak Suresh S", "link": "https://stackoverflow.com/users/7576356/deepak-suresh-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542814410, "creation_date": 1542814410, "question_id": 53415465, "link": "https://stackoverflow.com/questions/53415465/opengl-cannot-find-libraries-in-mingw-compiler-netbeans", "title": "opengl cannot find libraries in mingw compiler netbeans", "body": "<pre><code>cd 'C:\\Users\\Deepa\\Documents\\NetBeansProjects\\game' C:\\MinGW\\msys\\1.0\\bin\\make.exe -f Makefile CONF=Debug \"/C/MinGW/msys/1.0/bin/make.exe\" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf\nmake.exe[1]: Entering directory `/c/Users/Deepa/Documents/NetBeansProjects/game' \"/C/MinGW/msys/1.0/bin/make.exe\"  -f nbproject/Makefile-Debug.mk dist/Debug/MinGW-Windows/game.exe\nmake.exe[2]: Entering directory `/c/Users/Deepa/Documents/NetBeansProjects/game'\nmkdir -p build/Debug/MinGW-Windows\ng++    -c -g -s -o build/Debug/MinGW-Windows/main.o main.cpp\nmkdir -p dist/Debug/MinGW-Windows\ng++     -o dist/Debug/MinGW-Windows/game build/Debug/MinGW-Windows/main.o -lglew32 -lglew32s -lglut32\n/usr/lib/gcc/x86_64-pc-cygwin/7.3.0/../../../../x86_64-pc-cygwin/bin/ld: cannot find -lglew32s\n/usr/lib/gcc/x86_64-pc-cygwin/7.3.0/../../../../x86_64-pc-cygwin/bin/ld: cannot find -lglut32\ncollect2: error: ld returned 1 exit status\nmake.exe[2]: *** [dist/Debug/MinGW-Windows/game.exe] Error 1\nmake.exe[2]: Leaving directory `/c/Users/Deepa/Documents/NetBeansProjects/game'\nmake.exe[1]: *** [.build-conf] Error 2\nmake.exe[1]: Leaving directory `/c/Users/Deepa/Documents/NetBeansProjects/game'\nmake.exe\": *** [.build-impl] Error 2\n\nBUILD FAILED (exit value 2, total time: 6s)\n</code></pre>\n\n<p>im using a minGW compiler but \" /usr/lib/gcc/x86_64-pc-cygwin/7.3.0/../../../../x86_64-pc-cygwin/bin/ld: cannot find -lglew32s \" it seems to be in cygwin.. \nwhy is it so? and i cant build the file help please</p>\n"}, {"tags": ["c#", "c++", "templates", "command-line-interface"], "comments": [{"owner": {"reputation": 1889, "user_id": 7038446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38faf3b21f6b84c3d25269cf3919d8a?s=128&d=identicon&r=PG&f=1", "display_name": "felix", "link": "https://stackoverflow.com/users/7038446/felix"}, "edited": false, "score": 1, "creation_date": 1542815735, "post_id": 53415464, "comment_id": 93706145, "body": "There is no way for C# to instantiate C++ template. <a href=\"https://stackoverflow.com/questions/35614760/expose-c-cli-templated-wrapper-to-c-sharp\">But generic seems promising</a>. I am afraid that you have to dig deep into C# generic and its cli form."}, {"owner": {"reputation": 1889, "user_id": 7038446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38faf3b21f6b84c3d25269cf3919d8a?s=128&d=identicon&r=PG&f=1", "display_name": "felix", "link": "https://stackoverflow.com/users/7038446/felix"}, "edited": false, "score": 0, "creation_date": 1542815872, "post_id": 53415464, "comment_id": 93706243, "body": "And you might want to keep CLI layer simple. According to my colleagues, debugging in CLI is a nightmare."}, {"owner": {"reputation": 5775, "user_id": 83839, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d927b767c21dd35ad22bfefcb091266a?s=128&d=identicon&r=PG", "display_name": "Kevin Anderson", "link": "https://stackoverflow.com/users/83839/kevin-anderson"}, "reply_to_user": {"reputation": 1889, "user_id": 7038446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38faf3b21f6b84c3d25269cf3919d8a?s=128&d=identicon&r=PG&f=1", "display_name": "felix", "link": "https://stackoverflow.com/users/7038446/felix"}, "edited": false, "score": 0, "creation_date": 1542911221, "post_id": 53415464, "comment_id": 93746747, "body": "+1 to @felix &#39;s link.  You&#39;re running into runtime vs compile time problems here.  C# does a lot of its work at runtime (or just-in-time compilation, depending), so working them together isn&#39;t easy.  While the generic option is there, I&#39;d see what your NEEDS are.  The fastest way to &quot;get it done&quot; may be to just write a non-generic wrapper or two to the specific specializations you need.  It&#39;s not elegant, but it would get the job done.  The &quot;generic&quot; option linked is just a bunch of specializations, so not that different really."}], "owner": {"reputation": 157, "user_id": 5920044, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qo5p7.jpg?s=128&g=1", "display_name": "Alvaro Palma Aste", "link": "https://stackoverflow.com/users/5920044/alvaro-palma-aste"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542815356, "creation_date": 1542814400, "last_edit_date": 1542815356, "question_id": 53415464, "link": "https://stackoverflow.com/questions/53415464/using-a-c-function-template-from-cli-wrapper", "title": "Using a C++ function template from CLI wrapper", "body": "<p>I'm building a C++/CLI DLL to be able to communicate a plain C++ DLL with a C# application. The plain C++ DLL is third party provided and I have no way to modify it.</p>\n\n<p>That plain C++ DLL contains some member function templates, in the way:</p>\n\n<ol>\n<li><p>plain C++ DLL header file:</p>\n\n<pre><code>class pureCPP\n{\n    template&lt;typename T&gt;\n    void usefulFunctionA(T &amp;b, T const &amp;a)\n    {\n        /* Implementation of the function */\n    }\n}\n</code></pre></li>\n</ol>\n\n<p>So my idea would be to reflect that in the CLI DLL header file:</p>\n\n<ol start=\"2\">\n<li><p>CLI DLL header file:</p>\n\n<pre><code>public ref class CLI_DLL\n{\n    template&lt;typename T&gt;\n    void usefulFunctionB(T &amp;b, T const &amp;a)\n    {\n        pureCppPtr-&gt;usefulFunctionA(b, a);\n    }\n\n    PureCPP *pureCppPtr;\n}\n</code></pre></li>\n</ol>\n\n<p>And then in the C# executable for example simply call:</p>\n\n<pre><code>CLI_DLL cliDLL = new CLI_DLL;\ndouble a, b;\ncliDLL.usefulFunctionB&lt;double&gt;(a, b);\n</code></pre>\n\n<p>Is this doable? Or am I forced to simply instantiate overloads for every possible type of the function template?</p>\n\n<p>I've read C# has something called <strong>generics</strong>, could I use that technique to achieve something like this? So far, every article I've found refers either to class templates (not just methods within them) or suggests to do explicit instantiation in the CLI of the desired types, which is what I'd like to avoid if possible (suppose each function can be used by 1000 different types...I guess it wouldn't be so nice to replicate the 1000 different instantiations).</p>\n\n<p>I'm a completely newbie to C#, but AFAIU, passing arguments (in this case, a type) from a <strong>generic</strong> function to a <strong>template</strong> wouldn't be doable since the former are resolved at runtime while the latter is done at compile time, in which case I'd be forced to change the previous implementation to something like this:</p>\n\n<ul>\n<li><p>CLI DLL header file:</p>\n\n<pre><code>public ref class CLI_DLL\n{\n    /* Only define the template here */\n    template&lt;typename T&gt;\n    void usefulFunctionB(T &amp;b, T const &amp;a);\n\n    PureCPP *pureCppPtr;\n}\n</code></pre></li>\n<li><p>CLI DLL source file:</p>\n\n<pre><code>/* Explicitly instantiate the template in the source file */\ntemplate&lt;&gt;CLI_DLL::usefulFunctionB&lt;double&gt;(double &amp;A, double const &amp;B)\n{\n    pureCppPtr-&gt;usefulFunctionA&lt;double&gt;(b, a);\n}\n</code></pre></li>\n</ul>\n\n<p>on so on for every type I need. The other way (template to generic) seems to be possible though, right?</p>\n\n<p>(BTW, and as a side question, is it really necessary to explicit the type being called, \"double\" in this case? I've never really understood why in some cases, Visual Studio is not able to automatically deduct types from templates, as CLang or GCC are).</p>\n\n<p>Which is what I'd really, REALLY liked to avoid, and instead, I'd love to be able to do something like the first code I exposed.</p>\n\n<p>Thanks a lot in advance.</p>\n"}, {"tags": ["c++", "python-3.x", "ubuntu", "swig", "aruco"], "comments": [{"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1543064696, "post_id": 53415325, "comment_id": 93788526, "body": "It&#39;s a bug in whatever python module you&#39;re using."}, {"owner": {"reputation": 35, "user_id": 9853650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b40903ebde51912f57e4e56f0940179e?s=128&d=identicon&r=PG&f=1", "display_name": "hello_nezumi", "link": "https://stackoverflow.com/users/9853650/hello-nezumi"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1543236313, "post_id": 53415325, "comment_id": 93832328, "body": "@Flexo Thank you. I will try it in another version."}], "owner": {"reputation": 35, "user_id": 9853650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b40903ebde51912f57e4e56f0940179e?s=128&d=identicon&r=PG&f=1", "display_name": "hello_nezumi", "link": "https://stackoverflow.com/users/9853650/hello-nezumi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542814006, "creation_date": 1542814006, "question_id": 53415325, "link": "https://stackoverflow.com/questions/53415325/cvexception-swig-error-or-aruco-error", "title": "cv::Exception * swig error? or aruco error?", "body": "<p>I'm implementing this<a href=\"https://github.com/lvsn/deeptracking\" rel=\"nofollow noreferrer\">[URL]</a></p>\n\n<p>The following error occurs when the test sensor is run.</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"test_sensor.py\", line 96, in &lt;module&gt;\n    detector = ArucoDetector(sensor.camera, data[\"detector_layout_path\"])\n  File \"/home/toshi/deeptracking/deeptracking/detector/detector_aruco.py\", line 12, in __init__\n    boardconfig = aruco.BoardConfiguration(board_path)\n  File \"/usr/local/lib/python3.5/dist-packages/aruco.py\", line 692, in __init__\n    this = _aruco.new_BoardConfiguration(*args)\nRuntimeError: &lt;Swig Object of type 'cv::Exception *' at 0x7f3489679c30&gt;\nswig/python detected a memory leak of type 'cv::Exception *', no destructor found.\n</code></pre>\n\n<p>I am aware of aruco's swig error.\nBut I don't understand the meaning of this error.\nI can run the python-aruco module[<a href=\"https://github.com/fehlfarbe/python-aruco/tree/dbc29c5cdf98467cb987c565c62402f05066bb2b\" rel=\"nofollow noreferrer\">URL</a>]itself, which is used here.\nWhat is the problem?</p>\n\n<p><strong>environment</strong></p>\n\n<ul>\n<li>ubuntu16.04</li>\n<li>python3.5</li>\n<li>aruco1.3.0</li>\n</ul>\n"}, {"tags": ["c++", "cmake", "clion", "lib"], "comments": [{"owner": {"reputation": 620, "user_id": 6520107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a47f891c7c0e86ff5a885881233feca1?s=128&d=identicon&r=PG&f=1", "display_name": "Siliace", "link": "https://stackoverflow.com/users/6520107/siliace"}, "edited": false, "score": 1, "creation_date": 1542814434, "post_id": 53415309, "comment_id": 93705318, "body": "I&#39;m not 100% sure but I don&#39;t think you can link a library built with MSC in a MinGW build. I think you should configure CLion to use MSC instead of MinGW or rebuild the lib using MinGW"}, {"owner": {"reputation": 73, "user_id": 8856782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7f4977fa843a0b56101e6ec8b148c7a?s=128&d=identicon&r=PG&f=1", "display_name": "getek mer", "link": "https://stackoverflow.com/users/8856782/getek-mer"}, "reply_to_user": {"reputation": 620, "user_id": 6520107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a47f891c7c0e86ff5a885881233feca1?s=128&d=identicon&r=PG&f=1", "display_name": "Siliace", "link": "https://stackoverflow.com/users/6520107/siliace"}, "edited": false, "score": 0, "creation_date": 1542814795, "post_id": 53415309, "comment_id": 93705553, "body": "how to use MinGW compiler in vc 2017"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1542814916, "post_id": 53415309, "comment_id": 93705626, "body": "mingw uses .a library files, not .lib from VS. Use VS or make CLion use VS compielrs."}, {"owner": {"reputation": 73, "user_id": 8856782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7f4977fa843a0b56101e6ec8b148c7a?s=128&d=identicon&r=PG&f=1", "display_name": "getek mer", "link": "https://stackoverflow.com/users/8856782/getek-mer"}, "edited": false, "score": 0, "creation_date": 1542815663, "post_id": 53415309, "comment_id": 93706094, "body": "Its working. Thanks . I changed to vs compiler."}], "owner": {"reputation": 73, "user_id": 8856782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7f4977fa843a0b56101e6ec8b148c7a?s=128&d=identicon&r=PG&f=1", "display_name": "getek mer", "link": "https://stackoverflow.com/users/8856782/getek-mer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542813978, "creation_date": 1542813978, "question_id": 53415309, "link": "https://stackoverflow.com/questions/53415309/is-clion-doesnt-support-lib-filegenerated-by-visual-studio", "title": "Is CLion doesn&#39;t support .lib file(generated by visual studio)", "body": "<p>I am new to clion and cmake. I just created a simple static library project in vc 2017 and i copied the .lib file to lib folder inside the clion project (also copied the .h file in vc to include dir inside the clion project)</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.12)\nproject(ex_lib)\n\nset(CMAKE_CXX_STANDARD 14)\n\nset(PROJECT_LINK_LIBS created_lib.lib)\n\nlink_directories(lib)\n\ninclude_directories(include)\n\nadd_executable(ex_lib main.cpp)\ntarget_link_libraries(ex_lib ${PROJECT_LINK_LIBS})\n</code></pre>\n\n<p>but it gives me an following error </p>\n\n<pre><code>[ 50%] Building CXX object CMakeFiles/ex_lib.dir/main.cpp.obj\n[100%] Linking CXX executable ex_lib.exe\nc:/mingw/bin/../lib/gcc/mingw32/6.3.0/../../../../mingw32/bin/ld.exe: cannot find -lcreated_lib\ncollect2.exe: error: ld returned 1 exit status\nCMakeFiles\\ex_lib.dir\\build.make:85: recipe for target 'ex_lib.exe' failed\nCMakeFiles\\Makefile2:71: recipe for target 'CMakeFiles/ex_lib.dir/all' failed\nCMakeFiles\\Makefile2:83: recipe for target 'CMakeFiles/ex_lib.dir/rule' failed\nMakefile:117: recipe for target 'ex_lib' failed\nmingw32-make.exe[3]: *** [ex_lib.exe] Error 1\nmingw32-make.exe[2]: *** [CMakeFiles/ex_lib.dir/all] Error 2\nmingw32-make.exe[1]: *** [CMakeFiles/ex_lib.dir/rule] Error 2\nmingw32-make.exe: *** [ex_lib] Error 2\n</code></pre>\n\n<p>May be i have done something wrong with cmake. or vc makes lib file using vc++ that doesn't supported in clion. </p>\n"}, {"tags": ["c++", "lambda", "language-lawyer", "c++17"], "comments": [{"owner": {"reputation": 868, "user_id": 4051512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8bd3beb8e3334400c9d43118b2206a62?s=128&d=identicon&r=PG&f=1", "display_name": "papagaga", "link": "https://stackoverflow.com/users/4051512/papagaga"}, "edited": false, "score": 2, "creation_date": 1542813968, "post_id": 53415281, "comment_id": 93705037, "body": "possible duplicate: <a href=\"https://stackoverflow.com/questions/43827651/can-a-lambda-capturing-nothing-access-global-variables\" title=\"can a lambda capturing nothing access global variables\">stackoverflow.com/questions/43827651/&hellip;</a>"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 868, "user_id": 4051512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8bd3beb8e3334400c9d43118b2206a62?s=128&d=identicon&r=PG&f=1", "display_name": "papagaga", "link": "https://stackoverflow.com/users/4051512/papagaga"}, "edited": false, "score": 0, "creation_date": 1542813989, "post_id": 53415281, "comment_id": 93705049, "body": "@papagaga: No, no, no.  This is about const automatics."}, {"owner": {"reputation": 868, "user_id": 4051512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8bd3beb8e3334400c9d43118b2206a62?s=128&d=identicon&r=PG&f=1", "display_name": "papagaga", "link": "https://stackoverflow.com/users/4051512/papagaga"}, "edited": false, "score": 0, "creation_date": 1542813990, "post_id": 53415281, "comment_id": 93705050, "body": "global variables are in scope without capture"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1542813992, "post_id": 53415281, "comment_id": 93705051, "body": "I get source&gt;: In lambda function:  &lt;source&gt;:9:9: error: &#39;os&#39; is not captured           os &lt;&lt; &quot;what\\n&quot;;           ^~ (godbolt gcc 7.2 C++17)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 868, "user_id": 4051512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8bd3beb8e3334400c9d43118b2206a62?s=128&d=identicon&r=PG&f=1", "display_name": "papagaga", "link": "https://stackoverflow.com/users/4051512/papagaga"}, "edited": false, "score": 1, "creation_date": 1542814006, "post_id": 53415281, "comment_id": 93705059, "body": "@papagaga <code>os</code> is not global. Although the thing it refers to is. ..... ah."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 4, "creation_date": 1542814064, "post_id": 53415281, "comment_id": 93705094, "body": "Oddly works with gcc 8.2..."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1542814081, "post_id": 53415281, "comment_id": 93705107, "body": "<a href=\"https://stackoverflow.com/q/47592474/560648\">I&#39;ve tripped up on this before</a>. Except here the behaviour seems to be the inverse."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1542814100, "post_id": 53415281, "comment_id": 93705115, "body": "msvc 19.14 <a href=\"https://godbolt.org/z/wlyO1r\" rel=\"nofollow noreferrer\">rejects it</a>"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1542814161, "post_id": 53415281, "comment_id": 93705147, "body": "clang also accepts this, so it&#39;s basically inference that makes it work?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 8, "creation_date": 1542814220, "post_id": 53415281, "comment_id": 93705180, "body": "Interesting. This looks like an optimization bug, where the compiler &quot;sees through&quot; the reference before ensuring that the reference itself is okay to use."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1542814291, "post_id": 53415281, "comment_id": 93705231, "body": "yes, so moving the lambda away in a function makes it fail, so it&#39;s inference (perhaps not optimization?)"}, {"owner": {"reputation": 868, "user_id": 4051512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8bd3beb8e3334400c9d43118b2206a62?s=128&d=identicon&r=PG&f=1", "display_name": "papagaga", "link": "https://stackoverflow.com/users/4051512/papagaga"}, "edited": false, "score": 0, "creation_date": 1542814344, "post_id": 53415281, "comment_id": 93705256, "body": "no need to capture if it &quot;is a non-local variable or has <b>static</b> or thread local storage duration&quot;. Could it be that?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 868, "user_id": 4051512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8bd3beb8e3334400c9d43118b2206a62?s=128&d=identicon&r=PG&f=1", "display_name": "papagaga", "link": "https://stackoverflow.com/users/4051512/papagaga"}, "edited": false, "score": 0, "creation_date": 1542814433, "post_id": 53415281, "comment_id": 93705317, "body": "@papagaga Guess it depends whether we consider <code>os</code> to be a local variable with automatic storage duration, or equivalent to its referent. Though as noted above results seem to vary. (I&#39;m going to have to capture <code>[&amp;]</code> to avoid the warning and get a good build in all cases, I think.)"}, {"owner": {"reputation": 868, "user_id": 4051512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8bd3beb8e3334400c9d43118b2206a62?s=128&d=identicon&r=PG&f=1", "display_name": "papagaga", "link": "https://stackoverflow.com/users/4051512/papagaga"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1542815356, "post_id": 53415281, "comment_id": 93705889, "body": "@rustyx: it seems that references must be captured independently when they don&#39;t refer to a global object. For instance: <code>#include &lt;iostream&gt;  int main() {     int i = 5;     auto&amp; os = i;      auto write = [&amp;i]()     {         std::cout &lt;&lt; os;     };      write(); }</code> will trigger"}, {"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 2, "creation_date": 1542815627, "post_id": 53415281, "comment_id": 93706073, "body": "@rustyx : Indeed they are not variables, but lambdas do not capture variables, they capture <i>entities</i>, and all of values, objects, and references constitute entities ([basic]/3)."}, {"owner": {"reputation": 10521, "user_id": 1316462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de3149d5f602449f41083ca17a5ceab?s=128&d=identicon&r=PG&f=1", "display_name": "Jans", "link": "https://stackoverflow.com/users/1316462/jans"}, "edited": false, "score": 6, "creation_date": 1542815777, "post_id": 53415281, "comment_id": 93706175, "body": "There&#39;s a <a href=\"https://bugs.llvm.org/show_bug.cgi?id=34865\" rel=\"nofollow noreferrer\">defect report</a> opened covering that case and it seem not restricted for <code>std::cout</code>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 10521, "user_id": 1316462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de3149d5f602449f41083ca17a5ceab?s=128&d=identicon&r=PG&f=1", "display_name": "Jans", "link": "https://stackoverflow.com/users/1316462/jans"}, "edited": false, "score": 3, "creation_date": 1542816440, "post_id": 53415281, "comment_id": 93706579, "body": "@Jans and that is worthy of an answer!"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1542834574, "post_id": 53415281, "comment_id": 93715315, "body": "IMO the code should be allowed:  <code>int &amp;r = n;</code> indicates that <code>r</code> and <code>n</code> are two names for the same variable. There shouldn&#39;t be any case where the expression <code>r</code> behaves differently to the expression <code>n</code>. The lambda can use <code>n</code> without capture so it should be able to use <code>r</code> too."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1542820893, "post_id": 53416206, "comment_id": 93709212, "body": "That&#39;s the badger! Thanks Jans."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1542868427, "post_id": 53416206, "comment_id": 93724349, "body": "Are you implying that clang is wrong to accept the code?"}, {"owner": {"reputation": 10521, "user_id": 1316462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de3149d5f602449f41083ca17a5ceab?s=128&d=identicon&r=PG&f=1", "display_name": "Jans", "link": "https://stackoverflow.com/users/1316462/jans"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1542898271, "post_id": 53416206, "comment_id": 93740648, "body": "@Rakete1111 No, As Richard said in the report, when the reference variable is found to refer to constant expression, the referenced variable is used instead of the reference variable itself, the issue was reopened by diagnosis location not because they were wrong about the reference."}], "tags": [], "owner": {"reputation": 10521, "user_id": 1316462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de3149d5f602449f41083ca17a5ceab?s=128&d=identicon&r=PG&f=1", "display_name": "Jans", "link": "https://stackoverflow.com/users/1316462/jans"}, "is_accepted": true, "score": 23, "last_activity_date": 1543376178, "last_edit_date": 1543376178, "creation_date": 1542816758, "answer_id": 53416206, "question_id": 53415281, "link": "https://stackoverflow.com/questions/53415281/local-reference-to-stdcout-captured-by-lambda-without-asking-for-it/53416206#53416206", "title": "Local reference to std::cout captured by lambda without asking for it", "body": "<p>There's an open <a href=\"https://bugs.llvm.org/show_bug.cgi?id=34865\" rel=\"nofollow noreferrer\">clang report</a> that cover the case of implicit capture of references by lambda expressions, this is not limited to <code>std::cout</code> but to references variable that are found to refer to constant expressions.</p>\n\n<p>For more reference, the backing defect report on the CWG is <a href=\"http://open-std.org/JTC1/SC22/WG21/docs/cwg_defects.html#1472\" rel=\"nofollow noreferrer\">CWG-1472</a></p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Based on @Rakete1111 comment, I should have pointed out explicitly that clang is right in accepting the code,\nwhich is the result of applying the CWG defect mentioned above. The report was reopened because of\ndiagnosis location not because they were wrong about the acceptance</p>\n"}], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 698, "favorite_count": 1, "accepted_answer_id": 53416206, "answer_count": 1, "score": 33, "last_activity_date": 1543376178, "creation_date": 1542813879, "last_edit_date": 1542827449, "question_id": 53415281, "link": "https://stackoverflow.com/questions/53415281/local-reference-to-stdcout-captured-by-lambda-without-asking-for-it", "title": "Local reference to std::cout captured by lambda without asking for it", "body": "<p>Have I lost my mind? Was this always permitted?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    auto&amp; os = std::cout;\n\n    auto write = []()\n    {\n        os &lt;&lt; \"what\\n\";\n    };\n\n    write();\n}\n</code></pre>\n\n<p>I'm using:</p>\n\n<blockquote>\n  <p>Apple LLVM version 10.0.0 (clang-1000.10.44.4)<br>\n  Target: x86_64-apple-darwin17.7.0</p>\n</blockquote>\n\n<p>Though also see on Coliru:</p>\n\n<h3>(<a href=\"http://coliru.stacked-crooked.com/a/12df10ed23d6aa44\" rel=\"noreferrer\">live demo</a>)</h3>\n\n<p>I always thought an empty capture would not capture anything.</p>\n\n<p>Indeed, MSDN <a href=\"https://msdn.microsoft.com/en-us/library/dd293608.aspx\" rel=\"noreferrer\">says</a>:</p>\n\n<blockquote>\n  <p>An empty capture clause, [ ], indicates that the body of the lambda expression accesses no variables in the enclosing scope.</p>\n</blockquote>\n\n<p>Further research suggests that this is in fact okay for capturing <code>const</code> things (which I also didn't know, but whatever), but <code>os</code> is not <code>const</code> (no reference is! though it <em>is</em> immutable&hellip;).</p>\n\n<p>I came across this when turning on <code>-Wextra</code> and noticing that Clang thought a <code>&amp;os</code> capture (which is present in my real code) was unnecessary. Removing it I was staggered to find the build worked.</p>\n"}, {"tags": ["java", "c++", "java-native-interface", "swig"], "comments": [{"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1543065358, "post_id": 53415186, "comment_id": 93788683, "body": "Isn&#39;t <code>java.io.File</code> a better match for a <code>boost::filesystem::path</code>?"}, {"owner": {"reputation": 6673, "user_id": 287592, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ivBC8.png?s=128&g=1", "display_name": "Matthew Hoggan", "link": "https://stackoverflow.com/users/287592/matthew-hoggan"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1543102306, "post_id": 53415186, "comment_id": 93797908, "body": "@Flexo probably is. Not sold on either one. I know you can use the ctor to contruct a File but not a path."}], "answers": [{"comments": [{"owner": {"reputation": 6673, "user_id": 287592, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ivBC8.png?s=128&g=1", "display_name": "Matthew Hoggan", "link": "https://stackoverflow.com/users/287592/matthew-hoggan"}, "edited": false, "score": 0, "creation_date": 1543242373, "post_id": 53458732, "comment_id": 93836125, "body": "I can run with the example and view the output to see what impacts what. Your insight is extremely useful. If I could upvote it more I would."}], "tags": [], "owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "is_accepted": true, "score": 1, "last_activity_date": 1543066883, "creation_date": 1543066883, "answer_id": 53458732, "question_id": 53415186, "link": "https://stackoverflow.com/questions/53415186/swig-java-nio-file-path-boostfilesystempath/53458732#53458732", "title": "Swig java.nio.file.Path &lt;--&gt; boost::filesystem::path", "body": "<p>In your example the typemaps weren't getting applied because of a mismatch on 'constness'. (Your function takes <code>const boost::filesystem::path &amp;path</code>, but your typemaps are for <code>boost::filesystem::path &amp;</code>, so can't be applied).</p>\n\n<p>I think the simplest way to make this work is to pass the path as a string across the language boundaries. You can do that with the following typemaps, which on the Java side call <code>toString()</code> on the path, and on the C++ side pass that into a constructor for the boost path object:</p>\n\n<pre><code>%module test\n\n%{\n#include &lt;boost/filesystem/path.hpp&gt;\n#include &lt;iostream&gt;\n%}\n\n%typemap(jni) const boost::filesystem::path&amp; \"jstring\"\n%typemap(jstype) const boost::filesystem::path&amp; \"java.nio.file.Path\"\n%typemap(jtype) const boost::filesystem::path&amp; \"String\"\n%typemap(javain) const boost::filesystem::path&amp; \"$javainput.toString()\"\n%typemap(in) const boost::filesystem::path&amp; (boost::filesystem::path tmp) {\n    const char *str = JCALL2(GetStringUTFChars, jenv, $input, 0);\n    tmp = str;\n    $1 = &amp;tmp;\n    JCALL2(ReleaseStringUTFChars, jenv, $input, str);\n}\n\n%inline %{\n    void test(const boost::filesystem::path&amp; p) {\n        std::cout &lt;&lt; p &lt;&lt; std::endl;\n    }\n%}\n</code></pre>\n\n<p>Doing it like this saves more JNI calls inside the <code>in</code> typemap, which would inevitably have ended up calling several functions to get a string representation in the end anyway.</p>\n\n<p>(This compiles, but I've not run it).</p>\n"}], "owner": {"reputation": 6673, "user_id": 287592, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ivBC8.png?s=128&g=1", "display_name": "Matthew Hoggan", "link": "https://stackoverflow.com/users/287592/matthew-hoggan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 53458732, "answer_count": 1, "score": 2, "last_activity_date": 1543066883, "creation_date": 1542813508, "question_id": 53415186, "link": "https://stackoverflow.com/questions/53415186/swig-java-nio-file-path-boostfilesystempath", "title": "Swig java.nio.file.Path &lt;--&gt; boost::filesystem::path", "body": "<p>I am new to swig and have read through the documentation but am still struggling.</p>\n\n<p>In my library header I have the following class:</p>\n\n<pre><code>class Facade\n{\npublic:\n  static bool Init(const boost::filesystem::path &amp;path);\n};\n</code></pre>\n\n<p>I am trying to get it so that users can pass a <code>java.nio.file.Path</code> from the java code through the JNI layer created by swig. Here is my swig definition file:</p>\n\n<pre><code>%module FacadeInterface\n%{\n#include \"Facade.h\"\n#include &lt;boost/filesystem/path.hpp&gt;\n%}\n%pragma(java) jniclassimports=%{\nimport java.nio.file.Path;\n%}\n%pragma(java) moduleimports=%{\nimport java.nio.file.Path;\n%}\n%typemap(jstype) boost::filesystem::path &amp; \"java.nio.file.Path\"\n%typemap(jstype) boost::filesystem::path \"java.nio.file.Path\"\n%typemap(jtype) boost::filesystem::path &amp; \"java.nio.file.Path\"\n%typemap(jtype) boost::filesystem::path \"java.nio.file.Path\"\n%typemap(jni) boost::filesystem::path &amp; \"jobject\"\n%typemap(jni) boost::filesystem::path \"jobject\"\n%typemap(in) boost::filesystem::path {...}\n%typemap(in) boost::filesystem::path &amp; {...}\n%typemap(out) boost::filesystem::path {...}\n%typemap(out) boost::filesystem::path &amp; {...}\n%include \"Facade.h\"\n</code></pre>\n\n<p>This only partially works in that the java code builds an interface that takes a <code>java.nio.file.Path</code> but then tries to convert it to a <code>SWIGTYPE_p_boost__filesystem__path</code>. For example generated code appears as.</p>\n\n<pre><code>public class Facade {\n    ...\n    public static boolean Init(java.nio.file.Path path) {\n        return FacadeInterfaceJNI.Facade_Init(\n            SWIGTYPE_p_boost__filesystem__path.getCPtr(path));\n    }\n    ...\n  }\n</code></pre>\n\n<p>What do I need to do to get the <code>java.nio.file.Path</code> convertible to a <code>boost::filesystem::path</code>.</p>\n\n<p>My java compiler errors are as follows:</p>\n\n<pre><code>/root/build/src/main/com/Facade.java:39: error: incompatible types: Path cannot be converted to SWIGTYPE_p_boost__filesystem__path\n    return FacadeInterfaceJNI.Facade_Init(SWIGTYPE_p_boost__filesystem__path.getCPtr(modelPath));\n</code></pre>\n"}, {"tags": ["c++", "c++11", "enums", "namespaces"], "answers": [{"comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1542828109, "post_id": 53418838, "comment_id": 93712492, "body": "What I&#39;m looking for is the ability to avoid the <code>something::</code> prefix."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 0, "last_activity_date": 1542828770, "last_edit_date": 1542828770, "creation_date": 1542826535, "answer_id": 53418838, "question_id": 53415177, "link": "https://stackoverflow.com/questions/53415177/is-there-a-way-to-specify-an-enum-class-value-without-having-to-type-out-its-sco/53418838#53418838", "title": "Is there a way to specify an enum-class value without having to type out its scope every time?", "body": "<p>Do this change:</p>\n\n<pre><code>enum class result {\n  ERROR_BAD_PARAMETER = -3,\n  ERROR_FILE_NOT_FOUND = -2,\n  ERROR_GENERAL = -1,\n  SUCCESS = 0\n};\n</code></pre>\n\n<p>because your enumerated values are in a scope, you no longer have to give them as long a name.</p>\n\n<p>Now your code becomes:</p>\n\n<pre><code>if (MyFunc() != result::SUCCESS) printf(\"Error!\\n\");\n</code></pre>\n\n<p>which is a whole 1 character longer than before.</p>\n\n<p>You could also</p>\n\n<pre><code>using my_status_t = result;\n</code></pre>\n\n<p>if you are tied to <code>my_status_t</code> as a type name.</p>\n\n<hr>\n\n<p>As of C++17 there is no way to cleanly avoid the <code>result::</code> prefix.  There is talk about <code>using ERROR_BAD_PARAMETER = result::ERROR_BAD_PARAMETER;</code> or the like in later versions of C++, but I'm unaware if they are going to get into <a href=\"/questions/tagged/c%2b%2b20\" class=\"post-tag\" title=\"show questions tagged &#39;c++20&#39;\" rel=\"tag\">c++20</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "is_accepted": false, "score": 0, "last_activity_date": 1542830331, "creation_date": 1542830331, "answer_id": 53419652, "question_id": 53415177, "link": "https://stackoverflow.com/questions/53415177/is-there-a-way-to-specify-an-enum-class-value-without-having-to-type-out-its-sco/53419652#53419652", "title": "Is there a way to specify an enum-class value without having to type out its scope every time?", "body": "<p>Here's a way:</p>\n\n<pre><code>enum class my_status_t { };\n\ninline constexpr my_status_t RESULT_ERROR_BAD_PARAMETER = my_status_t(-3);\n// add other enum values here\n</code></pre>\n\n<p>Unfortunately, this way you lose some good properties of <code>enum</code>. Like compiler can warn you if you don't handle a value in a switch (and don't forget to set the underlying type of <code>enum class</code>, if you have big values).</p>\n\n<p>So I actually don't recommend this way (I better like Yakk's solution), but maybe this answer can help you anyway...</p>\n"}, {"tags": [], "owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "is_accepted": true, "score": 1, "last_activity_date": 1542832563, "last_edit_date": 1542832563, "creation_date": 1542831792, "answer_id": 53419952, "question_id": 53415177, "link": "https://stackoverflow.com/questions/53415177/is-there-a-way-to-specify-an-enum-class-value-without-having-to-type-out-its-sco/53419952#53419952", "title": "Is there a way to specify an enum-class value without having to type out its scope every time?", "body": "<p>If you going to be typing a lot more of the nuisance scope-prefixes than there\nare constants in the <code>enum class</code>, then it may be worth your while to go with this\nway:</p>\n\n<pre><code>enum class result {\n   ERROR_BAD_PARAMETER = -3,\n   ERROR_FILE_NOT_FOUND = -2,\n   ERROR_GENERAL = -1,\n   SUCCESS = 0\n};\n\nconstexpr result RESULT_ERROR_BAD_PARAMETER = result::ERROR_BAD_PARAMETER;\nconstexpr result RESULT_FILE_NOT_FOUND = result::ERROR_FILE_NOT_FOUND;\nconstexpr result RESULT_ERROR_GENERAL = result::ERROR_GENERAL;\nconstexpr result RESULT_SUCCESS = result::SUCCESS;\n\nresult foo() {\n    return RESULT_SUCCESS;\n}\n\nint main()\n{\n    switch (foo())\n    {\n        case RESULT_SUCCESS:\n            ;\n    }\n    // ^ warning: enumeration value \u2018...\u2019 not handled in ...\n\n    if (foo() == RESULT_SUCCESS) {\n        return 0;\n    }\n\n    /* error: no match for \u2018operator==\u2019\n    if (foo() == false) {\n        return -1;\n    }\n    */\n}\n</code></pre>\n\n<p>(g++ -Wall -Wextra -pedantic -std=c++11)</p>\n"}], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 53419952, "answer_count": 3, "score": 1, "last_activity_date": 1542832563, "creation_date": 1542813497, "last_edit_date": 1542826406, "question_id": 53415177, "link": "https://stackoverflow.com/questions/53415177/is-there-a-way-to-specify-an-enum-class-value-without-having-to-type-out-its-sco", "title": "Is there a way to specify an enum-class value without having to type out its scope every time?", "body": "<p>I have some functions that can return either success or one of a fixed set of error codes.  To identify the error codes, I had (something like) this old-school C-style enum declared:</p>\n\n<pre><code>enum {\n   RESULT_ERROR_BAD_PARAMETER = -3,\n   RESULT_ERROR_FILE_NOT_FOUND = -2,\n   RESULT_ERROR_GENERAL = -1,\n   RESULT_SUCCESS = 0\n};\ntypedef int my_status_t;\n\nmy_status_t MyFunc();   // returns a RESULT_* value\n</code></pre>\n\n<p>This worked pretty well; the calling pattern would be something like:</p>\n\n<pre><code>if (MyFunc() != RESULT_SUCCESS) printf(\"Error!\\n\");\n</code></pre>\n\n<p>... however it was uncomfortably permissive about allowing implicit conversions of <code>my_status_t</code> values to int/bool/etc, allowing careless mistakes like this:</p>\n\n<pre><code>// Compiles but does the wrong thing at run-time -- bad!\nif (MyFunc() == false) printf(\"Error!\\n\");\n</code></pre>\n\n<p>... so in my new code revision, I converted it to be an <code>enum class</code> instead:</p>\n\n<pre><code>enum class my_status_t {\n   RESULT_ERROR_BAD_PARAMETER = -3,\n   RESULT_ERROR_FILE_NOT_FOUND = -2,\n   RESULT_ERROR_GENERAL = -1,\n   RESULT_SUCCESS = 0\n};\n</code></pre>\n\n<p>... this works great from a compile-time checking perspective; now most unintentional type-promotions are caught by the compiler, forcing the programmer to go back and do it the right way.</p>\n\n<p>The only thing that bothers me is that the new syntax is tedious:  now I have to write something like:</p>\n\n<pre><code>if (MyFunc() != my_status_t::RESULT_SUCCESS) printf(\"Error!\\n\");\n</code></pre>\n\n<p>... at every call site -- having to type out <code>my_status_t::</code> each time is tedious and makes the code harder to read, without really adding much value (since <code>RESULT_SUCCESS</code> is sufficiently unique for my purposes on its own, anyway)</p>\n\n<p>My question is, is there some kind of <code>using namespace my_status_t;</code> style directive I could use to tell the compiler to export the enum-values out of their <code>my_status_t</code> namespace, so that I could reference them without having to type the <code>my_status_t::</code> prefix all the time?</p>\n"}, {"tags": ["c++", "constexpr"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1542813433, "post_id": 53415120, "comment_id": 93704733, "body": "What&#39;s the question? You saw that <code>acos</code>didn&#39;t work within a constexpr."}, {"owner": {"reputation": 868, "user_id": 4051512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8bd3beb8e3334400c9d43118b2206a62?s=128&d=identicon&r=PG&f=1", "display_name": "papagaga", "link": "https://stackoverflow.com/users/4051512/papagaga"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1542813688, "post_id": 53415120, "comment_id": 93704891, "body": "@MatthieuBrucher: <code>Pi_cnst</code> cannot be <code>constexpr</code> because of <code>acos</code> but <code>RAD2DEG_cnst</code> is <code>constexpr</code> although it relies on <code>Pi_cnst</code>. I believe the question is: how can it be declared as <code>constexpr</code> while performing un<code>constexpr</code>able operations, and what does it mean in practice about compile-time evaluation?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1542813807, "post_id": 53415120, "comment_id": 93704955, "body": "Oh, OK. I think constexpr doesn&#39;t always been a build time..."}, {"owner": {"reputation": 868, "user_id": 4051512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8bd3beb8e3334400c9d43118b2206a62?s=128&d=identicon&r=PG&f=1", "display_name": "papagaga", "link": "https://stackoverflow.com/users/4051512/papagaga"}, "edited": false, "score": 0, "creation_date": 1542813824, "post_id": 53415120, "comment_id": 93704974, "body": "I get an error for <code>RAD2DEG_cnst</code> with gcc9 though: &quot;In function &#39;constexpr double RAD2DEG_cnst(double)&#39;: error: the value of &#39;Pi_cnst&#39; is not usable in a constant expression&quot;"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1542813828, "post_id": 53415120, "comment_id": 93704975, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/14248235/when-does-a-constexpr-function-get-evaluated-at-compile-time\">When does a constexpr function get evaluated at compile time?</a>"}, {"owner": {"reputation": 7937, "user_id": 1866300, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/dab16abeddf6aa51bb13e7fe06d70b2c?s=128&d=identicon&r=PG", "display_name": "Serve Laurijssen", "link": "https://stackoverflow.com/users/1866300/serve-laurijssen"}, "edited": false, "score": 0, "creation_date": 1542814088, "post_id": 53415120, "comment_id": 93705109, "body": "acos is too complex a function to be able to make it constexpr so that&#39;s why you cant assign its result to a constexpr variable"}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 3, "last_activity_date": 1542813831, "creation_date": 1542813831, "answer_id": 53415269, "question_id": 53415120, "link": "https://stackoverflow.com/questions/53415120/constexpr-function-contains-a-const-will-it-ever-be-evaluated-at-compile-time/53415269#53415269", "title": "constexpr function contains a const - will it ever be evaluated at compile time?", "body": "<p>Your code is ill-formed, no diagnostic required.  In</p>\n\n<pre><code>constexpr double RAD2DEG_cnst(double rad) { return rad * 180.0 / Pi_cnst; }\n</code></pre>\n\n<p>There is no input which will ever make the function a <a href=\"https://timsong-cpp.github.io/cppwp/expr.const#def:expression,core_constant\" rel=\"nofollow noreferrer\">core constant expression</a> which is specified by <a href=\"https://timsong-cpp.github.io/cppwp/dcl.constexpr#5\" rel=\"nofollow noreferrer\">[dcl.constexpr]/5</a></p>\n\n<blockquote>\n  <p>For a constexpr function or constexpr constructor that is neither defaulted nor a template, if no argument values exist such that an invocation of the function or constructor could be an evaluated subexpression of a core constant expression, or, for a constructor, a constant initializer for some object ([basic.start.static]), the program is ill-formed, no diagnostic required.</p>\n</blockquote>\n"}], "owner": {"reputation": 65, "user_id": 8047069, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PFdy0.png?s=128&g=1", "display_name": "Ben Senior", "link": "https://stackoverflow.com/users/8047069/ben-senior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 1, "accepted_answer_id": 53415269, "answer_count": 1, "score": 1, "last_activity_date": 1542813831, "creation_date": 1542813341, "last_edit_date": 1542813717, "question_id": 53415120, "link": "https://stackoverflow.com/questions/53415120/constexpr-function-contains-a-const-will-it-ever-be-evaluated-at-compile-time", "title": "constexpr function contains a const - will it ever be evaluated at compile time?", "body": "<p>Please can someone clarify (I'm using Visual Studio 15.9.2):</p>\n\n<p>In the following code given that Pi_cnst is evaluated at run time (because defining Pi in this way requires a run time calculation), will RAD2DEG_cnst ever be evaluated at compile time or is the use of \"constexpr\" always reverting to \"const\" ?</p>\n\n<p>edit - add: If it is always reverting to const then should I expect a warning, or is it bad in some other way i.e. it seems odd to be able to so easily declare a constexpr for the body to be accepted but ALWAYS be such that it is never actually a constexpr. What have I missed?</p>\n\n<pre><code>constexpr double Pi_error = std::acos(-1.0); //error function call must have a constant value in a constant expression (does not compile)\nconst double Pi_cnst = std::acos(-1.0); //ok evaluated at run time\n\nconstexpr double Pi_expr = 3.1415926; //ok valid constexpr\n\nconstexpr double RAD2DEG_cnst(double rad) { return rad * 180.0 / Pi_cnst; } //no error or warning BUT is this ever evaluated at compile time?\nconstexpr double RAD2DEG_expr(double rad) { return rad * 180.0 / Pi_expr; } //ok can be evaluated at compile time\n\nconst double result1 = RAD2DEG_cnst(0.1); //evaluated at run time?\nconst double result2 = RAD2DEG_expr(0.2); //evaluated at compile time?\n\ndouble myVariable = 0.3;\nconst double result3 = RAD2DEG_expr(myVariable); //ok - but can only be evaluated at run time\n\nconst double myOtherVariable = 0.4;\nconst double result4 = RAD2DEG_expr(myOtherVariable); //ok - evaluated at compile time because parameter is CONST?\n</code></pre>\n\n<p>I found also <a href=\"https://stackoverflow.com/questions/50077600/constexpr-function-and-its-parameter\">constexpr function and its parameter</a> and <a href=\"https://stackoverflow.com/questions/36405541/constexpr-vs-const-vs-constexpr-const\">constexpr vs const vs constexpr const</a> .</p>\n"}, {"tags": ["c++", "apache-spark"], "answers": [{"tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": true, "score": 0, "last_activity_date": 1542813325, "creation_date": 1542813325, "answer_id": 53415114, "question_id": 53415070, "link": "https://stackoverflow.com/questions/53415070/running-c-on-spark/53415114#53415114", "title": "Running c++ on spark", "body": "<p>If your program uses streams, then change the way it behaves.</p>\n\n<p>Instead of opening an <code>ifstream</code> for a file when it's on the command line, pass in <code>stdin</code> to your functions. Same for the output stream.</p>\n"}], "owner": {"reputation": 13, "user_id": 10662777, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IFznXH6szZs/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ie90Utrv77zk9i60a2RueR4z2iRQ/mo/photo.jpg?sz=128", "display_name": "MD K", "link": "https://stackoverflow.com/users/10662777/md-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 886, "favorite_count": 0, "accepted_answer_id": 53415114, "answer_count": 1, "score": 0, "last_activity_date": 1542813325, "creation_date": 1542813189, "question_id": 53415070, "link": "https://stackoverflow.com/questions/53415070/running-c-on-spark", "title": "Running c++ on spark", "body": "<p>I intend to run a c++ program on spark using rdd.pipe() operator in order to  see the possible benefits of the program running in parallel.</p>\n\n<p>In terminal i run it like this: </p>\n\n<pre><code>./program program_mode -t input -i output\n</code></pre>\n\n<p>In spark driver i've attempted:</p>\n\n<pre><code>mapDataset.pipe(s\"/path/to/program program_mode -t $mapDataset -i /path/to/output\"\n</code></pre>\n\n<p>where mapDataset is the input rdd (type .fasta file) that i have successfully loaded in spark driver,but this doesnt work.\nThe general problem is that the program expects to have its input through the flags but in spark the input is in the rdd that i've created on which pipe is called.</p>\n\n<p>Any idea on how i can implement this communication correctly?</p>\n"}, {"tags": ["c++", "whitespace"], "comments": [{"owner": {"reputation": 10904, "user_id": 3499115, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c593739208b1ddfe3eaae322ceecf5ce?s=128&d=identicon&r=PG", "display_name": "JBaczuk", "link": "https://stackoverflow.com/users/3499115/jbaczuk"}, "edited": false, "score": 0, "creation_date": 1542811235, "post_id": 53414459, "comment_id": 93703336, "body": "Where is the definition of <code>isspace</code>?"}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 3, "creation_date": 1542811262, "post_id": 53414459, "comment_id": 93703359, "body": "Why do you add 1 to <code>sketchyBois.length()</code>?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1542811265, "post_id": 53414459, "comment_id": 93703363, "body": "One problem is that your loop over <code>sketchyBois</code> goes out of bounds of the string."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1542811330, "post_id": 53414459, "comment_id": 93703407, "body": "Please read about <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. If all the <code>24</code> letters are not necessary to reproduce the problem you should remove it from the code"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1542811331, "post_id": 53414459, "comment_id": 93703409, "body": "On an unrelated note, why don&#39;t have <code>++x</code> in the <code>for</code> loop statement itself? Like <code>for (int x = 0; x &lt; sketchyBois.length(); ++x)</code>?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 2, "creation_date": 1542811383, "post_id": 53414459, "comment_id": 93703430, "body": "<code>if (isspace(reet) == true)</code> -&gt; <code>if (isspace(reet))</code> (<code>isspace</code> only returns a non-zero <code>int</code> value, not specifically <code>true</code>)"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1542811390, "post_id": 53414459, "comment_id": 93703438, "body": "@user463035818 Without an MCVE we don&#39;t know if that&#39;s it."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1542811547, "post_id": 53414459, "comment_id": 93703519, "body": "@user463035818 Sorry should have been more clear, my comment was about the <code>isspace</code> link."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1542811597, "post_id": 53414459, "comment_id": 93703548, "body": "@Someprogrammerdude ah ok, completely agree, my mistake to jump in trying to answer what I was in fact not able to know"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1542811668, "post_id": 53414459, "comment_id": 93703588, "body": "You don&#39;t really need to <code>break</code> after a <code>return</code>."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1542812071, "post_id": 53414459, "comment_id": 93703850, "body": "The place to start when a function isn&#39;t behaving the way you expect it to is with the <a href=\"https://en.cppreference.com/w/cpp/string/byte/isspace\" rel=\"nofollow noreferrer\">documentation</a>. Even better: read the documentation before you write code."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1542811744, "post_id": 53414538, "comment_id": 93703637, "body": "Another fun trick: <code>if (!!isspace(reet) == true)</code> will also work as <code>!!</code> forces the conversion from a numerical value to a boolean value. (Don&#39;t actually do this though)"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1542811810, "post_id": 53414538, "comment_id": 93703675, "body": "@NathanOliver: yes - a great way to befuddle your colleagues who have never seen the &quot;bang bang operator&quot; before too! ;-)"}, {"owner": {"reputation": 12418, "user_id": 214296, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/268966bdb84008bef79268f0a45b533e?s=128&d=identicon&r=PG", "display_name": "Jim Fell", "link": "https://stackoverflow.com/users/214296/jim-fell"}, "edited": false, "score": 0, "creation_date": 1542811843, "post_id": 53414538, "comment_id": 93703697, "body": "In applications where it matters, evaluating against zero is generally more efficient."}, {"owner": {"reputation": 704, "user_id": 7595618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51cf59e6785bbd9f82f28e8cfc0f2935?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Borkland", "link": "https://stackoverflow.com/users/7595618/mike-borkland"}, "edited": false, "score": 0, "creation_date": 1542812231, "post_id": 53414538, "comment_id": 93703955, "body": "It&#39;s more than just a matter of coding style; it is flat-out wrong to directly compare to <code>true</code> or <code>false</code>. It shows a fundamental misunderstanding of how an <code>if</code> statement evaluates an expression."}, {"owner": {"reputation": 43, "user_id": 10642778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e035ac5bf5c98f776759d32b5b20917?s=128&d=identicon&r=PG&f=1", "display_name": "NipIsTrue", "link": "https://stackoverflow.com/users/10642778/nipistrue"}, "edited": false, "score": 0, "creation_date": 1542814454, "post_id": 53414538, "comment_id": 93705329, "body": "Paul R that didn&#39;t work. It still stops running after the space. For example the input I am a big boi returns just cQ."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 43, "user_id": 10642778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e035ac5bf5c98f776759d32b5b20917?s=128&d=identicon&r=PG&f=1", "display_name": "NipIsTrue", "link": "https://stackoverflow.com/users/10642778/nipistrue"}, "edited": false, "score": 0, "creation_date": 1542816267, "post_id": 53414538, "comment_id": 93706479, "body": "@NipIsTrue With that change,<code>enc(&quot;I am a big boi&quot;)</code> produces <code>IAZgcwIAZgIAdAcQcgIAdAeQcQ </code> (with a leading space). (<a href=\"http://coliru.stacked-crooked.com/a/9a4f4ec192217be8\" rel=\"nofollow noreferrer\">Example</a>.) The problem lies in how you&#39;re reading the input before passing it to <code>enc</code>."}, {"owner": {"reputation": 43, "user_id": 10642778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e035ac5bf5c98f776759d32b5b20917?s=128&d=identicon&r=PG&f=1", "display_name": "NipIsTrue", "link": "https://stackoverflow.com/users/10642778/nipistrue"}, "edited": false, "score": 0, "creation_date": 1542816453, "post_id": 53414538, "comment_id": 93706593, "body": "Ok. How do you think i can fix that."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1542818332, "post_id": 53414538, "comment_id": 93707800, "body": "Since you&#39;re now looking at a second problem outside the code you&#39;ve shown us you should post a new question with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that reproduces this new problem."}, {"owner": {"reputation": 43, "user_id": 10642778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e035ac5bf5c98f776759d32b5b20917?s=128&d=identicon&r=PG&f=1", "display_name": "NipIsTrue", "link": "https://stackoverflow.com/users/10642778/nipistrue"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1542905482, "post_id": 53414538, "comment_id": 93744437, "body": "@molbdnilo I am passing the input as a string, inputed by the user."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 43, "user_id": 10642778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e035ac5bf5c98f776759d32b5b20917?s=128&d=identicon&r=PG&f=1", "display_name": "NipIsTrue", "link": "https://stackoverflow.com/users/10642778/nipistrue"}, "edited": false, "score": 1, "creation_date": 1542906496, "post_id": 53414538, "comment_id": 93744959, "body": "@NipIsTrue I suspect that you&#39;re reading with <code>&gt;&gt;</code>, which reads word by word, separated by whitespace."}, {"owner": {"reputation": 43, "user_id": 10642778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e035ac5bf5c98f776759d32b5b20917?s=128&d=identicon&r=PG&f=1", "display_name": "NipIsTrue", "link": "https://stackoverflow.com/users/10642778/nipistrue"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1542932887, "post_id": 53414538, "comment_id": 93752287, "body": "@molbdnilo is there an alternate way to do it?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 43, "user_id": 10642778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e035ac5bf5c98f776759d32b5b20917?s=128&d=identicon&r=PG&f=1", "display_name": "NipIsTrue", "link": "https://stackoverflow.com/users/10642778/nipistrue"}, "edited": false, "score": 1, "creation_date": 1542958206, "post_id": 53414538, "comment_id": 93757475, "body": "@NipIsTrue You should use <code>getline</code>. And perhaps get one of <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">these</a>."}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": false, "score": 7, "last_activity_date": 1542811468, "creation_date": 1542811468, "answer_id": 53414538, "question_id": 53414459, "link": "https://stackoverflow.com/questions/53414459/why-doesnt-this-program-detect-that-there-is-a-whitespace/53414538#53414538", "title": "Why doesn&#39;t this program detect that there is a whitespace?", "body": "<p>You need to change</p>\n\n<pre><code>if (isspace(reet) == true)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if (isspace(reet)) \n</code></pre>\n\n<p>or </p>\n\n<pre><code>if (isspace(reet) != 0) \n</code></pre>\n\n<p>since <a href=\"https://linux.die.net/man/3/isspace\" rel=\"noreferrer\"><code>isspace</code> only returns a non-zero <code>int</code> value for a white space character</a>, not a <code>bool</code>.</p>\n\n<p>(Note that as a matter of coding style, it's generally preferred to omit comparison with <code>true</code> or <code>false</code> in boolean tests and just use <code>if (expr)</code> or <code>if (!expr)</code>.)</p>\n"}], "owner": {"reputation": 43, "user_id": 10642778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e035ac5bf5c98f776759d32b5b20917?s=128&d=identicon&r=PG&f=1", "display_name": "NipIsTrue", "link": "https://stackoverflow.com/users/10642778/nipistrue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1542811698, "creation_date": 1542811130, "last_edit_date": 1542811698, "question_id": 53414459, "link": "https://stackoverflow.com/questions/53414459/why-doesnt-this-program-detect-that-there-is-a-whitespace", "title": "Why doesn&#39;t this program detect that there is a whitespace?", "body": "<p>So I was working on this program again, and I encountered another problem. I am testing if a character is a space. However, instead of detecting that the there is a space, it stops the loop and doesn't do anything more. Here is my code:</p>\n\n<pre><code>string reet(char reet) {\nif (isspace(reet) == true) {\n    return \"IA\";\n}\nelse {\n    switch (reet) {\n    case 'a':\n        return \"Zg\";\n        break;\n    case'b':\n        return \"dA\";\n        break;\n    case 'c':\n        return \"dG\";\n        break;\n    case 'd':\n        return \"aw\";\n        break;\n    case 'e':\n        return \"bw\";\n        break;\n    case 'f':\n        return \"dQ\";\n        break;\n    case 'g':\n        return \"cg\";\n        break;\n    case 'h':\n        return \"ZA\";\n        break;\n    case 'i':\n        return \"cQ\";\n        break;\n    case 'j':\n        return \"YQ\";\n        break;\n    case 'k':\n        return \"eA\";\n        break;\n    case 'l':\n        return \"dw\";\n        break;\n    case 'm':\n        return \"cw\";\n        break;\n    case 'n':\n        return \"ag\";\n        break;\n    case 'o':\n        return \"eQ\";\n        break;\n    case 'p':\n        return \"bA\";\n        break;\n    case 'q':\n        return \"aA\";\n        break;\n    case 'r':\n        return \"ZQ\";\n        break;\n    case 's':\n        return \"cA\";\n        break;\n    case 't':\n        return \"Yw\";\n        break;\n    case 'u':\n        return \"eg\";\n        break;\n    case 'v':\n        return \"bg\";\n        break;\n    case 'w':\n        return \"aq\";\n        break;\n    case 'x':\n        return \"bQ\";\n        break;\n    case 'y':\n        return \"Yg\";\n        break;\n    case 'z':\n        return \"Zw\";\n        break;\n    default:\n        return \" \";\n        break;\n    }\n}\n}\n\nstring enc(string input) {\nstring sketchyBois = input;\nstring bigBoi = \"\";\nint yeetL = sketchyBois.length() + 1;\nfor (int x = 0; x &lt; yeetL;) {\n    bigBoi = bigBoi + reet(sketchyBois[x]);\n    x++;\n}\nreturn bigBoi;\n}\n</code></pre>\n\n<p>I was just wondering if anyone can tell me why it is doing this? Thank you!</p>\n"}, {"tags": ["c++", "c++11", "variadic-templates", "template-meta-programming", "boost-mpl"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1542812030, "post_id": 53414360, "comment_id": 93703829, "body": "You can do exactly the same before you call your functiuon."}], "answers": [{"tags": [], "owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "is_accepted": false, "score": 3, "last_activity_date": 1542814334, "creation_date": 1542814334, "answer_id": 53415439, "question_id": 53414360, "link": "https://stackoverflow.com/questions/53414360/how-to-expand-the-content-of-an-mplset-as-template-parameters-of-a-function-te/53415439#53415439", "title": "How to expand the content of an mpl::set as template parameters of a function template", "body": "<p>Essentially you want a lifting function that maps a <code>template&lt;class...&gt; class TT</code> with a <code>mpl::set&lt;Ts...&gt;</code> to <code>TT&lt;Ts...&gt;</code>.</p>\n\n<p>To do this generically, write a <code>lifter</code> with the help of Foldable:</p>\n\n<pre><code>template&lt;template&lt;class...&gt; class TT&gt;\nstruct lifter {\n    template&lt;class Foldable&gt;\n    struct apply {\n        template &lt;class Left, class Current&gt; struct one_stepper;\n        template&lt;class... Ts, class Current&gt;\n        struct one_stepper&lt;TT&lt;Ts...&gt;, Current&gt; {\n          using type = TT&lt;Ts..., Current&gt;;\n        };\n        using type = typename mpl::fold&lt;Foldable, TT&lt;&gt;,\n                  one_stepper&lt;mpl::_1, mpl::_2&gt;\n              &gt;::type;\n    };\n};\n</code></pre>\n\n<p>Then you can use lift mpl container in this way:</p>\n\n<pre><code>template&lt;class... Ts&gt; struct foo {};\nusing u = lifter&lt;foo&gt;::apply&lt;mpl::vector&lt;int, long&gt;&gt;::type;\nusing v = lifter&lt;foo&gt;::apply&lt;mpl::set&lt;int, long&gt;&gt;::type;\n</code></pre>\n\n<p>Then <code>u</code> is <code>foo&lt;int, long&gt;</code>, <code>v</code> is <code>foo&lt;int, long&gt;</code> or <code>foo&lt;long, int&gt;</code> depends on <code>mpl</code> implementation.</p>\n\n<p>With this tool, your task can be done by:</p>\n\n<pre><code>template&lt;class... Ts&gt;\nstruct doSomething_helper {\n    static void do_() { doSomething&lt;Ts...&gt;(); }\n};\n\nvoid doSomethingForAll()\n{\n    //pseudocode:\n    // doSomething&lt;expandTypesToTemplateParameters&lt;MyContainer::type&gt;&gt;();\n    lifter&lt;doSomething_helper&gt;::apply&lt;typename MyContainer::type&gt;::type::do_();\n}\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 7641429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e956348ab466fb35e3b584b855aa2722?s=128&d=identicon&r=PG&f=1", "display_name": "A. Schorr", "link": "https://stackoverflow.com/users/7641429/a-schorr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1542830011, "creation_date": 1542810750, "last_edit_date": 1542812602, "question_id": 53414360, "link": "https://stackoverflow.com/questions/53414360/how-to-expand-the-content-of-an-mplset-as-template-parameters-of-a-function-te", "title": "How to expand the content of an mpl::set as template parameters of a function template", "body": "<p>I have a function template with a variadic number of template parameters:</p>\n\n<pre><code>template &lt;typename T1, typename... Ts&gt;\nvoid doSomething()\n{\n    ...\n}\n</code></pre>\n\n<p>Furthermore I have an mpl set defined as follows:</p>\n\n<pre><code>template &lt;typename... Ts&gt;\nstruct MyContainerCreator\n{\n    using type = boost::mpl::set&lt;Ts...&gt;;\n};\n\nusing MyContainer= MyContainerCreator&lt;T1, T2&gt;;\n</code></pre>\n\n<p>Now I want to write a function doSomethingForAll() that calls doSomething() with the types in the mpl set as template parameters. Something like:</p>\n\n<pre><code>void doSomethingForAll()\n{\n    //pseudocode:\n    doSomething&lt;expandTypesToTemplateParameters&lt;MyContainer::type&gt;&gt;();\n}\n</code></pre>\n\n<p>Is this possible?</p>\n"}, {"tags": ["c++", "googletest"], "comments": [{"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1542812549, "post_id": 53414268, "comment_id": 93704157, "body": "What does <code>logIfHasFailure()</code> do? Does it print to the console or to some log file? Why is print from <code>EXPECT_NEAR</code> not sufficient?"}, {"owner": {"reputation": 3149, "user_id": 1889762, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/77c9378bf28336a823c5bf47b6376d3c?s=128&d=identicon&r=PG", "display_name": "HAL9000", "link": "https://stackoverflow.com/users/1889762/hal9000"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1542812930, "post_id": 53414268, "comment_id": 93704404, "body": "logIfHasFailure logs a message &quot;data i has failed&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 3149, "user_id": 1889762, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/77c9378bf28336a823c5bf47b6376d3c?s=128&d=identicon&r=PG", "display_name": "HAL9000", "link": "https://stackoverflow.com/users/1889762/hal9000"}, "edited": false, "score": 0, "creation_date": 1542812956, "post_id": 53414915, "comment_id": 93704421, "body": "I like this answer"}], "tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": true, "score": 1, "last_activity_date": 1542812685, "creation_date": 1542812685, "answer_id": 53414915, "question_id": 53414268, "link": "https://stackoverflow.com/questions/53414268/clearing-hasfailure-flag-in-gtest/53414915#53414915", "title": "Clearing HasFailure flag in gtest", "body": "<p>You should probably use parametrized test instead:</p>\n\n<pre><code>TEST_P( something, something)\n{\n   auto i{GetParam()};\n   res = testMethodOverFile(i);\n   EXPECT_NEAR(res, results[i], 0.01);\n}  \n\nINSTANTIATE_TEST_CASE_P(Default, something, testing::Values(0, 1, 2,3 ));\n</code></pre>\n"}], "owner": {"reputation": 3149, "user_id": 1889762, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/77c9378bf28336a823c5bf47b6376d3c?s=128&d=identicon&r=PG", "display_name": "HAL9000", "link": "https://stackoverflow.com/users/1889762/hal9000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 53414915, "answer_count": 1, "score": 2, "last_activity_date": 1542812685, "creation_date": 1542810467, "question_id": 53414268, "link": "https://stackoverflow.com/questions/53414268/clearing-hasfailure-flag-in-gtest", "title": "Clearing HasFailure flag in gtest", "body": "<p>I have a Unit Test which is used to test if a function works well over a series of input:</p>\n\n<pre><code>TEST_F( something, something) {\n  std::vector&lt;int&gt; inputFileNumber = { 0, 1 , 2, 3 };\n  for(auto i : inputFileNumber ) {\n    res = testMethodOverFile(i);\n    EXPECT_NEAR(res, results[i], 0.01);\n    logIfHasFailure(i);\n  }\n}\n</code></pre>\n\n<p>I would like to know which of the inputs are failing, so I could use ::testing::Test::HasFailure. Unfortunately, once the flag is set, I cannot clear it and all the following indexes are logged as well. \nAny ideas?</p>\n"}, {"tags": ["c++", "class", "nested", "visual-studio-2017"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 3, "creation_date": 1542810476, "post_id": 53414238, "comment_id": 93702920, "body": "Try with struct instead of class in C#, this should be a fair comparison. Shouldn&#39;t work either."}, {"owner": {"reputation": 91, "user_id": 1736585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d9d26d128b9cc6432533279a2f50586?s=128&d=identicon&r=PG", "display_name": "L Fitz", "link": "https://stackoverflow.com/users/1736585/l-fitz"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1542811561, "post_id": 53414238, "comment_id": 93703525, "body": "@tkausl because in the C# example above, references to objects are being defined, not objects of the class types. I get it. Thanks!"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1542812521, "post_id": 53414238, "comment_id": 93704139, "body": "values cannot be <code>NULL</code>, so what you wrote is a <code>Entry</code> containing a <code>Setting</code> which in turn contains an <code>Entry</code> which again contains a <code>Setting</code> which in turn contains an <code>Entry</code>.... ad infinitum"}], "answers": [{"comments": [{"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1542811439, "post_id": 53414338, "comment_id": 93703454, "body": "Perhaps a suggestion to use <code>std::unique_ptr&lt;Setting&gt; Setg;</code> would be good."}], "tags": [], "owner": {"reputation": 10151, "user_id": 1153165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fee10843adffc656f32cdfa67aa425c5?s=128&d=identicon&r=PG", "display_name": "CS Pei", "link": "https://stackoverflow.com/users/1153165/cs-pei"}, "is_accepted": true, "score": 5, "last_activity_date": 1542811813, "last_edit_date": 1542811813, "creation_date": 1542810681, "answer_id": 53414338, "question_id": 53414238, "link": "https://stackoverflow.com/questions/53414238/c-nested-classes-referencing-each-other/53414338#53414338", "title": "C++ nested classes referencing each other", "body": "<p>This has nothing to do with <code>nested</code> or not. In C++, you can not cross reference each other for two classes/structs like that. The workaround is that you use either pointer or reference which does not require a complete type definition. In your case, try the following,</p>\n\n<pre><code>class CFGFile\n{\n  class Setting;\n\n  class Entry\n  {\n    Setting* Setg;  // or std::unique_ptr&lt;Setting&gt; Setg;\n  };\n\n  class Setting\n  {\n    Entry Ent;\n  };\n};\n</code></pre>\n\n<p>As suggested by @Ted Lyngmo, <code>std::unique_ptr</code> is the preferred way in modern C++ for applications.</p>\n"}, {"tags": [], "owner": {"reputation": 11800, "user_id": 1594913, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tLf29.jpg?s=128&g=1", "display_name": "JBL", "link": "https://stackoverflow.com/users/1594913/jbl"}, "is_accepted": false, "score": 0, "last_activity_date": 1542812199, "creation_date": 1542812199, "answer_id": 53414769, "question_id": 53414238, "link": "https://stackoverflow.com/questions/53414238/c-nested-classes-referencing-each-other/53414769#53414769", "title": "C++ nested classes referencing each other", "body": "<p>To expand on why this happens, this comes from the fact that when the compiler looks at a struct or class, it needs to be able to determine its exact size, among other things to be able to know how much memory it needs to allocate for instances of these.</p>\n\n<p>In this case, the compiler can't determine the size of <code>Entry</code> because it only knows that a <code>Setting</code> class exists, but it doesn't know its size yet.</p>\n\n<p>Using a pointer, i.e.:</p>\n\n<pre><code>class Setting;\n\nclass Entry\n{\n    Setting* Setg;\n};\n</code></pre>\n\n<p>actually solves this problem, because while the compiler still doesn't know anything about <code>Setting</code>, it still knows the size of a pointer (regardless of the pointee's type).</p>\n\n<p>As already mentioned, the \"nested\" part has no impact on this.</p>\n"}, {"tags": [], "owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "is_accepted": false, "score": 0, "last_activity_date": 1542814155, "creation_date": 1542814155, "answer_id": 53415370, "question_id": 53414238, "link": "https://stackoverflow.com/questions/53414238/c-nested-classes-referencing-each-other/53415370#53415370", "title": "C++ nested classes referencing each other", "body": "<p>C# - by design - uses reference semantics for classes, thus the provided snippet does not cause circular value depency. OTH c++ prefers value semantics , which would -in turn- result in infinite recursion in the original sample code, if the standard did not ban that kind of code; As implicated in earlier replies, if reference semantics is needed, it should be explicitly expressed in terms of pointer/reference syntax. </p>\n"}], "owner": {"reputation": 91, "user_id": 1736585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d9d26d128b9cc6432533279a2f50586?s=128&d=identicon&r=PG", "display_name": "L Fitz", "link": "https://stackoverflow.com/users/1736585/l-fitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 53414338, "answer_count": 3, "score": 2, "last_activity_date": 1542814155, "creation_date": 1542810376, "last_edit_date": 1542813797, "question_id": 53414238, "link": "https://stackoverflow.com/questions/53414238/c-nested-classes-referencing-each-other", "title": "C++ nested classes referencing each other", "body": "<p>In C# I can have two nested classes refer to each other without problem:</p>\n\n<pre><code>public class CFGFile\n{\n  class Setting\n  {\n    public Entry Ent;\n  }\n\n  class Entry\n  {\n    public Setting Setg;\n  }\n}\n</code></pre>\n\n<p>However, trying the same thing in C++ causes problems:</p>\n\n<pre><code>class CFGFile\n{\n  class Setting;\n\n  class Entry\n  {\n    Setting Setg;\n  };\n\n  class Setting\n  {\n    Entry Ent;\n  ]\n};\n</code></pre>\n\n<p>I get </p>\n\n<blockquote>\n  <p>\"incomplete type not allowed\"</p>\n</blockquote>\n\n<p>at the Setg variable definition, and error </p>\n\n<blockquote>\n  <p>\"C2079: 'CFGFile::Entry::Setg' uses undefined class\n  'CFGFile::Setting'\"</p>\n</blockquote>\n\n<p>when compiling.</p>\n\n<p>I'm using Visual Studio 2017.</p>\n\n<p>Is cross referring not possible in nested classes in C++?</p>\n"}, {"tags": ["c++", "tree"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1542810235, "post_id": 53414063, "comment_id": 93702797, "body": "As your list only contains pointers I doubt you&#39;ll see much benefit using <code>std::list</code>. Presumably your implementation is also incorrect as it returns the grand childrend of the current node and doesn&#39;t check whether they are leaves?"}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1542810382, "post_id": 53414063, "comment_id": 93702877, "body": "const std::vector&lt;Node*&gt;&amp; GetLeaves() {return children_;} ought to be enough and fast. Why do you need anything else? Seems like something is off on the design-side."}, {"owner": {"reputation": 1, "user_id": 8614739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c54c8c77c7a40e2371511be04f2e5e85?s=128&d=identicon&r=PG&f=1", "display_name": "Budziwoj Man", "link": "https://stackoverflow.com/users/8614739/budziwoj-man"}, "edited": false, "score": 0, "creation_date": 1542810385, "post_id": 53414063, "comment_id": 93702878, "body": "@Alain just corrcted ;)"}, {"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 1, "creation_date": 1542810603, "post_id": 53414063, "comment_id": 93702988, "body": "Well, you are generating a new vector for each inner node. Pass the result container as a parameter for the function to fill to avoid this. Alternative approach: Implement an iterator that lets the user iterate the leaves using the existing structure without the need to generate lists."}, {"owner": {"reputation": 1, "user_id": 8614739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c54c8c77c7a40e2371511be04f2e5e85?s=128&d=identicon&r=PG&f=1", "display_name": "Budziwoj Man", "link": "https://stackoverflow.com/users/8614739/budziwoj-man"}, "reply_to_user": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1542812248, "post_id": 53414063, "comment_id": 93703967, "body": "@Nico Passing return vector as parmeter does not help with repetitive inserting, it would be changed with repetitive push_back. (@Jeffrey  design corrected)"}, {"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1542818307, "post_id": 53414063, "comment_id": 93707783, "body": "Of course, it does not avoid the need to put the elements in the vector. But you will do so only once and you will have only a single vector. Currently, you keep the elements multiple times in multiple vectors."}, {"owner": {"reputation": 1, "user_id": 8614739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c54c8c77c7a40e2371511be04f2e5e85?s=128&d=identicon&r=PG&f=1", "display_name": "Budziwoj Man", "link": "https://stackoverflow.com/users/8614739/budziwoj-man"}, "reply_to_user": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1542896799, "post_id": 53414063, "comment_id": 93739824, "body": "@Nico Yes I must agree to that :). But in that perspective is using &#39;list&#39; instead of &#39;vector&#39; more preferable?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8614739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c54c8c77c7a40e2371511be04f2e5e85?s=128&d=identicon&r=PG&f=1", "display_name": "Budziwoj Man", "link": "https://stackoverflow.com/users/8614739/budziwoj-man"}, "edited": false, "score": 0, "creation_date": 1542895853, "post_id": 53417749, "comment_id": 93739276, "body": "I can see the idea, but I do not see how this exact code would work. Firstly std::stack does not support range-based loops. Secondly it would push and pop over and over again the same node (push should affect children_ I suppose)."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "reply_to_user": {"reputation": 1, "user_id": 8614739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c54c8c77c7a40e2371511be04f2e5e85?s=128&d=identicon&r=PG&f=1", "display_name": "Budziwoj Man", "link": "https://stackoverflow.com/users/8614739/budziwoj-man"}, "edited": false, "score": 0, "creation_date": 1542902202, "post_id": 53417749, "comment_id": 93742802, "body": "@BudziwojMan fixed (though still not tested as you didn&#39;t provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to test against)"}], "tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": false, "score": 0, "last_activity_date": 1542902164, "last_edit_date": 1542902164, "creation_date": 1542821925, "answer_id": 53417749, "question_id": 53414063, "link": "https://stackoverflow.com/questions/53414063/c-non-binary-tree-getting-tree-leaves-collection-performance-question/53417749#53417749", "title": "C++ Non binary tree: getting tree leaves collection (performance question)", "body": "<p>Avoiding the recursion would eliminate some of the copying and allow you to just build a single list:</p>\n\n<pre><code>std::vector&lt;Node*&gt; Node::GetLeaves()\n{\n    if (children_.empty())\n    {\n      return std::vector&lt;Node*&gt;(this, 1);\n    }\n    std::vector&lt;Node*&gt; ret;\n    std::stack&lt;Node*&gt; nodes;\n    nodes.push(this);\n    while (!nodes.empty())\n    {\n      Node* parent = nodes.top();\n      nodes.pop();\n      for (auto node : parent-&gt;children_)\n      {\n        if (node-&gt;children_.empty())\n        {\n          ret.push_back(node);\n        }\n        else\n        {\n          nodes.push(node);\n        }\n      }\n    }\n    return ret;\n}\n</code></pre>\n\n<p>If you want to change the traversal order you can change the <code>stack</code> to a <code>queue</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 8614739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c54c8c77c7a40e2371511be04f2e5e85?s=128&d=identicon&r=PG&f=1", "display_name": "Budziwoj Man", "link": "https://stackoverflow.com/users/8614739/budziwoj-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542902164, "creation_date": 1542809835, "last_edit_date": 1542812679, "question_id": 53414063, "link": "https://stackoverflow.com/questions/53414063/c-non-binary-tree-getting-tree-leaves-collection-performance-question", "title": "C++ Non binary tree: getting tree leaves collection (performance question)", "body": "<p>I have a nonbinary tree structure build form nodes like that:</p>\n\n<pre><code>struct Node\n{\n    Node*              pa_;\n    std::vector&lt;Node*&gt; children_;\n\n    std::vector&lt;Node*&gt; GetLeaves()\n};\n</code></pre>\n\n<p>By tree leafs i understand tree nodes without children. Method that provides collection of tree leafs looks like that:</p>\n\n<pre><code>    std::vector&lt;Node*&gt; Node::GetLeaves()\n    {\n        std::vector&lt;Node*&gt; ret;\n        if(!children_.size())\n        {\n            ret.push_back(this);\n        }\n        else\n        {\n            for (auto child : children_)\n            {\n                auto child_leaves = child-&gt;GetLeaves()\n                ret.insert( ret.end(),\n                            child_leaves.begin(),\n                            child_leaves.end() );\n            }\n        }\n        return std::move(ret);\n    }\n</code></pre>\n\n<p>Lest say that that whole tree can have hundreds of leafs. </p>\n\n<p>Using vector as container for leafs, means lots of memory reallocation when inserting to the returned collection happens.</p>\n\n<p>The Question is: is using std::list instead of std:: vector not preferable?</p>\n\n<p>thx in advance</p>\n"}, {"tags": ["c++", "arrays", "function"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1542811349, "post_id": 53414057, "comment_id": 93703412, "body": "There isn&#39;t really a point to having a <code>for</code> loop that always <code>return</code>s on the first iteration. What did you intend for that function to actually do? You probably don&#39;t want to <i>necessarily</i> return on the first iteration."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1542811950, "post_id": 53414057, "comment_id": 93703767, "body": "<code>bool sal_sk(int sal)</code>  returns true if sal is even false if it is not. It does not for the reason @Fran&#231;oisAndrieux mentioned. You probably want to move the return false out of the loop and change the <code>for (int i = 2; i &lt;= sal; i++) {</code> to <code>for (int i = 2; i &lt; sal; i++) {</code>"}, {"owner": {"reputation": 47, "user_id": 10528432, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A_zHiVsDe00/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBrlWmIw25k6lF6irGM0H-ewCbHpw/mo/photo.jpg?sz=128", "display_name": "MrLucky2243", "link": "https://stackoverflow.com/users/10528432/mrlucky2243"}, "edited": false, "score": 0, "creation_date": 1542812185, "post_id": 53414057, "comment_id": 93703927, "body": "Hey that function is intented to return true when the number is composite and false when it is not, I dont understand why it is always true tho :/"}, {"owner": {"reputation": 47, "user_id": 10528432, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A_zHiVsDe00/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBrlWmIw25k6lF6irGM0H-ewCbHpw/mo/photo.jpg?sz=128", "display_name": "MrLucky2243", "link": "https://stackoverflow.com/users/10528432/mrlucky2243"}, "edited": false, "score": 0, "creation_date": 1542812459, "post_id": 53414057, "comment_id": 93704101, "body": "Okay that seems to helped a bit, could you check the <code>lkd</code> function because for example when I enter 17 2 4 it should return that gcd is 2 but it returns 1"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1542818683, "post_id": 53414057, "comment_id": 93707990, "body": "<code>if (sal_sk(a[i] == true))</code> does not make sense to me. It passes a boolean to sal_sk()"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 10528432, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A_zHiVsDe00/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBrlWmIw25k6lF6irGM0H-ewCbHpw/mo/photo.jpg?sz=128", "display_name": "MrLucky2243", "link": "https://stackoverflow.com/users/10528432/mrlucky2243"}, "edited": false, "score": 0, "creation_date": 1542810307, "post_id": 53414183, "comment_id": 93702845, "body": "It should be <code>std::cin&gt;&gt;a[]</code> ?"}, {"owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "reply_to_user": {"reputation": 47, "user_id": 10528432, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A_zHiVsDe00/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBrlWmIw25k6lF6irGM0H-ewCbHpw/mo/photo.jpg?sz=128", "display_name": "MrLucky2243", "link": "https://stackoverflow.com/users/10528432/mrlucky2243"}, "edited": false, "score": 1, "creation_date": 1542810398, "post_id": 53414183, "comment_id": 93702885, "body": "It should be std::cin &gt;&gt; a[i]."}], "tags": [], "owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "is_accepted": false, "score": -1, "last_activity_date": 1542810516, "last_edit_date": 1542810516, "creation_date": 1542810225, "answer_id": 53414183, "question_id": 53414057, "link": "https://stackoverflow.com/questions/53414057/a-little-problem-with-a-program-that-has-an-array-and-two-functions-is-random-bu/53414183#53414183", "title": "A little problem with a program that has an array and two functions is random but it shouldnt be", "body": "<p>The code here:</p>\n\n<pre><code>    cout &lt;&lt; \"Enter the array elements\" &lt;&lt; endl;\n    for (int i = 0; i &lt; n; i++) {\n        std::cin &gt;&gt; *a;\n    }\n</code></pre>\n\n<p>does not fill in all the array elements, but instead just overwrites the first entry.</p>\n\n<p>This is far from the only problem with your code. In particular, <code>sal_sk</code> is not doing whatever you think its doing.</p>\n"}, {"tags": [], "owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "is_accepted": false, "score": 0, "last_activity_date": 1542819563, "last_edit_date": 1542819563, "creation_date": 1542812419, "answer_id": 53414834, "question_id": 53414057, "link": "https://stackoverflow.com/questions/53414057/a-little-problem-with-a-program-that-has-an-array-and-two-functions-is-random-bu/53414834#53414834", "title": "A little problem with a program that has an array and two functions is random but it shouldnt be", "body": "<p>bool sal_sk(int sal) returns true if sal is even false if it is not because you return always on the first iteration of your loop as @Fran\u00e7oisAndrieux mentioned.</p>\n\n<pre><code>bool sal_sk(int sal) //  If sal is a composite figure, then  true, if its not then false.\n{ \n\n    for (int i = 2; i &lt;= sal; i++) {\n        if (sal%i == 0)\n            return true; \n        else\n            return false;\n\n\n    }\n}\n</code></pre>\n\n<p>To return true on composite make the following changes.</p>\n\n<pre><code>bool sal_sk(int sal) //  If sal is a composite figure, then  true, if its not then false.\n{ \n\n    for (int i = 2; i &lt; sal; i++) {\n        if (sal%i == 0)\n            return true;   // Has some factor other than 1 and itself\n    }\n    return false; // Does not have a factor other than 1 and itself\n}\n</code></pre>\n\n<p>Another bug is here:</p>\n\n<pre><code>for (int i = 1; i &lt; n; i++) {\n    if (sal_sk(a[i] == true))\n        rez = lkd(rez, a[i]);\n\n}\n</code></pre>\n\n<p>This code passes <code>true</code> or <code>false</code> to <code>sal_sk()</code> depending on if <code>a[i] !=0</code> </p>\n\n<p>Instead you want:</p>\n\n<pre><code>for (int i = 1; i &lt; n; i++) {\n    if (sal_sk(a[i]))\n        rez = lkd(rez, a[i]);\n}\n</code></pre>\n\n<p>This is also a bug:</p>\n\n<pre><code>cout &lt;&lt; \"Enter the array elements\" &lt;&lt; endl;\nfor (int i = 0; i &lt; n; i++) {\n    std::cin &gt;&gt; *a; // This puts the value in a[0] always!\n}\n</code></pre>\n\n<p>The code should be:</p>\n\n<pre><code>cout &lt;&lt; \"Enter the array elements\" &lt;&lt; endl;\nfor (int i = 0; i &lt; n; i++) {\n    std::cin &gt;&gt; a[i]; // Put the value in the array at index i\n}\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 10528432, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A_zHiVsDe00/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBrlWmIw25k6lF6irGM0H-ewCbHpw/mo/photo.jpg?sz=128", "display_name": "MrLucky2243", "link": "https://stackoverflow.com/users/10528432/mrlucky2243"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1542819563, "creation_date": 1542809816, "last_edit_date": 1542810111, "question_id": 53414057, "link": "https://stackoverflow.com/questions/53414057/a-little-problem-with-a-program-that-has-an-array-and-two-functions-is-random-bu", "title": "A little problem with a program that has an array and two functions is random but it shouldnt be", "body": "<pre><code>bool sal_sk(int sal) //  If sal is a composite figure, then  true, if its not then false.\n{ \n\n    for (int i = 2; i &lt;= sal; i++) {\n        if (sal%i == 0)\n            return true;\n        else\n            return false;\n\n\n    }\n}\n\nint lkd(int a, int b) // Checks the gcd \n{ \n    int c;\n    while (b &gt; 0) \n    {\n        c = b;\n        b = a % b;\n        a = c;\n    }\n    return a;\n\n}\n\nint main() \n{\n    int ok;\n\n    do \n    {\n        int n;//Number of elements \n        int*a; //Given number array variable\n\n        cout &lt;&lt; \"Put in the number of elements\" &lt;&lt; endl;\n        std::cin &gt;&gt; n;\n\n        a = new int[n];\n\n        cout &lt;&lt; \"Enter the array elements\" &lt;&lt; endl;\n        for (int i = 0; i &lt; n; i++) {\n            std::cin &gt;&gt; *a;\n        }\n        int rez = a[0];\n\n        for (int i = 1; i &lt; n; i++) {\n            if (sal_sk(a[i] == true))\n                rez = lkd(rez, a[i]);\n\n        }\n        delete[] a;\n        cout &lt;&lt; \"Composite figure gcd is  \" &lt;&lt; rez &lt;&lt; endl;\n\n        cout &lt;&lt; \" Do you want to continue(1) or to end (0)?\" &lt;&lt; endl;\n        cin &gt;&gt; ok;// Asks the user to enter in if he wants to continue or to end\n\n    }   while (ok == 1);\n}\n</code></pre>\n\n<p>Hey guys, I have two functions that check the greatest common divisor of composite figures in an array but it is random and idk why.\nFor Example if I enter 3 elements 4 6 9 it sometimes prints out that the gcd is 3 but sometimes it prints out that it is 1 which is correct but it happens at random times,and if I enter 9 4 6 it says that the gcd is 2, i just dont understand.Thanks in advance </p>\n"}, {"tags": ["c++", "macos", "codeblocks"], "comments": [{"owner": {"reputation": 620, "user_id": 6520107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a47f891c7c0e86ff5a885881233feca1?s=128&d=identicon&r=PG&f=1", "display_name": "Siliace", "link": "https://stackoverflow.com/users/6520107/siliace"}, "edited": false, "score": 0, "creation_date": 1542811060, "post_id": 53414047, "comment_id": 93703228, "body": "Your program crashs due to a division by zero error on <code>if(n % d == 0)</code>. You should replace the line<code>if(d &gt; 0)</code> by <code>if(d &gt; 1)</code>"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1542811151, "post_id": 53414047, "comment_id": 93703281, "body": "Or move the second <code>if</code> inside the first <code>if</code> block..."}, {"owner": {"reputation": 3, "user_id": 8586828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e4d879a1578d97129f55fa5727431f?s=128&d=identicon&r=PG&f=1", "display_name": "Catalin Catalin", "link": "https://stackoverflow.com/users/8586828/catalin-catalin"}, "edited": false, "score": 0, "creation_date": 1542811182, "post_id": 53414047, "comment_id": 93703307, "body": "oh ty, i didnt expect this little think"}], "owner": {"reputation": 3, "user_id": 8586828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e4d879a1578d97129f55fa5727431f?s=128&d=identicon&r=PG&f=1", "display_name": "Catalin Catalin", "link": "https://stackoverflow.com/users/8586828/catalin-catalin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542809774, "creation_date": 1542809774, "question_id": 53414047, "link": "https://stackoverflow.com/questions/53414047/no-complet-command-outputs-in-mac-codeblocks", "title": "No complet command outputs in mac codeBlocks", "body": "<p>So i have the program bellow, but the console keeps showing me only my first cout even if i input n, I need some help\n        #include </p>\n\n<pre><code>using namespace std;\n\nvoid DivizoriCresc1(int n, int d)\n{\n    cout &lt;&lt; \" ceva\";\n    if(d &gt; 0)\n    {\n        DivizoriCresc1(n, d - 1);\n    }\n    if(n % d == 0)\n    {\n        cout &lt;&lt; d &lt;&lt; \" \";\n    }\n}\n\nint main()\n{\n    int n;\n    cout &lt;&lt; \"n =\";\n    cin &gt;&gt; n;\n        cout &lt;&lt; \" ceva\";\n    DivizoriCresc1(n, n);\n        cout &lt;&lt; \" ceva\";\n\n    return 0;\n}\n</code></pre>\n\n<p>Last login: Wed Nov 21 16:11:42 on ttys000\nMacBooks-MacBook-Pro:~ macbook$ /Users/macbook/Desktop/CodeBlocks.app/Contents/MacOS/cb_console_runner DYLD_LIBRARY_PATH=$DYLD_LIBRARY_PATH:. /Users/macbook/CodeBlocksProject/tema1/bin/Debug/tema1 \nn =50</p>\n\n<p>Process returned -1 (0xFFFFFFFF)   execution time : 1.856 s\nPress ENTER to continue.</p>\n\n<p>MacBooks-MacBook-Pro:~ macbook$ </p>\n"}, {"tags": ["c++", "multithreading", "atomic", "googletest"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1542809935, "post_id": 53414039, "comment_id": 93702622, "body": "Too many threads which do too little. Try with two or four threads which each increment the variable one million times in a loop."}, {"owner": {"reputation": 1147, "user_id": 8874817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40ae7c9690551846e59d73bb4ed01c7?s=128&d=identicon&r=PG&f=1", "display_name": "Detonar", "link": "https://stackoverflow.com/users/8874817/detonar"}, "edited": false, "score": 0, "creation_date": 1542810192, "post_id": 53414039, "comment_id": 93702769, "body": "You are trying to produce an heisenbug. There is no 100% way."}, {"owner": {"reputation": 1155, "user_id": 2554220, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d2bfcc580376aee99a1985dd462785dd?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/2554220/ben"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1542810521, "post_id": 53414039, "comment_id": 93702940, "body": "@tkausl Tnx, see update"}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1542810938, "post_id": 53414039, "comment_id": 93703161, "body": "<a href=\"http://coliru.stacked-crooked.com/a/4f0b8c68851694c6\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/4f0b8c68851694c6</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1155, "user_id": 2554220, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d2bfcc580376aee99a1985dd462785dd?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/2554220/ben"}, "edited": false, "score": 0, "creation_date": 1542812807, "post_id": 53414588, "comment_id": 93704313, "body": "the <code>couts</code> seem to mix after a while. Haven&#39;t seen an inconsistent counter though."}, {"owner": {"reputation": 1889, "user_id": 7038446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38faf3b21f6b84c3d25269cf3919d8a?s=128&d=identicon&r=PG&f=1", "display_name": "felix", "link": "https://stackoverflow.com/users/7038446/felix"}, "reply_to_user": {"reputation": 1155, "user_id": 2554220, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d2bfcc580376aee99a1985dd462785dd?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/2554220/ben"}, "edited": false, "score": 0, "creation_date": 1542813166, "post_id": 53414588, "comment_id": 93704561, "body": "@Ben On my computer(E5-1620), it gives ~1999, but mostly 2000."}, {"owner": {"reputation": 1155, "user_id": 2554220, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d2bfcc580376aee99a1985dd462785dd?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/2554220/ben"}, "edited": false, "score": 0, "creation_date": 1542813341, "post_id": 53414588, "comment_id": 93704670, "body": "Adding a sleep to the for-loop (see update) helps. It&#39;s now finally not working :)"}], "tags": [], "owner": {"reputation": 1889, "user_id": 7038446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38faf3b21f6b84c3d25269cf3919d8a?s=128&d=identicon&r=PG&f=1", "display_name": "felix", "link": "https://stackoverflow.com/users/7038446/felix"}, "is_accepted": true, "score": 3, "last_activity_date": 1542811624, "creation_date": 1542811624, "answer_id": 53414588, "question_id": 53414039, "link": "https://stackoverflow.com/questions/53414039/enforce-concurrent-modification-of-a-variable-c/53414588#53414588", "title": "Enforce concurrent modification of a variable (C++)", "body": "<p><code>cv.wait(lk, [] {return start; });</code> only returns with the <code>lk</code> acquired. So it's exclusive. You might want to unlock <code>lk</code> right after:</p>\n\n<pre><code>void Inc() {\n    // Wait until test says start\n    std::unique_lock&lt;std::mutex&gt; lk(m);\n    cv.wait(lk, [] {return start; });\n    lk.unlock();\n\n    Counter++;\n}\n</code></pre>\n\n<p>And you must remove <code>std::cout</code>, because it potentially introduces synchronization.</p>\n"}], "owner": {"reputation": 1155, "user_id": 2554220, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d2bfcc580376aee99a1985dd462785dd?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/2554220/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 53414588, "answer_count": 1, "score": 0, "last_activity_date": 1542813882, "creation_date": 1542809745, "last_edit_date": 1542813882, "question_id": 53414039, "link": "https://stackoverflow.com/questions/53414039/enforce-concurrent-modification-of-a-variable-c", "title": "Enforce concurrent modification of a variable (C++)", "body": "<p>I'm trying to unit test an atomic library (I am aware that an atomic library is not suitable for unit testing, but I still want to give it a try) </p>\n\n<p>For this, I want to let X parallel threads increment a counter and evaluate the resulting value (it should be X).</p>\n\n<p>The code is below. The problem is that is it never breaks. The <code>Counter</code> always nicely ends up being 2000 (see below). What I also notice is that the <code>cout</code> is also printed as a whole (instead of being mingled, what I remember seeing with other multithreaded <code>couts</code>)</p>\n\n<p>My question is: why doesn't this break? Or how can I let this break?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;vector&gt;\n#include &lt;mutex&gt;\n#include &lt;condition_variable&gt;\n\nstd::mutex m;\nstd::condition_variable cv;\nbool start = false;\n\nint Counter = 0;\n\nvoid Inc() {\n\n    // Wait until test says start\n    std::unique_lock&lt;std::mutex&gt; lk(m);\n    cv.wait(lk, [] {return start; });\n\n    std::cout &lt;&lt; \"Incrementing in thread \" &lt;&lt; std::this_thread::get_id() &lt;&lt; std::endl;\n    Counter++;\n}\n\nint main()\n{\n    std::vector&lt;std::thread&gt; threads;\n\n    for (int i = 0; i &lt; 2000; ++i) {\n        threads.push_back(std::thread(Inc));\n    }\n\n    // signal the threads to start\n    {\n        std::lock_guard&lt;std::mutex&gt; lk(m);\n        start = true;\n    }\n    cv.notify_all();\n\n    for (auto&amp; thread : threads) {\n        thread.join();\n    }\n\n    // Now check whether value is right\n    std::cout &lt;&lt; \"Counter: \" &lt;&lt; Counter &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>The results looks like this (but then 2000 lines)</p>\n\n<pre><code>Incrementing in thread 130960\nIncrementing in thread 130948\nIncrementing in thread 130944\nIncrementing in thread 130932\nIncrementing in thread 130928\nIncrementing in thread 130916\nIncrementing in thread 130912\nIncrementing in thread 130900\nIncrementing in thread 130896\nCounter: 2000\n</code></pre>\n\n<p>Any help would be appreciated</p>\n\n<p>UPDATE: Reducing the nr of threads to 4, but incrementing a million times in a for loop (as suggested by @tkausl) the <code>cout</code> of thread id appear to be sequential..</p>\n\n<p>UPDATE2: Turns out that the lock had to be unlocked to prevent exclusive access per thread (<code>lk.unlock()</code>). An additional <code>yield</code> in the for-loop increased the race condition effect.</p>\n"}, {"tags": ["c++", "sorting"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 6, "creation_date": 1542809646, "post_id": 53413988, "comment_id": 93702444, "body": "Is there a problem with the numbers you get? What did you expect them to be?"}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 6, "creation_date": 1542809695, "post_id": 53413988, "comment_id": 93702472, "body": "Your shown code seems show that already. What is  your issue ?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 5, "creation_date": 1542810440, "post_id": 53413988, "comment_id": 93702904, "body": "<b><i>How do you count and output the number of comparisons and swaps correctly</i></b> I also think you are already doing that. If you don&#39;t trust the result try  a few sorts of 3 numbers on paper and see if you get the same results."}], "answers": [{"comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 2, "creation_date": 1542824574, "post_id": 53418156, "comment_id": 93710874, "body": "This is not the way big O notation works. You can get a number that&#39;s larger than n^2 for a specific value of n and still be O(n^2) worst case."}], "tags": [], "owner": {"reputation": 396, "user_id": 5799793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6GkCY.jpg?s=128&g=1", "display_name": "Little Boy Blue", "link": "https://stackoverflow.com/users/5799793/little-boy-blue"}, "is_accepted": false, "score": -1, "last_activity_date": 1542824476, "last_edit_date": 1542824476, "creation_date": 1542823694, "answer_id": 53418156, "question_id": 53413988, "link": "https://stackoverflow.com/questions/53413988/counting-number-of-swaps-and-comparisons-in-selection-sort/53418156#53418156", "title": "Counting number of swaps and comparisons in selection sort", "body": "<p>On this awesome website <a href=\"http://bigocheatsheet.com/\" rel=\"nofollow noreferrer\">http://bigocheatsheet.com/</a> you can find the Order for all different sorting algorithms. It says that selection sort should have a worst case of O(n^2). You've got 12 variables; 12^2 = 144, which is way larger than the number of swaps and comparisons you've got -- so you're well within the worst case range.</p>\n\n<p>However, if you're saying you want to <em>output</em> the swaps that are made, and not the actual number of swaps, you can write something like:</p>\n\n<pre><code>if (arr[i] &gt; arr[j])\n{\n    std::cout &lt;&lt; \"Swapping \" &lt;&lt; arr[i] &lt;&lt; \" with \" &lt;&lt; arr[j] &lt;&lt; \".\\n\";\n    swaps = swaps + 1;\n    temp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = temp;\n}\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 10607704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45b773acafd667f43d62866b80d3b634?s=128&d=identicon&r=PG&f=1", "display_name": "CrDS", "link": "https://stackoverflow.com/users/10607704/crds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2145, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542824476, "creation_date": 1542809559, "last_edit_date": 1542809671, "question_id": 53413988, "link": "https://stackoverflow.com/questions/53413988/counting-number-of-swaps-and-comparisons-in-selection-sort", "title": "Counting number of swaps and comparisons in selection sort", "body": "<p>I am trying to count the number of swaps and comparisons in selection sort.\nArray = [7, -9, -2, 17, 19, 12, 8,  1, -20, 15, 3, 5].</p>\n\n<pre><code>void main()\n{\n\n    int size = 12, arr[] = { 7, - 9, - 2,   17, 19, 12, 8,  1, - 20,    15, 3,    5 };\n    int i, j, temp;\n    int comparison = 0;\n    int swaps = 0;\n\n    std::cout &lt;&lt; \"Unsorted: \";\n    for (i = 0; i &lt; size; i++)\n    {\n        std::cout &lt;&lt; arr[i] &lt;&lt; \" \";\n    }\n\n    std::cout &lt;&lt; \"\\n\";\n\n    for (i = 0; i &lt; size; i++)\n    {\n        for (j = i + 1; j &lt; size; j++)\n        {\n            comparison = comparison + 1;\n            if (arr[i] &gt; arr[j])\n            {\n                swaps = swaps + 1;\n                temp = arr[i];\n                arr[i] = arr[j];\n                arr[j] = temp;\n            }\n        }\n    }\n\n    std::cout &lt;&lt; \"\\nComparisons: \" &lt;&lt; comparison;\n    std::cout &lt;&lt; \"\\nSwap: \" &lt;&lt; swaps;\n\n    std::cout &lt;&lt; \"\\n\\nSorted: \";\n    for (i = 0; i &lt; size; i++)\n    {\n        std::cout &lt;&lt; arr[i] &lt;&lt; \" \";\n    }\n</code></pre>\n\n<p>This returns 66 comparisons and 34 swaps. How do you count and output the number of comparisons and swaps correctly? </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 5, "creation_date": 1542809591, "post_id": 53413962, "comment_id": 93702403, "body": "Array indexes reside in <code>[0, s.size())</code>. <code>s[s.size()]</code> is one past the end of the array so you need to start at <code>s.size()-1</code>."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1542809761, "post_id": 53413962, "comment_id": 93702518, "body": "@0x499602D2 - That&#39;s an answer. So, you know..."}, {"owner": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 0, "creation_date": 1542980716, "post_id": 53413962, "comment_id": 93768498, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/7320686/why-does-the-indexing-start-with-zero-in-c\">Why does the indexing start with zero in &#39;C&#39;?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "is_accepted": false, "score": 4, "last_activity_date": 1542810236, "last_edit_date": 1542810236, "creation_date": 1542809812, "answer_id": 53414056, "question_id": 53413962, "link": "https://stackoverflow.com/questions/53413962/while-extracting-character-from-a-string-in-c-why-do-i-have-to-do-this/53414056#53414056", "title": "While extracting character from a string in C++, why do I have to do this?", "body": "<p>Array indexes reside in <code>[0, s.size())</code>. <code>s[s.size()]</code> is one past the end of the array so you need to start at <code>s.size()-1</code>.</p>\n\n<p>You can see that this is needed if you use the <code>at()</code> member function which uses bounds checking:</p>\n\n<pre><code>adder += s.at(i); // throws exception if i is out of bounds\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10655470"}, "edited": false, "score": 0, "creation_date": 1542827083, "post_id": 53414090, "comment_id": 93712041, "body": "While allocating an array let&#39;s say int array[5].  So this array can store 6 elements then?"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1542839596, "post_id": 53414090, "comment_id": 93717134, "body": "@CyborgGamer No it stores 5 elements, and the indexes go from <code>0</code> to <code>4</code>."}, {"owner": {"reputation": 538, "user_id": 9379842, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AneDlPPq_xc/AAAAAAAAAAI/AAAAAAAAAGY/y4-NHmeaHO8/photo.jpg?sz=128", "display_name": "Hello World", "link": "https://stackoverflow.com/users/9379842/hello-world"}, "edited": false, "score": 0, "creation_date": 1542883078, "post_id": 53414090, "comment_id": 93732127, "body": "@CyborgGamer No it is not. The confusion will banish once you are more familiar with <code>arrays</code>. Array of size 5 will contains only 5 elements (array[0], array[1], array[2], array[3] and array[4])."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10655470"}, "edited": false, "score": 0, "creation_date": 1542971093, "post_id": 53414090, "comment_id": 93763744, "body": "Hello guys, I am really rusty on arrays. Especially in C. How can I improve my knowledge on array?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10655470"}, "edited": false, "score": 0, "creation_date": 1542971172, "post_id": 53414090, "comment_id": 93763775, "body": "Also, so lets if s.size is equal to 6 then it will contain six characters but the computer will count till zero right?"}, {"owner": {"reputation": 538, "user_id": 9379842, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AneDlPPq_xc/AAAAAAAAAAI/AAAAAAAAAGY/y4-NHmeaHO8/photo.jpg?sz=128", "display_name": "Hello World", "link": "https://stackoverflow.com/users/9379842/hello-world"}, "edited": false, "score": 1, "creation_date": 1543816696, "post_id": 53414090, "comment_id": 94039606, "body": "@CyborgGamer you should try to understand arrays from the scratch. Just ignore using your question as an example. If an array has size of 6, then it will always contain 6 items in it. But instead of accessing the last item using <code>array[6]</code>, we will use <code>array[5]</code>, because the counting starts from <code>array[0]</code> instead of <code>array[1]</code>. <code>array[0]</code> hold the first item, <code>array[1]</code> the second, ... and <code>array[5]</code> the sixth. It is simple as that."}], "tags": [], "owner": {"reputation": 538, "user_id": 9379842, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AneDlPPq_xc/AAAAAAAAAAI/AAAAAAAAAGY/y4-NHmeaHO8/photo.jpg?sz=128", "display_name": "Hello World", "link": "https://stackoverflow.com/users/9379842/hello-world"}, "is_accepted": false, "score": 1, "last_activity_date": 1542980529, "last_edit_date": 1542980529, "creation_date": 1542809918, "answer_id": 53414090, "question_id": 53413962, "link": "https://stackoverflow.com/questions/53413962/while-extracting-character-from-a-string-in-c-why-do-i-have-to-do-this/53414090#53414090", "title": "While extracting character from a string in C++, why do I have to do this?", "body": "<p>In you code <code>s</code> is a <code>string</code> variable that holds some characters. And as you said you want to display its contents in reverse order.</p>\n\n<p>In order to do that, you have to navigate through the contents of <code>s</code> from back to front. To do that, as shown in your code you used <code>for-loop</code>.</p>\n\n<p>Let's say <code>s</code> contains <code>10</code> characters. Since you are accessing your <code>string s</code> back-to-front, the last character found at the <code>10 - 1 = 9th</code> index, because it starts counting from 0, not 1.</p>\n\n<p><strong>EDIT with Example</strong></p>\n\n<pre><code>string original = \"Hello\";\nstring reverse;\nfor (int i = original.size() - 1; i &gt;= 0; i--) {\n    reverse += original[i];\n}\ncout &lt;&lt; reverse &lt;&lt; endl;\n</code></pre>\n\n<p>As you can see in the above example, <code>original</code> is a <code>string</code> variable which holds five characters, and <code>reverse</code> is also a <code>string</code> variable which is about to hold the contents of <code>original</code> in reverse order. In order to reverse the contents of <code>original</code>, we must navigate through it <code>back-to-front</code>.</p>\n\n<pre><code>original[4] = o\noriginal[3] = l\noriginal[2] = l\noriginal[1] = e\noriginal[0] = H\n</code></pre>\n\n<p>The above characters will be added one by one at each iteration of the for-loop as shown below:</p>\n\n<pre><code>reverse = \"\";  //it was empty first\nreverse = reverse + original[4]; // now it holds the last character -&gt; o\nreverse = reverse + original[3]; // now it holds the characters -&gt; ol\nreverse = reverse + original[2]; // now it holds the characters -&gt; oll\nreverse = reverse + original[1]; // now it holds the characters -&gt; olle\nreverse = reverse + original[0]; // now it holds the characters -&gt; olleh\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4299, "user_id": 798346, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d7e5d155178f095778086f1cf84142ce?s=128&d=identicon&r=PG", "display_name": "Jim Rhodes", "link": "https://stackoverflow.com/users/798346/jim-rhodes"}, "edited": false, "score": 0, "creation_date": 1542810215, "post_id": 53414137, "comment_id": 93702783, "body": "How does this answer the OP? And how does it help OP understand zero-based indexes?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1542810242, "post_id": 53414137, "comment_id": 93702800, "body": "Yup, this should be a comment."}], "tags": [], "owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "is_accepted": false, "score": 0, "last_activity_date": 1542810602, "last_edit_date": 1542810602, "creation_date": 1542810075, "answer_id": 53414137, "question_id": 53413962, "link": "https://stackoverflow.com/questions/53413962/while-extracting-character-from-a-string-in-c-why-do-i-have-to-do-this/53414137#53414137", "title": "While extracting character from a string in C++, why do I have to do this?", "body": "<p>It is because indexing is zero-based. So the first element is at position zero.</p>\n\n<p>Since you use c++ you may (and should) use reverse iterators:</p>\n\n<pre><code>for (auto it = str.rbegin(); it != str.rend(); ++it) {\n    char&amp; c = *it;\n    //do stuff\n}\n</code></pre>\n\n<p>If you have boost you can just do:</p>\n\n<pre><code>for (auto c : boost::adaptors::reversed(str)) {\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10655470"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1542980529, "creation_date": 1542809486, "last_edit_date": 1542810027, "question_id": 53413962, "link": "https://stackoverflow.com/questions/53413962/while-extracting-character-from-a-string-in-c-why-do-i-have-to-do-this", "title": "While extracting character from a string in C++, why do I have to do this?", "body": "<pre><code>string s; string adder;\nfor (int i = s.size ()-1; i &gt;= 0; i--) {\n    adder += s[i];\n}\ncout &lt;&lt; adder &lt;&lt; endl;\n</code></pre>\n\n<p>I am trying to reverse a string using c++ and am confused why do we have to do s.size()-1 and why does it print a space when we don't have -1?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1542811939, "post_id": 53413941, "comment_id": 93703761, "body": "It seems there&#39;s an overload of <code>operator&lt;&lt;</code> for <code>utils::ToHex</code> that, for reasons unclear, takes its <code>basic_ostream</code> argument by rvalue reference (which makes no sense). If you are the author of this overload, fix it to take a &quot;normal&quot; lvalue reference. If you don&#39;t control that code, you may be able to work around by writing <code>std::move(_os) &lt;&lt; utils::to_hex(...)</code>"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1542811980, "post_id": 53413941, "comment_id": 93703792, "body": "@IgorTandetnik Those are one of the standard overloads."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1542812039, "post_id": 53413941, "comment_id": 93703833, "body": "@0x499602D2 I&#39;m not sure what you mean by &quot;standard&quot; here. <code>utils::ToHex</code> or <code>utils::to_hex</code> are not part of the C++ standard library, to the best of my knowledge. Which standard do you believe prescribes them?"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1542812331, "post_id": 53413941, "comment_id": 93704017, "body": "@IgorTandetnik Aren&#39;t you referring to <code>operator&lt;&lt;(basic_ostream&lt;_CharT, _Traits&gt;&amp;&amp; __os, const _Tp&amp; __x)</code>? This is one of the overloads that come with <code>ostream</code>."}, {"owner": {"reputation": 4314, "user_id": 2893600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b9627f68f303857fa6e1bc984033dc10?s=128&d=identicon&r=PG", "display_name": "jmlemetayer", "link": "https://stackoverflow.com/users/2893600/jmlemetayer"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1542812576, "post_id": 53413941, "comment_id": 93704168, "body": "@IgorTandetnik The overload operator for <code>utils::ToHex</code> is define in the code (see <a href=\"http://cpp.sh/2ln7q\" rel=\"nofollow noreferrer\">cpp.sh/2ln7q</a> line 50). But it seems that it is not taken into account. When I put this operator in the anonymous namespace it is ok ..."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1542812580, "post_id": 53413941, "comment_id": 93704174, "body": "@0x499602D2 Ah, I see. So basically, there&#39;s no suitable overload of <code>operator&lt;&lt;</code> for <code>utils::ToHex</code>, and the compiler is picking <a href=\"https://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt2\" rel=\"nofollow noreferrer\">a generic one</a> (which doesn&#39;t work anyway)."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 1, "creation_date": 1542812672, "post_id": 53413941, "comment_id": 93704243, "body": "I was able to get it down to this <a href=\"http://coliru.stacked-crooked.com/a/aaf966d0666e00d2\" rel=\"nofollow noreferrer\">basic example</a>. For whatever reason normal lookup rules cannot find your version of <code>operator&lt;&lt;</code> while being called from within a <code>operator&lt;&lt;</code> overload. The workaround was to make an explicit call to the operator while looking at the outer namespace."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1542812677, "post_id": 53413941, "comment_id": 93704246, "body": "Define that operator in <code>utils</code> namespace, together with the class it&#39;s acting on, so it can be found by the argument-dependent lookup. At the moment, it&#39;s simply not found by name lookup."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1542812738, "post_id": 53413941, "comment_id": 93704276, "body": "@0x499602D2 It&#39;s simple. <code>operator&lt;&lt;(std::ostream &amp;_os, const custom_type &amp;_value)</code> hides the name <code>operator&lt;&lt;</code> in enclosing namespace, so ordinary lookup cannot find it. This is common. The trick is to always define free-standing helper functions in the same namespace as their arguments, to be found by ADL. That&#39;s pretty much the reason ADL exists."}, {"owner": {"reputation": 4314, "user_id": 2893600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b9627f68f303857fa6e1bc984033dc10?s=128&d=identicon&r=PG", "display_name": "jmlemetayer", "link": "https://stackoverflow.com/users/2893600/jmlemetayer"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1542813000, "post_id": 53413941, "comment_id": 93704452, "body": "@0x499602D2 It works. Thanks ! Can you post your response please ?"}, {"owner": {"reputation": 4314, "user_id": 2893600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b9627f68f303857fa6e1bc984033dc10?s=128&d=identicon&r=PG", "display_name": "jmlemetayer", "link": "https://stackoverflow.com/users/2893600/jmlemetayer"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1542813164, "post_id": 53413941, "comment_id": 93704563, "body": "@IgorTandetnik Your solution to put the operator in the <code>utils</code> namespace is also working. Please post your answer."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1542813181, "post_id": 53413941, "comment_id": 93704572, "body": "@IgorTandetnik Yes but how do unnanamed namespaces tie into this? If you just get rid of the anon namespace it works even if <code>operator&lt;&lt;</code> is &quot;hiding&quot; the name in the enclosing scope."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1542814497, "post_id": 53413941, "comment_id": 93705370, "body": "@0x499602D2 Without the extra namespace, the two overloads are in the same namespace (the global one), and participate in overload resolution equally. Neither is hiding the other. There&#39;s no longer an &quot;enclosing scope&quot; - the two names are in the same scope."}, {"owner": {"reputation": 730, "user_id": 5096416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cc4dbd84e88180775789317cf72125f?s=128&d=identicon&r=PG&f=1", "display_name": "Lawrence", "link": "https://stackoverflow.com/users/5096416/lawrence"}, "edited": false, "score": 0, "creation_date": 1542817840, "post_id": 53413941, "comment_id": 93707479, "body": "Unqualified name lookup runs <code>until it finds at least one declaration of any kind, at which time the lookup stops and no further scopes are examined</code>. So namespace scope + ADL scope. <a href=\"https://en.cppreference.com/w/cpp/language/unqualified_lookup\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/unqualified_lookup</a>"}], "owner": {"reputation": 4314, "user_id": 2893600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b9627f68f303857fa6e1bc984033dc10?s=128&d=identicon&r=PG", "display_name": "jmlemetayer", "link": "https://stackoverflow.com/users/2893600/jmlemetayer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1542809437, "creation_date": 1542809437, "question_id": 53413941, "link": "https://stackoverflow.com/questions/53413941/using-a-template-function-in-an-anonymous-namespace", "title": "Using a template function in an anonymous namespace", "body": "<p>I am trying to use <a href=\"https://www.fluentcpp.com/posts/#strong-types\" rel=\"nofollow noreferrer\">Strong Types</a> and to add stream operator for them.</p>\n\n<p>In my source file I put all of these helpers in an anonymous namespace. One of these helpers is using a template stream operator (<code>utils::to_hex(T)</code>) defined in another header.</p>\n\n<pre><code>namespace { // Anonymous namespace\n\n// Example custom strong type\nusing custom_type = utils::StrongType&lt;std::uint32_t, struct Custom&gt;;\n\n// Stream operator for custom type\nstd::ostream &amp;operator&lt;&lt;(std::ostream &amp;_os, const custom_type &amp;_value)\n{\n    return (_os &lt;&lt; utils::to_hex(static_cast&lt;std::uint32_t&gt;(_value)));\n}\n\n}\n\nint main(void)\n{\n    custom_type c = 0xDEADBEEF;\n\n    std::cout &lt;&lt; c &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>The whole code: <a href=\"http://cpp.sh/2ln7q\" rel=\"nofollow noreferrer\">http://cpp.sh/2ln7q</a></p>\n\n<p>I cannot compile this code. I am stuck with:</p>\n\n<pre><code>test.cc: In function \u2018std::ostream&amp; {anonymous}::operator&lt;&lt;(std::ostream&amp;, const custom_type&amp;)\u2019:\ntest.cc:72:14: error: no match for \u2018operator&lt;&lt;\u2019 (operand types are \u2018std::ostream {aka std::basic_ostream&lt;char&gt;}\u2019 and \u2018utils::ToHex&lt;unsigned int&gt;\u2019)\n  return (_os &lt;&lt; utils::to_hex(static_cast&lt;std::uint32_t&gt;(_value)));\n</code></pre>\n\n<p>Using the <a href=\"http://cpp.sh/2ln7q\" rel=\"nofollow noreferrer\">cpp.sh</a> compiler I got:</p>\n\n<pre><code> In function 'std::ostream&amp; {anonymous}::operator&lt;&lt;(std::ostream&amp;, const custom_type&amp;)':\n73:65: error: cannot bind 'std::ostream {aka std::basic_ostream&lt;char&gt;}' lvalue to 'std::basic_ostream&lt;char&gt;&amp;&amp;'\nIn file included from /usr/include/c++/4.9/istream:39:0,\n                 from /usr/include/c++/4.9/sstream:38,\n                 from /usr/include/c++/4.9/iomanip:45,\n                 from 3:\n/usr/include/c++/4.9/ostream:602:5: note: initializing argument 1 of 'std::basic_ostream&lt;_CharT, _Traits&gt;&amp; std::operator&lt;&lt;(std::basic_ostream&lt;_CharT, _Traits&gt;&amp;&amp;, const _Tp&amp;) [with _CharT = char; _Traits = std::char_traits&lt;char&gt;; _Tp = utils::ToHex&lt;unsigned int&gt;]'\n     operator&lt;&lt;(basic_ostream&lt;_CharT, _Traits&gt;&amp;&amp; __os, const _Tp&amp; __x)\n</code></pre>\n\n<p>When I remove the anonymous namespace of if I use the <code>static</code> keyword everything is fine. </p>\n"}, {"tags": ["c++", "qt", "qevent"], "comments": [{"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 2, "creation_date": 1542809829, "post_id": 53413913, "comment_id": 93702559, "body": "If you already know the type you can safely use <code>static_cast</code> instead without checking the result against null pointer. This is faster approach."}, {"owner": {"reputation": 4338, "user_id": 3240681, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4sQMO.jpg?s=128&g=1", "display_name": "\u03b1\u03bb\u03b5\u03c7\u03bf\u03bb\u03c5\u03c4", "link": "https://stackoverflow.com/users/3240681/%ce%b1%ce%bb%ce%b5%cf%87%ce%bf%ce%bb%cf%85%cf%84"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1542810244, "post_id": 53413913, "comment_id": 93702802, "body": "@vahancho hence second checking is redundant, right?"}, {"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 1, "creation_date": 1542810587, "post_id": 53413913, "comment_id": 93702978, "body": "That&#39;s what I meant. And <code>static_cast</code> is more preferable in this case."}, {"owner": {"reputation": 4338, "user_id": 3240681, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4sQMO.jpg?s=128&g=1", "display_name": "\u03b1\u03bb\u03b5\u03c7\u03bf\u03bb\u03c5\u03c4", "link": "https://stackoverflow.com/users/3240681/%ce%b1%ce%bb%ce%b5%cf%87%ce%bf%ce%bb%cf%85%cf%84"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1542810879, "post_id": 53413913, "comment_id": 93703129, "body": "@vahancho maybe some reference to Qt documentation/implementation? Such info should be placed in answer area and accepted :)"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1542813364, "post_id": 53413913, "comment_id": 93704685, "body": "Have a look at Qt doc.: <a href=\"http://doc.qt.io/qt-5/eventsandfilters.html#event-filters\" rel=\"nofollow noreferrer\">Event Filters</a>. There you find an example which uses a <code>static_cast</code> like mentioned by @vahancho."}], "owner": {"reputation": 4338, "user_id": 3240681, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4sQMO.jpg?s=128&g=1", "display_name": "\u03b1\u03bb\u03b5\u03c7\u03bf\u03bb\u03c5\u03c4", "link": "https://stackoverflow.com/users/3240681/%ce%b1%ce%bb%ce%b5%cf%87%ce%bf%ce%bb%cf%85%cf%84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 225, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542809342, "creation_date": 1542809342, "question_id": 53413913, "link": "https://stackoverflow.com/questions/53413913/should-i-check-qevent-dynamic-cast-result-if-i-already-checked-event-type", "title": "Should I check QEvent dynamic_cast result if I already checked event-&gt;type()?", "body": "<p><code>QEvent</code> has a <a href=\"http://doc.qt.io/qt-5/qevent.html#type\" rel=\"nofollow noreferrer\"><code>type()</code></a> member function which returns the event type as enum value. Should I check <code>dynamic_cast</code> result for <code>QEvent*</code> if I already checked <code>event-&gt;type()</code>. E.g.</p>\n\n<pre><code>bool ClassName::eventFilter(QObject* obj, QEvent* event)\n{\n    if (event-&gt;type() == QEvent::KeyPress) \n    {\n        auto ke = dynamic_cast&lt;QKeyEvent*&gt;(event);\n        if (ke)                                     // &lt;----------- needed?\n        {\n            // ...\n        }\n    }\n    // ...\n}\n</code></pre>\n\n<p>Is <code>if (ke)</code> condition needed here? </p>\n"}, {"tags": ["c++", "design-patterns"], "comments": [{"owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "edited": false, "score": 6, "creation_date": 1542809357, "post_id": 53413869, "comment_id": 93702272, "body": "You&#39;re faced with a design pattern, called &quot;factory&quot;."}, {"owner": {"reputation": 28136, "user_id": 3906760, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/289d797f9cfa60788698c79e8bf25241?s=128&d=identicon&r=PG&f=1", "display_name": "MrTux", "link": "https://stackoverflow.com/users/3906760/mrtux"}, "edited": false, "score": 2, "creation_date": 1542809365, "post_id": 53413869, "comment_id": 93702277, "body": "See <a href=\"https://en.wikipedia.org/wiki/Factory_method_pattern\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Factory_method_pattern</a>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1542809400, "post_id": 53413869, "comment_id": 93702298, "body": "You&#39;re really asking about what problem the Factory pattern solves. It&#39;s simple if you know how to look at it: The code calling <code>MapFactory::CreateMap</code> needs to know <code>BaseMapServer</code> and the string <code>&quot;occupancy&quot;</code>, but it does <i>not</i> have to know <code>OccGridServer</code> to create one."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1542809401, "post_id": 53413869, "comment_id": 93702300, "body": "Inside <code>MapFactory</code>, <code>CreateMap</code> is a member function which returns a pointer to a <code>BaseFactory</code>. It is not a constructor."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1542809449, "post_id": 53413869, "comment_id": 93702328, "body": "It&#39;s a way of creating an object without knowing its exact type."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1542809491, "post_id": 53413869, "comment_id": 93702353, "body": "It is an interface declaration, completely hiding the implementation has many concrete advantages.  The factory is an implementation detail of the coding technique.  <a href=\"https://en.wikipedia.org/wiki/Interface-based_programming\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Interface-based_programming</a>"}], "answers": [{"tags": [], "owner": {"reputation": 592, "user_id": 6672815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6c8d74588b5dbf028aeed0e33b8ee5?s=128&d=identicon&r=PG&f=1", "display_name": "virgesmith", "link": "https://stackoverflow.com/users/6672815/virgesmith"}, "is_accepted": false, "score": 0, "last_activity_date": 1542809445, "creation_date": 1542809445, "answer_id": 53413946, "question_id": 53413869, "link": "https://stackoverflow.com/questions/53413869/what-is-the-purpose-of-having-such-complicated-c-class-design/53413946#53413946", "title": "What is the purpose of having such complicated C++ class design?", "body": "<p>Its a Factory pattern. See <a href=\"https://en.wikipedia.org/wiki/Factory_method_pattern\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Factory_method_pattern</a>. It looks like the current code only supports one implementation (<code>OccGridServer</code>), but more could be added at a future date. Conversely, if there's only ever likely to be one concrete implementation, then it's overdesign.</p>\n"}, {"comments": [{"owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "edited": false, "score": 1, "creation_date": 1542809643, "post_id": 53413976, "comment_id": 93702441, "body": "Ok I see, that is super clever and your way of explaining with the example actually helped me to understand better than reading on Wikipedia."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1542822394, "post_id": 53413976, "comment_id": 93709901, "body": "Imagine the code is in a shared library used by thousands of applications and a bug is found in it. Imagine further that fixing the bug requires adding a new data member to <code>OccGridServer</code>. This pattern means those thousands of applications don&#39;t have to be recompiled and redeployed, only the library does."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 5, "last_activity_date": 1542818993, "last_edit_date": 1542818993, "creation_date": 1542809520, "answer_id": 53413976, "question_id": 53413869, "link": "https://stackoverflow.com/questions/53413869/what-is-the-purpose-of-having-such-complicated-c-class-design/53413976#53413976", "title": "What is the purpose of having such complicated C++ class design?", "body": "<p>The <code>MapFactory</code> class is used to create the correct subclass instance of <code>BaseMapServer</code> based on the parameters passed to it.  </p>\n\n<p>In this particular case there is only one child class instance, but perhaps there are plans to add more.  Then when more are added the factory method can look something like this:</p>\n\n<pre><code>BaseMapServer *CreateMap(\n        const std::string &amp;map_type,\n        rclcpp::Node::SharedPtr node, const std::string &amp;file_name)\n    {\n        if (map_type == \"occupancy\") return new OccGridServer(node, file_name);\n        // create Type2Server\n        else if (map_type == \"type2\") return new Type2Server(node, file_name);   \n        // create Type3Server\n        else if (map_type == \"type3\") return new Type3Server(node, file_name);\n        else\n        {\n            RCLCPP_ERROR(node-&gt;get_logger(), \n                         \"map_factory.cpp 15: Cannot load map %s of type %s\", \n                         file_name.c_str(), map_type.c_str());\n            throw std::runtime_error(\"Map type not supported\")\n        }\n    }\n</code></pre>\n\n<p>This has the advantage that the caller doesn't need to know the exact subclass  being used, and in fact the underlying subclass could potentially change or even be replaced under the hood without the calling code needing to be modified.  The factory method internalizes this logic for you.</p>\n"}, {"tags": [], "owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "is_accepted": false, "score": 0, "last_activity_date": 1542810046, "creation_date": 1542810046, "answer_id": 53414128, "question_id": 53413869, "link": "https://stackoverflow.com/questions/53413869/what-is-the-purpose-of-having-such-complicated-c-class-design/53414128#53414128", "title": "What is the purpose of having such complicated C++ class design?", "body": "<p>This is example of the factory design pattern. The use case is this: there are several types of very similar classes that will be used in code. In this case, <code>OccGridServer</code> is the only one actually shown, but a generic explanation might reference hypothetical <code>Dog</code>, <code>Cat</code>, <code>Otter</code>, etc. classes. Because of their similarity, some polymorphism is desired: if they all inherit from a base class <code>Animal</code> they can share virtual class methods like <code>::genus</code>, <code>::species</code>, etc., and the derived classes can be pointed to or referred to with base class pointers/references. In your case, <code>OccGridServer</code> inherits from <code>BaseMapServer</code>; presumably there are other derived classes as well, and pointers/references.</p>\n\n<p>If you know which derived class is needed at compile time, you would normally just call its constructor. The point of the factory design pattern is to simplify selection of a derived class when the particular derived class is not known until runtime. Imagine that a user picks their favorite animal by selecting a button or typing in a name. This generally means that somewhere there's a big if/else block that maps from some type of I/O disambiguator (string, enum, etc.) to a particular derived class type, calling its constructor. It's useful to encapsulate this in a factory pattern, which can act like a named constructor that takes this disambiguator as a \"constructor\" parameter and finds the correct derived class to construct.</p>\n\n<p>Typically, by the way, <code>CreateMap</code> would be a static method of <code>BaseMapServer</code>. I don't see why a separate class for the factory function is needed in this case.</p>\n"}], "owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 1, "accepted_answer_id": 53413976, "answer_count": 3, "score": 11, "last_activity_date": 1542821771, "creation_date": 1542809193, "last_edit_date": 1542821771, "question_id": 53413869, "link": "https://stackoverflow.com/questions/53413869/what-is-the-purpose-of-having-such-complicated-c-class-design", "title": "What is the purpose of having such complicated C++ class design?", "body": "<p>I came across an open source C++ code and I got curious, why do people design the classes this way? </p>\n\n<p>So first things first, here is the Abstract class:</p>\n\n<pre><code>class BaseMapServer\n    {\n    public:\n        virtual ~BaseMapServer(){}\n\n        virtual void LoadMapInfoFromFile(const std::string &amp;file_name) = 0;\n        virtual void LoadMapFromFile(const std::string &amp;map_name) = 0;\n        virtual void PublishMap() = 0;\n        virtual void SetMap() = 0;\n        virtual void ConnectROS() = 0;\n    };\n</code></pre>\n\n<p>Nothing special here and having an abstract class can have several well understood reasons. So from this point, I thought maybe author wanted to share common features among other classes. So here is the next class, which is a seperate class but actually holds a pointer of type abstract class mentioned above (actual cpp file, other two classes are header files) :</p>\n\n<pre><code>class MapFactory\n{\n    BaseMapServer *CreateMap(\n            const std::string &amp;map_type,\n            rclcpp::Node::SharedPtr node, const std::string &amp;file_name)\n        {\n            if (map_type == \"occupancy\") return new OccGridServer(node, file_name);\n            else\n            {\n                RCLCPP_ERROR(node-&gt;get_logger(), \"map_factory.cpp 15: Cannot load map %s of type %s\", file_name.c_str(), map_type.c_str());\n                throw std::runtime_error(\"Map type not supported\")\n            }\n        }\n};\n</code></pre>\n\n<p>And now the interesting thing comes, here is the child class of the abstract class:</p>\n\n<pre><code>class OccGridServer : public BaseMapServer\n    {\n    public:\n        explicit OccGridServer(rclcpp::Node::SharedPtr node) : node_(node) {}\n        OccGridServer(rclcpp::Node::SharedPtr node, std::string file_name);\n        OccGridServer(){}\n        ~OccGridServer(){}\n\n        virtual void LoadMapInfoFromFile(const std::string &amp;file_name);\n        virtual void LoadMapFromFile(const std::string &amp;map_name);\n        virtual void PublishMap();\n        virtual void SetMap();\n        virtual void ConnectROS();\n\n    protected:\n        enum MapMode { TRINARY, SCALE, RAW };\n\n        // Info got from the YAML file\n        double origin_[3];\n        int negate_;\n        double occ_th_;\n        double free_th_;\n        double res_;\n        MapMode mode_ = TRINARY;\n        std::string frame_id_ = \"map\";\n        std::string map_name_;\n\n        // In order to do ROS2 stuff like creating a service we need a node:\n        rclcpp::Node::SharedPtr node_;\n\n        // A service to provide the occupancy grid map and the message with response:\n        rclcpp::Service&lt;nav_msgs::srv::GetMap&gt;::SharedPtr occ_service_;\n        nav_msgs::msg::OccupancyGrid map_msg_;\n\n        // Publish map periodically for the ROS1 via bridge:\n        rclcpp::TimerBase::SharedPtr timer_;\n    };\n</code></pre>\n\n<p>So what is the purpose of the <code>MapFactory</code> class? </p>\n\n<p>To be more specific - what is the advantage of creating a class which holds a pointer of type Abstract class <code>BaseMapServer</code> which is a constructor (I believe) and this weird constructor creates a memory for the new object called <code>OccGridServer</code> and returns it? I got so confused by only writing this. I really want to become a better C++ coder and I am desperate to know the secret behind these code designs. </p>\n"}, {"tags": ["c++", "fstream", "binaryfiles", "istream"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10316011"}, "edited": false, "score": 0, "creation_date": 1542810820, "post_id": 53413820, "comment_id": 93703108, "body": "As you have not provided a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> that we could try for ourselves, we are limited to your description. So what does &quot;it doesn&#39;t work&quot; mean? Do you get some error message? Something unexpected happens? (what is it?)"}, {"owner": {"reputation": 11, "user_id": 5650448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a656b06eb7c65661dd048cbcf5d6dd78?s=128&d=identicon&r=PG&f=1", "display_name": "happysadek", "link": "https://stackoverflow.com/users/5650448/happysadek"}, "edited": false, "score": 0, "creation_date": 1542811259, "post_id": 53413820, "comment_id": 93703358, "body": "Sorry for that. &#39;It doesn&#39;t work&#39; means that the bytes aren&#39;t replaced. I can check them for example in Hex Editor."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10316011"}, "edited": false, "score": 0, "creation_date": 1542811536, "post_id": 53413820, "comment_id": 93703509, "body": "Try adding error checking to the write part. Maybe the file is not actually writable? At least it would tell you which part is failing."}, {"owner": {"reputation": 11, "user_id": 5650448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a656b06eb7c65661dd048cbcf5d6dd78?s=128&d=identicon&r=PG&f=1", "display_name": "happysadek", "link": "https://stackoverflow.com/users/5650448/happysadek"}, "edited": false, "score": 0, "creation_date": 1542812457, "post_id": 53413820, "comment_id": 93704097, "body": "I hope my question is better now. How to add error checking? I have tried to check output.bad() but it returns false."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10316011"}, "edited": false, "score": 0, "creation_date": 1542812623, "post_id": 53413820, "comment_id": 93704203, "body": "Can an ofstream constructor fail? How does it indicate failure? Check for it. Can seekp fail? How does it... (etc.) To answer the Hows, look at the reference <a href=\"http://www.cplusplus.com/reference/fstream/ofstream/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/fstream/ofstream</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2457, "user_id": 467858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b6b92556de1237a88d764e56d993b04e?s=128&d=identicon&r=PG", "display_name": "LiMar", "link": "https://stackoverflow.com/users/467858/limar"}, "is_accepted": false, "score": 1, "last_activity_date": 1542880354, "creation_date": 1542880354, "answer_id": 53428167, "question_id": 53413820, "link": "https://stackoverflow.com/questions/53413820/c-replace-data-in-binary-file-with-fstream/53428167#53428167", "title": "C++ replace data in binary file with fstream", "body": "<p>This code will remove your file and put totally new contents in it.\nThe problem is in line</p>\n\n<pre><code>std::ofstream output(filename, std::ios::binary);\n</code></pre>\n\n<p>That's because the default open mode is <code>ios::out | ios::trunc</code> (See for ex.: <a href=\"http://people.scs.carleton.ca/~dehne/projects/cpp-doc/tutorial/tut6-1.html\" rel=\"nofollow noreferrer\">Input/Output with files</a>)\nWhich means file is being truncated to zero bytes. </p>\n\n<p>Then your seek() function extends him to the specified size (usually filling with zeroes) and finally <code>output.write()</code> writes the byte at the end.</p>\n\n<p><strong>In order to do what you want</strong> I had to specify the following ofstream flags: <code>std::ios::binary|std::ios::out|std::ios::in</code></p>\n\n<p>I cannot say currently for sure why the <code>std::ios::in</code>is needed, sorry...</p>\n"}], "owner": {"reputation": 11, "user_id": 5650448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a656b06eb7c65661dd048cbcf5d6dd78?s=128&d=identicon&r=PG&f=1", "display_name": "happysadek", "link": "https://stackoverflow.com/users/5650448/happysadek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1528, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1595235373, "creation_date": 1542809000, "last_edit_date": 1542811913, "question_id": 53413820, "link": "https://stackoverflow.com/questions/53413820/c-replace-data-in-binary-file-with-fstream", "title": "C++ replace data in binary file with fstream", "body": "<p>I try to replace data in binary file using C++ and fstream library. Is it possible to do that with this library?\nI would like to change one byte of file in address: 0xB07 to 1.</p>\n\n<p>I have written the following code snippet:</p>\n\n<pre><code>...\n\nint address = 0xB07;\nchar * toChange = new char('0');\n\nstd::ifstream input(filename, std::ios::binary);\ninput.seekg(address);\ninput.read(toChange, 1);\ninput.close();\n\n*toChange = (char)0x01;\n\nstd::ofstream output(filename, std::ios::binary);\noutput.seekp(address);\noutput.write(toChange, 1);\noutput.close();\n\n...\n</code></pre>\n\n<p>I have tried many versions of this code and I still can't understand why the byte doesn't change.</p>\n"}, {"tags": ["c++", "header-files"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1542808924, "post_id": 53413768, "comment_id": 93701999, "body": "Have a read through this nice reference: <a href=\"https://en.cppreference.com/w/cpp/header/limits\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/header/limits</a>"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 1, "creation_date": 1542809072, "post_id": 53413768, "comment_id": 93702105, "body": "Because we want access to the definitions within the file?  I&#39;m not sure I understand the question"}, {"owner": {"reputation": 25, "user_id": 5163576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QOfQ1.jpg?s=128&g=1", "display_name": "Tahir Musharraf", "link": "https://stackoverflow.com/users/5163576/tahir-musharraf"}, "edited": false, "score": 0, "creation_date": 1542809507, "post_id": 53413768, "comment_id": 93702361, "body": "Actually i have an assignment to explore the purpose of limits header file and also write a sample programme to use this. and i also i&#39;m new to c++ programming language. I have intermediate knowledge about so i&#39;m not new in programming but new in c++. I haven&#39;t read/study about loops, classes and functions in c++. I just need to know about limits header file?"}, {"owner": {"reputation": 25, "user_id": 5163576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QOfQ1.jpg?s=128&g=1", "display_name": "Tahir Musharraf", "link": "https://stackoverflow.com/users/5163576/tahir-musharraf"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1542810620, "post_id": 53413768, "comment_id": 93702999, "body": "@TimRandall help me."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1542811493, "post_id": 53413768, "comment_id": 93703484, "body": "The example in <a href=\"http://www.cplusplus.com/reference/limits/numeric_limits/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/limits/numeric_limits</a> is probably what you need to do."}, {"owner": {"reputation": 25, "user_id": 5163576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QOfQ1.jpg?s=128&g=1", "display_name": "Tahir Musharraf", "link": "https://stackoverflow.com/users/5163576/tahir-musharraf"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1542820231, "post_id": 53413768, "comment_id": 93708890, "body": "can you recommend me some video from YouTube. because i&#39;m not able to understand whats going on here. @drescherjm"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1542820335, "post_id": 53413768, "comment_id": 93708938, "body": "No. I don&#39;t watch many <code>c++</code> videos at all. I started programming in <code>c++</code> in early to mid 1990s. My <code>c++</code> skills come from a combination of several thousand+ page books and experience with writing code and reading other peoples code."}], "answers": [{"tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": false, "score": 0, "last_activity_date": 1542811908, "creation_date": 1542811908, "answer_id": 53414680, "question_id": 53413768, "link": "https://stackoverflow.com/questions/53413768/what-is-the-purpose-of-limits-header-files-in-c/53414680#53414680", "title": "What is the purpose of limits header files in C++", "body": "<h2>What is this header for?</h2>\n\n<p>If you take a look at <a href=\"http://www.cplusplus.com/reference/limits/\" rel=\"nofollow noreferrer\">the documentation</a>, it tells you about its purpose:</p>\n\n<blockquote>\n  <p>This header defines elements with the characteristics of arithmetic\n  types. More specifically, it defines a numeric_limits class template\n  and a specialization of it for each of the fundamental types:</p>\n</blockquote>\n\n<p>It then goes on and mentions two enums that concern <code>float</code> rounding and denormal <code>floats</code>, as well as an elaborate page on <code>std::numeric_limits</code>. This defines various operations, such as </p>\n\n<ul>\n<li>Checking the minimum and maximum value that it can hold</li>\n<li>Checking whether it is a signed type, so whether minus numbers are possible</li>\n<li>Checking whether it supports values such as <code>infinity</code> or <code>NaN</code></li>\n<li>Checking its rounding behavior</li>\n</ul>\n\n<blockquote>\n  <p>i have an assignment to explore the purpose of limits header file and\n  also write a sample programme to use this.</p>\n</blockquote>\n\n<p>You can find a nice example <a href=\"http://www.cplusplus.com/reference/limits/numeric_limits/\" rel=\"nofollow noreferrer\">here</a>. Run the example and think of how they can be useful. For instance, perhaps you might be writing a program that does math on  big numbers, so maybe it could use those functions to check if the limits are too low and warn the user. Or it could check if a floating point number adheres to the IEEE-754 standard, which might be important if you want to send the number to a different device.</p>\n"}, {"tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": true, "score": 1, "last_activity_date": 1542814918, "creation_date": 1542814918, "answer_id": 53415633, "question_id": 53413768, "link": "https://stackoverflow.com/questions/53413768/what-is-the-purpose-of-limits-header-files-in-c/53415633#53415633", "title": "What is the purpose of limits header files in C++", "body": "<h2>Why do we have this header?</h2>\n\n<p>In (most) other languages, the <em>precise</em> details of numeric types are defined by the language. In C++ there are some things left up to the implementation to define. <code>&lt;limits&gt;</code> provides a mechanism to inspect what the implementation has picked.</p>\n\n<p>For example, the standard only specifies that <code>int</code> be a numeric type able to represent <em>at least</em> the range <code>[-32767, 32767]</code>. My machine has an <code>int</code> that can represent <code>[-2147483647, 2147483648]</code>, and there are others that are even wider.</p>\n\n<p>A programmer may want their code to <em>fail to compile</em> on an implementation with particular choices. </p>\n\n<pre><code>int some_complex_algebra(int a, int b)\n{\n    static_assert(std::numeric_limits&lt;int&gt;::max() &gt;= 2147483648, \"This code assumes at least 32bit 2's complement int\");\n    // ...\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5163576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QOfQ1.jpg?s=128&g=1", "display_name": "Tahir Musharraf", "link": "https://stackoverflow.com/users/5163576/tahir-musharraf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 602, "favorite_count": 0, "closed_date": 1542838579, "accepted_answer_id": 53415633, "answer_count": 2, "score": -4, "last_activity_date": 1542814918, "creation_date": 1542808865, "last_edit_date": 1542809969, "question_id": 53413768, "link": "https://stackoverflow.com/questions/53413768/what-is-the-purpose-of-limits-header-files-in-c", "closed_reason": "Needs more focus", "title": "What is the purpose of limits header files in C++", "body": "<p>Why we use the header file called limits in c++. </p>\n\n<pre><code>#include&lt;limits&gt;\n</code></pre>\n\n<p>What are the uses and who we can use these.\nActually i have an assignment to explore the purpose of <code>limits</code> header file and also write a sample programme to use this. and i also i'm new to c++ programming language. I have intermediate knowledge about so i'm not new in programming but new in <code>c++</code>. I haven't read/study about loops, classes and functions in c++. I just need to know about <code>limits header file</code>?</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 10686130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52e141d8e91574ceb58f8f59612711c0?s=128&d=identicon&r=PG&f=1", "display_name": "ronald_s56", "link": "https://stackoverflow.com/users/10686130/ronald-s56"}, "edited": false, "score": 0, "creation_date": 1542813284, "post_id": 53414914, "comment_id": 93704639, "body": "That&#39;s great. My only question with this is if it was arbitrary binary data, ie potentially the values are not valid UTF-32 codepoints, but I still wanted to read as 32 bits at a time. It doesn&#39;t appear that that the locale&#39;s available support a &#39;dumb&#39; read 32bits at a time -&gt; <a href=\"https://en.cppreference.com/w/cpp/locale/locale\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/locale/locale</a>. Presumably std::codecvt will do some checking on the data."}], "tags": [], "owner": {"reputation": 522, "user_id": 5446052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e342174339c93b895a1cd3c0f57d905?s=128&d=identicon&r=PG&f=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/5446052/ulrich-eckhardt"}, "is_accepted": false, "score": 1, "last_activity_date": 1542812685, "creation_date": 1542812685, "answer_id": 53414914, "question_id": 53413661, "link": "https://stackoverflow.com/questions/53413661/stdifstream-read-32-bits-at-a-time/53414914#53414914", "title": "std::ifstream read 32 bits at a time", "body": "<p>Basically, your question boils down to two issues:</p>\n\n<ul>\n<li>What is the difference between a stringstream and a filestream?</li>\n<li>Why does a uint32_t-parametrized filestream still read single bytes?</li>\n</ul>\n\n<p>Both of these is explained with the so-called encoding, represented in streams by their <code>codecvt</code> (code conversion) facet. This facet is responsible for translating external bytes to an in-memory representation and vice-versa. The default facet will just convert one internal element to one external byte, hence the one-to-one relation between bytes and characters. In order to read the file in chunks of four bytes, you need to <code>imbue()</code> the stream with a UCS4 or UTF-32 codeconversion facet.</p>\n\n<p>For stringstreams, you don't specify an external sequence but an internal one, so no code conversion takes place.</p>\n"}], "owner": {"reputation": 141, "user_id": 10686130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52e141d8e91574ceb58f8f59612711c0?s=128&d=identicon&r=PG&f=1", "display_name": "ronald_s56", "link": "https://stackoverflow.com/users/10686130/ronald-s56"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1542813589, "creation_date": 1542808552, "last_edit_date": 1542812396, "question_id": 53413661, "link": "https://stackoverflow.com/questions/53413661/stdifstream-read-32-bits-at-a-time", "title": "std::ifstream read 32 bits at a time", "body": "<p>I want to know why, with a stringstream  the distance is as expected. The iterators iterate over 32 bits at a time, and I get 6. </p>\n\n<p>But with ifstream templated on char32_t I was expecting it to read 4 bytes at a time, but it seems inside streambuf it will read a single char, then just cast this to char32_t. So distance is 24.</p>\n\n<p>The file test.txt contains the same \"abcdef\" saved as utf32 little endian with no bom. available <a href=\"https://files.fm/down.php?cf&amp;i=43rrw2af&amp;n=test.txt\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>Why is this? Why does a std::basic_ifstream not get read 32 bits at a time when using a std::istreambuf_iterator. If this is just going to read a char perform a cast to char32_t, what is the point of the template parameter and how can I read a file 32 bits at a time with std::istreambuf_iterator.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n\nint main() {\n    std::basic_string&lt;char32_t&gt; str = U\"abcdef\";\n    std::basic_stringstream&lt;char32_t&gt; data{ str };\n\n    //std::basic_ifstream&lt;char32_t&gt; data(\"test.txt\", std::ios::binary);\n\n    size_t dist = std::distance(std::istreambuf_iterator&lt;char32_t&gt;(data), std::istreambuf_iterator&lt;char32_t&gt;());\n\n    std::cout &lt;&lt; dist &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "memory-management", "memory-leaks"], "comments": [{"owner": {"reputation": 1221, "user_id": 6610379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/869458e7097eb3f538a64ab550a0aa4b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil Brubaker", "link": "https://stackoverflow.com/users/6610379/phil-brubaker"}, "edited": false, "score": 0, "creation_date": 1542808688, "post_id": 53413647, "comment_id": 93701876, "body": "This should help: <a href=\"https://stackoverflow.com/a/461224/6610379\">stackoverflow.com/a/461224/6610379</a>"}, {"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 2, "creation_date": 1542808691, "post_id": 53413647, "comment_id": 93701878, "body": "It&#39;s not actually a memory leak - but your destructor is not <code>virtual</code>, so you are only calling the base class (<code>Shape</code>) destructor, the same as if you had forgotten to make <code>area()</code> <code>virtual</code>."}, {"owner": {"reputation": 55, "user_id": 3476567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/miMhZ.jpg?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3476567/tom"}, "edited": false, "score": 0, "creation_date": 1542809204, "post_id": 53413647, "comment_id": 93702183, "body": "Does it change anything adding destructor to the <code>Shape</code> class?"}, {"owner": {"reputation": 1124, "user_id": 1480104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab2ab26e771b47c29a6a7dd8bac239ec?s=128&d=identicon&r=PG", "display_name": "Artem Razin", "link": "https://stackoverflow.com/users/1480104/artem-razin"}, "edited": false, "score": 0, "creation_date": 1542883302, "post_id": 53413647, "comment_id": 93732269, "body": "As <code>Shape</code> doesn&#39;t have a virtual destuctor, <code>delete s1</code> calls <code>s1-&gt;Shape::~Shape()</code> and frees memory. If you checked the assembler code generated by a compiler you would see that exact address <code>Shape::~Shape()</code> is used for <code>call</code> instruction. If you had virtual destructor for <code>Shape</code>, you would see that the destructor address is retrieved from virtual methods table, i.e. choosen dynamically at runtime."}], "owner": {"reputation": 55, "user_id": 3476567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/miMhZ.jpg?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3476567/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "closed_date": 1542808655, "answer_count": 0, "score": 1, "last_activity_date": 1542808511, "creation_date": 1542808511, "question_id": 53413647, "link": "https://stackoverflow.com/questions/53413647/is-this-a-c-memory-leak", "closed_reason": "Duplicate", "title": "Is This A C++ Memory Leak?", "body": "<p>Trying to create c++ interface, testing now.    </p>\n\n<pre><code>/*\n * Simple interface tests\n*/\n\n\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Shape {\n    public:\n    virtual int area() = 0;\n};\n\nclass Square: public Shape {\n    public:\n    int side;\n    int height;\n\n    Square (int a, int b){\n        side = a;\n        height = b;\n    }\n\n    ~Square(){cout &lt;&lt; \"destructor\" &lt;&lt; endl;}\n\n    int area(){\n        return side * height;}\n};\n\n\nint main(int argc, char **argv){    \n    {\n    Shape * s1 = new Square(2, 2);\n    cout &lt;&lt; s1-&gt;area() &lt;&lt; endl;\n    delete s1;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Destructor seems not working and I'm deleting the pointer only. Is this a memory leak? If yes how to avoid it? Of course if I do:<br>\n<code>Square s1(2,2);</code><br>\nThen is fine, but I'm not sure what's happening when creating pointer to the abstract Shape class.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1542808116, "post_id": 53413488, "comment_id": 93701478, "body": "And then there&#39;s this <a href=\"https://stackoverflow.com/questions/224138/infinite-loops-top-or-bottom\" title=\"infinite loops top or bottom\">stackoverflow.com/questions/224138/infinite-loops-top-or-bot&zwnj;&#8203;tom</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1542808161, "post_id": 53413488, "comment_id": 93701515, "body": "Some people like to do <code>#define EVER ;;</code> and then have <code>for(EVER)</code> :)"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 3, "creation_date": 1542808193, "post_id": 53413488, "comment_id": 93701532, "body": "I remember seeing <code>while (true)</code> throwing a warning regarding conditional depending on constant expression (or something similar), while using some compiler, where <code>for (;;)</code> wouldn&#39;t do that."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 3, "creation_date": 1542808348, "post_id": 53413488, "comment_id": 93701657, "body": "Canonical: <a href=\"https://stackoverflow.com/questions/20186809/endless-loop-in-c-c\">stackoverflow.com/questions/20186809/endless-loop-in-c-c</a>"}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 3, "last_activity_date": 1542808183, "creation_date": 1542808183, "answer_id": 53413551, "question_id": 53413488, "link": "https://stackoverflow.com/questions/53413488/whats-the-purpose-of-for/53413551#53413551", "title": "What&#39;s the purpose of &quot;for(;;)&quot;", "body": "<p>No.</p>\n\n<p>It is personal taste only.</p>\n\n<p>It is entirely equivalent to a <code>while (true)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1542808266, "post_id": 53413560, "comment_id": 93701594, "body": "Interesting - presumably some &quot;condition always evaluates to true&quot; warning &quot;inherited&quot; from more complex expressions and not given a special case in the way that a totally empty condition (permissible only for a <code>for</code>) apparently was."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1542808285, "post_id": 53413560, "comment_id": 93701607, "body": "I&#39;m not sure what should constitute a bug fix for such a compiler"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1542808301, "post_id": 53413560, "comment_id": 93701625, "body": "This is a good historical perspective. If you add that the statements are semantically equivalent, QoI aside, I&#39;ll just delete my answer as redundant"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1542808938, "post_id": 53413560, "comment_id": 93702014, "body": "According to the accepted answer linked by Hans Passant in comments, the reason <code>for(;;)</code> is legal code is that the empty second expression is replaced by a nonzero constant. Presumably the compiler that makes that replacement assumes that it is intentional on the part of the programmer, which is why no diagnostic is issued."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1542809123, "post_id": 53413560, "comment_id": 93702131, "body": "@TimRandall: Methinks it&#39;s simpler than that: the &quot;expressions&quot; in the <code>for</code> loop (or whatever they are called these days), can be optionally present or absent leading to 8 different possibilities. Deciding on which combinations would yield warnings would have been tedious, particularly in the old days."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1542809289, "post_id": 53413560, "comment_id": 93702230, "body": "@Bathsheba could be. I can&#39;t see a significant difference between these theories, at this point in time."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 9, "last_activity_date": 1542808203, "creation_date": 1542808203, "answer_id": 53413560, "question_id": 53413488, "link": "https://stackoverflow.com/questions/53413488/whats-the-purpose-of-for/53413560#53413560", "title": "What&#39;s the purpose of &quot;for(;;)&quot;", "body": "<p>Older C++ compilers would not issue a warning for <code>for(;;)</code> but they would for <code>while(true)</code>. Ditto for C, but with <code>while(1)</code>.</p>\n\n<p>Thus the convention stuck.</p>\n"}], "owner": {"reputation": 6564, "user_id": 2109064, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/05bfc90904db2f3abb20860d6e56e562?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2109064/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 1, "closed_date": 1542815254, "accepted_answer_id": 53413560, "answer_count": 2, "score": 3, "last_activity_date": 1542808203, "creation_date": 1542808006, "question_id": 53413488, "link": "https://stackoverflow.com/questions/53413488/whats-the-purpose-of-for", "closed_reason": "Duplicate", "title": "What&#39;s the purpose of &quot;for(;;)&quot;", "body": "<p>In an old codebase, I found the following snippet:</p>\n\n<pre><code>for(;;){\n  // code that manipulates a vector 'vec'\n  if(vec.empty()) break;\n}\n</code></pre>\n\n<p>Is there any purpose or convention behind using <code>for(;;)</code> instead of <code>while(true)</code>, except for personal taste of the respective author?</p>\n"}, {"tags": ["c++", "loops", "for-loop"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1542808042, "post_id": 53413464, "comment_id": 93701436, "body": "Ad a new loop before the nested loop to print the spaces?"}, {"owner": {"reputation": 4505, "user_id": 1168733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ewxJ.jpg?s=128&g=1", "display_name": "Sigi", "link": "https://stackoverflow.com/users/1168733/sigi"}, "edited": false, "score": 0, "creation_date": 1542808070, "post_id": 53413464, "comment_id": 93701455, "body": "what &#39;bout  <code>cout &lt;&lt; &quot; &quot;;</code>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 4, "creation_date": 1542808209, "post_id": 53413464, "comment_id": 93701544, "body": "A picture of a screen that is rendering plain text? Really?"}, {"owner": {"reputation": 1156, "user_id": 229778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yipCl.png?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/229778/tim"}, "edited": false, "score": 0, "creation_date": 1542808297, "post_id": 53413464, "comment_id": 93701620, "body": "Homework? Show more work please. What have you tried? What are the results?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1542808673, "post_id": 53413464, "comment_id": 93701867, "body": "hint: <code>std::string spaces(n - r, &#39; &#39;); std::string stars(r, &#39;*&#39;);</code>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1542808923, "post_id": 53413464, "comment_id": 93701997, "body": "@Someprogrammerdude D&#39;oh!!"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1542808971, "post_id": 53413464, "comment_id": 93702032, "body": "@Quentin At least it&#39;s not as bad as <a href=\"https://thedailywtf.com/articles/Web_0_0x2e_1\" rel=\"nofollow noreferrer\">Web 0.1</a> (sorry for repost, accidentally remove first comment)."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1542809379, "post_id": 53413464, "comment_id": 93702285, "body": "@Quentin I thought it was cloth on the first sight."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1542815339, "post_id": 53413464, "comment_id": 93705883, "body": "You really ought to avoid <code>using namespace std</code> - it is a bad habit to get into, and <a href=\"/q/1452721\">can silently change the meaning of your program</a> when you&#39;re not expecting it.  Get used to using the namespace prefix (<code>std</code> is intentionally very short), or importing <i>just the names you need</i> into the <i>smallest reasonable scope</i>."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 10515311, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6eWLf7uUU80/AAAAAAAAAAI/AAAAAAAAACg/LK-mDc1MW-k/photo.jpg?sz=128", "display_name": "Sarah_Xx", "link": "https://stackoverflow.com/users/10515311/sarah-xx"}, "edited": false, "score": 0, "creation_date": 1542917865, "post_id": 53414130, "comment_id": 93748818, "body": "wow that is fascinating how did you analyze it? i really tried but couldn&#39;t is it because i am still a beginner or what"}], "tags": [], "owner": {"reputation": 375, "user_id": 5683152, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/d7Iy3.png?s=128&g=1", "display_name": "sstefan", "link": "https://stackoverflow.com/users/5683152/sstefan"}, "is_accepted": true, "score": 1, "last_activity_date": 1542810677, "last_edit_date": 1542810677, "creation_date": 1542810055, "answer_id": 53414130, "question_id": 53413464, "link": "https://stackoverflow.com/questions/53413464/how-to-add-space-to-the-following-star-pattern/53414130#53414130", "title": "how to add space to the following star pattern?", "body": "<p>Although comments suggest using <code>std::string</code>, I believe this was intended to be written using only loops. This works:</p>\n\n<pre><code>void printpattern(int n)\n{\n  // print first half.\n  for (int i = 0; i &lt; n; ++i) {\n    // print spaces\n    for (int r = n - i; r &gt; 0; --r)\n      std::cout &lt;&lt; ' ';\n\n    // print stars.\n    for (int j = i; j &gt; 0; --j) \n      std::cout &lt;&lt; '*';\n\n    std::cout &lt;&lt; '\\n';\n  }\n\n  /// print second half. No need to print spaces here.\n  for (int i = 1; i &lt;= n; ++i) {\n    for (int r = n - i; r &gt;= 0; --r) \n      std::cout &lt;&lt; '*';\n\n    std::cout &lt;&lt; '\\n';\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1542815962, "post_id": 53415624, "comment_id": 93706289, "body": "I want to be able to upvote this more than once. It&#39;s beautiful!"}], "tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": false, "score": 2, "last_activity_date": 1542817534, "last_edit_date": 1542817534, "creation_date": 1542814882, "answer_id": 53415624, "question_id": 53413464, "link": "https://stackoverflow.com/questions/53413464/how-to-add-space-to-the-following-star-pattern/53415624#53415624", "title": "how to add space to the following star pattern?", "body": "<p>If one is afraid of using loops such thingies can of course always be solved with recursion and a little math:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid pattern(int n, int p = 0)\n{   \n    if (!n) return;\n    if (!p) { pattern(2 * n * n - n, n); return; }\n    int k = --n / p, o = n % p + 1, t = o - (p - k);\n    std::cout.put(\" *\"[k &gt;= p &amp;&amp; t &lt; p || k &lt; p &amp;&amp; t &gt;= 0]);\n    --o || std::cout.put('\\n');\n    pattern(n, p);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 1, "last_activity_date": 1542818189, "last_edit_date": 1542818189, "creation_date": 1542815958, "answer_id": 53415954, "question_id": 53413464, "link": "https://stackoverflow.com/questions/53413464/how-to-add-space-to-the-following-star-pattern/53415954#53415954", "title": "how to add space to the following star pattern?", "body": "<p>It's easier to do this by composing a longer string and using a sliding view.</p>\n\n<p>That's pretty straightforward in C++:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;string_view&gt;\n\nvoid printpattern(std::size_t n)\n{\n    const auto s = std::string(n, ' ') + std::string(n, '*') + std::string(n, ' ');\n    for (std::size_t i = 1;  i &lt; n*2;  ++i)\n        std::cout &lt;&lt; std::string_view(s.data()+i, n) &lt;&lt; '\\n';\n}\n\nint main()\n{\n    printpattern(5);\n}\n</code></pre>\n\n<p>You could of course make the space padding be of length <code>n-1</code> on both sides, and use a more conventional loop starting i at zero:</p>\n\n<pre><code>    const auto s = std::string(n - 1, ' ') + std::string(n, '*')\n                 + std::string(n-1, ' ');\n    for (std::size_t i = 0;  i &lt; n * 2 - 1;  ++i)\n</code></pre>\n\n<p>It's up to you whether saving two characters of temporary string is worthwhile.</p>\n"}], "owner": {"reputation": 125, "user_id": 10515311, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6eWLf7uUU80/AAAAAAAAAAI/AAAAAAAAACg/LK-mDc1MW-k/photo.jpg?sz=128", "display_name": "Sarah_Xx", "link": "https://stackoverflow.com/users/10515311/sarah-xx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 755, "favorite_count": 0, "accepted_answer_id": 53414130, "answer_count": 3, "score": -2, "last_activity_date": 1542818189, "creation_date": 1542807905, "last_edit_date": 1542809324, "question_id": 53413464, "link": "https://stackoverflow.com/questions/53413464/how-to-add-space-to-the-following-star-pattern", "title": "how to add space to the following star pattern?", "body": "<p>How is it possible to print the following pattern?</p>\n\n<pre><code>    *\n   **\n  ***\n ****\n*****\n****\n***\n**\n*\n</code></pre>\n\n<p>How can we add the spaces during the first half of the pattern?\nI only managed to get the second half of the pattern right:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nvoid printpattern(int n)\n{\n    for (int r = 0; r &lt;= n; r++)\n    {\n        for (int z = 0; z &lt;= r; z++) {\n            cout &lt;&lt; \"*\";\n        }\n\n        cout &lt;&lt; endl;\n    }\n}\n\nint main()\n{\n    int n = 5;\n    printpattern(n);\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1542807938, "post_id": 53413414, "comment_id": 93701370, "body": "Don&#39;t attempt to &quot;fitting them into a char[]&quot;, use <a href=\"https://en.cppreference.com/w/cpp/string/basic_string\" rel=\"nofollow noreferrer\"><code>std::string</code></a> instead. Using that and <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\"><code>std::getline</code></a> it becomes very easy to read the file."}, {"owner": {"reputation": 21, "user_id": 10686068, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156903412269489/picture?type=large", "display_name": "Pieee", "link": "https://stackoverflow.com/users/10686068/pieee"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1542808438, "post_id": 53413414, "comment_id": 93701708, "body": "but i do need to compare them letter by letter from char[10] to char[x] to get the final result?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1542808768, "post_id": 53413414, "comment_id": 93701918, "body": "That&#39;s still possible."}, {"owner": {"reputation": 21, "user_id": 10686068, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156903412269489/picture?type=large", "display_name": "Pieee", "link": "https://stackoverflow.com/users/10686068/pieee"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1542810434, "post_id": 53413414, "comment_id": 93702903, "body": "i know how get line works, while (getline(data,output,&#39;/n&#39;) then how do i take the 10th character to compare with the 10th character of the second line?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1542810730, "post_id": 53413414, "comment_id": 93703059, "body": "<code>std::string</code> has a <code>[]</code> operator, that can be used just like for an array. So read the first line separately and save it. Then use e.g. <code>current_line[10] == first_line[10]</code>."}], "owner": {"reputation": 21, "user_id": 10686068, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156903412269489/picture?type=large", "display_name": "Pieee", "link": "https://stackoverflow.com/users/10686068/pieee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1542807766, "creation_date": 1542807766, "question_id": 53413414, "link": "https://stackoverflow.com/questions/53413414/fstream-txt-and-putting-it-into-a-char-array-to-compare-with-another-string", "title": "fstream .txt and putting it into a char array to compare with another string", "body": "<p>First of all Im new to c++, currently have a data file which is .txt,first string is the answer to the questions, example ABBCACBB, second string started with student ID space and the answer.</p>\n\n<p>example of .txt</p>\n\n<pre><code>'         TFFTFFTTTTFFTFTFTFTT'\n'ABC54301 TFTFTFTT TFTFTFFTTFT'\n'ABC54302 TTTFFFTT TFTFTFFTTFT'\n</code></pre>\n\n<p>I have trouble fitting them into a char[] and comparing.\nanyone can guide me which kind of method i can use to compare them and output should be similar like this:</p>\n\n<p>example of output \\n</p>\n\n<pre><code>'         TFFTFFTTTTFFTFTFTFTT'\n'ABC54301 TFTFTFTT TFTFTFFTTFT   14/20 80% A+'\n'ABC54302 TTTFFFTT TFTFTFFTTFT   13/20 75% B+' \n</code></pre>\n\n<p>Thank you and sorry for the trouble.</p>\n\n<p>btw my data.txt got about 150 entries.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 4, "creation_date": 1542807813, "post_id": 53413335, "comment_id": 93701290, "body": "Interesting observation.  I&#39;d venture a guess that if you delve into operator overloading, then this type of usage might make sense.  Which would explain why it&#39;s part of C++ but not C."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1542808043, "post_id": 53413335, "comment_id": 93701437, "body": "related/dupe: <a href=\"https://stackoverflow.com/questions/371503/why-is-i-considered-an-l-value-but-i-is-not\" title=\"why is i considered an l value but i is not\">stackoverflow.com/questions/371503/&hellip;</a>.  I think the top answer has the best reasoning I&#39;ve seen.  IT wasn&#39;t possible to do this in C since C doesn&#39;t have references but C++ does so it would be a natural extension."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 2, "creation_date": 1542808151, "post_id": 53413335, "comment_id": 93701506, "body": "I have never seen &quot;locator value&quot; before, and suspect it&#39;s a backronym. As far as I know, l-value and r-value originally referred to the left and right side of an assignment expression."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 1, "creation_date": 1542808254, "post_id": 53413335, "comment_id": 93701586, "body": "@TimRandall It&#39;s actually in the C99 standard, which surprised me."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1542808342, "post_id": 53413335, "comment_id": 93701653, "body": "@NathanOliver is there a corresponding &quot;meaning&quot; for r-value?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1542808460, "post_id": 53413335, "comment_id": 93701718, "body": "In C99 <i>value of an expression</i>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1542811171, "post_id": 53413335, "comment_id": 93703297, "body": "This is definitely a dupe but I can&#39;t find the canonical one."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1542812627, "post_id": 53413335, "comment_id": 93704205, "body": "@ptr_user7813604 If not even veteran users can find it, then we clearly can&#39;t blame you for not finding it either. The SO duplicate system isn&#39;t great."}], "answers": [{"comments": [{"owner": {"reputation": 1095, "user_id": 7813604, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c05e209ba1c9aecc893a588b77b5d82f?s=128&d=identicon&r=PG&f=1", "display_name": "Kindred", "link": "https://stackoverflow.com/users/7813604/kindred"}, "edited": false, "score": 0, "creation_date": 1542809042, "post_id": 53413512, "comment_id": 93702086, "body": "So principle of least privilege saves the day right? Allowing it to be an lvalue on primitive type doesn&#39;t cause any trouble. C is the best, I knew it. (not to offend, C++ is also the best :))"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1542809182, "post_id": 53413512, "comment_id": 93702163, "body": "I&#39;m not buying it.  As far as I can tell, C++ could have the same rule as C and still implement overloaded <code>++</code> operators the same way.  It affects how you can <i>use</i> the result, not necessarily how you must <i>compute</i> the result."}], "tags": [], "owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "is_accepted": true, "score": 7, "last_activity_date": 1542808058, "creation_date": 1542808058, "answer_id": 53413512, "question_id": 53413335, "link": "https://stackoverflow.com/questions/53413335/differences-between-prefix-increment-operator-in-c-and-c/53413512#53413512", "title": "Differences between prefix-increment operator in C and C++", "body": "<p>In C++, prefix <code>++</code> giving lvalue is actually very natural. </p>\n\n<p>Because C++ has operator overloading. For most iterators of potentially complicated type, the prefix <code>++</code> returns the lvalue of the iterator itself.</p>\n\n<p>Thus for generic programming, it would be inconvenient to make fundamental type a special case.</p>\n\n<p>For example;</p>\n\n<pre><code>auto &amp;iter = ++old_iter;\n</code></pre>\n\n<p>wouldn't work if prefix increment of pointer gives an rvalue.</p>\n"}], "owner": {"reputation": 1095, "user_id": 7813604, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c05e209ba1c9aecc893a588b77b5d82f?s=128&d=identicon&r=PG&f=1", "display_name": "Kindred", "link": "https://stackoverflow.com/users/7813604/kindred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 53413512, "answer_count": 1, "score": 7, "last_activity_date": 1542812664, "creation_date": 1542807560, "last_edit_date": 1542812664, "question_id": 53413335, "link": "https://stackoverflow.com/questions/53413335/differences-between-prefix-increment-operator-in-c-and-c", "title": "Differences between prefix-increment operator in C and C++", "body": "<p>I just read the <a href=\"https://en.cppreference.com/w/c/language/operator_incdec\" rel=\"nofollow noreferrer\">C reference about prefix increment operator</a> and realized that the result of prefix increment operator are not lvalue, but it's surprising that it is lvalue in C++. After that I read <a href=\"https://stackoverflow.com/a/371669/7813604\">this answer</a> which explaining why it's a lvalue, but I don't understand it:</p>\n\n<blockquote>\n  <p>(Line 3): <em>[\"] it appears that it is so you can take its address or assign to a reference. [.\"]</em></p>\n</blockquote>\n\n<p>and an example follows:</p>\n\n<blockquote>\n<pre><code>int i;\nextern void f (int* p);\n\nf (&amp;++i);   /* Would be illegal C, but C programmers\n              havent missed this feature */\n...\n</code></pre>\n</blockquote>\n\n<p>So what's the merit of allowing this? Is the only purpose of this that incrementing <code>i</code> in global region is illegal? If this is the only reason I would consider this be a remedy for a defect in C that cannot/hard to be resolved, or the program should probably be rewritten for the sake of readability, right?</p>\n\n<p>btw I don't understand why lvalue is also called \"locator value\", I've read <a href=\"https://msdn.microsoft.com/en-us/library/bkbs2cds.aspx\" rel=\"nofollow noreferrer\">this - line 4</a> but locator is vague for me. What's a locator, is it a pointer something?</p>\n\n<p><strong>EDIT</strong>: For the sake of your precious time reading about wth is locator value, here is my <em>homemade backronym</em>:</p>\n\n<ul>\n<li>lvalue: location value, you know the location of it.</li>\n<li>rvalue: read value, you can only read the value.</li>\n</ul>\n\n<p>don't blame me if anything gone wrong.</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "asynchronous"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1542807111, "post_id": 53413092, "comment_id": 93700860, "body": "Create a new <code>std::thread</code>, a mutex, a condition variable, and a <code>bool</code> flag. The thread locks the mutex uses wait_for() to wait 1 second on a condition variable, check the flag, call your function if it&#39;s not set, then try again. When you no longer need this to happen, lock the mutex, set the flag, notify the condition variable, and <code>join()</code> your thread. For extra credit, check the flag before and after waiting on the condition variable. Mission accomplished."}, {"owner": {"reputation": 71, "user_id": 4915364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tct5k.jpg?s=128&g=1", "display_name": "ambdere", "link": "https://stackoverflow.com/users/4915364/ambdere"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1542809474, "post_id": 53413092, "comment_id": 93702343, "body": "@SamVarshavchik thank you! I will try to implement a solution like the one you are suggesting for I want to master thread locks with mutexes and condition variables"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 4915364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tct5k.jpg?s=128&g=1", "display_name": "ambdere", "link": "https://stackoverflow.com/users/4915364/ambdere"}, "edited": false, "score": 1, "creation_date": 1542808633, "post_id": 53413288, "comment_id": 93701839, "body": "Thank you! This is what I was looking for. I already wrote something like this but I forgot the existence of detach so I was able to call the fuction every second only in the main thread."}], "tags": [], "owner": {"reputation": 21755, "user_id": 149818, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2a2cc0bea23b5e604a252f0f3f0456aa?s=128&d=identicon&r=PG", "display_name": "Dewfy", "link": "https://stackoverflow.com/users/149818/dewfy"}, "is_accepted": true, "score": 2, "last_activity_date": 1542807425, "creation_date": 1542807425, "answer_id": 53413288, "question_id": 53413092, "link": "https://stackoverflow.com/questions/53413092/c-run-asynch-function-every-second/53413288#53413288", "title": "C++ run asynch function every second", "body": "<p>Using <code>std::future</code> suppose that your code executed once and you get some result in the future. So it is not your case. \nTimer that you looking for may be implemented as stand-alone thread with infinite loop that periodically invoke your functor. Please look at this decision: \n<a href=\"https://stackoverflow.com/a/30425945/149818\">https://stackoverflow.com/a/30425945/149818</a> </p>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1542808210, "post_id": 53413430, "comment_id": 93701546, "body": "This does not show how to fire off a function every second (not the down voter)"}, {"owner": {"reputation": 1147, "user_id": 8874817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40ae7c9690551846e59d73bb4ed01c7?s=128&d=identicon&r=PG&f=1", "display_name": "Detonar", "link": "https://stackoverflow.com/users/8874817/detonar"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1542808340, "post_id": 53413430, "comment_id": 93701651, "body": "@NathanOliver  - I thought sleeping one second would be trivial. However, i added it now to make it more obvious."}], "tags": [], "owner": {"reputation": 1147, "user_id": 8874817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40ae7c9690551846e59d73bb4ed01c7?s=128&d=identicon&r=PG&f=1", "display_name": "Detonar", "link": "https://stackoverflow.com/users/8874817/detonar"}, "is_accepted": false, "score": 0, "last_activity_date": 1542808217, "last_edit_date": 1542808217, "creation_date": 1542807815, "answer_id": 53413430, "question_id": 53413092, "link": "https://stackoverflow.com/questions/53413092/c-run-asynch-function-every-second/53413430#53413430", "title": "C++ run asynch function every second", "body": "<p>One way ist <code>std::thread</code>. It is used to run another function asynchronous. Once started it finishes after returning from the function you gave it so you have to use a loop to control it.</p>\n\n<p>To prevent race conditions i usually use a <code>std::atomic</code> variable to control that loop.</p>\n\n<p>If the thread object can be called from multiple parallel threads you sould protect it with a mutex to prevent multiple parallel accesses.</p>\n\n<p>One example implementation could look like this:</p>\n\n<pre><code>class MyParallelJob\n{\nprivate:\n    std::thread* _thread = nullptr;\n    std::atomic&lt;bool&gt; _threadRunning = false;\n\npublic:\n    void startThread()\n    {\n        if(_thread == nullptr) // This condition prevents the thread from being started twice.\n        {\n            _threadRunning = true; // Set thread loop condition to true\n            _thread = new std::thread(parallel, this); // Create thread\n        }\n    }\n\n    void stopThread()\n    {\n        if(_thread != nullptr) // Prevents from stopping an stopped thread\n        {\n            _threadRunning = false; // Set thread loop condition to false\n            _thread.join(); // Wait for thread to finish\n            delete _thread; // Delete thread\n            _thread = nullptr; // Set thread pointer to nullptr\n        }\n    }\n\n    void parallel() // Function valled by thread\n    {\n        while(_threadRunning == true) // While thread loop condition variable is true(=&gt; stopThread() not called)...\n        {\n            //Asynchronous jobs here. (eg. function call)\n            sleep(1); // Sleep one second\n        }\n\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 4915364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tct5k.jpg?s=128&g=1", "display_name": "ambdere", "link": "https://stackoverflow.com/users/4915364/ambdere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1582, "favorite_count": 0, "accepted_answer_id": 53413288, "answer_count": 2, "score": 1, "last_activity_date": 1542808217, "creation_date": 1542806835, "question_id": 53413092, "link": "https://stackoverflow.com/questions/53413092/c-run-asynch-function-every-second", "title": "C++ run asynch function every second", "body": "<p>I am developing a C++ application using Qt and I need to run a function asynchronously every second.</p>\n\n<p>The application works this way:</p>\n\n<ul>\n<li>the user start a functionallity;</li>\n<li>the application call the specific function asynchronously letting the user doing something else in the meantime;</li>\n<li>when the user stops the functionallity, the application stops calling the function.</li>\n</ul>\n\n<p>For other functions I used Qt integrated SLOTS and SIGNALS, like this:</p>\n\n<pre><code>connect(timer, SIGNAL(timeout()), this, SLOT(updateView()));\ntimer-&gt;start(200);\n</code></pre>\n\n<p>but for this particular function I wanted to use only C++ functionallity like <em>thread, mutex, future, promise and asynch</em>.</p>\n\n<p>I tried something like this:</p>\n\n<pre><code>if(cmd == start) {\n    std::future&lt;void&gt; fn = async(std::launch::async, [](){\n    // some code here\n });\n}\n</code></pre>\n\n<p>This way, every time the user clicks <em>start</em> the application calls the lambda function.</p>\n\n<p>Now I want that function to be called every second until the user clicks <em>stop</em> without avoiding him to do something else in the meantime.</p>\n\n<p>Can someone help me? </p>\n"}, {"tags": ["c++", "arduino"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1542809840, "post_id": 53413090, "comment_id": 93702566, "body": "<code>isn&#39;t efficient</code>. This is the most efficient method, you can only get slower."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1542809842, "post_id": 53413090, "comment_id": 93702570, "body": "Does the order of the output matter? Is it okay to output <code>0</code> for false and <code>1</code> for true for bool sensors?"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1542809853, "post_id": 53413090, "comment_id": 93702574, "body": "&quot;This isn&#39;t possible as I&#39;m using both <code>int</code> and <code>bool</code> variables.&quot; -- <code>bool</code> is an integer type that can be stored in an integer array. What is the problem; do you need to store the value as a <code>bool</code>? Do you need to print the value as <code>&quot;true&quot;</code> or <code>&quot;false&quot;</code> for <code>bool</code> values? More detail needed, and the question needs narrowing with &quot;most efficient possible way&quot;. Most efficient in what way? Speed of execution? Lines of code? Memory usage?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1542812469, "post_id": 53413090, "comment_id": 93704108, "body": "What isn&#39;t efficient? Even a slowpoke AVR executes thousands of times faster than the RS-232. The real bottleneck here is the blocking Ardunio API. If it&#39;s too slow for your purposes, then maybe pick a MCU from this millennium, maybe even one with DMA, then write the code yourself."}], "answers": [{"comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1542809815, "post_id": 53413784, "comment_id": 93702548, "body": "why <code>strcpy(p.descr, str[i]); printf(&quot;%s&quot;... p.descr)</code> when you can just <code>sprintf(&quot;%s&quot; str[i])</code> ?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1542809923, "post_id": 53413784, "comment_id": 93702617, "body": "@KamilCuk - Ummm.  I don&#39;t know.  Good catch :)  (i&#39;ll fix that)  Thanks."}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 3, "last_activity_date": 1542811130, "last_edit_date": 1542811130, "creation_date": 1542808907, "answer_id": 53413784, "question_id": 53413090, "link": "https://stackoverflow.com/questions/53413090/most-efficient-way-of-printing-different-types-from-the-same-array/53413784#53413784", "title": "Most efficient way of printing different types (from the same array?)", "body": "<p>Sequential constructs in code are often the most efficient in terms of speed.  If you are looking for improvements in readability (eg, how many lines of code) then looping will help, but likely reduce efficiency in other ways.  That said, to reduce number of lines, say in a loop...</p>\n\n<p>Use a combination of <code>enum</code>, <code>const char</code> array and <code>struct</code>.   (struct is optional here, but something I often use for readability when working with a large number of members) </p>\n\n<p>I do not have your environment, but for illustration using ANSI C, the following shows how enumerated values can tie string descriptions together with measurement values into the same struct instance, allowing results to be  reported in a loop:</p>\n\n<pre><code>enum {\n    FLAME_SENSOR,    // enumerated from 0 to max_sensor\n    DISTANCE_SENSOR,\n    MOTION_SENSOR,\n    TOUCH_SENSOR,\n    SOUND_SENSOR,\n    // add more sensors???\n    MAX_SENSOR\n};\n\ntypedef struct { // optional struct\n    int val;\n    char descr[20];\n}PARAM;\n\nconst char str[MAX_SENSOR][20] = {\"flame\",\"distance\",\"motion\",\"touch\",\"noise\"};\n\n//simulation prototype    \nint analogRead(int type); \n\nint main(void)\n{\n    int i;\n    PARAM p;\n    char buf[20];\n    int result = 0;\n\n    for(i=0;i&lt;MAX_SENSOR;i++)\n    {\n        p.val = analogRead(i);// for use with struct\n        result = analogRead(i);//for use without struct\n        if(p.val /*(or result)*/ == some error)\n        {\n            //handle error\n        }\n        strcpy(p.descr, str[i]);//for use without struct\n        sprintf(buf, \"%s: %d\\n\", p.descr, p.val);//for use with struct\n        sprintf(buf, \"%s: %d\\n\", str[i], result);//for use without struct\n        printf(buf);\n        sleep(10);  //10ms delay, For simulation only, to allow clock tick for rand() function \n    }           \n    return 0;\n}\n\n//simple simulation of  analog read function\nint analogRead(int type)\n{\n    int meas = 0;\n    srand(clock());\n    switch(type)  {\n        case FLAME_SENSOR:\n            // meas = read flame sensor instrument\n            meas = rand()%10;\n            break;\n        case DISTANCE_SENSOR:\n            // meas = read dist sensor instrument\n            meas = rand()%10;\n            break;\n        case MOTION_SENSOR:\n            // meas = read motion sensor instrument\n            meas = rand()%10;\n            break;\n        case TOUCH_SENSOR:\n            // meas = read touch sensor instrument\n            meas = rand()%10;\n            break;\n        case SOUND_SENSOR:\n            // meas = read sound sensor instrument\n            meas = rand()%10;\n            break;\n        // add more case statements ???\n        default:\n            meas = some error\n            break;\n    }\n    return meas;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": false, "score": 2, "last_activity_date": 1542810286, "creation_date": 1542810286, "answer_id": 53414211, "question_id": 53413090, "link": "https://stackoverflow.com/questions/53413090/most-efficient-way-of-printing-different-types-from-the-same-array/53414211#53414211", "title": "Most efficient way of printing different types (from the same array?)", "body": "<p>From <a href=\"https://www.arduino.cc/reference/en/language/functions/analog-io/analogread/\" rel=\"nofollow noreferrer\">arduino reference</a>:</p>\n\n<pre><code>&gt; analogRead()\n&gt;  \n&gt; Returns  \n&gt; int(0 to 1023)\n</code></pre>\n\n<p>So you are getting integers anyway.</p>\n\n<p>Usually I create a temporary structure will all the different data and context I need to iterate through. Then a simple loop is sufficient.</p>\n\n<pre><code>struct data_s {\n   const char *desc;\n   int pin;\n   enum data_type_s {\n      DATA_INT,\n      DATA_BOOL,\n   } data_type;\n} const datas[] = {\n     { SOUND_SENSOR, \"sound\", DATA_INT },\n     { DISTANCE_SENSOR, \"distance\", DATA_INT },\n     { SOMEBOOLEAN_SENSOR, \"someboolean\", DATA_BOOL },\n      ... and so on ...\n};\n\nfor (size_t i = 0; i &lt; sizeof(datas)/sizeof(*datas); ++i) {\n     Serial.print(data[i].desc);\n     Serial.print(\";\");\n     const int readed_value = analogRead(data[i].pin);\n     switch (data[i].type) {\n     case DATA_BOOL:\n          // custom int-&gt;bool conversion\n          Serial.print(value ? \"true\" : \"false\");\n          break;\n     case DATA_INT:\n          Serial.print(value);\n          break;\n     }\n     Serial.print(\"\\n\");\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 3287470, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dcf86301add9dcffb825a0aa9934c030?s=128&d=identicon&r=PG&f=1", "display_name": "user3287470", "link": "https://stackoverflow.com/users/3287470/user3287470"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1542813907, "creation_date": 1542806831, "last_edit_date": 1542813907, "question_id": 53413090, "link": "https://stackoverflow.com/questions/53413090/most-efficient-way-of-printing-different-types-from-the-same-array", "title": "Most efficient way of printing different types (from the same array?)", "body": "<p>I have a small sketch that reads a wide variety of sensors, which all come down to either an integer or boolean value.</p>\n\n<p>Every loop I want to print them as following:</p>\n\n<blockquote>\n  <p>\"variableName; variableValue\"\n  (which would give for example \"distanceSenso; 432\")</p>\n</blockquote>\n\n<p>Currently this looks like </p>\n\n<pre><code> int flame, distance, &lt;etc&gt;\n bool flame, touch;\n    void loop(){\n      noise = analogRead(SOUND_SENSOR);\n      distance = analogRead(DISTANCE_SENSOR);\n      ..etc..       \n          Serial.print(\"flame;\");\n          Serial.println(flame);\n          Serial.print(\"distance;\");\n          Serial.println(dist);\n          Serial.print(\"motion;\");\n          Serial.println(motion);\n          Serial.print(\"touch;\");\n          Serial.println(touch);\n          Serial.print(\"noise;\");\n          Serial.println(noise);\n          &lt;etc for many more sensors&gt;\n    }\n</code></pre>\n\n<p>This works fine but isn't efficient. I would like to add each variable to an array and simply update the value each loop. This would allow be to use a simple for loop that prints each array element in a <code>Serial.println</code>.</p>\n\n<p>However, this isn't possible as I'm using both int and bool variables. I could make two separate arrays or forget about the for loop and keep my current approach, but I'm learning to code and would like to know what the most efficient way would be to do this.</p>\n\n<p>So, my question: how could I print each variable in said syntax in the most efficient possible way?</p>\n"}, {"tags": ["c++", "pointers", "wxwidgets"], "comments": [{"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1542821316, "post_id": 53412892, "comment_id": 93709416, "body": "<a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">FAQ C++ books</a>"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 9325993, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GXjoIzZN6bY/AAAAAAAAAAI/AAAAAAAAALk/kiSCAUKQbz0/photo.jpg?sz=128", "display_name": "BrainTrance", "link": "https://stackoverflow.com/users/9325993/braintrance"}, "edited": false, "score": 0, "creation_date": 1542839220, "post_id": 53413010, "comment_id": 93717018, "body": "Wow, C++ seems so different from other programming languages. &quot;-&gt;&quot; is really unprecedented for me. Thanks for this useful clarification."}], "tags": [], "owner": {"reputation": 1147, "user_id": 8874817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40ae7c9690551846e59d73bb4ed01c7?s=128&d=identicon&r=PG&f=1", "display_name": "Detonar", "link": "https://stackoverflow.com/users/8874817/detonar"}, "is_accepted": true, "score": 1, "last_activity_date": 1545120706, "last_edit_date": 1545120706, "creation_date": 1542806563, "answer_id": 53413010, "question_id": 53412892, "link": "https://stackoverflow.com/questions/53412892/get-entry-text-from-wxtextctrl-in-c/53413010#53413010", "title": "Get entry text from wxTextCtrl in C++", "body": "<p><code>TextCtrl1</code> seems to be a pointer to an object of class <code>wxTextCtrl</code>(also <code>wxTextCtrl*</code>). By using the arrow operator <code>-&gt;</code> you access the public members of the object the pointer is pointing to. It is a shortcut for using dereferencation(<code>*</code>) and member access(<code>.</code>).</p>\n\n<p>This means <code>TextCtrl1-&gt;GetValue()</code> is equivalent to <code>(*TextCtrl1).GetValue()</code></p>\n\n<p>So just do what your compiler says and write</p>\n\n<pre><code>cout &lt;&lt; TextCtrl1-&gt;GetValue() &lt;&lt; endl;\n</code></pre>\n\n<p>to solve your problem.</p>\n\n<p>If you are new to C++ i recommend you to read about pointers. For example <a href=\"http://www.cplusplus.com/doc/tutorial/pointers/\" rel=\"nofollow noreferrer\">here</a> because that's one of the major differences to other languages.</p>\n"}], "owner": {"reputation": 35, "user_id": 9325993, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GXjoIzZN6bY/AAAAAAAAAAI/AAAAAAAAALk/kiSCAUKQbz0/photo.jpg?sz=128", "display_name": "BrainTrance", "link": "https://stackoverflow.com/users/9325993/braintrance"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 0, "accepted_answer_id": 53413010, "answer_count": 1, "score": 0, "last_activity_date": 1545120706, "creation_date": 1542806153, "question_id": 53412892, "link": "https://stackoverflow.com/questions/53412892/get-entry-text-from-wxtextctrl-in-c", "title": "Get entry text from wxTextCtrl in C++", "body": "<p>I have this piece of code:</p>\n\n<pre><code>void stoiximanFrame::OnButton1Click(wxCommandEvent&amp; event)\n{\n    cout&lt;&lt; TextCtrl1.GetValue() &lt;&lt;endl;\n\n}\n</code></pre>\n\n<p>I just want to get the text from TextCtrl1 and I get this error:</p>\n\n<blockquote>\n  <blockquote>\n    <p>stoiximanFrame::TextCtrl1\u2019, which is of pointer type \u2018wxTextCtrl*\u2019 (maybe you meant to use \u2018->\u2019 ?)</p>\n  </blockquote>\n</blockquote>\n\n<p>I'm new to C++ so I've never used pointers before. I've read the basics of pointers but still I couldn't figure out how to solve the problem above.</p>\n\n<p>In addition, I would appreciate any good documentation about how and when to use pointers.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c#", "c++", ".net", "unmanaged", "managed"], "comments": [{"owner": {"reputation": 921791, "user_id": 23354, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CrVFH.png?s=128&g=1", "display_name": "Marc Gravell", "link": "https://stackoverflow.com/users/23354/marc-gravell"}, "edited": false, "score": 1, "creation_date": 1542806199, "post_id": 53412842, "comment_id": 93700303, "body": "unmanaged memory actually has pretty good support in C#, however: it is usually much easier if you can handle the allocations (and thus the lifetime) from the C# side, essentially passing a pointer <i>in</i> to the C/C++ (the pointer could be from managed heap, unmanaged heap, or stack memory - it doesn&#39;t really matter). Is it possible to consider an API that allows the consumer to handle the allocation site?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1542806651, "post_id": 53412842, "comment_id": 93700565, "body": "You are heading for a crash into a memory management wall at a hundred miles an hour.  C# is not going to use the delete[] operator to release the allocation again.  It can&#39;t, guaranteed memory leak.  Always favor writing this code so you pass the C# array to the C++ code, along with its length, so the C++ code can simply fill the array elements.  A handle-based approach can work too, typically requires create(), getdata() and destroy() functions.  Where destroy() would use the delete[] operator."}, {"owner": {"reputation": 21, "user_id": 8107800, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mKcgl.jpg?s=128&g=1", "display_name": "Onlugassy", "link": "https://stackoverflow.com/users/8107800/onlugassy"}, "edited": false, "score": 0, "creation_date": 1542806661, "post_id": 53412842, "comment_id": 93700573, "body": "So if I understand you correctly(I&#39;m not a native speaker so I&#39;m just making sure) you are suggesting to send the pointer created in C# to C++ and do all the assignments there so that I don&#39;t need to return anything and just access the the data when the function is done?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1542806762, "post_id": 53412842, "comment_id": 93700637, "body": "Yes.  [Out] required on the array argument so it knows it needs to copy the array back.  Don&#39;t skimp on the length argument since it is easy to corrupt the GC heap when you overflow the array bounds."}, {"owner": {"reputation": 21, "user_id": 8107800, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mKcgl.jpg?s=128&g=1", "display_name": "Onlugassy", "link": "https://stackoverflow.com/users/8107800/onlugassy"}, "edited": false, "score": 0, "creation_date": 1542806860, "post_id": 53412842, "comment_id": 93700685, "body": "Hans, wouldn&#39;t I need to handle that in C++ as well? I assume a C# struct is different than a C++ one in some way"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1542807058, "post_id": 53412842, "comment_id": 93700827, "body": "No, that is the job of the pinvoke marshaler to take care of.  You need a declaration for the struct both in the C++ and the C# code.  It needs to be an exact match, sizeof(example) in C++ must be equal to Marshal.SizeOf(typeof(Example)) in C#.  Usually not a problem, won&#39;t hurt to check."}, {"owner": {"reputation": 21, "user_id": 8107800, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mKcgl.jpg?s=128&g=1", "display_name": "Onlugassy", "link": "https://stackoverflow.com/users/8107800/onlugassy"}, "edited": false, "score": 0, "creation_date": 1542807463, "post_id": 53412842, "comment_id": 93701067, "body": "I will read on pinvoke marshalling and the Out keyword, Thanks for the help!"}, {"owner": {"reputation": 931, "user_id": 1504868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10b41efcdd54ba679e9e553cc9599844?s=128&d=identicon&r=PG", "display_name": "serge", "link": "https://stackoverflow.com/users/1504868/serge"}, "edited": false, "score": 0, "creation_date": 1542809307, "post_id": 53412842, "comment_id": 93702242, "body": "Why don&#39;t pass serialized objects as XML or JSON in C# application instead of mapping structures in memory? It&#39;s less efficient but less fragile, too."}, {"owner": {"reputation": 21, "user_id": 8107800, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mKcgl.jpg?s=128&g=1", "display_name": "Onlugassy", "link": "https://stackoverflow.com/users/8107800/onlugassy"}, "edited": false, "score": 0, "creation_date": 1542812599, "post_id": 53412842, "comment_id": 93704189, "body": "Unfortunately for me, the lecturers responsible for the project demanded that we only use procedural programming (aside from the GUI which has to be OO) so breaking up the data read from the file into structures and manipulating the array is a big part of the C++ side of the project thus passing the data to C# any other way won&#39;t cut it. I could&#39;ve just passed the entire data as a string and mess with it in C# or even the reading itself there but that can&#39;t be done for the same reason."}], "owner": {"reputation": 21, "user_id": 8107800, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mKcgl.jpg?s=128&g=1", "display_name": "Onlugassy", "link": "https://stackoverflow.com/users/8107800/onlugassy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 304, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1542978350, "creation_date": 1542805963, "last_edit_date": 1542978350, "question_id": 53412842, "link": "https://stackoverflow.com/questions/53412842/returning-an-array-of-structs-from-an-unmanaged-c-function-to-c", "title": "Returning an array of structs from an unmanaged C++ function to C#", "body": "<p>I am currently working on a group project where aside from the GUI which is done in C# all of the code is done in C++.</p>\n\n<p>In C++ we are using a funtion that reads formatted text from a file and seperates it into an array of structs, an example of a struct is:</p>\n\n<pre><code>typedef struct example{\n    string id;\n    string name;\n    string email;\n    char status;\n    string phone_number;\n }example;\n</code></pre>\n\n<p>And of an array:</p>\n\n<pre><code>example* example_arr=new example[10];\n</code></pre>\n\n<p>We then want to return that array from the C++ function and use it in C# (DLLImport) to display that info in a Form.</p>\n\n<p>When I started thinking about the implementation of the C# part I realized that I'm pretty much clueless about how to approach it since I've never seen unmanaged memory being used in C#, so I started looking for possible solutions but most of the cases I found are about sending info the opposite direction(from C# to C++) or were rather unclear in their explanation. The only thing I got from them really is that the concept of marshalling might be of use, however, I couldn't really wrap my head around it.</p>\n\n<p>I would honestly appreciate any help on the topic, I really want to make it happen even though I'm not experienced with handling unmanaged memory in C#.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I've tried implementing what Hans suggested but I've faced a problem.\nThe C# code runs, executes the C++ function which runs as well up until it gets to the return statement and just stops(doesn't break/throw just freezes like it's waiting for something to happen) which in return stops the C# code from continuing it's run.</p>\n\n<p>This is the code(I simplified the struct for the sake of testing):</p>\n\n<p>C++</p>\n\n<pre><code>///header file\ntypedef struct example\n{\n    int num;\n    char str[5];\n}example;\n\nextern \"C\" __declspec(dllexport) int __stdcall test(a arr[],int len);\n\n///Cpp file\nint __stdcall test(example* arr,int len)\n{\n    for (int i = 0; i &lt; len; i++)\n    {\n        arr[i].num = i;\n        std::cout &lt;&lt;\"arr[\"&lt;&lt;i&lt;&lt;\"].num = \"&lt;&lt; arr[i].num&lt;&lt;\"\\n\";//for debugging purposes\n        strcpy(arr[i][0].str, \"test\");\n    }\n    std::cout &lt;&lt; \"not yet\\n\";\n    return -1;//*does not get executed*\n}\n</code></pre>\n\n<p>C#</p>\n\n<pre><code>public partial class Form1 : Form\n{\n    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]\n    public struct example\n    {\n        public int num;\n        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 5)]\n        public string str;\n    };\n\n    [DllImport(\"unmanaged.dll\", CallingConvention=CallingConvention.StdCall)]\n    public static extern int test(out example[] arr,int len);\n\n    public Form1()\n    {\n        InitializeComponent();\n    }\n\n    private void Form1_Load(object sender, EventArgs e)//Form Loaded Event function\n    {\n        example[] arr = new example[10];\n        int res = test(out arr,10);//*Code freezes here*\n\n        Debug.WriteLine(res);\n        _text.Text =arr[0].str;\n    }\n}\n</code></pre>\n\n<p>The output in the debug window is(should end with -1 if everything works):</p>\n\n<pre><code>arr[0].num = 0\narr[1].num = 1\narr[2].num = 2\narr[3].num = 3\narr[4].num = 4\narr[5].num = 5\narr[6].num = 6\narr[7].num = 7\narr[8].num = 8\narr[9].num = 9\nnot yet\n</code></pre>\n\n<p>I find it to be really weird, it might be some mechanic related to the [out] modifier but I've got not clue. </p>\n"}, {"tags": ["c++", "clang", "c++98"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1542806033, "post_id": 53412721, "comment_id": 93700213, "body": "Unfortunately most compilers seem to allow non standard elements by default (no idea why). On <code>GCC</code> to force standard compliance you need the <code>-pedantic-errors</code> flag. Maybe its the same for <code>clang++</code>?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1542806435, "post_id": 53412721, "comment_id": 93700440, "body": "&quot;Maybe a bug?&quot; - Definitely a bug. One that&#39;s unlikely to be caught since legacy code won&#39;t actually include modern headers"}, {"owner": {"reputation": 4338, "user_id": 3240681, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4sQMO.jpg?s=128&g=1", "display_name": "\u03b1\u03bb\u03b5\u03c7\u03bf\u03bb\u03c5\u03c4", "link": "https://stackoverflow.com/users/3240681/%ce%b1%ce%bb%ce%b5%cf%87%ce%bf%ce%bb%cf%85%cf%84"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1542808398, "post_id": 53412721, "comment_id": 93701688, "body": "@YSC from the clang&#39;s point of view - maybe... Did clang exist in &#39;03?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1542809175, "post_id": 53412721, "comment_id": 93702159, "body": "@StoryTeller: What exactly makes it a bug? If <code>&lt;random&gt;</code> is surrounded by one huge <code>#if __cplusplus &gt; 199711L</code>, making it effectively empty in C++98, I&#39;d be hard-pressed to find wording in C++98 making that a bug."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1542809388, "post_id": 53412721, "comment_id": 93702291, "body": "@MSalters - If only... <a href=\"https://wandbox.org/permlink/atmIpYn3tYY1e040\" rel=\"nofollow noreferrer\">wandbox.org/permlink/atmIpYn3tYY1e040</a>"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1542809579, "post_id": 53412721, "comment_id": 93702396, "body": "@StoryTeller: Now that seems like a valid edit of the question. As it currently stands, the question is whether <code>#include &lt;random&gt;</code> should be rejected outright in C++98 mode."}, {"owner": {"reputation": 942, "user_id": 399580, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/53b0446da51264683bb2e4a7321e919d?s=128&d=identicon&r=PG", "display_name": "Luis Machuca", "link": "https://stackoverflow.com/users/399580/luis-machuca"}, "edited": false, "score": 0, "creation_date": 1544633237, "post_id": 53412721, "comment_id": 94347801, "body": "I don&#39;t see why it should; it would make the validity of #include directives dependent on whether include files have suffixes or not, something of which IIRC C++ has no notion of (you can have a file called <code>random</code> in your user-defined include path and it&#39;s a valid header)."}], "owner": {"reputation": 4338, "user_id": 3240681, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4sQMO.jpg?s=128&g=1", "display_name": "\u03b1\u03bb\u03b5\u03c7\u03bf\u03bb\u03c5\u03c4", "link": "https://stackoverflow.com/users/3240681/%ce%b1%ce%bb%ce%b5%cf%87%ce%bf%ce%bb%cf%85%cf%84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1542808490, "creation_date": 1542805584, "last_edit_date": 1542805675, "question_id": 53412721, "link": "https://stackoverflow.com/questions/53412721/enforcing-c98-03-for-clang", "title": "Enforcing C++98/03 for clang", "body": "<p>The following code is <a href=\"https://wandbox.org/permlink/HxWMLhQNJfw3F0Kj\" rel=\"nofollow noreferrer\">rejected</a> by latest gcc with <code>-std=c++98</code> option enabled:</p>\n\n<pre><code>#include &lt;random&gt;\nint main() {}\n</code></pre>\n\n<p>due to the c++11 nature of <code>&lt;random&gt;</code> header. But clang <a href=\"https://wandbox.org/permlink/FIfDrBjBOdIocwAi\" rel=\"nofollow noreferrer\">accepts</a> it with no warning/error.</p>\n\n<p>Is there a way to say clang to use the c++98/03 standard only? Maybe a bug?</p>\n"}, {"tags": ["c++", "function"], "comments": [{"owner": {"reputation": 1043, "user_id": 7742987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6cda94a2733ee551a94d437561510f27?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/7742987/mohit"}, "edited": false, "score": 1, "creation_date": 1542805054, "post_id": 53412462, "comment_id": 93699711, "body": "Well, You should use <code>std::string</code> instead of these raw strings and you are including <code>iostream</code> already so you should also use it i.e, replacing <code>printf</code> and <code>scanf</code> by <code>std::cout</code> and <code>std::cin</code> because it is c++ and not c"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1542805170, "post_id": 53412462, "comment_id": 93699770, "body": "If you&#39;re supposed to use C++, then you probably aren&#39;t supposed to attempt writing C."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1542808259, "post_id": 53412462, "comment_id": 93701589, "body": "Teachers usually don&#39;t appreciate &quot;loophole&quot; solutions, so don&#39;t be surprised if you fail this one."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 10571165, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Yl2w8CociV0/AAAAAAAAAAI/AAAAAAAAAD8/3OeRXPMTsN0/photo.jpg?sz=128", "display_name": "Stoicism", "link": "https://stackoverflow.com/users/10571165/stoicism"}, "edited": false, "score": 0, "creation_date": 1542836826, "post_id": 53412682, "comment_id": 93716219, "body": "here says to avoid to comment something like &quot;thank you&quot;, so to stick with that ima say great answer, damn you should be my teacher."}, {"owner": {"reputation": 25, "user_id": 10571165, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Yl2w8CociV0/AAAAAAAAAAI/AAAAAAAAAD8/3OeRXPMTsN0/photo.jpg?sz=128", "display_name": "Stoicism", "link": "https://stackoverflow.com/users/10571165/stoicism"}, "edited": false, "score": 0, "creation_date": 1542837843, "post_id": 53412682, "comment_id": 93716563, "body": "so i&#39;ve learned many this with the corrected code above but when i run it in DEVC++ i get this error: &#39;name,discipline,point1,point2&#39; was not declared in this scope. the redd line is there in the main function, letters and calcsum"}], "tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": true, "score": 0, "last_activity_date": 1542838334, "last_edit_date": 1542838334, "creation_date": 1542805450, "answer_id": 53412682, "question_id": 53412462, "link": "https://stackoverflow.com/questions/53412462/strings-and-ints-in-functions/53412682#53412682", "title": "strings and ints in functions", "body": "<blockquote>\n  <p>The loophole was to use <code>&lt;cstdio&gt;</code></p>\n</blockquote>\n\n<p>I am not sure if your teacher will be fond of your choice, but you didn't ask for that.</p>\n\n<p>In</p>\n\n<blockquote>\n<pre><code>printf(\"type a name:\\n\\n\");\nscanf(\"%s\", &amp;name);\n\nprintf(\"\\n\\ntype a discipline:\\n\\n\");\nscanf(\"%s\", &amp;discipline);\n</code></pre>\n</blockquote>\n\n<p><code>name</code> and <code>discipline</code> are pointers allready, you don't have to use the address-of operator <code>&amp;</code> on them wenn passing them to <code>scanf()</code>.</p>\n\n<p>Also, there is no reason to pass parameters to your functions <code>calcsum()</code> and <code>letters()</code> since you don't want to pass any data. Just define the variables they use inside the functions:</p>\n\n<pre><code>void letters()\n{\n    printf(\"type a name:\\n\\n\");\n    char name[100];\n    scanf(\"%99s\", &amp;name);  // read 99 characters + terminating '\\0' max\n\n    printf(\"\\n\\ntype a discipline:\\n\\n\");\n    char discipline[100];\n    scanf(\"%99s\", &amp;discipline);  // NEVER use \"%s\" with scanf without specifying\n                                 // a maximum width for field to read.\n\n    printf(\"\\n\\nname: %s\\n\\ndiscipline: %s\", name, discipline);\n}\n\nvoid calcsum()\n{  \n    printf(\"\\n\\ntype a point:\\n\\n\");\n    int point1;\n    scanf(\"%i\", &amp;point1);\n\n    printf(\"\\n\\ntype a second point:\\n\\n\");\n    int point2;\n    scanf(\"%i\", &amp;point2);\n\n    int sum = point1 + point2;    \n    printf(\"\\n\\nsum is: %i\", sum);\n\n}\n\nint main()  // there is also no need of taking parameters if you don't use them\n{\n    letters();  // no parameters needed since you don't\n    calcsum();  // want to pass values to these functions\n\n    // return 0;  main defaults to return 0 if there is no return-statement.\n}\n</code></pre>\n\n<p>Last but not least it should be mentioned, that all functions of the C++ standard library reside in the namespace <code>std</code> (or beneath). That goes for the inherited functions from the c standard library as well. So</p>\n\n<pre><code>printf( /* ... */ );\nscanf( /* ... */ );\n// etc\n</code></pre>\n\n<p>should actually be</p>\n\n<pre><code>std::printf( /* ... */ );\nstd::scanf( /* ... */ );\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 10571165, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Yl2w8CociV0/AAAAAAAAAAI/AAAAAAAAAD8/3OeRXPMTsN0/photo.jpg?sz=128", "display_name": "Stoicism", "link": "https://stackoverflow.com/users/10571165/stoicism"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 53412682, "answer_count": 1, "score": 0, "last_activity_date": 1542838334, "creation_date": 1542804743, "last_edit_date": 1542805672, "question_id": 53412462, "link": "https://stackoverflow.com/questions/53412462/strings-and-ints-in-functions", "title": "strings and ints in functions", "body": "<p>Im a newbie at C++ and im currently studying functions. Im having a hard time to make this code to work. I am using C++ with the <code>&lt;cstdio&gt;</code> library because my teacher wants me to use C++. The loophole was to use <code>&lt;cstdio&gt;</code> so the code is:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdio&gt;\n\nvoid letters(char name[], char discipline[])\n{\n    printf(\"type a name:\\n\\n\");\n    scanf(\"%s\", &amp;name);\n\n    printf(\"\\n\\ntype a discipline:\\n\\n\");\n    scanf(\"%s\", &amp;discipline);\n\n    printf(\"\\n\\nname: %s\\n\\ndiscipline: %s\", name, discipline);\n}\n\nvoid calcsum(int point1, int point2, int sum)\n{   \n    printf(\"\\n\\ntype a point:\\n\\n\");\n    scanf(\"%i\", &amp;point1);\n\n    printf(\"\\n\\ntype a second point:\\n\\n\");\n    scanf(\"%i\", &amp;point2);\n\n    sum = point1 + point2;\n    printf(\"\\n\\nsum is: %i\", sum);\n}\n\nint main(int argc, char** argv)\n{\n    char name[100];\n    char discipline[100];\n    int point1, point2, sum;\n\n    letters(name, discipline);\n    calcsum(point1, point2,sum);    \n\n    return 0;\n}\n</code></pre>\n\n<p>Everything works fine till it asks to type the discipline. When I type it asks to type the name and then an error tab appears. This is happening for all my code that involves <code>char</code> arrays with any other data type.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1542805033, "post_id": 53412425, "comment_id": 93699694, "body": "<a href=\"https://clang.llvm.org/extra/clang-tidy/checks/misc-throw-by-value-catch-by-reference.html\" rel=\"nofollow noreferrer\">clang.llvm.org/extra/clang-tidy/checks/&hellip;</a>"}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1542805156, "post_id": 53412425, "comment_id": 93699763, "body": "@StoryTeller I&#39;ve seen that, but there is no explanation, just the details of what triggers the warning."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1542805282, "post_id": 53412425, "comment_id": 93699833, "body": "Strictly speaking, in your case, it seems like a silly warning, a true false positive."}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1542805398, "post_id": 53412425, "comment_id": 93699888, "body": "So the purpose of the warning would be to warn about throwing things like instance variables? If yes, this could be the answer..."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1542805442, "post_id": 53412425, "comment_id": 93699910, "body": "It could, but I can only speculate."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1542805824, "post_id": 53412425, "comment_id": 93700090, "body": "Maybe something to do with copy/move elision?"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1542807033, "post_id": 53412425, "comment_id": 93700807, "body": "I don&#39;t see the point of this warning either. <code>e</code> will be copied, why would it be a problem? I don&#39;t see any cases where this could cause some problem. If <code>e</code> was a reference, then object slicing could occur (that&#39;s a problem, a warning would be well-founded in this case)."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1542828908, "post_id": 53412425, "comment_id": 93712889, "body": "There is a difference If <code>e</code>&#39;s copy-constructor could throw  (e.g. if <code>e</code> has a <code>std::string</code> member variable)"}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 4, "last_activity_date": 1542807375, "last_edit_date": 1542807375, "creation_date": 1542807035, "answer_id": 53413157, "question_id": 53412425, "link": "https://stackoverflow.com/questions/53412425/throw-temporary-instead-of-local-variable-why/53413157#53413157", "title": "Throw temporary instead of local variable - why?", "body": "<p>The code doesn't conform to the convention of \"<a href=\"https://clang.llvm.org/extra/clang-tidy/checks/misc-throw-by-value-catch-by-reference.html\" rel=\"nofollow noreferrer\">throw only anonymous temporaries</a>\" (note the option <code>CheckThrowTemporaries</code>), which is what the style checker inspects.</p>\n\n<p>That convention, and this inspection are overly strict as far \"throw by value\" convention is concerned - in that regard the example program is conforming. A truly non conforming example would be throwing a pointer to an object.</p>\n"}, {"tags": [], "owner": {"reputation": 3980, "user_id": 8769985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72402fe064285d9e3e85fd3ca5900e5a?s=128&d=identicon&r=PG&f=1", "display_name": "francesco", "link": "https://stackoverflow.com/users/8769985/francesco"}, "is_accepted": false, "score": 7, "last_activity_date": 1542823860, "last_edit_date": 1592644375, "creation_date": 1542823860, "answer_id": 53418191, "question_id": 53412425, "link": "https://stackoverflow.com/questions/53412425/throw-temporary-instead-of-local-variable-why/53418191#53418191", "title": "Throw temporary instead of local variable - why?", "body": "<p>According to the cpp reference on a <a href=\"https://en.cppreference.com/w/cpp/language/throw\" rel=\"noreferrer\">throw expression</a>:</p>\n<blockquote>\n<p>First, copy-initializes the exception object from expression (this may call the move constructor for rvalue expression, and the copy/move may be subject to copy elision)</p>\n</blockquote>\n<p>Thus, your code if perfectly fine, but a copy constructor will be called, which may be undesirable in terms of efficiency. Still, <a href=\"https://en.cppreference.com/w/cpp/language/copy_elision\" rel=\"noreferrer\">copy elision</a> may occur if (emphasis mine)</p>\n<blockquote>\n<p>Under the following circumstances, the compilers are permitted, <strong>but not required</strong> to omit the copy</p>\n<p>[omissis]</p>\n<p>In a throw-expression, when the operand is the name of a non-volatile object with automatic storage duration, which isn't a function parameter or a catch clause parameter, and whose scope does not extend past the innermost try-block (if there is a try-block).</p>\n</blockquote>\n<p>As an example, consider the following code</p>\n<pre><code>#include &lt;exception&gt;\n#include &lt;iostream&gt;\n\nstruct something_bad_happened_exception : std::exception {\n  something_bad_happened_exception(const something_bad_happened_exception&amp; r) {\n     std::cout &lt;&lt; &quot;A copy has occoured!&quot; &lt;&lt; std::endl;\n  }\n  something_bad_happened_exception() { }\n};\n\nint main()\n{\n  std::cout &lt;&lt; &quot;First throw&quot; &lt;&lt; std::endl;\n  try {\n    const something_bad_happened_exception e;\n    throw e;\n  }\n  catch (const std::exception&amp; ex)\n    {\n      std::cout &lt;&lt; &quot;Caught exception&quot; &lt;&lt; std::endl;\n    }\n  std::cout &lt;&lt; &quot;Second throw&quot; &lt;&lt; std::endl;\n  try {\n    throw something_bad_happened_exception();\n  }\n  catch (const std::exception&amp; ex)\n    {\n      std::cout &lt;&lt; &quot;Caught exception&quot; &lt;&lt; std::endl;\n    }\n\n  return 0;\n}\n</code></pre>\n<p>Compiling the code with <code>gcc 8.2.1</code> and <code>clang 6.0</code>, with option <code>-O3</code> the output is</p>\n<pre><code>First throw\nA copy has occoured!\nCaught exception\nSecond throw\nCaught exception\n</code></pre>\n<p>The first <code>throw</code> corresponds to your example. Even if a copy of <code>e</code> <em>could</em> be omitted, neither <code>gcc</code> nor <code>clang</code> implement copy elision.</p>\n<p>The second <code>throw</code> has an anonymous temporary, and no copy occurs.</p>\n"}], "owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1320, "favorite_count": 1, "answer_count": 2, "score": 19, "last_activity_date": 1542823860, "creation_date": 1542804625, "question_id": 53412425, "link": "https://stackoverflow.com/questions/53412425/throw-temporary-instead-of-local-variable-why", "title": "Throw temporary instead of local variable - why?", "body": "<p>The code in question is this:</p>\n\n<pre><code>struct something_bad_happened_exception : std::exception {};\n\nvoid foo() {\n    something_bad_happened_exception e;\n    throw e;\n}\n</code></pre>\n\n<p>clang gives a warning that reads:</p>\n\n<blockquote>\n  <p>Throw expression should throw anonymous temporary values instead\n  [cert-err09-cpp]</p>\n</blockquote>\n\n<p>which means <code>foo()</code> should be changed to:</p>\n\n<pre><code>void foo() {\n    throw something_bad_happened_exception();\n}\n</code></pre>\n\n<p>Why is it better to throw a temporary instead of a local variable?</p>\n"}, {"tags": ["c++", "audio", "mfc", "xaudio2"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1542815764, "post_id": 53412339, "comment_id": 93706168, "body": "The <a href=\"https://docs.microsoft.com/en-us/windows/desktop/xaudio2/programming-guide\" rel=\"nofollow noreferrer\">Programming Guide</a> explains that."}], "answers": [{"tags": [], "owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "is_accepted": false, "score": 0, "last_activity_date": 1543037671, "last_edit_date": 1543037671, "creation_date": 1543037336, "answer_id": 53455447, "question_id": 53412339, "link": "https://stackoverflow.com/questions/53412339/use-ixaudio2-to-play-sound-mix/53455447#53455447", "title": "use IXAudio2 to play sound mix?", "body": "<p>You create one <code>IXAudio2SourceVoice</code> for each 'playing, active' sound you want at a time. Typically games will create a few hundred source voices to manage--beyond that the sound mix is typically too muddy to hear anyhow.</p>\n\n<p>Game audio engines have a mix of 'one-shot' voices that just play-on-demand until they complete--at which point that frees up that source voice for use by another one-shot sound--, 'ambients' or 'music' voices that are manipulated as they play, and 3D audio positioned sounds which have to be updated every rendering frame to track the 3D rendering object they are emitted from.</p>\n\n<p>If you submit the same audio data to two distinct <code>IXAudio2SourceVoice</code> instances, then you'll hear it being played twice, mixed together in real-time. Typically you won't start them at precisely the same instant because the result is just a louder version of the one sound. Normally they are started at different times so you get overlapped playback.</p>\n\n<p>See <a href=\"https://docs.microsoft.com/en-us/windows/desktop/xaudio2/programming-guide\" rel=\"nofollow noreferrer\">XAudio2 Programming Guide</a>, <a href=\"https://github.com/walbourn/directx-sdk-samples/tree/master/XAudio2\" rel=\"nofollow noreferrer\">GitHub</a>, and <a href=\"https://github.com/Microsoft/DirectXTK/wiki/Audio\" rel=\"nofollow noreferrer\">DirectX Tool Kit for Audio</a>.</p>\n"}], "owner": {"reputation": 11, "user_id": 10685819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9b854ecda09745b32d1fd56c8fa07c5?s=128&d=identicon&r=PG&f=1", "display_name": "fanrongqi", "link": "https://stackoverflow.com/users/10685819/fanrongqi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1543037671, "creation_date": 1542804356, "last_edit_date": 1542805605, "question_id": 53412339, "link": "https://stackoverflow.com/questions/53412339/use-ixaudio2-to-play-sound-mix", "title": "use IXAudio2 to play sound mix?", "body": "<p>I write a MFC project . I use IXAudio2 to play wav file.\nmy code is like this :</p>\n\n<pre><code>pSourceVoice-&gt;SubmitSourceBuffer( &amp;buffer );\n\nhr = pSourceVoice-&gt;Start( 0 );\n</code></pre>\n\n<p>but in this way I only can play one sound by a time. It must wait this <code>.wav</code> file play over. I can play the second file. How can I play the file I need and not wait for the first one is over, likes mixing sounds? \nHow can I achieve this function?</p>\n"}, {"tags": ["c++", "c++11", "c-preprocessor", "template-meta-programming", "preprocessor-meta-program"], "comments": [{"owner": {"reputation": 1324, "user_id": 8147455, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c0f9204eec46dea673aa01464b496362?s=128&d=identicon&r=PG&f=1", "display_name": "Xatyrian", "link": "https://stackoverflow.com/users/8147455/xatyrian"}, "edited": false, "score": 0, "creation_date": 1542804140, "post_id": 53412226, "comment_id": 93699195, "body": "why don&#39;t you just remove the lambda ? use a <code>do { .... } while(0)</code> to group your statements"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1542804533, "post_id": 53412226, "comment_id": 93699417, "body": "<code>__builtin_FUNCTION</code> (a GNU extension I believe)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1542804568, "post_id": 53412226, "comment_id": 93699441, "body": "...or write the macro such that the calling function name is expanded where you call the macro and the macro passes that as string to the lambda"}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 0, "creation_date": 1542806747, "post_id": 53412226, "comment_id": 93700626, "body": "Was looking for this myself yesterday, depends on compiler, try: __ FUNCTION __ (without spaces)"}, {"owner": {"reputation": 3353, "user_id": 8524301, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RlSIc.jpg?s=128&g=1", "display_name": "Marko Pacak", "link": "https://stackoverflow.com/users/8524301/marko-pacak"}, "edited": false, "score": 1, "creation_date": 1542808682, "post_id": 53412226, "comment_id": 93701873, "body": "boys he&#39;s saying he&#39;s using a macro from a library, so it&#39;s likely he can&#39;t change it"}], "answers": [{"comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1542809021, "post_id": 53412826, "comment_id": 93702069, "body": "That assert isn&#39;t very robust. For example, <code>const char s[1]; static_assert(isStringLiteral&lt;decltype(s))&gt;::value, &quot;You won&#39;t see this message.&quot; );</code>"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1542825520, "post_id": 53412826, "comment_id": 93711253, "body": "@molbdnilo - Unfortunately you&#39;re right. I can solve this problem imposing (through SFINAE) that <code>N</code> is greater than <code>1</code> but I don&#39;t know if is the case: <code>char const s[] { &quot;abc&quot; };</code> result a string literal but this isn&#39;t exactly correct (I suppose)."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1542826407, "post_id": 53412826, "comment_id": 93711670, "body": "The size has nothing to do with it, and your <code>s</code> is not a string literal. There is no way to distinguish between string literals and other <code>const</code> char arrays."}, {"owner": {"reputation": 1328, "user_id": 1496826, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7b0948fbc76b59e1d7a48df9ccf2b273?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/1496826/mohit"}, "edited": false, "score": 0, "creation_date": 1543223169, "post_id": 53412826, "comment_id": 93825436, "body": "Pls understand that I cannot change the <code>PERF_INSTRUMENT</code> macro"}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 5, "last_activity_date": 1542820660, "last_edit_date": 1542820660, "creation_date": 1542805908, "answer_id": 53412826, "question_id": 53412226, "link": "https://stackoverflow.com/questions/53412226/how-to-get-c-function-caller-name-at-preprocessing-stage/53412826#53412826", "title": "How to get c++ function caller name at preprocessing stage", "body": "<blockquote>\n  <p>Is their any way by which I can pass the main function name to the PERF_INSTRUMENT macro.</p>\n</blockquote>\n\n<p>You can pass \"<code>name</code>\" as argument to the lambda itself.</p>\n\n<p>Something as</p>\n\n<pre><code>#define PERF_INSTRUMENT(name) \\\n    auto instObj = [](char const * str) \\ // &lt;-- receive an argument\n       { static_assert( Is_C_String_Literal&lt; decltype( name ) &gt;::value, \\\n                       \"input argument must be a c-string literal\" );\\\n         /* Some other Logic*/ \\\n         printf(str); \\  // &lt;-- print the argument received, not directly name\n         return 1;\\\n       }(name)\n//.......^^^^   pass name as argument\n</code></pre>\n\n<p>Bonus Off Topic proposal: to detect is an object is a C-string literal, i propose an alternative way</p>\n\n<pre><code>template &lt;typename T&gt;\nconstexpr std::false_type islHelper (T, long);\n\ntemplate &lt;typename T, std::size_t N&gt;\nconstexpr std::true_type islHelper (T const(&amp;)[N], int);\n\ntemplate &lt;typename T&gt;\nusing isStringLiteral = decltype(islHelper(std::declval&lt;T&gt;(), 0));\n</code></pre>\n\n<p>In <code>static_assert()</code> become</p>\n\n<pre><code>static_assert( isStringLiteral&lt;decltype(name)&gt;::value,\n               \"input argument must be a c-string literal\" );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 0, "last_activity_date": 1542813776, "last_edit_date": 1542813776, "creation_date": 1542813433, "answer_id": 53415152, "question_id": 53412226, "link": "https://stackoverflow.com/questions/53412226/how-to-get-c-function-caller-name-at-preprocessing-stage/53415152#53415152", "title": "How to get c++ function caller name at preprocessing stage", "body": "<p>Since the assert is fundamentally flawed \u2013 it accepts any <code>const</code> char array \u2013 wrapping the macro in another macro should work.<br>\nSomething like this:</p>\n\n<pre><code>#define PERF_FUNCTION do { \\\n    const char name[] = __func__; \\\n    PERF_INSTRUMENT(name); \\\n} while(0)\n</code></pre>\n"}], "owner": {"reputation": 1328, "user_id": 1496826, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7b0948fbc76b59e1d7a48df9ccf2b273?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/1496826/mohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1542879777, "creation_date": 1542803968, "last_edit_date": 1542879777, "question_id": 53412226, "link": "https://stackoverflow.com/questions/53412226/how-to-get-c-function-caller-name-at-preprocessing-stage", "title": "How to get c++ function caller name at preprocessing stage", "body": "<p>I have to use a macro <code>PERF_INSTRUMENT</code> from a library. <code>PERF_INSTRUMENT</code> expects a user provided c-style string as a function name to print the location of this instrument point. </p>\n\n<p>But, I don't want to write the function name everytime I use <code>PERF_INSTRUMENT</code> instead I want to call it with <code>__func__</code>  so that function name is automatically included in the perf log. </p>\n\n<p>But when I use <code>__func__</code> it actually returns <code>operator()</code> because the <code>__func__</code> is embedded inside the lambda function.</p>\n\n<p>Is their any way by which I can pass the <code>main()</code> function name to the <code>PERF_INSTRUMENT</code> macro.</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;cassert&gt; \n#include &lt;type_traits&gt; \n\nusing namespace std;\n\nnamespace /* anonymous */\n{\n    template&lt; typename T &gt;\n    struct Is_Const_Char_Array\n      : std::is_same&lt; std::remove_reference_t&lt; T &gt;,\n                      char const[ std::extent&lt; std::remove_reference_t&lt; T &gt; &gt;::value ] &gt;\n    {};\n\n    template&lt; typename T &gt;\n    struct Is_C_String_Literal\n      : Is_Const_Char_Array&lt; T &gt;\n    {};\n}\n\n#define PERF_INSTRUMENT(name)  auto instObj = [] { static_assert( Is_C_String_Literal&lt; decltype( name ) &gt;::value, \"input argument must be a c-string literal\" ); /* Some other Logic*/ printf(name);return 1; }()\n\n\n// &lt;------------------ MY CODE -------------------&gt; //\n\nint main(){\n    PERF_INSTRUMENT(\"main\"); // &lt;-- this works fine\n    PERF_INSTRUMENT(__func__); // &lt;-- this prints operator()\n    // PERF_INSTRUMENT(__builtin_FUNCTION());\n}\n</code></pre>\n\n<blockquote>\n  <p>Please Note that I can only change the code below the MY CODE line</p>\n</blockquote>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1542803601, "post_id": 53412090, "comment_id": 93698889, "body": "what errors do you get?"}, {"owner": {"reputation": 104, "user_id": 10023883, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WN4eYpFZZxs/AAAAAAAAAAI/AAAAAAAAAQ4/uTynye3ti1A/photo.jpg?sz=128", "display_name": "Harry76", "link": "https://stackoverflow.com/users/10023883/harry76"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1542803649, "post_id": 53412090, "comment_id": 93698916, "body": "Out of Range error"}, {"owner": {"reputation": 706, "user_id": 4070330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de272559ba2ec727fe9b3108afa222f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kashpur", "link": "https://stackoverflow.com/users/4070330/andrew-kashpur"}, "edited": false, "score": 0, "creation_date": 1542803702, "post_id": 53412090, "comment_id": 93698943, "body": "sidenote: if you want to invert, why not simply std::copy(temp.rbegin(), temp.rend(), destination) ? or you are not allowed to use additional memory ?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1542803747, "post_id": 53412090, "comment_id": 93698971, "body": "<code>length</code> returns number of elements, <code>at</code> takes an index as parameter. When <code>length</code> is 3 then the max valid index is 2. I find it extremely hard to spot the error in your code as all variables have almost the same name, though as you already know it is an out-of-range, thats most likely the problem"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1542804510, "post_id": 53412090, "comment_id": 93699407, "body": "If you get out of range, you&#39;re out of range. Why would that have anything to do with &quot;data types mismatch&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1542804548, "post_id": 53412272, "comment_id": 93699427, "body": "You&#39;ll need to check that <code>temp</code> is not empty otherwise this will explode"}, {"owner": {"reputation": 104, "user_id": 10023883, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WN4eYpFZZxs/AAAAAAAAAAI/AAAAAAAAAQ4/uTynye3ti1A/photo.jpg?sz=128", "display_name": "Harry76", "link": "https://stackoverflow.com/users/10023883/harry76"}, "edited": false, "score": 0, "creation_date": 1542804752, "post_id": 53412272, "comment_id": 93699532, "body": "Thanks! Managed to fix it! I thought it&#39;s error is on the string operation."}, {"owner": {"reputation": 1968, "user_id": 846641, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/q1FW7.jpg?s=128&g=1", "display_name": "Philipp", "link": "https://stackoverflow.com/users/846641/philipp"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1542804866, "post_id": 53412272, "comment_id": 93699590, "body": "@LightnessRacesinOrbit thanks, added it to the answer"}], "tags": [], "owner": {"reputation": 1968, "user_id": 846641, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/q1FW7.jpg?s=128&g=1", "display_name": "Philipp", "link": "https://stackoverflow.com/users/846641/philipp"}, "is_accepted": false, "score": 2, "last_activity_date": 1542804572, "last_edit_date": 1542804572, "creation_date": 1542804116, "answer_id": 53412272, "question_id": 53412090, "link": "https://stackoverflow.com/questions/53412090/c-string-length-out-of-range-as-string-at-parameters/53412272#53412272", "title": "c++ string.length() out of range as string.at() parameters", "body": "<p>The error is here:</p>\n\n<pre><code>while (temp2 &lt; temp.length() / 2 + 1 || temp2 &gt; temp.length() / 2 - 1) {\n                                 ^-- should be -1\n</code></pre>\n\n<p>But actually the check itself is wrong. In theory correct would be:</p>\n\n<pre><code>while (temp1 &lt; temp.length() / 2 - 1 || temp2 &gt; temp.length() / 2 - 1) {\n           ^-- change here\n</code></pre>\n\n<p>But even this is too much. Just checking </p>\n\n<pre><code>while (temp1 &lt; temp.length() / 2 - 1)\n</code></pre>\n\n<p>Should be enough. The reason is you have <code>temp1</code> and <code>temp2</code> where one starts from <code>0</code> and the other one from the end of the string. Each step you increase <code>temp1</code> and decrease <code>temp2</code>. You have to distinguish 2 cases:</p>\n\n<ul>\n<li>string length is even</li>\n<li>string length is odd</li>\n</ul>\n\n<p>But for both cases it's enough to just check one of the variables if they are about to pass halfway through the string (even length string) or about to hit the middle character (odd length string) where a switch is pointless.</p>\n\n<p>And as Lightness Races in Orbit mentions in the comments you have to make sure the passed string is not empty. But in that case you can just return.</p>\n"}, {"comments": [{"owner": {"reputation": 104, "user_id": 10023883, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WN4eYpFZZxs/AAAAAAAAAAI/AAAAAAAAAQ4/uTynye3ti1A/photo.jpg?sz=128", "display_name": "Harry76", "link": "https://stackoverflow.com/users/10023883/harry76"}, "edited": false, "score": 1, "creation_date": 1542804751, "post_id": 53412310, "comment_id": 93699530, "body": "Thanks! Managed to fix it! I thought it&#39;s error is on the string operation."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 104, "user_id": 10023883, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WN4eYpFZZxs/AAAAAAAAAAI/AAAAAAAAAQ4/uTynye3ti1A/photo.jpg?sz=128", "display_name": "Harry76", "link": "https://stackoverflow.com/users/10023883/harry76"}, "edited": false, "score": 0, "creation_date": 1542804895, "post_id": 53412310, "comment_id": 93699609, "body": "@Harry76 you are welcome! Nice question, you got an upvote for providing a complete and minimal example."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 2, "last_activity_date": 1542805634, "last_edit_date": 1542805634, "creation_date": 1542804236, "answer_id": 53412310, "question_id": 53412090, "link": "https://stackoverflow.com/questions/53412090/c-string-length-out-of-range-as-string-at-parameters/53412310#53412310", "title": "c++ string.length() out of range as string.at() parameters", "body": "<p>Change this:</p>\n\n<pre><code>while (temp2 &lt; temp.length() / 2 + 1 || temp2 &gt; temp.length() / 2 - 1)\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>while (temp2 &lt; temp.length() / 2 - 1 || temp2 &gt; temp.length() / 2 - 1)\n</code></pre>\n\n<hr>\n\n<p>Explanation:</p>\n\n<blockquote>\n  <p>I've checked it by print the pos of at variabele</p>\n</blockquote>\n\n<p>Your check was insufficient. I did a:</p>\n\n<pre><code>cout &lt;&lt; temp1 &lt;&lt; \" \" &lt;&lt; temp2 &lt;&lt; endl;\n</code></pre>\n\n<p>at the first line of the body of the while loop, and it was obvious that <code>temp2</code> was <strong>underflow</strong>ing, which explains the out of range error.</p>\n\n<p>What you did was to force a <code>size_t</code> (imagine it as an unsigned integer) variable go below 0. Read more in <a href=\"https://stackoverflow.com/questions/2760502/question-about-c-behaviour-for-unsigned-integer-underflow\">Question about C behaviour for unsigned integer underflow</a>.</p>\n\n<p>In order to fix this, you need to understand what allows your <code>temp2</code> to underflow. At the end of your loop, you do <code>temp2--;</code>,, which decrements <code>temp2</code> by 1.</p>\n\n<p>You should control how many times this gets executed, by having a stop condition in your while loop. Thats approach allows us to focus on the stop condition in the while loop.</p>\n\n<p>With an input like \"bar\", and not that big string you use there, you can easily see, that by the time it gets inverted into \"rab\", <code>temp1</code> is equal to 2 and <code>temp2</code> is equal to 0.</p>\n\n<p>If you allow the body of the loop of to get executed once more, you will then allow <code>temp2</code> to underflow, <em>invoking Undefined Behavior (UB)</em>, when you try to use <code>temp2</code>.</p>\n\n<p>Checking the stop condition and the values of your counters, you can see that you need to change the first operand of the OR condition, as explained above.</p>\n\n<hr>\n\n<p>Homework: Think how you can simplify your stop condition. Take a small string as an example input and see how counters <code>temp1</code> and <code>temp2</code> update themselves. </p>\n\n<p>Hint: One condition will suffice (you do not need two conditions paired with a logical OR).</p>\n\n<hr>\n\n<p>PS: Since we discussed about underflow, it should be natural now for someone to think that <code>temp</code> must be ensured that is not empty. If it is, then this <code>temp2 = temp.length() - 1;</code> would result in <code>temp2</code> to underflow!</p>\n\n<p>So, modify your function to do in its first line <code>if(temp.length() == 0) return \"\";</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 389, "user_id": 4711135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tIVG2.jpg?s=128&g=1", "display_name": "Alexander Chernin", "link": "https://stackoverflow.com/users/4711135/alexander-chernin"}, "is_accepted": false, "score": 0, "last_activity_date": 1542804957, "creation_date": 1542804957, "answer_id": 53412521, "question_id": 53412090, "link": "https://stackoverflow.com/questions/53412090/c-string-length-out-of-range-as-string-at-parameters/53412521#53412521", "title": "c++ string.length() out of range as string.at() parameters", "body": "<p>This one should be enough (little bit KISS):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nstring compose(string temp) {\n    size_t temp1 = 0, temp2 = temp.length() - 1;\n    string temporary, temporary1;\n\n    size_t size = temp.length() /2;\n    size = size %2 == 0? size: size -1;\n    while (temp1 &lt;= size) {\n        temporary1 = temp.at(temp1);\n        temporary = temp.at(temp2);\n\n        temp.replace(temp1, 1, temporary);\n        temp.replace(temp2, 1, temporary1);\n        temp1++;\n        temp2--;\n    }\n    return temp;\n}\n\nint main()\n{\n\n    cout &lt;&lt; compose(\"RPL X-1okewphevoiwrwrejfnjjjjjjjjjjjjjjjjj123456789\");\n    cout &lt;&lt; compose(\"1234\");    \n    cout &lt;&lt; compose(\"12345\");    \n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 104, "user_id": 10023883, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WN4eYpFZZxs/AAAAAAAAAAI/AAAAAAAAAQ4/uTynye3ti1A/photo.jpg?sz=128", "display_name": "Harry76", "link": "https://stackoverflow.com/users/10023883/harry76"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 53412310, "answer_count": 3, "score": 2, "last_activity_date": 1542805634, "creation_date": 1542803444, "last_edit_date": 1542803585, "question_id": 53412090, "link": "https://stackoverflow.com/questions/53412090/c-string-length-out-of-range-as-string-at-parameters", "title": "c++ string.length() out of range as string.at() parameters", "body": "<p>So I've been working on a program that invert it's characters. And I've doing it by string.length() and string.at(). But, it occur error \"out of range\" even though it's not out of range (I've checked it by print the pos of at variabele)  I suspected it's caused of data types mismatch. Correct me if I'm wrong. This is my code.</p>\n\n<pre><code> #include \"pch.h\"\n#include &lt;iostream&gt;\n#include &lt;conio.h&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nstring compose(string temp) {\n    size_t temp1 = 0, temp2 = temp.length() - 1;\n    string temporary, temporary1;\n    cout &lt;&lt; temp2;\n    while (temp2 &lt; temp.length() / 2 + 1 || temp2 &gt; temp.length() / 2 - 1) {\n        temporary1 = temp.at(temp1);\n        temporary = temp.at(temp2);\n\n        temp.replace(temp1, 1, temporary);\n        temp.replace(temp2, 1, temporary1);\n        temp1++;\n        temp2--;\n    }\n    return temp;\n}\n\nint main()\n{\n\n    cout &lt;&lt; compose(\"RPL X-1okewphevoiwrwrejfnjjjjjjjjjjjjjjjjjnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\");\n    _getch();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "cmake", "c++14"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1542803344, "post_id": 53412005, "comment_id": 93698752, "body": "try changing library order putting <code>-lconfig++</code> after <code>-llibcommon</code>, also <code>llibcommon</code> can probably be <code>lcommon</code>"}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1542835271, "post_id": 53412005, "comment_id": 93715614, "body": "Please read <a href=\"//meta.stackoverflow.com/q/326569\">Under what circumstances may I add \u201curgent\u201d or other similar phrases to my question, in order to obtain faster answers?</a> - the summary is that this is not an ideal way to address volunteers, and is probably counterproductive to obtaining answers. Please refrain from adding this to your questions."}], "owner": {"reputation": 1, "user_id": 10685701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfdd45fab7f7ef454f57dda5cb32f697?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Aamir", "link": "https://stackoverflow.com/users/10685701/muhammad-aamir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542835263, "creation_date": 1542803160, "last_edit_date": 1542835263, "question_id": 53412005, "link": "https://stackoverflow.com/questions/53412005/cmake-reference-external-library-from-static-library", "title": "CMake: Reference external library from static library", "body": "<p>I've C++ project build using CMake and currently facing 1 issue, brief description below</p>\n\n<p><strong>lib_common -- STATIC library</strong>\nlib common uses libconfig to load common configurations used in other project.</p>\n\n<p><strong>script_executor -- CMake project</strong>\nIt references above static library and also add external library libconfig, see below:</p>\n\n<pre><code>add_executable(script_executor)\ntarget_link_libraries(script_executor \"-lconfig++\" \"-llibcommon\")\n</code></pre>\n\n<p>So I'm referencing llibcommon inside this project and llibcommon also uses libconfig which is already reference(\"-lconfig++\") from this project.</p>\n\n<p>But I'm still getting  undefined reference to <code>libconfig::Config::Config()</code></p>\n\n<p><strong>Environment details:</strong></p>\n\n<ul>\n<li>UBuntu 16.04,</li>\n<li>cmake version 3.5.1,</li>\n<li>gcc version 5.4.0,</li>\n<li>g++ version 5.4.0</li>\n</ul>\n"}, {"tags": ["c++", "c++11", "templates", "stl", "initializer-list"], "comments": [{"owner": {"reputation": 1486, "user_id": 6871623, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/HtbWQ.jpg?s=128&g=1", "display_name": "Everyone", "link": "https://stackoverflow.com/users/6871623/everyone"}, "edited": false, "score": 0, "creation_date": 1542803377, "post_id": 53412000, "comment_id": 93698772, "body": "If you&#39;re interested in compile-time data you should look into <code>template meta programming</code>. For combining several template classes, yes it is possible using <code>template specialization</code>."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1542803487, "post_id": 53412000, "comment_id": 93698826, "body": "SO rules: you need to post the full code here."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1542803489, "post_id": 53412000, "comment_id": 93698828, "body": "please one question per question, btw you have Question 1 twice"}, {"owner": {"reputation": 1089, "user_id": 5299433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dc842e32992ec3c0d8cd694c26afb70?s=128&d=identicon&r=PG&f=1", "display_name": "Smit Ycyken", "link": "https://stackoverflow.com/users/5299433/smit-ycyken"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1542803821, "post_id": 53412000, "comment_id": 93699009, "body": "@user463035818, I suppose those questions can be related."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1542803883, "post_id": 53412000, "comment_id": 93699038, "body": "sure it can be related, still it should be a seperate question (maybe each linking to the other if you think it helps)"}, {"owner": {"reputation": 1089, "user_id": 5299433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dc842e32992ec3c0d8cd694c26afb70?s=128&d=identicon&r=PG&f=1", "display_name": "Smit Ycyken", "link": "https://stackoverflow.com/users/5299433/smit-ycyken"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1542803927, "post_id": 53412000, "comment_id": 93699070, "body": "@MaximEgorushkin, posted the full code."}], "answers": [{"comments": [{"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1542806987, "post_id": 53412757, "comment_id": 93700773, "body": "+1; but you should precise that <code>std::index_sequence</code> and <code>std::make_index_sequence</code> are available only starting from C++14."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1542807360, "post_id": 53412757, "comment_id": 93701001, "body": "and yes: we are sure the OP can use C++11 because he uses <code>std::array</code>, smart pointers, <code>using</code> to define alias types, range based for loop, uniform initialization..."}, {"owner": {"reputation": 1089, "user_id": 5299433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dc842e32992ec3c0d8cd694c26afb70?s=128&d=identicon&r=PG&f=1", "display_name": "Smit Ycyken", "link": "https://stackoverflow.com/users/5299433/smit-ycyken"}, "edited": false, "score": 1, "creation_date": 1542807652, "post_id": 53412757, "comment_id": 93701179, "body": "Nice solution, I used your approach and fixed some misses. <code>template &lt;typename T, size_t Offset, size_t... Is&gt; \tconstexpr auto fill_container_seq(std::index_sequence&lt;Is...&gt;) \t{ \t\treturn _container&lt;_ptr&lt;T&gt;, sizeof...(Is)&gt;{std::make_shared&lt;T&gt;(Is + Offset)...}; \t}  \ttemplate&lt;typename T, size_t N, size_t Offset&gt; \tconstexpr auto fill_container() \t{ \t\treturn fill_container_seq&lt;T, Offset&gt;(std::make_index_sequence&lt;N&gt;{}); \t}</code> You can post it to your answer - so i will delete it from here cus of bad formatting."}], "tags": [], "owner": {"reputation": 868, "user_id": 4051512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8bd3beb8e3334400c9d43118b2206a62?s=128&d=identicon&r=PG&f=1", "display_name": "papagaga", "link": "https://stackoverflow.com/users/4051512/papagaga"}, "is_accepted": true, "score": 3, "last_activity_date": 1542805691, "creation_date": 1542805691, "answer_id": 53412757, "question_id": 53412000, "link": "https://stackoverflow.com/questions/53412000/compile-time-creation-of-class-member-stl-container-const-stdarray-filled-wi/53412757#53412757", "title": "Compile time creation of class member stl container (const std::array) filled with elements", "body": "<p><strong>About the first question</strong>: yes, it is possible. It is even quite easy provided that you can use C++11 and variadic templates.</p>\n\n<p>To generate a compile-time list of indices, you can use <code>std::make_index_sequence&lt;N&gt;</code>, which will return a <code>std::index_sequence&lt;0, 1, 2, 3, ..., N-1&gt;</code>. You can then pattern-match it with the function creating the compile-time array:</p>\n\n<pre><code>template &lt;std::size_t... Ns&gt;\nconstexpr auto fill_it_at_compile_time_impl(std::index_sequence&lt;Ns...&gt;) {\n    return std::array&lt;unsigned, sizeof...(Ns)&gt;{ Ns... };\n}\n\ntemplate &lt;std::size_t N&gt;\nconstexpr auto fill_it_at_compile_time() {\n    return fill_it_at_compile_time_impl(std::make_index_sequence&lt;N&gt;());\n}\n</code></pre>\n\n<p>If you want to add an offset to the <code>index_sequence</code> members, just do so in the array initialization:</p>\n\n<pre><code>constexpr auto offset = 10u;\ntemplate &lt;std::size_t... Ns&gt;\nconstexpr auto fill_it_at_compile_time_impl(std::index_sequence&lt;Ns...&gt;) {\n    return std::array&lt;unsigned, sizeof...(Ns)&gt;{ (offset+Ns)... };\n}\n</code></pre>\n\n<p><strong>About the second question:</strong>\nAs far as I understand it, yes, it's possible. First, create a helper <code>struct</code> to query the index of <code>_limited_str</code>:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct query_max_index; \ntemplate &lt;std::size_t N&gt;\nstruct query_max_index&lt;IndexStr&lt;N&gt;&gt; {\n    static const auto max_index = N;\n};\n</code></pre>\n\n<p>Then, rather than refering to <code>_maxStrIndexes</code> directly, you can query it from indirectly from <code>_limited_str_ptr</code>:</p>\n\n<pre><code>using _limited_str_ = IndexStr&lt;_maxStrIndexes&gt;;\nusing _limited_str_ptr = _ptr&lt;_limited_str_&gt;;\nusing _limited_str_ptr_container = _container&lt;_limited_str_ptr, query_max_index&lt;std::decay_t&lt;decltype(*std::declval&lt;_limited_str_ptr&gt;())&gt;&gt;::max_index&gt;;\n</code></pre>\n"}], "owner": {"reputation": 1089, "user_id": 5299433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dc842e32992ec3c0d8cd694c26afb70?s=128&d=identicon&r=PG&f=1", "display_name": "Smit Ycyken", "link": "https://stackoverflow.com/users/5299433/smit-ycyken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 53412757, "answer_count": 1, "score": 0, "last_activity_date": 1542808104, "creation_date": 1542803144, "last_edit_date": 1542808104, "question_id": 53412000, "link": "https://stackoverflow.com/questions/53412000/compile-time-creation-of-class-member-stl-container-const-stdarray-filled-wi", "title": "Compile time creation of class member stl container (const std::array) filled with elements", "body": "<p>I tried to create a minimal example as it is possible with templates.</p>\n\n<p>(MSVC15, c++14)</p>\n\n<p>There are 2 questions may be connected with each other.</p>\n\n<h1>Question 1: Is it possible to create at compile time container class member (for example std::array) filled with elements?</h1>\n\n<pre><code>    _limited_int_ptr_container _intIndexes\n    {\n        // _startIntIndex\n        // create indexes???\n        std::make_shared&lt;_limited_int_&gt;(_startIntIndex), // 10060u  _startStrIndex\n        //std::make_shared&lt;_limited_int_&gt;(_startIntIndex + 1),\n        //std::make_shared&lt;_limited_int_&gt;(_startIntIndex + 2),\n        //...\n        std::make_shared&lt;_limited_int_&gt;(_startIntIndex + _maxIntIndexes -1)\n    };\n</code></pre>\n\n<h1>Question 2: Is it possible to combine several template classes with one general template parameter but only once?</h1>\n\n<pre><code>    template &lt;class T, size_t Size&gt;\n    using _container = const std::array&lt;T, Size&gt;;\n\n    template &lt;class T&gt;\n    using _ptr = std::shared_ptr&lt;T&gt;;\n\n    // is it possible to combine this 2 types and use _maxStrIndexes only once?\n    using _limited_str_ = IndexStr&lt;_maxStrIndexes&gt;;\n    using _limited_str_ptr = _ptr&lt;_limited_str_&gt;;\n    using _limited_str_ptr_container = _container&lt;_limited_str_ptr, _maxStrIndexes&gt;;\n</code></pre>\n\n<h1>Full code:</h1>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;array&gt;\n\ntemplate&lt;class T, size_t MaxIndex&gt;\nclass BaseIndex\n{\npublic:\n    virtual ~BaseIndex() = default;\n\n    explicit BaseIndex(const size_t index)\n        : _maxIndex(MaxIndex), _currentIndex(index) {}\n\n    virtual void DoSmth() = 0;\n\n    friend std::ostream &amp; operator &lt;&lt; (std::ostream &amp; ss, BaseIndex &amp; base_index)\n    {\n        ss &lt;&lt; \"Max: \" &lt;&lt; base_index._maxIndex &lt;&lt; \". Current: \" &lt;&lt; base_index._currentIndex &lt;&lt; std::endl;\n        return ss;\n    }\n\nprotected:\n\n    const size_t _maxIndex;\n\n    size_t _currentIndex{ 0u };\n\n};\n\ntemplate&lt;size_t MaxIndex&gt;\nclass IndexStr : public BaseIndex&lt;std::string, MaxIndex&gt;\n{\npublic:\n    explicit IndexStr(const size_t index) :BaseIndex(index) {}\n\n    void DoSmth() override { std::cout &lt;&lt; IndexStr::_maxIndex; }\n};\n\ntemplate&lt;size_t MaxIndex&gt;\nclass IndexInt :public BaseIndex&lt;int, MaxIndex&gt;\n{\npublic:\n    explicit IndexInt(const size_t index) :BaseIndex(index) {}\n\n    void DoSmth() override { std::cout &lt;&lt; IndexInt::_maxIndex; }\n};\n\nclass Manager\n{\nprivate:\n\n    static const size_t _startStrIndex{ 11u };\n    static const size_t _startIntIndex{ 10060u };\n\n    static const size_t _maxStrIndexes{ 5 };\n    static const size_t _maxIntIndexes{ 120 };\n\npublic:\n\n    template &lt;class T, size_t Size&gt;\n    using _container = const std::array&lt;T, Size&gt;;\n\n    template &lt;class T&gt;\n    using _ptr = std::shared_ptr&lt;T&gt;;\n\n    // is it possible to combine this 2 types and use _maxStrIndexes only once?\n    using _limited_str_ = IndexStr&lt;_maxStrIndexes&gt;;\n    using _limited_str_ptr = _ptr&lt;_limited_str_&gt;;\n    using _limited_str_ptr_container = _container&lt;_limited_str_ptr, _maxStrIndexes&gt;;\n\n    // const std::array&lt;std::shared_ptr&lt;IndexStr&lt;_maxStrIndexes&gt;&gt;, _maxStrIndexes&gt; _strIndexes\n    _limited_str_ptr_container _strIndexes\n    {\n        // _startStrIndex\n        // create indexes ???\n        // std::integer_sequence ???\n        std::make_shared&lt;_limited_str_&gt;(_startStrIndex), // 11 = _startStrIndex\n        std::make_shared&lt;_limited_str_&gt;(12),\n        std::make_shared&lt;_limited_str_&gt;(13),\n        std::make_shared&lt;_limited_str_&gt;(14),\n        std::make_shared&lt;_limited_str_&gt;(_startStrIndex + _maxStrIndexes - 1)\n    };\n\n    // is it possible to combine this 2 types and use _maxIntIndexes only once?\n    using _limited_int_ = IndexInt&lt;_maxIntIndexes&gt;;\n    using _limited_int_ptr = _ptr&lt;_limited_int_&gt;;\n    using _limited_int_ptr_container = _container&lt;_limited_int_ptr, _maxIntIndexes&gt;;\n\n    _limited_int_ptr_container _intIndexes\n    {\n        // _startIntIndex\n        // create indexes???\n        std::make_shared&lt;_limited_int_&gt;(_startIntIndex), // 10060u  _startStrIndex\n        //...\n        std::make_shared&lt;_limited_int_&gt;(_startIntIndex + _maxIntIndexes -1)\n    };\n};\n\ntemplate &lt;class T, size_t Size &gt;\nvoid Process(const std::array&lt;std::shared_ptr&lt;T&gt;, Size&gt; _array)\n{\n    for (auto &amp;&amp;baseindex : _array)\n        std::cout &lt;&lt; *baseindex;\n}\n\nint main()\n{\n    Manager m;\n\n    Process(m._strIndexes);\n\n    //Process(m._intIndexes);\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://rextester.com/CMES25434\" rel=\"nofollow noreferrer\">Live demo</a></p>\n"}]