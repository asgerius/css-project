[{"tags": ["c++", "websocket"], "comments": [{"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 3, "creation_date": 1476921728, "post_id": 40143376, "comment_id": 67556705, "body": "<a href=\"https://tools.ietf.org/html/rfc6455\" rel=\"nofollow noreferrer\">tools.ietf.org/html/rfc6455</a>  Also &quot;http is built on tcp&quot; isn&#39;t true.   There is nothing about HTTP that requires TCP."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1476921801, "post_id": 40143376, "comment_id": 67556725, "body": "What do you mean by saying web sockets are built on http? I thought it&#39;s an independent protocol."}, {"owner": {"reputation": 591, "user_id": 5890572, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a85168f5df8ef33245bea615c3668f25?s=128&d=identicon&r=PG&f=1", "display_name": "Trevin Corkery", "link": "https://stackoverflow.com/users/5890572/trevin-corkery"}, "edited": false, "score": 0, "creation_date": 1476921940, "post_id": 40143376, "comment_id": 67556753, "body": "@Newton I was just referring to it was a layer above HTTP. (Which is what I ment but worded it poorly)"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 1, "creation_date": 1476922089, "post_id": 40143376, "comment_id": 67556788, "body": "@xaxxon Nothing requires it, but as a practical matter there are no other implementations. HTTP requires a stream transport, and TCP is the only one in common use on the Internet."}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1476922274, "post_id": 40143376, "comment_id": 67556821, "body": "One question per SO question, please."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1476924783, "post_id": 40143376, "comment_id": 67557423, "body": "The only thing web sockets has to do with HTTP is the handshake-once the handshake completes, it&#39;s web sockets, not HTTP. One of the primary considerations was to explicitly <i>avoid</i> HTTP overhead."}], "answers": [{"comments": [{"owner": {"reputation": 591, "user_id": 5890572, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a85168f5df8ef33245bea615c3668f25?s=128&d=identicon&r=PG&f=1", "display_name": "Trevin Corkery", "link": "https://stackoverflow.com/users/5890572/trevin-corkery"}, "edited": false, "score": 0, "creation_date": 1476922064, "post_id": 40143437, "comment_id": 67556785, "body": "Sorry I forgot to remove that, (I removed it but it&#39;s still not plaintxt)"}], "tags": [], "owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "is_accepted": false, "score": 0, "last_activity_date": 1476925327, "last_edit_date": 1476925327, "creation_date": 1476921953, "answer_id": 40143437, "question_id": 40143376, "link": "https://stackoverflow.com/questions/40143376/c-do-websockets-enforce-encryption-how-to-get-plaintext/40143437#40143437", "title": "C++ - Do WebSockets enforce encryption, how to get &quot;plaintext&quot;?", "body": "<p>In your upgrade response, you are explicitly telling the server that you allow compression:</p>\n\n<pre><code>SendBuffer += \"Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits\\r\\n\\r\\n\";\n</code></pre>\n\n<p>If you don't want compression, remove the <code>permessage-deflate</code> extension.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/DEFLATE\" rel=\"nofollow\">https://en.wikipedia.org/wiki/DEFLATE</a></p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1476926146, "last_edit_date": 1476926146, "creation_date": 1476925577, "answer_id": 40143879, "question_id": 40143376, "link": "https://stackoverflow.com/questions/40143376/c-do-websockets-enforce-encryption-how-to-get-plaintext/40143879#40143879", "title": "C++ - Do WebSockets enforce encryption, how to get &quot;plaintext&quot;?", "body": "<p>Please read <a href=\"https://tools.ietf.org/html/rfc6455\" rel=\"nofollow\">RFC 6455</a>, which defines the WebSocket protocol.  In particular, <a href=\"https://tools.ietf.org/html/rfc6455#section-5\" rel=\"nofollow\">section 5: Data Framing\n</a> and <a href=\"https://tools.ietf.org/html/rfc6455#section-6\" rel=\"nofollow\">section 6: Sending and Receiving Data</a>.</p>\n\n<p>WebSocket is NOT a plain-text protocol.  It is actually a binary protocol using framed messages, which <em>may</em> contain textual data:</p>\n\n<blockquote>\n  <p>After a successful handshake, clients and servers transfer data back and forth in conceptual units referred to in this specification as \"messages\".  On the wire, a message is composed of one or more frames.  The WebSocket message does not necessarily correspond to a particular network layer framing, as a fragmented message may be coalesced or split by an intermediary.</p>\n  \n  <p>A frame has an associated type.  Each frame belonging to the same message contains the same type of data.  Broadly speaking, there are types for textual data (which is interpreted as UTF-8 [RFC3629] text), binary data (whose interpretation is left up to the application), and control frames (which are not intended to carry data for the application but instead for protocol-level signaling, such as to signal that the connection should be closed).  This version of the protocol defines six frame types and leaves ten reserved for future use.</p>\n</blockquote>\n\n<p>Your code is not taking that into account at all.  As far as your socket code is concerned, the only plain-text portion is the initial HTTP upgrade handshake.  After the handshake is complete, you have to send and receive framed binary messages instead.  And unfortunately, the framing process is a bit complex.</p>\n\n<p>Your best option is to NOT implement WebSocket manually at all, but instead use an existing WebSocket library, such as <a href=\"https://libwebsockets.org\" rel=\"nofollow\">libwebsockets</a>, <a href=\"https://github.com/zaphoyd/websocketpp\" rel=\"nofollow\">WebSocket++</a>, <a href=\"https://github.com/dhbaird/easywsclient\" rel=\"nofollow\">easywsclient</a>, etc.</p>\n"}], "owner": {"reputation": 591, "user_id": 5890572, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a85168f5df8ef33245bea615c3668f25?s=128&d=identicon&r=PG&f=1", "display_name": "Trevin Corkery", "link": "https://stackoverflow.com/users/5890572/trevin-corkery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 0, "accepted_answer_id": 40143879, "answer_count": 2, "score": 0, "last_activity_date": 1476926146, "creation_date": 1476921436, "last_edit_date": 1476922105, "question_id": 40143376, "link": "https://stackoverflow.com/questions/40143376/c-do-websockets-enforce-encryption-how-to-get-plaintext", "title": "C++ - Do WebSockets enforce encryption, how to get &quot;plaintext&quot;?", "body": "<p>my friend is learning how to mess around with WebSockets on his web server so I decided to try and learn how to upgrade my HTTP/1.1 connection to WebSockets which has successfully worked! But I send data on the new websocket protocol but I retrieve information that is encrypted/compressed etc.</p>\n\n<p>So my questions are</p>\n\n<ol>\n<li>Is the data Encrypted/Compressed?</li>\n<li>How am I able to retrieve the plaintext?</li>\n<li>Are WebSockets like a TCP connection? (I know WebSockets are built on HTTP, which is built on TCP) but I know they support bi-directional streaming, so I kinda figured plaintext would be received. </li>\n</ol>\n\n<p>Code: (This has no debugging at all because I just whipped it up quickly to connect to a WebSocket echo server that I found messing around with Fiddler)</p>\n\n<pre><code>    int main()\n{\nWSADATA WsaData = { 0 };\nWSAStartup(MAKEWORD(2, 2), &amp;WsaData);\n\naddrinfo hints = { 0 }, *results = nullptr;\nhints.ai_protocol = IPPROTO_TCP;\nhints.ai_socktype = SOCK_STREAM;\nhints.ai_family = AF_INET;\n\ngetaddrinfo(\"echo.websocket.org\", \"80\", &amp;hints, &amp;results);\n\nSOCKET hSocket = socket(results-&gt;ai_family, results-&gt;ai_socktype, results-&gt;ai_protocol);\nconnect(hSocket, results-&gt;ai_addr, static_cast&lt;int&gt;(results-&gt;ai_addrlen));\n\nstd::string SendBuffer;\nSendBuffer = \"GET http://echo.websocket.org HTTP/1.1\\r\\n\";\nSendBuffer += \"Host: echo.websocket.org\\r\\n\";\nSendBuffer += \"Upgrade: websocket\\r\\n\";\nSendBuffer += \"Connection: Upgrade\\r\\n\";\nSendBuffer += \"Origin: http://www.websocket.org\\r\\n\";\nSendBuffer += \"Sec-WebSocket-Key: BBw/08+HrO3UfLPU/jeq1g==\\r\\n\";\nSendBuffer += \"Sec-WebSocket-Version: 13\\r\\n\";\nSendBuffer += \"Sec-WebSocket-Protocol: chat\\r\\n\\r\\n\";\n\n\nchar RecvBuffer[1024], MessageBuffer[50];\nint ReturnCode = 0;\nReturnCode = send(hSocket, SendBuffer.c_str(), SendBuffer.length(), 0);\nReturnCode = recv(hSocket, RecvBuffer, 5000, 0);\n\nReturnCode = send(hSocket, \"Hello!\", 7, 0);\nReturnCode = recv(hSocket, MessageBuffer, 50, 0);\n\n\n    return 0;\n}\n</code></pre>\n\n<p>WebSocket Protocol-Upgrade Reponse:</p>\n\n<pre><code>HTTP/1.1 101 Web Socket Protocol Handshake\nAccess-Control-Allow-Credentials: true\nAccess-Control-Allow-Headers: content-type\nAccess-Control-Allow-Headers: authorization\nAccess-Control-Allow-Headers: x-websocket-extensions\nAccess-Control-Allow-Headers: x-websocket-version\nAccess-Control-Allow-Headers: x-websocket-protocol\nAccess-Control-Allow-Origin: http://www.websocket.org\nConnection: Upgrade\nDate: Wed, 19 Oct 2016 23:54:17 GMT\nSec-WebSocket-Accept: 6+RXVMNG1sZqeIs/Y1tlISzHAFI=\nServer: Kaazing Gateway\nUpgrade: websocket\n</code></pre>\n\n<p>Sending Data to WebSocket Response:</p>\n\n<pre><code>\\x2\\x3\\\u00ea\n</code></pre>\n"}, {"tags": ["c++", "macros", "c-preprocessor", "cout", "x-macros"], "comments": [{"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1476920777, "post_id": 40143265, "comment_id": 67556460, "body": "Rewrite <code>cout &lt;&lt; &quot;Value: = &quot; name;</code> as <code>cout &lt;&lt; &quot;Value: = &quot; &lt;&lt; name;</code>, perhaps?"}, {"owner": {"reputation": 89, "user_id": 6783504, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/29529492c9b569fd01b56bc4c447168e?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Martin", "link": "https://stackoverflow.com/users/6783504/jonathan-martin"}, "reply_to_user": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1476920985, "post_id": 40143265, "comment_id": 67556525, "body": "I just noticed the typo. I added the &lt;&lt; into my code and no dice."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 6783504, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/29529492c9b569fd01b56bc4c447168e?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Martin", "link": "https://stackoverflow.com/users/6783504/jonathan-martin"}, "edited": false, "score": 0, "creation_date": 1476924722, "post_id": 40143418, "comment_id": 67557404, "body": "I&#39;m about to give that a try. Thanks for the input!"}, {"owner": {"reputation": 89, "user_id": 6783504, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/29529492c9b569fd01b56bc4c447168e?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Martin", "link": "https://stackoverflow.com/users/6783504/jonathan-martin"}, "edited": false, "score": 0, "creation_date": 1476924836, "post_id": 40143418, "comment_id": 67557435, "body": "Your code makes more sense, but when I step through the program, it passes through the function without executing the code."}, {"owner": {"reputation": 89, "user_id": 6783504, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/29529492c9b569fd01b56bc4c447168e?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Martin", "link": "https://stackoverflow.com/users/6783504/jonathan-martin"}, "edited": false, "score": 0, "creation_date": 1476924909, "post_id": 40143418, "comment_id": 67557453, "body": "I don&#39;t know if this matters, but when I preprocess to a file, I don&#39;t see the preprocessor&#39;s code. I thought I could expect to see int Crew; int SeatingCapacity; ... and so on. But the file has none of that. Is there some include that I need to use in order to use xmacros?"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "reply_to_user": {"reputation": 89, "user_id": 6783504, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/29529492c9b569fd01b56bc4c447168e?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Martin", "link": "https://stackoverflow.com/users/6783504/jonathan-martin"}, "edited": false, "score": 0, "creation_date": 1476990403, "post_id": 40143418, "comment_id": 67594026, "body": "This code is working fine on my system - perhaps we have something set up differently? I&#39;d recommend posting a new question with the current version of your code so that we can take a look at it."}, {"owner": {"reputation": 89, "user_id": 6783504, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/29529492c9b569fd01b56bc4c447168e?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Martin", "link": "https://stackoverflow.com/users/6783504/jonathan-martin"}, "edited": false, "score": 0, "creation_date": 1477061955, "post_id": 40143418, "comment_id": 67627016, "body": "I&#39;ll do that. Thanks."}], "tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": false, "score": 1, "last_activity_date": 1476921816, "creation_date": 1476921816, "answer_id": 40143418, "question_id": 40143265, "link": "https://stackoverflow.com/questions/40143265/printing-xmacro-struct-to-the-console-with-c/40143418#40143418", "title": "Printing XMacro struct to the console with C++", "body": "<p>You ultimately want to generate code that looks like this:</p>\n\n<pre><code>void iterater(Public_Airplane* p_a) {\n    cout &lt;&lt; \"Crew = \" &lt;&lt; p_a-&gt;Crew &lt;&lt; endl;\n    cout &lt;&lt; \"SeatingCapacity = \" &lt;&lt; p_a-&gt;SeatingCapacity &lt;&lt; endl;\n    ...\n}\n</code></pre>\n\n<p>The general pattern is to print out a string representation of the name, then an equals sign, then to use the arrow operator to select that member out of the class. Here's one way to do this:</p>\n\n<pre><code>void iterater(Public_Airplane *p_a)\n{\n    #define X(type, name) cout &lt;&lt; #name &lt;&lt; \" = \" &lt;&lt; p_a-&gt;name &lt;&lt; endl;\n    X_AIRCRAFT\n    #undef X\n}\n</code></pre>\n\n<p>This uses the stringizing operator # to convert the name into a quoted version of itself.</p>\n"}], "owner": {"reputation": 89, "user_id": 6783504, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/29529492c9b569fd01b56bc4c447168e?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Martin", "link": "https://stackoverflow.com/users/6783504/jonathan-martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1476968765, "creation_date": 1476920640, "last_edit_date": 1476968765, "question_id": 40143265, "link": "https://stackoverflow.com/questions/40143265/printing-xmacro-struct-to-the-console-with-c", "title": "Printing XMacro struct to the console with C++", "body": "<p>I'm playing around with structs and classes and I saw a really cool bit of coding I wanted to try out: the x-macro.</p>\n\n<p>My code is broken up into 3 bits, the header, the x-macro, and the main cpp file. The program isn't finished and there's code coverage and polishing to do still, but I'm trying to build a struct with an x-macro then I want to print the contents of the struct to the screen.</p>\n\n<p>Here's my x-macro</p>\n\n<pre><code>#define X_AIRCRAFT  \\\nX(int, Crew) \\\nX(int, SeatingCapacity) \\\nX(int, Payload) \\\nX(int, Range) \\\nX(int, TopSpeed) \\\nX(int, CargoCapacity) \\\nX(int, FuelCapacity) \\\nX(int, Engines) \\\nX(int, Altitude) \\\nX(double, mach) \\\nX(double, Wingspan)\n</code></pre>\n\n<p>Here's my header (pretty barren right now)</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#ifndef X_AIRCRAFT\n#include \"xmacro.xmacro\"\n#endif // !\n\n\n\nusing namespace std;\n\n\ntypedef struct {\n#define X(type, name) type name;\n\n    X_AIRCRAFT\n#undef X\n}Public_Airplane;\n\n//Prototypes\nvoid iterater(Public_Airplane *p_a);\n</code></pre>\n\n<p>Here's my <code>main()</code> (I've cut out a bunch of code here. What I did here, in summary, was build an Airplane class with different properties. I then built three different subclasses that inherited the properties of Airplane and did their own stuff. So I'll avoid posting the classes at all, unless you guys think that my problem lies there. What I'll do is just post the function that isn't working properly...)</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;iomanip&gt;\n#include \"aircraft.h\"\n\n#ifndef X_AIRCRAFT\n#include \"xmacro.xmacro\"\n#endif // !\n\n\nusing namespace std;\n\n\n\n\n    int main()\n{\n    Public_Airplane p_a;\n\n     iterater(&amp;p_a);\n\n    system(\"pause\");\n    return 0;\n}\n\n\n\nvoid iterater(Public_Airplane *p_a)\n{\n\n    //I want to print to screen the contents of my x-macro (and therefore my struct)\n#define X(type, name) cout &lt;&lt; \"Value: = \" &lt;&lt; name;\n    X_AIRCRAFT\n#undef X\n}\n</code></pre>\n\n<p>I've never worked with macros before, which is why I'm trying to do so now. But to my understanding, the preprocessed code should look something like this:</p>\n\n<pre><code>int crew;\nint SeatingCapacity;\nint Payload\nint Range;              \nint TopSpeed;           \nint CargoCapacity;      \nint FuelCapacity;       \nint Engines;            \nint Altitude;           \ndouble mach;            \ndouble Wingspan;\n\ncout &lt;&lt; \"Value: = \" &lt;&lt; Crew; (and so on down the list).\n</code></pre>\n\n<p>What am I doing wrong that is keeping me from getting the code output above?</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "openmp"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1476922764, "post_id": 40143263, "comment_id": 67556929, "body": "There&#39;s far too little information here for me to do more than speculate.  Are you adding things to <code>nodes</code> while these threads are running (causing the vector(?) to be resized)?"}, {"owner": {"reputation": 49, "user_id": 7044902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81ad58a6562599abac85d9cfa6f82cf9?s=128&d=identicon&r=PG&f=1", "display_name": "Kenneth Cornett", "link": "https://stackoverflow.com/users/7044902/kenneth-cornett"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1476926894, "post_id": 40143263, "comment_id": 67557869, "body": "I am creating the nodes as the threads run.  Each thread initializes the Network with nodes and all.  After creation, the only thing changing in regards to the nodes for each network is the data stored in weights, values, and deltas changing."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1476987382, "post_id": 40143263, "comment_id": 67592202, "body": "You are juggling around with raw owned pointers outside the scope of the code you show. That may or may not be an issue. In general, try to simplify your memory ownership by using <code>std::unique_ptr</code> or just use objects like <code>my_net</code> directly on the stack instead of manually allocating memory. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 49, "user_id": 7044902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81ad58a6562599abac85d9cfa6f82cf9?s=128&d=identicon&r=PG&f=1", "display_name": "Kenneth Cornett", "link": "https://stackoverflow.com/users/7044902/kenneth-cornett"}, "edited": false, "score": 0, "creation_date": 1477017950, "post_id": 40143263, "comment_id": 67603441, "body": "Noted, I&#39;ll make something that recreates this that should be the bare minimum for you guys to recreate the error."}, {"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1566045816, "post_id": 40143263, "comment_id": 101537298, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/46541124/how-do-you-debug-the-bug-that-only-appears-when-the-load-is-huge\">How do you debug the bug that only appears when the load is huge?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 49, "user_id": 7044902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81ad58a6562599abac85d9cfa6f82cf9?s=128&d=identicon&r=PG&f=1", "display_name": "Kenneth Cornett", "link": "https://stackoverflow.com/users/7044902/kenneth-cornett"}, "is_accepted": true, "score": 1, "last_activity_date": 1478487583, "creation_date": 1478487583, "answer_id": 40457180, "question_id": 40143263, "link": "https://stackoverflow.com/questions/40143263/i-am-having-trouble-understanding-how-to-handle-the-heisenbug-segfault-in-my-omp/40457180#40457180", "title": "I am having trouble understanding how to handle the heisenbug segfault in my OMP program", "body": "<p>I am writing a post because I identified my problem with the help of a local university professor.  The issue I was having turned out to be a heap corruption problem due to the scope of memory being used in the program.  This caused the threads to bypass their own memory allocation and start using other thread's memory space on the heap to store the information they could not fit into their own heap.</p>\n\n<p>I was able to handle this by changing all object pointers to be <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"nofollow noreferrer\">shared_ptrs</a> which prevented the memory locations from being overridden until all references to the objects were properly removed.  I also changed all array pointers, or pointers being used as arrays, to vectors.  After doing this, my problem vanished into thin air and it stopped randomly crashing.</p>\n\n<p>And thanks Zulan for the recommendation as well!</p>\n"}], "owner": {"reputation": 49, "user_id": 7044902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81ad58a6562599abac85d9cfa6f82cf9?s=128&d=identicon&r=PG&f=1", "display_name": "Kenneth Cornett", "link": "https://stackoverflow.com/users/7044902/kenneth-cornett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "closed_date": 1566111210, "accepted_answer_id": 40457180, "answer_count": 1, "score": -2, "last_activity_date": 1566045795, "creation_date": 1476920624, "last_edit_date": 1566045795, "question_id": 40143263, "link": "https://stackoverflow.com/questions/40143263/i-am-having-trouble-understanding-how-to-handle-the-heisenbug-segfault-in-my-omp", "closed_reason": "Not suitable for this site", "title": "I am having trouble understanding how to handle the heisenbug segfault in my OMP program", "body": "<p>I am having trouble in a side project I'm doing for a personal Neural Network structure.  The issue I am encountering is the Heisenbug Segfault, and it is occurring in a paralleled section of code for a custom Monte Carlo algorithm I am writing.  </p>\n\n<p>The threads should not be interacting in any way for this section of the code until they reach the critical section I have defined, but some how, memory locations for local variables in a function call are being overridden by another thread, or the function call itself is overriding the memory position allocated by a previous thread.</p>\n\n<p>I believe this person's problem is the same as the one I am experiencing, but I lack the understanding of how to use his enlightenment to fix my code, since, he did not specify how he fixed his issue.\n<a href=\"https://stackoverflow.com/questions/10729732/openmp-causes-heisenbug-segfault\">OpenMP Causes Heisenbug Segfault</a></p>\n\n<p>Here is the parallel section of the code I have written with the \"tested\" critical add in commented out, since, it did not help with the bug.  The section where the bug is occurring is</p>\n\n<pre><code>#include \"Network.h\"\n#include &lt;vector&gt;\n#include &lt;cmath&gt;\n#include &lt;thread&gt;\n#include &lt;omp.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;iostream&gt;\nusing namespace std;\nusing namespace AeroSW;\nint main(){\n    // Generate X amount of blueprints\n    vector&lt;vector&lt;double&gt; &gt; inputs;\n    vector&lt;vector&lt;double&gt; &gt; outputs;\n    double sf = 1100000;\n    double lr = 0.1;\n    uint32_t duration = 3;\n    for(uint32_t i = 0; i &lt; 1000; i++){\n        vector&lt;double&gt;* in = new vector&lt;double&gt;(3);\n        vector&lt;double&gt;* out = new vector&lt;double&gt;(1); // These can be different sizes, but for simplicity for example\n        (*in)[0] = i;\n        (*in)[1] = i+1;\n        (*in)[2] = i+2;\n        (*out)[0] = i * 1000;\n        inputs.push_back(*in);\n        outputs.push_back(*out);\n    }\n    vector&lt;vector&lt;int&gt; &gt; bps;\n    int n_i = 3;\n    int n_o = 1;\n    for(uint32_t i = 0; i &lt;= 3; i++){\n        int num_bps_for_this_layer = pow(7, i);\n        int* val_array = new int[i];\n        for(uint32_t j = 0; j &lt; i; j++){\n            val_array[j] = 7;\n        }\n        for(uint32_t j = 0; j &lt; (unsigned)num_bps_for_this_layer; j++){\n            vector&lt;int&gt;* vec_i = new vector&lt;int&gt;(2+i);\n            (*vec_i)[0] = n_i;\n            (*vec_i)[i+1] = n_o;\n            for(uint32_t k = 0; k &lt; i; k++){\n                (*vec_i)[k+1] = val_array[k];\n            }\n            bps.push_back(*vec_i);\n            if(i &gt; 0){\n                uint32_t t_i = i-1; // Temp i\n                val_array[t_i]--;\n                bool b_flag = false; // break flag\n                while(val_array[t_i] == 0){\n                    val_array[t_i] = 7;\n                    if(t_i == 0){\n                        b_flag = true;\n                        break;\n                    }\n                    t_i--;\n                    val_array[t_i]--;\n                }\n                if(b_flag) break;\n            }\n        }\n    }\n    //cout &lt;&lt; \"Hello World\\n\";\n    uint32_t num_bins = 10;\n    uint32_t num_threads = std::thread::hardware_concurrency(); // Find # of cores\n    if(num_threads == 0) // Assume 1 core for systems w/out multiple cores\n        num_threads = 1;\n    if(num_bins &lt; num_threads){\n        num_threads = num_bins;\n    }\n    uint32_t bp_slice = bps.size() / num_threads;\n    #pragma omp parallel num_threads(num_threads) firstprivate(num_bins, n_i, n_o, lr)\n    {\n        uint32_t my_id = omp_get_thread_num();\n        uint32_t my_si = my_id * bp_slice; // my starting index\n        uint32_t my_ei; // my ending index, exclusive\n        if(my_id == num_threads -1) my_ei = bps.size();\n        else my_ei = my_si + bp_slice;\n        std::vector&lt;Network*&gt; my_nets;\n        for(uint32_t i = my_si; i &lt; my_ei; i++){\n            uint32_t nl = bps[i].size();\n            uint32_t* bp = new uint32_t[nl];\n            for(uint32_t j = 0; j &lt; nl; j++){\n                bp[j] = bps[i][j];\n            }\n            Network* t_net = new Network(lr, bp, nl);\n            my_nets.push_back(t_net);\n        }\n            for(uint32_t i = 0; i &lt; my_nets.size(); i++){\n                for(uint32_t j = 0; j &lt; num_bins; j++){\n                    my_nets[i]-&gt;train(inputs, outputs, sf, inputs.size(), duration);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>If anyone sees something I do not, or knows what I could potentially do to fix this issue, please let me know!</p>\n\n<p>Here is a sample output from Valgrind Debugger with the Helgrind tool active which describes the problem I believe as well.</p>\n\n<pre><code>==26386== \n==26386== Possible data race during read of size 8 at 0x6213348 by thread #1\n==26386== Locks held: none\n==26386==    at 0x40CB26: AeroSW::Node::get_weight(unsigned int) (Node.cpp:84)\n==26386==    by 0x40E688: AeroSW::Network::train_tim(std::vector&lt;std::vector&lt;double, std::allocator&lt;double&gt; &gt;, std::allocator&lt;std::vector&lt;double, std::allocator&lt;double&gt; &gt; &gt; &gt;, std::vector&lt;std::vector&lt;double, std::allocator&lt;double&gt; &gt;, std::allocator&lt;std::vector&lt;double, std::allocator&lt;double&gt; &gt; &gt; &gt;, double, unsigned int, unsigned long) (Network.cpp:227)\n==26386==    by 0x4058F1: monte_carlo(unsigned int, unsigned int, unsigned int, unsigned int, unsigned int, double, double, double, std::vector&lt;double*, std::allocator&lt;double*&gt; &gt;&amp;) [clone ._omp_fn.0] (Validation.cpp:196)\n==26386==    by 0x5462E5E: GOMP_parallel (in /usr/lib/x86_64-linux-gnu/libgomp.so.1.0.0)\n==26386==    by 0x404B86: monte_carlo(unsigned int, unsigned int, unsigned int, unsigned int, unsigned int, double, double, double, std::vector&lt;double*, std::allocator&lt;double*&gt; &gt;&amp;) (Validation.cpp:136)\n==26386==    by 0x402467: main (NeuralNetworkArchitectureDriver.cpp:85)\n==26386==  Address 0x6213348 is 24 bytes inside a block of size 32 in arena \"client\"\n==26386== \n</code></pre>\n\n<p>-UPDATE-\nIt is a heap corruption problem.  I had to modify a ton of code, but I got it working using shared_ptrs and vectors.  The threads were overriding memory locations they should not have had access to, which caused other threads to crash because information they were trying to access had been changed.</p>\n"}, {"tags": ["c++", "c++11", "asynchronous", "boost-asio"], "answers": [{"comments": [{"owner": {"reputation": 4752, "user_id": 1226676, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/81a8c25931e45888eec1b07e094add07?s=128&d=identicon&r=PG", "display_name": "nathan lachenmyer", "link": "https://stackoverflow.com/users/1226676/nathan-lachenmyer"}, "edited": false, "score": 0, "creation_date": 1476919424, "post_id": 40143021, "comment_id": 67556058, "body": "I considered that; Windows Firewall has been disabled, though, so it shouldn&#39;t be the issue.  I also tried an asio UDP Receiver and was able to send socket messages just fine."}], "tags": [], "owner": {"reputation": 371, "user_id": 4571746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f05d82cc52205e3fe7d15142726913f1?s=128&d=identicon&r=PG&f=1", "display_name": "MatzZze", "link": "https://stackoverflow.com/users/4571746/matzzze"}, "is_accepted": false, "score": 1, "last_activity_date": 1476919078, "creation_date": 1476919078, "answer_id": 40143021, "question_id": 40142972, "link": "https://stackoverflow.com/questions/40142972/asio-async-server-not-accepting-connections/40143021#40143021", "title": "asio async server not accepting connections", "body": "<p>Is there a chance that your firewall blocks the process/port?</p>\n"}, {"tags": [], "owner": {"reputation": 1083, "user_id": 6826608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f02198302f3fb7b19ad09d9a9713a4e0?s=128&d=identicon&r=PG&f=1", "display_name": "Donghui Zhang", "link": "https://stackoverflow.com/users/6826608/donghui-zhang"}, "is_accepted": true, "score": 2, "last_activity_date": 1476919613, "creation_date": 1476919613, "answer_id": 40143099, "question_id": 40142972, "link": "https://stackoverflow.com/questions/40142972/asio-async-server-not-accepting-connections/40143099#40143099", "title": "asio async server not accepting connections", "body": "<p>Your problem is that asio::io_service::run() immediately returns due to lack of work. To keep the io_service running, you should create an <a href=\"http://www.boost.org/doc/libs/1_62_0/doc/html/boost_asio/reference/io_service__work.html\" rel=\"nofollow\">io_service::work</a> object. </p>\n"}], "owner": {"reputation": 4752, "user_id": 1226676, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/81a8c25931e45888eec1b07e094add07?s=128&d=identicon&r=PG", "display_name": "nathan lachenmyer", "link": "https://stackoverflow.com/users/1226676/nathan-lachenmyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 40143099, "answer_count": 2, "score": 1, "last_activity_date": 1549999757, "creation_date": 1476918733, "last_edit_date": 1549999757, "question_id": 40142972, "link": "https://stackoverflow.com/questions/40142972/asio-async-server-not-accepting-connections", "title": "asio async server not accepting connections", "body": "<p>I created an async server based heavily off of the <a href=\"http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/tutorial/tutdaytime3.html\" rel=\"nofollow noreferrer\">Daytime Async TCP Server example</a>, but using C++11 instead of boost.  Here's the server class:</p>\n\n<pre><code> class TcpServer {\n  public:\n    static std::shared_ptr&lt;TcpServer&gt; make(int port);\n    ~TcpServer();\n    void start();\n  protected:\n      TcpServer(int port);\n      void init(int port);\n      void createSession();\n      void onConnect(std::vector&lt;std::shared_ptr&lt;TcpSession&gt;&gt;::iterator session_iter, const asio::error_code&amp; error);\n      asio::io_service mService;\n      std::thread mServiceThread;\n      asio::ip::tcp::acceptor mAcceptor;\n      asio::ip::tcp::socket mSocket;\n      asio::ip::tcp::endpoint mLocalEndpoint;\n      std::vector &lt; std::shared_ptr&lt;TcpSession&gt;&gt; mSessions;\n  };\n\nstd::shared_ptr&lt;TcpServer&gt; TcpServer::make(int port) {\n    std::shared_ptr&lt;TcpServer&gt; Server(new TcpServer(port));\n    return Server;\n}\n\nTcpServer::TcpServer(int port) : mSocket(mService), mAcceptor(mService) {\n    init(port);\n}\n\nTcpServer::~TcpServer() {\n    mSocket.cancel();\n    mService.stop();\n    if (mServiceThread.joinable()) {\n        mServiceThread.join();\n    }\n}\n\nvoid TcpServer::start() {\n    createSession();\n}\n\nvoid TcpServer::init(int port) {\n    mLocalEndpoint = asio::ip::tcp::endpoint(asio::ip::tcp::v4(), port);\n\n    std::printf(\"TcpServer -- Creating endpoint %s:%d ...\\n\", mLocalEndpoint.address().to_string().c_str(), mLocalEndpoint.port());\n\n    mAcceptor.open(mLocalEndpoint.protocol());\n    mAcceptor.set_option(asio::ip::tcp::acceptor::reuse_address(true));\n    mAcceptor.bind(mLocalEndpoint);\n    mAcceptor.listen();\n\n    mServiceThread = std::thread([&amp;] {\n        mService.run();\n    });\n\n}\n\nvoid TcpServer::createSession() {\n    std::printf(\"TcpServer -- Creating new session...\\n\");\n    std::shared_ptr&lt;TcpSession&gt; newSession = TcpSession::make(mService);\n    std::vector&lt;std::shared_ptr&lt;TcpSession&gt;&gt;::iterator iterator = mSessions.insert(mSessions.end(), newSession);\n\n    mAcceptor.async_accept(newSession-&gt;getSocket(), \n      [this, iterator](const asio::error_code &amp;error) {\n      std::printf(\"Async Accept\\n\");\n      onConnect(iterator, error);\n    });\n}\n\nvoid TcpServer::onConnect(std::vector&lt;std::shared_ptr&lt;TcpSession&gt;&gt;::iterator session_iter, const asio::error_code&amp; error) {\n    if (!error) {\n        std::printf(\"TcpServer -- Connection from %s received!\\n\", (*session_iter)-&gt;getSocket().remote_endpoint().address().to_string().c_str());\n\n    // Write a response\n    //auto buff = std::make_shared&lt;std::string&gt;(\"Hello World!\\r\\n\\r\\n\");\n\n    //asio::async_write((*session_iter)-&gt;getSocket(), asio::buffer(*buff), \n    //  [this, session_iter](const asio::error_code &amp;error, std::size_t bytesReceived) {\n    //  onWrite(session_iter, error, bytesReceived);\n    //});\n\n    // begin listening\n    //receive(session_iter);\n\n}\nelse {\n    std::printf(\"TcpServer::onConnect -- Error receiving data. %s\\n\", error.message().c_str());\n    mSessions.erase(session_iter);\n}\n}\n</code></pre>\n\n<p>and then small TcpSession class:</p>\n\n<pre><code>class TcpSession {\n    public:\n        ~TcpSession();\n        static std::shared_ptr&lt;TcpSession&gt; make(asio::io_service&amp; service){\n        asio::ip::tcp::socket&amp; getSocket() {\n            return mSocket;\n        }\n    protected:\n        TcpSession(asio::io_service&amp; service);\n        asio::ip::tcp::socket mSocket;\n    };\n</code></pre>\n\n<p>I create an instance of the server and run it like so:</p>\n\n<pre><code>void main() {\n    mServer = TcpServer::make(8060);\n    mServer-&gt;start();\n}\n</code></pre>\n\n<p>I then try to connect to it with a lightweight TCP/IP app like TCP/IP Builder (for Windows); however, I never see any of the messages from <code>onConnect</code> suggesting that I've made a connection.</p>\n\n<p>Does anyone have any suggestions of what might be wrong?</p>\n\n<p>thanks!</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 1754, "user_id": 4605946, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/pNIMp.png?s=128&g=1", "display_name": "space_voyager", "link": "https://stackoverflow.com/users/4605946/space-voyager"}, "reply_to_user": {"reputation": 19, "user_id": 6819989, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e11599835ec63635b04dde7e0a1e8a38?s=128&d=identicon&r=PG&f=1", "display_name": "Twista", "link": "https://stackoverflow.com/users/6819989/twista"}, "edited": false, "score": 0, "creation_date": 1476919561, "post_id": 40142997, "comment_id": 67556098, "body": "@Twista Don&#39;t forget to upvote and accept the answer in case it meets your needs :)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1476922276, "post_id": 40142997, "comment_id": 67556822, "body": "Needs a bit of  explanation, but that&#39;s easily solved with descriptive variable names."}], "tags": [], "owner": {"reputation": 1754, "user_id": 4605946, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/pNIMp.png?s=128&g=1", "display_name": "space_voyager", "link": "https://stackoverflow.com/users/4605946/space-voyager"}, "is_accepted": false, "score": 0, "last_activity_date": 1476918902, "creation_date": 1476918902, "answer_id": 40142997, "question_id": 40142940, "link": "https://stackoverflow.com/questions/40142940/drawing-an-iscosceles-triangle-of-asteriks-on-c/40142997#40142997", "title": "Drawing an iscosceles triangle of asteriks on C++", "body": "<p>Here's how you can do it:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main(){\n    for(int i=1;i&lt;20;i++){\n        int k;\n        if (i&lt;=10)\n        {\n            k = i;\n        }\n        else\n        {\n            k = 20-i;\n        }\n        for(int j=0;j&lt;k;j++)\n        {\n            cout &lt;&lt; \"*\";\n        }\n        cout &lt;&lt; endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>*\n**\n***\n****\n*****\n******\n*******\n********\n*********\n**********\n*********\n********\n*******\n******\n*****\n****\n***\n**\n*\n</code></pre>\n\n<p>The basic idea is to switch the mapping from the maximum number of asterisks being <code>i</code> in the first half of the triangle (up to line 10) to the mapping <code>20-i</code> for the second half of the triangle.</p>\n"}, {"comments": [{"owner": {"reputation": 1754, "user_id": 4605946, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/pNIMp.png?s=128&g=1", "display_name": "space_voyager", "link": "https://stackoverflow.com/users/4605946/space-voyager"}, "edited": false, "score": 0, "creation_date": 1476920186, "post_id": 40143139, "comment_id": 67556280, "body": "Good stuff, but it&#39;s generally not good to have copy-pasted parts of code like you do with the for loops that print the asterisks."}, {"owner": {"reputation": 133, "user_id": 6107989, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sDZvS.jpg?s=128&g=1", "display_name": "Nicky HFE", "link": "https://stackoverflow.com/users/6107989/nicky-hfe"}, "reply_to_user": {"reputation": 1754, "user_id": 4605946, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/pNIMp.png?s=128&g=1", "display_name": "space_voyager", "link": "https://stackoverflow.com/users/4605946/space-voyager"}, "edited": false, "score": 0, "creation_date": 1476920499, "post_id": 40143139, "comment_id": 67556371, "body": "Yeah, realized that. Had the answer in my mind when I saw this question. Took some time to load the compiler and you answered. Still your code is much more elegant :)"}], "tags": [], "owner": {"reputation": 133, "user_id": 6107989, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sDZvS.jpg?s=128&g=1", "display_name": "Nicky HFE", "link": "https://stackoverflow.com/users/6107989/nicky-hfe"}, "is_accepted": false, "score": 1, "last_activity_date": 1476920754, "last_edit_date": 1476920754, "creation_date": 1476919812, "answer_id": 40143139, "question_id": 40142940, "link": "https://stackoverflow.com/questions/40142940/drawing-an-iscosceles-triangle-of-asteriks-on-c/40143139#40143139", "title": "Drawing an iscosceles triangle of asteriks on C++", "body": "<p>Alternative to @space_voyager this code support dynamic size so you can have as large as you can define with the size. </p>\n\n<p>The algorithm here is</p>\n\n<ol>\n<li>Check if current index or iteration is in the middle (in this case, 11. Programmatically is 10).</li>\n<li>If true, iterate j from 0 to current index of I.</li>\n<li>If false (that means that the current index is greater than the middle), iterate j from size - I in decreasing order.</li>\n</ol>\n\n<h1>How size - I works?<br></h1>\n\n<p>At the first iteration where it is true (I > 10, therefore when I = 11) size - I = 21-11. You get 10, hence the output will print 10 times. Second time I = 12. You'll get decreasing result as you go.</p>\n\n<p><br></p>\n\n<pre><code>int main(){\n    int size = 21;\n\n    for(int i=1;i&lt;size;i++){\n        if(i &lt;=size/2)\n        {\n            for(int j=0;j&lt;i;j++)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            cout &lt;&lt; endl;\n        }\n        else if (i &gt; size/2)\n        {\n            for(int j=size-i; j&gt;0;j--)\n            {\n                cout &lt;&lt; \"*\";\n            }\n            cout &lt;&lt; endl;\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Output</p>\n\n<blockquote>\n<pre><code>*\n**\n***\n****\n*****\n******\n*******\n********\n*********\n**********\n**********\n*********\n********\n*******\n******\n*****\n****\n***\n**\n*\n</code></pre>\n</blockquote>\n\n<h1>Edit</h1>\n\n<p>As per space_voyager said, having copy pasted code is not the best practice. Here's the updated code (similar to his, I only added the dynamic part. Change the value of size, you change everything)</p>\n\n<pre><code>int main(){\n    int size = 20;\n\n    for(int i=1;i&lt;size;i++){\n        int k;\n\n        if(i &lt;=size/2)\n        {\n            k = i;\n        }\n        else if (i &gt; size/2)\n        {\n            k = size-i;\n        }\n\n        for(int j=0; j&lt;k; j++)\n        {\n            cout &lt;&lt; \"*\";\n        }\n        cout &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6819989, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e11599835ec63635b04dde7e0a1e8a38?s=128&d=identicon&r=PG&f=1", "display_name": "Twista", "link": "https://stackoverflow.com/users/6819989/twista"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1476920754, "creation_date": 1476918522, "question_id": 40142940, "link": "https://stackoverflow.com/questions/40142940/drawing-an-iscosceles-triangle-of-asteriks-on-c", "title": "Drawing an iscosceles triangle of asteriks on C++", "body": "<p>I am learning c++ and I'm trying draw an iscosceles triangle using asteriks. My code looks like:</p>\n\n<pre><code>int main(){\nfor(int i=1;i&lt;11;i++){\n    for(int j=0;j&lt;i;j++)\n    {\n        cout &lt;&lt; \"*\";\n    }\n    cout &lt;&lt; endl;\n}\nreturn 0;\n}\n</code></pre>\n\n<p>The top half therefore comes out but how can I start decrementing immediately after reaching j==10 so that i get the bottom half. Please assist. </p>\n"}, {"tags": ["c++", "switch-statement", "inorder"], "comments": [{"owner": {"reputation": 1754, "user_id": 4605946, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/pNIMp.png?s=128&g=1", "display_name": "space_voyager", "link": "https://stackoverflow.com/users/4605946/space-voyager"}, "edited": false, "score": 0, "creation_date": 1476917703, "post_id": 40142781, "comment_id": 67555544, "body": "Are we to understand that in your examples, you have your code in some sort of <code>while</code> loop or other construct that is passing first <code>gateLibrary=0</code>, then <code>gateLibrary=1</code>, etc.?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1476919234, "post_id": 40142781, "comment_id": 67556000, "body": "Table Lookup or lookup table.  You can create a <i>mapping</i> table to map integers to letters (simple array) or you can do something more complex like using <code>std::map</code>."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5983247"}, "is_accepted": false, "score": 0, "last_activity_date": 1476918415, "creation_date": 1476918415, "answer_id": 40142924, "question_id": 40142781, "link": "https://stackoverflow.com/questions/40142781/can-switch-case-in-c-be-used-to-sum-the-outcomes-of-many-selections/40142924#40142924", "title": "Can switch case in c++ be used to sum the outcomes of many selections", "body": "<p>There isn't an expression parser in the c++ library so you can't take the string\"5+3+2\" or whatever and end up with 10 without parsing the string yourself. I think you also misunderstand that case labels can have arbitrary values, so you can just make each label have the \"cost\" you want for each \"gate\".</p>\n"}], "owner": {"reputation": 1, "user_id": 4806353, "user_type": "registered", "profile_image": "https://graph.facebook.com/1641062922774582/picture?type=large", "display_name": "Mahmood Abubakar", "link": "https://stackoverflow.com/users/4806353/mahmood-abubakar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 248, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1476918415, "creation_date": 1476917524, "last_edit_date": 1476917842, "question_id": 40142781, "link": "https://stackoverflow.com/questions/40142781/can-switch-case-in-c-be-used-to-sum-the-outcomes-of-many-selections", "title": "Can switch case in c++ be used to sum the outcomes of many selections", "body": "<p>I am running a Genetic Programming using c++, we found solution depending on how some gates are placed in series, these gates are selected from constant list of gate library within my program. A switch was called inside an inorder function to print out those gates used to get the solution. What i want now is to assign cost to each of the gate and print their SUM as the gates are printed out previously. can i still use switch case for this? this is example </p>\n\n<pre><code>switch1 (gateLibrary)\n{\ncase -1:cout&lt;&lt;\"*\";break;\ncase  0:cout&lt;&lt;\"a\";break;\ncase  1:cout&lt;&lt;\"b\";break;\ncase  2:cout&lt;&lt;\"c\";break;\n             .\n             .\n             .\ncase  n:cout&lt;&lt;\"z\";break;\n}\nexample output: a*b*c\n</code></pre>\n\n<p>This code print the gates selected from gateLibrary stack. for example a*b*c if a,b and c are executed in their cases. Now if a has a cost of 5, b has a cost of 3 and c has a cost of 2 and i want to use another switch to print the total cost as 10 is it possible? I tried something like this for the exact above solution.</p>\n\n<pre><code>switch2 (gateLibrary)\n{\ncase -1:cout&lt;&lt;\"+\";break;\ncase  0:cout&lt;&lt;\"5\";break;\ncase  1:cout&lt;&lt;\"3\";break;\ncase  2:cout&lt;&lt;\"2\";break;\n             .\n             .\n             .\ncase  n:cout&lt;&lt;\"n\";break;\n}\nexample output: 5+3+2 //but i need sum as 10 to be printed here\n</code></pre>\n\n<p>any help will be appreciated using anything appropriate not necessarily a switch. Thanks</p>\n"}, {"tags": ["c++", "cuda", "thrust"], "comments": [{"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 0, "creation_date": 1476940530, "post_id": 40142493, "comment_id": 67561354, "body": "you have to use the cuRAND device API which is documented here: <a href=\"http://docs.nvidia.com/cuda/curand/device-api-overview.html#device-api-overview\" rel=\"nofollow noreferrer\">docs.nvidia.com/cuda/curand/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 164, "user_id": 2696917, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8ebc4fe8d47aad3a02ffdde9c145f765?s=128&d=identicon&r=PG&f=1", "display_name": "GerryR", "link": "https://stackoverflow.com/users/2696917/gerryr"}, "edited": false, "score": 0, "creation_date": 1477939504, "post_id": 40198579, "comment_id": 67951602, "body": "This works perfectly. I prefer CURAND because it ensures a good quality of the random numbers using sequences instead of different seeds. However, I tried using <code>ds = 1000000</code> and the program crashes. It should not be a memory problem (each curandState is 48b)."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "reply_to_user": {"reputation": 164, "user_id": 2696917, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8ebc4fe8d47aad3a02ffdde9c145f765?s=128&d=identicon&r=PG&f=1", "display_name": "GerryR", "link": "https://stackoverflow.com/users/2696917/gerryr"}, "edited": false, "score": 0, "creation_date": 1477939940, "post_id": 40198579, "comment_id": 67951824, "body": "It doesn&#39;t crash for me with ds=1000000.  What OS, GPU, CUDA version, and GPU arch are you compiling for?  If you are on windows visual studio, be sure you are building a 64-bit (x64) release project, not a win32 project and not a debug project.  By the way, the CURAND docs themselves have a <a href=\"http://docs.nvidia.com/cuda/curand/device-api-overview.html#thrust-and-curand-example\" rel=\"nofollow noreferrer\">thrust + CURAND example code</a>"}, {"owner": {"reputation": 164, "user_id": 2696917, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8ebc4fe8d47aad3a02ffdde9c145f765?s=128&d=identicon&r=PG&f=1", "display_name": "GerryR", "link": "https://stackoverflow.com/users/2696917/gerryr"}, "edited": false, "score": 0, "creation_date": 1477940118, "post_id": 40198579, "comment_id": 67951928, "body": "I am using Ubuntu 16.04, GeForce GTX 745/PCIe/SSE2, CUDA 8.0, arch=sm_50, the error I have is: <code>terminate called after throwing an instance of &#39;thrust::system::system_error&#39;  what():  the launch timed out and was terminated</code>"}, {"owner": {"reputation": 164, "user_id": 2696917, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8ebc4fe8d47aad3a02ffdde9c145f765?s=128&d=identicon&r=PG&f=1", "display_name": "GerryR", "link": "https://stackoverflow.com/users/2696917/gerryr"}, "edited": false, "score": 0, "creation_date": 1477940354, "post_id": 40198579, "comment_id": 67952063, "body": "Thank you for the link, although I think it is better to use the <code>thread_id</code> as a sequence id instead of seed (like you did in this solution)."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "reply_to_user": {"reputation": 164, "user_id": 2696917, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8ebc4fe8d47aad3a02ffdde9c145f765?s=128&d=identicon&r=PG&f=1", "display_name": "GerryR", "link": "https://stackoverflow.com/users/2696917/gerryr"}, "edited": false, "score": 1, "creation_date": 1477940813, "post_id": 40198579, "comment_id": 67952260, "body": "Your kernel is running too long on a GPU that is hosting a display.  Read <a href=\"http://nvidia.custhelp.com/app/answers/detail/a_id/3029/~/using-cuda-and-x\" rel=\"nofollow noreferrer\">this</a>. It&#39;s not as a result of any defect in the code."}], "tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 3, "last_activity_date": 1477487926, "last_edit_date": 1477487926, "creation_date": 1477184879, "answer_id": 40198579, "question_id": 40142493, "link": "https://stackoverflow.com/questions/40142493/using-curand-inside-a-thrust-functor/40198579#40198579", "title": "Using CURAND inside a Thrust functor", "body": "<blockquote>\n  <p>Is it possible to use CURAND together with Thrust inside a device functor?</p>\n</blockquote>\n\n<p>Yes, it's possible.  As indicated by @m.s. most of what you need from curand can be gotten from the <a href=\"http://docs.nvidia.com/cuda/curand/device-api-overview.html#device-api-example\" rel=\"nofollow\">curand device api example</a>  in the curand documentation.  (In fact, there is even a full thrust/curand sample code in the documentation <a href=\"http://docs.nvidia.com/cuda/curand/device-api-overview.html#thrust-and-curand-example\" rel=\"nofollow\">here</a>)</p>\n\n<p>We can mimic the behavior of the setup kernel indicated there with a thrust algorithm call, eg. <code>thrust::for_each_n</code> to setup the initial curand state variables for each device vector element.</p>\n\n<p>After that, it is only necessary to pass the initialized curand state to your <code>Move</code> functor via an additional iterator in your zip iterators, and then call <code>curand_uniform</code> (for example) within the functor.</p>\n\n<p>Here is a fully worked example, based on your code:</p>\n\n<pre><code>$ cat t20.cu\n#include &lt;thrust/device_vector.h&gt;\n#include &lt;curand_kernel.h&gt;\n#include &lt;iostream&gt;\n#include &lt;thrust/iterator/counting_iterator.h&gt;\n#include &lt;thrust/transform.h&gt;\n#include &lt;thrust/for_each.h&gt;\n\nconst int seed = 1234;\nconst int ds = 10;\nconst int offset = 0;\n\nstruct Move\n{\n    Move() {}\n\n    using Position = thrust::tuple&lt;double, double, curandState&gt;;\n\n    __device__\n    Position operator()(Position p)\n    {\n        curandState s = thrust::get&lt;2&gt;(p);\n        thrust::get&lt;0&gt;(p) += curand_uniform(&amp;s); // use CURAND to add a random N(0,1)\n        thrust::get&lt;1&gt;(p) += curand_uniform(&amp;s); // use CURAND to add a random N(0,1)\n        thrust::get&lt;2&gt;(p) = s;\n        return p;\n    }\n};\n\nstruct curand_setup\n{\n    using init_tuple = thrust::tuple&lt;int, curandState &amp;&gt;;\n    __device__\n    void operator()(init_tuple t){\n      curandState s;\n      int id = thrust::get&lt;0&gt;(t);\n      curand_init(seed, id, offset, &amp;s);\n      thrust::get&lt;1&gt;(t) = s;\n      }\n};\n\nint main()\n{\n    // Create vectors on device\n    thrust::device_vector&lt;double&gt; p1(ds, 0.0);\n    thrust::device_vector&lt;double&gt; p2(ds, 0.0);\n    thrust::device_vector&lt;curandState&gt; s1(ds);\n\n    // Create zip iterators\n    auto pBeg = thrust::make_zip_iterator(thrust::make_tuple(p1.begin(), p2.begin(), s1.begin()));\n    auto pEnd = thrust::make_zip_iterator(thrust::make_tuple(p1.end(),   p2.end(), s1.end()  ));\n    auto pInit = thrust::make_zip_iterator(thrust::make_tuple(thrust::counting_iterator&lt;int&gt;(0), s1.begin()));\n    // initialize random generator\n    thrust::for_each_n(pInit, ds, curand_setup());\n    // Move points in the vectors\n    thrust::transform(pBeg, pEnd, pBeg, Move());\n\n    // Print result (just for debug)\n    thrust::copy(p1.begin(), p1.end(), std::ostream_iterator&lt;double&gt;(std::cout, \"\\n\"));\n    thrust::copy(p2.begin(), p2.end(), std::ostream_iterator&lt;double&gt;(std::cout, \"\\n\"));\n\n    return 0;\n}\n$ nvcc -arch=sm_61 -std=c++11 t20.cu -o t20 -lcurand\n$ ./t20\n0.145468\n0.820181\n0.550399\n0.29483\n0.914733\n0.868979\n0.321921\n0.782857\n0.0113023\n0.28545\n0.434899\n0.926417\n0.811845\n0.308556\n0.557235\n0.501246\n0.206681\n0.123377\n0.539587\n0.198575\n$\n</code></pre>\n\n<p>Regarding this question:</p>\n\n<blockquote>\n  <p>What is the right way to create random numbers inside the operator function?</p>\n</blockquote>\n\n<p>There is no problem with using curand in thrust, but you might also want to be aware that thrust has a built in <a href=\"https://thrust.github.io/doc/group__random.html\" rel=\"nofollow\">RNG facility</a> and there is a fully worked usage example <a href=\"https://github.com/thrust/thrust/blob/master/examples/monte_carlo.cu\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 164, "user_id": 2696917, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8ebc4fe8d47aad3a02ffdde9c145f765?s=128&d=identicon&r=PG&f=1", "display_name": "GerryR", "link": "https://stackoverflow.com/users/2696917/gerryr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 0, "accepted_answer_id": 40198579, "answer_count": 1, "score": 0, "last_activity_date": 1477487926, "creation_date": 1476915806, "question_id": 40142493, "link": "https://stackoverflow.com/questions/40142493/using-curand-inside-a-thrust-functor", "title": "Using CURAND inside a Thrust functor", "body": "<p>Is it possible to use CURAND together with Thrust inside a device functor? A minimum code example can be:</p>\n\n<pre><code>#include &lt;thrust/device_vector.h&gt;\n\nstruct Move\n{\n    Move() {}\n\n    using Position = thrust::tuple&lt;double, double&gt;;\n\n    __host__ __device__\n    Position operator()(Position p)\n    {\n        thrust::get&lt;0&gt;(p) += 1.0; // use CURAND to add a random N(0,1)\n        thrust::get&lt;1&gt;(p) += 1.0; // use CURAND to add a random N(0,1)\n        return p;\n    }\n};\n\nint main()\n{\n    // Create vectors on device\n    thrust::device_vector&lt;double&gt; p1(10, 0.0);\n    thrust::device_vector&lt;double&gt; p2(10, 0.0);\n\n    // Create zip iterators\n    auto pBeg = thrust::make_zip_iterator(thrust::make_tuple(p1.begin(), p2.begin()));\n    auto pEnd = thrust::make_zip_iterator(thrust::make_tuple(p1.end(),   p2.end()  ));\n\n    // Move points in the vectors\n    thrust::transform(pBeg, pEnd, pBeg, Move());\n\n    // Print result (just for debug)\n    thrust::copy(p1.begin(), p1.end(), std::ostream_iterator&lt;double&gt;(std::cout, \"\\n\"));\n    thrust::copy(p2.begin(), p2.end(), std::ostream_iterator&lt;double&gt;(std::cout, \"\\n\"));\n\n    return 0;\n}\n</code></pre>\n\n<p>What is the right way to create random numbers inside the operator function?</p>\n"}, {"tags": ["python", "c++", "tuples", "python-embedding", "pyobject"], "answers": [{"comments": [{"owner": {"reputation": 365, "user_id": 2479921, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4f608a0f4de520ae40948c28141e10bf?s=128&d=identicon&r=PG", "display_name": "pseudo", "link": "https://stackoverflow.com/users/2479921/pseudo"}, "edited": false, "score": 0, "creation_date": 1476981520, "post_id": 40144243, "comment_id": 67588759, "body": "very awesome! Works like a charm."}], "tags": [], "owner": {"reputation": 147, "user_id": 6842458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6cad0cb02fd8728f8128441d1e6ed67?s=128&d=identicon&r=PG&f=1", "display_name": "John Q.", "link": "https://stackoverflow.com/users/6842458/john-q"}, "is_accepted": true, "score": 6, "last_activity_date": 1476936267, "last_edit_date": 1476936267, "creation_date": 1476928768, "answer_id": 40144243, "question_id": 40142379, "link": "https://stackoverflow.com/questions/40142379/create-python-constructor-with-parameter-from-c-pyobject/40144243#40144243", "title": "Create Python Constructor with parameter from C++, PyObject", "body": "<p>I'm going to rewrite the Python class slightly, just so it uses both the argument and member variable.</p>\n\n<pre><code># B.py - test module\nclass A:\n    def __init__(self, name):\n        self.name = name\n\n    def print_message(self, message):\n        print message + ' ' + self.name\n</code></pre>\n\n<p>As for the C++ part, <em>almost</em> everything looks okay. The error you're getting is because the argument to <code>PyInstance_New</code> should be a tuple. There are multiple ways to call functions or methods. Here is a complete example using one of them:</p>\n\n<pre><code>// test.c - test embedding.\nvoid error_abort(void)\n{\n    PyErr_Print();\n    exit(EXIT_FAILURE);\n}\n\nint main(int argc, char* argv[])\n{\n    PyObject* temp, * args, * attr, * instance;\n\n    Py_Initialize();\n    if (!(temp = PyString_FromString(\"John\")))\n        error_abort();\n    if (!(args = PyTuple_Pack(1, temp)))\n        error_abort();\n    Py_DECREF(temp);\n\n    if (!(temp = PyImport_ImportModule(\"B\")))\n        error_abort();\n    if (!(attr = PyObject_GetAttrString(temp, \"A\")))\n        error_abort();\n    Py_DECREF(temp);\n\n    if (!(instance = PyInstance_New(attr, args, NULL)))\n        error_abort();\n    if (!PyObject_CallMethod(instance, \"print_message\", \"s\", \"Hello\"))\n        error_abort();\n\n    Py_DECREF(args);\n    Py_DECREF(attr);\n    Py_DECREF(instance);\n    Py_Finalize();\n    return 0;\n}\n</code></pre>\n\n<p>For more information see <a href=\"https://docs.python.org/3/extending/embedding.html#pure-embedding\" rel=\"noreferrer\">Python pure-embedding</a>.</p>\n"}], "owner": {"reputation": 365, "user_id": 2479921, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4f608a0f4de520ae40948c28141e10bf?s=128&d=identicon&r=PG", "display_name": "pseudo", "link": "https://stackoverflow.com/users/2479921/pseudo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 842, "favorite_count": 0, "accepted_answer_id": 40144243, "answer_count": 1, "score": 2, "last_activity_date": 1476936267, "creation_date": 1476915218, "question_id": 40142379, "link": "https://stackoverflow.com/questions/40142379/create-python-constructor-with-parameter-from-c-pyobject", "title": "Create Python Constructor with parameter from C++, PyObject", "body": "<p>I have a python class <code>A</code> like this.</p>\n\n<pre><code>class A: \n   def __init__(self, name): \n       self.name = name\n\n   def print_lastname(self, lastname): \n       print(lastname)\n</code></pre>\n\n<p>I have to call this code like this.</p>\n\n<pre><code>import B\na = B.A(\"hello\")\na.print_lastname(\"John\")\n</code></pre>\n\n<p>Currently, I need to use this <code>A</code> class from my C++ code. I have got this far.</p>\n\n<pre><code>Py_Initialize(); \nstring hello = \"hello\"; \nPyObject *module, *attr, *arg; \nmodule = PyObject_ImportModule(\"B\"); // import B\nattr = PyObject_GetAttrString(module, \"A\"); // get A from B\narg = PyString_FromString(hello.c_str()); \ninstance = PyInstance_New(attr, arg, NULL); // trying to get instance of A with parameter \"hello\"\nPy_Finalize(); \n</code></pre>\n\n<p>But I am getting error </p>\n\n<blockquote>\n  <p>Exception TypeError: 'argument list must be tuple' in module 'threading' from '/usr/lib64/python2.7/threading.pyc'</p>\n</blockquote>\n\n<p>How can I achieve from <code>import</code> statement to <code>a.print_name(\"John\")</code> from C++? \nAny help is appreciated.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1476915787, "post_id": 40142375, "comment_id": 67554898, "body": "I don&#39;t think you can achieve what you want with just <code>printf</code>. One possible solution is to use <code>snprintf</code> to get the full value and then manually chop off extra digits that you don&#39;t want."}, {"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 0, "creation_date": 1476915841, "post_id": 40142375, "comment_id": 67554920, "body": "Did you try <code>printf(&quot;%6f %6f&quot;, a, b)</code>? It&#39;s not exactly what you want, but maybe it&#39;s close."}, {"owner": {"reputation": 1754, "user_id": 4605946, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/pNIMp.png?s=128&g=1", "display_name": "space_voyager", "link": "https://stackoverflow.com/users/4605946/space-voyager"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1476916461, "post_id": 40142375, "comment_id": 67555141, "body": "@kaylum You can do it, see my answer."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "reply_to_user": {"reputation": 1754, "user_id": 4605946, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/pNIMp.png?s=128&g=1", "display_name": "space_voyager", "link": "https://stackoverflow.com/users/4605946/space-voyager"}, "edited": false, "score": 0, "creation_date": 1476916565, "post_id": 40142375, "comment_id": 67555177, "body": "@space_voyager Nice"}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 1, "last_activity_date": 1476915715, "creation_date": 1476915715, "answer_id": 40142474, "question_id": 40142375, "link": "https://stackoverflow.com/questions/40142375/printing-correct-number-of-decimal-points-using-f-c/40142474#40142474", "title": "Printing correct number of decimal points using %f c++", "body": "<p>The fundamental problem is that a computer can't exactly represent most floating point numbers.  </p>\n\n<p>Also, you want a complex formatting rule:  <em>if ending digits are zero, print spaces</em>.  </p>\n\n<p>The problem is that your number 987.65000 could be represented as 98.6500001 and so wouldn't work with your formatting rule.  </p>\n\n<p>I believe you will have to write your own formatting function to achieve the functionality you are looking for.</p>\n"}, {"comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1476916945, "post_id": 40142583, "comment_id": 67555311, "body": "This will fail for certain numbers leaving trailing zeroes or removing digits when it shouldn&#39;t."}, {"owner": {"reputation": 1754, "user_id": 4605946, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/pNIMp.png?s=128&g=1", "display_name": "space_voyager", "link": "https://stackoverflow.com/users/4605946/space-voyager"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1476917001, "post_id": 40142583, "comment_id": 67555324, "body": "Can you give an example?"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1476917245, "post_id": 40142583, "comment_id": 67555404, "body": "Any number which when multiplied by 10 repeatedly, will change the value of one or more of its decimal digits. This will happen for some because floating points cannot represent values exactly."}, {"owner": {"reputation": 1754, "user_id": 4605946, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/pNIMp.png?s=128&g=1", "display_name": "space_voyager", "link": "https://stackoverflow.com/users/4605946/space-voyager"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1476917291, "post_id": 40142583, "comment_id": 67555425, "body": "Give an example... I don&#39;t know what you mean."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1476917316, "post_id": 40142583, "comment_id": 67555430, "body": "On a side note, passing a floating value to this function, that is greater than INT_MAX, will cause undefined behavior when it is explicitly converted to int."}, {"owner": {"reputation": 1754, "user_id": 4605946, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/pNIMp.png?s=128&g=1", "display_name": "space_voyager", "link": "https://stackoverflow.com/users/4605946/space-voyager"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1476917429, "post_id": 40142583, "comment_id": 67555469, "body": "Do you mean I should change to <code>long int</code> or something larger?"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1477555825, "post_id": 40142583, "comment_id": 67817513, "body": "Hi. I have found an example: <code>0.50000005960464478f</code> which causes incorrect results. The result should be either 1 or 17, but your function returns 4"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1477558076, "post_id": 40142583, "comment_id": 67818843, "body": "Here is another one: <code>1000000.125f</code>, should return 3 but it returns 1."}], "tags": [], "owner": {"reputation": 1754, "user_id": 4605946, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/pNIMp.png?s=128&g=1", "display_name": "space_voyager", "link": "https://stackoverflow.com/users/4605946/space-voyager"}, "is_accepted": false, "score": 0, "last_activity_date": 1476916304, "creation_date": 1476916304, "answer_id": 40142583, "question_id": 40142375, "link": "https://stackoverflow.com/questions/40142375/printing-correct-number-of-decimal-points-using-f-c/40142583#40142583", "title": "Printing correct number of decimal points using %f c++", "body": "<p>Here's a solution that does what you want:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdio&gt;\nusing namespace std;\n\nunsigned int numPlaces = 5; //number of decimal places\n\nunsigned int determinePlaces (float number) {\n    unsigned int myPlaces = 0;\n    while (number != (int)(number) &amp;&amp; myPlaces&lt;=numPlaces-1) {\n        number = number*10;\n        myPlaces++;\n    }\n    return myPlaces;\n}\n\nint main() {\n    float a = 987.65;\n    float b = 1.23456789;\n\n    printf(\"%.*f %.*f\\n\", determinePlaces(a), a, determinePlaces(b), b);\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>987.65 1.23457\n</code></pre>\n\n<p>Basically, the code keeps on multiplying the goat by 10 until the cast to an integer (essentially taking the floor value) matches the float. If it doesn't when it reaches the fifth multiplication by 10, we satisfy ourselves with a <code>printf</code> of 5 decimal places. Otherwise, we print the amount that was necessary to make the match to the floor value. </p>\n"}, {"tags": [], "owner": {"reputation": 153, "user_id": 6929427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d4dc49eb972862ec853001212b82d75?s=128&d=identicon&r=PG&f=1", "display_name": "ccless1", "link": "https://stackoverflow.com/users/6929427/ccless1"}, "is_accepted": false, "score": 4, "last_activity_date": 1476916347, "creation_date": 1476916347, "answer_id": 40142595, "question_id": 40142375, "link": "https://stackoverflow.com/questions/40142375/printing-correct-number-of-decimal-points-using-f-c/40142595#40142595", "title": "Printing correct number of decimal points using %f c++", "body": "<p>A slightly less technical way to do it would be using <code>setprecision</code>, as displayed below: </p>\n\n\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\nint main()\n{\n    float a = 987.65;\n    float b = 1.23456789;\n\n    cout &lt;&lt; setprecision(5);\n    cout &lt;&lt; a &lt;&lt; \" \" &lt;&lt; b &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>987.65 1.2346\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 5382918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfeedc47e9402b932afe0f3c82f583f5?s=128&d=identicon&r=PG&f=1", "display_name": "NewToCoding", "link": "https://stackoverflow.com/users/5382918/newtocoding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1476916512, "creation_date": 1476915205, "last_edit_date": 1476915475, "question_id": 40142375, "link": "https://stackoverflow.com/questions/40142375/printing-correct-number-of-decimal-points-using-f-c", "title": "Printing correct number of decimal points using %f c++", "body": "<p>I am trying to print a number up to say 5 decimal places.</p>\n\n<p>I have:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdio&gt;\nusing namespace std;\n\nint main() {\n    float a = 987.65;\n    float b = 1.23456789;\n    scanf(\"%f %f\", &amp;a, &amp;b);\n    printf(\"%.5f %.5f\", a, b);\n    return 0;\n}\n</code></pre>\n\n<p>I get the result as 987.65000 and 1.23456 \nI want the result to be 987.65 and 1.23456, so basically I want up to 5 i.e &lt;=5 decimal digits in my answer.</p>\n"}, {"tags": ["c++", "c++11", "variadic-templates"], "answers": [{"tags": [], "owner": {"reputation": 15610, "user_id": 2456565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xa8D9.png?s=128&g=1", "display_name": "krzaq", "link": "https://stackoverflow.com/users/2456565/krzaq"}, "is_accepted": true, "score": 1, "last_activity_date": 1476915447, "creation_date": 1476915447, "answer_id": 40142422, "question_id": 40142353, "link": "https://stackoverflow.com/questions/40142353/assigning-a-variadic-function-pointer-to-stdfunction/40142422#40142422", "title": "Assigning a variadic function pointer to std::function", "body": "<p>You need to make your function pointer deducible:</p>\n\n<pre><code>template&lt;typename R, typename  ...Args&gt;\n    void storeFun(std::string funcName, R (*funcPtr)(Args...)){\n    std::function&lt;R(Args...)&gt; f22 = funcPtr;\n\n    std::cout &lt;&lt; f22(2);\n}\n\nstoreFun(\"fun1\",fun1);\n</code></pre>\n\n<p>or you can call it with explicit parameters: (useful if <code>fun1</code> is overloaded and you don't want to <code>static_cast</code> it into desired type)</p>\n\n<pre><code>storeFun&lt;int, int&gt;(\"fun1\",fun1);\n</code></pre>\n"}], "owner": {"reputation": 1328, "user_id": 1496826, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7b0948fbc76b59e1d7a48df9ccf2b273?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/1496826/mohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 40142422, "answer_count": 1, "score": 0, "last_activity_date": 1476915447, "creation_date": 1476915059, "question_id": 40142353, "link": "https://stackoverflow.com/questions/40142353/assigning-a-variadic-function-pointer-to-stdfunction", "title": "Assigning a variadic function pointer to std::function", "body": "<p>I am trying to pass a function pointer to a std::function argument. This is a part of a bigger code. I want to know whether it is possible to do so? As I know std::function is assignable from a function pointer.</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;iostream&gt;\n\n\ntemplate&lt;typename R, typename  ...Args&gt;\n    void storeFun(std::string funcName, std::function&lt;R(Args...)&gt; funcPtr){\n\n    std::cout &lt;&lt; funcPtr(2);\n}\n\ntemplate&lt;typename R, typename  ...Args, typename funcType&gt;\n    void storeFun2(std::string funcName,funcType funcPtr){\n    std::function&lt;R(Args...)&gt; f22 = funcPtr;\n\n    std::cout &lt;&lt; f22(2);\n}\n\nint fun1(int a){\n    return a;\n}\n\nint main(){\n\n    storeFun(\"fun1\",fun1);\n    storeFun2(\"fun1\",fun1);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["python", "c++"], "comments": [{"owner": {"reputation": 16641, "user_id": 1190934, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Ign26.jpg?s=128&g=1", "display_name": "James Oravec", "link": "https://stackoverflow.com/users/1190934/james-oravec"}, "edited": false, "score": 0, "creation_date": 1476915115, "post_id": 40142336, "comment_id": 67554644, "body": "If you compile your c++ code, then you should be able to call the program as a command line call and pass params into it as needed. Are you looking for something more?"}, {"owner": {"reputation": 109, "user_id": 6845877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/245f62e2a3c665631a367813a3e255ec?s=128&d=identicon&r=PG&f=1", "display_name": "Liping Liu", "link": "https://stackoverflow.com/users/6845877/liping-liu"}, "reply_to_user": {"reputation": 16641, "user_id": 1190934, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Ign26.jpg?s=128&g=1", "display_name": "James Oravec", "link": "https://stackoverflow.com/users/1190934/james-oravec"}, "edited": false, "score": 0, "creation_date": 1476925007, "post_id": 40142336, "comment_id": 67557473, "body": "Can I pass python object in? I tried to ctype, and it seems I can only pass basic data types."}, {"owner": {"reputation": 16641, "user_id": 1190934, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Ign26.jpg?s=128&g=1", "display_name": "James Oravec", "link": "https://stackoverflow.com/users/1190934/james-oravec"}, "edited": false, "score": 0, "creation_date": 1476973382, "post_id": 40142336, "comment_id": 67582930, "body": "I am unaware anything that allows you to work with the other language directly in the other language. Calling one program to service as a service to the other is probably your best approach."}], "owner": {"reputation": 109, "user_id": 6845877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/245f62e2a3c665631a367813a3e255ec?s=128&d=identicon&r=PG&f=1", "display_name": "Liping Liu", "link": "https://stackoverflow.com/users/6845877/liping-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1476914971, "creation_date": 1476914971, "question_id": 40142336, "link": "https://stackoverflow.com/questions/40142336/is-it-possible-to-write-a-single-function-of-python-module-even-a-class-into-c", "title": "Is it possible to write a single function of python module (even a class) into c/c++", "body": "<p>I have tried to wrap my c++ code with the method introduced in the python website: <a href=\"https://docs.python.org/2/extending/extending.html\" rel=\"nofollow\">https://docs.python.org/2/extending/extending.html</a></p>\n\n<p>It seems I have two wrap my c++ code into a separate module. Is possible to write a single method of my module/class in c++ while others in python?</p>\n\n<p>I also superficially checked the boost python and swig. It seems they also pack c++ code into a single module. </p>\n\n<p>Thanks! </p>\n"}, {"tags": ["c++", "list", "stack"], "comments": [{"owner": {"reputation": 4665, "user_id": 6383857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tPDaW.jpg?s=128&g=1", "display_name": "StaticBeagle", "link": "https://stackoverflow.com/users/6383857/staticbeagle"}, "edited": false, "score": 0, "creation_date": 1476914722, "post_id": 40142186, "comment_id": 67554498, "body": "Push should append an element at the end of the stack, so appendNodeback() is the right function to call. For the pop operation you need to remove the last element inserted into the stack, so will have to implement a removeLastNode() function."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1476914881, "post_id": 40142186, "comment_id": 67554553, "body": "It seems that these functions have mixed responsibilities. E.g., both create node and append it somewhere. Things can be simpler when you separate responsibilities. Hey, that concept even has <a href=\"https://en.wikipedia.org/wiki/Single_responsibility_principle\" rel=\"nofollow noreferrer\">its own Wikipedia page</a>! Whoa."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1476914970, "post_id": 40142186, "comment_id": 67554583, "body": "Two scenarios: push from the head/pop from the head or push from the tail/pop from the tail. The point is that the the last element inserted should be the first element removed (LIFO)."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1476926877, "post_id": 40142186, "comment_id": 67557868, "body": "Why not use <a href=\"http://en.cppreference.com/w/cpp/container/stack\" rel=\"nofollow noreferrer\"><code>std::stack</code></a>, or at least <a href=\"http://en.cppreference.com/w/cpp/container/list\" rel=\"nofollow noreferrer\"><code>std::list</code></a>?"}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1476947694, "post_id": 40142186, "comment_id": 67564832, "body": "You don&#39;t need doubly-linked list for stack. Singly-linked list would suffice. Head of list becomes top of the stack. In case you want double-linked list, it doesn&#39;t matter which end you choose - you just have to make sure you <code>push()</code> and <code>pop()</code> from the same end."}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1476947965, "post_id": 40142186, "comment_id": 67565031, "body": "@Cheersandhth.-Alf hey, but creating node involves allocating memory for it and assigning some values to it - that&#39;s mixed responsibilities! Appending somewhere involves setting node pointers and updating list head/tail pointers. That&#39;s mixed responsibilities! I think you take SRP too far."}], "answers": [{"comments": [{"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 0, "creation_date": 1476947420, "post_id": 40145834, "comment_id": 67564661, "body": "&quot;In a linked list class there is virtually no limit to the number of items, so you add artificial limit to make it work like a stack&quot; - there&#39;s no requirement that stack have limit whereas list doesn&#39;t."}], "tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": false, "score": 0, "last_activity_date": 1476939806, "creation_date": 1476939806, "answer_id": 40145834, "question_id": 40142186, "link": "https://stackoverflow.com/questions/40142186/c-stack-using-a-doubly-linked-list/40145834#40145834", "title": "C++ Stack using a doubly linked list", "body": "<p>You can create a stack class, then use linked list class as its container. In a linked list class there is virtually no limit to the number of items, so you add artificial limit to make it work like a stack. In a linked list, items can be added/removed anywhere in the list, you can limit add/remove the tail node only to make it work like stack. The example below demonstrate the usage. </p>\n\n<p>Node that this is purely a programming exercise. Stack is relatively primitive compared to Doubly-linked list. Encapsulating a linked-list inside stack has no advantage. Also note, I declared all members as <code>public</code> for the sake of simplifying the problem, you may want to change some members to <code>protected</code>/<code>private</code></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nusing std::cout;\n\nclass Node\n{\npublic:\n    Node *prev;\n    Node *next;\n    int shares;\n    float pps;\n    Node(int vshares, float vpps)\n    {\n        shares = vshares;\n        pps = vpps;\n        prev = next = nullptr;\n    }\n};\n\nclass dlist\n{\npublic:\n    Node *head;\n    Node *tail;\n\n    dlist()\n    {\n        head = tail = nullptr;\n    }\n    ~dlist()\n    {\n        destroy();\n    }\n\n    void push_back(int shares, float pps) \n    {\n        Node *node = new Node(shares, pps);\n        if (head == NULL) \n        {\n            head = tail = node;\n        }\n        else \n        {\n            tail-&gt;next = node;\n            node-&gt;prev = tail;\n            tail = node;\n        }\n    }\n\n    void destroy() \n    {\n        Node *walk = head;\n        while (walk) \n        {\n            Node *node = walk;\n            walk = walk-&gt;next;\n            delete node;\n        }\n        head = tail = nullptr;\n    }\n};\n\nclass stack\n{\npublic:\n    int maxsize;\n    int count;\n    dlist list;\n    stack(int size)\n    {\n        count = 0;\n        maxsize = size;\n    }\n\n    void push(int num, float price)\n    {\n        if (count &lt; maxsize)\n        {\n            list.push_back(num, price);\n            count++;\n        }\n    }\n\n    void pop()\n    {\n        Node *tail = list.tail;\n        if (!tail)\n        {\n            //already empty\n            return;\n        }\n\n        if (tail == list.head)\n        {\n            //only one element in the list\n            delete tail;\n            list.head = list.tail = nullptr;\n            count--;\n        }\n        else\n        {\n            Node *temp = list.tail-&gt;prev;\n            delete list.tail;\n            list.tail = temp;\n            list.tail-&gt;next = nullptr;\n            count--;\n        }\n    }\n\n    void display()\n    {\n        Node  *walk = list.head;\n        while (walk)\n        {\n            cout &lt;&lt; \"(\" &lt;&lt; walk-&gt;shares &lt;&lt; \",\" &lt;&lt; walk-&gt;pps &lt;&lt; \") \";\n            walk = walk-&gt;next;\n        }\n        cout &lt;&lt; \"\\n\";\n    }\n};\n\nint main()\n{\n    stack s(3);\n    s.push(101, 0.25f);\n    s.push(102, 0.25f);\n    s.push(103, 0.25f);\n    s.push(104, 0.25f);\n    s.display();\n    s.pop();\n    s.display();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6912943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cwl5N.jpg?s=128&g=1", "display_name": "tuckerrking", "link": "https://stackoverflow.com/users/6912943/tuckerrking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4693, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1476939806, "creation_date": 1476914282, "question_id": 40142186, "link": "https://stackoverflow.com/questions/40142186/c-stack-using-a-doubly-linked-list", "title": "C++ Stack using a doubly linked list", "body": "<p>I'm trying to implement a stack using a doubly linked list. I know that the functions for my stack class (push, pop) should contain calls to member functions of my doubly linked list class, but I'm having trouble actually implementing that. </p>\n\n<p>dlist.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include \"dlist.hpp\"\n\nusing namespace std;\n\nvoid dlist::appendNodeFront(int shares, float pps){\n  Node *n = new Node(shares, pps);\n  if(front == NULL){\n    front = n;\n    back = n;\n  }\n  else {\n    front-&gt;prev = n;\n    n-&gt;next = front;\n    front = n;\n  }\n}\n\nvoid dlist::appendNodeBack(int shares, float pps){\n  Node *n = new Node(shares, pps);\n  if(back == NULL){\n    front = n;\n    back = n;\n  }\n  else {\n    back-&gt;next = n;\n    n-&gt;prev = back;\n    back = n;\n  }\n}\n\nvoid dlist::display(){\n  Node  *temp = front;\n  cout &lt;&lt; \"List contents: \";\n  while(temp != NULL){\n    cout &lt;&lt; temp-&gt;value &lt;&lt; \" \";\n    temp = temp-&gt;next;\n  }\n  cout &lt;&lt; endl;\n}\n\nvoid dlist::display_reverse(){\n  Node *temp = back;\n  cout &lt;&lt; \"List contents in reverse: \";\n  while(temp != NULL){\n    cout &lt;&lt; temp-&gt;value &lt;&lt; \" \";\n    temp = temp-&gt;prev;\n  }\n  cout &lt;&lt; endl;\n}\n\nvoid dlist::destroyList(){\n  Node *T = back;\n  while(T != NULL){\n    Node *T2 = T;\n    T = T-&gt;prev;\n    delete T2;\n  }\n  front = NULL;\n  back = NULL;\n}\n</code></pre>\n\n<p>stack.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include \"stack.hpp\"\n\nusing namespace std;\n\nstack::stack(){\n  int i;\n  for(i = 0; i &lt; 1500; i++){\n    shares[i] = 0;\n    pps[i] = 0;\n  }\n  first = 0;\n}\n\nvoid stack::push(int num, float price){\n  if(first ==(1500-1)){\n    cout &lt;&lt; \"Stack is full\" &lt;&lt; endl;\n    return;\n  }\n  first++;\n  shares[first] = num;\n  pps[first] = price;\n\n  return;\n}\n\nvoid stack::pop(int *num, float *price){\n  if(first == -1){\n    cout &lt;&lt; \"Stack is empty\" &lt;&lt; endl;\n    return;\n  }\n\n  num = &amp;shares[first];\n  price = &amp;pps[first];\n\n  cout &lt;&lt; shares[first] &lt;&lt; endl;\n  cout &lt;&lt; pps[first] &lt;&lt; endl;\n  shares[first] = 0;\n  pps[first] = 0;\n  first--;\n  return;\n}\n</code></pre>\n\n<p>Should the push function in stack basically be a call to <code>appendNodeFront()</code> or <code>appendNodeback()</code>? Any help or advice is greatly appreciated!</p>\n"}, {"tags": ["c++", "reference", "typedef", "cyclic"], "comments": [{"owner": {"reputation": 1577, "user_id": 6776535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c515e458c92c554943b271a6789f0372?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Pr&#233;vost", "link": "https://stackoverflow.com/users/6776535/robert-pr%c3%a9vost"}, "edited": false, "score": 0, "creation_date": 1476916874, "post_id": 40142160, "comment_id": 67555283, "body": "I&#39;m not sure that it is possible with either <code>typedef</code> or <code>using</code>.  However, in the abstract, this question doesn&#39;t necessarily concern boost.  A generic template could be constructed to cause this problem.  Posing the question in a more general way may help attract more attention to the problem."}, {"owner": {"reputation": 33, "user_id": 974437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25f97c7995f5b461e5702db47bb50643?s=128&d=identicon&r=PG", "display_name": "Hakuhonoo", "link": "https://stackoverflow.com/users/974437/hakuhonoo"}, "reply_to_user": {"reputation": 1577, "user_id": 6776535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c515e458c92c554943b271a6789f0372?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Pr&#233;vost", "link": "https://stackoverflow.com/users/6776535/robert-pr%c3%a9vost"}, "edited": false, "score": 0, "creation_date": 1476951843, "post_id": 40142160, "comment_id": 67567404, "body": "Yes, you right, Robert. I have made it more general."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 974437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25f97c7995f5b461e5702db47bb50643?s=128&d=identicon&r=PG", "display_name": "Hakuhonoo", "link": "https://stackoverflow.com/users/974437/hakuhonoo"}, "edited": false, "score": 0, "creation_date": 1476957334, "post_id": 40150970, "comment_id": 67571285, "body": "Yes, this is what I need. Potentially infinite deep structure."}, {"owner": {"reputation": 4916, "user_id": 3991400, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5049bb61601c16ae408f5a56b5ed2518?s=128&d=identicon&r=PG&f=1", "display_name": "midor", "link": "https://stackoverflow.com/users/3991400/midor"}, "reply_to_user": {"reputation": 33, "user_id": 974437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25f97c7995f5b461e5702db47bb50643?s=128&d=identicon&r=PG", "display_name": "Hakuhonoo", "link": "https://stackoverflow.com/users/974437/hakuhonoo"}, "edited": false, "score": 0, "creation_date": 1476957555, "post_id": 40150970, "comment_id": 67571441, "body": "Yes, an potentially infinitely deep <i>structure</i>, but not a infinitely deep <i>type</i>. Without a better explanation I can only guess, but I would expect that what you really want is a stack of variants which are either <code>int</code> or <code>function</code>-pointers."}, {"owner": {"reputation": 33, "user_id": 974437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25f97c7995f5b461e5702db47bb50643?s=128&d=identicon&r=PG", "display_name": "Hakuhonoo", "link": "https://stackoverflow.com/users/974437/hakuhonoo"}, "edited": false, "score": 0, "creation_date": 1476958083, "post_id": 40150970, "comment_id": 67571818, "body": "Perhaps I should do it with struct proxy (as I add to the head of this post), but still it looks odd for me. Or... I can return from function not <code>MyType</code>, but <code>void*</code> and then cast in to <code>MyType</code>. Perversion from any side."}, {"owner": {"reputation": 33, "user_id": 974437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25f97c7995f5b461e5702db47bb50643?s=128&d=identicon&r=PG", "display_name": "Hakuhonoo", "link": "https://stackoverflow.com/users/974437/hakuhonoo"}, "edited": false, "score": 0, "creation_date": 1477061924, "post_id": 40150970, "comment_id": 67626990, "body": "I guess, I&#39;ll stop on struct proxy for now"}], "tags": [], "owner": {"reputation": 4916, "user_id": 3991400, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5049bb61601c16ae408f5a56b5ed2518?s=128&d=identicon&r=PG&f=1", "display_name": "midor", "link": "https://stackoverflow.com/users/3991400/midor"}, "is_accepted": true, "score": 0, "last_activity_date": 1476956913, "creation_date": 1476956913, "answer_id": 40150970, "question_id": 40142160, "link": "https://stackoverflow.com/questions/40142160/how-to-resolve-cyclical-links-in-typedefs/40150970#40150970", "title": "How to resolve cyclical links in typedefs?", "body": "<p>You can't do this, because what you are asking for causes an infinite recursion:</p>\n\n<pre><code>typedef std::stack&lt;boost::variant&lt;int, std::function&lt;shared_ptr&lt;MyType&gt;()&gt;&gt;&gt; MyType;\nMyType a;\n</code></pre>\n\n<p>would expand to:</p>\n\n<pre><code>std::stack&lt;boost::variant&lt;int, std::function&lt;shared_ptr&lt;\n    std::stack&lt;boost::variant&lt;int, std::function&lt;shared_ptr&lt;\n        std::stack&lt;boost::variant&lt;int, std::function&lt;shared_ptr&lt;\n            *Infinitely many more here*\n        ()&gt;&gt;&gt;&gt;\n    ()&gt;&gt;&gt;&gt;\n()&gt;&gt;&gt; a;\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 974437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25f97c7995f5b461e5702db47bb50643?s=128&d=identicon&r=PG", "display_name": "Hakuhonoo", "link": "https://stackoverflow.com/users/974437/hakuhonoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 40150970, "answer_count": 1, "score": 0, "last_activity_date": 1476957549, "creation_date": 1476914149, "last_edit_date": 1476957549, "question_id": 40142160, "link": "https://stackoverflow.com/questions/40142160/how-to-resolve-cyclical-links-in-typedefs", "title": "How to resolve cyclical links in typedefs?", "body": "<p>I need to resolve this thing somehow:</p>\n\n<pre><code>  class MyType; // this thing doesn't help here\n  typedef std::stack&lt;boost::variant&lt;int, std::function&lt;shared_ptr&lt;MyType&gt;()&gt;&gt;&gt; MyType;\n</code></pre>\n\n<p>I get an error like this one</p>\n\n<pre><code> error C2371: 'MyType': redefinition; different basic types\n</code></pre>\n\n<p>Any help will be appreciate.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>This can be done easily with using structure as proxy:</p>\n\n<pre><code>struct MyStruct;\ntypedef std::stack&lt;boost::variant&lt;int, std::function&lt;shared_ptr&lt;MyStruct&gt;()&gt;&gt;&gt; MyType;\nstruct MyStruct {\n    MyType data;\n};\n</code></pre>\n\n<p>But must be more handy way to do this.</p>\n"}, {"tags": ["c++", "c", "loops", "for-loop", "optimization"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1476914513, "post_id": 40142136, "comment_id": 67554405, "body": "<code>b = (abc % (bmax * cmax)) &#47; cmax + 1;</code> should be <code>b = (abc % (amax * cmax)) &#47; cmax + 1;</code> Likewise for c: <code>c = (abc % (amax * bmax)) % cmax + 1;</code> Discalaimer: not saying they are now equivalent (maybe more errors)."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1476914546, "post_id": 40142136, "comment_id": 67554427, "body": "Isn&#39;t adding a bunch of divisions more of a pessimization? And it&#39;s a hell of a lot less readable to boot."}, {"owner": {"reputation": 99, "user_id": 2297501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d00776d10f24a30b0874918eee5ed54?s=128&d=identicon&r=PG", "display_name": "Nayd", "link": "https://stackoverflow.com/users/2297501/nayd"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1476916098, "post_id": 40142136, "comment_id": 67555005, "body": "@DanMa\u0161ek yes, it&#39;s usually a bad idea however this was a needed hack since I want use OpenMP parallel for (and OpenMP 2.0 does not support the collapse operator)."}], "answers": [{"tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 2, "last_activity_date": 1476914441, "creation_date": 1476914441, "answer_id": 40142228, "question_id": 40142136, "link": "https://stackoverflow.com/questions/40142136/condensing-nested-loops/40142228#40142228", "title": "Condensing nested loops", "body": "<p>The <code>a</code> loop has <code>amax-1</code> iterations, not <code>amax</code> iterations. Ditto for the <code>b</code> and <code>c</code> loops. So, the single loop should have <code>(amax-1)*(bmax-1)*(cmax-1)</code> iterations.</p>\n\n<p>To extract the <code>a</code>, <code>b</code> and <code>c</code> values treat the single loop index as a mixed base number (the bases you multiplied to find the number of iterations), that is, simple integer division and remainder operations.</p>\n\n<p>Add 1 to each of the resulting values.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1476915652, "post_id": 40142248, "comment_id": 67554850, "body": "Is there any mileage to be gained from using <code>div()</code> from <code>&lt;stdlib.h&gt;</code>?  <code>div_t r1 = div(abc, (bmax * cmax); div_t r2 = div(r1.rem, cmax);</code>?"}], "tags": [], "owner": {"reputation": 8360, "user_id": 2103767, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1d0b20ba537ec3d705cf87f48cd190d7?s=128&d=identicon&r=PG&f=1", "display_name": "bhantol", "link": "https://stackoverflow.com/users/2103767/bhantol"}, "is_accepted": false, "score": 1, "last_activity_date": 1476977926, "last_edit_date": 1476977926, "creation_date": 1476914526, "answer_id": 40142248, "question_id": 40142136, "link": "https://stackoverflow.com/questions/40142136/condensing-nested-loops/40142248#40142248", "title": "Condensing nested loops", "body": "<p>Your first loop runs far less than second loop.</p>\n\n<p>Imagine</p>\n\n<pre><code>int amax = 3;\nint bmax = 3;\nint cmax = 3;\n</code></pre>\n\n<p>Your first loop has 2, 2, 2 = 8 iterations.</p>\n\n<p>Second loop will run through 0 to &lt; <code>(3 * 3* 3 = 27)</code> i.e. <code>27</code> times</p>\n\n<p>Also there are few more issues in the computation of a,b,c checkout the following/ Notice abc starts at 1 and the condition is <code>&lt;=</code>:- \n(Code in c - haven't touched c++ since ages)</p>\n\n<pre><code>   int x = 1;\n   amax-=1; \n   bmax-=1; \n   cmax-=1;\n\n    int a = 1, b = 1, c = 1;\n    for (int abc = 1; abc &lt;= (amax * bmax * cmax); ++abc)\n    {\n        c = abc % cmax;\n        c = c != 0 ? c : cmax;\n\n        var m = ' a='+a+' b='+b+' c='+c+'  ::::'+(x++);\n        printf(\"%s\\n\", m); \n\n\n        a = abc &lt; (bmax*cmax) || abc % ((bmax*cmax)) != 0 ? a : (a + 1) % amax;\n        a = a != 0 ? a : amax;\n        b = abc &lt; cmax || abc % (cmax) != 0 ? b : (b + 1) % bmax;\n        b = b != 0 ? b : bmax;\n    }\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 2297501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d00776d10f24a30b0874918eee5ed54?s=128&d=identicon&r=PG", "display_name": "Nayd", "link": "https://stackoverflow.com/users/2297501/nayd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1476977926, "creation_date": 1476914077, "last_edit_date": 1476914490, "question_id": 40142136, "link": "https://stackoverflow.com/questions/40142136/condensing-nested-loops", "title": "Condensing nested loops", "body": "<p>I'm trying to convert these 3 loops:</p>\n\n<pre><code>for (a = 1; a &lt; amax; a++) {\n    for (b = 1; b &lt; bmax; b++) {\n        for (c = 1; c &lt; cmax; c++) {\n            ...\n        }\n    }\n}\n</code></pre>\n\n<p>to a single loop.</p>\n\n<p>I've tried this:</p>\n\n<pre><code>for (abc = 0; abc &lt; (amax * bmax * cmax); ++abc)\n{\n    a = abc / (bmax * cmax) + 1;\n    b = (abc % (bmax * cmax)) / cmax + 1;\n    c = (abc % (bmax * cmax)) % cmax + 1;\n\n    ...\n}\n</code></pre>\n\n<p>however it is not equivalent. Where's the logic error?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 6, "creation_date": 1476912776, "post_id": 40141842, "comment_id": 67553715, "body": "Why do you think <code>R</code> is defined in the second <code>#ifndef</code>?"}, {"owner": {"reputation": 460, "user_id": 6646109, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh4.googleusercontent.com/-1znlW2V-5jM/AAAAAAAAAAI/AAAAAAAAAKA/_d51kGLtLew/photo.jpg?sz=128", "display_name": "mr_azad", "link": "https://stackoverflow.com/users/6646109/mr-azad"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1476912861, "post_id": 40141842, "comment_id": 67553762, "body": "@tkausl because #endif is not reached yeat"}, {"owner": {"reputation": 42460, "user_id": 642626, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fedc5e6b7fef29a8b539e20da8c85971?s=128&d=identicon&r=PG", "display_name": "Bryan Chen", "link": "https://stackoverflow.com/users/642626/bryan-chen"}, "edited": false, "score": 2, "creation_date": 1476913042, "post_id": 40141842, "comment_id": 67553832, "body": "where is <code>#define R</code>?"}, {"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 1, "creation_date": 1476913055, "post_id": 40141842, "comment_id": 67553840, "body": "As long as there is no #define R R doesn&#39;t become defined."}, {"owner": {"reputation": 9611, "user_id": 3927314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2582809e20e2d5f22b658214b798e83b?s=128&d=identicon&r=PG&f=1", "display_name": "kgf3JfUtW", "link": "https://stackoverflow.com/users/3927314/kgf3jfutw"}, "edited": false, "score": 1, "creation_date": 1476913891, "post_id": 40141842, "comment_id": 67554191, "body": "Looks like the inner <code>#ifndef R</code> is redundant, since you already checked <code>R</code> is not defined outside"}], "answers": [{"tags": [], "owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "is_accepted": false, "score": 0, "last_activity_date": 1476913044, "creation_date": 1476913044, "answer_id": 40141921, "question_id": 40141842, "link": "https://stackoverflow.com/questions/40141842/confusion-with-ifndef-and-ifdef/40141921#40141921", "title": "Confusion with #ifndef and #ifdef", "body": "<p>The second <code>#ifndef</code> is redundant the way you currently have it organized. I'll write this out in a clearer pseudo code</p>\n\n<pre><code>IF R IS NOT DEFINED\n  SET N1 = 10\n  IF R IS NOT DEFINED\n    SET N2 = 11\n  END IF\nEND IF\n</code></pre>\n\n<p>This can be more simply </p>\n\n<pre><code>IF R IS NOT DEFINED\n  SET N1 = 10\n  SET N2 = 11\nEND IF\n</code></pre>\n\n<p>or in C/C++ preprocessor notation </p>\n\n<pre><code>#ifndef R\n#define N1 10\n#define N2 11\n#endif\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": true, "score": 0, "last_activity_date": 1476913123, "creation_date": 1476913123, "answer_id": 40141940, "question_id": 40141842, "link": "https://stackoverflow.com/questions/40141842/confusion-with-ifndef-and-ifdef/40141940#40141940", "title": "Confusion with #ifndef and #ifdef", "body": "<p>Let's walk through the code:</p>\n\n<pre><code>#ifndef R\n</code></pre>\n\n<p><code>R</code> hasn't been defined yet, so step into the branch:</p>\n\n<pre><code>   #define N1 10\n</code></pre>\n\n<p><code>N1</code> becomes 10</p>\n\n<pre><code>   #ifndef R\n</code></pre>\n\n<p><code>R</code> still hasn't been defined yet, so step into nested branch</p>\n\n<pre><code>      #define N2 11\n</code></pre>\n\n<p><code>N2</code> is assigned to 11</p>\n\n<pre><code>   #endif\n</code></pre>\n\n<p>Ends the nested branch</p>\n\n<pre><code>#endif\n</code></pre>\n\n<p>Ends the primary branch</p>\n\n<p>So in the end <code>R</code> was never defined, so we assign <code>N2</code> successfully.</p>\n\n<p>You need to explicitly <code>#define R</code> or use <code>-DR</code> in the compiler line to define <code>R</code>, it won't get defined for you within a <code>ifndef R</code> branch.</p>\n"}], "owner": {"reputation": 460, "user_id": 6646109, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh4.googleusercontent.com/-1znlW2V-5jM/AAAAAAAAAAI/AAAAAAAAAKA/_d51kGLtLew/photo.jpg?sz=128", "display_name": "mr_azad", "link": "https://stackoverflow.com/users/6646109/mr-azad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 40141940, "answer_count": 2, "score": -1, "last_activity_date": 1476913236, "creation_date": 1476912663, "last_edit_date": 1476913236, "question_id": 40141842, "link": "https://stackoverflow.com/questions/40141842/confusion-with-ifndef-and-ifdef", "title": "Confusion with #ifndef and #ifdef", "body": "<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\n#ifndef R\n   #define N1 10\n\n   #ifndef R\n      #define N2 11\n   #endif\n\n\n#endif\n\nint main(){\n    cout &lt;&lt; N2 &lt;&lt; endl;\n}\n</code></pre>\n\n<p>From my understanding if <code>R</code> is not defined then <code>N1</code> will be 10.</p>\n\n<p>And second case where again <code>R</code> is defined again it should not be able to define <code>N2</code> as 11, because <code>R</code> is already defined. I am just confused about it, And one Can please help to understand the point I have missed. </p>\n"}, {"tags": ["c++", "gcc", "clang", "language-lawyer", "noexcept"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1476913112, "post_id": 40141702, "comment_id": 67553864, "body": "I guess GCC decided to take a shortcut once it figured out <code>g</code> is a member function template and so that <code>noexcept</code> can only be <code>true</code>."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1476913257, "post_id": 40141702, "comment_id": 67553929, "body": "@T.C. It may be, but in this case the specialization is invalid. Shouldn&#39;t it fail for <code>S::g&lt;void&gt;</code> (let me say) <i>cannot exist</i> actually?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1476913344, "post_id": 40141702, "comment_id": 67553968, "body": "I didn&#39;t say GCC is right."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1476913579, "post_id": 40141702, "comment_id": 67554075, "body": "Regardless of whether gcc is allowed to not instantiate <code>g&lt;void&gt;</code> or not, you&#39;re not actually testing the <code>noexcept</code>-ness of the functions."}], "answers": [{"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1476913727, "post_id": 40142040, "comment_id": 67554127, "body": "But it&#39;s only an error if we instantiate <code>g</code>, and we don&#39;t instantiate <code>g</code> unless we need the definition, and this doesn&#39;t entail overload resolution, right?"}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1476913886, "post_id": 40142040, "comment_id": 67554188, "body": "@Barry &quot;Instantiation&quot; is concerned with the definition of the function template. Which is why a function template is not instantiated unless its definition is required. The signature is instantiated in many more scenarios. Otherwise something like <code>decltype(g&lt;void&gt;())</code> would not look at <code>g</code>&#39;s return type, which would be really weird."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1476915389, "post_id": 40142040, "comment_id": 67554757, "body": "But that case would involve doing overload resolution, which triggers instantiation."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1476915679, "post_id": 40142040, "comment_id": 67554863, "body": "@Barry It triggers the instantiation of the declaration. The definition is not instantiated."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1476915835, "post_id": 40142040, "comment_id": 67554918, "body": "Note also that <code>decltype(&amp;S::g&lt;void&gt;)</code> fails to compile, as well as <code>decltype(&amp;S::g&lt;void&gt;)</code> and some others. That said, from the answer it&#39;s not clear if you suggest it&#39;s a bug of GCC or not."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1476915978, "post_id": 40142040, "comment_id": 67554964, "body": "@skypjack It is absolutely clear. I said &quot;the behavior is very probably non-conforming&quot;.  And yeah, <code>decltype(&amp;S::g&lt;void&gt;)</code> cannot use the same heuristic that <code>noexcept</code> does, so the declaration needs to be instantiated."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 1, "creation_date": 1476916233, "post_id": 40142040, "comment_id": 67555056, "body": "Not clear because of the <i>probably</i>. It doesn&#39;t mean that <b>it is a bug</b>, it means that <i>it may be</i> a bug. That&#39;s all. ;-)"}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 1, "creation_date": 1476916331, "post_id": 40142040, "comment_id": 67555093, "body": "@skypjack Fine, I&#39;ll make that an absolute statement."}], "tags": [], "owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "is_accepted": true, "score": 3, "last_activity_date": 1476916699, "last_edit_date": 1476916699, "creation_date": 1476913556, "answer_id": 40142040, "question_id": 40141702, "link": "https://stackoverflow.com/questions/40141702/noexcept-operator-and-enable-if-t-do-they-work-together/40142040#40142040", "title": "noexcept operator and enable_if_t: do they work together?", "body": "<p><a href=\"http://eel.is/c++draft/except.spec#13\" rel=\"nofollow\">[except.spec]/13</a>:</p>\n\n<blockquote>\n  <p>The set of potential exceptions of an expression <code>e</code> is empty if <code>e</code> is a\n  core constant expression (5.20).</p>\n</blockquote>\n\n<p>That is, GCC does not even resolve the <em>template-id</em>, because it knows from the get-go that the result is <code>true</code> (since <code>g&lt;void&gt;</code> is not a static data member template specialization whose type has an overloaded <code>operator&amp;</code>). While being clever, the behavior is non-conforming, because any occurrence of a <em>template-id</em> entails the substitution of the arguments into the declaration of the function template. </p>\n"}], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 40142040, "answer_count": 1, "score": 5, "last_activity_date": 1476916699, "creation_date": 1476911970, "question_id": 40141702, "link": "https://stackoverflow.com/questions/40141702/noexcept-operator-and-enable-if-t-do-they-work-together", "title": "noexcept operator and enable_if_t: do they work together?", "body": "<p>Consider the following class:</p>\n\n<pre><code>struct S {\n    template&lt;typename T&gt;\n    std::enable_if_t&lt;std::is_void&lt;T&gt;::value&gt;\n    f() noexcept {}\n\n    template&lt;typename T&gt;\n    std::enable_if_t&lt;not std::is_void&lt;T&gt;::value&gt;\n    g() noexcept {}\n};\n</code></pre>\n\n<p>As expected, this compiles:</p>\n\n<pre><code>s.f&lt;void&gt;();\n</code></pre>\n\n<p>This one does not instead:</p>\n\n<pre><code>s.g&lt;void&gt;();\n</code></pre>\n\n<p>What puzzles me is that the following <code>main</code> compiles with GCC (6.2) and doesn't compile with clang (3.9):</p>\n\n<pre><code>int main() {\n    static_assert(noexcept(&amp;S::f&lt;void&gt;), \"!\");\n    static_assert(noexcept(&amp;S::g&lt;void&gt;), \"!\");\n}\n</code></pre>\n\n<p>I would have said the second assert failed because of the invalid specialization. The two compilers disagree on that.</p>\n\n<p>Which one is correct?</p>\n"}, {"tags": ["c++", "mysql", "qt", "data-structures"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1476912515, "post_id": 40141643, "comment_id": 67553600, "body": "You could serialize your class to xml and put the xml into a database field. Or are you looking to do orm like this <a href=\"http://www.qxorm.com/qxorm_en/home.html\" rel=\"nofollow noreferrer\">qxorm.com/qxorm_en/home.html</a>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1476912722, "post_id": 40141643, "comment_id": 67553696, "body": "With that said I would not recommend either if you are new with Qt and sqlite. I think these will be way over your level at this time."}], "owner": {"reputation": 17, "user_id": 7044652, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GaCrBtC3aQE/AAAAAAAAAAI/AAAAAAAABZk/R8cxiUtlXJM/photo.jpg?sz=128", "display_name": "Juan Rodriguez", "link": "https://stackoverflow.com/users/7044652/juan-rodriguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1476911710, "creation_date": 1476911710, "question_id": 40141643, "link": "https://stackoverflow.com/questions/40141643/qt-sqlite-store-data-structures-upload", "title": "QT SQLite Store data structures upload?", "body": "<p>Hello I'm new to using qt or SQLite so I'm learning as I go. anyways I'm working on a project in which I will define an object which will then go into a data structure and I would like to upload such data structure into mySQlite database, I don't know if this is possible or can anyone point me out in the right direction to accomplish something like this?</p>\n"}, {"tags": ["c++", "pointers", "types", "linked-list", "nodes"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1476913408, "post_id": 40141580, "comment_id": 67553996, "body": "Are you requied to use <code>tail</code>? It does not help at all."}, {"owner": {"reputation": 143, "user_id": 6674630, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/66c9d3405b429b8c7abf38ac0507a267?s=128&d=identicon&r=PG&f=1", "display_name": "TigerCode", "link": "https://stackoverflow.com/users/6674630/tigercode"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1476913661, "post_id": 40141580, "comment_id": 67554094, "body": "Yea unfortunately. :("}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1476915542, "post_id": 40141580, "comment_id": 67554816, "body": "a <code>tail</code> in a single-linked list is only useful for fast inserts at the end of the list, but is otherwise useless since you can&#39;t use it for fast removals at the end of the list."}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 6674630, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/66c9d3405b429b8c7abf38ac0507a267?s=128&d=identicon&r=PG&f=1", "display_name": "TigerCode", "link": "https://stackoverflow.com/users/6674630/tigercode"}, "edited": false, "score": 0, "creation_date": 1476913181, "post_id": 40141815, "comment_id": 67553893, "body": "Its for homework and as such there&#39;s a lot of restrictions to make me consider the why&#39;s and hows of implementation for using smart pointers."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1476913344, "post_id": 40141815, "comment_id": 67553969, "body": "&quot;you are not resetting p-&gt;next to nullptr&quot; It will be fixed when OP will realize that he cannot assign raw pointer to <code>std::unique_ptr</code>. I think it makes sense to use <code>std::unique_ptr</code> if used properly."}, {"owner": {"reputation": 143, "user_id": 6674630, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/66c9d3405b429b8c7abf38ac0507a267?s=128&d=identicon&r=PG&f=1", "display_name": "TigerCode", "link": "https://stackoverflow.com/users/6674630/tigercode"}, "edited": false, "score": 0, "creation_date": 1476913474, "post_id": 40141815, "comment_id": 67554021, "body": "<code>std::unique_ptr&lt;Node&gt; old;</code> and <code>Node* Tail</code> can&#39;t be moved into one another. If I get() tail then it should work."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1476913498, "post_id": 40141815, "comment_id": 67554036, "body": "@Slava: a <code>std::unique_ptr</code> can be reset to nullptr using the <code>reset()</code> method or <code>operator=</code>. However, a proper use of smart pointers in a linked-list implementation would be to use <code>std::shared_ptr</code> instead of <code>std::unique_ptr</code> for the individual nodes, and then make <code>tail</code> and <code>p</code> be <code>std::weak_ptr</code> instead of raw pointers."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1476913692, "post_id": 40141815, "comment_id": 67554109, "body": "@RemyLebeau it will work just fine with <code>std::unique_ptr</code> and raw pointer or experimental <code>observer_ptr</code>, just logic need to be fixed"}, {"owner": {"reputation": 143, "user_id": 6674630, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/66c9d3405b429b8c7abf38ac0507a267?s=128&d=identicon&r=PG&f=1", "display_name": "TigerCode", "link": "https://stackoverflow.com/users/6674630/tigercode"}, "edited": false, "score": 0, "creation_date": 1476913784, "post_id": 40141815, "comment_id": 67554151, "body": "If I could use share_ptr&#39;s this homework problem would be muuuuch simpler for me.   I&#39;m trying to use the operator= method. <code>tail = p;</code> and then <code>p-&gt;next=nullptr;</code> did the trick I believe."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 4, "last_activity_date": 1476915791, "last_edit_date": 1476915791, "creation_date": 1476912567, "answer_id": 40141815, "question_id": 40141580, "link": "https://stackoverflow.com/questions/40141580/c-assignment-of-raw-pointers-to-unique-ptr-nodes-in-a-linked-list/40141815#40141815", "title": "C++ - Assignment of raw pointers to unique_ptr nodes in a Linked List", "body": "<p>The error messages imply that <code>Node::next</code> is a <code>std::unique_ptr&lt;Node&gt;</code>.  You cannot compare/assign a <code>std::unique_ptr</code> directly to a raw pointer.  You need to use the <code>std::unique_ptr::get()</code> method instead:</p>\n\n<pre><code>while (p-&gt;next.get() != tail) {\n    p = p-&gt;next.get();\n}\n</code></pre>\n\n<p>Also, your loop is not taking into account when the list has only 1 node in it (<code>head == tail</code>). <code>p-&gt;next</code> will be <code>nullptr</code> on the second iteration and crash.  And since you would be removing the last node in the list, you would need to reset <code>head</code> to <code>nullptr</code>.  Either way, when assigning <code>p</code> as the new <code>tail</code>, you need to reset <code>p-&gt;next</code> to <code>nullptr</code> so it will no longer be pointing at the old node.</p>\n\n<p>Try this:</p>\n\n<pre><code>int Deque::remove_back(){\n    if (empty()) {\n        throw std::runtime_error(\"Empty\");\n    }\n\n    int return_value = tail-&gt;val;\n\n    if (!head-&gt;next) {\n        head = nullptr; // or: head.reset();\n        tail = nullptr;\n    }\n    else {\n        Node* p = head.get();\n        Node *prev = p;\n        while (p-&gt;next-&gt;next) {\n            p = p-&gt;next.get();\n            prev = p;\n        }\n        tail = prev;\n        tail-&gt;next = nullptr; // or: tail-&gt;next.reset();\n    }\n\n    return return_value;\n}\n</code></pre>\n\n<p>That being said, it can be tricky using <code>std::unique_ptr</code> in a linked-list implementation.  If you want automatic destruction of nodes, you could just use raw pointers and wrap the list inside of a class that destroys the nodes when itself is destroyed, and then <code>remove_back()</code> can destroy the node being removed.</p>\n\n<p>The STL already has such classes available: <code>std::list</code> (double linked) and <code>std::forward_list</code> (single linked).  You should be using them instead of a manual list implementation.</p>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1476915807, "post_id": 40142230, "comment_id": 67554905, "body": "I like your loop better than mine."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1476915060, "last_edit_date": 1476915060, "creation_date": 1476914444, "answer_id": 40142230, "question_id": 40141580, "link": "https://stackoverflow.com/questions/40141580/c-assignment-of-raw-pointers-to-unique-ptr-nodes-in-a-linked-list/40142230#40142230", "title": "C++ - Assignment of raw pointers to unique_ptr nodes in a Linked List", "body": "<p>You function has issue when there is only one element. You need a condition (with code duplicate) or make it little bit more complicated:</p>\n\n<pre><code>int Deque::remove_back(){\n    if (empty()) {throw std::runtime_error(std::string(\"Empty\"));};\n\n    Node *newtail = nullptr;\n    std::unique_ptr&lt;Node&gt; *curr = &amp;head;\n    while( curr-&gt;get() != tail ) {\n        newtail = curr-&gt;get();\n        curr = &amp;(*curr)-&gt;next;\n    }\n\n    tail = newtail;\n    std::unique_ptr&lt;Node&gt; tmp = std::move( *curr );\n\n    return tmp-&gt;val;\n}\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 6674630, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/66c9d3405b429b8c7abf38ac0507a267?s=128&d=identicon&r=PG&f=1", "display_name": "TigerCode", "link": "https://stackoverflow.com/users/6674630/tigercode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1296, "favorite_count": 0, "accepted_answer_id": 40141815, "answer_count": 2, "score": 1, "last_activity_date": 1476915791, "creation_date": 1476911388, "last_edit_date": 1476913283, "question_id": 40141580, "link": "https://stackoverflow.com/questions/40141580/c-assignment-of-raw-pointers-to-unique-ptr-nodes-in-a-linked-list", "title": "C++ - Assignment of raw pointers to unique_ptr nodes in a Linked List", "body": "<p>I'm trying to figure out how to update my tail raw pointer to a new tail after removing a node in my linked list. (is homework)</p>\n\n<p>I've defined the head and tail as</p>\n\n<pre><code>    std::unique_ptr&lt;Node&gt; head ;\n    Node* tail ;\n</code></pre>\n\n<p>and in my function for removing a node from the back I have the following implementation. </p>\n\n<pre><code>int Deque::remove_back(){\nif (empty()) {throw std::runtime_error(std::string(\"Empty\"));};\n\nstd::unique_ptr&lt;Node&gt; old;\n\nNode* p = head.get();\n\nint return_value = tail-&gt;val;\n\nwhile (p-&gt;next != tail)\n{p = p-&gt;next)}\n\nold = move(tail);\ntail = p;\n\nreturn return_value;\n}\n</code></pre>\n\n<p>So tail is a raw pointer of type Node.\nP is a raw pointer of type Node. </p>\n\n<p>Head is a unique pointer of type Node. </p>\n\n<p>I'm setting p = head.get()</p>\n\n<p>so now p points to the head</p>\n\n<p>p = p->next should be iterating down my nodes.</p>\n\n<p>The problem is that <code>p-&gt;next != tail</code> </p>\n\n<p>p->next is a pointer to the next node following whatever p is. </p>\n\n<p>I'm trying to set a pointer to a node to be equal to a raw pointer of type node (tail).</p>\n\n<p>Its telling me I can't do this. </p>\n\n<p>I believe its due to p->next not changing into an owning pointer instead of the observing one I declared it to be. </p>\n\n<p>Errors: </p>\n\n<pre><code>Deque.cpp|68|error: no match for 'operator!=' (operand types are 'std::unique_ptr&lt;Node&gt;' and 'Node*')|\n\nDeque.cpp|69|error: cannot convert 'std::unique_ptr&lt;Node&gt;' to 'Node*' in assignment|\n\nDeque.cpp|71|error: no match for 'operator=' (operand types are 'std::unique_ptr&lt;Node&gt;' and 'std::remove_reference&lt;Node*&amp;&gt;::type {aka Node*}')|\n</code></pre>\n"}, {"tags": ["c++", "qt", "qml"], "comments": [{"owner": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 0, "creation_date": 1476948559, "post_id": 40141573, "comment_id": 67565401, "body": "Did you try to google that? <a href=\"http://doc.qt.io/qt-5/qtquick-localstorage-qmlmodule.html\" rel=\"nofollow noreferrer\">link1</a> <a href=\"http://doc.qt.io/qt-5/qtquick-localstorage-example.html\" rel=\"nofollow noreferrer\">link2</a>"}, {"owner": {"reputation": 7002, "user_id": 2538363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a17eb0f935aaff6b21269f57ccdc1bd?s=128&d=identicon&r=PG", "display_name": "BaCaRoZzo", "link": "https://stackoverflow.com/users/2538363/bacarozzo"}, "edited": false, "score": 0, "creation_date": 1476998875, "post_id": 40141573, "comment_id": 67598442, "body": "First of all you can use <code>Timer</code> to keep everything in QML, no need to move to C++. If you still want to use <code>QTimer</code> remember that <code>LocalStorage</code> creates DBs and <code>QSqlDatabase</code> it&#39;s the C++ class to handle them. You should start from that. Anyhow, I would change approach, totally. Local notifications should be scheduled with <a href=\"http://stackoverflow.com/a/31946656/2538363\"><code>AlarmManager</code></a> on Android (a similar approach can be used in iOS). No need to check for current time, you just set the notification in the future. Easier and more correct."}], "owner": {"reputation": 53, "user_id": 6341488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9faf5dad6b2679418342d2c82250eef7?s=128&d=identicon&r=PG&f=1", "display_name": "joffrey lefort", "link": "https://stackoverflow.com/users/6341488/joffrey-lefort"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 379, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1476911354, "creation_date": 1476911354, "question_id": 40141573, "link": "https://stackoverflow.com/questions/40141573/accessing-qt-quick-local-storage-from-c", "title": "Accessing Qt Quick Local Storage from C++", "body": "<p>I'm currently developing an application for smartphone.</p>\n\n<p>I want to generate a notification every time that the Date match with the time now. Every data are stored on a Qt Quick Local Storage 2.0 that is fill during some process on my QML files.</p>\n\n<p>I'm using a QTimer to check every minute if one of my data match the time now, but my problem is that i dont know how to read the database ...</p>\n\n<p>Or maybe i thinking about using this : WorkerScript but it dont seems that I can run this on the background every minutes when my app is close</p>\n"}, {"tags": ["c++", "c++11", "bitset"], "answers": [{"comments": [{"owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "edited": false, "score": 0, "creation_date": 1476911116, "post_id": 40141512, "comment_id": 67552961, "body": "Is there anyway of doing this with variables ? I just updated my question. I know i can concatenate the integers after converting them to a string"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "edited": false, "score": 0, "creation_date": 1476911729, "post_id": 40141512, "comment_id": 67553257, "body": "@JamesFranco - answer modified (hope this helps)"}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 1, "last_activity_date": 1476911662, "last_edit_date": 1476911662, "creation_date": 1476911062, "answer_id": 40141512, "question_id": 40141463, "link": "https://stackoverflow.com/questions/40141463/assigning-values-to-a-bitset-from-multiple-int-types/40141512#40141512", "title": "assigning values to a bitset from multiple int types", "body": "<p>By example</p>\n\n<pre><code>std::bitset&lt;4&gt; bitset(6UL);\n</code></pre>\n\n<blockquote>\n  <p>I wanted to know how I can assign a value to a bitset if I have ints with the values A=0,B=1,C=1,D=0 ? </p>\n</blockquote>\n\n<p>If you have multiple variable (one variable for every bit) I suppose the best you can do is assign every single bit, how do you know</p>\n\n<pre><code>bitset.set(0, (A != 0));\nbitset.set(1, (B != 0));\nbitset.set(2, (C != 0));\nbitset.set(3, (D != 0));\n</code></pre>\n\n<p>or, simpler,</p>\n\n<pre><code>bitset.set(0, A);\nbitset.set(1, B);\nbitset.set(2, C);\nbitset.set(3, D);\n</code></pre>\n\n<p>If you really want initialize with a single statement (and if the variable have only <code>0</code> and <code>1</code> values), I suppose you can use the bitshift</p>\n\n<pre><code>std::bitset&lt;4&gt; bitset((A &lt;&lt; 3)|(B &lt;&lt; 2)|(C &lt;&lt; 1)|D);\n</code></pre>\n"}], "owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "accepted_answer_id": 40141512, "answer_count": 1, "score": 0, "last_activity_date": 1476912174, "creation_date": 1476910861, "last_edit_date": 1476912174, "question_id": 40141463, "link": "https://stackoverflow.com/questions/40141463/assigning-values-to-a-bitset-from-multiple-int-types", "title": "assigning values to a bitset from multiple int types", "body": "<p>I am using a bitset that is created in the following way</p>\n\n<pre><code>std::bitset&lt;4&gt; bitset;\n</code></pre>\n\n<p>I wanted to know how I can assign a value to a bitset if I have ints with the \nvalues <code>A=0,B=1,C=1,D=0</code> ? </p>\n\n<p>I have read that I could do this</p>\n\n<pre><code>bitset.set(0, false);\nbitset.set(1, true);\nbitset.set(2, true);\nbitset.set(3, false);\n</code></pre>\n\n<p>I wanted to know if there was a faster way for this ? Preferably a single statement ?</p>\n"}, {"tags": ["c++", "boost", "static-linking"], "comments": [{"owner": {"reputation": 41100, "user_id": 1938163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WV0Fi.png?s=128&g=1", "display_name": "Marco A.", "link": "https://stackoverflow.com/users/1938163/marco-a"}, "edited": false, "score": 1, "creation_date": 1476911404, "post_id": 40141412, "comment_id": 67553083, "body": "Posting some of those errors could help, or a <a href=\"http://nopaste.linux-dev.org/\" rel=\"nofollow noreferrer\">nopaste</a> if you need to paste a lot of text (it&#39;s still better for completeness to post the relevant errors here though)"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1476911804, "post_id": 40141412, "comment_id": 67553296, "body": "Might also need <code>boost_chrono</code> and/or <code>boost_thread</code>. Maybe also ICU or iconv (whichever one it uses on Linux). It should be pretty clear from the error messages, once you actually show them."}, {"owner": {"reputation": 61, "user_id": 6552046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888578cf04dd088a627ed1f4b26c5779?s=128&d=identicon&r=PG&f=1", "display_name": "hbadger", "link": "https://stackoverflow.com/users/6552046/hbadger"}, "reply_to_user": {"reputation": 41100, "user_id": 1938163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WV0Fi.png?s=128&g=1", "display_name": "Marco A.", "link": "https://stackoverflow.com/users/1938163/marco-a"}, "edited": false, "score": 0, "creation_date": 1476952535, "post_id": 40141412, "comment_id": 67567835, "body": "I have made little progress by linking also <code>-licuuc</code>, but still it is not a solution. @MarcoA @DanMa\u0161ek  -- (<a href=\"http://nopaste.linux-dev.org/?1120102\" rel=\"nofollow noreferrer\">nopaste.linux-dev.org/?1120102</a>)"}], "owner": {"reputation": 61, "user_id": 6552046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/888578cf04dd088a627ed1f4b26c5779?s=128&d=identicon&r=PG&f=1", "display_name": "hbadger", "link": "https://stackoverflow.com/users/6552046/hbadger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 809, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1476912269, "creation_date": 1476910700, "last_edit_date": 1495541957, "question_id": 40141412, "link": "https://stackoverflow.com/questions/40141412/static-linking-boostlocale", "title": "Static linking, boost::locale", "body": "<p>Due to various non-compatible with each other boost library versions on different systems. I need to link statically program that uses boost::locale.</p>\n\n<p>But I fail to it because of the boost::locale::generator.</p>\n\n<pre><code>// simple example - static_locate.cpp \n#include &lt;boost/locale.hpp&gt;\n\nint main () {\n    boost::locale::generator gen;\n    return 0;\n}\n</code></pre>\n\n<p>g++ build:</p>\n\n<pre><code>$ g++          staic_locale.cpp -lboost_system -lboost_locale || works\n$ g++ --static staic_locale.cpp -lboost_system -lboost_locale &amp;&amp; a lot of linking errors\n</code></pre>\n\n<p>Refering to <a href=\"https://stackoverflow.com/questions/2348200/trying-to-statically-link-boost\">Trying to statically link Boost</a>. Adding <code>-pthread</code> and/or <code>-lboost_thread</code> a little bit helps, but still not completely.</p>\n\n<p><a href=\"http://nopaste.linux-dev.org/?1120099\" rel=\"nofollow noreferrer\">build log (nopaste)</a></p>\n\n<p>system:</p>\n\n<pre><code>$ cat /etc/os-release \nNAME=\"Ubuntu\"\nVERSION=\"15.10 (Wily Werewolf)\"\n</code></pre>\n\n<p>boost version:</p>\n\n<pre><code>$ apt-cache policy libboost-dev \nlibboost-dev:\n  Installed: 1.58.0.0ubuntu1\n</code></pre>\n"}, {"tags": ["c++", "windows", "visual-studio", "qt", "dll"], "comments": [{"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1476910729, "post_id": 40141335, "comment_id": 67552756, "body": "It wouldn&#39;t show as a dependency but it is nonetheless. Did you put it in a <code>platforms</code> folder relative to the executable?"}, {"owner": {"reputation": 779, "user_id": 7043033, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e49cc6f8e650aa248171931e0250dde3?s=128&d=identicon&r=PG&f=1", "display_name": "RA.", "link": "https://stackoverflow.com/users/7043033/ra"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1476910816, "post_id": 40141335, "comment_id": 67552799, "body": "@ddriver Yes, been trying multiple ways, including defining path within <code>qt.conf</code>."}, {"owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "edited": false, "score": 0, "creation_date": 1476910847, "post_id": 40141335, "comment_id": 67552817, "body": "&quot;I have simply copied all of them to Windows 7&quot;: where exactly in Windows 7 did you copy the files?"}, {"owner": {"reputation": 779, "user_id": 7043033, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e49cc6f8e650aa248171931e0250dde3?s=128&d=identicon&r=PG&f=1", "display_name": "RA.", "link": "https://stackoverflow.com/users/7043033/ra"}, "reply_to_user": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "edited": false, "score": 0, "creation_date": 1476911180, "post_id": 40141335, "comment_id": 67552987, "body": "@wasthishelpful Well, it doesn&#39;t matter since my application <code>.exe</code> was there, so it could be on desktop folder or documents. Important thing is that the structure is the same. <code>http:&#47;&#47;i.imgur.com&#47;k91bYHg.png</code>"}, {"owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "edited": false, "score": 0, "creation_date": 1476911662, "post_id": 40141335, "comment_id": 67553219, "body": "My question was to know if you copied the deployed files into the sytem directory instead of the executable directory, and that matters. Your sentence was ambiguous, so my question. Sorry for trying to help"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1476911901, "post_id": 40141335, "comment_id": 67553340, "body": "Dependency Walker can also be used to <i>profile</i> an application (not just a static analysis of modules). It displays (or used to anyway, when it was still supported) which libraries were attempted to load. If that doesn&#39;t lead anywhere, try <a href=\"https://technet.microsoft.com/en-us/sysinternals/processmonitor.aspx\" rel=\"nofollow noreferrer\">Process Monitor</a> to find out, which binaries were attempted to be loaded."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1476912705, "post_id": 40141335, "comment_id": 67553687, "body": "Also make sure, that all DLLs have the correct bitness. A quick way to check is with dumpbin (running the following from a Developer Command Prompt: <code>for &#47;R %f in (*.dll) do (dumpbin &#47;headers &quot;%f&quot; | findstr &quot;machine&quot;)</code>)."}, {"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 1, "creation_date": 1476912858, "post_id": 40141335, "comment_id": 67553760, "body": "... could you please edit your question and add all the files that were deployed? (And by that I mean the exact directory structure)"}, {"owner": {"reputation": 15610, "user_id": 2456565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xa8D9.png?s=128&g=1", "display_name": "krzaq", "link": "https://stackoverflow.com/users/2456565/krzaq"}, "edited": false, "score": 0, "creation_date": 1476912984, "post_id": 40141335, "comment_id": 67553804, "body": "Are you perchance deploying to a virtual machine? I had troubles getting QML to work until I found <code>opengl32sw.dll</code> in Qt Creator&#39;s files."}, {"owner": {"reputation": 779, "user_id": 7043033, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e49cc6f8e650aa248171931e0250dde3?s=128&d=identicon&r=PG&f=1", "display_name": "RA.", "link": "https://stackoverflow.com/users/7043033/ra"}, "reply_to_user": {"reputation": 15610, "user_id": 2456565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xa8D9.png?s=128&g=1", "display_name": "krzaq", "link": "https://stackoverflow.com/users/2456565/krzaq"}, "edited": false, "score": 0, "creation_date": 1476913954, "post_id": 40141335, "comment_id": 67554217, "body": "@krzaq No, I&#39;m not using QML anyways."}, {"owner": {"reputation": 779, "user_id": 7043033, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e49cc6f8e650aa248171931e0250dde3?s=128&d=identicon&r=PG&f=1", "display_name": "RA.", "link": "https://stackoverflow.com/users/7043033/ra"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1476914460, "post_id": 40141335, "comment_id": 67554387, "body": "@IInspectable Process Monitor log till error occurs: <a href=\"http://i.imgur.com/nmjthOu.png\" rel=\"nofollow noreferrer\">i.imgur.com/nmjthOu.png</a>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1476915923, "post_id": 40141335, "comment_id": 67554948, "body": "That process exit code is <code>0xC0000005</code>, i.e. an Access Violation. Have you tried running it under a debugger on the Windows 7 machine? Are you using OS features that were introduced in Windows after Windows 7? What&#39;s the value of your <a href=\"https://msdn.microsoft.com/en-us/library/6sehtctf.aspx\" rel=\"nofollow noreferrer\"><code>_WIN32_WINNT</code></a> preprocessor symbol?"}, {"owner": {"reputation": 779, "user_id": 7043033, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e49cc6f8e650aa248171931e0250dde3?s=128&d=identicon&r=PG&f=1", "display_name": "RA.", "link": "https://stackoverflow.com/users/7043033/ra"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1476917966, "post_id": 40141335, "comment_id": 67555619, "body": "@IInspectable Actually your comment gave me an idea, I made a special compilation of debug version and turns out that apparently a <code>qFatal()</code> is being called (which means abort()). I have logged this and this time abort gave an extra info: <code>[FATAL]: This application failed to start because it could not find or load the Qt platform plugin &quot;windows&quot;.  Reinstalling the application may fix this problem.(kernel\\qguiapplication.cpp:1038 - void __cdecl init_platform(const class QString &amp;,const class QString &amp;,const class QString &amp;,int &amp;,char **))</code>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1476918442, "post_id": 40141335, "comment_id": 67555766, "body": "That&#39;s not much additional information. It&#39;s basically the same you had in your question all along: The <i>&quot;windows&quot;</i> plugin could not be loaded (which happens to be needed for <code>init_platform</code>). So again, have you checked the bitness of the <i>qwindows.dll</i> as well as the bitness of all of its dependencies? All it takes is a single 32-bit DLL to keep an entire 64-bit application from starting (or vice versa)."}, {"owner": {"reputation": 779, "user_id": 7043033, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e49cc6f8e650aa248171931e0250dde3?s=128&d=identicon&r=PG&f=1", "display_name": "RA.", "link": "https://stackoverflow.com/users/7043033/ra"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1476967180, "post_id": 40141335, "comment_id": 67578111, "body": "@IInspectable The bitness of all of the dependencies generated by windeploy are the same: <code>14C machine (x86) 32bit word machine</code>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1476967386, "post_id": 40141335, "comment_id": 67578262, "body": "Did profiling the application using Dependency Walker produce any insights? (See <a href=\"http://www.dependencywalker.com/help/html/application_profiling.htm\" rel=\"nofollow noreferrer\">Using Application Profiling to Detect Dynamic Dependencies</a>.)"}, {"owner": {"reputation": 779, "user_id": 7043033, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e49cc6f8e650aa248171931e0250dde3?s=128&d=identicon&r=PG&f=1", "display_name": "RA.", "link": "https://stackoverflow.com/users/7043033/ra"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1476969633, "post_id": 40141335, "comment_id": 67579821, "body": "@IInspectable I did. <a href=\"http://i.imgur.com/IBcgJuN.png\" rel=\"nofollow noreferrer\">i.imgur.com/IBcgJuN.png</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2760, "user_id": 4355695, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7dGEC.jpg?s=128&g=1", "display_name": "Nikhil VJ", "link": "https://stackoverflow.com/users/4355695/nikhil-vj"}, "edited": false, "score": 0, "creation_date": 1583923869, "post_id": 40146262, "comment_id": 107273086, "body": "Can you please tell how to execute the above yml in windows? I&#39;m not able to get QOwnNotes latest win distro to run on Win 10."}, {"owner": {"reputation": 189, "user_id": 1581487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de150011c0b0eb1047c64e0387a252b9?s=128&d=identicon&r=PG", "display_name": "Patrizio Bekerle", "link": "https://stackoverflow.com/users/1581487/patrizio-bekerle"}, "reply_to_user": {"reputation": 2760, "user_id": 4355695, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7dGEC.jpg?s=128&g=1", "display_name": "Nikhil VJ", "link": "https://stackoverflow.com/users/4355695/nikhil-vj"}, "edited": false, "score": 0, "creation_date": 1583939755, "post_id": 40146262, "comment_id": 107282221, "body": "The <code>appveyor.yml</code> was not meant to be &quot;run&quot; on Windows. It is interpreted by AppVeyor on <a href=\"https://ci.appveyor.com/project/pbek/qownnotes/history\" rel=\"nofollow noreferrer\">ci.appveyor.com/project/pbek/qownnotes/history</a> to build QOwnNotes, but you can see what I do."}, {"owner": {"reputation": 189, "user_id": 1581487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de150011c0b0eb1047c64e0387a252b9?s=128&d=identicon&r=PG", "display_name": "Patrizio Bekerle", "link": "https://stackoverflow.com/users/1581487/patrizio-bekerle"}, "reply_to_user": {"reputation": 2760, "user_id": 4355695, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7dGEC.jpg?s=128&g=1", "display_name": "Nikhil VJ", "link": "https://stackoverflow.com/users/4355695/nikhil-vj"}, "edited": false, "score": 0, "creation_date": 1583939800, "post_id": 40146262, "comment_id": 107282253, "body": "&gt;  I&#39;m not able to get QOwnNotes latest win distro to run on Win 10  What are you trying to achieve, @NikhilVJ? Maybe post an issue on <a href=\"https://github.com/pbek/QOwnNotes/issues/\" rel=\"nofollow noreferrer\">github.com/pbek/QOwnNotes/issues</a>."}, {"owner": {"reputation": 2760, "user_id": 4355695, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7dGEC.jpg?s=128&g=1", "display_name": "Nikhil VJ", "link": "https://stackoverflow.com/users/4355695/nikhil-vj"}, "edited": false, "score": 0, "creation_date": 1583993766, "post_id": 40146262, "comment_id": 107299850, "body": "Sorry, I&#39;ve posted the issue. Got it working with the previous build."}], "tags": [], "owner": {"reputation": 189, "user_id": 1581487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de150011c0b0eb1047c64e0387a252b9?s=128&d=identicon&r=PG", "display_name": "Patrizio Bekerle", "link": "https://stackoverflow.com/users/1581487/patrizio-bekerle"}, "is_accepted": false, "score": 0, "last_activity_date": 1476957947, "last_edit_date": 1476957947, "creation_date": 1476941880, "answer_id": 40146262, "question_id": 40141335, "link": "https://stackoverflow.com/questions/40141335/could-not-find-or-load-the-qt-platform-plugin-windows/40146262#40146262", "title": "Could not find or load the Qt platform plugin &quot;windows&quot;", "body": "<p>This is what I do to deploy <a href=\"http://www.qownnotes.org/\" rel=\"nofollow\">QOwnNotes</a> (Qt5) under Windows: <a href=\"https://github.com/pbek/QOwnNotes/blob/develop/appveyor.yml\" rel=\"nofollow\">https://github.com/pbek/QOwnNotes/blob/develop/appveyor.yml</a></p>\n\n<pre><code># AppVeyor build configuration\n# http://www.appveyor.com/docs/build-configuration\nos: unstable\nskip_tags: true\n\ninstall:\n- set QTDIR=C:\\Qt\\5.5\\mingw492_32\n- set PATH=%PATH%;%QTDIR%\\bin;C:\\MinGW\\bin\n- set RELEASE_PATH=appveyor\\release\n\nbefore_build:\n# getting submodules\n- git submodule update --init\n\nbuild_script:\n# using a header file without MemoryBarrier, that causes the build to fail\n- copy appveyor\\qopenglversionfunctions.h %QTDIR%\\include\\QtGui\n# workaround for MinGW bug\n- sed -i s/_hypot/hypot/g c:\\mingw\\include\\math.h\n- cd src\n# we need to modify that to make it running on AppVeyor\n- sed -i \"s/CONFIG += c++11/QMAKE_CXXFLAGS += -std=gnu++0x/g\" QOwnNotes.pro\n- \"echo #define RELEASE \\\"AppVeyor\\\" &gt; release.h\"\n# setting the build number in the header file\n- \"echo #define BUILD %APPVEYOR_BUILD_NUMBER% &gt; build_number.h\"\n- qmake QOwnNotes.pro -r -spec win32-g++\n#  - qmake QOwnNotes.pro -r -spec win32-g++ \"CONFIG+=debug\"\n- mingw32-make\n# creating the release path\n- md ..\\%RELEASE_PATH%\n# copy the binary to our release path\n- copy release\\QOwnNotes.exe ..\\%RELEASE_PATH%\n# copy OpenSSL DLLs to the release path\n- copy ..\\appveyor\\OpenSSL\\libeay32.dll ..\\%RELEASE_PATH%\n- copy ..\\appveyor\\OpenSSL\\libssl32.dll ..\\%RELEASE_PATH%\n- copy ..\\appveyor\\OpenSSL\\ssleay32.dll ..\\%RELEASE_PATH%\n# copy portable mode launcher to the release path\n- copy ..\\appveyor\\QOwnNotesPortable.bat ..\\%RELEASE_PATH%\n# copy translation files\n- copy languages\\*.qm ..\\%RELEASE_PATH%\n- cd ..\\%RELEASE_PATH%\n# fetching dependencies of QT app\n# http://doc.qt.io/qt-5/windows-deployment.html\n- windeployqt --release QOwnNotes.exe\n# this dll was missed by windeployqt\n- copy ..\\libwinpthread-1.dll . /y\n# this dll didn't work when released by windeployqt\n- copy \"..\\libstdc++-6.dll\" . /y\n# for some reason AppVeyor or windeployqt uses a copy of the German\n# translation file as English one, which screws up the English user interface\n- del \"translations\\qt_en.qm\"\n\nartifacts:\n# pushing entire folder as a zip archive\n- path: appveyor\\release\n    name: QOwnNotes\n\ndeploy:\n# Deploy to GitHub Releases\n- provider: GitHub\n    artifact: QOwnNotes\n    draft: false\n    prerelease: false\n    auth_token:\n    secure: spcyN/Dz3B2GXBPii8IywDLq6vfxC1SrN+xR2wMerFM7g2nTy0Lrh5agQONFoInR\n    on:\n    branch: master\n\nnotifications:\n# Gitter webhook\n- provider: Webhook\n    url: https://webhooks.gitter.im/e/b6ef22402eb4af50f73a\n    on_build_success: true\n    on_build_failure: true\n    on_build_status_changed: false\n</code></pre>\n\n<p>I hope that helps a little...</p>\n"}], "owner": {"reputation": 779, "user_id": 7043033, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e49cc6f8e650aa248171931e0250dde3?s=128&d=identicon&r=PG&f=1", "display_name": "RA.", "link": "https://stackoverflow.com/users/7043033/ra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1465, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1476957947, "creation_date": 1476910382, "last_edit_date": 1495540112, "question_id": 40141335, "link": "https://stackoverflow.com/questions/40141335/could-not-find-or-load-the-qt-platform-plugin-windows", "title": "Could not find or load the Qt platform plugin &quot;windows&quot;", "body": "<p><strong>First of all, to prevent duplicate reports I have tried multiple solutions given <a href=\"https://stackoverflow.com/questions/17366967/failed-to-load-platform-plugin-windows-available-platforms-are-error\">here</a>, <a href=\"https://stackoverflow.com/questions/20495620/qt-5-1-1-application-failed-to-start-because-platform-plugin-windows-is-missi\">here</a>, <a href=\"https://stackoverflow.com/questions/33647986/qwindows-dll-never-found-in\">here</a>, <a href=\"https://stackoverflow.com/questions/18368826/deploying-qt-c-application-from-visual-studio-qwindows-dll-error\">here</a> and <a href=\"https://stackoverflow.com/questions/14963881/failed-to-load-platform-plugin-windows-available-platforms-are-windows-minim\">here</a>.</strong></p>\n\n<p>I am using Qt 5.5.1 with Visual Studio 2012 and developed my app on Windows 10 x64 (not using Qt Creator). Application is compiled in release mode.</p>\n\n<p>Actually, my application is <strong>working</strong> on my PC, without any issues and the only libraries I need in my directory are:</p>\n\n<pre><code>Qt5Core.dll\nQt5Gui.dll\nQt5WinExtras.dll\nQt5Widgets.dll\nQt5Network.dll\nmsvcp110.dll\nmsvcr110.dll\n</code></pre>\n\n<p>Now, when I try to launch my application on fresh installation of Windows 7 x86 I am getting the following error message:</p>\n\n<blockquote>\n  <p>This application failed to start because it could not find or load the Qt platform plugin \"windows\".</p>\n  \n  <p>Reinstalling the application may fix this problem.</p>\n</blockquote>\n\n<p>Now I can't get rid of it. According to the previously asked questions it can be a issue with <code>qwindows.dll</code> file (or more precisely with application couldn't locate it), first of all I made a deploy of my release directory like this:</p>\n\n<p><code>[..]\\msvc2012\\bin&gt;windeployqt.exe &lt;PATH&gt;</code></p>\n\n<p>It has generated all files that are needed for my application to launch, including <code>platforms/qwindows.dll</code> so I have simply copied all of them to Windows 7 directory without any effect - error still occurs.</p>\n\n<p>I have also tried to manually copy a <code>qwindows.dll</code> from the <code>msvc2012\\plugins\\platforms</code> - no effect,</p>\n\n<p>Last step I did was a inspection of my application in the <a href=\"http://www.dependencywalker.com\" rel=\"nofollow noreferrer\">Dependency Walker</a> - suprisingly, there is no <code>qwindows.dll</code> related dependency:</p>\n\n<p><a href=\"https://i.stack.imgur.com/HRHyn.png\" rel=\"nofollow noreferrer\">image</a></p>\n\n<p>So I am out of ideas now, what is the problem here?</p>\n"}, {"tags": ["c++", "char", "printf"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1476910711, "post_id": 40141312, "comment_id": 67552749, "body": "Interestingly when I run this code I get 22 as my output. Why are you printing to <code>stderr</code> instead of <code>stdout</code>?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1476910819, "post_id": 40141312, "comment_id": 67552802, "body": "You&#39;re returning a temporary = bad news."}, {"owner": {"reputation": 231, "user_id": 5738959, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/966faaff8342c844d6c5946386b0966c?s=128&d=identicon&r=PG&f=1", "display_name": "Jecke", "link": "https://stackoverflow.com/users/5738959/jecke"}, "edited": false, "score": 0, "creation_date": 1476911269, "post_id": 40141312, "comment_id": 67553036, "body": "How can I work if I can&#39;t use the values my function returns? :( I need to put that string into fprintf...  (the whole code is just an abstraction of something much bigger, and this is supposed to be a debug information, that&#39;s why it is stderr)"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1476911402, "post_id": 40141312, "comment_id": 67553080, "body": "@Jecke: Are you writing C or C++? Use a <code>std::string</code>, use <code>std::cerr</code> if you&#39;re writing C++"}, {"owner": {"reputation": 231, "user_id": 5738959, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/966faaff8342c844d6c5946386b0966c?s=128&d=identicon&r=PG&f=1", "display_name": "Jecke", "link": "https://stackoverflow.com/users/5738959/jecke"}, "edited": false, "score": 0, "creation_date": 1476912183, "post_id": 40141312, "comment_id": 67553459, "body": "I&#39;m writing in C++, but I use fprintf because it&#39;s much more convenient. I can have <code>fprintf(&quot;blah %s blah %lu blah %s\\n&quot;, a, b, c)</code> instead of <code>cerr &lt;&lt; &quot;blah&quot; &lt;&lt; a &lt;&lt; &quot;blah&quot; &lt;&lt; b &lt;&lt; &quot;blah&quot; &lt;&lt; c &lt;&lt; endl;</code>... it&#39;s much shorter and flexible. In fact, I have <code>#define debug_out( ... ) if (debug) fprintf(stderr, __VA_ARGS__ )</code> at the beginning and I don&#39;t have to worry about how much different arguments I want to print and it&#39;s much much cleaner"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1476912781, "post_id": 40141312, "comment_id": 67553719, "body": "Please don&#39;t edit the solution into the question. Answers go in the Answer box. You can either accept someone&#39;s answer, or post and accept your own answer."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1476912843, "post_id": 40141312, "comment_id": 67553755, "body": "BTW in C++ you can rig up something like <code>tprint(&quot;blah % blah % blah&quot;, a, b, c);</code> where you don&#39;t need a format specifier because it detects the format from the type of the argument"}, {"owner": {"reputation": 231, "user_id": 5738959, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/966faaff8342c844d6c5946386b0966c?s=128&d=identicon&r=PG&f=1", "display_name": "Jecke", "link": "https://stackoverflow.com/users/5738959/jecke"}, "edited": false, "score": 0, "creation_date": 1476913192, "post_id": 40141312, "comment_id": 67553895, "body": "ok, sorry. How could I do that?"}], "answers": [{"comments": [{"owner": {"reputation": 669, "user_id": 5802698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7203cec6d5c278002279ffae236ff5?s=128&d=identicon&r=PG&f=1", "display_name": "Sawel", "link": "https://stackoverflow.com/users/5802698/sawel"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1476910918, "post_id": 40141448, "comment_id": 67552857, "body": "True. Fixed. Thanks."}, {"owner": {"reputation": 231, "user_id": 5738959, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/966faaff8342c844d6c5946386b0966c?s=128&d=identicon&r=PG&f=1", "display_name": "Jecke", "link": "https://stackoverflow.com/users/5738959/jecke"}, "edited": false, "score": 0, "creation_date": 1476911039, "post_id": 40141448, "comment_id": 67552923, "body": "Hmm... so if I create a function int return5() { short a = 5; return a; }, I cannot expect that cout &lt;&lt; 2*return5(); will print 10? Or does this only not work with strings?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1476911276, "post_id": 40141448, "comment_id": 67553040, "body": "<i>&quot;In order to fix it you can return a reference to std::string&quot;</i> -- It sounds like you&#39;re suggesting replacing a dangling pointer with a dangling reference. If not, I&#39;m not sure what you&#39;re suggesting here."}, {"owner": {"reputation": 669, "user_id": 5802698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7203cec6d5c278002279ffae236ff5?s=128&d=identicon&r=PG&f=1", "display_name": "Sawel", "link": "https://stackoverflow.com/users/5802698/sawel"}, "edited": false, "score": 0, "creation_date": 1476911345, "post_id": 40141448, "comment_id": 67553060, "body": "Well this will actually work, when you return an object (char*, int) then it is just copied, for int it will copy its data, for char* it will copy its address. If you return std::string it will copy its data as well But when you exit the scope, the destructor is called, and now the address of the c_str string, is not valid anymore, the memory was cleaned! Now you hold in your hands non valid address and you try to print it."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 231, "user_id": 5738959, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/966faaff8342c844d6c5946386b0966c?s=128&d=identicon&r=PG&f=1", "display_name": "Jecke", "link": "https://stackoverflow.com/users/5738959/jecke"}, "edited": false, "score": 0, "creation_date": 1476911809, "post_id": 40141448, "comment_id": 67553297, "body": "@Jecke: A better analogy would be if you created a function like this: <code>int* return5() { int a = 5; return &amp;a; }</code> -- In which case you have no guarantee that <code>cout &lt;&lt; *return5();</code> will print 5."}, {"owner": {"reputation": 231, "user_id": 5738959, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/966faaff8342c844d6c5946386b0966c?s=128&d=identicon&r=PG&f=1", "display_name": "Jecke", "link": "https://stackoverflow.com/users/5738959/jecke"}, "edited": false, "score": 0, "creation_date": 1476911923, "post_id": 40141448, "comment_id": 67553352, "body": "I see, thanks :) I changed the return type to string and now I have fprintf(...printi(i1).c_str()...) and it works!"}], "tags": [], "owner": {"reputation": 669, "user_id": 5802698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7203cec6d5c278002279ffae236ff5?s=128&d=identicon&r=PG&f=1", "display_name": "Sawel", "link": "https://stackoverflow.com/users/5802698/sawel"}, "is_accepted": false, "score": 4, "last_activity_date": 1476913330, "last_edit_date": 1476913330, "creation_date": 1476910803, "answer_id": 40141448, "question_id": 40141312, "link": "https://stackoverflow.com/questions/40141312/fprintf-has-problems-with-characters-returned-by-a-function/40141448#40141448", "title": "fprintf has problems with characters returned by a function", "body": "<p>Notice that <code>std::to_string()</code> returns a <code>std::string</code>.  This <code>std::string</code> exists only inside of the <code>printi()</code> function scope, which means when you exit the function (when you <code>return</code>), the destructor of this <code>std::string</code> is called, and the address you return (the value returned by <code>c_str()</code>) no longer points to valid memory.  Your code has undefined behavior, because you don't know to which data it is now pointing.</p>\n\n<p>In order to fix this, you can have <code>printi()</code> return a <code>std::string</code> instead, which will be deep copied into the caller upon <code>return</code>, and then the caller can use <code>c_str()</code> as needed:</p>\n\n<pre><code>#include &lt;string&gt;\nusing namespace std;\n\nstring printi(const unsigned long &amp;i) {\n    return to_string(i);\n}\n\nint main() {    \n    unsigned long i1 = 1; unsigned long i2 = 2;\n    fprintf(stderr, \"%s%s\\n\", printi(i1).c_str(), printi(i2).c_str());\n}\n</code></pre>\n"}], "owner": {"reputation": 231, "user_id": 5738959, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/966faaff8342c844d6c5946386b0966c?s=128&d=identicon&r=PG&f=1", "display_name": "Jecke", "link": "https://stackoverflow.com/users/5738959/jecke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1476913330, "creation_date": 1476910297, "last_edit_date": 1476913085, "question_id": 40141312, "link": "https://stackoverflow.com/questions/40141312/fprintf-has-problems-with-characters-returned-by-a-function", "title": "fprintf has problems with characters returned by a function", "body": "<p>I have two problems. Both can be illustrated by this simple code (compiled with g++ -Wall -O2 -std=c++14):</p>\n\n<pre><code>#include &lt;string&gt;\nusing namespace std;\n\nconst char *printi(const unsigned long &amp;i) {\n    return to_string(i)).c_str();\n}\n\nint main() {    \n    unsigned long i1 = 1; unsigned long i2 = 2;\n    fprintf(stderr, \"%s%s\\n\", printi(i1), printi(i2));\n}\n</code></pre>\n\n<p>Problem no. 1 - It prints \"11\", while it should print \"12\".</p>\n\n<p>Problem no. 2 - Sometimes it doesn't print numbers at all, but some weird characters instead.</p>\n"}, {"tags": ["c++", "memory-leaks", "visual-studio-2015", "c++-amp"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1476910385, "post_id": 40141209, "comment_id": 67552582, "body": "This might be easier to debug with a smaller test case :-)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1476910389, "post_id": 40141209, "comment_id": 67552585, "body": "could you initialize to zero all numeric <code>ai</code> members ? more generally maybe you could create a default constructor for your <code>amp_instruction</code> class which zeroes all integer &amp; double fields? debug/releases behaviour differences often come from unitialized variables in release / 0 in debug."}, {"owner": {"reputation": 485, "user_id": 1027738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dd475bb4720eccba534ce817f1a7a4bb?s=128&d=identicon&r=PG", "display_name": "Bogdan B", "link": "https://stackoverflow.com/users/1027738/bogdan-b"}, "edited": false, "score": 0, "creation_date": 1476911330, "post_id": 40141209, "comment_id": 67553055, "body": "I tried but it doesn&#39;t change anything. The code was also validated against a standard (cpu only) implementation of the same thing, and it always produces correct values. The only problem is that it leaks memory in release mode."}], "answers": [{"tags": [], "owner": {"reputation": 485, "user_id": 1027738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dd475bb4720eccba534ce817f1a7a4bb?s=128&d=identicon&r=PG", "display_name": "Bogdan B", "link": "https://stackoverflow.com/users/1027738/bogdan-b"}, "is_accepted": true, "score": 0, "last_activity_date": 1476998556, "creation_date": 1476998556, "answer_id": 40164800, "question_id": 40141209, "link": "https://stackoverflow.com/questions/40141209/memory-leak-with-c-amp-but-only-in-release-mode/40164800#40164800", "title": "Memory leak with C++ amp, but only in release mode", "body": "<p>I was not able to pinpoint the source of the memory leak but it definitely comes from the runtime. Changing the \"Runtime Library\" in the project options from \"Multi-threaded DLL (/MD)\" to \"Multi-threaded Debug DLL (/MDd)\" eliminates the memory leak. </p>\n"}], "owner": {"reputation": 485, "user_id": 1027738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dd475bb4720eccba534ce817f1a7a4bb?s=128&d=identicon&r=PG", "display_name": "Bogdan B", "link": "https://stackoverflow.com/users/1027738/bogdan-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 0, "accepted_answer_id": 40164800, "answer_count": 1, "score": -2, "last_activity_date": 1476998556, "creation_date": 1476909907, "last_edit_date": 1476960488, "question_id": 40141209, "link": "https://stackoverflow.com/questions/40141209/memory-leak-with-c-amp-but-only-in-release-mode", "title": "Memory leak with C++ amp, but only in release mode", "body": "<p>I am using C++ amp to evalute mathematical expressions of the form (+ x y) in polish notation. Now the tricky part is that the expressions are given as trees, which I \"compile\" into linear instructions, basically using the property that a breadth traversal of the tree will give me a list of instructions which can be iterated backwards to ensure that each child node will have been evaluated before its parent. </p>\n\n<pre><code>struct amp_instruction\n{\n  op_code                                            opcode; // add, sub, variable, etc\n  int                                                 index; // index of first child\n  double                                              value; // for constants\n  double                                             weight; // for variables\n  std::string                                         label; // node label\n  std::shared_ptr&lt;concurrency::array_view&lt;double, 1&gt;&gt;  data; // amp data\n};\n</code></pre>\n\n<p>When creating instructions, I assign the data field like this:</p>\n\n<pre><code>instr.data = make_shared&lt;array_view&lt;double, 1&gt;&gt;(n);\n</code></pre>\n\n<p>Then, my evaluation is:</p>\n\n<pre><code>array_view&lt;double, 1&gt; amp_interpreter::evaluate(vector&lt;amp_instruction&gt;&amp; instructions)\n{\n  for (auto &amp;it = rbegin(instructions); it != rend(instructions); ++it)\n  {\n    switch (it-&gt;opcode)\n    {\n    case ADD:\n    {\n      array_view&lt;double, 1&gt; a = *instructions[it-&gt;index].data;\n      array_view&lt;double, 1&gt; b = *instructions[it-&gt;index + 1].data;\n      parallel_for_each(a.extent, [=](index&lt;1&gt; i) restrict(amp)\n      {\n        a[i] += b[i];\n      });\n      it-&gt;data = instructions[it-&gt;index].data;\n      break;\n    }\n    // other cases... //\n    case VARIABLE:\n    {\n      array_view&lt;double, 1&gt;  a = *it-&gt;data;\n      array_view&lt;const double, 1&gt; v = *gpu_data[it-&gt;label];\n      double weight = it-&gt;weight;\n      parallel_for_each(a.extent, [=](index&lt;1&gt; i) restrict(amp)\n      {\n        a[i] = v[i] * weight;\n      });\n      break;\n    }\n    default: break;\n    }\n  }\n  return *instructions[0].data;\n}\n</code></pre>\n\n<p>where gpu_data is a map holding the initial values for my variables (which can be up to a million for example). So the idea is, for each variable grab the values (cached in gpu_data), apply a weight value, and hold the result in teh data field of the corresponding amp_instruction. Then, the data is passed from child to parent in order to reduce memory allocations on the gpu. </p>\n\n<p>Now, this code works fine when I compile my program in debug mode, using constant memory around ~1gb for 1000 tree expressions and 1M values for each tree variable. It also produces correct values, so the logic works. But in release mode, memory usage spikes to 10-20gb. This only happens with the default accelerator, which is my radeon r9 fury. The basic renderer accelerator does not have this issue. </p>\n\n<p>My hardware is i7 4790k, 32gb ddr3, radeon r9 fury. Could this be a driver issue? Or maybe I am not using c++ amp as intended? I really hope someone could shed some light on this issue as this bug renders the whole approach unusable.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "abstract-class", "virtual-functions"], "comments": [{"owner": {"reputation": 2532, "user_id": 2139094, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7b7f096622f36595ba50f9d65a39508a?s=128&d=identicon&r=PG", "display_name": "mjs", "link": "https://stackoverflow.com/users/2139094/mjs"}, "edited": false, "score": 0, "creation_date": 1476910297, "post_id": 40141195, "comment_id": 67552541, "body": "Too long, too much code. Cut it down to a small program that demonstrates the issue. If you do that it might even help you find the problem."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1476911075, "post_id": 40141195, "comment_id": 67552937, "body": "When you define a constructor that accepts an argument, it deletes the default constructor"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1476911552, "post_id": 40141195, "comment_id": 67553168, "body": "You need to read about the use of <code>eof</code><a href=\"http://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">here</a>."}, {"owner": {"reputation": 2248, "user_id": 6499439, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b69ace4bd7428cbae7eb904d7a497351?s=128&d=identicon&r=PG", "display_name": "Katie", "link": "https://stackoverflow.com/users/6499439/katie"}, "edited": false, "score": 0, "creation_date": 1476911739, "post_id": 40141195, "comment_id": 67553262, "body": "Welcome to Stack Overflow!  You can take the <a href=\"https://stackoverflow.com/tour\">tour</a> first and learn <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> a good question.  That makes it easier for us to help you."}], "answers": [{"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 0, "last_activity_date": 1476911462, "creation_date": 1476911462, "answer_id": 40141600, "question_id": 40141195, "link": "https://stackoverflow.com/questions/40141195/how-should-i-write-the-code-for-the-derived-class-constructor/40141600#40141600", "title": "How should I write the code for the derived class constructor?", "body": "<p>The construction of <code>AIR</code> also needs to construct the base class.<br>\n<code>Airline</code> doesn't have a default constructor, it only has one that accepts a <code>Portal*</code>.</p>\n\n<p>Since <code>Airline</code> already has a portal member, you shouldn't define another one in <code>AIR</code>.</p>\n\n<p>Instead you should pass the constructor's parameter on to the construction of <code>Airline</code>:</p>\n\n<pre><code>AIR::AIR(Portal* p) : Airline(p) \n{\n\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7044517, "user_type": "registered", "profile_image": "https://graph.facebook.com/1226510260748709/picture?type=large", "display_name": "Vishal", "link": "https://stackoverflow.com/users/7044517/vishal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1477141560, "creation_date": 1476909878, "last_edit_date": 1477141560, "question_id": 40141195, "link": "https://stackoverflow.com/questions/40141195/how-should-i-write-the-code-for-the-derived-class-constructor", "title": "How should I write the code for the derived class constructor?", "body": "<p>I have two classes. Portal and Airline. Both are virtual and abstract respectively. The code is really roughly made. Sorry for that. I have created derived classes of Airline and Portal respectively as AIR and POR.</p>\n\n<p>Basically my main creates a portal pointer of derived class POR and then it is passed in the airlines derived class AIR. Airline has a constructor that takes portal pointer as an argument but i am confused as to how to make a constructor for AIR.</p>\n\n<p>I get an error that I cannot understand. The class files are given to us and cannot be changed as per the professor. If there is any issue with the class file, please let me know. </p>\n\n<p>Anyway here is the code:</p>\n\n<pre><code>class Portal {\npublic:\nPortal() {}\nvirtual ~Portal() {}\n\nenum SortField {Airline, Time, Duration, Price};\nenum SortOrder {Ascending, Descending};\nenum BuyOption {Cheapest, Fastest, Earliest, Latest};\n\n// initialize route information by reading in input file with government data/guidelines\nvirtual void initRoutes(string routeInfo) {}\n\n// return constraints/guidelines for a given origin+destination combination\nvirtual void routeInfo(string origin, string destination, float&amp; dist, float&amp; duration, float&amp; minPrice, float&amp; maxPrice, float&amp; timeVariation) {}\n\n// display (to cout) the list of flights with available seats between origin and destination\n// List is to be shown in sorted order, based on sortField and sortOrder\n// sortField is one of the values of enum SortField\n// sortOrder is one of values of enum SortOrder\nvirtual void showFlights(string origin, string destination, SortField sortField = Airline, SortOrder sortOrder = Descending) {}\n\n// purchase a ticket based on BuyOption criteria, optionally specifying a preferred airline\n// This will be for the last selected origin+destination combination\nvirtual bool buyTicket(BuyOption cirteria, string airline = NULL) = 0;\n\n};\n\nclass POR: public Portal{\nprotected:\nvector&lt;Route *&gt; rt_list;\npublic:\nvoid initRoutes(string routeInfo){\n\n    int n=0;\n    string line;\n\n    float val;\n    string str;\n\n    ifstream rfile;\n    rfile.open(routeInfo.c_str(),ios::in);\n    if(rfile.is_open()){\n        while(!rfile.eof()){\n            getline(rfile,line);\n            ++n;\n        }\n    }\n    rfile.close();\n\n    rfile.open(routeInfo.c_str(),ios::in);\n    Route *ptr;\n\n    while(!rfile.eof()){\n        rfile &gt;&gt; str;\n        ptr-&gt;setorigin(str);\n        rfile &gt;&gt; str;\n        ptr-&gt;setdestination(str);\n        rfile &gt;&gt; val;\n        ptr-&gt;setdistance(val);\n        rfile &gt;&gt; val;\n        ptr-&gt;setduration(val);\n        rfile &gt;&gt; val;\n        ptr-&gt;setminpkm(val);\n        rfile &gt;&gt; val;\n        ptr-&gt;setmaxpkm(val);\n        rfile &gt;&gt; val;\n        ptr-&gt;setdev(val);\n\n        rt_list.push_back(ptr);\n    }\n    rfile.close();\n}\n\nvoid routeInfo(string origin, string destination, float&amp; dist, float&amp; duration,float&amp; minPrice, float&amp; maxPrice, float&amp; timeVariation){\n    int len = rt_list.size();\n    string str1,str2;\n    for(int i = 0;i &lt; len;i++){\n        str1 = rt_list[i]-&gt;getOrigin();\n        str2 = rt_list[i]-&gt;getDestination();\n        if((str1 == origin and str2 == destination) or (str1 == destination and str2 == origin)){\n            cout&lt;&lt;rt_list[i]-&gt;getDistance();\n            cout&lt;&lt;rt_list[i]-&gt;getDuration();\n            cout&lt;&lt;rt_list[i]-&gt;getMinpkm() * rt_list[i]-&gt;getDistance();\n            cout&lt;&lt;rt_list[i]-&gt;getMaxpkm() * rt_list[i]-&gt;getDistance();\n            cout&lt;&lt;rt_list[i]-&gt;getDev();\n        }\n    }\n}\n\nvoid showFlights(string origin, string destination, SortField sortField = Airline,SortOrder sortOrder = Descending){\n\n}\n\nbool buyTicket(BuyOption cirteria, string airline = NULL){\n\n}\n};\nclass Airline {\n\nprivate:\nPortal *portal;\n\nprotected:\nPortal *getPortal() {\n    return portal;\n}\n\npublic:\n\nAirline(Portal *pl):portal(pl){\n\n}\n\nvirtual ~Airline() {}\n\n// reads in the input file for the airline and initializes its\n// information about routes, capacity etc\nvirtual void init(string ifile) = 0;\n\nvirtual string getName() = 0; // the name of the airline. Should have the last 4 digits of the roll no.\n\n// return the list of flights for this airline between origin and destination cities\n// The list of flights is appended to the vector flights that is passed in.\n// Input vector flights will not be a null reference\nvirtual void findFlights(string origin, string destination,\n                         vector&lt;Flight *&gt;&amp; flights) {}\n\n// get the current price for a specified flight of this airline\nvirtual float getPrice(Flight *flight) = 0;\n\n// buy a ticket from this airline for a particular flight\n// Returns true if the ticket can be issues (i.e. there are seats available on the flight\nvirtual bool issueTicket(Flight *flight) = 0;\n\n// number of tickets sold today\nvirtual int getNumSold() = 0;\n\n// get total revenue and passenger km for the day\nvirtual void getSalesStats(float&amp; revenue, float&amp; passKm) {}\n\n};\n\nclass AIR:public Airline{\nprotected:\nPOR *portal;\nstring name;\nint seats,nflightsperday;\nstring o,d;\nvector&lt;string&gt; org;\nvector&lt;string&gt; dest;\nvector&lt;int&gt; nflights;\nvector&lt;FLY *&gt; flight_list;\npublic:\n//CONSTRUCTOR ??????\n\n/*\nAIR(){\n    ;\n}\n*/\n\nAIR(POR *pl):portal(pl){\n    name = \"\";\n}\n\nvoid init(string ifile){\n    FLY *ptr;\n    ifstream fin; \n    fin.open(ifile.c_str(), ios::in);\n    fin &gt;&gt; seats;\n    while(!fin.eof()){\n        fin &gt;&gt; o &gt;&gt; d;\n        org.push_back(o);\n        dest.push_back(d);\n        fin &gt;&gt; nflightsperday;\n        nflights.push_back(nflightsperday);\n\n        for(int i=0;i&lt;nflightsperday;i++){\n            ptr-&gt;setOrigin(o);\n            ptr-&gt;setDestination(d);\n            ptr-&gt;setName(ifile.c_str());\n            flight_list.push_back(ptr);\n        }\n\n    }\n    fin.close();\n}\n\n/*void readfile(ifstream&amp; fin,string ifile){\n    fin.open(ifile.c_str(), ios::in);\n    fin &gt;&gt; seats;\n    while(!fin.eof()){\n        fin &gt;&gt; o &gt;&gt; d;\n        org.push_back(o);\n        dest.push_back(d);\n        fin &gt;&gt; nflightsperday;\n        nflights.push_back(nflightsperday);\n    }\n    fin.close();\n}*/\n\nstring getName(){\n    //cout&lt;&lt;typeid(obj).name();\n    return \"AIR\";\n}\nvoid findFlights(string origin, string destination,  vector&lt;Flight *&gt;&amp; flights){\n\n}\nfloat getPrice(Flight *flight){\n\n}\nbool issueTicket(Flight *flight){\n\n}\nint getNumSold(){\n    return -1;\n}\nvoid getTicketStats(float&amp; revenue, float&amp; passKm){\n\n}\n};\n\n\nint main(){\nPOR *x=new POR;\nAIR a1(x);\nreturn 0;\n}\n</code></pre>\n\n<p>I'm getting such an error.</p>\n\n<pre><code>version4.cpp: In constructor \u2018AIR::AIR(POR*)\u2019:\nversion4.cpp:303:24: error: no matching function for call to \u2018Airline::Airline()\u2019\nAIR(POR *pl):portal(pl){\n                    ^\nversion4.cpp:303:24: note: candidates are:\nversion4.cpp:251:2: note: Airline::Airline(Portal*)\nAirline(Portal *pl):portal(pl){\n^\nversion4.cpp:251:2: note:   candidate expects 1 argument, 0 provided\nversion4.cpp:239:7: note: Airline::Airline(const Airline&amp;)\nclass Airline {\n      ^\nversion4.cpp:239:7: note:   candidate expects 1 argument, 0 provided\n</code></pre>\n"}, {"tags": ["c++", "long-integer", "multiplication", "modulo"], "comments": [{"owner": {"reputation": 458, "user_id": 2871478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076a7e35328360385bd9dc150bb49972?s=128&d=identicon&r=PG&f=1", "display_name": "chrizke", "link": "https://stackoverflow.com/users/2871478/chrizke"}, "edited": false, "score": 3, "creation_date": 1476910272, "post_id": 40141191, "comment_id": 67552529, "body": "You need a big integer library as Jonny Henly said. Nevertheless, 1234^123%1234 acutally is 0."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1476910582, "post_id": 40141191, "comment_id": 67552681, "body": "^ is an xor operation in c++, not exponentiation,"}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1476910760, "post_id": 40141191, "comment_id": 67552773, "body": "And watch precedence: <code>1234^123 % 1234</code> means this <code>1234 ^ (123 % 1234)</code>"}, {"owner": {"reputation": 2664, "user_id": 1862101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e069875829ca4da3cd8895e468c64409?s=128&d=identicon&r=PG", "display_name": "brian beuning", "link": "https://stackoverflow.com/users/1862101/brian-beuning"}, "edited": false, "score": 0, "creation_date": 1476910889, "post_id": 40141191, "comment_id": 67552844, "body": "pow(a, b) % c can be computed using 32-bit math as long as a &amp; c are less then 2^16."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "reply_to_user": {"reputation": 458, "user_id": 2871478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076a7e35328360385bd9dc150bb49972?s=128&d=identicon&r=PG&f=1", "display_name": "chrizke", "link": "https://stackoverflow.com/users/2871478/chrizke"}, "edited": false, "score": 0, "creation_date": 1476911096, "post_id": 40141191, "comment_id": 67552952, "body": "@chrizke  No, it&#39;s not 0, it&#39;s 1193. It&#39;s 0 if the op means ^ to be exponentiation"}, {"owner": {"reputation": 458, "user_id": 2871478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076a7e35328360385bd9dc150bb49972?s=128&d=identicon&r=PG&f=1", "display_name": "chrizke", "link": "https://stackoverflow.com/users/2871478/chrizke"}, "reply_to_user": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1476911629, "post_id": 40141191, "comment_id": 67553208, "body": "@doug 1234 xor 123 does not generate a big integer. So \u2013 due to context and in my opinion \u2013 ^ is the exponential operator in the provided example."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "reply_to_user": {"reputation": 458, "user_id": 2871478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076a7e35328360385bd9dc150bb49972?s=128&d=identicon&r=PG&f=1", "display_name": "chrizke", "link": "https://stackoverflow.com/users/2871478/chrizke"}, "edited": false, "score": 0, "creation_date": 1476912019, "post_id": 40141191, "comment_id": 67553395, "body": "@chrizke It&#39;s also not zero even if ^ is overloaded to do exponentiation since you can&#39;t overload precedence. However, I agree with you about the probable intent and that would, of course, yield 0."}], "answers": [{"comments": [{"owner": {"reputation": 2532, "user_id": 2139094, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7b7f096622f36595ba50f9d65a39508a?s=128&d=identicon&r=PG", "display_name": "mjs", "link": "https://stackoverflow.com/users/2139094/mjs"}, "edited": false, "score": 0, "creation_date": 1476910520, "post_id": 40141331, "comment_id": 67552654, "body": "This answer could be improved with some examples."}], "tags": [], "owner": {"reputation": 11364, "user_id": 1135954, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7e7a1accbdba46d580172b43527ed201?s=128&d=identicon&r=PG", "display_name": "mtk", "link": "https://stackoverflow.com/users/1135954/mtk"}, "is_accepted": false, "score": -2, "last_activity_date": 1476910368, "creation_date": 1476910368, "answer_id": 40141331, "question_id": 40141191, "link": "https://stackoverflow.com/questions/40141191/how-do-i-allocate-an-integer-with-hundreds-of-digits-in-c/40141331#40141331", "title": "How do I allocate an integer with hundreds of digits in c++?", "body": "<p>Two roads you got<br>\n1. Implement what you need by learning how to do large calculations using integer arrays with maths tricks for speed up  OR<br>\n2. Use a library</p>\n\n<p>I would suggest to go with 2nd option if you are not tied to use external library. One such bigNum library is <a href=\"http://www.ttmath.org/samples\" rel=\"nofollow\">ttmath</a></p>\n\n<p>OR\nIf you have a option to switch to java, then java has builtin BigInteger, BigDecimal and more functionalities supported. Look at <a href=\"https://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html\" rel=\"nofollow\">BigInteger javadoc</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7015181, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bh9TOkb7x90/AAAAAAAAAAI/AAAAAAAAADU/Rc47TovwMbM/photo.jpg?sz=128", "display_name": "tony petrov", "link": "https://stackoverflow.com/users/7015181/tony-petrov"}, "is_accepted": false, "score": 0, "last_activity_date": 1476910704, "creation_date": 1476910704, "answer_id": 40141414, "question_id": 40141191, "link": "https://stackoverflow.com/questions/40141191/how-do-i-allocate-an-integer-with-hundreds-of-digits-in-c/40141414#40141414", "title": "How do I allocate an integer with hundreds of digits in c++?", "body": "<p>If you're using gcc you can try __uint128_t or maybe use double instead unless you need to do bitwise operations</p>\n"}], "owner": {"reputation": 61, "user_id": 4770232, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/757168460/picture?type=large", "display_name": "Tom Titanium Lento", "link": "https://stackoverflow.com/users/4770232/tom-titanium-lento"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "closed_date": 1476910666, "answer_count": 2, "score": 0, "last_activity_date": 1476910704, "creation_date": 1476909874, "question_id": 40141191, "link": "https://stackoverflow.com/questions/40141191/how-do-i-allocate-an-integer-with-hundreds-of-digits-in-c", "closed_reason": "Duplicate", "title": "How do I allocate an integer with hundreds of digits in c++?", "body": "<p>\"unsigned long int\" keeps becoming 0.  It has to be a really big integer that I can operate multiplication and modulo on.\nExample: 1234^123 % 1234</p>\n"}, {"tags": ["c++", "haskell", "ghc", "ghci", "haskell-stack"], "answers": [{"tags": [], "owner": {"reputation": 5821, "user_id": 1770201, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/46bcb5d2018194c9beb884b6797e57e0?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/1770201/george"}, "is_accepted": false, "score": 1, "last_activity_date": 1476912101, "creation_date": 1476912101, "answer_id": 40141722, "question_id": 40141042, "link": "https://stackoverflow.com/questions/40141042/trouble-running-stack-ghci-when-calling-c-from-haskell/40141722#40141722", "title": "Trouble running `stack ghci` when calling C++ from Haskell", "body": "<p>The issue turns out that <em>ALL</em> non-pure C code (i.e., strict C++ code) must be surrounded by #ifdefs:</p>\n\n<pre><code>#ifdef __cplusplus //I wasn't surrounding pure C++ code with these headers!\nextern \"C\" {         \n#endif\n\nvoid foo();\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n"}], "owner": {"reputation": 5821, "user_id": 1770201, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/46bcb5d2018194c9beb884b6797e57e0?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/1770201/george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1483464193, "creation_date": 1476909285, "last_edit_date": 1483464193, "question_id": 40141042, "link": "https://stackoverflow.com/questions/40141042/trouble-running-stack-ghci-when-calling-c-from-haskell", "title": "Trouble running `stack ghci` when calling C++ from Haskell", "body": "<p><strong>What I'm trying to do:</strong> I am trying to call C++ (via an <code>extern \"C\" { ... }</code> interface) from Haskell via its FFI. In particular, I have a C++ file <code>three.cpp</code>; inside it is a single externed C++ function that I am trying to access from Haskell (with some other private C++ code in the background).</p>\n\n<p><strong>The Problem:</strong> I can successfully run <code>stack build</code> and <code>stack test</code> and everything works as expected. However, when I run <code>stack ghci</code> I get the following error:</p>\n\n<pre><code>/usr/bin/ld: /home//Dropbox/Sling/.stack-work/dist/x86_64-linux/Cabal-1.24.0.0/build/Sling-exe/Sling-exe-tmp/src/three.o: relocation R_X86_64_32 against `.bss' can not be used when making a shared object; recompile with -fPIC\n/usr/bin/ld: final link failed: Nonrepresentable section on output\ncollect2: error: ld returned 1 exit status\n`gcc' failed in phase `Linker'. (Exit code: 1)\n</code></pre>\n\n<p><strong>Possibly Needed Information:</strong> The relevant portion of my project's <code>.cabal</code> file looks as follows:</p>\n\n<pre><code>executable Sling-exe\n  hs-source-dirs:      app\n  main-is:             Main.hs\n  ghc-options:         -fPIC -threaded -rtsopts -with-rtsopts=-N \n  cc-options:          -fPIC\n  extra-libraries:     stdc++\n  build-depends:       base\n  C-sources:           src/three.cpp\n  Include-dirs:        include\n  Includes:            include/three.h\n  Install-includes:    three.h\n  default-language:    Haskell2010\n</code></pre>\n\n<p>Notice how I tried to include the <code>-fPIC</code> flag, but failed. Any suggestions?</p>\n"}, {"tags": ["c++", "g++"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1476909413, "post_id": 40141009, "comment_id": 67552118, "body": "This doesn&#39;t compile with the <code>-Werror</code> flag. It does without that flag because a non-returning function that is non-void is just a warning not an error."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 2, "creation_date": 1476909567, "post_id": 40141009, "comment_id": 67552192, "body": "<code>-Wall</code> adds a warning about missing a return statement; in conjunction with <code>-Werror</code>, that will be treated as an error, so the code won&#39;t compile."}, {"owner": {"reputation": 1443, "user_id": 4336535, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/be9e57beef12a71646bf2b301b32e9dd?s=128&d=identicon&r=PG&f=1", "display_name": "biv", "link": "https://stackoverflow.com/users/4336535/biv"}, "edited": false, "score": 0, "creation_date": 1476909584, "post_id": 40141009, "comment_id": 67552200, "body": "<b>-Werror=return-type</b>   working, thank."}], "answers": [{"tags": [], "owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "is_accepted": true, "score": 2, "last_activity_date": 1476917852, "last_edit_date": 1476917852, "creation_date": 1476909949, "answer_id": 40141225, "question_id": 40141009, "link": "https://stackoverflow.com/questions/40141009/force-c-compiler-to-check-returning-value/40141225#40141225", "title": "force c++ compiler to check returning value", "body": "<p>Both <code>gcc</code> and <code>clang</code> have the option <code>-Wreturn-type</code>.<br>\nIt is turned on implicitly when using <code>-Wall</code>.<br>\nTo make it is a compiler error, use <code>-Werror=return-type</code>.</p>\n"}], "owner": {"reputation": 1443, "user_id": 4336535, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/be9e57beef12a71646bf2b301b32e9dd?s=128&d=identicon&r=PG&f=1", "display_name": "biv", "link": "https://stackoverflow.com/users/4336535/biv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "closed_date": 1476910926, "accepted_answer_id": 40141225, "answer_count": 1, "score": 0, "last_activity_date": 1476917852, "creation_date": 1476909154, "question_id": 40141009, "link": "https://stackoverflow.com/questions/40141009/force-c-compiler-to-check-returning-value", "closed_reason": "Duplicate", "title": "force c++ compiler to check returning value", "body": "<p>In this example will be called deconstructor of nonexisting object. G++ version 5.3,  compiling with  -Werror .</p>\n\n<pre><code>vector&lt;vector&lt;float&gt;&gt; segfault()\n{\n\n}\n\nint main()\n{\n    segfault();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "cmake", "cross-compiling", "embedded-linux", "socketcan"], "comments": [{"owner": {"reputation": 121, "user_id": 1269208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1757cf16a8edbeda7d977f5b607c3b?s=128&d=identicon&r=PG", "display_name": "wegunterjr", "link": "https://stackoverflow.com/users/1269208/wegunterjr"}, "edited": false, "score": 0, "creation_date": 1477072938, "post_id": 40140916, "comment_id": 67633089, "body": "I tried adding the #include &lt;sys/socket.h? to the top of the includes (that failed epically) and then tried with the #include &lt;linux/socket.h&gt; (and that got the same result.  When I move them lower in the list, it fails with the PF_CAN and AF_CAN error I already listed."}], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 1269208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1757cf16a8edbeda7d977f5b607c3b?s=128&d=identicon&r=PG", "display_name": "wegunterjr", "link": "https://stackoverflow.com/users/1269208/wegunterjr"}, "is_accepted": true, "score": 0, "last_activity_date": 1477690984, "creation_date": 1477690984, "answer_id": 40313577, "question_id": 40140916, "link": "https://stackoverflow.com/questions/40140916/cross-compiling-a-can-project-using-cmake-and-an-arm-toolchain-but-having-issue/40313577#40313577", "title": "Cross-compiling a CAN project using CMAKE and an arm toolchain, but having issues finding AF_CAN PF_CAN", "body": "<p>The solution was to add</p>\n\n<pre><code>#ifndef AF_CAN \n#define AF_CAN 29\n#endif\n</code></pre>\n\n<p>This allowed the project to build with no errors.  Also, ran the project on the actual target device and it ran normally. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11134373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RAO39.jpg?s=128&g=1", "display_name": "Lokiel", "link": "https://stackoverflow.com/users/11134373/lokiel"}, "is_accepted": false, "score": 0, "last_activity_date": 1551421895, "last_edit_date": 1551421895, "creation_date": 1551421219, "answer_id": 54938993, "question_id": 40140916, "link": "https://stackoverflow.com/questions/40140916/cross-compiling-a-can-project-using-cmake-and-an-arm-toolchain-but-having-issue/54938993#54938993", "title": "Cross-compiling a CAN project using CMAKE and an arm toolchain, but having issues finding AF_CAN PF_CAN", "body": "<p>I've just run into the same problem and had to add the following in my code:</p>\n\n<pre><code>#ifndef PF_CAN \n#define PF_CAN 29 \n#endif \n#ifndef AF_CAN \n#define AF_CAN PF_CAN \n#endif \n</code></pre>\n\n<p>These values are the standard Controller Area Network Protocol Family and Address Family values normally defined in <strong>bits/socket.h</strong>.</p>\n\n<p>I figured out WHY I needed to do this and think it needs sharing for when others run into the problem because it'll be a similar reason.</p>\n\n<p>In my case it was because <strong>/opt/freescale/usr/local/gcc-4.3.50-eglibc-2.8.50/powerpc-linux-gnu/powerpc-linux-gnu/libc/usr/include/linux/socket.h</strong> defines these values but they are no longer exposed due to the following compilation macro that encapsulates them:</p>\n\n<pre><code>#if defined(__KERNEL__) || !defined(__GLIBC__) || (__GLIBC__ &lt; 2)\n</code></pre>\n\n<p>A subsequent comment in the code, \"This mess will go away with glibc\", hints that much of the library was expected to change with <strong>glibc</strong> updates; unfortunately the toolchain did NOT provide these definitions anywhere else so they needed to be defined in my code.</p>\n\n<p>ie. If you're using an older toolchain and you can't find these values in <strong>bits/socket.h</strong>, it might be time to update your toolchain or you'll need to define these values yourself like I had to.</p>\n"}], "owner": {"reputation": 121, "user_id": 1269208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1757cf16a8edbeda7d977f5b607c3b?s=128&d=identicon&r=PG", "display_name": "wegunterjr", "link": "https://stackoverflow.com/users/1269208/wegunterjr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 0, "accepted_answer_id": 40313577, "answer_count": 2, "score": 0, "last_activity_date": 1551421895, "creation_date": 1476908799, "last_edit_date": 1477691732, "question_id": 40140916, "link": "https://stackoverflow.com/questions/40140916/cross-compiling-a-can-project-using-cmake-and-an-arm-toolchain-but-having-issue", "title": "Cross-compiling a CAN project using CMAKE and an arm toolchain, but having issues finding AF_CAN PF_CAN", "body": "<p>I am cross-compiling using CMAKE for an embedded arm device, and having some issues with it defining PF_CAN and AF_CAN.   I have been advised to use </p>\n\n<pre><code>sys/socket.h\n</code></pre>\n\n<p>but it doesn't contain the defines and can't really tell if it's pointing to it indirectly.</p>\n\n<p>This is my current program (super simple)</p>\n\n<pre><code>/* A simple SocketCAN example */\n\n#include &lt;cstdlib&gt;\n#include &lt;stdio.h&gt;\n#include &lt;cstring&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n\n#include &lt;arpa/inet.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;unistd.h&gt; \n#include &lt;pthread.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;iostream&gt;\n\n#include &lt;sys/socket.h&gt;  // i tried linux/socket.h and get some other errors, so I am confused.\n#include &lt;pthread.h&gt;\n#include &lt;net/if.h&gt;\n#include &lt;string.h&gt;\n#include &lt;net/if.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;sys/ioctl.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;linux/can.h&gt;\n#include &lt;linux/can/raw.h&gt;\n\nint soc;\nint read_can_port;\n\nint open_port(const char *port)\n{\n    ifreq ifr;\n    sockaddr_can addr;\n   /* open socket */\nsoc = socket(PF_CAN, SOCK_RAW, CAN_RAW);\nif(soc &lt; 0)\n{\n    return (-1);\n}\naddr.can_family = AF_CAN;\nstrcpy(ifr.ifr_name, port);\nif (ioctl(soc, SIOCGIFINDEX, &amp;ifr) &lt; 0)\n{\n    return (-1);\n}\naddr.can_ifindex = ifr.ifr_ifindex;\nfcntl(soc, F_SETFL, O_NONBLOCK);\nif (bind(soc, (struct sockaddr *)&amp;addr, sizeof(addr)) &lt; 0)\n{\n    return (-1);\n}\nreturn 0;\n}\nint send_port(struct can_frame *frame)\n{\n   int retval;\n   retval = write(soc, frame, sizeof(struct can_frame));\n    if (retval != sizeof(struct can_frame))\n    {\n    return (-1);\n    }\n    else\n    {\n    return (0);\n    }\n}\n/* this is just an example, run in a thread */\nvoid read_port()\n{\n    struct can_frame frame_rd;\n    int recvbytes = 0;\nread_can_port = 1;\nwhile(read_can_port)\n{\n    struct timeval timeout = {1, 0};\n    fd_set readSet;\n    FD_ZERO(&amp;readSet);\n    FD_SET(soc, &amp;readSet);\n    if (select((soc + 1), &amp;readSet, NULL, NULL, &amp;timeout) &gt;= 0)\n    {\n        if (!read_can_port)\n        {\n            break;\n        }\n        if (FD_ISSET(soc, &amp;readSet))\n        {\n            recvbytes = read(soc, &amp;frame_rd, sizeof(struct can_frame));\n            if(recvbytes)\n            {\n                printf(\"dlc = %d, data = %s\\n\",           \n frame_rd.can_dlc,frame_rd.data);\n            }\n        }\n    }\n}\n}\nint close_port()\n{\nclose(soc);\nreturn 0;\n}\nint main(void)\n{\nstd::cout &lt;&lt; \"Hello World! \" &lt;&lt; std::endl;\n\nopen_port(\"can0\u201d\");\nread_port();\nreturn 0;\n}\n</code></pre>\n\n<p>This is my output when I run make:</p>\n\n<p>HelloWorld.cpp:45: error: 'PF_CAN' was not declared in this scope\nHelloWorld.cpp:45: error: 'PF_CAN' was not declared in this scope</p>\n"}, {"tags": ["c++", "bitset", "std-bitset"], "comments": [{"owner": {"reputation": 838, "user_id": 5391191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-U8c9fH2K_MQ/AAAAAAAAAAI/AAAAAAAAAEo/uSAxoPsAvvs/photo.jpg?sz=128", "display_name": "Jacob H", "link": "https://stackoverflow.com/users/5391191/jacob-h"}, "edited": false, "score": 0, "creation_date": 1476908993, "post_id": 40140897, "comment_id": 67551932, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/6038718/convert-integer-to-bits\">Convert integer to bits</a>"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1476909149, "post_id": 40140897, "comment_id": 67551999, "body": "The answer to that question depends on the number being known at compile time. Not suitable for what the OP needs."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1476909283, "post_id": 40140897, "comment_id": 67552051, "body": "Unless you are required to use <code>std::bitset</code>, you can use the solution in <a href=\"http://stackoverflow.com/questions/23173261/int-to-binary-conversion-explanation\" title=\"int to binary conversion explanation\">stackoverflow.com/questions/23173261/&hellip;</a>."}, {"owner": {"reputation": 41, "user_id": 7044436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d25c1fdfea25e3fd26a33962f8bd473f?s=128&d=identicon&r=PG&f=1", "display_name": "januszysko", "link": "https://stackoverflow.com/users/7044436/januszysko"}, "edited": false, "score": 0, "creation_date": 1476909518, "post_id": 40140897, "comment_id": 67552169, "body": "I wanted to try doing it the easy way. I am able to do it other ways. I just wanted to know if there is a glitch I can use to make it work"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 7044436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d25c1fdfea25e3fd26a33962f8bd473f?s=128&d=identicon&r=PG&f=1", "display_name": "januszysko", "link": "https://stackoverflow.com/users/7044436/januszysko"}, "edited": false, "score": 0, "creation_date": 1476909802, "post_id": 40141103, "comment_id": 67552308, "body": "Thank you, I guess I understand, but can you tell me how can I limit my output when it comes to leading 0s?"}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "reply_to_user": {"reputation": 41, "user_id": 7044436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d25c1fdfea25e3fd26a33962f8bd473f?s=128&d=identicon&r=PG&f=1", "display_name": "januszysko", "link": "https://stackoverflow.com/users/7044436/januszysko"}, "edited": false, "score": 0, "creation_date": 1476910049, "post_id": 40141103, "comment_id": 67552425, "body": "So you don&#39;t want to display leading zeros? You might want to ask a different question for that (unless you figure it out by yourself somehow)."}, {"owner": {"reputation": 41, "user_id": 7044436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d25c1fdfea25e3fd26a33962f8bd473f?s=128&d=identicon&r=PG&f=1", "display_name": "januszysko", "link": "https://stackoverflow.com/users/7044436/januszysko"}, "edited": false, "score": 0, "creation_date": 1476910266, "post_id": 40141103, "comment_id": 67552526, "body": "I mean I do, but only for the limited value. I don&#39;t want to show the number on 64bits but on 10 for example"}, {"owner": {"reputation": 41, "user_id": 7044436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d25c1fdfea25e3fd26a33962f8bd473f?s=128&d=identicon&r=PG&f=1", "display_name": "januszysko", "link": "https://stackoverflow.com/users/7044436/januszysko"}, "edited": false, "score": 0, "creation_date": 1476910315, "post_id": 40141103, "comment_id": 67552548, "body": "My question concerns your statement &quot;You need another integer that will limit your output&quot;. I don&#39;t know how to implement it"}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "reply_to_user": {"reputation": 41, "user_id": 7044436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d25c1fdfea25e3fd26a33962f8bd473f?s=128&d=identicon&r=PG&f=1", "display_name": "januszysko", "link": "https://stackoverflow.com/users/7044436/januszysko"}, "edited": false, "score": 0, "creation_date": 1476910754, "post_id": 40141103, "comment_id": 67552769, "body": "OK! Didn&#39;t understand at first. Updated my answer."}], "tags": [], "owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "is_accepted": false, "score": 1, "last_activity_date": 1476910728, "last_edit_date": 1476910728, "creation_date": 1476909541, "answer_id": 40141103, "question_id": 40140897, "link": "https://stackoverflow.com/questions/40140897/c-how-can-i-assign-an-input-value-to-a-stdbitset-argument/40141103#40141103", "title": "C++ How can I assign an input value to a std::bitset argument?", "body": "<p>A numeric (\"non-type\", as C++ calls it) template parameter must be a compile-time constant, so you cannot use a user-supplied number. Use a large constant number (e.g. 64) instead. You need another integer that will limit your output:</p>\n\n<pre><code>int x_temp = 10;\ncin &gt;&gt; x_temp;\nint const bits = 64;\n...\n</code></pre>\n\n<p>Here 64 is some sort of a maximal value you can use, because <code>bitset</code> has a constructor with an <code>unsigned long long</code> argument, which has 64 bits (at least; may be more).</p>\n\n<p>However, if you use <code>int</code> for your intermediate calculations, your code supports a maximum of 14 bits reliably (without overflow). If you want to support more than 14 bits (e.g. 64), use a larger type, like <code>uint32_t</code> or <code>uint64_t</code>.</p>\n\n<hr>\n\n<p>A problem with holding more bits than needed is that the additional bits will be displayed. To cut them out, use <code>substr</code>:</p>\n\n<pre><code>cout &lt;&lt; bitset&lt;64&gt;(...).to_string().substr(64 - x_temp);\n</code></pre>\n\n<p>Here <code>to_string</code> converts it to string with 64 characters, and <code>substr</code> cuts the last characters, whose number is <code>x_temp</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 7044436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d25c1fdfea25e3fd26a33962f8bd473f?s=128&d=identicon&r=PG&f=1", "display_name": "januszysko", "link": "https://stackoverflow.com/users/7044436/januszysko"}, "edited": false, "score": 0, "creation_date": 1476910153, "post_id": 40141211, "comment_id": 67552466, "body": "That is not the problem I have. I want to have a possibility to type the number of bits on my keyboard."}, {"owner": {"reputation": 314, "user_id": 3876609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c55c8e25a139c537665bbe496b20feb0?s=128&d=identicon&r=PG&f=1", "display_name": "Dali", "link": "https://stackoverflow.com/users/3876609/dali"}, "reply_to_user": {"reputation": 41, "user_id": 7044436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d25c1fdfea25e3fd26a33962f8bd473f?s=128&d=identicon&r=PG&f=1", "display_name": "januszysko", "link": "https://stackoverflow.com/users/7044436/januszysko"}, "edited": false, "score": 0, "creation_date": 1476910523, "post_id": 40141211, "comment_id": 67552657, "body": "The template argument must be defined before compilation."}], "tags": [], "owner": {"reputation": 314, "user_id": 3876609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c55c8e25a139c537665bbe496b20feb0?s=128&d=identicon&r=PG&f=1", "display_name": "Dali", "link": "https://stackoverflow.com/users/3876609/dali"}, "is_accepted": false, "score": 0, "last_activity_date": 1476909916, "creation_date": 1476909916, "answer_id": 40141211, "question_id": 40140897, "link": "https://stackoverflow.com/questions/40140897/c-how-can-i-assign-an-input-value-to-a-stdbitset-argument/40141211#40141211", "title": "C++ How can I assign an input value to a std::bitset argument?", "body": "<p>You have to define const int bits=10; as a global constant :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;math.h&gt;\n#include &lt;bitset&gt;\n\nusing namespace std;\nconst unsigned bits=10;\nint main() {\n    int maximum_value = 0,x_temp=10;\n\n    for (int i = 1; i &lt;= bits; i++) {\n        maximum_value += pow(2, bits - i);\n    }\n    for (int i = maximum_value; i &gt;= 0; i--)\n        cout &lt;&lt; bitset&lt;bits&gt;(maximum_value - i) &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/FJBkI.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/FJBkI.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 41, "user_id": 7044436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d25c1fdfea25e3fd26a33962f8bd473f?s=128&d=identicon&r=PG&f=1", "display_name": "januszysko", "link": "https://stackoverflow.com/users/7044436/januszysko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2108, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1476910728, "creation_date": 1476908725, "question_id": 40140897, "link": "https://stackoverflow.com/questions/40140897/c-how-can-i-assign-an-input-value-to-a-stdbitset-argument", "title": "C++ How can I assign an input value to a std::bitset argument?", "body": "<p>I want to make a simple program that will take number of bits from the input and as an output show binary numbers, written on given bits <em>(example: I type 3: it shows 000, 001, 010, 011, 100, 101, 110, 111)</em>.\nThe only problem I get is in the second <em>for</em>-loop, when I try to assign variable in <em>bitset&lt;<strong>bits</strong>></em>, but it wants constant number.\nIf you could help me find the solution I would be really greatful.\nHere's the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;bitset&gt;\n#include &lt;cmath&gt;\n\nusing namespace std;\n\nint main() {\n    int maximum_value = 0,x_temp=10;\n    //cin &gt;&gt; x_temp;\n    int const bits = x_temp;\n\n    for (int i = 1; i &lt;= bits; i++) {\n        maximum_value += pow(2, bits - i);\n    }\n    for (int i = maximum_value; i &gt;= 0; i--)\n        cout &lt;&lt; bitset&lt;bits&gt;(maximum_value - i) &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "intel", "pragma", "prefetch", "xeon-phi"], "answers": [{"comments": [{"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1478246104, "post_id": 40405582, "comment_id": 68084518, "body": "Unfortunately, still the same result. I even tried <code>#pragma noprefetch a_ptr</code> (according to this link: <a href=\"https://software.intel.com/en-us/node/524554\" rel=\"nofollow noreferrer\">software.intel.com/en-us/node/524554</a>) and the compiler still generates prefetch instructions for me. I also tried latest Intel 17.0.0 compiler, same outcome. You can find my entire code here: <a href=\"https://github.com/DanielLangr/ntload/blob/master/test-mic.cpp\" rel=\"nofollow noreferrer\">github.com/DanielLangr/ntload/blob/master/test-mic.cpp</a>."}, {"owner": {"reputation": 46, "user_id": 7110831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8142ca3abd6151b9668eff19e73ce99?s=128&d=identicon&r=PG", "display_name": "K. Davis", "link": "https://stackoverflow.com/users/7110831/k-davis"}, "edited": false, "score": 0, "creation_date": 1478275064, "post_id": 40405582, "comment_id": 68102399, "body": "@BeeOnRobe - Yes, the hints are valid on IA-32 w/Intel compiler (see [link] <a href=\"https://software.intel.com/en-us/node/683920\" rel=\"nofollow noreferrer\">software.intel.com/en-us/node/683920</a>). Daniel Langr - Please permit me time to consult w/others on your code and I&#39;ll get back to you."}, {"owner": {"reputation": 46, "user_id": 7110831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8142ca3abd6151b9668eff19e73ce99?s=128&d=identicon&r=PG", "display_name": "K. Davis", "link": "https://stackoverflow.com/users/7110831/k-davis"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1478893447, "post_id": 40405582, "comment_id": 68348374, "body": "@DanielLangr - For your code the guidance is to use &quot;<i>&quot; instead of &quot;a_ptr&quot; in the prefetch directive as follows:  #pragma prefetch *:3  Note that &quot;</i>&quot; means that the directive will apply for &quot;ALL&quot; memory refs inside the loop. In this loop, b_ptr cannot be prefetched by the compiler anyway - since it is not a linear address expression. So the &quot;*&quot; applies only to a_ptr anyway here - and leads to vprefetchnta (on both KNC and KNL)."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1479132907, "post_id": 40405582, "comment_id": 68416916, "body": "Nice, it works, thanks a lot. Any idea why the pragma with <code>a_ptr</code> does not work and with <code>*</code> does? Anyway, could you please update your answer so I could mark it as accepted?"}, {"owner": {"reputation": 46, "user_id": 7110831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8142ca3abd6151b9668eff19e73ce99?s=128&d=identicon&r=PG", "display_name": "K. Davis", "link": "https://stackoverflow.com/users/7110831/k-davis"}, "edited": false, "score": 0, "creation_date": 1479314877, "post_id": 40405582, "comment_id": 68507593, "body": "I edited the answer. Please pardon any mis-steps in editing/posting as I\u2019m new to stackoverflow. Thank you."}], "tags": [], "owner": {"reputation": 46, "user_id": 7110831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8142ca3abd6151b9668eff19e73ce99?s=128&d=identicon&r=PG", "display_name": "K. Davis", "link": "https://stackoverflow.com/users/7110831/k-davis"}, "is_accepted": true, "score": 3, "last_activity_date": 1479314837, "last_edit_date": 1479314837, "creation_date": 1478187263, "answer_id": 40405582, "question_id": 40140728, "link": "https://stackoverflow.com/questions/40140728/why-intel-compiler-ignores-the-non-temporal-prefetch-pragma-directive-for-intel/40405582#40405582", "title": "Why Intel compiler ignores the non-temporal prefetch pragma directive for Intel MIC?", "body": "<p>This is a known issue - the BKM is to use explicit values 0,1,2,3 for hints (t0, t1, t2, nta) in the prefetch directives/pragmas (and NOT use the MM_HINT enum).</p>\n\n<p>This is because the MM_HINT enum in the header files map differently:</p>\n\n<pre><code>/* constants to use with _mm_prefetch  (extracted from *mmintrin.h) */\n#define _MM_HINT_T0 1\n#define _MM_HINT_T1 2\n#define _MM_HINT_T2 3\n#define _MM_HINT_NTA    0    &lt;--maps here\n#define _MM_HINT_ENTA   4\n#define _MM_HINT_ET0    5\n#define _MM_HINT_ET1    6\n#define _MM_HINT_ET2    7\n</code></pre>\n\n<p>Plus the Intel headers and gcc headers use different enum values - that is also troublesome. So the hint --enums are to be used only for the _mm_prefetch intrinsics, NOT for the prefetch directives.</p>\n\n<p>For this example, you should be able to use: <strong>#pragma prefetch a_ptr:3</strong></p>\n\n<p>However, that suggested syntax is not currently usable due to a defect where the compiler is currently unable to properly connect the a_ptr load memory-ref inside the loop with the expression in the prefetch directive; therefore, a temporary solution is to use the following syntax:</p>\n\n<p><strong>#pragma prefetch *:3</strong> </p>\n\n<p><em>Note</em>: The asterisk means the directive will apply for \"ALL\" memory refs inside the loop. In this loop, b_ptr cannot be prefetched by the compiler anyway - since it is not a linear address expression. So the \"*\" applies only to a_ptr anyway here - and leads to vprefetchnta (on both KNC and KNL).</p>\n\n<p>The defect will be fixed in a future release.</p>\n"}], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 851, "favorite_count": 4, "accepted_answer_id": 40405582, "answer_count": 1, "score": 8, "last_activity_date": 1479314837, "creation_date": 1476908105, "last_edit_date": 1476909232, "question_id": 40140728, "link": "https://stackoverflow.com/questions/40140728/why-intel-compiler-ignores-the-non-temporal-prefetch-pragma-directive-for-intel", "title": "Why Intel compiler ignores the non-temporal prefetch pragma directive for Intel MIC?", "body": "<p>Intel compiler generates the following prefetch instruction within a loop for accessing an array by <code>a_ptr</code> pointer:</p>\n\n<pre><code>400e93:       62 d1 78 08 18 4c 24    vprefetch0 [r12+0x80]\n</code></pre>\n\n<p>If I manually change (by hex-editing the executable) this to non-temporal prefetching:</p>\n\n<pre><code>400e93:       62 d1 78 08 18 44 24    vprefetchnta [r12+0x80]\n</code></pre>\n\n<p>the loop runs almost 1.5 times faster (<strong>!!!</strong>). However, I would prefer the compiler to generate non-temporal prefetching for me. I thought that</p>\n\n<pre><code>#pragma prefetch a_ptr:_MM_HINT_NTA\n</code></pre>\n\n<p>before the loop <a href=\"https://software.intel.com/en-us/node/524554\" rel=\"noreferrer\">should do the trick</a>, but it actually does not; it generates the very same instructions as withnout the pragma. Why <code>icpc</code> ignores this pragma? How may I force it to generate non-temporal prefetchning?</p>\n\n<p>Opt. report does not say anything useful as far as I see:</p>\n\n<pre><code>LOOP BEGIN at test-mic.cpp(56,5)\n   remark #15344: loop was not vectorized: vector dependence prevents vectorization\n   remark #15346: vector dependence: assumed ANTI dependence between b_ptr line 64 and b_ptr line 65\n   remark #15346: vector dependence: assumed FLOW dependence between b_ptr line 65 and b_ptr line 64\n   remark #25018: Total number of lines prefetched=2\n   remark #25019: Number of spatial prefetches=2, dist=29\n   remark #25021: Number of initial-value prefetches=2\n   remark #25139: Using second-level distance 2 for prefetching spatial memory reference   [ test-mic.cpp(61,50) ]\n   remark #25015: Estimate of max trip count of loop=1048576\nLOOP END\n</code></pre>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "edited": false, "score": 3, "creation_date": 1476907980, "post_id": 40140657, "comment_id": 67551322, "body": "This question is probably more suited to <a href=\"http://codereview.stackexchange.com/\">codereview.se</a>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1476908003, "post_id": 40140657, "comment_id": 67551334, "body": "Why do you want to reduce the number of four loops? I would rather recommend you to add at least one, because to me it seems like you wrote almost exact code 10 times just to do 10 times the same thing with different objects"}, {"owner": {"reputation": 189, "user_id": 5523417, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10156220795805634/picture?type=large", "display_name": "Adel Khatem", "link": "https://stackoverflow.com/users/5523417/adel-khatem"}, "edited": false, "score": 0, "creation_date": 1476908427, "post_id": 40140657, "comment_id": 67551596, "body": "the code is too long and I repeated the for loops for 10 times. I would like to minimize the for loops, but I don&#39;t know how I can do&#39;t without effects on the output"}, {"owner": {"reputation": 4268, "user_id": 5768335, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FVCGA.jpg?s=128&g=1", "display_name": "amanuel2", "link": "https://stackoverflow.com/users/5768335/amanuel2"}, "edited": false, "score": 2, "creation_date": 1476908473, "post_id": 40140657, "comment_id": 67551622, "body": "@AdelKhatem , this is a codereview question :/"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1476909499, "post_id": 40140657, "comment_id": 67552164, "body": "NASA, we&#39;ve got problems here.  You have <code>ped1</code> declared globally as a <code>Mat</code> type.  You also create a shadow variable, <code>ped1</code> as a <code>std::vector</code> inside <code>main</code>.  Which variable are you referring to? This is with the other <code>ped</code> variables as well."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1476909600, "post_id": 40140657, "comment_id": 67552209, "body": "Looks like you need to place the images and the <code>ped</code> into a container or containers.  This will allow you to have one outer loop."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1476913060, "post_id": 40140657, "comment_id": 67553843, "body": "As punishment for producing this sort of.. um.. code, you shall write 1000x (by hand) &quot;I shall not repeat myself.&quot; :P | But seriously, if you have to copy/paste the same code (let alone 10 times), it&#39;s a good sign that you should probably turn it into a function."}, {"owner": {"reputation": 1459, "user_id": 798093, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cC5Ox.jpg?s=128&g=1", "display_name": "masad", "link": "https://stackoverflow.com/users/798093/masad"}, "edited": false, "score": 0, "creation_date": 1476914962, "post_id": 40140657, "comment_id": 67554582, "body": "I do not think so that the for loops can be reduced. Yes! the code is repetitive and can definitely benefit from a function or nested for loops as suggested by Thomas. However, it does not reduce the overall number of loops or in other words the Big-O notation. This is not possible, atleast with the information provided."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "reply_to_user": {"reputation": 1459, "user_id": 798093, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cC5Ox.jpg?s=128&g=1", "display_name": "masad", "link": "https://stackoverflow.com/users/798093/masad"}, "edited": false, "score": 0, "creation_date": 1476919258, "post_id": 40140657, "comment_id": 67556009, "body": "@masad Somehow I don&#39;t think the question was about algorithmic complexity."}, {"owner": {"reputation": 1459, "user_id": 798093, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cC5Ox.jpg?s=128&g=1", "display_name": "masad", "link": "https://stackoverflow.com/users/798093/masad"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1476988707, "post_id": 40140657, "comment_id": 67593036, "body": "@DanMa\u0161ek hmmm, its a bit ambiguous. If complexity is not to be reduced then i think this question is answered below. Complexity is the first thing I think when someone tells me to reduce the number of loops."}], "answers": [{"comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1476912501, "post_id": 40141215, "comment_id": 67553594, "body": "Actually he might need a little more (perhaps a vector of structs containing image + params), since at least one of the parameters (<code>neighborcount</code>) differ in some of the invocations. Hard to tell (but hardly surprising it got missed with such copy/paste mess) if that&#39;s a mistake or intent."}, {"owner": {"reputation": 189, "user_id": 5523417, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10156220795805634/picture?type=large", "display_name": "Adel Khatem", "link": "https://stackoverflow.com/users/5523417/adel-khatem"}, "edited": false, "score": 0, "creation_date": 1476913006, "post_id": 40141215, "comment_id": 67553813, "body": "I used this code but I got error. the error is (no match in ++ped)"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "reply_to_user": {"reputation": 189, "user_id": 5523417, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10156220795805634/picture?type=large", "display_name": "Adel Khatem", "link": "https://stackoverflow.com/users/5523417/adel-khatem"}, "edited": false, "score": 2, "creation_date": 1476913291, "post_id": 40141215, "comment_id": 67553945, "body": "@AdelKhatem There was a pretty obvious typo (<code>++ped</code> instead of <code>++p</code>). You need to think and reason about the code a little rather than just blindly copy it."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1476913129, "last_edit_date": 1476913129, "creation_date": 1476909925, "answer_id": 40141215, "question_id": 40140657, "link": "https://stackoverflow.com/questions/40140657/reduce-number-of-for-loop/40141215#40141215", "title": "reduce number of for loop", "body": "<p>Make an outer <code>std::vector</code> for images and <code>ped</code> variables:  </p>\n\n<pre><code>std::vector&lt;Mat&gt; images(10);\nstd::vector&lt;vector&lt;Rect&gt; &gt; peds;\n// ...\nfor (unsigned int p = 0; p &lt; 10; ++p)\n{\n    pedestrians_cascade.detectMultiScale( images[p], peds[p],\n                                         1.1, 5,\n                                         0|CASCADE_SCALE_IMAGE,\n                                         Size(30, 30) );\n    for (int i = 0; i &lt; peds[p].size(); i++) // Iterate through all current elements (detected ped)\n    {\n        Point pt1(peds[p][i].x, peds[p][i].y); // Display detected ped on main window - live stream from camera\n        Point pt2((peds[p][i].x + peds[p][i].width),\n                  (peds[p][i].y + peds[p][i].height));\n        rectangle(images[p],\n                  pt2, pt1,\n                  Scalar(255, 0 , 0), 2, 8, 0);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 5523417, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10156220795805634/picture?type=large", "display_name": "Adel Khatem", "link": "https://stackoverflow.com/users/5523417/adel-khatem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 278, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1476913129, "creation_date": 1476907861, "question_id": 40140657, "link": "https://stackoverflow.com/questions/40140657/reduce-number-of-for-loop", "title": "reduce number of for loop", "body": "<p>I wrote a code to detect pedestrians. the code is completely working but as you see in below code there are many for loops. my question is how i can reduce the numbers of for loops without effects on the output.</p>\n\n<pre><code>#include &lt;opencv2/core/core.hpp&gt; \n#include &lt;opencv2/highgui/highgui.hpp&gt; \n#include &lt;opencv2/imgproc/imgproc.hpp&gt; \n#include &lt;opencv2/features2d/features2d.hpp&gt;\n#include &lt;opencv2/objdetect/objdetect.hpp&gt;\n\n#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n\nusing namespace std;\nusing namespace cv;\nvoid detectAndDisplay( Mat frame );\n\n/** Global variables */\nCascadeClassifier pedestrians_cascade;\nMat image1,image2,image3,image4,image5,image6,image7,image8,image9,image10;\nMat ped1,ped2,ped3,ped4,ped5,ped6,ped7,ped8,ped9,ped10;\nint x;\nint y;\nint width, height;\n\nint main( )\n{\n    // Load Face cascade (.xml file)\n    pedestrians_cascade = CascadeClassifier(\"hogcascade_pedestrians.xml\");\n\n    // Read an images\n    image1 = imread(\"ped1.jpg\");\n    image2 = imread(\"ped2.jpg\");\n    image3 = imread(\"ped3.jpg\");\n    image4 = imread(\"ped4.jpg\");\n    image5 = imread(\"ped5.jpg\");\n    image6 = imread(\"ped6.jpg\");\n    image7 = imread(\"ped7.jpg\");\n    image8 = imread(\"ped8.jpg\");\n    image9 = imread(\"ped9.jpg\");\n    image10 = imread(\"ped10.jpg\");\n\n     // these functions use to draw rectangles\n    std::vector&lt;Rect&gt; ped1;\n    pedestrians_cascade.detectMultiScale( image1, ped1, 1.1, , 0|CASCADE_SCALE_IMAGE, Size(30, 30) );\n    for (int i = 0; i &lt; ped1.size(); i++) // Iterate through all current elements (detected ped)\n    {\n       Point pt1(ped1[i].x, ped1[i].y); // Display detected ped on main window - live stream from camera\n       Point pt2((ped1[i].x + ped1[i].width), (ped1[i].y + ped1[i].height));\n        //rectangle(image1, ped1[i], Scalar(255, 0 , 0), 2, 8, 0);\n        rectangle(image1,pt2,pt1, Scalar(255,0,0), 2,8,0);\n    }\n\n    std::vector&lt;Rect&gt; ped2;\n    pedestrians_cascade.detectMultiScale( image2, ped2, 1.1, 5, 0|CASCADE_SCALE_IMAGE, Size(30, 30) );\n    for (int i = 0; i &lt; ped2.size(); i++) // Iterate through all current elements (detected ped)\n    {\n        Point pt1(ped2[i].x, ped2[i].y); // Display detected ped on main window - live stream from camera\n        Point pt2((ped2[i].x + ped2[i].width), (ped2[i].y + ped2[i].height));\n        rectangle(image2, pt2, pt1, Scalar(255, 0 , 0), 2, 8, 0);\n    }\n\n    std::vector&lt;Rect&gt; ped3;\n    pedestrians_cascade.detectMultiScale( image3, ped3, 1.1, 2, 0|CASCADE_SCALE_IMAGE, Size(30, 30) );\n    for (int i = 0; i &lt; ped3.size(); i++) // Iterate through all current elements (detected ped)\n    {\n        Point pt1(ped3[i].x, ped3[i].y); // Display detected ped on main window - live stream from camera\n        Point pt2((ped3[i].x + ped3[i].width), (ped3[i].y + ped3[i].height));\n        rectangle(image3, pt2, pt1, Scalar(255, 0 , 0), 2, 8, 0);\n    }\n\n    std::vector&lt;Rect&gt; ped4;\n    pedestrians_cascade.detectMultiScale( image4, ped4, 1.1, 2, 0|CASCADE_SCALE_IMAGE, Size(30, 30) );\n    for (int i = 0; i &lt; ped4.size(); i++) // Iterate through all current elements (detected ped)\n    {\n        Point pt1(ped4[i].x, ped4[i].y); // Display detected ped on main window - live stream from camera\n        Point pt2((ped4[i].x + ped4[i].width), (ped4[i].y + ped4[i].height));\n        rectangle(image4, pt2, pt1, Scalar(255, 0 , 0), 2, 8, 0);\n    }\n\n    std::vector&lt;Rect&gt; ped5;\n    pedestrians_cascade.detectMultiScale( image5, ped5, 1.1, 2, 0|CASCADE_SCALE_IMAGE, Size(30, 30) );\n    for (int i = 0; i &lt; ped5.size(); i++) // Iterate through all current elements (detected ped)\n    {\n        Point pt1(ped5[i].x, ped5[i].y); // Display detected ped on main window - live stream from camera\n        Point pt2((ped5[i].x + ped5[i].width), (ped5[i].y + ped5[i].height));\n        rectangle(image5, pt2, pt1, Scalar(255, 0 , 0), 2, 8, 0);\n    }\n\n    std::vector&lt;Rect&gt; ped6;\n    pedestrians_cascade.detectMultiScale( image6, ped6, 1.1, 2, 0|CASCADE_SCALE_IMAGE, Size(30, 30) );\n    for (int i = 0; i &lt; ped6.size(); i++) // Iterate through all current elements (detected ped)\n    {\n        Point pt1(ped6[i].x, ped6[i].y); // Display detected ped on main window - live stream from camera\n        Point pt2((ped6[i].x + ped6[i].width), (ped6[i].y + ped6[i].height));\n        rectangle(image6, pt2, pt1, Scalar(255, 0 , 0), 2, 8, 0);\n    }\n\n    std::vector&lt;Rect&gt; ped7;\n    pedestrians_cascade.detectMultiScale( image7, ped7, 1.1, 2, 0|CASCADE_SCALE_IMAGE, Size(30, 30) );\n    for (int i = 0; i &lt; ped7.size(); i++) // Iterate through all current elements (detected ped)\n    {\n        Point pt1(ped7[i].x, ped7[i].y); // Display detected ped on main window - live stream from camera\n        Point pt2((ped7[i].x + ped7[i].width), (ped7[i].y + ped7[i].height));\n        rectangle(image7, pt2, pt1, Scalar(255, 0 , 0), 2, 8, 0);\n    }\n\n    std::vector&lt;Rect&gt; ped8;\n    pedestrians_cascade.detectMultiScale( image8, ped8, 1.1, 20, 0|CASCADE_SCALE_IMAGE, Size(30, 30) );\n    for (int i = 0; i &lt; ped8.size(); i++) // Iterate through all current elements (detected ped)\n    {\n        Point pt1(ped8[i].x, ped8[i].y); // Display detected ped on main window - live stream from camera\n        Point pt2((ped8[i].x + ped8[i].width), (ped8[i].y + ped8[i].height));\n        rectangle(image8, pt2, pt1, Scalar(255, 0 , 0), 2, 8, 0);\n    }\n\n    std::vector&lt;Rect&gt; ped9;\n    pedestrians_cascade.detectMultiScale( image9, ped9, 1.1, 2, 0|CASCADE_SCALE_IMAGE, Size(30, 30) );\n    for (int i = 0; i &lt; ped9.size(); i++) // Iterate through all current elements (detected ped)\n    {\n        Point pt1(ped9[i].x, ped9[i].y); // Display detected ped on main window - live stream from camera\n        Point pt2((ped9[i].x + ped9[i].width), (ped9[i].y + ped9[i].height));\n        rectangle(image9, pt2, pt1, Scalar(255, 0 , 0), 2, 8, 0);\n    }\n\n    std::vector&lt;Rect&gt; ped10;\n    pedestrians_cascade.detectMultiScale( image10, ped10, 1.1, 2, 0|CASCADE_SCALE_IMAGE, Size(30, 30) );\n    for (int i = 0; i &lt; ped10.size(); i++) // Iterate through all current elements (detected ped)\n    {\n        Point pt1(ped10[i].x, ped10[i].y); // Display detected ped on main window - live stream from camera\n        Point pt2((ped10[i].x + ped10[i].width), (ped10[i].y + ped10[i].height));\n        rectangle(image10, pt2, pt1, Scalar(255, 0 , 0), 2, 8, 0);\n    }\n\n    imshow( \"ped1\", image1);\n    /*imshow( \"ped2\", image2);\n    imshow( \"ped3\", image3);\n    imshow( \"ped4\", image4);\n    imshow( \"ped5\", image5);\n    imshow( \"ped6\", image6);\n    imshow( \"ped7\", image7);\n    imshow( \"ped8\", image8);\n    imshow( \"ped9\", image9);\n    imshow( \"ped10\", image10);*/\n    waitKey(0);                   \n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "r", "rcpp"], "answers": [{"tags": [], "owner": {"reputation": 17516, "user_id": 1345455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DrBTs.jpg?s=128&g=1", "display_name": "coatless", "link": "https://stackoverflow.com/users/1345455/coatless"}, "is_accepted": true, "score": 5, "last_activity_date": 1476916772, "last_edit_date": 1476916772, "creation_date": 1476909831, "answer_id": 40141176, "question_id": 40140656, "link": "https://stackoverflow.com/questions/40140656/same-rcpp-function-returns-different-output-if-print-statement-added/40141176#40141176", "title": "Same Rcpp function returns different output if print statement added", "body": "<p>The problem that you ran into is not explicitly declaring starting values for sums before using them.</p>\n\n<pre><code>double first_sum, second_sum = 0;\n</code></pre>\n\n<p>is not the same as:</p>\n\n<pre><code>double first_sum = 0, second_sum = 0;\n</code></pre>\n\n<p>See compiler warning flags:</p>\n\n<pre><code>file11d36f564b15.cpp:17:5: warning: variable 'first_sum' is uninitialized when used here [-Wuninitialized]\n    first_sum += J(i, j) * sigma[i] * sigma[j];\n    ^~~~~~~~~\nfile11d36f564b15.cpp:8:21: note: initialize the variable 'first_sum' to silence this warning\n    double first_sum, second_sum = 0;\n</code></pre>\n\n<hr>\n\n<p>You immediately use:</p>\n\n<pre><code>first_sum += J(i, j) * sigma[i] * sigma[j];\n</code></pre>\n\n<p>without setting a <code>first_sum = ...;</code></p>\n\n<hr>\n\n<p>Furthermore, another issue is:</p>\n\n<pre><code>second_sum = 0;\n</code></pre>\n\n<p>initializes a double with an integer value. While this issue is minor in scope, to correct this, all one has to do is use <code>0.0</code> instead of <code>0</code>.</p>\n\n<pre><code>second_sum = 0.0;\n</code></pre>\n\n<p>This also applies for <code>first_sum</code>.</p>\n\n<hr>\n\n<p>Code with above fixes:</p>\n\n<pre><code>library(Rcpp)\n\ncppFunction ( \n    \"double H_sigma_1(IntegerVector sigma, NumericMatrix J, NumericVector h)\n    {\n    double first_sum = 0.0, second_sum = 0.0;\n    int n = sigma.size();\n\n    for(int i = 0; i &lt; n; i++) {\n      for(int j = 0; j &lt; n; j++) {\n        // skip inside loop if i &gt;= j to stop double counting\n        if(i &gt;= j) {continue;}\n        first_sum += J(i, j) * sigma[i] * sigma[j];\n        Rcout &lt;&lt; first_sum &lt;&lt; std::endl;\n      }\n      second_sum += h[i] * sigma[i];\n    }\n    return(-1.0 * first_sum - second_sum);\n    }\"\n)\n\ncppFunction ( \n    \"double H_sigma_2(IntegerVector sigma, NumericMatrix J, NumericVector h)\n    {\n    double first_sum = 0.0, second_sum = 0.0;\n    int n = sigma.size();\n\n    for(int i = 0; i &lt; n; i++) {\n      for(int j = 0; j &lt; n; j++) {\n        // skip inside loop if i &gt;= j to stop double counting\n        if(i &gt;= j) {continue;}\n        first_sum += J(i, j) * sigma[i] * sigma[j];\n      }\n      second_sum += h[i] * sigma[i];\n    }\n    return(-1.0 * first_sum - second_sum);\n    }\"\n)\n</code></pre>\n\n<p><strong>Test:</strong>   </p>\n\n<pre><code>n = 2\nparams = rep(1, n) \nh = rep(params[1], n)\nJ = toeplitz(c(0, params[2], rep(0, n - 2)))\n\nH_sigma_1(c(-1, -1), J, h)\n</code></pre>\n\n<p><strong>Output:</strong>   </p>\n\n<pre><code>1\n[1] 1\n</code></pre>\n\n<p><strong>Test 2:</strong></p>\n\n<pre><code>H_sigma_2(c(-1, -1), J, h)\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>[1] 1\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 3674705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b1780dfdeaf467d024c43b89532e41?s=128&d=identicon&r=PG&f=1", "display_name": "sm1116", "link": "https://stackoverflow.com/users/3674705/sm1116"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 40141176, "answer_count": 1, "score": 3, "last_activity_date": 1476932614, "creation_date": 1476907858, "last_edit_date": 1476932614, "question_id": 40140656, "link": "https://stackoverflow.com/questions/40140656/same-rcpp-function-returns-different-output-if-print-statement-added", "title": "Same Rcpp function returns different output if print statement added", "body": "<p>A C++ function I wrote using Rcpp gives different output depending on whether or not I have a <code>Rcout</code> or <code>Rprintf</code> statement in the code. The code below returns <code>1</code>, which is the correct value, for the function with a print statement <code>H_sigma_1()</code>. However, for <code>H_sigma_2()</code>, the function without a print statement, the function returns 2. I've tested this on Ubuntu 16.04.1 as well as  CentOS 6.8. Though, I was not able to reproduce this bug on Windows 10. Therefore, this seems to be a Linux issue. </p>\n\n<h3>Rcpp Code</h3>\n\n<pre><code>library(Rcpp)\n\ncppFunction ( \n  \"double H_sigma_1(IntegerVector sigma, NumericMatrix J, NumericVector h)\n  {\n    double first_sum, second_sum = 0;\n    int n = sigma.size();\n\n    for(int i = 0; i &lt; n; i++)\n    {\n      for(int j = 0; j &lt; n; j++)\n      {\n        // skip inside loop if i &gt;= j to stop double counting\n        if(i &gt;= j) {continue;}\n        first_sum += J(i, j) * sigma[i] * sigma[j];\n        Rcout &lt;&lt; first_sum &lt;&lt; std::endl;\n      }\n      second_sum += h[i] * sigma[i];\n    }\n    return(-1.0 * first_sum - second_sum);\n  }\"\n)\n\ncppFunction (\n  \"double H_sigma_2(IntegerVector sigma, NumericMatrix J, NumericVector h)\n  {\n    double first_sum, second_sum = 0;\n    int n = sigma.size();\n\n    for(int i = 0; i &lt; n; i++)\n    {\n      for(int j = 0; j &lt; n; j++)\n      {\n        // skip inside loop if i &gt;= j to stop double counting\n        if(i &gt;= j) {continue;}\n        first_sum += J(i, j) * sigma[i] * sigma[j];\n        // Rcout &lt;&lt; first_sum &lt;&lt; std::endl;\n      }\n      second_sum += h[i] * sigma[i];\n    }\n    return(-1.0 * first_sum - second_sum);\n  }\"\n)\n</code></pre>\n\n<h3>Example call</h3>\n\n<p><strong>Setup:</strong></p>\n\n<pre><code>n = 2\nparams = rep(1, n) \nh = rep(params[1], n)\nJ = toeplitz(c(0, params[2], rep(0, n - 2)))\n</code></pre>\n\n<p><strong>Test 1:</strong></p>\n\n<pre><code>H_sigma_1(c(-1, -1), J, h)\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>1\n[1] 1\n</code></pre>\n\n<p><strong>Test 2</strong></p>\n\n<pre><code>H_sigma_2(c(-1, -1), J, h)\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>[1] 2\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "observer-pattern", "static-class"], "comments": [{"owner": {"reputation": 50972, "user_id": 74815, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/498c19952d2aa2c9ea2ccc4d9ea8ec69?s=128&d=identicon&r=PG", "display_name": "i_am_jorf", "link": "https://stackoverflow.com/users/74815/i-am-jorf"}, "edited": false, "score": 0, "creation_date": 1476909895, "post_id": 40140586, "comment_id": 67552355, "body": "What is <code>Protocol</code>?"}, {"owner": {"reputation": 35, "user_id": 5036190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xQhwR.jpg?s=128&g=1", "display_name": "Coodie_d", "link": "https://stackoverflow.com/users/5036190/coodie-d"}, "reply_to_user": {"reputation": 50972, "user_id": 74815, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/498c19952d2aa2c9ea2ccc4d9ea8ec69?s=128&d=identicon&r=PG", "display_name": "i_am_jorf", "link": "https://stackoverflow.com/users/74815/i-am-jorf"}, "edited": false, "score": 0, "creation_date": 1476910687, "post_id": 40140586, "comment_id": 67552739, "body": "@i_am_jorf I updated the topic."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 5036190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xQhwR.jpg?s=128&g=1", "display_name": "Coodie_d", "link": "https://stackoverflow.com/users/5036190/coodie-d"}, "edited": false, "score": 0, "creation_date": 1476910441, "post_id": 40141286, "comment_id": 67552612, "body": "it would work if I didn&#39;t need to give the information from packet.information to the GUI"}, {"owner": {"reputation": 1083, "user_id": 6826608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f02198302f3fb7b19ad09d9a9713a4e0?s=128&d=identicon&r=PG&f=1", "display_name": "Donghui Zhang", "link": "https://stackoverflow.com/users/6826608/donghui-zhang"}, "reply_to_user": {"reputation": 35, "user_id": 5036190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xQhwR.jpg?s=128&g=1", "display_name": "Coodie_d", "link": "https://stackoverflow.com/users/5036190/coodie-d"}, "edited": false, "score": 0, "creation_date": 1476910638, "post_id": 40141286, "comment_id": 67552717, "body": "In my solution, there is nothing preventing you from calling Gui::UpdateInformation with arguments."}, {"owner": {"reputation": 35, "user_id": 5036190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xQhwR.jpg?s=128&g=1", "display_name": "Coodie_d", "link": "https://stackoverflow.com/users/5036190/coodie-d"}, "edited": false, "score": 0, "creation_date": 1476911045, "post_id": 40141286, "comment_id": 67552926, "body": "But Gui::UpdateInformation is supposed to be called in Protocol::readPacket actually."}, {"owner": {"reputation": 1083, "user_id": 6826608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f02198302f3fb7b19ad09d9a9713a4e0?s=128&d=identicon&r=PG&f=1", "display_name": "Donghui Zhang", "link": "https://stackoverflow.com/users/6826608/donghui-zhang"}, "reply_to_user": {"reputation": 35, "user_id": 5036190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xQhwR.jpg?s=128&g=1", "display_name": "Coodie_d", "link": "https://stackoverflow.com/users/5036190/coodie-d"}, "edited": false, "score": 0, "creation_date": 1476911548, "post_id": 40141286, "comment_id": 67553166, "body": "Think of the idea I gave you as a high-level guideline how things should be done. Adjust it based on your context. If you need to call Gui::UpdateInformation in Protocol::readPacket, you may keep the unordered_map as a static variable inside a static member function of Protocol. In Procolol::readPacket, call that static member function to get the unordered_map."}], "tags": [], "owner": {"reputation": 1083, "user_id": 6826608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f02198302f3fb7b19ad09d9a9713a4e0?s=128&d=identicon&r=PG&f=1", "display_name": "Donghui Zhang", "link": "https://stackoverflow.com/users/6826608/donghui-zhang"}, "is_accepted": true, "score": 0, "last_activity_date": 1476910190, "creation_date": 1476910190, "answer_id": 40141286, "question_id": 40140586, "link": "https://stackoverflow.com/questions/40140586/c-static-observer-class/40141286#40141286", "title": "c++ static observer class", "body": "<p>In distributed computing, it is a common pattern for the network manager of a node to receive a message and call a dispatcher associated with the message type. Your need is quite similar. Here is what you could do:</p>\n\n<ul>\n<li>In your Network class, maintain an unordered_map&lt; packet_type, std::function >.</li>\n<li>When your program starts, push into that unordered_map an std::pair&lt;\"refreshGui\", Gui::UpdateInformation></li>\n<li>In Network::receivePacket, retrieve the function from the unordered_map and call it.</li>\n</ul>\n"}], "owner": {"reputation": 35, "user_id": 5036190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xQhwR.jpg?s=128&g=1", "display_name": "Coodie_d", "link": "https://stackoverflow.com/users/5036190/coodie-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 40141286, "answer_count": 1, "score": 0, "last_activity_date": 1476910973, "creation_date": 1476907618, "last_edit_date": 1476910973, "question_id": 40140586, "link": "https://stackoverflow.com/questions/40140586/c-static-observer-class", "title": "c++ static observer class", "body": "<p>I have two programs: a server and a client</p>\n\n<pre><code>class client\n{\n private:\n  Network    net;\n  Gui        gui;\n};\n</code></pre>\n\n<p>Here's the Network class</p>\n\n<pre><code>class Network\n{\n  public:\n   void      receivePacket(packet)\n   {\n     Protocol::readPacket(packet)\n   }\n};\n</code></pre>\n\n<p>Here's the Gui class</p>\n\n<pre><code>class Gui\n{\n private:\n  std::string   informations;\n\n public:\n  void          displayInfo();\n  void          updateInformation(information);\n};\n</code></pre>\n\n<p>And here's Protocol</p>\n\n<pre><code>class Protocol\n{\n     static void     readPacket(packet)\n     {\n       if (packet.command == \"refreshGui\")\n         //I need somehow to call GUI::UpdateInformation here and give the information from packet.information\n     }\n};\n</code></pre>\n\n<p>Protocol is considered as a \"static class\" which means that in shouldn't be instantiate. So the idea is that, when <code>Protocol::readPacket</code> get a <code>packet</code> from the server, it should be able to send the information to the <code>GUI</code>. However, it's not always the case, so passing a point/reference is not what I'm looking for.</p>\n\n<p>It's not well illustrated but the idea is:\n- <code>Protocol::readPacket</code> seek if we need to call <code>GUI</code>\n- Protocol shouldn't take another argument, and shouldn't be instantiate.</p>\n\n<p>Someone gave me the advice about using Observer-pattern. <code>Protocol</code> would be the subject and <code>GUI</code> the Observer. However, I couldn't make it without instantiate Protocol.</p>\n\n<p>So is there a way to do it without instantiate Protocol ?</p>\n"}, {"tags": ["c++", "r", "rcpp"], "comments": [{"owner": {"reputation": 2619, "user_id": 6621998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e46dff5e0d189a31d6bc30975c0b99?s=128&d=identicon&r=PG&f=1", "display_name": "shayaa", "link": "https://stackoverflow.com/users/6621998/shayaa"}, "edited": false, "score": 2, "creation_date": 1476907817, "post_id": 40140584, "comment_id": 67551216, "body": "You probably want to send this question to the mailing list if you want Dirk&#39;s attention, afaik he is most apt to respond to direct questions at the intended venue for doing so."}, {"owner": {"reputation": 602, "user_id": 1627208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/cCT5H.jpg?s=128&g=1", "display_name": "bra_racing", "link": "https://stackoverflow.com/users/1627208/bra-racing"}, "reply_to_user": {"reputation": 2619, "user_id": 6621998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e46dff5e0d189a31d6bc30975c0b99?s=128&d=identicon&r=PG&f=1", "display_name": "shayaa", "link": "https://stackoverflow.com/users/6621998/shayaa"}, "edited": false, "score": 0, "creation_date": 1476908099, "post_id": 40140584, "comment_id": 67551395, "body": "Sorry because I have not used a mailing list but, the answer would be public? I will do it if anyone can not help me, but asking here the answer is public and it could be useful for others"}, {"owner": {"reputation": 2619, "user_id": 6621998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e46dff5e0d189a31d6bc30975c0b99?s=128&d=identicon&r=PG&f=1", "display_name": "shayaa", "link": "https://stackoverflow.com/users/6621998/shayaa"}, "edited": false, "score": 1, "creation_date": 1476908485, "post_id": 40140584, "comment_id": 67551630, "body": "All the postings are available, they are only mailed to subscribers. Anyone can read your posts, and the answers are public."}, {"owner": {"reputation": 17516, "user_id": 1345455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DrBTs.jpg?s=128&g=1", "display_name": "coatless", "link": "https://stackoverflow.com/users/1345455/coatless"}, "edited": false, "score": 1, "creation_date": 1476911193, "post_id": 40140584, "comment_id": 67552996, "body": "This question does not meet the minimally reproducible example requirement as it omits the core class <code>myclass</code> that the question is based upon. Therefore, I&#39;m voting to close, which is a pity since this would make a great question for folks interested in modules..."}, {"owner": {"reputation": 602, "user_id": 1627208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/cCT5H.jpg?s=128&g=1", "display_name": "bra_racing", "link": "https://stackoverflow.com/users/1627208/bra-racing"}, "edited": false, "score": 0, "creation_date": 1476911354, "post_id": 40140584, "comment_id": 67553062, "body": "Ok, I will provided a simple code, but the problem is not related with the omitted code"}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1476911397, "post_id": 40140584, "comment_id": 67553078, "body": "I second the recommendation for rcpp-devel.  I believe I have recommended it to (anonymous, booooh) user &#39;bra_racing&#39; before.  Oh well.  Your loss."}, {"owner": {"reputation": 602, "user_id": 1627208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/cCT5H.jpg?s=128&g=1", "display_name": "bra_racing", "link": "https://stackoverflow.com/users/1627208/bra-racing"}, "edited": false, "score": 0, "creation_date": 1476911717, "post_id": 40140584, "comment_id": 67553249, "body": "What can I say? You rule"}], "answers": [{"comments": [{"owner": {"reputation": 602, "user_id": 1627208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/cCT5H.jpg?s=128&g=1", "display_name": "bra_racing", "link": "https://stackoverflow.com/users/1627208/bra-racing"}, "edited": false, "score": 0, "creation_date": 1476911699, "post_id": 40141560, "comment_id": 67553238, "body": "The error continues, but you are totally right, I did not notice the date of the guide. Sorry for any incovenience"}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "reply_to_user": {"reputation": 602, "user_id": 1627208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/cCT5H.jpg?s=128&g=1", "display_name": "bra_racing", "link": "https://stackoverflow.com/users/1627208/bra-racing"}, "edited": false, "score": 1, "creation_date": 1476911765, "post_id": 40141560, "comment_id": 67553274, "body": "Yes, just start from a small <i>working</i> example such as the one in <code>inst&#47;unitTests&#47;testRcppModule</code> or one from CRAN and take it from there. And I just added another point re <code>NAMESPACE</code>."}], "tags": [], "owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "is_accepted": false, "score": 2, "last_activity_date": 1476911824, "last_edit_date": 1476911824, "creation_date": 1476911289, "answer_id": 40141560, "question_id": 40140584, "link": "https://stackoverflow.com/questions/40140584/error-creating-a-module-with-rcpp/40141560#40141560", "title": "Error creating a module with Rcpp", "body": "<p>Well, you used a guide from 2012. Sometimes things change.  I would recommend to <em>also</em> looks at <em>current</em> packages using Modules.</p>\n\n<p>Here you no longer need </p>\n\n<pre><code>.onLoad&lt;-function(libname, pkgname){\n    require(\"methods\")\n    loadRcppModules()\n}\n</code></pre>\n\n<p>Since about 2013, all we ask for is a single <code>loadModule(\"moduleName\", TRUE)</code> in an R, really any R file.</p>\n\n<p>For example, the <em>entire</em> content of the <code>R/</code> directory of the <a href=\"https://cran.r-project.org/package=RcppCNPy\" rel=\"nofollow\">RcppCNPy package</a> is this</p>\n\n<pre><code>edd@max:~/git/rcppcnpy(master)$ cat R/*.R \n\nloadModule(\"cnpy\", TRUE)\n\n\nedd@max:~/git/rcppcnpy(master)$ \n</code></pre>\n\n<p>as the package defines a single module <code>cnpy</code>.</p>\n\n<p>Similarly, we no longer need the <code>RcppModules: ...</code> line in DESCRIPTION.</p>\n\n<p>Lastly, the Rcpp package itself contains a fully working package with Modules for its own unit tests.  You can look at that too.</p>\n\n<p><strong>Edit:</strong> You probably also want on <code>importFrom(Rcpp, evalCpp)</code> or alike in <code>NAMESPACE</code> which will instantiate Rcpp.  </p>\n"}, {"tags": [], "owner": {"reputation": 602, "user_id": 1627208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/cCT5H.jpg?s=128&g=1", "display_name": "bra_racing", "link": "https://stackoverflow.com/users/1627208/bra-racing"}, "is_accepted": true, "score": 0, "last_activity_date": 1477394018, "creation_date": 1477394018, "answer_id": 40238463, "question_id": 40140584, "link": "https://stackoverflow.com/questions/40140584/error-creating-a-module-with-rcpp/40238463#40238463", "title": "Error creating a module with Rcpp", "body": "<p>At the end, I have discovered the problem was related with a conflict with a dependence I am consuming and the include of the Rcpp.h file</p>\n"}], "owner": {"reputation": 602, "user_id": 1627208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/cCT5H.jpg?s=128&g=1", "display_name": "bra_racing", "link": "https://stackoverflow.com/users/1627208/bra-racing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 40238463, "answer_count": 2, "score": 0, "last_activity_date": 1477394018, "creation_date": 1476907614, "question_id": 40140584, "link": "https://stackoverflow.com/questions/40140584/error-creating-a-module-with-rcpp", "title": "Error creating a module with Rcpp", "body": "<p>I am trying to develop a R module using Rcpp. For it I followed a (<a href=\"http://dirk.eddelbuettel.com/papers/rcpp_workshop_advanced_user2012.pdf\" rel=\"nofollow\">Dirk Eddelbuettel's guide</a>)</p>\n\n<p>The files of my library have the content:</p>\n\n<p>functions.hpp:</p>\n\n<pre><code>class myclass {\n    // my atributes and functions\n}\n</code></pre>\n\n<p>functions.cpp:</p>\n\n<pre><code>#include &lt;Rcpp.h&gt;\n\nusing namespace Rcpp;\n\nclass myclass;\n\nRCPP_EXPOSED_CLASS(myclass)\n\n#include \"functions.hpp\"\n\n//Implementation of my funcions\n\nRCPP_MODULE(mymodule){\n    class_&lt;myclass&gt;(\"myclass\")\n    .constructor()\n    .method(\"oneMethod\", &amp;myclass::oneMethod)\n    //more methods\n;\n</code></pre>\n\n<p>}</p>\n\n<p>mypackageExports.R:</p>\n\n<pre><code>.onLoad&lt;-function(libname, pkgname){\n    require(\"methods\")\n    loadRcppModules()\n}\n</code></pre>\n\n<p>DESCRIPTION:</p>\n\n<pre><code>...\nLazyLoad: yes\nDepends: methods, Rcpp (&gt;= 0.12.4)\nLinkingTo: Rcpp\nRcppModules: mymodule\n</code></pre>\n\n<p>NAMESPACE:</p>\n\n<pre><code>useDynLib(mypackage)\nexportPattern(\"^[[:alpha:]]+\")\nimport(Rcpp)\n</code></pre>\n\n<p>When I compile the library with the command <code>R CMD INSTALL mypackage</code> I have the error:</p>\n\n<pre><code>installing to /home/user/R/x86_64-pc-linux-gnu-library/3.3/mypackage/libs\n** R\n** preparing package for lazy loading\n** help\n*** installing help indices\n** building package indices\n** testing if installed package can be loaded\n\n*** caught segfault ***\naddress (nil), cause 'memory not mapped'\n\nTraceback:\n 1: .Call(Module__classes_info, xp)\n 2: Module(m, pkg, mustStart = TRUE)\n 3: doTryCatch(return(expr), name, parentenv, handler)\n 4: tryCatchOne(expr, names, parentenv, handlers[[1L]])\n 5: tryCatchList(expr, classes, parentenv, handlers)\n 6: tryCatch({    mod &lt;- Module(m, pkg, mustStart = TRUE)    if (isTRUE(direct)) {        populate(mod, ns)    }    else {        forceAssignInNamespace(m, mod, ns)    }    assign(.moduleMetaName(m), mod, envir = ns)}, error = function(e) {    stop(sprintf(\"failed to load module %s from package %s\\n%s\",         m, pkg, conditionMessage(e)))})\n 7: loadRcppModules()\n 8: fun(libname, pkgname)\n 9: doTryCatch(return(expr), name, parentenv, handler)\n10: tryCatchOne(expr, names, parentenv, handlers[[1L]])\n11: tryCatchList(expr, classes, parentenv, handlers)\n12: tryCatch(fun(libname, pkgname), error = identity)\n13: runHook(\".onLoad\", env, package.lib, package)\n14: loadNamespace(package, lib.loc)\n15: doTryCatch(return(expr), name, parentenv, handler)\n16: tryCatchOne(expr, names, parentenv, handlers[[1L]])\n17: tryCatchList(expr, classes, parentenv, handlers)\n18: tryCatch(expr, error = function(e) {    call &lt;- conditionCall(e)    if (!is.null(call)) {        if (identical(call[[1L]], quote(doTryCatch)))             call &lt;- sys.call(-4L)        dcall &lt;- deparse(call)[1L]        prefix &lt;- paste(\"Error in\", dcall, \": \")        LONG &lt;- 75L        msg &lt;- conditionMessage(e)        sm &lt;- strsplit(msg, \"\\n\")[[1L]]        w &lt;- 14L + nchar(dcall, type = \"w\") + nchar(sm[1L], type = \"w\")        if (is.na(w))             w &lt;- 14L + nchar(dcall, type = \"b\") + nchar(sm[1L],                 type = \"b\")        if (w &gt; LONG)             prefix &lt;- paste0(prefix, \"\\n  \")    }    else prefix &lt;- \"Error : \"    msg &lt;- paste0(prefix, conditionMessage(e), \"\\n\")    .Internal(seterrmessage(msg[1L]))    if (!silent &amp;&amp; identical(getOption(\"show.error.messages\"),         TRUE)) {        cat(msg, file = stderr())        .Internal(printDeferredWarnings())    }    invisible(structure(msg, class = \"try-error\", condition = e))})\n19: try({    attr(package, \"LibPath\") &lt;- which.lib.loc    ns &lt;- loadNamespace(package, lib.loc)    env &lt;- attachNamespace(ns, pos = pos, deps)})\n20: library(pkg_name, lib.loc = lib, character.only = TRUE, logical.return = TRUE)\n21: withCallingHandlers(expr, packageStartupMessage = function(c) invokeRestart(\"muffleMessage\"))\n22: suppressPackageStartupMessages(library(pkg_name, lib.loc = lib,     character.only = TRUE, logical.return = TRUE))\n23: doTryCatch(return(expr), name, parentenv, handler)\n24: tryCatchOne(expr, names, parentenv, handlers[[1L]])\n25: tryCatchList(expr, classes, parentenv, handlers)\n26: tryCatch(expr, error = function(e) {    call &lt;- conditionCall(e)    if (!is.null(call)) {        if (identical(call[[1L]], quote(doTryCatch)))             call &lt;- sys.call(-4L)        dcall &lt;- deparse(call)[1L]        prefix &lt;- paste(\"Error in\", dcall, \": \")        LONG &lt;- 75L        msg &lt;- conditionMessage(e)        sm &lt;- strsplit(msg, \"\\n\")[[1L]]        w &lt;- 14L + nchar(dcall, type = \"w\") + nchar(sm[1L], type = \"w\")        if (is.na(w))             w &lt;- 14L + nchar(dcall, type = \"b\") + nchar(sm[1L],                 type = \"b\")        if (w &gt; LONG)             prefix &lt;- paste0(prefix, \"\\n  \")    }    else prefix &lt;- \"Error : \"    msg &lt;- paste0(prefix, conditionMessage(e), \"\\n\")    .Internal(seterrmessage(msg[1L]))    if (!silent &amp;&amp; identical(getOption(\"show.error.messages\"),         TRUE)) {        cat(msg, file = stderr())        .Internal(printDeferredWarnings())    }    invisible(structure(msg, class = \"try-error\", condition = e))})\n27: try(suppressPackageStartupMessages(library(pkg_name, lib.loc = lib,     character.only = TRUE, logical.return = TRUE)))\n28: tools:::.test_load_package(\"mypackage\", \"/home/user/R/x86_64-pc-linux-gnu-library/3.3\")\nAn irrecoverable exception occurred. R is aborting now ...\nSegmentation fault (core dumped)\nERROR: loading failed\n</code></pre>\n\n<p>Can anyone (@DirkEddelbuettel, my Rcpp's guru) tell what am I doing wrong?</p>\n"}, {"tags": ["c++", "loops"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1476907601, "post_id": 40140535, "comment_id": 67551088, "body": "you&#39;d need <code>thrd_sleep</code> and measuring time. Or a SDL-like framework with timer functions."}, {"owner": {"reputation": 4387, "user_id": 582782, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d59b4e0d3fc4d5036ff05c66218f6c7a?s=128&d=identicon&r=PG", "display_name": "sramij", "link": "https://stackoverflow.com/users/582782/sramij"}, "edited": false, "score": 0, "creation_date": 1476907605, "post_id": 40140535, "comment_id": 67551090, "body": "u can add a sleep of 16 millisecs between each loop iteration. I would  #include &lt;unistd.h&gt; and use usleep(microseconds);"}, {"owner": {"reputation": 4168, "user_id": 6273251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fCGXep-7snc/AAAAAAAAAAI/AAAAAAAAADk/nk_YDFGfkc0/photo.jpg?sz=128", "display_name": "Random Davis", "link": "https://stackoverflow.com/users/6273251/random-davis"}, "reply_to_user": {"reputation": 4387, "user_id": 582782, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d59b4e0d3fc4d5036ff05c66218f6c7a?s=128&d=identicon&r=PG", "display_name": "sramij", "link": "https://stackoverflow.com/users/582782/sramij"}, "edited": false, "score": 0, "creation_date": 1476907851, "post_id": 40140535, "comment_id": 67551246, "body": "@sramij That would drift by quite a bit by the inaccuracy of 16ms alone (since the the actual value is 16.666...), but the code running before the sleep would take up a bit of time, meaning it would nearly always take an incorrect amount of time."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1476908051, "post_id": 40140535, "comment_id": 67551363, "body": "The standard solution to this particular problem is to render as fast as you can. The rendered image is based on the current timestamp (relative to some starting point)."}, {"owner": {"reputation": 4268, "user_id": 5768335, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FVCGA.jpg?s=128&g=1", "display_name": "amanuel2", "link": "https://stackoverflow.com/users/5768335/amanuel2"}, "edited": false, "score": 0, "creation_date": 1476908124, "post_id": 40140535, "comment_id": 67551417, "body": "<a href=\"http://stackoverflow.com/a/33234557/5768335\"><b>This seems to solve this problem</b></a>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 4387, "user_id": 582782, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d59b4e0d3fc4d5036ff05c66218f6c7a?s=128&d=identicon&r=PG", "display_name": "sramij", "link": "https://stackoverflow.com/users/582782/sramij"}, "edited": false, "score": 0, "creation_date": 1476908372, "post_id": 40140535, "comment_id": 67551563, "body": "@sramij: You need to differentiate between accuracy and precision. Just because <code>usleep</code> takes a parameter with microsecond precision, doesn&#39;t guarantee microsecond accuracy. (And in case you discover the C++ way - <code>std::chrono</code> - the same holds true here as well.)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1476908446, "post_id": 40140535, "comment_id": 67551608, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/33234403/using-setinterval-in-c\">Using setInterval() in C++</a>"}, {"owner": {"reputation": 614, "user_id": 6802309, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YWn7L.jpg?s=128&g=1", "display_name": "Typewar", "link": "https://stackoverflow.com/users/6802309/typewar"}, "edited": false, "score": 0, "creation_date": 1476911417, "post_id": 40140535, "comment_id": 67553091, "body": "Hmm.. It seams like it doesn&#39;t want to display anything unless it finishes the loop. I&#39;ve tried several of your answers, but I think the problem relies on the code rather then the Sleeping."}], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 4, "creation_date": 1476907654, "post_id": 40140583, "comment_id": 67551117, "body": "that&#39;s not a regulated wait. You&#39;re sleeping at least 16 ms so you drift. And the OP code is not instantaneous either."}, {"owner": {"reputation": 1156, "user_id": 3565626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dPtR6.jpg?s=128&g=1", "display_name": "GEEF", "link": "https://stackoverflow.com/users/3565626/geef"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1476907729, "post_id": 40140583, "comment_id": 67551164, "body": "You are 100% correct, this is just a general way to do it. If you really want exactly 60 fps you&#39;d have to time the code and account for it."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1476907924, "post_id": 40140583, "comment_id": 67551293, "body": "more like it. But the regulation is still an important factor. With your knowledge of C++ std lib you can do better (I&#39;m not the downvoter BTW). For instance using <code>std::clock()</code> maybe, from the other answer that got downvoted also then deleted..."}, {"owner": {"reputation": 4168, "user_id": 6273251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fCGXep-7snc/AAAAAAAAAAI/AAAAAAAAADk/nk_YDFGfkc0/photo.jpg?sz=128", "display_name": "Random Davis", "link": "https://stackoverflow.com/users/6273251/random-davis"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1476907961, "post_id": 40140583, "comment_id": 67551315, "body": "16ms is too inaccurate - it would be 40ms too fast after only 60 frames, and 2.4 seconds off after one minute, not to mention that his code doesn&#39;t run instantaneously as @Jean-Fran&#231;oisFabre said."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1476908022, "post_id": 40140583, "comment_id": 67551348, "body": "come on, I&#39;m begging for an answer now. don&#39;t make me write my own :)"}, {"owner": {"reputation": 1156, "user_id": 3565626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dPtR6.jpg?s=128&g=1", "display_name": "GEEF", "link": "https://stackoverflow.com/users/3565626/geef"}, "edited": false, "score": 0, "creation_date": 1476908071, "post_id": 40140583, "comment_id": 67551371, "body": "I understand all the implications of using a 16 ms sleep. If OP wants, he can use this to get pretty close to 60 FPS. If not, he can wait for a longer, more accurate answer."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1476908113, "post_id": 40140583, "comment_id": 67551408, "body": "... or equally short, and accurate."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1476908116, "post_id": 40140583, "comment_id": 67551413, "body": "I think this is a good enough answer for the purpose. Upvoted. I&#39;d use <code>16ms</code>."}, {"owner": {"reputation": 4268, "user_id": 5768335, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FVCGA.jpg?s=128&g=1", "display_name": "amanuel2", "link": "https://stackoverflow.com/users/5768335/amanuel2"}, "edited": false, "score": 1, "creation_date": 1476908128, "post_id": 40140583, "comment_id": 67551420, "body": "<a href=\"http://stackoverflow.com/a/33234557/5768335\"><b>This seems to solve this problem</b></a>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1476908551, "post_id": 40140583, "comment_id": 67551668, "body": "@GEEF your downvote got cancelled and you were upvoted: you deserve it, because it was really difficult to dig out the duplicate"}, {"owner": {"reputation": 614, "user_id": 6802309, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YWn7L.jpg?s=128&g=1", "display_name": "Typewar", "link": "https://stackoverflow.com/users/6802309/typewar"}, "edited": false, "score": 0, "creation_date": 1476908791, "post_id": 40140583, "comment_id": 67551810, "body": "Hmm, Do I need any kind of extra stuff to this? I&#39;m getting red lines under this_thread and chrono"}, {"owner": {"reputation": 1156, "user_id": 3565626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dPtR6.jpg?s=128&g=1", "display_name": "GEEF", "link": "https://stackoverflow.com/users/3565626/geef"}, "reply_to_user": {"reputation": 614, "user_id": 6802309, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YWn7L.jpg?s=128&g=1", "display_name": "Typewar", "link": "https://stackoverflow.com/users/6802309/typewar"}, "edited": false, "score": 0, "creation_date": 1476908850, "post_id": 40140583, "comment_id": 67551846, "body": "@Typewar you will need to ensure you include the necessary libraries. See the #includes in this link: <a href=\"http://www.cplusplus.com/reference/thread/this_thread/sleep_for/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/thread/this_thread/sleep_for</a>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 614, "user_id": 6802309, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YWn7L.jpg?s=128&g=1", "display_name": "Typewar", "link": "https://stackoverflow.com/users/6802309/typewar"}, "edited": false, "score": 0, "creation_date": 1476909704, "post_id": 40140583, "comment_id": 67552258, "body": "@Typewar: Or <a href=\"http://en.cppreference.com/w/cpp/thread/sleep_for\" rel=\"nofollow noreferrer\">std::this_thread::sleep_for</a> for a more reliable reference."}, {"owner": {"reputation": 1156, "user_id": 3565626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dPtR6.jpg?s=128&g=1", "display_name": "GEEF", "link": "https://stackoverflow.com/users/3565626/geef"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1476909876, "post_id": 40140583, "comment_id": 67552344, "body": "@IInspectable TIL: cplusplus.com is not a reliable reference?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1476910807, "post_id": 40140583, "comment_id": 67552794, "body": "@GEEF: You&#39;d have to ask someone that believes it isn&#39;t."}], "tags": [], "owner": {"reputation": 1156, "user_id": 3565626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dPtR6.jpg?s=128&g=1", "display_name": "GEEF", "link": "https://stackoverflow.com/users/3565626/geef"}, "is_accepted": false, "score": 0, "last_activity_date": 1476907783, "last_edit_date": 1476907783, "creation_date": 1476907608, "answer_id": 40140583, "question_id": 40140535, "link": "https://stackoverflow.com/questions/40140535/do-code-60-times-per-second-c/40140583#40140583", "title": "do code 60 times per second c++", "body": "<p>First thing to do is wrap this in a <code>while(true) {...}</code> loop.</p>\n\n<p>Next, to throttle it down to 60 times a second, you could do something like this at the end of the loop:</p>\n\n<pre><code>while(true)\n{\n    // Place all your code here\n\n    std::this_thread::sleep_for (std::chrono::milliseconds(16)); // Sleep 16 ms\n}\n</code></pre>\n"}], "owner": {"reputation": 614, "user_id": 6802309, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YWn7L.jpg?s=128&g=1", "display_name": "Typewar", "link": "https://stackoverflow.com/users/6802309/typewar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1381, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1476907787, "creation_date": 1476907430, "question_id": 40140535, "link": "https://stackoverflow.com/questions/40140535/do-code-60-times-per-second-c", "title": "do code 60 times per second c++", "body": "<p>I'm a bit new to c++ and wondering how I can do this code 60 times per second:</p>\n\n<pre><code>if (x &gt;= 500 &amp;&amp; y &gt;= 500)\n{\n    x = 1;\n    y = 1;\n}\n\nif (x &lt;= 500)\n{\n    x = x + 1;\n}\n\nelse\n{\n    y = y + 1;\n    x = 1;\n}\n\ngfx.PutPixel(x, y, R, 0, 255);\n</code></pre>\n\n<p>I know it's a pretty amateur code, but this is the way I want to start learning it. I already tried doing a while loop, but it ended up rather freezing or stopping at it's end.\nThe purpose of this code Is basically creating a screen with pixels changing color by +1 each time it loops.</p>\n\n<p>Are there an easier way to do it?\nWould love if you would include some improvements too.</p>\n"}, {"tags": ["c++", "graph", "this"], "answers": [{"tags": [], "owner": {"reputation": 2049, "user_id": 1833963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47192a89d0942a618a8f0d6008fe48c1?s=128&d=identicon&r=PG", "display_name": "Pedro Boechat", "link": "https://stackoverflow.com/users/1833963/pedro-boechat"}, "is_accepted": false, "score": 1, "last_activity_date": 1476916446, "last_edit_date": 1476916446, "creation_date": 1476916130, "answer_id": 40142546, "question_id": 40140414, "link": "https://stackoverflow.com/questions/40140414/adjacent-list-self-referencing-to-graph-object/40142546#40142546", "title": "Adjacent list self referencing to Graph object", "body": "<p>You're using automatic storage in your list. This means everytime you do a adj_list.push_back(*iterator) you are copying the object pointed by the iterator in your list (instead of holding a reference to the object pointed by the iterator). On the next line, when you insert *this in the iterator's object adjacency list, the copy you previously stored in this->adj_list gets outdated.\nTo solve your problem, I suggest you start using unique_ptr&lt;Graph&gt; in place of Graph and thus, change the method argument and the adj_list member attribute from list&lt;Graph&gt; to list&lt;unique_ptr&lt;Graph&gt;&gt;.</p>\n"}], "owner": {"reputation": 31, "user_id": 3881463, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f71a14bda73181b5344bf06a062bb1cb?s=128&d=identicon&r=PG&f=1", "display_name": "iHuba", "link": "https://stackoverflow.com/users/3881463/ihuba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1476916446, "creation_date": 1476906949, "question_id": 40140414, "link": "https://stackoverflow.com/questions/40140414/adjacent-list-self-referencing-to-graph-object", "title": "Adjacent list self referencing to Graph object", "body": "<p>i am trying to implement an adjacent list for a graph class in C++. At the moment I want to write a method which will update the adjacent list of the Graph node and every adjacent node. Could you tell me what is wrong with this snippet of code? When I am executing my program the adjacent nodes still don't have the node calling update_adjacent in their adjacent list.\nThank you in advance.</p>\n\n<pre><code>void Graph::update_adjacent(list&lt;Graph&gt;l) {\nfor (list&lt;Graph&gt;::iterator iterator = l.begin(), end = l.end(); iterator != end; ++iterator) {\n    adj_list.push_back(*iterator);\n    (*iterator).adj_list.push_back(*this);\n}}\n</code></pre>\n"}, {"tags": ["c++", "stl", "deque"], "answers": [{"comments": [{"owner": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "edited": false, "score": 0, "creation_date": 1476908610, "post_id": 40140439, "comment_id": 67551709, "body": "Can I use <code>bind</code> somehow or ? (I am really not an expert, sorry)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "edited": false, "score": 0, "creation_date": 1476909818, "post_id": 40140439, "comment_id": 67552320, "body": "@user10000100_u Yes you could use bind but that is a C++11 feature and if you are going to use C++11 you should just use a lambda."}, {"owner": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "edited": false, "score": 0, "creation_date": 1476914985, "post_id": 40140439, "comment_id": 67554590, "body": "I finally used <code>boost::bind</code> which is &quot;allowed&quot;. Thx anyway !"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 0, "last_activity_date": 1476908149, "last_edit_date": 1476908149, "creation_date": 1476907072, "answer_id": 40140439, "question_id": 40140333, "link": "https://stackoverflow.com/questions/40140333/error-with-a-predicate-in-stdremove-if/40140439#40140439", "title": "Error with a predicate in std::remove_if", "body": "<p>You are not going to be able to use a non static member function pointer with <code>remove_if</code>.  <code>remove_if</code> requires a normal function pointer, static member function pointer or a function object.  The reason it cannot use a member function pointer is because it needs an instance of the class in order to be able to call the function and you cannot wrap that into the call</p>\n\n<p>You are either need to make <code>Predicate</code> <code>static</code>, create a function object and pass an instance of that, or use a lambda in the call site.  </p>\n"}, {"comments": [{"owner": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "edited": false, "score": 0, "creation_date": 1476907449, "post_id": 40140519, "comment_id": 67551000, "body": "I know but I&#39;m not allowing (in the solution I am working in) to use lambda&#39;s... :-( Question updated"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "reply_to_user": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "edited": false, "score": 0, "creation_date": 1476907497, "post_id": 40140519, "comment_id": 67551024, "body": "Well you have a deque of shared pointers and your predicate takes a reference to an object, so you&#39;ll have to change it to take a reference to a shared_ptr"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "reply_to_user": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "edited": false, "score": 0, "creation_date": 1476907606, "post_id": 40140519, "comment_id": 67551092, "body": "If you can&#39;t use lambda&#39;s, could you use struct-based functors?"}, {"owner": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "edited": false, "score": 0, "creation_date": 1476907695, "post_id": 40140519, "comment_id": 67551137, "body": "Yes for sure. Tried <code>bool Predicate(A_shared_ptr a)</code> but I have <code>cannot convert \u2018bool (B::*)(A_shared_ptr) {aka bool (B::*)(std::shared_ptr&lt;A&gt;)}\u2019 to \u2018bool (B::*)(A_shared_ptr&amp;) {aka bool (B::*)(std::shared_ptr&lt;A&gt;&amp;)}\u2019 in initialization              bool (B::*PtrToPredicate)(A_shared_ptr &amp;) = &amp;B::Predicate;</code> issues..."}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "reply_to_user": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "edited": false, "score": 0, "creation_date": 1476908514, "post_id": 40140519, "comment_id": 67551648, "body": "The trouble is, as @NathanOliver pointed out, you can&#39;t use a non-static member function pointer with remove_if. I updated my answer to include a workaround of sorts with std::bind, but lambdas are clearer imo."}, {"owner": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "edited": false, "score": 0, "creation_date": 1476908532, "post_id": 40140519, "comment_id": 67551659, "body": "I am not even allowed to use auto (thx to the fact that I ship to old solaris platforms as well...)"}, {"owner": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "edited": false, "score": 0, "creation_date": 1476908880, "post_id": 40140519, "comment_id": 67551862, "body": "It works indeed, I just need to figure out the type of <code>predicateToUse</code> to validate"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "reply_to_user": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "edited": false, "score": 0, "creation_date": 1476909565, "post_id": 40140519, "comment_id": 67552190, "body": "std::bind doesn&#39;t have a defined type so you can&#39;t get it without <code>auto</code>. I updated my response... basically just never name it if you can&#39;t use auto, and move the bind into the remove_if"}, {"owner": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "edited": false, "score": 0, "creation_date": 1476915089, "post_id": 40140519, "comment_id": 67554629, "body": "Yes, but I had to use it at several places, so I thought declaring it, but it is not a big deal. Finally I used <code>boost::bind</code> which is perfectly kosher in the library I work in. Thx !"}], "tags": [], "owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "is_accepted": true, "score": 0, "last_activity_date": 1476909518, "last_edit_date": 1476909518, "creation_date": 1476907374, "answer_id": 40140519, "question_id": 40140333, "link": "https://stackoverflow.com/questions/40140333/error-with-a-predicate-in-stdremove-if/40140519#40140519", "title": "Error with a predicate in std::remove_if", "body": "<p>Not a fan of function pointers, but using lambda's this seems to compile... <a href=\"https://ideone.com/0StRcw\" rel=\"nofollow\">https://ideone.com/0StRcw</a></p>\n\n<pre><code>        dq.erase(std::remove_if(dq.begin(), dq.end(), [this](const std::shared_ptr&lt;A&gt;&amp; a) {\n            return a-&gt;getValueOnWhichToCheck() &gt;= getThreshold();\n        }),dq.end());\n</code></pre>\n\n<p>Or without lambdas..</p>\n\n<pre><code>        auto predicateToUse = std::bind(&amp;B::Predicate, this, std::placeholders::_1);\n        dq.erase(std::remove_if(dq.begin(), dq.end(), predicateToUse), dq.end());\n</code></pre>\n\n<p>Update no auto:</p>\n\n<pre><code>dq.erase(std::remove_if(dq.begin(), dq.end(), std::bind(&amp;B::Predicate, this, std::placeholders::_1)), dq.end());\n</code></pre>\n"}], "owner": {"reputation": 2053, "user_id": 1581875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c4820fbcdf16fb5aa890353e3198582?s=128&d=identicon&r=PG&f=1", "display_name": "Olorin", "link": "https://stackoverflow.com/users/1581875/olorin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "accepted_answer_id": 40140519, "answer_count": 2, "score": 1, "last_activity_date": 1476909518, "creation_date": 1476906642, "last_edit_date": 1476908407, "question_id": 40140333, "link": "https://stackoverflow.com/questions/40140333/error-with-a-predicate-in-stdremove-if", "title": "Error with a predicate in std::remove_if", "body": "<p>I basically have an <code>std::deque</code> of objects, and I want to remove some of these objets according a condition on a given member variable of the objects, so that I use a predicate, but I have errors that I don't really understand.</p>\n\n<p>I am using <code>g++</code> with the <code>-std=c++11</code> for STL reasons (shared pointers) but I was trying to work this out on windows with MVS with non <code>c++11</code> code, so that I am looking for a non <code>c++11</code> solution, without lamdas etc</p>\n\n<p>The code is :</p>\n\n<pre><code>#include &lt;iostream&gt; // for std::cout and std::endl\n#include &lt;cstdio&gt; // for getchar()\n#include &lt;memory&gt; // for std::shared_ptr\n#include &lt;deque&gt; // for std::deque\n#include &lt;algorithm&gt; // for std::earse and std::remove_if\n\nclass A\n{\n    private:\n        int _i;\n        double _d;\n    public:\n        A(int i, double d)\n        {\n            _i = i;\n            _d = d;\n        }\n        int geti()const\n        {\n            return _i;\n        }\n        double getValueOnWhichToCheck()const\n        {\n            return _d;\n        }\n};\n\ntypedef std::shared_ptr&lt;A&gt; A_shared_ptr;\ntypedef std::deque&lt;A_shared_ptr&gt; list_type;\n\nvoid PrintDeque(list_type &amp; dq)\n{\n    if (0 ==  dq.size())\n    {\n        std::cout &lt;&lt; \"Empty deque.\" &lt;&lt; std::endl;\n    }\n    else\n    {\n        for (int i = 0 ; i &lt; dq.size() ; ++i)\n        {\n            std::cout &lt;&lt; i+1 &lt;&lt; \"\\t\" &lt;&lt; dq[i] &lt;&lt; std::endl;\n        }\n    }\n}\n\nclass B\n{\n    public:\n        double getThreshold() // Non constant for a reason as in real code it isn't\n        {\n            return 24.987; // comes from a calculation not needed here so I return a constant.\n        }\n        bool Predicate(A_shared_ptr &amp; a)\n        {\n            return a-&gt;getValueOnWhichToCheck() &gt;= getThreshold();\n        }\n        void DoStuff()\n        {\n            A_shared_ptr pT1 = std::make_shared&lt;A&gt;(A(2,      -6.899987));\n            A_shared_ptr pT2 = std::make_shared&lt;A&gt;(A(876,    889.878762));\n            A_shared_ptr pT3 = std::make_shared&lt;A&gt;(A(-24,    48.98924));\n            A_shared_ptr pT4 = std::make_shared&lt;A&gt;(A(78,     -6654.98980));\n            A_shared_ptr pT5 = std::make_shared&lt;A&gt;(A(6752,   3.141594209));\n            list_type dq = {pT1,pT2,pT3,pT4,pT5};\n            PrintDeque(dq);\n            bool (B::*PtrToPredicate)(A_shared_ptr &amp;) = &amp;B::Predicate;\n            dq.erase(std::remove_if(dq.begin(), dq.end(), PtrToPredicate),dq.end());\n            PrintDeque(dq);\n        }\n};\n\nint main()\n{\n    B * pB = new B();\n    pB-&gt;DoStuff();\n    getchar();\n}\n</code></pre>\n\n<p>and the output of <code>g++ -std=c++11 main.cpp -o main</code> is :</p>\n\n<pre><code>In file included from /usr/include/c++/5/bits/stl_algobase.h:71:0,\n                 from /usr/include/c++/5/bits/char_traits.h:39,\n                 from /usr/include/c++/5/ios:40,\n                 from /usr/include/c++/5/ostream:38,\n                 from /usr/include/c++/5/iostream:39,\n                 from main.cpp:1:\n/usr/include/c++/5/bits/predefined_ops.h: In instantiation of \u2018bool __gnu_cxx::__ops::_Iter_pred&lt;_Predicate&gt;::operator()(_Iterator) [with _Iterator = std::_Deque_iterator&lt;std::shared_ptr&lt;A&gt;, std::shared_ptr&lt;A&gt;&amp;, std::shared_ptr&lt;A&gt;*&gt;; _Predicate = bool (B::*)(std::shared_ptr&lt;A&gt;&amp;)]\u2019:\n/usr/include/c++/5/bits/stl_algo.h:866:20:   required from \u2018_ForwardIterator std::__remove_if(_ForwardIterator, _ForwardIterator, _Predicate) [with _ForwardIterator = std::_Deque_iterator&lt;std::shared_ptr&lt;A&gt;, std::shared_ptr&lt;A&gt;&amp;, std::shared_ptr&lt;A&gt;*&gt;; _Predicate = __gnu_cxx::__ops::_Iter_pred&lt;bool (B::*)(std::shared_ptr&lt;A&gt;&amp;)&gt;]\u2019\n/usr/include/c++/5/bits/stl_algo.h:936:30:   required from \u2018_FIter std::remove_if(_FIter, _FIter, _Predicate) [with _FIter = std::_Deque_iterator&lt;std::shared_ptr&lt;A&gt;, std::shared_ptr&lt;A&gt;&amp;, std::shared_ptr&lt;A&gt;*&gt;; _Predicate = bool (B::*)(std::shared_ptr&lt;A&gt;&amp;)]\u2019\nmain.cpp:67:73:   required from here\n/usr/include/c++/5/bits/predefined_ops.h:234:30: error: must use \u2018.*\u2019 or \u2018-&gt;*\u2019 to call pointer-to-member function in \u2018((__gnu_cxx::__ops::_Iter_pred&lt;bool (B::*)(std::shared_ptr&lt;A&gt;&amp;)&gt;*)this)-&gt;__gnu_cxx::__ops::_Iter_pred&lt;bool (B::*)(std::shared_ptr&lt;A&gt;&amp;)&gt;::_M_pred (...)\u2019, e.g. \u2018(... -&gt;* ((__gnu_cxx::__ops::_Iter_pred&lt;bool (B::*)(std::shared_ptr&lt;A&gt;&amp;)&gt;*)this)-&gt;__gnu_cxx::__ops::_Iter_pred&lt;bool (B::*)(std::shared_ptr&lt;A&gt;&amp;)&gt;::_M_pred) (...)\u2019\n  { return bool(_M_pred(*__it)); }\n                              ^\n</code></pre>\n"}, {"tags": ["c++", "sorting", "optimization", "vector", "struct"], "comments": [{"owner": {"reputation": 26377, "user_id": 7734, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ced37e94f2fabfd8b4bb78e573947a68?s=128&d=identicon&r=PG", "display_name": "EvilTeach", "link": "https://stackoverflow.com/users/7734/evilteach"}, "edited": false, "score": 0, "creation_date": 1476906942, "post_id": 40140310, "comment_id": 67550727, "body": "So, fundementally.   Are you just trying to decide if there are any duplicate values for the input variable in your struct?   Or do you need to know where the duplicates are?"}, {"owner": {"reputation": 1, "user_id": 7033106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c87c08fe6e72246fde11117b45da92b2?s=128&d=identicon&r=PG&f=1", "display_name": "null", "link": "https://stackoverflow.com/users/7033106/null"}, "reply_to_user": {"reputation": 26377, "user_id": 7734, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ced37e94f2fabfd8b4bb78e573947a68?s=128&d=identicon&r=PG", "display_name": "EvilTeach", "link": "https://stackoverflow.com/users/7734/evilteach"}, "edited": false, "score": 0, "creation_date": 1476908139, "post_id": 40140310, "comment_id": 67551427, "body": "@EvilTeach Essentially, I need determine if  &#39;in&#39; is equal to any element inside of input, and for each element inside input that does equal &#39;in&#39;, I want to take the index of each match, and add the value at the same index from output, inserting each of those values into a temp vector."}, {"owner": {"reputation": 1, "user_id": 7033106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c87c08fe6e72246fde11117b45da92b2?s=128&d=identicon&r=PG&f=1", "display_name": "null", "link": "https://stackoverflow.com/users/7033106/null"}, "reply_to_user": {"reputation": 26377, "user_id": 7734, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ced37e94f2fabfd8b4bb78e573947a68?s=128&d=identicon&r=PG", "display_name": "EvilTeach", "link": "https://stackoverflow.com/users/7734/evilteach"}, "edited": false, "score": 0, "creation_date": 1476908327, "post_id": 40140310, "comment_id": 67551539, "body": "@EvilTeach I realize my explanation is poor, so if in input, I have the elements: 1, 5, 5, 8, 9 and in output I have the elements 1, 2, 3, 4, 5 and &#39;in&#39; is equal to lets say 5. I would search input, find that 5 is at index 1, and 2. Then I need to copy the same value at index 1 and 2 of output (in this case that would be 2 and 3) to a vector called temp."}], "answers": [{"tags": [], "owner": {"reputation": 26377, "user_id": 7734, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ced37e94f2fabfd8b4bb78e573947a68?s=128&d=identicon&r=PG", "display_name": "EvilTeach", "link": "https://stackoverflow.com/users/7734/evilteach"}, "is_accepted": false, "score": 0, "last_activity_date": 1476907622, "creation_date": 1476907622, "answer_id": 40140588, "question_id": 40140310, "link": "https://stackoverflow.com/questions/40140310/iterating-through-one-variable-in-a-vector-of-struct-with-lower-upper-bound/40140588#40140588", "title": "Iterating through one variable in a vector of struct with lower/upper bound", "body": "<p>I think that if you sort it in smallest to largest (x is an integer after all)  that you should be able to use <a href=\"http://en.cppreference.com/w/cpp/algorithm/adjacent_find\" rel=\"nofollow\">std::adjacent_find</a> to find duplicates in the array, and process them properly.   For the performance issues, you might consider using <a href=\"http://www.cplusplus.com/reference/vector/vector/reserve/\" rel=\"nofollow\">reserve</a> to preallocate space for your large vector, so that your push back operations don't have to reallocate memory as often.</p>\n"}], "owner": {"reputation": 1, "user_id": 7033106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c87c08fe6e72246fde11117b45da92b2?s=128&d=identicon&r=PG&f=1", "display_name": "null", "link": "https://stackoverflow.com/users/7033106/null"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 475, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1476907622, "creation_date": 1476906540, "question_id": 40140310, "link": "https://stackoverflow.com/questions/40140310/iterating-through-one-variable-in-a-vector-of-struct-with-lower-upper-bound", "title": "Iterating through one variable in a vector of struct with lower/upper bound", "body": "<p>I have 2 structs, one simply has 2 values:</p>\n\n<pre><code>struct combo { \nint output;\nint input;\n};\n</code></pre>\n\n<p>And another that sorts the input element based on the index of the output element:</p>\n\n<pre><code>struct organize { \nbool operator()(combo const &amp;a, combo const &amp;b) \n  { \n    return a.input &lt; b.input;\n  }\n};\n</code></pre>\n\n<p>Using this:</p>\n\n<pre><code>sort(myVector.begin(), myVector.end(), organize());\n</code></pre>\n\n<p>What I'm trying to do with this, is iterate through the input varlable, and check if each element is equal to another input 'in'.</p>\n\n<p>If it is equal, I want to insert the value at the same index it was found to be equal at for input, but from output into another temp vector.</p>\n\n<p>I originally went with a more simple solution (when I wasn't using a structs and simply had 2 vectors, one input and one output) and had this in a function called copy:</p>\n\n<pre><code>for(int i = 0; i &lt; input.size(); ++i){\n\n   if(input == in){\n\n       temp.push_back(output[i]);\n\n   } \n}\n</code></pre>\n\n<p>Now this code did work exactly how I needed it, the only issue is it is simply too slow. It can handle 10 integer inputs, or 100 inputs but around 1000 it begins to slow down taking an extra 5 seconds or so, then at 10,000 it takes minutes, and you can forget about 100,000 or 1,000,000+ inputs. </p>\n\n<p>So, I asked how to speed it up on here (just the function iterator) and somebody suggested sorting the input vector which I did, implemented their suggestion of using upper/lower bound, changing my iterator to this:</p>\n\n<pre><code>std::vector&lt;int&gt;::iterator it = input.begin(); \nauto lowerIt = std::lower_bound(input.begin(), input.end(), in);\nauto upperIt = std::upper_bound(input.begin(), input.end(), in);\n\n for (auto it = lowerIt; it != upperIt; ++it)\n {\n     temp.push_back(output[it - input.begin()]);\n }\n</code></pre>\n\n<p>And it worked, it made it much faster, I still would like it to be able to handle 1,000,000+ inputs in seconds but I'm not sure how to do that yet. </p>\n\n<p>I then realized that I can't have the input vector sorted, what if the inputs are something like:</p>\n\n<pre><code>input.push_back(10);\ninput.push_back(-1);\n\noutput.push_back(1);\noutput.push_back(2);\n</code></pre>\n\n<p>Well then we have 10 in input corresponding to 1 in output, and -1 corresponding to 2. Obviously 10 doesn't come before -1 so sorting it smallest to largest doesn't really work here.</p>\n\n<p>So I found a way to sort the input based on the output. So no matter how you organize input, the indexes match each other based on what order they were added.</p>\n\n<p>My issue is, I have no clue how to iterate through just input with the same upper/lower bound iterator above. I can't seem to call upon just the input variable of myVector, I've tried something like:</p>\n\n<pre><code>std::vector&lt;combo&gt;::iterator it = myVector.input.begin(); \n</code></pre>\n\n<p>But I get an error saying there is no member 'input'.</p>\n\n<p>How can I iterate through just input so I can apply the upper/lower bound iterator to this new way with the structs?</p>\n\n<p>Also I explained everything so everyone could get the best idea of what I have and what I'm trying to do, also maybe somebody could point me in a completely different direction that is fast enough to handle those millions of inputs. Keep in mind I'd prefer to stick with vectors because not doing so would involve me changing 2 other files to work with things that aren't vectors or lists.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 1317, "user_id": 1411115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/364d95a6338c96d6380a91426e1e0a52?s=128&d=identicon&r=PG", "display_name": "erapert", "link": "https://stackoverflow.com/users/1411115/erapert"}, "edited": false, "score": 2, "creation_date": 1476906505, "post_id": 40140248, "comment_id": 67550480, "body": "<a href=\"http://stackoverflow.com/questions/4118073/how-to-stop-console-from-closing-on-exit\">this has already been answered</a> Please search before posting."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1476906904, "post_id": 40140248, "comment_id": 67550709, "body": "<b><i>I then made an exe and now it disappears</i></b> If you are running your application from exporer this is expected. Windows will close an application immediately after it is finished. Run it from a command prompt instead."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1476907023, "post_id": 40140248, "comment_id": 67550774, "body": "<b><i>but printing to the console itself.</i></b> Since you are using <code>c++</code>, I assume you are using <code>std::cout</code>. Nothing special is needed for a native c++ console application to print to the console. Maybe you should post your ~10 line program."}, {"owner": {"reputation": 87, "user_id": 3832952, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/752872b47f21fe406b351723f0107a69?s=128&d=identicon&r=PG&f=1", "display_name": "zissler", "link": "https://stackoverflow.com/users/3832952/zissler"}, "edited": false, "score": 0, "creation_date": 1476907313, "post_id": 40140248, "comment_id": 67550918, "body": "I am using cout, I think it&#39;s more of a visual studio problem."}, {"owner": {"reputation": 87, "user_id": 3832952, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/752872b47f21fe406b351723f0107a69?s=128&d=identicon&r=PG&f=1", "display_name": "zissler", "link": "https://stackoverflow.com/users/3832952/zissler"}, "edited": false, "score": 0, "creation_date": 1476907473, "post_id": 40140248, "comment_id": 67551012, "body": "Using an empty project caused the problem. Using #include &quot;stdafx.h&quot; sent output to the console when I ran it."}, {"owner": {"reputation": 87, "user_id": 3832952, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/752872b47f21fe406b351723f0107a69?s=128&d=identicon&r=PG&f=1", "display_name": "zissler", "link": "https://stackoverflow.com/users/3832952/zissler"}, "edited": false, "score": 0, "creation_date": 1476907528, "post_id": 40140248, "comment_id": 67551043, "body": "I did several searches and nothing came up for this issue, only to use getchar or cin."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1476907588, "post_id": 40140248, "comment_id": 67551077, "body": "You mean when you press <code>ctrl-f5</code> this window stays open but does not print anything in the console window? If so try disabling your antivirus. aVast is known to prevent unknown applications from running (meaning any application you write)"}, {"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 0, "creation_date": 1476911158, "post_id": 40140248, "comment_id": 67552977, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1775865/preventing-console-window-from-closing-on-visual-studio-c-c-console-applicatio\">Preventing console window from closing on Visual Studio C/C++ Console application</a>"}, {"owner": {"reputation": 87, "user_id": 3832952, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/752872b47f21fe406b351723f0107a69?s=128&d=identicon&r=PG&f=1", "display_name": "zissler", "link": "https://stackoverflow.com/users/3832952/zissler"}, "edited": false, "score": 0, "creation_date": 1476911357, "post_id": 40140248, "comment_id": 67553065, "body": "If you tell me to not taking time to search or look for duplicates I would ask you to take time and read what I have posted. I ask for the same respect you ask of me."}, {"owner": {"reputation": 87, "user_id": 3832952, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/752872b47f21fe406b351723f0107a69?s=128&d=identicon&r=PG&f=1", "display_name": "zissler", "link": "https://stackoverflow.com/users/3832952/zissler"}, "edited": false, "score": 0, "creation_date": 1476911377, "post_id": 40140248, "comment_id": 67553070, "body": "I don&#39;t want the cmd window to stay open I want the text to go to cmd.exe"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1476911735, "post_id": 40140248, "comment_id": 67553260, "body": "Did you try disabling your antivirus?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1476911795, "post_id": 40140248, "comment_id": 67553292, "body": "<b><i>read what I have posted</i></b> Your original explanation of your problem was very confusing. Well at least to me. You have edited it a few times and its somewhat better now."}], "answers": [{"comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1476911916, "post_id": 40141682, "comment_id": 67553349, "body": "This is not the issue. The duplicate was removed for the issue that you are solving. The issue is for some reason the cout does not print to the console even when the executable is run in a cmd.exe window (so it will not close)."}, {"owner": {"reputation": 1, "user_id": 7044178, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KGsex.jpg?s=128&g=1", "display_name": "Johan Lund", "link": "https://stackoverflow.com/users/7044178/johan-lund"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1476914556, "post_id": 40141682, "comment_id": 67554433, "body": "Based on what zissler wrote an hour ago. And I tried code snip I show here. I need both #include&quot;stdafx.h&quot; and #include&lt;iostream&gt;, and"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1476914721, "post_id": 40141682, "comment_id": 67554496, "body": "You don&#39;t need <code>#include&quot;stdafx.h&quot;</code> unless you have precompiled headers enabled. You do need <code>#include&lt;iostream&gt;</code>."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1476914763, "post_id": 40141682, "comment_id": 67554513, "body": "<b><i>Based on what zissler wrote an hour ago.</i></b> The question was confusing.."}, {"owner": {"reputation": 1, "user_id": 7044178, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KGsex.jpg?s=128&g=1", "display_name": "Johan Lund", "link": "https://stackoverflow.com/users/7044178/johan-lund"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1476915296, "post_id": 40141682, "comment_id": 67554715, "body": "&quot;using namespace std;&quot; to make the cout work. Pause or not. I have Visual Studio 2012 Ultimate installed here. Please, try at least (make again)."}], "tags": [], "owner": {"reputation": 1, "user_id": 7044178, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KGsex.jpg?s=128&g=1", "display_name": "Johan Lund", "link": "https://stackoverflow.com/users/7044178/johan-lund"}, "is_accepted": false, "score": 0, "last_activity_date": 1476911877, "creation_date": 1476911877, "answer_id": 40141682, "question_id": 40140248, "link": "https://stackoverflow.com/questions/40140248/output-to-windows-cmd-prompt/40141682#40141682", "title": "Output to windows cmd prompt", "body": "<p>If I have understood your question. Try following and add useful parts to your code. Not needed lines are commented out.</p>\n\n<pre><code>// ConsoleApplication1.cpp : Defines the entry point for the console application.\n\n// (Just 2 ways to wait, befoore command-line console vanishes.)\n\n#include \"stdafx.h\"\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    cout &lt;&lt; \"It's Foo's Bar!\\n\";\n    system(\"pause\"); //preferred way.\n    //cin.get(); //2nd way, not as good.\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 3832952, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/752872b47f21fe406b351723f0107a69?s=128&d=identicon&r=PG&f=1", "display_name": "zissler", "link": "https://stackoverflow.com/users/3832952/zissler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1270, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1476911877, "creation_date": 1476906303, "last_edit_date": 1476910901, "question_id": 40140248, "link": "https://stackoverflow.com/questions/40140248/output-to-windows-cmd-prompt", "title": "Output to windows cmd prompt", "body": "<p>I have been told to make an exe file that will output 5 lines. I have been given these instructions:</p>\n\n<p>Your program must not hang after running. I will execute it at command-line and will expect it to finish when the program is done.</p>\n\n<p>I tried going to properties -> linker -> system - > console. It seemed to do what he wanted when I ran ctrl-f5. I then made an exe and now it disappears, and it doesn't print to the console. </p>\n\n<p>I am using a simple cout program ex:</p>\n\n<pre><code>int main()\n{\n    cout&lt;&lt;\"hello\"&lt;&lt;endl;\n    return 1;\n}\n</code></pre>\n\n<p><em>Edit</em>\nI'm using visual studio 2013, and I am running from the command line.\nNote I'm not asking for the window to stay open, but printing to the console itself.\nI am not pressing ctrl-f5, but going to cmd.exe and then to the executable. I have tried the release version as well as the debug version.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1642, "user_id": 2157401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LqbUX.jpg?s=128&g=1", "display_name": "MordechayS", "link": "https://stackoverflow.com/users/2157401/mordechays"}, "edited": false, "score": 1, "creation_date": 1476907182, "post_id": 40140224, "comment_id": 67550850, "body": "If your question is about a specific part, I reccomend you delete all other unneccesary information from your question."}], "answers": [{"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 0, "last_activity_date": 1476907190, "creation_date": 1476907190, "answer_id": 40140464, "question_id": 40140224, "link": "https://stackoverflow.com/questions/40140224/room-map-game-program-reading-from-a-file/40140464#40140464", "title": "room map game program reading from a file", "body": "<p>You want something like a quadruply linked list (i just made up this term). So I would just define a struct:</p>\n\n<pre><code>struct Room {\n    int up;\n    int down;\n    int left;\n    int right;\n};\n</code></pre>\n\n<p>overload the input operator and push them line by line into a <code>std::vector&lt;Room&gt;</code>. Otherwise there is little help to offer given the information you provide.</p>\n"}], "owner": {"reputation": 1, "user_id": 7044275, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210698461361738/picture?type=large", "display_name": "Ciara Kain", "link": "https://stackoverflow.com/users/7044275/ciara-kain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1476911770, "creation_date": 1476906187, "last_edit_date": 1476911770, "question_id": 40140224, "link": "https://stackoverflow.com/questions/40140224/room-map-game-program-reading-from-a-file", "title": "room map game program reading from a file", "body": "<p>These are the directions: this file represents the game map for our interactive fiction game Specifcally, the first line contains the number of rooms on the map and each successive line represents each of these rooms; one line is one room. As such, the number on the first line should equal the number of lines below it in the file. The first line after the number of rooms is 1 and goes on from there. Each room line contains four numbers. These are the rooms that the current room connects to up, down, left and right, respectively. So, since Room 3 is listed as 3 4 2 10, it connects up, down, left and right to Room 3, Room 4, Room 2 and Room 10, respectively. To move to another room you can access from the room you pick you pick either up,down,left,right. I am not asking for anyone todo this AT ALL!!!. i am trying to get help with starting the program. I am stuck with how to start this program, i don't know how i would get the numbers and represent each column to u,d,l,r also and how do i print out those number for the line you picked? this is all i have so far but idk where to go from here. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\nusing namespace std;\nint main() {\n    char room;\n    int room1;\n    string room; \n    ifstream infile;\n    infile.open(\"GameFile.txt\")\n    while (infile.is_open())\n    infile.getline(infile,line);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "sockets", "networking", "boost"], "comments": [{"owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "edited": false, "score": 0, "creation_date": 1476906550, "post_id": 40140208, "comment_id": 67550508, "body": "Are you using HTTP or HTTPS (or both) as your protocol?"}, {"owner": {"reputation": 21444, "user_id": 102040, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/dbf44501979768be513fc1d001e4238e?s=128&d=identicon&r=PG", "display_name": "Geek", "link": "https://stackoverflow.com/users/102040/geek"}, "reply_to_user": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "edited": false, "score": 0, "creation_date": 1476907520, "post_id": 40140208, "comment_id": 67551039, "body": "@owacoder : I added the info to the question. I am using HTTP only."}], "answers": [{"comments": [{"owner": {"reputation": 21444, "user_id": 102040, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/dbf44501979768be513fc1d001e4238e?s=128&d=identicon&r=PG", "display_name": "Geek", "link": "https://stackoverflow.com/users/102040/geek"}, "edited": false, "score": 0, "creation_date": 1476941310, "post_id": 40141938, "comment_id": 67561632, "body": "Thanks for the information but in such a scenario I would actually end up sending a rogue message to the Client ?"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 21444, "user_id": 102040, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/dbf44501979768be513fc1d001e4238e?s=128&d=identicon&r=PG", "display_name": "Geek", "link": "https://stackoverflow.com/users/102040/geek"}, "edited": false, "score": 0, "creation_date": 1476945712, "post_id": 40141938, "comment_id": 67563750, "body": "@Geek, as far as I know, the most common way to handle these things with HTTP(S) is to use connection timeout monitoring (disconnecting the socket if no activity occurred within a certain timeframe). Timeouts for request reception are often shorter than timeouts for request handling (i.e., in my <a href=\"https://github.com/boazsegev/c-server-tools\" rel=\"nofollow noreferrer\">facil.io</a> project, the default incoming http timeout is 5 seconds, while response handling times out at 300 seconds)."}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 1, "last_activity_date": 1476913114, "creation_date": 1476913114, "answer_id": 40141938, "question_id": 40140208, "link": "https://stackoverflow.com/questions/40140208/identify-a-client-disconnected-from-a-socket-in-c/40141938#40141938", "title": "Identify a client disconnected from a Socket in C++", "body": "<p>The only way you can detect a TCP disconnect is by doing I/O to it. After some sends to a peer which has disconnected you will get ECONNRESET. This won't happen on the first send due to TCP buffering.</p>\n"}], "owner": {"reputation": 21444, "user_id": 102040, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/dbf44501979768be513fc1d001e4238e?s=128&d=identicon&r=PG", "display_name": "Geek", "link": "https://stackoverflow.com/users/102040/geek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1476913114, "creation_date": 1476906141, "last_edit_date": 1476907487, "question_id": 40140208, "link": "https://stackoverflow.com/questions/40140208/identify-a-client-disconnected-from-a-socket-in-c", "title": "Identify a client disconnected from a Socket in C++", "body": "<p>I have a C++ Server where Clients would connect to the Server socket and fetch Search results. I am using Boost library for my Socket programming. </p>\n\n<p>There will be 5 search results in all for which a Client connects. These Search results are expensive for the Server to compute and the computation is done in an iterative way. Now what happens many times is that the clients disconnect after they have received the results for 2 or 3 Search results. I want to stop the Search processing thread as soon as the client who made the request disconnects. What is the best API call to confirm that ? I am willing to write my own wrapper on top of boost if this is even possible.</p>\n\n<p>I am using HTTP only.</p>\n\n<p>thanks</p>\n"}, {"tags": ["c#", "c++", "marshalling"], "comments": [{"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "edited": false, "score": 0, "creation_date": 1476907020, "post_id": 40140195, "comment_id": 67550772, "body": "I&#39;ve seen stuff like this. I would not be surprised if marshaling is impossible because you can&#39;t move the struct in memory because the buffer immediately follows the struct. The clue is there&#39;s a long for the buffer size but no buffer pointer at all."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1476907700, "post_id": 40140195, "comment_id": 67551142, "body": "They are function pointers, the exact equivalent in C# is a delegate object.  You have to be careful, the delegate objects you pass must have another reference somewhere so the GC doesn&#39;t clean them up and crash your program when the native code makes the function call.  Also store them in a static variable or use GCHandle.Alloc()."}, {"owner": {"reputation": 957, "user_id": 4151075, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100001381091762/picture?type=large", "display_name": "Marek", "link": "https://stackoverflow.com/users/4151075/marek"}, "edited": false, "score": 0, "creation_date": 1476944465, "post_id": 40140195, "comment_id": 67563038, "body": "These structs are passed as an argument in exported functions, will they be GC? Or how shoud I prevent them from being collected?"}], "answers": [{"comments": [{"owner": {"reputation": 957, "user_id": 4151075, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100001381091762/picture?type=large", "display_name": "Marek", "link": "https://stackoverflow.com/users/4151075/marek"}, "edited": false, "score": 0, "creation_date": 1476906784, "post_id": 40140239, "comment_id": 67550644, "body": "What about the arguments?"}, {"owner": {"reputation": 1488, "user_id": 3826310, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/08z0c.png?s=128&g=1", "display_name": "Timothy Ghanem", "link": "https://stackoverflow.com/users/3826310/timothy-ghanem"}, "reply_to_user": {"reputation": 957, "user_id": 4151075, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100001381091762/picture?type=large", "display_name": "Marek", "link": "https://stackoverflow.com/users/4151075/marek"}, "edited": false, "score": 0, "creation_date": 1476906866, "post_id": 40140239, "comment_id": 67550692, "body": "This is just for the marshalling the struct, after that you can use Marshal.GetDelegateForFunctionPointer to convert the IntPtrs to delegate instances like @vivek nuna suggested."}], "tags": [], "owner": {"reputation": 1488, "user_id": 3826310, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/08z0c.png?s=128&g=1", "display_name": "Timothy Ghanem", "link": "https://stackoverflow.com/users/3826310/timothy-ghanem"}, "is_accepted": false, "score": -2, "last_activity_date": 1476906261, "creation_date": 1476906261, "answer_id": 40140239, "question_id": 40140195, "link": "https://stackoverflow.com/questions/40140195/marshall-weird-c-structure-in-c/40140239#40140239", "title": "Marshall weird C++ structure in C#", "body": "<p>Try using an <code>IntPtr</code> for them since they're pointers to functions. so that it would look like this:</p>\n\n<pre><code>[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]\npublic struct PGMODENV\n{\n    /* input data */\n    public long lMajor;         /* major version of kernel */\n    public long lMinor;         /* minor version of kernel */\n    public long lRelease;       /* release version of kernel */\n\n    /* updated data */\n    public long lResultSize;    /* sResult buffer size */\n\n    public IntPtr lPGSM_ExecuteKernel;\n    public IntPtr lPGSM_ExecuteCommand;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 957, "user_id": 4151075, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100001381091762/picture?type=large", "display_name": "Marek", "link": "https://stackoverflow.com/users/4151075/marek"}, "edited": false, "score": 0, "creation_date": 1476906469, "post_id": 40140272, "comment_id": 67550450, "body": "This should be separate struct than <code>PGMODENV</code> ?"}, {"owner": {"reputation": 12422, "user_id": 6527049, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/smnwW.jpg?s=128&g=1", "display_name": "vivek nuna", "link": "https://stackoverflow.com/users/6527049/vivek-nuna"}, "reply_to_user": {"reputation": 957, "user_id": 4151075, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100001381091762/picture?type=large", "display_name": "Marek", "link": "https://stackoverflow.com/users/4151075/marek"}, "edited": false, "score": 0, "creation_date": 1476906568, "post_id": 40140272, "comment_id": 67550523, "body": "same, basically I converted it to class, you can use as struct, only the delegate part if for your interest I think"}, {"owner": {"reputation": 957, "user_id": 4151075, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100001381091762/picture?type=large", "display_name": "Marek", "link": "https://stackoverflow.com/users/4151075/marek"}, "edited": false, "score": 0, "creation_date": 1476906690, "post_id": 40140272, "comment_id": 67550600, "body": "Got it, will test this out tomorrow. Thanks :)"}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "edited": false, "score": 0, "creation_date": 1476906851, "post_id": 40140272, "comment_id": 67550690, "body": "Missed your ref keywords when passing PGMODENV to its delegate."}, {"owner": {"reputation": 957, "user_id": 4151075, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100001381091762/picture?type=large", "display_name": "Marek", "link": "https://stackoverflow.com/users/4151075/marek"}, "edited": false, "score": 0, "creation_date": 1476907110, "post_id": 40140272, "comment_id": 67550814, "body": "Correct, ref at <code>PGEnv</code>"}], "tags": [], "owner": {"reputation": 12422, "user_id": 6527049, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/smnwW.jpg?s=128&g=1", "display_name": "vivek nuna", "link": "https://stackoverflow.com/users/6527049/vivek-nuna"}, "is_accepted": false, "score": 2, "last_activity_date": 1476906723, "last_edit_date": 1476906723, "creation_date": 1476906412, "answer_id": 40140272, "question_id": 40140195, "link": "https://stackoverflow.com/questions/40140195/marshall-weird-c-structure-in-c/40140272#40140272", "title": "Marshall weird C++ structure in C#", "body": "<pre><code>public struct PGMODENV\n{\n    public int lMajor; // major version of kernel\n    public int lMinor; // minor version of kernel\n    public int lRelease; // release version of kernel\n\n    public int lResultSize; // sResult buffer size\n\n    //The original C++ function pointer contained an unconverted modifier:\n    //ORIGINAL LINE: int(__stdcall *lPGSM_ExecuteKernel)(struct _modenv_ *PGEnv, sbyte *sCommand, sbyte *sResult, int lLength);\n    public delegate int lPGSM_ExecuteKernelDelegate(PGMODENV PGEnv, ref string sCommand, ref string sResult, int lLength);\n    public lPGSM_ExecuteKernelDelegate lPGSM_ExecuteKernel;\n    //The original C++ function pointer contained an unconverted modifier:\n    //ORIGINAL LINE: int(__stdcall *lPGSM_ExecuteCommand)(struct _modenv_ *PGEnv, sbyte *sCommand, sbyte *sResult, int lLength);\n    public delegate int lPGSM_ExecuteCommandDelegate(PGMODENV PGEnv, ref string sCommand, ref string sResult, int lLength);\n    public lPGSM_ExecuteCommandDelegate lPGSM_ExecuteCommand;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 957, "user_id": 4151075, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100001381091762/picture?type=large", "display_name": "Marek", "link": "https://stackoverflow.com/users/4151075/marek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1476906723, "creation_date": 1476906092, "question_id": 40140195, "link": "https://stackoverflow.com/questions/40140195/marshall-weird-c-structure-in-c", "title": "Marshall weird C++ structure in C#", "body": "<p>I've been trying to marshall this structure in C#, but I have troubles with two last lines in it.</p>\n\n<pre><code>typedef struct _modenv_\n{\n  long lMajor;         /* major version of kernel */\n  long lMinor;         /* minor version of kernel */\n  long lRelease;       /* release version of kernel */\n\n  long lResultSize;    /* sResult buffer size */\n\n  long (__stdcall *lPGSM_ExecuteKernel) (struct _modenv_ *PGEnv, char *sCommand, char *sResult, long lLength);\n  long (__stdcall *lPGSM_ExecuteCommand)(struct _modenv_ *PGEnv, char *sCommand, char *sResult, long lLength);\n\n} PGMODENV;\n</code></pre>\n\n<p>And all I have done is this:</p>\n\n<pre><code>[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]\npublic struct PGMODENV\n{\n    /* input data */\n    public long lMajor;         /* major version of kernel */\n    public long lMinor;         /* minor version of kernel */\n    public long lRelease;       /* release version of kernel */\n\n    /* updated data */\n    public long lResultSize;    /* sResult buffer size */\n\n}\n</code></pre>\n\n<p>How can I implement them in C#?</p>\n"}, {"tags": ["c++", "visual-studio", "speech-recognition", "voce"], "comments": [{"owner": {"reputation": 5326, "user_id": 614065, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f164c6c3b709c97862a0d14f7725830b?s=128&d=identicon&r=PG", "display_name": "Olcay Erta\u015f", "link": "https://stackoverflow.com/users/614065/olcay-erta%c5%9f"}, "edited": false, "score": 0, "creation_date": 1476905906, "post_id": 40139990, "comment_id": 67550135, "body": "Why do you even try to understand it? Send me your project details. I will do it for you free."}, {"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1476905980, "post_id": 40139990, "comment_id": 67550179, "body": "Did you try to implement the example linked from <a href=\"http://stackoverflow.com/questions/16261390/how-to-install-voce-for-c\">here</a>? Post what you have tried so far..."}, {"owner": {"reputation": 7, "user_id": 5994015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-VnBnLNGC7_M/AAAAAAAAAAI/AAAAAAAAAMA/hBPwkZFxVg8/photo.jpg?sz=128", "display_name": "Goliat", "link": "https://stackoverflow.com/users/5994015/goliat"}, "edited": false, "score": 0, "creation_date": 1476906327, "post_id": 40139990, "comment_id": 67550373, "body": "I need just a simple CLR Console Application that can recognize just few words"}, {"owner": {"reputation": 7, "user_id": 5994015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-VnBnLNGC7_M/AAAAAAAAAAI/AAAAAAAAAMA/hBPwkZFxVg8/photo.jpg?sz=128", "display_name": "Goliat", "link": "https://stackoverflow.com/users/5994015/goliat"}, "edited": false, "score": 0, "creation_date": 1476906612, "post_id": 40139990, "comment_id": 67550546, "body": "update with what i have tried. Im geting error &quot;library machine type x64 conflicts with target machine type x86 &quot;"}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 5994015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-VnBnLNGC7_M/AAAAAAAAAAI/AAAAAAAAAMA/hBPwkZFxVg8/photo.jpg?sz=128", "display_name": "Goliat", "link": "https://stackoverflow.com/users/5994015/goliat"}, "edited": false, "score": 0, "creation_date": 1476979060, "post_id": 40156997, "comment_id": 67587264, "body": "Do you know where I can find example code for Pocketsphinx in c++ ?"}], "tags": [], "owner": {"reputation": 23634, "user_id": 432021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6c16a68dfa5030f9b6df4d4ae4a337a?s=128&d=identicon&r=PG", "display_name": "Nikolay Shmyrev", "link": "https://stackoverflow.com/users/432021/nikolay-shmyrev"}, "is_accepted": true, "score": 0, "last_activity_date": 1476972970, "creation_date": 1476972970, "answer_id": 40156997, "question_id": 40139990, "link": "https://stackoverflow.com/questions/40139990/voce-c-include-setup/40156997#40156997", "title": "Voce c++ include setup", "body": "<p>Don't use Voce, it was craziest idea to wrap java library with C++ code.</p>\n\n<p>There are many C++ speech APIs, commercial and open source. You can use Microsoft's speech API, you can use Pocketsphinx, you can use Kaldi. There are many alternatives.</p>\n"}], "owner": {"reputation": 7, "user_id": 5994015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-VnBnLNGC7_M/AAAAAAAAAAI/AAAAAAAAAMA/hBPwkZFxVg8/photo.jpg?sz=128", "display_name": "Goliat", "link": "https://stackoverflow.com/users/5994015/goliat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 0, "accepted_answer_id": 40156997, "answer_count": 1, "score": 0, "last_activity_date": 1477097494, "creation_date": 1476905315, "last_edit_date": 1477097494, "question_id": 40139990, "link": "https://stackoverflow.com/questions/40139990/voce-c-include-setup", "title": "Voce c++ include setup", "body": "<p>I have seen many posts about that, but I just don't understand everything.</p>\n\n<p>Could someone write ALL include and library directories and linkers I need to add to run Voce with c++</p>\n\n<p>I've tried:</p>\n\n<p>Include Dir: \n\\voce-0.9.1\\src\\c++<br>\n\\voce-0.9.1\\lib\n\\ProgramFiles\\java\\jdk1.8.0_101\\include\n\\ProgramFiles\\java\\jdk1.8.0_101\\include\\win32\n\\ProgramFiles\\java\\jdk1.8.0_101\\bin\n\\ProgramFiles\\java\\jdk1.8.0_101\\lib</p>\n\n<p>Library Dir:<br>\n\\ProgramFiles\\java\\jdk1.8.0_101\\lib<br>\n\\ProgramFiles\\java\\jdk1.8.0_101\\bin</p>\n\n<p>Linker input:<br>\nProgram Files\\Java\\jdk1.8.0_101\\lib</p>\n"}, {"tags": ["c++", "eclipse"], "comments": [{"owner": {"reputation": 16, "user_id": 7044194, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209568549165050/picture?type=large", "display_name": "SCodrington", "link": "https://stackoverflow.com/users/7044194/scodrington"}, "reply_to_user": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1476905601, "post_id": 40139982, "comment_id": 67549950, "body": "I see!! Is there any way to make that standard in all c++ projects I create?"}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1476966378, "post_id": 40139982, "comment_id": 67577534, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/20693240/c-hello-world-exe-crashes-hello-world-exe-has-stopped-working-when-used\">C++ &quot;Hello World.exe&quot; crashes - &quot;Hello World.exe has stopped working.&quot; when used in command prompt</a>"}], "owner": {"reputation": 16, "user_id": 7044194, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209568549165050/picture?type=large", "display_name": "SCodrington", "link": "https://stackoverflow.com/users/7044194/scodrington"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1476905285, "creation_date": 1476905285, "question_id": 40139982, "link": "https://stackoverflow.com/questions/40139982/building-c-program-using-eclipse-neon-gives-me-cc1plus-exe-has-stopped-worki", "title": "Building c++ program using eclipse neon gives me &quot;cc1plus.exe&quot; has stopped working error", "body": "<p>I am just trying to run a basic hello world c++ program that was recommended by eclipse (file->new->c++ project-> \"Hello World C++ Project\" and am reaching errors at every level. At first the build would give me a \"make file\" and \"g++\" not found but then I installed minGW/gcc/minSYS using the \"mingw-get\" installer provided at this address <a href=\"http://www.mingw.org/wiki/Getting_Started\" rel=\"nofollow\">http://www.mingw.org/wiki/Getting_Started</a> on my computer, fixing that issue. But now when I try and build this or any other c++ program I get a pop-up saying \"cc1plus.exe has stopped working\" whether I build the entire workspace or just the program. Can anyone explain what might be going wrong? I've reinstalled both eclipse and minGW by deleting their folders and starting again but nothing seems to be working!</p>\n\n<p>Using<br>\nWindows 8(64 bit)<br>\nEclipse Neon 4.6.1  </p>\n"}, {"tags": ["c++", "visual-studio-2010", "visual-studio-2015"], "comments": [{"owner": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "edited": false, "score": 0, "creation_date": 1476905166, "post_id": 40139906, "comment_id": 67549687, "body": "1. Did you install Windows SDK 7.1 in default location? 2. Did you select to install compilers? It might detect you already have compilers installed and deselect them from installing."}, {"owner": {"reputation": 478, "user_id": 666412, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0682b0768a13e1c7ce524db7b1410369?s=128&d=identicon&r=PG", "display_name": "user666412", "link": "https://stackoverflow.com/users/666412/user666412"}, "reply_to_user": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "edited": false, "score": 0, "creation_date": 1476905754, "post_id": 40139906, "comment_id": 67550041, "body": "I had to modify my registry to allow the compiler to be installed. Is there an install log for that?"}, {"owner": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "edited": false, "score": 0, "creation_date": 1476908004, "post_id": 40139906, "comment_id": 67551336, "body": "Windows SDK installer asks you at the end whether you want to view the log. Try looking in your <code>%TEMP%</code> dir."}, {"owner": {"reputation": 478, "user_id": 666412, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0682b0768a13e1c7ce524db7b1410369?s=128&d=identicon&r=PG", "display_name": "user666412", "link": "https://stackoverflow.com/users/666412/user666412"}, "reply_to_user": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "edited": false, "score": 0, "creation_date": 1476908576, "post_id": 40139906, "comment_id": 67551690, "body": "Oh .. shame on me. SDK installation had failed. A quick research on the cause led me to (<a href=\"https://support.microsoft.com/en-us/kb/2934068\" rel=\"nofollow noreferrer\">support.microsoft.com/en-us/kb/2934068</a>). I had to uninstall the VC redistributable in order to install the SDK."}, {"owner": {"reputation": 12250, "user_id": 70930, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c8e7e117b5fb845cfe93ae42f43b244a?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/70930/paul"}, "edited": false, "score": 0, "creation_date": 1476908806, "post_id": 40139906, "comment_id": 67551822, "body": "Now I remembered there is similar thread about it <a href=\"http://stackoverflow.com/q/34885286/70930\">stackoverflow.com/q/34885286/70930</a>"}], "owner": {"reputation": 478, "user_id": 666412, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0682b0768a13e1c7ce524db7b1410369?s=128&d=identicon&r=PG", "display_name": "user666412", "link": "https://stackoverflow.com/users/666412/user666412"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 814, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1476905018, "creation_date": 1476905018, "last_edit_date": 1495541799, "question_id": 40139906, "link": "https://stackoverflow.com/questions/40139906/visual-studio-2015-compile-c-with-older-sdk", "title": "Visual Studio 2015 - Compile C++ with older SDK", "body": "<p>I have VS 2015 installed on my PC and I want to build a project using the SDK shipped with VS 2010. I installed Microsoft SDK v7.1 but that didn't affect the environment for VS 2015 so that I can choose it as a toolset. Any tips?</p>\n\n<p>This question (<a href=\"https://stackoverflow.com/questions/15453629/use-visual-studio-2012-and-compile-with-older-platform-toolset\">Use Visual Studio 2012 and compile with older platform toolset?</a>) almost answers my question but I'm not if the SDK must be installed before VS 2015.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1476904959, "post_id": 40139802, "comment_id": 67549579, "body": "<code>template &lt;typename T&gt; using Forwarder = function_traits&lt;T&gt;::template ArgsCopy&lt;_forwarder&gt;;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 15610, "user_id": 2456565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xa8D9.png?s=128&g=1", "display_name": "krzaq", "link": "https://stackoverflow.com/users/2456565/krzaq"}, "is_accepted": true, "score": 3, "last_activity_date": 1476905214, "creation_date": 1476905214, "answer_id": 40139951, "question_id": 40139802, "link": "https://stackoverflow.com/questions/40139802/copying-template-arguments-from-stdfunction/40139951#40139951", "title": "Copying template arguments from std::function", "body": "<p>Microsoft's compiler doesn't exactly follow the standard here, and adding <code>template</code> should work:</p>\n\n<pre><code>template &lt;typename T&gt;\nusing Forwarder = function_traits&lt;T&gt;::template ArgsCopy&lt;_forwarder&gt;;\n</code></pre>\n\n<p>But if you want your code to be portable, add <code>typename</code>:</p>\n\n<pre><code>template &lt;typename T&gt;\nusing Forwarder = typename function_traits&lt;T&gt;::template ArgsCopy&lt;_forwarder&gt;;\n</code></pre>\n"}], "owner": {"reputation": 898, "user_id": 1411099, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3367cdc6e469cb056cc6721d96307017?s=128&d=identicon&r=PG", "display_name": "Jordan Crittenden", "link": "https://stackoverflow.com/users/1411099/jordan-crittenden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1476905269, "accepted_answer_id": 40139951, "answer_count": 1, "score": 2, "last_activity_date": 1476905214, "creation_date": 1476904690, "question_id": 40139802, "link": "https://stackoverflow.com/questions/40139802/copying-template-arguments-from-stdfunction", "closed_reason": "Duplicate", "title": "Copying template arguments from std::function", "body": "<p>I want to create a templated class whose variable template arguments are the same as a given <code>std::function</code>. For example</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct function_traits : public function_traits&lt;decltype(&amp;T::operator())&gt; {};\n\ntemplate &lt;typename ClassType, typename ReturnType, typename... Args&gt;\nstruct function_traits&lt;ReturnType(ClassType::*)(Args...) const&gt; {\n    template &lt;template&lt;typename... TArgs&gt; class T&gt;\n    using ArgsCopy = T&lt;Args...&gt;;\n};\n\ntemplate &lt;typename... Args&gt;\nclass _forwarder {\npublic:\n    using cb = std::function&lt;void(Args...)&gt;;\n\n    void operator()(Args... args) {\n        my_cb(args...);\n    }\n\nprivate:\n    cb my_cb;\n};\n\ntemplate &lt;typename T&gt;\nusing Forwarder = function_traits&lt;T&gt;::ArgsCopy&lt;_forwarder&gt;;\n</code></pre>\n\n<p>I would then use this class as follows</p>\n\n<pre><code>using cb_test = std::function&lt;void(int, float, std::string)&gt;;\nForwarder&lt;cb_test&gt; fwd;\nfwd(5, 3.2, \"hello\");\n</code></pre>\n\n<p>Visual Studio throws a compilation error: Error C2061: syntax error : identifier 'ArgsCopy'. How do I fix this?</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2015", "stl"], "owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1476904366, "creation_date": 1476904366, "question_id": 40139703, "link": "https://stackoverflow.com/questions/40139703/is-there-a-way-to-simplify-hide-stl-backtrace-in-visual-studio-call-stack-view", "title": "Is there a way to simplify/hide STL backtrace in Visual Studio call stack view?", "body": "<p>The call stack in Visual Studio 2015 becomes very difficult to read/deal with when using <code>std::bind</code>, <code>std::function</code>, STL algorithms, and other forms of functionality where eventually a function back in my own code base is reached. In between the \"real\" (my) calling code and the handling (again, my) code, there's usually 10-15 pieces of backtrace that are inside STL. Is there a way to hide or condense this information?</p>\n"}, {"tags": ["c++", "syntax", "multiple-columns"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1476903669, "post_id": 40139472, "comment_id": 67548826, "body": "can you show the output (<a href=\"https://stackoverflow.com/posts/40139472/edit\">edit</a> the question)?"}, {"owner": {"reputation": 13, "user_id": 7044111, "user_type": "registered", "profile_image": "https://graph.facebook.com/1327958123881441/picture?type=large", "display_name": "herryJan", "link": "https://stackoverflow.com/users/7044111/herryjan"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1476903887, "post_id": 40139472, "comment_id": 67548962, "body": "I added a picture link to my post."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1476904000, "post_id": 40139472, "comment_id": 67549033, "body": "ok you would have to step through the endl since standard output would be flushed. It isn&#39;t now."}, {"owner": {"reputation": 13, "user_id": 7044111, "user_type": "registered", "profile_image": "https://graph.facebook.com/1327958123881441/picture?type=large", "display_name": "herryJan", "link": "https://stackoverflow.com/users/7044111/herryjan"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1476904134, "post_id": 40139472, "comment_id": 67549112, "body": "By step through the endl, do you mean don&#39;t include it and just carry onto the next item?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1476904218, "post_id": 40139472, "comment_id": 67549159, "body": "have you tried to run your program on a standard console (not your IDE)?"}, {"owner": {"reputation": 13, "user_id": 7044111, "user_type": "registered", "profile_image": "https://graph.facebook.com/1327958123881441/picture?type=large", "display_name": "herryJan", "link": "https://stackoverflow.com/users/7044111/herryjan"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1476904436, "post_id": 40139472, "comment_id": 67549296, "body": "I apologize for my incompetence as I&#39;m new to programming, but what&#39;s a standard console I can dl to run c++ on? I&#39;m currently using xcode and had no problem displaying code up till now."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1476904478, "post_id": 40139472, "comment_id": 67549325, "body": "a terminal / shell whatever."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7044111, "user_type": "registered", "profile_image": "https://graph.facebook.com/1327958123881441/picture?type=large", "display_name": "herryJan", "link": "https://stackoverflow.com/users/7044111/herryjan"}, "edited": false, "score": 0, "creation_date": 1476904528, "post_id": 40139638, "comment_id": 67549355, "body": "Thanks! My teacher recommended codeblocks for windows and xcode for macs, but i&#39;ll dl another IDE."}, {"owner": {"reputation": 13, "user_id": 7044111, "user_type": "registered", "profile_image": "https://graph.facebook.com/1327958123881441/picture?type=large", "display_name": "herryJan", "link": "https://stackoverflow.com/users/7044111/herryjan"}, "edited": false, "score": 0, "creation_date": 1476904622, "post_id": 40139638, "comment_id": 67549399, "body": "Also, how would I go about aligning my &quot;tax&quot; and &quot;total&quot; numbers on the right side under &quot;ext. price&quot;?"}, {"owner": {"reputation": 314, "user_id": 3876609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c55c8e25a139c537665bbe496b20feb0?s=128&d=identicon&r=PG&f=1", "display_name": "Dali", "link": "https://stackoverflow.com/users/3876609/dali"}, "reply_to_user": {"reputation": 13, "user_id": 7044111, "user_type": "registered", "profile_image": "https://graph.facebook.com/1327958123881441/picture?type=large", "display_name": "herryJan", "link": "https://stackoverflow.com/users/7044111/herryjan"}, "edited": false, "score": 0, "creation_date": 1476904847, "post_id": 40139638, "comment_id": 67549519, "body": "put setw(45) instead of setw(15) for the Tax and Total : `    cout &lt;&lt; left &lt;&lt; setw(45) &lt;&lt; &quot;Tax&quot;;     cout &lt;&lt; right &lt;&lt; setw(15) &lt;&lt; salesTax;     cout &lt;&lt; endl;      cout &lt;&lt; left &lt;&lt; setw(45) &lt;&lt; &quot;Total&quot;;     cout &lt;&lt; right &lt;&lt; setw(15) &lt;&lt; finalTotal;     cout &lt;&lt; endl;`"}, {"owner": {"reputation": 1754, "user_id": 4605946, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/pNIMp.png?s=128&g=1", "display_name": "space_voyager", "link": "https://stackoverflow.com/users/4605946/space-voyager"}, "reply_to_user": {"reputation": 13, "user_id": 7044111, "user_type": "registered", "profile_image": "https://graph.facebook.com/1327958123881441/picture?type=large", "display_name": "herryJan", "link": "https://stackoverflow.com/users/7044111/herryjan"}, "edited": false, "score": 0, "creation_date": 1476917206, "post_id": 40139638, "comment_id": 67555392, "body": "@herryJan It&#39;s the wrong way to go &quot;I&#39;ll download another IDE&quot; when something goes wrong. Xcode is a good environment, learn what went wrong and keep using it. Another IDE might have another quirk..."}], "tags": [], "owner": {"reputation": 314, "user_id": 3876609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c55c8e25a139c537665bbe496b20feb0?s=128&d=identicon&r=PG&f=1", "display_name": "Dali", "link": "https://stackoverflow.com/users/3876609/dali"}, "is_accepted": false, "score": 0, "last_activity_date": 1476904144, "creation_date": 1476904144, "answer_id": 40139638, "question_id": 40139472, "link": "https://stackoverflow.com/questions/40139472/c-rows-in-my-columns-arent-showing-up-after-the-first-iteration/40139638#40139638", "title": "(C++) Rows in my columns aren&#39;t showing up after the first iteration", "body": "<p>On my computer (Windows g++ CodeBlocks) everything is fine. The problem surely comes from your IDE. Here is your code output on my screen : \n<a href=\"https://i.stack.imgur.com/QRRsZ.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/QRRsZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>Just for information, try to use C++ functionalities as POO to dsign your objects. It will be easier for you when coding bigger applications.</p>\n"}, {"tags": [], "owner": {"reputation": 3750, "user_id": 1105015, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/996b29e26a9da215e1637df637cabb48?s=128&d=identicon&r=PG", "display_name": "Rob Starling", "link": "https://stackoverflow.com/users/1105015/rob-starling"}, "is_accepted": false, "score": 0, "last_activity_date": 1477098941, "creation_date": 1477098941, "answer_id": 40187389, "question_id": 40139472, "link": "https://stackoverflow.com/questions/40139472/c-rows-in-my-columns-arent-showing-up-after-the-first-iteration/40187389#40187389", "title": "(C++) Rows in my columns aren&#39;t showing up after the first iteration", "body": "<p>I think your execution is just paused at that breakpoint on the <code>endl</code> for the second item. If you step past it (or just remove the breakpoint), does the whole line for the second item appear? If so, it's because of something called \"line buffering\", where the program doesn't actually output as soon as you tell it to, but instead it collects up things until it sees a line-ending and then it outputs the whole line.</p>\n\n<p>(Breakpoints, in case it's something you did by accident, are a feature of interactive debugging systems where you can have the whole program pause before executing a given line of code. They're often set in IDEs via a right-click menu or a click in the margin next to the line of code.)</p>\n"}], "owner": {"reputation": 13, "user_id": 7044111, "user_type": "registered", "profile_image": "https://graph.facebook.com/1327958123881441/picture?type=large", "display_name": "herryJan", "link": "https://stackoverflow.com/users/7044111/herryjan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1477098941, "creation_date": 1476903512, "last_edit_date": 1477098185, "question_id": 40139472, "link": "https://stackoverflow.com/questions/40139472/c-rows-in-my-columns-arent-showing-up-after-the-first-iteration", "title": "(C++) Rows in my columns aren&#39;t showing up after the first iteration", "body": "<p>I'm 2 days news to programming and this is my first post, so I'd greatly appreciate your help and patience. :)</p>\n\n<p>My current assignment is to have a user input 2 items bought from a store, including price and quantity, to generate a receipt. For some reason, I can't get any of my code to display after the first item's info gets displayed.</p>\n\n<p><img src=\"https://i.stack.imgur.com/XcTPA.png\" alt=\"pic of problem\"></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt; // For column organization\n#include &lt;string&gt; // For item names\n\nusing namespace std;\n\nconst float TAX = 0.08675;\n\nint main()\n{\n\n\n    string itemOne, itemTwo;\n    double priceOne, priceTwo;\n    int countOne, countTwo;\n\n\n    cout &lt;&lt; \"Hello, what is the first item that you are purchasing    today?\" &lt;&lt; endl;\n    cout &lt;&lt; \"Please enter the item below.\" &lt;&lt; endl;\n    getline(cin, itemOne);\n\n    cout &lt;&lt; endl &lt;&lt; \"Thank you.\" &lt;&lt; endl;\n    cout &lt;&lt; \"Now enter the price and then the quantity of \" + itemOne + \"(s) purchased, separated by a space.\" &lt;&lt; endl;\n    cin &gt;&gt; priceOne &gt;&gt; countOne;\n    cin.ignore();\n\n    cout &lt;&lt; endl &lt;&lt; \"What is the second item that you are purchasing today?\\n\";\n    cout &lt;&lt; \"Please enter the item below.\" &lt;&lt; endl;\n    getline(cin, itemTwo);\n\n    cout &lt;&lt; endl &lt;&lt; \"Thank you.\" &lt;&lt; endl;\n    cout &lt;&lt; \"Now enter the price and then the quantity of \" + itemTwo + \"(s) purchased, separated by a space.\" &lt;&lt; endl;\n    cin &gt;&gt; priceTwo &gt;&gt; countTwo;\n\n/* Calculations for the Receipt */\n\n     float subTotal, finalPriceOne, finalPriceTwo, salesTax, finalTotal;\n\n    finalPriceOne = countOne * priceOne;\n    finalPriceTwo = countTwo * priceTwo;\n    subTotal = finalPriceOne + finalPriceTwo;\n    salesTax = subTotal * TAX;\n    finalTotal = subTotal + salesTax;\n\n    /* Receipt */\n\n    cout &lt;&lt; endl &lt;&lt; \"Your receipt has been calculated and is for your viewing below...\" &lt;&lt; endl &lt;&lt; endl;\n\n    cout &lt;&lt; \"---------------------------------------------------------------\\n\";\n\n    cout &lt;&lt; left &lt;&lt; setw(15) &lt;&lt; \"Item\";\n    cout &lt;&lt; right &lt;&lt; setw(15) &lt;&lt; \"Quantity\";\n    cout &lt;&lt; right &lt;&lt; setw(15) &lt;&lt; \"Price\";\n    cout &lt;&lt; right &lt;&lt; setw(15) &lt;&lt; \"Ext. Price\";\n    cout &lt;&lt; endl;\n\n    cout &lt;&lt; \"---------------------------------------------------------------\\n\";\n\n    cout &lt;&lt; setprecision(2) &lt;&lt; fixed;\n\n    cout &lt;&lt; left &lt;&lt; setw(15) &lt;&lt; itemOne;\n    cout &lt;&lt; right &lt;&lt; setw(15) &lt;&lt; countOne;\n    cout &lt;&lt; right &lt;&lt; setw(15) &lt;&lt; priceOne;\n    cout &lt;&lt; right &lt;&lt; setw(15) &lt;&lt; finalPriceOne;\n    cout &lt;&lt; endl;\n\n    cout &lt;&lt; left &lt;&lt; setw(15) &lt;&lt; itemTwo;\n    cout &lt;&lt; right &lt;&lt; setw(15) &lt;&lt; countTwo;\n    cout &lt;&lt; right &lt;&lt; setw(15) &lt;&lt; priceTwo;\n    cout &lt;&lt; right &lt;&lt; setw(15) &lt;&lt; finalPriceTwo;\n    cout &lt;&lt; endl;\n\n    cout &lt;&lt; left &lt;&lt; setw(15) &lt;&lt; \"Tax\";\n    cout &lt;&lt; right &lt;&lt; setw(15) &lt;&lt; salesTax;\n    cout &lt;&lt; endl;\n\n    cout &lt;&lt; left &lt;&lt; setw(15) &lt;&lt; \"Total\";\n    cout &lt;&lt; right &lt;&lt; setw(15) &lt;&lt; finalTotal;\n    cout &lt;&lt; endl;\n\n\n    return 0;\n }\n</code></pre>\n"}, {"tags": ["c++", "arrays", "sorting", "structure"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1476904675, "post_id": 40139450, "comment_id": 67549420, "body": "the error message is not consistent with the name of the struct. Is your real struct called <code>Rainfall_data</code> ?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1476907554, "post_id": 40139450, "comment_id": 67551060, "body": "The argument to <code>sort</code> must be an array. <code>rain.rainfall</code> isn&#39;t an array. The array is just <code>rain</code>. If you want to sort by rainfall you have to provide a comparison function that compares that member of two structs."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 5850515, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/06ad2cbb02d2a2faeac786f3fc8d752b?s=128&d=identicon&r=PG&f=1", "display_name": "Elchapo", "link": "https://stackoverflow.com/users/5850515/elchapo"}, "edited": false, "score": 0, "creation_date": 1476904361, "post_id": 40139584, "comment_id": 67549257, "body": "hmm, in the past ive only used two parameters in the sort function. Can you explain a bit to me the purpose of the third parameter and what it does? Thank you Mark"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 59, "user_id": 5850515, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/06ad2cbb02d2a2faeac786f3fc8d752b?s=128&d=identicon&r=PG&f=1", "display_name": "Elchapo", "link": "https://stackoverflow.com/users/5850515/elchapo"}, "edited": false, "score": 0, "creation_date": 1476904456, "post_id": 40139584, "comment_id": 67549306, "body": "@Elchapo the third parameter always exists, but it defaults to <code>std::less</code> which uses <code>operator&lt;</code> to compare the two objects. It should return <code>true</code> if the first argument is considered to be less than the second."}, {"owner": {"reputation": 59, "user_id": 5850515, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/06ad2cbb02d2a2faeac786f3fc8d752b?s=128&d=identicon&r=PG&f=1", "display_name": "Elchapo", "link": "https://stackoverflow.com/users/5850515/elchapo"}, "edited": false, "score": 0, "creation_date": 1476904652, "post_id": 40139584, "comment_id": 67549410, "body": "thank you! that makes a bit more sense, you&#39;ve put me on the right track. Have a nice day"}], "tags": [], "owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 1, "last_activity_date": 1476903927, "creation_date": 1476903927, "answer_id": 40139584, "question_id": 40139450, "link": "https://stackoverflow.com/questions/40139450/sort-function-for-array-of-structures/40139584#40139584", "title": "Sort function for array of structures", "body": "<p>You need to create a comparison function that you can pass to <code>sort</code>, that knows how to compare two different <code>Rain</code> objects.</p>\n\n<pre><code>bool RainLess(const Rain &amp;r1, const Rain &amp;r2)\n{\n    return r1.rainfall &lt; r2.rainfall;\n}\n\nstd::sort(rain, rain+240, RainLess);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 132, "user_id": 4306868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0525549d492414add26b352dbcf95b72?s=128&d=identicon&r=PG&f=1", "display_name": "The Hard Way", "link": "https://stackoverflow.com/users/4306868/the-hard-way"}, "is_accepted": true, "score": 3, "last_activity_date": 1476904801, "creation_date": 1476904801, "answer_id": 40139834, "question_id": 40139450, "link": "https://stackoverflow.com/questions/40139450/sort-function-for-array-of-structures/40139834#40139834", "title": "Sort function for array of structures", "body": "<p>Often it's most convenient to embed the function into the class/struct:</p>\n\n<pre><code>struct Rain {\n    string month;\n    string year;\n    double rainfall;\n    bool operator &lt; (const Rain&amp; r1) const {\n        return (rainfall &lt; r1.rainfall);\n    }\n};\n</code></pre>\n\n<p>Now they can be sorted like the basic types:</p>\n\n<pre><code>std::sort(rain, rain + 240);\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 5850515, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/06ad2cbb02d2a2faeac786f3fc8d752b?s=128&d=identicon&r=PG&f=1", "display_name": "Elchapo", "link": "https://stackoverflow.com/users/5850515/elchapo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1134, "favorite_count": 0, "accepted_answer_id": 40139834, "answer_count": 2, "score": -2, "last_activity_date": 1476904801, "creation_date": 1476903427, "question_id": 40139450, "link": "https://stackoverflow.com/questions/40139450/sort-function-for-array-of-structures", "title": "Sort function for array of structures", "body": "<p>I have a structure called rain. It is defines like this</p>\n\n<pre><code> struct Rain{\n    string month;\n    string year;\n    double rainfall;\n }\n</code></pre>\n\n<p>I have an array of these (rain [240]) and I would like to sort using the sort algorithm. This is what I tried:</p>\n\n<pre><code>sort(rain.rainfall, rain.rainfall + 240);\n</code></pre>\n\n<p>but I get:  </p>\n\n<pre><code>member reference base type 'Rainfall_data [240]' is not a structure or union\n    sort(rain.rainfall, rain.rainfall + 240);\n         ~~~~^~~~~~~~~\n</code></pre>\n\n<p>I am just wondering if it is possible to use the sort algorithm this way, and if so what have I done wrong that it is not working?</p>\n\n<p>Thank you for your help.</p>\n"}, {"tags": ["c++", "c++11", "vector"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1476903437, "post_id": 40139373, "comment_id": 67548695, "body": "just go ahead and do it, I wont stop you"}], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 2, "last_activity_date": 1476903436, "creation_date": 1476903436, "answer_id": 40139453, "question_id": 40139373, "link": "https://stackoverflow.com/questions/40139373/split-an-stdset-into-vectors-of-equal-size/40139453#40139453", "title": "Split an std::set into vectors of equal size", "body": "<p>Hmm...I guess you could do something on this general order:</p>\n\n<pre><code>std::vector&lt;vector&lt;int&gt;&gt; ints(myset.size()/max_size);\n\nsize_t i = 0;\n\nfor (auto d : my_set) \n    ints[i++/max_size].push_back(d);\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 4374088, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/18fd30d0078ee7f07334992cb5bdb18e?s=128&d=identicon&r=PG&f=1", "display_name": "Geek", "link": "https://stackoverflow.com/users/4374088/geek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1476903436, "creation_date": 1476903137, "question_id": 40139373, "link": "https://stackoverflow.com/questions/40139373/split-an-stdset-into-vectors-of-equal-size", "title": "Split an std::set into vectors of equal size", "body": "<p>I have an std::set of integers of say 550 elements. I want to split this into vectors of size 100 or less. So, lets say, in this case we will get 6 vectors in all. First 5 vectors will be of sizes 100 and the sixth vector will be of size 50. </p>\n\n<p>So, effectively I need to break std::setmasterSet into std::vector>final. Is there a good and crisp way to do it using some standard std algorithms. I dont need a class to have this logic, infact I can write a function to do this. </p>\n"}, {"tags": ["c++", "image", "qt"], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 6150467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e822093d597088dd5be23d7ae197f007?s=128&d=identicon&r=PG&f=1", "display_name": "burn", "link": "https://stackoverflow.com/users/6150467/burn"}, "is_accepted": false, "score": 2, "last_activity_date": 1476904889, "last_edit_date": 1476904889, "creation_date": 1476904252, "answer_id": 40139672, "question_id": 40139306, "link": "https://stackoverflow.com/questions/40139306/qt-qlabel-scale-image-with-window/40139672#40139672", "title": "Qt QLabel Scale Image with Window", "body": "<p>Use <a href=\"http://doc.qt.io/qt-4.8/qwidget.html#minimumSize-prop\" rel=\"nofollow\">setMinimumSize</a> and <a href=\"http://doc.qt.io/qt-4.8/qwidget.html#sizePolicy-prop\" rel=\"nofollow\">setSizePolicy</a> with a <a href=\"http://doc.qt.io/qt-4.8/qsizepolicy.html#Policy-enum\" rel=\"nofollow\">size policy</a> of minimum, this should block the label from shrinking below the minimum size that you set.</p>\n\n<p>Preserving the aspect ratio is a little more complicated. Fist save the pixmap of the image you want to draw as a member variable for the QLabel. Next re-implement the paint event for the label so that you can do the scaling of the pixmap yourself. If you call this->size() in the paint event you will get the area where the pixmap is to be drawn. Call <a href=\"http://doc.qt.io/qt-4.8/qpixmap.html#scaled-1\" rel=\"nofollow\">scaled</a> on your pixmap with that size and Qt::KeepAspectRatio, then setPixmap on your label. Finally call QLabel::paint_event. </p>\n"}], "owner": {"reputation": 95, "user_id": 5565586, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b4ea9d3519d109cea0f4160845889de4?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Fritz the Blitz", "link": "https://stackoverflow.com/users/5565586/frank-fritz-the-blitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1184, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1476904889, "creation_date": 1476902866, "last_edit_date": 1476904044, "question_id": 40139306, "link": "https://stackoverflow.com/questions/40139306/qt-qlabel-scale-image-with-window", "title": "Qt QLabel Scale Image with Window", "body": "<p>I have a window with a Layout and a QLabel. The QLabel contains an image. The image should fill the QLabel's parent layout. Should the user decide to scale the window down, the image should shrink until it reaches a minimum size-  at which point the window should no longer be scalable. Should the user decide to scale the window up, the image should grow. In both these cases, the aspect ratio of the image should be preserved.</p>\n\n<p>I have managed to fill the QLabel's parent with the image using setScaledContents. However, the minimum size always seems to be the original size of the image file, nothing I define - when I do attempt to define it via QPixmap.scaled(), it makes the image extremely pixelated. And though I can scale the image up, the aspect ratio is never preserved. </p>\n\n<p>I feel as though this should be fairly straightforward, but I am very lost. Help! </p>\n"}, {"tags": ["c++", "mongodb", "boost", "driver", "legacy"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7020564, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f31d6dff8bce5d33035c36d6f1c23e65?s=128&d=identicon&r=PG&f=1", "display_name": "Harold", "link": "https://stackoverflow.com/users/7020564/harold"}, "edited": false, "score": 0, "creation_date": 1476914848, "post_id": 40140918, "comment_id": 67554541, "body": "Thanks! That&#39;s it! But now I got an exception at:"}, {"owner": {"reputation": 23, "user_id": 7020564, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f31d6dff8bce5d33035c36d6f1c23e65?s=128&d=identicon&r=PG&f=1", "display_name": "Harold", "link": "https://stackoverflow.com/users/7020564/harold"}, "edited": false, "score": 0, "creation_date": 1476914943, "post_id": 40140918, "comment_id": 67554577, "body": "<code>con.auth(&quot;dbname&quot;, &quot;userid&quot;, &quot;password&quot;, errmsg); </code>: Unhandled exception at 0x00007FFD87F77788 in mongodrivertest.exe: Microsoft C++ exception: mongo::UserException at memory location 0x00000056C6FFF070."}, {"owner": {"reputation": 23, "user_id": 7020564, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f31d6dff8bce5d33035c36d6f1c23e65?s=128&d=identicon&r=PG&f=1", "display_name": "Harold", "link": "https://stackoverflow.com/users/7020564/harold"}, "edited": false, "score": 0, "creation_date": 1476915110, "post_id": 40140918, "comment_id": 67554642, "body": "Program broke at: &#39;bool DBClientWithCommands::auth(......                    &lt;&lt; username &lt;&lt; saslCommandPasswordFieldName &lt;&lt; password_text                    &lt;&lt; saslCommandDigestPasswordFieldName &lt;&lt; digestPassword));`"}, {"owner": {"reputation": 10953, "user_id": 776473, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dbfcfc0e3c4b2b0baef2383fbc97f687?s=128&d=identicon&r=PG", "display_name": "acm", "link": "https://stackoverflow.com/users/776473/acm"}, "reply_to_user": {"reputation": 23, "user_id": 7020564, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f31d6dff8bce5d33035c36d6f1c23e65?s=128&d=identicon&r=PG&f=1", "display_name": "Harold", "link": "https://stackoverflow.com/users/7020564/harold"}, "edited": false, "score": 0, "creation_date": 1476927264, "post_id": 40140918, "comment_id": 67557948, "body": "@Harold - Please open a new post for a new issue."}, {"owner": {"reputation": 23, "user_id": 7020564, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f31d6dff8bce5d33035c36d6f1c23e65?s=128&d=identicon&r=PG&f=1", "display_name": "Harold", "link": "https://stackoverflow.com/users/7020564/harold"}, "edited": false, "score": 0, "creation_date": 1477002095, "post_id": 40140918, "comment_id": 67599735, "body": "Used try... catch... and figured out the problem:"}, {"owner": {"reputation": 23, "user_id": 7020564, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f31d6dff8bce5d33035c36d6f1c23e65?s=128&d=identicon&r=PG&f=1", "display_name": "Harold", "link": "https://stackoverflow.com/users/7020564/harold"}, "edited": false, "score": 0, "creation_date": 1477002283, "post_id": 40140918, "comment_id": 67599800, "body": "So I am trying to rebuild mongoDB driver with ssl. So many problems with OpenSSL. Here is another post: <a href=\"http://stackoverflow.com/questions/40165229/openssl-1-0-2j-installation-on-windows-10-fatal-error-c1083-cannot-open-inclu\" title=\"openssl 1 0 2j installation on windows 10 fatal error c1083 cannot open inclu\">stackoverflow.com/questions/40165229/&hellip;</a>"}], "tags": [], "owner": {"reputation": 10953, "user_id": 776473, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dbfcfc0e3c4b2b0baef2383fbc97f687?s=128&d=identicon&r=PG", "display_name": "acm", "link": "https://stackoverflow.com/users/776473/acm"}, "is_accepted": true, "score": 1, "last_activity_date": 1476908807, "creation_date": 1476908807, "answer_id": 40140918, "question_id": 40139017, "link": "https://stackoverflow.com/questions/40139017/mongodb-c-legacy-driver-1-1-2-not-working-compiled-with-vs2013-win-10-boos/40140918#40140918", "title": "MongoDB c++ legacy driver 1.1.2 not working - Compiled with VS2013, Win 10, boost-1_62", "body": "<p>You need to call <code>mongo::client::initialize</code> <em>before</em> you construct any driver objects, or BSON for that matter. Move the call to <code>mongo::client::initialize</code> above where you declare the DBClientReplicaSet object.</p>\n"}], "owner": {"reputation": 23, "user_id": 7020564, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f31d6dff8bce5d33035c36d6f1c23e65?s=128&d=identicon&r=PG&f=1", "display_name": "Harold", "link": "https://stackoverflow.com/users/7020564/harold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 1, "accepted_answer_id": 40140918, "answer_count": 1, "score": 1, "last_activity_date": 1476909333, "creation_date": 1476901781, "last_edit_date": 1476909333, "question_id": 40139017, "link": "https://stackoverflow.com/questions/40139017/mongodb-c-legacy-driver-1-1-2-not-working-compiled-with-vs2013-win-10-boos", "title": "MongoDB c++ legacy driver 1.1.2 not working - Compiled with VS2013, Win 10, boost-1_62", "body": "<p>Driver compiled successfully without problem. I coded a simple program to test the driver. Basically the following is the code:</p>\n\n<pre><code>static std::vector&lt;mongo::HostAndPort&gt; hosts = { mongo::HostAndPort(\"xxxxxxxx-a0.mlab.com:xxxxx\"), mongo::HostAndPort(\"xxxxxxxx-a1.mlab.com:xxxxx\") };\nstatic mongo::DBClientReplicaSet con(\"rs-xxxxxxxx\", hosts, 0);\n\n\nstd::string errmsg;\nmongo::client::initialize();\ncon.connect();\ncon.auth(\"dbname\", \"userid\", \"password\", errmsg);\n</code></pre>\n\n<p>I compiled the code with no problem. The exe couldn't start in bebug mode, giving error 0xc000a200. I was not able to debug at all. In release mode, it stopped right at starting-up. I noticed there was a boost warning in the console:</p>\n\n<pre><code>Assertion failed: px != 0, file C:\\Boost\\include\\boost-1_62\\boost/smart_ptr/scoped_ptr.hpp, line 105\n</code></pre>\n\n<p>And there was an error popup:</p>\n\n<p><a href=\"https://i.stack.imgur.com/EJ988.gif\" rel=\"nofollow\">MongoDB C++ Legacy Driver Error</a></p>\n\n<p>I was able to choose debug and here is where the program stopped - the last line of replica_set_monitor.cpp:</p>\n\n<pre><code>void ReplicaSetMonitor::createIfNeeded(const string&amp; name, const set&lt;HostAndPort&gt;&amp; servers) {\n    LOG(3) &lt;&lt; \"ReplicaSetMonitor::createIfNeeded \" &lt;&lt; name;\n    boost::lock_guard&lt;boost::mutex&gt; lk(setsLock);\n    ReplicaSetMonitorPtr&amp; m = sets[name];\n    if (!m)\n        m = boost::make_shared&lt;ReplicaSetMonitor&gt;(name, servers);\n    // Don't need to hold the lifetime lock for safeGo as\n    // 1) we assume the monitor is created as the contract of this class is such that initialize()\n    //    must have been called.\n    // 2) replicaSetMonitorWatcher synchronizes safeGo internally using the _monitorMutex\n    replicaSetMonitorWatcher-&gt;safeGo();\n}\n</code></pre>\n\n<p>Please help! Thanks a lot!</p>\n"}, {"tags": ["c++", "vector", "assertion"], "comments": [{"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1476902353, "post_id": 40138982, "comment_id": 67548084, "body": "When <code>monsters.empty()</code> you return <code>monsters.begin()</code>, which happens to coincide with <code>monsters.end()</code>."}, {"owner": {"reputation": 11117, "user_id": 1554020, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/49118fbd7e64a00bc99b19d41e5e28e0?s=128&d=identicon&r=PG", "display_name": "yuri kilochek", "link": "https://stackoverflow.com/users/1554020/yuri-kilochek"}, "reply_to_user": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1476902716, "post_id": 40138982, "comment_id": 67548287, "body": "@user58697,  no, <code>!monsters.empty()</code> check before call ensures it doesn&#39;t."}, {"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "reply_to_user": {"reputation": 11117, "user_id": 1554020, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/49118fbd7e64a00bc99b19d41e5e28e0?s=128&d=identicon&r=PG", "display_name": "yuri kilochek", "link": "https://stackoverflow.com/users/1554020/yuri-kilochek"}, "edited": false, "score": 0, "creation_date": 1476903050, "post_id": 40138982, "comment_id": 67548480, "body": "@yurikilochek <code>!monsters.empty()</code> only protects the loop. I am talking about <code>return monsters.begin()</code> at the end of <code>TryAttack</code>. An attempt to erase it is fatal, if monsters are empty."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 3, "creation_date": 1476903122, "post_id": 40138982, "comment_id": 67548516, "body": "Why do you return <code>monsters.begin()</code> if a monster is not found? The typical thing to do would be to return <code>monsters.end()</code>."}, {"owner": {"reputation": 11117, "user_id": 1554020, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/49118fbd7e64a00bc99b19d41e5e28e0?s=128&d=identicon&r=PG", "display_name": "yuri kilochek", "link": "https://stackoverflow.com/users/1554020/yuri-kilochek"}, "reply_to_user": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1476903296, "post_id": 40138982, "comment_id": 67548609, "body": "@user58697, <code>!monsters.empty()</code> <i>before call</i> to <code>hero.TryAttack(monsters)</code>. In there, <code>monsters</code> is never empty, thus <code>monsters.begin() != monsters.end()</code>"}, {"owner": {"reputation": 25, "user_id": 7043946, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/875084072626687/picture?type=large", "display_name": "Karol Drach", "link": "https://stackoverflow.com/users/7043946/karol-drach"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1476904778, "post_id": 40138982, "comment_id": 67549482, "body": "@Galik i wrote in comment that&#39;s it simplification for tests"}], "answers": [{"comments": [{"owner": {"reputation": 11117, "user_id": 1554020, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/49118fbd7e64a00bc99b19d41e5e28e0?s=128&d=identicon&r=PG", "display_name": "yuri kilochek", "link": "https://stackoverflow.com/users/1554020/yuri-kilochek"}, "reply_to_user": {"reputation": 25, "user_id": 7043946, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/875084072626687/picture?type=large", "display_name": "Karol Drach", "link": "https://stackoverflow.com/users/7043946/karol-drach"}, "edited": false, "score": 0, "creation_date": 1476907203, "post_id": 40139758, "comment_id": 67550866, "body": "@KarolDrach what doesn&#39;t?"}, {"owner": {"reputation": 25, "user_id": 7043946, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/875084072626687/picture?type=large", "display_name": "Karol Drach", "link": "https://stackoverflow.com/users/7043946/karol-drach"}, "edited": false, "score": 0, "creation_date": 1476908207, "post_id": 40139758, "comment_id": 67551479, "body": "same problem occurs. in other forum someone advice me to use"}, {"owner": {"reputation": 25, "user_id": 7043946, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/875084072626687/picture?type=large", "display_name": "Karol Drach", "link": "https://stackoverflow.com/users/7043946/karol-drach"}, "edited": false, "score": 0, "creation_date": 1476908214, "post_id": 40139758, "comment_id": 67551482, "body": "if(!monsters.empty())  {                     auto it = hero.TryAttack(monsters);                     if(it != monsters.end())                     monsters.erase(); }"}, {"owner": {"reputation": 25, "user_id": 7043946, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/875084072626687/picture?type=large", "display_name": "Karol Drach", "link": "https://stackoverflow.com/users/7043946/karol-drach"}, "edited": false, "score": 0, "creation_date": 1476908271, "post_id": 40139758, "comment_id": 67551508, "body": "and it&#39;s not crashing, but working a bit weird, i need to research it deeper :D"}], "tags": [], "owner": {"reputation": 11117, "user_id": 1554020, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/49118fbd7e64a00bc99b19d41e5e28e0?s=128&d=identicon&r=PG", "display_name": "yuri kilochek", "link": "https://stackoverflow.com/users/1554020/yuri-kilochek"}, "is_accepted": false, "score": 0, "last_activity_date": 1476904541, "creation_date": 1476904541, "answer_id": 40139758, "question_id": 40138982, "link": "https://stackoverflow.com/questions/40138982/c-vector-erase-dont-understand/40139758#40139758", "title": "C++ vector, erase don&#39;t understand", "body": "<pre><code>Hero::TryAttack(vector &lt;Mob*&gt; monsters)\n</code></pre>\n\n<p>You are passing <code>monsters</code> by value. Returned iterator refers to nonexistent copy of the vector. Pass it by reference:</p>\n\n<pre><code>Hero::TryAttack(vector &lt;Mob*&gt;&amp; monsters)\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7043946, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/875084072626687/picture?type=large", "display_name": "Karol Drach", "link": "https://stackoverflow.com/users/7043946/karol-drach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1476904541, "creation_date": 1476901670, "question_id": 40138982, "link": "https://stackoverflow.com/questions/40138982/c-vector-erase-dont-understand", "title": "C++ vector, erase don&#39;t understand", "body": "<p>Hi in my project that's roguelike RPG im using vector to keep polymorphic indicators to all monsters, parts of abstract class Mob. The problem is during fight - there's a function that return iterator selecting nob that we are attacking(i skipped for tests that in case here's no monster it returns begin of vector).</p>\n\n<pre><code>   vector&lt;Mob*&gt;::iterator Hero::TryAttack(vector &lt;Mob*&gt; monsters)\n{\n    int trying_x = pos_x, trying_y = pos_y;\n    switch (DIR)\n    {\n        case UP: trying_y--;\n        case DOWN: trying_y++;\n        case LEFT: trying_x--;\n        case RIGHT: trying_x++;\n    }\n\n    if (!monsters.empty())\n    {\n        for (vector &lt;Mob*&gt;::iterator i = monsters.begin(); i != monsters.end(); i++)\n        {\n            if ((*i)-&gt;pos_x == trying_x &amp;&amp; (*i)-&gt;pos_y == trying_y)\n            {\n                return i;\n            }\n        }\n    }\n\n    return monsters.begin();\n}\n</code></pre>\n\n<p>and when i calling that function here:</p>\n\n<pre><code>switch (hero.CheckAction())\n        {\n            case ATTACK:\n            {\n                //delete rat3;\n                if(!monsters.empty()) \n                    monsters.erase(hero.TryAttack(monsters));\n\n                test_map.Draw(monsters, NPCs);\n                break;\n            }\n            default: break;\n        }\n</code></pre>\n\n<p>there's poping assertion failure: \n<a href=\"https://i.stack.imgur.com/8FIVq.png\" rel=\"nofollow\">img</a></p>\n\n<p>i understand that erase returns next element after deleted but how can i delete that only one existing element in vector?</p>\n"}, {"tags": ["c++", "qt", "opengl", "qgraphicsview", "qglwidget"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 4560419, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T0ZRD9vg054/AAAAAAAAAAI/AAAAAAAAAYQ/2Kod8DmUPvE/photo.jpg?sz=128", "display_name": "David Osipyan", "link": "https://stackoverflow.com/users/4560419/david-osipyan"}, "is_accepted": false, "score": 1, "last_activity_date": 1505236879, "creation_date": 1505236879, "answer_id": 46182247, "question_id": 40138975, "link": "https://stackoverflow.com/questions/40138975/using-a-qglwidget-as-the-viewport-for-qgraphicsview-results-in-black-screen/46182247#46182247", "title": "Using a QGLWidget as the viewport for QGraphicsView results in black screen", "body": "<p>Try OpenGLES with version and surface format specification:</p>\n\n<pre><code>QCoreApplication::setAttribute(Qt::AA_UseOpenGLES);\nQSurfaceFormat format;\nformat.setVersion(2, 0);\nformat.setProfile(QSurfaceFormat::NoProfile);\nformat.setSwapInterval(1);\nformat.setSwapBehavior(QSurfaceFormat::DoubleBuffer);\nQSurfaceFormat::setDefaultFormat(format);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 186, "user_id": 8671637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08a6a237099616b6a3d6ea854e995c75?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Fraser", "link": "https://stackoverflow.com/users/8671637/joshua-fraser"}, "is_accepted": true, "score": 2, "last_activity_date": 1506363881, "creation_date": 1506363881, "answer_id": 46411818, "question_id": 40138975, "link": "https://stackoverflow.com/questions/40138975/using-a-qglwidget-as-the-viewport-for-qgraphicsview-results-in-black-screen/46411818#46411818", "title": "Using a QGLWidget as the viewport for QGraphicsView results in black screen", "body": "<p>When drawing a QPixmap to a QGLWidget, OpenGL textures are used.  The OpenGL platform will have a maximum texture size, and most likely your image is exceeding this limit.</p>\n\n<p>An easy fix is to subdivide the pixmap into smaller tiles, add them to the QGraphicsScene, then group them:</p>\n\n<pre><code>QPixmap pixmap(\":/images/chart.png\");\nQSize tileSize(512, 512);\nQList&lt;QGraphicsItem *&gt; tiles;\nfor(int y = 0; y &lt; pixmap.height(); y += tileSize.height())\n{\n    for(int x = 0; x &lt; pixmap.width(); x+= tileSize.width())\n    {\n        int w = qMin(tileSize.width(), pixmap.width() - x);\n        int h = qMin(tileSize.height(), pixmap.height() - y);\n\n        QGraphicsItem *tile = scene-&gt;addPixmap(pixmap.copy(x, y, w, h));\n        tile-&gt;setPos(x, y);\n        tiles.append(tile);\n      }\n }\n QGraphicsItem *pixmapItem = scene-&gt;createItemGroup(tiles);\n</code></pre>\n\n<p>This results in <code>pixmapItem</code> pointing to a group of pixmaps that can be treated as a single unit. Be sure to choose a suitable tile size smaller than the maximum texture size.</p>\n"}], "owner": {"reputation": 534, "user_id": 4625961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a00278768e0ed82cb846fff48c95c48b?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4625961/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1042, "favorite_count": 0, "accepted_answer_id": 46411818, "answer_count": 2, "score": 3, "last_activity_date": 1506363881, "creation_date": 1476901644, "last_edit_date": 1480516079, "question_id": 40138975, "link": "https://stackoverflow.com/questions/40138975/using-a-qglwidget-as-the-viewport-for-qgraphicsview-results-in-black-screen", "title": "Using a QGLWidget as the viewport for QGraphicsView results in black screen", "body": "<p>I have a QGraphicsView displaying a QGraphicsScene which I would like to use a QGLWidget as the viewport for. The Qt <a href=\"http://doc.qt.io/qt-4.8/qgraphicsview.html#details\" rel=\"nofollow noreferrer\">documentation</a> leads me to believe that it is a simple as giving my QGraphicsScene a QGLWidget as a viewport, however I get a black screen when I try.</p>\n\n<pre><code>#include &lt;QGraphicsView&gt;\n#include &lt;QGraphicsScene&gt;\n#include &lt;QGraphicsPixmapItem&gt;\n#include &lt;QGLWidget&gt;\n\nclass View : public QGraphicsView\n{\n  Q_OBJECT\npublic:\n  explicit View(QWidget *parent = 0) :\n    QGraphicsView(parent)\n  {\n    QGraphicsPixmapItem *pixmapItem = new QGraphicsPixmapItem(QPixmap(\":/images/chart.png\"));\n\n    QGraphicsScene *scene = new QGraphicsScene();\n    scene-&gt;addItem(pixmapItem);\n    setScene(scene);\n\n    setViewport(new QGLWidget());\n  }\n};\n</code></pre>\n\n<p>If I comment the last to lines pertaining to the QGLWidget then my pixmap displays fine, however with them in I only see a black screen. I have also noticed that the CPU usage is significantly higher when the QGLWidget is in. I have successfully used QGLWidgets in the past (never with a QGraphicsView though) so I think that OpenGL itself is working correctly. I have tried changed the gl clear color to try to see a change but it remains black. I have also tried it using both Qt 4 and Qt 5.</p>\n"}, {"tags": ["c++", "c++11", "tbb"], "answers": [{"tags": [], "owner": {"reputation": 5833, "user_id": 2527797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83539ee8bca535eca6c4be5c856a738d?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/2527797/anton"}, "is_accepted": false, "score": 3, "last_activity_date": 1476912223, "creation_date": 1476912223, "answer_id": 40141751, "question_id": 40138885, "link": "https://stackoverflow.com/questions/40138885/tbb-error-when-compiling/40141751#40141751", "title": "TBB error when compiling", "body": "<p>I can see this file in TBB repo: <a href=\"https://github.com/01org/tbb/blob/tbb_2017/include/tbb/internal/_flow_graph_types_impl.h\" rel=\"nofollow\">https://github.com/01org/tbb/blob/tbb_2017/include/tbb/internal/_flow_graph_types_impl.h</a></p>\n\n<p>Please make sure that your installation of TBB is not damaged.</p>\n\n<p>Off-topic advice, there is a data-race in your program on <code>sum</code> and you can use lambda instead of explicit functor:</p>\n\n<pre><code>int main(int argc, const char * argv[]) {\n    float arr[4] = {1,3,9,27};\n    atomic&lt;float&gt; sum = 0; // fixing data-race. Still, it's not recommended way\n    parallel_for(0, 4, [&amp;](int i){\n        sum += arr[i];\n    });\n    cout&lt;&lt; sum &lt;&lt; endl;  \n}\n</code></pre>\n\n<p>See also <code>tbb::parallel_reduce</code> in order to make this code correct, clean, and efficient.</p>\n"}], "owner": {"reputation": 1709, "user_id": 5213120, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/70ab781433d14a77c6cc433a2733b54f?s=128&d=identicon&r=PG&f=1", "display_name": "RRP", "link": "https://stackoverflow.com/users/5213120/rrp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1476912223, "creation_date": 1476901341, "question_id": 40138885, "link": "https://stackoverflow.com/questions/40138885/tbb-error-when-compiling", "title": "TBB error when compiling", "body": "<p>I have the following piece of code that i am trying to execute</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n#include \"tbb/tbb.h\"\n\nusing namespace std;\nusing namespace tbb;\n\nclass Accumulate{\n    float&amp; arr;\n    float* src;\n\n    public:\n    Accumulate(float&amp; _arr, float* _src)\n    :arr(_arr), src(_src){}\n    void operator() (int i) const{\n        arr += src[i];\n    }\n\n};\n\nint main(int argc, const char * argv[]) {\n    float arr[4] = {1,3,9,27};\n    float sum = 0;\n    parallel_for(0, 4, Accumulate(sum, arr));\n    cout&lt;&lt; sum &lt;&lt; endl;  \n}\n</code></pre>\n\n<p>I am trying to make use of <strong>parllel_for</strong> to calculate the sum and this requires the tbb library. I downloaded the source tbb directory and pasted it in my xcode project directory.</p>\n\n<p>When i try to compile the above code, i seem to get the following error\n<strong>'tbb/internal/_flow_graph_types_impl.h' file not found</strong></p>\n\n<p>I am not sure what i am missing, please advise</p>\n"}, {"tags": ["c++", "file", "binary"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1476901267, "post_id": 40138782, "comment_id": 67547364, "body": "The right tool to solve such problems is your debugger. You should step through your code line-by-line <i>before</i> asking on Stack Overflow. For more help, please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (by Eric Lippert)</a>. At a minimum, you should &#91;edit] your question to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example that reproduces your problem, along with the observations you made in the debugger."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 4, "creation_date": 1476901270, "post_id": 40138782, "comment_id": 67547367, "body": "You should close the output file stream before opening the input one (wrap the read / write instructions in a scope to trigger the destructor of the filestream). Most likely the read ops are failing. (Either way, checking that the filestream is valid and that the read ops succeeded is always a good place to start)"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1476904340, "post_id": 40138782, "comment_id": 67549245, "body": "You could use one binary write statement:  <code>binaryFile.write((char *) &amp;cat, sizeof(cat));</code>.  If there is any padding between the variables, this write will contain the padding.  It may be worth sacrificing some space for a more efficient method."}, {"owner": {"reputation": 11, "user_id": 7043919, "user_type": "registered", "profile_image": "https://graph.facebook.com/1210213718990169/picture?type=large", "display_name": "Jeremy Warren", "link": "https://stackoverflow.com/users/7043919/jeremy-warren"}, "edited": false, "score": 0, "creation_date": 1477090648, "post_id": 40138782, "comment_id": 67640645, "body": "Borgleader, that was it! I just needed to close the output filestream first, and that made it work perfectly. I never would have figured that out. Thank you! I would +1 your comment but it&#39;s not letting me because my question was put on hold. Sorry."}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1477114619, "post_id": 40138782, "comment_id": 67644392, "body": "<code>sizeof(char[50])</code> is hilarious (useless use of cat); it&#39;s just <code>50</code>.  Better would be <code>sizeof(cat.name)</code>."}, {"owner": {"reputation": 11, "user_id": 7043919, "user_type": "registered", "profile_image": "https://graph.facebook.com/1210213718990169/picture?type=large", "display_name": "Jeremy Warren", "link": "https://stackoverflow.com/users/7043919/jeremy-warren"}, "reply_to_user": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1477871524, "post_id": 40138782, "comment_id": 67925052, "body": "@John Zwinck. Thanks. Still new to a lot of this."}], "owner": {"reputation": 11, "user_id": 7043919, "user_type": "registered", "profile_image": "https://graph.facebook.com/1210213718990169/picture?type=large", "display_name": "Jeremy Warren", "link": "https://stackoverflow.com/users/7043919/jeremy-warren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1477114371, "creation_date": 1476901019, "last_edit_date": 1477090925, "question_id": 40138782, "link": "https://stackoverflow.com/questions/40138782/writing-and-reading-from-a-binary-file", "title": "Writing and reading from a binary file", "body": "<p>I'm trying to learn how to write to a binary file and then read the info back into variables. I'm trying to make the info in c3 &amp; c4 the same as c1 &amp; c2 by having it read from the binary file. I've searched and tried for many hours, but I can't figure out what else I'm doing wrong. Please help.</p>\n\n<pre><code>#include &lt;cstring&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nstruct Cat {\n    char name[50];\n    int age;\n};\n\n//----- TEXT I/O -----//\nvoid display(Cat&amp; cat) {\n    cout &lt;&lt; cat.name &lt;&lt; endl;\n    cout &lt;&lt; cat.age &lt;&lt; endl;\n}\n\n//----- BINARY I/O -----//\nvoid writeBinaryData(ofstream&amp; binaryFile, Cat&amp; cat) {\n    binaryFile.write(cat.name, sizeof(char[50]));\n    binaryFile.write(reinterpret_cast&lt;char*&gt;(&amp;cat.age), sizeof(int));\n}\n\nvoid readBinaryData(ifstream&amp; binaryFile, Cat&amp; cat) {\n    binaryFile.read(cat.name, sizeof(char[50]));\n    binaryFile.read(reinterpret_cast&lt;char *&gt;(&amp;cat.age), sizeof(int));\n}\n\nint main() {\n    Cat c1, c2, c3, c4;\n    // c1's name is Ben and age is 2\n    strcpy(c1.name, \"Ben\");\n    c1.age = 2;\n    // c2's name is Willard and age is 3\n    strcpy(c2.name, \"Willard\");\n    c2.age = 3;\n    // display c1 &amp; c2\n    display(c1);\n    display(c2);\n    // read and write c1 &amp; c2 to binary data file\n    ofstream binOut(\"catfarm.bin\", ios::out | ios::binary);\n    writeBinaryData(binOut, c1);\n    writeBinaryData(binOut, c2);\n    // read from binary file into c3 &amp; c4\n    ifstream binIn(\"catfarm.bin\", ios::in | ios::binary);\n    readBinaryData(binIn, c3);\n    readBinaryData(binIn, c4);\n    display(c3);\n    display(c4);\n    return 0;\n}\n</code></pre>\n\n<p>Right now the output looks like this:</p>\n\n<pre><code>Ben\n2\nWillard\n3\n\n32701\n\n32701\n</code></pre>\n\n<p>But it should look like this:</p>\n\n<pre><code>Ben\n2\nWillard\n3\nBen\n2\nWillard\n3\n</code></pre>\n"}, {"tags": ["c++", "design-patterns", "stl", "c++14"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 2, "creation_date": 1476901029, "post_id": 40138774, "comment_id": 67547216, "body": "What&#39;s wrong with a smart pointer?"}, {"owner": {"reputation": 2648, "user_id": 318904, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fa2a1bf085f9aa77a5e8a429dbaad0de?s=128&d=identicon&r=PG", "display_name": "user318904", "link": "https://stackoverflow.com/users/318904/user318904"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1476901160, "post_id": 40138774, "comment_id": 67547288, "body": "There is nothing wrong with a smart pointer, I want to know if there is a way  that requires less engineering."}, {"owner": {"reputation": 11973, "user_id": 1419315, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e13603f86a9561d16a944963943fb8a9?s=128&d=identicon&r=PG", "display_name": "JohnB", "link": "https://stackoverflow.com/users/1419315/johnb"}, "edited": false, "score": 1, "creation_date": 1476901391, "post_id": 40138774, "comment_id": 67547455, "body": "<code>set&lt;unique_ptr&lt;my_type&gt;&gt; s; s.insert (make_unique&lt;my_type&gt; (...));</code> does not seem more engineering to me than your code."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1476901534, "post_id": 40138774, "comment_id": 67547543, "body": "You mean <code>std::set&lt;my_type*&gt; s;</code>, yes?"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1476901562, "post_id": 40138774, "comment_id": 67547562, "body": "@user318904 Smart pointers are in c++14, so as JohnB points out it&#39;s hardly any engineering. Subclassing the standard collection classes is <a href=\"http://stackoverflow.com/questions/6806173/subclass-inherit-standard-containers\">seldom the correct approach</a>."}, {"owner": {"reputation": 11973, "user_id": 1419315, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e13603f86a9561d16a944963943fb8a9?s=128&d=identicon&r=PG", "display_name": "JohnB", "link": "https://stackoverflow.com/users/1419315/johnb"}, "edited": false, "score": 0, "creation_date": 1476901587, "post_id": 40138774, "comment_id": 67547582, "body": "No, I mean <code>std::set&lt;std::unique_ptr&lt;my_type&gt;&gt; s;</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 11973, "user_id": 1419315, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e13603f86a9561d16a944963943fb8a9?s=128&d=identicon&r=PG", "display_name": "JohnB", "link": "https://stackoverflow.com/users/1419315/johnb"}, "edited": false, "score": 0, "creation_date": 1476901644, "post_id": 40138774, "comment_id": 67547623, "body": "Sorry, @JohnB that comment was meant for OP. It looked like they&#39;d left out the <code>*</code> in the question"}, {"owner": {"reputation": 11973, "user_id": 1419315, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e13603f86a9561d16a944963943fb8a9?s=128&d=identicon&r=PG", "display_name": "JohnB", "link": "https://stackoverflow.com/users/1419315/johnb"}, "edited": false, "score": 0, "creation_date": 1476901649, "post_id": 40138774, "comment_id": 67547628, "body": "@user318904: I guess what you really want is a <code>std::set&lt;my_type&gt;</code>, or even a <code>std::vector&lt;my_type&gt;</code> and use <code>emplace</code>."}], "answers": [{"tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 6, "last_activity_date": 1476901537, "last_edit_date": 1495540839, "creation_date": 1476901537, "answer_id": 40138941, "question_id": 40138774, "link": "https://stackoverflow.com/questions/40138774/custom-erase-for-c-set-or-other-collection/40138941#40138941", "title": "Custom erase for c++ set or other collection", "body": "<p>Your <code>set</code> is declared to store <code>my_type</code>, but you're sending it <code>my_type*</code>, so the code is inconsistent as is. In any event, if you don't need heap allocation, don't use it:</p>\n\n<pre><code>std::set&lt;my_type&gt; s;\n\n// Emplace improves on s.insert(my_type(...)); by allowing construction in place\n// to minimize move/copy work\ns.emplace(...args for my_type...);\n...\ns.erase(...);\n</code></pre>\n\n<p>With no heap allocation, your <code>my_type</code> destructor is called and no <code>delete</code> is needed for its own structure (or more precisely, <code>set</code> manages that internally).</p>\n\n<p>If you need heap allocation, use smart pointers so deletion implies freeing (and <a href=\"https://stackoverflow.com/q/22571202/364696\"><code>std::make_unique</code> makes this cleaner and lets you completely avoid all use of <code>new</code> and <code>delete</code></a>):</p>\n\n<pre><code>std::set&lt;std::unique_ptr&lt;my_type&gt;&gt; s;\n\ns.insert(std::make_unique&lt;my_type&gt;(...));\n...\ns.erase(...);\n</code></pre>\n"}], "owner": {"reputation": 2648, "user_id": 318904, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fa2a1bf085f9aa77a5e8a429dbaad0de?s=128&d=identicon&r=PG", "display_name": "user318904", "link": "https://stackoverflow.com/users/318904/user318904"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 40138941, "answer_count": 1, "score": -1, "last_activity_date": 1476902530, "creation_date": 1476900972, "last_edit_date": 1476902530, "question_id": 40138774, "link": "https://stackoverflow.com/questions/40138774/custom-erase-for-c-set-or-other-collection", "title": "Custom erase for c++ set or other collection", "body": "<p>I want to do something like this:</p>\n\n<pre><code>std::set&lt;my_type*&gt; s;\n\ns.insert(new my_type(...));\n...\ns.erase(...);\n</code></pre>\n\n<p>Where the set's erase will delete the pointer to avoid a memory leak.</p>\n\n<p>Is this possible with C++ containers or would the proper solution be to subclass the container and write my own erase, or use some sort of smart pointer scheme?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1476900690, "post_id": 40138665, "comment_id": 67547035, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow noreferrer\">here</a> is a list of all the operators and their precedence."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1476900744, "post_id": 40138665, "comment_id": 67547071, "body": "It is is really overloaded for multiplication and pointing, it is rather already built into the language."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1476900772, "post_id": 40138665, "comment_id": 67547088, "body": "<code>T* x = nullptr;</code> <code>4 * 2</code>; <code>*x = a;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 212, "user_id": 6881791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b48ea546905ef3c14ffc721d54f7eec?s=128&d=identicon&r=PG&f=1", "display_name": "Xavier Imbs", "link": "https://stackoverflow.com/users/6881791/xavier-imbs"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1476901052, "post_id": 40138684, "comment_id": 67547230, "body": "Are not .* and -&gt;* each considered as two separate operators? You can&#39;t for example write <code>operator.*</code>... for overloading. Or can you? just starting my c++"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1476901319, "post_id": 40138684, "comment_id": 67547404, "body": "according to <a href=\"http://en.cppreference.com/w/cpp/language/operator_member_access#Built-in_pointer-to-member_access_operators\" rel=\"nofollow noreferrer\">this</a> they are built in operators.  <code>.*</code> is not overloadable but <code>-&gt;*</code> <a href=\"http://coliru.stacked-crooked.com/a/d4e58ab92a9c91fb\" rel=\"nofollow noreferrer\">is</a>"}], "tags": [], "owner": {"reputation": 212, "user_id": 6881791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b48ea546905ef3c14ffc721d54f7eec?s=128&d=identicon&r=PG&f=1", "display_name": "Xavier Imbs", "link": "https://stackoverflow.com/users/6881791/xavier-imbs"}, "is_accepted": false, "score": 3, "last_activity_date": 1476900979, "last_edit_date": 1476900979, "creation_date": 1476900671, "answer_id": 40138684, "question_id": 40138665, "link": "https://stackoverflow.com/questions/40138665/in-c-the-is-used-for-what-three-things/40138684#40138684", "title": "In C++, the * is used for what three things?", "body": "<p>When used as the pointer dereference operator it is a unary operator.</p>\n\n<p>This is because in that context, it only takes one argument, namely the pointer.</p>\n\n<p>You do see * in 5 contexts (other than quoted strings):</p>\n\n<ol>\n<li>as a multiplication operator</li>\n<li>as pointer deference</li>\n<li>as multiplication assignment *=</li>\n<li>to form part of a type; e.g. int*</li>\n<li>as part of /* and */ comment blocks</li>\n</ol>\n\n<p>In (1) and (2) and (3), it is acting as an operator. C++ allows you to overload operators.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1476921290, "post_id": 40142883, "comment_id": 67556595, "body": "In case 1, it is not an operator"}], "tags": [], "owner": {"reputation": 1754, "user_id": 4605946, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/pNIMp.png?s=128&g=1", "display_name": "space_voyager", "link": "https://stackoverflow.com/users/4605946/space-voyager"}, "is_accepted": false, "score": 0, "last_activity_date": 1476918203, "creation_date": 1476918203, "answer_id": 40142883, "question_id": 40138665, "link": "https://stackoverflow.com/questions/40138665/in-c-the-is-used-for-what-three-things/40142883#40142883", "title": "In C++, the * is used for what three things?", "body": "<p>From what I know:</p>\n\n<ol>\n<li><p>First use: to declare a pointer:</p>\n\n<pre><code>int * ap;\n</code></pre>\n\n<p><code>ap</code> is an integer pointer.</p></li>\n<li>To dereference a pointer. <code>*ap</code> gives the value stores at the address pointer to by the pointer <code>ap</code>.</li>\n<li>Multiplication, e.g. <code>int a = 5*2;</code></li>\n</ol>\n"}], "owner": {"reputation": 23, "user_id": 3894291, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000091168546/picture?type=large", "display_name": "Luke Knoble", "link": "https://stackoverflow.com/users/3894291/luke-knoble"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1476918203, "creation_date": 1476900592, "last_edit_date": 1476902577, "question_id": 40138665, "link": "https://stackoverflow.com/questions/40138665/in-c-the-is-used-for-what-three-things", "title": "In C++, the * is used for what three things?", "body": "<p>I know the <code>*</code> operator is overloaded for multiplication and pointing.\nIs the 3rd use uniary? If so, could someone elaborate?</p>\n"}, {"tags": ["c++", "class", "c++11", "constructor", "copy-constructor"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1476899947, "post_id": 40138402, "comment_id": 67546601, "body": "Post the actual error.  Your ctor is probably complaining that it should be <code>const int i</code>;"}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 1, "creation_date": 1476900076, "post_id": 40138402, "comment_id": 67546678, "body": "You explicitly asked for it by not using the initializer list."}], "answers": [{"comments": [{"owner": {"reputation": 281, "user_id": 2291607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-MOesXADfOSc/AAAAAAAAAAI/AAAAAAAAABw/nAtt1gV9iI8/photo.jpg?sz=128", "display_name": "Abhinav Vishak", "link": "https://stackoverflow.com/users/2291607/abhinav-vishak"}, "edited": false, "score": 0, "creation_date": 1476900523, "post_id": 40138477, "comment_id": 67546934, "body": "Well the issue is not so much with <code>obj_a = a</code> . Its the <code>A a</code> inside the parameter list. How do I fix that ?"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 281, "user_id": 2291607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-MOesXADfOSc/AAAAAAAAAAI/AAAAAAAAABw/nAtt1gV9iI8/photo.jpg?sz=128", "display_name": "Abhinav Vishak", "link": "https://stackoverflow.com/users/2291607/abhinav-vishak"}, "edited": false, "score": 1, "creation_date": 1476900706, "post_id": 40138477, "comment_id": 67547046, "body": "@AbhinavVishak <code>A a</code> is <b>not</b> the problem when it&#39;s in the parameter list. The problem is the lack of <code>obj_a</code> in the mem-initialiser list (the list following the <code>:</code>)."}, {"owner": {"reputation": 281, "user_id": 2291607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-MOesXADfOSc/AAAAAAAAAAI/AAAAAAAAABw/nAtt1gV9iI8/photo.jpg?sz=128", "display_name": "Abhinav Vishak", "link": "https://stackoverflow.com/users/2291607/abhinav-vishak"}, "edited": false, "score": 0, "creation_date": 1476902753, "post_id": 40138477, "comment_id": 67548310, "body": "@agnew I did the changes you suggested, and it compiles. Thanks ! I&#39;m still a bit confused about the use of initializer lists, wil do some reading on that. I assume that after using the ` : obj_a{a} ` , i wont need the <code>obj_a = a</code> ??"}], "tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": false, "score": 3, "last_activity_date": 1476899907, "creation_date": 1476899907, "answer_id": 40138477, "question_id": 40138402, "link": "https://stackoverflow.com/questions/40138402/constructors-with-objects-as-parameters/40138477#40138477", "title": "Constructors with objects as parameters", "body": "<p><code>obj_a = a</code> calls <code>operator=</code>, not the copy constructor. The thing is, <code>obj_a</code> is initialized using the default constructor, <em>because you haven't specified which constructor to call in the initializer list.</em></p>\n\n<pre><code>B( int j , A a ) /*: obj_a{}*/ { /*...*/ }\n                 ^^^^^^^^^^^^^\n          implicit call to default constructor\n</code></pre>\n\n<p>You have to explictly call the constructor with one argument in the member initialization list:</p>\n\n<pre><code>B( int j , A a ) : obj_a{ a } { /*...*/ }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 281, "user_id": 2291607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-MOesXADfOSc/AAAAAAAAAAI/AAAAAAAAABw/nAtt1gV9iI8/photo.jpg?sz=128", "display_name": "Abhinav Vishak", "link": "https://stackoverflow.com/users/2291607/abhinav-vishak"}, "edited": false, "score": 0, "creation_date": 1476904538, "post_id": 40139285, "comment_id": 67549362, "body": "is the object <code>a</code> created by value here ? Is it possible to pass by reference ?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 281, "user_id": 2291607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-MOesXADfOSc/AAAAAAAAAAI/AAAAAAAAABw/nAtt1gV9iI8/photo.jpg?sz=128", "display_name": "Abhinav Vishak", "link": "https://stackoverflow.com/users/2291607/abhinav-vishak"}, "edited": false, "score": 0, "creation_date": 1476912799, "post_id": 40139285, "comment_id": 67553733, "body": "@AbhinavVishak <code>a</code> is currently passed by value and probably requires a copy. Yes you can pass <code>a</code> by reference."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 3, "last_activity_date": 1476902776, "creation_date": 1476902776, "answer_id": 40139285, "question_id": 40138402, "link": "https://stackoverflow.com/questions/40138402/constructors-with-objects-as-parameters/40139285#40139285", "title": "Constructors with objects as parameters", "body": "<p>An object must be fully consistent, all of its members constructed, by the time it enters the body of the constructor. So in</p>\n\n<pre><code>B( int j , A a ){\n    y = j ; \n    obj_a = a ; \n}\n</code></pre>\n\n<p>before </p>\n\n<pre><code>{\n    y = j ; \n    obj_a = a ; \n}\n</code></pre>\n\n<p>gets a chance to do anything, <code>obj_a</code> must have been constructed. </p>\n\n<p>Since no instruction on how to construct <code>obj_a</code> has been provided with the <a href=\"http://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow\">Member Initializer List</a>, <code>obj_a</code> will be built with the default constructor for class <code>A</code>. Class <code>A</code> has no default constructor, no <code>A::A()</code>, so the error is raised.</p>\n\n<p>The solution is to use the Member Initializer List instead of assignment inside the body of the function. Not only does this save you construction of an object that will promptly be over written, the compiler also has more lee-way to optimize and you may get some other small improvements.</p>\n\n<p>Class <code>B</code> should be:</p>\n\n<pre><code>class B{\n    int y ; \n    A obj_a ; \n    B( int j , A a ): y(j), obj_a(a)\n    {\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 281, "user_id": 2291607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-MOesXADfOSc/AAAAAAAAAAI/AAAAAAAAABw/nAtt1gV9iI8/photo.jpg?sz=128", "display_name": "Abhinav Vishak", "link": "https://stackoverflow.com/users/2291607/abhinav-vishak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6156, "favorite_count": 0, "accepted_answer_id": 40139285, "answer_count": 2, "score": 1, "last_activity_date": 1476902776, "creation_date": 1476899664, "last_edit_date": 1476900467, "question_id": 40138402, "link": "https://stackoverflow.com/questions/40138402/constructors-with-objects-as-parameters", "title": "Constructors with objects as parameters", "body": "<p>Suppose I have a class as follows:</p>\n\n<pre><code>class A{\n    int x ; \n    A( int i ){\n        x = i ; \n    }\n}\n</code></pre>\n\n<p>And I have another class B which has an instance of class A as an member object.</p>\n\n<pre><code>class B{\n    int y ; \n    A obj_a ; \n    B( int j , A a ){\n        y = j ; \n        obj_a = a ; \n    }\n}\n</code></pre>\n\n<p>When I do the following :</p>\n\n<pre><code>int main(){\n        A obj1( 1 ) ; // obj.x has value 1\n        B obj2( 2 , obj1 ) ; \n    }\n</code></pre>\n\n<p>The 2nd line throws an error saying no function call of the form A::A(). I know this means that a default style constructor is missing , but why do I need this ? obj1 is created using the defined constructor so that isn't an issue.</p>\n\n<p>My current line of thought is that <code>A a</code> and <code>obj_a = a</code> would invoke the copy constructor which is implicitly defined.</p>\n\n<p>Note: I have excluded private,public etc for brevity.</p>\n"}, {"tags": ["c++", "clang"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1476903386, "post_id": 40138362, "comment_id": 67548654, "body": "Virtual destructors are strange?"}, {"owner": {"reputation": 27522, "user_id": 6394138, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/u64Lc.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6394138/leon"}, "edited": false, "score": 0, "creation_date": 1478863097, "post_id": 40138362, "comment_id": 68332055, "body": "Can&#39;t reproduce without an <code>inline</code>. Can you add a proof at an online compiler, similar to my attempt: <a href=\"https://godbolt.org/g/eDQcQL\" rel=\"nofollow noreferrer\">godbolt.org/g/eDQcQL</a>"}], "owner": {"reputation": 61, "user_id": 7043810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b5ffa98dea0131e422497c450b0d1b6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/7043810/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 428, "favorite_count": 0, "closed_date": 1493002463, "answer_count": 0, "score": 6, "last_activity_date": 1476901420, "creation_date": 1476899537, "last_edit_date": 1476901420, "question_id": 40138362, "link": "https://stackoverflow.com/questions/40138362/why-does-clang-give-a-weak-vtable-warning-for-a-class-that-has-an-out-of-line-vi", "closed_reason": "Duplicate", "title": "Why does clang give a weak-vtable warning for a class that has an out-of-line virtual method?", "body": "<p>Object.hpp:</p>\n\n<pre><code>class Object\n{  \npublic:\n    virtual ~Object();\n};\n</code></pre>\n\n<p>Object.cpp:</p>\n\n<pre><code>#include \"Object.hpp\"\n\nObject::~Object()\n{\n}\n</code></pre>\n\n<p>Let's compile it:</p>\n\n<pre><code>&gt;clang++ -v\nclang version 3.9.0 (branches/release_39)\nTarget: x86_64-pc-windows-msvc\nThread model: posix\n\n&gt;clang++ -Weverything -c Object.cpp\nIn file included from Object.cpp:1:\n./Object.hpp:1:7: warning: 'Object' has no out-of-line virtual method definitions;\nits vtable will be emitted in every translation unit [-Wweak-vtables]\nclass Object\n      ^\n1 warning generated.\n</code></pre>\n\n<p>But Object does have an out-of-line virtual method, so why is Clang producing this warning?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1476899540, "post_id": 40138325, "comment_id": 67546355, "body": "hmm.  global <code>int</code>s are zero initialized so I wonder if because of that it is legal."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1476899540, "post_id": 40138325, "comment_id": 67546356, "body": "Under the circumstances in which the language standard allowed this sort of syntax."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1476899665, "post_id": 40138325, "comment_id": 67546426, "body": "It&#39;s not very different from <a href=\"http://stackoverflow.com/questions/14935722/does-initialization-entail-lvalue-to-rvalue-conversion-is-int-x-x-ub\"><code>int x = x;</code></a>."}, {"owner": {"reputation": 6511, "user_id": 99089, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ge49Z.jpg?s=128&g=1", "display_name": "Paul J. Lucas", "link": "https://stackoverflow.com/users/99089/paul-j-lucas"}, "edited": false, "score": 1, "creation_date": 1476899692, "post_id": 40138325, "comment_id": 67546445, "body": "Why would it be an error? <code>kTest</code> has been declared by the point of use. Globals are <i>normally</i> initialized to 0, but since you are <i>manually</i> initializing it, it initializes with the zeroth element --- which is garbage since it&#39;s still in the process of initializing."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 6511, "user_id": 99089, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ge49Z.jpg?s=128&g=1", "display_name": "Paul J. Lucas", "link": "https://stackoverflow.com/users/99089/paul-j-lucas"}, "edited": false, "score": 0, "creation_date": 1476899747, "post_id": 40138325, "comment_id": 67546480, "body": "@PaulJ.Lucas: Unfortunately, the C++ standard has no notion of &quot;garbage&quot; :-S"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 4, "creation_date": 1476899890, "post_id": 40138325, "comment_id": 67546568, "body": "Is this actually the real code that produces the alleged &quot;garbage&quot;? Since this initialization is dynamic (given that the initializer is not a constant expression), <code>kTest</code> is guaranteed to be zero-initialized in the static phase."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1476900023, "post_id": 40138325, "comment_id": 67546649, "body": "The real fun begins when you make <code>kTest</code> into a <code>constexpr</code>. Then the magic UB-detector that is <code>constexpr</code> kicks in."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 2, "creation_date": 1476900305, "post_id": 40138325, "comment_id": 67546804, "body": "I think that this is formally UB only if the index in <code>kTest[...]</code> is equal to or larger than the number of entries in <code>kTest</code> (for example, if you used <code>kTest[5]</code> up there, without adding at least 5 more entries)."}, {"owner": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1476903580, "post_id": 40138325, "comment_id": 67548763, "body": "@KerrekSB No, this isn&#39;t the exact same code. It actually accessed another array at an <i>index</i> specified by the self-reference. And it was declared <code>static const</code>. I didn&#39;t think that stuff was overly relevant but maybe it was."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1477197938, "post_id": 40138325, "comment_id": 67664684, "body": "@KerrekSB note <a href=\"http://stackoverflow.com/q/34276373/1708801\">it is ill-formed</a> not UB so slightly different."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1477224900, "post_id": 40138325, "comment_id": 67670228, "body": "@ShafikYaghmour: I see, yes, but where does the ill-formedness come from? The issue resolution doesn&#39;t spell that out, it just seems kind of implied."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1477225289, "post_id": 40138325, "comment_id": 67670341, "body": "@ShafikYaghmour: I thought the ill-formedness you mention would be a consequence of [expr.const]/(2.6), because it <i>would</i> be UB to read an uninitialized variable."}], "answers": [{"comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 1, "creation_date": 1476900465, "post_id": 40138406, "comment_id": 67546895, "body": "This should be more than an opinion shouldn&#39;t it? Or is whether or it&#39;s UB not defined by the standard?"}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1476900883, "post_id": 40138406, "comment_id": 67547142, "body": "Could it be unspecified? I guess it is similar to this: <code>int x; x = x;</code>."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1476901054, "post_id": 40138406, "comment_id": 67547233, "body": "@Carcigenicate, I see in the C++11 standard where <code>int x = x;</code> is discussed but I can&#39;t find anything that talks about the OP&#39;s situation."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1477199581, "post_id": 40138406, "comment_id": 67664922, "body": "I am not so sure, if you look at <a href=\"http://stackoverflow.com/q/34276373/1708801\">Self-initialization of a static constexpr variable, is it well-formed?</a> as far as I can tell this should zero initialized."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 15, "last_activity_date": 1476902183, "last_edit_date": 1495542873, "creation_date": 1476899685, "answer_id": 40138406, "question_id": 40138325, "link": "https://stackoverflow.com/questions/40138325/c-self-referencing-array/40138406#40138406", "title": "C++ self-referencing array?", "body": "<pre><code>int kTest[] = {\n    kTest[0]\n};\n</code></pre>\n\n<p>is similar to, if not exactly same as</p>\n\n<pre><code>int x = x;\n</code></pre>\n\n<p>It will be undefined behavior, if declared locally in a function.</p>\n\n<p>It seems to be well defined when <code>kTest</code> is a global variable. See <a href=\"https://stackoverflow.com/a/40138652/434551\">the other answer</a> for additional details.</p>\n"}, {"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1476902044, "post_id": 40138652, "comment_id": 67547889, "body": "Your interpretation makes sense.<code>g++</code> did not complain about <code>int x = x;</code> when defined globally but complained when defined in a function."}, {"owner": {"reputation": 6511, "user_id": 99089, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ge49Z.jpg?s=128&g=1", "display_name": "Paul J. Lucas", "link": "https://stackoverflow.com/users/99089/paul-j-lucas"}, "edited": false, "score": 1, "creation_date": 1476906250, "post_id": 40138652, "comment_id": 67550320, "body": "Why do you assume that the OP&#39;s global initialization is dynamic? If I have <code>static int a[] = { 1 };</code> that is initialized statically only. <code>a[0]</code> is not initialized to 0 (statically) and then initialized again to 1 (dynamically)."}, {"owner": {"reputation": 15610, "user_id": 2456565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xa8D9.png?s=128&g=1", "display_name": "krzaq", "link": "https://stackoverflow.com/users/2456565/krzaq"}, "reply_to_user": {"reputation": 6511, "user_id": 99089, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ge49Z.jpg?s=128&g=1", "display_name": "Paul J. Lucas", "link": "https://stackoverflow.com/users/99089/paul-j-lucas"}, "edited": false, "score": 0, "creation_date": 1476906326, "post_id": 40138652, "comment_id": 67550371, "body": "@PaulJ.Lucas: <i>Together, zero-initialization and constant initialization are called static initialization; all other initialization is dynamic initialization.</i>"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 6511, "user_id": 99089, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ge49Z.jpg?s=128&g=1", "display_name": "Paul J. Lucas", "link": "https://stackoverflow.com/users/99089/paul-j-lucas"}, "edited": false, "score": 1, "creation_date": 1476906926, "post_id": 40138652, "comment_id": 67550720, "body": "@Paul J. Lucas: Becuase it is not zero-initialization and it does not satisfy requirements of constant-initialization. That immediately makes it dynamic. Your <code>static int a[] = { 1 };</code> example is completely different. However, conceptually it <b>is</b> actually processed in two stages: as zero-initialization followed by initialization with 1. Both stages are <i>static</i> initialization though. It is C++17 that decieded to get rid of the unnecessary zero-initializtion when constant-initialization is present."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1477199664, "post_id": 40138652, "comment_id": 67664935, "body": "See <a href=\"http://stackoverflow.com/questions/40138325/c-self-referencing-array#comment67664922_40138406\">my comment</a> I believe your interpretation is correct."}], "tags": [], "owner": {"reputation": 15610, "user_id": 2456565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xa8D9.png?s=128&g=1", "display_name": "krzaq", "link": "https://stackoverflow.com/users/2456565/krzaq"}, "is_accepted": false, "score": 8, "last_activity_date": 1476900534, "creation_date": 1476900534, "answer_id": 40138652, "question_id": 40138325, "link": "https://stackoverflow.com/questions/40138325/c-self-referencing-array/40138652#40138652", "title": "C++ self-referencing array?", "body": "<p>I'm not so sure this is undefined. Quote from the current <a href=\"http://eel.is/c++draft/basic.start\">draft</a>:</p>\n\n<blockquote>\n  <p>[basic.start.static]/3</p>\n  \n  <p>If constant initialization is not performed, a variable with static\n  storage duration ([basic.stc.static]) or thread storage duration\n  ([basic.stc.thread]) is zero-initialized ([dcl.init]). Together,\n  zero-initialization and constant initialization are called static\n  initialization; all other initialization is dynamic initialization.\n  <em>Static initialization shall be performed before any dynamic initialization takes place</em>.</p>\n</blockquote>\n\n<p>To me it looks like <code>kTest</code> is already zero-initialized when the dynamic initialization starts, so it may be defined to initialize to <code>0</code>.</p>\n"}], "owner": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 933, "favorite_count": 1, "accepted_answer_id": 40138406, "answer_count": 2, "score": 19, "last_activity_date": 1476906317, "creation_date": 1476899420, "last_edit_date": 1476906317, "question_id": 40138325, "link": "https://stackoverflow.com/questions/40138325/c-self-referencing-array", "title": "C++ self-referencing array?", "body": "<p>I accidentally created a bug in a program by self-referencing in an array. Here's a very simplified demo program similar in concept:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint kTest[] = {\n    kTest[0]\n};\n\nint main() {\n    cout &lt;&lt; kTest[0] &lt;&lt; endl;\n}\n</code></pre>\n\n<p>I was surprised that I received neither a compiler error or even a warning on this code! In my case it ended up producing unpredictable output. Is it accessing garbage memory?</p>\n\n<p>I was curious about under what circumstances this would have well-defined output (if ever!). </p>\n\n<p><strong>Edit</strong>: Does it make a difference if <code>kTest</code> is <code>static</code>? What about <code>const</code>? Both?</p>\n"}, {"tags": ["c++", "arrays", "algorithm", "math"], "comments": [{"owner": {"reputation": 6816, "user_id": 865481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0b2if.gif?s=128&g=1", "display_name": "Salix alba", "link": "https://stackoverflow.com/users/865481/salix-alba"}, "edited": false, "score": 0, "creation_date": 1476899936, "post_id": 40138318, "comment_id": 67546592, "body": "Would the individual scores always be positive? It would make a big difference to the problem."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1476900417, "post_id": 40138318, "comment_id": 67546866, "body": "Nice homework dump.  Have you talked with the instructor who issued the requirements?"}, {"owner": {"reputation": 39, "user_id": 7030159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0ae5cbe86a4e1df895e3173de81689d?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi Chandran", "link": "https://stackoverflow.com/users/7030159/ravi-chandran"}, "edited": false, "score": 0, "creation_date": 1476900710, "post_id": 40138318, "comment_id": 67547051, "body": "No, the individual score can be both positive and negative. I&#39;ve already elaborated it through the example. With Math Score being &#39;-3&#39; for the last (or 4th) student."}, {"owner": {"reputation": 39, "user_id": 7030159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0ae5cbe86a4e1df895e3173de81689d?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi Chandran", "link": "https://stackoverflow.com/users/7030159/ravi-chandran"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1476901030, "post_id": 40138318, "comment_id": 67547217, "body": "@ThomasMatthews ,as I&#39;ve already mentioned this question was asked in a contest. So, I need to do it on my own. There&#39;s no instructor to help."}, {"owner": {"reputation": 3954, "user_id": 6754706, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/TZSs8.jpg?s=128&g=1", "display_name": "RAZ_Muh_Taz", "link": "https://stackoverflow.com/users/6754706/raz-muh-taz"}, "edited": false, "score": 1, "creation_date": 1476902684, "post_id": 40138318, "comment_id": 67548263, "body": "what possibility is it not working for?"}, {"owner": {"reputation": 39, "user_id": 7030159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0ae5cbe86a4e1df895e3173de81689d?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi Chandran", "link": "https://stackoverflow.com/users/7030159/ravi-chandran"}, "edited": false, "score": 0, "creation_date": 1476944557, "post_id": 40138318, "comment_id": 67563078, "body": "if the value of m is greater than 1. Then how to decide which group to chose.? Math or Bio."}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 1, "last_activity_date": 1476989724, "creation_date": 1476989724, "answer_id": 40162398, "question_id": 40138318, "link": "https://stackoverflow.com/questions/40138318/algorithm-to-maximize-the-sum-of-product-of-elements-of-two-arrays/40162398#40162398", "title": "Algorithm to maximize the sum of product of elements of two arrays", "body": "<p>We have <code>Sum(Abs(o[i])) == m</code> <code>m &gt; 0</code>, and <code>a[i]</code>, <code>b[i]</code>, <code>m</code> fixed.</p>\n\n<pre><code>Sum( (a[i] + o[i]) * b[i]) == Sum(a[i] * b[i]) + Sum(o[i] * b[i])\n</code></pre>\n\n<p>So to maximize it, we just have to maximize</p>\n\n<pre><code>Sum(o[i] * b[i])\n</code></pre>\n\n<p>And we have</p>\n\n<pre><code>o[i] * b[i] &lt;= Abs(o[i] * b[i])\n</code></pre>\n\n<p>And as we can choose sign of <code>o[i]</code>, we can maximize instead</p>\n\n<pre><code>Sum(Abs(o[i] * b[i]))\n</code></pre>\n\n<p>which is</p>\n\n<pre><code>Sum(Abs(o[i]) * Abs(b[i]))\n</code></pre>\n\n<p>and</p>\n\n<pre><code>Max(Sum(Abs(o[i]) * Abs(b[i]))) &lt;= m * Max(Abs(b[i]))\n</code></pre>\n\n<p>and with <code>j</code> so that <code>b[j] == Max(Abs(b[i]))</code>, <code>o[j] == sign(b[j]) * m</code>, <code>o[i] == 0</code>, we have</p>\n\n<pre><code>Sum(o[i] * b[i]) == m * Max(Abs(b[i]))\n</code></pre>\n\n<p>So you have to find maximum of the both array (of absolute value).</p>\n\n<p>So in your example</p>\n\n<pre><code>Maths Score :  5  7  (4+m) -3\nBio Score   : -2  3  9      2\n</code></pre>\n\n<p>And for other example:</p>\n\n<pre><code>Maths Score :  5  7  (4-m) -3\nBio Score   : -2  3  -9     2\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 7030159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0ae5cbe86a4e1df895e3173de81689d?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi Chandran", "link": "https://stackoverflow.com/users/7030159/ravi-chandran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 987, "favorite_count": 0, "accepted_answer_id": 40162398, "answer_count": 1, "score": 1, "last_activity_date": 1476991731, "creation_date": 1476899408, "last_edit_date": 1476991731, "question_id": 40138318, "link": "https://stackoverflow.com/questions/40138318/algorithm-to-maximize-the-sum-of-product-of-elements-of-two-arrays", "title": "Algorithm to maximize the sum of product of elements of two arrays", "body": "<p>There was a question in a contest which requires calculating the performance of the class which contains only Maths and Bio subject. So, there are 'n' no. of maths student &amp; 'n' no. of bio student. Each student has an individual score. Scores of Maths students and Bio Students are stored in arrays mathScore[] and bioScore respectively. The performance of the whole class is calculated as follows: \n( mathScore[0]*bioScore[0] + mathScore[1]*bioScore[1] + ....... +mathScore[n-1]*bioScore[n-1] )</p>\n\n<p>With mathScore[0] representing the score of first Maths student. And same is true for bioScore[0]. </p>\n\n<p>Now given a value 'm', we have to maximize the overall score of the class. And we can do so by increasing or decreasing the score of any candidate by 1, a maximum of 'm' times. Now the catch is, you can only increase the score of only one group. Either Maths' or Bio's.</p>\n\n<p>Now coming to the solution, according to me, this question requires two step. First is to decide which group to chose, i.e. either Maths or Bio. And the second step is to select the students from that chosen group, so that increasing or decreasing those particular(selected) students' score will maximize the performance.</p>\n\n<p>I've tried thinking about the first step, this way:\nConsider this is the score of the class</p>\n\n<pre><code>Maths Score :  5  7  4 -3\nBio Score   : -2  3  9  2\n</code></pre>\n\n<p>With m=1;\nSo, we'll iterate over the Maths score array. And meanwhile comparing the corresponding scores of Bio students. So, we chose the Maths array. Because if we need to increment only one time. Then increasing the 4 in the Maths array would be beneficial. 'Cause it will increase the overall performance by 9. Which is biggest.</p>\n\n<p>And same will be the approach for the second step. Find the score whose corresponding score in the other group is highest. Increase that particular element.</p>\n\n<p>Now, this is a bit rough idea. But its not working for all the possibilities. So, any help would be appreciated.</p>\n\n<p>P.S. I'm not a college student. And this is no homework.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1476899211, "post_id": 40138226, "comment_id": 67546128, "body": "Call <code>cout.flush()</code>"}, {"owner": {"reputation": 78, "user_id": 6873330, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49b4eaba129845c8d05a275ce6e323e6?s=128&d=identicon&r=PG&f=1", "display_name": "mike", "link": "https://stackoverflow.com/users/6873330/mike"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1476899243, "post_id": 40138226, "comment_id": 67546148, "body": "what does it do? and how does it help ! and how to use?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1476899521, "post_id": 40138226, "comment_id": 67546346, "body": "It will output the written characters immediately to the output streams device."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1476899603, "post_id": 40138226, "comment_id": 67546389, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: That won&#39;t help here: the problem is that <code>getch()</code> is being used as a hack for &quot;wait for a keypress&quot; -- but there&#39;s already input waiting in standard input, so the program immediately continues to the command that clears the screen."}, {"owner": {"reputation": 78, "user_id": 6873330, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49b4eaba129845c8d05a275ce6e323e6?s=128&d=identicon&r=PG&f=1", "display_name": "mike", "link": "https://stackoverflow.com/users/6873330/mike"}, "edited": false, "score": 0, "creation_date": 1476899621, "post_id": 40138226, "comment_id": 67546397, "body": "could you write a fix code?"}, {"owner": {"reputation": 78, "user_id": 6873330, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49b4eaba129845c8d05a275ce6e323e6?s=128&d=identicon&r=PG&f=1", "display_name": "mike", "link": "https://stackoverflow.com/users/6873330/mike"}, "edited": false, "score": 0, "creation_date": 1476899696, "post_id": 40138226, "comment_id": 67546448, "body": "@Hurkyl so is there way to fix my problem !?"}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1476899823, "post_id": 40138226, "comment_id": 67546528, "body": "you always need to flush buffer"}, {"owner": {"reputation": 3740, "user_id": 1053938, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/59b4bb22f374b4224067923e11524a24?s=128&d=identicon&r=PG", "display_name": "jonhopkins", "link": "https://stackoverflow.com/users/1053938/jonhopkins"}, "edited": false, "score": 0, "creation_date": 1476899875, "post_id": 40138226, "comment_id": 67546556, "body": "If you&#39;re on windows you might be able to do something like <code>while (kbhit()) { getch(); }</code> immediately after the delay. You would need to add <code>#include &lt;conio.h&gt;</code>. That would clear out any characters that were inputted during the delay, then the next <code>op=getch();</code> would have to wait for another key to be pressed."}, {"owner": {"reputation": 78, "user_id": 6873330, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49b4eaba129845c8d05a275ce6e323e6?s=128&d=identicon&r=PG&f=1", "display_name": "mike", "link": "https://stackoverflow.com/users/6873330/mike"}, "reply_to_user": {"reputation": 3740, "user_id": 1053938, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/59b4bb22f374b4224067923e11524a24?s=128&d=identicon&r=PG", "display_name": "jonhopkins", "link": "https://stackoverflow.com/users/1053938/jonhopkins"}, "edited": false, "score": 0, "creation_date": 1476900004, "post_id": 40138226, "comment_id": 67546640, "body": "@jonhopkins tried earlier ! but not helpful! still not fixed! and just add the ur solve code with my code ! what if the user enter &#39;a&#39; 3 times! Still same prolem"}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1476900103, "post_id": 40138226, "comment_id": 67546695, "body": "one question: what is the role of <code>system(&quot;cls&quot;)</code>??"}, {"owner": {"reputation": 78, "user_id": 6873330, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49b4eaba129845c8d05a275ce6e323e6?s=128&d=identicon&r=PG&f=1", "display_name": "mike", "link": "https://stackoverflow.com/users/6873330/mike"}, "reply_to_user": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1476900152, "post_id": 40138226, "comment_id": 67546727, "body": "@Raindrop7 to show that the bye is skipped !"}, {"owner": {"reputation": 3740, "user_id": 1053938, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/59b4bb22f374b4224067923e11524a24?s=128&d=identicon&r=PG", "display_name": "jonhopkins", "link": "https://stackoverflow.com/users/1053938/jonhopkins"}, "edited": false, "score": 0, "creation_date": 1476900171, "post_id": 40138226, "comment_id": 67546742, "body": "It clears the screen. That&#39;s what the problem is, if there&#39;s already input waiting for the second <code>getch()</code>, then it processes immediately and the <code>cout &lt;&lt; &quot;bye&quot;</code> gets cleared away before the user can see it"}, {"owner": {"reputation": 78, "user_id": 6873330, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49b4eaba129845c8d05a275ce6e323e6?s=128&d=identicon&r=PG&f=1", "display_name": "mike", "link": "https://stackoverflow.com/users/6873330/mike"}, "reply_to_user": {"reputation": 3740, "user_id": 1053938, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/59b4bb22f374b4224067923e11524a24?s=128&d=identicon&r=PG", "display_name": "jonhopkins", "link": "https://stackoverflow.com/users/1053938/jonhopkins"}, "edited": false, "score": 0, "creation_date": 1476900241, "post_id": 40138226, "comment_id": 67546777, "body": "@jonhopkins !! thats what! How to fix it !"}, {"owner": {"reputation": 3740, "user_id": 1053938, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/59b4bb22f374b4224067923e11524a24?s=128&d=identicon&r=PG", "display_name": "jonhopkins", "link": "https://stackoverflow.com/users/1053938/jonhopkins"}, "edited": false, "score": 0, "creation_date": 1476900499, "post_id": 40138226, "comment_id": 67546913, "body": "Other than what I mentioned earlier, best I can find is <code>cin.clear(); cin.ignore(INT_MAX);</code>, but since you&#39;re not using <code>cin</code> to get the input, I&#39;m not sure if that would help unless you change how you&#39;re getting the characters."}, {"owner": {"reputation": 78, "user_id": 6873330, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49b4eaba129845c8d05a275ce6e323e6?s=128&d=identicon&r=PG&f=1", "display_name": "mike", "link": "https://stackoverflow.com/users/6873330/mike"}, "reply_to_user": {"reputation": 3740, "user_id": 1053938, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/59b4bb22f374b4224067923e11524a24?s=128&d=identicon&r=PG", "display_name": "jonhopkins", "link": "https://stackoverflow.com/users/1053938/jonhopkins"}, "edited": false, "score": 0, "creation_date": 1476900627, "post_id": 40138226, "comment_id": 67546999, "body": "@jonhopkins  ! well for cin ! the better solution would be to use getline(cin, op); // i am i correct!!"}], "answers": [{"comments": [{"owner": {"reputation": 78, "user_id": 6873330, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49b4eaba129845c8d05a275ce6e323e6?s=128&d=identicon&r=PG&f=1", "display_name": "mike", "link": "https://stackoverflow.com/users/6873330/mike"}, "edited": false, "score": 0, "creation_date": 1477104488, "post_id": 40139435, "comment_id": 67643016, "body": "just waited few days to get other answer if possible! dont worry, i will mark your answer soon! &quot;Every hard-work as a reward!!&quot;"}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "reply_to_user": {"reputation": 78, "user_id": 6873330, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49b4eaba129845c8d05a275ce6e323e6?s=128&d=identicon&r=PG&f=1", "display_name": "mike", "link": "https://stackoverflow.com/users/6873330/mike"}, "edited": false, "score": 0, "creation_date": 1477141118, "post_id": 40139435, "comment_id": 67650965, "body": "if it doesn&#39;t work for you than it&#39;s ok to remove it"}], "tags": [], "owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "is_accepted": true, "score": 1, "last_activity_date": 1476903393, "creation_date": 1476903393, "answer_id": 40139435, "question_id": 40138226, "link": "https://stackoverflow.com/questions/40138226/how-to-prevent-getch-from-getting-input-data-that-was-entered-too-soon/40139435#40139435", "title": "How to prevent getch() from getting input data that was entered too soon?", "body": "<p>sorry for being too late. in your case use: FlushConsoleInputBuffer to clear getch buffer:</p>\n\n<pre><code>int main()\n{\n    cout&lt;&lt;\"hi\";\n    op=getch();\n    Delay(2000);\n    cout&lt;&lt;endl&lt;&lt;\" bye\";\n\n    FlushConsoleInputBuffer(GetStdHandle(STD_INPUT_HANDLE)); // flushing the buffer\n    op=getch(); // or cin&gt;&gt;op\n    system(\"cls\"); \n    cout&lt;&lt;\"  MAGIc !! !!\";\n    return 0;\n}\n</code></pre>\n\n<p>user above can enter even 4 times a and everything will be alright.</p>\n\n<ul>\n<li>it's so stupid to clear cin's buffer without using it</li>\n</ul>\n"}], "owner": {"reputation": 78, "user_id": 6873330, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49b4eaba129845c8d05a275ce6e323e6?s=128&d=identicon&r=PG&f=1", "display_name": "mike", "link": "https://stackoverflow.com/users/6873330/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 40139435, "answer_count": 1, "score": 0, "last_activity_date": 1476903393, "creation_date": 1476899126, "last_edit_date": 1476902292, "question_id": 40138226, "link": "https://stackoverflow.com/questions/40138226/how-to-prevent-getch-from-getting-input-data-that-was-entered-too-soon", "title": "How to prevent getch() from getting input data that was entered too soon?", "body": "<p>Simple code to understand the problem:</p>\n\n<pre><code>string op;\nint main()\n{\n    cout&lt;&lt;\"hi\";\n    op=getch(); // or cin&gt;&gt;op\n    delay(2000) // delay for 2 sec.\n    cout&lt;&lt;endl&lt;&lt;\" bye\";\n    op=getch(); // or cin&gt;&gt;op\n    system(\"cls\"); \n    cout&lt;&lt;\"  MAGIc !! !!\";\n    return 0;\n}\n</code></pre>\n\n<p>What this code should be doing is:</p>\n\n<ol>\n<li>Print \"hi\"</li>\n<li>Wait for the user to press any key</li>\n<li>Wait for two seconds</li>\n<li>Print \"bye\"</li>\n<li>Wait for the user to press any key again</li>\n<li>Clear the screen</li>\n<li>Print \"Magic\"</li>\n</ol>\n\n<p>Let's say there are two users: User A and User B.</p>\n\n<p>Let's say User A presses the 'a' key and then waits for two seconds until \"bye\" is displayed, and then presses 'a' again and then sees the screen clear and \"magic\" get printed. Well User A is good, and there is no problem.</p>\n\n<p>But let's User B is impatient. User B sees \"hi\" and immediately presses 'a' twice. Then after two seconds, he only sees the word \"Magic\". He never sees \"bye\" because the screen is cleared right away!</p>\n\n<p>So the question is: how do I prevent the second <code>getch()</code> from getting input if an impatient user presses too many keys before \"bye\" is printed, so that they have to press another key <em>after</em> \"bye\" is printed and <em>before</em> the screen is cleared?</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "stdthread"], "comments": [{"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 1, "creation_date": 1476899320, "post_id": 40138205, "comment_id": 67546205, "body": "See <a href=\"http://stackoverflow.com/a/13984169/12711\">stackoverflow.com/a/13984169/12711</a>"}, {"owner": {"reputation": 3685, "user_id": 695652, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/28c0373a80df43009aefb657d30c6fa8?s=128&d=identicon&r=PG", "display_name": "user695652", "link": "https://stackoverflow.com/users/695652/user695652"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1476900066, "post_id": 40138205, "comment_id": 67546673, "body": "@kfsone thanks for the comment. Could you specify a bit more on which undefined behavior thread(&amp;Bar::foo, this) is reliant on"}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1476923282, "post_id": 40138205, "comment_id": 67557035, "body": "@user695652, it&#39;s generally dangerous to pass around <code>this</code> (or object members) in a constructor&#39;s initializer list. Your object only contains the thread so there&#39;s no harm in this example, but if it had more fields, you should be mindful that your thread could start executing before your object is fully constructed."}], "answers": [{"comments": [{"owner": {"reputation": 3685, "user_id": 695652, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/28c0373a80df43009aefb657d30c6fa8?s=128&d=identicon&r=PG", "display_name": "user695652", "link": "https://stackoverflow.com/users/695652/user695652"}, "edited": false, "score": 0, "creation_date": 1476899445, "post_id": 40138242, "comment_id": 67546295, "body": "thank you for your answer. I don&#39;t understand the last part &quot;if you hadn&#39;t call thread::join or thread::detach&quot;, so in my example above, what happens to the thread?"}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "reply_to_user": {"reputation": 3685, "user_id": 695652, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/28c0373a80df43009aefb657d30c6fa8?s=128&d=identicon&r=PG", "display_name": "user695652", "link": "https://stackoverflow.com/users/695652/user695652"}, "edited": false, "score": 0, "creation_date": 1476899504, "post_id": 40138242, "comment_id": 67546334, "body": "if you don&#39;t call <code>thread::join</code> or <code>thread::detach</code> <b>and</b> the destructor of the thread starts to run - the entire application terminates."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "reply_to_user": {"reputation": 3685, "user_id": 695652, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/28c0373a80df43009aefb657d30c6fa8?s=128&d=identicon&r=PG", "display_name": "user695652", "link": "https://stackoverflow.com/users/695652/user695652"}, "edited": false, "score": 0, "creation_date": 1476899719, "post_id": 40138242, "comment_id": 67546465, "body": "well, sort of. &quot;crash&quot; is when the operating system actually kills your process. here, the program itself exits. of course, the standard doesn&#39;t really defines the term &quot;crash&quot;"}, {"owner": {"reputation": 3685, "user_id": 695652, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/28c0373a80df43009aefb657d30c6fa8?s=128&d=identicon&r=PG", "display_name": "user695652", "link": "https://stackoverflow.com/users/695652/user695652"}, "edited": false, "score": 0, "creation_date": 1476899874, "post_id": 40138242, "comment_id": 67546555, "body": "I see, though I still don&#39;t understand how I would correctly terminate my thread in the destructor, yield woudl not work because my thread runs in an endless loop."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "reply_to_user": {"reputation": 3685, "user_id": 695652, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/28c0373a80df43009aefb657d30c6fa8?s=128&d=identicon&r=PG", "display_name": "user695652", "link": "https://stackoverflow.com/users/695652/user695652"}, "edited": false, "score": 0, "creation_date": 1477069709, "post_id": 40138242, "comment_id": 67631430, "body": "@user695652: it&#39;s dangerous to terminate a thread from outside the thread (for example, it&#39;s not generally easy or possible for another thread to know whether the thread is holding a mutex) so the widely accepted way to terminate a thread is to somehow signal it to exit.  Your thread&#39;s work loop could be something like <code>while (!exit_thread) ...</code> instead of <code>while (true) ...</code>.  And <code>exit_thread</code> would be some object or function that can be used to tell the thread (in a thread-safe manner) that it should clean up and exit."}], "tags": [], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": false, "score": 2, "last_activity_date": 1476899170, "creation_date": 1476899170, "answer_id": 40138242, "question_id": 40138205, "link": "https://stackoverflow.com/questions/40138205/stdthread-thread-spun-off-in-object-when-does-it-terminate/40138242#40138242", "title": "std::thread thread spun off in object, when does it terminate?", "body": "<blockquote>\n  <p>If I spin off an std::thread in the constructor of Bar when does it\n  stop running?</p>\n</blockquote>\n\n<p>the thread will run as long as it executing the callable you provided it, or the program terminates. </p>\n\n<blockquote>\n  <p>Is it guaranteed to stop when the Bar instance gets destructed?</p>\n</blockquote>\n\n<p>No. In order to guarantee that, call <code>std::thread::join</code> in <code>Bar</code> destructor.</p>\n\n<p>Actually, if you hadn't call <code>thread::join</code> or <code>thread::detach</code> prior to <code>Bar::~Bar</code>, than your application will be terminated by calling automatically to <code>std::terminate</code>. so you <strong>must</strong> call either <code>join</code> (preferable) or <code>detach</code> (less recommended).</p>\n\n<p>you also want to call <code>therad::join</code> on the object destructor because the spawned thread <strong>relies on the object to be alive</strong>, if the object is destructed while your thread is working on that object - you are using destructed object and you will have undefined behavior in your code. </p>\n"}, {"tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": false, "score": 0, "last_activity_date": 1476899661, "last_edit_date": 1592644375, "creation_date": 1476899661, "answer_id": 40138398, "question_id": 40138205, "link": "https://stackoverflow.com/questions/40138205/stdthread-thread-spun-off-in-object-when-does-it-terminate/40138398#40138398", "title": "std::thread thread spun off in object, when does it terminate?", "body": "<p>Short answer: Yes and no. Yes, the thread ends, but not by the usual way (killing the thread), but by the main thread exiting due to a <code>std::terminate</code> call.</p>\n<p>Long answer: The thread can only be safely destructed when the underlying function (<em>thread</em>) has finished executing. This can be done in 2 ways</p>\n<ul>\n<li>calling <code>join()</code>, which waits for the thread to finish (in your case, never)</li>\n<li>calling <code>detach()</code>, which detaches the thread from the main thread (in this case, the thread will end when the main thread closes - when the program terminates).</li>\n</ul>\n<p>If the destructor is called if all of <a href=\"http://en.cppreference.com/w/cpp/thread/thread/%7Ethread\" rel=\"nofollow noreferrer\">those conditions</a> don't apply, then <code>std::terminate</code> is called:</p>\n<blockquote>\n<ul>\n<li><p>it was default-constructed</p>\n</li>\n<li><p>it was moved from</p>\n</li>\n<li><p><code>join()</code> has been called</p>\n</li>\n<li><p><code>detach()</code> has been called</p>\n</li>\n</ul>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": false, "score": 0, "last_activity_date": 1476922956, "creation_date": 1476922956, "answer_id": 40143556, "question_id": 40138205, "link": "https://stackoverflow.com/questions/40138205/stdthread-thread-spun-off-in-object-when-does-it-terminate/40143556#40143556", "title": "std::thread thread spun off in object, when does it terminate?", "body": "<p>The C++ threading facilities do <em>not</em> include a built-in mechanism for terminating a thread. Instead, you must decide for yourself: a) a mechanism to signal the thread that it should terminate, b) that you do not care about the thread being aborted mid-operation when the process terminates and the OS simply ceases to run it's threads any more.</p>\n\n<p>The <code>std::thread</code> object is not the thread itself but an opaque object containing a descriptor/handle for the thread, so in theory it could be destroyed without affecting the thread, and there were arguments for and against automatic termination of the thread itself. Instead, as a compromise, it was made so that destroying a <code>std::thread</code> object while the thread remained running and attached would cause the application to terminate.</p>\n\n<p>As a result, In it's destructor there is some code like this:</p>\n\n<pre><code>~thread() {\n    if (this-&gt;joinable())\n        std::terminate(...);\n}\n</code></pre>\n\n<p>Here's an example of using a simple atomic variable and checking for it in the thread. For more complex cases you may need to consider a <code>condition_variable</code> or other more sophisticated signaling mechanism.</p>\n\n<pre><code>#include &lt;thread&gt;\n#include &lt;atomic&gt;\n#include &lt;chrono&gt;\n#include &lt;iostream&gt;\n\nclass S {\n    std::atomic&lt;bool&gt; running_;\n    std::thread thread_;\npublic:\n    S() : running_(true), thread_([this] () { work(); }) {}\n    void cancel() { running_ = false; }\n    ~S() {\n        if ( running_ )\n            cancel();\n        if ( thread_.joinable() )\n            thread_.join();\n    }\nprivate:\n    void work() {\n        while ( running_ ) {\n            std::this_thread::sleep_for(std::chrono::milliseconds(500));\n            std::cout &lt;&lt; \"tick ...\\n\";\n            std::this_thread::sleep_for(std::chrono::milliseconds(500));\n            std::cout &lt;&lt; \"... tock\\n\";\n        }\n        std::cout &lt;&lt; \"!running\\n\";\n    }\n};\n\nint main()\n{\n    std::cout &lt;&lt; \"main()\\n\";\n    {\n        S s;\n        std::this_thread::sleep_for(std::chrono::milliseconds(2750));\n        std::cout &lt;&lt; \"end of main, should see a tock and then end\\n\";\n    }\n    std::cout &lt;&lt; \"finished\\n\";\n}\n</code></pre>\n\n<p>Live demo: <a href=\"http://coliru.stacked-crooked.com/a/3b179f0f9f8bc2e1\" rel=\"nofollow\">http://coliru.stacked-crooked.com/a/3b179f0f9f8bc2e1</a></p>\n"}], "owner": {"reputation": 3685, "user_id": 695652, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/28c0373a80df43009aefb657d30c6fa8?s=128&d=identicon&r=PG", "display_name": "user695652", "link": "https://stackoverflow.com/users/695652/user695652"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1476922956, "creation_date": 1476899039, "last_edit_date": 1476899823, "question_id": 40138205, "link": "https://stackoverflow.com/questions/40138205/stdthread-thread-spun-off-in-object-when-does-it-terminate", "title": "std::thread thread spun off in object, when does it terminate?", "body": "<p>If I spin off an <code>std::thread</code> in the constructor of <code>Bar</code> when does it stop running? Is it guaranteed to stop when the <code>Bar</code> instance gets destructed? </p>\n\n<pre><code>class Bar {\n\npublic:\n\nBar() : thread(&amp;Bar:foo, this) {\n}\n\n...\n\nvoid foo() {\n  while (true) {//do stuff//}\n\n}\n\nprivate:\n  std::thread thread;\n\n};\n</code></pre>\n\n<hr>\n\n<p>EDIT: How do I correctly terminate the <code>std::thread</code> in the destructor?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1476898719, "post_id": 40138079, "comment_id": 67545824, "body": "So you want to <i>truncate</i> the number to two decimals?"}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1476898920, "post_id": 40138079, "comment_id": 67545936, "body": "Can you give an example input where the output fails? It seems to work (given what I mean by work), 100%"}, {"owner": {"reputation": 39, "user_id": 6912851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/196f8f005420463dd79b7c30d07d5649?s=128&d=identicon&r=PG&f=1", "display_name": "Opie-M", "link": "https://stackoverflow.com/users/6912851/opie-m"}, "edited": false, "score": 0, "creation_date": 1476898941, "post_id": 40138079, "comment_id": 67545948, "body": "Yes, i think this would be the solution. How can i achieve this?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1476898988, "post_id": 40138079, "comment_id": 67545975, "body": "Please include test input and actual vs expected output."}, {"owner": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "edited": false, "score": 0, "creation_date": 1476899088, "post_id": 40138079, "comment_id": 67546048, "body": "As a side note, to avoid overflow upon summation of <code>(x+y+z)</code>, you should do <code>(x&#47;3+y&#47;3+z&#47;3)</code>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1476899441, "post_id": 40138079, "comment_id": 67546290, "body": "&quot;Average must NOT be rounded&quot; isn&#39;t sufficient. What are you supposed to do when the result has more than two significant digits? For example, with 1.0, 1.0, and 1.1, the average is 1.0333... And, incidentally, the stream inserters for floating-point types round the value, so <code>std::cout &lt;&lt; setprecision(2) &lt;&lt; fixed &lt;&lt; average</code> <b>will</b> round the value."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "edited": false, "score": 0, "creation_date": 1476899518, "post_id": 40138079, "comment_id": 67546343, "body": "@SauravSahu - doing three separate divisions can produce a different value than a non-overflowing sum and a single division."}], "answers": [{"tags": [], "owner": {"reputation": 1499, "user_id": 1372577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4819b4e5fd753e26319b41b632182e0?s=128&d=identicon&r=PG", "display_name": "Constantine Georgiou", "link": "https://stackoverflow.com/users/1372577/constantine-georgiou"}, "is_accepted": true, "score": 0, "last_activity_date": 1476899398, "creation_date": 1476899398, "answer_id": 40138315, "question_id": 40138079, "link": "https://stackoverflow.com/questions/40138079/making-average-of-3-numbers-with-2-decimals-no-rounding/40138315#40138315", "title": "Making average of 3 numbers with 2 decimals (no rounding!)", "body": "<p>It's a matter of definition and specification. The division <code>(x+y+z)/3</code> is a floating-point one and <code>setprecision()</code> obviously rounds the decimal digits, rather than truncates them. You may need to either choose another function (truncating, rather than rounding), or even partially employ a fixed-point logic. Eg if x, y and z are integers, you could use <code>((x+y+z)*100/3) / 100.0</code>. (a quite common approach when 'amount' data are represented and processed).</p>\n\n<p>OR (if x, y and z are floats):</p>\n\n<pre><code>floor((x+y+z)*100/3)/100\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5486, "user_id": 4763963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9de2F.jpg?s=128&g=1", "display_name": "Mo Abdul-Hameed", "link": "https://stackoverflow.com/users/4763963/mo-abdul-hameed"}, "is_accepted": false, "score": 0, "last_activity_date": 1476899737, "creation_date": 1476899737, "answer_id": 40138428, "question_id": 40138079, "link": "https://stackoverflow.com/questions/40138079/making-average-of-3-numbers-with-2-decimals-no-rounding/40138428#40138428", "title": "Making average of 3 numbers with 2 decimals (no rounding!)", "body": "<p>This function can do exactly what you are looking for:</p>\n\n<pre><code>#include &lt;math.h&gt;\ndouble truncate(double number, int precision) {\n\n    return floor(pow(10, precision) * number) / pow(10, precision);\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 6912851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/196f8f005420463dd79b7c30d07d5649?s=128&d=identicon&r=PG&f=1", "display_name": "Opie-M", "link": "https://stackoverflow.com/users/6912851/opie-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2026, "favorite_count": 0, "accepted_answer_id": 40138315, "answer_count": 2, "score": -2, "last_activity_date": 1476899737, "creation_date": 1476898654, "last_edit_date": 1476898933, "question_id": 40138079, "link": "https://stackoverflow.com/questions/40138079/making-average-of-3-numbers-with-2-decimals-no-rounding", "title": "Making average of 3 numbers with 2 decimals (no rounding!)", "body": "<p>This has been on my mind for a week now and i can't seem to understand it.\ni have this problem:</p>\n\n<pre><code>//1.Make an average of 3 numbers\n//2.Display average with two decimals exactly\n//3.Average must NOT be rounded\n\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\nint main()\n{\n    double x, y ,z, average;\n    cin&gt;&gt; x &gt;&gt; y &gt;&gt; z;\n    average = (x+y+z)/3;\n\n    cout&lt;&lt;setprecision(2)&lt;&lt;fixed&lt;&lt; average;\n\nreturn (0);\n}\n</code></pre>\n\n<p>This is what i came up with but apparently it doesn't work 100%. (it rounds up the average sometimes)</p>\n\n<p>Can anyone explain where it fails and how i can fix it?</p>\n"}, {"tags": ["c++", "visual-studio", "vectorization", "sse"], "comments": [{"owner": {"reputation": 1685, "user_id": 6261331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uNHq.png?s=128&g=1", "display_name": "Asu", "link": "https://stackoverflow.com/users/6261331/asu"}, "edited": false, "score": 0, "creation_date": 1476899597, "post_id": 40138067, "comment_id": 67546386, "body": "nevermind, my previous comment was a bit stupid. can you generate and send the assembly? what results do you get with optimizations off?"}, {"owner": {"reputation": 2796, "user_id": 6121044, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d36000b5ea58961acf50354041457af9?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/6121044/andreas"}, "edited": false, "score": 0, "creation_date": 1476900598, "post_id": 40138067, "comment_id": 67546979, "body": "To try out Bollingers answer reduce ARR_SIZE to even vectorization width, e.g. 128. See if it changes the result."}, {"owner": {"reputation": 1046, "user_id": 191224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6eae849a92fc634c2a5c41b1dcd879?s=128&d=identicon&r=PG", "display_name": "Senyai", "link": "https://stackoverflow.com/users/191224/senyai"}, "reply_to_user": {"reputation": 1685, "user_id": 6261331, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uNHq.png?s=128&g=1", "display_name": "Asu", "link": "https://stackoverflow.com/users/6261331/asu"}, "edited": false, "score": 2, "creation_date": 1476910867, "post_id": 40138067, "comment_id": 67552831, "body": "@Asu That&#39;s what VS2015 outputs: <a href=\"https://gist.github.com/senyai/3e4b6a9118418d1536476218459cd12d\" rel=\"nofollow noreferrer\">gist.github.com/senyai/3e4b6a9118418d1536476218459cd12d</a>"}, {"owner": {"reputation": 1046, "user_id": 191224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6eae849a92fc634c2a5c41b1dcd879?s=128&d=identicon&r=PG", "display_name": "Senyai", "link": "https://stackoverflow.com/users/191224/senyai"}, "reply_to_user": {"reputation": 2796, "user_id": 6121044, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d36000b5ea58961acf50354041457af9?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/6121044/andreas"}, "edited": false, "score": 2, "creation_date": 1476911041, "post_id": 40138067, "comment_id": 67552924, "body": "@Andreas When ARR_SIZE is 128 &quot;OK&quot; is printed."}, {"owner": {"reputation": 1744, "user_id": 968671, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nqf2x.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/968671/mat"}, "edited": false, "score": 0, "creation_date": 1478270340, "post_id": 40138067, "comment_id": 68099009, "body": "you compare float with int. As float is not garantued to be precise, you are comparing pears with apples. <a href=\"https://en.wikipedia.org/wiki/Single-precision_floating-point_format\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Single-precision_floating-point_format</a>"}, {"owner": {"reputation": 2026, "user_id": 3789665, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/38983281a7926f50843153d9e0788cdf?s=128&d=identicon&r=PG&f=1", "display_name": "greybeard", "link": "https://stackoverflow.com/users/3789665/greybeard"}, "reply_to_user": {"reputation": 1744, "user_id": 968671, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nqf2x.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/968671/mat"}, "edited": false, "score": 0, "creation_date": 1478417873, "post_id": 40138067, "comment_id": 68140140, "body": "@Mat <code>you[Senyai] compare float with int</code> - no: <code>arr_dst[ARR_SIZE - 1] == arr_dst[ARR_SIZE - 2]</code> - last two elements of one and the same <code>float</code> array."}, {"owner": {"reputation": 2026, "user_id": 3789665, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/38983281a7926f50843153d9e0788cdf?s=128&d=identicon&r=PG&f=1", "display_name": "greybeard", "link": "https://stackoverflow.com/users/3789665/greybeard"}, "edited": false, "score": 0, "creation_date": 1478417969, "post_id": 40138067, "comment_id": 68140162, "body": "Welcome to limited precision and rounding modes: your <code>float</code> doesn&#39;t have as many mantissa bits as useful for your <code>int</code> literal. With rounding mode not set explicitly, any given C++ standard may or may not guarantee one. Your compiler (which may or may not follow any given standard) seems to use random, <i>and not eliminate the conversion as a common sub-expression</i>. (Did you try different &quot;optimisation options&quot;? Please report. Try to find out how many different values are present, vary the literal, \u2026) <code>probably\u2026some issue with vectorizing optimisation</code> - I&#39;d be surprised."}], "answers": [{"comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1476903637, "post_id": 40138458, "comment_id": 67548803, "body": "I&#39;m sure you&#39;re on the right track, since the two values output from the program are the two closest IEEE 32-bit floats to the original integer. But I can&#39;t imagine a scenario, even with different width floating point types, where rounding would occur inconsistently."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1476943813, "post_id": 40138458, "comment_id": 67562689, "body": "@MarkRansom, I haven&#39;t suggested any inconsistent rounding. I&#39;ve suggested that the two values actually used result from different sequences of conversions (because of optimizations applied by the compiler), and that leaves no basis for inconsistency because there is no reason to expect the same rounding in the first place.  I can&#39;t imagine a scenario where the reported result is <i>not</i> a result of such program behavior."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1476987617, "post_id": 40138458, "comment_id": 67592356, "body": "I&#39;d buy that argument if either of the printed values was equal to the integer you started with, but <i>both</i> of them are rounded. Thus my comment about inconsistent rounding. Generally rounding in IEEE floating point is very tightly specified."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1477216036, "post_id": 40138458, "comment_id": 67667972, "body": "@MarkRansom: <code>unsigned</code> -&gt; <code>float</code> conversion is hard on x86, unlike signed int, and isn&#39;t doable in one step.  MSVC uses two different conversion strategies for vectorized vs. scalar.  The scalar one involves converting to double, but the vector one goes straight to float (and apparently has more than 0.5ulp error in this case)."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 5, "last_activity_date": 1476900560, "last_edit_date": 1476900560, "creation_date": 1476899831, "answer_id": 40138458, "question_id": 40138067, "link": "https://stackoverflow.com/questions/40138067/strange-uint32-t-to-float-array-conversion/40138458#40138458", "title": "Strange uint32_t to float array conversion", "body": "<p>A 32-bit IEEE-754 binary float, such as MSVC++ uses, provides only 6-7 decimal digits of precision.  Your starting value is well within the <em>range</em> of that type, but it seems not to be exactly representable by that type, as indeed is the case for most values of type <code>uint32_t</code>.</p>\n\n<p>At the same time, the floating-point unit of an x86 or x86_64 processor uses a wider representation even than MSVC++'s 64-bit <code>double</code>.  It seems likely that after the loop exits, the last-computed array element remains in an FPU register, in its extended precision form.  The program may then use that value directly from the register instead of reading it back from memory, which it is obligated to do with previous elements.</p>\n\n<p>If the program performs the <code>==</code> comparison by promoting the narrower representation to the wider instead of the other way around, then the two values might indeed compare unequal, as the round-trip from extended precision to <code>float</code> and back loses precision.  In any event, both values are converted to type <code>double</code> when passed to <code>printf()</code>; if indeed they compared unequal, then it is likely that the results of those conversions differ, too.</p>\n\n<p>I'm not up on MSVC++ compile options, but very likely there is one that would quash this behavior.  Such options sometimes go by names such as \"strict math\" or \"strict fp\".  Be aware, however, that turning on such an option (or turning off its opposite) can be very costly in an FP-heavy program.</p>\n"}, {"comments": [{"owner": {"reputation": 1046, "user_id": 191224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6eae849a92fc634c2a5c41b1dcd879?s=128&d=identicon&r=PG", "display_name": "Senyai", "link": "https://stackoverflow.com/users/191224/senyai"}, "edited": false, "score": 1, "creation_date": 1477168014, "post_id": 40193906, "comment_id": 67659277, "body": "That&#39;s it. The values are truly equal after calling <code>_control87(_MCW_RC, RC_DOWN);</code> or <code>_control87(_MCW_RC, _RC_UP);</code>. I wonder what is the best practice for setting the FPU state, seems like nobody is using it."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 1046, "user_id": 191224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6eae849a92fc634c2a5c41b1dcd879?s=128&d=identicon&r=PG", "display_name": "Senyai", "link": "https://stackoverflow.com/users/191224/senyai"}, "edited": false, "score": 0, "creation_date": 1477260270, "post_id": 40193906, "comment_id": 67681016, "body": "@Senyai: What does that do to the asm?  Neither the vectorized (2570980352) nor the scalar (2570980608) conversion in the asm you linked use x87 for anything; it&#39;s all SSE math.  Or does <code>_control87</code> also set the MXCSR rounding mode?"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 1046, "user_id": 191224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6eae849a92fc634c2a5c41b1dcd879?s=128&d=identicon&r=PG", "display_name": "Senyai", "link": "https://stackoverflow.com/users/191224/senyai"}, "edited": false, "score": 0, "creation_date": 1477260534, "post_id": 40193906, "comment_id": 67681075, "body": "@Senyai: The &quot;best practice&quot; for setting the rounding mode is to leave it on the default round-to-nearest (with even as a tiebreak).  That&#39;s what Bruce Dawson suggests in his <a href=\"https://randomascii.wordpress.com/2013/07/16/floating-point-determinism/\" rel=\"nofollow noreferrer\">article on floating-point determinism and FP settings</a>."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1477260874, "post_id": 40193906, "comment_id": 67681174, "body": "Also, the last paragraph is nonsense.  Intel&#39;s x86 manuals are very detailed and available for free as PDF without any kind of registration requirement.  Links in the <a href=\"http://stackoverflow.com/tags/x86/info\">x86 tag wiki</a>, specifically <a href=\"https://www-ssl.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html\" rel=\"nofollow noreferrer\">this link to Intel&#39;s manuals</a>.  BTW, your answer was not a bad guess, it could have been that the 129th conversion was using scalar x87 (with 80-bit internal precision), as well as doing the unsigned conversion with a different strategy."}, {"owner": {"reputation": 2796, "user_id": 6121044, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d36000b5ea58961acf50354041457af9?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/6121044/andreas"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1477416521, "post_id": 40193906, "comment_id": 67754489, "body": "@PeterCordes Thank you for the links for x86/Intel manuals. Guess I&#180;ve been looking at the wrong places. Reading the Intel manuals they too have possibly different rounding modes. Intel however may set rounding mode for the SSE/SSE2 to any of the four setting the MXCSR register, section 4.8.4.1. Reading further makes me stand by the claim that I&#180;ve seen much better manuals. The MXCSR register default is &quot;1F80H&quot;. I&#180;m not even gonna bother decipher that."}, {"owner": {"reputation": 2796, "user_id": 6121044, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d36000b5ea58961acf50354041457af9?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/6121044/andreas"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1477416761, "post_id": 40193906, "comment_id": 67754635, "body": "@PeterCordes In case you missed it: We are making the assumption all elements are calculated using SSE except the last element which is calculated by x87. Prove that to be wrong and the post is moot for whatever platform you tested it on."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1477445767, "post_id": 40193906, "comment_id": 67766934, "body": "From the asm linked by the OP, both vector and scalar conversions are done with SSE, no x87.  See my answer where I commented the asm and described both strategies.  re: MXCSR: the default rounding mode in C is always round-to-nearest (with even as a tie-break), and that&#39;s what the default MXCSR setting does.  The other default bit are all exceptions masked, and I think no exception flags already raised."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1477445925, "post_id": 40193906, "comment_id": 67766968, "body": "Anyway, the imperfect rounding of MSVC&#39;s vectorized <code>unsigned</code>-&gt;<code>float</code> conversion is because there&#39;s no single instruction that does that, and it has to hack a conversion together out of some magic constants.  All the math it does is done with 32-bit IEEE floats, with correct round-to-nearest."}], "tags": [], "owner": {"reputation": 2796, "user_id": 6121044, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d36000b5ea58961acf50354041457af9?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/6121044/andreas"}, "is_accepted": true, "score": 2, "last_activity_date": 1477416600, "last_edit_date": 1477416600, "creation_date": 1477150558, "answer_id": 40193906, "question_id": 40138067, "link": "https://stackoverflow.com/questions/40138067/strange-uint32-t-to-float-array-conversion/40193906#40193906", "title": "Strange uint32_t to float array conversion", "body": "<p>I did an investigation on a PowerPC imeplementation (Freescale MCP7450) as they IMHO are far better documented than any voodoo Intel comes up with.</p>\n\n<p>As it turns out the floating point unit, FPU, and vector unit may have different rounding for floating point operations. The FPU can be configured to use one of four rounding modes; round to nearest (default), truncate, towards positive infinity and towards negative infinity. The vector unit however is only able to round to nearest, with a few select instructions having specific rounding rules. The internal precision of the FPU is 106-bit. The vector unit fulfills IEEE-754 but the documentation does not state much more.</p>\n\n<p>Looking at your result the conversion 2570980608 is closer to the original integer, suggesting the FPU has better internal precision than the vector unit OR different rounding modes.</p>\n"}, {"comments": [{"owner": {"reputation": 3352, "user_id": 2439725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428ff617402eb64c48ed6dfc153617f9?s=128&d=identicon&r=PG", "display_name": "wim", "link": "https://stackoverflow.com/users/2439725/wim"}, "edited": false, "score": 1, "creation_date": 1479936630, "post_id": 40201556, "comment_id": 68772782, "body": "Indeed gcc produces the correctly rounded result for every possible uint32_t (no need to check them all), because rounding only takes place in the final addition of the high and low 16 bit halves, see also <a href=\"http://stackoverflow.com/a/40766669/2439725\">here</a>. This addition is within 0.5 ULP according to the IEEE-754 standard."}], "tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 4, "last_activity_date": 1479947686, "last_edit_date": 1495541231, "creation_date": 1477215895, "answer_id": 40201556, "question_id": 40138067, "link": "https://stackoverflow.com/questions/40138067/strange-uint32-t-to-float-array-conversion/40201556#40201556", "title": "Strange uint32_t to float array conversion", "body": "<p>Converting between <code>unsigned</code> and <code>float</code> is not simple on x86; there's no single instruction for it (until AVX512).  A common technique is to convert as signed and then fixup the result.  There are multiple ways of doing this.  (See <a href=\"https://stackoverflow.com/questions/34066228/difference-in-converting-unsigned-signed-integer-into-float\">this Q&amp;A for some manually-vectorized methods with C intrinsics</a>, not all of which have perfectly-rounded results.)</p>\n\n<p>MSVC vectorizes the first 128 with one strategy, and then uses a different strategy (which wouldn't vectorize) for the last scalar element, which involves converting to <code>double</code> and then from <code>double</code> to <code>float</code>.</p>\n\n<hr>\n\n<p>gcc and clang produce the <code>2570980608.0</code> result from their vectorized and scalar methods.  <code>2570980608 - 2570980487 = 121</code>, and <code>2570980487 - 2570980352 = 135</code> (with no rounding of inputs/outputs), so gcc and clang produce the correctly rounded result in this case (less than 0.5ulp of error).  IDK if that's true for every possible uint32_t (but there are only 2^32 of them, <a href=\"https://randomascii.wordpress.com/2014/01/27/theres-only-four-billion-floatsso-test-them-all/\" rel=\"nofollow noreferrer\">we could exhaustively check</a>).  MSVC's end result for the vectorized loop has slightly more than 0.5ulp of error, but the scalar method is correctly rounded for this input.</p>\n\n<p>IEEE math demands that <code>+</code> <code>-</code> <code>*</code> <code>/</code> and <code>sqrt</code> produce correctly rounded results (less than 0.5ulp of error), but other functions (like <code>log</code>) don't have such a strict requirement.  IDK what the requirements are on rounding for int->float conversions, so IDK if what MSVC does is strictly legal (if you didn't use <code>/fp:fast</code> or anything).</p>\n\n<p>See also Bruce Dawson's <a href=\"https://randomascii.wordpress.com/2013/07/16/floating-point-determinism/\" rel=\"nofollow noreferrer\">Floating-Point Determinism blog post</a> (part of his excellent series about FP math), although he doesn't mention integer&lt;->FP conversions.</p>\n\n<hr>\n\n<p>We can see in the asm linked by the OP what MSVC did <strong>(stripped down to only the interesting instructions and commented by hand)</strong>:</p>\n\n<pre><code>; Function compile flags: /Ogtp\n# assembler macro constants\n_arr_dst$ = -1040                   ; size = 516\n_arr$ = -520                        ; size = 516\n_main   PROC                        ; COMDAT\n\n  00013      mov     edx, 129\n  00018      mov     eax, -1723986809   ; this is your unsigned 2570980487\n  0001d      mov     ecx, edx\n  00023      lea     edi, DWORD PTR _arr$[esp+1088]  ; edi=arr\n  0002a      rep stosd             ; memset in chunks of 4B\n  # arr[0..128] = 2570980487 at this point\n\n  0002c      xor     ecx, ecx      ; i = 0\n  # xmm2 = 0.0 in each element (i.e. all-zero)\n  # xmm3 = __xmm@4f8000004f8000004f8000004f800000  (a constant repeated in each of 4 float elements)\n\n\n  ####### The vectorized unsigned-&gt;float conversion strategy:\n  $LL7@main:                                       ; do{\n  00030      movups  xmm0, XMMWORD PTR _arr$[esp+ecx*4+1088]  ; load 4 uint32_t\n  00038      cvtdq2ps xmm1, xmm0                 ; SIGNED int to Single-precision float\n  0003b      movaps  xmm0, xmm1\n  0003e      cmpltps xmm0, xmm2                  ; xmm0 = (xmm0 &lt; 0.0)\n  00042      andps   xmm0, xmm3                  ; mask the magic constant\n  00045      addps   xmm0, xmm1                  ; x += (x&lt;0.0) ? magic_constant : 0.0f;\n   # There's no instruction for converting from unsigned to float, so compilers use inconvenient techniques like this to correct the result of converting as signed.\n  00048      movups  XMMWORD PTR _arr_dst$[esp+ecx*4+1088], xmm0 ; store 4 floats to arr_dst\n  ; and repeat the same thing again, with addresses that are 16B higher (+1104)\n  ; i.e. this loop is unrolled by two\n\n  0006a      add     ecx, 8         ;  i+=8 (two vectors of 4 elements)\n  0006d      cmp     ecx, 128\n  00073      jb  SHORT $LL7@main    ; }while(i&lt;128)\n\n #### End of vectorized loop\n # and then IDK what MSVC smoking; both these values are known at compile time.  Is /Ogtp not full optimization?\n # I don't see a branch target that would let execution reach this code\n #  other than by falling out of the loop that ends with ecx=128\n  00075      cmp     ecx, edx\n  00077      jae     $LN21@main     ; if(i&gt;=129): always false\n\n  0007d      sub     edx, ecx       ; edx = 129-128 = 1\n</code></pre>\n\n<p>... some more ridiculous known-at-compile-time jumping later ...</p>\n\n<pre><code> ######## The scalar unsigned-&gt;float conversion strategy for the last element\n$LC15@main:\n  00140      mov     eax, DWORD PTR _arr$[esp+ecx*4+1088]\n  00147      movd    xmm0, eax\n  # eax = xmm0[0] = arr[128]\n  0014b      cvtdq2pd xmm0, xmm0        ; convert the last element TO DOUBLE\n  0014f      shr     eax, 31            ; shift the sign bit to bit 1, so eax = 0 or 1\n     ; then eax indexes a 16B constant, selecting either 0 or 0x41f0... (as whatever double that represents)\n  00152      addsd   xmm0, QWORD PTR __xmm@41f00000000000000000000000000000[eax*8]\n  0015b      cvtpd2ps xmm0, xmm0        ; double -&gt; float\n  0015f      movss   DWORD PTR _arr_dst$[esp+ecx*4+1088], xmm0  ; and store it\n\n  00165      inc     ecx            ;   ++i;\n  00166      cmp     ecx, 129       ; } while(i&lt;129)\n  0016c      jb  SHORT $LC15@main\n  # Yes, this is a loop, which always runs exactly once for the last element\n</code></pre>\n\n<hr>\n\n<p>By way of comparison, clang and gcc also don't optimize the whole thing away at compile time, but they do realize that they don't need a cleanup <em>loop</em>, and just do a single scalar store or convert after the respective loops.  (clang actually fully unrolls everything unless you tell it not to.)</p>\n\n<p>See the code on the <a href=\"http://gcc.godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,options:(colouriseAsm:&#39;0&#39;,compileOnChange:&#39;0&#39;),source:&#39;%23include+%3Ccstdio%3E%0A//+I+had+to+compile+with+-std%3Dc%2B%2B11+for+this+to+define+uint32_t+in+clang.++IDK+why%0A%23include+%3Ccstdint%3E%0A%0A%0Astatic+const+size_t+ARR_SIZE+%3D+129%3B%0A%0Aint+main()%0A%7B%0A++uint32_t+value+%3D+2570980487%3B%0A%0A++uint32_t+arr%5BARR_SIZE%5D%3B%0A++for+(int+x+%3D+0%3B+x+%3C+ARR_SIZE%3B+%2B%2Bx)%0A++++arr%5Bx%5D+%3D+value%3B%0A%0A++float+arr_dst%5BARR_SIZE%5D%3B%0A++for+(int+x+%3D+0%3B+x+%3C+ARR_SIZE%3B+%2B%2Bx)%0A++%7B%0A++++arr_dst%5Bx%5D+%3D+static_cast%3Cfloat%3E(arr%5Bx%5D)%3B%0A++%7D%0A%0A++printf(%22%25s%5Cn%22,+arr_dst%5BARR_SIZE+-+1%5D+%3D%3D+arr_dst%5BARR_SIZE+-+2%5D+%3F+%22OK%22+:+%22WTF%3F%3F!!!!%22)%3B%0A%0A++printf(%22magic+%3D+%250.10f%5Cn%22,+arr_dst%5BARR_SIZE-2%5D)%3B%0A++printf(%22magic+%3D+%250.10f%5Cn%22,+arr_dst%5BARR_SIZE-1%5D)%3B%0A++return+0%3B%0A%7D&#39;),l:&#39;5&#39;,n:&#39;1&#39;,o:&#39;C%2B%2B+source+%231&#39;,t:&#39;0&#39;)),k:50,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((g:!((h:compiler,i:(compiler:clang390,filters:(b:&#39;0&#39;,commentOnly:&#39;0&#39;,directives:&#39;0&#39;,intel:&#39;0&#39;),options:&#39;-std%3Dc%2B%2B11+-m32+-Wall+-fno-fast-math+-O3+-fverbose-asm+-fno-unroll-loops+-msse2+-mfpmath%3Dsse&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;%231+with+x86-64+clang+3.9.0&#39;,t:&#39;0&#39;)),k:50,l:&#39;4&#39;,m:80.51470588235294,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:output,i:(compiler:1,editor:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;%231+with+x86-64+clang+3.9.0&#39;,t:&#39;0&#39;)),l:&#39;4&#39;,m:19.485294117647058,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),k:50,l:&#39;3&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),l:&#39;2&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),version:4\" rel=\"nofollow noreferrer\">Godbolt compiler explorer</a>.</p>\n\n<p>gcc just converts the upper and lower 16b halves to float separately, and combines them with a multiply by 65536 and add.</p>\n\n<p>Clang's <code>unsigned</code> -> <code>float</code> conversion strategy is interesting: it never uses a <code>cvt</code> instruction at all.  I think it stuffs the two 16-bit halves of the unsigned integer into the mantissa of two floats directly (with some tricks to set the exponents (bitwise boolean stuff and an ADDPS), then adds the low and high half together like gcc does.</p>\n\n<p>Of course, if you compile to 64-bit code, the scalar conversion can just zero-extend the <code>uint32_t</code> to 64-bit and convert that as a signed int64_t to float.  Signed int64_t can represent every value of uint32_t, and x86 can convert a 64-bit signed int to float efficiently.  But that doesn't vectorize.</p>\n"}], "owner": {"reputation": 1046, "user_id": 191224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6eae849a92fc634c2a5c41b1dcd879?s=128&d=identicon&r=PG", "display_name": "Senyai", "link": "https://stackoverflow.com/users/191224/senyai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 939, "favorite_count": 1, "accepted_answer_id": 40193906, "answer_count": 3, "score": 9, "last_activity_date": 1479947686, "creation_date": 1476898631, "last_edit_date": 1479216465, "question_id": 40138067, "link": "https://stackoverflow.com/questions/40138067/strange-uint32-t-to-float-array-conversion", "title": "Strange uint32_t to float array conversion", "body": "<p>I have the following code snippet:</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;cstdint&gt;\n\nstatic const size_t ARR_SIZE = 129;\n\nint main()\n{\n  uint32_t value = 2570980487;\n\n  uint32_t arr[ARR_SIZE];\n  for (int x = 0; x &lt; ARR_SIZE; ++x)\n    arr[x] = value;\n\n  float arr_dst[ARR_SIZE];\n  for (int x = 0; x &lt; ARR_SIZE; ++x)\n  {\n    arr_dst[x] = static_cast&lt;float&gt;(arr[x]);\n  }\n\n  printf(\"%s\\n\", arr_dst[ARR_SIZE - 1] == arr_dst[ARR_SIZE - 2] ? \"OK\" : \"WTF??!!\");\n\n  printf(\"magic = %0.10f\\n\", arr_dst[ARR_SIZE - 2]);\n  printf(\"magic = %0.10f\\n\", arr_dst[ARR_SIZE - 1]);\n  return 0;\n}\n</code></pre>\n\n<p>If I compile it under MS Visual Studio 2015 I can see that the output is:</p>\n\n<pre><code>WTF??!!\nmagic = 2570980352.0000000000\nmagic = 2570980608.0000000000\n</code></pre>\n\n<p>So the last <code>arr_dst</code> element is different from the previous one, yet these two values were obtained by converting the same value, which populates the arr array!\nIs it a bug?</p>\n\n<p>I noticed that if I modify the conversion loop in the following manner, I get the \"OK\" result:</p>\n\n<pre><code>for (int x = 0; x &lt; ARR_SIZE; ++x)\n{\n  if (x == 0)\n    x = 0;\n  arr_dst[x] = static_cast&lt;float&gt;(arr[x]);\n}\n</code></pre>\n\n<p>So this probably is some issue with vectorizing optimisation. </p>\n\n<p>This behavior does not reproduce on gcc 4.8. Any ideas?</p>\n"}, {"tags": ["c++", "constructor"], "comments": [{"owner": {"reputation": 8201, "user_id": 3690024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2d5067f52318f0ed4db9eca0b2cda1?s=128&d=identicon&r=PG", "display_name": "AJNeufeld", "link": "https://stackoverflow.com/users/3690024/ajneufeld"}, "edited": false, "score": 3, "creation_date": 1476898774, "post_id": 40138017, "comment_id": 67545852, "body": "Use <code>PublicKey *a</code> and <code>PrivateKey *b</code>, and construct them inside the constructor body <code>{ ... }</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 8201, "user_id": 3690024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2d5067f52318f0ed4db9eca0b2cda1?s=128&d=identicon&r=PG", "display_name": "AJNeufeld", "link": "https://stackoverflow.com/users/3690024/ajneufeld"}, "edited": false, "score": 3, "creation_date": 1476898797, "post_id": 40138017, "comment_id": 67545868, "body": "@AJNeufeld The answer box is down below."}, {"owner": {"reputation": 10627, "user_id": 1537925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U8DRJ.png?s=128&g=1", "display_name": "The Vee", "link": "https://stackoverflow.com/users/1537925/the-vee"}, "edited": false, "score": 0, "creation_date": 1476899007, "post_id": 40138017, "comment_id": 67545988, "body": "Crystal clear. OMG, what was I even thinking? Care to post an answer?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1476900581, "post_id": 40138017, "comment_id": 67546966, "body": "BTW, losing 1 min over 1 year is not really an issue."}, {"owner": {"reputation": 10627, "user_id": 1537925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U8DRJ.png?s=128&g=1", "display_name": "The Vee", "link": "https://stackoverflow.com/users/1537925/the-vee"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1476900694, "post_id": 40138017, "comment_id": 67547039, "body": "@Jarod42 Realized that after posting. But I didn&#39;t want to have to think of another problem that has similar properties."}], "answers": [{"comments": [{"owner": {"reputation": 10627, "user_id": 1537925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U8DRJ.png?s=128&g=1", "display_name": "The Vee", "link": "https://stackoverflow.com/users/1537925/the-vee"}, "edited": false, "score": 0, "creation_date": 1477599534, "post_id": 40138153, "comment_id": 67845418, "body": "I wish I could accept both solutions. I chose the other answer for its elegance and semantic clarity but yours is perfect if one wants to eliminate the extra pointer resolution at each method call of A or B, as I often consider important."}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": false, "score": 3, "last_activity_date": 1476899468, "last_edit_date": 1476899468, "creation_date": 1476898906, "answer_id": 40138153, "question_id": 40138017, "link": "https://stackoverflow.com/questions/40138017/constructor-initializer-list-vs-expensive-operations/40138153#40138153", "title": "Constructor initializer list vs. expensive operations", "body": "<p>If the classes are at least move-constructible, you should be able to do this:</p>\n\n<pre><code>struct KeyPair\n{\n  PublicKey a;\n  PrivateKey b;\n  KeyPair(std::pair&lt;PublicKey, PrivateKey&gt; &amp;&amp;data) :\n    a(std::move(data.first)),\n    b(std::move(data.second))\n  {}\n};\n\nstd::pair&lt;PublicKey, PrivateKey&gt; computePublicFirst()\n{\n  PublicKey a;\n  PrivateKey b(a);\n  return {std::move(a), std::move(b)};\n}\n\nstd::pair&lt;PublicKey, PrivateKey&gt; computePrivateFirst()\n{\n  PrivateKey b;\n  PublicKey a(b);\n  return {std::move(a), std::move(b)};\n}\n\nstruct X\n{\n  KeyPair keys;\n  X(int) : keys(computePublicFirst()) {}\n  X(float) : keys(computePrivateFirst()) {}\n};\n</code></pre>\n\n<p>No move assignments happen, only move construction.</p>\n"}, {"comments": [{"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 1, "creation_date": 1476899156, "post_id": 40138195, "comment_id": 67546091, "body": "Maybe, even if the code is self-explanatory, the code should have an explanation, because it could help those in the future."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 1, "creation_date": 1476899158, "post_id": 40138195, "comment_id": 67546092, "body": "You could mention that in practice, <code>std::unique_ptr</code> should be used instead of raw pointers."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1476899778, "post_id": 40138195, "comment_id": 67546496, "body": "Now that you are using <code>unique_ptr</code> you should be using <code>make_unique</code> in the constructor bodies."}, {"owner": {"reputation": 8201, "user_id": 3690024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2d5067f52318f0ed4db9eca0b2cda1?s=128&d=identicon&r=PG", "display_name": "AJNeufeld", "link": "https://stackoverflow.com/users/3690024/ajneufeld"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1476900005, "post_id": 40138195, "comment_id": 67546642, "body": "@NathanOliver Due to multiple suggested improvements, I&#39;ve changed this to a community wiki.  Additional improvements may be made directly to the answer."}, {"owner": {"reputation": 10627, "user_id": 1537925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U8DRJ.png?s=128&g=1", "display_name": "The Vee", "link": "https://stackoverflow.com/users/1537925/the-vee"}, "edited": false, "score": 0, "creation_date": 1476900073, "post_id": 40138195, "comment_id": 67546676, "body": "Made some myself to save others&#39; work. Thanks a lot!"}], "tags": [], "owner": {"reputation": 8201, "user_id": 3690024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2d5067f52318f0ed4db9eca0b2cda1?s=128&d=identicon&r=PG", "display_name": "AJNeufeld", "link": "https://stackoverflow.com/users/3690024/ajneufeld"}, "is_accepted": true, "score": 7, "last_activity_date": 1476900005, "last_edit_date": 1476900005, "creation_date": 1476899006, "answer_id": 40138195, "question_id": 40138017, "link": "https://stackoverflow.com/questions/40138017/constructor-initializer-list-vs-expensive-operations/40138195#40138195", "title": "Constructor initializer list vs. expensive operations", "body": "<p>The construction order issue can be avoided by using pointers to the contained classes, instead of embedding the contained classes directly, and constructing the contained objects yourself inside the body of the constructor.</p>\n\n<pre><code>struct X {\n  std::unique_ptr&lt;PublicKey&gt; a;\n  std::unique_ptr&lt;PrivateKey&gt; b;\n  X(int) {\n    a = std::make_unique&lt;PublicKey&gt;();\n    b = std::make_unique&lt;PrivateKey&gt;(*a);\n  }\n  X(float) {\n    b = std::make_unique&lt;PrivateKey&gt;();\n    a = std::make_unique&lt;PublicKey&gt;(*b);\n  }\n};\n</code></pre>\n"}], "owner": {"reputation": 10627, "user_id": 1537925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U8DRJ.png?s=128&g=1", "display_name": "The Vee", "link": "https://stackoverflow.com/users/1537925/the-vee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 40138195, "answer_count": 2, "score": 4, "last_activity_date": 1476900005, "creation_date": 1476898477, "question_id": 40138017, "link": "https://stackoverflow.com/questions/40138017/constructor-initializer-list-vs-expensive-operations", "title": "Constructor initializer list vs. expensive operations", "body": "<p>Consider a hypothetical scenario where two classes can be default-constructed or constructed from each other but either way is considered to be expensive (intentionally contrived example follows):</p>\n\n<pre><code>struct PrivateKey;\n\nstruct PublicKey {\n  PublicKey(); // generate a random public key (1 minute)\n  PublicKey(const PrivateKey&amp; b); // find a public key corresponding to a private key (1 year)\n  ...members...\n};\n\nstruct PrivateKey {\n  PrivateKey(); // generate a random private key (1 minute)\n  PrivateKey(const PublicKey&amp; a); // find a private key corresponding to a public key (1 year)\n  ...members...\n};\n</code></pre>\n\n<p>(This could of course be condensed to one class but the validity of the question is unaffected. Let's say for the sake of coherence there's no symmetry between one and the other.)</p>\n\n<p>Now there's a structure which holds instances of both and needs this cross-initialization. However, we may need both directions, so initializer lists can't really cut it (they aren't run in the order listed but in the order the members are defined, and no order can be fixed here):</p>\n\n<pre><code>struct X {\n  PublicKey a;\n  PrivateKey b;\n  X(int): a(), b(a) { }\n  X(float): b(), a(b) { } // UB: a(b) happens before b is initialized\n};\n</code></pre>\n\n<p>Of course I could try:</p>\n\n<pre><code>struct X {\n  PublicKey a;\n  PrivateKey b;\n  X(int): a(), b(a) { }\n  X(float): a(), b() { a = PublicKey(b); }\n};\n</code></pre>\n\n<p>but this has multiple issues, of which <em>running the expensive default-construction</em> of <code>PublicKey</code> in the second constructor of <code>X</code> just to throw the result right away is just the first. <em>There may be side effects</em> to <code>PublicKey::PublicKey()</code>. Both could still be mitigated by creating a cheap private constructor exposed only to a friend <code>X</code> which would put the class in some dummy state, but toss in some reference or constant members and <em>the class may not be move-assignable or swappable</em>, forbidding any variation on the <code>X::X(float)</code>'s body. Is there a better pattern to follow?</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7043722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e919b14f2ae93e81f15218d1dbdd119?s=128&d=identicon&r=PG&f=1", "display_name": "Aswin Suresh", "link": "https://stackoverflow.com/users/7043722/aswin-suresh"}, "edited": false, "score": 0, "creation_date": 1476898975, "post_id": 40138027, "comment_id": 67545969, "body": "Thanks. So is there any other way of displaying the number?"}], "tags": [], "owner": {"reputation": 212, "user_id": 6881791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b48ea546905ef3c14ffc721d54f7eec?s=128&d=identicon&r=PG&f=1", "display_name": "Xavier Imbs", "link": "https://stackoverflow.com/users/6881791/xavier-imbs"}, "is_accepted": false, "score": 2, "last_activity_date": 1476898504, "creation_date": 1476898504, "answer_id": 40138027, "question_id": 40137978, "link": "https://stackoverflow.com/questions/40137978/improper-printing-of-uint8-t-variable/40138027#40138027", "title": "Improper printing of uint8_t variable", "body": "<p>That's because on your platform, <code>uint8_t</code> is a <code>typedef</code> for an <code>unsigned char</code>.</p>\n\n<p>And the ostream overloaded <code>&lt;&lt;</code> for an <code>unsigned char</code> outputs a character, rather than a number, since the clever C++ folk thought that to be sensible. It normally is.</p>\n\n<p>You can fix this by casting to an <code>int</code>, which will always be able to accept an <code>uint8_t</code> value.</p>\n\n<p>(Note that prior to C++14, a <code>char</code> could be a 1's complement or signed magnitude 8 bit signed type, so it could be different to uint8_t).</p>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 4, "last_activity_date": 1476898555, "creation_date": 1476898555, "answer_id": 40138042, "question_id": 40137978, "link": "https://stackoverflow.com/questions/40137978/improper-printing-of-uint8-t-variable/40138042#40138042", "title": "Improper printing of uint8_t variable", "body": "<p><code>uint8_t</code> is not a separate data type. On systems that provide it the actual type is aliased to some standard data type, most commonly, an <code>unsigned char</code>.</p>\n\n<p>Operator <code>&lt;&lt;</code> provides an overload that takes <code>unsigned char</code>, and prints it as a character. When you are printing your <code>uint8_t</code> variable as an <code>int</code>, cast it to an <code>int</code> for printing:</p>\n\n<pre><code>std::cout &lt;&lt; \"My ID is \"&lt;&lt; int(myID) &lt;&lt;std::endl;\n//                         ^^^^^\n</code></pre>\n\n<p><a href=\"http://ideone.com/RySIHa\" rel=\"nofollow\">Demo.</a></p>\n"}], "owner": {"reputation": 33, "user_id": 7043722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e919b14f2ae93e81f15218d1dbdd119?s=128&d=identicon&r=PG&f=1", "display_name": "Aswin Suresh", "link": "https://stackoverflow.com/users/7043722/aswin-suresh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 752, "favorite_count": 0, "closed_date": 1476976282, "accepted_answer_id": 40138042, "answer_count": 2, "score": 3, "last_activity_date": 1476952196, "creation_date": 1476898322, "last_edit_date": 1476952196, "question_id": 40137978, "link": "https://stackoverflow.com/questions/40137978/improper-printing-of-uint8-t-variable", "closed_reason": "Duplicate", "title": "Improper printing of uint8_t variable", "body": "<p>I am trying to read a small integer value (less than 10) to a uint8_t variable. I do it like this </p>\n\n<pre><code>uint8_t myID = atoi(argv[5]);\n</code></pre>\n\n<p>However when I do this</p>\n\n<pre><code>std::cout &lt;&lt; \"My ID is \"&lt;&lt; myID &lt;&lt;std::endl;\n</code></pre>\n\n<p>It prints some non-alphanumeric character. There is no issue when myID is of type int. I tried casting explicitly by doing</p>\n\n<pre><code>uint8_t myID = (uint8_t)atoi(argv[5]);  \n</code></pre>\n\n<p>But the results are the same. Could anyone explain why this is the case and if there is any possible solution? </p>\n"}, {"tags": ["c++", "function", "class", "constants"], "answers": [{"comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1476898407, "post_id": 40137972, "comment_id": 67545648, "body": "Member functions declared as <code>const</code> can be called on non-constant objects."}, {"owner": {"reputation": 212, "user_id": 6881791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b48ea546905ef3c14ffc721d54f7eec?s=128&d=identicon&r=PG&f=1", "display_name": "Xavier Imbs", "link": "https://stackoverflow.com/users/6881791/xavier-imbs"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1476898762, "post_id": 40137972, "comment_id": 67545844, "body": "thank you, I had this the wrong way round. Your answer is much nicer than mine."}], "tags": [], "owner": {"reputation": 212, "user_id": 6881791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b48ea546905ef3c14ffc721d54f7eec?s=128&d=identicon&r=PG&f=1", "display_name": "Xavier Imbs", "link": "https://stackoverflow.com/users/6881791/xavier-imbs"}, "is_accepted": false, "score": 0, "last_activity_date": 1476898753, "last_edit_date": 1476898753, "creation_date": 1476898313, "answer_id": 40137972, "question_id": 40137928, "link": "https://stackoverflow.com/questions/40137928/why-use-a-const-member-function/40137972#40137972", "title": "Why use a const member function?", "body": "<p>A const instance of a class can only call const functions.</p>\n\n<p>Having a const instance of a class is useful for making your programs more stable since then you can't modify the instance by accident.</p>\n\n<p>In your case the functions do exactly the same thing, but it doesn't have to be that way.</p>\n"}, {"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 30, "last_activity_date": 1476898668, "last_edit_date": 1476898668, "creation_date": 1476898366, "answer_id": 40137989, "question_id": 40137928, "link": "https://stackoverflow.com/questions/40137928/why-use-a-const-member-function/40137989#40137989", "title": "Why use a const member function?", "body": "<p>When you declare a member function as <code>const</code>, like in</p>\n\n<pre><code>int GetValue() const;\n</code></pre>\n\n<p>then you tell the compiler that it will not modify anything in the object.</p>\n\n<p>That also means you can call the member function on constant object. If you don't have the <code>const</code> modifier then you can't call it on an object that has been defined as <code>const</code>. You can still call <code>const</code> member functions on non-constant objects.</p>\n\n<p>Also note that the <code>const</code> modifier is part of the member function signature, which means you can overload it with a non-const function. That is you can have</p>\n\n<pre><code>int GetValue() const;\nint GetValue();\n</code></pre>\n\n<p>in the same class.</p>\n"}, {"comments": [{"owner": {"reputation": 56, "user_id": 13545849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s0pvO.jpg?s=128&g=1", "display_name": "FreePhoenix", "link": "https://stackoverflow.com/users/13545849/freephoenix"}, "edited": false, "score": 0, "creation_date": 1617692836, "post_id": 40138388, "comment_id": 118367469, "body": "Your answer is very detailed, thank you ^_^"}], "tags": [], "owner": {"reputation": 588, "user_id": 2612003, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1071263954/picture?type=large", "display_name": "Noah Herron", "link": "https://stackoverflow.com/users/2612003/noah-herron"}, "is_accepted": false, "score": 13, "last_activity_date": 1476900851, "last_edit_date": 1476900851, "creation_date": 1476899632, "answer_id": 40138388, "question_id": 40137928, "link": "https://stackoverflow.com/questions/40137928/why-use-a-const-member-function/40138388#40138388", "title": "Why use a const member function?", "body": "<p><code>const</code> can show up in three different places in C++.</p>\n\n<p>Example 1:</p>\n\n<p><code>const Object obj1;</code></p>\n\n<ul>\n<li>obj1 is a <code>const</code> object. Meaning that you can not change anything on this object. This object can only call <code>const</code> member functions like </li>\n</ul>\n\n<blockquote>\n  <p>int GetValue() const {return a_private_variable;}</p>\n</blockquote>\n\n<p>Example 2:</p>\n\n<p><code>int myMethod() const {//do something}</code></p>\n\n<ul>\n<li>This is a <code>const</code> method. It would be a <code>const</code> member function if it is declared inside of a class. These are the types of methods that <code>const</code> variables can call.</li>\n</ul>\n\n<p>Example 3:</p>\n\n<p><code>int myMethod(const Object &amp;x) {//do something with x}</code></p>\n\n<ul>\n<li>This is a method that takes a <code>const</code> parameter. This means that the logic inside <code>myMethod</code> is not allowed to change anything to do with <code>x</code>. Also note the parameter is being passed by reference not by copy. I like to think of this as a read only type of method.</li>\n</ul>\n\n<p>When you are developing software that will be used by others; it is a good idea to not let them break things they don't know they should not break. In this case you can constrain variables, methods, and parameters to be <code>const</code> to guaranteed that the contract is upheld. I tried to summarize the main ideas I learned in college, but there are many resources online around <code>const</code> in C++. Check out this <a href=\"http://www.learncpp.com/cpp-tutorial/810-const-class-objects-and-member-functions/\" rel=\"noreferrer\">link</a> if you would like to know more. Also it is possible that I remembered somethings incorrectly as I have not been in the C/C++ realm for a while.</p>\n"}], "owner": {"reputation": 123, "user_id": 5950594, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o840y18Wpyw/AAAAAAAAAAI/AAAAAAAAZVc/FxgXG3z2CHs/photo.jpg?sz=128", "display_name": "noppy tinto", "link": "https://stackoverflow.com/users/5950594/noppy-tinto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10484, "favorite_count": 6, "accepted_answer_id": 40137989, "answer_count": 3, "score": 10, "last_activity_date": 1476900851, "creation_date": 1476898181, "last_edit_date": 1476898322, "question_id": 40137928, "link": "https://stackoverflow.com/questions/40137928/why-use-a-const-member-function", "title": "Why use a const member function?", "body": "<p>i'm trying to understand class getters and setters functions...</p>\n\n<p>My question is:\nIf i design a function that just only get a state from its class (a \"getter\" function), why mark it as \"const member function\"?\nI mean, why use a const member function if my function is designed to not change any proprieties of its class?\ni don't understand please :(</p>\n\n<p>for example:</p>\n\n<pre><code>int GetValue() {return a_private_variable;}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>int GetValue() const {return a_private_variable;}\n</code></pre>\n\n<p>what is the real difference?</p>\n"}, {"tags": ["c++", "memory"], "comments": [{"owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "edited": false, "score": 1, "creation_date": 1476898011, "post_id": 40137853, "comment_id": 67545417, "body": "&amp;rValue is taking the pointer to rValue. A pointer to a pointer doesn&#39;t equal the pointer itself."}, {"owner": {"reputation": 67, "user_id": 4036676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc118b39b8fc3fdbe4e226e1ee70f15?s=128&d=identicon&r=PG&f=1", "display_name": "Dac Asf", "link": "https://stackoverflow.com/users/4036676/dac-asf"}, "reply_to_user": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "edited": false, "score": 0, "creation_date": 1476898111, "post_id": 40137853, "comment_id": 67545468, "body": "I am asking why I get a different memory address when I run the first segment vs when I run the second segment."}], "answers": [{"tags": [], "owner": {"reputation": 212, "user_id": 6881791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b48ea546905ef3c14ffc721d54f7eec?s=128&d=identicon&r=PG&f=1", "display_name": "Xavier Imbs", "link": "https://stackoverflow.com/users/6881791/xavier-imbs"}, "is_accepted": true, "score": 3, "last_activity_date": 1476898084, "creation_date": 1476898084, "answer_id": 40137908, "question_id": 40137853, "link": "https://stackoverflow.com/questions/40137853/why-do-i-get-different-memory-addresses-for-pointer-passed-to-function/40137908#40137908", "title": "Why Do I Get Different Memory Addresses For Pointer Passed To Function?", "body": "<p>Even pointers themselves take up memory and have an address associated with them.</p>\n\n<p>So &amp;rValue is the address of the the pointer rValue, and, unless it's a pointer to a function, that address will be different.</p>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 2, "last_activity_date": 1476898190, "creation_date": 1476898190, "answer_id": 40137933, "question_id": 40137853, "link": "https://stackoverflow.com/questions/40137853/why-do-i-get-different-memory-addresses-for-pointer-passed-to-function/40137933#40137933", "title": "Why Do I Get Different Memory Addresses For Pointer Passed To Function?", "body": "<p>The reason for this behavior is that pointers are passed by value. In other words, when your function receives a pointer-typed parameter <code>rValue</code> like this</p>\n\n<pre><code>int pMem(int *rValue)\n</code></pre>\n\n<p>C++ allocates space for a brand-new variable of type <code>int*</code>, complete with its own address in memory. This variable gets initialized from a pointer expression that you pass to <code>pMem</code>. Other than that, it is a separate variable that behaves like a local variable to <code>pMem</code>. In particular, any re-assignments of the parameter itself have no effect on the caller.</p>\n\n<p>It is the address of that parameter variable that gets printed when you do this:</p>\n\n<pre><code>cout &lt;&lt; &amp;pValue &lt;&lt; endl; // Prints a new address\n</code></pre>\n\n<p>If you would like to see the address that you passed to the function, print the pointer, not the address of it:</p>\n\n<pre><code>cout &lt;&lt; pValue &lt;&lt; endl;  // Prints the address that you passed\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 4036676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc118b39b8fc3fdbe4e226e1ee70f15?s=128&d=identicon&r=PG&f=1", "display_name": "Dac Asf", "link": "https://stackoverflow.com/users/4036676/dac-asf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 40137908, "answer_count": 2, "score": 1, "last_activity_date": 1476898190, "creation_date": 1476897857, "question_id": 40137853, "link": "https://stackoverflow.com/questions/40137853/why-do-i-get-different-memory-addresses-for-pointer-passed-to-function", "title": "Why Do I Get Different Memory Addresses For Pointer Passed To Function?", "body": "<p>Basically my question is, when I run these two segments of code, I get different memory addresses. The first segment of code gives a certain memory address for rValue, and the second gives a different memory address for rValue, just by adding a &amp; operator. Why does this happen?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\n\nint pMem(int *rValue){\n\ncout &lt;&lt; \"Value of rValue is \" &lt;&lt; *rValue &lt;&lt; endl;;\ncout &lt;&lt; \"Address of rValue is \" &lt;&lt; rValue &lt;&lt; endl;\n*rValue = 15;\ncout &lt;&lt; \"Value of rValue now is \" &lt;&lt; *rValue &lt;&lt; endl;\ncout &lt;&lt; \"Address of rValue is \" &lt;&lt; rValue &lt;&lt; endl;\n\nreturn *rValue;\n\n}\n\nint main() {\n\n\nint value = 8;\nint *pValue = &amp;value;\n\npMem(&amp;value);\n\n\n\ncout &lt;&lt; \"Value = \" &lt;&lt; value &lt;&lt; endl;\ncout &lt;&lt; \"Address of Value: \" &lt;&lt; pValue &lt;&lt; endl;\ncout &lt;&lt; \"Value at memory address \" &lt;&lt; pValue &lt;&lt; \": \" &lt;&lt; *pValue &lt;&lt; endl;\n\n\nreturn 0;\n}\n</code></pre>\n\n<p>2nd block of code, this time with the &amp;rValue... I get a different memory address than the first block of code.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\n\nint pMem(int *rValue){\n\ncout &lt;&lt; \"Value of rValue is \" &lt;&lt; *rValue &lt;&lt; endl;;\ncout &lt;&lt; \"Address of rValue is \" &lt;&lt; &amp;rValue &lt;&lt; endl;\n*rValue = 15;\ncout &lt;&lt; \"Value of rValue now is \" &lt;&lt; *rValue &lt;&lt; endl;\ncout &lt;&lt; \"Address of rValue is \" &lt;&lt; &amp;rValue &lt;&lt; endl;\n\nreturn *rValue;\n\n}\n\nint main() {\n\n\nint value = 8;\nint *pValue = &amp;value;\n\npMem(&amp;value);\n\n\n\ncout &lt;&lt; \"Value = \" &lt;&lt; value &lt;&lt; endl;\ncout &lt;&lt; \"Address of Value: \" &lt;&lt; pValue &lt;&lt; endl;\ncout &lt;&lt; \"Value at memory address \" &lt;&lt; pValue &lt;&lt; \": \" &lt;&lt; *pValue &lt;&lt; endl;\n\n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "boost", "boost-thread"], "owner": {"reputation": 1393, "user_id": 2617356, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3cfae1a357ff370b532d5ab3990587fe?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 W. Urba\u0144czyk", "link": "https://stackoverflow.com/users/2617356/micha%c5%82-w-urba%c5%84czyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1476897658, "creation_date": 1476897658, "question_id": 40137804, "link": "https://stackoverflow.com/questions/40137804/boostbarrier-object-lifetime-should-it-be-kept-alive-after-all-threads-reach", "title": "boost::barrier object lifetime \u2014 should it be kept alive after all threads reach wait()?", "body": "<p>Consider the following:</p>\n\n<pre><code>#include &lt;boost/thread.hpp&gt;\n\nboost::thread spawn() {\n    boost::barrier barrier{2};\n    boost::thread ret{[&amp;barrier] {\n        // some initialization code  \n        barrier.wait();\n        // actual thread code\n    }};\n\n    barrier.wait();\n    return ret;\n}\n</code></pre>\n\n<p>The <code>spawn</code> function creates a <code>boost::barrier</code> object on the stack, spawns a new thread and then waits until it reaches the barrier. The purpose is that <code>spawn</code> function wants to wait until the spawned thread has been actually started and initialized before returning control.</p>\n\n<p>After the new thread reaches the barrier, the <code>spawn</code> function resumes, destroys the barrier object and returns. Looks quite neat.</p>\n\n<p>Is the presented approach safe? If not, what is the recommended way to achieve the desired behaviour? (I guess I could keep the barrier under <code>shared_ptr</code> but that somehow doesn't feel like the right way.)</p>\n\n<hr>\n\n<p>I see a possible problematic case:</p>\n\n<ol>\n<li>main thread calls <code>wait</code></li>\n<li>spawned thread calls <code>wait</code> and wakes other threads (but the <code>wait</code> function does not finishes its job)</li>\n<li>parent thread wakes from <code>wait</code> and destroys the barrier</li>\n<li>spawned thread does some other things in <code>wait</code> (eg. looking for completion function) that can crash because they operate on the barrier object that was deleted</li>\n</ol>\n\n<p>So the question likely boils down to whether <code>wait</code> can be treated \"atomically\" (ie. it won't touch the barrier after threads are waked up) \u2014 unless I missed some other risks?</p>\n\n<p>The <a href=\"http://www.boost.org/doc/libs/1_62_0/doc/html/thread/synchronization.html#thread.synchronization.barriers.barrier.member_function__wait___\" rel=\"nofollow\">Boost documentation</a> says:</p>\n\n<blockquote>\n  <p>When the count-th thread calls wait, the barrier is reset and all waiting threads are unblocked.</p>\n</blockquote>\n\n<p>I'd say that the wording suggests that the barrier is touched first and only after that threads are unblocked \u2014 or is it just an unreliable overinterpretation?</p>\n"}, {"tags": ["c++", "c++11", "segmentation-fault"], "comments": [{"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 0, "creation_date": 1476911383, "post_id": 40137751, "comment_id": 67553074, "body": "There are multiple bugs in this. Each answer at the time of this writing highlights one bug."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 7043688, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KySa5FXX5po/AAAAAAAAAAI/AAAAAAAAAGY/oSRwuDOIRqo/photo.jpg?sz=128", "display_name": "Raikan 10", "link": "https://stackoverflow.com/users/7043688/raikan-10"}, "edited": false, "score": 0, "creation_date": 1476939388, "post_id": 40137969, "comment_id": 67560989, "body": "The value of n can be anything between1 \u2264n\u2264 1000000000 and 1&lt; k&lt;20; also if you want to understand the program more here&#39;s the question"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 37, "user_id": 7043688, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KySa5FXX5po/AAAAAAAAAAI/AAAAAAAAAGY/oSRwuDOIRqo/photo.jpg?sz=128", "display_name": "Raikan 10", "link": "https://stackoverflow.com/users/7043688/raikan-10"}, "edited": false, "score": 0, "creation_date": 1476955833, "post_id": 40137969, "comment_id": 67570148, "body": "@Raikan10 - so you need another zero in <code>a</code> dimension (<code>100000000</code> instead of <code>1000000000</code>); and, as pointed by AVK (+1), <code>a</code> is to big for the stack; so I suggest the use of a <code>std::vector</code>, or a <code>std::deque</code> (heap instead of stack); and better: avoid the use of <code>a</code>: you don&#39;t need it"}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 0, "last_activity_date": 1476898295, "creation_date": 1476898295, "answer_id": 40137969, "question_id": 40137751, "link": "https://stackoverflow.com/questions/40137751/why-does-this-code-have-a-segmentation-fault/40137969#40137969", "title": "Why does this code have a segmentation fault?", "body": "<p>If we don't know the values of <code>n</code> and <code>k</code>, we can't respond appropriately to your question.</p>\n\n<p>By example, if you give the value <code>21</code> to <code>k</code>, you write (<code>cin &gt;&gt; d[i]</code>) <code>d</code> in position <code>20</code>; this can cause the segmentation fault.</p>\n\n<p>Suggestions:</p>\n\n<p>1) run your program in a debugger</p>\n\n<p>2) check the values for <code>n</code> and <code>k</code> </p>\n\n<p>3) and use <code>std::vector</code> instead old C-style arrays and <code>at()</code> instead <code>operator[]</code> (by example: <code>cin &gt;&gt; d.at(i)</code>, <code>a.at(i) = i</code>, etc. instead <code>cin &gt;&gt; d[i]</code>, <code>a[i] = i</code>, etc.) because <code>at()</code> perform a bound checking.</p>\n"}, {"tags": [], "owner": {"reputation": 2001, "user_id": 6282716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/154ddf34b28d2f02091695d3c13853ed?s=128&d=identicon&r=PG&f=1", "display_name": "AVK", "link": "https://stackoverflow.com/users/6282716/avk"}, "is_accepted": false, "score": 1, "last_activity_date": 1476898820, "last_edit_date": 1476898820, "creation_date": 1476898439, "answer_id": 40138011, "question_id": 40137751, "link": "https://stackoverflow.com/questions/40137751/why-does-this-code-have-a-segmentation-fault/40138011#40138011", "title": "Why does this code have a segmentation fault?", "body": "<p>The stack has overflowed. There is no place for <code>int a[100000000]</code> as its size exceeds the default stack size (1MB on Windows)</p>\n"}], "owner": {"reputation": 37, "user_id": 7043688, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KySa5FXX5po/AAAAAAAAAAI/AAAAAAAAAGY/oSRwuDOIRqo/photo.jpg?sz=128", "display_name": "Raikan 10", "link": "https://stackoverflow.com/users/7043688/raikan-10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1476898820, "creation_date": 1476897482, "last_edit_date": 1476898649, "question_id": 40137751, "link": "https://stackoverflow.com/questions/40137751/why-does-this-code-have-a-segmentation-fault", "title": "Why does this code have a segmentation fault?", "body": "<p>I find that that while running this code it says:\n<code>Thread1:EXC_BAD_ACCESS(code=1,address=0x7fff3010efcc)</code>    </p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main()\n{\nint d[20],n,k,j,i,a[100000000],count=0;\n//long long int i,a[100000000];\ncin&gt;&gt;n&gt;&gt;k;\nfor(i=0;i&lt;k;i++)\n{\n    cin&gt;&gt;d[i];\n}\nfor(i=0;i&lt;n;i++)\n{\n    a[i]=i;\n}\nfor(i=0;i&lt;n;i++)\n{\n    for(j=0;j&lt;k;j++)\n    {\n        if(a[i]%d[j]==0)\n        {\n            a[i]=0;\n        }\n    }\n}\nfor(i=0;i&lt;n;i++)\n{\n    if(a[i]!=0)\n    {\n        count++;\n    }\n}\ncout&lt;&lt;count;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "boost", "shared-ptr", "boost-intrusive"], "answers": [{"comments": [{"owner": {"reputation": 360, "user_id": 4350660, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/823224762/picture?type=large", "display_name": "Benjamin Larsen", "link": "https://stackoverflow.com/users/4350660/benjamin-larsen"}, "edited": false, "score": 0, "creation_date": 1476898593, "post_id": 40137819, "comment_id": 67545742, "body": "Thank you very much for that detailed explanation. Though we are not getting compilation errors, when we&#39;re creating an intrusive_ptr to a boost statechart event.   Does this mean that the implementation of these methods lie within the boost statechart event?"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 360, "user_id": 4350660, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/823224762/picture?type=large", "display_name": "Benjamin Larsen", "link": "https://stackoverflow.com/users/4350660/benjamin-larsen"}, "edited": false, "score": 0, "creation_date": 1476898654, "post_id": 40137819, "comment_id": 67545779, "body": "@BenjaminLarsen Could be, I know nothing about Boost statecharts."}, {"owner": {"reputation": 360, "user_id": 4350660, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/823224762/picture?type=large", "display_name": "Benjamin Larsen", "link": "https://stackoverflow.com/users/4350660/benjamin-larsen"}, "edited": false, "score": 0, "creation_date": 1476910533, "post_id": 40137819, "comment_id": 67552663, "body": "We found the implementation, it was implemented within the Event. Thanks again!"}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 13, "last_activity_date": 1476897716, "creation_date": 1476897716, "answer_id": 40137819, "question_id": 40137660, "link": "https://stackoverflow.com/questions/40137660/boost-intrusive-pointer/40137819#40137819", "title": "Boost intrusive pointer", "body": "<p>You <em>have to</em> provide these functions. This is how <code>boost::intrusive_ptr</code> operates.</p>\n\n<p>Let's compare it with <code>boost::shared_ptr</code>. <code>shared_ptr</code> manages the reference count itself in the control block associated with the pointee. Creating a <code>shared_ptr</code> increments the refcount. Destroying a <code>shared_ptr</code> decrements the refcount. When the refcount goes to 0, the pointee is destroyed.</p>\n\n<p><code>intrusive_ptr</code> works in exactly the same way, but does not manage the reference count itself. It just signals to its client \"now the refcount must be incremented\" and \"now the refcount must be decremented.\" It does that by calling the two functions mentioned, <code>intrusive_ptr_add_ref</code> and <code>intrusive_ptr_release</code>. If you do not define them, you will get a compilation error.</p>\n\n<p>Think of these functions as the interface to the reference counter. Using <code>intrusive_ptr</code> indicates that the refcount is managed somewhere outside the pointer (usually in the pointee itself), and the pointer just <em>intrudes</em> on that refcount, using it for its purposes.</p>\n"}], "owner": {"reputation": 360, "user_id": 4350660, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/823224762/picture?type=large", "display_name": "Benjamin Larsen", "link": "https://stackoverflow.com/users/4350660/benjamin-larsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4857, "favorite_count": 2, "accepted_answer_id": 40137819, "answer_count": 1, "score": 8, "last_activity_date": 1476897762, "creation_date": 1476897125, "last_edit_date": 1476897762, "question_id": 40137660, "link": "https://stackoverflow.com/questions/40137660/boost-intrusive-pointer", "title": "Boost intrusive pointer", "body": "<p>I'm a little confused about boost's intrusive pointer. The definition says:</p>\n\n<blockquote>\n  <p>\"Every new <code>intrusive_ptr</code> instance increments the reference count by\n  using an unqualified call to the function <code>intrusive_ptr_add_ref</code>,\n  passing it the pointer as an argument. Similarly, when an\n  <code>intrusive_ptr</code> is destroyed, it calls <code>intrusive_ptr_release</code>; this\n  function is responsible for destroying the object when its reference\n  count drops to zero. The user is expected to provide suitable\n  definitions of these two functions. \"</p>\n</blockquote>\n\n<p>Does this mean that I HAVE TO implement these methods, or that I CAN do it? The point is, that we're using it because a function requires an intrusive pointer. We've used shared pointer the other places, so were just worried if the pointer is managed, and is going to be deleted when theres no more references to it.</p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1476912160, "post_id": 40137653, "comment_id": 67553450, "body": "<code>rand()</code> is not thread-safe, I think you should use <code>rand_r()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 2912, "user_id": 3081206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YaKOY.jpg?s=128&g=1", "display_name": "takendarkk", "link": "https://stackoverflow.com/users/3081206/takendarkk"}, "edited": false, "score": 0, "creation_date": 1476907378, "post_id": 40140471, "comment_id": 67550956, "body": "@takendarkk He already use it and that does not help because of parallel threads. Read carefully question: <code>When I debug the program, it&#39;s stuck at ...</code>"}], "tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": false, "score": -1, "last_activity_date": 1476907211, "creation_date": 1476907211, "answer_id": 40140471, "question_id": 40137653, "link": "https://stackoverflow.com/questions/40137653/creating-another-loop-and-run-it-in-parallel-threads/40140471#40140471", "title": "Creating another loop and run it in parallel threads", "body": "<p>To debug your program you may use <code>cout</code> after each expression.\nSo you will know where you stop and what data is at each step.</p>\n"}], "owner": {"reputation": 65, "user_id": 6087642, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/ZuJxk.jpg?s=128&g=1", "display_name": "Chriskt", "link": "https://stackoverflow.com/users/6087642/chriskt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1476907211, "creation_date": 1476897104, "question_id": 40137653, "link": "https://stackoverflow.com/questions/40137653/creating-another-loop-and-run-it-in-parallel-threads", "title": "Creating another loop and run it in parallel threads", "body": "<p>This is my first week to parallel programming, and I can't seem to figure this out. When I debug the program, it's stuck at \"Generating numbers...\". I think the only way to fix this problem is by creating another loop for myself and run it in parallel threads. Can you please help me?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;climits&gt;\n#include &lt;ctime&gt;\n#include &lt;time.h&gt;\n#include &lt;Windows.h&gt;\n\nusing namespace std;\n\nconst int NSIZE = INT_MAX / 5;\n\nvoid gen_numbers (float numbers[], int how_many);\nfloat gen_rand(int min, int max);\nfloat sum(float array[], int num_elements);\n\n\nfloat numbers[NSIZE];\n\nint main()\n{\n    unsigned int seed = time(0);\n    srand(seed);\n\n    __int64 start1 = GetTickCount();\n\n    cout &lt;&lt; \"Generating numbers...\" &lt;&lt; flush;\n    gen_numbers(numbers, NSIZE);\n    cout &lt;&lt; \"done.\" &lt;&lt; endl;\n\n    cout &lt;&lt; \"Summing the numbers...\" &lt;&lt; flush;\n    float answer = sum(numbers, NSIZE);\n    cout &lt;&lt; \"done\" &lt;&lt; endl;\n    __int64 end1 = GetTickCount();\n\n    cout &lt;&lt; \"Total time: \" &lt;&lt; end1 - start1 &lt;&lt; endl;\n\n    cout &lt;&lt; \"Answer: \" &lt;&lt; answer &lt;&lt; endl;\n    system(\"pause\");\n    return 0;\n}\n\nfloat sum(float array[], int num_elements)\n{\n    float nsum = 0.0;\n    #pragma omp parallel for reduction(+:nsum)\n    for (int i = 0; i &lt; num_elements; i++)\n    {\n        nsum += array[i];\n    }\n    return nsum;\n}\n\nvoid gen_numbers(float numbers[], int how_many)\n{\n    #pragma omp parallel for\n    for (int i = 0; i &lt; how_many; i++)\n    {\n        numbers[i] = gen_rand(0, 10);\n    }\n}\n\nfloat gen_rand(int min, int max)\n{\n    return(min + static_cast &lt;float&gt; (rand()) /\n        (static_cast &lt;float&gt; (RAND_MAX / (max - min))));\n}\n</code></pre>\n"}, {"tags": ["c++", "arduino", "interrupt-handling"], "answers": [{"tags": [], "owner": {"reputation": 3239, "user_id": 5271927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aTJYf.jpg?s=128&g=1", "display_name": "KIIV", "link": "https://stackoverflow.com/users/5271927/kiiv"}, "is_accepted": true, "score": 1, "last_activity_date": 1476901602, "creation_date": 1476901602, "answer_id": 40138956, "question_id": 40137637, "link": "https://stackoverflow.com/questions/40137637/arduino-mega2560-set-interrupts/40138956#40138956", "title": "Arduino Mega2560 Set interrupts", "body": "<p>Tested and it's working:</p>\n\n<pre><code>/*\n * Connections:\n * A0 (PF0) -&gt; PCINT0 (PB0 / 53)\n * A1 (PF1) -&gt; PCINT1 (PB1 / 52)\n * A2 (PF2) -&gt; PCINT2 (PB2 / 51)\n * A3 (PF3) -&gt; PCINT3 (PB3 / 50)\n * A4 (PF4) -&gt; PCINT6 (PB6 / 12)\n * A5 (PF5) -&gt; PCINT7 (PB7 / 13)\n */\n\nuint8_t pins[] = {A0,A1,A2,A3,A4,A5};\n\nvoid setup() {\n  Serial.begin(115200);\n\n  // Make PF0-5 outputs:\n  DDRF   = _BV(PF0) | _BV(PF1) | _BV(PF2) | _BV(PF3) | _BV(PF4) | _BV(PF5);\n\n  PCICR  = _BV(PCIE0);\n  PCMSK0 = _BV(PCINT0) | _BV(PCINT1) | _BV(PCINT2) | _BV(PCINT3) | _BV(PCINT6) | _BV(PCINT7);\n\n  // Arduino sets global interrupts, so we don't have to do it here:\n  // sei();\n}\n\nvolatile uint8_t data = 0;\nuint8_t          last = 0;\n\nuint32_t    change_ts = 1000;\nuint8_t       out_val = 0;\n\nvoid loop() {\n\n  if (data != last) {\n    Serial.print(\"Got: \"); Serial.println(data, BIN);\n    last = data;\n  }\n\n  if (change_ts &lt;= millis()) {\n    change_ts += 1000;\n    Serial.print(F(\"Changed to: \")); Serial.println(++out_val, BIN);\n    PORTF = out_val;\n  }\n}\n\nISR(PCINT0_vect) {\n  data = PINB &amp; PCMSK0; // read data and clear unused pins\n}\n</code></pre>\n\n<p>If you don't use Arduino framework, you have to enable global interrupts by <code>sei()</code>. If you can't see some variable set inside of ISR from the outside, you have to make it <code>volatile</code>.</p>\n"}], "owner": {"reputation": 372, "user_id": 5330546, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10205836775977411/picture?type=large", "display_name": "Goor Lavi", "link": "https://stackoverflow.com/users/5330546/goor-lavi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 0, "accepted_answer_id": 40138956, "answer_count": 1, "score": 0, "last_activity_date": 1476901602, "creation_date": 1476897026, "question_id": 40137637, "link": "https://stackoverflow.com/questions/40137637/arduino-mega2560-set-interrupts", "title": "Arduino Mega2560 Set interrupts", "body": "<p>hey im using arduino Mega2560.\ni want to set a triger to the interrupt.\nto pins 53,52,51,50 and 12,13.</p>\n\n<pre><code>void setup(){\n\n PCICR |= (1 &lt;&lt; PCIE0); \n\n  PCMSK0 |= (1 &lt;&lt; PCINT0);\n  PCMSK0 |= (1 &lt;&lt; PCINT1); \n  PCMSK0 |= (1 &lt;&lt; PCINT2); \n  PCMSK0 |= (1 &lt;&lt; PCINT3); \n  PCMSK0 |= (1 &lt;&lt; PCINT6); \n  PCMSK0 |= (1 &lt;&lt; PCINT7); \n}\n\nISR(PCINT0_vect){\n// Code when one of the pins was changed\n}\n</code></pre>\n\n<p>this is not working for me can someone please help? </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 5, "creation_date": 1476896223, "post_id": 40137385, "comment_id": 67544427, "body": "You missed to return a value, what&#39;s unclear about that error?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1476896522, "post_id": 40137385, "comment_id": 67544592, "body": "Why are you even taking an input parameter if the first thing your function does is to overwrite it?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1476896532, "post_id": 40137385, "comment_id": 67544599, "body": "Your problem has absolutely nothing to do with Xcode."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1476896591, "post_id": 40137385, "comment_id": 67544637, "body": "Is that really your question? The answer is: Yes you do get an error."}, {"owner": {"reputation": 11, "user_id": 4668682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d1111abb009d4237ae02db88f302de5?s=128&d=identicon&r=PG&f=1", "display_name": "Marya", "link": "https://stackoverflow.com/users/4668682/marya"}, "edited": false, "score": 0, "creation_date": 1476897223, "post_id": 40137385, "comment_id": 67544957, "body": "how? can you modify it please"}, {"owner": {"reputation": 11, "user_id": 4668682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d1111abb009d4237ae02db88f302de5?s=128&d=identicon&r=PG&f=1", "display_name": "Marya", "link": "https://stackoverflow.com/users/4668682/marya"}, "edited": false, "score": 0, "creation_date": 1476897300, "post_id": 40137385, "comment_id": 67545005, "body": "I am coding M/M/1 queue system"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1476897349, "post_id": 40137385, "comment_id": 67545032, "body": "do you know what it means for a function to return a value?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1476897908, "post_id": 40137385, "comment_id": 67545344, "body": "btw i am not trying to be sarcastic with the last comment, but trying to get this going somewhere"}], "answers": [{"tags": [], "owner": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "is_accepted": false, "score": 0, "last_activity_date": 1476898398, "creation_date": 1476898398, "answer_id": 40137999, "question_id": 40137385, "link": "https://stackoverflow.com/questions/40137385/c-error-using-xcode/40137999#40137999", "title": "C++ error using Xcode", "body": "<p>You need to review the basics of C++ (or programming). When a function is declared with a return type, it must return a value. Functions can be declared void, as well. In that case you do not return a value. eg;</p>\n\n<pre><code>  void myFuncA(aType aParam);\n  int myFuncB(aType aParam);\n</code></pre>\n\n<p>The first function returns no values, the second must return an int. Your code above is of the second form, so it must have a return statement with a value of the correct type.</p>\n"}], "owner": {"reputation": 11, "user_id": 4668682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d1111abb009d4237ae02db88f302de5?s=128&d=identicon&r=PG&f=1", "display_name": "Marya", "link": "https://stackoverflow.com/users/4668682/marya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1476898398, "creation_date": 1476896137, "last_edit_date": 1476896177, "question_id": 40137385, "link": "https://stackoverflow.com/questions/40137385/c-error-using-xcode", "title": "C++ error using Xcode", "body": "<p>I get an error on my code below in the else: control reaches end of non-void function?</p>\n\n<pre><code>double arrival(double x){\n\n    x=temp-&gt;sim_time;\n    e=temp-&gt;eventtype;\n\n    insert_nextevent((x+ (-log(rand())/lamda)), 'A');\n\n    if(server ==0){\n        server =1;\n        insert_nextevent((x +(-log(rand())/mu)), 'D');\n    }\n\n    else{\n\n            numqueue++;\n    }\n\n}\n\ndouble departure(double x){\n\n    x=temp-&gt;sim_time;\n    e=temp-&gt;eventtype;\n\n    if(numqueue==0){\n            server =1;\n    }\n    else {\n            numqueue--;\n            insert_nextevent((x+ (-log(rand())/mu)), 'D');\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "indexing", "eigen"], "answers": [{"comments": [{"owner": {"reputation": 1291, "user_id": 1612986, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a7d5ead19e763bd039bd868f8f36a64b?s=128&d=identicon&r=PG", "display_name": "user1612986", "link": "https://stackoverflow.com/users/1612986/user1612986"}, "edited": false, "score": 0, "creation_date": 1476907470, "post_id": 40140207, "comment_id": 67551010, "body": "seems like it is failing if the block of 10 that we want to exclude is first 10 rows. i.e. myComplement &lt;&lt; M.topRows&lt;0&gt;(), M.bottomRows(M.rows()-10); fails"}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "reply_to_user": {"reputation": 1291, "user_id": 1612986, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a7d5ead19e763bd039bd868f8f36a64b?s=128&d=identicon&r=PG", "display_name": "user1612986", "link": "https://stackoverflow.com/users/1612986/user1612986"}, "edited": false, "score": 0, "creation_date": 1476908107, "post_id": 40140207, "comment_id": 67551403, "body": "If it does not work with <code>topRows&lt;0&gt;()</code> you should update your Eigen version. It works with the most recent 3.2 and 3.3 versions."}], "tags": [], "owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "is_accepted": true, "score": 1, "last_activity_date": 1476906140, "creation_date": 1476906140, "answer_id": 40140207, "question_id": 40137354, "link": "https://stackoverflow.com/questions/40137354/eigen-matrix-library-complement-of-a-block-operation/40140207#40140207", "title": "Eigen Matrix library complement of a block operation", "body": "<p>It is not possible directly, but you can easily concatenate two blocks together:</p>\n\n<pre><code>// result must be allocated to the correct size before concatenating:\nEigen::MatrixXd myComplement(M.rows()-10, M.cols());\nmyComplement &lt;&lt; M.topRows&lt;3&gt;(), M.bottomRows(M.rows()-13);\n</code></pre>\n\n<p>N.B.:\nInstead of <code>M.block(3,0,10,M.cols())</code> you can write <code>M.middleRows&lt;3&gt;(10)</code>.</p>\n"}], "owner": {"reputation": 1291, "user_id": 1612986, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a7d5ead19e763bd039bd868f8f36a64b?s=128&d=identicon&r=PG", "display_name": "user1612986", "link": "https://stackoverflow.com/users/1612986/user1612986"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "accepted_answer_id": 40140207, "answer_count": 1, "score": 0, "last_activity_date": 1476906140, "creation_date": 1476896007, "last_edit_date": 1476896116, "question_id": 40137354, "link": "https://stackoverflow.com/questions/40137354/eigen-matrix-library-complement-of-a-block-operation", "title": "Eigen Matrix library complement of a block operation", "body": "<p>is there a compact/nice/efficient way to perform a \"complement of a block\" operation. Meaning say I want to extract a block of 10 rows from a matrix M starting from row 3 we can do something like:</p>\n\n<pre><code>  Eigen::MatrixXd myBlock = M.block(3,0,10,M.cols());\n</code></pre>\n\n<p>but what I am trying to extract is \"all rows but those 10 rows\". That is from row 0 to 2 and then from rows 13 to the end. Is this possible ? Thanks in advance.</p>\n"}, {"tags": ["c++", "boost", "multi-index", "boost-multi-index"], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 6812209, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/d20d16ac94dafc1c7aed607cc09aefdb?s=128&d=identicon&r=PG&f=1", "display_name": "codeworks", "link": "https://stackoverflow.com/users/6812209/codeworks"}, "edited": false, "score": 0, "creation_date": 1476928055, "post_id": 40137971, "comment_id": 67558117, "body": "Is this fine @Agnew?  <code>std::pair&lt;mi_Container::index&lt;IndexByIdString&gt;::type::iterat&zwnj;&#8203;or, mi_Container::index&lt;IndexByIdString&gt;::type::iterator&gt; range_it = Containers.get&lt;IndexByIdString&gt;().equal_range(nonEqId);  \tif (range_it.first != Containers.get&lt;IndexByIdString&gt;().end())\t\t&#47;&#47;If it was found  \t{&#47;&#47;We might have a range of values \t\tfor (mi_Container::index&lt;IndexByIsString&gt;::type::iterator it = range_it.first; it != range_it.second; it++) \t\t{  \t\t\tvalue = *it;       &#47;&#47;Get the value pointed by the iterator, do what I want on &quot;value&quot; . . .</code>"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 195, "user_id": 6812209, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/d20d16ac94dafc1c7aed607cc09aefdb?s=128&d=identicon&r=PG&f=1", "display_name": "codeworks", "link": "https://stackoverflow.com/users/6812209/codeworks"}, "edited": false, "score": 0, "creation_date": 1476945541, "post_id": 40137971, "comment_id": 67563649, "body": "@codeworks It looks OK at a glance, but why don&#39;t you ask your compiler &amp; program? ;-)"}, {"owner": {"reputation": 195, "user_id": 6812209, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/d20d16ac94dafc1c7aed607cc09aefdb?s=128&d=identicon&r=PG&f=1", "display_name": "codeworks", "link": "https://stackoverflow.com/users/6812209/codeworks"}, "edited": false, "score": 0, "creation_date": 1476950649, "post_id": 40137971, "comment_id": 67566680, "body": "@Agnew, I checked already. I posted for a confirmation since the equal_range does return an empty range(i.e first and last iterator equal to end())"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 195, "user_id": 6812209, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/d20d16ac94dafc1c7aed607cc09aefdb?s=128&d=identicon&r=PG&f=1", "display_name": "codeworks", "link": "https://stackoverflow.com/users/6812209/codeworks"}, "edited": false, "score": 0, "creation_date": 1476951077, "post_id": 40137971, "comment_id": 67566919, "body": "@codeworks Do note that in your Q, the <code>IndexByStringId</code> is <code>hashed_unique</code>, and the <code>IndexByUniqueId</code> is <code>hashed_non_unique</code>. You might want to double-check your setup in real code, and/or use debugging outputs of the whole container (by traversing it through an arbitrary index) to make sure it contains what you think it does."}, {"owner": {"reputation": 195, "user_id": 6812209, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/d20d16ac94dafc1c7aed607cc09aefdb?s=128&d=identicon&r=PG&f=1", "display_name": "codeworks", "link": "https://stackoverflow.com/users/6812209/codeworks"}, "edited": false, "score": 0, "creation_date": 1476952626, "post_id": 40137971, "comment_id": 67567900, "body": "@Agnew, I will check that, thanks for pointing that out. I wanted to traverse through the container and see what it contains, but I found a mi_StoreMe::begin(), mi_StoreMe()::end() or it but could not find a mi_StoreMer::iterator. How do I iterate through the whole thing(without using a list of a key). Infact this was my first idea to debug this. Please let me know how I get all the values stored in m_StoreMe. Thanks"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 195, "user_id": 6812209, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/d20d16ac94dafc1c7aed607cc09aefdb?s=128&d=identicon&r=PG&f=1", "display_name": "codeworks", "link": "https://stackoverflow.com/users/6812209/codeworks"}, "edited": false, "score": 0, "creation_date": 1476953231, "post_id": 40137971, "comment_id": 67568304, "body": "@codeworks I added a few C++03-friendly traversal options to the answer."}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": false, "score": 1, "last_activity_date": 1476953217, "last_edit_date": 1476953217, "creation_date": 1476898310, "answer_id": 40137971, "question_id": 40137310, "link": "https://stackoverflow.com/questions/40137310/get-values-from-a-boostmulti-index/40137971#40137971", "title": "Get values from a boost::multi_index", "body": "<p>Here's how you'd retrieve from the string-based index:</p>\n\n<pre><code>mi_storeMe container;\n\nstd::string needle = whatToSearchFor();\nauto iterator = container.get&lt;IndexByStringId&gt;().find(needle);\nif (iterator != container.get&lt;IndexByStringId&gt;().end())\n  found(*iterator);\nelse\n  notFound();\n</code></pre>\n\n<p>For the ID-based index, it's very similar:</p>\n\n<pre><code>mi_storeMe container;\n\nRetClass needle = whatToSearchFor();\nauto range = container.get&lt;IndexByUniqueId&gt;().equal_range(needle);\nprocessRangeFromTo(range.first, range.second);\n</code></pre>\n\n<p>The answer uses <code>auto</code> from C++11 so that I can avoid spelling out the types involved. If you do not have access to C++11, please do the type deduction yourself by reading Boost's <code>multi_index</code> documentation. I cannot vouch for correctness, but I believe the iterator type can be spelled as</p>\n\n<pre><code>mi_storeMe::index&lt;IndexByStringId&gt;::type::iterator\n</code></pre>\n\n<hr>\n\n<p>Tangentially related: how to do printf-style debugging of multi-index containers without C++11.</p>\n\n<p>First off, remember thatwhile you don't have <code>auto</code>, you still have type deduction in templates. No need to spell out types if a function template can deduce them:</p>\n\n<pre><code>template &lt;class It&gt;\nvoid printContainerItems(It from, It to) {\n  for (; from != to; ++from)\n    print(*from);\n}\n\nprintContainerItems(container.begin(), container.end());\n</code></pre>\n\n<p>Second, you can easily iterate over an index:</p>\n\n<pre><code>const mi_Container::index&lt;IndexByIdString&gt;::type&amp; index = container.get&lt;IndexByIdString&gt;();\nfor (\n  mi_Container::index&lt;IndexByIdString&gt;::type::iterat\u200c\u200bor it = index.begin(), end = index.end();\n  it != end;\n  ++it\n)\n{\n  operate_on(*it);\n}\n</code></pre>\n"}], "owner": {"reputation": 195, "user_id": 6812209, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/d20d16ac94dafc1c7aed607cc09aefdb?s=128&d=identicon&r=PG&f=1", "display_name": "codeworks", "link": "https://stackoverflow.com/users/6812209/codeworks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1408, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1476953217, "creation_date": 1476895898, "last_edit_date": 1476898369, "question_id": 40137310, "link": "https://stackoverflow.com/questions/40137310/get-values-from-a-boostmulti-index", "title": "Get values from a boost::multi_index", "body": "<p>I have created a <code>boost::multi_index</code> successfully and inserted values too. I have two hashed indices to the multi_index. Both are member functions, but one is unique and the other one is non-unique. </p>\n\n<p>I am trying to figure out the way to get the values from the container using the values of the hashes. I could not understand how I should do that. I searched online, and I see there are a lot of people have asked this question. But I dont understand what needs to be done. I saw a few solutions in C++11 but I dont use C++11 and I dont understand whats being done. Can someone please explain to me how to use it? Given below is my code,</p>\n\n<pre><code>#include \"stdafx.h\"\n#include&lt;multi_index_container.hpp&gt;\n#include&lt;boost/multi_index/hashed_index.hpp&gt;\n#include&lt;boost/multi_index/mem_fun.hpp&gt;\n#include&lt;boost/multi_index/tag.hpp&gt;\n\n\n\nclass RetClass\n{\n    int a, b;\n};\n\nclass StoreMe\n{\n    RetClass ex;\n    std::string exStr;\n    int id;\npublic:\n    void setId(RetClass a) \n    {\n        ex = a;\n    };\n\n\n    virtual const RetClass&amp; getId() const { return ex; }\n    virtual std::string getIdString() const { return exStr; }\n    int getUniqueId() const { return id; }\n};\n\nstruct IndexByStringId{};\nstruct IndexByUniqueId{};\n\ntypedef boost::multi_index_container&lt;\n    StoreMe,\n    boost::multi_index::indexed_by&lt;\n        boost::multi_index::hashed_unique&lt;\n            boost::multi_index::tag&lt;IndexByStringId&gt;,\n            boost::multi_index::const_mem_fun&lt;StoreMe, std::string,     &amp;StoreMe::getIdString&gt; \n        &gt;,\n        boost::multi_index::hashed_non_unique&lt;\n            boost::multi_index::tag&lt;IndexByUniqueId&gt;,\n            boost::multi_index::const_mem_fun&lt;StoreMe, int,     &amp;StoreMe::getUniqueId&gt; \n        &gt;\n    &gt;\n&gt; mi_storeMe;\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    return 0;\n}\n</code></pre>\n\n<p>I want to be able to,</p>\n\n<ol>\n<li>Get the values non-unique Id maps to</li>\n<li>Get the value (if it exists) that the unique Id maps to</li>\n</ol>\n\n<p>Please let me know the correct/simplest way to get this done. Also I don't use C++11.</p>\n"}, {"tags": ["c++", "c", "arrays"], "comments": [{"owner": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "edited": false, "score": 6, "creation_date": 1476895052, "post_id": 40137052, "comment_id": 67543762, "body": "<i>&quot;What is the correct way to do this?&quot;</i> -- using <code>std::vector</code> and <code>std::string</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1476895057, "post_id": 40137052, "comment_id": 67543768, "body": "Are you using C or C++?  If you are using C++ <code>std::vector&lt;std::string&gt;</code> is the preferred method."}, {"owner": {"reputation": 2790, "user_id": 5137782, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/b8bQ8.jpg?s=128&g=1", "display_name": "8protons", "link": "https://stackoverflow.com/users/5137782/8protons"}, "edited": false, "score": 4, "creation_date": 1476895121, "post_id": 40137052, "comment_id": 67543805, "body": "The first step in &quot;the correct way to do this&quot; is to start by specifying which language you are using; C is not the same language as C++. Also, please include the libraries/headers that you&#39;re using."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1476895326, "post_id": 40137052, "comment_id": 67543921, "body": "<code>char**</code> is not the same as <code>char[][]</code>, and even then <code>sampleFunction(int **max**, char list[][**max**]){</code> Array sizes must be constant and known at compilation time in order for the compiler to get the indexing arithmetic right. there is no way <code>max</code> can meet these requirements because you can always call the function with a different value."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1476895570, "post_id": 40137052, "comment_id": 67544070, "body": "@user4581301 variable size arrays <i>are</i> supported in C (from C99)."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1476895710, "post_id": 40137052, "comment_id": 67544150, "body": "I stand corrected. The use of <code>malloc</code> pushes this question further in the direction of C than C++."}], "answers": [{"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 1, "last_activity_date": 1476896074, "creation_date": 1476896074, "answer_id": 40137363, "question_id": 40137052, "link": "https://stackoverflow.com/questions/40137052/passing-a-dynamically-allocated-2d-character-array-to-a-function/40137363#40137363", "title": "Passing a dynamically allocated 2d character array to a function", "body": "<p>Arrays are not pointers, and pointers are not arrays.</p>\n\n<p>The first parameter type says that <code>list</code> is a pointer to an array of <code>char</code>.<br>\n<code>cArray</code> isn't; it's a pointer to <code>char*</code>. </p>\n\n<p>The second says that <code>list</code> is a pointer to an array of <code>char*</code>, which is even further from <code>cArray</code>.</p>\n\n<p>You need to pass the correct type, <code>char**</code>, and both dimensions:</p>\n\n<pre><code>void sampleFunction(int max_rows, int max_columns, char** list){\n    for (int i = 0; i &lt; max_rows; i++)\n        for (int j = 0; j &lt; max_columns; j++)\n            list[i][j] = 0;\n}\n\nsampleFunction(10, 25, cArray);\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 3283146, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8f5c0378b13506380f29d14013f93015?s=128&d=identicon&r=PG&f=1", "display_name": "user3283146", "link": "https://stackoverflow.com/users/3283146/user3283146"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "accepted_answer_id": 40137363, "answer_count": 1, "score": -5, "last_activity_date": 1476896074, "creation_date": 1476894991, "question_id": 40137052, "link": "https://stackoverflow.com/questions/40137052/passing-a-dynamically-allocated-2d-character-array-to-a-function", "title": "Passing a dynamically allocated 2d character array to a function", "body": "<p>Here is how the array is allocated.</p>\n\n<pre><code>char** cArray =  malloc(10 * sizeof(char *)); \n\nint i;\nfor(i =0; i&lt; 10; i++) { \n  cArray[i] = malloc(25 * sizeof(char));\n}\n</code></pre>\n\n<p>How to pass into function with this signature:</p>\n\n<pre><code>sampleFunction(int max, char list[][max]){\n  //Do something\n};\n</code></pre>\n\n<p>Tried:</p>\n\n<pre><code>sampleFunction(25, cArray);\n</code></pre>\n\n<p>This gives me the following error:</p>\n\n<pre><code>expected 'char (*)[(sizetype)(max)]' but argument is of type 'char **'\n</code></pre>\n\n<p>I have also tried: </p>\n\n<pre><code>sampleFunction(int max, char* list[][max]){\n  //Do something\n};\n\nsampleFunction(25, &amp;cArray);\n</code></pre>\n\n<p>This gives me the following error:</p>\n\n<pre><code>expected 'char * (*)[(sizetype)(max)]' but argument is of type 'char ***'\n</code></pre>\n\n<p>I have also tried: </p>\n\n<pre><code>sampleFunction(int max, char* list[][max]){\n  //Do something\n};\n\nsampleFunction(25, cArray);\n</code></pre>\n\n<p>This gives me the following error:</p>\n\n<pre><code>expected 'char * (*)[(sizetype)(max)]' but argument is of type 'char **'\n</code></pre>\n\n<p>What is the correct way to do this?</p>\n"}, {"tags": ["c++", "iostream", "cout"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1476895031, "post_id": 40137006, "comment_id": 67543757, "body": "You want us to help you and you don&#39;t even show us your code (?!)."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 2, "creation_date": 1476895328, "post_id": 40137006, "comment_id": 67543922, "body": "Your terminal and its font selection are what affect the line height. You most likely can&#39;t control it from within your program."}], "answers": [{"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1476895189, "post_id": 40137096, "comment_id": 67543846, "body": "This is not an answer but a comment. (Not yet downvoted)."}], "tags": [], "owner": {"reputation": 8286, "user_id": 533037, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f711473fb27cd269ba5ad2064c15dcd3?s=128&d=identicon&r=PG", "display_name": "solidpixel", "link": "https://stackoverflow.com/users/533037/solidpixel"}, "is_accepted": false, "score": 0, "last_activity_date": 1476895303, "last_edit_date": 1476895303, "creation_date": 1476895155, "answer_id": 40137096, "question_id": 40137006, "link": "https://stackoverflow.com/questions/40137006/adjusting-line-height-in-c/40137096#40137096", "title": "Adjusting line height in C++", "body": "<p>TBH if you want pixel-accurate rendering use a proper rendering API, such as OpenGL.</p>\n\n<p>From a text rendering point of view you don't say what you are rendering to. Assuming something like a terminal console or shell window then the layout beyond characters and newlines is nothing to do with your program; the visual representation is entirely determined by the shell you are rendering to.</p>\n"}, {"tags": [], "owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "is_accepted": false, "score": 0, "last_activity_date": 1476896480, "creation_date": 1476896480, "answer_id": 40137480, "question_id": 40137006, "link": "https://stackoverflow.com/questions/40137006/adjusting-line-height-in-c/40137480#40137480", "title": "Adjusting line height in C++", "body": "<p>Firstly, check that you are genuinely printing a line per maze scan line, and not interleaving with spurious newlines. Assuming that is ruled out, the problem is that the unicode glyph is not a full block. So you must somehow set the font or choose another glyph which is a full block.</p>\n\n<p>Usually console windows are 80 characters wide by 22 or 24 characters high, and characters are 8 pixels wide by 19 pixels high. So it's very far from a square grid, and you might want to bias the maze to reflect that and provide a better visual appearance (eg make 2 pixel-wide vertical corridors much more common than 2-pievel wide horizontal corridors).</p>\n\n<p>Do check the binary image library fonts, you might find them useful.</p>\n\n<p><a href=\"https://github.com/MalcolmMcLean/binaryimagelibrary\" rel=\"nofollow\">https://github.com/MalcolmMcLean/binaryimagelibrary</a></p>\n"}, {"tags": [], "owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "is_accepted": true, "score": 2, "last_activity_date": 1476900014, "creation_date": 1476900014, "answer_id": 40138507, "question_id": 40137006, "link": "https://stackoverflow.com/questions/40137006/adjusting-line-height-in-c/40138507#40138507", "title": "Adjusting line height in C++", "body": "<p>Assuming you aren't printing double newlines, this is outside the scope of standard C++, it does not provide facilities for controlling terminal in a standard way.</p>\n\n<p>Solutions: </p>\n\n<ul>\n<li>You could provide a launcher script, which opens a new terminal window with specific font and runs your app in it.</li>\n<li>You could use some platform specific method to change background color (ANSI codes work in unixy terminals, or use Win32 API for Windows terminal, ncurses library on Unix-like environments) and print just spaces in different colors.</li>\n<li>Use a GUI library/framework to get complete control on what is drawn (I'd use Qt for C++ GUI app).</li>\n</ul>\n"}], "owner": {"reputation": 399, "user_id": 6841364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/df50dcc60c90c79c75fe466c4c043259?s=128&d=identicon&r=PG&f=1", "display_name": "dweeb", "link": "https://stackoverflow.com/users/6841364/dweeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1310, "favorite_count": 1, "accepted_answer_id": 40138507, "answer_count": 3, "score": 1, "last_activity_date": 1476920008, "creation_date": 1476894823, "last_edit_date": 1476895130, "question_id": 40137006, "link": "https://stackoverflow.com/questions/40137006/adjusting-line-height-in-c", "title": "Adjusting line height in C++", "body": "<p>I am attempting to put the final touches on a maze program I have been writing. I have used Unicode to delimit the walls and paths however because of the (horizontal) line spacing I can't quite get it to look compact enough. I have attached two screenshots. I'm just escaping the newline \"\\n\" in order to print each row. Can the distance between lines be adjusted or am I stuck with this \"gappy\" representation?</p>\n\n<p>My output:</p>\n\n<p><img src=\"https://i.stack.imgur.com/tO3ah.png\" alt=\"my output - with gaps between rows\"></p>\n\n<p>What I am trying to closely represent:</p>\n\n<p><img src=\"https://i.stack.imgur.com/vPNe2.png\" alt=\"desired output - no gaps between rows\"></p>\n"}, {"tags": ["c++", "validation", "input", "stream"], "comments": [{"owner": {"reputation": 49, "user_id": 5885695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10154555296967468/picture?type=large", "display_name": "Chris Avina", "link": "https://stackoverflow.com/users/5885695/chris-avina"}, "edited": false, "score": 0, "creation_date": 1476895542, "post_id": 40136995, "comment_id": 67544055, "body": "Why the downvotes? I would imagine if you have enough knowledge to downvote, you could provide a quick answer?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1476895714, "post_id": 40136995, "comment_id": 67544152, "body": "The right tool to solve such problems is your debugger. You should step through your code line-by-line <i>before</i> asking on Stack Overflow. For more help, please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (by Eric Lippert)</a>. At a minimum, you should &#91;edit] your question to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example that reproduces your problem, along with the observations you made in the debugger."}, {"owner": {"reputation": 49, "user_id": 5885695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10154555296967468/picture?type=large", "display_name": "Chris Avina", "link": "https://stackoverflow.com/users/5885695/chris-avina"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1476896215, "post_id": 40136995, "comment_id": 67544421, "body": "I&#39;m sorry, I did run though the debugger and the results I posted in my questions were what I saw.  Am I to build a table of variables and post it?  Or just rewrite a single example of code? The code posted is the minimal amount needed to see my problems with the exception of the truncation problem that I clearly stated was not in the code, but he theory is simple to understand."}, {"owner": {"reputation": 49, "user_id": 5885695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10154555296967468/picture?type=large", "display_name": "Chris Avina", "link": "https://stackoverflow.com/users/5885695/chris-avina"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1476896392, "post_id": 40136995, "comment_id": 67544511, "body": "Sorry, on phone and couldn&#39;t scroll to edit. I have researched quite a bit, debugged and all my research keeps saying to use stringstream, but my professor says not to use.  Hence, I am asking here as a last resort."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 5885695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10154555296967468/picture?type=large", "display_name": "Chris Avina", "link": "https://stackoverflow.com/users/5885695/chris-avina"}, "edited": false, "score": 0, "creation_date": 1476897223, "post_id": 40137646, "comment_id": 67544956, "body": "Thank you! Something i was just completely overlooking."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 0, "last_activity_date": 1476897077, "creation_date": 1476897077, "answer_id": 40137646, "question_id": 40136995, "link": "https://stackoverflow.com/questions/40136995/c-clearing-streams-and-testing-input-multiple-issues/40137646#40137646", "title": "C++ Clearing streams, and testing input - multiple issues", "body": "<p>According to <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/ignore\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/io/basic_istream/ignore</a> , the basic, no parameters <code>ignore</code> only removes one character from the input stream. According to the example provided in the above documentation link, the recommended usage is</p>\n\n<pre><code>input.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n</code></pre>\n\n<p>To consume the entire line. Note the additional include statement required to get <code>numeric_limits::max</code>.</p>\n"}], "owner": {"reputation": 49, "user_id": 5885695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10154555296967468/picture?type=large", "display_name": "Chris Avina", "link": "https://stackoverflow.com/users/5885695/chris-avina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 40137646, "answer_count": 1, "score": -1, "last_activity_date": 1476897077, "creation_date": 1476894791, "question_id": 40136995, "link": "https://stackoverflow.com/questions/40136995/c-clearing-streams-and-testing-input-multiple-issues", "title": "C++ Clearing streams, and testing input - multiple issues", "body": "<p>I'm currently learning C++ in class, and I have 3 problems with validation.  My professor asked me to not user stringstream for validating input.  I'm running into a problem where if the user enters two characters 'rr' for example, the error message displays twice (Which is why I just used stringstream originally to test for the first incorrect character). The second problem is if they enter two values, such as  -45 -56.  Somehow, the second value of 56 is coming to be positive after the loop and the program is running with it, even after I cleared the stream.\nLastly, if a user enters a float into an int, it truncates it - but how do I prevent that from happening?  E.g. I only want an int entered.  I tried less than and greater then with no avail. Notice in the below posted code, I do not have the truncating problem because the user input is a double - but I think someone should understand the theory of what I'm asking.</p>\n\n<p>Please let me know if the formatting on here is not correct, I was having some issues with pasting it in the block, but it looks like it may be alright now.</p>\n\n<p>Thank you!</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\n\nint main()\n\n{\nconst double EARTH_G = 1, SPACE_G = 0, EARTH_MOON_G = .17, VENUS_G = .90, MARS_G = .38,\n    MERCURY_G = .38, JUPITER_G = 2.36, SATURN_G = .92, URANUS_G = .89,\n    NEPTUNE_G = 1.14, PLUTO_G = .07;\n\ndouble userWeight;\n\nenum planets {Earth = 1, Space, Moon, Venus, Mars, Mercury, Jupiter, Saturn, Uranus,\nNeptune, Pluto};\n\n\n/*Validates input by making sure checking for only numbers greater than 0*/\n{\n    bool flag = 0;\n    while (flag == 0)\n    {\n        cout &lt;&lt; \"What is your earth weight in lbs?\" &lt;&lt; endl;\n        cin &gt;&gt; userWeight;\n        if (!static_cast&lt;double&gt;(userWeight) || userWeight &lt; 0)\n        {\n            cout &lt;&lt; \"Invalid Input.\\nPlease enter only positive numbers.\" &lt;&lt; endl;\n            cin.clear();\n            cin.ignore();\n\n\n        }\n        else\n        {\n            flag = 1;\n        }\n\n        }\n    }\n{\n    //Displays menu with choices, and allows produces output based on choice.\n    //Loops while input is invalid.\n    bool flag = 0;\n    int choice;\n    double newWeight;\n    while (flag == 0)\n    {\n        cout &lt;&lt; \"Select a place in space with a number to see your weight there!\\n\\n\";\n        cout &lt;&lt; \"1  - Earth\\n\\n2  - Space\\n\\n3  - Earth's Moon\\n\\n4  - Venus\\n\\n5  - Mars\\n\\n\"\n             &lt;&lt; \"6  - Mercury\\n\\n7  - Jupiter\\n\\n8  - Saturn\\n\\n9  - Uranus\\n\\n10 - Neptune\\n\\n11 - Pluto\\n\\n\";\n        cout &lt;&lt; \"Select 1 - 11:\\n\";\n        cin &gt;&gt; choice;\n\n        switch (choice)\n        {\n        case(Earth):\n        {\n            newWeight = (userWeight * EARTH_G);\n            cout &lt;&lt; \"Your weight on earth is \" &lt;&lt; fixed &lt;&lt; setprecision(1)\n                 &lt;&lt; newWeight &lt;&lt; endl;\n            flag = 1;\n            break;\n        }\n        case(Space):\n        {\n            newWeight = (userWeight * SPACE_G);\n            cout &lt;&lt; \"Your weight in space is \" &lt;&lt; fixed &lt;&lt; setprecision(1)\n                &lt;&lt; newWeight &lt;&lt; endl;\n            flag = 1;\n            break;\n        }\n        case(Moon):\n        {\n            newWeight = (userWeight * EARTH_MOON_G);\n            cout &lt;&lt; \"Your weight on the Earth's moon is \" &lt;&lt; fixed &lt;&lt; setprecision(1)\n                 &lt;&lt; newWeight &lt;&lt; endl;\n            flag = 1;\n            break;\n        }\n        case(Venus):\n        {\n            newWeight = (userWeight * VENUS_G);\n            cout &lt;&lt; \"Your weight on Venus is \" &lt;&lt; fixed &lt;&lt; setprecision(1) &lt;&lt; newWeight &lt;&lt; endl;\n            flag = 1;\n            break;\n        }\n        case(Mars):\n        {\n            newWeight = (userWeight * MARS_G);\n            cout &lt;&lt; \"Your weight on Mars is \" &lt;&lt; fixed &lt;&lt; setprecision(1) &lt;&lt; newWeight &lt;&lt; endl;\n            flag = 1;\n            break;\n        }\n        case(Mercury):\n        {\n            newWeight = (userWeight * MERCURY_G);\n            cout &lt;&lt; \"Your weight on Mercury is \" &lt;&lt; fixed &lt;&lt; setprecision(1) &lt;&lt; newWeight &lt;&lt; endl;\n            flag = 1;\n            break;\n        }\n        case(Jupiter):\n        {\n            newWeight = (userWeight * JUPITER_G);\n            cout &lt;&lt; \"Your weight on Jupiter is \" &lt;&lt; fixed &lt;&lt; setprecision(1) &lt;&lt; newWeight &lt;&lt; endl;\n            flag = 1;\n            break;\n        }\n        case(Saturn):\n        {\n            newWeight = (userWeight * SATURN_G);\n            cout &lt;&lt; \"Your weight on Saturn is \" &lt;&lt; fixed &lt;&lt; setprecision(1) &lt;&lt; newWeight &lt;&lt; endl;\n            flag = 1;\n            break;\n        }\n        case(Uranus):\n        {\n            newWeight = (userWeight * URANUS_G);\n            cout &lt;&lt; \"Your weight on Uranus is \" &lt;&lt; fixed &lt;&lt; setprecision(1) &lt;&lt; newWeight &lt;&lt; endl;\n            flag = 1;\n            break;\n        }\n        case(Neptune):\n        {\n            newWeight = (userWeight * NEPTUNE_G);\n            cout &lt;&lt; \"Your weight on Neptune is \" &lt;&lt; fixed &lt;&lt; setprecision(1) &lt;&lt; newWeight &lt;&lt; endl;\n            flag = 1;\n            break;\n        }\n        case(Pluto):\n        {\n            newWeight = (userWeight * PLUTO_G);\n            cout &lt;&lt; \"Your weight on Pluto is \" &lt;&lt; fixed &lt;&lt; setprecision(1) &lt;&lt; newWeight &lt;&lt; endl;\n            flag = 1;\n            break;\n        }\n        default:\n        {\n            cout &lt;&lt; \"Invalid Input.\" &lt;&lt; endl;\n            cin.clear();\n            cin.ignore();\n        }\n\n        }\n    }\n}\n}\n</code></pre>\n"}, {"tags": ["c++", "xml", "xsd", "xerces", "xerces-c"], "owner": {"reputation": 1027, "user_id": 224855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/055e76960dace89960dd682e2b26c20a?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/224855/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 520, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1476894192, "creation_date": 1476894192, "question_id": 40136831, "link": "https://stackoverflow.com/questions/40136831/how-to-configure-xerces-c-to-process-xincludes-prior-to-xml-schema-validation", "title": "How to Configure Xerces-C++ to process XIncludes prior to XML Schema Validation", "body": "<p>Consider an XML file, <strong>config.xml</strong>:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;Configuration\n  xsi:noNamespaceSchemaLocation = \"rules.xsd\"\n  xmlns:xsi                     = \"http://www.w3.org/2001/XMLSchema-instance\"\n  xmlns:xi                      = \"http://www.w3.org/2001/XInclude\"\n&gt;\n  &lt;xi:include href=\"bunnies.xml\" /&gt;\n  &lt;xi:include href=\"doggies.xml\" /&gt;\n&lt;/Configuration&gt;\n</code></pre>\n\n<p>where <strong>rules.xsd</strong> is an XML Schema document describing the structure &amp; constraints of <strong>config.xml</strong> after the XIncludes have been processed.</p>\n\n<hr>\n\n<p>Using <strong>xmllint</strong> one is able to perform the XIncludes prior to XML Schema validation from the command line:</p>\n\n<pre><code>xmllint --xinclude --schema rules.xsd config.xml\n</code></pre>\n\n<p>Invalidate changes to the child <strong>bunnies.xml</strong> or <strong>doggies.xml</strong> will be picked up by the xmllint tool.</p>\n\n<hr>\n\n<p>I am looking to use Xerces-C to apply XIncludes prior to XML Schema in order to determine if the software's configuration is valid prior to using the XML in runtime.  The road I am currently on has me looking at <a href=\"http://xerces.apache.org/xerces-c/program-dom-3.html#DOMLSParserFeatures\" rel=\"nofollow\">Xerces's DOMLSParser</a>.  </p>\n\n<p>I have managed to get the parser to perform XML Schema validation - or XIncludes - but when I attempt to configure both behaviors, it appears the XML Schema validation checks are run prior to the XIncludes; which falsely invalidates the document.</p>\n\n<hr>\n\n<p>Working from the <a href=\"https://svn.apache.org/repos/asf/xerces/c/trunk/samples/src/XInclude/XInclude.cpp\" rel=\"nofollow\">XInclude.cpp sample in Xerces-C</a> the parser is initialized &amp; configured like so:</p>\n\n<pre><code>static const XMLCh gLS[] = { chLatin_L, chLatin_S, chNull };\nDOMImplementation *impl = DOMImplementationRegistry::getDOMImplementation(gLS);\nDOMLSParser       *parser = ((DOMImplementationLS*)impl)-&gt;createLSParser(DOMImplementationLS::MODE_SYNCHRONOUS, 0);\nDOMConfiguration  *config = parser-&gt;getDomConfig();\n\nconfig-&gt;setParameter(XMLUni::fgDOMNamespaces, true);\nconfig-&gt;setParameter(XMLUni::fgXercesSchema, true);\nconfig-&gt;setParameter(XMLUni::fgXercesHandleMultipleImports, true);\nconfig-&gt;setParameter(XMLUni::fgXercesSchemaFullChecking, true);\nconfig-&gt;setParameter(XMLUni::fgXercesDoXInclude, true);\n\nconfig-&gt;setParameter(XMLUni::fgDOMValidate, false);\n</code></pre>\n\n<p>If fgDOMValidate is enabled - validation fails as it runs prior to XIncludes.<br>\nIf fgDOMValidate is disabled - validation does not run at all; but XIncludes do!</p>\n\n<hr>\n\n<p>My question - is there a way to configure a Xerces-C parser to do the above?  Or should I be thinking of doing it more directly, say create a parser which will do XIncludes only - stream the output into memory - then create a parser which will handle XML Schemas and pass the included XML into another / or reconfigured parser?</p>\n\n<p>Additionally, if anybody has experience or pointers on learning Xerces-C beyond their API documentation - that would be much appreciated!</p>\n"}, {"tags": ["c++", "qt", "hash", "cryptography"], "comments": [{"owner": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 0, "creation_date": 1476893585, "post_id": 40136573, "comment_id": 67542939, "body": "<i>&quot;but as the key is presumably random&quot;</i> - <code>QCryptographicHash::hash</code> does not make use of a key."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1476893796, "post_id": 40136573, "comment_id": 67543073, "body": "Curiously, none of the algorithms provided by QCryptographicHash is recommended for cryptography usage."}, {"owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1476894386, "post_id": 40136573, "comment_id": 67543420, "body": "@ddriver: <a href=\"https://doc.qt.io/qt-5/qcryptographichash.html#Algorithm-enum\" rel=\"nofollow noreferrer\">QCryptographicHash</a> supports SHA-512, which is surely good enough cryptographic usage."}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "reply_to_user": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "edited": false, "score": 1, "creation_date": 1476894652, "post_id": 40136573, "comment_id": 67543561, "body": "@TonyK I am not a cryptography expert, but I recall none of the SHA family is recommended. For example <a href=\"https://crackstation.net/hashing-security.htm\" rel=\"nofollow noreferrer\">crackstation.net/hashing-security.htm</a> recommends not to use SHA512 and SHA3 in particular."}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 2, "creation_date": 1476895287, "post_id": 40136573, "comment_id": 67543904, "body": "Just using a hash function is not sufficient and just adding a salt does little to improve the security. Instead iIterate over an HMAC with a random salt for about a 100ms duration and save the salt with the hash. Use functions such as <code>PBKDF2</code>, <code>password_hash</code>, <code>Bcrypt</code> and similar functions. The point is to make the attacker spend a lot of time finding passwords by brute force."}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1476895395, "post_id": 40136573, "comment_id": 67543961, "body": "Cryptographic hashes are not considered or called encryption. One reason why SHA-512 with a salt is not sufficient is a laptop (mine) can execute 750,000 per second, this would be applied to a list of 10,000,000 passwords sorted by frequency of usage Then there are special programs that fuzz those. Unless it is spear-fishing an attacker will probably be satisfied with 90% of the passwords cracked. So by lengthening the computer time from &lt;2us to &gt;100ms it takes the attacker 50,000 times as long, he will probably move on the the next site."}, {"owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1476895678, "post_id": 40136573, "comment_id": 67544129, "body": "@ddriver: in your link, we can find: &quot;Nevertheless, it is a good idea to use a more secure hash function like SHA256, SHA512, RipeMD, or WHIRLPOOL if possible.&quot; But we also find: &quot;DO NOT use: Fast cryptographic hash functions such as MD5, SHA1, SHA256, SHA512, RipeMD, WHIRLPOOL, SHA3, etc.&quot; Untangling this, I think it is fair to say that SHA512 is sufficient for cryptographic usage, but that a salted password hash should also be designed to run <i>slowly</i>, which can be achieved by requiring many calls to the underlying (cryptographically secure) hash algorithm."}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "reply_to_user": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "edited": false, "score": 1, "creation_date": 1476898811, "post_id": 40136573, "comment_id": 67545877, "body": "@TonyK No matter how fast or slow the hash function it will be to fast, thus iteration is required. On my Laptop MD5 is only 5% faster than SHA256, based on that SHA512 is <b>not</b> sufficient for password security."}, {"owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1476899328, "post_id": 40136573, "comment_id": 67546212, "body": "@zaph: Then we agree, don&#39;t we?"}, {"owner": {"reputation": 329, "user_id": 2314356, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/dp2c0.png?s=128&g=1", "display_name": "ArchNemSyS", "link": "https://stackoverflow.com/users/2314356/archnemsys"}, "edited": false, "score": 0, "creation_date": 1476909794, "post_id": 40136573, "comment_id": 67552299, "body": "From the comments I draw a conclusion that the Qt functions are really only suitable for CRC.  I will investigate the suggested alternatives and post an possible answer for consideration. Thanking you all for your insight"}], "answers": [{"comments": [{"owner": {"reputation": 1350, "user_id": 919155, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/90bf6a3dc0a54d71e7c480b1ae1df9ed?s=128&d=identicon&r=PG", "display_name": "Damien", "link": "https://stackoverflow.com/users/919155/damien"}, "edited": false, "score": 0, "creation_date": 1503370891, "post_id": 40251507, "comment_id": 78574264, "body": "Hash is not Cryptography"}], "tags": [], "owner": {"reputation": 329, "user_id": 2314356, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/dp2c0.png?s=128&g=1", "display_name": "ArchNemSyS", "link": "https://stackoverflow.com/users/2314356/archnemsys"}, "is_accepted": true, "score": 0, "last_activity_date": 1477439098, "creation_date": 1477439098, "answer_id": 40251507, "question_id": 40136573, "link": "https://stackoverflow.com/questions/40136573/qt-computing-and-comparing-password-hashs/40251507#40251507", "title": "Qt Computing and Comparing Password Hashs", "body": "<p>The Qt Library components are indeed unsuitable for Cryptography.</p>\n\n<p><a href=\"https://download.libsodium.org/doc/password_hashing/the_argon2i_function.html\" rel=\"nofollow\">libSodiums implementation of Argon</a> plugs in nicely and although relatively new <a href=\"https://www.owasp.org/index.php/Password_Storage_Cheat_Sheet\" rel=\"nofollow\">owasp</a> and others are saying good things.</p>\n\n<p>.pro    </p>\n\n<pre><code>QMAKE_CXXFLAGS += -lsodium\nQMAKE_LFLAGS += -lsodium\n</code></pre>\n\n<p>One must still <a href=\"https://www.openhub.net/p/passwdqc\" rel=\"nofollow\">enforce</a> or <a href=\"https://www.eff.org/deeplinks/2016/07/new-wordlists-random-passphrases\" rel=\"nofollow\">generate</a> strong passwords.</p>\n"}, {"tags": [], "owner": {"reputation": 1350, "user_id": 919155, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/90bf6a3dc0a54d71e7c480b1ae1df9ed?s=128&d=identicon&r=PG", "display_name": "Damien", "link": "https://stackoverflow.com/users/919155/damien"}, "is_accepted": false, "score": 0, "last_activity_date": 1503371282, "creation_date": 1503371282, "answer_id": 45808293, "question_id": 40136573, "link": "https://stackoverflow.com/questions/40136573/qt-computing-and-comparing-password-hashs/45808293#45808293", "title": "Qt Computing and Comparing Password Hashs", "body": "<p>The commonly used algorithm for hashing password currently is bcrypt.</p>\n\n<p>There is a simple C++ implementation <a href=\"https://github.com/rg3/bcrypt\" rel=\"nofollow noreferrer\">here</a> </p>\n\n<p>There is two important thing for hashing password:</p>\n\n<ol>\n<li>Salt, as you stated, to protect against rainbow table attack. Salt should be different for each user.</li>\n<li>Iterative hashing, where you will hash the password several thousands of times to make brute force attack significantly slower.</li>\n</ol>\n\n<p>bcrypt implement both of these.</p>\n"}], "owner": {"reputation": 329, "user_id": 2314356, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/dp2c0.png?s=128&g=1", "display_name": "ArchNemSyS", "link": "https://stackoverflow.com/users/2314356/archnemsys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1319, "favorite_count": 1, "accepted_answer_id": 40251507, "answer_count": 2, "score": 0, "last_activity_date": 1503371282, "creation_date": 1476893295, "question_id": 40136573, "link": "https://stackoverflow.com/questions/40136573/qt-computing-and-comparing-password-hashs", "title": "Qt Computing and Comparing Password Hashs", "body": "<p>Currently building a web facing authentication service in Qt for a Quiz program.</p>\n\n<p>It is my understanding that when storing a users password in a database it must be obscured in case it falls into the wrong hands.</p>\n\n<p>The prevailing method appears to be a process of adding <a href=\"https://en.wikipedia.org/wiki/Salt_(cryptography)\" rel=\"nofollow\">Salt</a> to the password and then storing the computed hash of the combination.</p>\n\n<p>This hash can later be compared :</p>\n\n<p>HASH( userinput + SALT ) = StoredHash </p>\n\n<p>Qt provides <a href=\"https://doc.qt.io/qt-5/qcryptographichash.html\" rel=\"nofollow\">QCryptographicHash</a>::hash( data, Algorithm method) but as the key is presumably random I do not see how this can be useful.</p>\n\n<p>Alternatively Qt Provides <a href=\"https://doc.qt.io/qt-5/qmessageauthenticationcode.html\" rel=\"nofollow\">QMessageAuthenticationCode</a>::hash( message, key, Algorithm method) am I correct in thinking that message would be userpassword and key would be pseudo_random(row_id).</p>\n\n<p>I am thinking of using the Sha2-256 Algorithim do I need <a href=\"https://en.wikipedia.org/wiki/Cryptographically_secure_pseudorandom_number_generator\" rel=\"nofollow\">Cryptographically secure pseudorandom number generator</a> ?  </p>\n"}, {"tags": ["c++", "qt"], "answers": [{"tags": [], "owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "is_accepted": true, "score": 1, "last_activity_date": 1477061293, "last_edit_date": 1477061293, "creation_date": 1476900615, "answer_id": 40138675, "question_id": 40136453, "link": "https://stackoverflow.com/questions/40136453/how-to-find-out-tray-system-bar-position-in-qt/40138675#40138675", "title": "How to find out tray system bar position in Qt?", "body": "<blockquote>\n  <p>Is there a crossplatform way to get a position of the 'task bar' (e.g.\n  Launcher on Ubuntu Unity) with Qt?</p>\n</blockquote>\n\n<p>Due to different platform APIs we can only rely on Qt and I would try to find the difference between the entire 'screen' geometry and 'available' one. Available geometry is basically the entire screen minus system task bar rectangle. Mind the multimonitor system and provide the widget position for getting proper entire and available monitor geometry.</p>\n\n<p><a href=\"http://doc.qt.io/qt-5/qdesktopwidget.html\" rel=\"nofollow\">http://doc.qt.io/qt-5/qdesktopwidget.html</a></p>\n\n<pre><code>QRect entireRect =\n   QApplication::desktop()-&gt;screenGeometry(pMyAppWidget);\n\nQRect availRect =\n   QApplication::desktop()-&gt;availableGeometry(pMyAppWidget);\n</code></pre>\n\n<p>Where <code>availRect</code> should be a subset of <code>entireRect</code>. Then you need to figure out which area of <code>entireRect</code> is not inside of <code>availRect</code> and that is not complex.</p>\n\n<p>Just proposing one simple way to find a 'subtracted' rectangle:</p>\n\n<pre><code>QRegion availRgn(availRect);\nQRegion entireRgn(entireRect);\nauto rects = entireRgn.subtracted(availRgn).rects();\nif (rects.size() &gt; 0) {\n   // there is a task bar rectangle found\n   QRect taskBarRect = rects[0];\n}\n</code></pre>\n"}], "owner": {"reputation": 2262, "user_id": 4847251, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ba88eab25bb90402783f6f05cfe64db9?s=128&d=identicon&r=PG&f=1", "display_name": "michnovka", "link": "https://stackoverflow.com/users/4847251/michnovka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 0, "accepted_answer_id": 40138675, "answer_count": 1, "score": 0, "last_activity_date": 1477061293, "creation_date": 1476892925, "question_id": 40136453, "link": "https://stackoverflow.com/questions/40136453/how-to-find-out-tray-system-bar-position-in-qt", "title": "How to find out tray system bar position in Qt?", "body": "<p>I am developing a cross-platform app and I wish to display a <code>QDialog</code> based on where systemtray is docked.\nOn windows there is just one tray but it can be docked to any side of the screen.\nOn Ubuntu you have top menubar and then Launcher.\nIs there a way to get position of this bar (and Launcher on Ubuntu Unity) with Qt?</p>\n"}, {"tags": ["c++", "while-loop"], "comments": [{"owner": {"reputation": 12896, "user_id": 104774, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/gQmt5.jpg?s=128&g=1", "display_name": "stefaanv", "link": "https://stackoverflow.com/users/104774/stefaanv"}, "edited": false, "score": 6, "creation_date": 1476892521, "post_id": 40136311, "comment_id": 67542238, "body": "<code>or</code> doesn&#39;t give a selection of possible values, it is a combination of boolean expressions"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1476892658, "post_id": 40136311, "comment_id": 67542327, "body": "if (repeat == &quot;n&quot; or repeat == &quot;N&quot;). Same with y"}, {"owner": {"reputation": 33660, "user_id": 34796, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/X2g3z.png?s=128&g=1", "display_name": "Dave Swersky", "link": "https://stackoverflow.com/users/34796/dave-swersky"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1476892925, "post_id": 40136311, "comment_id": 67542510, "body": "@JesperJuhl  How do you know the OP isn&#39;t <i>working</i> from a book?  If questions like this don&#39;t represent the reason for this site, what is?  Comments like this drive away the very people who need this site.  Please comment/answer when you have something constructive to say."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1476893053, "post_id": 40136311, "comment_id": 67542608, "body": "I know it&#39;s a style preference, but you can also half the number of lines you have by losing the excess {} for all the if / else statements."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1476893103, "post_id": 40136311, "comment_id": 67542641, "body": "@UKMonkey Your comment will stir a discussion almost as intense as the vim/emacs battle :)"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 1, "creation_date": 1476893216, "post_id": 40136311, "comment_id": 67542719, "body": "@vsoftco to which the answer is of course, notepad ^_^"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1476893233, "post_id": 40136311, "comment_id": 67542726, "body": "<i>while (repeat == &quot;y&quot; or &quot;Y&quot;)</i> -- Unfortunately, <code>if</code> statements in C++ do not follow the way we speak shorthand English.  If you want to compare multiple things, you have to specify the entire statement each time, e.g. <code>if (x == y or x == z)</code> instead of <code>if (x == y or z)</code>"}, {"owner": {"reputation": 77, "user_id": 5615850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qdCP5.jpg?s=128&g=1", "display_name": "Bruncky", "link": "https://stackoverflow.com/users/5615850/bruncky"}, "reply_to_user": {"reputation": 33660, "user_id": 34796, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/X2g3z.png?s=128&g=1", "display_name": "Dave Swersky", "link": "https://stackoverflow.com/users/34796/dave-swersky"}, "edited": false, "score": 2, "creation_date": 1476893669, "post_id": 40136311, "comment_id": 67542992, "body": "@DaveSwersky I appreciate your comment. I really do feel annoyed when I see a question (especially my own) get instantly downvoted because of people who think like this because the question isn&#39;t good enough for them..."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 4, "creation_date": 1476893897, "post_id": 40136311, "comment_id": 67543126, "body": "I actually think this is a perfectly good question - it&#39;s well formed, the question is clear, the code is included (although not minimal; but pretty small)... it satisfies all the requirements for a question here."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1476894796, "post_id": 40136311, "comment_id": 67543642, "body": "@Brunky: For future reference, you should have removed the &#39;<i>&#39; and &#39;/&#39; cases, and the corresponding functions.  Discovering that you could remove the &#39;-&#39; case too would have been more work - but useful.  It really is worth spending some time to prepare a minimal example.  (But thanks for giving us code which isn&#39;t *too</i> huge)."}, {"owner": {"reputation": 77, "user_id": 5615850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qdCP5.jpg?s=128&g=1", "display_name": "Bruncky", "link": "https://stackoverflow.com/users/5615850/bruncky"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1476895124, "post_id": 40136311, "comment_id": 67543807, "body": "@MartinBonner I&#39;ll keep this in mind, thanks for the advice"}], "answers": [{"tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": true, "score": 7, "last_activity_date": 1476895372, "last_edit_date": 1476895372, "creation_date": 1476892809, "answer_id": 40136419, "question_id": 40136311, "link": "https://stackoverflow.com/questions/40136311/having-trouble-with-a-while-loop-in-c/40136419#40136419", "title": "Having trouble with a &#39;while&#39; loop in C++", "body": "<pre><code>repeat == \"n\" or \"N\"\n</code></pre>\n\n<p>evaluates to</p>\n\n<pre><code>(repeat == \"n\") || \"N\"\n</code></pre>\n\n<p>see the <a href=\"http://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow\">C++ operator precedence</a>.</p>\n\n<p>The first <code>repeat == \"n\"</code> evaluates to <code>true</code> or <code>false</code> depending on your input, but the second clause of the OR, i.e. <code>\"N\"</code>, always evaluates to <code>true</code> because it is a string literal that decays to a non-zero <code>const char*</code> pointer, and in C or C++ everything non-zero is implicitly converted to <code>true</code>. So your OR clause is always <code>true</code>, which implies that the <code>if</code> block will always be executed.</p>\n\n<p>As mentioned in the comments, you need to do</p>\n\n<pre><code>if(repeat == \"n\" || repeat == \"N\") {...}\n</code></pre>\n\n<p>Similarly with the first <code>while</code> condition.</p>\n"}, {"tags": [], "owner": {"reputation": 65, "user_id": 6087642, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/ZuJxk.jpg?s=128&g=1", "display_name": "Chriskt", "link": "https://stackoverflow.com/users/6087642/chriskt"}, "is_accepted": false, "score": 1, "last_activity_date": 1476897617, "creation_date": 1476897617, "answer_id": 40137789, "question_id": 40136311, "link": "https://stackoverflow.com/questions/40136311/having-trouble-with-a-while-loop-in-c/40137789#40137789", "title": "Having trouble with a &#39;while&#39; loop in C++", "body": "<p>Nice code! I try using \"||\" in place of your \"or\" in your if statements. Might want to refresh your knowledge with C++ short-circuiting of booleans.</p>\n"}], "owner": {"reputation": 77, "user_id": 5615850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qdCP5.jpg?s=128&g=1", "display_name": "Bruncky", "link": "https://stackoverflow.com/users/5615850/bruncky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 40136419, "answer_count": 2, "score": 1, "last_activity_date": 1476897617, "creation_date": 1476892450, "question_id": 40136311, "link": "https://stackoverflow.com/questions/40136311/having-trouble-with-a-while-loop-in-c", "title": "Having trouble with a &#39;while&#39; loop in C++", "body": "<p>I started building a very simple version of a calculator in C++. The idea is to perform basic operations with only two numbers and then loop back so the user can make a new calculation.</p>\n\n<p>The program looks like this:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include\"mathOperations.h\"\nusing namespace std;\n\nint main()\n{\n  int x, y;\n  string operation;\n  string repeat = \"y\";\n\n  while (repeat == \"y\" or \"Y\")\n  {\n    cout &lt;&lt; \"Welcome! This is a raw version of a calculator - only use two numbers.\" &lt;&lt; endl;\n    cin &gt;&gt; x &gt;&gt; operation &gt;&gt; y;\n\n    if (operation == \"+\")\n    {\n      cout &lt;&lt; \"Result: \" &lt;&lt; add(x, y) &lt;&lt; endl;\n    }\n    else if (operation == \"-\")\n    {\n      cout &lt;&lt; \"Result: \" &lt;&lt; subtract(x, y) &lt;&lt; endl;\n    }\n    else if (operation == \"*\")\n    {\n      cout &lt;&lt; \"Result: \" &lt;&lt; multiply(x, y) &lt;&lt; endl;\n    }\n    else if (operation == \"/\")\n    {\n      cout &lt;&lt; \"Result: \" &lt;&lt; divide(x, y) &lt;&lt; endl;\n    }\n    else\n    {\n      cout &lt;&lt; \"This is not a valid sign. Please choose another one!\" &lt;&lt; endl;\n    }\n\n    cout &lt;&lt; \"Wanna go again? Type 'y' or 'n'.\" &lt;&lt; endl;\n    cin &gt;&gt; repeat;\n\n    if (repeat == \"n\" or \"N\")\n    {\n      cout &lt;&lt; \"Alright, have a nice day!\" &lt;&lt; endl;\n      break;\n    }\n  }\n}\n\nint add(int x, int y)\n{\n  return x + y;\n}\n\nint subtract(int x, int y)\n{\n  return x - y;\n}\n\nint multiply(int x, int y)\n{\n  return x * y;\n}\n\nint divide(int x, int y)\n{\n  return x / y;\n}\n</code></pre>\n\n<p><strong>NOTE:</strong> There is a 'mathOperations.h' file in which I have made forward declarations of all functions used.</p>\n\n<p>The problem is that whenever I type in 'y' to make it loop, it simply outputs the following 'if' statement and breaks out of the loop and the program finishes. I couldn't quite figure out why this is happening, since the 'if' statement is only supposed to run if I type in 'n'.</p>\n"}, {"tags": ["c++", "c", "lua"], "comments": [{"owner": {"reputation": 2863, "user_id": 415823, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2c57689ce574b5988334b777e774bb3?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/415823/adam"}, "edited": false, "score": 1, "creation_date": 1476895080, "post_id": 40136301, "comment_id": 67543787, "body": "Its on the stack. Please read the <a href=\"http://www.lua.org/manual/5.3/manual.html#4\" rel=\"nofollow noreferrer\">manual</a> as the stack is fundamental to how the C API works. <a href=\"http://www.lua.org/pil/24.html\" rel=\"nofollow noreferrer\">Programming in Lua</a> has usage examples."}], "answers": [{"tags": [], "owner": {"reputation": 14502, "user_id": 2505965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5056f8ef1dc81df419a479f24d5f80f5?s=128&d=identicon&r=PG", "display_name": "Oka", "link": "https://stackoverflow.com/users/2505965/oka"}, "is_accepted": true, "score": 1, "last_activity_date": 1476905170, "last_edit_date": 1592644375, "creation_date": 1476905170, "answer_id": 40139943, "question_id": 40136301, "link": "https://stackoverflow.com/questions/40136301/table-as-parameter-in-c-function-called-from-lua/40139943#40139943", "title": "Table as parameter in C function called from Lua", "body": "<p>Arguments to a <code>CFunction</code> are pressed onto the virtual stack in the order that they are provided, and it is simply up to you to do the error checking required before you operate on these values.</p>\n<h2><a href=\"http://www.lua.org/manual/5.3/manual.html#lua_CFunction\" rel=\"nofollow noreferrer\">Lua 5.3 Manual \u00a74.8 - <code>lua_CFunction</code></a>:</h2>\n<blockquote>\n<p>In order to communicate properly with Lua, a C function must use the following protocol, which defines the way parameters and results are passed: a C function receives its arguments from Lua in its stack in direct order (the first argument is pushed first).</p>\n<p>[ ... ]</p>\n<p>The first argument (if any) is at index 1 and its last argument is at index <code>lua_gettop(L)</code>. To return values to Lua, a C function just pushes them onto the stack, in direct order (the first result is pushed first), and returns the number of results</p>\n</blockquote>\n<p>An example of exhaustively checking the number of elements in a table, with an arbitrary first argument.</p>\n<pre><code>int count (lua_State *L) {\n    luaL_checktype(L, 2, LUA_TTABLE);\n\n    puts(lua_tostring(L, 1));\n    \n    size_t ec = 0;\n    \n    lua_pushnil(L);\n    \n    while (lua_next(L, 2)) {\n        lua_pop(L, 1);\n        ec++;\n    }\n    \n    lua_pushinteger(L, (lua_Integer) ec);\n    return 1;\n}\n</code></pre>\n<p>After registering the function for use in Lua:</p>\n<pre><code>count('foo', { 'a', 'b', 'c' }) -- 3\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7043200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86c15a477476b4aa824c1cd6709280e7?s=128&d=identicon&r=PG&f=1", "display_name": "Michael P.", "link": "https://stackoverflow.com/users/7043200/michael-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 478, "favorite_count": 0, "accepted_answer_id": 40139943, "answer_count": 1, "score": 1, "last_activity_date": 1476905539, "creation_date": 1476892435, "last_edit_date": 1476905539, "question_id": 40136301, "link": "https://stackoverflow.com/questions/40136301/table-as-parameter-in-c-function-called-from-lua", "title": "Table as parameter in C function called from Lua", "body": "<p>I'm dealing with Lua for a longer time but there is one point I can't achieve.\nIn a C function which is called from Lua I'm able to read a global Lua table using the table name like this:</p>\n\n<p><strong>C:</strong></p>\n\n<pre><code>    // get table\n    lua_getglobal(L, \"tableName\");\n    if (!lua_istable(L, -1))                \n       break;            \n\n    // count entries in table\n    ULONG numEntries = 0; \n    lua_pushnil(L);\n    while(lua_next(L,-2))\n    {\n        numEntries++;\n        lua_pop(L, 1);\n    }\n</code></pre>\n\n<p>but if I have a lua function which calls a C function like this:</p>\n\n<p><strong>Lua:</strong></p>\n\n<pre><code>   luaTable = { }\n   luaTable.Param1 = Value1 \n   luaCallC(\"This is a Text\", luaTable)\n</code></pre>\n\n<p>How do I access the table argument?</p>\n\n<p><strong>C:</strong></p>\n\n<pre><code>    // get table\n    // ???\n\n    // count entries in table\n    ULONG numEntries = 0; \n    lua_pushnil(L);\n    while(lua_next(L,-2))\n    {\n        numEntries++;\n        lua_pop(L, 1);\n    }\n</code></pre>\n"}, {"tags": ["c++", "opencl"], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 7043218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc0de9931253b7242301143d5a6b09b9?s=128&d=identicon&r=PG&f=1", "display_name": "Ijjz", "link": "https://stackoverflow.com/users/7043218/ijjz"}, "edited": false, "score": 0, "creation_date": 1477250457, "post_id": 40141270, "comment_id": 67678142, "body": "Thanks a lot !! The code yields correct results. After a bit of reading i realized that the global id of the work item need not be modified explicitly. Thanks for your support :)"}], "tags": [], "owner": {"reputation": 4922, "user_id": 1152356, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zx2WP.jpg?s=128&g=1", "display_name": "mfa", "link": "https://stackoverflow.com/users/1152356/mfa"}, "is_accepted": true, "score": 1, "last_activity_date": 1476910122, "creation_date": 1476910122, "answer_id": 40141270, "question_id": 40136297, "link": "https://stackoverflow.com/questions/40136297/opencl-kernel-code/40141270#40141270", "title": "OpenCl kernel code", "body": "<p>You should calculate i as if the work item were the only one in the set. gid is the global id of the work item, and i needs to be three times that. You also don't need to modify gid or i after they are used. This is not optimal, but it will get you the correct answer.</p>\n\n<pre><code>void kernel simple_add(global const int* A, global const int* SUM){\n    int gid = get_global_id(0);\n    int i = gid * 3;\n    SUM[gid]=A[i]+A[i+2];\n}\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 7043218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc0de9931253b7242301143d5a6b09b9?s=128&d=identicon&r=PG&f=1", "display_name": "Ijjz", "link": "https://stackoverflow.com/users/7043218/ijjz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 40141270, "answer_count": 1, "score": 2, "last_activity_date": 1476910122, "creation_date": 1476892430, "question_id": 40136297, "link": "https://stackoverflow.com/questions/40136297/opencl-kernel-code", "title": "OpenCl kernel code", "body": "<p>I am very new to OpenCL (started today). I am having a hard time in realizing the kernel code for adding numbers of an array in the following fashion: \nIf A[]=[1,2,3,4,5,6,7,8,9,10], then the sum should be sum[]=[4,10,16];</p>\n\n<pre><code>i.e, sum[i]=A[i]+A[i+2]; \n     i=i+3;\n</code></pre>\n\n<p>I have tried the following code but it does not seem to work.</p>\n\n<pre><code>std::string kernel_code =\n        \"   void kernel simple_add(global const int* A, global const int* B, global int* C){ \"\n        \"   int x =0;\"\n        \"   int i =get_global_id(0);\"\n        \"   SUM[x]=A[i]+A[i+2];\"\n        \"   i=i+3;\n        \"   x++;\"\n        \"   }  \";\n</code></pre>\n\n<p>I am certain this is not the way to do it. Suggestions in this regard would be appreciated. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1476892948, "post_id": 40136217, "comment_id": 67542526, "body": "Pretty sure this is impossible to do in the general case. I would just rename your function <code>compose</code>."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1476892962, "post_id": 40136217, "comment_id": 67542538, "body": "I no longer know enough C++ to assess this post, but I think it is at least relevant to what you are trying to do: <a href=\"https://www.fpcomplete.com/blog/2012/07/the-functor-pattern-in-c\" rel=\"nofollow noreferrer\">The Functor Pattern in C++</a>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1476894999, "post_id": 40136217, "comment_id": 67543744, "body": "You may restrict your template type for your function with SFINAE."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1476905395, "post_id": 40136217, "comment_id": 67549823, "body": "Are you sure you need SFINAE? There probably does exist a scenario where it&#39;s ambiguous to the compiler, but <a href=\"http://coliru.stacked-crooked.com/a/456cf695144fad06\" rel=\"nofollow noreferrer\">this</a> seems to work fine."}, {"owner": {"reputation": 932, "user_id": 730606, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6c007d88f3e1d6ddac17f453d2962c13?s=128&d=identicon&r=PG", "display_name": "Polymer", "link": "https://stackoverflow.com/users/730606/polymer"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1476907170, "post_id": 40136217, "comment_id": 67550844, "body": "@AndyG To clarify my nervousness. fmap should be defined for each type it&#39;s used on, because very different types have very different implementations. Functions have a specific implementation different from containers or trees, but I&#39;m stuck using a fully generic interface.   This may not be a problem. It just makes me nervous. I don&#39;t know if I need SFINAE."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1476907378, "post_id": 40136217, "comment_id": 67550955, "body": "Can you elaborate what you mean by &quot;fmap should be defined for each type it&#39;s used on&quot; At first glance it sounds like overloading for those types specifically would be the best approach, but I presume you mean something else."}, {"owner": {"reputation": 932, "user_id": 730606, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6c007d88f3e1d6ddac17f453d2962c13?s=128&d=identicon&r=PG", "display_name": "Polymer", "link": "https://stackoverflow.com/users/730606/polymer"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1476907568, "post_id": 40136217, "comment_id": 67551067, "body": "@AndyG Like operator +. The implementation for integers is different then for matrices. So they should get their own +. I implemented + for integers (vectors), and then I went to implement it for matrices (functions), and found I needed to make this second + fully generic. Which makes me nervous."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1476907713, "post_id": 40136217, "comment_id": 67551153, "body": "@Polymer: Honestly you should be okay. Since you implemented it already with some specific types, they&#39;ll already be better matches than the fully generic one. That is, the fully generic one will be called as a last resort, which sounds like what you&#39;re looking for."}, {"owner": {"reputation": 932, "user_id": 730606, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6c007d88f3e1d6ddac17f453d2962c13?s=128&d=identicon&r=PG", "display_name": "Polymer", "link": "https://stackoverflow.com/users/730606/polymer"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1476908053, "post_id": 40136217, "comment_id": 67551366, "body": "@AndyG That may be true, maybe I&#39;ll just use static_asserts to warn users about semantics. Do you think users would prefer that to function_traits?"}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1476939471, "post_id": 40136217, "comment_id": 67561011, "body": "As a side note, in vector overload you already know the size of the result, so instantiating the returned value of known size and filling it instead of appending to the end saves you a few reallocations."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1476985211, "post_id": 40136217, "comment_id": 67590844, "body": "I am a bit skeptical about your attempt to use C++ like Haskell. Why don&#39;t you stick with C++ idioms, like ranges, transforms, etc.?"}, {"owner": {"reputation": 932, "user_id": 730606, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6c007d88f3e1d6ddac17f453d2962c13?s=128&d=identicon&r=PG", "display_name": "Polymer", "link": "https://stackoverflow.com/users/730606/polymer"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1476987024, "post_id": 40136217, "comment_id": 67592006, "body": "@Maxim Egorushkin I have no problem with <code>std::transform</code>. If I need an algorithm which traverses a list I&#39;ll thumb through the stl. <code>fmap</code> is meaningful for <code>unique_ptr</code>, and functions, as well. Iterators don&#39;t interface with these."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1476990186, "post_id": 40136217, "comment_id": 67593914, "body": "There is boost::indirect_iterator for containers of pointers, or universal boost::transform_iterator which is what you try to reinvent as <code>fmap</code>."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1476990359, "post_id": 40136217, "comment_id": 67594009, "body": "Also see <a href=\"http://www.boost.org/doc/libs/1_61_0/libs/range/doc/html/range/reference/adaptors/reference/transformed.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_61_0/libs/range/doc/html/range/referenc&zwnj;&#8203;e/&hellip;</a>"}, {"owner": {"reputation": 932, "user_id": 730606, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6c007d88f3e1d6ddac17f453d2962c13?s=128&d=identicon&r=PG", "display_name": "Polymer", "link": "https://stackoverflow.com/users/730606/polymer"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1477000998, "post_id": 40136217, "comment_id": 67599352, "body": "@Maxim Egorushkin I edited the question. Is it more clear what I&#39;m trying to do?"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1477001977, "post_id": 40136217, "comment_id": 67599684, "body": "Essentially, you would like to implement a domain specific language in C++ that resembles Haskell. Why not just use Haskell?"}, {"owner": {"reputation": 932, "user_id": 730606, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6c007d88f3e1d6ddac17f453d2962c13?s=128&d=identicon&r=PG", "display_name": "Polymer", "link": "https://stackoverflow.com/users/730606/polymer"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1477003946, "post_id": 40136217, "comment_id": 67600311, "body": "@Maxim Egorushkin Can you explain why you think that&#39;s what I&#39;m trying to do?"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1477040714, "post_id": 40136217, "comment_id": 67612589, "body": "@Polymer That is what you said: <i>I learned it in Haskell, and I&#39;m trying to implement it in C++.</i>"}, {"owner": {"reputation": 932, "user_id": 730606, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6c007d88f3e1d6ddac17f453d2962c13?s=128&d=identicon&r=PG", "display_name": "Polymer", "link": "https://stackoverflow.com/users/730606/polymer"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1477072806, "post_id": 40136217, "comment_id": 67633023, "body": "@Maxim Egorushkin After reading your comment, I tried to rewrite the answer only using references to transform. Introduced overloads like <code>unique_ptr&lt;double&gt; o= transform( unique_ptr&lt;int&gt;{2}, [](int x){return to&lt;double(x)&gt;*1.5;})</code> would compose with ranges. But some of Eric Niebler&#39;s proposed transform functions accept containers while returning pairs of integers. That breaks the above generic examples I gave because c++ doesn&#39;t overload over return values. Introducing a new name solves this. It&#39;s just a more general transform, but I can&#39;t call it that."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1477077189, "post_id": 40136217, "comment_id": 67635226, "body": "<code>unique_ptr&lt;int&gt;{2}</code> is not well-formed C++."}, {"owner": {"reputation": 932, "user_id": 730606, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6c007d88f3e1d6ddac17f453d2962c13?s=128&d=identicon&r=PG", "display_name": "Polymer", "link": "https://stackoverflow.com/users/730606/polymer"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1477078243, "post_id": 40136217, "comment_id": 67635810, "body": "@Maxim Egorushkin Guess I don&#39;t know what I&#39;m talking about then. Sorry for wasting your time."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1477081000, "post_id": 40136217, "comment_id": 67637117, "body": "Well, do not feel down. Imagine someone coming to Haskell forum and asking them how to use Haskell like C++. The primary question is why?"}, {"owner": {"reputation": 932, "user_id": 730606, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6c007d88f3e1d6ddac17f453d2962c13?s=128&d=identicon&r=PG", "display_name": "Polymer", "link": "https://stackoverflow.com/users/730606/polymer"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 1, "creation_date": 1477087243, "post_id": 40136217, "comment_id": 67639695, "body": "@Maxim Egorushkin C++ is the most powerful pragmatic language I have ever worked with. I have yet to find an abstraction it can&#39;t make usable. The generic example I gave using <code>fmap</code> works in C++, but it doesn&#39;t work in rust, C#, or Java. Yet C++&#39;s performance is generally faster and easier to understand, certainly much easier to understand then Haskell&#39;s."}], "answers": [{"comments": [{"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1476985077, "post_id": 40138839, "comment_id": 67590784, "body": "<code>vector</code> seems to be a premature optimization. To mimic Haskel it should be a <code>list</code>."}, {"owner": {"reputation": 932, "user_id": 730606, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6c007d88f3e1d6ddac17f453d2962c13?s=128&d=identicon&r=PG", "display_name": "Polymer", "link": "https://stackoverflow.com/users/730606/polymer"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1476988552, "post_id": 40138839, "comment_id": 67592924, "body": "@Maxim Egorushkin <code>vector</code> and <code>list</code> are isomorphic, but vector generally performs better on processors. Because c++ doesn&#39;t implement <code>list</code> as an algebraic data type, it isn&#39;t as safe as Haskell&#39;s <code>list</code>. So using it by default wouldn&#39;t buy you anything. I&#39;m not trying to mimic haskell, I&#39;m trying to use the abstractions I&#39;ve learned from it."}], "tags": [], "owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "is_accepted": false, "score": 1, "last_activity_date": 1476901212, "creation_date": 1476901212, "answer_id": 40138839, "question_id": 40136217, "link": "https://stackoverflow.com/questions/40136217/overloading-over-function-types-with-templates/40138839#40138839", "title": "overloading over function types with templates", "body": "<p>You can fake it with SFINAE, but you shouldn't. It's a matter of style and idiom. </p>\n\n<p>Haskell is all about type classes, with a programmer expecting to have to spangle each type with all the clubs it belongs to. C++, in contrast, wants to be more implicit in specifying a type's capabilities. You've shown \"<code>vector</code>\" and \"arbitrary callable\" there, but why just <code>vector</code>? Why not an arbitrary container type? And this arbitrary container type I just wrote has an <code>operator()</code>, because reasons. So which one should it choose?</p>\n\n<p>Bottom line, while you can use SFINAE tricks to resolve technical ambiguities, you shouldn't use them to resolve essential ambiguities. Just use two different names.</p>\n"}, {"tags": [], "owner": {"reputation": 932, "user_id": 730606, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6c007d88f3e1d6ddac17f453d2962c13?s=128&d=identicon&r=PG", "display_name": "Polymer", "link": "https://stackoverflow.com/users/730606/polymer"}, "is_accepted": true, "score": 0, "last_activity_date": 1477082221, "last_edit_date": 1495540839, "creation_date": 1476923962, "answer_id": 40143693, "question_id": 40136217, "link": "https://stackoverflow.com/questions/40136217/overloading-over-function-types-with-templates/40143693#40143693", "title": "overloading over function types with templates", "body": "<p>Here's the simplest compromise I found</p>\n\n<pre><code>template &lt;typename FuncT, typename O, typename T&gt;\nauto fmap(FuncT f, function&lt;O(T)&gt; in){\n  return [f, in](T x){\n    return f(in(x));\n  };\n}\n</code></pre>\n\n<p>Unfortunately this requires that <code>function&lt;Output(Input)&gt;</code> decorate the call site, and it litters indirections. <s>I'm pretty sure this is the best one can do if constraining <code>fmap</code> is required.</s></p>\n\n<p>Edit: <a href=\"https://stackoverflow.com/a/40166486/730606\">You can do better.</a> The link gives a way to restrict to callables, that also in-lines.</p>\n\n<p>The function could be written like this:</p>\n\n<pre><code>template &lt;typename FuncT, typename T&gt;\nauto fmap(FuncT f, tagged_lambda&lt;T&gt; in){\n  return tag_lambda([f, in](T x){\n    return f(in(x));\n  });\n}\n</code></pre>\n\n<p>You could choose the version you want at the call site, by calling </p>\n\n<p><code>fmap(g, tag_lambda({}(int x){return x + 1;}) );</code> </p>\n\n<p>or </p>\n\n<p><code>fmap(g, function&lt;int(int)&gt;({}(int x){return x + 1;}) );</code></p>\n\n<p>Given how templates work, I'm pretty sure tagging the function is required.</p>\n\n<p>Here is a blog post which also talks about the issue, and discusses other options.\n<a href=\"http://yapb-soc.blogspot.com/2012/10/fmap-in-c.html\" rel=\"nofollow noreferrer\">http://yapb-soc.blogspot.com/2012/10/fmap-in-c.html</a>.</p>\n"}], "owner": {"reputation": 932, "user_id": 730606, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6c007d88f3e1d6ddac17f453d2962c13?s=128&d=identicon&r=PG", "display_name": "Polymer", "link": "https://stackoverflow.com/users/730606/polymer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 1, "accepted_answer_id": 40143693, "answer_count": 2, "score": 6, "last_activity_date": 1477082221, "creation_date": 1476892220, "last_edit_date": 1477006577, "question_id": 40136217, "link": "https://stackoverflow.com/questions/40136217/overloading-over-function-types-with-templates", "title": "overloading over function types with templates", "body": "<p>There is a common abstraction for both containers and functions. I learned it in Haskell, and I'm trying to implement it in C++.</p>\n\n<p>Most C++ programmers are familiar with std::transform, roughly speaking given a function from type A to B, you can convert a container of type A to a container of type B.</p>\n\n<p>You can transform functions in a similar way, given a function foo from A to B, you can convert a function bar taking Z to A to a function foo . bar taking Z to B. The implementation is simple, it's just composition.</p>\n\n<p>I wanted to define a function fmap, on containers and functions, to reflect this abstraction for generic programming.</p>\n\n<p>The container was easy (I know this isn't fully general)</p>\n\n<pre><code>template &lt;typename A, typename Func&gt;\nauto fmap(Func f, vector&lt;A&gt; in) {\n  vector&lt;decltype(f(in[0]))&gt; out_terms{};\n  for(auto vec : in)\n    out_terms.push_back(f(vec));\n  return out_terms;\n}\n</code></pre>\n\n<p>However, the analogous function for functions makes me much more nervous.</p>\n\n<pre><code>template &lt;typename FuncT, typename Func&gt;\nauto fmap(FuncT f, Func in) {\n  return [f, in](auto x){\n    return f(in(x));\n  };\n}\n</code></pre>\n\n<p>Although the template won't specialize for anything except callable things, I'm worried this will confuse overload resolution. I would like to introduce type constraints on the template parameters to restrict their resolution to function types to keep the name space clean. And I was going to ask how to do that.</p>\n\n<p>This abstraction is extremely general, there are corresponding fmaps for pointers to values, which I suspect might conflict as well.</p>\n\n<p>So I think my question is, can I have two different template implementations with the same template level signature? I'm almost certain the answer is no but maybe something similar can be faked. And if not, what tools are available today to distinguish between the overloads? Especially for function types.</p>\n\n<p>This seems, to me, to be a textbook case for concepts, though I'm not sure.</p>\n\n<p>Edit: Boost would be acceptable to use, and SFINAE in particular. I'm trying to find a solution that would be familiar to most programmers, and as convenient, and canonical as possible. I could rename fmap to compose, but then the programmer would have to know to pass compose to a template function accepting fmap. That would be unfortunate, because fmap is semantically unique.</p>\n\n<p>Edit 2: A trivial example of how this is used.</p>\n\n<pre><code>template &lt;typename T&gt;\nauto double_everything(T in){\n  auto doublef = [](auto x){return 2*x;};\n  return fmap(doublef, in);\n}\n</code></pre>\n\n<p>It generalizes maps over containers to maps over \"container like\" things. So <code>double_everything(vector&lt;int&gt; {1, 2, 3})</code> returns a vector with its elements doubled. But <code>double_everything([](int x){ return x + 1; })</code> returns a function whose outputs are twice the outputs of the increment function. Which is like doubling a kind of list. The abstraction has some nice properties, I'm not just making it up. At any rate, renaming the function <code>fmap</code> to compose doesn't answer the question.</p>\n\n<p>Edit 3:\n<code>fmap</code> for a template <code>C</code> takes functions from <code>A</code> to <code>B</code> to functions from <code>C&lt;A&gt;</code> to <code>C&lt;B&gt;</code> and satisfies <code>fmap( compose(f, g) , c ) = fmap( f, fmap( g, c ))</code>. This is a nice structure preserving property.</p>\n\n<p>Functions which do this for ranges already exist by different names. But ranges aren't the only templates on types. Here is <code>fmap</code> for <code>std::optional</code>:</p>\n\n<pre><code>template&lt;typename T, typename Func&gt;\nauto fmap(Func f, optional&lt;T&gt; o) -&gt; optional&lt;f(*o)&gt;{\n  if(o)\n    return f(*o);\n  else\n    {};\n}\n</code></pre>\n\n<p>This implementation doesn't involve any range concepts at all, like the<code>fmap</code> for functions presented earlier. But it satisfies the semantic requirements for <code>fmap</code>. </p>\n\n<p>I'm trying to define <code>fmap</code> for different overloads in the same way I would define a new <code>operator *</code> for a custom matrix type. So I would happily define <code>fmap</code> in terms of <code>boost::transform_iterator</code>. Then these algorithms would work with a function generic in terms of <code>fmap</code>.</p>\n\n<p>Here is an example of such a function:</p>\n\n<pre><code>template &lt; \n  template&lt;typename, typename&gt; class Cont, \n  typename Fmappable, \n  typename Alloc, \n  typename Func&gt;\nauto map_one_deep(Func f, Cont&lt;Fmappable, Alloc&gt; c){\n  auto g = [f](Fmappable x){ return fmap(f, x); };\n  return fmap(g, c);\n}\n</code></pre>\n\n<p>now if we write</p>\n\n<pre><code>auto lists = vector&lt;vector&lt;int&gt; &gt; { {1, 2, 3}, {4, 5, 6} };\nauto lists_squared = map_one_deep( [](int x){return x*x;} , lists);\n</code></pre>\n\n<p><code>lists_squared</code> printed gives</p>\n\n<pre><code>1 4 9\n16 25 36\n</code></pre>\n\n<p>If we instead had a vector of optionals, the optionals would be squared provided they contained elements.</p>\n\n<p>I'm trying to understand how one should work with higher order functions in c++.</p>\n"}, {"tags": ["c++", "qt", "callback", "void", "point-cloud-library"], "answers": [{"comments": [{"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 2, "creation_date": 1590187965, "post_id": 40136463, "comment_id": 109596401, "body": "This is very valuable additional insight! It would be useful if you copy-pasted and quoted (with <code>&gt; my quote</code>) the content of the link instead of just linking to it. Even a screenshot might be ok, although in this case quoting is best and not difficult."}], "tags": [], "owner": {"reputation": 540, "user_id": 5023268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9404a30c2c30911d87a26a6166a0d79a?s=128&d=identicon&r=PG&f=1", "display_name": "AF_cpp", "link": "https://stackoverflow.com/users/5023268/af-cpp"}, "is_accepted": false, "score": 3, "last_activity_date": 1590667111, "last_edit_date": 1590667111, "creation_date": 1476892948, "answer_id": 40136463, "question_id": 40136180, "link": "https://stackoverflow.com/questions/40136180/what-does-t-signify-in-the-declaration-of-a-function-parameter-list/40136463#40136463", "title": "What does T::* signify in the declaration of a function parameter list?", "body": "<p>This is the syntax for member functions.</p>\n\n<p>Example:</p>\n\n<pre><code>class A{\n  int giveMe5();\n};\n\n&amp;A::giveMe5;  // will be of type int(A::*)()\n</code></pre>\n\n<p>Why does the type differ from free functions and static member functions ?\nBecause member functions have an implicit parameter that points to the object on which the function gets called.</p>\n\n<p><a href=\"https://isocpp.org/wiki/faq/pointers-to-members#fnptr-vs-memfnptr-types\" rel=\"nofollow noreferrer\">https://isocpp.org/wiki/faq/pointers-to-members#fnptr-vs-memfnptr-types</a>\nsays:</p>\n\n<blockquote>\n  <p>The type of this function is different depending on whether it is an ordinary function or a non-static member function of some class:<br><br>\n   -  Its type is <code>int (*)(char,float)</code> if an ordinary function<br><br>\n   -  Its type is <code>int (Fred::*)(char,float)</code> if a non-static member function  of class Fred</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 9, "last_activity_date": 1590186737, "last_edit_date": 1590186737, "creation_date": 1476898071, "answer_id": 40137907, "question_id": 40136180, "link": "https://stackoverflow.com/questions/40136180/what-does-t-signify-in-the-declaration-of-a-function-parameter-list/40137907#40137907", "title": "What does T::* signify in the declaration of a function parameter list?", "body": "<blockquote>\n  <p>what is the meaning of T::* inside the registration function declaration</p>\n</blockquote>\n\n<p>This is the syntax of a pointer to member. Let's take a look at the whole type and name of the parameter:</p>\n\n<pre><code>void(T::*callback)(const pcl::visualization::KeyboardEvent&amp;, void*)\n</code></pre>\n\n<p>This is the declaration of a variable named <code>callback</code>. It's a <em>pointer to member function</em>. More precisely, it's a pointer to member function of the class <code>T</code>.</p>\n\n<p>If we take the name out of the type, we see things more clearly:</p>\n\n<pre><code>// class name ---v     v------- parameters\n            void(T::*)(const pcl::visualization::KeyboardEvent&amp;, void*)\n//          ^---- return type\n</code></pre>\n\n<p>It's  in fact, a pointer to function member of the class <code>T</code> that returns <code>void</code>. It's a function that takes <em>strictly</em> two parameters: a <code>const pcl::visualization::KeyboardEvent&amp;</code> and a <code>void*</code>.</p>\n\n<blockquote>\n  <p>why am I not allowed to pass this</p>\n</blockquote>\n\n<p>It's simple. Look at the type of your function:</p>\n\n<pre><code>using func_type = decltype(keyboardEventCallback);\n// hint: the type is: void(*)(const pcl::visualization::KeyboardEvent&amp;, void*, void*)\n</code></pre>\n\n<p>Let's compare the two types side by side:</p>\n\n<pre><code>void(*)(const pcl::visualization::KeyboardEvent&amp;, void*, void*)\nvoid(T::*)(const pcl::visualization::KeyboardEvent&amp;, void*)\n</code></pre>\n\n<p>First, your function is not a member function, it's a plain function pointer. It's not the same type. Then, you got three arguments, as the type of the parameter only ask for two. This is different.</p>\n\n<hr>\n\n<p><strong>Now, how can you fix this??</strong></p>\n\n<p>You could use a lambda:</p>\n\n<pre><code>auto myCallback = [](const pcl::visualization::KeyboardEvent&amp; e, void* c) { /* ... */ }\n\nusing lambdaType = decltype(myCallback);\n\n// Be careful here, we don't want our lambda to go out of scope when it is called.\nm_vis-&gt;registerKeyboardCallback(&amp;lambdaType::operator(), myCallback, this);\n</code></pre>\n\n<hr>\n\n<p>Or  even simpler: just define <code>keyboardEventCallback</code> inside your class, and send it:</p>\n\n<pre><code>// don't forget: keyboardEventCallback must receive the same parameter as asked.\nm_vis-&gt;registerKeyboardCallback(&amp;MyClass::keyboardEventCallback, *this, this);\n</code></pre>\n"}], "owner": {"reputation": 319, "user_id": 3833261, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/666W9.jpg?s=128&g=1", "display_name": "wfehrnstrom", "link": "https://stackoverflow.com/users/3833261/wfehrnstrom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1563, "favorite_count": 1, "accepted_answer_id": 40137907, "answer_count": 2, "score": 6, "last_activity_date": 1590667111, "creation_date": 1476892109, "last_edit_date": 1476896719, "question_id": 40136180, "link": "https://stackoverflow.com/questions/40136180/what-does-t-signify-in-the-declaration-of-a-function-parameter-list", "title": "What does T::* signify in the declaration of a function parameter list?", "body": "<p>I declare a particular keyboard callback function as this inside my code:</p>\n\n<pre><code>void keyboardEventCallback(const pcl::visualization::KeyboardEvent &amp;event, void* viewer_void, void* widget_void);\n</code></pre>\n\n<p>The keyboard event is the actual event passed to the callback function, the viewer_void parameter is a pointer to a PCLVisualizer class that generates a window for rendering, and widget_void is a pointer to a widget that interfaces with Qt.  </p>\n\n<p>In the documentation for pcl, a registration function passes the arguments for registering the keyboard function like </p>\n\n<pre><code>boost::signals2::connection registerKeyboardCallback(void(T::*callback)(const pcl::visualization::KeyboardEvent&amp;, void*), T&amp; instance, void* cookie=nullptr)\n</code></pre>\n\n<p>So my question is, <strong>what is the meaning of <code>T::*</code> inside the registration function declaration</strong>, and <strong>why am I not allowed to pass this:</strong></p>\n\n<pre><code>m_vis-&gt;registerKeyboardCallback(keyboardEventCallback, (void*)&amp;m_vis, (void*)this);\n</code></pre>\n\n<p>where <code>m_vis</code> is a visualizer, <code>keyboardcallback</code> is the callback, and this is the widget.</p>\n\n<p>Why can I not register like this. This is for the point cloud library.</p>\n"}, {"tags": ["c++", "opencv", "cmake"], "answers": [{"tags": [], "owner": {"reputation": 10288, "user_id": 1542806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89b0522a428d374844f2efcb8b342a2?s=128&d=identicon&r=PG", "display_name": "Andrey  Smorodov", "link": "https://stackoverflow.com/users/1542806/andrey-smorodov"}, "is_accepted": false, "score": 0, "last_activity_date": 1476893359, "last_edit_date": 1476893359, "creation_date": 1476892979, "answer_id": 40136473, "question_id": 40136160, "link": "https://stackoverflow.com/questions/40136160/linking-libraries-opencv-cmake/40136473#40136473", "title": "Linking libraries opencv cmake", "body": "<p>CMakeLists.txt I use for OpenCV apps configuring.</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8)\nset (PROJ_NAME YourAppName)\nproject(${PROJ_NAME})\nset(CMAKE_BINARY_DIR ${CMAKE_SOURCE_DIR}/build)\nset(EXECUTABLE_OUTPUT_PATH ${CMAKE_BINARY_DIR})\nset(LIBRARY_OUTPUT_PATH ${CMAKE_BINARY_DIR})\n\nFIND_PACKAGE(OpenCV)\n\nset(folder_source   main.cpp\n                    )\n\nset(folder_header   main.h\n                    )\n\nSOURCE_GROUP(\"Source Files\" FILES ${folder_source})\nSOURCE_GROUP(\"Header Files\" FILES ${folder_header})\nADD_EXECUTABLE(${PROJ_NAME} ${folder_source} ${folder_header})\nTARGET_LINK_LIBRARIES(${PROJ_NAME} ${OpenCV_LIBS} )\n</code></pre>\n\n<p>it works fine, but check your opencv path does not contain spaces </p>\n\n<p>(it does not like paths like \"C:/Documents/Visual Studio 2015/Projects/opencv_build\").</p>\n"}], "owner": {"reputation": 29, "user_id": 7003069, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3fc6bd28aee86a85b9dd832601a6a997?s=128&d=identicon&r=PG&f=1", "display_name": "Linnot", "link": "https://stackoverflow.com/users/7003069/linnot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 878, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1476893359, "creation_date": 1476892076, "question_id": 40136160, "link": "https://stackoverflow.com/questions/40136160/linking-libraries-opencv-cmake", "title": "Linking libraries opencv cmake", "body": "<p>I am trying to link my library and opencv library. Cmake is working properly, solution is build but linker error occurs. It seems as cmake couldnt link opencv lib with my library. </p>\n\n<p><a href=\"https://i.stack.imgur.com/aAulM.jpg\" rel=\"nofollow\">This is an error which visual studio has.</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/Cyqj4.jpg\" rel=\"nofollow\">CMakeLists configuration for opencv lib</a></p>\n\n<p>This is piece of CMakeLists conf responsible for linking libs.</p>\n\n<pre><code># link libs\ntarget_link_libraries(${APP_NAME} ${OpenCV_LIBS})\n</code></pre>\n\n<p>I would be very grateful for you help.</p>\n"}, {"tags": ["c++", "templates", "generics", "boost", "graph"], "comments": [{"owner": {"reputation": 5576, "user_id": 1794345, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILvFk.jpg?s=128&g=1", "display_name": "Rerito", "link": "https://stackoverflow.com/users/1794345/rerito"}, "edited": false, "score": 1, "creation_date": 1476956130, "post_id": 40136075, "comment_id": 67570375, "body": "What do you really want to do? Genericity is already offered by boost graph&#39;s templates"}, {"owner": {"reputation": 67, "user_id": 6093925, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2564ca5330b8112b26d71ad2bcc86032?s=128&d=identicon&r=PG&f=1", "display_name": "Jacks", "link": "https://stackoverflow.com/users/6093925/jacks"}, "reply_to_user": {"reputation": 5576, "user_id": 1794345, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILvFk.jpg?s=128&g=1", "display_name": "Rerito", "link": "https://stackoverflow.com/users/1794345/rerito"}, "edited": false, "score": 0, "creation_date": 1476968372, "post_id": 40136075, "comment_id": 67578946, "body": "The user should be able to create a directed or undirected graph. Depending on the selection, the graph should be generated in a global variable.   Now im just able to define a global variable for directed Graph and one Variable for undirected Graph.   By the way is there a possibility to change the property of the graph from  directionalS to undirectionalS and vice versa after graph creation?"}, {"owner": {"reputation": 5576, "user_id": 1794345, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILvFk.jpg?s=128&g=1", "display_name": "Rerito", "link": "https://stackoverflow.com/users/1794345/rerito"}, "edited": false, "score": 0, "creation_date": 1476973147, "post_id": 40136075, "comment_id": 67582723, "body": "The said property is embedded in a template parameter so no, it&#39;s not possible to switch it at runtime (and it&#39;s expected and sane that way). You still seem to have no clear idea of what you want to <i>really</i> achieve. What is the actual problem at hand"}], "owner": {"reputation": 67, "user_id": 6093925, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2564ca5330b8112b26d71ad2bcc86032?s=128&d=identicon&r=PG&f=1", "display_name": "Jacks", "link": "https://stackoverflow.com/users/6093925/jacks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 256, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1476891874, "creation_date": 1476891874, "question_id": 40136075, "link": "https://stackoverflow.com/questions/40136075/boost-generic-graph-how-to-create-a-generic-graph", "title": "Boost: Generic Graph. How to create a generic graph", "body": "<p>Currently i try to work with the boostGraph library.</p>\n\n<p>What is the best solution to generate a generic class for direct and undirect Graphs. </p>\n\n<pre><code>typedef boost::adjacency_list&lt;boost::listS, boost::vecS, boost::directedS,  boost::no_property, EdgeWeightProperty&gt;DirectedGraph;\ntypedef boost::adjacency_list&lt;boost::listS, boost::vecS, boost::undirectedS, boost::no_property, EdgeWeightProperty&gt;UndirectedGraph;\n\n    template&lt;class T&gt;\nclass GraphNet {\n\n    // Retrieve the weight of an edge\n    typedef typename boost::property_map&lt;T,\n    boost::edge_weight_t&gt;::type EdgeWeightMap;\n    typedef typename boost::property_map&lt;T,\n    boost::vertex_index_t&gt;::type IndexMap;\n    ...\n\npublic:\n\nstd::pair&lt;edge_iterator, edge_iterator&gt;edgePair;\nstd::pair&lt;vertex_iter, vertex_iter&gt;vertexPair;\n...\n};\n</code></pre>\n\n<p>How can i define an object with unknown type in my Main? Now i have just the possibility to generate a DirectedGraph or UndirectedGraph. Also i want a list or vector with different graphTypes.  </p>\n\n<pre><code>  GraphNet&lt;DirectedGraph&gt;  graphNet;\n std::vector&lt;GraphNet&lt;DirectedGraph&gt;&gt; vecGraphs;\n</code></pre>\n\n<p>What is the right statement to generate a object or vector with unknown type? Any suggestions to solve this?\nThank you </p>\n"}, {"tags": ["c++", "oop"], "comments": [{"owner": {"reputation": 1, "user_id": 7043230, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lYtlG5iPgSQ/AAAAAAAAAAI/AAAAAAAAABU/B-wiS8MnW9M/photo.jpg?sz=128", "display_name": "Syed Mohiuddin Zia", "link": "https://stackoverflow.com/users/7043230/syed-mohiuddin-zia"}, "edited": false, "score": 0, "creation_date": 1476891887, "post_id": 40136067, "comment_id": 67541807, "body": "#include&lt;iostream&gt; using namespace std;  int mark() { int mark[3]; int sum; float *average, *percentage; cout &lt;&lt; &quot;Enter the marks of urdu, english and islamiat out of 100&quot; &lt;&lt; endl; cin &gt;&gt; mark[1] &gt;&gt; mark [2] &gt;&gt; mark [3]; sum = mark[1] + mark[2] + mark[3]; *average = sum/3; *percentage =(sum/300)*100; }   int main() { int x, y; mark(); return 0; }"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1476891975, "post_id": 40136067, "comment_id": 67541871, "body": "Please edit the question rather than posting code as a comment."}, {"owner": {"reputation": 257, "user_id": 6650642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8392a571d50ac81c04961beb3b2598e5?s=128&d=identicon&r=PG&f=1", "display_name": "Christoph S.", "link": "https://stackoverflow.com/users/6650642/christoph-s"}, "edited": false, "score": 0, "creation_date": 1476897089, "post_id": 40136067, "comment_id": 67544876, "body": "Sidenote: Your mark function doesn&#39;t return anything so the type should be void."}], "answers": [{"tags": [], "owner": {"reputation": 64049, "user_id": 812912, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/732c48dee9ac15216258118fb8c0a764?s=128&d=identicon&r=PG", "display_name": "Ivaylo Strandjev", "link": "https://stackoverflow.com/users/812912/ivaylo-strandjev"}, "is_accepted": false, "score": 0, "last_activity_date": 1476892626, "creation_date": 1476892626, "answer_id": 40136362, "question_id": 40136067, "link": "https://stackoverflow.com/questions/40136067/how-to-find-average-and-percentage-of-total-marks-using-function-c/40136362#40136362", "title": "How to find average and percentage of total marks using function. C++", "body": "<p>Pass in the pointers to average and percentage as arguments to your function. That way you will have access to them from main. </p>\n\n<p>By the way typically you would read the input in main(or a second function) and pass the values as arguments to your function. It is better design to make your code more testable and reusable.</p>\n"}, {"tags": [], "owner": {"reputation": 84, "user_id": 6949963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fgmXn.png?s=128&g=1", "display_name": "James N", "link": "https://stackoverflow.com/users/6949963/james-n"}, "is_accepted": false, "score": 0, "last_activity_date": 1476902511, "creation_date": 1476902511, "answer_id": 40139219, "question_id": 40136067, "link": "https://stackoverflow.com/questions/40136067/how-to-find-average-and-percentage-of-total-marks-using-function-c/40139219#40139219", "title": "How to find average and percentage of total marks using function. C++", "body": "<p>This program works!</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nvoid mark(float *average)\n{\nint markg[3], sum;\nstring mg[] = { \"first\", \"second\", \"third\" };\ncout &lt;&lt; \"Enter the marks of urdu, english and islamiat out of 100\" &lt;&lt; endl;\n    for (int i = 0; i &lt; 3; ++i) {\n       cout &lt;&lt; \"Enter \" &lt;&lt; mg[i] &lt;&lt; \" mark:\";\n       cin &gt;&gt; markg[i];\n    }\nsum = markg[0] + markg[1] + markg[2];\n*average = sum / 3;\n}\n\nint main()\n{\nfloat average;\nmark(&amp;average);\ncout &lt;&lt; \"Average = \" &lt;&lt; average &lt;&lt; endl;\nreturn 0;\n}\n</code></pre>\n\n<p>I have used a pointer. \nI have used markg[] to distinguish it form the function mark().\nI have the user enter each mark one at a time. If you use cin >> markg[1] ...\nIt might cause errors.\nYou could use getline to input a string then parse what you need from it.\nI chosed the simplier method.\nAs you defined average and percent they are the same. You may want to ask you professor for clarification on this point.\nI hope that you find this advise helpful.</p>\n"}], "owner": {"reputation": 1, "user_id": 7043230, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lYtlG5iPgSQ/AAAAAAAAAAI/AAAAAAAAABU/B-wiS8MnW9M/photo.jpg?sz=128", "display_name": "Syed Mohiuddin Zia", "link": "https://stackoverflow.com/users/7043230/syed-mohiuddin-zia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1997, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1476902511, "creation_date": 1476891856, "last_edit_date": 1476892395, "question_id": 40136067, "link": "https://stackoverflow.com/questions/40136067/how-to-find-average-and-percentage-of-total-marks-using-function-c", "title": "How to find average and percentage of total marks using function. C++", "body": "<p>Write a function that receives marks received by a student in 3 subjects and returns the\naverage and percentage of these marks. Call this function from main( ) and print the\nresults in main( ).</p>\n\n<pre><code>#include&lt;iostream&gt;\n\nusing namespace std;\n\nint mark()\n{\n    int mark[3];\n    int sum;\n    float *average, *percentage;\n    cout &lt;&lt; \"Enter the marks of urdu, english and islamiat out of 100\" &lt;&lt; endl;\n    cin &gt;&gt; mark[1] &gt;&gt; mark [2] &gt;&gt; mark [3];\n    sum = mark[1] + mark[2] + mark[3];\n    *average = sum/3;\n    *percentage =(sum/300)*100;\n}\n\n\nint main()\n{\n    int x, y;\n    mark();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "memory-management", "dll", "com"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1476891937, "post_id": 40135990, "comment_id": 67541843, "body": "As far as &quot;best practice&quot; goes, perhaps you&#39;d want to stay away from manual memory management. That is, manual <code>new</code> and <code>delete</code> calls - in modern C++ you don&#39;t need (want) them. This looks like (bad) C++98 to me."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1476892090, "post_id": 40135990, "comment_id": 67541939, "body": "Factory functions should generally return <code>std::unique_ptr</code>&#39;s."}, {"owner": {"reputation": 196, "user_id": 5834210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8839801b013fb524c7389cc080a2979?s=128&d=identicon&r=PG", "display_name": "sbail95", "link": "https://stackoverflow.com/users/5834210/sbail95"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1476893544, "post_id": 40135990, "comment_id": 67542918, "body": "@JesperJuhl Please correct me if I&#39;m wrong but wouldn&#39;t that be on the client side that they would use the smart pointer to control the returned pointer from GetXyz() ? something like std::unique_ptr&lt;IXyz&gt; ptr(GetXyz())"}, {"owner": {"reputation": 6288, "user_id": 1455631, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9b8e88a8dbed8a574ed79d075c3f924?s=128&d=identicon&r=PG", "display_name": "Medinoc", "link": "https://stackoverflow.com/users/1455631/medinoc"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1476896185, "post_id": 40135990, "comment_id": 67544404, "body": "@JesperJuhl @TocsBailey DLL Best Practices tend to discourage the use of STL types in a DLL&#39;s interface: There&#39;s no guarantee that <code>std::unique_ptr</code> will have the same layout across DLL boundaries. However, your implementation should definitely use <code>unique_ptr</code> for its member variables."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1476899092, "post_id": 40135990, "comment_id": 67546050, "body": "@JesperJuhl You wouldn&#39;t want <code>std::unique_ptr</code> on the client side either, at least not one with a default deleter. The client and the DLL may use different memory managers; the client won&#39;t necessarily be able to deallocate the memory that the DLL allocated. I assume this is the reason <code>IXYZ</code> exposes <code>destroy()</code> method (the implementation of which would do <code>delete this;</code> or similar)."}], "owner": {"reputation": 196, "user_id": 5834210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8839801b013fb524c7389cc080a2979?s=128&d=identicon&r=PG", "display_name": "sbail95", "link": "https://stackoverflow.com/users/5834210/sbail95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1476891605, "creation_date": 1476891605, "question_id": 40135990, "link": "https://stackoverflow.com/questions/40135990/can-a-dll-interface-implementation-use-an-allocating-constructor", "title": "Can a DLL Interface Implementation Use An Allocating Constructor?", "body": "<p><strong>I am implementing a DLL with a COM like interface and I'm using the guide set forth by:</strong></p>\n\n<p><a href=\"http://www.codeproject.com/Articles/28969/HowTo-Export-C-classes-from-a-DLL?msg=5315303#xx5315303xx\" rel=\"nofollow\">http://www.codeproject.com/Articles/28969/HowTo-Export-C-classes-from-a-DLL?msg=5315303#xx5315303xx</a></p>\n\n<p>&amp;&amp;</p>\n\n<p><a href=\"http://eli.thegreenplace.net/2011/09/16/exporting-c-classes-from-a-dll\" rel=\"nofollow\">http://eli.thegreenplace.net/2011/09/16/exporting-c-classes-from-a-dll</a></p>\n\n<p><strong>By exporting a factory function GetXyz which returns a reference to an abstract\ninterface struct something like this:</strong></p>\n\n<pre><code>struct IXYZ\n{\n   virtual void foo(void) = 0;\n   virtual void destroy()=0;\n}\n</code></pre>\n\n<p><strong>Which is implemented by a full class XyzImple,</strong> </p>\n\n<pre><code>#define XYZAPI __declspec(dllexport)\n\nXYZAPI IXYZ* GetXyz()\n{\n    return new XyzImple(1,2,3);\n}\n//\n// implementation of foo, jkl, zyx etc... \n//\n//Constructor\nXyzImple::XyzImple(int a, int b, int c)\n{\n  m_Zyx = new Zyx(a); // some ultra simple classes..\n  m_Jkl = new Jkl(b); \n  m_Inty = c;\n}\n\n// 'Destroyer'\nXyzImple::destroy() // Called by client side code.\n{\n    delete m_Zyx;\n    delete m_Jkl;\n    delete this; // I have seen this in tutorials..\n}\n</code></pre>\n\n<p><strong>Is there any problems with the DLL factory function calling a constructor which also allocates dynamically, full disclosure this is my first DLL, I want to be very careful about memory leak etc.\nPlease refer to 'best practices' to answer this question! \nThanks so much!</strong></p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 4, "creation_date": 1476891395, "post_id": 40135828, "comment_id": 67541492, "body": "<code>I am using Visual C++ 6.0</code> Don&#39;t, it&#39;s 18 years old and very outdated. And your question has no universal yes/no answer."}, {"owner": {"reputation": 21, "user_id": 6307394, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1910aca78dc4e7067865bd093375f361?s=128&d=identicon&r=PG&f=1", "display_name": "citroen", "link": "https://stackoverflow.com/users/6307394/citroen"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1476891736, "post_id": 40135828, "comment_id": 67541701, "body": "I have no choice with Visual C++. My computer is quite old, that is the reason."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1476891777, "post_id": 40135828, "comment_id": 67541732, "body": "Btw., there are things like usb locks etc. . If there is a problem with people taking low cost equipment, that&#39;s better than half-working software."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1476892149, "post_id": 40135828, "comment_id": 67541978, "body": "@citroen it would be better to use any other compiler, including gcc on cygwin, as the VS6.0 wasn&#39;t compliant to standards at the time - and you&#39;ll end up walking into issues that have been long since resolved."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6307394, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1910aca78dc4e7067865bd093375f361?s=128&d=identicon&r=PG&f=1", "display_name": "citroen", "link": "https://stackoverflow.com/users/6307394/citroen"}, "edited": false, "score": 0, "creation_date": 1476901534, "post_id": 40136851, "comment_id": 67547542, "body": "Thanks for the answer. But do you think that WMI can be used with Visual C++ 6.0? I mean, in the link for Win32_Keyboard it is writted below : Minimum Supported client - Windows Vista , and i am using Windows XP?"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 21, "user_id": 6307394, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1910aca78dc4e7067865bd093375f361?s=128&d=identicon&r=PG&f=1", "display_name": "citroen", "link": "https://stackoverflow.com/users/6307394/citroen"}, "edited": false, "score": 0, "creation_date": 1476901680, "post_id": 40136851, "comment_id": 67547651, "body": "Yes, WMI works fine with VC++6 on Windows XP (I&#39;ve personally used that exact combination)."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 3, "last_activity_date": 1476903030, "last_edit_date": 1476903030, "creation_date": 1476894244, "answer_id": 40136851, "question_id": 40135828, "link": "https://stackoverflow.com/questions/40135828/brand-of-mouse-or-keyboard-with-visual-c/40136851#40136851", "title": "Brand of mouse or keyboard with Visual C++", "body": "<p>There's a fairly good chance that you can, yes.</p>\n\n<p>You can get information about the mouse and keyboard by enumerating devices of the <a href=\"https://msdn.microsoft.com/en-us/library/aa394166.aspx\" rel=\"nofollow\"><code>Win32_Keyboard</code></a> and <a href=\"https://msdn.microsoft.com/en-us/library/aa394356.aspx\" rel=\"nofollow\"><code>Win32_PointingDevice</code></a> classes using WMI.</p>\n\n<p>I'd ignore (for example) the Mouse's \"Manufacturer\" field, which reflects the driver rather than the hardware (e.g., on the machine I'm using at the moment, it says \"Microsoft\", but the mouse is actually a Logitech).</p>\n\n<p>You probably stand a better chance of getting accurate information by looking at the PnP device ID. This may not be 100% foolproof (see below), but on this machine the Vendor ID part of the PnP device ID contains \"046D\", which accurately maps to Logitech.</p>\n\n<p>As to this not being foolproof, I can see a couple of possibilities. One would be a buy-out, where one company bought another, and sold existing stock of hardware under the new label without changing its Vendor ID. In this case, you might be able to replace one mouse from brand X with another (currently) sold by brand X, but the PnP device IDs would still show them as coming from different vendors.</p>\n\n<p>In the other direction, I can imagine the possibility of a mouse vendor shipping mice with the vendor ID set to that of whoever made the USB interface chip, instead of getting a vendor ID of their own. In this case, you could have two mice with different brand labels on the outside, but the same vendor ID on the inside. A vendor could also build two mice with the same brand, but different interface chips, so you could get a false positive, showing different brands even though the packaging showed them as the same brand.</p>\n\n<p>Oh, one other possibility: at least some vendors have more than one Vendor ID. Hewlett Packard (for one example) has at least two under its own name (and, one under the Compaq name, lending at least some credence to the first scenario above).</p>\n\n<p>I honestly don't know how likely any of those is to arise in practice though. At a guess, they're probably particularly likely at the extremes--really low-end or really high-end hardware. Mainstream hardware is likely to be a lot more stable.</p>\n\n<p>In any case, I think this is probably about the best you can do via software.</p>\n"}], "owner": {"reputation": 21, "user_id": 6307394, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1910aca78dc4e7067865bd093375f361?s=128&d=identicon&r=PG&f=1", "display_name": "citroen", "link": "https://stackoverflow.com/users/6307394/citroen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1476903030, "creation_date": 1476891153, "last_edit_date": 1476896065, "question_id": 40135828, "link": "https://stackoverflow.com/questions/40135828/brand-of-mouse-or-keyboard-with-visual-c", "title": "Brand of mouse or keyboard with Visual C++", "body": "<p>Is there any way to detect the brand of the mouse connected to the computer, or the brand of the keyboard connected to the pc? I have heard that mouse or keyboard does not have serial numbers but I may have heard incorrectly.   </p>\n\n<p>My main goal is to find out when the mouse and/or the keyboard\nof the computer is changed with another. I am using visual c++. Is there any way to detect in visual c++ program\nthat the commonly used mouse or keyboard at a computer is substituted with another?  </p>\n\n<p>I am using Visual C++ 6.0.</p>\n"}, {"tags": ["c++", "object", "setter", "getter"], "comments": [{"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 3, "creation_date": 1476891142, "post_id": 40135795, "comment_id": 67541326, "body": "You should really <b>study</b>,"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1476891249, "post_id": 40135795, "comment_id": 67541400, "body": "Sounds like you could use a <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>"}], "answers": [{"tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": true, "score": 1, "last_activity_date": 1476891258, "creation_date": 1476891258, "answer_id": 40135865, "question_id": 40135795, "link": "https://stackoverflow.com/questions/40135795/how-do-i-use-get-and-set-methods-in-c-with-an-object-that-is-initialised-with/40135865#40135865", "title": "How do I use get and set methods in c++ with an object that is initialised with new", "body": "<p>Assuming that your <code>Person</code> has member functions like <code>getFirst()</code> you would use the dereference operator (<code>-&gt;</code> or <code>*</code>) like this:</p>\n\n<pre><code>Person1-&gt;getFirst(); // equivalent to (*Person1).getFirst()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 483, "user_id": 1138688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a351fb5d7eb25907f5136ffa23f18fb?s=128&d=identicon&r=PG", "display_name": "retinotop", "link": "https://stackoverflow.com/users/1138688/retinotop"}, "is_accepted": false, "score": 0, "last_activity_date": 1476891824, "creation_date": 1476891824, "answer_id": 40136056, "question_id": 40135795, "link": "https://stackoverflow.com/questions/40135795/how-do-i-use-get-and-set-methods-in-c-with-an-object-that-is-initialised-with/40136056#40136056", "title": "How do I use get and set methods in c++ with an object that is initialised with new", "body": "<p>You need to define the setters and getters in your class, as well as you should define your members there</p>\n\n<p>something like:</p>\n\n<p>class person{</p>\n\n<p>public:</p>\n\n<pre><code>person(){}\n\n~person(){}\n\nhere put your getter and setter like...\nvoid setFirst(...) { .... }\nstring getFirst() { return ... }\n...\n</code></pre>\n\n<p>private:</p>\n\n<pre><code>string first;\nstring family;\nstring ID;\nint birth;\n</code></pre>\n\n<p>}</p>\n"}], "owner": {"reputation": 3, "user_id": 6635185, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205641965523237/picture?type=large", "display_name": "Chloe Mullan", "link": "https://stackoverflow.com/users/6635185/chloe-mullan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1477114626, "accepted_answer_id": 40135865, "answer_count": 2, "score": -5, "last_activity_date": 1476891824, "creation_date": 1476891042, "question_id": 40135795, "link": "https://stackoverflow.com/questions/40135795/how-do-i-use-get-and-set-methods-in-c-with-an-object-that-is-initialised-with", "closed_reason": "Needs details or clarity", "title": "How do I use get and set methods in c++ with an object that is initialised with new", "body": "<p>Im trying to use get and set methods within c++ with an object that is initialised with new</p>\n\n<pre><code>Person *Person1 = new Person;\n        string first;\n        string family; \n        string ID;\n        int birth;\n</code></pre>\n\n<p>anyone any idea how I do this?</p>\n"}, {"tags": ["c++", "struct", "compiler-optimization"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1476891875, "post_id": 40135661, "comment_id": 67541798, "body": "The code you posted does not match the code in the links.  The code in the links uses references (which are not needed and complicate the program)."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1476891903, "post_id": 40135661, "comment_id": 67541820, "body": "Please edit your post with the content of the assembly language listing, not links to a web site."}, {"owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1476892239, "post_id": 40135661, "comment_id": 67542039, "body": "@Thomas Matthews: Sure. I can copy the assembly, it is just quite long. There are two versions. Version 1 doesn&#39;t use references, version 2 uses reference. Reference is not needed, but I was testing if the compiler can optimize that by comparing version1 and version 2."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1476892340, "post_id": 40135661, "comment_id": 67542104, "body": "You only need to post the assembly language for one of the indexed <code>for</code> loops.  There should be no difference between the <code>i</code> loop and the <code>j</code> loop."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1476892533, "post_id": 40135661, "comment_id": 67542245, "body": "Compiler optimization strategies are not standard with the C++ language.  Different compilers can perform different levels of optimization.  Also, the optimization <i>levels</i> or <i>settings</i> play a big role too.  To answer your question completely, you would have to compile the sample with all compilers using the highest optimization setting in release mode and compare the assembly language listings."}, {"owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1476892861, "post_id": 40135661, "comment_id": 67542473, "body": "@Thomas Matthews: While packing variables together in memory makes accessing them more efficient, some of the variables are not even needed in some cases. The code was compiled with g++ -O3."}, {"owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1476896271, "post_id": 40135661, "comment_id": 67544452, "body": "g++ can use register to replace a variable. Is that possible for simd type (e.g. <code>__m128i</code>) member of a struct?"}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 3, "creation_date": 1476899174, "post_id": 40135661, "comment_id": 67546102, "body": "It&#39;s called, &quot;Scalar Replacement of Aggregates&quot;. It&#39;s a standard optimization that all modern compilers should be able to do."}], "owner": {"reputation": 2251, "user_id": 6872237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7e22a086877a28b729523119d40f5e9c?s=128&d=identicon&r=PG&f=1", "display_name": "hamster on wheels", "link": "https://stackoverflow.com/users/6872237/hamster-on-wheels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 459, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1476901249, "creation_date": 1476890687, "last_edit_date": 1495542805, "question_id": 40135661, "link": "https://stackoverflow.com/questions/40135661/does-the-compiler-break-struct-into-variables-register-in-optimization", "title": "Does the compiler break struct into variables/register in optimization?", "body": "<p>When the compiler (gcc, or intel c++) optimizes a for loop with an index that is a member of a struct, can the compiler break the struct into individual variables/register?</p>\n\n<p>For example, when one member of the struct <code>a</code> is actually always equal to another variable <code>b</code>, it would be safe to replace all <code>a</code> to <code>b</code> in the actual program.</p>\n\n<p>When the struct has <code>a</code> and other things as member, can compilers still perform this optimization?</p>\n\n<p>How about other optimization such as removing unnecessary indirection (referencing and dereferencing)?</p>\n\n<p>I tried to test, but the test is not complete.</p>\n\n<p>Code: (compiled with g++ -O3 -std=c++14)</p>\n\n<pre><code>int main()\n{\n    int i, j // version 1\n\n    // version 2\n    /*\n    struct Index{\n    int ii;\n    int jj;\n    }C;\n    int &amp;i = C.ii;\n    int &amp;j = C.jj;\n    */\n\n    int a = 0;\n    constexpr int N = 65536;\n    int x[N];\n\n    for (int k = 0; k &lt; N; ++k) x[k] = 1;\n\n    for (i = 0; i &lt; N; ++i) {\n        a += x[i];\n    }\n\n    for (j = 0; j &lt; N; ++j) {\n        a += x[j];\n    }\n    std::cout &lt;&lt; a &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>gcc godbolt:</p>\n\n<ul>\n<li><a href=\"https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,options:(colouriseAsm:&#39;0&#39;,compileOnChange:&#39;0&#39;),source:&#39;%23include+%3Ciostream%3E%0A%0Aint+main()%0A%7B%0A%09int+i%3B%0A++%09int+j%3B%0A++++int+a+%3D+0%3B%0A++++constexpr+int+N+%3D+65536%3B%0A++++int+x%5BN%5D%3B%0A%0A++++for+(int+k+%3D+0%3B+k+%3C+N%3B+%2B%2Bk)+x%5Bk%5D+%3D+1%3B%0A%0A++++for+(i+%3D+0%3B+i+%3C+N%3B+%2B%2Bi)+%7B%0A++++++++a+%2B%3D+x%5Bi%5D%3B%0A++++%7D%0A%0A++++for+(j+%3D+0%3B+j+%3C+N%3B+%2B%2Bj)+%7B%0A++++++++a+%2B%3D+x%5Bj%5D%3B%0A++++%7D%0A++++std::cout+%3C%3C+a+%3C%3C+%22%5Cn%22%3B%0A%7D&#39;),l:&#39;5&#39;,n:&#39;1&#39;,o:&#39;C%2B%2B+source+%231&#39;,t:&#39;0&#39;)),k:57.5,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:compiler,i:(compiler:g62,filters:(b:&#39;0&#39;,commentOnly:&#39;0&#39;,directives:&#39;0&#39;,intel:&#39;0&#39;),options:&#39;-O3&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;%231+with+x86-64+gcc+6.2&#39;,t:&#39;0&#39;)),k:42.5,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),l:&#39;2&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),version:4\" rel=\"nofollow noreferrer\">version 1</a></li>\n<li><a href=\"https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,options:(colouriseAsm:&#39;0&#39;,compileOnChange:&#39;0&#39;),source:&#39;%23include+%3Ciostream%3E%0A%0Aint+main()%0A%7B%0A++++struct+Index%7B%0A++++int+ii%3B%0A++++int+jj%3B%0A++++%7DC%3B%0A%09int+%26i+%3D+C.ii%3B%0A++%09int+%26j+%3D+C.jj%3B%0A++++int+a+%3D+0%3B%0A++++constexpr+int+N+%3D+65536%3B%0A++++int+x%5BN%5D%3B%0A%0A++++for+(int+k+%3D+0%3B+k+%3C+N%3B+%2B%2Bk)+x%5Bk%5D+%3D+1%3B%0A%0A++++for+(i+%3D+0%3B+i+%3C+N%3B+%2B%2Bi)+%7B%0A++++++++a+%2B%3D+x%5Bi%5D%3B%0A++++%7D%0A%0A++++for+(j+%3D+0%3B+j+%3C+N%3B+%2B%2Bj)+%7B%0A++++++++a+%2B%3D+x%5Bj%5D%3B%0A++++%7D%0A++++std::cout+%3C%3C+a+%3C%3C+%22%5Cn%22%3B%0A%7D&#39;),l:&#39;5&#39;,n:&#39;1&#39;,o:&#39;C%2B%2B+source+%231&#39;,t:&#39;0&#39;)),k:50,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:compiler,i:(compiler:g62,filters:(b:&#39;0&#39;,commentOnly:&#39;0&#39;,directives:&#39;0&#39;,intel:&#39;0&#39;),options:&#39;-O3&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;%231+with+x86-64+gcc+6.2&#39;,t:&#39;0&#39;)),k:50,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),l:&#39;2&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),version:4\" rel=\"nofollow noreferrer\">version 2</a></li>\n</ul>\n\n<p>Version 1 and 2 have identical assembly.</p>\n\n<p>Update:</p>\n\n<p>Things I found online:</p>\n\n<p>From GCC's structure reorganization optimization development plan (<a href=\"https://gcc.gnu.org/wiki/Structure_Reorganization_Optimization_Development_Plan\" rel=\"nofollow noreferrer\">gcc.gnu.org</a>):</p>\n\n<ul>\n<li>GCC can split a struct with four fields into four structs when two fields are extensively accessed by function <code>f()</code> while the other two fields are extensively accessed by function <code>g()</code>. (Table 2. test1.c)</li>\n</ul>\n\n<p><a href=\"https://stackoverflow.com/questions/118068/why-doesnt-gcc-optimize-structs\">Why doesn&#39;t GCC optimize structs?</a></p>\n\n<ul>\n<li>GCC doesn't reorder attributes of a struct because C standard doesn't allow that.</li>\n</ul>\n\n<p>The new intraprocedural scalar replacement of aggregates (<a href=\"https://gcc.gnu.org/wiki/summit2010?action=AttachFile&amp;do=get&amp;target=jambor.pdf\" rel=\"nofollow noreferrer\">gcc.gnu.org</a>, suggested by <a href=\"https://stackoverflow.com/users/922184/mysticial\">Mysticial</a>) </p>\n\n<ul>\n<li>So gcc can replace a member of a struct by register.</li>\n</ul>\n"}, {"tags": ["c++", "c++11", "templates", "variadic-templates", "template-specialization"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1476890741, "post_id": 40135561, "comment_id": 67541046, "body": "What do you mean by <i>more &quot;closely&quot;</i>?  If the function is overloaded you have to specify exactly which version you want when using it."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1476890867, "post_id": 40135561, "comment_id": 67541147, "body": "Is this the <a href=\"http://en.cppreference.com/w/cpp/language/overloaded_address\" rel=\"nofollow noreferrer\">reference</a> you&#39;re looking for?"}], "answers": [{"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 3, "last_activity_date": 1476891393, "last_edit_date": 1476891393, "creation_date": 1476890932, "answer_id": 40135757, "question_id": 40135561, "link": "https://stackoverflow.com/questions/40135561/decltype-for-overloaded-member-function/40135757#40135757", "title": "decltype for overloaded member function", "body": "<p>Not sure about the exact syntax but, in case of method name overloading, you should cast the pointer; something like</p>\n\n<pre><code>static_cast&lt;void(Foo::*)(int, int, int)&gt;(&amp;Foo::print);\n</code></pre>\n\n<p>In you're interested only in type, should be the template value of the cast</p>\n\n<pre><code>void(Foo::*)(int, int, int)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6029, "user_id": 3577745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4646095ed212f8392ed0cd522b84e7e3?s=128&d=identicon&r=PG&f=1", "display_name": "javaLover", "link": "https://stackoverflow.com/users/3577745/javalover"}, "edited": false, "score": 0, "creation_date": 1487254180, "post_id": 40135913, "comment_id": 71708653, "body": "This is the best post I found after searching for several hours. Thank. May you also provide the <code>std::result_of</code> example, please?"}, {"owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "reply_to_user": {"reputation": 6029, "user_id": 3577745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4646095ed212f8392ed0cd522b84e7e3?s=128&d=identicon&r=PG&f=1", "display_name": "javaLover", "link": "https://stackoverflow.com/users/3577745/javalover"}, "edited": false, "score": 1, "creation_date": 1487276151, "post_id": 40135913, "comment_id": 71724122, "body": "@javaLover: thanks. I made an edit."}, {"owner": {"reputation": 6029, "user_id": 3577745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4646095ed212f8392ed0cd522b84e7e3?s=128&d=identicon&r=PG&f=1", "display_name": "javaLover", "link": "https://stackoverflow.com/users/3577745/javalover"}, "edited": false, "score": 0, "creation_date": 1487313951, "post_id": 40135913, "comment_id": 71737917, "body": "Thank a lot.  In the new <code>std::result_of</code> version, the compiler can&#39;t resolve the overloaded function, though.   Here are <a href=\"http://coliru.stacked-crooked.com/a/c75739a460787e0e\" rel=\"nofollow noreferrer\">demo</a> and <a href=\"http://ideone.com/3vPkzd\" rel=\"nofollow noreferrer\">backup</a>.   It is confused at  <code>(&amp;Foo::print)</code>.   If I replace the <code>version2</code> line with the old <code>version1</code> line, it will work."}, {"owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "reply_to_user": {"reputation": 6029, "user_id": 3577745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4646095ed212f8392ed0cd522b84e7e3?s=128&d=identicon&r=PG&f=1", "display_name": "javaLover", "link": "https://stackoverflow.com/users/3577745/javalover"}, "edited": false, "score": 1, "creation_date": 1487344368, "post_id": 40135913, "comment_id": 71757210, "body": "@javaLover: mhh, you&#39;re right, can&#39;t bring it to work either ... seems like a limitation of the second approach (it probably could be done along the lines of <a href=\"http://stackoverflow.com/a/17875252/2412846\">this answer</a>, but it&#39;s tedious). This is why I said I like the <code>decltype &#47; declval</code> stuff more -- it&#39;s rather clear there what is going on. Just read <code>decltype</code> as &quot;give me the type&quot; and <code>declval</code> as &quot;give me the object (--but without issues caused by a missing default constructor, etc.)&quot;."}, {"owner": {"reputation": 1856, "user_id": 566849, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/95ee09e4d1e40061f7dc01b551dba37b?s=128&d=identicon&r=PG", "display_name": "Fabio A.", "link": "https://stackoverflow.com/users/566849/fabio-a"}, "edited": false, "score": 0, "creation_date": 1519431266, "post_id": 40135913, "comment_id": 84922905, "body": "This will however fail if the arguments get implicitly converted to the method&#39;s proper types: the resulting method pointer will have a different signature than then real one."}], "tags": [], "owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "is_accepted": true, "score": 6, "last_activity_date": 1487405048, "last_edit_date": 1487405048, "creation_date": 1476891384, "answer_id": 40135913, "question_id": 40135561, "link": "https://stackoverflow.com/questions/40135561/decltype-for-overloaded-member-function/40135913#40135913", "title": "decltype for overloaded member function", "body": "<p>More \"closely\", as far as I understand, means you want to specify the function arguments of <code>print</code>. That is, for example, you select <code>int, int</code>, then get back the result-type of <code>Foo{}.print(int{},int{})</code>, and thereafter construct a function pointer from all the available information.</p>\n\n<p>Here is an alias template which does that for you in a general way:</p>\n\n<pre><code>template&lt;typename ... Args&gt;\nusing ptr_to_print_type = decltype(std::declval&lt;Foo&gt;().print(std::declval&lt;Args&gt;() ...)) (Foo::*)(Args ...);\n</code></pre>\n\n<p>You could also use <code>std::result_of</code> instead of the <code>std::declval</code> stuff, but I like the latter more.</p>\n\n<p>You can use the above as</p>\n\n<pre><code>func&lt;ptr_to_print_type&lt;int,int&gt; &gt;();\n</code></pre>\n\n<hr>\n\n<p>EDIT: as asked for by @JavaLover, which btw seems like an unsuitable name for such horrible C++ shit :-), here is the same as above using <code>std::result_of</code> (<s>untested</s> now tested and wrong):</p>\n\n<pre><code>//------ does not compile for overloaded functions --------\ntemplate&lt;typename ... Args&gt;\nusing ptr_to_print_type = std::result_of_t&lt;decltype(&amp;Foo::print)(Foo, Args ...)&gt; (Foo::*)(Args ...)\n//------ does not compile for overloaded functions --------\n</code></pre>\n\n<p>You could further abstract away the <code>Foo</code> but not the <code>print</code> (unless you're using macros).</p>\n"}], "owner": {"reputation": 8388, "user_id": 1130231, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gHygY.png?s=128&g=1", "display_name": "Martin Perry", "link": "https://stackoverflow.com/users/1130231/martin-perry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1777, "favorite_count": 1, "closed_date": 1476891958, "accepted_answer_id": 40135913, "answer_count": 2, "score": 10, "last_activity_date": 1541182187, "creation_date": 1476890428, "last_edit_date": 1541182187, "question_id": 40135561, "link": "https://stackoverflow.com/questions/40135561/decltype-for-overloaded-member-function", "closed_reason": "Duplicate", "title": "decltype for overloaded member function", "body": "<p>I have this code:</p>\n\n<pre><code>struct Foo \n{\n    int print(int a, double b);\n    int print(int a);\n    void print();\n    void print(int a, int b, int c);\n\n    void other();\n};\n</code></pre>\n\n<p>I can call</p>\n\n<pre><code>decltype(&amp;Foo::other)\n</code></pre>\n\n<p>but calling</p>\n\n<pre><code>decltype(&amp;Foo::print)\n</code></pre>\n\n<p>end with error, which is clear to me.</p>\n\n<p>But how can I specify more \"closely\" which of the four <code>print</code> methods, I want to resolve to <code>decltype</code>? </p>\n\n<p>I want to further use this in</p>\n\n<pre><code>template &lt;class MT&gt;\nstruct method_info;\n\ntemplate &lt;class T, class Res, class... Args&gt;\nstruct method_info&lt;Res(T::*)(Args...)&gt;\n{\n    typedef std::tuple&lt;Args&amp;&amp;...&gt; args_tuple;\n    typedef T ClassType;\n    typedef Res RetVal; \n};\n\n\n\ntemplate &lt;class MethodType&gt;\nvoid func() {\n   typedef method_info&lt;MethodType&gt; MethodInfo;\n   .....\n}\n\nfunc&lt;decltype(&amp;Foo::other)&gt;();\n....\n</code></pre>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1476890405, "post_id": 40135538, "comment_id": 67540832, "body": "Maybe put the definition of <code>Node</code> before the <code>TreeHeader</code> class? Or at least have a forward declaration of <code>Node</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2580104"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1476890528, "post_id": 40135538, "comment_id": 67540905, "body": "Well, that&#39;s not a great way to get an error. Thanks, if you put it as an answer I&#39;ll choose it."}], "owner": {"user_type": "does_not_exist", "display_name": "user2580104"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 328, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1476890341, "creation_date": 1476890341, "question_id": 40135538, "link": "https://stackoverflow.com/questions/40135538/templates-unspecialized-class-template-cannot-be-used-as-a-template", "title": "Templates - &quot;Unspecialized class template cannot be used as a template&quot;", "body": "<pre><code>#pragma once\n\n#include &lt;memory&gt;\n\ntemplate &lt;typename T&gt;\nclass TreeHeader\n{\nprivate:\n    unsigned int size;\n    std::unique_ptr&lt;Node&lt;T&gt;&gt; root;\n\npublic:\n    virtual void size_inc();\n    virtual void size_dev();\n};\n\ntemplate &lt;typename T&gt;\nclass Node\n{\nprivate:\n    T data;\n\nprotected:\n    Node();\n\npublic:\n    void set_data(const T&amp; val);\n    T&amp; get_data();\n};\n</code></pre>\n\n<p>Specifically the compiler errors (about 5 from the same line) come from <code>std::unique_ptr&lt;Node&lt;T&gt;&gt; root;</code>.</p>\n\n<p>It's not clear to me why this does not work. I've also tried <code>std::unique_ptr&lt;Node&gt;</code> but it gives an error and does not make as much sense to me as well. </p>\n"}, {"tags": ["c++", "c", "return-type", "assignment-operator"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1476890300, "post_id": 40135485, "comment_id": 67540767, "body": "it depends on the type. the <code>operator=</code> of some class <code>Foo</code> has little to nothing in common with the <code>operator=</code> of some other type <code>Bar</code>"}, {"owner": {"reputation": 12976, "user_id": 1758762, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Nt89f.jpg?s=128&g=1", "display_name": "Leo Chapiro", "link": "https://stackoverflow.com/users/1758762/leo-chapiro"}, "edited": false, "score": 4, "creation_date": 1476890351, "post_id": 40135485, "comment_id": 67540794, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/15292892/what-is-return-type-of-assignment-operator\">what is return type of assignment operator?</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1476890435, "post_id": 40135485, "comment_id": 67540850, "body": "it is <code>C</code> or <code>C++</code>? They both are different languages. My answer below is for C."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1476890737, "post_id": 40135485, "comment_id": 67541041, "body": "Why not include some more languages?"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1476890342, "creation_date": 1476890342, "answer_id": 40135539, "question_id": 40135485, "link": "https://stackoverflow.com/questions/40135485/whats-the-return-type-of-assignment-operator/40135539#40135539", "title": "whats the return type of assignment operator?", "body": "<p>Quoting <code>C11</code>, chapter \u00a76.5.16, <em>Assignment operators</em> (<em>emphasis mine</em>)</p>\n\n<blockquote>\n  <p>[...] An\n  assignment expression has the <strong>value of the left operand after the assignment</strong>, but is not\n  an lvalue. The <strong>type of an assignment expression is the type the left operand would have\n  after lvalue conversion</strong>.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1476897337, "post_id": 40135573, "comment_id": 67545023, "body": "I&#39;m a fan of the <code>void</code> return type for the user-defined assignment operator. +1"}], "tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 2, "last_activity_date": 1476890816, "last_edit_date": 1476890816, "creation_date": 1476890455, "answer_id": 40135573, "question_id": 40135485, "link": "https://stackoverflow.com/questions/40135485/whats-the-return-type-of-assignment-operator/40135573#40135573", "title": "whats the return type of assignment operator?", "body": "<p><strong>In C++</strong>:</p>\n\n<p>The built-in assignment operator returns a reference, or more precisely, an assignment expression is an lvalue.</p>\n\n<p>Returning a reference is also required for an item in a standard collection.</p>\n\n<p>Apart from that you can define an assignment operator for a class type, with any return type you want, including <code>void</code> (which otherwise IMHO would have been preferable).</p>\n\n<p><strong>In C</strong>:<br>\nIn C there are no user defined assignment operators, and an assignment expression is an rvalue. I.e., in C you can't do <code>(a = b) = c</code> that you can do in C++. Which IMHO is an advantage.</p>\n"}], "owner": {"reputation": 1, "user_id": 7043102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7aed8011e9247e357b01a837306cc0?s=128&d=identicon&r=PG&f=1", "display_name": "codingninja", "link": "https://stackoverflow.com/users/7043102/codingninja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1476894290, "creation_date": 1476890205, "last_edit_date": 1476894290, "question_id": 40135485, "link": "https://stackoverflow.com/questions/40135485/whats-the-return-type-of-assignment-operator", "title": "whats the return type of assignment operator?", "body": "<p>I know it returns whatever is on left side. So in case of character assignment we would get a character and in case of int assignment we would get a int type.</p>\n\n<p>Isn't there a fix datatype of assignment operator?</p>\n"}]