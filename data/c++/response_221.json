[{"tags": ["c++", "c", "ssl", "ssl-certificate", "mongoose-web-server"], "answers": [{"comments": [{"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1574688371, "post_id": 59031166, "comment_id": 104309174, "body": "While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - <a href=\"/review/low-quality-posts/24679387\">From Review</a>"}, {"owner": {"reputation": 168, "user_id": 3585651, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ac692b98befc4a8231752bc9956c58d?s=128&d=identicon&r=PG&f=1", "display_name": "larslars", "link": "https://stackoverflow.com/users/3585651/larslars"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1578311564, "post_id": 59031166, "comment_id": 105386323, "body": "Thanks Mathieu, I see how my comment can be misunderstood. Tried to rectify now."}], "tags": [], "owner": {"reputation": 168, "user_id": 3585651, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ac692b98befc4a8231752bc9956c58d?s=128&d=identicon&r=PG&f=1", "display_name": "larslars", "link": "https://stackoverflow.com/users/3585651/larslars"}, "is_accepted": false, "score": 0, "last_activity_date": 1578311538, "last_edit_date": 1578311538, "creation_date": 1574682538, "answer_id": 59031166, "question_id": 55505946, "link": "https://stackoverflow.com/questions/55505946/hello-world-example-for-a-mongoose-webserver-with-ssl-in-c/59031166#59031166", "title": "hello world example for a mongoose webserver with SSL in C", "body": "<p>Firstly, I believe you should not have to handle other events than MG_NEW_REQUEST in your event handler. </p>\n\n<p>I would also debug using openssl:</p>\n\n<pre><code>openssl s_client -connect &lt;hostname:port&gt;\n</code></pre>\n\n<p>to see that the SSL connection gets set up properly.</p>\n\n<p>In any case, Cesanta does provide a complete working example for you to use:</p>\n\n<p><a href=\"https://github.com/cesanta/mongoose/tree/master/examples/simplest_web_server_ssl\" rel=\"nofollow noreferrer\">https://github.com/cesanta/mongoose/tree/master/examples/simplest_web_server_ssl</a></p>\n"}], "owner": {"reputation": 1, "user_id": 11308495, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dlf6NBq-N10/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iDm1IfrEaLPds_basTLEurbzbZfg/mo/photo.jpg?sz=128", "display_name": "Shubham Singla", "link": "https://stackoverflow.com/users/11308495/shubham-singla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 501, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1578311538, "creation_date": 1554335824, "question_id": 55505946, "link": "https://stackoverflow.com/questions/55505946/hello-world-example-for-a-mongoose-webserver-with-ssl-in-c", "title": "hello world example for a mongoose webserver with SSL in C", "body": "<p>I am trying to set a mongoose web server v3.3 with a self-signed SSL certificate. I know how to do it without SSL but I want to implement HTTPS.</p>\n\n<p>I have implemented something like this:</p>\n\n<pre><code>void *event_handler(enum mg_event event,\nstruct mg_connection *conn) {\n\nconst struct mg_request_info *request_info = mg_get_request_info(conn);\n\nstatic void* done = \"done\";\n\nif (event == MG_NEW_REQUEST) {\n    if (strcmp(request_info-&gt;uri, \"/hello\") == 0) {\n        // handle c[renderer] request\n        if(strcmp(request_info-&gt;request_method, \"GET\") != 0) {\n            // send error (we only care about HTTP GET)\n            mg_printf(conn, \"HTTP/1.1 %d Error (%s)\\r\\n\\r\\n%s\",\n                500,\n                \"we only care about HTTP GET\",\n                \"we only care about HTTP GET\");\n            // return not null means we handled the request\n            return done;\n        }\n\n        // handle your GET request to /hello\n        char* content = \"Hello World!\";\n        char* mimeType = \"text/plain\";\n        int contentLength = strlen(content);\n\n        mg_printf(conn,\n            \"HTTP/1.1 200 OK\\r\\n\"\n            \"Cache: no-cache\\r\\n\"\n            \"Content-Type: %s\\r\\n\"\n            \"Content-Length: %d\\r\\n\"\n            \"\\r\\n\",\n            mimeType,\n            contentLength);\n        mg_write(conn, content, contentLength);\n        return done;\n        }\n    }\n    // in this example i only handle /hello\n    mg_printf(conn, \"HTTP/1.1 %d Error (%s)\\r\\n\\r\\n%s\",\n        500, /* This the error code you want to send back*/\n        \"Invalid Request.\",\n        \"Invalid Request.\");\n    return done;\n}\n\n// No suitable handler found, mark as not processed. Mongoose will\n// try to serve the request.\nreturn NULL;\n}\n\nint main(int argc, char **argv) {\n\nconst char *options[] = {\n    \"ssl_certificate\", \"cert.pem\",\n    \"listening_ports\", \"443s\",\n    \"num_threads\", \"10\",\n    NULL\n};\n\nstatic struct mg_context *ctx;\n\nctx = mg_start(&amp;event_handler, options);\nif(ctx == NULL) {\n    exit(EXIT_FAILURE);\n}\n\nputs(\"Server running, press enter to exit\\n\");\ngetchar();\nmg_stop(ctx);\n\nreturn EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>The problem is I am not able to access my server from the web browser. I think the problem is that the first event my callback receives is MG_INIT_SSL but I do not know how to handle or process it. Could anybody please help?</p>\n"}, {"tags": ["c++", "struct"], "comments": [{"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 2, "creation_date": 1554335730, "post_id": 55505918, "comment_id": 97717642, "body": "That looks like C, not C++. Which language do you actually use?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1554335867, "post_id": 55505918, "comment_id": 97717678, "body": "<code>typedef struct</code> -- This is not necessary in C++.  Just <code>struct</code> is all you need."}, {"owner": {"reputation": 17, "user_id": 11133005, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2WyLZE1tFYM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcxnyzDGGH9fFoQOK2-5l9k6GfA0g/mo/photo.jpg?sz=128", "display_name": "Brett Morris", "link": "https://stackoverflow.com/users/11133005/brett-morris"}, "reply_to_user": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1554336214, "post_id": 55505918, "comment_id": 97717755, "body": "@Timo I use C++ mostly I believe, I think we may use some of both in our coding though. I&#39;m using this code for a grade 12 computer science project I have. Either way, I&#39;m just trying to figure out how to define this."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1554336499, "post_id": 55505918, "comment_id": 97717824, "body": "what are you trying to achieve? What is the problem with the code? Your question doesn&#39;t include a question"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1554336559, "post_id": 55505918, "comment_id": 97717841, "body": "Looks to me like you have it . <code>student</code> has a <code>Name</code>, an <code>Info</code>, and a <code>Mark</code> and everything compiles. For syntax questions you should start with <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">a good book</a> rather than Stack Overflow. There&#39;s going to be stuff you don&#39;t quite grok, but it looks like you did get this and a non-fraudulent text would have told you that a lot quicker than typing all that stuff in."}, {"owner": {"reputation": 17, "user_id": 11133005, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2WyLZE1tFYM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcxnyzDGGH9fFoQOK2-5l9k6GfA0g/mo/photo.jpg?sz=128", "display_name": "Brett Morris", "link": "https://stackoverflow.com/users/11133005/brett-morris"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1554336618, "post_id": 55505918, "comment_id": 97717850, "body": "@bolov yes, I&#39;m wondering how to define the struct &#39;class_list&#39; at the end of the code, including my structs I have made."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1554336701, "post_id": 55505918, "comment_id": 97717874, "body": "Ah-ha! I may have misread your intent. You have defined an array of <code>student</code>s, but are you asking how to initialize the values?"}, {"owner": {"reputation": 17, "user_id": 11133005, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2WyLZE1tFYM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcxnyzDGGH9fFoQOK2-5l9k6GfA0g/mo/photo.jpg?sz=128", "display_name": "Brett Morris", "link": "https://stackoverflow.com/users/11133005/brett-morris"}, "edited": false, "score": 0, "creation_date": 1554336742, "post_id": 55505918, "comment_id": 97717889, "body": "ah yes, sorry for the confusion"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1554336749, "post_id": 55505918, "comment_id": 97717891, "body": "You just defined the variable. So the answer is ... just like you did"}, {"owner": {"reputation": 725, "user_id": 1135237, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/22b63d609b1cbbefc2720bf906697157?s=128&d=identicon&r=PG", "display_name": "qqqqq", "link": "https://stackoverflow.com/users/1135237/qqqqq"}, "edited": false, "score": 0, "creation_date": 1554336976, "post_id": 55505918, "comment_id": 97717943, "body": "Yes, that is how you define struct as member of struct.Though, those typedefs are redundant."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 11133005, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2WyLZE1tFYM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcxnyzDGGH9fFoQOK2-5l9k6GfA0g/mo/photo.jpg?sz=128", "display_name": "Brett Morris", "link": "https://stackoverflow.com/users/11133005/brett-morris"}, "edited": false, "score": 0, "creation_date": 1554338101, "post_id": 55506084, "comment_id": 97718194, "body": "Thanks for the help! Sorry for the confusion at first."}], "tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": true, "score": 2, "last_activity_date": 1554337788, "last_edit_date": 1554337788, "creation_date": 1554337218, "answer_id": 55506084, "question_id": 55505918, "link": "https://stackoverflow.com/questions/55505918/how-to-define-structs-as-members-of-structs/55506084#55506084", "title": "How to define structs as members of structs?", "body": "<p>If your question is how to initialize the array then the answer is like this:</p>\n\n<pre><code>Student class_list[2] = {\n    {{\"John\", \"Doe\"}, {8, \"000-555-000\"}, {1, 2, 3}},\n    {{\"Jane\", \"Doe\"}, {10, \"000-555-001\"}, {10, 8, 10}},\n};\n</code></pre>\n\n<p>The reasons it works like this is because your classes are aggregates so you can use <a href=\"https://en.cppreference.com/w/cpp/language/aggregate_initialization\" rel=\"nofollow noreferrer\">aggregate initialization</a>.</p>\n\n<p>Well, I initialized an array of 2 elements. You can see the syntax.</p>\n\n<hr>\n\n<p>Some points for your program. The way of <code>typedef struct</code> is a C idiom. In C++ you don't need it so please change all the definitions to:</p>\n\n<pre><code>struct Name\n{\n    char fname[15];\n    char lname[15];\n};\n</code></pre>\n\n<p>Also you should use <code>std::array</code> instead of C arrays:</p>\n\n<pre><code>std::array&lt;Student, 3&gt; class_list {{\n    {{\"John\", \"Doe\"}, {8, \"000-555-000\"}, {1, 2, 3}},\n    {{\"Jane\", \"Doe\"}, {10, \"000-555-001\"}, {10, 8, 10}},\n}};\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 11133005, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2WyLZE1tFYM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcxnyzDGGH9fFoQOK2-5l9k6GfA0g/mo/photo.jpg?sz=128", "display_name": "Brett Morris", "link": "https://stackoverflow.com/users/11133005/brett-morris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 55506084, "answer_count": 1, "score": 0, "last_activity_date": 1554337788, "creation_date": 1554335561, "last_edit_date": 1554336285, "question_id": 55505918, "link": "https://stackoverflow.com/questions/55505918/how-to-define-structs-as-members-of-structs", "title": "How to define structs as members of structs?", "body": "<p>I'm trying to define a struct with other structs as members of that struct but I'm not sure how this is done. The code I have looks like this so far: </p>\n\n<pre><code>typedef struct name\n{\n\n    char fname[15];\n    char lname[15];\n\n} Name;\n\ntypedef struct info\n{\n\n    int grade;\n    char phone[13];\n\n} Info;\n\ntypedef struct mark\n{\n\n    int math;\n    int sci;\n    int eng;\n\n} Mark;\n\ntypedef struct student\n{\n\n    Name n;\n    Info i;\n    Mark m;\n\n} Student;\n\nint main()\n{\n\n    Student class_list[30] = { };\n\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "openmp"], "comments": [{"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1554335396, "post_id": 55505878, "comment_id": 97717580, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/32572043/how-does-openmp-reuse-threads\">How does OpenMP reuse threads</a>"}, {"owner": {"reputation": 157, "user_id": 2271421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82ae17d4cd8a5a47c657dd1ef6ba946a?s=128&d=identicon&r=PG", "display_name": "StaticCrazee", "link": "https://stackoverflow.com/users/2271421/staticcrazee"}, "reply_to_user": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1554335605, "post_id": 55505878, "comment_id": 97717617, "body": "I&#39;ve taken a look at that. The answer says that the threads remain idle. My question is if there is a way to put them to use in the still running section."}, {"owner": {"reputation": 1584, "user_id": 507433, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3818d83836c493001105a54de88ccdbf?s=128&d=identicon&r=PG", "display_name": "MFH", "link": "https://stackoverflow.com/users/507433/mfh"}, "edited": false, "score": 0, "creation_date": 1554337213, "post_id": 55505878, "comment_id": 97718000, "body": "@StaticCrazee How should OpenMP utilize the thread from section a? Last time I checked the spec, there was supposed to be at-most one thread per section!  The only way of reusing a thread I could come up with, would require a nowait-clause on the sections (+ a broader parallel-block)..."}, {"owner": {"reputation": 1480, "user_id": 10450594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae4c6a0ca94b3094b25f18e66d8368ff?s=128&d=identicon&r=PG&f=1", "display_name": "Brice", "link": "https://stackoverflow.com/users/10450594/brice"}, "edited": false, "score": 0, "creation_date": 1554455824, "post_id": 55505878, "comment_id": 97767361, "body": "Unless you have some nested parallelism further down in functions <code>a</code> &amp; <code>b</code> and nested parallelism has been enabled, each section is executed by a single thread. Idle threads will not &quot;help parallelize&quot; because sections are serial code."}], "answers": [{"comments": [{"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1554361181, "post_id": 55508278, "comment_id": 97724550, "body": "I would add to that answer, that both tasks must individually spawn more child tasks in order to actually exploit load balancing."}, {"owner": {"reputation": 1650, "user_id": 2785280, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mokc5.jpg?s=128&g=1", "display_name": "Michael Klemm", "link": "https://stackoverflow.com/users/2785280/michael-klemm"}, "reply_to_user": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1554704405, "post_id": 55508278, "comment_id": 97833577, "body": "@Zulan: that&#39;s right. A typical ratio is to have about 10 times more tasks than threads. That usually gives enough work for load balancing. Another threshold depends on the amount of work per task. That threshold depends on the implementation, but for OpenMP this is usually about 100k processor cycles."}], "tags": [], "owner": {"reputation": 1650, "user_id": 2785280, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mokc5.jpg?s=128&g=1", "display_name": "Michael Klemm", "link": "https://stackoverflow.com/users/2785280/michael-klemm"}, "is_accepted": true, "score": 1, "last_activity_date": 1554354574, "creation_date": 1554354574, "answer_id": 55508278, "question_id": 55505878, "link": "https://stackoverflow.com/questions/55505878/does-openmp-use-reuse-threads-of-completed-section-for-another-one/55508278#55508278", "title": "Does OpenMP use reuse threads of completed section for another one?", "body": "<p>OpenMP does not use an idle thread to further parallelize the other <code>section</code> in your code.  If you want better load balancing between the threads, then you would have to use a more modern OpenMP programming style that relies on OpenMP tasks.  Ready-to-execute tasks are picked up by idle threads automatically when the thread becomes idle.</p>\n\n<p>So, the code then would look more like this:</p>\n\n<pre><code>#pragma omp parallel master\n{\n  #pragma omp task\n  { func a }  // func a needs to generate more tasks \n  #pragma omp task\n  { func b }  // func b needs to generate more tasks \n}\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 2271421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82ae17d4cd8a5a47c657dd1ef6ba946a?s=128&d=identicon&r=PG", "display_name": "StaticCrazee", "link": "https://stackoverflow.com/users/2271421/staticcrazee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 55508278, "answer_count": 1, "score": 0, "last_activity_date": 1554354574, "creation_date": 1554335297, "last_edit_date": 1554335758, "question_id": 55505878, "link": "https://stackoverflow.com/questions/55505878/does-openmp-use-reuse-threads-of-completed-section-for-another-one", "title": "Does OpenMP use reuse threads of completed section for another one?", "body": "<p>Suppose I've got OpenMP setup for running multiple sections as below:</p>\n\n<pre><code>#pragma omp parallel sections\n{\n  #pragma omp section\n  { func a }\n  #pragma omp section\n  { func b }\n}\n</code></pre>\n\n<p>Now suppose <em>func b</em> has finished first while <em>func a</em> is still running. Does OpenMP use the threads that were used in <em>func a</em> to further parallelize <em>func b</em>? If not, is there a way to do that?</p>\n\n<p><strong>Edit:</strong> It's been suggested in a previous question that the threads that were previously used remains idle. Would there be a way to get them to work on a still running section?</p>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1554337708, "post_id": 55505862, "comment_id": 97718106, "body": "You can use forwarding references for template arguments and use <code>std::forward</code> to forward them."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1554346255, "post_id": 55505862, "comment_id": 97719854, "body": "How does this compile exactly? None of these things are multipliable."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1554371837, "post_id": 55505862, "comment_id": 97730840, "body": "Can you show us a minimal but complete and working example? I don&#39;t understand how is defined an <code>operator*()</code> involving <code>[](const auto v) {return v;};</code>"}, {"owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "edited": false, "score": 0, "creation_date": 1554397205, "post_id": 55505862, "comment_id": 97747067, "body": "Apart of the main question: perfect forwarding will not help if you use only <code>std::array</code>s of simple types. Moving and copying for such array is same operation: <a href=\"https://stackoverflow.com/a/14370753/5945883\">stackoverflow.com/a/14370753/5945883</a>"}], "owner": {"user_type": "does_not_exist", "display_name": "user11308506"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1554335487, "creation_date": 1554335175, "last_edit_date": 1554335487, "question_id": 55505862, "link": "https://stackoverflow.com/questions/55505862/generalized-container-usage-without-copy-perfect-forwarding", "title": "Generalized container usage without copy. Perfect forwarding?", "body": "<p>I have the following container:</p>\n\n<pre><code>constexpr auto id = [](const auto v) {return v;};\ntemplate &lt;typename Op, typename Preop=decltype(id)&gt;\nclass Cont{\npublic:\n    constexpr Cont(const Op &amp; op_,const Preop &amp; preop_=id):op(op_),preop(preop_){}\n    constexpr Cont(const Cont &amp; cont_):op(cont_.op),preop(cont_.preop){}\n    const Op op ;\n    const Preop preop ;\n    template &lt;typename Op2, typename Preop2&gt;\n    constexpr auto operator()(const Cont&lt;Op2,Preop2&gt; &amp; mfop) const{\n        return Cont&lt;const Cont&lt;Op,Preop&gt;,const Cont&lt;Op2,Preop2&gt;&gt;\n               (Cont(op,preop),mfop);}\n    constexpr auto operator()(const auto &amp; v) const{return op*(preop*v);}\n};\n</code></pre>\n\n<p>That I use to make arrays and functors compatible such that, with some proper definitions of <code>operator*</code>, the following <code>main()</code> is valid:</p>\n\n<pre><code>int main(){\n    const std::array&lt;double,4&gt; v{};\n    const Cont A(Oper&lt;4,1&gt;(1.));\n    const Cont B(std::array&lt;std::array&lt;double,4&gt;,4&gt;{std::array&lt;double,4&gt;{}});\n    constexpr auto res = B*B*A*A*B*A*B*v;\n    return 0;\n}\n</code></pre>\n\n<p>The code needs to work at compile time if required. I would like to avoid the multiple copies performed in <code>Cont</code>, but I cannot find a way to make it work. Is there maybe a way using perfect forwarding or move semantics?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1554334901, "post_id": 55505815, "comment_id": 97717459, "body": "You could use a regular expression."}, {"owner": {"reputation": 25, "user_id": 11280137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/833b96cfdf08f8dd031bde9e18589f8c?s=128&d=identicon&r=PG&f=1", "display_name": "SpaceMeow", "link": "https://stackoverflow.com/users/11280137/spacemeow"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1554334998, "post_id": 55505815, "comment_id": 97717478, "body": "@eerorika good idea, didn&#39;t even think about that, gonna try it out! Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1554335818, "post_id": 55505869, "comment_id": 97717663, "body": "There is also <code>std::string::find_first_not_of()</code>, too: <code>auto right = test.find_first_not_of(&quot;*&quot;, left+1);</code>"}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 2, "last_activity_date": 1554335215, "creation_date": 1554335215, "answer_id": 55505869, "question_id": 55505815, "link": "https://stackoverflow.com/questions/55505815/how-to-replace-an-unknown-amount-of-identical-characters-with-a-new-word/55505869#55505869", "title": "How to replace an unknown amount of identical characters with a new word?", "body": "<p><code>std::string</code> has both <code>find</code> and <code>rfind</code>, so if you know your string will contain only one contiguous group of asterisks, you can find the beginning and end of them something like this:</p>\n\n<pre><code>auto left = test.find('*');\nauto right = test.rfind('*');\n</code></pre>\n\n<p>Then you can replace that range with some new data something like this:</p>\n\n<pre><code>test.replace(left, right-left+1, \"WORD\");\n</code></pre>\n\n<p>As usual, I've omitted any error checking (and such) for simplicity/clarity.</p>\n"}], "owner": {"reputation": 25, "user_id": 11280137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/833b96cfdf08f8dd031bde9e18589f8c?s=128&d=identicon&r=PG&f=1", "display_name": "SpaceMeow", "link": "https://stackoverflow.com/users/11280137/spacemeow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18, "favorite_count": 0, "accepted_answer_id": 55505869, "answer_count": 1, "score": 0, "last_activity_date": 1554335215, "creation_date": 1554334706, "question_id": 55505815, "link": "https://stackoverflow.com/questions/55505815/how-to-replace-an-unknown-amount-of-identical-characters-with-a-new-word", "title": "How to replace an unknown amount of identical characters with a new word?", "body": "<p>What I'm trying to do is if I have a string like \n<code>std::string test = \"2xs***gcv\"</code> Is it possible to somehow replace all the instances of a star with a new word e.x <code>2xs***gcv</code> = <code>2xsWORDgcv</code> the issue is that the number of *'s aren't always 3 could be 5,7,2 etc but they're always beside each other.</p>\n\n<p>what I have so far is</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>std::string test = \"2xs***gcv\"\nchar *pos;\npos = strchr(result.c_str(),'*');\n    while(pos!=NULL) {\n        printf (\"found at %d\\n\",pos-result.c_str()+1);\n        pos=strchr(pos+1,'*');\n}\n</code></pre>\n\n<p>which tells me where the *'s are located, the problem is I can't seem to figure how to isolate just the first instance of the * and that last instance.</p>\n"}, {"tags": ["c++", "assembly", "makefile", "cygwin"], "comments": [{"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1554334247, "post_id": 55505707, "comment_id": 97717306, "body": "With Cygwin you have to prepend your external assembly function names with an <code>_</code>. in the assembly file. Change <code>global GetValueFromASM</code> to <code>global _GetValueFromASM</code> and the label <code>GetValueFromASM:</code> to <code>_GetValueFromASM:</code>"}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1554334484, "post_id": 55505707, "comment_id": 97717364, "body": "I think you made that comment just before I answered the question :). It&#39;s funny how Windows works, isn&#39;t it?"}], "answers": [{"comments": [{"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 1, "creation_date": 1554335937, "post_id": 55505738, "comment_id": 97717695, "body": "Another option with g++ is doing <code>extern &quot;C&quot; int GetValueFromASM() asm (&quot;GetValueFromASM&quot;);</code> The label in the ASM part will be the label that will be resolved (so one without the underscore). Then the assembly code doesn&#39;t change. It isn&#39;t my preference, just pointing out the option."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1554377132, "post_id": 55505738, "comment_id": 97734099, "body": "Didn&#39;t know you could do that. Is that also possible in C without the <code>extern &quot;C&quot;</code> part?"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1554377632, "post_id": 55505738, "comment_id": 97734442, "body": "If using <i>C</i>, you drop the <code>extern C</code> and it will work. This is a G++/GCC extension and not part of the <i>C</i> standard. This is discussed in the <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.4.0/gcc/Asm-Labels.html#Asm-Labels\" rel=\"nofollow noreferrer\">GCC documentation</a> under <i>ASM Labels</i>"}], "tags": [], "owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "is_accepted": true, "score": 2, "last_activity_date": 1554334684, "last_edit_date": 1592644375, "creation_date": 1554334231, "answer_id": 55505738, "question_id": 55505707, "link": "https://stackoverflow.com/questions/55505707/how-can-i-compile-a-hybrid-asm-c-source-code-into-a-32-bit-program/55505738#55505738", "title": "How can I compile a hybrid (asm, C++) source code into a 32-bit program?", "body": "<p>You have to prefix your symbols with <code>_</code>, as is customary in Windows/Cygwin:</p>\n<pre><code>section .data\nsection .bss\nsection .text\n    global _GetValueFromASM\n\n_GetValueFromASM:\n    mov eax, 9\n    ret\n</code></pre>\n<p>The rest of your code should work fine.</p>\n<p>An alternative would be to compile with <code>-fno-leading-underscore</code>. However, this may break linking with other (Cygwin system) libraries. I suggest using the first option if portability to other platforms does not matter to you.</p>\n<p>Quoting from the GNU Online Docs:</p>\n<blockquote>\n<p><code>-fleading-underscore</code></p>\n<p>This option and its counterpart, <code>-fno-leading-underscore</code>, forcibly change the way C symbols are represented in the object file. One use is to help link with legacy assembly code.</p>\n<p><strong>Warning:</strong> the <code>-fleading-underscore</code> switch causes GCC to generate code that is not binary compatible with code generated without that switch. Use it to conform to a non-default application binary interface. Not all targets provide complete support for this switch.</p>\n</blockquote>\n"}], "owner": {"reputation": 17456, "user_id": 159072, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/217605bccd955128d5ffc2c6e3d8267e?s=128&d=identicon&r=PG&f=1", "display_name": "user366312", "link": "https://stackoverflow.com/users/159072/user366312"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 55505738, "answer_count": 1, "score": 0, "last_activity_date": 1558575873, "creation_date": 1554333960, "last_edit_date": 1558575873, "question_id": 55505707, "link": "https://stackoverflow.com/questions/55505707/how-can-i-compile-a-hybrid-asm-c-source-code-into-a-32-bit-program", "title": "How can I compile a hybrid (asm, C++) source code into a 32-bit program?", "body": "<p>I am using <strong>Cygwin 32-bit</strong> under Win7 in a 64-bit machine.</p>\n\n<p>The following program </p>\n\n<p>makefile:</p>\n\n<pre><code>runme:  main.cpp    asm.o\n        g++ main.cpp    asm.o   -o  executable\n\nasm.o:  asm.asm\n        nasm    -f  elf     asm.asm     -o  asm.o \n</code></pre>\n\n<p>asm.asm:</p>\n\n<pre><code>section .data\nsection .bss\nsection .text\n    global GetValueFromASM\n\nGetValueFromASM:\n    mov eax, 9\n    ret\n</code></pre>\n\n<p>main.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nextern \"C\" int GetValueFromASM();\n\nint main()\n{\n    cout&lt;&lt;\"GetValueFromASM() returned = \"&lt;&lt;GetValueFromASM()&lt;&lt;endl;\n\n    return 0;\n} \n</code></pre>\n\n<p>is giving me the following error:</p>\n\n<pre><code>$ make\nnasm    -f      elf             asm.asm         -o      asm.o\ng++     main.cpp        asm.o   -o      executable\n/tmp/cc3F1pPh.o:main.cpp:(.text+0x26): undefined reference to `GetValueFromASM'\ncollect2: error: ld returned 1 exit status\nmake: *** [makefile:2: runme] Error 1\n</code></pre>\n\n<p>I am not understanding why this error is being generated. </p>\n\n<p>How can I get rid of this issue?</p>\n"}, {"tags": ["python", "c++", "windows", "user-interface", "automation"], "comments": [{"owner": {"reputation": 5431, "user_id": 858565, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0630fef08c0e97da592f624c69b446f7?s=128&d=identicon&r=PG", "display_name": "andreihondrari", "link": "https://stackoverflow.com/users/858565/andreihondrari"}, "edited": false, "score": 0, "creation_date": 1554333395, "post_id": 55505622, "comment_id": 97717120, "body": "like any window? even a windows window for example?"}, {"owner": {"reputation": 2620, "user_id": 5335649, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/9650fd24c7432056ab9e7c892bc38523?s=128&d=identicon&r=PG&f=1", "display_name": "Rockybilly", "link": "https://stackoverflow.com/users/5335649/rockybilly"}, "reply_to_user": {"reputation": 5431, "user_id": 858565, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0630fef08c0e97da592f624c69b446f7?s=128&d=identicon&r=PG", "display_name": "andreihondrari", "link": "https://stackoverflow.com/users/858565/andreihondrari"}, "edited": false, "score": 0, "creation_date": 1554333480, "post_id": 55505622, "comment_id": 97717138, "body": "@andreihondrari Exactly. However I would of course pursue how to achieve the same in Linux if I succeed in Windows."}, {"owner": {"reputation": 5431, "user_id": 858565, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0630fef08c0e97da592f624c69b446f7?s=128&d=identicon&r=PG", "display_name": "andreihondrari", "link": "https://stackoverflow.com/users/858565/andreihondrari"}, "edited": false, "score": 0, "creation_date": 1554333568, "post_id": 55505622, "comment_id": 97717153, "body": "my personal opinion is that what you are asking is pretty SciFi. You would need to pinpoint the application&#39;s RAM spectrum and steal all the information from there, that if of course you know how to interpret the bits at those addresses."}, {"owner": {"reputation": 2620, "user_id": 5335649, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/9650fd24c7432056ab9e7c892bc38523?s=128&d=identicon&r=PG&f=1", "display_name": "Rockybilly", "link": "https://stackoverflow.com/users/5335649/rockybilly"}, "reply_to_user": {"reputation": 5431, "user_id": 858565, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0630fef08c0e97da592f624c69b446f7?s=128&d=identicon&r=PG", "display_name": "andreihondrari", "link": "https://stackoverflow.com/users/858565/andreihondrari"}, "edited": false, "score": 0, "creation_date": 1554333924, "post_id": 55505622, "comment_id": 97717233, "body": "@andreihondrari Probably, but I decided to ask because some person may make a good point. It comes to me as a task that is open to many view points and ideas."}, {"owner": {"reputation": 226, "user_id": 4241932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XpYS9.jpg?s=128&g=1", "display_name": "Matthew0898", "link": "https://stackoverflow.com/users/4241932/matthew0898"}, "edited": false, "score": 0, "creation_date": 1554334391, "post_id": 55505622, "comment_id": 97717340, "body": "Probably a stupid thought, but what about getting the data from a screen reader?"}, {"owner": {"reputation": 2620, "user_id": 5335649, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/9650fd24c7432056ab9e7c892bc38523?s=128&d=identicon&r=PG&f=1", "display_name": "Rockybilly", "link": "https://stackoverflow.com/users/5335649/rockybilly"}, "reply_to_user": {"reputation": 226, "user_id": 4241932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XpYS9.jpg?s=128&g=1", "display_name": "Matthew0898", "link": "https://stackoverflow.com/users/4241932/matthew0898"}, "edited": false, "score": 0, "creation_date": 1554335114, "post_id": 55505622, "comment_id": 97717509, "body": "@Matthew0898 Very good idea in my opinion :) However it seems the application I am working on does not naturally support this. Besides, it actually comes down to the idea I already tried."}], "owner": {"reputation": 2620, "user_id": 5335649, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/9650fd24c7432056ab9e7c892bc38523?s=128&d=identicon&r=PG&f=1", "display_name": "Rockybilly", "link": "https://stackoverflow.com/users/5335649/rockybilly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1554333406, "creation_date": 1554333287, "last_edit_date": 1554333406, "question_id": 55505622, "link": "https://stackoverflow.com/questions/55505622/obtain-text-from-running-application", "title": "Obtain text from running application", "body": "<p>Is it possible in a known way to obtain text within a running application GUI (presented to the screen, in menus or sidebars etc.), in a programmatic way ?</p>\n\n<p>I have thought of somehow viewing the memory management of the program however this would prove difficult if a lot of dynamic allocation (the string) is going on (and I don't know how to).</p>\n\n<p>I finally did use automated screenshots and text recognition from the images to achieve this, however this is clearly inefficient and I wanted to ask if there is a clever way that I am not aware of ?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 4, "creation_date": 1554332813, "post_id": 55505545, "comment_id": 97716999, "body": "This is a one-line solution using <code>std::replace_if</code>.  So are you ready for such a solution?"}, {"owner": {"reputation": 2192, "user_id": 10848591, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eoV3Oz4qBEo/AAAAAAAAAAI/AAAAAAAAEz8/sAjB2IHG5Ao/photo.jpg?sz=128", "display_name": "Spinkoo", "link": "https://stackoverflow.com/users/10848591/spinkoo"}, "edited": false, "score": 0, "creation_date": 1554333925, "post_id": 55505545, "comment_id": 97717235, "body": "if(line.at(i) != &#39;a&#39; || line.at(i) != &#39;e&#39; || line.at(i) != &#39;i&#39; || line.at(i) != &#39;o&#39; || line.at(i) != &#39;u&#39;)  tht&#39;s always true by the way.. you should consider changing the || for &amp;"}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1554333992, "post_id": 55505545, "comment_id": 97717250, "body": "Also you can make it check for Capital letter vowels: <code>if( std::toupper(line.at(i)) != &#39;A&#39; )</code> or the opposite way with <code>std::tolower</code>."}], "answers": [{"tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": false, "score": 2, "last_activity_date": 1554334792, "last_edit_date": 1554334792, "creation_date": 1554334218, "answer_id": 55505737, "question_id": 55505545, "link": "https://stackoverflow.com/questions/55505545/replace-vowels-in-a-text-file/55505737#55505737", "title": "Replace vowels in a text file", "body": "<p>There are several issues with your program.</p>\n\n<hr>\n\n<p>First, your boolean logic is faulty.  You have this:</p>\n\n<pre><code>if(line.at(i) != 'a' || line.at(i) != 'e' || line.at(i) != 'i' \n                     || line.at(i) != 'o' || line.at(i) != 'u')\n</code></pre>\n\n<p>When it should be the following:</p>\n\n<pre><code>if(line.at(i) != 'a' &amp;&amp; line.at(i) != 'e' &amp;&amp; line.at(i) != 'i' \n                     &amp;&amp; line.at(i) != 'o' &amp;&amp; line.at(i) != 'u')\n</code></pre>\n\n<p>However we can make this code \"neater\" by using <code>strchr</code> to do a simple search:</p>\n\n<pre><code>static const char *vowels=\"aAeEiIoOuU\"\n//...\nbool isVowel = strchr(vowels, line.at(i)); // true if vowel, false otherwise\n</code></pre>\n\n<hr>\n\n<p>Second, this statement:</p>\n\n<pre><code>while(!dataIn.eof())\n</code></pre>\n\n<p>This should not be done.  <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Please read this for more information.</a></p>\n\n<hr>\n\n<p>Third, you can write most of that function using <a href=\"https://en.cppreference.com/w/cpp/algorithm/replace\" rel=\"nofollow noreferrer\">std::replace_if</a>:</p>\n\n<pre><code>#include &lt;cstring&gt;\n#include &lt;algorithm&gt;\n//...\nvoid replaceVowels(ifstream &amp;dataIn, string outputFile)\n{\n    string line;\n    static const char *vowels = \"aAeEiIoOuU\";\n    ofstream dataOut;\n    dataOut.open(outputFile.c_str());\n    while(getline(dataIn, line))\n    {\n       std::replace_if(line.begin(), line.end(), \n                       [&amp;](char ch) { return strchr(vowels, ch); }, '3');\n       dataOut &lt;&lt; line &lt;&lt; endl;\n    }\n};\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11308406"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554334792, "creation_date": 1554332578, "question_id": 55505545, "link": "https://stackoverflow.com/questions/55505545/replace-vowels-in-a-text-file", "title": "Replace vowels in a text file", "body": "<p>In my program one of the functions I want to create is going take an input file and replace every vowel with '3'. I've done something but it's not working obviously. I was hoping I could get some help with it:</p>\n\n<p><pre></p>\n\n<code>void replaceVowels(ifstream &amp;dataIn, string outputFile)\n{\n    string line;\n    ofstream dataOut;\n    dataOut.open(outputFile.c_str());\n    while(!dataIn.eof())\n    {\n        getline(dataIn, line);\n        for (int i = 0; i &lt; line.length(); i++)\n        {\n            if(line.at(i) != 'a' || line.at(i) != 'e' || line.at(i) != 'i' || line.at(i) != 'o' || line.at(i) != 'u')\n            {\n                dataOut &lt;&lt; line.at(i);\n            } else {\n                line.at(i) = '3';\n                dataOut &lt;&lt; line.at(i);\n            }\n            dataOut &lt;&lt; endl;\n        }\n    }\n    dataOut.close();\n};\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 8, "creation_date": 1554330934, "post_id": 55505316, "comment_id": 97716475, "body": "What blog post?"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 1, "creation_date": 1554331455, "post_id": 55505316, "comment_id": 97716652, "body": "And which compiler?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1554335236, "post_id": 55505316, "comment_id": 97717536, "body": "And faster how?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1554335314, "post_id": 55505316, "comment_id": 97717564, "body": "After a quick Google I found <a href=\"https://quuxplusone.github.io/blog/2018/07/09/scary-metafunctions/\" rel=\"nofollow noreferrer\">quuxplusone.github.io/blog/2018/07/09/scary-metafunctions</a>, but if that&#39;s what you&#39;re talking about, please edit your question to make clear what it is that you are referring to. The phrase &quot;the blog post&quot; will not stand the test of time."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1554338456, "post_id": 55505316, "comment_id": 97718273, "body": "And which talk?"}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 3, "last_activity_date": 1554334672, "creation_date": 1554334672, "answer_id": 55505811, "question_id": 55505316, "link": "https://stackoverflow.com/questions/55505316/scary-metafunctions-why-are-they-faster/55505811#55505811", "title": "SCARY metafunctions: why are they faster?", "body": "<p>First, I think, a little difference:</p>\n\n<pre><code>template&lt;bool B, class T, class F&gt; struct conditional;\n\ntemplate&lt;class T, class F&gt; struct conditional&lt;false, T, F&gt;;\n</code></pre>\n\n<p>The compiler here has to pattern match all 3 arguments against <code>false, T, F</code>.  Now this is easy, but it isn't free.</p>\n\n<pre><code>template&lt;bool B&gt; struct conditional;\ntemplate&lt;&gt; struct conditional&lt;false&gt;;\n</code></pre>\n\n<p>here it has to pattern match one argument against <code>false</code>.</p>\n\n<p>So picking the specialization is strictly easier.</p>\n\n<p>The next thing is the length of types generated; I find long type names lead to compiler memory use getting nasty.  <code>conditional&lt;b, T, F&gt;</code> in the non-SCARY case is the name of an actual unique and distinct type.  Its length is O(n) in the length of the arguments.</p>\n\n<p>In the SCARY case, no new O(n) type is created.</p>\n\n<pre><code>typename conditional&lt;false&gt;::template f&lt;T, F&gt;;\n</code></pre>\n\n<p>this is just another name for <code>F</code>.  The type <code>conditional&lt;false&gt;</code> was created, it has an alias template within it, and that alias template creates no new types.  The return type is <code>F</code>, if you tried to match it against <code>template&lt;class,class&gt;class Z, class A, class B, Z&lt;A,B&gt;</code> it wouldn't match.</p>\n\n<p>Finally and most importantly, memoization.  Every call to the SCARY conditional creates either <code>conditional&lt;false&gt;</code> or <code>conditional&lt;true&gt;</code>.  So the 500th time, it can do zero template specialization checking and just grab the precomputed type.</p>\n\n<p>From that precomputed type, we get <code>template type&lt;T,F&gt;</code> alias; we apply it without memoization to get <code>T</code> or <code>F</code>.</p>\n\n<p>In the non-SCARY, every distinct <code>T</code> and <code>F</code> means a different <code>conditional&lt;b,T,F&gt;</code> type.  So a larger memoization cache, fewer hits, and on a miss you need to run full template specialization checks to ensure nobody went and</p>\n\n<pre><code>template&lt;class U&gt; conditional&lt;true, int, U&gt;{using type=U;};\n</code></pre>\n\n<p>and overrode it for the specific type you are working with.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11308333"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554334672, "creation_date": 1554330833, "last_edit_date": 1554330857, "question_id": 55505316, "link": "https://stackoverflow.com/questions/55505316/scary-metafunctions-why-are-they-faster", "title": "SCARY metafunctions: why are they faster?", "body": "<p>I watched the talk and read the blog post, and I'm still unsure...why is</p>\n\n<pre><code>template&lt;bool B&gt; struct conditional { template&lt;class T, class F&gt; using f = T; };\n\ntemplate&lt;&gt; struct conditional&lt;false&gt; { template&lt;class T, class F&gt; using f = F; };\n\ntemplate&lt;bool B, class T, class F&gt; using conditional_t = typename conditional&lt;B&gt;::template f&lt;T, F&gt;;\n</code></pre>\n\n<p>faster to compile than</p>\n\n<pre><code>template&lt;bool B, class T, class F&gt; struct conditional { using type = T; };\n\ntemplate&lt;class T, class F&gt; struct conditional&lt;false, T, F&gt; { using type = F; };\n\ntemplate&lt;bool B, class T, class F&gt; using conditional_t = typename conditional&lt;B, T, F&gt;::type;\n</code></pre>\n\n<p>?</p>\n\n<p>The first version needs to instantiate a template class with one parameter and a template alias with two, and the second version instantiates a template class with three parameters and a template alias with zero...ok, template aliases are a bit cheaper, but does it make such a big difference?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1554330943, "post_id": 55505313, "comment_id": 97716478, "body": "No trig is required, it&#39;s just linear arithmetic."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1554330981, "post_id": 55505313, "comment_id": 97716490, "body": "<i>I&#39;m trying to do this without using a vector class, just arrays</i>  -- So how would using vectors be any different than using arrays?"}, {"owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "edited": false, "score": 2, "creation_date": 1554331014, "post_id": 55505313, "comment_id": 97716499, "body": "Please, show what you have tried so far."}, {"owner": {"reputation": 1, "user_id": 11300890, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_enZX7IPkXM/AAAAAAAAAAI/AAAAAAAAACs/iX5VdZWsJE0/photo.jpg?sz=128", "display_name": "Acme", "link": "https://stackoverflow.com/users/11300890/acme"}, "edited": false, "score": 0, "creation_date": 1554331047, "post_id": 55505313, "comment_id": 97716514, "body": "Because most vector classes have built in methods to assist in calculating,"}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1554331127, "post_id": 55505313, "comment_id": 97716534, "body": "You realise when developers talk about vectors they aren&#39;t the same as when mathematicians or physicists talk about vectors?"}], "answers": [{"tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": false, "score": 4, "last_activity_date": 1554331126, "creation_date": 1554331126, "answer_id": 55505364, "question_id": 55505313, "link": "https://stackoverflow.com/questions/55505313/get-points-along-a-vector/55505364#55505364", "title": "Get points along a vector", "body": "<p>The points on the line segment are</p>\n\n<pre><code>{ t*x1 + (1-t)*x2, t*y1 + (1-t)*y2, t*z1 + (1-t)*z2 }\n</code></pre>\n\n<p>where <code>t</code> is any number in the range [0, 1]. You want n points, so just pick n values between zero and one for <code>t</code> and substitute in the formula above.</p>\n"}], "owner": {"reputation": 1, "user_id": 11300890, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_enZX7IPkXM/AAAAAAAAAAI/AAAAAAAAACs/iX5VdZWsJE0/photo.jpg?sz=128", "display_name": "Acme", "link": "https://stackoverflow.com/users/11300890/acme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 1, "answer_count": 1, "score": -3, "last_activity_date": 1554331126, "creation_date": 1554330823, "question_id": 55505313, "link": "https://stackoverflow.com/questions/55505313/get-points-along-a-vector", "title": "Get points along a vector", "body": "<p>So I'm essentially trying to do this</p>\n\n<p>say I have\n<code>float Origin[3] = {x1, y1, z1}, EndOrigin[3] = {x2, y2, z2};</code></p>\n\n<p>I want to get n points along a line in three dimensions like <a href=\"https://i.stack.imgur.com/ftz73.png\" rel=\"nofollow noreferrer\">this.</a>\nI'm trying to do this without using a vector class, just arrays. I do not know a lot about trig, so this is a little tough for me. Any help or pointers?</p>\n"}, {"tags": ["c++", "gcc", "visual-c++", "clang", "template-specialization"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 2, "creation_date": 1554331108, "post_id": 55505257, "comment_id": 97716531, "body": "clang is not using the value from the primary template, which would definitely be incorrect. I tried changing the primary template&#39;s value from <code>false</code> to <code>true</code>, and the program result was still <code>1</code>. Probably clang is using the zero-initialized value."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1554331353, "post_id": 55505257, "comment_id": 97716621, "body": "@aschepler, Dmytro: Who wants to file the bug report then? :-)"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1554331478, "post_id": 55505257, "comment_id": 97716658, "body": "From my understanding, the compiler should look at the second form to resolve <code>foo&lt;int, int&gt;::value</code>, which should result in a diagnostic.  So g++ and MSVC are correct.     You can address the problem by explicitly specialising <code>foo&lt;int, int&gt;</code>  e.g. template&lt;&gt; struct foo&lt;int, int&gt; { static const bool value = whatever;};"}, {"owner": {"reputation": 2055, "user_id": 10733631, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-z9f47Aj3ez4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-j0jfocyr5e1Wd0v4q8aluK_b7B5Q/mo/photo.jpg?sz=128", "display_name": "Dmytro Dadyka", "link": "https://stackoverflow.com/users/10733631/dmytro-dadyka"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1554331491, "post_id": 55505257, "comment_id": 97716662, "body": "@aschepler, you&#39;re right! My interpretation of clang behavior is no correct. Really looks like  zero-initialized value."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1554332112, "post_id": 55505257, "comment_id": 97716831, "body": "You get the same overall results (though different error messages in the case of g++) without templates: <code>struct bar { static const bool value = !bar::value; };</code>."}], "answers": [{"comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1554331093, "post_id": 55505326, "comment_id": 97716524, "body": "gcc is issuing a diagnostic, which is all that is required.  The standard doesn&#39;t dictate the form of that diagnostic, or the manner in which the compiler decides to issue it."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1554331171, "post_id": 55505326, "comment_id": 97716553, "body": "@Peter: I didn&#39;t say GCC is exhibiting buggy behavior. But it doesn&#39;t <i>need</i> to try to do 900 instantiations."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1554331179, "post_id": 55505326, "comment_id": 97716555, "body": "Initializing a value with itself is not always illegal, if zero-initialization applied before dynamic initialization."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1554331630, "post_id": 55505326, "comment_id": 97716696, "body": "@einpoklum - I didn&#39;t think you were suggesting g++ is buggy.  There are plenty of things compilers do that are not required, or for which there are better alternatives.  This seems to be one of them for g++."}, {"owner": {"reputation": 2055, "user_id": 10733631, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-z9f47Aj3ez4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-j0jfocyr5e1Wd0v4q8aluK_b7B5Q/mo/photo.jpg?sz=128", "display_name": "Dmytro Dadyka", "link": "https://stackoverflow.com/users/10733631/dmytro-dadyka"}, "edited": false, "score": 1, "creation_date": 1554331971, "post_id": 55505326, "comment_id": 97716777, "body": "I tried all the compilers available on your link. It looks like a clang bug."}], "tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": true, "score": 3, "last_activity_date": 1554405727, "last_edit_date": 1554405727, "creation_date": 1554330875, "answer_id": 55505326, "question_id": 55505257, "link": "https://stackoverflow.com/questions/55505257/different-compilers-behavior-for-template-specialization/55505326#55505326", "title": "Different compilers behavior for template specialization", "body": "<p>I am not a language lawyer, but this should <em>not</em> compile. You're trying to initialize a value with itself at compile-time. I would guess this is a clang bug. Actually, I don't see why GCC should be following a recursion path like that if it hits a cycle.</p>\n\n<p>By the way, MSVC <a href=\"https://godbolt.org/z/1orC3P\" rel=\"nofollow noreferrer\">tells you</a> (GodBolt):</p>\n\n<pre><code>&lt;source&gt;(14): note: see reference to class template instantiation 'foo&lt;int,int&gt;' being compiled\n</code></pre>\n\n<p>which is the right catch. For once, MSVC outshines the other compilers... :-P</p>\n\n<p><strong>edit:</strong> @aschepler notes that we <a href=\"https://godbolt.org/z/XQj-KM\" rel=\"nofollow noreferrer\">get</a> (GodBolt) the same behavior even without templates:</p>\n\n<pre><code>struct bar { static const bool value = !bar::value; };\n</code></pre>\n\n<p><strong>another edit</strong>:  It seems that until a few years ago this was sort-of valid code, due to \"language lawyer sophistry\". You see, the standard used to say (Section 6.6.2 [basic.start.static] paragraph 2):</p>\n\n<blockquote>\n  <p>Variables with static storage duration ...  shall be zero-initialized... before any other initialization takes place.</p>\n</blockquote>\n\n<p>and clang took that to mean that first you zero-initialize everything, then you consider the static-duration initializations - which means <code>bar::value</code> is implicitly <code>decltype(bar::value) { 0 }</code> before its own explicit initialization. This was <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#2026\" rel=\"nofollow noreferrer\">changed following Defect Report 2026</a>. </p>\n\n<p><sub>The credit for pointing this out goes to <a href=\"http://mailto:richard-llvm@metafoo.co.uk\" rel=\"nofollow noreferrer\">Richard Smith</a>.</sub></p>\n"}], "owner": {"reputation": 2055, "user_id": 10733631, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-z9f47Aj3ez4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-j0jfocyr5e1Wd0v4q8aluK_b7B5Q/mo/photo.jpg?sz=128", "display_name": "Dmytro Dadyka", "link": "https://stackoverflow.com/users/10733631/dmytro-dadyka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 55505326, "answer_count": 1, "score": 2, "last_activity_date": 1554405727, "creation_date": 1554330575, "last_edit_date": 1554334643, "question_id": 55505257, "link": "https://stackoverflow.com/questions/55505257/different-compilers-behavior-for-template-specialization", "title": "Different compilers behavior for template specialization", "body": "<p>I discovered different compilers behavior when trying to specialize a template. Here is the minimum code that illustrates the problem:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate&lt;typename A, typename B&gt;\nstruct foo {\n   static const bool value = false;\n};\n\ntemplate&lt;typename B&gt;\nstruct foo&lt;int, B&gt; {\n   static const bool value = !foo&lt;B, B&gt;::value;\n};\n\nint main() {\n   std::cout &lt;&lt; foo&lt;int, int&gt;::value &lt;&lt; std::endl;\n   return 0;\n}\n</code></pre>\n\n<p>I have general template with two parameters and specialized template for first <code>int</code> type parameter. When using the <a href=\"http://coliru.stacked-crooked.com/a/3c593d03872c4bb7\" rel=\"nofollow noreferrer\">g++</a> compiler I get </p>\n\n<pre><code>main.cpp: In instantiation of 'const bool foo&lt;int, int&gt;::value':\nmain.cpp:10:30:   recursively required from 'const bool foo&lt;int, int&gt;::value' \nmain.cpp:10:30:   required from 'const bool foo&lt;int, int&gt;::value'\nmain.cpp:14:32:   required from here \nmain.cpp:10:30: fatal error: template instantiation depth exceeds maximum of 900 (use -ftemplate-depth= to increase the maximum)\n    static const bool value = !foo&lt;B, B&gt;::value;\n</code></pre>\n\n<p>since compiler used <code>value</code> from specialized version and infinite recursion is obtained. I get </p>\n\n<pre><code>Error   C2131   expression did not evaluate to a constant\nError   C2065   'value': undeclared identifier  \n</code></pre>\n\n<p>for MSVC. But with <a href=\"http://coliru.stacked-crooked.com/a/cf061c1d16069b03\" rel=\"nofollow noreferrer\">clang</a> or zapcc, the code compiles without errors. What is the reason? What is the correct behavior in this case according to the standard or is the behavior undefined?  </p>\n"}, {"tags": ["c++", "overloading", "operator-keyword"], "answers": [{"comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1554330704, "post_id": 55505273, "comment_id": 97716411, "body": "You should specify what should be returned, i.e. <code>return *this;</code>"}, {"owner": {"reputation": 1717, "user_id": 8690361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a10e6bc70a207a4a458c76b04c08?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/8690361/steve"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1554331350, "post_id": 55505273, "comment_id": 97716619, "body": "@PaulMcKenzie Part of me wants to argue that the real answer is to check compiler warnings :)"}, {"owner": {"reputation": 43, "user_id": 4245196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b85880f34e00af1efdcae454af3c188?s=128&d=identicon&r=PG&f=1", "display_name": "Cloud Guy", "link": "https://stackoverflow.com/users/4245196/cloud-guy"}, "edited": false, "score": 0, "creation_date": 1554334119, "post_id": 55505273, "comment_id": 97717283, "body": "Thanks for all the answers. I should have checked that carefully. Unfortunately, compiler does not give any warning."}, {"owner": {"reputation": 1717, "user_id": 8690361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a10e6bc70a207a4a458c76b04c08?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/8690361/steve"}, "reply_to_user": {"reputation": 43, "user_id": 4245196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b85880f34e00af1efdcae454af3c188?s=128&d=identicon&r=PG&f=1", "display_name": "Cloud Guy", "link": "https://stackoverflow.com/users/4245196/cloud-guy"}, "edited": false, "score": 0, "creation_date": 1554378398, "post_id": 55505273, "comment_id": 97734979, "body": "@CloudGuy I don&#39;t have access to a Linux box right now (I&#39;m at work) but Visual Studio gives an error, and trying it in another online C++ compiler suggests that g++ would return a warning <a href=\"https://godbolt.org/z/P6wf4Q\" rel=\"nofollow noreferrer\">godbolt.org/z/P6wf4Q</a>"}], "tags": [], "owner": {"reputation": 1717, "user_id": 8690361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a10e6bc70a207a4a458c76b04c08?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/8690361/steve"}, "is_accepted": true, "score": 5, "last_activity_date": 1554331690, "last_edit_date": 1554331690, "creation_date": 1554330661, "answer_id": 55505273, "question_id": 55505226, "link": "https://stackoverflow.com/questions/55505226/simple-user-defined-class-with-operator-overloading-code-crashed/55505273#55505273", "title": "simple user defined class with operator = overloading code crashed", "body": "<p>The <code>operator=</code> method needs to return the assigned variable. As it is, it's not returning anything (although the signature says you will - you probably have a compiler warning about it), so the <code>nd = ...</code> bit is assigning an undefined value. You then try and call the <code>print</code> method on that undefined value.</p>\n\n<p>In this case, you want to return the assigned value, which is <code>*this</code>:</p>\n\n<pre><code>Node &amp;operator=(Node &amp;nd)\n{\n    d = nd.d;\n    return *this;\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4245196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b85880f34e00af1efdcae454af3c188?s=128&d=identicon&r=PG&f=1", "display_name": "Cloud Guy", "link": "https://stackoverflow.com/users/4245196/cloud-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 55505273, "answer_count": 1, "score": 0, "last_activity_date": 1554331690, "creation_date": 1554330395, "question_id": 55505226, "link": "https://stackoverflow.com/questions/55505226/simple-user-defined-class-with-operator-overloading-code-crashed", "title": "simple user defined class with operator = overloading code crashed", "body": "<p>I am testing a simple operator overloading code, when testing it, this piece of code just crashes (core dumped) at \"nd.print()\". Any suggestion?</p>\n\n<p>The crash happens on ubuntu 16.04 64 bit. When I tried on some of online shell environment, such as <a href=\"https://www.onlinegdb.com/online_c++_compiler\" rel=\"nofollow noreferrer\">https://www.onlinegdb.com/online_c++_compiler</a>, it seems ok.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass Node\n{\n    int d;\n    public:\n    Node (int dd = 0):d(dd){}\n    Node &amp;operator=(Node &amp;nd){ d = nd.d; }\n    void print(){ cout&lt;&lt;d&lt;&lt;endl; }\n};\n\nint main()\n{\n    Node nd1(1), nd2(2);\n    Node nd;\n    nd = nd2 = nd1;\n    nd.print();    //*******Crash here\n    return 0;\n}\n</code></pre>\n\n<p>I expect it just print a value without crashing.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 4, "creation_date": 1554330363, "post_id": 55505200, "comment_id": 97716294, "body": "You should read a decent C++ book, or some basic C++ tutorial on functions."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1554330434, "post_id": 55505200, "comment_id": 97716324, "body": "<code>k</code> used in the exit condition here <code>for (int i=0; i &lt; k; i++)</code> and <code>n</code> is one operand in a multiplication here:  <code>result *= n;</code>"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1554330439, "post_id": 55505200, "comment_id": 97716327, "body": "At least for me, it&#39;s hard to understand what exactly you don&#39;t understand. <i>&quot;I cant understand where n and k are used&quot;</i> - Right there, no? <code>for (int i=0; i &lt; k; i++) {result *= n;}</code>."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1554330813, "post_id": 55505200, "comment_id": 97716442, "body": "So your question is that you don&#39;t understand what a function parameter is?"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1554332160, "post_id": 55505200, "comment_id": 97716847, "body": "you don&#39;t understand the concept of a function and calling a function OR you don&#39;t understand the for loop?"}], "answers": [{"tags": [], "owner": {"reputation": 362, "user_id": 9739023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vCrP4.jpg?s=128&g=1", "display_name": "Wollzy", "link": "https://stackoverflow.com/users/9739023/wollzy"}, "is_accepted": true, "score": 1, "last_activity_date": 1554331435, "last_edit_date": 1554331435, "creation_date": 1554330470, "answer_id": 55505240, "question_id": 55505200, "link": "https://stackoverflow.com/questions/55505200/variable-definition-beginner-assist/55505240#55505240", "title": "Variable definition, beginner assist", "body": "<p><code>raiseToPower</code> is a function that returns a value.</p>\n\n<p><code>n</code> and <code>k</code> are integer parameters passed to the <code>raiseToPower</code> function.  Where <code>n</code> is being raised to <code>k</code>.  </p>\n\n<p>To do this the function just multiples <code>n</code> by itself <code>k</code> times by looping from 0 to <code>k</code>-1.  This is accomplished with the line </p>\n\n<pre><code>result *= n \n</code></pre>\n\n<p>which can also be written as</p>\n\n<pre><code>result = result * n.\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11308310"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 55505240, "answer_count": 1, "score": -3, "last_activity_date": 1554331435, "creation_date": 1554330208, "question_id": 55505200, "link": "https://stackoverflow.com/questions/55505200/variable-definition-beginner-assist", "title": "Variable definition, beginner assist", "body": "<p>Having trouble understanding what the integers n and k are used for in the raiseToPower function. Mostly when the function is defined. I understand how when it is called it pauses main function in a way, but how are the variables n and k a factor in it?</p>\n\n<p><pre></p>\n\n<code>#include &lt;iostream&gt;\nusing namespace std;\n#include \"simpio.h\"\n#include &lt;string&gt;\n\nint raiseToPower(int n, int k);\n//This created a variable called raiseToPower\n//It has 2 integers that it can call upon, n and k\n//This makes it possible for the function to be used without a definiton in the main\n\n\nint main(){\n//Indicates main is a integer\n\nint limit;\n\n//Limit is now a variable that can hold integers\n\ncout &lt;&lt; \"This program lists powers of two.\" &lt;&lt; endl;\n\n//Tell the user that this is what the program does\n\ncout &lt;&lt; \"Enter exponent limit: \";\n\n//No endl, so that the user can input something\n\ncin &gt;&gt; limit;\n\n//This lets the user input a integer, and store it in limit\n\nfor (int i = 0; i &lt;= limit; i++) {\n\n    //creates a for loop that will do the action till it completes its work\n\n    //While i = 0, and it is less then or equal to limit, add 1 to i\n\n        cout &lt;&lt; \"2 to the \" &lt;&lt; i &lt;&lt; \" = \" &lt;&lt; raiseToPower(2, i) &lt;&lt; endl;\n\n}\n\nreturn 0;\n\n}\n\nint raiseToPower(int n, int k) {\n//creates variablee result that holds a integers, and in this case 1\n\n    int result = 1;\n\n// a for loop so that the\n\n    for (int i=0; i &lt; k; i++) {\n\n       result *= n;\n\n}\n\nreturn result;\n}\n</code></pre>\n\n<p>Most of my problem is just in the above part right here. The function definition. I cant understand where n and k are used in here</p>\n"}, {"tags": ["c++", "vector", "iterator"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1554329045, "post_id": 55504984, "comment_id": 97715886, "body": "Can&#39;t you do <code>i-&gt;rect = mr;</code>?"}, {"owner": {"reputation": 121, "user_id": 9660447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37cc47a4c67d69237f3bae9fcbd69910?s=128&d=identicon&r=PG&f=1", "display_name": "mrRobot", "link": "https://stackoverflow.com/users/9660447/mrrobot"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1554329294, "post_id": 55504984, "comment_id": 97715970, "body": "I could but I also need to use <code>replace</code> or <code>remove</code> the object...and this error occurs for both...I mean there is a workaround as you suggested, but I am looking for solution how to fix it right way."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1554330840, "post_id": 55504984, "comment_id": 97716449, "body": "If you just want to change the <code>rect</code> member of the current <code>person</code> object inside the vector, and keep things in the same order, you don&#39;t need to do any removing or replacing. Just <code>i-&gt;rect = mr;</code> will do exactly that, because <code>*i</code> is the object in the vector, not a copy of it. If that&#39;s not what you want, please edit the post to more exactly describe what you&#39;re trying to accomplish."}, {"owner": {"reputation": 4728, "user_id": 1288408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r09bq.jpg?s=128&g=1", "display_name": "Modus Tollens", "link": "https://stackoverflow.com/users/1288408/modus-tollens"}, "edited": false, "score": 2, "creation_date": 1554332018, "post_id": 55504984, "comment_id": 97716795, "body": "@mrRobot I didn&#39;t downvote, but please take a look at <a href=\"https://meta.stackoverflow.com/q/357436/1288408\">Why isn&#39;t providing feedback mandatory on downvotes, and why are ideas suggesting such shot down?</a> Comments on downvotes are not mandatory for many reasons. It&#39;s not trollish behavior to leave no comment."}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 9660447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37cc47a4c67d69237f3bae9fcbd69910?s=128&d=identicon&r=PG&f=1", "display_name": "mrRobot", "link": "https://stackoverflow.com/users/9660447/mrrobot"}, "edited": false, "score": 0, "creation_date": 1554330384, "post_id": 55505209, "comment_id": 97716307, "body": "Doesn&#39;t my call to <code>replace</code> imply that I am comparing <code>person-&gt;rect</code> with <code>rect</code> ? Isn&#39;t this the same ?"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 121, "user_id": 9660447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37cc47a4c67d69237f3bae9fcbd69910?s=128&d=identicon&r=PG&f=1", "display_name": "mrRobot", "link": "https://stackoverflow.com/users/9660447/mrrobot"}, "edited": false, "score": 0, "creation_date": 1554330449, "post_id": 55505209, "comment_id": 97716330, "body": "No, it tries to compare <code>person</code> with <code>rect</code>, hence your difficulties, but knowing that should help you write your <code>operator==</code> function."}, {"owner": {"reputation": 121, "user_id": 9660447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37cc47a4c67d69237f3bae9fcbd69910?s=128&d=identicon&r=PG&f=1", "display_name": "mrRobot", "link": "https://stackoverflow.com/users/9660447/mrrobot"}, "edited": false, "score": 0, "creation_date": 1554330782, "post_id": 55505209, "comment_id": 97716429, "body": "And if I want to <code>erase</code> object where the iterator is pointing, how do I do it? Because I have tried it and I got same error."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 121, "user_id": 9660447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37cc47a4c67d69237f3bae9fcbd69910?s=128&d=identicon&r=PG&f=1", "display_name": "mrRobot", "link": "https://stackoverflow.com/users/9660447/mrrobot"}, "edited": false, "score": 0, "creation_date": 1554330904, "post_id": 55505209, "comment_id": 97716462, "body": "Please post that as a new question, showing your code.  Try and post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": true, "score": 1, "last_activity_date": 1554330248, "creation_date": 1554330248, "answer_id": 55505209, "question_id": 55504984, "link": "https://stackoverflow.com/questions/55504984/replace-object-in-vector-using-iterator/55505209#55505209", "title": "Replace object in vector using iterator", "body": "<p>If you want to compare an object of type <code>person</code> with an object of type <code>Rect</code> (which is what your call to <code>replace</code> implies), then you must provide an appropriate comparison operator to do so in your <code>Person</code> class, like this:</p>\n\n<pre><code>bool operator== (const Rect &amp;r) const { ... }\n</code></pre>\n\n<p>Similarly, you need an assignment operator with a signature (and probable implementation) like this:</p>\n\n<pre><code>person&amp; operator= (const Rect &amp;r) { rect = r; return *this; }\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/hCdB8aa4J5POD33z\" rel=\"nofollow noreferrer\">Simplified live demo</a></p>\n"}], "owner": {"reputation": 121, "user_id": 9660447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37cc47a4c67d69237f3bae9fcbd69910?s=128&d=identicon&r=PG&f=1", "display_name": "mrRobot", "link": "https://stackoverflow.com/users/9660447/mrrobot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 55505209, "answer_count": 1, "score": -1, "last_activity_date": 1554330248, "creation_date": 1554328881, "question_id": 55504984, "link": "https://stackoverflow.com/questions/55504984/replace-object-in-vector-using-iterator", "title": "Replace object in vector using iterator", "body": "<p>This is my object class:</p>\n\n<pre><code>class person\n{\npublic:\n\n    int id;\n    Rect rect;\n};\n</code></pre>\n\n<p>In main, I am iterating through vector of <code>persons</code> and when I find a match, I want to update <code>rect</code> to some new <code>rect</code> or even replace the entire new object <code>person</code>.</p>\n\n<pre><code>Rect mr = boundingRect(Mat(*itc));\nperson per;\nvector &lt;person&gt; persons;\nvector &lt;person&gt;::iterator i;\n\ni = persons.begin();\nwhile (i != persons.end()) {\n    if ((mr &amp; i-&gt;rect).area() &gt; 0) {\n        rectangle(frame, mr, CV_RGB(255, 0, 0));\n        putText(frame, std::to_string(i-&gt;id).c_str(), mr.br(),\n            FONT_HERSHEY_SIMPLEX, 0.5, cv::Scalar(0, 0, 255));\n\n        replace(persons.begin(), persons.end(), i-&gt;rect, mr); // this line causes error\n        break;\n    } else {\n      ...\n    }\n</code></pre>\n\n<p>The error I am getting at the line I marked by comment is:</p>\n\n<pre><code>Error   C2678   binary '==': no operator found which takes a left-hand operand of type 'person' (or there is no acceptable conversion)\n</code></pre>\n\n<p>and also this one:</p>\n\n<pre><code>Error   C2679   binary '=': no operator found which takes a right-hand operand of type 'const _Ty' (or there is no acceptable conversion)   \n</code></pre>\n\n<p>I have tried to <code>erase</code> the object and add a new one but I was still getting the same error. I have read <a href=\"https://stackoverflow.com/questions/27306086/c-remove-object-from-vector\">C++ Remove object from vector</a> but I am not sure if this is my problem and I am not using C++11 so these solutions don't work for me.</p>\n\n<p>Is it something with the iterator and my <code>person</code> object when they come to comparison? I think it is but no idea how to solve it.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1554328409, "post_id": 55504881, "comment_id": 97715680, "body": "Define &quot;need&quot; - both of those will construct <code>string</code> objects, what exact difference are you asking about?"}, {"owner": {"reputation": 4935, "user_id": 5482465, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/QHF0G.png?s=128&g=1", "display_name": "Money Sets You Free", "link": "https://stackoverflow.com/users/5482465/money-sets-you-free"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1554328435, "post_id": 55504881, "comment_id": 97715687, "body": "@UnholySheep: Yes, what is the difference?"}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 0, "creation_date": 1554328579, "post_id": 55504881, "comment_id": 97715736, "body": "@ArtificialHairlessArmpit What exactly do you mean by &quot;cache the names&quot;?"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1554328595, "post_id": 55504881, "comment_id": 97715742, "body": "If you want a reference to literal itself rather than to <code>std::string</code> object then you should write <code>auto const &amp; srcWnd{&quot;Source Window&quot;};</code>"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 2, "creation_date": 1554328862, "post_id": 55504881, "comment_id": 97715824, "body": "As far as you&#39;re concerned, those two lines are the same."}, {"owner": {"reputation": 4935, "user_id": 5482465, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/QHF0G.png?s=128&g=1", "display_name": "Money Sets You Free", "link": "https://stackoverflow.com/users/5482465/money-sets-you-free"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1554329014, "post_id": 55504881, "comment_id": 97715875, "body": "@MooingDuck: Does const reference avoid copying?"}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 0, "creation_date": 1554329021, "post_id": 55504881, "comment_id": 97715877, "body": "Probably similar question from earlier today: <a href=\"https://stackoverflow.com/questions/55498738/how-to-share-global-constants-with-minimum-overhead-at-runtime/55499098\" title=\"how to share global constants with minimum overhead at runtime\">stackoverflow.com/questions/55498738/&hellip;</a>"}, {"owner": {"reputation": 4935, "user_id": 5482465, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/QHF0G.png?s=128&g=1", "display_name": "Money Sets You Free", "link": "https://stackoverflow.com/users/5482465/money-sets-you-free"}, "reply_to_user": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 0, "creation_date": 1554329173, "post_id": 55504881, "comment_id": 97715934, "body": "@MichaelKenzel:Thank you, it is helpful!"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1554329180, "post_id": 55504881, "comment_id": 97715937, "body": "If you are constructing <code>std::string</code> class instance then content of array baking string literal will be always copied."}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 1, "creation_date": 1554329255, "post_id": 55504881, "comment_id": 97715962, "body": "Given that we&#39;re talking about window names here, do these really have to be <code>std::string</code> (assuming that <code>string</code> up there is <code>std::string</code>)? Because if you&#39;re concerned about efficiency/avoiding copying then the first thing you&#39;ll probably wanna do is not have it be an <code>std::string</code>\u2026"}, {"owner": {"reputation": 4935, "user_id": 5482465, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/QHF0G.png?s=128&g=1", "display_name": "Money Sets You Free", "link": "https://stackoverflow.com/users/5482465/money-sets-you-free"}, "reply_to_user": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 0, "creation_date": 1554329533, "post_id": 55504881, "comment_id": 97716049, "body": "@MichaelKenzel: The names are of type <code>std:string</code>."}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 1, "creation_date": 1554329810, "post_id": 55504881, "comment_id": 97716134, "body": "@ArtificialHairlessArmpit ok, then probably just go with the <code>const std::string</code> approach as suggested in the answer below. Just be aware that a global <code>std::string</code> will almost necessarily mean that you&#39;re copying the string from a string literal object into the buffer owned by the <code>std::string</code> at load time. If the names are expected to be <code>std::string</code> that&#39;s most likely just fine anyways\u2026"}], "answers": [{"tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": true, "score": 2, "last_activity_date": 1554329105, "creation_date": 1554329105, "answer_id": 55505017, "question_id": 55504881, "link": "https://stackoverflow.com/questions/55504881/declaring-a-constant-literal-string-with-const-reference-versus-const-variable/55505017#55505017", "title": "Declaring a constant literal string with const reference versus const variable", "body": "<p>I don't see any significant difference between the two, but I suggest using the plain <code>string</code> (option 2):</p>\n\n<pre><code>const string srcWnd = \"Source Window\";\n</code></pre>\n\n<p>You don't win anything by using a reference. And if you use a reference, the code becomes more obscure, because by using a reference you rely on <a href=\"https://en.cppreference.com/w/cpp/language/reference_initialization#Lifetime_of_a_temporary\" rel=\"nofollow noreferrer\">temporary lifetime extension</a>. If someone doesn't remember lifetime extension rules clearly, they might need to look them up just to be sure that the code is valid.</p>\n"}], "owner": {"reputation": 4935, "user_id": 5482465, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/QHF0G.png?s=128&g=1", "display_name": "Money Sets You Free", "link": "https://stackoverflow.com/users/5482465/money-sets-you-free"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 55505017, "answer_count": 1, "score": 0, "last_activity_date": 1554329105, "creation_date": 1554328311, "last_edit_date": 1554328792, "question_id": 55504881, "link": "https://stackoverflow.com/questions/55504881/declaring-a-constant-literal-string-with-const-reference-versus-const-variable", "title": "Declaring a constant literal string with const reference versus const variable", "body": "<p>I have to name windows with constant literal strings. The names will be  referenced everywhere so I need to cache them with variables. My question is</p>\n\n<p>Do I need to declare the variables as const references as follows</p>\n\n<pre><code>const string&amp; srcWnd = \"Source Window\";\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>const string srcWnd = \"Source Window\";\n</code></pre>\n\n<p>?</p>\n\n<p>Is there any difference?</p>\n"}, {"tags": ["c++", "winapi", "console-application", "cin"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1554328948, "post_id": 55504728, "comment_id": 97715848, "body": "Look at <a href=\"https://en.cppreference.com/w/cpp/io/basic_istream/ignore\" rel=\"nofollow noreferrer\"><code>std::cin.ignore()</code></a>."}, {"owner": {"reputation": 135, "user_id": 7281468, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JCfThOSj9Uo/AAAAAAAAAAI/AAAAAAAAAHo/YDkpSbprKXA/photo.jpg?sz=128", "display_name": "Nyck", "link": "https://stackoverflow.com/users/7281468/nyck"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1554330011, "post_id": 55504728, "comment_id": 97716193, "body": "I sure did look into it. Just doesn&#39;t work as expected, at least not for me, in this situation. If anything, could you tell me exactly how to implement it and how it should work? An &#39;e&#39; is still shown in the console for me."}, {"owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "edited": false, "score": 0, "creation_date": 1554366687, "post_id": 55504728, "comment_id": 97727624, "body": "GetAsyncKeyState is not the correct way to read input in a console application."}], "answers": [{"tags": [], "owner": {"reputation": 135, "user_id": 7281468, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JCfThOSj9Uo/AAAAAAAAAAI/AAAAAAAAAHo/YDkpSbprKXA/photo.jpg?sz=128", "display_name": "Nyck", "link": "https://stackoverflow.com/users/7281468/nyck"}, "is_accepted": false, "score": 0, "last_activity_date": 1554330928, "creation_date": 1554330928, "answer_id": 55505331, "question_id": 55504728, "link": "https://stackoverflow.com/questions/55504728/clear-user-input-on-console-before-enter-is-pressed/55505331#55505331", "title": "Clear user input on console before enter is pressed", "body": "<p>I found the answer to my problem.</p>\n\n<p>The standard library does not allow a way to do this, as its only designed for basic I/O.</p>\n\n<p>But since I'm already using the WinAPI, there's a way to flush the input buffer:\n<code>FlushConsoleInputBuffer(GetStdHandle(STD_INPUT_HANDLE));</code></p>\n\n<p>Original answer to a similar question: <a href=\"http://www.cplusplus.com/forum/general/159796/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/forum/general/159796/</a></p>\n"}], "owner": {"reputation": 135, "user_id": 7281468, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JCfThOSj9Uo/AAAAAAAAAAI/AAAAAAAAAHo/YDkpSbprKXA/photo.jpg?sz=128", "display_name": "Nyck", "link": "https://stackoverflow.com/users/7281468/nyck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554330928, "creation_date": 1554327669, "last_edit_date": 1554327925, "question_id": 55504728, "link": "https://stackoverflow.com/questions/55504728/clear-user-input-on-console-before-enter-is-pressed", "title": "Clear user input on console before enter is pressed", "body": "<p>I'm trying to program a console game, and the player is supposed to be able to open chests. To do this the user needs to press 'E' while facing a chest (not really important to the question, just giving context) and then a menu appears, asking for input with cin.</p>\n\n<p>So, I use GetAsyncKeyState('E') to detect the 'E' key press. Everything goes as planned, it triggers when 'E' is pressed and the \"inventory menu\" is opened. The problem is that now the user wrote an 'e' (or multiple) to the console already.\nI want this not to happen, as the user will have to backspace in order to enter the desired input.</p>\n\n<pre><code>if(GetAsyncKeyState('E')){\n    int choice;\n\n    cout &lt;&lt; \"Inventory Menu\" &lt;&lt; endl;\n    cout &lt;&lt; \"1 - Take item\" &lt;&lt; endl;\n    cout &lt;&lt; \"2 - Store item\" &lt;&lt; endl;\n    cin &gt;&gt; choice; //there's already an 'e' on the console\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1717, "user_id": 8690361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a10e6bc70a207a4a458c76b04c08?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/8690361/steve"}, "edited": false, "score": 3, "creation_date": 1554327526, "post_id": 55504683, "comment_id": 97715357, "body": "The class needs a <code>;</code> after the terminating <code>}</code> . There&#39;s also one missing after the <code>x=1</code>."}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 5, "creation_date": 1554327570, "post_id": 55504683, "comment_id": 97715375, "body": "C++ is not Java. <code>Graph g(10);</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1554327736, "post_id": 55504683, "comment_id": 97715441, "body": "<code>x</code> is undeclared. That&#39;s a no no in C++. What exactly is it placeholding?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1554327764, "post_id": 55504683, "comment_id": 97715444, "body": "What errors are you asking about specifically?"}, {"owner": {"reputation": 362, "user_id": 9739023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vCrP4.jpg?s=128&g=1", "display_name": "Wollzy", "link": "https://stackoverflow.com/users/9739023/wollzy"}, "edited": false, "score": 0, "creation_date": 1554327829, "post_id": 55504683, "comment_id": 97715467, "body": "Try to better describe what you are trying to do.  Why are you passing a 10 into graph and what does it represent?    It seems you are trying to create a graph class but have it execute like a function.  Is there a particular reason you need it to be an object?  Also is the Graph in public supposed to be a function?  If so you need to determine a return type or void."}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "reply_to_user": {"reputation": 362, "user_id": 9739023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vCrP4.jpg?s=128&g=1", "display_name": "Wollzy", "link": "https://stackoverflow.com/users/9739023/wollzy"}, "edited": false, "score": 0, "creation_date": 1554328056, "post_id": 55504683, "comment_id": 97715556, "body": "@Wollzy the <code>Graph(int n);</code> and <code>Graph::Graph(int n)</code> is a constructor, it doesn&#39;t need a return type."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "reply_to_user": {"reputation": 1717, "user_id": 8690361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a10e6bc70a207a4a458c76b04c08?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/8690361/steve"}, "edited": false, "score": 0, "creation_date": 1554328067, "post_id": 55504683, "comment_id": 97715562, "body": "<b><i>What errors are you asking about specifically?</i></b> In this case there are 2 errors marked as comments in the code. I am sure @Steve has the reason. This question probably should be closed as a typo. or even a duplicate."}], "answers": [{"comments": [{"owner": {"reputation": 1717, "user_id": 8690361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a10e6bc70a207a4a458c76b04c08?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/8690361/steve"}, "edited": false, "score": 2, "creation_date": 1554328467, "post_id": 55504889, "comment_id": 97715699, "body": "You don&#39;t <i>need</i> to define the entire constructor inside the class, you only need to declare it (although you certainly <i>can</i> do)"}, {"owner": {"reputation": 362, "user_id": 9739023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vCrP4.jpg?s=128&g=1", "display_name": "Wollzy", "link": "https://stackoverflow.com/users/9739023/wollzy"}, "reply_to_user": {"reputation": 1717, "user_id": 8690361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a10e6bc70a207a4a458c76b04c08?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/8690361/steve"}, "edited": false, "score": 0, "creation_date": 1554328515, "post_id": 55504889, "comment_id": 97715717, "body": "@Steve true.  Figured for such a small constructor is would make the code more readable"}, {"owner": {"reputation": 1717, "user_id": 8690361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a10e6bc70a207a4a458c76b04c08?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/8690361/steve"}, "edited": false, "score": 2, "creation_date": 1554328618, "post_id": 55504889, "comment_id": 97715755, "body": "But there was nothing wrong with that part of the code in the question, and your statement is misleading. By all means suggest that small methods be defined inside the class, just don&#39;t tell him that he must do it :)"}, {"owner": {"reputation": 362, "user_id": 9739023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vCrP4.jpg?s=128&g=1", "display_name": "Wollzy", "link": "https://stackoverflow.com/users/9739023/wollzy"}, "reply_to_user": {"reputation": 1717, "user_id": 8690361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a10e6bc70a207a4a458c76b04c08?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/8690361/steve"}, "edited": false, "score": 0, "creation_date": 1554328775, "post_id": 55504889, "comment_id": 97715801, "body": "@Steve I&#39;m an idiot.  i missed your comment above about the missing semicolon he had.  I assumed the issue was the way he declared his constructor.  My mistake.  Edited my answer."}], "tags": [], "owner": {"reputation": 362, "user_id": 9739023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vCrP4.jpg?s=128&g=1", "display_name": "Wollzy", "link": "https://stackoverflow.com/users/9739023/wollzy"}, "is_accepted": false, "score": 0, "last_activity_date": 1554328734, "last_edit_date": 1554328734, "creation_date": 1554328359, "answer_id": 55504889, "question_id": 55504683, "link": "https://stackoverflow.com/questions/55504683/errors-when-attempting-to-create-an-object-with-a-constructor/55504889#55504889", "title": "Errors when attempting to create an object with a constructor", "body": "<pre><code>\n#include &lt;iostream&gt;\n#include &lt;list&gt;\n#include &lt;vector&gt;\n\nclass Graph {                  \n    public:\n        Graph(int n);\n    private:\n        std::vector&lt;std::list&lt;int&gt; &gt; Connections;\n};\n\nGraph::Graph(int n) {     \n    for(int i = 0; i &lt; n+1; i++){\n         int x=1; \n    };\n};\n\nint main(){\n   Graph *g = new Graph(10);\n};\n</code></pre>\n\n<p>If this is too cluttered use header files.</p>\n\n<p>Also when allocating a new object you need to use a pointer as you are dynamically allocating with new.</p>\n\n<p>Also you were missing semicolons per @Steve comment</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11308174"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 581, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554328734, "creation_date": 1554327487, "question_id": 55504683, "link": "https://stackoverflow.com/questions/55504683/errors-when-attempting-to-create-an-object-with-a-constructor", "title": "Errors when attempting to create an object with a constructor", "body": "<p>I'm new to object orientated programming in c++ and have been trying to create an object for a graph problem. I have googled the errors in the situation they occur to no avail - mainly results about constant functions. My code is below and I have written the errors as inline comments where they appear</p>\n\n<p><pre></p>\n\n<code>#include &lt;iostream&gt;\n#include &lt;list&gt;\n#include &lt;vector&gt;\n\nclass Graph {                   //'Graph' cannot be defined in the result type of a function\n    public:\n        Graph(int n);\n    private:\n        std::vector&lt;std::list&lt;int&gt; &gt; Connections;\n}\n\nGraph::Graph(int n) {           //constructor cannot have a return type\n    for(int i = 0; i &lt; n+1; i++){\n         x=1 //placeholder, intended to fill vectors with linked lists\n    }\n}\n\nGraph g = new Graph(10);\n</code></pre>\n\n<p>I am not quite sure why any of these problems occur and would be extremely grateful for any help. Thanks in advance.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1554328197, "post_id": 55504681, "comment_id": 97715603, "body": "<i>If the user does not enter a name, say they enter a value instead</i> It&#39;s not clear to me what you mean by that. I don&#39;t see any code that tests that. What do you mean by &quot;value&quot; and how is that different than a &quot;name&quot;?"}, {"owner": {"reputation": 3, "user_id": 10593603, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214570075178000/picture?type=large", "display_name": "Imran Juma", "link": "https://stackoverflow.com/users/10593603/imran-juma"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1554329599, "post_id": 55504681, "comment_id": 97716074, "body": "I have not written that part yet, I was looking ti dix the top first"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1554329620, "post_id": 55504681, "comment_id": 97716075, "body": "If the user simply hits the ENTER key, <code>name</code> will not contain a space character.    Your code will only prompt the user again if the user enters a space character followed by the enter key.   There is no test in your code to (say) check if the user has entered digits."}, {"owner": {"reputation": 3, "user_id": 10593603, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214570075178000/picture?type=large", "display_name": "Imran Juma", "link": "https://stackoverflow.com/users/10593603/imran-juma"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1554330719, "post_id": 55504681, "comment_id": 97716416, "body": "I think I fixed it @Peter, However stack doesn&#39;t me insert code.. how do I insert into the comment?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1554337128, "post_id": 55504681, "comment_id": 97717979, "body": "@ImranJuma don&#39;t put the code in a comment, <a href=\"https://stackoverflow.com/posts/55504681/edit\">edit</a> your question instead."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10593603, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214570075178000/picture?type=large", "display_name": "Imran Juma", "link": "https://stackoverflow.com/users/10593603/imran-juma"}, "edited": false, "score": 0, "creation_date": 1554329562, "post_id": 55504811, "comment_id": 97716061, "body": "Break means to end the loop right? Like it exits the loop?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 3, "user_id": 10593603, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214570075178000/picture?type=large", "display_name": "Imran Juma", "link": "https://stackoverflow.com/users/10593603/imran-juma"}, "edited": false, "score": 0, "creation_date": 1554337054, "post_id": 55504811, "comment_id": 97717964, "body": "@ImranJuma yes."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "is_accepted": false, "score": 1, "last_activity_date": 1554328058, "creation_date": 1554328058, "answer_id": 55504811, "question_id": 55504681, "link": "https://stackoverflow.com/questions/55504681/while-loop-exits-too-soon-when-executing-name-input/55504811#55504811", "title": "While loop exits too soon when executing name input", "body": "<p><a href=\"https://www.tutorialspoint.com/cprogramming/c_break_statement.htm\" rel=\"nofollow noreferrer\">Break</a> is causing your loop to end. You either mean <a href=\"https://en.cppreference.com/w/cpp/language/continue\" rel=\"nofollow noreferrer\">continue</a>, or don't need a break there at all.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 10593603, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214570075178000/picture?type=large", "display_name": "Imran Juma", "link": "https://stackoverflow.com/users/10593603/imran-juma"}, "edited": false, "score": 0, "creation_date": 1554329727, "post_id": 55504939, "comment_id": 97716115, "body": "I see what you mean, is there anyway I can do this all within the main function and edit my existing code?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 3, "user_id": 10593603, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214570075178000/picture?type=large", "display_name": "Imran Juma", "link": "https://stackoverflow.com/users/10593603/imran-juma"}, "edited": false, "score": 0, "creation_date": 1554329828, "post_id": 55504939, "comment_id": 97716139, "body": "@ImranJuma, of course there is but it is not as clean as doing that in a different function."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1554328656, "creation_date": 1554328656, "answer_id": 55504939, "question_id": 55504681, "link": "https://stackoverflow.com/questions/55504681/while-loop-exits-too-soon-when-executing-name-input/55504939#55504939", "title": "While loop exits too soon when executing name input", "body": "<p>My suggestion for clearer code:</p>\n\n<ol>\n<li><p>Move all the logic for checking whether a name is valid to its own function.</p>\n\n<pre><code>bool isValidName(std::string const&amp; name)\n{\n   // Do all the validation tests and return true if name is valid.\n   // Return false otherwise.\n}\n</code></pre></li>\n<li><p>Change the <code>while</code> loop to:</p>\n\n<pre><code>while ( getline(cin,name) )\n{\n   if ( name == \"Done\" )\n   {\n      break;\n   }\n\n   if ( isValidName(name) )\n   {\n      break;\n   }\n\n   // Ask for name again.\n   cout &lt;&lt; \"\\nPlease Enter Your Name: \" &lt;&lt; endl;\n}\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 3, "user_id": 10593603, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214570075178000/picture?type=large", "display_name": "Imran Juma", "link": "https://stackoverflow.com/users/10593603/imran-juma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 55504939, "answer_count": 2, "score": 0, "last_activity_date": 1554328656, "creation_date": 1554327477, "question_id": 55504681, "link": "https://stackoverflow.com/questions/55504681/while-loop-exits-too-soon-when-executing-name-input", "title": "While loop exits too soon when executing name input", "body": "<p>I am learning C++ and I am trying to create a while loop for the user to enter their name. When their name is entered I am using a while loop for check if the name entered is real <em>Using String For This</em>. If the user does not enter a name, say they enter a value instead, then the while loop will prompt the user to enter the name again. Likewise, printing the name again at the bottom to confirm with the user, if the name was correctly inputed.</p>\n\n<pre class=\"lang-C++ prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n// g++ -std=c++14 -Wall main.cc -o main\n\nint main() {\n\n  string name;\n  cout &lt;&lt; \"Please Enter Your Name: \" &lt;&lt; endl;\n\n\n  while (name.compare (\"Done\") != 0) {\n    getline(cin,name);\n    if (name == \" \") {\n      cin.clear();\n      cout &lt;&lt; \"\\nPlease Enter Your Name: \" &lt;&lt; endl;\n    } else break;\n  }\n\n  return 0;\n\n  cout &lt;&lt; \"Is Your Name\" &lt;&lt; name &lt;&lt; \"?\" &lt;&lt; endl;\n  // Ask Verification Here\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "tensorflow", "visual-c++"], "answers": [{"comments": [{"owner": {"reputation": 641, "user_id": 3029238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/628491e432c884bf85c8072d9a579c36?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/3029238/dmitry"}, "edited": false, "score": 0, "creation_date": 1554327771, "post_id": 55504702, "comment_id": 97715449, "body": "WOW, that&#39;s nice! The only problem Google guys only officially support VS 2015, gonna be not that easy to compile with 2019, but anyway thank you so much!"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 641, "user_id": 3029238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/628491e432c884bf85c8072d9a579c36?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/3029238/dmitry"}, "edited": false, "score": 0, "creation_date": 1554327877, "post_id": 55504702, "comment_id": 97715492, "body": "@Dmitry I think it still supports old toolsets."}, {"owner": {"reputation": 641, "user_id": 3029238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/628491e432c884bf85c8072d9a579c36?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/3029238/dmitry"}, "edited": false, "score": 0, "creation_date": 1554327991, "post_id": 55504702, "comment_id": 97715527, "body": "Ohhh I see. Nope, my issue is not how to load large PDB file but rather how to create the one. There is known issue with Microsoft linker, it does use 4KB page size for PDB files and as result can not create file more than 4GB in size."}], "tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": false, "score": 1, "last_activity_date": 1554327567, "creation_date": 1554327567, "answer_id": 55504702, "question_id": 55504580, "link": "https://stackoverflow.com/questions/55504580/how-to-debug-tensorflow-on-windows/55504702#55504702", "title": "How to debug Tensorflow on Windows", "body": "<p>From <a href=\"https://docs.microsoft.com/en-us/visualstudio/releases/2019/release-notes#debugger\" rel=\"nofollow noreferrer\">VS 2019 release notes</a>:</p>\n\n<blockquote>\n  <p>For C++ applications running on Windows, PDB now load in a separate 64-bit process. This change addresses a range of crashes caused by the debugger running out of memory when debugging applications that contain a large number of modules and PDBs.</p>\n</blockquote>\n\n<p>So I guess that 4Gb limit should not be an issue anymore.</p>\n"}], "owner": {"reputation": 641, "user_id": 3029238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/628491e432c884bf85c8072d9a579c36?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/3029238/dmitry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554327868, "creation_date": 1554326960, "last_edit_date": 1554327868, "question_id": 55504580, "link": "https://stackoverflow.com/questions/55504580/how-to-debug-tensorflow-on-windows", "title": "How to debug Tensorflow on Windows", "body": "<p>What is the common way to debug Tensorflow on Windows (Tensorflow itself, C++ code)? MSVC has 4GB limit for .pdb file which makes it impossible to build debug version. \nIs there any way I can debug custom TF core code? </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 1, "creation_date": 1554327107, "post_id": 55504534, "comment_id": 97715215, "body": "Please don&#39;t split up your code into a bunch of one liners.   Put it all together in something that would compile except for the part specific to your question and then cobble together a line showing what you&#39;d like to do."}, {"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 3, "creation_date": 1554327162, "post_id": 55504534, "comment_id": 97715232, "body": "(Off-topic) Use <code>A-&gt;someFunction()</code> instead of <code>(*A).someFunction()</code>. The <code>-&gt;</code> operator  was invented just for that purpose :-)"}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "reply_to_user": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1554327214, "post_id": 55504534, "comment_id": 97715251, "body": "@NikosC. somewhat funnily, he&#39;ll probably need to use both at the same time soon.. <code>-&gt;*</code>"}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1554327308, "post_id": 55504534, "comment_id": 97715287, "body": "<a href=\"https://stackoverflow.com/questions/51245152/how-to-pass-member-function-as-a-parameter\" title=\"how to pass member function as a parameter\">stackoverflow.com/questions/51245152/&hellip;</a>"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1554327315, "post_id": 55504534, "comment_id": 97715290, "body": "You might be looking for <code>std::mem_fn</code>: <a href=\"https://en.cppreference.com/w/cpp/utility/functional/mem_fn\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/functional/mem_fn</a>"}], "answers": [{"tags": [], "owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "is_accepted": false, "score": 0, "last_activity_date": 1554330887, "creation_date": 1554330887, "answer_id": 55505328, "question_id": 55504534, "link": "https://stackoverflow.com/questions/55504534/how-to-pass-a-member-function-to-another-function/55505328#55505328", "title": "How to pass a member function to another function?", "body": "<blockquote>\n  <p>What I want to do is generalize this part of the function out</p>\n</blockquote>\n\n<p>You can do this with <em><a href=\"https://en.cppreference.com/w/cpp/language/pointer#Pointers_to_member_functions\" rel=\"nofollow noreferrer\">pointer to member function</a></em>:</p>\n\n<pre><code>float addXPercent (float percent, ExampleClass* A, ExampleClass B, float (ExampleClass::*someFunction)()) {\n  return (percent * (B.*someFunction)() + (A-&gt;*someFunction)());\n}\n</code></pre>\n\n<p>You can call <code>addXPercent</code> like this:</p>\n\n<pre><code>ExampleClass a, b;\n\naddXPercent(0.3f, &amp;a, b, &amp;ExampleClass::thisFunction);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 221, "user_id": 4462211, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Mhwob94WuI8/AAAAAAAAAAI/AAAAAAAAAAA/WjhOO9wBZC8/photo.jpg?sz=128", "display_name": "Pelayo M&#233;ndez", "link": "https://stackoverflow.com/users/4462211/pelayo-m%c3%a9ndez"}, "is_accepted": false, "score": 0, "last_activity_date": 1554338317, "last_edit_date": 1554338317, "creation_date": 1554337478, "answer_id": 55506114, "question_id": 55504534, "link": "https://stackoverflow.com/questions/55504534/how-to-pass-a-member-function-to-another-function/55506114#55506114", "title": "How to pass a member function to another function?", "body": "<p>I'm not sure I fully understand your intentions. As far as I know passing functions as parameters can be archived with function pointers, Functors or Lambdas in c++11. For example bellow there's some approach using functors that maybe you'll find useful.</p>\n\n<pre><code>class ExampleClass \n{\n    float something;\n\n    public:\n\n    void setSomething(float val)\n    {\n        something = val;\n    }\n\n    struct ThisFunction \n    {\n      float operator()(ExampleClass &amp;example) {\n        // Do whatever you need here\n        float result = 2.0;\n        return result;\n      }\n    };\n\n};\n\n\n\nfloat addXPercent (float percent, ExampleClass *A, ExampleClass B, ExampleClass::ThisFunction &amp;thisFunction) {\n  return ((percent * thisFunction(B)) + thisFunction((*A)));\n}\n\nint main() \n{\n    ExampleClass A;\n    ExampleClass B;\n\n    ExampleClass::ThisFunction thisFunction;\n\n    A.setSomething(addXPercent (0.3, &amp;A, B, thisFunction));\n};\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11308127"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1554338317, "creation_date": 1554326730, "last_edit_date": 1554327415, "question_id": 55504534, "link": "https://stackoverflow.com/questions/55504534/how-to-pass-a-member-function-to-another-function", "title": "How to pass a member function to another function?", "body": "<p>I have a function</p>\n\n<pre><code>float addXPercent (float percent, ExampleClass* A, ExampleClass B, thisFunction) {\n  return (percent * B.thisFunction() + (*A).thisFunction());\n}\n</code></pre>\n\n<p>and <code>someFunction</code> is a function that can be applied to both <code>A</code> and <code>B</code> like this</p>\n\n<pre><code>(*A).setSomething(0.4 * B.someFunction() + (*A).someFunction());\n</code></pre>\n\n<p>It takes a <code>percent</code> value like <code>0.4</code>, applies it to the result of <code>B.someFunction()</code> and adds that value to the current value of <code>A.someFunction()</code>.</p>\n\n<p>What I want to do is generalize this part of the function out:</p>\n\n<pre><code>0.4 * B.someFunction() + (*A).someFunction()\n</code></pre>\n\n<p>into that <code>addXPercent</code> function. The result I expect to look something like this</p>\n\n<pre><code>(*A).setSomething( addXPercent (0.3, *A, B, thisFunction) );\n</code></pre>\n\n<p>I'm quite new to C++ so I did some googling and found out you can pass function to different function with the std header <code>&lt;functional&gt;</code>.</p>\n\n<p>But I'm not sure how I'll pass a member function with syntax like this <code>function&lt; void () &gt; thisFunction</code>.</p>\n\n<p>How should I go about doing that?</p>\n\n<p>I wasn't able to find a related thread 1 2 (got <code>Sorry, there were no post results for \u201c\u201d</code>) so sorry if this is a duplicate question.</p>\n"}, {"tags": ["c++", "formatting", "fstream", "iostream"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 7, "creation_date": 1554326305, "post_id": 55504398, "comment_id": 97714951, "body": "You&#39;re not printing the same thing, so why would you expect them to produce the same result? You&#39;re writing a lot of <code>endl</code>s into fout but not cout."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 2, "creation_date": 1554326323, "post_id": 55504398, "comment_id": 97714958, "body": "You are using <code>fout &lt;&lt; &#39;*&#39; &lt;&lt; endl;</code> when the corresponding console output is <code>cout &lt;&lt; &#39;*&#39;;</code> - those two are not the same"}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 1, "creation_date": 1554326351, "post_id": 55504398, "comment_id": 97714976, "body": "Why are you simultaneously outputting different things to the standard output and to the file? Your logic is hard to follow. To simplify things, why don&#39;t you write everything to a <code>std::stringstream</code>, whose contents you can then print to the standard output or a file, without repeating yourself?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 5, "creation_date": 1554326369, "post_id": 55504398, "comment_id": 97714981, "body": "I&#39;d recommend you extract and consoldidate  your <i>&quot;business logic&quot;</i> to a function that takes a <code>std::ostream&amp;</code> as a parameter, and call it either with <code>std::cout</code> or a <code>std::ofstream&amp;</code> instance."}, {"owner": {"reputation": 1731, "user_id": 8813179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d2805921ad889a0371d566a75d5f7d4?s=128&d=identicon&r=PG&f=1", "display_name": "ABC", "link": "https://stackoverflow.com/users/8813179/abc"}, "reply_to_user": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 0, "creation_date": 1554326519, "post_id": 55504398, "comment_id": 97715029, "body": "I appreciate the help, I did not notice that. Was able to fix with your guys help and @John Kugelman"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1554326644, "post_id": 55504398, "comment_id": 97715061, "body": "The comment by @\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 is exactly how this problem should be solved.  Create a function that takes a <code>std::ostream&amp;</code>, write the code to that <code>ostream</code>, and simply pass the stream type as a parameter."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1554326894, "post_id": 55504398, "comment_id": 97715142, "body": "@Raymond <i>&quot;May I ask what the close (2) means under my thread, and why someone would click that? I am unfamiliar with what that is.&quot;</i> That means that two people voted to close your question so far. Me was one of them, because you missed to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and any debugging efforts with your question."}, {"owner": {"reputation": 1731, "user_id": 8813179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d2805921ad889a0371d566a75d5f7d4?s=128&d=identicon&r=PG&f=1", "display_name": "ABC", "link": "https://stackoverflow.com/users/8813179/abc"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1554326942, "post_id": 55504398, "comment_id": 97715158, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Sorry to upset you. Will remember that."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1554327025, "post_id": 55504398, "comment_id": 97715193, "body": "@Raymond I am not <i>upset</i>. We&#39;re all just humans and prone to erroneous behavior."}], "answers": [{"tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": false, "score": 2, "last_activity_date": 1554326488, "last_edit_date": 1554326488, "creation_date": 1554326340, "answer_id": 55504446, "question_id": 55504398, "link": "https://stackoverflow.com/questions/55504398/c-star-diamond-pattern-written-to-output-file-becomes-jumbled/55504446#55504446", "title": "C++ Star diamond pattern written to output file becomes jumbled", "body": "<p>Your <code>cout</code> and <code>fout</code> lines should always come in pairs and should always be identical. </p>\n\n<pre><code>// Output to console a single *\ncout &lt;&lt; '*';\nfout &lt;&lt; '*' &lt;&lt; endl;\n</code></pre>\n\n<p>Get rid of the <code>&lt;&lt; endl</code>. This occurs in two places.</p>\n\n<pre><code>// Before for loop ends output end of line\ncout &lt;&lt; endl;\n</code></pre>\n\n<p>Add <code>fout &lt;&lt; endl;</code>. This also occurs twice.</p>\n"}, {"comments": [{"owner": {"reputation": 1731, "user_id": 8813179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d2805921ad889a0371d566a75d5f7d4?s=128&d=identicon&r=PG&f=1", "display_name": "ABC", "link": "https://stackoverflow.com/users/8813179/abc"}, "edited": false, "score": 0, "creation_date": 1554328490, "post_id": 55504806, "comment_id": 97715711, "body": "Thank you so much for this, it is so nice of you to do this. Because literally, I was just building the method you suggested and had just started understanding it. And it feels good to know mine is exactly how you did yours. So I am actually learning."}], "tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": true, "score": 3, "last_activity_date": 1554330278, "last_edit_date": 1554330278, "creation_date": 1554328046, "answer_id": 55504806, "question_id": 55504398, "link": "https://stackoverflow.com/questions/55504398/c-star-diamond-pattern-written-to-output-file-becomes-jumbled/55504806#55504806", "title": "C++ Star diamond pattern written to output file becomes jumbled", "body": "<p>The practical solution is to take what works and generalize it.  What works is the output generated by <code>std::cout</code>, thus all that is required is to write a function that takes a stream and does exactly what <code>std::cout</code> is doing.  </p>\n\n<p>The way to do that is to realize that <code>std::ostream</code> is the base class for the output streams, thus all that is needed is to use polymorphism and write a function that takes a reference to a <code>std::ostream</code>.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;ostream&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;cassert&gt;\n\nusing namespace std;\n\nvoid pyramid(int rows, std::ostream&amp; );\n\nint main() \n{\n    // use regular cout\n    std::cout &lt;&lt; \"Using cout \\n\\n\";\n    pyramid(8, std::cout);\n\n    // try file printing\n    std::ofstream fout;\n    fout.open(\"output_diamond.txt\");\n    pyramid(8, fout);\n\n    // try printing to a string stream\n    std::cout &lt;&lt; \"\\n\\nUsing ostringstream \\n\\n\";\n    std::ostringstream ostrm;\n    pyramid(8, ostrm);\n    std::cout &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; ostrm.str();\n    return 0;\n}\n\nvoid pyramid(int rows, std::ostream&amp; sout) \n{\n    int space = rows - 1;\n    for (int i = 1; i &lt;= rows; i++) { \n        for (int count = 1; count &lt;= space; count++) { \n            sout &lt;&lt; ' ';\n        } \n        for (int count = 1; count &lt;= (2 * i) - 1; count++) { \n            sout &lt;&lt; '*';\n        } \n        sout &lt;&lt; endl;\n        space--;\n    } \n    space = 1;\n    for (int i = 1; i &lt;= rows - 1; i++) { \n        for (int count = 1; count &lt;= space; count++) { \n            sout &lt;&lt; ' ';\n        } \n        for (int count = 1; count &lt;= (2 * (rows - i)) - 1; count++) { \n            sout &lt;&lt; '*';\n        } \n        sout &lt;&lt; endl;\n        space++;\n    }\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/0ee3131baf2acdcb\" rel=\"nofollow noreferrer\">Live Example showing std::cout and std::ostringstream</a></p>\n\n<p>And here is the output from the file:</p>\n\n<pre><code>       *\n      ***\n     *****\n    *******\n   *********\n  ***********\n *************\n***************\n *************\n  ***********\n   *********\n    *******\n     *****\n      ***\n       *\n</code></pre>\n"}], "owner": {"reputation": 1731, "user_id": 8813179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d2805921ad889a0371d566a75d5f7d4?s=128&d=identicon&r=PG&f=1", "display_name": "ABC", "link": "https://stackoverflow.com/users/8813179/abc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "accepted_answer_id": 55504806, "answer_count": 2, "score": 1, "last_activity_date": 1554330278, "creation_date": 1554326135, "last_edit_date": 1554326529, "question_id": 55504398, "link": "https://stackoverflow.com/questions/55504398/c-star-diamond-pattern-written-to-output-file-becomes-jumbled", "title": "C++ Star diamond pattern written to output file becomes jumbled", "body": "<p>I am learning to code in C++ and doing simple beginner exercises. Currently, I am facing a problem where my star diamond pattern output's correctly to the console, but that <strong>same output to the file becomes jumbled</strong>.</p>\n\n<p>This program creates <strong>a * star diamond</strong> based on a row length, and attempts to save that same design to an output file named <code>output_diamond.txt</code>.</p>\n\n<p>Any tips or solutions on how to approach an issue like this? I understand the C++ section is very strict, and I made sure to document my code and provide a working re-creatable example.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;cassert&gt;\n\nusing namespace std;\n\nvoid pyramid(int rows);\nint main() {\n    pyramid(8);\n    return 0;\n}\n\n/*\n * @param int rows\n *\n * Function to output to console a star pyramid\n * based on an amount of rows for a half going\n * vertical. If top half of rows is 8, than the\n * bottom half will be indetical but reverse with\n * a row count of 8.\n */\nvoid pyramid(int rows) {\n    ofstream fout;\n\n    fout.open(\"output_diamond.txt\");\n    if (fout.is_open()) {\n        /* Top Half */\n        // Initialize variable for spaces equal to (rows - 1)\n        int space = rows - 1;\n        // Begin first for loop for top half of diamond\n        for (int i = 1; i &lt;= rows; i++) { // For 1\n            // Begin for loop for spaces\n            for (int count = 1; count &lt;= space; count++) { // For 2\n                // Output to console a single space\n                cout &lt;&lt; ' ';\n                fout &lt;&lt; \" \";\n            } // End For 2\n            // Begin for loop for star/diamond char symbol\n            for (int count = 1; count &lt;= (2 * i) - 1; count++) { // For 3\n                // Output to console a single *\n                cout &lt;&lt; '*';\n                fout &lt;&lt; '*' &lt;&lt; endl;\n            } // End For 3\n            // Before for loop ends output end of line\n            cout &lt;&lt; endl;\n            // Decrement -1 to space\n            space--;\n        } // End For 1\n\n        /*  Bottom Half */\n        // Set value for space variable to 1\n        space = 1;\n        // Begin first for loop for bottom half of diamond\n        for (int i = 1; i &lt;= rows - 1; i++) { // For 1\n            // Begin loop for spaces\n            for (int count = 1; count &lt;= space; count++) { // For 2\n                // Output to console a single space\n                cout &lt;&lt; ' ';\n                fout &lt;&lt; ' ';\n            } // End For 2\n            // Begin for loop for star/diamond char symbol\n            for (int count = 1; count &lt;= (2 * (rows - i)) - 1; count++) { // For 3\n                // Output to console a single *\n                cout &lt;&lt; '*';\n                fout &lt;&lt; '*' &lt;&lt; endl;\n            } // End For 3\n            // Before for loop ends output end of line\n            cout &lt;&lt; endl;\n            // Increment space +1\n            space++;\n        } // End For 1\n    } else {\n        cout &lt;&lt; \"Output file did not open!\" &lt;&lt; endl;\n        assert(fout);\n    }\n    // End\n}\n</code></pre>\n\n<p><strong>Console Output</strong></p>\n\n<pre><code>       *\n      ***\n     *****\n    *******\n   *********\n  ***********\n *************\n***************\n *************\n  ***********\n   *********\n    *******\n     *****\n      ***\n       *\n</code></pre>\n\n<p><strong>Sample Text File Output</strong></p>\n\n<pre><code>       *\n      *\n*\n*\n     *\n*\n*\n*\n*\n    *\n*\n*\n*\n*\n*\n*\n   *\n*\n*\n*\n*\n*\n*\n*\n</code></pre>\n"}, {"tags": ["c++", "memory-leaks", "textures", "loading", "directx-11"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4254657, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mq2aLfwf4M8/AAAAAAAAAAI/AAAAAAAAADg/BK33USl0BS4/photo.jpg?sz=128", "display_name": "AJFay77", "link": "https://stackoverflow.com/users/4254657/ajfay77"}, "edited": false, "score": 0, "creation_date": 1554326229, "post_id": 55504383, "comment_id": 97714926, "body": "That was it. Thanks for the quick answer, it always seems to be the simplest thing. I admittedly don&#39;t fully understand how half of the DX stuff works."}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1554336716, "post_id": 55504383, "comment_id": 97717880, "body": "Simplest solution is to use: <code>ComPtr&lt;ID3D11Resource&gt; res;</code> and get rid of all the explicit use of <code>Release</code> and you as noted you don&#39;t need the call to <code>GetResouce</code> since the function gave it to you already. See <a href=\"https://github.com/Microsoft/DirectXTK/wiki/ComPtr\" rel=\"nofollow noreferrer\">ComPtr</a> and <a href=\"https://github.com/Microsoft/DirectXTK/wiki/WICTextureLoader\" rel=\"nofollow noreferrer\">WICTextureLoader</a>"}], "tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": true, "score": 0, "last_activity_date": 1554326054, "creation_date": 1554326054, "answer_id": 55504383, "question_id": 55504281, "link": "https://stackoverflow.com/questions/55504281/memory-leak-when-loading-a-2d-texture-with-dx11/55504383#55504383", "title": "Memory leak when loading a 2D texture with DX11", "body": "<p>At invocation <code>tempTex-&gt;GetResource(&amp;res);</code> naked pointer acquired during the call to <code>CreateWICTextureFromFileEx</code> is overwritten without releasing it. So the reference counter for that object is not decremented and object leaks. It looks like <code>tempTex-&gt;GetResource(&amp;res);</code> is not needed at all.</p>\n"}], "owner": {"reputation": 3, "user_id": 4254657, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mq2aLfwf4M8/AAAAAAAAAAI/AAAAAAAAADg/BK33USl0BS4/photo.jpg?sz=128", "display_name": "AJFay77", "link": "https://stackoverflow.com/users/4254657/ajfay77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 55504383, "answer_count": 1, "score": 0, "last_activity_date": 1554326054, "creation_date": 1554325627, "question_id": 55504281, "link": "https://stackoverflow.com/questions/55504281/memory-leak-when-loading-a-2d-texture-with-dx11", "title": "Memory leak when loading a 2D texture with DX11", "body": "<p>Loading in a texture with no real issues, the ID3D11Texture2D that I'm using to temporarily grab the D3D11_TEXTURE2D_DESC info seems to not delete properly.</p>\n\n<p>If I don't bother using the ID3D11Texture2D item I don't have memory leaks. When I do use it, despite deleting it after getting what I need, it is left over on shutdown when using the ReportLiveObjects function.</p>\n\n<p>I've tried using my own * and manually deleting it, I've tried using a ComPtr and trying the various ways to free one of those up.</p>\n\n<pre><code>Microsoft::WRL::ComPtr&lt;ID3D11Texture2D&gt; pTextureInterface = nullptr;\nID3D11Resource *res = nullptr;\n\nHRESULT hres = DirectX::CreateWICTextureFromFileEx(m_pDev, const_cast&lt;wchar_t*&gt;(wStrAddress.c_str()), 0, D3D11_USAGE_DEFAULT, D3D11_BIND_SHADER_RESOURCE, 0, 0, DirectX::WIC_LOADER_IGNORE_SRGB, &amp;res, tempTex.ReleaseAndGetAddressOf());\n\ntempTex-&gt;GetResource(&amp;res);\nres-&gt;QueryInterface&lt;ID3D11Texture2D&gt;(&amp;pTextureInterface);\nD3D11_TEXTURE2D_DESC desc;\npTextureInterface-&gt;GetDesc(&amp;desc);\n\nRECT r;\nr.left = 0;\nr.top = 0;\nr.right = desc.Width;\nr.bottom = desc.Height;\n\nif (pTextureInterface != nullptr)\n{\n    pTextureInterface.ReleaseAndGetAddressOf();\n    pTextureInterface = nullptr;\n}\nif (res != nullptr)\n{\n    res-&gt;Release();\n    res = nullptr;\n}\n</code></pre>\n\n<p>When I create and use the pTextureInterface I get a DirectX memory leak warning for every texture I load with a Refcount of 1.\nIf I don't bother to use pTextureInterface at all I have no leaks and everything loads and displays properly (except their dimensions as I then am manually setting the rectangle bounds of the source image)</p>\n\n<p>I realize this is probably some tiny little oversight but I have been unable to find a working solution all day, any help would be appreciated.</p>\n"}, {"tags": ["c++", "qt", "openmp", "qmap", "qvector"], "comments": [{"owner": {"reputation": 1480, "user_id": 10450594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae4c6a0ca94b3094b25f18e66d8368ff?s=128&d=identicon&r=PG&f=1", "display_name": "Brice", "link": "https://stackoverflow.com/users/10450594/brice"}, "edited": false, "score": 0, "creation_date": 1554456428, "post_id": 55504260, "comment_id": 97767723, "body": "If it is not thread safe, then you should not attempt to use it in parallel. Basically, one of the calls may induce some memory reallocation in one of the Qmap objects and leave another thread with an invalid pointer. Looping on <code>var</code> first then <code>i</code> may help as the inner Qmap objects will be accessed by one thread at a time."}], "answers": [{"tags": [], "owner": {"reputation": 14632, "user_id": 399908, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/56ea829e87b7772e36a35782dde9fb94?s=128&d=identicon&r=PG", "display_name": "Martin Hennings", "link": "https://stackoverflow.com/users/399908/martin-hennings"}, "is_accepted": true, "score": 1, "last_activity_date": 1554461162, "creation_date": 1554461162, "answer_id": 55533705, "question_id": 55504260, "link": "https://stackoverflow.com/questions/55504260/error-acessing-and-editing-a-qmap-from-inside-a-openmp-loop/55533705#55533705", "title": "error acessing and editing a Qmap from inside a OpenMP loop", "body": "<p>The sane solution: Protect your shared variables via a <a href=\"https://doc.qt.io/qt-5/qmutex.html\" rel=\"nofollow noreferrer\">mutex</a>. You of course pay a performance penalty for that, which is only acceptable if the calculation of the new value takes much longer than the insertion into your data structure.</p>\n\n<p>The bold solution: Preallocate all fields so that the data structure doesn't change because of the insertions.</p>\n\n<p>You'd need to consider two effects:</p>\n\n<ol>\n<li>If you access a <code>QMap</code> key that doesn't exist, a new field will be created. The map will detach. This will change the internal data layout.</li>\n<li>If you access the map with a non-const method, the map will detach, too, if you have more than one reference to it (Qt's copy-on-write idiom).</li>\n</ol>\n\n<p>For <code>QVector</code>, that's simple with <code>QVector::resize(n)</code>. After this, you can set any field value within [0..n-1] as long as no one else reads or writes to that field at the same time.</p>\n\n<p><code>QMap</code> is a different beast. Avoid, if possible.<br>\n(Just a hint: Only the iterators guarantee not to return a <strong>copy</strong> of the item.)</p>\n"}], "owner": {"reputation": 61, "user_id": 6893343, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205937214869861/picture?type=large", "display_name": "Patrick Machado", "link": "https://stackoverflow.com/users/6893343/patrick-machado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 55533705, "answer_count": 1, "score": 0, "last_activity_date": 1554461162, "creation_date": 1554325548, "question_id": 55504260, "link": "https://stackoverflow.com/questions/55504260/error-acessing-and-editing-a-qmap-from-inside-a-openmp-loop", "title": "error acessing and editing a Qmap from inside a OpenMP loop", "body": "<p>I am doing a loop for with openmp in c++ to feed some values inside a QMAP from a QVector and in some computers it says \"program stopped to work\" but in some computers it works. </p>\n\n<p>I saw that Qmap is not thread safe however I need a container with tags (because of that I use a Qmap) to input the results from an inside calculation and use it later in a serial part of the code.</p>\n\n<p>an example of my code is as follows: Being <code>mystringlist</code> a <code>QString</code>, <code>themaps</code> is a <code>QMap&lt;QString, QMap&lt;int, QVector&lt;float&gt;&gt;&gt;</code> and <code>myvector</code> a <code>QVector&lt;float&gt;</code>.</p>\n\n<pre><code>#pragma omp parallel for  schedule(static) num_threads(std::thread::hardware_concurrency())\n for (int i = 0; i &lt; numb_of_iter; i++) \n{\n   for each (auto var in mystringlist)\n   {\n       for (int j = 0; j &lt; 33; j++)\n       {\n           themaps[var][i] &lt;&lt; std::log10(j+1) + myvector[i]; \n       }\n    }\n}\n</code></pre>\n\n<p>in serial mode this code works, however in a parallel block sometimes it crashes. So my idea is if there is a method to allow all threads to acess this variable themaps so it wont crash because they wont try to write in the same memory space, each one has its own <code>i</code> so they should be able to do that. I do not know another option to do that because I need to use this variable <code>themaps</code> later on the code.</p>\n"}, {"tags": ["c++", "qt", "qtreewidget", "qtreewidgetitem"], "comments": [{"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1554325453, "post_id": 55504143, "comment_id": 97714642, "body": "Assuming it uses TVN_ITEMCHANGED (<a href=\"https://docs.microsoft.com/en-us/windows/desktop/controls/tvn-itemchanged\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/desktop/controls/&hellip;</a>), then it should be used for all properties."}], "answers": [{"tags": [], "owner": {"reputation": 2153, "user_id": 4581067, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-G4R_k1wzXRE/AAAAAAAAAAI/AAAAAAAAAZo/WcAHq-NuiKA/photo.jpg?sz=128", "display_name": "Jason Haslam", "link": "https://stackoverflow.com/users/4581067/jason-haslam"}, "is_accepted": true, "score": 0, "last_activity_date": 1554331745, "creation_date": 1554331745, "answer_id": 55505453, "question_id": 55504143, "link": "https://stackoverflow.com/questions/55504143/is-it-possible-to-know-whenever-an-item-in-a-tree-has-been-renamed/55505453#55505453", "title": "Is it possible to know whenever an item in a tree has been renamed?", "body": "<p>The <code>itemChanged</code> signal is emitted whenever data changes for any of the roles in the item. That includes when the <code>Qt::DisplayRole</code> changes because the user edited the name, or when you call <code>QTreeWidgetItem::setData</code>. It's also emitted in some other cases like when flags change and when the item is enabled/disabled.</p>\n\n<p>If you want to know only when the name changes, then you can connect directly to the <code>dataChanged</code> signal of the underlying model and inspect the <code>roles</code> argument for the <code>Qt::DisplayRole</code> role. For example:</p>\n\n<pre><code>connect(treeWidget-&gt;model(), &amp;QAbstractItemModel::dataChanged,\n[](const QModelIndex &amp;index, const QModelIndex &amp;, const QVector&lt;int&gt; &amp;roles) {\n  if (roles.contains(Qt::DisplayRole))\n    qDebug(\"Display role changed!\");\n});\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9079312, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-P-9iPKgl1uU/AAAAAAAAAAI/AAAAAAAAABU/Dj6j25sY_98/photo.jpg?sz=128", "display_name": "icetom 54", "link": "https://stackoverflow.com/users/9079312/icetom-54"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 55505453, "answer_count": 1, "score": 0, "last_activity_date": 1554331745, "creation_date": 1554325038, "question_id": 55504143, "link": "https://stackoverflow.com/questions/55504143/is-it-possible-to-know-whenever-an-item-in-a-tree-has-been-renamed", "title": "Is it possible to know whenever an item in a tree has been renamed?", "body": "<p>I'm using a QTreeWidget. I allowed the user to rename items in the tree. Yet,  whenever an item is renamed I have to manage something in the background. So I need to figure out when the user renames an item. I've seen the slot \"ItemChanged\" but I don't know if this slot is used only when an item is renamed.</p>\n\n<p>here is how I set the item as renamable.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>default_item-&gt;setSelected(true);\ndefault_item-&gt;setFlags(default_item-&gt;flags() | Qt::ItemIsEditable);\n</code></pre>\n"}, {"tags": ["c++", "iterator", "segmentation-fault", "gtk", "gtk3"], "answers": [{"tags": [], "owner": {"reputation": 540, "user_id": 108544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MrdvG.jpg?s=128&g=1", "display_name": "jmc", "link": "https://stackoverflow.com/users/108544/jmc"}, "is_accepted": true, "score": 2, "last_activity_date": 1554327942, "creation_date": 1554327942, "answer_id": 55504786, "question_id": 55504124, "link": "https://stackoverflow.com/questions/55504124/gtk-text-buffer-get-bounds-function-causes-segfault/55504786#55504786", "title": "&quot;gtk_text_buffer_get_bounds&quot; function causes SEGFAULT", "body": "<p>You're declaring <code>s</code> and <code>e</code> as pointers, and they are getting default-initialized to <code>nullptr</code>, so when <code>gtk_text_buffer_get_bounds</code> and <code>gtk_text_buffer_get_text</code> get around to using them you get a null pointer dereference and a segfault:</p>\n\n<pre><code>GtkTextIter *s, *e;\n...\ngtk_text_buffer_get_bounds (text, s, e);\n...\nstring2 = gtk_text_buffer_get_text (text, s, e, TRUE);\n</code></pre>\n\n<p>Instead, you could just allocate the <code>GtkTextIter</code> objects on the stack and pass their addresses around:</p>\n\n<pre><code>GtkTextIter s, e;\n...\ngtk_text_buffer_get_bounds (text, &amp;s, &amp;e);\n...\nstring2 = gtk_text_buffer_get_text (text, &amp;s, &amp;e, TRUE);\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 9541689, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EBgCk9EdADI/AAAAAAAAAAI/AAAAAAAAAXA/QEEwIwFRB6M/photo.jpg?sz=128", "display_name": "Daniel Smith", "link": "https://stackoverflow.com/users/9541689/daniel-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 55504786, "answer_count": 1, "score": 0, "last_activity_date": 1554327942, "creation_date": 1554324976, "question_id": 55504124, "link": "https://stackoverflow.com/questions/55504124/gtk-text-buffer-get-bounds-function-causes-segfault", "title": "&quot;gtk_text_buffer_get_bounds&quot; function causes SEGFAULT", "body": "<p>I'm writing a GTK application where I need to put a string into a GtkTextBuffer and then later extract the same text back out into a separate string. For some reason, I keep receiving a SEGFAULT error during \"gtk_text_buffer_get_bounds\" function. I think it's a problem with the \"e\" iterator, but I'm not sure. </p>\n\n<p>I've isolated the offending operations into a smaller example program. There are no differences between the process below and the one in my application. </p>\n\n<p>What am I doing wrong?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;gtk/gtk.h&gt;\nint main ()\n{\n  const char *string1 = \"hello\\0\", *string2;\n  GtkTextBuffer *text = gtk_text_buffer_new (NULL);\n  GtkTextIter *s, *e;\n\n  gtk_text_buffer_set_text (text, string1, -1);\n  gtk_text_buffer_get_bounds (text, s, e);\n  string2 = gtk_text_buffer_get_text (text, s, e, TRUE);\n  std::cout &lt;&lt; string2 &lt;&lt; std::endl;\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 6, "creation_date": 1554324215, "post_id": 55503931, "comment_id": 97714131, "body": "Bits and pieces of code is not useful in diagnosing problems. Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 47115, "user_id": 235354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097d761861529df52a6800744f1074d2?s=128&d=identicon&r=PG", "display_name": "jspcal", "link": "https://stackoverflow.com/users/235354/jspcal"}, "edited": false, "score": 0, "creation_date": 1554324351, "post_id": 55503931, "comment_id": 97714183, "body": "Perhaps <code>accountArray</code> isn&#39;t initialized to the expected values? Try debugging the loop in <code>linSearch</code> or logging some diagnostics."}, {"owner": {"reputation": 194, "user_id": 5758838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JqJa9.gif?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/5758838/ryan"}, "edited": false, "score": 0, "creation_date": 1554324365, "post_id": 55503931, "comment_id": 97714192, "body": "It doesn&#39;t look like you&#39;re posting the part with the error. Show the code where you add accounts to the accountArray[]"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1554324416, "post_id": 55503931, "comment_id": 97714217, "body": "Probable Off-by-one bug. Assuming <code>accountArray</code> is of size <code>MAX_NUM_ACCOUNTS</code>,  in <code>for (int i = 0; i &lt;= MAX_NUM_ACCOUNTS; i++)</code> the valid values of <code>i</code> are 0 through <code>MAX_NUM_ACCOUNTS</code> - 1 but <code>i &lt;= MAX_NUM_ACCOUNTS;</code> allows 0 through <code>MAX_NUM_ACCOUNTS</code>."}], "owner": {"reputation": 19, "user_id": 11307960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8242dd93c9914f6bff168653a957176?s=128&d=identicon&r=PG&f=1", "display_name": "trajic", "link": "https://stackoverflow.com/users/11307960/trajic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554324127, "creation_date": 1554324127, "question_id": 55503931, "link": "https://stackoverflow.com/questions/55503931/how-to-loop-through-array-of-objects-to-find-if-one-exists", "title": "How to loop through array of objects to find if one exists", "body": "<p>When I created one account the deposit function in case 2 works but when I create two back to back and the code asks for the account number. Then it says it can't be found.</p>\n\n<p>I created a function at the bottom to test to see if the account number is within the array but it doesn't seem to work.</p>\n\n<p>I want help with matching the user inputted account number to see if it exists or not. Not sure how to do that. Fairly new to C++.</p>\n\n<pre><code>case 2:\n            {\n                cout &lt;&lt; \"Enter account number: \";\n                cin &gt;&gt; accNum;\n\n                int index = linSearch(accNum);\n\n                if(index != -1)\n                {\n                Account * acc = accountArray[index];\n\n                        cout &lt;&lt; \"Enter amount: \";\n                        cin &gt;&gt; amount;\n\n                        if(acc-&gt;deposit(amount) == 0)\n                        {\n                            cout &lt;&lt; \"New balance is \" &lt;&lt; acc-&gt;getBalance() &lt;&lt; endl;\n                            break;\n                        }\n                        else\n                        {\n                            cout &lt;&lt; \"Deposit failed\" &lt;&lt; endl;\n                            break;\n                        }\n                }\n\n\n                    if(index == -1)\n                    {\n                        cout &lt;&lt; \"No account found\" &lt;&lt; endl;\n                        break;\n                    }\n\n                break;\n            }\n</code></pre>\n\n<pre><code>int linSearch(int &amp; val)\n{\n    for (int i = 0; i &lt;= MAX_NUM_ACCOUNTS; i++)\n    {\n        if  (accountArray[i]-&gt;getAccountNumber() == val)\n            return i ;\n    }\n    return -1 ;\n}\n</code></pre>\n\n<p>The code is supposed to ask for more than one account then deposit an amount into one of those accounts specified by the user by the account number</p>\n"}, {"tags": ["c++", "bitblt", "gdi", "createdibsection"], "answers": [{"comments": [{"owner": {"reputation": 1025, "user_id": 3971417, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8de1f3c62ed8673871bcc6b770f5346c?s=128&d=identicon&r=PG&f=1", "display_name": "sergiu reznicencu", "link": "https://stackoverflow.com/users/3971417/sergiu-reznicencu"}, "edited": false, "score": 0, "creation_date": 1554327443, "post_id": 55504644, "comment_id": 97715339, "body": "Then to what does the pointer returned by createDIBSection point to? The only argument received is the screen hdc and it definitely is not a pointer to its data."}, {"owner": {"reputation": 1025, "user_id": 3971417, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8de1f3c62ed8673871bcc6b770f5346c?s=128&d=identicon&r=PG&f=1", "display_name": "sergiu reznicencu", "link": "https://stackoverflow.com/users/3971417/sergiu-reznicencu"}, "edited": false, "score": 0, "creation_date": 1554327605, "post_id": 55504644, "comment_id": 97715386, "body": "And it is not bound to memDC either. (because the pointer stays the same even after we select the section onto memDC. This means this pointer is not a function of the HDC, it is independent of it. Then what is it?"}, {"owner": {"reputation": 1025, "user_id": 3971417, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8de1f3c62ed8673871bcc6b770f5346c?s=128&d=identicon&r=PG&f=1", "display_name": "sergiu reznicencu", "link": "https://stackoverflow.com/users/3971417/sergiu-reznicencu"}, "edited": false, "score": 0, "creation_date": 1554327727, "post_id": 55504644, "comment_id": 97715435, "body": "It looks as if it is an independent region of memory. The HDC into which I selected the bitmap can be full and contain whatever it wants but if I don&#39;t BitBlt something onto that hdc then the section memory won&#39;t change. Is this right?"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "reply_to_user": {"reputation": 1025, "user_id": 3971417, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8de1f3c62ed8673871bcc6b770f5346c?s=128&d=identicon&r=PG&f=1", "display_name": "sergiu reznicencu", "link": "https://stackoverflow.com/users/3971417/sergiu-reznicencu"}, "edited": false, "score": 0, "creation_date": 1554328015, "post_id": 55504644, "comment_id": 97715537, "body": "@sergiureznicencu <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/wingdi/nf-wingdi-createdibsection\" rel=\"nofollow noreferrer\"><code>CreateDIBSection</code></a> returns a pointer that applications can write to directly.  It probably resides in main system RAM."}, {"owner": {"reputation": 1025, "user_id": 3971417, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8de1f3c62ed8673871bcc6b770f5346c?s=128&d=identicon&r=PG&f=1", "display_name": "sergiu reznicencu", "link": "https://stackoverflow.com/users/3971417/sergiu-reznicencu"}, "edited": false, "score": 0, "creation_date": 1554328219, "post_id": 55504644, "comment_id": 97715611, "body": "And when I select a section into a hdc what exactly happens? The HDC represents some device with graphical memory and the section also contains its own area of memory in ram. I understood the speed argument and the problem of corruption(probably that&#39;s why I have to use BitBlt : to take a &quot;snapshot&quot; of that memory) but why do I have to &quot;select&quot; the section? Why can&#39;t I give BitBlt the pointer returned by CreateDIBSection ?"}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 0, "last_activity_date": 1554327259, "creation_date": 1554327259, "answer_id": 55504644, "question_id": 55503900, "link": "https://stackoverflow.com/questions/55503900/saving-pixels-from-screen-hdc/55504644#55504644", "title": "Saving pixels from screen HDC", "body": "<p>Video memory can be stored in several places, including main system memory (RAM), dedicated memory on a video card, in an external display device, or even some combination of these.  Access to this memory can be <em>slow</em>, and the memory might not be accessible to a process (at the very least it would need to be mapped into the address space of the process).</p>\n\n<p>Video data stored in hardware might need to be translated into a different format before passing to your application.  And that hardware might be able to utilize other methods to copy the data that do not directly involve the CPU (like Direct Memory Access, or DMA).  Since that copy does take some small amount of time, the section you want might be copied to another section of video memory on the video adapter (which can be an extremely quick process) before being copied to main memory (a much slower process).</p>\n\n<p>The video display is also a shared resource:  all processes on the system may need to access it.  If you had a pointer to the video memory, what you read might not be what's visible (if it was updated to different content), or you could corrupt the screen if you wrote to it.</p>\n"}], "owner": {"reputation": 1025, "user_id": 3971417, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8de1f3c62ed8673871bcc6b770f5346c?s=128&d=identicon&r=PG&f=1", "display_name": "sergiu reznicencu", "link": "https://stackoverflow.com/users/3971417/sergiu-reznicencu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554327259, "creation_date": 1554323997, "last_edit_date": 1554326640, "question_id": 55503900, "link": "https://stackoverflow.com/questions/55503900/saving-pixels-from-screen-hdc", "title": "Saving pixels from screen HDC", "body": "<p>Many forums give the following code regarding how to get into an array a copy of the screen's pixels:</p>\n\n<pre><code>char* Pixels = NULL;\nHDC MemDC = CreateCompatibleDC(Context);\nHBITMAP Section = CreateDIBSection(Context, &amp;Info, DIB_RGB_COLORS, (void**)&amp;Pixels, 0, 0);\nDeleteObject(SelectObject(MemDC, Section));\nBitBlt(MemDC, 0, 0, Width, Height, Context, Area.left, Area.top, SRCCOPY);\nDeleteDC(MemDC);\nstd::fstream hFile(FilePath, std::ios::out | std::ios::binary);\nif (hFile.is_open())\n{\n    hFile.write((char*)&amp;Header, sizeof(Header));\n    hFile.write((char*)&amp;Info.bmiHeader, sizeof(Info.bmiHeader));\n    hFile.write(Pixels, (((BitsPerPixel * Width + 31) &amp; ~31) / 8) * Height);\n    hFile.close();\n    DeleteObject(Section);\n    return true;\n}\n</code></pre>\n\n<p>(<a href=\"https://www.daniweb.com/programming/software-development/threads/481786/saving-an-hdc-as-a-bmp-file\" rel=\"nofollow noreferrer\">Link</a>)</p>\n\n<p>But this involves actually copying the pixels \"memory\" area from screen HDC to an in-memory one. Why not this:</p>\n\n<pre><code>char* Pixels = NULL;\nHBITMAP Section = CreateDIBSection(Context, &amp;Info, DIB_RGB_COLORS, (void**)&amp;Pixels, 0, 0);\nSelectObject(Context, Section);\n</code></pre>\n\n<p>The Context HDC already contains all the data. Why can't I just read it?</p>\n\n<p>And I thought that a bitmap <strong>must</strong> be selected into a HDC and that the HDC <strong>actually</strong> carries the data. Then why does <code>CreateDIBSection</code> return a pointer although the bitmap was not yet selected into any HDC? (If it gives a pointer to the memory of the HDC passed as argument then the array already contains the screen's pixels values but this is not the case because <code>BitBlt</code> is still required.)</p>\n\n<p>I reached this conclusion because BitBlt accepts an HDC argument, not a bitmap. This probably means it copies the data to the associated HDC.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1554324179, "post_id": 55503895, "comment_id": 97714116, "body": "<i>&quot;instead of just waiting it out.&quot;</i> Wait! What do you mean? That code consumes a close to infinite time?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1554324389, "post_id": 55503895, "comment_id": 97714201, "body": "If you mean actual real execution time, that depends on your system and should be measured by you. Nobody else can answer that for you"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1554324430, "post_id": 55503895, "comment_id": 97714222, "body": "You should&#39;ve looked at Wikipedia first, they explain this puzzle pretty well, especially 64-disc variant: <i>&quot;According to the legend, when the last move of the puzzle is completed, the world will end.&quot;</i>"}, {"owner": {"reputation": 8101, "user_id": 9199167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqdLV.jpg?s=128&g=1", "display_name": "Max Vollmer", "link": "https://stackoverflow.com/users/9199167/max-vollmer"}, "edited": false, "score": 0, "creation_date": 1554324466, "post_id": 55503895, "comment_id": 97714241, "body": "Run with a bunch of lower values for <code>n</code>, count the time the application needs in each case and devide that value by <code>2^(n-1)</code>, do it until you have enough data to estimate the growth rate of the time value for any <code>n</code>, insert <code>64</code> for <code>n</code>, done."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1554324657, "post_id": 55503895, "comment_id": 97714332, "body": "Also, it&#39;s interesting to note that the thing that&#39;s most important in answering this, is &quot;How fast can your output display a line of text&quot;. That is <i>by far</i> the slowest part of this."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1554324886, "post_id": 55503895, "comment_id": 97714428, "body": "@MooingDuck now let&#39;s do an exercise in metaphysics. Let&#39;s say, we omit the output, and will let the program to move the discs without outputting he moves. (We also assume optimizers don&#39;t figure it out and generate the code as written). Will the word end when the move is completed? In other words, &quot;If a tree falls in a forest and no one is around to hear it, does it make a sound?&quot;"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1554327015, "post_id": 55503895, "comment_id": 97715192, "body": "I found this interesting: <a href=\"https://hanoi.aimary.com/index_en.php\" rel=\"nofollow noreferrer\">hanoi.aimary.com/index_en.php</a> it says <code>Approx. 584,942,417,355 years</code> for 64 disks assuming each move is a second."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 1, "creation_date": 1554339435, "post_id": 55503895, "comment_id": 97718476, "body": "You know how many times the function is called (2^64 - 1), so estimate how long each function call takes and multiply. Even if you under-estimate a bit (a microsecond?), you&#39;ll get an impressively large run time."}], "answers": [{"tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": false, "score": 3, "last_activity_date": 1554324416, "creation_date": 1554324416, "answer_id": 55504006, "question_id": 55503895, "link": "https://stackoverflow.com/questions/55503895/how-long-would-a-tower-of-hanoi-that-has-64-discs-take-to-solve-recursively-c/55504006#55504006", "title": "How long would a Tower of Hanoi That has 64 discs take to solve recursively? C++", "body": "<p>Well, you know that a  tower of height <code>n</code> needs 2<sup>n-1</sup> calls, which all take about the same time.</p>\n\n<p>So, time it for some not too big <code>n</code>, and set it in relation to the <code>n</code> you want.</p>\n\n<p>Waiting for a tower of height 64 to be solved takes a bit too long to measure directly.</p>\n\n<p>Regarding big-Oh, you know the step-count, so just remove constant factors and slow-growing terms.</p>\n"}, {"tags": [], "owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "is_accepted": false, "score": 0, "last_activity_date": 1554324520, "creation_date": 1554324520, "answer_id": 55504030, "question_id": 55503895, "link": "https://stackoverflow.com/questions/55503895/how-long-would-a-tower-of-hanoi-that-has-64-discs-take-to-solve-recursively-c/55504030#55504030", "title": "How long would a Tower of Hanoi That has 64 discs take to solve recursively? C++", "body": "<p>\"How long would this take to solve\" is not a useful question; it entirely depends on the processing power of the system on which the code is compiled and run.  </p>\n\n<p>\"What is the Big-O for a recursive implementation of the Towers of Hanoi\" is absolutely solvable.  You will find when you do the calculation that it works out to be O(2^n) where n is the number of disks that you have.</p>\n\n<p>You can find a very nice discussion of calculating Big O for ToH here:  <a href=\"http://www-bcf.usc.edu/~stejada/csci101/slides/2012/TowerHanoi.pdf\" rel=\"nofollow noreferrer\">Discussion/proof</a></p>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1554324594, "creation_date": 1554324594, "answer_id": 55504042, "question_id": 55503895, "link": "https://stackoverflow.com/questions/55503895/how-long-would-a-tower-of-hanoi-that-has-64-discs-take-to-solve-recursively-c/55504042#55504042", "title": "How long would a Tower of Hanoi That has 64 discs take to solve recursively? C++", "body": "<p>According to the origins of the game, it will take exactly until the end of the Universe we live in: <a href=\"https://en.wikipedia.org/wiki/Tower_of_Hanoi\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Tower_of_Hanoi</a></p>\n\n<blockquote>\n  <p>The puzzle was invented by the French mathematician \u00c9douard Lucas in\n  1883. There is a story about an Indian temple in Kashi Vishwanath which contains a large room with three time-worn posts in it,\n  surrounded by 64 golden disks. Brahmin priests, acting out the command\n  of an ancient prophecy, have been moving these disks in accordance\n  with the immutable rules of Brahma since that time. The puzzle is\n  therefore also known as the Tower of Brahma puzzle. According to the\n  legend, when the last move of the puzzle is completed, the world will\n  end.</p>\n</blockquote>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11307970"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1554324594, "creation_date": 1554323979, "last_edit_date": 1554324146, "question_id": 55503895, "link": "https://stackoverflow.com/questions/55503895/how-long-would-a-tower-of-hanoi-that-has-64-discs-take-to-solve-recursively-c", "title": "How long would a Tower of Hanoi That has 64 discs take to solve recursively? C++", "body": "<p>I was looking at a recursive tower of Hanoi program where the function is called 2^n-1 times. My roommate asked me how long it would take to do a tower of 64. I honestly didn't know the answer so I'm hoping someone could help me out here, because I'm interested in the answer, instead of just waiting it out.</p>\n\n<p>Also what would the Big-O notation be?</p>\n\n<p>This is the code I was looking at:</p>\n\n<pre><code>void towerOfHanoi(int n, char from_rod, char to_rod, char aux_rod) \n{ \n    if (n == 1) \n    { \n        printf(\"\\n Move disk 1 from rod %c to rod %c\", from_rod, to_rod); \n        return; \n    } \n    towerOfHanoi(n-1, from_rod, aux_rod, to_rod); \n    printf(\"\\n Move disk %d from rod %c to rod %c\", n, from_rod, to_rod); \n    towerOfHanoi(n-1, aux_rod, to_rod, from_rod); \n} \n\nint main() \n{ \n    int n = 4; // Number of disks \n    towerOfHanoi(n, 'A', 'C', 'B');  // A, B and C are names of rods \n    return 0; \n}\n</code></pre>\n\n<p>got the code from GeeksforGeeks.org</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1554324270, "post_id": 55503884, "comment_id": 97714154, "body": "<code>std::vector&lt;Item*&gt; *your_items</code> is a variable that is local to the function - it <b>cannot</b> have the same address as a variable in main"}, {"owner": {"reputation": 145, "user_id": 10863242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/929c63723558abbc140e2464c011912d?s=128&d=identicon&r=PG&f=1", "display_name": "peer_2_peer_2", "link": "https://stackoverflow.com/users/10863242/peer-2-peer-2"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1554324384, "post_id": 55503884, "comment_id": 97714197, "body": "I know I can do this with a double ptr, I was just trying to do it the C++ way."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1554324509, "post_id": 55503884, "comment_id": 97714259, "body": "&quot;The C++ way&quot; would be to not do any of this weird pointer shenanigans and instead use a properly designed message queue that doesn&#39;t require casting pointers to integers (and leave out all the risks of <i>undefined behavior</i> that your code is running into)"}, {"owner": {"reputation": 145, "user_id": 10863242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/929c63723558abbc140e2464c011912d?s=128&d=identicon&r=PG&f=1", "display_name": "peer_2_peer_2", "link": "https://stackoverflow.com/users/10863242/peer-2-peer-2"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1554324582, "post_id": 55503884, "comment_id": 97714293, "body": "Welp all I can use is this system, so, yeah. Double ptr it is."}], "owner": {"reputation": 145, "user_id": 10863242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/929c63723558abbc140e2464c011912d?s=128&d=identicon&r=PG&f=1", "display_name": "peer_2_peer_2", "link": "https://stackoverflow.com/users/10863242/peer-2-peer-2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554323930, "creation_date": 1554323930, "question_id": 55503884, "link": "https://stackoverflow.com/questions/55503884/setting-the-value-of-a-pointer-by-address-through-a-message-queue", "title": "Setting the value of a pointer by address through a message queue", "body": "<p>I am trying to declare a vector pointer, and then have it reference a vector found within an object. This is only complex because I must send it through a message queue system. The message queue only knows how to deal with ints, so the only thing I can pass it is an address cast to an int. When the message is processed, it must be converted back to a vector pointer, and then have its value set.</p>\n\n<p>I have a miniature version of my problem here, that is failing in the same way. The \"message queue\" in this case is <code>GetItems</code> and the \"message processor\" is <code>GetItemsPrivate</code></p>\n\n<p>It is failing because the pointer value is still 0 after the process is complete, and even though I am getting a good address through the queue, I seem to be casting to the vector pointer incorrectly.</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nclass Box {\n    public:\n        std::string name;\n        Box(std::string name);\n        ~Box();\n};\nBox::Box(std::string name)\n    :name(name)\n{\n\n}\nBox::~Box(){}\n\nclass Item {\n    public:\n        std::string name;\n        Box *box;\n        Item(std::string name, Box *box);\n        ~Item();\n        void Print();\n};\nItem::Item(std::string name, Box *box)\n:name(name),\n box(box)\n{\n\n}\nItem::~Item(){}\nvoid Item::Print(){\n    std::cout &lt;&lt; \"Item name: \" &lt;&lt; name &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Item box: \" &lt;&lt; box-&gt;name &lt;&lt; std::endl;\n}\n\nclass Foo {\n    private:\n        void GetItemsPrivate(uint64_t item_ptr);\n    public:\n        std::vector&lt;Item*&gt; items;  \n        Foo();\n        ~Foo();\n        void GetItems(std::vector&lt;Item*&gt; *&amp;your_items);\n};\nFoo::Foo(){}\nFoo::~Foo(){}\nvoid Foo::GetItemsPrivate(uint64_t item_ptr){\n    // pretend message receiver where ptr address is unpacked and then set \n    std::cout &lt;&lt; \"GetItemsPrivate param value 0x\" &lt;&lt; std::hex &lt;&lt; item_ptr &lt;&lt; std::endl;\n    std::vector&lt;Item*&gt; *your_items = (std::vector&lt;Item*&gt; *)item_ptr;\n    std::cout &lt;&lt; \"GetItemsPrivate ptr value \" &lt;&lt; your_items &lt;&lt; std::endl; // should be 0 \n    std::cout &lt;&lt; \"GetItemsPrivate ptr address \" &lt;&lt; &amp;your_items &lt;&lt; std::endl; // should be same address from main \n    // set the ptr to the map \n    your_items = &amp;items;\n}\nvoid Foo::GetItems(std::vector&lt;Item*&gt; *&amp;your_items){\n    std::cout &lt;&lt; \"GetItems value \" &lt;&lt; your_items &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"GetItems address \" &lt;&lt; &amp;your_items &lt;&lt; std::endl;\n    // pretend message queue system where address must be shipped in a message\n    GetItemsPrivate((uint64_t)&amp;your_items);\n}\n\nvoid PrintItems(std::vector&lt;Item*&gt; *items){\n    for(int i = 0; i &lt; items-&gt;size(); i++){\n        (*items)[i]-&gt;Print();\n    }\n}\n\nint main()\n{\n    Box *boxA = new Box(\"BoxA\");\n    Item *itemA = new Item(\"Item A\", boxA);\n\n    Box *boxB = new Box(\"BoxB\");\n    Item *itemB = new Item(\"Item B\", boxB);\n\n    Foo foo;\n    foo.items.push_back(itemA);\n    foo.items.push_back(itemB);\n\n    std::vector&lt;Item*&gt; *my_items = 0; \n    std::cout &lt;&lt; \"main value of my_items is \" &lt;&lt; my_items &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"main address of my_items is \" &lt;&lt; &amp;my_items &lt;&lt; std::endl;\n\n    foo.GetItems(my_items);\n    // at this point, ptr should point to Foo's item vector\n    std::cout &lt;&lt; \"main value of my_items is \" &lt;&lt; my_items &lt;&lt; std::endl;\n\n    //PrintItems(my_items);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output</p>\n\n<blockquote>\n  <p>main value of my_items is 0<br>\n  main address of my_items is 0x7ffe61b0c2f8<br>\n  GetItems value 0<br>\n  GetItems address 0x7ffe61b0c2f8<br>\n  GetItemsPrivate param value 0x7ffe61b0c2f8<br>\n  GetItemsPrivate ptr value 0x7ffe61b0c2f8<br>\n  GetItemsPrivate ptr address 0x7ffe61b0c288<br>\n  main value of my_items is 0</p>\n</blockquote>\n"}, {"tags": ["c++", "variables", "double", "long-integer", "pi"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1554324017, "post_id": 55503866, "comment_id": 97714036, "body": "Related: <a href=\"https://stackoverflow.com/questions/15319967/exact-decimal-datatype-for-c\" title=\"exact decimal datatype for c\">stackoverflow.com/questions/15319967/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 11307593, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s3jom7qWvR0/AAAAAAAAAAI/AAAAAAAAAgI/hUWqP9xrd2k/photo.jpg?sz=128", "display_name": "Julian Rooms", "link": "https://stackoverflow.com/users/11307593/julian-rooms"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1554324534, "post_id": 55503866, "comment_id": 97714276, "body": "Thanks a lot for your help. I&#39;ll have a look into that tomorrow."}], "owner": {"reputation": 11, "user_id": 11307593, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s3jom7qWvR0/AAAAAAAAAAI/AAAAAAAAAgI/hUWqP9xrd2k/photo.jpg?sz=128", "display_name": "Julian Rooms", "link": "https://stackoverflow.com/users/11307593/julian-rooms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554323854, "creation_date": 1554323854, "question_id": 55503866, "link": "https://stackoverflow.com/questions/55503866/is-there-a-better-way-to-store-more-digits-after-the-decimal-point-than-long-do", "title": "Is there a better way to store more digits after the decimal point, than long double?", "body": "<p>I am currently working on a problem that calculates pi. The calculating part works fine but with my current data-type I can only calculate a certain amount of digits, before it stops storing them (~32?). </p>\n\n<p>I am using a long double, but I want more digits, preferably a variable amount.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;math.h&gt;\n#include&lt;bits/stdc++.h&gt;\n//variables\nfloat sign = 1.0;\nlong double sum = 0.0;\nfloat start = 3.0;\nint iteration = 0.0;\n\nint main() {\n\n    std::cout &lt;&lt; \"How many iterations should be completed?\" &lt;&lt; std::endl;\n    std::cin &gt;&gt; iteration;\n//calculating part\n    for (int j = 1; j &lt; iteration; j++) {\n        sum = sum + sign * 4.0 / ((2 * j) * (2 * j + 1.0) * (2 * j + 2.0));\n        sign *= -1.0;\n    }\n//output     \n    std::cout &lt;&lt; std::fixed &lt;&lt; std::setprecision(1000) &lt;&lt; sum + start &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>I get what I expect, but I did not find a data-type, that stores even more. Do I have to write one myself?</p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1554342545, "post_id": 55503836, "comment_id": 97719074, "body": "Draw your text with a solid background (<code>OPAQUE</code> rather than <code>TRANSPARENT</code>), or use <code>BitBlt</code> to restore the original part of the off-screen bitmap before you render the text over it."}], "answers": [{"tags": [], "owner": {"reputation": 4915, "user_id": 11128312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ufn85.jpg?s=128&g=1", "display_name": "Strive Sun", "link": "https://stackoverflow.com/users/11128312/strive-sun"}, "is_accepted": false, "score": 0, "last_activity_date": 1554367008, "creation_date": 1554367008, "answer_id": 55511396, "question_id": 55503836, "link": "https://stackoverflow.com/questions/55503836/the-problem-when-using-double-buffering-bitmap-with-alphablend/55511396#55511396", "title": "The problem when using Double buffering Bitmap with AlphaBlend", "body": "<p>I guess you're ready to draw transparent digital changes. </p>\n\n<p>You can try to call <code>InvalidateRect</code> and <code>UpdateWindow</code> to refresh the local area at the same time, because the system regards the drawing operation in the window as a low priority operation, which can be redrawn immediately with UpdateWindow. </p>\n\n<p>Also you can try the following code, as Jonathan Potter says</p>\n\n<p>Just like :</p>\n\n<pre><code>   AlphaBlend(memhdc, TextBoxRect.left, TextBoxRect.top, TextBoxRect.right,       TextBoxRect.bottom, hdc, TextBoxRect.left, TextBoxRect.top, TextBoxRect.right, TextBoxRect.bottom, bf);\n   SetBkMode(hdc, TRANSPARENT);\n   SetTextColor(hdc, RGB(255, 0, 0));       \n   BitBlt(hdc, TextBoxRect.left, TextBoxRect.top, TextBoxRect.right, TextBoxRect.bottom, hdc, TextBoxRect.left, TextBoxRect.top, SRCCOPY);\n   DrawText(hdc, str, -1, &amp;TextBoxRect, DT_LEFT | DT_NOCLIP);\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 7937355, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-cqlYCF1oYIs/AAAAAAAAAAI/AAAAAAAAAA4/FD5Le6k5Rdc/photo.jpg?sz=128", "display_name": "\ubc15\ud61c\uc778", "link": "https://stackoverflow.com/users/7937355/%eb%b0%95%ed%98%9c%ec%9d%b8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554367008, "creation_date": 1554323707, "question_id": 55503836, "link": "https://stackoverflow.com/questions/55503836/the-problem-when-using-double-buffering-bitmap-with-alphablend", "title": "The problem when using Double buffering Bitmap with AlphaBlend", "body": "<p>My text is overlapped when it change.</p>\n\n<p>but it's time text so always changing</p>\n\n<p>i already tried</p>\n\n<hr>\n\n<p>TranslateBlt(memhdc, TextBoxRect.left, TextBoxRect.top, TextBoxRect.right, TextBoxRect.bottom, hdc, TextBoxRect.right, TextBoxRect.bottom, RGB(0,0,0));</p>\n\n<p>case WM_ERASEBKGND:\nreturn true;</p>\n\n<p>InvalidateRect(NULL, &amp;TextBoxRect, TRUE);</p>\n\n<hr>\n\n<p>here is my code.</p>\n\n<hr>\n\n<pre><code>HDC hdc = GetDC(NULL);\nHDC memhdc;\nHBITMAP bgbitmap, oldbitmap;\n\nstringstream stream;\nint cur = delay / 10;\nstream &lt;&lt; \"Ms : \" &lt;&lt; msec;\nwchar_t str[120];\nmbstowcs_s(NULL, str, 120, stream.str().c_str(), 120);\n\nmemhdc = CreateCompatibleDC(hdc);\nbgbitmap = CreateCompatibleBitmap(hdc, TextBoxRect.right, TextBoxRect.bottom);\noldbitmap = (HBITMAP) SelectObject(memhdc, bgbitmap);\n\nBLENDFUNCTION bf;\nbf.BlendOp = AC_SRC_OVER;\nbf.BlendFlags = 0;\nbf.SourceConstantAlpha = 255;\nbf.AlphaFormat = 0;\n\nAlphaBlend(memhdc, TextBoxRect.left, TextBoxRect.top, TextBoxRect.right, TextBoxRect.bottom, hdc, TextBoxRect.left, TextBoxRect.top, TextBoxRect.right, TextBoxRect.bottom, bf);\nSetBkMode(memhdc, TRANSPARENT);\nSetTextColor(memhdc, RGB(255, 0, 0));\nDrawText(memhdc, str, -1, &amp;TextBoxRect, DT_LEFT | DT_NOCLIP);\n\nBitBlt(hdc, TextBoxRect.left, TextBoxRect.top, TextBoxRect.right, TextBoxRect.bottom, memhdc, TextBoxRect.left, TextBoxRect.top, SRCCOPY);\n\nDeleteObject(SelectObject(memhdc,oldbitmap));\nDeleteObject(bgbitmap);\nDeleteDC(memhdc);\nReleaseDC(NULL, hdc);\n</code></pre>\n"}, {"tags": ["c++", "cocos2d-x", "texturepacker"], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 5158790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0f05785f41cb20ddde4645a243f6891?s=128&d=identicon&r=PG", "display_name": "Martin", "link": "https://stackoverflow.com/users/5158790/martin"}, "is_accepted": true, "score": 1, "last_activity_date": 1554400637, "creation_date": 1554400637, "answer_id": 55522294, "question_id": 55503776, "link": "https://stackoverflow.com/questions/55503776/use-multiple-sprite-sheets-at-once-in-cocos2d-x/55522294#55522294", "title": "Use multiple sprite sheets at once in Cocos2d-x", "body": "<p>I used the advanced feature of Texture Packer: generate .h and .cpp files.\nBut all you need is:</p>\n\n<pre><code>cache-&gt;addSpriteFramesWithFile(\"Graphics-0.plist\", \"Graphics-0.png\");\n\ncache-&gt;addSpriteFramesWithFile(\"Graphics-1.plist\", \"Graphics-1.png\");\n</code></pre>\n\n<p>You only need to call addSpriteFramesWithFile multiple times with all your .plist files and .png</p>\n\n<p>if you have a lot you can create a for loop:</p>\n\n<pre><code>void addSpriteFramesToCache(int i)\n{\nSpriteFrameCache *cache = SpriteFrameCache::getInstance();\n\n    cache-&gt;addSpriteFramesWithFile(\"Graphics-\" + std::to_string(i) + \".plist\",\n    \"Graphics-\" + std::to_string(i) + \".png\");\n}\n\nfor (int i = 0; i &lt; numberOfFramesToLoad; i++) //\n{\n    addSpriteFramesToCache(i);\n}\n</code></pre>\n"}], "owner": {"reputation": 1287, "user_id": 9647800, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x80fA.png?s=128&g=1", "display_name": "iAlex11", "link": "https://stackoverflow.com/users/9647800/ialex11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 55522294, "answer_count": 1, "score": 0, "last_activity_date": 1554400637, "creation_date": 1554323413, "question_id": 55503776, "link": "https://stackoverflow.com/questions/55503776/use-multiple-sprite-sheets-at-once-in-cocos2d-x", "title": "Use multiple sprite sheets at once in Cocos2d-x", "body": "<p>I'm making a platformer videogame in Cocos2d-x C++.</p>\n\n<p>What I want to do is really easy but everything I have found on the internet either doesn't work or it's for another programming language like Objective-C.</p>\n\n<p>I basically have multiple Spritesheets I'd like to use on my game. I can't merge them into 1 big spritesheet because they are really big.</p>\n\n<p>I just want to know how to include multiple spritesheets so I can use them.</p>\n\n<p>For using 1 spritesheet I use the following code:</p>\n\n<pre><code>// load and cache the texture and sprite frames\nauto cacher = SpriteFrameCache::getInstance();\ncacher-&gt;addSpriteFramesWithFile(\"GJ_GameSheet02-hd.plist\");\n</code></pre>\n\n<p>I've read that I can use <code>SpriteBatch Node</code> for that, but I haven't found anything related to how to use that on C++.</p>\n\n<p>Any help would be appreciated.\nThanks</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1358, "user_id": 5357986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rea6W.jpg?s=128&g=1", "display_name": "Oliort", "link": "https://stackoverflow.com/users/5357986/oliort"}, "edited": false, "score": 1, "creation_date": 1554323523, "post_id": 55503605, "comment_id": 97713848, "body": "Where did you find that <code>for_each_reversiable_permutation</code>? Provide a link please."}, {"owner": {"reputation": 996, "user_id": 5824979, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5i5yH.jpg?s=128&g=1", "display_name": "Sailanarmo", "link": "https://stackoverflow.com/users/5824979/sailanarmo"}, "edited": false, "score": 0, "creation_date": 1554327897, "post_id": 55503605, "comment_id": 97715502, "body": "My question to you is, are you wanting permutations? Or subsets of a vector?"}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1554340091, "post_id": 55503605, "comment_id": 97718620, "body": "I don&#39;t follow that discussion about the types involved. 1) &quot;do something similar&quot; -- so not &quot;n choose r&quot;? What do you want to do? 2) &quot;I want to choose this whole type&quot; -- &quot;choose&quot; is probably not the right word for what you mean, and what makes a type &quot;whole&quot;? 3) &quot;think of it as&quot; -- think of what as? What is the supposed to be the antecedent of &quot;it&quot;? Sorry if that seems nit-picky, but your question does seem to hinge on that part, and I don&#39;t understand what it&#39;s trying to say. Maybe more code would help?"}], "owner": {"user_type": "does_not_exist", "display_name": "user11307872"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1554322661, "creation_date": 1554322583, "last_edit_date": 1554322661, "question_id": 55503605, "link": "https://stackoverflow.com/questions/55503605/how-to-generate-combination-similar-to-n-choose-r-from-stdvectorstdvector", "title": "How to generate combination similar to &#39;n Choose r&#39; from std::vector&lt;std::vector&lt;std::tuple&gt;&gt;&gt;?", "body": "<p>I wanted to get something along the lines of 'x choose 3'. So for example</p>\n\n<pre><code>[1, 2, 3, 4] choose 3\n-&gt; [1,2,3]\n-&gt; [1,2,4]\n-&gt; [1,3,4]\n-&gt; [2,3,4]\n</code></pre>\n\n<p>Now there are several ways of doing that but I want to do something similar on a variable I defined like this</p>\n\n<pre><code>std::vector&lt;std::vector&lt;std::tuple&lt;int, int, int&gt;&gt;&gt; v;\n</code></pre>\n\n<p>but I want to choose this whole type</p>\n\n<pre><code>std::vector&lt;std::tuple&lt;int, int, int&gt;&gt;&gt;\n</code></pre>\n\n<p>so one can think of it as</p>\n\n<pre><code>std::vector&lt;a&gt; choose 3\n</code></pre>\n\n<p>Looking around I found something that can help here. Specifically the <code>for_each_reversiable_permutation</code></p>\n\n<p>I think the usage is</p>\n\n<pre><code>for_each_reversible_permutation(v.begin(), v.begin() + r, v.end(), f(v.size()));\n</code></pre>\n\n<p>which in my case should be</p>\n\n<pre><code>for_each_reversible_permutation(v.begin(), v.begin() + 5, v.end(), v.size());\n</code></pre>\n\n<p>Although I'm not sure because that doesn't work.</p>\n\n<p>Also I don't know if there's a faster more specific way of generating combination for <code>std::vector</code></p>\n"}, {"tags": ["c++", "for-loop", "range"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 4, "creation_date": 1554321786, "post_id": 55503356, "comment_id": 97713058, "body": "<code>for (auto element : someVariable){</code> -&gt; <code>for (auto &amp;element : someVariable){</code>. I&#39;m sure there&#39;s a plethora of dupes out there that I can&#39;t seem to find with a quick search."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1554321796, "post_id": 55503356, "comment_id": 97713066, "body": "Voting to close as a typo.  <code>for (auto element : someVariable)</code> makes a copy of every element in the vector.  You need <code>for (auto&amp; element : someVariable)</code> to get a reference to every element."}, {"owner": {"reputation": 25894, "user_id": 4304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MIg7.jpg?s=128&g=1", "display_name": "zdan", "link": "https://stackoverflow.com/users/4304/zdan"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 1, "creation_date": 1554322644, "post_id": 55503356, "comment_id": 97713469, "body": "@scohe001 I don&#39;t think that&#39;s the problem. someVariable is already holding a copy of e. Doing what you suggest won&#39;t modify e."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 25894, "user_id": 4304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MIg7.jpg?s=128&g=1", "display_name": "zdan", "link": "https://stackoverflow.com/users/4304/zdan"}, "edited": false, "score": 0, "creation_date": 1554322927, "post_id": 55503356, "comment_id": 97713589, "body": "Hmm you&#39;re right @zdan, they&#39;d also have to change to <code>std::vector&lt;std::tuple&lt;float, Example&amp;, Example&gt;&gt;</code> and use <code>std::make_tuple (.4, std::ref(e),f);</code>. I think the crux is still that references instead of values are needed though, so the dupe still stands."}, {"owner": {"reputation": 7006, "user_id": 540815, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zEGbl.png?s=128&g=1", "display_name": "ThomasMcLeod", "link": "https://stackoverflow.com/users/540815/thomasmcleod"}, "edited": false, "score": 0, "creation_date": 1554324146, "post_id": 55503356, "comment_id": 97714102, "body": "Please post the exact error message and tell us what compiler you are using. The types in the tuple of the <code>push_back</code> call must match the types of the tuple in the vector declaration."}, {"owner": {"reputation": 67, "user_id": 9299394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b0078cc3533e58570e2ab2ce52135ae?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/9299394/mike"}, "edited": false, "score": 0, "creation_date": 1554330076, "post_id": 55503356, "comment_id": 97716216, "body": "<code>std::make_tuple(0.4, e , f)</code> is resulting in a tuple of type <code>std::tuple&lt;double, Example, Example&gt;</code> and this might be causing you trouble"}], "owner": {"user_type": "does_not_exist", "display_name": "user11307822"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "closed_date": 1554322291, "answer_count": 0, "score": 3, "last_activity_date": 1554322289, "creation_date": 1554321520, "last_edit_date": 1554322229, "question_id": 55503356, "link": "https://stackoverflow.com/questions/55503356/why-is-a-variable-type-mismatching-in-a-tuple-but-not-in-a-function", "closed_reason": "Duplicate", "title": "Why is a variable type mismatching in a tuple but not in a function?", "body": "<p>I have a function defined like this</p>\n\n<pre><code>void helper(float a, Example &amp;e, Example f) {\n    // this function will alter some values in 'e' w.r.t 'a'.\n}\n</code></pre>\n\n<p>I have another function defined like this</p>\n\n<pre><code>void helperList (Example &amp;e, Example f) {\n    std::vector&lt;std::tuple&lt;float, Example, Example&gt;&gt; someVariable;\n    auto some_1 = std::make_tuple( 0.4, e, f);\n    someVariable.push_back(some_1);\n\n    for (auto element : someVariable){\n         std::apply (helper, element);\n    }\n\n    helper (0.4, e, f);\n}\n</code></pre>\n\n<p>What I expected was both</p>\n\n<pre><code>for (auto element : someVariable){\n     std::apply (helper, element);\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>helper (0.4, e, f);\n</code></pre>\n\n<p>to have same effect of e but while just calling helper works as I expected, that for loop doesn't modify e which I thought was due to</p>\n\n<pre><code>std::vector&lt;std::tuple&lt;float, Example, Example&gt;&gt; someVariable;\n</code></pre>\n\n<p>not being like this</p>\n\n<pre><code>std::vector&lt;std::tuple&lt;float, Example &amp;, Example&gt;&gt; someVariable;\n</code></pre>\n\n<p>But if I do that, push_back errors out with this message no matching member function for call to 'push_back'</p>\n\n<p>I'm not sure what could be going wrong. Help is appreciated!</p>\n"}, {"tags": ["c++", "oop", "templates", "operator-overloading"], "comments": [{"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1554321044, "post_id": 55503183, "comment_id": 97712667, "body": "Overload the operator <code>+</code> to take an <code>int</code> as its lvalue."}, {"owner": {"reputation": 27, "user_id": 11307776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c8205562bbbc9f21d2c7487e8dd3239?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Rusanov", "link": "https://stackoverflow.com/users/11307776/yuriy-rusanov"}, "reply_to_user": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1554321095, "post_id": 55503183, "comment_id": 97712701, "body": "but if I overloaded this with T why it doesnt work with any types?"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1554321390, "post_id": 55503183, "comment_id": 97712852, "body": "Related: <a href=\"https://stackoverflow.com/a/11681308/179910\">stackoverflow.com/a/11681308/179910</a> and <a href=\"https://stackoverflow.com/a/20213363/179910\">stackoverflow.com/a/20213363/179910</a>"}], "answers": [{"tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": false, "score": 2, "last_activity_date": 1554321536, "last_edit_date": 1554321536, "creation_date": 1554321102, "answer_id": 55503246, "question_id": 55503183, "link": "https://stackoverflow.com/questions/55503183/how-to-create-overloading-on-the-other-side/55503246#55503246", "title": "How to create overloading + on the other side", "body": "<p>That function is probably in your class. But how can you add an overload to <code>int</code>? Does <code>int</code> even <em>have</em> a class? Is it time to scream and panic?</p>\n\n<p>Take a deep breath and look at the <a href=\"https://stackoverflow.com/q/1145022/2602718\">difference between global operator and member operator</a> overloads. You can actually overload for <code>int</code> in the global scope, which will probably look like:</p>\n\n<pre><code>template &lt;typename T&gt;\nMatrix&lt;T&gt; operator+(const T &amp;a, Matrix&lt;T&gt; &amp;m) { return m + a; }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1554321144, "creation_date": 1554321144, "answer_id": 55503255, "question_id": 55503183, "link": "https://stackoverflow.com/questions/55503183/how-to-create-overloading-on-the-other-side/55503255#55503255", "title": "How to create overloading + on the other side", "body": "<p>In order to be able to use</p>\n\n<pre><code>mat2=3+mat;\n</code></pre>\n\n<p>You have to overload the operator as a non-member function. Fortunately, its implementation is very simple.</p>\n\n<pre><code>template &lt;typename T&gt;\nMatrix&lt;T&gt; operator+(const T &amp;a, Matrix&lt;T&gt; const&amp; mat) {\n    return (mat + a);\n}\n</code></pre>\n\n<p>Ideally, you should overload both versions as non-member functions.</p>\n\n<pre><code>template &lt;typename T&gt;\nMatrix&lt;T&gt; operator+(Matrix&lt;T&gt; const&amp; mat, const T &amp;a ) {\n   ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 1, "last_activity_date": 1554322560, "last_edit_date": 1554322560, "creation_date": 1554321266, "answer_id": 55503292, "question_id": 55503183, "link": "https://stackoverflow.com/questions/55503183/how-to-create-overloading-on-the-other-side/55503292#55503292", "title": "How to create overloading + on the other side", "body": "<p>Suggestion: define <code>operator+=()</code> as member function of the class but define <code>operator+()</code> as a couple of external functions (<code>friend</code> to the class, if necessary). Maybe define the <code>operator+()</code> functions using the <code>operator+=()</code> method to avoid code duplication.</p>\n\n<p>Something as (caution: code not tested and supposing <code>Matrix</code> has a copy constructor)</p>\n\n<pre><code>// method of the Matrix class\nMatrix operator+= (T const &amp; a)\n {\n   for ( auto i = 0 ; i &lt; row ; ++i )\n      for ( auto j = 0 ; j &lt; col ; ++j ) \n          elements[i][j] += a;\n\n    return *this;\n }\n\n// ordinary (external to the Matrix class) function\ntemplate &lt;int row, int col, typename T&gt;\nMatrix&lt;row, col, T&gt; operator+ (Matrix&lt;row, col, T&gt; m, T const &amp; a)\n { return m += a; }\n\n// ordinary (external to the Matrix class) function\ntemplate &lt;int row, int col, typename T&gt;\nMatrix&lt;row, col, T&gt; operator+ (T const &amp; a, Matrix&lt;row, col, T&gt; m)\n { return m += a; }\n</code></pre>\n\n<p>Observe that both <code>operator+()</code> receive the <code>Matrix</code> value by copy.</p>\n"}], "owner": {"reputation": 27, "user_id": 11307776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c8205562bbbc9f21d2c7487e8dd3239?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Rusanov", "link": "https://stackoverflow.com/users/11307776/yuriy-rusanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 1, "accepted_answer_id": 55503292, "answer_count": 3, "score": 0, "last_activity_date": 1554322560, "creation_date": 1554320829, "question_id": 55503183, "link": "https://stackoverflow.com/questions/55503183/how-to-create-overloading-on-the-other-side", "title": "How to create overloading + on the other side", "body": "<p>I have matrix class and overloaded operator + working with other matrices and scalars. When I try to use it like mat2=mat+3; that works ok but if i change scalar and matrix mat2=3+mat; it says \"Invalid operands to binary expression('int' and Matrix&lt;3, 4>')\" (3,4 is rows and columns in this matrix).\nHow I understand I haven't overloaded + for this cases but I don't find how to overload it</p>\n\n<pre><code>Matrix operator+(const T &amp;a) {\n    Matrix&lt;row, col, T&gt; result;\n    for (int i = 0; i &lt; row; ++i) {\n        for (int j = 0; j &lt; col; ++j) {\n            result.elements[i][j] = elements[i][j] + a;\n        }\n\n    }\n    return result;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 1, "creation_date": 1554320560, "post_id": 55503108, "comment_id": 97712421, "body": "Do you know about loops? And did you try calling <code>rand</code> more than once?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1554320752, "post_id": 55503108, "comment_id": 97712522, "body": "<i>&quot;Also I&#39;m surprised I didn&#39;t need the ctime header even though I used time(0).&quot;</i> It sometimes happens that such headers are already included by other standard headers implicitely. You should never rely about that though."}], "answers": [{"tags": [], "owner": {"reputation": 2215, "user_id": 1689373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b36a57ad07d237603030ca54e7f4441?s=128&d=identicon&r=PG", "display_name": "Hoog", "link": "https://stackoverflow.com/users/1689373/hoog"}, "is_accepted": false, "score": 3, "last_activity_date": 1554320854, "creation_date": 1554320854, "answer_id": 55503188, "question_id": 55503108, "link": "https://stackoverflow.com/questions/55503108/how-to-generate-multiple-random-numbers/55503188#55503188", "title": "How to generate multiple random numbers?", "body": "<p>You only set <code>number</code> once, it will continue to be the random number you have assigned to it until you assign something else to it, such as another random number from <code>rand()</code></p>\n\n<pre><code>/This program generates three random numbers.\n\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\nusing std::endl;\nusing std::cout;\n\nint main()\n\n{\n  unsigned number;\n\n  srand(time(0));\n  number = rand() % 10 + 1;  \n  cout &lt;&lt; number &lt;&lt; \"         \";\n\n  number = rand() % 10 + 1;\n  cout &lt;&lt; number &lt;&lt; \"         \";\n\n  number = rand() % 10 + 1;\n  cout &lt;&lt; number &lt;&lt; endl;\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34, "user_id": 7088521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muJwF_bXwCU/AAAAAAAAAAI/AAAAAAAAAds/6b79u8iMFfM/photo.jpg?sz=128", "display_name": "Saumitra Topinkatti", "link": "https://stackoverflow.com/users/7088521/saumitra-topinkatti"}, "is_accepted": false, "score": 0, "last_activity_date": 1554320877, "creation_date": 1554320877, "answer_id": 55503192, "question_id": 55503108, "link": "https://stackoverflow.com/questions/55503108/how-to-generate-multiple-random-numbers/55503192#55503192", "title": "How to generate multiple random numbers?", "body": "<p>Solution: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\nusing std::endl;\nusing std::cout;\n\nint main()\n\n{\n  unsigned number;\n\n  srand(time(0));\n  number = rand() % 10 + 1;\n  cout &lt;&lt; number &lt;&lt; \"         \";\n  number = rand() % 10 + 1;\n  cout &lt;&lt; number &lt;&lt; \"         \";\n  number = rand() % 10 + 1;\n  cout &lt;&lt; number &lt;&lt; endl;\n  return 0;\n}\n</code></pre>\n\n<p>The reason why your code snippet returned the same random three times, is,</p>\n\n<pre><code>//This program generates three random numbers.\n\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\nusing std::endl;\nusing std::cout;\n\nint main()\n\n{\n  unsigned number;\n\n  srand(time(0));\n  number = rand() % 10 + 1;\n\n  cout &lt;&lt; number &lt;&lt; \"         \";\n  cout &lt;&lt; number &lt;&lt; \"         \";\n  cout &lt;&lt; number &lt;&lt; endl;\n  return 0;\n}\n</code></pre>\n\n<p>Value of 'Random' is assigned to number only once, and it will remain constant until it is assigned again.</p>\n\n<p>Hope you got me right ;)</p>\n"}, {"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1554321974, "post_id": 55503217, "comment_id": 97713141, "body": "Well, the solution would work, but from context and (seemingly applied) concept, the OP probably expects something like a lambda funciton."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1554320967, "creation_date": 1554320967, "answer_id": 55503217, "question_id": 55503108, "link": "https://stackoverflow.com/questions/55503108/how-to-generate-multiple-random-numbers/55503217#55503217", "title": "How to generate multiple random numbers?", "body": "<p>Assignments in C++ are not formulas that are applied every time the variable is used.  So when you do this:</p>\n\n<pre><code>number = rand() % 10 + 1;\n</code></pre>\n\n<p>You assign a value to <code>number</code> <strong>once</strong>, at the point in the program where it appears.</p>\n\n<p>If you want to get more random numbers, you need to call <code>rand</code> and assign to <code>number</code> multiple times.</p>\n\n<pre><code>number = rand() % 10 + 1;\ncout &lt;&lt; number &lt;&lt; \"         \";\nnumber = rand() % 10 + 1;\ncout &lt;&lt; number &lt;&lt; \"         \";\nnumber = rand() % 10 + 1;\ncout &lt;&lt; number &lt;&lt; endl;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1554323085, "post_id": 55503354, "comment_id": 97713648, "body": "I&#39;m not sure I&#39;d suggest lambdas to someone who doesn&#39;t yet completely understand how variable assignment works...maybe just a plain old vanilla function would be a little more friendly?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 1, "creation_date": 1554323358, "post_id": 55503354, "comment_id": 97713772, "body": "@scohe001 Well, some programming languages provide such <i>eval</i> behavior. Maybe, the OP comes with such knowledge. So I can&#39;t see what&#39;s bad about clarifying the misconception and providing an actual equivalent in standard c++ language."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 4, "last_activity_date": 1554323854, "last_edit_date": 1554323854, "creation_date": 1554321518, "answer_id": 55503354, "question_id": 55503108, "link": "https://stackoverflow.com/questions/55503108/how-to-generate-multiple-random-numbers/55503354#55503354", "title": "How to generate multiple random numbers?", "body": "<blockquote>\n  <p>At the moment, this program generates only one random number printed 3 times. How can I get it to print three different random numbers?</p>\n</blockquote>\n\n<p>You seem to have a heavy misconception what </p>\n\n<blockquote>\n<pre><code>number = rand() % 10 + 1;\n</code></pre>\n</blockquote>\n\n<p>really does.</p>\n\n<p>At the point you do that assignment </p>\n\n<blockquote>\n<pre><code>rand() % 10 + 1\n</code></pre>\n</blockquote>\n\n<p>the value of <code>number</code> is evaluated and stored <strong><em>once</em></strong> to the variable from that mentioned line above.</p>\n\n<p>Further accesses to <code>number</code> won't trigger that evaluation anymore.</p>\n\n<hr>\n\n<p>If you want to do the evaluation everytime you access a specific <em>\"variable\"</em>, you might want to use a <em>lambda function</em> instead:</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;ctime&gt;\n#include &lt;iostream&gt;\n\nint main() {\n\n    std::srand(std::time(nullptr));\n    auto number = []() {\n        return std::rand() % 10 + 1;\n    };\n\n    std::cout &lt;&lt; number() &lt;&lt; \"         \";\n    std::cout &lt;&lt; number() &lt;&lt; \"         \";\n    std::cout &lt;&lt; number() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Here's a <a href=\"http://coliru.stacked-crooked.com/a/6e243cf08c800ed0\" rel=\"nofollow noreferrer\">live demo</a></p>\n\n<hr>\n\n<blockquote>\n  <p>Also I'm surprised I didn't need the ctime header even though I used <code>time(0)</code>.</p>\n</blockquote>\n\n<p>It happens with specific compiler implementations that you're lucky and one of the already used standard headers already includes the required <code>ctime</code> header for the <code>time(0)</code> call.</p>\n\n<p>The safe and portable way you should rather write</p>\n\n<pre><code>#include &lt;ctime&gt;\n\n// ...\n    std::time(nullptr)\n// ...\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11307761"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "answer_count": 4, "score": 3, "last_activity_date": 1554323854, "creation_date": 1554320493, "last_edit_date": 1554322334, "question_id": 55503108, "link": "https://stackoverflow.com/questions/55503108/how-to-generate-multiple-random-numbers", "title": "How to generate multiple random numbers?", "body": "<p>At the moment, this program generates only one random number printed 3 times. How can I get it to print three different random numbers?</p>\n\n<p>Also I'm surprised I didn't need the ctime header even though I used time(0).</p>\n\n<pre><code>//This program generates three random numbers.\n\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\nusing std::endl;\nusing std::cout;\n\nint main() {\n    unsigned number;\n\n    srand(time(0));\n    number = rand() % 10 + 1;\n\n    cout &lt;&lt; number &lt;&lt; \"         \";\n    cout &lt;&lt; number &lt;&lt; \"         \";\n    cout &lt;&lt; number &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "graph", "path-finding"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1554320799, "post_id": 55503076, "comment_id": 97712541, "body": "<i>it gets stuck in an infinite loop for the rest of the test cases</i> sounds like a perfect time to break out the debugger and walk through the loop a time or two to see why it got stuck. If this tells you what you need in order to solve the problem, awesome! If not, use what you&#39;ve learned to conduct more experiments."}, {"owner": {"reputation": 23, "user_id": 9926715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0330668dbc9cd4f90fe14a4ce19b48?s=128&d=identicon&r=PG&f=1", "display_name": "Sank_BE", "link": "https://stackoverflow.com/users/9926715/sank-be"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1554321348, "post_id": 55503076, "comment_id": 97712836, "body": "I have no clue why it is getting stuck. As you can see, I have tried printing outputs. Forget about the rest of the question. Say, we have to find the minimum distance from one point to another. That&#39;s what the function min_distance() is doing. Why is it getting stuck or where is it logically wrong? Thanks."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1554322379, "post_id": 55503076, "comment_id": 97713341, "body": "<a href=\"https://en.wikipedia.org/wiki/Debugger\" rel=\"nofollow noreferrer\">What I mean by a debugger</a>"}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1554323251, "post_id": 55503076, "comment_id": 97713721, "body": "<a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a> <a href=\"https://stackoverflow.com/questions/2069367/how-to-debug-using-gdb\" title=\"how to debug using gdb\">stackoverflow.com/questions/2069367/how-to-debug-using-gdb</a>"}, {"owner": {"reputation": 23, "user_id": 9926715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0330668dbc9cd4f90fe14a4ce19b48?s=128&d=identicon&r=PG&f=1", "display_name": "Sank_BE", "link": "https://stackoverflow.com/users/9926715/sank-be"}, "edited": false, "score": 0, "creation_date": 1554334610, "post_id": 55503076, "comment_id": 97717394, "body": "Looks like program logic was correct. It was just taking awful lot of time. Looks like BFS using queue is the optimal way to solve the problem like this."}, {"owner": {"reputation": 23, "user_id": 9926715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0330668dbc9cd4f90fe14a4ce19b48?s=128&d=identicon&r=PG&f=1", "display_name": "Sank_BE", "link": "https://stackoverflow.com/users/9926715/sank-be"}, "edited": false, "score": 0, "creation_date": 1554349794, "post_id": 55503076, "comment_id": 97720570, "body": "I am answering my own question..."}], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 9926715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0330668dbc9cd4f90fe14a4ce19b48?s=128&d=identicon&r=PG&f=1", "display_name": "Sank_BE", "link": "https://stackoverflow.com/users/9926715/sank-be"}, "is_accepted": false, "score": 0, "last_activity_date": 1554349776, "creation_date": 1554349776, "answer_id": 55507546, "question_id": 55503076, "link": "https://stackoverflow.com/questions/55503076/question-based-on-shortest-longest-distance-from-source-to-destination/55507546#55507546", "title": "Question based on shortest longest distance from source to destination", "body": "<p>The logic is correct. There are no errors in the code. The problem is that the backtracking is taking awful lot of time. It is not very suitable to solve minimum distance problems when the matrices are dense. BFS is the optimal way to solve such problems.</p>\n"}], "owner": {"reputation": 23, "user_id": 9926715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0330668dbc9cd4f90fe14a4ce19b48?s=128&d=identicon&r=PG&f=1", "display_name": "Sank_BE", "link": "https://stackoverflow.com/users/9926715/sank-be"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 222, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1554349776, "creation_date": 1554320383, "last_edit_date": 1554323134, "question_id": 55503076, "link": "https://stackoverflow.com/questions/55503076/question-based-on-shortest-longest-distance-from-source-to-destination", "title": "Question based on shortest longest distance from source to destination", "body": "<p>Company wants to explore some of the rare elements for its semiconductor manufacturing. Scientists use one vehicle to explore the region in order to find the rare elements. The vehicle can move only in explored region where roads have already been constructed. The vehicle cannot move on unexplored region where roads are not there.  In the current situation, rare elements are present in explored region only. Unexplored regions do not contain any rare elements.\nSquare region is provided for exploration. Roads are represented by 1 and where roads are not present that area is represented by 0. Rare elements will only be on the roads where regions have already been explored. Vehicle can move in four directions \u2013 up, down, left and right.\nThe shortest path for vehicle to a rare element position is called Moving Path. The longest of the paths to all rare elements from a region called Longest Distance. \nScientists need to construct one research center so that the research center will be at the position where the longest path to the rare elements will be shortest. This is called Shortest Longest Distance.</p>\n\n<p>For example, Red, Blue and Green area represents Rare Element area. (2, 2) is represented as Red, (2, 8) is represented as Blue and (7, 8) is represented as Green. So there are three rare elements. \nIf research center is constructed at (4, 4) then say distance to Red rare element will be 4, distance to Blue rare element will be 6 and distance to Green rare element will be 7. So the Longest distance will be 7.</p>\n\n<p>Now using the same region above, if research center is constructed at (4, 5) then distance to Red rare element will be 5, distance to Blue rare element will be 5 and distance to Green rare element will be 6. So the Longest distance will be 6.\nSo when research center is constructed at (4, 5) then the longest distance will be shortest. And the value of the Shortest Longest Distance will be 6. This will be the output.\nThere can be multiple locations from where the shortest longest distance can be same. For example if research center is constructed at (5, 5) then still the Shortest Longest distance will be 6.\nSo write a program to find the Shortest Longest Distance.</p>\n\n<p>Constraints:\n\u2022 The region provided will be square region i.e. NxN (where 5 &lt;=  N &lt;= 20).</p>\n\n<p>\u2022 There can be minimum of 2 rare elements and maximum of 4 rare elements, i.e. 2 &lt;= C &lt;= 4.</p>\n\n<p>\u2022 Roads are represented by 1 while no road area is represented by 0.</p>\n\n<p>\u2022 Vehicle can move only on roads in explored area.</p>\n\n<p>\u2022 The rare elements will only be present where road are there. Rare elements will not be present where roads are not present.</p>\n\n<p>\u2022 Vehicle can move in UP, DOWN, LEFT and RIGHT directions.</p>\n\n<p>\u2022 The starting index for rare element is considers as 1.</p>\n\n<p>Input:</p>\n\n<p>\u2022 First line will be the number of test cases. Second line will indicate region area (N) and number of rare elements (C). </p>\n\n<p>Next C lines will contain the position of rare elements. </p>\n\n<p>After that N lines will provide the region details where to tell where roads are present and where roads are not present.</p>\n\n<p>Output:</p>\n\n<p>\u2022 Output #testcase followed by space and then shortest longest distance.</p>\n\n<p>Sample Input:</p>\n\n<pre><code>5\n5 2\n4 3\n3 4\n1 1 0 0 0\n1 1 0 0 0\n1 1 1 1 1\n1 1 1 0 1\n1 1 1 1 1\n8 2\n5 6\n6 4\n1 1 1 1 1 1 0 0\n1 1 1 1 1 1 1 0\n1 1 0 1 0 1 1 0\n1 1 1 1 0 1 1 0\n1 1 1 1 1 1 1 0\n1 1 1 1 1 1 1 0\n0 0 0 0 0 0 0 0\n0 0 0 0 0 0 0 0\n10 3\n8 2\n5 3\n7 1\n0 0 0 1 1 1 1 1 1 0\n1 1 1 1 1 1 1 1 1 0\n1 0 0 1 0 0 0 0 1 0\n1 1 1 1 1 1 1 1 1 1\n1 1 1 1 0 1 0 0 1 1\n1 1 1 1 0 1 0 0 1 1\n1 1 1 1 0 1 0 0 1 1\n1 1 1 1 1 1 1 1 1 1\n1 1 1 0 0 1 0 0 1 1\n1 1 1 1 1 1 1 1 1 1\n15 4\n11 15\n15 9\n1 2\n14 3\n1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\n1 0 1 1 1 1 1 1 1 1 1 1 1 0 1\n1 0 1 0 0 0 1 0 0 0 0 1 1 0 1\n1 0 1 0 0 0 1 0 0 0 0 1 1 0 1\n1 0 1 1 1 1 1 1 1 1 1 1 1 1 1\n1 0 1 0 0 0 1 0 0 0 0 1 1 0 1\n1 0 1 0 0 0 1 1 1 1 1 1 1 1 1\n1 0 1 0 0 0 1 0 0 0 0 1 1 0 1\n1 0 1 0 0 0 1 0 0 0 0 1 1 0 1\n1 0 1 0 0 0 1 0 0 0 0 1 1 0 1\n1 0 1 0 0 0 1 0 0 0 0 1 1 0 1\n1 0 1 0 0 0 1 0 0 0 0 1 1 0 1\n1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\n0 0 1 0 0 0 1 1 1 1 1 1 1 0 1\n0 0 1 1 1 1 1 1 1 1 1 1 1 1 1\n20 4\n13 6\n20 4\n1 2\n17 16\n1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0\n1 0 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0\n1 0 1 0 0 0 0 0 0 0 1 0 0 1 1 0 0 0 0 0\n1 0 1 0 0 0 0 0 0 0 1 0 0 1 1 0 0 0 0 0\n1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0\n1 0 1 0 0 0 0 0 0 0 1 0 0 1 1 1 0 0 0 0\n1 0 1 0 0 0 0 0 0 0 1 0 0 1 1 1 0 0 0 0\n1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\n1 0 1 0 0 0 0 0 0 0 1 0 0 1 1 1 0 0 1 1\n1 0 1 0 0 0 0 0 0 0 1 0 0 1 1 1 0 0 1 1\n1 0 1 0 0 0 0 0 0 0 1 0 0 1 1 1 0 0 1 1\n1 0 1 0 0 0 0 0 0 0 1 0 0 1 1 1 0 0 1 1\n1 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 1 1\n1 0 1 0 0 0 0 0 0 0 1 0 0 0 1 1 0 0 1 1\n1 0 1 0 0 0 0 0 0 0 1 0 0 0 1 1 0 0 1 1\n1 0 1 0 0 0 0 0 0 0 1 0 0 0 1 1 0 0 1 1\n1 0 1 0 0 0 0 0 0 0 1 0 0 0 1 1 0 0 1 1\n1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\n1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\n1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0\n</code></pre>\n\n<p>Sample Output:</p>\n\n<pre><code>#1 1\n#2 2\n#3 2\n#4 12\n#5 15\n</code></pre>\n\n<p>I have tried solving this question using the backtracking approach. It is giving me correct output for testcase #1 and #2 but it gets stuck in an infinite loop for the rest of the test cases. </p>\n\n<pre><code>#include&lt;iostream&gt;\n\n#include&lt;fstream&gt;\n\nusing namespace std;\n\nint a[22][22];\nint x[4];\nint y[4];\nbool visit[22][22];\nint N;\nint ele; //Number of rare elements\n\nvoid unvisit()\n{\n    for(int i=0;i&lt;N;++i)\n    {\n        for(int j=0;j&lt;N;++j)\n        {\n            visit[i][j]=false;\n        }\n    }\n}\n\nbool isSafe(int x, int y)\n{\n    if(x&gt;=N || y&gt;=N || x&lt;0 || y&lt;0 || a[x][y]==0 || visit[x][y]==true )\n        return false;\n    return true;\n}\nint min_distance(int x, int y,  int d_x, int d_y, int dis)\n{\n    //cout&lt;&lt;\"x:\"&lt;&lt;x&lt;&lt;\" \"&lt;&lt;\"y:\"&lt;&lt;y&lt;&lt;\" \"&lt;&lt;dis&lt;&lt;\" \"&lt;&lt;d_x&lt;&lt;\" \"&lt;&lt;d_y&lt;&lt;endl;\n    int left=999,right=999,up=999,down=999;\n    if(x==d_x &amp;&amp; y==d_y)\n    {\n        //cout&lt;&lt;\"MATCH:\"&lt;&lt;dis&lt;&lt;endl;\n        return dis;\n    }\n    //cout&lt;&lt;min_dis;\n    visit[x][y]=true;\n\n\n        if(isSafe(x,y+1))\n            right=min_distance(x,y+1,d_x,d_y,dis+1);\n        if(isSafe(x,y-1))\n            left=min_distance(x,y-1,d_x,d_y,dis+1);\n        if(isSafe(x+1,y))\n            down=min_distance(x+1,y,d_x,d_y,dis+1);\n        if(isSafe(x-1,y))\n            up=min_distance(x-1,y,d_x,d_y,dis+1);\n\n        visit[x][y]=false;\n\n        return min(min(min(right,left),down),up);\n\n\n\n\n\n}\n\nint main()\n{\n    int d1=-999,d2=999;\n\n\n    fstream myfile;\n\n    myfile.open(\"Input.txt\");\n\n\n\n    myfile&gt;&gt;N&gt;&gt;ele;\n\n\n\n    for(int i=0;i&lt;ele;++i)\n    {\n        myfile&gt;&gt;x[i]&gt;&gt;y[i];\n    }\n\n    for(int i=0;i&lt;N;++i)\n    {\n        for(int j=0;j&lt;N;++j)\n        {\n            myfile&gt;&gt;a[i][j];\n        }\n    }\n\n    for(int i=0;i&lt;N;++i)\n    {\n        for(int j=0;j&lt;N;++j)\n        {\n\n            if(a[i][j]==1)\n            {\n                d1=-999;\n            for(int k=0;k&lt;ele;++k)\n            {\n                //cout&lt;&lt;i&lt;&lt;\" \"&lt;&lt;j&lt;&lt;\" \"&lt;&lt;endl;\n\n\n                unvisit();\n                d1=max(d1,min_distance(i,j,x[k],y[k],0));\n\n                //cout&lt;&lt;\"x:\"&lt;&lt;i&lt;&lt;\" \"&lt;&lt;\"y:\"&lt;&lt;j&lt;&lt;\" \"&lt;&lt;\"d1:\"&lt;&lt;d1&lt;&lt;endl;;\n\n            }\n            }\n\n        d2=min(d2,d1);\n        //cout&lt;&lt;\"d2:\"&lt;&lt;d2&lt;&lt;endl;\n\n\n\n\n        }\n    }\n\n    cout&lt;&lt;d2&lt;&lt;endl;\n\n    myfile.close();\n\n    return 0;\n\n\n\n\n}\n</code></pre>\n\n<p>Can someone tell me why my solution is not working? Thanks!</p>\n"}, {"tags": ["c++", "opengl", "assimp"], "comments": [{"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 2, "creation_date": 1554320643, "post_id": 55503026, "comment_id": 97712476, "body": "The field of view angle is set in degrees (<code>45.0f</code>). The angle for <a href=\"https://glm.g-truc.net/0.9.9/api/a00665.html#ga747c8cf99458663dd7ad1bb3a2f07787\" rel=\"nofollow noreferrer\"><code>glm::perspective</code></a> has to be in radians (<code>glm::radians(45.0f)</code>)."}, {"owner": {"reputation": 85, "user_id": 8010380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b012f2f357a171ec4845fb1f3a3b208?s=128&d=identicon&r=PG&f=1", "display_name": "Mostapha Rammo", "link": "https://stackoverflow.com/users/8010380/mostapha-rammo"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1554320928, "post_id": 55503026, "comment_id": 97712606, "body": "@Rabbid76 Unfortunately that doesn&#39;t fix the issue, is there any other kind of information I can provide that would help you help me with the problem?"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1554321034, "post_id": 55503026, "comment_id": 97712663, "body": "Possibly the issue is related to <a href=\"https://stackoverflow.com/questions/46839586/opengl-object-in-c-raii-class-no-longer-works\">OpenGL object in C++ RAII class no longer works</a>. Does the class <code>Mesh</code> have a &quot;move&quot; constructor? Put a breakpoint to <code>Mesh::~Mesh()</code> and see what happens."}, {"owner": {"reputation": 85, "user_id": 8010380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b012f2f357a171ec4845fb1f3a3b208?s=128&d=identicon&r=PG&f=1", "display_name": "Mostapha Rammo", "link": "https://stackoverflow.com/users/8010380/mostapha-rammo"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1554321258, "post_id": 55503026, "comment_id": 97712779, "body": "No it doesn&#39;t, all the Mesh class methods are defined in mesh.cxx so only constructor, destructor and Mesh::Draw()"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1554321434, "post_id": 55503026, "comment_id": 97712872, "body": "The attribute <code>meshes</code> int eh class <code>Model</code> is a <code>std::vector</code> isn&#39;t it? The <code>Mesh</code> object is add to the container by <code>push_back</code> isn&#39;t it?"}, {"owner": {"reputation": 85, "user_id": 8010380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b012f2f357a171ec4845fb1f3a3b208?s=128&d=identicon&r=PG&f=1", "display_name": "Mostapha Rammo", "link": "https://stackoverflow.com/users/8010380/mostapha-rammo"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1554321696, "post_id": 55503026, "comment_id": 97713006, "body": "Exactly, in <code>Model::processNode()</code> I <code>push_back</code> the newly created mesh to <code>Model</code>&#39;s meshes vector.  Then once <code>Model::Draw()</code> is called I iteratively draw every mesh in meshes"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 2, "creation_date": 1554322011, "post_id": 55503026, "comment_id": 97713161, "body": "Yes, when the <code>Mesh</code> object is pushed to the <code>std::vector</code> a new object in the dynamic memory of the <code>std::vector</code> is allocated. The original object is copied to the new object and the original object is destructed -&gt; <code>glDeleteVertexArrays(1, &amp;VAO);</code>. So the <code>VAO</code> is destroyed. This is C++ basic and exactly this issue is pointed out in the question which is linked above."}], "owner": {"reputation": 85, "user_id": 8010380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b012f2f357a171ec4845fb1f3a3b208?s=128&d=identicon&r=PG&f=1", "display_name": "Mostapha Rammo", "link": "https://stackoverflow.com/users/8010380/mostapha-rammo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 340, "favorite_count": 0, "closed_date": 1554322038, "answer_count": 0, "score": 1, "last_activity_date": 1554320161, "creation_date": 1554320161, "question_id": 55503026, "link": "https://stackoverflow.com/questions/55503026/3d-model-not-drawing-on-screen-opengl", "closed_reason": "Duplicate", "title": "3D model not drawing on screen OpenGL", "body": "<p>I'm trying to setup a simple OpenGL framework for a project and I'm running into a problem displaying my .obj model object.  From what I can tell, the object is being loaded in fine using <code>assimp</code>, and all it's meshes should be drawn onto the screen but I'm not seeing anything.. </p>\n\n<p>I'll walk you through the whole process from loading the .obj all the way to where I draw it.  First lets get some need to know files out of the way:</p>\n\n<p>main.cxx</p>\n\n<pre><code>int main() \n{\n\n    Display display(800, 600, \"project2\");\n\n    Model model(\"./models/nanosuit/nanosuit.obj\");\n    Shader shader(\"./shaders/shader\");  \n    Texture texture(\"./textures/wall.jpg\");\n\n    int width, height;\n    glfwGetWindowSize(display.GetWindow(), &amp;width, &amp;height);\n    Camera camera(glm::vec3(0, 0, -5.0f), 45.0f, (float)width/height, 0.1f, 1000.0f); \n\n    Transform transform;\n\n    while (!display.IsClosed())\n    {\n        display.ProcessInput();\n        display.Clear(0.0f, 0.15f, 0.3f, 1.0f);\n\n        shader.Bind();\n        texture.Bind(0);\n\n        shader.Update(transform, camera);\n        model.Draw();\n\n        display.Update();\n    } \n\n    return 0;\n}\n</code></pre>\n\n<p>Shader::Update()</p>\n\n<pre><code>void Shader::Update(const Transform&amp; transform, const Camera&amp; camera)\n{\n    glm::mat4 trans = camera.GetViewProjection() * transform.GetModel();\n    glUniformMatrix4fv(uniforms[TRANSFORM_U], 1, GL_FALSE, &amp;trans[0][0]);\n}\n</code></pre>\n\n<p>vertex shader</p>\n\n<pre><code>#version 330 core\nlayout (location=0) in vec3 position;\nlayout (location=1) in vec2 texCoord;\nlayout (location=2) in vec3 normal;\n\nout vec2 texCoord0;\nout vec3 normal0;\n\nuniform mat4 transform;\n\nvoid main() {\n    gl_Position = transform * vec4(position, 1.0);\n    texCoord0 = texCoord;\n    normal0 = (transform * vec4(normal, 0.0)).xyz; \n}\n</code></pre>\n\n<p>fragment shader </p>\n\n<pre><code>#version 330 core\n\nout vec4 FragColor;\nuniform sampler2D diffuse;\nin vec2 texCoord0;\nin vec3 normal0;\n\nvoid main() {\n    FragColor =     texture(diffuse, texCoord0);\n}\n</code></pre>\n\n<p>I start by loading the model in my Model class's constructor </p>\n\n<p><code>Model model(\"./models/nanosuit/nanosuit.obj\");</code></p>\n\n<p>model.cxx</p>\n\n<pre><code>Model::Model(const std::string&amp; filePath)\n{\n    Assimp::Importer import;\n    const aiScene *scene = import.ReadFile(filePath, aiProcess_Triangulate | aiProcess_FlipUVs);\n\n    if(!scene || scene-&gt;mFlags &amp; AI_SCENE_FLAGS_INCOMPLETE || !scene-&gt;mRootNode) \n    {\n        std::cout &lt;&lt; \"ERROR::ASSIMP::\" &lt;&lt; import.GetErrorString() &lt;&lt; std::endl;\n        return;\n    }\n    //directory = filePath.substr(0, filePath.find_last_of('/'));\n\n    processNode(scene-&gt;mRootNode, scene);\n}\n\n\nvoid Model::Draw()\n{\n    for (unsigned int i = 0; i &lt; meshes.size(); ++i)\n        meshes[i].Draw();\n}\n\nvoid Model::processNode(aiNode *node, const aiScene *scene)\n{\n    for (unsigned int i = 0; i &lt; node-&gt;mNumMeshes; ++i)\n    {\n        aiMesh *mesh = scene-&gt;mMeshes[node-&gt;mMeshes[i]];\n        meshes.push_back(processMesh(mesh, scene));\n    }\n    for (unsigned int i = 0; i &lt; node-&gt;mNumChildren; i++)\n    {\n        processNode(node-&gt;mChildren[i], scene);\n    }\n}\n\nMesh Model::processMesh(aiMesh *mesh, const aiScene *scene)\n{\n    std::vector&lt;Vertex&gt; vertices;\n    std::vector&lt;unsigned int&gt; indices;\n\n    for (unsigned int i = 0; i &lt; mesh-&gt;mNumVertices; ++i)\n    {\n        glm::vec3 position = glm::vec3(mesh-&gt;mVertices[i].x, mesh-&gt;mVertices[i].y, mesh-&gt;mVertices[i].z);\n        glm::vec2 texCoords = glm::vec2(0.0f);\n        if(mesh-&gt;mTextureCoords[0])\n            texCoords = glm::vec2(mesh-&gt;mTextureCoords[0][i].x, mesh-&gt;mTextureCoords[0][i].y);\n        glm::vec3 normal = glm::vec3(mesh-&gt;mNormals[i].x, mesh-&gt;mNormals[i].y, mesh-&gt;mNormals[i].z);\n\n        Vertex vertex(position, texCoords, normal);\n\n        vertices.push_back(vertex);\n    }\n\n    // process indices\n    for(unsigned int i = 0; i &lt; mesh-&gt;mNumFaces; i++)\n    {\n        aiFace face = mesh-&gt;mFaces[i];\n        for(unsigned int j = 0; j &lt; face.mNumIndices; j++)\n            indices.push_back(face.mIndices[j]);\n    }  \n\n    return Mesh(&amp;vertices[0], vertices.size(), &amp;indices[0], indices.size());\n}\n</code></pre>\n\n<p>This in turn creates a list of meshes, which are then drawn on screen by calling </p>\n\n<p><code>Model::Draw()</code></p>\n\n<p>For your reference here is my mesh class</p>\n\n<p>mesh.cxx</p>\n\n<pre><code>Mesh::Mesh(Vertex *vertices, unsigned int numVertices, unsigned int* indices, unsigned int numIndices)\n{\n    std::vector&lt;glm::vec3&gt; positions;\n    std::vector&lt;glm::vec2&gt; texCoords;\n    std::vector&lt;glm::vec3&gt; normals;\n\n    for (unsigned int i = 0; i &lt; numVertices; ++i)\n    {\n        positions.push_back(vertices[i].GetPos());\n        texCoords.push_back(vertices[i].GetTexCoord());\n        normals.push_back(vertices[i].GetNormal());\n    }\n\n    drawCount = numIndices;\n\n    glGenVertexArrays(1, &amp;VAO);\n    glBindVertexArray(VAO);\n\n    glGenBuffers(NUM_BUFFERS, VBO);\n\n    // positions\n    glBindBuffer(GL_ARRAY_BUFFER, VBO[POSITION_VB]);\n    glBufferData(GL_ARRAY_BUFFER, positions.size() * sizeof(positions[0]), &amp;positions[0], GL_STATIC_DRAW);\n\n    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, 0);\n    glEnableVertexAttribArray(0);\n\n    // texCoords\n    glBindBuffer(GL_ARRAY_BUFFER, VBO[TEXCOORD_VB]);\n    glBufferData(GL_ARRAY_BUFFER, positions.size() * sizeof(texCoords[0]), &amp;texCoords[0], GL_STATIC_DRAW);\n\n    glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 0, 0);\n    glEnableVertexAttribArray(1);\n\n    // normals\n    glBindBuffer(GL_ARRAY_BUFFER, VBO[NORMAL_VB]);\n    glBufferData(GL_ARRAY_BUFFER, normals.size()  * sizeof(normals[0]), &amp;normals[0], GL_STATIC_DRAW);\n\n    glVertexAttribPointer(2, 3, GL_FLOAT, GL_FALSE, 0, 0);\n    glEnableVertexAttribArray(2);\n\n    // indices\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, VBO[INDEX_VB]);\n    glBufferData(GL_ELEMENT_ARRAY_BUFFER, numIndices * sizeof(indices[0]), &amp;indices[0], GL_STATIC_DRAW);\n\n    glBindVertexArray(0);\n}\n\nMesh::~Mesh()\n{\n    glDeleteVertexArrays(1, &amp;VAO);\n}\n\nvoid Mesh::Draw()\n{\n    glBindVertexArray(VAO);\n\n    glDrawElements(GL_TRIANGLES, drawCount, GL_UNSIGNED_INT, 0);\n\n    glBindVertexArray(0);\n}\n</code></pre>\n\n<p>I've verified that the model vertices are in fact received by the Mesh::Draw() method and they should be drawn.. But again no output in the window :(</p>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1554319180, "post_id": 55502720, "comment_id": 97711736, "body": "@Barry <code>move_n == move_if</code>?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1554319317, "post_id": 55502720, "comment_id": 97711808, "body": "@Barry Sure.  For one thing <code>move_if</code> would have to use a forward iterator to enable the OP&#39;s proposed semantics but all of the other related algorithms use input iterators."}], "answers": [{"comments": [{"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "edited": false, "score": 1, "creation_date": 1554320827, "post_id": 55503064, "comment_id": 97712560, "body": "Hmmm, that&#39;s reasonable.  Now that I think about it, this can be accomplished with <code>std::partition</code> and <code>std::move</code> algorithms."}, {"owner": {"reputation": 8829, "user_id": 79111, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/O31rq.png?s=128&g=1", "display_name": "Ton van den Heuvel", "link": "https://stackoverflow.com/users/79111/ton-van-den-heuvel"}, "edited": false, "score": 1, "creation_date": 1584439120, "post_id": 55503064, "comment_id": 107430146, "body": "Another caveat of <code>move_if</code> as implemented in your answer is that the predicate needs to take its argument by reference, otherwise, the value to be potentially moved is moved into the predicate argument instead of the output range."}, {"owner": {"reputation": 8829, "user_id": 79111, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/O31rq.png?s=128&g=1", "display_name": "Ton van den Heuvel", "link": "https://stackoverflow.com/users/79111/ton-van-den-heuvel"}, "edited": false, "score": 0, "creation_date": 1584461165, "post_id": 55503064, "comment_id": 107440957, "body": "The move is implicit by the use of <code>std::make_move_iterator</code>. So the following for example already has issues, suppose <code>v</code> and <code>w</code> are both of type <code>std::vector&lt;std::string&gt;</code>: <code>move_if(v.begin(), v.end(), std::back_inserter(w), [](std::string s) { return true; })</code>. Now, both <code>v</code> and <code>w</code> will contain empty strings. The character data itself is lost. I agree that the predicate should take its argument by const reference, but breaking the code by not having a const reference there is at least surprising."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 11, "last_activity_date": 1554320537, "last_edit_date": 1554320537, "creation_date": 1554320322, "answer_id": 55503064, "question_id": 55502720, "link": "https://stackoverflow.com/questions/55502720/why-is-there-no-stdmove-if-algorithm/55503064#55503064", "title": "Why is there no std::move_if algorithm?", "body": "<p>If <code>move_if</code> existed as an algorithm, it would have to be specified as:</p>\n\n<pre><code>template &lt;class InputIt, class OutputIt, class UnaryPredicate&gt;\nOutputIt move_if(InputIt first, InputIt last, OutputIt d_first, UnaryPredicate pred)\n{\n    return std::copy_if(std::make_move_iterator(first), std::make_move_iterator(last),\n        d_first, pred);\n}\n</code></pre>\n\n<p>We are very used to thinking of the difference between copying and moving as simply a matter of whether or not we care about the source object. We still do? Copy. We don't? Move. Having <code>move_if(f, l, d, pred)</code> do something <em>semantically different</em> than <code>copy_if(f, l, d, pred)</code> seems inherently confusing and error-prone - since the inevitable usage of it would be to do a \"copy where we don't care about the source anymore.\"</p>\n\n<p>But then - you're more or less describing the problems with this algorithm in your question. When would I use this? I would end up with a source range where some of the elements are moved-from but others aren't. What could I do with such a range? I couldn't coalesce them somehow since I don't know which ones they are or anything. Moving those elements to the back <em>is</em> useful - and we <em>do</em> have that algorithm: <code>remove_if</code>.</p>\n\n<p>Basically the only thing I could do with the source range at this point is destroy it. Maybe that's useful. Maybe that's useful enough to even merit this algorithm in <code>std::</code>. I don't know. But <code>move_if</code> definitely needs to do the same thing as <code>copy_if</code>.</p>\n"}], "owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 845, "favorite_count": 1, "accepted_answer_id": 55503064, "answer_count": 1, "score": 7, "last_activity_date": 1554320537, "creation_date": 1554319000, "last_edit_date": 1554320455, "question_id": 55502720, "link": "https://stackoverflow.com/questions/55502720/why-is-there-no-stdmove-if-algorithm", "title": "Why is there no std::move_if algorithm?", "body": "<p>I've seen a few places on the internet where they describe using <code>std::copy_if</code> with <code>std::make_move_iterator</code>, but if the iterator were to be a forward iterator, that would result in having valid but unspecified (VBU) objects scattered around the source container.</p>\n\n<p>Wouldn't it be better to have a <code>std::move_if</code> algorithm such that if an object is moved, then it would move the resulting VBU object to the end of the range, like that which is done in the <code>std::remove_if</code> algorithm, consolidating all of the VBU objects together so that they can be erased or reassigned?</p>\n"}, {"tags": ["c++", "curl"], "comments": [{"owner": {"reputation": 1220, "user_id": 796375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kYKRy.jpg?s=128&g=1", "display_name": "cfillion", "link": "https://stackoverflow.com/users/796375/cfillion"}, "edited": false, "score": 0, "creation_date": 1554319259, "post_id": 55502707, "comment_id": 97711775, "body": "The issue is likely to be in the application code, not shown in the question."}, {"owner": {"reputation": 21, "user_id": 11215418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5cc30f4612182220a3f094961fb960?s=128&d=identicon&r=PG&f=1", "display_name": "Tarface", "link": "https://stackoverflow.com/users/11215418/tarface"}, "reply_to_user": {"reputation": 1220, "user_id": 796375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kYKRy.jpg?s=128&g=1", "display_name": "cfillion", "link": "https://stackoverflow.com/users/796375/cfillion"}, "edited": false, "score": 0, "creation_date": 1554322488, "post_id": 55502707, "comment_id": 97713393, "body": "Yes, but I don&#39;t know how to narrow it down because it&#39;s not giving me any hint as to what&#39;s causing it. I can&#39;t just post thousands of lines of code and say &quot;go find the problem&quot;, can I? I&#39;m just wondering if anyone might know probable causes so I might be able to narrow it down."}], "owner": {"reputation": 21, "user_id": 11215418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5cc30f4612182220a3f094961fb960?s=128&d=identicon&r=PG&f=1", "display_name": "Tarface", "link": "https://stackoverflow.com/users/11215418/tarface"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554319066, "creation_date": 1554318941, "last_edit_date": 1554319066, "question_id": 55502707, "link": "https://stackoverflow.com/questions/55502707/debugging-curl-unhandled-exception", "title": "debugging curl unhandled exception", "body": "<p>This is a bit of a difficult issue for me to debug properly because it doesn't always happen and whether it occurs or not seems to be a matter of chance. What I'm doing is having the user set up several times. One \"due date\" time and several \"warning\" times. When these times pass, they receive a text on a provided phone number. Usually this works, but on a rare occassion, I'll get an unhandled exception from easy.c provided by curl.</p>\n\n<pre><code>#undef curl_easy_getinfo\nCURLcode curl_easy_getinfo(struct Curl_easy *data, CURLINFO info, ...)\n{\n  va_list arg;\n  void *paramp;\n  CURLcode result;\n\n  va_start(arg, info);\n  paramp = va_arg(arg, void *);\n\n  result = Curl_getinfo(data, info, paramp);\n\n  va_end(arg);\n  return result;\n}\n</code></pre>\n\n<p>This occurs on the line \"result = Curl_getinfo(data, info, paramp);\" </p>\n\n<p><em>Unhandled exception thrown: read access violation.\n<strong>data</strong> was 0x7E8DD8. occurred</em></p>\n\n<p>I'm not sure why this error is occurring and it's very hard to test for it since it's occurrence is so rare and inconsistent even under identical circumstances.</p>\n\n<p>I did save the callstack if that helps, but I was wondering if anyone might have a general idea of what could be causing this or if there are any tips for debugging in an inconsistent situation like this.</p>\n\n<pre><code>     Schedule490.exe!getinfo_long(Curl_easy * data, CURLINFO info, long * param_longp) Line 152    C\n     Schedule490.exe!Curl_getinfo(Curl_easy * data, CURLINFO info, ...) Line 461    C\n&gt;    Schedule490.exe!curl_easy_getinfo(Curl_easy * data, CURLINFO info, ...) Line 844    C\n     Schedule490.exe!twilio::Twilio::send_message(class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; const &amp;,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; const &amp;,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; const &amp;,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; &amp;,bool)    C++\n     Schedule490.exe!Schedule::dateWarnAlert(struct tm,class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;)    C++\n     Schedule490.exe!Schedule::nextUpdate(void)    C++\n     Schedule490.exe!std::_Invoker_pmf_refwrap::_Call&lt;void ( Schedule::*)(void),class std::reference_wrapper&lt;class Schedule&gt; &gt;(void ( Schedule::*)(void),class std::reference_wrapper&lt;class Schedule&gt; &amp;&amp;)    C++\n     Schedule490.exe!std::invoke&lt;void ( Schedule::*)(void),class std::reference_wrapper&lt;class Schedule&gt; &gt;(void ( Schedule::*&amp;&amp;)(void),class std::reference_wrapper&lt;class Schedule&gt; &amp;&amp;)    C++\n     Schedule490.exe!std::_LaunchPad&lt;class std::unique_ptr&lt;class std::tuple&lt;void ( Schedule::*)(void),class std::reference_wrapper&lt;class Schedule&gt; &gt;,struct std::default_delete&lt;class std::tuple&lt;void ( Schedule::*)(void),class std::reference_wrapper&lt;class Schedule&gt; &gt; &gt; &gt; &gt;::_Execute&lt;0,1&gt;(class std::tuple&lt;void ( Schedule::*)(void),class std::reference_wrapper&lt;class Schedule&gt; &gt; &amp;,struct std::integer_sequence&lt;unsigned int,0,1&gt;)    C++\n     Schedule490.exe!std::_LaunchPad&lt;class std::unique_ptr&lt;class std::tuple&lt;void ( Schedule::*)(void),class std::reference_wrapper&lt;class Schedule&gt; &gt;,struct std::default_delete&lt;class std::tuple&lt;void ( Schedule::*)(void),class std::reference_wrapper&lt;class Schedule&gt; &gt; &gt; &gt; &gt;::_Run(class std::_LaunchPad&lt;class std::unique_ptr&lt;class std::tuple&lt;void ( Schedule::*)(void),class std::reference_wrapper&lt;class Schedule&gt; &gt;,struct std::default_delete&lt;class std::tuple&lt;void ( Schedule::*)(void),class std::reference_wrapper&lt;class Schedule&gt; &gt; &gt; &gt; &gt; *)    C++\n     Schedule490.exe!std::_LaunchPad&lt;class std::unique_ptr&lt;class std::tuple&lt;void ( Schedule::*)(void),class std::reference_wrapper&lt;class Schedule&gt; &gt;,struct std::default_delete&lt;class std::tuple&lt;void ( Schedule::*)(void),class std::reference_wrapper&lt;class Schedule&gt; &gt; &gt; &gt; &gt;::_Go(void)    C++\n     Schedule490.exe!std::_Pad::_Call_func(void *)    C++\n     Schedule490.exe!invoke_thread_procedure(unsigned int(__stdcall*)(void *) procedure, void * const context) Line 92    C++\n     Schedule490.exe!thread_start&lt;unsigned int (__stdcall*)(void *)&gt;(void * const parameter) Line 115    C++\n     kernel32.dll!@BaseThreadInitThunk@12()    Unknown\n     ntdll.dll!__RtlUserThreadStart()    Unknown\n     ntdll.dll!__RtlUserThreadStart@8()    Unknown\n</code></pre>\n"}, {"tags": ["c++", "c++11", "templates"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1554318637, "post_id": 55502583, "comment_id": 97711495, "body": "how would you know where the &quot;templated block&quot; stops?"}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 2, "creation_date": 1554318694, "post_id": 55502583, "comment_id": 97711511, "body": "I mean the pragmatic answer is probably &quot;no one proposed it&quot; since I don&#39;t think I&#39;ve seen a proposal for it"}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1554318695, "post_id": 55502583, "comment_id": 97711513, "body": "Once you delve into rougher template waters, this will become really confusing."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 4, "creation_date": 1554318794, "post_id": 55502583, "comment_id": 97711555, "body": "This looks like a reasonable idea in your example. I don&#39;t feel very convinced that it will work well in all cases though. Nested templates, template classes with templated methods etc. You would have to mix the two at the very least, and that in itself could be confusing."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1554318833, "post_id": 55502583, "comment_id": 97711574, "body": "i dont think there can be any better answer than &quot;Because thats how the rules are&quot;. That being said, i remember Bjarne telling stories from the very start of standardization and he said the comitee was very cautious with templates and on purpose made template syntax clumsy because at that time nobody was used to templates and what is unusual should have unusual syntax"}, {"owner": {"reputation": 13842, "user_id": 759253, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0136e90dfd678a82c1dbba77dcbfc28e?s=128&d=identicon&r=PG", "display_name": "Igor R.", "link": "https://stackoverflow.com/users/759253/igor-r"}, "edited": false, "score": 0, "creation_date": 1554320404, "post_id": 55502583, "comment_id": 97712348, "body": "&quot;namespace template&quot; could be an interesting idea..."}], "owner": {"reputation": 241, "user_id": 6817794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7badea8879e7d79d8ce4d1c67f471d8?s=128&d=identicon&r=PG&f=1", "display_name": "kapil", "link": "https://stackoverflow.com/users/6817794/kapil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1554318706, "creation_date": 1554318461, "last_edit_date": 1554318706, "question_id": 55502583, "link": "https://stackoverflow.com/questions/55502583/why-c-does-has-not-provided-the-ability-to-bundle-multiple-functions-class-d", "title": "Why c++ does has not provided the ability to bundle multiple functions / class definitions under the same template declaration?", "body": "<p>I was writing code for a templated class and realised that for every function, we have to write template declaration for each member function while defining it.\nEg.</p>\n\n<pre><code>template &lt;typename T&gt;\nclass A {\n  public:\n    T func1();\n    T func2();\n};\n\ntemplate&lt;typename T&gt;\nT A&lt;T&gt;::func1() {/* code */}\ntemplate&lt;typename T&gt;\nT A&lt;T&gt;::func2() {/* code */}\n</code></pre>\n\n<p>Is there any specific reason that c++ does not provide functionality to write this with a syntax something like below :</p>\n\n<pre><code>template &lt;typename T&gt; { // start of Templated block\nclass A {\n  public:\n    T func1();\n    T func2();\n};\n\nT A&lt;T&gt;::func1() {/* code */}\nT A&lt;T&gt;::func2() {/* code */}\n} // This closing brace marks the end of templated block. one template declaration for multiple definitions.\n</code></pre>\n"}, {"tags": ["c++", "pi"], "comments": [{"owner": {"reputation": 93172, "user_id": 1734130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AZ5Sn.png?s=128&g=1", "display_name": "mvp", "link": "https://stackoverflow.com/users/1734130/mvp"}, "edited": false, "score": 4, "creation_date": 1554318726, "post_id": 55502561, "comment_id": 97711529, "body": "Did you mean to use <code>j</code> instead of <code>iteration</code> in <code>sum += sign * 4.0 &#47; ((2 * j) * (2 * j + 1.0) * (2 * j + 2.0))</code>?"}, {"owner": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "edited": false, "score": 0, "creation_date": 1554319521, "post_id": 55502561, "comment_id": 97711886, "body": "You should define <code>iteration</code> as integer since you declared it as such. A minor correction: <code>int iteration = 0;</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1554319636, "post_id": 55502561, "comment_id": 97711941, "body": "Unrelated: <a href=\"https://stackoverflow.com/questions/31816095/why-should-i-not-include-bits-stdc-h\">Do not <code>#include&lt;bits&#47;stdc++.h&gt;</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 178, "user_id": 5396095, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IDb1FSLNLzk/AAAAAAAAAAI/AAAAAAAAAC0/yy90p8_VuMM/photo.jpg?sz=128", "display_name": "Mohammad Nasirifar", "link": "https://stackoverflow.com/users/5396095/mohammad-nasirifar"}, "edited": false, "score": 1, "creation_date": 1554318711, "post_id": 55502628, "comment_id": 97711523, "body": "And start with sign = 1.0"}, {"owner": {"reputation": 11, "user_id": 11307593, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s3jom7qWvR0/AAAAAAAAAAI/AAAAAAAAAgI/hUWqP9xrd2k/photo.jpg?sz=128", "display_name": "Julian Rooms", "link": "https://stackoverflow.com/users/11307593/julian-rooms"}, "edited": false, "score": 0, "creation_date": 1554318846, "post_id": 55502628, "comment_id": 97711583, "body": "Thank you! I just changed it, but it still does not converge to pi (10,000 as an input -&gt; 2.8584072589874267578125 as an output). Could it be, that I need to use other data-types?"}, {"owner": {"reputation": 11, "user_id": 11307593, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s3jom7qWvR0/AAAAAAAAAAI/AAAAAAAAAgI/hUWqP9xrd2k/photo.jpg?sz=128", "display_name": "Julian Rooms", "link": "https://stackoverflow.com/users/11307593/julian-rooms"}, "edited": false, "score": 1, "creation_date": 1554318909, "post_id": 55502628, "comment_id": 97711616, "body": "Perfect, I missed the start with sign = 1.0 and it does work now. Thanks a lot for the rapid answer."}], "tags": [], "owner": {"reputation": 2215, "user_id": 1689373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b36a57ad07d237603030ca54e7f4441?s=128&d=identicon&r=PG", "display_name": "Hoog", "link": "https://stackoverflow.com/users/1689373/hoog"}, "is_accepted": false, "score": 2, "last_activity_date": 1554318852, "last_edit_date": 1554318852, "creation_date": 1554318657, "answer_id": 55502628, "question_id": 55502561, "link": "https://stackoverflow.com/questions/55502561/why-does-this-converge-to-3-instead-of-pi/55502628#55502628", "title": "Why does this converge to 3 instead of pi?", "body": "<p>The line: </p>\n\n<pre><code>sum = sum + sign * 4.0 / ((2 * iteration) * (2 * iteration + 1.0) * (2 * iteration + 2.0));\n</code></pre>\n\n<p>never changes with different iterations, you're just subtracting and adding the same thing back and forth.  you need to replace <code>iteration</code> with <code>j</code></p>\n\n<pre><code>sum = sum + sign * 4.0 / ((2 * j) * (2 * j+ 1.0) * (2 * j+ 2.0));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2215, "user_id": 1689373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b36a57ad07d237603030ca54e7f4441?s=128&d=identicon&r=PG", "display_name": "Hoog", "link": "https://stackoverflow.com/users/1689373/hoog"}, "edited": false, "score": 3, "creation_date": 1554318796, "post_id": 55502630, "comment_id": 97711559, "body": "<code>iteration</code> is overwritten by console input here: &#39;std::cin &gt;&gt; iteration&#39; before the loop starts"}], "tags": [], "owner": {"reputation": 289, "user_id": 11231203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/939d1b2bae675bce554d7b467bbf5947?s=128&d=identicon&r=PG&f=1", "display_name": "Tetix", "link": "https://stackoverflow.com/users/11231203/tetix"}, "is_accepted": false, "score": 0, "last_activity_date": 1554318664, "creation_date": 1554318664, "answer_id": 55502630, "question_id": 55502561, "link": "https://stackoverflow.com/questions/55502561/why-does-this-converge-to-3-instead-of-pi/55502630#55502630", "title": "Why does this converge to 3 instead of pi?", "body": "<p><code>for (int j = 1; j &lt; iteration; j++)</code>\nloop is never executed for a starting value of <code>iteration = 0.0</code></p>\n"}], "owner": {"reputation": 11, "user_id": 11307593, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s3jom7qWvR0/AAAAAAAAAAI/AAAAAAAAAgI/hUWqP9xrd2k/photo.jpg?sz=128", "display_name": "Julian Rooms", "link": "https://stackoverflow.com/users/11307593/julian-rooms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1554318852, "creation_date": 1554318365, "question_id": 55502561, "link": "https://stackoverflow.com/questions/55502561/why-does-this-converge-to-3-instead-of-pi", "title": "Why does this converge to 3 instead of pi?", "body": "<p>I tried to write a program in C++ that can calculate pi using the Nilakantha Series. I looked at other programs, but they seemed to use the same methods, that did not work with my program. I also tried it using the Gregory-Leibniz Series, but that led to a similar problem. The sum converges to 3 instead of pi. Have I implemented the Series wrong or is there a problem with the program in general? </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;math.h&gt;\n#include&lt;bits/stdc++.h&gt;\n//variables\nfloat sign = -1.0;\nfloat sum = 0.0;\nfloat start = 3.0;\nint iteration = 0.0;\n\nint main() {\n\n    std::cout &lt;&lt; \"How many iterations should be completed?\" &lt;&lt; std::endl;\n    std::cin &gt;&gt; iteration;\n//code for calculating pi\n    for (int j = 1; j &lt; iteration; j++) {\n        sum = sum + sign * 4.0 / ((2 * iteration) * (2 * iteration + 1.0) * (2 * iteration + 2.0));\n        sign *= -1.0;\n    }\n// output    \n    std::cout &lt;&lt; std::fixed &lt;&lt; std::setprecision(100) &lt;&lt; sum + start &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>So the Output is 3 for a relatively high amount of iterations, but it should converge to pi.</p>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1554318254, "post_id": 55502417, "comment_id": 97711314, "body": "<code>std::copy_n()</code> works with the same types of iterators as <code>std::copy()</code>.  They both take <i>InputIterator</i>s as input. The only difference is that <code>std::copy()</code> takes 2 input iterators denoting a range, whereas <code>std::copy_n()</code> takes 1 input iterator and a count. Not all situations have 2 iterators available to iterate between, sometimes a count makes more sense."}], "answers": [{"comments": [{"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "edited": false, "score": 1, "creation_date": 1554318116, "post_id": 55502491, "comment_id": 97711241, "body": "Then why have the <code>std::move</code> algorithm?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1554318347, "post_id": 55502491, "comment_id": 97711358, "body": "@RemyLebeau yes there is an <a href=\"https://en.cppreference.com/w/cpp/algorithm/move\" rel=\"nofollow noreferrer\">algorithm <code>std::move</code></a>"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1554318716, "post_id": 55502491, "comment_id": 97711525, "body": "Ultimately, I guess no one considered <code>move_n</code> a common enough operation to warrant a shorthand."}, {"owner": {"reputation": 322, "user_id": 6049796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84a091eb4e10af942d3de4432607a319?s=128&d=identicon&r=PG&f=1", "display_name": "Euri Pinhollow", "link": "https://stackoverflow.com/users/6049796/euri-pinhollow"}, "reply_to_user": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "edited": false, "score": 0, "creation_date": 1554322582, "post_id": 55502491, "comment_id": 97713440, "body": "@Adrian C++ library code has a busload of overloads and near-repetitions to make the code more expressive. It is not the reason to add definitions of course."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1554319040, "last_edit_date": 1554319040, "creation_date": 1554318033, "answer_id": 55502491, "question_id": 55502417, "link": "https://stackoverflow.com/questions/55502417/why-is-there-no-stdmove-n-algorithm/55502491#55502491", "title": "Why is there no std::move_n algorithm?", "body": "<p>There is a <code>std::make_move_iterator</code> to adapt any iterator into providing an rvalue.</p>\n\n<p>Sending an adapted input iterator to <code>std::copy_n</code> will achieve the desired effect, without much added noise.</p>\n"}, {"comments": [{"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "edited": false, "score": 0, "creation_date": 1554327050, "post_id": 55503376, "comment_id": 97715200, "body": "What about <code>std::uninitialized_move</code> and <code>std::uninitialized_move_n</code>?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "edited": false, "score": 0, "creation_date": 1554328626, "post_id": 55503376, "comment_id": 97715758, "body": "@Adrian <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0040r3.html\" rel=\"nofollow noreferrer\">That proposal</a> (2016) chose to cover both?"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 6, "last_activity_date": 1554321610, "creation_date": 1554321610, "answer_id": 55503376, "question_id": 55502417, "link": "https://stackoverflow.com/questions/55502417/why-is-there-no-stdmove-n-algorithm/55503376#55503376", "title": "Why is there no std::move_n algorithm?", "body": "<p>I think the answer is probably pretty mundane.</p>\n\n<p><code>std::copy</code> existed forever, it was the only one of these algorithms in C++03. </p>\n\n<p><a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2002/n1377.htm\" rel=\"noreferrer\">N1377</a> (2002) added move semantics into the language and also introduced the algorithms <code>std::move()</code> and <code>std::move_backward()</code> to mirror the existing <code>std::copy()</code> and <code>std::copy_backward()</code>. Those were the only copying algorithms in existence - so those were the only ones that got <code>move</code> versions.</p>\n\n<p><a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2569.pdf\" rel=\"noreferrer\">N2569</a> (2008) added a bunch more algorithms, most of which existed in the original Standard Template Library implementation - this is where <code>std::copy_n()</code> and <code>std::copy_if()</code> came from. Since the premise of the paper was a bunch of algorithms that have been around and used for years, it couldn't have included <code>std::move_n()</code> or <a href=\"https://stackoverflow.com/q/55502720/2069064\"><code>std::move_if()</code></a>. It seems that this simply wasn't considered.</p>\n\n<p>I'm guessing if these happened in the opposite order, we might have had <code>std::move_n()</code> today. But at this point, it might not be worth adding. Since, <code>std::copy_n()</code> isn't even used super often and <code>move_n</code> is very easy to implement:</p>\n\n<pre><code>template&lt; class InputIt, class Size, class OutputIt&gt;\nOutputIt move_n(InputIt first, Size count, OutputIt result)\n{\n    return std::copy_n(std::make_move_iterator(first), count, result);\n}\n</code></pre>\n"}], "owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 2, "answer_count": 2, "score": 4, "last_activity_date": 1554321610, "creation_date": 1554317747, "last_edit_date": 1554318064, "question_id": 55502417, "link": "https://stackoverflow.com/questions/55502417/why-is-there-no-stdmove-n-algorithm", "title": "Why is there no std::move_n algorithm?", "body": "<p>I'm assuming that there is a <a href=\"https://en.cppreference.com/w/cpp/algorithm/copy_n\" rel=\"nofollow noreferrer\"><code>std::copy_n</code></a> so that this can work with input iterators.  Is there some reason why there is no <code>std::move_n</code> for the same reason?</p>\n"}, {"tags": ["c++", "winapi", "mfc", "windows-10"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 11307488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41095ff92192bbebddf1926bd2714650?s=128&d=identicon&r=PG&f=1", "display_name": "Vinny", "link": "https://stackoverflow.com/users/11307488/vinny"}, "edited": false, "score": 0, "creation_date": 1554329484, "post_id": 55502662, "comment_id": 97716027, "body": "i Changed the value of <b>PREDEFINED_UNIQUE_ID to &quot;Global\\\\CSAPP&quot;</b> and i&#39;m still having the same issue?!"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 25, "user_id": 11307488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41095ff92192bbebddf1926bd2714650?s=128&d=identicon&r=PG&f=1", "display_name": "Vinny", "link": "https://stackoverflow.com/users/11307488/vinny"}, "edited": false, "score": 0, "creation_date": 1554329777, "post_id": 55502662, "comment_id": 97716126, "body": "The point was to simply add the <code>Global\\ </code> prefix to whatever name you were already using, you didn&#39;t have to change the name to <code>CSAPP</code>, that is simply the name used in MSDN&#39;s example. But either way, you can&#39;t be having the same issue once the mutex is in the global namespace."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 25, "user_id": 11307488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41095ff92192bbebddf1926bd2714650?s=128&d=identicon&r=PG&f=1", "display_name": "Vinny", "link": "https://stackoverflow.com/users/11307488/vinny"}, "edited": false, "score": 0, "creation_date": 1554330051, "post_id": 55502662, "comment_id": 97716209, "body": "You need to provide <code>CreateMutex()</code> with a <code>SECURITY_ATTRIBUTES</code> containing a NULL DACL so processes in different sessions can share the same mutex object, otherwise <code>CreateMutex()</code> may fail with an <code>ERROR_ACCESS_DENIED</code> error, which you are not handling, as you don&#39;t handle the possibility of <code>CreateMutex()</code> returning a NULL mutex handle. Although, an <code>ERROR_ACCESS_DENIED</code> error by itself will tell you the mutex already exists, even though you don&#39;t have rights to access it."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1554332271, "last_edit_date": 1554332271, "creation_date": 1554318773, "answer_id": 55502662, "question_id": 55502262, "link": "https://stackoverflow.com/questions/55502262/not-able-to-prevent-multiple-instances-of-the-same-program-from-different-users/55502662#55502662", "title": "Not able to prevent multiple instances of the same program from different users", "body": "<p>You did not show the actual value of <code>PREDEFINED_UNIQUE_ID</code>, but I'm guessing that it is not creating the mutex in the <a href=\"https://docs.microsoft.com/en-us/windows/desktop/termserv/kernel-object-namespaces\" rel=\"nofollow noreferrer\"><code>Global</code> kernel namespace</a>, but in per-session namespaces instead.  Using the <code>Global</code> namespace is required for spanning user sessions:</p>\n\n<blockquote>\n  <p>The separate client session namespaces enable multiple clients to run the same applications <strong>without interfering with each other</strong>. For processes started under a client session, the system uses the session namespace by default. However, <strong>these processes can use the global namespace by prepending the \"Global\\\" prefix</strong> to the object name. For example, the following code calls <code>CreateEvent</code> and creates an event object named CSAPP in the global namespace:</p>\n\n<pre><code>CreateEvent( NULL, FALSE, FALSE, \"Global\\\\CSAPP\" );\n</code></pre>\n  \n  <p>...</p>\n  \n  <p>Another use of the global namespace is for <strong>applications that use named objects to detect that there is already an instance of the application running in the system across all sessions. This named object must be created or opened in the global namespace instead of the per-session namespace.</strong> The more common case of running the application once per session is supported by default because the named object is created in a per session namespace.</p>\n</blockquote>\n\n<p><strong>UPDATE:</strong> you also need to handle the case where <code>CreateMutex()</code> can't access a mutex in another session due to security permissions.  You need to handle the case where <code>GetLastError()</code> returns <code>ERROR_ACCESS_DENIED</code>, which in of itself means the mutex exists.</p>\n\n<p>Try something more like this:</p>\n\n<pre><code>#define PREDEFINED_UNIQUE_ID _T(\"Global\\\\MyUniqueMutexName\");\n\nm_hMutex = ::CreateMutex(NULL, FALSE, PREDEFINED_UNIQUE_ID);\n// or: m_hMutex = ::CreateMutexEx(&amp;sa, PREDEFINED_UNIQUE_ID, 0, SYNCHRONIZE);\nDWORD dwErrorCode = ::GetLastError();\n\nif ((m_hMutex) &amp;&amp; (dwErrorCode == ERROR_ALREADY_EXISTS))\n{\n    ::CloseHandle(m_hMutex);\n\n    //in case the previous instance of APP is still in the process of closing\n    ::Sleep(5*1000);\n    // consider using WaitForSingleObject() instead, in case the app takes less than 5 seconds to close...\n\n    m_hMutex = ::CreateMutex(NULL, FALSE, PREDEFINED_UNIQUE_ID);\n    // or: m_hMutex = ::CreateMutexEx(&amp;sa, PREDEFINED_UNIQUE_ID, 0, SYNCHRONIZE);\n    dwErrorCode = ::GetLastError();\n}\n\nif (dwErrorCode != 0)\n{\n    EndSplashWindow();\n\n    switch (dwErrorCode)\n    {\n        case ERROR_ALREADY_EXISTS:\n        case ERROR_ACCESS_DENIED:\n            AfxMessageBox( _T(\"An instance of APP is already running.\"), MB_OK | MB_ICONERROR | MB_SYSTEMMODAL );\n            break;\n\n        default:\n            AfxMessageBox( _T(\"Error checking if an instance of APP is already running.\"), MB_OK | MB_ICONERROR | MB_SYSTEMMODAL );\n            break;\n    }\n\n    return FALSE;\n}\n\n// OK to run now!\nreturn TRUE;\n</code></pre>\n\n<p>Or, to minimize the chances of <code>ERROR_ACCESS_DENIED</code> being reported, you can provide a NULL DACL to <code>CreateMutex()</code>:</p>\n\n<pre><code>PSECURITY_DESCRIPTOR pSD = (PSECURITY_DESCRIPTOR) LocalAlloc(LPTR, SECURITY_DESCRIPTOR_MIN_LENGTH); \nif (!pSD) \n{ \n    EndSplashWindow();\n    AfxMessageBox( _T(\"Error allocating security descriptor.\"), MB_OK | MB_ICONERROR | MB_SYSTEMMODAL );\n    return FALSE;\n}\n\nif (!InitializeSecurityDescriptor(pSD, SECURITY_DESCRIPTOR_REVISION)) \n{ \n    LocalFree(pSD); \n    EndSplashWindow();\n    AfxMessageBox( _T(\"Error initializing security descriptor.\"), MB_OK | MB_ICONERROR | MB_SYSTEMMODAL );\n    return FALSE;\n}\n\nif (!SetSecurityDescriptorDacl(pSD, TRUE, NULL, FALSE))\n{ \n    LocalFree(pSD); \n    EndSplashWindow();\n    AfxMessageBox( _T(\"Error setting access for security descriptor.\"), MB_OK | MB_ICONERROR | MB_SYSTEMMODAL );\n    return FALSE;\n}\n\nSECURITY_ATTRIBUTES sa = {};\nsa.nLength = sizeof(sa);\nsa.lpSecurityDescriptor = pSD;\nsa.bInheritHandle = FALSE;\n\nm_hMutex = ::CreateMutex(&amp;sa, FALSE, PREDEFINED_UNIQUE_ID);\n...\n\nLocalFree(pSD);\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 11307488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41095ff92192bbebddf1926bd2714650?s=128&d=identicon&r=PG&f=1", "display_name": "Vinny", "link": "https://stackoverflow.com/users/11307488/vinny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 378, "favorite_count": 0, "closed_date": 1554318971, "accepted_answer_id": 55502662, "answer_count": 1, "score": -1, "last_activity_date": 1554332271, "creation_date": 1554317215, "last_edit_date": 1554318913, "question_id": 55502262, "link": "https://stackoverflow.com/questions/55502262/not-able-to-prevent-multiple-instances-of-the-same-program-from-different-users", "closed_reason": "Duplicate", "title": "Not able to prevent multiple instances of the same program from different users", "body": "<p>I have the following code. It prevents multiple instances of same application under the same user. However, I also want to prevent a different user on the same machine to run the application when another user is already running it. The code successfully creates a mutex even though the application is already running by a different user. Not able to figure out what i'm doing wrong here. Any help is appreciated.</p>\n\n<pre><code>m_hMutex = ::CreateMutex(NULL, FALSE, PREDEFINED_UNIQUE_ID);\nif (::GetLastError() == ERROR_ALREADY_EXISTS)\n{\n    if (m_hMutex)\n        ::CloseHandle(m_hMutex);\n\n    //in case the previous instance of APP is still in the process of closing\n    ::Sleep(5*1000);\n    m_hMutex = ::CreateMutex(NULL, FALSE, PREDEFINED_UNIQUE_ID);\n    if (::GetLastError() == ERROR_ALREADY_EXISTS)\n    {\n        EndSplashWindow();\n        AfxMessageBox( _T(\"An instance of APPis already running.\"), MB_OK | MB_ICONERROR | MB_SYSTEMMODAL );\n        return FALSE;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "memory-management", "profiling"], "comments": [{"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 0, "creation_date": 1554316617, "post_id": 55502029, "comment_id": 97710506, "body": "It should proved you with line numbers. Are you compiling with the <code>-g</code> flag?"}, {"owner": {"reputation": 4961, "user_id": 1356926, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b0e63670616da6afe7de893470a4620b?s=128&d=identicon&r=PG", "display_name": "Svalorzen", "link": "https://stackoverflow.com/users/1356926/svalorzen"}, "reply_to_user": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 0, "creation_date": 1554387027, "post_id": 55502029, "comment_id": 97740796, "body": "@kabanus Using callgrind I get the names of the functions and the call graph; but not the line numbers of where the calls are made. Massif does give me that, but since it does snapshots it doesn&#39;t look like it can help detecting where there are many allocations/deallocations in series while memory usage is relatively constant."}, {"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 0, "creation_date": 1554399201, "post_id": 55502029, "comment_id": 97748098, "body": "If the dup-target Nathan marked does not solve your problem, address that in your question, and ping him to get your question re-opened."}], "owner": {"reputation": 4961, "user_id": 1356926, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b0e63670616da6afe7de893470a4620b?s=128&d=identicon&r=PG", "display_name": "Svalorzen", "link": "https://stackoverflow.com/users/1356926/svalorzen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "closed_date": 1554316679, "answer_count": 0, "score": 0, "last_activity_date": 1554388540, "creation_date": 1554316385, "last_edit_date": 1554388540, "question_id": 55502029, "link": "https://stackoverflow.com/questions/55502029/determine-allocation-call-site-over-time-line-of-code", "closed_reason": "Duplicate", "title": "Determine allocation call site over time (line of code)", "body": "<p>I'm using callgrind in order to profile a C++ program. The program has a very complex main method (which solves an NP-complete problem), and with large problems it becomes the main resource hogger of the application (96% of time in this one method of approximately 120 lines).</p>\n\n<p>While I don't expect miracles as the problem is hard, the method spends 60% of its time making allocations/deallocations. Thus, I wanted to try to understand where/how exactly the memory was being requested so that I can decide if there is a better way to implement it.</p>\n\n<p>Callgrind however does not seem to be able to give me this information. Is there any way I could obtain it? I'm on Linux, and I'm not using an IDE (just vim and g++).</p>\n\n<p>EDIT: I've looked at the suggested duplicate question (<a href=\"https://stackoverflow.com/questions/910172/track-c-memory-allocations\">track C++ memory allocations</a>). However, it doesn't look like it's what I need, unless I am misunderstanding. Massif looks like a tool to track memory usage; the memory usage of my application is relatively constant (around 1MB total max), but I have constant small allocations/deallocations that I don't know the origin, only the general whereabouts. I don't care about <em>who</em> has my memory in a given snapshot, I care about <em>who</em> keeps allocating and deallocating all the time. Can Massif be used to track these?</p>\n"}, {"tags": ["c++", "uwp", "windows-runtime", "c++-winrt", "concurrency-runtime"], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1554451845, "post_id": 55507647, "comment_id": 97765289, "body": "That looks promising, although it doesn&#39;t work out the details with respect to cancellation and exception propagation. Choosing a <code>std::optional</code> as the return type of either <code>task</code> looks like a valid option. Note, that <code>when_any</code> returns a <code>std::pair&lt;T, size_t&gt;</code>, so that needs to be used in the <code>then</code> continuation. I&#39;ll see if I can work out the remaining details with the information you&#39;ve provided."}, {"owner": {"reputation": 889, "user_id": 1938624, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b923181ac2f859da42de3b150fea9b49?s=128&d=identicon&r=PG", "display_name": "Lee McPherson", "link": "https://stackoverflow.com/users/1938624/lee-mcpherson"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1554496809, "post_id": 55507647, "comment_id": 97789281, "body": "Since you&#39;re doing event based stuff, an alternative you might want to look at is ReactiveX.  There&#39;s a C++ library for it.  But, you basically create an Observable for your IBuffer and an Observable for your timer (that also emits IBuffer, but null).  Then you Merge them and Take(1).   This will &quot;complete&quot; the merged Observable after which you can handle cancellation of the one not yet finished.  Exceptions are easy to catch as well, although I have never tried with C++, only C#.  If you&#39;ve never used Observables from ReactiveX, beware there is a steep learning curve"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1555437990, "post_id": 55507647, "comment_id": 98108889, "body": "Finally got around to doing some testing with the information you provided. Still a few open ends, I haven&#39;t been able to fully understand. I was originally planning to update your answer, but it turned out to become much longer than I thought, and I didn&#39;t want to turn your answer into something you may not agree with. ReactiveX looks useful, even though it is a bit too much for what I (currently) need. And I&#39;m not too thrilled about adding yet another heavily template-based library. It&#39;s near impossible to regularly run code analysis on a C++/WinRT project as is already..."}], "tags": [], "owner": {"reputation": 889, "user_id": 1938624, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b923181ac2f859da42de3b150fea9b49?s=128&d=identicon&r=PG", "display_name": "Lee McPherson", "link": "https://stackoverflow.com/users/1938624/lee-mcpherson"}, "is_accepted": false, "score": 1, "last_activity_date": 1554397734, "last_edit_date": 1554397734, "creation_date": 1554350545, "answer_id": 55507647, "question_id": 55501989, "link": "https://stackoverflow.com/questions/55501989/how-to-compose-asynchronous-operations/55507647#55507647", "title": "How to compose asynchronous operations?", "body": "<p>I think the easiest would be to use the <code>concurrency</code> library.  You need to modify your timeout to return the same type as the first method, even if it returns null.</p>\n\n<p>(I realize this is only a partial answer...)</p>\n\n<p>My C++ sucks, but I think this is close...</p>\n\n<pre><code>array&lt;task&lt;IBuffer&gt;, 2&gt; tasks =\n{\nconcurrency::create_task([]{return read(buffer, count).get();}),\nconcurrency::create_task([]{return modifiedTimeout.get();})\n};\n\nconcurrency::when_any(begin(tasks), end(tasks)).then([](IBuffer buffer)\n{ \n    //do something \n});\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "is_accepted": false, "score": 1, "last_activity_date": 1555437529, "creation_date": 1555437529, "answer_id": 55714084, "question_id": 55501989, "link": "https://stackoverflow.com/questions/55501989/how-to-compose-asynchronous-operations/55714084#55714084", "title": "How to compose asynchronous operations?", "body": "\n\n<p>As suggested by Lee McPherson in another <a href=\"https://stackoverflow.com/a/55507647/1889329\">answer</a>, the <a href=\"https://docs.microsoft.com/en-us/cpp/parallel/concrt/concurrency-runtime\" rel=\"nofollow noreferrer\">Concurrency Runtime</a> looks like a viable option. It provides <a href=\"https://docs.microsoft.com/en-us/cpp/parallel/concrt/reference/task-class\" rel=\"nofollow noreferrer\">task</a>s, that can be combined with others, chained up using continuations, as well as seamlessly integrate with the Windows Runtime asynchronous model (see <a href=\"https://docs.microsoft.com/en-us/cpp/parallel/concrt/creating-asynchronous-operations-in-cpp-for-windows-store-apps\" rel=\"nofollow noreferrer\">Creating Asynchronous Operations in C++ for UWP Apps</a>). As a bonus, including the <code>&lt;pplawait.h&gt;</code> header provides adapters for <code>concurrency::task</code> class template instantiations to be used as C++20 coroutine awaitables.</p>\n\n<p>I wasn't able to answer all of the questions, but this is what I eventually came up with. For simplicity (and ease of verification) I'm using <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/synchapi/nf-synchapi-sleep\" rel=\"nofollow noreferrer\">Sleep</a> in place of the actual read operation, and return an <code>int</code> instead of an <code>IBuffer</code>.</p>\n\n<p><strong>Composition of tasks</strong></p>\n\n<p>The ConcRT provides several ways to combine tasks. Given the requirements <a href=\"https://docs.microsoft.com/en-us/cpp/parallel/concrt/reference/concurrency-namespace-functions#when_any\" rel=\"nofollow noreferrer\"><code>concurrency::when_any</code></a> can be used to create a task that returns, when any of the supplied tasks completes. When only 2 tasks are supplied as input, there's also a convenience operator (<a href=\"https://docs.microsoft.com/en-us/cpp/parallel/concrt/reference/concurrency-namespace-operators#operator_lor\" rel=\"nofollow noreferrer\"><code>operator||</code></a>) available.</p>\n\n<p><strong>Exception propagation</strong></p>\n\n<p>Exceptions raised from either of the input tasks do not count as a successful completion. When used with the <code>when_any</code> task, throwing an exception will not suffice the wait condition. As a consequence, exceptions cannot be used to break out of combined tasks. To deal with this I opted to return a <a href=\"https://en.cppreference.com/w/cpp/utility/optional\" rel=\"nofollow noreferrer\"><code>std::optional</code></a>, and raise appropriate exceptions in a <a href=\"https://docs.microsoft.com/en-us/cpp/parallel/concrt/reference/task-class#then\" rel=\"nofollow noreferrer\"><code>then</code></a> continuation.</p>\n\n<p><strong>Task cancellation</strong></p>\n\n<p>This is still a mystery to me. It appears that once a task satisfies the wait condition of the <code>when_any</code> task, there is no requirement to cancel the respective other outstanding tasks. Once those complete (successfully or otherwise), they are silently dealt with.</p>\n\n<p>Following is the code, using the simplifications mentioned earlier. It creates a task consisting of the actual workload and a timeout task, both returning a <code>std::optional</code>. The <code>then</code> continuation examines the return value, and throws an exception in case there isn't one (i.e. the <code>timeout_task</code> finished first).</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;Windows.h&gt;\n\n#include &lt;cstdint&gt;\n#include &lt;iostream&gt;\n#include &lt;optional&gt;\n#include &lt;ppltasks.h&gt;\n#include &lt;stdexcept&gt;\n\nusing namespace concurrency;\n\ntask&lt;int&gt; read_with_timeout(uint32_t read_duration, uint32_t timeout)\n{\n    auto&amp;&amp; read_task\n    {\n        create_task([read_duration]\n            {\n                ::Sleep(read_duration);\n                return std::optional&lt;int&gt;{42};\n            })\n    };\n    auto&amp;&amp; timeout_task\n    {\n        create_task([timeout]\n            {\n                ::Sleep(timeout);\n                return std::optional&lt;int&gt;{};\n            })\n    };\n\n    auto&amp;&amp; task\n    {\n        (read_task || timeout_task)\n        .then([](std::optional&lt;int&gt; result)\n            {\n                if (!result.has_value())\n                {\n                    throw std::runtime_error(\"timeout\");\n                }\n                return result.value();\n            })\n    };\n    return task;\n}\n</code></pre>\n\n<p>The following test code</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main()\n{\n    try\n    {\n        auto res1{ read_with_timeout(3000, 5000).get() };\n        std::cout &lt;&lt; \"Succeeded. Result = \" &lt;&lt; res1 &lt;&lt; std::endl;\n        auto res2{ read_with_timeout(5000, 3000).get() };\n        std::cout &lt;&lt; \"Succeeded. Result = \" &lt;&lt; res2 &lt;&lt; std::endl;\n    }\n    catch( std::runtime_error const&amp; e )\n    {\n        std::cout &lt;&lt; \"Failed. Exception = \" &lt;&lt; e.what() &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>produces this output:</p>\n\n<blockquote>\n<pre class=\"lang-cpp prettyprint-override\"><code>Succeeded. Result = 42\nFailed. Exception = timeout\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 360, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1555437529, "creation_date": 1554316261, "last_edit_date": 1554319364, "question_id": 55501989, "link": "https://stackoverflow.com/questions/55501989/how-to-compose-asynchronous-operations", "title": "How to compose asynchronous operations?", "body": "\n\n<p>I'm looking for a way to compose asynchronous operations. The ultimate goal is to execute an asynchronous operation, and either have it run to completion, or return after a user-defined timeout.</p>\n\n<p>For exemplary purposes, assume that I'm looking for a way to combine the following coroutines<sup>1</sup>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>IAsyncOperation&lt;IBuffer&gt; read(IBuffer buffer, uint32_t count)\n{\n    auto&amp;&amp; result{ co_await socket_.InputStream().ReadAsync(buffer, count, InputStreamOptions::None) };\n    co_return result;\n}\n</code></pre>\n\n<p>with <code>socket_</code> being a <a href=\"https://docs.microsoft.com/en-us/uwp/api/windows.networking.sockets.streamsocket\" rel=\"nofollow noreferrer\"><code>StreamSocket</code></a> instance.</p>\n\n<p>And the timeout coroutine:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>IAsyncAction timeout()\n{\n    co_await 5s;\n}\n</code></pre>\n\n<p>I'm looking for a way to combine these coroutines in a way, that returns as soon as possible, either once the data has been read, or the timeout has expired.</p>\n\n<p>These are the options I have evaluated so far:</p>\n\n<ul>\n<li>C++20 coroutines: As far as I understand <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p1056r0.html\" rel=\"nofollow noreferrer\">P1056R0</a>, there is currently no library or language feature <em>\"to enable creation and composition of coroutines\"</em>.</li>\n<li>Windows Runtime supplied asynchronous task types, ultimately derived from <a href=\"https://docs.microsoft.com/en-us/uwp/api/windows.foundation.iasyncinfo\" rel=\"nofollow noreferrer\">IAsyncInfo</a>: Again, I didn't find any facilities that would allow me to combine the tasks the way I need.</li>\n<li><a href=\"https://docs.microsoft.com/en-us/cpp/parallel/concrt/concurrency-runtime\" rel=\"nofollow noreferrer\">Concurrency Runtime</a>: This looks promising, particularly the <a href=\"https://docs.microsoft.com/en-us/cpp/parallel/concrt/reference/concurrency-namespace-functions#when_any\" rel=\"nofollow noreferrer\"><code>when_any</code></a> function template looks to be exactly what I need.</li>\n</ul>\n\n<p>From that it looks like I need to go with the Concurrency Runtime. However, I'm having a hard time bringing all the pieces together. I'm particularly confused about how to handle exceptions, and whether cancellation of the respective other concurrent task is required.</p>\n\n<p>The question is two-fold:</p>\n\n<ul>\n<li>Is the Concurrency Runtime the only option (UWP application)?</li>\n<li>What would an implementation look like?</li>\n</ul>\n\n<hr>\n\n<p><sup>1</sup> <em>The methods are internal to the application. It is not required to have them return Windows Runtime compatible types.</em></p>\n"}, {"tags": ["c++", "pointers", "variable-names"], "comments": [{"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 1, "creation_date": 1554316204, "post_id": 55501922, "comment_id": 97710282, "body": "<code>if (name == &#39;a&#39;) cout &lt;&lt; a; else cout &lt;&lt; b;</code>"}, {"owner": {"reputation": 13, "user_id": 11243184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67cd0c8b05e7d1b77780473444c25db2?s=128&d=identicon&r=PG&f=1", "display_name": "Rooster", "link": "https://stackoverflow.com/users/11243184/rooster"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1554316330, "post_id": 55501922, "comment_id": 97710358, "body": "i will have char arrays from a-z is there other way to do this with using pointers or something :/"}, {"owner": {"reputation": 1067, "user_id": 5346123, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gGHAd.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/5346123/pablo"}, "edited": false, "score": 0, "creation_date": 1554316413, "post_id": 55501922, "comment_id": 97710406, "body": "In the future you may receive better feedback by telling us a bit more of what you have tried and how it failed specifically :)"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 1, "creation_date": 1554316525, "post_id": 55501922, "comment_id": 97710466, "body": "Use a <code>std::map</code>"}, {"owner": {"reputation": 13, "user_id": 11243184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67cd0c8b05e7d1b77780473444c25db2?s=128&d=identicon&r=PG&f=1", "display_name": "Rooster", "link": "https://stackoverflow.com/users/11243184/rooster"}, "edited": false, "score": 0, "creation_date": 1554316541, "post_id": 55501922, "comment_id": 97710473, "body": "i can&#39;t use stl"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1554316637, "post_id": 55501922, "comment_id": 97710513, "body": "@Rooster <i>&quot;i can&#39;t use stl&quot;</i> You&#39;re already using it."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1554318227, "post_id": 55501922, "comment_id": 97711298, "body": "@Rooster a better way to say <i>i can&#39;t use stl</i> is <i>I can&#39;t use library containers</i>. Otherwise you get response like above, or <i>No one said anything about STL. We&#39;re talking the C++ Standard Library here.</i> or <i>Like... Omigawd! STL is, like, soooooo 1990s</i>"}], "answers": [{"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 1, "last_activity_date": 1554317031, "last_edit_date": 1554317031, "creation_date": 1554316700, "answer_id": 55502107, "question_id": 55501922, "link": "https://stackoverflow.com/questions/55501922/variable-name-with-using-pointer/55502107#55502107", "title": "Variable name with using pointer", "body": "<p>The variable names you use in your code have no meaning once your program is running. You cannot dynamically replace <code>name</code> with either <code>a</code> or <code>b</code>, if thats what you wanted to do.</p>\n\n<p>Making the example simpler (c-style arrays are definitely not for beginners, look at <code>std::vector</code> instead), you can do this:</p>\n\n<pre><code>#include &lt;iostream&gt;\nint main() {\n    int a = 42;\n    int b = 102;\n    std::cout &lt;&lt; \"select a or b: \";\n    char select;\n    std::cin &gt;&gt; select;\n    if (select == 'a') std::cout &lt;&lt; a;\n    else if (select == 'b') std::cout &lt;&lt; b;\n    else std::cout &lt;&lt; \"wrong input \\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "is_accepted": false, "score": 0, "last_activity_date": 1554317452, "creation_date": 1554317452, "answer_id": 55502333, "question_id": 55501922, "link": "https://stackoverflow.com/questions/55501922/variable-name-with-using-pointer/55502333#55502333", "title": "Variable name with using pointer", "body": "<p>Most of the time, if you want to have a number of objects (say, more than 2 or 3) of the same type, you should consider using an array or vector.</p>\n\n<p>So instead of</p>\n\n<pre><code>char *a = ...;\nchar *b = ...;\nchar *c = ...;\n</code></pre>\n\n<p>Use</p>\n\n<pre><code>char *values[] = { ... };\n</code></pre>\n\n<p>Now you can access a value by using an index, i.e. an integer value. For a character a-z, this can easily be done by subtracting the value <code>'a'</code> (<code>'a'-'a'</code> is 0, <code>'b'-'a'</code> is 1, etc).</p>\n\n<pre><code>const char *values[] = { \"this is a\", \"this is b\" };\n\nchar name;\nstd::cin &gt;&gt; name;\nint index = name - 'a';\n\n// TODO: Make sure the index is in range!\nconst char *value = values[index];\nstd::cout &lt;&lt; value;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11243184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67cd0c8b05e7d1b77780473444c25db2?s=128&d=identicon&r=PG&f=1", "display_name": "Rooster", "link": "https://stackoverflow.com/users/11243184/rooster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 514, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1554317452, "creation_date": 1554316054, "question_id": 55501922, "link": "https://stackoverflow.com/questions/55501922/variable-name-with-using-pointer", "title": "Variable name with using pointer", "body": "<p>I want to pick from keyboard which array i want to display (i know my code doesn't work i just want to show my problem)</p>\n\n<pre><code> int main(){\n            char *a = new char[5];\n            char *b = new char[5];\n            char name;\n\n            cin &gt;&gt; a;\n            cin &gt;&gt; b;\n            cin &gt;&gt; name;\n\n            cout &lt;&lt; name; \n}\n</code></pre>\n"}, {"tags": ["c++", "inheritance", "overloading", "c++17", "variadic-templates"], "answers": [{"comments": [{"owner": {"reputation": 1826, "user_id": 2301053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l0ISw.jpg?s=128&g=1", "display_name": "Charles Ofria", "link": "https://stackoverflow.com/users/2301053/charles-ofria"}, "edited": false, "score": 0, "creation_date": 1554325801, "post_id": 55502126, "comment_id": 97714762, "body": "Thanks!  That&#39;s exactly what I needed -- I was hoping that there was some new feature like using that I wasn&#39;t aware of.  I also didn&#39;t realize that you could unpack all of the base classes at once like that."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 4, "last_activity_date": 1554316748, "creation_date": 1554316748, "answer_id": 55502126, "question_id": 55501881, "link": "https://stackoverflow.com/questions/55501881/building-a-variadic-template-class-with-a-set-of-function-overloads-based-on-the/55502126#55502126", "title": "Building a variadic template class with a set of function overloads based on the template arguments?", "body": "<p>Your implementation is right for C++14.</p>\n\n<p>C++17 allows variadic <code>using</code>, to avoid recursion:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct MyClassImpl\n{\n    virtual ~MyClassImpl() = default;\n    virtual bool MyFunction(T in) = 0; // or { return true; }\n};\n\ntemplate &lt;typename... Ts&gt;\nstruct MyClass : public MyClassImpl&lt;Ts&gt;...\n{\n    using MyClassImpl&lt;Ts&gt;::MyFunction...;\n};\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/e29e804f5b035fba\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 1826, "user_id": 2301053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l0ISw.jpg?s=128&g=1", "display_name": "Charles Ofria", "link": "https://stackoverflow.com/users/2301053/charles-ofria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 55502126, "answer_count": 1, "score": 2, "last_activity_date": 1574332925, "creation_date": 1554315940, "last_edit_date": 1574332925, "question_id": 55501881, "link": "https://stackoverflow.com/questions/55501881/building-a-variadic-template-class-with-a-set-of-function-overloads-based-on-the", "title": "Building a variadic template class with a set of function overloads based on the template arguments?", "body": "<p><strong>Motivation</strong>: I need to build a base class for a C++17 library that will have overloads for a virtual function based on types that the user identifies at compile time.  Basically, when a particular overload of the function is called on the base class, I want to make sure the correct version is called in the derived class.  My initial instinct was to build a virtual template function, but of course C++ cannot allow this because the compiler will not know what versions of it to put in the virtual function table.  Since I will know all of the types at compile time, however, is it possible to make the base class itself a variadic template and use the template arguments to build the set of overloaded version of the virtual function that would be needed?</p>\n\n<p>Fold expressions are right out because they can't be used to declare functions.  Recursive templates seem promising, but I worry that having a long chain of inheritance for the base class will create a performance hit.  Here's the working code that I have:</p>\n\n<pre><code>template &lt;typename... Ts&gt; class MyClass;\n\ntemplate &lt;typename T, typename... Ts&gt;\nstruct MyClass&lt;T, Ts...&gt; : public MyClass&lt;Ts...&gt; {\n  using MyClass&lt;Ts...&gt;::MyFunction;\n  virtual bool MyFunction(T in) { return true; }\n};\n\ntemplate &lt;&gt;\nstruct MyClass&lt;&gt; {\n  virtual bool MyFunction(...) { return false; }\n};\n</code></pre>\n\n<p>Should this technique be sufficient?  Or does anyone have other ideas on how I might accomplish this goal?</p>\n\n<p>My other ideas include:</p>\n\n<ul>\n<li><p>Cap the number of template arguments that can be handled and enable-if each overload based on whether the argument list is long enough to include it.  Downside: this technique would be an arbitrary limit on the number of types.</p></li>\n<li><p>Use a variadic macro to build the class.  Downside: This technique would be confusing and inelegant.</p></li>\n<li><p>Create a function to assign a type to an ID number in the base class, pass it to the derived class as a <code>void *</code> with its id, and translate it back at that point to make the appropriate overloaded call.  Downside: this technique would be tricky to keep type safe and to minimize the amount of work the end-user needs to do.</p></li>\n</ul>\n\n<p>Right now I'm leaning toward implementing the first of these alternatives and doing some performance testing to compare it to my working version, but would love if there is something cleaner that I'm missing.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 999, "user_id": 7859598, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-B2rVv02QIdo/AAAAAAAAAAI/AAAAAAAACew/FUFwHEbNSVo/photo.jpg?sz=128", "display_name": "Rietty", "link": "https://stackoverflow.com/users/7859598/rietty"}, "edited": false, "score": 0, "creation_date": 1554316028, "post_id": 55501869, "comment_id": 97710179, "body": "I&#39;m not sure exactly but I think the issue is the: <code>T::</code> in front of the <code>first_type</code>."}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 3, "creation_date": 1554316075, "post_id": 55501869, "comment_id": 97710204, "body": "Make sure you are compiling with C++17 since your header uses nested namespace specifiers like <code>namespace Utils::iterators { ... }</code>.  Add the <code>-std=c++17</code> flag for GCC/clang, or <code>&#47;std:c++latest</code> with MSVC."}, {"owner": {"reputation": 410, "user_id": 6932854, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/1666674616977204/picture?type=large", "display_name": "Khan Saab", "link": "https://stackoverflow.com/users/6932854/khan-saab"}, "reply_to_user": {"reputation": 999, "user_id": 7859598, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-B2rVv02QIdo/AAAAAAAAAAI/AAAAAAAACew/FUFwHEbNSVo/photo.jpg?sz=128", "display_name": "Rietty", "link": "https://stackoverflow.com/users/7859598/rietty"}, "edited": false, "score": 0, "creation_date": 1554316088, "post_id": 55501869, "comment_id": 97710216, "body": "@Rietty The error occurs at the declaration of <code>Utils :: iterators</code>."}, {"owner": {"reputation": 410, "user_id": 6932854, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/1666674616977204/picture?type=large", "display_name": "Khan Saab", "link": "https://stackoverflow.com/users/6932854/khan-saab"}, "reply_to_user": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1554316217, "post_id": 55501869, "comment_id": 97710289, "body": "@0x5453 Indeed that was the problem and it is solved. Thank you very much. If you want , write it as answer and i will accept and may be it will be helpful for someone else who is beginner in C++."}], "answers": [{"tags": [], "owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "is_accepted": true, "score": 5, "last_activity_date": 1554316863, "creation_date": 1554316863, "answer_id": 55502159, "question_id": 55501869, "link": "https://stackoverflow.com/questions/55501869/qualified-name-is-not-allowed-in-c/55502159#55502159", "title": "Qualified name is not allowed in C++", "body": "<p>Make sure you are compiling with C++17 since your header uses nested namespace specifiers (e.g. <code>namespace Utils::iterators { ... }</code>).</p>\n\n<p>This can be done with the <code>-std=c++17</code> flag for GCC/clang, or <code>/std:c++latest</code> for MSVC.</p>\n"}], "owner": {"reputation": 410, "user_id": 6932854, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/1666674616977204/picture?type=large", "display_name": "Khan Saab", "link": "https://stackoverflow.com/users/6932854/khan-saab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6030, "favorite_count": 0, "accepted_answer_id": 55502159, "answer_count": 1, "score": 1, "last_activity_date": 1554316863, "creation_date": 1554315886, "question_id": 55501869, "link": "https://stackoverflow.com/questions/55501869/qualified-name-is-not-allowed-in-c", "title": "Qualified name is not allowed in C++", "body": "<p>I am beginner in C++ and have to  work on a project. The following code is provided(header file) and when i import it , i get the error for namespace Utils.</p>\n\n<pre><code> namespace Utils::iterators {\n\n  struct RetrieveKey {\n    template&lt;typename T&gt;\n      typename T::first_type operator()(T keyValuePair) const {\n        return keyValuePair.first;\n      }\n  };\n</code></pre>\n\n<p>The error is .</p>\n\n<pre><code> \"qualified name is not allowed\".\n</code></pre>\n\n<p>I imported only boost library. </p>\n\n<p>I have been busy with these errors for hours,if someone can tell me what the possible reason is of this error, it would be a great help.</p>\n"}, {"tags": ["c++", "sockets"], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 10942161, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2O-mNIkuoM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwca4uC1fQh5VPyzO_iJz1V4SCHJlPg/mo/photo.jpg?sz=128", "display_name": "Tiago Bachiega de Almeida", "link": "https://stackoverflow.com/users/10942161/tiago-bachiega-de-almeida"}, "edited": false, "score": 0, "creation_date": 1554391047, "post_id": 55504122, "comment_id": 97743614, "body": "Just one question: in my client i shouldn&#39;t do this initialization?"}, {"owner": {"reputation": 647, "user_id": 9773285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e95570197a5ef8f4a067a3669c09143?s=128&d=identicon&r=PG&f=1", "display_name": "Mark A", "link": "https://stackoverflow.com/users/9773285/mark-a"}, "reply_to_user": {"reputation": 95, "user_id": 10942161, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2O-mNIkuoM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwca4uC1fQh5VPyzO_iJz1V4SCHJlPg/mo/photo.jpg?sz=128", "display_name": "Tiago Bachiega de Almeida", "link": "https://stackoverflow.com/users/10942161/tiago-bachiega-de-almeida"}, "edited": false, "score": 0, "creation_date": 1554393354, "post_id": 55504122, "comment_id": 97745027, "body": "Ah yes, you should also do this in your <code>receive()</code> function.  It wasn&#39;t causing your test program to fail but it might cause other issues.  Leaving len unitialized could result in memory corruption if it happens to end up with a value greater than <code>sizeof(serveaddr)</code>"}], "tags": [], "owner": {"reputation": 647, "user_id": 9773285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e95570197a5ef8f4a067a3669c09143?s=128&d=identicon&r=PG&f=1", "display_name": "Mark A", "link": "https://stackoverflow.com/users/9773285/mark-a"}, "is_accepted": true, "score": 1, "last_activity_date": 1554324963, "creation_date": 1554324963, "answer_id": 55504122, "question_id": 55501787, "link": "https://stackoverflow.com/questions/55501787/udp-client-stucks-in-recvfrom-only-in-specific-situation/55504122#55504122", "title": "UDP client stucks in recvfrom only in specific situation", "body": "<p>In your <code>send()</code> function, you are not initializing <code>len</code> to the length of the buffer where <code>recvfrom</code> can store the client address.</p>\n\n<p>According to the man page for <code>recvfrom</code>:</p>\n\n<blockquote>\n  <p>ssize_t recvfrom(int sockfd, void *buf, size_t len, int flags,\n                         struct sockaddr *src_addr, socklen_t *addrlen);</p>\n  \n  <p>If src_addr is not NULL,  and  the  underlying  protocol  provides  the\n  source  address  of  the  message, that source address is placed in the\n  buffer pointed to by src_addr.  In this case, addrlen is a value-result\n  argument.  Before the call, it should be initialized to the size of the\n  buffer associated with src_addr.  Upon return, addrlen  is  updated  to\n  contain the actual size of the source address.</p>\n</blockquote>\n\n<p>It's not working because the client address isn't being properly received so the response message is being sent to the wrong address. To resolve your problem, you just need to initialize <code>len</code> before the call to <code>recvfrom</code>:</p>\n\n<pre><code>socklen_t len = sizeof(cliaddr); // The size of the buffer you're passing to store the client address\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 10942161, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2O-mNIkuoM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwca4uC1fQh5VPyzO_iJz1V4SCHJlPg/mo/photo.jpg?sz=128", "display_name": "Tiago Bachiega de Almeida", "link": "https://stackoverflow.com/users/10942161/tiago-bachiega-de-almeida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 55504122, "answer_count": 1, "score": 0, "last_activity_date": 1554324963, "creation_date": 1554315624, "last_edit_date": 1592644375, "question_id": 55501787, "link": "https://stackoverflow.com/questions/55501787/udp-client-stucks-in-recvfrom-only-in-specific-situation", "title": "UDP client stucks in recvfrom only in specific situation", "body": "<p>I'm writing a C++ code that implements an UDP server and client.</p>\n<p>The code works fine when I write two codes, one for the server and another for the client, as in this example : <a href=\"https://www.geeksforgeeks.org/udp-server-client-implementation-c/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/udp-server-client-implementation-c/</a> .</p>\n<p>What I'm trying to do is to write a client function and a server function in the same code. The ideia is that I select how the program is going to work with the command lines argument.</p>\n<p>The problem is that, implementing this way and testing in two terminals running the same code, with different command line arguments, one for server and another for client, the client stucks in the recvfrom, when receiving the server response.</p>\n<pre><code>#include &lt;unistd.h&gt; \n#include &lt;stdio.h&gt; \n#include &lt;sys/socket.h&gt; \n#include &lt;stdlib.h&gt; \n#include &lt;netinet/in.h&gt; \n#include &lt;string.h&gt; \n#include &lt;arpa/inet.h&gt;\n#include &lt;unistd.h&gt;\n#define MAXLINE 1024\n#define PORT 32000\n\nint send(){\n    int sockfd; \n    char buffer[MAXLINE]; \n    char *hello = &quot;Hello from server&quot;; \n    struct sockaddr_in servaddr, cliaddr; \n    \n    // Creating socket file descriptor \n    if ( (sockfd = socket(AF_INET, SOCK_DGRAM, 0)) &lt; 0 ) { \n        perror(&quot;socket creation failed&quot;); \n        exit(EXIT_FAILURE); \n    } \n    \n    memset(&amp;servaddr, 0, sizeof(servaddr)); \n    memset(&amp;cliaddr, 0, sizeof(cliaddr)); \n    \n    // Filling server information \n    servaddr.sin_family = AF_INET; // IPv4 \n    servaddr.sin_addr.s_addr = inet_addr(&quot;127.0.0.1&quot;); \n    servaddr.sin_port = htons(PORT); \n    \n    // Bind the socket with the server address \n    if ( bind(sockfd, (const struct sockaddr *)&amp;servaddr, \n            sizeof(servaddr)) &lt; 0 ) \n    { \n        perror(&quot;bind failed&quot;); \n        exit(EXIT_FAILURE); \n    } \n    \n    socklen_t len;\n    int n; \n    n = recvfrom(sockfd, (char *)buffer, MAXLINE, \n                MSG_WAITALL, ( struct sockaddr *) &amp;cliaddr, \n                &amp;len); \n    buffer[n] = '\\0'; \n    printf(&quot;Client : %s\\n&quot;, buffer); \n    sendto(sockfd, (const char *)hello, strlen(hello), \n        MSG_CONFIRM, (const struct sockaddr *) &amp;cliaddr, \n            len); \n    printf(&quot;Hello message sent.\\n&quot;); \n\n    return 0; \n}\n\nint receive(){\n    int sockfd; \n    char buffer[MAXLINE]; \n    char *hello = &quot;Hello from client&quot;; \n    struct sockaddr_in   servaddr; \n\n    // Creating socket file descriptor \n    if ( (sockfd = socket(AF_INET, SOCK_DGRAM, 0)) &lt; 0 ) { \n        perror(&quot;socket creation failed&quot;); \n        exit(EXIT_FAILURE); \n    } \n\n    memset(&amp;servaddr, 0, sizeof(servaddr)); \n    \n    // Filling server information \n    servaddr.sin_family = AF_INET; \n    servaddr.sin_port = htons(PORT); \n    servaddr.sin_addr.s_addr = inet_addr(&quot;127.0.0.1&quot;); \n    \n    int n;\n    socklen_t len; \n    \n    sendto(sockfd, (const char *)hello, strlen(hello), \n        MSG_CONFIRM, (const struct sockaddr *) &amp;servaddr, \n            sizeof(servaddr)); \n    printf(&quot;Hello message sent.\\n&quot;); \n        \n    n = recvfrom(sockfd, (char *)buffer, MAXLINE, \n                MSG_WAITALL, (struct sockaddr *) &amp;servaddr, \n                &amp;len); \n    buffer[n] = '\\0'; \n    printf(&quot;Server : %s\\n&quot;, buffer); \n\n    return 0; \n}\n\nint main(int argc, char const *argv[]) {\n\n    int command = atoi(argv[1]);\n\n    if(command == 0){\n        send();\n        \n    }\n    if(command == 1){\n        receive();\n    }\n\n\n    return 0;\n}\n</code></pre>\n<p>The expected results is something like this, that i get when running the client and the server on separated codes:</p>\n<p>Server side:</p>\n<blockquote>\n<p>Hello from client</p>\n<p>Hello message sent</p>\n</blockquote>\n<p>Client side:</p>\n<blockquote>\n<p>Hello message sent</p>\n<p>Hello from server</p>\n</blockquote>\n<p>But what I get when running the code above is</p>\n<p>Server side:</p>\n<blockquote>\n<p>Hello from client</p>\n<p>Hello message sent</p>\n</blockquote>\n<p>Client side:</p>\n<blockquote>\n<p>Hello message sent</p>\n<p>---gets stucked here---</p>\n</blockquote>\n<p>What am i doing wrong?</p>\n"}, {"tags": ["java", "c++"], "comments": [{"owner": {"reputation": 21, "user_id": 11307351, "user_type": "registered", "profile_image": "https://graph.facebook.com/1758159500877633/picture?type=large", "display_name": "Jeff Hardy", "link": "https://stackoverflow.com/users/11307351/jeff-hardy"}, "reply_to_user": {"reputation": 48511, "user_id": 5558072, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-GFXl3bQPSrM/AAAAAAAAAAI/AAAAAAAAARY/Fvg3zPWA3x0/photo.jpg?sz=128", "display_name": "YCF_L", "link": "https://stackoverflow.com/users/5558072/ycf-l"}, "edited": false, "score": 0, "creation_date": 1554315808, "post_id": 55501769, "comment_id": 97710055, "body": "Isn&#39;t there a way instead of hard coding the C++ code to just call the file for that functionality?"}, {"owner": {"reputation": 719, "user_id": 2267554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10cfce442a9bd102017c83f29020cbf4?s=128&d=identicon&r=PG", "display_name": "Udaya Shankara Gandhi Thalabat", "link": "https://stackoverflow.com/users/2267554/udaya-shankara-gandhi-thalabat"}, "edited": false, "score": 0, "creation_date": 1554315891, "post_id": 55501769, "comment_id": 97710102, "body": "whatever the functionality you want to implement you can have inside actionPerformed() method. Please post your code of what you want to implement here to get more insights"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1554316090, "post_id": 55501769, "comment_id": 97710217, "body": "@JeffHardy <i>&quot;a C++ file has to run&quot;</i> C++ source code cannot be simply <i>&quot;run&quot;</i>, you have to compile it, and if you&#39;re lucky it will output as an executable file, that you can invoke from your java code."}], "answers": [{"comments": [{"owner": {"reputation": 1467, "user_id": 2321368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02976c5560774d0fd4336cc6e4fad075?s=128&d=identicon&r=PG", "display_name": "dan.m was user2321368", "link": "https://stackoverflow.com/users/2321368/dan-m-was-user2321368"}, "edited": false, "score": 0, "creation_date": 1554319689, "post_id": 55502776, "comment_id": 97711960, "body": "This compiles the Program.cpp code.  You would presumably need to also make sure the code compiles, and then run it.   I&#39;m pretty sure this isn&#39;t what the OP needs."}, {"owner": {"reputation": 1765, "user_id": 11143190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jgNjw.jpg?s=128&g=1", "display_name": "Zain Arshad", "link": "https://stackoverflow.com/users/11143190/zain-arshad"}, "reply_to_user": {"reputation": 1467, "user_id": 2321368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02976c5560774d0fd4336cc6e4fad075?s=128&d=identicon&r=PG", "display_name": "dan.m was user2321368", "link": "https://stackoverflow.com/users/2321368/dan-m-was-user2321368"}, "edited": false, "score": 0, "creation_date": 1554349411, "post_id": 55502776, "comment_id": 97720494, "body": "What do you want to say ? Should I check for errors then correct them then compile the code and then run it ?.. Hahaa... I can&#39;t be achieved pragmatically. I think the code will be error-free in the first place."}, {"owner": {"reputation": 21, "user_id": 11307351, "user_type": "registered", "profile_image": "https://graph.facebook.com/1758159500877633/picture?type=large", "display_name": "Jeff Hardy", "link": "https://stackoverflow.com/users/11307351/jeff-hardy"}, "edited": false, "score": 0, "creation_date": 1554916707, "post_id": 55502776, "comment_id": 97929392, "body": "@ZainArshad I tried your code, it does compile the code but doesn&#39;t run it. It creates a .exe file of the C++ file I&#39;m trying to run. When I run the .exe file it does run the C++ code, but what it really needs to do is when I click the button &quot;Done&quot;, it should compile and automatically run the C++ file I have."}, {"owner": {"reputation": 1765, "user_id": 11143190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jgNjw.jpg?s=128&g=1", "display_name": "Zain Arshad", "link": "https://stackoverflow.com/users/11143190/zain-arshad"}, "edited": false, "score": 0, "creation_date": 1554916804, "post_id": 55502776, "comment_id": 97929435, "body": "see if it runs via <code>cmd</code> if you explicitly tries to run it ? meanwhile let me update my answer"}, {"owner": {"reputation": 21, "user_id": 11307351, "user_type": "registered", "profile_image": "https://graph.facebook.com/1758159500877633/picture?type=large", "display_name": "Jeff Hardy", "link": "https://stackoverflow.com/users/11307351/jeff-hardy"}, "edited": false, "score": 0, "creation_date": 1554917233, "post_id": 55502776, "comment_id": 97929659, "body": "The .exe file does runs in CDM and it does what it supposed to do."}, {"owner": {"reputation": 1765, "user_id": 11143190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jgNjw.jpg?s=128&g=1", "display_name": "Zain Arshad", "link": "https://stackoverflow.com/users/11143190/zain-arshad"}, "edited": false, "score": 0, "creation_date": 1554917346, "post_id": 55502776, "comment_id": 97929720, "body": "ok wait a while i am updating the answer it will run the .exe file as well"}, {"owner": {"reputation": 1765, "user_id": 11143190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jgNjw.jpg?s=128&g=1", "display_name": "Zain Arshad", "link": "https://stackoverflow.com/users/11143190/zain-arshad"}, "edited": false, "score": 0, "creation_date": 1554917797, "post_id": 55502776, "comment_id": 97929944, "body": "process.command(&quot;g++&quot;, &quot;-o&quot;, &quot;Program.exe&quot;, &quot;Program.cpp&quot;);  process.start()"}, {"owner": {"reputation": 1765, "user_id": 11143190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jgNjw.jpg?s=128&g=1", "display_name": "Zain Arshad", "link": "https://stackoverflow.com/users/11143190/zain-arshad"}, "edited": false, "score": 0, "creation_date": 1554917836, "post_id": 55502776, "comment_id": 97929964, "body": "add this to in above code after first process.start()...... you got what you want ?"}, {"owner": {"reputation": 21, "user_id": 11307351, "user_type": "registered", "profile_image": "https://graph.facebook.com/1758159500877633/picture?type=large", "display_name": "Jeff Hardy", "link": "https://stackoverflow.com/users/11307351/jeff-hardy"}, "edited": false, "score": 0, "creation_date": 1554919270, "post_id": 55502776, "comment_id": 97930633, "body": "process.command(&quot;g++.exe&quot;, &quot;ared.cpp&quot;, &quot;-o&quot;, &quot;ared&quot;); process.start().waitFor(); // will wait till the compilation process.command(&quot;g++&quot;, &quot;-o&quot;, &quot;ared.exe&quot;, &quot;ared.cpp&quot;); process.start();"}, {"owner": {"reputation": 21, "user_id": 11307351, "user_type": "registered", "profile_image": "https://graph.facebook.com/1758159500877633/picture?type=large", "display_name": "Jeff Hardy", "link": "https://stackoverflow.com/users/11307351/jeff-hardy"}, "edited": false, "score": 0, "creation_date": 1554919285, "post_id": 55502776, "comment_id": 97930643, "body": "You mean to add it like that?"}, {"owner": {"reputation": 1765, "user_id": 11143190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jgNjw.jpg?s=128&g=1", "display_name": "Zain Arshad", "link": "https://stackoverflow.com/users/11143190/zain-arshad"}, "edited": false, "score": 0, "creation_date": 1554919463, "post_id": 55502776, "comment_id": 97930735, "body": "yes ... see if it works ? actually i am not on laptop so i cant run and test it myself thats why i am asking you.. pardon me"}, {"owner": {"reputation": 21, "user_id": 11307351, "user_type": "registered", "profile_image": "https://graph.facebook.com/1758159500877633/picture?type=large", "display_name": "Jeff Hardy", "link": "https://stackoverflow.com/users/11307351/jeff-hardy"}, "edited": false, "score": 0, "creation_date": 1554919597, "post_id": 55502776, "comment_id": 97930798, "body": "It still do the same nothing has changed."}, {"owner": {"reputation": 1765, "user_id": 11143190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jgNjw.jpg?s=128&g=1", "display_name": "Zain Arshad", "link": "https://stackoverflow.com/users/11143190/zain-arshad"}, "edited": false, "score": 0, "creation_date": 1554919803, "post_id": 55502776, "comment_id": 97930890, "body": "process.command(&quot;g++&quot;, &quot;ared.cpp&quot;, &quot;-o&quot;, &quot;ared.exe&quot;); process.start().waitFor();"}, {"owner": {"reputation": 1765, "user_id": 11143190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jgNjw.jpg?s=128&g=1", "display_name": "Zain Arshad", "link": "https://stackoverflow.com/users/11143190/zain-arshad"}, "edited": false, "score": 0, "creation_date": 1554919834, "post_id": 55502776, "comment_id": 97930903, "body": "use only this ... remove all other commands in the <code>try</code> block"}], "tags": [], "owner": {"reputation": 1765, "user_id": 11143190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jgNjw.jpg?s=128&g=1", "display_name": "Zain Arshad", "link": "https://stackoverflow.com/users/11143190/zain-arshad"}, "is_accepted": false, "score": 0, "last_activity_date": 1554319194, "creation_date": 1554319194, "answer_id": 55502776, "question_id": 55501769, "link": "https://stackoverflow.com/questions/55501769/how-to-execute-c-code-when-java-button-is-clicked/55502776#55502776", "title": "How to execute C++ code when java button is clicked?", "body": "<p>You can use <code>ProcessBuilder</code> class for this purpose. Wokring Code:</p>\n\n<pre><code>JButton button = new JButton(\"Done\");\n    button.addActionListener(\n        new ActionListener() {\n            public void actionPerformed(ActionEvent e) \n            {\n                ProcessBuilder process = new ProcessBuilder();\n                try\n                {\n                    process.command(\"g++\", \"Program.cpp\", \"-o\", \"Program\");\n                    process.start().waitFor();  // will wait till the compilation\n                }\n                catch(Exception e)\n                {\n                    System.out.println(e.toString());  // print any exception if thrown\n                }\n            }\n         });\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11307351, "user_type": "registered", "profile_image": "https://graph.facebook.com/1758159500877633/picture?type=large", "display_name": "Jeff Hardy", "link": "https://stackoverflow.com/users/11307351/jeff-hardy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554319194, "creation_date": 1554315567, "last_edit_date": 1554317796, "question_id": 55501769, "link": "https://stackoverflow.com/questions/55501769/how-to-execute-c-code-when-java-button-is-clicked", "title": "How to execute C++ code when java button is clicked?", "body": "<p>I'm working on a java GUI button that when I click on it a C++ file has to run. I've tried 'filename = new filename' but that doesn't seem to work.</p>\n\n<p>I'm working on the latest version of Eclipse in a Windows environment.</p>\n\n<pre><code>JButton button = new JButton(\"Done\");\n      button.addActionListener(\n         new ActionListener() {\n            public void actionPerformed(ActionEvent e) {\n\n            }\n         });\n</code></pre>\n"}, {"tags": ["c++", "clang", "c++20", "c++-modules"], "answers": [{"comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1554390522, "post_id": 55518202, "comment_id": 97743253, "body": "Huh. Got it, thanks! But do you happen to know what the error means exactly? Aligned new is declared as <code>void* operator new(std::size_t, std::align_val_t) __attribute__((__externally_visible__));</code> for me, so it should have external linkage, rather than no linkage?"}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 3, "last_activity_date": 1554387378, "creation_date": 1554387378, "answer_id": 55518202, "question_id": 55501670, "link": "https://stackoverflow.com/questions/55501670/unable-to-use-aligned-operator-new-in-a-module-with-clang/55518202#55518202", "title": "Unable to use aligned `operator new` in a module with Clang", "body": "<p>The standard library isn't part of your module <code>a</code>. So don't include the header after the <code>export module a;</code>. Include the header before that.</p>\n"}], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 55518202, "answer_count": 1, "score": 7, "last_activity_date": 1554387378, "creation_date": 1554315215, "last_edit_date": 1554326084, "question_id": 55501670, "link": "https://stackoverflow.com/questions/55501670/unable-to-use-aligned-operator-new-in-a-module-with-clang", "title": "Unable to use aligned `operator new` in a module with Clang", "body": "<p>I'm experimenting with Clang \"modules\" feature, and I'm trying to compile following piece of code:</p>\n\n<pre><code>export module a;\n\n#include &lt;new&gt;\n\nexport void *foo()\n{\n    return ::operator new(1, std::align_val_t(1));\n}\n\nexport int main() {}\n</code></pre>\n\n<p><kbd><a href=\"https://gcc.godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,lang:c%2B%2B,source:&#39;export+module+a%3B%0A%0A%23include+%3Cnew%3E%0A%0Aexport+void+*foo()%0A%7B%0A++++return+::operator+new(1,+std::align_val_t(1))%3B%0A%7D%0A%0Aexport+int+main()+%7B%7D&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;C%2B%2B+source+%231&#39;,t:&#39;0&#39;)),k:50.50746268656716,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((g:!((h:compiler,i:(compiler:clang800,filters:(b:&#39;0&#39;,binary:&#39;1&#39;,commentOnly:&#39;0&#39;,demangle:&#39;0&#39;,directives:&#39;0&#39;,execute:&#39;1&#39;,intel:&#39;0&#39;,libraryCode:&#39;1&#39;,trim:&#39;0&#39;),lang:c%2B%2B,libs:!(),options:&#39;-std%3Dc%2B%2B2a+-pedantic-errors+-fmodules-ts+--precompile+-x+c%2B%2B-module&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;x86-64+clang+8.0.0+(Editor+%231,+Compiler+%231)+C%2B%2B&#39;,t:&#39;0&#39;)),header:(),k:25.335588551489735,l:&#39;4&#39;,m:50,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:output,i:(compiler:1,editor:1,wrap:&#39;1&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;%231+with+x86-64+clang+8.0.0&#39;,t:&#39;0&#39;)),l:&#39;4&#39;,m:50,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),k:49.49253731343284,l:&#39;3&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),l:&#39;2&#39;,m:100,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),version:4\" rel=\"nofollow noreferrer\">Try it live</a></kbd></p>\n\n<p>When I tried <code>clang++ -std=c++2a -pedantic-errors -fmodules-ts --precompile -x c++-module a.cpp -o a.pcm</code>, I got</p>\n\n<blockquote>\n<pre><code>error: ISO C++ requires a definition in this translation unit for function 'operator new'\n because its type does not have linkage [-Werror,-Wundefined-internal-type]\na.cpp:7:14: note: used here\n    return ::operator new(1, std::align_val_t(1));\n         ^\n1 error generated.\n</code></pre>\n</blockquote>\n\n<p>Removing <code>-pedantic-errors</code> fixes the error, but when I try to link the resulting module using <code>clang++ -std=c++2a -fmodules-ts a.pcm -o a.exe</code>, I get </p>\n\n<blockquote>\n<pre><code>Z:\\Lander\\msys2\\tmp\\a-cfaf65.o:a.pcm:(.text+0x10): undefined reference to\n `_ZnwyW1aESt11align_val_t'\nclang++: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n</blockquote>\n\n<p>It's especially annoying since <code>&lt;iostream&gt;</code> (indirectly) seems to rely on the aligned <code>operator new</code>, so I can't use it in modules too. As well as some other standard headers.</p>\n\n<p>What's going on here?</p>\n\n<p>It it's a Clang bug, how can I work around it?</p>\n\n<hr>\n\n<p>My Clang is the latest version provided by MSYS2:</p>\n\n<pre><code># clang++ --version\nclang version 8.0.0 (tags/RELEASE_800/final)\nTarget: x86_64-w64-windows-gnu\nThread model: posix\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Filed <a href=\"https://bugs.llvm.org/show_bug.cgi?id=41364\" rel=\"nofollow noreferrer\">a bug report</a>, let's see what happens...</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 1327, "user_id": 2990896, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/hSkaq.jpg?s=128&g=1", "display_name": "cplusplusrat", "link": "https://stackoverflow.com/users/2990896/cplusplusrat"}, "edited": false, "score": 0, "creation_date": 1554313904, "post_id": 55501294, "comment_id": 97709120, "body": "This is legal code. The <code>const ref</code> will remain valid in its own scope, which for your  case is the entire <code>main()</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1554313922, "post_id": 55501294, "comment_id": 97709129, "body": "<a href=\"https://stackoverflow.com/questions/2784262/does-a-const-reference-class-member-prolong-the-life-of-a-temporary\">Does a const reference class member prolong the life of a temporary?</a>"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1554314312, "post_id": 55501294, "comment_id": 97709293, "body": "Tell me if the dupe is wrong"}, {"owner": {"reputation": 744, "user_id": 4513646, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QPdSL.jpg?s=128&g=1", "display_name": "StackAttack", "link": "https://stackoverflow.com/users/4513646/stackattack"}, "edited": false, "score": 0, "creation_date": 1554314826, "post_id": 55501294, "comment_id": 97709568, "body": "In your example, ret_val vector is destroyed when your main class ends."}], "owner": {"reputation": 443, "user_id": 9051576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/982508d548e8d994adb5eea5a9908a29?s=128&d=identicon&r=PG&f=1", "display_name": "mato", "link": "https://stackoverflow.com/users/9051576/mato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "closed_date": 1554314236, "answer_count": 0, "score": 0, "last_activity_date": 1554313752, "creation_date": 1554313752, "question_id": 55501294, "link": "https://stackoverflow.com/questions/55501294/storing-return-value-from-function-to-const-ref", "closed_reason": "Duplicate", "title": "Storing return value from function to const ref", "body": "<p>Function GetVec return std::vector. Then I store the returned value into the const ref. Does the returned value stored in const ref get destroyed in next line. I was in the impression it wont. </p>\n\n<pre><code>\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nstd::vector&lt;int&gt; GetVec(){\n  std::vector&lt;int&gt; vec;\n\n  vec.push_back(1);\n  vec.push_back(2);\n  vec.push_back(3);\n\n  return vec;\n}\n\n\nvoid print(const std::vector&lt;int&gt;&amp; arg){\n  for(const auto&amp; id : arg){\n    std::cout &lt;&lt;id &lt;&lt; \",\";\n  }\n  std::cout &lt;&lt; std::endl;\n}\n\nint main(){\n  const std::vector&lt;int&gt;&amp; ret_val = GetVec();\n\n  // is content of ret_val undefined here?\n  print(ret_val);\n}\n</code></pre>\n\n<p>Output : </p>\n\n<p>1,2,3,</p>\n"}, {"tags": ["c++", "qt", "queue", "thread-safety", "mandelbrot"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1554312898, "post_id": 55500950, "comment_id": 97708650, "body": "I advise not putting all of that runtime logic inside of a constructor (<code>Plot::Plot</code>).  Constructors IMO should be lean and do the minimal work to establish an object."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10474264"}, "edited": false, "score": 0, "creation_date": 1554312961, "post_id": 55500950, "comment_id": 97708681, "body": "Is it faster now because of spliting picture in 4?"}, {"owner": {"reputation": 1, "user_id": 8973684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e764604885092f686def9348e17f9aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Lacwik", "link": "https://stackoverflow.com/users/8973684/lacwik"}, "edited": false, "score": 0, "creation_date": 1554375683, "post_id": 55500950, "comment_id": 97733195, "body": "@MediaEU calculations are done faster, but i can&#39;t see a sh*t"}], "owner": {"reputation": 1, "user_id": 8973684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e764604885092f686def9348e17f9aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Lacwik", "link": "https://stackoverflow.com/users/8973684/lacwik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554312457, "creation_date": 1554312457, "question_id": 55500950, "link": "https://stackoverflow.com/questions/55500950/adding-to-qqueue-crashes-program", "title": "adding to QQueue crashes program", "body": "<p>I'm trying to draw a Mandelbrot set in QT. All is done and it's looking good, but it need some time to calculate the color of pixel, so i wanted to split picture in 4 and give calculation to separated threads.\nThreads are working and the problem is: after math i want to generate object (my Pixel structure) and pass it to the queque with enqueue() method, which from my paintEvent getting x,y and color to draw. \nAdding to the queue generates:</p>\n\n<pre><code>18:09:15: The program has unexpectedly finished.\n18:09:15: The process was ended forcefully.\n</code></pre>\n\n<p>without it, threads are working normally</p>\n\n<p>method Plot::get_iterations_from_thread() in Plot.cpp</p>\n\n<pre><code>#include \"plot.h\"\n\n\nQMutex Plot::mutex;\n\nPlot::Plot(QWidget *parent) : QWidget(parent)\n{ \n    connect(this,\n            SIGNAL(get_iterations(unsigned int, unsigned int, int, int)),\n            this,\n            SLOT(get_iterations_from_thread(unsigned int, unsigned int, int, int)),\n            Qt::ConnectionType::QueuedConnection);\n\n    th1.set_values(0, (width/2)-1,\n                   0, (height/2)-1,\n                   cxmin, cxmax, cymin, cymax,\n                   max_check, \"TH1\");\n    std::cout &lt;&lt; th1.name + \" values setted\" &lt;&lt; std::endl;\n\n    th2.set_values((width/2)+1, width,\n                   0, (height/2)-1,\n                   cxmin, cxmax, cymin, cymax,\n                   max_check, \"TH2\");\n    std::cout &lt;&lt; th2.name + \" values setted\" &lt;&lt; std::endl;\n\n    th3.set_values(0, (width/2)-1,\n                   (height/2)+1, height,\n                   cxmin, cxmax, cymin, cymax,\n                   max_check, \"TH3\");\n    std::cout &lt;&lt; th3.name + \" values setted\" &lt;&lt; std::endl;\n\n    th4.set_values((width/2)+1, width,\n                   (height/2)+1, height,\n                   cxmin, cxmax, cymin, cymax,\n                   max_check, \"TH4\");\n    std::cout &lt;&lt; th4.name + \" values setted\" &lt;&lt; std::endl;\n\n    th1.start();\n    th2.start();\n    th3.start();\n    th4.start();\n}\n\nvoid Plot::get_iterations_from_thread(unsigned int iterations, unsigned int max_check, int x,  int y)\n{\n    mutex.lock();\n    std::cout &lt;&lt; \"generating pixel\" &lt;&lt; std::endl;\n    Pixel pix(x, y, iterations, max_check);\n    pixels.enqueue(pix);\n    std::cout &lt;&lt; \"pixel generated!\" &lt;&lt; std::endl;\n    mutex.unlock();\n}\n\nvoid Plot::paintEvent(QPaintEvent *e)\n{\n    std::cout &lt;&lt; \"paintEvent\" &lt;&lt; std::endl;\n    mutex.lock();\n    QPainter painter;\n    painter.begin(this);\n    QPen pen(Qt::white);\n    pen.setWidth(1);\n    pen.setCapStyle(Qt::SquareCap);\n    if(!pixels.isEmpty()){\n        foreach(Pixel pixel, pixels){\n            std::cout &lt;&lt; \"painting \" + std::to_string(pixel.get_x()) + \",\" + std::to_string(pixel.get_y()) &lt;&lt; std::endl;\n            pen.setColor(pixel.get_color());\n            painter.setPen(pen);\n            painter.drawPoint(pixel.get_x(), pixel.get_y());\n            pixels.dequeue();\n        }\n    }\n    painter.end();\n\n    mutex.unlock();\n\n}\n</code></pre>\n\n<p>using it:</p>\n\n<pre><code>void CountingThread::run()\n{\n    Plot * window = dynamic_cast&lt;Plot*&gt;(parent());\n    for(int x=x_start; x&lt;x_stop; ++x){\n        for(int y=y_start; y&lt;y_stop; ++y){\n\n            std::complex&lt;double&gt; c(cxmin + x/(width-1.5)*(cxmax-cxmin), cymin + y/(height-0.5)*(cymax-cymin));\n            std::complex&lt;double&gt; z(0,0);\n            unsigned int iterations;\n            for (iterations = 0; iterations &lt; max_check &amp;&amp; std::abs(z) &lt; 2.0; ++iterations) {\n                z = z*z + c;\n            }\n\n            std::cout &lt;&lt; name + \" done for: \" + std::to_string(x) + \",\" + std::to_string(y) + \" \" &lt;&lt; std::endl;\n            //emit(window-&gt;get_iterations(iterations, max_check, x, y));\n            window-&gt;get_iterations_from_thread(iterations, max_check, x, y);\n            std::cout &lt;&lt; name + \" emitted\" &lt;&lt; std::endl;\n        }\n    }\n\n}\n</code></pre>\n\n<p>and the Plot.h</p>\n\n<pre><code>#ifndef PLOT_H\n#define PLOT_H\n\n#include &lt;QWidget&gt;\n#include &lt;QPainter&gt;\n\n#include &lt;iostream&gt;\n\n#include \"countingthread.h\"\n#include \"pixel.h\"\n\nclass Plot : public QWidget\n{\n    Q_OBJECT\npublic:\n    explicit Plot(QWidget *parent = nullptr);\n    static QMutex mutex;\n    QQueue&lt;Pixel&gt; pixels;\n\nprivate:\n    void Plot::paintEvent(QPaintEvent *e) override;\n    CountingThread th1;\n    CountingThread th2;\n    CountingThread th3;\n    CountingThread th4;\n\n    int width = 820;\n    int height = 640;\n    double cxmin = -1.5;\n    double cxmax = 0.5;\n    double cymin = -1.0;\n    double cymax = 1.0;\n    unsigned int max_check = 100;\n\nsignals:\n    void get_iterations(unsigned int iterations, unsigned int max_check, int x,  int y);\n\npublic slots:\n    void get_iterations_from_thread(unsigned int iterations, unsigned int max_check, int x,  int y);\n};\n\n#endif // PLOT_H\n\n</code></pre>\n\n<p>by the way: the emit function is commented because it doesn't work and i don't know really why, which frustrate me a lot</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": false, "score": 1, "last_activity_date": 1554329862, "last_edit_date": 1554329862, "creation_date": 1554315038, "answer_id": 55501636, "question_id": 55500844, "link": "https://stackoverflow.com/questions/55500844/recieve-3-files-by-terminal-and-concatenate-the-content-of-file2-and-file3-to-fi/55501636#55501636", "title": "Recieve 3 files by terminal and concatenate the content of file2 and file3 to file1 using fstream", "body": "<p>You can use <code>std::copy</code> with stream iterators, and I've revised my previous suspicion that it would be slow, so here's one way using doing just that with comments in the code.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;vector&gt;\n#include &lt;ios&gt;\n#include &lt;stdexcept&gt;\n\nvoid concat(const std::string&amp; destination, const std::vector&lt;std::string&gt;&amp; sources) {\n    // open the destination file and keep it open until all is done\n    std::ofstream dest_fs(destination, std::ios_base::binary);\n    if(!dest_fs) \n        throw std::runtime_error(\"Could not write to \\\"\" + destination + \"\\\".\");\n\n    // loop over the source files\n    for(const auto&amp; source_file : sources) {\n        // open the current source file\n        std::ifstream source_fs(source_file, std::ios_base::binary);\n        if(!source_fs)\n            throw std::runtime_error(\"Could not read from \\\"\" + source_file + \"\\\".\");\n\n        // copy from source to destination\n        std::copy(std::istreambuf_iterator&lt;char&gt;(source_fs),\n                  std::istreambuf_iterator&lt;char&gt;(),\n                  std::ostreambuf_iterator&lt;char&gt;(dest_fs));\n    }\n}\n\nint cppmain(std::string program, std::vector&lt;std::string&gt; args) {\n    if(args.size() &lt; 2) {\n        std::cout &lt;&lt; \"USAGE: \" &lt;&lt; program &lt;&lt; \" destination_file input_file(s)\\n\";\n        return 1;\n    }\n\n    // extract the first argument which is the destination file\n    std::string destination_file = std::move(args.front());\n    args.erase(args.begin()); // erase first argument from the vector\n\n    try {\n        // do the concatenation\n        concat(destination_file, args);\n        return 0;\n    } catch(const std::exception&amp; ex) {\n        std::cerr &lt;&lt; program &lt;&lt; \": ERROR: \" &lt;&lt; ex.what() &lt;&lt; \"\\n\";\n        return 1;\n    }\n}\n\nint main(int argc, char* argv[]) {\n    return cppmain(argv[0], {argv + 1, argv + argc});\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 9836509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f87558cb8b102a0e500c92c388ded655?s=128&d=identicon&r=PG&f=1", "display_name": "kvanderhorst", "link": "https://stackoverflow.com/users/9836509/kvanderhorst"}, "is_accepted": true, "score": 1, "last_activity_date": 1554315248, "creation_date": 1554315248, "answer_id": 55501680, "question_id": 55500844, "link": "https://stackoverflow.com/questions/55500844/recieve-3-files-by-terminal-and-concatenate-the-content-of-file2-and-file3-to-fi/55501680#55501680", "title": "Recieve 3 files by terminal and concatenate the content of file2 and file3 to file1 using fstream", "body": "<p>I think I see an issue with your <code>concat()</code> function. You are calling <code>concat()</code> for each of the files passed in. Then in the function, you are using <code>count_files</code> to run that loop again for the number of files passed in.</p>\n\n<p>I would consider rewriting <code>concat()</code> function so that it looks like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void concat(std::ofstream&amp; outputStream, char* fileToAppend)\n{\n    std::ifstream in(fileToAppend);\n\n    if (!in) {\n        cout &lt;&lt; \"Error, cannot open file: \" &lt;&lt; fileToAppend;\n        return;\n    }\n\n    // Use std::getline to read each line in the input stream,\n    // then write it to the output stream!\n    string line;\n    while (std::getline(in, line)) {\n        outputStream &lt;&lt; line;\n    }\n}\n</code></pre>\n\n<p>The benefit being that you can reuse the function for appending a <em>single</em> input file to an existing output stream, and you wrap up the check to ensure the file exists (you may want something more sophisticated like returning true/false on the file being appended, or throwing an error, etc.).</p>\n\n<p>In <code>main()</code>, you would replace the code after the check for at least three files with something like:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>    // Create an output stream with the first file\n    // ios::out- output flag\n    // ios::app- append flag\n    std::ofstream out(argv[1], ios::out | ios::app);\n\n    // Make sure the file exists!\n    if (!out) {\n        cout &lt;&lt; \"Error, cannot open file: \" &lt;&lt; argv[1];\n        exit(1);\n    }\n\n    // For all other arguments, concat with the first.\n    for (int i = 2; i &lt; argc; i++) {\n        concat(out, argv[i]);\n    }\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 9492800, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PKPvL.jpg?s=128&g=1", "display_name": "Pl&#224;cid Masvidal", "link": "https://stackoverflow.com/users/9492800/pl%c3%a0cid-masvidal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 55501680, "answer_count": 2, "score": -2, "last_activity_date": 1554329862, "creation_date": 1554312098, "question_id": 55500844, "link": "https://stackoverflow.com/questions/55500844/recieve-3-files-by-terminal-and-concatenate-the-content-of-file2-and-file3-to-fi", "title": "Recieve 3 files by terminal and concatenate the content of file2 and file3 to file1 using fstream", "body": "<p>I'm begginer in C++, so may be parts of my code doesn't have sense, sorry.</p>\n\n<p>What I have to do is (C++, Linux, by fstream):</p>\n\n<p>\u00b7 Receive 3 or more files passed by terminal by:\n  ./executable file1.txt file2.txt file3.txt</p>\n\n<p>\u00b7 programm a function that read the files file2.txt and file3.txt and copy it to file1.txt  (concatenate, don't overwrite) </p>\n\n<p>I don't know how to do it, I don't know anything about fstream, I'm just learning now by myself, so I really need help. Maybe there are similar questions solved in SO, but I don't know how to solve my problem by them.</p>\n\n<p>I attach the code I have. I don't know how to code the function, so it's empty.</p>\n\n<p>Thank you so much.</p>\n\n<p>I try doing:</p>\n\n<pre><code>void concat(char *argv[], int numberoffilesreceived){\n\n    char c;\n\n    towritethefiles.open(argv[0], ios::app);\n\n    for(int i=1; i&lt;numberoffilesreceived; i++){\n        toreadthefiles.open(argv[i], ios::in);\n        while(!toreadthefiles.eof()){\n            toreadthefiles &gt;&gt; c;\n            towritethefiles&lt;&lt; c;\n        }\n    }\n}\n</code></pre>\n\n<p>It compiles but doesn't work, the program freezes when you run it.</p>\n\n<p>and I also try using std::copy by I don't understand how it works.</p>\n\n<pre><code>ifstream toreadthefiles;\nofstream towritethefiles;\n\nvoid concat(char *argv[], int numberoffilesreceived);\n\nint main(int argc, char *argv[]){\n\n    /* 1/2 The code from below to 2/2 it's only to prevent path errors when receiving the files (it works fine) */\n    const char directory[SIZE]=\"./\";\n    int count_files=0;\n    char files[SIZE][SIZE];\n    for(int i=1; i&lt;argc; i++){\n        strcpy(files[i], directory);\n        strcat(files[i], argv[i]);\n        count_files++;\n    }\n    /*2/2 to add ./ to the name files when passed by terminal: ./executable ./file1.txt ./file2.txt ./file3.txt */\n\n    /*check if received almost 3 files like required */\n    if(argc&lt;3){\n        cout&lt;&lt; \"Error, to few files entered\" &lt;&lt; endl;\n        getchar();\n        exit(1);\n    }\n\n    /*pass the files to the concat function*/\n    for(int i=1; i&lt;argc; i++){  \n        concat(&amp;argv[i], count_files);      \n    }\n\n\n    toreadthefiles.close();\n    towritethefiles.close();\n\n    return 0;\n}\n\nvoid concat(char *argv[], int count_files){\n\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 2, "creation_date": 1554311778, "post_id": 55500745, "comment_id": 97708156, "body": "<code>NumberDetection</code> is a single number - do you know which one?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1554311888, "post_id": 55500745, "comment_id": 97708201, "body": "Also what do you think <code>cin &gt;&gt; guess;</code> does when you enter something that is not an integer?"}, {"owner": {"reputation": 9, "user_id": 11302233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fdd680028a45f19947adfa382301591?s=128&d=identicon&r=PG&f=1", "display_name": "user11302233", "link": "https://stackoverflow.com/users/11302233/user11302233"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1554311924, "post_id": 55500745, "comment_id": 97708220, "body": "I didn&#39;t think about that Thank you!"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 1, "creation_date": 1554311938, "post_id": 55500745, "comment_id": 97708230, "body": "<code>NumberDetection = 0, 1, 2, 3...</code> I can pretty much guarantee that this doesn&#39;t do what you think it does."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1554312003, "post_id": 55500745, "comment_id": 97708260, "body": "<code>secret = rand() % 100 - 0;</code>  you can remove the -0 part."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1554312047, "post_id": 55500745, "comment_id": 97708282, "body": "<code>srand(time(NULL));</code> you should get this out of the loop. Call it 1 time at the beginning of <code>main</code>."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1554312195, "post_id": 55500745, "comment_id": 97708351, "body": "As for <code>srand</code>/<code>rand</code> see <a href=\"https://channel9.msdn.com/Events/GoingNative/2013/rand-Considered-Harmful\" rel=\"nofollow noreferrer\">rand() Considered Harmful</a>. Consider <a href=\"https://en.cppreference.com/w/cpp/numeric/random\" rel=\"nofollow noreferrer\">&lt;random&gt;</a> instead."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1554312427, "post_id": 55500745, "comment_id": 97708467, "body": "Specifically <a href=\"https://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution\" rel=\"nofollow noreferrer\"><code>std::uniform_int_distribution</code></a>"}, {"owner": {"reputation": 9, "user_id": 11302233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fdd680028a45f19947adfa382301591?s=128&d=identicon&r=PG&f=1", "display_name": "user11302233", "link": "https://stackoverflow.com/users/11302233/user11302233"}, "edited": false, "score": 0, "creation_date": 1554312579, "post_id": 55500745, "comment_id": 97708527, "body": "awesome thank you all!"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1554314140, "post_id": 55500745, "comment_id": 97709216, "body": "@user11302233 Can you please concentrate to ask about your main issue and narrow down your code to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that exactly reproduces the problem you&#39;re asking for. Notice that this is  a minimum effort required here."}, {"owner": {"reputation": 9, "user_id": 11302233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fdd680028a45f19947adfa382301591?s=128&d=identicon&r=PG&f=1", "display_name": "user11302233", "link": "https://stackoverflow.com/users/11302233/user11302233"}, "edited": false, "score": 0, "creation_date": 1554493180, "post_id": 55500745, "comment_id": 97787865, "body": "Okay, sorry I will make sure to not show as much code next time!"}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1554314917, "post_id": 55500834, "comment_id": 97709623, "body": "For completeness you should tack on an <code>else</code> case that shows how to clean up <code>cin</code> if there is an error."}], "tags": [], "owner": {"reputation": 499, "user_id": 10135562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RHu8H.jpg?s=128&g=1", "display_name": "Sayed Muhammad Idrees", "link": "https://stackoverflow.com/users/10135562/sayed-muhammad-idrees"}, "is_accepted": false, "score": 1, "last_activity_date": 1554312068, "creation_date": 1554312068, "answer_id": 55500834, "question_id": 55500745, "link": "https://stackoverflow.com/questions/55500745/how-do-i-check-if-an-input-is-a-number-and-if-it-is-if-it-is-between-0-and-100/55500834#55500834", "title": "How do I check if an input is a number and if it is if it is between 0 and 100?", "body": "<p>use the conditional statements when getting input from user</p>\n\n<pre><code> int i;\n cout&lt;&lt;\"Enter Value\";\n if(cin&gt;&gt;i)\n {\n     cout&lt;&lt;\"value is Integer\";\n     if(i&gt;=0 &amp;&amp; i&lt;=100)\n     cout&lt;&lt;\"value is between 0 and 100\";\n }\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 11302233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fdd680028a45f19947adfa382301591?s=128&d=identicon&r=PG&f=1", "display_name": "user11302233", "link": "https://stackoverflow.com/users/11302233/user11302233"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554313533, "creation_date": 1554311662, "last_edit_date": 1554313533, "question_id": 55500745, "link": "https://stackoverflow.com/questions/55500745/how-do-i-check-if-an-input-is-a-number-and-if-it-is-if-it-is-between-0-and-100", "title": "How do I check if an input is a number and if it is if it is between 0 and 100?", "body": "<p>I need to test if the input is a number and if so if it is between 0 and 100. If it is not then it should say LOL NOOB.</p>\n\n<p>I tried making a variable that has a list and it would see if the number is in the list and if it doesn't fit in the list it says NAN</p>\n\n<pre><code>while (title == 1) {\n    ++level;\n\n    system(\"cls\");\n    //variables\n    char p;\n    int secret, guess;\n    float NumberDetection;\n    NumberDetection = 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100;\n\n    // color\n    SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 4);\n\n    //the number that you guess!\n    srand(time(NULL));\n    secret = rand() % 100 - 0;\n\n\n    cout &lt;&lt; \"  The Legit Guessing Game!\" &lt;&lt; endl &lt;&lt; \"   The Dankest of its kind!\" &lt;&lt; endl;\n    cout &lt;&lt; \"-------------------------------------\" &lt;&lt; endl;\n    cout &lt;&lt; endl;\n    SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 6);\n    cout &lt;&lt; \"Welcome my name is Luffy Computron. your currant level is \" &lt;&lt; level &lt;&lt; endl;\n    cout &lt;&lt; \" I will randomly pick a number between 0 and 100\" &lt;&lt; endl;\n    SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 22);\n    cout &lt;&lt; \"Take a guess\" &lt;&lt; endl;\n    SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 2);\n    cout &lt;&lt; \"Guess:\";\n    cin &gt;&gt; guess;\n    if (guess == NumberDetection) {\n        while (guess != secret) {\n            if (guess &gt; secret) {\n                SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 6);\n                cout &lt;&lt; \"Too large. Try again.\" &lt;&lt; endl;\n                SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 2);\n            }\n            if (guess &lt; secret) {\n                SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 6);\n                cout &lt;&lt; \"Too small. Try again.\" &lt;&lt; endl;\n                SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 2);\n            }\n            cout &lt;&lt; \"Guess:\";\n            cin &gt;&gt; guess;\n        }\n\n        if (guess == secret) {\n            SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 6);\n            cout &lt;&lt; \"Congradulations! The number was \" &lt;&lt; secret &lt;&lt; endl;\n            if (level == 1) {\n                cout &lt;&lt; \"you are now an untrained aprentice of the computron team, \";\n                cout &lt;&lt; \"to become an aprentice play 3 more times!\";\n\n            }\n            else if (level == 2) {\n                cout &lt;&lt; \"you are now an untrained aprentice of the computron team \";\n                cout &lt;&lt; \"to become an aprentice play 2 more times!\";\n\n            }\n            else if (level == 3) {\n                cout &lt;&lt; \"you are now an untrained aprentice of the computron team \";\n                cout &lt;&lt; \"to become an aprentice play 1 more times!\";\n\n            }\n            else if (level == 4) {\n                cout &lt;&lt; \"Congradulations you Leveled up to an aprentice of the computron team! \";\n                cout &lt;&lt; \"Only 5 games left to level up to Journeyman!\";\n\n            }\n            else if (level == 9) {\n                cout &lt;&lt; \"Wow you are level 9!! that means you are a Journeyman! Congradulations!\" &lt;&lt; endl &lt;&lt; \"You have reached the top rank for now... But there is more to come!\";\n\n            }\n            else\n                cout &lt;&lt; \"you have passed my expectations! Con-drag-ulations!\";\n            cout &lt;&lt; \" Do you want to play again and better your guessing skills? \" &lt;&lt; endl;\n            SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 2);\n            cout &lt;&lt; \"[Y] Yes\";\n            SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 4);\n            cout &lt;&lt; \"[N] No\" &lt;&lt; endl;\n            cin &gt;&gt; p;\n\n            if (p == 'N' || p == 'n') {\n                title = 0;\n            }\n\n            else if (p == 'y' || p == 'Y') {\n                title = 1;\n            }\n        }\n        Sleep(30);\n        while (title == 0) {\n            SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 4);\n            cout &lt;&lt; \"/\";\n            Sleep(10);\n            system(\"cls\");\n            SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 6);\n            cout &lt;&lt; \"|\";\n            Sleep(10);\n            system(\"cls\");\n            SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 14);\n            cout &lt;&lt; \"\\\\\";\n            Sleep(10);\n            system(\"cls\");\n            SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 10);\n            cout &lt;&lt; \"--\";\n                            Sleep(10);\n            system(\"cls\");\n            return 0;\n        }\n    }\n    else { \n    cout &lt;&lt; \"THATS NOT A NUMBER !!!!!!!!!!!!!!!!!!!!!!!!!!!\";\n    Sleep(10000);\n\n    return 0;\n\n\n    }\n}\n</code></pre>\n\n<p>expected results are that it says not a number and then closes. But instead it  spams \"TOO small try again\".</p>\n"}, {"tags": ["c++", "thread-safety", "atomic", "lock-free", "memory-barriers"], "comments": [{"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 1, "creation_date": 1554311730, "post_id": 55500702, "comment_id": 97708130, "body": "I&#39;ve not looked through your code, but its worth nothing that the <code>x64</code> ISA is ridicullously strong by default. The CPU can and will cover up a lot of gaps in multithreading code. It doesn&#39;t mean your code is right, it just means it&#39;ll likely work. See <a href=\"https://preshing.com/20120930/weak-vs-strong-memory-models/\" rel=\"nofollow noreferrer\">this good article</a> from more info"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1554313002, "post_id": 55500702, "comment_id": 97708701, "body": "Yes, I found C++&#39;s memory model / rules somewhat inconvenient for implementing a SeqLock.  e.g. you want to let the compiler use efficient large stores to copy the data, without forcing it into small chunks that can be lock-free with <code>std::atomic&lt;T&gt;</code>.  That will technically create data-race UB, but is still safe on any real implementation.  See <a href=\"//stackoverflow.com/q/54611003\">Implementing 64 bit atomic counter with 32 bit atomics</a> for my attempt.  And yes, I found I needed fences."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1554328006, "post_id": 55500702, "comment_id": 97715535, "body": "@MikeVine: note that the C++ memory model is still weak.  So when testing on x86, in many cases the only danger is compile-time reordering, when StoreLoad reordering / the store buffer isn&#39;t a problem.  Like here where one thread is only storing and the other is only reading.  (x86-TSO is sequential consistency + a store buffer with store-forwarding.)"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1554505556, "post_id": 55500702, "comment_id": 97791790, "body": "@PeterCordes If you know your CPU, you can use volatile operations that you know are atomic or safe in presence of a data race (all CPU are safe in presence of a data race). In C/C++ <code>volatile</code> gives you exactly the semantics of the CPU. You can now use compiler fences to &quot;attach&quot; volatile operation so that they are done in order with non volatile operation, something that wasn&#39;t portably available before: volatiles operations like stdio were done in order WRT to each others but WRT to non volatile operations."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1554505629, "post_id": 55500702, "comment_id": 97791808, "body": "<code>memory_order_release</code> on a lock operation is patently incorrect. Of course just because some ordering is allowed by high level semantic doesn&#39;t mean it will occur, or that the compiler is only capable of performing it in a single case!"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 1, "creation_date": 1554505789, "post_id": 55500702, "comment_id": 97791844, "body": "@curiousguy: In C++, you can&#39;t do struct assignment from a <code>volatile struct foo</code> to a <code>struct foo tmp</code>.  So you can&#39;t just ask your compiler to efficiently copy an arbitrary type for you, unfortunately, if it&#39;s volatile.  In C you can."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1554506728, "post_id": 55500702, "comment_id": 97792004, "body": "@curiousguy: A SeqLock only works on its own for a single writer, so release order is correct.  It&#39;s not a real &quot;lock&quot;, it&#39;s a way for a writer to publish a value to multiple lock-free readers.  (And when the value isn&#39;t in the middle of being modified, the readers are wait-free).  If you have multiple writers, they need to use a mutex or something to get exclusive write access to the SeqLock."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1554506758, "post_id": 55500702, "comment_id": 97792008, "body": "@PeterCordes I understand that only one writer is allowed here."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1554506864, "post_id": 55500702, "comment_id": 97792029, "body": "The silly part of this lock is forcing the writer to re-read the atomic sequence number, instead of just storing <code>seq+1</code> and <code>seq+2</code> from one read.  (&quot;lock&quot; should return the sequence number to be passed to &quot;unlock&quot;.)"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1554507022, "post_id": 55500702, "comment_id": 97792053, "body": "@curiousguy: oh, I see what you&#39;re saying.  Yes, you need an <code>atomic_thread_fence(std::memory_order_release)</code> in the <code>lock</code> function, after storing <code>seq+1</code>.  Otherwise the release-store can reorder with the non-atomic stores in the &quot;critical section&quot;.  My implementation in <a href=\"//stackoverflow.com/q/54611003\">Implementing 64 bit atomic counter with 32 bit atomics</a> does that."}], "owner": {"reputation": 833, "user_id": 3812403, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/0963dc953188cca0374d4fa3436748ab?s=128&d=identicon&r=PG&f=1", "display_name": "ByteMe95", "link": "https://stackoverflow.com/users/3812403/byteme95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1554344279, "creation_date": 1554311474, "last_edit_date": 1554344279, "question_id": 55500702, "link": "https://stackoverflow.com/questions/55500702/atomic-thread-fence-requirement-in-a-sequence-lock", "title": "atomic_thread_fence requirement in a sequence lock", "body": "<p>I'm writing a simple <a href=\"https://en.wikipedia.org/wiki/Seqlock\" rel=\"nofollow noreferrer\">sequence lock </a> and after reading through the c++ docs on atomics and atomic_thread_fence, it feels like I should need a fence.  However, Ive written it without a fence and I have a fairly rigorous test that seems to pass without it.</p>\n\n<p>The basic sequence lock concept goes like this.  You have a single writer that constantly updates some piece of shared memory in place.  It associates an incrementing sequence number with the data.  Before it starts writing it increments once, when its done writing it increments again.</p>\n\n<p>On the reader end, before it starts looking at the data it waits for the sequence number to turn even ( if its odd that means we are mid-write ).  It then keeps track of the sequence number it sees at the start, copies out the data locally, then checks the sequence number again when its done.  If they match, then the data is clean and usable.  If they dont match, then we are susceptible to a partial-read and we try again.</p>\n\n<p>The sequencer number is stored in an std::atomic.  The writer updates it with a store( std::memory_order_release ) at the beginning and end of the block.\nThe reader reads the sequence number with a load( std::memory_order_acquire ) at the beginning and end of the read.</p>\n\n<p>The data in question to be copied form writer -> reader is completely independent of the atomic seqno, which is why I was under the impression I may need a fence here to synchronize the dependency-less data... but it seems to work no matter what I throw at it.\nI am running on a multi-socket / multi-core Intel Xeon machine, maybe it works specifically on this CPU?</p>\n\n<p>Code snippets:</p>\n\n<pre><code>void SequenceLock::writeLock()\n{\n    m_seqno.store( m_seqno.load( std::memory_order_relaxed ) + 1, std::memory_order_release );\n}\n\nvoid SequenceLock::writeUnlock()\n{\n    m_seqno.store( m_seqno.load( std::memory_order_relaxed ) + 1, std::memory_order_release );\n}\n\nuint64_t SequenceLock::enterRead() const\n{\n    uint64_t seqno;\n    while( ( seqno = m_seqno.load( std::memory_order_acquire ) ) &amp; 1 ) {} //no yield, expect readers to be pinned\n    return seqno;\n}\n\nbool SequenceLock::validateRead( uint64_t prevSeqno ) const\n{\n    return m_seqno.load( std::memory_order_acquire ) == prevSeqno;\n}\n\n\n//sample writer\nlock.writeLock()\n//update some shared data\nlock.writeUnlock()\n\n//sample reader\nuint64_t seqno;\ndo {\n    seqno = lock.enterRead()\n    //copy shared data locally\n} while( !lock.validateRead( seqno ) )\n</code></pre>\n\n<p>EDIT: Stranger still, I changed all the memory accessed above to memory_order_relaxed and it <em>still</em> seemed to work... odd</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 2168, "user_id": 10005592, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tw8_hRzXCT8/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq244BuID1nKg_D8eCRDXVVZgv4eBg/mo/photo.jpg?sz=128", "display_name": "Stephen Meschke", "link": "https://stackoverflow.com/users/10005592/stephen-meschke"}, "edited": false, "score": 1, "creation_date": 1554315014, "post_id": 55500666, "comment_id": 97709665, "body": "Can you use a grid of circles instead? I have found that cv.findCirclesGrid() is much more robust than cv.findChessboardCorners()."}, {"owner": {"reputation": 11, "user_id": 10783340, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211979960086873/picture?type=large", "display_name": "Hughes Chen", "link": "https://stackoverflow.com/users/10783340/hughes-chen"}, "reply_to_user": {"reputation": 2168, "user_id": 10005592, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tw8_hRzXCT8/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq244BuID1nKg_D8eCRDXVVZgv4eBg/mo/photo.jpg?sz=128", "display_name": "Stephen Meschke", "link": "https://stackoverflow.com/users/10005592/stephen-meschke"}, "edited": false, "score": 0, "creation_date": 1554389898, "post_id": 55500666, "comment_id": 97742841, "body": "Thanks for the suggestion. I currently have a very robust large format chessboard to get sub-millimeter accuracy. I would have used circle board if I have the equivalent hardware."}], "owner": {"reputation": 11, "user_id": 10783340, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211979960086873/picture?type=large", "display_name": "Hughes Chen", "link": "https://stackoverflow.com/users/10783340/hughes-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554326990, "creation_date": 1554311337, "last_edit_date": 1554326990, "question_id": 55500666, "link": "https://stackoverflow.com/questions/55500666/findchessboardcorners-failed-to-detect-corners-in-back-lighting-condition", "title": "findChessboardCorners() failed to detect corners in back lighting condition", "body": "<p>I have a chessboard pattern placed on a window, and I am capturing image against the light - shooting from indoor to outdoor. The OpenCV <code>findChessboardCorners()</code> command failed to detect the chessboard.</p>\n\n<p>First, I tried to capture image in controlled environment, and the command detect chessboard pattern just fine.</p>\n\n<p>Second, I tried to use flags: <code>CALIB_CB_NORMALIZE_IMAGE</code> and <code>CALIB_CB_ADAPTIVE_THRESH</code>. Both flags didn't work in my case.</p>\n\n<p>Then I tried using equalizing histogram, still it won't work.</p>\n\n<p>I was hoping to find a way to tune the <code>findChessboardCorners()</code> to detect chessboard patterns in various environment conditions. Currently it wouldn't detect in back lighting condition.</p>\n\n<p>Any suggestion would be helpful!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1554311135, "post_id": 55500535, "comment_id": 97707835, "body": "The code is valid starting from C++17, because C++17 has &quot;guaranteed copy elision&quot;. I.e. the compiler is required to be smart enough to detect that <code>MyClass c2 = MyClass(200.0);</code> is not really different from <code>MyClass c2(200.0);</code> and create the object directly without copying, and thus a copy constructor is not needed."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1554311347, "post_id": 55500535, "comment_id": 97707944, "body": "<i>&quot;Why is Version 1 preferable to Version 2?&quot;</i> In C++17 some people prefer it because it&#39;s shorter. Prior to C++17 version 2 seems to require a copy/move constructor even if it&#39;s optimized away (which is what any decent compiler should do), so that&#39;s another reason to not use it."}], "owner": {"reputation": 2785, "user_id": 236835, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/39004ab08c3113f5fdae6e70fbd0330e?s=128&d=identicon&r=PG", "display_name": "Marten Bauer", "link": "https://stackoverflow.com/users/236835/marten-bauer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "closed_date": 1554311045, "answer_count": 0, "score": 0, "last_activity_date": 1554310893, "creation_date": 1554310893, "question_id": 55500535, "link": "https://stackoverflow.com/questions/55500535/set-variable-of-class-instance", "closed_reason": "Duplicate", "title": "Set variable of class instance", "body": "<p>I have the following class as an example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass MyClass {\n private:\n  double value{0};\n\n public:  \n  explicit MyClass(double value) : value(value){};\n\n  MyClass(const MyClass&amp;) = delete;\n  MyClass(MyClass&amp;&amp;) = delete;\n  MyClass&amp; operator=(MyClass&amp;&amp;) = delete;\n\n  double getValue(){return value;}\n};\n\nint main(void){\n    MyClass c1(100.0);               // Version 1\n    MyClass c2 = MyClass(200.0);     // Version 2\n\n    std::cout &lt;&lt; c1.getValue() &lt;&lt; std::endl;\n    std::cout &lt;&lt; c2.getValue() &lt;&lt; std::endl;\n\n}\n</code></pre>\n\n<p>I've learned that <code>// Version 1</code> of <code>// Version 2</code> is preferable because <code>// Version 2</code> calls the copy constructor.</p>\n\n<p>That's why I deleted the copy constructor and still <code>// Version 2</code> works. Thus, no copy constructor is called.</p>\n\n<p>Which operator of MyClass is called by <code>// Version 2</code>?</p>\n\n<p>Why is <code>// Version 1</code> preferable to <code>// Version 2</code>?</p>\n"}, {"tags": ["c++", "visual-studio", "visual-c++", "code-coverage"], "answers": [{"comments": [{"owner": {"reputation": 1191, "user_id": 2183035, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/723bb822183d1826819818d831a822ee?s=128&d=identicon&r=PG", "display_name": "jws", "link": "https://stackoverflow.com/users/2183035/jws"}, "edited": false, "score": 1, "creation_date": 1569352841, "post_id": 55760227, "comment_id": 102567470, "body": "CPPCoverage depends on Visual Studio 2015 shell unfortunately (Microsoft.VisualStudio.Shell.15.0). OpenCppCoverage is working for me. <a href=\"https://marketplace.visualstudio.com/items?itemName=OpenCppCoverage.OpenCppCoveragePlugin\" rel=\"nofollow noreferrer\">marketplace.visualstudio.com/&hellip;</a>"}], "tags": [], "owner": {"reputation": 4382, "user_id": 3205529, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/edAtA.jpg?s=128&g=1", "display_name": "Malick", "link": "https://stackoverflow.com/users/3205529/malick"}, "is_accepted": true, "score": 2, "last_activity_date": 1555668744, "creation_date": 1555668744, "answer_id": 55760227, "question_id": 55500279, "link": "https://stackoverflow.com/questions/55500279/code-coverage-for-visual-studio-2017-community-with-c/55760227#55760227", "title": "Code Coverage for Visual Studio 2017 Community with C++", "body": "<p>I recently tested <a href=\"https://github.com/atlaste/CPPCoverage\" rel=\"nofollow noreferrer\">CPPCoverage</a>, an open source and free extension that works perfectly to perform code coverage of native Visual C++ unit tests. </p>\n\n<p>It is a visual extension (VSIX) and provide details reports. Once installed, Right-click in solution explorer on the test or application project and click \"Run code coverage\".</p>\n"}], "owner": {"reputation": 115, "user_id": 9362206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71b8db708c835f4394e563b3bf42a28?s=128&d=identicon&r=PG&f=1", "display_name": "Sandro4912", "link": "https://stackoverflow.com/users/9362206/sandro4912"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1529, "favorite_count": 0, "accepted_answer_id": 55760227, "answer_count": 1, "score": 4, "last_activity_date": 1555668744, "creation_date": 1554309902, "last_edit_date": 1554311156, "question_id": 55500279, "link": "https://stackoverflow.com/questions/55500279/code-coverage-for-visual-studio-2017-community-with-c", "title": "Code Coverage for Visual Studio 2017 Community with C++", "body": "<p>Are there any plugins for visual studio 2017 which enable to calculate unit test code coverage with C++?</p>\n\n<p>I only found \nOpenCppCoverage:\n<a href=\"https://marketplace.visualstudio.com/items?itemName=OpenCppCoverage.OpenCppCoveragePlugin\" rel=\"nofollow noreferrer\">https://marketplace.visualstudio.com/items?itemName=OpenCppCoverage.OpenCppCoveragePlugin</a></p>\n\n<p>but it seems to be outdated / not working.</p>\n\n<p>Other than that it seems like there are only Code coverage plugins for .Net-Languages but not C++</p>\n\n<p>Are there any other options (besides upgrading to MSVC Enterprise)</p>\n"}, {"tags": ["c++", "c++11", "smart-pointers"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1554309633, "post_id": 55500183, "comment_id": 97707048, "body": "Note: Qt has <code>QPointer</code> which becomes <code>nullptr</code> when the pointed-to <code>QObject</code> is destroyed."}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 7, "creation_date": 1554309831, "post_id": 55500183, "comment_id": 97707162, "body": "If you&#39;re already changing your code to use a certain kind of pointer wrapper, then why not just change it to properly use proper smart pointers?"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 2, "creation_date": 1554309861, "post_id": 55500183, "comment_id": 97707180, "body": "This is not thread safe. Despite your use of shared pointer, one thread could be using the pointer while the other deletes it. Only once it has been deleted will a thread be told &quot;no it doesnt exist anymore&quot;. Theres a window for UB here AFAICT."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1554309875, "post_id": 55500183, "comment_id": 97707189, "body": "You want raw pointers and not pass shared pointers around when it&#39;s not useful. The concept of weak raw pointer is moot if your design memory repsonsibility properly."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1554309899, "post_id": 55500183, "comment_id": 97707204, "body": "I&#39;m curious on why you would want this.  You basically have a raw pointer.  Can you show an example of what you want to do?  <code>unique_ptr</code>, <code>shared_ptr</code> and <code>weak_ptr</code> pretty much take care of all of the ownership mechanics you would need."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1554309900, "post_id": 55500183, "comment_id": 97707205, "body": "Wait - you have a a smart pointer - that wraps a smart pointer and a raw pointer?  This seems a little wasteful"}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1554311490, "post_id": 55500183, "comment_id": 97708007, "body": "Your <code>operator=</code> calls itself recursively and will enter an infinite loop. Additionally, your design still seems to require lots of manual bookkeeping and safety checks. <code>WatchedPtr</code> appears to both own and not own the managed object, which will make it very difficult to use correctly. When should <code>WatchedPtr</code> free the managed object? If you rely on the user to manually free the resource using <code>del()</code>, then this simply isn&#39;t useful. Just use a <code>shared_ptr</code> and <code>weak_ptr</code>s until you have a really good reason not to."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1554311918, "post_id": 55500183, "comment_id": 97708216, "body": "Raw pointer use should ideally be reserved for &quot;non-owning, observing only pointers&quot;. At least that&#39;s whay <i>I</i> try to enforce."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1554312156, "post_id": 55500183, "comment_id": 97708335, "body": "An important safety feature of <code>std::weak_ptr</code> is that you lock it before using it, producing a <code>std::shared_ptr</code> for as long as you need to use the referred object. With your solution it&#39;s not possible to prevent the destruction of the pointed-to object. Even if that isn&#39;t a concern, it seems like you&#39;re implementing a half-measure. You&#39;re keeping raw owning pointers and implementing some of the nice things about <code>std::shared_ptr</code>. It doesn&#39;t solve the fundamental problem that you are still using raw owning pointers. The change doesn&#39;t do much to leave the code base better than you found it."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1554312957, "post_id": 55500183, "comment_id": 97708679, "body": "Putting aside your implementation of <code>WatchedPtr</code>, it seems your primary concern is about having predictable lifetimes of objects and avoiding spaghetti code. To this end, you should simply use the following tools, in order of preference. 1) By default, use automatic storage, i.e local or member objects, by value. This should work for nearly everything you do and is essentially foolproof. 2) If not, use a <code>unique_ptr</code> if you need indirection, i.e. for lightweight move semantics or for polymorphism. 3) If not, use a <code>shared_ptr</code> when there is no single correct place to store a shared object"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1554315867, "post_id": 55500183, "comment_id": 97710089, "body": "You should read the <a href=\"http://gchandbook.org/\" rel=\"nofollow noreferrer\">GC handbook</a>. Even if C++ don&#39;t have any garbage collection (unless you consider reference counting as a GC technique) the terminology and the concepts related to GC are relevant. In practice, liveness of data is a <i>whole program</i> property"}], "answers": [{"comments": [{"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1554311259, "post_id": 55500317, "comment_id": 97707896, "body": "That depends. One of the things I dislike about the <code>shared_ptr</code> infrastructure is that they are thread safe by default (with no way to opt out of it). This means any ref count needs to go through a atomic like class which introduces barriers/other mechanisms which have a reasonable cost, espeically on <i>non</i> x86/x64 architectures. So something in the middle is possible (and useful in speicalised circumstances)"}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "reply_to_user": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1554311790, "post_id": 55500317, "comment_id": 97708162, "body": "@MikeVine But when is this really a problem. How often do you change or transfer ownership? Typically this only happens if you pass an object from one thread to another (so a the beginning and end of a task). The cases where you need to acquire temporary ownership should also be rare if designed correctly. For most situations, your code should be designed in a way that if a function accepts an object as a parameter, that this function does not require ownership, and as of that passing the managed raw pointer has to be sufficient."}], "tags": [], "owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "is_accepted": false, "score": 5, "last_activity_date": 1554310103, "creation_date": 1554310103, "answer_id": 55500317, "question_id": 55500183, "link": "https://stackoverflow.com/questions/55500183/why-is-there-no-weak-pointer-for-raw-pointer-or-is-there/55500317#55500317", "title": "Why is there no &quot;weak pointer&quot; for raw pointer? Or is there?", "body": "<p>Weak pointers rely on notifications from the smart pointer infrastructure, so you could never do this with actual raw pointers.</p>\n\n<p>One could imagine an extension of, say, <code>unique_ptr</code> which supported weak pointers, certainly. Presumably the main reason that nobody rushed in to implement such a feature is that weak pointers are already at the \"Use refcounting and everything should just work\" end of the scale, while <code>unique_ptr</code> is at the \"Manage your lifetimes through RAII or you're not a <em>real</em> C++ programmer\" end of the scale. Weak pointers also require there to be a separate control block per allocation, meaning that the performance advantage of such a <code>WatchedPtr</code> would be minimal compared to <code>shared_ptr</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": 2, "last_activity_date": 1554316594, "last_edit_date": 1554316594, "creation_date": 1554315616, "answer_id": 55501783, "question_id": 55500183, "link": "https://stackoverflow.com/questions/55500183/why-is-there-no-weak-pointer-for-raw-pointer-or-is-there/55501783#55501783", "title": "Why is there no &quot;weak pointer&quot; for raw pointer? Or is there?", "body": "<blockquote>\n  <p>I think there is a big risk in using shared pointers. Mainly, you will loose control of the real life-cycle of pointers to objects that hold raw pointers, and bugs will occur in locations which are more difficult to find and debug.</p>\n</blockquote>\n\n<p>Then you say</p>\n\n<blockquote>\n  <p>just a pointer which becomes NULL when deleted in any part of the program.</p>\n</blockquote>\n\n<p>Don't you see the contradiction?</p>\n\n<p>You don't want to use shared pointer because the lifetime of objects are determined at runtime. So far so good.</p>\n\n<p>However, you want a pointer that automatically becomes null when the owner deletes it. The problem is if the lifetime of your pointer is known, you should not need that at all! If you know when the lifetime of your pointer ends, then you should be able to remove all instances of that pointer, a have a mean to check if the pointer is dead.</p>\n\n<p>If you have a pointer that you don't know when the owner will free it and have no way to check or no observable side effect for the point of view of the weak owner, then do you really have control over lifetime of your pointer? Not really.</p>\n\n<p>In fact, your implementation rely on containing a shared pointer. This is enlightening in the sense that you need some form of shared ownership in order to implement a raw pointer that can have weak pointer to it. Then if you need shared ownership to implement a raw pointer with weak references, you are left with a shared pointer. That's why the existence of your proposed class is contradictory.</p>\n\n<p><code>std::shared_ptr</code> + <code>std::weak_ptr</code> is made to deal with the issue of \"parts of your program don't know when the owner free the resouce\". What you need is a single <code>std::shared_ptr</code> and multiple <code>std::weak_ptr</code>, so they know when the resource is freed. These classes have the infomation needed to check the lifetime of a variable at runtime.</p>\n\n<p>Or if in the contrary you know the lifetime of your pointers, then use that knowledge and find a way to remove dangling pointers, or expose a way to check for dangling pointers.</p>\n"}, {"tags": [], "owner": {"reputation": 169, "user_id": 5860352, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153944390471450/picture?type=large", "display_name": "Doron Ben-Ari", "link": "https://stackoverflow.com/users/5860352/doron-ben-ari"}, "is_accepted": true, "score": 0, "last_activity_date": 1557605068, "creation_date": 1557605068, "answer_id": 56093857, "question_id": 55500183, "link": "https://stackoverflow.com/questions/55500183/why-is-there-no-weak-pointer-for-raw-pointer-or-is-there/56093857#56093857", "title": "Why is there no &quot;weak pointer&quot; for raw pointer? Or is there?", "body": "<p>Reading the answers and comments, along with <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#S-resource\" rel=\"nofollow noreferrer\">C++ Core Guidelines by Bjarne Stroustrup &amp; Herb Sutter</a>, I have come to the following answer:<br>\nWhen following the guidelines, there is no need for a \"WatchedPtr\" which involves \"new\" and \"delete\". However, a way to track the validity of a raw pointer taken from a smart pointer, is still in question for me, for debug/QA purposes.</p>\n\n<p>In details:</p>\n\n<p>Raw pointers should continue to be used. For various reasons. However, explicit \"new\" and \"delete\" should not. The cases of calling \"new\" and \"delete\" should all be replaced by shared_ptr/unique_ptr.<br>\nAt the place where a raw pointer is currently allocated, there is no point in replacing it by \"WatchedPtr\".<br>\nIf replacing a raw pointer to something else where it is allocated, it will be in most cases to unique_ptr, and on the other cases to shared_ptr. The \"WatchedPtr\", if at all, will continue from that point, built from the shared/unique pointer. </p>\n\n<p>Therefor I have <a href=\"https://stackoverflow.com/questions/56093808/a-way-to-track-the-validity-of-a-raw-pointer-taken-from-a-smart-pointer-for-debu\">posted a somewhat different question</a>.</p>\n"}], "owner": {"reputation": 169, "user_id": 5860352, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153944390471450/picture?type=large", "display_name": "Doron Ben-Ari", "link": "https://stackoverflow.com/users/5860352/doron-ben-ari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 56093857, "answer_count": 3, "score": 0, "last_activity_date": 1557605068, "creation_date": 1554309517, "last_edit_date": 1554654986, "question_id": 55500183, "link": "https://stackoverflow.com/questions/55500183/why-is-there-no-weak-pointer-for-raw-pointer-or-is-there", "title": "Why is there no &quot;weak pointer&quot; for raw pointer? Or is there?", "body": "<p>Shared pointers are good idea, no doubt. But as long as a large scale program includes raw pointers, I think there is a big risk in using shared pointers. Mainly, you will loose control of the real life-cycle of pointers to objects that hold raw pointers, and bugs will occur in locations which are more difficult to find and debug.</p>\n\n<p>So my question is, was there no attempt to add to modern c++ a \"weak pointer\" which does not depend on using shared pointers? I mean just a pointer which becomes NULL when deleted in any part of the program. Is there a reason not to use such a self-made wrapper?</p>\n\n<p>To better explain what I mean, the following is such a \"weak pointer\" that I made. I named it WatchedPtr.</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;typename T&gt;\nclass WatchedPtr {\npublic:\n    // the only way to allocate new pointer\n    template &lt;typename... ARGS&gt;\n    WatchedPtr(ARGS... args) : _ptr (new T(args...)), _allocated (std::make_shared&lt;bool&gt;(true)) {}\n\n    WatchedPtr(const WatchedPtr&lt;T&gt;&amp; other) : _ptr (other._ptr), _allocated (other._allocated) {}\n\n    // delete the pointer\n    void del () {delete _ptr; *_allocated = false;}\n\n    auto&amp; operator=(const WatchedPtr&lt;T&gt; &amp;other) { return *this = other; }\n\n    bool isNull() const { return *_allocated; }\n\n    T* operator-&gt;() const { return _ptr; }\n\n    T&amp; operator*() const { return *_ptr; }\n\nprivate:\n    T* _ptr;\n    std::shared_ptr &lt;bool&gt; _allocated;\n};\n\nstruct S {\n    int a = 1;\n};\n\nint main () {\n    WatchedPtr&lt;S&gt; p1;\n    WatchedPtr&lt;S&gt; p2(p1);\n    p1-&gt;a = 8;\n    std::cout &lt;&lt; p1.isNull () &lt;&lt; std::endl;\n    std::cout &lt;&lt; p2.isNull () &lt;&lt; std::endl;\n    p2.del ();\n    std::cout &lt;&lt; p1.isNull () &lt;&lt; std::endl;\n    std::cout &lt;&lt; p1.isNull () &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>1\n1\n0\n0\n</code></pre>\n\n<p><strong>-Edited-</strong></p>\n\n<p>Thank you all. Some clarifications following the comments and answers so far:</p>\n\n<ul>\n<li>The implementation I presented for WatchedPtr is merely to demonstrate what I mean: a pointer that does not get the copy from external allocation, cannot be deleted externally, and becomes null if it is deleted. The implementation is knowingly far from perfect and was not meant to be perfect.</li>\n<li>Problem with mix of shared_ptr and raw pointers is very common: A* is held as raw pointer, thus created at some point of the program and explicitly deleted at some point of the program. B holds a A*, and B* is held as shared_ptr, thus B* has vague lifespan. Thus B may live long after the deletion of A* that B holds.</li>\n<li>The main usage of \"WatchedPtr\" in my mind is defensive programing. i.e. check for null and do the best thing possible for continuity (and a debug error). shared_ptr can do it, but in a very dangerous way - it will hide and delay the problem.</li>\n<li>There can also be a design usage for \"WatchedPtr\" (very few and explicit \"owners\"), but this is not the main idea. For that indeed shared pointers are doing the job.</li>\n<li>The intention of \"WatchedPtr\" is not for replacing all existing raw pointers in the program at once. It is not the same effort as replacing to shared_ptr, which IMHO has be done for the whole program at once. Which is unrealistic for large scale programs.</li>\n</ul>\n"}, {"tags": ["android", "c++", "android-ndk"], "answers": [{"comments": [{"owner": {"reputation": 1427, "user_id": 870135, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c38999ade29a05b0750a21bf2ec4f33d?s=128&d=identicon&r=PG", "display_name": "CCJ", "link": "https://stackoverflow.com/users/870135/ccj"}, "edited": false, "score": 0, "creation_date": 1558725472, "post_id": 56229329, "comment_id": 99209156, "body": "I suspected as much; it&#39;s too bad there&#39;s not better support for this use case."}], "tags": [], "owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "is_accepted": true, "score": 1, "last_activity_date": 1558394539, "creation_date": 1558394539, "answer_id": 56229329, "question_id": 55500104, "link": "https://stackoverflow.com/questions/55500104/how-can-i-build-local-host-os-c-unit-tests-in-android-studio/56229329#56229329", "title": "How can I build local/host OS C++ unit tests in Android Studio?", "body": "<p>Android Studio does not support host development.</p>\n\n<p>If you want to build your tests against your host and run them there, you'll have to invoke CMake from outside Android Studio (command line would be an option, as would Visual Studio).</p>\n"}], "owner": {"reputation": 1427, "user_id": 870135, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c38999ade29a05b0750a21bf2ec4f33d?s=128&d=identicon&r=PG", "display_name": "CCJ", "link": "https://stackoverflow.com/users/870135/ccj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 653, "favorite_count": 0, "accepted_answer_id": 56229329, "answer_count": 1, "score": 1, "last_activity_date": 1558394539, "creation_date": 1554309212, "last_edit_date": 1554369316, "question_id": 55500104, "link": "https://stackoverflow.com/questions/55500104/how-can-i-build-local-host-os-c-unit-tests-in-android-studio", "title": "How can I build local/host OS C++ unit tests in Android Studio?", "body": "<p>I'm working on a large project with many native modules and I'd like to introduce unit tests of the C++ code that are as simple/fast to run as Java JUnit local (i.e. running on the host OS, not instrumented) tests.</p>\n\n<p>I've followed the <a href=\"https://github.com/google/googletest/blob/master/googletest/README.md\" rel=\"nofollow noreferrer\">official instructions</a> for setting up gtest, but running my external native build results in a linker error:</p>\n\n<pre><code>&gt; Task :app:externalNativeBuildDebug FAILED\nBuild GoogleTests x86_64\n[1/2] Building CXX object CMakeFiles/GoogleTests.dir/googletest_unittests/shared/TautologyTe\nsts.cpp.o\n\n[2/2] Linking CXX executable GoogleTests\nFAILED: cmd.exe /C \"cd . &amp;&amp; C:\\Users\\Jeffrey.Creswell\\AppData\\Local\\Android\\Sdk\\ndk-bundle\\toolchains\\llvm\\prebuilt\\windows-x86_64\\bin\\clang++.exe  --target=x86_64-none-linux-android21 --gcc-toolchain=C:/Users/Jeffrey.Creswell/AppData/Local/Android/Sdk/ndk-bundle/toolchains/llvm/prebuilt/windows-x86_64 --sysroot=C:/Users/Jeffrey.Creswell/AppData/Local/Android/Sdk/ndk-bundle/toolchains/llvm/prebuilt/windows-x86_64/sysroot  -g -DANDROID -fdata-sections -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -fno-addrsig -Wa,--noexecstack -Wformat -Werror=format-security -stdlib=libc++ -std=c++14 -O0 -fno-limit-debug-info  -Wl,--exclude-libs,libgcc.a -Wl,--exclude-libs,libatomic.a -static-libstdc++ -Wl,--build-id -Wl,--warn-shared-textrel -Wl,--fatal-warnings -Wl,--no-undefined -Qunused-arguments -Wl,-z,noexecstack -Wl,-z,relro -Wl,-z,now -Wl,--gc-sections CMakeFiles/GoogleTests.dir/googletest_unittests/shared/TautologyTests.cpp.o CMakeFiles/GoogleTests.dir/googletest_unittests/Tautology.cpp.o  -o GoogleTests  C:/Users/Jeffrey.Creswell/androidstudio_projects/NativeAndroidSandbox/app/src/main/cpp/googletest_unittests/libs/windows/x86_64/gtestd.lib -latomic -lm &amp;&amp; cd .\"\nC:\\Users\\Jeffrey.Creswell\\androidstudio_projects\\NativeAndroidSandbox\\app\\src\\main\\cpp\\googletest_unittests\\shared/TautologyTests.cpp:19: error: undefined reference to 'testing::internal::GetTestTypeId()'\nC:\\Users\\Jeffrey.Creswell\\androidstudio_projects\\NativeAndroidSandbox\\app\\src\\main\\cpp\\googletest_unittests\\shared/TautologyTests.cpp:19: error: undefined reference to 'testing::internal::MakeAndRegisterTestInfo(char const*, char const*, char const*, char const*, testing::internal::CodeLocation, void const*, void (*)(), void (*)(), testing::internal::TestFactoryBase*)'\n...\n</code></pre>\n\n<p>I built gtestd.lib in Visual Studio and referenced it as a prebuilt in CMakeLists.txt to try to simplify the equation somewhat:</p>\n\n<pre><code># For more information about using CMake with Android Studio, read the\n# documentation: https://d.android.com/studio/projects/add-native-code.html\n\n# Sets the minimum version of CMake required to build the native library.\n\ncmake_minimum_required(VERSION 3.4.1)\n\n# Creates and names a library, sets it as either STATIC\n# or SHARED, and provides the relative paths to its source code.\n# You can define multiple libraries, and CMake builds them for you.\n# Gradle automatically packages shared libraries with your APK.\n\nadd_library( # Sets the name of the library.\n        native-lib\n\n        # Sets the library as a shared library.\n        SHARED\n\n        # Provides a relative path to your source file(s).\n        native-lib.cpp)\n\nset(gtest_INC googletest_unittests/include)\ninclude_directories(${gtest_INC})\nadd_library(gtest STATIC IMPORTED)\nset_property(TARGET gtest PROPERTY IMPORTED_LOCATION ${CMAKE_CURRENT_SOURCE_DIR}/googletest_unittests/libs/windows/x86_64/gtestd.lib)\nadd_executable(GoogleTests\n        ${CMAKE_CURRENT_SOURCE_DIR}/googletest_unittests/shared/TautologyTests.cpp\n        ${CMAKE_CURRENT_SOURCE_DIR}/googletest_unittests/Tautology.cpp)\ntarget_link_libraries(GoogleTests gtest)\n# todo: insert add_test() cmake commands once the linker error above is resolved\n\n# Searches for a specified prebuilt library and stores the path as a\n# variable. Because CMake includes system libraries in the search path by\n# default, you only need to specify the name of the public NDK library\n# you want to add. CMake verifies that the library exists before\n# completing its build.\n\nfind_library( # Sets the name of the path variable.\n        log-lib\n\n        # Specifies the name of the NDK library that\n        # you want CMake to locate.\n        log)\n\n# Specifies libraries CMake should link to your target library. You\n# can link multiple libraries, such as libraries you define in this\n# build script, prebuilt third-party libraries, or system libraries.\n\ntarget_link_libraries( # Specifies the target library.\n        native-lib\n\n        # Links the target library to the log library\n        # included in the NDK.\n        ${log-lib})\n</code></pre>\n\n<p>I think the main problem is the argument <code>\"--target=x86_64-none-linux-android21\"</code> to <code>clang++.exe</code>; it implies compilation of the test executable for Android/Linux, when what I really want is to compile for the host OS (Windows 10).  I don't know if this could produce the linker error I'm seeing, but attempting to link a Linux executable to a Windows static library seems like it would fail similarly.  How can I tell the Android NDK's clang++ to target the host OS (ideally by modifications to my <code>CMakeLists.txt</code>)?  Assuming that's not the problem, is there a known way to get a local (running on host OS) C++ unit test scenario working within Android Studio?</p>\n\n<p>NOTE: I looked at a <a href=\"https://stackoverflow.com/questions/46429958/android-ndk-with-google-test\">similar question</a> and the accepted answer appears to work, but generates an Android executable -- I would prefer a situation where I can ideally just hit the green arrow in Android Studio and have my C++ unit tests run automatically on the local machine.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1554309193, "post_id": 55500028, "comment_id": 97706851, "body": "If you notice in your first code in each iteration you are creating a new QTextStream. Move <code>QTextStream stream(&amp;file);</code> before <code>while(true)</code>"}, {"owner": {"reputation": 31, "user_id": 6221876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2621cc90e571440cd0a082a329bc7df?s=128&d=identicon&r=PG&f=1", "display_name": "Jakubek K.", "link": "https://stackoverflow.com/users/6221876/jakubek-k"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1554309709, "post_id": 55500028, "comment_id": 97707093, "body": "Well I already know the reason why my code didn&#39;t work. I am just curious about the reason why so and wanted to share this problem so people who might have a similar issue will find an answer."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1554309970, "post_id": 55500028, "comment_id": 97707232, "body": "Then you must publish only one question and one response at the beginning, that is allowed in SO: <a href=\"https://stackoverflow.com/help/self-answer\">stackoverflow.com/help/self-answer</a>. If it&#39;s just a question, I&#39;ll probably erase it. Generally, when you provide a question + answer, it must be interesting. IMHO your question is not, since it is a trivial error. You say: <i>will find an answer</i>, but since there is no answer in the SO nobody can find it"}, {"owner": {"reputation": 31, "user_id": 6221876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2621cc90e571440cd0a082a329bc7df?s=128&d=identicon&r=PG&f=1", "display_name": "Jakubek K.", "link": "https://stackoverflow.com/users/6221876/jakubek-k"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1554311138, "post_id": 55500028, "comment_id": 97707836, "body": "Okay I will provide the answer and edit the question"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 6221876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2621cc90e571440cd0a082a329bc7df?s=128&d=identicon&r=PG&f=1", "display_name": "Jakubek K.", "link": "https://stackoverflow.com/users/6221876/jakubek-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1554313395, "last_edit_date": 1554313395, "creation_date": 1554312464, "answer_id": 55500954, "question_id": 55500028, "link": "https://stackoverflow.com/questions/55500028/constructing-qtextstream-in-a-loop-causes-file-to-incorrectly-read-data/55500954#55500954", "title": "Constructing QTextStream in a loop causes file to incorrectly read data", "body": "<p><strong>Repeated constructing</strong> of <code>QTextStream</code> due to reasons answered by @MatteoItalia <strong>causes this error.</strong></p>\n\n<p>The fixed code looks like this:</p>\n\n<pre><code>QFile file;\nQString line;\nint interationCount = 0;\n\nfile.setFileName(fileName);\n\nif(file.open(QIODevice::ReadOnly | QIODevice::Text))\n{\n    QTextStream stream(&amp;file);\n    while(stream.readLineInto(&amp;line))\n    {\n        std::count &lt;&lt; \"Line \"&lt;&lt; interationCount &lt;&lt; \": \" &lt;&lt; line &lt;&lt; \"\\n\";\n        interationCount++;\n    }\n}\n</code></pre>\n\n<p>And produces the expected output: </p>\n\n<pre><code>Line 0: 1\nLine 1: 2\nLine 2: 3\n...\nLine 34: 35\n</code></pre>\n\n<p><strong>Additional Info</strong></p>\n\n<p>This error might seem obvious. Of curse repeatedly constructing object inside a loop is a bad practice (both performance wise and because errors like this), but in certain architectures this might not be as obvious. </p>\n\n<p>Consider the following architecture:\nparent class called <code>FileFormat_Parrent</code> with virtual functions for reading single line of a file that must be overloaded, which could be using a <code>QTextStream</code> to do so.</p>\n\n<pre><code>class FileFormat_Parrent\n{\n   public:\n       QFile File;\n       void* Buffer\n\n   virtual bool ReadSingle() = 0;\n   virtual bool WriteSingle() = 0;\n};\n\nclass FileFormat_Txt : public FileFormat_Parrent\n{\n   virtual bool ReadSingle() {/*Possibly using QTextStream to do so*/}\n   virtual bool WriteSingle() {...}\n};\n\nclass FileFormat_BinArray : public FileFormat_Parrent\n{\n   ...\n};\n</code></pre>\n\n<p>Then while using these classes a <code>FileFormat</code> class would be created in the appropriate child type based on the file type.</p>\n\n<p>These created FileFormats would then be used in a loop iterating between <code>ReadSingle()</code> and <code>WriteSingle()</code> until either one of them returns false.</p>\n\n<p>This would result in the error code occurring, because the <code>QTextStream</code> is repeatedly constructed inside the loop.</p>\n"}, {"tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": true, "score": 0, "last_activity_date": 1554313194, "creation_date": 1554313194, "answer_id": 55501157, "question_id": 55500028, "link": "https://stackoverflow.com/questions/55500028/constructing-qtextstream-in-a-loop-causes-file-to-incorrectly-read-data/55501157#55501157", "title": "Constructing QTextStream in a loop causes file to incorrectly read data", "body": "<p><code>QTextStream</code> doesn't read data from the underlying <code>QIODevice</code> byte by byte, but has an internal decoded buffer, used both to avoid paying the cost of the repeated virtual call, and to do the encoding conversion on bigger chunks.</p>\n\n<p>This means that, once you start using it on a <code>QIODevice</code>, it may have read from it way more than you read from the <code>QTextStream</code>; this is actually explained <a href=\"https://doc.qt.io/Qt-5/qtextstream.html#details\" rel=\"nofollow noreferrer\">in the documentation</a>:</p>\n\n<blockquote>\n  <p>Since the text stream uses a buffer, you should not read from the stream using the implementation of a superclass. For instance, if you have a <code>QFile</code> and read from it directly using <code>QFile::readLine()</code> instead of using the stream, the text stream's internal position will be out of sync with the file's position.</p>\n</blockquote>\n\n<p>By continuously reading and destroying the <code>QTextStream</code> you are always getting data from the file according to the read buffer size, and then discarding all that you didn't read from the text stream. </p>\n"}], "owner": {"reputation": 31, "user_id": 6221876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2621cc90e571440cd0a082a329bc7df?s=128&d=identicon&r=PG&f=1", "display_name": "Jakubek K.", "link": "https://stackoverflow.com/users/6221876/jakubek-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 55501157, "answer_count": 2, "score": -1, "last_activity_date": 1554313395, "creation_date": 1554308936, "last_edit_date": 1554311691, "question_id": 55500028, "link": "https://stackoverflow.com/questions/55500028/constructing-qtextstream-in-a-loop-causes-file-to-incorrectly-read-data", "title": "Constructing QTextStream in a loop causes file to incorrectly read data", "body": "<p>I am reading a <code>QFile</code> in the most common way the only difference being due to to my programs architecture I initialized <code>QTextStream</code> on a file inside the reading loop. </p>\n\n<p>To my surprise this has lead to the <code>QFile</code> incorrectly telling the file position  and as a result of such the <code>QTextStream</code> is reading just one line or stopping at seemingly random line number depending on the file.  </p>\n\n<p><strong>Why does <code>QTextStream</code> behave in this way? I could not find any reference in the documentation about this sort of issue. Is there something I have missed?</strong></p>\n\n<p><strong>Code Example</strong></p>\n\n<p>This is the error code I was using (cut out from the architecture and simplified)</p>\n\n<pre><code>QFile file;\nQString line;\nint interationCount = 0;\nfile.setFileName(fileName);\n\nif(file.open(QIODevice::ReadOnly | QIODevice::Text))\n{\n    while(true)\n    {\n        QTextStream stream(&amp;file);\n        if(stream.readLineInto(&amp;line) == false)\n            break; //Or return\n\n        std::count &lt;&lt; \"Line \"&lt;&lt; interationCount &lt;&lt; \": \" &lt;&lt; line &lt;&lt; \"\\n\";\n        interationCount++;\n    }\n}\n</code></pre>\n\n<p><strong>Input and output</strong></p>\n\n<p>Given a file of numbers raging from 1 to 35 ordered on each line in a text format like so:</p>\n\n<pre><code>1\n2\n3\n...\n35\n</code></pre>\n\n<p>The algorithm reads just a single line of output while reading all of the lines is expected.</p>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>Line 0: 1\n</code></pre>\n\n<p><strong>Expected output:</strong></p>\n\n<pre><code>Line 0: 1\nLine 1: 2\nLine 2: 3\n...\nLine 34: 35\n</code></pre>\n"}, {"tags": ["c++", "pointers", "vector", "reference"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 6, "creation_date": 1554308840, "post_id": 55499951, "comment_id": 97706676, "body": "You might want to use a profiler to see where are the bottlenecks in your application, and make changes to optimize these."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1554309338, "post_id": 55499951, "comment_id": 97706913, "body": "Step 1) would be to make sure to build your program with the compilers optimizer <i>enabled</i>. Step 2) would then be to use a profiler on the <i>optimized</i> code to identify where the <i>actual</i> bottlenecks are."}, {"owner": {"reputation": 99, "user_id": 9936511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5058e6c689ed5ccaa57806a54384feac?s=128&d=identicon&r=PG&f=1", "display_name": "mand", "link": "https://stackoverflow.com/users/9936511/mand"}, "edited": false, "score": 0, "creation_date": 1554309544, "post_id": 55499951, "comment_id": 97707010, "body": "Thanks. I did try doing this, and tracked it down to the lines I mentioned in the last part of my question. I had trouble understanding what changes to make. The already given answers help with that luckily."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1554310288, "post_id": 55499951, "comment_id": 97707395, "body": "@mand You didn&#39;t post the settings you used to compile your program.  Are you running an optimized build, or an unoptimized, &quot;debug&quot; build?  If it is an unoptimized build, please recompile your program to use optimizations and retest."}, {"owner": {"reputation": 99, "user_id": 9936511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5058e6c689ed5ccaa57806a54384feac?s=128&d=identicon&r=PG&f=1", "display_name": "mand", "link": "https://stackoverflow.com/users/9936511/mand"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1554317958, "post_id": 55499951, "comment_id": 97711153, "body": "@PaulMcKenzie, thanks for replying. I debug on Windows with Visual Studio. I found out that I had my optimization settings off. Changing it to /O2 improved the speed considerably, though the pass-by-reference change had more effect.  This made me wonder whether compiling and running in cmd differs in run speed from using VS debugging. It does, the command prompt (with /O2) is much speedier even than VS with /O2 . Apparently all the debugging tools slow the process down."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1554309464, "post_id": 55500110, "comment_id": 97706975, "body": "You may want to sprinkle a bit of <code>const</code> in there. ;)"}, {"owner": {"reputation": 99, "user_id": 9936511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5058e6c689ed5ccaa57806a54384feac?s=128&d=identicon&r=PG&f=1", "display_name": "mand", "link": "https://stackoverflow.com/users/9936511/mand"}, "edited": false, "score": 0, "creation_date": 1554310288, "post_id": 55500110, "comment_id": 97707397, "body": "This, like @CoffeeBeforeArch&#39;s comment, made a huge difference! The code now runs about ~100/~1000 times faster. Thank you for pointing me in the correct direction and helping me out!"}, {"owner": {"reputation": 99, "user_id": 9936511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5058e6c689ed5ccaa57806a54384feac?s=128&d=identicon&r=PG&f=1", "display_name": "mand", "link": "https://stackoverflow.com/users/9936511/mand"}, "edited": false, "score": 0, "creation_date": 1554320624, "post_id": 55500110, "comment_id": 97712462, "body": "@Tetix, your Edit 2 suggestion also works, and it&#39;s not noticeable much, but probably makes a little difference. Since the values are overwritten each time anyway it makes no difference for the implementation."}], "tags": [], "owner": {"reputation": 289, "user_id": 11231203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/939d1b2bae675bce554d7b467bbf5947?s=128&d=identicon&r=PG&f=1", "display_name": "Tetix", "link": "https://stackoverflow.com/users/11231203/tetix"}, "is_accepted": false, "score": 1, "last_activity_date": 1554311254, "last_edit_date": 1554311254, "creation_date": 1554309224, "answer_id": 55500110, "question_id": 55499951, "link": "https://stackoverflow.com/questions/55499951/speeding-up-calculation-using-vectors-in-c-by-using-pointers-references/55500110#55500110", "title": "Speeding up calculation using vectors in C++ by using pointers/references", "body": "<p><code>vector&lt;int&gt; colVec = _sudoku[col];</code> does copy/transfer all the elements, while <code>const vector&lt;int&gt;&amp; colVec = _sudoku[col];</code> would not (it only creates an alias for the right hand side).</p>\n\n<p>Same with <code>bool SudokuSolver::isUnique(vector&lt;int&gt; v, int n) {</code> versus <code>bool SudokuSolver::isUnique(const vector&lt;int&gt;&amp; v, int n) {</code></p>\n\n<p>Edited after Jesper Juhl's suggestion: The <code>const</code> addition makes sure that you don't change the reference contents by mistake.</p>\n\n<p>Edit 2: Another thing to notice is that <code>vector&lt;int&gt; rowVec(_dim);</code> these vectors are continuously allocated and unallocated at each iteration, which might get costly. You could try something like</p>\n\n<pre><code>int SudokuSolver::rowUniques() {\n    int count = 0;\n    vector&lt;int&gt; rowVec(_maximumDim); // Specify maximum dimension       \n    for (int row = 0; row &lt; _dim; row++) {\n        for (int i = 0; i &lt; _dim; i++) {\n            rowVec[i] = _sudoku[i][row];\n        }\n        for (int i = 1; i &lt;= _dim; i++) {\n            if (isUnique(rowVec, i)) {\n                count++;\n            }\n        }\n    }\n    return count;\n}\n</code></pre>\n\n<p>if that doesn't mess up with your implementation.</p>\n"}, {"comments": [{"owner": {"reputation": 99, "user_id": 9936511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5058e6c689ed5ccaa57806a54384feac?s=128&d=identicon&r=PG&f=1", "display_name": "mand", "link": "https://stackoverflow.com/users/9936511/mand"}, "edited": false, "score": 0, "creation_date": 1554331798, "post_id": 55500115, "comment_id": 97716742, "body": "Upon further inspection, the most costly part of the function is isUnique(). I have attached the computational profile of that function !<a href=\"https://imgur.com/xExkq0T\" rel=\"nofollow noreferrer\">here</a>, but personally do not know how to further optimise this. If anyone else does, I&#39;d be glad to hear it."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user11127113"}, "is_accepted": false, "score": 2, "last_activity_date": 1554309241, "creation_date": 1554309241, "answer_id": 55500115, "question_id": 55499951, "link": "https://stackoverflow.com/questions/55499951/speeding-up-calculation-using-vectors-in-c-by-using-pointers-references/55500115#55500115", "title": "Speeding up calculation using vectors in C++ by using pointers/references", "body": "<p>If you change your <code>SudokuSolver::isUnique</code> to take <code>vector&lt;int&gt; &amp;v</code>, that is the only change you need to do pass-by-reference instead of pass-by-value. Passing with a pointer will be similar to passing by reference, with the difference that pointers could be re-assigned, or be NULL, while references can not.</p>\n\n<p>I suspect you would see some performance increase if you are working on a sufficiently large-sized problem where you would be able to distinguish a large copy (if your problem is small, it will be difficult to see minor performance increases).</p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 99, "user_id": 9936511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5058e6c689ed5ccaa57806a54384feac?s=128&d=identicon&r=PG&f=1", "display_name": "mand", "link": "https://stackoverflow.com/users/9936511/mand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1554311254, "creation_date": 1554308689, "question_id": 55499951, "link": "https://stackoverflow.com/questions/55499951/speeding-up-calculation-using-vectors-in-c-by-using-pointers-references", "title": "Speeding up calculation using vectors in C++ by using pointers/references", "body": "<p>Currently, I am making a C++ program that solves a sudoku. In order to do this, I calculate the \"energy\" of the sudoku (the number of faults) frequently. This calculation unfortunately takes up a lot of computation time. I think that it can be sped up significantly by using pointers and references in the calculation, but have trouble figuring out how to implement this.</p>\n\n<p>In my solver class, I have a <code>vector&lt;vector&lt;int&gt;</code> data-member called <code>_sudoku</code>, that contains the values of each site. Currently, when calculating the energy I call a lot of functions with pass-by-value. I tried adding a &amp; in the arguments of the functions and a * when making the variables, but this did not work. How can I make this program run faster by using pass-by-reference?</p>\n\n<p>Calculating the energy should not change the vector anyway so that would be better.</p>\n\n<p>I used the CPU usage to track down 80% of the calculation time to the function where vectors are called.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int SudokuSolver::calculateEnergy() {\n    int energy = 243 - (rowUniques() + colUniques() + blockUniques());//count number as faults\n    return energy;\n}\n\n\nint SudokuSolver::colUniques() {\n    int count = 0;\n    for (int col = 0; col &lt; _dim; col++) {\n        vector&lt;int&gt; colVec = _sudoku[col];\n        for (int i = 1; i &lt;= _dim; i++) {\n            if (isUnique(colVec, i)) {\n                count++;\n            }\n        }\n    }\n    return count;\n}\nint SudokuSolver::rowUniques() {\n    int count = 0;\n    for (int row = 0; row &lt; _dim; row++) {\n\n        vector&lt;int&gt; rowVec(_dim);\n        for (int i = 0; i &lt; _dim; i++) {\n            rowVec[i] = _sudoku[i][row];\n        }\n        for (int i = 1; i &lt;= _dim; i++) {\n            if (isUnique(rowVec, i)) {\n                count++;\n            }\n        }\n    }\n    return count;\n}\n\nint SudokuSolver::blockUniques() {\n    int count = 0;\n    for (int nBlock = 0; nBlock &lt; _dim; nBlock++) {\n        vector&lt;int&gt; blockVec = blockMaker(nBlock);\n        for (int i = 1; i &lt;= _dim; i++) {\n            if (isUnique(blockVec, i)) {\n                count++;\n            }\n        }\n    }\n    return count;\n}\n\nvector&lt;int&gt; SudokuSolver::blockMaker(int No) {\n    vector&lt;int&gt; block(_dim);\n    int xmin = 3 * (No % 3);\n    int ymin = 3 * (No / 3);\n    int col, row;\n    for (int i = 0; i &lt; _dim; i++) {\n        col = xmin + (i % 3);\n        row = ymin + (i / 3);\n        block[i] = _sudoku[col][row];\n    }\n    return block;\n}\n\nbool SudokuSolver::isUnique(vector&lt;int&gt; v, int n) {\n    int count = 0;\n    for (int i = 0; i &lt; _dim; i++) {\n        if (v[i] == n) {\n            count++;\n        }\n    }\n    if (count == 1) {\n        return true;\n    } else {\n        return false;\n    }\n}\n</code></pre>\n\n<p>The specific lines that use a lot of computatation time are the ones like:\n<code>vector&lt;int&gt; colVec = _sudoku[col];</code>\nand every time <code>isUnique()</code> is called.</p>\n\n<p>I expect that if I switch to using pass-by-reference, my code will speed up significantly. Could anyone help me in doing so, if that would indeed be the case?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "visual-studio", "debug-symbols"], "comments": [{"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1554308782, "post_id": 55499890, "comment_id": 97706643, "body": "Could be a firewall issue. Are you able to find extensions online in the &quot;Extensions and Updates&quot; window?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1554309168, "post_id": 55499890, "comment_id": 97706841, "body": "You may want to try some of the workarounds here: <a href=\"https://github.com/MicrosoftDocs/windows-driver-docs/issues/670\" rel=\"nofollow noreferrer\">github.com/MicrosoftDocs/windows-driver-docs/issues/670</a>"}, {"owner": {"reputation": 299, "user_id": 8185944, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh5.googleusercontent.com/-BjhCz0QUR3Y/AAAAAAAAAAI/AAAAAAAAAQ8/NjmDfB4BATY/photo.jpg?sz=128", "display_name": "Yan Zhao", "link": "https://stackoverflow.com/users/8185944/yan-zhao"}, "edited": false, "score": 0, "creation_date": 1554314692, "post_id": 55499890, "comment_id": 97709491, "body": "I just checked and it&#39;s not a firewall issue. Can get extensions no problem."}, {"owner": {"reputation": 299, "user_id": 8185944, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh5.googleusercontent.com/-BjhCz0QUR3Y/AAAAAAAAAAI/AAAAAAAAAQ8/NjmDfB4BATY/photo.jpg?sz=128", "display_name": "Yan Zhao", "link": "https://stackoverflow.com/users/8185944/yan-zhao"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1554383782, "post_id": 55499890, "comment_id": 97738501, "body": "@drescherjm: thanks for the suggestion. I might have to try that in the end, but looks quite bit of work."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1554383882, "post_id": 55499890, "comment_id": 97738572, "body": "Do you really need the symbols? I don&#39;t bother to load them because of the extra processing time needed."}], "owner": {"reputation": 299, "user_id": 8185944, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh5.googleusercontent.com/-BjhCz0QUR3Y/AAAAAAAAAAI/AAAAAAAAAQ8/NjmDfB4BATY/photo.jpg?sz=128", "display_name": "Yan Zhao", "link": "https://stackoverflow.com/users/8185944/yan-zhao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554308474, "creation_date": 1554308474, "question_id": 55499890, "link": "https://stackoverflow.com/questions/55499890/visual-studio-2017-c-symbols-are-not-loading-from-microsoft-servers", "title": "Visual Studio 2017 c++ symbols are not loading from microsoft servers", "body": "<p>In VS2010, there is a \"Load symbol from\" option which I can't find it in VS 2017.\n<a href=\"https://i.stack.imgur.com/WodU3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WodU3.png\" alt=\"enter image description here\"></a></p>\n\n<p>Now in VS2017, I have \"Microsoft Symbol Servers\" <strong>checked</strong>.</p>\n\n<p>But the symbol can't be loaded and I got from \"Symbol Load Information\":</p>\n\n<p>\"<a href=\"https://msdl.microsoft.com/download/symbols\" rel=\"nofollow noreferrer\">https://msdl.microsoft.com/download/symbols</a>: Skipped checking unavailable symbol location.\"</p>\n\n<p>I don't think the server address is invalid as I have the same setting in VS2010, I checked the \"Microsoft Symbol Servers\", not the URL.</p>\n"}, {"tags": ["c++", "uwp", "windows-iot-core-10"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11306770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e4e09ff9b019ff37677136386616e17?s=128&d=identicon&r=PG&f=1", "display_name": "Sherrinford", "link": "https://stackoverflow.com/users/11306770/sherrinford"}, "edited": false, "score": 0, "creation_date": 1554452123, "post_id": 55508838, "comment_id": 97765419, "body": "The app compiles fine as long as I don&#39;t use any of these extra features. But you gave me the right direction in what I was missing. One has to add corresponding references to the project explicitely. Then the Windows IoT Extensions for UWP have to be added. I will edit my post accordingly. Thank you."}], "tags": [], "owner": {"reputation": 4144, "user_id": 8546089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fZand.jpg?s=128&g=1", "display_name": "Michael Xu - MSFT", "link": "https://stackoverflow.com/users/8546089/michael-xu-msft"}, "is_accepted": true, "score": 0, "last_activity_date": 1554686629, "last_edit_date": 1554686629, "creation_date": 1554357601, "answer_id": 55508838, "question_id": 55499871, "link": "https://stackoverflow.com/questions/55499871/missing-shutdownmanager-class-in-c-based-uwp-app/55508838#55508838", "title": "Missing ShutdownManager class in C++ based UWP app?", "body": "<blockquote>\n  <p>But it seems that not all classes are available in C++.</p>\n</blockquote>\n\n<p>Did it mean when you built the C++ UWP project, it can not build successfully, or when you ran the app on device, an exception appeared?</p>\n\n<p>The ShutdownManager API is available in C++, indeed it is included in Windows::System namespace, please refer to this <a href=\"https://msdn.microsoft.com/en-us/library/windows/apps/mt694883.aspx?cs-save-lang=1&amp;cs-lang=cpp\" rel=\"nofollow noreferrer\">document</a>. And please note that:</p>\n\n<blockquote>\n  <p>This API requires the use of the IoT <strong>systemManagement</strong> capability, and\n  the inclusion of iot in the <strong>IgnorableNamespaces</strong> list. Users can add\n  the following to their <strong>Package.appmanifest</strong>: , and add iot to their existing list of\n  IgnorableNamespaces.</p>\n</blockquote>\n\n<p>Following code works fine on my device.</p>\n\n<pre><code>TimeSpan ts;\nts.Duration = 1000;\nShutdownManager::BeginShutdown(ShutdownKind::Shutdown, ts);\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11306770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e4e09ff9b019ff37677136386616e17?s=128&d=identicon&r=PG&f=1", "display_name": "Sherrinford", "link": "https://stackoverflow.com/users/11306770/sherrinford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 55508838, "answer_count": 1, "score": 0, "last_activity_date": 1554686629, "creation_date": 1554308425, "last_edit_date": 1554452453, "question_id": 55499871, "link": "https://stackoverflow.com/questions/55499871/missing-shutdownmanager-class-in-c-based-uwp-app", "title": "Missing ShutdownManager class in C++ based UWP app?", "body": "<p>I'm currently playing around with Windows IoT Core and I'm trying to develop a C++ based UWP app for Raspberry Pi 3b. \nI want to reboot/shutdown the Pi from inside the app but I'm not sure how I can do this.</p>\n\n<p>The UWP api reference lists the C# <a href=\"https://docs.microsoft.com/en-us/uwp/api/windows.system\" rel=\"nofollow noreferrer\">Windows.System</a> which corresponds to C++ Windows::System. But it seems that not all classes are available in C++.\nThe <a href=\"https://github.com/Microsoft/Windows-iotcore-samples/tree/develop/Samples/IoTCoreDefaultApp\" rel=\"nofollow noreferrer\">UWP samples</a> (C#) utilize the ShutdownManager class for reboot and shutdown but it is not existing in the C++ namespace. Now I'm not sure how I'm supposed to implement this functionality by utilizing the API. Are there any other possibilities to solve this for C++?</p>\n\n<p><strong>Solution:</strong>\nI was missing the <strong>Windows IoT Extensions for the UWP</strong>. These have to manually added in Visual Studio by right clicking the Project, then Add -> Reference -> Universal Windows -> Extensions. Now I have access to the namespace and was able to reboot and shutdown my device.</p>\n"}, {"tags": ["c++", "object-initializers"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1554308062, "post_id": 55499721, "comment_id": 97706263, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1554308126, "post_id": 55499721, "comment_id": 97706297, "body": "probably just missing includes, but I get loads of errros that are unrelated to your question: <a href=\"https://wandbox.org/permlink/umVfs33yaFnIaLON\" rel=\"nofollow noreferrer\">wandbox.org/permlink/umVfs33yaFnIaLON</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1554308187, "post_id": 55499721, "comment_id": 97706333, "body": "you know that <code>class A : B</code> is private inheritance, right? for inheriting the interface private inheritance makes not much sense..."}, {"owner": {"reputation": 3, "user_id": 9766376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3116afe63545fe55e06663e2a69e31d?s=128&d=identicon&r=PG&f=1", "display_name": "Adroit", "link": "https://stackoverflow.com/users/9766376/adroit"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1554308396, "post_id": 55499721, "comment_id": 97706442, "body": "user463035818  Sorry, I forgot to copy the includes. now I edited that. and also it should be copiled with c++11. I also corrected public inheritance, although it isnot affected on the problem."}, {"owner": {"reputation": 639, "user_id": 1671661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc8db94e53e65d244d49d87e506907a6?s=128&d=identicon&r=PG", "display_name": "KonstantinL", "link": "https://stackoverflow.com/users/1671661/konstantinl"}, "edited": false, "score": 0, "creation_date": 1554308698, "post_id": 55499721, "comment_id": 97706592, "body": "You CAN initialize your object. You CAN&#39;T use std::make_shared."}], "answers": [{"tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": true, "score": 2, "last_activity_date": 1554308752, "creation_date": 1554308752, "answer_id": 55499973, "question_id": 55499721, "link": "https://stackoverflow.com/questions/55499721/how-to-initialize-a-non-copyable-object-data-member/55499973#55499973", "title": "how to initialize a non copyable object data member", "body": "<p>To make the above compile:</p>\n\n<p>Add the headers:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;memory&gt;\n</code></pre>\n\n<p>You also need to be able to construct the <code>A</code> so you need to make the constructors public:</p>\n\n<pre><code>class A //abstract class\n{\n    public:               // Added this:\n         A() = default;\n    .....\n};\n</code></pre>\n\n<p>Your main issue is here in making the shared object.</p>\n\n<pre><code> obj2(std::make_shared&lt;SI::Z&gt;(SI::Z(p,\"hi\")))\n</code></pre>\n\n<p>You don't need to constructed the <code>SI::Z</code> object here (as it is not copyable this is an issue). What you want to do is pass the arguments that will be used to create the <code>SI::Z</code> object. Then <code>std::make_shared()</code> will call new and forward these parameters to the constructor.</p>\n\n<pre><code> obj2(std::make_shared&lt;SI::Z&gt;(p, \"hi\"))     // Notice the diff?\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9766376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3116afe63545fe55e06663e2a69e31d?s=128&d=identicon&r=PG&f=1", "display_name": "Adroit", "link": "https://stackoverflow.com/users/9766376/adroit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 55499973, "answer_count": 1, "score": -1, "last_activity_date": 1554308752, "creation_date": 1554307917, "last_edit_date": 1554308255, "question_id": 55499721, "link": "https://stackoverflow.com/questions/55499721/how-to-initialize-a-non-copyable-object-data-member", "title": "how to initialize a non copyable object data member", "body": "<p>I want to use an already implemented abstract class (which can be seen as \"A\" in my simple provided code) in my code. \nI defined class \"B\" to implement those pure virtual methods. The fact, here, is that the objects of this class cannot be copyable then, as the operator= is deleted in abstract class. \nI have class \"Z\" which has a data member of \"B\" class object. I want to initialize the object as you see in the code. But as it is a non-copyable one, for sure it show errors like  <i> use of deleted function \u2018NS::B::B(NS::B&amp;&amp;)\u2019 </i> . I don't know how should I have this object as data member and also initialize it with proper data. \nThe simple version of the code is as follow:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;memory&gt;\n\nnamespace NS {\nclass A //abstract class\n{\npublic:\n    A() = default;\n    A&amp; operator=(const A&amp; other) = delete;\n    A(const A&amp; other) = delete;\n};\n}\n\nnamespace NS {\nclass B : public A\n{\npublic:\n    B(int p);\n};\n}\n\nnamespace SI {\nclass Z\n{\npublic:\n    Z(int p, std::string name);\nprivate:\n    NS::B obj3;\n};\ntypedef std::shared_ptr&lt;SI::Z&gt; ZPtr;\n}\n\nSI::Z::Z(int p, std::string name) : obj3(p)\n{}\n\nnamespace SI {\nclass Y\n{\npublic:\n    Y(int p);\nprivate:\n    SI::ZPtr obj2;\n};\n}\n\nSI::Y::Y(int p) : obj2(std::make_shared&lt;SI::Z&gt;(SI::Z(p,\"hi\")))\n{}\n\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 639, "user_id": 1671661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc8db94e53e65d244d49d87e506907a6?s=128&d=identicon&r=PG", "display_name": "KonstantinL", "link": "https://stackoverflow.com/users/1671661/konstantinl"}, "edited": false, "score": 0, "creation_date": 1554308121, "post_id": 55499698, "comment_id": 97706294, "body": "Just create a table with pairs { enumValue, stringValue }."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1554310288, "post_id": 55499698, "comment_id": 97707398, "body": "There is no need to <code>break</code> after a <code>return</code>. That makes the <code>switch</code> version probably the tersest you can get."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1554313560, "post_id": 55499698, "comment_id": 97708939, "body": "Are you sure you can&#39;t use <code>const char*</code>&#39;s instead of proper <code>std::string</code>s?"}], "answers": [{"comments": [{"owner": {"reputation": 639, "user_id": 1671661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc8db94e53e65d244d49d87e506907a6?s=128&d=identicon&r=PG", "display_name": "KonstantinL", "link": "https://stackoverflow.com/users/1671661/konstantinl"}, "edited": false, "score": 3, "creation_date": 1554309015, "post_id": 55499831, "comment_id": 97706768, "body": "Not the best solution. It relies on enum values start from 0 and have no blanks."}], "tags": [], "owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "is_accepted": true, "score": 3, "last_activity_date": 1554312710, "last_edit_date": 1554312710, "creation_date": 1554308285, "answer_id": 55499831, "question_id": 55499698, "link": "https://stackoverflow.com/questions/55499698/a-cheap-way-to-create-a-class-that-returns-string-constants-to-enums-and-vice-ve/55499831#55499831", "title": "A cheap way to create a class that returns string constants to enums and vice versa?", "body": "<p>Cheaper would be not to use <code>std::string</code> at all since it will likely require run-time initialization and also use a lookup table to translate from enum to string:</p>\n\n<pre><code>const char *enumToStr(MY_ENUM type) {\n    static const char *const names[] = { \"a\", \"b\", \"c\" };\n    if (type &lt; sizeof(names) / sizeof(names[0]))\n        return names[type];\n    return nullptr;\n}\n</code></pre>\n\n<p>Unfortunately you can't use this kind of trick for a reverse conversion. Also this assumes that your enumerators have contiguous numerical values and you should be careful when adding or reordering your enum's values.</p>\n\n<p>As for \"where to put these values\" question, it doesn't really matter from the \"overhead\" point of view as long as this array is static or global. I would suggest putting it into a global variable within an anonymous namespace inside the *.cpp file that defines these conversion functions, so that it can be used for both functions but isn't visible outside of this translation unit:</p>\n\n<pre><code>namespace {\n    const char *const names[] = ...;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1554310562, "post_id": 55500401, "comment_id": 97707540, "body": "How do you do the reverse way? Linear search?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1554310687, "post_id": 55500401, "comment_id": 97707597, "body": "@MaxLanghof Was that also in question? Well, I&#39;d probably take the burden to initialize another map (using <code>std::string</code> or at least <code>std::string_view</code> as key value)."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1554311359, "post_id": 55500401, "comment_id": 97707950, "body": "It&#39;s both in the title and the text after the code snippet. Also, one day you have to tell me how to pronounce that nickname - I&#39;ve settled for &quot;rhasta pie&quot; for some reason."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1554311562, "post_id": 55500401, "comment_id": 97708032, "body": "For enum-to-string mapping, <code>unordered_map</code> would likely be faster."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1554311699, "post_id": 55500401, "comment_id": 97708101, "body": "@MaxLanghof <i>&quot;Also, one day you have to tell me how to pronounce that nickname - I&#39;ve settled for &quot;rhasta pie&quot; for some reason.&quot;</i> <b>Rasta Pie</b> sounds somehow cool, and seems to be appropriate for me ole&#39; pothead :-D. But the pronounciation is <i>panta rei</i> (a as in <i>fat</i>). Here&#39;s more <a href=\"https://en.wikipedia.org/wiki/Heraclitus#Panta_rhei,_%22everything_flows%22\" rel=\"nofollow noreferrer\">reference</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1554312579, "post_id": 55500401, "comment_id": 97708528, "body": "@Paul THX, I incorporated this."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1554312621, "post_id": 55500401, "comment_id": 97708544, "body": "@Max I am answering the <i>vice versa</i> function as well now."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 3, "last_activity_date": 1554313836, "last_edit_date": 1554313836, "creation_date": 1554310390, "answer_id": 55500401, "question_id": 55499698, "link": "https://stackoverflow.com/questions/55499698/a-cheap-way-to-create-a-class-that-returns-string-constants-to-enums-and-vice-ve/55500401#55500401", "title": "A cheap way to create a class that returns string constants to enums and vice versa?", "body": "<p>The most common implementation in c++ is to setup a map for this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;unordered_map&gt;\n#include &lt;string&gt;\n\nenum MY_ENUM { \n      TYPE_1\n    , TYPE_2 = 42 // Mind the gap please!\n};\n\nconst char* const option1(MY_ENUM type) {\n    static std::unordered_map&lt;MY_ENUM, const char* const&gt; enum2StringMap = \n       { { TYPE_1, \"a\" }\n       , { TYPE_2, \"b\" }\n       // ...\n       };\n\n    if(enum2StringMap.find(type) == enum2StringMap.end()) {\n        // throw exception or do whatever to indicate an error\n        return \"Invalid enum value\";\n    }\n\n    return enum2StringMap[type];\n}\n</code></pre>\n\n<p>For the <em>vice versa</em> option you might need to take the burden to keep a second map, and synchronize it with the 1st one:</p>\n\n<pre><code>MY_ENUM option1(const std::string&amp; s) {\n    static std::unordered_map&lt;std::string, MY_ENUM&gt; string2EnumgMap = \n       { { \"a\" , TYPE_1  }\n       , { \"b\" , TYPE_2  }\n       // ...\n       };\n\n    if(string2EnumgMap.find(s) == string2EnumgMap.end()) {\n        // throw exception or do whatever to indicate an error\n    }\n\n    return string2EnumgMap[s];\n}\n</code></pre>\n\n<hr>\n\n<p>Another option making the synchonization easier (but may have other drawbacks regarding performance) could be using a <a href=\"https://www.boost.org/doc/libs/1_55_0/libs/bimap/doc/html/index.html\" rel=\"nofollow noreferrer\"><code>boost::bimap</code></a>.</p>\n\n<hr>\n\n<pre><code>int main() {\n    std::cout &lt;&lt; option1(TYPE_1) &lt;&lt; std::endl;\n    std::cout &lt;&lt; option1(TYPE_2) &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; option1(\"a\") &lt;&lt; std::endl;\n    std::cout &lt;&lt; option1(\"b\") &lt;&lt; std::endl;\n}\n</code></pre>\n\n<hr>\n\n<p>Output:</p>\n\n<blockquote>\n<pre><code>a\nb\n0\n42\n</code></pre>\n</blockquote>\n\n<hr>\n\n<p>Not as <em>\"cheap\"</em> as <a href=\"https://stackoverflow.com/a/55499831/1413395\">@r3musn0x proposed solution</a>, but eliminates the concerns mentioned in <a href=\"https://stackoverflow.com/questions/55499698/a-cheap-way-to-create-a-class-that-returns-string-constants-to-enums-and-vice-ve#comment97706768_55499831\">@KonstantinL's comment</a>.<br>\nThere will be a little overhead when the maps are initialized at first access, but any foolowing up search might be optimized to be <em>O(log n)</em> vs. <em>O(n)</em> time complexity.</p>\n\n<hr>\n\n<p>See a working <a href=\"http://coliru.stacked-crooked.com/a/cce2ab19d02fdeb1\" rel=\"nofollow noreferrer\">online demo</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1554325854, "post_id": 55501470, "comment_id": 97714784, "body": "Why avoiding maps in preference of guaranteed <i>O(n)</i> search behavior?"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1554328167, "post_id": 55501470, "comment_id": 97715589, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: Asymptotics are irrelevant for small sizes... have a look at: <a href=\"https://ideone.com/b3OnH\" rel=\"nofollow noreferrer\">ideone.com/b3OnH</a> - and that&#39;s a pretty large vector vs a map."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1554328959, "post_id": 55501470, "comment_id": 97715849, "body": "Another <a href=\"https://terrainformatica.com/2017/10/15/when-linear-search-is-faster-than-stdmapfind-and-stdunordered_mapfind/\" rel=\"nofollow noreferrer\">discussion</a> involving unordered maps as well, but up to 10 items."}], "tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": false, "score": 1, "last_activity_date": 1554314798, "last_edit_date": 1554314798, "creation_date": 1554314341, "answer_id": 55501470, "question_id": 55499698, "link": "https://stackoverflow.com/questions/55499698/a-cheap-way-to-create-a-class-that-returns-string-constants-to-enums-and-vice-ve/55501470#55501470", "title": "A cheap way to create a class that returns string constants to enums and vice versa?", "body": "<p>A variation on @KonstantinL's approach; I too think you would be best served by avoiding <code>std::string</code>s to the extent that you can. But I would also like to avoid maps...</p>\n\n<pre><code>class Foo {\npublic:\nenum MY_ENUM { \n    TYPE_1,\n    TYPE_2\n};\n\nprotected:\n    using pair_type = std::pair&lt;MY_ENUM, const char*&gt;;\n    // the following will work with C++17:\n    // See also: https://stackoverflow.com/q/6114067/1593077\n    // about initializing std::arrays without specifying the length.\n    static constexpr const auto names_and_codes = std::array {\n        pair_type { TYPE_1, \"a\" },\n        pair_type { TYPE_2, \"b\" },\n    };\n\npublic:\n\nstatic const char* name_of(MY_ENUM t) noexcept\n{\n    auto iter = std::find_if(names_and_codes.begin(), names_and_codes.end(),\n        [&amp;t](const auto&amp; pair) { return pair.first == t; }\n    );\n    if (iter != names.end()) { return iter-&gt;second; }\n    return nullptr; // Or handle the not-found case differently\n}\n\nstatic MY_ENUM code_for(const char* name) noexcept\n{\n    auto iter = std::find_if(names_and_codes.begin(), names_and_codes.end(),\n        [&amp;t](const auto&amp; pair) { return std::strcmp(pair.second, name) == 0; }\n    );\n    if (iter != names.end()) { return iter-&gt;first; }\n    return MY_ENUM{-1}; // Or handle the not-found case differently\n}\n\n// more code for class Foo \n}\n</code></pre>\n\n<p>This uses a static array instead of a map; linear search in contiguous memory is faster than binary search on trees on with heap-allocated nodes - for a limited number of values, which seems to be the case for you. Also - no use of the heap at all here.</p>\n\n<p>Notes: </p>\n\n<ul>\n<li>This fixed-size-array-backed \"map\" can be factored out and made generic, in a separate header. It comes in useful sometimes.</li>\n<li>If your array is sorted, you can make one of the searches binary.</li>\n</ul>\n"}], "owner": {"reputation": 16924, "user_id": 1266109, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/034350a4ce4a23ce02a68f6a6e6ddc6b?s=128&d=identicon&r=PG", "display_name": "Rahul Iyer", "link": "https://stackoverflow.com/users/1266109/rahul-iyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 55499831, "answer_count": 3, "score": 0, "last_activity_date": 1554314798, "creation_date": 1554307840, "last_edit_date": 1554312991, "question_id": 55499698, "link": "https://stackoverflow.com/questions/55499698/a-cheap-way-to-create-a-class-that-returns-string-constants-to-enums-and-vice-ve", "title": "A cheap way to create a class that returns string constants to enums and vice versa?", "body": "<p>Is it better to do:</p>\n\n<pre><code>class Foo{\n\nstd:string option1(MY_ENUM type){\n    static const std:string f1 = \"a\";\n    static const std:string f2 = \"b\";\n    static const std:string f3 = \"c\";\n    // ...\n    switch (type) {\n        case (TYPE_1):{\n            return f1;\n            break;\n        }\n        case (TYPE_2):{\n            return f2;\n            break;\n        }\n        // ...\n    }\n}\n</code></pre>\n\n<p>Or do this:</p>\n\n<pre><code>class Foo {\nprivate:\n    const std:string f1 = \"a\";\n    const std:string f2 = \"b\";\n    const std:string f3 = \"c\";\n\npublic:\nstd:string option1(MY_ENUM type){\n\n    // ...\n    switch (type){\n        case (TYPE_1):{\n            return f1;\n            break;\n        }\n        case (TYPE_2):{\n            return f2;\n            break;\n        }\n        // ...\n    }\n}\n</code></pre>\n\n<p>Likewise I would do something similar to convert the enum to the string.\nIs it better to keep the strings as static const within the function, or as private within the class ?\n- No one else is going to edit the class but me.\n- It doesn't really matter if any other functions inside the class know what the values of the strings are, and since it is const they can't modify it anyway.</p>\n\n<p>Which is cheaper and has less overhead at runtime and during compilation ? Which is a better practice ?</p>\n"}, {"tags": ["c++", "bash", "ubuntu", "gdb"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 2655756, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/fd7bf7220cd3ea3df80df04ab4bfaec1?s=128&d=identicon&r=PG", "display_name": "JDel", "link": "https://stackoverflow.com/users/2655756/jdel"}, "edited": false, "score": 0, "creation_date": 1554383401, "post_id": 55508529, "comment_id": 97738266, "body": "1. Its a testing program, its not written by me; 2. gets unset everytime  So some script is loaded by GDB changing my PS1 and unsetting LD_LIBRARY_PATH -&gt; I mean the shell is executing some script in another way than a regular shell, since a regular shell keeps LD_LIBRARY_PATH."}], "tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": false, "score": 0, "last_activity_date": 1554355975, "creation_date": 1554355975, "answer_id": 55508529, "question_id": 55499663, "link": "https://stackoverflow.com/questions/55499663/gdb-loads-unfindable-script-on-shell-start/55508529#55508529", "title": "GDB loads unfindable script on shell start", "body": "<blockquote>\n  <p>So some script is loaded by GDB changing my PS1 and unsetting LD_LIBRARY_PATH</p>\n</blockquote>\n\n<p>No. GDB just loads your <code>$SHELL</code>, and your <code>$SHELL</code> unsets these environment variables for some reason.</p>\n\n<p>You should look at values of <code>$SHELL</code> and possibly <code>$ENV</code>.</p>\n\n<p>Note that:</p>\n\n<ol>\n<li>Using <code>LD_LIBRARY_PATH</code> is generally a mistake; you should strive to build your programs such that they don't require it.</li>\n<li>You <em>can</em> set any environment variable inside GDB (you don't have to inherit them from parent shell) with <code>(gdb) set env FOO bar</code>.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "edited": false, "score": 0, "creation_date": 1554390701, "post_id": 55518378, "comment_id": 97743387, "body": "The famous &quot;reboot&quot; non-solution. I guess we&#39;ll never know what the real problem was."}], "tags": [], "owner": {"reputation": 61, "user_id": 2655756, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/fd7bf7220cd3ea3df80df04ab4bfaec1?s=128&d=identicon&r=PG", "display_name": "JDel", "link": "https://stackoverflow.com/users/2655756/jdel"}, "is_accepted": true, "score": -1, "last_activity_date": 1554387786, "creation_date": 1554387786, "answer_id": 55518378, "question_id": 55499663, "link": "https://stackoverflow.com/questions/55499663/gdb-loads-unfindable-script-on-shell-start/55518378#55518378", "title": "GDB loads unfindable script on shell start", "body": "<p>I purged GDB, removed /usr/share/gdb/, reinstalled and the problem was fixed.</p>\n"}], "owner": {"reputation": 61, "user_id": 2655756, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/fd7bf7220cd3ea3df80df04ab4bfaec1?s=128&d=identicon&r=PG", "display_name": "JDel", "link": "https://stackoverflow.com/users/2655756/jdel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 1, "accepted_answer_id": 55518378, "answer_count": 2, "score": 0, "last_activity_date": 1554387786, "creation_date": 1554307729, "question_id": 55499663, "link": "https://stackoverflow.com/questions/55499663/gdb-loads-unfindable-script-on-shell-start", "title": "GDB loads unfindable script on shell start", "body": "<p>On my computer when starting a shell in GDB it would give a very standard shell (looks like \"bash-4.4$\")- ignoring most of my environment variables. The real problem for me is I cannot adjust the LD_LIBRARY_PATH variable because of this reason. </p>\n\n<p>More posts on SO suggest to check .bashrc and .profile, I did that. I even created a new user and the problem persist. So some script is loaded by GDB changing my PS1 and unsetting LD_LIBRARY_PATH. However, I have no idea which process. For some reason Root does not have this problem.</p>\n\n<p>This works:</p>\n\n<pre><code>delruej@delxps:~$ export LD_LIBRARY_PATH=Hello\ndelruej@delxps:~$ bash\ndelruej@delxps:~$ echo $LD_LIBRARY_PATH\nHello\n\n</code></pre>\n\n<p>However this does not:</p>\n\n<pre><code>delruej@delxps:~$ export LD_LIBRARY_PATH=Hello\ndelruej@delxps:~$ gdb\n(gdb) shell\nbash-4.4$ echo $LD_LIBRARY_PATH\n\n\n</code></pre>\n\n<p>It should be some script loaded by every user, but not by root.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1554309162, "post_id": 55499651, "comment_id": 97706835, "body": "Usage of <code>placement new</code> is pretty close to being the <i>only</i> time you&#39;d ever want to explicitly call a destructor."}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 10772961, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hjIVvquN5oU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gy9zaCDI6QCTiaA-lO2sN89YILOg/mo/photo.jpg?sz=128", "display_name": "Alin Catalin Preda", "link": "https://stackoverflow.com/users/10772961/alin-catalin-preda"}, "edited": false, "score": 0, "creation_date": 1554307891, "post_id": 55499688, "comment_id": 97706170, "body": "Ohh, what I wanted to do is use the destructor to free the memory in a function instead of writing another function, I did not think about that. Thanks a lot"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 131, "user_id": 10772961, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hjIVvquN5oU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gy9zaCDI6QCTiaA-lO2sN89YILOg/mo/photo.jpg?sz=128", "display_name": "Alin Catalin Preda", "link": "https://stackoverflow.com/users/10772961/alin-catalin-preda"}, "edited": false, "score": 2, "creation_date": 1554307937, "post_id": 55499688, "comment_id": 97706189, "body": "I don&#39;t follow. Why do you need to write another function? The destructor looks right; just don&#39;t call it manually."}, {"owner": {"reputation": 131, "user_id": 10772961, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hjIVvquN5oU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gy9zaCDI6QCTiaA-lO2sN89YILOg/mo/photo.jpg?sz=128", "display_name": "Alin Catalin Preda", "link": "https://stackoverflow.com/users/10772961/alin-catalin-preda"}, "edited": false, "score": 0, "creation_date": 1554308593, "post_id": 55499688, "comment_id": 97706542, "body": "Because in the operator= from Natural_Big_Number I have to free the memory from the vector member before assigning to another."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 131, "user_id": 10772961, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hjIVvquN5oU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gy9zaCDI6QCTiaA-lO2sN89YILOg/mo/photo.jpg?sz=128", "display_name": "Alin Catalin Preda", "link": "https://stackoverflow.com/users/10772961/alin-catalin-preda"}, "edited": false, "score": 1, "creation_date": 1554310024, "post_id": 55499688, "comment_id": 97707258, "body": "@AlinCatalinPreda <i>Because in the operator= from Natural_Big_Number</i> -- What is &quot;Natural_Big_Number&quot;?  And none of what you say is required by explicitly calling the destructor.  That&#39;s just you assuming you need to do this erroneous step."}, {"owner": {"reputation": 131, "user_id": 10772961, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hjIVvquN5oU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gy9zaCDI6QCTiaA-lO2sN89YILOg/mo/photo.jpg?sz=128", "display_name": "Alin Catalin Preda", "link": "https://stackoverflow.com/users/10772961/alin-catalin-preda"}, "edited": false, "score": 0, "creation_date": 1554311094, "post_id": 55499688, "comment_id": 97707812, "body": "That&#39;s what my teachers told us to do, to always free the memory even if it&#39;s done automatically when the scope of the variable is ending,"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1554311173, "post_id": 55499688, "comment_id": 97707851, "body": "Then you misinterpreted what your teacher is telling you.  The teacher didn&#39;t mean to actually call the destructor explicitly."}, {"owner": {"reputation": 131, "user_id": 10772961, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hjIVvquN5oU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gy9zaCDI6QCTiaA-lO2sN89YILOg/mo/photo.jpg?sz=128", "display_name": "Alin Catalin Preda", "link": "https://stackoverflow.com/users/10772961/alin-catalin-preda"}, "edited": false, "score": 0, "creation_date": 1554311233, "post_id": 55499688, "comment_id": 97707879, "body": "<a href=\"https://www.heypasteit.com/clip/0ISBZ1\" rel=\"nofollow noreferrer\">heypasteit.com/clip/0ISBZ1</a> here is the Natural_Big_Number class"}, {"owner": {"reputation": 131, "user_id": 10772961, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hjIVvquN5oU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gy9zaCDI6QCTiaA-lO2sN89YILOg/mo/photo.jpg?sz=128", "display_name": "Alin Catalin Preda", "link": "https://stackoverflow.com/users/10772961/alin-catalin-preda"}, "edited": false, "score": 0, "creation_date": 1554311282, "post_id": 55499688, "comment_id": 97707904, "body": "Yes that was just a bad idea of mine, they told us just to free it but when I try to free it with a function because i cant access the array dirrectly is still the same problem"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1554311422, "post_id": 55499688, "comment_id": 97707980, "body": "Please do not post links to random sites.  Post the code here (in your original message and explain what the issue is)"}, {"owner": {"reputation": 131, "user_id": 10772961, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hjIVvquN5oU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gy9zaCDI6QCTiaA-lO2sN89YILOg/mo/photo.jpg?sz=128", "display_name": "Alin Catalin Preda", "link": "https://stackoverflow.com/users/10772961/alin-catalin-preda"}, "edited": false, "score": 0, "creation_date": 1554311662, "post_id": 55499688, "comment_id": 97708084, "body": "I can&#39;t paste so much code"}, {"owner": {"reputation": 131, "user_id": 10772961, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hjIVvquN5oU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gy9zaCDI6QCTiaA-lO2sN89YILOg/mo/photo.jpg?sz=128", "display_name": "Alin Catalin Preda", "link": "https://stackoverflow.com/users/10772961/alin-catalin-preda"}, "edited": false, "score": 0, "creation_date": 1554311716, "post_id": 55499688, "comment_id": 97708115, "body": "I edited it in the post with the whole code"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 131, "user_id": 10772961, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hjIVvquN5oU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gy9zaCDI6QCTiaA-lO2sN89YILOg/mo/photo.jpg?sz=128", "display_name": "Alin Catalin Preda", "link": "https://stackoverflow.com/users/10772961/alin-catalin-preda"}, "edited": false, "score": 0, "creation_date": 1554311861, "post_id": 55499688, "comment_id": 97708189, "body": "@AlinCatalinPreda I don&#39;t know what your teachers are really telling you, but <code>vec</code> in your <code>Natural_Big_Number</code> class will be automatically destroyed, since <code>Vector</code> handles the memory management already.  If C++ didn&#39;t work this way, imagine that crazy code that had to be written by us programmers just to clean up the memory.  Also, <code>Vector Vector::operator=(const Vector&amp; vec)</code> is not correct.  It should be <code>Vector&amp; Vector::operator=(const Vector&amp; vec)</code>"}, {"owner": {"reputation": 131, "user_id": 10772961, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hjIVvquN5oU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gy9zaCDI6QCTiaA-lO2sN89YILOg/mo/photo.jpg?sz=128", "display_name": "Alin Catalin Preda", "link": "https://stackoverflow.com/users/10772961/alin-catalin-preda"}, "edited": false, "score": 0, "creation_date": 1554312593, "post_id": 55499688, "comment_id": 97708533, "body": "Can you explain why it should be with &amp;? It works just fine without it"}, {"owner": {"reputation": 131, "user_id": 10772961, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hjIVvquN5oU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gy9zaCDI6QCTiaA-lO2sN89YILOg/mo/photo.jpg?sz=128", "display_name": "Alin Catalin Preda", "link": "https://stackoverflow.com/users/10772961/alin-catalin-preda"}, "edited": false, "score": 0, "creation_date": 1554312805, "post_id": 55499688, "comment_id": 97708618, "body": "<a href=\"https://imgur.com/a/Ljj4O62\" rel=\"nofollow noreferrer\">imgur.com/a/Ljj4O62</a> here is a picture with the overload of some operators from my course"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 131, "user_id": 10772961, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hjIVvquN5oU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gy9zaCDI6QCTiaA-lO2sN89YILOg/mo/photo.jpg?sz=128", "display_name": "Alin Catalin Preda", "link": "https://stackoverflow.com/users/10772961/alin-catalin-preda"}, "edited": false, "score": 0, "creation_date": 1554313303, "post_id": 55499688, "comment_id": 97708822, "body": "@Alin: Paul&#39;s right (and <a href=\"https://stackoverflow.com/q/21485366/560648\">here&#39;s why</a>). But it does appear that this comes from your teacher :( Your version &quot;works just fine&quot; in a sense, but has unconventional/surprising op definitions that may/will result in unconventional/surprising results..."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 4, "last_activity_date": 1554307804, "creation_date": 1554307804, "answer_id": 55499688, "question_id": 55499651, "link": "https://stackoverflow.com/questions/55499651/im-getting-an-error-when-im-explictly-calling-the-destructor-of-a-class/55499688#55499688", "title": "I&#39;m getting an error when I&#39;m explictly calling the destructor of a class", "body": "<p>That's because <em>you shouldn't do that</em>.</p>\n\n<p>The destructor is called for you when <code>vec1</code> goes out of scope.</p>\n\n<p>Your program attempts to destroy <code>vec1</code> twice, which causes <strong>mayhem</strong>.</p>\n"}], "owner": {"reputation": 131, "user_id": 10772961, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hjIVvquN5oU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gy9zaCDI6QCTiaA-lO2sN89YILOg/mo/photo.jpg?sz=128", "display_name": "Alin Catalin Preda", "link": "https://stackoverflow.com/users/10772961/alin-catalin-preda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1554307867, "answer_count": 1, "score": -1, "last_activity_date": 1554311699, "creation_date": 1554307692, "last_edit_date": 1554311699, "question_id": 55499651, "link": "https://stackoverflow.com/questions/55499651/im-getting-an-error-when-im-explictly-calling-the-destructor-of-a-class", "closed_reason": "Duplicate", "title": "I&#39;m getting an error when I&#39;m explictly calling the destructor of a class", "body": "<p>So I have a class Vector and when I'm calling in main for example the destructor of an object I get an exception. The line of code from the exception file is \"free_dbg(block, _UNKNOWN_BLOCK)\"; Note that if I do only the reading of the vectors or only the destructor call, I won't get the exception. When I do both together, this is when the problem appears.\nHere is the code:</p>\n\n<pre><code>    #include \"pch.h\"\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nclass Vector\n{\npublic:\n    Vector();\n    ~Vector();\n    Vector(const Vector&amp; vec);\n    void insert_element(int value, int position);\n    void delete_element(int position);\n    void set_nr_elem(int nr) { nr_elem = nr; }\n    int get_nr_elem() const { return nr_elem; }\n    int get_element(int position) const { return arr[position]; }\n    friend istream&amp; operator&gt;&gt;(istream&amp; input, Vector &amp;vec);\n    friend ostream&amp; operator&lt;&lt;(ostream&amp; output, const Vector &amp;vec);\n    Vector operator=(const Vector&amp; vec);\n    void free_memory() { delete[] arr; }\nprivate:\n    int *arr;\n    int nr_elem;\n};\n\nVector::Vector()\n{\n    arr = NULL;\n    nr_elem = 0;\n}\n\nVector::~Vector()\n{\n    delete[]arr;\n    nr_elem = 0;\n}\n\nVector::Vector(const Vector&amp; vec)\n{\n    arr = new int[vec.nr_elem];\n    nr_elem = vec.nr_elem;\n    for (int i = 0; i &lt; nr_elem; i++)\n        arr[i] = vec.arr[i];\n}\n\nvoid Vector::insert_element(int value, int position)\n{\n    if (position &lt; 0 || position &gt; nr_elem)\n    {\n        cout &lt;&lt; \"Invalid position\";\n        return;\n    }\n    arr = (int*)realloc(arr, (nr_elem + 1) * sizeof(int));\n    for (int i = nr_elem; i &gt;= position + 1; i--)\n        arr[i] = arr[i - 1];\n    arr[position] = value;\n    nr_elem++;\n}\n\nvoid Vector::delete_element(int position)\n{\n    if (position &lt; 0 || position &gt;= nr_elem)\n    {\n        cout &lt;&lt; \"Invalid position\";\n        return;\n    }\n    for (int i = position; i &lt; nr_elem; i++)\n        arr[i] = arr[i + 1];\n    delete &amp;arr[nr_elem];\n    nr_elem--;\n}\n\nistream&amp; operator&gt;&gt;(istream&amp; input, Vector &amp;vec)\n{\n    int nr;\n    input &gt;&gt; nr;\n    for (int i = 0; i &lt; nr; i++)\n    {\n        int x;\n        input &gt;&gt; x;\n        vec.insert_element(x, vec.get_nr_elem());\n    }\n    return input;\n}\n\nostream&amp; operator&lt;&lt;(ostream&amp; output, const Vector &amp;vec)\n{\n    if (vec.get_nr_elem())\n    {\n        output &lt;&lt; \"Number of elements: \" &lt;&lt; vec.get_nr_elem() &lt;&lt; \"\\n\";\n        output &lt;&lt; \"The elements: \";\n        for (int i = 0; i &lt; vec.get_nr_elem(); i++)\n            output &lt;&lt; vec.get_element(i) &lt;&lt; \" \";\n        output &lt;&lt; \"\\n\";\n    }\n    else\n    {\n        output &lt;&lt; \"The vector has no elements\";\n    }\n    return output;\n}\n\nVector Vector::operator=(const Vector&amp; vec)\n{\n    if (this == &amp;vec)\n        return *this;\n    delete[] arr;\n    arr = new int[vec.nr_elem];\n    for (int i = 0; i &lt; vec.nr_elem; i++)\n        arr[i] = vec.arr[i];\n    nr_elem = vec.nr_elem;\n    return *this;\n}\n\nclass Natural_Big_Number \n{\npublic:\n    void set_sign(char c) { sign = c; }\n    char get_sign() const { return sign; }\n    friend istream&amp; operator&gt;&gt;(istream&amp; input, Natural_Big_Number &amp;number);\n    friend ostream&amp; operator&lt;&lt;(ostream&amp; output, const Natural_Big_Number &amp;number);\n    friend Natural_Big_Number operator+(const Natural_Big_Number&amp; number1, const Natural_Big_Number&amp; number2);\n    friend Natural_Big_Number operator-(const Natural_Big_Number&amp; number1, const Natural_Big_Number&amp; number2);\n    friend Natural_Big_Number&amp; operator*(const Natural_Big_Number&amp; number1, const Natural_Big_Number&amp; number2);\n    friend Natural_Big_Number&amp; operator/(const Natural_Big_Number&amp; number1, const Natural_Big_Number&amp; number2);\n    Natural_Big_Number operator=(const Natural_Big_Number&amp; number);\n\nprivate:\n    Vector vec;\n    char sign;\n};\n\nistream&amp; operator&gt;&gt;(istream&amp; input, Natural_Big_Number &amp;number)\n{\n    int x;\n    input &gt;&gt; x;\n    char c;\n    input.get();\n    c = input.get();\n    if (c == '-')\n        number.set_sign('-');\n    else\n    {\n        number.set_sign('+');\n        int digit = (int)c - 48;\n        number.vec.insert_element(digit, number.vec.get_nr_elem());\n    }\n    while ((c = input.get()) &gt;= '0' &amp;&amp; c &lt;= '9')\n    {\n        int digit = (int)c - 48;\n        number.vec.insert_element(digit, number.vec.get_nr_elem());\n    }\n    return input;\n}\n\nostream&amp; operator&lt;&lt;(ostream&amp; output, const Natural_Big_Number &amp;number)\n{\n    cout &lt;&lt; \"Number of digits: \" &lt;&lt; number.vec.get_nr_elem() &lt;&lt; '\\n';\n    cout &lt;&lt; \"The number: \";\n    if (number.get_sign() == '-')\n        cout &lt;&lt; number.get_sign();\n    for (int i = 0; i &lt; number.vec.get_nr_elem(); i++)\n        cout &lt;&lt; number.vec.get_element(i);\n    cout &lt;&lt; endl;\n    return output;\n}\n\nNatural_Big_Number operator+(const Natural_Big_Number&amp; number1, const Natural_Big_Number&amp; number2)\n{\n    Natural_Big_Number result;\n    int carry = 0;\n    int it_digits1 = number1.vec.get_nr_elem() - 1;\n    int it_digits2 = number2.vec.get_nr_elem() - 1;\n    if (number1.get_sign() == number2.get_sign())\n    {\n        result.set_sign(number1.get_sign());\n        while (it_digits1 &gt;= 0 &amp;&amp; it_digits2 &gt;= 0)\n        {\n            int aux = number1.vec.get_element(it_digits1) + number2.vec.get_element(it_digits2) + carry;\n            int value = aux % 10;\n            result.vec.insert_element(value, 0);\n            carry = aux / 10;\n            it_digits1--;\n            it_digits2--;\n        }\n        for (int i = 0; i &lt;= it_digits1; i++)\n        {\n            int aux = number1.vec.get_element(it_digits1) + carry;\n            int value = aux % 10;\n            carry = aux / 10;\n            result.vec.insert_element(value, 0);\n        }\n        for (int i = 0; i &lt;= it_digits2; i++)\n        {\n            int aux = number2.vec.get_element(it_digits2) + carry;\n            int value = aux % 10;\n            carry = aux / 10;\n            result.vec.insert_element(value, 0);\n        }\n    }\n    /*else if (number1.get_sign() == '-' &amp;&amp; number2.get_sign() == '+')\n    {\n        result = number1;\n        result.set_sign('+');\n        result = number2 + result;\n    }*/\n    cout &lt;&lt; result;\n    return result;\n}\n\nNatural_Big_Number operator-(const Natural_Big_Number&amp; number1, const Natural_Big_Number&amp; number2)\n{\n    Natural_Big_Number result;\n    int carry = 0;\n    int it_digits1 = number1.vec.get_nr_elem() - 1;\n    int it_digits2 = number2.vec.get_nr_elem() - 1;\n    while (it_digits1 &gt;= 0 &amp;&amp; it_digits2 &gt;= 0)\n    {\n        int aux = number1.vec.get_element(it_digits1) - number2.vec.get_element(it_digits2) + carry;\n        int value = aux % 10;\n        result.vec.insert_element(value, 0);\n        carry = aux / 10;\n        it_digits1--;\n        it_digits2--;\n    }\n    for (int i = 0; i &lt;= it_digits1; i++)\n    {\n        int aux = number1.vec.get_element(it_digits1) + carry;\n        int value = aux % 10;\n        carry = aux / 10;\n        result.vec.insert_element(value, 0);\n    }\n    for (int i = 0; i &lt;= it_digits2; i++)\n    {\n        int aux = number2.vec.get_element(it_digits2) + carry;\n        int value = aux % 10;\n        carry = aux / 10;\n        result.vec.insert_element(value, 0);\n    }\n    cout &lt;&lt; result;\n    return result;\n}\n\nNatural_Big_Number Natural_Big_Number::operator=(const Natural_Big_Number&amp; number)\n{\n    if (this == &amp;number)\n        return *this;\n    vec.free_memory();\n    set_sign(number.get_sign());\n    vec = number.vec;\n    return *this;\n}\n\nint main()\n{\n    ifstream f(\"date.in\");\n    Natural_Big_Number number1, number2;\n    f &gt;&gt; number1 &gt;&gt; number2;\n    number1 = number2;\n    cout &lt;&lt; number1;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "ssl", "https", "boost-asio", "boost-beast"], "answers": [{"comments": [{"owner": {"reputation": 1083, "user_id": 170203, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4cf304bf79519b1d66382fab900e75df?s=128&d=identicon&r=PG", "display_name": "B.S.", "link": "https://stackoverflow.com/users/170203/b-s"}, "edited": false, "score": 0, "creation_date": 1554359505, "post_id": 55503509, "comment_id": 97723710, "body": "Thanks for your reply. However, it does not explain why the code above does not work as intended. I want the server to reject all HTTPS communications and continue processing the HTTP communications. My expectation is that <code>read</code> throws and the exception is caught, the socket is closed, and the browser gets a &quot;conencted reset by peer&quot; error messages. The HTTP request afterwards should be processed as expected. Unfortunately, this is not the case. Once a single HTTPS request was done, the server is in a bad state and <code>read</code> will throw bad request exceptions until the server is restarted."}], "tags": [], "owner": {"reputation": 12010, "user_id": 23235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6281820b28d03f98e85bb3d901ae3f39?s=128&d=identicon&r=PG", "display_name": "Shane Powell", "link": "https://stackoverflow.com/users/23235/shane-powell"}, "is_accepted": true, "score": 1, "last_activity_date": 1554395247, "last_edit_date": 1554395247, "creation_date": 1554322176, "answer_id": 55503509, "question_id": 55499262, "link": "https://stackoverflow.com/questions/55499262/why-does-this-c-asio-beast-server-go-into-a-bad-state-when-a-https-ssl-reques/55503509#55503509", "title": "Why does this C++ ASIO, BEAST server go into a bad state when a HTTPS/SSL request is performed", "body": "<p>HTTPS is HTTP over a SSL stream.  A SSL stream is implemented over a normal TCP socket.  Beast is throwing in the \"Read\" because it's not seeing a HTTP request, it's just seen what looks like random binary data.  It doesn't know (and doesn't detect that it's a SSL stream).</p>\n\n<p>The reason you are seeing so many \"BAD\" lines is because Firefox is seeing a TLS stream trying to connect then failing.  It's just retrying the SSL stream connection.  So you end up multiple BAD connection lines.</p>\n\n<p>This is why the default HTTP port is 80 and the default HTTPS port is 443.  A HTTPS client connection to a HTTP server will never work and will produce the types of results you are seeing.</p>\n\n<p>UPDATE:\nThe reason you get into a loop of BAD is because the request_buffer is not being cleared on errors, so it contains the first SSL connection of data which keeps getting appended to with each reading of data from new sockets.</p>\n\n<p>The easiest fix is to move the defining of the request_buffer to the same place as the request object.  Or you can <a href=\"https://www.boost.org/doc/libs/1_69_0/libs/beast/doc/html/beast/ref/boost__beast__basic_flat_buffer/consume.html\" rel=\"nofollow noreferrer\">consume</a> the unprocessed data before you loop back around.</p>\n"}], "owner": {"reputation": 1083, "user_id": 170203, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4cf304bf79519b1d66382fab900e75df?s=128&d=identicon&r=PG", "display_name": "B.S.", "link": "https://stackoverflow.com/users/170203/b-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 0, "accepted_answer_id": 55503509, "answer_count": 1, "score": 2, "last_activity_date": 1554395247, "creation_date": 1554306519, "question_id": 55499262, "link": "https://stackoverflow.com/questions/55499262/why-does-this-c-asio-beast-server-go-into-a-bad-state-when-a-https-ssl-reques", "title": "Why does this C++ ASIO, BEAST server go into a bad state when a HTTPS/SSL request is performed", "body": "<p>I want to write a server that answers HTTP requests. I do not care about HTTPS. If somebody performs a HTTPS request I want to reject the request and continue with other HTTP requests. My code looks as follows:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;boost/asio.hpp&gt;\n#include &lt;boost/beast/core.hpp&gt;\n#include &lt;boost/beast/http.hpp&gt;\n#include &lt;boost/beast/version.hpp&gt;\n#include &lt;thread&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main(){\n    boost::asio::io_context ioc;\n    boost::asio::ip::tcp::acceptor acceptor(ioc, boost::asio::ip::tcp::endpoint(boost::asio::ip::tcp::v6(), 8000));\n    boost::beast::flat_buffer request_buffer;\n    for(;;){\n        boost::asio::ip::tcp::socket socket(ioc);\n        acceptor.accept(socket);\n\n        boost::beast::http::request&lt;boost::beast::http::string_body&gt; request;\n        try{\n            boost::beast::http::read(socket, request_buffer, request);\n            cout &lt;&lt; \"OK\" &lt;&lt; endl;\n\n            boost::beast::http::response&lt;boost::beast::http::string_body&gt; response(boost::beast::http::status::ok, request.version());\n            std::string body = \"hello\";\n            response.content_length(body.size());\n            response.body() = std::move(body);\n            boost::beast::http::write(socket, response);\n\n        }catch(...){\n            cout &lt;&lt; \"BAD\" &lt;&lt; endl;\n        }\n        socket.close();\n    }\n}\n</code></pre>\n\n<p>I run the code and perform in the following order requests using Firefox:</p>\n\n<ol>\n<li>a http request</li>\n<li>a https request</li>\n<li>a http request</li>\n</ol>\n\n<p>I expect the following server output:</p>\n\n<pre><code>OK\nBAD\nOK\n</code></pre>\n\n<p>However, what I get is:</p>\n\n<pre><code>OK\nBAD\nBAD\nBAD\nBAD\nBAD\nBAD\nBAD\nBAD\nBAD\nBAD\nBAD\nBAD\n</code></pre>\n\n<p>The function that throws is <code>boost::beast::http::read</code>. However, I do not understand why. Between calls I create a new socket object and therefore my understanding is that the result of the second request should not impact the third. However, obviously my understanding is not correct. Can somebody please explain where my understanding of how ASIO and/or BEAST works is wrong. Thanks :)</p>\n"}, {"tags": ["c++", "matrix", "glm-math"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1554306302, "post_id": 55499135, "comment_id": 97705270, "body": "What is <code>VECTOR3</code>? GLM has no such type. Also: &quot;<i>the problem is that i can&#39;t extract the rotation of the camera from my view matrix yet</i>&quot; Why do you need to? Didn&#39;t you create the view matrix <i>using</i> the &quot;rotation of the camera&quot;?"}, {"owner": {"reputation": 1, "user_id": 11304617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e0ad7637ee2f89953f4cc2992df0a9d?s=128&d=identicon&r=PG&f=1", "display_name": "funk_alux", "link": "https://stackoverflow.com/users/11304617/funk-alux"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1554306956, "post_id": 55499135, "comment_id": 97705678, "body": "Sorry, a VECTOR3 is just a typedef for an glm::vec3, i already edited that.  And yes, i know i build the view matrix with a rotation, but i just don&#39;t know how to create a transform matrix with those 3 vectors or my pitch and yaw independently.  Note: i tried to assign my view matrix to my mesh transform and the result was that the rotation was kind of inverse, maybe the view matrix is inverse to the transform?  thanks."}, {"owner": {"reputation": 1, "user_id": 11304617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e0ad7637ee2f89953f4cc2992df0a9d?s=128&d=identicon&r=PG&f=1", "display_name": "funk_alux", "link": "https://stackoverflow.com/users/11304617/funk-alux"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1554307295, "post_id": 55499135, "comment_id": 97705852, "body": "yup, i know, that code is not the problem, i meant glm::vec3, i just did a typedef for the glm vec3"}, {"owner": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "edited": false, "score": 0, "creation_date": 1554309417, "post_id": 55499135, "comment_id": 97706955, "body": "If you try to rotate the &#39;camera&#39; clockwise, objects will appear to move counter clockwise. Draw a square on a piece of paper, look at it, then tilt your head right. Which way did it appear to &#39;move&#39;? Is there a reason you are performing the trig yourself instead of using glm::rotate?"}], "answers": [{"tags": [], "owner": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "is_accepted": false, "score": 0, "last_activity_date": 1554310710, "creation_date": 1554310710, "answer_id": 55500485, "question_id": 55499135, "link": "https://stackoverflow.com/questions/55499135/is-there-any-way-to-extract-a-transform-matrix-from-a-view-matrix-in-glm/55500485#55500485", "title": "Is there any way to extract a transform matrix from a view matrix in glm?", "body": "<p>The steps to setting up the model view projection matrix, that I have always followed (which doesn't mean it's 100% right), which appears to be what you are having problems with is:</p>\n\n<pre><code>// Eye position is in world coordinate system, as is scene_center. up_vector is normalized.\nglm::dmat4 view = glm::lookat(eye_position, scene_center, up_vector);\nglm::dmat4 proj = glm::perspective(field_of_view, aspect, near_x, far_x);\n\n// This converts the model from it's units, to the units of the world coordinate system\nglm::dmat4 model = glm::scale(glm::dmat4(1.0), glm::dvec3(1.0, 1.0, 1.0));\n// Add model level rotations here utilizing glm::rotate\n\n// offset is where the objects 0,0 should be mapped to in the world coordinate system\nmodel = glm::translate(model, offset);\n// Order of course matters here. \nglm::dvec3 mvp = proj * view * model; \n</code></pre>\n\n<p>Hope that helps.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11304617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e0ad7637ee2f89953f4cc2992df0a9d?s=128&d=identicon&r=PG&f=1", "display_name": "funk_alux", "link": "https://stackoverflow.com/users/11304617/funk-alux"}, "is_accepted": true, "score": 0, "last_activity_date": 1554430777, "last_edit_date": 1554430777, "creation_date": 1554344762, "answer_id": 55506954, "question_id": 55499135, "link": "https://stackoverflow.com/questions/55499135/is-there-any-way-to-extract-a-transform-matrix-from-a-view-matrix-in-glm/55506954#55506954", "title": "Is there any way to extract a transform matrix from a view matrix in glm?", "body": "<p>Thank you so much for your answers, they helped a lot.</p>\n\n<p>I managed to solve my problem in a very simple way, i just had to directly assign the final transform to my mesh using the separate properties of my camera.</p>\n\n<p>glm is so new to me, i wasn't familiar with the way it handles matrix multiplications.</p>\n\n<p>The final code takes a translation matrix with the camera position, then i rotated the resulting matrix in the Y axis with my pitch and finaly the resulting one rotates in the X axis with my yaw.</p>\n\n<pre><code>m_mesh.m_transform = glm::rotate(glm::rotate(glm::translate(glm::mat4(1.0f), camera.m_position), glm::radians(-camera.m_yaw), glm::vec3(0.0f, 1.0f, 0.0f)), glm::radians(-camera.m_pitch), glm::vec3(1.0f, 0.0f, 0.0f));\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11304617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e0ad7637ee2f89953f4cc2992df0a9d?s=128&d=identicon&r=PG&f=1", "display_name": "funk_alux", "link": "https://stackoverflow.com/users/11304617/funk-alux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 294, "favorite_count": 0, "accepted_answer_id": 55506954, "answer_count": 2, "score": 0, "last_activity_date": 1554430777, "creation_date": 1554306096, "last_edit_date": 1554313446, "question_id": 55499135, "link": "https://stackoverflow.com/questions/55499135/is-there-any-way-to-extract-a-transform-matrix-from-a-view-matrix-in-glm", "title": "Is there any way to extract a transform matrix from a view matrix in glm?", "body": "<p>I need to extract the transform matrix from my camera to assign it to a mesh.</p>\n\n<p>I'm working in a computational graphics project in school, the objective is to simulate the arms of a character in first person perspective.</p>\n\n<p>My camera implementation includes a vector3 for the camera position, so i can assign that to my mesh, the problem is that i can't extract the rotation of the camera from my view matrix yet.</p>\n\n<p>I calculate my final pitch and yaw in the rotation function this way, x and y are the current mouse position in the screen</p>\n\n<pre><code>m_yaw += (x - m_mouseLastPosition.x) * m_rotateSpeed;\n\nm_pitch -= (y - m_mouseLastPosition.y) * m_rotateSpeed;\n</code></pre>\n\n<p>This is how i update the view matrix when it changes</p>\n\n<pre><code>glm::vec3 newFront;\n\nnewFront.x = -cos(glm::radians(m_yaw)) * cos(glm::radians(m_pitch));\n\nnewFront.y = sin(glm::radians(m_yaw)) * cos(glm::radians(m_pitch));\n\nnewFront.z = sin(glm::radians(m_pitch));\n\nm_front = glm::normalize(newFront);\n\nm_right = glm::normalize(glm::cross(m_front, m_worldUp));\n\nm_up = glm::normalize(glm::cross(m_right, m_front));\n\nm_viewMatrix = glm::lookAt(m_position, (m_position + m_front), m_up);\n</code></pre>\n\n<p>Right now I can assign the position of the camera to my mesh, like this</p>\n\n<pre><code>m_mesh.m_transform = glm::translate(glm::mat4(1.0f), m_camera.m_position);\n</code></pre>\n\n<p>I can assign the camera position successfully, but not rotation.</p>\n\n<p>What i expect is to assign the full camera <strong>transform</strong> to my mesh, or to extract the <strong>rotation</strong> independently and assign it to the mesh after.</p>\n"}, {"tags": ["c++", "chromium"], "owner": {"reputation": 21, "user_id": 6671703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2962b3d6f0926efce95c60378277c4a?s=128&d=identicon&r=PG&f=1", "display_name": "Krystian Z.", "link": "https://stackoverflow.com/users/6671703/krystian-z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1554306051, "creation_date": 1554306051, "question_id": 55499120, "link": "https://stackoverflow.com/questions/55499120/q-how-to-obtain-in-chromium-frames-hierarchy-referrers-in-browser-process-in", "title": "Q: How to obtain in chromium frames hierarchy (referrers) in browser process in IO thread", "body": "<p>I wonder what's the best way to obtain frames hierarchy (parent urls) for a request handled in browser process in IO thread, in particular in this handler:</p>\n\n<pre><code>int ChromeNetworkDelegate::OnBeforeStartTransaction(\n    net::URLRequest* request,\n    net::CompletionOnceCallback callback,\n    net::HttpRequestHeaders* headers) {...}\n</code></pre>\n\n<p>Important is that the solution cannot be based on HTTP referrer header from the URLRequest/HttpRequestHeaders objects as HTTP referrer value may be empty in some cases.</p>\n\n<p>One potential solution I found is to use WebContents API to build frames hierarchy, but that is not possible because:</p>\n\n<ol>\n<li>WebContents API can be executed only in UI thread of browser process</li>\n<li>chromium does not support blocking calls/messages between threads (in this case from IO thread to UI thread) - this can be hacked but that's not the point.</li>\n</ol>\n\n<p>I wonder if anyone had this problem and what was the solution?</p>\n"}, {"tags": ["python", "c++", "python-3.x"], "comments": [{"owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "edited": false, "score": 1, "creation_date": 1554307315, "post_id": 55499080, "comment_id": 97705861, "body": "Did you try <code>python::self</code>? (Also should be <code>python::self + python::self</code>)"}, {"owner": {"reputation": 810, "user_id": 6758890, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/230924dab4bae855003750ae34a3978a?s=128&d=identicon&r=PG&f=1", "display_name": "PintoDoido", "link": "https://stackoverflow.com/users/6758890/pintodoido"}, "reply_to_user": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "edited": false, "score": 0, "creation_date": 1554307510, "post_id": 55499080, "comment_id": 97705959, "body": "Thanks! That worked!"}], "owner": {"reputation": 810, "user_id": 6758890, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/230924dab4bae855003750ae34a3978a?s=128&d=identicon&r=PG&f=1", "display_name": "PintoDoido", "link": "https://stackoverflow.com/users/6758890/pintodoido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554305918, "creation_date": 1554305918, "question_id": 55499080, "link": "https://stackoverflow.com/questions/55499080/boost-python-problem-wrapping-c-overloaded-operator", "title": "Boost.Python - problem wrapping C++ overloaded operator", "body": "<p>Using Boost.Python, I am trying to wrap a operator overload method \"+\".</p>\n\n<p>I have got the following class from <a href=\"https://www.tutorialspoint.com/cplusplus/cpp_overloading.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/cplusplus/cpp_overloading.htm</a>:</p>\n\n<pre><code> class Box {\n   public:\n      double getVolume(void) {\n         return length * breadth * height;\n      }\n      void setLength( double len ) {\n         length = len;\n      }\n      void setBreadth( double bre ) {\n         breadth = bre;\n      }\n      void setHeight( double hei ) {\n         height = hei;\n      }\n\n      Box operator+(const Box&amp; b) {\n         Box box;\n         box.length = this-&gt;length + b.length;\n         box.breadth = this-&gt;breadth + b.breadth;\n         box.height = this-&gt;height + b.height;\n         return box;\n      }\n\n\n   private:\n      double length;      // Length of a box\n      double breadth;     // Breadth of a box\n      double height;      // Height of a box\n};\n</code></pre>\n\n<p>However, when I try to wrap the overloaded operator using the following:</p>\n\n<pre><code>BOOST_PYTHON_MODULE(test)\n{\n  namespace python = boost::python;\n\n\n  python::class_&lt;Box&gt;(\"Box\")  \n    .def(\"setLength\",  &amp;Box::setLength )\n    .def(\"setBreadth\", &amp;Box::setBreadth)\n    .def(\"setHeight\",  &amp;Box::setHeight )\n    .def(\"getVolume\",  &amp;Box::getVolume )\n    .def(self + Box()); \n\n}\n</code></pre>\n\n<p>I get this error:</p>\n\n<p><strong>test.cpp:47:10: error: \u2018self\u2019 was not declared in this scope\n     .def(self + Box());</strong></p>\n\n<p>According to <a href=\"https://www.boost.org/doc/libs/1_40_0/libs/python/doc/tutorial/doc/html/python/exposing.html#python.class_operators_special_functions\" rel=\"nofollow noreferrer\">https://www.boost.org/doc/libs/1_40_0/libs/python/doc/tutorial/doc/html/python/exposing.html#python.class_operators_special_functions</a> I cannot find what I am doing wrong.</p>\n\n<p>Any suggestions?</p>\n\n<p>Thanks!</p>\n\n<p>OS: Fedora 29 - 64 bit.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "edited": false, "score": 0, "creation_date": 1554311166, "post_id": 55499050, "comment_id": 97707849, "body": "Looks like an embedded (micro con) system. There are many trickeries involved. Full definition of serial class is needed. Whether or not the serial instances are placed at memory mapped io ports, is of great relevance. Otherwise, any answer would be misleading. Plz mention your platform(hardware+toolchain) before anything else."}], "answers": [{"comments": [{"owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "edited": false, "score": 0, "creation_date": 1554306940, "post_id": 55499124, "comment_id": 97705674, "body": "Why do you think it is pre-C++11? I am using C++11. I believe you mean the serial class definition is pre 11?"}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "edited": false, "score": 0, "creation_date": 1554307199, "post_id": 55499124, "comment_id": 97705807, "body": "@Edmund It was just a guess from the fact that you did not mention move constructors and that the <code>Serial</code> class doesn&#39;t use <code>= delete</code> to disable the copy constructor."}, {"owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "edited": false, "score": 0, "creation_date": 1554326613, "post_id": 55499124, "comment_id": 97715056, "body": "but if I would use std::move, how is it going to affect the serial port communication? As the first (original) serial object will become rvalue"}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "edited": false, "score": 0, "creation_date": 1554400590, "post_id": 55499124, "comment_id": 97748779, "body": "The object needs to support move semantics. The actual serial communication should not be affected at all if done properly. What would happen is that the <code>Serial</code> object is now owned by you, and the original one is empty (you &quot;consumed&quot; it). In the end, you need to decide who owns the object, or maybe you really need shared ownership (e.g. <code>std::shared_ptr</code>), but that is rare."}], "tags": [], "owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "is_accepted": true, "score": 0, "last_activity_date": 1554306079, "creation_date": 1554306079, "answer_id": 55499124, "question_id": 55499050, "link": "https://stackoverflow.com/questions/55499050/having-class-object-inside-the-class/55499124#55499124", "title": "Having Class object inside the Class", "body": "<blockquote>\n  <p>how can I copy it</p>\n</blockquote>\n\n<p>You cannot, but you may be able to move it (unlikely, from what you say, this looks like pre-C++11 code).</p>\n\n<blockquote>\n  <p>or may be other approach?</p>\n</blockquote>\n\n<p>Either don't copy (for instance, keep a pointer or reference to it), or construct a new <code>serial</code> object, or instead of copying it, pass it by reference/pointer to the methods that need it.</p>\n"}, {"comments": [{"owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "edited": false, "score": 0, "creation_date": 1554306326, "post_id": 55499159, "comment_id": 97705288, "body": "And how can I be sure to dereference UART object before destroying Serial object? Shall I call the destructor manually inside my code when I will be done with the UART class?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "edited": false, "score": 0, "creation_date": 1554307245, "post_id": 55499159, "comment_id": 97705834, "body": "@Edmund Why do think, you need to destroy it, when it&#39;s a reference to an object?"}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "edited": false, "score": 0, "creation_date": 1554307268, "post_id": 55499159, "comment_id": 97705845, "body": "@Edmund If you are not the owner, you mustn&#39;t destroy it."}, {"owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1554307575, "post_id": 55499159, "comment_id": 97705985, "body": "@AlgirdasPreid\u017eius How else can I ensure to free the pointer from the memory before destroying the object that the pointer if referencing to?"}, {"owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "reply_to_user": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "edited": false, "score": 0, "creation_date": 1554307605, "post_id": 55499159, "comment_id": 97706007, "body": "@Acorn What I mean is to free the pointer which is referencing to the object, not the object itself"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "edited": false, "score": 0, "creation_date": 1554307827, "post_id": 55499159, "comment_id": 97706136, "body": "@Edmund I am sorry, but, what? Free which pointer? You don&#39;t do anything, for the same reason, as you don&#39;t call <code>delete</code> in <code>pi</code> in following code snippet: <code>int i = 5; int* pi = &amp;i;</code>, or don&#39;t need to do any explicit cleaning in <code>int i = 5; int&amp; ri = i;</code>."}, {"owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1554308428, "post_id": 55499159, "comment_id": 97706465, "body": "@AlgirdasPreid\u017eius So the C++ smart enough to clean up everything itself? But that is the case only when both pointer and the variable in the same program. What happens when the variable is being started by a different main and finishes before the main with the pointer finishes? Then I guess it won&#39;t clean up ."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "edited": false, "score": 0, "creation_date": 1554308962, "post_id": 55499159, "comment_id": 97706744, "body": "@Edmund 1) It&#39;s not that it cleans everything by itself. It cleans up variables allocated with automatic/static/thread storage location. Only variables with dynamic storage duration need to be deallocated manually. 2) &quot;<i>What happens when the variable is being started by a different main</i>&quot; What do you mean by this? There can only be a single <code>main</code> in a single program. 3) Consider learning C++ from a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>, since your questions seem to be devolving into questions about C++ fundamentals."}, {"owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1554319924, "post_id": 55499159, "comment_id": 97712093, "body": "@AlgirdasPreid\u017eius I do know fundamentals and it seems to me that you are having trouble to understand the problem. Two mains means two programs executed at two different CPP files. So you are not correct saying that you do not have to deallocate memory as it will lead to memory leak"}, {"owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1554320017, "post_id": 55499159, "comment_id": 97712144, "body": "@AlgirdasPreid\u017eius If you point a pointer to an object which has been initialized in a different CPP file and that object will be destroyed earlier (because that CPP file ended earlier) your pointer which has been initalized in a different file (meaning in a different main) will then have UB."}, {"owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1554320615, "post_id": 55499159, "comment_id": 97712452, "body": "@AlgirdasPreid\u017eius Pardon me, when I say deallocate the pointer I mean to reference the pointer to something else before the object (which the pointer points to) is being destroyed. Of course you cannot deallocate (destroy) pointer in stack."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "edited": false, "score": 0, "creation_date": 1554322479, "post_id": 55499159, "comment_id": 97713387, "body": "@Edmund Your comments seem to contradict the notion of you knowing fundamentals. There&#39;s no such thing, as cpp file ending earlier,  than another, due to the fact, that compiled program does not preserve such information. Yes, you can link two (or more) object files together, compiled from multiple .cpp files together, but the entire application can only contain one <code>main</code> function. Execution of which starts by entry of the <code>main</code> function, and terminates, typically, by exit of it. What you do inside the <code>main</code> is what the program does, which typically includes calls to other functions."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "edited": false, "score": 0, "creation_date": 1554322502, "post_id": 55499159, "comment_id": 97713403, "body": "@Edmund Because I need to explain how is C++ program executed, it is clear that you don&#39;t have a grasp on the fundamentals. Since this topic, is, typically, explained in the first chapter of a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>. Because of that, I will not reply to any of your further comments."}, {"owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1554322604, "post_id": 55499159, "comment_id": 97713450, "body": "@AlgirdasPreid\u017eius I think you are just grabbing the words instead of replying to the question. You are again referring to main as the actual main in the CPP file. Without making sure that the pointer points to a different object before the previous object is being destroyed, it will be UD. Period."}, {"owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1554322667, "post_id": 55499159, "comment_id": 97713485, "body": "@AlgirdasPreid\u017eius So I think your lack of knowledge in C++ makes you just explaning the basic concepts even though there is no problem related to it."}], "tags": [], "owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "is_accepted": false, "score": 0, "last_activity_date": 1554306167, "creation_date": 1554306167, "answer_id": 55499159, "question_id": 55499050, "link": "https://stackoverflow.com/questions/55499050/having-class-object-inside-the-class/55499159#55499159", "title": "Having Class object inside the Class", "body": "<p>Presumably, the <code>Serial</code> class disables copying because it represents a physical device; copying the object would break communication to the device because the copy would not know the state of the original object.</p>\n\n<p>If <code>UART</code> should own the <code>Serial</code> object, you can probably <code>std::move</code> it into the <code>UART</code> constructor.  Otherwise, you probably want to just hold a pointer or reference to the <code>Serial</code> object.</p>\n\n<pre><code>class UART\n{\nprivate:\n    serial::Serial&amp; _serial;\npublic:\n    UART(serial::Serial&amp; serial_port) : _serial(serial_port) {};\n    // etc.\n};\n</code></pre>\n\n<p>Be aware of object lifetimes; if your <code>UART</code> object outlives your <code>Serial</code> reference, then dereferencing the destroyed object will lead to Undefined Behavior.</p>\n"}], "owner": {"reputation": 859, "user_id": 10280636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76cf49e7821c17ee227e4d07e7ee5076?s=128&d=identicon&r=PG&f=1", "display_name": "aikhs", "link": "https://stackoverflow.com/users/10280636/aikhs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 55499124, "answer_count": 2, "score": 1, "last_activity_date": 1554306167, "creation_date": 1554305832, "question_id": 55499050, "link": "https://stackoverflow.com/questions/55499050/having-class-object-inside-the-class", "title": "Having Class object inside the Class", "body": "<p>How to properly use a class object (<code>serial</code>) inside my class (<code>UART</code>) object? </p>\n\n<p>The class object that I want to copy has its copy constructor declared in \"Private\" and my compiler says:</p>\n\n<pre><code>\u2018serial::Serial::Serial(const serial::Serial&amp;)\u2019 is private within this context\n     UART::UART(const serial::Serial&amp; serial_port) : _serial(serial_port), _letter(\" \") {}\n\n</code></pre>\n\n<p>And the definition of</p>\n\n<pre><code>serial::Serial::Serial(const serial::Serial&amp;)\n</code></pre>\n\n<p>is:</p>\n\n<pre><code>private:\n  // Disable copy constructors\n  Serial(const Serial&amp;);\n</code></pre>\n\n<p>This is my class header file:</p>\n\n<pre><code> class UART\n    {\n    private:\n        serial::Serial _serial;\n    public:\n        UART(const serial::Serial&amp; serial_port) : _serial(serial_port) {};\n        ~UART();\n        bool read(std::string &amp;data);\n        bool write(std::string &amp;data);\n    };\n</code></pre>\n\n<p>As you can see, I have declared a class object called <code>_serial</code> and I just want to use this object inside <code>UART</code> class and I usually do this by copy construction method (passing <code>serial</code> object to the construction of <code>UART</code> and copy it)</p>\n\n<p>So if the <code>serial</code> class does not allow a copy constructor (because it has been declared in the private section) how can I copy it (or may be other approach?) and use this object inside my <code>UART</code> class?</p>\n"}, {"tags": ["c++", "windows"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1554305652, "post_id": 55498950, "comment_id": 97704859, "body": "What about just calling <a href=\"https://en.cppreference.com/w/cpp/utility/program/exit\" rel=\"nofollow noreferrer\"><code>std::exit</code></a> or <a href=\"https://en.cppreference.com/w/cpp/error/terminate\" rel=\"nofollow noreferrer\"><code>std::terminate</code></a>?"}, {"owner": {"reputation": 706, "user_id": 3320702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7c9b7ac64b2b4313d0dccbc7a9c57ca?s=128&d=identicon&r=PG&f=1", "display_name": "MrPromethee", "link": "https://stackoverflow.com/users/3320702/mrpromethee"}, "edited": false, "score": 0, "creation_date": 1554305906, "post_id": 55498950, "comment_id": 97705019, "body": "I think this might be what you are looking for: <a href=\"https://stackoverflow.com/questions/2686096/c-get-username-from-process\" title=\"c get username from process\">stackoverflow.com/questions/2686096/c-get-username-from-proc&zwnj;&#8203;ess</a>. You can check the user before terminating the process."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1554306334, "post_id": 55498950, "comment_id": 97705295, "body": "<code>return</code> from <code>main()</code>."}, {"owner": {"reputation": 33220, "user_id": 150771, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/667e49c4a110469bdaa09e263b690344?s=128&d=identicon&r=PG", "display_name": "Chris Thompson", "link": "https://stackoverflow.com/users/150771/chris-thompson"}, "edited": false, "score": 1, "creation_date": 1554306513, "post_id": 55498950, "comment_id": 97705417, "body": "I suspect this question is not programming and would be a better fit for superuser.com"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 3, "creation_date": 1554307059, "post_id": 55498950, "comment_id": 97705737, "body": "Judging from the comments, you should probably clarify that you want to kill <code>xx.exe</code> from another process, not from within itself."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1554330553, "post_id": 55498950, "comment_id": 97716362, "body": "If it&#39;s your &quot;xx.exe&quot; process, as in spawned by your process, then you should have an all-access handle for it, as returned by <code>CreateProcessW</code> or <code>ShellExecuteExW</code> (with the flag <code>SEE_MASK_NOCLOSEPROCESS</code>). You can terminate it forcefully via <code>TerminateProcess</code>. Or you can get its process ID via <code>GetProcessId</code>; enumerate top-level windows via <code>EnumWindows</code>; send <code>WM_CLOSE</code> to all of its windows as determined by <code>GetWindowThreadProcessId</code>; wait on the handle via <code>WaitForSingleObject</code> for a few seconds in order for it to exit on its own; and then terminate it if it&#39;s still running."}], "owner": {"reputation": 162, "user_id": 10039118, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tpxi00vso58/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qBaNEndECUOMxeGqgX2WpVfpHBqQ/mo/photo.jpg?sz=128", "display_name": "lll", "link": "https://stackoverflow.com/users/10039118/lll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554305923, "creation_date": 1554305520, "last_edit_date": 1554305923, "question_id": 55498950, "link": "https://stackoverflow.com/questions/55498950/how-to-kill-my-own-process-without-killing-same-process-of-another-user", "title": "How to kill my own process without killing same process of another user", "body": "<p>Working Environment: Windows, C++</p>\n\n<p>I am running <code>xx.exe</code>, and another user(user B) is running <code>xx.exe</code> at the same time. I want to kill my own <code>xx.exe</code> process programatically. When I used <code>TIhelp32.h</code> functions to kill <code>xx.exe</code>, it also kills user B's <code>xx.exe</code> too. </p>\n\n<p>I do not have an admin's privileges. How can I kill my own process programatically?</p>\n"}, {"tags": ["c++", "serial-port", "c++98", "mbed"], "answers": [{"tags": [], "owner": {"reputation": 24757, "user_id": 107642, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/672b033bf66f18d40cff3278f12f8f90?s=128&d=identicon&r=PG", "display_name": "Jan Jongboom", "link": "https://stackoverflow.com/users/107642/jan-jongboom"}, "is_accepted": false, "score": 0, "last_activity_date": 1554370608, "creation_date": 1554370608, "answer_id": 55512592, "question_id": 55498820, "link": "https://stackoverflow.com/questions/55498820/storing-an-array-of-chars-in-a-queue/55512592#55512592", "title": "Storing an array of chars in a queue?", "body": "<p>A vector of vectors would indeed be an option, but I think a fundamental problem would be that you'd expect the full command to be ready when a serial interrupt happens. This is not guaranteed.</p>\n\n<p>Another way would be to use <a href=\"https://os.mbed.com/users/sam_grove/code/BufferedSerial/\" rel=\"nofollow noreferrer\">BufferedSerial</a> and use a separator (e.g. <code>\\n</code>) between commands. Then just split the buffer by the separator character. Downside is that you need to poll, but would be straightforward to patch a callback into the library.</p>\n"}], "owner": {"reputation": 369, "user_id": 11056439, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-g3tlsyx5lws/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPhBsyz7HoFGIxxeXVFJsyiV-BZPw/mo/photo.jpg?sz=128", "display_name": "Tryb Ghost", "link": "https://stackoverflow.com/users/11056439/tryb-ghost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1572726234, "creation_date": 1554305131, "question_id": 55498820, "link": "https://stackoverflow.com/questions/55498820/storing-an-array-of-chars-in-a-queue", "title": "Storing an array of chars in a queue?", "body": "<p>I'm unable to quite search for what I want, as I am not sure how to address what I want to do, so I am just going to describe it. I think knowledge about mbed isn't really needed, since ill explain that part.</p>\n\n<p>I have an interrupt function in my mbed program, which executes everytime there is input from serial link on pc.</p>\n\n<pre><code>Serial pc(USBTX,USBRX); //makes a serial link with pc\n\nint main() {\n    pc.attach(&amp;newCommand);    //everytime input from pc is detected, this interrupt will make scheduler go to function called 'newCommand'\n\n    //here, fetch one array of chars to work with, the oldest in the queue and analyse the command. If there is none available, wait for one to become available\n}\n\n\nvoid newCommand() {\n    int inputCount = 0;\n    int inputBuff[64];\n    while (pc.readable()) {    //check if there is anything to read\n        if (inputCount  &lt; 64) // check for buffer overflow, maximum 64 ints\n          inputBuff[inputCount] = pc.getc(); \n        else\n          pc.getc();   // ran out of space, just throw the data away.\n        inputCount++;\n    }\n\n    //store this char array (inputBuff) in a sort of queue, with the oldest at the front   \n}\n</code></pre>\n\n<p>What sort of queue would I be looking for? I was thinking that maybe I can have a vector container which is global, which stores those arrays, and then the main program fetches the oldest one, but I am unsure of how to do this?</p>\n\n<p>Edit: I guess I could also do a vector instead of array to store the chars, as in someVect.push_back(pc.getc()). Would that make it easier to store in a vector type queue?</p>\n"}, {"tags": ["c++", "c++11"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1554305188, "post_id": 55498813, "comment_id": 97704576, "body": "<code>s&#47;const&#47;constexpr&#47;</code> ?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1554305254, "post_id": 55498813, "comment_id": 97704612, "body": "Isn&#39;t memory allocation not working for <code>constexpr</code>?"}, {"owner": {"reputation": 16924, "user_id": 1266109, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/034350a4ce4a23ce02a68f6a6e6ddc6b?s=128&d=identicon&r=PG", "display_name": "Rahul Iyer", "link": "https://stackoverflow.com/users/1266109/rahul-iyer"}, "edited": false, "score": 0, "creation_date": 1554305376, "post_id": 55498813, "comment_id": 97704697, "body": "Haha yes, that&#39;s the question I created and mentioned in my question description."}, {"owner": {"reputation": 16924, "user_id": 1266109, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/034350a4ce4a23ce02a68f6a6e6ddc6b?s=128&d=identicon&r=PG", "display_name": "Rahul Iyer", "link": "https://stackoverflow.com/users/1266109/rahul-iyer"}, "edited": false, "score": 0, "creation_date": 1554305512, "post_id": 55498813, "comment_id": 97704782, "body": "Many people have criticised using a struct or a class, and suggested using a namespace. They&#39;ve also shunned using static and suggested using extern instead.  I&#39;m afraid I&#39;m still confused"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1554305603, "post_id": 55498813, "comment_id": 97704824, "body": "struct or namespace, that&#39;s a matter of taste. The <code>extern</code> is just a declaration, requires the namespace, which is the point of the struct, you declare and then implement in a cpp."}, {"owner": {"reputation": 16924, "user_id": 1266109, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/034350a4ce4a23ce02a68f6a6e6ddc6b?s=128&d=identicon&r=PG", "display_name": "Rahul Iyer", "link": "https://stackoverflow.com/users/1266109/rahul-iyer"}, "edited": false, "score": 0, "creation_date": 1554305871, "post_id": 55498813, "comment_id": 97704999, "body": "I thought extern is specifically used for members that are global to any file, but static is global only to the same file or possibly function?"}, {"owner": {"reputation": 16924, "user_id": 1266109, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/034350a4ce4a23ce02a68f6a6e6ddc6b?s=128&d=identicon&r=PG", "display_name": "Rahul Iyer", "link": "https://stackoverflow.com/users/1266109/rahul-iyer"}, "edited": false, "score": 0, "creation_date": 1554305983, "post_id": 55498813, "comment_id": 97705055, "body": "Does this mean that at runtime, regardless of which solution I use extern / static etc, there is always only just one copy of the string in memory, and it is created just once ?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1554306760, "post_id": 55498813, "comment_id": 97705566, "body": "Yes, there is only one version, as you have only one implementation of <code>name</code>. For the header versions, it&#39;s the task of the linker to remove the duplicates."}], "tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": false, "score": 2, "last_activity_date": 1554305194, "last_edit_date": 1554305194, "creation_date": 1554305107, "answer_id": 55498813, "question_id": 55498738, "link": "https://stackoverflow.com/questions/55498738/how-to-share-global-constants-with-minimum-overhead-at-runtime/55498813#55498813", "title": "How to share global constants with minimum overhead at runtime?", "body": "<p>You can have a struct of static strings:</p>\n\n<pre><code>struct MyNames\n{\n    static const std::string name1;\n};\n</code></pre>\n\n<p>And in a cpp:</p>\n\n<pre><code>const std::string MyNames::name1 = \"foo\";\n</code></pre>\n\n<p>You can then access the names from all your required locations. In C++17, you would have used <code>string_view</code> instead to avoid object construction. But this seems to be a duplicate of this answer, basically: <a href=\"https://stackoverflow.com/a/55493109/2266772\">https://stackoverflow.com/a/55493109/2266772</a></p>\n"}, {"comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1554305338, "post_id": 55498882, "comment_id": 97704672, "body": "OP doesn&#39;t have <code>string_view</code>."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1554305409, "post_id": 55498882, "comment_id": 97704715, "body": "The string view is of course optional. It&#39;s just to avoid dynamic allocations in each calls (if the name are really long). <code>char const*</code> also works quite well as function parameter."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1554305487, "post_id": 55498882, "comment_id": 97704763, "body": "If OP uses <code>const std::string&amp;</code> as parameters (as he should, and probably does), you get new objects each time. At least with a static <code>std::string</code>, it&#39;s only once."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1554305689, "post_id": 55498882, "comment_id": 97704878, "body": "@MatthieuBrucher I don&#39;t think <code>std::string const&amp;</code> is the right abstraction OP needs. It&#39;s not a silver buller. Clearly, there is no ownership of memory. Everything is static. OP simply need a reference to the static data, which is what <code>std::string_view</code> and <code>char const*</code> do. Also. backported string views are a thing."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1554305797, "post_id": 55498882, "comment_id": 97704949, "body": "Oh, I agree about <code>string_view</code>, that&#39;s why I mentioned that if he was in C++17, he should have used it."}, {"owner": {"reputation": 16924, "user_id": 1266109, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/034350a4ce4a23ce02a68f6a6e6ddc6b?s=128&d=identicon&r=PG", "display_name": "Rahul Iyer", "link": "https://stackoverflow.com/users/1266109/rahul-iyer"}, "edited": false, "score": 0, "creation_date": 1554306036, "post_id": 55498882, "comment_id": 97705104, "body": "I can&#39;t include any external libraries."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 16924, "user_id": 1266109, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/034350a4ce4a23ce02a68f6a6e6ddc6b?s=128&d=identicon&r=PG", "display_name": "Rahul Iyer", "link": "https://stackoverflow.com/users/1266109/rahul-iyer"}, "edited": false, "score": 1, "creation_date": 1554306145, "post_id": 55498882, "comment_id": 97705166, "body": "@KaizerSozay then rewrite the library as internal code. String view are simple enough. or simply use <code>char const*</code> to avoid dynamic allocations in function calls. Or use <code>std::string</code> as function arguments and keep the name of the event short enough to never incur dynamic allocations."}, {"owner": {"reputation": 16924, "user_id": 1266109, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/034350a4ce4a23ce02a68f6a6e6ddc6b?s=128&d=identicon&r=PG", "display_name": "Rahul Iyer", "link": "https://stackoverflow.com/users/1266109/rahul-iyer"}, "edited": false, "score": 0, "creation_date": 1554306360, "post_id": 55498882, "comment_id": 97705306, "body": "Can you explain why you are using static ? When in Michael Kenzel&#39;s approach below he just uses a plain constexpr ?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1554306565, "post_id": 55498882, "comment_id": 97705450, "body": "I used <code>static</code> only in the class. In namespace scope, I only used plain constexpr. The reason is that non-static datamembers cannot be constexpr, since it would not make sense (imagine an object that part of it&#39;s value is constexpr?). constexpr static data member and plain constexpr in namespace scope is equivalent."}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 8, "last_activity_date": 1554305851, "last_edit_date": 1554305851, "creation_date": 1554305318, "answer_id": 55498882, "question_id": 55498738, "link": "https://stackoverflow.com/questions/55498738/how-to-share-global-constants-with-minimum-overhead-at-runtime/55498882#55498882", "title": "How to share global constants with minimum overhead at runtime?", "body": "<p>The easiest way would be to use a <code>char const*</code> constant, as it's way more optimizable and don't use dynamic allocations.</p>\n\n<p>Also you can use <code>std::string_view</code> in the <code>postEvent</code> function, avoiding dynamic allocations. This step is optional. If you cannot have string views and still want to avoid dynamic allocations, then refer to your implementation's SSO max capacity and keep event names below that size.</p>\n\n<p>Also consider that <code>nonstd::string_view</code> can be shipped as a C++11 library and most likely the abstraction you need. Library such as <a href=\"https://github.com/tcbrindle/cpp17_headers\" rel=\"noreferrer\"><code>cpp17_headers</code></a> and <a href=\"https://github.com/martinmoene/string-view-lite\" rel=\"noreferrer\"><code>string-view-lite</code></a> exist solely for that purpose.</p>\n\n<p>It look like this:</p>\n\n<pre><code>constexpr auto event_name1 = \"event_name1\";\n</code></pre>\n\n<p>In a class as a static member it works the same way:</p>\n\n<pre><code>struct Type {\n    static constexpr auto event_name1 = \"event_name1\";\n};\n</code></pre>\n\n<p>This will at most take space in the read-only static data of your executable.</p>\n"}, {"tags": [], "owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "is_accepted": false, "score": 3, "last_activity_date": 1554305661, "creation_date": 1554305661, "answer_id": 55498995, "question_id": 55498738, "link": "https://stackoverflow.com/questions/55498738/how-to-share-global-constants-with-minimum-overhead-at-runtime/55498995#55498995", "title": "How to share global constants with minimum overhead at runtime?", "body": "<p>Global <code>const std::string</code> has one drawback it need processing during startup and creates copy of string literal.</p>\n\n<p>The linked SO answear uses <code>constexpr std::string_view</code> and this is cool solution since constructor is <code>constexpr</code> so nothing have to be done on startup. Also it doesn't create any copy. Problem is that this is C++17</p>\n\n<p>Use of <code>const char []</code> (or <code>auto</code> or <code>constexpr</code>) is old proven solution. You can compare <code>std::string</code> with it without any extra overhead.</p>\n\n<p>You can create header file for all that strings and let linker to remove all duplicates. It was working like that in old C++.</p>\n"}, {"comments": [{"owner": {"reputation": 16924, "user_id": 1266109, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/034350a4ce4a23ce02a68f6a6e6ddc6b?s=128&d=identicon&r=PG", "display_name": "Rahul Iyer", "link": "https://stackoverflow.com/users/1266109/rahul-iyer"}, "edited": false, "score": 0, "creation_date": 1554306119, "post_id": 55499098, "comment_id": 97705146, "body": "There won&#39;t be multiple copies every time someone uses one of these ? Sorry, I&#39;m a bit confused from one of the other answers in the other question."}, {"owner": {"reputation": 16924, "user_id": 1266109, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/034350a4ce4a23ce02a68f6a6e6ddc6b?s=128&d=identicon&r=PG", "display_name": "Rahul Iyer", "link": "https://stackoverflow.com/users/1266109/rahul-iyer"}, "edited": false, "score": 0, "creation_date": 1554306218, "post_id": 55499098, "comment_id": 97705218, "body": "Also, why is everyone in this post suggesting using static ? But in the other question many people suggested just plain constexpr ?"}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "reply_to_user": {"reputation": 16924, "user_id": 1266109, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/034350a4ce4a23ce02a68f6a6e6ddc6b?s=128&d=identicon&r=PG", "display_name": "Rahul Iyer", "link": "https://stackoverflow.com/users/1266109/rahul-iyer"}, "edited": false, "score": 0, "creation_date": 1554307194, "post_id": 55499098, "comment_id": 97705804, "body": "@KaizerSozay As explained in my original answer, string pooling is a standard optimization that any modern toolchain will perform in an optimized build (see, e.g., <a href=\"https://stackoverflow.com/questions/53077119/can-gcc-merge-duplicate-global-string-arrays\">here</a>, or <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/gf-eliminate-duplicate-strings?view=vs-2019\" rel=\"nofollow noreferrer\">here</a>). If you&#39;re worried about it, you can simply verify that the string doesnt appear more than once in your binary, e.g., by simply opening the file and searching for how many times each string appears\u2026"}, {"owner": {"reputation": 16924, "user_id": 1266109, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/034350a4ce4a23ce02a68f6a6e6ddc6b?s=128&d=identicon&r=PG", "display_name": "Rahul Iyer", "link": "https://stackoverflow.com/users/1266109/rahul-iyer"}, "edited": false, "score": 0, "creation_date": 1554307281, "post_id": 55499098, "comment_id": 97705849, "body": "That&#39;s interesting. Thanks for taking the time to explain all this. I&#39;m learning a lot of stuff I didn&#39;t know."}], "tags": [], "owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "is_accepted": false, "score": 4, "last_activity_date": 1554307992, "last_edit_date": 1554307992, "creation_date": 1554306005, "answer_id": 55499098, "question_id": 55498738, "link": "https://stackoverflow.com/questions/55498738/how-to-share-global-constants-with-minimum-overhead-at-runtime/55499098#55499098", "title": "How to share global constants with minimum overhead at runtime?", "body": "<p>In light of the fact that you're stuck with C++11, I think my suggestion from <a href=\"https://stackoverflow.com/a/55493109/2064761\">here</a> still stands:</p>\n\n<pre><code>#ifndef INCLUDED_EVENT_NAMES\n#define INCLUDED_EVENT_NAMES\n\n#pragma once\n\nnamespace event_names\n{\n    constexpr auto&amp; event_1 = \"event_1\";\n    constexpr auto&amp; event_2 = \"event_2\";\n}\n\n#endif\n</code></pre>\n\n<p>Defining named references to string literal objects is very simple, does not require any additional libraries, is guaranteed to not introduce any unnecessary objects, won't require any additional memory over the storage for the statically-allocated string literal objects that you'd need anyways, and will not have any runtime overhead.</p>\n\n<p>If you could use C++17, I'd suggest to go with the <code>std::string_view</code> approach, but in C++11, I think the above is most-likely a good compromise for your application.</p>\n"}, {"comments": [{"owner": {"reputation": 16924, "user_id": 1266109, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/034350a4ce4a23ce02a68f6a6e6ddc6b?s=128&d=identicon&r=PG", "display_name": "Rahul Iyer", "link": "https://stackoverflow.com/users/1266109/rahul-iyer"}, "edited": false, "score": 0, "creation_date": 1554306511, "post_id": 55499137, "comment_id": 97705416, "body": "That makes a lot of sense. I was just thinking about it when I saw your post."}, {"owner": {"reputation": 16924, "user_id": 1266109, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/034350a4ce4a23ce02a68f6a6e6ddc6b?s=128&d=identicon&r=PG", "display_name": "Rahul Iyer", "link": "https://stackoverflow.com/users/1266109/rahul-iyer"}, "edited": false, "score": 0, "creation_date": 1554306614, "post_id": 55499137, "comment_id": 97705470, "body": "But then how would I store the string names in that class ? Just as private string constants ?"}, {"owner": {"reputation": 16924, "user_id": 1266109, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/034350a4ce4a23ce02a68f6a6e6ddc6b?s=128&d=identicon&r=PG", "display_name": "Rahul Iyer", "link": "https://stackoverflow.com/users/1266109/rahul-iyer"}, "edited": false, "score": 0, "creation_date": 1554307191, "post_id": 55499137, "comment_id": 97705800, "body": "You mentioned that the strings can stay within the cpp implementation file - do you mean inside a function ? But won&#39;t I be creating them every invocation then ? Why wouldn&#39;t I just keep them all as private constants in the header ?"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 16924, "user_id": 1266109, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/034350a4ce4a23ce02a68f6a6e6ddc6b?s=128&d=identicon&r=PG", "display_name": "Rahul Iyer", "link": "https://stackoverflow.com/users/1266109/rahul-iyer"}, "edited": false, "score": 0, "creation_date": 1554307914, "post_id": 55499137, "comment_id": 97706180, "body": "@KaizerSozay: They can be static - inside or outside of a function, doesn&#39;t matter all that much."}, {"owner": {"reputation": 16924, "user_id": 1266109, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/034350a4ce4a23ce02a68f6a6e6ddc6b?s=128&d=identicon&r=PG", "display_name": "Rahul Iyer", "link": "https://stackoverflow.com/users/1266109/rahul-iyer"}, "edited": false, "score": 0, "creation_date": 1554308317, "post_id": 55499137, "comment_id": 97706402, "body": "This seems to make the most sense to me design wise but I think the overhead of comparing all the strings would be too much. Worst case you would have to compare one string with all the other possibilities. In the case of using static strings like the other answers this problem doesn\u2019t exist."}], "tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": false, "score": 1, "last_activity_date": 1554306961, "last_edit_date": 1554306961, "creation_date": 1554306098, "answer_id": 55499137, "question_id": 55498738, "link": "https://stackoverflow.com/questions/55498738/how-to-share-global-constants-with-minimum-overhead-at-runtime/55499137#55499137", "title": "How to share global constants with minimum overhead at runtime?", "body": "<p>For the sake of proper abstraction and good design, you should <strong>define an event class</strong>. This event class will have either:</p>\n\n<ul>\n<li>A method which provide a string (e.g. <code>name()</code> or <code>system_name()</code>)</li>\n<li>A conversion operator to a string (not recommended)</li>\n<li>A <code>to_string()</code> freestanding function which takes such an event (not recommend)</li>\n</ul>\n\n<p>But beyond that - all of your class <em>can</em> now use an enum, or an index, or whatever they like - they'll just need to use the conversion method whenever they interact with whatever it is that requires strings. Thus none of your classes has to actually know about those strings itself.</p>\n\n<p>The strings themselves can stay within the .cpp implementation file of the class, and nobody else has to know about them. (unles they are actually defined in code that's not yours, but that's not how you described the problem.)</p>\n"}], "owner": {"reputation": 16924, "user_id": 1266109, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/034350a4ce4a23ce02a68f6a6e6ddc6b?s=128&d=identicon&r=PG", "display_name": "Rahul Iyer", "link": "https://stackoverflow.com/users/1266109/rahul-iyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 55498882, "answer_count": 5, "score": 4, "last_activity_date": 1554307992, "creation_date": 1554304901, "last_edit_date": 1554305309, "question_id": 55498738, "link": "https://stackoverflow.com/questions/55498738/how-to-share-global-constants-with-minimum-overhead-at-runtime", "title": "How to share global constants with minimum overhead at runtime?", "body": "<p>I am using C++11. I am not allowed to use external libraries like boost etc. I must use STL only.</p>\n\n<p>I have a number of events, which must be identified as string constants. I am not allowed to use enums or ints or any other data type. For example:</p>\n\n<blockquote>\n  <p>\"event_name1\"</p>\n  \n  <p>\"event_name2\" </p>\n  \n  <p>\"some_other_event_name3\"</p>\n  \n  <p>\"a_different_event_name12\"</p>\n</blockquote>\n\n<p>Then I have some classes which need to use these strings, but don't know the other classes exist (they don't have anything to do with each other).</p>\n\n<pre><code>class Panel{\n\n    void postEvent(){\n        SomeSingleton::postEvent(\"event_name\");\n    }\n}\n</code></pre>\n\n<p>Another class::</p>\n\n<pre><code>class SomeClass{\n\n    SomeClass(){\n        SomeSingleton::listenForEvent(\"event_name\");\n    }\n\n    void receiveEvent(){\n         //This function is triggered when \"event_name\" occurs.\n         //Do stuff\n    }\n}\n</code></pre>\n\n<p>All these events are constants, and are used to identify things that are happening.</p>\n\n<p>Here is what I have tried:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/55492141/how-to-store-string-constants-that-will-be-accessed-by-a-number-of-different-cla\">How to store string constants that will be accessed by a number of different classes?</a></p>\n\n<p>Some of the persons there suggested I provide specific details of how to solve a concrete problem, so I have created this new question.</p>\n\n<p><strong>How can I store the strings in a common file, so that all the other classes that use these strings can refer to the same file?</strong></p>\n\n<ul>\n<li>I do not want to waste memory or leak memory during my app's lifetime (it is a mobile app)</li>\n<li>compilation times are not a big deal to me, since the project isn't so big </li>\n<li>there are expected to be maybe 50 different events.</li>\n<li>It seems it would be more maintainable to keep all the strings in one file, and edit only this file as and when things change.</li>\n<li>Any class can listen for any event, at any time, and I won't know prior to compilation</li>\n</ul>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 2, "creation_date": 1554305627, "post_id": 55498686, "comment_id": 97704840, "body": "So, where exactly are you stuck? Physics modeling, simulation, rendering\u2026?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1554305995, "post_id": 55498686, "comment_id": 97705072, "body": "@Eyad: &quot;<i>most of the tutorials or examples about having different viewports of the same scene but from different angle of view.</i>&quot; Sure, but if you understand what that code is doing, it shouldn&#39;t be at all difficult to just change it so that it renders a different scene. The difference between what gets drawn into different viewports is pretty trivial; you just make a different draw call when you&#39;re setting up that viewport."}], "answers": [{"tags": [], "owner": {"reputation": 60686, "user_id": 277176, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2678da280c230bccef9781b8e5fbaf80?s=128&d=identicon&r=PG", "display_name": "Yakov Galka", "link": "https://stackoverflow.com/users/277176/yakov-galka"}, "is_accepted": false, "score": 1, "last_activity_date": 1554311187, "creation_date": 1554311187, "answer_id": 55500618, "question_id": 55498686, "link": "https://stackoverflow.com/questions/55498686/how-to-create-multiple-viewports-where-each-viewport-have-different-scenes/55500618#55500618", "title": "How to create multiple viewports where each viewport have different scenes?", "body": "<p>Usually you have one <code>glViewport</code> call and your render you scene afterwards. To render two different scenes you just do that twice:</p>\n\n<pre><code>glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); // this clears the whole window\n\nglViewport(0, 0, 100, 100);\nrender_scene_zero();\n\nglViewport(100, 0, 100, 100);\nrender_scene_one();\n</code></pre>\n\n<p>Here <code>render_scene_zero</code> and <code>render_scene_one</code> are responsible for drawing the respective scene as-if it was the only scene visible. They can draw completely different things, e.g. drawing a cube in scene zero and a sphere in scene one.</p>\n"}], "owner": {"reputation": 1, "user_id": 10828886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab998a2db9a578a06a8c3b90c15c7fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Eyad", "link": "https://stackoverflow.com/users/10828886/eyad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "closed_date": 1554360480, "answer_count": 1, "score": 0, "last_activity_date": 1554311187, "creation_date": 1554304752, "question_id": 55498686, "link": "https://stackoverflow.com/questions/55498686/how-to-create-multiple-viewports-where-each-viewport-have-different-scenes", "closed_reason": "Needs more focus", "title": "How to create multiple viewports where each viewport have different scenes?", "body": "<p>I have a mini-project for Computer Graphics, the idea of the project is simulation of gravity on different planets. I tried to find a tutorial for creating different viewports, each viewport has its own code individually so I can customize each viewport separately but I couldn't find it, most of the tutorials or examples about having different viewports of the same scene but from different angle of view.</p>\n\n<p>The main vision in my mind is to split the screen into 3 parts, each part have a falling object where the acceleration of the falling object simulates the gravity acceleration on that planet.</p>\n"}, {"tags": ["c++", "c++11", "templates", "sfinae", "static-assert"], "answers": [{"comments": [{"owner": {"reputation": 316, "user_id": 5014179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40da5af8c5586b883ae742ed9af2732f?s=128&d=identicon&r=PG&f=1", "display_name": "Pellekrino", "link": "https://stackoverflow.com/users/5014179/pellekrino"}, "edited": false, "score": 0, "creation_date": 1554308844, "post_id": 55498841, "comment_id": 97706680, "body": "Thanks ;) void_t is c++17, although it could be rewritten for c++11) how would it suit best to reuse those traits into a static_assert ? (same question than my other answer&#39;s comment)"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "reply_to_user": {"reputation": 316, "user_id": 5014179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40da5af8c5586b883ae742ed9af2732f?s=128&d=identicon&r=PG&f=1", "display_name": "Pellekrino", "link": "https://stackoverflow.com/users/5014179/pellekrino"}, "edited": false, "score": 0, "creation_date": 1554327117, "post_id": 55498841, "comment_id": 97715217, "body": "@Pellekrino Well, as written, <code>is_a_Base</code> and <code>is_insertable</code> are not suitable to be used in a boolean context, since they don&#39;t return anything convertible to bool. Since their names are asking the question &quot;is this a base class of...?&quot; and &quot;is this insertable&quot; they should be rewritten to return true or false based on these questions. For example, you can change <code>is_a_Base</code> to <code>using is_a_Base = std::is_base_of&lt;Base, T&gt;</code>, change the partial specializations to <code>C&lt;T, std::enable_if_t&lt;is_a_Base&lt;T&gt;{}&gt;&gt;</code>, then in the <code>static_assert</code> you can do <code>static_assert(is_a_Base&lt;T&gt;{}, &quot;T is not a Base&quot;)</code>"}], "tags": [], "owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "is_accepted": false, "score": 2, "last_activity_date": 1554305180, "creation_date": 1554305180, "answer_id": 55498841, "question_id": 55498442, "link": "https://stackoverflow.com/questions/55498442/how-to-define-constraints-for-sfinae-and-static-assert-in-c11/55498841#55498841", "title": "how to define constraints for SFINAE and static assert in C++11", "body": "<p>Two issues:</p>\n\n<ol>\n<li><p><code>std::ostream</code> and <code>std::istream</code> do not have default constructors so creating them the way you did caused a substitution failure and so the primary template was used as the fallback. Use <code>declval&lt;T&amp;&gt;</code> in order to avoid creating a temporary with the default constructor.</p></li>\n<li><p>The second template argument in the primary template must be <code>void</code> in order for it to be selected. As you have it, it returns the type of the result of <code>[i/o]s{} &lt;&lt; T{}</code> (sic) which will be <code>std::ostream&amp;</code>, and <code>std::istream&amp;</code> for the other. You can fix this up by wrapping the second argument in a <code>std::void_t</code>.</p></li>\n</ol>\n\n<p>#1</p>\n\n<pre><code>template &lt;typename T, typename is = std::istream&gt;\nusing is_extractable = decltype (std::declval&lt;is&amp;&gt;() &gt;&gt; T{});\n\ntemplate &lt;typename T, typename os = std::ostream&gt;\nusing is_insertable = decltype (std::declval&lt;os&amp;&gt;() &lt;&lt; T{});\n</code></pre>\n\n<p>#2</p>\n\n<pre><code>template&lt;typename T&gt;\nclass C&lt;T, std::void_t&lt;is_a_Base&lt;T&gt;&gt;&gt;\n\ntemplate&lt;typename T&gt;\nclass C&lt;T, std::void_t&lt;is_insertable&lt;T&gt;&gt;&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 316, "user_id": 5014179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40da5af8c5586b883ae742ed9af2732f?s=128&d=identicon&r=PG&f=1", "display_name": "Pellekrino", "link": "https://stackoverflow.com/users/5014179/pellekrino"}, "edited": false, "score": 0, "creation_date": 1554308563, "post_id": 55498846, "comment_id": 97706535, "body": "OK, thanks ! I thought that the default void parameter was then a placeholder and the returned type of the function wasn&#39;t important. And how would it suit best to reuse those traits into a static_assert ?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 316, "user_id": 5014179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40da5af8c5586b883ae742ed9af2732f?s=128&d=identicon&r=PG&f=1", "display_name": "Pellekrino", "link": "https://stackoverflow.com/users/5014179/pellekrino"}, "edited": false, "score": 0, "creation_date": 1554309113, "post_id": 55498846, "comment_id": 97706814, "body": "@Pellekrino see the <a href=\"https://blog.tartanllama.xyz/detection-idiom/\" rel=\"nofollow noreferrer\">detection idiom</a>. Essentially it wraps the SFINAE-check and returns whether it succeded."}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 3, "last_activity_date": 1554305196, "creation_date": 1554305196, "answer_id": 55498846, "question_id": 55498442, "link": "https://stackoverflow.com/questions/55498442/how-to-define-constraints-for-sfinae-and-static-assert-in-c11/55498846#55498846", "title": "how to define constraints for SFINAE and static assert in C++11", "body": "<p>You're using SFINAE to select a specialization of <code>C</code> through the default argument <code>void</code>. This means that the specialization's signature must substitute correctly, but <em>also</em> produce <code>void</code> for the specialization to be selected. As it stands, your stream traits:</p>\n\n<pre><code>template &lt;typename T, typename is = std::istream&gt;\nusing is_extractable = decltype (is{} &gt;&gt; T{});\n\ntemplate &lt;typename T, typename os = std::ostream&gt;\nusing is_insertable = decltype (os{} &lt;&lt; T{});\n</code></pre>\n\n<p>... actually produce the return type from <code>operator &gt;&gt;</code> (resp. <code>&lt;&lt;</code>), typically  an <code>is &amp;</code> (resp. <code>os &amp;</code>). Your naming is a bit confusing as well since <code>is_...</code> implies a boolean value, which they are not. Hence my suggested fix:</p>\n\n<p>template </p>\n\n<pre><code>using enable_if_base = typename std::enable_if&lt;std::is_base_of&lt;Base, T&gt;::value&gt;::type;\n//                                              `void` is the default already ^\n\ntemplate &lt;typename T, typename is = std::istream&gt;\nusing enable_if_extractable = decltype (std::declval&lt;is &amp;&gt;() &gt;&gt; std::declval&lt;T &amp;&gt;(), void());\n//                                                                                 ^^^^^^^^\n\ntemplate &lt;typename T, typename os = std::ostream&gt;\nusing enable_if_insertable = decltype (std::declval&lt;os &amp;&gt;() &lt;&lt; std::declval&lt;T const &amp;&gt;(), void());\n//                                                                                      ^^^^^^^^\n</code></pre>\n\n<p>Note that I also replaced <code>T{}</code> with appropriately-qualified <code>std::declval</code>s, since you cannot assume that the relevant types are actually default-constructible \u2014 in fact, <code>std::istream</code> and <code>std::ostream</code> are not.</p>\n"}], "owner": {"reputation": 316, "user_id": 5014179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40da5af8c5586b883ae742ed9af2732f?s=128&d=identicon&r=PG&f=1", "display_name": "Pellekrino", "link": "https://stackoverflow.com/users/5014179/pellekrino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 55498846, "answer_count": 2, "score": 2, "last_activity_date": 1554305196, "creation_date": 1554304018, "question_id": 55498442, "link": "https://stackoverflow.com/questions/55498442/how-to-define-constraints-for-sfinae-and-static-assert-in-c11", "title": "how to define constraints for SFINAE and static assert in C++11", "body": "<p>I am experimenting on serialization/deserialization with template, and have now something working. \nObviously, when implementing it, I ran into many troubles with hundreds of compiler error logs. \nBefore extending my library further, I would like to secure it a bit, using SFINAE (which I only used scarcely so far) and static_asserts. </p>\n\n<p>Not to mess up any further with my lib, I'm training in a sandbox : </p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/9eb4eaefaac90fc0\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/9eb4eaefaac90fc0</a></p>\n\n<p>I want to define a few predicates : </p>\n\n<ul>\n<li>is_a_base to check the object derives from Base.</li>\n<li>is_insertable &amp; is_extractable to check if operator>> and operator&lt;&lt; have been defined for this type. </li>\n</ul>\n\n<p>I want to be able to use those predicates for both SFINAE specialization and static_assert.</p>\n\n<pre><code>#include &lt;sstream&gt;\n#include &lt;iostream&gt;\n\n//forward declaration\nclass Base;\n\n//\"Template typedef\" to check predicates\ntemplate &lt;typename T&gt;\nusing is_a_Base = typename std::enable_if&lt;std::is_base_of&lt;Base, T&gt;::value, void&gt;::type;\n\ntemplate &lt;typename T, typename is = std::istream&gt;\nusing is_extractable = decltype (is{} &gt;&gt; T{});\n\ntemplate &lt;typename T, typename os = std::ostream&gt;\nusing is_insertable = decltype (os{} &lt;&lt; T{});\n\n//Test classes\nclass Base{\n    public:\n        std::string getStr(){ return \"Base.getStr()\";}\n};\nclass Derived: public Base {};\n\nclass Other{};\n\n//A template class with its specializations with SFINAE\ntemplate &lt;typename T, typename Enable = void&gt;\nclass C{\n    public:\n        static void f(T&amp; o){\n            std::cout &lt;&lt; \"f&lt;T&gt; default !\" &lt;&lt; std::endl;\n    }\n};\n\ntemplate&lt;typename T&gt;\nclass C&lt;T, is_a_Base&lt;T&gt;&gt;\n{\n    public:\n        static void f (T&amp; o)\n        {\n            std::cout &lt;&lt; \"f&lt;is_a_A&gt;() ! \" &lt;&lt; o.getStr() &lt;&lt; std::endl;\n        }\n};\n\ntemplate&lt;typename T&gt;\nclass C&lt;T, is_insertable&lt;T&gt; &gt;\n{\n    public:\n        static void f (T&amp; o)\n        {\n            std::cout &lt;&lt; \"f&lt;is_insertable() ! \" &lt;&lt; o &lt;&lt; std::endl;\n        }\n};\n\n\ntemplate&lt;typename T&gt;\nstd::string g(T&amp; ref)\n{\n    //static_assert(is_a_Base&lt;T&gt;, \"T is not a Base\"); //can't figure out the syntax here\n    return ref.getStr();\n}\n\n\n\nint main(){\n    Base a;\n    Derived b;\n    int myint = 1;\n    std::string str=\"toto\";\n\n    Other oops;\n\n\n    C&lt;Base&gt;::f(a);\n    C&lt;Derived&gt;::f(b);\n    C&lt;int&gt;::f(myint);      //Not calling is_insertable ??\n    C&lt;std::string&gt;::f(str); //Not calling is_insertable ??\n    C&lt;Other&gt;::f(oops);\n\n    std::cout &lt;&lt; \"g:\" &lt;&lt; g(a) &lt;&lt; std::endl;\n    //std::cout &lt;&lt; \"g:\" &lt;&lt; g(oops) &lt;&lt; std::endl; //should be blasted by the static assert\n}\n</code></pre>\n\n<p>Results : </p>\n\n<pre><code>f&lt;is_a_A&gt;() ! Base.getStr()\nf&lt;is_a_A&gt;() ! Base.getStr()\nf&lt;T&gt; default !\nf&lt;T&gt; default !\nf&lt;T&gt; default !\ng:Base.getStr()\n</code></pre>\n\n<p>So far, is_a_base is working for SFINAE.\nHowever, is_insertable is not working for the int and string variables ?\nAlso I could not figure out how to properly reuse the is_a_base predicate into my assert statement.</p>\n\n<p>(Since I am constrained with a cross-compiler not supporting beyond C++11, I can't use benefits from C++14 and beyond.)</p>\n"}, {"tags": ["c++", "oop", "arduino"], "comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1554303624, "post_id": 55498236, "comment_id": 97703548, "body": "Do you try to set a member function address where a function address is expected? This doesn&#39;t work. Type mismatch. (It would if you make the member functions <code>static</code>. But then you may not pass <code>this</code>.)"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1554303899, "post_id": 55498236, "comment_id": 97703750, "body": "This is a frequently asked problem. In your case, it is basically unsolvable because there is no way to tell ModbusMaster to call the pre/post-transmission-function <i>on a specific instance</i> of <code>MyWrapperFunction</code>, at least not based on what we can see here. And I agree that the suggestions from the search are terrible occasionally - no concerns."}, {"owner": {"reputation": 41, "user_id": 4053173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6898f90713809a3182111335c70674ac?s=128&d=identicon&r=PG&f=1", "display_name": "HumptyDumps", "link": "https://stackoverflow.com/users/4053173/humptydumps"}, "edited": false, "score": 0, "creation_date": 1554304223, "post_id": 55498236, "comment_id": 97703957, "body": "I call <code>MyWrapperFunction newContainer; </code> in my Arduino setup() (Called in main() ). So my expectation is that it is being called on the newContainer instance of  MyWrapperFunction."}], "owner": {"reputation": 41, "user_id": 4053173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6898f90713809a3182111335c70674ac?s=128&d=identicon&r=PG&f=1", "display_name": "HumptyDumps", "link": "https://stackoverflow.com/users/4053173/humptydumps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "closed_date": 1554303683, "answer_count": 0, "score": 0, "last_activity_date": 1554322736, "creation_date": 1554303479, "last_edit_date": 1554322736, "question_id": 55498236, "link": "https://stackoverflow.com/questions/55498236/pointer-to-member-function-of-class", "closed_reason": "Duplicate", "title": "Pointer to member function of class", "body": "<p>I am trying to implement a wrapper library for an Arduino-based ESP8266 which will act as a Modbus controller. </p>\n\n<p>The Modbus library I am using (ModbusMaster) has a function which sets what is to be done before each transmission: <code>_modbus.preTransmission(void( *preTransmission)()</code>. </p>\n\n<p>I am trying to figure out how to set my function <code>MyWrapperClass::preTransmission()</code> to be the callback function.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>MyWrapperFunction::MyWrapperFunction() {\n    _modbus.begin(_slaveId, serial); //_modbus defined in header file ModbusMaster _modbus;\n\n  _modbus.preTransmission(this-&gt;preTransmission);\n  _modbus.postTransmission(this-&gt;postTransmission);\n}\n\nvoid MyWrapperFunction::preTransmission() {\n  //Stuff before transmission\n}\n\nvoid MyWrapperFunction::postTransmission() {\n  //Stuff after transmission\n}\n</code></pre>\n\n<p>But I get various compiler errors (depending on what I'm doing), including:</p>\n\n<pre><code>error: no matching function for call to 'ModbusMaster::postTransmission(&lt;unresolved\noverloaded function type&gt;)'\n</code></pre>\n\n<p>Also sorry if this is a duplicate - it is very hard to search for similar things when you don't know the terms to search for. I am sure that this has been asked before but I couldn't find an answer.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 1, "creation_date": 1554303307, "post_id": 55498126, "comment_id": 97703310, "body": "I think you&#39;re looking for <a href=\"https://en.cppreference.com/w/cpp/io/manip/hex\" rel=\"nofollow noreferrer\"><code>std::hex</code></a>"}, {"owner": {"reputation": 41, "user_id": 5045417, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/be29f8464658daadfe055a399bf05fd7?s=128&d=identicon&r=PG&f=1", "display_name": "Dewagg", "link": "https://stackoverflow.com/users/5045417/dewagg"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1554303379, "post_id": 55498126, "comment_id": 97703351, "body": "@Mgetz Thank you! But anyway I need to do this in my way :("}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1554305049, "post_id": 55498126, "comment_id": 97704486, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5029840/convert-char-to-int-in-c-and-c\">Convert char to int in C and C++</a>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1554305525, "post_id": 55498126, "comment_id": 97704794, "body": "While I appreciate you accepting my answer, you really should wait a while. Once a question has an accepted answer many people don&#39;t bother to read it, so you might miss out on additional information or perhaps an even better answer. Give it a day or so."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5045417, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/be29f8464658daadfe055a399bf05fd7?s=128&d=identicon&r=PG&f=1", "display_name": "Dewagg", "link": "https://stackoverflow.com/users/5045417/dewagg"}, "edited": false, "score": 0, "creation_date": 1554303544, "post_id": 55498229, "comment_id": 97703495, "body": "Thank you! It is impossible to do this in any other way? Char &gt; int..?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1554303674, "post_id": 55498229, "comment_id": 97703589, "body": "Note that this code assumes that <code>int</code> is at least 24 bits; while that&#39;s common these days, it is not required. In particular, many embedded systems use 16-bit <code>int</code>."}, {"owner": {"reputation": 706, "user_id": 3320702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7c9b7ac64b2b4313d0dccbc7a9c57ca?s=128&d=identicon&r=PG&f=1", "display_name": "MrPromethee", "link": "https://stackoverflow.com/users/3320702/mrpromethee"}, "edited": false, "score": 0, "creation_date": 1554303747, "post_id": 55498229, "comment_id": 97703647, "body": "I think this is the best way to do this in your case."}], "tags": [], "owner": {"reputation": 706, "user_id": 3320702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7c9b7ac64b2b4313d0dccbc7a9c57ca?s=128&d=identicon&r=PG&f=1", "display_name": "MrPromethee", "link": "https://stackoverflow.com/users/3320702/mrpromethee"}, "is_accepted": false, "score": 2, "last_activity_date": 1554303470, "creation_date": 1554303470, "answer_id": 55498229, "question_id": 55498126, "link": "https://stackoverflow.com/questions/55498126/c-convert-char-to-int/55498229#55498229", "title": "C++ convert char to int", "body": "<p>You can directly store the hexadecimal values in an <code>int</code> with <code>std::hex</code>.</p>\n\n<pre><code>int b;\nifstream data(\"U1.txt\");\ndata &gt;&gt; std::hex &gt;&gt; b;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 5045417, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/be29f8464658daadfe055a399bf05fd7?s=128&d=identicon&r=PG&f=1", "display_name": "Dewagg", "link": "https://stackoverflow.com/users/5045417/dewagg"}, "edited": false, "score": 0, "creation_date": 1554303704, "post_id": 55498277, "comment_id": 97703613, "body": "Exactly what I&#39;m looking for! Thanks, good answer but still be looking for more &quot;elegant&quot; :)"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1554303914, "post_id": 55498277, "comment_id": 97703757, "body": "NO, NO, NO! That <b>seems</b> to work because 48 is the ASCII code for <code>&#39;0&#39;</code> and you&#39;re only looking at the character <code>&#39;0&#39;</code>. Try it for <code>&#39;F&#39;</code>. (Note that, in general, you can subtract <code>&#39;0&#39;</code> from any of the characters `&#39;0&#39;..&#39;9&#39; and get the value that the character represents; the C and C++ language definitions require this to work. They do not impose any other requirements on the values involved in character encodings)."}, {"owner": {"reputation": 399, "user_id": 10957845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23d59fc3c2f48c9a527169414262b3a?s=128&d=identicon&r=PG&f=1", "display_name": "NewEyes", "link": "https://stackoverflow.com/users/10957845/neweyes"}, "edited": false, "score": 0, "creation_date": 1554304925, "post_id": 55498277, "comment_id": 97704413, "body": "I am a bit confused about your comment, I honestly believed &#39;int x = (int)character - 48&#39; and &#39;int x = character - &#39;0&#39;&#39; were interchangable\u2026 Will try this out as soon as I get a chance to."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1554305761, "post_id": 55498277, "comment_id": 97704928, "body": "@NewEyes -- they&#39;ll do the same thing on a system that uses ASCII, which is almost certainly true for yours. Some systems use a different encoding, and <code>&#39;0&#39;</code> is not 48 (read about <a href=\"http://www.astrodigital.org/digital/ebcdic.html\" rel=\"nofollow noreferrer\">EBCDIC</a>). More important, subtracting <code>&#39;0&#39;</code> <b>won&#39;t convert</b> a character like <code>&#39;F&#39;</code> to the value that it represents."}, {"owner": {"reputation": 399, "user_id": 10957845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23d59fc3c2f48c9a527169414262b3a?s=128&d=identicon&r=PG&f=1", "display_name": "NewEyes", "link": "https://stackoverflow.com/users/10957845/neweyes"}, "edited": false, "score": 0, "creation_date": 1554311541, "post_id": 55498277, "comment_id": 97708023, "body": "Did some research, turns out you are right! Thanks for enlighting me"}], "tags": [], "owner": {"reputation": 399, "user_id": 10957845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c23d59fc3c2f48c9a527169414262b3a?s=128&d=identicon&r=PG&f=1", "display_name": "NewEyes", "link": "https://stackoverflow.com/users/10957845/neweyes"}, "is_accepted": false, "score": -1, "last_activity_date": 1554303565, "creation_date": 1554303565, "answer_id": 55498277, "question_id": 55498126, "link": "https://stackoverflow.com/questions/55498126/c-convert-char-to-int/55498277#55498277", "title": "C++ convert char to int", "body": "<p>A rather unelegant but also working answer is to subtract all your chars by 48 as thats where numbers start in ASCII. This is also the reason why you get 816 as:</p>\n\n<pre><code>48*16+48 = 816\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": true, "score": 0, "last_activity_date": 1554304306, "creation_date": 1554304306, "answer_id": 55498538, "question_id": 55498126, "link": "https://stackoverflow.com/questions/55498126/c-convert-char-to-int/55498538#55498538", "title": "C++ convert char to int", "body": "<p>Since those encodings use 24 bits, you have to start out with an integer type that holds at least 24 bits. And for this kind of packing and unpacking, it really ought to be unsigned, so you don't get tangled up in sign bits. That means using <code>std::uint_least32_t</code>, which is the smallest unsigned type that can hold at least 32 bits. (Yes, 24 would fit better, but there is no least24 type; 32 is the best you can do).</p>\n\n<p>If your compiler doesn't provide those fixed-width types (<code>std::uint_least32_t</code>), you can use <code>unsigned long</code>. It's required to be at least 32 bits wide. It could be larger, and the reason for using <code>std::uint_least32_t</code> is that your compiler might have, for example, a 32-bit integer, in which case <code>unsigned int</code> would be 32 bits wide. But you can't count on that, so either use the fixed-width type or use <code>unsigned long</code> to ensure that you have enough bits.</p>\n\n<p>Since the character inputs are encoded in hexadecimal, you need to tell the input system to interpret them as hex values. So:</p>\n\n<pre><code>std::uint_least32_t value;\ndata &gt;&gt; std::hex &gt;&gt; value;\n</code></pre>\n\n<p>Now you've got the value in the low 24 bits of <code>value</code>. You need to pick out the individual R, G, and B parts of that value. That's straightforward. To get the low 8 bits, just mask out the higher ones:</p>\n\n<pre><code>std::cout &lt;&lt; (value &amp; 0xFF) &lt;&lt; '\\n';\n</code></pre>\n\n<p>To get the next 8 bits, shift and mask:</p>\n\n<pre><code>std::cout &lt;&lt; ((value &gt;&gt; 8) &amp; 0xFF) &lt;&lt; '\\n';\n</code></pre>\n\n<p>And, naturally, to get the upper 8 bits, shift and mask:</p>\n\n<pre><code>std::cout &lt;&lt; ((value &gt;&gt; 16) &amp; 0xFF) &lt;&lt; '\\n';\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5045417, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/be29f8464658daadfe055a399bf05fd7?s=128&d=identicon&r=PG&f=1", "display_name": "Dewagg", "link": "https://stackoverflow.com/users/5045417/dewagg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "accepted_answer_id": 55498538, "answer_count": 3, "score": 0, "last_activity_date": 1554304306, "creation_date": 1554303160, "question_id": 55498126, "link": "https://stackoverflow.com/questions/55498126/c-convert-char-to-int", "title": "C++ convert char to int", "body": "<p>Sorry for my bad English. I need to build app which converts hex to rgb. I have file U1.txt with content inside:</p>\n\n<pre><code>2 3\n008000\nFF0000\nFFFFFF\nFFFF00\nFF0000\nFFFF00\n</code></pre>\n\n<p>And my codeblocks app:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nint main()\n{\n    int a;\n    int b;\n    string color;\n\n    ifstream data(\"U1.txt\");\n    ofstream result(\"U1result.txt\");\n\n    data &gt;&gt; a;\n    data &gt;&gt; b;\n\n    for (int i = 0; i &lt; a * b; i++) {\n        data &gt;&gt; color;\n        cout &lt;&lt; color[0] * 16 + color[1] &lt;&lt; endl;\n    }\n\n    data.close();\n    result.close();\n\n    return 0;\n}\n</code></pre>\n\n<p>This gives me <code>816</code>. But it should be 0. I think color[0] is not an integer, but a char and it multiplies by ASCII number.. I've tried many ways with atoi, c_str() and it not working. P.S do not suggest stoi(), because I need to do this homework with older C++. Thanks in advance and have a good day ;)</p>\n"}, {"tags": ["c++", "c++11", "inheritance", "design-patterns", "polymorphism"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1554302942, "post_id": 55498000, "comment_id": 97703002, "body": "You would have to rely on a template argument instead. But then that&#39;s only possible if you know at compile time which type you want to create. If not, for example if it depends on user input, solutions are much more complex and certainly not transparent to the user at all. If using the base type&#39;s interface is not acceptable, I&#39;d reconsider if polymorphism is the right tool for the job."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1554302961, "post_id": 55498000, "comment_id": 97703016, "body": "The whole point of polymorphism is that the interface should be in the base class and you don&#39;t care what derived object you actually have.  If you don&#39;t do that then you need to cast which defeats the purpose."}], "answers": [{"comments": [{"owner": {"reputation": 603, "user_id": 3051029, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/07a213a65e6392b3d3a1a5b6a165fbb9?s=128&d=identicon&r=PG&f=1", "display_name": "user3051029", "link": "https://stackoverflow.com/users/3051029/user3051029"}, "edited": false, "score": 0, "creation_date": 1554303827, "post_id": 55498176, "comment_id": 97703703, "body": "Wow, this is great. Exactly what I was looking for! Thanks."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 3, "last_activity_date": 1554303305, "creation_date": 1554303305, "answer_id": 55498176, "question_id": 55498000, "link": "https://stackoverflow.com/questions/55498000/factory-with-instances-of-derived-classes/55498176#55498176", "title": "Factory with instances of derived classes", "body": "<pre><code>template&lt;DerClasses enum_class&gt;\nauto create_instance(){\n  if constexpr (enum_class == DerClasses::Derived1) {\n    return std::make_unique&lt;Derived1&gt;();\n  else if constexpr (enum_class == DerClasses::Derived2) {\n    return std::make_unique&lt;Derived2&gt;();\n}\n</code></pre>\n\n<p>this is like <a href=\"/questions/tagged/c%2b%2b17\" class=\"post-tag\" title=\"show questions tagged &#39;c++17&#39;\" rel=\"tag\">c++17</a>.  Doing this in <a href=\"/questions/tagged/c%2b%2b11\" class=\"post-tag\" title=\"show questions tagged &#39;c++11&#39;\" rel=\"tag\">c++11</a> is very annoying.</p>\n\n<p>If you don't know the <code>DerClasses</code> value at compile time, this does not work, and cannot work.  The closest you can get is continuation passing style:</p>\n\n<pre><code>template&lt;class F&gt;\ndecltype(auto) create_instance(DerClasses enum_class, F&amp;&amp; f){\n  switch(enum_class) {\n    case DerClasses::Derived1:\n      return f(std::make_unique&lt;Derived1&gt;());\n    case DerClasses::Derived2:\n      return f(std::make_unique&lt;Derived2&gt;());\n  }\n}\n</code></pre>\n\n<p>which is used like:</p>\n\n<pre><code>create_instance(DerClasses::Derived1, [&amp;](auto&amp;&amp; ptr) {\n  if constexpr( std::is_same&lt; std::decay_t&lt;decltype(*ptr)&gt;, Derived1 &gt;{} )\n    ptr-&gt;derived1_class_only_variable = 123;\n});\n</code></pre>\n\n<p>but that sucks too, because the lambda is invoked with both derived types; only one is run.</p>\n\n<p>A use of override could work, but again you are getting crazy.</p>\n"}, {"tags": [], "owner": {"reputation": 3447, "user_id": 4297146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Zl9y3.jpg?s=128&g=1", "display_name": "mohabouje", "link": "https://stackoverflow.com/users/4297146/mohabouje"}, "is_accepted": false, "score": 2, "last_activity_date": 1554451615, "last_edit_date": 1554451615, "creation_date": 1554303606, "answer_id": 55498288, "question_id": 55498000, "link": "https://stackoverflow.com/questions/55498000/factory-with-instances-of-derived-classes/55498288#55498288", "title": "Factory with instances of derived classes", "body": "<p>You can do it by using some meta-programming. If you are using  C++ 11/14 you can do something like this:</p>\n\n<pre><code>enum class ClassType {\n    FirstType,    \n    SecondType,\n    ThirdType\n};\n\n namespace internal {\n\n    template &lt;ClassType Type&gt;\n    struct _build_type {};\n\n    template &lt;&gt;\n    struct _build_type&lt;ClassType::FirstType&gt; {\n        constexpr auto operator()() {\n            return std::make_unique&lt;MyFirstType&gt;();\n        }\n    };\n\n    template &lt;&gt;\n    struct _build_type&lt;ClassType::SecondType&gt; {\n        constexpr auto operator()() {\n            return std::make_unique&lt;MySecondType&gt;();\n        }\n    };\n\n    template &lt;&gt;\n    struct _build_type&lt;ClassType::ThirdType&gt; {\n        constexpr auto operator()() {\n            return std::make_unique&lt;MyThirdType&gt;();\n        }\n    };\n\n} \n\ntemplate &lt;WindowType Type&gt;\nconstexpr auto create_instance() {\n    return internal::_build_type&lt;Type&gt;{}();\n}\n</code></pre>\n\n<p>And then your code becomes exactly, what you are saying:</p>\n\n<pre><code>auto ptr = create_instance&lt;ClassType::FirstType&gt;();\nptr-&gt;derived1_class_only_variable = 123;\n</code></pre>\n\n<p>In modern C++17, you can simplify the code with a simple <code>constexpr if</code> condition.</p>\n"}], "owner": {"reputation": 603, "user_id": 3051029, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/07a213a65e6392b3d3a1a5b6a165fbb9?s=128&d=identicon&r=PG&f=1", "display_name": "user3051029", "link": "https://stackoverflow.com/users/3051029/user3051029"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 55498176, "answer_count": 2, "score": 0, "last_activity_date": 1554451615, "creation_date": 1554302813, "question_id": 55498000, "link": "https://stackoverflow.com/questions/55498000/factory-with-instances-of-derived-classes", "title": "Factory with instances of derived classes", "body": "<p>I have got kind of a weird use-case. Here's a very simplified version of it.</p>\n\n<p>Let's say I have a class <code>Base</code> and classes <code>DerivedOne</code> and <code>DerivedTwo</code> which are derived from the <code>Base</code> class.</p>\n\n<p>Then, there's a enumeration:</p>\n\n<pre><code>enum DerClasses {Derived1, Derived2};\n</code></pre>\n\n<p>and a function which would take a enum and return the instance of derived class, depending on the value.</p>\n\n<p>Something like:</p>\n\n<pre><code>inline Base* create_instance(DerClasses enum_class){\n    switch(enum_class) {\n        case Derived1:\n            return new Derived1();\n        case Derived2:\n            return new Derived2();\n    }\n}\n</code></pre>\n\n<p>Obviously this works, but only with the cast to the derived class afterwards.</p>\n\n<p><code>Derived1 *derived_pointer = dynamic_cast&lt;Derived1*&gt;(pointer);</code></p>\n\n<p>And I don't want users to make these dynamic casts themselves or even know anything about the classes.</p>\n\n<p>Is that possible to somehow hide these casts and make an API with automatic type deduction, like </p>\n\n<pre><code>auto ptr = create_instance(DerClasses::Derived1);\nptr-&gt;derived1_class_only_variable = 123;\n</code></pre>\n"}, {"tags": ["c++", "linker", "shared-libraries", "eigen"], "answers": [{"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1554303396, "post_id": 55498114, "comment_id": 97703364, "body": "If on Linux, also consider using the <code>visibility</code> <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html\" rel=\"nofollow noreferrer\">function attribute</a>; see <a href=\"https://gcc.gnu.org/wiki/Visibility\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1554303449, "post_id": 55498114, "comment_id": 97703415, "body": "@Basile indeed, that&#39;s what I thought by <code>visibility</code>, thanks for the link."}, {"owner": {"reputation": 154, "user_id": 4280680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25c5cf3c0d4afdfa4400f7ade1799a3d?s=128&d=identicon&r=PG", "display_name": "StephenSwat", "link": "https://stackoverflow.com/users/4280680/stephenswat"}, "edited": false, "score": 0, "creation_date": 1554304063, "post_id": 55498114, "comment_id": 97703847, "body": "Thank you for the suggestion of using symbol hiding. If I understand correctly, I would have to configure the hiding of Eigen symbols on <i>all</i> objects, correct? Is there a way to prevent the linker reusing the Eigen symbols in other objects without changing the source code for those objects?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1554304116, "post_id": 55498114, "comment_id": 97703891, "body": "I don&#39;t think so, but maybe someone will answer with the silver bullet!"}], "tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": false, "score": 4, "last_activity_date": 1554303463, "last_edit_date": 1554303463, "creation_date": 1554303108, "answer_id": 55498114, "question_id": 55497952, "link": "https://stackoverflow.com/questions/55497952/how-to-manage-compilation-of-c-header-only-libraries-across-shared-objects/55498114#55498114", "title": "How to manage compilation of C++ header-only libraries across shared objects", "body": "<p>One obvious solution is to hide these symbols. This happens (if I understand the problem properly) because these functions are exported and can be used by other subsequently loaded libraries.</p>\n\n<p>When you build your library and link against the other libraries, the linker reuses what it can. And the old packages as well. I hope you don't require these libraries for your own build?</p>\n\n<p>So two options:</p>\n\n<ul>\n<li>Force the loading of <code>A</code> before the other libraries (but if you need the other libraries, I don't think this is doable),</li>\n<li>Tell the linker that these functions should not be visible by other libraries (<code>visibility=hidden</code> by default).</li>\n</ul>\n\n<p>I saw something similar happening with a badly compiled 3rd-party library. It was built in debug mode, shipped in the product, and all of a sudden one of our libraries experienced a slow down. The map files identified where the culprit debug function came from, as it exported all its symbols by default.</p>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 10259846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8643aa9412262f8c0bf902cd12009458?s=128&d=identicon&r=PG&f=1", "display_name": "asherikov", "link": "https://stackoverflow.com/users/10259846/asherikov"}, "is_accepted": false, "score": 1, "last_activity_date": 1554328301, "creation_date": 1554328301, "answer_id": 55504879, "question_id": 55497952, "link": "https://stackoverflow.com/questions/55497952/how-to-manage-compilation-of-c-header-only-libraries-across-shared-objects/55504879#55504879", "title": "How to manage compilation of C++ header-only libraries across shared objects", "body": "<p>An alternative way to change visibility without modifying the code is to filter symbols during linking stage using version scripts -> <a href=\"https://sourceware.org/binutils/docs/ld/VERSION.html\" rel=\"nofollow noreferrer\">https://sourceware.org/binutils/docs/ld/VERSION.html</a>. You'll need something like\n<code>\n{\n    global: *;\n    local:\n        extern \"C++\"\n        {\n            Eigen::*;\n            *Eigen::internal::*;\n        };\n};</code></p>\n"}], "owner": {"reputation": 154, "user_id": 4280680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25c5cf3c0d4afdfa4400f7ade1799a3d?s=128&d=identicon&r=PG", "display_name": "StephenSwat", "link": "https://stackoverflow.com/users/4280680/stephenswat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1554328301, "creation_date": 1554302693, "question_id": 55497952, "link": "https://stackoverflow.com/questions/55497952/how-to-manage-compilation-of-c-header-only-libraries-across-shared-objects", "title": "How to manage compilation of C++ header-only libraries across shared objects", "body": "<p>I'm developing a large software package consisting of many packages which are compiled to shared objects. For performance reasons, I want to compile Eigen 3 (a header-only library) with vector instructions, but the templated methods are being compiled all over the place. How can I ensure that the Eigen functions are compiled into a specific object file?</p>\n\n<p>This software consists of ~2000 individual packages. To keep development going at a reasonable pace, the recommended way of compiling the program is to sparsely check out some of the packages and compile them, after which the program can be executed using precompiled (by some CI system) shared libraries.</p>\n\n<p>The problem is that part of my responsibility is to optimise the CPU time of the program. In order to do so, I wanted to compile the package I am working on (let's call it <code>A.so</code>) with the <code>-march</code> flag so Eigen can exploit modern SIMD processor extensions.</p>\n\n<p>Unfortunately, because Eigen is a header-only library, the Eigen functions are compiled into many different shared objects. For example, one of the most CPU intensive methods called in <code>A.so</code> is the matrix multiplaction kernel which is compiled in <code>B.so</code>. Many other Eigen functions are compiled into <code>C.so</code>, <code>D.so</code>, etc. Since these objects are compiled for older, more widely implemented instruction set extensions, they are not compiled with AVX, AVX2, etc.</p>\n\n<p>Of course, one possible solution is to include packages <code>B</code>, <code>C</code>, <code>D</code>, etc. into my own sparse compilation but this negates the advantage of compiling only a part of the project. In addition, it leaves me including ever more and more packages if I really want to vectorise all linear algebra operations in the code of package <code>A</code>.</p>\n\n<p>What I am looking for is a way to compile all the Eigen functions that package <code>A</code> uses into <code>A.so</code>, as if the Eigen functions were defined with the static keyword. Is this possible? Is there some mechanism in the compiler/linker that I can leverage to make this happen?</p>\n"}, {"tags": ["c++", "c++11", "boost", "c++14", "c++17"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 10, "creation_date": 1554302072, "post_id": 55497709, "comment_id": 97702380, "body": "I don&#39;t get the question.  Boost is written in C++ so anything it does you can do yourself."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 3, "creation_date": 1554302148, "post_id": 55497709, "comment_id": 97702433, "body": "Are you asking whether there are any Boost libraries that have not been incorporated into the standard library in C++11 through C++17? (Yes, most of them have not been.)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1554302150, "post_id": 55497709, "comment_id": 97702435, "body": "boost can provide a platform for library code that is still too experimental/controversial to be considered to be standardized, basically thats what boost was made for"}, {"owner": {"reputation": 36829, "user_id": 3497671, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f83baf1bb818fad4fb1559ac2bf0304d?s=128&d=identicon&r=PG", "display_name": "Francesco Borzi", "link": "https://stackoverflow.com/users/3497671/francesco-borzi"}, "edited": false, "score": 1, "creation_date": 1554302170, "post_id": 55497709, "comment_id": 97702453, "body": "yes but, for example, before modern C++ there were many things pretty hard to implement yourself and it made much more sense to just use Boost. Now with modern C++ you have many more features that deprecate some of the Boost features. I was wondering if it is reasonable in 2019 to add Boost as a dependency of your project or if sticking with modern standard C++ features is enough"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1554302210, "post_id": 55497709, "comment_id": 97702474, "body": "So opinion based... And so broad..."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1554302357, "post_id": 55497709, "comment_id": 97702576, "body": "<i>I was wondering if it is reasonable in 2019 to add Boost as a dependency of your project or if sticking with modern standard C++ features is enough</i> It depends on what you need.  If you need a tuple there is no reason.  If you need a map with both the key and value acting as keys then you should just include bimap since it&#39;s already been implemented."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1554302420, "post_id": 55497709, "comment_id": 97702620, "body": "Unfortunately, opinion-based or too broad is off topic on SO."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 1, "creation_date": 1554302512, "post_id": 55497709, "comment_id": 97702679, "body": "SMH at people marking this question &quot;opinion-based&quot;: it&#39;s certainly possible to enumerate through the features that boost provides that aren&#39;t part of the C++ STL without getting into &quot;opinion&quot; territory. Don&#39;t mark questions off-topic just because <i>you</i> don&#39;t want to answer them!"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 1, "creation_date": 1554302678, "post_id": 55497709, "comment_id": 97702810, "body": "why this was closed as &quot;opinion-based&quot;? How presence of some feature in standard library is an opinion not a fact?"}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 1, "creation_date": 1554302941, "post_id": 55497709, "comment_id": 97703001, "body": "@MarekR the question originally was just <i>&quot;is there anything you cannot accomplish (with a reasonable solution) with modern C++ for which you need to include Boost as a dependency in your project?&quot;</i> which is a vague question considering Boost is written in C++."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "reply_to_user": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 1, "creation_date": 1554304169, "post_id": 55497709, "comment_id": 97703925, "body": "@Ayxan IMO people are picking on unimportant detail/words. With this thinking why do you need standard library? After all C++ is compete Turing machine so you can do anything."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1554305421, "post_id": 55497709, "comment_id": 97704724, "body": "Yes I can see this one going through a few open / close cycles. I&#39;ve asked the @mods to intervene."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3956566"}, "edited": false, "score": 0, "creation_date": 1554309206, "post_id": 55497709, "comment_id": 97706860, "body": "Question is temporarily locked to stop the yoyo attention. For those feeling strongly enough when the lock is removed, it can be re-closed."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1554371518, "post_id": 55497709, "comment_id": 97730622, "body": "I have closed this for now as I agree that this question is too broad, and also not a good fit as any answer would be outdated on a regular basis. If someone disagrees with my judgment here, I would suggest they post a question on Meta instead of engaging in close and reopen wars."}], "answers": [{"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 3, "creation_date": 1554302366, "post_id": 55497760, "comment_id": 97702582, "body": "C++20 is getting a date library."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 1, "creation_date": 1554302385, "post_id": 55497760, "comment_id": 97702598, "body": "Actually, a <a href=\"https://howardhinnant.github.io/date/d0355r7.html\" rel=\"nofollow noreferrer\">date library by Howard Hinnant</a> was voted into the draft for C++20 (so although it doesn&#39;t have one quite yet, it soon will)."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1554302428, "post_id": 55497760, "comment_id": 97702625, "body": "Would you like a date?"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1554302445, "post_id": 55497760, "comment_id": 97702637, "body": "boost asio  - network API boost beast - network protocols http websocket"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1554302448, "post_id": 55497760, "comment_id": 97702640, "body": "@SombreroChicken; I thought you&#39;d never ask. What kind of duration?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1554302456, "post_id": 55497760, "comment_id": 97702645, "body": "And linear algebra might appear for C++23. Or not."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1554302492, "post_id": 55497760, "comment_id": 97702665, "body": "<code>std::numeric_limits&lt;Bathsheba&gt;::infinity()</code>."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1554302849, "post_id": 55497760, "comment_id": 97702927, "body": "@JerryCoffin: I&#39;ll take a look. It would need to support things like leap seconds (none of that Google smear nonsense) and ideally transitions from Julian to Gregorian to keep the historians happy."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1554303179, "post_id": 55497760, "comment_id": 97703201, "body": "Wait, so Bathsheba has a floating point? I&#39;d never have guessed..."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 2, "creation_date": 1554304989, "post_id": 55497760, "comment_id": 97704452, "body": "@Bathsheba: It includes: &quot;Several &lt;chrono&gt; clocks for computing with leap seconds which is also supported by the IANA Time Zone Database.&quot; I&#39;m less certain about Julian calendar support. That&#39;s tougher to do, since the date of transition from Julian to Gregorian varies widely (anywhere from 15th century in Catholic European countries to sometime in the future--if ever--for Orthodox Catholic churches, among others)."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 3, "last_activity_date": 1554302526, "last_edit_date": 1554302526, "creation_date": 1554302140, "answer_id": 55497760, "question_id": 55497709, "link": "https://stackoverflow.com/questions/55497709/what-can-boost-do-that-modern-c-cannot/55497760#55497760", "title": "What can Boost do that modern C++ cannot?", "body": "<p>Date libraries (over which there would be too much of a disagreement to be in the C++ standard - look at the mess in Java), Boost Spirit, multiprecision, and linear algebra libraries are things that are not in the C++ standard.</p>\n\n<p>Plus a definition of <em>pi</em>.</p>\n\n<p>Because many feature in Boost eventually make themselves into the standard (<code>std::regex</code>, <code>std::unique_ptr</code>, <code>std::thread</code>, <code>std::unordered_map</code>) with minimal changes, Boost is well-worth sticking with.</p>\n\n<p>Personally I'd bet dinner at the Fat Duck in Bray, England on Boost Spirit never making the C++ standard in the next 20 years - anyone want to take the other side?</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 5, "last_activity_date": 1554305095, "creation_date": 1554305095, "answer_id": 55498810, "question_id": 55497709, "link": "https://stackoverflow.com/questions/55497709/what-can-boost-do-that-modern-c-cannot/55498810#55498810", "title": "What can Boost do that modern C++ cannot?", "body": "<p>Boost has a wide variety of libraries most of which haven't been incorporated into the standard library. They include but are not limited to:</p>\n\n<ul>\n<li>Networking and other inter process communication</li>\n<li>Linear algebra</li>\n<li>Serialisation</li>\n<li>Parsing</li>\n<li>Signals &amp; Slots</li>\n<li>much more... </li>\n</ul>\n\n<p>Furthermore, using Boost for features that are in \nC++17 gives you some compatibility to older compilers. </p>\n"}], "owner": {"reputation": 36829, "user_id": 3497671, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f83baf1bb818fad4fb1559ac2bf0304d?s=128&d=identicon&r=PG", "display_name": "Francesco Borzi", "link": "https://stackoverflow.com/users/3497671/francesco-borzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1628, "favorite_count": 1, "closed_date": 1554371243, "answer_count": 2, "score": 2, "last_activity_date": 1554309108, "creation_date": 1554302002, "last_edit_date": 1554302696, "question_id": 55497709, "link": "https://stackoverflow.com/questions/55497709/what-can-boost-do-that-modern-c-cannot", "closed_reason": "Needs more focus", "title": "What can Boost do that modern C++ cannot?", "body": "<p>Considering latest modern C++, so C++17, are there any features that Boost has that are not available in modern C++?</p>\n\n<p>In other words: is there anything you cannot accomplish (with a reasonable solution) with modern C++ for which you need to include Boost as a dependency in your project?</p>\n\n<p>Can you please provide a list of such features, that are in Boost and NOT in modern C++17?</p>\n\n<p>And what about C++11 and C++14?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1554301744, "post_id": 55497518, "comment_id": 97702152, "body": "ot: <code>if (condition) return true; else return false;</code> is the same as <code>return condition;</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1554301876, "post_id": 55497518, "comment_id": 97702257, "body": "Voting to close as a typo.  <code>find_if</code> takes a comparator.  <code>find</code> takes a value of the range element type.  <code>auto result = find(begin(staff), end(staff), [searchName](Employee e)-&gt;bool {return e.firstname == searchName; });</code> -&gt; <code>auto result = find_if(begin(staff), end(staff), [searchName](Employee e)-&gt;bool {return e.firstname == searchName; });</code>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1554304588, "post_id": 55497518, "comment_id": 97704190, "body": "That lambda might as well take a <code>const Employee&amp;</code> (or <code>const auto&amp;</code>). There&#39;s no need to create a copy of each element in the container."}], "answers": [{"tags": [], "owner": {"reputation": 2014, "user_id": 6397798, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/645e8642225ab706cb9b7ef8ff31364e?s=128&d=identicon&r=PG&f=1", "display_name": "bracco23", "link": "https://stackoverflow.com/users/6397798/bracco23"}, "is_accepted": false, "score": 9, "last_activity_date": 1554301857, "creation_date": 1554301857, "answer_id": 55497651, "question_id": 55497518, "link": "https://stackoverflow.com/questions/55497518/how-to-use-lambda-expressions-with-custom-class-objects/55497651#55497651", "title": "How to use Lambda expressions with custom class objects", "body": "<p>I think you are using the wrong function. According to <a href=\"https://it.cppreference.com/w/cpp/algorithm/find\" rel=\"noreferrer\">this</a>, <code>find</code> has as a third parameter a constant value, while <code>find_if</code> has a <code>UnaryPredicate</code>, which is what you are trying to achieve.</p>\n\n<p>Change with <code>find_if</code> and it will compile.</p>\n"}], "owner": {"reputation": 11, "user_id": 1886924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50d69f369d292bc00ec9c1b0bdb917b3?s=128&d=identicon&r=PG", "display_name": "user1886924", "link": "https://stackoverflow.com/users/1886924/user1886924"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554301857, "creation_date": 1554301503, "question_id": 55497518, "link": "https://stackoverflow.com/questions/55497518/how-to-use-lambda-expressions-with-custom-class-objects", "title": "How to use Lambda expressions with custom class objects", "body": "<p>Trying to use a Lambda expression in STL::find to locate a particular object in a vector</p>\n\n<p>I have written my code based on several examples and have tried many different variations of the Lambda, captures, etc. I have overloaded the '==' operator for my class (not sure if I need to in this case, since I'm not actually comparing object to object, but object.property to object.property)</p>\n\n<pre><code>//MAIN.cpp\n\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include \"Employee.h\"\nusing namespace std;\n\nint main()\n{\n    std::vector&lt;Employee&gt; staff\n    {\n        { \"Kate\", \"Gregory\", 1000 },\n        { \"Obvious\", \"Artificial\", 2000 },\n        { \"Fake\", \"Name\", 1000 },\n        { \"Alan\", \"Turing\", 2000 },\n        { \"Grace\", \"Hopper\", 2000 },\n        { \"Anita\", \"Borg\", 2000 }\n    };\n\n    auto v3 = staff;\n    sort(begin(v3), end(v3));\n\n    string searchName = \"Hopper\";\n    auto result = find(begin(staff), end(staff), [searchName](Employee e)-&gt;bool {return e.firstname == searchName; });\n\n    return 0;\n}\n\n\n//EMPLOYEE CLASS (in Employee.h)\n#pragma once\n#include &lt;string&gt;\n\nclass Employee\n{\npublic:\n    Employee(std::string first, std::string last, int sal) :\n        firstname(first), lastname(last), salary(sal) {}\n\n    int getSalary() { return salary; }\n    std::string getSortingName() { return lastname + \", \" + firstname; }\n\n    std::string firstname;\n    std::string lastname;\n    int salary;\n\n    bool operator &lt; (const Employee&amp; other)\n    {\n        if (lastname &lt; other.lastname)\n            return true;\n        else\n            return false;\n    }\n\n    bool operator == (Employee other)\n    {\n        if (lastname == other.lastname &amp;&amp;\n            firstname == other.firstname &amp;&amp;\n            salary == other.salary)\n        {\n            return true;\n        }\n        else\n        {\n            return false;\n        }\n    }\n};\n</code></pre>\n\n<p>When compiling, I get the following error code:</p>\n\n<p>Error   C2678   binary '==': no operator found which takes a left-hand operand of type 'Employee' (or there is no acceptable conversion)</p>\n\n<p>studio\\2017\\community\\vc\\tools\\msvc\\14.16.27023\\include\\xutility    3520    </p>\n\n<p>It almost seems like no matter what I do, I get this same error. The only way I have been able to defeat it is to comment out the failing line...that starts with \"auto result = find...\"</p>\n"}, {"tags": ["android", "c++", "firebase", "admob", "cocos2d-x"], "answers": [{"tags": [], "owner": {"reputation": 874, "user_id": 807038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f02ac45657470879afd9885d78797425?s=128&d=identicon&r=PG", "display_name": "Oren Bengigi", "link": "https://stackoverflow.com/users/807038/oren-bengigi"}, "is_accepted": false, "score": 0, "last_activity_date": 1557826910, "creation_date": 1557826910, "answer_id": 56127374, "question_id": 55497474, "link": "https://stackoverflow.com/questions/55497474/why-android-application-gives-compiler-error-for-admob-integration-using-firebas/56127374#56127374", "title": "Why android application gives compiler error for Admob integration using Firebase using c++ SDK", "body": "<p>It cannot find the h files. make sure to update your LOCAL_C_INCLUDES with the correct path</p>\n"}], "owner": {"reputation": 1252, "user_id": 2035372, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/oaOHO.jpg?s=128&g=1", "display_name": "Rohit Kale", "link": "https://stackoverflow.com/users/2035372/rohit-kale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557826910, "creation_date": 1554301412, "question_id": 55497474, "link": "https://stackoverflow.com/questions/55497474/why-android-application-gives-compiler-error-for-admob-integration-using-firebas", "title": "Why android application gives compiler error for Admob integration using Firebase using c++ SDK", "body": "<p>I want to integrate AdMob in cocos2dx 3.17 c++. I have referred <a href=\"https://firebase.google.com/docs/admob/cpp/cocos2d-x\" rel=\"nofollow noreferrer\">https://firebase.google.com/docs/admob/cpp/cocos2d-x</a> link. But I am getting error : </p>\n\n<pre><code>Error while executing process /Users/Test/Library/Android/sdk/cmake/3.10.2.4988404/bin/cmake with arguments {--build /Users/Test/Work/Live/Cocos2d/Projets/AmazingWordQuest/proj.android/app/.externalNativeBuild/cmake/debug/armeabi-v7a --target MyGame}\n[1/718] Building CXX object CMakeFiles/MyGame.dir/Classes/FirebaseHelper.cpp.o\nFAILED: CMakeFiles/MyGame.dir/Classes/FirebaseHelper.cpp.o \n/Users/Test/Work/Live/Cocos2d/SDK_Framework/android-ndk-r19b/toolchains/llvm/prebuilt/darwin-x86_64/bin/clang++ --target=armv7-none-linux-androideabi16 --gcc-toolchain=/Users/Test/Work/Live/Cocos2d/SDK_Framework/android-ndk-r19b/toolchains/llvm/prebuilt/darwin-x86_64 --sysroot=/Users/Test/Work/Live/Cocos2d/SDK_Framework/android-ndk-r19b/toolchains/llvm/prebuilt/darwin-x86_64/sysroot  -DANDROID -DCOCOS2D_DEBUG=1 -DLWS_WITH_LIBUV -DMyGame_EXPORTS -DUSE_FILE32API -I../../../../../../Classes -I../../../../../../cocos2d/cocos/audio/include -I../../../../../../cocos2d -I../../../../../../cocos2d/cocos -I../../../../../../cocos2d/extensions -I../../../../../../cocos2d/cocos/platform -I../../../../../../cocos2d/cocos/base -I../../../../../../cocos2d/cocos/editor-support -I../../../../../../cocos2d/cocos/platform/android -isystem ../../../../../../cocos2d/external/Box2D/include -isystem ../../../../../../cocos2d/external/chipmunk/include -isystem ../../../../../../cocos2d/external/freetype2/include/android/freetype2 -I../../../../../../cocos2d/external/recast/.. -isystem ../../../../../../cocos2d/external/jpeg/include/android -isystem ../../../../../../cocos2d/external/uv/include -isystem ../../../../../../cocos2d/external/webp/include/android -isystem ../../../../../../cocos2d/external/bullet/include -isystem ../../../../../../cocos2d/external/bullet/include/bullet -isystem ../../../../../../cocos2d/external/openssl/include/android -isystem ../../../../../../cocos2d/external/tiff/include/android -isystem ../../../../../../cocos2d/external/websockets/include/android -I../../../../../../cocos2d/external/tinyxml2/. -I../../../../../../cocos2d/external/xxhash/. -I../../../../../../cocos2d/external/xxtea/. -I../../../../../../cocos2d/external/clipper/. -I../../../../../../cocos2d/external/edtaa3func/. -I../../../../../../cocos2d/external/ConvertUTF/. -I../../../../../../cocos2d/external/poly2tri/.. -I../../../../../../cocos2d/external/md5/.. -isystem ../../../../../../cocos2d/external/curl/include/android -isystem ../../../../../../cocos2d/external/png/include/android -I/Users/Test/Work/Live/Cocos2d/SDK_Framework/android-ndk-r19b/sources/android/cpufeatures -I../../../../../../cocos2d/external/android-specific/pvmp3dec/include -I../../../../../../cocos2d/external/android-specific/pvmp3dec/src -I../../../../../../cocos2d/external/android-specific/tremolo/. -isystem ../../../../../../cocos2d/external/zlib/include -I../../../../../../cocos2d/external/unzip/. -g -DANDROID -fdata-sections -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -mfpu=vfpv3-d16 -fno-addrsig -march=armv7-a -mthumb -mfpu=neon -Wa,--noexecstack -Wformat -Werror=format-security -stdlib=libc++ -frtti -fexceptions -fsigned-char -O0 -fno-limit-debug-info  -fPIC   -std=gnu++11 -MD -MT CMakeFiles/MyGame.dir/Classes/FirebaseHelper.cpp.o -MF CMakeFiles/MyGame.dir/Classes/FirebaseHelper.cpp.o.d -o CMakeFiles/MyGame.dir/Classes/FirebaseHelper.cpp.o -c ../../../../../../Classes/FirebaseHelper.cpp\nIn file included from ../../../../../../Classes/FirebaseHelper.cpp:1:\n../../../../../../Classes/FirebaseHelper.h:7:10: fatal error: 'firebase/admob/types.h' file not found\n#include \"firebase/admob/types.h\"\n         ^~~~~~~~~~~~~~~~~~~~~~~~\n1 error generated.\n[2/718] Building CXX object engine/cocos/core/CMakeFiles/cocos2d.dir/2d/CCActionManager.cpp.o\n[3/718] Building CXX object engine/cocos/core/CMakeFiles/cocos2d.dir/2d/CCActionInstant.cpp.o\n[4/718] Building CXX object engine/cocos/core/CMakeFiles/cocos2d.dir/2d/CCActionProgressTimer.cpp.o\n[5/718] Building CXX object engine/cocos/core/CMakeFiles/cocos2d.dir/2d/CCActionPageTurn3D.cpp.o\n[6/718] Building CXX object engine/cocos/core/CMakeFiles/cocos2d.dir/2d/CCActionGrid.cpp.o\n[7/718] Building CXX object engine/cocos/core/CMakeFiles/cocos2d.dir/2d/CCActionTiledGrid.cpp.o\n[8/718] Building CXX object engine/cocos/core/CMakeFiles/cocos2d.dir/2d/CCActionInterval.cpp.o\n[9/718] Building CXX object CMakeFiles/MyGame.dir/Classes/AppDelegate.cpp.o\nFAILED: CMakeFiles/MyGame.dir/Classes/AppDelegate.cpp.o \n/Users/Test/Work/Live/Cocos2d/SDK_Framework/android-ndk-r19b/toolchains/llvm/prebuilt/darwin-x86_64/bin/clang++ --target=armv7-none-linux-androideabi16 --gcc-toolchain=/Users/Test/Work/Live/Cocos2d/SDK_Framework/android-ndk-r19b/toolchains/llvm/prebuilt/darwin-x86_64 --sysroot=/Users/Test/Work/Live/Cocos2d/SDK_Framework/android-ndk-r19b/toolchains/llvm/prebuilt/darwin-x86_64/sysroot  -DANDROID -DCOCOS2D_DEBUG=1 -DLWS_WITH_LIBUV -DMyGame_EXPORTS -DUSE_FILE32API -I../../../../../../Classes -I../../../../../../cocos2d/cocos/audio/include -I../../../../../../cocos2d -I../../../../../../cocos2d/cocos -I../../../../../../cocos2d/extensions -I../../../../../../cocos2d/cocos/platform -I../../../../../../cocos2d/cocos/base -I../../../../../../cocos2d/cocos/editor-support -I../../../../../../cocos2d/cocos/platform/android -isystem ../../../../../../cocos2d/external/Box2D/include -isystem ../../../../../../cocos2d/external/chipmunk/include -isystem ../../../../../../cocos2d/external/freetype2/include/android/freetype2 -I../../../../../../cocos2d/external/recast/.. -isystem ../../../../../../cocos2d/external/jpeg/include/android -isystem ../../../../../../cocos2d/external/uv/include -isystem ../../../../../../cocos2d/external/webp/include/android -isystem ../../../../../../cocos2d/external/bullet/include -isystem ../../../../../../cocos2d/external/bullet/include/bullet -isystem ../../../../../../cocos2d/external/openssl/include/android -isystem ../../../../../../cocos2d/external/tiff/include/android -isystem ../../../../../../cocos2d/external/websockets/include/android -I../../../../../../cocos2d/external/tinyxml2/. -I../../../../../../cocos2d/external/xxhash/. -I../../../../../../cocos2d/external/xxtea/. -I../../../../../../cocos2d/external/clipper/. -I../../../../../../cocos2d/external/edtaa3func/. -I../../../../../../cocos2d/external/ConvertUTF/. -I../../../../../../cocos2d/external/poly2tri/.. -I../../../../../../cocos2d/external/md5/.. -isystem ../../../../../../cocos2d/external/curl/include/android -isystem ../../../../../../cocos2d/external/png/include/android -I/Users/Test/Work/Live/Cocos2d/SDK_Framework/android-ndk-r19b/sources/android/cpufeatures -I../../../../../../cocos2d/external/android-specific/pvmp3dec/include -I../../../../../../cocos2d/external/android-specific/pvmp3dec/src -I../../../../../../cocos2d/external/android-specific/tremolo/. -isystem ../../../../../../cocos2d/external/zlib/include -I../../../../../../cocos2d/external/unzip/. -g -DANDROID -fdata-sections -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -mfpu=vfpv3-d16 -fno-addrsig -march=armv7-a -mthumb -mfpu=neon -Wa,--noexecstack -Wformat -Werror=format-security -stdlib=libc++ -frtti -fexceptions -fsigned-char -O0 -fno-limit-debug-info  -fPIC   -std=gnu++11 -MD -MT CMakeFiles/MyGame.dir/Classes/AppDelegate.cpp.o -MF CMakeFiles/MyGame.dir/Classes/AppDelegate.cpp.o.d -o CMakeFiles/MyGame.dir/Classes/AppDelegate.cpp.o -c ../../../../../../Classes/AppDelegate.cpp\n../../../../../../Classes/AppDelegate.cpp:28:10: fatal error: 'firebase/app.h' file not found\n#include \"firebase/app.h\"\n         ^~~~~~~~~~~~~~~~\n1 error generated.\n[10/718] Building CXX object CMakeFiles/MyGame.dir/Classes/HelloWorldScene.cpp.o\nFAILED: CMakeFiles/MyGame.dir/Classes/HelloWorldScene.cpp.o \n/Users/Test/Work/Live/Cocos2d/SDK_Framework/android-ndk-r19b/toolchains/llvm/prebuilt/darwin-x86_64/bin/clang++ --target=armv7-none-linux-androideabi16 --gcc-toolchain=/Users/Test/Work/Live/Cocos2d/SDK_Framework/android-ndk-r19b/toolchains/llvm/prebuilt/darwin-x86_64 --sysroot=/Users/Test/Work/Live/Cocos2d/SDK_Framework/android-ndk-r19b/toolchains/llvm/prebuilt/darwin-x86_64/sysroot  -DANDROID -DCOCOS2D_DEBUG=1 -DLWS_WITH_LIBUV -DMyGame_EXPORTS -DUSE_FILE32API -I../../../../../../Classes -I../../../../../../cocos2d/cocos/audio/include -I../../../../../../cocos2d -I../../../../../../cocos2d/cocos -I../../../../../../cocos2d/extensions -I../../../../../../cocos2d/cocos/platform -I../../../../../../cocos2d/cocos/base -I../../../../../../cocos2d/cocos/editor-support -I../../../../../../cocos2d/cocos/platform/android -isystem ../../../../../../cocos2d/external/Box2D/include -isystem ../../../../../../cocos2d/external/chipmunk/include -isystem ../../../../../../cocos2d/external/freetype2/include/android/freetype2 -I../../../../../../cocos2d/external/recast/.. -isystem ../../../../../../cocos2d/external/jpeg/include/android -isystem ../../../../../../cocos2d/external/uv/include -isystem ../../../../../../cocos2d/external/webp/include/android -isystem ../../../../../../cocos2d/external/bullet/include -isystem ../../../../../../cocos2d/external/bullet/include/bullet -isystem ../../../../../../cocos2d/external/openssl/include/android -isystem ../../../../../../cocos2d/external/tiff/include/android -isystem ../../../../../../cocos2d/external/websockets/include/android -I../../../../../../cocos2d/external/tinyxml2/. -I../../../../../../cocos2d/external/xxhash/. -I../../../../../../cocos2d/external/xxtea/. -I../../../../../../cocos2d/external/clipper/. -I../../../../../../cocos2d/external/edtaa3func/. -I../../../../../../cocos2d/external/ConvertUTF/. -I../../../../../../cocos2d/external/poly2tri/.. -I../../../../../../cocos2d/external/md5/.. -isystem ../../../../../../cocos2d/external/curl/include/android -isystem ../../../../../../cocos2d/external/png/include/android -I/Users/Test/Work/Live/Cocos2d/SDK_Framework/android-ndk-r19b/sources/android/cpufeatures -I../../../../../../cocos2d/external/android-specific/pvmp3dec/include -I../../../../../../cocos2d/external/android-specific/pvmp3dec/src -I../../../../../../cocos2d/external/android-specific/tremolo/. -isystem ../../../../../../cocos2d/external/zlib/include -I../../../../../../cocos2d/external/unzip/. -g -DANDROID -fdata-sections -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -mfpu=vfpv3-d16 -fno-addrsig -march=armv7-a -mthumb -mfpu=neon -Wa,--noexecstack -Wformat -Werror=format-security -stdlib=libc++ -frtti -fexceptions -fsigned-char -O0 -fno-limit-debug-info  -fPIC   -std=gnu++11 -MD -MT CMakeFiles/MyGame.dir/Classes/HelloWorldScene.cpp.o -MF CMakeFiles/MyGame.dir/Classes/HelloWorldScene.cpp.o.d -o CMakeFiles/MyGame.dir/Classes/HelloWorldScene.cpp.o -c ../../../../../../Classes/HelloWorldScene.cpp\nIn file included from ../../../../../../Classes/HelloWorldScene.cpp:28:\n../../../../../../Classes/FirebaseHelper.h:7:10: fatal error: 'firebase/admob/types.h' file not found\n#include \"firebase/admob/types.h\"\n         ^~~~~~~~~~~~~~~~~~~~~~~~\n1 error generated.\nninja:build stopped: subcommand failed.\n</code></pre>\n"}, {"tags": ["c++", "windows", "console"], "answers": [{"comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 3, "creation_date": 1554335498, "post_id": 55498324, "comment_id": 97717600, "body": "You&#39;re clearing all other flags. You want this instead: <code>ENABLE_EXTENDED_FLAGS | (prev_mode &amp; ~ENABLE_QUICK_EDIT_MODE)</code>. It&#39;s possible for extended flags to be disabled while quick-edit mode is enabled (e.g. if the mode was set to 7 in a previous call), so we have to explicitly include <code>ENABLE_EXTENDED_FLAGS</code>."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 1, "creation_date": 1554335626, "post_id": 55498324, "comment_id": 97717622, "body": "Also, remember the error checking in your actual code. It&#39;s possible for standard I/O to be redirected to pipes or disk files, so you can&#39;t blindly assume that console functions such as <code>GetConsoleMode</code> and <code>_getch</code> will succeed. You need a fallback for non-console I/O."}, {"owner": {"reputation": 154, "user_id": 4329358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e091afbd41cbcbe0f0f81392e571ae?s=128&d=identicon&r=PG", "display_name": "Daisuke Aramaki", "link": "https://stackoverflow.com/users/4329358/daisuke-aramaki"}, "edited": false, "score": 0, "creation_date": 1607185534, "post_id": 55498324, "comment_id": 115195185, "body": "Thank you for this. It solved a problem I&#39;m having testing at the command line."}], "tags": [], "owner": {"reputation": 123, "user_id": 10127623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1574d8082da0352f190c8d887349c214?s=128&d=identicon&r=PG&f=1", "display_name": "Nnnnn", "link": "https://stackoverflow.com/users/10127623/nnnnn"}, "is_accepted": false, "score": 1, "last_activity_date": 1554303702, "creation_date": 1554303702, "answer_id": 55498324, "question_id": 55497407, "link": "https://stackoverflow.com/questions/55497407/disable-quick-edit-mode-for-console-from-c/55498324#55498324", "title": "disable quick edit mode for console from c++", "body": "<p>There is a very silly mistake in the code. The problem with the code is that <code>hInput HANDLE</code> wasn't initialized with <code>STD_INPUT_HANDLE</code> and therefore the method <code>SetConsoleMode</code> wasn't working. The working code is as below.</p>\n\n<pre><code>#include&lt;conio.h&gt;\n#include&lt;iostream&gt;\n#include&lt;windows.h&gt;\nusing namespace std;\n\n\nint main(){\n    HANDLE hInput;\n    DWORD prev_mode;\n    hInput = GetStdHandle(STD_INPUT_HANDLE);\n    GetConsoleMode(hInput, &amp;prev_mode); \n    SetConsoleMode(hInput, prev_mode &amp; ENABLE_EXTENDED_FLAGS);\n    cout&lt;&lt;\"The quick edit mode stopped now press any key to re enable it\"&lt;&lt;endl;\n    _getch();\n    SetConsoleMode(hInput, prev_mode);\n    cout&lt;&lt;\"Quick edit mode reenabled click any key to exit\";\n    _getch();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 10127623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1574d8082da0352f190c8d887349c214?s=128&d=identicon&r=PG&f=1", "display_name": "Nnnnn", "link": "https://stackoverflow.com/users/10127623/nnnnn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1721, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1554303702, "creation_date": 1554301238, "question_id": 55497407, "link": "https://stackoverflow.com/questions/55497407/disable-quick-edit-mode-for-console-from-c", "title": "disable quick edit mode for console from c++", "body": "<p>I am trying to disable the quick edit mode of my console by my c++ program because in my application i don't want any selection. I also do not want any pause, as when someone clicks with this mode on it pauses the game. I have looked online and some documentation but i don't know what i have been doing wrong.\nI first tried below code from another question on stack overflow it didn't work. </p>\n\n<pre><code>#include&lt;conio.h&gt;\n#include&lt;iostream&gt;\n#include&lt;windows.h&gt;\nusing namespace std;\n\n\nint main(){\n    HANDLE hInput;\n    DWORD prev_mode;\n    GetConsoleMode(hInput, &amp;prev_mode); \n    SetConsoleMode(hInput, prev_mode &amp; ~ENABLE_QUICK_EDIT_MODE);\n\n    cout&lt;&lt;\"The quick edit mode stopped now press any key to re enable it\"&lt;&lt;endl;\n    _getch();\n    SetConsoleMode(hInput, prev_mode);\n    cout&lt;&lt;\"Quick edit mode reenabled click any key to exit\";\n    _getch();\n    return 0;\n}\n</code></pre>\n\n<p>then i looked up <a href=\"https://docs.microsoft.com/en-us/windows/console/setconsolemode\" rel=\"nofollow noreferrer\">this documentation</a> and their i found something like this for <code>SetConsoleMode</code>.</p>\n\n<blockquote>\n  <p>This flag enables the user to use the mouse to select and edit text.</p>\n  \n  <p>To enable this mode, use ENABLE_QUICK_EDIT_MODE |\n  ENABLE_EXTENDED_FLAGS. To disable this mode, use ENABLE_EXTENDED_FLAGS\n  without this flag.</p>\n</blockquote>\n\n<p>Then i replaced <code>~ENABLE_QUICK_EDIT_MODE</code> with <code>ENABLE_EXTENDED_FLAGS</code> and same result again i want to know what i am doing wrong. \nI want to disable quick edit mode.</p>\n"}, {"tags": ["c++", "tcp"], "comments": [{"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1554301777, "post_id": 55497366, "comment_id": 97702179, "body": "The <code>ntoh*</code> and <code>hton*</code> functions provide a portable way of transferring unsigned integers. Floating points don&#39;t need to have the same layout on one platform as the other so you could end up with a trap representation by doing that."}], "answers": [{"comments": [{"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1554302304, "post_id": 55497604, "comment_id": 97702539, "body": "On some platforms <code>htonl</code> and <code>ntohl</code> are no-ops (non-reversing) - and also, the layout of a <code>double</code> on the receiving side may not be compatible with the sending side."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 47, "user_id": 7809501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3dd85dfc71a35e56be1cb78503802bb6?s=128&d=identicon&r=PG&f=1", "display_name": "asdfghjkl", "link": "https://stackoverflow.com/users/7809501/asdfghjkl"}, "edited": false, "score": 0, "creation_date": 1554303475, "post_id": 55497604, "comment_id": 97703442, "body": "@asdfghjkl just be aware that it&#39;s not portable."}, {"owner": {"reputation": 596, "user_id": 789371, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a6a8d60cf810d14224154d35a1854aaf?s=128&d=identicon&r=PG", "display_name": "nulleight", "link": "https://stackoverflow.com/users/789371/nulleight"}, "edited": false, "score": 0, "creation_date": 1554305392, "post_id": 55497604, "comment_id": 97704705, "body": "If you decided to use sizeof(double), I think it makes sense to use it everywhere instead of 4 or 7 magic numbers. So instead of 7 I would use sizeof(double) - 1 and instead of 4 sizeof(double) / 2."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1554305640, "post_id": 55497604, "comment_id": 97704846, "body": "Modified to removed remaining magic numbers and to perform an endianness check."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1554305518, "last_edit_date": 1554305518, "creation_date": 1554301719, "answer_id": 55497604, "question_id": 55497366, "link": "https://stackoverflow.com/questions/55497366/how-to-correctly-convert-stream-of-various-known-length-packets-that-are-also/55497604#55497604", "title": "How to correctly convert stream of various (known) length packets that are also different data types?", "body": "<p>The <code>ntohl</code> function expects a 32 bit integer and changes the value so effectively the bytes are swapped, assuming host byte order is little endian.  It will not work on a value of type <code>double</code>.</p>\n\n<p>You need to read the value into a <code>char</code> array of size 8, reverse the bytes, then use <code>memcpy</code> to copy the bytes into a <code>double</code>.</p>\n\n<pre><code>int i;\nunsigned char dbuff[sizeof(double)];\nrecv(sock, dbuff, sizeof(dbuff), 0);\n\nif (ntohl(0x12345678) == 0x78563412) {\n    for (i=0; i&lt;sizeof(double)/2; i++) {\n        unsigned char tmp = dbuff[i];\n        dbuff[i] = dbuff[sizeof(double)-1-i];\n        dbuff[sizeof(double)-1-i] = tmp;\n    }\n}\n\ndouble val;\nmemcpy(&amp;val, dbuff, sizeof(double));\n</code></pre>\n\n<p>Note that this is dependent on both the sender and the receiver having the same representation for a <code>double</code>.</p>\n"}], "owner": {"reputation": 47, "user_id": 7809501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3dd85dfc71a35e56be1cb78503802bb6?s=128&d=identicon&r=PG&f=1", "display_name": "asdfghjkl", "link": "https://stackoverflow.com/users/7809501/asdfghjkl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 55497604, "answer_count": 1, "score": 1, "last_activity_date": 1555613687, "creation_date": 1554301086, "last_edit_date": 1555613687, "question_id": 55497366, "link": "https://stackoverflow.com/questions/55497366/how-to-correctly-convert-stream-of-various-known-length-packets-that-are-also", "title": "How to correctly convert stream of various (known) length packets that are also different data types?", "body": "<h3>Problem:</h3>\n\n<p>I'm writing a C++ program where I want to read a stream of data from a TCP/IP socket. The data consists of several packets of various lengths and data types, however, it is all received in hex format. The lengths of the packets and their data types can be seen in this image: \n<img src=\"https://i.imgur.com/epAAHHY.png\" alt=\"table\">. \nI want to convert the received hex formatted data back to the packets' respective original data types.</p>\n\n<h3>Background and what I've tried:</h3>\n\n<p>I have found a rather easy way to do this in Python:<br>\n- Receive each packet according to their known length<br>\n- Encode them as hex<br>\n- unpack them according to their data type  </p>\n\n<p>Here's a sample:</p>\n\n<pre><code>import socket\nimport struct\nHOST = \"192.168.0.25\" # The remote host\nPORT_30003 = 30003\n\nwhile (True):\n    try:\n        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n        s.connect((HOST, PORT_30003))\n        print \"\"\n        packet_1 = s.recv(4)\n        packet_2 = s.recv(8)\n        packet_3 = s.recv(48)\n        packet_4 = s.recv(48)\n        packet_5 = s.recv(48)\n        packet_6 = s.recv(48)\n        packet_7 = s.recv(48) \n        packet_8 = s.recv(48)\n        packet_9 = s.recv(48)\n        packet_10 = s.recv(48)\n        packet_11 = s.recv(48)\n\n        packet_1 = packet_1.encode(\"hex\")\n        messageSize = struct.unpack('!i', packet_1.decode('hex'))[0]\n        print \"messageSize = \", messageSize\n\n        packet_2 = packet_2.encode(\"hex\")\n        Time = struct.unpack('!d', packet_2.decode('hex'))[0]\n        print \"Time = \", Time\n</code></pre>\n\n<p>I don't care a lot about these next packets, so I'll jump to the relevant ones (from packet_12 and onwards). I'm going to split each 48 byte packet into smaller 8 byte size packets, since the 48 bytes is actually 6 separate values as detailed in the picture above...</p>\n\n<pre><code> packet_12x = s.recv(8)\n packet_12x = packet_12x.encode(\"hex\")\n x = struct.unpack('!d', packet_12x.decode('hex'))[0]\n print \"X = \", x * 1000\n\n packet_12y = s.recv(8)\n packet_12y = packet_12y.encode(\"hex\")\n y = struct.unpack('!d', packet_12y.decode('hex'))[0]\n print \"Y = \", y * 1000\n\n # And so on.....\n</code></pre>\n\n<p>This produces the message length (which should always be 1108), the server's time and the X, Y position of the robot's tool. </p>\n\n<hr>\n\n<h3>The C++ attempt:</h3>\n\n<p>When attempting this in C++ I'm getting a bit confused with the data types, byte ordering, etc. I have managed to produce the first packet correctly (printing 1108 as I expect). However, the next packet does not match the output from the Python implementation. Here's what I have:</p>\n\n<pre><code>connectTcpClient(\"192.168.0.25\");\n\n// This works as expected\nint buffer1; \nrecv(sock, &amp;buffer1, 4, 0);\nbuffer1 = ntohl(buffer1);\n\n// Prints \"messageSize = 1108\"\nstd::cout &lt;&lt; \"messageSize = \" &lt;&lt; buffer1 &lt;&lt; std::endl; \n\n// This does not produce the same result as the Python code\n// When trying with a unsigned long long int instead of double \ndouble buffer2; \nrecv(sock, &amp;buffer2, 8, 0);\nbuffer2 = ntohl(buffer2);\n\n// This prints \"Time: 0\"\nstd::cout &lt;&lt; \"Time: \" &lt;&lt; buffer2 &lt;&lt; std::endl; \n\n</code></pre>\n\n<p>If I instead try declaring my <code>buffer2</code> as such: \n<code>unsigned long long int buffer2</code><br>\nI get something closer to what I want, however it is of course not a double like I expect. And casting <code>buffer2</code> to a <code>double</code> simply results in a 0.</p>\n\n<h3>Expected result</h3>\n\n<p>I expect the time to be something like 1379408.432, instead of an integer. The X, Y, and Z coordinates from packet_12 also should be doubles.</p>\n"}, {"tags": ["c++", "qt", "rendering", "qtcharts"], "answers": [{"comments": [{"owner": {"reputation": 2401, "user_id": 7431005, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/faf76298f3d4f60915eee51da1ee7c3f?s=128&d=identicon&r=PG&f=1", "display_name": "user7431005", "link": "https://stackoverflow.com/users/7431005/user7431005"}, "edited": false, "score": 0, "creation_date": 1554301808, "post_id": 55497565, "comment_id": 97702203, "body": "<code>chartView-&gt;render(&amp;buffer);</code> gives the following error message: <code>error: no matching function for call to \u2018QtCharts::QChartView::render(QPixmap*)\u2019      chartView-&gt;render(&amp;buffer);</code>"}, {"owner": {"reputation": 3447, "user_id": 4297146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Zl9y3.jpg?s=128&g=1", "display_name": "mohabouje", "link": "https://stackoverflow.com/users/4297146/mohabouje"}, "reply_to_user": {"reputation": 2401, "user_id": 7431005, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/faf76298f3d4f60915eee51da1ee7c3f?s=128&d=identicon&r=PG&f=1", "display_name": "user7431005", "link": "https://stackoverflow.com/users/7431005/user7431005"}, "edited": false, "score": 0, "creation_date": 1554302865, "post_id": 55497565, "comment_id": 97702942, "body": "Ups, the proper interface expects a QPainter instead of a QPixmap, you can allways use a QPainter to draw on a QPixmap."}], "tags": [], "owner": {"reputation": 3447, "user_id": 4297146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Zl9y3.jpg?s=128&g=1", "display_name": "mohabouje", "link": "https://stackoverflow.com/users/4297146/mohabouje"}, "is_accepted": true, "score": 1, "last_activity_date": 1554302904, "last_edit_date": 1554302904, "creation_date": 1554301645, "answer_id": 55497565, "question_id": 55497326, "link": "https://stackoverflow.com/questions/55497326/render-qchartview-with-high-resolution/55497565#55497565", "title": "render QChartView with high resolution", "body": "<p>You can scale your image by using <a href=\"https://doc.qt.io/qt-5/qpaintdevice.html#devicePixelRatioF\" rel=\"nofollow noreferrer\"><code>QPaintDevice::devicePixelRatioF()</code></a> and using a <code>QPixmap</code> instead of an image. </p>\n\n<pre><code>const auto dpr = chartView-&gt;devicePixelRatioF();\nQPixmap buffer(chartView-&gt;width() * dpr, chartView-&gt;height() * dpr);\nbuffer.setDevicePixelRatio(dpr);\nbuffer.fill(Qt::transparent);\n\nQPainter *paint = new QPainter(&amp;buffer);\npaint-&gt;setPen(*(new QColor(255,34,255,255)));\nchartView-&gt;render(paint);\n</code></pre>\n\n<p>Once the image is scaled to the proper resolution, you can convert it to a <code>QImage</code> or save it directly:</p>\n\n<pre><code>QFile file(\"image.png\");\nfile.open(QIODevice::WriteOnly);\nuffer.save(&amp;file, \"PNG\");\n</code></pre>\n"}], "owner": {"reputation": 2401, "user_id": 7431005, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/faf76298f3d4f60915eee51da1ee7c3f?s=128&d=identicon&r=PG&f=1", "display_name": "user7431005", "link": "https://stackoverflow.com/users/7431005/user7431005"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 729, "favorite_count": 1, "accepted_answer_id": 55497565, "answer_count": 1, "score": 0, "last_activity_date": 1554302904, "creation_date": 1554300969, "question_id": 55497326, "link": "https://stackoverflow.com/questions/55497326/render-qchartview-with-high-resolution", "title": "render QChartView with high resolution", "body": "<p>I want to save a QChartView as a .png image. Therefore I use the following code:</p>\n\n<pre><code>QChartView *chartView = qobject_cast&lt;QChartView*&gt;(/* get chart view */);\n\nQImage image;\nQPainter painter(&amp;image);\npainter.setRenderHint(QPainter::Antialiasing);\nchartView-&gt;render(&amp;painter);\nimage.save(\"test.png\");\n</code></pre>\n\n<p>When I look at the <code>test.png</code> image the resolution is quite bad. </p>\n\n<p>Can I somehow say, that the QChartView should be rendered with a fixed resolution like 150dpi or a fixed size like (500x700 pixels)? </p>\n"}, {"tags": ["c++", "opencv", "blob", "ellipse"], "comments": [{"owner": {"reputation": 1574, "user_id": 10911905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/464f9d95f48b6f1d2ab156181e59c05a?s=128&d=identicon&r=PG&f=1", "display_name": "Nuzhny", "link": "https://stackoverflow.com/users/10911905/nuzhny"}, "edited": false, "score": 0, "creation_date": 1554301347, "post_id": 55497306, "comment_id": 97701904, "body": "Try median blur instead GaussianBlur"}], "answers": [{"tags": [], "owner": {"reputation": 1358, "user_id": 5357986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rea6W.jpg?s=128&g=1", "display_name": "Oliort", "link": "https://stackoverflow.com/users/5357986/oliort"}, "is_accepted": true, "score": 0, "last_activity_date": 1554303219, "last_edit_date": 1554303219, "creation_date": 1554302581, "answer_id": 55497918, "question_id": 55497306, "link": "https://stackoverflow.com/questions/55497306/how-to-efficiently-represent-blobs-in-binary-image-with-ellipse-opencv/55497918#55497918", "title": "How to efficiently represent blobs in binary image with ellipse? | OpenCV", "body": "<p>Contours is the outline of an object and <a href=\"https://docs.opencv.org/3.4/d0/d7a/classcv_1_1SimpleBlobDetector.html\" rel=\"nofollow noreferrer\">blob detector</a> is an algorithm on top of <code>findContours</code>. Blob detector not only finds the boundaries, but also calculates the center and whether or not it matches certain shapes and sizes that you define. It is more heavy than <code>findContours</code> and you shouldn't use it if you care for performance and don't need these features.</p>\n\n<p>You can use median blur instead of Gaussian, if you want to keep the image binary and do not extend contours. Also you can use <a href=\"https://docs.opencv.org/3.0-beta/doc/py_tutorials/py_imgproc/py_morphological_ops/py_morphological_ops.html\" rel=\"nofollow noreferrer\">dilate/erode/open/close operations</a> and their combinations to denoise the binary image. These approaches are relatively comparable on binary images and you can test both for best performance and result and choose one for your task.</p>\n\n<p><a href=\"https://docs.opencv.org/2.4.13.7/doc/tutorials/imgproc/shapedescriptors/bounding_rotated_ellipses/bounding_rotated_ellipses.html\" rel=\"nofollow noreferrer\">Tutorial code here</a> describes how to represent the found contours with ellipses. <code>cv::fitEllipse</code> is used to create an ellipse for a contour. Then you can display it with <code>cv::ellipse</code> drawing function.</p>\n"}], "owner": {"reputation": 307, "user_id": 9684956, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R5K0pI5UV3c/AAAAAAAAAAI/AAAAAAAAAEc/-hAAKfQrXeY/photo.jpg?sz=128", "display_name": "Jai", "link": "https://stackoverflow.com/users/9684956/jai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 55497918, "answer_count": 1, "score": 0, "last_activity_date": 1554324709, "creation_date": 1554300903, "last_edit_date": 1554324709, "question_id": 55497306, "link": "https://stackoverflow.com/questions/55497306/how-to-efficiently-represent-blobs-in-binary-image-with-ellipse-opencv", "title": "How to efficiently represent blobs in binary image with ellipse? | OpenCV", "body": "<p>I want to represent blobs with oriented ellipse.</p>\n\n<p>I have achieved this with <code>findContours()</code> in opencv. But I am thinking in real-time application contours or blob detector, which will perform better.</p>\n\n<pre><code>GaussianBlur(im, tempIm, Size(9, 9), 1, 1, BORDER_REFLECT);\nfindContours(tempIm, contours, hierarchy, RETR_TREE, CHAIN_APPROX_TC89_KCOS);\n</code></pre>\n\n<p>Also Blur extends the boundary of the blob, which is not-required.</p>\n\n<p>Input Image</p>\n\n<p><img src=\"https://i.stack.imgur.com/nP7bh.png\" alt=\"Input image\"></p>\n\n<p>Output Image</p>\n\n<p><img src=\"https://i.stack.imgur.com/V14Kt.png\" alt=\"Output image\"></p>\n"}, {"tags": ["c++", "templates", "reference"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1554300505, "post_id": 55497145, "comment_id": 97701350, "body": "Here is the code.... What is wrong with it?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 2, "creation_date": 1554300554, "post_id": 55497145, "comment_id": 97701379, "body": "What is your question?"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 2, "creation_date": 1554302165, "post_id": 55497145, "comment_id": 97702446, "body": "If you want to answer your own question, put the question in the question and post an answer with the answer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9400869"}, "edited": false, "score": 0, "creation_date": 1554357716, "post_id": 55497145, "comment_id": 97722927, "body": "this will be solved by using sfinae. Still looking trying to figure out how."}], "owner": {"user_type": "does_not_exist", "display_name": "user9400869"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554357614, "creation_date": 1554300421, "last_edit_date": 1554357614, "question_id": 55497145, "link": "https://stackoverflow.com/questions/55497145/how-to-functors-with-no-parameters-and-functors-with-return-type-void", "title": "How to Functors with no parameters and Functors with return-type void?", "body": "<p>I have seen <a href=\"https://codereview.stackexchange.com/questions/63841/c-function-composition\">this nice code</a>. And want to use it for my case.</p>\n\n<p>Therefor I changed the direction, so that <code>combine(f,g,h)(x)</code> means: do <code>h(g(f(x)))</code>.</p>\n\n<p>But actually I want: </p>\n\n<p>do <code>f(x)</code>. </p>\n\n<p>If there is a result <code>y</code>, then do <code>g(y)</code>, otherwise do <code>g()</code>.</p>\n\n<p>If there is a result <code>z</code>, then do <code>h(z)</code>, otherwise do <code>h()</code>.</p>\n\n<p>So here is the changed code:</p>\n\n<pre><code>template&lt;typename ... Fs&gt;\nstruct combine_impl\n{\n    combine_impl(Fs&amp;&amp; ... fs) : functionTuple(std::forward&lt;Fs&gt;(fs) ...) {}\n    static constexpr numberOfFs = sizeof ... (Fs);\n    template&lt;size_t N, typename ... Ts&gt;\n    auto apply(std::integral_constant&lt;size_t, N&gt;, Ts&amp;&amp; ... ts) const\n    {\n        return apply( std::integral_constant&lt;size_t, N + 1&gt;{}\n                    , std::get&lt;N&gt;(functionTuple)(std::forward&lt;Ts&gt;(ts)...));\n    }\n\n    template&lt;typename ... Ts&gt;\n    auto apply(std::integral_constant&lt;size_t, numberOfFs -1&gt;, Ts&amp;&amp; ... ts) const\n    {\n        return std::get&lt;numberOfFs -1&gt;(functionTuple)(std::forward&lt;Ts&gt;(ts)...);\n    }\n\n    template&lt;typename ... Ts&gt;\n    auto operator()(Ts&amp;&amp; ... ts) const\n    {\n        return apply(std::integral_constant&lt;size_t,0&gt;{}, std::forward&lt;Ts&gt;(ts) ...);\n    }\n\n    std::tuple&lt;Fs ...&gt; functionTuple;\n};\n\ntemplate&lt;typename ... Fs&gt;\nauto combine(Fs&amp;&amp; ... fs)\n{\n    return combine_impl&lt;Fs ...&gt;(std::forward&lt;Fs&gt;(fs) ...);\n}\n</code></pre>\n\n<p>Edit:\nTo make clear what the question was:\nThe example:</p>\n\n<pre><code>struct FunctorA\n{\n   float operator()(int k) const {return k*2.5f;}\n};\n\n\nstruct FunctorB\n{\n   float operator()(float k) const {return k*2.5f;}\n};\n\nvoid main()\n{\n   float result = combine(FunctorA(),FunctorB())(4);\n}\n</code></pre>\n\n<p>works fine with the code.\nBut I want to be able to also use code like this:</p>\n\n<pre><code>struct FunctorA\n{\n   voidoperator()(int k) const \n   {\n       // side effects\n   }\n};\n\n\nstruct FunctorB\n{\n   float operator()() const \n   {\n      return 42.f;\n   }\n};\n\nvoid main()\n{\n   float result = combine(FunctorA(),FunctorB())(4);\n}\n</code></pre>\n\n<p>This would not compile, because of <code>invalid use of void expression</code>.</p>\n\n<p>Edit:\nafter some reading: this should be possible with sfinae. \nThe expression </p>\n\n<p><code>decltype(std::get&lt;N&gt;(functionTuple)(std::forward&lt;Ts&gt;(std::declval&lt;Ts&gt;())...))</code></p>\n\n<p>is of type void when I need to use another version of apply.</p>\n"}, {"tags": ["c++", "validation", "iteration"], "comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1554300210, "post_id": 55497007, "comment_id": 97701159, "body": "&#39;even when the if statements are outside the loop&#39; that&#39;s not true in the code above, the if statements are inside the loop. I guess you&#39;ve been decieved by pythons weird indentation rules, which don&#39;t apply to C++"}, {"owner": {"reputation": 1, "user_id": 8519590, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qYJ2AvUcPL4/AAAAAAAAAAI/AAAAAAAAEK0/IePvSNiIxGo/photo.jpg?sz=128", "display_name": "Ragod12", "link": "https://stackoverflow.com/users/8519590/ragod12"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1554300345, "post_id": 55497007, "comment_id": 97701260, "body": "@john Oh s**t I just realised, they are in the for loop. That&#39;s my bad. Although in my code I fixed that and it still iterated nonetheless when trying to data validate."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1554300380, "post_id": 55497007, "comment_id": 97701278, "body": "Think a little about your condition <code>letexists || (letexists &amp;&amp; intexists)</code>... If <code>letexists</code> is <code>true</code> then the whole condition is true (and <code>letexists &amp;&amp; intexists</code> will not even be evaluated). If <code>letexists </code> is <code>false</code> then <code>letexists &amp;&amp; intexists</code> will <i>also</i> be <code>false</code>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1554300415, "post_id": 55497007, "comment_id": 97701292, "body": "acutally I was about to vtc because it can be considered as typo, though I felt like writing an answer;)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8519590, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qYJ2AvUcPL4/AAAAAAAAAAI/AAAAAAAAEK0/IePvSNiIxGo/photo.jpg?sz=128", "display_name": "Ragod12", "link": "https://stackoverflow.com/users/8519590/ragod12"}, "edited": false, "score": 0, "creation_date": 1554300582, "post_id": 55497126, "comment_id": 97701393, "body": "Thank you for the response. I&#39;ll take heed of this, sorry for the confusion caused."}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 0, "last_activity_date": 1554300377, "creation_date": 1554300377, "answer_id": 55497126, "question_id": 55497007, "link": "https://stackoverflow.com/questions/55497007/how-to-fix-iteration-without-a-cause-with-an-input-in-c/55497126#55497126", "title": "How to fix iteration without a cause (with an input); in c++?", "body": "<p>I have to admit, i dont understand all of what you write. What I did understnad is </p>\n\n<blockquote>\n  <p>The problem is that each character of the variable input is being\n  iterated over, even if the 'if statements' are outside of the 'for\n  loop'</p>\n</blockquote>\n\n<p>And that is wrong!</p>\n\n<pre><code>for (char&amp; c : i) {\n        bool intexists = find(begin(nums), end(nums), c) != end(nums);\n        bool letexists = find(begin(alph), end(alph), c) != end(alph);\n\n        if (letexists || (letexists &amp;&amp; intexists))\n            cout &lt;&lt; \"Your value is a string\" &lt;&lt; endl;\n        // This will be changed for a return value\n\n        else if (!letexists &amp;&amp; intexists)\n            cout &lt;&lt; \"Your value is a integer\" &lt;&lt; endl;\n        // This will be changed for a return value\n        else\n            cout &lt;&lt; \"Your value has an erogenous input (Special characters or non-letter/ number related stuff.\";\n\n    }\n</code></pre>\n\n<p>All this above is \"the for loop\". In simple terms the syntax for a (ranged based) for loop is </p>\n\n<pre><code>for (char&amp; c : i) {\n     // body of the loop\n}\n</code></pre>\n\n<p>Your code will be more clear and readable if you use <code>{}</code> also for the if, even if not needed and proper intendation:</p>\n\n<pre><code>for (char&amp; c : i) {\n    bool intexists = find(begin(nums), end(nums), c) != end(nums);\n    bool letexists = find(begin(alph), end(alph), c) != end(alph);\n\n    if (letexists || (letexists &amp;&amp; intexists)) {\n        cout &lt;&lt; \"Your value is a string\" &lt;&lt; endl;\n    } else if (!letexists &amp;&amp; intexists) {\n        cout &lt;&lt; \"Your value is a integer\" &lt;&lt; endl;\n    } else {\n        cout &lt;&lt; \"Your value has an erogenous input (Special characters or non-letter/ number related stuff.\";\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 8519590, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qYJ2AvUcPL4/AAAAAAAAAAI/AAAAAAAAEK0/IePvSNiIxGo/photo.jpg?sz=128", "display_name": "Ragod12", "link": "https://stackoverflow.com/users/8519590/ragod12"}, "edited": false, "score": 0, "creation_date": 1554300932, "post_id": 55497272, "comment_id": 97701615, "body": "This helps quite a bit, I&#39;ll try implementing this into my code to see if it fits; thank you for responding"}, {"owner": {"reputation": 3447, "user_id": 4297146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Zl9y3.jpg?s=128&g=1", "display_name": "mohabouje", "link": "https://stackoverflow.com/users/4297146/mohabouje"}, "reply_to_user": {"reputation": 1, "user_id": 8519590, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qYJ2AvUcPL4/AAAAAAAAAAI/AAAAAAAAEK0/IePvSNiIxGo/photo.jpg?sz=128", "display_name": "Ragod12", "link": "https://stackoverflow.com/users/8519590/ragod12"}, "edited": false, "score": 0, "creation_date": 1554301028, "post_id": 55497272, "comment_id": 97701698, "body": "Check the last update with a clean implementation, I hope it helps. I did not understand your problem properly @RyanSutton"}], "tags": [], "owner": {"reputation": 3447, "user_id": 4297146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Zl9y3.jpg?s=128&g=1", "display_name": "mohabouje", "link": "https://stackoverflow.com/users/4297146/mohabouje"}, "is_accepted": false, "score": 0, "last_activity_date": 1554300947, "last_edit_date": 1554300947, "creation_date": 1554300805, "answer_id": 55497272, "question_id": 55497007, "link": "https://stackoverflow.com/questions/55497007/how-to-fix-iteration-without-a-cause-with-an-input-in-c/55497272#55497272", "title": "How to fix iteration without a cause (with an input); in c++?", "body": "<p>In C++, the standard provides different ways to checks if an string contains alpha/numeric values:</p>\n\n<ul>\n<li>Check if all characters are numeric: <a href=\"https://en.cppreference.com/w/cpp/string/byte/isalnum\" rel=\"nofollow noreferrer\"><code>std::isalnum</code></a></li>\n<li>Check if all characters are alpha: <a href=\"https://en.cppreference.com/w/cpp/string/byte/isalpha\" rel=\"nofollow noreferrer\"><code>std::isalpha</code></a></li>\n</ul>\n\n<p>So you can replace part of your code with:</p>\n\n<pre><code>const all_numeric = std::all_of(std::begin(str), std::end(str), [](const auto c) {\n    return std::isalnum(c);\n})\n\nconst all_alpha = std::all_of(std::begin(str), std::end(str), [](const auto c) {\n    return std::isalpha(c);\n})\n</code></pre>\n\n<p>So to solve your problem, you can start by creating a helper function that checks if a string is a number by using standard functions like <code>strtool</code> or recycle what we did later:</p>\n\n<pre><code>bool is_number(const std::string&amp; s) {\n    return !s.empty() &amp;&amp; std::find_if(s.begin(), \n        s.end(), [](char c) { return !std::isdigit(c); }) == s.end();\n}\n</code></pre>\n\n<p>Now that you know if the string is a number or not, you can check if your string contains any weird character, and discard it.</p>\n\n<h3>Updates:</h3>\n\n<pre><code>void datacheck(string &amp;i) {\n    const auto intexists = is_number(i);\n    if (intexists) {\n       // do whatever\n       return;\n    }\n\n    const all_alpha = std::all_of(std::begin(str), std::end(str), [](const auto c) {\n         return std::isalpha(c); \n    });\n    if (all_alpha) {\n        // do whatever\n        return;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8519590, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qYJ2AvUcPL4/AAAAAAAAAAI/AAAAAAAAEK0/IePvSNiIxGo/photo.jpg?sz=128", "display_name": "Ragod12", "link": "https://stackoverflow.com/users/8519590/ragod12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1554300947, "creation_date": 1554300034, "last_edit_date": 1554300159, "question_id": 55497007, "link": "https://stackoverflow.com/questions/55497007/how-to-fix-iteration-without-a-cause-with-an-input-in-c", "title": "How to fix iteration without a cause (with an input); in c++?", "body": "<p><i>Just on a starting note, Please excuse the lack of c++ conventions and logic shown in this code. I'm still trying to get around formatting syntax for c++..</i></p>\n\n<p>With this small part of a larger application building project, I am trying to create a 'data validation' type subroutine with integers and strings being the main test cases, the input coming from the intended user.</p>\n\n<p>The problem is that each character of the variable input is being iterated over, even if the 'if statements' are outside of the 'for loop' (or in some other cases while loops). </p>\n\n<p>An example of the error being:</p>\n\n<pre><code>Enter a value:f1o2o3\nYour value is a string\nYour value is a integer\nYour value is a string\nYour value is a integer\nYour value is a string\nYour value is a integer\n</code></pre>\n\n<p>The extra lines after the first <code>Your value is a string</code> and\n<code>Your value is a integer</code> are unwanted.</p>\n\n<p>I know that I could just instead return the boolean variable <code>letexists</code> or <code>intexsits</code>, with them both being iterated without a problem. \nHowever this 'character iterating' problem has been a nuisance in other parts too and I cannot seem to find a definite, understandable fix anywhere.</p>\n\n<p>I am used to using python so this 'iterating over every character while passing parameters' is quite new to me.</p>\n\n<p>I have tried looking into what it could be for multiple days now. Both: searching online and asking others (in person showing them code that has problems) about the 'iteration over each character' problem, however, none seem to know why this happens.</p>\n\n<p>I have solved this problem in the past by breaking a <code>while(true)</code> loop after the intended data value has been received, however I understand this is really bad practice and therefore want to figure out how I can improve data validation.</p>\n\n<pre><code>#include &lt;iostream&gt; // for std::cin, std::cout\n#include &lt;string&gt; // for string datatype\n#include &lt;algorithm&gt; // for std::find\n#include &lt;iterator&gt; // for std::begin, std::end\n\n\nusing namespace std;\n\n// If the 'cout's are changed to returning functions I will change this to a function itself (using int datacheck(...){...})\nvoid datacheck(string &amp;i) {\n    const char nums[] = { '0','1','2','3','4','5','6','7','8','9','\\0' };\n    const char alph[] = { 'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','\\0' };\n\n    for (char&amp; c : i) {\n        bool intexists = find(begin(nums), end(nums), c) != end(nums);\n        bool letexists = find(begin(alph), end(alph), c) != end(alph);\n\n        if (letexists || (letexists &amp;&amp; intexists))\n            cout &lt;&lt; \"Your value is a string\" &lt;&lt; endl;\n        // This will be changed for a return value\n\n        else if (!letexists &amp;&amp; intexists)\n            cout &lt;&lt; \"Your value is a integer\" &lt;&lt; endl;\n        // This will be changed for a return value\n        else\n            cout &lt;&lt; \"Your value has an erogenous input (Special characters or non-letter/ number related stuff.\";\n\n    }\n}\n\nint main(void) {\n    string checkedvalue;\n    cout &lt;&lt; \"Enter a value: \";\n    cin &gt;&gt; checkedvalue;\n    cin.clear();\n    cin.ignore(512, '\\n');\n    datacheck(checkedvalue);\n\n    return 0;\n}\n</code></pre>\n\n<p>I have realised that it may be because each character is being sent through individually into the subroutine, however, if this is the case I am still unsure how to fix this.</p>\n\n<p>Just to end off...\nOverall, an explained solution for why the iterating happens and how it can be fixed will be greatly appreciated. If possible for general cases, however, just this case will be extremely helpful nonetheless.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "visual-studio", "winapi", "dll"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1554301230, "post_id": 55497001, "comment_id": 97701834, "body": "write own <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/notification-hooks?view=vs-2019\" rel=\"nofollow noreferrer\"><code>__pfnDliNotifyHook2</code></a> and process <code>dliNotePreLoadLibrary</code>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1554311790, "post_id": 55497001, "comment_id": 97708163, "body": "Combine <code>&#47;DELAYLOAD</code> with a call to <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winbase/nf-winbase-setdlldirectoryw\" rel=\"nofollow noreferrer\">SetDllDirectoryW</a> to add the directory of the UI DLL to the search path, prior to calling any export of the UI DLL. Nothing else is required."}, {"owner": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "edited": false, "score": 1, "creation_date": 1554346915, "post_id": 55497001, "comment_id": 97719993, "body": "Use <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/libloaderapi/nf-libloaderapi-adddlldirectory\" rel=\"nofollow noreferrer\">AddDllDirectory</a> (instead of SetDllDirectory) and <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/libloaderapi/nf-libloaderapi-loadlibraryexa\" rel=\"nofollow noreferrer\">LoadLibraryEx</a> to add additional search path to load DLL without impact later DLL load search paths."}], "answers": [{"comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1554302598, "post_id": 55497880, "comment_id": 97702744, "body": "possible and this, but think better use <code>__pfnDliNotifyHook2</code> instead <code>__pfnDliFailureHook2</code>"}, {"owner": {"reputation": 2275, "user_id": 5869304, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ed0827adc1d5b81f2125f83c44e7feb5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5869304/joe"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1554310777, "post_id": 55497880, "comment_id": 97707641, "body": "I guess it depends on your scenario.  In a case for which used the above approach,  the DLL in question was in the right path in certain scenarios and not in others.  We wanted to use the default handling if it worked and use this as a fallback.  If you know where it&#39;s going to be all the time, maybe not"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1554311021, "post_id": 55497880, "comment_id": 97707768, "body": "default handling is just call <code>LoadLibrary</code> for name. if it fail - call <code>__pfnDliFailureHook2 </code> if present. we can not wait when <code>LoadLibrary</code> on short name fail but just handle this case based on known dll name. when we understand that need special processing in some case"}], "tags": [], "owner": {"reputation": 2275, "user_id": 5869304, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ed0827adc1d5b81f2125f83c44e7feb5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5869304/joe"}, "is_accepted": false, "score": 1, "last_activity_date": 1554302480, "creation_date": 1554302480, "answer_id": 55497880, "question_id": 55497001, "link": "https://stackoverflow.com/questions/55497001/how-to-use-delayload-on-a-dll-from-another-dll/55497880#55497880", "title": "How to use `/DELAYLOAD` on a DLL from another DLL", "body": "<p>There is.  My suggestion would be to create a delay-load-failure hook function.</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/failure-hooks?view=vs-2019\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/cpp/build/reference/failure-hooks?view=vs-2019</a></p>\n\n<p>Basically, you write a function inside your main DLL that gets notified in the event of a delay load failure.  In that function, when the given code indicates failure, you try manually calling LoadLibrary with of a path consisting of the folder in which your main DLL resides plus the name of the DLL that failed to load</p>\n\n<p>How you get the your main DLL from within your main DLL is up to you.  There are many ways.</p>\n\n<p>Something like this:</p>\n\n<pre><code>FARPROC WINAPI delayHook(unsigned dliNotify, PDelayLoadInfo pdli)\n{\n\n    FARPROC fpRet = NULL;\n\n    switch (dliNotify)\n    {\n      case dliStartProcessing:           \n        break;\n\n      case dliNotePreLoadLibrary:\n        break;\n\n      case dliNotePreGetProcAddress:\n        break;\n\n      case dliFailLoadLib: \n        {\n            std::string newPath = GetMyModulePath();\n            newPath += \"\\\\\";\n            newPath  += pdli-&gt;szDll;\n            fpRet = reinterpret_cast&lt;FARPROC&gt;(::LoadLibrary(csDir));\n        }\n\n        break;\n\n      case dliFailGetProc:\n\n        break;\n\n      case dliNoteEndProcessing: \n        break;\n\n      default:  \n          break;\n    }\n\n    return fpRet;\n}\n\n//\n// Set access to our delay load hook.\n//\n\nPfnDliHook __pfnDliFailureHook2 = delayHook;\n</code></pre>\n"}], "owner": {"reputation": 4966, "user_id": 9883438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9176c9238126b88b11234a86f45cbe?s=128&d=identicon&r=PG&f=1", "display_name": "sebrockm", "link": "https://stackoverflow.com/users/9883438/sebrockm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 766, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1554302480, "creation_date": 1554300017, "question_id": 55497001, "link": "https://stackoverflow.com/questions/55497001/how-to-use-delayload-on-a-dll-from-another-dll", "title": "How to use `/DELAYLOAD` on a DLL from another DLL", "body": "<p>I have a solution with two DLLs. The first one is the \"main\" DLL. It happens to be an ODBC driver, but I think that is not important for this question.\nThe second DLL contains all the UI logic for the first one. As the UI is not always needed, I want to use the <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/linker-support-for-delay-loaded-dlls?view=vs-2019\" rel=\"nofollow noreferrer\"><code>/DELAYLOAD</code></a> feature which explicitly says:</p>\n\n<blockquote>\n  <p>The delayed loading of a DLL can be specified during the build of\n  either a .EXE or <strong>.DLL</strong> project.</p>\n</blockquote>\n\n<p>The main DLL's project correctly references the UI ones. If I don't use <code>/DELAYLOAD</code>, everythin works just fine. The two DLLs will be installed into the same directory, so I thought loading one DLL from within the other should be easy. But apparently, it's not.</p>\n\n<p>As soon as the first function from the UI DLL is called, the application (any ODBC client in my case) crashes.\n<code>GetLastError()</code> yields 126 which apparently means that the target DLL could not be found in any of the search paths.</p>\n\n<p>And indeed, according to <a href=\"https://stackoverflow.com/a/14031935/9883438\">this answer</a> <code>LoadLibrary()</code> does have a look into the directory of the calling executable, but not into the one of the currently executed DLL. I'm assuming <code>/DELAYLOAD</code> is also just using <code>LoadLibrary()</code> under the hood, is that correct?</p>\n\n<p>If I copy the executable into the installation directory of my driver, it works just fine, which proves my assumption that it just doesn't look in the current DLL's directory.</p>\n\n<p>Appart from that, I was also able to make it run by calling</p>\n\n<pre><code>LoadLibrary(L\"C:\\\\absolute\\\\path\\\\to\\\\UI.dll\");\n</code></pre>\n\n<p>just before the first function of the UI DLL is loaded.\nI was also able to determine this path programmatically using</p>\n\n<pre><code>wchar_t buffer[512];\nGetModuleFileName(hThisDLL, buffer, sizeof(buffer));\n</code></pre>\n\n<p>But then I would have to cover every single UI call with this logic. So I wouldn't see much advantage anymore that <code>/DELAYLOAD</code> has over the \"old-school\" way of using <code>LoadLibrary()</code> and <code>GetProcAddress()</code>.</p>\n\n<h2><strong>Question</strong></h2>\n\n<p>Is there a simple way to make <code>/DELAYLOAD</code> find the target DLL from another DLL in the same directory?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1554299770, "post_id": 55496860, "comment_id": 97700863, "body": "&quot;<i>Has the C ++ standard thought about this edge effect?</i>&quot; As far as I know: C++ standard has no concept of a DLL."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1554299775, "post_id": 55496860, "comment_id": 97700865, "body": "They have.  See <a href=\"https://en.cppreference.com/w/cpp/language/explicit\" rel=\"nofollow noreferrer\">explicit</a>"}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1554299790, "post_id": 55496860, "comment_id": 97700880, "body": "<a href=\"https://en.cppreference.com/w/cpp/language/explicit\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/explicit</a>"}, {"owner": {"reputation": 1285, "user_id": 8440128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ebWk2.jpg?s=128&g=1", "display_name": "Landstalker", "link": "https://stackoverflow.com/users/8440128/landstalker"}, "edited": false, "score": 0, "creation_date": 1554300666, "post_id": 55496860, "comment_id": 97701442, "body": "Thanks All. I will think about using the keyword &quot;explicit&quot; more often in my code."}, {"owner": {"reputation": 2191, "user_id": 7070965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qEhQf.png?s=128&g=1", "display_name": "dtell", "link": "https://stackoverflow.com/users/7070965/dtell"}, "edited": false, "score": 0, "creation_date": 1554300743, "post_id": 55496860, "comment_id": 97701489, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/121162/what-does-the-explicit-keyword-mean\">What does the explicit keyword mean?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1285, "user_id": 8440128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ebWk2.jpg?s=128&g=1", "display_name": "Landstalker", "link": "https://stackoverflow.com/users/8440128/landstalker"}, "edited": false, "score": 0, "creation_date": 1554301131, "post_id": 55497058, "comment_id": 97701758, "body": "Thanks. I will think about using the keyword <b>explicit</b> more often in my code even if I liked that the behavior is the opposite : I mean indicate explicitly in the code (through a key word : implicit for example) that I wish to activate the implicit conversion because in most cases I do not want to have implicit conversion."}, {"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "edited": false, "score": 0, "creation_date": 1554301180, "post_id": 55497058, "comment_id": 97701796, "body": "How exactly this solves a problem when implicit conversion is desirable?"}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "reply_to_user": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "edited": false, "score": 0, "creation_date": 1554301379, "post_id": 55497058, "comment_id": 97701929, "body": "@Logman the same way declaring variables <code>const</code> when you don&#39;t change them fixes undesired behavior when someone changes them."}, {"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "edited": false, "score": 0, "creation_date": 1554302108, "post_id": 55497058, "comment_id": 97702405, "body": "@Ayxan but this is exactly oposite situation you want to change your variable declaring it const will prevent that."}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "reply_to_user": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "edited": false, "score": 0, "creation_date": 1554302342, "post_id": 55497058, "comment_id": 97702563, "body": "@Logman if you always mark your constructors <code>explicit</code>, calls to the constructor, like in the question, must look like this <code>SetRotationSpeed(A(5))</code>. There&#39;s no way to interpret this as a call to a function which takes a single integer parameter, thus there&#39;s no problem."}, {"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "edited": false, "score": 0, "creation_date": 1554303030, "post_id": 55497058, "comment_id": 97703072, "body": "@Ayxan Yes, but it may provide unnecessary code. I asume that you always use <code>std::string</code> constructor before passing cstring into a function or always explicite convert <code>int</code> to <code>long long</code> before assigning variable."}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "reply_to_user": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "edited": false, "score": 0, "creation_date": 1554303202, "post_id": 55497058, "comment_id": 97703223, "body": "@Logman Well, <code>std::string</code> is meant to replace <code>char*</code> (you should generally only use <code>std::string</code>), and <code>int</code> is not a class. Your point is unclear."}, {"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "edited": false, "score": 0, "creation_date": 1554304422, "post_id": 55497058, "comment_id": 97704073, "body": "@Ayxan I think you misunderstand my question. What if implicite conversion is intentional? You answer only part of OP question and you should point that. <code>explicit</code> is not a magic word that will solve all problems. There are types that intentionally do not declare constructors explicit for one reason or another. How to solve OP problem for such types should also be part of an answer."}, {"owner": {"reputation": 1285, "user_id": 8440128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ebWk2.jpg?s=128&g=1", "display_name": "Landstalker", "link": "https://stackoverflow.com/users/8440128/landstalker"}, "reply_to_user": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "edited": false, "score": 0, "creation_date": 1554306799, "post_id": 55497058, "comment_id": 97705592, "body": "@Logman I dont know if I understood well your question. For persons who can not change the constructor&#39;s declaration, one of the possible solutions is to change the prototype of the function in question; for exemple by using a call by reference <code>SetRotationSpeed(A&amp; a)</code> and in this case, the call by an integer will not be accepted by the compiler."}, {"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "edited": false, "score": 0, "creation_date": 1554330430, "post_id": 55497058, "comment_id": 97716321, "body": "@Ok I try to say this as simple as I can. What if you want to have implicit creation of an <code>A</code> object from <code>int</code>. You assumed that line <code>SetRotationSpeed(i);</code> should be ill formatted but it&#39;s not. OP want to prevent others from injecting code into his functions (intentionally or not). And not to prevent someone from unintentional type conversion. Type conversion is not a problem here. Argument deduction is."}], "tags": [], "owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "is_accepted": false, "score": 4, "last_activity_date": 1554300174, "creation_date": 1554300174, "answer_id": 55497058, "question_id": 55496860, "link": "https://stackoverflow.com/questions/55496860/c-implicit-conversion-good-specificity-or-a-danger-on-the-program-behavior/55497058#55497058", "title": "C++ Implicit Conversion: good specificity or a danger on the program behavior?", "body": "<p>You should usually use <a href=\"https://en.cppreference.com/w/cpp/language/explicit\" rel=\"nofollow noreferrer\"><code>explicit</code></a> specifier to avoid such situations. When a constructor is marked <code>explicit</code>, no implicit conversions can be made using that constructor. Only explicit conversions are allowed, which is usually a good thing. Clang even has a nice warning about that:</p>\n\n<blockquote>\n  <p>Clang-Tidy: Single-argument constructors must be marked explicit to\n  avoid unintentional implicit conversions</p>\n</blockquote>\n"}], "owner": {"reputation": 1285, "user_id": 8440128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ebWk2.jpg?s=128&g=1", "display_name": "Landstalker", "link": "https://stackoverflow.com/users/8440128/landstalker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1554302342, "creation_date": 1554299599, "last_edit_date": 1554302342, "question_id": 55496860, "link": "https://stackoverflow.com/questions/55496860/c-implicit-conversion-good-specificity-or-a-danger-on-the-program-behavior", "title": "C++ Implicit Conversion: good specificity or a danger on the program behavior?", "body": "<p>Consider the code below and suppose that several years after; a colleague adds a new implementation of <code>SetRotationSpeed(int i)</code> in a DLL knowing that, the code of the class containing the implicit conversion has been compiled in static mode.\nThere will be no compilation errors except that it may change the behavior of the program, which in my opinion constitutes a potential danger to the behavior of the program.\nHas the C++ standard thought about this edge effect?\nIn this topic, I am not particularly interested in the use of the <strong>explicit</strong> keyword but in an edge effect that we can encounter on a program developed in the form of separated DLLs by several developers who do not necessarily know each the part developed by the other one.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std; \n\nclass A\n{\npublic:\n   A(int n)\n        : m_RotationalScannerSpeed(n/2)\n    {\n        std::cout &lt;&lt; \"Scanner Rotation speed\"&lt;&lt;  m_RotationalScannerSpeed&lt;&lt;endl;\n    }\n\nprivate:\n    int m_RotationalScannerSpeed;\n};\n\nvoid SetRotationSpeed(A a){\n\n};\n\n// Function added 2 years later by a collegue in a DLL... \n/*void SetRotationSpeed(int i){\n\n};*/\n\n\nint main (int argc, char* argv[])\n{\n    int i=5;\n    SetRotationSpeed(i);\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 3, "creation_date": 1554299018, "post_id": 55496672, "comment_id": 97700401, "body": "What are the inputs, for which you exceed the memory limit? What are those memory limits?"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1554299406, "post_id": 55496672, "comment_id": 97700627, "body": "Also what is this code supposed to do?"}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 1, "creation_date": 1554299530, "post_id": 55496672, "comment_id": 97700716, "body": "You&#39;re adding to the <code>dogs</code> vector whilst iterating over it. If your <code>if (bark &gt;= dogs[i])</code> statement is always <code>false</code> (which is fairly easy to do) then you&#39;ll add to the dogs vector once per loop and therefore never get to the end of the <code>dogs</code> vector."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 2, "creation_date": 1554299802, "post_id": 55496672, "comment_id": 97700890, "body": "I&#39;m guessing your python code did this instead <code>size_t s = dogs.size(); for(int i = 0; i &lt; s; i++){</code> and you&#39;ve just ported it incorrectly."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 7440036, "user_type": "registered", "profile_image": "https://graph.facebook.com/389528548046800/picture?type=large", "display_name": "Sverrir H&#225;kon", "link": "https://stackoverflow.com/users/7440036/sverrir-h%c3%a1kon"}, "edited": false, "score": 0, "creation_date": 1554382645, "post_id": 55497172, "comment_id": 97737748, "body": "I am using <code>#include &lt;bits&#47;stdc++.h&gt;</code> since I was writing this in a competitive programming contest and I don&#39;t have a lot of time to find out what includes I need and it&#39;s just faster for me to use <code>#include &lt;bits&#47;stdc++.h&gt;</code> if I had written the code not in a competitive programming contest I would have used <code>&lt;iostream&gt;</code>and <code>&lt;vector&gt;</code>in place for <code>&lt;bits&#47;stdc++.h&gt;</code>."}], "tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": true, "score": 1, "last_activity_date": 1554300516, "creation_date": 1554300516, "answer_id": 55497172, "question_id": 55496672, "link": "https://stackoverflow.com/questions/55496672/c-memory-limit-exceeded-when-running-small-numbers/55497172#55497172", "title": "C++ Memory Limit Exceeded when running small numbers", "body": "<p>You end up with an infinite number of dogs as each dog you add in the <code>for i</code> loop fails the <code>bark &gt;= dogs[i]</code> test which causes another dog to be added and so on.</p>\n\n<p>Changing your code to only add one dog when no dogs match the condition works:</p>\n\n<pre><code>for (int bark : barks) {\n    bool found = false;\n    for (int i = 0; i &lt; dogs.size(); i++) {\n        if (bark &gt;= dogs[i]) {\n            dogs[i] = bark + K;\n            found = true;\n            break;\n        }\n    }\n    if (!found)\n    {\n        dogs.push_back(bark + K);\n    }\n}\n</code></pre>\n\n<p>P.S. don't use <code>#include &lt;bits/stdc++.h&gt;</code>, it is non standard and only works on some platforms, include just the c++ headers you need (e.g. <code>&lt;iostream&gt;</code> and <code>&lt;vector&gt;</code>) instead. <code>using namespace std</code> can also cause issues.</p>\n"}], "owner": {"reputation": 37, "user_id": 7440036, "user_type": "registered", "profile_image": "https://graph.facebook.com/389528548046800/picture?type=large", "display_name": "Sverrir H&#225;kon", "link": "https://stackoverflow.com/users/7440036/sverrir-h%c3%a1kon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 55497172, "answer_count": 1, "score": -3, "last_activity_date": 1554300881, "creation_date": 1554298955, "last_edit_date": 1554300881, "question_id": 55496672, "link": "https://stackoverflow.com/questions/55496672/c-memory-limit-exceeded-when-running-small-numbers", "title": "C++ Memory Limit Exceeded when running small numbers", "body": "<p>I am making a code for a problem on <a href=\"https://iceland.kattis.com/problems/iceland.voff\" rel=\"nofollow noreferrer\">Iceland.Kattis.Com called voff</a> in which you have to calculate the number of dogs required to produce a certain frequency of barks. </p>\n\n<p>There are N barks and each dog can bark up to once every K seconds. The first line of input contains N and K, the second line contains the times at which barks were heard.</p>\n\n<p>I have made a python code which is almost fast enough to get 100 points but just a little bit shy of getting there. So I decided to write the same code but in C++ (clang 7.0.0-3~ubuntu0.18.04.1) and when I run any other test case than the first one I get Memeory Limit Exceeded.</p>\n\n<p>I have tried using 'long long', 'unsigned long long' and 'int' but I get Memory Limit Exceeded on all of them.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\n\n\nint main() {\n  int N, K;\n  vector&lt;int&gt; barks;\n  vector&lt;int&gt; dogs;\n  dogs.push_back(0);\n\n  cin &gt;&gt; N &gt;&gt; K;\n  for(int i = 0; i &lt; N; i++){\n    int inp;\n    cin &gt;&gt; inp;\n    barks.push_back(inp);\n  }\n\n\n  for(int bark : barks){\n    for(int i = 0; i &lt; dogs.size(); i++){\n      if (bark &gt;= dogs[i]){\n        dogs[i] = bark + K;\n        break;\n      } else {\n        dogs.push_back(bark + K);\n      }\n    }\n  }\n  cout &lt;&lt; dogs.size() &lt;&lt; endl;\n}\n</code></pre>\n\n<p>When inputting the first test case the output is and should be '1'.\nBut when running any other test case the it Exceeds the Memory Limit.</p>\n"}, {"tags": ["c++", "boost", "cmake", "xerces", "vcpkg"], "answers": [{"comments": [{"owner": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "edited": false, "score": 0, "creation_date": 1554299939, "post_id": 55496923, "comment_id": 97700987, "body": "I&#39;ve executed the command and xerces seems to be installed: <code>xerces-c:x64-windows                               3.2.2-8          Xerces-C++ is a XML parser, for parsing, generat\u2026</code>. And in the <code>CMakeCache.txt</code> I&#39;ve the correct triplet: <code>VCPKG_TARGET_TRIPLET:STRING=x64-windows</code>"}, {"owner": {"reputation": 1330, "user_id": 3739316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FMjJ.png?s=128&g=1", "display_name": "Developer Paul", "link": "https://stackoverflow.com/users/3739316/developer-paul"}, "reply_to_user": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "edited": false, "score": 0, "creation_date": 1554300050, "post_id": 55496923, "comment_id": 97701059, "body": "@Jepessen ok, how about  boost?"}, {"owner": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "edited": false, "score": 0, "creation_date": 1554300139, "post_id": 55496923, "comment_id": 97701118, "body": "I&#39;m installing them right now with <code>vcpkg install boost:x64-windows</code>. It will take a while. But I think that the problem is with xerces, since it can be the same for all libraries."}, {"owner": {"reputation": 1330, "user_id": 3739316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FMjJ.png?s=128&g=1", "display_name": "Developer Paul", "link": "https://stackoverflow.com/users/3739316/developer-paul"}, "reply_to_user": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "edited": false, "score": 1, "creation_date": 1554308271, "post_id": 55496923, "comment_id": 97706378, "body": "For XercesC, remove <code>CONFIG</code> from your <code>find_package</code> call. CMake should be able to find the library if you have installed it with <code>vcpkg</code>."}, {"owner": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "edited": false, "score": 0, "creation_date": 1554362779, "post_id": 55496923, "comment_id": 97725413, "body": "I&#39;ve removed <code>CONFIG</code>, even if it was suggested by xerces-c vcpkg package, but nothing changes."}, {"owner": {"reputation": 1330, "user_id": 3739316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FMjJ.png?s=128&g=1", "display_name": "Developer Paul", "link": "https://stackoverflow.com/users/3739316/developer-paul"}, "reply_to_user": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "edited": false, "score": 1, "creation_date": 1554382792, "post_id": 55496923, "comment_id": 97737855, "body": "Delete all XercesC variables in your CMake cache and re-configure?"}, {"owner": {"reputation": 500, "user_id": 5700318, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cfc8b3b1656705249f2fbd7bffd4ddba?s=128&d=identicon&r=PG&f=1", "display_name": "ywiyogo", "link": "https://stackoverflow.com/users/5700318/ywiyogo"}, "reply_to_user": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "edited": false, "score": 0, "creation_date": 1590442429, "post_id": 55496923, "comment_id": 109676388, "body": "@Jepessen I have the same issue with CMake error of your xerces lib. What was the solution? I&#39;ve already checked the variable <code>VCPKG_TARGET_TRIPLET</code>. My CMake doesn&#39;t detect the lib. vcpkg list shows that the package is installed."}], "tags": [], "owner": {"reputation": 1330, "user_id": 3739316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FMjJ.png?s=128&g=1", "display_name": "Developer Paul", "link": "https://stackoverflow.com/users/3739316/developer-paul"}, "is_accepted": true, "score": 3, "last_activity_date": 1554299804, "creation_date": 1554299804, "answer_id": 55496923, "question_id": 55496611, "link": "https://stackoverflow.com/questions/55496611/cmake-cannot-find-libraries-installed-with-vcpkg/55496923#55496923", "title": "cmake cannot find libraries installed with vcpkg", "body": "<blockquote>\n  <p>boost is currently not installed, but I was expecting that during the execution of the cmake command, vcpkg will download and build needed build packages.</p>\n</blockquote>\n\n<p>This is not the case as far as I know. You need to install the packages you want with <code>vcpkg</code> beforehand for the triplet you plan to use (i.e. <code>x64-windows</code>). You will then need to ensure that the correct triplet is being used when you run CMake (check the <code>VCPKG_TARGET_TRIPLET</code> variable in your <code>CMakeCache.txt</code>). If it's incorrect, you can change it and re-configure using CMake. </p>\n\n<p>Additionally, based on the error output you're getting, it doesn't seem that <code>xerces</code> has been installed properly either using <code>vcpkg</code>. You can check what is installed with <code>vcpkg</code> by running:</p>\n\n<p><code>vcpkg list --triplet x64-windows</code> </p>\n"}, {"tags": [], "owner": {"reputation": 500, "user_id": 5700318, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cfc8b3b1656705249f2fbd7bffd4ddba?s=128&d=identicon&r=PG&f=1", "display_name": "ywiyogo", "link": "https://stackoverflow.com/users/5700318/ywiyogo"}, "is_accepted": false, "score": 1, "last_activity_date": 1590443758, "creation_date": 1590443758, "answer_id": 62011379, "question_id": 55496611, "link": "https://stackoverflow.com/questions/55496611/cmake-cannot-find-libraries-installed-with-vcpkg/62011379#62011379", "title": "cmake cannot find libraries installed with vcpkg", "body": "<p>I had the same issue and just solved it either with:</p>\n\n<pre><code>set(CURL_DIR \"C:/Libs/vcpkg/installed/x64-windows/share/curl\")\n</code></pre>\n\n<p>or </p>\n\n<pre><code>list(APPEND CMAKE_PREFIX_PATH \"C:/Libs/vcpkg/packages/curl_x64-windows/share/curl/\")\n</code></pre>\n\n<p>I installed vcpkg under <em>C:/Libs</em></p>\n"}, {"tags": [], "owner": {"reputation": 509, "user_id": 5348390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bc04632c9e2ee2247d825cb03c27672?s=128&d=identicon&r=PG&f=1", "display_name": "automorphic", "link": "https://stackoverflow.com/users/5348390/automorphic"}, "is_accepted": false, "score": 5, "last_activity_date": 1601489765, "creation_date": 1601489765, "answer_id": 64143507, "question_id": 55496611, "link": "https://stackoverflow.com/questions/55496611/cmake-cannot-find-libraries-installed-with-vcpkg/64143507#64143507", "title": "cmake cannot find libraries installed with vcpkg", "body": "<ol>\n<li>You need to install the packages beforehand (using vcpkg install ).</li>\n</ol>\n<p><em>(Then you could specify the toolchain as a CMake option:</em></p>\n<pre><code>-DCMAKE_TOOLCHAIN_FILE=C:\\path\\to\\vcpkg\\scripts\\buildsystems\\vcpkg.cmake\n</code></pre>\n<p><em>but this won't work if you already specify a toolchain, such as when cross-compiling.)</em></p>\n<ol start=\"2\">\n<li>&quot;include&quot; it, instead, to avoid this problem:</li>\n</ol>\n<p>Add this line to the project CMakeLists.txt before find_package():</p>\n<pre><code>include(/path/to/vcpkg/scripts/buildsystems/vcpkg.cmake)\n</code></pre>\n"}], "owner": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11424, "favorite_count": 5, "accepted_answer_id": 55496923, "answer_count": 3, "score": 8, "last_activity_date": 1601489765, "creation_date": 1554298761, "question_id": 55496611, "link": "https://stackoverflow.com/questions/55496611/cmake-cannot-find-libraries-installed-with-vcpkg", "title": "cmake cannot find libraries installed with vcpkg", "body": "<p>I want to use <code>vcpkg</code> in a CMake project in Windows, because I need <code>boost</code> and <code>xerces</code> that are both handled by this package manager.</p>\n\n<p>I've the following <code>CMakeLists.txt</code>:</p>\n\n<pre><code>cmake_minimum_required (VERSION 3.12.0)\n\nproject (myproj)\n\nset (CMAKE_PREFIX_PATH ${XERCES_ROOT})\nset (Boost_USE_STATIC_LIBS ON)\nset (Boost_USE_MULTITHREADED ON)\nunset (Boost_INCLUDE_DIR CACHE)\nunset (Boost_LIBRARY_DIRS CACHE)\n\n# set (CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR}/../../cmake/modules)\nfind_package (Boost COMPONENTS filesystem regex REQUIRED)\nfind_package (XercesC CONFIG REQUIRED)\n\nset (CMAKE_INCLUDE_CURRENT_DIR ON)\nmessage (STATUS \"binary dir is ${CMAKE_BINARY_DIR}\")\ninclude_directories (${CMAKE_BINARY_DIR}/${PROJECT_NAME}/)\ninclude_directories (${CMAKE_CURRENT_SOURCE_DIR}/..)\ninclude_directories (${Boost_INCLUDE_DIRS})\ninclude_directories (${XercesC_INCLUDE_DIRS})\n\nset (PROJECT_SRC\n  code.cpp\n  )\n\nadd_library (${PROJECT_NAME} SHARED ${PROJECT_SRC})\nadd_dependencies (${PROJECT_NAME} UPDATE_RESOURCES)\ntarget_link_libraries (${PROJECT_NAME} ${Boost_LIBRARIES} XercesC::XercesC)\n</code></pre>\n\n<p><code>Boost</code> and <code>xerces-c</code> are installed with <code>vcpkg</code>. Since I'm using Visual Studio Code I'm setting <code>vcpkg</code> variables in <code>settings.json</code>:</p>\n\n<pre><code>  \"cmake.configureSettings\": {\n    \"CMAKE_TOOLCHAIN_FILE\" : \"some/path/vcpkg/scripts/buildsystems/vcpkg.cmake\",\n    \"VCPKG_TARGET_TRIPLET\": \"x64-windows\"\n  }\n</code></pre>\n\n<p>When I run che CMake I obtain following errors:</p>\n\n<pre><code>[cmake] CMake Error at C:/Program Files/CMake/share/cmake-3.14/Modules/FindBoost.cmake:2132 (message):\n[cmake]   Unable to find the requested Boost libraries.\n[cmake] \n[cmake]   Unable to find the Boost header files.  Please set BOOST_ROOT to the root\n[cmake]   directory containing Boost or BOOST_INCLUDEDIR to the directory containing\n[cmake]   Boost's headers.\n[cmake] Call Stack (most recent call first):\n[cmake]   D:/projects/vcpkg/scripts/buildsystems/vcpkg.cmake:233 (_find_package)\n[cmake]   src/myroject/CMakeLists.txt:24 (find_package)\n[cmake] \n[cmake] \n[cmake] CMake Error at D:/Projects/vcpkg/installed/x64-windows/share/xercesc/vcpkg-cmake-wrapper.cmake:1 (_find_package):\n[cmake]   Could not find a package configuration file provided by \"XercesC\" with any\n[cmake]   of the following names:\n[cmake] \n[cmake]     XercesCConfig.cmake\n[cmake]     xercesc-config.cmake\n[cmake] \n[cmake]   Add the installation prefix of \"XercesC\" to CMAKE_PREFIX_PATH or set\n[cmake]   \"XercesC_DIR\" to a directory containing one of the above files.  If\n[cmake]   \"XercesC\" provides a separate development package or SDK, be sure it has\n[cmake]   been installed.\n[cmake] Call Stack (most recent call first):\n[cmake]   D:/Projects/vcpkg/scripts/buildsystems/vcpkg.cmake:189 (include)\n[cmake]   src/ZLA/CMakeLists.txt:25 (find_package)\n[cmake] \n[cmake] \n[cmake] Configuring incomplete, errors occurred!\n[cmake] See also \"D:/Projects/zla/build/vscode/CMakeFiles/CMakeOutput.log\".\n[cms-driver] Error during CMake configure: [cmake-server] Configuration failed.\n</code></pre>\n\n<p>At the moment I've installed <code>xerces</code> with vcpkg commands, while boost is currently not installed, but I was expecting that during the execution of the cmake command, <code>vcpkg</code> will download and build needed build packages.</p>\n\n<p>I've tried also the command line:</p>\n\n<pre><code> cmake -DCMAKE_TOOLCHAIN_FILE=D:/Projects/vcpkg/scripts/buildsystems/vcpkg.cmake -DVCPKG_TARGET_TRIPLET=x64-windows ../\n</code></pre>\n\n<p>but the result is the same.</p>\n\n<p>What I'm doing wrong? How can I use vcpkg successfully?</p>\n"}, {"tags": ["c++", "windows", "ipc"], "comments": [{"owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 1, "creation_date": 1554298371, "post_id": 55496415, "comment_id": 97699962, "body": "Zero out all the bytes and <code>truncate</code> might work here?"}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 1, "creation_date": 1554298575, "post_id": 55496415, "comment_id": 97700104, "body": "As anywhere in computing, there is no empty space; you have to fill out with zeroes - or whatever you consider empty data."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1554298591, "post_id": 55496415, "comment_id": 97700111, "body": "for what you need &quot;erase&quot; the file mapping content before write ? simply write your data"}, {"owner": {"reputation": 61, "user_id": 10104545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/724815fcb668181454703ac7e6a686be?s=128&d=identicon&r=PG", "display_name": "P.Maestro", "link": "https://stackoverflow.com/users/10104545/p-maestro"}, "reply_to_user": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 0, "creation_date": 1554298817, "post_id": 55496415, "comment_id": 97700265, "body": "@Brandon, I will tried that, thanks you."}, {"owner": {"reputation": 61, "user_id": 10104545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/724815fcb668181454703ac7e6a686be?s=128&d=identicon&r=PG", "display_name": "P.Maestro", "link": "https://stackoverflow.com/users/10104545/p-maestro"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1554299240, "post_id": 55496415, "comment_id": 97700531, "body": "@RbMm, if i write my new data without erasing and the new data that i want to write are longer than the old data. So in the file mapping, the data start with the new data and at the end, there is older value."}, {"owner": {"reputation": 61, "user_id": 10104545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/724815fcb668181454703ac7e6a686be?s=128&d=identicon&r=PG", "display_name": "P.Maestro", "link": "https://stackoverflow.com/users/10104545/p-maestro"}, "reply_to_user": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1554299334, "post_id": 55496415, "comment_id": 97700580, "body": "@MichaelChourdakis, i take note, thanks"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1554299481, "post_id": 55496415, "comment_id": 97700681, "body": "@P.Maestro - you not need &quot;erase&quot; old data in any case. you simply bad design your data fotmat. if want zero end string - so simply write it as is. again - erase - senseless"}, {"owner": {"reputation": 61, "user_id": 10104545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/724815fcb668181454703ac7e6a686be?s=128&d=identicon&r=PG", "display_name": "P.Maestro", "link": "https://stackoverflow.com/users/10104545/p-maestro"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1554299813, "post_id": 55496415, "comment_id": 97700898, "body": "@RbMm Yes, you are right. If i understand, you all suggest to me to manage the end of my data with zeroes. I will do that, Thanks :)"}], "owner": {"reputation": 61, "user_id": 10104545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/724815fcb668181454703ac7e6a686be?s=128&d=identicon&r=PG", "display_name": "P.Maestro", "link": "https://stackoverflow.com/users/10104545/p-maestro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554298201, "creation_date": 1554298201, "question_id": 55496415, "link": "https://stackoverflow.com/questions/55496415/is-there-a-function-or-method-to-erase-the-content-of-a-file-mapping-without-clo", "title": "Is there a function or method to erase the content of a file mapping without closing it?", "body": "<p>I'm working in implementation of IPC on a program.<br/> I've choosed to use the File Mapping method.<br/></p>\n\n<p>Firstly, I need that a process write some data on the memory block that i've created previously.<br/>\nThen, an other process access this file mapping, read the content and write new content on the memory block.<br/>\nTo finish, a third process access the file mapping and read the content. <br/></p>\n\n<p>Example : <br/>\n- The first process write \"<strong>UNLOCK</strong>\".<br/>\n- The second process read \"<strong>UNLOCK</strong>\" and write \"<strong>LOCK</strong>\" on the file mapping.<br/>\n- The third process read \"<strong>LOCKCK</strong>\".<br/></p>\n\n<p>So, I want to erase the file mapping content before write. I found nothing about that, the only solution that I found is to close the file mapping but I need to keep it alive.<br/>\nActually, the only way that I found to correct my problem is to write \"<strong>LOCK__</strong>\". (note that underscore refer to space character)<br/> Thanks to space character, the length of the word is equal than \"<strong>UNLOCK</strong>\". <br/></p>\n\n<p>There is a method or function to delete the file mapping content, please ?</p>\n\n<p>PM.</p>\n"}, {"tags": ["c++", "sql-server", "com", "ado"], "comments": [{"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1554299606, "post_id": 55496394, "comment_id": 97700756, "body": "Did you link against comsuppw.lib?"}, {"owner": {"reputation": 3, "user_id": 11237432, "user_type": "registered", "profile_image": "https://graph.facebook.com/2291439601128833/picture?type=large", "display_name": "Giorgi Gogenia", "link": "https://stackoverflow.com/users/11237432/giorgi-gogenia"}, "reply_to_user": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 0, "creation_date": 1554303002, "post_id": 55496394, "comment_id": 97703039, "body": "no, what is that or how can i do that? is there any documentation?"}, {"owner": {"reputation": 1482, "user_id": 11082033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16202735251109a2e024fbdd88d5fc23?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/11082033/j-r"}, "edited": false, "score": 0, "creation_date": 1554377973, "post_id": 55496394, "comment_id": 97734685, "body": "You are trying to step into the <code>comutil</code> source code but it is unlikely that the error lies there. Instead of focusing on the problem on how to debug <code>comutil</code> or other Microsoft provided software you should probably look into your code. The connection string that you are using does not look like an ADO connection string. Maybe this helps: <a href=\"https://docs.microsoft.com/en-us/office/vba/access/concepts/activex-data-objects/create-an-ado-connection-string\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/office/vba/access/concepts/&hellip;</a>"}, {"owner": {"reputation": 1482, "user_id": 11082033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16202735251109a2e024fbdd88d5fc23?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/11082033/j-r"}, "edited": false, "score": 0, "creation_date": 1554378096, "post_id": 55496394, "comment_id": 97734773, "body": "PS: If you don&#39;t add @&lt;name&gt; to comments responding to a person then that person may not get a notification in their Inbox."}, {"owner": {"reputation": 3, "user_id": 11237432, "user_type": "registered", "profile_image": "https://graph.facebook.com/2291439601128833/picture?type=large", "display_name": "Giorgi Gogenia", "link": "https://stackoverflow.com/users/11237432/giorgi-gogenia"}, "reply_to_user": {"reputation": 1482, "user_id": 11082033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16202735251109a2e024fbdd88d5fc23?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/11082033/j-r"}, "edited": false, "score": 0, "creation_date": 1554389454, "post_id": 55496394, "comment_id": 97742534, "body": "@J.R. i made it by ODBC Data Sources application ( because when i use full path of connection string it goes to an error), that connects correctly, i checked it from SQL server profiler. but maybe today i found something to execute command,i need to import &quot;msadox.dll&quot;, i dont know exectly. am i right?"}, {"owner": {"reputation": 1482, "user_id": 11082033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16202735251109a2e024fbdd88d5fc23?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/11082033/j-r"}, "edited": false, "score": 0, "creation_date": 1554417396, "post_id": 55496394, "comment_id": 97755825, "body": "I suspect that is nothing to do with any DLL import but I&#39;m guessing. There are some discussions on SO around the &#39;Multiple-step&#39; error and how to approach it; maybe you can find something useful there."}, {"owner": {"reputation": 3, "user_id": 11237432, "user_type": "registered", "profile_image": "https://graph.facebook.com/2291439601128833/picture?type=large", "display_name": "Giorgi Gogenia", "link": "https://stackoverflow.com/users/11237432/giorgi-gogenia"}, "reply_to_user": {"reputation": 1482, "user_id": 11082033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16202735251109a2e024fbdd88d5fc23?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/11082033/j-r"}, "edited": false, "score": 0, "creation_date": 1554455784, "post_id": 55496394, "comment_id": 97767326, "body": "@J.R i dont understand exactly what is SO or Multiple-step error?"}, {"owner": {"reputation": 1482, "user_id": 11082033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16202735251109a2e024fbdd88d5fc23?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/11082033/j-r"}, "edited": false, "score": 0, "creation_date": 1554456385, "post_id": 55496394, "comment_id": 97767699, "body": "@GiorgiGogenia SO = stackoverflow and the multiple-step error is the error that you have reported."}, {"owner": {"reputation": 3, "user_id": 11237432, "user_type": "registered", "profile_image": "https://graph.facebook.com/2291439601128833/picture?type=large", "display_name": "Giorgi Gogenia", "link": "https://stackoverflow.com/users/11237432/giorgi-gogenia"}, "edited": false, "score": 0, "creation_date": 1554463101, "post_id": 55496394, "comment_id": 97771454, "body": "thank you. i will search for it"}], "owner": {"reputation": 3, "user_id": 11237432, "user_type": "registered", "profile_image": "https://graph.facebook.com/2291439601128833/picture?type=large", "display_name": "Giorgi Gogenia", "link": "https://stackoverflow.com/users/11237432/giorgi-gogenia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 254, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1554299236, "creation_date": 1554298131, "last_edit_date": 1554299236, "question_id": 55496394, "link": "https://stackoverflow.com/questions/55496394/comutil-cpp-not-found-error-where-can-i-find-this-file", "title": "comutil.cpp not found error, where can i find this file?", "body": "<p>I'm using ado to connect my c++ project to database. So when I'm making connection to SQL-Server and than open the connection I get such kind of error comutil.cpp not found but only if I use <code>step into(F11)</code> during debugging but if I use <code>step over(F10)</code> there is not error and continue running.</p>\n\n<p>I have searched my computer and have not been able to find the file anywhere.\nShould I install comutil.cpp source code or file?</p>\n\n<p>p.s I don't have error until connection execute.(error is: <code>DB_E_ERRORSOCCURRED Multiple-step OLE DB operation generated errors. Check each OLE DB status value, if available. No work was done.</code>) also when connection opens but it also get nothing as value <code>&lt;Information not available, no symbols loaded for msado15.dll&gt;</code> and is this related to comutil.cpp? If not how can I execute my connection?</p>\n\n<p>I've been wracking my brain over and over trying to find a solution for this, but does anyone know how to resolve this problem?</p>\n\n<pre><code>//TESTHR Function which check if HRESULT is okay or not\n_ConnectionPtr pConnection;\n_RecordsetPtr pRecordset;\n_CommandPtr pCommand;\n\nTESTHR(CoInitialize(NULL));\n\nTESTHR(pConnection.CreateInstance(__uuidof(Connection)));\n_bstr_t strCon(_T(\"ADOSQL\"));\nTESTHR(pConnection-&gt;Open(strCon, \"\", \"\", adOpenForwardOnly));\n\nTESTHR(hr = pCommand.CreateInstance(__uuidof(Command)));\n\n_bstr_t InsertQuery(_T(\"Insert Into TestTB(AccountID, Balance) Values(@AccountID, @Balance)\"));\n\npCommand-&gt;ActiveConnection = pConnection;\npCommand-&gt;CommandText = InsertQuery;\npCommand-&gt;CommandType = adCmdText;\n\nTESTHR(pRecordset.CreateInstance(__uuidof(Recordset)));\nhr = pRecordset-&gt;Open(SQLQuery, pConnection.GetInterfacePtr(), adOpenForwardOnly, adLockReadOnly, adCmdText);\n//-------------\n//some operations\n//-------------\n\npConnection-&gt;Execute(InsertQuery, vRecordsAffected, adCmdText); //here error occures\npRecordset-&gt;Close();\npConnection-&gt;Close();\nCoUninitialize();\n</code></pre>\n"}, {"tags": ["c++", "c", "visual-studio-2012", "avx2", "gcc7"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1554298531, "post_id": 55496389, "comment_id": 97700075, "body": "Struct padding of <code>MD5_AVX2_CTX</code>? Print its size on both OS respectively."}, {"owner": {"reputation": 13, "user_id": 3231972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4f15516e83d0cff6b55d5a406bae730?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan S", "link": "https://stackoverflow.com/users/3231972/nathan-s"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1554303896, "post_id": 55496389, "comment_id": 97703749, "body": "on both compiler the size of <b>MD5_AVX2_CTX</b> is 800"}, {"owner": {"reputation": 13, "user_id": 3231972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4f15516e83d0cff6b55d5a406bae730?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan S", "link": "https://stackoverflow.com/users/3231972/nathan-s"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1554307248, "post_id": 55496389, "comment_id": 97705836, "body": "@nulleight i did change the types to <code>uint_*</code> infact this was the issue. Thank you so much for the help."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1554308293, "post_id": 55499260, "comment_id": 97706392, "body": "All the versions look quite fishy. Be aware of pointer aliasing issues."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1554314521, "post_id": 55499260, "comment_id": 97709413, "body": "Yes, Windows x64&#39;s ABI uses 32-bit <code>long</code> (LLP64 model), while x86-64 System V uses 64-bit <code>long</code> (LP64 model).  GCC targeting Windows of course uses 32-bit <code>long</code>, so the OP&#39;s question is actually Windows vs. Linux as far as that issue, and would happen even without MSVC."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1554314680, "post_id": 55499260, "comment_id": 97709487, "body": "@Lundin: MSVC makes pointer-casting for type-punning well defined.  Other compilers (except <code>gcc -fno-strict-aliasing</code>) leave it undefined like ISO C++.  So yes, that&#39;s a bug in the source, whether it manifests in the compiled code or not."}], "tags": [], "owner": {"reputation": 596, "user_id": 789371, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a6a8d60cf810d14224154d35a1854aaf?s=128&d=identicon&r=PG", "display_name": "nulleight", "link": "https://stackoverflow.com/users/789371/nulleight"}, "is_accepted": true, "score": 3, "last_activity_date": 1554309364, "last_edit_date": 1554309364, "creation_date": 1554306514, "answer_id": 55499260, "question_id": 55496389, "link": "https://stackoverflow.com/questions/55496389/same-avx2-program-yields-different-result-in-gcc-msvc/55499260#55499260", "title": "Same AVX2 program yields different result in gcc &amp; msvc", "body": "<p>I bet sizeof(long int) is different. It is a good idea to use uint64_t, uint32_t, uint8_t and so on instead of long int, or unsigned char. Especially if you use it to manipulate addresses. I think the error is here:</p>\n\n<pre><code>encode(&amp;digests[i][j*4], &amp;((unsigned long int *) &amp;context-&gt;state[j])[i], 4);\n</code></pre>\n\n<p>On Windows it is </p>\n\n<pre><code>encode(&amp;digests[i][j*4], &amp;((uint32_t*) &amp;context-&gt;state[j])[i], 4);\n</code></pre>\n\n<p>On Linux</p>\n\n<pre><code>encode(&amp;digests[i][j*4], &amp;((uint64_t*) &amp;context-&gt;state[j])[i], 4);\n</code></pre>\n\n<p>So you address past source array for i >= 2</p>\n\n<p>EDIT:</p>\n\n<p>also I wouldn't convert to uint64_t* directly.\nSee: <a href=\"https://stackoverflow.com/questions/2958633/gcc-strict-aliasing-and-horror-stories\">gcc, strict-aliasing, and horror stories</a></p>\n\n<p>Instead I would use memcpy to copy context->state[j] </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>union\n{\n   uint32_t elem[4];\n   uint8_t buff[sizeof(elem)];\n} u;\nmemcpy (u.buff, &amp;context-&gt;state[j], sizeof(u.buff));\n</code></pre>\n\n<p>and then use</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>encode(&amp;digests[i][j*4], &amp;u.elem[i], 4);\n</code></pre>\n\n<p>Dont forget to</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdint.h&gt;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 3231972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4f15516e83d0cff6b55d5a406bae730?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan S", "link": "https://stackoverflow.com/users/3231972/nathan-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 55499260, "answer_count": 1, "score": 1, "last_activity_date": 1554309364, "creation_date": 1554298113, "question_id": 55496389, "link": "https://stackoverflow.com/questions/55496389/same-avx2-program-yields-different-result-in-gcc-msvc", "title": "Same AVX2 program yields different result in gcc &amp; msvc", "body": "<p>I'm trying to increase throughput of md5 hash using AVX2. I have used simd_md5 library provided by a github user..</p>\n\n<p>On msvc2013 i get desired result for all 8 buffers but on linux when i run the same code only for first 4 buffers the result match &amp; next four buffer somehow the result is shifted.</p>\n\n<p>I have attached code of the same here with example</p>\n\n<pre><code>#ifndef MD5_AVX2_H\n#define MD5_AVX2_H\n\n#include &lt;immintrin.h&gt;\n#include \"md5_common.h\"\n\ntypedef struct {\n    __m256i state[8]; /* state (ABCD) */\n    unsigned long int count[2]; /* number of bits, modulo 2^64 (lsb first) */\n    unsigned char buffer1[64];\n    unsigned char buffer2[64];\n    unsigned char buffer3[64];\n    unsigned char buffer4[64];\n    unsigned char buffer5[64];\n    unsigned char buffer6[64];\n    unsigned char buffer7[64];\n    unsigned char buffer8[64];\n} MD5_AVX2_CTX;\n\n#define AVX2_ROTATE_LEFT(x, n) _mm256_or_si256(_mm256_slli_epi32((x), (n)), _mm256_srli_epi32((x), (32-(n))))\n\n#define AVX2_F(x, y, z) _mm256_or_si256(_mm256_and_si256((x), (y)), _mm256_andnot_si256((x), (z)))\n#define AVX2_G(x, y, z) _mm256_or_si256(_mm256_and_si256((x), (z)), _mm256_andnot_si256((z), (y)))\n#define AVX2_H(x, y, z) _mm256_xor_si256((x), _mm256_xor_si256((y), (z)))\n#define AVX2_I(x, y, z) _mm256_xor_si256((y), _mm256_or_si256((x), _mm256_andnot_si256((z), _mm256_cmpeq_epi32((z), (z)))))\n\n#define AVX2_STEP(f, a, b, c, d, x, s, ac) \\\n{ \\\n    (a) = _mm256_add_epi32((a), _mm256_add_epi32(_mm256_add_epi32(f((b), (c), (d)), (x)),(ac))); \\\n    (a) = AVX2_ROTATE_LEFT((a), (s)); \\\n    (a) = _mm256_add_epi32((a), (b)); \\\n}\n\nvoid md5_avx2_init(MD5_AVX2_CTX *context);\nvoid md5_avx2_update1(MD5_AVX2_CTX *context, unsigned char *input, unsigned int inputLen);\nvoid md5_avx2_update8(MD5_AVX2_CTX *context, unsigned char *input1, unsigned char *input2, unsigned char *input3, unsigned char *input4, unsigned char *input5, unsigned char *input6, unsigned char *input7, unsigned char *input8, unsigned int inputLen);\nvoid md5_avx2_final(unsigned char digests[8][16], MD5_AVX2_CTX *context);\n\n#endif\n</code></pre>\n\n<h1>c file</h1>\n\n<pre><code>\n#include \"md5_common.h\"\n#include \"md5_avx2.h\"\n\nstatic void avx2_decode(__m256i *output, unsigned char *input1, unsigned char *input2, unsigned char *input3, unsigned char *input4, unsigned char *input5, unsigned char *input6, unsigned char *input7, unsigned char *input8, unsigned int len)\n{\n    unsigned int i, j;\n    for (i = 0, j = 0; j &lt; len; i++, j += 4)\n    {\n        output[i] = _mm256_set_epi32(\n            ((unsigned long int)input8[j]) | (((unsigned long int)input8[j+1]) &lt;&lt; 8) | (((unsigned long int)input8[j+2]) &lt;&lt; 16) | (((unsigned long int)input8[j+3]) &lt;&lt; 24),\n            ((unsigned long int)input7[j]) | (((unsigned long int)input7[j+1]) &lt;&lt; 8) | (((unsigned long int)input7[j+2]) &lt;&lt; 16) | (((unsigned long int)input7[j+3]) &lt;&lt; 24),\n            ((unsigned long int)input6[j]) | (((unsigned long int)input6[j+1]) &lt;&lt; 8) | (((unsigned long int)input6[j+2]) &lt;&lt; 16) | (((unsigned long int)input6[j+3]) &lt;&lt; 24),\n            ((unsigned long int)input5[j]) | (((unsigned long int)input5[j+1]) &lt;&lt; 8) | (((unsigned long int)input5[j+2]) &lt;&lt; 16) | (((unsigned long int)input5[j+3]) &lt;&lt; 24),\n            ((unsigned long int)input4[j]) | (((unsigned long int)input4[j+1]) &lt;&lt; 8) | (((unsigned long int)input4[j+2]) &lt;&lt; 16) | (((unsigned long int)input4[j+3]) &lt;&lt; 24),\n            ((unsigned long int)input3[j]) | (((unsigned long int)input3[j+1]) &lt;&lt; 8) | (((unsigned long int)input3[j+2]) &lt;&lt; 16) | (((unsigned long int)input3[j+3]) &lt;&lt; 24),\n            ((unsigned long int)input2[j]) | (((unsigned long int)input2[j+1]) &lt;&lt; 8) | (((unsigned long int)input2[j+2]) &lt;&lt; 16) | (((unsigned long int)input2[j+3]) &lt;&lt; 24),\n            ((unsigned long int)input1[j]) | (((unsigned long int)input1[j+1]) &lt;&lt; 8) | (((unsigned long int)input1[j+2]) &lt;&lt; 16) | (((unsigned long int)input1[j+3]) &lt;&lt; 24)\n            );\n    }\n}\n\nstatic void md5_avx2_transform(__m256i *state, unsigned char block1[64], unsigned char block2[64], unsigned char block3[64], unsigned char block4[64], unsigned char block5[64], unsigned char block6[64], unsigned char block7[64], unsigned char block8[64])\n{\n    __m256i a = state[0], b = state[1], c = state[2], d = state[3], x[16];\n\n    avx2_decode(x, block1, block2, block3, block4, block5, block6, block7, block8, 64);\n\n    /* Round 1 */\n    AVX2_STEP(AVX2_F, a, b, c, d, x[ 0], S11, _mm256_set1_epi32(0xd76aa478)); /* 1 */\n    AVX2_STEP(AVX2_F, d, a, b, c, x[ 1], S12, _mm256_set1_epi32(0xe8c7b756)); /* 2 */\n    AVX2_STEP(AVX2_F, c, d, a, b, x[ 2], S13, _mm256_set1_epi32(0x242070db)); /* 3 */\n    AVX2_STEP(AVX2_F, b, c, d, a, x[ 3], S14, _mm256_set1_epi32(0xc1bdceee)); /* 4 */\n    AVX2_STEP(AVX2_F, a, b, c, d, x[ 4], S11, _mm256_set1_epi32(0xf57c0faf)); /* 5 */\n    AVX2_STEP(AVX2_F, d, a, b, c, x[ 5], S12, _mm256_set1_epi32(0x4787c62a)); /* 6 */\n    AVX2_STEP(AVX2_F, c, d, a, b, x[ 6], S13, _mm256_set1_epi32(0xa8304613)); /* 7 */\n    AVX2_STEP(AVX2_F, b, c, d, a, x[ 7], S14, _mm256_set1_epi32(0xfd469501)); /* 8 */\n    AVX2_STEP(AVX2_F, a, b, c, d, x[ 8], S11, _mm256_set1_epi32(0x698098d8)); /* 9 */\n    AVX2_STEP(AVX2_F, d, a, b, c, x[ 9], S12, _mm256_set1_epi32(0x8b44f7af)); /* 10 */\n    AVX2_STEP(AVX2_F, c, d, a, b, x[10], S13, _mm256_set1_epi32(0xffff5bb1)); /* 11 */\n    AVX2_STEP(AVX2_F, b, c, d, a, x[11], S14, _mm256_set1_epi32(0x895cd7be)); /* 12 */\n    AVX2_STEP(AVX2_F, a, b, c, d, x[12], S11, _mm256_set1_epi32(0x6b901122)); /* 13 */\n    AVX2_STEP(AVX2_F, d, a, b, c, x[13], S12, _mm256_set1_epi32(0xfd987193)); /* 14 */\n    AVX2_STEP(AVX2_F, c, d, a, b, x[14], S13, _mm256_set1_epi32(0xa679438e)); /* 15 */\n    AVX2_STEP(AVX2_F, b, c, d, a, x[15], S14, _mm256_set1_epi32(0x49b40821)); /* 16 */\n\n    /* Round 2 */\n    AVX2_STEP(AVX2_G, a, b, c, d, x[ 1], S21, _mm256_set1_epi32(0xf61e2562)); /* 17 */\n    AVX2_STEP(AVX2_G, d, a, b, c, x[ 6], S22, _mm256_set1_epi32(0xc040b340)); /* 18 */\n    AVX2_STEP(AVX2_G, c, d, a, b, x[11], S23, _mm256_set1_epi32(0x265e5a51)); /* 19 */\n    AVX2_STEP(AVX2_G, b, c, d, a, x[ 0], S24, _mm256_set1_epi32(0xe9b6c7aa)); /* 20 */\n    AVX2_STEP(AVX2_G, a, b, c, d, x[ 5], S21, _mm256_set1_epi32(0xd62f105d)); /* 21 */\n    AVX2_STEP(AVX2_G, d, a, b, c, x[10], S22, _mm256_set1_epi32( 0x2441453)); /* 22 */\n    AVX2_STEP(AVX2_G, c, d, a, b, x[15], S23, _mm256_set1_epi32(0xd8a1e681)); /* 23 */\n    AVX2_STEP(AVX2_G, b, c, d, a, x[ 4], S24, _mm256_set1_epi32(0xe7d3fbc8)); /* 24 */\n    AVX2_STEP(AVX2_G, a, b, c, d, x[ 9], S21, _mm256_set1_epi32(0x21e1cde6)); /* 25 */\n    AVX2_STEP(AVX2_G, d, a, b, c, x[14], S22, _mm256_set1_epi32(0xc33707d6)); /* 26 */\n    AVX2_STEP(AVX2_G, c, d, a, b, x[ 3], S23, _mm256_set1_epi32(0xf4d50d87)); /* 27 */\n    AVX2_STEP(AVX2_G, b, c, d, a, x[ 8], S24, _mm256_set1_epi32(0x455a14ed)); /* 28 */\n    AVX2_STEP(AVX2_G, a, b, c, d, x[13], S21, _mm256_set1_epi32(0xa9e3e905)); /* 29 */\n    AVX2_STEP(AVX2_G, d, a, b, c, x[ 2], S22, _mm256_set1_epi32(0xfcefa3f8)); /* 30 */\n    AVX2_STEP(AVX2_G, c, d, a, b, x[ 7], S23, _mm256_set1_epi32(0x676f02d9)); /* 31 */\n    AVX2_STEP(AVX2_G, b, c, d, a, x[12], S24, _mm256_set1_epi32(0x8d2a4c8a)); /* 32 */\n\n    /* Round 3 */\n    AVX2_STEP(AVX2_H, a, b, c, d, x[ 5], S31, _mm256_set1_epi32(0xfffa3942)); /* 33 */\n    AVX2_STEP(AVX2_H, d, a, b, c, x[ 8], S32, _mm256_set1_epi32(0x8771f681)); /* 34 */\n    AVX2_STEP(AVX2_H, c, d, a, b, x[11], S33, _mm256_set1_epi32(0x6d9d6122)); /* 35 */\n    AVX2_STEP(AVX2_H, b, c, d, a, x[14], S34, _mm256_set1_epi32(0xfde5380c)); /* 36 */\n    AVX2_STEP(AVX2_H, a, b, c, d, x[ 1], S31, _mm256_set1_epi32(0xa4beea44)); /* 37 */\n    AVX2_STEP(AVX2_H, d, a, b, c, x[ 4], S32, _mm256_set1_epi32(0x4bdecfa9)); /* 38 */\n    AVX2_STEP(AVX2_H, c, d, a, b, x[ 7], S33, _mm256_set1_epi32(0xf6bb4b60)); /* 39 */\n    AVX2_STEP(AVX2_H, b, c, d, a, x[10], S34, _mm256_set1_epi32(0xbebfbc70)); /* 40 */\n    AVX2_STEP(AVX2_H, a, b, c, d, x[13], S31, _mm256_set1_epi32(0x289b7ec6)); /* 41 */\n    AVX2_STEP(AVX2_H, d, a, b, c, x[ 0], S32, _mm256_set1_epi32(0xeaa127fa)); /* 42 */\n    AVX2_STEP(AVX2_H, c, d, a, b, x[ 3], S33, _mm256_set1_epi32(0xd4ef3085)); /* 43 */\n    AVX2_STEP(AVX2_H, b, c, d, a, x[ 6], S34, _mm256_set1_epi32( 0x4881d05)); /* 44 */\n    AVX2_STEP(AVX2_H, a, b, c, d, x[ 9], S31, _mm256_set1_epi32(0xd9d4d039)); /* 45 */\n    AVX2_STEP(AVX2_H, d, a, b, c, x[12], S32, _mm256_set1_epi32(0xe6db99e5)); /* 46 */\n    AVX2_STEP(AVX2_H, c, d, a, b, x[15], S33, _mm256_set1_epi32(0x1fa27cf8)); /* 47 */\n    AVX2_STEP(AVX2_H, b, c, d, a, x[ 2], S34, _mm256_set1_epi32(0xc4ac5665)); /* 48 */\n\n    /* Round 4 */\n    AVX2_STEP(AVX2_I, a, b, c, d, x[ 0], S41, _mm256_set1_epi32(0xf4292244)); /* 49 */\n    AVX2_STEP(AVX2_I, d, a, b, c, x[ 7], S42, _mm256_set1_epi32(0x432aff97)); /* 50 */\n    AVX2_STEP(AVX2_I, c, d, a, b, x[14], S43, _mm256_set1_epi32(0xab9423a7)); /* 51 */\n    AVX2_STEP(AVX2_I, b, c, d, a, x[ 5], S44, _mm256_set1_epi32(0xfc93a039)); /* 52 */\n    AVX2_STEP(AVX2_I, a, b, c, d, x[12], S41, _mm256_set1_epi32(0x655b59c3)); /* 53 */\n    AVX2_STEP(AVX2_I, d, a, b, c, x[ 3], S42, _mm256_set1_epi32(0x8f0ccc92)); /* 54 */\n    AVX2_STEP(AVX2_I, c, d, a, b, x[10], S43, _mm256_set1_epi32(0xffeff47d)); /* 55 */\n    AVX2_STEP(AVX2_I, b, c, d, a, x[ 1], S44, _mm256_set1_epi32(0x85845dd1)); /* 56 */\n    AVX2_STEP(AVX2_I, a, b, c, d, x[ 8], S41, _mm256_set1_epi32(0x6fa87e4f)); /* 57 */\n    AVX2_STEP(AVX2_I, d, a, b, c, x[15], S42, _mm256_set1_epi32(0xfe2ce6e0)); /* 58 */\n    AVX2_STEP(AVX2_I, c, d, a, b, x[ 6], S43, _mm256_set1_epi32(0xa3014314)); /* 59 */\n    AVX2_STEP(AVX2_I, b, c, d, a, x[13], S44, _mm256_set1_epi32(0x4e0811a1)); /* 60 */\n    AVX2_STEP(AVX2_I, a, b, c, d, x[ 4], S41, _mm256_set1_epi32(0xf7537e82)); /* 61 */\n    AVX2_STEP(AVX2_I, d, a, b, c, x[11], S42, _mm256_set1_epi32(0xbd3af235)); /* 62 */\n    AVX2_STEP(AVX2_I, c, d, a, b, x[ 2], S43, _mm256_set1_epi32(0x2ad7d2bb)); /* 63 */\n    AVX2_STEP(AVX2_I, b, c, d, a, x[ 9], S44, _mm256_set1_epi32(0xeb86d391)); /* 64 */\n\n    state[0] = _mm256_add_epi32(state[0], a);\n    state[1] = _mm256_add_epi32(state[1], b);\n    state[2] = _mm256_add_epi32(state[2], c);\n    state[3] = _mm256_add_epi32(state[3], d);\n\n    /* Zeroize sensitive information.\n     */\n    //memset((unsigned char *)x, 0, sizeof (x));\n}\n\nvoid md5_avx2_init(MD5_AVX2_CTX *context)\n{\n    context-&gt;count[0] = context-&gt;count[1] = 0;\n    /* Load magic initialization constants. */\n    context-&gt;state[0] = _mm256_set1_epi32(0x67452301);\n    context-&gt;state[1] = _mm256_set1_epi32(0xefcdab89);\n    context-&gt;state[2] = _mm256_set1_epi32(0x98badcfe);\n    context-&gt;state[3] = _mm256_set1_epi32(0x10325476);\n}\n\nvoid md5_avx2_update1(MD5_AVX2_CTX *context, unsigned char *input, unsigned int inputLen)\n{\n    md5_avx2_update8(context, input, input, input, input, input, input, input, input, inputLen);\n}\n\nvoid md5_avx2_update8(MD5_AVX2_CTX *context, unsigned char *input1, unsigned char *input2, unsigned char *input3, unsigned char *input4, unsigned char *input5, unsigned char *input6, unsigned char *input7, unsigned char *input8, unsigned int inputLen)\n{\n    unsigned int i, index, partLen;\n\n    /* Compute number of bytes mod 64 */\n    index = (unsigned int)((context-&gt;count[0] &gt;&gt; 3) &amp; 0x3F);\n\n    /* Update number of bits */\n    if ((context-&gt;count[0] += ((unsigned long int)inputLen &lt;&lt; 3)) &lt; ((unsigned long int)inputLen &lt;&lt; 3))\n        context-&gt;count[1]++;\n\n    context-&gt;count[1] += ((unsigned long int)inputLen &gt;&gt; 29);\n\n    partLen = 64 - index;\n\n    /* Transform as many times as possible. */\n    if (inputLen &gt;= partLen)\n    {\n        memcpy((unsigned char *)&amp;context-&gt;buffer1[index], (unsigned char *)input1, partLen);\n        memcpy((unsigned char *)&amp;context-&gt;buffer2[index], (unsigned char *)input2, partLen);\n        memcpy((unsigned char *)&amp;context-&gt;buffer3[index], (unsigned char *)input3, partLen);\n        memcpy((unsigned char *)&amp;context-&gt;buffer4[index], (unsigned char *)input4, partLen);\n        memcpy((unsigned char *)&amp;context-&gt;buffer5[index], (unsigned char *)input5, partLen);\n        memcpy((unsigned char *)&amp;context-&gt;buffer6[index], (unsigned char *)input6, partLen);\n        memcpy((unsigned char *)&amp;context-&gt;buffer7[index], (unsigned char *)input7, partLen);\n        memcpy((unsigned char *)&amp;context-&gt;buffer8[index], (unsigned char *)input8, partLen);\n\n        md5_avx2_transform(context-&gt;state, context-&gt;buffer1, context-&gt;buffer2, context-&gt;buffer3, context-&gt;buffer4, context-&gt;buffer5, context-&gt;buffer6, context-&gt;buffer7, context-&gt;buffer8);\n\n        for (i = partLen; i + 63 &lt; inputLen; i += 64)\n            md5_avx2_transform(context-&gt;state, &amp;input1[i], &amp;input2[i], &amp;input3[i], &amp;input4[i], &amp;input5[i], &amp;input6[i], &amp;input7[i], &amp;input8[i]);\n\n        index = 0;\n    }\n    else\n    {\n        i = 0;\n    }\n\n    /* Buffer remaining input */\n    memcpy((unsigned char *)&amp;context-&gt;buffer1[index], (unsigned char *)&amp;input1[i], inputLen-i);\n    memcpy((unsigned char *)&amp;context-&gt;buffer2[index], (unsigned char *)&amp;input2[i], inputLen-i);\n    memcpy((unsigned char *)&amp;context-&gt;buffer3[index], (unsigned char *)&amp;input3[i], inputLen-i);\n    memcpy((unsigned char *)&amp;context-&gt;buffer4[index], (unsigned char *)&amp;input4[i], inputLen-i);\n    memcpy((unsigned char *)&amp;context-&gt;buffer5[index], (unsigned char *)&amp;input5[i], inputLen-i);\n    memcpy((unsigned char *)&amp;context-&gt;buffer6[index], (unsigned char *)&amp;input6[i], inputLen-i);\n    memcpy((unsigned char *)&amp;context-&gt;buffer7[index], (unsigned char *)&amp;input7[i], inputLen-i);\n    memcpy((unsigned char *)&amp;context-&gt;buffer8[index], (unsigned char *)&amp;input8[i], inputLen-i);\n}\n\nvoid md5_avx2_final(unsigned char digests[8][16], MD5_AVX2_CTX *context)\n{\n    unsigned char bits[8];\n    unsigned int index, padLen;\n    int i, j;\n\n    /* Save number of bits */\n    encode(bits, context-&gt;count, 8);\n\n    /* Pad out to 56 mod 64. */\n    index = (unsigned int)((context-&gt;count[0] &gt;&gt; 3) &amp; 0x3f);\n    padLen = (index &lt; 56) ? (56 - index) : (120 - index);\n    md5_avx2_update1(context, PADDING, padLen);\n\n    /* Append length (before padding) */\n    md5_avx2_update1(context, bits, 8);\n\n    /* Store state in digest */\n    for (i = 0; i &lt; 8; i++)\n        for (j = 0; j &lt; 4; j++)\n            encode(&amp;digests[i][j*4], &amp;((unsigned long int *) &amp;context-&gt;state[j])[i], 4);\n\n    /* Zeroize sensitive information. */\n    //memset((unsigned char *)context, 0, sizeof (*context));\n}\n</code></pre>\n\n<p>md5_common.h</p>\n\n<pre><code>#ifndef MD5_COMMON_H\n#define MD5_COMMON_H\n\n#define S11 7\n#define S12 12\n#define S13 17\n#define S14 22\n#define S21 5\n#define S22 9\n#define S23 14\n#define S24 20\n#define S31 4\n#define S32 11\n#define S33 16\n#define S34 23\n#define S41 6\n#define S42 10\n#define S43 15\n#define S44 21\n\nstatic unsigned char PADDING[64] =\n{\n    0x80, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n};\n\nvoid encode(unsigned char *output, unsigned long int *input, unsigned int len);\n\n#endif\n</code></pre>\n\n<p>main file</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    char *string = \"abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz\";\n    int len = strlen(string);\n\n    /* Test strings. */\n    printf(\"TEST STRINGS\\n\");\n\n        unsigned char digest[8][16];\n    int i, j;\n\n    MD5_AVX2_CTX context;       \n    md5_avx2_init(&amp;context);\n    md5_avx2_update1(&amp;context, string, len);\n    md5_avx2_final(digest, &amp;context);\n\n    printf(\"AVX2 (\\\"%s\\\") = \", string);\n    for (i = 0; i &lt; 8; i++)\n    {\n        for (j = 0; j &lt; 16; j++)\n            printf (\"%02x\", digest[i][j]);\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>44077f4856c7d6c519fce5dfc0fb1fcf </p>\n\n<p>44077f4856c7d6c519fce5dfc0fb1fcf </p>\n\n<p>44077f4856c7d6c519fce5dfc0fb1fcf </p>\n\n<p>44077f4856c7d6c519fce5dfc0fb1fcf </p>\n\n<p>44077f4856c7d6c519fce5dfc0fb1fcf </p>\n\n<p>44077f4856c7d6c519fce5dfc0fb1fcf </p>\n\n<p>44077f4856c7d6c519fce5dfc0fb1fcf </p>\n\n<p>44077f4856c7d6c519fce5dfc0fb1fcf </p>\n\n<p>this working properly with MSVC 2013 v120 c compiler</p>\n\n<h1>but with gcc 7.2 compiler i get</h1>\n\n<p>44077f4856c7d6c519fce5dfc0fb1fcf</p>\n\n<p>44077f4856c7d6c519fce5dfc0fb1fcf</p>\n\n<p>44077f4856c7d6c519fce5dfc0fb1fcf</p>\n\n<p>44077f4856c7d6c519fce5dfc0fb1fcf</p>\n\n<p>56c7d6c519fce5dfc0fb1fcf00000000</p>\n\n<p>56c7d6c519fce5dfc0fb1fcf00000000</p>\n\n<p>56c7d6c519fce5dfc0fb1fcf00000000</p>\n\n<p>56c7d6c519fce5dfc0fb1fcf00000000</p>\n\n<p>Can some expert please help me why the same code behaves different with compilers.. no optimizations enabled..</p>\n"}]