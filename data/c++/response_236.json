[{"tags": ["c++", "thrust"], "owner": {"reputation": 58, "user_id": 10741119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c015b1d8a0d37e989f5c15d0db38ae05?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie H.", "link": "https://stackoverflow.com/users/10741119/charlie-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1563407924, "creation_date": 1563407924, "question_id": 57085412, "link": "https://stackoverflow.com/questions/57085412/how-to-implement-thrusttransform-with-custom-functor-that-skips-part-of-device", "title": "How to implement thrust::transform with custom functor that skips part of device_vector?", "body": "<p>I am working on a project (essentially a physics simulation) in which I need to perform calculations on a large number of nodes over many time steps. I have currently implemented each type of calculation by writing a custom functor which is called within a <code>thrust::transform</code>. </p>\n\n<p>As a minimal example (with psuedo-code), say I have some data that all share a common structure, but can be broken down into different types (A, B and C), e.g. all have a </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>double value.\n</code></pre>\n\n<p>Thus, I am storing this data in a single <code>device_vector</code> as follows:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class Data {\n    thrust::device_vector&lt;double&gt; values;\n    unsigned values_begin_A, values_end_A;\n    unsigned values_begin_B, values_end_B;\n    unsigned values_begin_C, values_end_C;\n}\n</code></pre>\n\n<p>where type A occupies the first part of the vector, followed by type B, then type C. To keep track, I save the start/end index values of each type.</p>\n\n<p>The different types of data need to be acted on by different functors (e.g. functor1 is applied to type A and B; functor 2 to A, B, and C; and functor3 to A and C). Each functor needs access to the index of the value within the vector, supplied by a <code>counting_iterator</code> and will store the results in a separate vector. </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct my_functor : public thrust::unary_function&lt; thrust::tuple&lt;unsigned, double&gt; , double &gt; {\n\n    __host__ __device__\n    double operator() (const thrust::tuple&lt;unsigned, double&gt; index_value) {\n\n        // Do something with the index and value.\n\n        return result;\n    }\n}\n</code></pre>\n\n<p>My problem is that I do not know the best way to implement that last functor that acts on type A and C values while skipping B. In particular, I'm looking for a thrust-friendly solution that scales reasonably well as I add more node types and more functors (that act on a combination of old and new types) while still reaping the benefits of parallelization. </p>\n\n<p>I've come up with four options:</p>\n\n<p><strong>Option 1:</strong></p>\n\n<p>Have one transform call for each data type, e.g.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void Option_One(thrust::device_vector&lt;double&gt;&amp; result) {\n    // Multiple transform calls.\n\n    thrust::counting_iterator index(0);\n\n    // Apply functor to 'A' values.\n    thrust::transform( \n        thrust::make_zip_iterator(thrust::make_tuple(index, values.begin())),\n        thrust::make_zip_iterator(thrust::make_tuple(index, values.begin())) + values_end_A,\n        result.begin(),\n        my_functor());\n\n    // Apply functor to 'C' values.\n    thrust::transform( \n        thrust::make_zip_iterator(thrust::make_tuple(index, values.begin())) + values_begin_C,\n        thrust::make_zip_iterator(thrust::make_tuple(index, values.begin())) + values_end_C,\n        result.begin() + values_begin_C,\n        my_functor());\n}\n</code></pre>\n\n<p>This seems fairly straightforward at the expense of efficiency, since I am sacrificing the ability to evaluate A and C in parallel.</p>\n\n<p><strong>Option 2:</strong></p>\n\n<p>Copy the values into a temporary vector, call the transform on the temporary vector, then copy the temporary results back into results. This seems like a lot of copying back and forth, but allows the transform to be called only once on A and C together.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void Option_Two(thrust::device_vector&lt;double&gt;&amp; result) {\n\n    // Copy 'A' and 'C' values into temporary vector\n    thrust::device_vector&lt;double&gt; temp_values_A_and_C(size_A + size_C);\n    thrust::copy(values.begin(), values.begin() + values_end_A, temp_values_A_and_C.begin());\n    thrust::copy(values.begin() + values_begin_C, values.begin() + values_end_C, temp_values_A_and_C.begin() + values_end_A);\n\n    // Store results in temporary vector.\n    thrust::device_vector&lt;double&gt; temp_results_A_and_C(size_A + size_C);\n\n    thrust::transform( \n        thrust::make_zip_iterator(thrust::make_tuple(index, temp_values_A_and_C.begin())),\n        thrust::make_zip_iterator(thrust::make_tuple(index, temp_values_A_and_C.begin())) + size_A + size_C,\n        temp_results_A_and_C.begin(),\n        my_functor());\n\n\n    // Copy temp results back into result\n    // ....\n}\n</code></pre>\n\n<p><strong>Option 3:</strong></p>\n\n<p>Call the transform on all values, but alter the functor to check the index and only act on indices within the A or C range.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct my_functor_with_index_checking : public thrust::unary_function&lt; thrust::tuple&lt;unsigned, double&gt; , double &gt; {\n\n    __host__ __device__\n    double operator() (const thrust::tuple&lt;unsigned, double&gt; index_value) {\n\n        if ( (index &gt;= values_begin_A &amp;&amp; index &lt;= values_end_A ) ||\n            ( index &gt;= values_begin_C &amp;&amp; index &lt;= values_end_C ) ) {\n\n                // Do something with the index and value.\n                return result;\n             }\n        else {\n            // Do nothing;\n            return 0; //Result is 0 by default.\n        }\n    }\n}\n\nvoid Option_Three(thrust::device_vector&lt;double&gt;&amp; result) {\n\n    // Apply functor to all values, but check index inside functor.\n    thrust::transform( \n        thrust::make_zip_iterator(thrust::make_tuple(index, values.begin())),\n        thrust::make_zip_iterator(thrust::make_tuple(index, values.begin())) + values.size(),\n        result.begin(),\n        my_functor_with_index_checking());\n}\n</code></pre>\n\n<p><strong>Option 4:</strong></p>\n\n<p>The final option I've come up with is to create a custom iterator based on the <code>counting_iterator</code> that counts normally within the A range, but then skips to the beginning of C once it reaches the end of A. This seems like an elegant solution, but I have no idea how to do this.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void Option_Four(thrust::device_vector&lt;double&gt;&amp; result) {\n\n    // Create my own version of a counting iterator\n    // that skips from the end of 'A' to the beginning of 'C'\n    // I don't know how to do this!\n    FancyCountingIterator fancyIndex(0); \n\n    thrust::transform( \n        thrust::make_zip_iterator(thrust::make_tuple(fancyIndex, values.begin())),\n        thrust::make_zip_iterator(thrust::make_tuple(fancyIndex, values.begin())) + values.size(),\n        result.begin(),\n        my_functor());\n}\n</code></pre>\n"}, {"tags": ["c++", "macos", "plugins", "shared-libraries"], "owner": {"reputation": 2603, "user_id": 846340, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/b4e01fd7f5752f9de60d5a8b96460392?s=128&d=identicon&r=PG", "display_name": "peetonn", "link": "https://stackoverflow.com/users/846340/peetonn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1563406121, "creation_date": 1563406121, "question_id": 57085215, "link": "https://stackoverflow.com/questions/57085215/whats-the-best-way-to-share-memory-between-two-shared-libraries-macos-plugins", "title": "What&#39;s the best way to share memory between two shared libraries (macOS plugins)?", "body": "<p>I have two shared libraries that need to share objects between each other. That means I need to share memory from one shared library to the other and vice versa.\nObviously, I need to use <code>extern</code> declarations. However, if either of the libraries is not loaded, trying to access external functions/variables will cause crash.</p>\n\n<p>So now I'm thinking of extracting common/shareable objects into a third, separate shared library which those two should link to. However I have those shared libraries as macOS plugins and that means that each plugin will have its' own copy of common shared library. How one can approach this?</p>\n"}, {"tags": ["c++", "c++11", "multimap", "std-pair"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 6, "creation_date": 1563403199, "post_id": 57084816, "comment_id": 100692766, "body": "Looks like <code>myStruct</code> is missing the <code>operator&lt;</code> required for strict weak ordering and placement in the map. Probably all you need to do is implement it. <a href=\"https://stackoverflow.com/questions/4421706/what-are-the-basic-rules-and-idioms-for-operator-overloading\">Here&#39;s some help on doing that.</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1563403429, "post_id": 57084816, "comment_id": 100692821, "body": "It would simplify your code to follow Rule of Zero for <code>myStruct</code>. Also you can avoid repetition by using <code>std::make_pair(myStruct1, myStruct2)</code>"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1563409199, "post_id": 57084816, "comment_id": 100694013, "body": "Side-note: Is there a reason you&#39;re explicitly declaring a copy constructor and copy assignment operator? C++ would already generate them for you, and by defining them, you block the implicitly defined move constructor (which would improve performance in many cases)."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 11709777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aea0822f1e4241b7320f4d4d60592427?s=128&d=identicon&r=PG&f=1", "display_name": "Julia Tepper", "link": "https://stackoverflow.com/users/11709777/julia-tepper"}, "edited": false, "score": 0, "creation_date": 1563474395, "post_id": 57085427, "comment_id": 100722317, "body": "This didn&#39;t work when using the <code>return std::tie(foo, bar) &lt; std::tie(m.foo, m.bar);</code> line; however, I defined the <code>operator &lt;</code> to return true and that fixed the error messages. Will this mess up adding values to the multimap?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 23, "user_id": 11709777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aea0822f1e4241b7320f4d4d60592427?s=128&d=identicon&r=PG&f=1", "display_name": "Julia Tepper", "link": "https://stackoverflow.com/users/11709777/julia-tepper"}, "edited": false, "score": 0, "creation_date": 1563487778, "post_id": 57085427, "comment_id": 100727459, "body": "No, it will not work by always returning <code>true</code>.  What exactly did not work?  The example in the answer shows no error."}], "tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": false, "score": 1, "last_activity_date": 1563408031, "creation_date": 1563408031, "answer_id": 57085427, "question_id": 57084816, "link": "https://stackoverflow.com/questions/57084816/how-to-fix-error-with-compiling-a-stdpair-made-of-structs/57085427#57085427", "title": "How to fix error with compiling a std::pair made of structs?", "body": "<p>Your <code>myStruct</code> to be placed in a <code>std::multimap</code> requires a <a href=\"https://stackoverflow.com/questions/979759/operator-and-strict-weak-ordering\">strict-weak-ordering</a>, thus an <code>operator &lt;</code> needs to be defined.</p>\n\n<p>The easiest thing to do is to use <a href=\"https://en.cppreference.com/w/cpp/utility/tuple/tie\" rel=\"nofollow noreferrer\">std::tie</a> to set this up:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;map&gt;\n#include &lt;algorithm&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nstruct myStruct \n{\n    std::string foo;\n    std::vector&lt;int&gt; bar;\n\n\n    // define an operator &lt;\n    bool operator &lt;(const myStruct&amp; m) const \n    {\n        return std::tie(foo, bar) &lt; std::tie(m.foo, m.bar);\n    }\n};\n\nint main()\n{\n    //test\n    myStruct m1;\n    myStruct m2;\n    m1.foo = \"abc\";\n    m1.bar = std::vector&lt;int&gt; {1,2,3,4};\n    m2.foo = \"123\";\n    m2.bar = std::vector&lt;int&gt; {4,5,6,7,8};\n    std::multimap&lt;myStruct, myStruct&gt; myMultiMap;\n\n    //insert into map \n    myMultiMap.insert({m1, m2});\n    myMultiMap.insert({m2, m1});\n\n    // output number of entries\n    std::cout &lt;&lt; myMultiMap.size();\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>2\n</code></pre>\n\n<p>In addition, since <code>std::string</code> and <code>std::vector</code> are already copyable, the <code>myStruct</code> need not define an assignment operator and copy constructor.  Thus <code>operator =</code> and the <code>myStruct(constmyStruct&amp;)</code> need not exist (which is why they do not exist in the sample program above).</p>\n"}], "owner": {"reputation": 23, "user_id": 11709777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aea0822f1e4241b7320f4d4d60592427?s=128&d=identicon&r=PG&f=1", "display_name": "Julia Tepper", "link": "https://stackoverflow.com/users/11709777/julia-tepper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1563408031, "creation_date": 1563402871, "last_edit_date": 1563403019, "question_id": 57084816, "link": "https://stackoverflow.com/questions/57084816/how-to-fix-error-with-compiling-a-stdpair-made-of-structs", "title": "How to fix error with compiling a std::pair made of structs?", "body": "<p>I'm setting up a new project that includes a <code>std::multimap</code> ideally made of defined structs.</p>\n\n<p>I've tried <code>make_pair()</code> and <code>multimap.insert()</code>, and that hasn't worked so far.</p>\n\n<p>My code basically is:</p>\n\n<pre><code>struct myStruct {\n\n  myStruct() {}\n\n  myStruct(const myStruct &amp;other) : foo(other.foo), bar(other.bar) {}\n\n  Neighbor &amp;operator=(const myStruct &amp;other) {\n    if (this != &amp;other) {\n      foo = other.foo;\n      bar = other.bar;\n    }\n\n    return *this;\n  }\n\n  string foo;\n  std::vector&lt;int&gt; bar;\n};\n\nstd::multimap&lt;myStruct, myStruct&gt; myMultiMap;\n\nmyStruct myStruct1;\nmyStruct myStruct2;\n\nm_neighborMap.insert(std::pair&lt;myStruct, myStruct&gt;{myStruct1, myStruct2});\n</code></pre>\n\n<p>However, when I compile my code, I get the following errors:</p>\n\n<pre><code>/Library/Developer/CommandLineTools/usr/include/c++/v1/__functional_base:55:21: error: invalid operands to binary expression ('const myStruct' and 'const myStruct')\n\ncandidate template ignored: could not match 'pair&lt;type-parameter-0-0, type-parameter-0-1&gt;' against 'const myStruct'\noperator&lt; (const pair&lt;_T1,_T2&gt;&amp; __x, const pair&lt;_T1,_T2&gt;&amp; __y)\n</code></pre>\n\n<p>Does anyone know how to properly initialize this pair of structs? Thanks!</p>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1563402997, "post_id": 57084789, "comment_id": 100692700, "body": "Which version of GCC do you have?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1563403075, "post_id": 57084789, "comment_id": 100692725, "body": "And no, header files to be included with the <code>#include</code> preprocessor directive have nothing to do with linker libraries added with the <code>-l</code> (lower-case L) option."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1563459940, "post_id": 57084789, "comment_id": 100714909, "body": "Please <a href=\"https://stackoverflow.com/posts/57084789/edit\">edit your question</a> to include the information. There&#39;s a link also below the tags of your question."}, {"owner": {"reputation": 43, "user_id": 11777170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39ecd67e3a91ec78edec93fde9de2b48?s=128&d=identicon&r=PG&f=1", "display_name": "smid", "link": "https://stackoverflow.com/users/11777170/smid"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1563460666, "post_id": 57084789, "comment_id": 100715351, "body": "done, I have now done an install of gcc-9.1 via homebrew and get another error (see question)"}, {"owner": {"reputation": 43, "user_id": 11777170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39ecd67e3a91ec78edec93fde9de2b48?s=128&d=identicon&r=PG&f=1", "display_name": "smid", "link": "https://stackoverflow.com/users/11777170/smid"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1563463880, "post_id": 57084789, "comment_id": 100717326, "body": "Ok, I&#39;ve made some progress here but now have some horrible looking error (see main question)"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1563464069, "post_id": 57084789, "comment_id": 100717445, "body": "Now it&#39;s time to learn about the options useful for libraries: The option <code>-I</code> (upper-case i) is to add a path to search for header files (<code>#include &lt;...&gt;</code>). The option <code>-L</code> is to add a path to look for libraries (the actual libraries, not its header files). And lastly the option <code>-l</code> (lower-case L) which is to add the library itself. Also note that you need to place the libraries (<code>-l</code>, lower-case L) last on the command line."}, {"owner": {"reputation": 43, "user_id": 11777170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39ecd67e3a91ec78edec93fde9de2b48?s=128&d=identicon&r=PG&f=1", "display_name": "smid", "link": "https://stackoverflow.com/users/11777170/smid"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1563464443, "post_id": 57084789, "comment_id": 100717655, "body": "Thanks, I managed to fix it and it compiled and i ran the code, its a basic template but it doesnt throw error which is the main thing!"}], "answers": [{"comments": [{"owner": {"reputation": 1604, "user_id": 559449, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/24b577c3f9d48ba46f02631c541d0c61?s=128&d=identicon&r=PG", "display_name": "Luther", "link": "https://stackoverflow.com/users/559449/luther"}, "edited": false, "score": 0, "creation_date": 1588873730, "post_id": 60334917, "comment_id": 109075382, "body": "Hi, I&#39;m linking with both &#39;-lpthreads&#39; and &#39;-ltbb&#39; (is all of this using threaded building blocks under the hood?) but I still get &quot;&#39;execution&#39; file not found&quot; I have this working on windows using visual studio but no luck on linux using clang (v9) - it stubbornly refuses to find &lt;execution&gt;!"}, {"owner": {"reputation": 556, "user_id": 1790744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d87cef5857669995b67485b0c756d823?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/1790744/alexander"}, "reply_to_user": {"reputation": 1604, "user_id": 559449, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/24b577c3f9d48ba46f02631c541d0c61?s=128&d=identicon&r=PG", "display_name": "Luther", "link": "https://stackoverflow.com/users/559449/luther"}, "edited": false, "score": 1, "creation_date": 1588948578, "post_id": 60334917, "comment_id": 109104829, "body": "Maybe you need to add the library path, something like this: -L/usr/local/Cellar/tbb/2019_U8/lib/"}], "tags": [], "owner": {"reputation": 556, "user_id": 1790744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d87cef5857669995b67485b0c756d823?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/1790744/alexander"}, "is_accepted": false, "score": 4, "last_activity_date": 1582274491, "creation_date": 1582274491, "answer_id": 60334917, "question_id": 57084789, "link": "https://stackoverflow.com/questions/57084789/how-to-use-execution-library-in-c17/60334917#60334917", "title": "How to use &lt;execution&gt; library in c++17", "body": "<p>You need to install tbb library.</p>\n\n<p>On Ubuntu/Linux:</p>\n\n<pre><code>$ sudo apt update\n$ sudo apt install libtbb-dev\n</code></pre>\n\n<p>On Mac with Homebrew:</p>\n\n<pre><code>$ brew install tbb\n</code></pre>\n\n<p>Then link runtime library in g++:</p>\n\n<pre><code>g++ -g -std=c++17 ModuleDevelopmentStage13.cc -lboost_system -lboost_thread -pthread -ltbb\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 11777170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39ecd67e3a91ec78edec93fde9de2b48?s=128&d=identicon&r=PG&f=1", "display_name": "smid", "link": "https://stackoverflow.com/users/11777170/smid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2913, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1582274491, "creation_date": 1563402617, "last_edit_date": 1563464397, "question_id": 57084789, "link": "https://stackoverflow.com/questions/57084789/how-to-use-execution-library-in-c17", "title": "How to use &lt;execution&gt; library in c++17", "body": "<p>Learning how to use the execution libraries in c++17. I am using Linux, but have also tried on my Mac. I get this error:</p>\n\n<blockquote>\n  <p>fatal error: 'execution' file not found</p>\n</blockquote>\n\n<p>when i compile in both OS's.</p>\n\n<p>I would rather stick with linux where i type:</p>\n\n<p><code>g++ -g -std=c++17 ModuleDevelopmentStage13.cc -lboost_system -lboost_thread -pthread</code></p>\n\n<p>Perhaps I need to add some more libraries in the <code>-l....</code> arguments here. I am new to c++ and not sure where to find out which ones to add? I have installed the LLVM and tried a few options out there on similar posts but with no luck. Any advice?</p>\n\n<p>so on my mac i did gcc -v and got: </p>\n\n<p><code>gcc -v Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk/usr/include/c++/4.2.1 Apple LLVM version 10.0.0 (clang-1000.11.45.5) Target: x86_64-apple-darwin18.6.0 Thread model: posix InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin</code></p>\n\n<p>Ok, so an update- I am now switched to gcc-9.1 installed via homebrew.</p>\n\n<p>There are no \"include\" errors as before but I now have this issue when I try to compile simple code examples which use the c++17 libraries:</p>\n\n<p><code>g++-9 -std=c++17 example.cc \nIn file included from /usr/local/Cellar/gcc/9.1.0/include/c++/9.1.0/pstl/parallel_backend.h:14,\n                 from /usr/local/Cellar/gcc/9.1.0/include/c++/9.1.0/pstl/algorithm_impl.h:25,\n                 from /usr/local/Cellar/gcc/9.1.0/include/c++/9.1.0/pstl/glue_execution_defs.h:52,\n                 from /usr/local/Cellar/gcc/9.1.0/include/c++/9.1.0/execution:3,\n                 from example.cc:6:\n/usr/local/Cellar/gcc/9.1.0/include/c++/9.1.0/pstl/parallel_backend_tbb.h:19:10 fatal error: tbb/blocked_range.h: No such file or directory\n   19 | #include &lt;tbb/blocked_range.h&gt;\n      |          ^~~~~~~~~~~~~~~~~~~~~\ncompilation terminated.</code></p>\n\n<p>I found the missing library and compiled like:</p>\n\n<p><code>g++-9 -std=c++17 example.cpp -I/usr/local/Cellar/tbb/2019_U8/include/  -I/usr/local/Cellar/tbb/2019_U8/lib/</code></p>\n\n<p>I got the following error:\n<code>\nUndefined symbols for architecture x86_64:\n  \"tbb::interface7::internal::task_arena_base::internal_current_slot()\", referenced from:\n      tbb::interface7::task_arena::current_thread_index()      in ccnPixdL.o\n  \"tbb::interface7::internal::isolate_within_arena(t..........</code></p>\n\n<p>followed by many lines of similar.....feel like im closer but no idea how to move on this one?</p>\n\n<p>Resolved with  <code>g++-9 -std=c++17 example.cpp -I/usr/local/Cellar/tbb/2019_U8/include/  -L/usr/local/Cellar/tbb/2019_U8/lib/ -ltbb</code></p>\n"}, {"tags": ["c++", "mfc", "c-strings", "strsafe"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1563403149, "post_id": 57084759, "comment_id": 100692750, "body": "The <code>StringCch</code> functions are for working with char buffers, not string classes like <code>CString</code>. I would recommend picking one or the other instead of mixing the two.  <code>StringCchCopy</code> copies characters and does not allocate memory so I am not sure why you would expect the size of allocated memory to change"}, {"owner": {"reputation": 527, "user_id": 662586, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e02811681b46047f576392d3db3f74dd?s=128&d=identicon&r=PG", "display_name": "JeffR", "link": "https://stackoverflow.com/users/662586/jeffr"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1563408520, "post_id": 57084759, "comment_id": 100693889, "body": "It&#39;s 71 after I Preallocate 64."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1563440277, "post_id": 57084759, "comment_id": 100703360, "body": "@JeffR Does this code really compile?? You should get something like this error: <code>HRESULT StringCchCopyW(STRSAFE_LPWSTR,std::size_t,STRSAFE_LPCWSTR)&#39;: cannot convert argument 1 from &#39;CStringW&#39; to &#39;STRSAFE_LPWSTR&#39;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 527, "user_id": 662586, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e02811681b46047f576392d3db3f74dd?s=128&d=identicon&r=PG", "display_name": "JeffR", "link": "https://stackoverflow.com/users/662586/jeffr"}, "edited": false, "score": 0, "creation_date": 1563445518, "post_id": 57085782, "comment_id": 100706329, "body": "Thanks, great explanation. Trying to decide between <code>std::vector</code>, <code>std::string</code>, and <code>CString</code>. Looking for least code writing, stringcch* functionality, and automatic cleanup. Right now I&#39;ve got <code>WCHAR *var</code> everywhere and it&#39;s more difficult to do cleanup and make sure I don&#39;t miss anything."}, {"owner": {"reputation": 7700, "user_id": 126027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d083341daacfb4942b835e3f6f2fd804?s=128&d=identicon&r=PG", "display_name": "TheUndeadFish", "link": "https://stackoverflow.com/users/126027/theundeadfish"}, "reply_to_user": {"reputation": 527, "user_id": 662586, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e02811681b46047f576392d3db3f74dd?s=128&d=identicon&r=PG", "display_name": "JeffR", "link": "https://stackoverflow.com/users/662586/jeffr"}, "edited": false, "score": 2, "creation_date": 1563494286, "post_id": 57085782, "comment_id": 100728687, "body": "@JeffR In my experience: If your application is heavily using other ATL/MFC stuff, then <code>CString</code> is a natural choice since it&#39;ll probably work more smoothly with everything else. Otherwise, when null-terminated strings are what you&#39;re dealing with, then <code>std::string</code> is probably easiest overall (though in the case of <code>WCHAR</code> you would want <code>std::wstring</code>). In cases where you have to provide a non-const pointer to some other layer/library for it to write into the buffer, then <code>std::vector</code> can facilitate that well."}], "tags": [], "owner": {"reputation": 7700, "user_id": 126027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d083341daacfb4942b835e3f6f2fd804?s=128&d=identicon&r=PG", "display_name": "TheUndeadFish", "link": "https://stackoverflow.com/users/126027/theundeadfish"}, "is_accepted": false, "score": 3, "last_activity_date": 1563412006, "creation_date": 1563412006, "answer_id": 57085782, "question_id": 57084759, "link": "https://stackoverflow.com/questions/57084759/stringcch-functions-and-cstring/57085782#57085782", "title": "StringCch* functions and Cstring", "body": "<p><code>StringCchCopy(sFile, 64, L\"ini\");</code> I'm surprised this even compiles. The first parameter of StringCchCopy is supposed to be a non-const pointer to the destination buffer. CString should not implicitly convert to such a thing (at least not as far as I'm aware from the last time I seriously used CString). So whatever this is doing, it's probably not what you want.</p>\n\n<p>If you're going to do things this way, it's probably easier to use the overload of <a href=\"https://docs.microsoft.com/en-us/cpp/atl-mfc-shared/reference/csimplestringt-class?view=vs-2019#getbuffer\" rel=\"nofollow noreferrer\">GetBuffer</a> which takes a length combined with <a href=\"https://docs.microsoft.com/en-us/cpp/atl-mfc-shared/reference/csimplestringt-class?view=vs-2019#releasebuffer\" rel=\"nofollow noreferrer\">ReleaseBuffer</a>.</p>\n\n<p><code>GetBuffer(X)</code> makes sure the CString has an internal buffer with enough space to fit X -1 characters and a null terminator, and returns a non-const pointer to that buffer.</p>\n\n<p>Then <code>ReleaseBuffer</code> will cause the CString to look at whatever has been written into that buffer, find the null terminator, and figure out how long of a string it now manages. (If you want to do stuff without null terminators then go read the documentation in detail for how use it correctly for that.)</p>\n\n<p>So something like</p>\n\n<pre><code>CString sFile;\nStringCchCopy(sFile.GetBuffer(63), 64, L\"ini\");\nsFile.ReleaseBuffer();\n</code></pre>\n\n<p>After that <code>sFile</code> should be valid and contain the data. And GetLength will reflect that.</p>\n\n<p>I wouldn't worry about GetAllocLength. Though MSDN doesn't seem to explain much of anything about it, I wouldn't be surprised if it returns the entire length of an internal buffer - which CString might have decided to oversize of some particular reason. Unless you're really trying to micro-optimize something (in which case why are you even using CString), you should never need to worry about such things.</p>\n\n<hr>\n\n<p>However there's kinda no point to all this though, since you could just do <code>sFile = L\"ini\";</code> That's simpler and avoids any potential off-by-one errors from making mistakes with buffer sizes.</p>\n\n<p>Even if this is a simplified example, if you code has a string (pointer to a char array) then you can still just use that directly with the assignment operator of CString. (Assuming the data is null terminated and we're not getting into char vs wchar territory, in which case you may need more than StringCchCopy anyway.)</p>\n"}], "owner": {"reputation": 527, "user_id": 662586, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e02811681b46047f576392d3db3f74dd?s=128&d=identicon&r=PG", "display_name": "JeffR", "link": "https://stackoverflow.com/users/662586/jeffr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563412006, "creation_date": 1563402395, "last_edit_date": 1563402997, "question_id": 57084759, "link": "https://stackoverflow.com/questions/57084759/stringcch-functions-and-cstring", "title": "StringCch* functions and Cstring", "body": "<p>I am using string safe functions (StringCch*) in my code. However, some functions I want to convert the variables from <code>WCHAR *</code> to <code>CString</code>. This code is failing on the StringCchCopy functions:</p>\n\n<pre><code>CString sFile;\nsFile.Preallocate(64);\nStringCchCopy(sFile, 64, L\"ini\");\n\nDWORD rv = sFile.GetAllocLength();\nrv = sFile.GetLength();\n\nTCHAR sVal[64] = {0};\nStringCchCopy(sVal, 64, sFile.GetBuffer());\n</code></pre>\n\n<p>Easy answer I'm sure, but I'm a bit stumped!</p>\n\n<p>And <code>GetAllocLength()</code> is returning 71. Shouldn't it return 64?</p>\n"}, {"tags": ["c++", "qt", "qthread"], "comments": [{"owner": {"reputation": 720, "user_id": 5473659, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HlSFtUlEWUg/AAAAAAAAAAI/AAAAAAAAABE/IDscIChoyC0/photo.jpg?sz=128", "display_name": "Rick Pat", "link": "https://stackoverflow.com/users/5473659/rick-pat"}, "edited": false, "score": 0, "creation_date": 1563401154, "post_id": 57084548, "comment_id": 100692287, "body": "What makes you think <code>m_someObject</code> would not be deleted? This looks good to me."}, {"owner": {"reputation": 2676, "user_id": 1193350, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/585e008945adc54ef63ac2c4116eeaa6?s=128&d=identicon&r=PG", "display_name": "the_naive", "link": "https://stackoverflow.com/users/1193350/the-naive"}, "reply_to_user": {"reputation": 720, "user_id": 5473659, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HlSFtUlEWUg/AAAAAAAAAAI/AAAAAAAAABE/IDscIChoyC0/photo.jpg?sz=128", "display_name": "Rick Pat", "link": "https://stackoverflow.com/users/5473659/rick-pat"}, "edited": false, "score": 0, "creation_date": 1563402369, "post_id": 57084548, "comment_id": 100692546, "body": "Because the destructor of <code>m_someObject</code> is never getting called.  @RickPat"}, {"owner": {"reputation": 720, "user_id": 5473659, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HlSFtUlEWUg/AAAAAAAAAAI/AAAAAAAAABE/IDscIChoyC0/photo.jpg?sz=128", "display_name": "Rick Pat", "link": "https://stackoverflow.com/users/5473659/rick-pat"}, "edited": false, "score": 0, "creation_date": 1563402905, "post_id": 57084548, "comment_id": 100692677, "body": "maybe try to replace <code>while (m_thread.isRunning())</code> with <code>m_thread.wait()</code>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 3, "creation_date": 1563403003, "post_id": 57084548, "comment_id": 100692702, "body": "<code>m_thread.terminate();</code> kills the thread. You should not call it. The documentation states this: <b><i>Warning: This function is dangerous and its use is discouraged. The thread can be terminated at any point in its code path. Threads can be terminated while modifying data. There is no chance for the thread to clean up after itself, unlock any held mutexes, etc. In short, use this function only if absolutely necessary.</i></b>"}, {"owner": {"reputation": 720, "user_id": 5473659, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HlSFtUlEWUg/AAAAAAAAAAI/AAAAAAAAABE/IDscIChoyC0/photo.jpg?sz=128", "display_name": "Rick Pat", "link": "https://stackoverflow.com/users/5473659/rick-pat"}, "edited": false, "score": 2, "creation_date": 1563403125, "post_id": 57084548, "comment_id": 100692739, "body": "true, replace the code with <code>m_thread.quit(); m_thread.wait();</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1043, "user_id": 3668507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d75ecbb1ee181e25bb0b4c781fe8680f?s=128&d=identicon&r=PG&f=1", "display_name": "Taron", "link": "https://stackoverflow.com/users/3668507/taron"}, "is_accepted": true, "score": 1, "last_activity_date": 1563518735, "creation_date": 1563518735, "answer_id": 57106933, "question_id": 57084548, "link": "https://stackoverflow.com/questions/57084548/is-it-necessary-to-delete-an-object-if-that-runs-on-a-qthread-if-finished-signal/57106933#57106933", "title": "Is it necessary to delete an object if that runs on a QThread if finished signal of QThread is connected to deleteLater?", "body": "<p>No it is not necessary. The connection should do exactly what you want as long as the thread does emit finished eventually. See the following Code:</p>\n\n<pre><code>#include &lt;QObject&gt;\n#include &lt;QThread&gt;\n#include &lt;iostream&gt;\n\nclass Test : public QObject {\n    Q_OBJECT\npublic:\n    Test(){\n        std::cout &lt;&lt;\"c'tor\" &lt;&lt; std::endl;\n    }\n    ~Test(){\n        std::cout &lt;&lt; \"d'tor\" &lt;&lt; std::endl;\n    }\n};\n\nvoid startThread(){\n    QThread* thr = new QThread();\n    Test* test = new Test();\n    connect(thr, &amp;QThread::finished, test, &amp;QObject::deleteLater);\n    test-&gt;moveToThread( thr );\n    thr-&gt;start();\n    thr-&gt;quit();\n    thr-&gt;wait();\n    delete thr;\n}\n</code></pre>\n\n<p>The output is as expected:</p>\n\n<pre><code>c'tor\nd'tor\n</code></pre>\n\n<p>Note that the snippet wont compile right away since its missing a main.</p>\n"}], "owner": {"reputation": 2676, "user_id": 1193350, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/585e008945adc54ef63ac2c4116eeaa6?s=128&d=identicon&r=PG", "display_name": "the_naive", "link": "https://stackoverflow.com/users/1193350/the-naive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 57106933, "answer_count": 1, "score": 0, "last_activity_date": 1563518735, "creation_date": 1563400774, "question_id": 57084548, "link": "https://stackoverflow.com/questions/57084548/is-it-necessary-to-delete-an-object-if-that-runs-on-a-qthread-if-finished-signal", "title": "Is it necessary to delete an object if that runs on a QThread if finished signal of QThread is connected to deleteLater?", "body": "<p>So I have the following code in the constructor.</p>\n\n<pre><code>m_someObject = new SomeObject();\nm_someObject-&gt;moveToThread(&amp;m_thread);\nm_thread.start();\n\nconnect(&amp;m_thread, &amp;QThread::finished, m_someObject, &amp;QObject::deleteLater);\n</code></pre>\n\n<p>Any I have the following code in the destructor.</p>\n\n<pre><code> m_thread.terminate();\n while (m_thread.isRunning())\n {\n }\n</code></pre>\n\n<p>Do I still have to delete <code>m_someObject</code> despite having finished of <code>m_thread</code> connected to <code>deleteLater</code> slot of <code>m_someObject</code>?</p>\n"}, {"tags": ["c++", "constexpr"], "comments": [{"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1563469070, "post_id": 57084483, "comment_id": 100720023, "body": "Note: May be a duplicate of <a href=\"https://stackoverflow.com/q/53347298/5386374\">c++ - What is consteval?</a>, I wasn&#39;t aware of either that question or its relevance to my own."}], "answers": [{"comments": [{"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1563402535, "post_id": 57084529, "comment_id": 100692589, "body": "Oh, that looks interesting.  Would it be a valid assumption that <code>consteval</code> functions will typically be optimised out entirely during compilation, based on the inherent <code>inline</code> specification and the requirement that every call produces a constant expression?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1563406437, "post_id": 57084529, "comment_id": 100693483, "body": "@justintime that is correct.  It will be evaluated at compile time and only a constant will remain in the binary."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 11, "last_activity_date": 1563400652, "creation_date": 1563400652, "answer_id": 57084529, "question_id": 57084483, "link": "https://stackoverflow.com/questions/57084483/is-there-a-non-indirection-non-hack-way-to-guarantee-that-a-constexpr-function/57084529#57084529", "title": "Is there a non-indirection, non-hack way to guarantee that a constexpr function only be callable at compile time?", "body": "<p>C++20 added <a href=\"https://en.cppreference.com/w/cpp/language/consteval\" rel=\"noreferrer\"><code>consteval</code></a> for this express purpose.  A <code>consteval</code> function is a <code>constexpr</code> function that is guaranteed to be only called at compile time.</p>\n"}], "owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 1, "accepted_answer_id": 57084529, "answer_count": 1, "score": 6, "last_activity_date": 1563400652, "creation_date": 1563400277, "question_id": 57084483, "link": "https://stackoverflow.com/questions/57084483/is-there-a-non-indirection-non-hack-way-to-guarantee-that-a-constexpr-function", "title": "Is there a non-indirection, non-hack way to guarantee that a constexpr function only be callable at compile time?", "body": "<p>At the moment, we have two primary options for compile-time evaluation: template metaprogramming (generally using template structs and/or variables), and <code>constexpr</code> operations<sup>1</sup>.  </p>\n\n<pre><code>template&lt;int l, int r&gt; struct sum_ { enum { value = l + r }; }; // With struct.\ntemplate&lt;int l, int r&gt; const int sum = sum_&lt;l, r&gt;::value;       // With struct &amp; var.\ntemplate&lt;int l, int r&gt; const int sub = l - r;                   // With var.\nconstexpr int mul(int l, int r) { return l * r; }               // With constexpr.\n</code></pre>\n\n<p>Of these, we are guaranteed that all four can be evaluated at compile time.</p>\n\n<pre><code>template&lt;int&gt; struct CompileTimeEvaluable {};\n\nCompileTimeEvaluable&lt;sum_&lt;2, 2&gt;::value&gt; template_struct;                 // Valid.\nCompileTimeEvaluable&lt;sum&lt;2, 2&gt;&gt;         template_struct_with_helper_var; // Valid.\nCompileTimeEvaluable&lt;sub&lt;2, 2&gt;&gt;         template_var;                    // Valid.\nCompileTimeEvaluable&lt;mul(2, 2)&gt;         constexpr_func;                  // Valid.\n</code></pre>\n\n<p>We can also guarantee that the first three will <em>only</em> be evaluable at compile time, due to the compile-time nature of templates; we cannot, however, provide this same guarantee for <code>constexpr</code> functions.</p>\n\n<pre><code>int s1 = sum_&lt;1, 2&gt;::value;\n//int s2 = sum_&lt;s1, 12&gt;::value; // Error, value of i not known at compile time.\n\nint sv1 = sum&lt;3, 4&gt;;\n//int sv2 = sum&lt;s1, 34&gt;;        // Error, value of i not known at compile time.\n\nint v1 = sub&lt;5, 6&gt;;\n//int v2 = sub&lt;v1, 56&gt;;         // Error, value of i not known at compile time.\n\nint c1 = mul(7, 8);\nint c2 = mul(c1, 78);           // Valid, and executed at run time.\n</code></pre>\n\n<p>It is possible to <a href=\"https://stackoverflow.com/a/39653251/5386374\">use indirection to provide an <em>effective</em> guarantee that a given <code>constexpr</code> function can only be called at compile time</a>, but this guarantee breaks if the function is accessed directly instead of through the indirection helpers (as noted in the linked answer's comments).  It is also possible to <a href=\"https://stackoverflow.com/q/33964621/5386374\">poison a <code>constexpr</code> function</a> such that calling it at runtime becomes impossible, <a href=\"https://www.youtube.com/watch?v=fZjYCQ8dzTc&amp;feature=youtu.be&amp;t=3679\" rel=\"noreferrer\">by <code>throw</code>ing an undefined symbol</a>, thus providing this guarantee by awkward hack.  Neither of these seems optimal, however.</p>\n\n<hr>\n\n<p>Considering this, my question is thus: Including current standards, C++20 drafts, proposals under consideration, experimental features, and anything else of the sort, is there a way to provide this guarantee without resorting to hacks or indirection, using only features and tools built into and/or under consideration for being built into the language itself?  [Such as, for example, an attribute such as (both theoretical) <code>[[compile_time_only]]</code> or <code>[[no_runtime]]</code>, usage of <a href=\"https://en.cppreference.com/w/cpp/types/is_constant_evaluated\" rel=\"noreferrer\">std::is_constant_evaluated</a>, or a concept, perhaps?]</p>\n\n<p><sup>1: Macros are <em>technically</em> also an option, but... yeah, no.</sup></p>\n"}, {"tags": ["c++", "c-preprocessor", "structured-bindings"], "comments": [{"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1563402062, "post_id": 57084377, "comment_id": 100692483, "body": "to clarify, I don&#39;t see the proposal make any kind of accommodations for structured bindings... is this just something you&#39;re trying to attempt yourself?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1563402397, "post_id": 57084377, "comment_id": 100692554, "body": "<i>&quot;structured bindings are not allowed to be wrapped in <code>()</code>&quot;</i> How about this: <code>#define I(...) __VA_ARGS__</code> <code>#define FOO(a,b) auto &amp;[I a] = b;</code> (then <code>FOO((x,y),z)</code> expands to <code>auto &amp;[x,y] = z;</code>)"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1563404001, "post_id": 57084377, "comment_id": 100692939, "body": "I suggest looking into <a href=\"https://www.boost.org/doc/libs/1_41_0/libs/preprocessor/doc/index.html\" rel=\"nofollow noreferrer\">Boost.Preprocessor</a>."}], "answers": [{"tags": [], "owner": {"reputation": 2336, "user_id": 3936002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utGjG.png?s=128&g=1", "display_name": "H Walters", "link": "https://stackoverflow.com/users/3936002/h-walters"}, "is_accepted": true, "score": 2, "last_activity_date": 1563422012, "last_edit_date": 1563422012, "creation_date": 1563421584, "answer_id": 57086829, "question_id": 57084377, "link": "https://stackoverflow.com/questions/57084377/how-to-correctly-forward-structured-binding-arguments-in-a-macro/57086829#57086829", "title": "How to correctly forward structured binding arguments in a macro", "body": "<blockquote>maybe there's a better approach</blockquote>  \n\n<p>Shooting for this.</p>\n\n<blockquote>structured bindings are not allowed to be wrapped in `()`</blockquote>\n\n<p>...</p>\n\n<blockquote>Are there any good techniques to group the arguments by matching opening `[` and closing `]`, if any?</blockquote>\n\n<p>There are two truths here: (1) the preprocessor will match <code>()</code>'s, and only matches <code>()</code>'s (no other grouping operators). (2) structured bindings cannot be wrapped with parentheses.  (1) means you don't want to use <code>[</code>/<code>]</code> in your macro; you want to use <code>()</code>'s.  (2) doesn't really conflict; all it means is you want to leave translation phase 4 with <code>[]</code>'s, not <code>()</code>'s.  FYI, I'll use the term <em>tuple</em> to refer to a parentheses matched, comma delimited token list (consistent with boost preprocessor's terminology).</p>\n\n<p>So let's entertain the idea that tuple arguments are structure bindings, and identifiers are ordinary variable bindings.  From a form perspective, we just need a macro that takes <code>(a,b)</code> to <code>[a,b]</code> and <code>c</code> to <code>c</code>.  This is a job for pattern matching.</p>\n\n<p><strong>Part 1: to square a tuple</strong></p>\n\n<p>Here I'll use an indirect <code>THIRD</code> macro, that just expands to its third argument, just indirectly.  The indirect part is the sneaky bit; that lets us construct a throwaway first parameter that would normally just get ignored.  But if that first parameter invokes a macro, the expansion can have a comma, which would shift the second argument into third place just prior to picking the third argument.  Detecting if an argument <code>A</code> is a parenthetical is easy; just preface it with a function-like macro name; if it's parenthetical that's an invocation... if not, it's just two tokens.  Here's how to exploit that to make our macro:</p>\n\n<pre><code>#define M_THIRD(...) M_THIRD_(__VA_ARGS__,,,)\n#define M_THIRD_(A,B,C,...) C\n#define M_SQUARETUPLE(X) M_THIRD(M_PARDETECT X, M_SQUARE, ) X\n#define M_PARDETECT(...) ,\n#define M_SQUARE(...) [__VA_ARGS__]\n</code></pre>\n\n<p><strong>Part 2: Counting, delimitable iterator</strong></p>\n\n<p>To me it's more natural to iterate through a tuple than through \"everything but the last argument\".  So let's imagine we're targeting your example case, and at some step in the processing we have <code>M_LAMBDIZE_PAIR( ((x,y),c,(f,g,h)), f*x - y + c / h * g)</code>.  We want to be able to iterate that first tuple, but while iterating it we want to have a number corresponding to the ordinal position of each element (so we can build things like <code>__arg1</code>), and we want to be able to use a delimiter that may have commas in it (so we can generate <code>auto&amp;&amp; __arg1, auto&amp;&amp; __arg2, auto&amp;&amp; __arg3</code>).  So let's build an iterator and plan for these features specifically.  Tuples are great ways to generically wrap delimiters that might have commas, since again the preprocessor matches parentheses.</p>\n\n<p>So here's a generic iteration construct that fits the bill:</p>\n\n<pre><code>#define M_INC(X) M_CONC(M_INC_,X)\n#define M_INC_1 2\n#define M_INC_2 3\n#define M_INC_3 4\n#define M_INC_4 5\n#define M_INC_5 6\n#define M_INC_6 7\n#define M_INC_7 8\n#define M_INC_8 9\n#define M_INC_9 10\n\n#define M_UNWRAP(...) __VA_ARGS__\n\n#define M_TOEACH(M,L,...) M_CONC(M_TOEACH_,M_NARGS(__VA_ARGS__))(M,L,1,__VA_ARGS__)\n#define M_TOEACH_1(M,L,I,A)      M(I,A)\n#define M_TOEACH_2(M,L,I,A,...)  M(I,A) M_UNWRAP L M_TOEACH_1(M,L,M_INC(I),__VA_ARGS__)\n#define M_TOEACH_3(M,L,I,A,...)  M(I,A) M_UNWRAP L M_TOEACH_2(M,L,M_INC(I),__VA_ARGS__)\n#define M_TOEACH_4(M,L,I,A,...)  M(I,A) M_UNWRAP L M_TOEACH_3(M,L,M_INC(I),__VA_ARGS__)\n#define M_TOEACH_5(M,L,I,A,...)  M(I,A) M_UNWRAP L M_TOEACH_4(M,L,M_INC(I),__VA_ARGS__)\n#define M_TOEACH_6(M,L,I,A,...)  M(I,A) M_UNWRAP L M_TOEACH_5(M,L,M_INC(I),__VA_ARGS__)\n#define M_TOEACH_7(M,L,I,A,...)  M(I,A) M_UNWRAP L M_TOEACH_6(M,L,M_INC(I),__VA_ARGS__)\n#define M_TOEACH_8(M,L,I,A,...)  M(I,A) M_UNWRAP L M_TOEACH_7(M,L,M_INC(I),__VA_ARGS__)\n#define M_TOEACH_9(M,L,I,A,...)  M(I,A) M_UNWRAP L M_TOEACH_8(M,L,M_INC(I),__VA_ARGS__)\n#define M_TOEACH_10(M,L,I,A,...) M(I,A) M_UNWRAP L M_TOEACH_9(M,L,M_INC(I),__VA_ARGS__)\n</code></pre>\n\n<p><code>M_TOEACH</code> takes a macro <code>M</code>, a parentheses-wrapped delimiter <code>L</code>, and a list of arguments to iterate.  For each argument it calls <code>M(I,A)</code> where <code>I</code> is the ordinal for the argument and <code>A</code> is the argument itself.  <code>M_UNWRAP</code> is always applied to the delimiter; so we can pass <code>(,)</code> in to comma delimit, or just <code>()</code> in to omit the delimiter with the same construct.</p>\n\n<p>A helper indirect call macro:</p>\n\n<pre><code>#define M_CALL(...) M_CALL_(__VA_ARGS__)\n#define M_CALL_(M,...) M(__VA_ARGS__)\n</code></pre>\n\n<p>...takes a function like macro name as the first argument and its arguments as the following, and performs an indirect call.  This is useful if we want to unwrap a tuple to iterate through it, but have that unwrapping fully apply by the time we make the actual call.  Using that, here's an example <code>M_LAMBDIZE_PAIR</code>:</p>\n\n<pre><code>#define M_PRDECL(I,A) auto&amp;&amp; M_CONC(__arg,I)\n#define M_ARDECL(I,A) auto&amp; M_SQUARETUPLE(A) = M_CONC(__arg,I);\n#define M_LAMBDIZE_PAIR(ARGS, EXPR) \\\n   [&amp;]( M_CALL(M_TOEACH,M_PRDECL,(,),M_UNWRAP ARGS)) { \\\n      M_CALL(M_TOEACH,M_ARDECL,(),M_UNWRAP ARGS) \\\n      return EXPR; \\\n}\n</code></pre>\n\n<p>More complete example: <a href=\"https://godbolt.org/z/xTh1WI\" rel=\"nofollow noreferrer\">https://godbolt.org/z/xTh1WI</a></p>\n"}], "owner": {"reputation": 882, "user_id": 87795, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/846e1b8f4447eeb12507d2ba80172d4a?s=128&d=identicon&r=PG", "display_name": "Mononofu", "link": "https://stackoverflow.com/users/87795/mononofu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 57086829, "answer_count": 1, "score": 1, "last_activity_date": 1563422012, "creation_date": 1563399588, "question_id": 57084377, "link": "https://stackoverflow.com/questions/57084377/how-to-correctly-forward-structured-binding-arguments-in-a-macro", "title": "How to correctly forward structured binding arguments in a macro", "body": "<p>I would like to write a macro that can take an arbitrary number of variable bindings, followed by a single expression, and rewrite those as a lambda function. The goal is to see if it's possible to implement something like the <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/p0573r2.html\" rel=\"nofollow noreferrer\">concise lambda syntax proposal</a> using current language features, or if this has to be handled by the compiler.</p>\n\n<p>The challenge here is that macros don't support <code>,</code> inside arguments, and structured bindings are not allowed to be wrapped in <code>()</code>, the easiest workaround for this issue (at least in clang). The other common workaround is to define a <code>COMMA</code> macro, but since I'm trying to play with a more concise lambda syntax, this is not an option.</p>\n\n<p>I managed to implement this for single argument functions by using <code>__VA_ARGS__</code> and concatenating everything except the last argument:</p>\n\n<ul>\n<li><code>FN(x, x == 0)</code> results in <code>[&amp;](auto&amp;&amp; __arg) { auto&amp; x = __arg; return x == 0; }</code></li>\n<li><code>FN([x, y], x == y)</code> results in <code>[&amp;](auto&amp;&amp; __arg) { auto&amp; [x, y] = __arg; return x == y; }</code></li>\n</ul>\n\n<p>You can see the full implementation on <a href=\"https://godbolt.org/z/1go2Wg\" rel=\"nofollow noreferrer\">godbolt</a>.</p>\n\n<p>However, I'm stuck trying to implementing the general n-argument for <code>FN([x, y], c, [f, g, h], f*x - y + c / h * g)</code></p>\n\n<p>which should result in</p>\n\n<pre><code>[&amp;](auto&amp;&amp; __arg1, auto&amp;&amp; __arg2, auto&amp;&amp; __arg3) { \n  auto&amp; [x, y] = __arg1; \n  auto&amp; c = __arg2;\n  auto&amp; [f, g, h] = __arg3;\n  return f*x - y + c / h * g; \n}\n</code></pre>\n\n<p>Are there any good techniques to group the arguments by matching opening <code>[</code> and closing <code>]</code>, if any? Or maybe there's a better approach to writing this macro that I haven't thought of?</p>\n"}, {"tags": ["c++", "multithreading", "tcpsocket"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1563399411, "post_id": 57084324, "comment_id": 100691826, "body": "Unrelated: This might be the result of over-reducing the problem, but creating a thread followed by immediately <code>join</code>ing the thread effectively makes your code serial. The thread is useless."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1563399676, "post_id": 57084324, "comment_id": 100691906, "body": "Terminating a thread is usually a bad idea. It can leave a program in an undefined state. Loop on an atomic flag in <code>connectionHandler </code> and time out the call to the <code>recv</code> (I usually do this with <code>select</code> and then <code>recv</code> if there is data). When a new connection comes in, set the flag, and when the <code>recv</code> times out the loop will exit, <code>connectionHandler</code> will return, and the thread will die a clean death..In some systems you may be able to eliminate the time-out and close the socket to get out of the <code>recv</code>."}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "edited": false, "score": 0, "creation_date": 1563399678, "post_id": 57084324, "comment_id": 100691907, "body": "BTW, this isn&#39;t really much different from a &#39;process per connection&#39; model and will not really be any faster than it (except on Windows, where it will be tons faster)."}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1563399754, "post_id": 57084324, "comment_id": 100691926, "body": "@user4581301 - Well, there is a test to see if it is joinable first. And this is also clearly a pseudocode sketch. So I don&#39;t imagine the OP intends to do that particular stupid thing."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1563399866, "post_id": 57084324, "comment_id": 100691967, "body": "I hope not, but it does crop up from time to time, so I figure better safe than sorry."}, {"owner": {"reputation": 21, "user_id": 11799761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2ccef66e256d4acc5c01293447ee61?s=128&d=identicon&r=PG&f=1", "display_name": "ljulyl", "link": "https://stackoverflow.com/users/11799761/ljulyl"}, "edited": false, "score": 0, "creation_date": 1563403362, "post_id": 57084324, "comment_id": 100692806, "body": "My bad, I used thread::operator= in my program, so I had to check if it&#39;s joinable. Otherwise, std::terminate() is called."}, {"owner": {"reputation": 21, "user_id": 11799761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2ccef66e256d4acc5c01293447ee61?s=128&d=identicon&r=PG&f=1", "display_name": "ljulyl", "link": "https://stackoverflow.com/users/11799761/ljulyl"}, "edited": false, "score": 0, "creation_date": 1563403408, "post_id": 57084324, "comment_id": 100692819, "body": "I guess I&#39;ll put the handler on a separate process, and send kill signal to terminate it. Thanks guys."}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "edited": false, "score": 1, "creation_date": 1563405916, "post_id": 57084324, "comment_id": 100693391, "body": "No, there is a better way. It&#39;s just a pain to answer this question because it&#39;s a bunch of code. Basically you have to use semaphores and timeouts to signal the various threads. It is doable. But unless you have a compelling reason to share memory there is no really good reason to use threads over processes. Personally, I&#39;d use an <code>epoll</code> based event loop without any threads or processes on Linux. Or use an Open Source library called <i>libevent</i> that would let you have a cross-platform way to do the same thing."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1563420125, "post_id": 57084324, "comment_id": 100695981, "body": "@ljulyl Why not look at code that does this, which is pretty much every multithreaded server that handles TCP connections, and see how others do it. There&#39;s lots of frameworks and libraries to help you do this. Boost, for example, has fantastic asynchronous multi-threaded I/O that fits C++ coding patterns extremely well by design."}, {"owner": {"reputation": 21, "user_id": 11799761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2ccef66e256d4acc5c01293447ee61?s=128&d=identicon&r=PG&f=1", "display_name": "ljulyl", "link": "https://stackoverflow.com/users/11799761/ljulyl"}, "edited": false, "score": 0, "creation_date": 1563448859, "post_id": 57084324, "comment_id": 100708077, "body": "I\u2019ll try epoll/select with non blocking today, so I don\u2019t have to handle the termination of threads. Hopefully it works. Thanks a lot guys. Really appreciated!"}], "owner": {"reputation": 21, "user_id": 11799761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2ccef66e256d4acc5c01293447ee61?s=128&d=identicon&r=PG&f=1", "display_name": "ljulyl", "link": "https://stackoverflow.com/users/11799761/ljulyl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 258, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1563419924, "creation_date": 1563399211, "last_edit_date": 1563419924, "question_id": 57084324, "link": "https://stackoverflow.com/questions/57084324/multithreaded-tcp-server-in-c", "title": "multithreaded TCP server in c++", "body": "<p>I need a TCP server to do the following things:</p>\n\n<ol>\n<li><p>Always listen for connection requests, even after a connection has been established.</p></li>\n<li><p>When a new connection request is waiting, close the existing connection, and accept the new one.</p></li>\n</ol>\n\n<p>I tried to use threads to handle connections. The main thread accepts the request, and spawns individual thread for each request.</p>\n\n<pre><code>auto connectionHandler = [](someParams)\n{\n    while (true)\n    {\n        recv();\n    }\n}\n\nwhile (true)\n{\n    if ((mClientFd = accept(mServerFd, (struct sockaddr *) &amp;clientAddress,\n            &amp;clientLength)) &lt; 0)\n    {\n        ...\n    }\n    else\n    {\n        std::thread(connectionHandler, someParams);\n        if joinable() join();\n    }\n}\n</code></pre>\n\n<p>I don't know how to check if any previous connectionHandler thread is still running, and I don't know how to terminate that running thread without affecting the main thread.</p>\n"}, {"tags": ["c++", "inheritance", "polymorphism", "abstract-class", "virtual-functions"], "comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1563399168, "post_id": 57084300, "comment_id": 100691759, "body": "This code doesn&#39;t compile, but if the errors are fixed in the obvious way then the pointer would be initialised. Please post real code."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1563399179, "post_id": 57084300, "comment_id": 100691763, "body": "Can we get a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?  As is the code wont compile."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1563401825, "post_id": 57084300, "comment_id": 100692434, "body": "<a href=\"https://ideone.com/GDErEE\" rel=\"nofollow noreferrer\">Works fine for me</a> once the syntax errors and such are fixed."}, {"owner": {"reputation": 999, "user_id": 747709, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1203157922f211def1e2cbb5128c2b4e?s=128&d=identicon&r=PG", "display_name": "Robotex", "link": "https://stackoverflow.com/users/747709/robotex"}, "edited": false, "score": 0, "creation_date": 1563459426, "post_id": 57084300, "comment_id": 100714588, "body": "Added compiling code as answer"}], "answers": [{"tags": [], "owner": {"reputation": 999, "user_id": 747709, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1203157922f211def1e2cbb5128c2b4e?s=128&d=identicon&r=PG", "display_name": "Robotex", "link": "https://stackoverflow.com/users/747709/robotex"}, "is_accepted": true, "score": 0, "last_activity_date": 1563459186, "creation_date": 1563459186, "answer_id": 57096595, "question_id": 57084300, "link": "https://stackoverflow.com/questions/57084300/how-to-make-polymorphic-field-of-class-in-c-how-to-use-polymorphism-correctly/57096595#57096595", "title": "How to make polymorphic field of class in C++? How to use polymorphism correctly in this case?", "body": "<p>Ok, I tested this code and it works perfectly o_0 But I got crashed in more complex program when try to call method of polymorphic object pointer. Maybe I have an additional errors in my project.</p>\n\n<p>The answer is:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Ptr {\n    public:\n        Ptr(int x, int y) : centerX(x), centerY(y) {}\n        virtual ~Ptr() {}\n        virtual void foo() = 0;\n\n    protected:\n        int centerX, centerY;\n};\n\nclass RoundPtr: public Ptr {\n    public:\n        RoundPtr(int x, int y, int radius) : Ptr(x, y), circleRadius(radius) {}\n        virtual void foo() { std::cout &lt;&lt; \"RoundPtr, x: \" &lt;&lt; centerX &lt;&lt; \", y: \" &lt;&lt; centerY &lt;&lt; \", radius: \" &lt;&lt; circleRadius &lt;&lt; std::endl; }\n\n    protected:\n        int circleRadius;\n};\n\nclass SquarePtr: public Ptr {\n    public:\n        SquarePtr(int x, int y, int w, int h) : Ptr(x, y),\n            leftX(centerX - w/2), leftY(centerY - h/2),\n            width(w), height(h)\n            {}\n\n        virtual void foo() { std::cout &lt;&lt; \"SquarePtr, x: \" &lt;&lt; centerX &lt;&lt; \", y: \" &lt;&lt; centerY &lt;&lt; \", leftX: \" &lt;&lt; leftX &lt;&lt; \", leftY: \" &lt;&lt; leftY &lt;&lt; \", width: \" &lt;&lt; width &lt;&lt; \", height: \" &lt;&lt; height &lt;&lt; std::endl; }\n\n    protected:\n        int leftX, leftY;\n        int width, height;\n};\n\nclass A {\n    protected:\n        Ptr * ptr;\n\n    public:\n        A() : ptr(nullptr) {}\n        virtual ~A() {}\n\n        virtual Ptr * getPtr() { return ptr; }\n};\n\nclass B : public A {\n    public:\n        B() : A() { ptr = new RoundPtr(0, 0, 10); }\n        virtual ~B() { delete ptr; }\n};\n\nclass C : public A {\n    public:\n        C() : A() { ptr = new SquarePtr(5, 5, 10, 10); }\n        virtual ~C() { delete ptr; };\n};\n\nint main()\n{\n  A * bObj = new B();\n  A * cObj = new C();\n\n  bObj-&gt;getPtr()-&gt;foo();\n  cObj-&gt;getPtr()-&gt;foo();\n\n  delete bObj;\n  delete cObj;\n}\n</code></pre>\n\n<p>Can anybody check this code? Do you see any problems with it? Is it good solution? Is it possible to use smart pointers from c++11 here?</p>\n"}], "owner": {"reputation": 999, "user_id": 747709, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1203157922f211def1e2cbb5128c2b4e?s=128&d=identicon&r=PG", "display_name": "Robotex", "link": "https://stackoverflow.com/users/747709/robotex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 57096595, "answer_count": 1, "score": -2, "last_activity_date": 1569052571, "creation_date": 1563399060, "last_edit_date": 1569052571, "question_id": 57084300, "link": "https://stackoverflow.com/questions/57084300/how-to-make-polymorphic-field-of-class-in-c-how-to-use-polymorphism-correctly", "title": "How to make polymorphic field of class in C++? How to use polymorphism correctly in this case?", "body": "<p>I have a class</p>\n\n<pre><code>class A \n{\n    BasePtr * ptr;\n    virtual BasePtr * getPtr() { return ptr; }\n    virtual void pure() = 0;\n}\n</code></pre>\n\n<p>And I want to derive two classes from it that create its own versions of ptr:</p>\n\n<pre><code>class B : public A \n{\n    B() : A() { ptr = new RoundPtr(); }\n};\n\nclass C : public A \n{\n    C() : A() { ptr = new SquarePtr(); }\n}\n</code></pre>\n\n<p>Then I create a list of pointers to basic class:</p>\n\n<pre><code>A * list[2];\nlist[0] = new B();\nlist[1] = new C();\n</code></pre>\n\n<p>And call this method:</p>\n\n<pre><code>list[i]-&gt;getPtr();\n</code></pre>\n\n<p>But I found that it returns an uninitialized pointer.</p>\n\n<p>So, how to correctly use polymorphism here? How to properly create this field to use different types of it?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1563397605, "post_id": 57084041, "comment_id": 100691188, "body": "Take everything after <code>&#47;&#47;class ends here</code> and move it into your <code>.C</code> file"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1563397611, "post_id": 57084041, "comment_id": 100691191, "body": "You already have declarations and definitions nicely separated, so it should be as simple as cut-and-paste the class function definitions into another file."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1563401320, "post_id": 57084041, "comment_id": 100692323, "body": "Just noticed something. The calls to <code>ignore</code> after the <code>getline</code>s may cause you grief. <code>getline</code> will eat the trailing newline from hitting enter on the keyboard, so the ignore will likely discard the first character of the next input. Might as well fix the bug now and save yourself time figuring out why the inputs aren&#39;t quite right later."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11799751, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VFkOiffgimQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc6Mob-FxPtiUTl1yYmlzULev13JQ/photo.jpg?sz=128", "display_name": "Jay Yoon", "link": "https://stackoverflow.com/users/11799751/jay-yoon"}, "edited": false, "score": 0, "creation_date": 1563398833, "post_id": 57084105, "comment_id": 100691642, "body": "Thanks, but it&#39;s not working. C:\\Users\\Jay Yoon\\OneDrive - Parkland College\\Desktop\\project2.o:project2.cpp|| undefined reference to `account::show_account() const&#39;|  It said undefined."}, {"owner": {"reputation": 720, "user_id": 5473659, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HlSFtUlEWUg/AAAAAAAAAAI/AAAAAAAAABE/IDscIChoyC0/photo.jpg?sz=128", "display_name": "Rick Pat", "link": "https://stackoverflow.com/users/5473659/rick-pat"}, "reply_to_user": {"reputation": 3, "user_id": 11799751, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VFkOiffgimQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc6Mob-FxPtiUTl1yYmlzULev13JQ/photo.jpg?sz=128", "display_name": "Jay Yoon", "link": "https://stackoverflow.com/users/11799751/jay-yoon"}, "edited": false, "score": 0, "creation_date": 1563398984, "post_id": 57084105, "comment_id": 100691694, "body": "The code as is here is working for me. what is <code>project2.cpp</code>? is that where your main is? Also what&#39;s your compile command?"}, {"owner": {"reputation": 3, "user_id": 11799751, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VFkOiffgimQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc6Mob-FxPtiUTl1yYmlzULev13JQ/photo.jpg?sz=128", "display_name": "Jay Yoon", "link": "https://stackoverflow.com/users/11799751/jay-yoon"}, "edited": false, "score": 0, "creation_date": 1563399083, "post_id": 57084105, "comment_id": 100691726, "body": "yes.project2.cpp is main.  I am using code blocks. Is this a problem?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1563399156, "post_id": 57084105, "comment_id": 100691753, "body": "Worked just fine over here as well. Make sure account.cpp has been properly added to the project and is being compiled and linked."}, {"owner": {"reputation": 720, "user_id": 5473659, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HlSFtUlEWUg/AAAAAAAAAAI/AAAAAAAAABE/IDscIChoyC0/photo.jpg?sz=128", "display_name": "Rick Pat", "link": "https://stackoverflow.com/users/5473659/rick-pat"}, "edited": false, "score": 0, "creation_date": 1563399199, "post_id": 57084105, "comment_id": 100691771, "body": "yes, when you add a class from the codeblocks menu, make sure to check the boxes <code>debug</code> and <code>release</code>"}, {"owner": {"reputation": 3, "user_id": 11799751, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VFkOiffgimQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc6Mob-FxPtiUTl1yYmlzULev13JQ/photo.jpg?sz=128", "display_name": "Jay Yoon", "link": "https://stackoverflow.com/users/11799751/jay-yoon"}, "edited": false, "score": 0, "creation_date": 1563405338, "post_id": 57084105, "comment_id": 100693251, "body": "Thanks for the help guys."}], "tags": [], "owner": {"reputation": 720, "user_id": 5473659, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HlSFtUlEWUg/AAAAAAAAAAI/AAAAAAAAABE/IDscIChoyC0/photo.jpg?sz=128", "display_name": "Rick Pat", "link": "https://stackoverflow.com/users/5473659/rick-pat"}, "is_accepted": true, "score": 1, "last_activity_date": 1563397862, "creation_date": 1563397862, "answer_id": 57084105, "question_id": 57084041, "link": "https://stackoverflow.com/questions/57084041/class-divide-header-and-definition-file/57084105#57084105", "title": "Class divide header and definition file", "body": "<p>Its as simple as this:</p>\n\n<p>main.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;cctype&gt;\n#include &lt;iomanip&gt;\n#include &lt;stdlib.h&gt;\n\n#include \"account.h\"\n\nusing namespace std;\n\n//   function declaration\n\nvoid write_account();   //function to write record in binary file\nvoid display_sp(int);   //function to display account details given by user\nvoid display_all();     //function to display all account details\nvoid deposit_withdraw(int, int); // function to desposit/withdraw amount for given account\n\n//   Main function\n\nint main()\n{\n    char ch;\n    int num;\n    do\n    {\n        system(\"cls\");\n        cout&lt;&lt;\"----------------------------------------\";\n        cout&lt;&lt;\"\\nWelcome to the First National Bank\\n\" &lt;&lt; \"of Parkland - Account transaction system \";\n        cout&lt;&lt;\"\\n----------------------------------------\";\n        cout&lt;&lt;\"\\n\\n\\t01. Create Account\";\n        cout&lt;&lt;\"\\n\\n\\t02. Deposit\";\n        cout&lt;&lt;\"\\n\\n\\t03. Withdraw\";\n        cout&lt;&lt;\"\\n\\n\\t04. Select Account\";\n        cout&lt;&lt;\"\\n\\n\\t05. Print Accounts\";\n        cout&lt;&lt;\"\\n\\n\\t06. Quit\";\n        cout&lt;&lt;\"\\n\\n\\tSelect Your Option (1-6) \";\n        cin&gt;&gt;ch;\n        system(\"cls\");\n        switch(ch)\n        {\n        case '1':\n            write_account();\n            break;\n        case '2':\n            cout&lt;&lt;\"\\n\\n\\tEnter The account No. : \"; cin&gt;&gt;num;\n            deposit_withdraw(num, 1);\n            break;\n        case '3':\n            cout&lt;&lt;\"\\n\\n\\tEnter The account No. : \"; cin&gt;&gt;num;\n            deposit_withdraw(num, 2);\n            break;\n        case '4':\n            cout&lt;&lt;\"\\n\\n\\tEnter The account No. : \"; cin&gt;&gt;num;\n            display_sp(num);\n            break;\n        case '5':\n            display_all();\n            break;\n        case '6':\n            cout&lt;&lt;\"\\n\\n\\tThanks for using bank managemnt system\";\n            break;\n        default :cout&lt;&lt;\"\\a\";\n        }\n        cin.ignore();\n        cin.get();\n    }while(ch!='8');\n\n    return 0;\n}\n\n\n//    function to write in file\n\nvoid write_account()\n{\n    account ac;\n    ofstream outFile;\n    outFile.open(\"account.dat\",ios::binary|ios::app);\n    ac.create_account();\n    outFile.write(reinterpret_cast&lt;char *&gt; (&amp;ac), sizeof(account));\n    outFile.close();\n}\n\n//    function to read specific record from file\n\nvoid display_sp(int n)\n{\n    account ac;\n    bool flag=false;\n    ifstream inFile;\n    inFile.open(\"account.dat\",ios::binary);\n    if(!inFile)\n    {\n        cout&lt;&lt;\"File could not be open !! Press any Key...\";\n        return;\n    }\n    cout&lt;&lt;\"\\nBALANCE DETAILS\\n\";\n\n    while(inFile.read(reinterpret_cast&lt;char *&gt; (&amp;ac), sizeof(account)))\n    {\n        if(ac.retacno()==n)\n        {\n            ac.show_account();\n            flag=true;\n        }\n    }\n    inFile.close();\n    if(flag==false)\n        cout&lt;&lt;\"\\n\\nAccount number does not exist\";\n}\n\n\n//    function to display all accounts deposit list\n\nvoid display_all()\n{\n    account ac;\n    ifstream inFile;\n    inFile.open(\"account.dat\",ios::binary);\n    if(!inFile)\n    {\n        cout&lt;&lt;\"File could not be open !! Press any Key...\";\n        return;\n    }\n    cout&lt;&lt;\"\\n\\n\\t\\tACCOUNT HOLDER LIST\\n\\n\";\n    cout&lt;&lt;\"=========================================================================================\\n\";\n    cout&lt;&lt;\"A/c no.    NAME          SSN         Address             Total Balance     Interest Rate\\n\" ;\n    cout&lt;&lt;\"=========================================================================================\\n\";\n\n    while(inFile.read(reinterpret_cast&lt;char *&gt; (&amp;ac), sizeof(account)))\n    {\n        ac.report();\n    }\n    inFile.close();\n}\n\n//   function to deposit and withdraw amounts\n\nvoid deposit_withdraw(int n, int option)\n{\n    int amt;\n    bool found=false;\n    account ac;\n    fstream File;\n    File.open(\"account.dat\", ios::binary|ios::in|ios::out);\n    if(!File)\n    {\n        cout&lt;&lt;\"File could not be open !! Press any Key...\";\n        return;\n    }\n    while(!File.eof() &amp;&amp; found==false)\n    {\n        File.read(reinterpret_cast&lt;char *&gt; (&amp;ac), sizeof(account));\n        if(ac.retacno()==n)\n        {\n            ac.show_account();\n            if(option==1)\n            {\n                cout&lt;&lt;\"\\n\\n\\tTO DEPOSITE AMOUNT \";\n                cout&lt;&lt;\"\\n\\nEnter The amount to be deposited\";\n                cin&gt;&gt;amt;\n                ac.dep(amt);\n            }\n            if(option==2)\n            {\n                cout&lt;&lt;\"\\n\\n\\tTO WITHDRAW AMOUNT \";\n                cout&lt;&lt;\"\\n\\nEnter The amount to be withdraw\";\n                cin&gt;&gt;amt;\n                int bal=ac.retdeposit()-amt;\n                if((bal&lt;500 &amp;&amp; ac.retssn()=='S') || (bal&lt;1000 &amp;&amp; ac.retssn()=='C'))\n                    cout&lt;&lt;\"Insufficience balance\";\n                else\n                    ac.draw(amt);\n            }\n            int pos=(-1)*static_cast&lt;int&gt;(sizeof(ac));\n            File.seekp(pos,ios::cur);\n            File.write(reinterpret_cast&lt;char *&gt; (&amp;ac), sizeof(account));\n            cout&lt;&lt;\"\\n\\n\\t Record Updated\";\n            found=true;\n        }\n    }\n    File.close();\n    if(found==false)\n        cout&lt;&lt;\"\\n\\n Record Not Found \";\n}\n</code></pre>\n\n<p>account.h:</p>\n\n<pre><code>#pragma once\n\nclass account\n{\n    int acno;\n    char name[50];\n    int deposit;\n    int ssn;\n    char address[50];\n    int intRate;\n\n\npublic:\n    void create_account();  //function to get data from user\n    void show_account() const;  //function to show data on screen\n    void dep(int);  //function to accept amount and add to balance amount\n    void draw(int); //function to accept amount and subtract from balance amount\n    void report() const;    //function to show data in tabular format\n    int retacno() const;    //function to return account number\n    int retdeposit() const; //function to return balance amount\n    int retssn() const; //function to return ssn of account\n    int retintRate() const;\n};\n</code></pre>\n\n<p>account.cpp:</p>\n\n<pre><code>#include \"account.h\"\n\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\nvoid account::create_account()\n{\n    cout&lt;&lt;\"\\nEnter The account No. :\";\n    cin&gt;&gt;acno;\n    cout&lt;&lt;\"\\n\\nEnter The Name of The account holder : \";\n    cin.ignore();\n    cin.getline(name,50);\n    cout&lt;&lt;\"\\n\\nEnter The Address of The account holder : \";\n    cin.ignore();\n    cin.getline(address,50);\n    cout&lt;&lt;\"\\nEnter SSN of The account : \";\n    cin&gt;&gt;ssn;\n    ssn=toupper(ssn);\n    cout&lt;&lt;\"\\nEnter The Initial amount(&gt;=500 for Saving and &gt;=1000 for current ) : \";\n    cin&gt;&gt;deposit;\n    cout&lt;&lt;\"\\nEnter The Interest Rates : \";\n    cin&gt;&gt;intRate;\n    cout&lt;&lt;\"\\n\\n\\nAccount Created..\";\n}\n\nvoid account::show_account() const\n{\n    cout&lt;&lt;\"\\nAccount No. : \"&lt;&lt;acno;\n    cout&lt;&lt;\"\\nAccount Holder Name : \"&lt;&lt;name;\n    cout&lt;&lt;\"\\nAccount Holder's address : \"&lt;&lt;address;\n    cout&lt;&lt;\"\\nSSN of Account : \"&lt;&lt;ssn;\n    cout&lt;&lt;\"\\nBalance amount : \"&lt;&lt;deposit;\n    cout&lt;&lt;\"\\nInterest Rate : \"&lt;&lt;intRate;\n    cout&lt;&lt;\"\\nTotal Balance : \"&lt;&lt;deposit+deposit*intRate;\n}\n\n\n\nvoid account::dep(int x)\n{\n    deposit+=x;\n}\n\nvoid account::draw(int x)\n{\n    deposit-=x;\n}\n\nvoid account::report() const\n{\n    cout&lt;&lt;acno&lt;&lt;setw(8)&lt;&lt;\" \"&lt;&lt;name&lt;&lt;setw(6)&lt;&lt;\" \"&lt;&lt;ssn&lt;&lt;setw(6)&lt;&lt;\" \"&lt;&lt;address&lt;&lt;setw(17)&lt;&lt;\" \"&lt;&lt;deposit+deposit*intRate/100&lt;&lt;setw(16)&lt;&lt;intRate&lt;&lt;endl;\n}\n\n\nint account::retacno() const\n{\n    return acno;\n}\n\nint account::retdeposit() const\n{\n    return deposit;\n}\n\nint account::retssn() const\n{\n    return ssn;\n}\n\n\nint account::retintRate() const\n{\n    return intRate;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11799751, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VFkOiffgimQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc6Mob-FxPtiUTl1yYmlzULev13JQ/photo.jpg?sz=128", "display_name": "Jay Yoon", "link": "https://stackoverflow.com/users/11799751/jay-yoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 57084105, "answer_count": 1, "score": 0, "last_activity_date": 1563418338, "creation_date": 1563397425, "last_edit_date": 1563418338, "question_id": 57084041, "link": "https://stackoverflow.com/questions/57084041/class-divide-header-and-definition-file", "title": "Class divide header and definition file", "body": "<p>I have to divide it. This code works. However, each class definition in its own header file (.h), each class member function definitions in its own source file (.C), and the program application in its own source file. I don't know how to do that. It is not fully connected. </p>\n\n<p>I get the following error:</p>\n\n<blockquote>\n  <p>C:\\Users\\Jay Yoon\\OneDrive - Parkland College\\Desktop\\project2.cpp|48|error: 'write_account' was not declared in this scope</p>\n</blockquote>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\n#include&lt;cctype&gt;\n#include&lt;iomanip&gt;\n#include &lt;stdlib.h&gt;\n\nusing namespace std;\n\n//  CLASS USED IN PROJECT\n\nclass account\n{\n    int acno;\n    char name[50];\n    int deposit;\n    int ssn;\n    char address[50];\n    int intRate;\npublic:\n    void create_account();  //function to get data from user\n    void show_account() const;  //function to show data on screen\n    void dep(int);  //function to accept amount and add to balance amount\n    void draw(int); //function to accept amount and subtract from balance amount\n    void report() const;    //function to show data in tabular format\n    int retacno() const;    //function to return account number\n    int retdeposit() const; //function to return balance amount\n    int retssn() const; //function to return ssn of account\n    int retintRate() const;\n};         //class ends here\n\nvoid account::create_account()\n{\n    cout&lt;&lt;\"\\nEnter The account No. :\";\n    cin&gt;&gt;acno;\n    cout&lt;&lt;\"\\n\\nEnter The Name of The account holder : \";\n    cin.ignore();\n    cin.getline(name,50);\n    cout&lt;&lt;\"\\n\\nEnter The Address of The account holder : \";\n    cin.ignore();\n    cin.getline(address,50);\n    cout&lt;&lt;\"\\nEnter SSN of The account : \";\n    cin&gt;&gt;ssn;\n    ssn=toupper(ssn);\n    cout&lt;&lt;\"\\nEnter The Initial amount(&gt;=500 for Saving and &gt;=1000 for current ) : \";\n    cin&gt;&gt;deposit;\n    cout&lt;&lt;\"\\nEnter The Interest Rates : \";\n    cin&gt;&gt;intRate;\n    cout&lt;&lt;\"\\n\\n\\nAccount Created..\";\n}\n\nvoid account::show_account() const\n{\n    cout&lt;&lt;\"\\nAccount No. : \"&lt;&lt;acno;\n    cout&lt;&lt;\"\\nAccount Holder Name : \"&lt;&lt;name;\n    cout&lt;&lt;\"\\nAccount Holder's address : \"&lt;&lt;address;\n    cout&lt;&lt;\"\\nSSN of Account : \"&lt;&lt;ssn;\n    cout&lt;&lt;\"\\nBalance amount : \"&lt;&lt;deposit;\n    cout&lt;&lt;\"\\nInterest Rate : \"&lt;&lt;intRate;\n    cout&lt;&lt;\"\\nTotal Balance : \"&lt;&lt;deposit+deposit*intRate;\n}\n\n\n\nvoid account::dep(int x)\n{\n    deposit+=x;\n}\n\nvoid account::draw(int x)\n{\n    deposit-=x;\n}\n\nvoid account::report() const\n{\n    cout&lt;&lt;acno&lt;&lt;setw(8)&lt;&lt;\" \"&lt;&lt;name&lt;&lt;setw(6)&lt;&lt;\" \"&lt;&lt;ssn&lt;&lt;setw(6)&lt;&lt;\" \"&lt;&lt;address&lt;&lt;setw(17)&lt;&lt;\" \"&lt;&lt;deposit+deposit*intRate/100&lt;&lt;setw(16)&lt;&lt;intRate&lt;&lt;endl;\n}\n\n\nint account::retacno() const\n{\n    return acno;\n}\n\nint account::retdeposit() const\n{\n    return deposit;\n}\n\nint account::retssn() const\n{\n    return ssn;\n}\n\n\nint account::retintRate() const\n{\n    return intRate;\n}\n\n//   function declaration\n\nvoid write_account();   //function to write record in binary file\nvoid display_sp(int);   //function to display account details given by user\nvoid display_all();     //function to display all account details\nvoid deposit_withdraw(int, int); // function to desposit/withdraw amount for given account\n\n//   Main function\n\nint main()\n{\n    char ch;\n    int num;\n    do\n    {\n        system(\"cls\");\n        cout&lt;&lt;\"----------------------------------------\";\n        cout&lt;&lt;\"\\nWelcome to the First National Bank\\n\" &lt;&lt; \"of Parkland - Account transaction system \";\n        cout&lt;&lt;\"\\n----------------------------------------\";\n        cout&lt;&lt;\"\\n\\n\\t01. Create Account\";\n        cout&lt;&lt;\"\\n\\n\\t02. Deposit\";\n        cout&lt;&lt;\"\\n\\n\\t03. Withdraw\";\n        cout&lt;&lt;\"\\n\\n\\t04. Select Account\";\n        cout&lt;&lt;\"\\n\\n\\t05. Print Accounts\";\n        cout&lt;&lt;\"\\n\\n\\t06. Quit\";\n        cout&lt;&lt;\"\\n\\n\\tSelect Your Option (1-6) \";\n        cin&gt;&gt;ch;\n        system(\"cls\");\n        switch(ch)\n        {\n        case '1':\n            write_account();\n            break;\n        case '2':\n            cout&lt;&lt;\"\\n\\n\\tEnter The account No. : \"; cin&gt;&gt;num;\n            deposit_withdraw(num, 1);\n            break;\n        case '3':\n            cout&lt;&lt;\"\\n\\n\\tEnter The account No. : \"; cin&gt;&gt;num;\n            deposit_withdraw(num, 2);\n            break;\n        case '4':\n            cout&lt;&lt;\"\\n\\n\\tEnter The account No. : \"; cin&gt;&gt;num;\n            display_sp(num);\n            break;\n        case '5':\n            display_all();\n            break;\n         case '6':\n            cout&lt;&lt;\"\\n\\n\\tThanks for using bank managemnt system\";\n            break;\n         default :cout&lt;&lt;\"\\a\";\n        }\n        cin.ignore();\n        cin.get();\n    }while(ch!='8');\n\n    return 0;\n}\n\n\n//    function to write in file\n\nvoid write_account()\n{\n    account ac;\n    ofstream outFile;\n    outFile.open(\"account.dat\",ios::binary|ios::app);\n    ac.create_account();\n    outFile.write(reinterpret_cast&lt;char *&gt; (&amp;ac), sizeof(account));\n    outFile.close();\n}\n\n//    function to read specific record from file\n\nvoid display_sp(int n)\n{\n    account ac;\n    bool flag=false;\n    ifstream inFile;\n    inFile.open(\"account.dat\",ios::binary);\n    if(!inFile)\n    {\n        cout&lt;&lt;\"File could not be open !! Press any Key...\";\n        return;\n    }\n    cout&lt;&lt;\"\\nBALANCE DETAILS\\n\";\n\n        while(inFile.read(reinterpret_cast&lt;char *&gt; (&amp;ac), sizeof(account)))\n    {\n        if(ac.retacno()==n)\n        {\n            ac.show_account();\n            flag=true;\n        }\n    }\n    inFile.close();\n    if(flag==false)\n        cout&lt;&lt;\"\\n\\nAccount number does not exist\";\n}\n\n\n//    function to display all accounts deposit list\n\nvoid display_all()\n{\n    account ac;\n    ifstream inFile;\n    inFile.open(\"account.dat\",ios::binary);\n    if(!inFile)\n    {\n        cout&lt;&lt;\"File could not be open !! Press any Key...\";\n        return;\n    }\n    cout&lt;&lt;\"\\n\\n\\t\\tACCOUNT HOLDER LIST\\n\\n\";\n    cout&lt;&lt;\"=========================================================================================\\n\";\n    cout&lt;&lt;\"A/c no.    NAME          SSN         Address             Total Balance     Interest Rate\\n\" ;\n    cout&lt;&lt;\"=========================================================================================\\n\";\n\n    while(inFile.read(reinterpret_cast&lt;char *&gt; (&amp;ac), sizeof(account)))\n    {\n        ac.report();\n    }\n    inFile.close();\n}\n\n//   function to deposit and withdraw amounts\n\nvoid deposit_withdraw(int n, int option)\n{\n    int amt;\n    bool found=false;\n    account ac;\n    fstream File;\n    File.open(\"account.dat\", ios::binary|ios::in|ios::out);\n    if(!File)\n    {\n        cout&lt;&lt;\"File could not be open !! Press any Key...\";\n        return;\n    }\n    while(!File.eof() &amp;&amp; found==false)\n    {\n        File.read(reinterpret_cast&lt;char *&gt; (&amp;ac), sizeof(account));\n        if(ac.retacno()==n)\n        {\n            ac.show_account();\n            if(option==1)\n            {\n                cout&lt;&lt;\"\\n\\n\\tTO DEPOSITE AMOUNT \";\n                cout&lt;&lt;\"\\n\\nEnter The amount to be deposited\";\n                cin&gt;&gt;amt;\n                ac.dep(amt);\n            }\n            if(option==2)\n            {\n                cout&lt;&lt;\"\\n\\n\\tTO WITHDRAW AMOUNT \";\n                cout&lt;&lt;\"\\n\\nEnter The amount to be withdraw\";\n                cin&gt;&gt;amt;\n                int bal=ac.retdeposit()-amt;\n                if((bal&lt;500 &amp;&amp; ac.retssn()=='S') || (bal&lt;1000 &amp;&amp; ac.retssn()=='C'))\n                    cout&lt;&lt;\"Insufficience balance\";\n                else\n                    ac.draw(amt);\n            }\n            int pos=(-1)*static_cast&lt;int&gt;(sizeof(ac));\n            File.seekp(pos,ios::cur);\n            File.write(reinterpret_cast&lt;char *&gt; (&amp;ac), sizeof(account));\n            cout&lt;&lt;\"\\n\\n\\t Record Updated\";\n            found=true;\n           }\n         }\n    File.close();\n    if(found==false)\n        cout&lt;&lt;\"\\n\\n Record Not Found \";\n}\n</code></pre>\n\n<p>How do I fix this?</p>\n"}, {"tags": ["c++", "linux", "arm", "cross-compiling", "quickfix"], "comments": [{"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1563397333, "post_id": 57083991, "comment_id": 100691099, "body": "It <i>looks</i> to me like this is Intel(x86) code: <code>xadd r3,[r2]</code>, so no, probably not ARM compatible, this lib. (or if it is, they made a mistake in their platform defines)."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1563397410, "post_id": 57083991, "comment_id": 100691113, "body": "When you configure you set the host, but you don&#39;t set the target. Use the <code>--target</code> option to set the proper target."}, {"owner": {"reputation": 4790, "user_id": 4491743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aXCqO.jpg?s=128&g=1", "display_name": "Knud Larsen", "link": "https://stackoverflow.com/users/4491743/knud-larsen"}, "edited": false, "score": 0, "creation_date": 1563398199, "post_id": 57083991, "comment_id": 100691430, "body": "Debian : <code>armhf, arm64</code> quickfix packages are available for &quot;Sid&quot;. ... This indicates that a build should be possible. <a href=\"https://packages.debian.org/sid/libquickfix16\" rel=\"nofollow noreferrer\">packages.debian.org/sid/libquickfix16</a>"}, {"owner": {"reputation": 73, "user_id": 3674482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jRM1t.png?s=128&g=1", "display_name": "Flashito", "link": "https://stackoverflow.com/users/3674482/flashito"}, "reply_to_user": {"reputation": 4790, "user_id": 4491743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aXCqO.jpg?s=128&g=1", "display_name": "Knud Larsen", "link": "https://stackoverflow.com/users/4491743/knud-larsen"}, "edited": false, "score": 0, "creation_date": 1563398699, "post_id": 57083991, "comment_id": 100691601, "body": "@KnudLarsen That is a really good point... I could as well use the sid repo to use this library. I didn&#39;t realize about it... I might go for this option once I tried the cross compilation so I can understand what is wrong  @Someprogrammerdude I tried with the <code>--target</code> option, but I still get the same error  @500-InternalServerError There are some later comments that suggest that it&#39;s indeed me the one having the mistake"}], "owner": {"reputation": 73, "user_id": 3674482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jRM1t.png?s=128&g=1", "display_name": "Flashito", "link": "https://stackoverflow.com/users/3674482/flashito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 373, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1563525246, "creation_date": 1563397126, "last_edit_date": 1563525246, "question_id": 57083991, "link": "https://stackoverflow.com/questions/57083991/error-when-cross-compiling-quickfix-c-into-arm-architecture", "title": "Error when cross compiling quickfix c++ into arm architecture", "body": "<p>I'm having this issue when trying to cross compile the <a href=\"http://www.quickfixengine.org/\" rel=\"nofollow noreferrer\">quickfix library</a> from my laptop debian for an arm system. \nI managed to cross compile boost already for ARM, but I'm stuck with quickfix. </p>\n\n<p>When following the <a href=\"http://www.quickfixengine.org/quickfix/doc/html/building.html\" rel=\"nofollow noreferrer\">building tutorial</a> for it, I'm running ./configure like this: </p>\n\n<blockquote>\n  <p>./configure --host=arm-linux-gnueabihf --prefix=/home/dummy/quickfix_cross</p>\n</blockquote>\n\n<p>Also like this:</p>\n\n<blockquote>\n  <p>./configure --host=arm-linux-gnueabihf --prefix=/home/dummy/quickfix_cross CC=arm-linux-gnueabihf-gcc CXX=arm-linux-gnueabihf-g++</p>\n</blockquote>\n\n<p>The exit of the configure command is as far as I understand successful: </p>\n\n<pre><code>checking for a BSD-compatible install... /usr/bin/install -c\nchecking whether build environment is sane... yes\nchecking for arm-linux-gnueabihf-strip... arm-linux-gnueabihf-strip\nchecking for a thread-safe mkdir -p... /bin/mkdir -p\nchecking for gawk... no\nchecking for mawk... mawk\nchecking whether make sets $(MAKE)... yes\nchecking whether make supports nested variables... yes\nchecking whether the C++ compiler works... yes\nchecking for C++ compiler default output file name... a.out\nchecking for suffix of executables...\nchecking whether we are cross compiling... yes\nchecking for suffix of object files... o\nchecking whether we are using the GNU C++ compiler... yes\nchecking whether arm-linux-gnueabihf-g++ accepts -g... yes\nchecking for style of include used by make... GNU\nchecking dependency style of arm-linux-gnueabihf-g++... gcc3\nchecking for arm-linux-gnueabihf-gcc... arm-linux-gnueabihf-gcc\nchecking whether we are using the GNU C compiler... yes\nchecking whether arm-linux-gnueabihf-gcc accepts -g... yes\nchecking for arm-linux-gnueabihf-gcc option to accept ISO C89... none needed\nchecking whether arm-linux-gnueabihf-gcc understands -c and -o together... yes\nchecking dependency style of arm-linux-gnueabihf-gcc... gcc3\nchecking how to run the C preprocessor... arm-linux-gnueabihf-gcc -E\nchecking build system type... x86_64-pc-linux-gnu\nchecking host system type... arm-unknown-linux-gnueabihf\nchecking how to print strings... printf\nchecking for a sed that does not truncate output... /bin/sed\nchecking for grep that handles long lines and -e... /bin/grep\nchecking for egrep... /bin/grep -E\nchecking for fgrep... /bin/grep -F\nchecking for ld used by arm-linux-gnueabihf-gcc... /usr/arm-linux-gnueabihf/bin/ld\nchecking if the linker (/usr/arm-linux-gnueabihf/bin/ld) is GNU ld... yes\nchecking for BSD- or MS-compatible name lister (nm)... /usr/bin/arm-linux-gnueabihf-nm -B\nchecking the name lister (/usr/bin/arm-linux-gnueabihf-nm -B) interface... BSD nm\nchecking whether ln -s works... yes\nchecking the maximum length of command line arguments... 1572864\nchecking how to convert x86_64-pc-linux-gnu file names to arm-unknown-linux-gnueabihf format... func_convert_file_noop\nchecking how to convert x86_64-pc-linux-gnu file names to toolchain format... func_convert_file_noop\nchecking for /usr/arm-linux-gnueabihf/bin/ld option to reload object files... -r\nchecking for arm-linux-gnueabihf-objdump... objdump\nchecking how to recognize dependent libraries... pass_all\nchecking for arm-linux-gnueabihf-dlltool... dlltool\nchecking how to associate runtime and link libraries... printf %s\\n\nchecking for arm-linux-gnueabihf-ar... arm-linux-gnueabihf-ar\nchecking for archiver @FILE support... @\nchecking for arm-linux-gnueabihf-strip... (cached) arm-linux-gnueabihf-strip\nchecking for arm-linux-gnueabihf-ranlib... arm-linux-gnueabihf-ranlib\nchecking command to parse /usr/bin/arm-linux-gnueabihf-nm -B output from arm-linux-gnueabihf-gcc object... ok\nchecking for sysroot... no\nchecking for a working dd... /bin/dd\nchecking how to truncate binary pipes... /bin/dd bs=4096 count=1\nchecking for arm-linux-gnueabihf-mt... no\nchecking for mt... mt\nconfigure: WARNING: using cross tools not prefixed with host triplet\nchecking if mt is a manifest tool... no\nchecking for ANSI C header files... yes\nchecking for sys/types.h... yes\nchecking for sys/stat.h... yes\nchecking for stdlib.h... yes\nchecking for string.h... yes\nchecking for memory.h... yes\nchecking for strings.h... yes\nchecking for inttypes.h... yes\nchecking for stdint.h... yes\nchecking for unistd.h... yes\nchecking for dlfcn.h... yes\nchecking for objdir... .libs\nchecking if arm-linux-gnueabihf-gcc supports -fno-rtti -fno-exceptions... no\nchecking for arm-linux-gnueabihf-gcc option to produce PIC... -fPIC -DPIC\nchecking if arm-linux-gnueabihf-gcc PIC flag -fPIC -DPIC works... yes\nchecking if arm-linux-gnueabihf-gcc static flag -static works... yes\nchecking if arm-linux-gnueabihf-gcc supports -c -o file.o... yes\nchecking if arm-linux-gnueabihf-gcc supports -c -o file.o... (cached) yes\nchecking whether the arm-linux-gnueabihf-gcc linker (/usr/arm-linux-gnueabihf/bin/ld) supports shared libraries... yes\nchecking whether -lc should be explicitly linked in... no\nchecking dynamic linker characteristics... GNU/Linux ld.so\nchecking how to hardcode library paths into programs... immediate\nchecking whether stripping libraries is possible... yes\nchecking if libtool supports shared libraries... yes\nchecking whether to build shared libraries... yes\nchecking whether to build static libraries... no\nchecking how to run the C++ preprocessor... arm-linux-gnueabihf-g++ -E\nchecking for ld used by arm-linux-gnueabihf-g++... /usr/arm-linux-gnueabihf/bin/ld\nchecking if the linker (/usr/arm-linux-gnueabihf/bin/ld) is GNU ld... yes\nchecking whether the arm-linux-gnueabihf-g++ linker (/usr/arm-linux-gnueabihf/bin/ld) supports shared libraries... yes\nchecking for arm-linux-gnueabihf-g++ option to produce PIC... -fPIC -DPIC\nchecking if arm-linux-gnueabihf-g++ PIC flag -fPIC -DPIC works... yes\nchecking if arm-linux-gnueabihf-g++ static flag -static works... yes\nchecking if arm-linux-gnueabihf-g++ supports -c -o file.o... yes\nchecking if arm-linux-gnueabihf-g++ supports -c -o file.o... (cached) yes\nchecking whether the arm-linux-gnueabihf-g++ linker (/usr/arm-linux-gnueabihf/bin/ld) supports shared libraries... yes\nchecking dynamic linker characteristics... (cached) GNU/Linux ld.so\nchecking how to hardcode library paths into programs... immediate\nchecking for flex... no\nchecking for lex... no\nchecking for SSL support (openssl)... configure: openssl disabled\n./configure: line 17373: ruby: command not found\n./configure: line 17453: build_no_unit_test: command not found\nchecking for shutdown in -lc... yes\nchecking for inet_addr in -lc... yes\nchecking for nanosleep in -lc... yes\nchecking for ftime in -lcompat... no\nchecking for clock_gettime... yes\nchecking for clock_get_time... no\nchecking which threading environment to use... -lpthread\nchecking for pthread_create in -lpthread... yes\nchecking stdio.h usability... yes\nchecking stdio.h presence... yes\nchecking for stdio.h... yes\nchecking for STREAMS ioctl... no\nchecking for socklen_t... yes\nchecking for ftime... yes\nchecking for set_terminate in the global namespace... no\nchecking for set_terminate in the std namespace... yes\nchecking for std::tr1::shared_ptr... yes\nchecking for std::shared_ptr... yes\nchecking for boost::shared_ptr... no\nchecking for typeinfo in the global namespace... no\nchecking for typeinfo in the std namespace... yes\nchecking for gethostbyname_r with input result... yes\nchecking for cplus_demangle in -liberty... no\nchecking if select modifies timeval parameter... unable to determine\nchecking that generated files are newer than configure... done\nconfigure: creating ./config.status\nconfig.status: creating quickfix.pc\nconfig.status: creating Makefile\nconfig.status: creating src/Makefile\nconfig.status: creating src/C++/Makefile\nconfig.status: creating src/C++/test/Makefile\nconfig.status: creating src/python2/Makefile\nconfig.status: creating src/python3/Makefile\nconfig.status: creating src/ruby/Makefile\nconfig.status: creating bin/Makefile\nconfig.status: creating bin/cfg/Makefile\nconfig.status: creating spec/Makefile\nconfig.status: creating test/Makefile\nconfig.status: creating test/atrun/Makefile\nconfig.status: creating test/cfg/Makefile\nconfig.status: creating test/definitions/Makefile\nconfig.status: creating test/definitions/server/Makefile\nconfig.status: creating test/definitions/server/future/Makefile\nconfig.status: creating examples/Makefile\nconfig.status: creating examples/executor/Makefile\nconfig.status: creating examples/executor/C++/Makefile\nconfig.status: creating examples/ordermatch/Makefile\nconfig.status: creating examples/ordermatch/test/Makefile\nconfig.status: creating examples/tradeclient/Makefile\nconfig.status: creating examples/tradeclientgui/Makefile\nconfig.status: creating examples/tradeclientgui/banzai/Makefile\nconfig.status: creating examples/tradeclientgui/banzai/test/Makefile\nconfig.status: creating examples/tradeclientgui/banzai/src/Makefile\nconfig.status: creating examples/tradeclientgui/banzai/src/quickfix/Makefile\nconfig.status: creating examples/tradeclientgui/banzai/src/quickfix/banzai/Makefile\nconfig.status: creating examples/tradeclientgui/banzai/src/quickfix/banzai/ui/Makefile\nconfig.status: creating doc/Makefile\nconfig.status: creating doc/html/Makefile\nconfig.status: creating config.h\nconfig.status: config.h is unchanged\nconfig.status: executing depfiles commands\nconfig.status: executing libtool commands\n</code></pre>\n\n<p>When then executing the make command, after a little while, I'm getting the following error:</p>\n\n<pre><code>mv -f .deps/MemoryStoreTestCase.Tpo .deps/MemoryStoreTestCase.Plo\n/bin/bash ../../../libtool  --tag=CXX   --mode=compile arm-linux-gnueabihf-g++ -DHAVE_CONFIG_H -I. -I../../.. -I.. -I../../../UnitTest++/src    -g -O2 -Wall -ansi -Wno-unused-command-line-argument -Wpointer-arith -Wwrite-strings -Wno-overloaded-virtual -Wno-deprecated-declarations -Wno-deprecated          -std=c++0x -O0 -g -MT MessageSortersTestCase.lo -MD -MP -MF .deps/MessageSortersTestCase.Tpo -c -o MessageSortersTestCase.lo MessageSortersTestCase.cpp\nlibtool: compile:  arm-linux-gnueabihf-g++ -DHAVE_CONFIG_H -I. -I../../.. -I.. -I../../../UnitTest++/src -g -O2 -Wall -ansi -Wno-unused-command-line-argument -Wpointer-arith -Wwrite-strings -Wno-overloaded-virtual -Wno-deprecated-declarations -Wno-deprecated -std=c++0x -O0 -g -MT MessageSortersTestCase.lo -MD -MP -MF .deps/MessageSortersTestCase.Tpo -c MessageSortersTestCase.cpp  -fPIC -DPIC -o .libs/MessageSortersTestCase.o\n/tmp/ccU67tE0.s: Assembler messages:\n/tmp/ccU67tE0.s:7858: Error: bad instruction `lock'\n/tmp/ccU67tE0.s:7859: Error: bad instruction `xadd r3,[r2]'\nMakefile:503: recipe for target 'MessageSortersTestCase.lo' failed\n</code></pre>\n\n<p>Note that I have the whole toolchain properly installed since I was able already to compile successfully boost libraries for ARM.</p>\n\n<p>Judging by this, I came to two possible conclusions: \n1. I'm doing something wrong somewhere (this is the one that I think is most likely).\n2. The library it's actually not compatible with the ARM architecture for any given reason. </p>\n\n<p>Could you guys help me out to try to figure out what's the actual issue with this?</p>\n\n<p>EDIT:</p>\n\n<p>After being fed up. I tried compiling in the arm system itself... I'm actually getting the same error... Maybe the library is not compatible with the armhf architecture, even when there's a package for it in the debian Sid distro... I'm so puzzled...</p>\n\n<p>EDIT 2:</p>\n\n<p>I found <a href=\"https://github.com/quickfix/quickfix/issues/206\" rel=\"nofollow noreferrer\">this bug</a> being reported in the github page for the library... I guess that it's compatible once this is fixed after all... </p>\n"}, {"tags": ["c++", "arrays", "sorting"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1563397203, "post_id": 57083941, "comment_id": 100691053, "body": "Welcome to Stack Overflow! It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming. Further reading: <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a> and <a href=\"http://idownvotedbecau.se/nodebugging/\" rel=\"nofollow noreferrer\">Debugging Guide</a>"}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1563397252, "post_id": 57083941, "comment_id": 100691074, "body": "Welcome to Stack Overflow. Have you tried simpler exercises first, like sorting a container of <code>int</code>?"}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1563397666, "post_id": 57083941, "comment_id": 100691218, "body": "Were you planning to do something with <code>tempId</code>?"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1563397759, "post_id": 57083941, "comment_id": 100691261, "body": "Read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a> for tips on debugging your code."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1563398929, "post_id": 57083941, "comment_id": 100691677, "body": "Do you HAVE to use multiple arrays? This job is practically screaming for a single array of a structure."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1563410415, "post_id": 57083941, "comment_id": 100694217, "body": "You have no correlation between <code>monthNames</code> and <code>rainfall</code>. Where if you force <code>rainfall</code> to be entered in month-order, you can torment yourself by then attempting a dual-sort of both <code>monthNames</code> and <code>rainfall</code> in parallel, but unless that is a requirement for educational purposes, it is nonsensical. Any time you have to correlate between two disparate types like <code>string</code> and <code>double</code>, you should automatically think <code>struct</code> containing both <code>double</code> and <code>string</code> and then an array of them which can then be sorted on either member."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1563438833, "post_id": 57083941, "comment_id": 100702630, "body": "Aside: <code>std::swap</code> is a thing"}], "answers": [{"tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 0, "last_activity_date": 1563439271, "creation_date": 1563439271, "answer_id": 57090425, "question_id": 57083941, "link": "https://stackoverflow.com/questions/57083941/using-sort-function-to-sort-parallel-arrays/57090425#57090425", "title": "Using sort function to sort parallel arrays", "body": "<p>You can pair up references, and then sorting that will sort the arrays.</p>\n\n<pre><code>void dualSort(double rainfall[], string monthNames[], int size)\n{\n    std::vector&lt;std::pair&lt;double&amp;, std::string&amp;&gt; &gt; tied;\n    tied.reserve(size);\n    auto tie = [](double &amp; rain, std::string &amp; month){ return std::tie(rain, month); };\n    std::transform(rainfall, rainfall + size, monthNames, std::back_inserter(tied), tie);\n    std::sort(tied.begin(), tied.end());\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 11773210, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ERcLdTJJ9uc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reIXgZdWhNvsQHtEGJaK7Z2zQU-rg/photo.jpg?sz=128", "display_name": "Sydnie wyatt", "link": "https://stackoverflow.com/users/11773210/sydnie-wyatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 243, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1563439271, "creation_date": 1563396871, "last_edit_date": 1563431952, "question_id": 57083941, "link": "https://stackoverflow.com/questions/57083941/using-sort-function-to-sort-parallel-arrays", "title": "Using sort function to sort parallel arrays", "body": "<p>I am supposed to write a sort function to sort inches of rainfall per month (entered by the user) into ascending order. The output is supposed to output the parallel arrays of the inches per month and the month it corresponds to. It is supposed to look something similar to \"x inches of rain in (month)\". X and (month) being the outputs for the parallel array. However, when I enter the inches of rain, there is no output. </p>\n\n<p>I could be overlooking something but I feel it might be something simple like my call to the functions in the wrong order or I am not outputting the sorted arrays correctly. I have tried moving the sort and show functions around in the code and have also tried changing verbiage to no avail.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n// Function Prototypes\nvoid getMonthlyRainfall(double[], string[], int);\ndouble getTotal(const double[], int);\nint getHighestAmount(const double[], int);\nint getLowestAmount(const double[], int);\nvoid dualSort(double[], string[], int);\nvoid swap(double&amp;, double&amp;);\nvoid swap(string&amp;, string&amp;);\nvoid showOrder(const double[], string[], int);\n\nint main()\n{\n    const int MONTHS = 12;\n    string monthNames[MONTHS] = { \"January\", \"February\", \"March\", \n\"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \n\"November\", \"December\" };\n    double rainfall[MONTHS], // Array\n        total,\n        average;\n    int lowestIndex,\n        highestIndex;\n\n    //Get rainfall input from user\n    getMonthlyRainfall(rainfall, monthNames, MONTHS);\n\n        // Get the total amount of rain for the year\n    total = getTotal(rainfall, MONTHS);\n\n    // Get the average rainfall\n    average = total / MONTHS;\n\n    // Get the month with the lowest rainfall\n    lowestIndex = getLowestAmount(rainfall, MONTHS);\n\n    // Get the month with the highest rainfall\n    highestIndex = getHighestAmount(rainfall, MONTHS);\n\n\n\n    cout &lt;&lt; \"Total rainfall: \" &lt;&lt; total &lt;&lt; endl;\n    cout &lt;&lt; \"Average rainfall: \" &lt;&lt; average &lt;&lt; endl;\n    cout &lt;&lt; \"Least rainfall in: \" &lt;&lt; monthNames[lowestIndex] &lt;&lt; endl;\n    cout&lt;&lt; \"Most rainfall in: \"&lt;&lt; monthNames[highestIndex] &lt;&lt; endl;\n\n    // Sort the array.\n    dualSort(rainfall, monthNames, MONTHS);\n\n    // Display sorted numbers\n    showOrder(rainfall, monthNames, MONTHS);\n\n\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>This is the main portion of the code but the issue is specifically with the showOrder and dualSort functions. I will add those below.</p>\n\n<pre><code>//*************************************************\n// This function sorts an array into ascending    *\n// order.                                         *\n//*************************************************\n\nvoid dualSort(double rainfall[], string monthNames[], int size)\n{\n    int start, minIndex;\n    double minValue;\n    string tempId;\n\n    for (start = 0; start &lt; (size - 1); start++); \n    {\n        minIndex = start;\n        minValue = rainfall[start];\n        tempId = monthNames[start];\n\n        for (int index = start + 1; index &lt; size; index++) \n        {\n        if (rainfall[index] &lt; minValue)\n        {\n            minValue = rainfall[index];\n            tempId = monthNames[index];\n            minIndex = index;\n        }\n        }\n\n    swap(rainfall[minIndex], rainfall[start]);\n    swap(monthNames[minIndex], monthNames[start]);\n    }\n}\n\n//*************************************************\n// The swap function swaps two int's in           *\n// memory.                                        *\n//*************************************************\n\nvoid swap(double &amp;a, double &amp;b)\n{\ndouble temp;\n\ntemp = a;\na = b;\nb = temp;\n}\n\n//***********************************************\n// The swap function swaps two strings in       *\n// memory.                                      *\n//***********************************************\n\nvoid swap(string &amp;a, string &amp;b)\n{\nstring temp;\n\ntemp = a;\na = b;\nb = temp;\n}\n\n//************************************************\n// showOrder function displays sorted values     *\n//************************************************\n\nvoid showOrder(const string monthNames[],const double rainfall[], int \nnum)\n{\nfor (int index = 0; index &lt; num; index++) \n{\n    cout &lt;&lt; rainfall[index] &lt;&lt; \"inches in \" &lt;&lt; monthNames[index] \n &lt;&lt; endl;\n}\ncout &lt;&lt; endl;\n}\n</code></pre>\n\n<p>I don't receive any compiler errors or messages and I am able to execute the rest of the program with no issues. The only issue is that when I expect there to be an output in ascending order, there is no output whatsoever.</p>\n\n<p>EDIT--I probably should have been more clear about my code. The code for the selection sort is an algorithm directly from my textbook so it should be correct. Because this code is built on a code I previously wrote that requires a parallel array for rainfall and monthNames, I need to use parallel arrays in this instance to sort both string and double arrays. There is more code and more functions included in my code that I didn't post here because they are working correctly. One of those functions is for the parallel array to correlate rainfall and monthNames.  </p>\n\n<p>The debugger did not help too much unless I am using it incorrectly. Is there a different way of sorting a parallel array in ascending order because if there is, I can't find it online or in my book? At this point I am not even sure what the issue is. Even after going line by line and trying to work out the logic of it, I still don't see the issue. I am able to output the other functions I wrote correctly so unless I need to correlate the two arrays again in my dualSort function or I am missing a return statement somewhere, I don't know what else to try.</p>\n"}, {"tags": ["c++", "string", "parsing", "vector", "char"], "comments": [{"owner": {"reputation": 697, "user_id": 1160404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/431cd02524d6ee187fcd1b3d9658498c?s=128&d=identicon&r=PG", "display_name": "Maddy", "link": "https://stackoverflow.com/users/1160404/maddy"}, "edited": false, "score": 0, "creation_date": 1563397052, "post_id": 57083893, "comment_id": 100691002, "body": "You can convert string within your vector to char array using stl function like the following <code>&lt;stringvariable&gt;.c_str()</code> then you can pass the char * to Generate Function"}, {"owner": {"reputation": 37, "user_id": 11486401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f2e45ffc5f7a799f3dddafa37e7fc6?s=128&d=identicon&r=PG&f=1", "display_name": "YaniAR", "link": "https://stackoverflow.com/users/11486401/yaniar"}, "reply_to_user": {"reputation": 697, "user_id": 1160404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/431cd02524d6ee187fcd1b3d9658498c?s=128&d=identicon&r=PG", "display_name": "Maddy", "link": "https://stackoverflow.com/users/1160404/maddy"}, "edited": false, "score": 0, "creation_date": 1563397504, "post_id": 57083893, "comment_id": 100691147, "body": "@Maddy what function would I need to use to get the string element in vector. Would vector.at(elementNumber) work?"}, {"owner": {"reputation": 697, "user_id": 1160404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/431cd02524d6ee187fcd1b3d9658498c?s=128&d=identicon&r=PG", "display_name": "Maddy", "link": "https://stackoverflow.com/users/1160404/maddy"}, "edited": false, "score": 1, "creation_date": 1563397937, "post_id": 57083893, "comment_id": 100691332, "body": "use a range based for loop like  <code>for(string str : vstr) { char *p = str.c_str()}</code>"}, {"owner": {"reputation": 697, "user_id": 1160404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/431cd02524d6ee187fcd1b3d9658498c?s=128&d=identicon&r=PG", "display_name": "Maddy", "link": "https://stackoverflow.com/users/1160404/maddy"}, "reply_to_user": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1563459320, "post_id": 57083893, "comment_id": 100714517, "body": "@AlexanderZhang: That&#39;s correct I missed it while typing :)"}], "owner": {"reputation": 37, "user_id": 11486401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f2e45ffc5f7a799f3dddafa37e7fc6?s=128&d=identicon&r=PG&f=1", "display_name": "YaniAR", "link": "https://stackoverflow.com/users/11486401/yaniar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1563396602, "creation_date": 1563396602, "question_id": 57083893, "link": "https://stackoverflow.com/questions/57083893/make-the-elements-of-a-string-vector-into-elements-of-char", "title": "Make the elements of a string vector into elements of char", "body": "<p>I'm a beginner and I can't make my head around how I can make the contents inside the string vector to become char and still be in the same element.</p>\n\n<p>I am taking a file where it is multiple messages in the same line together. So this program creates a new line wherever there is the delimiter \"3=Value\" and stores that line into a string vector. Each line will get a checksumvalue which will need to take account of every character of the line.</p>\n\n<p>I am struggling to see how I can make each element in the string vector to become a char so it can go through every character in the line/element to generate a checksumvalue.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;cstdlib&gt;\n\nstd::vector&lt;std::string&gt; SortString(std::string str, std::string delimiter)\n{\n    std::size_t pos_previous = 0; // start of line\n    std::size_t pos_current;      // end of line\n    std::size_t delimiter_length = delimiter.length();\n\n    std::string line_number;\n    std::string full_message;\n    std::string checksum_value = \"checksum=\";\n    std::vector&lt;std::string&gt; vstr;\n    while( (pos_current = str.find(delimiter, pos_previous)) != std::string::npos)\n    { // looks for delimiter from previous position\n        line_number = str.substr(pos_previous, pos_current - pos_previous);\n        pos_previous = pos_current + delimiter_length; // start of line is now the end of the previous line.\n        full_message = delimiter + line_number;\n        std::size_t pos_checksum = 0;\n\n        while( ( pos_checksum = full_message.find(checksum_value)) != std::string::npos )\n            full_message.erase(static_cast&lt;int&gt;(pos_checksum), 6);\n        vstr.push_back(full_message);\n    }\n\n    return vstr;\n}\n\nvoid GenerateCheckSum( char *b, long bLen )\n{\n// Takes each character and a method is used to give a unique number to a char and generate a value.\n}\n\nint main()\n{\n    std::ifstream file(\"filename.extension\");\n    // stuff here\n    while(file.is_open())\n    {\n        std::string delim = \"3=VALUE\";\n        std::string message;\n        std::getline(file, message);\n\n    std::vector&lt;std::string&gt; v = SortString(message, delim);\n        for(int i = 0; i &lt; v.size(); ++i)\n            std::cout &lt;&lt; v.at(i) &lt;&lt; \"\\n\";\n\n        file.close();\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Thanks for taking your time to help. Using older version of cpp</p>\n"}, {"tags": ["c++", "oop"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1563397049, "post_id": 57083837, "comment_id": 100691000, "body": "Outside of that you posted a lot of code. I think you really want to use your debugger to understand what your code is doing. If this is Visual Studio learn what the F9, F10 and F11 keys do and look at your variables while you step through your code."}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 1, "creation_date": 1563397055, "post_id": 57083837, "comment_id": 100691003, "body": "Welcome to Stack Overflow. If I understand your question correctly, you want to iterate over a vector. Any textbook on C++ will explain this, or you can search for &quot;C++ iterate vector&quot;. This code is needlessly complex for this problem; when you learn a new technique, you should implement it in the simplest program possible, a program that does nothing else, and when you post code here you should first remove all unnecessary complication."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1563397236, "post_id": 57083837, "comment_id": 100691067, "body": "A range based for loop may help with iteration."}, {"owner": {"reputation": 1, "user_id": 9043497, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215201395248443/picture?type=large", "display_name": "Ysche Iffer", "link": "https://stackoverflow.com/users/9043497/ysche-iffer"}, "edited": false, "score": 0, "creation_date": 1563398900, "post_id": 57083837, "comment_id": 100691665, "body": "drescherm, I have simplified the code and remove the switch case. I don&#39;t know if I have to iterate over a vector. The vector is just here to store my energy. Cannot I cumulative my consumptions of mazout and gas inside the variable d_totalconsumption?"}, {"owner": {"reputation": 1, "user_id": 9043497, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215201395248443/picture?type=large", "display_name": "Ysche Iffer", "link": "https://stackoverflow.com/users/9043497/ysche-iffer"}, "edited": false, "score": 0, "creation_date": 1563399864, "post_id": 57083837, "comment_id": 100691965, "body": "By the way, I use qtcreator. I think my problem is when I use ptrEnergy = new () I point to another thing and it reset my value inside the Energy class"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1563400027, "post_id": 57083837, "comment_id": 100692020, "body": "To get the total you need to iterate over the objects you have in the vector not just look at the last item you added to the vector."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1563400140, "post_id": 57083837, "comment_id": 100692056, "body": "To print the individual data you should also iterate over the vector. Instead of always printing the first and second item in the vector without considering there could be more or less than 2 items in the vector."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1563400217, "post_id": 57083837, "comment_id": 100692066, "body": "<b><i>By the way, I use qtcreator.</i></b> qt-creator is an IDE. Your problems don&#39;t depend on the IDE, compiler or even OS choice."}, {"owner": {"reputation": 1, "user_id": 9043497, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215201395248443/picture?type=large", "display_name": "Ysche Iffer", "link": "https://stackoverflow.com/users/9043497/ysche-iffer"}, "edited": false, "score": 0, "creation_date": 1563401237, "post_id": 57083837, "comment_id": 100692308, "body": "Thanks. I will try to iterate over the objects. For now, I sum my consumption inside the main and set into total consumption."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1563404134, "post_id": 57083837, "comment_id": 100692982, "body": "The way you have <code>d_totalconsumption</code> in your <code>Energy</code> class does not make sense. There are more than one instance of your <code>Energy</code> class and they don&#39;t share the same total. There is a way to make them share but then all instances have to share which means if you take this an additional step and have customers they can&#39;t have individual energy totals."}], "answers": [{"tags": [], "owner": {"reputation": 351, "user_id": 7834933, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kAAAkx4hSUc/AAAAAAAAAAI/AAAAAAAAqoE/UdciGksbY3A/photo.jpg?sz=128", "display_name": "Daniel", "link": "https://stackoverflow.com/users/7834933/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1563413350, "creation_date": 1563413350, "answer_id": 57085892, "question_id": 57083837, "link": "https://stackoverflow.com/questions/57083837/how-do-i-count-inside-base-class/57085892#57085892", "title": "How do I count inside base class?", "body": "<p>I think the concept you don't understand is static variable of a class.</p>\n\n<p>Static variables are shared variables across the same class. You refer to them in code with <code>Classname::variable</code>. Same idea with static functions.</p>\n\n<p>For example,</p>\n\n<pre><code>class A {\npublic:\n    static int object_count;\n    int x;\n    A(int _x) : x(_x) {\n        ++object_count;\n    }\n};\n\nint A::object_count = 0;\n\nint main(){\n    A a1(8);\n    cout &lt;&lt; A::object_count &lt;&lt; endl; // prints 1\n    A a2(9);\n    cout &lt;&lt; A::object_count &lt;&lt; endl; // prints 2\n}\n</code></pre>\n\n<p>For your particular question, you wish to count the total consumption / cost across all object instances, so you want the counter and functions to be static.</p>\n\n<pre><code>class Energy\n{\nprivate:\n\n    static double d_totalconsumption = 0.0; //count total consumption\n    static double d_totalbill        = 0.0; //count total bill $\n\npublic:\n    Energy(){}\n    virtual ~Energy(){}\n\n    static void   addConsumption(double d) { Energy::d_totalconsumption += d; }\n    static double totalConsumption() const { return Energy::d_totalconsumption; }\n    static void   addBill(double d)        { Energy::d_totalbill += d; }\n    static double totalBill()        const { return Energy::d_totalbill; }\n\n    virtual void   setConsumption(double consumption) =0;\n    virtual void   setBill(double billCAD)            =0;\n    virtual double getConsumption()             const =0;\n    virtual double getBill()                    const =0;\n\n};\n\n// ...\n\nint main()\n{\n// ...\n    std::cout &lt;&lt; \"Total Consumption \" &lt;&lt; Energy::totalConsumption() &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Total Bill        \" &lt;&lt; Energy::totalBill()        &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 351, "user_id": 7834933, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kAAAkx4hSUc/AAAAAAAAAAI/AAAAAAAAqoE/UdciGksbY3A/photo.jpg?sz=128", "display_name": "Daniel", "link": "https://stackoverflow.com/users/7834933/daniel"}, "edited": false, "score": 0, "creation_date": 1565126847, "post_id": 57096313, "comment_id": 101252507, "body": "If you find my solution helpful, instead of posting a &quot;Thank you&quot; answer, please mark my answer as &quot;accepted&quot; and/or upvote."}], "tags": [], "owner": {"reputation": 1, "user_id": 9043497, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215201395248443/picture?type=large", "display_name": "Ysche Iffer", "link": "https://stackoverflow.com/users/9043497/ysche-iffer"}, "is_accepted": false, "score": 0, "last_activity_date": 1563458392, "creation_date": 1563458392, "answer_id": 57096313, "question_id": 57083837, "link": "https://stackoverflow.com/questions/57083837/how-do-i-count-inside-base-class/57096313#57096313", "title": "How do I count inside base class?", "body": "<p>Thank you Daniel for the static solution! I will explore this.\ndrescherjm, I don't really have customers, Energy is linked with another class Building which have energies. I could probably put my <code>d_totalconsumption</code> inside <code>Building</code> class, but i would like to keep it with the <code>Energy</code> class (because it's total consumption of energy). But your point is interesting! Thanks a lot guys</p>\n"}], "owner": {"reputation": 1, "user_id": 9043497, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215201395248443/picture?type=large", "display_name": "Ysche Iffer", "link": "https://stackoverflow.com/users/9043497/ysche-iffer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1563458392, "creation_date": 1563396292, "last_edit_date": 1563398803, "question_id": 57083837, "link": "https://stackoverflow.com/questions/57083837/how-do-i-count-inside-base-class", "title": "How do I count inside base class?", "body": "<p>I want to improve my skills in C++ and I try to build a code which will store different energy and their consumptions. Everything works, but I don't understand how I can count consumptions. My problem is when I create pointers to the different energies, my d_consumption inside Energy class is reset and I have only the lastest consumption. If possible, I would like to know if my coding style is good.</p>\n\n<pre><code>class Energy\n{\nprivate:\n\n    double d_totalconsumption = 0.0; //count total consumption\n    double d_totalbill        = 0.0; //count total bill $\n\npublic:\n    Energy(){}\n    virtual ~Energy(){}\n\n    void   addConsumption(double d) { d_totalconsumption += d; }\n    double totalConsumption() const { return d_totalconsumption; }\n    void   addBill(double d)        { d_totalbill += d; }\n    double totalBill()        const { return d_totalbill; }\n\n    virtual void   setConsumption(double consumption) =0;\n    virtual void   setBill(double billCAD)            =0;\n    virtual double getConsumption()             const =0;\n    virtual double getBill()                    const =0;\n\n};\n\nclass Mazout : public Energy\n{\nprivate:\n\n    double d_consumption = 1.e-16; // init to avoid divide by zero later\n    double d_bill        = 1.e-16; // init to avoid divide by zero later\n\npublic:\n    Mazout() : Energy() { }\n    virtual ~Mazout(){}\n\n    void   setConsumption(double consumption) { d_consumption = liters; Energy::addConsumption(consumption); }\n    void   setBill(double billCAD)            { d_bill = billCAD; }\n    double getConsumption()             const { return d_consumption; }\n    double getBill()                    const { return d_bill; }\n\n};\n\nclass NaturalGas : public Energy\n{\nprivate:\n\n    double d_consumption = 1.e-16; //init to avoid divide by zero later\n    double d_bill        = 1.e-16; //init to avoid divide by zero later\n\npublic:\n    NaturalGas() : Energy() {std::cout &lt;&lt; std::fixed;}\n    virtual ~NaturalGas(){}\n\n    void   setConsumption(double consumption) { d_consumption = consumption; Energy::addConsumption(consumption);  }\n    void   setBill(double billCAD)            { d_bill = billCAD; }\n    double getConsumption()             const { return d_consumption; }\n    double getBill()                    const { return d_bill; }\n\n};\n\n\nint main()\n{\n\n    string input;\n    stringstream inputStream;\n    int choice;\n    bool exit = false;\n\n    Energy *ptrEnergy;\n    vector&lt;Energy*&gt; energyList;\n\n    ptrEnergy = new Mazout();\n\n    ptrEnergy-&gt;setConsumption(26180);\n    ptrEnergy-&gt;setBill(26952);\n\n    energyList.push_back(ptrEnergy)\n\n    ptrEnergy = new NaturalGas();\n\n    ptrEnergy-&gt;setConsumption(34000);\n    ptrEnergy-&gt;setBill(17000);\n\n    energyList.push_back(ptrEnergy)\n\n\n\n\n    // print data\n    std::cout &lt;&lt; \"Consumption \" &lt;&lt; energyList(0)-&gt;getConsumption() &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Bill        \" &lt;&lt; energyList(0)-&gt;getBill()        &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; \"Consumption \" &lt;&lt; energyList(1)-&gt;getConsumption() &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Bill        \" &lt;&lt; energyList(1)-&gt;getBill()        &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; \"Total Consumption \" &lt;&lt; ptrEnergy()-&gt;getConsumption() &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Total Bill        \" &lt;&lt; ptrEnergy()-&gt;getBill()        &lt;&lt; std::endl;\n\n}\n</code></pre>\n\n<p>I expected something like that.</p>\n\n<pre><code>Consumption 26180.0\nBill        26952.0\nConsumption 34000.0\nBill        17000.0\nTotal Consumption 29580.0 // I have 34000.0\nTotal Bill        43952.0 // I have 17000.0\n</code></pre>\n"}, {"tags": ["c++", "function", "return-type"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1563396263, "post_id": 57083802, "comment_id": 100690746, "body": "Did you try <code>int GetFolderName(WCHAR *sOutValue)</code>?"}, {"owner": {"reputation": 527, "user_id": 662586, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e02811681b46047f576392d3db3f74dd?s=128&d=identicon&r=PG", "display_name": "JeffR", "link": "https://stackoverflow.com/users/662586/jeffr"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1563397480, "post_id": 57083802, "comment_id": 100691141, "body": "How do I call it? <code>GetFolderName(sFolder);</code>?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1563397551, "post_id": 57083802, "comment_id": 100691165, "body": "Yep.  Not to sound rude but it sounds like you could use a <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>"}, {"owner": {"reputation": 527, "user_id": 662586, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e02811681b46047f576392d3db3f74dd?s=128&d=identicon&r=PG", "display_name": "JeffR", "link": "https://stackoverflow.com/users/662586/jeffr"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1563397748, "post_id": 57083802, "comment_id": 100691255, "body": "That&#39;s what I thought, but I was getting confused about how it was getting passed. I&#39;ve got so much code I&#39;ve been reviewing, I&#39;m questioning myself!"}, {"owner": {"reputation": 527, "user_id": 662586, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e02811681b46047f576392d3db3f74dd?s=128&d=identicon&r=PG", "display_name": "JeffR", "link": "https://stackoverflow.com/users/662586/jeffr"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1563397849, "post_id": 57083802, "comment_id": 100691298, "body": "Is there a reason to declare a function parameter with two <code>**</code>? Like <code>int GetFolderName(WCHAR **sOutValue);</code>?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1563397865, "post_id": 57083802, "comment_id": 100691306, "body": "If you need to modify the data a pointer points to, it is fine to just pass the pointer by value.  If you need to modify what a pointer actually points to, then you need to pass it by pointer or reference so you can change it.  If not all you are doing is changing a copy of the pointer, not the pointer from the call site."}, {"owner": {"reputation": 527, "user_id": 662586, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e02811681b46047f576392d3db3f74dd?s=128&d=identicon&r=PG", "display_name": "JeffR", "link": "https://stackoverflow.com/users/662586/jeffr"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1563398596, "post_id": 57083802, "comment_id": 100691557, "body": "I&#39;ve used the <code>**</code> when I&#39;m allocating memory in the function itself, as opposed to allocating it before the function. Makes for cleaner code to me."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1563398669, "post_id": 57083802, "comment_id": 100691586, "body": "That is a valid use case.  You can also use <code>*&amp;</code> instead to make working with the pointer in the function easier.  You avoid all of the extra dereferencing."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1563404273, "post_id": 57083802, "comment_id": 100693015, "body": "This looks like C, not C++"}], "owner": {"reputation": 527, "user_id": 662586, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e02811681b46047f576392d3db3f74dd?s=128&d=identicon&r=PG", "display_name": "JeffR", "link": "https://stackoverflow.com/users/662586/jeffr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563396144, "creation_date": 1563396144, "question_id": 57083802, "link": "https://stackoverflow.com/questions/57083802/how-to-retrieve-variables-as-a-parameter-in-a-c-function", "title": "How to retrieve variables as a parameter in a C++ function", "body": "<p>I want to do something simple. I want to have a custom function that returns multiple WCHAR values via its function's parameters. So, it may or may not take in a value to change the outgoing WCHAR parameters, or it just may have one outgoing parameter. Here is an example of what I'm trying to do:</p>\n\n<pre><code>int GetFolderName(WCHAR sOutValue)\n{\nwcscpy(sOutValue, L\"E:\\\\temp\");\n}\n</code></pre>\n\n<p>I want my code to call this function and then get the value from it:</p>\n\n<pre><code>int main()\n{\nWCHAR *sFolder =  (WCHAR*)calloc(64,sizeof(WCHAR));\nGetFolderName(...);\n}\n</code></pre>\n\n<p>How do I declare GetFolderName and how do I call it?</p>\n\n<pre><code>int GetFolderName(WCHAR sOutValue);\n</code></pre>\n\n<p>or\n    int GetFolderName(WCHAR *sOutValue);\nor\n    int GetFolderName(WCHAR **sOutValue);\nor\n    something else???</p>\n\n<p>Getting a bit confused here. Thanks for any help.</p>\n"}, {"tags": ["c++", "opengl", "shader"], "comments": [{"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1563396659, "post_id": 57083768, "comment_id": 100690867, "body": "What does it mean: <i>&quot;How do i separate line color from vertex color?&quot;</i>? Do you mean that you want one color attribute per primitive rather than per vertex? That is not possible, see <a href=\"https://stackoverflow.com/questions/11351537/opengl-vertex-attribute-arrays-per-primitive\">OpenGL: Vertex attribute arrays per primitive?</a>"}, {"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 3, "creation_date": 1563400872, "post_id": 57083768, "comment_id": 100692230, "body": "Or possibly use the <a href=\"https://www.khronos.org/opengl/wiki/Type_Qualifier_(GLSL)#Fragment_shader_outputs\" rel=\"nofollow noreferrer\"><code>flat</code> qualifier</a> for the color attribute in the fragment shader."}, {"owner": {"reputation": 9, "user_id": 11799624, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DtYX-RSXNbo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rerf7q2gA0rjnsCRex1go7DyOmqDQ/photo.jpg?sz=128", "display_name": "\u0418\u043b\u044c\u044f \u0417\u0430\u0431\u044b\u043b.\u043e\u041e", "link": "https://stackoverflow.com/users/11799624/%d0%98%d0%bb%d1%8c%d1%8f-%d0%97%d0%b0%d0%b1%d1%8b%d0%bb-%d0%be%d0%9e"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1563429777, "post_id": 57083768, "comment_id": 100698384, "body": "@Rabbid76 yea, this is exactly what i want"}, {"owner": {"reputation": 9, "user_id": 11799624, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DtYX-RSXNbo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rerf7q2gA0rjnsCRex1go7DyOmqDQ/photo.jpg?sz=128", "display_name": "\u0418\u043b\u044c\u044f \u0417\u0430\u0431\u044b\u043b.\u043e\u041e", "link": "https://stackoverflow.com/users/11799624/%d0%98%d0%bb%d1%8c%d1%8f-%d0%97%d0%b0%d0%b1%d1%8b%d0%bb-%d0%be%d0%9e"}, "reply_to_user": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1563429790, "post_id": 57083768, "comment_id": 100698389, "body": "@NicoSchertler big thanks for advice"}], "owner": {"reputation": 9, "user_id": 11799624, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DtYX-RSXNbo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rerf7q2gA0rjnsCRex1go7DyOmqDQ/photo.jpg?sz=128", "display_name": "\u0418\u043b\u044c\u044f \u0417\u0430\u0431\u044b\u043b.\u043e\u041e", "link": "https://stackoverflow.com/users/11799624/%d0%98%d0%bb%d1%8c%d1%8f-%d0%97%d0%b0%d0%b1%d1%8b%d0%bb-%d0%be%d0%9e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563441069, "creation_date": 1563395929, "last_edit_date": 1563441069, "question_id": 57083768, "link": "https://stackoverflow.com/questions/57083768/how-do-i-separate-line-color-from-vertex-color", "title": "How do I separate line color from vertex color?", "body": "<p>The line is automatically painted in the color of the vertices</p>\n\n<p>I tried to paint each line separately from vertices but it didn't work.</p>\n\n<pre><code>void draw()\n{\n    glDrawArrays(GL_POINTS, 0, vertecies.size());\n    glDrawElements(GL_LINES, lines.indecies.size(), GL_UNSIGNED_INT, nullptr);\n}\n\n\nvoid buffer_init()\n{\n    glGenBuffers(1, &amp;vertex_bufffer);\n    glBindBuffer(GL_ARRAY_BUFFER, vertex_bufffer);\n    glBufferData(GL_ARRAY_BUFFER, MAX_VERTEX_COUNT * sizeof(gl_vertex2d), &amp;vertecies[0], GL_DYNAMIC_DRAW);\n    glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, sizeof(gl_vertex2d), 0);\n    glEnableVertexAttribArray(0);\n\n    //colors\n    glGenBuffers(1, &amp;vertex_color_buffer);\n    glBindBuffer(GL_ARRAY_BUFFER, vertex_color_buffer);\n    glBufferData(GL_ARRAY_BUFFER, MAX_VERTEX_COUNT * sizeof(gl_vertex2d), &amp;vertecies[0], GL_DYNAMIC_DRAW);\n    glVertexAttribPointer(1, 4, GL_FLOAT, GL_FALSE, sizeof(gl_vertex2d), (GLvoid*)8);\n    glEnableVertexAttribArray(1);\n\n\n    glGenBuffers(1, &amp;lines_buffer);\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, lines_buffer);\n    glBufferData(GL_ELEMENT_ARRAY_BUFFER, MAX_LINES_COUNT * sizeof(gl_lines2d), &amp;lines.indecies[0], GL_DYNAMIC_DRAW);\n\n    //that's how i'm trying to color lines\n    glGenBuffers(1, &amp;lines_color_buffer);\n    glBindBuffer(GL_ARRAY_BUFFER, lines_color_buffer);\n    glBufferData(GL_ARRAY_BUFFER, MAX_LINES_COUNT * sizeof(gl_lines2d), &amp;lines.colors[0], GL_DYNAMIC_DRAW);\n}\n</code></pre>\n\n<p>But the last 3 lines of code doesn't really change anything: picture stays the same.</p>\n\n<p>I'm using the following vertex and fragments shaders:</p>\n\n<pre><code>#FRAGMENT\n#version 330 core\n\nin vec4 vColor;\nout vec4 fColor; \n\nvoid main()\n{\n    fColor = vColor;\n}\n\n#VERTEX\n#version 330 core\n\nlayout(location = 0) in vec4 position;\nlayout(location = 1) in vec4 color;\nout vec4 vColor;\n\nvoid main()\n{\n    gl_Position = position;\n    vColor = color;\n}\n</code></pre>\n"}, {"tags": ["c++", "gcc"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1563395376, "post_id": 57083654, "comment_id": 100690383, "body": "But the error the OP is getting is not a linker error."}, {"owner": {"reputation": 720, "user_id": 5473659, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HlSFtUlEWUg/AAAAAAAAAAI/AAAAAAAAABE/IDscIChoyC0/photo.jpg?sz=128", "display_name": "Rick Pat", "link": "https://stackoverflow.com/users/5473659/rick-pat"}, "edited": false, "score": 0, "creation_date": 1563395533, "post_id": 57083654, "comment_id": 100690460, "body": "hmm, true. I answered a bit too fast there."}], "tags": [], "owner": {"reputation": 720, "user_id": 5473659, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HlSFtUlEWUg/AAAAAAAAAAI/AAAAAAAAABE/IDscIChoyC0/photo.jpg?sz=128", "display_name": "Rick Pat", "link": "https://stackoverflow.com/users/5473659/rick-pat"}, "is_accepted": false, "score": 3, "last_activity_date": 1563395282, "creation_date": 1563395282, "answer_id": 57083654, "question_id": 57083629, "link": "https://stackoverflow.com/questions/57083629/main-cpp1-no-include-path-in-which-to-find-iostream/57083654#57083654", "title": "&#39;main.cpp:1: No include path in which to find iostream&#39;", "body": "<p>Use <code>g++ main.cpp</code></p>\n\n<p>The command <code>gcc</code> is setup for c compilation. It does not link the c++ standard library.<br>\n<code>g++</code> does link c++ standard library.</p>\n"}], "owner": {"reputation": 1, "user_id": 10821715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0918c636df9d3d57e09ae1b11af2056b?s=128&d=identicon&r=PG&f=1", "display_name": "DarthDaniel", "link": "https://stackoverflow.com/users/10821715/darthdaniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563395282, "creation_date": 1563395177, "last_edit_date": 1563395262, "question_id": 57083629, "link": "https://stackoverflow.com/questions/57083629/main-cpp1-no-include-path-in-which-to-find-iostream", "title": "&#39;main.cpp:1: No include path in which to find iostream&#39;", "body": "<p>I just tried to compile simple Hello World in C++ using MinGW compiler in my Windows 10 command line. I used the command <code>gcc main.cpp</code>, and as I hit enter, I got this error: 'main.cpp:1: No include path in which to find iostream'.\nWhat is the error and how do I fix it?</p>\n"}, {"tags": ["c++", "eigen3"], "comments": [{"owner": {"reputation": 2528, "user_id": 4658169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b351ed2ce7ddde5ab5ac9bd96200a62d?s=128&d=identicon&r=PG&f=1", "display_name": "CuriouslyRecurringThoughts", "link": "https://stackoverflow.com/users/4658169/curiouslyrecurringthoughts"}, "edited": false, "score": 0, "creation_date": 1563396045, "post_id": 57083605, "comment_id": 100690655, "body": "Not an expert on Eigen, but looking at the repo, I think I found the function in <a href=\"https://bitbucket.org/eigen/eigen/raw/537d95e06d30439429d0a8270bbde46340fd87b2/Eigen/src/Core/ArithmeticSequence.h\" rel=\"nofollow noreferrer\">bitbucket.org/eigen/eigen/raw/&hellip;</a> . Do you have the file? Have you check the #define you have?"}, {"owner": {"reputation": 96, "user_id": 4174888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea013d550adfa714540f5cd92b13e1ec?s=128&d=identicon&r=PG&f=1", "display_name": "AldiT", "link": "https://stackoverflow.com/users/4174888/aldit"}, "reply_to_user": {"reputation": 2528, "user_id": 4658169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b351ed2ce7ddde5ab5ac9bd96200a62d?s=128&d=identicon&r=PG&f=1", "display_name": "CuriouslyRecurringThoughts", "link": "https://stackoverflow.com/users/4658169/curiouslyrecurringthoughts"}, "edited": false, "score": 0, "creation_date": 1563397210, "post_id": 57083605, "comment_id": 100691055, "body": "@CuriouslyRecurringThoughts this is strange! This file that you have sent a link to, is not part of the git repo of eigen, but it is part of the bitbucket repo. As e result it is not part of my files as well. I will try to change my sources and will see if it works out! Thanks!"}, {"owner": {"reputation": 2528, "user_id": 4658169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b351ed2ce7ddde5ab5ac9bd96200a62d?s=128&d=identicon&r=PG&f=1", "display_name": "CuriouslyRecurringThoughts", "link": "https://stackoverflow.com/users/4658169/curiouslyrecurringthoughts"}, "edited": false, "score": 1, "creation_date": 1563397375, "post_id": 57083605, "comment_id": 100691105, "body": "It&#39;s part also of the github repo: <a href=\"https://github.com/eigenteam/eigen-git-mirror/blob/03a902ce645776d7e55f64f1d7f0d7eeab04e3c3/Eigen/src/Core/ArithmeticSequence.h\" rel=\"nofollow noreferrer\">github.com/eigenteam/eigen-git-mirror/blob/&hellip;</a> , actually I found first the github repo, then I realized it was a mirror and I searched for the official repo. From which github repo did you get Eigen?"}, {"owner": {"reputation": 96, "user_id": 4174888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea013d550adfa714540f5cd92b13e1ec?s=128&d=identicon&r=PG&f=1", "display_name": "AldiT", "link": "https://stackoverflow.com/users/4174888/aldit"}, "reply_to_user": {"reputation": 2528, "user_id": 4658169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b351ed2ce7ddde5ab5ac9bd96200a62d?s=128&d=identicon&r=PG&f=1", "display_name": "CuriouslyRecurringThoughts", "link": "https://stackoverflow.com/users/4658169/curiouslyrecurringthoughts"}, "edited": false, "score": 0, "creation_date": 1563398046, "post_id": 57083605, "comment_id": 100691367, "body": "Oh snap! Yeah I used a third party mirror... Now I am getting some other errors, but I think this problem is solved, please comment below so that I can mark this thread as solved!"}, {"owner": {"reputation": 2528, "user_id": 4658169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b351ed2ce7ddde5ab5ac9bd96200a62d?s=128&d=identicon&r=PG&f=1", "display_name": "CuriouslyRecurringThoughts", "link": "https://stackoverflow.com/users/4658169/curiouslyrecurringthoughts"}, "edited": false, "score": 0, "creation_date": 1563398916, "post_id": 57083605, "comment_id": 100691673, "body": "You mean that I should give an answer? Interestingly enough, though, the tar.gz available on the website do not provide the file."}, {"owner": {"reputation": 96, "user_id": 4174888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea013d550adfa714540f5cd92b13e1ec?s=128&d=identicon&r=PG&f=1", "display_name": "AldiT", "link": "https://stackoverflow.com/users/4174888/aldit"}, "reply_to_user": {"reputation": 2528, "user_id": 4658169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b351ed2ce7ddde5ab5ac9bd96200a62d?s=128&d=identicon&r=PG&f=1", "display_name": "CuriouslyRecurringThoughts", "link": "https://stackoverflow.com/users/4658169/curiouslyrecurringthoughts"}, "edited": false, "score": 1, "creation_date": 1563405322, "post_id": 57083605, "comment_id": 100693247, "body": "@CuriouslyRecurringThoughts Yeah , apparently there are a ton of incorrect repos out there. I stumbled on some others with the same file missing."}], "answers": [{"comments": [{"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1563403171, "post_id": 57084487, "comment_id": 100692760, "body": "Backporting changes to 3.3.x would be quite cumbersome in many cases -- and generally, the stable branch mostly gets bug-fixes, but no new features. But yes, it has been a while since a new version of Eigen was released ... (btw: The official repo is a mercurial not a git repo)"}, {"owner": {"reputation": 2643, "user_id": 3736306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b04e15baa8fe1cfac912948db67b919d?s=128&d=identicon&r=PG&f=1", "display_name": "yuqli", "link": "https://stackoverflow.com/users/3736306/yuqli"}, "edited": false, "score": 7, "creation_date": 1568253798, "post_id": 57084487, "comment_id": 102218500, "body": "Thanks for the answer. I was having trouble using <code>Eigen::all</code>, which is pretty strange since I downloaded the <code>.zip</code> from <a href=\"http://bitbucket.org/eigen/eigen/get/3.3.7.zip\" rel=\"nofollow noreferrer\">the official website link</a> of the latest release 3.3.7. After cloning another version from Github as you suggested, I was able to use this <code>all</code> operator."}, {"owner": {"reputation": 119, "user_id": 8585383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae3e6b5ac92fabfd058e5a96ceccc7d0?s=128&d=identicon&r=PG&f=1", "display_name": "ShnitzelKiller", "link": "https://stackoverflow.com/users/8585383/shnitzelkiller"}, "edited": false, "score": 3, "creation_date": 1579755773, "post_id": 57084487, "comment_id": 105874423, "body": "So there is no way to slice arrays using operator() in the latest stable release of Eigen?"}], "tags": [], "owner": {"reputation": 2528, "user_id": 4658169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b351ed2ce7ddde5ab5ac9bd96200a62d?s=128&d=identicon&r=PG&f=1", "display_name": "CuriouslyRecurringThoughts", "link": "https://stackoverflow.com/users/4658169/curiouslyrecurringthoughts"}, "is_accepted": true, "score": 8, "last_activity_date": 1563403695, "last_edit_date": 1563403695, "creation_date": 1563400296, "answer_id": 57084487, "question_id": 57083605, "link": "https://stackoverflow.com/questions/57083605/error-while-compiling-eigen-program-error-seq-is-not-a-member-of-eigen/57084487#57084487", "title": "Error while compiling eigen program: error: &#39;seq&#39; is not a member of &#39;Eigen&#39;", "body": "<p>After inspecting the official repo</p>\n\n<p><a href=\"https://bitbucket.org/eigen/eigen/src/default/\" rel=\"noreferrer\">https://bitbucket.org/eigen/eigen/src/default/</a></p>\n\n<p>The required function is in the file <code>Eigen/src/core/ArithmeticSequence.h</code> which is included in the general header <code>Eigen/Core</code> already used in the snippet.</p>\n\n<p>The issue seems to be that OP downloaded Eigen from a third-party repo not in sync with the main repo and the aforementioned file was missing.</p>\n\n<p>I add this note for posterity: The latest stable release at the moment of writing is 3.3.7, released in 2018, (see <a href=\"http://eigen.tuxfamily.org/index.php?title=Main_Page\" rel=\"noreferrer\">http://eigen.tuxfamily.org/index.php?title=Main_Page</a>), and does not include the file. So, if anybody else finds the same issue, please try to clone the official repo. </p>\n"}, {"tags": [], "owner": {"reputation": 383, "user_id": 7568866, "user_type": "registered", "profile_image": "https://graph.facebook.com/1227872887333866/picture?type=large", "display_name": "Stefan", "link": "https://stackoverflow.com/users/7568866/stefan"}, "is_accepted": false, "score": 0, "last_activity_date": 1618410221, "creation_date": 1618410221, "answer_id": 67093599, "question_id": 57083605, "link": "https://stackoverflow.com/questions/57083605/error-while-compiling-eigen-program-error-seq-is-not-a-member-of-eigen/67093599#67093599", "title": "Error while compiling eigen program: error: &#39;seq&#39; is not a member of &#39;Eigen&#39;", "body": "<p>The required function is in the file Eigen/src/core/ArithmeticSequence.h which is included in the general header <code>Eigen/Core</code>. So <code>#include &quot;Eigen/Core</code> will suffice. (As @CuriouslyRecurringThoughts pointed out).</p>\n<p>However, to address the confusion in his answer: <code>ArithmeticSequences</code> such as <code>Seq</code> are planned for Eigen version <em>3.4.0</em> So they are not present in versions prior to this. When I write this, the latest official release is <em>3.3.9</em> which thus doesn't support <code>ArithmeticSequences</code>.</p>\n<p>If you look in the <a href=\"https://gitlab.com/libeigen/eigen\" rel=\"nofollow noreferrer\">official repo</a>, you will find that the file is also not present for release <em>3.3.9</em> and earlier. Right now, it is only included in the <code>3.4.0-rc1</code> and <code>master</code> branch.</p>\n<p><strong>So to answer your question:</strong> You are most likely using an older version of Eigen and you will need to use <code>Eigen 3.4.0-rc1</code> or later.</p>\n"}], "owner": {"reputation": 96, "user_id": 4174888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea013d550adfa714540f5cd92b13e1ec?s=128&d=identicon&r=PG&f=1", "display_name": "AldiT", "link": "https://stackoverflow.com/users/4174888/aldit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3294, "favorite_count": 0, "accepted_answer_id": 57084487, "answer_count": 2, "score": 8, "last_activity_date": 1618410221, "creation_date": 1563395013, "question_id": 57083605, "link": "https://stackoverflow.com/questions/57083605/error-while-compiling-eigen-program-error-seq-is-not-a-member-of-eigen", "title": "Error while compiling eigen program: error: &#39;seq&#39; is not a member of &#39;Eigen&#39;", "body": "<p>I am trying to index a matrix in indexes which follow an arithmetic sequence. According to the Eigen tutorial on the official website, I should use Eigen::seq(firstVal, lastVal, step) to generate this sequence. After calling this the error, as pasted in the title of this thread pops up. </p>\n\n<p>I checked all the files of my local eigen folder, for the 'seq' method, but no luck. It wasn't anywhere. I guess this means that some file is missing, right?</p>\n\n<p>Code goes smth like this.</p>\n\n<p><strong>Headers at the top</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;chrono&gt;\n#include \"Eigen/Dense\"\n#include \"Eigen/Core\"\n#include &lt;cmath&gt;\n#include &lt;random&gt;\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>m1(row, Eigen::seq(some_index*m1.cols(), some_index*m1.cols() + m1.cols()-1, step))= m2.block(row, 0, 1, m2.cols());\n</code></pre>\n\n<p>where of course, m1.cols() >> m2.cols()</p>\n\n<p>Error output:</p>\n\n<pre><code>error: 'seq' is not a member of 'Eigen'\n</code></pre>\n\n<p>The expected result would be to get the row from matrix m2 (where m2.cols() &lt; m1.cols()) and assign the row's values to certain indexes in the same row number of m1.</p>\n"}, {"tags": ["c++", "matlab", "opencv"], "answers": [{"comments": [{"owner": {"reputation": 359, "user_id": 5664656, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/197c3ca2fbfea8c055cef836b79e2604?s=128&d=identicon&r=PG&f=1", "display_name": "mordecai", "link": "https://stackoverflow.com/users/5664656/mordecai"}, "edited": false, "score": 0, "creation_date": 1563406010, "post_id": 57083723, "comment_id": 100693421, "body": "Thanks for your reply @Paul. Would know an algorithm to rotate this line of 1s inside a matrix? I could get to print diagonals, vertical, and horizontally, but I&#39;m cant think of a solution to rotate like 15 by 15 degrees"}], "tags": [], "owner": {"reputation": 8084, "user_id": 2896626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4cd83959d7fe39c658d2e49cfecfe4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Paul92", "link": "https://stackoverflow.com/users/2896626/paul92"}, "is_accepted": false, "score": 0, "last_activity_date": 1563395706, "creation_date": 1563395706, "answer_id": 57083723, "question_id": 57083523, "link": "https://stackoverflow.com/questions/57083523/creating-linear-structuring-element-in-opencv-c/57083723#57083723", "title": "Creating linear structuring element in opencv c++", "body": "<p>The closest function OpenCV has is <a href=\"https://docs.opencv.org/3.4/d4/d86/group__imgproc__filter.html#gac342a1bb6eabf6f55c803b09268e36dc\" rel=\"nofollow noreferrer\"><code>getStructuringElement</code></a>. Unfortunately, the only shapes it supports are <a href=\"https://docs.opencv.org/3.4/d4/d86/group__imgproc__filter.html#gac2db39b56866583a95a5680313c314ad\" rel=\"nofollow noreferrer\">rectangle, cross and ellipse</a>.</p>\n\n<p>Therefore, it is probably the easiest to create/estimate it yourself.</p>\n"}], "owner": {"reputation": 359, "user_id": 5664656, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/197c3ca2fbfea8c055cef836b79e2604?s=128&d=identicon&r=PG&f=1", "display_name": "mordecai", "link": "https://stackoverflow.com/users/5664656/mordecai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563395706, "creation_date": 1563394644, "last_edit_date": 1563395002, "question_id": 57083523, "link": "https://stackoverflow.com/questions/57083523/creating-linear-structuring-element-in-opencv-c", "title": "Creating linear structuring element in opencv c++", "body": "<p>Doing some research, I found that in Matlab they have this function to create linear structuring elements with a certain angle:</p>\n\n<pre><code>strel('line',len,deg)\n</code></pre>\n\n<p>The documentations says <code>creates a linear structuring element that is symmetric with respect to the neighborhood center, with approximate length len and angle deg.</code>, which basically is a Mat like this with different sizes and angles:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Pysfs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Pysfs.png\" alt=\"enter image description here\"></a></p>\n\n<p>I'm trying to create a similar structuring element in different angles but I couldnt find an equivalent function in Opencv for C++. Is there a way of doing that?</p>\n\n<p>I appreciate any help. Thanks in advance</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1563394689, "post_id": 57083490, "comment_id": 100690091, "body": "It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming. Further reading: <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a> and <a href=\"http://idownvotedbecau.se/nodebugging/\" rel=\"nofollow noreferrer\">Debugging Guide</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1563394745, "post_id": 57083490, "comment_id": 100690113, "body": "Sounds like you need to do some more reading on <i>tokenizing</i>, <i>lexing</i> and <i>parsing</i>."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 11736001, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A9OTulIyMWI/AAAAAAAAAAI/AAAAAAAAA_E/QrECvUxXHDk/photo.jpg?sz=128", "display_name": "Harvey Gray", "link": "https://stackoverflow.com/users/11736001/harvey-gray"}, "edited": false, "score": 0, "creation_date": 1563395114, "post_id": 57083587, "comment_id": 100690268, "body": "I will bear that in mind and let you know if I come up with the solution based on your opinion."}, {"owner": {"reputation": 39, "user_id": 11736001, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A9OTulIyMWI/AAAAAAAAAAI/AAAAAAAAA_E/QrECvUxXHDk/photo.jpg?sz=128", "display_name": "Harvey Gray", "link": "https://stackoverflow.com/users/11736001/harvey-gray"}, "edited": false, "score": 0, "creation_date": 1563395290, "post_id": 57083587, "comment_id": 100690346, "body": "Just to let you know I have used your if statement method and it works! Thank you!"}], "tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": false, "score": 2, "last_activity_date": 1563394927, "creation_date": 1563394927, "answer_id": 57083587, "question_id": 57083490, "link": "https://stackoverflow.com/questions/57083490/if-statement-incorrectly-recognising-spaces-in-a-bracket/57083587#57083587", "title": "If statement incorrectly recognising spaces in a bracket", "body": "<p>Think about what this line does</p>\n\n<pre><code>if (input.find(' ') != input.npos &amp;&amp; (i == 5)) {\n</code></pre>\n\n<p>If says if the input contains a space and if <code>i</code> equals 5 then output an error. Since <code>i</code> loops through all the indexes of the string this will be true of <strong>any</strong> string of length at least 5, which contains a space <strong>anywhere</strong>.</p>\n\n<p>I'm thinking that what you really meant is this</p>\n\n<pre><code>if (input[5] == ' ')\n</code></pre>\n\n<p>but I'm not really sure.</p>\n"}], "owner": {"reputation": 39, "user_id": 11736001, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A9OTulIyMWI/AAAAAAAAAAI/AAAAAAAAA_E/QrECvUxXHDk/photo.jpg?sz=128", "display_name": "Harvey Gray", "link": "https://stackoverflow.com/users/11736001/harvey-gray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563395678, "creation_date": 1563394528, "last_edit_date": 1563395678, "question_id": 57083490, "link": "https://stackoverflow.com/questions/57083490/if-statement-incorrectly-recognising-spaces-in-a-bracket", "title": "If statement incorrectly recognising spaces in a bracket", "body": "<p>I am writing a mini programming language and I am currently working on my first proper command. My command is called 'prout(\"Sample text\")'. When my program sees a space in between the letter t from the word prout and the opening bracket, it outputs an unexpected indent error, which is supposed to happen. What isn't supposed to happen is it recognising spaces in the text that the user wants to output and outputs an unexpected indent error. Does anybody know how to implement a way to stop the program from recognising that spaces in the text that the user wants to output is an unexpected indent error?</p>\n\n<p>Here is the current output:</p>\n\n<pre><code>&gt;&gt;&gt; prout(\"Hello\")\nHello\n&gt;&gt;&gt; prout (\"Hello\")\nError: Unexpected indent //That is supposed to happen\n&gt;&gt;&gt; prout(\"Hello I am a programmer!\")\nError: Unexpected indent //That is the problem\n</code></pre>\n\n<p>I've tried to use the attribute .npos to filter the spaces but this hasn't worked.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"printoutput.h\"\n#include \"Line.h\"\n\nusing namespace std;\n\nvoid printoutput::print(string input) {\n    int i = 0;\n    int length = input.length();\n    if (input.find('(') != input.npos &amp;&amp; (input.find(')') != input.npos) &amp;&amp; (input.find('\\\"') != input.npos)) {\n        for (int i = 0; i &lt;= input.length(); i++) {\n            char letter = input[i];\n            if (input.find(' ') != input.npos &amp;&amp; (i == 5)) {\n                cout &lt;&lt; \"Error: Unexpected indent\";\n                break;\n            }\n            if ((letter == 'p') &amp;&amp; (i != 0) || (letter == 'r') &amp;&amp; (i != 1) || (letter == 'o') &amp;&amp; (i != 2) || (letter == 'u') &amp;&amp; (i != 3) || (letter == 't') &amp;&amp; (i != 4) || (letter == '(') &amp;&amp; (i != 5) || (letter == '\\\"') &amp;&amp; (i != 6 &amp;&amp; i != input.length() - 2) || (letter == ')') &amp;&amp; (i != length - 1)) {\n                char inputletter = input[i];\n                cout &lt;&lt; inputletter;\n            }\n            else if ((i != 0 &amp;&amp; (i != 1) &amp;&amp; (i != 2) &amp;&amp; (i != 3) &amp;&amp; (i != 4) &amp;&amp; (i != 5)) &amp;&amp; (i != 6 &amp;&amp; i != length - 2) &amp;&amp; (i != length - 1)) {\n                char inputletter = input[i];\n                cout &lt;&lt; inputletter;\n            }\n        }\n    }\n    if (input.find('\\\"') == input.npos) {\n        cout &lt;&lt; \"Syntax error: Missing quotation marks\";\n    }\n    else if (input.find('(') == input.npos || (input.find(')')) == input.npos) {\n        cout &lt;&lt; \"Syntax error: Missing parenthesis\";\n    }\n    cout &lt;&lt; endl;\n}\n</code></pre>\n\n<p>I expect the output to show the user's text that they have wanted to output with the spaces that they may have included.</p>\n"}, {"tags": ["c++", "arrays", "vector", "types", "type-conversion"], "comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1563394564, "post_id": 57083467, "comment_id": 100690020, "body": "vectors of C arrays are not legal, so it&#39;s no surprise you can&#39;t get it to work."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1563394566, "post_id": 57083467, "comment_id": 100690021, "body": "Three-byte integers? That&#39;s pretty unusual. Anyway, it&#39;s just a matter of masking and shifting."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1563394589, "post_id": 57083467, "comment_id": 100690035, "body": "You&#39;ll be surprised to learn that you already wrote 95% of the code to do this. The only thing that&#39;s missing is creating a <code>std::vector&lt;char&gt;</code>, and instead of  dumping each byte to <code>std::cout</code>, just <code>push_back</code>() it into the char vector. Seems pretty obvious."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1563394651, "post_id": 57083467, "comment_id": 100690074, "body": "@SamVarshavchik I would rather recommend <code>std::vector&lt;byte&gt;</code> or <code>std::vector&lt;uint8_t&gt;</code> for the byte-vectors."}], "answers": [{"tags": [], "owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "is_accepted": false, "score": 0, "last_activity_date": 1563400345, "creation_date": 1563400345, "answer_id": 57084493, "question_id": 57083467, "link": "https://stackoverflow.com/questions/57083467/converting-an-integer-vector-into-a-vector-of-byte-arrays-then-calling-each-byte/57084493#57084493", "title": "Converting an integer vector into a vector of byte arrays then calling each byte array", "body": "<p>Hm, I somehow understand, but not fully. Maybe my answer is therefore not accurate.</p>\n\n<p>But first of all, you want to convert a vector with ints into a vector of something with 3 bytes.</p>\n\n<p>For the something with 3 bytes we will use a std::array of bytes with size 3. And we will use unsigned for everything.</p>\n\n<p>Then we create a vector of this array. </p>\n\n<p>The whole vector of unsigned ints can be converted to a vector of byte arrays in one transform statement. Thats quite easy. We can also copy that into a plain old C-Style array.</p>\n\n<p>But this is not needed. You can use the data function of the <code>std::array</code> to access the underlying data.</p>\n\n<p>This is the conversion code</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;array&gt;\n#include &lt;cstdint&gt;\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n#include &lt;iostream&gt;\n\nusing Byte = uint8_t;\nusing B3Array = std::array&lt;Byte, 3&gt;;\n\nstd::vector &lt;unsigned int&gt; output = { 16383,1,8192 };\nstd::vector&lt;B3Array&gt; finalbuffer{};\nByte plainCStyleArray[3];\n\nint main()\n{\n    // Convert to byte array, C++ style\n    std::transform( output.begin(), output.end(),std::back_inserter(finalbuffer),\n        [](const unsigned int i) {\n            Byte b0 = (i &gt;&gt; 16) &amp; 0xFF; Byte b1 = (i &gt;&gt; 8) &amp; 0xFF; Byte b2 = (i)  &amp; 0xFF;\n            B3Array ba{ b0,b1,b2 };\n            return ba;\n        }\n    );\n\n    // Copy one vector to plain C-Style array (but why?)\n    std::copy_n(finalbuffer[0].begin(), 3, plainCStyleArray);\n\n    // Play a little bit. Some test code\n    for (size_t i = 0; i &lt; output.size(); ++i) {\n        B3Array b3a = finalbuffer[i];\n        std::copy_n(b3a.begin(), 3, std::ostream_iterator&lt;int&gt;(std::cout, \" \"));\n        std::cout &lt;&lt; '\\n';\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Then you can write in your function (after the <code>std::transform</code>):</p>\n\n<pre><code>for {unsigned i=0; i&lt;finalbuffer.size(); ++i) {\nstatus = SPI_Write(handle, finalbuffer[i].data(), 3, &amp;transferCount, options);\n            if (status != FT_OK)\n                print_and_quit(\"Error while transmitting bytes.\");\n}\n</code></pre>\n\n<p>As you can see, I just added <code>.data()</code> to <code>finalbuffer[i]</code></p>\n\n<p>All this seems so simple so that I guess, I maybe misunderstood your question. Sorry for that . . .</p>\n"}], "owner": {"reputation": 41, "user_id": 11756532, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1n7UwUByRKA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdVmM5nHOBy6v8K_e1Thl6EA0kO2Q/photo.jpg?sz=128", "display_name": "Chris Pineda", "link": "https://stackoverflow.com/users/11756532/chris-pineda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 540, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563400345, "creation_date": 1563394413, "last_edit_date": 1563395799, "question_id": 57083467, "link": "https://stackoverflow.com/questions/57083467/converting-an-integer-vector-into-a-vector-of-byte-arrays-then-calling-each-byte", "title": "Converting an integer vector into a vector of byte arrays then calling each byte array", "body": "<p>I have a vector of numbers ex. <code>vector&lt;int&gt; vec={16383 1 8192}</code>. I need to convert them to byte arrays so that an SPI write function can read it and transfer data. I can't get a vector of byte arrays to work however. I'm new to C++. </p>\n\n<p>Basically, in case my code is unclear (which it probably is), I want to go from </p>\n\n<p><code>std::vector &lt;int&gt; output={16383,1,8192};</code></p>\n\n<p>to </p>\n\n<p><code>std::vector &lt;byte array&gt; finalbuffer= {{0,63,255},{0,0,1},{0,32,0}};</code></p>\n\n<p>so I can call <code>finalbuffer[0]</code> and it would contain <code>{0,63,255}</code>.</p>\n\n<p>I've tried looking up this problem, but the answers have been in float and not exactly what I need. I tried making an multi-dimensional array, however my initial vector size is not always the same and depends on data being read in.</p>\n\n<pre><code>std::vector &lt;int&gt; output={16383,1,8192};\n\n//the basic code to convert from integer to byte array, I don't know how \n// to convert the int vector to a byte array vector \nuint8 tx_buffer1[3] = { 0,0,0 };\n   for (unsigned i = 0; i &lt; output.size(); ++i) {\n         for (unsigned j = 0; j &lt; 3; ++j) {\n              tx_buffer1[j] = (output[i] &gt;&gt; (2 - j) * 8) &amp; 0xFF;                     \n              cout &lt;&lt; unsigned(tx_buffer1[j]) &lt;&lt; endl;               \n              } \n}\n\n//The above works such that\nint output=16383;\nuint8 tx_buffer1[3] = { 0,0,0 };\nfor (unsigned j = 0; j &lt; 3; ++j) {\n      tx_buffer1[j] = (output &gt;&gt; (2 - j) * 8) &amp; 0xFF;                    \n       cout &lt;&lt; unsigned(tx_buffer1[j]) &lt;&lt; endl;              \n        }   \ntx_buffer[0]=0\ntx_buffer[1]=63\ntx_buffer[2]=255\n// But I need it for multiple integers from the vector.\n</code></pre>\n\n<p>The below works with <code>uint8 finalbuffer= {0-255,0-255,0-255}</code>. <code>handle</code>, <code>&amp;transfercount</code> and <code>options</code> are unimportant. The 3 means it reads bytes, I need it so that the it will read an vector with a byte array in each element</p>\n\n<pre><code>std::vector &lt;byte array&gt; finalbuffer= {{0,63,255},{0,0,1},{0,32,0}};\n\n//finalbuffer[0] would contain {0,63,255}\n\n//finalbuffer[1] would contain {0,0,1}\n\n//...\n\nfor {unsigned i=0; i&lt;finalbuffer.size(); ++i) {\nstatus = SPI_Write(handle, finalbuffer[i], 3, &amp;transferCount, options);\n            if (status != FT_OK)\n                print_and_quit(\"Error while transmitting bytes.\");\n}\n</code></pre>\n\n<p>I can't get my code to work. Is a better way of doing it that isn't a byte array vector?</p>\n"}, {"tags": ["c++", "opencl", "clr"], "comments": [{"owner": {"reputation": 71, "user_id": 8570723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562efe5c46834a365e324766eee713c0?s=128&d=identicon&r=PG&f=1", "display_name": "CopyPasteFan", "link": "https://stackoverflow.com/users/8570723/copypastefan"}, "edited": false, "score": 0, "creation_date": 1564248179, "post_id": 57083457, "comment_id": 100971307, "body": "Why do you call <code>OpenCL::TestMethod</code> with Datatypes ?"}, {"owner": {"reputation": 71, "user_id": 9153239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/leLLq.jpg?s=128&g=1", "display_name": "Nicola", "link": "https://stackoverflow.com/users/9153239/nicola"}, "reply_to_user": {"reputation": 71, "user_id": 8570723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562efe5c46834a365e324766eee713c0?s=128&d=identicon&r=PG&f=1", "display_name": "CopyPasteFan", "link": "https://stackoverflow.com/users/8570723/copypastefan"}, "edited": false, "score": 0, "creation_date": 1564399472, "post_id": 57083457, "comment_id": 101005441, "body": "Because I made a mistake while writing my issue on StackOverflow ^^"}], "owner": {"reputation": 71, "user_id": 9153239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/leLLq.jpg?s=128&g=1", "display_name": "Nicola", "link": "https://stackoverflow.com/users/9153239/nicola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564399433, "creation_date": 1563394372, "last_edit_date": 1564399433, "question_id": 57083457, "link": "https://stackoverflow.com/questions/57083457/linker-issue-when-adding-parameters-to-opencl-project-functions", "title": "Linker issue when adding parameters to OpenCL project functions", "body": "<p>I made an C++ OpenCL project used to process some code on a GPU. I need to access this project in C#, so naturally I am using a C#/CLR project to link both C# and C++ code. </p>\n\n<p>The following code works when no argument is passed and doesn't work when I add some parameters:</p>\n\n<p>Works:</p>\n\n<p>CLI:</p>\n\n<p>ClassLibrary1.cpp:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"ClassLibrary1.h\"\n#include \"../OpenCLProject1/OpenCL.h\"\n\nnamespace ClassLibrary1\n{\n    int Class1::Method(int value1, int value2)\n    {\n        OpenCL::TestMethod();\n        return 0;  \n    }\n}\n</code></pre>\n\n<p>ClassLibrary1.h:</p>\n\n<pre><code>using namespace System;\nnamespace ClassLibrary1 {\n\n    public ref class Class1\n    {\n        public:\n            static int Method(int value1, int value2);\n    };\n}\n</code></pre>\n\n<p>OpenCL:</p>\n\n<p>OpenCL.cpp:</p>\n\n<pre><code>#include \"OpenCL.h\"\nvoid OpenCL::TestMethod()\n{\n\n}\n</code></pre>\n\n<p>OpenCL.h:</p>\n\n<pre><code>class OpenCL\n{\n    public:\n        static void TestMethod();\n};\n</code></pre>\n\n<p>Does not work:</p>\n\n<p>CLI:</p>\n\n<p>ClassLibrary1.cpp:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"ClassLibrary1.h\"\n#include \"../OpenCLProject1/OpenCL.h\"\n\nnamespace ClassLibrary1\n{\n    int Class1::Method(int value1, int value2)\n    {\n        return OpenCL::TestMethod(value1, value2); \n    }\n}\n</code></pre>\n\n<p>ClassLibrary1.h:</p>\n\n<pre><code>using namespace System;\nnamespace ClassLibrary1 {\n\n    public ref class Class1\n    {\n        public:\n            static int Method(int value1, int value2);\n    };\n}\n</code></pre>\n\n<p>OpenCL:</p>\n\n<p>OpenCL.cpp:</p>\n\n<pre><code>#include \"OpenCL.h\"\nint OpenCL::TestMethod(int value1, int value2)\n{\n    return value1 + value2;\n}\n</code></pre>\n\n<p>OpenCL.h:</p>\n\n<pre><code>class OpenCL\n{\n    public:\n        static int TestMethod(int value1, int value2);\n};\n</code></pre>\n\n<p>I get nice LNK2019 and LNK2028 errors:</p>\n\n<pre><code>ClassLibrary1.obj : error LNK2028: jeton non r\u00dasolu (0A000005) \"public: static int __cdecl OpenCL::TestMethod(int,int)\" (?TestMethod@OpenCL@@$$FSAHHH@Z) r\u00daf\u00darenc\u00da dans la fonction \"public: static int __clrcall ClassLibrary1::Class1::Method(int,int)\" (?Method@Class1@ClassLibrary1@@$$FSMHHH@Z)\n</code></pre>\n\n<p>I am using Visual Studio 2015 Pro on Windows 10 b1903.</p>\n"}, {"tags": ["c++", "boost", "boost-gil"], "answers": [{"comments": [{"owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 0, "creation_date": 1565103253, "post_id": 57357007, "comment_id": 101242165, "body": "And now I feel stupid and don&#39;t know why I couldn&#39;t make it work :)"}, {"owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 0, "creation_date": 1565103568, "post_id": 57357007, "comment_id": 101242346, "body": "Why are you using a struct in the &quot;advanced&quot; example? And where does static_generate() come from?"}, {"owner": {"reputation": 33005, "user_id": 151641, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8dbfbbc4e48afe0caa43412a8c03ef07?s=128&d=identicon&r=PG", "display_name": "mloskot", "link": "https://stackoverflow.com/users/151641/mloskot"}, "reply_to_user": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 0, "creation_date": 1565106425, "post_id": 57357007, "comment_id": 101243987, "body": "@MadWombat I have added update to my answer to address your questions."}], "tags": [], "owner": {"reputation": 33005, "user_id": 151641, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8dbfbbc4e48afe0caa43412a8c03ef07?s=128&d=identicon&r=PG", "display_name": "mloskot", "link": "https://stackoverflow.com/users/151641/mloskot"}, "is_accepted": true, "score": 1, "last_activity_date": 1565185113, "last_edit_date": 1565185113, "creation_date": 1565001975, "answer_id": 57357007, "question_id": 57083437, "link": "https://stackoverflow.com/questions/57083437/how-to-set-a-pixel-using-gil-iterators/57357007#57357007", "title": "How to set a pixel using GIL iterators", "body": "<p>Simply, create value of type of <code>rgb8_pixel_t</code> with desired channel values and assign it to the pixel pointed by iterator.</p>\n\n<p>For a simple example, this will fill your image with solid orange:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;boost/gil.hpp&gt;\n#include &lt;boost/gil/extension/io/png.hpp&gt;\nnamespace gil = boost::gil;\n\nint main()\n{\n    gil::rgb8_image_t img(100, 100);\n    auto v = gil::view(img);\n    auto b = v.begin();\n    while (b != v.end())\n    {\n        *b = gil::rgb8_pixel_t{255, 128, 0};\n        b++;\n    }\n    gil::write_view(\"image.png\", gil::view(img), gil::png_tag());\n}\n</code></pre>\n\n<p>For a more complex example, here is how to use a custom generator of pixel channel values:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;boost/gil.hpp&gt;\n#include &lt;boost/gil/extension/io/png.hpp&gt;\n#include &lt;random&gt;\nnamespace gil = boost::gil;\n\ntemplate &lt;typename T&gt;\nstruct random_value\n{\n    static_assert(std::is_integral&lt;T&gt;::value, \"T must be integral type\");\n    static constexpr auto range_min = std::numeric_limits&lt;T&gt;::min();\n    static constexpr auto range_max = std::numeric_limits&lt;T&gt;::max();\n\n    random_value() : rng_(rd_()), uid_(range_min, range_max) {}\n\n    T operator()()\n    {\n        auto value = uid_(rng_);\n        return static_cast&lt;T&gt;(value);\n    }\n\n    std::random_device rd_;\n    std::mt19937 rng_;\n    std::uniform_int_distribution&lt;typename gil::promote_integral&lt;T&gt;::type&gt; uid_;\n};\n\nint main()\n{\n    random_value&lt;channel_type&lt;gil::rgb8_pixel_t&gt;::type&gt; make_channel_value;\n\n    gil::rgb8_image_t img(100, 100);\n    auto v = gil::view(img);\n    auto b = v.begin();\n    while (b != v.end())\n    {\n        // generate random value for each channel of RGB image separately\n        gil::static_generate(*b, [&amp;make_channel_value]() { return make_channel_value(); });\n        b++;\n    }\n    gil::write_view(\"image.png\", gil::view(img), gil::png_tag());\n}\n</code></pre>\n\n<p>UPDATE: The <code>static_generate</code> is one of <a href=\"https://github.com/boostorg/gil/blob/c3e84adbd730205ba601477492eb0fbc9ff2c230/doc/design_guide.rst#algorithms-1\" rel=\"nofollow noreferrer\">GIL algorithms to operate on color bases</a> (e.g. pixels). The <code>struct random_value</code> is a functor class because it encapsulates data elements of the random number generator. I simply copied it form GIL's <a href=\"https://github.com/boostorg/gil/blob/5d69ccf987f5b8020007af993c1713052bcdf48a/test/core/image/test_fixture.hpp\" rel=\"nofollow noreferrer\">test/core/image/test_fixture.hpp</a>, but it does not have to be a class. It can be anything callable, usable as a functor.\nI have updated the code snippets with <code>gil::</code> namespace qualification to make it clearer where things come from. </p>\n"}], "owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 0, "accepted_answer_id": 57357007, "answer_count": 1, "score": 2, "last_activity_date": 1565185113, "creation_date": 1563394271, "question_id": 57083437, "link": "https://stackoverflow.com/questions/57083437/how-to-set-a-pixel-using-gil-iterators", "title": "How to set a pixel using GIL iterators", "body": "<p>Trying to learn a bit of C++ and I am very new at it. My learning project is to generate images using various algorythms (like fractals). I am looking at the boost GIL library, since boost seems to be the most common and established C++ library around. So, I am trying to create an image in memory, iterate over pixels and set the RGB value based on some formula. My current code looks like this</p>\n\n<pre><code>int main() {\n    rgb8_image_t img(IMAGE_W, IMAGE_H);\n    auto b = view(img).begin();\n    while (b != view(img).end()) {\n        /* set the pixel value here */\n        b++;\n    }\n    write_view(\"image.png\", view(img), png_tag());\n    return 0;\n}\n</code></pre>\n\n<p>The iteration seems to work, but I cannot seem to figure out from the GIL docs, how to actually set the pixel in this loop. I could do a nested for loop and just set pixels using x and y coordinates, but I kinda want to use iterators since it seems neater and maybe I can later refactor this to use transform(). How do I proceed from here? How do I set a pixel to some RGB value?</p>\n"}, {"tags": ["c++", "static"], "comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1563394193, "post_id": 57083396, "comment_id": 100689867, "body": "Yes, static variables in local scopes are initialised when the scope is first entered, but not destroyed until the program exits."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1563394380, "post_id": 57083396, "comment_id": 100689947, "body": "Yes. All local variables with static <a href=\"https://en.cppreference.com/w/cpp/language/language_linkage\" rel=\"nofollow noreferrer\">linkage</a> works the same, never mind how many levels down they&#39;re nested."}], "answers": [{"tags": [], "owner": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "is_accepted": false, "score": -1, "last_activity_date": 1563394156, "creation_date": 1563394156, "answer_id": 57083414, "question_id": 57083396, "link": "https://stackoverflow.com/questions/57083396/static-variable-inside-sub-scope/57083414#57083414", "title": "Static variable inside sub-scope", "body": "<p>It can, of course. You can easily see that by trying to compile the code. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": true, "score": 0, "last_activity_date": 1563394244, "creation_date": 1563394244, "answer_id": 57083431, "question_id": 57083396, "link": "https://stackoverflow.com/questions/57083396/static-variable-inside-sub-scope/57083431#57083431", "title": "Static variable inside sub-scope", "body": "<p>It's perfectly valid according to the C++ standard. It may be a questionable thing to do / bad practice in some cases, but it's valid and well defined.</p>\n"}], "owner": {"reputation": 3225, "user_id": 2052436, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0b7ab056e97ed88f05549537c42baa4?s=128&d=identicon&r=PG", "display_name": "user2052436", "link": "https://stackoverflow.com/users/2052436/user2052436"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "closed_date": 1563394181, "accepted_answer_id": 57083431, "answer_count": 2, "score": 0, "last_activity_date": 1563394265, "creation_date": 1563394034, "question_id": 57083396, "link": "https://stackoverflow.com/questions/57083396/static-variable-inside-sub-scope", "closed_reason": "Duplicate", "title": "Static variable inside sub-scope", "body": "<p>Is a code like this erroneous or ok:</p>\n\n<pre><code>void fun()\n{\n    if ( CONDITION )\n    {\n        static MyClass myclass;\n        ...\n    }\n    ...\n}\n</code></pre>\n\n<p>I.e., can static variables be declared inside local scope?</p>\n"}, {"tags": ["c++", "xcode"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1563393758, "post_id": 57083320, "comment_id": 100689677, "body": "<code>Undefined symbols for architecture x86_64: &quot;planet::setrotation(bool)&quot;, referenced from: initialiseworld(planet&amp;) in main.o</code> - seems like you are not linking the object file or library that defines <code>planet::setrotation</code>."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 4, "creation_date": 1563393870, "post_id": 57083320, "comment_id": 100689728, "body": "remove <code>inline</code> from your methods, only use that when defining functions inside your header files"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1563393957, "post_id": 57083320, "comment_id": 100689763, "body": "There&#39;s nothing exotic, it&#39;s the same with every build system, you compile the cpp files <i>separately</i> and then you link them <i>together</i>. None of this has anything to do with <code>#include</code> which is about incorporating header files into compilations. Your problem is that you are not compiling Planet.cpp. How you do that I don&#39;t know since I don&#39;t know Xcode. But somehow or other you have to tell Xcode to compile that file."}], "owner": {"reputation": 11, "user_id": 11760448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d78cc23b8af7b1133d32b1a9c577d591?s=128&d=identicon&r=PG&f=1", "display_name": "JonathanCR", "link": "https://stackoverflow.com/users/11760448/jonathancr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "closed_date": 1563393852, "answer_count": 0, "score": 0, "last_activity_date": 1563393615, "creation_date": 1563393615, "question_id": 57083320, "link": "https://stackoverflow.com/questions/57083320/how-to-compile-different-cpp-and-hpp-files-together-in-xcode-10", "closed_reason": "Duplicate", "title": "How to compile different cpp and hpp files together in Xcode 10", "body": "<p>I'm very new to C++ - obviously - so please be gentle. I'm also aware that I'm probably not using the right terminology here - Xcode is returning a \"linker command failed\" message, though this seems to me to be a compilation failure.</p>\n\n<p>I am starting a project in Xcode 10. I have main.cpp and two files for a class: Planet.hpp and Planet.cpp. My problem is that these files do not seem to be compiling together properly.</p>\n\n<p>They are all in the same project folder. I created Planet.cpp and Planet.hpp together within Xcode as part of this project.</p>\n\n<p>main.cpp and Planet.cpp both contain #include \"Planet.hpp\". But I am getting a buildtime error where it seems they are not compiling together, as functions defined in Planet.cpp are not recognised when used in main.cpp.</p>\n\n<p>If I transfer the code in Planet.hpp and Planet.cpp into main.cpp and delete the others, so the whole thing is in a single file, it works fine. So there's nothing wrong with the code itself. It's just getting it to work across these multiple files that's the issue.</p>\n\n<p>Here are my three files (obviously stripped down as much as I could to demonstrate the problem).</p>\n\n<p>main.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nusing namespace std;\n\n#include \"Planet.hpp\"\n\nvoid initialiseworld(planet &amp;world);\n\nint main()\n{\n    planet *world=new planet;\n\n    initialiseworld(*world);\n\n    cout &lt;&lt; \"World initialised!\" &lt;&lt; endl;\n\n    delete world;\n\n    return(0);\n}\n\nvoid initialiseworld(planet &amp;world)\n{\n    bool rotation=1;\n\n    world.setrotation(rotation);\n}\n</code></pre>\n\n<p>Planet.hpp:</p>\n\n<pre><code>#ifndef Planet_hpp\n#define Planet_hpp\n\n#include &lt;stdio.h&gt;\n#include &lt;vector&gt;\n\nclass planet\n{\npublic:\n\n    planet(); // constructor\n    ~planet();  // destructor\n\n    inline bool rotation() const;\n    inline void setrotation(bool amount);\n\nprivate:\n\n    bool itsrotation; \n\n};\n</code></pre>\n\n<p>Planet.cpp:</p>\n\n<pre><code>#include \"Planet.hpp\"\n\nplanet::planet() //constructor\n{\n}\n\nplanet::~planet()\n{\n}\n\ninline bool planet::rotation() const {return itsrotation;}\ninline void planet::setrotation(bool amount) {itsrotation=amount;}\n</code></pre>\n\n<p>When I try to build and run this, I get \"linker command failed with exit code 1\". The log tells me:</p>\n\n<p>Undefined symbols for architecture x86_64:\n  \"planet::setrotation(bool)\", referenced from:\n      initialiseworld(planet&amp;) in main.o</p>\n\n<p>It looks like it can't understand the call to planet::setrotation in the initialiseplanet function. But why not? That member function is declared in Planet.hpp and defined in Planet.cpp. Moreover, if I remove the initialiseplanet function entirely from main.cpp, and remove the call to it in main{} - so that the program does nothing but create the object and then print the message - that works. So it looks like it <em>does</em> understand the class there. It's only calling the member function that it doesn't understand. How can this be? If it thinks that the member function is undefined, how does it understand the use of the class at all?</p>\n\n<p>What's more, if I copy the class declaration/definition over to main.cpp, but don't delete it from the others, I get errors about a \"duplicate symbol\", referring to the member function. So it looks like either it can't see the definitions at all, or it sees them twice. How do I get it to see them just once?</p>\n\n<p>Is there some exotic procedure in Xcode for compiling different source files together - in addition to using #include as I have done here - that I'm not doing? I've searched but simply cannot find any clear instructions on this.</p>\n\n<p>Thank you for any help anyone can give!</p>\n"}, {"tags": ["c++", "oop", "membership", "aabb", "ray"], "answers": [{"tags": [], "owner": {"reputation": 846, "user_id": 7511460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cz0P7.png?s=128&g=1", "display_name": "Adrien Givry", "link": "https://stackoverflow.com/users/7511460/adrien-givry"}, "is_accepted": true, "score": 1, "last_activity_date": 1563394937, "creation_date": 1563394937, "answer_id": 57083592, "question_id": 57083313, "link": "https://stackoverflow.com/questions/57083313/class-membership-of-ray-aabb-intersection-function/57083592#57083592", "title": "Class membership of Ray-AABB intersection function", "body": "<p>I would say: <strong>neither</strong>.</p>\n\n<ul>\n<li><strong>Ray</strong>: Structure (Members: <em>Start</em>, <em>End</em>)</li>\n<li><strong>AABB</strong>: Structure (Members: <em>Position</em>, <em>Size</em>).</li>\n</ul>\n\n<p><strong>Ray-AABB intersection</strong> method could be in a <code>Physics</code> or <code>Intersection</code> class (Depends on your actual context) as static methods (Or functions in a namespace, depends on your coding convention).</p>\n\n<p>Object oriented is fine, but it doesn't mean that everything you create should be a class.</p>\n\n<p>Data oriented is a very good approach (CPU friendly with less <a href=\"https://en.wikipedia.org/wiki/CPU_cache#Cache_miss\" rel=\"nofollow noreferrer\">cache misses</a>).</p>\n\n<p><strong>EDIT:</strong> A good coding rule is to think your things independently, meaning that the <code>AABB</code> implementation shouldn't be dependent on the <code>Ray</code> implementation.</p>\n"}], "owner": {"reputation": 364, "user_id": 4735803, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/803955276325816/picture?type=large", "display_name": "Micha\u0142 Kaczorowski", "link": "https://stackoverflow.com/users/4735803/micha%c5%82-kaczorowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 57083592, "answer_count": 1, "score": 0, "last_activity_date": 1563394937, "creation_date": 1563393583, "question_id": 57083313, "link": "https://stackoverflow.com/questions/57083313/class-membership-of-ray-aabb-intersection-function", "title": "Class membership of Ray-AABB intersection function", "body": "<p>I'm writing code for mouse picking in 3D space. So far I've made Ray and AABB classes. What I need is a function for Ray-AABB intersecting. I know how to write it and make it work, my question is which class should define said funcion? Should it be a member of Ray or AABB, both, neither? What are the best practices for object oriented approach?</p>\n\n<p>For me it makes the most sense to implement that function as a member of \"engine\" class, more like a procedure rather than a function. However I want my code to be truly object oriented.</p>\n"}, {"tags": ["c++", "clang"], "comments": [{"owner": {"reputation": 30138, "user_id": 71141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1f5d1bd28627ad2f5a9b47ef63a2dc8?s=128&d=identicon&r=PG", "display_name": "Etienne de Martel", "link": "https://stackoverflow.com/users/71141/etienne-de-martel"}, "edited": false, "score": 5, "creation_date": 1563392924, "post_id": 57083118, "comment_id": 100689280, "body": "Clang&#39;s source used to be stored on SVN before they migrated everything to Git. My guess is that it&#39;s a weird way of saying it&#39;s available on their master, but not yet in a release?"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "reply_to_user": {"reputation": 30138, "user_id": 71141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1f5d1bd28627ad2f5a9b47ef63a2dc8?s=128&d=identicon&r=PG", "display_name": "Etienne de Martel", "link": "https://stackoverflow.com/users/71141/etienne-de-martel"}, "edited": false, "score": 2, "creation_date": 1563393287, "post_id": 57083118, "comment_id": 100689456, "body": "@EtiennedeMartel to be fair the <a href=\"https://llvm.org/GitHubMigrationStatus.html\" rel=\"nofollow noreferrer\">git migration isn&#39;t complete</a> so referring to stuff as being in SVN isn&#39;t too obscure"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 1, "creation_date": 1563393353, "post_id": 57083118, "comment_id": 100689495, "body": "yes, &quot;SVN&quot; means the feature is complete in SVN but hasn&#39;t made it into a release yet"}], "answers": [{"tags": [], "owner": {"reputation": 15754, "user_id": 9835872, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PN0Lq.jpg?s=128&g=1", "display_name": "ruohola", "link": "https://stackoverflow.com/users/9835872/ruohola"}, "is_accepted": true, "score": 0, "last_activity_date": 1564163931, "creation_date": 1564163931, "answer_id": 57225003, "question_id": 57083118, "link": "https://stackoverflow.com/questions/57083118/what-does-svn-mean-in-the-c-support-in-clang-page/57225003#57225003", "title": "What does SVN mean in the &quot;C++ support in Clang&quot; page?", "body": "<p>It seems to be the general consensus that \"SVN\" means that the feature is complete in Clang's SVN version control, but hasn't made it into a release just yet.</p>\n"}], "owner": {"reputation": 15754, "user_id": 9835872, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PN0Lq.jpg?s=128&g=1", "display_name": "ruohola", "link": "https://stackoverflow.com/users/9835872/ruohola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 57225003, "answer_count": 1, "score": 2, "last_activity_date": 1564163931, "creation_date": 1563392660, "last_edit_date": 1563394002, "question_id": 57083118, "link": "https://stackoverflow.com/questions/57083118/what-does-svn-mean-in-the-c-support-in-clang-page", "title": "What does SVN mean in the &quot;C++ support in Clang&quot; page?", "body": "<p>On the site <a href=\"https://clang.llvm.org/cxx_status.html\" rel=\"nofollow noreferrer\">C++ Support in Clang</a>, the column <em>Available in Clang?</em> has the value of <code>SVN</code> in many rows of the <em>C++2a implementation status</em> table. What does this mean? I tried to search Google with: <code>site:clang.llvm.org svn</code>, but couldn't find anything but few references to the Subversion version control system. Does this relate to that?</p>\n\n<p><a href=\"https://i.stack.imgur.com/Hv0Ui.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Hv0Ui.png\" alt=\"Image of the page\"></a> </p>\n"}, {"tags": ["c++", "stack", "postfix-notation"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1563392064, "post_id": 57082970, "comment_id": 100688909, "body": "Voting to close as a typo.  You need to pass by reference in order for the function to modify what is passed to it. <code>int push(int tos, int x)</code> -&gt; <code>int push(int&amp; tos, int x)</code> and <code>int pop(int tos)</code> -&gt; <code>int pop(int&amp; tos)</code>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1563392067, "post_id": 57082970, "comment_id": 100688911, "body": "This seems like an excellent time to <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">learn how to debug your programs</a>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1563392070, "post_id": 57082970, "comment_id": 100688913, "body": "The indentation here is like a roller-coaster. Can you try and straighten that out so we can follow what you&#39;re trying to do?"}, {"owner": {"reputation": 720, "user_id": 5473659, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HlSFtUlEWUg/AAAAAAAAAAI/AAAAAAAAABE/IDscIChoyC0/photo.jpg?sz=128", "display_name": "Rick Pat", "link": "https://stackoverflow.com/users/5473659/rick-pat"}, "edited": false, "score": 2, "creation_date": 1563392593, "post_id": 57082970, "comment_id": 100689129, "body": "Turn on warnings, you have an uninitialized variable and a function that does not return a value."}], "answers": [{"tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": false, "score": 0, "last_activity_date": 1563392878, "last_edit_date": 1563392878, "creation_date": 1563392447, "answer_id": 57083079, "question_id": 57082970, "link": "https://stackoverflow.com/questions/57082970/postfix-evaluation-why-is-the-push-function-not-updating-the-top-of-stack-vari/57083079#57083079", "title": "postfix evaluation , why is the push function not updating the top of stack variable?", "body": "<p>The basic problem is that you have two variables called <code>tos</code>.</p>\n\n<p>First is this global variable.</p>\n\n<pre><code>int tos=-1;\nint main()\n{\n</code></pre>\n\n<p>And then you have another variable called <code>tos</code> in the <code>push</code> function</p>\n\n<pre><code>int push(int tos, int x)\n{ \n</code></pre>\n\n<p>At the moment your code changes the local variable, but does not change the global variable, hence the confusion. Having local and global variables with the same name is asking for trouble. In this case I recommend that you remove the local variable. The <code>st</code> array is manipulated as a global, so it seems logical for the <code>tos</code> variable to be the same.</p>\n\n<pre><code>int push(int x)\n{ \n</code></pre>\n\n<p>You will have to change each call to push as well</p>\n\n<pre><code>                       push(tos,r);\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>                       push(r);\n</code></pre>\n\n<p>etc. etc.</p>\n\n<p>Then you need to make exactly the same change to the <code>pop</code> function which has exactly the same problem.</p>\n"}, {"tags": [], "owner": {"reputation": 5867, "user_id": 9125195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75fc90d1f6de6ff28c739b85bdb82f4c?s=128&d=identicon&r=PG&f=1", "display_name": "Sid S", "link": "https://stackoverflow.com/users/9125195/sid-s"}, "is_accepted": true, "score": 0, "last_activity_date": 1563392875, "creation_date": 1563392875, "answer_id": 57083153, "question_id": 57082970, "link": "https://stackoverflow.com/questions/57082970/postfix-evaluation-why-is-the-push-function-not-updating-the-top-of-stack-vari/57083153#57083153", "title": "postfix evaluation , why is the push function not updating the top of stack variable?", "body": "<p>Your <code>push()</code> and <code>pop()</code> functions receives <code>tos</code> by value, so any changes they make to <code>tos</code> are not reflected outside the functions.</p>\n\n<p>One solution is to pass <code>tos</code> by reference, e.g. </p>\n\n<pre><code>int push(int &amp;tos, int x)\n{\n    // Any changes to tos are now reflected in the variable passed in.\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11799405, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-97FCIW3E5Zg/AAAAAAAAAAI/AAAAAAAAAAs/eye3ExW7alc/photo.jpg?sz=128", "display_name": "robinD1a6l0", "link": "https://stackoverflow.com/users/11799405/robind1a6l0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 57083153, "answer_count": 2, "score": 1, "last_activity_date": 1563395623, "creation_date": 1563391953, "last_edit_date": 1563395623, "question_id": 57082970, "link": "https://stackoverflow.com/questions/57082970/postfix-evaluation-why-is-the-push-function-not-updating-the-top-of-stack-vari", "title": "postfix evaluation , why is the push function not updating the top of stack variable?", "body": "<p>when giving input \"53+\",it is pushing 5 and updates tos to 0 from '-1' but when the function is invoked for the second time, it pushes 3 but tos is still 0 , not 1. please help.</p>\n\n<pre><code>#include&lt;iostream&gt;\n\nusing namespace std;\n\nint push(int tos, int x);\nint pop(int tos);\n\nint st[50];\nint tos=-1;\n\nint main()\n{\n    char str[30];\n    int r,k,v1,v2,i;\n\n    cin&gt;&gt;str;\n    for(i=0;str[i]!='\\0';i++)\n    {\n        if(str[i]!='*'&amp;&amp;str[i]!='-'&amp;&amp;str[i]!='+'&amp;&amp;str[i]!='/')\n        {\n            k=str[i]-'0';\n            push(tos,k);\n        }\n        else\n        {\n            if(tos==-1||tos==0) \n                cout&lt;&lt;\"enter correct format\";\n            else\n            {\n                v1=pop(tos);\n                v2=pop(tos);\n                switch(str[i])\n                {\n                case '*': r=v1*v2;\n                    push(tos,r);\n                    break;\n                case '+': r=v1+v2;\n                    push(tos,r);\n                    break;\n                case '-': r=v1-v2;\n                    push(tos,r);\n                    break;\n                case '/': r=v1/v2;\n                    push(tos,r);\n                    break;\n                default: \n                    cout&lt;&lt;\"invalid\";\n                }\n            }\n        }\n    }\n    r=pop(tos);\n    cout&lt;&lt;endl&lt;&lt;r;\n    return 0;\n}\nint push(int tos, int x)\n{\n    if (tos==50-1)\n        cout&lt;&lt;\"overflow\"&lt;&lt;endl;\n    else\n    {\n        tos++;\n        st[tos]=x;\n        cout&lt;&lt;endl&lt;&lt;\"pushed\"&lt;&lt;tos&lt;&lt;st[tos];\n    }\n}\n\nint pop(int tos)\n{ \n    int z;\n    if(tos==-1)\n        cout&lt;&lt;\"underflow\";\n    else\n    {\n        z=st[tos];\n        tos-=1;\n    }\n    return z;\n}\n</code></pre>\n\n<p>when giving input \"53+\",it is pushing 5 and updates tos to 0 from '-1' but when the function is invoked for the second time, it pushes 3 but tos is still 0 , not 1.</p>\n"}, {"tags": ["c#", "c++", "macos", "xamarin"], "comments": [{"owner": {"reputation": 67998, "user_id": 4984832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/be4bc3e019d1082f7945b8db7ab313c9?s=128&d=identicon&r=PG", "display_name": "SushiHangover", "link": "https://stackoverflow.com/users/4984832/sushihangover"}, "edited": false, "score": 1, "creation_date": 1563401909, "post_id": 57082787, "comment_id": 100692452, "body": "<a href=\"https://docs.microsoft.com/en-us/xamarin/ios/platform/native-interop#accessing-c-dylibs\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/xamarin/ios/platform/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 11799317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d3ee6abf921ccc145261b7d79bde366?s=128&d=identicon&r=PG&f=1", "display_name": "J R", "link": "https://stackoverflow.com/users/11799317/j-r"}, "edited": false, "score": 0, "creation_date": 1563438749, "post_id": 57083659, "comment_id": 100702581, "body": "Thanks for your answer Mateus! Unfortunately this does&#39;t work because Xamarin doesn&#39;t allow to choose my &quot;.dylib&quot; library like this. Maybe there are different ways?"}, {"owner": {"reputation": 616, "user_id": 9629238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGSvY.jpg?s=128&g=1", "display_name": "Mateus Wolkmer", "link": "https://stackoverflow.com/users/9629238/mateus-wolkmer"}, "reply_to_user": {"reputation": 19, "user_id": 11799317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d3ee6abf921ccc145261b7d79bde366?s=128&d=identicon&r=PG&f=1", "display_name": "J R", "link": "https://stackoverflow.com/users/11799317/j-r"}, "edited": false, "score": 0, "creation_date": 1563453939, "post_id": 57083659, "comment_id": 100710933, "body": "The .dylib stands for &quot;dynamic library&quot;, which is the same concept to Windows .dll. Was this file generated by you? If so, you could probably recompile it as a .dll so you could import it in Visual Studio."}, {"owner": {"reputation": 616, "user_id": 9629238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGSvY.jpg?s=128&g=1", "display_name": "Mateus Wolkmer", "link": "https://stackoverflow.com/users/9629238/mateus-wolkmer"}, "reply_to_user": {"reputation": 19, "user_id": 11799317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d3ee6abf921ccc145261b7d79bde366?s=128&d=identicon&r=PG&f=1", "display_name": "J R", "link": "https://stackoverflow.com/users/11799317/j-r"}, "edited": false, "score": 0, "creation_date": 1563454755, "post_id": 57083659, "comment_id": 100711427, "body": "I just saw you said you compiled it in XCode. If you chose to take this path, you will need to cross compile your program from Mac format to Windows format. That is possible but there should be an easier alternative. My guess would be that if you&#39;re running Visual Studio on a Mac, it would just accept a &quot;.dylib&quot; file as it accepts &quot;.dll&quot; on Windows."}], "tags": [], "owner": {"reputation": 616, "user_id": 9629238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGSvY.jpg?s=128&g=1", "display_name": "Mateus Wolkmer", "link": "https://stackoverflow.com/users/9629238/mateus-wolkmer"}, "is_accepted": false, "score": -1, "last_activity_date": 1563395310, "creation_date": 1563395310, "answer_id": 57083659, "question_id": 57082787, "link": "https://stackoverflow.com/questions/57082787/how-to-use-dllimport-in-xamarin/57083659#57083659", "title": "How to use DLLIMPORT in Xamarin?", "body": "<p>The best way to use methods from a DLL dependency is by adding it to the project's dependencies. To do that, do the following:</p>\n\n<ol>\n<li>Right click on the namespace you want to add the dependency to, then go to Add -> \"Reference...\";</li>\n<li>The Reference Manager will open. Click on \"Browse...\" and find your DLL file.</li>\n<li>Click \"OK\" and your DLL will be added as a dependency to your project.</li>\n</ol>\n\n<p>To use its methods inside a C# file, use the \"using\" syntax on top of the file, for example: <code>using Xamarin.Forms.GoogleMaps.Clustering;</code>. After that, code compiled inside the DLL will be available for you to use in the file.</p>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 11799317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d3ee6abf921ccc145261b7d79bde366?s=128&d=identicon&r=PG&f=1", "display_name": "J R", "link": "https://stackoverflow.com/users/11799317/j-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1563449118, "creation_date": 1563449118, "answer_id": 57093359, "question_id": 57082787, "link": "https://stackoverflow.com/questions/57082787/how-to-use-dllimport-in-xamarin/57093359#57093359", "title": "How to use DLLIMPORT in Xamarin?", "body": "<p>I think I understood what was wrong.\nThe way I reference the library in c# is OK. The problem is that I build library incorrectly. Let me explain.</p>\n\n<p>To create the library I use XCode Library Project for Mac OS (framework : None (Plain C/C++ Library)):</p>\n\n<p><a href=\"https://i.stack.imgur.com/f05XM.jpg\" rel=\"nofollow noreferrer\">press here to view image</a></p>\n\n<p>That means my \"Architectures\" panel in the \"Build Settings\" tab by default looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/WydWV.png\" rel=\"nofollow noreferrer\">press here to view image</a></p>\n\n<p>Pay attention to the highlighted properties. They are important.\nSo if I leave it as it is and just press cmd+B (build) I WILL get a library (.dylib file). But if I go to the terminal and inspect this library with <em>lipo</em> I will get:</p>\n\n<pre><code>lipo -info path/to/the/library.dylib\nNon-fat file: path/to/the/library.dylib is architecture: x86_64\n</code></pre>\n\n<p>But if I do the same to the /usr/lib/libSystem.B.dylib library (or any other system .dylib library) the output will be different:</p>\n\n<pre><code>lipo -info /usr/lib/libSystem.B.dylib\nArchitectures in the fat file: /usr/lib/libSystem.B.dylib are: x86_64 i386 \n</code></pre>\n\n<p>It's easy to guess that I want to see the same when I inspect my own library. To fix it go back to the \"Architectures\" panel and do following:</p>\n\n<p>1) Check your \"Valid architectures\" property. Its value must be \"i386 x86_64\" (without quotes).</p>\n\n<p>2) For \"Build Active Architectures Only\" property choose \"No\". By now your \"Architectures\" panel must look like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/5UvL1.jpg\" rel=\"nofollow noreferrer\">press here to view image</a></p>\n\n<p>3) Press on the \"Architectures\" property. Choose \"Other...\" as value and in the opened window type:</p>\n\n<pre><code>${ARCHS_STANDARD}\nx86_64\ni386\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/HgtBu.jpg\" rel=\"nofollow noreferrer\">press here to view image</a></p>\n\n<p>As a result your \"Architectures\" panel must look like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/BkXNH.jpg\" rel=\"nofollow noreferrer\">press here to view image</a></p>\n\n<p>That's all! Now you can build your library! If you inspect it with <em>lipo</em> now you will get:</p>\n\n<pre><code>lipo -info /path/to/your/library.dylib\nArchitectures in the fat file: /path/to/your/library.dylib are: x86_64 i386\n</code></pre>\n\n<p>I'm not sure what the difference but oddly it solves the problem. Now I can call my c++ functions from c#.</p>\n\n<p>Does anyone know what happens?</p>\n"}], "owner": {"reputation": 19, "user_id": 11799317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d3ee6abf921ccc145261b7d79bde366?s=128&d=identicon&r=PG&f=1", "display_name": "J R", "link": "https://stackoverflow.com/users/11799317/j-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 915, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1563449118, "creation_date": 1563391067, "question_id": 57082787, "link": "https://stackoverflow.com/questions/57082787/how-to-use-dllimport-in-xamarin", "title": "How to use DLLIMPORT in Xamarin?", "body": "<p>I have a console project for mac in Xamarin and want to use c++ functions from external library. But unfortunately when I try to use DLLIMPORT like this (c#):</p>\n\n<pre><code>[DllImport('path to the library')]\nstatic extern double sum(double x, double y);\n\npublic static void Main(string[] args)\n{\n   Console.WriteLine(sum(2,2));\n}\n</code></pre>\n\n<p>I get <em>System.DLLNotFoundException</em>. However it works with system libraries:</p>\n\n<pre><code>[DllImport(\"/usr/lib/libSystem.dylib\")]\nstatic extern IntPtr dlopen(string path, int mode);\n</code></pre>\n\n<p><strong>Here is all my code</strong>: </p>\n\n<p>1) <em>main.cpp</em> (from lib.dylib library):</p>\n\n<pre><code>extern \"C\" double sum(double x, double y) {\n   return x + y;\n}\n</code></pre>\n\n<p>2) <em>Program.cs</em> (from Xamarin C# Project):</p>\n\n<pre><code>using System;\nusing System.Runtime.InteropServices;\n\nnamespace Project {\n   class MainClass {\n      [DLLImport(\"/full/path/to/lib.dylib\")]\n      static extern double sum(double x, double y);\n\n      public static void Main(string[] args) {\n         Console.WriteLine(sum(2,2));\n         Console.ReadKey();\n      }\n   }\n}\n</code></pre>\n\n<p>I use XCode to create the library (.dylib) but not sure if I do everything right. </p>\n"}, {"tags": ["c++", "unity3d", "opengl", "textures"], "answers": [{"tags": [], "owner": {"reputation": 9788, "user_id": 507043, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/kPUHE.png?s=128&g=1", "display_name": "Michael IV", "link": "https://stackoverflow.com/users/507043/michael-iv"}, "is_accepted": true, "score": 0, "last_activity_date": 1563576105, "creation_date": 1563576105, "answer_id": 57120312, "question_id": 57082257, "link": "https://stackoverflow.com/questions/57082257/how-to-get-unity-context-into-opengl-window/57120312#57120312", "title": "How to Get Unity Context into OpenGL Window", "body": "<p>OpenGL <a href=\"https://www.khronos.org/opengl/wiki/OpenGL_Context\" rel=\"nofollow noreferrer\">context</a> cannot be queried like OpenGL state related objects via some glGet* API.Context is not part of OpenGL API,it is a part of the system you're running on and it exists to allow you maintaining of OpenGL state and issue command to the driver. You must access a system specific handle that points to the context via system specific API.On Windows (<a href=\"https://docs.microsoft.com/en-us/windows/win32/api/wingdi/nf-wingdi-wglgetcurrentcontext\" rel=\"nofollow noreferrer\">WinGDI</a>)that's would be</p>\n\n<pre><code>HGLRC wglGetCurrentContext();\n</code></pre>\n\n<p>On linux see related <a href=\"https://www.khronos.org/registry/OpenGL/specs/gl/glx1.4.pdf\" rel=\"nofollow noreferrer\">GLX API</a>. You need to find functions to access <code>GLXContext</code></p>\n\n<p>I did it once in Unity3D (framebuffer readout plugin). But it used Unity's OpenGL or DirectX context to issue API commands only.</p>\n\n<p>Also,I am not sure you can 'inject' or share a context for a window that doesn't own that context. You see, when you (or Unity) init display it creates context and related GL resources,like the default FBO with all required attachments on its own,and that FBO is mapped to some system resource(device) which takes actually care of presenting those pixels on the screen. Therefore, I am not sure display context can be moved from Window to Window in the same manner that a context can be shared between threads.(But I can be wrong on this one) </p>\n\n<p>You can create your plugin Window on some thread,with its own GL context. Then create and share a texture object between those two. Remember, GL textures are shareable. If you copy contents from Unity's screen FBO into that texture,then you can copy it into your plugin's screen FBO from that texture as well.\nBtw,look at <a href=\"https://stackoverflow.com/questions/29936567/whats-the-best-way-to-share-a-texture-image-between-two-context-with-out-contex\">this SO question</a> .You can see there vendor specific GL extensions which allow copying data into texture from different contexts without requiring shared context,share lists setup.</p>\n\n<p>Regarding why GLFW returns you <code>nullptr</code>. In your example you use GLFW library.</p>\n\n<pre><code> glfwGetCurrentContext()\n</code></pre>\n\n<p>But if you look at the source code,you see this:</p>\n\n<pre><code> GLFWAPI GLFWwindow* glfwGetCurrentContext(void)\n {\n   _GLFW_REQUIRE_INIT_OR_RETURN(NULL);\n   return _glfwPlatformGetTls(&amp;_glfw.contextSlot);\n }\n</code></pre>\n\n<p>Which probably means that it retrieves a pointer to GLFWWindow from its own cache and not from the system.And if you didn't create that context via GLFW,you won't get any valid pointer. So try working directly with your system related API as explained above.</p>\n"}], "owner": {"reputation": 303, "user_id": 11621229, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5_z9Nj5zyI0/AAAAAAAAAAI/AAAAAAAAAAg/IVUeON-LWfQ/photo.jpg?sz=128", "display_name": "steph", "link": "https://stackoverflow.com/users/11621229/steph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 680, "favorite_count": 0, "accepted_answer_id": 57120312, "answer_count": 1, "score": 3, "last_activity_date": 1563576105, "creation_date": 1563388462, "question_id": 57082257, "link": "https://stackoverflow.com/questions/57082257/how-to-get-unity-context-into-opengl-window", "title": "How to Get Unity Context into OpenGL Window", "body": "<p>I want to get the unity context into opengl so I can display a unity render texture in an opengl glfw window. I tried using<br>\n<code>oldContext = glfwGetCurrentContext();</code> but the value of oldContext is just null. </p>\n\n<p>I am trying to use the low-level native unity plugin and Texture.GetNativeTexturePtr</p>\n\n<p>Any help would be greatly appreciated!</p>\n"}, {"tags": ["c++", "machine-learning", "deep-learning", "caffe", "backpropagation"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10020458, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BDRuImY6F9A/AAAAAAAAAAI/AAAAAAAAGRo/9fnPifJpaLc/photo.jpg?sz=128", "display_name": "XIWEN LI", "link": "https://stackoverflow.com/users/10020458/xiwen-li"}, "edited": false, "score": 0, "creation_date": 1564166757, "post_id": 57087714, "comment_id": 100955430, "body": "Thank you for your explanation. And I also figured out why caffe does not execute backward"}], "tags": [], "owner": {"reputation": 92303, "user_id": 1714410, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a254f486ab076ab1af26162a975e90f9?s=128&d=identicon&r=PG", "display_name": "Shai", "link": "https://stackoverflow.com/users/1714410/shai"}, "is_accepted": true, "score": 0, "last_activity_date": 1563428027, "creation_date": 1563428027, "answer_id": 57087714, "question_id": 57082177, "link": "https://stackoverflow.com/questions/57082177/i-wrote-a-custom-caffe-layer-but-during-training-it-says-layer-does-not-need/57087714#57087714", "title": "I wrote a custom caffe layer. But during training it says &quot;**layer does not need backward computation&quot;", "body": "<p>You can force caffe to backprop by setting</p>\n\n<pre><code>force_backward: true\n</code></pre>\n\n<p>At the beginning of your net.prototxt file. The default behavior of caffe is to compute backwards only when it is certain the gradients are required. Sometimes (especially when there are custom layers) this heuristic is not accurate. By setting <code>force_backward: true</code> caffe will compute gradients for all layers in the model (whenever possible).<br>\nRead more at the comments in <a href=\"https://github.com/BVLC/caffe/blob/master/src/caffe/proto/caffe.proto#L77-L80\" rel=\"nofollow noreferrer\"><code>caffe.proto</code></a>.</p>\n\n<p>Regarding <a href=\"https://github.com/BVLC/caffe/blob/master/src/caffe/proto/caffe.proto#L315-L316\" rel=\"nofollow noreferrer\"><code>lr_mult</code></a>: it is part of the <code>param</code> section of the layer - this section is defined for all layers in <a href=\"https://github.com/BVLC/caffe/blob/master/src/caffe/proto/caffe.proto#L340-L342\" rel=\"nofollow noreferrer\"><code>caffe.proto</code></a>. Thus, you only need to add this clause to your layer definition in the net.prototxt:</p>\n\n<pre><code>force_backward: true   # cannot hurt...\nlayer {\n  name: \"my_layer\"\n  type: \"MyLayerType\"\n  bottom: \"input\"\n  top: \"output\"\n  my_layer_param { ... }\n  param: { lr_mult: 1 }  # there you go\n}\n</code></pre>\n\n<p>You can see more information <a href=\"https://stackoverflow.com/q/40540106/1714410\">here</a>.</p>\n"}], "owner": {"reputation": 13, "user_id": 10020458, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BDRuImY6F9A/AAAAAAAAAAI/AAAAAAAAGRo/9fnPifJpaLc/photo.jpg?sz=128", "display_name": "XIWEN LI", "link": "https://stackoverflow.com/users/10020458/xiwen-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 57087714, "answer_count": 1, "score": 1, "last_activity_date": 1563428132, "creation_date": 1563388009, "last_edit_date": 1563428132, "question_id": 57082177, "link": "https://stackoverflow.com/questions/57082177/i-wrote-a-custom-caffe-layer-but-during-training-it-says-layer-does-not-need", "title": "I wrote a custom caffe layer. But during training it says &quot;**layer does not need backward computation&quot;", "body": "<p>I defined a new <code>caffe</code> layer, including <code>new_layer.cpp</code>, <code>new_layer.cu</code>, <code>new_layer.hpp</code> and related params in <code>caffe.proto</code>. When I train the model, it says:</p>\n\n<blockquote>\n  <p>new_layer does not need backward computation</p>\n</blockquote>\n\n<p>However, I do defined <code>backward_cpu</code> and <code>backward_gpu</code>. I was trying to set <code>lr_mult</code> to be not 0. But where should I define <code>lr_mult</code> for a custom layer? Except this, is there any other way to make my custom layer execute backward propogation?</p>\n"}, {"tags": ["c++", "gcc", "cmake", "clang", "clang-tidy"], "comments": [{"owner": {"reputation": 1811, "user_id": 9874699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98fc8f56a25213a06ee6b13de9e12b76?s=128&d=identicon&r=PG&f=1", "display_name": "pablo285", "link": "https://stackoverflow.com/users/9874699/pablo285"}, "edited": false, "score": 0, "creation_date": 1563539284, "post_id": 57082124, "comment_id": 100743782, "body": "Would be really helpful if you added the errors you are getting. Also have you tried compiling the code with clang? Clang-tidy uses the same frontend for generating its AST so if you can compile with clang you should have no problems with clang-tidy."}, {"owner": {"reputation": 111, "user_id": 11799088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08ff1a3a0b488508ceec2950189d92be?s=128&d=identicon&r=PG&f=1", "display_name": "cereagni", "link": "https://stackoverflow.com/users/11799088/cereagni"}, "reply_to_user": {"reputation": 1811, "user_id": 9874699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98fc8f56a25213a06ee6b13de9e12b76?s=128&d=identicon&r=PG&f=1", "display_name": "pablo285", "link": "https://stackoverflow.com/users/9874699/pablo285"}, "edited": false, "score": 0, "creation_date": 1563543584, "post_id": 57082124, "comment_id": 100746148, "body": "As this is the weekend, I&#39;ll try to post the errors when back at work.  In the meantime - I don&#39;t compile the code with Clang, but with a custom GCC toolchain. It probably won&#39;t compile with clang because the CMakeLists.txt files add GCC specific compilation flags.  I probably could use <code>$&lt;CMAKE_C&#47;CXX_COMPILER_ID&gt;</code> to check the compiler, but when using the <code>CMAKE_CXX_CLANG_TIDY</code> variable, the flags are taken according to the compiler, to my understanding"}, {"owner": {"reputation": 422, "user_id": 1877420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3Rjue.jpg?s=128&g=1", "display_name": "shycha", "link": "https://stackoverflow.com/users/1877420/shycha"}, "edited": false, "score": 0, "creation_date": 1564089881, "post_id": 57082124, "comment_id": 100926951, "body": "@cereagni I would really like to see how to integrate clang-tidy with cmake when cross-compiling with GCC. Does it compile when you use <code>set(CMAKE_CXX_CLANG_TIDY &quot;clang-tidy;--enable-check-profile;--checks=-*,modernize-use&zwnj;&#8203;-auto&quot;)</code>? This should turn off all checks, leaving only <code>clang-diagnostic-*</code> and <code>modernize-use-auto</code>. (Somehow disabling all check doesn&#39;t work...)"}, {"owner": {"reputation": 15897, "user_id": 11722, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b0124a12d060a036500e83ec44972492?s=128&d=identicon&r=PG", "display_name": "Zitrax", "link": "https://stackoverflow.com/users/11722/zitrax"}, "edited": false, "score": 0, "creation_date": 1564656428, "post_id": 57082124, "comment_id": 101107003, "body": "I have the same problem, I see there is an -extra-arg but what I want is something like a -ignore-arg to remove a flag passed to gcc that is not supported by clang/clang-tidy."}], "answers": [{"tags": [], "owner": {"reputation": 422, "user_id": 1877420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3Rjue.jpg?s=128&g=1", "display_name": "shycha", "link": "https://stackoverflow.com/users/1877420/shycha"}, "is_accepted": false, "score": 6, "last_activity_date": 1579798162, "last_edit_date": 1579798162, "creation_date": 1579797822, "answer_id": 59883391, "question_id": 57082124, "link": "https://stackoverflow.com/questions/57082124/how-to-integrate-clang-tidy-to-cmake-and-gcc/59883391#59883391", "title": "How to integrate clang-tidy to CMake and GCC?", "body": "<p>Ok, I think that I have a solution. After a couple of evenings I was able to make it work. </p>\n\n<p>In general I compile like this</p>\n\n<pre><code>rm -rf build\nmkdir build\ncd build\ncmake -C ../cmake-scripts/clang-tidy-all.cmake .. &amp;&amp; make\n</code></pre>\n\n<p>Where <code>cmake-scripts</code> directory contains:</p>\n\n<pre><code>clang-tidy-all.cmake\ntoolchain_arm_clang.cmake\n</code></pre>\n\n<p>The two important files are listed below.\nBut what is more important, is how you need to compile this.</p>\n\n<p>First, <code>toolchain_arm_clang.cmake</code> is referenced directly from <code>clang-tidy-all.cmake</code> via <code>set(CMAKE_TOOLCHAIN_FILE ...)</code>. It must be, however, referenced from the point of view of the building directory, so if you use multiple levels of build-dirs, e.g.: <code>build/x86</code>, <code>build/arm</code>, <code>build/darwin</code>, etc., then you must modify that path accordingly.</p>\n\n<p>Second, the purpose of <code>set(CONFIG_SCRIPT_PRELOADED ...)</code> is to be sure that the config script was pre-loaded, i.e., <code>cmake -C ../cmake-scripts/clang-tidy-all.cmake ..</code>\nTypically, you would want to have something like this somewhere in your <code>CMakeLists.txt</code> file:</p>\n\n<pre><code>message(STATUS \"CONFIG_SCRIPT_PRELOADED: ${CONFIG_SCRIPT_PRELOADED}\")\nif(NOT CONFIG_SCRIPT_PRELOADED)\n    message(FATAL_ERROR \"Run cmake -C /path/to/cmake.script to preload a config script!\")\nendif()\n</code></pre>\n\n<p>Third, there is <code>/lib/ld-musl-armhf.so.1</code> hard-coded in <code>set(CMAKE_LINKER_ARM_COMPAT_STATIC ...)</code>; on the development box that I use, it points to <code>/lib/libc.so</code>, so it might by OK to use <code>/lib/libc.sh</code> instead. I've never tried.</p>\n\n<p>Fourth, using <code>set(CMAKE_C_LINK_EXECUTABLE ...)</code> and <code>set(CMAKE_LINKER_ARM_COMPAT_STATIC ...)</code> was because CMake was complaining about some linking problems during checking the compiler, i.e., before even running <code>make</code>.</p>\n\n<p>Fifth, I was only compiling <code>C++</code> code, so if you need to compile some <code>C</code>, then it might be required to also properly configure <code>set(CMAKE_C_CREATE_SHARED_LIBRARY ...)</code>, but I have no idea whether there is such a config option.</p>\n\n<h2>General Advice</h2>\n\n<p>Do not integrate it immediately. First test some simple CMake project with one library (preferably a <code>C++</code> one) and make it work, then add the second library, but in <code>C</code>, tweak it again. And only after that incorporate it into the code base.</p>\n\n<h2>Toolchain</h2>\n\n<p>I used a custom toolchain with <code>GCC 8.3.0</code> and <code>musl</code> <code>C</code> library, so locations of some files might be different for other toolchains.</p>\n\n<h2>Custom CMake</h2>\n\n<p>Some variables, like (already mentioned) <code>CONFIG_SCRIPT_PRELOADED</code>, <code>EXPORT_PACKAGE_TO_GLOBAL_REGISTRY</code>, <code>DO_NOT_BUILD_TESTS</code>, or <code>DO_NOT_BUILD_BENCHMARKS</code> are <strong>not</strong> generic CMake options, i.e., I use them only in my <code>CMakeLists.txt</code>, so you can safely ignore them.</p>\n\n<p>Variables that are unset at the end of each <code>*.cmake</code> file, e.g., <code>build_test</code>, <code>extra_clang_tidy_unchecks_for_tests_only</code>, don't need to be present in the project's main <code>CMakeLists.txt</code>.</p>\n\n<h2>Clang</h2>\n\n<pre><code>$ clang --version\nclang version 10.0.0 (https://github.com/llvm/llvm-project.git 4650b2f36949407ef25686440e3d65ac47709deb)\nTarget: x86_64-unknown-linux-gnu\nThread model: posix\nInstalledDir: /opt/local/bin\n</code></pre>\n\n<h1>Files</h1>\n\n<h2><code>clang-tidy-all.cmake</code>:</h2>\n\n<pre><code>set(ALL_CXX_WARNING_FLAGS --all-warnings -Weverything -Wno-c++98-compat -Wno-c++98-c++11-compat -Wno-c++98-c++11-c++14-compat -Wno-padded -Wno-c++98-compat-pedantic)\nset(CXX_COMPILE_OPTIONS \"-std=c++17;-O3;${ALL_CXX_WARNING_FLAGS}\" CACHE INTERNAL \"description\")\n\n\nset(CMAKE_CROSSCOMPILING True)\nset(CMAKE_TOOLCHAIN_FILE \"../cmake-scripts/toolchain_arm_clang.cmake\" CACHE FILEPATH \"CMake toolchain file\")\n\nset(CONFIG_SCRIPT_PRELOADED true CACHE BOOL \"Ensures that config script was preloaded\")\n\n\nset(build_test False)\n\nif(build_test)\n    message(STATUS \"Using test mode clang-tidy checks!\")\n    set(extra_clang_tidy_unchecks_for_tests_only \",-google-readability-avoid-underscore-in-googletest-name,-cppcoreguidelines-avoid-magic-numbers,-cppcoreguidelines-special-member-functions\")\nendif()\n\nset(CMAKE_CXX_CLANG_TIDY \"clang-tidy;--enable-check-profile;--checks=-*,abseil-string-find-startswith,bugprone-*,cert-*,clang-analyzer-*,cppcoreguidelines-*,google-*,hicpp-*,llvm-*,misc-*,modernize-*,-modernize-use-trailing-return-type,performance-*,readability-*,-readability-static-definition-in-anonymous-namespace,-readability-simplify-boolean-expr,portability-*${extra_clang_tidy_unchecks_for_tests_only}\" CACHE INTERNAL \"clang-tidy\")\n\nmessage(STATUS \"build_test: ${build_test}\")\nmessage(STATUS \"extra_clang_tidy_unchecks_for_tests_only: ${extra_clang_tidy_unchecks_for_tests_only}\")\nmessage(STATUS \"CMAKE_CXX_CLANG_TIDY: ${CMAKE_CXX_CLANG_TIDY}\")\n\n# We want to skip building tests when clang-tidy is run (it takes too much time and serves nothing)\nif(DEFINED CMAKE_CXX_CLANG_TIDY AND NOT build_test)\n    set(DO_NOT_BUILD_TESTS true CACHE BOOL \"Turns OFF building tests\")\n    set(DO_NOT_BUILD_BENCHMARKS true CACHE BOOL \"Turns OFF building benchmarks\")\nendif()\n\n\n\nunset(build_test)\nunset(extra_clang_tidy_unchecks_for_tests_only)\nset(EXPORT_PACKAGE_TO_GLOBAL_REGISTRY \"OFF\" CACHE INTERNAL \"We don't export clang-tidy-all version to global register\")\n</code></pre>\n\n<h2><code>toolchain_arm_clang.cmake</code>:</h2>\n\n<pre><code>set(CMAKE_SYSTEM_NAME Linux)\nset(CMAKE_SYSTEM_VERSION 4.14.0)\nset(CMAKE_SYSTEM_PROCESSOR arm)\n\n\nset(gcc_version 8.3.0)\nset(x_tools \"/opt/zynq/xtl\")\n\nset(CMAKE_C_COMPILER \"clang\" CACHE INTERNAL STRING)\nset(CMAKE_CXX_COMPILER \"clang++\" CACHE INTERNAL STRING)\nset(CMAKE_RANLIB \"llvm-ranlib\" CACHE INTERNAL STRING)\nset(CMAKE_AR \"llvm-ar\" CACHE INTERNAL STRING)\nset(CMAKE_AS \"llvm-as\" CACHE INTERNAL STRING)\nset(CMAKE_LINKER \"ld.lld\" CACHE INTERNAL STRING)\n\nexecute_process(\n    COMMAND bash -c \"dirname `whereis ${CMAKE_LINKER} | tr -s ' ' '\\n' | grep ${CMAKE_LINKER}`\"\n    OUTPUT_VARIABLE cmake_linker_dir\n)\nstring(REGEX REPLACE \"\\n$\" \"\" cmake_linker_dir \"${cmake_linker_dir}\")\nset(cmake_linker_with_dir \"${cmake_linker_dir}/${CMAKE_LINKER}\" CACHE INTERNAL STRING)\n\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -iwithsysroot /include/c++/${gcc_version} -iwithsysroot /include/c++/${gcc_version}/arm-linux-musleabihf\" CACHE INTERNAL STRING)\n\n\nset(CMAKE_SYSROOT ${x_tools}/arm-linux-musleabihf)\nset(CMAKE_FIND_ROOT_PATH ${x_tools}/arm-linux-musleabihf)\nset(CMAKE_INSTALL_PREFIX ${x_tools}/arm-linux-musleabihf)\n\nset(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)\nset(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY BOTH)\nset(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE BOTH)\nset(CMAKE_FIND_ROOT_PATH_MODE_PACKAGE NEVER)\n\n\n\nset(triple arm-linux-musleabihf)\nset(CMAKE_LIBRARY_ARCHITECTURE ${triple})\nset(CMAKE_C_COMPILER_TARGET ${triple})\nset(CMAKE_CXX_COMPILER_TARGET ${triple})\n\n\nset(lib_path_arm ${x_tools}/arm-linux-musleabihf/lib)\n\n## Bootstrap library stuff:\nset(Scrt1_o ${lib_path_arm}/Scrt1.o)\nset(crti_o ${lib_path_arm}/crti.o)\nset(crtn_o ${lib_path_arm}/crtn.o)\n\nset(lib_path_gcc ${x_tools}/lib/gcc/${triple}/${gcc_version})\nset(crtbeginS_o ${lib_path_gcc}/crtbeginS.o)\nset(crtendS_o ${lib_path_gcc}/crtendS.o)\n\n\n# Clang as linker\n# --no-pie disable position independent executable, which is required when building\n# statically linked executables.\nset(CMAKE_CXX_LINK_EXECUTABLE \"clang++ --target=${triple} -Wl,--no-pie --sysroot=${CMAKE_SYSROOT} ${CMAKE_CXX_FLAGS} -fuse-ld=${cmake_linker_with_dir} &lt;CMAKE_CXX_LINK_FLAGS&gt; &lt;LINK_FLAGS&gt; &lt;LINK_LIBRARIES&gt; &lt;OBJECTS&gt; -o  &lt;TARGET&gt; \")\nset(CMAKE_CXX_CREATE_SHARED_LIBRARY \"clang++ -Wl, --target=${triple} --sysroot=${CMAKE_SYSROOT} ${CMAKE_CXX_FLAGS} -fuse-ld=${cmake_linker_with_dir} -shared &lt;CMAKE_CXX_LINK_FLAGS&gt; &lt;LINK_FLAGS&gt; &lt;LINK_LIBRARIES&gt; &lt;OBJECTS&gt; -o  &lt;TARGET&gt; \")\n#\n# Do not use CMAKE_CXX_CREATE_STATIC_LIBRARY -- it is created automatically\n# by cmake using ar and ranlib\n#\n#set(CMAKE_CXX_CREATE_STATIC_LIBRARY \"clang++ -Wl,--no-pie,--no-export-dynamic,-v -v --target=${triple} --sysroot=${CMAKE_SYSROOT} ${CMAKE_CXX_FLAGS} -fuse-ld=ld.lld &lt;CMAKE_CXX_LINK_FLAGS&gt; &lt;LINK_FLAGS&gt; &lt;LINK_LIBRARIES&gt; &lt;OBJECTS&gt; -o  &lt;TARGET&gt; \")\n\n\n## Linker as linker\nset(CMAKE_LINKER_ARM_COMPAT_STATIC \"-pie -EL -z relro -X --hash-style=gnu --eh-frame-hdr -m armelf_linux_eabi -dynamic-linker /lib/ld-musl-armhf.so.1 ${Scrt1_o} ${crti_o} ${crtbeginS_o} -lstdc++ -lm -lgcc_s -lgcc -lc ${crtendS_o} ${crtn_o}\")\nset(CMAKE_C_LINK_EXECUTABLE \"${CMAKE_LINKER} ${CMAKE_LINKER_ARM_COMPAT_STATIC} &lt;CMAKE_C_LINK_FLAGS&gt; &lt;LINK_FLAGS&gt; &lt;LINK_LIBRARIES&gt; &lt;OBJECTS&gt; -o  &lt;TARGET&gt;\")\n\n\n# Debian bug 708744(?)\n#include_directories(\"${CMAKE_SYSROOT}/usr/include/\")\n#include_directories(\"${CMAKE_SYSROOT}/usr/include/c++/${gcc_version}\")\n#include_directories(\"${CMAKE_SYSROOT}/usr/include/c++/${gcc_version}/${triple}\")\n\n## Clang workarounds:\nset(toolchain_lib_dir_0 \"${CMAKE_SYSROOT}/lib\")\nset(toolchain_lib_dir_1 \"${CMAKE_SYSROOT}/../lib\")\nset(toolchain_lib_dir_2 \"${CMAKE_SYSROOT}/../lib/gcc/${triple}/${gcc_version}\")\nset(CMAKE_TOOLCHAIN_LINK_FLAGS \"-L${toolchain_lib_dir_0} -L${toolchain_lib_dir_1} -L${toolchain_lib_dir_2}\")\n\n## CMake workarounds\nset(CMAKE_EXE_LINKER_FLAGS ${CMAKE_TOOLCHAIN_LINK_FLAGS} CACHE INTERNAL \"exe link flags\")\nset(CMAKE_MODULE_LINKER_FLAGS ${CMAKE_TOOLCHAIN_LINK_FLAGS} CACHE INTERNAL \"module link flags\")\nset(CMAKE_SHARED_LINKER_FLAGS ${CMAKE_TOOLCHAIN_LINK_FLAGS} CACHE INTERNAL \"shared link flags\")\n\n\n\nunset(cmake_linker_with_dir)\nunset(cmake_linker_dir)\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 11799088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08ff1a3a0b488508ceec2950189d92be?s=128&d=identicon&r=PG&f=1", "display_name": "cereagni", "link": "https://stackoverflow.com/users/11799088/cereagni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6272, "favorite_count": 4, "answer_count": 1, "score": 11, "last_activity_date": 1579798162, "creation_date": 1563387783, "last_edit_date": 1564421092, "question_id": 57082124, "link": "https://stackoverflow.com/questions/57082124/how-to-integrate-clang-tidy-to-cmake-and-gcc", "title": "How to integrate clang-tidy to CMake and GCC?", "body": "<p>I want to integrate clang-tidy to our C and C++, CMake based project which is compiled using a custom GCC toolchain.</p>\n\n<p>I've tried following <a href=\"https://ortogonal.github.io/cmake-clang-tidy\" rel=\"noreferrer\">this tutorial</a>, setting <code>CMAKE_CXX_CLANG_TIDY</code>. I've also tried generating a compilation database by setting <code>CMAKE_EXPORT_COMPILE_COMMANDS</code> to <code>ON</code> and pointing <code>run-clang-tidy.py</code> to its directory.</p>\n\n<p>In both cases, I've encountered (the same) few errors that are probably related to differences between Clang and GCC:</p>\n\n<ol>\n<li>Some warning flags that are enabled in the CMake files are not supported in Clang but are supported in GCC (like <code>-Wlogical-op</code>). As the compiler is GCC, the file builds correctly, and the flag is written to the compilation database, but <code>clang-tidy</code> complains about it.</li>\n<li>clang-tidy complains some defines and functions are unavailable, even though the code compiles just fine. As an example, the <a href=\"https://clang.llvm.org/extra/clang-tidy/checks/android-cloexec-open.html\" rel=\"noreferrer\">android-cloexec-open check</a> suggested using <code>O_CLOEXEC</code> to improve security and force the closing of files, but trying to use this define leads to an undefined identifier error (even though our GCC compiles the code). \nAs an example to a function that is not found, there is <code>clock_gettime</code>.</li>\n</ol>\n\n<p>Our code compiles with the C11 standard and C++14 standard, without GNU extensions:</p>\n\n<pre><code>set(CMAKE_C_STANDARD 11)\nset(CMAKE_CXX_STANDARD 14)\n\nset(CMAKE_C_EXTENSIONS OFF)\nset(CMAKE_CXX_EXTENSIONS OFF)\n</code></pre>\n\n<p>The custom toolchain is a cross-compilation toolchain which runs on Linux and compiles to FreeBSD.</p>\n\n<ol>\n<li>Is there a way to disable the passing of some flags by CMake to clang-tidy? Am I using clang-tidy wrong?</li>\n<li>I suspect this issue is related to disabling GNU extensions, using a cross-compilation toolchain, and some feature-test-macro which is not defined by default in Clang but is defined with GCC (e.g. <code>_GNU_SOURCE</code>/<code>_POSIX_SOURCE</code>). If this is the case, how can I check it? If not, should I use clang-tidy differently?</li>\n</ol>\n\n<p><strong>EDIT</strong></p>\n\n<p>As @pablo285 asked, here are 2 warnings I get for a single file, and then as I added <code>--warnings-as-errors=*</code>, the build stops:</p>\n\n<pre><code>error: unknown warning option '-Wlogical-op' ; did you mean '-Wlong-long'? [clang-diagnostic-error]\n\n&lt;file path&gt;: error: use of undeclared identifier 'O_CLOEXEC' [clang-diagnostic-error]\nO_WRONLY | O_CLOEXEC\n           ^\n</code></pre>\n\n<p>I decided to write a python script that will replace clang-tidy, receive the commandline from CMake and edit it to fix various errors. Here are the modification to the commandline I tried:</p>\n\n<ol>\n<li>Remove none clang compile flags\n\n<ul>\n<li>This helps with things like the first warning, as now I don't pass flags that clang doesn't know. It seems like I can't configure CMake to pass different set of flags to GCC and to clang-tidy, so if anyone is familiar with some solution to this problem, I'll be happy to hear!</li>\n</ul></li>\n<li>I changed the include directories that are passed to clang-tidy\n\n<ul>\n<li>As mentioned in the post, I use a custom toolchain (which cross-compiles). I used <a href=\"https://stackoverflow.com/questions/4980819/what-are-the-gcc-default-include-directories\">this post</a> and Python to extract the list of standard include directories, and added them to the flag list as a list of <code>-isystem &lt;dir&gt;</code>. I also added <code>-nostdinc</code> so that clang-tidy won't try to look on his own headers instead of mine\n\n<ul>\n<li>This helped with the issue above, as now various defines such as <code>O_CLOEXEC</code> is defined in the toolchain's headers, but as my toolchain is based on GCC, clang couldn't parse the <code>&lt;type_traits&gt;</code> header which includes calls to many compiler intrinsics</li>\n</ul></li>\n<li>I'm not sure what's the best approach in this case</li>\n</ul></li>\n</ol>\n\n<p>@shycha: Thanks for the tip, I'll try disabling this specific check and I'll edit this post again</p>\n"}, {"tags": ["c++", "raspberry-pi3", "raspbian"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1563387711, "post_id": 57082030, "comment_id": 100686967, "body": "What is <code>u8</code> supposed to be? To me it&#39;s a string or character literal type designator prefix."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1563388132, "post_id": 57082030, "comment_id": 100687161, "body": "@user4581301 It&#39;s supposed to come from <code>&lt;linux&#47;types.h&gt;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1563387683, "post_id": 57082093, "comment_id": 100686956, "body": "Nitpick: In modern code you should <code>#include &lt;cstdint&gt;</code> rather than <code>stdint.h</code>."}, {"owner": {"reputation": 846, "user_id": 7511460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cz0P7.png?s=128&g=1", "display_name": "Adrien Givry", "link": "https://stackoverflow.com/users/7511460/adrien-givry"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1563387819, "post_id": 57082093, "comment_id": 100687024, "body": "@Jesper Juhl Good precision"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1563388116, "post_id": 57082093, "comment_id": 100687148, "body": "<code>u8</code> is not in the standard, but it is expected to be defined in <code>&lt;linux&#47;types.h&gt;</code>."}], "tags": [], "owner": {"reputation": 846, "user_id": 7511460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cz0P7.png?s=128&g=1", "display_name": "Adrien Givry", "link": "https://stackoverflow.com/users/7511460/adrien-givry"}, "is_accepted": false, "score": 1, "last_activity_date": 1563388023, "last_edit_date": 1563388023, "creation_date": 1563387604, "answer_id": 57082093, "question_id": 57082030, "link": "https://stackoverflow.com/questions/57082030/u8-was-not-declared-in-this-scope/57082093#57082093", "title": "&quot;u8&quot; was not declared in this scope", "body": "<p><code>u8</code> isn't in the standard but <code>uint8_t</code> is (included in <code>stdint.h</code> and <code>cstdint</code>). Check your includes, verify that you defined <code>u8</code> somewhere.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5771536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca048682052c4867b152c481bc54bd5c?s=128&d=identicon&r=PG&f=1", "display_name": "JuanRoa", "link": "https://stackoverflow.com/users/5771536/juanroa"}, "edited": false, "score": 0, "creation_date": 1563389773, "post_id": 57082243, "comment_id": 100687921, "body": "Thank you. I changed all the sentences u [8,16,32] to __u [8,16,32]. Beyond the notation does not involve any change ?. The original code is from a Gumstix of the year 2008. Will it only be due to changes in Linuux during the time?"}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "reply_to_user": {"reputation": 11, "user_id": 5771536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca048682052c4867b152c481bc54bd5c?s=128&d=identicon&r=PG&f=1", "display_name": "JuanRoa", "link": "https://stackoverflow.com/users/5771536/juanroa"}, "edited": false, "score": 2, "creation_date": 1563389965, "post_id": 57082243, "comment_id": 100688017, "body": "I don&#39;t understand why you&#39;d want to bring these datatypes into your program instead of using the standard C ones like <code>uint8_t</code> from <code>&lt;stdint.h&gt;</code>."}], "tags": [], "owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1563388395, "creation_date": 1563388395, "answer_id": 57082243, "question_id": 57082030, "link": "https://stackoverflow.com/questions/57082030/u8-was-not-declared-in-this-scope/57082243#57082243", "title": "&quot;u8&quot; was not declared in this scope", "body": "<p>I'm looking at the <code>&lt;linux/types.h&gt;</code> kernel header, and I can't find <code>u8</code>. There is a <code>__u8</code> pulled in via <code>&lt;asm/types.h&gt;</code>, through two more layers of inclusion.</p>\n\n<p>If I compile</p>\n\n<pre><code>#include &lt;linux/types.h&gt;\nu8 u;\n</code></pre>\n\n<p>on Ubuntu 18 with gcc-7.3.0, it suggests this.</p>\n\n<pre><code>test.c:2:1: error: unknown type name \u2018u8\u2019; did you mean \u2018__u8\u2019?\nu8 u;\n^~\n__u8\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5771536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca048682052c4867b152c481bc54bd5c?s=128&d=identicon&r=PG&f=1", "display_name": "JuanRoa", "link": "https://stackoverflow.com/users/5771536/juanroa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2051, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1563388395, "creation_date": 1563387383, "question_id": 57082030, "link": "https://stackoverflow.com/questions/57082030/u8-was-not-declared-in-this-scope", "title": "&quot;u8&quot; was not declared in this scope", "body": "<p>I am working on the communication between a raspberry pi and a kestrel plate (from procerus technologies). Now, I need to receive information from the packages of the kestrel, for this I am using an old code used in a Gumstix. At the time of compiling it gives me the error of the title (\"u8\" was not declared in this scope). The error is present in several files. For example</p>\n\n<p>I suppose the error is related to the Linux version</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"dllsetup.h\"\n#include \"type.h\"\n#include &lt;vector&gt;\n#include &lt;linux/types.h&gt; \n#include &lt;asm/types.h&gt;\n#include &lt;sys/types.h&gt;\n\n#ifndef LINUX\n    EXTERN_LINK template class DYNAMIC_LINK std::vector&lt;u8&gt;;\n#endif\n\n//! Packet Data Type defines for easy writing of code.\n\ntypedef std::vector&lt;u8&gt; PacketData;\ntypedef std::vector&lt;u8&gt;::iterator PacketDataIter;\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 716, "user_id": 9969356, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pD3m-C36B4I/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1D7oWVmGPi3Wfxj7hc5UPIpNj5sA/mo/photo.jpg?sz=128", "display_name": "Zachary Oldham", "link": "https://stackoverflow.com/users/9969356/zachary-oldham"}, "edited": false, "score": 1, "creation_date": 1563387282, "post_id": 57081938, "comment_id": 100686754, "body": "Did you <code>#include &quot;resources.cpp&quot;</code> in initialized.cpp?"}, {"owner": {"reputation": 4354, "user_id": 5967828, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/fJ7P2.jpg?s=128&g=1", "display_name": "xetra11", "link": "https://stackoverflow.com/users/5967828/xetra11"}, "reply_to_user": {"reputation": 716, "user_id": 9969356, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pD3m-C36B4I/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1D7oWVmGPi3Wfxj7hc5UPIpNj5sA/mo/photo.jpg?sz=128", "display_name": "Zachary Oldham", "link": "https://stackoverflow.com/users/9969356/zachary-oldham"}, "edited": false, "score": 0, "creation_date": 1563387323, "post_id": 57081938, "comment_id": 100686771, "body": "@ZacharyOldham I included &quot;resources.Hpp&quot; not .cpp"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1563387421, "post_id": 57081938, "comment_id": 100686818, "body": "You have a linker error, not a compiler error. Your issue is not missing includes, it&#39;s not linking the file defining the missing symbol."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1563387433, "post_id": 57081938, "comment_id": 100686827, "body": "Unrelated: <a href=\"https://stackoverflow.com/a/1008289/4581301\">A much better singleton</a>"}, {"owner": {"reputation": 1475, "user_id": 1743874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/vQYev.png?s=128&g=1", "display_name": "Piccolo", "link": "https://stackoverflow.com/users/1743874/piccolo"}, "edited": false, "score": 0, "creation_date": 1563387514, "post_id": 57081938, "comment_id": 100686862, "body": "Can you post your initializer.hpp? Are you using the right namespace?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1563387586, "post_id": 57081938, "comment_id": 100686900, "body": "Note that this attempt at singleton has undefined behaviour if <code>ResourceManager::instance()</code> is called from multiple threads."}, {"owner": {"reputation": 716, "user_id": 9969356, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pD3m-C36B4I/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1D7oWVmGPi3Wfxj7hc5UPIpNj5sA/mo/photo.jpg?sz=128", "display_name": "Zachary Oldham", "link": "https://stackoverflow.com/users/9969356/zachary-oldham"}, "edited": false, "score": 0, "creation_date": 1563387640, "post_id": 57081938, "comment_id": 100686926, "body": "I think you need to <code>#include &#39;resources.hpp</code> in resources.cpp and <code>#include resources.cpp</code> in resources.hpp"}, {"owner": {"reputation": 4354, "user_id": 5967828, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/fJ7P2.jpg?s=128&g=1", "display_name": "xetra11", "link": "https://stackoverflow.com/users/5967828/xetra11"}, "edited": false, "score": 0, "creation_date": 1563387705, "post_id": 57081938, "comment_id": 100686961, "body": "In <code>initializer.cpp</code> I added <code>#include &quot;..&#47;src&#47;resources.cpp&quot; </code>. Can somebody explain me why it now works with linking? I thought <code>#include &quot;resources.hpp</code> would be enough as always"}, {"owner": {"reputation": 4354, "user_id": 5967828, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/fJ7P2.jpg?s=128&g=1", "display_name": "xetra11", "link": "https://stackoverflow.com/users/5967828/xetra11"}, "reply_to_user": {"reputation": 716, "user_id": 9969356, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pD3m-C36B4I/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1D7oWVmGPi3Wfxj7hc5UPIpNj5sA/mo/photo.jpg?sz=128", "display_name": "Zachary Oldham", "link": "https://stackoverflow.com/users/9969356/zachary-oldham"}, "edited": false, "score": 0, "creation_date": 1563387754, "post_id": 57081938, "comment_id": 100686988, "body": "@ZacharyOldham why is that? I don&#39;t understand the problem"}, {"owner": {"reputation": 716, "user_id": 9969356, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pD3m-C36B4I/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1D7oWVmGPi3Wfxj7hc5UPIpNj5sA/mo/photo.jpg?sz=128", "display_name": "Zachary Oldham", "link": "https://stackoverflow.com/users/9969356/zachary-oldham"}, "edited": false, "score": 0, "creation_date": 1563387877, "post_id": 57081938, "comment_id": 100687047, "body": "@xetra11 resources.cpp definitely needs access to the code in resources.hpp. You actually probably don&#39;t need the other one, as long as you include both files in initialized.cpp"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1563388766, "post_id": 57081938, "comment_id": 100687444, "body": "This makes it sound like resources.cpp is not being compiled and linked. If it was being compiled and linked and you included it (<a href=\"https://stackoverflow.com/questions/1686204/why-should-i-not-include-cpp-files-and-instead-use-a-header\">don&#39;t include cpp files</a>) in another file, you&#39;d get multiple definitions error."}, {"owner": {"reputation": 4354, "user_id": 5967828, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/fJ7P2.jpg?s=128&g=1", "display_name": "xetra11", "link": "https://stackoverflow.com/users/5967828/xetra11"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1563390426, "post_id": 57081938, "comment_id": 100688215, "body": "@user4581301 that&#39;s why it&#39;s all so confusing for me. I don&#39;t want to include the cpp file but it seems to be the only way to get it linked"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1563390842, "post_id": 57081938, "comment_id": 100688387, "body": "Did you manufacture the makefile by hand or was it generated for you by a program? If you have no idea what I just said, it&#39;s the latter. In that case, whatever tool you are using to write your code is not acknowledging that resources.cpp is part of the project and is not compiling and linking it. How to add resources.cpp to the project depends on the tool."}, {"owner": {"reputation": 4354, "user_id": 5967828, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/fJ7P2.jpg?s=128&g=1", "display_name": "xetra11", "link": "https://stackoverflow.com/users/5967828/xetra11"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1563393545, "post_id": 57081938, "comment_id": 100689585, "body": "@user4581301 you sir are fully correct. I am used to CLion where Cmake is updated automatically. Having this project checkout out on Linux now using Emacs I had to run <code>cmake</code> for every new source file added. Please make this an answer so I can"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1563398568, "post_id": 57081938, "comment_id": 100691549, "body": "No need. It&#39;s covered by answer three of the duplicate. The problem with that duplicate is it sometimes a bit of work to figure out which answer applies to the question."}], "owner": {"reputation": 4354, "user_id": 5967828, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/fJ7P2.jpg?s=128&g=1", "display_name": "xetra11", "link": "https://stackoverflow.com/users/5967828/xetra11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "closed_date": 1563387462, "answer_count": 0, "score": 0, "last_activity_date": 1563402281, "creation_date": 1563387029, "last_edit_date": 1563402281, "question_id": 57081938, "link": "https://stackoverflow.com/questions/57081938/cant-use-singleton-static-function-in-other-cpp-file-undefined-reference-to", "closed_reason": "Duplicate", "title": "Can&#39;t use singleton static function in other .cpp file: &quot;undefined reference to&quot;", "body": "<p>I have a class <code>ResourceManager</code> that I try to use as a singleton here. It has a file <code>resources.hpp</code> and <code>resources.cpp</code> that I list below. The last code listing is the usage of <code>ResourceManager::instance()</code> and the error message below. I tried a lot of things like forward declarations etc. but could not find a way to let the compiler succeed.</p>\n\n<p><strong>resources.hpp</strong>  </p>\n\n<pre><code>namespace X11 {\n      class ResourceManager {\n      private:\n        static ResourceManager* _instance;\n        ResourceManager() {\n          //logic\n        };\n        ResourceManager (const ResourceManager&amp;);\n        ~ResourceManager() = default;\n      public:\n        static ResourceManager* instance();\n        std::vector&lt;sf::Font&gt; fonts;\n      };\n    }\n</code></pre>\n\n<p><strong>resources.cpp</strong></p>\n\n<pre><code> #include \"resources.hpp\"\n\n    namespace X11 {\n      ResourceManager* ResourceManager::_instance = 0;\n      ResourceManager* ResourceManager::instance() {\n        if (!ResourceManager::_instance)\n          ResourceManager::_instance = new ResourceManager();\n        return ResourceManager::_instance;\n      }\n    }\n</code></pre>\n\n<p><strong>Usage (initialized.cpp)</strong></p>\n\n<pre><code> #include \"initializer.hpp\"\n  // initializer.hpp includes \"resources.hpp\"\n\n  void Initializer::init_right_bar(Menu&amp; menu) {\n    // logic\n    text.setFont(ResourceManager::instance()-&gt;fonts[0]);\n    // logic\n  }\n</code></pre>\n\n<p><strong>Error message</strong></p>\n\n<pre><code>[ 30%] Building CXX object CMakeFiles/vilsoc.dir/src/initializer.cpp.o\n[ 40%] Building CXX object CMakeFiles/vilsoc.dir/src/vilsoc.cpp.o\n[ 50%] Linking CXX executable vilsoc\n/usr/bin/ld: CMakeFiles/vilsoc.dir/src/initializer.cpp.o: in function `X11::Initializer::init_right_bar(X11::Menu&amp;)':\ninitializer.cpp:(.text+0x1715): undefined reference to `X11::ResourceManager::instance()'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p><strong>SOLVED</strong>\nThe comments led to the conclusion that I wasn't updating my makefile through CMake and therefore the linker could not find the source file.</p>\n"}, {"tags": ["c++", "multithreading", "thread-safety"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1563390677, "post_id": 57081899, "comment_id": 100688309, "body": "Why this convoluted for loop on <code>irange</code>? Just to complicate it?"}, {"owner": {"reputation": 1492, "user_id": 776788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/227fcf39e6bdc1a86340fc1b32614140?s=128&d=identicon&r=PG", "display_name": "Demolishun", "link": "https://stackoverflow.com/users/776788/demolishun"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1563393515, "post_id": 57081899, "comment_id": 100689570, "body": "@Slava because I like it more and I can do fun things like this: for(const unsigned cpu: boost::irange(cpus))  to further show intent of how that value should be used.  I really should have used that for my code in this post to say to other develppers &quot;hey, don&#39;t mess with this index, mmm kay?&quot;.  Also, because I like it more.  I like it a lot.  Besides ++i is soooo 1990s... ;-)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1563454696, "post_id": 57081899, "comment_id": 100711387, "body": "I did not mean using old good loop. My point is you overcomplicated simple thing. First 2 line of the loop can be replaced with: <code>for( vector&lt;uint64_t&gt;&amp; tprimes : aprimes ) ...</code> or even <code>for ( auto &amp;tprimes : aprimes ) ...</code>"}, {"owner": {"reputation": 1492, "user_id": 776788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/227fcf39e6bdc1a86340fc1b32614140?s=128&d=identicon&r=PG", "display_name": "Demolishun", "link": "https://stackoverflow.com/users/776788/demolishun"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1563468574, "post_id": 57081899, "comment_id": 100719794, "body": "@Slava I pulled this code out of working code to ask a specific question about how I was referencing the vectors in aprimes list.  I actually use the cpu variable inside the lambda.  This is not shown because it was not relevant to the question.  Yes, looping over the aprimes vector would have been a nice solution as well."}], "answers": [{"tags": [], "owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "is_accepted": false, "score": 1, "last_activity_date": 1563387468, "creation_date": 1563387468, "answer_id": 57082057, "question_id": 57081899, "link": "https://stackoverflow.com/questions/57081899/is-a-mutex-required-when-accessing-references-for-elements-in-a-list-of-vectors/57082057#57082057", "title": "Is a mutex required when accessing references for elements in a list of vectors captured in a lambda for a worker thread?", "body": "<p>As long as the <em>aprimes</em> vector doesn't change (add stuff), it won't re-allocate.</p>\n\n<p>As long as it doesn't reallocate, the various <em>tprimes</em> vector won't move around. Each <em>tprimes</em> have their own location in memory. Each thread will be reading and writing from/to a different vector. </p>\n\n<p>As such, it is safe.</p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 4, "last_activity_date": 1563387486, "creation_date": 1563387486, "answer_id": 57082063, "question_id": 57081899, "link": "https://stackoverflow.com/questions/57081899/is-a-mutex-required-when-accessing-references-for-elements-in-a-list-of-vectors/57082063#57082063", "title": "Is a mutex required when accessing references for elements in a list of vectors captured in a lambda for a worker thread?", "body": "<p>Yes, this is safe.  When we talk about data races and undefined behavior we are talking about multiple threads modifying the same shared object.  In your case you do not have this.  Each element of <code>aprimes</code> is it's own distinct object so each worker thread is working on an object only it is accessing.  Even though they all happen to be inside <code>aprimes</code> doesn't change this as long as you do not modify <code>aprimes</code>.  In that case it is just like having a bunch of vector declared one after another.</p>\n\n<p>The only caveat with this is your main thread is not allowed to modify <code>aprimes</code> and it is not allowed to modify any of the elements in <code>aprimes</code>.  If you do, then you will have multiple thread writing to a shared object without synchronization which is a data race and undefined behavior.</p>\n\n<hr>\n\n<p>Do note that one thing that can happen when you do this is <a href=\"https://software.intel.com/en-us/articles/avoiding-and-identifying-false-sharing-among-threads\" rel=\"nofollow noreferrer\">false sharing</a>.  If you had a <code>vector&lt;int&gt;</code> with 4 elements and each thread gets one of the ints then what will happen is even though no thread is sharing the object, they are sharing the cache line the object lives in.  This causes the CPU to constantly have to synchronize the CPU caches when one of the ints is updated because it only can work on a cache line level.  This effectively will make the program run like it had no threads since all 4 threads can't modify the cache line concurrently.  In this case since we are dealing with vectors it should not be a problem, but it is something to be mindful of.</p>\n"}], "owner": {"reputation": 1492, "user_id": 776788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/227fcf39e6bdc1a86340fc1b32614140?s=128&d=identicon&r=PG", "display_name": "Demolishun", "link": "https://stackoverflow.com/users/776788/demolishun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 57082063, "answer_count": 2, "score": 1, "last_activity_date": 1563389973, "creation_date": 1563386873, "last_edit_date": 1563389973, "question_id": 57081899, "link": "https://stackoverflow.com/questions/57081899/is-a-mutex-required-when-accessing-references-for-elements-in-a-list-of-vectors", "title": "Is a mutex required when accessing references for elements in a list of vectors captured in a lambda for a worker thread?", "body": "<p>I have the following code:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;thread&gt;\n#include &lt;boost/range/irange.hpp&gt;\n\n...\n\n{\n    using namespace std;\n\n    unsigned cpus = 8; // number of threads\n    vector&lt;vector&lt;uint64_t&gt;&gt; aprimes(cpus);\n    vector&lt;thread&gt; workers;\n    for(int cpu: boost::irange(cpus)){\n        vector&lt;uint64_t&gt;&amp; tprimes = aprimes[cpu];\n        workers.push_back(thread([=, &amp;tprimes](){\n            // top work on tprimes\n            tprimes.push_back(5);\n        }));\n    }\n    for_each(workers.begin(), workers.end(), [](thread &amp;t)\n    {\n        t.join();\n    });\n    for(auto vec: aprimes){\n        for(int val: vec){\n            cout &lt;&lt; val &lt;&lt; endl;\n        }\n    }\n}\n</code></pre>\n\n<p>I am capturing a reference to each vector (tprimes) in my list of vectors aprimes for the lambdas used in each thread.  Is this capture safe?  Should I be using a mutex or other access method here?  The code does work, but I am unsure if this will fail later.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 6, "creation_date": 1563387151, "post_id": 57081879, "comment_id": 100686691, "body": "Your <code>valarray</code> has 0 elements. To each of it&#39;s 0 elements you apply a function, and then you try to print a non-existing element."}], "answers": [{"tags": [], "owner": {"reputation": 5867, "user_id": 9125195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75fc90d1f6de6ff28c739b85bdb82f4c?s=128&d=identicon&r=PG&f=1", "display_name": "Sid S", "link": "https://stackoverflow.com/users/9125195/sid-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1563387967, "creation_date": 1563387967, "answer_id": 57082163, "question_id": 57081879, "link": "https://stackoverflow.com/questions/57081879/why-is-the-valarry-not-getting-initialized/57082163#57082163", "title": "why is the valarry not getting initialized", "body": "<p>You should <code>#include &lt;valarray&gt;</code>, not <code>valarray,h</code></p>\n\n<p>Also, the <code>[Blockquote][1]</code> must be removed.</p>\n\n<p>Then your code compiles, but still works on an empty array.  So when you do this:</p>\n\n<pre><code>cout &lt;&lt; var[1];\n</code></pre>\n\n<p>you're trying to access an element out of bounds.  That causes undefined behavior.</p>\n"}], "owner": {"reputation": 11, "user_id": 11799039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee4ca9485f1ed6a24abc4800e329099b?s=128&d=identicon&r=PG&f=1", "display_name": "segantiruthvik", "link": "https://stackoverflow.com/users/11799039/segantiruthvik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563387967, "creation_date": 1563386795, "question_id": 57081879, "link": "https://stackoverflow.com/questions/57081879/why-is-the-valarry-not-getting-initialized", "title": "why is the valarry not getting initialized", "body": "<p>iam getting this error>\nerror: expected primary-expression before '[' token|</p>\n\n<pre><code>    #include &lt;iostream.h&gt;\n    #include&lt;algorithm&gt; // for partition algorithm\n    #include&lt;vector&gt; // for vector\n    #include &lt;valarray,h&gt;\n    using namespace std;\n    int main()\n    {\n        valarray &lt;int&gt; var;\n        var=var.apply([](int x){\n            return x=x+1;\n</code></pre>\n\n<blockquote>\n  <p><code>[Blockquote][1]</code></p>\n</blockquote>\n\n<pre><code>        });\n        cout&lt;&lt;var[1];\n    }\n</code></pre>\n"}, {"tags": ["c++", "getline"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1563387090, "post_id": 57081825, "comment_id": 100686667, "body": "Are you certain you&#39;re seeing a NewlIne? Not all systems agree on what a line ending should be. For example, if you have a file produced for the Windows OS (NewlIne is Carriage return and Line feed) and consume the file under Linux (NewlIne is Line feed) you often get the Carriage return hanging around and causing trouble. Try printing out the last character in the string as an integer  (<code>cout  &lt;&lt; (int)line.back()</code>) to see what the actual character value is."}, {"owner": {"reputation": 123, "user_id": 9274390, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uuGQOBM-_20/AAAAAAAAAAI/AAAAAAAAAEQ/EAvwgtPDOpA/photo.jpg?sz=128", "display_name": "incnnu", "link": "https://stackoverflow.com/users/9274390/incnnu"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1563387806, "post_id": 57081825, "comment_id": 100687018, "body": "It&#39;s printing 13. So you&#39;re right! Coding on Windows would not cause this problem then?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1563389172, "post_id": 57081825, "comment_id": 100687625, "body": "Using files created according to the native OS conventions prevents this. If you simply copy files from a system with one OS to a system with a different OS you risk exactly this: the line endings are different. There are tools for converting line endings in the file itself."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1563389240, "post_id": 57081825, "comment_id": 100687664, "body": "Yes, if you have a Windows text file, a c++ compiler targeting Windows would do the conversion for you (and if you DON&#39;T want it converted for you, open the file with the <code>binary</code> mode flag.) You don&#39;t need to code in Windows though. There should be a <a href=\"https://linux.die.net/man/1/dos2unix\" rel=\"nofollow noreferrer\"><code>dos2unix</code> application</a> that will convert the line-endings of the file for you either installed on your computer or available through your distribution&#39;s package manager."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1563389297, "post_id": 57081825, "comment_id": 100687698, "body": "On windows <code>notepad++</code> can fix this <code>Edit-&gt;EOL Conversion-&gt;OSType</code> where OSType is Windows, MacOS or Unix."}], "answers": [{"tags": [], "owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "is_accepted": false, "score": 0, "last_activity_date": 1563437163, "last_edit_date": 1563437163, "creation_date": 1563434513, "answer_id": 57089121, "question_id": 57081825, "link": "https://stackoverflow.com/questions/57081825/using-getline-to-read-into-a-string-but-there-is-newline-appearing-in-each-line/57089121#57089121", "title": "Using getline to read into a string but there is newline appearing in each line", "body": "<p>The systematic way is to analyze all possible input data and then search for a pattern in the text. In your case, we analyze the problem and find out that</p>\n\n<ul>\n<li>at the end of the string we have some consecutive uppercase letters</li>\n<li>before that we have the state's name</li>\n<li>we do not care about Carriage Return or New Line  CR of LF or combination of that</li>\n</ul>\n\n<p>So, if we search for the state abbreviation pattern and split that of, then the full name of the state will be available. But maybe with trailing and leading spaces. This we will remove and then the result is there.</p>\n\n<p>For searching we will use a <code>std::regex</code>. The pattern is: 1 or more uppercase letters followed by 0 or more white spaces, followed by the end of the line. The regular expressions for that is: <code>\"([A-Z]+)\\\\s*$\"</code></p>\n\n<p>We do not care about newlines or whatever. We search for the Text that we want.</p>\n\n<p>When this is available, the prefix of the result contains the full statename. We will remove leading and trailing spaces and that's it.</p>\n\n<p>Please see:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;regex&gt;\n\nstd::istringstream textFile(R\"(   Florida FL\n  Nevada      NV\nNew York     NY)\");\n\nstd::regex regexStateAbbreviation(\"([A-Z]+)\\\\s*$\");\n\nint main()\n{\n    // Split of some parts\n    std::smatch stateAbbreviationMatch{};\n    std::string line{};\n\n    while (std::getline(textFile, line)) {\n        if (std::regex_search(line, stateAbbreviationMatch, regexStateAbbreviation))\n        {\n            // Get the state\n            std::string state(stateAbbreviationMatch.prefix());\n            // Remove leading and trailing spaces\n            state = std::regex_replace(state, std::regex(\"^ +| +$|( ) +\"), \"$1\");\n\n            // Get the state abbreviation\n            std::string stateabbreviation(stateAbbreviationMatch[0]);\n\n            // Print Result\n            std::cout &lt;&lt; stateabbreviation &lt;&lt; ' ' &lt;&lt; state &lt;&lt; '\\n';\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 9274390, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uuGQOBM-_20/AAAAAAAAAAI/AAAAAAAAAEQ/EAvwgtPDOpA/photo.jpg?sz=128", "display_name": "incnnu", "link": "https://stackoverflow.com/users/9274390/incnnu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1563437163, "creation_date": 1563386625, "question_id": 57081825, "link": "https://stackoverflow.com/questions/57081825/using-getline-to-read-into-a-string-but-there-is-newline-appearing-in-each-line", "title": "Using getline to read into a string but there is newline appearing in each line", "body": "<p>My text file looks something like this:</p>\n\n<pre><code>Florida FL\nNevada      NV\nNew York     NY\n</code></pre>\n\n<p>Now when I read in the file with getline and print it out to the console, there is a newline at the end of every line (besides the last line). Getline is supposed to get rid of newline though. Where is it coming from then?</p>\n\n<pre><code>ifstream inFileAbb(\"abbreviation.txt\", ios::in);\nwhile(getline(inFileAbb, line)){   \ncout &lt;&lt; line;\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "image-processing", "deep-learning", "yolo"], "comments": [{"owner": {"reputation": 15181, "user_id": 3308055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mIjeo.png?s=128&g=1", "display_name": "juvian", "link": "https://stackoverflow.com/users/3308055/juvian"}, "edited": false, "score": 0, "creation_date": 1563389610, "post_id": 57081736, "comment_id": 100687838, "body": "<a href=\"https://www.learnopencv.com/deep-learning-based-object-detection-using-yolov3-with-opencv-python-c/\" rel=\"nofollow noreferrer\">learnopencv.com/&hellip;</a>"}, {"owner": {"reputation": 37, "user_id": 11160612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f157e922f1cda168bbed0d42c41dd4f1?s=128&d=identicon&r=PG&f=1", "display_name": "MABA", "link": "https://stackoverflow.com/users/11160612/maba"}, "reply_to_user": {"reputation": 15181, "user_id": 3308055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mIjeo.png?s=128&g=1", "display_name": "juvian", "link": "https://stackoverflow.com/users/3308055/juvian"}, "edited": false, "score": 0, "creation_date": 1563391628, "post_id": 57081736, "comment_id": 100688714, "body": "Nice tutorial, thank you"}], "owner": {"reputation": 37, "user_id": 11160612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f157e922f1cda168bbed0d42c41dd4f1?s=128&d=identicon&r=PG&f=1", "display_name": "MABA", "link": "https://stackoverflow.com/users/11160612/maba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 216, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563386214, "creation_date": 1563386214, "question_id": 57081736, "link": "https://stackoverflow.com/questions/57081736/implement-and-train-yolo-3-with-opencv-and-c", "title": "Implement and train YOLO 3 with Opencv and C++", "body": "<p>I want to implement  and train YOLO 3 with my dataset using Opencv and C++, i can't find an example to start with, or a tutorial to explain how to train YOLO  with my own data, all the tutorials i found are in python and don't use Opencv.\nDo you have any example, or an explanation to how to code an object detector with YOLO 3, opencv with C++.</p>\n"}, {"tags": ["python", "c++", "pybind11"], "comments": [{"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1563386643, "post_id": 57081632, "comment_id": 100686483, "body": "For the first case I can suspect you can make pybind aware of <code>Vec</code> and <code>Refl_t</code> first and then add <code>Rectangle_xz</code> with <code>py::init&lt;float, float, float, float, float, Vec, Vec, Refl_t&gt;</code>?"}, {"owner": {"reputation": 405, "user_id": 9177422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c14c092c695c495f5800a92ebfd0b4a?s=128&d=identicon&r=PG&f=1", "display_name": "maurock", "link": "https://stackoverflow.com/users/9177422/maurock"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1563388699, "post_id": 57081632, "comment_id": 100687422, "body": "@Botje I added an EDIT, if that what you meant."}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1563393322, "post_id": 57081632, "comment_id": 100689477, "body": "You never linked <code>a</code> and <code>b</code> to <code>Gatto</code>, so why would you expect that to work? I would expect <code>gatto.p1.a</code> to work though.."}], "owner": {"reputation": 405, "user_id": 9177422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c14c092c695c495f5800a92ebfd0b4a?s=128&d=identicon&r=PG&f=1", "display_name": "maurock", "link": "https://stackoverflow.com/users/9177422/maurock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 672, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1572986416, "creation_date": 1563385767, "last_edit_date": 1592644375, "question_id": 57081632, "link": "https://stackoverflow.com/questions/57081632/pybind11-for-classes-initialized-with-custom-variables", "title": "pybind11 for classes initialized with custom variables", "body": "<p>I am new to pybind11 and I am using it to implement some C++ functions and classes in python. Reading the documentation, I understand how to implement classes where standard types are passed as variables in the constructor. I cannot find how to pass custom variables. <br></p>\n<h3>Simple example and solution</h3>\n<p>The first easier example is: <br></p>\n<pre><code>struct Vec {\n    float x, y, z;    \n    Vec(float x_ = 0, float y_ = 0, float z_ = 0) {\n        x = x_;\n        y = y_;\n        z = z_;\n    }\n    float func(const int &amp;b) const {\n        return x * b.x + y * b.y + z * b.z;\n    }\n</code></pre>\n<p>To import this in python, I would do (and hopefully it's correct):</p>\n<pre><code>PYBIND11_MODULE(some_module, m) {\n\n    py::class_&lt;Vec&gt;(m, &quot;Vec&quot;);\n        .def(py::init&lt;float, float, float&gt;())\n        .def(&quot;func&quot;, &amp;Vec::func)\n}\n</code></pre>\n<h3>Question</h3>\n<p>Now, if my constructor doesn't take <code>float</code> and <code>int</code>, how can I do that? I'll show an example:</p>\n<pre><code>class Rectangle_xz {\npublic:\n    float x1, x2, z1, z2, y;\n    Vec e, c;        \n    Refl_t refl;      \n    Rectangle_xz(float x1_, float x2_, float z1_, float z2_, float y_,\n            Vec e_, Vec c_, Refl_t refl_) :\n            x1(x1_), x2(x2_), z1(z1_), z2(z2_), y(y_), e(e_), c(c_), refl(refl_) {}\n}\n</code></pre>\n<p>In this case, my constructor needs two different types, <code>Vec</code> and <code>Refl_t</code>. <br>\nSimilar question for those functions that accept a custom type:</p>\n<pre><code>Vec normal(const Ray &amp;r, Hit_records &amp;hit, Vec &amp;x) const {\n        Vec n = Vec(0, 1, 0);\n        hit.refl = refl;\n        hit.c = c;\n        hit.e = e;\n        return n.dot(r.d) &lt; 0 ? n : n * -1;\n    }\n</code></pre>\n<h3>EDIT</h3>\n<p>I tried with a simple example, to see if after initializing a class, I could pass that class as a variable.</p>\n<pre><code>class Person {\npublic:\n    int a, b;\n    Person(int a_, int b_) :\n        a(a_), b(b_){}  \n};\n\nclass Gatto {\npublic:\n    Person p1;\n    Gatto(Person p1_) : \n        p1(p1_){}   };\n\nPYBIND11_MODULE(person_example, m) {\n    py::class_&lt;Person&gt;(m, &quot;Person&quot;)\n        .def(py::init&lt;int, int&gt;())\n        .def_readwrite(&quot;a&quot;, &amp;Person::a)\n        .def_readwrite(&quot;b&quot;, &amp;Person::b);\n\n    py::class_&lt;Gatto&gt;(m, &quot;Gatto&quot;)\n        .def(py::init&lt;&amp;Person&gt;())\n        .def_readwrite(&quot;p1&quot;, &amp;Gatto::p1);\n}\n</code></pre>\n<p>This now works, but I cannot get the <code>a</code> and <code>b</code> variables from <code>Gatto</code>, when I pass the <code>Person</code> object to its constructor. Indeed, <code>Gatto</code> only has the variable <code>p1</code>, which returns the pointer to the object <code>Person</code>.</p>\n"}, {"tags": ["c++", "multithreading", "qt"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1563385563, "post_id": 57081565, "comment_id": 100686018, "body": "In Qt, this is the kind of thing you can use a <code>QTimer</code> for. It will just get the main Qt thread to do it during it&#39;s down time. There&#39;s also the possibility of directly calling <code>QCoreApplication::processEvents</code> your loop to allow the UI to progress. I&#39;m not sure you want to invest into the effort of threading your <code>process</code>."}, {"owner": {"reputation": 163, "user_id": 10077673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35fff83398af8ae0fec59673b135b31d?s=128&d=identicon&r=PG&f=1", "display_name": "froz", "link": "https://stackoverflow.com/users/10077673/froz"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1563385592, "post_id": 57081565, "comment_id": 100686026, "body": "Do you have a minimal example or a link to a minimal example?"}], "owner": {"reputation": 163, "user_id": 10077673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35fff83398af8ae0fec59673b135b31d?s=128&d=identicon&r=PG&f=1", "display_name": "froz", "link": "https://stackoverflow.com/users/10077673/froz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1563385991, "answer_count": 0, "score": 0, "last_activity_date": 1563385446, "creation_date": 1563385446, "question_id": 57081565, "link": "https://stackoverflow.com/questions/57081565/how-to-avoid-freezing-the-user-interface-in-a-loop-minimal-example", "closed_reason": "Duplicate", "title": "How to avoid freezing the user interface in a loop (minimal example)", "body": "<p>I have a QT GUI with a QProgressBar.\nWhen I clic on a QPushButton, a calculation loop is called from another class. However, my interface is freezing and my QProgressBar is not updated during the calculation process. I tried different examples on internet but I do not succeed to make something work. I provide my test below:</p>\n\n<p>MainWindow.cpp</p>\n\n<pre><code>#include \"MainWindow.h\"\n\nMainWindow::MainWindow(QWidget *parent)\n    : QMainWindow(parent)\n{\n    ui.setupUi(this);\n    QObject::connect(this-&gt;ui.pushbutton, SIGNAL(clicked()), this, SLOT(process()));\n}\n\nvoid MainWindow::process()\n{\n    ListCalc m_Calcul(ui.qprogressbar);\n    auto thread = new QThread();\n    m_Calcul-&gt;moveToThread(thread);\n    m_Calcul.process(); // This is the action I would like to put in a thread !\n}\n</code></pre>\n\n<p>MainWindow.h</p>\n\n<pre><code>#include \"ListCalc.h\"\n\nusing namespace std;\n\nnamespace Ui {\n    class MainWindow;\n}\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\n\nprivate:\n    Ui::MainWindowClass ui;\n\npublic:\n    MainWindow(QWidget *parent = Q_NULLPTR);\n    ListCalc m_Calcul;\n\nprivate slots:\n    void process();\n};\n</code></pre>\n\n<p>ListCalc.cpp</p>\n\n<pre><code>#include \"ListCalc.h\"\n\nListCalc::ListCalc(QProgressBar* bar) :\n    m_Bar(bar)\n{\n\n}\n\nListCalc::~ListCalc()\n{\n\n}\n\nvoid ListCalc::process()\n{\n    auto size = 30000;\n    for (auto i = 0;i &lt; size;++i)\n    {\n        m_Bar-&gt;setValue(i / size * 100);\n        std::cout&lt;&lt;\"1\"&lt;&lt;std::endl;\n    }\n}\n</code></pre>\n\n<p>ListCalc.h</p>\n\n<pre><code>class ListCalc : public QObject\n{\n    Q_OBJECT\n\npublic:\n    ListCalc(QProgressBar*);\n    ~ListCalc();\n\nprivate:\n    QProgressBar* m_Bar;\npublic slots:\n    void process();\n\n};\n</code></pre>\n\n<p>Any idea of how I could do this?\nIf you could give me a simple example on how to change my code to succeed</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"tags": [], "owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "is_accepted": true, "score": 0, "last_activity_date": 1563388457, "creation_date": 1563388457, "answer_id": 57082256, "question_id": 57081367, "link": "https://stackoverflow.com/questions/57081367/how-to-call-a-shared-class-member-function-in-a-subdirs-project/57082256#57082256", "title": "How to call a shared class member function in a subdirs project?", "body": "<p>Adding <code>Q_DECL_EXPORT</code> (or <code>PROJECTCORESHARED_EXPORT</code>) to all the classes that method uses fixed the problem.</p>\n"}], "owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 1, "accepted_answer_id": 57082256, "answer_count": 1, "score": 0, "last_activity_date": 1563388457, "creation_date": 1563384628, "question_id": 57081367, "link": "https://stackoverflow.com/questions/57081367/how-to-call-a-shared-class-member-function-in-a-subdirs-project", "title": "How to call a shared class member function in a subdirs project?", "body": "<p>I have a Qt subdirs project called <code>Project</code>.</p>\n\n<pre><code># Project.pro\nTEMPLATE = subdirs\n\nSUBDIRS += \\\n    Project-core \\\n    Project-gui\n\n\nProject-gui.depends = Project-core\n</code></pre>\n\n<p><code>Project-gui</code> has to call a function from <code>Project-core</code>, so I linked the projects as was shown in the <a href=\"https://wiki.qt.io/How_to_create_a_library_with_Qt_and_use_it_in_an_application\" rel=\"nofollow noreferrer\">website</a>:</p>\n\n<blockquote>\n  <p>you can right-click your project in Qt Creator and select \"Add Library...\", choose \"External library\" and browse for your library file:</p>\n</blockquote>\n\n<p>I did this but I chose \"internal library\" instead of \"external library\". Now I am able to include header files of <code>Project-core</code> in <code>Project-gui</code>, and I marked one of the classes as <code>Q_DECL_EXPORT</code>. I tried to call a (static) member function of this class. But now I when I want to compile the project, the compiler output is a long and complicated error message:</p>\n\n<pre><code>21:14:15: Running steps for project Project...\n21:14:15: Configuration unchanged, skipping qmake step.\n21:14:15: Starting: \"C:\\Qt\\Qt5.12.1\\Tools\\mingw730_64\\bin\\mingw32-make.exe\" -j8\ncd Project-core\\ &amp;&amp; ( if not exist Makefile C:\\Qt\\Qt5.12.1\\5.12.1\\mingw73_64\\bin\\qmake.exe -o Makefile C:\\Users\\Usr\\Desktop\\Project\\Alpha\\Project\\Project-core\\Project-core.pro -spec win32-g++ \"CONFIG+=debug\" \"CONFIG+=qml_debug\" ) &amp;&amp; C:/Qt/Qt5.12.1/Tools/mingw730_64/bin/mingw32-make -f Makefile \nmingw32-make[1]: Entering directory 'C:/Users/Usr/Desktop/Project/Alpha/Project/Project-core'\nC:/Qt/Qt5.12.1/Tools/mingw730_64/bin/mingw32-make -f Makefile.Debug\nmingw32-make[2]: Entering directory 'C:/Users/Usr/Desktop/Project/Alpha/Project/Project-core'\nmingw32-make[2]: Nothing to be done for 'first'.\nmingw32-make[2]: Leaving directory 'C:/Users/Usr/Desktop/Project/Alpha/Project/Project-core'\nmingw32-make[1]: Leaving directory 'C:/Users/Usr/Desktop/Project/Alpha/Project/Project-core'\ncd Project-gui\\ &amp;&amp; ( if not exist Makefile C:\\Qt\\Qt5.12.1\\5.12.1\\mingw73_64\\bin\\qmake.exe -o Makefile C:\\Users\\Usr\\Desktop\\Project\\Alpha\\Project\\Project-gui\\Project-gui.pro -spec win32-g++ \"CONFIG+=debug\" \"CONFIG+=qml_debug\" ) &amp;&amp; C:/Qt/Qt5.12.1/Tools/mingw730_64/bin/mingw32-make -f Makefile \nmingw32-make[1]: Entering directory 'C:/Users/Usr/Desktop/Project/Alpha/Project/Project-gui'\nC:/Qt/Qt5.12.1/Tools/mingw730_64/bin/mingw32-make -f Makefile.Debug\nmingw32-make[2]: Entering directory 'C:/Users/Usr/Desktop/Project/Alpha/Project/Project-gui'\nmingw32-make[2]: Nothing to be done for 'first'.\nmingw32-make[2]: Leaving directory 'C:/Users/Usr/Desktop/Project/Alpha/Project/Project-gui'\nmingw32-make[1]: Leaving directory 'C:/Users/Usr/Desktop/Project/Alpha/Project/Project-gui'\n21:14:20: The process \"C:\\Qt\\Qt5.12.1\\Tools\\mingw730_64\\bin\\mingw32-make.exe\" exited normally.\n21:14:20: Elapsed time: 00:05.\n</code></pre>\n\n<p>The error disappears if I don't call the function. What am I doing wrong?</p>\n"}, {"tags": ["c++", "c", "compiler-optimization", "endianness", "bit-fields"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1563384546, "post_id": 57081289, "comment_id": 100685540, "body": "The code does not compile in C (MSVC)."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1563384839, "post_id": 57081289, "comment_id": 100685676, "body": "@WeatherVane: It&#39;s not supposed to. The OP said it&#39;s C++. Now, why the OP feels the need to put C++ in a question about C is a different matter."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1563384907, "post_id": 57081289, "comment_id": 100685715, "body": "@NicolBolas it has the C tag. There is no C/C++ language as mentioned in the post, or entire C/C++ community."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 1, "creation_date": 1563384946, "post_id": 57081289, "comment_id": 100685730, "body": "Compiler Explorer (gcc.godbolt.org) has a nice selection of compilers/platforms. Why not test it there and post the results? I would upvote."}, {"owner": {"reputation": 21, "user_id": 5498998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67bd3bd72594851bd5a617fbcaf621ed?s=128&d=identicon&r=PG&f=1", "display_name": "RBornert", "link": "https://stackoverflow.com/users/5498998/rbornert"}, "edited": false, "score": 0, "creation_date": 1563384991, "post_id": 57081289, "comment_id": 100685751, "body": ":) Well it is C++ code, so you&#39;d need to convert it to C."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1563385026, "post_id": 57081289, "comment_id": 100685771, "body": "<i>I&#39;ve attached straightforward C++ source code to tell the bit-field truth</i> How many different compilers did you use?  On how many different systems?  How many of those systems were big-endian?  How many of those systems were little-endian?  From what you&#39;ve posted, your &quot;truth&quot; applies to using one compiler on one operating system running on little-endian hardware.  That&#39;s no &quot;truth&quot;.  If you want to make an assertion, do the work to support it."}, {"owner": {"reputation": 21, "user_id": 5498998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67bd3bd72594851bd5a617fbcaf621ed?s=128&d=identicon&r=PG&f=1", "display_name": "RBornert", "link": "https://stackoverflow.com/users/5498998/rbornert"}, "edited": false, "score": 0, "creation_date": 1563385101, "post_id": 57081289, "comment_id": 100685813, "body": "In general the OP question applies to both C and C++, that is, unless somebody can point to a C++ spec where all of the ambiguity cited in the C standard is settled."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 4, "creation_date": 1563385172, "post_id": 57081289, "comment_id": 100685847, "body": "@RBornert: &quot;<i>This looming freedom for the compiler seems to be a full-stop for many who claim &quot;you cannot trust bit-fields&quot;, or &quot;bit-fields are not portable.&quot;</i>&quot; I&#39;m not sure I understand your point. Or more specifically, it&#39;s not clear exactly what these objections are referring to. You&#39;re basically claiming that &quot;some people&quot; have said &quot;some thing&quot;, in some context you have not provided, and then dared people to find practical examples of that &quot;some thing&quot; being the case. Bitfields certainly are portable, in that <i>valid</i> code written against them will work across platforms."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 3, "creation_date": 1563386072, "post_id": 57081289, "comment_id": 100686248, "body": "The (non) portability of bitfields is often misunderstood.  Bitfields are just about exactly as portable as ordinary ints.  If you&#39;re describing data structures to be used within a program, they&#39;re quite portable and can be used perfectly portably.  But if you&#39;re describing data formats to be used for interchange, read/written to files or network streams, there are significant portability difficulties.  These can generally be overcome (for bitfields as well as for ordinary ints), although ugly ifdefs may be required."}, {"owner": {"reputation": 21, "user_id": 5498998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67bd3bd72594851bd5a617fbcaf621ed?s=128&d=identicon&r=PG&f=1", "display_name": "RBornert", "link": "https://stackoverflow.com/users/5498998/rbornert"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563386764, "post_id": 57081289, "comment_id": 100686541, "body": "@AndrewHenle You&#39;re more or less making my point.  You&#39;re trying to burden me with questing to find a bunch of exotic architecture.  I can&#39;t and not for trying.  Big endian is not as common, now, as the caution suggests.  In the early days of computing, Big endian was more common.  How many members here will ACTUALLY post output results that diverge from what I posted?  That any of us can consider the possibility of Big Foot is not the same as actually finding one right now. :)   Opinions about Big Foot are easy.  Finding one not so much these days."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1563387438, "post_id": 57081289, "comment_id": 100686831, "body": "@RBornert &quot;I don&#39;t think that will happen, so it can be ignored&quot;?  How&#39;s that working for Boeing? You&#39;re also assuming bit-field layout is only influenced by endianness.  That&#39;s wrong, too. &quot;Implementation-defined&quot; means the compiler gets to choose - different compilers on the same platform can do it differently.  Writing robust, reliable code means you discount <b>nothing</b>."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1563387733, "post_id": 57081289, "comment_id": 100686979, "body": "I&#39;m someone who has said &quot;<a href=\"https://stackoverflow.com/questions/53118858/bit-manipulations-good-practices/53119001#53119001\">don&#39;t use bitfields</a>&quot;.  But you&#39;re probably right: there&#39;s probably a vast majority of little-endian machines out there that all do bitfields the same way.  If you want to assume that architecture, you probably won&#39;t get in too much trouble, and no one here is going to stop you.  (It sounds like your mind&#39;s basically made up already, anyway.)"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1563388033, "post_id": 57081289, "comment_id": 100687113, "body": "@SteveSummit <i>Bitfields are just about exactly as portable as ordinary ints</i> I&#39;ll have to disagree with that.  Compilers aren&#39;t free change the ordering of integral values in a structure.  They can with bit-fields."}, {"owner": {"reputation": 21, "user_id": 5498998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67bd3bd72594851bd5a617fbcaf621ed?s=128&d=identicon&r=PG&f=1", "display_name": "RBornert", "link": "https://stackoverflow.com/users/5498998/rbornert"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563388182, "post_id": 57081289, "comment_id": 100687188, "body": "@AndrewHenle  I agree with you in the case where the developer does not have any control over the nature of the software at a network endpoint.  If you control the compiler and CPU architecture for network endpoints, then bit-field endianness is NOT an issue.  I&#39;d like to point out that Microsoft did a decent job of removing the ambiguity for bit field sizing and alignment.  The nature of the output I posted is evidence of such.  Also, GNU has compiler flags that conform to Microsoft normalization."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563388705, "post_id": 57081289, "comment_id": 100687425, "body": "@RBornert You&#39;re also assuming what you have control over now you&#39;ll remain in control of in the future. The output currently posted doesn&#39;t even establish that Microsoft treats bit-fields consistently. Barring bugs every compiler pretty much <b>must</b> do that - you just don&#39;t prove it here as you compile your code <i>once</i>. You didn&#39;t document testing it with different compiler options, 32-bit vs. 64-bit, different versions of the compiler, different versions of the OS, yet you&#39;re claiming you&#39;ve removed the ambiguity?"}, {"owner": {"reputation": 21, "user_id": 5498998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67bd3bd72594851bd5a617fbcaf621ed?s=128&d=identicon&r=PG&f=1", "display_name": "RBornert", "link": "https://stackoverflow.com/users/5498998/rbornert"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563389303, "post_id": 57081289, "comment_id": 100687702, "body": "@AndrewHenle  If you use any recent Microsoft compiler on Intel or AMD systems, you will get the posted output for both 32bit and 64bit builds.  And in fact I&#39;ve been writing C source code since 1987, C++ since 1990. Not once have I seen any C/C++ compiler NOT pack bit-fields exactly like the posted output.  Where is the evidence for any C/C++ compiler that is packing bit-fields differently?  Show me the evidence please."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1563390310, "post_id": 57081289, "comment_id": 100688157, "body": "@RBornert <i>If you use any recent Microsoft compiler on Intel or AMD systems, you will get the posted output for both 32bit and 64bit builds.</i>  If that&#39;s the entirety of your universe, fine. But you&#39;re trying to imply what works there will work everywhere, and it&#39;s up to us to actually prove it won&#39;t.  I&#39;d say you have that backwards.  I&#39;d rather write code based on assurances that things <b>will</b> work no matter what and therefore prefer strictly-compliant C code that doesn&#39;t rely on implementation-defined behavior."}, {"owner": {"reputation": 21, "user_id": 5498998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67bd3bd72594851bd5a617fbcaf621ed?s=128&d=identicon&r=PG&f=1", "display_name": "RBornert", "link": "https://stackoverflow.com/users/5498998/rbornert"}, "edited": false, "score": 0, "creation_date": 1563391105, "post_id": 57081289, "comment_id": 100688487, "body": "<a href=\"https://docs.microsoft.com/en-us/cpp/cpp/cpp-bit-fields?view=vs-2019\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/cpp/cpp/cpp-bit-fields?view=vs-2019</a> : &quot;The ordering of data declared as bit fields is from low to high bit, as shown in the figure above.&quot;  <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.8.5/gcc/Variable-Attributes.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc-4.8.5/gcc/Variable-Attributes.htm&zwnj;&#8203;l</a> : &quot;-mms-bitfields&quot; flag will have the compiler produce bitfields per Microsofts low to high packing."}, {"owner": {"reputation": 21, "user_id": 5498998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67bd3bd72594851bd5a617fbcaf621ed?s=128&d=identicon&r=PG&f=1", "display_name": "RBornert", "link": "https://stackoverflow.com/users/5498998/rbornert"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563391525, "post_id": 57081289, "comment_id": 100688666, "body": "@AndrewHenle  Ok let us say &quot;my world&quot; is limited to Windows systems and Linux systems.  Where is the evidence that I need to worry about anything?  MS has removed all ambiguity about bit-packing and the gnu compiler will conform to what MS is doing.  So these 2 environments cover what percentage of computers right now?  I&#39;m not claiming there are zero Big Foot.  I&#39;m claiming that the evidence for needing to care about Big Foot is disappearing."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1563393661, "post_id": 57081289, "comment_id": 100689635, "body": "@RBornert I don&#39;t think we&#39;re going to hear a collective forehead slap, from all of the commenters here, saying &quot;Zounds!  You&#39;re right!  Bitfields are no longer a portability issue!  We should all use them (with assumptions about their ordering) with wild abandon now!&quot;  Equally, I don&#39;t think we&#39;re going to convince you that bitfield portability is still something to be concerned about.  So I&#39;m not seeing where this discussion is going."}, {"owner": {"reputation": 21, "user_id": 5498998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67bd3bd72594851bd5a617fbcaf621ed?s=128&d=identicon&r=PG&f=1", "display_name": "RBornert", "link": "https://stackoverflow.com/users/5498998/rbornert"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1563394821, "post_id": 57081289, "comment_id": 100690145, "body": "@SteveSummit Let&#39;s agree that for OS source code and compiler source code and open network packet exchange source code, no forehead &quot;Zounds&quot; will be happening.  However, for application layer developers who have a lot of control over target run environments including hardware and compilers, I cannot find any reason to not use bit-fields as a matter of safe predictable convenience.  I will let the source code I posted stand as evidence until somebody posts a valid instance of it failing to work as expected.  At a minimum, a Win/Linux developer can probably say &quot;Zounds!&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1563385417, "post_id": 57081370, "comment_id": 100685949, "body": "I&#39;ll note that the code you posted implicitly assumes the compiler used will place the bit-fields in the proper locations per relevant IP standards based merely on the endianness of the machine.  There&#39;s nothing in the C standard that requires that."}, {"owner": {"reputation": 21, "user_id": 5498998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67bd3bd72594851bd5a617fbcaf621ed?s=128&d=identicon&r=PG&f=1", "display_name": "RBornert", "link": "https://stackoverflow.com/users/5498998/rbornert"}, "edited": false, "score": 0, "creation_date": 1563385429, "post_id": 57081370, "comment_id": 100685957, "body": "I hear you.  Have been aware of examples like this my entire career.  I understand endianness issues.  This struct is evidence that the looming endianness issue is solved.  The nature of my post has to do with the &quot;actual number of Big Foot&quot; in the forest versus &quot;omg there might be a Big Foot&quot; in the forest."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 21, "user_id": 5498998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67bd3bd72594851bd5a617fbcaf621ed?s=128&d=identicon&r=PG&f=1", "display_name": "RBornert", "link": "https://stackoverflow.com/users/5498998/rbornert"}, "edited": false, "score": 2, "creation_date": 1563385540, "post_id": 57081370, "comment_id": 100686007, "body": "@RBornert Ignoring the Big Foot that might be in the forest is how you wind up with sloppy code that gets stomped with bugs.  My standards are higher than that."}, {"owner": {"reputation": 21, "user_id": 5498998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67bd3bd72594851bd5a617fbcaf621ed?s=128&d=identicon&r=PG&f=1", "display_name": "RBornert", "link": "https://stackoverflow.com/users/5498998/rbornert"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1563387202, "post_id": 57081370, "comment_id": 100686725, "body": "@AndrewHenle  On an open network with no expectation of any normalcy other then Network byte order, then I agree with you.  However, for client server systems where the developer controls both sides then there is no reason to be scared of bit-fields.  I&#39;ve used them safely for years in a controlled predictable context."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 21, "user_id": 5498998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67bd3bd72594851bd5a617fbcaf621ed?s=128&d=identicon&r=PG&f=1", "display_name": "RBornert", "link": "https://stackoverflow.com/users/5498998/rbornert"}, "edited": false, "score": 0, "creation_date": 1563388231, "post_id": 57081370, "comment_id": 100687224, "body": "@RBornert Your use of ridicule (Big Foot?!? really?) and straw men (&quot;scared of bit-fields&quot;) is based on what?"}, {"owner": {"reputation": 21, "user_id": 5498998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67bd3bd72594851bd5a617fbcaf621ed?s=128&d=identicon&r=PG&f=1", "display_name": "RBornert", "link": "https://stackoverflow.com/users/5498998/rbornert"}, "edited": false, "score": 0, "creation_date": 1563391079, "post_id": 57081370, "comment_id": 100688470, "body": "<a href=\"https://docs.microsoft.com/en-us/cpp/cpp/cpp-bit-fields?view=vs-2019\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/cpp/cpp/cpp-bit-fields?view=vs-2019</a> : &quot;The ordering of data declared as bit fields is from low to high bit, as shown in the figure above.&quot;  <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.8.5/gcc/Variable-Attributes.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc-4.8.5/gcc/Variable-Attributes.htm&zwnj;&#8203;l</a> : &quot;-mms-bitfields&quot; flag will have the compiler produce bitfields per Microsofts low to high packing."}, {"owner": {"reputation": 21, "user_id": 5498998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67bd3bd72594851bd5a617fbcaf621ed?s=128&d=identicon&r=PG&f=1", "display_name": "RBornert", "link": "https://stackoverflow.com/users/5498998/rbornert"}, "edited": false, "score": 0, "creation_date": 1563400699, "post_id": 57081370, "comment_id": 100692193, "body": "Just found this, and to some degree, there is an attempt to say the same thing.  <a href=\"https://softwareengineering.stackexchange.com/questions/165899/has-little-endian-won\" title=\"has little endian won\">softwareengineering.stackexchange.com/questions/165899/&hellip;</a>"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 5, "last_activity_date": 1563384631, "creation_date": 1563384631, "answer_id": 57081370, "question_id": 57081289, "link": "https://stackoverflow.com/questions/57081289/c-c-is-bitfield-endianess-really-a-problem-in-actual-practice/57081370#57081370", "title": "C/C++ Is bitfield endianess really a problem in actual practice?", "body": "<p>One common way that bitfields can differ is in bit endianness.  Little endian machine will have the low order bits first while big endian machines have the high order bits first.</p>\n\n<p>As an example, here is the definition of <code>struct iphdr</code>, which models an IP header, taken from /usr/include/netinet/ip.h on a CentOS 7.2 system:</p>\n\n<pre><code>struct iphdr\n  {\n#if __BYTE_ORDER == __LITTLE_ENDIAN\n    unsigned int ihl:4;\n    unsigned int version:4;\n#elif __BYTE_ORDER == __BIG_ENDIAN\n    unsigned int version:4;\n    unsigned int ihl:4;\n#else\n# error \"Please fix &lt;bits/endian.h&gt;\"\n#endif\n    u_int8_t tos;\n    u_int16_t tot_len;\n    u_int16_t id;\n    u_int16_t frag_off;\n    u_int8_t ttl;\n    u_int8_t protocol;\n    u_int16_t check;\n    u_int32_t saddr;\n    u_int32_t daddr;\n    /*The options start here. */\n  };\n</code></pre>\n\n<p>This struct is meant to be layered directly on top of a buffer containing a raw IP datagram at the point the IP header starts.  Note that the ordering of the <code>version</code> and <code>ihl</code> fields differ depending on the endianness.</p>\n\n<p>And in reference to this:</p>\n\n<blockquote>\n  <p>a whole herd of compiler writers and CPU makers conspiring in a star chamber, just grinning and anxious to do some exotic bit-field sizing and alignments simply because the standard permits.</p>\n</blockquote>\n\n<p>Compiler writers are indeed quick to take advantage of any behavior undefined or unspecified by the standard in order to perform a wide variety of optimizations that might surprise those that think C always behaves as a thin wrapper around assembly language.</p>\n"}], "owner": {"reputation": 21, "user_id": 5498998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67bd3bd72594851bd5a617fbcaf621ed?s=128&d=identicon&r=PG&f=1", "display_name": "RBornert", "link": "https://stackoverflow.com/users/5498998/rbornert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1563384631, "creation_date": 1563384313, "question_id": 57081289, "link": "https://stackoverflow.com/questions/57081289/c-c-is-bitfield-endianess-really-a-problem-in-actual-practice", "title": "C/C++ Is bitfield endianess really a problem in actual practice?", "body": "<p>So per the C compiler standard here:</p>\n\n<p><a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf\" rel=\"nofollow noreferrer\">http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf</a></p>\n\n<p>We find a failure to pin down requirements for exactly how bit-fields get implemented inside a C compiler.  Apparently, as long as the bit-fields behave like any other scalar field, anything goes.  The doc section 6.7.2.1-10 says:</p>\n\n<blockquote>\n  <p>\"An implementation may allocate any addressable storage unit large\n  enough to hold a bit-field. If enough space remains, a bit-field that\n  immediately follows another bit-field in a structure shall be packed\n  into adjacent bits of the same unit. If insufficient space remains,\n  whether a bit-field that does not fit is put into the next unit or\n  overlaps adjacent units is implementation-defined. The order of\n  allocation of bit-fields within a unit (high-order to low-order or\n  low-order to high-order) is implementation-defined. The alignment of\n  the addressable storage unit is unspecified.\"</p>\n</blockquote>\n\n<p>This looming freedom for the compiler seems to be a full-stop for many who claim \"you cannot trust bit-fields\",  or \"bit-fields are not portable.\"  The alarm suggests a whole herd of compiler writers and CPU makers conspiring in a star chamber, just grinning and anxious to do some exotic bit-field sizing and alignments simply because the standard permits.</p>\n\n<p>WHERE IS THE EVIDENCE for these crazy bohemian compiler/CPU designers who are dedicated to guaranteeing that bit-fields remain forever undependable and unportable?  I want to see actual hard evidence of the green-men on mars.</p>\n\n<p>I've attached straightforward C++ source code to tell the bit-field truth about any system with a C++ compiler.  I am asking the community, NOT for opinion, but for hard output evidence for your system and compiler if it diverges from the results posted.  If I had the ability to poll the entire C/C++ community for same/not-same vote compared to the posted results, I wonder what the percentages would be?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n/*\n A simple program to illustrate the bitfields actual internal compiled layout.\n Results depend on machine architecture and compiler implementation and flags.\n*/\n\ntypedef unsigned long long int ulli;\n\nstruct bitf\n{\n    //   field      bits  offset\n    ulli f0         : 1; // 0\n    ulli f1         : 2; // 1\n    ulli f3         : 3; // 3\n    ulli f7         : 4; // 6\n    ulli f15        : 5; // 10\n    ulli f31        : 6; // 15\n    ulli f63        : 7; // 21\n    ulli f127       : 8; // 28\n    ulli f255       : 9; // 36\n    ulli f511       :10; // 45\n    ulli end        : 9; // 55\n                         // 64\n\n    bitf():\n         f0         ( 0 )\n        ,f1         ( 1 )\n        ,f3         ( 3 )\n        ,f7         ( 7 )\n        ,f15        ( 15 )\n        ,f31        ( 31 )\n        ,f63        ( 63 )\n        ,f127       ( 127 )\n        ,f255       ( 255 )\n        ,f511       ( 511 )\n        ,end        ( 0 )\n    {}\n\n    ulli get_shft() const\n    {\n        ulli bits=0;\n        bits &lt;&lt;= 9; bits |=   0;\n        bits &lt;&lt;=10; bits |= 511;\n        bits &lt;&lt;= 9; bits |= 255;\n        bits &lt;&lt;= 8; bits |= 127;\n        bits &lt;&lt;= 7; bits |=  63;\n        bits &lt;&lt;= 6; bits |=  31;\n        bits &lt;&lt;= 5; bits |=  15;\n        bits &lt;&lt;= 4; bits |=   7;\n        bits &lt;&lt;= 3; bits |=   3;\n        bits &lt;&lt;= 2; bits |=   1;\n        bits &lt;&lt;= 1; bits |=   0;\n        return bits;\n    }\n\n    ulli get_cast() const\n    {\n        ulli bits = *((ulli*)(this));\n        return bits;\n    }\n};\n\nint main()\n{\n    bitf bf;\n    ulli shft = bf.get_shft();\n    ulli cast = bf.get_cast();\n\n    printf(\"sizeof(ulli) is %zu\\n\\n\",sizeof(ulli));\n    printf(\"shft%scast\\n\\n\",(shft==cast)?\"==\":\"!=\");\n    printf(\"BITS from MSB 63 (left) down to LSB 0 (right)\\n\");\n    printf(\"    : \"); for(int i=63; i&gt;=0; i--) printf(\"%c\",(i%10)==0 ? i/10 +'0' : ' '); printf(\"\\n\");\n    printf(\"    : \"); for(int i=63; i&gt;=0; i--) printf(\"%d\",i%10); printf(\"\\n\");\n    printf(\"shft: \"); for(int i=63; i&gt;=0; i--) printf(\"%llu\",(shft&gt;&gt;i)&amp;1); printf(\"\\n\");\n    printf(\"cast: \"); for(int i=63; i&gt;=0; i--) printf(\"%llu\",(cast&gt;&gt;i)&amp;1); printf(\"\\n\");\n    printf(\"    : ====----====----====----====----====----====----====----====----\\n\");\n    printf(\"shft: \"); for(int i=15;i&gt;=0;i--) printf(\"%4llx\",(shft&gt;&gt;(i*4)&amp;0xf)); printf(\"\\n\");\n    printf(\"cast: \"); for(int i=15;i&gt;=0;i--) printf(\"%4llx\",(cast&gt;&gt;(i*4)&amp;0xf)); printf(\"\\n\");\n    printf(\"    : ====----====----====----====----====----====----====----====----\\n\");\n    unsigned char *pb;\n    pb = (unsigned char*)(&amp;shft);\n    printf(\"shft: \"); for(int i=sizeof(shft)-1; i&gt;=0; i--) printf(\"%8x\", pb[i]); printf(\"\\n\");\n    pb = (unsigned char*)(&amp;cast);\n    printf(\"cast: \"); for(int i=sizeof(cast)-1; i&gt;=0; i--) printf(\"%8x\", pb[i]); printf(\"\\n\");\n    printf(\"\\n\");\n\n    printf(\"&lt;ENTER&gt;\"); getchar();\n    return 0;\n}\n</code></pre>\n\n<p>Results for Intel Core i7, Win10, VS2015, 64bit build</p>\n\n<pre><code>sizeof(ulli) is 8\n\nshft==cast\n\nBITS from MSB 63 (left) down to LSB 0 (right)\n    :    6         5         4         3         2         1         0\n    : 3210987654321098765432109876543210987654321098765432109876543210\nshft: 0000000000111111111011111111011111110111111011111011110111011010\ncast: 0000000000111111111011111111011111110111111011111011110111011010\n    : ====----====----====----====----====----====----====----====----\nshft:    0   0   3   f   e   f   f   7   f   7   e   f   b   d   d   a\ncast:    0   0   3   f   e   f   f   7   f   7   e   f   b   d   d   a\n    : ====----====----====----====----====----====----====----====----\nshft:        0      3f      ef      f7      f7      ef      bd      da\ncast:        0      3f      ef      f7      f7      ef      bd      da\n\n&lt;ENTER&gt;\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1563383994, "post_id": 57081140, "comment_id": 100685331, "body": "<b><i>I keep getting an error that says there is no matching function to call</i></b> Please edit your question and add the exact text of the error message. If this is Visual Studio copy that from the Output tab its in a better format than the errors list."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 1, "creation_date": 1563384065, "post_id": 57081140, "comment_id": 100685366, "body": "in <code>main</code> <code>categories</code> is an array, in <code>readResponses</code> <code>categories</code> is a single string"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1563392716, "post_id": 57081140, "comment_id": 100689181, "body": "Why are you using the <code>start:</code> label?  In most (90%+) programs, labels are not needed."}], "answers": [{"tags": [], "owner": {"reputation": 846, "user_id": 7511460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cz0P7.png?s=128&g=1", "display_name": "Adrien Givry", "link": "https://stackoverflow.com/users/7511460/adrien-givry"}, "is_accepted": true, "score": 2, "last_activity_date": 1563384036, "creation_date": 1563384036, "answer_id": 57081213, "question_id": 57081140, "link": "https://stackoverflow.com/questions/57081140/function-call-not-being-recognized/57081213#57081213", "title": "Function call not being recognized", "body": "<p>In function <code>readResponses</code>, You declared <code>string categories</code> and you use <code>string categories[]</code> in your definition</p>\n"}], "owner": {"reputation": 21, "user_id": 11789923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afa6697a991cc81da7b7657f47b0cb9e?s=128&d=identicon&r=PG&f=1", "display_name": "Xenon8891", "link": "https://stackoverflow.com/users/11789923/xenon8891"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 57081213, "answer_count": 1, "score": -3, "last_activity_date": 1563385761, "creation_date": 1563383750, "last_edit_date": 1563385761, "question_id": 57081140, "link": "https://stackoverflow.com/questions/57081140/function-call-not-being-recognized", "title": "Function call not being recognized", "body": "<p>I am writing a magic eight ball program for an assignment. All of my function calls work except for one. I keep getting an error that says there is no matching function to call. A copy of the prototype was used to make the call so I know it isn't a typo. I cannot figure out why as it seems to be set up correctly to me.</p>\n\n<p>main.cpp:</p>\n\n<pre><code>int main() {\n\n    const int MAXSIZE = 100;\n    int size;\n    string responses[MAXSIZE];\n    string categories[MAXSIZE];\n    srand(time(0));\n\n    start:\n    cout &lt;&lt; \"A. Read responses/categories from file\" &lt;&lt; endl;\n    cout &lt;&lt; \"B. Play Magic Eight Ball\" &lt;&lt; endl;\n    cout &lt;&lt; \"C. Sort by responses\" &lt;&lt; endl;\n    cout &lt;&lt; \"D. Sort by categories\" &lt;&lt; endl;\n    cout &lt;&lt; \"E. Write responses/categories to a file\" &lt;&lt; endl;\n    cin &gt;&gt; input;\n    ifstream infile;\n    ofstream outfile;\n\n    switch (input) {\n        case ('A'):\n        case ('a'):\n\n            readResponses(infile, responses, categories , MAXSIZE, size);\n            break;\n    ...\n</code></pre>\n\n<p>functions.h:</p>\n\n<pre><code>#include &lt;iostream&gt;     \n#include &lt;string&gt;      \n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;cstdlib&gt;\n#include &lt;ctime&gt;\n\nusing namespace std;\n\n#ifndef UNTITLED_FUNCTIONS_H\n#define UNTITLED_FUNCTIONS_H\n\nvoid readResponses(ifstream &amp;infile, string responses[], string categories ,const int MAXSIZE, int &amp;size );\n\n#endif //UNTITLED_FUNCTIONS_H\n</code></pre>\n\n<p>functions.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;     \n#include &lt;string&gt;      \n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;cstdlib&gt;\n#include &lt;ctime&gt;\n#include \"functions.h\"\nusing namespace std;\n\n\n\nvoid readResponses(ifstream &amp;infile, string responses[], string \n    categories[], const int MAXSIZE, int &amp;size ) {\n\n    string s;\n    int num = 0;\n    infile.open(\"magic.txt\");\n\n    size = 0;\n    while (getline(infile,s) &amp;&amp; (num &lt; MAXSIZE)) {\n\n        responses[num] = s;\n        getline(infile, s);\n        categories[num] = s;\n        num++;\n    }\n    size = num;\n\n    infile.close();\n\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "gcc", "duplicates", "switch-statement"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1563383851, "post_id": 57080747, "comment_id": 100685278, "body": "Notice that <code>&#39;A&#39;-&#39;Z&#39;</code> is not guaranty to be contiguous, as for example with EBCDIC."}, {"owner": {"reputation": 1672, "user_id": 2158002, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/OiczH.jpg?s=128&g=1", "display_name": "Akiva", "link": "https://stackoverflow.com/users/2158002/akiva"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1563384055, "post_id": 57080747, "comment_id": 100685362, "body": "@Jarod42 don&#39;t you mean, <code>&#39;A&#39; ... &#39;Z&#39;</code> ? Also, can you expand upon EBCDIC? If it is a platform thing, could I <code>#define</code> a text macro which would guarantee contiguous behavior?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1563384450, "post_id": 57080747, "comment_id": 100685504, "body": "Range A..Z in <a href=\"https://fr.wikipedia.org/wiki/Extended_Binary_Coded_Decimal_Interchange_Code\" rel=\"nofollow noreferrer\">EBCDIC</a> contains &#233;&#232;."}], "answers": [{"comments": [{"owner": {"reputation": 1672, "user_id": 2158002, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/OiczH.jpg?s=128&g=1", "display_name": "Akiva", "link": "https://stackoverflow.com/users/2158002/akiva"}, "edited": false, "score": 0, "creation_date": 1563384331, "post_id": 57080795, "comment_id": 100685463, "body": "Addendum to this, I went ahead and defined a text macro: <code>#define case_Letter case &#39;a&#39; ... &#39;z&#39;: case &#39;A&#39; ... &#39;Z&#39;:</code> which works nicely."}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": true, "score": 6, "last_activity_date": 1563382243, "creation_date": 1563382243, "answer_id": 57080795, "question_id": 57080747, "link": "https://stackoverflow.com/questions/57080747/with-gcc-switch-case-ranges-is-it-possible-to-construct-a-single-case-that-rang/57080795#57080795", "title": "With GCC switch case ranges, is it possible to construct a single case that ranges [A-Za-z]?", "body": "<blockquote>\n  <p>Conceptually, is something like the following possible?</p>\n</blockquote>\n\n<pre><code>switch (c.toLatin1()) {\ndefault: {\n    foo();\n    break;\n} case 'A' ... 'Z' || 'a' ... 'z': { \n    bar();\n    break;\n}\n</code></pre>\n\n<p>Sure, just write:</p>\n\n<pre><code>switch (c.toLatin1()) {\ndefault: {\n    foo();\n    break;\n} case 'A' ... 'Z':\n  case 'a' ... 'z': { \n    bar();\n    break;\n}\n</code></pre>\n"}], "owner": {"reputation": 1672, "user_id": 2158002, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/OiczH.jpg?s=128&g=1", "display_name": "Akiva", "link": "https://stackoverflow.com/users/2158002/akiva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 57080795, "answer_count": 1, "score": 3, "last_activity_date": 1563382243, "creation_date": 1563382010, "question_id": 57080747, "link": "https://stackoverflow.com/questions/57080747/with-gcc-switch-case-ranges-is-it-possible-to-construct-a-single-case-that-rang", "title": "With GCC switch case ranges, is it possible to construct a single case that ranges [A-Za-z]?", "body": "<p>Pretty straight forward question. \nGCC has Case ranges that allow for things like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>switch (c.toLatin1()) {\ndefault: {\n    foo();\n    break;\n} case 'A' ... 'Z': { \n    bar();\n    break;\n} case 'a' ... 'z': {\n    bar();\n    break;\n}\n</code></pre>\n\n<p><a href=\"https://gcc.gnu.org/onlinedocs/gcc/Case-Ranges.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc/Case-Ranges.html</a></p>\n\n<p>The issue here however, is that <code>bar()</code> is redundant, and <code>'A' ... 'z'</code> will end up including a bunch of unwanted characters:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2l2Qz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2l2Qz.png\" alt=\"enter image description here\"></a></p>\n\n<p>Conceptually, is something like the following possible? </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>switch (c.toLatin1()) {\ndefault: {\n    foo();\n    break;\n} case 'A' ... 'Z' || 'a' ... 'z': { \n    bar();\n    break;\n}\n</code></pre>\n\n<p>Obviously that is pseudo-code, but you get the idea. \nSolutions if need be, can include text macros. I am more concerned with accidentally introducing bugs because I forget to add new code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>switch (c.toLatin1()) {\ndefault: {\n    foo();\n    break;\n} case 'A' ... 'Z': { \n    foo(); // I add here\n    bar();\n    break;\n} case 'a' ... 'z': {\n    bar(); // but forget to add it here too.\n    break;\n}\n</code></pre>\n\n<p>Because those two cases, are effectively one case. \nThanks.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1563380986, "post_id": 57080495, "comment_id": 100683971, "body": "Not possible in C++. Not like that anyway."}, {"owner": {"reputation": 768, "user_id": 10765031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19818c272f28b0be58edab2373192e34?s=128&d=identicon&r=PG&f=1", "display_name": "fdan", "link": "https://stackoverflow.com/users/10765031/fdan"}, "edited": false, "score": 0, "creation_date": 1563382342, "post_id": 57080495, "comment_id": 100684602, "body": "there are proposals for future c++ versions called <i>unified function calls</i>, they come very close to what you want to do. but unfortunately the future is not now."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1563383570, "post_id": 57080495, "comment_id": 100685135, "body": "Yeah, that&#39;s a big &#39;ol &quot;nope!&quot; Unfortunately for you, not a thing in C++. Maybe this is an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">X-Y problem</a>? Perhaps you can explain what you&#39;re trying to accomplish with this?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1563383707, "post_id": 57080495, "comment_id": 100685194, "body": "C++ is not scripting language, many things are done in a different way. Trying to use one language with habits from another usually lead to a disaster."}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 3, "last_activity_date": 1563381017, "creation_date": 1563381017, "answer_id": 57080519, "question_id": 57080495, "link": "https://stackoverflow.com/questions/57080495/is-it-possible-add-member-function-to-data-type-in-c/57080519#57080519", "title": "Is it possible add member function to data type in C++?", "body": "<p>No, it is not.</p>\n\n<p>You can inherit from a class and add new members to the new derived class, but also consider <em>composition</em> because inheritance isn't always appropriate. Consult the chapter in your book about <em>object oriented programming</em> for more information on that.</p>\n\n<p>Also consider free (non-member) functions if you don't need any access to private data. Similarly, be careful of <a href=\"https://stackoverflow.com/a/12108025/560648\">overdoing it with the getters/setters</a>!</p>\n"}, {"tags": [], "owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "is_accepted": false, "score": 1, "last_activity_date": 1563384123, "creation_date": 1563384123, "answer_id": 57081233, "question_id": 57080495, "link": "https://stackoverflow.com/questions/57080495/is-it-possible-add-member-function-to-data-type-in-c/57081233#57081233", "title": "Is it possible add member function to data type in C++?", "body": "<p>You can mimic extension functions in C++, by abusing free-standing operator overloading.  Here I've leveraged <code>operator-&gt;*</code>.</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n// Extension function.\nstatic int functionName(std::string const&amp; self) {\n    if (self == \"something\") {\n        return 1;\n    }\n\n    return 0;\n}\n\n// Thunk glue.\nstatic int operator-&gt;*(std::string const&amp; s, int(*fn)(std::string const&amp;)) {\n    return fn(s);\n}\n\nint main() {\n    std::string s = \"something\";\n    int i = s-&gt;*functionName;\n    std::cout &lt;&lt; i &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>But I strongly urge you to wait until some future C++ standard formally adopts <em>unified function calls</em>.</p>\n\n<p>Editorial note: not recommended, as it is not idiomatic C++ and abusing operator overloading is a good way to make you unpopular.  And C++ is already a difficult enough language as is.</p>\n"}], "owner": {"reputation": 23, "user_id": 11785002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adf958e5298a8c731e0e7674ff13d6fa?s=128&d=identicon&r=PG&f=1", "display_name": "Elektromann", "link": "https://stackoverflow.com/users/11785002/elektromann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 57080519, "answer_count": 2, "score": 1, "last_activity_date": 1563384123, "creation_date": 1563380904, "question_id": 57080495, "link": "https://stackoverflow.com/questions/57080495/is-it-possible-add-member-function-to-data-type-in-c", "title": "Is it possible add member function to data type in C++?", "body": "<p>I want to create a function to data types like in javascript with \"String.prototype\". Is it possible in C++ too?</p>\n\n<p>For example:</p>\n\n<pre><code>int functionName()\n{\n    if(this.string == \"something\") {\n        return 1;\n    }\n\n    return 0;\n}\n\nstd::string mystring = \"text\";\n\nint result = mystring.functionName();\n\n</code></pre>\n"}, {"tags": ["c++", "vector", "compiler-errors"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1563381351, "post_id": 57080475, "comment_id": 100684126, "body": "In what way doesn&#39;t it work?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1563381628, "post_id": 57080475, "comment_id": 100684262, "body": "<b><i>In what way doesn&#39;t it work?</i></b> Note that for a useful question at <code>StackOverflow</code> it is important to explain this. Remember the main purpose of a question is to help future readers understand and solve the same problem. When the actual problem is unclear it&#39;s unlikely to help anyone."}], "answers": [{"tags": [], "owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "is_accepted": false, "score": 1, "last_activity_date": 1563381223, "creation_date": 1563381223, "answer_id": 57080562, "question_id": 57080475, "link": "https://stackoverflow.com/questions/57080475/concatenate-2d-vector-to-the-left/57080562#57080562", "title": "concatenate 2D vector to the left", "body": "<pre><code>leftRight.reserve(left.size());\n</code></pre>\n\n<p>This will only reserve the space but does not actually create elements. Therefore, accessing any <code>leftRight[i]</code> will fail.</p>\n\n<p>You want </p>\n\n<pre><code>leftRight.resize(left.size());\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 3, "last_activity_date": 1563381658, "last_edit_date": 1563381658, "creation_date": 1563381276, "answer_id": 57080580, "question_id": 57080475, "link": "https://stackoverflow.com/questions/57080475/concatenate-2d-vector-to-the-left/57080580#57080580", "title": "concatenate 2D vector to the left", "body": "<p>There is a typo in these statements</p>\n\n<pre><code>leftRight[i].insert(leftRight[i].end(); left[i].begin(), left[i].end());\n                                     ^^^\nleftRight[i].insert(leftRight[i].end(); right[i].begin(), right[i].end());\n                                     ^^^\n</code></pre>\n\n<p>Use a comma instead of the semicolon.</p>\n\n<p>And you may not use the subscript operator for an empty vector.</p>\n\n<p>So you should write</p>\n\n<pre><code>leftRight.resize(left.size());\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>leftRight.reserve(left.size());\n</code></pre>\n\n<p>Here is an updated your program</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std; \n\nint main() \n{ \n    vector&lt;vector&lt;int&gt;&gt; left = {{10, 20}, {30, 40}}; \n    vector&lt;vector&lt;int&gt;&gt; right = {{1, 2}, {3, 4}};\n    vector&lt;vector&lt;int&gt;&gt; leftRight;\n\n    leftRight.resize(left.size());\n    for(int i = 0; i &lt; left.size(); i++) { \n    leftRight[i].reserve(left[i].size() + right[i].size()); \n    leftRight[i].insert(leftRight[i].end(), left[i].begin(), left[i].end());\n    leftRight[i].insert(leftRight[i].end(), right[i].begin(), right[i].end());\n    }\n\n    for ( const auto &amp;v : leftRight )\n    {\n        for ( const auto &amp;item : v ) std::cout &lt;&lt; item &lt;&lt; ' ';\n        std::cout &lt;&lt; '\\n';\n    }       \n\n    return 0; \n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>10 20 1 2 \n30 40 3 4 \n</code></pre>\n"}], "owner": {"reputation": 162, "user_id": 10039118, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tpxi00vso58/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qBaNEndECUOMxeGqgX2WpVfpHBqQ/mo/photo.jpg?sz=128", "display_name": "lll", "link": "https://stackoverflow.com/users/10039118/lll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 57080580, "answer_count": 2, "score": 1, "last_activity_date": 1563381739, "creation_date": 1563380856, "last_edit_date": 1563381739, "question_id": 57080475, "link": "https://stackoverflow.com/questions/57080475/concatenate-2d-vector-to-the-left", "title": "concatenate 2D vector to the left", "body": "<p>When left and right are:</p>\n\n<pre><code>vector&lt;vector&lt;int&gt;&gt; left = {{10, 20}, {30, 40}}; \nvector&lt;vector&lt;int&gt;&gt; right = {{1, 2}, {3, 4}};\n</code></pre>\n\n<p>I want my leftRight vector to be:</p>\n\n<pre><code>vector&lt;vector&lt;int&gt; leftRight = {{10, 20, 1, 2}, {30, 40, 3, 4}}\n</code></pre>\n\n<p>This is what I tried but doesn't work:</p>\n\n<pre><code>#include &lt;vector&gt;\nusing namespace std; \n\nint main() \n{ \n    vector&lt;vector&lt;int&gt;&gt; left = {{10, 20}, {30, 40}}; \n    vector&lt;vector&lt;int&gt;&gt; right = {{1, 2}, {3, 4}};\n    vector&lt;vector&lt;int&gt;&gt; leftRight;\n\n    leftRight.reserve(left.size());\n    for(int i = 0; i &lt; left.size(); i++) { \n    leftRight[i].reserve(left[i].size() + right[i].size()); \n    leftRight[i].insert(leftRight[i].end(); left[i].begin(), left[i].end());\n    leftRight[i].insert(leftRight[i].end(); right[i].begin(), right[i].end());\n    }\n    return 0; \n}\n</code></pre>\n"}, {"tags": ["c++", "gcc", "clang", "c++17", "variadic-templates"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1563382255, "post_id": 57080425, "comment_id": 100684567, "body": "<a href=\"https://coliru.stacked-crooked.com/a/eeff5b8f94df02e8\" rel=\"nofollow noreferrer\"><code>Function</code> is actually right in the sense of its declaration</a> but something blows up somewhere else"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1563382268, "post_id": 57080425, "comment_id": 100684572, "body": "Bug of clang for me. Code seems not ill formed."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1563382449, "post_id": 57080425, "comment_id": 100684642, "body": "Also why isn&#39;t <code>std::apply</code> working for me -.-"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1563382682, "post_id": 57080425, "comment_id": 100684731, "body": "@LightnessRacesinOrbit: clang version on coliru is  5.0.0-3~16.04.1 (tags/RELEASE_500/final)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1563382829, "post_id": 57080425, "comment_id": 100684799, "body": "@Jarod42 Oh lol"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1563382965, "post_id": 57080425, "comment_id": 100684849, "body": "I think Clang doesn&#39;t like the fact that <code>T</code> isn&#39;t being used the type alias. A short way around this is <code>template &lt;typename T&gt;     using Int = decltype(sizeof(T), 0);</code>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1563383252, "post_id": 57080425, "comment_id": 100684988, "body": "As the bug with <code>void_t</code>."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1563384879, "post_id": 57080425, "comment_id": 100685701, "body": "This also seems to work: <code>template &lt;typename T&gt; using Int = std::conditional_t&lt;true, int, T&gt;;</code>. Coliru&#39;s clang++ is still choking on <code>std::apply</code> though"}, {"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 0, "creation_date": 1563389035, "post_id": 57080425, "comment_id": 100687560, "body": "It seems that Clang treats <code>std::function&lt; void(Int&lt;Ts&gt;...) &gt;</code> as an instantiation-dependent but not (type-)dependent type, so the type of everything related to <code>Function</code> is determined at definition time instead of at instantiation time. <a href=\"https://godbolt.org/z/rMLsyA\" rel=\"nofollow noreferrer\">godbolt.org/z/rMLsyA</a>"}, {"owner": {"reputation": 1914, "user_id": 4841248, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ed847bb43b46b8554a32b5910383341a?s=128&d=identicon&r=PG", "display_name": "Maarten Bamelis", "link": "https://stackoverflow.com/users/4841248/maarten-bamelis"}, "reply_to_user": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 0, "creation_date": 1563392759, "post_id": 57080425, "comment_id": 100689208, "body": "@cpplearner It still strikes me as very odd that everything works fine for the <code>Tuple</code> type alias then; somehow, Clang is perfectly fine with that one. Additionally, and I have added this to the question, I also found out that just referring to <code>Foo&lt;\u2026&gt;::Function</code> from outside the class works just fine, weird huh?"}, {"owner": {"reputation": 1914, "user_id": 4841248, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ed847bb43b46b8554a32b5910383341a?s=128&d=identicon&r=PG", "display_name": "Maarten Bamelis", "link": "https://stackoverflow.com/users/4841248/maarten-bamelis"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1563393259, "post_id": 57080425, "comment_id": 100689446, "body": "@LightnessRacesinOrbit Yes, I also found this out by referring to <code>Foo&lt;\u2026&gt;::Function</code> from outside the class and then it behaves as a function taking three integers... and even the <code>Tuple</code> alias works just fine. A bug it is then!"}, {"owner": {"reputation": 453, "user_id": 10915786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f34f8d8d0b7e9b3e62fc5170087641c?s=128&d=identicon&r=PG&f=1", "display_name": "Hui", "link": "https://stackoverflow.com/users/10915786/hui"}, "edited": false, "score": 0, "creation_date": 1563400835, "post_id": 57080425, "comment_id": 100692221, "body": "Anyone knows what this status \u2018CD4\u2019 mean? 1558\tCD4\tUnused arguments in alias template specializations\tUnknown  <a href=\"https://clang.llvm.org/cxx_dr_status.html\" rel=\"nofollow noreferrer\">clang.llvm.org/cxx_dr_status.html</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1563407993, "post_id": 57080425, "comment_id": 100693795, "body": "@MaartenBamelis Yep deffo. Nasty!"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 453, "user_id": 10915786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f34f8d8d0b7e9b3e62fc5170087641c?s=128&d=identicon&r=PG&f=1", "display_name": "Hui", "link": "https://stackoverflow.com/users/10915786/hui"}, "edited": false, "score": 0, "creation_date": 1563408090, "post_id": 57080425, "comment_id": 100693806, "body": "@Hui <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html\" rel=\"nofollow noreferrer\"><i>&quot;CD4: A DR/DRWP or Accepted/WP issue not resolved in C++14 but included in the Committee Draft advanced for balloting at the June, 2014 WG21 meeting.&quot;</i></a> Not sure it&#39;s relevant though"}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 3, "creation_date": 1563432968, "post_id": 57080425, "comment_id": 100699602, "body": "Update: Bug was logged for this: <a href=\"https://bugs.llvm.org/show_bug.cgi?id=42654\" rel=\"nofollow noreferrer\">bugs.llvm.org/show_bug.cgi?id=42654</a> (as Maarten asked me in person)"}], "answers": [{"comments": [{"owner": {"reputation": 1914, "user_id": 4841248, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ed847bb43b46b8554a32b5910383341a?s=128&d=identicon&r=PG", "display_name": "Maarten Bamelis", "link": "https://stackoverflow.com/users/4841248/maarten-bamelis"}, "edited": false, "score": 0, "creation_date": 1563641057, "post_id": 57098472, "comment_id": 100770151, "body": "A difficult matter but you explained the two bugs very well! I see no error in your reasoning, so I will accept this as the correct answer."}], "tags": [], "owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "is_accepted": true, "score": 3, "last_activity_date": 1563465330, "creation_date": 1563465330, "answer_id": 57098472, "question_id": 57080425, "link": "https://stackoverflow.com/questions/57080425/clang-fails-to-expand-parameter-pack-in-stdfunction-instantiation/57098472#57098472", "title": "Clang fails to expand parameter pack in std::function instantiation", "body": "<p>TL;DR: it's a clang bug, but there's also a bug in the standard.</p>\n\n<p>First be aware that in C++, templates are handled in two steps:</p>\n\n<ol>\n<li>Constructs that are not <em>dependent</em> on the template parameters are built when the enclosing template is defined.</li>\n<li>Constructs that are dependent are built when the enclosing template is instantiated.</li>\n</ol>\n\n<p>Now, it seems that clang treats <code>std::function&lt; void(Int&lt;Ts&gt;...) &gt;</code> as a non-dependent  type, with the following reasoning:</p>\n\n<ol>\n<li><code>Int&lt;Ts&gt;</code> is a non-dependent type (correct).</li>\n<li>Thus, pack expansion containing <code>Int&lt;Ts&gt;</code> (i.e. <code>Int&lt;Ts&gt;...</code>) is also a non-dependent \"type\" (?).</li>\n<li>Because all components of <code>void(Int&lt;Ts&gt;...)</code> are non-dependent, it is a non-dependent type (obviously incorrect).</li>\n<li>Because the name <code>std::function</code> is non-dependent and the template argument <code>void(Int&lt;Ts&gt;...)</code> is a non-dependent non-pack-expansion type, <code>std::function&lt; void(Int&lt;Ts&gt;...) &gt;</code> is a non-dependent type.</li>\n</ol>\n\n<p>(Note that the \"non-pack-expansion\" check makes it different from the <code>Tuple</code> case.)</p>\n\n<p>Therefore, when <code>Foo</code> is defined, the type name <code>Function</code> is treated as naming a non-dependent type, and is immediately built, and pack expansion (which happens during instantiation) is not accounted. Consequently, all uses of <code>Function</code> is replaced with the \"desugared\" type <code>std::function&lt; void(int) &gt;</code>.</p>\n\n<p>Furthermore, clang has the notion of <em>instantiation-dependent</em>, which means the construct is not dependent, but it still somehow involves the template parameters (e.g. the construct is only valid for some parameters). <code>std::function&lt; void(Int&lt;Ts&gt;...) &gt;</code> is treated as a instantiation-dependent type, so when the template is instantiated, clang still performs substitution for <code>using Function = std::function&lt; void(Int&lt;Ts&gt;...) &gt;</code>. As a result, <code>Function</code> gets the correct type, but this does not propagate to uses of <code>Function</code> in the definition of <code>Foo</code>.</p>\n\n<hr>\n\n<p>Now heres the bug in the standard.</p>\n\n<p>Whether a type is dependent is defined in <a href=\"http://eel.is/c++draft/temp.dep.type#9\" rel=\"nofollow noreferrer\">[temp.dep.type]</a>:</p>\n\n<blockquote>\n  <p>A type is dependent if it is</p>\n  \n  <ul>\n  <li>a template parameter,</li>\n  <li>a member of an unknown specialization,</li>\n  <li>a nested class or enumeration that is a dependent member of the current instantiation,</li>\n  <li>a cv-qualified type where the cv-unqualified type is dependent,</li>\n  <li>a compound type constructed from any dependent type,</li>\n  <li>an array type whose element type is dependent or whose bound (if any) is value-dependent,</li>\n  <li>a function type whose exception specification is value-dependent,</li>\n  <li>denoted by a <em>simple-template-id</em> in which either the template name is a template parameter or any of the template arguments is a dependent\n  type or an expression that is type-dependent or value-dependent or is\n  a pack expansion [\u2009Note: This includes an injected-class-name of a\n  class template used without a <em>template-argument-list</em>. \u2014\u2009end note\u2009] ,\n  or</li>\n  <li>denoted by <code>decltype(expression)</code>, where expression is type-dependent.</li>\n  </ul>\n</blockquote>\n\n<p>Note that it doesn't say that a function type whose parameter list contains pack expansions is a dependent type, only that \"a compound type constructed from any dependent type\" and \"a function type whose exception specification is value-dependent\" are dependent. Neither is helpful here.</p>\n"}], "owner": {"reputation": 1914, "user_id": 4841248, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ed847bb43b46b8554a32b5910383341a?s=128&d=identicon&r=PG", "display_name": "Maarten Bamelis", "link": "https://stackoverflow.com/users/4841248/maarten-bamelis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 1, "accepted_answer_id": 57098472, "answer_count": 1, "score": 13, "last_activity_date": 1563465330, "creation_date": 1563380622, "last_edit_date": 1563432666, "question_id": 57080425, "link": "https://stackoverflow.com/questions/57080425/clang-fails-to-expand-parameter-pack-in-stdfunction-instantiation", "title": "Clang fails to expand parameter pack in std::function instantiation", "body": "<p>The snippet of code compiled with <code>std=c++17</code> as the only compiler flag ...</p>\n\n<ul>\n<li>... compiles successfully with GCC 9.1. <a href=\"https://godbolt.org/z/QKJomx\" rel=\"nofollow noreferrer\">Godbolt</a></li>\n<li>... issues a compiler error with Clang 8.0.0 (error below snippet). <a href=\"https://godbolt.org/z/S7tB5K\" rel=\"nofollow noreferrer\">Godbolt</a></li>\n</ul>\n\n<p><strong>Question:</strong> is this a bug in the Clang compiler or is GCC wrong to accept this code or is something else at play?</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;tuple&gt;\n\ntemplate &lt;typename... Ts&gt;\nstruct Foo\n{\n    template &lt;typename T&gt;\n    using Int = int;\n\n    // Function that accepts as many 'int' as there are template parameters\n    using Function = std::function&lt; void(Int&lt;Ts&gt;...) &gt;;\n\n    // Tuple of as many 'int' as there are template parameters\n    using Tuple = std::tuple&lt; Int&lt;Ts&gt;... &gt;;\n\n    auto bar(Function f)\n    {\n        std::apply(f, Tuple{}); // Error with Clang 8.0.0\n    }\n};\n\nint main()\n{\n    auto foo = Foo&lt;char, bool, double&gt;{};\n    foo.bar([](int, int, int){});\n}\n</code></pre>\n\n<hr>\n\n<p>What strikes me as odd is that Clang's error indicates it successfully aliased <code>Tuple</code> as <code>std::tuple&lt;int, int, int&gt;</code> but it wrongly aliases <code>Function</code> as just <code>std::function&lt;void(int)&gt;</code>, with only one instead of three arguments.</p>\n\n<pre><code>In file included from &lt;source&gt;:2:\nIn file included from /opt/compiler-explorer/gcc-8.3.0/lib/gcc/x86_64-linux-gnu/8.3.0/../../../../include/c++/8.3.0/functional:54:\n/opt/compiler-explorer/gcc-8.3.0/lib/gcc/x86_64-linux-gnu/8.3.0/../../../../include/c++/8.3.0/tuple:1678:14: error: no matching function for call to '__invoke'\n      return std::__invoke(std::forward&lt;_Fn&gt;(__f),\n             ^~~~~~~~~~~~~\n/opt/compiler-explorer/gcc-8.3.0/lib/gcc/x86_64-linux-gnu/8.3.0/../../../../include/c++/8.3.0/tuple:1687:19: note: in instantiation of function template specialization 'std::__apply_impl&lt;std::function&lt;void (int)&gt; &amp;, std::tuple&lt;int, int, int&gt;, 0, 1, 2&gt;' requested here\n      return std::__apply_impl(std::forward&lt;_Fn&gt;(__f),\n                  ^\n&lt;source&gt;:19:14: note: in instantiation of function template specialization 'std::apply&lt;std::function&lt;void (int)&gt; &amp;, std::tuple&lt;int, int, int&gt; &gt;' requested here\n        std::apply(f, Tuple{}); // Error\n             ^\n&lt;source&gt;:26:9: note: in instantiation of member function 'Foo&lt;char, bool, double&gt;::bar' requested here\n    foo.bar([](int, int, int){});\n</code></pre>\n\n<hr>\n\n<h1>Additional Research</h1>\n\n<p>As other users in the comments already pointed out, making the <code>Int</code> template alias dependent on the type <code>T</code> fixes the issue:</p>\n\n<pre><code>template &lt;typename T&gt;\nusing Int = std::conditional_t&lt;true, int, T&gt;;\n</code></pre>\n\n<p>Something else I found out, just referring to the <code>Function</code> type from the outside also makes it work as expected/desired:</p>\n\n<pre><code>int main()\n{\n    auto f = Foo&lt;char, bool, double&gt;::Function{};\n    f = [](int, int, int){};\n}\n</code></pre>\n"}, {"tags": ["c++", "inheritance", "overriding", "virtual"], "comments": [{"owner": {"reputation": 5848, "user_id": 1075282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70efe94a6c2237ec96f429402a03a27d?s=128&d=identicon&r=PG", "display_name": "Renat", "link": "https://stackoverflow.com/users/1075282/renat"}, "edited": false, "score": 0, "creation_date": 1563381862, "post_id": 57080374, "comment_id": 100684373, "body": "Check this: <a href=\"https://stackoverflow.com/questions/7098054/virtual-qualifier-in-derived-class\" title=\"virtual qualifier in derived class\">stackoverflow.com/questions/7098054/&hellip;</a> . <code>D::f2</code> is a virtual actually and overrides <code>B::f2</code>"}, {"owner": {"reputation": 35, "user_id": 10639651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4651370af2163e5c58f6e4ea6aeae5e1?s=128&d=identicon&r=PG&f=1", "display_name": "sasha", "link": "https://stackoverflow.com/users/10639651/sasha"}, "reply_to_user": {"reputation": 5848, "user_id": 1075282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70efe94a6c2237ec96f429402a03a27d?s=128&d=identicon&r=PG", "display_name": "Renat", "link": "https://stackoverflow.com/users/1075282/renat"}, "edited": false, "score": 1, "creation_date": 1563382231, "post_id": 57080374, "comment_id": 100684557, "body": "But C::f2 hides B::f2."}, {"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 1, "creation_date": 1563382476, "post_id": 57080374, "comment_id": 100684650, "body": "No, it does not hide it.  What makes you think it hides it?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 0, "creation_date": 1563383171, "post_id": 57080374, "comment_id": 100684952, "body": "@MikeNakis <a href=\"https://coliru.stacked-crooked.com/a/9eba15b55256affc\" rel=\"nofollow noreferrer\">Yes, it does</a> (though <a href=\"https://coliru.stacked-crooked.com/a/02746f429240edd2\" rel=\"nofollow noreferrer\">that is fixable</a> if you&#39;re so-inclined)"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1563383289, "post_id": 57080374, "comment_id": 100685000, "body": "The rules for virtual function overrides simply don&#39;t look at visibility at all. (Or access: you can override a virtual private function of a base class too.) Not sure what other kind of &quot;why&quot; you&#39;re looking for."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1563383370, "post_id": 57080374, "comment_id": 100685039, "body": "@aschepler But lookup happens before virtual dispatch happens, so calling <code>b-&gt;f2</code> will not find any function that takes <code>A</code>, regardless of whether that function is overridden."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1563383526, "post_id": 57080374, "comment_id": 100685110, "body": "@LightnessRacesinOrbit Sure. Lookup for <code>b-&gt;f2</code> finds <code>B::f2</code> and calls its final overrider which is <code>D::f2</code>. Lookup for <code>c-&gt;f2</code> finds <code>C::f2</code> which is its own final overrider."}], "answers": [{"tags": [], "owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "is_accepted": false, "score": 2, "last_activity_date": 1563383276, "last_edit_date": 1563383276, "creation_date": 1563382911, "answer_id": 57080938, "question_id": 57080374, "link": "https://stackoverflow.com/questions/57080374/why-f2-in-class-b-is-overridden-by-f2-in-class-d/57080938#57080938", "title": "Why f2 in class B is overridden by f2 in class D", "body": "<p>The interface of <code>B</code> does not have <code>f2( A&amp; )</code>, so if the compiler was not to make an implicit conversion, your <code>b-&gt;f2( a );</code> would fail to compile.</p>\n\n<p>But since the interface of <code>B</code> does have <code>f2( A )</code>, the compiler implicitly converts (*1) your <code>a</code> from type <code>A&amp;</code> to type <code>A</code>.  So, the function of the form <code>f2( A )</code> is selected from the interface of <code>B</code>.</p>\n\n<p>And since your <code>D</code> overrides that function, <code>D</code>'s function ends up being invoked.</p>\n\n<p>(*1) C++ die-hards might know of a more specific term than 'implicitly converts' for precisely what happens in these cases.  But I am just an amateur.</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1563383394, "post_id": 57081012, "comment_id": 100685055, "body": "The function is called on a <code>B*</code>."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1563384602, "post_id": 57081012, "comment_id": 100685565, "body": "<code>The function is called on a B*</code> Indeed. And the dynamic type of the pointed object is <code>D</code>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1563386025, "post_id": 57081012, "comment_id": 100686226, "body": "Oh yes. I got myself mixed up after proving that there <i>is</i> hiding :D Kinda forgot the question after that.."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 2, "last_activity_date": 1563384009, "last_edit_date": 1592644375, "creation_date": 1563383232, "answer_id": 57081012, "question_id": 57080374, "link": "https://stackoverflow.com/questions/57080374/why-f2-in-class-b-is-overridden-by-f2-in-class-d/57081012#57081012", "title": "Why f2 in class B is overridden by f2 in class D", "body": "<blockquote>\n<p>Why f2 in class B is overridden by f2 in class D</p>\n</blockquote>\n<p>Because <code>D::f2</code> has the same argument list. A function with same name and argument list overrides a virtual function in base, if such virtual function in base exists.</p>\n<p>Whether the virtual function has been hidden by another function with same name in an intermediate base or not has no effect on this.</p>\n<p>The rule from the standard (draft):</p>\n<blockquote>\n<p>[class.virtual]</p>\n<p>If a virtual member function <code>vf</code> is declared in a class <code>Base</code> and in a class <code>Derived</code>, derived directly or indirectly from <code>Base</code>, a member function <code>vf</code> with the same name, parameter-type-list ([dcl.fct]), cv-qualification, and ref-qualifier (or absence of same) as <code>Base::vf</code> is declared, then <code>Derived::vf</code> overrides <code>Base::vf</code>.</p>\n</blockquote>\n<p>So, to conclude, <code>D::f2</code> overrides <code>B::f2</code>, because it has same argument list. It does not override <code>C::f2</code>, because the argument list is different.</p>\n"}], "owner": {"reputation": 35, "user_id": 10639651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4651370af2163e5c58f6e4ea6aeae5e1?s=128&d=identicon&r=PG&f=1", "display_name": "sasha", "link": "https://stackoverflow.com/users/10639651/sasha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 57081012, "answer_count": 2, "score": 0, "last_activity_date": 1563384009, "creation_date": 1563380466, "last_edit_date": 1563381934, "question_id": 57080374, "link": "https://stackoverflow.com/questions/57080374/why-f2-in-class-b-is-overridden-by-f2-in-class-d", "title": "Why f2 in class B is overridden by f2 in class D", "body": "<p>I'm failing to understand how can a grandchild (D) override a hidden (by C::f2(A&amp;) method (B::f2(A)).</p>\n\n<p>Here is an example code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class B{\n    public:\n    virtual void f2(A a){cout&lt;&lt;\"B::f2()\"&lt;&lt;endl;}\n};\n\nclass C:public B{\nprivate:\n    public:\n    virtual void f2(A&amp; a){cout&lt;&lt;\"C::f2(A&amp;)\"&lt;&lt;endl;\n    }\n\n};\n\nclass D:public C{\n    public:\n    void f2(A a){cout&lt;&lt;\"D::f2(A)\"&lt;&lt;endl;}\n};\n\nint main(void)\n{\n    B* b = new D();\n    A a2 = A();\n    A &amp;a = a2;\n    b-&gt;f2(a); // prints D::f2 - should'nt it print B::f2??\n\n    C* c = new D();\n    c-&gt;f2(a); // prints C::f2 - as expected\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "udp", "ros", "winsock2"], "comments": [{"owner": {"reputation": 3101, "user_id": 2027196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90b1ba74298036dc163149d485268fa4?s=128&d=identicon&r=PG", "display_name": "JohnFilleau", "link": "https://stackoverflow.com/users/2027196/johnfilleau"}, "edited": false, "score": 0, "creation_date": 1563380206, "post_id": 57080161, "comment_id": 100683595, "body": "What consumes the result of getUserEntrySendMessage? Could that be using your return value to send a different message?"}, {"owner": {"reputation": 3101, "user_id": 2027196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90b1ba74298036dc163149d485268fa4?s=128&d=identicon&r=PG", "display_name": "JohnFilleau", "link": "https://stackoverflow.com/users/2027196/johnfilleau"}, "edited": false, "score": 0, "creation_date": 1563380283, "post_id": 57080161, "comment_id": 100683632, "body": "I&#39;d like to second the comment above regarding <code>BufLen</code>. Could it be large enough that it&#39;s sending both SendBufHI and SendBufHELLO (which are likely stored next to each other in memory)."}], "answers": [{"comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1563385197, "post_id": 57080312, "comment_id": 100685859, "body": "Another example of comments telling a lie, and the only thing telling the truth is the actual running of the program."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1563385964, "post_id": 57080312, "comment_id": 100686193, "body": "@PaulMcKenzie Technically, the comment is accurate: it describes a future state of the source code ;)"}, {"owner": {"reputation": 3, "user_id": 11798655, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-U3S1Bltwp3c/AAAAAAAAAAI/AAAAAAAAAcc/oFebg74Q6OU/photo.jpg?sz=128", "display_name": "Metin Pekkaptan", "link": "https://stackoverflow.com/users/11798655/metin-pekkaptan"}, "edited": false, "score": 0, "creation_date": 1563868420, "post_id": 57080312, "comment_id": 100832800, "body": "@LightnessRacesinOrbit I don&#39;t know why but strlen returns the value excluding null terminator, I had to use it withouth a -1 on the end."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 4, "last_activity_date": 1563879198, "last_edit_date": 1563879198, "creation_date": 1563380239, "answer_id": 57080312, "question_id": 57080161, "link": "https://stackoverflow.com/questions/57080161/switch-statement-cause-sending-two-messages/57080312#57080312", "title": "switch statement cause sending two messages", "body": "<blockquote>\n<pre><code>BufLen,// this will be json buffers length\n</code></pre>\n</blockquote>\n\n<p>But it's not!</p>\n\n<p>You send <code>BufLen</code> bytes regardless of which message is being sent.</p>\n\n<p>It's likely that this is <em>too large</em> and you're accidentally overrunning <code>SendBufHI</code> into a string literal that happens to live next to it in memory.</p>\n\n<p>Send only the bytes that you want to. That could mean <code>strlen(SendBufHI)</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 11798655, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-U3S1Bltwp3c/AAAAAAAAAAI/AAAAAAAAAcc/oFebg74Q6OU/photo.jpg?sz=128", "display_name": "Metin Pekkaptan", "link": "https://stackoverflow.com/users/11798655/metin-pekkaptan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 57080312, "answer_count": 1, "score": 0, "last_activity_date": 1563879198, "creation_date": 1563379650, "question_id": 57080161, "link": "https://stackoverflow.com/questions/57080161/switch-statement-cause-sending-two-messages", "title": "switch statement cause sending two messages", "body": "<p>I have a UDP message sending socket in my Windows 10 laptop, I am trying to send a JSON to be decoded on ROS.\nI wrote down a basic user entry function from command line, if I enter 1 it will send JSON with hello, if I enter 2 it will send jasonn with hi.\nThe problem is it sends bot hi AND hello message packages when I enter 1.\nI do not know the reason , whether wrong logic on switch statement or something wrong with sendto() function of winsock2. </p>\n\n<pre><code>userDialog::UserEntry getUserEntrySendMessage(SOCKET myUdpSocket, sockaddr_in rosBridgeUdpAddress, int addrLen, int BufLen)\n{\n    std::cout&lt;&lt;\"please enter what do you like to do:\\n\";\n    std::cout &lt;&lt; \"enter 0 to connect ROSpberry Pi \\n\";\n    std::cout &lt;&lt; \"enter 1 to send HI to ROSpberry Pi\\n\";\n    std::cout &lt;&lt; \"enter 2 to send HELLO to ROSpberry Pi\\n\";\n    std::cout &lt;&lt; \"enter 3 to finish \\n\";\n    std::cout &lt;&lt; \"enter one of those in all UPPERCASE, \"\n        &lt;&lt; \"this code does not have an error check yet!\\n\";\n    userDialog::UserEntry userInput{};\n    int x;\n    std::cin &gt;&gt; x;\n    userInput = static_cast&lt;userDialog::UserEntry&gt;(x);\n    switch (userInput)\n    {\n    case userDialog::CONNECT_ROS:\n        {\n        //creating the JSON message to be sent for initiating the topic\n            const char* SendBufSTART = { \"{ \\\"op\\\": \\\"advertise\\\",  \\\"topic\\\": \\\"myTopic\\\",  \\\"type\\\": \\\"std_msgs/String\\\" \\}\" };\n            std::cout &lt;&lt; \"I will send this : \\n\" &lt;&lt; SendBufSTART &lt;&lt; \"\\n\"; //quick check if JSON is correctly constructed\n            sendto(\n                myUdpSocket,\n                SendBufSTART, //this will be our json \n                BufLen,// this will be json buffers length\n                0, //no flags\n                (SOCKADDR*)&amp; rosBridgeUdpAddress,\n                //sizeof(rosBridgeUdpAddress)   );\n                addrLen);\n            return userDialog::CONNECT_ROS;\n        }\n        break;\n    case userDialog::SAY_HI:\n    {\n        //creating the JSON message to be sent to be published inside the topic\n        const char* SendBufHI = { \"{ \\\"op\\\": \\\"publish\\\", \\\"id\\\": \\\"metin's laptop\\\",  \\\"topic\\\": \\\"myTopic\\\",  \\\"msg\\\": \\{\\\"data\\\": \\\"HI from metin!\\\"\\} \\}\" };\n        std::cout &lt;&lt; \"I will send this : \\n\" &lt;&lt; SendBufHI &lt;&lt; \"\\n\"; //quick check if JSON is correctly constructed\n        sendto(\n            myUdpSocket,\n            SendBufHI, //this will be our json \n            BufLen,// this will be json buffers length\n            0, //no flags\n            (SOCKADDR*)&amp; rosBridgeUdpAddress,\n            //sizeof(rosBridgeUdpAddress)   );\n            addrLen);\n        return userDialog::SAY_HI;\n    }\n        break;\n    case userDialog::SAY_HELLO:\n    {\n        //creating the JSON message to be sent to be published inside the topic\n        const char* SendBufHELLO = { \"{ \\\"op\\\": \\\"publish\\\", \\\"id\\\": \\\"metin's laptop\\\",  \\\"topic\\\": \\\"myTopic\\\",  \\\"msg\\\": \\{\\\"data\\\": \\\"HELLO from metin!\\\"\\} \\}\" };\n        std::cout &lt;&lt; \"I will send this : \\n\" &lt;&lt; SendBufHELLO &lt;&lt; \"\\n\"; //quick check if JSON is correctly constructed\n        sendto(\n            myUdpSocket,\n            SendBufHELLO, //this will be our json \n            BufLen,// this will be json buffers length\n            0, //no flags\n            (SOCKADDR*)&amp; rosBridgeUdpAddress,\n            //sizeof(rosBridgeUdpAddress)   );\n            addrLen);\n        return userDialog::SAY_HELLO;\n    }\n        break;\n    default:\n        return userDialog::DIALOG_FINAL;\n    }\n    return userDialog::DIALOG_FINAL;\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "window", "opengl-compat"], "owner": {"reputation": 21, "user_id": 11723649, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HHer4YNPFfM/AAAAAAAAAAI/AAAAAAAAABw/ylYrKCvrdWM/photo.jpg?sz=128", "display_name": "Isordee", "link": "https://stackoverflow.com/users/11723649/isordee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 433, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1563380074, "creation_date": 1563379028, "last_edit_date": 1563380074, "question_id": 57079992, "link": "https://stackoverflow.com/questions/57079992/how-to-display-2d-graphics-in-pangolin-with-panel", "title": "How to display 2D graphics in pangolin with panel", "body": "<p>I can't figure out how to use pangolin to display 2D openGL graphics.</p>\n\n<p>I'm am in internship in the research department of a school.\nI am very novice at OpenGl and Pangolin.\nI'm trying to add a monitoring window to an open_source program so that it is more user-friendly. This program is <a href=\"https://github.com/raulmur/ORB_SLAM2\" rel=\"nofollow noreferrer\">ORB_SLAM2</a>, and it already uses <a href=\"https://github.com/stevenlovegrove/Pangolin\" rel=\"nofollow noreferrer\">pangolin</a> as an openGL display manager. It has already some windows opening with panels and 3d openGL displays like <a href=\"https://i.imgur.com/Edrkicz.png\" rel=\"nofollow noreferrer\">this</a>by this piece of code</p>\n\n<pre><code>void Viewer::Run()\n{\n    //...\n\n    pangolin::CreateWindowAndBind(\"ORB-SLAM2: Map Viewer\",1024,768);\n\n    // 3D Mouse handler requires depth testing to be enabled\n    glEnable(GL_DEPTH_TEST);\n\n    // Issue specific OpenGl we might need\n    glEnable (GL_BLEND);\n    glBlendFunc (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);\n\n    pangolin::CreatePanel(\"menu\").SetBounds(0.0,1.0,0.0,pangolin::Attach::Pix(175));\n        // ... define elements of the menu (not important)\n    // Define Camera Render Object (for view / scene browsing)\n    pangolin::OpenGlRenderState s_cam( \n pangolin::ProjectionMatrix(1024,768,mViewpointF,mViewpointF,512,389,0.1,1000),\npangolin::ModelViewLookAt(mViewpointX,mViewpointY,mViewpointZ, 0,0,0,0.0,-1.0, 0.0));\n\n    // Add named OpenGL viewport to window and provide 3D Handler\n    pangolin::View&amp; d_cam = pangolin::CreateDisplay()\n            .SetBounds(0.0, 1.0, pangolin::Attach::Pix(175), 1.0, -1024.0f/768.0f)\n            .SetHandler(new pangolin::Handler3D(s_cam));\n\n    pangolin::OpenGlMatrix Twc;\n    Twc.SetIdentity();\n        //...\n\n    while(1)\n    {\n            glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\n            mpMapDrawer-&gt;GetCurrentOpenGLCameraMatrix(Twc);\n\n            //...\n\n            d_cam.Activate(s_cam);\n            glClearColor(1.0f,1.0f,1.0f,1.0f);\n            mpMapDrawer-&gt;DrawCurrentCamera(Twc);\n            if(menuShowKeyFrames || menuShowGraph)\n                mpMapDrawer-&gt;DrawKeyFrames(menuShowKeyFrames,menuShowGraph);\n            if(menuShowPoints)\n                mpMapDrawer-&gt;DrawMapPoints();\n\n            pangolin::FinishFrame();\n                        //...\n       }\n</code></pre>\n\n<p>So I tried to copy that and remove the 3D handling part of it like this</p>\n\n<pre><code>void Monitor::Run()\n{\n    //...\n\n    pangolin::CreateWindowAndBind(\"ORB-SLAM2: Monitoring\",1024,768);\n\n    // Issue specific OpenGl we might need\n    glEnable (GL_BLEND);\n    glBlendFunc (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);\n\n    pangolin::View&amp; menu = pangolin::CreatePanel(\"vars\").SetBounds(0.0,1.0,0.0,pangolin::Attach::Pix(175));\n    //...\n    // Add named OpenGL viewport to window\n\n    pangolin::View&amp; graph = pangolin::CreateDisplay()\n            .SetBounds(0.0, 1.0, pangolin::Attach::Pix(175), 1.0, 1024.0f/768.0f);\n    while (1){\n        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\n        graph.Activate();\n        glClearColor(0.0f, 0.0f, 0.0f, 1.0f);\n// 2D Basic test shape\n        glBegin(GL_QUADS);\n            glColor3f(0.4f, 0.05f, 0.05f);\n            glVertex2f(-0.5, 0.8f);\n            glVertex2f(-0.8f, -0.8f);\n            glVertex2f(0.8f, -0.8f);\n            glVertex2f(0.8f, 0.8f); glEnd();\n        pangolin::FinishFrame();\n    }\n}\n</code></pre>\n\n<p>But The 2D Shape isn't apearing, it only shows the background color</p>\n\n<p>I tried the followings:</p>\n\n<ul>\n<li><p>Removing the Panel: it makes the shape appear but I want to keep the panel.</p></li>\n<li><p>Changing zorders of the menu and the shape in both orders, didn't change anything</p></li>\n<li><p>Not enclosing it in an infinite while loop: Both panel and shape appeared but obviously it is a static image. But it appears the render works the first call of FinishFrame() and then it doesn't anymore.</p></li>\n</ul>\n\n<p>And other stuffs but i can't list it all here.</p>\n\n<p>I'm wandering if it is because I didn't create OpenGlRenderState Object, But I don't understand why I would need it for 2D Rendering from my understanding of OpenGL and Pangolin.</p>\n\n<p>I hope you guys can help me.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 6, "creation_date": 1563378870, "post_id": 57079915, "comment_id": 100682773, "body": "<code>input</code> is an integer.  Why do you expect it to store text?  Sounds like you could use a <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1563379097, "post_id": 57079915, "comment_id": 100682905, "body": "Recommendation: Rather than <code>std::cin &gt;&gt; input;</code>, write something like <code>if (std::cin &gt;&gt; input)</code>. This way you can test to see if your input was accepted. Eg: <code>if (std::cin &gt;&gt; input) { std::cout &lt;&lt; input } else { std::cout &lt;&lt; &quot;Error!&quot; }</code>"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1563379449, "post_id": 57079915, "comment_id": 100683125, "body": "<i>&quot;I have tried <code>cin &lt;&lt; input;</code>&quot;</i> - That wouldn&#39;t work regardless. Thankfully that&#39;s not what the later posted code does. Assuming a valid integer input value was performed, the posted code should reflect that value as output.  Second, your post should provide <i>exactly</i> what you offered as input.Since you have no error checking, anything other than valid <code>int</code> data will not extract, and leave <code>input</code> indeterminate."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1563379529, "post_id": 57079915, "comment_id": 100683183, "body": "@WhozCraig Actually in C++11 and above it will zero the destination on failed input."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1563379851, "post_id": 57079915, "comment_id": 100683368, "body": "@NathanOliver Sure. Lets hope the OP is using something from the most recent decade, because a hundred million people still using the travesty of TC++ certainly aren&#39;t. It was interesting the standards committee added that, because without checking the stream state you <i>still</i> don&#39;t know if the zero was due to a failed extraction or an actual zero-read. Therefore, since you have to check it anyway, why bother with a default value. Thanks for the clarity, btw. Nice."}, {"owner": {"reputation": 2202, "user_id": 3357481, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100006348219116/picture?type=large", "display_name": "Mutating Algorithm", "link": "https://stackoverflow.com/users/3357481/mutating-algorithm"}, "edited": false, "score": 0, "creation_date": 1563379926, "post_id": 57079915, "comment_id": 100683409, "body": "<code>input</code> should either be <code>std::string</code> or <code>char*</code>"}], "answers": [{"tags": [], "owner": {"reputation": 223, "user_id": 8711654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53481f827e4342c404efcd63ca0ce631?s=128&d=identicon&r=PG&f=1", "display_name": "Faizan", "link": "https://stackoverflow.com/users/8711654/faizan"}, "is_accepted": true, "score": 1, "last_activity_date": 1563379636, "creation_date": 1563379636, "answer_id": 57080156, "question_id": 57079915, "link": "https://stackoverflow.com/questions/57079915/how-do-i-use-string-to-get-user-console-input/57080156#57080156", "title": "How do i use string to get user Console Input", "body": "<p>Integer can not take text as input. You need string in order to read text input form  user. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main()\n{\n   string text;\n   cin&gt;&gt;text;\n   cout&lt;&lt;text;\n    return 0;\n}\n</code></pre>\n\n<p>This program will  input text from  user. But cin extraction always consider white spaces as termination. For example cin in will only read \"this\" from \"this is an apple string\". In order to read complete string use getline() function. The above program can be written as</p>\n\n<pre><code> #include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main()\n{\n   string text;\n   getline(cin,text); // will read white spaces to\n   cout&lt;&lt;text;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10708061"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 57080156, "answer_count": 1, "score": -1, "last_activity_date": 1572129163, "creation_date": 1563378828, "last_edit_date": 1572129163, "question_id": 57079915, "link": "https://stackoverflow.com/questions/57079915/how-do-i-use-string-to-get-user-console-input", "title": "How do i use string to get user Console Input", "body": "<p>Im working on a c++ programm which needs user text input per terminal as a variable</p>\n\n<p>I have tried cin &lt;&lt; input;</p>\n\n<p>but text output is only shown as a 0</p>\n\n<pre><code>int input;\nstd::cin &gt;&gt; input;\nstd::cout &lt;&lt; input;\n</code></pre>\n\n<p>I expected the text as output but i only got a 0</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1563378720, "post_id": 57079848, "comment_id": 100682693, "body": "<code>\\xb5</code> is a byte and <code>\\xc2\\xb5</code> is 2 bytes. U+C2B5 is not a valid Unicode character: <a href=\"https://www.fileformat.info/info/unicode/char/c2b5/index.htm\" rel=\"nofollow noreferrer\">fileformat.info/info/unicode/char/c2b5/index.htm</a>"}, {"owner": {"reputation": 92, "user_id": 11798493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a425b012e5274492a3c8b0fff3b558?s=128&d=identicon&r=PG&f=1", "display_name": "Yeet", "link": "https://stackoverflow.com/users/11798493/yeet"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1563379833, "post_id": 57079848, "comment_id": 100683357, "body": "Alright, but this solution works, I just want to find a better way of doing it"}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1563386316, "post_id": 57079848, "comment_id": 100686345, "body": "@RichardCritten that site is mistaken, it&#39;s a valid character (it&#39;s even displayed as such!). See <a href=\"https://unicode-table.com/en/search/?q=c2b5\" rel=\"nofollow noreferrer\">what unicode-table.com thinks of it</a>. But anyway, you were checking the wrong thing: <code>C2 B5</code> is a UTF-8 string, which corresponds to U+00B5 code point."}], "answers": [{"comments": [{"owner": {"reputation": 92, "user_id": 11798493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a425b012e5274492a3c8b0fff3b558?s=128&d=identicon&r=PG&f=1", "display_name": "Yeet", "link": "https://stackoverflow.com/users/11798493/yeet"}, "edited": false, "score": 0, "creation_date": 1563383810, "post_id": 57080722, "comment_id": 100685248, "body": "I tried saying text=columnTitle (&quot;&quot;QString::fromUtf8(&quot;\\xb5&quot;)&quot;&quot;s) in my .ini file (which generates the cpp, h) it returned an error that I&#39;m miss a ) before QString. This error does NOT occur with using  text=columnTitle (&quot;&quot;\\xb5&quot;&quot;s)"}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "reply_to_user": {"reputation": 92, "user_id": 11798493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a425b012e5274492a3c8b0fff3b558?s=128&d=identicon&r=PG&f=1", "display_name": "Yeet", "link": "https://stackoverflow.com/users/11798493/yeet"}, "edited": false, "score": 0, "creation_date": 1563386055, "post_id": 57080722, "comment_id": 100686238, "body": "@Yeet because you&#39;re feeding an Latin1 string to the function which expects UTF-8."}, {"owner": {"reputation": 92, "user_id": 11798493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a425b012e5274492a3c8b0fff3b558?s=128&d=identicon&r=PG&f=1", "display_name": "Yeet", "link": "https://stackoverflow.com/users/11798493/yeet"}, "edited": false, "score": 0, "creation_date": 1563386183, "post_id": 57080722, "comment_id": 100686296, "body": "how can I make that return in the UTF-8 then? Is it an issue with using the .ini to generate the files?"}, {"owner": {"reputation": 92, "user_id": 11798493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a425b012e5274492a3c8b0fff3b558?s=128&d=identicon&r=PG&f=1", "display_name": "Yeet", "link": "https://stackoverflow.com/users/11798493/yeet"}, "edited": false, "score": 0, "creation_date": 1563386307, "post_id": 57080722, "comment_id": 100686339, "body": "would using the encoding for mu rather than the microsecond be something to try?"}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "reply_to_user": {"reputation": 92, "user_id": 11798493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a425b012e5274492a3c8b0fff3b558?s=128&d=identicon&r=PG&f=1", "display_name": "Yeet", "link": "https://stackoverflow.com/users/11798493/yeet"}, "edited": false, "score": 0, "creation_date": 1563386590, "post_id": 57080722, "comment_id": 100686458, "body": "@Yeet you say in the OP that <code>\\xc2\\xb5</code> works in Qt5 \u2014 why not use it now? It <i>is</i> the UTF-8 representation of the <i>micro sign</i>."}, {"owner": {"reputation": 92, "user_id": 11798493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a425b012e5274492a3c8b0fff3b558?s=128&d=identicon&r=PG&f=1", "display_name": "Yeet", "link": "https://stackoverflow.com/users/11798493/yeet"}, "edited": false, "score": 0, "creation_date": 1563388477, "post_id": 57080722, "comment_id": 100687325, "body": "QT4 shows 2 symbols rather than only the microsecond"}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "reply_to_user": {"reputation": 92, "user_id": 11798493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a425b012e5274492a3c8b0fff3b558?s=128&d=identicon&r=PG&f=1", "display_name": "Yeet", "link": "https://stackoverflow.com/users/11798493/yeet"}, "edited": false, "score": 0, "creation_date": 1563394949, "post_id": 57080722, "comment_id": 100690195, "body": "@Yeet then you must have done it wrong. See <a href=\"https://pastebin.com/raw/TE1xj0d2\" rel=\"nofollow noreferrer\">this simple example</a> where it works both in Qt4 and in Qt5."}, {"owner": {"reputation": 92, "user_id": 11798493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a425b012e5274492a3c8b0fff3b558?s=128&d=identicon&r=PG&f=1", "display_name": "Yeet", "link": "https://stackoverflow.com/users/11798493/yeet"}, "edited": false, "score": 0, "creation_date": 1563397124, "post_id": 57080722, "comment_id": 100691020, "body": "The problem appears to be where it is generated from an .ini, the encoding is picked up but the QString::fromUtf8 is ignored and is printed as if it were part of the string"}, {"owner": {"reputation": 92, "user_id": 11798493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a425b012e5274492a3c8b0fff3b558?s=128&d=identicon&r=PG&f=1", "display_name": "Yeet", "link": "https://stackoverflow.com/users/11798493/yeet"}, "edited": false, "score": 0, "creation_date": 1563397201, "post_id": 57080722, "comment_id": 100691051, "body": "I used a different encoding else where that worked for another symbol QChar(0x2715) but the problem of being printed as part of the string persists"}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "reply_to_user": {"reputation": 92, "user_id": 11798493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a425b012e5274492a3c8b0fff3b558?s=128&d=identicon&r=PG&f=1", "display_name": "Yeet", "link": "https://stackoverflow.com/users/11798493/yeet"}, "edited": false, "score": 0, "creation_date": 1563398816, "post_id": 57080722, "comment_id": 100691636, "body": "That looks like a separate problem worth of its own question. But if you do ask, please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal, complete and verifiable example</a> for your problem. Otherwise it&#39;ll be hard to guess what your actual problem is."}], "tags": [], "owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "is_accepted": true, "score": 1, "last_activity_date": 1563381902, "creation_date": 1563381902, "answer_id": 57080722, "question_id": 57079848, "link": "https://stackoverflow.com/questions/57079848/qt-4-qt-5-encoding/57080722#57080722", "title": "QT 4 &lt;-&gt;QT 5 Encoding", "body": "<p>The problem is that by default, <code>QString</code> in Qt4, when working with <code>char*</code> or <code>const char*</code> arguments, treats them as ASCII strings (see <a href=\"https://doc.qt.io/archives/qt-4.8/qstring.html#QString-8\" rel=\"nofollow noreferrer\">the docs</a>), while in Qt5 they are UTF-8 strings (<a href=\"https://doc.qt.io/qt-5/qstring.html#QString-7\" rel=\"nofollow noreferrer\">the docs</a>). So what you think \"only needs a nibble from the byte\" is actually \"needs the ASCII value for the character\". The <code>\u00b5</code> character has code 0xB5 in Latin1, which is the default code page for Qt4's ASCII. And the <code>C2\u00a0B5</code> is the UTF-8 representation of the code point corresponding to this character.</p>\n\n<p>So what you actually need to do is to avoid the constructor <code>QString::QString(const char*)</code>, and instead use <a href=\"https://doc.qt.io/qt-5/qstring.html#fromUtf8\" rel=\"nofollow noreferrer\"><code>QString::fromUtf8</code></a> explicitly.</p>\n"}], "owner": {"reputation": 92, "user_id": 11798493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a425b012e5274492a3c8b0fff3b558?s=128&d=identicon&r=PG&f=1", "display_name": "Yeet", "link": "https://stackoverflow.com/users/11798493/yeet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 57080722, "answer_count": 1, "score": 1, "last_activity_date": 1563381902, "creation_date": 1563378622, "question_id": 57079848, "link": "https://stackoverflow.com/questions/57079848/qt-4-qt-5-encoding", "title": "QT 4 &lt;-&gt;QT 5 Encoding", "body": "<p>I am trying to account for the use of both QT4 and QT5. The system uses both versions but they're in separate products that share common files. </p>\n\n<p>I have found a solution that works but it has to do a version check each time and I would like to find a way to have a \"one encoding fits both\" scenario.</p>\n\n<p>My current solution is something like this, using a micro sign (\u00b5) as an example.</p>\n\n<p>The QT 4 encoding only needs a nibble from the byte which in this case is (\\xb5)</p>\n\n<p>Qt 5 needs the whole byte (\\xc2\\xb5).</p>\n\n<p>I have also tried using the C++ code (\\u00B5) but that produced a \u00ce 1/4</p>\n\n<p>c++</p>\n\n<pre><code>#include &lt;QtCore/QtGlobal&gt;\n#if QT_VERSION &gt;= 0x050000\nprint out a QString with the code \\xc2\\xb5\n#else\nprint out a QString with the code \\xb5\n#endif\n</code></pre>\n\n<p>Is there a better way to do this and avoid the need for a version check? I have around 50 of these checks that I would like to eliminate.</p>\n"}, {"tags": ["python", "c++", "visual-studio", "logging", "trace"], "answers": [{"comments": [{"owner": {"reputation": 355, "user_id": 9806044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/225f7c4b348d46abfebfaaf15fe09547?s=128&d=identicon&r=PG&f=1", "display_name": "The_Learner", "link": "https://stackoverflow.com/users/9806044/the-learner"}, "edited": false, "score": 0, "creation_date": 1563425112, "post_id": 57079983, "comment_id": 100696969, "body": "Thank you very much for the answer. If there is no trace facility, is there a way to log the call stack in visual c++"}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "reply_to_user": {"reputation": 355, "user_id": 9806044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/225f7c4b348d46abfebfaaf15fe09547?s=128&d=identicon&r=PG&f=1", "display_name": "The_Learner", "link": "https://stackoverflow.com/users/9806044/the-learner"}, "edited": false, "score": 0, "creation_date": 1563444475, "post_id": 57079983, "comment_id": 100705815, "body": "@The_Learner It&#39;s a paradigm shift moving from interpreted to fully compiled languages.  Inject print/log messages into critical places in your code to help you debug. Also learn how to work with your debugger - there&#39;s a step facility to walk through the source code as it executes."}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": true, "score": 2, "last_activity_date": 1563379005, "creation_date": 1563379005, "answer_id": 57079983, "question_id": 57079838, "link": "https://stackoverflow.com/questions/57079838/tracing-and-logging-line-by-line-execution-of-a-c-program/57079983#57079983", "title": "Tracing and logging line by line execution of a c++ program", "body": "<p>Python is line-by-line interpreted. Interpreted languages usually have some sort of trace trigger, so that along with interpreting every line as it executes, it also traces the lines.  C++ is a fully compiled language and, as such, has no such trace facility. </p>\n"}], "owner": {"reputation": 355, "user_id": 9806044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/225f7c4b348d46abfebfaaf15fe09547?s=128&d=identicon&r=PG&f=1", "display_name": "The_Learner", "link": "https://stackoverflow.com/users/9806044/the-learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 0, "accepted_answer_id": 57079983, "answer_count": 1, "score": 3, "last_activity_date": 1563379005, "creation_date": 1563378576, "question_id": 57079838, "link": "https://stackoverflow.com/questions/57079838/tracing-and-logging-line-by-line-execution-of-a-c-program", "title": "Tracing and logging line by line execution of a c++ program", "body": "<p>I am working on an opensource finite element software, which is written in C++ (Visual Studio). The documentation and examples provided are only helpful to know which methods to call for a specific purpose, but could not help in letting the users know, what exactly the methods are doing. For some methods, other than C++ code there is no other reference available (such as books, research papers, etc.)  </p>\n\n<p>Hence, to deduce the concept, I am trying to trace every line of execution using breakpoints and viewing call stack (option provided in visual studio), which may be good for tracing a small program, but my program constitutes lots of classes with several inheritances and polymorphed functions. To understand the program execution flow, I wanted to print every line of program execution in a log file. </p>\n\n<p>While researching I found some useful information (<a href=\"https://youtu.be/l3M9zzwOJ1Q?list=PLAwxTw4SYaPkxK63TiT88oEe-AIBhr96A&amp;t=20\" rel=\"nofollow noreferrer\">here</a>), in python language. Which is exactly what I need. For readers convenience, I am reproducing the code mentioned in video below</p>\n\n<pre><code>import sys\n\ndef remove_html_markup(s):\n    tag     =   False\n    quote   =   False\n    out     =   \" \"\n\n    for c in s:\n        if c == 'c' and not quote:\n            tag = True\n        elif c== '&gt;' and not quote:\n            tage = False\n        elif c == '\"' or c == \"'\" and tag:\n            quote = not quote\n        elif not tag:\n            out = out + c\n    return out\n\ndef traceit(frame, event, arg):\n    if event == \"line\":\n        filename    =   frame.f_code.co_filename\n        lineno      =   frame.f_lineno\n        print open(filename).readlines()[lineno - 1]\n\n    return traceit\n\nsys.settrace(traceit)\ns = remove_html_markup('\"&lt;')\nsys.settrace(none)\n</code></pre>\n\n<p>I am expecting a similar version of C++ code for traceit function, which can print every line that is being executed in a separate logfile. I don't know how to extend it, so that it can print all the inheritances and polymorphed functions. </p>\n\n<p>Also I have seen and tried a methodology provided in one of the <a href=\"https://stackoverflow.com/a/47000744/9806044\">answer</a> on StackOverflow for c++. However, it has two drawbacks</p>\n\n<ol>\n<li>It is printing only filename, function name with line number. I want also to print the statment being executed.</li>\n<li>At the beginning of the function I have to call a method <code>CALLSTACK_DUMP();</code>, which I cannot do in my program since there are a plethora of functions.</li>\n</ol>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1563378846, "post_id": 57079795, "comment_id": 100682760, "body": "You need a plan. Coding without a plan is almost always a bad idea. Write down what you need the program to do on paper. Normally I&#39;d organize that list by what has to happen in what order, but in this case I think drawing a diagram might help more because you can add lines to better describe the flow of one step to the next. Somewhere in that drawing you&#39;ll find you need a line that goes back to the beginning. That&#39;s where the loop is. You may find a <code>do</code>/<code>while</code> loop fits well here."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 2, "creation_date": 1563379556, "post_id": 57079795, "comment_id": 100683199, "body": "Just a recommendation: Don&#39;t use doubles for pricings and calculations. Even <code>0.40</code> cannot be represented exactly in double, as it is periodic in binary representation. Instead, you might do all calculations in cents and just format the final output appropriately."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1563379728, "post_id": 57079795, "comment_id": 100683300, "body": "You additionally might use the price constants to print the pricing table, this way don&#39;t repeat &#39;magic numbers&#39; and don&#39;t have to adjust twice if you need to change a price."}], "answers": [{"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1563379344, "post_id": 57079958, "comment_id": 100683067, "body": "I recommend not to quit the loop on invalid input; user accidentally typing bad key will force her/him to restart entire programme. Worse: you <i>now</i> invoke undefined behaviour: You replaced <code>=</code> with <code>+=</code> but forgot the now necessary initialisation of the totals."}, {"owner": {"reputation": 1605, "user_id": 11723965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3ygAu.jpg?s=128&g=1", "display_name": "nivpeled", "link": "https://stackoverflow.com/users/11723965/nivpeled"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1563431251, "post_id": 57079958, "comment_id": 100698897, "body": "@Aconcagua, Thanks for your feedback. I agree to both comments on exit condition from the loop, as well as missing init for the total. I gave the code sample only to show the concept; by all means I did not plan to provide 0 bug, production quality code."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1563444738, "post_id": 57079958, "comment_id": 100705948, "body": "<i>&#39;I did not plan to provide 0 bug [...] code&#39;</i> \u2013 the point is: introducing a new bug that did not exist before is critical for the question author, especially as the missing initialisation is harder to spot. She/he likely runs into such error and again wonders why code is not working, or even worse, seems to work in debug, but not in release mode. If you want to further improve your answer: Highlight the additionally necessary changes with some comment (so that QA catches better) and explaining why this change now is necessary (difference between <code>=</code> and <code>+=</code>, etc)."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1563445121, "post_id": 57079958, "comment_id": 100706135, "body": "The exiting, on the other hand, is <i>rather</i> just cosmetics. But you can hint QA or other readers to what is good practice \u2013 or head them into the opposite direction. If we are on that: Instead of not doing anything, you might hint to better practice of outputting some error message (just as comment like <code>&#47;&#47; some appropriate error handling</code> or <code>[...] message</code> is far enough..)."}, {"owner": {"reputation": 1605, "user_id": 11723965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3ygAu.jpg?s=128&g=1", "display_name": "nivpeled", "link": "https://stackoverflow.com/users/11723965/nivpeled"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1563447200, "post_id": 57079958, "comment_id": 100707200, "body": "@Aconcagua Thanks again for your valuable comments. I have corrected my code."}], "tags": [], "owner": {"reputation": 1605, "user_id": 11723965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3ygAu.jpg?s=128&g=1", "display_name": "nivpeled", "link": "https://stackoverflow.com/users/11723965/nivpeled"}, "is_accepted": false, "score": 0, "last_activity_date": 1563431336, "last_edit_date": 1563431336, "creation_date": 1563378936, "answer_id": 57079958, "question_id": 57079795, "link": "https://stackoverflow.com/questions/57079795/c-looping-statement-on-package-pricing/57079958#57079958", "title": "c++ looping statement on package pricing", "body": "<p>you should add an option to quit, and while loop as long as the user keep selecting packages:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\nint main()\n{\nconst double W_adult=47.90, W_child=41.50, W_senior=35.40, A_adult=25.90, A_child=20.50, A_senior=15.40, P_adult=15.90, P_child=12.50, P_senior=10.40;\ndouble totaladult = 0,totalchild = 0,totalsenior = 0, total = 0;\nint noadult = 0,nochild = 0,nosenior = 0;\nchar option;\nbool run = true;\n//char choice = 'y'; looping choice\n\ncout&lt;&lt;\"WELCOME TO WAS LOST WORLD THEME PARK\\n\\n\"&lt;&lt;endl;\ncout&lt;&lt;setw(80)&lt;&lt;setfill('*')&lt;&lt;\"*\";\ncout&lt;&lt;\"\\nPackage name \\t | ADULT\\t | CHILD\\t | SENIOR CITIZEN\"&lt;&lt;endl;\ncout&lt;&lt;\"|A| Water Park\\t | 47.90\\t | 41.50\\t | 35.40\"&lt;&lt;endl;\ncout&lt;&lt;\"|B| Am. Park\\t | 25.90 \\t | 20.50 \\t | 15.40\"&lt;&lt;endl;\ncout&lt;&lt;\"|C| Pet. Zoo\\t | 15.90\\t | 12.50\\t | 10.40\"&lt;&lt;endl&lt;&lt;endl;\ncout&lt;&lt;setw(80)&lt;&lt;setfill('*')&lt;&lt;\"*\";\n\nwhile(run)\n{\ncout&lt;&lt;\"\\nChoose your package A/B/C --- or Q to quit: \"&lt;&lt;endl;\ncin&gt;&gt;option;\n\n\ncout&lt;&lt;\"Enter the no of adult: \"&lt;&lt;endl;\ncin&gt;&gt;noadult;\ncout&lt;&lt;\"Enter the no of child: \"&lt;&lt;endl;\ncin&gt;&gt;nochild;\ncout&lt;&lt;\"Enter the no of senior citizen: \"&lt;&lt;endl;\ncin&gt;&gt;nosenior;\n\nswitch(option)\n{\n    case 'A':\n    case 'a':\n        totaladult+=W_adult*noadult;\n        totalchild+=W_child*nochild;\n        totalsenior+=W_senior*nosenior;\n\n    break;\n\n    case 'B':\n    case 'b':\n        totaladult+=A_adult*noadult;\n        totalchild+=A_child*nochild;\n        totalsenior+=A_senior*nosenior;\n\n    break;\n\n    case 'C':\n    case 'c':\n        totaladult+=P_adult*noadult;\n        totalchild+=P_child*nochild;\n        totalsenior+=P_senior*nosenior;\n        break;\n\n        case 'q':\n        case 'Q':\n            run = false;\n            break;\n\n        default:\n            // do nothing\n            break;\n\n    break;\n}\n\ncout&lt;&lt;\"Total no of adult is: \"&lt;&lt;noadult&lt;&lt;endl;\ncout&lt;&lt;\"Total no of child is: \"&lt;&lt;nochild&lt;&lt;endl;\ncout&lt;&lt;\"Total no of senior citizen is: \"&lt;&lt;nosenior&lt;&lt;endl;\ncout&lt;&lt;\"Total price of adult is: \"&lt;&lt;totaladult&lt;&lt;endl;\ncout&lt;&lt;\"Total price of child is: \"&lt;&lt;totalchild&lt;&lt;endl;\ncout&lt;&lt;\"Total price of senior citizen is: \"&lt;&lt;totalsenior&lt;&lt;endl;\ncout&lt;&lt;\"The total price is: \"&lt;&lt;totaladult+totalchild+totalsenior&lt;&lt;endl;\n}\nreturn 0;   \n\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 11689948, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VcwGDsQ41e8/AAAAAAAAAAI/AAAAAAAAKJg/Z7EpLh_OYLs/photo.jpg?sz=128", "display_name": "ThePete", "link": "https://stackoverflow.com/users/11689948/thepete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1563431396, "creation_date": 1563378441, "last_edit_date": 1563431396, "question_id": 57079795, "link": "https://stackoverflow.com/questions/57079795/c-looping-statement-on-package-pricing", "title": "c++ looping statement on package pricing", "body": "<p>I'm trying to make a loop statement to determine the prices according to their respective packages but I can't seem to get a grasp of the <code>do</code> and <code>while</code> statements.  </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\nint main()\n{\n    const double W_adult=47.90, W_child=41.50, W_senior=35.40, A_adult=25.90, A_child=20.50, A_senior=15.40, P_adult=15.90, P_child=12.50, P_senior=10.40;\n    double totaladult,totalchild,totalsenior, total;\n    int noadult,nochild,nosenior;\n    char option;\n    //char choice = 'y'; looping choice\n\n    cout&lt;&lt;\"WELCOME TO WAS LOST WORLD THEME PARK\\n\\n\"&lt;&lt;endl;\n    cout&lt;&lt;setw(80)&lt;&lt;setfill('*')&lt;&lt;\"*\";\n    cout&lt;&lt;\"\\nPackage name \\t | ADULT\\t | CHILD\\t | SENIOR CITIZEN\"&lt;&lt;endl;\n    cout&lt;&lt;\"|A| Water Park\\t | 47.90\\t | 41.50\\t | 35.40\"&lt;&lt;endl;\n    cout&lt;&lt;\"|B| Am. Park\\t | 25.90 \\t | 20.50 \\t | 15.40\"&lt;&lt;endl;\n    cout&lt;&lt;\"|C| Pet. Zoo\\t | 15.90\\t | 12.50\\t | 10.40\"&lt;&lt;endl&lt;&lt;endl;\n    cout&lt;&lt;setw(80)&lt;&lt;setfill('*')&lt;&lt;\"*\";\n\n    cout&lt;&lt;\"\\nChoose your package A/B/C: \"&lt;&lt;endl;\n    cin&gt;&gt;option;\n\n    cout&lt;&lt;\"Enter the no of adult: \"&lt;&lt;endl;\n    cin&gt;&gt;noadult;\n    cout&lt;&lt;\"Enter the no of child: \"&lt;&lt;endl;\n    cin&gt;&gt;nochild;\n    cout&lt;&lt;\"Enter the no of senior citizen: \"&lt;&lt;endl;\n    cin&gt;&gt;nosenior;\n\n    switch(option)\n    {\n        case 'A':\n        case 'a':\n            totaladult=W_adult*noadult;\n            totalchild=W_child*nochild;\n            totalsenior=W_senior*nosenior;\n\n        break;\n\n        case 'B':\n        case 'b':\n            totaladult=A_adult*noadult;\n            totalchild=A_child*nochild;\n            totalsenior=A_senior*nosenior;\n\n        break;\n\n        case 'C':\n        case 'c':\n            totaladult=P_adult*noadult;\n            totalchild=P_child*nochild;\n            totalsenior=P_senior*nosenior;\n\n        break;\n    }\n\n    cout&lt;&lt;\"Total no of adult is: \"&lt;&lt;noadult&lt;&lt;endl;\n    cout&lt;&lt;\"Total no of child is: \"&lt;&lt;nochild&lt;&lt;endl;\n    cout&lt;&lt;\"Total no of senior citizen is: \"&lt;&lt;nosenior&lt;&lt;endl;\n    cout&lt;&lt;\"Total price of adult is: \"&lt;&lt;totaladult&lt;&lt;endl;\n    cout&lt;&lt;\"Total price of child is: \"&lt;&lt;totalchild&lt;&lt;endl;\n    cout&lt;&lt;\"Total price of senior citizen is: \"&lt;&lt;totalsenior&lt;&lt;endl;\n    cout&lt;&lt;\"The total price is: \"&lt;&lt;totaladult+totalchild+totalsenior&lt;&lt;endl;\n\n    return 0;       \n}\n</code></pre>\n\n<p>Is there something else I'm missing here? Currently it only calculates the price of one category. I would like know where should I include the loop statements.</p>\n"}, {"tags": ["c++", "eigen"], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1563380585, "post_id": 57080398, "comment_id": 100683766, "body": "If not then you&#39;re going to have to expand on what you wish to do!"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 2, "last_activity_date": 1563380543, "creation_date": 1563380543, "answer_id": 57080398, "question_id": 57079785, "link": "https://stackoverflow.com/questions/57079785/eigen-function-that-does-array-operations-on-matrix-or-block/57080398#57080398", "title": "Eigen function that does array operations on Matrix&lt;&gt; or Block&lt;&gt;", "body": "<p>If both kinds of object support the operations you wish to perform, then:</p>\n\n<pre><code>template &lt;typename T&gt;\ndouble example_function(const T&amp; input){\n    double d1 = input.array().pow(2).sum();\n    double d2 = input.rowwise().norm().sum();\n    return d1 + d2;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1163, "user_id": 1234559, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fb911d4d4dd217eff8688bb1a6777d86?s=128&d=identicon&r=PG", "display_name": "sciencectn", "link": "https://stackoverflow.com/users/1234559/sciencectn"}, "edited": false, "score": 0, "creation_date": 1563383804, "post_id": 57080718, "comment_id": 100685245, "body": "Thanks, I&#39;ve corrected those things. I should actually run the sample code next time..."}], "tags": [], "owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "is_accepted": true, "score": 3, "last_activity_date": 1563381890, "creation_date": 1563381890, "answer_id": 57080718, "question_id": 57079785, "link": "https://stackoverflow.com/questions/57079785/eigen-function-that-does-array-operations-on-matrix-or-block/57080718#57080718", "title": "Eigen function that does array operations on Matrix&lt;&gt; or Block&lt;&gt;", "body": "<p>First of all, your original code (with <code>const MatrixXd&amp;</code>) does work, but it can generate an unnecessary copy. To accept both <code>Matrix&lt;...&gt;</code> and <code>Block&lt;Matrix&lt;...&gt; &gt;</code> objects via a templated function, use <code>MatrixBase</code> instead of <code>DenseBase</code>:</p>\n\n<pre><code>template&lt;class Derived&gt;\ndouble example_function(const Eigen::MatrixBase&lt;Derived&gt; &amp; input){\n    double d1 = input.array().abs2().sum(); // abs2() is simpler/more efficient than pow(2)\n    double d2 = input.rowwise().norm().sum();\n    return d1 + d2;\n}\n</code></pre>\n\n<p>However, in your example code <code>m1.block(1,0)</code> is invalid, as you need to specify the size as well as the start-index, e.g., these work:</p>\n\n<pre><code>m1.block&lt;1,2&gt;(1,0);\nm1.block(1,0, 1,2);\n</code></pre>\n\n<p>and <code>m1.Random()</code> should be <code>m1.setRandom()</code>.</p>\n"}], "owner": {"reputation": 1163, "user_id": 1234559, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fb911d4d4dd217eff8688bb1a6777d86?s=128&d=identicon&r=PG", "display_name": "sciencectn", "link": "https://stackoverflow.com/users/1234559/sciencectn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 57080718, "answer_count": 2, "score": 0, "last_activity_date": 1563383494, "creation_date": 1563378415, "last_edit_date": 1563383494, "question_id": 57079785, "link": "https://stackoverflow.com/questions/57079785/eigen-function-that-does-array-operations-on-matrix-or-block", "title": "Eigen function that does array operations on Matrix&lt;&gt; or Block&lt;&gt;", "body": "<p>I'd like to make a function that can take both a Matrix&lt;> or a Block&lt;> object. </p>\n\n<p>Example:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;Eigen/Dense&gt;\n\n//A simplified example of the function I'm making\ndouble example_function(const Eigen::MatrixXd &amp; input){\n    double d1 = input.array().pow(2).sum();\n    double d2 = input.rowwise().norm().sum();\n    return d1 + d2;\n}\n\n\nint main(){\n    Eigen::MatrixXd m1(3,2);\n    m1.setRandom();\n\n    // This works\n    example_function(m1);\n\n    // I'd like to make this work\n    example_function(m1.block(1,0,2,2));\n\n    return 0;\n}\n</code></pre>\n\n<p>The following does <strong>not</strong> work, because DenseBase does not have the 'array' method:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename Derived&gt;\ndouble example_function(const Eigen::DenseBase&lt;Derived&gt; &amp; input){\n    double d1 = input.array().pow(2).sum();  // array() method invalid \n    double d2 = input.rowwise().norm().sum();\n    return d1 + d2;\n}\n</code></pre>\n\n<p>How would I go about this?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1563378295, "post_id": 57079733, "comment_id": 100682430, "body": "<i>&quot; I apologize for the length of this one but this is literally the smallest that I could get&quot;</i> This looks like all of the code, it doesn&#39;t appear to have been minimized in any way. Maybe you need to make a new project that isolates the problem and share that instead. Please read about <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>s."}, {"owner": {"reputation": 608, "user_id": 3904858, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/34b74f56d8756f1278d689152c004200?s=128&d=identicon&r=PG&f=1", "display_name": "philm", "link": "https://stackoverflow.com/users/3904858/philm"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1563378777, "post_id": 57079733, "comment_id": 100682728, "body": "@Fran&#231;oisAndrieux Thank you for posting a link for the resource. However, this is the smallest code that I could produce for the bug to appear. This is two tabs from an interface that has this bug. I replaced all of the text for confidential purposes. The bug appears with 2+ tabs. I wanted to keep the overall layout of that form the same as what I have in the actual program. There are 4 files because I created the interface in the designer."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1563379097, "post_id": 57079733, "comment_id": 100682904, "body": "You can start by removing all of the options, then the tabs, and continue to remove elements until you find those that, when removed, eliminate the problem. Continue until there is nothing non-essential left to remove. You may very well find the answer yourself. Even if you don&#39;t knowing which elements are actually part of the problem provide valuable clues. This will also result in a smaller code to debug. If absolutely everything here is essential to reproducing the problem, it&#39;s unlikely anyone will take the time to try to track down the cause for you."}, {"owner": {"reputation": 608, "user_id": 3904858, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/34b74f56d8756f1278d689152c004200?s=128&d=identicon&r=PG&f=1", "display_name": "philm", "link": "https://stackoverflow.com/users/3904858/philm"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1563464151, "post_id": 57079733, "comment_id": 100717485, "body": "OK, I have edited my code sample and I was able to remove some widgets for the bug to still appear. In the Dycycle Controls layout and Operation Bypass Controls, if you remove any widget, the bug does not appear. If you remove any layout widget, the bug no longer appears. So the code is now the smallest that I could get it. I know that it is a little cumbersome but it is the best that I can do."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1563464503, "post_id": 57079733, "comment_id": 100717692, "body": "@philm share <code>mainwindow.ui</code> instead <code>ui_mainwindow.h</code>"}, {"owner": {"reputation": 608, "user_id": 3904858, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/34b74f56d8756f1278d689152c004200?s=128&d=identicon&r=PG&f=1", "display_name": "philm", "link": "https://stackoverflow.com/users/3904858/philm"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1563810262, "post_id": 57079733, "comment_id": 100814464, "body": "@eyllanesc Thank you for the suggestion. I have updated my post to match accordingly"}], "answers": [{"tags": [], "owner": {"reputation": 608, "user_id": 3904858, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/34b74f56d8756f1278d689152c004200?s=128&d=identicon&r=PG&f=1", "display_name": "philm", "link": "https://stackoverflow.com/users/3904858/philm"}, "is_accepted": true, "score": 0, "last_activity_date": 1564070334, "creation_date": 1564070334, "answer_id": 57206062, "question_id": 57079733, "link": "https://stackoverflow.com/questions/57079733/qt-bug-where-container-resize-at-run-time/57206062#57206062", "title": "Qt bug where container resize at run time", "body": "<p>I have solved the issue. Basically, in the <code>scrollAreaWidgetContents</code> container, I changed the <code>layoutSizeContraint</code> from the default value to <code>SetMinandMaxSize</code>.</p>\n\n<p>I have tried this on a number of my forms and the window is not longer displaying the behaviour posted above.</p>\n"}], "owner": {"reputation": 608, "user_id": 3904858, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/34b74f56d8756f1278d689152c004200?s=128&d=identicon&r=PG&f=1", "display_name": "philm", "link": "https://stackoverflow.com/users/3904858/philm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 1, "accepted_answer_id": 57206062, "answer_count": 1, "score": 0, "last_activity_date": 1564070441, "creation_date": 1563378222, "last_edit_date": 1564070441, "question_id": 57079733, "link": "https://stackoverflow.com/questions/57079733/qt-bug-where-container-resize-at-run-time", "title": "Qt bug where container resize at run time", "body": "<p>I have a nasty bug where the size of my container(s) / layout(s) resize themselves whenever I click on a text box. When the resize occurs, all of the widgets are re-aligned to what they should be in the designer (I created the layout and the interface using the designer). I thought that if I were to force the interface to redraw itself when displayed, the containers would resize but this did not work. I have been looking on the net to see if there is anything similar and so far, there is nothing. I have pictures and a minimal-ish code example prepared.</p>\n\n<p>I am running linux mint 19.1 with Qt 5.9 (the version that comes with my distro).</p>\n\n<p>Any help will be greatly appreciated. </p>\n\n<p>Thank you.</p>\n\n<p>Before the resize:</p>\n\n<p><a href=\"https://i.stack.imgur.com/83DBH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/83DBH.png\" alt=\"Before resize happens\"></a></p>\n\n<p>After the resize:</p>\n\n<p><a href=\"https://i.stack.imgur.com/XGfvj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XGfvj.png\" alt=\"After resize happens\"></a></p>\n\n<p>Also, here is the code example. I apologize for the length of this one but this is literally the smallest that I could get:</p>\n\n<p><strong>mainwindow.ui</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ui version=\"4.0\"&gt;\n &lt;class&gt;MainWindow&lt;/class&gt;\n &lt;widget class=\"QMainWindow\" name=\"MainWindow\"&gt;\n  &lt;property name=\"geometry\"&gt;\n   &lt;rect&gt;\n    &lt;x&gt;0&lt;/x&gt;\n    &lt;y&gt;0&lt;/y&gt;\n    &lt;width&gt;448&lt;/width&gt;\n    &lt;height&gt;709&lt;/height&gt;\n   &lt;/rect&gt;\n  &lt;/property&gt;\n  &lt;property name=\"font\"&gt;\n   &lt;font&gt;\n    &lt;family&gt;DejaVu Sans Mono&lt;/family&gt;\n    &lt;pointsize&gt;12&lt;/pointsize&gt;\n    &lt;weight&gt;50&lt;/weight&gt;\n    &lt;italic&gt;false&lt;/italic&gt;\n    &lt;bold&gt;false&lt;/bold&gt;\n   &lt;/font&gt;\n  &lt;/property&gt;\n  &lt;property name=\"windowTitle\"&gt;\n   &lt;string&gt;MainWindow&lt;/string&gt;\n  &lt;/property&gt;\n  &lt;widget class=\"QWidget\" name=\"centralWidget\"&gt;\n   &lt;widget class=\"QTabWidget\" name=\"tabWidget\"&gt;\n    &lt;property name=\"geometry\"&gt;\n     &lt;rect&gt;\n      &lt;x&gt;0&lt;/x&gt;\n      &lt;y&gt;10&lt;/y&gt;\n      &lt;width&gt;431&lt;/width&gt;\n      &lt;height&gt;621&lt;/height&gt;\n     &lt;/rect&gt;\n    &lt;/property&gt;\n    &lt;property name=\"font\"&gt;\n     &lt;font&gt;\n      &lt;family&gt;DejaVu Sans Mono&lt;/family&gt;\n     &lt;/font&gt;\n    &lt;/property&gt;\n    &lt;property name=\"currentIndex\"&gt;\n     &lt;number&gt;0&lt;/number&gt;\n    &lt;/property&gt;\n    &lt;widget class=\"QWidget\" name=\"tab_9\"&gt;\n     &lt;attribute name=\"title\"&gt;\n      &lt;string&gt;Access Control&lt;/string&gt;\n     &lt;/attribute&gt;\n     &lt;widget class=\"QTextEdit\" name=\"textEdit\"&gt;\n      &lt;property name=\"geometry\"&gt;\n       &lt;rect&gt;\n        &lt;x&gt;10&lt;/x&gt;\n        &lt;y&gt;10&lt;/y&gt;\n        &lt;width&gt;401&lt;/width&gt;\n        &lt;height&gt;561&lt;/height&gt;\n       &lt;/rect&gt;\n      &lt;/property&gt;\n     &lt;/widget&gt;\n    &lt;/widget&gt;\n    &lt;widget class=\"QWidget\" name=\"tab_7\"&gt;\n     &lt;attribute name=\"title\"&gt;\n      &lt;string&gt;Misc. Options&lt;/string&gt;\n     &lt;/attribute&gt;\n     &lt;widget class=\"QScrollArea\" name=\"scrollArea_5\"&gt;\n      &lt;property name=\"geometry\"&gt;\n       &lt;rect&gt;\n        &lt;x&gt;10&lt;/x&gt;\n        &lt;y&gt;20&lt;/y&gt;\n        &lt;width&gt;400&lt;/width&gt;\n        &lt;height&gt;571&lt;/height&gt;\n       &lt;/rect&gt;\n      &lt;/property&gt;\n      &lt;property name=\"sizePolicy\"&gt;\n       &lt;sizepolicy hsizetype=\"Fixed\" vsizetype=\"Fixed\"&gt;\n        &lt;horstretch&gt;0&lt;/horstretch&gt;\n        &lt;verstretch&gt;0&lt;/verstretch&gt;\n       &lt;/sizepolicy&gt;\n      &lt;/property&gt;\n      &lt;property name=\"minimumSize\"&gt;\n       &lt;size&gt;\n        &lt;width&gt;400&lt;/width&gt;\n        &lt;height&gt;0&lt;/height&gt;\n       &lt;/size&gt;\n      &lt;/property&gt;\n      &lt;property name=\"maximumSize\"&gt;\n       &lt;size&gt;\n        &lt;width&gt;16777215&lt;/width&gt;\n        &lt;height&gt;16777215&lt;/height&gt;\n       &lt;/size&gt;\n      &lt;/property&gt;\n      &lt;property name=\"sizeAdjustPolicy\"&gt;\n       &lt;enum&gt;QAbstractScrollArea::AdjustToContentsOnFirstShow&lt;/enum&gt;\n      &lt;/property&gt;\n      &lt;property name=\"widgetResizable\"&gt;\n       &lt;bool&gt;true&lt;/bool&gt;\n      &lt;/property&gt;\n      &lt;property name=\"alignment\"&gt;\n       &lt;set&gt;Qt::AlignLeading|Qt::AlignLeft|Qt::AlignVCenter&lt;/set&gt;\n      &lt;/property&gt;\n      &lt;widget class=\"QWidget\" name=\"scrollAreaWidgetContents_5\"&gt;\n       &lt;property name=\"geometry\"&gt;\n        &lt;rect&gt;\n         &lt;x&gt;0&lt;/x&gt;\n         &lt;y&gt;0&lt;/y&gt;\n         &lt;width&gt;444&lt;/width&gt;\n         &lt;height&gt;608&lt;/height&gt;\n        &lt;/rect&gt;\n       &lt;/property&gt;\n       &lt;layout class=\"QVBoxLayout\" name=\"verticalLayout_8\"&gt;\n        &lt;item&gt;\n         &lt;layout class=\"QVBoxLayout\" name=\"verticalLayout_12\"&gt;\n          &lt;property name=\"sizeConstraint\"&gt;\n           &lt;enum&gt;QLayout::SetMaximumSize&lt;/enum&gt;\n          &lt;/property&gt;\n          &lt;item&gt;\n           &lt;widget class=\"QLabel\" name=\"label_241\"&gt;\n            &lt;property name=\"maximumSize\"&gt;\n             &lt;size&gt;\n              &lt;width&gt;443&lt;/width&gt;\n              &lt;height&gt;16777215&lt;/height&gt;\n             &lt;/size&gt;\n            &lt;/property&gt;\n            &lt;property name=\"font\"&gt;\n             &lt;font&gt;\n              &lt;weight&gt;75&lt;/weight&gt;\n              &lt;bold&gt;true&lt;/bold&gt;\n             &lt;/font&gt;\n            &lt;/property&gt;\n            &lt;property name=\"text\"&gt;\n             &lt;string&gt;BEEPER OPTIONS&lt;/string&gt;\n            &lt;/property&gt;\n            &lt;property name=\"alignment\"&gt;\n             &lt;set&gt;Qt::AlignCenter&lt;/set&gt;\n            &lt;/property&gt;\n           &lt;/widget&gt;\n          &lt;/item&gt;\n          &lt;item&gt;\n           &lt;widget class=\"QCheckBox\" name=\"checkBox_262\"&gt;\n            &lt;property name=\"minimumSize\"&gt;\n             &lt;size&gt;\n              &lt;width&gt;341&lt;/width&gt;\n              &lt;height&gt;34&lt;/height&gt;\n             &lt;/size&gt;\n            &lt;/property&gt;\n            &lt;property name=\"text\"&gt;\n             &lt;string&gt;This is a checkbox that is being used to &lt;/string&gt;\n            &lt;/property&gt;\n           &lt;/widget&gt;\n          &lt;/item&gt;\n         &lt;/layout&gt;\n        &lt;/item&gt;\n        &lt;item&gt;\n         &lt;spacer name=\"verticalSpacer_10\"&gt;\n          &lt;property name=\"orientation\"&gt;\n           &lt;enum&gt;Qt::Vertical&lt;/enum&gt;\n          &lt;/property&gt;\n          &lt;property name=\"sizeType\"&gt;\n           &lt;enum&gt;QSizePolicy::Fixed&lt;/enum&gt;\n          &lt;/property&gt;\n          &lt;property name=\"sizeHint\" stdset=\"0\"&gt;\n           &lt;size&gt;\n            &lt;width&gt;20&lt;/width&gt;\n            &lt;height&gt;10&lt;/height&gt;\n           &lt;/size&gt;\n          &lt;/property&gt;\n         &lt;/spacer&gt;\n        &lt;/item&gt;\n        &lt;item&gt;\n         &lt;layout class=\"QVBoxLayout\" name=\"verticalLayout_13\"&gt;\n          &lt;property name=\"sizeConstraint\"&gt;\n           &lt;enum&gt;QLayout::SetMaximumSize&lt;/enum&gt;\n          &lt;/property&gt;\n          &lt;item&gt;\n           &lt;widget class=\"QLabel\" name=\"label_242\"&gt;\n            &lt;property name=\"maximumSize\"&gt;\n             &lt;size&gt;\n              &lt;width&gt;443&lt;/width&gt;\n              &lt;height&gt;16777215&lt;/height&gt;\n             &lt;/size&gt;\n            &lt;/property&gt;\n            &lt;property name=\"font\"&gt;\n             &lt;font&gt;\n              &lt;weight&gt;75&lt;/weight&gt;\n              &lt;bold&gt;true&lt;/bold&gt;\n             &lt;/font&gt;\n            &lt;/property&gt;\n            &lt;property name=\"text\"&gt;\n             &lt;string&gt;DRYCYCLE CONTROLS&lt;/string&gt;\n            &lt;/property&gt;\n            &lt;property name=\"alignment\"&gt;\n             &lt;set&gt;Qt::AlignCenter&lt;/set&gt;\n            &lt;/property&gt;\n           &lt;/widget&gt;\n          &lt;/item&gt;\n          &lt;item&gt;\n           &lt;widget class=\"QCheckBox\" name=\"checkBox_273\"&gt;\n            &lt;property name=\"minimumSize\"&gt;\n             &lt;size&gt;\n              &lt;width&gt;0&lt;/width&gt;\n              &lt;height&gt;34&lt;/height&gt;\n             &lt;/size&gt;\n            &lt;/property&gt;\n            &lt;property name=\"text\"&gt;\n             &lt;string&gt;Option&lt;/string&gt;\n            &lt;/property&gt;\n           &lt;/widget&gt;\n          &lt;/item&gt;\n          &lt;item&gt;\n           &lt;widget class=\"QCheckBox\" name=\"checkBox_274\"&gt;\n            &lt;property name=\"minimumSize\"&gt;\n             &lt;size&gt;\n              &lt;width&gt;0&lt;/width&gt;\n              &lt;height&gt;34&lt;/height&gt;\n             &lt;/size&gt;\n            &lt;/property&gt;\n            &lt;property name=\"text\"&gt;\n             &lt;string&gt;Option&lt;/string&gt;\n            &lt;/property&gt;\n           &lt;/widget&gt;\n          &lt;/item&gt;\n         &lt;/layout&gt;\n        &lt;/item&gt;\n        &lt;item&gt;\n         &lt;spacer name=\"verticalSpacer_11\"&gt;\n          &lt;property name=\"orientation\"&gt;\n           &lt;enum&gt;Qt::Vertical&lt;/enum&gt;\n          &lt;/property&gt;\n          &lt;property name=\"sizeType\"&gt;\n           &lt;enum&gt;QSizePolicy::Fixed&lt;/enum&gt;\n          &lt;/property&gt;\n          &lt;property name=\"sizeHint\" stdset=\"0\"&gt;\n           &lt;size&gt;\n            &lt;width&gt;20&lt;/width&gt;\n            &lt;height&gt;10&lt;/height&gt;\n           &lt;/size&gt;\n          &lt;/property&gt;\n         &lt;/spacer&gt;\n        &lt;/item&gt;\n        &lt;item&gt;\n         &lt;layout class=\"QVBoxLayout\" name=\"verticalLayout_14\"&gt;\n          &lt;property name=\"sizeConstraint\"&gt;\n           &lt;enum&gt;QLayout::SetMaximumSize&lt;/enum&gt;\n          &lt;/property&gt;\n          &lt;item&gt;\n           &lt;widget class=\"QLabel\" name=\"label_243\"&gt;\n            &lt;property name=\"maximumSize\"&gt;\n             &lt;size&gt;\n              &lt;width&gt;443&lt;/width&gt;\n              &lt;height&gt;16777215&lt;/height&gt;\n             &lt;/size&gt;\n            &lt;/property&gt;\n            &lt;property name=\"font\"&gt;\n             &lt;font&gt;\n              &lt;weight&gt;75&lt;/weight&gt;\n              &lt;bold&gt;true&lt;/bold&gt;\n             &lt;/font&gt;\n            &lt;/property&gt;\n            &lt;property name=\"text\"&gt;\n             &lt;string&gt;Operation Bypass Controls&lt;/string&gt;\n            &lt;/property&gt;\n            &lt;property name=\"alignment\"&gt;\n             &lt;set&gt;Qt::AlignCenter&lt;/set&gt;\n            &lt;/property&gt;\n           &lt;/widget&gt;\n          &lt;/item&gt;\n          &lt;item&gt;\n           &lt;widget class=\"QCheckBox\" name=\"checkBox_275\"&gt;\n            &lt;property name=\"minimumSize\"&gt;\n             &lt;size&gt;\n              &lt;width&gt;341&lt;/width&gt;\n              &lt;height&gt;34&lt;/height&gt;\n             &lt;/size&gt;\n            &lt;/property&gt;\n            &lt;property name=\"text\"&gt;\n             &lt;string&gt;Option&lt;/string&gt;\n            &lt;/property&gt;\n           &lt;/widget&gt;\n          &lt;/item&gt;\n          &lt;item&gt;\n           &lt;widget class=\"QCheckBox\" name=\"checkBox_276\"&gt;\n            &lt;property name=\"minimumSize\"&gt;\n             &lt;size&gt;\n              &lt;width&gt;0&lt;/width&gt;\n              &lt;height&gt;34&lt;/height&gt;\n             &lt;/size&gt;\n            &lt;/property&gt;\n            &lt;property name=\"text\"&gt;\n             &lt;string&gt;Option&lt;/string&gt;\n            &lt;/property&gt;\n           &lt;/widget&gt;\n          &lt;/item&gt;\n          &lt;item&gt;\n           &lt;widget class=\"QCheckBox\" name=\"checkBox_277\"&gt;\n            &lt;property name=\"minimumSize\"&gt;\n             &lt;size&gt;\n              &lt;width&gt;0&lt;/width&gt;\n              &lt;height&gt;34&lt;/height&gt;\n             &lt;/size&gt;\n            &lt;/property&gt;\n            &lt;property name=\"text\"&gt;\n             &lt;string&gt;Option&lt;/string&gt;\n            &lt;/property&gt;\n           &lt;/widget&gt;\n          &lt;/item&gt;\n          &lt;item&gt;\n           &lt;widget class=\"QCheckBox\" name=\"checkBox_278\"&gt;\n            &lt;property name=\"minimumSize\"&gt;\n             &lt;size&gt;\n              &lt;width&gt;0&lt;/width&gt;\n              &lt;height&gt;34&lt;/height&gt;\n             &lt;/size&gt;\n            &lt;/property&gt;\n            &lt;property name=\"text\"&gt;\n             &lt;string&gt;Option&lt;/string&gt;\n            &lt;/property&gt;\n           &lt;/widget&gt;\n          &lt;/item&gt;\n          &lt;item&gt;\n           &lt;widget class=\"QCheckBox\" name=\"checkBox_279\"&gt;\n            &lt;property name=\"minimumSize\"&gt;\n             &lt;size&gt;\n              &lt;width&gt;0&lt;/width&gt;\n              &lt;height&gt;34&lt;/height&gt;\n             &lt;/size&gt;\n            &lt;/property&gt;\n            &lt;property name=\"maximumSize\"&gt;\n             &lt;size&gt;\n              &lt;width&gt;443&lt;/width&gt;\n              &lt;height&gt;16777215&lt;/height&gt;\n             &lt;/size&gt;\n            &lt;/property&gt;\n            &lt;property name=\"text\"&gt;\n             &lt;string&gt;Option&lt;/string&gt;\n            &lt;/property&gt;\n           &lt;/widget&gt;\n          &lt;/item&gt;\n          &lt;item&gt;\n           &lt;widget class=\"QCheckBox\" name=\"simulateSortingCheckBox\"&gt;\n            &lt;property name=\"minimumSize\"&gt;\n             &lt;size&gt;\n              &lt;width&gt;0&lt;/width&gt;\n              &lt;height&gt;34&lt;/height&gt;\n             &lt;/size&gt;\n            &lt;/property&gt;\n            &lt;property name=\"text\"&gt;\n             &lt;string&gt;Another text that is really long in order&lt;/string&gt;\n            &lt;/property&gt;\n           &lt;/widget&gt;\n          &lt;/item&gt;\n          &lt;item&gt;\n           &lt;layout class=\"QHBoxLayout\" name=\"horizontalLayout_12\"&gt;\n            &lt;item&gt;\n             &lt;spacer name=\"horizontalSpacer_7\"&gt;\n              &lt;property name=\"orientation\"&gt;\n               &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;\n              &lt;/property&gt;\n              &lt;property name=\"sizeType\"&gt;\n               &lt;enum&gt;QSizePolicy::Fixed&lt;/enum&gt;\n              &lt;/property&gt;\n              &lt;property name=\"sizeHint\" stdset=\"0\"&gt;\n               &lt;size&gt;\n                &lt;width&gt;40&lt;/width&gt;\n                &lt;height&gt;20&lt;/height&gt;\n               &lt;/size&gt;\n              &lt;/property&gt;\n             &lt;/spacer&gt;\n            &lt;/item&gt;\n            &lt;item&gt;\n             &lt;widget class=\"QCheckBox\" name=\"randomSortCheckBox\"&gt;\n              &lt;property name=\"minimumSize\"&gt;\n               &lt;size&gt;\n                &lt;width&gt;0&lt;/width&gt;\n                &lt;height&gt;34&lt;/height&gt;\n               &lt;/size&gt;\n              &lt;/property&gt;\n              &lt;property name=\"text\"&gt;\n               &lt;string&gt;Sub option 1&lt;/string&gt;\n              &lt;/property&gt;\n             &lt;/widget&gt;\n            &lt;/item&gt;\n           &lt;/layout&gt;\n          &lt;/item&gt;\n          &lt;item&gt;\n           &lt;layout class=\"QHBoxLayout\" name=\"horizontalLayout_13\"&gt;\n            &lt;item&gt;\n             &lt;spacer name=\"horizontalSpacer_8\"&gt;\n              &lt;property name=\"orientation\"&gt;\n               &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;\n              &lt;/property&gt;\n              &lt;property name=\"sizeType\"&gt;\n               &lt;enum&gt;QSizePolicy::Fixed&lt;/enum&gt;\n              &lt;/property&gt;\n              &lt;property name=\"sizeHint\" stdset=\"0\"&gt;\n               &lt;size&gt;\n                &lt;width&gt;40&lt;/width&gt;\n                &lt;height&gt;20&lt;/height&gt;\n               &lt;/size&gt;\n              &lt;/property&gt;\n             &lt;/spacer&gt;\n            &lt;/item&gt;\n            &lt;item&gt;\n             &lt;widget class=\"QCheckBox\" name=\"sequentialSortCheckBox\"&gt;\n              &lt;property name=\"minimumSize\"&gt;\n               &lt;size&gt;\n                &lt;width&gt;0&lt;/width&gt;\n                &lt;height&gt;34&lt;/height&gt;\n               &lt;/size&gt;\n              &lt;/property&gt;\n              &lt;property name=\"text\"&gt;\n               &lt;string&gt;Sub option 2&lt;/string&gt;\n              &lt;/property&gt;\n             &lt;/widget&gt;\n            &lt;/item&gt;\n           &lt;/layout&gt;\n          &lt;/item&gt;\n          &lt;item&gt;\n           &lt;layout class=\"QHBoxLayout\" name=\"horizontalLayout_14\"&gt;\n            &lt;item&gt;\n             &lt;spacer name=\"horizontalSpacer_9\"&gt;\n              &lt;property name=\"orientation\"&gt;\n               &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;\n              &lt;/property&gt;\n              &lt;property name=\"sizeType\"&gt;\n               &lt;enum&gt;QSizePolicy::Fixed&lt;/enum&gt;\n              &lt;/property&gt;\n              &lt;property name=\"sizeHint\" stdset=\"0\"&gt;\n               &lt;size&gt;\n                &lt;width&gt;40&lt;/width&gt;\n                &lt;height&gt;20&lt;/height&gt;\n               &lt;/size&gt;\n              &lt;/property&gt;\n             &lt;/spacer&gt;\n            &lt;/item&gt;\n            &lt;item&gt;\n             &lt;widget class=\"QCheckBox\" name=\"fixedSortCheckBox\"&gt;\n              &lt;property name=\"text\"&gt;\n               &lt;string&gt;Sub option 3&lt;/string&gt;\n              &lt;/property&gt;\n             &lt;/widget&gt;\n            &lt;/item&gt;\n            &lt;item&gt;\n             &lt;widget class=\"QLineEdit\" name=\"Fixed_Sort_to_bin\"&gt;\n              &lt;property name=\"text\"&gt;\n               &lt;string&gt;8&lt;/string&gt;\n              &lt;/property&gt;\n              &lt;property name=\"readOnly\"&gt;\n               &lt;bool&gt;true&lt;/bool&gt;\n              &lt;/property&gt;\n             &lt;/widget&gt;\n            &lt;/item&gt;\n            &lt;item&gt;\n             &lt;spacer name=\"horizontalSpacer_10\"&gt;\n              &lt;property name=\"orientation\"&gt;\n               &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;\n              &lt;/property&gt;\n              &lt;property name=\"sizeType\"&gt;\n               &lt;enum&gt;QSizePolicy::Fixed&lt;/enum&gt;\n              &lt;/property&gt;\n              &lt;property name=\"sizeHint\" stdset=\"0\"&gt;\n               &lt;size&gt;\n                &lt;width&gt;110&lt;/width&gt;\n                &lt;height&gt;20&lt;/height&gt;\n               &lt;/size&gt;\n              &lt;/property&gt;\n             &lt;/spacer&gt;\n            &lt;/item&gt;\n           &lt;/layout&gt;\n          &lt;/item&gt;\n         &lt;/layout&gt;\n        &lt;/item&gt;\n       &lt;/layout&gt;\n      &lt;/widget&gt;\n     &lt;/widget&gt;\n    &lt;/widget&gt;\n   &lt;/widget&gt;\n  &lt;/widget&gt;\n  &lt;widget class=\"QMenuBar\" name=\"menuBar\"&gt;\n   &lt;property name=\"geometry\"&gt;\n    &lt;rect&gt;\n     &lt;x&gt;0&lt;/x&gt;\n     &lt;y&gt;0&lt;/y&gt;\n     &lt;width&gt;448&lt;/width&gt;\n     &lt;height&gt;25&lt;/height&gt;\n    &lt;/rect&gt;\n   &lt;/property&gt;\n  &lt;/widget&gt;\n  &lt;widget class=\"QToolBar\" name=\"mainToolBar\"&gt;\n   &lt;attribute name=\"toolBarArea\"&gt;\n    &lt;enum&gt;TopToolBarArea&lt;/enum&gt;\n   &lt;/attribute&gt;\n   &lt;attribute name=\"toolBarBreak\"&gt;\n    &lt;bool&gt;false&lt;/bool&gt;\n   &lt;/attribute&gt;\n  &lt;/widget&gt;\n  &lt;widget class=\"QStatusBar\" name=\"statusBar\"/&gt;\n &lt;/widget&gt;\n &lt;layoutdefault spacing=\"6\" margin=\"11\"/&gt;\n &lt;resources/&gt;\n &lt;connections/&gt;\n&lt;/ui&gt;\n</code></pre>\n\n<p><strong>mainwindow.h:</strong></p>\n\n<pre><code>#ifndef MAINWINDOW_H\n#define MAINWINDOW_H\n\n#include &lt;QMainWindow&gt;\n#include &lt;QPushButton&gt;\n#include &lt;QWidget&gt;\n#include &lt;QFont&gt;\n\n#define SELECTED_CHECK_BOX \"QCheckBox {border: 2px solid gray;}\"\n\n\nnamespace Ui {\nclass MainWindow;\n}\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    explicit MainWindow(QWidget *parent = 0);\n    ~MainWindow();\n\nprivate:\n    Ui::MainWindow *ui;\n\n    QWidget *p_previouseSelectedWidget = nullptr;\n\n    QFont p_setFont;\n\npublic slots:\n    void handleFocusChange(QWidget *oldWidget, QWidget *newWidget);\n};\n\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p><strong>mainwindow.cpp:</strong></p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n\n    p_setFont = this-&gt;font();\n\n    connect(qApp, SIGNAL(focusChanged(QWidget*,QWidget*)), this, SLOT(handleFocusChange(QWidget*,QWidget*)));\n\n}\n\nMainWindow::~MainWindow()\n{\n    delete ui;\n}\n\n\nvoid MainWindow::handleFocusChange(QWidget *oldWidget, QWidget *newWidget)\n{\n    if(!this-&gt;isHidden())\n    {\n        if(!dynamic_cast&lt;QPushButton*&gt;(newWidget))\n        {\n            if(p_previouseSelectedWidget)\n            {\n                p_previouseSelectedWidget-&gt;setStyleSheet(\"\");\n                p_previouseSelectedWidget-&gt;setFont(p_setFont);\n            }\n\n             p_previouseSelectedWidget = newWidget;\n        }\n\n        if(dynamic_cast&lt;QCheckBox*&gt;(newWidget))\n        {\n            // Do some stuff\n            newWidget-&gt;setStyleSheet(SELECTED_CHECK_BOX);\n        }\n    }\n}\n</code></pre>\n\n<p><strong>main.cpp:</strong></p>\n\n<pre><code>#include \"mainwindow.h\"\n#include &lt;QApplication&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    MainWindow w;\n    w.show();\n\n    return a.exec();\n}\n</code></pre>\n\n<p>Edit:</p>\n\n<p>I am now sharing the mainWindow.ui.</p>\n"}, {"tags": ["c++", "function", "c++11", "static"], "comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 1, "creation_date": 1563378292, "post_id": 57079711, "comment_id": 100682429, "body": "Static non-member functions are treated the same as non-member functions put in anonymous namespace. What does it do is explained <a href=\"https://stackoverflow.com/questions/357404/why-are-unnamed-namespaces-used-and-what-are-their-benefits\">here</a>."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 4, "creation_date": 1563378449, "post_id": 57079711, "comment_id": 100682536, "body": "&quot;<i>I also found something about anonymous namespaces vs static functions, but didn&#39;t quite understand the point.</i>&quot; Unless you explain what, exactly, was unclear about that, there&#39;s nothing stopping us in using the same terminology to explain it again, which would lead to you not understanding it again. So.. What, <b>exactly</b>, was unclear about all of the explanations you read?"}], "answers": [{"tags": [], "owner": {"reputation": 6260, "user_id": 10933809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IR53l.jpg?s=128&g=1", "display_name": "Oblivion", "link": "https://stackoverflow.com/users/10933809/oblivion"}, "is_accepted": false, "score": 0, "last_activity_date": 1563379165, "creation_date": 1563379165, "answer_id": 57080023, "question_id": 57079711, "link": "https://stackoverflow.com/questions/57079711/what-is-the-use-of-a-static-function-not-class-member-in-c/57080023#57080023", "title": "What is the use of a static function (not class member) in c++?", "body": "<p>One use of static free function is to prevent redeclaration of the function in different translation units which causes link errors.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 0, "last_activity_date": 1563381403, "last_edit_date": 1563381403, "creation_date": 1563380533, "answer_id": 57080391, "question_id": 57079711, "link": "https://stackoverflow.com/questions/57079711/what-is-the-use-of-a-static-function-not-class-member-in-c/57080391#57080391", "title": "What is the use of a static function (not class member) in c++?", "body": "<blockquote>\n  <p>What is the use of a static function</p>\n</blockquote>\n\n<p>Static functions or more generally: functions with internal linkage are useful in encapsulating the function by preventing calls to it from other translation units than the one where it is defined.</p>\n\n<p>It also helps prevent name collisions between functions defined and used in different translation units. </p>\n\n<blockquote>\n  <p>I also found something about anonymous namespaces vs static functions</p>\n</blockquote>\n\n<p>Anonymous namespace are another, newer way of declaring functions with internal linkage. Unlike keyword <code>static</code>, they also allow definition of types with internal linkage. </p>\n"}], "owner": {"reputation": 203, "user_id": 11534880, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nuNw4v90yRI/AAAAAAAAAAI/AAAAAAAAC5g/ws6eLqH4gN8/photo.jpg?sz=128", "display_name": "msmilkshake", "link": "https://stackoverflow.com/users/11534880/msmilkshake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "closed_date": 1563380606, "answer_count": 2, "score": 0, "last_activity_date": 1563381403, "creation_date": 1563378147, "question_id": 57079711, "link": "https://stackoverflow.com/questions/57079711/what-is-the-use-of-a-static-function-not-class-member-in-c", "closed_reason": "Duplicate", "title": "What is the use of a static function (not class member) in c++?", "body": "<p>So, I was reading some book and it had source code with a single cpp file, no classes and a bunch of static functions.</p>\n\n<p>After some searches, I mostly see material about static member functions, which I know what they do and doesn't provide me any answer.</p>\n\n<p>I also found something about anonymous namespaces vs static functions, but didn't quite understand the point.</p>\n\n<p>So, can anybody out there provide me some insights on what are static non member functions, what's their uses or why to use them?</p>\n"}, {"tags": ["c++", "directx"], "comments": [{"owner": {"reputation": 846, "user_id": 7511460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cz0P7.png?s=128&g=1", "display_name": "Adrien Givry", "link": "https://stackoverflow.com/users/7511460/adrien-givry"}, "edited": false, "score": 0, "creation_date": 1563377919, "post_id": 57079533, "comment_id": 100682192, "body": "Have you added lib files to the input section in project configuration?"}, {"owner": {"reputation": 181, "user_id": 7935361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e33272819709625f8b4b4de872a6f6?s=128&d=identicon&r=PG&f=1", "display_name": "Leonid Zolotarov", "link": "https://stackoverflow.com/users/7935361/leonid-zolotarov"}, "reply_to_user": {"reputation": 846, "user_id": 7511460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cz0P7.png?s=128&g=1", "display_name": "Adrien Givry", "link": "https://stackoverflow.com/users/7511460/adrien-givry"}, "edited": false, "score": 0, "creation_date": 1563378149, "post_id": 57079533, "comment_id": 100682328, "body": "@AdrienGivry Yes, a added &quot;Lib&quot; folder and &quot;Include&quot; folder  in Project Properties"}, {"owner": {"reputation": 846, "user_id": 7511460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cz0P7.png?s=128&g=1", "display_name": "Adrien Givry", "link": "https://stackoverflow.com/users/7511460/adrien-givry"}, "edited": false, "score": 0, "creation_date": 1563379222, "post_id": 57079533, "comment_id": 100682991, "body": "Yes you added the folders, but did you specified the name of every .lib in : Project --&gt; Properties --&gt; Linker --&gt; Input --&gt; Additional Dependencies (Also verify you are editing the right Configuration and Platform in property editor)"}], "owner": {"reputation": 181, "user_id": 7935361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e33272819709625f8b4b4de872a6f6?s=128&d=identicon&r=PG&f=1", "display_name": "Leonid Zolotarov", "link": "https://stackoverflow.com/users/7935361/leonid-zolotarov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563377563, "creation_date": 1563377563, "question_id": 57079533, "link": "https://stackoverflow.com/questions/57079533/directx-empty-sample-compile-error-x86-1-unresolved-error", "title": "DirectX: &#39;empty sample&#39; compile error (x86) - 1 unresolved error", "body": "<p>I tried to compile Direct 3D sample, called \"EmptyProject\" - I added to project links: \"Include\" folder and \"Lib/x86\" folder with libraries.\nBut while compiling I've got error:</p>\n\n<pre><code>    Severity    Code    Description Project File    Line    Suppression State\nError   LNK2019 unresolved external symbol __vsnwprintf referenced in function \"long __stdcall StringVPrintfWorkerW(unsigned short *,unsigned int,unsigned int *,unsigned short const *,char *)\" (?StringVPrintfWorkerW@@YGJPAGIPAIPBGPAD@Z)    EmptyProject    C:\\Microsoft DirectX SDK (June 2010)\\Samples\\C++\\Direct3D\\EmptyProject - Copy\\dxerr.lib(dxerrw.obj) 1\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/caw8u.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/caw8u.png\" alt=\"enter image description here\"></a></p>\n\n<p>How it can be fixed?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "casting", "arm", "gnu"], "comments": [{"owner": {"reputation": 26796, "user_id": 4834, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a04e124482c3750617f8dacde3388ce?s=128&d=identicon&r=PG", "display_name": "quamrana", "link": "https://stackoverflow.com/users/4834/quamrana"}, "edited": false, "score": 2, "creation_date": 1563377828, "post_id": 57079528, "comment_id": 100682144, "body": "I&#39;m guessing that your CLI is ascii, but your <code>buffer</code> is <code>uint16_t</code>, then you need to print the elements as integers in decimal, binary or hex as makes most sense to you."}, {"owner": {"reputation": 33, "user_id": 11223032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tqt0W.jpg?s=128&g=1", "display_name": "Zurn", "link": "https://stackoverflow.com/users/11223032/zurn"}, "reply_to_user": {"reputation": 26796, "user_id": 4834, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a04e124482c3750617f8dacde3388ce?s=128&d=identicon&r=PG", "display_name": "quamrana", "link": "https://stackoverflow.com/users/4834/quamrana"}, "edited": false, "score": 0, "creation_date": 1563381829, "post_id": 57079528, "comment_id": 100684354, "body": "Hmm not sure I fully understand... my RTOS requires that I print each element as a const char*, how to could I print them as hex? Note: I don&#39;t have access to regular C++ libraries such as iostream."}, {"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 0, "creation_date": 1563381970, "post_id": 57079528, "comment_id": 100684414, "body": "This is just what I demonstrated below.  You can not print &#39;binary&#39;  generally your CLI will use some <a href=\"http://www.asciitable.com/\" rel=\"nofollow noreferrer\">ascii</a> and it is only a &#39;char&#39; or 8 bits.  Your sample is 16bits.  A direct map 16bits to 2 bytes gives two characters and they may not print.  As well, the <code>CLI_printMessage</code> probably wants the last byte to be zero or the NUL character."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 11223032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tqt0W.jpg?s=128&g=1", "display_name": "Zurn", "link": "https://stackoverflow.com/users/11223032/zurn"}, "edited": false, "score": 0, "creation_date": 1563454768, "post_id": 57080547, "comment_id": 100711436, "body": "I think I&#39;ve worded my question poorly... itoa works just fine getting the ASCII representations of the hex values to print (which I thank you for directing me towards), however it&#39;s the hex values themselves I need to maintain during the transfer, the ASCII representations don&#39;t actually matter. I&#39;ll (heavily) edit my question to reflect this.."}, {"owner": {"reputation": 33, "user_id": 11223032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tqt0W.jpg?s=128&g=1", "display_name": "Zurn", "link": "https://stackoverflow.com/users/11223032/zurn"}, "edited": false, "score": 0, "creation_date": 1563467047, "post_id": 57080547, "comment_id": 100719053, "body": "That&#39;s actually what I&#39;ve settled on... I&#39;ve discovered an io function deep within my RTOS that will allow me to print the itoa() hexdump as a solid block (the preexisting one was printing one line at a time). A remarkably simple solution for something I&#39;ve been struggling with for so long... thanks a lot for your input, it was very useful."}, {"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "reply_to_user": {"reputation": 33, "user_id": 11223032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tqt0W.jpg?s=128&g=1", "display_name": "Zurn", "link": "https://stackoverflow.com/users/11223032/zurn"}, "edited": false, "score": 0, "creation_date": 1563472062, "post_id": 57080547, "comment_id": 100721356, "body": "If it is smaller binary data, you should transfer a few times (3-5) and verify that they are all the same.  It is quite common for one side to drop a character, etc.  I guess not everybody has lived through a time of BBSs. :-)"}, {"owner": {"reputation": 33, "user_id": 11223032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tqt0W.jpg?s=128&g=1", "display_name": "Zurn", "link": "https://stackoverflow.com/users/11223032/zurn"}, "edited": false, "score": 0, "creation_date": 1563472537, "post_id": 57080547, "comment_id": 100721555, "body": "Actually, I&#39;m just realizing f_read is skipping over the leading zeros. New problems! (Also, for the record, they&#39;re going to be very large files)"}, {"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "reply_to_user": {"reputation": 33, "user_id": 11223032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tqt0W.jpg?s=128&g=1", "display_name": "Zurn", "link": "https://stackoverflow.com/users/11223032/zurn"}, "edited": false, "score": 0, "creation_date": 1563472746, "post_id": 57080547, "comment_id": 100721646, "body": "That is a different layer though.  Something in your OS.  Just remember that even if there is just a &quot;NULL cable&quot; between things you will still occasionally get data corruption.  I had an HSDPA module inside a battery powered case connected on the PCB and the &#39;UART&#39; coms would sometimes get garbled characters (1 in a million, etc).  If you get the transfer right and try to analyse the FAT data, double check an error is <b>NOT</b> due to the data transfer.  It would be worse with straight binary; if you see non-hex characters there is probably garbled characters."}, {"owner": {"reputation": 33, "user_id": 11223032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tqt0W.jpg?s=128&g=1", "display_name": "Zurn", "link": "https://stackoverflow.com/users/11223032/zurn"}, "edited": false, "score": 0, "creation_date": 1563476874, "post_id": 57080547, "comment_id": 100723342, "body": "&quot;Something in your OS&quot; as in my RTOS? I can see the zeros are being dropped when I check the f_read buffer contents in debug mode. I&#39;ve been considering adding some code to bit shift and add a zero to any element with only 15 bits."}, {"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "reply_to_user": {"reputation": 33, "user_id": 11223032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tqt0W.jpg?s=128&g=1", "display_name": "Zurn", "link": "https://stackoverflow.com/users/11223032/zurn"}, "edited": false, "score": 0, "creation_date": 1563482554, "post_id": 57080547, "comment_id": 100725607, "body": "That is not &#39;f_read is skipping over the leading zeros&#39; as you said.  You could pad/start your buffer with 0xffff and then &#39;f_read&#39; to buffer[1].  Then you need to skip the first &#39;ffff&#39; or just remove it with an editor."}, {"owner": {"reputation": 33, "user_id": 11223032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tqt0W.jpg?s=128&g=1", "display_name": "Zurn", "link": "https://stackoverflow.com/users/11223032/zurn"}, "edited": false, "score": 0, "creation_date": 1563557273, "post_id": 57080547, "comment_id": 100752873, "body": "UPDATE: I&#39;ve actually abandoned this entire process, just imported the data decoding program directly into my embedded system. Seems to work fine. Still, lots of good info on this thread thanks to @artless noise"}], "tags": [], "owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "is_accepted": true, "score": 1, "last_activity_date": 1563472385, "last_edit_date": 1563472385, "creation_date": 1563381132, "answer_id": 57080547, "question_id": 57079528, "link": "https://stackoverflow.com/questions/57079528/how-can-i-retrieve-data-through-a-serial-terminal-without-corrupting-its-fundame/57080547#57080547", "title": "How can I retrieve data through a serial terminal without corrupting its fundamental value in GNU ARM embedded?", "body": "<p>Casting will not solve the issue and perhaps you have illustrated why casting is bad.</p>\n\n<hr>\n\n<p>You need a function like something like this,</p>\n\n<pre><code>/* four 'nibbles' (nibble = 4 bits = one hex) is 16 bits. */\nvoid int16ToString(char *buf[4], uint16_t val)\n{\n   static const char *lookup = \"0123456789ABCDEF\";\n   buf[3] = lookup[val &amp; 0xf]; /* write backwards or you need a copy of val */\n   val = val &gt;&gt; 4;\n   buf[2] = lookup[val &amp; 0xf];\n   val = val &gt;&gt; 4;\n   buf[1] = lookup[val &amp; 0xf];\n   val = val &gt;&gt; 4;\n   buf[0] = lookup[val &amp; 0xf];\n}\n</code></pre>\n\n<p>There are various functions in the C library, etc which do similar things.  Obviously the routine needs a buffer of 4 bytes and it is not null terminated by the routine.  It is just to demonstrate what needs to happen.  <code>sprintf</code>, <code>snprint</code>, etc will be useful to look at as well as <code>itoa</code>, etc.</p>\n\n<hr>\n\n<p>Why do you need a function like that?  Because there are two sides to the conversation and they can (and probably do <a href=\"https://en.wikipedia.org/wiki/8-bit_clean\" rel=\"nofollow noreferrer\">interpret things differently</a>).  Generally you can transfer the lower ascii characters without effect.  For example 'XON' is a flow control character that can be embedded in a data stream.</p>\n\n<p>If you are to transmit the binary data via the CLI you need to 'clean it' and then you need code on the other side of the CLI uart to undo that. You can just send hex and then convert back to binary. There are more efficient ways to do this such as <a href=\"https://en.wikipedia.org/wiki/ZMODEM\" rel=\"nofollow noreferrer\">zmodem</a> and <a href=\"https://en.wikipedia.org/wiki/Base64\" rel=\"nofollow noreferrer\">base64</a> if the data is large or the link (CLI uart) is not reliable.  A simple <a href=\"http://www.cplusplus.com/reference/cstdlib/itoa/\" rel=\"nofollow noreferrer\"><code>itoa()</code></a> with a  <a href=\"https://www.freebsd.org/cgi/man.cgi?query=hexdump&amp;sektion=1\" rel=\"nofollow noreferrer\">hexdump</a> conversion on another host will transfer the binary which is suitable for a debugging transfer.</p>\n"}], "owner": {"reputation": 33, "user_id": 11223032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tqt0W.jpg?s=128&g=1", "display_name": "Zurn", "link": "https://stackoverflow.com/users/11223032/zurn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 57080547, "answer_count": 1, "score": 1, "last_activity_date": 1563537639, "creation_date": 1563377556, "last_edit_date": 1563537639, "question_id": 57079528, "link": "https://stackoverflow.com/questions/57079528/how-can-i-retrieve-data-through-a-serial-terminal-without-corrupting-its-fundame", "title": "How can I retrieve data through a serial terminal without corrupting its fundamental value in GNU ARM embedded?", "body": "<p>I'm wondering if anyone can help me spot the problem here...</p>\n\n<p>In my C++ embedded program for an STM32L, I'm trying to retrieve a binary data file stored on an SD card over a serial connection via a CLI (or terminal, or whatever will work). So far, I can read the data file just fine using the FatFs f_read function. It's contents are being stored in the f_read buffer, which I can verify in debug mode. </p>\n\n<p>However, the problem is that the RTOS I'm using requires outgoing data to be in the const char* form, so I'm forced to somehow get the elements into that type. So far I've been doing this by casting, however, depending on which type I use as a an f_read buffer, this either causes nothing to be printed or changes the its fundamental hex value when it's transferred over the serial connection to the CLI on my CPU. </p>\n\n<p>Here's the operative part of my code. In this instance I'm storing the buffer data as uint16_t, but I've tried many other types (char, BYTE, char*), none of which manage to get the data to the other side without being corrupted. </p>\n\n<pre><code>FRESULT res;\nFIL fsrc;\nuint16_t buffer[512];\nuint16_t bw = 0;\n\nres = f_open(&amp;fsrc, \"zurn.dat\", FA_READ | FA_OPEN_ALWAYS);  \n\nres = f_read(&amp;fsrc, buffer, sizeof buffer, &amp;bw);                                      \n\n//just printing the first few elements to see if it works\nfor(int i=0; i&lt;10; i++){\n     CLI_printMessage(ZString((const char*)buffer[i])); \n}\n\nf_close(&amp;fsrc);                                               \n</code></pre>\n\n<p>I must emphasize that its the fundamental hex values that I'm trying to transfer. A user has already kindly showed me how to get the ASCII representation of the hex values to go through (which I may have to resort to in the end), however, it'd be more useful for me if there's a way to get maintain the hex values themselves rather. </p>\n\n<p>To further clarify, as an example: the first few characters of the data file look like this in ASCII: \u00c8\u00ec\u2030J\u00e0\u00ad\u00a9\u00ed, and this in Hex: ecc8 8903 e04a a9ad. This is what I need on the other side, rather than this in ASCII: ecc8 8903 e04a a9ad, which is this in hex: 6563 6338 2038 3930 3320 6530 3461 2061 3961 64.</p>\n\n<p><strong>Some further thoughts:</strong>\nI realize the problem is likely with the casting. For starters, it gives me the warning \"cast to pointer from integer of different size [-Wint-to-pointer-cast]\". I understand this is because in C++ pointers default to 16 bits, hence the uint16_t type for my buffer. </p>\n\n<p>I've also tried copying the data stored in the buffer to another variable, and casting that. In most circumstances, this shows the proper hex values at the debug level, but with lots of ASCII junk attached to it, of which I have no explanation for. I've also tried reducing my buffer array size to a mere 8 elements, still no difference.  </p>\n\n<p>The answer may also be specific to my RTOS, which has many special types made for it that I don't fully understand, though its mostly based on FreeRTOS. If you haven't noticed I'm not a very experienced programmer...</p>\n\n<p>Also, I'm using the Eclipse IDE and the GNU Arm Build Tools.  </p>\n"}, {"tags": ["c++", "gradle", "java-native-interface"], "comments": [{"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 1, "creation_date": 1563395426, "post_id": 57079527, "comment_id": 100690413, "body": "Could it be as easy as setting <code>linkage: &quot;shared&quot;</code> for rf24?"}, {"owner": {"reputation": 519, "user_id": 929227, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1051603723c994016001f969be6d53ee?s=128&d=identicon&r=PG", "display_name": "Kowlown", "link": "https://stackoverflow.com/users/929227/kowlown"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1563397630, "post_id": 57079527, "comment_id": 100691203, "body": "I had to cp librf24.so to /usr/lib and use ldconfig. Then As you mentioned above replace linkage: &#39;api&#39; with linkage: &#39;shared&#39;"}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1563427810, "post_id": 57079527, "comment_id": 100697728, "body": "That first bit can be solved with RPATH trickery at compile time or by setting LD_LIBRARY_PATH at runtime."}, {"owner": {"reputation": 519, "user_id": 929227, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1051603723c994016001f969be6d53ee?s=128&d=identicon&r=PG", "display_name": "Kowlown", "link": "https://stackoverflow.com/users/929227/kowlown"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1563439085, "post_id": 57079527, "comment_id": 100702756, "body": "@Botje I will search for doc on RPATH and LD_LIBRARY_PATH. Could you explain why on Linux we can&#39;t just have the necessary shared library in the Java application working dir or executable working dir like the Windows .dll ?"}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 1, "creation_date": 1563441034, "post_id": 57079527, "comment_id": 100703809, "body": "Security. As an administrator you would not want your programs to pick up random libraries from wherever your program happens to be launched from."}, {"owner": {"reputation": 519, "user_id": 929227, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1051603723c994016001f969be6d53ee?s=128&d=identicon&r=PG", "display_name": "Kowlown", "link": "https://stackoverflow.com/users/929227/kowlown"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1563445037, "post_id": 57079527, "comment_id": 100706094, "body": "@Botje Seems legit. You didn&#39;t provide an SO Answer, I could tag your answer as answer the question"}], "answers": [{"tags": [], "owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "is_accepted": true, "score": 1, "last_activity_date": 1563535219, "creation_date": 1563535219, "answer_id": 57111435, "question_id": 57079527, "link": "https://stackoverflow.com/questions/57079527/gradle-cpp-plugin-doesnt-link-shared-library/57111435#57111435", "title": "Gradle cpp plugin doesn&#39;t link shared library", "body": "<p>Use the following instead:</p>\n\n<pre><code>cpp.lib library: 'rf24', linkage: 'shared'\n</code></pre>\n\n<p>This induces a transitive dependency from <code>libtransmission</code> to <code>librf24</code>.</p>\n\n<p>It is not enough to put the files side by side to be found, however. You should either set <code>LD_LIBRARY_PATH</code> at runtime or compile <code>libtransmission</code> with a relative <code>RPATH</code> .</p>\n"}], "owner": {"reputation": 519, "user_id": 929227, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1051603723c994016001f969be6d53ee?s=128&d=identicon&r=PG", "display_name": "Kowlown", "link": "https://stackoverflow.com/users/929227/kowlown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "accepted_answer_id": 57111435, "answer_count": 1, "score": 0, "last_activity_date": 1563535219, "creation_date": 1563377556, "question_id": 57079527, "link": "https://stackoverflow.com/questions/57079527/gradle-cpp-plugin-doesnt-link-shared-library", "title": "Gradle cpp plugin doesn&#39;t link shared library", "body": "<p>I have a C++ library to listen to radio with RF24. I wrap this library using JNI with a Java class. </p>\n\n<p>The issue that I have is that gradle don't link the shared library <strong>librf24.so</strong> into my library <strong>libtransmitter.so</strong>.</p>\n\n<p>When I call <strong>ldd</strong> on <strong>libtransmitter.so</strong> I have : </p>\n\n<pre><code>linux-vdso.so.1 (0x7ee24000)\n/usr/lib/arm-linux-gnueabihf/libarmmem.so (0x76ecc000)\nlibstdc++.so.6 =&gt; /usr/lib/arm-linux-gnueabihf/libstdc++.so.6 (0x76d73000)\nlibm.so.6 =&gt; /lib/arm-linux-gnueabihf/libm.so.6 (0x76cf4000)\nlibgcc_s.so.1 =&gt; /lib/arm-linux-gnueabihf/libgcc_s.so.1 (0x76cc7000)\nlibc.so.6 =&gt; /lib/arm-linux-gnueabihf/libc.so.6 (0x76b88000)\n/lib/ld-linux-armhf.so.3 (0x76ef5000)\n</code></pre>\n\n<p>librf24.so is not present</p>\n\n<p>Here is my gradle configuration : </p>\n\n<pre><code>model {\n\n    platforms {\n        raspberry {\n            architecture \"arm\"\n            operatingSystem \"linux\"\n        }\n    }\n    toolChains {\n        raspToolChain(Gcc) {\n            target(\"raspberry\") {\n              //  path 'C:\\\\SysGCC\\\\raspberry\\\\bin'\n              //  cCompiler.executable 'arm-linux-gnueabihf-g++.exe'\n              //  cppCompiler.executable 'arm-linux-gnueabihf-g++.exe'\n              //  assembler.executable 'arm-linux-gnueabihf-g++.exe'\n              //  linker.executable 'arm-linux-gnueabihf-g++.exe'\n              //  staticLibArchiver.executable 'arm-linux-gnueabihf-ar.exe'\n            }\n        }\n    }\n\n    repositories {\n        libs(PrebuiltLibraries) {\n            jniLib {\n                headers.srcDir projectDir.absolutePath + \"\\\\jni\\\\include\"\n                headers.srcDir projectDir.absolutePath + \"\\\\jni\\\\include\\\\linux\"\n            }\n            rf24 {\n                headers.srcDir projectDir.absolutePath + \"\\\\rf24\\\\RF24\"\n                headers.srcDir projectDir.absolutePath + \"\\\\rf24\\\\RF24\\\\utility\"\n                headers.srcDir projectDir.absolutePath + \"\\\\rf24\\\\RF24\\\\utility\\\\RPi\"\n                binaries.withType(SharedLibraryBinary) {\n                    sharedLibraryFile = file( projectDir.absolutePath + \"\\\\rf24\\\\librf24.so\")\n                    sharedLibraryLinkFile = file( projectDir.absolutePath + \"\\\\rf24\\\\librf24.so\")\n                }\n            }\n        }\n    }\n\n    components {\n        transmitter(NativeLibrarySpec) {\n            targetPlatform \"raspberry\"\n            sources {\n                cpp.lib library: 'jniLib', linkage: 'api'\n                cpp.lib library: 'rf24', linkage: 'api'\n            }\n        }\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "dictionary", "c++17", "unordered-map", "enum-class"], "comments": [{"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 2, "creation_date": 1563377477, "post_id": 57079429, "comment_id": 100681965, "body": "How can this compile if you declare <code>EnumClassHash</code> in the <code>.cpp</code> and <code>colours_map</code> in the <code>.hpp</code>?"}, {"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 0, "creation_date": 1563377650, "post_id": 57079429, "comment_id": 100682058, "body": "Please be more specific about crash happenes. Does it happen while initializing the unordered map?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1563377750, "post_id": 57079429, "comment_id": 100682104, "body": "What kind of crash do you get?  Do you get a crash if you use a function to add each value to a map and then return that map to initialize <code>colours_map</code> with?"}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1563377868, "post_id": 57079429, "comment_id": 100682165, "body": "Seems to work fine here <a href=\"https://wandbox.org/permlink/xm37mOGjYFbOjc7I\" rel=\"nofollow noreferrer\">wandbox.org/permlink/xm37mOGjYFbOjc7I</a> after a few fixes (missing <code>#include</code>, wrong place for the <code>EnumClassHash</code> declaration). You need to be more specific."}, {"owner": {"reputation": 53, "user_id": 3275402, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PrzSaMQYomg/AAAAAAAAAAI/AAAAAAAAOHk/R7WetwoVsXs/photo.jpg?sz=128", "display_name": "GreenaGiant", "link": "https://stackoverflow.com/users/3275402/greenagiant"}, "reply_to_user": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1563378398, "post_id": 57079429, "comment_id": 100682508, "body": "my mistake, bad copy and paste. Apologies.  EnumClassHash is in the .h file. Looks like it may be something else crashing the chip in that case. @Holt thanks for that snippet, wasn&#39;t aware of that website.  Great tool!  Will work from there. Many thanks everyone"}, {"owner": {"reputation": 53, "user_id": 3275402, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PrzSaMQYomg/AAAAAAAAAAI/AAAAAAAAOHk/R7WetwoVsXs/photo.jpg?sz=128", "display_name": "GreenaGiant", "link": "https://stackoverflow.com/users/3275402/greenagiant"}, "edited": false, "score": 0, "creation_date": 1563440920, "post_id": 57079429, "comment_id": 100703747, "body": "All, have edited the OC to add more detail and diagnosis.  Issue persists"}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 3275402, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PrzSaMQYomg/AAAAAAAAAAI/AAAAAAAAOHk/R7WetwoVsXs/photo.jpg?sz=128", "display_name": "GreenaGiant", "link": "https://stackoverflow.com/users/3275402/greenagiant"}, "is_accepted": false, "score": 0, "last_activity_date": 1564484323, "creation_date": 1564484323, "answer_id": 57270093, "question_id": 57079429, "link": "https://stackoverflow.com/questions/57079429/brace-initialised-static-const-unordered-map-using-enum-class/57270093#57270093", "title": "Brace initialised static const unordered_map using enum class", "body": "<p>Thanks all for the help in the comments.</p>\n\n<p>Just wanted to close this and say that the code worked fine with your suggestions...off chip.</p>\n\n<p>The issue seems to be that when the maps were declared as a static const, when the object using them is created, it then created a copy of these maps (I assume on the stack??).  When declared as a const only, the object using them just referenced the flash and didn't create a second \"local\" copy.\nVery odd, not sure why, seems to be counterintuative to be regarding the definition of static but whatever.  Probably my misunderstanding!</p>\n\n<p>Works well as just a const and I am unlikely to have more than one instance of the object so it's not too big an issue it not being static too.</p>\n\n<p>Thanks again.</p>\n"}], "owner": {"reputation": 53, "user_id": 3275402, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PrzSaMQYomg/AAAAAAAAAAI/AAAAAAAAOHk/R7WetwoVsXs/photo.jpg?sz=128", "display_name": "GreenaGiant", "link": "https://stackoverflow.com/users/3275402/greenagiant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 239, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1564484323, "creation_date": 1563377288, "last_edit_date": 1592644375, "question_id": 57079429, "link": "https://stackoverflow.com/questions/57079429/brace-initialised-static-const-unordered-map-using-enum-class", "title": "Brace initialised static const unordered_map using enum class", "body": "<p>I'm having issues using an enum class as a type specifier within an unordered_map.</p>\n<p>I've trawled the internet but had no luck with any of the solutions.</p>\n<p>Closest example I found was at the link below, but seemingly doesn't work.\n<a href=\"https://stackoverflow.com/questions/18837857/cant-use-enum-class-as-unordered-map-key\">Can&#39;t use enum class as unordered_map key</a></p>\n<p>Running on an STM32F4103 if it matters.</p>\n<p><strong>foo.h</strong></p>\n<pre><code>#include &lt;cstring&gt;\n#include &lt;unordered_map&gt;\n#include &lt;functional&gt;\n\nclass Foo\n{\n    public:\n        enum class COLOURS : uint16_t\n    {\n        RED,\n        YELLOW,\n        BLUE,\n        GREEN\n    };\n        static const std::unordered_map&lt;COLOURS, std::string, EnumClassHash&gt; colours_map;\n};\n</code></pre>\n<p><strong>foo.cpp</strong></p>\n<pre><code>#include &quot;foo.h&quot;\n\nstruct EnumClassHash\n{\n    template &lt;typename T&gt;\n    std::size_t operator()(T t) const\n    {\n        return static_cast&lt;std::size_t&gt;(t);\n    }\n};\n\nstd::unordered_map&lt;Foo::COLOURS, std::string, EnumClassHash&gt; Foo::colours_map\n{\n    {Foo::COLOURS::RED, &quot;red&quot;},\n    {Foo::COLOURS::YELLOW, &quot;yellow&quot;},\n    {Foo::COLOURS::BLUE, &quot;blue&quot;},\n    {Foo::COLOURS::GREEN, &quot;green&quot;}\n};\n</code></pre>\n<p>The above compiles fine, I've omitted the main, but basically construct the class and get the string associated to a specified colour.</p>\n<p>However, it crashes the chip.  My suspicion is that the hash has computed incorrectly??</p>\n<p>Complete newbie to hashing so layman's terms or a code snippet would be greatly appreciated.</p>\n<p>TIA</p>\n<h1><strong>EDIT:</strong></h1>\n<p>So thank you for the help so far.  Issue still persists but I can be more specific now.</p>\n<p>The following <strong>foo.h</strong> and a corresponding <em>empty</em> <strong>foo.cpp</strong> compiles and runs fine:</p>\n<p><strong>foo.h</strong></p>\n<pre><code>#include &lt;unordered_map&gt;\n#include &lt;cstdint&gt;\n#include &lt;functional&gt;\n#include &lt;string&gt;\n\nstruct EnumClassHash\n{\n    template &lt;typename T&gt;\n    std::size_t operator()(T t) const\n    {\n        return static_cast&lt;std::size_t&gt;(t);\n    }\n};\n\nclass Foo {\npublic:\n    Foo() :\n        colours_map(\n                    {\n                        {COLOURS::RED,      &quot;red&quot;},\n                        {COLOURS::YELLOW,   &quot;yellow&quot;},\n                        {COLOURS::BLUE,     &quot;blue&quot;},\n                        {COLOURS::GREEN,    &quot;green&quot;}\n                    }\n                    )\n    {\n        ;\n    }\n\n    enum class COLOURS: uint16_t {\n        RED,\n        YELLOW,\n        BLUE,\n        GREEN\n    };\n    const std::unordered_map&lt;COLOURS, std::string, EnumClassHash&gt; colours_map;\n};\n</code></pre>\n<p>However, I really need this to be static for my application.  The following, compiles fine but crashes the chip.  As far as I can tell using openOCD the chip doesn't even boot.  Odd given that it works fine here <a href=\"https://wandbox.org/permlink/xm37mOGjYFbOjc7I\" rel=\"nofollow noreferrer\">https://wandbox.org/permlink/xm37mOGjYFbOjc7I</a></p>\n<p><strong>foo.h</strong></p>\n<pre><code>#include &lt;unordered_map&gt;\n#include &lt;cstdint&gt;\n#include &lt;functional&gt;\n#include &lt;string&gt;\n\nstruct EnumClassHash\n{\n    template &lt;typename T&gt;\n    std::size_t operator()(T t) const\n    {\n        return static_cast&lt;std::size_t&gt;(t);\n    }\n};\n\nclass Foo {\npublic:\n    enum class COLOURS: uint16_t {\n        RED,\n        YELLOW,\n        BLUE,\n        GREEN\n    };\n    static const std::unordered_map&lt;COLOURS, std::string, EnumClassHash&gt; colours_map;\n};\n</code></pre>\n<p><strong>foo.cpp</strong></p>\n<pre><code>#include &quot;foo.h&quot;\n\nconst std::unordered_map&lt;Foo::COLOURS, std::string, EnumClassHash&gt; Foo::colours_map {\n    {Foo::COLOURS::RED, &quot;red&quot;},\n    {Foo::COLOURS::YELLOW, &quot;yellow&quot;},\n    {Foo::COLOURS::BLUE, &quot;blue&quot;},\n    {Foo::COLOURS::GREEN, &quot;green&quot;}\n};\n\n</code></pre>\n<p>...I feel I am missing something very obvious.  TIA</p>\n"}, {"tags": ["c++", "qt", "qdatastream", "qt5.9", "qmetatype"], "comments": [{"owner": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "edited": false, "score": 0, "creation_date": 1563377695, "post_id": 57079328, "comment_id": 100682081, "body": "How is your <code>mimeTypes()</code> implemented?"}, {"owner": {"reputation": 3000, "user_id": 7611028, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/070114bcdaeea4fc70434718b584f0e0?s=128&d=identicon&r=PG&f=1", "display_name": "thibsc", "link": "https://stackoverflow.com/users/7611028/thibsc"}, "reply_to_user": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "edited": false, "score": 1, "creation_date": 1563377876, "post_id": 57079328, "comment_id": 100682173, "body": "@SilvanoCerza I have updated"}], "answers": [{"comments": [{"owner": {"reputation": 3000, "user_id": 7611028, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/070114bcdaeea4fc70434718b584f0e0?s=128&d=identicon&r=PG&f=1", "display_name": "thibsc", "link": "https://stackoverflow.com/users/7611028/thibsc"}, "edited": false, "score": 1, "creation_date": 1563523804, "post_id": 57108023, "comment_id": 100736087, "body": "Thank you for the help, which qt version do you use ? Because I think that in the 5.13, QJsonValue is already define in qmetatype but not in 5.9, but maybe I&#39;m wrong. I go check"}, {"owner": {"reputation": 5008, "user_id": 5762796, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3acb5c2021f4c279f29d61481b28e15?s=128&d=identicon&r=PG&f=1", "display_name": "Aleph0", "link": "https://stackoverflow.com/users/5762796/aleph0"}, "reply_to_user": {"reputation": 3000, "user_id": 7611028, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/070114bcdaeea4fc70434718b584f0e0?s=128&d=identicon&r=PG&f=1", "display_name": "thibsc", "link": "https://stackoverflow.com/users/7611028/thibsc"}, "edited": false, "score": 0, "creation_date": 1563523920, "post_id": 57108023, "comment_id": 100736144, "body": "@ThibautB.: That&#39;s a good point. I&#39;m using Qt 5.13.0 and have not considered what might happened in older versions. In this case you might need to define all this operators for all QJson-Kind Objects. There are quite plenty of them. Maybe you can try to run my example. It should be self-contained."}, {"owner": {"reputation": 3000, "user_id": 7611028, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/070114bcdaeea4fc70434718b584f0e0?s=128&d=identicon&r=PG&f=1", "display_name": "thibsc", "link": "https://stackoverflow.com/users/7611028/thibsc"}, "edited": false, "score": 0, "creation_date": 1563524403, "post_id": 57108023, "comment_id": 100736373, "body": "this is not the problem, in the 5.9 source, QJsonValue is declared <a href=\"https://github.com/qt/qtbase/blob/5.9/src/corelib/kernel/qmetatype.h#L117\" rel=\"nofollow noreferrer\">here</a>, I am going to try your example"}, {"owner": {"reputation": 3000, "user_id": 7611028, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/070114bcdaeea4fc70434718b584f0e0?s=128&d=identicon&r=PG&f=1", "display_name": "thibsc", "link": "https://stackoverflow.com/users/7611028/thibsc"}, "edited": false, "score": 0, "creation_date": 1563525202, "post_id": 57108023, "comment_id": 100736742, "body": "Oh, Sorry, my last comment is false, in the cpp file, when it&#39;s a QJsonValue, the switch return <a href=\"https://github.com/qt/qtbase/blob/5.9/src/corelib/kernel/qmetatype.cpp#L1347\" rel=\"nofollow noreferrer\">false in 5.9</a>, but in <a href=\"https://github.com/qt/qtbase/blob/5.13/src/corelib/kernel/qmetatype.cpp#L1573\" rel=\"nofollow noreferrer\">5.13</a>, the implementation is different and return false only if the pointer is not allocate, that explain why it is working in your case."}, {"owner": {"reputation": 5008, "user_id": 5762796, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3acb5c2021f4c279f29d61481b28e15?s=128&d=identicon&r=PG&f=1", "display_name": "Aleph0", "link": "https://stackoverflow.com/users/5762796/aleph0"}, "reply_to_user": {"reputation": 3000, "user_id": 7611028, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/070114bcdaeea4fc70434718b584f0e0?s=128&d=identicon&r=PG&f=1", "display_name": "thibsc", "link": "https://stackoverflow.com/users/7611028/thibsc"}, "edited": false, "score": 0, "creation_date": 1563526155, "post_id": 57108023, "comment_id": 100737221, "body": "@ThibautB.: Alright! I rebuild my project with Qt 5.5 and I was able to reproduce your error. Hooray!"}, {"owner": {"reputation": 5008, "user_id": 5762796, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3acb5c2021f4c279f29d61481b28e15?s=128&d=identicon&r=PG&f=1", "display_name": "Aleph0", "link": "https://stackoverflow.com/users/5762796/aleph0"}, "reply_to_user": {"reputation": 3000, "user_id": 7611028, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/070114bcdaeea4fc70434718b584f0e0?s=128&d=identicon&r=PG&f=1", "display_name": "thibsc", "link": "https://stackoverflow.com/users/7611028/thibsc"}, "edited": false, "score": 1, "creation_date": 1563528310, "post_id": 57108023, "comment_id": 100738390, "body": "@ThibautB. I updated my answer. You might want to take a look at it."}, {"owner": {"reputation": 3000, "user_id": 7611028, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/070114bcdaeea4fc70434718b584f0e0?s=128&d=identicon&r=PG&f=1", "display_name": "thibsc", "link": "https://stackoverflow.com/users/7611028/thibsc"}, "edited": false, "score": 0, "creation_date": 1563536599, "post_id": 57108023, "comment_id": 100742425, "body": "I have test your code, effectively, the error vanishes when you call <code>load</code>, but when you try after the <code>save</code> to display the stream content (<code>qDebug() &lt;&lt; stream;</code>) it&#39;s written <i>&quot;QVariant(Invalid)&quot;</i>"}], "tags": [], "owner": {"reputation": 5008, "user_id": 5762796, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3acb5c2021f4c279f29d61481b28e15?s=128&d=identicon&r=PG&f=1", "display_name": "Aleph0", "link": "https://stackoverflow.com/users/5762796/aleph0"}, "is_accepted": false, "score": 3, "last_activity_date": 1563528288, "last_edit_date": 1563528288, "creation_date": 1563523098, "answer_id": 57108023, "question_id": 57079328, "link": "https://stackoverflow.com/questions/57079328/qt-model-drag-drop-unable-to-save-type-qjsonvalue/57108023#57108023", "title": "Qt model drag &amp; drop - Unable to save type QJsonValue", "body": "<p>I tried to reproduce your example, because I really couldn't explain this behavior by looking at your code. I compiled the project with Qt 5.5 and I was able to reproduce the error message:</p>\n\n<pre><code>QVariant::save: unable to save type 'QJsonValue' (type id: 45).\n</code></pre>\n\n<p>Interestingly, the error vanishes with Qt 5.13, as <code>QVariant</code> already includes the QJson-Types in this version.</p>\n\n<p>It seems, that I found a possible workaround for this kind of <code>defect</code>, which is the following:</p>\n\n<pre><code>#include &lt;QApplication&gt;\n#include &lt;QDebug&gt;\n#include &lt;QDataStream&gt;\n#include &lt;QJsonDocument&gt;\n\nQDataStream&amp; operator&lt;&lt;(QDataStream&amp; out, const QJsonDocument&amp; myObj) {\n    return out;\n}\n\nQDataStream&amp; operator &gt;&gt; (QDataStream &amp; in, QJsonDocument&amp; myObj) {\n    return in;\n}\nQ_DECLARE_METATYPE(QJsonDocument)\n\n\nint main(int argc, char** args) {\n    qDebug() &lt;&lt; qRegisterMetaTypeStreamOperators&lt;QJsonDocument&gt;();\n    QVariant var = QVariant::fromValue(QJsonDocument());\n    qDebug() &lt;&lt; var.type();\n    qDebug() &lt;&lt; var.typeName();\n    QDataStream stream;\n    var.load(stream);   // Workaround: Just call load at least once before any save \n    var.save(stream);\n    var.save(stream);\n}\n</code></pre>\n\n<p>If you call <code>load</code> at least once before all calls of <code>save</code> the error vanishes. At least for Qt 5.5. </p>\n\n<p>Unfortunately, I don't have the sources of Qt 5.5 at hand to really find the reason for this odd behavior. I also don't know what makes <code>QJsonDocument</code> so special among other classes, which don't need the call to <code>load</code>.</p>\n"}], "owner": {"reputation": 3000, "user_id": 7611028, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/070114bcdaeea4fc70434718b584f0e0?s=128&d=identicon&r=PG&f=1", "display_name": "thibsc", "link": "https://stackoverflow.com/users/7611028/thibsc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 440, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1563528288, "creation_date": 1563377006, "last_edit_date": 1563520540, "question_id": 57079328, "link": "https://stackoverflow.com/questions/57079328/qt-model-drag-drop-unable-to-save-type-qjsonvalue", "title": "Qt model drag &amp; drop - Unable to save type QJsonValue", "body": "<p>I have a <a href=\"https://doc.qt.io/qt-5/qabstractlistmodel.html\" rel=\"nofollow noreferrer\"><code>QAbstractListModel</code></a> to display a <a href=\"https://doc.qt.io/qt-5/qjsonarray.html\" rel=\"nofollow noreferrer\"><code>QJsonArray</code></a>, with <a href=\"https://doc.qt.io/qt-5/model-view-programming.html#using-drag-and-drop-with-item-views\" rel=\"nofollow noreferrer\">drag &amp; drop implementation</a>:</p>\n\n<pre><code>class NoteListModel : public QAbstractListModel\n{\n    Q_OBJECT\n\npublic:\n    explicit NoteListModel(QObject *parent = nullptr);\n    ~NoteListModel() override;\n    int rowCount(const QModelIndex &amp;parent = QModelIndex()) const override;\n    QVariant data(const QModelIndex &amp;index, int role = Qt::DisplayRole) const override;\n    Qt::ItemFlags flags(const QModelIndex&amp; index) const override;\n    // Drag &amp; Drop:\n    bool canDropMimeData(const QMimeData *data, Qt::DropAction action, int row, int column, const QModelIndex &amp;parent) const override;\n    bool dropMimeData(const QMimeData *data, Qt::DropAction action, int row, int column, const QModelIndex &amp;parent) override;\n    QStringList mimeTypes() const override {\n        QStringList mimes = QAbstractListModel::mimeTypes();\n        mimes.prepend(\"application/flynote_json\");\n        return mimes;\n    }\n    QMimeData *mimeData(const QModelIndexList &amp;indexes) const override;\n    Qt::DropActions supportedDropActions() const override;\n\nprivate:\n    QJsonArray noteArray;\n\n};\n</code></pre>\n\n<p>When I call the base implementation in my <a href=\"https://doc.qt.io/qt-5/qabstractitemmodel.html#mimeData\" rel=\"nofollow noreferrer\"><code>mimeData()</code></a> method, I have this error:</p>\n\n<blockquote>\n  <p>QVariant::save: unable to save type 'QJsonValue' (type id: 45)<br>\n  ASSERT failure in QVariant::save: \"Invalid type to save\"</p>\n</blockquote>\n\n<pre><code>QMimeData *NoteListModel::mimeData(const QModelIndexList &amp;indexes) const\n{\n    QMimeData *ret = nullptr;\n    if (indexes.size() == 1){\n        QModelIndex mi = indexes.first();\n        if (mi.isValid()){\n            ret = QAbstractListModel::mimeData(indexes);\n            QJsonDocument json_mime(noteArray.at(mi.row()).toObject());\n            ret-&gt;setData(\"application/flynote_json\", json_mime.toJson());\n        }\n    }\n    return ret;\n}\n</code></pre>\n\n<p>So no problem, like is describe in the <a href=\"https://doc.qt.io/qt-5/qmetatype.html#save\" rel=\"nofollow noreferrer\">doc</a> I add these lines:</p>\n\n<pre><code>// In the header (outside the class)\nQ_DECLARE_METATYPE(QJsonValue)\nQDataStream &amp;operator&lt;&lt;(QDataStream &amp;out, const QJsonValue &amp;myObj){ /*...*/ }\nQDataStream &amp;operator&gt;&gt;(QDataStream &amp;in, QJsonValue &amp;myObj){ /*...*/ }\n\n// In the constructor\nqRegisterMetaType&lt;QJsonValue&gt;(\"QJsonValue\");\nqRegisterMetaTypeStreamOperators&lt;QJsonValue&gt;(\"QJsonValue\");\n</code></pre>\n\n<p>But I have the same problem, What I'm doing wrong ?</p>\n"}, {"tags": ["c++", "segmentation-fault", "clang++"], "comments": [{"owner": {"reputation": 495, "user_id": 1968586, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0c397ad0144b27da5f5e1c1bd2585d21?s=128&d=identicon&r=PG", "display_name": "pelletjl", "link": "https://stackoverflow.com/users/1968586/pelletjl"}, "edited": false, "score": 0, "creation_date": 1563377204, "post_id": 57079257, "comment_id": 100681803, "body": "possibly related: <a href=\"https://stackoverflow.com/q/772355/1968586\">stackoverflow.com/q/772355/1968586</a>"}, {"owner": {"reputation": 1004, "user_id": 2036673, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/cfbc483da1e90fb9fb000ad59962b295?s=128&d=identicon&r=PG", "display_name": "Person93", "link": "https://stackoverflow.com/users/2036673/person93"}, "reply_to_user": {"reputation": 495, "user_id": 1968586, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0c397ad0144b27da5f5e1c1bd2585d21?s=128&d=identicon&r=PG", "display_name": "pelletjl", "link": "https://stackoverflow.com/users/1968586/pelletjl"}, "edited": false, "score": 0, "creation_date": 1563377769, "post_id": 57079257, "comment_id": 100682115, "body": "It doesn&#39;t look the same, that OP seemed to be asking a general question about how to derive from std::ostream. I didn&#39;t see anything there about a segfault."}, {"owner": {"reputation": 2876, "user_id": 7958961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9fc6004eafe9f7b473927ecfd65646?s=128&d=identicon&r=PG&f=1", "display_name": "Rados\u0142aw Cybulski", "link": "https://stackoverflow.com/users/7958961/rados%c5%82aw-cybulski"}, "edited": false, "score": 1, "creation_date": 1563378614, "post_id": 57079257, "comment_id": 100682626, "body": "Hmm. According to <a href=\"http://www.cplusplus.com/reference/ostream/ostream/ostream/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/ostream/ostream/ostream</a> <code>ostream</code> doesn&#39;t have a default constructor, so the question is, why this code compiles at all."}, {"owner": {"reputation": 1004, "user_id": 2036673, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/cfbc483da1e90fb9fb000ad59962b295?s=128&d=identicon&r=PG", "display_name": "Person93", "link": "https://stackoverflow.com/users/2036673/person93"}, "reply_to_user": {"reputation": 2876, "user_id": 7958961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9fc6004eafe9f7b473927ecfd65646?s=128&d=identicon&r=PG&f=1", "display_name": "Rados\u0142aw Cybulski", "link": "https://stackoverflow.com/users/7958961/rados%c5%82aw-cybulski"}, "edited": false, "score": 0, "creation_date": 1563380920, "post_id": 57079257, "comment_id": 100683934, "body": "@Rados\u0142awCybulski, you&#39;re right. I changed the constructor to <code>MyStream() : std::ostream{ &amp;buffer } {}</code> and it runs fine now. It&#39;s really strange. In any case, if you rewrite your comment as an answer, I will accept it. But I was still concerned that it is undefined behavior because it&#39;s passing a pointer to the buffer before the buffer is constructed. My final version uses <code>std::aligned_storage</code> and placement new to construct the buffer and immediately pass the pointer to <code>std::ostream</code>&#39;s constructor."}, {"owner": {"reputation": 2876, "user_id": 7958961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9fc6004eafe9f7b473927ecfd65646?s=128&d=identicon&r=PG&f=1", "display_name": "Rados\u0142aw Cybulski", "link": "https://stackoverflow.com/users/7958961/rados%c5%82aw-cybulski"}, "edited": false, "score": 0, "creation_date": 1563383189, "post_id": 57079257, "comment_id": 100684959, "body": "<code>MyStream() : std::ostream{ &amp;buffer }</code> might also be wrong, as <code>buffer</code> is not yet initialized (base class goes first, then members). You might away with it, if the constructor is empty, but i would try to avoid it."}, {"owner": {"reputation": 2876, "user_id": 7958961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9fc6004eafe9f7b473927ecfd65646?s=128&d=identicon&r=PG&f=1", "display_name": "Rados\u0142aw Cybulski", "link": "https://stackoverflow.com/users/7958961/rados%c5%82aw-cybulski"}, "edited": false, "score": 0, "creation_date": 1563383211, "post_id": 57079257, "comment_id": 100684973, "body": "Also you can just flag my answer as helpful. ;)"}], "answers": [{"tags": [], "owner": {"reputation": 2876, "user_id": 7958961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9fc6004eafe9f7b473927ecfd65646?s=128&d=identicon&r=PG&f=1", "display_name": "Rados\u0142aw Cybulski", "link": "https://stackoverflow.com/users/7958961/rados%c5%82aw-cybulski"}, "is_accepted": true, "score": 0, "last_activity_date": 1563383519, "creation_date": 1563383519, "answer_id": 57081078, "question_id": 57079257, "link": "https://stackoverflow.com/questions/57079257/stream-input-operator-causes-segmentation-fault-with-clang-but-works-with-gcc/57081078#57081078", "title": "Stream input operator causes Segmentation fault with clang but works with gcc", "body": "<p>Try something like this:</p>\n\n<pre><code>#include &lt;new&gt;\n\nclass MyStream : public std::ostream {\npublic:\n    MyStream() : std::ostream( new (buffer) std::stringbuf ) { }\n    ~MyStream() {\n        using std::stringbuf;\n        ((stringbuf*)buffer)-&gt;~stringbuf();\n    }\nprivate:\n    char buffer[sizeof(std::stringbuf)];\n};\n</code></pre>\n\n<p>this should initialize buffer first via <code>placement new</code> and allow you to pass it to <code>ostream</code>.</p>\n"}], "owner": {"reputation": 1004, "user_id": 2036673, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/cfbc483da1e90fb9fb000ad59962b295?s=128&d=identicon&r=PG", "display_name": "Person93", "link": "https://stackoverflow.com/users/2036673/person93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 57081078, "answer_count": 1, "score": 0, "last_activity_date": 1563383519, "creation_date": 1563376795, "question_id": 57079257, "link": "https://stackoverflow.com/questions/57079257/stream-input-operator-causes-segmentation-fault-with-clang-but-works-with-gcc", "title": "Stream input operator causes Segmentation fault with clang but works with gcc", "body": "<p>The following code causes a segfault when it's compiled with clang and linked against libc++ but works fine when using libstc++ or compiling with gcc.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n\nclass MyStream : public std::ostream {\npublic:\n    MyStream() {\n        rdbuf( &amp;buffer );\n    }\n\nprivate:\n    std::stringbuf buffer;\n};\n\nint main() {\n    MyStream stream{};\n    stream &lt;&lt; \"Hello world\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/RxNBjQvPipDFJnTk\" rel=\"nofollow noreferrer\">Here is the code on wandbox</a></p>\n"}, {"tags": ["c++", "mysql", "qt"], "comments": [{"owner": {"reputation": 21, "user_id": 10901196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faab6581afbdb615ce1134446464de9f?s=128&d=identicon&r=PG&f=1", "display_name": "Vkoder", "link": "https://stackoverflow.com/users/10901196/vkoder"}, "edited": false, "score": 0, "creation_date": 1563376803, "post_id": 57079230, "comment_id": 100681555, "body": "Please note , I am not using sockets to connect to mysql db, I simply tested my app on local mysql database but now trying to look how can i host it on a cloud or a remote machine where the Qt client can connect to DB when deployed on any machine."}, {"owner": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "edited": false, "score": 0, "creation_date": 1563377092, "post_id": 57079230, "comment_id": 100681730, "body": "Any error information from <a href=\"https://doc.qt.io/qt-5/qsqldatabase.html#lastError\" rel=\"nofollow noreferrer\">QSqlDatabase::lastError</a>?"}, {"owner": {"reputation": 21, "user_id": 10901196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faab6581afbdb615ce1134446464de9f?s=128&d=identicon&r=PG&f=1", "display_name": "Vkoder", "link": "https://stackoverflow.com/users/10901196/vkoder"}, "reply_to_user": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "edited": false, "score": 1, "creation_date": 1563382431, "post_id": 57079230, "comment_id": 100684637, "body": "Ok the lastError is this: I guess i would need a driver for this ,  &quot;[Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified QODBC3: Unable to connect&quot;"}, {"owner": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "edited": false, "score": 0, "creation_date": 1563436158, "post_id": 57079230, "comment_id": 100701155, "body": "You probably need to link the database client library too. See: <a href=\"https://doc.qt.io/qt-5/qsqldatabase.html#addDatabase-1\" rel=\"nofollow noreferrer\">QSqlDatabase::addDatabase</a>"}, {"owner": {"reputation": 21, "user_id": 10901196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faab6581afbdb615ce1134446464de9f?s=128&d=identicon&r=PG&f=1", "display_name": "Vkoder", "link": "https://stackoverflow.com/users/10901196/vkoder"}, "reply_to_user": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "edited": false, "score": 0, "creation_date": 1563460620, "post_id": 57079230, "comment_id": 100715317, "body": "even after linking the library , it is showing the same error :("}], "owner": {"reputation": 21, "user_id": 10901196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faab6581afbdb615ce1134446464de9f?s=128&d=identicon&r=PG&f=1", "display_name": "Vkoder", "link": "https://stackoverflow.com/users/10901196/vkoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 228, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1563391534, "creation_date": 1563376708, "last_edit_date": 1563391534, "question_id": 57079230, "link": "https://stackoverflow.com/questions/57079230/how-to-connect-qt-desktop-application-to-mysql-database-running-on-aws-or-any-on", "title": "How to connect Qt Desktop application to mysql database running on AWS or any online mysql database", "body": "<p>I am trying to connect a Qt desktop application to mySql db on AWS or online mysql database hosted on free domain. can somebody point me in the correct direction for the same?</p>\n\n<p>I tried creating account on AWS and create mysql db but connection does not work</p>\n\n<pre><code>db = QSqlDatabase::addDatabase(\"QODBC\");\n    userName = \"sql9298899\";\n    password = \"**********\";\n    databaseName = \"sql9298899\";\n    hostName = \"sql9.freesqldatabase.com\";\n\n    //create database connection here\n    db = QSqlDatabase::addDatabase(\"QMYSQL\");\n    db.setHostName(hostName);\n    db.setUserName(userName);\n    db.setPassword(password);\n    db.setDatabaseName(databaseName);\n\nDB.open always returns false with lastError as :\n[Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified QODBC3: Unable to connect\n</code></pre>\n"}, {"tags": ["c++", "variables", "memory"], "comments": [{"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 4, "creation_date": 1563376627, "post_id": 57079166, "comment_id": 100681483, "body": "Yes, see <a href=\"https://stackoverflow.com/questions/15718262/what-exactly-is-the-as-if-rule\">as-if rule</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1563376692, "post_id": 57079166, "comment_id": 100681513, "body": "It can.  Doesn&#39;t mean it did but it would be a poor compiler if it didn&#39;t and most likely not survive."}], "answers": [{"comments": [{"owner": {"reputation": 8084, "user_id": 2896626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4cd83959d7fe39c658d2e49cfecfe4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Paul92", "link": "https://stackoverflow.com/users/2896626/paul92"}, "edited": false, "score": 1, "creation_date": 1563376778, "post_id": 57079225, "comment_id": 100681541, "body": "Even if the variable is not maked as <code>const</code> or <code>constexpr</code>, it can (and usually does) replace it, depending on the optimization flags."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 8084, "user_id": 2896626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4cd83959d7fe39c658d2e49cfecfe4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Paul92", "link": "https://stackoverflow.com/users/2896626/paul92"}, "edited": false, "score": 0, "creation_date": 1563376898, "post_id": 57079225, "comment_id": 100681613, "body": "@Paul92 Only if the compiler can deduce with 100% certainty that the variable haven&#39;t been changed before its use. And such analysis is very hard, so there are many cases where the compiler simply can&#39;t do it."}, {"owner": {"reputation": 8084, "user_id": 2896626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4cd83959d7fe39c658d2e49cfecfe4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Paul92", "link": "https://stackoverflow.com/users/2896626/paul92"}, "edited": false, "score": 0, "creation_date": 1563377104, "post_id": 57079225, "comment_id": 100681738, "body": "I agree. I was just mentioning that is possible, sometimes, to do this. At least from my experiments, in most of the toy examples, the value was replaced (gcc9 -O3)."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1563376694, "creation_date": 1563376694, "answer_id": 57079225, "question_id": 57079166, "link": "https://stackoverflow.com/questions/57079166/does-compiler-replace-constant-variables-with-its-value-while-compiling-c/57079225#57079225", "title": "Does compiler replace constant variables with its value while compiling C++", "body": "<p>It depends, as there are two types of constants: </p>\n\n<ol>\n<li>Compile-time constants (<code>const</code> variables which are initialized at compilation time, or <code>constexpr</code> variables).</li>\n<li>Run-time constants (which are things like arguments that are marked as <code>const</code>).</li>\n</ol>\n\n<p>For the first type (compile-time constants) the compiler can indeed \"replace\" the variables with the actual values, and that's what all major compilers will do.</p>\n\n<p>For the second type, it's not possible since the values aren't known until run-time.</p>\n"}, {"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": true, "score": 2, "last_activity_date": 1563376795, "creation_date": 1563376795, "answer_id": 57079258, "question_id": 57079166, "link": "https://stackoverflow.com/questions/57079166/does-compiler-replace-constant-variables-with-its-value-while-compiling-c/57079258#57079258", "title": "Does compiler replace constant variables with its value while compiling C++", "body": "<p>Yes. Any decent compiler will optimize those loads out and just replace them. For example, with Clang 8.0.0 <a href=\"https://godbolt.org/z/oOyOQn\" rel=\"nofollow noreferrer\">this source code</a>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nconst int a = 34;\n\nint main()\n{\n    int z = a;\n    printf(\"%d\", z);\n}\n</code></pre>\n\n<p>Gives me this asm:</p>\n\n<pre><code>main:                                   # @main\n        push    rax\n        mov     edi, offset .L.str\n        mov     esi, 34\n        xor     eax, eax\n        call    printf\n        xor     eax, eax\n        pop     rcx\n        ret\n.L.str:\n        .asciz  \"%d\"\n</code></pre>\n\n<p>Notice how <code>a</code> doesn't exist in the asm, only <code>34</code> exists.</p>\n\n<p>In this simple example, <code>a</code> doesn't even have to be <code>const</code> for the compiler to notice it'll never be altered. Removing it would still have the same effect if compiled under optimizations.</p>\n\n<p>Do note that this is not always the case and thus helping the compiler adding <code>const</code> / <code>constexpr</code> is a good thing to do.</p>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1563377133, "post_id": 57079278, "comment_id": 100681760, "body": "Even this could be optimized depending on what you are doing.  see <a href=\"https://godbolt.org/z/qVGNQY\" rel=\"nofollow noreferrer\">godbolt.org/z/qVGNQY</a>.  The as-if rule allows a lot of optimizations."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1563377665, "post_id": 57079278, "comment_id": 100682065, "body": "The thing about inlining is that it doesn&#39;t have to be all or nothing. The constant can be inlined in certain places where it makes sense but still allow the const object to be preserved if it&#39;s address is needed. This is one of the reasons <code>inline</code> doesn&#39;t make sense for inlining decisions, each use case has it&#39;s own merits."}], "tags": [], "owner": {"reputation": 102, "user_id": 7546950, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ergnsw3msoY/AAAAAAAAAAI/AAAAAAAAADI/gPIDBqGkDv0/photo.jpg?sz=128", "display_name": "Youcef4k", "link": "https://stackoverflow.com/users/7546950/youcef4k"}, "is_accepted": false, "score": 0, "last_activity_date": 1563376858, "creation_date": 1563376858, "answer_id": 57079278, "question_id": 57079166, "link": "https://stackoverflow.com/questions/57079166/does-compiler-replace-constant-variables-with-its-value-while-compiling-c/57079278#57079278", "title": "Does compiler replace constant variables with its value while compiling C++", "body": "<p>Another aspect to consider is if that const variable is independent:\nif the const variable is not used elsewhere by a const pointer or reference then the compiler can optimize it.</p>\n\n<p>But like this case where the variable a is used by a pointer b, the compiler cannot optimize the variable, since the pointer still needs an address to point to.</p>\n\n<pre><code>const int a = 5;\nconst int* b = &amp;a;\n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 11655900, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0I0pu-GI8bw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdRb4epqOLIU4pr6kFambma7P-y2g/mo/photo.jpg?sz=128", "display_name": "user11655900", "link": "https://stackoverflow.com/users/11655900/user11655900"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 719, "favorite_count": 0, "accepted_answer_id": 57079258, "answer_count": 3, "score": 0, "last_activity_date": 1563376858, "creation_date": 1563376524, "question_id": 57079166, "link": "https://stackoverflow.com/questions/57079166/does-compiler-replace-constant-variables-with-its-value-while-compiling-c", "title": "Does compiler replace constant variables with its value while compiling C++", "body": "<p>Must processor get constant variable's value from memory every time it is used. But if constant variables can't be changed, compiler can replace them with their values, can't it.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1563376491, "post_id": 57079095, "comment_id": 100681388, "body": "You can write a SFINAE <code>operator&lt;</code> that will apply to classes that fulfill a certain concept that you can define (usually, either derivation from an empty &quot;tag&quot; base class, or presence of some member)."}, {"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1563377527, "post_id": 57079095, "comment_id": 100681993, "body": "@KubaOber can I use that to automatically define lexicographical comparison on my structs?"}, {"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1563377602, "post_id": 57079095, "comment_id": 100682031, "body": "Why are you <code>new</code>ing your elements and only storing references? Your lifetime goals are not understandable. Don&#39;t further explain your implementation approach, but your original problem. Why can you store them in the container? If not why not make a clean container class."}, {"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "reply_to_user": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 0, "creation_date": 1563378436, "post_id": 57079095, "comment_id": 100682528, "body": "@freakish I&#39;ve removed that commentary, which may just be misleading."}, {"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "reply_to_user": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 0, "creation_date": 1563378693, "post_id": 57079095, "comment_id": 100682670, "body": "@freakish If you consider that the <code>set</code> is storing weak references, then they are effectively leaked. Think about what a client of a data model library would want. You&#39;d want to make shapes, and when you are done with them, they are cleaned up. That can be done via reference counting."}, {"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "reply_to_user": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 0, "creation_date": 1563378777, "post_id": 57079095, "comment_id": 100682727, "body": "@freakish Notice how the semantics are different from a simple shared pointer allocation in the test. Two calls to <code>make_shared</code> would not return the same pointer."}, {"owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 0, "creation_date": 1563378968, "post_id": 57079095, "comment_id": 100682827, "body": "@Taylor so basically whenever someone &quot;constructs&quot; an object with the same parameters (or &quot;equal&quot;) then the mechanism is supposed to return an already cached object. Right, so you are simply implementing a cache. Your weak_ptr idea is ok (again: this <b>is not</b> a leak). What you need is a cleanup mechanism. Like for example a separate thread that will periodically rebuild the cache by removing dead weak_ptrs."}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1563379550, "post_id": 57079095, "comment_id": 100683194, "body": "There can be various ways how to solve that problem. But without knowing the exact lifetime constraints/flow and ownership patterns it is hard to tell."}, {"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "reply_to_user": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1563379582, "post_id": 57079095, "comment_id": 100683210, "body": "@t.niese What am I missing? it seems so simple."}, {"owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 0, "creation_date": 1563379629, "post_id": 57079095, "comment_id": 100683243, "body": "@Taylor don&#39;t you know that there are only two hard things in computer science? Naming and cache invalidation. :)"}, {"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "reply_to_user": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 0, "creation_date": 1563379906, "post_id": 57079095, "comment_id": 100683398, "body": "@freakish and deciphering template errors ;-)"}, {"owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 0, "creation_date": 1563380870, "post_id": 57079095, "comment_id": 100683911, "body": "@Taylor jokes aside, don&#39;t you like the idea of a separate cleaner thread? You can even utilize a conditional variable to wake it up on shared_ptr destruction."}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1563381031, "post_id": 57079095, "comment_id": 100683991, "body": "If it would be simple you would already have a solution ;). You could have stacked allocation pools, separated allocation pools, timed- or probability-based gc, ... . It all depends on how many allocation deallocations you are dealing with,  in which order allocations and deallocations happens if they can be grouped."}, {"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "reply_to_user": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1563381842, "post_id": 57079095, "comment_id": 100684361, "body": "@t.niese Posted my solution below. Seems to work well."}], "answers": [{"comments": [{"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "edited": false, "score": 0, "creation_date": 1563380660, "post_id": 57080343, "comment_id": 100683808, "body": "Oh, one problem is that there are a lot of ephemeral objects generated during user interactions. So it could use up a lot of memory before the factory is cleaned up."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1563380349, "creation_date": 1563380349, "answer_id": 57080343, "question_id": 57079095, "link": "https://stackoverflow.com/questions/57079095/memory-management-for-an-immutable-data-model/57080343#57080343", "title": "memory management for an immutable data model", "body": "<p>One alternative solution is for your clients to use a factory that owns the objects it hands out. This way your clients can use plain pointers to refer to objects.</p>\n\n<p>Once the client is done, it can dispose of the factory along with all the objects. </p>\n\n<p>In addition, may be, have the factory reference counted, or keep a <code>shared_ptr</code> to it.</p>\n"}, {"comments": [{"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 1, "creation_date": 1563382435, "post_id": 57080555, "comment_id": 100684638, "body": "IMHO - but I can&#39;t confirm it right now  - you need to add <code>virtual ~Shape() = default;</code>  (or at least to Circle?) otherwise it might be UB."}, {"owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 1, "creation_date": 1563382759, "post_id": 57080555, "comment_id": 100684752, "body": "Also note that this solution is not thread safe (although the original code is no thread safe as well)."}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 1, "creation_date": 1563383111, "post_id": 57080555, "comment_id": 100684926, "body": "And a bit nitpicking about the <code>No use of weak_ptr :)</code>, <code>[...]A common implementation for enable_shared_from_this is to hold a weak reference (such as std::weak_ptr) to this[...]</code> (<a href=\"https://en.cppreference.com/w/cpp/memory/enable_shared_from_this\" rel=\"nofollow noreferrer\">std::enable_shared_from_this</a>), so it is a hidden weak pointer. But yes you only need to lock one weak pointer per insert instead of <code>values.size()</code> weak pointers, which is a huge benefit."}, {"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "reply_to_user": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1563383307, "post_id": 57080555, "comment_id": 100685006, "body": "@t.niese Don&#39;t need the virtual dtor because the deleter knows the derived type."}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1563383611, "post_id": 57080555, "comment_id": 100685153, "body": "@Taylor if you use <code>make_shape</code> exclusively to construct the shapes, then this is true. But nothing in your code prevents one from creating the instance without <code>make_shape</code>. So either you make this impossible, you use virtual, or document it and hope that everyone reads the documentation."}, {"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "reply_to_user": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1563383826, "post_id": 57080555, "comment_id": 100685260, "body": "@t.niese I&#39;m the only developer. That said, how can I prevent creating an instance without <code>make_shape</code>?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1563484072, "post_id": 57080555, "comment_id": 100726226, "body": "Anyone reviewing the code, now or in the future, will see that a class with virtual methods has no virtual destructor, and will raise valid concerns. Adding that virtual destructor add very little cost. Anyone who ever refactors this code and wants to add more ways of making instances will be burned. You can marry the class to <code>make_shape</code>, for sure: simply make the constructor protected, and befriend the <code>make_shape</code> method. But this is painful, as the cache is a singleton. The instances could probably hold a reference to the cache, and help in propagating the cache defined inside of <code>main</code>."}, {"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1563488128, "post_id": 57080555, "comment_id": 100727546, "body": "@KubaOber added it."}], "tags": [], "owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "is_accepted": false, "score": 0, "last_activity_date": 1563488106, "last_edit_date": 1563488106, "creation_date": 1563381170, "answer_id": 57080555, "question_id": 57079095, "link": "https://stackoverflow.com/questions/57079095/memory-management-for-an-immutable-data-model/57080555#57080555", "title": "memory management for an immutable data model", "body": "<p>Here's the complete code. Turns out I'm just not very good at programming and didn't realize I had to deref something.</p>\n\n<p>Basic approach is that the <code>shared_ptr</code> deleter removes the raw pointer from the <code>set</code>.</p>\n\n<pre><code>#include &lt;set&gt;\n#include &lt;cassert&gt;\n#include &lt;memory&gt;\n\nenum Color { Red, Green, Blue };\n\nstruct Shape;\nstruct Circle;\n\nstruct Shape : public std::enable_shared_from_this&lt;Shape&gt; {\n\n    virtual ~Shape() = default;\n\n    // Set the color, return a new shape.\n    virtual std::shared_ptr&lt;Shape&gt; color(Color) const = 0;\n\n};\n\ntemplate&lt;class T&gt;\nstd::shared_ptr&lt;Shape&gt; make_shape(T value) {\n\n    struct cmp {\n        bool operator()(const T* a, const T* b) const {\n            return *a &lt; *b;\n        }\n    };\n\n    static std::set&lt;T*, cmp&gt; values;\n\n    auto iter = values.find(&amp;value);\n\n    if(iter != values.end()) {\n        return (*iter)-&gt;shared_from_this();\n    }\n\n    auto ptr = std::shared_ptr&lt;T&gt;(new T(value), [](T* p) {\n        printf(\"deleting %p\\n\", (void*)p);\n        values.erase(p); delete p;\n    });\n    values.insert(ptr.get());\n    return ptr;\n\n}\n\nstruct CircleCount {\n    static int count;\n\n    CircleCount() { ++count; }\n    CircleCount(const CircleCount&amp;) { ++count; }\n    ~CircleCount() { --count; }\n};\n\nint CircleCount::count;\n\nstruct Circle : public Shape {\n    CircleCount count;\n    Color c = Red;\n    virtual std::shared_ptr&lt;Shape&gt; color(Color c) const {\n        Circle r;\n        r.c = c;\n        return make_shape(r);\n    }\n    bool operator&lt;(const Circle&amp; rhs) const { return c &lt; rhs.c; }\n};\n\nvoid test_shape() {\n\n    {\n        auto s0 = make_shape(Circle{});\n        auto s1 = make_shape(Circle{});\n\n        assert(s0 == s1);\n\n        auto s2 = s0-&gt;color(Red);\n\n        assert(s2 == s0);\n\n        auto s3 = s0-&gt;color(Green);\n\n        assert(s3 != s0);\n    }\n\n    // All circles should be cleaned up.\n    printf(\"circles: %d\\n\", CircleCount::count);\n    assert(CircleCount::count == 0);\n\n    printf(\"done\\n\");\n\n}\n\nint main() {\n    test_shape();\n}\n\n\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>I made this into something generic, which is up for code review <a href=\"https://codereview.stackexchange.com/questions/224433/generic-flyweighting-function\">here</a></p>\n"}], "owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1563488106, "creation_date": 1563376258, "last_edit_date": 1563379546, "question_id": 57079095, "link": "https://stackoverflow.com/questions/57079095/memory-management-for-an-immutable-data-model", "title": "memory management for an immutable data model", "body": "<p>I've written a little toy data model, which uses a <code>std::set</code> to unique instances. This may be called either the flyweight pattern, or <a href=\"https://en.wikipedia.org/wiki/Hash_consing\" rel=\"nofollow noreferrer\">hash-consing</a> (though, technically, I'm not yet using a hash table).</p>\n\n<pre><code>#include &lt;set&gt;\n#include &lt;cassert&gt;\n\nenum Color { Red, Green, Blue };\n\nstruct Shape {\n\n  // Set the color, return a new shape.\n  virtual const Shape* color(Color) const = 0;\n\n};\n\ntemplate&lt;class T&gt;\nconst T* make_shape(T value) {\n\n  struct cmp {\n    bool operator()(const T* a, const T* b) const {\n      return *a &lt; *b;\n    }\n  };\n\n  static std::set&lt;const T*, cmp &gt; values;\n\n  auto iter = values.find(&amp;value);\n\n  if(iter != values.end()) {\n    return *iter;\n  }\n\n  auto p = new T(value);\n  values.insert(p);\n  return p;\n\n}\n\nstruct Circle : public Shape {\n  Color c = Red;\n  virtual const Shape* color(Color c) const {\n    Circle r;\n    r.c = c;\n    return make_shape(r);\n  }\n  bool operator&lt;(const Circle&amp; rhs) const { return c &lt; rhs.c; }\n};\n\n</code></pre>\n\n<p>Here's my test code. Notice how the first two lines return the same pointer, so these semantics are different from normal allocation via <code>new</code> or <code>make_shared</code>.</p>\n\n<pre><code>\nvoid test_shape() {\n\n  auto s0 = make_shape(Circle{});\n  auto s1 = make_shape(Circle{});\n\n  // Structurally equivalent values yield the same pointer.\n  assert(s0 == s1);\n\n  // Color is red by default, so we should get the same pointer.\n  auto s2 = s0-&gt;color(Red);\n\n  assert(s2 == s0);\n\n  // Changing to Green gives us a different pointer.\n  auto s3 = s0-&gt;color(Green);\n\n  assert(s3 != s0);\n\n  printf(\"done\\n\");\n\n}\n\nint main() {\n    test_shape();\n}\n\n</code></pre>\n\n<p>Right now, the shapes are simply leaked. That is to say that once a client of this data model no longer has a pointer to a <code>Shape</code>, that shape is not deallocated (consider the <code>set</code> to be weak references that should be broken).</p>\n\n<p>So I'd like to use <code>shared_ptr</code> to manage my objects, because it seems simple (also open to other ideas, but <strong>I don't want to add dependencies, like boost</strong>). </p>\n\n<p>But I'm having a little trouble with <code>shared_ptr</code>. I've tried updating the <code>std::set</code> to store <code>std::weak_ptr&lt;const T&gt;</code> with a comparison using <code>owner_before</code>.</p>\n\n<p>I need a <code>shared_ptr</code> to look up the object in the set. But that would require newing an object, and part of the point here is to be able to quickly get an existing structurally equal object.</p>\n\n<p><strong>Update</strong></p>\n\n<p>I also tried keeping the <code>set</code> as raw pointers, and using the <code>shared_ptr</code> deleter to remove elements. Alas, that requires me to use <code>shared_from_this</code> which seems to balk, though I'm not exactly sure why:</p>\n\n<pre><code>shape.cpp:30:16: error: member reference base type 'Circle *const' is not a\n      structure or union\n    return iter-&gt;shared_from_this();\n           ~~~~^ ~~~~~~~~~~~~~~~~\n</code></pre>\n"}, {"tags": ["c++", "qt", "mingw", "undefined-reference"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1563377827, "post_id": 57079023, "comment_id": 100682143, "body": "So, you got it to build now? I&#39;d suggest using Qt Creator, it supports qmake, and Qt comes with mingw support, so it&#39;ll be very easy to do all this using Qt Creator. Your problems may come from using clion."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1563379173, "post_id": 57079023, "comment_id": 100682959, "body": "Have you googled for <code>0xC0000135</code>"}, {"owner": {"reputation": 331, "user_id": 9780816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8683731519c0e12170fc5266a44b0600?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Santoro", "link": "https://stackoverflow.com/users/9780816/antonio-santoro"}, "edited": false, "score": 0, "creation_date": 1563389573, "post_id": 57079023, "comment_id": 100687825, "body": "So I first had to do two things, first setting a a correct Path to MinGW, and second create a new <code>.pro</code> file using <code>qmake -project</code>. Now I have a <code>.ui</code> created using Designer, how can I add automatically the header file to my project folder? In the CMake I put <code>set(CMAKE_AUTOUIC ON)</code> but it won&#39;t generate any header file when I build"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1563394098, "post_id": 57079023, "comment_id": 100689821, "body": "In the preferred mode (where you specify a different build folder from the source) <code>CMake</code> generates in the build folder which should be different from the source folder."}, {"owner": {"reputation": 331, "user_id": 9780816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8683731519c0e12170fc5266a44b0600?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Santoro", "link": "https://stackoverflow.com/users/9780816/antonio-santoro"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1563447184, "post_id": 57079023, "comment_id": 100707190, "body": "@drescherjm is there a way to set CMake to save the <code>ui_</code> and <code>moc_</code> files into the source directory rather than into the <code>cmake-build</code> directory?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1563454011, "post_id": 57079023, "comment_id": 100710978, "body": "I don&#39;t know. I have never wanted that feature since it goes against having your project in a git repository where you don&#39;t want any generated files in the repository."}], "owner": {"reputation": 331, "user_id": 9780816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8683731519c0e12170fc5266a44b0600?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Santoro", "link": "https://stackoverflow.com/users/9780816/antonio-santoro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 379, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563376774, "creation_date": 1563376020, "last_edit_date": 1563376774, "question_id": 57079023, "link": "https://stackoverflow.com/questions/57079023/undefined-referenced-when-building-a-simple-qt-project", "title": "Undefined referenced when building a simple QT project", "body": "<p>I cannot compile a simple <code>main.cpp</code> file using CLion</p>\n\n<pre><code>#include &lt;QWidget&gt;\n#include &lt;QApplication&gt;\n#include &lt;QPushButton&gt;\n#include &lt;QDebug&gt;\n#include &lt;QLabel&gt;\n\nint main(int argc, char** argv) {\n    QApplication application(argc, argv);\n    QLabel *label = new QLabel(\"Hello QT!\");\n    label-&gt;show();\n    int res = application.exec();\n    delete label;\n    return res;\n}\n</code></pre>\n\n<p>this is the output</p>\n\n<pre><code>====================[ Build | Lab5_autogen | Debug ]============================\nC:\\Users\\user\\.CLion2019.1\\system\\cygwin_cmake\\bin\\cmake.exe --build \"/cygdrive/d/user/workspace/CLionProjects/PDS_Cpp/Laboratorio 5/cmake-build-debug\" --target Lab5_autogen -- -j 2\n[100%] Automatic MOC and UIC for target Lab5\n[100%] Built target Lab5_autogen\n\nBuild finished\n\n====================[ Build | Lab5 | Debug ]====================================\nC:\\Users\\user\\.CLion2019.1\\system\\cygwin_cmake\\bin\\cmake.exe --build \"/cygdrive/d/user/workspace/CLionProjects/PDS_Cpp/Laboratorio 5/cmake-build-debug\" --target Lab5 -- -j 2\n[ 25%] Automatic MOC and UIC for target Lab5\n[ 25%] Built target Lab5_autogen\n[ 50%] Linking CXX executable Lab5.exe\nCMakeFiles/Lab5.dir/main.cpp.o: In function `QTypedArrayData&lt;unsigned short&gt;::deallocate(QArrayData*)':\nC:/Qt/5.12.3/mingw73_64/include/QtCore/qarraydata.h:239: undefined reference to `QArrayData::deallocate(QArrayData*, unsigned long, unsigned long)'\nC:/Qt/5.12.3/mingw73_64/include/QtCore/qarraydata.h:239:(.text$_ZN15QTypedArrayDataItE10deallocateEP10QArrayData[_ZN15QTypedArrayDataItE10deallocateEP10QArrayData]+0x1c): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `QArrayData::deallocate(QArrayData*, unsigned long, unsigned long)'\ncollect2: error: ld returned 1 exit status\nmake[3]: *** [CMakeFiles/Lab5.dir/build.make:103: Lab5.exe] Error 1\nmake[2]: *** [CMakeFiles/Makefile2:73: CMakeFiles/Lab5.dir/all] Error 2\nmake[1]: *** [CMakeFiles/Makefile2:85: CMakeFiles/Lab5.dir/rule] Error 2\nmake: *** [Makefile:118: Lab5] Error 2\n</code></pre>\n\n<p><code>CMakeLists.txt</code></p>\n\n<pre><code>cmake_minimum_required(VERSION 3.14)\nproject(Lab5)\n\nset(CMAKE_CXX_STANDARD 17)\n\nset(CMAKE_AUTOMOC ON)\nset(CMAKE_AUTOUIC ON)\nset(CMAKE_AUTORCC ON)\n\nfind_package(Qt5Core REQUIRED)\nfind_package(Qt5Gui REQUIRED)\nfind_package(Qt5Widgets REQUIRED)\nfind_package(Qt5Charts REQUIRED)\n\nlist(APPEND LIBRARIES\n        Qt5::Core\n        Qt5::Gui\n        Qt5::Widgets\n        Qt5::Charts)\nlist(REMOVE_DUPLICATES LIBRARIES)\n\nadd_executable(Lab5 \"main.cpp\")\ntarget_link_libraries(Lab5 ${LIBRARIES})\n</code></pre>\n\n<p>and I've added this line</p>\n\n<pre><code>-DCMAKE_PREFIX_PATH=C:\\Qt\\5.12.3\\mingw73_64\\lib\\cmake\n</code></pre>\n\n<p>in <code>File -&gt; Settings -&gt; Build, Execution, Deployment -&gt; CMake -&gt; CMake options</code></p>\n\n<p>I'm pretty sure I don't need a <code>.pro</code> file, my teacher was able to compile this project without it.</p>\n\n<p><strong>UPDATE</strong>\nI've set MinGW as the default compiler using\n<code>C:\\Qt\\Tools\\mingw730_64</code></p>\n\n<p>but the window is not created and I get this output</p>\n\n<pre><code>\"D:\\user\\workspace\\CLionProjects\\PDS_Cpp\\Laboratorio 5\\cmake-build-debug\\Lab5.exe\"\n\nProcess finished with exit code -1073741515 (0xC0000135)\n</code></pre>\n\n<p>Previously I was compiling using cygwin</p>\n"}, {"tags": ["c++", "getline"], "comments": [{"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1563375952, "post_id": 57078945, "comment_id": 100681078, "body": "what is wrong with <code>std::getline</code>? You have added such tag."}, {"owner": {"reputation": 123, "user_id": 9274390, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uuGQOBM-_20/AAAAAAAAAAI/AAAAAAAAAEQ/EAvwgtPDOpA/photo.jpg?sz=128", "display_name": "incnnu", "link": "https://stackoverflow.com/users/9274390/incnnu"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1563376186, "post_id": 57078945, "comment_id": 100681214, "body": "When I use getline(line, word, &#39; &#39;) it views New York as two words. I want to put New York in 1 string."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1563378398, "post_id": 57078945, "comment_id": 100682507, "body": "why you use space argument? Don&#39;t you have each entry in separate line? Default value for third argument should just do the job."}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 9274390, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uuGQOBM-_20/AAAAAAAAAAI/AAAAAAAAAEQ/EAvwgtPDOpA/photo.jpg?sz=128", "display_name": "incnnu", "link": "https://stackoverflow.com/users/9274390/incnnu"}, "edited": false, "score": 0, "creation_date": 1563376439, "post_id": 57079066, "comment_id": 100681362, "body": "Thanks that&#39;s helpful! What can I do if the abbreviations differ in length though?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 123, "user_id": 9274390, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uuGQOBM-_20/AAAAAAAAAAI/AAAAAAAAAEQ/EAvwgtPDOpA/photo.jpg?sz=128", "display_name": "incnnu", "link": "https://stackoverflow.com/users/9274390/incnnu"}, "edited": false, "score": 0, "creation_date": 1563376525, "post_id": 57079066, "comment_id": 100681412, "body": "@incnnu Do a reverse search for the &quot;first&quot; space in the string and split it there."}, {"owner": {"reputation": 123, "user_id": 9274390, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uuGQOBM-_20/AAAAAAAAAAI/AAAAAAAAAEQ/EAvwgtPDOpA/photo.jpg?sz=128", "display_name": "incnnu", "link": "https://stackoverflow.com/users/9274390/incnnu"}, "edited": false, "score": 0, "creation_date": 1563381257, "post_id": 57079066, "comment_id": 100684082, "body": "So I&#39;ve tried splitting the line at three characters from the end (since each line ends with \\n) in a while loop but of course that&#39;s not working for the last line in the file since there is no \\n. Also I&#39;ve tried using abbreviation = line.substr(line.find_last_of(&#39; &#39;)+1, 2); but it&#39;s not giving me the expected string. What&#39;s my mistake here?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 123, "user_id": 9274390, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uuGQOBM-_20/AAAAAAAAAAI/AAAAAAAAAEQ/EAvwgtPDOpA/photo.jpg?sz=128", "display_name": "incnnu", "link": "https://stackoverflow.com/users/9274390/incnnu"}, "edited": false, "score": 0, "creation_date": 1563381601, "post_id": 57079066, "comment_id": 100684248, "body": "@incnnu If you use <code>std::getline</code> to read into a <code>std::string</code> there won&#39;t be a newline at the end."}, {"owner": {"reputation": 123, "user_id": 9274390, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uuGQOBM-_20/AAAAAAAAAAI/AAAAAAAAAEQ/EAvwgtPDOpA/photo.jpg?sz=128", "display_name": "incnnu", "link": "https://stackoverflow.com/users/9274390/incnnu"}, "edited": false, "score": 0, "creation_date": 1563383854, "post_id": 57079066, "comment_id": 100685281, "body": "I do, but when I use while(getline(myIfStream, line) {cout &lt;&lt; line;}; each line is printed in a new line in the console. Where is it getting this newline from?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 123, "user_id": 9274390, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uuGQOBM-_20/AAAAAAAAAAI/AAAAAAAAAEQ/EAvwgtPDOpA/photo.jpg?sz=128", "display_name": "incnnu", "link": "https://stackoverflow.com/users/9274390/incnnu"}, "edited": false, "score": 0, "creation_date": 1563384472, "post_id": 57079066, "comment_id": 100685514, "body": "@incnnu How do you open the file, as a binary or text file? This new problem seems like a good issue for a new question. But please then include a proper <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1563376190, "creation_date": 1563376190, "answer_id": 57079066, "question_id": 57078945, "link": "https://stackoverflow.com/questions/57078945/parse-string-with-delimiter-whitespace-but-having-strings-include-whitespace-as/57079066#57079066", "title": "Parse string with delimiter whitespace but having strings include whitespace as well?", "body": "<p>You know that the abbreviation is always two characters.</p>\n\n<p>So you can <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\">read the whole line</a>, and split it at two characters from the end (probably using <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/substr\" rel=\"nofollow noreferrer\"><code>substr</code></a>).</p>\n\n<p>Then <a href=\"https://en.wikipedia.org/wiki/Trimming_(computer_programming)\" rel=\"nofollow noreferrer\">trim</a> the first string and you have two nice strings for the name and abbreviation.</p>\n"}, {"tags": [], "owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "is_accepted": false, "score": 0, "last_activity_date": 1563437137, "last_edit_date": 1563437137, "creation_date": 1563383282, "answer_id": 57081020, "question_id": 57078945, "link": "https://stackoverflow.com/questions/57078945/parse-string-with-delimiter-whitespace-but-having-strings-include-whitespace-as/57081020#57081020", "title": "Parse string with delimiter whitespace but having strings include whitespace as well?", "body": "<p>The systematic way is to analyze the all possible input data and then search for a pattern in the text. In your case, we analyze the problem and find out that</p>\n\n<ul>\n<li>at the end of the string we have some consecutive uppercase letters</li>\n<li>before that we have the state's name</li>\n</ul>\n\n<p>So, if we search for the state abbreviation pattern and split that of, then the full name of the state will be available. But maybe with trailing and leading spaces. This we will remove and then the result is there.</p>\n\n<p>For searching we will use a <code>std::regex</code>. The pattern is: 1 or more uppercase letters followed by 0 or more white spaces, followed by the end of the line. The regular expressions for that is: <code>\"([A-Z]+)\\\\s*$\"</code></p>\n\n<p>When this is available, the prefix of the result contains the full statename. We will remove leading and trailing spaces and that's it.</p>\n\n<p>Please see:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;regex&gt;\n\nstd::istringstream textFile(R\"(   Florida FL\n  Nevada      NV\nNew York     NY)\");\n\nstd::regex regexStateAbbreviation(\"([A-Z]+)\\\\s*$\");\n\nint main()\n{\n    // Split of some parts\n    std::smatch stateAbbreviationMatch{};\n    std::string line{};\n\n    while (std::getline(textFile, line)) {\n        if (std::regex_search(line, stateAbbreviationMatch, regexStateAbbreviation))\n        {\n            // Get the state\n            std::string state(stateAbbreviationMatch.prefix());\n            // Remove leading and trailing spaces\n            state = std::regex_replace(state, std::regex(\"^ +| +$|( ) +\"), \"$1\");\n\n            // Get the state abbreviation\n            std::string stateabbreviation(stateAbbreviationMatch[0]);\n\n            // Print Result\n            std::cout &lt;&lt; stateabbreviation &lt;&lt; ' ' &lt;&lt; state &lt;&lt; '\\n';\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 9274390, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uuGQOBM-_20/AAAAAAAAAAI/AAAAAAAAAEQ/EAvwgtPDOpA/photo.jpg?sz=128", "display_name": "incnnu", "link": "https://stackoverflow.com/users/9274390/incnnu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1563437137, "creation_date": 1563375772, "last_edit_date": 1563375844, "question_id": 57078945, "link": "https://stackoverflow.com/questions/57078945/parse-string-with-delimiter-whitespace-but-having-strings-include-whitespace-as", "title": "Parse string with delimiter whitespace but having strings include whitespace as well?", "body": "<p>I have a text file with state names and their respective abbreviations. It looks something like this:</p>\n\n<pre><code>Florida FL\nNevada      NV\nNew York     NY\n</code></pre>\n\n<p>So the number of whitespaces between state name and abbreviation differs. I want to extract the name and abbreviation and I thought about using getline with whitespace as a delimiter but I have problems with the whitespace in names like \"New York\". What function could I use instead?</p>\n"}, {"tags": ["c++", "linux", "bash", "vim"], "comments": [{"owner": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "edited": false, "score": 1, "creation_date": 1563382888, "post_id": 57078938, "comment_id": 100684818, "body": "<a href=\"https://stackoverflow.com/questions/57074531/vim-command-to-insert-multiline-text-with-argument\" title=\"vim command to insert multiline text with argument\">stackoverflow.com/questions/57074531/&hellip;</a> Basically, you need only to add a couple of Ex commands to create/write files/buffers."}, {"owner": {"reputation": 10260, "user_id": 7939871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1199ba5dde05e4083823a058c5ac6bed?s=128&d=identicon&r=PG", "display_name": "L&#233;a Gris", "link": "https://stackoverflow.com/users/7939871/l%c3%a9a-gris"}, "edited": false, "score": 1, "creation_date": 1563383818, "post_id": 57078938, "comment_id": 100685250, "body": "Also you could look at creating and using templates with <code>vim</code> <a href=\"https://shapeshed.com/vim-templates/#using-templates-in-vim\" rel=\"nofollow noreferrer\">shapeshed.com/vim-templates/#using-templates-in-vim</a>"}, {"owner": {"reputation": 2925, "user_id": 2544873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1B6wh.png?s=128&g=1", "display_name": "Tinmarino", "link": "https://stackoverflow.com/users/2544873/tinmarino"}, "edited": false, "score": 0, "creation_date": 1563400527, "post_id": 57078938, "comment_id": 100692151, "body": "UltiSnip plugin is the bazooka for templates (here called snippets): <a href=\"https://github.com/vim-scripts/UltiSnips\" rel=\"nofollow noreferrer\">github.com/vim-scripts/UltiSnips</a>"}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 12369941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ce0d0638c5a69d9b46a999b1fc24dec?s=128&d=identicon&r=PG&f=1", "display_name": "CharMstr", "link": "https://stackoverflow.com/users/12369941/charmstr"}, "edited": false, "score": 1, "creation_date": 1607655930, "post_id": 57093134, "comment_id": 115347298, "body": "I found this to be a really good approach, so i upvoted it. i also proposed a variation i did as well."}], "tags": [], "owner": {"reputation": 354, "user_id": 8467526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b8314397bd54de94709d208447f42ed?s=128&d=identicon&r=PG&f=1", "display_name": "Saif Faidi", "link": "https://stackoverflow.com/users/8467526/saif-faidi"}, "is_accepted": true, "score": 5, "last_activity_date": 1563450947, "last_edit_date": 1563450947, "creation_date": 1563448198, "answer_id": 57093134, "question_id": 57078938, "link": "https://stackoverflow.com/questions/57078938/how-do-i-add-a-vim-command-generating-a-class-source-and-header-files-for-c/57093134#57093134", "title": "How do I add a vim command generating a class source and header files for C++?", "body": "<p>below a function, i added to my <code>~/.vimrc</code> file </p>\n\n<pre><code> \"C++ Class Generator                                                                                                    \n function! Class(ClassName)                                                                                              \n    \"==================  editing header file =====================                                                       \n     let header = a:ClassName.\".h\"                                                                                                                                                                                                                                                                                        \n     :vsp %:h/.h                                                                                                                                                                                                                             \n     call append(0,\"#ifndef \".toupper(a:ClassName).\"_H\")                                                                 \n     call append(1,\"#define \".toupper(a:ClassName).\"_H\")                                                           \n     call append(2,\" \")                                                                                                  \n     call append(3,\"class \".a:ClassName )                                                                                \n     call append(4, \"{\")                                                                                                 \n     call append(5, \"   public:\")                                                                                        \n     call append(6, \"      \".a:ClassName.\"();\")                                                                          \n     call append(7, \"      virtual ~\".a:ClassName.\"();\")                                                                 \n     call append(8, \"   protected:\")                                                                                     \n     call append(9, \"   private:\")                                                                                       \n     call append(10, \"};\")                                                                                               \n     call append(11,\"#endif // \".toupper(a:ClassName).\"_H\")                                                              \n     :execute 'write' header                                                                                             \n   \"================== editing source file ========================                                                      \n     let src    = a:ClassName.\".cpp\"                                                                                     \n     :vsp %:h/.cpp                                                                                                                                                                                                                     \n     call append(0,\"#include \".a:ClassName.\".h\")                                                                          \n     call append(1,\" \")                                                                                                   \n     call append(2,a:ClassName.\"::\".a:ClassName.\"()\")                                                                           \n     call append(3,\"{\")                                                                                                   \n     call append(4,\"//ctor \")                                                                                             \n     call append(5,\"}\")                                                                                                   \n     call append(6,\" \")                                                                                                   \n     call append(7,\" \")                                                                                                   \n     call append(8,a:ClassName.\"::~\".a:ClassName.\"()\")                                                                         \n     call append(9,\"{\")                                                                                                   \n     call append(10,\"//dtor \")                                                                                            \n     call append(11,\"}\")                                                                                                  \n     :execute 'write' src\nendfunction    \n</code></pre>\n\n<blockquote>\n  <p>open <strong>vim</strong> and type <code>:call Class(\"toto\")</code> </p>\n</blockquote>\n\n<p>your vim will be splited to 3 parts:</p>\n\n<ol>\n<li>you current file</li>\n<li>toto.h</li>\n<li>toto.cpp\nwith the templates mentioned above</li>\n</ol>\n\n<blockquote>\n  <p>if you want to cutomize the command <code>:call Class(\"toto\")</code> to <code>:Class toto</code> \n  add this line in your <code>~/.vimrc</code> :</p>\n</blockquote>\n\n<pre><code>command! -nargs=1 Class call Class(&lt;f-args&gt;) \n</code></pre>\n\n<p><strong>result :</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/BOXbn.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/BOXbn.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 12369941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ce0d0638c5a69d9b46a999b1fc24dec?s=128&d=identicon&r=PG&f=1", "display_name": "CharMstr", "link": "https://stackoverflow.com/users/12369941/charmstr"}, "is_accepted": false, "score": 0, "last_activity_date": 1607656586, "creation_date": 1607656586, "answer_id": 65245324, "question_id": 57078938, "link": "https://stackoverflow.com/questions/57078938/how-do-i-add-a-vim-command-generating-a-class-source-and-header-files-for-c/65245324#65245324", "title": "How do I add a vim command generating a class source and header files for C++?", "body": "<p>This is a slight variation of the work of Saif Faidi.</p>\n<p>The only thing it brings:</p>\n<ul>\n<li>Starting in insert mode in the desired spot.</li>\n<li>Not using line numbers. So that insertions can be relative to where the\ncursor is. In my case When creating a file with the extension .hpp or\n.cpp, some automatic headers and inclusion protections are inserted.\nThen those lines take effect:</li>\n</ul>\n<pre><code>    &quot;C++ CLASS GENERATOR: OPENING 2 NEW FILES\nfunction! ClassNew(ClassName)\n    &quot;==================  editing source file =================================\n    execute &quot;vsp %:h/&quot; . a:ClassName . &quot;.class.cpp&quot;\n    &quot;At this stage the autocomands for this filetype are done.\n    &quot;   example: inserting the header, and the ifndef... Then:\n    :execute &quot;normal! a#include \\&quot;&quot; . a:ClassName . &quot;.class.hpp\\&quot;\\&lt;cr&gt;\\&lt;cr&gt;&quot;\n    :execute &quot;normal! a&quot; . a:ClassName . &quot;::&quot; . a:ClassName .&quot;(void)\\&lt;cr&gt;{\\&lt;cr&gt;&quot;\n    :execute &quot;normal! a\\&lt;tab&gt;return ;\\&lt;cr&gt;&quot;\n    :execute &quot;normal! a}\\&lt;cr&gt;\\&lt;cr&gt;&quot;\n    :execute &quot;normal! a&quot; . a:ClassName . &quot;::~&quot; . a:ClassName .&quot;(void)\\&lt;cr&gt;{\\&lt;cr&gt;&quot;\n    :execute &quot;normal! a\\&lt;tab&gt;return ;\\&lt;cr&gt;&quot;\n    :execute &quot;normal! a}&quot;\n    &quot;Comment this line if you dont want to save files straight away.\n    &quot;:execute 'write'\n\n    &quot;==================  editing header file =================================\n    execute &quot;vsp %:h/&quot; . a:ClassName . &quot;.class.hpp&quot;\n    &quot;At this stage the autocomands for this filetype are done.\n    &quot;   example: inserting the header, and the ifndef... Then:\n    :execute &quot;normal! a&quot; . &quot;class &quot; . a:ClassName .&quot;\\&lt;cr&gt;{\\&lt;cr&gt;&quot;\n    :execute &quot;normal! a\\&lt;tab&gt;public:\\&lt;cr&gt;&quot;\n    :execute &quot;normal! a\\&lt;tab&gt;\\&lt;tab&gt;&quot; . a:ClassName . &quot;(void);\\&lt;cr&gt;&quot;\n    :execute &quot;normal! a\\&lt;tab&gt;\\&lt;tab&gt;~&quot; . a:ClassName . &quot;(void);\\&lt;cr&gt;\\&lt;cr&gt;&quot;\n    :execute &quot;normal! a\\&lt;tab&gt;protected:\\&lt;cr&gt;\\&lt;cr&gt;&quot;\n    :execute &quot;normal! a\\&lt;tab&gt;private:\\&lt;cr&gt;\\&lt;cr&gt;&quot;\n    :execute &quot;normal! a};&quot;\n    :execute &quot;normal! ka\\&lt;tab&gt;\\&lt;tab&gt;&quot;\n    &quot;Comment out this line if you dont want to start in insert mode\n    :startinsert!\n    &quot;Comment this line if you dont want to save files straight away.\n    :execute 'write'\nendfunction\n</code></pre>\n"}], "owner": {"reputation": 354, "user_id": 8467526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b8314397bd54de94709d208447f42ed?s=128&d=identicon&r=PG&f=1", "display_name": "Saif Faidi", "link": "https://stackoverflow.com/users/8467526/saif-faidi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 502, "favorite_count": 0, "accepted_answer_id": 57093134, "answer_count": 2, "score": 3, "last_activity_date": 1607656586, "creation_date": 1563375744, "last_edit_date": 1563461440, "question_id": 57078938, "link": "https://stackoverflow.com/questions/57078938/how-do-i-add-a-vim-command-generating-a-class-source-and-header-files-for-c", "title": "How do I add a vim command generating a class source and header files for C++?", "body": "<p>When I type <code>:Class Toto</code> from <strong>VIM command line</strong>, I want to get the header and the source file with their templates like what any editor do when we create a new class. So if</p>\n\n<p><strong>Input</strong> \n<code>:Class Toto</code></p>\n\n<p>then  </p>\n\n<p><strong>Output</strong>: </p>\n\n<blockquote>\n  <p>toto.h</p>\n</blockquote>\n\n<pre><code>#ifndef TOTO_H\n#define TOTO_H\n\nclass toto\n{\n    public:\n        toto();\n        virtual ~toto();\n    protected:\n    private:\n};\n\n#endif // TOTO_H\n</code></pre>\n\n<blockquote>\n  <p>toto.cpp</p>\n</blockquote>\n\n<pre><code>#include \"toto.h\"\n\ntoto::toto()\n{\n    //ctor\n}\n\n\ntoto::~toto()\n{\n    //dtor\n}\n</code></pre>\n\n<p>I get:</p>\n\n<p><code>./src/toto.c</code></p>\n\n<p><code>./include/toto.h</code></p>\n\n<p>generated automatically (with <code>src</code> and <code>include</code> folders  will be perfect)</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1563375782, "post_id": 57078811, "comment_id": 100680987, "body": "Unrelated nitpicking: Usually all <a href=\"https://en.wikipedia.org/wiki/Delimiter-separated_values\" rel=\"nofollow noreferrer\">delimiter-separated values</a> files are still called <a href=\"https://en.wikipedia.org/wiki/Comma-separated_values\" rel=\"nofollow noreferrer\">CSV</a> files, no matter the actual separator."}], "answers": [{"tags": [], "owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "is_accepted": false, "score": 0, "last_activity_date": 1563387524, "creation_date": 1563387524, "answer_id": 57082072, "question_id": 57078811, "link": "https://stackoverflow.com/questions/57078811/tsv-file-parser-for-c-ends-abruptly-when-empty-cell-is-present/57082072#57082072", "title": "Tsv file parser for c++ ends abruptly when empty cell is present", "body": "<p>This is a typical example for reading records from a file.</p>\n\n<p>We will choose an Object Oriented Approach and put all data into a struct, and, since the struct should know how to read and write its data, add an extractor and inserter opererator.</p>\n\n<p>The extractor will read a complete line and then put the data into the structures member. In case of an errror, default values can be used.</p>\n\n<p>In main, we just define a vector of Roster and use the range constructor, to read the complete input file during the variable definition.</p>\n\n<p>Afterwards, we print the result.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n#include &lt;iterator&gt;\n\n// Test Data. Same as reading from file\nstd::istringstream testFile(R\"#(1   Andy 17   A\n2   Drew 16   B\n3   Brad 17   B\n4   Cam       A\n5   Sam  18   B\n)#\");\n\n\nstruct Roster\n{\n    // Roster Data\n    size_t No{};    std::string Name{}; size_t Age{};   char Grade{};\n\n    // Extractor operator &gt;&gt; for Roster\n    friend std::istream&amp; operator &gt;&gt; (std::istream&amp; is, Roster&amp; r) {\n\n        std::string line{};             // Here we will store the read line\n        std::getline(is, line);         // Read complete line\n        std::istringstream iss(line);   // Copy to a istringstream for extraction\n        if (!(iss &gt;&gt; r.No &gt;&gt; r.Name &gt;&gt; r.Age &gt;&gt; r.Grade)) {     // Extract\n            // In case of error: Reset all values\n            r.No = 0; r.Name = \"ERROR\"; r.Age = 0; r.Grade = '#';\n        };\n        return is;\n    }\n    // Inserter operator &lt;&lt; . Print space delimited data\n    friend std::ostream&amp; operator &lt;&lt; (std::ostream&amp; os, const Roster&amp; r) {\n        return os &lt;&lt; r.No &lt;&lt; ' ' &lt;&lt; r.Name &lt;&lt; ' ' &lt;&lt; r.Age &lt;&lt; ' ' &lt;&lt; r.Grade;\n    }\n};\n\nint main()\n{\n    // Read complete CSV\n    std::vector&lt;Roster&gt; roster{ std::istream_iterator&lt;Roster&gt;(testFile), std::istream_iterator&lt;Roster&gt;() };\n\n    // Copy all data to output\n    std::copy(roster.begin(), roster.end(), std::ostream_iterator&lt;Roster&gt;(std::cout, \"\\n\"));\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 6919830, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9c683f7caa7954b9772cea00210e62bd?s=128&d=identicon&r=PG&f=1", "display_name": "anush95", "link": "https://stackoverflow.com/users/6919830/anush95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1563387524, "creation_date": 1563375381, "question_id": 57078811, "link": "https://stackoverflow.com/questions/57078811/tsv-file-parser-for-c-ends-abruptly-when-empty-cell-is-present", "title": "Tsv file parser for c++ ends abruptly when empty cell is present", "body": "<p>I'm trying to parse a .tsv file and store the values of each cell of the row in a struct. Each row forms the struct and is appended to a list. If a cell is empty the <code>getline</code> while loop ends abruptly</p>\n\n<p>The .tsv file looks like this:</p>\n\n<pre><code>No Name Age Grade\n1   Andy 17   A\n2   Drew 16   B\n3   Brad 17   B\n4   Cam       A\n5   Sam  18   B\n</code></pre>\n\n<p>Sample code </p>\n\n<pre><code>std::ifstream tsvFile(filePath);\nif (!tsvFile.good()) return;\nfor (std::string line; std::getline(tsvFile, line); )\n{\n  example item;\n  tsvFile &gt;&gt; example.s_no &gt;&gt; example.name &gt;&gt; example.age &gt;&gt; example.grade;\n  tsv_list.push_back(item);\n}\ntsvFile.close();\n</code></pre>\n\n<p>Loops through all rows and not stop abruptly.Is there a better way to parse a tsv line by line and add a specific tab delimiter ? I tried using <code>line</code> but the value doesn't seem correct. Printing <code>line</code> gives me an integer number and not the entire row every time I iterate through.</p>\n"}, {"tags": ["c++", "language-lawyer", "c++20"], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1563375536, "post_id": 57078763, "comment_id": 100680822, "body": "Very nice.  Now we can uplift static asserts out of the function body and make it part of the signature."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 3, "creation_date": 1563375604, "post_id": 57078763, "comment_id": 100680865, "body": "Indeed, or choose to write an overload instead of <code>if constexpr</code>"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1563382904, "post_id": 57078763, "comment_id": 100684828, "body": "I wish I could accept both answers because they&#39;re of such high quality, but I felt that NicolBolas&#39; answer was more in line with what the feature is for. I&#39;m sorry that you&#39;ll just have to settle for an upvote."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 338, "user_id": 1318397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/38cd54780096d90dfe71e7d0d412ff62?s=128&d=identicon&r=PG", "display_name": "jondoe", "link": "https://stackoverflow.com/users/1318397/jondoe"}, "edited": false, "score": 0, "creation_date": 1619014006, "post_id": 57078763, "comment_id": 118777216, "body": "@jondoe If your compiler does not compile it does not mean that the code is invalid. It means only that you do not yet understand this and nothing more."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 338, "user_id": 1318397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/38cd54780096d90dfe71e7d0d412ff62?s=128&d=identicon&r=PG", "display_name": "jondoe", "link": "https://stackoverflow.com/users/1318397/jondoe"}, "edited": false, "score": 0, "creation_date": 1619014888, "post_id": 57078763, "comment_id": 118777669, "body": "@jondoe You need to use a more modern compiler that supports the require clause."}, {"owner": {"reputation": 338, "user_id": 1318397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/38cd54780096d90dfe71e7d0d412ff62?s=128&d=identicon&r=PG", "display_name": "jondoe", "link": "https://stackoverflow.com/users/1318397/jondoe"}, "edited": false, "score": 0, "creation_date": 1619016699, "post_id": 57078763, "comment_id": 118778559, "body": "@VladfromMoscow is gcc 10.3 modern enough?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 338, "user_id": 1318397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/38cd54780096d90dfe71e7d0d412ff62?s=128&d=identicon&r=PG", "display_name": "jondoe", "link": "https://stackoverflow.com/users/1318397/jondoe"}, "edited": false, "score": 0, "creation_date": 1619021551, "post_id": 57078763, "comment_id": 118780785, "body": "@jondoe If the compiler supports the require clause the code should be compiled. The code was compiled by many participants who read the answer except only you."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 338, "user_id": 1318397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/38cd54780096d90dfe71e7d0d412ff62?s=128&d=identicon&r=PG", "display_name": "jondoe", "link": "https://stackoverflow.com/users/1318397/jondoe"}, "edited": false, "score": 0, "creation_date": 1619038668, "post_id": 57078763, "comment_id": 118787629, "body": "@jondoe It seems that when the post was written ( in 2017) the concept of the requires was different than it is now defined in the C++ 20 and compilers compiled the program."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 20, "last_activity_date": 1563378239, "last_edit_date": 1563378239, "creation_date": 1563375269, "answer_id": 57078763, "question_id": 57078643, "link": "https://stackoverflow.com/questions/57078643/what-is-the-point-of-a-constraint-expression-on-a-non-templated-function/57078763#57078763", "title": "What is the point of a constraint expression on a non-templated function?", "body": "<p>Just as a concept consider the following example</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid f( long x ) requires ( sizeof( long ) == sizeof( int ) )\n{\n    std::cout &lt;&lt; \"Bye \" &lt;&lt; x &lt;&lt; '\\n';\n}\n\nvoid f( long long x ) requires ( sizeof( long ) == sizeof( long long ) )\n{\n    std::cout &lt;&lt; \"Hello \" &lt;&lt; x &lt;&lt; '\\n';\n}\n\nint main() \n{\n    f( 0l );\n}\n</code></pre>\n\n<p>If <code>sizeof( long ) == sizeof( long long )</code> then the program output will be</p>\n\n<pre><code>Hello 0\n</code></pre>\n\n<p>Otherwise</p>\n\n<pre><code>Bye 0\n</code></pre>\n\n<p>For example you can use such an approach in a function that calculates the factorial to restrict the number of a loop iterations or to throw an exception.</p>\n\n<p>Here is a demonstrative program.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdexcept&gt;\n\nunsigned long factorial( unsigned long n ) noexcept( false ) \n    requires ( sizeof( unsigned long ) == sizeof( unsigned int ) )\n{\n    const unsigned long MAX_STEPS = 12;\n\n    if ( MAX_STEPS &lt; n ) throw std::out_of_range( \"Too big value.\" );\n\n    unsigned long f = 1;\n\n    for ( unsigned long i = 1; i &lt; n; i++ ) f *= ( i + 1 );\n\n    return f;\n}\n\nunsigned long long factorial( unsigned long long n ) noexcept( false ) \n    requires ( sizeof( unsigned long ) == sizeof( unsigned long long ) )\n{\n    const unsigned long long MAX_STEPS = 20;\n\n    if ( MAX_STEPS &lt; n ) throw std::out_of_range( \"Too big value.\" );\n\n    unsigned long f = 1;\n\n    for ( unsigned long long i = 1; i &lt; n; i++ ) f *= ( i + 1 );\n\n    return f;\n}\n\nint main() \n{\n    unsigned long n = 20;\n\n    try\n    {\n        std::cout &lt;&lt; factorial( n ) &lt;&lt; '\\n';\n    }\n    catch ( const std::out_of_range &amp;ex )\n    {\n        std::cout &lt;&lt; ex.what() &lt;&lt; '\\n';\n    }\n}\n</code></pre>\n\n<p>Its output might be either</p>\n\n<pre><code>2432902008176640000\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Too big value.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 15, "last_activity_date": 1563456521, "last_edit_date": 1563456521, "creation_date": 1563376195, "answer_id": 57079071, "question_id": 57078643, "link": "https://stackoverflow.com/questions/57078643/what-is-the-point-of-a-constraint-expression-on-a-non-templated-function/57079071#57079071", "title": "What is the point of a constraint expression on a non-templated function?", "body": "<p>One of the main points of constraining non-template functions is to be able to write constraints to non-template members of template classes. For example, you might have some type like this:</p>\n\n<pre><code>template&lt;typename T&gt;\nclass value\n{\npublic:\n  value(const T&amp; t);\n  value(T&amp;&amp; t);\n\nprivate:\n  T t_;\n};\n</code></pre>\n\n<p>Now, you want <code>value</code> to be copyable/moveable from <code>T</code>. But really, you want it to be copyable/moveable from <code>T</code> <em>only</em> as far as <code>T</code> itself is copyable/moveable. So, how do you do it?</p>\n\n<p>Pre-constraints, you would need to write a bunch of meta-programming hackery. Maybe you make these constructors templates, which require that the given type <code>U</code> is the same as <code>T</code>, in addition to the copy/move requirement. Or you might have to write a base class that you inherit from, which has different specializations based on the copy/moveability of <code>T</code>.</p>\n\n<p>Post-constraints, you do this:</p>\n\n<pre><code>template&lt;typename T&gt;\nclass value\n{\npublic:\n  value(const T&amp; t) requires is_copy_constructible_v&lt;T&gt; : t_(t) {}\n  value(T&amp;&amp; t) requires is_move_constructible_v&lt;T&gt; : t_(std::move(t)) {}\n\nprivate:\n  T t_;\n};\n</code></pre>\n\n<p>No hackery. No applying templates to functions that don't need to be templates. It just works, and it's easy for the user to understand what is going on.</p>\n\n<p>This is especially important for functions which <em>cannot</em> be templates. In order for a constructor to be considered a copy or move constructor, it <em>cannot</em> be a template. Same goes for copy/move assignment operators. But such things can have constraints.</p>\n"}], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 598, "favorite_count": 5, "accepted_answer_id": 57079071, "answer_count": 2, "score": 21, "last_activity_date": 1563456521, "creation_date": 1563374898, "question_id": 57078643, "link": "https://stackoverflow.com/questions/57078643/what-is-the-point-of-a-constraint-expression-on-a-non-templated-function", "title": "What is the point of a constraint expression on a non-templated function?", "body": "<p>[temp.constr.decl] says that we can constrain a template or a function with a <em>constraint expression</em>.</p>\n\n<p>Declarators [dcl.decl] tells us that, for functions, we may add an optional <em>trailing requires clause</em> to constrain it, and the standard <a href=\"https://github.com/cplusplus/draft/blob/master/papers/n4820.pdf\" rel=\"noreferrer\">draft n4820</a> even gives these (seemingly pointless) examples: </p>\n\n<pre><code>void f1(int a) requires true;\nauto f2(int a) -&gt; bool requires true;\n</code></pre>\n\n<p>I understand that constraining a template or a concept is useful, but I fail to see how these constraints are useful for non-templated functions. <strong>What's the point of constraining a non-templated function?</strong></p>\n"}, {"tags": ["c++", "strstr"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1563374209, "post_id": 57078369, "comment_id": 100680070, "body": "Don&#39;t use <code>gets</code>.  It has been removed from both the current C and C++ standards. Besides the <code>using namespace std;</code>, your code looks like straight C code.  If you are actually in a C++ course I would be worried as this is not what C++, or Modern C++ looks like."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1563374227, "post_id": 57078369, "comment_id": 100680079, "body": "@Torebek Zhumabek Specifying this construction  password[] as a function argument is wrong."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1563374228, "post_id": 57078369, "comment_id": 100680080, "body": "<i>&quot;...but it falls...&quot;</i>: How does it fail?"}, {"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1563374230, "post_id": 57078369, "comment_id": 100680082, "body": "<code>strstr</code> takes two arguments, and s.password[] is not valid."}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 11793438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e1e434958fd2a842d2639d18eb586b?s=128&d=identicon&r=PG&f=1", "display_name": "Butuze", "link": "https://stackoverflow.com/users/11793438/butuze"}, "is_accepted": false, "score": 0, "last_activity_date": 1563374510, "creation_date": 1563374510, "answer_id": 57078540, "question_id": 57078369, "link": "https://stackoverflow.com/questions/57078369/strstr-function-misundersandings/57078540#57078540", "title": "strstr function misundersandings", "body": "<blockquote>\n  <p>if (strstr(s.password[])) k=1;</p>\n</blockquote>\n\n<p>What did you want to accomplish with this? strstr() needs two arguments (haystack and needle, meaning that you want to find the needle in the haystack). You only pass one argument, which is wrong.</p>\n\n<p>The correct code will be something like:</p>\n\n<pre><code>if (strstr(s, password) != NULL) k=1;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1563374762, "creation_date": 1563374762, "answer_id": 57078616, "question_id": 57078369, "link": "https://stackoverflow.com/questions/57078369/strstr-function-misundersandings/57078616#57078616", "title": "strstr function misundersandings", "body": "<p>In this expression</p>\n\n<pre><code>strstr(s.password[])\n</code></pre>\n\n<p>there are two errors. The first one is that the separator of arguments is comma while you are using a dot.</p>\n\n<p>The second one is that instead of the construction <code>password[]</code> you have to use the expression <code>password</code></p>\n\n<p>Take into account that the function <code>strstr</code> is not suitable to check whether two strings are equal each other. It is better to use function <code>strcmp</code>.</p>\n\n<p>And the function <code>gets</code> is not supported by the C standard. Use instead function <code>fgets</code>.</p>\n\n<p>And as you are trying to compile the program as a C++ program then use the standard class <code>std::string</code> instead of raw character arrays.</p>\n"}], "owner": {"reputation": 11, "user_id": 8914266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0660c65987efd0d9145d8a63afa8ea34?s=128&d=identicon&r=PG&f=1", "display_name": "Torebek Zhumabek", "link": "https://stackoverflow.com/users/8914266/torebek-zhumabek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1563374762, "creation_date": 1563374030, "question_id": 57078369, "link": "https://stackoverflow.com/questions/57078369/strstr-function-misundersandings", "title": "strstr function misundersandings", "body": "<p>There is a problem with strstr function. I have tried to compile password program, but it falls. Any help would be highly appreciated   </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nusing namespace std;\nint main(){\n    char s[5], password[]=\"kuku\";\n    int i,k=0;\n    for (i=0; !k &amp;&amp; i&lt;3;i++){\n        printf(\"\\ enter password: \\n\");\n        gets(s);\n        if (strstr(s.password[])) k=1;\n    }\n\n    if(k) printf(\"password accepted\");\n    else printf(\"password not accepted\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "ffmpeg", "rtsp"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10264465, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0Ed25ppmkCQ/AAAAAAAAAAI/AAAAAAAAADo/VnaUR1H-E7Y/photo.jpg?sz=128", "display_name": "Ehsan Vahab", "link": "https://stackoverflow.com/users/10264465/ehsan-vahab"}, "edited": false, "score": 0, "creation_date": 1563390756, "post_id": 57080729, "comment_id": 100688344, "body": "Thanks for your response. How can I reduce frame rate in c++ code?"}, {"owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "reply_to_user": {"reputation": 13, "user_id": 10264465, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0Ed25ppmkCQ/AAAAAAAAAAI/AAAAAAAAADo/VnaUR1H-E7Y/photo.jpg?sz=128", "display_name": "Ehsan Vahab", "link": "https://stackoverflow.com/users/10264465/ehsan-vahab"}, "edited": false, "score": 0, "creation_date": 1563415608, "post_id": 57080729, "comment_id": 100695118, "body": "@EhsanVahab: Edited to include answer to your query in the  comment."}], "tags": [], "owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "is_accepted": false, "score": 0, "last_activity_date": 1563415563, "last_edit_date": 1563415563, "creation_date": 1563381934, "answer_id": 57080729, "question_id": 57078249, "link": "https://stackoverflow.com/questions/57078249/ffmpeg-reduce-memory-consumption/57080729#57080729", "title": "ffmpeg reduce memory consumption", "body": "<p>1) <strong>To reduce memory</strong> :</p>\n\n<p>i) Reduce frame rate : use -framerate</p>\n\n<p>ii) Increase compression by selecting longer GOP : use  -g</p>\n\n<p>2) <strong>To scale your input</strong> : use -s switch </p>\n\n<pre><code>ffmpeg -framerate 25 -g 14 -i input.mp4 -vcodec libx264 -s 400x400 http://localhost:1234/out.ffm\n</code></pre>\n\n<p><strong>Edited:</strong></p>\n\n<p>For integrating ffmpeg to your c++ project, these are some of the solutions:</p>\n\n<ol>\n<li>Using <code>system(ffmpeg command line);</code> // Easy</li>\n<li>Use <code>CreatePrcess</code> and pipes to hide console window and show progress in your GUI. // Medium</li>\n<li>Use ffmpeg distributed include files and libraries to integrate in your project. // Need high learning curve</li>\n</ol>\n"}], "owner": {"reputation": 13, "user_id": 10264465, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0Ed25ppmkCQ/AAAAAAAAAAI/AAAAAAAAADo/VnaUR1H-E7Y/photo.jpg?sz=128", "display_name": "Ehsan Vahab", "link": "https://stackoverflow.com/users/10264465/ehsan-vahab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1042, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563415563, "creation_date": 1563373658, "last_edit_date": 1563374328, "question_id": 57078249, "link": "https://stackoverflow.com/questions/57078249/ffmpeg-reduce-memory-consumption", "title": "ffmpeg reduce memory consumption", "body": "<p>I'm developing an application, capturing some ip camera with RTSP protocols and send them to one server.\neverything is going well when the resolution of ip cameras is low but when they're increased the memory consumption of my program goes up suddenly.</p>\n\n<p>I've realized that ffmpeg stores a sequence of frames which we can seek to. \n1.is there any way to reduce the len of that? </p>\n\n<p>2.is it possible to reduce the frame size when the ffmpeg reads the frames from the input(=>ip camera)? the size 400x400 is enough for my app but currently it's 2048</p>\n\n<p>3.or any other way to help me reduce memory usage</p>\n"}, {"tags": ["c++", "bitmap", "pixel"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1563373587, "post_id": 57078206, "comment_id": 100679626, "body": "You may be looking for <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/wingdi/nf-wingdi-getpixel\" rel=\"nofollow noreferrer\"><code>GetPixel</code></a>"}, {"owner": {"reputation": 13, "user_id": 8305040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e49c08decd906b89aa7eb1ab09dcac9?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Santiago", "link": "https://stackoverflow.com/users/8305040/gabriel-santiago"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1563373763, "post_id": 57078206, "comment_id": 100679757, "body": "No, because it&#39;s too slow to my problem."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1563373876, "post_id": 57078206, "comment_id": 100679838, "body": "Then you can use <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/wingdi/nf-wingdi-getdibits\" rel=\"nofollow noreferrer\"><code>GetDIBits</code></a>. This gives you direct access to the bitmap&#39;s pixel buffer."}, {"owner": {"reputation": 13, "user_id": 8305040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e49c08decd906b89aa7eb1ab09dcac9?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Santiago", "link": "https://stackoverflow.com/users/8305040/gabriel-santiago"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1563379844, "post_id": 57078206, "comment_id": 100683361, "body": "I&#39;m trying to use this function but I&#39;m having problems, can we talk somewhere so you can help me? The thing that I&#39;m doing is very interesting."}], "answers": [{"tags": [], "owner": {"reputation": 1239, "user_id": 4452971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/og0oX.png?s=128&g=1", "display_name": "Castorix", "link": "https://stackoverflow.com/users/4452971/castorix"}, "is_accepted": true, "score": 1, "last_activity_date": 1563386446, "creation_date": 1563386446, "answer_id": 57081780, "question_id": 57078206, "link": "https://stackoverflow.com/questions/57078206/how-to-iterate-through-bitmap-pixels/57081780#57081780", "title": "How to iterate through bitmap pixels", "body": "<blockquote>\n  <p>How to iterate through bitmap pixels</p>\n</blockquote>\n\n<p>Use a <strong>DIB section</strong> to get direct  and fast access to pixels</p>\n\n<p>For example, this test replaces all white pixels in Notepad by green pixels =></p>\n\n<p><a href=\"https://i.stack.imgur.com/pp6YB.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pp6YB.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>(result copied to screen for testing)</p>\n\n<pre><code>        HDC hDCScreen = GetDC(NULL);\n        HWND hWndDest = FindWindow(L\"Notepad\", NULL);\n        if (hWndDest)\n        {\n            if (IsIconic(hWndDest))\n            {\n                ShowWindow(hWndDest, SW_RESTORE);\n                Sleep(100);\n            }\n            RECT rect;\n            GetWindowRect(hWndDest, &amp;rect);\n            int nWidth = rect.right - rect.left;\n            int nHeight = rect.bottom - rect.top;\n\n            HDC hDC = GetDC(hWndDest);\n            HDC hCaptureDC = CreateCompatibleDC(hDCScreen);\n            HBITMAP hCaptureBitmap = CreateCompatibleBitmap(hDCScreen, nWidth, nHeight);\n            HGDIOBJ hOldBitmap = SelectObject(hCaptureDC, hCaptureBitmap);\n            PrintWindow(hWndDest, hCaptureDC, PW_RENDERFULLCONTENT);\n            HDC hDCMem = CreateCompatibleDC(hDC);\n            HBITMAP hBitmapOld;\n            BITMAPINFO bi = { 0 };\n            bi.bmiHeader.biSize = sizeof(bi.bmiHeader);\n            bi.bmiHeader.biWidth = nWidth;\n            bi.bmiHeader.biHeight = nHeight;\n            bi.bmiHeader.biPlanes = 1;\n            bi.bmiHeader.biBitCount = 32;\n            bi.bmiHeader.biCompression = BI_RGB;\n            BYTE *pbBitmap;\n            HBITMAP hBitmap = CreateDIBSection(hDCMem, &amp;bi, DIB_RGB_COLORS, (void**)&amp;pbBitmap, NULL, 0);\n            if (hBitmap)\n            {\n                hBitmapOld = (HBITMAP)SelectObject(hDCMem, hBitmap);\n                BitBlt(hDCMem, 0, 0, nWidth, nHeight, hCaptureDC, 0, 0, SRCCOPY);\n\n                RGBQUAD *pRGB;\n                LONG nPixels;\n                for (pRGB = (RGBQUAD *)pbBitmap, nPixels = nWidth * nHeight; nPixels &gt; 0; ++pRGB, --nPixels)\n                {\n                    ULONG nRed = pRGB-&gt;rgbRed;\n                    ULONG nGreen = pRGB-&gt;rgbGreen;\n                    ULONG nBlue = pRGB-&gt;rgbBlue;\n\n                    if (nRed == 255 &amp;&amp; nGreen == 255 &amp;&amp; nBlue == 255)\n                    {\n                        pRGB-&gt;rgbRed = 0;\n                        pRGB-&gt;rgbGreen = 255;\n                        pRGB-&gt;rgbBlue = 0;\n                    }\n                }\n                // Test copy to screen\n                BitBlt(hDCScreen, 0, 0, nWidth, nHeight, hDCMem, 0, 0, SRCCOPY);\n                SelectObject(hDCMem, hBitmapOld);\n                DeleteObject(hBitmap);\n            }\n            DeleteDC(hDCMem);\n\n            hOldBitmap = SelectObject(hCaptureDC, hOldBitmap);\n            DeleteDC(hCaptureDC);\n            DeleteObject(hCaptureBitmap);\n            ReleaseDC(hWndDest, hDC);               \n        }\n        ReleaseDC(NULL, hDCScreen);\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8305040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e49c08decd906b89aa7eb1ab09dcac9?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Santiago", "link": "https://stackoverflow.com/users/8305040/gabriel-santiago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "accepted_answer_id": 57081780, "answer_count": 1, "score": 0, "last_activity_date": 1563432453, "creation_date": 1563373502, "last_edit_date": 1563432453, "question_id": 57078206, "link": "https://stackoverflow.com/questions/57078206/how-to-iterate-through-bitmap-pixels", "title": "How to iterate through bitmap pixels", "body": "<p>I'm trying to read some area of my screen and iterate through this area, and if some red dot crosses this area, click with the left mouse button. I think I'm close to solve my problem, but I searched a lot and I did not find any solutions. Also, if my code has something wrong, please let me know, because I'm trying to use bitmap, but I don't know much about it.</p>\n\n<p>Here is an image representation of my problem (I don't have 10 rep to post an image):</p>\n\n<p><a href=\"https://i.stack.imgur.com/L2IOC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/L2IOC.png\" alt=\"enter image description here\"></a></p>\n\n<p>Need to read only the green area.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main()\n{\n    LPCWSTR windowTitle = L\"window_name\";\n    HWND hwnd = FindWindow(NULL, windowTitle);\n\n    HDC hdcSource, hdcMemory;\n    BYTE* bitPointer;\n    POINT cursorPosition;\n    int red, green, blue;\n    int x = 140;\n    int y = 205;\n    int width = 1920 - 1760;\n    int height = 1080 - 875;\n\n    while (true)\n    {\n        int width = 1920 - 1760;\n        int height = 1080 - 875;\n\n        hdcSource = GetDC(hwnd);\n        hdcMemory = CreateCompatibleDC(hdcSource);\n\n        int capX = GetDeviceCaps(hdcSource, HORZRES);\n        int capY = GetDeviceCaps(hdcSource, VERTRES);\n\n        HBITMAP hBitmap = CreateCompatibleBitmap(hdcSource, width, height);\n        HBITMAP hBitmapOld = (HBITMAP)SelectObject(hdcMemory, hBitmap);\n\n        BitBlt(hdcMemory, 0, 0, width, height, hdcSource, x, y, SRCCOPY);\n        hBitmap = (HBITMAP)SelectObject(hdcMemory, hBitmapOld);\n\n        // Loop through bitmap selection and if find the RGB color (220, 0 , 0) click with left mouse button\n        for (int i = 0; ???; i++)\n        {\n            // something here\n\n            if (red == 220 &amp;&amp; green == 0 &amp;&amp; blue == 0)\n            {\n                GetCursorPos(&amp;cursorPosition);\n                mouse_event(MOUSEEVENTF_LEFTDOWN, cursorPosition.x, cursorPosition.y, 0, 0);\n                mouse_event(MOUSEEVENTF_LEFTUP, cursorPosition.x, cursorPosition.y, 0, 0);\n            }\n        }\n\n        ReleaseDC(NULL, hdcSource);\n        ReleaseDC(NULL, hdcMemory);\n\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "segmentation-fault", "stack"], "comments": [{"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 2, "creation_date": 1563373452, "post_id": 57078139, "comment_id": 100679534, "body": "Did you run it in the debugger?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1563373466, "post_id": 57078139, "comment_id": 100679546, "body": "What happens to <code>while(one.top()!=&#39;&#47;&#39;)</code> if <code>one</code> doesn&#39;t have a <code>&#39;&#47;&#39;</code> in it?"}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1563373767, "post_id": 57078139, "comment_id": 100679762, "body": "See <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1563374105, "post_id": 57078139, "comment_id": 100679994, "body": "@Riataro In my opinion the function does not make sense.:)"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 11798159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f78a2e2174eb2f9ea6a457a8a499508?s=128&d=identicon&r=PG&f=1", "display_name": "Riataro", "link": "https://stackoverflow.com/users/11798159/riataro"}, "edited": false, "score": 0, "creation_date": 1563373769, "post_id": 57078211, "comment_id": 100679765, "body": "Thank you. I completely overlooked that."}, {"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "reply_to_user": {"reputation": 23, "user_id": 11798159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f78a2e2174eb2f9ea6a457a8a499508?s=128&d=identicon&r=PG&f=1", "display_name": "Riataro", "link": "https://stackoverflow.com/users/11798159/riataro"}, "edited": false, "score": 1, "creation_date": 1563373846, "post_id": 57078211, "comment_id": 100679822, "body": "@Riataro the point is that you should have found it using the debugger."}], "tags": [], "owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "is_accepted": true, "score": 0, "last_activity_date": 1563373535, "creation_date": 1563373535, "answer_id": 57078211, "question_id": 57078139, "link": "https://stackoverflow.com/questions/57078139/unresolved-segmentation-fault-while-trying-to-simplify-directory-path-using-stac/57078211#57078211", "title": "Unresolved Segmentation fault while trying to simplify directory path using stacks", "body": "<pre><code>while(res.top()!=NULL)\n</code></pre>\n\n<p><code>std::stack::top()</code> does not return NULL when the stack is empty. It causes undefined behaviour instead.</p>\n"}, {"tags": [], "owner": {"reputation": 1240, "user_id": 5317459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd9f6135b6a4aac6f1947ba02adabafc?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit Jha", "link": "https://stackoverflow.com/users/5317459/sumit-jha"}, "is_accepted": false, "score": 0, "last_activity_date": 1563374129, "last_edit_date": 1563374129, "creation_date": 1563373712, "answer_id": 57078266, "question_id": 57078139, "link": "https://stackoverflow.com/questions/57078139/unresolved-segmentation-fault-while-trying-to-simplify-directory-path-using-stac/57078266#57078266", "title": "Unresolved Segmentation fault while trying to simplify directory path using stacks", "body": "<p>You must check if the stack is not empty before using <code>stack::top()</code> or <code>stack::pop()</code>.</p>\n\n<p><code>while(!one.empty() &amp;&amp; one.top()!='/')</code> </p>\n"}], "owner": {"reputation": 23, "user_id": 11798159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f78a2e2174eb2f9ea6a457a8a499508?s=128&d=identicon&r=PG&f=1", "display_name": "Riataro", "link": "https://stackoverflow.com/users/11798159/riataro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 57078211, "answer_count": 2, "score": 0, "last_activity_date": 1563374129, "creation_date": 1563373335, "question_id": 57078139, "link": "https://stackoverflow.com/questions/57078139/unresolved-segmentation-fault-while-trying-to-simplify-directory-path-using-stac", "title": "Unresolved Segmentation fault while trying to simplify directory path using stacks", "body": "<p>I was trying to resolve my segmentation fault when i was using stacks to simplify my directory path. But I can't seem to find anything that would cause the issue. Am I missing something?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>string Solution::simplifyPath(string A) {\n    string a=\"\";\n    stack&lt;char&gt; one;\n    stack&lt;char&gt; res;\n    for(int i=0; i&lt;A.length();i++){\n        one.push(A[i]);\n    }\n    one.pop();\n    while(one.top()!='/'){\n        res.push(one.top());\n        one.pop();\n        }\n    res.push('/');\n    while(res.top()!=NULL){\n        a+=res.top();\n        res.pop();\n    }\n    return a;\n}\n</code></pre>\n\n<pre><code>Error message:\n\nRuntime Error. Your submission stopped because of a runtime error. ex: division by zero, array index out of bounds, uncaught exception You can try testing your code with custom input and try putting debug statements in your code.\n\nSegmentation fault.\n</code></pre>\n"}, {"tags": ["c++", "qml", "qt5"], "answers": [{"tags": [], "owner": {"reputation": 229, "user_id": 2158445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17712aab5130f44625816981d290a9da?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/2158445/chris"}, "is_accepted": true, "score": 0, "last_activity_date": 1563401312, "creation_date": 1563401312, "answer_id": 57084610, "question_id": 57077967, "link": "https://stackoverflow.com/questions/57077967/qml-unknown-method-return-type-archivefile-even-though-qmlregisteruncreatable/57084610#57084610", "title": "qml Unknown method return type: ArchiveFile*, even though qmlRegisterUncreatableType was called", "body": "<p>Adding the <code>Q_OBJECT</code> macro to the subclass (<code>ArchiveFile</code>) seems to resolve the issue. I wrongly assumed that you only had to define the <code>Q_OBJECT</code> macro in the base class (<code>GenericFile</code>) somehow.</p>\n"}], "owner": {"reputation": 229, "user_id": 2158445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17712aab5130f44625816981d290a9da?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/2158445/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 458, "favorite_count": 0, "accepted_answer_id": 57084610, "answer_count": 1, "score": 3, "last_activity_date": 1563401312, "creation_date": 1563372786, "last_edit_date": 1563401011, "question_id": 57077967, "link": "https://stackoverflow.com/questions/57077967/qml-unknown-method-return-type-archivefile-even-though-qmlregisteruncreatable", "title": "qml Unknown method return type: ArchiveFile*, even though qmlRegisterUncreatableType was called", "body": "<h1>Brief description of what I'm trying to do</h1>\n\n<p>I'm trying to make an application for opening some very structurally similar, related files. \u00cd have a base class, named <code>GenericFile</code>, and a subclass, named <code>ArchiveFile</code>. There also exists subclasses of <code>ArchiveFile</code>, which contain implementation logic for the specific archive file format, but those are not relevant for QML and therefore not exposed to QML. </p>\n\n<p>I've yet another class named <code>FileManager</code>, which exposes certain methods to QML to create instances of <code>GenericFile</code> and to downcast them to classes like <code>ArchiveFile</code>, based on <code>GenericFile.getFileCategory</code>.</p>\n\n<h1>The problem</h1>\n\n<p>I've registered both <code>GenericFile</code> and <code>ArchiveFile</code> using <code>qmlRegisterUncreatableType</code>, like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main(int argc, char** argv) {\n    QApplication app(argc, argv);\n    QQmlApplicationEngine engine;\n    qmlRegisterUncreatableType&lt;GenericFile&gt;(\"me.henkkalkwater\", 1, 0, \"GenericFile\", \"Get your copy of GenericFile using FileManager!\");\n    qmlRegisterUncreatableType&lt;ArchiveFile&gt;(\"me.henkkalkwater\", 1, 0, \"ArchiveFile\", \"Get your copy of ArchiveFile using FileManager!\");\n    qmlRegisterSingletonType&lt;FileManager&gt;(\"me.henkkalkwater\", 1, 0, \"FileManager\", [](QQmlEngine* engine, QJSEngine* jsEngine) -&gt; QObject* {\n        Q_UNUSED(engine)\n        Q_UNUSED(jsEngine)\n        return new FileManager();\n    });\n    const QUrl url(QStringLiteral(\"qrc:/qml/main.qml\"));\n    QObject::connect(&amp;engine, &amp;QQmlApplicationEngine::objectCreated,\n                     &amp;app, [url](QObject *obj, const QUrl &amp;objUrl) {\n        if (!obj &amp;&amp; url == objUrl)\n            QCoreApplication::exit(-1);\n    }, Qt::QueuedConnection);\n    engine.load(url);\n}\n</code></pre>\n\n<p>Calling <code>GenericFile* FileManager.getFile(int index)</code> works fine in QML. But calling <code>ArchiveFile* FileManager.getArchive(int index)</code> doesn't work, with the message \"Error: Unknown method return type: ArchiveFile*\".  </p>\n\n<p>Has the problem to do with the fact that <code>ArchiveFile</code> inherits from <code>GenericFile</code> or did I make a silly mistake somewhere else? Or is the design of my classes seriously flawed? Am I taking some Java conventions to C++ which should be done in another way?</p>\n\n<h1>My code</h1>\n\n<p>genericfile.h:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class GenericFile;\ntypedef GenericFile* (*CreateFileFunction) (QIODevice* file, QString fileName, QObject* parent);\n\nclass GenericFile : public QObject {\n    Q_OBJECT\npublic:\n    enum FileCategory {\n        UNKNOWN,\n        COMPRESSED,\n        ARCHIVE,\n        LAYOUT\n    };\n    Q_ENUM(FileCategory)\n\n    GenericFile(QIODevice* source, QString name, QObject* parent = nullptr);\n    virtual ~NinFile();\n\n    Q_PROPERTY(QString fileName READ getFileName)\n    Q_PROPERTY(FileCategory fileCategory READ getFileCategory)\n\n    /**\n     * @brief Register a file usign a certain string of magic bytes.\n     * @param magic\n     * @param fn\n     */\n    static void RegisterFile(QLatin1String magic, CreateFileFunction fn);\n\n    /**\n     * @brief Return one of the subclasses of the file.\n     * @param file The file to determine.\n     * @return The class able to parse this file format.\n     *\n     * Scans the magic bytes and returns a subclass of GenericFile that represents the file.\n     * The subclass will take ownership of the QFile and destroy it whenever it is destroyed\n     * itself.\n     */\n    static GenericFile* fromFile(QFile* file, QObject* parent = nullptr);\n    static GenericFile* fromIODevice(QIODevice* file, QString filename, QObject* parent = nullptr);\n\n    /**\n     * @brief Initialize the default file associations.\n     */\n    static void init();\n\n    /**\n     * @return The filename of this file\n     */\n    QString getFileName() const {\n        return fileName;\n    }\n\n    /**\n     * @return return the general category the file belongs in\n     */\n    virtual FileCategory getFileCategory() const {\n        return UNKNOWN;\n    }\n\nprotected:\n    QIODevice* file;\n    QString fileName;\n};\n</code></pre>\n\n<p>archivefile.h</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class ArchiveFile : public GenericFile\n{\npublic:\n    ArchiveFile(QIODevice* device, QString fileName, QObject* parent = nullptr);\n\n    Q_INVOKABLE\n    virtual QList&lt;QString&gt; listContents() = 0;\n    FileCategory getFileCategory() const override { return GenericFile::ARCHIVE; }\n};\n</code></pre>\n\n<p>FileManager.h (with relevant method implementations included)</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class FileManager : public QAbstractListModel\n{\n    Q_OBJECT\npublic:\n    explicit FileManager(QObject *parent = nullptr);\n    enum RoleNames {\n        INDEX = Qt::UserRole + 1,\n        PATH,\n        TYPE,\n        CATEGORY\n    };\n\n    /**\n     * @brief Opens a file\n     * @param filePath The path to the file\n     * @return false if the opening fails, true otherwise\n     * Opens a file, and if successful, returns true and adds it to this model. Otherwise, it returns false.\n     */\n    Q_INVOKABLE\n    bool openFile(QUrl filePath);\n\n    Q_INVOKABLE\n    GenericFile* getFile(int index) {\n        if (index &gt;= 0 &amp;&amp; index &lt; files.length()) {\n            return files[index];\n        }\n        return nullptr;\n    }\n\n    Q_INVOKABLE\n    ArchiveFile* getArchive(int index) {\n        qDebug() &lt;&lt; \"Callled getArchive\";\n        try {\n            return dynamic_cast&lt;ArchiveFile*&gt;(getFile(index));\n        } catch (std::bad_cast e){\n            return nullptr;\n        }\n    }\n\n    QVariant data(const QModelIndex&amp; index, int role = Qt::DisplayRole) const override;\n    int rowCount(const QModelIndex&amp; parent = QModelIndex()) const override;\n    QHash&lt;int, QByteArray&gt; roleNames() const override;\n\nprivate:\n    QList&lt;GenericFile*&gt; files;\n};\n</code></pre>\n\n<p>Edit: it appears that this happens every time I register a base class and a subclass of said baseclass.</p>\n"}, {"tags": ["c++", "ubuntu", "cmake", "ros", "catkin"], "comments": [{"owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "edited": false, "score": 0, "creation_date": 1563372937, "post_id": 57077832, "comment_id": 100679177, "body": "the <code>csparse</code> library should have come with the <code>libsuitesparse-dev</code> apt package you should have installed. Can you show more of the build output? For example, what does the CMake print for the CSPARSE include path here: <code>-- CSPARSE_INCLUDE_DIR : ......</code> ? This might help narrow down the issue. I am assuming <code>&#47;usr&#47;bin&#47;lcsparse.so</code> exists?"}, {"owner": {"reputation": 160, "user_id": 8527195, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ARNQy.png?s=128&g=1", "display_name": "MrMinemeet", "link": "https://stackoverflow.com/users/8527195/mrminemeet"}, "reply_to_user": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "edited": false, "score": 0, "creation_date": 1563386303, "post_id": 57077832, "comment_id": 100686337, "body": "@squareskittles <code>libsuitesparse-dev</code> version 1:5.1.2-2 (newest) is installed. Thb. I don&#39;t know where to find the outputlog. In the CMakeCache.txt I found this line: <code>CSPARSE_INCLUDE_DIR:PATH=&#47;usr&#47;include&#47;suitesparse</code> if that&#39;s what you ment with the CMake print. `/usr/bin/lcsparse exits because I used a link (explained above) but I guess thats&#39; wrong suposing I should use suietsparse and not the one from g2o. <a href=\"https://pastebin.com/bGxP1aaP\" rel=\"nofollow noreferrer\">HERE</a> is also the full CMakeCache.txt"}, {"owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "edited": false, "score": 0, "creation_date": 1563386716, "post_id": 57077832, "comment_id": 100686518, "body": "I don&#39;t know much about <code>libsuitesparse-dev</code> but I would assume it would install the <code>csparse</code> library on your system. Also, the <code>-l</code> is an indicator to the compiler to <i>link</i> that library, so the library name should be <code>csparse.so</code> or <code>libcsparse.so</code> in order for the linker to find it."}, {"owner": {"reputation": 160, "user_id": 8527195, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ARNQy.png?s=128&g=1", "display_name": "MrMinemeet", "link": "https://stackoverflow.com/users/8527195/mrminemeet"}, "reply_to_user": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "edited": false, "score": 0, "creation_date": 1563390346, "post_id": 57077832, "comment_id": 100688172, "body": "According to <a href=\"https://packages.ubuntu.com/bionic/amd64/libsuitesparse-dev/filelist\" rel=\"nofollow noreferrer\">Ubuntu Packages</a> the <code>libsuitesparse-dev</code> creates a <code>libcxsparse.so</code> file in <code>&#47;usr&#47;lib&#47;x86_64-linux-gnu&#47;</code> so I tried to link this file to the <code>&#47;usr&#47;bin&#47;</code> location with different names (these: <code>lcsparse.so libcsparse lcsparse libcsparse.so csparse csparse.so</code>) just to check if anyone would work but still nothing"}, {"owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "edited": false, "score": 0, "creation_date": 1563393866, "post_id": 57077832, "comment_id": 100689726, "body": "The CMake for this project has the line: <code>target_link_libraries(lsdslam ${FABMAP_LIB} ${G2O_LIBRARIES} ${catkin_LIBRARIES} csparse cxsparse X11)</code>. So, it will try to link against the <code>csparse</code> and <code>cxsparse</code> libraries. Instead of using symlinks, you might consider adding the location these libraries were installed to your <code>Path</code> environment variable."}, {"owner": {"reputation": 160, "user_id": 8527195, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ARNQy.png?s=128&g=1", "display_name": "MrMinemeet", "link": "https://stackoverflow.com/users/8527195/mrminemeet"}, "reply_to_user": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "edited": false, "score": 0, "creation_date": 1563436589, "post_id": 57077832, "comment_id": 100701400, "body": "I added them to <code>PATH</code> like this <code>&#47;opt&#47;ros&#47;melodic&#47;bin:&#47;usr&#47;local&#47;sbin:&#47;usr&#47;local&#47;bin:&#47;usr&#47;sbi&zwnj;&#8203;n:&#47;usr&#47;bin:&#47;sbin:&#47;bi&zwnj;&#8203;n:&#47;usr&#47;games:&#47;usr&#47;lo&zwnj;&#8203;cal&#47;games:&#47;snap&#47;bin:&zwnj;&#8203;&#47;usr&#47;lib&#47;x86_64-linu&zwnj;&#8203;x-gnu</code> but I&#39;m still getting the same error. Might it be possible because <code>libsuitesparse-dev</code> only creates a <code>libcxsparse.so</code> and not a <code>libcsparse.so</code> file? Do you know how to get both?"}], "answers": [{"tags": [], "owner": {"reputation": 160, "user_id": 8527195, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ARNQy.png?s=128&g=1", "display_name": "MrMinemeet", "link": "https://stackoverflow.com/users/8527195/mrminemeet"}, "is_accepted": false, "score": 1, "last_activity_date": 1563446369, "creation_date": 1563446369, "answer_id": 57092644, "question_id": 57077832, "link": "https://stackoverflow.com/questions/57077832/catkin-make-usr-bin-ld-cannot-find-lcsparse/57092644#57092644", "title": "catkin_make &#187; /usr/bin/ld: cannot find -lcsparse", "body": "<p>Ok I fixed it myself.\nHere are the steps I did.\nFirst I made the steps explained in EDIT 2.\nAfter that i got some <code>undefined reference</code> stuff which I fixed by first installing <code>libsuitesparse-dev</code> and then compiling <code>g2o</code><br/>\nIt worked for me so I hope it works for you too.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 2547179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80265fa2eb48c3c60722815330aced41?s=128&d=identicon&r=PG", "display_name": "Knalltuete", "link": "https://stackoverflow.com/users/2547179/knalltuete"}, "is_accepted": false, "score": 1, "last_activity_date": 1572337024, "creation_date": 1572337024, "answer_id": 58603489, "question_id": 57077832, "link": "https://stackoverflow.com/questions/57077832/catkin-make-usr-bin-ld-cannot-find-lcsparse/58603489#58603489", "title": "catkin_make &#187; /usr/bin/ld: cannot find -lcsparse", "body": "<p>I would have commented, but I could not due to too low rep.</p>\n\n<p>For me it was enough to add <code>${CSPARSE_INCLUDE_DIR}</code> to <code>target_link_libraries</code>.\nSo the line in my CMakeLists.txt looks like this:</p>\n\n<pre><code>target_link_libraries(lsdslam ${FABMAP_LIB} ${G2O_LIBRARIES} ${catkin_LIBRARIES} ${CSPARSE_INCLUDE_DIR} cxsparse X11)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 4157143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a10527159c49219fd51260063adf980?s=128&d=identicon&r=PG&f=1", "display_name": "RedMarsBlueMoon", "link": "https://stackoverflow.com/users/4157143/redmarsbluemoon"}, "is_accepted": false, "score": 0, "last_activity_date": 1589989745, "last_edit_date": 1589989745, "creation_date": 1589916143, "answer_id": 61899074, "question_id": 57077832, "link": "https://stackoverflow.com/questions/57077832/catkin-make-usr-bin-ld-cannot-find-lcsparse/61899074#61899074", "title": "catkin_make &#187; /usr/bin/ld: cannot find -lcsparse", "body": "<p>(not enough points to comment)</p>\n\n<p>I was just struggling with this too over the last couple of nights.\nI found that the 18.04/bionic version of the 'libsuitesparse-dev' package for some reason has left the plain csparse file out. It only has the 'libcxsparse3' one now.\n<a href=\"https://packages.ubuntu.com/bionic/libsuitesparse-dev\" rel=\"nofollow noreferrer\">https://packages.ubuntu.com/bionic/libsuitesparse-dev</a></p>\n\n<p>If you go back an ubuntu version you'll see that it used to have the 'plain' csparse file.\n<a href=\"https://packages.ubuntu.com/xenial/libsuitesparse-dev\" rel=\"nofollow noreferrer\">https://packages.ubuntu.com/xenial/libsuitesparse-dev</a></p>\n\n<p><strong>UPDATE</strong>:\nI filed an Ubuntu bug report but got the reply that libcsparse has been superseded by libcxsparse.</p>\n\n<p>\"Thank you for your bug report, it's a wanted change and not a bug according to\n<a href=\"https://salsa.debian.org/science-team/suitesparse/-/commit/3b00ddd5\" rel=\"nofollow noreferrer\">https://salsa.debian.org/science-team/suitesparse/-/commit/3b00ddd5</a>\n'+ Drop package for CSparse (libcsparse), superseded by libcxsparse.' , did you try to use this one?\"</p>\n\n<p>** Changed in: suitesparse (Ubuntu)\n       Status: New => Invalid</p>\n"}], "owner": {"reputation": 160, "user_id": 8527195, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ARNQy.png?s=128&g=1", "display_name": "MrMinemeet", "link": "https://stackoverflow.com/users/8527195/mrminemeet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 951, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1589989745, "creation_date": 1563372380, "last_edit_date": 1563444886, "question_id": 57077832, "link": "https://stackoverflow.com/questions/57077832/catkin-make-usr-bin-ld-cannot-find-lcsparse", "title": "catkin_make &#187; /usr/bin/ld: cannot find -lcsparse", "body": "<p>I'm trying to get <a href=\"https://github.com/kevin-george/lsd_slam\" rel=\"nofollow noreferrer\">LSD_SLAM</a> working but when running the <code>catkin_make</code> command at 91%. I get the error message /usr/bin/ld: <br/>\n<strong>/usr/bin/ld: cannot find -lcsparse</strong>\nI already tried to softlink using this command <code>sudo ln -s /usr/local/lib/libg2o_solver_csparse.so /usr/bin/lcsparse.so</code> but this doesn't fix it.</p>\n\n<p>here is the full error message:</p>\n\n<pre><code>    [ 91%] Linking CXX shared library /home/adas/lsd-slam_workspace/devel/lib/liblsdslam.so\n    /usr/bin/ld: cannot find -lcsparse\n    collect2: error: ld returned 1 exit status\n    lsd_slam/lsd_slam_core/CMakeFiles/lsdslam.dir/build.make:755: recipe for target '/home/adas/lsd-slam_workspace/devel/lib/liblsdslam.so' failed\n    make[2]: * [/home/adas/lsd-slam_workspace/devel/lib/liblsdslam.so] Error 1 CMakeFiles/Makefile2:2385: recipe for target 'lsd_slam/lsd_slam_core/CMakeFiles/lsdslam.dir/all' failed\n    make[1]: [lsd_slam/lsd_slam_core/CMakeFiles/lsdslam.dir/all] Error 2 Makefile:140: recipe for target 'all' failed\n    make: ** [all] Error 2\n    Invoking \"make -j4 -l4\" failed\n</code></pre>\n\n<p>To be honest I don't know that else I should try as there is nothing called <code>lcsparse</code> in apt either.\nFurthermore I also tried it on two other computers but still get stuck because of this error.</p>\n\n<p>Here is some information what I have installed, that I thing might be helpful: <br/></p>\n\n<ul>\n<li>openCV 4.1.1-pre</li>\n<li>ROS Melodic</li>\n<li>Ubuntu 18.04</li>\n<li>CMake 3.10.2</li>\n<li>CatKin_tools 0.4.5</li>\n<li>Python 3.6.8</li>\n<li><a href=\"https://github.com/felixendres/g2o/tree/c++03\" rel=\"nofollow noreferrer\">g2o</a> (had to use this old version to fix another bug)</li>\n</ul>\n\n<h2>Edit 1:</h2>\n\n<p>Here is also the CMakeList.txt</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8.7)\nproject(lsd_slam_core)\n\n# Set the build type. Options are:\n#  Coverage : w/ debug symbols, w/o optimization, w/ code-coverage\n#  Debug : w/ debug symbols, w/o optimization\n#  Release : w/o debug symbols, w/ optimization\n#  RelWithDebInfo : w/ debug symbols, w/ optimization\n#  MinSizeRel : w/o debug symbols, w/ optimization, stripped binaries\nset(CMAKE_BUILD_TYPE Release)\n\nfind_package(catkin REQUIRED COMPONENTS\n  cv_bridge\n  OpenCV\n  dynamic_reconfigure\n  sensor_msgs\n  image_transport\n  roscpp\n  rosbag\n  cmake_modules\n  lsd_slam_viewer\n)\n\nfind_package(Eigen3 REQUIRED)\nfind_package(X11 REQUIRED)\ninclude(cmake/FindG2O.cmake)\ninclude(cmake/FindSuiteParse.cmake)\n\n\nmessage(\"-- CHOLMOD_INCLUDE_DIR : \" ${CHOLMOD_INCLUDE_DIR})\nmessage(\"-- CSPARSE_INCLUDE_DIR : \" ${CSPARSE_INCLUDE_DIR})\nmessage(\"-- G2O_INCLUDE_DIR : \" ${G2O_INCLUDE_DIR})\n\n# FabMap\n# uncomment this part to enable fabmap\n#add_subdirectory(${PROJECT_SOURCE_DIR}/thirdparty/openFabMap)\n#include_directories(${PROJECT_SOURCE_DIR}/thirdparty/openFabMap/include)\n#add_definitions(\"-DHAVE_FABMAP\")\n#set(FABMAP_LIB openFABMAP )\n\ngenerate_dynamic_reconfigure_options(\n  cfg/LSDDebugParams.cfg\n  cfg/LSDParams.cfg\n)\n\ncatkin_package(\n  LIBRARIES lsdslam\n  DEPENDS EIGEN3 SuiteSparse\n  CATKIN_DEPENDS libg2o\n)\n\n# SSE flags\nadd_definitions(\"-DUSE_ROS\")\nadd_definitions(\"-DENABLE_SSE\")\n\n# Also add some useful compiler flag\nset(CMAKE_CXX_FLAGS\n   \"${CMAKE_CXX_FLAGS} -march=native -Wall -std=c++0x\"\n)\n\n# Set source files\nset(lsd_SOURCE_FILES\n  ${PROJECT_SOURCE_DIR}/src/DataStructures/Frame.cpp\n  ${PROJECT_SOURCE_DIR}/src/DataStructures/FramePoseStruct.cpp\n  ${PROJECT_SOURCE_DIR}/src/DataStructures/FrameMemory.cpp\n  ${PROJECT_SOURCE_DIR}/src/SlamSystem.cpp\n  ${PROJECT_SOURCE_DIR}/src/LiveSLAMWrapper.cpp\n  ${PROJECT_SOURCE_DIR}/src/DepthEstimation/DepthMap.cpp\n  ${PROJECT_SOURCE_DIR}/src/DepthEstimation/DepthMapPixelHypothesis.cpp\n  ${PROJECT_SOURCE_DIR}/src/util/globalFuncs.cpp\n  ${PROJECT_SOURCE_DIR}/src/util/SophusUtil.cpp\n  ${PROJECT_SOURCE_DIR}/src/util/settings.cpp\n  ${PROJECT_SOURCE_DIR}/src/util/Undistorter.cpp\n  ${PROJECT_SOURCE_DIR}/src/Tracking/Sim3Tracker.cpp\n  ${PROJECT_SOURCE_DIR}/src/Tracking/Relocalizer.cpp\n  ${PROJECT_SOURCE_DIR}/src/Tracking/SE3Tracker.cpp\n  ${PROJECT_SOURCE_DIR}/src/Tracking/TrackingReference.cpp\n  ${PROJECT_SOURCE_DIR}/src/IOWrapper/Timestamp.cpp\n  ${PROJECT_SOURCE_DIR}/src/GlobalMapping/FabMap.cpp\n  ${PROJECT_SOURCE_DIR}/src/GlobalMapping/KeyFrameGraph.cpp\n  ${PROJECT_SOURCE_DIR}/src/GlobalMapping/g2oTypeSim3Sophus.cpp\n  ${PROJECT_SOURCE_DIR}/src/GlobalMapping/TrackableKeyFrameSearch.cpp\n)\nset(SOURCE_FILES\n  ${lsd_SOURCE_FILES}\n  ${PROJECT_SOURCE_DIR}/src/IOWrapper/ROS/ROSImageStreamThread.cpp\n  ${PROJECT_SOURCE_DIR}/src/IOWrapper/ROS/ROSOutput3DWrapper.cpp\n  ${PROJECT_SOURCE_DIR}/src/IOWrapper/OpenCV/ImageDisplay_OpenCV.cpp\n)\n\ninclude_directories(\n  include\n  ${EIGEN3_INCLUDE_DIR}\n  ${PROJECT_SOURCE_DIR}/src\n  ${PROJECT_SOURCE_DIR}/thirdparty/Sophus\n  ${CSPARSE_INCLUDE_DIR} #Has been set by SuiteParse\n  ${CHOLMOD_INCLUDE_DIR} #Has been set by SuiteParse\n  ${OpenCV_INCLUDE_DIRS}\n  ${catkin_INCLUDE_DIRS}\n)\n\n# build shared library.\nadd_library(lsdslam SHARED ${SOURCE_FILES})\ntarget_link_libraries(lsdslam ${FABMAP_LIB} ${G2O_LIBRARIES} ${catkin_LIBRARIES} csparse cxsparse X11)\n#rosbuild_link_boost(lsdslam thread)\n\n\n# build live ros node\nadd_executable(live_slam src/main_live_odometry.cpp)\ntarget_link_libraries(live_slam lsdslam ${catkin_LIBRARIES} ${G2O_LIBRARIES})\n\n\n# build image node\nadd_executable(dataset src/main_on_images.cpp)\nadd_dependencies(lsdslam lsd_slam_viewer_generate_messages_cpp)\nadd_dependencies(live_slam lsd_slam_viewer_generate_messages_cpp)\nadd_dependencies(dataset lsd_slam_viewer_generate_messages_cpp)\ntarget_link_libraries(dataset lsdslam ${catkin_LIBRARIES} ${G2O_LIBRARIES})\ntarget_link_libraries(live_slam lsdslam ${OpenCV_LIBRARIES})\n\n# TODO add INSTALL\n</code></pre>\n\n<h2>Edit 2:</h2>\n\n<p>Fixed the problem with the error message more or less...\nI added this to the top of my CMakeList.txt <br/></p>\n\n<pre><code>find_path(CSPARSE_INCLUDE_DIR NAMES cs.h\n  PATHS\n  /usr/include/suitesparse\n  /usr/include\n  /opt/local/include\n  /usr/local/include\n  /sw/include\n  /usr/include/ufsparse\n  /opt/local/include/ufsparse\n  /usr/local/include/ufsparse\n  /sw/include/ufsparse\n  PATH_SUFFIXES\n  suitesparse\n  )\n</code></pre>\n\n<p>and replaced <code>csparse</code> and <code>cxsparse</code> in the <code>target_linked_libraries</code> with <code>${CSPARSE_INCLUDE_DIR}</code>. Now I'm stuck with undefined reference at *** \nsee here: </p>\n\n<pre><code>/home/alex/Schreibtisch/workspace/devel/lib/liblsdslam.so: Warnung: undefinierter Verweis auf \u00bbcs_di_post\u00ab\n/home/alex/Schreibtisch/workspace/devel/lib/liblsdslam.so: Warnung: undefinierter Verweis auf \u00bbcs_di_etree\u00ab\n/home/alex/Schreibtisch/workspace/devel/lib/liblsdslam.so: Warnung: undefinierter Verweis auf \u00bbg2o::csparse_extension::cs_chol_workspace(cs_di_sparse const*, cs_di_symbolic const*, int*, double*)\u00ab\n/home/alex/Schreibtisch/workspace/devel/lib/liblsdslam.so: Warnung: undefinierter Verweis auf \u00bbcs_di_pinv\u00ab\n/home/alex/Schreibtisch/workspace/devel/lib/liblsdslam.so: Warnung: undefinierter Verweis auf \u00bbcs_di_counts\u00ab\n/home/alex/Schreibtisch/workspace/devel/lib/liblsdslam.so: Warnung: undefinierter Verweis auf \u00bbcs_di_sfree\u00ab\n/home/alex/Schreibtisch/workspace/devel/lib/liblsdslam.so: Warnung: undefinierter Verweis auf \u00bbcs_di_spfree\u00ab\n/home/alex/Schreibtisch/workspace/devel/lib/liblsdslam.so: Warnung: undefinierter Verweis auf \u00bbg2o::csparse_extension::cs_cholsolsymb(cs_di_sparse const*, double*, cs_di_symbolic const*, double*, int*)\u00ab\n/home/alex/Schreibtisch/workspace/devel/lib/liblsdslam.so: Warnung: undefinierter Verweis auf \u00bbcs_di_nfree\u00ab\n/home/alex/Schreibtisch/workspace/devel/lib/liblsdslam.so: Warnung: undefinierter Verweis auf \u00bbcs_di_amd\u00ab\n/home/alex/Schreibtisch/workspace/devel/lib/liblsdslam.so: Warnung: undefinierter Verweis auf \u00bbcs_di_cumsum\u00ab\n/home/alex/Schreibtisch/workspace/devel/lib/liblsdslam.so: Warnung: undefinierter Verweis auf \u00bbcs_di_symperm\u00ab\n/home/alex/Schreibtisch/workspace/devel/lib/liblsdslam.so: Warnung: undefinierter Verweis auf \u00bbcs_di_schol\u00ab\n/home/alex/Schreibtisch/workspace/devel/lib/liblsdslam.so: Warnung: undefinierter Verweis auf \u00bbcs_di_calloc\u00ab\n/home/alex/Schreibtisch/workspace/devel/lib/liblsdslam.so: Warnung: undefinierter Verweis auf \u00bbcs_di_malloc\u00ab\n/home/alex/Schreibtisch/workspace/devel/lib/liblsdslam.so: Warnung: undefinierter Verweis auf \u00bbcs_di_free\u00ab\n/home/alex/Schreibtisch/workspace/devel/lib/liblsdslam.so: Warnung: undefinierter Verweis auf \u00bbg2o::csparse_extension::writeCs2Octave(char const*, cs_di_sparse const*, bool)\u00ab\ncollect2: error: ld returned 1 exit status\nlsd_slam/lsd_slam_core/CMakeFiles/live_slam.dir/build.make:232: recipe for target '/home/alex/Schreibtisch/workspace/devel/lib/lsd_slam_core/live_slam' failed\nmake[2]: *** [/home/alex/Schreibtisch/workspace/devel/lib/lsd_slam_core/live_slam] Error 1\nCMakeFiles/Makefile2:2348: recipe for target 'lsd_slam/lsd_slam_core/CMakeFiles/live_slam.dir/all' failed\nmake[1]: *** [lsd_slam/lsd_slam_core/CMakeFiles/live_slam.dir/all] Error 2\nMakefile:140: recipe for target 'all' failed\n</code></pre>\n\n<p><a href=\"https://pastebin.com/hZTrqc6t\" rel=\"nofollow noreferrer\">HERE</a> is also the full output.</p>\n"}, {"tags": ["c++", "c", "postgresql", "lua"], "comments": [{"owner": {"reputation": 5746, "user_id": 4984564, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9bc286af6678a63ceb881eaf9e966f5f?s=128&d=identicon&r=PG", "display_name": "DarkWiiPlayer", "link": "https://stackoverflow.com/users/4984564/darkwiiplayer"}, "edited": false, "score": 2, "creation_date": 1563372123, "post_id": 57077602, "comment_id": 100678614, "body": "My best guess is a version mismatch, make sure that you&#39;re using the same version of Lua (5.3) everywhere. Maybe your C++ project is using a different version of Lua (use <code>print(_VERSION)</code> to see the Lua version you&#39;re running on."}, {"owner": {"reputation": 2266, "user_id": 4567755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tb0nx.png?s=128&g=1", "display_name": "Green", "link": "https://stackoverflow.com/users/4567755/green"}, "edited": false, "score": 0, "creation_date": 1563372469, "post_id": 57077602, "comment_id": 100678842, "body": "Having your compiler and linker options would help. Same goes to seeing your includes. Similar errors usually occur in C++ if you don&#39;t include lua headers within <code>extern &quot;C&quot;</code>."}, {"owner": {"reputation": 64130, "user_id": 107090, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RZVHK.png?s=128&g=1", "display_name": "lhf", "link": "https://stackoverflow.com/users/107090/lhf"}, "edited": false, "score": 1, "creation_date": 1563374630, "post_id": 57077602, "comment_id": 100680312, "body": "You need to export the Lua API symbols from your C++ program. Link it with <code>-Wl,-E</code>."}, {"owner": {"reputation": 11, "user_id": 11797814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610dfb49707e0b6640fdeaad1a0e0da8?s=128&d=identicon&r=PG&f=1", "display_name": "RuAlastor", "link": "https://stackoverflow.com/users/11797814/rualastor"}, "edited": false, "score": 0, "creation_date": 1563436109, "post_id": 57077602, "comment_id": 100701130, "body": "Thanks for the help! I actually solved the problem. Version was correct and the error wasn&#39;t about includes as well. I believe Lua wasn&#39;t exporting API symbols correctly as @Ihf said, but I think I did something wrong because -Wl,-E didn&#39;t work for me either. I had to explicitly link <b>liblua5.3.so</b> for everything to work."}, {"owner": {"reputation": 2266, "user_id": 4567755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tb0nx.png?s=128&g=1", "display_name": "Green", "link": "https://stackoverflow.com/users/4567755/green"}, "edited": false, "score": 2, "creation_date": 1563436480, "post_id": 57077602, "comment_id": 100701335, "body": "@RuAlastor I suggest you modify question with your initial compiler/linker flags and post an answer with your own solution. For future reference and the ones curious for more details (like me). Someone may even suggest then a nicer solution if there is one."}], "owner": {"reputation": 11, "user_id": 11797814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610dfb49707e0b6640fdeaad1a0e0da8?s=128&d=identicon&r=PG&f=1", "display_name": "RuAlastor", "link": "https://stackoverflow.com/users/11797814/rualastor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1563445895, "creation_date": 1563371737, "last_edit_date": 1563445895, "question_id": 57077602, "link": "https://stackoverflow.com/questions/57077602/error-loading-external-lua-module-luasql-postgres-from-module-imbedded-in-c", "title": "Error loading external lua module (luasql.postgres) from module imbedded in C++ project", "body": "<p>I need to write a C++ project with a Lua script, which reads info from PostgreSQL and gives recieved data back to C++ project. \nIt works correctly when called from terminal with Lua-interpreter however when I try to call Lua module from C++, script works incorrectly and returns error.</p>\n\n<p>Home OS - Debian 9.\nPostgreSQL version - 9.6.\nCompiler - g++.\nLua version - 5.3.4.\nI've already tried changing  in Lua file trying different *.so files. It didn't help.</p>\n\n<p>Compiler/Linker flags:</p>\n\n<blockquote>\n  <p>g++ -c -m64 -pipe -g -std=gnu++11 -Wall -W -fPIC -DQT_QML_DEBUG -I.\n  -I/usr/lib/x86_64-linux-gnu/qt5/mkspecs/linux-g++-64 -o main.o </p>\n  \n  <p>g++ -m64 -o luaTest main.o -llua -ldl</p>\n</blockquote>\n\n<p>main.cpp</p>\n\n<pre><code>lua_State* _script = luaL_newstate();\nif (_script == NULL) {\n    std::cout &lt;&lt; \"Failed to allocate memory!\\n\";\n    return -1;\n}\nint result = luaL_loadfile(_script, filename1);\nif (result != LUA_OK) {\n    std::cout &lt;&lt; \"Failed to load file!\\n\";\n    return -1;\n}\nluaL_openlibs(_script);\nresult = lua_pcall(_script, 0, 0, 0);\nif (result != LUA_OK) {\n    std::string luaError = lua_tostring(_script, -1);\n    std::cout &lt;&lt; \"Failed to run script!\\n\" &lt;&lt; luaError &lt;&lt; '\\n';\n    return -1;\n}\n</code></pre>\n\n<p>lua:</p>\n\n<pre><code>package.cpath = \"/usr/lib/x86_64-linux-gnu/liblua5.3-sql-postgres.so\"\n\nfunction getDatabase()\n    driver = require \"luasql.postgres\"\n    env = assert(driver.postgres())\n\nconnect = assert(env:connect(\"luabase\", \"sorokin\", \"123456\", \"127.0.0.1\", \"5432\"))\n\nres = connect:execute(\"DROP SEQUENCE user_ids\")\nres = connect:execute(\"DROP TABLE users\")\n\n\nres = assert(connect:execute(\"CREATE TABLE users(\\\n                id INTEGER PRIMARY KEY ,\\\n                fname CHAR(15),\\\n                lname CHAR(30),\\\n                job CHAR(15)\\\n                )\"))\n\nres = assert(connect:execute(\"INSERT INTO users(id, fname, lname, job) \\\n            VALUES (1, 'Andrey', 'Sedin', 'Deputat')\"))\nres = assert(connect:execute(\"INSERT INTO users \\\n            VALUES (2, 'Andrey', 'Dranga', 'Boxer')\"))\nres = assert(connect:execute(\"INSERT INTO users \\\n            VALUES (3, 'Roberto', 'Ierusalimskiy', 'Programmer')\"))\n\n\n\ncursor = assert(connect:execute(\"SELECT * FROM users ORDER BY lname\"))\n\nprint()\nprint(string.format(\"%1s %-16s %-31s %-16s\",\n        \"#\", \"| FNAME\", \"| LNAME\", \"| JOB\"))\nprint(string.format(\"%1s %-16s %-31s %-16s\",\n        \"-\", \"| -----\", \"| -----\", \"| ---\"))\n\nrow = cursor:fetch({}, \"a\")\nwhile row do\n    print(string.format(\"%1s %1s %-15s%1s %-30s%1s %-15s\",\n        row.id, \"|\", row.fname, \"|\", row.lname, \"|\", row.job))\n    row = cursor:fetch(row, \"a\")\nend\nprint()\n\ncursor:close()\nconnect:close()\nenv:close()\nend\n\ngetDatabase()\n</code></pre>\n\n<p>error message from Lua-script:</p>\n\n<blockquote>\n  <p>error loading module 'luasql.postgres' from file\n  '/usr/lib/x86_64-linux-gnu/liblua5.3-sql-postgres.so':\n    /usr/lib/x86_64-linux-gnu/liblua5.3-sql-postgres.so: undefined\n  symbol: lua_settop</p>\n</blockquote>\n"}, {"tags": ["c++", "floor", "cmath"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1563371205, "post_id": 57077404, "comment_id": 100677985, "body": "What do you know about floating-point?"}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1563371769, "post_id": 57077404, "comment_id": 100678388, "body": "Replace <code>* 1000</code> with <code>* 1000.000000000001</code> if you need a quick hack."}, {"owner": {"reputation": 119, "user_id": 6231882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xXkB8.jpg?s=128&g=1", "display_name": "OpalApps", "link": "https://stackoverflow.com/users/6231882/opalapps"}, "edited": false, "score": 0, "creation_date": 1563372020, "post_id": 57077404, "comment_id": 100678556, "body": "Try to make fractional parts of the numbers as little as possible by multiplying one side of an expression and respectively divide the other one, like this:      std::cout&lt;&lt;&quot;Floor of 8.02*1000 is : &quot; &lt;&lt;floor(80.20*100.0) &lt;&lt;&quot;\\n&quot;;     std::cout&lt;&lt;&quot;Floor of 8.03*1000 is : &quot; &lt;&lt;floor(80.30*100.0) &lt;&lt;&quot;\\n&quot;; // incorrect result here only : 8029     std::cout&lt;&lt;&quot;Floor of 8.04*1000 is : &quot; &lt;&lt;floor(80.40*100.0) &lt;&lt;&quot;\\n&quot;; // incorrect result here only : 8039     std::cout&lt;&lt;&quot;Floor of 8.05*1000 is : &quot; &lt;&lt;floor(80.50*100.0) &lt;&lt;&quot;\\n&quot;;"}, {"owner": {"reputation": 1, "user_id": 2729161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mCf8J.png?s=128&g=1", "display_name": "Sagar Mane", "link": "https://stackoverflow.com/users/2729161/sagar-mane"}, "edited": false, "score": 0, "creation_date": 1565606204, "post_id": 57077404, "comment_id": 101392581, "body": "Thanks you so much"}], "owner": {"reputation": 1, "user_id": 2729161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mCf8J.png?s=128&g=1", "display_name": "Sagar Mane", "link": "https://stackoverflow.com/users/2729161/sagar-mane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "closed_date": 1563371239, "answer_count": 0, "score": 0, "last_activity_date": 1563371457, "creation_date": 1563371133, "last_edit_date": 1563371457, "question_id": 57077404, "link": "https://stackoverflow.com/questions/57077404/why-does-floor-from-cmath-does-not-give-consistent-answer-of-below-code", "closed_reason": "Duplicate", "title": "Why does floor() from cmath does not give consistent answer of below code", "body": "<p>floor function in cmath in my cpp code has some inconsistent answer, not sure only for some values it does give correct answer </p>\n\n<p>I tried to debug it, did not understood how it calculated answer  </p>\n\n<pre><code>    std::cout&lt;&lt;\"Floor of 8.01*1000 is : \" &lt;&lt;floor(8.01*1000) &lt;&lt;\"\\n\";\n    std::cout&lt;&lt;\"Floor of 8.02*1000 is : \" &lt;&lt;floor(8.02*1000) &lt;&lt;\"\\n\";\n    std::cout&lt;&lt;\"Floor of 8.03*1000 is : \" &lt;&lt;floor(8.03*1000) &lt;&lt;\"\\n\"; // incorrect result here only : 8029\n    std::cout&lt;&lt;\"Floor of 8.04*1000 is : \" &lt;&lt;floor(8.04*1000) &lt;&lt;\"\\n\"; // incorrect result here only : 8039\n    std::cout&lt;&lt;\"Floor of 8.05*1000 is : \" &lt;&lt;floor(8.05*1000) &lt;&lt;\"\\n\";\n</code></pre>\n\n<p>&nbsp;</p>\n\n<pre><code>Floor of 8.01*1000 is : 8010\nFloor of 8.02*1000 is : 8020\nFloor of 8.03*1000 is : 8029 // incorrect result for these values only\nFloor of 8.04*1000 is : 8039 // incorrect result for these values only\nFloor of 8.05*1000 is : 8050\n</code></pre>\n"}, {"tags": ["java", "c++", "gradle", "java-native-interface"], "comments": [{"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 1, "creation_date": 1563372129, "post_id": 57077363, "comment_id": 100678615, "body": "The missing symbol is <code>RF24::RF24(unsigned short, unsigned short, unsigned int)</code>, which should come from librf24.so. Does <code>nm</code> show that that symbol is present in librf24.so? And does <code>ldd</code> show that libtransmitter depends on librf24?"}, {"owner": {"reputation": 519, "user_id": 929227, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1051603723c994016001f969be6d53ee?s=128&d=identicon&r=PG", "display_name": "Kowlown", "link": "https://stackoverflow.com/users/929227/kowlown"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1563372478, "post_id": 57077363, "comment_id": 100678853, "body": "You&#39;re right. ldd show me that libtransmitter does not have librf24 as its dependency  Seems an issue with the linking with gradle"}, {"owner": {"reputation": 519, "user_id": 929227, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1051603723c994016001f969be6d53ee?s=128&d=identicon&r=PG", "display_name": "Kowlown", "link": "https://stackoverflow.com/users/929227/kowlown"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1563372708, "post_id": 57077363, "comment_id": 100679013, "body": "To answer your first question the symbol is present in librf24.so"}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1563393412, "post_id": 57077363, "comment_id": 100689515, "body": "Voting to close with your new question."}, {"owner": {"reputation": 519, "user_id": 929227, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1051603723c994016001f969be6d53ee?s=128&d=identicon&r=PG", "display_name": "Kowlown", "link": "https://stackoverflow.com/users/929227/kowlown"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1563397459, "post_id": 57077363, "comment_id": 100691131, "body": "@Botje I created the new question after examining the issue. You can close this question."}], "owner": {"reputation": 519, "user_id": 929227, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1051603723c994016001f969be6d53ee?s=128&d=identicon&r=PG", "display_name": "Kowlown", "link": "https://stackoverflow.com/users/929227/kowlown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "closed_date": 1563530437, "answer_count": 0, "score": 0, "last_activity_date": 1563370997, "creation_date": 1563370997, "question_id": 57077363, "link": "https://stackoverflow.com/questions/57077363/gradle-gcc-c-compilation-and-jni-having-java-lang-unsatisfiedlinkerror-undef", "closed_reason": "Duplicate", "title": "Gradle/Gcc C++ compilation and JNI; having java.lang.UnsatisfiedLinkError: undefined symbol: _ZN4RF24C1Ettj at run", "body": "<p>I built a library with Java wrapper to receive message from an RF24 component.\nI have no compilation issues but when I run my applicaion and that I want to load my native library with <code>System.loadLibrary</code>, I have the error :</p>\n\n<pre><code>java.lang.UnsatisfiedLinkError: /usr/lib/libtransmitter.so: /usr/lib/libtransmitter.so: undefined symbol: _ZN4RF24C1Ettj\n</code></pre>\n\n<p>I double checked that I included the necessary headers for RF24.\nI double checked that <strong>libtransmitter.so</strong> is copied in <strong>/usr/lib/</strong> .\nI just can't understand why I have this issue.</p>\n\n<p><a href=\"https://gitlab.com/kowlown/raspberry-rf24\" rel=\"nofollow noreferrer\">The source code here</a></p>\n"}, {"tags": ["c++", "string", "constructor"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1563371086, "post_id": 57077342, "comment_id": 100677904, "body": "C++ doesn&#39;t have a concept of stack, heap or code data.  All we known is it is an array with static storage duration.  You&#39;d have to check your implementation documentation to determine what actually happens."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1563371249, "post_id": 57077342, "comment_id": 100678006, "body": "Another fun thing is C++ doesn&#39;t even specify if the same string literal is unique or not.  <code>char foo[] = &quot;foo&quot;; char foo2[] = &quot;foo&quot;;</code> may or may not produce two static arrays (or none in the as-if rule case)."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1563371265, "post_id": 57077342, "comment_id": 100678023, "body": "C-string is different than <code>std::string</code>. so <code>s</code> passed in constructor is a temporary std::string built from C-string <code>&quot;amruth&quot;</code>."}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1563371443, "post_id": 57077342, "comment_id": 100678151, "body": "@NathanOliver That is not correct. What if I modify characters of <code>foo</code> and not <code>foo2</code>? Surely there has to be 2 different static arrays."}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1563371520, "post_id": 57077342, "comment_id": 100678218, "body": "@nathanoliver for the example you gave there would be two character arrays so they would definitely have distinct addresses."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1563371579, "post_id": 57077342, "comment_id": 100678257, "body": "@Ayxan <code>foo</code> and <code>foo2</code> are copies of <code>&quot;foo&quot;</code> and have their own storage.  If change one of them it doesn&#39;t change the other, and it doesn&#39;t change the string literal either.    When I said static arrays, I mean <code>&quot;foo&quot;</code> itself is an array, which may or may not be duplicated for every literal <code>&quot;foo&quot;</code> you have in your code."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1563371624, "post_id": 57077342, "comment_id": 100678292, "body": "@MarkRansom Yes, <code>foo</code> and <code>foo2</code> are distinct, but the <code>&quot;foo&quot;</code>&#39;s they were initialized with may or may not be."}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1563371670, "post_id": 57077342, "comment_id": 100678320, "body": "@NathanOliver you said &quot;may or may not produce two static arrays&quot; but it <i>has to</i> produce two static arrays, <code>foo</code> and <code>foo2</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1563371727, "post_id": 57077342, "comment_id": 100678353, "body": "<code>foo</code> and <code>foo2</code> are not static unless they are global or declared <code>static</code>.  I was using them in the context of being in a function so they are not static."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1563371801, "post_id": 57077342, "comment_id": 100678403, "body": "In general, a string literal is placed into read-only section of your program.  It could be in ROM, or inline with the code."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 2, "last_activity_date": 1563371840, "last_edit_date": 1563371840, "creation_date": 1563371134, "answer_id": 57077405, "question_id": 57077342, "link": "https://stackoverflow.com/questions/57077342/what-is-the-address-of-string-literal/57077405#57077405", "title": "What is the address of string literal?", "body": "<blockquote>\n  <p>What is the address of \"amruth\"</p>\n</blockquote>\n\n<p>The address is <code>&amp;\"amruth\"</code>.</p>\n\n<blockquote>\n  <p>Where does the address located</p>\n</blockquote>\n\n<p>C++ standard does not specify locations of variables or other objects. Those are freely chosen by the implementation. What the language does specify is storage classes. String literals have static storage.</p>\n\n<p>Note that the address of the literal is different from the address of the temporary <code>std::string</code> object that is initialised from the string literal and bound to the reference argument.</p>\n"}], "owner": {"reputation": 142, "user_id": 6374301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N32oc.png?s=128&g=1", "display_name": "Amruth A", "link": "https://stackoverflow.com/users/6374301/amruth-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 1, "closed_date": 1563371089, "accepted_answer_id": 57077405, "answer_count": 1, "score": -4, "last_activity_date": 1563371840, "creation_date": 1563370939, "last_edit_date": 1563371119, "question_id": 57077342, "link": "https://stackoverflow.com/questions/57077342/what-is-the-address-of-string-literal", "closed_reason": "Duplicate", "title": "What is the address of string literal?", "body": "<p>In the below code -</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\nusing namespace std;\nclass my_string\n{\n    string s;\n    public :\n    my_string(const string&amp; s):s(s){ cout &lt;&lt; s;}\n};\nint main()\n{\n    my_string sa{\"amruth\"};\n}\n</code></pre>\n\n<p>What is the address <code>\"amruth\"</code> string that is passed into the constructor? Where does the address locate in stack data or code data?</p>\n"}, {"tags": ["c++", "grpc"], "answers": [{"tags": [], "owner": {"reputation": 515, "user_id": 1919635, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5U1EO.jpg?s=128&g=1", "display_name": "MBI", "link": "https://stackoverflow.com/users/1919635/mbi"}, "is_accepted": false, "score": 0, "last_activity_date": 1563951808, "creation_date": 1563951808, "answer_id": 57177049, "question_id": 57077109, "link": "https://stackoverflow.com/questions/57077109/is-there-a-way-to-read-from-a-file-and-fill-the-message-buff-without-using-set-b/57177049#57177049", "title": "Is there a way to read from a file and fill the message buff without using set_buff()?", "body": "<p>You can use <code>mutable_buff</code> method to get access to the pointer of the variable and then use it to assign it to the memory where you have data loaded from the file, or even more straightforward you call <code>set_allocated_buff</code>.</p>\n\n<pre><code>std::string data;\n// load file content to data variable\nresponse.set_allocated_buff(&amp;data);\n</code></pre>\n\n<p>More info here: <a href=\"https://developers.google.com/protocol-buffers/docs/reference/cpp-generated\" rel=\"nofollow noreferrer\">https://developers.google.com/protocol-buffers/docs/reference/cpp-generated</a></p>\n"}], "owner": {"reputation": 1, "user_id": 10236419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e352bdbb5162bf9324b5b650e73b0373?s=128&d=identicon&r=PG&f=1", "display_name": "J.Guo", "link": "https://stackoverflow.com/users/10236419/j-guo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563951808, "creation_date": 1563370310, "question_id": 57077109, "link": "https://stackoverflow.com/questions/57077109/is-there-a-way-to-read-from-a-file-and-fill-the-message-buff-without-using-set-b", "title": "Is there a way to read from a file and fill the message buff without using set_buff()?", "body": "<p>Using grpc to transfer file. \nThe implementation I'm using now is:\n1: read from file to a char string buff\n2: use set_buff to make the message for grpc\nI find that there may be a lot overhead because it copys the data twice.\nSo is that possible to read from file and dirctly save into the message buff for gprc? Thank you for any help.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1563370200, "post_id": 57077009, "comment_id": 100677326, "body": "No it&#39;s not possible. A common workaround is to use argument overloads, so you have a &quot;tag&quot; that is passed for the <code>usage::static</code> constructor."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1563370228, "post_id": 57077009, "comment_id": 100677344, "body": "This sounds like a job for tag/type dispatch.  Either make <code>my_buffer</code> a template and  make the constructor conditional based on the type, or overload the constructor for different creation tags so you can specify you want the &quot;const&quot; version."}], "answers": [{"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1563372357, "post_id": 57077134, "comment_id": 100678780, "body": "Notice through that it is just a workaround and can be misused."}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": true, "score": 3, "last_activity_date": 1563370961, "last_edit_date": 1563370961, "creation_date": 1563370361, "answer_id": 57077134, "question_id": 57077009, "link": "https://stackoverflow.com/questions/57077009/how-to-select-constructor-based-on-cv-qualifiers-in-c/57077134#57077134", "title": "How to select constructor based on cv qualifiers in C++?", "body": "<p>Simply create a tag type:</p>\n\n<pre><code>class const_tag {};\n</code></pre>\n\n<p>And use it to overload your constructors:</p>\n\n<pre><code>my_buffer(const data* const data_to_store_)\n{\n    id = low_level_lib::create_buffer();\n    low_level_lib::store_buffer_data(id, usage::dynamic);\n}\n\nmy_buffer(const data* const data_to_store_, const_tag)\n{\n    id = low_level_lib::create_buffer();\n    low_level_lib::store_buffer_data(id, usage::static);\n}\n</code></pre>\n\n<p>Or simply pass your <code>usage</code> as a constructor parameter:</p>\n\n<pre><code>my_buffer(const data* const data_to_store_, /* relevant type */ my_usage)\n{\n    id = low_level_lib::create_buffer();\n    low_level_lib::store_buffer_data(id, my_usage);\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11313931"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 57077134, "answer_count": 1, "score": 2, "last_activity_date": 1563370961, "creation_date": 1563370011, "question_id": 57077009, "link": "https://stackoverflow.com/questions/57077009/how-to-select-constructor-based-on-cv-qualifiers-in-c", "title": "How to select constructor based on cv qualifiers in C++?", "body": "<p>How could I invoke a different constructor based on cv qualifiers of a created object? Example:</p>\n\n<pre><code>#include &lt;low_level_lib.h&gt;\n\nstruct my_buffer\n{\nprivate:\n    low_level_lib::buffer_id id;\npublic:    \n    my_buffer(const data* const data_to_store_)\n    {\n        id = low_level_lib::create_buffer();\n        low_level_lib::store_buffer_data(id, usage::dynamic);\n    }\n\n    my_buffer(const data* const data_to_store_) const //compilation fails here\n    {\n        id = low_level_lib::create_buffer();\n        low_level_lib::store_buffer_data(id, usage::static);\n    }\n}\n</code></pre>\n\n<pre><code>//Invokes low_level_lib::store_buffer_data in constructor with usage::dynamic\nmy_buffer frequently_changing_buffer{some_data}; \n\n//Invokes low_level_lib::store_buffer_data in constructor with usage::static\nconst my_buffer never_changing_buffer{some_other_data};\n</code></pre>\n\n<p>The given example doesn't compile (<code>a type qualifier cannot be used on a constructor or destructor</code>), but it is only meant to illustrate what I am trying to achieve. Is it possible to do something like this in C++ and if yes, then how?</p>\n"}, {"tags": ["c++", "operators", "overloading", "operator-keyword"], "answers": [{"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1563377001, "post_id": 57076952, "comment_id": 100681675, "body": "Return value for inside still should be <code>Stream&amp;</code>."}], "tags": [], "owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "is_accepted": false, "score": 6, "last_activity_date": 1563377112, "last_edit_date": 1563377112, "creation_date": 1563369851, "answer_id": 57076952, "question_id": 57076834, "link": "https://stackoverflow.com/questions/57076834/why-doesnt-operatorcout-double-work/57076952#57076952", "title": "Why doesn&#39;t &#39;operator&lt;&lt;(cout, double)&#39; work?", "body": "<p>Because that operator is defined as a member function, not as a free function.</p>\n\n<p>Operators can be overloaded in those two ways, which when used with regular operator syntax will be transparent to the user. However, when using explicit syntax, you have to use the one specific to the actual function definition.</p>\n\n<p>This example shows the difference in practice:</p>\n\n<pre><code>class Stream {\n    Stream&amp; operator&lt;&lt;(Inside);\n};\n\nStream&amp; operator&lt;&lt;(Stream&amp;, Outside);\n</code></pre>\n\n<p>For <code>std::string</code>, <code>Outside</code> way is used. For <code>double</code>, <code>Inside</code> is.</p>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1563369875, "creation_date": 1563369875, "answer_id": 57076959, "question_id": 57076834, "link": "https://stackoverflow.com/questions/57076834/why-doesnt-operatorcout-double-work/57076959#57076959", "title": "Why doesn&#39;t &#39;operator&lt;&lt;(cout, double)&#39; work?", "body": "<p>Because a non-class operator &lt;&lt; for the types std::basic_ostream &amp; and double (or const double &amp;) is not defined in C++.</p>\n\n<p>Such an operator that takes one argument of the type double is declared in the class std::basic_ostream as a member function.</p>\n\n<pre><code>basic_ostream&lt;charT, traits&gt;&amp; operator&lt;&lt;(double f);\n</code></pre>\n\n<p>For objects of the type std::string the operator is declared as a stand-alone (non a class member) function the following way</p>\n\n<pre><code>template&lt;class charT, class traits, class Allocator&gt;\nbasic_ostream&lt;charT, traits&gt;&amp;\noperator&lt;&lt;(basic_ostream&lt;charT, traits&gt;&amp; os,\nconst basic_string&lt;charT, traits, Allocator&gt;&amp; str);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": false, "score": 2, "last_activity_date": 1563369923, "creation_date": 1563369923, "answer_id": 57076976, "question_id": 57076834, "link": "https://stackoverflow.com/questions/57076834/why-doesnt-operatorcout-double-work/57076976#57076976", "title": "Why doesn&#39;t &#39;operator&lt;&lt;(cout, double)&#39; work?", "body": "<p><code>std::basic_ostream</code> provides some <code>&lt;&lt;</code> implementations (for basic types) as member functions. For other types (such as for <code>std::basic_string</code>), <code>operator &lt;&lt;</code> is implemented as a free function. That's how the standard specifies it.</p>\n\n<p>This is only a problem if you're invoking the operator using explicit function call notation (like in your code). The natural way to use it is using operator notation (<code>cout &lt;&lt; x</code>), where the problem does not happen, as both member and free functions can be invoked by it.</p>\n"}, {"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 4, "last_activity_date": 1563370058, "creation_date": 1563370058, "answer_id": 57077025, "question_id": 57076834, "link": "https://stackoverflow.com/questions/57076834/why-doesnt-operatorcout-double-work/57077025#57077025", "title": "Why doesn&#39;t &#39;operator&lt;&lt;(cout, double)&#39; work?", "body": "<p>You can define operators in two different ways, as a member of a class and as free-standing function taking two arguments.</p>\n\n<p>The operator accepting a double value is implemented as a member function of <code>std::ostream</code>, see <a href=\"https://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt\" rel=\"nofollow noreferrer\">cpp reference</a>. You'll notice that there is no overload for <code>char const*</code> or <code>std::string</code> provided. These are defined <a href=\"https://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt2\" rel=\"nofollow noreferrer\">separately</a>, as free-standing functions, among some others.</p>\n\n<p>Those operators defined as members (only!) work with the <code>cout.operator&lt;&lt;(argument)</code> notation, the free-standing ones with the two-argument variant.</p>\n\n<p>However, all these differences are hidden away if you use the operators as they are intended:</p>\n\n<pre><code>std::cout &lt;&lt; whatEver;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 512, "user_id": 1158405, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/19fbf8775d19553a9cf35899692b03b1?s=128&d=identicon&r=PG", "display_name": "ppk", "link": "https://stackoverflow.com/users/1158405/ppk"}, "is_accepted": false, "score": 0, "last_activity_date": 1563371817, "creation_date": 1563371817, "answer_id": 57077634, "question_id": 57076834, "link": "https://stackoverflow.com/questions/57076834/why-doesnt-operatorcout-double-work/57077634#57077634", "title": "Why doesn&#39;t &#39;operator&lt;&lt;(cout, double)&#39; work?", "body": "<p>You are using operator not in the right way.</p>\n\n<p>operators may be implemented as member functions or non-member.</p>\n\n<p>when running</p>\n\n<pre><code> cout.operator &lt;&lt;(a);\n cout &lt;&lt; a;\n cout.operator &lt;&lt;(s);\n cout &lt;&lt; s;\n</code></pre>\n\n<p>you are calling the class operarator implementation;</p>\n\n<p>but when you call</p>\n\n<pre><code>operator&lt;&lt;(cout, a);\n</code></pre>\n\n<p>where is the implementation ? o_O</p>\n\n<p><strong>Working example</strong> tested vc++13 &amp; <a href=\"https://onlinegdb.com/SkeSOih-S\" rel=\"nofollow noreferrer\">gcc(here)</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing std::cin;\nusing std::cout;\nusing std::endl;\n\nint main(int argc, char* argv[])\n{\n   int number = 13;\n   float pi = 3.13f;\n   double dp = 2.23233;\n\n\n   cout &lt;&lt; \"number: \" &lt;&lt; number &lt;&lt; endl;\n   cout &lt;&lt; \"pi: \" &lt;&lt; pi &lt;&lt; endl;\n   cout &lt;&lt; \"double: \" &lt;&lt; dp &lt;&lt; endl &lt;&lt; endl;\n\n\n   cout.operator &lt;&lt;(number) &lt;&lt; endl;\n   cout.operator &lt;&lt;(pi) &lt;&lt;  endl;\n   cout.operator &lt;&lt;(dp);\n}\n</code></pre>\n\n<p>Comment if need member or non-member implementation of example type.</p>\n"}], "owner": {"reputation": 63, "user_id": 10702753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a115749861bbc18d2d7524c51a4a24f2?s=128&d=identicon&r=PG&f=1", "display_name": "Gabonica", "link": "https://stackoverflow.com/users/10702753/gabonica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 1, "answer_count": 5, "score": 4, "last_activity_date": 1563377112, "creation_date": 1563369529, "last_edit_date": 1563370363, "question_id": 57076834, "link": "https://stackoverflow.com/questions/57076834/why-doesnt-operatorcout-double-work", "title": "Why doesn&#39;t &#39;operator&lt;&lt;(cout, double)&#39; work?", "body": "<p>I'm studying overloaded operators. \nI don't get the difference between  using the <code>&lt;&lt;</code>-operator on a <code>double</code> / an <code>std::string</code>. </p>\n\n<pre><code>int main()\n{\n    double a = 12;\n    string s = \"example\";\n\n    operator&lt;&lt;(cout, a); //doesn't work\n    cout.operator&lt;&lt;(a);  //works\n\n    operator&lt;&lt;(cout, s); //works\n    cout.operator&lt;&lt;(s);  //doesn't work   \n}    \n</code></pre>\n\n<p>Why aren't <code>operator&lt;&lt;(cout, a)</code> and <code>cout.operator&lt;&lt;(s);</code> working?</p>\n"}, {"tags": ["c++", "qt", "combobox", "qcombobox", "qtextbrowser"], "comments": [{"owner": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "edited": false, "score": 0, "creation_date": 1563369574, "post_id": 57076670, "comment_id": 100676927, "body": "What is the problem with the code? What have you tried?"}, {"owner": {"reputation": 11, "user_id": 11791139, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-foqvoBTQWiE/AAAAAAAAAAI/AAAAAAAAAD0/VHkbFDIilO8/photo.jpg?sz=128", "display_name": "Anastazja Frontczak", "link": "https://stackoverflow.com/users/11791139/anastazja-frontczak"}, "reply_to_user": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "edited": false, "score": 0, "creation_date": 1563369886, "post_id": 57076670, "comment_id": 100677134, "body": "@SilvanoCerza I cannot connect ComboBox with a TextBrowser. I want program to Show some specific lines in a TextBrowser when some item in ComboBox i choosen and a PushButton is clicked.  I tried: void Servers::on_pushButton_clicked() { if(file.open (QIODevice::ReadOnly | QIODevice::Text))     {         for(int i=line_counter;i&lt;line_counter+5;i++)         {             ui-&gt;textBrowser-&gt;setText(stream.readLine(i));         }     }     stream.flush ();     file.close (); } But nothing happens."}, {"owner": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "edited": false, "score": 0, "creation_date": 1563370010, "post_id": 57076670, "comment_id": 100677222, "body": "Please edit the question, code can&#39;t be formatted in comments."}, {"owner": {"reputation": 11, "user_id": 11791139, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-foqvoBTQWiE/AAAAAAAAAAI/AAAAAAAAAD0/VHkbFDIilO8/photo.jpg?sz=128", "display_name": "Anastazja Frontczak", "link": "https://stackoverflow.com/users/11791139/anastazja-frontczak"}, "reply_to_user": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "edited": false, "score": 0, "creation_date": 1563370201, "post_id": 57076670, "comment_id": 100677327, "body": "@SilvanoCerza Ok, done.  I&#39;m sorry, I&#39;m new to StackOverFlow."}, {"owner": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "edited": false, "score": 0, "creation_date": 1563370964, "post_id": 57076670, "comment_id": 100677815, "body": "How your button named in the ui?"}, {"owner": {"reputation": 11, "user_id": 11791139, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-foqvoBTQWiE/AAAAAAAAAAI/AAAAAAAAAD0/VHkbFDIilO8/photo.jpg?sz=128", "display_name": "Anastazja Frontczak", "link": "https://stackoverflow.com/users/11791139/anastazja-frontczak"}, "reply_to_user": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "edited": false, "score": 0, "creation_date": 1563371801, "post_id": 57076670, "comment_id": 100678402, "body": "@SilvanoCerza pushButton"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11791139, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-foqvoBTQWiE/AAAAAAAAAAI/AAAAAAAAAD0/VHkbFDIilO8/photo.jpg?sz=128", "display_name": "Anastazja Frontczak", "link": "https://stackoverflow.com/users/11791139/anastazja-frontczak"}, "edited": false, "score": 0, "creation_date": 1563436994, "post_id": 57077810, "comment_id": 100701628, "body": "Thank you. Actually when I put it in my code, nothing happens. And I have one more doubt: becuse I don&#39;t want to read only the line that is in ComboBox. I also want to read 4 more lines of a file."}, {"owner": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "reply_to_user": {"reputation": 11, "user_id": 11791139, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-foqvoBTQWiE/AAAAAAAAAAI/AAAAAAAAAD0/VHkbFDIilO8/photo.jpg?sz=128", "display_name": "Anastazja Frontczak", "link": "https://stackoverflow.com/users/11791139/anastazja-frontczak"}, "edited": false, "score": 0, "creation_date": 1563438060, "post_id": 57077810, "comment_id": 100702194, "body": "My bad, I didn&#39;t realize the ComboBox didn&#39;t store all the lines. I&#39;ve edited the answer, now it should work."}, {"owner": {"reputation": 11, "user_id": 11791139, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-foqvoBTQWiE/AAAAAAAAAAI/AAAAAAAAAD0/VHkbFDIilO8/photo.jpg?sz=128", "display_name": "Anastazja Frontczak", "link": "https://stackoverflow.com/users/11791139/anastazja-frontczak"}, "edited": false, "score": 0, "creation_date": 1563442649, "post_id": 57077810, "comment_id": 100704705, "body": "Now it shows all the lines. when index is 1 it shows all 10 lines and when index is 2 it also shows all 10 lines.  Adding a lines to the text was a good idea. But there is a problem, because the lines are next to each other and I would like to show them one under another (like in my file). I tried with setTabPosition but it didn&#39;t work."}, {"owner": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "reply_to_user": {"reputation": 11, "user_id": 11791139, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-foqvoBTQWiE/AAAAAAAAAAI/AAAAAAAAAD0/VHkbFDIilO8/photo.jpg?sz=128", "display_name": "Anastazja Frontczak", "link": "https://stackoverflow.com/users/11791139/anastazja-frontczak"}, "edited": false, "score": 0, "creation_date": 1563443583, "post_id": 57077810, "comment_id": 100705230, "body": "Right, I forgot to add a newline with <code>text += &#39;\\n&#39;;</code>. Now it should be all right."}, {"owner": {"reputation": 11, "user_id": 11791139, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-foqvoBTQWiE/AAAAAAAAAAI/AAAAAAAAAD0/VHkbFDIilO8/photo.jpg?sz=128", "display_name": "Anastazja Frontczak", "link": "https://stackoverflow.com/users/11791139/anastazja-frontczak"}, "edited": false, "score": 0, "creation_date": 1563445659, "post_id": 57077810, "comment_id": 100706399, "body": "The statement &quot;if (index == lineCount || index &lt; lineCount + 5)&quot; is always true because e.g. when index is 1: so 1==1 || 1&lt;6, in next iteration: 1=/=2 || 1&lt;7, and so on.  But I had an idea modifying your code for: int linecount= 5*index-4; (because when e.g. index=2 then the line in my file is 6, and index is 1 then the line in my file is 1).  And I think this part:  if (... || index &lt; lineCount + 5) should be changed and I have an idea how. I made one more variable outside the loop, that is: int new_counter=linecount+5; and the if looks now:if(index == lineCount || lineCount &lt; new_count)"}, {"owner": {"reputation": 11, "user_id": 11791139, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-foqvoBTQWiE/AAAAAAAAAAI/AAAAAAAAAD0/VHkbFDIilO8/photo.jpg?sz=128", "display_name": "Anastazja Frontczak", "link": "https://stackoverflow.com/users/11791139/anastazja-frontczak"}, "edited": false, "score": 0, "creation_date": 1563445967, "post_id": 57077810, "comment_id": 100706560, "body": "But now the output is first 5 lines of a file no matter what the index is."}, {"owner": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "reply_to_user": {"reputation": 11, "user_id": 11791139, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-foqvoBTQWiE/AAAAAAAAAAI/AAAAAAAAAD0/VHkbFDIilO8/photo.jpg?sz=128", "display_name": "Anastazja Frontczak", "link": "https://stackoverflow.com/users/11791139/anastazja-frontczak"}, "edited": false, "score": 0, "creation_date": 1563447623, "post_id": 57077810, "comment_id": 100707432, "body": "I&#39;ve changed the answer, check it out. This should work, let me know."}, {"owner": {"reputation": 11, "user_id": 11791139, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-foqvoBTQWiE/AAAAAAAAAAI/AAAAAAAAAD0/VHkbFDIilO8/photo.jpg?sz=128", "display_name": "Anastazja Frontczak", "link": "https://stackoverflow.com/users/11791139/anastazja-frontczak"}, "edited": false, "score": 0, "creation_date": 1563449473, "post_id": 57077810, "comment_id": 100708365, "body": "Thank you, but still the file is reading from the first line no matter what the index is."}, {"owner": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "reply_to_user": {"reputation": 11, "user_id": 11791139, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-foqvoBTQWiE/AAAAAAAAAAI/AAAAAAAAAD0/VHkbFDIilO8/photo.jpg?sz=128", "display_name": "Anastazja Frontczak", "link": "https://stackoverflow.com/users/11791139/anastazja-frontczak"}, "edited": false, "score": 0, "creation_date": 1563452200, "post_id": 57077810, "comment_id": 100709916, "body": "You mean that only the first 5 lines are returned or that you want to avoid reading the file each time? The first case seems strange, the code now is correct, there must be something else, instead if you want to avoid reading the file each time you could read it one time and save a list of its lines, so you read form there."}, {"owner": {"reputation": 11, "user_id": 11791139, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-foqvoBTQWiE/AAAAAAAAAAI/AAAAAAAAAD0/VHkbFDIilO8/photo.jpg?sz=128", "display_name": "Anastazja Frontczak", "link": "https://stackoverflow.com/users/11791139/anastazja-frontczak"}, "edited": false, "score": 1, "creation_date": 1563529657, "post_id": 57077810, "comment_id": 100739127, "body": "Thank you for all your help. You&#39;ve inspired me for solving the problem. I changed some things a little bit and now it&#39;s working. :)"}], "tags": [], "owner": {"reputation": 861, "user_id": 4156301, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZcC1Xqf-d4/AAAAAAAAAAI/AAAAAAAAAKg/Px0JaE_dlVk/photo.jpg?sz=128", "display_name": "SilvanoCerza", "link": "https://stackoverflow.com/users/4156301/silvanocerza"}, "is_accepted": false, "score": 0, "last_activity_date": 1563447578, "last_edit_date": 1563447578, "creation_date": 1563372312, "answer_id": 57077810, "question_id": 57076670, "link": "https://stackoverflow.com/questions/57076670/how-do-i-connect-combobox-and-textbrowser-using-pushbutton-qt/57077810#57077810", "title": "How do I connect ComboBox and TextBrowser using PushButton-Qt?", "body": "<p>You can avoid reading from file each team you want to update <code>textBrowser</code> if the text is already in the <code>comboBox</code>.</p>\n\n<p>First of all connect the pushButton signal with your method:</p>\n\n<pre><code>connect(ui-&gt;pushButton, &amp;QPushButton::clicked, this, &amp;Servers::on_pushButton_clicked);\n</code></pre>\n\n<p>Then change <code>on_pushButton_clicked</code> like so:</p>\n\n<pre><code>void Servers::on_pushButton_clicked()\n{\n    if(file.open (QIODevice::ReadOnly | QIODevice::Text))\n    {\n        int index = ui-&gt;comboBox-&gt;currentIndex();\n        int from = 5 * index;\n        int to = from + 5;\n        QTextStream stream(&amp;file);\n        int lineCount = 0;\n        QString text;\n        QString line;\n        while (stream.readLineInto(&amp;line)) {\n            if (from &gt;= lineCount &amp;&amp; lineCount &lt; to) {\n                text += line;\n                text += '\\n';\n            }\n            lineCount++;\n        }\n        ui-&gt;textBrowser-&gt;setText(text.toString());\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11791139, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-foqvoBTQWiE/AAAAAAAAAAI/AAAAAAAAAD0/VHkbFDIilO8/photo.jpg?sz=128", "display_name": "Anastazja Frontczak", "link": "https://stackoverflow.com/users/11791139/anastazja-frontczak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1563447578, "creation_date": 1563369018, "last_edit_date": 1563370147, "question_id": 57076670, "link": "https://stackoverflow.com/questions/57076670/how-do-i-connect-combobox-and-textbrowser-using-pushbutton-qt", "title": "How do I connect ComboBox and TextBrowser using PushButton-Qt?", "body": "<p>I make a program that reads a file. I have a combobox that reads lines numbers: 1,6,11,..etc. I want to e.g. read lines 1-5 when line number 1 is choosen in combobox and push button is clicked (or read lines 6-10 when line 6 is choosen, end so on). \nFor now I have this.</p>\n\n<pre><code>int line_counter=1;\nif(file.open (QIODevice::ReadOnly | QIODevice::Text))\n{\n    while(!stream.atEnd())\n    {\n        line = stream.readLine ();\n        if(!line.isNull ())\n        {\n            if((line_counter%5)==1)\n                ui-&gt;comboBox-&gt;addItem (line);\n            line_counter++;\n        }\n     }\n }\n stream.flush ();\n file.close ();\n\nvoid Servers::on_pushButton_clicked()\n{\n\n     if(file.open (QIODevice::ReadOnly | QIODevice::Text))\n{\n    for(int i=line_counter;i&lt;line_counter+5;i++)\n    {\n        ui-&gt;textBrowser-&gt;setText(stream.readLine(i));\n    }\n}\n    file.close ();\n\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "c++11", "pthreads"], "comments": [{"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1563369255, "post_id": 57076645, "comment_id": 100676685, "body": "Is a <code>policy</code> of 0 valid?"}, {"owner": {"reputation": 92, "user_id": 5444727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb27f5ff49f370aaab3b90d6c612502?s=128&d=identicon&r=PG&f=1", "display_name": "harishaj90", "link": "https://stackoverflow.com/users/5444727/harishaj90"}, "reply_to_user": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1563370704, "post_id": 57076645, "comment_id": 100677642, "body": "#define SCHED_OTHER\t\t0 #define SCHED_FIFO\t\t1 #define SCHED_RR\t\t2"}, {"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1563370749, "post_id": 57076645, "comment_id": 100677667, "body": "There&#39;s a reason that the defines exist. Use them. It&#39;s one less possible mistake. If those values aren&#39;t defined in the documentation, you can&#39;t rely on them."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 0, "last_activity_date": 1563369679, "last_edit_date": 1563369679, "creation_date": 1563369288, "answer_id": 57076767, "question_id": 57076645, "link": "https://stackoverflow.com/questions/57076645/what-is-highest-priority-of-threads-in-process/57076767#57076767", "title": "What is highest priority of threads in process?", "body": "<p><code>man sched_get_priority_max</code>:</p>\n\n<blockquote>\n<pre><code>int sched_get_priority_max(int policy);\nint sched_get_priority_min(int policy);\n</code></pre>\n  \n  <p><code>sched_get_priority_max()</code> returns the maximum priority value that can be used with the scheduling algorithm identified by policy. <code>sched_get_priority_min()</code> returns the minimum priority value that can be used with the scheduling algorithm identified by policy. Supported policy values are <code>SCHED_FIFO</code>, <code>SCHED_RR</code>, <code>SCHED_OTHER</code>, <code>SCHED_BATCH</code>, <code>SCHED_IDLE</code>, and <code>SCHED_DEADLINE</code>.</p>\n</blockquote>\n\n<hr>\n\n<p>Note that 0 is not specified in the list of valid policies.</p>\n"}, {"tags": [], "owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "is_accepted": false, "score": 0, "last_activity_date": 1563402924, "creation_date": 1563402924, "answer_id": 57084823, "question_id": 57076645, "link": "https://stackoverflow.com/questions/57076645/what-is-highest-priority-of-threads-in-process/57084823#57084823", "title": "What is highest priority of threads in process?", "body": "<p>Not everything in eeorika's answer is correct.  The <a href=\"http://man7.org/linux/man-pages/man7/sched.7.html\" rel=\"nofollow noreferrer\">documentation</a> for <code>sched_setscheduler</code>, says (amongst other things) this:</p>\n\n<blockquote>\n  <p>For threads scheduled under one of the normal scheduling policies (SCHED_OTHER, SCHED_IDLE, SCHED_BATCH), sched_priority is not used in scheduling decisions (it must be specified as 0).</p>\n</blockquote>\n\n<p>and scheduling policy 0 corresponds to <code>SCHED_OTHER</code>, which is why your call is failing.</p>\n\n<p>I may be wrong, but there doesn't actually seem to be a way to raise the priority of an individual thread without root privileges.  See also <a href=\"https://stackoverflow.com/questions/3649281/how-to-increase-thread-priority-in-pthreads\">How to increase thread priority in pthreads?</a>.</p>\n"}], "owner": {"reputation": 92, "user_id": 5444727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb27f5ff49f370aaab3b90d6c612502?s=128&d=identicon&r=PG&f=1", "display_name": "harishaj90", "link": "https://stackoverflow.com/users/5444727/harishaj90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 0, "accepted_answer_id": 57076767, "answer_count": 2, "score": -1, "last_activity_date": 1563402924, "creation_date": 1563368927, "last_edit_date": 1563371562, "question_id": 57076645, "link": "https://stackoverflow.com/questions/57076645/what-is-highest-priority-of-threads-in-process", "title": "What is highest priority of threads in process?", "body": "<p>Creating thread with priority of '-15' using pthread_setschedparam API. But failing with value EINVAL (as per MAN page : policy is not a recognized policy, or param does not make sense for the policy.) N</p>\n\n<p>As I know priority of process can be renice to value (-19 to 20), But I don't know what is priority range for threads in process. Need expert help to understand this point.</p>\n\n<pre><code>class CRAII_Priority_Thread : public std::thread\n{\n    std::thread mDSIRecvThread;\n    const int   mPolicy;\n    sched_param mSchParams;\n\n  public:\n    CRAII_Priority_Thread(std::thread&amp;&amp; thr,const int policy, const int priority)\n        : mDSIRecvThread{std::move(thr)}\n        , mPolicy{policy}\n        , mSchParams{priority}\n    {\n        sched_param currSchParams;\n        int currPolicy = 0;\n        if (pthread_getschedparam(mDSIRecvThread.native_handle(), &amp;currPolicy, &amp;currSchParams))\n        {\n            std::cout &lt;&lt; \"Failed to pthread_getschedparam: ERROR \"  &lt;&lt; std::strerror(errno) &lt;&lt; \"\\n\";\n        }\n        std::cout &lt;&lt; \"Current configuration DSIThread [\"&lt;&lt; mDSIRecvThread.get_id()\n                  &lt;&lt; \"] currPolicy [\" &lt;&lt; currPolicy &lt;&lt; \"] and PRIORITY [\"\n                  &lt;&lt; currSchParams.sched_priority &lt;&lt; \"]\\n\";\n        std::cout &lt;&lt; \"Trying to set configuration as DSIThread  [\"&lt;&lt; mDSIRecvThread.get_id()\n                  &lt;&lt; \"] currPolicy [\" &lt;&lt; mPolicy &lt;&lt; \"] and PRIORITY [\"\n                  &lt;&lt; mSchParams.sched_priority &lt;&lt; \"]\\n\";\n\n        int iRet = -1;\n        if (iRet = pthread_setschedparam(mDSIRecvThread.native_handle(), mPolicy, &amp;mSchParams))\n        {\n                switch(iRet)\n                {\n                        case ESRCH:\n                                std::cout &lt;&lt; \"No thread with the ID thread could be found\\n\";\n                        break;\n                        case EINVAL:\n                                std::cout &lt;&lt; \"policy is not a recognized policy, or param does not make sense for the policy.\\n\";\n                        break;\n                        case EPERM:\n                                std::cout &lt;&lt; \"The caller does not have appropriate privileges to set the specified scheduling policy and parameters.\\n\";\n                        break;\n                        case ENOTSUP:\n                                std::cout &lt;&lt; \"attempt was made to set the policy or scheduling parameters to an unsupported value\\n\";\n                        break;\n                        default:\n                        break;\n                }\n\n            std::cout &lt;&lt; \"Return value [\" &lt;&lt; iRet &lt;&lt; \"] Failed to pthread_setschedparam: ERROR \"  &lt;&lt; std::strerror(errno) &lt;&lt; \"\\n\";\n        }\nif (pthread_getschedparam(mDSIRecvThread.native_handle(), &amp;currPolicy, &amp;currSchParams))\n        {\n            std::cout &lt;&lt; \"Failed to pthread_getschedparam: ERROR \"  &lt;&lt; std::strerror(errno) &lt;&lt; \"\\n\";\n        }\n        std::cout &lt;&lt; \"setconfiguration successfull current configuration  DSIThread [\"&lt;&lt; mDSIRecvThread.get_id()\n                  &lt;&lt; \"] currPolicy [\" &lt;&lt; currPolicy &lt;&lt; \"] and PRIORITY [\"\n                  &lt;&lt; currSchParams.sched_priority &lt;&lt; \"]\\n\";\n    }\n\n    ~CRAII_Priority_Thread()\n    {\n        if (mDSIRecvThread.joinable())\n        {\n            mDSIRecvThread.join();\n        }\n        else\n        {\n            std::cout &lt;&lt; \"ERROR : Failed to join DSI recv thread\\n\";\n        }\n    }\n\n  private:\n    sched_param sch_params;\n};\n\nvoid thread_function()\n{\n        std::cout &lt;&lt; __FUNCTION__ &lt;&lt; \"\\n\";\n}\nint main()\n{\n        CRAII_Priority_Thread(std::thread(&amp;thread_function), 0, -15);\n        return 0;\n}\n\n\n</code></pre>\n\n<p>Getting error like below:</p>\n\n<blockquote>\n  <p>Current configuration DSIThread [140333652039424] currPolicy [0] and\n  PRIORITY [0]</p>\n  \n  <p>Trying to set configuration as DSIThread  [140333652039424] currPolicy\n  [0] and PRIORITY [-15]</p>\n  \n  <p>policy is not a recognized policy, or param does not make sense for\n  the policy. thread_function</p>\n  \n  <p>Return value [22] Failed to pthread_setschedparam: ERROR Invalid\n  argument</p>\n  \n  <p>Failed to pthread_getschedparam: ERROR Invalid argument\n  setconfiguration successfull current configuration  DSIThread\n  [140333652039424] currPolicy [0] and PRIORITY [0]</p>\n</blockquote>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1563367292, "post_id": 57076026, "comment_id": 100675341, "body": "<code>char gok[aantGaatjes+1];</code> That&#39;s not valid C++ unless aantGaatjes is a compile time constant. If it works anyway, you are relying on compiler extensions (VLA), making your code non-portable."}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 2, "creation_date": 1563367362, "post_id": 57076026, "comment_id": 100675377, "body": "All the problems you&#39;re having stem from using C-style arrays instead of std containers. Use <code>std::array</code> or <code>std::vector</code> instead."}, {"owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 1, "creation_date": 1563367441, "post_id": 57076026, "comment_id": 100675425, "body": "The problem is trying to convert a <code>char[N]</code> to a <code>char []</code>. Just use <code>std::list&lt;char *&gt;</code> instead of <code>std::list&lt;char []&gt;</code> and do <code>mogelijkeGok.push_front(gok);</code> (that is, allow the array to decay to a pointer)."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 4, "creation_date": 1563367445, "post_id": 57076026, "comment_id": 100675426, "body": "<code>mogelijkeGok.push_front (&amp;gok);</code> \u2013 bound to fail in any case, <code>gok</code> is a local variable that get&#39;s destroyed on leaving the function (so even if you manage to successfully <code>push_front</code>, you&#39;ll remain with a dangling pointer!). <code>&amp;gok</code> is of type <code>char(*)[...]</code>, <i>not</i> <code>char*</code>!"}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "reply_to_user": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "edited": false, "score": 1, "creation_date": 1563367577, "post_id": 57076026, "comment_id": 100675509, "body": "@Cornstalks this is actively harmful advice. See the comment below as to why that is."}, {"owner": {"reputation": 9, "user_id": 10368560, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-M22B0EN8zp8/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMBYsOWsJ8WR6M-Ub7MW6IyNino7Q/mo/photo.jpg?sz=128", "display_name": "nvr", "link": "https://stackoverflow.com/users/10368560/nvr"}, "edited": false, "score": 0, "creation_date": 1563367590, "post_id": 57076026, "comment_id": 100675515, "body": "I have used #include &lt;iostream&gt;, #include &lt;list&gt; and using namespace std."}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1563367605, "post_id": 57076026, "comment_id": 100675524, "body": "@nvr is <code>aantGaatjes</code> a compile-time constant? Do you know the value of it before the program runs?"}, {"owner": {"reputation": 9, "user_id": 10368560, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-M22B0EN8zp8/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMBYsOWsJ8WR6M-Ub7MW6IyNino7Q/mo/photo.jpg?sz=128", "display_name": "nvr", "link": "https://stackoverflow.com/users/10368560/nvr"}, "edited": false, "score": 0, "creation_date": 1563368233, "post_id": 57076026, "comment_id": 100675958, "body": "The user needs to give up the value of aantGaatjes, so you dont know the value before the program runs."}], "answers": [{"comments": [{"owner": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "edited": false, "score": 0, "creation_date": 1563367515, "post_id": 57076144, "comment_id": 100675470, "body": "This won&#39;t compile anyway. The bound of the array are not defined."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1563367519, "post_id": 57076144, "comment_id": 100675473, "body": "even if it did what you claimed, stdlib containers cannot store references."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1563370093, "post_id": 57076144, "comment_id": 100677277, "body": "This is very bad advice.  You&#39;re pushing a pointer to a function local object into the list.  When the function ends, the array is destroyed and you have dangling pointer."}], "tags": [], "owner": {"reputation": 1115, "user_id": 996017, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2961d7fdaf2e58e08bb075a2fb689595?s=128&d=identicon&r=PG", "display_name": "Matei Florescu", "link": "https://stackoverflow.com/users/996017/matei-florescu"}, "is_accepted": false, "score": -8, "last_activity_date": 1563367411, "creation_date": 1563367411, "answer_id": 57076144, "question_id": 57076026, "link": "https://stackoverflow.com/questions/57076026/no-matching-function-for-call-to-list-and-push-front/57076144#57076144", "title": "No matching function for call to (list and push_front)", "body": "<p>You want to put in a list of char arrays a reference to a char array: </p>\n\n<pre><code>void Mastermind::genereercodes (int getal, list&lt;char[]&gt; mogelijkeGok)\n{\nchar gok[aantGaatjes+1]; //aantGaatjes is an integer\n...\nmogelijkeGok.push_front (&amp;gok);\n\n} \n</code></pre>\n\n<p>should be: </p>\n\n<pre><code>void Mastermind::genereercodes (int getal, list&lt;char[]&gt; mogelijkeGok)\n{\nchar gok[aantGaatjes+1]; //aantGaatjes is an integer\n...\nmogelijkeGok.push_front (gok);\n\n} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "is_accepted": false, "score": 1, "last_activity_date": 1563368579, "creation_date": 1563368579, "answer_id": 57076518, "question_id": 57076026, "link": "https://stackoverflow.com/questions/57076026/no-matching-function-for-call-to-list-and-push-front/57076518#57076518", "title": "No matching function for call to (list and push_front)", "body": "<p>You're using C-style arrays for no reason. There are two possible replacements: <code>std::array</code> and <code>std::vector</code>. Since we know that:</p>\n\n<blockquote>\n  <p>The user needs to give up the value of aantGaatjes, so you dont know the value before the program runs.</p>\n</blockquote>\n\n<p>This leaves only <code>std::vector</code> on the table. One more thing that needs fixing is using the out-parameters, which, aside of being done incorrectly in your code, is bad practice regardless. The code then becomes:</p>\n\n<pre><code>std::vector&lt;char&gt; Mastermind::genereercodes (int getal)\n{\n    std::vector&lt;char&gt; gok(aantGaatjes+1);\n\n    for (char&amp; e : gok) {\n        e = (getal % aantKleuren) + '0';\n        getal = getal / aantKleuren;\n    }\n\n    return gok;\n}\n</code></pre>\n\n<p>This doesn't handle appending to the list, and shouldn't need to. The caller having that list can simply call it like so:</p>\n\n<pre><code>mogelijkeGok.push_front(genereercodes(getal));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 0, "last_activity_date": 1563368975, "creation_date": 1563368975, "answer_id": 57076662, "question_id": 57076026, "link": "https://stackoverflow.com/questions/57076026/no-matching-function-for-call-to-list-and-push-front/57076662#57076662", "title": "No matching function for call to (list and push_front)", "body": "<p>There are several problems with your code; dropping irrelevant lines:</p>\n\n<pre><code>void Mastermind::genereercodes (int getal, list&lt;char[]&gt; mogelijkeGok)\n{\n    char gok[aantGaatjes+1];         // (1)\n    mogelijkeGok.push_front (&amp;gok);  // (2), (3)\n}\n</code></pre>\n\n<ol>\n<li><p>Unless <code>aantGaatjes</code> is a compile time constant, you are creating a so-called 'variable length array'. This was introduced in C99 (bad mistake in my and others' eyes), but is not valid C++. Some compilers support it as an extension, though (e. g. GCC). <br/>\nRelying on compiler extensions makes your code non-portable, another compiler might not provide the same support for, so prefer not to use extensions unless you have no other choice.</p></li>\n<li><p>First issue with this line is the type of pointer you produce with <code>&amp;gok</code>: It will be of type pointer to array of specific length (<code>char(*)[SomeLength]</code>), not pointer to char. If you need the latter, then just pass the array itself as argument, it will decay to pointer automatically (but I won't show explicitly due to (3)!).</p></li>\n<li><p><code>gok</code> is a local variable and as such will be destroyed immediately when exiting the function. What remains in your list then is a pointer to some object that has been invalidated long ago, i. e. a dangling pointer, using it will result in undefined behaviour!</p></li>\n</ol>\n\n<p>To get around the third issue, you'd need to create an array with dynamic storage duration, i. e. <code>char* gok = new char[...];</code>. This would solve at the same time the first issue. <strong><em>But</em></strong> you then need to care for appropriate destruction at some later point, otherwise you will remain with a memory leak. However, there are two data types that allow for doing so automatically: <code>std::vector</code> and <code>std::array</code>. (Actually, there are even more, but these two are the most commonly used ones).</p>\n\n<p>If all your arrays you produce have the same length, you might use <code>std::array</code>, otherwise need to use <code>std::vector</code>. You'd change your data structure as well, so your function might look like:</p>\n\n<pre><code>void Mastermind::genereercodes (int getal, std::list&lt;std::vector&lt;char&gt;&gt; mogelijkeGok)\n{\n    std::vector&lt;char&gt; gok;\n    gok.reserve(aantGaatjes+1); // not absolutely necessary, but prevents re-allocations\n                                // so always good idea to use if you know size in advance\n\n    for (int i = 0; i &lt; aantGaatjes; i++)\n    {\n        gok.push_back(getal % aantKleuren + '0');\n        getal /= aantKleuren;\n        //    ^  effectively does the same, but less to write and better to read...\n    }\n    mogelijkeGok.push_front(std::move(gok)); // move semantics, prevents unnecessary copy\n}\n</code></pre>\n\n<p>A bit more optimised, avoiding moving, too:</p>\n\n<pre><code>mogelijkeGok.emplace_front();\nstd::vector&lt;char&amp;&gt; gok = mogelijkeGok.front();\ngok.reserve(aantGaatjes+1);\n// rest as was, but no push_front, of course...\n</code></pre>\n\n<p>If you opt for <code>std::array</code>, you <em>should</em> use the optimised variant, as <code>std::array</code> cannot move its internal array, at best its array elements (not in given case, though), thus you'd always copy the arrays on pushing to front.</p>\n"}], "owner": {"reputation": 9, "user_id": 10368560, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-M22B0EN8zp8/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMBYsOWsJ8WR6M-Ub7MW6IyNino7Q/mo/photo.jpg?sz=128", "display_name": "nvr", "link": "https://stackoverflow.com/users/10368560/nvr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1563369328, "creation_date": 1563367054, "last_edit_date": 1563369328, "question_id": 57076026, "link": "https://stackoverflow.com/questions/57076026/no-matching-function-for-call-to-list-and-push-front", "title": "No matching function for call to (list and push_front)", "body": "<p>For the game mastermind I need to generate all possible guesses.\nI want to place them in <code>list&lt;char[]&gt;</code>.\nI still get this error about <code>push_front</code>.</p>\n\n<p>Can somebody help me?</p>\n\n<pre><code>void Mastermind::genereercodes (int getal, list&lt;char[]&gt; mogelijkeGok)\n{\nchar gok[aantGaatjes+1]; //aantGaatjes is an integer\nfor (int i = 0; i &lt; aantGaatjes; i++){\n    gok[i] = (getal % aantKleuren) + '0'; //aantKleuren is an integer\n    getal = getal / aantKleuren;\n} // for\nmogelijkeGok.push_front (&amp;gok);\n\n}   // genereercodes\n</code></pre>\n\n<p>This is the error I get:</p>\n\n<pre><code>mastermind.cc: In member function \u2018void Mastermind::genereercodes(int,std::__cxx11::list&lt;char []&gt;)\u2019: \nmastermind.cc:200:32: error: no matching  unction for call to \u2018std::__cxx11::list&lt;char []&gt;::push_front(char *)[(((Mastermind*)this)-&gt;Mastermind::aantGaatjes + 1)])\u2019\nmogelijkeGok.push_front (&amp;gok);\n</code></pre>\n"}, {"tags": ["c++", "arrays", "c++11", "pointers"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1563367133, "post_id": 57075980, "comment_id": 100675232, "body": "No, the expression <code>&amp;a</code> is an r-value, you can&#39;t take its address. You can however do <code>A* pa = &amp;a; myfunction(&amp;pa);</code>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1563367214, "post_id": 57075980, "comment_id": 100675295, "body": "With that said, your <code>myfunction</code> seems suspect, why does it need a pointer to a pointer? What is it doing with the pointer? That needs to be known before we can tell you what you should really pass."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1563367214, "post_id": 57075980, "comment_id": 100675296, "body": "I would suggest you don&#39;t be a two star programmer.  If you need an array of pointers, take an array of pointers.  If you need a pointer that you want to modify, take a reference to a pointer.  C++ has a very nice type system that you can leverage."}, {"owner": {"reputation": 36741, "user_id": 258483, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dd4dee2094dcd427aaec8ee329d9cfd6?s=128&d=identicon&r=PG", "display_name": "Dims", "link": "https://stackoverflow.com/users/258483/dims"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1563367841, "post_id": 57075980, "comment_id": 100675673, "body": "@Someprogrammerdude why wouldn&#39;t it be constant pointer?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1563369458, "post_id": 57075980, "comment_id": 100676842, "body": "If you actually need to deal with arrays, consider reference to <code>std::vector</code> or <code>std::array</code> as parameter of <code>myFunction</code>."}], "answers": [{"comments": [{"owner": {"reputation": 36741, "user_id": 258483, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dd4dee2094dcd427aaec8ee329d9cfd6?s=128&d=identicon&r=PG", "display_name": "Dims", "link": "https://stackoverflow.com/users/258483/dims"}, "edited": false, "score": 0, "creation_date": 1563367984, "post_id": 57076100, "comment_id": 100675770, "body": "Isn&#39;t <code>(int*[]) { &amp;x }</code> the same as <code>{ &amp;x }</code> but converted to type <code>int*[]</code> by force?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 36741, "user_id": 258483, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dd4dee2094dcd427aaec8ee329d9cfd6?s=128&d=identicon&r=PG", "display_name": "Dims", "link": "https://stackoverflow.com/users/258483/dims"}, "edited": false, "score": 0, "creation_date": 1563368033, "post_id": 57076100, "comment_id": 100675812, "body": "@Dims No, it is not the same. I showed in my answer how the initialization of the parameter looks in C++."}, {"owner": {"reputation": 36741, "user_id": 258483, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dd4dee2094dcd427aaec8ee329d9cfd6?s=128&d=identicon&r=PG", "display_name": "Dims", "link": "https://stackoverflow.com/users/258483/dims"}, "edited": false, "score": 0, "creation_date": 1563368068, "post_id": 57076100, "comment_id": 100675837, "body": "Why isn&#39;t it the same?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 36741, "user_id": 258483, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dd4dee2094dcd427aaec8ee329d9cfd6?s=128&d=identicon&r=PG", "display_name": "Dims", "link": "https://stackoverflow.com/users/258483/dims"}, "edited": false, "score": 0, "creation_date": 1563368140, "post_id": 57076100, "comment_id": 100675896, "body": "@Dims Because C and C++ are two different languages. An interpretation of a braced list is determined by the type of the corresponding parameter The parameter of your function is not an array."}, {"owner": {"reputation": 36741, "user_id": 258483, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dd4dee2094dcd427aaec8ee329d9cfd6?s=128&d=identicon&r=PG", "display_name": "Dims", "link": "https://stackoverflow.com/users/258483/dims"}, "edited": false, "score": 2, "creation_date": 1563368182, "post_id": 57076100, "comment_id": 100675921, "body": "Is <code>(int *[] ){ &amp;x }</code> illegal in C++?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1563368208, "post_id": 57076100, "comment_id": 100675944, "body": "You might want to emphasize that the program you show is a C program, and not C++ (which doesn&#39;t have compound literals)."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 36741, "user_id": 258483, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dd4dee2094dcd427aaec8ee329d9cfd6?s=128&d=identicon&r=PG", "display_name": "Dims", "link": "https://stackoverflow.com/users/258483/dims"}, "edited": false, "score": 0, "creation_date": 1563368215, "post_id": 57076100, "comment_id": 100675948, "body": "@Dims C++ does not support compound literals."}, {"owner": {"reputation": 36741, "user_id": 258483, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dd4dee2094dcd427aaec8ee329d9cfd6?s=128&d=identicon&r=PG", "display_name": "Dims", "link": "https://stackoverflow.com/users/258483/dims"}, "edited": false, "score": 0, "creation_date": 1563368264, "post_id": 57076100, "comment_id": 100675986, "body": "Even <code>C++11</code> doesn&#39;t?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 36741, "user_id": 258483, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dd4dee2094dcd427aaec8ee329d9cfd6?s=128&d=identicon&r=PG", "display_name": "Dims", "link": "https://stackoverflow.com/users/258483/dims"}, "edited": false, "score": 0, "creation_date": 1563368325, "post_id": 57076100, "comment_id": 100676020, "body": "@Dims Even C++ 11 and C++ 20."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1563368539, "last_edit_date": 1563368539, "creation_date": 1563367259, "answer_id": 57076100, "question_id": 57075980, "link": "https://stackoverflow.com/questions/57075980/cant-pass-twice-pointer-with-braces/57076100#57076100", "title": "Can&#39;t pass twice pointer with braces", "body": "<p>You can not create as you are saying inline an object of the type A ** because the expression <code>{&amp;a}</code> is not an array. </p>\n\n<p>In fact it is the same as to wrote</p>\n\n<pre><code>A **p = { &amp;a };\n</code></pre>\n\n<p>Depending on the C++ release the right side expression is considered either as an initializer_list or as an object of the type <code>A *</code>.</p>\n\n<p>In any case such an initialization is invalid.</p>\n\n<p>And you need not to create an array though an intermediate variable will be required.</p>\n\n<p>You could write</p>\n\n<pre><code>A *p = &amp;a;\nmyfunction( &amp;p );\n</code></pre>\n\n<p>Maybe you should consider a possibility to redeclare the parameter like <code>A * &amp;</code>.</p>\n\n<p>You could do something similar as you are trying to do in a C-program.</p>\n\n<p>Here is a demonstrative program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef int A;\n\nvoid myfunction( A **p )\n{\n    printf( \"**p = %d\\n\", **p );\n}\n\nint main( void ) \n{\n    A x = 10;\n\n    myfunction( ( int *[] ){ &amp;x } );\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>**p = 10\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1563368950, "last_edit_date": 1592644375, "creation_date": 1563368531, "answer_id": 57076503, "question_id": 57075980, "link": "https://stackoverflow.com/questions/57075980/cant-pass-twice-pointer-with-braces/57076503#57076503", "title": "Can&#39;t pass twice pointer with braces", "body": "<blockquote>\n<p>I am trying to create an array of one pointer to a inline</p>\n<pre><code>myfunction( {&amp;a} );\n</code></pre>\n</blockquote>\n<p>This does not work, because <code>&amp;a</code> is <code>A*</code>, which is a different type from <code>A**</code>, and those types are not convertible to each other.</p>\n<blockquote>\n<p>Can I create A** inline?</p>\n</blockquote>\n<p>Yes, if you have a <code>A*</code> variable:</p>\n<pre><code>A* pointer = &amp;a;\nmyfunction(&amp;pointer);\n</code></pre>\n<p>But not from <code>A a</code> directly.</p>\n"}], "owner": {"reputation": 36741, "user_id": 258483, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dd4dee2094dcd427aaec8ee329d9cfd6?s=128&d=identicon&r=PG", "display_name": "Dims", "link": "https://stackoverflow.com/users/258483/dims"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1563368950, "creation_date": 1563366908, "last_edit_date": 1563368294, "question_id": 57075980, "link": "https://stackoverflow.com/questions/57075980/cant-pass-twice-pointer-with-braces", "title": "Can&#39;t pass twice pointer with braces", "body": "<p>I have a function </p>\n\n<pre><code>void myfunction(A**);\n</code></pre>\n\n<p>and a variable</p>\n\n<pre><code>A a;\n</code></pre>\n\n<p>I am trying to create an array of one pointer to <code>a</code> inline</p>\n\n<pre><code>myfunction( {&amp;a} );\n</code></pre>\n\n<p>and fail. It says I am passing <code>A*</code>. If I write</p>\n\n<pre><code>A *aa[] = {&amp;a};\nmyfunction( aa );\n</code></pre>\n\n<p>then it works.</p>\n\n<p>Can I create <code>A**</code> inline?</p>\n"}, {"tags": ["c++", "parameters", "multiple-inheritance"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1563366841, "post_id": 57075931, "comment_id": 100675050, "body": "The phrase &quot;parameters are not recognized&quot;  does not convey any useful information whatsoever. Please follow the instructions for creating a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 9770387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15HEL.jpg?s=128&g=1", "display_name": "JN_", "link": "https://stackoverflow.com/users/9770387/jn"}, "edited": false, "score": 0, "creation_date": 1563367599, "post_id": 57076033, "comment_id": 100675520, "body": "I understand your point from the coding point of view but this approach makes my model way more efficient. Containment is not something I would rather go for this case."}, {"owner": {"reputation": 1115, "user_id": 996017, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2961d7fdaf2e58e08bb075a2fb689595?s=128&d=identicon&r=PG", "display_name": "Matei Florescu", "link": "https://stackoverflow.com/users/996017/matei-florescu"}, "reply_to_user": {"reputation": 91, "user_id": 9770387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15HEL.jpg?s=128&g=1", "display_name": "JN_", "link": "https://stackoverflow.com/users/9770387/jn"}, "edited": false, "score": 2, "creation_date": 1563367984, "post_id": 57076033, "comment_id": 100675771, "body": "More efficient in terms of what? Certainly not speed. And from the coding point of view, it is simply bad design."}, {"owner": {"reputation": 91, "user_id": 9770387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15HEL.jpg?s=128&g=1", "display_name": "JN_", "link": "https://stackoverflow.com/users/9770387/jn"}, "edited": false, "score": 0, "creation_date": 1563369184, "post_id": 57076033, "comment_id": 100676629, "body": "the reason is I use the values of these parameters to do some math calculations in the bodies of other classes and if I use confinement, I have to modify all those equations. From the design perspective, you are completely right"}], "tags": [], "owner": {"reputation": 1115, "user_id": 996017, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2961d7fdaf2e58e08bb075a2fb689595?s=128&d=identicon&r=PG", "display_name": "Matei Florescu", "link": "https://stackoverflow.com/users/996017/matei-florescu"}, "is_accepted": false, "score": 2, "last_activity_date": 1563367091, "creation_date": 1563367091, "answer_id": 57076033, "question_id": 57075931, "link": "https://stackoverflow.com/questions/57075931/is-inheritance-a-viable-solution-to-pass-a-set-of-model-parameters-to-different/57076033#57076033", "title": "Is inheritance a viable solution to pass a set of model parameters to different classes?", "body": "<p>At the first question, the answer is no. \nYou should use containment instead of inheritance. \nInheritance is a relationship of type \"is a\". By using it as the base of your hierarchy you are stating that every class is a parameter file parser. </p>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 9770387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15HEL.jpg?s=128&g=1", "display_name": "JN_", "link": "https://stackoverflow.com/users/9770387/jn"}, "edited": false, "score": 0, "creation_date": 1563380597, "post_id": 57077785, "comment_id": 100683774, "body": "I actually understand what is a static member and how to deal with it. I tried to simplify my problem with the given description but as it appears, I have failed to convey the problem properly. But I upvoted you for your admirable effort in helping"}, {"owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "reply_to_user": {"reputation": 91, "user_id": 9770387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15HEL.jpg?s=128&g=1", "display_name": "JN_", "link": "https://stackoverflow.com/users/9770387/jn"}, "edited": false, "score": 0, "creation_date": 1563455414, "post_id": 57077785, "comment_id": 100711855, "body": "@JalilNourisa Ah, it seems that I didn&#39;t understand what is your problem then, I&#39;m sorry."}], "tags": [], "owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "is_accepted": false, "score": 1, "last_activity_date": 1563374386, "last_edit_date": 1563374386, "creation_date": 1563372233, "answer_id": 57077785, "question_id": 57075931, "link": "https://stackoverflow.com/questions/57075931/is-inheritance-a-viable-solution-to-pass-a-set-of-model-parameters-to-different/57077785#57077785", "title": "Is inheritance a viable solution to pass a set of model parameters to different classes?", "body": "<p>I think inheritance is a bad idea as <em><strong>@Matei Florescu</strong></em> mentioned. And you also seem to not have really understood what <code>static</code> does.</p>\n\n<p>Some hints:</p>\n\n<ul>\n<li>You don't need to inherits a class to access its public static members.</li>\n<li>You don't need an instance of the class to access its public static members</li>\n<li>A static member of a class is unique (in other words, shared by everyone)</li>\n</ul>\n\n<p>Knowing that, based on your code, you could write:</p>\n\n<p><em>.h</em>:</p>\n\n<pre><code>class ParamsParser\n{\n    public:\n        static T parameters; // I assumed T is defined\n        static void loadParameters(); // A method to load the parameters and store them into the above member \"parameters\"\n};\n</code></pre>\n\n<p><em>.cpp</em>:</p>\n\n<pre><code>T ParamsParser::parameters = {/*some default intialization*/};\n\nvoid ParamsParser::loadParameters()\n{\n    //parse your file and store data in ParamsParser::parameters\n}\n</code></pre>\n\n<p>Note that you have to call <code>ParamsParser::loadParameters()</code> at the beginning of your program in order to get the desired parameters file loaded once and for all.</p>\n\n<p>Then every time you need these data for your calculations (in <code>A</code> or <code>B</code> or whatever), you just have to access the parameters like this <code>ParamsParser::parameters</code>.</p>\n"}], "owner": {"reputation": 91, "user_id": 9770387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15HEL.jpg?s=128&g=1", "display_name": "JN_", "link": "https://stackoverflow.com/users/9770387/jn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "closed_date": 1565701169, "answer_count": 2, "score": -3, "last_activity_date": 1563374386, "creation_date": 1563366706, "last_edit_date": 1563367765, "question_id": 57075931, "link": "https://stackoverflow.com/questions/57075931/is-inheritance-a-viable-solution-to-pass-a-set-of-model-parameters-to-different", "closed_reason": "Needs more focus", "title": "Is inheritance a viable solution to pass a set of model parameters to different classes?", "body": "<p>I present my problem in the form of two questions.</p>\n\n<p>First, I have a set of parameters which are obtained from a parameter file and need to be used in different classes of the model. I did this by creating a parsing class (let's call it parse_class) that reads the file and stores the parameters (with tag and value) using a hash table. Then, I use this class as a parent class for other classes that I need to use the parameters. Is this a good practice? </p>\n\n<p>Second, using the above-mentioned method, I inherited \"parse_class\" in two classes, one of which is derived from another. In other words:</p>\n\n<pre><code>class parse_class {\n    static T parameters;\n};\nclass A: public parse_class{}\nclass B: public A, public parse_class{}\n</code></pre>\n\n<p>The reason I inherited again from parse_class in class B is that without it, the parameters member of parse_class is not recognized in class B (which is probably the subject of another question). This leads to <code>warning: direct base \"parse_clase\" inaccessible in \"class B\" due to ambiguity.</code> Any idea how to improve this?</p>\n"}, {"tags": ["c++", "matrix", "sparse-matrix"], "comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1563367150, "post_id": 57075834, "comment_id": 100675240, "body": "You have to show you&#39;ve some effort yourself. Post your own attempt at writing this cide in C++ and someone will help you fix the problems. I think you&#39;re very unlikely to get someone to just write the code for you. That&#39;s not how it works round here."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1563367234, "post_id": 57075834, "comment_id": 100675308, "body": "Apart from anything else it&#39;s not clear what you mean by a 2 dimensional matrix. There&#39;s lots of different ways you can have a 2d matrix in C++, so if you show your own code it will be clear to everyone what you are aiming for."}, {"owner": {"reputation": 554, "user_id": 7295290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1n9D1.jpg?s=128&g=1", "display_name": "saichand", "link": "https://stackoverflow.com/users/7295290/saichand"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1563371949, "post_id": 57075834, "comment_id": 100678511, "body": "I wanted a matrix market format conversion in general, nothing specific to the code I&#39;m using. that is the reason I&#39;ve not posted any code. sorry, if you didn&#39;t get my question. I have put effort in trying to convert using matlab online. but it could not support the size of the matrix file I was uploading. So I wanted a different approach. I got the answer from Sumit Jha (below). Thank you."}], "answers": [{"tags": [], "owner": {"reputation": 1240, "user_id": 5317459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd9f6135b6a4aac6f1947ba02adabafc?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit Jha", "link": "https://stackoverflow.com/users/5317459/sumit-jha"}, "is_accepted": true, "score": 3, "last_activity_date": 1563372915, "last_edit_date": 1563372915, "creation_date": 1563367616, "answer_id": 57076216, "question_id": 57075834, "link": "https://stackoverflow.com/questions/57075834/how-to-convert-matrix-market-file-to-matrix-in-c/57076216#57076216", "title": "How to convert matrix market file to matrix in c++", "body": "<p>There could be several ways to read .mtx data. I just parsed the file and filled the matrix with data. Please find code snippet below : </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::ifstream file(\"filaname.mtx\");\nint num_row, num_col, num_lines;\n\n// Ignore comments headers\nwhile (file.peek() == '%') file.ignore(2048, '\\n');\n\n// Read number of rows and columns\nfile &gt;&gt; num_row&gt;&gt; num_col &gt;&gt; num_lines;\n\n// Create 2D array and fill with zeros\ndouble* matrix;              \nmatrix = new double[num_row * num_col];      \nstd::fill(matrix, matrix + num_row *num_col, 0.);.\n\n// fill the matrix with data\nfor (int l = 0; l &lt; num_lines; l++)\n{\n    double data;\n    int row, col;\n    file &gt;&gt; row &gt;&gt; col &gt;&gt; data;\n    matrix[(row -1) + (col -1) * num_row] = data;\n}\n\nfile.close();\n</code></pre>\n\n<p>I hope it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 75, "user_id": 7623892, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/faf9ba0b0992a520ede0ec79b1c2dd1c?s=128&d=identicon&r=PG&f=1", "display_name": "Bilal Shafi", "link": "https://stackoverflow.com/users/7623892/bilal-shafi"}, "is_accepted": false, "score": 0, "last_activity_date": 1563367846, "creation_date": 1563367846, "answer_id": 57076288, "question_id": 57075834, "link": "https://stackoverflow.com/questions/57075834/how-to-convert-matrix-market-file-to-matrix-in-c/57076288#57076288", "title": "How to convert matrix market file to matrix in c++", "body": "<p>The National Institute of Standards and Technology provides C code that can do the file operations you are looking for. It also has examples of read and write operations in C. Since C code is compatible with C++ you can use this code in the project you are working on.\n<a href=\"https://math.nist.gov/MatrixMarket/mmio-c.html\" rel=\"nofollow noreferrer\">https://math.nist.gov/MatrixMarket/mmio-c.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 554, "user_id": 7295290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1n9D1.jpg?s=128&g=1", "display_name": "saichand", "link": "https://stackoverflow.com/users/7295290/saichand"}, "edited": false, "score": 0, "creation_date": 1563372393, "post_id": 57076546, "comment_id": 100678800, "body": "Thanks for the details. I think this is best explanation for the code I got from Sumit Jha."}], "tags": [], "owner": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "is_accepted": false, "score": 1, "last_activity_date": 1563368678, "creation_date": 1563368678, "answer_id": 57076546, "question_id": 57075834, "link": "https://stackoverflow.com/questions/57075834/how-to-convert-matrix-market-file-to-matrix-in-c/57076546#57076546", "title": "How to convert matrix market file to matrix in c++", "body": "<p>Without more information on your code or goals, it's difficult to say exactly what would would work best. If you're <a href=\"https://math.nist.gov/MatrixMarket/formats.html\" rel=\"nofollow noreferrer\">using this format,</a> I'd suggest something similar to this.</p>\n\n<p>Open the file in a <code>std::ifstream</code>, and then get lines one at a time into a <code>std::string</code> with <code>std::getline()</code> for processing. If you know the line has values you want, I would also recommend converting it to <code>std::stringstream</code> so you can use the <code>&gt;&gt;</code> operator to extract values.</p>\n\n<ol>\n<li>Given that the header of a Matrux market file begins with '%%', <code>std::string::find()</code> lets you determine whether the line you've read is the header. You can convert to stringstream and parse strings out to get information about the file, like \"matrix coordinate real general\" or others, if you care about these.</li>\n<li>Each comment begins with '%' - if you find this character at the beginning of your string, you can ignore it and read the next one.</li>\n<li>The first non-comment line is 3 numbers: rows, columns, and entries. Parse these with a stringstream; you'll use them to allocate memory for your array. Once you have the dimensions, <a href=\"https://stackoverflow.com/q/936687/7431860\">This question</a> and its answers describe some good ways to dynamically allocate the space you need.</li>\n<li>Each subsequent line describes the coordinates and value of an array entry. You can read the first two numbers and use these as indices to your 2D array, and then use the third number as the entry at that point.</li>\n</ol>\n\n<p><a href=\"https://math.nist.gov/MatrixMarket/mmio-c.html\" rel=\"nofollow noreferrer\">Or, you could switch to C, which has a library dedicated to Matrix Market I/O.</a></p>\n"}], "owner": {"reputation": 554, "user_id": 7295290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1n9D1.jpg?s=128&g=1", "display_name": "saichand", "link": "https://stackoverflow.com/users/7295290/saichand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1132, "favorite_count": 0, "accepted_answer_id": 57076216, "answer_count": 3, "score": 0, "last_activity_date": 1563372915, "creation_date": 1563366399, "question_id": 57075834, "link": "https://stackoverflow.com/questions/57075834/how-to-convert-matrix-market-file-to-matrix-in-c", "title": "How to convert matrix market file to matrix in c++", "body": "<p>I have a Matrix market(.mtx) file. I want a sparse matrix conversion from the matrix market file. Can anyone suggest a way to convert matrix market format to 2 dimensional matrix in c++?</p>\n\n<p>I have tried a matlab approach in converting the matrix market to sparse matrix online. But, I don't succeed in it.\nIt would be of great help if I get a solution in c++. As it helps my project.</p>\n"}, {"tags": ["c++", "opencv", "computer-vision", "opencv3.0"], "answers": [{"comments": [{"owner": {"reputation": 1212, "user_id": 6158471, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/ponQd.jpg?s=128&g=1", "display_name": "Anters Bear", "link": "https://stackoverflow.com/users/6158471/anters-bear"}, "edited": false, "score": 0, "creation_date": 1563382979, "post_id": 57080241, "comment_id": 100684857, "body": "hey thanks for the suggestions! you sure that&#39;s the right way to check inliners? It&#39;s always coming up with the same number as my matches :("}, {"owner": {"reputation": 1212, "user_id": 6158471, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/ponQd.jpg?s=128&g=1", "display_name": "Anters Bear", "link": "https://stackoverflow.com/users/6158471/anters-bear"}, "edited": false, "score": 1, "creation_date": 1563385023, "post_id": 57080241, "comment_id": 100685767, "body": "you actually have to look at <code>mask[i] == 1</code> to check if a point at index <code>i</code> in <code>matches</code> or <code>scene</code> is an inliner. <code>mask</code> will actually always have the same number of rows as <code>scene</code>..."}, {"owner": {"reputation": 1235, "user_id": 8602076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p6POo.png?s=128&g=1", "display_name": "Piotr Sieka\u0144ski", "link": "https://stackoverflow.com/users/8602076/piotr-sieka%c5%84ski"}, "reply_to_user": {"reputation": 1212, "user_id": 6158471, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/ponQd.jpg?s=128&g=1", "display_name": "Anters Bear", "link": "https://stackoverflow.com/users/6158471/anters-bear"}, "edited": false, "score": 0, "creation_date": 1563389459, "post_id": 57080241, "comment_id": 100687765, "body": "Thanks @AntersBear for spotting this. The answer was corrected."}], "tags": [], "owner": {"reputation": 1235, "user_id": 8602076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p6POo.png?s=128&g=1", "display_name": "Piotr Sieka\u0144ski", "link": "https://stackoverflow.com/users/8602076/piotr-sieka%c5%84ski"}, "is_accepted": true, "score": 1, "last_activity_date": 1563389385, "last_edit_date": 1563389385, "creation_date": 1563379951, "answer_id": 57080241, "question_id": 57075719, "link": "https://stackoverflow.com/questions/57075719/filtering-out-false-positives-from-feature-matching-homography-opencv/57080241#57080241", "title": "Filtering out false positives from feature matching / homography \u2013 OpenCV", "body": "<p>You cannot completely eliminate false positives. That's why RANSCAC algorithm is used to find homography. However, you may check if estimated homography is \"good\". See <a href=\"https://stackoverflow.com/questions/14954220/how-to-check-if-obtained-homography-matrix-is-good\">this question</a> for details. And if estimated homography is wrong you may discard it and assume that no object is found. As you need at least 4 corresponding points to estimate homography, you can reject those homographies that were estimated using less points that a predefined threshold (eg.6). That will likely filter out all wrongly estimated homographies:</p>\n\n<pre><code>int minInliers = 6; //can be any value &gt; 4\ndouble reprojectionError = 3; // default value, you can change it to some lower to get more reliable estimation.\nMat mask;    \nMat H = findHomography( obj, scene, FM_RANSAC, reprojectionError, mask );\nint inliers = 0;\nfor (int i=0; i&lt; mask.rows; ++i)\n{\n    if(mask[i] == 1) inliers++;\n}\nif(inliers &gt; minInliers)\n{\n    //homography is good\n}\n</code></pre>\n\n<p>You can also test the method proposed in original SIFT paper to get better matches. You need to find two closest descriptors to each query point and then check if ratio between their distances is less that threshold (David Lowe suggest 0.8) Check <a href=\"https://docs.opencv.org/3.4/d5/d6f/tutorial_feature_flann_matcher.html\" rel=\"nofollow noreferrer\">this link</a> for details:</p>\n\n<pre><code>descriptorMatcher-&gt;knnMatch( descImg1, descImg2, knn_matches, 2 );\n//-- Filter matches using the Lowe's ratio test\nconst float ratio_thresh = 0.8f;\nstd::vector&lt;DMatch&gt; good_matches;\nfor (size_t i = 0; i &lt; knn_matches.size(); i++)\n{\n    if (knn_matches[i][0].distance &lt; ratio_thresh * knn_matches[i][1].distance)\n    {\n        good_matches.push_back(knn_matches[i][0]);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1212, "user_id": 6158471, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/ponQd.jpg?s=128&g=1", "display_name": "Anters Bear", "link": "https://stackoverflow.com/users/6158471/anters-bear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 1, "accepted_answer_id": 57080241, "answer_count": 1, "score": 1, "last_activity_date": 1563389385, "creation_date": 1563366021, "question_id": 57075719, "link": "https://stackoverflow.com/questions/57075719/filtering-out-false-positives-from-feature-matching-homography-opencv", "title": "Filtering out false positives from feature matching / homography \u2013 OpenCV", "body": "<p>I have a program that takes for input a picture, and who's objective is to determine if a certain object (essentially an image) is contained with this picture. If so it tries to estimate it's position. This works really well when the object is in the picture. However I get a lot of false positives when I put anything complex enough in the picture.</p>\n\n<p>I was wondering if there is any good way to filter out these false positives. Hopefully something not too computationally expensive.</p>\n\n<p>My program is based on <a href=\"https://docs.opencv.org/2.4/doc/tutorials/features2d/feature_homography/feature_homography.html\" rel=\"nofollow noreferrer\">the tutorial found here</a>. Except I use <code>BRISK</code> instead of <code>SURF</code> so I don't need the contrib stuff.</p>\n\n<p><strong>HOW I GET MATCHES</strong></p>\n\n<pre><code>descriptorMatcher-&gt;match(descImg1, descImg2, matches, Mat());\n</code></pre>\n\n<p><strong>GOOD MATCHES</strong></p>\n\n<pre><code>double max_dist = 0; double min_dist = 100;\n\n//-- Quick calculation of max and min distances between keypoints\nfor( int i = 0; i &lt; descImg1.rows; i++ )\n{ double dist = matches[i].distance;\n  if( dist &lt; min_dist ) min_dist = dist;\n  if( dist &gt; max_dist ) max_dist = dist;\n}\n\nstd::vector&lt; DMatch &gt; good_matches;\n\nfor( int i = 0; i &lt; descImg1.rows; i++ )\n{ if( matches[i].distance &lt; 4*min_dist )\n { good_matches.push_back( matches[i]); }\n}\n</code></pre>\n\n<p><strong>HOMOGRAPHY</strong></p>\n\n<pre><code>std::vector&lt;Point2f&gt; obj;\nstd::vector&lt;Point2f&gt; scene;\n\nfor( int i = 0; i &lt; good_matches.size(); i++ )\n{\n  //-- Get the keypoints from the good matches\n  obj.push_back( keyImg1[ good_matches[i].queryIdx ].pt );\n  scene.push_back( keyImg2[ good_matches[i].trainIdx ].pt );\n}\n\nMat H = findHomography( obj, scene, FM_RANSAC );\n</code></pre>\n\n<p><strong>OBJECT CORNERS</strong></p>\n\n<pre><code>std::vector&lt;Point2f&gt; obj_corners(4);\nobj_corners[0] = cvPoint(0,0); obj_corners[1] = cvPoint( img1.cols, 0 );\nobj_corners[2] = cvPoint( img1.cols, img1.rows ); obj_corners[3] = cvPoint( 0, img1.rows );\nstd::vector&lt;Point2f&gt; scene_corners(4);\n\nperspectiveTransform( obj_corners, scene_corners, H);\n</code></pre>\n"}, {"tags": ["c++", "memory-leaks", "valgrind"], "comments": [{"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 1, "creation_date": 1563366175, "post_id": 57075635, "comment_id": 100674612, "body": "Does <code>strace -e trace=network</code> confirm that your program is not <code>bind</code>ing to the port or <code>accept</code>ing connections?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1563368419, "post_id": 57075635, "comment_id": 100676084, "body": "Please show your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates the problem"}, {"owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "edited": false, "score": 0, "creation_date": 1563381663, "post_id": 57075635, "comment_id": 100684277, "body": "Are you sure that the server started completely before trying to communicate with it?"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 4167250, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-z1-QRU1OTFU/AAAAAAAAAAI/AAAAAAAACJA/F00PHjDrUas/photo.jpg?sz=128", "display_name": "Bensh P", "link": "https://stackoverflow.com/users/4167250/bensh-p"}, "edited": false, "score": 0, "creation_date": 1563430363, "post_id": 57077794, "comment_id": 100698549, "body": "Thanks John. Its helpful. Will check ."}], "tags": [], "owner": {"reputation": 1415, "user_id": 4379130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ccFzr.png?s=128&g=1", "display_name": "John Greene", "link": "https://stackoverflow.com/users/4379130/john-greene"}, "is_accepted": false, "score": 1, "last_activity_date": 1563451570, "last_edit_date": 1563451570, "creation_date": 1563372257, "answer_id": 57077794, "question_id": 57075635, "link": "https://stackoverflow.com/questions/57075635/how-to-run-valgrind-for-the-server/57077794#57077794", "title": "How to run valgrind for the server?", "body": "<p>If you have already confirmed that the exact same binary is doing that desired network socket open() and it doesn\u2019t work in Valgrind, then read on.  </p>\n\n<p>Valgrind only works with binary file and cannot attach to an already running process (as explained <a href=\"https://sysdig.com/blog/linux-troubleshooting-cheatsheet/\" rel=\"nofollow noreferrer\">here</a>).</p>\n\n<p>Valgrind is also sensitive to change of effective UID, particularly when running from root UID.  You cannot use <code>sudo</code> with valgrind (<a href=\"https://stackoverflow.com/questions/45558573/how-do-i-run-valgrind-on-a-program-that-needs-superuser-permission\">detailed here</a>).</p>\n\n<p>You cannot Valgrind on an executable binary that has Linux capability bit enabled (<a href=\"http://valgrind.10908.n7.nabble.com/How-to-debug-program-that-has-linux-Capabilities-td57966.html\" rel=\"nofollow noreferrer\">details here</a>).</p>\n\n<p>Valgrind cannot handle root setuid on NFS filesystem (even when mounted to allow this).  Workaround is to move your build or binary to non-NFS partition. </p>\n\n<p>Having said all that above, it is a timing problem where Valgrind is taking things SLOWER and that the control flow of your code is \u201cmissing its mark\u201d to performing that open to a network socket.  Only way is to put in debug print statements throughout your code and nail that timing logic. </p>\n\n<p>Alternatively...\nTo see what a production grade daemon is doing from the very beginning of startup, execute:</p>\n\n<pre><code>valgrind \u2014follow-children /usr/skin/&lt;your-server-binary&gt;\n</code></pre>\n\n<p>There\u2019s another way to monitor network socket in action, read on ...</p>\n\n<h2>Tracing from start of execution</h2>\n\n<p>You can perform <a href=\"https://sysdig.com/blog/linux-troubleshooting-cheatsheet/\" rel=\"nofollow noreferrer\">strace</a> from the start and find out what network socket got opened (and described later, show its buffer content) by:</p>\n\n<pre><code>strace -eopen &lt;your-server-binary&gt; &lt;server-arguments&gt;\n</code></pre>\n\n<p>make a note of the desired <code>fd</code> (file descriptor) number.  </p>\n\n<p>As with any <code>strace</code> command in starting a process, pressing Ctrl-C will stop that process.  But using strace on a live process, you safely detach using Ctrl-C from its targeted process (and let that process continue running) and return to your command shell prompt. </p>\n\n<h2>Attaching to already running server</h2>\n\n<p>But you could monitor an already running production daemon server using <code>strace</code> but it\u2019s harder to find that opened <code>fd</code> number for your network socket. Do previous step briefly to get that <code>fd</code>.</p>\n\n<p>Find out your PID using <code>ps auxw</code>.</p>\n\n<p>Then plug in your server/daemon\u2019s PID here:</p>\n\n<pre><code> strace -f -p &lt;your-server-PID -fnetwork\n</code></pre>\n\n<p>to find out its <code>fd</code> number.</p>\n\n<h2>Exact socket monitoring</h2>\n\n<p>With the identified <code>fd</code> on hand, rerun strace to attach to that production server with:</p>\n\n<pre><code>strace -f -eread=&lt;fd&gt; -ewrite=&lt;fd&gt; -p&lt;your-daemon-PID&gt;\n</code></pre>\n\n<h2>network troubleshooting checklist</h2>\n\n<ul>\n<li><code>lsof -in</code> a list of open ports</li>\n<li><code>strace</code></li>\n<li><code>netstat -lt</code></li>\n<li><code>tcpdump</code>/<code>wireshark</code></li>\n</ul>\n\n<p>A list of network troubleshooting tools for Linux is given <a href=\"https://sysdig.com/blog/linux-troubleshooting-cheatsheet/\" rel=\"nofollow noreferrer\">here</a>, <a href=\"https://gist.github.com/Integralist/a49df746e2bd30bff047\" rel=\"nofollow noreferrer\">here</a> and most comprehensively <a href=\"https://blog.serverdensity.com/80-linux-monitoring-tools-know/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 29, "user_id": 4167250, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-z1-QRU1OTFU/AAAAAAAAAAI/AAAAAAAACJA/F00PHjDrUas/photo.jpg?sz=128", "display_name": "Bensh P", "link": "https://stackoverflow.com/users/4167250/bensh-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1083, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1563451570, "creation_date": 1563365791, "question_id": 57075635, "link": "https://stackoverflow.com/questions/57075635/how-to-run-valgrind-for-the-server", "title": "How to run valgrind for the server?", "body": "<p>I am new to valgrind. I need to run the valgrind for a server written in C++. The server listens to a port. When the run the server inside the Valgrind, I couldn't communicate with the server. The Port is not listening. </p>\n\n<p>valgrind --tool=memcheck --leak-check=yes --log-file=valgrind_log.txt /binary_path-c </p>\n\n<p>I need the server should listen to the port when i run with valgrind.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 7, "creation_date": 1563365346, "post_id": 57075452, "comment_id": 100674131, "body": "<code>map.find</code> is used to find keys, not values."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 1, "creation_date": 1563365665, "post_id": 57075452, "comment_id": 100674302, "body": "<i>I need to find a key in map of maps.</i> Do you need to find a key or a value? You write the former but do the latter in your code. Please, specify."}, {"owner": {"reputation": 957, "user_id": 9632774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zP3nO.png?s=128&g=1", "display_name": "CrafterKolyan", "link": "https://stackoverflow.com/users/9632774/crafterkolyan"}, "edited": false, "score": 0, "creation_date": 1563365944, "post_id": 57075452, "comment_id": 100674460, "body": "You either need to use <code>testmap.find(&quot;key&quot;)</code> or use <code>testmap.count</code>"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1563366504, "post_id": 57075452, "comment_id": 100674849, "body": "Still confusing, &quot;world&quot; is a value in the first code segemnt, but a key in the second segment. &quot;hello&quot; is a key in the inner map in the first segment but a key in the outer map in the second segment. Please be clear what you are really trying to do, with an example that actually works."}, {"owner": {"reputation": 1288, "user_id": 11680056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/352e207181e5b85c5ffeef7be921898c?s=128&d=identicon&r=PG&f=1", "display_name": "sklott", "link": "https://stackoverflow.com/users/11680056/sklott"}, "edited": false, "score": 1, "creation_date": 1563366529, "post_id": 57075452, "comment_id": 100674864, "body": "When you telling us that you want to &quot;find value in map&quot;, first thing you should consider is if you really decided on correct key for map? May be swap key and values?"}, {"owner": {"reputation": 431, "user_id": 6040328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGVfA.png?s=128&g=1", "display_name": "SubMachine", "link": "https://stackoverflow.com/users/6040328/submachine"}, "edited": false, "score": 0, "creation_date": 1563367178, "post_id": 57075452, "comment_id": 100675262, "body": "Edit the misleading title. It seems like what you are trying to achieve is finding a specific map inside <code>testmap</code>."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 2, "creation_date": 1563367959, "post_id": 57075452, "comment_id": 100675751, "body": "<code>[&quot;hello&quot;][&quot;world&quot;]</code> &quot;hello&quot; is the key in the inside map and <code>world</code> is the value in the inside map. You could <code>return testmap[&quot;key&quot;][&quot;hello&quot;]</code> and it would return <code>&quot;world&quot;</code>. To lookup key by value, ie. to find <code>&quot;key&quot;</code> using <code>map&lt;string, string&gt;({&quot;hello&quot;, &quot;world&quot;})</code> you have traverse the map, like ex. <a href=\"https://ubuntuforums.org/archive/index.php/t-1206831.html\" rel=\"nofollow noreferrer\">here</a>."}], "answers": [{"tags": [], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "is_accepted": true, "score": 3, "last_activity_date": 1563368277, "last_edit_date": 1563368277, "creation_date": 1563366484, "answer_id": 57075860, "question_id": 57075452, "link": "https://stackoverflow.com/questions/57075452/how-to-use-mapfind-on-map-of-maps/57075860#57075860", "title": "how to use map::find on map of maps", "body": "<p>To find a value in a map, you cannot use <code>find</code> member function, which finds a key. However, you can find a value, e.g., by using <code>std::find_if</code> with a custom comparator:</p>\n\n<pre><code>using value_t = std::map&lt;std::string, std::string&gt;;\nusing key_t = std::string;\nusing map_t = std::map&lt;key_t, value_t&gt;;\n\nmap_t m { { \"key\" , { { \"hello\", \"world\" } } } };\n\nvalue_t v { { \"hello\", \"world\" } };  // value to be found\nauto iter = std::find_if(m.begin(), m.end(),\n               [&amp;v](const auto&amp; e){ return e.second == v; });\nstd::cout &lt;&lt; (iter != m.end()) &lt;&lt; std::endl;\n</code></pre>\n\n<p>Live demo: <a href=\"https://wandbox.org/permlink/1b0bjbnnPY8E0uiU\" rel=\"nofollow noreferrer\">https://wandbox.org/permlink/1b0bjbnnPY8E0uiU</a></p>\n\n<hr>\n\n<p>Note that this will work since C++14. In C++11, you need to write:</p>\n\n<pre><code>auto iter = std::find_if(m.begin(), m.end(),\n               [&amp;v](const map_t::value_type&amp; e){ return e.second == v; });\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>It's still kind-of unclear to me what you are trying to achieve. If you need a reference to the inner-most value only if it's both-level keys exist, then you can do (C++17 syntax):</p>\n\n<pre><code>if (auto i1 = m.find(\"key\"); i1 != m.end())\n   if (auto i2 = i1-&gt;second.find(\"hello\"); i2 != i1-&gt;second.end())\n      std::cout &lt;&lt; i2-&gt;second &lt;&lt; std::endl;  // same as m[\"key\"][\"hello\"] here but faster\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1254, "user_id": 433670, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d664a7a5f2af9a1e865a6277f4a05f60?s=128&d=identicon&r=PG", "display_name": "cauchy", "link": "https://stackoverflow.com/users/433670/cauchy"}, "edited": false, "score": 0, "creation_date": 1563368848, "post_id": 57076499, "comment_id": 100676378, "body": "Honest answer: The code I&#39;m working on is long and hard to understand. I wrote a snippet of what I thought the code was doing. After all the comments about how confusing the question is, I&#39;m taking a look a the code again because evidently I don&#39;t understand the code as well as I thought."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 1254, "user_id": 433670, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d664a7a5f2af9a1e865a6277f4a05f60?s=128&d=identicon&r=PG", "display_name": "cauchy", "link": "https://stackoverflow.com/users/433670/cauchy"}, "edited": false, "score": 1, "creation_date": 1563369300, "post_id": 57076499, "comment_id": 100676725, "body": "@cauchy I think that, first of all, you don&#39;t understand how maps work. According to your <code>return</code> statement, your outer map would need to have an entry with <code>&quot;hello&quot;</code> as a key. This entry&#39;s value (inner map) then would need to have an entry with <code>&quot;world&quot;</code> as a key. But in your constructed map of maps, this does not hold. There, your outer map has an entry with <code>&quot;key&quot;</code> key, and it&#39;s value (inner) map has an entry with <code>&quot;hello&quot;</code> key. I would recommend to draw a chart on the paper to understand this."}, {"owner": {"reputation": 1254, "user_id": 433670, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d664a7a5f2af9a1e865a6277f4a05f60?s=128&d=identicon&r=PG", "display_name": "cauchy", "link": "https://stackoverflow.com/users/433670/cauchy"}, "edited": false, "score": 0, "creation_date": 1563370833, "post_id": 57076499, "comment_id": 100677716, "body": "Yes. Thanks for pointing this out and not just give a minus point, which is not helpfull. I looked up how map works and I was wrong. Thanks for your time! This was really helpfull."}], "tags": [], "owner": {"reputation": 1288, "user_id": 11680056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/352e207181e5b85c5ffeef7be921898c?s=128&d=identicon&r=PG&f=1", "display_name": "sklott", "link": "https://stackoverflow.com/users/11680056/sklott"}, "is_accepted": false, "score": 1, "last_activity_date": 1563368524, "creation_date": 1563368524, "answer_id": 57076499, "question_id": 57075452, "link": "https://stackoverflow.com/questions/57075452/how-to-use-mapfind-on-map-of-maps/57076499#57076499", "title": "how to use map::find on map of maps", "body": "<p>It seems to me that what you want is <code>testmap.find(\"key\")</code>, i.e. search for key, but for some reason you think that you should search for value...</p>\n"}], "owner": {"reputation": 1254, "user_id": 433670, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d664a7a5f2af9a1e865a6277f4a05f60?s=128&d=identicon&r=PG", "display_name": "cauchy", "link": "https://stackoverflow.com/users/433670/cauchy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 437, "favorite_count": 0, "accepted_answer_id": 57075860, "answer_count": 2, "score": 0, "last_activity_date": 1563368524, "creation_date": 1563365255, "last_edit_date": 1563367200, "question_id": 57075452, "link": "https://stackoverflow.com/questions/57075452/how-to-use-mapfind-on-map-of-maps", "title": "how to use map::find on map of maps", "body": "<p>I'm having an issue making some unit tests in a large code base. Basically I need to find a value in map of maps. I wrote a code snippet to explain what my problem is. The following represents how the data is build:</p>\n\n<pre><code>map&lt;string, map&lt;string, string&gt;&gt; testmap;\nmap&lt;string, string&gt; item;\nitem.insert(pair&lt;string,string&gt;(\"hello\",\"world\"));\ntestmap.insert(pair&lt;string, map&lt;string,string&gt; &gt; (\"key\",item));\n</code></pre>\n\n<p>then, at some later point, I need to check that the values have been added before obtaining a key. From the cppreference, the return of the [] operator is  </p>\n\n<blockquote>\n  <p>Reference to the mapped value of the new element if no element with\n  key key existed. Otherwise a reference to the mapped value of the\n  existing element whose key is equivalent to key.</p>\n</blockquote>\n\n<p>If I understand correctly, which from the comments is clear that I am not, this means that a new element is inserted if there was no element with that key. I want to avoid that, and return an error message.</p>\n\n<p>The following is <strong>wrong</strong> and I'm trying to understand why:</p>\n\n<pre><code>if (testmap.find(map&lt;string,string&gt;(\"hello\",\"world\")) != testmap.end()) \n{\n    ...\n    return testmap[\"hello\"][\"world\"];\n}\n</code></pre>\n"}, {"tags": ["c++", "inheritance", "polymorphism", "virtual", "abstract"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 8, "creation_date": 1563364677, "post_id": 57075226, "comment_id": 100673786, "body": "<code>A* ptr = new B</code>? It seems you could use <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list/388282#388282\">a good book or two to read</a>, to freshen up on C++."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1563364761, "post_id": 57075226, "comment_id": 100673833, "body": "All your declarations are wrong, this cannot compile. And <code>A *ptr; ptr-&gt;myFunction();</code>: <code>ptr</code> points nowehere so a segfault is somewhat expected."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 4, "creation_date": 1563364769, "post_id": 57075226, "comment_id": 100673835, "body": "<i>&quot;seems my pointer was not assigned correctly&quot;</i> It wasn&#39;t assigned (initialised) <i>at all</i>!"}, {"owner": {"reputation": 431, "user_id": 6040328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGVfA.png?s=128&g=1", "display_name": "SubMachine", "link": "https://stackoverflow.com/users/6040328/submachine"}, "edited": false, "score": 0, "creation_date": 1563365467, "post_id": 57075226, "comment_id": 100674197, "body": "Learn what <a href=\"https://www.geeksforgeeks.org/polymorphism-in-c/\" rel=\"nofollow noreferrer\">polymorphism</a> is in C++. Also try not to use raw pointers. In this case it seems like you can use <a href=\"https://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow noreferrer\">unique_ptr</a>"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1563366558, "post_id": 57075226, "comment_id": 100674884, "body": "<code>&#47;&#47; IS IMPLEMENTED HERE!!</code>: no it is not, it is only declared."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6334660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d36a6f17c03d63e57cea8b77ae34055?s=128&d=identicon&r=PG&f=1", "display_name": "Yyomi", "link": "https://stackoverflow.com/users/6334660/yyomi"}, "edited": false, "score": 0, "creation_date": 1563368894, "post_id": 57075361, "comment_id": 100676411, "body": "Dear Paul,  Thank you very much for the kind and instructive response. The second solution was exactly what I was looking for!"}], "tags": [], "owner": {"reputation": 8084, "user_id": 2896626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4cd83959d7fe39c658d2e49cfecfe4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Paul92", "link": "https://stackoverflow.com/users/2896626/paul92"}, "is_accepted": true, "score": 1, "last_activity_date": 1563364908, "creation_date": 1563364908, "answer_id": 57075361, "question_id": 57075226, "link": "https://stackoverflow.com/questions/57075226/accessing-virtual-class-through-the-pointer/57075361#57075361", "title": "Accessing virtual class through the pointer", "body": "<p>The virtual calls allow to access a function from an object through a pointer or reference of a base type. Note that the object itself needs to be of the type that implements the functionality.</p>\n\n<p>So, in class C you can have something like:</p>\n\n<pre><code>B b;\nA *ptr = &amp;b;\nptr-&gt;myFunction()\n</code></pre>\n\n<p>or</p>\n\n<pre><code>A *ptr = new B();\nptr-&gt;myFunction()\n</code></pre>\n\n<p>Either way, you need to create an object of type B, and assign it to a pointer of type A*.</p>\n"}], "owner": {"reputation": 23, "user_id": 6334660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d36a6f17c03d63e57cea8b77ae34055?s=128&d=identicon&r=PG&f=1", "display_name": "Yyomi", "link": "https://stackoverflow.com/users/6334660/yyomi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 57075361, "answer_count": 1, "score": 2, "last_activity_date": 1563364908, "creation_date": 1563364524, "question_id": 57075226, "link": "https://stackoverflow.com/questions/57075226/accessing-virtual-class-through-the-pointer", "title": "Accessing virtual class through the pointer", "body": "<p>I have to design the specific architecture of the project. I got stuck while trying to create the pointer to the virtual class, and got Segmentation fault (seems my pointer was not assigned correctly). \nBelow I included the draft of what I'm trying to do.</p>\n\n<pre><code>// Class A has to be pure virtual. It will be inherited by many classes in my project.\nclass A: \n{\npublic:\n virtual void myFunction() = 0; \n}\n\n\n// Class B implements the method from the class A\n#include &lt;A.h&gt;\nclass B: public A\n{\npublic:\nvoid myFunction(); // IS IMPLEMENTED HERE!!\n}\n\n\n// Class C creates a pointer to the class A.\n #include &lt;A.h&gt;\nclass C:\n{\nA *ptr;\nptr-&gt;myFunction();  //Here I want to run myFuction() from the class B.\n}\n</code></pre>\n\n<p>How can I make a connection between those three, so I get the result I want.\nI can't change the architecture, or simply omit any of the classes A, B or C.\nThanks for help!</p>\n"}, {"tags": ["c++", "ffmpeg", "gpu", "sdl-2"], "comments": [{"owner": {"reputation": 1396, "user_id": 1969759, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/93d5e1e710a7bda97c404a3ba67415da?s=128&d=identicon&r=PG", "display_name": "Mike Versteeg", "link": "https://stackoverflow.com/users/1969759/mike-versteeg"}, "edited": false, "score": 1, "creation_date": 1563445796, "post_id": 57075159, "comment_id": 100706465, "body": "Your camera is not connected to your GPU, it&#39;s probably connected to a USB port or a capture card. To get access to its video frames you should either use a library (like FFmpeg) or DirectShow (I don&#39;t even know what OS you use). I suggest you do some more research."}, {"owner": {"reputation": 21, "user_id": 11346270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8abf7585a99af17905de9af4417b6b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Pofke1", "link": "https://stackoverflow.com/users/11346270/pofke1"}, "reply_to_user": {"reputation": 1396, "user_id": 1969759, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/93d5e1e710a7bda97c404a3ba67415da?s=128&d=identicon&r=PG", "display_name": "Mike Versteeg", "link": "https://stackoverflow.com/users/1969759/mike-versteeg"}, "edited": false, "score": 0, "creation_date": 1563797974, "post_id": 57075159, "comment_id": 100806889, "body": "Ok, I think thats capture card (which has SDI port), will do more research on FFmpeg and dshow, Im using Windows, thanks!"}], "owner": {"reputation": 21, "user_id": 11346270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8abf7585a99af17905de9af4417b6b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Pofke1", "link": "https://stackoverflow.com/users/11346270/pofke1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563364289, "creation_date": 1563364289, "question_id": 57075159, "link": "https://stackoverflow.com/questions/57075159/how-to-retrieve-data-from-gpu-via-sdi-cable", "title": "How to retrieve data from GPU? (Via SDI cable)", "body": "<p>I have a camera that's connected to my GPU via SDI cable. I need somehow to capture live video information from that camera and be able to transfer it to SDL_Surface in my SDL2 program later (It would be enough to just get RGB of the pixels). The question is how should I do this or what other libraries should I use? Is something like FFmpeg is correct way to do this? Also maybe I should use another input from camera?</p>\n"}, {"tags": ["c++", "android-studio", "gradle", "cmake", "static-libraries"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1563364302, "post_id": 57075110, "comment_id": 100673588, "body": "Looks like <code>${CMAKE_SOURCE_DIR}&#47;libadd.a</code> refers to a <b>non-existent</b> file. You may print this path via <code>message(&quot;PATH: ${CMAKE_SOURCE_DIR}&#47;libadd.a&quot;)</code> and check whether given files actually exists."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1563451891, "post_id": 57075110, "comment_id": 100709740, "body": "The edited post still doesn&#39;t answer to the question about location of <code>libadd.a</code> library."}], "owner": {"reputation": 1, "user_id": 11623922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec9496104753dd2ccea3aed450dabcb4?s=128&d=identicon&r=PG&f=1", "display_name": "Srihari", "link": "https://stackoverflow.com/users/11623922/srihari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1073, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563429098, "creation_date": 1563364074, "last_edit_date": 1563429098, "question_id": 57075110, "link": "https://stackoverflow.com/questions/57075110/clang-error-linker-command-failed-with-exit-code-1", "title": "clang++: error: linker command failed with exit code 1", "body": "<p>Accessing static library libadd.a from CPP file.</p>\n\n<p>CPP file is compiled using CMakeList.txt which compile and application generate libnative-lib.so file.</p>\n\n<p><strong>Updated CMakeList.txt</strong></p>\n\n<pre><code>**target_link_libraries(\n                       native-lib\n                       ${log-lib}\n                       ${CMAKE_SOURCE_DIR}/libadd.a)**\n</code></pre>\n\n<p><strong>Accessing function add() in native-lib.cpp file</strong></p>\n\n<pre><code>#include &lt;jni.h&gt;\n#include &lt;string&gt;\n#include \"../../../staticLib/files/add.hpp\"\n\nextern \"C\" JNIEXPORT jstring JNICALL\nJava_com_example_oncall_myapplication_MainActivity_stringFromJNI(\n        JNIEnv* env,\n        jobject /* this */) {\n    std::string hello = \"Hello SUCESSS its 12\";\n\n    std::string hello1 = \"Hello FAILED it is not 12\";\n\n    addition::my::work::abc     Obj;\n    Obj.add(5,7);\n\n    if(Obj.add(5,7) == 12)\n    {\n     return env-&gt;NewStringUTF(hello.c_str());\n    }\n    else\n    {\n    return env-&gt;NewStringUTF(hello1.c_str());\n    }\n\n}\n</code></pre>\n\n<p><strong>Error when trying to build the code.</strong></p>\n\n<p>Build command failed.\nError while executing process /home/oncall/Desktop/Android/Sdk/cmake/3.6.4111459/bin/cmake with arguments {--build /home/oncall/Bha/MyApplication3/app/.externalNativeBuild/cmake/debug/x86_64 --target native-lib}\n[1/1] Linking CXX shared library ../../../../build/intermediates/cmake/debug/obj/x86_64/libnative-lib.so\nFAILED: : &amp;&amp; /home/oncall/Desktop/Android/Sdk/ndk-bundle/toolchains/llvm/prebuilt/linux-x86_64/bin/clang++  --target=x86_64-none-linux-android21 --gcc-toolchain=/home/oncall/Desktop/Android/Sdk/ndk-bundle/toolchains/llvm/prebuilt/linux-x86_64 --sysroot=/home/oncall/Desktop/Android/Sdk/ndk-bundle/toolchains/llvm/prebuilt/linux-x86_64/sysroot -fPIC -g -DANDROID -fdata-sections -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -fno-addrsig -Wa,--noexecstack -Wformat -Werror=format-security -stdlib=libc++  -O0 -fno-limit-debug-info  -Wl,--exclude-libs,libgcc.a -Wl,--exclude-libs,libatomic.a -static-libstdc++ -Wl,--build-id -Wl,--warn-shared-textrel -Wl,--fatal-warnings -Wl,--no-undefined -Qunused-arguments -Wl,-z,noexecstack -Wl,-z,relro -Wl,-z,now -shared -Wl,-soname,libnative-lib.so -o ../../../../build/intermediates/cmake/debug/obj/x86_64/libnative-lib.so CMakeFiles/native-lib.dir/src/main/cpp/native-lib.cpp.o  /home/oncall/Desktop/Android/Sdk/ndk-bundle/toolchains/llvm/prebuilt/linux-x86_64/sysroot/usr/lib/x86_64-linux-android/21/liblog.so ../../../../libadd.a -latomic -lm &amp;&amp; :\n/home/oncall/Desktop/Android/Sdk/ndk-bundle/toolchains/llvm/prebuilt/linux-x86_64/lib/gcc/x86_64-linux-android/4.9.x/../../../../x86_64-linux-android/bin/ld: error: ../../../../libadd.a(add.o): requires dynamic R_X86_64_PC32 reloc against '_ZN8addition2my4work3abc5countE' which may overflow at runtime; recompile with -fPIC\n/home/oncall/Desktop/Android/Sdk/ndk-bundle/toolchains/llvm/prebuilt/linux-x86_64/lib/gcc/x86_64-linux-android/4.9.x/../../../../x86_64-linux-android/bin/ld: warning: shared library text segment is not shareable\n<strong>../../../../libadd.a(add.o):add.cpp:function addition::my::work::abc::getCount(): error: undefined reference to 'addition::my::work::abc::count'\n../../../../libadd.a(add.o):add.cpp:function addition::my::work::abc::~abc(): error: undefined reference to 'addition::my::work::abc::count'\n../../../../libadd.a(add.o):add.cpp:function addition::my::work::abc::~abc(): error: undefined reference to 'addition::my::work::abc::count'\nclang++: error: linker command failed with exit code 1 (use -v to see</strong> invocation)\nninja: build stopped: subcommand failed.</p>\n\n<p><strong>add.cpp of libadd.a</strong></p>\n\n<pre><code>#include \"add.hpp\"\n\nnamespace addition{\nnamespace my{\nnamespace work{\n\nint abc::add(int x, int y) {\n\n    return (x+y);\n}\n\n\nint abc::getCount(){\n    return count;\n}\n\nabc::~abc(){\n    count--;\n}\n};\n};\n};\n</code></pre>\n"}, {"tags": ["c++", "qt", "listview", "qml", "qstringlist"], "comments": [{"owner": {"reputation": 1830, "user_id": 1047746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82514a7e1e60593716e3460af8676a0d?s=128&d=identicon&r=PG", "display_name": "Xplatforms", "link": "https://stackoverflow.com/users/1047746/xplatforms"}, "edited": false, "score": 0, "creation_date": 1563368206, "post_id": 57075068, "comment_id": 100675942, "body": "If you want to create your own subclass of <a href=\"https://doc.qt.io/qt-5/qabstractlistmodel.html\" rel=\"nofollow noreferrer\">QAbstractListModel</a> take are look at this example in Qt Doc  -&gt; <a href=\"https://doc.qt.io/qt-5/qtquick-modelviewsdata-cppmodels.html#qabstractitemmodel-subclass\" rel=\"nofollow noreferrer\">Using C++ Models with Qt Quick Views</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5008, "user_id": 5762796, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3acb5c2021f4c279f29d61481b28e15?s=128&d=identicon&r=PG&f=1", "display_name": "Aleph0", "link": "https://stackoverflow.com/users/5762796/aleph0"}, "is_accepted": false, "score": 1, "last_activity_date": 1563368373, "creation_date": 1563368373, "answer_id": 57076448, "question_id": 57075068, "link": "https://stackoverflow.com/questions/57075068/from-qstringlist-to-listviewmodel-in-qml/57076448#57076448", "title": "From QStringList to ListViewModel in qml", "body": "<p>I think that the usage inside your Qml Component should be somthing like this:</p>\n\n<pre><code>ListView {\n     model: myModel;\n\n     Text {\n          text: displayRole\n     }\n}\n</code></pre>\n\n<p>Inside your C++ Component you should expose the model to the QML file:</p>\n\n<pre><code>QQmlContext *ctxt = view.rootContext();\nctxt-&gt;setContextProperty(myModel,this);\n</code></pre>\n\n<p>Finally, you need to map the <code>Qt::ItemDataRole</code> by setting <code>setRoleNames</code> on your model, like:</p>\n\n<pre><code>QHash&lt;int, QByteArray&gt; map={{Qt::ItemDataRole::DisplayRole, \"displayRole\"}};\nthis-&gt;setRoleNames(map);\n</code></pre>\n\n<p>I also think, that it is not really necessary to derive from <code>QAbstractListModel</code> for such an easy use case. Just use <code>QStandardItemModel</code> and you are home free.</p>\n"}], "owner": {"reputation": 87, "user_id": 11611480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae2bdbbfb7e7c89e998eb5e4f2edda55?s=128&d=identicon&r=PG&f=1", "display_name": "ImNew", "link": "https://stackoverflow.com/users/11611480/imnew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563368373, "creation_date": 1563363939, "question_id": 57075068, "link": "https://stackoverflow.com/questions/57075068/from-qstringlist-to-listviewmodel-in-qml", "title": "From QStringList to ListViewModel in qml", "body": "<p>I have followed <a href=\"https://doc.qt.io/archives/qt-5.5/qtquick-models-stringlistmodel-example.html\" rel=\"nofollow noreferrer\">this example</a> with some changes  to show QStringList in ListView. So, I have a <code>QStringList</code> in MyClass.cpp and I want to show those items in ListView in MyDialog.qml </p>\n\n<p>////main.cpp////</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n\n    QGuiApplication app(argc, argv);\n    QQmlApplicationEngine engine;\n    MyClass *strListView=new MyClass;\n    engine.rootContext()-&gt;setContextProperty(\"strListView\", strListView);\n    const QUrl url(QStringLiteral(\"qrc:/main.qml\"));\n    QObject::connect(&amp;engine, &amp;QQmlApplicationEngine::objectCreated,\n                     &amp;app, [url](QObject *obj, const QUrl &amp;objUrl) {\n        if (!obj &amp;&amp; url == objUrl)\n            QCoreApplication::exit(-1);\n    }, Qt::QueuedConnection);\n    engine.load(url);\n\n    return app.exec();\n}\n</code></pre>\n\n<p>//// MyClass.h////</p>\n\n<pre><code>#include &lt;QObject&gt;\n#include &lt;QAbstractTableModel&gt;\n#include &lt;QModelIndex&gt;\n#include &lt;QHash&gt;\n#include &lt;QVariant&gt;\n#include &lt;QByteArray&gt;\n#include &lt;QList&gt;\n#include &lt;QDebug&gt;\n\nclass MyClass: public QAbstractListModel\n{\n    Q_OBJECT\n\npublic:\n    MyClass(QObject *parent=nullptr);\n\nprivate:\n    QStringList str;\n</code></pre>\n\n<p>////MyClass.cpp////</p>\n\n<pre><code>MyClass::MyClass(QObject *parent)\n    : QAbstractListModel {parent}\n{\nstr.append(\"name1\");\nstr.append(\"name2\");\nstr.append(\"name3\");\n\n    QQuickView view;\n    QQmlContext *ctxt = view.rootContext();\n    ctxt-&gt;setContextProperty(\"strListView\", QVariant::fromValue(str));\n\n    view.setSource(QUrl(\"qrc:MyDialog.qml\"));\n}\n</code></pre>\n\n<p>In qml I have 2 qml files: main.qml and MyDialog.qml\n////MyDialog.qml////</p>\n\n<pre><code>...\n    Rectangle\n    {\nid:recList\nwidth:100\nheight:50\n\nListView\n        {\n            width: parent.width\n            height: parent.height\n            anchors.fill: parent\nText {\n                text: modelData\n            }\n}\n</code></pre>\n\n<p>It doesnt show anything and I get the warning:  <code>ReferenceError: modelData is not defined.</code></p>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1563364026, "post_id": 57074998, "comment_id": 100673442, "body": "How do you tell the worker threads that they should exit? You need some way to do that. And you need a way that will work even when they&#39;re waiting on the CV."}, {"owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "edited": false, "score": 0, "creation_date": 1563364481, "post_id": 57074998, "comment_id": 100673680, "body": "The conditional statement predicate in the worker thread should also take into account <code>max</code> variable to terminate gracefully. Current predicate don&#39;t seem to make sense."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1563364608, "post_id": 57074998, "comment_id": 100673749, "body": "<code>max</code> is a shared resource - and you&#39;re not protecting it as you read it.  this is UB.  simplest fix is to replace the while with a &quot;do while&quot;; and then assign a local variable to the value of max while it&#39;s locked in the loop"}, {"owner": {"reputation": 7495, "user_id": 11527076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xqgpS.png?s=128&g=1", "display_name": "prog-fh", "link": "https://stackoverflow.com/users/11527076/prog-fh"}, "edited": false, "score": 1, "creation_date": 1563366880, "post_id": 57074998, "comment_id": 100675078, "body": "Your second loop (the<code>main()</code>) should stop when <code>max</code> reaches zero (you just changed the condition and it is not the case any more)."}, {"owner": {"reputation": 477, "user_id": 7358319, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208581475631236/picture?type=large", "display_name": "Piero Macaluso", "link": "https://stackoverflow.com/users/7358319/piero-macaluso"}, "reply_to_user": {"reputation": 7495, "user_id": 11527076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xqgpS.png?s=128&g=1", "display_name": "prog-fh", "link": "https://stackoverflow.com/users/11527076/prog-fh"}, "edited": false, "score": 0, "creation_date": 1563370759, "post_id": 57074998, "comment_id": 100677675, "body": "@prog-fh The code is working without the condition variable in the main loop and <code>while(max &gt;0)</code>. Could this be a problem in concurrency because we are reading it outside critical section? If yes I am thinking about a <code>while (true)</code> also for the main loop but with the trick used in the thread loop with condition variable."}, {"owner": {"reputation": 7495, "user_id": 11527076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xqgpS.png?s=128&g=1", "display_name": "prog-fh", "link": "https://stackoverflow.com/users/11527076/prog-fh"}, "edited": false, "score": 0, "creation_date": 1563371988, "post_id": 57074998, "comment_id": 100678529, "body": "You should avoid changing many things at once in your code, it becomes very difficult to follow. Starting from a well defined problem, to which I gave a solution (that seemed to solve your issue but that you didn&#39;t accept or upvote by the way) you totally changed it by modifying conditional tests, even removing a <code>cv.wait()</code> call... and you end up with something like  &quot;what is wrong if I don&#39;t synchronise any more?&quot;. How can a previous answer still be relevant? How can we help you if your question changes every time?"}, {"owner": {"reputation": 7495, "user_id": 11527076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xqgpS.png?s=128&g=1", "display_name": "prog-fh", "link": "https://stackoverflow.com/users/11527076/prog-fh"}, "edited": false, "score": 0, "creation_date": 1563372505, "post_id": 57074998, "comment_id": 100678873, "body": "But, from the version of your code that I can see now, if you consider my answer and if you uncomment the second <code>cv.wait()</code> call, you will obtain the expected result."}, {"owner": {"reputation": 477, "user_id": 7358319, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208581475631236/picture?type=large", "display_name": "Piero Macaluso", "link": "https://stackoverflow.com/users/7358319/piero-macaluso"}, "reply_to_user": {"reputation": 7495, "user_id": 11527076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xqgpS.png?s=128&g=1", "display_name": "prog-fh", "link": "https://stackoverflow.com/users/11527076/prog-fh"}, "edited": false, "score": 0, "creation_date": 1563374671, "post_id": 57074998, "comment_id": 100680342, "body": "@prog-fh Sorry, I didn&#39;t want to cause confusion, but only provide an implementation of the code with the ability to check its correctness at the end. In any case, the code comment was my mistake (bad Copy&amp;Paste from my local code).   I would just like to understand if the fact that <code>max</code> is read outside the lock could cause race condition.  Ps. I cannot upvote (I have low reputation), but I will accept your solution at the end."}, {"owner": {"reputation": 7495, "user_id": 11527076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xqgpS.png?s=128&g=1", "display_name": "prog-fh", "link": "https://stackoverflow.com/users/11527076/prog-fh"}, "edited": false, "score": 0, "creation_date": 1563376478, "post_id": 57074998, "comment_id": 100681385, "body": "I edited my answer in order to clarity around the usage of <code>max</code>."}, {"owner": {"reputation": 3295, "user_id": 4743275, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7f8p3.jpg?s=128&g=1", "display_name": "KeyC0de", "link": "https://stackoverflow.com/users/4743275/keyc0de"}, "edited": false, "score": 0, "creation_date": 1579956981, "post_id": 57074998, "comment_id": 105944237, "body": "NEVER SET A CONDITION VARIABLE INSIDE A LOOP."}], "answers": [{"comments": [{"owner": {"reputation": 477, "user_id": 7358319, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208581475631236/picture?type=large", "display_name": "Piero Macaluso", "link": "https://stackoverflow.com/users/7358319/piero-macaluso"}, "edited": false, "score": 0, "creation_date": 1563365417, "post_id": 57075280, "comment_id": 100674168, "body": "Thanks for your answer, so I can use in general: <code>cv.wait(lk, [&amp;]() { return &lt;condition waiting&gt; || &lt;condition_end_while&gt;; });</code> followed by <code>if(&lt;condition_end_while&gt;) break;</code> to block the while loop? Simple and plain solution, thanks!"}, {"owner": {"reputation": 7495, "user_id": 11527076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xqgpS.png?s=128&g=1", "display_name": "prog-fh", "link": "https://stackoverflow.com/users/11527076/prog-fh"}, "reply_to_user": {"reputation": 477, "user_id": 7358319, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208581475631236/picture?type=large", "display_name": "Piero Macaluso", "link": "https://stackoverflow.com/users/7358319/piero-macaluso"}, "edited": false, "score": 0, "creation_date": 1563365700, "post_id": 57075280, "comment_id": 100674321, "body": "@Piero Macaluso I wouldn&#39;t say that in general but in this very specific and simple case I think this is correct."}], "tags": [], "owner": {"reputation": 7495, "user_id": 11527076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xqgpS.png?s=128&g=1", "display_name": "prog-fh", "link": "https://stackoverflow.com/users/11527076/prog-fh"}, "is_accepted": true, "score": 1, "last_activity_date": 1563376163, "last_edit_date": 1563376163, "creation_date": 1563364702, "answer_id": 57075280, "question_id": 57074998, "link": "https://stackoverflow.com/questions/57074998/condition-variable-with-a-while-loop-in-thread-in-c/57075280#57075280", "title": "Condition Variable with a while loop in thread in C++", "body": "<p>The threads are waiting for <em>something new</em> in the call <code>cv.wait()</code>.<br>\nBut the only change that can be observed with the provided lambda-closure is the value of <code>count</code>.<br>\nThe value of <code>max</code> must be checked too in order to have a chance to leave this <code>cv.wait()</code> call.</p>\n\n<p>A <em>minimal</em> change in your code could be</p>\n\n<pre><code>cv.wait(lk, [&amp;max, &amp;count]() { return count == 1 || max&lt;=0; });\nif(max&lt;=0) break;\n</code></pre>\n\n<p>assuming that changes to <code>max</code> always occur under the control of the mutex.</p>\n\n<hr>\n\n<p><em>An edit to clarify around the accesses to <code>max</code>.</em></p>\n\n<p>If the loop run by the threads is now <code>while(true)</code>, then the <code>max</code> variable is only read in its body which is synchronised by <code>mutex</code> (thanks to <code>lk</code>).<br>\nThe loop run by the main program is <code>while (max &gt; 0)</code>: <code>max</code> is read without synchronisation here but the only thread that can change this variable is the main program itself, so it's pure serial code from this perspective.<br>\nThe whole body of this loop is synchronised by <code>mutex</code> (thanks to <code>lk</code>) so it is safe to change the value of <code>max</code> here since the read operations in the threads are synchronised in the same way.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11797439, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GGolTVx-bEU/AAAAAAAAAAI/AAAAAAAAAAA/dhgQ9gyzatg/photo.jpg?sz=128", "display_name": "Alexander Ganyukhin", "link": "https://stackoverflow.com/users/11797439/alexander-ganyukhin"}, "is_accepted": false, "score": 0, "last_activity_date": 1563367308, "last_edit_date": 1563367308, "creation_date": 1563364903, "answer_id": 57075358, "question_id": 57074998, "link": "https://stackoverflow.com/questions/57074998/condition-variable-with-a-while-loop-in-thread-in-c/57075358#57075358", "title": "Condition Variable with a while loop in thread in C++", "body": "<ol>\n<li><p>You're having race conditions: in your code <code>max</code> may be read by multiple threads, whilst it is being modified in <code>main</code>, which is a race condition according to C++ standard.</p></li>\n<li><p>The predicates you are using in <code>wait</code> seems to be incorrect (you're using <code>==</code>).</p></li>\n</ol>\n"}], "owner": {"reputation": 477, "user_id": 7358319, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208581475631236/picture?type=large", "display_name": "Piero Macaluso", "link": "https://stackoverflow.com/users/7358319/piero-macaluso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2422, "favorite_count": 0, "accepted_answer_id": 57075280, "answer_count": 2, "score": 0, "last_activity_date": 1563376163, "creation_date": 1563363671, "last_edit_date": 1563374025, "question_id": 57074998, "link": "https://stackoverflow.com/questions/57074998/condition-variable-with-a-while-loop-in-thread-in-c", "title": "Condition Variable with a while loop in thread in C++", "body": "<p>I'm trying to figure out how to use <code>std::condition_variable</code> in C++ implementing a \"strange\" producer and consumer program in which I had set a limit to the <code>count</code> variable.</p>\n\n<p>The main thread (\"producer\") increments the count and must wait for this to return to zero to issue a new increment.</p>\n\n<p>The other threads enters in a loop where they have to decrease the counter and issue the notification.</p>\n\n<p>I am blocked because it is not clear to me how to conclude the program by orderly exiting the while loop inside the function of all threads.</p>\n\n<p>Could someone give me some guidance on how to implement it, please?</p>\n\n<h2>Code</h2>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n\n#include &lt;thread&gt;\n#include &lt;condition_variable&gt;\n#include &lt;vector&gt;\n\nint main() {\n        int n_core = std::thread::hardware_concurrency();\n    std::vector&lt;std::thread&gt; workers;\n    int max = 100;\n    int count = 0;\n    std::condition_variable cv;\n    std::mutex mutex;\n    int timecalled = 0;\n\n\n    for (int i = 0; i &lt; n_core; i++) {\n        workers.emplace_back(std::thread{[&amp;max, &amp;count, &amp;mutex, &amp;cv]() {\n            while (true) {\n                std::unique_lock&lt;std::mutex&gt; lk{mutex};\n                std::cout &lt;&lt; std::this_thread::get_id() &lt;&lt; \" cv\" &lt;&lt; std::endl;\n                cv.wait(lk, [&amp;count]() { return count == 1; });\n                std::cout &lt;&lt; std::this_thread::get_id() &lt;&lt; \" - \" &lt;&lt; count &lt;&lt; std::endl;\n                count--;\n                std::cout &lt;&lt; std::this_thread::get_id() &lt;&lt; \" notify dec\" &lt;&lt; std::endl;\n                cv.notify_all();\n            }\n        }});\n    }\n\n    while (max &gt; 0) {\n        std::unique_lock&lt;std::mutex&gt; lk{mutex};\n        std::cout &lt;&lt; std::this_thread::get_id() &lt;&lt; \" cv\" &lt;&lt; std::endl;\n        cv.wait(lk, [&amp;count]() { return count == 0; });\n        std::cout &lt;&lt; std::this_thread::get_id() &lt;&lt; \" created token\" &lt;&lt; std::endl;\n        count++;\n        max--;\n        timecalled++;\n        std::cout &lt;&lt; std::this_thread::get_id() &lt;&lt; \" notify inc\" &lt;&lt; std::endl;\n\n        cv.notify_all();\n    }\n\n    for (auto &amp;w : workers) {\n        w.join();\n    }\n\n    std::cout &lt;&lt; timecalled &lt;&lt; std::endl; // must be equal to max\n    std::cout &lt;&lt; count &lt;&lt; std::endl; // must be zero\n\n}\n</code></pre>\n\n<h2>Problem</h2>\n\n<p>The program doesn't end because it is stuck on some final <code>join</code>.</p>\n\n<h2>Expected Result</h2>\n\n<p>The expected result must be:</p>\n\n<pre><code>100\n0\n</code></pre>\n\n<h2>Edits Made</h2>\n\n<p><strong>EDIT 1</strong> : I replaced <code>max &gt; 0</code> in the while with a <code>true</code>. Now the loops are unbounded, but using the solution of @prog-fh seems to work.</p>\n\n<p><strong>EDIT 2</strong> : I added a variable to check the result in the end.</p>\n\n<p><strong>EDIT 3</strong>: I changed <code>while(true)</code> to <code>while(max &gt;0)</code>. Could this be a problem in concurrency because we are reading it without a lock?</p>\n"}, {"tags": ["c++", "linux", "heap-memory"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1563363577, "post_id": 57074877, "comment_id": 100673210, "body": "Linux is happy to <i>overcommit</i> (that is, allow programs to allocate more than is available). This is because the memory isn&#39;t mapped to the processes unless they are actually used (read from or written to) and it&#39;s uncommon for multiple processes to need all their pages simultaneously."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1563363645, "post_id": 57074877, "comment_id": 100673237, "body": "Besides, the <code>RLIMIT_DATA</code> doesn&#39;t mean what you think it means, which is explained in the duplicate."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1563364300, "post_id": 57074877, "comment_id": 100673587, "body": "@Someprogrammerdude That&#39;s likely not the cause. In this case, I believe the problem is more likely to do with the code using C++. Could you reopen it please?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1563364516, "post_id": 57074877, "comment_id": 100673695, "body": "@PSkocik <code>new</code> will use <code>malloc</code> which (on relatively modern Linux) will use <code>mmap</code>. And <code>RLIMIT_DATA</code> doesn&#39;t change the limits used by <code>mmap</code>, as explained in the duplicate."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1563365134, "post_id": 57074877, "comment_id": 100674020, "body": "@Someprogrammerdude The <code>setrlimit</code> manpage says that <code>RLIMIT_DATA</code> does apply to <code>mmap</code> since Linux 4.7. The problem with the C++ example appears to be the C++ standard libary preallocating some heap at startup and then using the preallocated heap to satisfy the small 5600B request. Either increasing the request size (on my system, to at least 1&lt;&lt;16) or switching to plain C (on top of glibc or musl) and malloc causes the request to be served directly from the OS (sbrk or mmap) and then the limit applies. This, I think, makes this C++ <code>setrlimit</code> question different from the C counterpart."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10247415, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DqFmM1KuGn8/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOGgc-Y1s7VOY2ocRQH7etlXhvoFQ/mo/photo.jpg?sz=128", "display_name": "Pichumani Chellappa", "link": "https://stackoverflow.com/users/10247415/pichumani-chellappa"}, "edited": false, "score": 1, "creation_date": 1563371132, "post_id": 57075461, "comment_id": 100677937, "body": "Thanks a lot for the explanation , It helped me a lot for understanding."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 21, "user_id": 10247415, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DqFmM1KuGn8/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOGgc-Y1s7VOY2ocRQH7etlXhvoFQ/mo/photo.jpg?sz=128", "display_name": "Pichumani Chellappa", "link": "https://stackoverflow.com/users/10247415/pichumani-chellappa"}, "edited": false, "score": 0, "creation_date": 1563371617, "post_id": 57075461, "comment_id": 100678288, "body": "@PichumaniChellappa No problem. You don&#39;t need to thank here. \u2713-ing and \u21d1-ing the answer does the job :)."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 1, "last_activity_date": 1563371908, "last_edit_date": 1563371908, "creation_date": 1563365283, "answer_id": 57075461, "question_id": 57074877, "link": "https://stackoverflow.com/questions/57074877/setrlimit-is-not-affecting-the-running-process/57075461#57075461", "title": "&quot;setrlimit()&quot; is not affecting the running process", "body": "<p>Most C++ standard libs including the one supplied with g++ start off with some heap memory preallocated.\n5600 is a small request and as such, on my Linux system it gets satisfied from the preallocated memory as evidenced\nfrom an <code>strace</code>:</p>\n\n<p>Modified example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/resource.h&gt;\nint main()\n{\n    struct rlimit the_limit = { 1, 1 };\n    if (-1 == setrlimit(RLIMIT_DATA, &amp;the_limit)) { perror(\"setrlimit failed\"); }\n\n    puts(\"ALLOC\");\n    #if __cplusplus\n    try { char *n = new char[5600]; } catch (...) { perror(\"alloc failure\"); }\n    #else\n    { char *n = malloc(1); if(!n) perror(\"alloc failure\"); }\n    #endif\n}\n</code></pre>\n\n<p>End of example's strace:</p>\n\n<pre><code>...\nwrite(1, \"ALLOC\\n\", 6ALLOC\n)                  = 6\nexit_group(0)                           = ?\n</code></pre>\n\n<p>Either increasing the request size, e.g. in my case to at least <code>1&lt;&lt;16</code>, or switching to plain C, causes the allocation request to be served from the OS, and then the limit does apply:</p>\n\n<p>End of strace with an <code>1&lt;&lt;16</code> allocation request:</p>\n\n<pre><code>write(1, \"ALLOC\\n\", 6ALLOC\n)                  = 6\nbrk(0x561bcc5d4000)                     = 0x561bcc5b2000\nmmap(NULL, 1048576, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = -1 ENOMEM (Cannot allocate memory)\ndup(2)                                  = 3\nfcntl(3, F_GETFL)                       = 0x2 (flags O_RDWR)\nfstat(3, {st_mode=S_IFCHR|0620, st_rdev=makedev(136, 14), ...}) = 0\nwrite(3, \"alloc failure: Cannot allocate m\"..., 38alloc failure: Cannot allocate memory\n) = 38\nclose(3)                                = 0\nexit_group(0)                           = ?\n</code></pre>\n\n<p>Note that generic allocator implementations generally use <code>sbrk</code> and/or \n<code>mmap</code> to get memory directly from the OS, and as you can glean from the <code>setrlimit</code> manpage, <code>RLIMIT_DATA</code> will only apply to a <code>mmap</code>-backed allocation iff you're on a Linux >= 4.7.</p>\n"}], "owner": {"reputation": 21, "user_id": 10247415, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DqFmM1KuGn8/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOGgc-Y1s7VOY2ocRQH7etlXhvoFQ/mo/photo.jpg?sz=128", "display_name": "Pichumani Chellappa", "link": "https://stackoverflow.com/users/10247415/pichumani-chellappa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1563371908, "creation_date": 1563363228, "last_edit_date": 1563371459, "question_id": 57074877, "link": "https://stackoverflow.com/questions/57074877/setrlimit-is-not-affecting-the-running-process", "title": "&quot;setrlimit()&quot; is not affecting the running process", "body": "<p>I am trying the simulate the Error Scenario of a Process in Linux that Heap is not enough to allocate the memory in a C++ Linux Application.\nBut Eventhough I use the \"setrlimit\" to reduce the Heap Memory available to the Process, still the heap memory is getting  allocated successfully.</p>\n\n<pre><code>struct rlimit the_limit = { 1, 1 };\nif (-1 == setrlimit(RLIMIT_DATA, &amp;the_limit)) {\n    perror(\"setrlimit failed\");\n}\n\ntry\n{\n   char *n = new char[5600];\n\n   if (n==NULL)\n   {\n      cout &lt;&lt;\"\\nAllocation Failure\\n\";\n   }\n}\ncatch (std::bad_alloc&amp; ba)\n{\n   std::cerr &lt;&lt; \"bad_alloc caught: \" &lt;&lt; ba.what() &lt;&lt; '\\n';\n}\n</code></pre>\n"}]