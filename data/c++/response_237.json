[{"tags": ["c++", "class", "static"], "comments": [{"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1564012542, "post_id": 57192600, "comment_id": 100894531, "body": "The <code>Abc::ct</code> must be defined outside your class, above <code>main</code>."}, {"owner": {"reputation": 169, "user_id": 11638153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e00e3ad6c21fc0896e84b89a3d10a1?s=128&d=identicon&r=PG&f=1", "display_name": "ewr3243", "link": "https://stackoverflow.com/users/11638153/ewr3243"}, "reply_to_user": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1564012616, "post_id": 57192600, "comment_id": 100894546, "body": "Any way to define <code>static</code> variable only in class? (without <code>const</code> of course)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1564012675, "post_id": 57192600, "comment_id": 100894557, "body": "From your sample, instance data seems more appropriated that static data BTW"}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1564045146, "post_id": 57192600, "comment_id": 100904551, "body": "@ewr3243 If C++17 or above is used then: <code>inline static unsigned int ct;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "is_accepted": false, "score": 0, "last_activity_date": 1564012825, "last_edit_date": 1564012825, "creation_date": 1564012483, "answer_id": 57192615, "question_id": 57192600, "link": "https://stackoverflow.com/questions/57192600/error-using-static-variable-unresolved-external-symbol-undefined-reference/57192615#57192615", "title": "error using static variable unresolved external symbol / undefined reference", "body": "<p>You declared your <code>static</code> variable, but you did not define and initialize it. Above <code>main()</code>, but outside of your class, add the following line:</p>\n\n<pre><code>unsigned int Abc::ct = 0;\n</code></pre>\n\n<p>or, if you are using <code>C++17</code>, you can change your:</p>\n\n<pre><code>static unsigned int ct;\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>static inline unsigned int ct = 0;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 169, "user_id": 11638153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e00e3ad6c21fc0896e84b89a3d10a1?s=128&d=identicon&r=PG&f=1", "display_name": "ewr3243", "link": "https://stackoverflow.com/users/11638153/ewr3243"}, "edited": false, "score": 0, "creation_date": 1564012688, "post_id": 57192618, "comment_id": 100894561, "body": "What do you mean? Where to define? What about <code>static</code>?"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 0, "last_activity_date": 1564012897, "last_edit_date": 1564012897, "creation_date": 1564012501, "answer_id": 57192618, "question_id": 57192600, "link": "https://stackoverflow.com/questions/57192600/error-using-static-variable-unresolved-external-symbol-undefined-reference/57192618#57192618", "title": "error using static variable unresolved external symbol / undefined reference", "body": "<p>You have to define it:</p>\n\n<pre><code>unsigned int Abc::ct = 0;\n</code></pre>\n\n<p><a href=\"https://ideone.com/BKAEzF\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 169, "user_id": 11638153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e00e3ad6c21fc0896e84b89a3d10a1?s=128&d=identicon&r=PG&f=1", "display_name": "ewr3243", "link": "https://stackoverflow.com/users/11638153/ewr3243"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1564012765, "answer_count": 2, "score": 0, "last_activity_date": 1564012897, "creation_date": 1564012294, "last_edit_date": 1564012590, "question_id": 57192600, "link": "https://stackoverflow.com/questions/57192600/error-using-static-variable-unresolved-external-symbol-undefined-reference", "closed_reason": "Duplicate", "title": "error using static variable unresolved external symbol / undefined reference", "body": "<p>I am using <code>static</code> variable. After referring to <a href=\"https://stackoverflow.com/questions/195207/unresolved-external-symbol-on-static-class-members\">Unresolved external symbol on static class members</a>, I modified the program with <code>Abc::ct</code></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Abc\n{\nprivate:\n    static unsigned int ct;\n\npublic:\n    void f1()\n    {\n        for (int i = 0; i &lt; 5; ++i)\n            f2();\n    }\n\n    void f2() {\n        Abc::ct = 0;\n        if (Abc::ct == 0)\n            std::cout &lt;&lt; \"Zero iteration\\n\";\n\n        std::cout &lt;&lt; Abc::ct &lt;&lt; \"\\t\";\n        ++Abc::ct;\n    }\n};\n\n\n\nint main()\n{\n    Abc obj;\n    obj.f1();\n}\n</code></pre>\n\n<p>but getting error as <code>error LNK2001: unresolved external symbol \"private: static unsigned int Abc::ct\"</code>  in MSVC or <code>undefined reference to Abc::ct</code> in g++. How can I define static variable in class <code>Abc</code>? </p>\n"}, {"tags": ["c++", "binary-search-tree"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1564013122, "post_id": 57192586, "comment_id": 100894633, "body": "several issues, should be something like <code>BST&lt;int&gt; test;</code>. then read <a href=\"https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file\">why-can-templates-only-be-implemented-in-the-header-file</a>"}, {"owner": {"reputation": 31, "user_id": 11660473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c20b9225bcd47ba09773b009c1ecd86?s=128&d=identicon&r=PG&f=1", "display_name": "ii69outof247", "link": "https://stackoverflow.com/users/11660473/ii69outof247"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1564013759, "post_id": 57192586, "comment_id": 100894727, "body": "But I&#39;m not trying to have BST handle any int. It&#39;s just a constructor for creation of the BST which is a binary search tree object. Why then would I use BST&lt;int&gt; test;???"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1564014342, "post_id": 57192586, "comment_id": 100894818, "body": "In your code, <code>BST</code> is a template class, so to instantiate it, you need to provide its type parameter. (you can instantiate <code>BST&lt;T&gt;</code> for a given <code>T</code>, but <code>BST</code> is not a class and cannot be instantiated)."}, {"owner": {"reputation": 31, "user_id": 11660473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c20b9225bcd47ba09773b009c1ecd86?s=128&d=identicon&r=PG&f=1", "display_name": "ii69outof247", "link": "https://stackoverflow.com/users/11660473/ii69outof247"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1564014976, "post_id": 57192586, "comment_id": 100894920, "body": "My intention is to do BST test and then being able to do test.insert(one) which is the Packet &quot;one&quot; as seen in main.cpp. Is there any way to achieve this with the flexibility of a template? I&#39;m not sure how to achieve that?"}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1564015736, "post_id": 57192586, "comment_id": 100895039, "body": "Please avoid <code>using namespace std;</code>.  It is considered bad practice.  See <a href=\"https://stackoverflow.com/q/1452721\">Why is \u201cusing namespace std;\u201d considered bad practice?</a>  In particular, don&#39;t use it before <code>#include &lt;iostream&gt;</code>."}, {"owner": {"reputation": 31, "user_id": 11660473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c20b9225bcd47ba09773b009c1ecd86?s=128&d=identicon&r=PG&f=1", "display_name": "ii69outof247", "link": "https://stackoverflow.com/users/11660473/ii69outof247"}, "edited": false, "score": 0, "creation_date": 1564015843, "post_id": 57192586, "comment_id": 100895059, "body": "I&#39;ve been aware it&#39;s bad practice. But my priority is fixing what&#39;s the glaring problem in this post. Do you have any ideas on how to fix this so I can use it as my intention states? Because if this isn&#39;t fixed, I don&#39;t think I can use my BST to take in Packet."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1564016003, "post_id": 57192586, "comment_id": 100895085, "body": "So it seems you want <code>BST&lt;Packet&gt; test;</code>."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1564019500, "post_id": 57192586, "comment_id": 100895665, "body": "<code>BST</code> is a template that takes a parameter, and you must provide one to instantiate the template, and you need to figure out what that template parameter must be. That&#39;s the only way that C++ templates work. Either that, or <code>BST</code> should not be a template."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 11660473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c20b9225bcd47ba09773b009c1ecd86?s=128&d=identicon&r=PG&f=1", "display_name": "ii69outof247", "link": "https://stackoverflow.com/users/11660473/ii69outof247"}, "edited": false, "score": 0, "creation_date": 1564092756, "post_id": 57194020, "comment_id": 100927739, "body": "Thank you. You solved my problem. Instead of putting everything in the header, I opted to include the .h and .cpp in my main.cpp which solves the problem too! For instance #include &quot;BST.cpp&quot; and of the course the .h file!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "reply_to_user": {"reputation": 31, "user_id": 11660473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c20b9225bcd47ba09773b009c1ecd86?s=128&d=identicon&r=PG&f=1", "display_name": "ii69outof247", "link": "https://stackoverflow.com/users/11660473/ii69outof247"}, "edited": false, "score": 0, "creation_date": 1564101961, "post_id": 57194020, "comment_id": 100929427, "body": "<a href=\"https://stackoverflow.com/q/19547091/10957435\">Here&#39;s why that&#39;s not a good idea</a>, but whatever works for you, I guess."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "is_accepted": true, "score": 2, "last_activity_date": 1564026554, "creation_date": 1564026554, "answer_id": 57194020, "question_id": 57192586, "link": "https://stackoverflow.com/questions/57192586/how-do-i-fix-my-object-initialization-for-a-template-bst-class/57194020#57194020", "title": "How do I fix my object initialization for a template BST class?", "body": "<p>There are 2 problems.</p>\n\n<p>The first is that <code>Node</code> needs to know what type <code>T</code> is, so you need to tell it when you use <code>Node</code> like this:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass BST {\npublic:\n    BST();\n    void insert(T data);\nprivate:\n    Node&lt;T&gt; * root; \n};\n</code></pre>\n\n<p>Secondly, <code>BST</code> needs to know what its own type <code>T</code> is when you try to use it, so you need to do it like this:</p>\n\n<pre><code>BST&lt;int&gt; test; // Or whatever you are searching for in your tree. Doesn't have to be an int\n</code></pre>\n\n<hr>\n\n<p>P.S. Just heading this off now, <a href=\"https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file\">you're probably going to need to implement <code>BST</code> in the header file</a>. Failure to do so might cause linker problems.</p>\n\n<hr>\n\n<p>P.P.S. I've been reading your comments on the original post, and what you actually probably need this instead:</p>\n\n<pre><code>BST&lt;Packet&gt; test; // Since you are searching for packets.\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11660473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c20b9225bcd47ba09773b009c1ecd86?s=128&d=identicon&r=PG&f=1", "display_name": "ii69outof247", "link": "https://stackoverflow.com/users/11660473/ii69outof247"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 57194020, "answer_count": 1, "score": 1, "last_activity_date": 1564026554, "creation_date": 1564012167, "question_id": 57192586, "link": "https://stackoverflow.com/questions/57192586/how-do-i-fix-my-object-initialization-for-a-template-bst-class", "title": "How do I fix my object initialization for a template BST class?", "body": "<p>This problem occurs in my main.cpp:</p>\n\n<pre><code>using namespace std;\n\n#include &lt;iostream&gt;\n\n#include \"BST.h\"\n#include \"Packet.h\"\n\nint main()\n{\n    BST test; // It occurs on this line!\n    Packet one(1, \"testPacket\", 1, 1);\n\n    system(\"Pause\");\n}\n</code></pre>\n\n<p>The error on that line says:</p>\n\n<blockquote>\n  <p>argument list for class template \"BST\" is missing</p>\n</blockquote>\n\n<p>I don't know how to fix it. I just want to initialize the BST. How can I fix this error? I'm not very experienced with templates. Please help. <strong>My priority is fixing this glaring problem right now.</strong> Can I get help?</p>\n\n<p><strong>For reference purposes:</strong></p>\n\n<p><em>BST.h:</em></p>\n\n<pre><code>#ifndef BST_H\n#define BST_H\n\nusing namespace std;\n\ntemplate &lt;typename T&gt;\nclass Node {\n    public:\n        Node() : rlink(nullptr), llink(nullptr) {}\n        ~Node() {}\n    private:\n        T data;\n        Node *rlink, *llink;\n\n};\n\ntemplate &lt;typename T&gt;\nclass BST {\npublic:\n    BST();\n    void insert(T data);\nprivate:\n    Node * root; \n};\n\n#endif\n</code></pre>\n\n<p><em>BST.cpp</em></p>\n\n<pre><code>#include \"BST.h\"\n\ntemplate &lt;typename T&gt;\nBST&lt;T&gt;::BST() : root(nullptr) {}\n\ntemplate &lt;typename T&gt;\nvoid BST&lt;T&gt;::insert(T data) {\n    if (root != nullptr) {\n\n    }\n    else {\n        cout &lt;&lt; \"NPTR\" &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p><em>Packet.h</em></p>\n\n<pre><code>#ifndef PACKET_H\n#define PACKET_H\n\n#include &lt;string&gt;\n\nusing namespace std;\n\nclass Packet {\npublic:\n    Packet(int partId, string description, double price, int partCount) :\n        partId(partId), description(description), price(price), partCount(partCount) {}\n    int getPartId() const { return partId; }\n    string getDescription() const { return description; }\n    double getPrice() const { return price; }\n    int getPartCount() const { return partCount; }\nprivate:\n    int partId;\n    string description;\n    double price;\n    int partCount;\n};\n\n#endif\n</code></pre>\n"}, {"tags": ["c++", "networking", "multicast"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1564014982, "post_id": 57192547, "comment_id": 100894921, "body": "Your <code>receiver</code> is joining the multicast group using <code>INADDR_ANY</code>. <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/ws2ipdef/ns-ws2ipdef-ip_mreq\" rel=\"nofollow noreferrer\">MSDN says</a>: &quot;<i><code>imr_interface</code> ... If this member specifies an IPv4 address of 0.0.0.0, <b>the default IPv4 multicast interface is used</b>... It is recommended that a local IPv4 address or interface index always be specified in the <code>imr_interface</code> member of the <code>ip_mreq</code> structure, rather than use the default interface. This is particularly important on computers with multiple network interfaces and multiple public IPv4 addresses.</i>&quot;"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1564015534, "post_id": 57192547, "comment_id": 100895009, "body": "Similar for your <code>server</code>, <a href=\"https://docs.microsoft.com/en-us/windows/win32/winsock/ipproto-ip-socket-options\" rel=\"nofollow noreferrer\">MSDN says</a>: &quot;<i>IP_MULTICAST_IF... If optval is [0.0.0.0], <b>the default interface for receiving multicast is specified for sending multicast traffic</b>.</i>&quot;  Don&#39;t use <code>INADDR_ANY</code> for multicast. You can <code>bind()</code> a listening socket to <code>INADDR_ANY</code> to read packets on multiple network interfaces, but don&#39;t use <code>INADDR_ANY</code> for joining multicast groups or sending multicast packets. Be specific about the network interfaces to use. This is an advantage of Multicasting vs UDP broadcasting."}, {"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1564018498, "post_id": 57192547, "comment_id": 100895524, "body": "Modern network switches probably have IGMP snooping enabled that only delivers multicast packets to interfaces where is has been requested via IGMP, so you should properly subscribe to the multicast group on the receiver. Also, you are using a multicast group registered to a company for a specific protocol. You should use something in the Organization-Local scope (<code>239.0.0.0&#47;8</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 507, "user_id": 2673209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f090e273bb8046ae7855a7db917419?s=128&d=identicon&r=PG", "display_name": "aguaviva", "link": "https://stackoverflow.com/users/2673209/aguaviva"}, "is_accepted": false, "score": 0, "last_activity_date": 1564247707, "last_edit_date": 1564247707, "creation_date": 1564245277, "answer_id": 57234091, "question_id": 57192547, "link": "https://stackoverflow.com/questions/57192547/simple-multicast-app-not-working-on-different-computer-on-the-same-network/57234091#57234091", "title": "simple multicast app not working on different computer on the same network", "body": "<p>This code should work, the problem was that I was using IP_MULTICAST_IF, that forces to use a network interface different from the default one. In case one needs to use such a thing I was able to get the multicast working by following \nThanks to Remy Lebeau advice, that is to make sure you are binding the sockets to IPs that are in the same network. </p>\n\n<p>Here is working code the code:</p>\n\n<pre><code>#ifdef WIN32\n#define _WINSOCK_DEPRECATED_NO_WARNINGS\n#include &lt;winsock2.h&gt;\n#include &lt;ws2tcpip.h&gt;\n#pragma comment(lib, \"ws2_32.lib\")\n\n#else\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;string.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;unistd.h&gt;\n\n#endif\n\n#include &lt;thread&gt;\n\nchar mcastGroup[] = \"224.1.2.3\";\nint mcastPort = 5435;\n\nvoid PrintAddrIn(sockaddr_in addr_in)\n{\n    char str[255];\n    inet_ntop(AF_INET, &amp;addr_in.sin_addr, (char *)str, sizeof(str));\n    printf(\"%s\", str);\n}\n\nint receiver(int sck)\n{\n    while (1)\n    {\n        char buf[1024];\n        memset(buf, 0, sizeof(buf));\n\n        struct sockaddr_in addrin;\n        socklen_t addrinlen = sizeof(addrin);\n        memset(&amp;addrin, 0, sizeof(addrin));\n        int res = recvfrom(sck, buf, sizeof(buf), 0, (sockaddr *)&amp;addrin, &amp;addrinlen);\n        if (res&lt;0)\n        {\n            printf(\"Message read error\\n\");\n            exit(1);\n        }\n        else\n        {\n            PrintAddrIn(addrin); printf(\": %s\\n\", buf);\n        }\n    }\n    return 0;\n}\n\nint sender(int sck)\n{\n    while (1)\n    {\n        sockaddr_in grpSck;\n        memset((char *)&amp;grpSck, 0, sizeof(grpSck));\n        grpSck.sin_family = AF_INET;\n        grpSck.sin_port = htons(mcastPort);\n        grpSck.sin_addr.s_addr = inet_addr(mcastGroup);\n\n        for (int i = 0; i &lt; 100; i++)\n        {\n            char buf[1024];\n            fgets(buf, sizeof(buf), stdin);\n\n            if (sendto(sck, buf, strlen(buf), 0, (struct sockaddr*)&amp;grpSck, sizeof(grpSck)) &lt; 0)\n            {\n                printf(\"Error in sending message\");\n                exit(1);\n            }\n        }\n    }\n    return 0;\n}\n\nint main()\n{\n#ifdef WIN32\n    WSADATA wsaData;\n    WSAStartup(MAKEWORD(2, 2), &amp;wsaData);\n#endif\n\n    int sck = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);\n\n    // Set reuse\n    //\n    int reuse = 1;\n    if (setsockopt(sck, SOL_SOCKET, SO_REUSEADDR, (char *)&amp;reuse, sizeof(reuse)) &lt; 0)\n    {\n        perror(\"Socket reuse address error\\n\");\n        exit(1);\n    }\n    else\n    {\n        printf(\"Socket reuse address successfull\\n\");\n    }\n\n    // Join mcast group\n    //\n    struct ip_mreq grp;\n    grp.imr_multiaddr.s_addr = inet_addr(mcastGroup);\n    grp.imr_interface.s_addr = htonl(INADDR_ANY);\n    if (setsockopt(sck, IPPROTO_IP, IP_ADD_MEMBERSHIP, (char *)&amp;grp, sizeof(grp)) &lt; 0)\n    {\n        printf(\"Error in joining group\\n\");\n        exit(1);\n    }\n    else\n    {\n        printf(\"Group joined successfully\\n\");\n    }\n\n    // Bind socket\n    //\n    struct sockaddr_in lclSck;\n    memset((char *)&amp;lclSck, 0, sizeof(lclSck));\n    lclSck.sin_family = AF_INET;\n    lclSck.sin_port = htons(mcastPort);\n    lclSck.sin_addr.s_addr = htonl(INADDR_ANY);\n    if (bind(sck, (struct sockaddr*)&amp;lclSck, sizeof(lclSck)))\n    {\n        perror(\"Error in binding socket\\n\");\n        exit(1);\n    }\n    else\n    {\n        printf(\"Socket binding successfull\\n\");\n    }\n\n    u_char ttl = 5;\n    setsockopt(sck, IPPROTO_IP, IP_MULTICAST_TTL, (char *)&amp;ttl, sizeof(ttl));\n\n    std::thread t1([&amp;] { receiver(sck); return 0; });\n\n    sender(sck);\n\n#ifdef WIN32\n    WSACleanup();\n#endif\n}\n</code></pre>\n"}], "owner": {"reputation": 507, "user_id": 2673209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f090e273bb8046ae7855a7db917419?s=128&d=identicon&r=PG", "display_name": "aguaviva", "link": "https://stackoverflow.com/users/2673209/aguaviva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564247707, "creation_date": 1564011738, "question_id": 57192547, "link": "https://stackoverflow.com/questions/57192547/simple-multicast-app-not-working-on-different-computer-on-the-same-network", "title": "simple multicast app not working on different computer on the same network", "body": "<ul>\n<li>If I launch 2 instances of the code below in the same computer the multicast works fine.</li>\n<li>If I launch it on a different computer in the same network I won't receive anything. </li>\n</ul>\n\n<p>Any idea what could be wrong? This code should compile as is. </p>\n\n<p>I am testing on win10 but I get similar results when I run this on linux.</p>\n\n<pre><code>#include \"pch.h\"\n#define _WINSOCK_DEPRECATED_NO_WARNINGS\n#include \"winsock2.h\"\n#include &lt;iostream&gt;\n#include &lt;conio.h&gt;\n#include &lt;thread&gt;\n#include &lt;ws2tcpip.h&gt;\n\n#pragma comment(lib, \"ws2_32.lib\")\n\nchar mcastGroup[] = \"224.1.2.3\";\nint mcastPort = 5435;\n\nint CreateSocket()\n{\n    return socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);\n}\n\nvoid JoinGroup(int sck)\n{\n    struct ip_mreq grp;\n    grp.imr_multiaddr.s_addr = inet_addr(mcastGroup);\n    grp.imr_interface.s_addr = htonl(INADDR_ANY);\n\n    if (setsockopt(sck, IPPROTO_IP, IP_ADD_MEMBERSHIP, (char *)&amp;grp, sizeof(grp)) &lt; 0)\n    {\n        printf(\"Error in joining group\\n\");\n        closesocket(sck);\n        exit(1);\n    }\n}\n\nint receiver()\n{\n     int sck = CreateSocket();\n\n    int reuse = 1;\n    if (setsockopt(sck, SOL_SOCKET, SO_REUSEADDR, (char *)&amp;reuse, sizeof(reuse)) &lt; 0)\n    {\n        perror(\"Socket reuse address error\\n\");\n        closesocket(sck);\n        exit(1);\n    }\n\n    JoinGroup(sck);\n\n    struct sockaddr_in lclSck;\n    memset((char *)&amp;lclSck, 0, sizeof(lclSck));\n    lclSck.sin_family = AF_INET;\n    lclSck.sin_port = htons(mcastPort);\n    lclSck.sin_addr.s_addr = htonl(INADDR_ANY);\n    if (bind(sck, (struct sockaddr*)&amp;lclSck, sizeof(lclSck)))\n    {\n        perror(\"Error in binding socket\\n\");\n        closesocket(sck);\n        exit(1);\n    }\n\n    while (1)\n    {\n        int blen;\n        char buf[1024];\n        blen = sizeof(buf);\n        memset(buf, 0, blen);\n\n        struct sockaddr_in addrin;\n        int addrinlen = sizeof(addrin);\n        memset(&amp;addrin, 0, sizeof(addrin));\n        int res = recvfrom(sck, buf, blen, 0, (sockaddr *)&amp;addrin, &amp;addrinlen);\n        if (res&lt;0)\n        {\n            printf(\"Message read error\\n\");\n            closesocket(sck);\n            exit(1);\n        }\n        else\n        {\n            printf(\": %s\\n\", buf);\n        }\n\n    }\n    return 0;\n}\n\nint sender()\n{\n    int sck = CreateSocket();\n\n    struct in_addr lclInterface;\n    lclInterface.s_addr = htonl(INADDR_ANY);\n    if (setsockopt(sck, IPPROTO_IP, IP_MULTICAST_IF, (char *)&amp;lclInterface, sizeof(lclInterface)) &lt; 0)\n    {\n        printf(\"Local interface error\\n\");\n        exit(1);\n    }\n    else\n    {\n        printf(\"Local interface set\\n\");\n    }\n\n    u_char ttl = 5;\n    setsockopt(sck, IPPROTO_IP, IP_MULTICAST_TTL, (char *)&amp;ttl, sizeof(ttl));\n\n    while (1)\n    {\n        int blen;\n        char buf[1024];\n        blen = sizeof(buf);\n        memset(buf, 0, blen);\n\n        for (int i = 0; i &lt; 100; i++)\n        {\n            fgets(buf, blen, stdin);\n\n            sockaddr_in grpSck;\n            memset((char *)&amp;grpSck, 0, sizeof(grpSck));\n            grpSck.sin_family = AF_INET;\n            grpSck.sin_port = htons(mcastPort);\n            grpSck.sin_addr.s_addr = inet_addr(mcastGroup);\n            if (sendto(sck, buf, blen, 0, (struct sockaddr*)&amp;grpSck, sizeof(grpSck)) &lt; 0)\n            {\n                printf(\"Error in sending message\");\n            }\n        }\n    }\n    return 0;\n}\n\nint main()\n{\n    WSADATA wsaData;\n    WSAStartup(MAKEWORD(2, 2), &amp;wsaData);\n\n    std::thread t1([&amp;] { receiver(); return 0; });   \n    sender();\n\n    WSACleanup();\n}\n</code></pre>\n"}, {"tags": ["c++", "datetime", "c++17"], "comments": [{"owner": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "edited": false, "score": 0, "creation_date": 1564012787, "post_id": 57192533, "comment_id": 100894578, "body": "How are the dates formatted? <code>&lt;ctime&gt;</code> has 4 time-related types - is it one of those, or is it defined some other way?"}, {"owner": {"reputation": 47, "user_id": 11723147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a7e241e8cd79b6ea6ad35627506305e?s=128&d=identicon&r=PG&f=1", "display_name": "eliaroseX", "link": "https://stackoverflow.com/users/11723147/eliarosex"}, "reply_to_user": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "edited": false, "score": 0, "creation_date": 1564013044, "post_id": 57192533, "comment_id": 100894622, "body": "@NickReed what do you mean by four types? Four representations ?"}, {"owner": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "edited": false, "score": 0, "creation_date": 1564014190, "post_id": 57192533, "comment_id": 100894792, "body": "<code>ctime</code> includes <code>clock_t</code>, <code>size_t</code>, <code>time_t</code>, and <code>struct tm</code> - were you planning to store the dates in one of these?"}, {"owner": {"reputation": 47, "user_id": 11723147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a7e241e8cd79b6ea6ad35627506305e?s=128&d=identicon&r=PG&f=1", "display_name": "eliaroseX", "link": "https://stackoverflow.com/users/11723147/eliarosex"}, "reply_to_user": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "edited": false, "score": 0, "creation_date": 1564014277, "post_id": 57192533, "comment_id": 100894808, "body": "@NickReed yes, but I don\u2019t know how to properly generate a date range"}, {"owner": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "edited": false, "score": 0, "creation_date": 1564014918, "post_id": 57192533, "comment_id": 100894910, "body": "Can you provide an example of c++ code that has the start date and end date stored in two variables? At present it&#39;s unclear how the data will be stored, so it&#39;s had to say how a range can be generated."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1564015068, "post_id": 57192533, "comment_id": 100894934, "body": "Did you try something?"}, {"owner": {"reputation": 47, "user_id": 11723147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a7e241e8cd79b6ea6ad35627506305e?s=128&d=identicon&r=PG&f=1", "display_name": "eliaroseX", "link": "https://stackoverflow.com/users/11723147/eliarosex"}, "reply_to_user": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "edited": false, "score": 0, "creation_date": 1564015408, "post_id": 57192533, "comment_id": 100894992, "body": "@NickReed I\u2019d like to use struct tm as a date object and get an array of struct tm"}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1564015633, "post_id": 57192533, "comment_id": 100895024, "body": "I cannot fully understand the phrase &quot;a vector of dates (with a daily period) given two dates&quot;.  An example may help me understand."}, {"owner": {"reputation": 47, "user_id": 11723147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a7e241e8cd79b6ea6ad35627506305e?s=128&d=identicon&r=PG&f=1", "display_name": "eliaroseX", "link": "https://stackoverflow.com/users/11723147/eliarosex"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1564016150, "post_id": 57192533, "comment_id": 100895118, "body": "@L.F. Given two dates means for example 1 Jan 2019 and 10 Jan 2019 will give me a vector containing the 10 dates between (and including) those 2."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1564016219, "post_id": 57192533, "comment_id": 100895133, "body": "@eliaroseX I understand it now.  If you <a href=\"https://stackoverflow.com/posts/57192533/edit\">edit</a> your question to include this information, other people will understand as well."}, {"owner": {"reputation": 47, "user_id": 11723147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a7e241e8cd79b6ea6ad35627506305e?s=128&d=identicon&r=PG&f=1", "display_name": "eliaroseX", "link": "https://stackoverflow.com/users/11723147/eliarosex"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1564016299, "post_id": 57192533, "comment_id": 100895146, "body": "@L.F. Done, thanks for the advice"}], "answers": [{"tags": [], "owner": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "is_accepted": false, "score": 1, "last_activity_date": 1564018173, "last_edit_date": 1564018173, "creation_date": 1564017211, "answer_id": 57193031, "question_id": 57192533, "link": "https://stackoverflow.com/questions/57192533/generate-a-date-vector-using-ctime/57193031#57193031", "title": "Generate a date vector using &lt;ctime&gt;", "body": "<p>Here's a small, quick demo program - it makes a vector of <code>struct tm</code>, and then prints the time out. Each new entry to the vector is one day ahead of the old one, seamlessly wrapping around months and years as it rolls past them.</p>\n\n<p>Time is often stored in a <code>time_t</code>, which is the count of seconds since y2k. This data type seems easier to manipulate than a <code>struct tm</code> - we'll use it, coupled with how many seconds are in a day, to create a vector of <code>struct tm</code> as we go. We'll start at time0, and we'll continue 20 days, to time19, adding a new <code>struct tm</code> for every day we count.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;ctime&gt;\n#include &lt;vector&gt;\n\nint main(void) {\n\n  double secs_in_a_day = 86400;\n\n\n  time_t time0; //your start time here\n  time(&amp;time0); //i'm using the current time\n\n  //20 days later\n  time_t time19 = time0 + (20 * secs_in_a_day); //your end time here\n\n  std::vector&lt;struct tm &gt; timevec;\n\n  for(time_t i = time0; i &lt;= time19; i += secs_in_a_day) {\n    struct tm t = *(gmtime(&amp;i));\n    std::cout &lt;&lt; i &lt;&lt; \"\\n\";\n    timevec.push_back(t);\n  }\n\n  char buffer[80];\n\n  for(struct tm tim : timevec) {\n    strftime(buffer, 80, \"Time: %d / %m / %y\\n\", &amp;tim);\n    puts(buffer);\n  }\n\n\n  return 0;\n}\n</code></pre>\n\n<p>Note that the for loop increments by the number of seconds in a day. It's likely possible to do this directly with <code>struct tm</code> or <code>struct tm *</code> variables, but then there would be a good deal of chasing pointers around. Given that it's so easy to convert to <code>time_t</code>, it's probably worth saving the headache to use it instead.</p>\n\n<p>Hope this helps - C++ admittedly leaves a bit to be desired when dealing with time.</p>\n"}, {"comments": [{"owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "edited": false, "score": 0, "creation_date": 1564032344, "post_id": 57193161, "comment_id": 100898343, "body": "This is much easier than mucking about with <code>tm</code>s.  Once more standard libraries implement this, this should be how you write this code."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "reply_to_user": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "edited": false, "score": 0, "creation_date": 1564032408, "post_id": 57193161, "comment_id": 100898362, "body": "@MarshallClow Yeah, with the ranges library it is even better."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1564062260, "post_id": 57193161, "comment_id": 100914255, "body": "Well heck, if I had known <code>&lt;ctime&gt;</code> wasn&#39;t required I could&#39;ve posted this. :-) (upvoted)"}, {"owner": {"reputation": 47, "user_id": 11723147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a7e241e8cd79b6ea6ad35627506305e?s=128&d=identicon&r=PG&f=1", "display_name": "eliaroseX", "link": "https://stackoverflow.com/users/11723147/eliarosex"}, "reply_to_user": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1564069086, "post_id": 57193161, "comment_id": 100918203, "body": "@HowardHinnant my bad, I wanted to use &lt;ctime&gt; but this solution is quite interesting"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1564071316, "post_id": 57193161, "comment_id": 100919337, "body": "&lt;chuckle&gt; I&#39;m delighted you find it interesting.  Just let me know if you have any questions about how to use it."}], "tags": [], "owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "is_accepted": true, "score": 3, "last_activity_date": 1564018785, "creation_date": 1564018785, "answer_id": 57193161, "question_id": 57192533, "link": "https://stackoverflow.com/questions/57192533/generate-a-date-vector-using-ctime/57193161#57193161", "title": "Generate a date vector using &lt;ctime&gt;", "body": "<p>With the C++20 date library (a.k.a. <a href=\"https://github.com/HowardHinnant/date\" rel=\"nofollow noreferrer\">Howard Hinnant's date library</a>):</p>\n\n<pre><code>#include \"date.h\"\n\nauto get_dates(date::sys_days first, date::sys_days last)\n{\n    std::vector&lt;date::sys_days&gt; dates;\n    for (; first &lt;= last; first += date::days{1})\n        dates.push_back(first);\n    return dates;\n}\n</code></pre>\n\n<p>(<a href=\"https://wandbox.org/permlink/L8MwjzSSC3fXXrMd\" rel=\"nofollow noreferrer\">live demo</a>)</p>\n"}], "owner": {"reputation": 47, "user_id": 11723147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a7e241e8cd79b6ea6ad35627506305e?s=128&d=identicon&r=PG&f=1", "display_name": "eliaroseX", "link": "https://stackoverflow.com/users/11723147/eliarosex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "accepted_answer_id": 57193161, "answer_count": 2, "score": 0, "last_activity_date": 1564018871, "creation_date": 1564011620, "last_edit_date": 1564018871, "question_id": 57192533, "link": "https://stackoverflow.com/questions/57192533/generate-a-date-vector-using-ctime", "title": "Generate a date vector using &lt;ctime&gt;", "body": "<p>How can I build a vector containing all dates (daily period) between two given dates using <code>&lt;ctime&gt;</code> library?  For example, given January 1, 2019 and January 10, 2019, a vector containing the 10 dates in between (inclusive)?</p>\n\n<p>I don\u2019t really mind about the representation of the dates, could be a string or any other structure but I would like to understand how to manipulate <code>&lt;ctime&gt;</code> objects.</p>\n\n<p>If there is a better library for time representation in C++, I\u2019d be glad to hear about it.</p>\n"}, {"tags": ["c++", "gmp"], "comments": [{"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 1, "creation_date": 1564016815, "post_id": 57192415, "comment_id": 100895225, "body": "<code>mpz_class(bignum%10).get_si()</code>, but you would probably be better off using the lower-level <code>mpz_fdiv_ui</code>."}], "answers": [{"tags": [], "owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "is_accepted": true, "score": 1, "last_activity_date": 1564021988, "last_edit_date": 1564021988, "creation_date": 1564019427, "answer_id": 57193208, "question_id": 57192415, "link": "https://stackoverflow.com/questions/57192415/casting-an-mpz-class-temporary-to-int/57193208#57193208", "title": "Casting an mpz_class temporary to int", "body": "<p>The GMP library uses expression templates to avoid unnecessary temporary variables.  As such, <code>bignum % 10</code> returns a proxy that represents the expression and only evaluates when converted to <code>mpz_class</code>.  Also, <code>mpz_class</code> does not implicitly convert to <code>int</code>.  Therefore, as mentioned in <a href=\"https://stackoverflow.com/questions/57192415/casting-an-mpz-class-temporary-to-int/57193208#comment100895225_57192415\">comment</a>, you need to first convert to <code>mpz_class</code> and then use the <a href=\"https://gmplib.org/manual/C_002b_002b-Interface-Integers.html#C_002b_002b-Interface-Integers\" rel=\"nofollow noreferrer\"><code>get_si</code></a> method to convert the <code>mpz_class</code> to <code>long</code>.</p>\n\n<pre><code>digit_sum += mpz_class{bignum % 10}.get_si();\n</code></pre>\n\n<p>Note that in general, you need to make sure that the number actually fits into <code>long</code> before calling <code>get_si</code>.  In this case, the (absolute) number is always less than 10, so it is safe to call <code>get_si</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 5509038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0482b9f116522561b3af7927b2f74151?s=128&d=identicon&r=PG&f=1", "display_name": "Nasst", "link": "https://stackoverflow.com/users/5509038/nasst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 57193208, "answer_count": 1, "score": 1, "last_activity_date": 1564021988, "creation_date": 1564010347, "question_id": 57192415, "link": "https://stackoverflow.com/questions/57192415/casting-an-mpz-class-temporary-to-int", "title": "Casting an mpz_class temporary to int", "body": "<p>As part of my code's logic, I'm assigning the result of an expression involving mpz_class to an int. The problem is, mpz_class overloaded operators don't seem to produce mpz_class objects, but rather, some kind of temporaty object that then gets converted to mpz_class (if I understood <a href=\"https://gmplib.org/manual/C_002b_002b-Interface-Internals.html\" rel=\"nofollow noreferrer\">this</a> correctly). Because of this Is there any way that I can convert the result of bignum % 10 to an int inline?</p>\n\n<pre><code>int digit_sum = 0;\nwhile(bignum &gt; 0) {\n    digit_sum += bignum % 10;\n    bignum /= 10;\n}\n</code></pre>\n"}, {"tags": ["c++", "function-pointers"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 4, "creation_date": 1564009304, "post_id": 57192246, "comment_id": 100893968, "body": "You should be able to (re)produce the issue with less code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 2, "creation_date": 1564010661, "post_id": 57192246, "comment_id": 100894203, "body": "&quot;Where the error comes from: c:\\program files (x86)\\microsoft visual studio\\2017\\community\\vc\\tools\\msvc\\14.16.27023\\include\\xmem&zwnj;&#8203;ory0    line:881&quot; I highly doubt the error it from the standard library with MSVC. It&#39;s got to be in yours somewhere. Please try to narrow it down."}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1564011890, "post_id": 57192246, "comment_id": 100894417, "body": "What both comments above are asking for (I am pretty sure) is a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 93, "user_id": 9722909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bb4b6d9e96c4f5879973331baf24c7d?s=128&d=identicon&r=PG&f=1", "display_name": "deviloper", "link": "https://stackoverflow.com/users/9722909/deviloper"}, "edited": false, "score": 0, "creation_date": 1564045292, "post_id": 57192246, "comment_id": 100904631, "body": "I didn&#39;t mean that it is MSVC&#39;s fault. The error is mine, but that is where the error is pointing to. I just know it&#39;s mine because I tried commenting out this line <code>functions.emplace(&quot;GetValue&quot;, &amp;stringtype::GetValue);</code> in stringtype."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 9722909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bb4b6d9e96c4f5879973331baf24c7d?s=128&d=identicon&r=PG&f=1", "display_name": "deviloper", "link": "https://stackoverflow.com/users/9722909/deviloper"}, "edited": false, "score": 0, "creation_date": 1564045749, "post_id": 57192774, "comment_id": 100904915, "body": "I was thinking that if the user makes a string variable (in my language) he can access the functions by doing <code>stringvar.SomeFunc()</code>. Then c++ will look for &quot;SomeFunc&quot; in the function map of that stringtype instance. Since the variable is stored as a stringtype object. Should I use a lambda or bind() for this purpose?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 93, "user_id": 9722909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bb4b6d9e96c4f5879973331baf24c7d?s=128&d=identicon&r=PG&f=1", "display_name": "deviloper", "link": "https://stackoverflow.com/users/9722909/deviloper"}, "edited": false, "score": 0, "creation_date": 1564068622, "post_id": 57192774, "comment_id": 100917963, "body": "@PhysicalExperience it is largely a matter of personal choice, but there are few situations where <code>bind()</code> is ever preferred over a lambda. See <a href=\"https://stackoverflow.com/questions/1930903/\">Bind vs Lambda?</a> and <a href=\"https://stackoverflow.com/questions/17363003/\">Why use std::bind over lambdas in C++14?</a>."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1564014545, "last_edit_date": 1564014545, "creation_date": 1564014244, "answer_id": 57192774, "question_id": 57192246, "link": "https://stackoverflow.com/questions/57192246/c-vector-of-function-pointers-inside-class/57192774#57192774", "title": "C++ - Vector of function pointers inside class", "body": "<p>In your code, line 62 is this statement:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>functions.emplace(\"GetValue\", &amp;stringtype::GetValue);\n</code></pre>\n\n<p><code>functions</code> is an <code>std::unordered_map</code> whose <code>key_type</code> is <code>std::string</code> and <code>mapped_type</code> is <code>std::function&lt;Object*(std::string*)&gt;</code>.</p>\n\n<p><code>emplace()</code> constructs a new <code>std::unordered_map::value_type</code> in the map, passing the values you specify to the <code>value_type</code>'s constructor.  In this case, that <code>value_type</code> is a <code>std::pair&lt;const std::string, std::function&lt;Object*(std::string*)&gt;&gt;</code>, and you are passing in 2 values to constructor the <code>std::pair</code> with.</p>\n\n<p>The error message you are seeing is basically saying that the compiler can't convert <code>&amp;stringtype::GetValue</code> to <code>std::function&lt;Object*(std::string*)&gt;</code>.  For example, here is a simplified example that reproduces the same failure, and GCC gives a VERY DETAILED error message explaining why it failed (which is too large to post here, so I'll post only the relevant pieces):</p>\n\n<p><a href=\"https://ideone.com/qVLkQd\" rel=\"nofollow noreferrer\">https://ideone.com/qVLkQd</a></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;unordered_map&gt;\n#include &lt;string&gt;\n#include &lt;functional&gt;\n\nstruct Object;\ntypedef std::unordered_map&lt;std::string, std::function&lt;Object*(std::string*)&gt;&gt; stdtypefunc_map;\n\nstruct Object\n{\n\n};\n\nstruct StdType : public Object\n{\n    stdtypefunc_map functions;\n};\n\nstruct stringtype : public StdType\n{\n    stringtype()\n    {\n        functions.emplace(\"GetValue\", &amp;stringtype::GetValue);\n    }\n\n    Object* GetValue(std::string args[])\n    {\n        std::cout &lt;&lt; \"GetValue()\" &lt;&lt; std::endl;\n    }\n};\n\nint main()\n{\n    stringtype s;\n    return 0;\n}\n</code></pre>\n\n<pre>\n/usr/include/c++/6/ext/new_allocator.h:120:4: error: no matching function for call to \u2018std::pair&lt;const std::__cxx11::basic_string&lt;char>, std::function&lt;Object*(std::__cxx11::basic_string&lt;char>*)> >::pair(const char [9], Object* (stringtype::*)(std::__cxx11::basic_string&lt;char>*))\u2019\n  { ::new((void *)__p) _Up(std::forward&lt;_Args>(__args)...); }\n    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n...\n/usr/include/c++/6/ext/new_allocator.h:120:4: note:   cannot convert \u2018std::forward&lt;Object* (stringtype::*)(std::__cxx11::basic_string&lt;char>*)>((* & __args#1))\u2019 (type \u2018Object* (stringtype::*)(std::__cxx11::basic_string&lt;char>*)\u2019) to type \u2018const std::function&lt;Object*(std::__cxx11::basic_string&lt;char>*)>&\u2019\n  { ::new((void *)__p) _Up(std::forward&lt;_Args>(__args)...); }\n    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n...\n</pre>\n\n<p>Which makes sense.  You can't store a pointer-to-member-method for a <em>non-static</em> method into a <code>std::function</code> unless you take into account that it will need an object instance to call the method on.  Such as by using <code>std::bind()</code> to bind an object instance with the pointer-to-member-method:</p>\n\n<pre><code>using std::placeholders::_1;\nfunctions.emplace(\"GetValue\", std::bind(&amp;stringtype::GetValue, this, _1));\n</code></pre>\n\n<p>Or, by using a lambda to capture the object:</p>\n\n<pre><code>functions.emplace(\"GetValue\", [this](std::string *args){ return this-&gt;GetValue(args); });\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 9722909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bb4b6d9e96c4f5879973331baf24c7d?s=128&d=identicon&r=PG&f=1", "display_name": "deviloper", "link": "https://stackoverflow.com/users/9722909/deviloper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 57192774, "answer_count": 1, "score": -1, "last_activity_date": 1564045174, "creation_date": 1564008931, "last_edit_date": 1564045174, "question_id": 57192246, "link": "https://stackoverflow.com/questions/57192246/c-vector-of-function-pointers-inside-class", "title": "C++ - Vector of function pointers inside class", "body": "<p>I am making my own programming language. I made classes (like 'string' or 'int) that derive from the object class. I am making standard types like string and int so I have a base I can work off (expand my language with itself if that makes sense). Each standard type has a unordered_map of functions. I would love to hear a way to fix this/another approach.</p>\n\n<p>When I run the program, I get this error that I don't understand:</p>\n\n<blockquote>\n  <p>C2664: 'std::pair&lt;const _Kty,_Ty>::pair(std::pair&lt;const _Kty,_Ty> &amp;&amp;)': cannot convert argument 2 from '_Ty' to 'const _Ty2 &amp;'</p>\n</blockquote>\n\n<p>It's referring to line 62. Where the error comes from:</p>\n\n<blockquote>\n  <p>c:\\program files (x86)\\microsoft visual studio\\2017\\community\\vc\\tools\\msvc\\14.16.27023\\include\\xmemory0    line:881</p>\n</blockquote>\n\n<p>The code from xmemory0: </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;class _Objty,\n        class... _Types&gt;\n        static void construct(_Alloc&amp;, _Objty * const _Ptr, _Types&amp;&amp;... _Args)\n        {   // construct _Objty(_Types...) at _Ptr\n        ::new (const_cast&lt;void *&gt;(static_cast&lt;const volatile void *&gt;(_Ptr)))\n            _Objty(_STD forward&lt;_Types&gt;(_Args)...);\n        }\n</code></pre>\n\n<p>My code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;unordered_map&gt;\n#include &lt;string&gt;\n#include &lt;functional&gt;\n\nstruct Object;\ntypedef std::unordered_map&lt;std::string, std::function&lt;Object*(std::string*)&gt;&gt; stdtypefunc_map;\n\nstruct Object\n{\n\n};\n\nstruct StdType : public Object\n{\n    stdtypefunc_map functions;\n};\n\nstruct stringtype : public StdType\n{\n    stringtype()\n    {\n        functions.emplace(\"GetValue\", &amp;stringtype::GetValue);\n    }\n\n    Object* GetValue(std::string args[])\n    {\n        std::cout &lt;&lt; \"GetValue()\" &lt;&lt; std::endl;\n    }\n};\n\nint main()\n{\n    stringtype s;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "debugging"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1564007695, "post_id": 57192037, "comment_id": 100893644, "body": "Notice that <a href=\"https://en.cppreference.com/w/cpp/utility/functional/binary_function\" rel=\"nofollow noreferrer\"><code>std::binary_function</code></a> is deprecated in C++11 and removed in C++17."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1564007900, "post_id": 57192037, "comment_id": 100893690, "body": "The most glaring error is <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">using namespace std; in the header file</a>, which no experienced C++ developer would ever do, because it is fertile ground for spawning these kinds of mysterious compilation errors. Without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, it&#39;s impossible to say anything more, except that, unfortunately, it looks like an experienced C++ developer will be needed to figure out what&#39;s broken in with the code."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1564008525, "post_id": 57192037, "comment_id": 100893809, "body": "Wonder if the reported error is not due to the latter error <code>const ref(Cdu) &amp; p</code> which should be <code>const ref&lt;Cdu&gt; &amp; p</code>."}, {"owner": {"reputation": 168, "user_id": 9328845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8685dd531c745fb0cb9b04df5c5f766d?s=128&d=identicon&r=PG&f=1", "display_name": "Keshinko", "link": "https://stackoverflow.com/users/9328845/keshinko"}, "edited": false, "score": 0, "creation_date": 1564059397, "post_id": 57192037, "comment_id": 100912528, "body": "Replacing <code>using namespace std</code> with <code>std::...</code> got rid of those errors! But given the next round of errors it looks like I have my work cut out for me to get this to compile :) Thank you for the help! If you put it as a full answer I can accept it, but I&#39;m curious as to why making this change would relate to the &quot;wrong number of template arguments&quot; error."}], "answers": [{"tags": [], "owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "is_accepted": false, "score": 1, "last_activity_date": 1564007633, "creation_date": 1564007633, "answer_id": 57192084, "question_id": 57192037, "link": "https://stackoverflow.com/questions/57192037/usage-of-ref-in-template-arguments/57192084#57192084", "title": "Usage of ref&lt;&gt; in template arguments?", "body": "<p>In this function here, the syntax is wrong where you use <code>ref(Cdu)</code>. Use the angle braces, not parenthesis.</p>\n\n<pre><code>    inline bool operator()(const ref(Cdu) &amp; p, const ref(Cdu) &amp; q) const\n    {\n        // TODO: handle the 0-pointer in some way\n        return *p &lt; *q;\n    } // operator()\n</code></pre>\n\n<p><strong>Corrected version:</strong></p>\n\n<pre><code>    inline bool operator()(const ref&lt;Cdu&gt; &amp; p, const ref&lt;Cdu&gt; &amp; q) const\n    {\n        // TODO: handle the 0-pointer in some way\n        return *p &lt; *q;\n    } // operator()\n</code></pre>\n"}], "owner": {"reputation": 168, "user_id": 9328845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8685dd531c745fb0cb9b04df5c5f766d?s=128&d=identicon&r=PG&f=1", "display_name": "Keshinko", "link": "https://stackoverflow.com/users/9328845/keshinko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564007633, "creation_date": 1564007244, "question_id": 57192037, "link": "https://stackoverflow.com/questions/57192037/usage-of-ref-in-template-arguments", "title": "Usage of ref&lt;&gt; in template arguments?", "body": "<p>I'm trying to compile someone else's c++ code to do MAFIA clustering. I have limited c++ experience. I'm running into issues when using the makefile.</p>\n\n<p>It looks like its an issue with the number of arguments being passed to <code>binary_function</code>, but it appears to me that 3 arguments are being passed (and 3 arguments are expected). The number of brackets and parens also look correct. Is there something special about using ref&lt;> in this context? I'm not quite sure why the 3 arguments are being seen as one.</p>\n\n<pre><code>#ifndef MAFIA_CDU_H_\n#define MAFIA_CDU_H_\n\n/** @file cdu.h a single (candidate) dense unit in MAFIA algorithm */\n\n#include &lt;functional&gt;\n#include &lt;vector&gt;\n\n#include \"ref.h\"\n#include \"window.h\"\n\nusing namespace std;\n\n/** a coordinate of a single window for a single dimension */\nstruct dimpair_t\n{\n    dimpair_t(int dim, int win)\n    {\n        this-&gt;dim = dim;\n        this-&gt;win = win;\n    }\n    bool operator==(const dimpair_t &amp;dp2) const\n    {\n        return dim == dp2.dim &amp;&amp; win == dp2.win;\n    }\n    bool operator!=(const dimpair_t &amp;dp2) const\n    {\n        return !(*this == dp2);\n    }\n    /** the dimension number */\n    int dim;\n    /** the number of window inside a dimension */\n    int win;\n};\n\n/** a single (candidate) dense unit */\nclass Cdu : public ref_object\n{\n    /** creates an empty CDU */\n    Cdu() : npoints(0), flag(false) {}\n\npublic:\n    /** creates a 1D CDU */\n    Cdu(int dim, int win) : npoints(0), flag(false)\n    {\n        coords.push_back(dimpair_t(dim, win));\n    }\n    /** the dimensionality (length) of the CDU */\n    inline int len() const { return coords.size(); }\n    /** checks whether the CDU is the same as another one */\n    bool operator==(const Cdu &amp;cdu2) const;\n    /** checks whether the CDU is distinct from another one */\n    bool operator!=(const Cdu &amp;cdu2) const { return !(*this == cdu2); }\n    /** checks whether this CDU is 'less' than the other one. The less comparison\n            is somewhat artificial, but ensures strict order on the set of all\n            possible CDUs.\n            CDU a is less than CDU b iff one of the following holds:\n            - dimensionality of a is less than dimensionality of b\n            - a and b are of the same dimensionality, but the vector of dimension\n            numbers for a is lexicographically smaller than the vector of dimension\n            numbers for b\n            - a and b are of the same dimensionality, and their dimension number\n            vectors are equal, but the corresponding window number vector for a is smaller\n    */\n    bool operator&lt;(const Cdu &amp;cdu2) const;\n    /** gets the subsequence of the CDU by omitting one of the components \n            @param ic the component to omit\n            @remarks the caller is responsible for deallocation of the returned value\n     */\n    Cdu *subsequence(int ic) const;\n    /** checks whether the CDU can merge with another one */\n    bool can_merge_with(const Cdu &amp;cdu2);\n    /** merge two units and create a third one; the new CDU is\n      allocated in dynamic memory and is owned by the caller */\n    Cdu *merge_with(const Cdu &amp;cdu2);\n    /** checks whether this unit is assimilated into another one, i.e. its set of\n            coordinates is a subset of cdu2's set of coordinates */\n    bool is_assimilated_into(const Cdu &amp;cdu2) const;\n    /** checks whether the CDU contains the point */\n    template &lt;class T&gt;\n    bool contains_point(const T *ps, int n, int d, int i, const vector&lt;Window&gt; &amp;ws) const;\n    /** counts the points inside the CDU (the naive way), also sets the point count */\n    template &lt;class T&gt;\n    int count_points_direct(const T *ps, int n, int d, const vector&lt;Window&gt; &amp;ws);\n    /** conts the points inside the CDU using bitmaps from windows, and also sets\n            the point count */\n    int count_points_bitmaps(int nwords, unsigned *bmps, const vector&lt;Window&gt; &amp;ws);\n    /** checks whether CDU is dense with respect to window thresholds */\n    bool is_dense(const vector&lt;Window&gt; &amp;ws) const;\n    /** checks whether this DU shares a face with another one; \n            @notes it returns false if two DUs are the same\n     */\n    bool has_common_face_with(const Cdu &amp;cdu2, const vector&lt;Window&gt; &amp;ws) const;\n    /** the coordinates of the dense unit, sorted by ascending dimension\n      number */\n    vector&lt;dimpair_t&gt; coords;\n    /** number of points in the CDU */\n    int npoints;\n    /** the flag which is used for various purposes connected with CDUs; in\n            particular, it can mark it as joined or already visited */\n    bool flag;\n};\n\n/** the comparator for ref&lt;Cdu&gt;, so that we can put it into a set */\nstruct CduCmp : binary_function&lt;ref&lt;Cdu&gt;, ref&lt;Cdu&gt;, bool&gt;\n{\n    inline bool operator()(const ref(Cdu) &amp; p, const ref(Cdu) &amp; q) const\n    {\n        // TODO: handle the 0-pointer in some way\n        return *p &lt; *q;\n    } // operator()\n};    // CduCmp\n\n#endif\n</code></pre>\n\n<p>Here is the error I am seeing.</p>\n\n<pre><code>In file included from src/cdu.cpp:7:0:\nsrc/cdu.h:105:57: error: wrong number of template arguments (1, should be 3)\n struct CduCmp : binary_function&lt;ref&lt;Cdu&gt;, ref&lt;Cdu&gt;, bool&gt;\n                                                         ^\nIn file included from /usr/include/c++/7/functional:49:0,\n                 from src/cdu.h:6,\n                 from src/cdu.cpp:7:\n/usr/include/c++/7/bits/stl_function.h:118:12: note: provided for \u2018template&lt;clas                                                                                                                                                                                               s _Arg1, class _Arg2, class _Result&gt; struct std::binary_function\u2019\n     struct binary_function\n            ^~~~~~~~~~~~~~~\nIn file included from src/cdu.cpp:7:0:\nsrc/cdu.h:107:43: error: ISO C++ forbids declaration of \u2018ref\u2019 with no type [-fpe                                                                                                                                                                                               rmissive]\n     inline bool operator()(const ref(Cdu) &amp; p, const ref(Cdu) &amp; q) const\n                                           ^\nsrc/cdu.h:107:45: error: expected \u2018,\u2019 or \u2018...\u2019 before \u2018p\u2019\n     inline bool operator()(const ref(Cdu) &amp; p, const ref(Cdu) &amp; q) const\n                                             ^\nsrc/cdu.h: In member function \u2018bool CduCmp::operator()(const int (*)(Cdu)) cons                                                                                                                                                                                                \u2019:\nsrc/cdu.h:110:17: error: \u2018p\u2019 was not declared in this scope\n         return *p &lt; *q;\n                 ^\nsrc/cdu.h:110:22: error: \u2018q\u2019 was not declared in this scope\n         return *p &lt; *q;\n                      ^\nIn file included from src/mafia-solver.cpp:1:0:\nsrc/cdu.h:105:57: error: wrong number of template arguments (1, should be 3)\n struct CduCmp : binary_function&lt;ref&lt;Cdu&gt;, ref&lt;Cdu&gt;, bool&gt;\n                                                         ^\nIn file included from /usr/include/c++/7/functional:49:0,\n                 from src/cdu.h:6,\n                 from src/mafia-solver.cpp:1:\n/usr/include/c++/7/bits/stl_function.h:118:12: note: provided for \u2018template&lt;clas                                                                                                                                                                                               s _Arg1, class _Arg2, class _Result&gt; struct std::binary_function\u2019\n     struct binary_function\n            ^~~~~~~~~~~~~~~\nIn file included from src/mafia-solver.cpp:1:0:\nsrc/cdu.h:107:43: error: ISO C++ forbids declaration of \u2018ref\u2019 with no type [-fpe                                                                                                                                                                                               rmissive]\n     inline bool operator()(const ref(Cdu) &amp; p, const ref(Cdu) &amp; q) const\n                                           ^\nsrc/cdu.h:107:45: error: expected \u2018,\u2019 or \u2018...\u2019 before \u2018p\u2019\n     inline bool operator()(const ref(Cdu) &amp; p, const ref(Cdu) &amp; q) const\n                                             ^\nsrc/cdu.h: In member function \u2018bool CduCmp::operator()(const int (*)(Cdu)) cons                                                                                                                                                                                                \u2019:\nsrc/cdu.h:110:17: error: \u2018p\u2019 was not declared in this scope\n         return *p &lt; *q;\n                 ^\nsrc/cdu.h:110:22: error: \u2018q\u2019 was not declared in this scope\n         return *p &lt; *q;\n                      ^\n</code></pre>\n"}, {"tags": ["c++", "matlab"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 7, "creation_date": 1564005627, "post_id": 57191753, "comment_id": 100893075, "body": "A) Compile with optimizations. B) Use references instead of copy-by-value."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 2, "creation_date": 1564005723, "post_id": 57191753, "comment_id": 100893105, "body": "Don&#39;t use <code>volume.at(i).at(j).at(k)</code> use <code>volume[i][j][k]</code>."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 3, "creation_date": 1564006077, "post_id": 57191753, "comment_id": 100893191, "body": "Most of Matlab&#39;s functions are written in C++ for performance reasons. They are tight and often use multiple threads where available. So no surprise they do this faster. BTW, vectors of vectors are a particularly inefficient design approach."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1564007153, "post_id": 57191753, "comment_id": 100893490, "body": "I&#39;d be interested in hearing how much more performance you are able to get out of C++ over Matlab."}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 1, "creation_date": 1564007713, "post_id": 57191753, "comment_id": 100893653, "body": "MATLAB doesn&#39;t copy data when reshaping. Why do you need to copy data in C++? Do the same thing as MATLAB: store your 3D array as a simple <code>std::vector&lt;int&gt;</code>, and compute linear index from 3D coordinates: <code>i + j*width + k*width*height</code>."}, {"owner": {"reputation": 31, "user_id": 11832406, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/30FEF.jpg?s=128&g=1", "display_name": "4Light", "link": "https://stackoverflow.com/users/11832406/4light"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564071124, "post_id": 57191753, "comment_id": 100919239, "body": "Thank you all.  @tadman   A) I do not know about compiling with optimization I will start reading, any links would be great.  B) I tried this <code>volume[i][j][k] = (int)vptr-&gt;at(n);</code> , but did not cause any difference.  @Galik  used it.  @doug I know that Matlab functions are professionally written, but the only reason I am transferring to C++ is to get better performance, especially because I will deal with huge data sizes. @Eljay actually right now Matlab is 7x faster than C++ :( ."}, {"owner": {"reputation": 31, "user_id": 11832406, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/30FEF.jpg?s=128&g=1", "display_name": "4Light", "link": "https://stackoverflow.com/users/11832406/4light"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1564071674, "post_id": 57191753, "comment_id": 100919509, "body": "@CrisLuengo  usually the 3D matrix is required for the next function,  I am not sure yet in C++ , but if not , this will save a lot of time."}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 3, "creation_date": 1564071880, "post_id": 57191753, "comment_id": 100919607, "body": "If you&#39;re using a function that expects a <code>vector&lt;vector&lt;vector&lt;&gt;&gt;&gt;</code> as input, you need to either rewrite that function or look for a better library. A 3D array should be implemented as a <code>vector&lt;&gt;</code>. This is the way MATLAB does it, and it&#39;s the way all good software does it. The only reason to use a <code>vector&lt;vector&lt;&gt;&gt;</code> is if each inner vector is of different length. If they&#39;re all the same length, as in a 3D array, you should definitely not spread it around the memory space and add all these levels of indirection. That&#39;s just bad."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1564072560, "post_id": 57191753, "comment_id": 100919860, "body": "Read up on how your compiler enables optimization and what the optimization levels do. For GCC-style compilers it&#39;s often <code>-O3</code> as a flag, but there are many more options. Debug builds are often <i>considerably</i> slower than optimized ones. The difference can be dramatic."}, {"owner": {"reputation": 8288, "user_id": 254252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d86d93abcc56d7b5843cc1ce58bbfd6?s=128&d=identicon&r=PG", "display_name": "Christopher Creutzig", "link": "https://stackoverflow.com/users/254252/christopher-creutzig"}, "edited": false, "score": 0, "creation_date": 1564139628, "post_id": 57191753, "comment_id": 100942024, "body": "If you are trying to improve performance, seriously consider not using iostreams. The lower-level C file I/O is still there and used by many, for a good reason."}, {"owner": {"reputation": 31, "user_id": 11832406, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/30FEF.jpg?s=128&g=1", "display_name": "4Light", "link": "https://stackoverflow.com/users/11832406/4light"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1564334153, "post_id": 57191753, "comment_id": 100987206, "body": "I am sorry for the late reply. @tadman A) The vector is a member of a class, and member functions are using it, maybe that is why there is no difference when I used copy-by-value and copy-by-reference. B) WoW this is magic, I do not know how this works or what does it indicate but the difference when I used compiling with optimization is unbelievable. For data that will be reshaped in 571*537*501 3D matrix: - Default compiling :  time elapsed ~= 137 sec. - compiling with optimization: time elapsed ~= 1 sec.  What is this!!!! Thank you tadman."}, {"owner": {"reputation": 31, "user_id": 11832406, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/30FEF.jpg?s=128&g=1", "display_name": "4Light", "link": "https://stackoverflow.com/users/11832406/4light"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1564334512, "post_id": 57191753, "comment_id": 100987293, "body": "@CrisLuengo  The 3D matrix data will be used in a marching cubes algorithm to extract surfaces, in Matlab this function requires a 3D matrix, but yes I think you are right the functions may be operating on vectors behind the scene, I will check."}, {"owner": {"reputation": 31, "user_id": 11832406, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/30FEF.jpg?s=128&g=1", "display_name": "4Light", "link": "https://stackoverflow.com/users/11832406/4light"}, "reply_to_user": {"reputation": 8288, "user_id": 254252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d86d93abcc56d7b5843cc1ce58bbfd6?s=128&d=identicon&r=PG", "display_name": "Christopher Creutzig", "link": "https://stackoverflow.com/users/254252/christopher-creutzig"}, "edited": false, "score": 0, "creation_date": 1564334775, "post_id": 57191753, "comment_id": 100987350, "body": "@ChristopherCreutzig| I am not sure, but I noticed that to load the data using iostreams is fast enough, my problem was to read numeric data from a string into a vector of integers (code#3)."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564431111, "post_id": 57191753, "comment_id": 101020738, "body": "Debug builds are often vastly slower than fully optimized builds. Benchmarking a debug build is basically pointless. Only the optimized code matters."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1572401993, "post_id": 57191753, "comment_id": 103544967, "body": "there&#39;s a reason they&#39;re called &quot;optimization&quot;. Production code should never be built in debug mode because there are lots of things added to help debugging (like address sanitizer, heap overflow or stack smashing detection) beside unoptimized code. When the compiler optimizes the code it does tons of things like loop unrolling, loop reversing, auto-vectorizing, branch reorganizing, deadcode/unused variables removing... that makes a vast difference. See <a href=\"https://en.wikipedia.org/wiki/Optimizing_compiler\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Optimizing_compiler</a>"}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1572402600, "post_id": 57191753, "comment_id": 103545083, "body": "@4Light: \u201ccompiling with optimization\u201d (as in, any at all) is not a topic for which you should ask for \u201cany links\u201d\u2014it is a basic and fundamental feature of almost all compilers and something you can find out about faster than you can ask us (let alone waiting for us to answer)."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1572402793, "post_id": 57191753, "comment_id": 103545116, "body": "I&#39;m voting to close this question as off-topic because the underlying problem is not related to the content of the question."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1572402846, "post_id": 57191753, "comment_id": 103545123, "body": "Reading the whole file into a string is probably not a good idea either (not that <code>istream</code> is known for being very fast)."}], "owner": {"reputation": 31, "user_id": 11832406, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/30FEF.jpg?s=128&g=1", "display_name": "4Light", "link": "https://stackoverflow.com/users/11832406/4light"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1572401569, "creation_date": 1564005331, "last_edit_date": 1572401569, "question_id": 57191753, "link": "https://stackoverflow.com/questions/57191753/can-not-make-c-code-faster-than-matlab-code-for-reading-and-parsing-ascii-file", "title": "Can not make C++ code faster than Matlab code for reading and parsing Ascii file data", "body": "<p>I am transforming my Matlab code to C++ code for faster performance and larger data analysis. For just reading the input data file and reformatting it, Matlab is still way faster. </p>\n\n<p>The first step of my program is to read an ASCII input data file and then reshape the data into a 3D matrix. In Matlab, I use \"importdata\" built-in function for reading data and \"reshape\" built-in function to reformat the numeric data into 3D matrix. In C++, for reading data (and after many days of search) I am using two methods for reading the whole file into a string from an input file stream as shown below (code#1 and code#2), this is fast enough\n(the second method is better than the first one),but the slow performance comes when I try to extract numeric data from the file string as integers (code#3). For reshaping the data into 3D matrix, I simply used 3 loops as shown in (code#4) which is also very slow compared to Matlab \"reshape\"\nfunction. I tried to replace the ASCII file with a binary one which is read very fast by C++ \"file.read\" (code#5) but the reshaping part is causing the overall performance to be slow.</p>\n\n<p>So my questions are:</p>\n\n<ul>\n<li>Is there a faster way to get the numeric data from the ASCII file?</li>\n<li>Is there a faster way to reshape a vector of integers into 3D matrix?</li>\n</ul>\n\n<p>I have been searching in these problems for a while (Prefer not to say how long :D) and any help is appreciated.</p>\n\n<h1>Variables declaration</h1>\n\n<pre><code>stringstream buffer;\nifstream inFile;\nstring fileString;\nint temp1;\nstring temp2;\nvector&lt;int&gt; vec (n,0); // n is determined from the input data size\nvector&lt;vector&lt;vector&lt;int&gt;&gt;&gt; volume;\nint D1,D2,D3;    // 3D matrix dimensions determined from user input.\n</code></pre>\n\n<ul>\n<li><p>Code#1 :  (Read ASCII into string 1)</p>\n\n<pre><code>buffer &lt;&lt; inFile.rdbuf();\nfileString = buffer.str();\n</code></pre></li>\n<li><p>Code#2 : (Read ASCII into string 2)</p>\n\n<pre><code>inFile.seekg(0, ios::end);\nfileString.resize((int)inFile.tellg());\ninFile.seekg(0, ios::beg);\ninFile.read(&amp;fileString[0], fileString.size());\ninFile.close();\nbuffer &lt;&lt; fileString;\n</code></pre></li>\n<li><p>Code#3 : (Get numeric data from string into a vector of integers)</p>\n\n<pre><code>for(int i = 0;i &lt;n ;++i){\nbuffer &gt;&gt; temp2; \nif(stringstream(temp2) &gt;&gt; temp1)\nvec.at(i) = temp1;\n}\n</code></pre></li>\n<li><p>Code#4 : (Rehape vector into 3D matrix)</p>\n\n<pre><code>volume.resize(D1, vector&lt;vector&lt;int&gt; &gt;(D2, vector&lt;int&gt;(D3)));\nint n = ;\n    for (int i = 0; i &lt; D1; ++i) {\n        for (int j = 0; j &lt; D2; ++j) {\n            for (int k = 0; k &lt; D3; ++k) {\n                 volume.at(i).at(j).at(k)= (int)vec.at(n);\n                ++n;\n            }\n        }\n    }\n</code></pre></li>\n<li><p>Code#5 : (Read binary file into vector of unsigned integers 8 bits)</p>\n\n<pre><code>inFile.seekg(0, ios_base::end);\nsize_t siz = inFile.tellg();\ninFile.seekg(0, ios_base::beg);\nvec.resize(siz / sizeof(uint8_t));\ninFile.read((char*)&amp;vec[0], siz);\ninFile.close();\n</code></pre></li>\n</ul>\n"}, {"tags": ["c++", "linux", "multithreading", "emscripten", "webassembly"], "comments": [{"owner": {"reputation": 132, "user_id": 5907621, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZA2O7w518Xg/AAAAAAAAAAI/AAAAAAAAALo/MLXwg7UxqlQ/photo.jpg?sz=128", "display_name": "Hiisi T", "link": "https://stackoverflow.com/users/5907621/hiisi-t"}, "reply_to_user": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 1, "creation_date": 1564008783, "post_id": 57191745, "comment_id": 100893861, "body": "@freakish thank you so much! Would you please answer the question rather than commenting on it? So that I could choose your answer and close it."}], "answers": [{"tags": [], "owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "is_accepted": true, "score": 1, "last_activity_date": 1564137241, "creation_date": 1564137241, "answer_id": 57218229, "question_id": 57191745, "link": "https://stackoverflow.com/questions/57191745/webassembly-and-get-nprocs/57218229#57218229", "title": "webassembly and get_nprocs()", "body": "<p>It seems that sysinfo is still not implemented: <a href=\"https://github.com/emscripten-core/emscripten/issues/8038\" rel=\"nofollow noreferrer\">https://github.com/emscripten-core/emscripten/issues/8038</a> The number of cores can be retrieved from JS though: <a href=\"https://stackoverflow.com/questions/3289465/get-number-of-cpu-cores-in-javascript\">Get number of CPU cores in JavaScript?</a></p>\n"}], "owner": {"reputation": 132, "user_id": 5907621, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZA2O7w518Xg/AAAAAAAAAAI/AAAAAAAAALo/MLXwg7UxqlQ/photo.jpg?sz=128", "display_name": "Hiisi T", "link": "https://stackoverflow.com/users/5907621/hiisi-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 57218229, "answer_count": 1, "score": 1, "last_activity_date": 1564137241, "creation_date": 1564005284, "question_id": 57191745, "link": "https://stackoverflow.com/questions/57191745/webassembly-and-get-nprocs", "title": "webassembly and get_nprocs()", "body": "<p>Consider the following example (from get_nprocs man page):</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/sysinfo.h&gt;\n\nint main(int argc, char *argv[])\n{\n    printf(\"This system has %d processors configured and \"\n            \"%d processors available.\\n\",\n            get_nprocs_conf(), get_nprocs());\n    exit(EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>It compiles&amp;runs using g++. However when compiling with emscripten em++ I get the following error:</p>\n\n<pre><code>em++ nproc.cpp -o nproc.html\nerror: undefined symbol: get_nprocs\nwarning: To disable errors for undefined symbols use `-s ERROR_ON_UNDEFINED_SYMBOLS=0`\nerror: undefined symbol: get_nprocs_conf\nError: Aborting compilation due to previous errors\nshared:ERROR: '/home/hiisi/workspace/emsdk/node/8.9.1_64bit/bin/node /home/hiisi/workspace/emsdk/fastcomp/emscripten/src/compiler.js /tmp/tmp2SSe0B.txt /home/hiisi/workspace/emsdk/fastcomp/emscripten/src/library_pthread_stub.js' failed (1)\n</code></pre>\n\n<p>How do I use <code>get_nprocs()</code> with webassembly?</p>\n"}, {"tags": ["c++", "pointers", "templates", "specialization"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1564005509, "post_id": 57191687, "comment_id": 100893037, "body": "In C++17, you can get rid of one overload altogether and just have <code>Func(T)</code> that uses <code>if constexpr</code> with <code>std::is_pointer</code> to test if <code>T</code> is a pointer or not, eg: <code>template &lt;typename T&gt; void Func(T param) { if constexpr (std::is_pointer_v&lt;T&gt;) { printf(&quot;pointer &quot;); Func(*p); } else { printf(&quot;type&quot;); }</code>  See <a href=\"https://blog.tartanllama.xyz/if-constexpr/\" rel=\"nofollow noreferrer\">Simplifying templates and #ifdefs with if constexpr</a>, which has examples similar to yours."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1564007160, "post_id": 57191687, "comment_id": 100893495, "body": "Notice that it is overload, not specialization."}], "answers": [{"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1564005639, "post_id": 57191756, "comment_id": 100893077, "body": "To the OP. Even with this, you can&#39;t use <code>int*** a; Func(a);</code> You have to initialize <code>a</code> to be valid pointer. Otherwise, <code>Func(*p)</code> will cause undefined behavior."}, {"owner": {"reputation": 57, "user_id": 2448343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9862f2966bfdea2e14c7745aeea58cb?s=128&d=identicon&r=PG", "display_name": "Grouflon", "link": "https://stackoverflow.com/users/2448343/grouflon"}, "edited": false, "score": 0, "creation_date": 1564334423, "post_id": 57191756, "comment_id": 100987269, "body": "I hadn&#39;t thought about the importance of declaration order. It&#39;s a little bit counter intuitive but I believe it makes sense, thanks a lot !"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 7, "last_activity_date": 1564005346, "creation_date": 1564005346, "answer_id": 57191756, "question_id": 57191687, "link": "https://stackoverflow.com/questions/57191687/is-there-a-way-to-specialize-a-templated-function-to-discriminate-when-the-type/57191756#57191756", "title": "Is there a way to specialize a templated function to discriminate when the type of an argument is a pointer from when it is not?", "body": "<p>You just need to swap the functions around.  In <code>template &lt;typename T&gt; void Func(T* p)</code> when you do <code>Func(*p);</code> all the compiler knows about is <code>template &lt;typename T&gt; void Func(T* p)</code>.  So you wind up calling the same function recursively until it errors when you no longer have a pointer.  If you use</p>\n\n<pre><code>template &lt;typename T&gt; void Func(T)\n{\n  printf(\"type\");\n}\n\ntemplate &lt;typename T&gt; void Func(T* p)\n{\n  printf(\"pointer \");\n  Func(*p);\n}\n</code></pre>\n\n<p>then when you call <code>Func(*p);</code> the compiler knows about <code>template &lt;typename T&gt; void Func(T)</code> and will call when you no longer have a pointer giving you</p>\n\n<pre><code>pointer pointer pointer type\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 2448343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9862f2966bfdea2e14c7745aeea58cb?s=128&d=identicon&r=PG", "display_name": "Grouflon", "link": "https://stackoverflow.com/users/2448343/grouflon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 1, "accepted_answer_id": 57191756, "answer_count": 1, "score": 2, "last_activity_date": 1564333963, "creation_date": 1564004925, "last_edit_date": 1564333963, "question_id": 57191687, "link": "https://stackoverflow.com/questions/57191687/is-there-a-way-to-specialize-a-templated-function-to-discriminate-when-the-type", "title": "Is there a way to specialize a templated function to discriminate when the type of an argument is a pointer from when it is not?", "body": "<p>Let's consider those templated functions</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename T&gt; void Func(T* p)\n{\n  printf(\"pointer \");\n  Func(*p);\n}\n\ntemplate &lt;typename T&gt; void Func(T)\n{\n  printf(\"type\");\n}\n</code></pre>\n\n<p>I want to write them so that if I give an arguments with several pointers type to it, the function specialized with the pointer type is recursively called to the point where there is no pointer anymore and finally the function without pointer is called.\nTypically, if I write</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int a;\nint* a2 = &amp;a;\nint** a3 = &amp;a2;\nint*** a4 = &amp;a3;\nFunc(a4);\n</code></pre>\n\n<p>I want the output to write</p>\n\n<pre><code>pointer pointer pointer type\n</code></pre>\n\n<p>Unfortunately if I write it that way, all that I ever get is the call to the non-pointer function.</p>\n\n<p>Is there any way to achieve that ?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 3, "creation_date": 1564003210, "post_id": 57191376, "comment_id": 100892370, "body": "<code>&amp;a</code> is the address of the <code>A*</code> pointer you&#39;ve made to point to an <code>A</code>. If you wanted the address of the <code>A</code> you&#39;re pointing to, you&#39;d just do <code>std::cout &lt;&lt; a</code>."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1564003235, "post_id": 57191376, "comment_id": 100892379, "body": "You&#39;ve only created three objects and all of them &#39;live&#39; in main. Everything else is pointers. If you want to create an object that lives inside another one don&#39;t use pointers."}], "answers": [{"tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": true, "score": 2, "last_activity_date": 1564003630, "last_edit_date": 1592644375, "creation_date": 1564003328, "answer_id": 57191429, "question_id": 57191376, "link": "https://stackoverflow.com/questions/57191376/is-there-a-way-to-inject-an-object-to-a-struct-to-another-object/57191429#57191429", "title": "Is there a way to inject an object to a struct to another object?", "body": "<h3>Let's walk through your outputs one by one...</h3>\n<pre><code>std::cout &lt;&lt; &quot;a in A = &quot; &lt;&lt; &amp;a &lt;&lt; &quot;\\n&quot;;\n</code></pre>\n<p><code>&amp;a</code> is the address of the <code>A*</code> pointer you've made to point to an <code>A</code>. If you wanted the address of the <code>A</code> you're pointing to, you'd just do <code>std::cout &lt;&lt; a</code>.</p>\n<pre><code>std::cout &lt;&lt; &quot;a in S = &quot; &lt;&lt; &amp;s-&gt;a &lt;&lt; &quot;\\n&quot;;\n</code></pre>\n<p><code>s-&gt;a</code> gets us a pointer to an <code>A</code>, or the address of an <code>A</code>. Getting the address of that pointer is going a step backwards. Just <code>s-&gt;a</code> is enough here.</p>\n<pre><code>std::cout &lt;&lt; &quot;a in B = &quot; &lt;&lt; b.get_s() &lt;&lt; &quot;\\n&quot;;\n</code></pre>\n<p><code>b.get_s()</code> is going to give you the address of your <code>S*</code> member. You probably wanted <code>b.get_s()-&gt;a</code>.</p>\n<h3>Altogether, your outputs should look like:</h3>\n<pre><code>  std::cout &lt;&lt; &quot;a in A = &quot; &lt;&lt; a &lt;&lt; &quot;\\n&quot;;\n  std::cout &lt;&lt; &quot;a in S = &quot; &lt;&lt; &amp;s-&gt;a &lt;&lt; &quot;\\n&quot;; \n  std::cout &lt;&lt; &quot;a in B = &quot; &lt;&lt; b.get_s()-&gt;a &lt;&lt; &quot;\\n&quot;;\n</code></pre>\n<p>This gives the following for me on <a href=\"https://ideone.com/zfU1gP\" rel=\"nofollow noreferrer\">ideone</a>:</p>\n<pre><code>a in A = 0x5638893cac20\na in S = 0x5638893cac20\na in B = 0x5638893cac20\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "is_accepted": false, "score": 0, "last_activity_date": 1564070317, "creation_date": 1564070317, "answer_id": 57206057, "question_id": 57191376, "link": "https://stackoverflow.com/questions/57191376/is-there-a-way-to-inject-an-object-to-a-struct-to-another-object/57206057#57206057", "title": "Is there a way to inject an object to a struct to another object?", "body": "<p>A pointer is a variable that contains the address of some other memory object. A pointer (not a class such as <code>unique_ptr</code> but rather the pointer type carried over from C such as you are using) is a simple, Plain Old Data type. See <a href=\"https://stackoverflow.com/questions/146452/what-are-pod-types-in-c\">What are POD types in C++?</a> for that topic as well as the various links such as <a href=\"https://stackoverflow.com/questions/4178175/what-are-aggregates-and-pods-and-how-why-are-they-special\">What are Aggregates and PODs and how/why are they special?</a></p>\n\n<p>Once you allocate the memory for some object and assign it to a pointer variable, the address value can be copied to other pointer variables. Doing so means that all of the pointer variables, the original as well as the copies, will have the same value meaning containing the same address.</p>\n\n<p>If you have a <code>struct</code> with such a pointer variable as a member, it works the same way so long as the pointer variable member is not modified in some way. An assignment of a simple <code>struct</code> will just make a copy so the original pointer value just gets copied.</p>\n\n<p>Here is a modified version of your posted source with a few corrections as well as annotations.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass A {\n};\n\nstruct S {\n  A* a_s;        // pointer variable for the address of an A\n  S(A* c) { a_s = c; }   // constructor takes the value of pointer variable c and assigns it to struct member pointer variable a_s\n};\n\nclass B {\n  public:\n    B(S* s){ s_b = s; }\n    S* get_s() {return s_b;}\n  private:\n    S* s_b;\n};\n\nint main() {\n  A* a = new A();     // construct a new A and assign the address to pointer variable a\n  S* s = new S(a);    // construct a new S and provide it the address of the A constructed\n  B b =  B(s);        // construct a new B and provide it the address of the S constructed\n\n  // at this point we have the following memory objects.\n  //    - an instance of the class A whose address is in a pointer variable \"a\"\n  //    - an instance of the struct S whose address is in a pointer variable s\n  //      . the instance's pointer variable \"a_s\" contains the same value as the local variable \"a\"\n  //    - an instance of the class B which contains a pointer to the struct variable \"s\"\n\n  // so at this point we have five objects in memory, two constructed with new and three local variables:\n  //  - an instance of the class A the address of which is in the local pointer variable \"a\"\n  //  - an instance of the struct S the address of which is in the local pointer variable \"s\"\n  //  - an instance of the class B which is a local variable \"b\" that is \"on the stack\"\n\n  // we also have two copies of the address of the class A object which was created:\n  //  - the local variable \"a\"\n  //  - the struct S member \"a_s\" of the object whose address is in local variable \"s\"\n\n  // we also have two copies of the address of struct S object which was created:\n  //  - the local variable \"s\"\n  //  - the class B member \"b_s\" of the instance in local variable \"b\"\n\n  // since the class B instance in local variable \"b\" has a pointer to the struct S whose\n  // address is in local variable \"s\" then the instance doesn't contain a copy of that\n  // instance of struct S however it does contain a copy of the address that is contained in the\n  // local variable \"s\".\n\n\n  std::cout &lt;&lt; \"a in A = \" &lt;&lt; a &lt;&lt; \"\\n\";         // print the value of the pointer variable \"a\"\n  std::cout &lt;&lt; \"a in S = \" &lt;&lt; s-&gt;a_s &lt;&lt; \"\\n\";      // print the value of the pointer variable \"a_s\" that is a member of the struct S instance \"s\"\n  std::cout &lt;&lt; \"a in B = \" &lt;&lt; b.get_s()-&gt;a_s &lt;&lt; \"\\n\";  // print value of pointer \"a_s\" that is a member of struct S instance whose address is in \"b.s_b\"\n\n  return 0;\n}\n</code></pre>\n\n<p>which has an output of:</p>\n\n<pre><code>a in A = 008322D8\na in S = 008322D8\na in B = 008322D8\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9463639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73ab1dbf53a67a2f91a409374652088b?s=128&d=identicon&r=PG&f=1", "display_name": "FED", "link": "https://stackoverflow.com/users/9463639/fed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 57191429, "answer_count": 2, "score": 1, "last_activity_date": 1564070317, "creation_date": 1564003005, "question_id": 57191376, "link": "https://stackoverflow.com/questions/57191376/is-there-a-way-to-inject-an-object-to-a-struct-to-another-object", "title": "Is there a way to inject an object to a struct to another object?", "body": "<p>I am trying to create an object that lives in a struct and pass that struct to another object while pointing to the same address. Here is a minimal example of what I am trying to do:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass A {\n};\n\nstruct S {\n  A* a;\n  S(A* c) { a = c; }\n};\n\nclass B {\n  public:\n    B(S* s){ s_ = s; }\n    S* get_s() {return s_;}\n  private:\n    S* s_;\n};\n\nint main() {\n  A* a = new A();\n  S* s = new S(a);\n  B b =  B(s);\n\n  std::cout &lt;&lt; \"a in A = \" &lt;&lt; &amp;a &lt;&lt; \"\\n\";\n  std::cout &lt;&lt; \"a in S = \" &lt;&lt; &amp;s-&gt;a &lt;&lt; \"\\n\"; \n  std::cout &lt;&lt; \"a in B = \" &lt;&lt; b.get_s() &lt;&lt; \"\\n\";\n\n  //output:\n  // a in A = 0x7ffe81376918\n  // a in S = 0x2563e90\n  // a in B = 0x2563e90\n}\n</code></pre>\n\n<p>I am expecting for all <code>a</code> to point to the same address.</p>\n"}, {"tags": ["c++", "nested", "viewport", "sdl-2"], "comments": [{"owner": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "edited": false, "score": 0, "creation_date": 1564003322, "post_id": 57191320, "comment_id": 100892423, "body": "Just out of curiosity, I&#39;d try checking <code>mStickmanIcon.data()</code> to see what it&#39;s returning. It could be that the viewport is correct, but the stickman&#39;s points are drawing it way off in the wrong direction. <code>SDL_RenderGetViewport</code> might also be helpful if you think the viewport might be nesting wrong."}, {"owner": {"reputation": 259, "user_id": 4565161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NLs4I.jpg?s=128&g=1", "display_name": "boxcartenant", "link": "https://stackoverflow.com/users/4565161/boxcartenant"}, "reply_to_user": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "edited": false, "score": 0, "creation_date": 1564007703, "post_id": 57191320, "comment_id": 100893646, "body": "@NickReed Thanks Nick. I updated the question with some code and the output. Is that what you meant?"}, {"owner": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "edited": false, "score": 0, "creation_date": 1564007886, "post_id": 57191320, "comment_id": 100893687, "body": "It is. Looks like your viewport is indeed a 16x16 square, but it looks like its x, y coordinates of 247,199 are misplaced at the top left area of the screen. Check and see if the viewport dimensions match where you&#39;re drawing your rect - it looks like it should be on the right side of the screen. Are you attaching to the right object?"}, {"owner": {"reputation": 259, "user_id": 4565161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NLs4I.jpg?s=128&g=1", "display_name": "boxcartenant", "link": "https://stackoverflow.com/users/4565161/boxcartenant"}, "reply_to_user": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "edited": false, "score": 0, "creation_date": 1564008242, "post_id": 57191320, "comment_id": 100893762, "body": "@NickReed Yeah, so 274,199 are relative coordinates inside the &quot;Layers&quot; viewport. The &quot;actorRect&quot; renders in the correct location, but then when I set actorRect as the current viewport and try to render the stickman in it, it acts like actorRect isn&#39;t nested, and it renders the stickman relative to the window."}, {"owner": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "edited": false, "score": 0, "creation_date": 1564008942, "post_id": 57191320, "comment_id": 100893889, "body": "I believe that&#39;s the problem - nesting viewports might not be supported in that way. You&#39;d likely want to set your viewports on absolute coordinates instead of relative ones - maybe get the coordinates of your current viewport before you change it, and then add those coordinates to the new viewport position?"}, {"owner": {"reputation": 259, "user_id": 4565161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NLs4I.jpg?s=128&g=1", "display_name": "boxcartenant", "link": "https://stackoverflow.com/users/4565161/boxcartenant"}, "reply_to_user": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "edited": false, "score": 0, "creation_date": 1564009294, "post_id": 57191320, "comment_id": 100893966, "body": "@NickReed Yeah, the more I&#39;m looking into this, the more I&#39;m thinking you&#39;re right about that. SDL2 might just not support that. If you put it in an answer, I&#39;ll pick your answer... unless someone else comes along and says there&#39;s a way to do it ;P"}], "answers": [{"comments": [{"owner": {"reputation": 259, "user_id": 4565161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NLs4I.jpg?s=128&g=1", "display_name": "boxcartenant", "link": "https://stackoverflow.com/users/4565161/boxcartenant"}, "edited": false, "score": 1, "creation_date": 1564012154, "post_id": 57192523, "comment_id": 100894461, "body": "More productive than what I expected! Many thanks, Mr. Reed."}], "tags": [], "owner": {"reputation": 4859, "user_id": 7431860, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/P6Jko.jpg?s=128&g=1", "display_name": "Nick Reed", "link": "https://stackoverflow.com/users/7431860/nick-reed"}, "is_accepted": true, "score": 1, "last_activity_date": 1564011561, "creation_date": 1564011561, "answer_id": 57192523, "question_id": 57191320, "link": "https://stackoverflow.com/questions/57191320/how-can-i-nest-viewports-in-sdl2/57192523#57192523", "title": "How can I nest viewports in SDL2", "body": "<p>Looking through SDL, it doesn't seem like it's easily possible to nest viewports. You're in luck, though - since you've already got an existing viewport, as well as a rectangle you've just drawn, why not use that rectangle's coordinates as the base for your new viewport?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>//vector mStickmanIcon = {/*...a bunch of points...*/};\nSDL_RenderSetViewport(gRenderer, &amp;Layers);\nSDL_SetRenderDrawColor(gRenderer, 200,250,165,255);\nSDL_RenderFillRect(gRenderer, &amp;actorRect);\n\nSDL_Rect actorView;\nactorView.x = Layers.x + actorRect.x;\nactorView.y = Layers.y + actorRect.y;\nactorView.w = actorRect.w;\nactorView.h = actorRect.h;\n\nSDL_RenderSetViewport(gRenderer, &amp;actorView);\nSDL_SetRenderDrawColor(gRenderer, 0,0,0,255);\nSDL_RenderDrawLines(gRenderer, mStickmanIcon.data(), mStickmanIcon.size());\n</code></pre>\n"}], "owner": {"reputation": 259, "user_id": 4565161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NLs4I.jpg?s=128&g=1", "display_name": "boxcartenant", "link": "https://stackoverflow.com/users/4565161/boxcartenant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 57192523, "answer_count": 1, "score": 1, "last_activity_date": 1564011561, "creation_date": 1564002707, "last_edit_date": 1564007630, "question_id": 57191320, "link": "https://stackoverflow.com/questions/57191320/how-can-i-nest-viewports-in-sdl2", "title": "How can I nest viewports in SDL2", "body": "<p>I have a large viewport on the right side of the screen (here \"Layers\"), and I render a rectangle inside that viewport (\"actorRect\"). Then, I set viewport to actorRect and try to SDL_RenderDrawLines a stickman in the rectangle.</p>\n\n<p>The stickman gets rendered way over on the left side of the screen, as if it were using the plain x,y coordinates of the ActorRect.</p>\n\n<p><a href=\"https://i.stack.imgur.com/yxCwp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yxCwp.png\" alt=\"illustration\"></a></p>\n\n<p>In the above picture, I circled my stickman and drew an arrow pointing at actorRect. (actorRect is only green here so I can tell where it is. Later it's gonna be some other color, or like an outline or something, idk yet).</p>\n\n<p>I want that stickman to render inside that rectangle.</p>\n\n<p>Here's a code snippet:</p>\n\n<pre><code>//vector mStickmanIcon = {/*...a bunch of points...*/};\nSDL_RenderSetViewport(gRenderer, &amp;Layers);\nSDL_SetRenderDrawColor(gRenderer, 200,250,165,255);\nSDL_RenderFillRect(gRenderer, &amp;actorRect);\nSDL_RenderSetViewport(gRenderer, &amp;actorRect);\nSDL_SetRenderDrawColor(gRenderer, 0,0,0,255);\nSDL_RenderDrawLines(gRenderer, mStickmanIcon.data(), mStickmanIcon.size());\n</code></pre>\n\n<p>What do you guys think? Any advice? Please limit answers to SDL2. I'm not using OpenGL.</p>\n\n<p>I'm also interested in simple ways to offset vectors of SDL_Point so that I can do away with actorRect altogether, but I figure I'll probably want to nest viewports again later, so that's the question I'm asking.</p>\n\n<p>ETA: I added the following code to find out the locations of those items on screen:</p>\n\n<pre><code>SDL_Rect myRect;\nSDL_RenderGetViewport(gRenderer, &amp;myRect);\nprintf(\"Viewport h,w,x,y: %i,%i,%i,%i\\n\", myRect.h,myRect.w,myRect.x,myRect.y);\nfor(int i = 0; i &lt; mStickmanIcon.size(); i++)\n{\n    printf(\"stickman i,x,y: %i,%i,%i\\n\", i,mStickmanIcon.data()[i].x, mStickmanIcon.data()[i].y);\n}\n</code></pre>\n\n<p>Here's the output:</p>\n\n<pre><code>stickman i,x,y: 0,5,15\nstickman i,x,y: 1,8,12\nstickman i,x,y: 2,11,15\nstickman i,x,y: 3,8,12\nstickman i,x,y: 4,8,9\nstickman i,x,y: 5,5,9\nstickman i,x,y: 6,11,9\nstickman i,x,y: 7,8,9\nstickman i,x,y: 8,8,6\nstickman i,x,y: 9,7,6\nstickman i,x,y: 10,5,4\nstickman i,x,y: 11,5,2\nstickman i,x,y: 12,7,0\nstickman i,x,y: 13,8,0\nstickman i,x,y: 14,11,2\nstickman i,x,y: 15,11,4\nstickman i,x,y: 16,9,6\nViewport h,w,x,y: 16,16,247,119\n</code></pre>\n"}, {"tags": ["c++", "qt", "qt5"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1564002408, "post_id": 57191184, "comment_id": 100892118, "body": "change <code>FileList fileList;</code> to <code>FileList *fileList; = new FileList(this);</code> and change <code>ui-&gt;listView-&gt;setModel(&amp;fileList);</code> to <code>ui-&gt;listView-&gt;setModel(fileList);</code>"}, {"owner": {"reputation": 2933, "user_id": 601182, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/64ebc54e23e49cf1663092f3944bc835?s=128&d=identicon&r=PG", "display_name": "Aftab Naveed", "link": "https://stackoverflow.com/users/601182/aftab-naveed"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1564002753, "post_id": 57191184, "comment_id": 100892236, "body": "It worked now thanks, two things here 1) I was passing it by reference and now passing a pointer what is the difference? 2) Do I now need to delete the fileList manually to clean up the memory?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1564003053, "post_id": 57191184, "comment_id": 100892329, "body": "1) In your initial code and my suggestion you are passing a pointer, the problem is not how you pass the model in sight but the model is a local variable that will be eliminated when the constructor is finished executing. 2) In Qt, QObjects can handle the life cycle of other variables, in this case the parents of a QObject eliminate their children when they are eliminated, with my suggestion CloudSync is the parent of the model (passed as the parent of the model to this ) so it is not necessary to remove it manually since Qt will do it for you."}], "owner": {"reputation": 2933, "user_id": 601182, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/64ebc54e23e49cf1663092f3944bc835?s=128&d=identicon&r=PG", "display_name": "Aftab Naveed", "link": "https://stackoverflow.com/users/601182/aftab-naveed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "closed_date": 1564002514, "answer_count": 0, "score": 0, "last_activity_date": 1564002542, "creation_date": 1564002058, "last_edit_date": 1564002352, "question_id": 57191184, "link": "https://stackoverflow.com/questions/57191184/how-to-display-data-inside-qttableview-from-a-model", "closed_reason": "Duplicate", "title": "How to display data inside QtTableView from a Model", "body": "<p>I am new to Qt5 and trying to create a QTableView widget using QtCreator.  As for as I understand QTableView can be connected to a model via a setModel method and Model must be an instance QtAbstractTableModel</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#ifndef FILELIST_H\n#define FILELIST_H\n#include &lt;QAbstractTableModel&gt;\nnamespace Ui {\n    class FileList;\n}\n\nclass FileList : public QAbstractTableModel\n{\n    Q_OBJECT\npublic:\n    FileList(QObject *parent=nullptr);\n    int rowCount(const QModelIndex &amp;parent = QModelIndex()) const override;\n    int columnCount(const QModelIndex &amp;parent = QModelIndex()) const override;\n    QVariant data(const QModelIndex &amp;index, int role = Qt::DisplayRole) const override;\n\n};\n\n#endif // FILELIST_H\n\n</code></pre>\n\n<p>Here is the Implementation <strong>FileList.cpp</strong></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;QFont&gt;\n#include &lt;QBrush&gt;\n#include &lt;QDebug&gt;\n#include \"FileList.h\"\n\nFileList::FileList(QObject *parent) : QAbstractTableModel(parent)\n{\n    qDebug() &lt;&lt; QString(\"Constructor...\");\n}\n\nint FileList::rowCount(const QModelIndex &amp;parent) const\n{\n    return 2;\n}\n\nint FileList::columnCount(const QModelIndex &amp;parent) const\n{\n    return 3;\n}\n\nQVariant FileList::data(const QModelIndex &amp;index, int role) const\n{\n    int row = index.row();\n        int col = index.column();\n        // generate a log message when this method gets called\n        qDebug() &lt;&lt; QString(\"row %1, col%2, role %3\")\n                .arg(row).arg(col).arg(role);\n\n        switch (role) {\n        case Qt::DisplayRole:\n            if (row == 0 &amp;&amp; col == 1) return QString(\"&lt;--left\");\n            if (row == 1 &amp;&amp; col == 1) return QString(\"right--&gt;\");\n\n            return QString(\"Row%1, Column%2\")\n                    .arg(row + 1)\n                    .arg(col +1);\n        case Qt::FontRole:\n            if (row == 0 &amp;&amp; col == 0) { //change font only for cell(0,0)\n                QFont boldFont;\n                boldFont.setBold(true);\n                return boldFont;\n            }\n            break;\n        case Qt::BackgroundRole:\n            if (row == 1 &amp;&amp; col == 2)  //change background only for cell(1,2)\n                return QBrush(Qt::red);\n            break;\n        case Qt::TextAlignmentRole:\n            if (row == 1 &amp;&amp; col == 1) //change text alignment only for cell(1,1)\n                return Qt::AlignRight + Qt::AlignVCenter;\n            break;\n        case Qt::CheckStateRole:\n            if (row == 1 &amp;&amp; col == 0) //add a checkbox to cell(1,0)\n                return Qt::Checked;\n            break;\n        }\n        return QVariant();\n}\n\n</code></pre>\n\n<p>Now when I attach the QTableView widget to my main window the data does not show up in the table view and I get a blank empty TableView</p>\n\n<p><strong>CloudSync.cpp</strong></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;QDebug&gt;\n#include \"CloudSync.h\"\n#include \"ui_cloudsync.h\"\n#include \"FileList.h\"\n\nCloudSync::CloudSync(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::CloudSync)\n{\n    ui-&gt;setupUi(this);\n    FileList fileList;\n    qDebug() &lt;&lt; QString(\"row %1, col%2, role %3\");\n    ui-&gt;listView-&gt;setModel(&amp;fileList);\n    //ui-&gt;listView-&gt;show();\n    setCentralWidget(ui-&gt;listView);\n\n}\n\nCloudSync::~CloudSync()\n{\n    delete ui;\n}\n\n</code></pre>\n\n<p>and <strong>main.cpp</strong></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"CloudSync.h\"\n#include &lt;QApplication&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    CloudSync w;\n    w.show();\n\n    return a.exec();\n}\n\n</code></pre>\n\n<p>Now what I am doing wrong here? The qDebug inside the ::data method does not output anything into the console which makes me the thing that the model is not properly connected</p>\n\n<p><strong>Final Output</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/djlfO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/djlfO.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564002009, "post_id": 57191137, "comment_id": 100891982, "body": "Is it possible to use C++17? If so the solution is pretty simple."}, {"owner": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564002082, "post_id": 57191137, "comment_id": 100892005, "body": "I would love to see a C++17 solution for my own edification, however my current environment doesn&#39;t allow me to use it."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564002111, "post_id": 57191137, "comment_id": 100892019, "body": "I&#39;ll add it so you can at least see what you can do eventually."}, {"owner": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1564002226, "post_id": 57191137, "comment_id": 100892057, "body": "Thank you! I am not very familiar with C++17 yet, but what I have seen of it is very nice."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1564002436, "post_id": 57191137, "comment_id": 100892127, "body": "Could it be (inline) function instead?"}, {"owner": {"reputation": 6260, "user_id": 10933809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IR53l.jpg?s=128&g=1", "display_name": "Oblivion", "link": "https://stackoverflow.com/users/10933809/oblivion"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1564002795, "post_id": 57191137, "comment_id": 100892249, "body": "@Jarod42 constexpr is inline implicitly"}, {"owner": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1564002919, "post_id": 57191137, "comment_id": 100892290, "body": "@Jarod42 Replace the variables with functions?  I&#39;m worried that might not be the best style either, because in practice they are simply constant values."}], "answers": [{"comments": [{"owner": {"reputation": 6260, "user_id": 10933809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IR53l.jpg?s=128&g=1", "display_name": "Oblivion", "link": "https://stackoverflow.com/users/10933809/oblivion"}, "edited": false, "score": 0, "creation_date": 1564002924, "post_id": 57191252, "comment_id": 100892295, "body": "Is string_view a must here?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 6260, "user_id": 10933809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IR53l.jpg?s=128&g=1", "display_name": "Oblivion", "link": "https://stackoverflow.com/users/10933809/oblivion"}, "edited": false, "score": 1, "creation_date": 1564003107, "post_id": 57191252, "comment_id": 100892343, "body": "@Oblivion If they want all of the string functionality it is.  If not they can be replaced with <code>static constexpr const char* member_name</code> or <code>static constexpr const char member_name[]</code>"}, {"owner": {"reputation": 6260, "user_id": 10933809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IR53l.jpg?s=128&g=1", "display_name": "Oblivion", "link": "https://stackoverflow.com/users/10933809/oblivion"}, "edited": false, "score": 0, "creation_date": 1564003281, "post_id": 57191252, "comment_id": 100892403, "body": "so std::string itself cannot be used then?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 6260, "user_id": 10933809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IR53l.jpg?s=128&g=1", "display_name": "Oblivion", "link": "https://stackoverflow.com/users/10933809/oblivion"}, "edited": false, "score": 1, "creation_date": 1564003338, "post_id": 57191252, "comment_id": 100892429, "body": "@Oblivion Not when using <code>constexpr</code>.  It does not have a <code>constexpr</code> constructor.  Robert Andrzejuk shows in their answer how you could use a <code>std::string</code> instead."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 3, "last_activity_date": 1564002759, "last_edit_date": 1564002759, "creation_date": 1564002358, "answer_id": 57191252, "question_id": 57191137, "link": "https://stackoverflow.com/questions/57191137/simplifying-static-const-member-definitions-of-templated-class/57191252#57191252", "title": "Simplifying Static Const Member Definitions of Templated Class", "body": "<p>If you can use C++17 you can use a <a href=\"https://en.cppreference.com/w/cpp/string/basic_string_view\" rel=\"nofollow noreferrer\"><code>std::string_view</code></a> and make it <a href=\"https://en.cppreference.com/w/cpp/language/constexpr\" rel=\"nofollow noreferrer\"><code>constexpr</code></a>.  This lets you define the variable inside the class and you don't need to provide a definition outside of the class (gets rid of all that template muck).  That would make the code look like</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string_view&gt;\n\ntemplate &lt;typename InputT, typename OutputT&gt;\nclass MyClassWithALongName {\n    public:\n        static constexpr std::string_view kParameterOne = \"The quick brown fox\";\n        static constexpr std::string_view kParameterTwo = \" jumps over\";\n        static constexpr std::string_view kParameterThree = \" the lazy dog.\";\n};\n\nint main() \n{\n    std::cout &lt;&lt; MyClassWithALongName&lt;int, int&gt;::kParameterOne;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/89de360b417ae16e\" rel=\"nofollow noreferrer\">Live example</a></p>\n"}, {"comments": [{"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1564003253, "post_id": 57191374, "comment_id": 100892384, "body": "@RemyLebeau This is a static variable. I think that&#39;s why <code>inline</code> was introduced."}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1564003278, "post_id": 57191374, "comment_id": 100892397, "body": "The inline specifier, when used in a decl-specifier-seq of a variable with static storage duration (static class member or namespace-scope variable), declares the variable to be an inline variable.  A static member variable (but not a namespace-scope variable) declared constexpr is implicitly an inline variable. (<a href=\"https://en.cppreference.com/w/cpp/language/inline\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/inline</a>)"}], "tags": [], "owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "is_accepted": false, "score": 2, "last_activity_date": 1564003004, "creation_date": 1564003004, "answer_id": 57191374, "question_id": 57191137, "link": "https://stackoverflow.com/questions/57191137/simplifying-static-const-member-definitions-of-templated-class/57191374#57191374", "title": "Simplifying Static Const Member Definitions of Templated Class", "body": "<p>With C++17 inline variables can be used:</p>\n\n<pre><code>template&lt; typename InputT, typename OutputT &gt;\nclass MyClassWithALongName\n{\npublic:\n    static inline const std::string kParameterOne   = \"The quick brown fox\";\n    static inline const std::string kParameterTwo   = \" jumps over\";\n    static inline const std::string kParameterThree = \" the lazy dog.\";\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "edited": false, "score": 0, "creation_date": 1564007713, "post_id": 57191827, "comment_id": 100893652, "body": "Well this does eliminate the template code, but it also adds a lot of function-related boilerplate code in its place.  E.g. the repetition of <code>static const std::string</code> is very burdensome."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "edited": false, "score": 0, "creation_date": 1564008252, "post_id": 57191827, "comment_id": 100893764, "body": "Unfortunately, I don&#39;t see better way (in C++11) to avoid the boilerplate. In your case, you could inherit from a non template class."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1564005829, "creation_date": 1564005829, "answer_id": 57191827, "question_id": 57191137, "link": "https://stackoverflow.com/questions/57191137/simplifying-static-const-member-definitions-of-templated-class/57191827#57191827", "title": "Simplifying Static Const Member Definitions of Templated Class", "body": "<p>Pre C++17, you might use function instead of member data to allow inline definition:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename InputT, typename OutputT&gt;\nclass MyClassWithALongName\n{\npublic:\n    static const std::string&amp; kParameterOne()   { static const std::string s = \"The quick brown fox\"; return s; }\n    static const std::string&amp; kParameterTwo()   { static const std::string s = \" jumps over\";         return s; }\n    static const std::string&amp; kParameterThree() { static const std::string s = \" the lazy dog.\";      return s; }\n};\n</code></pre>\n"}], "owner": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1564005829, "creation_date": 1564001850, "question_id": 57191137, "link": "https://stackoverflow.com/questions/57191137/simplifying-static-const-member-definitions-of-templated-class", "title": "Simplifying Static Const Member Definitions of Templated Class", "body": "<p>I am trying to define a set of static const member variables of a class clearly, but I feel like my code is being overwhelmed by boilerplate syntax.</p>\n\n<p>Here's an example:</p>\n\n<pre><code>template &lt;typename InputT, typename OutputT&gt;\nclass MyClassWithALongName {\n    public:\n        static const std::string kParameterOne;\n        static const std::string kParameterTwo;\n        static const std::string kParameterThree;\n};\n\ntemplate &lt;typename InputT, typename OutputT&gt;\nconst std::string MyClassWithALongName&lt;InputT, OutputT&gt;::kParameterOne = \"The quick brown fox\";\ntemplate &lt;typename InputT, typename OutputT&gt;\nconst std::string MyClassWithALongName&lt;InputT, OutputT&gt;::kParameterTwo = \" jumps over\";\ntemplate &lt;typename InputT, typename OutputT&gt;\nconst std::string MyClassWithALongName&lt;InputT, OutputT&gt;::kParameterThree = \" the lazy dog.\";\n</code></pre>\n\n<p>The problem that I see is that the important information to the reader</p>\n\n<pre><code>const std::string MyClassWithALongName::kParameterOne = \"The quick brown fox\";\nconst std::string MyClassWithALongName::kParameterTwo = \" jumps over\";\nconst std::string MyClassWithALongName::kParameterThree = \" the lazy dog.\";\n</code></pre>\n\n<p>is being swallowed up by all the template syntax.  When the names are shorter, putting everything on one line helps to visually group the boilerplate template syntax and allow the reader to automatically filter it out.  However, with longer names that's not an option.</p>\n\n<p>Is there a more readable way of defining these constants in this case that makes the important information more clear?</p>\n\n<p>Bonus: is there some magic way to get rid of the templating altogether for these static const values? Obviously they don't actually depend on the template types at all.</p>\n"}, {"tags": ["c++", "function", "boolean", "xor"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 4, "creation_date": 1564001271, "post_id": 57190988, "comment_id": 100891712, "body": "<code>xor</code> is a keyword: <a href=\"https://en.cppreference.com/w/cpp/keyword\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/keyword</a>"}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 1, "creation_date": 1564005099, "post_id": 57190988, "comment_id": 100892936, "body": "Unrelated, but XOR for bools can be simply written as <code>a != b</code>."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 11832723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1354261978076076/picture?type=large", "display_name": "Tass Tsourtzouklis", "link": "https://stackoverflow.com/users/11832723/tass-tsourtzouklis"}, "edited": false, "score": 0, "creation_date": 1564001445, "post_id": 57191023, "comment_id": 100891771, "body": "Thank you for the quick response. The book i&#39;m using is quite old and a lot of thing must have changed since the day the 3rd edition was published."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 27, "user_id": 11832723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1354261978076076/picture?type=large", "display_name": "Tass Tsourtzouklis", "link": "https://stackoverflow.com/users/11832723/tass-tsourtzouklis"}, "edited": false, "score": 1, "creation_date": 1564001504, "post_id": 57191023, "comment_id": 100891797, "body": "@TassTsourtzouklis yeah, you might try to select a book from curated list here: <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/388242/&hellip;</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 27, "user_id": 11832723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1354261978076076/picture?type=large", "display_name": "Tass Tsourtzouklis", "link": "https://stackoverflow.com/users/11832723/tass-tsourtzouklis"}, "edited": false, "score": 1, "creation_date": 1564001545, "post_id": 57191023, "comment_id": 100891807, "body": "@TassTsourtzouklis AFAIK these alternatives have always existed, just a lot of books don&#39;t cover them.  Most coders use the symbols instead of the names so most books don&#39;t even touch on them because the symbols are what you&#39;ll see the vast majority of the time."}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "reply_to_user": {"reputation": 27, "user_id": 11832723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1354261978076076/picture?type=large", "display_name": "Tass Tsourtzouklis", "link": "https://stackoverflow.com/users/11832723/tass-tsourtzouklis"}, "edited": false, "score": 0, "creation_date": 1564001566, "post_id": 57191023, "comment_id": 100891815, "body": "@TassTsourtzouklis some compilers like VisualStudio&#39;s compiler don&#39;t have those keywords as keywords. This may be the reason why the thing slipped in"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 1, "creation_date": 1564001812, "post_id": 57191023, "comment_id": 100891901, "body": "@Ayxan There is an option to make them keywords.  fun read on the subject: <a href=\"https://stackoverflow.com/questions/24414124/why-does-vs-not-define-the-alternative-tokens-for-logical-operators\" title=\"why does vs not define the alternative tokens for logical operators\">stackoverflow.com/questions/24414124/&hellip;</a>"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1564006999, "post_id": 57191023, "comment_id": 100893447, "body": "@NathanOliver Not always (in pre-standard dialects of C++). The book appears to have been written pre-standardisation."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 10, "last_activity_date": 1564001412, "last_edit_date": 1564001412, "creation_date": 1564001311, "answer_id": 57191023, "question_id": 57190988, "link": "https://stackoverflow.com/questions/57190988/cant-name-a-boolean-function-xor-in-c/57191023#57191023", "title": "Can&#39;t name a boolean function &quot; xor() &quot; in c++", "body": "<p><code>xor</code> is a keyword and cannot be used as a name in your code.  C++ offers <a href=\"https://en.cppreference.com/w/cpp/language/operator_alternative\" rel=\"noreferrer\">Alternative operator representations</a> so that instead of doing <code>||</code> for or you can use <code>or</code>.  There is an <code>xor</code> for <code>^</code> so you cannot use that name.</p>\n"}], "owner": {"reputation": 27, "user_id": 11832723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1354261978076076/picture?type=large", "display_name": "Tass Tsourtzouklis", "link": "https://stackoverflow.com/users/11832723/tass-tsourtzouklis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "closed_date": 1564051117, "answer_count": 1, "score": 0, "last_activity_date": 1564001771, "creation_date": 1564001166, "last_edit_date": 1564001771, "question_id": 57190988, "link": "https://stackoverflow.com/questions/57190988/cant-name-a-boolean-function-xor-in-c", "closed_reason": "Duplicate", "title": "Can&#39;t name a boolean function &quot; xor() &quot; in c++", "body": "<p>I'm trying to create a XOR operator and for an unknown reason my compiler doesn't accept <code>bool xor()</code> as a function, neither does it allow me to call it or use it in any way possible.</p>\n\n<p>I'd like to note that I'm following a book to learn C++. Specifically it's\n\"Learn C++ From the Ground Up\" by Herbert Schildt (3rd Edition)\nThis piece of code is referenced in this book.</p>\n\n<p>My code here works just fine if i name the function <code>bool xar()</code> or <code>bool XOR()</code>, but since I'm trying to learn C++ I'd like to gain some insight on why this error occurs.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nbool xor(bool a, bool b);\n\nint main()\n{\n    bool q, p;\n    cout &lt;&lt; \"Enter Q (0 or 1): \";\n    cin &gt;&gt; q;\n    cout &lt;&lt; \"Enter P (0 or 1): \";\n    cin &gt;&gt; p;\n\n    cout &lt;&lt; \"Q AND P: \" &lt;&lt; (q &amp;&amp; p) &lt;&lt; '\\n';\n    cout &lt;&lt; \"Q OR P: \" &lt;&lt; (q || p) &lt;&lt; '\\n';\n    cout &lt;&lt; \"Q XOR P: \" &lt;&lt; xor(q, p) &lt;&lt; \"\\n\";\n    cout &lt;&lt; \"nice\";\n\n    return 0;\n}\n\n\nbool xor(bool a, bool b)\n{\n    return (a || b) &amp;&amp; !(a &amp;&amp; b);\n} ```\n\n// The error message i receive is from the lines:\n// ---------------------------\n// bool xor(bool a, bool b);\n// *expected an identifier*\n// ---------------------------\n// cout &lt;&lt; \"Q XOR P: \" &lt;&lt; xor(q, p) &lt;&lt; \"\\n\";\n// *expected an expression*\n// ---------------------------\n// bool xor(bool a, bool b)\n// *expected an identifier*\n</code></pre>\n"}, {"tags": ["c++", "qt"], "answers": [{"tags": [], "owner": {"reputation": 1350, "user_id": 1698678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76c3dcda949d1adcc6db14345586b2b9?s=128&d=identicon&r=PG", "display_name": "PlinyTheElder", "link": "https://stackoverflow.com/users/1698678/plinytheelder"}, "is_accepted": true, "score": 5, "last_activity_date": 1564002054, "last_edit_date": 1564002054, "creation_date": 1564001711, "answer_id": 57191111, "question_id": 57190975, "link": "https://stackoverflow.com/questions/57190975/how-to-call-a-function-after-an-animation-ends/57191111#57191111", "title": "How to call a function after an animation ends?", "body": "<p>You'll need to listen to the <code>finished()</code> signal from your animation. Here's how you'd connect the signal:</p>\n\n<p><code>QObject::connect(AnimIn, &amp;QAbstractAnimation::finished, this, &amp;YourClass::OnAnimFinished);</code></p>\n\n<p>where OnAnimFinished() is obviously a slot in your current class. When the animation finishes, the signal will be emitted and the slot will be invoked. Then in the body of the <code>OnAnimFinished()</code> function you can call <code>MyFunction()</code>. </p>\n"}], "owner": {"reputation": 119, "user_id": 6859847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KcMTR.png?s=128&g=1", "display_name": "Teitoku42", "link": "https://stackoverflow.com/users/6859847/teitoku42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 1, "accepted_answer_id": 57191111, "answer_count": 1, "score": 4, "last_activity_date": 1564002054, "creation_date": 1564001111, "question_id": 57190975, "link": "https://stackoverflow.com/questions/57190975/how-to-call-a-function-after-an-animation-ends", "title": "How to call a function after an animation ends?", "body": "<p>So I've recently started dabbling a bit with the Qt animation framework and I'd say everything goes pretty well, however now I'd like to make it so that a function gets called after an animation finishes, is this possible?</p>\n\n<p>I've already tried executing the function after the animation starts, however this doesn't seem to work (I presume because Qt animations are ran on a separate thread)</p>\n\n<p>The way I've tried this is very simply like this:</p>\n\n<pre><code>AnimIn-&gt;setDuration(500);\nAnimIn-&gt;setStartValue(0.f);\nAnimIn-&gt;setEndValue(1.f);\nAnimIn-&gt;setEasingCurve(QEasingCurve::InCubic);\nAnimIn-&gt;start();\nMyFunction();\n</code></pre>\n\n<p>I've tried looking through the Qt documentation but to no avail, seeing that pretty much everything about animation and Qt is in QML which I don't use.</p>\n"}, {"tags": ["c++", "cmake", "c++17", "porting", "cmake-modules"], "comments": [{"owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "edited": false, "score": 0, "creation_date": 1564002493, "post_id": 57190732, "comment_id": 100892149, "body": "I&#39;d recommend grouping folders that have circular dependencies together. Look at <a href=\"http://stan4j.com/\" rel=\"nofollow noreferrer\">stan4j.com</a> for an automated tool that&#39;ll help you figure out dependencies"}], "answers": [{"comments": [{"owner": {"reputation": 1802, "user_id": 1816260, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/PiN0u.jpg?s=128&g=1", "display_name": "Tito", "link": "https://stackoverflow.com/users/1816260/tito"}, "edited": false, "score": 0, "creation_date": 1564031314, "post_id": 57191641, "comment_id": 100897995, "body": "many thanks daniel, this was exactly what i was looking for especiatelly the command target_sources"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1564051833, "post_id": 57191641, "comment_id": 100908353, "body": "&quot;Especially to reduce the burden of having to specify an absolute file path for every source file you add in a subdirectory.&quot; - Since CMake 3.13 the command <a href=\"https://cmake.org/cmake/help/v3.13/command/target_sources.html\" rel=\"nofollow noreferrer\">target_sources</a> <b>automatically transforms relative paths</b> based on <code>CMAKE_CURRENT_SOURCE_DIR</code> variable. So there is no needs to specify <code>${CMAKE_CURRENT_SOURCE_DIR}&#47;</code> as a prefix for the path."}, {"owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 0, "creation_date": 1564068892, "post_id": 57191641, "comment_id": 100918094, "body": "Hmm, I was using CMake 3.14.5 for my tests and got errors without the <code>${CMAKE_CURRENT_SOURCE_DIR}&#47;</code> prefix."}], "tags": [], "owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "is_accepted": false, "score": 1, "last_activity_date": 1564004617, "creation_date": 1564004617, "answer_id": 57191641, "question_id": 57190732, "link": "https://stackoverflow.com/questions/57190732/porting-java-package-to-c-and-using-cmake-as-a-build-tool/57191641#57191641", "title": "Porting Java package to C++ and using Cmake as a build tool", "body": "<p>You could structure the build so that the end result is indeed a giant target including everything, but the subcomponents that go into that build are specified in a piecewise fashion that would put the settings closer to their sources.</p>\n\n<p>As a basic example, I set up a test project with</p>\n\n<p>base CMakeLists.txt:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.14)\nproject(cmake_test)\n\nadd_library(megalib SHARED dummy.cpp)\nadd_subdirectory(a)\nadd_subdirectory(b)\n</code></pre>\n\n<p>a/CMakeLists.txt:</p>\n\n<pre><code>target_include_directories(megalib PUBLIC ${CMAKE_CURRENT_SOURCE_DIR})\ntarget_sources(megalib PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/a.cpp)\n</code></pre>\n\n<p>b/CMakeLists.txt:</p>\n\n<pre><code>target_include_directories(megalib PUBLIC ${CMAKE_CURRENT_SOURCE_DIR})\ntarget_sources(megalib PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/b.cpp)\n</code></pre>\n\n<p>And the resulting compilation log (using the Ninja generator):</p>\n\n<pre><code>[1/4] /usr/bin/c++  -Dmegalib_EXPORTS -I/tmp/cmake-test/a -I/tmp/cmake-test/b -fPIC -MD -MT CMakeFiles/megalib.dir/dummy.cpp.o -MF CMakeFiles/megalib.dir/dummy.cpp.o.d -o CMakeFiles/megalib.dir/dummy.cpp.o -c /tmp/cmake-test/dummy.cpp\n[2/4] /usr/bin/c++  -Dmegalib_EXPORTS -I/tmp/cmake-test/a -I/tmp/cmake-test/b -fPIC -MD -MT CMakeFiles/megalib.dir/a/a.cpp.o -MF CMakeFiles/megalib.dir/a/a.cpp.o.d -o CMakeFiles/megalib.dir/a/a.cpp.o -c /tmp/cmake-test/a/a.cpp\n[3/4] /usr/bin/c++  -Dmegalib_EXPORTS -I/tmp/cmake-test/a -I/tmp/cmake-test/b -fPIC -MD -MT CMakeFiles/megalib.dir/b/b.cpp.o -MF CMakeFiles/megalib.dir/b/b.cpp.o.d -o CMakeFiles/megalib.dir/b/b.cpp.o -c /tmp/cmake-test/b/b.cpp\n[4/4] : &amp;&amp; /usr/bin/c++ -fPIC    -shared -Wl,-soname,libmegalib.so -o libmegalib.so CMakeFiles/megalib.dir/dummy.cpp.o CMakeFiles/megalib.dir/a/a.cpp.o CMakeFiles/megalib.dir/b/b.cpp.o   &amp;&amp; :\n</code></pre>\n\n<p>It might then be useful to set up some macros to reduce the amount of repetition between subdirectories.  (Especially to reduce the burden of having to specify an absolute file path for every source file you add in a subdirectory.)</p>\n"}], "owner": {"reputation": 1802, "user_id": 1816260, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/PiN0u.jpg?s=128&g=1", "display_name": "Tito", "link": "https://stackoverflow.com/users/1816260/tito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "closed_date": 1564027529, "answer_count": 1, "score": -2, "last_activity_date": 1564004617, "creation_date": 1563999905, "last_edit_date": 1564000570, "question_id": 57190732, "link": "https://stackoverflow.com/questions/57190732/porting-java-package-to-c-and-using-cmake-as-a-build-tool", "closed_reason": "Not suitable for this site", "title": "Porting Java package to C++ and using Cmake as a build tool", "body": "<p>I have the following task. There is a java package that needs to be ported to c++17.   A transpiling   tool is being used to help with the task and avoid manual rewrite of every single file. Currently  for all java classes/interfaces the corresponding c++ class is being created. </p>\n\n<p>The first problem I see with this is that  the original java package is huge and it has more then 180 folders. Those all are replicated in the new c++ code-base. We would like to use Cmake as a build tool but the very first problem we see is that we can not simply split the project in multiple sub-directories and simply build separate shared libraries in each sub directory since those have dependencies on each other,  and I am really afraid of ending up with circular dependency.<br>\nI know it is a lot to ask here but still, what would be the best practice (if any exists) on how to organize such port form java to c++ with cmake.  We would like to keep the folder structure  since it is logical. The only solution I see so far is to build one giant target that depends on everything. \nAny comments and ideas or examples of such structure are highly appreciated.  </p>\n"}, {"tags": ["c++", "c", "cmake", "project-structure"], "answers": [{"comments": [{"owner": {"reputation": 247, "user_id": 8310085, "user_type": "registered", "profile_image": "https://graph.facebook.com/1789907944358222/picture?type=large", "display_name": "Alex Erling", "link": "https://stackoverflow.com/users/8310085/alex-erling"}, "edited": false, "score": 0, "creation_date": 1564007636, "post_id": 57190750, "comment_id": 100893630, "body": "In the cmakelist.txt for Project_1 , I tried adding the Comm Library for Project_1A, but I when I added communications.h into the project_1a.c, it was saying I couldn&#39;t find the file. Am I missing something? Also, what is the reason for including the PUBLIC? Thanks!"}, {"owner": {"reputation": 247, "user_id": 8310085, "user_type": "registered", "profile_image": "https://graph.facebook.com/1789907944358222/picture?type=large", "display_name": "Alex Erling", "link": "https://stackoverflow.com/users/8310085/alex-erling"}, "edited": false, "score": 0, "creation_date": 1564011426, "post_id": 57190750, "comment_id": 100894328, "body": "Also, say I have one more library (utility) that is used in the other libraries. How do I go about including them in the other libraries?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 247, "user_id": 8310085, "user_type": "registered", "profile_image": "https://graph.facebook.com/1789907944358222/picture?type=large", "display_name": "Alex Erling", "link": "https://stackoverflow.com/users/8310085/alex-erling"}, "edited": false, "score": 0, "creation_date": 1564029664, "post_id": 57190750, "comment_id": 100897527, "body": "@AlexErling if you have include directories required tu use a particular library, you have to add it as an interface include directory. Let me edit"}, {"owner": {"reputation": 247, "user_id": 8310085, "user_type": "registered", "profile_image": "https://graph.facebook.com/1789907944358222/picture?type=large", "display_name": "Alex Erling", "link": "https://stackoverflow.com/users/8310085/alex-erling"}, "edited": false, "score": 0, "creation_date": 1564034087, "post_id": 57190750, "comment_id": 100898951, "body": "Okay, thanks for info. Last question being, which Cmakes do I do the target include in? In my example, is it ~/src/Cmakelist.txt, or whichever cmake will be used by the library? And I assume I need to do that for each library I add?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 247, "user_id": 8310085, "user_type": "registered", "profile_image": "https://graph.facebook.com/1789907944358222/picture?type=large", "display_name": "Alex Erling", "link": "https://stackoverflow.com/users/8310085/alex-erling"}, "edited": false, "score": 0, "creation_date": 1564063255, "post_id": 57190750, "comment_id": 100914888, "body": "@AlexErling you can add a pure interface library that has the include dir: <code>add_library(common INTERFACE)</code> and add the include directory <code>target_include_directory(common INTERFACE your&#47;include&#47;dir)</code>"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 247, "user_id": 8310085, "user_type": "registered", "profile_image": "https://graph.facebook.com/1789907944358222/picture?type=large", "display_name": "Alex Erling", "link": "https://stackoverflow.com/users/8310085/alex-erling"}, "edited": false, "score": 0, "creation_date": 1564064959, "post_id": 57190750, "comment_id": 100915880, "body": "@AlexErling I added an example of this in the last example"}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 0, "last_activity_date": 1564064930, "last_edit_date": 1564064930, "creation_date": 1564000022, "answer_id": 57190750, "question_id": 57190546, "link": "https://stackoverflow.com/questions/57190546/cmake-project-structure-how-do-i-properly-merge-libraries-together-and-include/57190750#57190750", "title": "CMake Project Structure: How do I properly merge libraries together and include them in multiple executables", "body": "<p>You almost got it: you can link your executables with the libraries defined in other directories. There is no problem with that.</p>\n\n<pre><code>add_executable(Project_1A Project_1a.c)\nadd_executable(Project_1B Project_1B.c)\n\ntarget_link_library(Project_1A PUBLIC Full_Library)\n</code></pre>\n\n<p>However, I would suggest you link only to the parts of the library you are using directly:</p>\n\n<pre><code>add_executable(Project_1A Project_1a.c)\nadd_executable(Project_1B Project_1B.c)\n\n# Project_1A only use crypto directly in it's code\ntarget_link_library(Project_1A PUBLIC Crypto_Lib) \n\n# Project_1B use comm and error directly in it's code\ntarget_link_library(Project_1B PUBLIC Comm_Lib Error_Lib) \n</code></pre>\n\n<p>Then instead of using the <code>include_directories</code> function, use the <code>target_include_directories</code>. There's an option to add the include directory as a usage requirement. That requirement will be propagated to other libraries which use this one:</p>\n\n<pre><code>target_include_directories(Comm_Lib INTERFACE ${CMAKE_CURRENT_SOURCE_DIR})\n</code></pre>\n\n<p>With that line above, anyone who links to <code>Comm_Lib</code> will have the communication library directory as include path.</p>\n\n<p>If you really and to aggregate the three library together, <code>Full_Library</code> can be defined like this:</p>\n\n<pre><code>add_library(Full_Library INTERFACE)\n\ntarget_link_libraries(Full_Library INTERFACE Comm_Lib Crypto_Lib Error_Lib)\ntarget_include_directories(Full_Library INTERFACE common/include/dir)\n</code></pre>\n"}], "owner": {"reputation": 247, "user_id": 8310085, "user_type": "registered", "profile_image": "https://graph.facebook.com/1789907944358222/picture?type=large", "display_name": "Alex Erling", "link": "https://stackoverflow.com/users/8310085/alex-erling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 0, "accepted_answer_id": 57190750, "answer_count": 1, "score": 0, "last_activity_date": 1564064930, "creation_date": 1563998947, "last_edit_date": 1564007919, "question_id": 57190546, "link": "https://stackoverflow.com/questions/57190546/cmake-project-structure-how-do-i-properly-merge-libraries-together-and-include", "title": "CMake Project Structure: How do I properly merge libraries together and include them in multiple executables", "body": "<p>I am building a C Project and I'm currently a little lost on how to properly link in the libraries.</p>\n\n<p>To summarize: I will have 3 projects that will have multiple executables. The projects will be using code from a library that will have multiple directories (sub-libraries). I have all the includes for the project in an includes directory. And I also will have a testing directory for the src and the lib as well.</p>\n\n<p>How do I link in a library thats in a separate directory?</p>\n\n<p>Is there a way to I can merge all these libraries into one main library, so I only have to link a single library?</p>\n\n<p><strong>The structure looks like this:</strong></p>\n\n<pre><code>Project:\n   |-- bin   \n   |-- build   \n   |-- src     \n   |   |-- Project 1   \n   |   |      |-- Project1a.c\n   |   |      |-- Project1b.c\n   |   |      |-- cmakelists.txt\n   |   |-- Project 2\n   |   |      |--Project2.c\n   |   |-- Project 3\n   |   |      |--Project3.c\n   |   |-- cmakelists.txt\n   |\n   |-- lib \n   |    |--Crypto_Lib\n   |    |      |-- Crypto.c\n   |    |      |-- cmakelists.txt\n   |    |--Communications_Lib\n   |    |      |-- Communications.c\n   |    |      |-- cmakelists.txt\n   |    |--Error_Lib\n   |    |      |-- Error.c\n   |    |      |-- cmakelists.txt\n   |    |--cmakelists.txt\n   |\n   |-- include\n   |    |--src\n   |    |   |-- Project 1\n   |    |   |     |-- Project1a.h\n   |    |   |     |-- Project1b.h\n   |    |   |-- Project 2\n   |    |   |     |-- Project2.h\n   |    |   |-- Project 3\n   |    |         |-- Project3.h    \n   |    |--lib\n   |    |  |--Hash \n   |    |  |    |-- Crypto.h\n   |    |  |--Communications\n   |    |  |    |-- Communications.h\n   |    |  |--Error\n   |    |  |    |-- Error.h\n   |\n   |-- test\n   |    |--src (etc...)\n   |    |--lib (etc...)\n   |    |--cmakelists.txt\n   |\n   |--cmakelists.txt\n</code></pre>\n\n<p><strong>CMAKES I currently have:</strong></p>\n\n<p>~/CMakeLists.txt</p>\n\n<pre><code>    add_subdirectory(lib)\n    add_subdirectory(src)\n    add_subdirectory(test)\n</code></pre>\n\n<p>~/lib/CMakeLists.txt</p>\n\n<pre><code>    #To access the header file\n    include_directories(${CMAKE_SOURCE_DIR}/includes/lib)   \n\n    add_subdirectory(communications)\n    add_subdirectory(crypto)\n    add_subdirectory(error)\n</code></pre>\n\n<p>~/src/CMakeLists.txt</p>\n\n<pre><code>    #To access the header file\n    include_directories(${CMAKE_SOURCE_DIR}/includes/src)   \n\n    add_subdirectory(project_one)\n    add_subdirectory(project_two)\n    add_subdirectory(project_three)\n</code></pre>\n\n<p>~/lib/communications/CMakeLists.txt</p>\n\n<pre><code>    add_library(Comm_Lib STATIC communications.c)\n</code></pre>\n\n<p>~/lib/ crypto /CMakeLists.txt</p>\n\n<pre><code>    add_library(Crypto _Lib STATIC crypto.c)\n</code></pre>\n\n<p>~/lib/error/CMakeLists.txt</p>\n\n<pre><code>    add_library(Error_Lib STATIC error.c)\n</code></pre>\n\n<p>~/src/project_one/CMakeLists.txt</p>\n\n<pre><code>    add_executable(Project_1A Project_1a.c)\n    add_executable(Project_1B Project_1B.c)\n\n    #target_link_library(Project_1A Full_Library) Would like to be able to join all libraries together\n</code></pre>\n\n<p>~/src/project_two/CMakeLists.txt</p>\n\n<pre><code>    add_executable(Project_Three Project_two.c)\n</code></pre>\n\n<p>~/src/project_one/CMakeLists.txt</p>\n\n<pre><code>    add_executable(Project_Three Project_three.c)\n</code></pre>\n\n<p>~/test/CMakeLists.txt</p>\n\n<pre><code>    add_subdirectory(lib_test)\n    add_subdirectory(src_test)  \n\n    **Haven\u2019t gotten any deeper in the test CMakeLists.txt\n</code></pre>\n\n<p>I know I haven't used link_libraries yet, I'm just trying to figure out the best way to go about this. </p>\n\n<p>Thanks for any help!</p>\n"}, {"tags": ["c++", "member-variables"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1563998162, "post_id": 57190272, "comment_id": 100890515, "body": "You might be able to add reference data members to the derived type that always refer to the base type members. But that has it&#39;s own set of problems."}, {"owner": {"reputation": 19618, "user_id": 860585, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YagL1.jpg?s=128&g=1", "display_name": "Rotem", "link": "https://stackoverflow.com/users/860585/rotem"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1563998296, "post_id": 57190272, "comment_id": 100890578, "body": "@Fran&#231;oisAndrieux An example of such a problem would be welcome."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 19618, "user_id": 860585, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YagL1.jpg?s=128&g=1", "display_name": "Rotem", "link": "https://stackoverflow.com/users/860585/rotem"}, "edited": false, "score": 1, "creation_date": 1563998788, "post_id": 57190272, "comment_id": 100890805, "body": "@Rotem I believe you will have to write your own copy/move constructors and assignment operators. Beyond that, while reference data members aren&#39;t required to increase the size of the <code>class</code>, I have never seen an implementation perform this optimization, so you&#39;ll almost certainly be bloating your <code>class</code> with these aliases. Edit : These aren&#39;t show stopping problems, but they are inconvenient."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 5, "last_activity_date": 1563998080, "creation_date": 1563998080, "answer_id": 57190351, "question_id": 57190272, "link": "https://stackoverflow.com/questions/57190272/rename-member-variables-in-derived-classes/57190351#57190351", "title": "&quot;Rename&quot; member variables in derived classes", "body": "<p>No. You cannot \"rename\" a base class member in a derived class. That's simply not something the language allows.</p>\n\n<p>A variable gets its name when it is declared and that is then its name forever. You can create aliases (references) to it if you like or you can have functions by whatever name that changes it, but the fundamental name of a variable is set in stone at declaration time.</p>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1563999523, "post_id": 57190423, "comment_id": 100891091, "body": "Caveat: Because a reference cannot be reassigned, having reference members wrecks havoc on the assignment operator. You may find yourself having a to implement a custom <code>operator=</code> to get around this."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1563999888, "post_id": 57190423, "comment_id": 100891214, "body": "@user4581301 since the reference isn&#39;t assignable, I don&#39;t think there is a sensible way to do it even with a custom operator. They do need custom copy / move constructors. Another caveat: This unnecessarily increases size of the class."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1564001152, "post_id": 57190423, "comment_id": 100891663, "body": "@eerorika the way I see it here, after the assignment, the reference will still refer to the same variable. I&#39;d just leave trying to reseat the reference out and make sure all of the non-reference variables. Thanks for bringing up the constructors. That&#39;s even sneakier since there likely won&#39;t be any diagnostic warning that with the default copy/move constructor the copy is referring to the source&#39;s variables. Nasty, nasty surprise."}], "tags": [], "owner": {"reputation": 6260, "user_id": 10933809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IR53l.jpg?s=128&g=1", "display_name": "Oblivion", "link": "https://stackoverflow.com/users/10933809/oblivion"}, "is_accepted": false, "score": 0, "last_activity_date": 1563999979, "last_edit_date": 1563999979, "creation_date": 1563998391, "answer_id": 57190423, "question_id": 57190272, "link": "https://stackoverflow.com/questions/57190272/rename-member-variables-in-derived-classes/57190423#57190423", "title": "&quot;Rename&quot; member variables in derived classes", "body": "<p>You cannot rename in the derived class but you can use reference to base members in the derived class</p>\n\n<pre><code>size_t&amp; x = coordinates::c1;\n</code></pre>\n\n<p>However using reference will prevent reassignment because it's not possible to reassign a reference and you have to find a workaround in case of assignment.</p>\n"}, {"comments": [{"owner": {"reputation": 219, "user_id": 8066678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c99f50ab7f36c6633c1ca1bf8b494c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Teloze", "link": "https://stackoverflow.com/users/8066678/teloze"}, "edited": false, "score": 0, "creation_date": 1564002205, "post_id": 57190431, "comment_id": 100892049, "body": "Clearly this works but it requires the overloading of any method taking size_type and coordinates.. it may be long."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 219, "user_id": 8066678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c99f50ab7f36c6633c1ca1bf8b494c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Teloze", "link": "https://stackoverflow.com/users/8066678/teloze"}, "edited": false, "score": 0, "creation_date": 1564002369, "post_id": 57190431, "comment_id": 100892104, "body": "@Teloze it does, but the overloaded versions should all be one line (and look exactly like my overload of <code>get</code>). I suppose depending on the size of your class this may not be reasonable, but that&#39;s your call!"}], "tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": false, "score": 2, "last_activity_date": 1563998418, "creation_date": 1563998418, "answer_id": 57190431, "question_id": 57190272, "link": "https://stackoverflow.com/questions/57190272/rename-member-variables-in-derived-classes/57190431#57190431", "title": "&quot;Rename&quot; member variables in derived classes", "body": "<p>You cannot <em>rename</em> variables in a child class, but with a little work, being able to write your <code>main</code> code is absolutely possible.</p>\n\n<p>I'd start by making my own custom <code>coordinates</code> and <code>size_type</code> in the <code>PositionVersusTime::</code> scope. And then override the constructor and <code>get</code> functions in <code>PositionVersusTime</code> to take these new structs.</p>\n\n<p>So your <code>PositionVersusTime</code> struct will look like:</p>\n\n<pre><code>struct PositionVersusTime : public Field2D {\n    struct size_type { size_t nx, nt; };\n    struct coordinates { size_t x, t; };\n    PositionVersusTime(size_type const &amp; siz) : Field2D({siz.nx, siz.nt}) { }\n    double get(coordinates const &amp; coords) { return Field2D::get({coords.x, coords.t}); }\n};\n</code></pre>\n\n<p>Then the main code you posted will work as you expect:</p>\n\n<pre><code>int main() {\n   PositionVersusTime::size_type siz;\n   siz.nx = 5;\n   siz.nt = 2;\n   PositionVersusTime myField(siz);\n   PositionVersusTime::coordinates coords;\n   coords.x = 2;\n   coords.t = 0;\n   auto out = myField.get(coords);\n   return 0;\n}\n</code></pre>\n\n<p>See it work here: <a href=\"https://ideone.com/ZpkTbZ\" rel=\"nofollow noreferrer\">ideone</a></p>\n"}, {"tags": [], "owner": {"reputation": 351, "user_id": 7834933, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kAAAkx4hSUc/AAAAAAAAAAI/AAAAAAAAqoE/UdciGksbY3A/photo.jpg?sz=128", "display_name": "Daniel", "link": "https://stackoverflow.com/users/7834933/daniel"}, "is_accepted": true, "score": 2, "last_activity_date": 1564003215, "creation_date": 1564003215, "answer_id": 57191408, "question_id": 57190272, "link": "https://stackoverflow.com/questions/57190272/rename-member-variables-in-derived-classes/57191408#57191408", "title": "&quot;Rename&quot; member variables in derived classes", "body": "<p>Combining others solutions and using inheritance and reference data members, here is my solution.</p>\n\n<p>Notice slight changes to the <code>Field2D</code> variable types.</p>\n\n<pre><code>struct size_type{\n    size_t dim1, dim2;\n};\n\nstruct PositionVsTime_size_type : public size_type{\n    size_t&amp; nx = dim1;\n    size_t&amp; nt = dim2;\n};\n\nstruct coordinates {\n    size_t c1,c2;\n};\n\nstruct PositionVsTime_coordinates : public coordinates{\n    size_t&amp; x = c1;\n    size_t&amp; t = c2;\n};\n\nstruct Field2D {\n    Field2D(size_type&amp; siz) : size_(siz), data_(size_.dim1*size_.dim2) {}\n    double get(coordinates&amp; coords) {\n        return data_[coords.c1*size_.dim2 + coords.c2];\n    }\n    Field2D&amp; set(coordinates&amp; coords, double val){\n        data_[coords.c1*size_.dim2 + coords.c2] = val;\n        return *this;\n    }\n    private:\n    size_type&amp; size_;\n    vector&lt;double&gt; data_;\n};\n\nstruct PositionVersusTime : public Field2D {\n    PositionVersusTime(size_type&amp; siz) : Field2D(siz) {}\n};\n\nint main(){\n   PositionVsTime_size_type siz;\n   siz.nx = 5;\n   siz.nt = 2;\n   PositionVersusTime myField(siz);\n   PositionVsTime_coordinates coords;\n   coords.x = 2;\n   coords.t = 0;\n   myField.set(coords, 5);\n   auto out = myField.get(coords);\n   cout &lt;&lt; out &lt;&lt; endl; // will print 5\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 219, "user_id": 8066678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c99f50ab7f36c6633c1ca1bf8b494c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Teloze", "link": "https://stackoverflow.com/users/8066678/teloze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 57191408, "answer_count": 4, "score": 5, "last_activity_date": 1564003215, "creation_date": 1563997734, "question_id": 57190272, "link": "https://stackoverflow.com/questions/57190272/rename-member-variables-in-derived-classes", "title": "&quot;Rename&quot; member variables in derived classes", "body": "<p>The question may seem a little bit weird but I'll try to contestualize a little bit the use case.</p>\n\n<p>Suppose you have a generic implementation of a two-dimensional (Cartesian) field with dimensions dim1 and dim2, coordinates c1 and c2.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct Field2D {\n  struct size_type {\n     size_t dim1,dim2;\n  };\n  struct coordinates {\n     size_t c1,c2;\n  }\nField2D(size_type const &amp; siz) : size_(siz), data(size_.dim1*size_.dim2) {}\ndouble get(coordinates const &amp; coords) {\n  return data_[coords.c1*size_.dim2 + coords.c2];\n}\n//Other methods\nprivate:\n  size_type size_;\n  vector&lt;double&gt; data_;\n};\n\n</code></pre>\n\n<p>You want to inherit from this class but you want to be more explicit about the nature of the coordinates. For example, a field PositionVersusTime whose coordinates are \"x\" and \"t\" and dimensions \"nx\" and \"nt\", whose usage I'd like to be</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main(){\n   PositionVersusTime::size_type siz;\n   siz.nx = 5;\n   siz.nt = 2;\n   PositionVersusTime myField(siz);\n   PositionVersusTime::coordinates coords;\n   coords.x = 2;\n   coords.t = 0;\n   auto out = myField.get(coords);\n   return 0;\n}\n</code></pre>\n\n<p>The reason I want to do this is that the ordering may change depending on the field (for example a TimeVersusPosition) and sometimes \"forgotten\" by the user. Is there a way to obtain a similar behavior? or should I simply go with getters (e.g., coords.x() = 2) ?</p>\n"}, {"tags": ["c++", "file", "io", "ifstream"], "comments": [{"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 0, "creation_date": 1563998659, "post_id": 57190254, "comment_id": 100890740, "body": "On what line does the access violation happens?"}, {"owner": {"reputation": 33, "user_id": 8501401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3208d9f01cd71d32c404c4820bf85fe0?s=128&d=identicon&r=PG&f=1", "display_name": "Chase", "link": "https://stackoverflow.com/users/8501401/chase"}, "reply_to_user": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 0, "creation_date": 1563998782, "post_id": 57190254, "comment_id": 100890800, "body": "Sorry, I didn&#39;t indicate that. I&#39;ll edit the code"}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 0, "creation_date": 1563999845, "post_id": 57190254, "comment_id": 100891201, "body": "What type is <code>maxNumProj</code>?"}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1564000208, "post_id": 57190254, "comment_id": 100891314, "body": "You haven&#39;t given us a <a href=\"https://stackoverflow.com/help/mcve\">minimal complete example</a>, and I can&#39;t reproduce the error with the code you&#39;ve posted. What happens if you remove the code that reads past that line?"}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 0, "creation_date": 1564000505, "post_id": 57190254, "comment_id": 100891438, "body": "Does istream have the operator &gt;&gt; for strings?"}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "reply_to_user": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 0, "creation_date": 1564001192, "post_id": 57190254, "comment_id": 100891684, "body": "@MartinV&#233;ronneau Yes. Please see the <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/operator_ltltgtgt\" rel=\"nofollow noreferrer\">reference page</a>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1564001305, "post_id": 57190254, "comment_id": 100891723, "body": "<code>in_stream &gt;&gt; label;</code> does not read a complete line and leaves <code>&#39;\\n&#39;</code> in the input stream unread. Validating each read, e.g. <code>if (!(in_stream &gt;&gt; label)) { &#47;* handle error *&#47; }</code> will catch and protect against continuing attempted reads from a stream in an error state. You can also check <code>in_stream.bad()</code>, or <code>in_stream.fail()</code> or <code>in_stream.eof()</code> to determine the failure."}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "reply_to_user": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1564001706, "post_id": 57190254, "comment_id": 100891866, "body": "@AlexanderZhang I was under the impression that for istreams, the <a href=\"https://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt\" rel=\"nofollow noreferrer\">&lt;&lt; operator</a> was overloaded for basic types, but reading in strings required the use of <code>getline</code>."}], "owner": {"reputation": 33, "user_id": 8501401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3208d9f01cd71d32c404c4820bf85fe0?s=128&d=identicon&r=PG&f=1", "display_name": "Chase", "link": "https://stackoverflow.com/users/8501401/chase"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563998883, "creation_date": 1563997659, "last_edit_date": 1563998883, "question_id": 57190254, "link": "https://stackoverflow.com/questions/57190254/ifstream-experiencing-creating-random-exceptions", "title": "Ifstream experiencing creating random exceptions", "body": "<p>I am trying to read some data from a .txt file using an ifstream so I can pass it into values of a class I created. This function is inside of a class, so the integers aren't declared at the top of the funciton. The ifstream works for the first few values I read in, but it throws exceptions randomly, (i have no idea why) on one of the lines. Every once in a while( it seems like 1 in 50) the stream will work with no errors. </p>\n\n<p>I've tried changing the format of the input file. If I put a line at the top of the file, (and then read in a test number), it fixes my issue. For this program, however, I cant change the format of my input file.</p>\n\n<pre><code>int parameters::readParameters() {\n\nifstream in_stream;\nstring paramFile = \"data/Parameter.txt\";\nstring label;\nstring option;\n\n// read in file\nin_stream.open(paramFile);\n\n// file isn't opened\nif (in_stream.fail()) {\n    cerr &lt;&lt; \"\\nFailed opening Parameter.txt\\n\";\n    return 1;\n}\n\n// read non data line\nin_stream &gt;&gt; label;\n\n// figure out objective\nint optionPicker = 0;\nint numOptions = 4;\nfor (int i = 1; i &lt;= numOptions; i++) {\n    in_stream &gt;&gt; label &gt;&gt; option;\n    if (option == \"Y\") optionPicker = i;\n\n}\nif (optionPicker == 1) obj = minAvgBid;\nelse if (optionPicker == 2) obj = maxFirstBid;\nelse if (optionPicker == 3) obj = maxFithOrBettterBid;\nelse if (optionPicker == 4) obj = maxNumFivePerTeam;\nelse obj = none;\n\n\n// read non data line\nin_stream &gt;&gt; label;\n\n/*\n\nThe Error occurs directly after this comment\n\n*/\n\n// read upper bounds\nin_stream &gt;&gt; label &gt;&gt; maxNumProj;\nin_stream &gt;&gt; label &gt;&gt; worstRanking;\n\n// read non data line\nin_stream &gt;&gt; label;\n\n// read lower bounds\nin_stream &gt;&gt; label &gt;&gt; minNumFiveTeam;\nin_stream &gt;&gt; label &gt;&gt; minNumFirstBid;\nin_stream &gt;&gt; label &gt;&gt; minNumFifthBid;\n\n// read non data line\nin_stream &gt;&gt; label;\n\n// read english options\nint english;\nin_stream &gt;&gt; label &gt;&gt; english;\nif (english == 1) engOpt = option1;\nelse if (english == 2) engOpt = option2;\nelse if (english == 3) engOpt = option3;\nelse if (english == 4) engOpt = option4;\n\n// read native english\nstring nativeEng;\nin_stream &gt;&gt; label &gt;&gt; nativeEng;\nif (nativeEng == \"Y\") native = choice1;\nelse native = choice2;\n\n// read non data line\nin_stream &gt;&gt; label;\n\n// read solution number\nin_stream &gt;&gt; label &gt;&gt; solNum;\n\n//if (checkParameters() == 1) return 1;\n\nin_stream.close();\n\ncout &lt;&lt; \"Parameters Read!\" &lt;&lt; endl;\n\nreturn 0;\n}\n</code></pre>\n\n<p>-----------------------------Input File ----------------------------</p>\n\n<pre><code>Choose_ONE_objective:\nMin_avg_bid Y\nMax_first_bid N\nMax_fifth_bid N\nMax_five_teams N\nChoose_Upper_Bounds:\nUB_num_proj 60\nUB_bid 10\nChoose_Lower_Bounds:\nLB_5_teams 0                       &lt;- the error occurs on this line\nLB_first_bid 0\nLB_fifth_bid 0\nChoose_English_Option:\nEnglish_Option 2\nNative_English_Lowest Y\nSelect_Output_Label:\nSolution_Number 20\n</code></pre>\n\n<p>An exception is thrown: Access violation reading at 0x000....</p>\n"}, {"tags": ["c++", "tree"], "comments": [{"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1563997194, "post_id": 57190140, "comment_id": 100890131, "body": "Please turn the code fragment into a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. The shown code currently looks hardly readable to human beings and definitly uncompilable for a compiler. Applying some indentation would help."}, {"owner": {"reputation": 1458, "user_id": 11746212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69fe33bc21a8570b9e9c0fce89a681fa?s=128&d=identicon&r=PG&f=1", "display_name": "IronMan", "link": "https://stackoverflow.com/users/11746212/ironman"}, "edited": false, "score": 0, "creation_date": 1563997361, "post_id": 57190140, "comment_id": 100890199, "body": "Perhaps the calling code is attempting to dereference a null return value from this function?"}, {"owner": {"reputation": 21, "user_id": 11632200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed85fd96a0a1cba45e3bab21bfc94396?s=128&d=identicon&r=PG&f=1", "display_name": "Bad At Cpp", "link": "https://stackoverflow.com/users/11632200/bad-at-cpp"}, "edited": false, "score": 0, "creation_date": 1563998607, "post_id": 57190140, "comment_id": 100890713, "body": "I tried to explain the code, I&#39;m new to this so I don&#39;t know how to do this minimal reproducible example, sorry!  I think you are right IronMan22, but I don&#39;t know why is this happening."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1563998616, "post_id": 57190140, "comment_id": 100890720, "body": "The given code looks reasonable. With 300,000 nodes you could be exhausting the the available Automatic storage if the tree is poorly balanced or you have a small amount of Automatic Storage."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 1, "creation_date": 1563999033, "post_id": 57190140, "comment_id": 100890911, "body": "Compile with higher optimization levels to optimize away the stack overhead of the tail recursive calls."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1563999155, "post_id": 57190140, "comment_id": 100890958, "body": "How to make a minimal reproducible example: 1. Back up your program. 2. Remove everything from the program that you do not need to expose the bug while still having a program that compiles and runs. Yes, this is more difficult than it sounds, but it almost always eliminates the need to ask a question. If you carry the MCVE all the way through, you wind up with a program that is a couple lines long, but you almost never need to go that far. Usually after a few halvings of the code size, there&#39;s so little room for the bug to hide that it leaps out and slaps you in the face."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 1, "creation_date": 1563999228, "post_id": 57190140, "comment_id": 100890979, "body": "Check for failed allocations. Handle exceptions. As long as you don&#39;t run out of memory or overflow the stack, this function looks okay to me. My money is on undetected failure allocating a node. (Side note, couldn&#39;t you just use std::set, and argue that it&#39;s already implemented as a tree?)"}, {"owner": {"reputation": 21, "user_id": 11632200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed85fd96a0a1cba45e3bab21bfc94396?s=128&d=identicon&r=PG&f=1", "display_name": "Bad At Cpp", "link": "https://stackoverflow.com/users/11632200/bad-at-cpp"}, "edited": false, "score": 0, "creation_date": 1563999408, "post_id": 57190140, "comment_id": 100891039, "body": "Thanks, everyone! I tested the code only on small trees it works fine, this is why I didn&#39;t try to modify it, however, when I did the codinGame test it didn&#39;t work on the large tree, I will try to create a large tree to test the code (but it will take some time)."}, {"owner": {"reputation": 1574, "user_id": 239189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mUAlH.png?s=128&g=1", "display_name": "jszpilewski", "link": "https://stackoverflow.com/users/239189/jszpilewski"}, "edited": false, "score": 0, "creation_date": 1564001210, "post_id": 57190140, "comment_id": 100891692, "body": "The drawback of recursion is that does not scale to arbitrary data sizes. The stack size is constant and set during program compilation. A big data set with multiple recursive calls will eventually overflow it regardless of the total memory size. So you should write an iterative loop as the tail recursion is easy to eliminate."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1564002412, "post_id": 57190140, "comment_id": 100892119, "body": "IMHO, move the <code>find_node</code> outside of the <code>Node</code> class and into the tree class.  A <code>Node</code> is a single object and not a container of objects.  A <i>tree</i> is a container of <code>Node</code>s.  You can search a container, but it doesn&#39;t make sense to search a <code>Node</code> for a <code>Node</code>."}], "answers": [{"comments": [{"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1564001582, "post_id": 57190923, "comment_id": 100891822, "body": "OP appears to have a binary search tree here, so there&#39;s no need to search the entire tree just to find a node. Also, I wouldn&#39;t link to a site which often have <code>#include&lt;bits&#47;stdc++.h&gt;</code> and <code>using namespace std;</code> as the first two lines in their programs."}, {"owner": {"reputation": 7679, "user_id": 896012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/05779413dbb3915fa5b2f3ed82d66007?s=128&d=identicon&r=PG", "display_name": "Gupta", "link": "https://stackoverflow.com/users/896012/gupta"}, "reply_to_user": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1564002591, "post_id": 57190923, "comment_id": 100892175, "body": "@Alexander Zhang You are right. I updated the answer."}, {"owner": {"reputation": 21, "user_id": 11632200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed85fd96a0a1cba45e3bab21bfc94396?s=128&d=identicon&r=PG&f=1", "display_name": "Bad At Cpp", "link": "https://stackoverflow.com/users/11632200/bad-at-cpp"}, "edited": false, "score": 0, "creation_date": 1564004599, "post_id": 57190923, "comment_id": 100892802, "body": "Thanks, Hoodi, apparently recursion always mess things up."}], "tags": [], "owner": {"reputation": 7679, "user_id": 896012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/05779413dbb3915fa5b2f3ed82d66007?s=128&d=identicon&r=PG", "display_name": "Gupta", "link": "https://stackoverflow.com/users/896012/gupta"}, "is_accepted": true, "score": 1, "last_activity_date": 1564036944, "last_edit_date": 1564036944, "creation_date": 1564000896, "answer_id": 57190923, "question_id": 57190140, "link": "https://stackoverflow.com/questions/57190140/how-to-parse-a-large-tree/57190923#57190923", "title": "How to parse a large tree?", "body": "<p>Your code needs lots of activation records on the call stack for repetitive calls to find_node(v). And it may lead to overflow of the call stack.</p>\n\n<p>To avoid it, you can use non-recursive versions of binary search that uses a loop instead. For more information, check <a href=\"http://www.crazyforcode.com/write-code-search-binary-search-tree-bst/\" rel=\"nofollow noreferrer\">this link</a>. </p>\n"}], "owner": {"reputation": 21, "user_id": 11632200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed85fd96a0a1cba45e3bab21bfc94396?s=128&d=identicon&r=PG&f=1", "display_name": "Bad At Cpp", "link": "https://stackoverflow.com/users/11632200/bad-at-cpp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 57190923, "answer_count": 1, "score": 1, "last_activity_date": 1564036944, "creation_date": 1563997073, "last_edit_date": 1563998498, "question_id": 57190140, "link": "https://stackoverflow.com/questions/57190140/how-to-parse-a-large-tree", "title": "How to parse a large tree?", "body": "<p>recently I passed a programming interview where I had to create a method that returns the address of a node (belonging to a tree). The method takes an integer value as an argument.</p>\n\n<p>My code worked on a small tree, but when searching a large tree (300,000 nodes) I got an error stating \"cannot access address '0x.....'\".\nWhat should I do to fix this?  </p>\n\n<p>'''</p>\n\n<pre><code>    struct Node\n    {\n        int value;\n        Node* left = nullptr;\n        Node* right = nullptr;\n        Node* find_node(int);\n    };\n\n   Node* Node::find_node(int v)// The function is working on small trees only\n    {\n      if(this-&gt;value == v) //comparing the the value inside the root with the function's argument\n        return this;\n      else if(this-&gt;value &gt; v) //if v is smaller than the node's value, search the next left node \n      {\n        if(this-&gt;left == nullptr) //checking if the next node on the left exists\n          return nullptr; //null returned if there is no more nodes\n        else\n          return (this-&gt;left)-&gt;find_node(v); //Call the find_node function recursively on the left node \n      }\n      else if(this-&gt;value &lt; v) //if v is bigger than the node's value, search the next right node \n      {\n        if(this-&gt;right == nullptr) //checking if the next node on the left exists\n          return nullptr; //null returned if there is no more nodes\n        else\n          return (this-&gt;right)-&gt;find_node(v);// Call the find_node function recursively on the right node \n      }\n      return nullptr;// If the value is not found\n     }\n</code></pre>\n\n<p>'''</p>\n"}, {"tags": ["c++", "c", "linux"], "comments": [{"owner": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "edited": false, "score": 0, "creation_date": 1563996816, "post_id": 57190054, "comment_id": 100889979, "body": "I&#39;d be interested to hear how it is possible to open a file by more than one handle / process?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "edited": false, "score": 0, "creation_date": 1563996875, "post_id": 57190054, "comment_id": 100890002, "body": "@nada You just call <code>open</code> on it."}, {"owner": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "edited": false, "score": 0, "creation_date": 1563996939, "post_id": 57190054, "comment_id": 100890036, "body": "Didn&#39;t know this was possible :O"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1563996991, "post_id": 57190054, "comment_id": 100890052, "body": "A single process can open the same file multiple times; multiple processes can open the same file too.  A process can duplicate a file descriptor easily.  Processes fork, which duplicates the file descriptors, and may or may not close the file after forking.  There isn&#39;t an easy way to get the number you&#39;re looking for.  It isn&#39;t even particularly clear what number you <i>are</i> looking for.  It might be the number of open file descriptors, or the number of open file descriptions (that&#39;s different) or the number of processes with at least one open file descriptor, or description, or \u2026"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 6, "creation_date": 1563997058, "post_id": 57190054, "comment_id": 100890076, "body": "If you don&#39;t need it programmatically just use <code>lsof</code>."}, {"owner": {"reputation": 10828, "user_id": 1394729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9Ri8.jpg?s=128&g=1", "display_name": "tink", "link": "https://stackoverflow.com/users/1394729/tink"}, "edited": false, "score": 1, "creation_date": 1563998316, "post_id": 57190054, "comment_id": 100890586, "body": "Or <code>fuser</code> if <code>lsof</code> seems like overkill ..."}, {"owner": {"reputation": 2017, "user_id": 6861219, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/141586299631822/picture?type=large", "display_name": "Ziqi Liu", "link": "https://stackoverflow.com/users/6861219/ziqi-liu"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1563998481, "post_id": 57190054, "comment_id": 100890659, "body": "@JonathanLeffler We can assume no <code>fork</code> and one process will open only one time. Actually I just want to use a file to keep track of a group of processes who is still alive, so every process will open that file when it start."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1563998679, "post_id": 57190054, "comment_id": 100890750, "body": "Candidate originals <a href=\"https://stackoverflow.com/questions/22803498/how-can-i-see-how-many-times-i-have-used-fopen-on-a-file\">here</a> and <a href=\"https://stackoverflow.com/questions/24546155/determine-how-many-times-file-is-mapped-into-memory\">here</a>. Of course, the information is stale immediately upon acquisition, as other processes can open or close a file at any moment."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1564002639, "post_id": 57190054, "comment_id": 100892192, "body": "You are going to need to use some Linux API (if one exists).  Both the C and C++ (separate languages), don&#39;t have standard functionality to query file attributes."}, {"owner": {"reputation": 1118, "user_id": 8074683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e8Ik8.jpg?s=128&g=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/8074683/anton"}, "edited": false, "score": 1, "creation_date": 1564050297, "post_id": 57190054, "comment_id": 100907480, "body": "File status is not intended for IPC (Inter-Process Communication). And IPC is what you need. See <a href=\"https://stackoverflow.com/a/404622/8074683\">stackoverflow.com/a/404622/8074683</a>."}, {"owner": {"reputation": 120, "user_id": 4715389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d10f6d07d137a6b5c5074ebbf137318?s=128&d=identicon&r=PG", "display_name": "Alex Wang", "link": "https://stackoverflow.com/users/4715389/alex-wang"}, "edited": false, "score": 0, "creation_date": 1566216607, "post_id": 57190054, "comment_id": 101574571, "body": "May I ask what is your purpose for accessing it?"}], "owner": {"reputation": 2017, "user_id": 6861219, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/141586299631822/picture?type=large", "display_name": "Ziqi Liu", "link": "https://stackoverflow.com/users/6861219/ziqi-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563996704, "creation_date": 1563996704, "question_id": 57190054, "link": "https://stackoverflow.com/questions/57190054/can-i-know-how-many-processes-are-opening-a-same-file-in-c-c", "title": "Can I know how many processes are opening a same file in C/C++?", "body": "<p>Is there a 'reference count' on a file that maintains how many processes are opening a file in C/C++? Or is there any alternative approach to do so? I've looked at <code>fstat</code> but it seems that it doesn't provide such information.</p>\n"}, {"tags": ["c++", "unity3d", "uwp", "task", "iasyncoperation"], "comments": [{"owner": {"reputation": 2528, "user_id": 4658169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b351ed2ce7ddde5ab5ac9bd96200a62d?s=128&d=identicon&r=PG&f=1", "display_name": "CuriouslyRecurringThoughts", "link": "https://stackoverflow.com/users/4658169/curiouslyrecurringthoughts"}, "edited": false, "score": 0, "creation_date": 1563999390, "post_id": 57190029, "comment_id": 100891030, "body": "I know nothing about UWP, but, the first then returns something like   task&lt;SomeClass::TaskResults&gt;, so, shouldn&#39;t the second then take as input SomeClass::TaskResults? See here, section &quot;Creating a chain of tasks&quot;: <a href=\"https://docs.microsoft.com/en-us/windows/uwp/threading-async/asynchronous-programming-in-cpp-universal-windows-platform-apps\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/uwp/threading-async/&hellip;</a>"}, {"owner": {"reputation": 2528, "user_id": 4658169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b351ed2ce7ddde5ab5ac9bd96200a62d?s=128&d=identicon&r=PG&f=1", "display_name": "CuriouslyRecurringThoughts", "link": "https://stackoverflow.com/users/4658169/curiouslyrecurringthoughts"}, "edited": false, "score": 0, "creation_date": 1564007859, "post_id": 57190029, "comment_id": 100893681, "body": "In my opinion the second <code>then</code> should be something like:          <code>.then([this](TaskResults^ res)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 5398, "user_id": 11602935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a4e672481f67041c0a2206bbf0cf104?s=128&d=identicon&r=PG&f=1", "display_name": "Faywang - MSFT", "link": "https://stackoverflow.com/users/11602935/faywang-msft"}, "is_accepted": false, "score": 0, "last_activity_date": 1564130837, "creation_date": 1564130837, "answer_id": 57216370, "question_id": 57190029, "link": "https://stackoverflow.com/questions/57190029/task-continuation-with-iasyncoperation-in-uwp/57216370#57216370", "title": "Task continuation with IAsyncOperation in UWP", "body": "<p>The reason this exception occurred is that you didn't return the ResultsWrapper^ type in the task chains.The second <strong>return</strong> you wrote means pass the value to the next chain to use instead of returning the value of the task.So you should write like the following code to return value correctly.</p>\n\n<pre><code>IAsyncOperation&lt;ResultsWrapper^&gt;^ SomeClass::SomeClassUpdateMethod() \n{\n\n    return concurrency::create_async([this]() -&gt; concurrency::task&lt;ResultsWrapper^&gt;\n    { \n\n        SomeClass::isBusy = true;\n\n        return LongRunningTask().then([this]() -&gt; ResultsWrapper^\n        {\n            isBusy = false;\n            return SomeClass::TaskResults; \n        });\n    });\n}\n</code></pre>\n\n<p>The code <strong>\"return LongRunningTask().then(this ->ResultsWrapper^)\"</strong> means convert the ResultsWrapper^ object to a task and return the task.</p>\n\n<p>The return value of <strong>\"LongRunningTask\"</strong> method is <code>task&lt;void&gt;</code>,so you still need to return a <code>task&lt;void&gt;</code> value.</p>\n\n<pre><code>concurrency::task&lt;void&gt; SomeClass::LongRunningTask()\n{\n    return concurrency::create_task(\n    [this]()\n    {\n        auto results = ref new TaskResults();\n        '''Work happens here'''\n\n        SomeClass::TaskResults = results;\n    });\n\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9922185, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TMbGvQSnwUI/AAAAAAAAAAI/AAAAAAAABuE/Xpbl_a5ufPU/photo.jpg?sz=128", "display_name": "Taylor Frantz", "link": "https://stackoverflow.com/users/9922185/taylor-frantz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 310, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564130837, "creation_date": 1563996583, "last_edit_date": 1564040481, "question_id": 57190029, "link": "https://stackoverflow.com/questions/57190029/task-continuation-with-iasyncoperation-in-uwp", "title": "Task continuation with IAsyncOperation in UWP", "body": "<p>I have a c++ class object which performs some processing in the background of a uwp application. </p>\n\n<p>Its process operation is called by Unity's \"Update\" method ~60fps through an UWP <code>IAsyncOperation</code>.</p>\n\n<p>The class has a <code>isBusy</code> property which is set to <code>true</code> after calling the operation, in order to block it being called from unity again before it finishes.</p>\n\n<p>Using task continuation, I would like to set this to false after the processing is complete and returned through the <code>IAsyncOperation</code>.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>\nIAsyncOperation&lt;ResultsWrapper^&gt;^ SomeClass::SomeClassUpdateMethod() {\n\n    return concurrency::create_async([this]() -&gt; ResultsWrapper^\n    { \n        // Block processing\n        SomeClass::isBusy = true;\n\n        // Process image and return to await\n        LongRunningTask().then([this]() {\n            return SomeClass::TaskResults; \n        }).then([this]() {\n            isBusy = false;\n        });\n    });\n}\n\nconcurrency::task&lt;void&gt; SomeClass::LongRunningTask(){\n\n    auto results = ref new TaskResults();\n\n    '''Work happens here'''\n\n    SomeClass::TaskResults = results;\n}\n\n\n</code></pre>\n\n<p>What I expect to happen is for the <code>ResultWrapper</code> object to be returned to the main thread of the calling application (Unity), then the <code>isBusy</code> flag of the object set to false by the task continuation.</p>\n\n<p>What happens is:</p>\n\n<pre><code>Error C2338 incorrect parameter type for the callable object in 'then'; consider _ExpectedParameterType or task&lt;_ExpectedParameterType&gt; (see below) \\....\\include\\ppltasks.h\n</code></pre>\n"}, {"tags": ["python", "c++"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 6388163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41d34a9839bacbfca83e7908a90c48d6?s=128&d=identicon&r=PG&f=1", "display_name": "fuse117", "link": "https://stackoverflow.com/users/6388163/fuse117"}, "edited": false, "score": 0, "creation_date": 1564001754, "post_id": 57190178, "comment_id": 100891888, "body": "I have tried JSON, but it is not performant enough.  My data is entirely numeric and there is lots of it (it is a scientific instrument).  My current idea is to generate a JSON file of the struct that represents each record (dtype like format), but I am falling short."}], "tags": [], "owner": {"reputation": 835, "user_id": 733538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/841e663f279069238dc93a0a62dc744e?s=128&d=identicon&r=PG", "display_name": "Piotr", "link": "https://stackoverflow.com/users/733538/piotr"}, "is_accepted": false, "score": 1, "last_activity_date": 1563997245, "creation_date": 1563997245, "answer_id": 57190178, "question_id": 57189952, "link": "https://stackoverflow.com/questions/57189952/how-to-autogenerate-python-data-parser-for-c-structs/57190178#57190178", "title": "How to autogenerate python data parser for C++ structs?", "body": "<ul>\n<li>Consider using data serialization system / format that has C++ and Python bindings: <a href=\"https://en.wikipedia.org/wiki/Comparison_of_data-serialization_formats\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Comparison_of_data-serialization_formats</a>\n(e.g. protobuf or even json or csv) </li>\n<li>Alternatively consider writing a library in C that reads the data end exposes them as structures. Then use: <a href=\"https://docs.python.org/3.7/library/ctypes.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3.7/library/ctypes.html</a> to call this C library and retrieve records</li>\n</ul>\n\n<p>Of course if semantics of the data changes (e.g. new important field needs to by analyzed) you will have to handle that new stuff in the python code. No free lunch. </p>\n"}], "owner": {"reputation": 55, "user_id": 6388163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41d34a9839bacbfca83e7908a90c48d6?s=128&d=identicon&r=PG&f=1", "display_name": "fuse117", "link": "https://stackoverflow.com/users/6388163/fuse117"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1563997245, "creation_date": 1563996326, "question_id": 57189952, "link": "https://stackoverflow.com/questions/57189952/how-to-autogenerate-python-data-parser-for-c-structs", "title": "How to autogenerate python data parser for C++ structs?", "body": "<p>I have a C++ based application logging data to files and I want to load that data in Python so I can explore it.  The data files are flat files with a known number of records per file. The data records are represented as a struct (nested structs) in my C++ application. This struct (subtructs) change regularly during my development process, so I also have to make associated changes to my Python code that loads the data. This is obviously tedious and doesn't scale well. What I am interested in is a way to automate the process of updating the Python code (or some other way to handle this problem altogether). I am exploring some libraries that convert my C++ structs to other formats such as JSON, but I have yet to find a solid solution.  Can anyone suggest something?</p>\n"}, {"tags": ["android", "c++", "cmake", "android-ndk"], "comments": [{"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1564035492, "post_id": 57189936, "comment_id": 100899502, "body": "For Android application, you must supply a shared library. You will find it easier not to use static libraries to build this shared library, but add all relevant sources to the shared one."}, {"owner": {"reputation": 1136, "user_id": 5147158, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7f5a49ac25a325cbd8293c5c6793c40f?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Lenkefi", "link": "https://stackoverflow.com/users/5147158/peter-lenkefi"}, "reply_to_user": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1564036365, "post_id": 57189936, "comment_id": 100899886, "body": "@AlexCohn I know, the final product is a shared library, but it was missing the <code>ANativeActivity_onCreate</code>. That&#39;s why I started looking into the static library compiled from this glue C source file and found that all the symbols are &quot;invalid&quot;. Do you think it would make a difference if I didn&#39;t do this in multiple steps?"}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1564047156, "post_id": 57189936, "comment_id": 100905667, "body": "Building a NativeActivity is usually done via <code>libnative_app_glue.a</code>, see <a href=\"https://developer.android.com/ndk/samples/sample_na\" rel=\"nofollow noreferrer\">developer.android.com/ndk/samples/sample_na</a>. But the instructions there have never been updated for CMake, so it could be easier to add the <code>android_native_app_glue.c</code> file to your shared lib."}, {"owner": {"reputation": 1136, "user_id": 5147158, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7f5a49ac25a325cbd8293c5c6793c40f?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Lenkefi", "link": "https://stackoverflow.com/users/5147158/peter-lenkefi"}, "reply_to_user": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 1, "creation_date": 1564054329, "post_id": 57189936, "comment_id": 100909681, "body": "@AlexCohn So... Compiling directly to the target actually worked. I have no idea why. I&#39;ll investigate further. If you want, make it an answer, I&#39;ll accept it and maybe add additional information if I find out what causes this behavior."}], "answers": [{"comments": [{"owner": {"reputation": 1136, "user_id": 5147158, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7f5a49ac25a325cbd8293c5c6793c40f?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Lenkefi", "link": "https://stackoverflow.com/users/5147158/peter-lenkefi"}, "edited": false, "score": 0, "creation_date": 1564033031, "post_id": 57190955, "comment_id": 100898557, "body": "<code>target_link_libraries(mylib -u ANativeActivity_onCreate native_app_glue)</code> would not work, since the <code>native_app_glue</code> library already has invalid entries for those functions (see my original post, <code>nm</code> output). Also, for some reason, all my linker flags are passed through <code>ar</code>, which doesn&#39;t recognize any of these flags."}], "tags": [], "owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "is_accepted": false, "score": 1, "last_activity_date": 1564001027, "creation_date": 1564001027, "answer_id": 57190955, "question_id": 57189936, "link": "https://stackoverflow.com/questions/57189936/compiling-native-app-glue-c-results-in-an-invalid-library-file/57190955#57190955", "title": "Compiling native_app_glue.c results in an invalid library file", "body": "<p>The linker attempts to prune any unused symbols that come from non-whole static libraries, and <code>ANativeActivity</code> is not used directory but rather is intended for re-export.</p>\n\n<p>You can either link <code>libnative_app_glue</code> as a whole archive, or use <code>-u</code> to prevent the symbol from being dropped.</p>\n\n<p>With <code>-u</code>:</p>\n\n<pre><code>target_link_libraries(mylib -u ANativeActivity_onCreate native_app_glue)\n</code></pre>\n\n<p>With whole archives:</p>\n\n<pre><code>target_link_libraries(mylib -Wl,--whole-archive native_app_glue -Wl,--no-whole-archive)\n</code></pre>\n\n<p>I haven't actually tested either of these with CMake. The ndk-build equivalents are known to work though.</p>\n\n<p>You might also be able to use an <a href=\"https://cmake.org/cmake/help/v3.9/manual/cmake-buildsystem.7.html#object-libraries\" rel=\"nofollow noreferrer\">object library</a>, which is the CMake flavor of whole archives.</p>\n"}, {"tags": [], "owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "is_accepted": true, "score": 1, "last_activity_date": 1564064812, "last_edit_date": 1564064812, "creation_date": 1564064340, "answer_id": 57204190, "question_id": 57189936, "link": "https://stackoverflow.com/questions/57189936/compiling-native-app-glue-c-results-in-an-invalid-library-file/57204190#57204190", "title": "Compiling native_app_glue.c results in an invalid library file", "body": "<p>Building a NativeActivity is usually done via libnative_app_glue.a, see <a href=\"https://developer.android.com/ndk/samples/sample_na\" rel=\"nofollow noreferrer\">https://developer.android.com/ndk/samples/sample_na</a>.</p>\n\n<p>Unfortunately, the instructions there have never been updated for CMake, so it could be easier to add the android_native_app_glue.c file to your shared lib.</p>\n"}], "owner": {"reputation": 1136, "user_id": 5147158, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7f5a49ac25a325cbd8293c5c6793c40f?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Lenkefi", "link": "https://stackoverflow.com/users/5147158/peter-lenkefi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 57204190, "answer_count": 2, "score": 0, "last_activity_date": 1564064812, "creation_date": 1563996261, "question_id": 57189936, "link": "https://stackoverflow.com/questions/57189936/compiling-native-app-glue-c-results-in-an-invalid-library-file", "title": "Compiling native_app_glue.c results in an invalid library file", "body": "<p>I'm cross-compiling a C++ library to Android. I'm using CMake as my build generator and I'm using the toolchain file provided in the NDK (called <code>android.toolchain.cmake</code>). Note, I'm on Windows.</p>\n\n<p>I'd like to compile the <code>android_native_app_glue.c</code> source - also provided by the NDK - to a static library so I can later link it to my final application. After having an error, that said I'm missing the symbol <code>ANativeActivity_onCreate</code>, I've started investigating. <code>ANativeActivity_onCreate</code> is a function defined in <code>android_native_app_glue.c</code>, so I've looked at the compiled library using <code>nm -o libnative_glue.a</code> and it was quite surprising to see this:</p>\n\n<pre><code>libnative_glue.a:android_native_app_glue.c.o:0000000000000000 T ANativeActivity_onCreate\nlibnative_glue.a:android_native_app_glue.c.o:0000000000000000 t android_app_create\nlibnative_glue.a:android_native_app_glue.c.o:0000000000000000 t android_app_destroy\nlibnative_glue.a:android_native_app_glue.c.o:0000000000000000 t android_app_entry\nlibnative_glue.a:android_native_app_glue.c.o:0000000000000000 t android_app_free\n...\n</code></pre>\n\n<p>Basically my functions are \"there\", but are zero-sized. I'm assuming they are thrown away at the next link, since they are not valid - looking at the next artifact with <code>nm</code> confirmed that.</p>\n\n<p>The CMake snippet to compile the library is fairly trivial, but I'll provide it for completeness's sake:</p>\n\n<pre><code>add_library(native_glue STATIC \"${CMAKE_ANDROID_NDK}/sources/android/native_app_glue/android_native_app_glue.c\")\n</code></pre>\n\n<p>I have two pre-defined cache-entries for CMake, <code>ANDROID_ABI=arm64-v8a</code> and <code>ANDROID_PLATFORM=24</code>.</p>\n\n<p>What could cause this invalid library compilation?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1563995977, "post_id": 57189804, "comment_id": 100889604, "body": "If C++ templates are Turing complete then the answer is probably yes. But it might not be pretty."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1563996379, "post_id": 57189804, "comment_id": 100889786, "body": "I would imagine you could accomplish this using an index sort.  If you can get an <code>integer_sequence</code> of the final indexes then you can build a tuple of the sorted types using the <code>integer_sequence</code> and what type you would <code>get</code> from the index in the sequence."}, {"owner": {"reputation": 7675, "user_id": 2923952, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/71908bd318301d831c4b9eb6ca1c13a2?s=128&d=identicon&r=PG&f=1", "display_name": "Siler", "link": "https://stackoverflow.com/users/2923952/siler"}, "edited": false, "score": 0, "creation_date": 1564001701, "post_id": 57189804, "comment_id": 100891864, "body": "But creating an index_sequence has the same problem as creating a tuple... you need to conditionally generate a new type based on a value compare.  Each index_sequence with different indices is an entirely different type"}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1563999354, "creation_date": 1563999354, "answer_id": 57190623, "question_id": 57189804, "link": "https://stackoverflow.com/questions/57189804/compile-time-sort-of-heterogenous-tuples/57190623#57190623", "title": "Compile time sort of heterogenous tuples", "body": "<p>I believe, it can not be done.</p>\n\n<p>The essential part of any sorting would be to use tuple value in <code>if constexpr</code> context, but since function arguments are not constexpr, they can not appear in <code>if constexpr</code>. </p>\n\n<p>And since tuples can't be non-type template arguments, template-based solution can't be implemented either. Unless we make tuple of type-encoded values (like <code>std::integral_constant</code>) I believe the solution is not available.</p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 0, "last_activity_date": 1564001523, "creation_date": 1564001523, "answer_id": 57191066, "question_id": 57189804, "link": "https://stackoverflow.com/questions/57189804/compile-time-sort-of-heterogenous-tuples/57191066#57191066", "title": "Compile time sort of heterogenous tuples", "body": "<p>Return type cannot depend of value of parameters (even more as parameter cannot be <code>constexpr</code>) of a function, so</p>\n\n<pre><code>constexpr std::tuple&lt;long, int, float&gt; t1(2, 1, 3);\nconstexpr std::tuple&lt;long, int, float&gt; t2(3, 2, 1);\nstatic_assert(std::is_same&lt;decltype(tuple_sort(t1), decltype(tuple_sort(t2)&gt;::value, \"!\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "is_accepted": true, "score": 3, "last_activity_date": 1564174466, "last_edit_date": 1564174466, "creation_date": 1564004321, "answer_id": 57191606, "question_id": 57189804, "link": "https://stackoverflow.com/questions/57189804/compile-time-sort-of-heterogenous-tuples/57191606#57191606", "title": "Compile time sort of heterogenous tuples", "body": "<p>To preface the answer, it might be vastly more straightforward to use Boost.Hana. The prerequisite for Hana is that your comparison produces a compile-time answer. In your case, this would require a Hana tuple containing compile-time versions of these basic data types, similar to <code>std::integral_constant</code>. If it's acceptable to have your tuples' values encoded entirely in their types, Hana makes this trivial.</p>\n\n<hr>\n\n<p>I believe it would be possible to do this directly once you can use a tuple as a non-type template parameter in C++20. Until then, you can get pretty close (<a href=\"https://gcc.godbolt.org/z/3QYYsr\" rel=\"nofollow noreferrer\">live example</a>):</p>\n\n<pre><code>int main() {\n    constexpr std::tuple&lt;long, int, float&gt; t(2,1,3);\n    call_with_sorted_tuple(t, [](const auto&amp; sorted) {\n        assert((sorted == std::tuple&lt;int, long, float&gt;(1,2,3)));\n    });\n}\n</code></pre>\n\n<p>As far as I know, it is impossible to return the sorted tuple directly; the callback approach is required because it is instantiated with every possible tuple type and only the correct one is actually run. <strong>This means there is significant compile-time overhead to this approach. The compile times grow quickly with small tuple size increases.</strong></p>\n\n<p>Now, how does this actually work? Let's get the magic out of the way\u2014converting a runtime integral value into a compile-time one. This can fit well into its own header, and is shamelessly stolen from <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0376r0.html\" rel=\"nofollow noreferrer\">P0376</a>:</p>\n\n<pre><code>// http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0376r0.html\n\n#include &lt;array&gt;\n#include &lt;type_traits&gt;\n#include &lt;utility&gt;\n\n// A function that invokes the provided function with\n// a std::integral_constant of the specified value and offset.\ntemplate &lt;class ReturnType, class T, T Value, T Offset, class Fun&gt;\nconstexpr ReturnType invoke_with_constant_impl(Fun&amp;&amp; fun) {\n  return std::forward&lt;Fun&gt;(fun)(\n      std::integral_constant&lt;T, Value + Offset&gt;());\n}\n\n// Indexes into a constexpr table of function pointers\ntemplate &lt;template &lt;class...&gt; class ReturnTypeDeducer,\n          class T, T Offset, class Fun, class I, I... Indices&gt;\nconstexpr decltype(auto) invoke_with_constant(Fun&amp;&amp; fun, T index,\n                                              std::integer_sequence&lt;I, Indices...&gt;) {\n  // Each invocation may potentially have a different return type, so we\n  // need to use the ReturnTypeDeducer to figure out what we should\n  // actually return.\n  using return_type\n      = ReturnTypeDeducer&lt;\n          decltype(std::declval&lt;Fun&gt;()(std::integral_constant&lt;T, Indices + Offset&gt;()))...&gt;;\n\n  return std::array&lt;return_type(*)(Fun&amp;&amp;), sizeof...(Indices)&gt;{\n      {{invoke_with_constant_impl&lt;return_type, T, Indices, Offset, Fun&gt;}...}}\n      [index - Offset](std::forward&lt;Fun&gt;(fun));\n}\n\ntemplate &lt;class T, T BeginValue, T EndValue&gt;\nstruct to_constant_in_range_impl {\n  // Instantiations of \"type\" are used as the Provider\n  // template argument of argument_provider.\n  template &lt;class U&gt;\n  struct type\n  {    \n    template &lt;template &lt;class...&gt; class ReturnTypeDeducer, class Fun, class Self&gt;\n    static constexpr decltype(auto) provide(Fun&amp;&amp; fun, Self&amp;&amp; self) {\n      return invoke_with_constant&lt;ReturnTypeDeducer, T, BeginValue&gt;(\n        std::forward&lt;Fun&gt;(fun),\n        std::forward&lt;Self&gt;(self).value,\n        std::make_index_sequence&lt;EndValue - BeginValue&gt;());\n    }\n\n    U&amp;&amp; value;\n  };\n};\n</code></pre>\n\n<p>Now one thing to note is that I use C++20's ability to give lambdas template parameters simply because compilers already support this and it makes turning <code>index_sequence</code>s into parameter packs really easy. The long way to do this is available prior to C++20, but a bit of an eyesore on top of code that's already hard enough to get through.</p>\n\n<p>The sort itself isn't too bad despite the tuple needing compile-time indices for <code>std::get</code> (unless you reuse the above magic, but all I have to say to that is yikes). You can change the algorithm as needed. You can even use a regular <code>std::vector</code> in C++20 and push indices onto the back. What I chose to do is generate a <code>std::array</code> containing the sorted-order indices of the tuple:</p>\n\n<pre><code>// I had trouble with constexpr std::swap library support on compilers.\ntemplate&lt;typename T&gt;\nconstexpr void constexpr_swap(T&amp; a, T&amp; b) {\n    auto temp = std::move(a);\n    a = std::move(b);\n    b = std::move(temp);\n}\n\ntemplate&lt;std::size_t I&gt;\nusing index_c = std::integral_constant&lt;std::size_t, I&gt;;\n\ntemplate&lt;typename... Ts&gt;\nconstexpr auto get_index_order(const std::tuple&lt;Ts...&gt; tup) {\n    return [&amp;]&lt;std::size_t... Is&gt;(std::index_sequence&lt;Is...&gt; is) {\n        std::array&lt;std::size_t, sizeof...(Is)&gt; indices{Is...};\n\n        auto do_swap = [&amp;]&lt;std::size_t I, std::size_t J&gt;(index_c&lt;I&gt;, index_c&lt;J&gt;) {\n            if (J &lt;= I) return;\n            if (std::get&lt;I&gt;(tup) &lt; std::get&lt;J&gt;(tup)) return;\n\n            constexpr_swap(indices[I], indices[J]);\n        };\n\n        auto swap_with_min = [&amp;]&lt;std::size_t I, std::size_t... Js&gt;(index_c&lt;I&gt; i, std::index_sequence&lt;Js...&gt;) {\n            (do_swap(i, index_c&lt;Js&gt;{}), ...);\n        };\n\n        (swap_with_min(index_c&lt;Is&gt;{}, is), ...);\n        return indices;\n    }(std::index_sequence_for&lt;Ts...&gt;{});\n}\n</code></pre>\n\n<p>The main idea here is obtaining a pack of indices from 0 to N-1 and then dealing with each individually. Rather than trying to generate a second pack from I+1 to N-1, I took the easy road and reused the 0 to N-1 pack I already had, ignoring all out-of-order combinations when swapping. The dance with <code>index_c</code> is to avoid calling the lambdas via awkward <code>lambda.template operator()&lt;...&gt;(...)</code> syntax.</p>\n\n<p>Now we have the indices of the tuple in sorted order and magic to convert <strong>one</strong> index to  one with its value encoded in the type. Rather than build the magic to handle multiple values, I took the probably-suboptimal approach to build on the support for one at a time by making a recursive function:</p>\n\n<pre><code>template&lt;typename... Ts, typename F, std::size_t... Converted&gt;\nconstexpr void convert_or_call(const std::tuple&lt;Ts...&gt; tup, F f, const std::array&lt;std::size_t, sizeof...(Ts)&gt;&amp; index_order, std::index_sequence&lt;Converted...&gt;) {\n    using Range = typename to_constant_in_range_impl&lt;std::size_t, 0, sizeof...(Ts)&gt;::template type&lt;const std::size_t&amp;&gt;;\n\n    if constexpr (sizeof...(Converted) == sizeof...(Ts)) {\n        f(std::tuple{std::get&lt;Converted&gt;(tup)...});\n    } else {\n        Range r{index_order[sizeof...(Converted)]};\n        r.template provide&lt;std::void_t&gt;([&amp;]&lt;std::size_t Next&gt;(index_c&lt;Next&gt;) {\n            convert_or_call(tup, f, index_order, std::index_sequence&lt;Converted..., Next&gt;{});\n        }, r);\n    }\n}\n</code></pre>\n\n<p>I would have made this a lambda to avoid repeating captures, but as its recursive, it needs a workaround to call itself in lambda form. I'd be happy to hear of a good, constexpr-compatible solution for lambdas in this case that takes into account the fact that the lambda's template arguments differ each call.</p>\n\n<p>Anyway, this is the use of the magic. We want to call this a total of N times, where N is the tuple size. That's what the <code>if constexpr</code> checks for, and finally delegates to the function passed from <code>main</code>, easily building a new tuple from the compile-time index order sequence. To recurse, we add on this compile-time index to a list we build up.</p>\n\n<p>Finally, since what should have been a lambda is its own function, the function called from <code>main</code> is a simple wrapper that gets the index-order array and starts off the runtime-sequence-to-compile-time-sequence recursion with nothing converted to start:</p>\n\n<pre><code>template&lt;typename... Ts, typename F&gt;\nconstexpr void call_with_sorted_tuple(const std::tuple&lt;Ts...&gt;&amp; tup, F f) {\n    auto index_order = get_index_order(tup);\n    convert_or_call(tup, f, index_order, std::index_sequence&lt;&gt;{});\n}\n</code></pre>\n"}], "owner": {"reputation": 7675, "user_id": 2923952, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/71908bd318301d831c4b9eb6ca1c13a2?s=128&d=identicon&r=PG&f=1", "display_name": "Siler", "link": "https://stackoverflow.com/users/2923952/siler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 1, "accepted_answer_id": 57191606, "answer_count": 3, "score": 2, "last_activity_date": 1564174466, "creation_date": 1563995702, "last_edit_date": 1564006060, "question_id": 57189804, "link": "https://stackoverflow.com/questions/57189804/compile-time-sort-of-heterogenous-tuples", "title": "Compile time sort of heterogenous tuples", "body": "<p>I know it's possible to use the C++ type system to generate a sorted type list from an existing tuple type.  </p>\n\n<p>Examples of doing this can be found at:</p>\n\n<p><a href=\"https://codereview.stackexchange.com/questions/131194/selection-sorting-a-type-list-compile-time\">https://codereview.stackexchange.com/questions/131194/selection-sorting-a-type-list-compile-time</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/48723974/how-to-order-types-at-compile-time\">How to order types at compile-time?</a></p>\n\n<p>However, is it possible to do a compile-time sort of a heterogeneous tuple <em>by value</em>?  For example:</p>\n\n<pre><code>constexpr std::tuple&lt;long, int, float&gt; t(2,1,3);\nconstexpr std::tuple&lt;int, long, float&gt; t2 = tuple_sort(t);\nassert(t2 == std::tuple&lt;int, long, float&gt;(1,2,3));\n</code></pre>\n\n<p>My assumption is this is not possible, since you'd have to conditionally generate new tuple <em>types</em> based on the result of comparing values.  Even if the comparison function uses <code>constexpr</code>, it would seem that this can't work.</p>\n\n<p>However, an offhand comment from <a href=\"https://stackoverflow.com/a/46006026/2923952\">this answer</a> indicates it somehow <em>is</em> possible to do this, just very difficult:</p>\n\n<blockquote>\n  <p>I lied. You can do it if the values and the compare function are\n  constexpr, but the code to pull it off will be huge and not worth the\n  time to write.</p>\n</blockquote>\n\n<p>So is this comment correct?  How could this even be conceptually possible, given the way the C++ type system works.  </p>\n"}, {"tags": ["c++", "visual-studio-2017", "resharper", "glm-math"], "comments": [{"owner": {"reputation": 2528, "user_id": 4658169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b351ed2ce7ddde5ab5ac9bd96200a62d?s=128&d=identicon&r=PG&f=1", "display_name": "CuriouslyRecurringThoughts", "link": "https://stackoverflow.com/users/4658169/curiouslyrecurringthoughts"}, "edited": false, "score": 0, "creation_date": 1563996255, "post_id": 57189725, "comment_id": 100889726, "body": "As far as I can tell vec3 is an alias for vec and your compiler correctly understands this, see that it is talking about glm::vec&lt;3,float,0&gt; but it does not find glm::vec. As far as I can see the definition of vec is here: <a href=\"https://github.com/g-truc/glm/blob/master/glm/detail/type_vec3.hpp\" rel=\"nofollow noreferrer\">github.com/g-truc/glm/blob/master/glm/detail/type_vec3.hpp</a>. Do you have the file? Are you including it? You can find the typedef at <a href=\"https://github.com/g-truc/glm/blob/master/glm/fwd.hpp\" rel=\"nofollow noreferrer\">github.com/g-truc/glm/blob/master/glm/fwd.hpp</a>"}, {"owner": {"reputation": 2528, "user_id": 4658169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b351ed2ce7ddde5ab5ac9bd96200a62d?s=128&d=identicon&r=PG&f=1", "display_name": "CuriouslyRecurringThoughts", "link": "https://stackoverflow.com/users/4658169/curiouslyrecurringthoughts"}, "edited": false, "score": 0, "creation_date": 1563998148, "post_id": 57189725, "comment_id": 100890512, "body": "Moreover is the file vector_float3.hpp available?"}, {"owner": {"reputation": 150, "user_id": 1583971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9050b12fad787efea1b3f2ba3327342c?s=128&d=identicon&r=PG", "display_name": "FilippoL", "link": "https://stackoverflow.com/users/1583971/filippol"}, "edited": false, "score": 0, "creation_date": 1564000690, "post_id": 57189725, "comment_id": 100891511, "body": "weird, code should work fine. What is your build toolset (compiler, build system) and how did you get glm? You say is underlined, who says that? The IDE or the compiler?"}], "answers": [{"tags": [], "owner": {"reputation": 1187, "user_id": 5712330, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzKU4.png?s=128&g=1", "display_name": "Igor Akhmetov", "link": "https://stackoverflow.com/users/5712330/igor-akhmetov"}, "is_accepted": true, "score": 1, "last_activity_date": 1564129532, "creation_date": 1564129532, "answer_id": 57215999, "question_id": 57189725, "link": "https://stackoverflow.com/questions/57189725/incomplete-type-warning-at-use-of-glmvec3-in-vs-with-resharper/57215999#57215999", "title": "&#39;Incomplete type&#39; warning at use of glm::vec3 in VS with ReSharper", "body": "<p>Please update to the latest ReSharper version - there was a bug in the initial 2019.1 release which could cause this (see <a href=\"http://youtrack.jetbrains.com/issue/RSCPP-26279\" rel=\"nofollow noreferrer\">RSCPP-26279</a> for details).</p>\n"}], "owner": {"reputation": 23, "user_id": 10716577, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JFiLSxMzqyo/AAAAAAAAAAI/AAAAAAAAAF0/33M0QJg4B9M/photo.jpg?sz=128", "display_name": "Mizumaky", "link": "https://stackoverflow.com/users/10716577/mizumaky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 370, "favorite_count": 0, "accepted_answer_id": 57215999, "answer_count": 1, "score": 2, "last_activity_date": 1564129532, "creation_date": 1563995346, "last_edit_date": 1564048173, "question_id": 57189725, "link": "https://stackoverflow.com/questions/57189725/incomplete-type-warning-at-use-of-glmvec3-in-vs-with-resharper", "title": "&#39;Incomplete type&#39; warning at use of glm::vec3 in VS with ReSharper", "body": "<p>I'm following an OpenGL tutorial and I have a simple .h file where I made a struct that makes up the format for a vertex. I'm getting an incomplete type error at a glm::vec3 field. This is the first time I try to use the glm library. Do you have any idea what am I missing out?</p>\n\n<p>I read some answers about incomplete types, but all of them seem to be talking about recursive inclusion, which I don't seem to have.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#pragma once\n#include &lt;glm/glm.hpp&gt;\n\nstruct VertexFormat {\n    glm::vec3 position; //error here\n\n    VertexFormat(const glm::vec3 &amp;pos) {\n        position = pos; //and here\n    }\n};\n</code></pre>\n\n<p>The word vec3 is underlined with \"Type 'glm::vec&lt;3, float, 0>' is incomplete\" and then the word position with \"Cannot assign to an incomplete type 'glm::vec&lt;3, float, 0>'\"</p>\n\n<p><strong>Edit:</strong>\nThe problem is in the IDE - I just commented other unfinished parts of the code so that I can compile, tried to write some code using VertexFormat and it compiles and runs just fine (still stays underlined with red though). I'm using Visual Studio 2017 with ReSharper Ultimate extension. I downloaded glm from the official website and since the lib is header only I just copied the glm folder with header files into my solution directory inside /include where I also have another folder GL with GLEW and FreeGLUT in it (which work fine). The glm.hpp #includes all other glm headers in it. In project properties I have $(SolutionDir)/include as an additional include directory.</p>\n"}, {"tags": ["c++", "bit-manipulation", "combinations", "xor"], "comments": [{"owner": {"reputation": 115, "user_id": 5036552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66AXc.jpg?s=128&g=1", "display_name": "ManLaw", "link": "https://stackoverflow.com/users/5036552/manlaw"}, "edited": false, "score": 0, "creation_date": 1563995555, "post_id": 57189677, "comment_id": 100889395, "body": "I\u2019m trying to follow your instructions.  Where is the step where you are supposed to do <code>p XOR q</code>?"}, {"owner": {"reputation": 21, "user_id": 9408725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691568748e6cd0641c8a31ddf82c1d6a?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/9408725/john"}, "reply_to_user": {"reputation": 115, "user_id": 5036552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66AXc.jpg?s=128&g=1", "display_name": "ManLaw", "link": "https://stackoverflow.com/users/5036552/manlaw"}, "edited": false, "score": 0, "creation_date": 1563995974, "post_id": 57189677, "comment_id": 100889602, "body": "@ManLaw Well k is number of times we are supposed to do p xor q. In first testcase k is 1 , p is 0 and n is 3 so we only once replace p with p xor q where q is random number from interval [0,3]"}, {"owner": {"reputation": 21, "user_id": 9408725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691568748e6cd0641c8a31ddf82c1d6a?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/9408725/john"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1563996141, "post_id": 57189677, "comment_id": 100889674, "body": "@harold sorry, it should be n,k and p, I&#39;ve fixed it"}, {"owner": {"reputation": 115, "user_id": 5036552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66AXc.jpg?s=128&g=1", "display_name": "ManLaw", "link": "https://stackoverflow.com/users/5036552/manlaw"}, "edited": false, "score": 0, "creation_date": 1563996545, "post_id": 57189677, "comment_id": 100889854, "body": "I can\u2019t edit your question.  For clarity change &quot;First line of input is the number of test cases.  For each test case, we input n, k, and p, respectively.&quot;"}, {"owner": {"reputation": 21, "user_id": 9408725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691568748e6cd0641c8a31ddf82c1d6a?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/9408725/john"}, "reply_to_user": {"reputation": 115, "user_id": 5036552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66AXc.jpg?s=128&g=1", "display_name": "ManLaw", "link": "https://stackoverflow.com/users/5036552/manlaw"}, "edited": false, "score": 0, "creation_date": 1563996805, "post_id": 57189677, "comment_id": 100889978, "body": "@ManLaw Ok, it&#39;s fixed."}, {"owner": {"reputation": 16538, "user_id": 6770384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kXCNG.png?s=128&g=1", "display_name": "Socowi", "link": "https://stackoverflow.com/users/6770384/socowi"}, "edited": false, "score": 0, "creation_date": 1564048594, "post_id": 57189677, "comment_id": 100906499, "body": "I removed irrelevant details from your question, like the number of test cases and the input format. If you really really really want to go back to the original version you can roll back by clicking on &quot;<i>edited ... ago</i>&quot; and then on &quot;<i>rollback</i>&quot; , however I wouldn&#39;t recommend it, after all we want to focus on the actual problem and not on parsing some list of numbers."}, {"owner": {"reputation": 16538, "user_id": 6770384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kXCNG.png?s=128&g=1", "display_name": "Socowi", "link": "https://stackoverflow.com/users/6770384/socowi"}, "edited": false, "score": 0, "creation_date": 1564048678, "post_id": 57189677, "comment_id": 100906546, "body": "It also could help if you could add a link to the source of the problem. I&#39;ve seen this kind of input format a lot on StackOverflow and think it&#39;s from a website with programming tasks."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 2, "creation_date": 1564049387, "post_id": 57189677, "comment_id": 100906948, "body": "This looks like a math problem instead of a programming problem."}, {"owner": {"reputation": 914, "user_id": 9822560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/870d2a5ff12cb2b1553ee02e5e271dde?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Saulue-Laborde", "link": "https://stackoverflow.com/users/9822560/vincent-saulue-laborde"}, "edited": false, "score": 1, "creation_date": 1564077104, "post_id": 57189677, "comment_id": 100921850, "body": "Is your XOR the bitwise XOR ? Because in the <code>n=3 k=1 p=0</code> case, I fail to see how <code>p = 0 XOR q = q</code> with <code>0&lt;=q&lt;=3</code> could ever give 500000005. Also could you explain why <code>((0+1+2+3)%1000000007)&#47;(4%1000000007) == 500000005</code> ? With the usual definitions of &quot;divide&quot; and &quot;modulo&quot; operations, <a href=\"https://wandbox.org/permlink/tXTHLT82Indf5lyr\" rel=\"nofollow noreferrer\">this is equal to 1.5</a>"}], "owner": {"reputation": 21, "user_id": 9408725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691568748e6cd0641c8a31ddf82c1d6a?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/9408725/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 249, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564048866, "creation_date": 1563995158, "last_edit_date": 1564048866, "question_id": 57189677, "link": "https://stackoverflow.com/questions/57189677/xor-combinations", "title": "XOR combinations", "body": "<p>Can someone give me idea on how to approach the following problem?</p>\n\n<h1>Task</h1>\n\n<p>We are given</p>\n\n<ul>\n<li>an interval [0,<strong>n</strong>]</li>\n<li>a number of steps <strong>k</strong></li>\n<li>a starting number <strong>p</strong></li>\n</ul>\n\n<p>with the constraints 0 \u2264 n,k,p \u2264 1000000000</p>\n\n<p>In every step we randomly select a number q from the interval [0,n] and replace p with p XOR q. We have to calculate the expected value of p after k steps, modulo 1000000007.</p>\n\n<h1>Two Examples With Given Solutions</h1>\n\n<p>In the case of <strong><code>n=3 k=1 p=0</code></strong> the expected value is 500000005 because<br>\n((0+1+2+3)%1000000007)/(4%1000000007) = (6*inverseModulo(4))%1000000007 = 500000005 </p>\n\n<p>In the case of <strong><code>n=4 k=2 p=1</code></strong> the expected value is 320000005.</p>\n\n<h1>My Problem</h1>\n\n<p>I guess that solution has to do something with the bit representation of the numbers because every number has at most 32 bits, but after 5 hours of thinking I still have no idea how to solve this.</p>\n\n<p>Can someone please give hints on what should I do?<br>\nThanks in advance!</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 11508323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52392146cec0fa85b494f3a1c1722562?s=128&d=identicon&r=PG&f=1", "display_name": "Tiphaine", "link": "https://stackoverflow.com/users/11508323/tiphaine"}, "edited": false, "score": 0, "creation_date": 1564046509, "post_id": 57189720, "comment_id": 100905326, "body": "I&#39;ll add that it is a type of writing really confusing. By the way, do not use raw pointer when you don&#39;t need to, the STL provides smart pointers. It is pretty much bad practice, and unless you want to learn pointers (in this case do C not C++) forgot them."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 3, "last_activity_date": 1563995330, "creation_date": 1563995330, "answer_id": 57189720, "question_id": 57189665, "link": "https://stackoverflow.com/questions/57189665/comma-in-object-declaration-with-polymorphism/57189720#57189720", "title": "Comma in object declaration with polymorphism", "body": "<p>In general, multiple entities can be declared on the same line, separated by commas. The initial <em>decl-specifier-seq</em> applies to all entities being declared. Each entity has its own <em>init-declarator</em>.</p>\n\n<p>In your example, the <em>decl-specifier-seq</em> is <code>Base</code>, which means that all the variables being declared have types that have something to do with <code>Base</code>. Following the <em>decl-specifier-seq</em>, there are two <em>init-declarator</em>s, namely <code>*b = new Derived()</code> and <code>x</code>, separated by a comma. Note that the <code>*</code> is not part of the <em>decl-specifier-seq</em>, so it only applies to the one <em>init-declarator</em> it is found in. Thus, your declaration is equivalent to:</p>\n\n<pre><code>Base *b = new Derived();\nBase x;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11699972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/763a2ea32316e8bb2c43aaa743626007?s=128&d=identicon&r=PG&f=1", "display_name": "Roben", "link": "https://stackoverflow.com/users/11699972/roben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563998379, "creation_date": 1563995096, "last_edit_date": 1563998379, "question_id": 57189665, "link": "https://stackoverflow.com/questions/57189665/comma-in-object-declaration-with-polymorphism", "title": "Comma in object declaration with polymorphism", "body": "<p>So recently I had an exam, in which I was given some code inside the main() function (amongst other things) and I was supposed to check wether the code is correct or not. I dont remember the exact code, but it was something like this.</p>\n\n<p><code>Base* b = new Derived(), x;</code></p>\n\n<p>Now I know what <code>Base* b = new Derived()</code> does, but I've never seen|used the comma X piece of code. Like what is it? Where do I find some material to study it?</p>\n"}, {"tags": ["c++", "clang", "clang++", "c++20"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1563995919, "post_id": 57189523, "comment_id": 100889574, "body": "The class definition should be in the hpp file which should be included in both cpp files.    You can&#39;t export a definition, only data."}, {"owner": {"reputation": 904, "user_id": 5050343, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b76e4883291c85f8a34463b92510fc96?s=128&d=identicon&r=PG&f=1", "display_name": "sms", "link": "https://stackoverflow.com/users/5050343/sms"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1563996112, "post_id": 57189523, "comment_id": 100889662, "body": "@stark My question is about C++20. The <code>m2.cppm</code> is a &quot;module interface unit&quot;, not a regular cpp file."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1564000965, "post_id": 57189523, "comment_id": 100891612, "body": "Try putting <code>module;</code> after the <code>#include</code>. I think I&#39;ve had a similar problem"}, {"owner": {"reputation": 904, "user_id": 5050343, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b76e4883291c85f8a34463b92510fc96?s=128&d=identicon&r=PG&f=1", "display_name": "sms", "link": "https://stackoverflow.com/users/5050343/sms"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1564001258, "post_id": 57189523, "comment_id": 100891704, "body": "@HolyBlackCat With <code>module;</code> after the <code>#include</code> the error is different - &quot;error: &#39;module;&#39; introducing a global module fragment can appear only at the start of the translation unit&quot;."}], "owner": {"reputation": 904, "user_id": 5050343, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b76e4883291c85f8a34463b92510fc96?s=128&d=identicon&r=PG&f=1", "display_name": "sms", "link": "https://stackoverflow.com/users/5050343/sms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1564000797, "creation_date": 1563994426, "last_edit_date": 1563996407, "question_id": 57189523, "link": "https://stackoverflow.com/questions/57189523/missing-include-m1-hpp-my-type-must-be-defined-before-it-is-used", "title": "Missing &#39;#include &quot;m1.hpp&quot;&#39;; &#39;my_type&#39; must be defined before it is used", "body": "<p>There is a <code>m1.hpp</code> header file defining <code>my_type</code>. The header is included by <code>m2</code> module. The module exports <code>my_class</code> (has a member of <code>my_type</code>) used in <code>main</code>. How can I fix the compilation issue (see below) without including <code>m1.hpp</code> (that would defeat the purpose) in <code>main</code>? (I'm using clang from trunk).</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// file: m1.hpp\n#pragma once\nclass my_type {};\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// file: m2.cppm\nmodule;      \n#include \"m1.hpp\"      \nexport module m2;      \nexport class my_class { my_type m; };\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// file: main.cpp\nimport m2;\nint main() { my_class c; }\n</code></pre>\n\n<pre><code>clang++ -fmodules-ts -std=c++2a -fprebuilt-module-path=. --precompile m2.cppm -o m2.pcm\nclang++ -fmodules-ts -std=c++2a -fprebuilt-module-path=. -c m2.pcm -o m2.obj\nclang++ -fmodules-ts -std=c++2a -fprebuilt-module-path=. -c main.cpp -o main.obj\n</code></pre>\n\n<pre><code>In file included from main.cpp:2:\nm2.cppm:5:14: error: missing '#include \"m1.hpp\"'; 'my_type' must be defined before it is used\nexport class my_class { my_type m; };\n             ^\nmain.cpp:3:23: note: in implicit default constructor for 'my_class' first required here\nint main() { my_class c; }\n                      ^\nm1.hpp:3:7: note: previous definition is here\nclass my_type {};\n      ^\n1 error generated.\n</code></pre>\n"}, {"tags": ["c++", "set", "subset", "subset-sum"], "answers": [{"comments": [{"owner": {"reputation": 426, "user_id": 11503237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05c90c7e3016cf1af3f5a2dacb45cb83?s=128&d=identicon&r=PG&f=1", "display_name": "Hamsa", "link": "https://stackoverflow.com/users/11503237/hamsa"}, "edited": false, "score": 0, "creation_date": 1564060443, "post_id": 57190022, "comment_id": 100913162, "body": "Thank you. Good approach. Two more inference to add implicitly though you have discussed. i) If m-k&lt;0, not possible ii) If m-k is odd, not possible."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 1, "last_activity_date": 1563996560, "creation_date": 1563996560, "answer_id": 57190022, "question_id": 57189481, "link": "https://stackoverflow.com/questions/57189481/partitioning-the-array-into-k-non-empty-non-intersecting-subsegments-such-that-e/57190022#57190022", "title": "Partitioning the array into k non-empty non-intersecting subsegments such that each subsegment has odd sum", "body": "<p>I'd start by noting that the code you linked is intended to solve a different problem than the one you've outlined--and the fact that it allows rearranging the elements of the array almost certainly makes it a more difficult problem.</p>\n\n<p>For the problem you've outlined, just dividing the array into N sub-arrays, each of which is odd, let's start by looking at the properties of odd and even numbers. Specifically, the sum of even numbers is always even. The sum of an even number of odd numbers is also even. For the sum to be odd, the input must contain an odd number of odd numbers.</p>\n\n<p>Based on that, we can determine whether the desired result is possible fairly easily. To get K partitions, each with an odd sum, the input must contain at least K odd numbers. If not, we can't possibly create K partitions that are odd.</p>\n\n<p>So, if it contains exactly K odd numbers, the answer is immediately \"yes\", we can do the partition. We can start from the beginning, and stop each partition at the first odd number we encounter. When we've created K-1 partitions that way, the remainder of the input becomes the last partition.</p>\n\n<p>Each of our partitions contains exactly one odd number, and we've partitioned each of the K odd numbers into its own partition, so we've met the requirements.</p>\n\n<p>If there are more than K odd numbers in the input, we have to consider exactly how many more. We want each partition to contain an even sum plus one odd number. That even sum can be produced by any number of even numbers, optionally combined with an even number of odd numbers.</p>\n\n<p>So, let's count the odd numbers in the input, and call that M. If K-M is an even number, then (again) we can pick the K-1 partitions as before--an arbitrary number of even numbers followed by a single odd number. Since each contains only one odd number, those all have odd sums.</p>\n\n<p>The last partition will (again) be a single odd number + a sum of some even numbers + the sum of an even number of odd numbers, so (again) its sum will be odd.</p>\n\n<p>In fact, we can quickly realize that the first case (exactly K odd numbers) is really just a special case of the second, where K-M = 0, and we treat [0, 2, 4, 8, ...] as even numbers.</p>\n\n<p>So you're right: code for this probably can be simpler than for the problem you linked. Start by counting the odd numbers in the input. If it's K+M (where M is an even number), you can create each partition going from the current beginning through the next odd number, and repeating until you get K-1 partitions, then the rest of the input goes in the last partition. If M is an odd number, then the task simply can't be done for this input.</p>\n"}], "owner": {"reputation": 426, "user_id": 11503237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05c90c7e3016cf1af3f5a2dacb45cb83?s=128&d=identicon&r=PG&f=1", "display_name": "Hamsa", "link": "https://stackoverflow.com/users/11503237/hamsa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "accepted_answer_id": 57190022, "answer_count": 1, "score": -1, "last_activity_date": 1563996560, "creation_date": 1563994203, "question_id": 57189481, "link": "https://stackoverflow.com/questions/57189481/partitioning-the-array-into-k-non-empty-non-intersecting-subsegments-such-that-e", "title": "Partitioning the array into k non-empty non-intersecting subsegments such that each subsegment has odd sum", "body": "<p>I am new in competitive programming. The other day I was solving this problem </p>\n\n<p>You are given an array a consisting of n integers a1,a2,\u2026,an. You want to split it into exactly k non-empty non-intersecting subsegments such that each subsegment has odd sum (i.\u2009e. for each subsegment, the sum of all elements that belong to this subsegment is odd). It is impossible to rearrange (shuffle) the elements of a given array. Each of the n elements of the array a must belong to exactly one of the k subsegments.</p>\n\n<p>I  made this following observations:</p>\n\n<p>1.If n lesser than(&lt;) k then it is impossible to get such segments.</p>\n\n<p>2.If k=1 then we already have the segments.</p>\n\n<p>3.If k is odd then in order to get the partitions sum of all entries should be odd and even if k is even.</p>\n\n<p>Based on this I want to frame a logic for partitions. I followed the code given in <a href=\"https://www.geeksforgeeks.org/partition-set-k-subsets-equal-sum/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/partition-set-k-subsets-equal-sum/</a> but I think that this code can be shortened with some logic. But I am yet to structure a concrete algorithm. </p>\n\n<p><strong>Can you guys help me out with an algorithm for doing this task. You can feel free to share any ideas</strong></p>\n"}, {"tags": ["c++", "networking", "portforwarding"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1563999535, "post_id": 57189237, "comment_id": 100891096, "body": "You say <code>80.60.117.24</code> is the server machine&#39;s IP. Did you mean that it is your router&#39;s public WAN IP?  Your client needs to connect to the router&#39;s public WAN IP:Port, then the router needs to forward from that IP:Port to the server&#39;s LAN IP:Port."}, {"owner": {"reputation": 9, "user_id": 11286433, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Sd5HmuxMLRs/AAAAAAAAAAI/AAAAAAAAAYY/j8utrauJaGQ/photo.jpg?sz=128", "display_name": "Youve Got A New Notification", "link": "https://stackoverflow.com/users/11286433/youve-got-a-new-notification"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1564126925, "post_id": 57189237, "comment_id": 100935523, "body": "@Remy Lebeau 80.60.117.24 is not my routers ip. I just tried with my routers public WAN IP. That didn&#39;t work either :(."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1564156567, "post_id": 57189237, "comment_id": 100951309, "body": "then you don&#39;t have your forwarding setup correctly. The server code you showed is fine, if the client connects to the router&#39;s WAN IP:Port and the router forwards to the server&#39;s LAN IP:Port then the connection will work"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 11286433, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Sd5HmuxMLRs/AAAAAAAAAAI/AAAAAAAAAYY/j8utrauJaGQ/photo.jpg?sz=128", "display_name": "Youve Got A New Notification", "link": "https://stackoverflow.com/users/11286433/youve-got-a-new-notification"}, "edited": false, "score": 0, "creation_date": 1564127426, "post_id": 57192175, "comment_id": 100935767, "body": "Thank you for that answer. Unfortunately, it didn&#39;t help me, but I can see that I was a little unclear in my scenario.  The scenario is that my client is being run on a different internet to the internet my server is hosted on. And my server is being hosted on my machine(80.60.117.24) on a different internet to the one the client is being run on. I just tried to connect the client to then WAN-ip address(which is the one my server is running on), and that did not work either. I have, on the internet the server is hosted on, set up port forwarding to my local machine(server host 192.168.8.50)"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 9, "user_id": 11286433, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Sd5HmuxMLRs/AAAAAAAAAAI/AAAAAAAAAYY/j8utrauJaGQ/photo.jpg?sz=128", "display_name": "Youve Got A New Notification", "link": "https://stackoverflow.com/users/11286433/youve-got-a-new-notification"}, "edited": false, "score": 0, "creation_date": 1564156839, "post_id": 57192175, "comment_id": 100951446, "body": "@YouveGotANewNotification your description is still a little hard to understand. Can you please edit your question to provide a diagram of your actual network layout showing where each machine and router is located in relation to each other and which device has which IP assigned to it?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1565337436, "post_id": 57192175, "comment_id": 101329723, "body": "Why would the server be talking to itself? You seem to think that NAT doesn&#39;t actually work."}], "tags": [], "owner": {"reputation": 7, "user_id": 11470595, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-I5EZkv1gt14/AAAAAAAAAAI/AAAAAAAAFS0/k7X8J4EXu_c/photo.jpg?sz=128", "display_name": "Zhovan8", "link": "https://stackoverflow.com/users/11470595/zhovan8"}, "is_accepted": false, "score": -1, "last_activity_date": 1564008330, "creation_date": 1564008330, "answer_id": 57192175, "question_id": 57189237, "link": "https://stackoverflow.com/questions/57189237/port-forwarding-error-port-forwarding-is-not-forwarding-to-server/57192175#57192175", "title": "Port forwarding error: Port forwarding is not forwarding to server", "body": "<p>Let me see if I understand the scenario. Is the client you are connecting to the server using the same internet connection as the server?\nYou setting the IP to the same subnet allowing the traffic to work makes me think this is the scenario.\nIf that is the case, then it may not be working because the traffic would route outward to your router. The router would look at it and say that it has that traffic on an external NAT. It would route the traffic to the NAT, which would in turn apply your port forwarding rules.\nThe challenge is that when the server responds, it will be responding to the NAT address not the LAN address. When that traffic hits the router, the port forwarding will again grab the traffic and send it to the server. So that the client gets to the server, but the server only ends up talking to itself.\nI would try the connection from a different location (as in different internet connection). If that works, then you know that you have this loop happening.\nThat being said, as @RemyLebeau pointed out, generally you will not have the public IP on your server, unless you have a range of public IPs and your router's public IP is different from that of your server's. If you do have a separate public IP for the server, then make sure that the router's WAN port and the server are on the same VLAN. So you would have to bring the traffic in on a switch to an isolated VLAN that does not have a VIP setup. It is pretty risky to have your server completely exposed like that though.\nIf you have your server set to the same IP as your router, then you have an entirely different issue. \nYou will want your server's IP to be something on the local LAN and the PAT set to forward traffic to that local IP. So if your machine has 192.168.8.50, then your server might have 192.168.8.40. Something static, which is not in the DHCP range, and that is within the subnet (I assumed a /24 network - 255.255.255.0).\nHopefully this was helpful.\nIf I missed the mark or your setup is different from any of these scenarios, then please give more detail on the topography of your network configuration.</p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 11286433, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Sd5HmuxMLRs/AAAAAAAAAAI/AAAAAAAAAYY/j8utrauJaGQ/photo.jpg?sz=128", "display_name": "Youve Got A New Notification", "link": "https://stackoverflow.com/users/11286433/youve-got-a-new-notification"}, "is_accepted": true, "score": 0, "last_activity_date": 1565335520, "creation_date": 1565335520, "answer_id": 57425289, "question_id": 57189237, "link": "https://stackoverflow.com/questions/57189237/port-forwarding-error-port-forwarding-is-not-forwarding-to-server/57425289#57425289", "title": "Port forwarding error: Port forwarding is not forwarding to server", "body": "<p>Well, I figured it out. The thing I did was just hosting the server on a different network (I have 2 connections in my house). Port forwarding was set up correct. Thank you both for good help and sorry for my hard descriptions. :)</p>\n"}], "owner": {"reputation": 9, "user_id": 11286433, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Sd5HmuxMLRs/AAAAAAAAAAI/AAAAAAAAAYY/j8utrauJaGQ/photo.jpg?sz=128", "display_name": "Youve Got A New Notification", "link": "https://stackoverflow.com/users/11286433/youve-got-a-new-notification"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "closed_date": 1565337360, "accepted_answer_id": 57425289, "answer_count": 2, "score": -1, "last_activity_date": 1565335520, "creation_date": 1563993207, "question_id": 57189237, "link": "https://stackoverflow.com/questions/57189237/port-forwarding-error-port-forwarding-is-not-forwarding-to-server", "closed_reason": "Not suitable for this site", "title": "Port forwarding error: Port forwarding is not forwarding to server", "body": "<p>So, I have made a client and a server in c++. My server has a port set to htons(54000). My client has port htons(54000) as well. </p>\n\n<p>My problem is that when I try to connect my client to my machine(where my server is hosted on, machines ip is: e.g. 80.60.117.24), nothing happens at all!</p>\n\n<p>I have found out that I need to use port forwarding. My router is a Huawei B525 - 23. I have tried to port forward from WAN-port 54000 to LAN-port 54000 and my machine's local ip: 192.168.8.50. </p>\n\n<p>Well, it doesn't work.</p>\n\n<p>Though it works whilist the server and the client is on the same LAN. (I set the ip-address the server has on the client to 192.168.8.50(my machine, server is hosted on here)).</p>\n\n<p>//SERVER.cpp</p>\n\n<pre><code>    sockaddr_in hint;\n    hint.sin_family = AF_INET;\n    hint.sin_port = htons(54000);\n    hint.sin_addr.s_addr = inet_addr(\"0.0.0.0\");\n    bind(listening, (sockaddr*)&amp; hint, sizeof(hint));\n    listen(listening, SOMAXCONN);\n</code></pre>\n\n<p>//CLIENT.cpp</p>\n\n<pre><code>string ipAddress = \"80.60.117.24\"; // IP Address of the server\nint port = 54000;\nsockaddr_in hint;\nhint.sin_family = AF_INET;\nhint.sin_port = htons(port);\n</code></pre>\n\n<p>So, what am I doing wrong? How am I forwarding the ports wrong? </p>\n"}, {"tags": ["c++", "mysql", "windows", "gcc"], "comments": [{"owner": {"reputation": 10803, "user_id": 2548147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cfKie.jpg?s=128&g=1", "display_name": "Raymond Nijland", "link": "https://stackoverflow.com/users/2548147/raymond-nijland"}, "edited": false, "score": 0, "creation_date": 1563992396, "post_id": 57189036, "comment_id": 100888124, "body": "It&#39;s all in the manual <a href=\"https://dev.mysql.com/doc/refman/8.0/en/udf-compiling.html\" rel=\"nofollow noreferrer\">UDF Compiling and Installing</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1563992634, "post_id": 57189036, "comment_id": 100888227, "body": "This is waaay too broad."}, {"owner": {"reputation": 83063, "user_id": 2310830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P6rM1.png?s=128&g=1", "display_name": "RiggsFolly", "link": "https://stackoverflow.com/users/2310830/riggsfolly"}, "edited": false, "score": 1, "creation_date": 1563992712, "post_id": 57189036, "comment_id": 100888265, "body": "<i>Small Note</i> What has GCC got to do with compiling on Windows? Are you talking about compiling for MINGW or somehting like it?"}, {"owner": {"reputation": 10803, "user_id": 2548147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cfKie.jpg?s=128&g=1", "display_name": "Raymond Nijland", "link": "https://stackoverflow.com/users/2548147/raymond-nijland"}, "reply_to_user": {"reputation": 83063, "user_id": 2310830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P6rM1.png?s=128&g=1", "display_name": "RiggsFolly", "link": "https://stackoverflow.com/users/2310830/riggsfolly"}, "edited": false, "score": 0, "creation_date": 1563992963, "post_id": 57189036, "comment_id": 100888383, "body": "<i>&quot;What has GCC got to do with compiling on Windows? Are you talking about compiling for MINGW or somehting like it?&quot;</i> Well @RiggsFolly GCC should be able to run on Cygwin.."}, {"owner": {"reputation": 83063, "user_id": 2310830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P6rM1.png?s=128&g=1", "display_name": "RiggsFolly", "link": "https://stackoverflow.com/users/2310830/riggsfolly"}, "reply_to_user": {"reputation": 10803, "user_id": 2548147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cfKie.jpg?s=128&g=1", "display_name": "Raymond Nijland", "link": "https://stackoverflow.com/users/2548147/raymond-nijland"}, "edited": false, "score": 0, "creation_date": 1563993108, "post_id": 57189036, "comment_id": 100888437, "body": "@RaymondNijland I could not remember the cygwin acronym, thansk for the memory jogger, but that is what I ment by <i>Something like it</i> :)"}], "owner": {"reputation": 101, "user_id": 7488016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/503c7de6ea615bb614ce7494fa53e722?s=128&d=identicon&r=PG&f=1", "display_name": "User", "link": "https://stackoverflow.com/users/7488016/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563993055, "creation_date": 1563992347, "last_edit_date": 1563993055, "question_id": 57189036, "link": "https://stackoverflow.com/questions/57189036/compiling-mysql-c-programs-on-windows-10", "title": "Compiling MySQL C++ programs on Windows 10", "body": "<p>Sorry if this has been answered before but I am struggling to find a simple solution to this problem.</p>\n\n<p>My end goal is to be able to import user-defined aggregate functions into MySQL. In order to do this, I need to use C++. I already have the C++ Connector installed, but I'm not sure how to compile my program using the libraries contained within the connector on Windows. Any guidance would be appreciated.</p>\n"}, {"tags": ["c++", "cassandra", "datastax"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1563992718, "post_id": 57188915, "comment_id": 100888270, "body": "&quot;10k hosts&quot; - that&#39;s <i>ambitious</i>."}, {"owner": {"reputation": 55, "user_id": 3550139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccd10bdf68dcb4bb95743eedbf7d8ae2?s=128&d=identicon&r=PG&f=1", "display_name": "nullptr", "link": "https://stackoverflow.com/users/3550139/nullptr"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1563999470, "post_id": 57188915, "comment_id": 100891071, "body": "I meant to just emphasize on multiple clients not on exact number of hosts, anyway I have modified the question."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 3550139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccd10bdf68dcb4bb95743eedbf7d8ae2?s=128&d=identicon&r=PG&f=1", "display_name": "nullptr", "link": "https://stackoverflow.com/users/3550139/nullptr"}, "edited": false, "score": 0, "creation_date": 1564158087, "post_id": 57191085, "comment_id": 100951997, "body": "thanks @Abhishek your explanation made sense. I did some speed/scalability tests by keeping core connections constant and varying number of i/o threads and vice versa but didn&#39;t see any significant difference. Maybe different topic - do you have any idea why row with 8 kb blob results in much higher speed than a blob with 16 bytes?"}, {"owner": {"reputation": 1826, "user_id": 3921053, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/bIeqX.jpg?s=128&g=1", "display_name": "Abhishek Garg", "link": "https://stackoverflow.com/users/3921053/abhishek-garg"}, "reply_to_user": {"reputation": 55, "user_id": 3550139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccd10bdf68dcb4bb95743eedbf7d8ae2?s=128&d=identicon&r=PG&f=1", "display_name": "nullptr", "link": "https://stackoverflow.com/users/3550139/nullptr"}, "edited": false, "score": 0, "creation_date": 1564159299, "post_id": 57191085, "comment_id": 100952506, "body": "I will need more details on that to answer it like the table schema, type of query, etc so probably you should ask it as a separate question. If you think this question is answered, you can accept this one as answered."}], "tags": [], "owner": {"reputation": 1826, "user_id": 3921053, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/bIeqX.jpg?s=128&g=1", "display_name": "Abhishek Garg", "link": "https://stackoverflow.com/users/3921053/abhishek-garg"}, "is_accepted": true, "score": 1, "last_activity_date": 1564001593, "creation_date": 1564001593, "answer_id": 57191085, "question_id": 57188915, "link": "https://stackoverflow.com/questions/57188915/difference-between-core-connections-and-i-o-threads-in-datastax-cassandra-c-dr/57191085#57191085", "title": "difference between core connections and i/o threads in Datastax Cassandra C++ driver", "body": "<p>This is the official documentation of the fields present <a href=\"https://docs.datastax.com/en/developer/cpp-driver/1.0/api/struct.CassCluster/#function-cass_cluster_set_max_connections_per_host\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p><strong>cass_cluster_set_num_threads_io</strong> : This is the number of threads that will handle query requests. Default value: 1</p>\n\n<p><strong>cass_cluster_set_max_connections_per_host</strong>: Sets the maximum number of connections made to each server in each IO thread. Default value : 2</p>\n\n<blockquote>\n  <p>I am wondering what is the difference between an i/o thread and a\n  core connection?</p>\n</blockquote>\n\n<p>I/O threads are basically responsible for doing all the network operations between the Client and the Server. So if you have 1000 message waiting for the network operation, this thread will pick the request one by one and execute them. The default value is 1.  </p>\n\n<p>Once a message is picked by the I/O thread, it uses the connections specified in <strong>set_max_connections</strong> to make the request. The default value is 2 for this so that the I/O thread can intelligently switch connections based on server latency and throughput.  </p>\n\n<blockquote>\n  <p>I am trying to tune those values so if a cluster is connected by 100\n  hosts simultaneously then the speed wouldn't slow down.</p>\n</blockquote>\n\n<p>You can either keep max connection constant and increase the number of i/o threads or the other way around for scaling. There is no clear <em>better</em> approach between the two. You will need to benchmark and see what approach works for your case.   </p>\n\n<p>I think that if you have less number of request but they are big request then increasing the number of connections makes more sense but it still requires benchmarking.  </p>\n\n<p><a href=\"https://docs.datastax.com/en/developer/java-driver/3.5/manual/pooling/\" rel=\"nofollow noreferrer\">This</a> link also provides some extra info. </p>\n"}], "owner": {"reputation": 55, "user_id": 3550139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccd10bdf68dcb4bb95743eedbf7d8ae2?s=128&d=identicon&r=PG&f=1", "display_name": "nullptr", "link": "https://stackoverflow.com/users/3550139/nullptr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 57191085, "answer_count": 1, "score": 1, "last_activity_date": 1564001593, "creation_date": 1563991759, "last_edit_date": 1563999316, "question_id": 57188915, "link": "https://stackoverflow.com/questions/57188915/difference-between-core-connections-and-i-o-threads-in-datastax-cassandra-c-dr", "title": "difference between core connections and i/o threads in Datastax Cassandra C++ driver", "body": "<p>I set number of core connections per host using <code>cass_cluster_set_max_connections_per_host()</code> and i/o threads using <code>cass_cluster_set_num_threads_io()</code>. \nI see that my client host is establishing, \n<strong>core connections * num i/o threads</strong>, number of tcp connections with each host in my cluster using netstat command. I am wondering what is the difference between an i/o thread and a core connection? Also, if a client is communicating with Cassandra cluster of 10 hosts and number of core connections is set to 2, i/o threads is set to 4 then there are essentially 10*4*2, 80 connections established from a host to cluster - and this all in single session, how are those connections utilized? doesn't it seem extraneous?</p>\n\n<p>I am trying to tune those values so if a cluster is connected by 100 hosts simultaneously then the speed wouldn't slow down. Or are those settings unrelated to speed? Any more information or links are appreciated!</p>\n"}, {"tags": ["c++", "console"], "comments": [{"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 1, "creation_date": 1563990764, "post_id": 57188545, "comment_id": 100887351, "body": "So in your Draw() function,  <code>for (int k </code> loop what would happen if somehow 2 segments of the tail were at the same location? Perhaps that shouldn&#39;t happen, so add an extra check there and if it did happen work back to why?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11313931"}, "edited": false, "score": 0, "creation_date": 1563992828, "post_id": 57188545, "comment_id": 100888324, "body": "Don&#39;t use <code>system()</code>! Its bad for many reasons. See here: <a href=\"https://stackoverflow.com/questions/19913446/why-should-the-system-function-be-avoided-in-c-and-c\" title=\"why should the system function be avoided in c and c\">stackoverflow.com/questions/19913446/&hellip;</a>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1564052485, "post_id": 57188545, "comment_id": 100908725, "body": "With <code>_kbhit</code> and <code>_getch</code> in place this is clearly platform-specific code. Whatever we may think of that choice, it does mean <code>system(&quot;cls&quot;)</code> is at least dependable. Though yes it does bear mentioning that this is not pure C++"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11504081, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NT-U4EHWdmc/AAAAAAAAAAI/AAAAAAAABAU/_8RhAXIZmH8/photo.jpg?sz=128", "display_name": "Owlowish", "link": "https://stackoverflow.com/users/11504081/owlowish"}, "is_accepted": false, "score": 0, "last_activity_date": 1563998152, "creation_date": 1563998152, "answer_id": 57190369, "question_id": 57188545, "link": "https://stackoverflow.com/questions/57188545/c-snake-game-tail-bug/57190369#57190369", "title": "C++ Snake Game Tail Bug", "body": "<p>Got it in void logic() function, it should've been :</p>\n\n<pre><code> for (int i=1; i&lt;ntail; i++)\n    {\n        //remember current position\n        prev2x = tailx[i];\n        prev2y = taily[i];\n\n        // change value\n\n        tailx[i] = prevx;\n        taily[i] = prevy;\n\n        prevx = prev2x;\n        prevy = prev2y;\n    }\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code> for (int i=1; i&lt;ntail; i++)\n    {\n        //remember current position\n        prev2x = tailx[i];\n        prev2y = taily[i];\n\n        // change value\n\n        tailx[i] = prevx;\n        taily[i] = prevy;\n\n        prevx = tailx[i];\n        prevy = taily[i];\n    }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11504081, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NT-U4EHWdmc/AAAAAAAAAAI/AAAAAAAABAU/_8RhAXIZmH8/photo.jpg?sz=128", "display_name": "Owlowish", "link": "https://stackoverflow.com/users/11504081/owlowish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 433, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563998152, "creation_date": 1563990242, "question_id": 57188545, "link": "https://stackoverflow.com/questions/57188545/c-snake-game-tail-bug", "title": "C++ Snake Game Tail Bug", "body": "<p>I want to create a simple snake game using console C++. I'm currently creating the tail part of the snake. When the snake eats the fruit, it adds a section to its tail. The problem is that the game runs well until the 3rd fruit. At this moment, though a tail section is added to the snake, it will move awkwardly and will shift the right wall.</p>\n\n<p>here's the code :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;windows.h&gt;\n#include&lt;time.h&gt;\n\nusing namespace std;\n\n// ===========  VARIABLES ===========\n\nbool gameOver;\nconst int width = 20;\nconst int height = 20;\nint x, y, fruitX, fruitY, score;\nenum eDirection {STOP = 0, LEFT, RIGHT, UP, DOWN};\neDirection dir;\n//arrays\n\nint tailx[50],taily[50];\nint ntail=0;\n\n\n// ===========  INITIALIZATION ===========\nvoid setup()\n{\n    gameOver = false;\n    //snake is not moving\n    srand(time(0));\n\n    dir = STOP ;\n    // center the snake on the map\n    x = width/2;\n    y = height/2;\n\n    // randomize fruit position\n    fruitX = rand()%width;\n    fruitY = rand()%height;\n\n    score = 0;\n}\n\n\nvoid Draw()\n{\n    //clear screen\n    system(\"cls\");\n\n\n    // ======== DRAW MAP ========\n\n    //display top border of map\n    for (int i =0; i&lt; width; i++)\n        cout &lt;&lt; \"#\" ;\n    cout&lt;&lt;endl;\n\n    for (int i = 0; i&lt;height; i++)\n    {\n\n        for (int j=0; j&lt;width; j++)\n        {\n            if (j == 0)\n                cout &lt;&lt;\"#\";\n\n            //display the head\n            if (x==j &amp;&amp; y==i)\n\n                cout &lt;&lt; \"o\";\n\n            // display the fruit\n\n            else if (fruitX == j &amp;&amp; fruitY == i)\n                cout &lt;&lt; \"F\";\n\n            else\n            {\n                bool print = false;\n                for (int k = 0; k &lt; ntail ; k++)\n                {\n\n                    if (tailx[k]== j &amp;&amp; taily[k] == i)\n                    {\n                        cout &lt;&lt; \"o\";\n                        print = true;\n                    }\n\n                }\n                    if(!print)\n                    cout &lt;&lt; \" \";\n\n            }\n            if (j == width-1)\n                cout &lt;&lt; \"#\";\n        }\n        cout&lt;&lt;endl;\n    }\n\n    //display bottom border\n    for (int i =0; i&lt; width+2; i++)\n        cout &lt;&lt; \"#\" ;\n    cout&lt;&lt;endl;\n\n    //display score\n    cout&lt;&lt; \"Score : \" &lt;&lt; score&lt;&lt;endl;\n\n    //debug\n    cout &lt;&lt; \"ntail : \" &lt;&lt; ntail &lt;&lt; endl ;\n    cout &lt;&lt; \"width : \"  &lt;&lt; width &lt;&lt; endl ;\n\n\n\n}\n\nvoid Input()\n{\n    if (_kbhit())\n    {\n\n        //leyboard control input\n        switch (_getch())\n        {\n        case 'q':\n            dir = LEFT;\n            break;\n        case 'z':\n            dir = UP;\n            break;\n        case 's':\n            dir = DOWN;\n            break;\n        case 'd':\n            dir = RIGHT;\n            break;\n        case 'x':\n            gameOver = true;\n            break;\n        default :\n            break;\n        }\n    }\n}\n\nvoid logic()\n{\n    //remember previous position\n    int prevx = tailx[0];\n    int prevy = taily[0];\n\n    int prev2x,prev2y;\n\n    tailx[0] = x;\n    taily[0] = y;\n\n    for (int i=1; i&lt;ntail; i++)\n    {\n\n        //remember current position\n        prev2x = tailx[i];\n        prev2y = taily[i];\n\n        // change value\n\n        tailx[i] = prevx;\n        taily[i] = prevy;\n\n        prevx = tailx[i];\n        prevy = taily[i];\n\n\n\n    }\n\n\n\n    // movement management\n    switch  (dir)\n    {\n    case DOWN :\n\n        if (y&lt;=height)\n            y++;\n        break;\n\n    case UP:\n        if (y&gt;=0)\n            y--;\n        break;\n\n    case LEFT:\n        if (x&gt;=0)\n            x--;\n        break;\n\n    case RIGHT:\n        if (x&lt;=width)\n            x++;\n        break;\n    default :\n        break;\n    }\n\n    // if the snake hits the wall\n    //if (x == width || y =z= height || x == 0 || y == 0)\n    //    gameOver = true;\n\n    //if the snake eats a fruit\n\n\n    // score display and new fruit apparition\n    if (x==fruitX &amp;&amp; y==fruitY)\n    {\n        score += 10;\n        fruitX = rand()%width;\n        fruitY = rand()%height;\n        ntail++;\n\n    }\n}\n\nint main()\n{\n    setup();\n\n    while (!gameOver)\n    {\n        Draw();\n        Input();\n        logic();\n\n        Sleep(100);\n\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "boost", "static"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1563990329, "post_id": 57188523, "comment_id": 100887159, "body": "Does the compiler emit any warnings or errors?"}, {"owner": {"reputation": 73, "user_id": 4468056, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3ca17346d02c62b73b4f3bec3b83c743?s=128&d=identicon&r=PG&f=1", "display_name": "Davis Last", "link": "https://stackoverflow.com/users/4468056/davis-last"}, "edited": false, "score": 0, "creation_date": 1563990434, "post_id": 57188523, "comment_id": 100887206, "body": "No, it compiles the exact same as if I weren&#39;t using threads"}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 1, "creation_date": 1563991070, "post_id": 57188523, "comment_id": 100887496, "body": "So how &quot;clever&quot; is your texture cache? Does it need to worry about scenarios like one thread is forcing the load of a texture while another thread is reading another texture. Perhaps 2 threads are both loading the same texture - which one actually lands in the cache - what happens to the other one? You may need some mutexes to stop non-determinate interactions here? stl containers are not intrinsically thread-safe when written to."}, {"owner": {"reputation": 73, "user_id": 4468056, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3ca17346d02c62b73b4f3bec3b83c743?s=128&d=identicon&r=PG&f=1", "display_name": "Davis Last", "link": "https://stackoverflow.com/users/4468056/davis-last"}, "edited": false, "score": 0, "creation_date": 1563991604, "post_id": 57188523, "comment_id": 100887750, "body": "So, as of right now, the only multithreading done in the program is where I have the issue, and as joining the thread directly after creation doesn&#39;t prevent the issue, I don&#39;t think the issue is caused by 2 threads loading textures at the same time"}, {"owner": {"reputation": 2528, "user_id": 4658169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b351ed2ce7ddde5ab5ac9bd96200a62d?s=128&d=identicon&r=PG&f=1", "display_name": "CuriouslyRecurringThoughts", "link": "https://stackoverflow.com/users/4658169/curiouslyrecurringthoughts"}, "edited": false, "score": 1, "creation_date": 1563993467, "post_id": 57188523, "comment_id": 100888593, "body": "What is P_createWorld ? Where is m_world defined? When you say that every tile is zero, you mean that you put a print statement or a breakpoint and you actually observed that the output of createBlock is 0 or you infer it from inspecting m_world? What I am trying to say is that the thread might be populating another m_world, that would be the case if m_world was thread_local for example. Most likely I am wrong, but I am trying to give another perspective."}, {"owner": {"reputation": 73, "user_id": 4468056, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3ca17346d02c62b73b4f3bec3b83c743?s=128&d=identicon&r=PG&f=1", "display_name": "Davis Last", "link": "https://stackoverflow.com/users/4468056/davis-last"}, "reply_to_user": {"reputation": 2528, "user_id": 4658169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b351ed2ce7ddde5ab5ac9bd96200a62d?s=128&d=identicon&r=PG&f=1", "display_name": "CuriouslyRecurringThoughts", "link": "https://stackoverflow.com/users/4658169/curiouslyrecurringthoughts"}, "edited": false, "score": 0, "creation_date": 1563993864, "post_id": 57188523, "comment_id": 100888760, "body": "@CuriouslyRecurringThoughts P_createWorld structures a world&#39;s tiles, and populates the member m_world, which is stored as a private pointer with the only getter also returning the pointer, so I don&#39;t think that there is a chance another m_world is being populated. Also, I used some breakpoints in gdb before and after the textureId was assigned (using the static function GetTexture) in the Tile constructor to find out that it was always simply staying as 0. I don&#39;t think that m_world is thread local because &#39;this&#39; was passed in the lambda used to create the thread"}, {"owner": {"reputation": 684, "user_id": 11783922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c20b355b5cdb9f5172eaed75c5e31a4?s=128&d=identicon&r=PG&f=1", "display_name": "fifoforlifo", "link": "https://stackoverflow.com/users/11783922/fifoforlifo"}, "edited": false, "score": 1, "creation_date": 1563994612, "post_id": 57188523, "comment_id": 100889043, "body": "OpenGL contexts have thread affinity.  I wonder if you&#39;re trying to make GL calls on the background thread?  If so, you will need some extra machinery, like a 2nd GL context, explicit state sharing between the 2, and carefully restricting which types of operations occur in the bg. See <a href=\"https://www.khronos.org/opengl/wiki/OpenGL_and_multithreading\" rel=\"nofollow noreferrer\">khronos.org/opengl/wiki/OpenGL_and_multithreading</a> or search online for &quot;opengl shared context&quot;."}, {"owner": {"reputation": 73, "user_id": 4468056, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3ca17346d02c62b73b4f3bec3b83c743?s=128&d=identicon&r=PG&f=1", "display_name": "Davis Last", "link": "https://stackoverflow.com/users/4468056/davis-last"}, "reply_to_user": {"reputation": 684, "user_id": 11783922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c20b355b5cdb9f5172eaed75c5e31a4?s=128&d=identicon&r=PG&f=1", "display_name": "fifoforlifo", "link": "https://stackoverflow.com/users/11783922/fifoforlifo"}, "edited": false, "score": 0, "creation_date": 1563994829, "post_id": 57188523, "comment_id": 100889109, "body": "@fifoforlifo Ah, I just looked wayyyy deep into my texture loading functions and it seems there were some GL calls there. Let me see if this was the problem. Thanks a bunch!"}], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 4468056, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3ca17346d02c62b73b4f3bec3b83c743?s=128&d=identicon&r=PG&f=1", "display_name": "Davis Last", "link": "https://stackoverflow.com/users/4468056/davis-last"}, "is_accepted": true, "score": 1, "last_activity_date": 1563997016, "creation_date": 1563997016, "answer_id": 57190124, "question_id": 57188523, "link": "https://stackoverflow.com/questions/57188523/why-dont-these-static-functions-return-as-expected-from-another-thread/57190124#57190124", "title": "Why don&#39;t these static functions return as expected from another thread?", "body": "<p>As @fifoforlifo mentioned, OpenGL contexts have thread affinity, and it turns out I was making GL calls deeper into my texture loading function. I created a second GL context and turned on context sharing and then it began to work. Thanks a lot, @fifoforlifo!</p>\n"}], "owner": {"reputation": 73, "user_id": 4468056, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3ca17346d02c62b73b4f3bec3b83c743?s=128&d=identicon&r=PG&f=1", "display_name": "Davis Last", "link": "https://stackoverflow.com/users/4468056/davis-last"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 57190124, "answer_count": 1, "score": -1, "last_activity_date": 1563997016, "creation_date": 1563990135, "last_edit_date": 1563994157, "question_id": 57188523, "link": "https://stackoverflow.com/questions/57188523/why-dont-these-static-functions-return-as-expected-from-another-thread", "title": "Why don&#39;t these static functions return as expected from another thread?", "body": "<p>I'm trying to use multiple threads to make one function run concurrently with another, but when the function that the new thread is running uses a static function, it always returns 0 for some reason.</p>\n\n<p>I'm using Boost for the threading, on Linux, and the static functions work exactly as expected when not using threads. I'm pretty sure this isn't a data race issue because if I join the thread directly after making it (not giving any other code a chance to change anything), the problem persists.</p>\n\n<p>The function that the thread is created in:</p>\n\n<pre><code>void WorldIOManager::createWorld(unsigned int seed, std::string worldName, bool isFlat) {\n    boost::thread t( [=]() { P_createWorld(seed, worldName, isFlat); } );\n    t.join();\n    //P_createWorld(seed, worldName, isFlat); // This works perfectly fine\n}\n</code></pre>\n\n<p>The part of P_createWorld that uses a static function (The function that the newly-created thread actually runs):\n<code>m_world-&gt;chunks[i]-&gt;tiles[y][x] = createBlock(chunkData[i].tiles[y][x].id, chunkData[i].tiles[y][x].pos, m_world-&gt;chunks[i]);</code></p>\n\n<p>m_world is a struct that contains an array of Chunks, which has a two dimensional array of Tiles, which each have texture IDs associated with a texture in a cache. createBlock returns a pointer to a new tile pointer, completely initialized. The static function in question belongs to a statically-linked library, and is defined as follows:</p>\n\n<pre><code>namespace GLEngine {\n    //This is a way for us to access all our resources, such as\n    //Models or textures.\n    class ResourceManager\n    {\n    public:\n        static GLTexture getTexture(std::string texturePath);\n\n    private:\n        static TextureCache _textureCache;\n    };\n}\n</code></pre>\n\n<p>Also, its implementation:</p>\n\n<pre><code>#include \"ResourceManager.h\"\nnamespace GLEngine {\n    TextureCache ResourceManager::_textureCache;\n\n    GLTexture ResourceManager::getTexture(std::string texturePath) {\n       return _textureCache.getTexture(texturePath);\n    }\n}\n</code></pre>\n\n<p>Expected result: For each tile to actually get assigned its proper texture ID</p>\n\n<p>Actual result: Every tile, no matter the texturePath, is assigned 0 as its texture ID.</p>\n\n<p>If you need any more code like the constructor for a tile or createBlock(), I'll happily add it, I just don't really know what information is relevant in this kind of situation...</p>\n\n<p>So, as I stated before, all of this works perfectly if I don't have a thread, so my final question is: Is there some sort of undefined behaviour that has to do with static functions being called by threads, or am I just doing something wrong here?</p>\n"}, {"tags": ["c++", "output"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1563989079, "post_id": 57188247, "comment_id": 100886579, "body": "It&#39;s unclear, what was the printout before you changed it? There&#39;s also not even an <code>std::endl</code> in the code you posted, so I&#39;m even more confused."}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1563989095, "post_id": 57188247, "comment_id": 100886590, "body": "So you see a conflict between the behaviour you observe and the spec <a href=\"https://en.cppreference.com/w/cpp/io/ios_base/sync_with_stdio\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/io/ios_base/sync_with_stdio</a> ? Please explain that conflict."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1563989778, "post_id": 57188247, "comment_id": 100886913, "body": "&quot;Why printf is executed before cout&quot; - It&#39;s not executed before, the output is just written in different order due to different buffering and flushing."}], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 8, "last_activity_date": 1563989220, "creation_date": 1563989220, "answer_id": 57188318, "question_id": 57188247, "link": "https://stackoverflow.com/questions/57188247/why-printf-is-executed-before-cout-after-using-iossync-with-stdiofalse-in-c/57188318#57188318", "title": "Why printf is executed before cout after using ios::sync_with_stdio(false) in c++?", "body": "<p>It's a buffering issue.</p>\n\n<p>By default when standard output is connected to a terminal, <code>stdout</code> is <em>line-buffered</em> meaning the buffer is flushed and output actually written to the terminal on newline.</p>\n\n<p>When C stdio is disconnected from the C++ standard streams, <code>std::cout</code> is <em>fully</em> buffered, meaning output is actually written when either explicitly flushed (using e.g. <code>std::flush</code> or <code>std::endl</code> manipulators) or if the buffer is full.</p>\n\n<p>The two buffers used by C <code>stdout</code> and C++ <code>std::cout</code> are different and not connected.</p>\n\n<p>Flushing of the buffers also happens when the program exits.</p>\n\n<hr>\n\n<p>What happens in your program is that the output with <code>printf</code> is flushed immediately because of the trailing newline in the string. But the output to <code>std::cout</code> is only flushed when the program exits.</p>\n"}], "owner": {"reputation": 9, "user_id": 11831887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5d743bc070e3066ddf504fceb93bfb6?s=128&d=identicon&r=PG&f=1", "display_name": "Hank", "link": "https://stackoverflow.com/users/11831887/hank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563989220, "creation_date": 1563988924, "question_id": 57188247, "link": "https://stackoverflow.com/questions/57188247/why-printf-is-executed-before-cout-after-using-iossync-with-stdiofalse-in-c", "title": "Why printf is executed before cout after using ios::sync_with_stdio(false) in c++?", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n\n\nint main () {\n  std::ios::sync_with_stdio(false);\n  std::cout &lt;&lt; \"hi from c++\\n\";\n  printf(\"hi from c\\n\");\n  return 0;\n}\n</code></pre>\n\n<p>After removing std::endl and putting \\n instead in cout statement the output changed to the following:</p>\n\n<pre><code>hi from c\nhi from c++\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1563989106, "post_id": 57188234, "comment_id": 100886593, "body": "Your vector contains these characters, so you count them. <code>std::count</code> works as it should. Maybe you want to clear your vector, rather then back_inserting indiscreetly to it?"}, {"owner": {"reputation": 67, "user_id": 7725334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tUm0y.png?s=128&g=1", "display_name": "wiregh0st", "link": "https://stackoverflow.com/users/7725334/wiregh0st"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1564000677, "post_id": 57188234, "comment_id": 100891508, "body": "Thank you all for your assistance. You helped me solve the problem and I was able to produce the correct answer. Thanks again!"}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 5, "last_activity_date": 1563990484, "creation_date": 1563990484, "answer_id": 57188607, "question_id": 57188234, "link": "https://stackoverflow.com/questions/57188234/how-to-reset-stdcount-return-value/57188607#57188607", "title": "How to reset std::count return value", "body": "<p><code>std::count</code> doesn't just give you a random value, it gives you a specific value based on the contents of the range you give it. You can't change that behaviour, not should you want to.</p>\n\n<p>Instead, look at that range. <em>Why</em> does <code>std::count</code> gives values that you don't expect? They are either \"too high\" or they are \"correct\" and cannot be both; fortunately they are the latter.</p>\n\n<p>This is because you repeatedly <code>std::back_insert</code> to the vector inside your loop. As the loop progresses, you keep counting the old characters from the last time!</p>\n\n<p>If you first cleared <code>myChar</code> then you wouldn't have the problem. Or, ideally, bring the declaration of <code>myChar</code> inside the loop.</p>\n"}, {"comments": [{"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "reply_to_user": {"reputation": 67, "user_id": 7725334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tUm0y.png?s=128&g=1", "display_name": "wiregh0st", "link": "https://stackoverflow.com/users/7725334/wiregh0st"}, "edited": false, "score": 1, "creation_date": 1564000366, "post_id": 57188704, "comment_id": 100891383, "body": "@wiregh0st edit: replaced <code>for</code> with a <code>while</code> loop"}], "tags": [], "owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "is_accepted": false, "score": 2, "last_activity_date": 1564000250, "last_edit_date": 1564000250, "creation_date": 1563990871, "answer_id": 57188704, "question_id": 57188234, "link": "https://stackoverflow.com/questions/57188234/how-to-reset-stdcount-return-value/57188704#57188704", "title": "How to reset std::count return value", "body": "<p>A few fixes</p>\n\n<p>1) On error the program should end, not continue:</p>\n\n<pre><code>if (!inFile)\n{\n    std::cout &lt;&lt; \"oops\";\n\n    return 1;\n}\n</code></pre>\n\n<p>2) a)<code>myChar</code> is accumulating all the chars of all previously read words, so it has to be cleared before use with every pass of the loop, best to move it's declaration into the block required;</p>\n\n<p>b) if you're using a counter just to count but not using it, better to iterate over the data - in this case get rid of <code>i</code> and iterate with chars <code>checked_char</code>:</p>\n\n<pre><code>while (inFile &gt;&gt; data)\n{\n    std::vector&lt; char &gt; myChar;\n\n    std::copy(data.begin(),\n              data.end(),\n              std::back_inserter(myChar)); //copy from string data to vector myChar via back inserter.\n\n    for (char checked_char = 'a'; checked_char &lt;= 'z'; ++checked_char)\n    {\n        int myCount = std::count(myChar.begin(), myChar.end(), checked_char);\n\n        if (myCount == 2)\n        {\n            d++;\n        }\n        else if (myCount == 3)\n        {\n            e++;\n        }\n\n        std::cout &lt;&lt; \"Counter : \" &lt;&lt; checked_char &lt;&lt; \" myCount : \" &lt;&lt; myCount &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 7725334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tUm0y.png?s=128&g=1", "display_name": "wiregh0st", "link": "https://stackoverflow.com/users/7725334/wiregh0st"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 57188607, "answer_count": 2, "score": 1, "last_activity_date": 1564000250, "creation_date": 1563988890, "question_id": 57188234, "link": "https://stackoverflow.com/questions/57188234/how-to-reset-stdcount-return-value", "title": "How to reset std::count return value", "body": "<p>std::count returns a value and I need this value to reset to 0 for all characters in the variable 'counter' after executing the inner for loop. Goal is to count how many times a character appears. If this character appears twice in the string, add one to variable 'd'. If it appears three times, add one to variable 'e'.</p>\n\n<p>Not sure what else to try or if there is potentially a better function to achieve my result.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;cstring&gt;\n\nint main() {\n\n    std::string data;\n\n    std::vector&lt;std::string&gt; myString;\n    std::vector&lt;char&gt; myChar;\n\n    int d = 0, e = 0;\n\n    std::ifstream inFile;\n\n    inFile.open(\"C:\\\\Users\\\\Administrator\\\\Desktop\\\\c++ files\\\\input2.txt\");\n\n    if (!inFile) {\n\n        std::cout &lt;&lt; \"oops\";\n    }\n\n    for (int i = 0; i &lt; 1; i++) {\n\n            inFile &gt;&gt; data;\n            std::copy(data.begin(), data.end(), std::back_inserter(myChar));    //copy from string data to vector myChar via back inserter.\n            char counter = 'a';\n\n            for (int i = 0; i &lt; 26; i++) {\n\n                int myCount = std::count(myChar.begin(), myChar.end(), counter);\n\n                if (myCount == 2) {\n\n                    d++;\n\n                }\n                else if (myCount == 3) {\n                    e++;\n\n                }\n\n                std::cout &lt;&lt; \"Counter : \" &lt;&lt; counter &lt;&lt; \" myCount : \" &lt;&lt; myCount &lt;&lt; \"\\n\";\n                counter++;\n            }\n        }\n\n        std::cout &lt;&lt; \"d is: \" &lt;&lt; d &lt;&lt; \"\\n\";\n        std::cout &lt;&lt; \"e is: \" &lt;&lt; e &lt;&lt; \"\\n\";\n\n        return 0;\n\n\n}\n</code></pre>\n\n<p>input file -- <a href=\"https://adventofcode.com/2018/day/2\" rel=\"nofollow noreferrer\">https://adventofcode.com/2018/day/2</a></p>\n\n<p>The program works correctly on first inner for loop, but second and after return values that are too high (albeit correct) for the 'myCount' variable.</p>\n"}, {"tags": ["android", "c++", "qt"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1563990133, "post_id": 57188203, "comment_id": 100887078, "body": "If this <i>does</i> turn out to be a Qt bug, do remember to report it \ud83d\ude42"}, {"owner": {"reputation": 991, "user_id": 9679554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c0ec4ba34353083598e5abe63e7bc7?s=128&d=identicon&r=PG&f=1", "display_name": "dev65", "link": "https://stackoverflow.com/users/9679554/dev65"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1563991762, "post_id": 57188203, "comment_id": 100887830, "body": "I asked on qt forum if this is already known to happen or I&#39;m doing something wrong and still no response"}, {"owner": {"reputation": 991, "user_id": 9679554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c0ec4ba34353083598e5abe63e7bc7?s=128&d=identicon&r=PG&f=1", "display_name": "dev65", "link": "https://stackoverflow.com/users/9679554/dev65"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1563995559, "post_id": 57188203, "comment_id": 100889397, "body": "I tested on Android 5 and it&#39;s working so the bug for now is on Android 8.1"}], "owner": {"reputation": 991, "user_id": 9679554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c0ec4ba34353083598e5abe63e7bc7?s=128&d=identicon&r=PG&f=1", "display_name": "dev65", "link": "https://stackoverflow.com/users/9679554/dev65"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563995768, "creation_date": 1563988746, "last_edit_date": 1563995768, "question_id": 57188203, "link": "https://stackoverflow.com/questions/57188203/is-qcompleter-broken-on-android", "title": "Is QCompleter broken on Android?", "body": "<p>I'm trying to build an app for both android and desktop with qt 5.13 and facing some problems with QCompleter and QLineEdit on android\nthe completer doesn't popup on android and when I finish insert a word that is in the list of the completer the completer doubles the content of QLineEdit and I can't clear the QLineEdit or do anything with it again , every time I touch it the contents is copied and pasted</p>\n\n<p>Operation Systems I tested on :</p>\n\n<p>Windows 10 x64 v1903</p>\n\n<p>Android 8.1 Xiaomi Redmi 5 Plus</p>\n\n<p>this is the code I'm using QCompleter in :</p>\n\n<p>in header file :</p>\n\n<pre><code>namespace Ui {\nclass DictionaryGui;\n}\n\nclass DictionaryGui : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    explicit DictionaryGui(QWidget *parent = nullptr);\n    ~DictionaryGui();\n\nprivate slots:\n    void on_SearchBtn_clicked();\n\nprivate:\n    Ui::DictionaryGui *ui;\n    QStringListModel mdl;\n    QCompleter completer;\n};\n</code></pre>\n\n<p>in cpp file</p>\n\n<pre><code>DictionaryGui::DictionaryGui(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::DictionaryGui),\n    completer(&amp;mdl)\n{\n    ui-&gt;setupUi(this);\n    QScroller::grabGesture(ui-&gt;ResultsList);\n    ui-&gt;DictionaryWidget-&gt;setStyleSheet(\"QWidget#DictionaryWidget {background-color: rgb(144, 202, 249);}\");\n    QString input_style = R\"##(QLineEdit {border: 1px solid #ccc;\n                         border-radius: 10px; }\n                            QLineEdit:focus {\n                               border: 3px solid #55aaff;\n                          }\n                          )##\";\n    ui-&gt;InputText-&gt;setStyleSheet(input_style);\n\n    int id = QFontDatabase::addApplicationFont(\":/icons/gulf-semibold.ttf\");\n    if (id != -1)\n    {\n        QString font_family = QFontDatabase::applicationFontFamilies(id).at(0);\n        QFont font(font_family, 14);\n        qDebug() &lt;&lt; \"[*] loaded the font : \" &lt;&lt; font_family;\n        ui-&gt;InputText-&gt;setFont(font);\n    }\n    else {\n        qDebug() &lt;&lt; \"[!] failed to load the font !\\n\";\n    }\n\n    QStringList list({\"word\", \"man\", \"human\", \"test\", \"world\", \"wonder\", \"what\",\n                      u8\"\u0643\u0644\u0645\u0629\", u8\"\u0643\u0644\u0627\u0645\" , u8\"\u0643\u0644\u0647\u0645\", u8\"\u0643\u0644\u0627\", u8\"\u0643\u0644\u0627\u0647\u0645\u0627\"});\n    mdl.setStringList(list);\n    completer.setCaseSensitivity(Qt::CaseInsensitive);\n    completer.setFilterMode(Qt::MatchStartsWith);\n    ui-&gt;InputText-&gt;setCompleter(&amp;completer);\n\n}\n</code></pre>\n\n<p>on windows this works well :</p>\n\n<p><a href=\"https://i.stack.imgur.com/fhI95.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fhI95.png\" alt=\"qcompleter windows\"></a></p>\n\n<p>but on android this the completer is broken</p>\n\n<p>Edit : I tested on a phone with Android 5 and the above code works but still doesn't work on android 8.1</p>\n"}, {"tags": ["c++", "vector", "stdvector", "stringstream", "push-back"], "answers": [{"tags": [], "owner": {"reputation": 134, "user_id": 5628682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4abd92ada7795ebcb92db170432025fb?s=128&d=identicon&r=PG&f=1", "display_name": "openingnow", "link": "https://stackoverflow.com/users/5628682/openingnow"}, "is_accepted": true, "score": 2, "last_activity_date": 1563989273, "creation_date": 1563989273, "answer_id": 57188333, "question_id": 57188177, "link": "https://stackoverflow.com/questions/57188177/issues-related-to-user-input-array-elements-in-one-line-in-c/57188333#57188333", "title": "Issues related to user input array elements in one line in c++", "body": "<p>std::cin remains <code>\\n</code> after <code>&gt;&gt;</code> operator. You can simply use <code>cin.get()</code> to remove newline character.</p>\n\n<p>fixed code:  </p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;sstream&gt;\n#include &lt;string&gt;\n#include&lt;vector&gt;\n#include&lt;algorithm&gt;\nusing namespace std;\n\nint main()\n{\n    int n,i,j,max=0,k,l;\n    cin&gt;&gt;n;\n    cin.get();\n    for(i=0;i&lt;n;i++)\n    {\n       vector&lt;int&gt; v1;\n       stringstream iss;\n       string s;\n       int value={0};\n       max=0;\n       getline(cin,s);\n       iss&lt;&lt;s;\n       while(iss&gt;&gt;value)\n       {\n          cout&lt;&lt;\"Pushing values\";\n          v1.push_back(value);\n       }\n       //cout&lt;&lt;\"After pushing\";\n       cout&lt;&lt;v1[0];\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Reference:<a href=\"https://stackoverflow.com/questions/28109679/why-does-cin-command-leaves-a-n-in-the-buffer\">Why does cin command leaves a &#39;\\n&#39; in the buffer?</a></p>\n"}, {"tags": [], "owner": {"reputation": 103, "user_id": 9094644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c61869fd16e430e0512686714a33058?s=128&d=identicon&r=PG", "display_name": "Slidy", "link": "https://stackoverflow.com/users/9094644/slidy"}, "is_accepted": false, "score": 3, "last_activity_date": 1563989282, "creation_date": 1563989282, "answer_id": 57188337, "question_id": 57188177, "link": "https://stackoverflow.com/questions/57188177/issues-related-to-user-input-array-elements-in-one-line-in-c/57188337#57188337", "title": "Issues related to user input array elements in one line in c++", "body": "<p>Let's have a look at what your input looks like with explicit newlines:</p>\n\n<pre><code>4\\n\n1 3 4\\n\n1 10 100\\n\n21 88 17\\n\n23 34 45\\n\n</code></pre>\n\n<p>After the <code>cin &gt;&gt; n</code> the remaining unread input will look like this:</p>\n\n<pre><code>\\n\n1 3 4\\n\n1 10 100\\n\n21 88 17\\n\n23 34 45\\n\n</code></pre>\n\n<p>After the first <code>getline</code> it'll look like this:</p>\n\n<pre><code>1 3 4\\n\n1 10 100\\n\n21 88 17\\n\n23 34 45\\n\n</code></pre>\n\n<p>See the issue? The first time you read a value from <code>cin</code> the line isn't completely read and the following <code>getline</code> reads the remainder of the line (which is an empty string). After that you try to read all the numbers in that line into the vector (no numbers are read because it's an empty string), and you try to read the first number in the vector (which will error because no numbers were added).</p>\n"}], "owner": {"reputation": 426, "user_id": 11503237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05c90c7e3016cf1af3f5a2dacb45cb83?s=128&d=identicon&r=PG&f=1", "display_name": "Hamsa", "link": "https://stackoverflow.com/users/11503237/hamsa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 57188333, "answer_count": 2, "score": 0, "last_activity_date": 1563989282, "creation_date": 1563988639, "question_id": 57188177, "link": "https://stackoverflow.com/questions/57188177/issues-related-to-user-input-array-elements-in-one-line-in-c", "title": "Issues related to user input array elements in one line in c++", "body": "<p>I am coding a very basic problem but I am stuck in reading input of an array in one row. I have used the technique used mentioned in <a href=\"https://stackoverflow.com/questions/32440156/how-to-user-input-the-array-elements-in-c-in-one-line\">How to user input the array elements in c++ in one line</a> but I see that it doesn't work and it gives 'segmentation fault` in subsequent execution steps. I have included my code below.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;sstream&gt;\n#include &lt;string&gt;\n#include&lt;vector&gt;\n#include&lt;algorithm&gt;\nusing namespace std;\n\nint main()\n{\n    int n,i,j,max=0,k,l;\n    cin&gt;&gt;n;\n    for(i=0;i&lt;n;i++)\n    {\n       vector&lt;int&gt; v1;\n       stringstream iss;\n       string s;\n       int value={0};\n       max=0;\n       getline(cin,s);\n       iss&lt;&lt;s;\n       while(iss&gt;&gt;value)\n       {\n          cout&lt;&lt;\"Pushing values\";\n          v1.push_back(value);\n       }\n       //cout&lt;&lt;\"After pushing\";\n       cout&lt;&lt;v1[0];\n    }\n    return 0;\n}\n</code></pre>\n\n<p>It gives segmentation fault in the line <code>cout&lt;&lt;v1[0];</code>. Actually values aren't being pushed into the <code>vector</code> which can be checked simply uncommenting <code>cout&lt;&lt;\"After pushing\";</code> and commenting <code>cout&lt;&lt;v1[0];</code>. </p>\n\n<p><strong>What is the problem here?</strong></p>\n\n<p>Actually my input looks like this:</p>\n\n<pre><code>4\n1 3 4\n1 10 100\n21 88 17\n23 34 45\n</code></pre>\n\n<p><strong>Also I am wondering how to separate the nos after reading in a string if a space is existent between them?</strong></p>\n"}, {"tags": ["c++", "design-patterns"], "comments": [{"owner": {"reputation": 4610, "user_id": 1301901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69d317ddb914c86d02139742571ab69f?s=128&d=identicon&r=PG", "display_name": "Ben Cottrell", "link": "https://stackoverflow.com/users/1301901/ben-cottrell"}, "edited": false, "score": 0, "creation_date": 1563993478, "post_id": 57188175, "comment_id": 100888604, "body": "It sounds like you&#39;ve got the application logic tied up in your View classes;  any shared logic like that should really exist independently of any View classes, consider looking into the Model-View-Presenter pattern to split the logic away from the Views.   Classes which inherit <code>CView</code> should only really deal with appearance and layout of their respective UI &quot;widgets&quot; without having any logic in them at all. -- e.g. button-click/event logic or validation or database stuff, etc. doesn&#39;t really belong in a &#39;View&#39; class, and probably doesn&#39;t want to be polluted by concerns related to MFC."}, {"owner": {"reputation": 2516, "user_id": 756290, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7162dbc5c24688265d001fecf8f1c9f6?s=128&d=identicon&r=PG", "display_name": "Scrontch", "link": "https://stackoverflow.com/users/756290/scrontch"}, "reply_to_user": {"reputation": 4610, "user_id": 1301901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69d317ddb914c86d02139742571ab69f?s=128&d=identicon&r=PG", "display_name": "Ben Cottrell", "link": "https://stackoverflow.com/users/1301901/ben-cottrell"}, "edited": false, "score": 0, "creation_date": 1563995186, "post_id": 57188175, "comment_id": 100889227, "body": "@BenCottrell, you may be right. But for the sake of argument, just ignore the CView information. Or pretend that we implement additional appearance related functionality."}], "answers": [{"comments": [{"owner": {"reputation": 2516, "user_id": 756290, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7162dbc5c24688265d001fecf8f1c9f6?s=128&d=identicon&r=PG", "display_name": "Scrontch", "link": "https://stackoverflow.com/users/756290/scrontch"}, "edited": false, "score": 0, "creation_date": 1563995028, "post_id": 57188763, "comment_id": 100889163, "body": "Yeah, that&#39;s what we have at the moment. But it looks very awkward. An I is not garantueed to be an A after all. And we think about implementing a particular case where we indeed derive from I but NOT from A."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 2516, "user_id": 756290, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7162dbc5c24688265d001fecf8f1c9f6?s=128&d=identicon&r=PG", "display_name": "Scrontch", "link": "https://stackoverflow.com/users/756290/scrontch"}, "edited": false, "score": 0, "creation_date": 1563995455, "post_id": 57188763, "comment_id": 100889345, "body": "@Scrontch <code>dynamic_cast</code> will behave correctly if you try to cast to a nonexistent subobject: the pointer version will return <code>nullptr</code>, which you can check or assert for, the reference version (<code>dynamic_cast&lt;A &amp;&gt;(*this)</code>) will throw <code>std::bad_alloc</code>."}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": false, "score": 0, "last_activity_date": 1563991117, "creation_date": 1563991117, "answer_id": 57188763, "question_id": 57188175, "link": "https://stackoverflow.com/questions/57188175/c-class-hierarchy-in-which-to-add-functionality-with-an-interface/57188763#57188763", "title": "C++ class hierarchy in which to add functionality with an interface", "body": "<p>The immediate solution to \"call <code>A::f</code> from <code>I::f</code> without overhauling everything\" would be <code>dynamic_cast</code>:</p>\n\n<pre><code>struct I {\n    void f() {\n        dynamic_cast&lt;A *&gt;(this)-&gt;f();\n    }\n};\n</code></pre>\n\n<p>Note that this performs a full-fledged RTTI graph traversal to perform the cross-cast through the unknown <code>Ax</code> dynamic type of the object, so it might be on the slow side of things.</p>\n"}], "owner": {"reputation": 2516, "user_id": 756290, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7162dbc5c24688265d001fecf8f1c9f6?s=128&d=identicon&r=PG", "display_name": "Scrontch", "link": "https://stackoverflow.com/users/756290/scrontch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1563991117, "creation_date": 1563988637, "question_id": 57188175, "link": "https://stackoverflow.com/questions/57188175/c-class-hierarchy-in-which-to-add-functionality-with-an-interface", "title": "C++ class hierarchy in which to add functionality with an interface", "body": "<p>C++. Imagine the following situation.</p>\n\n<p>There's a class hierarchy of classes deriving from some base class A.\nWe cannot modify A because it is outside of our scope.\n(Provided by a library, it is a MFC CView class, but that shouldn't matter here)</p>\n\n<p>So there are A1, A2 etc which are different classes somehow derived from A and providing specific functionality.</p>\n\n<p>Now imagine we define some new interface I to provide some new functionality.</p>\n\n<p>Classes for concrete objects of the application will inherit from both one of the As and I.\nLet's call them Bs. (There are again several of them, like B1 derived from A1 and I, B2 derived from A2 and I etc.)</p>\n\n<p>Now it happens that to implement the interface of I, there is a lot of common code that needs functionality from A.\nHow can we organize the class hierarchy without repeating ourselves too much.</p>\n\n<p>So for instance if there is a function I::f that needs to call A::f, for all derived classes Bn.\nIt seems like waste to re-implement I::f for every Bn.\nBut obviously, we cannot call A::f directly from I::f, as they aren't related.</p>\n\n<p>I hope you get the point.</p>\n\n<p>What is the pattern that can help us here?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1563988512, "post_id": 57188134, "comment_id": 100886338, "body": "Beware that you must not name your variable <code>const</code>. That is a reserved keyword with a special meaning."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 3, "creation_date": 1563988554, "post_id": 57188134, "comment_id": 100886349, "body": "I suggest that you learn about arrays and loops."}, {"owner": {"reputation": 697, "user_id": 1160404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/431cd02524d6ee187fcd1b3d9658498c?s=128&d=identicon&r=PG", "display_name": "Maddy", "link": "https://stackoverflow.com/users/1160404/maddy"}, "edited": false, "score": 2, "creation_date": 1563988575, "post_id": 57188134, "comment_id": 100886366, "body": "Make use of loops and vector of char *"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 6, "creation_date": 1563988583, "post_id": 57188134, "comment_id": 100886369, "body": "Welcome to Stack Overflow! Sounds like you could use a <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 2, "creation_date": 1563988673, "post_id": 57188134, "comment_id": 100886413, "body": "Can you please <a href=\"https://stackoverflow.com/posts/57188134/edit\">edit</a> your question and show us the implementation of <code>funcCall()</code>?"}, {"owner": {"reputation": 722, "user_id": 8049790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3927a57c023479b1d1edad79125dbf4e?s=128&d=identicon&r=PG&f=1", "display_name": "ejderuby", "link": "https://stackoverflow.com/users/8049790/ejderuby"}, "edited": false, "score": 0, "creation_date": 1563988768, "post_id": 57188134, "comment_id": 100886446, "body": "In addition to the above comments, we can&#39;t know how to remove your function calls without knowing what the function does."}, {"owner": {"reputation": 1, "user_id": 11831857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77273efd2dc481ec086ef3be92c9e54f?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/11831857/john"}, "edited": false, "score": 0, "creation_date": 1563989052, "post_id": 57188134, "comment_id": 100886567, "body": "Updated the question, I was using the const just as an example."}, {"owner": {"reputation": 1, "user_id": 11831857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77273efd2dc481ec086ef3be92c9e54f?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/11831857/john"}, "edited": false, "score": 0, "creation_date": 1563989179, "post_id": 57188134, "comment_id": 100886631, "body": "Also I was thinking about using a loop but wasn&#39;t sure how to implement it with more than one parameter For example: const char *args[]={a,b,c,d,e,f}"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1563989911, "post_id": 57188134, "comment_id": 100886975, "body": "@John We still can&#39;t help without the implementation of <code>funcCall()</code> Please still add it."}, {"owner": {"reputation": 1, "user_id": 11831857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77273efd2dc481ec086ef3be92c9e54f?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/11831857/john"}, "edited": false, "score": 0, "creation_date": 1563990594, "post_id": 57188134, "comment_id": 100887266, "body": "Added a basic overview of funcCall, but as I mentioned I intend to keep it a standalone  program which only cares about the three parameters it is passed. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 3966, "user_id": 2132213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a31de75b6e3603efbc437ab3475a757d?s=128&d=identicon&r=PG", "display_name": "Nick Matteo", "link": "https://stackoverflow.com/users/2132213/nick-matteo"}, "is_accepted": false, "score": 0, "last_activity_date": 1563990757, "last_edit_date": 1563990757, "creation_date": 1563990360, "answer_id": 57188569, "question_id": 57188134, "link": "https://stackoverflow.com/questions/57188134/how-do-i-call-a-function-multiple-times-with-different-parameters/57188569#57188569", "title": "How do I call a function multiple times with different parameters?", "body": "<p>You can make an array of the characters, and loop over it two at a time, like so:</p>\n\n<pre><code>char abcdef[] = \"Helllo\";\nconst char* hi = \"Hi\";\nfor (char* p = abcdef; p &lt; abcdef + 6; p += 2) {\n    funcCall(hi, p[0], p[1]);\n}\n</code></pre>\n\n<p>This differs from your example in that it passes characters as the second and third arguments to <code>funcCall</code>, rather than null-terminated character strings.</p>\n\n<p>After your edit, it looks like the parameters are really supposed to be strings, not just characters, so you'd want to have an array of strings rather than an array of characters.  So you can do something like</p>\n\n<pre><code>std::vector&lt;const char*&gt; args = {\"One\", \"Two\", \"Three\"};\nstd::vector&lt;const char*&gt; files = {\"A.txt\", \"B.txt\", \"C.dat\"};\nconst char* hi = \"Hi\";\nfor (int i = 0; i &lt; std::min(args.size(), files.size()); ++i) {\n    funcCall(hi, args[i], files[i]);\n}\n</code></pre>\n\n<p>where <code>funcCall</code> takes <code>const char*</code> arguments as in your example. (It would probably be better to use <code>std::string</code>.)</p>\n"}], "owner": {"reputation": 1, "user_id": 11831857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77273efd2dc481ec086ef3be92c9e54f?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/11831857/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 523, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1563990757, "creation_date": 1563988476, "last_edit_date": 1563990398, "question_id": 57188134, "link": "https://stackoverflow.com/questions/57188134/how-do-i-call-a-function-multiple-times-with-different-parameters", "title": "How do I call a function multiple times with different parameters?", "body": "<p>Fairly new to C++ here. I am trying to figure out if I can optimize my code by not calling the same function multiple times. For example see below:\nfuncCall is a standalone function so it cannot be removed, all it needs to know is those three paramters..</p>\n\n<pre><code>const char *a = \"H\";\nconst char *b = \"e\";\nconst char *c = \"l\";\nconst char *d = \"l\";\nconst char *e = \"o\";\nconst char *f = \"Hi\";\nfuncCall(f,a,b);\nfuncCall(f,c,d);\nfuncCall(f,d,e);\n\nvoid funcCall(const char *one, const char *two, const char *three)\n{\n//Kindly ignore the syntax\n//open the file and write the first two parameters to it\nfopen(three.txt);\nfwrite(one,two,three.txt); //ignore syntax\nfclose(three.txt);\n}\n</code></pre>\n"}, {"tags": ["c++", "clang", "libclang", "libtooling"], "owner": {"reputation": 21, "user_id": 6856266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d1239c4da3e4803c6725f71ef33897c?s=128&d=identicon&r=PG&f=1", "display_name": "Vaggelis Karafantalos", "link": "https://stackoverflow.com/users/6856266/vaggelis-karafantalos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1563987623, "creation_date": 1563987623, "question_id": 57187956, "link": "https://stackoverflow.com/questions/57187956/is-there-a-way-to-cross-reference-symbols-across-multiple-translation-units-usin", "title": "Is there a way to cross-reference symbols across multiple translation units using libtooling?", "body": "<p>I have a Lib and multiple Applications. I want to gather usage statistics about function calls to Lib's API from Apps. \nBasically my current process is:</p>\n\n<ul>\n<li>Parse the Lib for all functions/methods </li>\n<li>Output the info in a formatted way</li>\n<li>Use that output to gather stats from the Apps.</li>\n</ul>\n\n<p>I'm currently using the libclang API that offers <a href=\"https://clang.llvm.org/doxygen/group__CINDEX__CURSOR__XREF.html\" rel=\"nofollow noreferrer\">cross-referencing</a> in the form of USRs so I'm building an index of functions and use that when parsing the Apps. The problem is that this API is limited and that's why I want to move to Libtooling.</p>\n\n<p>I've looked through libtooling's API but I haven't been able to find anything similar. So my question is what would be the best way to achieve that \"cross-referencing\" using Libtooling.</p>\n\n<p>An example would be: </p>\n\n<pre><code>&gt; lib.h\n\n class Foo {\n public:\n       void bar();\n };\n\n\n&gt; app.cpp\n\n#include \"lib.h\"\n\nint main(void) {\n    Foo f;\n    f.bar();\n    return 0;\n}\n</code></pre>\n\n<p>And expected output would be a json file:</p>\n\n<pre><code>{\n  \"name\": \"bar\",\n  \"location\": { \"file\": \"lib.h\", \"line\": 5},\n  \"references\": [{\"file\": \"app.cpp\", \"line\": 8}]\n}\n</code></pre>\n"}, {"tags": ["c++", "rvalue-reference", "static-cast"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 3, "creation_date": 1563987725, "post_id": 57187928, "comment_id": 100885969, "body": "That&#39;s exactly what move construction does: potentially grab anything from the original object if it helps with optimization or is required by semantics."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1563988147, "post_id": 57187928, "comment_id": 100886158, "body": "I would suggest <a href=\"https://stackoverflow.com/questions/3413470/what-is-stdmove-and-when-should-it-be-used?rq=1\" title=\"what is stdmove and when should it be used\">stackoverflow.com/questions/3413470/&hellip;</a> and/or <a href=\"https://stackoverflow.com/questions/3106110/what-is-move-semantics?noredirect=1&amp;lq=1\" title=\"what is move semantics\">stackoverflow.com/questions/3106110/&hellip;</a> as a duplicate, because reading through there should explain all these test cases."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1563988826, "post_id": 57187928, "comment_id": 100886470, "body": "Note that this experiment can&#39;t be used to conclude that moving has <i>not</i> taken place, because a <i>moved-from</i> <code>std::string</code> is not guaranteed to be empty. You would have to use something like a <code>std::unique_ptr</code> to know for sure."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1564015692, "post_id": 57187928, "comment_id": 100895033, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3106110/what-is-move-semantics\">What is move semantics?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 58, "user_id": 8604444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbb31c2304346ed4c9119a0486ae6a77?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmad S", "link": "https://stackoverflow.com/users/8604444/ahmad-s"}, "edited": false, "score": 0, "creation_date": 1563988126, "post_id": 57188004, "comment_id": 100886146, "body": "This does not explain the whole story. Why doesn&#39;t <b>input</b> change after static_cast  or move under under cases1 and 3?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 58, "user_id": 8604444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbb31c2304346ed4c9119a0486ae6a77?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmad S", "link": "https://stackoverflow.com/users/8604444/ahmad-s"}, "edited": false, "score": 1, "creation_date": 1563988314, "post_id": 57188004, "comment_id": 100886236, "body": "@AhmadS In case 1 you do not create a new object, you just hold an (rvalue) reference to <code>input</code> in <code>result</code>. Just as if you wrote <code>std::string&amp; result = input;</code>. In case 3 you are confused because <code>std::move</code> does not by itself move things, it just makes them &quot;available for being moved from&quot;. I would suggest you read a comprehensive introduction into move semantics because this is not something to learn by trial and error (although I applaud getting in there and testing things by yourself)."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 58, "user_id": 8604444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbb31c2304346ed4c9119a0486ae6a77?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmad S", "link": "https://stackoverflow.com/users/8604444/ahmad-s"}, "edited": false, "score": 2, "creation_date": 1563988322, "post_id": 57188004, "comment_id": 100886241, "body": "@AhmadS because you&#39;re only juggling references, you&#39;re not constructing any object that might move-init itself."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1564012796, "last_edit_date": 1564012796, "creation_date": 1563987861, "answer_id": 57188004, "question_id": 57187928, "link": "https://stackoverflow.com/questions/57187928/static-cast-to-r-value-references-and-stdmove-change-their-argument-in-an-init/57188004#57188004", "title": "static_cast to r-value references and std::move change their argument in an initialization", "body": "<p>The behavior you are observing is not surprising and makes sense.</p>\n\n<p>When you use</p>\n\n<pre><code>  std::string result = static_cast&lt;std::string&amp;&amp;&gt;(input);\n</code></pre>\n\n<p>the move constructor is called to initialize <code>result</code>. It makes sense that the move constructor will <em>move</em> the contents of <code>input</code> to <code>result</code>.</p>\n\n<p>Contrast that with</p>\n\n<pre><code>  std::string&amp;&amp; result = static_cast&lt;std::string&amp;&amp;&gt;(input);\n</code></pre>\n\n<p>Here, <code>result</code> is not a new object. It's just a r-value referene to <code>input</code>. There is nothing here that requires the contents of <code>input</code> to be moved.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 0, "last_activity_date": 1563989372, "last_edit_date": 1563989372, "creation_date": 1563989055, "answer_id": 57188273, "question_id": 57187928, "link": "https://stackoverflow.com/questions/57187928/static-cast-to-r-value-references-and-stdmove-change-their-argument-in-an-init/57188273#57188273", "title": "static_cast to r-value references and std::move change their argument in an initialization", "body": "<blockquote>\n  <p>at least static_cast and std::move behave similarly since std::move does use static_cast</p>\n</blockquote>\n\n<p>Not only similarly, but they do exactly the same thing. <code>std::move</code> is a static cast to an rvalue reference.</p>\n\n<blockquote>\n  <p>Can someone explain this behavior?</p>\n</blockquote>\n\n<ol>\n<li><code>result</code> is a reference that refers to <code>input</code>. Binding a reference does not modify the referred object.</li>\n<li>An object is initialised. Since it is initialised from an rvalue, the move constructor is used. As per documentation of <code>std::string</code>, the <code>input</code> object is left in an unspecified but valid state, which may but might not be different from what it was before being moved from.</li>\n<li>The result of the cast is discarded. This has no side-effects, and <code>input</code> will not be modified.</li>\n</ol>\n"}], "owner": {"reputation": 58, "user_id": 8604444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbb31c2304346ed4c9119a0486ae6a77?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmad S", "link": "https://stackoverflow.com/users/8604444/ahmad-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 57188004, "answer_count": 2, "score": 0, "last_activity_date": 1564012796, "creation_date": 1563987507, "last_edit_date": 1563987935, "question_id": 57187928, "link": "https://stackoverflow.com/questions/57187928/static-cast-to-r-value-references-and-stdmove-change-their-argument-in-an-init", "title": "static_cast to r-value references and std::move change their argument in an initialization", "body": "<p>The following simple code shows that static_cast to r-value reference type and std::move may change their input argument (here variable <strong>inupt</strong>) in an initialization statement depending on the type of the object getting initialized. Can someone explain this behavior?</p>\n\n<p>I am at least glad that static_cast and std::move behave similarly since std::move does use static_cast under the hood</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main() {\n\n   {\n      std::string input(\"hello\");\n      std::string&amp;&amp; result = static_cast&lt;std::string&amp;&amp;&gt;(input);\n      std::cout &lt;&lt; \"cast case 1: input: \" &lt;&lt; input &lt;&lt; \" result: \" &lt;&lt; result &lt;&lt; std::endl; // prints: cast case 1: input: hello result: hello\n   } \n\n   {\n      std::string input(\"hello\");\n      std::string result = static_cast&lt;std::string&amp;&amp;&gt;(input);\n      std::cout &lt;&lt; \"cast case 2: input: \" &lt;&lt; input &lt;&lt; \" result: \" &lt;&lt; result &lt;&lt; std::endl; // prints: cast case 2: input:  result: hello\n   }\n\n   {\n      std::string input(\"hello\");\n      static_cast&lt;std::string&amp;&amp;&gt;(input);\n      std::cout &lt;&lt; \"cast case 3: input: \" &lt;&lt; input &lt;&lt; std::endl; // prints: cast case 3: input: hello\n   }\n\n   {\n      std::string input(\"hello\");\n      std::string&amp;&amp; result = std::move(input);\n      std::cout &lt;&lt; \"move case 1: input: \" &lt;&lt; input &lt;&lt; \" result: \" &lt;&lt; result &lt;&lt; std::endl; \n      // prints: move case 1: input: hello result: hello\n   } \n\n   {\n      std::string input(\"hello\");\n      std::string result = std::move(input);\n      std::cout &lt;&lt; \"move case 2: input: \" &lt;&lt; input &lt;&lt; \" result: \" &lt;&lt; result &lt;&lt; std::endl; \n      // prints: move case 2: input:  result: hello\n   }\n\n   {\n      std::string input(\"hello\");\n      std::move(input);\n      std::cout &lt;&lt; \"move case 3: input: \" &lt;&lt; input &lt;&lt; std::endl; \n      // prints: move case 3: input: hello\n   }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "cuda", "gpgpu"], "answers": [{"tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 3, "last_activity_date": 1564094485, "last_edit_date": 1564094485, "creation_date": 1563988527, "answer_id": 57188145, "question_id": 57187912, "link": "https://stackoverflow.com/questions/57187912/how-to-differentiate-gpu-threads-in-a-single-gpu-for-different-host-cpu-thread/57188145#57188145", "title": "how to differentiate GPU threads in a single GPU for different host CPU thread", "body": "<p>The solution for this very simple case is to divide up your array into pieces, one piece per thread.  For simplicity so that I don't have to handle a bunch of annoying corner case issues, lets assume that your array size (<code>N</code>) is whole-number divisible by <code>NUM_THREADS</code>.  It doesn't have to be this way, of course, but the arithmetic to divide it up isn't much different, but you have to handle rounding at each segment boundary, which I'd rather avoid.</p>\n\n<p>Here's an example that works based on the above assumption.  Each thread decides which portion of the array it is responsible for (based on its thread number and the total length) and only works on that section.</p>\n\n<pre><code>$ cat t1460.cu\n#include &lt;iostream&gt;\n#include &lt;math.h&gt;\n#include &lt;thread&gt;\n#include &lt;vector&gt;\n\n#include &lt;cuda.h&gt;\n\n\nusing namespace std;\n\nconst unsigned NUM_THREADS = 8;\n\n// Kernel function to add the elements of two arrays\n__global__\nvoid add_2(int n, float *x, float *y)\n{\n    int i = blockIdx.x*blockDim.x + threadIdx.x;\n    if(i &lt; n) {\n        y[i] = x[i] + y[i];\n    }\n}\n\n//\nvoid thread_func(int N, float *x, float *y, int idx_thread)\n{\n    cudaSetDevice(0);\n\n    int blockSize = 512;\n    int worksize = N/NUM_THREADS; // assumes whole-number divisibility\n    int gridSize = (worksize+blockSize-1)/blockSize;\n    cout&lt;&lt;\"blockSize: \"&lt;&lt;blockSize&lt;&lt;\" gridSize: \"&lt;&lt;gridSize&lt;&lt;endl;\n\n    // Run kernel on 1M elements on the GPU\n    add_2&lt;&lt;&lt;gridSize, blockSize&gt;&gt;&gt;(worksize, x+(idx_thread*worksize), y+(idx_thread*worksize));\n\n\n    // Wait for GPU to finish before accessing on host\n    cudaDeviceSynchronize();\n}\n\n\n//\nint main()\n{\n\n    int N = 1&lt;&lt;20;\n    float *x, *y;\n    // Allocate Unified Memory \u2013 accessible from CPU or GPU\n    cudaMallocManaged(&amp;x, N*sizeof(float));\n    cudaMallocManaged(&amp;y, N*sizeof(float));\n\n    // initialize x and y arrays on the host\n    for (int i = 0; i &lt; N; i++) {\n        x[i] = 1.0f;\n        y[i] = 2.0f;\n    }\n\n    //.. begin multithreading ..\n    vector&lt;std::thread&gt; t;\n    for(int i = 0; i&lt;NUM_THREADS; i++)\n        t.push_back(thread(thread_func, N, x, y, i));\n\n    for(int i = 0; i&lt;NUM_THREADS; i++)\n        t[i].join();\n\n    // Check for errors (all values should be 3.0f)\n    float maxError = 0.0f;\n    for (int i = 0; i &lt; N; i++) {\n        if(!(i%10000))\n            std::cout&lt;&lt;i&lt;&lt;\" \"&lt;&lt;y[i]&lt;&lt;std::endl;\n        maxError = fmaxf(maxError, fabs(y[i]-3.0f));\n    }\n    std::cout &lt;&lt; \"Max error: \" &lt;&lt; maxError &lt;&lt; std::endl;\n\n    // Free memory\n    cudaFree(x);\n    cudaFree(y);\n\n    return 0;\n}\n$ nvcc t1460.cu -o t1460 -std=c++11\n$ cuda-memcheck ./t1460\n========= CUDA-MEMCHECK\nblockSize: blockSize: 512 gridSize: 256512blockSize:  gridSize:\nblockSize: blockSize: 512blockSize:  gridSize: 256512\n gridSize: 256\nblockSize: 512 gridSize: 256\nblockSize: 512 gridSize: 256\n512 gridSize: 256\n256\n512 gridSize: 256\n0 3\n10000 3\n20000 3\n30000 3\n40000 3\n50000 3\n60000 3\n70000 3\n80000 3\n90000 3\n100000 3\n110000 3\n120000 3\n130000 3\n140000 3\n150000 3\n160000 3\n170000 3\n180000 3\n190000 3\n200000 3\n210000 3\n220000 3\n230000 3\n240000 3\n250000 3\n260000 3\n270000 3\n280000 3\n290000 3\n300000 3\n310000 3\n320000 3\n330000 3\n340000 3\n350000 3\n360000 3\n370000 3\n380000 3\n390000 3\n400000 3\n410000 3\n420000 3\n430000 3\n440000 3\n450000 3\n460000 3\n470000 3\n480000 3\n490000 3\n500000 3\n510000 3\n520000 3\n530000 3\n540000 3\n550000 3\n560000 3\n570000 3\n580000 3\n590000 3\n600000 3\n610000 3\n620000 3\n630000 3\n640000 3\n650000 3\n660000 3\n670000 3\n680000 3\n690000 3\n700000 3\n710000 3\n720000 3\n730000 3\n740000 3\n750000 3\n760000 3\n770000 3\n780000 3\n790000 3\n800000 3\n810000 3\n820000 3\n830000 3\n840000 3\n850000 3\n860000 3\n870000 3\n880000 3\n890000 3\n900000 3\n910000 3\n920000 3\n930000 3\n940000 3\n950000 3\n960000 3\n970000 3\n980000 3\n990000 3\n1000000 3\n1010000 3\n1020000 3\n1030000 3\n1040000 3\nMax error: 0\n========= ERROR SUMMARY: 0 errors\n$\n</code></pre>\n\n<p>Of course, for this trivial example, there's no particular benefit to using 4 CPU threads.  I assume that what was being asked here was for a design pattern to enable other activity.  Multiple CPU threads might be a convenient way to arrange other work.  For example, I might have a system that is processing data from 4 cameras.  It might be convenient to organize my camera processing as 4 independent threads, one for each camera.  That system might only have 1 GPU, and it's certainly plausible that each of the 4 threads might want to issue independent work to that GPU.  This design pattern could easily be adapted to that use case, to pick one example.  It might even be that the 4 camera CPU threads would need to combine some data into a single array on the GPU, and this pattern could be used in that case.</p>\n"}, {"tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": false, "score": 1, "last_activity_date": 1564091145, "creation_date": 1564091145, "answer_id": 57210513, "question_id": 57187912, "link": "https://stackoverflow.com/questions/57187912/how-to-differentiate-gpu-threads-in-a-single-gpu-for-different-host-cpu-thread/57210513#57210513", "title": "how to differentiate GPU threads in a single GPU for different host CPU thread", "body": "<blockquote>\n  <p>When multiple CPU thread dispatch jobs to a single GPU, what's the best way to differentiate GPU threads so that the multiple CPU thread does not simply repeat each other </p>\n</blockquote>\n\n<p>Let me answer that more generally than regarding your specific example:</p>\n\n<ul>\n<li>There is no inherent benefit in using multiple threads to enqueue work on a GPU. If you have each thread wait on a CUDA queue, then it could make sense, but that's not necessarily the right thing to do.</li>\n<li>Unless you're explicitly scheduling memory transfers, there's no guaranteed inherent benefit to split up the work you schedule into small pieces. You could just schedule a single kernel to add up the entire array. Remember - a kernel is made up of thousands or millions of 'threads' on the GPU side; CPU threads don't help GPU parallelism at all.</li>\n<li>It makes more sense to have different threads schedule work when they come to realize it exists independently of each other.</li>\n<li>It is often a good idea to write a kernel's output someplace different than its input. It requires more memory during the computation, but it prevents the kind of problems you describe - of overlapping changes of the same value, of having to carefully consider which scheduled kernel executes first etc. Thus, for example, you could have implemented:\n\n<pre><code>__global__ void add_2(int  n, float*  result, const float *x, const float *y)\n{\n    int i = blockIdx.x * blockDim.x + threadIdx.x;\n    if (i &lt; n) {\n        z[i] = x[i] + y[i];\n    }\n}\n</code></pre>\n\nif you can't do that, then you need careful partitioning of the the input-output arrays to schedule the work, as suggested in @RobertCrovella's answer.</li>\n<li><p>Use the <code>__restrict__</code> keyword (even though it's not standard C++) to indicate that the areas the parameters point to don't overlap. That speeds things up. See:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/43235899/cuda-restrict-tag-usage\">CUDA: __restrict__ tag usage</a> </li>\n<li>The <a href=\"https://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#restrict\" rel=\"nofollow noreferrer\"><code>__restrict__</code> section</a> of the <a href=\"https://docs.nvidia.com/cuda/cuda-c-programming-guide/\" rel=\"nofollow noreferrer\">CUDA C programming guide</a>.</li>\n</ul></li>\n</ul>\n"}], "owner": {"reputation": 297, "user_id": 10072879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de3fdbb0132757276c68d0c4e31d7784?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/10072879/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 57188145, "answer_count": 2, "score": 0, "last_activity_date": 1564094485, "creation_date": 1563987439, "last_edit_date": 1564090339, "question_id": 57187912, "link": "https://stackoverflow.com/questions/57187912/how-to-differentiate-gpu-threads-in-a-single-gpu-for-different-host-cpu-thread", "title": "how to differentiate GPU threads in a single GPU for different host CPU thread", "body": "<p>When multiple CPU thread dispatch jobs to a single GPU, what's the best way to differentiate GPU threads so that the multiple  CPU thread does not simply repeat each other  </p>\n\n<p>the following code calculate the sum of two large arrays element by element. The correct result is: 3.0.  When using 1 CPU, the code do the right thing. Then running with 8 CPUs, the output becomes 10 because the kernel duplicate the calculation 8 times. I'm looking for a way such that each CPU calculate 1/8 of the sum that not duplicate each other.  </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;math.h&gt;\n#include &lt;thread&gt;\n#include &lt;vector&gt;\n\n#include &lt;cuda.h&gt;\n\n\nusing namespace std;\n\nconst unsigned NUM_THREADS = std::thread::hardware_concurrency();  \n\n// Kernel function to add the elements of two arrays\n__global__\nvoid add_2(int n, float *x, float *y)\n{\n    int i = blockIdx.x*blockDim.x + threadIdx.x;\n    if(i &lt; n) {\n        y[i] = x[i] + y[i];\n    }\n}\n\n//\nvoid thread_func(int N, float *x, float *y, int idx_thread)\n{   \n    cudaSetDevice(0); \n\n    int blockSize;   \n    int minGridSize; \n    int gridSize;    \n\n    cudaOccupancyMaxPotentialBlockSize( &amp;minGridSize, &amp;blockSize, add_2, 0, N);\n    // Round up according to array size\n    gridSize = (N + blockSize - 1) / blockSize;\n    //gridSize /= NUM_THREADS +1;  \n\n    cout&lt;&lt;\"blockSize: \"&lt;&lt;blockSize&lt;&lt;\" minGridSize: \"&lt;&lt;minGridSize&lt;&lt;\" gridSize: \"&lt;&lt;gridSize&lt;&lt;endl;\n\n    // Run kernel on 1M elements on the GPU\n    add_2&lt;&lt;&lt;gridSize, blockSize&gt;&gt;&gt;(N, x, y);\n\n\n    // Wait for GPU to finish before accessing on host\n    cudaDeviceSynchronize();\n}\n\n\n//\nint main()\n{\n\n    int N = 1&lt;&lt;20;\n    float *x, *y;\n    // Allocate Unified Memory \u2013 accessible from CPU or GPU\n    cudaMallocManaged(&amp;x, N*sizeof(float));\n    cudaMallocManaged(&amp;y, N*sizeof(float));\n\n    // initialize x and y arrays on the host\n    for (int i = 0; i &lt; N; i++) {\n        x[i] = 1.0f;\n        y[i] = 2.0f;\n    }\n\n    //.. begin multithreading ..\n    vector&lt;std::thread&gt; t;\n    for(int i = 0; i&lt;NUM_THREADS; i++)\n        t.push_back(thread(thread_func, N, x, y, i));\n\n    for(int i = 0; i&lt;NUM_THREADS; i++)\n        t[i].join();\n\n    // Check for errors (all values should be 3.0f)\n    float maxError = 0.0f;\n    for (int i = 0; i &lt; N; i++) {\n        if(!(i%10000))\n            std::cout&lt;&lt;i&lt;&lt;\" \"&lt;&lt;y[i]&lt;&lt;std::endl;\n        maxError = fmax(maxError, fabs(y[i]-3.0f));\n    }\n    std::cout &lt;&lt; \"Max error: \" &lt;&lt; maxError &lt;&lt; std::endl;\n\n    // Free memory\n    cudaFree(x);\n    cudaFree(y);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>blockSize: 1024 minGridSize: 16 gridSize: 1024\n\n..........\n\nblockSize: 1024 minGridSize: 16 gridSize: 1024\n\n0 10\n\n10000 10\n\n20000 10\n\n...\n\n1020000 10\n\n1030000 10\n\n1040000 10\n\nMax error: 7\n</code></pre>\n"}, {"tags": ["c++", "arduino"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1563988557, "post_id": 57187863, "comment_id": 100886352, "body": "<code>Serial</code> is not declared in the code you&#39;ve shown. To me, this is a sign that we need more context."}, {"owner": {"reputation": 2328, "user_id": 3940445, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/jzCJw.jpg?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/3940445/carlton"}, "edited": false, "score": 1, "creation_date": 1563994104, "post_id": 57187863, "comment_id": 100888848, "body": "@Chipster Serial is Arduinos way of writing from the arduino board to a &quot;serial monitor&quot; on the computer. See <a href=\"https://www.arduino.cc/reference/en/language/functions/communication/serial/\" rel=\"nofollow noreferrer\">arduino.cc/reference/en/language/functions/communication/ser&zwnj;&#8203;ial</a> But if there is anything else I can provide let me know, please. Thanks."}, {"owner": {"reputation": 1398, "user_id": 113877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f6ce36d95dac14f8756fd1b96bfb919?s=128&d=identicon&r=PG", "display_name": "Chris Ryding", "link": "https://stackoverflow.com/users/113877/chris-ryding"}, "edited": false, "score": 0, "creation_date": 1564024951, "post_id": 57187863, "comment_id": 100896522, "body": "Double check that you are assigning the correct callback functions to those events. It sounds like the code is calling default handlers rather than your code."}, {"owner": {"reputation": 1428, "user_id": 2819922, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e61964f3e5cdcde3dc90370e0cdfe2d4?s=128&d=identicon&r=PG&f=1", "display_name": "datafiddler", "link": "https://stackoverflow.com/users/2819922/datafiddler"}, "edited": false, "score": 0, "creation_date": 1564049138, "post_id": 57187863, "comment_id": 100906811, "body": "I guess, your problem is somehow related to <code>_packetcb</code> and you&#39;re hiding the relevant part."}, {"owner": {"reputation": 2328, "user_id": 3940445, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/jzCJw.jpg?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/3940445/carlton"}, "reply_to_user": {"reputation": 1398, "user_id": 113877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f6ce36d95dac14f8756fd1b96bfb919?s=128&d=identicon&r=PG", "display_name": "Chris Ryding", "link": "https://stackoverflow.com/users/113877/chris-ryding"}, "edited": false, "score": 0, "creation_date": 1564056535, "post_id": 57187863, "comment_id": 100910789, "body": "@ChrisRyding I added some more code under EDIT"}, {"owner": {"reputation": 2328, "user_id": 3940445, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/jzCJw.jpg?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/3940445/carlton"}, "reply_to_user": {"reputation": 1428, "user_id": 2819922, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e61964f3e5cdcde3dc90370e0cdfe2d4?s=128&d=identicon&r=PG&f=1", "display_name": "datafiddler", "link": "https://stackoverflow.com/users/2819922/datafiddler"}, "edited": false, "score": 0, "creation_date": 1564056547, "post_id": 57187863, "comment_id": 100910799, "body": "@datafiddler I added some more code under EDIT"}], "owner": {"reputation": 2328, "user_id": 3940445, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/jzCJw.jpg?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/3940445/carlton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564064085, "creation_date": 1563987236, "last_edit_date": 1564064085, "question_id": 57187863, "link": "https://stackoverflow.com/questions/57187863/callback-function-not-called", "title": "Callback function not called?", "body": "<p>I have 2 callback functions in an Arduino file (.ino, c++):</p>\n\n<pre><code>void incomingPacket(const char* subject, const char* message){\n  Serial.print(\"subject: \");\n  Serial.println(subject);\n  Serial.print(\"message: \");\n  Serial.println(message);\n}\n\nvoid connectedProtocol(bool connected){\n  if(connected){\n    Serial.println(\"protocol server connected\");  \n  }else{\n    Serial.println(\"protocol server disconnected\");  \n  }\n}\n</code></pre>\n\n<p>And in my Arduino file I have a custom class <code>UDPProtocol protocol(Udp)</code> which calls the callback functions after certain events, like:</p>\n\n<pre><code> _connectedcb(setTo);    //this calls connectedProtocol callback in Arduino from UDPProtocol class\n</code></pre>\n\n<p>This above works fine, it calls the callback function <code>connectedProtocol()</code> with correct boolean value. However, when trying to call <code>incomingPacket()</code> callback function, nothing happens in my Arduino file. Method that calls the callback:</p>\n\n<pre><code>//this is from UDPProtocol class\nvoid UDPProtocol::readPacketContents(char* content){\n        if(strlen(content)){                                //if content size is greater than 0\n        const char* somemessage = \"Hellomessage\";\n        const char* subject;\n        const char* message;\n        subject = &amp;somemessage[0];                          //this depends on the actual format of udp packet\n        message = &amp;somemessage[1];\n        _packetcb(subject,message);\n        }\n        _buffer[0] = 0;\n    }\n</code></pre>\n\n<p>Whenever this method runs, callback is not called in Arduino. Even if I try to fake the message like: </p>\n\n<pre><code>void UDPProtocol::readPacketContents(char* content){\n        if(strlen(content)){                                //if content size is greater than 0\n            const char* somemessage = \"Hellomessage\";\n            const char* subject;\n            const char* message;\n            subject = &amp;somemessage[0];                          //this depends on the actual format of udp packet\n            message = &amp;somemessage[1];\n            _packetcb(subject,message);\n        }\n        _buffer[0] = 0;\n    }\n</code></pre>\n\n<p>Still nothing happens (if(strlen(content)) does equal true). Any suggestions?</p>\n\n<p>EDIT:</p>\n\n<p>UDPProtocol.h file:</p>\n\n<pre><code>typedef void (*PackedCallback)(const char* subject, const char* message);\nPackedCallback _packetcb;\n</code></pre>\n\n<p>UDPProtocol.cpp file:</p>\n\n<pre><code>void UDPProtocol::setPacketCallback(PackedCallback func){\n    this-&gt;_packetcb = func;\n}\n</code></pre>\n\n<p>In Arduino.ino:</p>\n\n<pre><code>protocol.setPacketCallback(incomingPacket);    //defined in this question above\n</code></pre>\n\n<p>EDIT 2:</p>\n\n<p>I created a gist with the full code:</p>\n\n<p><a href=\"https://gist.github.com/aliamid93/64ba2ed0e06b1f9b4401474646f8083e\" rel=\"nofollow noreferrer\">https://gist.github.com/aliamid93/64ba2ed0e06b1f9b4401474646f8083e</a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3101, "user_id": 2027196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90b1ba74298036dc163149d485268fa4?s=128&d=identicon&r=PG", "display_name": "JohnFilleau", "link": "https://stackoverflow.com/users/2027196/johnfilleau"}, "edited": false, "score": 0, "creation_date": 1563987258, "post_id": 57187834, "comment_id": 100885798, "body": "The compiler could be seeing that b1 is never used again, and instead using the public default move operator. Try setting the move operator to private and see if this happens."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1563987323, "post_id": 57187834, "comment_id": 100885819, "body": "Assignment can only occur to an object that already exists. Here, <code>b2</code> is a new object so it&#39;s being constructed."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 3101, "user_id": 2027196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90b1ba74298036dc163149d485268fa4?s=128&d=identicon&r=PG", "display_name": "JohnFilleau", "link": "https://stackoverflow.com/users/2027196/johnfilleau"}, "edited": false, "score": 3, "creation_date": 1563987328, "post_id": 57187834, "comment_id": 100885823, "body": "@John That&#39;s not how it works. Optimizations do not allow the compiler to ignore the language rules. To be used with the move constructor, objects need to be actual temporaries according to the language, not just their usage."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 3101, "user_id": 2027196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90b1ba74298036dc163149d485268fa4?s=128&d=identicon&r=PG", "display_name": "JohnFilleau", "link": "https://stackoverflow.com/users/2027196/johnfilleau"}, "edited": false, "score": 1, "creation_date": 1563987401, "post_id": 57187834, "comment_id": 100885849, "body": "@John No need to guess. It&#39;s copy <i>initialization</i>, no assignment operator involved at all."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1563987493, "post_id": 57187834, "comment_id": 100885886, "body": "Regarding title: Deleting an assignment operator is different thing from declaring it private. As such, the title is highly misleading."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1563987693, "post_id": 57187834, "comment_id": 100885963, "body": "@errorika not that it changes the substance of the issue. While the two are different, you&#39;d expect the same, or at least similar behavior."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 1, "creation_date": 1564006691, "post_id": 57187834, "comment_id": 100893361, "body": "<code>B b2 = b1;</code> looks like an assignment but is not, it&#39;s only uses a constructor. This can be confusing when first encountered."}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 2309045, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZ7k.png?s=128&g=1", "display_name": "Longarmx", "link": "https://stackoverflow.com/users/2309045/longarmx"}, "edited": false, "score": 1, "creation_date": 1563996590, "post_id": 57187875, "comment_id": 100889871, "body": "Instead of making the copy constructor private, it would be better to delete it if your intention is to make the class non-copy-constructible. It will better show intent in the code and compiler errors."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "is_accepted": false, "score": 2, "last_activity_date": 1564003378, "last_edit_date": 1564003378, "creation_date": 1563987281, "answer_id": 57187875, "question_id": 57187834, "link": "https://stackoverflow.com/questions/57187834/c-assignment-works-with-deleted-assignment-operator/57187875#57187875", "title": "C++ assignment works with deleted assignment operator?", "body": "<p>That's the copy constructor getting called, not the assignment operator. </p>\n\n<p>The reason being is that when you initialize a variable, a constructor (in this case, the copy constructor) gets called. </p>\n\n<pre><code>B b2 = b1; // construction\n</code></pre>\n\n<p>This is different from assignment</p>\n\n<pre><code>b2 = b1; // b2 is already declared, so assignment\n</code></pre>\n\n<p>To stop this behavior, just delete your copy constructor. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": true, "score": 6, "last_activity_date": 1563997294, "last_edit_date": 1563997294, "creation_date": 1563987320, "answer_id": 57187884, "question_id": 57187834, "link": "https://stackoverflow.com/questions/57187834/c-assignment-works-with-deleted-assignment-operator/57187884#57187884", "title": "C++ assignment works with deleted assignment operator?", "body": "<p><code>B b2 = b1</code> does not use the assignment operator, because it's not <em>assignment</em>, it's <em>copy initialization</em> - using constructor, not assignment operator.</p>\n\n<p>See also <a href=\"https://en.cppreference.com/w/cpp/language/copy_initialization\" rel=\"nofollow noreferrer\">copy initialization</a></p>\n"}], "owner": {"reputation": 3079, "user_id": 1226655, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Yyz1i.png?s=128&g=1", "display_name": "IDDQD", "link": "https://stackoverflow.com/users/1226655/iddqd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 57187884, "answer_count": 2, "score": 2, "last_activity_date": 1564003378, "creation_date": 1563987122, "question_id": 57187834, "link": "https://stackoverflow.com/questions/57187834/c-assignment-works-with-deleted-assignment-operator", "title": "C++ assignment works with deleted assignment operator?", "body": "<p>I have a piece of code that looks something like this:</p>\n\n<pre><code>class B\n{\nprivate:\n    const A&amp; obj;\n    size_t val;\n\n    // private - prohibited\n    B&amp; operator=(const B&amp; other);\n\npublic:\n    B(const A&amp; obj_): obj(obj_)\n    {\n        val = 0;\n    }\n};\n\nclass C\n{\n    void func()\n    {\n        A a1;\n        B b1(a1);\n        B b2 = b1; // should throw error?\n    }\n}\n</code></pre>\n\n<p><code>Class B</code> has a private assignment operator. Nonetheless assignment in <code>C::func()</code> compiles without errors. But how?</p>\n"}, {"tags": ["c++", "regex"], "answers": [{"comments": [{"owner": {"reputation": 5861, "user_id": 3042117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/dc6ec10c58136fc12bf83fe45001d672?s=128&d=identicon&r=PG", "display_name": "Iter Ator", "link": "https://stackoverflow.com/users/3042117/iter-ator"}, "edited": false, "score": 0, "creation_date": 1563987386, "post_id": 57187848, "comment_id": 100885845, "body": "But in this case if I extend the regex with a new entry, I have manually check two more elements from <code>reg_match</code>"}, {"owner": {"reputation": 142455, "user_id": 5133585, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/dfqcw.png?s=128&g=1", "display_name": "Sweeper", "link": "https://stackoverflow.com/users/5133585/sweeper"}, "reply_to_user": {"reputation": 5861, "user_id": 3042117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/dc6ec10c58136fc12bf83fe45001d672?s=128&d=identicon&r=PG", "display_name": "Iter Ator", "link": "https://stackoverflow.com/users/3042117/iter-ator"}, "edited": false, "score": 0, "creation_date": 1563987798, "post_id": 57187848, "comment_id": 100886001, "body": "@IterAtor As you can see, Turtlefight has written an answer that contains only 2 groups, but their regex matches more than your original regex does. I am not sure whether your regex can be rewritten with only 2 groups. But you could always just put all the alternatives in an array, loop through the array and check each alternative."}, {"owner": {"reputation": 142455, "user_id": 5133585, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/dfqcw.png?s=128&g=1", "display_name": "Sweeper", "link": "https://stackoverflow.com/users/5133585/sweeper"}, "reply_to_user": {"reputation": 5861, "user_id": 3042117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/dc6ec10c58136fc12bf83fe45001d672?s=128&d=identicon&r=PG", "display_name": "Iter Ator", "link": "https://stackoverflow.com/users/3042117/iter-ator"}, "edited": false, "score": 0, "creation_date": 1563988554, "post_id": 57187848, "comment_id": 100886350, "body": "@IterAtor Try this regex: <code>(?=\\([A-Z]+-&gt;[A-Z]+\\)|\\[[A-Z]+=&gt;[A-Z]+\\])[[(]([A-Z]+)(?:-&gt;|=&zwnj;&#8203;&gt;)([A-Z]+)[)\\]]</code>. It uses only 2 groups, but it&#39;s quite troublesome to add new alternatives. If I were you I would just go with a for loop that loops through all the alternatives."}], "tags": [], "owner": {"reputation": 142455, "user_id": 5133585, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/dfqcw.png?s=128&g=1", "display_name": "Sweeper", "link": "https://stackoverflow.com/users/5133585/sweeper"}, "is_accepted": false, "score": 1, "last_activity_date": 1563987174, "creation_date": 1563987174, "answer_id": 57187848, "question_id": 57187750, "link": "https://stackoverflow.com/questions/57187750/how-to-match-two-groups-with-different-surroundings-c/57187848#57187848", "title": "How to match two groups with different surroundings? C++", "body": "<p>This is because when you are matching <code>text1</code>, groups 1 and 2 gets matched:</p>\n\n<pre><code>\\\\(([A-Z]+)-&gt;([A-Z]+)\\\\)|\\\\[([A-Z]+)=&gt;([A-Z]+)\\\\]\n    ^^^^^^     ^^^^^\n</code></pre>\n\n<p>Whereas in <code>text2</code>, groups 3 and 4 gets matched:</p>\n\n<pre><code>\\\\(([A-Z]+)-&gt;([A-Z]+)\\\\)|\\\\[([A-Z]+)=&gt;([A-Z]+)\\\\]\n                             ^^^^^^     ^^^^^\n</code></pre>\n\n<p>So you have to use <code>reg_match[3]</code> and <code>reg_match[4]</code> in the case of <code>text2</code>.</p>\n\n<p>Of course, a more versatile solution would be to check whether <code>reg_match[1]</code> is empty first. If it is, use group 1 and 2, otherwise, use group 3 and 4.</p>\n"}, {"tags": [], "owner": {"reputation": 3281, "user_id": 8411406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03feb45788181f61b08fdb8b5d26968e?s=128&d=identicon&r=PG", "display_name": "Turtlefight", "link": "https://stackoverflow.com/users/8411406/turtlefight"}, "is_accepted": false, "score": 0, "last_activity_date": 1563987558, "creation_date": 1563987558, "answer_id": 57187943, "question_id": 57187750, "link": "https://stackoverflow.com/questions/57187750/how-to-match-two-groups-with-different-surroundings-c/57187943#57187943", "title": "How to match two groups with different surroundings? C++", "body": "<p>Alternatively to the given answer by @Sweeper you could rewrite your regex to only have 2 match groups:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// Example program\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;regex&gt;\n\nint main()\n{\n  std::string text1 = \"(X-&gt;Y)\";\n  std::string text2 = \"[X=&gt;Y]\";\n\n  std::regex my_regex(\"[[(]([A-Z]+)(?:-&gt;|=&gt;)([A-Z]+)[)\\\\]]\");\n  std::smatch reg_match;\n\n  if(std::regex_match(text1, reg_match, my_regex)) {\n      std::cout &lt;&lt; reg_match[1].str() &lt;&lt; ' ' &lt;&lt; reg_match[2].str() &lt;&lt; std::endl;\n  } else {\n      std::cout &lt;&lt; \"Nothing\" &lt;&lt; std::endl;\n  }\n}\n</code></pre>\n\n<p>This however has the small disadvantage that it will also match a few more variants:</p>\n\n<ul>\n<li><code>(X=&gt;Y)</code></li>\n<li><code>[X-&gt;Y)</code></li>\n<li><code>(X=&gt;Y]</code></li>\n<li>etc...</li>\n</ul>\n"}], "owner": {"reputation": 5861, "user_id": 3042117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/dc6ec10c58136fc12bf83fe45001d672?s=128&d=identicon&r=PG", "display_name": "Iter Ator", "link": "https://stackoverflow.com/users/3042117/iter-ator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1563987558, "creation_date": 1563986734, "question_id": 57187750, "link": "https://stackoverflow.com/questions/57187750/how-to-match-two-groups-with-different-surroundings-c", "title": "How to match two groups with different surroundings? C++", "body": "<p>I would like to parse strings like <code>(X-&gt;Y)</code> or <code>[X=&gt;Y]</code>, and extract the X and Y parts. I did it like this:</p>\n\n<pre><code>// Example program\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;regex&gt;\n\nint main()\n{\n  std::string text1 = \"(X-&gt;Y)\";\n  std::string text2 = \"[X=&gt;Y]\";\n\n  std::regex my_regex(\"\\\\(([A-Z]+)-&gt;([A-Z]+)\\\\)|\\\\[([A-Z]+)=&gt;([A-Z]+)\\\\]\");\n  std::smatch reg_match;\n\n  if(std::regex_match(text1, reg_match, my_regex)) {\n      std::cout &lt;&lt; reg_match[1].str() &lt;&lt; ' ' &lt;&lt; reg_match[2].str() &lt;&lt; std::endl;\n  } else {\n      std::cout &lt;&lt; \"Nothing\" &lt;&lt; std::endl;\n  }\n\n\n}\n</code></pre>\n\n<p>It works with <code>text1</code>, but it gives an empty result with <code>text2</code>. What do I wrong? Why isn't X and Y in <code>reg_match[1]</code> and <code>reg_match[2]</code> if I run the code with text2?</p>\n"}, {"tags": ["c++", "geometry"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1563987352, "post_id": 57187706, "comment_id": 100885836, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> -- in this case, you need the type of all variables used (even fake types!  All that matters is that the types you use display a similar problem), and a tiny test harness that displays the problem.  Second, please describe what goes wrong -- &quot;they are not between&quot; -- are they on the moon?  On top of one of the points?  WHY THE MYSTERY?  I mean, I could say &quot;well, you have some integer math there if some of your types are integers, and division in integers probably isn&#39;t what you want&quot;, but that would be a guess with only a ~80% chance of being right."}, {"owner": {"reputation": 27, "user_id": 11682232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d4c0124e43623ab12de62a997c62777?s=128&d=identicon&r=PG&f=1", "display_name": "ak-dev", "link": "https://stackoverflow.com/users/11682232/ak-dev"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1564022938, "post_id": 57187706, "comment_id": 100896217, "body": "@Yakk-AdamNevraumont I understand your concern. Thanks for the guidelines and help!"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 11682232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d4c0124e43623ab12de62a997c62777?s=128&d=identicon&r=PG&f=1", "display_name": "ak-dev", "link": "https://stackoverflow.com/users/11682232/ak-dev"}, "edited": false, "score": 0, "creation_date": 1564022847, "post_id": 57187911, "comment_id": 100896209, "body": "Thank you for the clarification, that was what the problem was!"}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": true, "score": 1, "last_activity_date": 1563987436, "creation_date": 1563987436, "answer_id": 57187911, "question_id": 57187706, "link": "https://stackoverflow.com/questions/57187706/how-to-insert-k-number-of-points-between-two-points-in-c/57187911#57187911", "title": "How to insert &quot;k&quot; number of points between two points in C++?", "body": "<p><code>(1. - j/num_k)</code> will almost always evaluate to 1, because <code>j/num_k</code> is done using integer math, which will mean it will be zero except on the last iteration.</p>\n\n<p>Use  <code>(1. - double(j)/num_k)</code> instead.</p>\n"}], "owner": {"reputation": 27, "user_id": 11682232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d4c0124e43623ab12de62a997c62777?s=128&d=identicon&r=PG&f=1", "display_name": "ak-dev", "link": "https://stackoverflow.com/users/11682232/ak-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 57187911, "answer_count": 1, "score": 0, "last_activity_date": 1563987436, "creation_date": 1563986590, "question_id": 57187706, "link": "https://stackoverflow.com/questions/57187706/how-to-insert-k-number-of-points-between-two-points-in-c", "title": "How to insert &quot;k&quot; number of points between two points in C++?", "body": "<p>I have two curves with an equal number of data points. I want to connect the corresponding points on the curves with \"k\" equally spaced points to form a straight line.</p>\n\n<p><a href=\"https://github.com/aakarnik/Images/blob/master/Curves.png\" rel=\"nofollow noreferrer\">How it should look</a></p>\n\n<p>I have tried to use the following formula to calculate both x's and y's lying on the path between the points:</p>\n\n<pre><code>    for(int j = 1; j&lt;=num_k; j++) {\n        for (int i = 2; i &lt;= (num_points-1); i++) {\n            x[i][j] = x[i][1] * (1. - j/num_k) +  x[i][num_points] * j/num_k;\n            y[i][j] = y[i][1] * (1. - j/num_k) +  y[i][num_points] * j/num_k;\n        }\n    }\n</code></pre>\n\n<p>The data points of the curve are stored in the first and last columns of 2D arrays <code>x</code> and <code>z</code>.\n<code>num_k</code> is the number of intervals I want. <code>num_points</code> is the number of points on both the curves.</p>\n\n<p>But this is not giving me the result that I need - this gives me the points, but they are not between the two input points as given. Am I using the right technique or is there something else I should be using? Also, are there any special cases? </p>\n\n<p>Thanks!!</p>\n"}, {"tags": ["c++", "multithreading", "c++11"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 2, "creation_date": 1563987224, "post_id": 57187581, "comment_id": 100885783, "body": "To create a <code>std::map</code> of <code>Thing</code>s, you must provide a comparison operator. Either as <code>bool operator&lt;(const Thing&amp; other) const</code> member function, <code>bool operator&lt;(const Thing&amp; lhs, const Thing&amp; rhs)</code> free function or as a functor type added to the template arguments of <code>std::map</code>. But this will only show up after you fix the <code>emplace</code> call. See e.g. <a href=\"https://godbolt.org/z/92jgsq\" rel=\"nofollow noreferrer\">godbolt.org/z/92jgsq</a>."}], "answers": [{"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1563986833, "post_id": 57187741, "comment_id": 100885601, "body": "Note: The code is still missing an information for <code>std::map</code> on how to compare <code>Thing</code> objects after this change. <a href=\"https://godbolt.org/z/QTUtva\" rel=\"nofollow noreferrer\">godbolt.org/z/QTUtva</a>"}, {"owner": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "edited": false, "score": 0, "creation_date": 1563986971, "post_id": 57187741, "comment_id": 100885671, "body": "Afaik thread has only explicit constructor from the function, will this work?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "edited": false, "score": 1, "creation_date": 1563987081, "post_id": 57187741, "comment_id": 100885722, "body": "@bartop Yes: <a href=\"https://godbolt.org/z/92jgsq\" rel=\"nofollow noreferrer\">godbolt.org/z/92jgsq</a> - the <code>std::thread</code> construction happens (explicitly) inside <code>Entry</code>."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 4, "last_activity_date": 1563986705, "creation_date": 1563986705, "answer_id": 57187741, "question_id": 57187581, "link": "https://stackoverflow.com/questions/57187581/move-constructing-a-c11-thread-from-a-thread-object-argument-created-from-a-ca/57187741#57187741", "title": "Move-constructing a C++11 thread from a thread object argument created from a callable argument", "body": "<p><code>std::map::emplace</code> is a template function accepting arbitrary objects to construct the key/value pair. You cannot use <em>list-initialization</em> as the compiler will not be able to deduce the type.</p>\n\n<p>Specify the types instead:</p>\n\n<pre><code>template&lt;class F&gt;\nvoid add(Thing&amp; thing, F&amp;&amp; func) {\n     map.emplace(thing, Entry{thing, std::forward&lt;F&gt;(func)});\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "is_accepted": false, "score": 1, "last_activity_date": 1563986843, "creation_date": 1563986843, "answer_id": 57187778, "question_id": 57187581, "link": "https://stackoverflow.com/questions/57187581/move-constructing-a-c11-thread-from-a-thread-object-argument-created-from-a-ca/57187778#57187778", "title": "Move-constructing a C++11 thread from a thread object argument created from a callable argument", "body": "<p>As gcc points out you are using initializer list here. Or at least it interpretes it this way. </p>\n\n<pre><code>map.emplace({thing, {thing, func}});\n</code></pre>\n\n<p>To fix it just use types explicitly here:</p>\n\n<pre><code>map.emplace(std::make_pair(thing, Entry(thing, std::thread(std::forward&lt;F&gt;(func)))));\n</code></pre>\n\n<p>Btw notice the added forward function. It allows you to perfectly forward your function type to the thread</p>\n"}], "owner": {"reputation": 7332, "user_id": 204143, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8170ad848a91c4cc534755d37befb6cc?s=128&d=identicon&r=PG", "display_name": "Steve Emmerson", "link": "https://stackoverflow.com/users/204143/steve-emmerson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 57187741, "answer_count": 2, "score": 3, "last_activity_date": 1563987768, "creation_date": 1563985992, "last_edit_date": 1563987768, "question_id": 57187581, "link": "https://stackoverflow.com/questions/57187581/move-constructing-a-c11-thread-from-a-thread-object-argument-created-from-a-ca", "title": "Move-constructing a C++11 thread from a thread object argument created from a callable argument", "body": "<p>In a C++11 initialization list, I'm trying to move-construct a thread from a thread object that was created elsewhere and passed to the constructor. I'm also trying to create the thread object using a passed-in callable argument. I'm not having any luck.</p>\n\n<p>The following (invalid) code will, hopefully, indicate what I'm trying to do:</p>\n\n<p>\"<strong>a.cpp</strong>\"</p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;thread&gt;\n\nclass Thing {\n    int i;\n};\n\nclass Impl {\n    class Entry {\n        Thing         thing;\n        std::thread   thread;\n\n    public:\n        template&lt;class F&gt;\n        Entry(Thing&amp; thing, F&amp;&amp; func)\n            : thing(thing)\n            , thread(func) {\n        }\n    };\n\n    class ThingMap {\n        std::map&lt;Thing, Entry&gt; map;\n\n    public:\n        template&lt;class F&gt;\n        void add(Thing&amp; thing, F&amp;&amp; func) {\n            map.emplace({thing, {thing, func}});\n        }\n    };\n\n    ThingMap things;\n\n    void execute() {\n    }\n\npublic:\n    void activate(Thing&amp; thing) {\n        things.add(thing, [this]{execute();});\n    }\n};\n</code></pre>\n\n<p>Here are the errors from my g++ 4.8.5 compiler:</p>\n\n<pre><code>$ g++ -std=c++11 -c a.cpp\na.cpp: In instantiation of \u2018void Impl::ThingMap::add(Thing&amp;, F&amp;&amp;) [with F = Impl::activate(Thing&amp;)::__lambda0]\u2019:\na.cpp:38:45:   required from here\na.cpp:27:13: error: no matching function for call to \u2018std::map&lt;Thing, Impl::Entry&gt;::emplace(&lt;brace-enclosed initializer list&gt;)\u2019\n             map.emplace({thing, {thing, func}});\n             ^\na.cpp:27:13: note: candidate is:\nIn file included from /usr/include/c++/4.8.2/map:61:0,\n                 from a.cpp:1:\n/usr/include/c++/4.8.2/bits/stl_map.h:540:2: note: std::pair&lt;typename std::_Rb_tree&lt;_Key, std::pair&lt;const _Key, _Tp&gt;, std::_Select1st&lt;std::pair&lt;const _Key, _Tp&gt; &gt;, _Compare, typename _Alloc::rebind&lt;std::pair&lt;const _Key, _Tp&gt; &gt;::other&gt;::iterator, bool&gt; std::map&lt;_Key, _Tp, _Compare, _Alloc&gt;::emplace(_Args&amp;&amp; ...) [with _Args = {}; _Key = Thing; _Tp = Impl::Entry; _Compare = std::less&lt;Thing&gt;; _Alloc = std::allocator&lt;std::pair&lt;const Thing, Impl::Entry&gt; &gt;; typename std::_Rb_tree&lt;_Key, std::pair&lt;const _Key, _Tp&gt;, std::_Select1st&lt;std::pair&lt;const _Key, _Tp&gt; &gt;, _Compare, typename _Alloc::rebind&lt;std::pair&lt;const _Key, _Tp&gt; &gt;::other&gt;::iterator = std::_Rb_tree_iterator&lt;std::pair&lt;const Thing, Impl::Entry&gt; &gt;]\n  emplace(_Args&amp;&amp;... __args)\n  ^\n/usr/include/c++/4.8.2/bits/stl_map.h:540:2: note:   candidate expects 0 arguments, 1 provided\n$ \n</code></pre>\n\n<p>Any and all suggestions on how to fix the code will be gratefully appreciated. Please leave the structure alone, however, it's there for a reason.</p>\n"}, {"tags": ["c++", "stl", "stdmap", "const-iterator"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 5, "creation_date": 1563985116, "post_id": 57187258, "comment_id": 100884710, "body": "Can you elaborate on why you think that should be possible? How do you understand the &quot;const&quot; in the name <code>const_iterator</code>?"}, {"owner": {"reputation": 2673, "user_id": 11292489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cucr6.jpg?s=128&g=1", "display_name": "Gilles-Philippe Paill&#233;", "link": "https://stackoverflow.com/users/11292489/gilles-philippe-paill%c3%a9"}, "edited": false, "score": 1, "creation_date": 1563985501, "post_id": 57187258, "comment_id": 100884911, "body": "The code doesn&#39;t compile with the message &quot;error: assignment of member &#39;std::pair&lt;const int, int&gt;::second&#39; in read-only object&quot;. So clearly, you cannot do it with this code. Are you asking for a method to circumvent this behavior,.e.g. using a <code>const_cast</code> or something similar?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 7, "last_activity_date": 1563985234, "creation_date": 1563985234, "answer_id": 57187375, "question_id": 57187258, "link": "https://stackoverflow.com/questions/57187258/change-update-value-using-stdmap-const-iterator/57187375#57187375", "title": "Change/update value using std::map const_iterator", "body": "<p>The whole <em>point</em> of <code>const_iterator</code> is that it <em>cannot</em> be used to modify the container. So no.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1563985283, "creation_date": 1563985283, "answer_id": 57187388, "question_id": 57187258, "link": "https://stackoverflow.com/questions/57187258/change-update-value-using-stdmap-const-iterator/57187388#57187388", "title": "Change/update value using std::map const_iterator", "body": "<p>The compiler should not allow modifying the contents of a <code>map</code> through a <code>const_iterator</code>. The line</p>\n\n<pre><code>itr-&gt;second = 30;\n</code></pre>\n\n<p>should be reported as an error. If your compiler allows that line, then it is not standards compliant. Perhaphs it allows that line to be compiled through flags that allow standards-incompatible behavior.</p>\n\n<p>Using g++, I get the following error.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>socc.cc: In function \u2018int main()\u2019:\nsocc.cc:12:19: error: assignment of member \u2018std::pair&lt;const int, int&gt;::second\u2019 in read-only object\n     itr-&gt;second = 30;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 2, "last_activity_date": 1563985283, "creation_date": 1563985283, "answer_id": 57187389, "question_id": 57187258, "link": "https://stackoverflow.com/questions/57187258/change-update-value-using-stdmap-const-iterator/57187389#57187389", "title": "Change/update value using std::map const_iterator", "body": "<blockquote>\n  <p>Can I change/update the map's value using const_iterator?</p>\n</blockquote>\n\n<p><strong>No</strong>!</p>\n\n<p>It's called <strong>const</strong> iterator for a reason. As mentioned <a href=\"https://stackoverflow.com/a/5346927/2411320\">here</a>, A <code>const_iterator</code> is an iterator that points to const value (like a <code>const T*</code> pointer); dereferencing it returns a reference to a constant value (<code>const T&amp;</code>) and prevents modification of the referenced value: it enforces <a href=\"http://en.wikipedia.org/wiki/Const-correctness\" rel=\"nofollow noreferrer\"><code>const</code>-correctness</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 6260, "user_id": 10933809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IR53l.jpg?s=128&g=1", "display_name": "Oblivion", "link": "https://stackoverflow.com/users/10933809/oblivion"}, "is_accepted": false, "score": 1, "last_activity_date": 1563985430, "last_edit_date": 1563985430, "creation_date": 1563985407, "answer_id": 57187427, "question_id": 57187258, "link": "https://stackoverflow.com/questions/57187258/change-update-value-using-stdmap-const-iterator/57187427#57187427", "title": "Change/update value using std::map const_iterator", "body": "<p>const iterator is supposed to prevent the user from changing/modiyfing the value by any means.</p>\n"}, {"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1564128830, "post_id": 57187556, "comment_id": 100936388, "body": "First impression: euww, that&#39;s horrible!  But I see the cleverness, and it&#39;s still safe, because a non-const <code>m</code> has no <code>erase()</code>."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1564141701, "post_id": 57187556, "comment_id": 100943095, "body": "@TobySpeight That was my first impression as well. My second impression: Why on earth is there no standard function to do this without cleverness?"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 2, "last_activity_date": 1563986231, "last_edit_date": 1563986231, "creation_date": 1563985908, "answer_id": 57187556, "question_id": 57187258, "link": "https://stackoverflow.com/questions/57187258/change-update-value-using-stdmap-const-iterator/57187556#57187556", "title": "Change/update value using std::map const_iterator", "body": "<p>It is not possible to change an element through a const iterator. That's the most important distinction between a const iterator and non-const iterator.</p>\n\n<p><code>std::map::begin</code> returns a non-const iterator (assuming the object operand is non-const), so there is no need to use a const iterator in the first place.</p>\n\n<p>However, if for some reason (not demonstrated in the example) you can only have a const iterator, but have non-const access to the container, then you can get a non-const iterator to the element pointed by the const iterator. This can be achieved by using following, which looks like a trick:</p>\n\n<pre><code>map &lt;int, int&gt;::iterator mutable_itr = m.erase(itr, itr);\n</code></pre>\n\n<p>It doesn't erase anything, because <code>[itr, itr)</code> is an empty range.</p>\n"}], "owner": {"reputation": 882, "user_id": 1163286, "user_type": "registered", "accept_rate": 7, "profile_image": "https://i.stack.imgur.com/yq3OX.jpg?s=128&g=1", "display_name": "Pankaj Kumar Thapa", "link": "https://stackoverflow.com/users/1163286/pankaj-kumar-thapa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1113, "favorite_count": 1, "answer_count": 5, "score": 1, "last_activity_date": 1563986231, "creation_date": 1563984818, "last_edit_date": 1563985452, "question_id": 57187258, "link": "https://stackoverflow.com/questions/57187258/change-update-value-using-stdmap-const-iterator", "title": "Change/update value using std::map const_iterator", "body": "<p>I am just curious to know if I can change/update the map's value using <strong>const_iterator</strong>.</p>\n\n<p>Below is the code snippet:</p>\n\n<pre><code>int main()\n{\n    map &lt;int, int&gt; m;\n    m.insert(make_pair(1, 10));\n\n    map &lt;int, int&gt;::const_iterator itr = m.begin(); //The iterator is const_iterator\n    itr-&gt;second = 30;\n\n    cout &lt;&lt; itr-&gt;second; //The value to be printed is 30, and not 10.\n    return 0;\n}\n</code></pre>\n\n<p>Thank you in advance for sharing your ideas.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1563984812, "post_id": 57187113, "comment_id": 100884547, "body": "you should show your code that isnt working. The declaration you show instead has a default parameter for <code>parent</code>, thus it is not clear what is the problem, if you dont know what to pass as <code>parent</code> then probably the solution is to not pass anything..."}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1563984864, "post_id": 57187113, "comment_id": 100884578, "body": "@formerlyknownas_463035818 sure"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1563984928, "post_id": 57187113, "comment_id": 100884609, "body": "see for example the doc for the <code>parent()</code> method on the link you posted: &quot;Returns the parent of the model index, or QModelIndex() if it has no parent.&quot;. It seems like a <code>QMOdelIndex</code> does not need a <code>parent</code>"}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1563985222, "post_id": 57187113, "comment_id": 100884765, "body": "@formerlyknownas_463035818 see the edit for code example please."}], "answers": [{"comments": [{"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1563990239, "post_id": 57188346, "comment_id": 100887116, "body": "Awesome! But what exactly are the children of <code>QFileSystemModel</code>?"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1563991325, "post_id": 57188346, "comment_id": 100887608, "body": "<code>child</code> is a <code>QModelIndex</code>, too."}], "tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": true, "score": 1, "last_activity_date": 1563989320, "creation_date": 1563989320, "answer_id": 57188346, "question_id": 57187113, "link": "https://stackoverflow.com/questions/57187113/qmodelindex-as-parent/57188346#57188346", "title": "QModelIndex as parent?", "body": "<p>You're just accessing the children of the root of the <code>QFileSystemModel</code> when you default the parent node to <code>QModelIndex()</code> in the call <code>model-&gt;index(i, 0)</code>.</p>\n\n<p>If you also want to list the children of those items, we'll want to iterate them, too:</p>\n\n<pre><code>#include &lt;QApplication&gt;\n#include &lt;QDebug&gt;\n#include &lt;QFileSystemModel&gt;\n\nvoid list_files(const QFileSystemModel *model, QModelIndex ix = {},\n                QString indent = {})\n{\n    auto const row_count = model-&gt;rowCount(ix);\n    for (int i = 0;  i &lt; row_count;  ++i) {\n        auto const child = model-&gt;index(i, 0, ix);\n        qDebug() &lt;&lt; qPrintable(indent) &lt;&lt; model-&gt;fileName(child);\n        list_files(model, child, indent + \" \");\n    }\n}\n\nint main(int argc, char **argv)\n{\n    QApplication app(argc, argv);\n\n    QFileSystemModel model;\n    model.setRootPath(\".\");\n\n    list_files(&amp;model);\n}\n</code></pre>\n\n<p>See how we pass the child index as the new parent when we recurse into <code>list_files()</code>?</p>\n\n<p>Note that the model is likely incomplete at this stage, as it implements lazy reading - so don't expect to see all your files with this simple program.</p>\n"}], "owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 57188346, "answer_count": 1, "score": 0, "last_activity_date": 1563989320, "creation_date": 1563984291, "last_edit_date": 1563987693, "question_id": 57187113, "link": "https://stackoverflow.com/questions/57187113/qmodelindex-as-parent", "title": "QModelIndex as parent?", "body": "<p>In Qt, <code>QModelIndex</code> is used to represent an index to my understanding. <a href=\"https://doc.qt.io/qt-5/qmodelindex.html#details\" rel=\"nofollow noreferrer\">Officially</a>:</p>\n\n<blockquote>\n  <p>This class is used as an index into item models derived from\n  <code>QAbstractItemModel</code>. The index is used by item views, delegates, and\n  selection models to locate an item in the model.</p>\n</blockquote>\n\n<p>But I see it being used to represent a parent object. For instance, if I want to get an index in a <code>QFileSystemModel</code> object, I need a row, column and a parent:</p>\n\n<pre><code>QModelIndex QFileSystemModel::index(int row, int column, const QModelIndex &amp;parent = QModelIndex()) const\n</code></pre>\n\n<p>I am trying to get a <code>QModelIndex</code> object, but to do that, I need another <code>QModelIndex</code> object? I am merely trying to iterate over the model. I don't have a separate <code>parent</code> object. How do I just create an index from row/column number? I don't understand the role of <code>QModelIndex</code> as a \"parent\". Shouldn't the model itself know what the parent object is? We passed a pointer to the constructor when creating the model.</p>\n\n<p>Here's a bit of code showing the problem:</p>\n\n<pre><code>#include \"MainWindow.hpp\"\n#include \"ui_MainWindow.h\"\n\n#include &lt;QFileSystemModel&gt;\n#include &lt;QDebug&gt;\n\n\nMainWindow::MainWindow(QWidget *parent) :\n  QMainWindow(parent),\n  ui(new Ui::MainWindow)\n{\n  ui-&gt;setupUi(this);\n\n  auto* model = new QFileSystemModel{ui-&gt;listView};\n  ui-&gt;listView-&gt;setModel(model);\n  ui-&gt;listView-&gt;setRootIndex(model-&gt;setRootPath(\"C:\\\\Program Files\"));\n  connect(ui-&gt;pushButton, &amp;QPushButton::clicked, [this] {\n    auto* model = static_cast&lt;QFileSystemModel*&gt;(ui-&gt;listView-&gt;model());\n    int row_count = model-&gt;rowCount();\n    for (int i = 0; i != row_count; ++i) {\n      qDebug() &lt;&lt; model-&gt;fileName(model-&gt;index(i, 0)) &lt;&lt; '\\n';\n    }\n  });\n}\n</code></pre>\n\n<p>Here I have a <code>QListView</code> object (<code>*listView</code>) and a <code>QFileSystemModel</code>  object (<code>*model</code>). I would like to iterate over the model and do something, like print the names of the files. The output is </p>\n\n<pre><code>C:\n</code></pre>\n\n<p>No matter which directory the rootpath is. I assume that is because I did't pass anything as the parent.</p>\n"}, {"tags": ["c++", "g++", "c++14"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1563985765, "post_id": 57187077, "comment_id": 100885035, "body": "I&#39;d say the fact that both candidates are the same function makes it pretty obvious this is a bug.."}, {"owner": {"reputation": 3130, "user_id": 624664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d013be1feff34d1660e2988787cc359a?s=128&d=identicon&r=PG", "display_name": "Erbureth says Reinstate Monica", "link": "https://stackoverflow.com/users/624664/erbureth-says-reinstate-monica"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1563986047, "post_id": 57187077, "comment_id": 100885168, "body": "@LightnessRacesinOrbit Also the <code>NMKey</code> case gives two different candidate functions: <code>bool N::operator&lt;(const N&amp;) const</code> and <code>bool M::operator&lt;(const M&amp;) const</code>."}, {"owner": {"reputation": 3281, "user_id": 8411406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03feb45788181f61b08fdb8b5d26968e?s=128&d=identicon&r=PG", "display_name": "Turtlefight", "link": "https://stackoverflow.com/users/8411406/turtlefight"}, "edited": false, "score": 1, "creation_date": 1563986346, "post_id": 57187077, "comment_id": 100885334, "body": "It doesn&#39;t seem to happen on clang. Adding a <a href=\"https://godbolt.org/z/JXiTNc\" rel=\"nofollow noreferrer\">single member <code>int dummy;</code></a>, or using <a href=\"https://godbolt.org/z/hV6LLa\" rel=\"nofollow noreferrer\">external <code>operator&lt;</code> overloads</a> seems to fix it. Maybe a compiler bug?"}, {"owner": {"reputation": 3130, "user_id": 624664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d013be1feff34d1660e2988787cc359a?s=128&d=identicon&r=PG", "display_name": "Erbureth says Reinstate Monica", "link": "https://stackoverflow.com/users/624664/erbureth-says-reinstate-monica"}, "reply_to_user": {"reputation": 3281, "user_id": 8411406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03feb45788181f61b08fdb8b5d26968e?s=128&d=identicon&r=PG", "display_name": "Turtlefight", "link": "https://stackoverflow.com/users/8411406/turtlefight"}, "edited": false, "score": 0, "creation_date": 1563987355, "post_id": 57187077, "comment_id": 100885838, "body": "@Turtlefight Indeed the external overloads work, which is a workaround I can use, thanks for noticing."}], "answers": [{"comments": [{"owner": {"reputation": 3130, "user_id": 624664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d013be1feff34d1660e2988787cc359a?s=128&d=identicon&r=PG", "display_name": "Erbureth says Reinstate Monica", "link": "https://stackoverflow.com/users/624664/erbureth-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1563991700, "post_id": 57188070, "comment_id": 100887801, "body": "Great analysis, thank you. Would there be any other means to circumvent the lookup, or is the clang&#39;s solution/hack the only one?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 3130, "user_id": 624664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d013be1feff34d1660e2988787cc359a?s=128&d=identicon&r=PG", "display_name": "Erbureth says Reinstate Monica", "link": "https://stackoverflow.com/users/624664/erbureth-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1563992385, "post_id": 57188070, "comment_id": 100888120, "body": "As the library user, using hidden friends is the simplest fix."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 2, "last_activity_date": 1563988193, "creation_date": 1563988193, "answer_id": 57188070, "question_id": 57187077, "link": "https://stackoverflow.com/questions/57187077/comparison-on-stdtuple-with-multiple-empty-members-doesnt-compile-on-gcc/57188070#57188070", "title": "Comparison on std::tuple with multiple empty members doesn&#39;t compile on GCC", "body": "<p>This is clearly a bug, in the sense that the standard doesn't give permission for the comparison to not work.</p>\n\n<p>The cause is more interesting. libstdc++'s tuple is EBO'd in such a way that <code>tuple&lt;N&gt;</code> is actually derived from <code>N</code> if <code>N</code> is an empty class. When you do <code>a &lt; b</code> we need to do a nonmember and a member lookup for <code>operator&lt;</code>. The nonmember lookup finds <code>tuple</code>'s <code>operator&lt;</code> as expected.</p>\n\n<p>This member lookup, however, finds <code>operator&lt;</code> in two different bases, so by <a href=\"http://eel.is/c++draft/class.member.lookup#6\" rel=\"nofollow noreferrer\">[class.member.lookup]p6-7</a> this lookup produces an invalid set and is ill-formed on the spot.</p>\n\n<p>Clang seems to accept this code by suppressing the error in the member lookup, but I'm not currently seeing anything in the standard that permits this behavior.</p>\n"}], "owner": {"reputation": 3130, "user_id": 624664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d013be1feff34d1660e2988787cc359a?s=128&d=identicon&r=PG", "display_name": "Erbureth says Reinstate Monica", "link": "https://stackoverflow.com/users/624664/erbureth-says-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 57188070, "answer_count": 1, "score": 3, "last_activity_date": 1563988193, "creation_date": 1563984153, "last_edit_date": 1563987518, "question_id": 57187077, "link": "https://stackoverflow.com/questions/57187077/comparison-on-stdtuple-with-multiple-empty-members-doesnt-compile-on-gcc", "title": "Comparison on std::tuple with multiple empty members doesn&#39;t compile on GCC", "body": "<p>When there are multiple structures with no members in a tuple, trying to compile a comparison of tuples on GCC results in following error:</p>\n\n<pre><code>&lt;source&gt;: In function 'bool foo()':\n&lt;source&gt;:120:16: error: request for member 'operator&lt;' is ambiguous\n  120 |     return a &lt; b;\n      |                ^\n&lt;source&gt;:46:10: note: candidates are: 'bool N::operator&lt;(const N&amp;) const'\n   46 |     bool operator&lt;(const N &amp;) const noexcept {\n      |          ^~~~~~~~\n&lt;source&gt;:46:10: note:                 'bool N::operator&lt;(const N&amp;) const'\nCompiler returned: 1\n</code></pre>\n\n<p>Strangely enough, when I tie the same types I use in the tuple, it works as expected. One empty structure is also OK, two with different types are not.</p>\n\n<p>Compilation with clang or msvc passes and yields expected results.</p>\n\n<p>Is this correct behaviour, or is it a GCC/libstdc++ bug?</p>\n\n<h1>Demo</h1>\n\n<p>(<a href=\"https://godbolt.org/z/NLrhZn\" rel=\"nofollow noreferrer\">Try it</a>, uncomment the desired testcase first)</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;tuple&gt;\n\nstruct A {\n    int value;\n    A(int value) : value(value) {}\n\n    bool operator==(const A &amp;other) const noexcept {\n        return value == other.value;\n    }\n\n    bool operator!=(const A &amp;other) const noexcept {\n        return value != other.value;\n    }\n\n    bool operator&lt;(const A &amp;other) const noexcept {\n        return value &lt; other.value;\n    }\n};\n\nstruct N {\n    bool operator==(const N &amp;) const noexcept {\n        return true;\n    }\n\n    bool operator!=(const N &amp;) const noexcept {\n        return false;\n    }\n\n    bool operator&lt;(const N &amp;) const noexcept {\n        return false;\n    }\n};\n\nstruct M {\n    bool operator==(const M &amp;) const noexcept {\n        return true;\n    }\n\n    bool operator!=(const M &amp;) const noexcept {\n        return false;\n    }\n\n    bool operator&lt;(const M &amp;) const noexcept {\n        return false;\n    }\n};\n\n\n\nusing AAKey = std::tuple&lt;A, A&gt;;\nusing ANAKey = std::tuple&lt;A, N, A&gt;;\nusing ANANKey = std::tuple&lt;A, N, A, N&gt;;\nusing ANAMKey = std::tuple&lt;A, N, A, M&gt;;\nusing NKey = std::tuple&lt;N&gt;;\nusing NNKey = std::tuple&lt;N, N&gt;;\nusing NMKey = std::tuple&lt;N, M&gt;;\n\nbool foo() {\n    /* Works\n    AAKey a{0, 1};\n    AAKey b{0, 0};\n    //*/\n\n    /* Works\n    ANAKey a{0, N{}, 1};\n    ANAKey b{0, N{}, 0};\n    //*/\n\n    /* Fails\n    ANANKey a{0, N{}, 0, N{}};\n    ANANKey b{0, N{}, 1, N{}};\n    //*/\n\n    /* Fails\n    ANAMKey a{0, N{}, 0, M{}};\n    ANAMKey b{0, N{}, 1, M{}};\n    //*/\n\n\n    /* Works\n    NKey a{N{}};\n    NKey b{N{}};\n    //*/\n\n    /* Fails\n    NNKey a{N{}, N{}};\n    NNKey b{N{}, N{}};\n    //*/\n\n    /* Fails\n    NMKey a{N{}, M{}};\n    NMKey b{N{}, M{}};\n    //*/\n\n    // Tying ANANKey into tuple:\n    /* Works\n    A ax1{0}, ay1{0}, ax2{0}, ay2{1};\n    N nx1, ny1, nx2, ny2;\n    auto a = std::tie(ax1, nx1, ax2, nx2);\n    auto b = std::tie(ay1, ny1, ay2, ny2);\n    //*/\n\n    return a &lt; b;\n}\n\n</code></pre>\n\n<h1>EDIT</h1>\n\n<p>Extenal operator overloads actually work (thanks to @Turtlefight):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;tuple&gt;\n\nstruct O {\n    friend bool operator==(const O &amp;, const O &amp;) noexcept {\n        return true;\n    }\n\n    friend bool operator!=(const O &amp;, const O &amp;) noexcept {\n        return false;\n    }\n\n    friend bool operator&lt;(const O &amp;, const O &amp;) noexcept {\n        return false;\n    }\n};\n\nusing OOKey = std::tuple&lt;O, O&gt;;\n\nbool foo() {\n    OOKey a{O{}, O{}};\n    OOKey b{O{}, O{}};\n\n    return a &lt; b;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-c++", "vector", "while-loop"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1563984777, "post_id": 57187070, "comment_id": 100884530, "body": "@JesperJuhl Answers belong in the answer section"}], "answers": [{"tags": [], "owner": {"reputation": 3281, "user_id": 8411406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03feb45788181f61b08fdb8b5d26968e?s=128&d=identicon&r=PG", "display_name": "Turtlefight", "link": "https://stackoverflow.com/users/8411406/turtlefight"}, "is_accepted": false, "score": 4, "last_activity_date": 1563985031, "last_edit_date": 1563985031, "creation_date": 1563984360, "answer_id": 57187139, "question_id": 57187070, "link": "https://stackoverflow.com/questions/57187070/why-wont-this-do-while-loop-exit-after-accepting-input/57187139#57187139", "title": "why wont this do while loop exit after accepting input", "body": "<p>Your comparison in the while condition is not correct, you probably meant to do</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>while (ans != 'n' &amp;&amp; ans != 'N');\n</code></pre>\n\n<p><code>('n' || 'N')</code> will be coerced to true (1), so you would check for a char of value 1 instead of <code>'n'</code> / <code>'N'</code></p>\n"}, {"tags": [], "owner": {"reputation": 4419, "user_id": 2254782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a93806dc8873fdb424d2df0f57b54d8e?s=128&d=identicon&r=PG", "display_name": "alexrider", "link": "https://stackoverflow.com/users/2254782/alexrider"}, "is_accepted": false, "score": 2, "last_activity_date": 1563984475, "creation_date": 1563984475, "answer_id": 57187176, "question_id": 57187070, "link": "https://stackoverflow.com/questions/57187070/why-wont-this-do-while-loop-exit-after-accepting-input/57187176#57187176", "title": "why wont this do while loop exit after accepting input", "body": "<pre><code>    } while (ans != ('n' || 'N'));\n</code></pre>\n\n<p>Here you are comparing char with boolean result of || operation for the 2 other chars.\nWhich alway evaluates as true.\nSo your while statement is effecitvely</p>\n\n<pre><code>    } while (ans != true);\n</code></pre>\n\n<p>to fix this you need to compare ans to both of the n and N and exit if one of them becomes true, for example:</p>\n\n<pre><code>    } while ((ans != 'n') &amp;&amp; (ans != 'N'));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 0, "last_activity_date": 1563984869, "creation_date": 1563984869, "answer_id": 57187272, "question_id": 57187070, "link": "https://stackoverflow.com/questions/57187070/why-wont-this-do-while-loop-exit-after-accepting-input/57187272#57187272", "title": "why wont this do while loop exit after accepting input", "body": "<p><code>while (ans != ('n' || 'N'))</code> is the same as writing <code>while (ans != (true))</code>. You probably wanted <code>while ((ans != 'n') &amp;&amp; (ans != 'N'))</code>.</p>\n"}], "owner": {"reputation": 17, "user_id": 10529571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5017ad1540fa38cfbb80a42188fbc0af?s=128&d=identicon&r=PG&f=1", "display_name": "DHowell", "link": "https://stackoverflow.com/users/10529571/dhowell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1563985031, "creation_date": 1563984128, "question_id": 57187070, "link": "https://stackoverflow.com/questions/57187070/why-wont-this-do-while-loop-exit-after-accepting-input", "title": "why wont this do while loop exit after accepting input", "body": "<p>Pretty straight forward. i dont understand why it wont quit the loop after not accepting a y char.</p>\n\n<p>ive tried different variations of == and != with regards to y char and n char</p>\n\n<pre><code>vector&lt;int&gt; v;\n    char ans;\n    do\n    {\n        cout &lt;&lt; \"Enter scores, enter number outside of 0-100 to stop:\\n\";\n        get_scores(v);\n        print_stats(v);\n        cout &lt;&lt; \"Do you want to try another set of scores? Y/N: \\n\";\n        cin &gt;&gt; ans;\n    } while (ans != ('n' || 'N'));\n</code></pre>\n\n<p>after typing any char, the loop  keeps asking for more input.\nNOTE: the get scores and print stats functions work as their supposed to.</p>\n"}, {"tags": ["c++", "initialization", "copy-initialization"], "comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 2, "creation_date": 1563984496, "post_id": 57187039, "comment_id": 100884396, "body": "<code>Foo f = {&quot;testing&quot;};</code> works. Initialization is such a mess in C++ with a dozen types of initializations that really should just be one imho. Q: you have a generic code. What do you use: <code>T a = init;</code> , <code>T a(init)</code> , <code>T a{init}</code> , <code>T a = {init}</code> , <code>T a = T(init)</code> , <code>T a = T{initi}</code> , <code>auto a = T(init)</code> , <code>auto a = T{init}</code> , <code>auto a = (T) init</code>? Not even the experts have a answer to this (well, they do narrow it down to 2 or 3 choices, but still ... )"}, {"owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 2, "creation_date": 1563985189, "post_id": 57187039, "comment_id": 100884746, "body": "@bolov <a href=\"https://i.imgur.com/3wlxtI0.gifv\" rel=\"nofollow noreferrer\">i.imgur.com/3wlxtI0.gifv</a>"}], "answers": [{"comments": [{"owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "edited": false, "score": 0, "creation_date": 1563987103, "post_id": 57187131, "comment_id": 100885731, "body": "I&#39;m sighing at myself because now that I&#39;ve read your answer it made me realize I already knew about this but forgot it. My brain wants to ignore the complexities and focus on what feels intuitive. But we can&#39;t have what&#39;s intuitive due to tons of technicalities. It&#39;s frustrating. Thank you for your answer and reminder about this."}], "tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": true, "score": 8, "last_activity_date": 1563985802, "last_edit_date": 1592644375, "creation_date": 1563984343, "answer_id": 57187131, "question_id": 57187039, "link": "https://stackoverflow.com/questions/57187039/why-does-copy-initialization-of-my-class-not-work-with-string-view-using-string/57187131#57187131", "title": "Why does copy initialization of my class not work with string_view using string literals?", "body": "<p><code>Foo f = &quot;testing&quot;;</code> is <a href=\"https://en.cppreference.com/w/cpp/language/copy_initialization\" rel=\"nofollow noreferrer\">copy initialization</a>, which asks for implicit conversion from <code>&quot;testing&quot;</code> (which is of type <code>const char[8]</code>) to <code>Foo</code>. <code>&quot;testing&quot;</code> could decay to <code>const char*</code>, and then still two user-defined conversions are required. The conversion from <code>const char*</code> to <code>std::string_view</code>, and one from <code>std::string_view</code> to <code>Foo</code>. But only one user-defined conversion is allowed in one implicit conversion sequence.</p>\n<p><code>Foo f(&quot;testing&quot;);</code> is <a href=\"https://en.cppreference.com/w/cpp/language/direct_initialization\" rel=\"nofollow noreferrer\">direct initialization</a>, which behaves differently. <code>&quot;testing&quot;</code> decays to <code>const char*</code> and then converts to <code>std::string_view</code>, which is used as the argument of <code>Foo</code>'s constructor to initialize <code>f</code> directly.</p>\n<blockquote>\n<p>In addition, the implicit conversion in copy-initialization must produce T directly from the initializer, while, e.g. direct-initialization expects an implicit conversion from the initializer to an argument of T's constructor.</p>\n<p>Implicit conversion is defined in terms of copy-initialization: if an object of type T can be copy-initialized with expression E, then E is implicitly convertible to T.</p>\n</blockquote>\n<p>As the workaround, if you want to stick to copy-initialization, you can reduce the required user-defined conversion. As you showed it's a good idea to apply <code>Foo f = &quot;testing&quot;sv;</code>, or <code>Foo f = std::string_view(&quot;testing&quot;);</code>, which has the same effect.</p>\n"}], "owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 1, "accepted_answer_id": 57187131, "answer_count": 1, "score": 4, "last_activity_date": 1563986025, "creation_date": 1563984027, "last_edit_date": 1563986025, "question_id": 57187039, "link": "https://stackoverflow.com/questions/57187039/why-does-copy-initialization-of-my-class-not-work-with-string-view-using-string", "title": "Why does copy initialization of my class not work with string_view using string literals?", "body": "<p>I have the following code:</p>\n\n<pre><code>#include &lt;string_view&gt;\n\nclass Foo\n{\npublic:\n    Foo(std::string_view) {}\n};\n</code></pre>\n\n<p>When I do this, everything compiles fine (using clang v8, C++17):</p>\n\n<pre><code>Foo f(\"testing\");\n</code></pre>\n\n<p>However, if I use copy initialization it fails:</p>\n\n<pre><code>Foo f = \"testing\";\n</code></pre>\n\n<p>Diagnostic:</p>\n\n<pre><code>prog.cc:15:9: error: no viable conversion from 'const char [8]' to 'Foo'\n    Foo f = \"testing\";\n        ^   ~~~~~~~~~\nprog.cc:7:7: note: candidate constructor (the implicit copy constructor) not viable: no known conversion from 'const char [8]' to 'const Foo &amp;' for 1st argument\nclass Foo\n      ^\nprog.cc:7:7: note: candidate constructor (the implicit move constructor) not viable: no known conversion from 'const char [8]' to 'Foo &amp;&amp;' for 1st argument\nclass Foo\n      ^\nprog.cc:10:5: note: candidate constructor not viable: no known conversion from 'const char [8]' to 'std::string_view' (aka 'basic_string_view&lt;char&gt;') for 1st argument\n    Foo(std::string_view) {}\n    ^\n1 error generated.\n</code></pre>\n\n<p>Looking at the <a href=\"https://en.cppreference.com/w/cpp/string/basic_string_view/basic_string_view\" rel=\"nofollow noreferrer\">constructors for string_view</a>, I don't see any overloads that take <code>char const[]</code>, is that maybe the issue? I realize I could use <code>\"testing\"sv</code> to solve this but I feel like the string literal case should work as well.</p>\n\n<p>Why doesn't the copy initialization case work? How can I make it work with string literals?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 846, "user_id": 7511460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cz0P7.png?s=128&g=1", "display_name": "Adrien Givry", "link": "https://stackoverflow.com/users/7511460/adrien-givry"}, "edited": false, "score": 0, "creation_date": 1563983509, "post_id": 57186840, "comment_id": 100883896, "body": "You can create your data type based on an array of bytes with a custom <code>operator&#47;</code> in which you will define how your bits are operated"}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1563983820, "post_id": 57186840, "comment_id": 100884055, "body": "Do you have 128-bit arithmetic or just 64?"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 1, "creation_date": 1563983822, "post_id": 57186840, "comment_id": 100884056, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8496182/calculating-powa-b-mod-n\">Calculating pow(a,b) mod n</a>"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1563985799, "post_id": 57186840, "comment_id": 100885054, "body": "If you have 128 bit integers, see Eric&#39;s answer. If you do not, then what data type would you intend to store the answer in? Instead of writing your own, use a tried and tested one (it&#39;ll save you the work, the debugging and will most likely be faster on top of it all)."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 1, "creation_date": 1564051932, "post_id": 57186840, "comment_id": 100908409, "body": "I am voting to close this question as unclear because it is missing key information, namely the data type, as Eric Postpischil already mentioned."}], "answers": [{"comments": [{"owner": {"reputation": 448, "user_id": 9414424, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "user9414424", "link": "https://stackoverflow.com/users/9414424/user9414424"}, "edited": false, "score": 0, "creation_date": 1563987017, "post_id": 57187091, "comment_id": 100885697, "body": "It seems that your solution works simply and correctly.Thank you very much!"}], "tags": [], "owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 3, "last_activity_date": 1563984192, "creation_date": 1563984192, "answer_id": 57187091, "question_id": 57186840, "link": "https://stackoverflow.com/questions/57186840/how-to-divide-2128-by-an-odd-number-in-c/57187091#57187091", "title": "How to divide 2^{128} by an odd number in c++?", "body": "<p>For any odd <em>d</em> > 1, <code>UINT128_MAX / d</code> equals floor(2<sup>128</sup>/<em>d</em>).</p>\n\n<p>This is because 2<sup>128</sup>/<em>d</em> must have a remainder, as the only factors of 2<sup>128</sup> are powers of two (including 1), so the odd <em>d</em> (excluding 1) cannot be a divisor. Therefore, 2<sup>128</sup>/<em>d</em> and (2<sup>128</sup>\u22121)/<em>d</em> have the same integral quotient, and <code>UINT128_MAX</code> is 2<sup>128</sup>\u22121.</p>\n"}], "owner": {"reputation": 448, "user_id": 9414424, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "user9414424", "link": "https://stackoverflow.com/users/9414424/user9414424"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 57187091, "answer_count": 1, "score": 0, "last_activity_date": 1563984650, "creation_date": 1563983385, "question_id": 57186840, "link": "https://stackoverflow.com/questions/57186840/how-to-divide-2128-by-an-odd-number-in-c", "title": "How to divide 2^{128} by an odd number in c++?", "body": "<p>How can we divide 2^{128} by an odd number (unsigned 64-bit integer), which is a floor more precisely, without using arbitrary multi-precision arithmetic library?</p>\n\n<p>The problem is even with gcc, 2^{128} cannot be expressed.\nSo I'm considering creating 192-bit integer type.\nBut, I have no idea how to do that (especially subtraction part).\nI want the result of the floor to be an unsigned number.</p>\n"}, {"tags": ["c++", "sockets", "http", "websocket", "port"], "comments": [{"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1563983467, "post_id": 57186806, "comment_id": 100883876, "body": "Sure, those ports are only assigned to http/https by convention. If they&#39;re not already being used by something else you should be able to use them from anything you want. Is there some underlying agenda here about trying to appear as though you are an http server even though you&#39;re not?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1563983676, "post_id": 57186806, "comment_id": 100883985, "body": "How much data? What kind of data? Did you encounter some particular problem? What libraries did you try? What information have you found so far? Go into (much) more detail."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1563983701, "post_id": 57186806, "comment_id": 100883993, "body": "@500-InternalServerError They&#39;re usually reserved to privileged processes if under 1024, at least on POSIXy systems"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1563983735, "post_id": 57186806, "comment_id": 100884005, "body": "Also if you want to implement HTTP, you should use an actual HTTP library. Don&#39;t try to implement it yourself. There&#39;s no point and you will get it wrong."}, {"owner": {"reputation": 109, "user_id": 4605692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yJeMQ.jpg?s=128&g=1", "display_name": "dorKKnight", "link": "https://stackoverflow.com/users/4605692/dorkknight"}, "edited": false, "score": 1, "creation_date": 1563983801, "post_id": 57186806, "comment_id": 100884038, "body": "<a href=\"https://pocoproject.org\" rel=\"nofollow noreferrer\">POCO</a> library can be used to make a C++ server. please take look at this <a href=\"https://www.codeproject.com/Articles/252827/Learning-Poco-A-Simple-HTTP-Server\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "edited": false, "score": 0, "creation_date": 1563986906, "post_id": 57186806, "comment_id": 100885635, "body": "<a href=\"https://github.com/yhirose/cpp-httplib\" rel=\"nofollow noreferrer\">httplib</a> is much easier to use and lightweight than most other libraries."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "edited": false, "score": 0, "creation_date": 1563998210, "post_id": 57186806, "comment_id": 100890541, "body": "@nada - unless you&#39;re implementing a toy / small project, avoid <code>httplib</code> - it uses a <a href=\"https://github.com/yhirose/cpp-httplib/blob/7231f6fe0070d70ef3115bdc0aa3df186be0d626/httplib.h#L1941-L1954\" rel=\"nofollow noreferrer\">thread-per-client model</a>, which is suboptimal for higher loads."}, {"owner": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1564070583, "post_id": 57186806, "comment_id": 100918964, "body": "@Myst Exactly, but also don&#39;t take a sledgehammer to crack a nut."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 0, "last_activity_date": 1563984986, "creation_date": 1563984986, "answer_id": 57187302, "question_id": 57186806, "link": "https://stackoverflow.com/questions/57186806/how-to-send-and-receive-data-on-http-https-port-in-c/57187302#57187302", "title": "How to send and receive data on http/https port in c++?", "body": "<p>The C++ standard library does not have an API for HTTP. You can find the HTTP specification here: <a href=\"https://tools.ietf.org/html/rfc2616\" rel=\"nofollow noreferrer\">https://tools.ietf.org/html/rfc2616</a> Also pay attention to the \"obsoleted\" and \"updated by\" links, which lead you to specs that will also be important to implementing a HTTP server or client, for example for implementing HTTPS.</p>\n\n<p>The C++ standard does not have an API for TCP, IP, or any other form of network communication either (although a networking Technical Specification has been proposed, and may be introduced into C++23 or later standard). You can find IP spec here: <a href=\"https://tools.ietf.org/html/rfc791\" rel=\"nofollow noreferrer\">https://tools.ietf.org/html/rfc791</a> and TCP spec here: <a href=\"https://tools.ietf.org/html/rfc793\" rel=\"nofollow noreferrer\">https://tools.ietf.org/html/rfc793</a>. That said, if you are targeting an operating system, then it probably provides an API for TCP, and you don't need to implement it yourself. First step in using the API provided by your operating system is to figure out what operating system you are targeting.</p>\n\n<blockquote>\n  <p>I want to use port 80 or 443 for listening and communication</p>\n</blockquote>\n\n<p>You can do that. As long as there is no other process listening on those ports, and as long as your process has sufficient privileges, then this should be possible. See documentation of your operating system for more details.</p>\n"}], "owner": {"reputation": 1, "user_id": 3497137, "user_type": "registered", "profile_image": "https://graph.facebook.com/615032202/picture?type=large", "display_name": "user3497137", "link": "https://stackoverflow.com/users/3497137/user3497137"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 273, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1563984986, "creation_date": 1563983285, "question_id": 57186806, "link": "https://stackoverflow.com/questions/57186806/how-to-send-and-receive-data-on-http-https-port-in-c", "title": "How to send and receive data on http/https port in c++?", "body": "<p>I want to make a server in C++ that can use HTTP/HTTPS port to send and receive data.</p>\n\n<p>I have tried a simple TCP Server in C++ that can listen on various ports to send and receive data. But I want to use port 80 or 443 for listening and communication. Is there a way to achieve this?</p>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 3805, "user_id": 4165552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18b32c5e142791fca01cbf252f663ac?s=128&d=identicon&r=PG&f=1", "display_name": "pptaszni", "link": "https://stackoverflow.com/users/4165552/pptaszni"}, "edited": false, "score": 0, "creation_date": 1563982174, "post_id": 57186187, "comment_id": 100883152, "body": "Standard approach is to use <code>find_package(libtorrent REQUIRED)</code> to compile your <code>core_lib</code> and <code>find_package(core_lib REQUIRED)</code> in <code>CMakeLists.txt</code> of your executable. Then your <code>core_lib</code> can either be installed in the system, or you can point CMake to look for it in your projects local directory."}], "answers": [{"comments": [{"owner": {"reputation": 619, "user_id": 5966840, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/df6ef1526a40dc90d485f989c73caad4?s=128&d=identicon&r=PG&f=1", "display_name": "J.Paravicini", "link": "https://stackoverflow.com/users/5966840/j-paravicini"}, "edited": false, "score": 0, "creation_date": 1563985746, "post_id": 57187048, "comment_id": 100885024, "body": "Thank you so much for your answer, I have been trying to use their FindLibtorrentRasterbar.cmake file, however, no matter how I install libtorrent LibtorrentRasterbar remains NOT_FOUND. How could I go around this problem?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 619, "user_id": 5966840, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/df6ef1526a40dc90d485f989c73caad4?s=128&d=identicon&r=PG&f=1", "display_name": "J.Paravicini", "link": "https://stackoverflow.com/users/5966840/j-paravicini"}, "edited": false, "score": 0, "creation_date": 1563989070, "post_id": 57187048, "comment_id": 100886575, "body": "Their <code>FindLibtorrentRasterbar.cmake</code> is using package config files to get the path and interface requirement of their library. Unfortunately, I&#39;m not really familiar with package config."}, {"owner": {"reputation": 619, "user_id": 5966840, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/df6ef1526a40dc90d485f989c73caad4?s=128&d=identicon&r=PG&f=1", "display_name": "J.Paravicini", "link": "https://stackoverflow.com/users/5966840/j-paravicini"}, "edited": false, "score": 0, "creation_date": 1563990721, "post_id": 57187048, "comment_id": 100887326, "body": "Ok, thanks anyway, I think with the dependencies the main problem should be fixed. I will try it out as soon as I can"}, {"owner": {"reputation": 619, "user_id": 5966840, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/df6ef1526a40dc90d485f989c73caad4?s=128&d=identicon&r=PG&f=1", "display_name": "J.Paravicini", "link": "https://stackoverflow.com/users/5966840/j-paravicini"}, "edited": false, "score": 0, "creation_date": 1563999856, "post_id": 57187048, "comment_id": 100891206, "body": "So I have exported my core_lib which btw correctly found libtorrent, and it creates an exports.cmake file in the cmake-build-debug folder (I am using CLion) but I do not understand how my app should find this project now?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 619, "user_id": 5966840, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/df6ef1526a40dc90d485f989c73caad4?s=128&d=identicon&r=PG&f=1", "display_name": "J.Paravicini", "link": "https://stackoverflow.com/users/5966840/j-paravicini"}, "edited": false, "score": 0, "creation_date": 1564000412, "post_id": 57187048, "comment_id": 100891399, "body": "@J.Paravicini I have found an <a href=\"https://stackoverflow.com/a/31537603/2104697\">excellent answer about exporting libraries here</a>. Also, don&#39;t fear looking at how other projects has done it. For example, <a href=\"https://github.com/nlohmann/json/blob/develop/CMakeLists.txt#L102\" rel=\"nofollow noreferrer\">nlohmann_json</a> is doing a pretty good job with it&#39;s cmake support."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 619, "user_id": 5966840, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/df6ef1526a40dc90d485f989c73caad4?s=128&d=identicon&r=PG&f=1", "display_name": "J.Paravicini", "link": "https://stackoverflow.com/users/5966840/j-paravicini"}, "edited": false, "score": 0, "creation_date": 1564000501, "post_id": 57187048, "comment_id": 100891431, "body": "@J.Paravicini Also, for cmake to find your other project, you&#39;ll have to set the prefix path to the build directory of your library: <code>cmake -DCMAKE_PREFIX_PATH=&#47;path&#47;to&#47;core&#47;build ..</code> although this is explained in the answer I linked"}, {"owner": {"reputation": 619, "user_id": 5966840, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/df6ef1526a40dc90d485f989c73caad4?s=128&d=identicon&r=PG&f=1", "display_name": "J.Paravicini", "link": "https://stackoverflow.com/users/5966840/j-paravicini"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1564046226, "post_id": 57187048, "comment_id": 100905184, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/196971/discussion-between-j-paravicini-and-guillaume-racicot\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 4, "last_activity_date": 1564150842, "last_edit_date": 1564150842, "creation_date": 1563984050, "answer_id": 57187048, "question_id": 57186187, "link": "https://stackoverflow.com/questions/57186187/cmake-nested-libraries/57187048#57187048", "title": "CMake nested libraries", "body": "<p>Usually, this is represented with targets and links between them.</p>\n\n<p>Your setup could look like this:</p>\n\n<pre><code>#  core cmake file\nfind_package(LibtorrentRasterbar REQUIRED)\n\nadd_library(core_lib file1.cpp file2.cpp file3.cpp ...)\ntarget_link_libraries(core_lib PUBLIC LibtorrentRasterbar::torrent-rasterbar) # see below\n</code></pre>\n\n<pre><code># app cmake file\n\nfind_package(core_lib) # find it elsewhere\n\nadd_executable(app file1.cpp file2.cpp file3.cpp ...)\ntarget_link_libraries(exec PRIVATE core_lib::core_lib)\n</code></pre>\n\n<p>If core needs new libraries in it's headers, then you should add them to the dependencies of <code>core_lib</code>. Any public requirement is transitively propagated to users, like the <code>app</code> target.</p>\n\n<p>The depedencies with external libraries or build tree is expressed using <code>find_library</code>. It can be a library installed in your root, installed in your user directory installed in a subdirectory of your project or simply the build tree of the library. In your case, finding the build tree is probably what you want.</p>\n\n<p>Then since your <code>core_lib</code> library sits in another project, I suggest to go looking at how to export targets from a build tree or an installation, so <code>find_package(core_lib)</code> would work.</p>\n\n<hr>\n\n<p>Unfortunately <code>Libtorrent</code> does not appear to support CMake properly, so the package <code>Libtorrent</code> won't be found and target <code>Libtorrent::torrent-rasterbar</code> won't be defined.</p>\n\n<p>There are ways to work around by trying their <code>FindLibtorrentRasterbar.cmake</code>.</p>\n\n<p>Looking at <a href=\"https://github.com/steeve/libtorrent/blob/master/examples/cmake/FindLibtorrentRasterbar.cmake\" rel=\"nofollow noreferrer\">their find module</a>, it's clear it's not made with modern cmake in mind. You'll have to add these lines at the end if the file to support linking to their targets:</p>\n\n<pre><code>if(LibtorrentRasterbar_FOUND)\n    set(LibtorrentRasterbar_LIBRARY_DEPS \"${LibtorrentRasterbar_LIBRARIES}\")\n    list(REMOVE_ITEM LibtorrentRasterbar_LIBRARY_DEPS ${LibtorrentRasterbar_LIBRARY})\n\n    if(LibtorrentRasterbar_USE_STATIC_LIBS)\n        add_library(LibtorrentRasterbar::torrent-rasterbar STATIC IMPORTED GLOBAL)\n    else()\n        add_library(LibtorrentRasterbar::torrent-rasterbar SHARED IMPORTED GLOBAL)\n    endif()\n\n    set_target_properties(LibtorrentRasterbar::torrent-rasterbar PROPERTIES\n        IMPORTED_LOCATION ${LibtorrentRasterbar_LIBRARY}\n        INTERFACE_LINK_LIBRARIES ${LibtorrentRasterbar_LIBRARY_DEPS}\n        INTERFACE_COMPILE_DEFINITIONS ${LibtorrentRasterbar_DEFINITIONS}\n        INTERFACE_INCLUDE_DIRECTORIES ${LibtorrentRasterbar_INCLUDE_DIRS}\n    )\nendif()\n</code></pre>\n\n<hr>\n\n<p>One detail I didn't mention is that <code>find_package</code> won't try to find the packages of your dependency. To do that, create a custom config file that look like this:</p>\n\n<pre><code># cmake/core_lib-config.cmake.in\ninclude(CMakeFindDependencyMacro)\n\n# this line is just like a find_package\n# but made for transitivity\nfind_dependency(LibtorrentRasterbar)\ninclude(\"${CMAKE_CURRENT_LIST_DIR}/core_lib-targets.cmake\")\n</code></pre>\n\n<p>Then change your exportation to output into <code>core_lib-targets.cmake</code> instead of the usual config:</p>\n\n<pre><code># this is the new config file with the add_dependency\nconfigure_file(\n    cmake/core_lib-config.cmake.in\n    core_lib-config.cmake\n    @ONLY\n)\n\n# the new config file will include this target file\ninstall(EXPORT core_lib_targets\n        NAMESPACE core_lib::\n        FILE core_lib-targets.cmake\n        DESTINATION lib/cmake/core_lib)\n\n# export the current build tree\nexport(\n    EXPORT core_lib_targets\n    NAMESPACE core_lib::\n    FILE \"${CMAKE_CURRENT_BINARY_DIR}/core_lib-targets.cmake\"\n)\n</code></pre>\n"}], "owner": {"reputation": 619, "user_id": 5966840, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/df6ef1526a40dc90d485f989c73caad4?s=128&d=identicon&r=PG&f=1", "display_name": "J.Paravicini", "link": "https://stackoverflow.com/users/5966840/j-paravicini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 672, "favorite_count": 1, "accepted_answer_id": 57187048, "answer_count": 1, "score": 1, "last_activity_date": 1564150842, "creation_date": 1563981288, "question_id": 57186187, "link": "https://stackoverflow.com/questions/57186187/cmake-nested-libraries", "title": "CMake nested libraries", "body": "<p>I have a Project in c++ where my <code>executable</code> depends on my <code>core library</code> and that library depends on another external library, <code>libtorrent</code> if it is of any relevance.</p>\n\n<p>The problem is I can not figure out how to setup my CMakeLists.txt, I have been searching for days now, without avail.</p>\n\n<p>The main idea is that the <code>core library</code> and the <code>executable</code> are on seperate git repositories, so the library is not a sub git module of the executable. </p>\n\n<p>Preferably I would be able to use ExternalProject_Add to add the <code>core library</code> to the <code>executable</code> but when I do this, the <code>executable</code> complains that it does not know anything about <code>libtorrent</code> which again the core library uses. Adding the headers of <code>libtorrent</code> to the executable wasn't enough, I would also need to link the <code>executable</code> to <code>libtorrent</code>. But why would I compile the <code>core library</code> then anyway, since I just have to add all dependencies of the <code>core library</code> to the <code>executable</code> again.</p>\n\n<p>If someone can point me in the right direction of how to setup a project that uses a core library that has other dependencies and an executable that uses the core library.</p>\n"}, {"tags": ["c++", "functional-programming"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 3, "creation_date": 1563980288, "post_id": 57185820, "comment_id": 100882100, "body": "Just curious: why have you chosen <code>std::bind</code> instead of using a lambda?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 2, "creation_date": 1563980440, "post_id": 57185820, "comment_id": 100882185, "body": "<code>std::remove_pointer</code> operates on types, not expressions (which is why the syntax is <code>typename std::remove_pointer&lt;SomeType&gt;::type</code>, not <code>std::remove_pointer(SomeExpression)</code>."}, {"owner": {"reputation": 13, "user_id": 1654399, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5FOb90XvlCk/AAAAAAAAAAI/AAAAAAAAKUo/XzW-xcSgjro/photo.jpg?sz=128", "display_name": "galowma", "link": "https://stackoverflow.com/users/1654399/galowma"}, "edited": false, "score": 0, "creation_date": 1563980838, "post_id": 57185820, "comment_id": 100882408, "body": "do you mean the result3 is SomeExpression? this is also build failed:MyGet mg3 = std::bind(&amp;std::remove_pointer(Result*)::type::get, &amp;result3, std::cref(&quot;result3&quot;));"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1563981044, "post_id": 57185820, "comment_id": 100882521, "body": "To use a lambda: <code>auto mg1 = [result1] () { return result1.get (&quot;result1&quot;); };</code> and declare <code>get</code> <code>const</code>."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1563981517, "post_id": 57185820, "comment_id": 100882789, "body": "Why are you trying to use <code>remove_pointer</code> to get the type that <code>result1</code> points to when you already know that type?  It&#39;s simply <code>Result</code>."}], "answers": [{"comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1563981476, "post_id": 57186054, "comment_id": 100882770, "body": "But we already know the type of <code>remove_pointer&lt;decltype(result3)&gt;</code> ... it&#39;s <code>Result</code>."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1563981554, "post_id": 57186054, "comment_id": 100882805, "body": "@JonathanWakely We also already know what the program will output, yet we went throug the <code>std::bind</code> song and dance. The implicit assumption here was that the type of <code>result3</code> is not known beforehand and just presented this way for simplicity. I&#39;m aware that this would probably involve templates so there would be some <code>typename</code> shenanigans (which is another good reason to use lambdas instead)."}, {"owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "edited": false, "score": 0, "creation_date": 1563982909, "post_id": 57186054, "comment_id": 100883567, "body": "in the second option(meant for c++11), isn&#39;t <code>std::remove_pointer&lt;decltype(result3)&gt;::type::get</code> should have <code>typename</code>, as <code>::type</code> is depended?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "edited": false, "score": 1, "creation_date": 1563983026, "post_id": 57186054, "comment_id": 100883627, "body": "@JeJo Only if we are in a template function. <code>main</code> is not a template function so there is no two-phase lookup and no dependent names. But as mentioned above, it&#39;s unlikely that you need <code>std::remove_pointer</code> outside of a template, which is why this code looks weird."}, {"owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "edited": false, "score": 0, "creation_date": 1563983274, "post_id": 57186054, "comment_id": 100883773, "body": "@MaxLanghof Oh.. yeah. I didn&#39;t read the comments and went for the answers. BTW, I didn&#39;t know about this too!"}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 2, "last_activity_date": 1563980881, "creation_date": 1563980881, "answer_id": 57186054, "question_id": 57185820, "link": "https://stackoverflow.com/questions/57185820/stdbind-works-with-decltype-type-of-class-member-functions-failed/57186054#57186054", "title": "std::bind works with decltype type of class member functions failed", "body": "<p>The correct syntax would be:</p>\n\n<pre><code>Result* result3 = new Result;\nMyGet mg3 = std::bind(\n    &amp;std::remove_pointer_t&lt;decltype(result3)&gt;::get, result3, std::cref(\"result3\"));\n</code></pre>\n\n<p>or </p>\n\n<pre><code>MyGet mg3 = std::bind(\n    &amp;std::remove_pointer&lt;decltype(result3)&gt;::type::get, result3, std::cref(\"result3\"));\n</code></pre>\n\n<p><code>std::remove_pointer</code> operates on types, not expressions. Use <code>decltype</code> to get the type of <code>result3</code> and then remove the pointer.</p>\n\n<p>Also, you should of course pass <code>result3</code> directly, not a pointer to it (it is already a pointer).</p>\n\n<p>Demo: <a href=\"https://godbolt.org/z/Rf2PpB\" rel=\"nofollow noreferrer\">https://godbolt.org/z/Rf2PpB</a></p>\n"}, {"tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": true, "score": 3, "last_activity_date": 1563981644, "last_edit_date": 1563981644, "creation_date": 1563980913, "answer_id": 57186067, "question_id": 57185820, "link": "https://stackoverflow.com/questions/57185820/stdbind-works-with-decltype-type-of-class-member-functions-failed/57186067#57186067", "title": "std::bind works with decltype type of class member functions failed", "body": "<p>There are a number of issues with your last <code>std::bind</code> call:</p>\n\n<ul>\n<li><code>std::remove_pointer(result3)</code></li>\n</ul>\n\n<p><code>remove_pointer</code> is a class. You want <code>remove_pointer_t</code> which will produce the type sans pointer in parentheses, which leads to the next point</p>\n\n<ul>\n<li><p><code>result3</code> is an <em>instance</em> of <code>Result*</code>, we need to use <code>decltype</code> to get its type, because <code>remove_pointer</code> operates on type, which leads to the next point:</p></li>\n<li><p><code>std::remove_pointer</code> as a templated type trait wants a <em>type</em> as a <em>template argument</em> in angle braces, not in parentheses</p></li>\n</ul>\n\n<p>With the edits applied this bring us to the following syntax</p>\n\n<pre><code>MyGet mg3 = std::bind(&amp;std::remove_pointer_t&lt;decltype(result3)&gt;::get, result3, std::cref(\"result3\"));\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/h3tGoKfV6c2ue0Hc\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<hr>\n\n<p>In the end, a <a href=\"https://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow noreferrer\">lambda</a> may be easier to deal with. You don't need to construct a <code>std::function</code> at all:</p>\n\n<pre><code>Result result1;\nauto mg1 = [&amp;result1](){return result1.get(\"result1\");};\nstd::cout &lt;&lt; mg1() &lt;&lt; std::endl;\nResult result2;\nauto mg2 = [&amp;result2](){return result2.get(\"result2\");};\nstd::cout &lt;&lt; mg2() &lt;&lt; std::endl;\nResult* result3 = new Result;\nauto mg3 = [result3](){return result3-&gt;get(\"result3\");};\nstd::cout &lt;&lt; mg3() &lt;&lt; std::endl;\ndelete result3;\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/3feYkT9QQZh6jL57\" rel=\"nofollow noreferrer\">Lambda demo</a></p>\n\n<p>I highly recommend <a href=\"https://youtu.be/zt7ThwVfap0?t=1518\" rel=\"nofollow noreferrer\">STL's CppCon 2015 talk</a> about why <code>bind()</code> is all but deprecated in favor of lambdas.</p>\n"}, {"comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1563981706, "post_id": 57186079, "comment_id": 100882897, "body": "Worth mentioning that <code>*result3</code> would store a copy inside the bind result, which might not be what&#39;s intended (it&#39;s not what the previous two uses of <code>bind</code> in the OP&#39;s code do, anyway)."}], "tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 1, "last_activity_date": 1563980937, "creation_date": 1563980937, "answer_id": 57186079, "question_id": 57185820, "link": "https://stackoverflow.com/questions/57185820/stdbind-works-with-decltype-type-of-class-member-functions-failed/57186079#57186079", "title": "std::bind works with decltype type of class member functions failed", "body": "<ol>\n<li><p>You should use <code>decltype</code> on the variable to get the type at first, and then use <code>remove_pointer</code> to get the type you want.</p></li>\n<li><p><code>result3</code> is a pointer itself, you should pass <code>result3</code> or <code>*result3</code> instead of <code>&amp;result3</code>.</p></li>\n</ol>\n\n<p>e.g.</p>\n\n<pre><code>MyGet mg3 = std::bind(&amp;std::remove_pointer&lt;decltype(result3)&gt;::type::get, result3, std::cref(\"result3\"));\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 1654399, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5FOb90XvlCk/AAAAAAAAAAI/AAAAAAAAKUo/XzW-xcSgjro/photo.jpg?sz=128", "display_name": "galowma", "link": "https://stackoverflow.com/users/1654399/galowma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 57186067, "answer_count": 3, "score": 1, "last_activity_date": 1563981644, "creation_date": 1563980127, "last_edit_date": 1563980188, "question_id": 57185820, "link": "https://stackoverflow.com/questions/57185820/stdbind-works-with-decltype-type-of-class-member-functions-failed", "title": "std::bind works with decltype type of class member functions failed", "body": "<p>I am using decltype and std::remove_pointer to declare type class, and want to pass it to std::bind.</p>\n\n<pre><code>class Result { \npublic:\n    Result(){}\n    ~Result(){}\n    std::string get(const std::string&amp; name) { return name; } \n}; \n\ntypedef std::function&lt;std::string()&gt; MyGet; \n\nint main() {\n    // OK\n    Result result1;\n    MyGet mg1 = std::bind(&amp;Result::get, &amp;result1, std::cref(\"result1\"));\n    std::cout &lt;&lt; mg1() &lt;&lt; std::endl;\n    // OK\n    Result result2;\n    MyGet mg2 = std::bind(&amp;decltype(result2)::get, &amp;result2, std::cref(\"result2\"));\n    std::cout &lt;&lt; mg2() &lt;&lt; std::endl;\n    // Failed\n    Result* result3 = new Result;\n    MyGet mg3 = std::bind(&amp;decltype(std::remove_pointer(result3))::get, &amp;result3,\nstd::cref(\"result3\"));\n    std::cout &lt;&lt; mg3() &lt;&lt; std::endl;\n    delete result3;\n\n    return 1; \n}\n</code></pre>\n\n<p>the result3 part of code show this error:\ncannot refer to class template 'remove_pointer' without a template argument list\nhow to fix it?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 3101, "user_id": 2027196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90b1ba74298036dc163149d485268fa4?s=128&d=identicon&r=PG", "display_name": "JohnFilleau", "link": "https://stackoverflow.com/users/2027196/johnfilleau"}, "edited": false, "score": 1, "creation_date": 1563980164, "post_id": 57185791, "comment_id": 100882022, "body": "Can you format your question so we can see the exact contents of the txt file? Is it those lines that start with [1, 1] and [2, 8] respectively? Edit: Thanks Quentin for the formatted edit."}, {"owner": {"reputation": 3, "user_id": 11430838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b37403a61221abaf3707ea64d3fedf5?s=128&d=identicon&r=PG&f=1", "display_name": "MistaJ", "link": "https://stackoverflow.com/users/11430838/mistaj"}, "reply_to_user": {"reputation": 3101, "user_id": 2027196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90b1ba74298036dc163149d485268fa4?s=128&d=identicon&r=PG", "display_name": "JohnFilleau", "link": "https://stackoverflow.com/users/2027196/johnfilleau"}, "edited": false, "score": 0, "creation_date": 1563980726, "post_id": 57185791, "comment_id": 100882341, "body": "I apologise. This is my second time asking a question here."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1563981161, "post_id": 57185791, "comment_id": 100882605, "body": "You could use <a href=\"https://en.cppreference.com/w/cpp/io/basic_istream/ignore\" rel=\"nofollow noreferrer\"><code>ignore</code></a> to skip those chars. Or use regex: <a href=\"https://ideone.com/I3T2ER\" rel=\"nofollow noreferrer\">ideone.com/I3T2ER</a>"}, {"owner": {"reputation": 3, "user_id": 11430838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b37403a61221abaf3707ea64d3fedf5?s=128&d=identicon&r=PG&f=1", "display_name": "MistaJ", "link": "https://stackoverflow.com/users/11430838/mistaj"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1563982003, "post_id": 57185791, "comment_id": 100883061, "body": "@Johnny Mopp using your code,   ---------------------------------------------- std::cout &lt;&lt; &quot;x = &quot; &lt;&lt; m[1] &lt;&lt; &quot;, &quot;     \t          &lt;&lt; &quot;y = &quot; &lt;&lt; m[2] &lt;&lt; &quot;, &quot;     \t          &lt;&lt; &quot;city_ID = &quot; &lt;&lt; m[3] &lt;&lt; &quot;, &quot;     \t          &lt;&lt; &quot;city_Name = &quot; &lt;&lt; m[4] &lt;&lt; std::endl;------------------- How should i store the values? x &gt;&gt; m[1]; y &gt;&gt; m[2];...  or   x &gt;&gt; m[1] &gt;&gt; y &gt;&gt;m[2];  im asking cause im not familiar with regex"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1563982565, "post_id": 57185791, "comment_id": 100883370, "body": "@MistaJ I updated the code to use variables. And just for fun, here&#39;s a version using <code>ignore()</code>: <a href=\"https://ideone.com/z63U5C\" rel=\"nofollow noreferrer\">ideone.com/z63U5C</a>"}, {"owner": {"reputation": 3, "user_id": 11430838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b37403a61221abaf3707ea64d3fedf5?s=128&d=identicon&r=PG&f=1", "display_name": "MistaJ", "link": "https://stackoverflow.com/users/11430838/mistaj"}, "edited": false, "score": 0, "creation_date": 1563982666, "post_id": 57185791, "comment_id": 100883427, "body": "The text file only has ---------------------------------- [1, 1]-3-Big_City [2, 8]-2-Mid_City -----------------------------------------------------------I added in the comments to illustrate the values i want to retrieve"}, {"owner": {"reputation": 3101, "user_id": 2027196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90b1ba74298036dc163149d485268fa4?s=128&d=identicon&r=PG", "display_name": "JohnFilleau", "link": "https://stackoverflow.com/users/2027196/johnfilleau"}, "edited": false, "score": 0, "creation_date": 1563982902, "post_id": 57185791, "comment_id": 100883564, "body": "Could the X, Y, and city_ID be more than one digit in some records?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11430838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b37403a61221abaf3707ea64d3fedf5?s=128&d=identicon&r=PG&f=1", "display_name": "MistaJ", "link": "https://stackoverflow.com/users/11430838/mistaj"}, "edited": false, "score": 0, "creation_date": 1563982326, "post_id": 57186429, "comment_id": 100883229, "body": "I apologise if my code is not very good. &quot;x = &quot; and &quot;y = &quot; is not in the text file. I tried to store the values i retrieve into x and y, but i am unable to store them into the variables."}, {"owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "reply_to_user": {"reputation": 3, "user_id": 11430838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b37403a61221abaf3707ea64d3fedf5?s=128&d=identicon&r=PG&f=1", "display_name": "MistaJ", "link": "https://stackoverflow.com/users/11430838/mistaj"}, "edited": false, "score": 0, "creation_date": 1563984811, "post_id": 57186429, "comment_id": 100884545, "body": "@MistaJ: Edited"}], "tags": [], "owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "is_accepted": false, "score": 0, "last_activity_date": 1563984786, "last_edit_date": 1563984786, "creation_date": 1563982093, "answer_id": 57186429, "question_id": 57185791, "link": "https://stackoverflow.com/questions/57185791/reading-input-from-txt-file-with-different-kinds-of-delimiters/57186429#57186429", "title": "Reading input from .txt file with different kinds of delimiters", "body": "<p>Try this snippet:</p>\n\n<pre><code>struct city_t {\n    int x;\n    int y;\n    int city_ID;\n    string city_name;\n};\n\nint main()\n{\n    ifstream file(\"person.txt\");\n    vector&lt;city_t&gt; cities;\n\n    if (file.is_open()) {\n        string line;\n        while (getline(file, line, '\\n')) {  // parse a line at a time\n\n            stringstream ss{ line }; // remove expected :\n            city_t city;\n            string word;\n            while (getline(ss, word, ',')) { //parse a line at a time\n\n                int fieldidx = 1;\n                if (word.find(\"[\") != -1)\n                    city.x = std::atoi(word.substr(1).c_str());\n                else {\n                    stringstream ss2{ word };\n                    string field;\n                    while (getline(ss2, field, '-')) {\n                        field = field;\n                        if (fieldidx == 1) {\n                            city.y = std::atoi(field.c_str());\n                        }\n                        else\n                            if (fieldidx == 2) {\n                                city.city_ID = std::atoi(field.c_str());\n                            }\n                            else\n                                if (fieldidx == 3) {\n                                    city.city_name = field;\n                                }\n                        fieldidx++;\n                    }\n\n                }\n\n            }\n            cities.push_back(city);\n        }\n        file.close();\n    }\n\n    for (auto e : cities) {\n        cout &lt;&lt; e.x &lt;&lt; \"  \" &lt;&lt; e.y &lt;&lt; \"  \" &lt;&lt; e.city_ID &lt;&lt; \"  \" &lt;&lt; e.city_name &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193, "user_id": 11508323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52392146cec0fa85b494f3a1c1722562?s=128&d=identicon&r=PG&f=1", "display_name": "Tiphaine", "link": "https://stackoverflow.com/users/11508323/tiphaine"}, "is_accepted": false, "score": 0, "last_activity_date": 1563982459, "creation_date": 1563982459, "answer_id": 57186549, "question_id": 57185791, "link": "https://stackoverflow.com/questions/57185791/reading-input-from-txt-file-with-different-kinds-of-delimiters/57186549#57186549", "title": "Reading input from .txt file with different kinds of delimiters", "body": "<p>My answer is more a workaround :</p>\n\n<p>I don't think you really need to use multiple delimiters. It will add useless overhead to your program to parse them all.\nInstead you can just say \"The first parameter is x, the second is y, etc\"\nWith this parsing it will result in getting an array from the line and accessing it with the correct index corresponding (you should use enum for this).</p>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 1, "last_activity_date": 1563987545, "creation_date": 1563987545, "answer_id": 57187934, "question_id": 57185791, "link": "https://stackoverflow.com/questions/57185791/reading-input-from-txt-file-with-different-kinds-of-delimiters/57187934#57187934", "title": "Reading input from .txt file with different kinds of delimiters", "body": "<p>There is nothing difficult about parsing a complex line to obtain the needed information from it, you just approach it the same way you would eat a whale -- one byte at a time...</p>\n\n<p>In your case, since you are coordinating 3 integers and a string for each record of city data (e.g. <code>x, y, id</code> and <code>name</code>) it makes sense to declare a simple <code>struct</code> to coordinate the differing types of data as one object. That allows you to store all data in a <code>vector</code> of <code>struct</code>. Here, you could use something simple like:</p>\n\n<pre><code>struct data_t {         /* simple struct to coordinate data for each city */\n    int x, y, id;\n    std::string name;\n};\n</code></pre>\n\n<p>To read you data, the easiest approach is to open the file, and then read each line of data into a string. You then have that string to parse your data from. Converting the string into a <code>stringstream</code> is helpful as it allows you to treat your line of data as a stream making use of <code>&gt;&gt;</code> as well as <code>getline</code> in various successions to get the wanted information from the line.</p>\n\n<p>To get the information from the stringstream created from the line, let's look at an example of what needs to be done to get the information you want starting with the line contained in the stringstream:</p>\n\n<pre><code>[1, 1]-3-Big_City\n</code></pre>\n\n<p>Within the read loop we will read values into a temporary <code>struct</code> and if everything parses correctly, we will add that temp struct to your vector of struct. The temp struct can be:</p>\n\n<pre><code>        data_t dtmp;                    /* temp data struct */\n</code></pre>\n\n<p>To get your <code>x</code> value, you need to remove the <code>[</code> leaving <code>\"1, 1]-3-Big_City\"</code> in the stringstream. The key is the <strong><em>validate</em></strong> each step. To remove the <code>[</code> you can use:</p>\n\n<pre><code>        /* read/discard [ */\n        if (!getline (ss, stmp, '[')) {\n            std::cerr &lt;&lt; \"error: invalid format before - x.\\n\";\n            continue;\n        }\n</code></pre>\n\n<p>Now read the <code>1</code> directly from the stringstream into <code>dtmp.x</code> validating that the integer conversion succeeded:</p>\n\n<pre><code>        if (!(ss &gt;&gt; dtmp.x)) {      /* read x from stringstream */\n            std::cerr &lt;&lt; \"error: invalid format - x.\\n\";\n            continue;\n        }\n</code></pre>\n\n<p>Since the read stops at the first non-integer character in the stringstream, you are now left with <code>\", 1]-3-Big_City\"</code>. Since <code>&gt;&gt;</code> will skip leading whitespace, all you need to do to prepare for reading your <code>y</code> value is remove the <code>','</code> and then read you <code>y</code> value into <code>dtmp.y</code>:</p>\n\n<pre><code>        /* read/discard , */\n        if (!getline (ss, stmp, ',')) {\n            std::cerr &lt;&lt; \"error: invalid format before - y.\\n\";\n            continue;\n        }\n        if (!(ss &gt;&gt; dtmp.y)) {      /* read y from stringstream */\n            std::cerr &lt;&lt; \"error: invalid format - y.\\n\";\n            continue;\n        }\n</code></pre>\n\n<p>(<strong>note:</strong> since you know that you only need to remove a single character, you can read a character with <code>ss.get()</code>, but to be consistent you can continue with <code>getline</code> and a delimiter -- entirely up to you)</p>\n\n<p>After reading the <code>y</code> value, you are left with  <code>\"]-3-Big_City\"</code> in the stringstream, so your next task is to strip through <code>'-'</code> to expose the <code>id</code> for reading. At this point it should be obvious that you can basically repeat what we have done above all the way down the line to read the rest of the values. For <code>id</code>, let's do:</p>\n\n<pre><code>        if (!getline (ss, stmp, '-')) { /* read/discard - */\n            std::cerr &lt;&lt; \"error: invalid format before - id.\\n\";\n            continue;\n        }\n        if (!(ss &gt;&gt; dtmp.id)) {     /* read id from stringstream */\n            std::cerr &lt;&lt; \"error: invalid format - id.\\n\";\n            continue;\n        }\n</code></pre>\n\n<p>Leaving <code>\"-Big_City\"</code>, and again, either <code>ss.get()</code> to strip the <code>'-'</code> or continue with <code>getline</code> as we have done above:</p>\n\n<pre><code>        if (!getline (ss, stmp, '-')) { /* read/discard - */\n            std::cerr &lt;&lt; \"error: invalid format before - name.\\n\";\n            continue;\n        }\n        if (!(ss &gt;&gt; dtmp.name)) {   /* read name from stringstream */\n            std::cerr &lt;&lt; \"error: invalid format - name.\\n\";\n            continue;\n        }\n</code></pre>\n\n<p>That's it. Your data is now parsed into the temp struct <code>dtmp</code> and all you need to do to store the data in your vector is:</p>\n\n<pre><code>        data.push_back(dtmp);   /* add temp struct to vector of struct */\n</code></pre>\n\n<p>Placing the above in a loop will allow you to parse all data in your file into your vector of struct. As you progress in your programming, and begin using classes for objects like city data, you will find you can even overload the <code>&gt;&gt;</code> operator to take care of all that is done above and you need only provide the open file stream and your overloaded input function will do the rest. (that's left for another day)</p>\n\n<p>A short example reading your data file could be:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nstruct data_t {         /* simple struct to coordinate data for each city */\n    int x, y, id;\n    std::string name;\n};\n\nint main (int argc, char **argv) {\n\n    if (argc &lt; 2) { /* validate argument given for filename */\n        std::cerr &lt;&lt; \"error: filename required as 1st argument.\\n\";\n        return 1;\n    }\n\n    std::string line;           /* string to hold each line read from file */\n    std::vector&lt;data_t&gt; data;   /* vector of struct data_t to hold data */\n    std::ifstream f (argv[1]);  /* open filename given for reading */\n\n    while (getline (f, line)) {         /* read each line of file into line */\n        data_t dtmp;                    /* temp data struct */\n        std::string stmp;               /* temp string for parsing */\n        std::stringstream ss (line);    /* create stringstream from line */\n\n        /* read/discard [ */\n        if (!getline (ss, stmp, '[')) {\n            std::cerr &lt;&lt; \"error: invalid format before - x.\\n\";\n            continue;\n        }\n        if (!(ss &gt;&gt; dtmp.x)) {      /* read x from stringstream */\n            std::cerr &lt;&lt; \"error: invalid format - x.\\n\";\n            continue;\n        }\n\n        /* read/discard , */\n        if (!getline (ss, stmp, ',')) {\n            std::cerr &lt;&lt; \"error: invalid format before - y.\\n\";\n            continue;\n        }\n        if (!(ss &gt;&gt; dtmp.y)) {      /* read y from stringstream */\n            std::cerr &lt;&lt; \"error: invalid format - y.\\n\";\n            continue;\n        }\n\n        if (!getline (ss, stmp, '-')) { /* read/discard - */\n            std::cerr &lt;&lt; \"error: invalid format before - id.\\n\";\n            continue;\n        }\n        if (!(ss &gt;&gt; dtmp.id)) {     /* read id from stringstream */\n            std::cerr &lt;&lt; \"error: invalid format - id.\\n\";\n            continue;\n        }\n\n        if (!getline (ss, stmp, '-')) { /* read/discard - */\n            std::cerr &lt;&lt; \"error: invalid format before - name.\\n\";\n            continue;\n        }\n        if (!(ss &gt;&gt; dtmp.name)) {   /* read name from stringstream */\n            std::cerr &lt;&lt; \"error: invalid format - name.\\n\";\n            continue;\n        }\n\n        data.push_back(dtmp);   /* add temp struct to vector of struct */\n    }\n\n    for (auto&amp; d : data)    /* output all stored data */\n        std::cout &lt;&lt; \"x: \" &lt;&lt; d.x &lt;&lt; \"  y: \" &lt;&lt; d.y &lt;&lt; \"  id: \" &lt;&lt; d.id\n                &lt;&lt; \"  name: \" &lt;&lt; d.name &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p><strong>Example Input File</strong></p>\n\n<pre><code>$ cat dat/xyid.txt\n[1, 1]-3-Big_City\n[2, 8]-2-Mid_City\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/citydata dat/xyid.txt\nx: 1  y: 1  id: 3  name: Big_City\nx: 2  y: 8  id: 2  name: Mid_City\n</code></pre>\n\n<p>Look through everything and make sure you understand what was done. If you have questions, just ask in a comment below.</p>\n"}, {"tags": [], "owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "is_accepted": false, "score": 1, "last_activity_date": 1564056329, "last_edit_date": 1564056329, "creation_date": 1563995447, "answer_id": 57189750, "question_id": 57185791, "link": "https://stackoverflow.com/questions/57185791/reading-input-from-txt-file-with-different-kinds-of-delimiters/57189750#57189750", "title": "Reading input from .txt file with different kinds of delimiters", "body": "<p>And now the next approach. This is using Object Oriented idioms and modern C++ algorithms.</p>\n\n<p>We have data and methods which belong somehow together. For this there are classes (structs) in C++. So you can define a class, with member variables and methods, which can work with the class varaibles. Everything works as one object.</p>\n\n<p>Additionally. The class knows, how to read or print its values. And only the class should know that. This wisdom is encapsulated.</p>\n\n<p>And, next, we want to search interesting data embedded somewhere in a string. The string contains always a certain pattern. In your case your have 3 integers and one string as interesting data and some delimiters in between, whatever they are.</p>\n\n<p>To match such patterns and search for interesting parts of a string, C++ has <code>std::regex</code>. They are extremely powerful and hence a little bit complicated to define. </p>\n\n<p>In the below example I will use <code>const std::regex re(R\"((\\d+).*?(\\d+).*?(\\d+).*?([\\w_]+))\");</code>. This defines 4 groups of submatches (in brackets) and something in between. So any delimiter, space or whatever is possible. </p>\n\n<p>If you want to be more strict, you can simply change the pattern and you can detect errors in the source data. See <code>const std::regex re(R\"(\\[(\\d+)\\,\\ (\\d+)\\]\\-(\\d+)\\-([\\w_]+))\");</code>. This is a more strict approach. The inputfile will not be read in case of error. Or only the beginning with the valid data.</p>\n\n<p>Please see below example: </p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;regex&gt;\n#include &lt;iterator&gt;\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;fstream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;ios&gt;\n\nstd::istringstream testFile{ R\"([12, 34]-56-Big_City1\n[789 , 910 ] - 11 -  Big_City2\n(55; 88} + 22 *** Big_City3\n[77, 666]-555-Big_City4)\" };\n\n\n\nconst std::regex re(R\"((\\d+).*?(\\d+).*?(\\d+).*?([\\w_]+))\");\n\n\nstruct CityData\n{\n    // Define the city's data\n    int xCoordinate{};\n    int yCoordinate{};\n    int cityId{};\n    std::string cityName{};\n\n    // Overload the extractor operator &gt;&gt; to read and parse a line\n    friend std::istream&amp; operator &gt;&gt; (std::istream&amp; is, CityData&amp; cd) {\n\n        // We will read the line in this variable\n        std::string line{};                 \n\n        // Read the line and check, if it is OK\n        if (std::getline(is, line)) {\n\n            // Find the matched substrings\n            std::smatch sm{};\n            if (std::regex_search(line, sm, re)) {\n                // An convert them to students record\n                cd.xCoordinate = std::stoi(sm[1]);\n                cd.yCoordinate = std::stoi(sm[2]);\n                cd.cityId = std::stoi(sm[3]);\n                cd.cityName = sm[4];\n            }\n            else {\n                is.setstate(std::ios::failbit);\n            }\n        }\n        return is;\n    }\n\n    friend std::ostream&amp; operator &lt;&lt; (std::ostream&amp; os, const CityData&amp; cd) {\n        return os &lt;&lt; cd.xCoordinate &lt;&lt; ' ' &lt;&lt; cd.yCoordinate &lt;&lt; ' ' &lt;&lt; cd.cityId;\n    }\n};\n\nint main()\n{\n    // Define the variable cityData with the vectors range constructor. Read complete input file and parse data\n    std::vector&lt;CityData&gt; cityData{ std::istream_iterator&lt;CityData&gt;(testFile),std::istream_iterator&lt;CityData&gt;() };\n\n    // Print the complete vector to std::cout\n    std::copy(cityData.begin(), cityData.end(), std::ostream_iterator&lt;CityData&gt;(std::cout,\"\\n\"));\n\n    return 0;\n}\n</code></pre>\n\n<p>Please note: <code>main</code> contains only 2 statements related to CityData. The class knows how to operations should be done.</p>\n\n<p>And, because I cannot use file on SO, I read the data from \"std::istringstream\". This is the same as reading from a file.</p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 11430838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b37403a61221abaf3707ea64d3fedf5?s=128&d=identicon&r=PG&f=1", "display_name": "MistaJ", "link": "https://stackoverflow.com/users/11430838/mistaj"}, "is_accepted": false, "score": 0, "last_activity_date": 1564156440, "creation_date": 1564156440, "answer_id": 57223412, "question_id": 57185791, "link": "https://stackoverflow.com/questions/57185791/reading-input-from-txt-file-with-different-kinds-of-delimiters/57223412#57223412", "title": "Reading input from .txt file with different kinds of delimiters", "body": "<p>{</p>\n\n<pre><code>string locationLine;  &lt;br/&gt;\nwhile(getline(inputFile, locationLine))\n{\n\n    istringstream streamLine(locationLine);  &lt;br/&gt;\n    string coordinates;  &lt;br/&gt;\n    string city_ID;  &lt;br/&gt;\n    string city_name;  &lt;br/&gt;\n\n    getline(streamLine, coordinates, '-');  &lt;br/&gt;\n    getline(streamLine, city_ID, '-');  &lt;br/&gt;\n    getline(streamLine, city_name, '-');  &lt;br/&gt;\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>//Will need to code a function that reference the coordinates to //remove the '[' and ',' and ']'</p>\n"}], "owner": {"reputation": 3, "user_id": 11430838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b37403a61221abaf3707ea64d3fedf5?s=128&d=identicon&r=PG&f=1", "display_name": "MistaJ", "link": "https://stackoverflow.com/users/11430838/mistaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1564156440, "creation_date": 1563980063, "last_edit_date": 1563982492, "question_id": 57185791, "link": "https://stackoverflow.com/questions/57185791/reading-input-from-txt-file-with-different-kinds-of-delimiters", "title": "Reading input from .txt file with different kinds of delimiters", "body": "<p>I am trying to read a .txt file and retrieve x and y coordinates, a city ID, and city name.</p>\n\n<pre><code>[1, 1]-3-Big_City\n//expected : x = 1,  y = 1, city_ID = 3, city_name = Big_City\n\n[2, 8]-2-Mid_City\n//expected : x = 2,  y = 8, city_ID = 2, city_name = Mid_City\n</code></pre>\n\n<p>How do I read and store the <code>x</code>, <code>y</code>, <code>city_ID</code>, and <code>city_name</code></p>\n\n<p>I have a while loop that can print out the whole line, but I do not know how to delimit using the unwanted symbols to get the required values.</p>\n\n<pre><code>while(getline(inputFile, aLine))\n{\n    getline(inputFile, aLine, '[');\n    x = aLine;\n\n    getline(inputFile, aLine, ',');\n    y = aLine;\n\n    // stuck here has getline 3rd parameter only accepts character and not string\n    getline(inputFile, aLine, ']-');\n    city_ID = aLine;\n\n    ....\n\n    cout &lt;&lt; x &lt;&lt; \" \" &lt;&lt; y &lt;&lt; \" \" &lt;&lt; city_ID\n}\n</code></pre>\n\n<p>The output I get is also not what I expected. The first line would be missing and the others are not shown.</p>\n"}, {"tags": ["c++", "opengl-es"], "answers": [{"tags": [], "owner": {"reputation": 8286, "user_id": 533037, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f711473fb27cd269ba5ad2064c15dcd3?s=128&d=identicon&r=PG", "display_name": "solidpixel", "link": "https://stackoverflow.com/users/533037/solidpixel"}, "is_accepted": false, "score": 1, "last_activity_date": 1563980272, "creation_date": 1563980272, "answer_id": 57185874, "question_id": 57185766, "link": "https://stackoverflow.com/questions/57185766/does-uploading-directly-before-render-impact-performance-negatively/57185874#57185874", "title": "Does uploading directly before render impact performance negatively?", "body": "<p>Short answer - no, it shouldn't make any difference.</p>\n\n<p>Rendering is already deeply asynchronous - you don't actually start drawing at the point you call <code>glDrawArrays()</code>, that just adds a command to a queue so the GPU shouldn't block immediately if there was a need for the data to upload.</p>\n\n<p>For most modern hardware there is no actual data \"upload\" in either case - the memory system is coherent so you can see the data on the GPU as soon as unmap completes.</p>\n\n<p>That said, there are benefits to CPU overhead in many cases to making fewer, larger, map/unmap calls so you might want to batch multiple buffer updates together in either case rather than doing them draw-by-draw.</p>\n"}], "owner": {"reputation": 601, "user_id": 9069780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49bf2ad1391fadfaac120f3bb4e625ef?s=128&d=identicon&r=PG&f=1", "display_name": "Desperado17", "link": "https://stackoverflow.com/users/9069780/desperado17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563980272, "creation_date": 1563979967, "question_id": 57185766, "link": "https://stackoverflow.com/questions/57185766/does-uploading-directly-before-render-impact-performance-negatively", "title": "Does uploading directly before render impact performance negatively?", "body": "<p>I have a vertex buffer that I update once a frame using glMapBufferRange and memcpy. Directly after updating, I call glDrawArrays.</p>\n\n<p>A colleague of me says that it would be better to map/write/unmap the buffer at the beginning of the frame, then do other stuff in order to give the buffer time to upload, then call glDrawArrays as late as possible.</p>\n\n<p>Is this claim true? I would think that anything that can cause a flush could trigger the upload burden, maybe at an even more inconvenient time than the actual render call.</p>\n\n<p>Regards </p>\n"}, {"tags": ["c++", "vtk", "point-cloud-library", "point-clouds"], "answers": [{"tags": [], "owner": {"reputation": 1229, "user_id": 9226753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28247b27eef49240c767833514e2ab50?s=128&d=identicon&r=PG&f=1", "display_name": "kanstar", "link": "https://stackoverflow.com/users/9226753/kanstar"}, "is_accepted": true, "score": 2, "last_activity_date": 1563995130, "creation_date": 1563995130, "answer_id": 57189671, "question_id": 57185703, "link": "https://stackoverflow.com/questions/57185703/removing-point-clouds-inside-a-given-box/57189671#57189671", "title": "Removing point clouds inside a given box", "body": "<p>Almost all filters in PCL inherit <a href=\"http://docs.pointclouds.org/trunk/classpcl_1_1_filter_indices.html\" rel=\"nofollow noreferrer\"><code>pcl::FilterIndices</code></a>, where the function <code>setNegative</code> is exposed.<br> Use <code>boxFilter.setNegative(true)</code> to filter the points inside the box.</p>\n"}], "owner": {"reputation": 136, "user_id": 4619106, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/378609b765926aa20b5dc2a63c0681ed?s=128&d=identicon&r=PG&f=1", "display_name": "Anna1994", "link": "https://stackoverflow.com/users/4619106/anna1994"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "accepted_answer_id": 57189671, "answer_count": 1, "score": 0, "last_activity_date": 1563995130, "creation_date": 1563979800, "last_edit_date": 1563980281, "question_id": 57185703, "link": "https://stackoverflow.com/questions/57185703/removing-point-clouds-inside-a-given-box", "title": "Removing point clouds inside a given box", "body": "<p>I would like to implement a code where I can remove certain points of the point clouds inside a given box. This is what I have so far:</p>\n\n<pre><code>void removePoints(){\n\n    pcl::CropBox&lt;pcl::PointXYZI&gt; boxFilter;\n    float x_min = -0.15, y_min = -0.5, z_min = -0.7;\n    float x_max = +1, y_max = +2, z_max = +5;\n    boxFilter.setMin(Eigen::Vector4f(x_min, y_min, z_min, 1.0));\n    boxFilter.setMax(Eigen::Vector4f(x_max, y_max, z_max, 1.0));\n\n    boxFilter.setInputCloud(cloud);\n    boxFilter.filter(*newCloud);\n\n    viewer-&gt;removeAllPointClouds();\n\n    cloudLabel=new int[newCloud-&gt;size()];\n    memset(cloudLabel, 0, newCloud-&gt;size()*sizeof(int));\n\n    ui-&gt;label_filename-&gt;setText(QString::fromStdString(pointcloudFileName));\n    colorHandler.setInputCloud(newCloud);\n    colorHandler.setLabel(cloudLabel);\n    viewer-&gt;addPointCloud&lt;PointT&gt;(newCloud,colorHandler,\"cloud\",0);\n\n\n    viewer-&gt;resetCamera();\n    viewer-&gt;updatePointCloud&lt;PointT&gt;(newCloud,\"cloud\");\n\n    ui-&gt;qvtkWidget-&gt;update();\n\n\n    std::cout&lt;&lt;\"Removal done\"&lt;&lt;std::endl;\n    viewer-&gt;addCube(x_min, x_max, y_min, y_max, z_min, z_max, 1, 0, 0, \"cube\");\n    viewer-&gt;setShapeRenderingProperties(pcl::visualization::PCL_VISUALIZER_COLOR,\n    0.7, 0.7, 0, \"cube\");\n     viewer-&gt;setRepresentationToWireframeForAllActors();\n}\n</code></pre>\n\n<p>This code remove the points outside the box rather than the inside. Is there a way to inverse pcl::CropBox process?</p>\n"}, {"tags": ["c++", "c++11", "undefined-behavior", "unique-ptr", "rvalue-reference"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 2, "creation_date": 1563979213, "post_id": 57185454, "comment_id": 100881471, "body": "Why: Because the standard lacks a r-value ref qualified overload of <code>operator*</code>. Why wasn&#39;t the ref qualified version added? Perhaps an oversight, maybe a good idea for a paper."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 3, "creation_date": 1563979410, "post_id": 57185454, "comment_id": 100881595, "body": "Of course, it would have to be <code>T&amp;&amp; operator*() &amp;&amp; { return ::std::move(*ptr); }</code>, otherwise it wouldn&#39;t even compile"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1563979727, "post_id": 57185454, "comment_id": 100881768, "body": "With your proposed change, would e.g. <code>auto ptr = std::make_unique&lt;int&gt;(7); auto&amp; ref = *ptr;</code> still work?"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1563980187, "post_id": 57185454, "comment_id": 100882039, "body": "If I understand correctly, this defeats the purpose of having unique_ptr. If you want to get the value now, you go through the unique_ptr. If you want to get the value later, you go through the unique_ptr."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1563980509, "post_id": 57185454, "comment_id": 100882224, "body": "&quot;<i>it is saying &quot;I&#39;m UB&quot; more verbosely, thus not so relevant:</i>&quot; I fail to see why. <code>auto&amp;&amp;</code> doesn&#39;t mean &quot;I&#39;m UB&quot;."}, {"owner": {"reputation": 7698, "user_id": 2085626, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yP5Oy.jpg?s=128&g=1", "display_name": "Amir Kirsh", "link": "https://stackoverflow.com/users/2085626/amir-kirsh"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1563982072, "post_id": 57185454, "comment_id": 100883102, "body": "@Someprogrammerdude yes of course <code>auto ptr = std::make_unique&lt;int&gt;(7); auto&amp; ref = *ptr;</code> would work: <a href=\"https://coliru.stacked-crooked.com/a/8ae324730da2cce6\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/8ae324730da2cce6</a>"}, {"owner": {"reputation": 7698, "user_id": 2085626, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yP5Oy.jpg?s=128&g=1", "display_name": "Amir Kirsh", "link": "https://stackoverflow.com/users/2085626/amir-kirsh"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1563982721, "post_id": 57185454, "comment_id": 100883465, "body": "@NicolBolas it is a more verbose UB because the code says to get back rvalue."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1563982849, "post_id": 57185454, "comment_id": 100883536, "body": "@AmirKirsh: My point is that it&#39;s not &quot;saying &#39;I&#39;m UB&#39;&quot; at all. That is, it isn&#39;t more <i>explicitly</i> or obviously a declaration of UB than the lvalue reference version."}, {"owner": {"reputation": 7698, "user_id": 2085626, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yP5Oy.jpg?s=128&g=1", "display_name": "Amir Kirsh", "link": "https://stackoverflow.com/users/2085626/amir-kirsh"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1563989914, "post_id": 57185454, "comment_id": 100886977, "body": "@Angew sure, edited to use std::move for the rvalue overload, was already in my code but accidentally not copied correctly into the question. <a href=\"https://coliru.stacked-crooked.com/a/8ae324730da2cce6\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/8ae324730da2cce6</a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1563992332, "post_id": 57185454, "comment_id": 100888100, "body": "<code>std::cout &lt;&lt; *std::make_unique&lt;int&gt;(7) &lt;&lt; std::endl;</code> works even without adding an <code>operator*</code> for rvalues, because the temp <code>unique_ptr</code> stays in scope until the <code>;</code> is reached, so calling <code>operator*</code> on the temp is perfectly legal and well-defined."}, {"owner": {"reputation": 7698, "user_id": 2085626, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yP5Oy.jpg?s=128&g=1", "display_name": "Amir Kirsh", "link": "https://stackoverflow.com/users/2085626/amir-kirsh"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1563992561, "post_id": 57185454, "comment_id": 100888188, "body": "@RemyLebeau right, and there is no problem with that"}, {"owner": {"reputation": 16111, "user_id": 4386278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1I6qS.jpg?s=128&g=1", "display_name": "Asteroids With Wings", "link": "https://stackoverflow.com/users/4386278/asteroids-with-wings"}, "edited": false, "score": 0, "creation_date": 1604788042, "post_id": 57185454, "comment_id": 114454979, "body": "Functions do not &quot;return&quot; rvalues or lvalues. Value categories pertain to expressions. However, the value category of a function call expression is, at least in part, determined by the return type of that function. So you&#39;d be better off asking about the return type of that <code>operator*</code>."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1563981030, "post_id": 57185905, "comment_id": 100882514, "body": "So, historical reasons and consistency?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1563981207, "post_id": 57185905, "comment_id": 100882635, "body": "That works (in the sense that the referred object still exists) because of the memory leak. In the case of a smart pointer, the reference would be dangling and useless. Why shouldn&#39;t this change with smart pointers, considering this expression appears to be useless with them?"}, {"owner": {"reputation": 7698, "user_id": 2085626, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yP5Oy.jpg?s=128&g=1", "display_name": "Amir Kirsh", "link": "https://stackoverflow.com/users/2085626/amir-kirsh"}, "edited": false, "score": 1, "creation_date": 1563981711, "post_id": 57185905, "comment_id": 100882899, "body": "This is less of a use case and more of &quot;let&#39;s preserve some UB also in smart pointers to keep C++ interesting&quot;... which is less of an argument. I tend to believe that smart pointers were designed to get rid of as many UB of raw pointers as possible, not to preserve them."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 7698, "user_id": 2085626, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yP5Oy.jpg?s=128&g=1", "display_name": "Amir Kirsh", "link": "https://stackoverflow.com/users/2085626/amir-kirsh"}, "edited": false, "score": 1, "creation_date": 1563982348, "post_id": 57185905, "comment_id": 100883241, "body": "@AmirKirsh: It&#39;s not supposed to be a &quot;use case&quot;. It&#39;s supposed to answer the question in your title. Why does it do it like this? Because a smart pointer should act like a pointer where possible, and pointers act this way. Nothing more needs to be said."}, {"owner": {"reputation": 7698, "user_id": 2085626, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yP5Oy.jpg?s=128&g=1", "display_name": "Amir Kirsh", "link": "https://stackoverflow.com/users/2085626/amir-kirsh"}, "edited": false, "score": 1, "creation_date": 1563982888, "post_id": 57185905, "comment_id": 100883555, "body": "@NicolBolas I defer. There is no sense in preserving bad behavior. The question, at the end is phrased: Is there any good usage of operator* on rvalue of std::unique_ptr, returning lvalue ref? There is a difference between saying: it is there for historical reasons but can be changed; or - there is a good use case for this behavior thus cannot change."}, {"owner": {"reputation": 1574, "user_id": 239189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mUAlH.png?s=128&g=1", "display_name": "jszpilewski", "link": "https://stackoverflow.com/users/239189/jszpilewski"}, "reply_to_user": {"reputation": 7698, "user_id": 2085626, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yP5Oy.jpg?s=128&g=1", "display_name": "Amir Kirsh", "link": "https://stackoverflow.com/users/2085626/amir-kirsh"}, "edited": false, "score": 0, "creation_date": 1563983219, "post_id": 57185905, "comment_id": 100883741, "body": "@AmirKirsh With your solution applied to <code>unique_ptr</code> one might ask why it does not hold when <code>make_shared()</code> is used? C++ is a broad and complex language and you should not expect all the language features work together seamlessly."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 7698, "user_id": 2085626, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yP5Oy.jpg?s=128&g=1", "display_name": "Amir Kirsh", "link": "https://stackoverflow.com/users/2085626/amir-kirsh"}, "edited": false, "score": 1, "creation_date": 1563983801, "post_id": 57185905, "comment_id": 100884037, "body": "@AmirKirsh: Then your question is irrelevant. Maybe you&#39;ll present a proposal to have this changed, but it&#39;s not going to be accepted because it&#39;s both a needless difference between pointers and smart pointer and that it&#39;s not backwards compatible. You need something more than &quot;I think this is bad&quot; to get a non-backwards-compatible change through the committee. That is, it doesn&#39;t really matter if there&#39;s a &quot;use case&quot; for it or not, because the behavior isn&#39;t going anywhere."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1563990125, "post_id": 57185905, "comment_id": 100887075, "body": "Am I missing something? &quot;<i>Your code is the equivalent of this (barring the memory leak)</i>&quot; seems incorrect, since the code in OP&#39;s example exhibits undefined behaviour (smart pointer deallocated the resources) while I see no reason for your code to not work. You can still do <code>delete &amp;ref</code> and there is no UB, isn&#39;t there?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1563991071, "post_id": 57185905, "comment_id": 100887499, "body": "@Fureeish: It&#39;s equivalent in terms of the value category of the expressions involved, and the concept of &quot;I dereference a pointer to an object I just dynamically allocated&quot;. That is, the only difference is that the pointer is smart in one case and dumb in another."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1563991225, "post_id": 57185905, "comment_id": 100887558, "body": "Then I believe it&#39;s worth to specify that. Not long ago I answered a question regarding binding a reference to immediately dereferenced <code>new</code>. OP was asking whether that&#39;s UB. It&#39;s not, but I worry that some inexperienced users / programmers may come across this question, see the &quot;<i>results of course with an Undefined Behavior</i>&quot;, see your answer, notice the &quot;<i>equivalent</i>&quot; part and assume it&#39;s also UB."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 10, "last_activity_date": 1563991569, "last_edit_date": 1563991569, "creation_date": 1563980378, "answer_id": 57185905, "question_id": 57185454, "link": "https://stackoverflow.com/questions/57185454/why-does-operator-of-rvalue-unique-ptr-return-an-lvalue/57185905#57185905", "title": "Why does operator* of rvalue unique_ptr return an lvalue?", "body": "<p>Your code, in terms of the value categories involved and the basic idea, is the equivalent of this:</p>\n\n<pre><code>auto &amp;ref = *(new int(7));\n</code></pre>\n\n<p><code>new int(7)</code> results in a pointer object which is a prvalue expression. Dereferencing that prvalue results in an lvalue expression.</p>\n\n<p>Regardless of whether the pointer object is an rvalue or lvalue, applying <code>*</code> to a pointer will result in an lvalue. That shouldn't change just because the pointer is \"smart\".</p>\n"}, {"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1563988228, "post_id": 57188006, "comment_id": 100886198, "body": "This safer alternative has the problem I described in my answer that I deleted, because it doesn&#39;t apply to returning a reference. The problem is that it introduces an extra copy / move, which is not always an option, in particular when the element type is non-copyable and non-movable."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 2, "last_activity_date": 1563995122, "last_edit_date": 1563995122, "creation_date": 1563987869, "answer_id": 57188006, "question_id": 57185454, "link": "https://stackoverflow.com/questions/57185454/why-does-operator-of-rvalue-unique-ptr-return-an-lvalue/57188006#57188006", "title": "Why does operator* of rvalue unique_ptr return an lvalue?", "body": "<p><code>std::cout &lt;&lt; *std::make_unique&lt;int&gt;(7) &lt;&lt; std::endl;</code> already works as the temporary dies at the end of the full expression.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>T&amp; operator*() &amp; { return *ptr; }\nT&amp;&amp; operator*() &amp;&amp; { return std::move(*ptr); }\n</code></pre>\n\n<p>wouldn't avoid the dangling reference, (as for your example)</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>auto&amp;&amp; ref = *std::make_unique&lt;int&gt;(7); // or const auto&amp;\nstd::cout &lt;&lt; ref &lt;&lt; std::endl;\n</code></pre>\n\n<p>but indeed, would avoid binding a temporary to a non-const lvalue reference.</p>\n\n<p>Another safer alternative would be:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>T&amp; operator*() &amp; { return *ptr; }\nT operator*() &amp;&amp; { return std::move(*ptr); }\n</code></pre>\n\n<p>to allow the lifetime extension, but that would do an extra move constructor not necessarily wanted in the general case.</p>\n"}, {"tags": [], "owner": {"reputation": 1122, "user_id": 4299382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93710a8b51660c8e031ae563da6961e2?s=128&d=identicon&r=PG&f=1", "display_name": "Yehezkel B.", "link": "https://stackoverflow.com/users/4299382/yehezkel-b"}, "is_accepted": true, "score": 4, "last_activity_date": 1563998898, "creation_date": 1563998898, "answer_id": 57190531, "question_id": 57185454, "link": "https://stackoverflow.com/questions/57185454/why-does-operator-of-rvalue-unique-ptr-return-an-lvalue/57190531#57190531", "title": "Why does operator* of rvalue unique_ptr return an lvalue?", "body": "<p>Good question!</p>\n\n<p>Without digging into the relevant papers and design discussions, I think there are a few points that are maybe the reasons for this design decision:</p>\n\n<ol>\n<li><p>As @Nicol Bolas mentioned, this is how a built-in (raw) pointer would behave, so \"do as <code>int</code> does\" is applied here as \"do as <code>int*</code> does\".</p>\n\n<p>This is similar to the fact that <code>unique_ptr</code> (and other library types) don't propagate <code>const</code>ness (which in turn is why we are adding <a href=\"https://en.cppreference.com/w/cpp/experimental/propagate_const\" rel=\"nofollow noreferrer\"><code>propagate_const</code></a>).</p></li>\n<li><p>What about the following code snippet? It doesn't compile with your suggested change, while it is a valid code that shouldn't be blocked.</p></li>\n</ol>\n\n<pre><code>class Base { virtual ~Base() = default; };\nclass Derived : public Base {};\nvoid f(Base&amp;) {}\n\nint main()\n{\n    f(*std::make_unique&lt;Derived&gt;());\n}\n</code></pre>\n\n<p>(<a href=\"https://gcc.godbolt.org/z/kdVO2K\" rel=\"nofollow noreferrer\">godbolt</a> - it compiles if our <code>operator*</code> overloadings are commented out)</p>\n\n<hr>\n\n<p>For your side note: I'm not sure <code>auto&amp;&amp;</code> says \"I'm UB\" any louder. On the contrary, some would argue that <code>auto&amp;&amp;</code> should be our default for many cases (e.g. range-based for loop; it was even suggested to be inserted automatically for \"terse-notation range-based for loop\" (which wasn't accepted, but still...)). Let's remember that rvalue-ref has similar effect as <code>const &amp;</code>, extension of the lifetime of a temporary (within the known restrictions), so it doesn't necessarily look like a UB in general.</p>\n"}], "owner": {"reputation": 7698, "user_id": 2085626, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yP5Oy.jpg?s=128&g=1", "display_name": "Amir Kirsh", "link": "https://stackoverflow.com/users/2085626/amir-kirsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 758, "favorite_count": 2, "accepted_answer_id": 57190531, "answer_count": 3, "score": 13, "last_activity_date": 1604814775, "creation_date": 1563978976, "last_edit_date": 1604814775, "question_id": 57185454, "link": "https://stackoverflow.com/questions/57185454/why-does-operator-of-rvalue-unique-ptr-return-an-lvalue", "title": "Why does operator* of rvalue unique_ptr return an lvalue?", "body": "<p>Using the return value of operator* from a &quot;dead&quot; unique_ptr is bad.</p>\n<p>The following code compiles but results of course in Undefined Behavior:</p>\n<pre><code>auto&amp; ref = *std::make_unique&lt;int&gt;(7);\nstd::cout &lt;&lt; ref &lt;&lt; std::endl;\n</code></pre>\n<p>Why didn't the standard make the return type of operator* for an rvalue of std::unique_ptr an <em>rvalue</em> of the internal value, instead of an <em>lvalue</em>, like this:</p>\n<pre><code>// could have been done inside unique_ptr\nT&amp; operator*() &amp; { return *ptr; }\nT&amp;&amp; operator*() &amp;&amp; { return std::move(*ptr); }\n</code></pre>\n<p>In which case this would work fine:</p>\n<pre><code>std::cout &lt;&lt; *std::make_unique&lt;int&gt;(7) &lt;&lt; std::endl;\n</code></pre>\n<p>But the code at the beginning would not compile (cannot bind an rvalue to an lvalue).</p>\n<hr />\n<p>Side note: of course someone could still write bad code like the below, but it is saying &quot;I'm UB&quot; more verbosely, IMHO, thus less relevant for this discussion:</p>\n<pre><code>auto&amp;&amp; ref = *std::make_unique&lt;int&gt;(7);\nstd::cout &lt;&lt; ref &lt;&lt; std::endl;\n</code></pre>\n<hr />\n<h2>Is there any good reason for operator* on an rvalue of std::unique_ptr to return an lvalue ref?</h2>\n"}, {"tags": ["c++", "security", "ssl", "openssl"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1563980427, "post_id": 57185436, "comment_id": 100882177, "body": "Why not click on &quot;MORE INFO&quot; links on that page and find out? Why not Google the vulns and find out?"}, {"owner": {"reputation": 15161, "user_id": 1067003, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e3af2bd4b5604b0b661b5e6646544eba?s=128&d=identicon&r=PG", "display_name": "hanshenrik", "link": "https://stackoverflow.com/users/1067003/hanshenrik"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1563981047, "post_id": 57185436, "comment_id": 100882526, "body": "@LightnessRacesinOrbit i&#39;m all for googling it, and when i find a solution, i may answer this question myself if nobody else has by then. but is it your opinion that this question should not have an answer on stackoverflow?"}, {"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1563981050, "post_id": 57185436, "comment_id": 100882529, "body": "@LightnessRacesinOrbit: I find your comment not helpful since &quot;MORE INFO&quot; does not provide any obvious information which can actually be used to solve this specific problem. If you can find such information there please answer the question or at least provide a link to these information."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1563982056, "post_id": 57185436, "comment_id": 100883091, "body": "Please show evidence of your research so far. You know how this works!"}, {"owner": {"reputation": 15161, "user_id": 1067003, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e3af2bd4b5604b0b661b5e6646544eba?s=128&d=identicon&r=PG", "display_name": "hanshenrik", "link": "https://stackoverflow.com/users/1067003/hanshenrik"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1563982209, "post_id": 57185436, "comment_id": 100883172, "body": "@LightnessRacesinOrbit  i think i have to tell openssl to disable all (or some?) CBC-based ciphers. I don&#39;t know how to do that though, and now i gotta go afk to eat dinner."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1563982426, "post_id": 57185436, "comment_id": 100883287, "body": "Now we have something we can work with :) Ask <i>that</i> question and we can start looking at the OpenSSL docs to find out how to accomplish that."}, {"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1563985012, "post_id": 57185436, "comment_id": 100884653, "body": "@LightnessRacesinOrbit: while disabling all CBC ciphers would solve the problem it is not the case that every use of CBC has this problem. If for example GOLDENDOODLE is exploitable depends not only on the support for CBC but also on the specific implementation. See also <a href=\"https://www.tripwire.com/state-of-security/vert/goldendoodle-attack/\" rel=\"nofollow noreferrer\">tripwire.com/state-of-security/vert/goldendoodle-attack</a>. And, disabling any CBC  ciphers might actually cause problems with providing support for older clients so this is not a practical solution in the first place."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1563985600, "post_id": 57185436, "comment_id": 100884962, "body": "@SteffenUllrich Tell the OP, not me"}, {"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1563985991, "post_id": 57185436, "comment_id": 100885134, "body": "@LightnessRacesinOrbit: Sorry, but your argument was to just look at MORE INFO, implying that everything should be obvious from there. It is not and there are actually very few information online about this problem - usually resulting in the conclusion that OpenSSL should not be vulnerable to these problems in the first place."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1563986194, "post_id": 57185436, "comment_id": 100885255, "body": "@SteffenUllrich I wasn&#39;t making an &quot;argument&quot;. I was trying to persuade the OP to do at least the most basic research in order to produce a good question that meets our quality standards, as I&#39;m sure you know. Never did I claim that clicking &quot;MORE INFO&quot; will suddenly reveal the perfect answer in glorious detail, but it would certainly be a good start to a problem which so far is basically just &quot;it doesn&#39;t work&quot;. If you have an answer feel free to post it. Thanks."}, {"owner": {"reputation": 15161, "user_id": 1067003, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e3af2bd4b5604b0b661b5e6646544eba?s=128&d=identicon&r=PG", "display_name": "hanshenrik", "link": "https://stackoverflow.com/users/1067003/hanshenrik"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1563987642, "post_id": 57185436, "comment_id": 100885944, "body": "@LightnessRacesinOrbit turns out it&#39;s not as easy as one might assume at first, for example, 1 of the ciphers that ssllabs complain about is TLS_RSA_WITH_AES_128_CBC_SHA , but OpenSSL has another name for it. i&#39;m not sure what that other name is, but i have narrowed it down to 3 candidates: either <code>SRP-RSA-AES-128-CBC-SHA</code> OR <code>RSA-PSK-AES128-CBC-SHA256</code> OR <code>RSA-PSK-AES128-CBC-SHA</code>- my gut feeling is that it&#39;s the last of the 3, but i haven&#39;t verified that, and just getting this far was non-trivial, i have exported  a full list of openssl&#39;s ciphers and made <a href=\"https://3v4l.org/8lRqA\" rel=\"nofollow noreferrer\">this filter</a>"}, {"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1563988959, "post_id": 57185436, "comment_id": 100886532, "body": "@hanshenrik: see the <a href=\"https://www.openssl.org/docs/manmaster/man1/ciphers.html\" rel=\"nofollow noreferrer\">documentation of ciphers</a> for a translation between the names of the ciphers. In this specific case it is just <code>AES128-SHA</code>. And you might have a look at the <a href=\"https://ssl-config.mozilla.org/\" rel=\"nofollow noreferrer\">Mozilla server configuration</a> to get a useful and secure cipher string."}], "answers": [{"tags": [], "owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 1, "last_activity_date": 1564082631, "last_edit_date": 1564082631, "creation_date": 1564082234, "answer_id": 57208827, "question_id": 57185436, "link": "https://stackoverflow.com/questions/57185436/how-to-protect-against-tls-goldendoodle-with-c-and-openssl/57208827#57208827", "title": "how to protect against TLS GOLDENDOODLE with c++ and openssl?", "body": "<p>While there are only few information about affected TLS stacks it looks like that OpenSSL should not be vulnerable, even when using CBC ciphers.</p>\n\n<p>I think what you see instead is a false positive, which is triggered by your server not matching the expectations of the test. While I don't know how the GOLDENDOODLE detection by SSLLabs works I've looked at the <a href=\"https://github.com/Tripwire/padcheck\" rel=\"nofollow noreferrer\">original detection program from Tripwire</a>. </p>\n\n<p>And it looks like that this script expects a proper HTTP server at the other end, i.e. one which first reads the request and then sends the response. Only, your server does it the other way: first sending the response and reading  (and ignoring) a bit of the request only after the response was sent. Such non-HTTP behavior is not taken into account (why should it) and confuses the detection which results in falsely reporting a non-existing problem.</p>\n"}], "owner": {"reputation": 15161, "user_id": 1067003, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e3af2bd4b5604b0b661b5e6646544eba?s=128&d=identicon&r=PG", "display_name": "hanshenrik", "link": "https://stackoverflow.com/users/1067003/hanshenrik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1564082631, "creation_date": 1563978914, "question_id": 57185436, "link": "https://stackoverflow.com/questions/57185436/how-to-protect-against-tls-goldendoodle-with-c-and-openssl", "title": "how to protect against TLS GOLDENDOODLE with c++ and openssl?", "body": "<p>have a simple web server made with C++ and openssl, and when running <a href=\"https://www.ssllabs.com/ssltest/analyze.html?d=fuviewer.ml\" rel=\"nofollow noreferrer\">SSL Lab's SSL Server Test</a> on it, it informs me that the server is vulnerable to <code>GOLDENDOODLE</code> and <code>Sleeping POODLE</code> (among other things, screenshot <a href=\"https://i.imgur.com/VEtw1qQ.png\" rel=\"nofollow noreferrer\">here</a>),</p>\n\n<p>i'm running libopenssl 1.1.1c, which is the latest openssl release as of writing, so i don't think it's a case of <code>using an old outdated vulnerable TLS library</code>, instead i'm probably just using it wrong,\n hence the question: how do you protect against GOLDENDOODLE with openssl? here is the entire (vulnerable?) server source code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;thread&gt;\n#include &lt;chrono&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;openssl/ssl.h&gt;\n#include &lt;openssl/err.h&gt;\n\nconst uint16_t port=443;\nint create_socket(const uint16_t port)\n{\n    int s;\n    struct sockaddr_in addr;\n\n    addr.sin_family = AF_INET;\n    addr.sin_port = htons(port);\n    addr.sin_addr.s_addr = htonl(INADDR_ANY);\n\n    s = socket(AF_INET, SOCK_STREAM, 0);\n    if (s &lt; 0)\n    {\n        perror(\"Unable to create socket\");\n        exit(EXIT_FAILURE);\n    }\n\n    if (bind(s, (struct sockaddr*)&amp;addr, sizeof(addr)) &lt; 0)\n    {\n        perror(\"Unable to bind\");\n        exit(EXIT_FAILURE);\n    }\n\n    if (listen(s, 1) &lt; 0)\n    {\n        perror(\"Unable to listen\");\n        exit(EXIT_FAILURE);\n    }\n\n    return s;\n}\n\nvoid init_openssl()\n{\n    SSL_load_error_strings();\n    OpenSSL_add_ssl_algorithms();\n}\n\nvoid cleanup_openssl()\n{\n    EVP_cleanup();\n}\n\nSSL_CTX *create_context()\n{\n    const SSL_METHOD *method;\n    SSL_CTX *ctx;\n\n    method = SSLv23_server_method();\n\n    ctx = SSL_CTX_new(method);\n    if (!ctx)\n    {\n        perror(\"Unable to create SSL context\");\n        ERR_print_errors_fp(stderr);\n        exit(EXIT_FAILURE);\n    }\n\n    return ctx;\n}\n\nvoid configure_context(SSL_CTX *ctx)\n{\n//     - Congratulations! Your certificate and chain have been saved at:\n//   /etc/letsencrypt/live/fuviewer.ml/fullchain.pem\n//   Your key file has been saved at:\n//   /etc/letsencrypt/live/fuviewer.ml/privkey.pem\n\n    (void)ctx;\n\n    SSL_CTX_set_ecdh_auto(ctx, 1);\n\n    /* Set the key and cert */\n    // SSL_FILETYPE_PEM\n    if (SSL_CTX_use_certificate_chain_file(ctx, \"fullchain.pem\") &lt;= 0)\n    {\n        ERR_print_errors_fp(stderr);\n        exit(EXIT_FAILURE);\n    }\n    if (SSL_CTX_use_PrivateKey_file(ctx, \"privkey.pem\", SSL_FILETYPE_PEM) &lt;= 0 )\n    {\n        ERR_print_errors_fp(stderr);\n        exit(EXIT_FAILURE);\n    }\n}\n\nint main(int argc, char **argv)\n{\n    (void)argc;\n    (void)argv;\n    int sock;\n    SSL_CTX *ctx;\n\n    init_openssl();\n    ctx = create_context();\n\n    configure_context(ctx);\n\n    sock = create_socket(port);\n    std::cout &lt;&lt; \"server running!\" &lt;&lt; std::flush;\n    /* Handle connections */\n    while(1)\n    {\n        struct sockaddr_in addr;\n        socklen_t len = sizeof(addr);\n        SSL *ssl;\n        const char reply[] =\n            \"HTTP/1.0 200 OK\\r\\n\"\n            \"Test-header: Yep\\r\\n\"\n            \"Content-Length: 3\\r\\n\"\n            \"\\r\\n\"\n            \"abc\";\n        const auto reply_size=sizeof(reply)-1;\n        int client = accept(sock, (struct sockaddr*)&amp;addr, &amp;len);\n        if (client &lt; 0)\n        {\n            perror(\"Unable to accept\");\n            exit(EXIT_FAILURE);\n        }\n\n        ssl = SSL_new(ctx);\n        SSL_set_fd(ssl, client);\n\n        if (SSL_accept(ssl) &lt;= 0)\n        {\n            ERR_print_errors_fp(stderr);\n        }\n        else\n        {\n            if(SSL_write(ssl, reply, reply_size)!=reply_size)\n            {\n                throw std::runtime_error(\"FAILED TO SEND ALL BYTES\");\n            };\n            {\n                // openssl gets cranky if we don't try to read at least 1 byte, even tho we don't really want to..\n                uint8_t unused;\n                SSL_read(ssl,&amp;unused,sizeof(unused));\n            }\n            SSL_shutdown(ssl);\n            //std::this_thread::sleep_for(std::chrono::seconds(1));\n        }\n        SSL_free(ssl);\n        close(client);\n    }\n    close(sock);\n    SSL_CTX_free(ctx);\n    cleanup_openssl();\n}\n</code></pre>\n"}, {"tags": ["c++", "kernel", "opencl"], "comments": [{"owner": {"reputation": 1033, "user_id": 7667894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9cbd2317a1ddffc1e8f9ca0ff56b6f6?s=128&d=identicon&r=PG&f=1", "display_name": "AlexG", "link": "https://stackoverflow.com/users/7667894/alexg"}, "edited": false, "score": 0, "creation_date": 1563987768, "post_id": 57185423, "comment_id": 100885992, "body": "You can cast the base address of your vector component into the appropriate pointer type (int*), then you can use brackets."}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 3413646, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005743985693/picture?type=large", "display_name": "user3413646", "link": "https://stackoverflow.com/users/3413646/user3413646"}, "edited": false, "score": 0, "creation_date": 1564040339, "post_id": 57190435, "comment_id": 100901818, "body": "i am learning how to use the built-in select function, i want to use like so results = select(v2[i], v1[i], isgreater(v[i], 5)). How would i accesss the current vector index?"}, {"owner": {"reputation": 1128, "user_id": 1267222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44f5d723bf2ef2dac40327bfa9815989?s=128&d=identicon&r=PG", "display_name": "Jan-Gerd", "link": "https://stackoverflow.com/users/1267222/jan-gerd"}, "reply_to_user": {"reputation": 147, "user_id": 3413646, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005743985693/picture?type=large", "display_name": "user3413646", "link": "https://stackoverflow.com/users/3413646/user3413646"}, "edited": false, "score": 0, "creation_date": 1564132819, "post_id": 57190435, "comment_id": 100938308, "body": "<code>select</code> already operates on vector types, so you do not need the indices here. <code>results = select(v1, v2, v &gt; 5)</code> should give you the result."}, {"owner": {"reputation": 147, "user_id": 3413646, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005743985693/picture?type=large", "display_name": "user3413646", "link": "https://stackoverflow.com/users/3413646/user3413646"}, "edited": false, "score": 0, "creation_date": 1564212725, "post_id": 57190435, "comment_id": 100963656, "body": "Sorry Jan-Gerd i can&#39;t do that, since isgreater arguments has to be either datatypes like float and doubles, my <code>v</code> is a vector so there is no matching function call :("}, {"owner": {"reputation": 147, "user_id": 3413646, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005743985693/picture?type=large", "display_name": "user3413646", "link": "https://stackoverflow.com/users/3413646/user3413646"}, "edited": false, "score": 0, "creation_date": 1564212837, "post_id": 57190435, "comment_id": 100963684, "body": "My hardcoded method is to access individually :( i edited my code above to show"}, {"owner": {"reputation": 1128, "user_id": 1267222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44f5d723bf2ef2dac40327bfa9815989?s=128&d=identicon&r=PG", "display_name": "Jan-Gerd", "link": "https://stackoverflow.com/users/1267222/jan-gerd"}, "reply_to_user": {"reputation": 147, "user_id": 3413646, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005743985693/picture?type=large", "display_name": "user3413646", "link": "https://stackoverflow.com/users/3413646/user3413646"}, "edited": false, "score": 0, "creation_date": 1564241442, "post_id": 57190435, "comment_id": 100969709, "body": "According to the specification, isgreater does work on vector types. Maybe I am reading your problem wrong. Could you give an example with inputs and expected output?"}], "tags": [], "owner": {"reputation": 1128, "user_id": 1267222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44f5d723bf2ef2dac40327bfa9815989?s=128&d=identicon&r=PG", "display_name": "Jan-Gerd", "link": "https://stackoverflow.com/users/1267222/jan-gerd"}, "is_accepted": false, "score": 0, "last_activity_date": 1563998439, "creation_date": 1563998439, "answer_id": 57190435, "question_id": 57185423, "link": "https://stackoverflow.com/questions/57185423/opencl-vector-components/57190435#57190435", "title": "OpenCL Vector components", "body": "<p>Detailed information about this can be found in the specification, see <a href=\"https://www.khronos.org/registry/OpenCL/specs/2.2/html/OpenCL_C.html#vector-components\" rel=\"nofollow noreferrer\">6.1.7. Vector Components</a>. In short, the components are named <em>x</em>, <em>y</em>, <em>z</em>, and <em>w</em> for <em>int4</em>, for your <em>int8</em> you need to use numeric indices: <em>v1.s0</em> to <em>v1.s7</em>. You can even access multiple components at the same time:</p>\n\n<pre><code>int8 large_vec = vload8(...);\nint4 every_second_element = large_vec.s0246;\nint last_element = large_vec.s7;\nint2 first_elements = large_vec.xy; // Only works for the first four elements, xyzw\n</code></pre>\n\n<p>Components can also be accessed multiple times and in arbitrary order:</p>\n\n<pre><code>int4 vec = {1, 2, 3, 4};\nint4 backwards = vec.wzyx; // {4, 3, 2, 1}\nint4 multiple = vec.xxyy;  // {1, 1, 2, 2}\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 3413646, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005743985693/picture?type=large", "display_name": "user3413646", "link": "https://stackoverflow.com/users/3413646/user3413646"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 370, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564212914, "creation_date": 1563978878, "last_edit_date": 1564212914, "question_id": 57185423, "link": "https://stackoverflow.com/questions/57185423/opencl-vector-components", "title": "OpenCL Vector components", "body": "<p>I have a question regarding my kernel code.<br>\nSo I understand you cannot access a vector component in a kernel with <code>[]</code> square brackets like example <code>vec[2]</code>.</p>\n\n<p>What are other ways to access it? Say I need to check if the vector element value is more than a certain value?</p>\n\n<p>I am writing a kernel that parses <code>Array1</code> into a local memory vector <code>v</code>,\nchecks if any element in <code>v</code> is more than 5 and if so add into another vector call results.</p>\n\n<p>Any advice on accessing the vector components in kernel?</p>\n\n<pre><code>__kernel void copy(__global int4* Array1, \n               __global int* Array2,\n               __global int8* output\n                ) \n{\n\n    int id = get_global_id(0);\n\n    __local int4 v;\n\n    v = Array1[id];\n\n\n    int8 v1 = vload8(0, Array2);\n    int8 v2 = vload8(1, Array2);\n\n    int8 results;\n\n\n    /* My problem is here where i want to check if the current v[i] is more than 5, \n    if so add v1[i] into results, else add v2[i].*/\n\n\n    if (any(v &gt; 5)) {\n\n             results.s0 = select(v2.s0, v1.s0, isgreater(v.s0, 5.0));\n             results.s1 = select(v2.s1, v1.s1, isgreater(v.s1, 5.0));\n             results.s2 = select(v2.s2, v1.s2, isgreater(v.s2, 5.0));\n             results.s3 = select(v2.s3, v1.s3, isgreater(v.s3, 5.0));\n             results.s4 = select(v2.s4, v1.s4, isgreater(v.s4, 5.0));\n             results.s5 = select(v2.s5, v1.s5, isgreater(v.s5, 5.0));\n             results.s6 = select(v2.s6, v1.s6, isgreater(v.s6, 5.0));\n             results.s7 = select(v2.s7, v1.s7, isgreater(v.s7, 5.0));\n\n             vstore8(results, 0, output);\n\n    }\n    else {\n        /*does some other stuff that i haven't get to*/\n    }\n\n\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "software-design"], "owner": {"reputation": 168, "user_id": 8931665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5f64e84bb3330b8249c9bffa83d1f75?s=128&d=identicon&r=PG&f=1", "display_name": "sfun", "link": "https://stackoverflow.com/users/8931665/sfun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1564053248, "creation_date": 1563978426, "last_edit_date": 1563978524, "question_id": 57185289, "link": "https://stackoverflow.com/questions/57185289/design-recommendations-for-image-converter-class", "title": "Design recommendations for Image Converter Class", "body": "<p>I am writing a small color space converter for a device, that records an image and displays it on a screen. The image is available as a planar 4:2:2 YUV image and needs to be converted into a 8 bit/channel RGB image. It is possible, that in the near future, the color space of the input image will change (maybe to a packed YUV image) as well as the target color space (maybe to a 16 bit/channel RGB image). Therefore, and as an exercise, I wanted to make my color converter easily adaptable. I decided to have a base image class, which provides a uniform interface for all image typesand use CRTP for static polymorphism as the image types will be known at compile time. The following simplified code shows the implementation of the image types:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename ImageType, typename ValueType&gt;\nclass ImageBase {\n\npublic:\n    using value_type = ValueType;\n    const std::size_t cols;\n    const std::size_t rows;\n    value_type* data;\n\n    std::size_t size() const {\n        return static_cast&lt;const ImageType*&gt;(this)-&gt;sizeImpl();\n    }\n\n    template &lt;typename T&gt;\n    T readAt(std::size_t index) {\n        return static_cast&lt;const ImageType*&gt;(this)-&gt;template readAtImpl&lt;T&gt;(index);\n    }\n\n    virtual ~ImageBase(){\n    }\n\nprotected:\n    ImageBase(std::size_t cols, std::size_t rows): cols(cols), rows(rows), data(nullptr) {}\n    ImageBase(std::size_t cols, std::size_t rows, value_type* data): cols(cols), rows(rows), data(data) {}\n\n};\n\nclass RGB888: public ImageBase&lt;RGB888, unsigned char&gt; {\n\n    friend ImageBase&lt;RGB888, unsigned char&gt;;\nprivate:\n    std::size_t sizeImpl() const{\n        // Get size of type RGB888\n    }\n\n    template &lt;typename T&gt;\n    T readAtImpl(std::size_t index) const {\n        // Return a RGB struct for pixel(index) from raw data\n    }\n\npublic:\n    using value_type = unsigned char;\n    RGB888(std::size_t cols, std::size_t rows): ImageBase(cols, rows) {}\n    RGB888(std::size_t cols, std::size_t rows, unsigned char* data): ImageBase(cols, rows, data) {}\n};\n\nclass YUV422_LOGIISP: public ImageBase&lt;YUV422_LOGIISP, unsigned char&gt; {\n\n    friend ImageBase&lt;YUV422_LOGIISP, unsigned char&gt;;\nprivate:\n    std::size_t sizeImpl() const{\n        // Get size of type YUV422_LOGIISP\n    }\n\n    template &lt;typename T&gt;\n    T readAtImpl(std::size_t index) const {\n        // Return a YUV struct for pixel(index) from raw data\n    }\n\npublic:\n    using value_type = unsigned char;\n    YUV422_LOGIISP(std::size_t cols, std::size_t rows): ImageBase(cols, rows) {}\n    YUV422_LOGIISP(std::size_t cols, std::size_t rows, unsigned char* data): ImageBase(cols, rows, data) {}\n\n  template &lt;typename T&gt;\n  RGB_t&lt;T&gt; yuv2rgb(double y, double u, double v) {\n  // Convert a set of y, u, v to a single RGB pixel\n  }\n};\n</code></pre>\n\n<p>The conversion is implemented as follows:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class ColorConverter {\npublic:\n\n   template&lt;typename SRC, typename DST&gt;\n   struct always_false : std::false_type {};\n\n   template &lt;class SRC, class DST&gt;\n   static void convertImage(SRC const&amp; sourceImage, DST&amp; destinationImage) {\n       static_assert( always_false&lt;SRC, DST&gt;::value, \"No conversion from SRC to DST\" );\n   }\n};\n\ntemplate&lt;&gt;\nvoid ColorConverter::convertImage&lt;YUV422_LOGIISP, RGB888&gt;(YUV422_LOGIISP const&amp; src, RGB888&amp; dst) {\n// Do actual conversion\n// Handle indices to access correct (y,u,v) values\n// For every (y, u, v) set, call src.yuc2rgb to obtain a the rgb values\n}\n</code></pre>\n\n<p>This way, in client code, I can convert between YUV and RGB like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>...\n // rgbImageData and yuvImageData are allocated somewhere else\n\nRGB888 rgbImage(imageWidth, imageHeight, rgbImageData.data());\nYUV422_LOGIISP yuvImage(imageWidth, imageHeight, yuvImageData.data());\n\nColorConverter::convertImage(yuvImage, rgbImage);\n\n</code></pre>\n\n<p>Now, the conversion from a (y,u,v) set to a (r,g,b) set is quite simple, the tedious part is extracting the YUV data into the correct (y,u,v) set as the data is interleaved and not located next to each other. I handle the (y,u,v) data access in the <code>ColorConverter::convertImageclass</code> but the actual conversion, from a set of (y,u,v) values to (r,g,b) values happens with a call to <code>src.yuv2rgb</code>.</p>\n\n<p>At the moment, I have a dedicated conversion class, that only <em>helps</em> to convert, but the actual conversion happens in the image class. I am not happy with placing the yuv2rgb conversion function in the ColorConverter class and am not happy with placing it in the YUV422_LOGIISP class. </p>\n\n<p>If I put the function into the ColorConverter class, I have detailed information in this class about a special case. On the other hand, if I place the function in the YUV422_LOGIISP class, the class also has the responsibility of converting and it breaks the uniform interface. </p>\n\n<p>Most likely, this indicates a flawed design. No comes my question(s)...</p>\n\n<p>How can I structure my code in a way that clearly separates concerns and minimizes dependencies? Should I look at using an <code>enum</code> for the conversion, similar to the way it is done in OpenCV?</p>\n"}, {"tags": ["c++", "file", "buffer", "istream"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 3, "creation_date": 1563977718, "post_id": 57185003, "comment_id": 100880490, "body": "Subject of your question is quite confusing."}, {"owner": {"reputation": 3379, "user_id": 5709159, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/DL3rX.jpg?s=128&g=1", "display_name": "Aleksey Timoshchenko", "link": "https://stackoverflow.com/users/5709159/aleksey-timoshchenko"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1563977848, "post_id": 57185003, "comment_id": 100880571, "body": "@Slava why? I just would like to know if set membuf like I do it, is ok or not?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1563978323, "post_id": 57185003, "comment_id": 100880863, "body": "Because it means something completely different than question itself if it means anything. Did you use online translator?"}, {"owner": {"reputation": 3379, "user_id": 5709159, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/DL3rX.jpg?s=128&g=1", "display_name": "Aleksey Timoshchenko", "link": "https://stackoverflow.com/users/5709159/aleksey-timoshchenko"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1563979140, "post_id": 57185003, "comment_id": 100881422, "body": "@Slava no, but as well I am not a native speaker... I changed the title of question..."}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1563980102, "post_id": 57185003, "comment_id": 100881982, "body": "First argument is start of the buffer. You set to 0 which means it will try to read from zero address in RAM. Is that what you want? On most operating systems it will cause a crash."}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1563980193, "post_id": 57185003, "comment_id": 100882042, "body": "Also not clear what are you trying to achieve? Are you trying to create an object of <code>std::istream</code> in such a way as to read from memory instead of a file?"}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1563980232, "post_id": 57185003, "comment_id": 100882066, "body": "Alternative way is to use <code>std::istringstream</code>."}, {"owner": {"reputation": 3379, "user_id": 5709159, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/DL3rX.jpg?s=128&g=1", "display_name": "Aleksey Timoshchenko", "link": "https://stackoverflow.com/users/5709159/aleksey-timoshchenko"}, "reply_to_user": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1563980563, "post_id": 57185003, "comment_id": 100882253, "body": "@IlyaPopov Actually I want to copy bytes from file to RAM (as a buffer) and read from RAM instead of read from file (at least it should work if I understand it correctly)."}, {"owner": {"reputation": 3379, "user_id": 5709159, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/DL3rX.jpg?s=128&g=1", "display_name": "Aleksey Timoshchenko", "link": "https://stackoverflow.com/users/5709159/aleksey-timoshchenko"}, "reply_to_user": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1563980612, "post_id": 57185003, "comment_id": 100882280, "body": "@IlyaPopov What do you mean alternative? As far as I know isringstream not read from RAM, no?"}, {"owner": {"reputation": 3379, "user_id": 5709159, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/DL3rX.jpg?s=128&g=1", "display_name": "Aleksey Timoshchenko", "link": "https://stackoverflow.com/users/5709159/aleksey-timoshchenko"}, "reply_to_user": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1563995664, "post_id": 57185003, "comment_id": 100889446, "body": "@IlyaPopov it is exactly what this guy is talking about <a href=\"https://stackoverflow.com/a/13586356/5709159\">stackoverflow.com/a/13586356/5709159</a>"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1564004469, "post_id": 57185003, "comment_id": 100892769, "body": "Note that <code>long getFileSize(const std::string &amp;filename)</code> is not right.  The <code>st_size</code> field of a <code>struct stat</code> is of type <code>off_t</code>.  A <code>long</code> value is not guaranteed to be large enough to hold an <code>off_t</code> value.  For example, a 32-bit system that supports files larger than 2 GB will have to have an <code>off_t</code> that&#39;s larger than the 32-bit <code>long</code> type typical on 32-bit systems.  Such a system likely has a 64-bit <code>off_t</code>.  And then there&#39;s Windows, where <code>long</code> is 32-bits even for a 64-bit process..."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1564004800, "post_id": 57185003, "comment_id": 100892850, "body": "Regarding your question, are you trying to copy data from the file into RAM, or from a known location in RAM into the file?  Or, are you trying to treat a known area of memory as a file and read from it as if that memory were a file?  If that last, this might be helpful:  <a href=\"https://stackoverflow.com/questions/29849749/what-is-the-difference-between-fmemopen-and-open-memstream\" title=\"what is the difference between fmemopen and open memstream\">stackoverflow.com/questions/29849749/&hellip;</a>"}, {"owner": {"reputation": 3379, "user_id": 5709159, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/DL3rX.jpg?s=128&g=1", "display_name": "Aleksey Timoshchenko", "link": "https://stackoverflow.com/users/5709159/aleksey-timoshchenko"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1564029497, "post_id": 57185003, "comment_id": 100897485, "body": "@AndrewHenle So, if I understood you correctly you mean that this SO answer is not correct <code>about getSize()</code> <a href=\"https://stackoverflow.com/a/6039648/5709159\">stackoverflow.com/a/6039648/5709159</a> , right?"}, {"owner": {"reputation": 3379, "user_id": 5709159, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/DL3rX.jpg?s=128&g=1", "display_name": "Aleksey Timoshchenko", "link": "https://stackoverflow.com/users/5709159/aleksey-timoshchenko"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1564029625, "post_id": 57185003, "comment_id": 100897516, "body": "@AndrewHenle actually I would like to do exactly the same thing like write here <a href=\"https://stackoverflow.com/a/13586356/5709159\">stackoverflow.com/a/13586356/5709159</a> , but I don&#39;t understand what is <code>base</code> here..."}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1564040782, "post_id": 57185003, "comment_id": 100902050, "body": "@AlekseyTimoshchenko <code>base</code> is just starting address of the buffer from where your <code>istream</code> will be reading. You have to allocate this buffer yourself (for example, with <code>char *buffer = new char[size];</code>) and fill it with data."}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1564040908, "post_id": 57185003, "comment_id": 100902119, "body": "@AlekseyTimoshchenko <code>istringstream</code> reads from a string. And string is in RAM. If you put your data in a string, you can use <code>istringstream</code> to read the data from RAM."}], "answers": [{"comments": [{"owner": {"reputation": 3379, "user_id": 5709159, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/DL3rX.jpg?s=128&g=1", "display_name": "Aleksey Timoshchenko", "link": "https://stackoverflow.com/users/5709159/aleksey-timoshchenko"}, "edited": false, "score": 0, "creation_date": 1563995615, "post_id": 57186819, "comment_id": 100889420, "body": "So, how could you explain this answer <a href=\"https://stackoverflow.com/a/13586356/5709159\">stackoverflow.com/a/13586356/5709159</a> ?"}, {"owner": {"reputation": 193, "user_id": 11508323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52392146cec0fa85b494f3a1c1722562?s=128&d=identicon&r=PG&f=1", "display_name": "Tiphaine", "link": "https://stackoverflow.com/users/11508323/tiphaine"}, "reply_to_user": {"reputation": 3379, "user_id": 5709159, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/DL3rX.jpg?s=128&g=1", "display_name": "Aleksey Timoshchenko", "link": "https://stackoverflow.com/users/5709159/aleksey-timoshchenko"}, "edited": false, "score": 0, "creation_date": 1564041640, "post_id": 57186819, "comment_id": 100902561, "body": "The answer you sent is about efficiency. Since an entire file can be stored as a C style char pointer, it will obviously take less memory than storing the std::istream class. If you really want to do it this way you should take a look at <a href=\"http://man7.org/linux/man-pages/man3/fopen.3.html\" rel=\"nofollow noreferrer\">fopen</a> and <a href=\"http://man7.org/linux/man-pages/man3/getline.3.html\" rel=\"nofollow noreferrer\">getline</a>"}], "tags": [], "owner": {"reputation": 193, "user_id": 11508323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52392146cec0fa85b494f3a1c1722562?s=128&d=identicon&r=PG&f=1", "display_name": "Tiphaine", "link": "https://stackoverflow.com/users/11508323/tiphaine"}, "is_accepted": false, "score": 0, "last_activity_date": 1563983316, "creation_date": 1563983316, "answer_id": 57186819, "question_id": 57185003, "link": "https://stackoverflow.com/questions/57185003/how-to-read-from-ram/57186819#57186819", "title": "How to read from RAM?", "body": "<p>As far as I understand your question, you want to read a file.</p>\n\n<p>You need to understand that every variable of your program is stored in your ram. So to \"read a file from ram\" you just read your file as you are used to.</p>\n\n<p>If the problem is about storing the file in your ram to use it later in another program, it is just not correct. Read the file from the program which need it.</p>\n"}, {"comments": [{"owner": {"reputation": 3379, "user_id": 5709159, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/DL3rX.jpg?s=128&g=1", "display_name": "Aleksey Timoshchenko", "link": "https://stackoverflow.com/users/5709159/aleksey-timoshchenko"}, "edited": false, "score": 1, "creation_date": 1564043747, "post_id": 57197139, "comment_id": 100903784, "body": "Actually first option that you provided I have already done, but it was intresting to check execution time about second one, and it is takes <code>*2</code> more time... I hope it is due to method every call to method make memory allocation for <code>std::string</code> where as <code>std::vector</code> I declered in <code>.h</code> file and just resize it... So, first option faster (as I tested). And also I get error hire <code>file_from_ram &lt;&lt; original_file.rdbuf();</code> and after I changed <code>std::istringstream</code> to <code>std::stringstream</code> it works."}], "tags": [], "owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "is_accepted": true, "score": 1, "last_activity_date": 1564041975, "creation_date": 1564041975, "answer_id": 57197139, "question_id": 57185003, "link": "https://stackoverflow.com/questions/57185003/how-to-read-from-ram/57197139#57197139", "title": "How to read from RAM?", "body": "<h2>Option 1</h2>\n\n<p>Expanding on the code in your question:</p>\n\n<pre><code>long size = getFileSize(filename);\nstd::vector&lt;char&gt; buffer(size);\n// here fill the buffer with data\nmembuf sbuf(buffer.data(), buffer.size());\nstd::istream file_from_ram(&amp;sbuf);\n</code></pre>\n\n<p>if you'd like to fill the buffer with contenst of some file, do this:</p>\n\n<pre><code>std::istream original_file(\"filename.dat\");\noriginal_file.read(buffer.data(), size);\n</code></pre>\n\n<p>Note: this method has problems. First, as @andrew-henle mentioned in comments, file size of type <code>off_t</code> which may not fil into <code>long</code>. Second, this method suffers from TOCTOU (time of check -- time of use) problem: if file size changes between the call to getFileSize and reading the file, you may be in trouble.</p>\n\n<h2>Option 2</h2>\n\n<p>Use <code>std::istringstream</code> instead:</p>\n\n<pre><code>std::string buffer;\n// here fill the string with data\nstd::istringstream file_from_ram(buffer);\n</code></pre>\n\n<p>If you'd like to fill the buffer with contents of some file, do this (from <a href=\"https://stackoverflow.com/a/116220/4451432\">https://stackoverflow.com/a/116220/4451432</a>):</p>\n\n<pre><code>std::ifstream original_file(\"filename.dat\");\n\nstd::istringstream file_from_ram;\nfile_from_ram &lt;&lt; original_file.rdbuf();\n// Now you can read from file_from_ram\n</code></pre>\n"}], "owner": {"reputation": 3379, "user_id": 5709159, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/DL3rX.jpg?s=128&g=1", "display_name": "Aleksey Timoshchenko", "link": "https://stackoverflow.com/users/5709159/aleksey-timoshchenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 57197139, "answer_count": 2, "score": 1, "last_activity_date": 1564041975, "creation_date": 1563977546, "last_edit_date": 1563979073, "question_id": 57185003, "link": "https://stackoverflow.com/questions/57185003/how-to-read-from-ram", "title": "How to read from RAM?", "body": "<p>What I need to do? </p>\n\n<p>I need to read the file from RAM</p>\n\n<p>How I am doing it?</p>\n\n<p>I use <code>std::istream</code>, because it know how to read from buffer. So, there is method that know how to read file size(according to this SO answer <a href=\"https://stackoverflow.com/a/6039648/5709159\">https://stackoverflow.com/a/6039648/5709159</a>)</p>\n\n<pre><code>long getFileSize(const std::string &amp;filename)\n{\n    struct stat stat_buf{};\n    int rc = stat(filename.c_str(), &amp;stat_buf);\n    return rc == 0 ? stat_buf.st_size : -1;\n}\n</code></pre>\n\n<p>Then I use membuf to copy bytes from file to buffer (according to this SO answer <a href=\"https://stackoverflow.com/a/13586356/5709159\">https://stackoverflow.com/a/13586356/5709159</a>)</p>\n\n<pre><code>struct membuf : std::streambuf\n    {\n        membuf(char *base, std::ptrdiff_t n)\n        {\n            this-&gt;setg(base, base, base + n);\n        }\n    };\n</code></pre>\n\n<p>Full implementation looks like this</p>\n\n<pre><code>long size = getFileSize(filename);\nmembuf sbuf(0, size);\nstd::istream file(&amp;sbuf);\n</code></pre>\n\n<p>But, I am now sure that <code>sbuf(0, size);</code> that <code>0</code> here is on the right place... </p>\n\n<p>So, question is - how to set <code>membuf</code> with right size ?</p>\n"}, {"tags": ["c++", "ruby", "cout", "inspect"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1563977159, "post_id": 57184838, "comment_id": 100880164, "body": "No C++ does not have Reflection. I heard there were plans to add it though."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1563977196, "post_id": 57184838, "comment_id": 100880181, "body": "@Slava for the last 20 years, I recon"}, {"owner": {"reputation": 3572, "user_id": 770627, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f60b4f21d3929d8195bfae6fe8f68694?s=128&d=identicon&r=PG", "display_name": "Albert.Qing", "link": "https://stackoverflow.com/users/770627/albert-qing"}, "edited": false, "score": 0, "creation_date": 1563977254, "post_id": 57184838, "comment_id": 100880221, "body": "it seems good news"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1563977341, "post_id": 57184838, "comment_id": 100880275, "body": "You may use debug information but that would be compiler specific and maybe available only in specific cases."}, {"owner": {"reputation": 3572, "user_id": 770627, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f60b4f21d3929d8195bfae6fe8f68694?s=128&d=identicon&r=PG", "display_name": "Albert.Qing", "link": "https://stackoverflow.com/users/770627/albert-qing"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1563977749, "post_id": 57184838, "comment_id": 100880506, "body": "@SergeyA thanks for your edit"}], "owner": {"reputation": 3572, "user_id": 770627, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f60b4f21d3929d8195bfae6fe8f68694?s=128&d=identicon&r=PG", "display_name": "Albert.Qing", "link": "https://stackoverflow.com/users/770627/albert-qing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "closed_date": 1563977180, "answer_count": 0, "score": 0, "last_activity_date": 1563977058, "creation_date": 1563977058, "last_edit_date": 1592644375, "question_id": 57184838, "link": "https://stackoverflow.com/questions/57184838/how-to-print-an-objects-member-in-c-without-override-operator", "closed_reason": "Duplicate", "title": "How to print an object&#39;s member in c++ without override operator &lt;&lt;?", "body": "<p>I know in ruby language there is a method called  <a href=\"https://apidock.com/ruby/Object/inspect\" rel=\"nofollow noreferrer\"><strong>object.inspect</strong></a>\ncan print all member's in object without override\ntoString(Java) &lt;&lt;(in cpp),it's very usefull for debug print.</p>\n<p>I want to know How to implment these function in c++ or is there has any library to do this? I'm newer to learn c++, hate to write too much templates for many diffent complex classes!</p>\n<p>Thanks for any advise!</p>\n"}, {"tags": ["c++", "function", "class"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1563977056, "post_id": 57184713, "comment_id": 100880079, "body": "Voting to close as a typo.  Get rid of <code>int money</code> in the call in <code>main</code> and in the function defection.  Just have <code>int money;</code> in the function body."}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1563977171, "post_id": 57184713, "comment_id": 100880172, "body": "@NathanOliver, That error was made in two places, which shows there is a lesson to be taught about how to call a function with arguments. If this is to be closed I&#39;m sure there&#39;s a duplicate out there that could at least forward Advait to an answer."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 1, "creation_date": 1563977309, "post_id": 57184713, "comment_id": 100880254, "body": "@Romen SO is not a replacement for a good reference book.  We do expect some basic knowledge already being known and how to call a function is, at least IMHO, a very basic concept."}, {"owner": {"reputation": 1, "user_id": 11830790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9472a292c764ae89f3f85da163e5c96d?s=128&d=identicon&r=PG&f=1", "display_name": "Advait Kelkar", "link": "https://stackoverflow.com/users/11830790/advait-kelkar"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1563977488, "post_id": 57184713, "comment_id": 100880361, "body": "@NathanOliver I tried your solution and the program compiled but it created an infinite loop. Is there anything else I can try?"}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 1, "creation_date": 1563977588, "post_id": 57184713, "comment_id": 100880413, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/13182467/error-expected-primary-expression-before-int\">Error &quot;expected primary-expression before int&quot;</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1563977601, "post_id": 57184713, "comment_id": 100880426, "body": "If that changes dives you an infinite loop then It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming. Further reading: <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a> and <a href=\"http://idownvotedbecau.se/nodebugging/\" rel=\"nofollow noreferrer\">Debugging Guide</a>"}, {"owner": {"reputation": 1, "user_id": 11830790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9472a292c764ae89f3f85da163e5c96d?s=128&d=identicon&r=PG&f=1", "display_name": "Advait Kelkar", "link": "https://stackoverflow.com/users/11830790/advait-kelkar"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1563977923, "post_id": 57184713, "comment_id": 100880619, "body": "@NathanOliver Thanks for the reply. I&#39;m guessing Visual Studio has a debugger? I&#39;ll download it give the debugger a shot. Sorry to keep asking the same thing, but is there no other way the code posted above work?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11830790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9472a292c764ae89f3f85da163e5c96d?s=128&d=identicon&r=PG&f=1", "display_name": "Advait Kelkar", "link": "https://stackoverflow.com/users/11830790/advait-kelkar"}, "edited": false, "score": 0, "creation_date": 1563986629, "post_id": 57186558, "comment_id": 100885477, "body": "Thank you correcting my code! I will try to solve the logic errors"}, {"owner": {"reputation": 35, "user_id": 11139116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de842bcdbcac402954ef26626e9fbaea?s=128&d=identicon&r=PG&f=1", "display_name": "Cruz", "link": "https://stackoverflow.com/users/11139116/cruz"}, "reply_to_user": {"reputation": 1, "user_id": 11830790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9472a292c764ae89f3f85da163e5c96d?s=128&d=identicon&r=PG&f=1", "display_name": "Advait Kelkar", "link": "https://stackoverflow.com/users/11830790/advait-kelkar"}, "edited": false, "score": 0, "creation_date": 1563987239, "post_id": 57186558, "comment_id": 100885787, "body": "Welcome, if(stuck.==true){then ask;}"}], "tags": [], "owner": {"reputation": 35, "user_id": 11139116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de842bcdbcac402954ef26626e9fbaea?s=128&d=identicon&r=PG&f=1", "display_name": "Cruz", "link": "https://stackoverflow.com/users/11139116/cruz"}, "is_accepted": false, "score": 1, "last_activity_date": 1563984728, "last_edit_date": 1563984728, "creation_date": 1563982487, "answer_id": 57186558, "question_id": 57184713, "link": "https://stackoverflow.com/questions/57184713/expected-primary-expression-before-int-when-calling-a-member-function-inside-a/57186558#57186558", "title": "Expected primary-expression before &#39;int&#39; when calling a member function inside another member function", "body": "<p>Well, there are many faults in the code. I didn't saw them your program completely before.\nI assumed that you might have done it right. Alright then.</p>\n\n<p>first, you should ask what coin is acceptable by the machine at the start of the program which you haven't.</p>\n\n<p>Second, before calling a function by value, you should take input from the user and then pass it to the function, which again you haven't.</p>\n\n<p>Here, I have corrected your code somewhat.</p>\n\n<pre><code>    #include &lt;iostream&gt;\n\n    class DrinkMachine\n    {\n     private:\n        const int COST_OF_DRINK = 150;\n\n      public:\n        int RunningTotal;\n\nDrinkMachine()\n{\n  RunningTotal = 0;\n}\n\nvoid DepositCoins(int money)\n{\n\n\n\n  switch(money)\n  {\n    case(25):\n      RunningTotal += 25;\n      break;\n\n    case(50):\n        RunningTotal += 50;\n        break;\n\n    case(100):\n        RunningTotal += 100;\n        break;\n\n    default:\n        std::cout &lt;&lt; \"You entered the wrong coin\" &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"Coins of values 25, 50, 100 are allowed\" &lt;&lt; std::endl;\n        break;\n  }\n}\n\n\nbool CheckTotal()\n{\n  std::cout &lt;&lt; \"You can deposit coins of values 25, 50 and 100\" &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"Enter a coin: \" &lt;&lt; std::endl;\n  if(RunningTotal &gt;= COST_OF_DRINK)\n    return true;\n\n  else\n    return false;\n}\n\nvoid MakeDrinkSelection(int DrinkChoice)\n{\n\n  bool IsChoiceValid = false;\n\n  while(!IsChoiceValid)\n  {\n    switch(DrinkChoice)\n    {\n      case (1):\n        std::cout &lt;&lt; \"Thank you for choosing Coffee!\" &lt;&lt; std::endl;\n        ReturnChange();\n        IsChoiceValid = true;\n        break;\n\n      case(2):\n        std::cout &lt;&lt; \"Thank you for choosing Hot Chocolate!\" &lt;&lt; std::endl;\n        IsChoiceValid = true;\n        ReturnChange();\n        break;\n\n      case(3):\n        std::cout &lt;&lt; \"Thank you for choosing Green Tea!\" &lt;&lt; std::endl;\n        IsChoiceValid = true;\n        ReturnChange();\n        break;\n\n      default:\n        std::cout &lt;&lt; \"Invalid selection. Please re-enter your choice\" &lt;&lt; std::endl;\n        bool NewDrinkChoice;\n        DrinkChoice = NewDrinkChoice;\n        IsChoiceValid = false;\n        break;\n    }\n  }\n}\n\n\nvoid DisplayDrinks()\n{\n  int DrinkChoice;                //here declared\n  std::cout &lt;&lt; \"----------------\" &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"1. Coffee\" &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"2. Hot Chocolate\" &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"3. Green Tea\" &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"----------------\" &lt;&lt; std::endl;\n  std::cout &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"Please make a choice: \" &lt;&lt; std::endl;\n  std::cin&gt;&gt;DrinkChoice;              //input by user\n  MakeDrinkSelection(DrinkChoice);  //used to give an error\n\n}\n\nvoid ReturnChange()\n{\n  if(RunningTotal &gt; COST_OF_DRINK)\n  {\n    std::cout &lt;&lt; \"Your change is: \" &lt;&lt; (RunningTotal - COST_OF_DRINK) &lt;&lt; std::endl;\n  }\n}\n};\n\n\n    int main()\n    {\n\n\n  //DrinkMachine drinkmachine = new DrinkMachine();\n  DrinkMachine mydrink;\n  int money;              //here declared\n\n  while(!mydrink.CheckTotal())\n  {\n  std::cin&gt;&gt;money;          //input by user\n\n    mydrink.DepositCoins(money); //no error\n  }\n\n       mydrink.DisplayDrinks();\n\n       return 0;\n    }\n</code></pre>\n\n<p>I have cleared the basic error you asked about. But you should correct the errors in logic by yourself.</p>\n\n<p>Hope you will. </p>\n"}], "owner": {"reputation": 1, "user_id": 11830790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9472a292c764ae89f3f85da163e5c96d?s=128&d=identicon&r=PG&f=1", "display_name": "Advait Kelkar", "link": "https://stackoverflow.com/users/11830790/advait-kelkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563984728, "creation_date": 1563976713, "question_id": 57184713, "link": "https://stackoverflow.com/questions/57184713/expected-primary-expression-before-int-when-calling-a-member-function-inside-a", "title": "Expected primary-expression before &#39;int&#39; when calling a member function inside another member function", "body": "<p>I have just started learning c++ and thought I'd try to gauge my understanding by doing a small project\nI am creating a program that simulates a vending machine, using a class and member functions. I only get the following 2 errors:\nexpected primary expection before 'int'</p>\n\n<p>I tried removing the int, but it gave me an undefined reference to variable error. Any help is greatly appreciated!</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass DrinkMachine\n{\n  private:\n    const int COST_OF_DRINK = 150;\n\n  public:\n    int RunningTotal;\n\n    DrinkMachine()\n    {\n      RunningTotal = 0;\n    }\n\n    void DepositCoins(int money)\n    {\n\n      std::cout &lt;&lt; \"You can deposit coins of values 25, 50 and 100\" &lt;&lt; std::endl;\n      std::cout &lt;&lt; \"Enter a coin: \" &lt;&lt; std::endl;\n\n      switch(money)\n      {\n        case(25):\n          RunningTotal += 25;\n          break;\n\n        case(50):\n            RunningTotal += 50;\n            break;\n\n        case(100):\n            RunningTotal += 100;\n            break;\n\n        default:\n            std::cout &lt;&lt; \"You entered the wrong coin\" &lt;&lt; std::endl;\n            std::cout &lt;&lt; \"Coins of values 25, 50, 100 are allowed\" &lt;&lt; std::endl;\n            break;\n      }\n    }\n\n\n    bool CheckTotal()\n    {\n      if(RunningTotal &gt;= COST_OF_DRINK)\n        return true;\n\n      else\n        return false;\n    }\n\n    void MakeDrinkSelection(int DrinkChoice)\n    {\n\n      bool IsChoiceValid = false;\n\n      while(!IsChoiceValid)\n      {\n        switch(DrinkChoice)\n        {\n          case (1):\n            std::cout &lt;&lt; \"Thank you for choosing Coffee!\" &lt;&lt; std::endl;\n            ReturnChange();\n            IsChoiceValid = true;\n            break;\n\n          case(2):\n            std::cout &lt;&lt; \"Thank you for choosing Hot Chocolate!\" &lt;&lt; std::endl;\n            IsChoiceValid = true;\n            ReturnChange();\n            break;\n\n          case(3):\n            std::cout &lt;&lt; \"Thank you for choosing Green Tea!\" &lt;&lt; std::endl;\n            IsChoiceValid = true;\n            ReturnChange();\n            break;\n\n          default:\n            std::cout &lt;&lt; \"Invalid selection. Please re-enter your choice\" &lt;&lt; std::endl;\n            bool NewDrinkChoice;\n            DrinkChoice = NewDrinkChoice;\n            IsChoiceValid = false;\n            break;\n        }\n      }\n    }\n\n\n    void DisplayDrinks()\n    {\n      std::cout &lt;&lt; \"----------------\" &lt;&lt; std::endl;\n      std::cout &lt;&lt; \"1. Coffee\" &lt;&lt; std::endl;\n      std::cout &lt;&lt; \"2. Hot Chocolate\" &lt;&lt; std::endl;\n      std::cout &lt;&lt; \"3. Green Tea\" &lt;&lt; std::endl;\n      std::cout &lt;&lt; \"----------------\" &lt;&lt; std::endl;\n      std::cout &lt;&lt; std::endl;\n      std::cout &lt;&lt; \"Please make a choice: \" &lt;&lt; std::endl;\n      MakeDrinkSelection(int DrinkChoice);  //gives an error\n\n    }\n\n    void ReturnChange()\n    {\n      if(RunningTotal &gt; COST_OF_DRINK)\n      {\n        std::cout &lt;&lt; \"Your change is: \" &lt;&lt; (RunningTotal - COST_OF_DRINK) &lt;&lt; std::endl;\n      }\n    }\n};\n\n\nint main()\n{\n\n\n  //DrinkMachine drinkmachine = new DrinkMachine();\n  DrinkMachine mydrink;\n\n  while(!mydrink.CheckTotal())\n  {\n    mydrink.DepositCoins(int money); //gives an error\n  }\n\n  mydrink.DisplayDrinks();\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "linux", "qt"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1564053053, "post_id": 57184693, "comment_id": 100909012, "body": "If you have an answer, publish it as an answer instead of an edition, and mark it as correct in 2 days."}, {"owner": {"reputation": 21, "user_id": 11830565, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GcUK2vN_t0g/AAAAAAAAAAI/AAAAAAAAANw/HHrEYmdUHBs/photo.jpg?sz=128", "display_name": "Michal Swoboda", "link": "https://stackoverflow.com/users/11830565/michal-swoboda"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1564127984, "post_id": 57184693, "comment_id": 100936009, "body": "Ok! I&#39;ll do it right away! ; ) Thx"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 11830565, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GcUK2vN_t0g/AAAAAAAAAAI/AAAAAAAAANw/HHrEYmdUHBs/photo.jpg?sz=128", "display_name": "Michal Swoboda", "link": "https://stackoverflow.com/users/11830565/michal-swoboda"}, "is_accepted": true, "score": 0, "last_activity_date": 1564128004, "creation_date": 1564128004, "answer_id": 57215629, "question_id": 57184693, "link": "https://stackoverflow.com/questions/57184693/execute-bin-login-from-qprocess/57215629#57215629", "title": "Execute /bin/login from QProcess", "body": "<p>Ok, I found the answer here:\n<a href=\"https://www.thegeekstuff.com/2010/10/expect-examples/\" rel=\"nofollow noreferrer\">https://www.thegeekstuff.com/2010/10/expect-examples/</a> There is an example script that executes su command, simply changing it to /bin/login allowed me to pass the password via some addtional scripts.</p>\n"}], "owner": {"reputation": 21, "user_id": 11830565, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GcUK2vN_t0g/AAAAAAAAAAI/AAAAAAAAANw/HHrEYmdUHBs/photo.jpg?sz=128", "display_name": "Michal Swoboda", "link": "https://stackoverflow.com/users/11830565/michal-swoboda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 2, "accepted_answer_id": 57215629, "answer_count": 1, "score": 2, "last_activity_date": 1564129189, "creation_date": 1563976671, "last_edit_date": 1564129189, "question_id": 57184693, "link": "https://stackoverflow.com/questions/57184693/execute-bin-login-from-qprocess", "title": "Execute /bin/login from QProcess", "body": "<p>I'm working on embedded system running linux (without X11 server). I want my Qt application to be started with root privileges then from within spawn new QProcess which should be \"/bin/login user_name\" then provide password. \nThe problem is the \"Password:\" that usually prints on console (I assume it's stdout) doesn't show up, and QProcess.write() doesn't seem to work at all. If I run this QProcess as normal user I get an error message at redirected stderr (via setStandardErrorFile). I think I have general problem with understanding /bin/login.</p>\n\n<p>I tried to </p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>echo \"userPassword\" &gt; /proc/LOGIN_PID/fd/0 \n</code></pre>\n\n<p>from different console, but it also doesn't work. </p>\n\n<p>The function I wrote in c++ goes like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void BashWrapper::bashEcho(QStringList t_echo){\n    QString bash = \"/bin/login\";\n\n    QStringList args(t_echo[0]);\n\n    static QProcess *newProc = new QProcess();\n\n    newProc-&gt;setStandardOutputFile(\"/dev/pts/2\");\n    newProc-&gt;setStandardErrorFile(\"/dev/pts/2\");\n\n    newProc-&gt;start(bash,args);\n\n    if(newProc-&gt;waitForStarted()){\n        qDebug() &lt;&lt; newProc-&gt;state();\n    }\n    newProc-&gt;write(t_echo[1].toUtf8());\n\n    if(!newProc-&gt;waitForFinished(10000)){\n        qDebug() &lt;&lt; \"timeout\";\n    }\n    else{\n        qDebug() &lt;&lt; \"finished\";\n    }\n}\n</code></pre>\n\n<p>t_echo contains (\"user_name\", \"userPassword\")</p>\n\n<p>What I want to do is spawn new program (let's say /bin/myApp) as user_name. I thought that login as that user and setting .bash_profile to run /bin/myApp would be easy, painless and... secure? \nIf using /bin/login from application is impossible is there any simple way to this? \nBest Regards,\nMicha\u0142</p>\n"}, {"tags": ["python", "c++", "linux", "c++17", "strace"], "comments": [{"owner": {"reputation": 562, "user_id": 4598067, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pRKOta17UmQ/AAAAAAAAAAI/AAAAAAAAAmc/7JBZC0FlHIw/photo.jpg?sz=128", "display_name": "pythomatic", "link": "https://stackoverflow.com/users/4598067/pythomatic"}, "edited": false, "score": 0, "creation_date": 1563977043, "post_id": 57184678, "comment_id": 100880063, "body": "What does your <code>setup.py</code> look like? Specifically I&#39;m interested in the parameters <code>packages</code> and <code>include_package_data</code>. I&#39;ve only ever gotten this error when those two parameters were incorrect, thereby putting the <code>.so</code> files in the wrong place (or not including them in the package at all)."}, {"owner": {"reputation": 37, "user_id": 7433025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75545bbebc4d569d3559710898b81fa4?s=128&d=identicon&r=PG&f=1", "display_name": "Dane Cross", "link": "https://stackoverflow.com/users/7433025/dane-cross"}, "reply_to_user": {"reputation": 562, "user_id": 4598067, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pRKOta17UmQ/AAAAAAAAAAI/AAAAAAAAAmc/7JBZC0FlHIw/photo.jpg?sz=128", "display_name": "pythomatic", "link": "https://stackoverflow.com/users/4598067/pythomatic"}, "edited": false, "score": 0, "creation_date": 1563978108, "post_id": 57184678, "comment_id": 100880730, "body": "@Eqomatic edit has been made"}], "owner": {"reputation": 37, "user_id": 7433025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75545bbebc4d569d3559710898b81fa4?s=128&d=identicon&r=PG&f=1", "display_name": "Dane Cross", "link": "https://stackoverflow.com/users/7433025/dane-cross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 445, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1563980888, "creation_date": 1563976632, "last_edit_date": 1563980888, "question_id": 57184678, "link": "https://stackoverflow.com/questions/57184678/python-import-cannot-find-shared-object-file-c-extension", "title": "Python Import cannot find shared object file (C++ extension)", "body": "<p>I'm creating a C++ extension module for Python3. Compilation of the setup.py file compiles just fine, but when I go to import my new module, I get </p>\n\n<p><code>ImportError: libMyLib.so: cannot open shared object file: No such file or directory</code></p>\n\n<p>this is the path to my .so: \n<code>/path/to/lib-cc7/libMyLib.so</code></p>\n\n<p>I've tried to import my libraries in the setup.py in different ways, I have tried setting and re-setting my LD_LIBRARY_PATH variable in the terminal as well as in my .bash_profile. I have tried setting the paths in sys.path. </p>\n\n<p>When I run this code before the import statement:</p>\n\n<pre><code>print(os.environ.get(\"LD_LIBRARY_PATH\")) \nprint(os.environ.get(\"PYTHONPATH\"))\n</code></pre>\n\n<p>I get the path to the correct library directory. </p>\n\n<p>When I run strace the path to other .so's that I need show up, and I see it searching for <code>libMyLib.so</code>, but it just searches in what seems like all of the other directories and <code>/path/to/lib-cc7/</code>. In other library searches it checks <code>/path/to/lib-cc7/</code>.</p>\n\n<p>I have sanity checked that the library is there about 5 times. </p>\n\n<p>It seems like no matter what I do, </p>\n\n<p><code>import MyModule.MySubModule as SubModule</code></p>\n\n<p>always returns the same import error. Is there anything else that I haven't tried? Why does it seem like Python is looking in the wrong place for my .so?</p>\n\n<p>EDIT 1:</p>\n\n<p>This is what my setup.py (in essence) looks like:</p>\n\n<pre><code>Submodule1 = Extension('Module.Submodule1', sources=['Module/Submodule1/submod1.cpp'], language = C++, libraries=[..long list of libraries..],)\n\nSubmodule2 = Extension('Module.Submodule2', sources=['Module/Submodule2/submod2.cpp'], language = C++, libraries=[..long list of libraries..],)\n\nsetup(name = \"Module\", version = '1.0', \n      packages = ['Module', 'Module.Submodule1', 'Module.Submodule2'],\n      ext_modules = [Submodule1, Submodule2], )\n</code></pre>\n"}, {"tags": ["c++", "constructor", "initializer-list", "comma-operator"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 1, "creation_date": 1563976437, "post_id": 57184569, "comment_id": 100879652, "body": "<code>Punkt pFeld[] = { {1, 1}, {2, 2}, {3, 3} };</code>"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 2, "creation_date": 1563976464, "post_id": 57184569, "comment_id": 100879679, "body": "Turn on your compiler warnings, for example, on gcc <a href=\"https://wandbox.org/permlink/uYunmJ7votz706G5\" rel=\"nofollow noreferrer\">I get the following message</a>: <code>warning: left operand of comma operator has no effect [-Wunused-value]   Punkt pFeld[] = { (1, 1), (2, 2), (3, 3) };</code>"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1563976557, "post_id": 57184569, "comment_id": 100879739, "body": "<code>(1,1)</code> is an expression that gives a result of <code>1</code>, not a representation of a pair of vaues.  So the constructor of <code>Punkt</code> is being passed a single value for the argument <code>a</code>, and default value (<code>0</code>) for the argument <code>b</code>.   Use <code>{}</code> instead of <code>()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 4, "last_activity_date": 1563977096, "last_edit_date": 1563977096, "creation_date": 1563976433, "answer_id": 57184610, "question_id": 57184569, "link": "https://stackoverflow.com/questions/57184569/why-does-the-second-variable-not-change-in-the-field/57184610#57184610", "title": "Why does the second variable not change in the field?", "body": "<p>This</p>\n\n<pre><code>(1, 1)\n</code></pre>\n\n<p>is an expression with the comma operator.</p>\n\n<p>In fact this initialization</p>\n\n<pre><code>Punkt pFeld[] = { (1, 1), (2, 2), (3, 3) };\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>Punkt pFeld[] = { 1, 2, 3 };\n</code></pre>\n\n<p>So the constructor with the second default argument equal to 0 is called three times.</p>\n\n<p>Use instead</p>\n\n<pre><code>{ 1, 1 }\n</code></pre>\n\n<p>Here is your updated code</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass Punkt {\n\n    int x;\n    int y;\n\npublic:\n    Punkt(int a = 0, int b = 0)\n    {\n        x = a;\n        y = b;\n\n    }\n    void printXY()\n    {\n        cout &lt;&lt; \"x= \" &lt;&lt; x &lt;&lt; \" y= \" &lt;&lt; y &lt;&lt; endl;\n    }\n};\n\nint main() {\n\n    Punkt pFeld[] = { {1, 1}, {2, 2}, {3, 3} };\n\n    for (int i = 0; i &lt; 3; i++)\n        pFeld[i].printXY();\n    cin.get();\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>x= 1 y= 1\nx= 2 y= 2\nx= 3 y= 3\n</code></pre>\n\n<p>Pay attention to that the semicolon after the function main is redundant.</p>\n"}, {"tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 1, "last_activity_date": 1563976823, "last_edit_date": 1563976823, "creation_date": 1563976476, "answer_id": 57184632, "question_id": 57184569, "link": "https://stackoverflow.com/questions/57184569/why-does-the-second-variable-not-change-in-the-field/57184632#57184632", "title": "Why does the second variable not change in the field?", "body": "<p>Passing <code>(1, 1)</code> to the constructor of <code>Punkt</code>, the <a href=\"https://en.cppreference.com/w/cpp/language/operator_other#Built-in_comma_operator\" rel=\"nofollow noreferrer\">comma operator</a> will return the 2nd operand as the result (the 1st operand is discarded), so you're only passing one <code>int</code> with value <code>1</code> to the constructor. That's why <code>y</code> is always initialized as <code>0</code>.</p>\n\n<p>What you want should be</p>\n\n<pre><code>Punkt pFeld[] = { {1, 1}, {2, 2}, {3, 3} }; // list initialization since C++11\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Punkt pFeld[] = { Punkt(1, 1), Punkt(2, 2), Punkt(3, 3) };\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11830712, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dMyQJYTT8NU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdhEUD0Y569aAtzLpcJ0qBhHa-3gQ/photo.jpg?sz=128", "display_name": "Semper Fidelis", "link": "https://stackoverflow.com/users/11830712/semper-fidelis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 57184610, "answer_count": 2, "score": 1, "last_activity_date": 1563977171, "creation_date": 1563976300, "last_edit_date": 1563977171, "question_id": 57184569, "link": "https://stackoverflow.com/questions/57184569/why-does-the-second-variable-not-change-in-the-field", "title": "Why does the second variable not change in the field?", "body": "<p>I'm testing some programms for my lectures. I'm creating classes and use a paramterlist to initalize a field but the second variable doesn't change.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass Punkt {\n\n    int x;\n    int y;\n\npublic:\n    Punkt(int a = 0, int b = 0)\n    {\n        x = a;\n        y = b;\n\n    }\n    void printXY()\n    {\n        cout &lt;&lt; \"x= \" &lt;&lt; x &lt;&lt; \" y= \" &lt;&lt; y &lt;&lt; endl;\n    }\n};\n\nint main() {\n\n    Punkt pFeld[] = { (1, 1), (2, 2), (3, 3) };\n\n    for (int i = 0; i &lt; 3; i++)\n        pFeld[i].printXY();\n    cin.get();\n};\n</code></pre>\n\n<p>No error messages. Expected result was that x and y change, while actual result is that only x changes and y stays 0.</p>\n"}, {"tags": ["c++", "exception", "language-lawyer", "destructuring"], "comments": [{"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 2, "creation_date": 1563976913, "post_id": 57184495, "comment_id": 100879974, "body": "<code>All other points happen before that last one.</code> - haha, no kidding..."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 1, "creation_date": 1563977028, "post_id": 57184495, "comment_id": 100880050, "body": "@500-InternalServerError I guess that&#39;s the &quot;happens-before&quot; defined in <a href=\"https://en.cppreference.com/w/cpp/language/memory_model\" rel=\"nofollow noreferrer\">Memory model</a>, in case an implementation wants to do some funky multithreading with its exceptions or something."}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1563977112, "post_id": 57184495, "comment_id": 100880124, "body": "Probably. It was just the wording that I found amusing."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1563977162, "post_id": 57184495, "comment_id": 100880167, "body": "@500-InternalServerError yeah, this had me chuckle as well. Top-tier legalese :)"}, {"owner": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "edited": false, "score": 0, "creation_date": 1563980741, "post_id": 57184495, "comment_id": 100882350, "body": "&#171;Last one&#187; means the point at &#171;run time&#187;, not in the list."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "edited": false, "score": 0, "creation_date": 1563990414, "post_id": 57184495, "comment_id": 100887198, "body": "@LanguageLawyer The exception object is a single object. So it can have only one point of potential destruction. And these points of potential destructions are described in 4.1 and 4.2. So what is the &quot;unspecified last point&quot;?!"}, {"owner": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "edited": false, "score": 1, "creation_date": 1564003759, "post_id": 57184495, "comment_id": 100892558, "body": "@VladfromMoscow <i>The exception object is a single object. So it can have only one point of potential destruction.</i> It can have only one point of <b>actual</b> destruction, you did want to say. <i>what is the &quot;unspecified last point&quot;</i> The point &#171;where the exception object is destroyed&#187;."}], "answers": [{"tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": false, "score": 2, "last_activity_date": 1563976771, "last_edit_date": 1592644375, "creation_date": 1563976771, "answer_id": 57184740, "question_id": 57184495, "link": "https://stackoverflow.com/questions/57184495/the-last-point-of-potential-destruction-for-the-exception-object/57184740#57184740", "title": "The last point of potential destruction for the exception object", "body": "<p>This is just a comically dense way to say:</p>\n<blockquote>\n<p>The exception object is allowed to die at these points: [...].</p>\n<p>One of these points will be the last one (duh), and at that point the exception will actually die.</p>\n<p>The implementation is free to order these points as it wants, as long as it can determine which one is last to kill the exception at the right time.</p>\n</blockquote>\n<p>In other words, it does The Right Thing\u2122.</p>\n"}, {"tags": [], "owner": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "is_accepted": false, "score": 0, "last_activity_date": 1563979108, "creation_date": 1563979108, "answer_id": 57185488, "question_id": 57184495, "link": "https://stackoverflow.com/questions/57184495/the-last-point-of-potential-destruction-for-the-exception-object/57185488#57185488", "title": "The last point of potential destruction for the exception object", "body": "<p>There may be multiple <code>std::exception_ptr</code> objects referring to the same exception used and destroyed in multiple threads. The standard says that it is unspecified which <code>std::exception_ptr</code> destructor invocation destroys the exception, but guarantees that all other destructor invocations happen before.</p>\n"}], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1563979108, "creation_date": 1563976061, "last_edit_date": 1592644375, "question_id": 57184495, "link": "https://stackoverflow.com/questions/57184495/the-last-point-of-potential-destruction-for-the-exception-object", "title": "The last point of potential destruction for the exception object", "body": "<p>English is not my native language. So sometimes reading the C++ Standard I can not understand what is written.\nAnd here is one such a misunderstanding.</p>\n<p>In the C++ 20 Standard (14.1 Throwing an exception) there is written</p>\n<blockquote>\n<ol start=\"4\">\n<li>... The points of potential destruction for the exception object are:</li>\n</ol>\n<p>(4.1) \u2014 when an active handler for the exception exits by any means\nother than rethrowing, immediately after the destruction of the object\n(if any) declared in the exception-declaration in the handler;</p>\n<p>(4.2) \u2014 when an object of type std::exception_ptr (17.9.6) that refers\nto the exception object is destroyed, before the destructor of\nstd::exception_ptr returns.</p>\n</blockquote>\n<p>and then</p>\n<blockquote>\n<p>Among all points of potential destruction for the exception object,\n<strong>there is an unspecified last one where the exception object is destroyed</strong>. All other points happen before that last one.</p>\n</blockquote>\n<p>What is &quot;the last point of destruction&quot;? What is there its meaning in the Standard?</p>\n<p>It seems that there has been listed already all points of potential destruction for the exception object.</p>\n"}, {"tags": ["c++", "c++11", "thread-safety", "condition-variable"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1563975606, "post_id": 57184316, "comment_id": 100879116, "body": "Unless you <code>notify</code> the condition variable, waiters will wait forever."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1563975714, "post_id": 57184316, "comment_id": 100879176, "body": "I&#39;m uncertain what you are asking.  Can a function call wait and not notify?  Sure.  Can a program work if it only contains wait and never a notify?  Well, once any wait is called, the thread will never advance, so what do you mean by work?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 3, "creation_date": 1563975781, "post_id": 57184316, "comment_id": 100879220, "body": "@Yakk-AdamNevraumont actually thread may advance due to spurious wakeup, but I doubt anybody should rely on that behavior."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1563976026, "post_id": 57184316, "comment_id": 100879378, "body": "Ah yes, the good old &quot;program works, but only spuriously&quot;"}, {"owner": {"reputation": 186, "user_id": 5855386, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WfrL8.jpg?s=128&g=1", "display_name": "Boanerges", "link": "https://stackoverflow.com/users/5855386/boanerges"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1563977047, "post_id": 57184316, "comment_id": 100880067, "body": "@Yakk-AdamNevraumont Yes this was what I am interested in. Spurious wake up.  But the question is if this way of coding is right and reliable."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1563977737, "post_id": 57184316, "comment_id": 100880500, "body": "@Boanerges No, spurious wake ups are not reliable.  Relying on them happening or not happening is not the right way to code with condition variables.  Your question remains vague enough that I strongly suspect that the answer may be misleading you."}, {"owner": {"reputation": 186, "user_id": 5855386, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WfrL8.jpg?s=128&g=1", "display_name": "Boanerges", "link": "https://stackoverflow.com/users/5855386/boanerges"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1563978014, "post_id": 57184316, "comment_id": 100880680, "body": "@Yakk-AdamNevraumont NO! I am not misled. I wanted to know this because I was dealing with an existing code written like this. So I wanted to know there was a specific reason to write it this way. Anyways, thanks for your time."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1563976109, "post_id": 57184406, "comment_id": 100879434, "body": "&quot;so you write a loop&quot; or you use a predicate version"}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 2, "creation_date": 1563977044, "post_id": 57184406, "comment_id": 100880064, "body": "There&#39;s another, better reason for the loop: In a multi-consumer application, one thread may wake up because of a notify_all, and discover that some <i>other</i> thread already has handled the event. In that case, you usually want the first thread to go back and await the next event.  Even if spurious wakeup was not a thing, it still would be good practice to always loop, just so that some other programmer reading your code would not have to spend time trying to figure out why it was OK in your particular application to <i>not</i> write it."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1563977123, "post_id": 57184406, "comment_id": 100880133, "body": "@SolomonSlow -- good point. I <b>knew</b> there had to be a good reason for not liking the predicate form. &lt;g&gt;"}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1563977305, "post_id": 57184406, "comment_id": 100880251, "body": "Uh Oh. I think I answered the wrong question then, because the &quot;predictate&quot; form is required to be equivalent to the loop. That is to say, the predicate may be tested more than one time before the <code>wait(...)</code> returns. My experience is mostly Java, and in Java there <i>is</i> no predicate form. I am used to explaining to Java noobs why it is seldom appropriate to call <code>wait()</code> just one time without looping."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1563977437, "post_id": 57184406, "comment_id": 100880332, "body": "@SolomonSlow -- my view is that making the loop explicit makes the code clearer. Given that bias, that&#39;s what I read into your comment."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1563978012, "post_id": 57184406, "comment_id": 100880678, "body": "The predicate version has sane, simple state before, in the predicate, and after.  The loop version is &quot;do X then Y then Z or you are screwed&quot; style programming to a greater degree.  And yes, they are equivalent, except structurally: the structure of the loop one is more complex.  The predicate version really shines in <code>wait_for</code>."}, {"owner": {"reputation": 703, "user_id": 2794395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pbxie.jpg?s=128&g=1", "display_name": "fiorentinoing", "link": "https://stackoverflow.com/users/2794395/fiorentinoing"}, "edited": false, "score": 0, "creation_date": 1563978733, "post_id": 57184406, "comment_id": 100881165, "body": "I suggest you to give a look at Item 39 of Effective Modern C++ by Scott Meyers. In practice, you can use either a condition variable or a promise/future. If you use a condition variable the detecting function use a locked bool (not atomic) and <code>cv.notify_one()</code>, while the reacting function use a locked <code>cv.wait(lk, [] {return flag; });</code> to avoid spurious wake-ups."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1563979616, "post_id": 57184406, "comment_id": 100881708, "body": "@severalpeople, Yes. In most programming languages or standard libraries, <code>wait()</code> and <code>notify()</code> or the equivalent are the most primitive way in which one thread can wait for another. Ideally, you want to hide wait() and notify() inside the implementation of higher level constructs--blocking queues, futures, barriers, mailboxes,...--that express what the thread is waiting for in a more natural, more application-specific way."}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": true, "score": 5, "last_activity_date": 1563977558, "last_edit_date": 1563977558, "creation_date": 1563975782, "answer_id": 57184406, "question_id": 57184316, "link": "https://stackoverflow.com/questions/57184316/is-it-right-to-use-stdcondition-variablewait-inside-a-while-loop/57184406#57184406", "title": "Is it right to use std::condition_variable::wait inside a while loop?", "body": "<p>You use it in a loop, and you rely on <code>notify()</code>.</p>\n\n<p>The problem is that a condition variable is allowed to wake up \"spuriously\", that is, without being signaled. That makes it easier to implement, but it requires you to check that you're really where you think you are. So you write a loop:</p>\n\n<pre><code>std::unique_lock&lt;std::mutex&gt; lk(some_mutex);\nwhile (condition_not_satisfied())\n    cond_var.wait(lk);\n</code></pre>\n\n<p>Where <code>some_mutex</code> provides a critical area for the variable(s) used in the condition.</p>\n\n<p>Or, as Slava points out, you can use the predicate version:</p>\n\n<pre><code>std::unique_lock&lt;std::mutex&gt; lk(some_mutex);\ncond_var.wait(lk, some_callable_object_that_checks_the_predicate);\n</code></pre>\n\n<p>(I've never liked that form, so I tend to forget about it)</p>\n"}], "owner": {"reputation": 186, "user_id": 5855386, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WfrL8.jpg?s=128&g=1", "display_name": "Boanerges", "link": "https://stackoverflow.com/users/5855386/boanerges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 1, "accepted_answer_id": 57184406, "answer_count": 1, "score": 2, "last_activity_date": 1563977558, "creation_date": 1563975495, "question_id": 57184316, "link": "https://stackoverflow.com/questions/57184316/is-it-right-to-use-stdcondition-variablewait-inside-a-while-loop", "title": "Is it right to use std::condition_variable::wait inside a while loop?", "body": "<p>I am currently working on the std::condition_variable. Is it right to use std::condition_variable::wait() inside the while loop and not to rely on the std::condition_variable::notify() at all? </p>\n\n<blockquote>\n  <p>Should each std::condition_variable::wait() mandatorily have std::condition_variable::notify() ?</p>\n</blockquote>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 1, "creation_date": 1563975233, "post_id": 57184118, "comment_id": 100878911, "body": "What have you tried already? Are these HTML values simply the decimal representation of the hexadecimal values in the string?... Or is there special details to consider to get the result you expect?"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 2, "creation_date": 1563975278, "post_id": 57184118, "comment_id": 100878935, "body": "Divide it into separate tasks and it will become much simpler: splitting the string, parsing numbers, convert to HTML representation, concatenate HTML representations."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1563975397, "post_id": 57184118, "comment_id": 100878994, "body": "For the number conversion use <code>std::stoi</code>."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1563975468, "post_id": 57184118, "comment_id": 100879032, "body": "For spliting the string use <code>std::istringstream</code> (among other possibilities)"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1563975544, "post_id": 57184118, "comment_id": 100879086, "body": "In fact with <code>std::istringstream</code> you could use <code>std::hex</code> and do the splitting and converting in one operation."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1563978205, "post_id": 57184118, "comment_id": 100880782, "body": "Please make an attempt. Try something. We don&#39;t just do it for you!"}], "answers": [{"tags": [], "owner": {"reputation": 25, "user_id": 11382097, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lSGIJoi1cWI/AAAAAAAAAAI/AAAAAAAAAAc/wxWh_w9fF7I/photo.jpg?sz=128", "display_name": "Rushit Solanki", "link": "https://stackoverflow.com/users/11382097/rushit-solanki"}, "is_accepted": true, "score": 0, "last_activity_date": 1564028851, "creation_date": 1564028851, "answer_id": 57194330, "question_id": 57184118, "link": "https://stackoverflow.com/questions/57184118/how-to-convert-hex-string-to-html-entities/57194330#57194330", "title": "How to convert HEX string to HTML Entities", "body": "<pre><code>int getDecimal(string HexNumber)\n{\n    int i, r, len, hex = 0;\n    len = HexNumber.length();\n    for (i = 0; HexNumber[i] != '\\0'; i++)\n    {\n        len--;\n        if(HexNumber[i] &gt;= '0' &amp;&amp; HexNumber[i] &lt;= '9')\n            r = HexNumber[i] - 48;\n        else if(HexNumber[i] &gt;= 'a' &amp;&amp; HexNumber[i] &lt;= 'f')\n            r = HexNumber[i] - 87;\n        else if(HexNumber[i] &gt;= 'A' &amp;&amp; HexNumber[i] &lt;= 'F')\n            r = HexNumber[i] - 55;\n        hex += r * pow(16,len);\n    }\n    return hex;\n}\n\nstring getHtmlEntities(string HEX_string)\n{\n\n    istringstream iss(HEX_string);\n    string HTML_entities=\"\";\n    string s;\n    while (getline(iss,s,' '))\n    {\n        int DecimalNumber=getDecimal(s.c_str());\n        HTML_entities+=\"&amp;#\";\n        HTML_entities+=to_str(DecimalNumber);\n        HTML_entities+=\";\";\n    }\n    return HTML_entities;\n}\n\nint main() \n{\n\n    string HEX_string=\"627 644 64a 648 645\";\n    string HTML_entities=getHtmlEntities(HEX_string);\n\n    cout &lt;&lt; \"HTML_entities:\" &lt;&lt; HTML_entities;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 11382097, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lSGIJoi1cWI/AAAAAAAAAAI/AAAAAAAAAAc/wxWh_w9fF7I/photo.jpg?sz=128", "display_name": "Rushit Solanki", "link": "https://stackoverflow.com/users/11382097/rushit-solanki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 57194330, "answer_count": 1, "score": 0, "last_activity_date": 1564028851, "creation_date": 1563974946, "last_edit_date": 1563983820, "question_id": 57184118, "link": "https://stackoverflow.com/questions/57184118/how-to-convert-hex-string-to-html-entities", "title": "How to convert HEX string to HTML Entities", "body": "<p>How to convert a HEX string to HTML entities? for reference (<a href=\"https://v2.cryptii.com/hexadecimal/htmlentities\" rel=\"nofollow noreferrer\">https://v2.cryptii.com/hexadecimal/htmlentities</a>)</p>\n\n<p>For example, convert \"627 644 64a 648 645\" to \"&amp;#1575;&amp;#1604;&amp;#1610;&amp;#1608;&amp;#1605;\"</p>\n\n<p>I am new in c++ and challenging with Arabic characters. Now I have a HEX string for that Arabic characters and I need to convert it into HTML entities so I can store in DB and then display in the browser.</p>\n\n<pre><code>string HEX_string=\"627 644 64a 648 645\";\nstring html_entities=getHtmlEntities(HEX_string);\n\ncout &lt;&lt; \"html_entities:\" &lt;&lt; html_entities &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>I expect the output of code to be,</p>\n\n<pre><code>html_entities:&amp;#1575;&amp;#1604;&amp;#1610;&amp;#1608;&amp;#1605;\n</code></pre>\n\n<p>What will be the implementation of this(getHtmlEntities) function?</p>\n"}, {"tags": ["c++", "string", "parsing"], "comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 5, "creation_date": 1563975028, "post_id": 57184102, "comment_id": 100878801, "body": "Use a regular expression."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 3, "creation_date": 1563975518, "post_id": 57184102, "comment_id": 100879069, "body": "@VladfromMoscow: <a href=\"https://blog.codinghorror.com/regular-expressions-now-you-have-two-problems\" rel=\"nofollow noreferrer\">Now they have two problems!</a>:-)"}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 1, "creation_date": 1563975912, "post_id": 57184102, "comment_id": 100879301, "body": "Could you define the format of the string more exactly. Will it always have <code>foo</code>? will it always have four index&#39;s? Will the indexes always be integers? Are spaces allowed/required in any parts of the string? What are the types and formats of the output?"}, {"owner": {"reputation": 823, "user_id": 779912, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/bbe42bc7078d4c4481ebdf908d7dd9cc?s=128&d=identicon&r=PG", "display_name": "TruLa", "link": "https://stackoverflow.com/users/779912/trula"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1563976085, "post_id": 57184102, "comment_id": 100879414, "body": "@MartinYork, thank you for your comment. I&#39;ll update the original post."}, {"owner": {"reputation": 109, "user_id": 4605692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yJeMQ.jpg?s=128&g=1", "display_name": "dorKKnight", "link": "https://stackoverflow.com/users/4605692/dorkknight"}, "edited": false, "score": 0, "creation_date": 1563977267, "post_id": 57184102, "comment_id": 100880229, "body": "answers in this <a href=\"https://stackoverflow.com/questions/289347/using-strtok-with-a-stdstring\">SO thread</a>  might give you some idea."}, {"owner": {"reputation": 823, "user_id": 779912, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/bbe42bc7078d4c4481ebdf908d7dd9cc?s=128&d=identicon&r=PG", "display_name": "TruLa", "link": "https://stackoverflow.com/users/779912/trula"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1563982842, "post_id": 57184102, "comment_id": 100883529, "body": "Well, regular expressions were suggested in the very first comment. I was new to the area and went through the hassle of getting it done in C++. I&#39;ll update the original post and include my solution. Please, feel free to simplify it. In the meantime, two non-regular expressions based solutions were proposed by @MartinYork and @ Frodyne. At a first glance, regular expressions didn&#39;t bring anything fascinating here. The solution does not seem to be much shorter or much more elegant in my mind."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1563989195, "post_id": 57184102, "comment_id": 100886642, "body": "@TruLa: I think the regex solution can be somewhat more elegant or at least shorter. For example, <a href=\"http://coliru.stacked-crooked.com/a/7c6aedb1ecec2e36\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/7c6aedb1ecec2e36</a>. Note that it is simple to adapt the regex solution to, for example, accept whitespace inside the expression."}], "answers": [{"comments": [{"owner": {"reputation": 823, "user_id": 779912, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/bbe42bc7078d4c4481ebdf908d7dd9cc?s=128&d=identicon&r=PG", "display_name": "TruLa", "link": "https://stackoverflow.com/users/779912/trula"}, "edited": false, "score": 0, "creation_date": 1563983194, "post_id": 57185218, "comment_id": 100883728, "body": "Thank you. I updated my original post. I agree with you. I cannot see benefits in using regular expressions to solve this problem."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1563986031, "post_id": 57185218, "comment_id": 100885161, "body": "That&#39;s <code>std::sscanf()</code>, assuming you&#39;re including the C++ header <code>&lt;cstdio&gt;</code>. The compatibility header <code>&lt;stdio.h&gt;</code>, isn&#39;t recommended for new code."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1563999933, "post_id": 57185218, "comment_id": 100891228, "body": "@TobySpeight Yes. Is there a flag to check that?"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1564051919, "post_id": 57185218, "comment_id": 100908403, "body": "There&#39;s <a href=\"//stackoverflow.com/q/44694574\">no way</a> to catch that error using GCC. The only <a href=\"//stackoverflow.com/q/44694574#comment79116631_44694574\">useful suggestion</a> was to build with Oracle&#39;s Studio compiler on Solaris.  (Sadly, I no longer have any Solaris boxes, and I never had that compiler...)"}], "tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": true, "score": 2, "last_activity_date": 1563999920, "last_edit_date": 1563999920, "creation_date": 1563978237, "answer_id": 57185218, "question_id": 57184102, "link": "https://stackoverflow.com/questions/57184102/c-parse-a-string-that-contains-an-expression-access-to-the-multidimensinal-a/57185218#57185218", "title": "c++: parse a string that contains an expression &quot;access to the multidimensinal array&quot;", "body": "<p>This is one of the few times I would advocate falling back to the C parsing functions. Though it could be done by regular expression this seems a bit heavy weight for something so trivial.</p>\n\n<p>I would use the C function <code>sscanf()</code></p>\n\n<pre><code>std::tuple&lt;std::string, std::vector&lt;int&gt;&gt; ck1(std::string const&amp; info)\n{\n\n    int                 functionStartSize = 0;\n    int                 functionNameSize = 0;\n    char                check = 'X';\n    std::vector&lt;int&gt;   index;\n\n    if (std::sscanf(info.data(), \" %n%*[^\\[]%n%c\", &amp;functionStartSize, &amp;functionNameSize, &amp;check) == 1 &amp;&amp; check == '[') {\n\n        // Format String: \" %n%*[^\\[]%n%c\"\n        // ' ':        Ignore all leading space.\n        // %n:         Save number of characters of space we dropped.\n        // %*[^\\[]:    Lets split this up\n        //             %*      scan but don't save to a variable.\n        //             [..]    Only the letters we find inside the brackets.\n        //             ^\\]     Everything except ]\n        // %n:         Save the number of characters we have used to here.\n        // %c:         A character This should now be a '['\n        // We have correctly found the beginning and end of the name.\n\n        int size;\n        int value;\n        int offset = functionNameSize;\n        while(std::sscanf(info.data() + offset, \"[%d%c%n\", &amp;value, &amp;check, &amp;size) == 2 &amp;&amp; check == ']') {\n            // We have found another index\n            index.push_back(value);\n            offset += size;\n        }\n    }\n    return std::make_tuple(info.substr(functionStartSize, (functionNameSize-functionStartSize), index);\n}\n</code></pre>\n\n<p>When I was first writing the above code I assumed that <code>%n</code> would count just like any other parameter. Unfortunately it does not count towards the return value. This made the check for each index slightly more obscure and thus I am not thinking it is better to use the stream one below.</p>\n\n<p>The streams don't do that bad:<br>\nA full copy of the string into the string stream. But for small strings not a big issue.</p>\n\n<pre><code>std::tuple&lt;std::string, std::vector&lt;int&gt;&gt; ck2(std::string const&amp; info)\n{\n    std::stringstream is(info);\n    std::string         name;\n    std::vector&lt;int&gt;    index;\n\n    if (std::getline(is, name, '[')) {\n        is.putback('[');\n        name.erase(std::remove(std::begin(name), std::end(name), ' '), std::end(name));\n\n        int   value;\n        char  b1;\n        char  b2;\n        while(is &gt;&gt; b1 &gt;&gt; value &gt;&gt; b2 &amp;&amp; b1 == '[' &amp;&amp; b2 == ']') {\n            index.push_back(value);\n        }\n    }\n    return std::make_tuple(name, index);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1563984142, "post_id": 57185845, "comment_id": 100884209, "body": "If you are going to use the STL you should be using <code>std::stringstream</code> and <code>operator &gt;&gt;</code> and <code>std::getline()</code> to extract the parts."}, {"owner": {"reputation": 1880, "user_id": 11829247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7ed099888314cc282b63908b890a76?s=128&d=identicon&r=PG&f=1", "display_name": "Frodyne", "link": "https://stackoverflow.com/users/11829247/frodyne"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1564038325, "post_id": 57185845, "comment_id": 100900774, "body": "@MartinYork Having seen your STL solution, I agree: That way looks much cleaner and better."}], "tags": [], "owner": {"reputation": 1880, "user_id": 11829247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c7ed099888314cc282b63908b890a76?s=128&d=identicon&r=PG&f=1", "display_name": "Frodyne", "link": "https://stackoverflow.com/users/11829247/frodyne"}, "is_accepted": false, "score": 0, "last_activity_date": 1563980196, "creation_date": 1563980196, "answer_id": 57185845, "question_id": 57184102, "link": "https://stackoverflow.com/questions/57184102/c-parse-a-string-that-contains-an-expression-access-to-the-multidimensinal-a/57185845#57185845", "title": "c++: parse a string that contains an expression &quot;access to the multidimensinal array&quot;", "body": "<p>My answer is fairly similar to the one by Martin York, but I used stl instead.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;tuple&gt;\n\nstd::tuple&lt;std::string, std::vector&lt;int&gt;&gt; getNameIndices(std::string s)\n{\n    std::vector&lt;int&gt; indices;\n\n    // The name must end at the first '['\n    size_t pos = s.find(\"[\");\n    // If we can't find that, then it isn't a valid string - return empty\n    if (pos == std::string::npos)\n        return std::make_tuple(\"\", indices);\n\n    // Get the name and remove it from the string\n    std::string name = s.substr(0, pos);\n    s.erase(0, pos + 1);\n\n    size_t begin = 0;\n    // Keep looping as long as we can find the start of a new index\n    while ((pos = s.find(\"]\")) != std::string::npos)\n    {\n        // Begin is the position of the '[', pos is the ']': Get the text between them\n        std::string tmp = s.substr(begin, pos - begin);\n        indices.push_back(stoi(tmp));\n        // Remove the characters that were matched, and update 'begin'\n        s.erase(0, pos + 1);\n        begin = s.find(\"[\") + 1;\n    }\n\n    // Return the name and indices in a vector\n    return std::make_tuple(name, indices);\n}\n\nvoid main()\n{\n    std::string s = \"foo[500][12][2][13]\";\n\n    auto b = getNameIndices(s);\n\n    std::cout &lt;&lt; \"Name: \" &lt;&lt; std::get&lt;0&gt;(b) &lt;&lt; std::endl;\n    for (int i : std::get&lt;1&gt;(b))\n    {\n        std::cout &lt;&lt; \"\\t\" &lt;&lt; i &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 823, "user_id": 779912, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/bbe42bc7078d4c4481ebdf908d7dd9cc?s=128&d=identicon&r=PG", "display_name": "TruLa", "link": "https://stackoverflow.com/users/779912/trula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 57185218, "answer_count": 2, "score": 0, "last_activity_date": 1564057429, "creation_date": 1563974892, "last_edit_date": 1564057429, "question_id": 57184102, "link": "https://stackoverflow.com/questions/57184102/c-parse-a-string-that-contains-an-expression-access-to-the-multidimensinal-a", "title": "c++: parse a string that contains an expression &quot;access to the multidimensinal array&quot;", "body": "<p>How can one write a helper method that for a given string like <code>foo[0][1][2][3]</code> splits it into the array's name and collection (e.g. vector) of indices? In the example above it should produce <code>foo</code> and <code>0, 1, 2, 3</code> respectively.</p>\n\n<p>The format of a string is always like <code>name[index_0][index_1]....[index_n]</code>.\nThe number of indices (<code>n</code>) is not known in advance. All should be numbers. For simplicity, no spaces are allowed in a string. The name of an array (<code>name</code>) can be arbitrary. The helper function throws in case the string is not according to the specified format.</p>\n\n<p>Performance is not an issue here. I'm looking for the most elegant/short solution.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Well, regular expressions were suggested in the very first comment. I was new to the area and went through the hassle of getting it done in C++. Please, feel free to simplify it. In the meantime, two non-regular expressions based solutions were proposed by @MartinYork and @Frodyne. At a first glance, regular expressions didn't bring anything fascinating here. The solution does not seem to be much shorter or much more elegant in my mind.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;stdexcept&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;regex&gt;\n#include &lt;tuple&gt;\n\nstd::tuple&lt;std::string, std::vector&lt;int&gt;&gt; helper(std::string str) {\n  // used to validate that the incoming string is in format\n  // array[0][1][2]\n  const std::regex rx_validate{\n      \"([[:alnum:]]+)((?:\\\\[[[:digit:]]+\\\\])+)$\"};\n\n  std::match_results&lt;std::string::const_iterator&gt; match_results;\n  std::regex_search(str, match_results, rx_validate);\n\n  // regex_search array[0][1][2] gives\n  // match_results[0]: array[0][1][2]\n  // match_results[1]: array\n  // match_results[2]: [0][1][2]\n  if (match_results.size() == 3) {\n    std::vector&lt;int&gt; indices;\n\n    // used to extract indices, it is guaranteed that\n    // numbers are between brackets, no extra checks\n    // needed\n    const std::regex rx_index{\"[0-9]+\"};\n    const std::string match{match_results[2]};\n    auto it = std::sregex_iterator(match.begin(), match.end(), rx_index);\n    for (; it != std::sregex_iterator(); ++it)\n      indices.push_back(std::stoi((*it).str()));\n\n    return std::make_tuple(match_results[1], indices);\n  } else {\n    throw std::invalid_argument(\"Invalid format (\" + str + \")\");\n  }\n}\n\nint main() {\n  const std::string str{\"a[0][1][2][3][4][5]\"};\n  const auto tuple = helper(str);\n\n  std::cout &lt;&lt; \"Name: \" &lt;&lt; std::get&lt;0&gt;(tuple) &lt;&lt; std::endl;\n  for (int index: std::get&lt;1&gt;(tuple))\n    std::cout &lt;&lt; index &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><strong>UPDATE2</strong></p>\n\n<p>@rici suggested a modification of an algorithm that used regular expressions. It's a bit shorter and more concise.</p>\n\n<p>I was really interested in comparing those algorithms in terms of performance.</p>\n\n<p>Not going to advocate the numbers :-) Everybody should decide on their own.</p>\n\n<p>The below program compiled as <code>g++ -std=c++11 -Ofast</code> and running on <code>i7-8550U</code> gives:</p>\n\n<pre><code>Regex measurements...\nmin/max/avg 955/154859/1072.88\nStream measurements...\nmin/max/avg 722/41252/800.402\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cstdint&gt;\n#include &lt;limits&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;regex&gt;\n#include &lt;tuple&gt;\n\n#include &lt;time.h&gt;\n\ninline uint64_t Timestamp() {\n  timespec time_now;\n  clock_gettime(CLOCK_REALTIME, &amp;time_now);\n  return static_cast&lt;uint64_t&gt;(time_now.tv_sec) * 1000000000ULL + time_now.tv_nsec;\n}\n\nstd::tuple&lt;std::string, std::vector&lt;int&gt;&gt; helper_stream(std::string const&amp; info)\n{\n    std::stringstream is(info);\n    std::string         name;\n    std::vector&lt;int&gt;    index;\n\n    if (std::getline(is, name, '[')) {\n        is.putback('[');\n        name.erase(std::remove(std::begin(name), std::end(name), ' '), std::end(name));\n\n        int   value;\n        char  b1;\n        char  b2;\n        while(is &gt;&gt; b1 &gt;&gt; value &gt;&gt; b2 &amp;&amp; b1 == '[' &amp;&amp; b2 == ']') {\n            index.push_back(value);\n        }\n    }\n    return std::make_tuple(name, index);\n}\n\nstd::tuple&lt;std::string, std::vector&lt;int&gt;&gt; helper_regex(std::string str) {\n    static const std::regex strip_prefix{\"^[[:alpha:]][[:alnum:]]*\"};\n    static const std::regex index{\"\\\\[([[:digit:]]+)\\\\]|.\"};\n    std::match_results&lt;std::string::const_iterator&gt; match;\n    if (std::regex_search(str, match, strip_prefix)) {\n        auto e = match[0].second;\n        std::vector&lt;int&gt; indices;\n        for (auto it = std::sregex_iterator(e, str.end(), index), lim = std::sregex_iterator(); it != lim; ++it) {\n            if ((*it)[1].matched)\n                indices.push_back(std::stoi((*it)[1]));\n            else throw std::invalid_argument(\"Invalid format\");\n        }\n        return std::make_tuple(std::string(str.cbegin(), e), indices);\n    }\n    else\n        throw std::invalid_argument(\"Invalid format (\" + str + \")\");\n}\n\nstd::string make_str(int n) {\n  std::string str{\"array\"};\n\n  for (int i = 0; i &lt; n; ++i) {\n    str += \"[\";\n    str += std::to_string(std::rand());\n    str += \"]\";\n  }\n\n  return str;\n}\n\ntemplate &lt;typename F&gt;\nvoid measurements(F f) {\n  constexpr int kNumRounds = 1000000;\n  constexpr int kLength = 3;\n\n  std::vector&lt;uint64_t&gt; time_diffs(kNumRounds);\n\n  for (int i = 0; i &lt; kNumRounds; ++i) {\n    const std::string str{make_str(kLength)};\n\n    const auto before = Timestamp();\n    f(str);\n    const auto after = Timestamp();\n\n    time_diffs[i] = after - before;\n  }\n\n  uint64_t min{std::numeric_limits&lt;uint64_t&gt;::max()};\n  uint64_t max{std::numeric_limits&lt;uint64_t&gt;::min()};\n  uint64_t sum{0};\n\n  for (int i = 0; i &lt; kNumRounds; ++i) {\n    const auto time_diff = time_diffs[i];\n\n    if (time_diff &lt; min)\n      min = time_diff;\n\n    if (time_diff &gt; max)\n      max = time_diff;\n\n    sum += time_diff;\n  }\n\n  std::cout &lt;&lt; \"min/max/avg \" &lt;&lt; min &lt;&lt; \"/\" &lt;&lt; max &lt;&lt; \"/\" &lt;&lt; static_cast&lt;double&gt;(sum) / kNumRounds &lt;&lt; std::endl;\n}\n\nint main() {\n  std::cout &lt;&lt; \"Regex measurements...\" &lt;&lt; std::endl;\n  measurements(helper_regex);\n\n  std::cout &lt;&lt; \"Stream measurements...\" &lt;&lt; std::endl;\n  measurements(helper_stream);\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "qt-creator", "libtorch"], "answers": [{"tags": [], "owner": {"reputation": 593, "user_id": 11289290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdb7939d7268689c3a2c4b1758ec0918?s=128&d=identicon&r=PG", "display_name": "Doch88", "link": "https://stackoverflow.com/users/11289290/doch88"}, "is_accepted": false, "score": 2, "last_activity_date": 1565599800, "last_edit_date": 1565599800, "creation_date": 1564419399, "answer_id": 57258302, "question_id": 57183714, "link": "https://stackoverflow.com/questions/57183714/errors-while-using-libtorch-opencv-qt-creator/57258302#57258302", "title": "Errors while using Libtorch + OpenCV + QT Creator", "body": "<p>Maybe OpenCV and Libtorch were compiled with a different version of GCC (and different values of _GLIBCXX_USE_CXX11_ABI).</p>\n\n<p>Try recompiling them by yourself and see if things change.</p>\n"}, {"tags": [], "owner": {"reputation": 348, "user_id": 8102500, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4LaPh.jpg?s=128&g=1", "display_name": "Guo Shuai", "link": "https://stackoverflow.com/users/8102500/guo-shuai"}, "is_accepted": false, "score": 0, "last_activity_date": 1619012338, "creation_date": 1619012338, "answer_id": 67197067, "question_id": 57183714, "link": "https://stackoverflow.com/questions/57183714/errors-while-using-libtorch-opencv-qt-creator/67197067#67197067", "title": "Errors while using Libtorch + OpenCV + QT Creator", "body": "<p>The problem is that <strong>you downloaded the wrong ABI version of LibTorch</strong>. It looks like that you downloaded the <em>Pre-CXX11 ABI</em> version of LibTorch and OpenCV is compiled with <em>CXX11 ABI</em>. So if you set <code>_GLIBCXX_USE_CXX11_ABI=0</code>, OpenCV throws errors, and if you set <code>_GLIBCXX_USE_CXX11_ABI=1</code>, LibTorch throws errors.</p>\n<p>Download the CXX11 ABI LibTorch from PyTorch official website and you won't need to set the <code>_GLIBCXX_USE_CXX11_ABI</code> flag.</p>\n<p>About the <strong>dual ABI</strong> problem of GCC, see <a href=\"https://gcc.gnu.org/onlinedocs/libstdc++/manual/using_dual_abi.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/libstdc++/manual/using_dual_abi.html</a></p>\n"}], "owner": {"reputation": 433, "user_id": 1337313, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/6ae172496761a5744d1ab8cb8d972212?s=128&d=identicon&r=PG", "display_name": "Saptarshi", "link": "https://stackoverflow.com/users/1337313/saptarshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1619012338, "creation_date": 1563973637, "last_edit_date": 1563974483, "question_id": 57183714, "link": "https://stackoverflow.com/questions/57183714/errors-while-using-libtorch-opencv-qt-creator", "title": "Errors while using Libtorch + OpenCV + QT Creator", "body": "<p>I have the following configuration in the .pro file</p>\n\n<pre><code>TEMPLATE = app\nCONFIG += console c++11\nCONFIG -= app_bundle\nCONFIG -= qt\nCONFIG += thread\n\nSOURCES += main.cpp\n\nINCLUDEPATH += /usr/local/include/opencv4\nLIBS += -L/usr/local/lib/\nLIBS += -lopencv_core\nLIBS += -lopencv_highgui\nLIBS += -lopencv_imgproc\nLIBS += -lopencv_videoio\n\nQMAKE_CXXFLAGS += -D_GLIBCXX_USE_CXX11_ABI=0\n\nINCLUDEPATH += /path/to/libtorch/include\nINCLUDEPATH += /path/to/libtorch/include/torch/csrc/api/include\nLIBS += -L/path/to/libtorch/lib\nLIBS += -ltorch -lc10\n</code></pre>\n\n<p>OpenCV works absolutely fine <strong>without</strong> \"QMAKE_CXXFLAGS += -D_GLIBCXX_USE_CXX11_ABI=<strong>0</strong>\". With this, however, I get this following errors:</p>\n\n<p><a href=\"https://i.stack.imgur.com/9ctcj.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/9ctcj.png\" alt=\"enter image description here\"></a></p>\n\n<p>OpenCV works fine <strong>with</strong> \"QMAKE_CXXFLAGS += -D_GLIBCXX_USE_CXX11_ABI=<strong>1</strong>\" as well. But it throws a different set of errors:</p>\n\n<p><a href=\"https://i.stack.imgur.com/fL7LL.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/fL7LL.png\" alt=\"enter image description here\"></a></p>\n\n<p>Setting \"QMAKE_CXXFLAGS += -D_GLIBCXX_USE_CXX11_ABI=<strong>0</strong>\" has been recommended for Libtorch in most of the forums to avoid the errors above.</p>\n\n<p>What could be a solution or some solutions to work around this?\n(I am a newbie to both Libtorch and Qt Creator.)</p>\n"}, {"tags": ["c++", "linux", "cuda", "g++"], "comments": [{"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 2, "creation_date": 1563975645, "post_id": 57183443, "comment_id": 100879131, "body": "I can see the issue with cuda 10.1 also.  It appears to be an issue with the CUDA headers.  My suggestion would be to file a bug at developer.nvidia.com.  In the meantime, you already have a workaround which doesn&#39;t seem onerous."}, {"owner": {"reputation": 41, "user_id": 11830209, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PHU5JZOWjhk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reZ4tLdkb63ez0Gs_ACYrZeUUmcgg/photo.jpg?sz=128", "display_name": "Paul Foley", "link": "https://stackoverflow.com/users/11830209/paul-foley"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1563978592, "post_id": 57183443, "comment_id": 100881062, "body": "@RobertCrovella thanks for confirming that you see it too! I will file an issue."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 8981585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f39a0d0abff05ca8f8ff85b260717100?s=128&d=identicon&r=PG&f=1", "display_name": "Sergey Grebennikov", "link": "https://stackoverflow.com/users/8981585/sergey-grebennikov"}, "is_accepted": false, "score": 2, "last_activity_date": 1581939946, "creation_date": 1581939946, "answer_id": 60261744, "question_id": 57183443, "link": "https://stackoverflow.com/questions/57183443/linkage-error-when-including-npps-h-from-cuda-10-0/60261744#60261744", "title": "Linkage error when including npps.h from CUDA 10.0", "body": "<p>You need to declare <code>#include \"nppdefs.h\"</code> before <code>#ifdef __cplusplus</code> line in the npps.h file:</p>\n\n<pre><code>#ifndef NV_NPPS_H\n#define NV_NPPS_H\n\n#include \"nppdefs.h\"\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n...\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 11830209, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PHU5JZOWjhk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reZ4tLdkb63ez0Gs_ACYrZeUUmcgg/photo.jpg?sz=128", "display_name": "Paul Foley", "link": "https://stackoverflow.com/users/11830209/paul-foley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1581939946, "creation_date": 1563972810, "question_id": 57183443, "link": "https://stackoverflow.com/questions/57183443/linkage-error-when-including-npps-h-from-cuda-10-0", "title": "Linkage error when including npps.h from CUDA 10.0", "body": "<p>I'm writing a C++ application that will be using CUDA to do some signal processing on the GPU. Since I'm doing signal processing I'm including npps.h which contains the CUDA signal processing functions. However, every time I include npps.h I get linkage errors. I was able to replicate the problem by creating the 1 line file shown below.</p>\n\n<p>CuTest.cpp</p>\n\n<pre><code>#include &lt;npps.h&gt;\n</code></pre>\n\n<p>I tried building with the following command:</p>\n\n<pre><code>g++ -I/tools/cuda-10.0/include -L/tools/cuda-10.0/lib64  -lnpps -c CuTest.cpp\n</code></pre>\n\n<p>When I try building I get the following errors. </p>\n\n<pre><code>In file included from /tools/cuda-10.0/include/cuda_runtime.h:95:0,\n                 from /tools/cuda-10.0/include/nppdefs.h:52,\n                 from /tools/cuda-10.0/include/npps.h:60,\n                 from CuTest.cpp:2:\n/tools/cuda-10.0/include/channel_descriptor.h:104:1: error: template with C linkage\n template&lt;class T&gt; __inline__ __host__ cudaChannelFormatDesc cudaCreateChannelDesc(void)\n ^\n/tools/cuda-10.0/include/channel_descriptor.h:137:1: error: template specialization with C linkage\n template&lt;&gt; __inline__ __host__ cudaChannelFormatDesc cudaCreateChannelDesc&lt;char&gt;(void)\n</code></pre>\n\n<p>Here is what npps.h looks like: </p>\n\n<pre><code>#ifndef NV_NPPS_H\n#define NV_NPPS_H\n\n/**\n* \\file npps.h\n* NPP Signal Processing Functionality.\n*/\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n#include \"nppdefs.h\"\n\n/** @defgroup npps NPP Signal Processing\n*\n* @{\n*\n*/\n\n#include \"npps_support_functions.h\"\n#include \"npps_initialization.h\"\n#include \"npps_conversion_functions.h\"\n#include \"npps_arithmetic_and_logical_operations.h\"\n#include \"npps_statistics_functions.h\"\n#include \"npps_filtering_functions.h\"\n\n/** @} end of Signal Processing module */\n\n#ifdef __cplusplus\n} /* extern \"C\" */\n#endif\n\n#endif /* NV_NPPS_H */\n</code></pre>\n\n<p>From the error I got you can see that one of the includes in npps.h that is wrapped in the extern \u201cC\u201d eventually includes a file with template code which is a no-no inside an extern \u201cC\u201d. From the error I got I saw that the offending file was cuda_runtime.h. So, I modified CuTest.cpp to look like the following.</p>\n\n<p>CuTest.cpp:</p>\n\n<pre><code>#include &lt;cuda_runtime.h&gt;\n#include &lt;npps.h&gt;\n</code></pre>\n\n<p>By including cuda_runtime.h first, because of include guards it will not be included again by npps.h and so when it gets included it will not be wrapped in extern \u201cC\u201d. This worked for CuTest.cpp and doing the same thing in my larger application allowed it to build and run as well. </p>\n\n<p>Here is the configuration I'm running on</p>\n\n<pre><code>g++ (GCC) 8.1.0\nCUDA 10.0\nCentOS Linux release 7.6.1810 (Core)\n</code></pre>\n\n<p><strong>Note:</strong> I get the same behavior with g++ 4.8.1</p>\n\n<p>Is this a bug in the CUDA headers? Has anybody else seen this or able to reproduce it?</p>\n"}, {"tags": ["c++", "directx-11", "vertex-shader"], "answers": [{"tags": [], "owner": {"reputation": 563, "user_id": 5860233, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SATNwK-Qmhk/AAAAAAAAAAI/AAAAAAAAMW8/Wu6muy1lrhg/photo.jpg?sz=128", "display_name": "Tajuddin Khandaker", "link": "https://stackoverflow.com/users/5860233/tajuddin-khandaker"}, "is_accepted": false, "score": 0, "last_activity_date": 1563973864, "creation_date": 1563973864, "answer_id": 57183788, "question_id": 57183293, "link": "https://stackoverflow.com/questions/57183293/id3d11devicecreatevertexshader-throws-error-state-creation-167-createverte/57183788#57183788", "title": "ID3D11Device::CreateVertexShader throws [ ERROR STATE_CREATION #167: CREATEVERTEXSHADER_INVALIDSHADERTYPE ]", "body": "<p>I have found my problem location. It's silly.</p>\n\n<p>Inside *.vcxproj file I have declared manually the variable name for PS to VS and VS to PS.</p>\n\n<p>Was:</p>\n\n<pre><code>&lt;FxCompile Include=\"Shaders\\DrawLinesElementPS.hlsl\"&gt; \n  &lt;ShaderType&gt;Pixel&lt;/ShaderType&gt;\n  &lt;VariableName&gt;drawLinesElementVS&lt;/VariableName&gt;\n&lt;/FxCompile&gt;\n&lt;FxCompile Include=\"Shaders\\DrawLinesElementVS.hlsl\"&gt;\n  &lt;VariableName&gt;drawLinesElementPS&lt;/VariableName&gt;\n&lt;/FxCompile&gt;\n</code></pre>\n\n<p>Now:</p>\n\n<pre><code>&lt;FxCompile Include=\"Shaders\\DrawLinesElementPS.hlsl\"&gt; \n  &lt;ShaderType&gt;Pixel&lt;/ShaderType&gt;\n  &lt;VariableName&gt;drawLinesElementPS&lt;/VariableName&gt;\n&lt;/FxCompile&gt;\n&lt;FxCompile Include=\"Shaders\\DrawLinesElementVS.hlsl\"&gt;\n  &lt;VariableName&gt;drawLinesElementVS&lt;/VariableName&gt;\n&lt;/FxCompile&gt;\n</code></pre>\n"}], "owner": {"reputation": 563, "user_id": 5860233, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SATNwK-Qmhk/AAAAAAAAAAI/AAAAAAAAMW8/Wu6muy1lrhg/photo.jpg?sz=128", "display_name": "Tajuddin Khandaker", "link": "https://stackoverflow.com/users/5860233/tajuddin-khandaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1563973864, "creation_date": 1563972353, "question_id": 57183293, "link": "https://stackoverflow.com/questions/57183293/id3d11devicecreatevertexshader-throws-error-state-creation-167-createverte", "title": "ID3D11Device::CreateVertexShader throws [ ERROR STATE_CREATION #167: CREATEVERTEXSHADER_INVALIDSHADERTYPE ]", "body": "<p>I have 2D video coordinates (x, y) to render lines to view window. At runtime ID3D11Device::CreateVertexShader throws exception [ ERROR STATE_CREATION #167: CREATEVERTEXSHADER_INVALIDSHADERTYPE ]</p>\n\n<p>I have tried modifying input layout and structure but it looks expected to me. I can't pinpoint the actual reason of the exception regarding my situation.</p>\n\n<pre><code>/// &lt;summary&gt;Direct3D input layout for 2D position vertex. &lt;/summary&gt;\nstatic D3D11_INPUT_ELEMENT_DESC Pos2DVertexLayout[] =\n{\n    {\"POSITION\", 0, DXGI_FORMAT_R32G32_FLOAT, 0, 0, D3D11_INPUT_PER_VERTEX_DATA, 0},\n};\n\nstruct PSClipPosColor\n{\n    float4 position : SV_POSITION;\n    float2 depth : TEXCOORD0;\n    float4 clipPos : TEXCOORD1;\n    float4 color : COLOR;\n};\n\nDirectX::XMFLOAT4 fixedColor {0, 0, 0, 1};\n\nPSClipPosColor main(float2 position : POSITION0)\n{\n    PSClipPosColor output = (PSClipPosColor)0;\n\n    float4 pos = float4(position, 0.0f, 1.0f);\n    output.position = mul(pos, worldViewProjection);\n    output.depth.xy = output.position.zw;\n    output.color = fixedColor;\n    output.clipPos = mul(pos, world);\n\n    return output;\n}\n</code></pre>\n\n<p>I am expecting the vertex shader should take 2D video coordinate position value for the input layout described. But instead throws exception [ ERROR STATE_CREATION #167: CREATEVERTEXSHADER_INVALIDSHADERTYPE ]</p>\n\n<p>Please someone help me to find out where is the problem.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 1, "creation_date": 1563971621, "post_id": 57182899, "comment_id": 100876786, "body": "In <code>Set_Coord</code>, you assign to each element of the vector the same value of <code>p</code>. You don&#39;t use anything from <code>V</code> there expect for it&#39;s size."}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1563971639, "post_id": 57182899, "comment_id": 100876799, "body": "p is only default initialized in Set_Coord"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 1, "creation_date": 1563971722, "post_id": 57182899, "comment_id": 100876850, "body": "BTW. Don&#39;t reimplement the wheel. <code>void Figuras::Set_Coord (vec V){ Coord = V; }</code> will do exactly what you&#39;re trying to do."}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1563971729, "post_id": 57182899, "comment_id": 100876859, "body": "Some more comments: your naming convention is inconsistent; you always pass by value, which is very suboptimal in C++"}], "answers": [{"tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": true, "score": 1, "last_activity_date": 1563974206, "creation_date": 1563974206, "answer_id": 57183885, "question_id": 57182899, "link": "https://stackoverflow.com/questions/57182899/private-arguments-not-saving-things-in-c-program/57183885#57183885", "title": "Private arguments not saving things in C++ program", "body": "<p>Look at this code</p>\n\n<pre><code>void Figuras::Set_Coord (vec V){\n    punto p;\n    int x= V.size();\n    Coord=vector&lt;pair&lt;double,double&gt;&gt;(x);\n    for ( int i =0; i&lt;x; i++){\n        Coord[i].first = p.first;\n        Coord[i].second = p.second;\n\n    }\n};\n</code></pre>\n\n<p><code>p</code> is an empty point, that's why all your points are empty.</p>\n\n<p>You're doing things the difficult way, really it should be easy. Try this</p>\n\n<pre><code>void Figuras::Set_Coord (vec V){\n    Coord = V;\n}\n</code></pre>\n\n<p>That's all you need to do.</p>\n\n<p>The above code is correct, but for a more efficient way you should <em>pass by reference</em>.</p>\n\n<pre><code>void Figuras::Set_Coord (const vec&amp; V){\n    Coord = v;\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 6279154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/607b5d6575709853505168420652b18d?s=128&d=identicon&r=PG&f=1", "display_name": "implor", "link": "https://stackoverflow.com/users/6279154/implor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 57183885, "answer_count": 1, "score": -3, "last_activity_date": 1564080783, "creation_date": 1563971120, "last_edit_date": 1564080783, "question_id": 57182899, "link": "https://stackoverflow.com/questions/57182899/private-arguments-not-saving-things-in-c-program", "title": "Private arguments not saving things in C++ program", "body": "<p>main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include \"Figuras.h\"\nusing namespace std;\nvoid error(){\n        cout&lt;&lt;\"algo ha ido mal vuelve a empezar\"&lt;&lt;endl;\n        exit(0);\n    }\n\nint main(){\n    Figuras fig;\n    vec V;\n    string tip;\n    cout &lt;&lt; \"Triangle = Tr / Cuadrat = Cu / Rectangle = Re / Segment = Se / Cercle = Ce\" &lt;&lt; endl;\n    cin &gt;&gt; tip;\n\n    if(tip==\"Tr\"){\n        V = vector&lt;pair&lt;double,double&gt;&gt;(3);\n    }\n    else if(tip == \"Cu\" or tip == \"Re\"){\n        V = vector&lt;pair&lt;double,double&gt;&gt;(4);\n    }\n    else if (tip == \"Se\" or tip == \"Ce\"){\n        V = vector&lt;pair&lt;double,double&gt;&gt;(2);\n    }\n    else error();\n\n    for (int i = 0; i &lt; V.size(); i++) { //fill vector with coords\n        cout &lt;&lt; \"Introdueix coordenada numero: \" &lt;&lt; i&lt;&lt;\" format (double,double): \" &lt;&lt;endl;\n        cout &lt;&lt; \"x: \";\n        cin &gt;&gt; V[i].first;\n        cout &lt;&lt; \"y: \";\n        cin &gt;&gt; V[i].second;\n\n    }\n\n\n    fig.crea_figura(tip,V);\n    fig.mostrar_fig();\n\n\n    }\n</code></pre>\n\n<p>Figuras.cpp</p>\n\n<pre><code>#include \"Figuras.h\"\n\nusing namespace std;\n\n\n    /*void Figuras::Figura(){\n        tipo = NULL;\n        Coord = NULL;\n    }*/\n\n    string Figuras::get_tipo (){\n        return tipo;\n    };\n\n    vec Figuras::get_coords (){\n        return Coord;\n\n    };\n\n    punto Figuras::get_inicio (){\n        return inicio;\n    };\n\n    void Figuras::Set_tipo (string typ){\n        tipo = typ;\n    };\n\n    void Figuras::Set_Coord (vec V){\n        punto p;\n        int x= V.size();\n        Coord=vector&lt;pair&lt;double,double&gt;&gt;(x);\n        for ( int i =0; i&lt;x; i++){\n            Coord[i].first = p.first;\n            Coord[i].second = p.second;\n\n        }\n    };\n\n    void Figuras::Set_inicio (punto ini){\n        inicio = ini;\n    }; \n    void Figuras::crea_figura (string tip, vec V){\n        Set_tipo(tip);\n        Set_Coord(V);\n\n    };\n\n    void Figuras::trasladar (punto P){\n        double difx,dify;\n        difx=P.first - inicio.first;\n        dify=P.second - inicio.second;\n        vec V;\n        Figuras::get_coords();\n        if (!Coord.empty()){\n            for(int i=0; i&lt;Coord.size(); i++){\n                Coord[i].first += difx;\n                Coord[i].second += dify;\n            }\n        }\n        else cout&lt;&lt; \"no hay coords\"&lt;&lt;endl;\n    };\n\n    void Figuras::mostrar_fig (){\n        vec V;\n        V=get_coords();\n        punto ini;\n        ini=get_inicio();\n        string tip;\n        tip=get_tipo();\n        cout&lt;&lt;\"tipo: \"&lt;&lt;tip&lt;&lt;endl;\n        for (int i =0; i&lt;V.size(); i++){\n            cout&lt;&lt;\"punto \"&lt;&lt; i+1&lt;&lt;\": \"&lt;&lt;\"(\"&lt;&lt;V[i].first&lt;&lt;\",\"&lt;&lt;V[i].second&lt;&lt;\")\"&lt;&lt;endl;\n        }\n        cout&lt;&lt; \"punto inicial: (\"&lt;&lt;ini.first&lt;&lt;\",\"&lt;&lt;ini.second&lt;&lt;\")\"&lt;&lt;endl;\n\n    };\n</code></pre>\n\n<p>Figuras.h</p>\n\n<pre><code>#ifndef FIGURAS_H\n#define FIGURAS_H\n\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\n\ntypedef vector &lt; pair &lt; double, double &gt;&gt;vec;\n\ntypedef pair &lt; double, double &gt;punto;\n\n\n\nclass Figuras\n{\n\n\nprivate:\nstring tipo;\n\nvec Coord;\n\npunto inicio={0.0,0.0};\n\n\npublic:\nstring get_tipo ();\n\nvec get_coords ();\n\npunto get_inicio ();\n\nvoid Set_tipo (string typ);\n\nvoid Set_Coord (vec V);\n\nvoid Set_inicio (punto ini);\n\nvoid crea_figura (string tip, vec vec);\n\nvoid trasladar (punto P);\n\nvoid mostrar_fig ();\n\n};\n\n\n#endif\n</code></pre>\n\n<p>Let me explain the problem when I do, <code>crea_figura(tip,V);</code> and then mostrar_fig() at main.cpp line 39,40.</p>\n\n<p>This happens:</p>\n\n<pre><code>Triangle = Tr / Cuadrat = Cu / Rectangle = Re / Segment = Se / Cercle = Ce\nTr\nIntrodueix coordenada numero: 0 format (double,double): \nx: 1.1\ny: 1.1\nIntrodueix coordenada numero: 1 format (double,double): \nx: 2.2\ny: 2.2\nIntrodueix coordenada numero: 2 format (double,double): \nx: 3.1\ny: 1.1\ntipo: Tr\npunto 1: (0,0)\npunto 2: (0,0)\npunto 3: (0,0)\npunto inicial: (0,0)\n</code></pre>\n\n<p>All points appear to be empty and I can not realize why is that for. Is there any other way to initialize the class (another type of constructor)?</p>\n"}, {"tags": ["c++", "include", "shared-libraries", "external"], "comments": [{"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1563970776, "post_id": 57182767, "comment_id": 100876257, "body": "Precompiled headers?"}, {"owner": {"reputation": 443, "user_id": 3296789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IdobE.png?s=128&g=1", "display_name": "PeteBlackerThe3rd", "link": "https://stackoverflow.com/users/3296789/peteblackerthe3rd"}, "edited": false, "score": 0, "creation_date": 1563970857, "post_id": 57182767, "comment_id": 100876295, "body": "Your functions should be declared in header files and defined in c++ files. That way the .o files compiled from the c++ files do not have to be regenerated as long as the c++ and h file don&#39;t change."}, {"owner": {"reputation": 91, "user_id": 9770387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15HEL.jpg?s=128&g=1", "display_name": "JN_", "link": "https://stackoverflow.com/users/9770387/jn"}, "reply_to_user": {"reputation": 443, "user_id": 3296789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IdobE.png?s=128&g=1", "display_name": "PeteBlackerThe3rd", "link": "https://stackoverflow.com/users/3296789/peteblackerthe3rd"}, "edited": false, "score": 0, "creation_date": 1563971356, "post_id": 57182767, "comment_id": 100876616, "body": "@PeteBlackerThe3rd it&#39;s an external file"}, {"owner": {"reputation": 91, "user_id": 9770387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15HEL.jpg?s=128&g=1", "display_name": "JN_", "link": "https://stackoverflow.com/users/9770387/jn"}, "reply_to_user": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1563971388, "post_id": 57182767, "comment_id": 100876631, "body": "@Ayxan I am aware of that for VS. Can you suggest a ref how to do it in linux?"}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1563971986, "post_id": 57182767, "comment_id": 100877021, "body": "As a side note: there are often redundant includes in big projects. One may want to reduce that redundancy, for by using <code>include-what-you-use</code> tool."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 9770387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15HEL.jpg?s=128&g=1", "display_name": "JN_", "link": "https://stackoverflow.com/users/9770387/jn"}, "edited": false, "score": 0, "creation_date": 1563976649, "post_id": 57183087, "comment_id": 100879799, "body": "would creating a shared library also help?"}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "reply_to_user": {"reputation": 91, "user_id": 9770387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15HEL.jpg?s=128&g=1", "display_name": "JN_", "link": "https://stackoverflow.com/users/9770387/jn"}, "edited": false, "score": 0, "creation_date": 1563976766, "post_id": 57183087, "comment_id": 100879883, "body": "@JalilNourisa It probably would, I might be wrong though"}], "tags": [], "owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "is_accepted": true, "score": 2, "last_activity_date": 1563971707, "creation_date": 1563971707, "answer_id": 57183087, "question_id": 57182767, "link": "https://stackoverflow.com/questions/57182767/how-to-reduce-compile-time-in-case-of-including-an-untouched-header-file/57183087#57183087", "title": "how to reduce compile time: in case of including an untouched header file", "body": "<p>You can use precompiled headers as a solution. How you do that depends on your Compiler and environment. <a href=\"http://gcc.gnu.org/onlinedocs/gcc/Precompiled-Headers.html\" rel=\"nofollow noreferrer\">Here</a> is a start for GCC:</p>\n\n<blockquote>\n  <p>To create a precompiled header file, simply compile it as you would\n  any other file, if necessary using the -x option to make the driver\n  treat it as a C or C++ header file. You may want to use a tool like\n  <code>make</code> to keep the precompiled header up-to-date when the headers it\n  contains change.</p>\n  \n  <p>A precompiled header file is searched for when <code>#include</code> is seen in the\n  compilation. As it searches for the included file (see <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Search-Path.html#Search-Path\" rel=\"nofollow noreferrer\">Search Path</a> in\n  The C Preprocessor) the compiler looks for a precompiled header in\n  each directory just before it looks for the include file in that\n  directory. The name searched for is the name specified in the <code>#include</code>\n  with \u2018.gch\u2019 appended. If the precompiled header file cannot be used,\n  it is ignored.</p>\n</blockquote>\n"}], "owner": {"reputation": 91, "user_id": 9770387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15HEL.jpg?s=128&g=1", "display_name": "JN_", "link": "https://stackoverflow.com/users/9770387/jn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 57183087, "answer_count": 1, "score": 0, "last_activity_date": 1563971707, "creation_date": 1563970669, "question_id": 57182767, "link": "https://stackoverflow.com/questions/57182767/how-to-reduce-compile-time-in-case-of-including-an-untouched-header-file", "title": "how to reduce compile time: in case of including an untouched header file", "body": "<p>I have a function defined in <code>file1.h</code> as below:</p>\n\n<pre><code>/** file1.h **/\ndef testFunc(){} \n</code></pre>\n\n<p>file1.h is written once and will not be modified during the development. But I have to use <code>testFunc()</code> in my code say in <code>file2</code>.</p>\n\n<pre><code>/** file2.h **/\n#include \"file1.h\"\ntestFunc(); //some sort of use\n</code></pre>\n\n<p>The problem is every time I make a change to <code>file2.h</code>, the compiler obviously also compiles <code>file1.h</code>, which takes time. Any suggestion on how to stop the compiler from compiling the file every time? </p>\n"}, {"tags": ["c++", "winapi", "visual-c++"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1563972894, "post_id": 57182738, "comment_id": 100877567, "body": "You need to look at where you load resources from the RC file and call <code>FindResourceExA</code> with the appropriate language ID <a href=\"https://docs.microsoft.com/en-gb/windows/win32/api/winbase/nf-winbase-findresourceexa\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-gb/windows/win32/api/winbase/&hellip;</a>"}, {"owner": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1563973023, "post_id": 57182738, "comment_id": 100877651, "body": "@RichardCritten Interesting, I&#39;m looking at this."}, {"owner": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1563973539, "post_id": 57182738, "comment_id": 100877954, "body": "@RichardCritten This does seem to be what I need, however I got no clue how to use this properly..."}, {"owner": {"reputation": 4915, "user_id": 11128312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ufn85.jpg?s=128&g=1", "display_name": "Strive Sun", "link": "https://stackoverflow.com/users/11128312/strive-sun"}, "edited": false, "score": 0, "creation_date": 1564025353, "post_id": 57182738, "comment_id": 100896588, "body": "@NorbertBoros <a href=\"https://www.codeproject.com/Articles/18/Multilingual-Application-Change-Application-Langua\" rel=\"nofollow noreferrer\">This</a> is an old case. I&#39;m not sure if it will help you."}], "answers": [{"tags": [], "owner": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "is_accepted": true, "score": 1, "last_activity_date": 1564050026, "last_edit_date": 1564050026, "creation_date": 1564049513, "answer_id": 57199508, "question_id": 57182738, "link": "https://stackoverflow.com/questions/57182738/building-application-with-different-language-specified-in-resource-rc/57199508#57199508", "title": "Building application with different language specified in resource.rc", "body": "<p>It seems I will answer my own question because I believe others have hit this problem as well.</p>\n\n<p><strong>The correct and official way</strong> to change the language of a Windows GUI applications is:</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/windows/win32/api/winnls/nf-winnls-setthreaduilanguage\" rel=\"nofollow noreferrer\">SetThreadUILanguage</a></p>\n\n<p>Using this function, and the exact thing I did in my question; the function will apply the resources in that language at runtime. ( menu, dialogs, everything )</p>\n\n<p>I my case it was as simple as:</p>\n\n<pre><code>SetThreadUILanguage(MAKELANGID(LANG_VIETNAMESE, SUBLANG_VIETNAMESE_VIETNAM));\n</code></pre>\n\n<p>However in my case I am creating builds per language, so if you want to allow the user to change the language at runtime please see the notes and <a href=\"https://devblogs.microsoft.com/oldnewthing/20170908-00/?p=96965\" rel=\"nofollow noreferrer\">this article</a>.</p>\n\n<p><strong>The un-official way</strong> of doing this is a bit more work, however quite stable and not error prone.</p>\n\n<ul>\n<li>You must translate and rebuild your menu in that language </li>\n<li>You must translate and rename each dialog ID per language, and show that dialog ID per language</li>\n</ul>\n\n<p>For the community and other developers, I will share the code to rebuild the menu:</p>\n\n<pre><code>// Find our Menu resource based on desired language\nHRSRC hRes = FindResourceExW(hInstance, RT_MENU, MAKEINTRESOURCE(IDC_APPLICATION), MAKELANGID(LANG_VIETNAMESE, SUBLANG_VIETNAMESE_VIETNAM));\n\nif (!hRes) {\n    wchar_t buf[MAX_PATH] = { 0 };\n    FormatMessageW(FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_IGNORE_INSERTS, NULL, GetLastError(), MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT), buf, (sizeof(buf) / sizeof(wchar_t)), NULL);\n    MessageBoxW(0, buf, _TEXT(L\"FindResourceExW Error\"), MB_OK | MB_ICONERROR);\n    return FALSE;\n}\n\n// Load our Menu resource based on desired language\nHGLOBAL hGlo = LoadResource(hInstance, hRes);\n\nif (!hGlo) {\n    wchar_t buf[MAX_PATH] = { 0 };\n    FormatMessageW(FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_IGNORE_INSERTS, NULL, GetLastError(), MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT), buf, (sizeof(buf) / sizeof(wchar_t)), NULL);\n    MessageBoxW(0, buf, _TEXT(L\"LoadResource Error\"), MB_OK | MB_ICONERROR);\n    return FALSE;\n}\n\n// Lock the resource\nLPVOID pData = LockResource(hGlo);\n\nif (pData == NULL) {\n    wchar_t buf[MAX_PATH] = { 0 };\n    FormatMessageW(FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_IGNORE_INSERTS, NULL, GetLastError(), MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT), buf, (sizeof(buf) / sizeof(wchar_t)), NULL);\n    MessageBoxW(0, buf, _TEXT(L\"LockResource Error\"), MB_OK | MB_ICONERROR);\n    return FALSE;\n}\n\n// Load the new Menu into memory\nHMENU hMenu = LoadMenuIndirectW((MENUTEMPLATE*)pData);\n\nif (!hMenu) {\n    wchar_t buf[MAX_PATH] = { 0 };\n    FormatMessageW(FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_IGNORE_INSERTS, NULL, GetLastError(), MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT), buf, (sizeof(buf) / sizeof(wchar_t)), NULL);\n    MessageBoxW(0, buf, _TEXT(L\"LoadMenuIndirectW Error\"), MB_OK | MB_ICONERROR);\n    return FALSE;\n}\n\n// Get our default Menu\nHMENU hMenu_old = GetMenu(g_Hwnd);\n\n// Set no Menu\nSetMenu(g_Hwnd, NULL);\n\n// Erase default Menu\nDestroyMenu(hMenu_old);\n\n// Set our new Menu\nSetMenu(g_Hwnd, hMenu);\n\n// Draw our new Menu\nDrawMenuBar(g_Hwnd);\n</code></pre>\n\n<p><strong>NOTE</strong>: If you want to use <strong>FindResourceEx</strong> to search for strings, it's more complicated because of <strong>RT_STRING</strong> so please <a href=\"https://stackoverflow.com/questions/6720259/how-do-you-open-a-resource-string-in-visual-c-2010\">see this</a> before you waste your time.</p>\n\n<p>Enjoy!</p>\n"}], "owner": {"reputation": 1041, "user_id": 6583298, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5xZmG.jpg?s=128&g=1", "display_name": "Norbert Boros", "link": "https://stackoverflow.com/users/6583298/norbert-boros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 57199508, "answer_count": 1, "score": 1, "last_activity_date": 1564050026, "creation_date": 1563970576, "question_id": 57182738, "link": "https://stackoverflow.com/questions/57182738/building-application-with-different-language-specified-in-resource-rc", "title": "Building application with different language specified in resource.rc", "body": "<p>I never done something like this, so this is my first attempt. From reading online different information and tutorials, I can confidently say that I got very confused so I went on my own with this.</p>\n\n<p>What I am trying to achieve is have different build configurations with different languages for the GUI.</p>\n\n<p>My application is Win32 built using Visual Studio 2019.</p>\n\n<p>Steps I tried:</p>\n\n<ul>\n<li>Cloned my existing Release build     </li>\n<li>Opened up my .rc file in Notepad++ and cloned the \"default\" language\nsections</li>\n<li>Changed the language macro in the cloned sections ( <em>LANGUAGE \nLANG_VIETNAMESE, SUBLANG_DEFAULT</em>) </li>\n<li>Translated everything from Menu, Dialogs, etc.</li>\n<li>Reloaded in visual studio, and I can see 2x set of all resources. (\nmenu, dialogs, everything in 2 sets - 1 english and 1 vietnamese )</li>\n<li>Opened up project propierties -> Resources and changed Culture to\nVietnamese</li>\n<li>Built the project successfully</li>\n</ul>\n\n<p>However the result is nothing. The menu and dialogs are still in English.</p>\n\n<p>Is there something else I must do to specify which set of resources to use to obtain a different language build ?</p>\n\n<p>Or am I over complicating this and going all wrong...</p>\n\n<p>Any advice/examples are much appreciated.</p>\n"}, {"tags": ["c++", "c++11", "runtime", "options", "compile-time"], "answers": [{"comments": [{"owner": {"reputation": 397, "user_id": 958110, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ef95da4ba9602c6ad06e9d08f6c7d0c6?s=128&d=identicon&r=PG", "display_name": "yannick", "link": "https://stackoverflow.com/users/958110/yannick"}, "edited": false, "score": 0, "creation_date": 1563978504, "post_id": 57184609, "comment_id": 100880993, "body": "Welcome to SO! I guess you mean encapsulation is <i>not</i> necessary for Config (typo?). About the Traits, you seem to dislike it. Any reason why?"}, {"owner": {"reputation": 193, "user_id": 11508323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52392146cec0fa85b494f3a1c1722562?s=128&d=identicon&r=PG&f=1", "display_name": "Tiphaine", "link": "https://stackoverflow.com/users/11508323/tiphaine"}, "reply_to_user": {"reputation": 397, "user_id": 958110, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ef95da4ba9602c6ad06e9d08f6c7d0c6?s=128&d=identicon&r=PG", "display_name": "yannick", "link": "https://stackoverflow.com/users/958110/yannick"}, "edited": false, "score": 0, "creation_date": 1564752567, "post_id": 57184609, "comment_id": 101144888, "body": "I don&#39;t necessarily dislike, furthermore I love telling everyone to respect it. But the specific goal of your case is to have a class accessible to everyone. So encapsulation seems a bit useless in this case. If you want to respect it anyway, use friends classes but if all of your classes are friends, it is pointless."}], "tags": [], "owner": {"reputation": 193, "user_id": 11508323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52392146cec0fa85b494f3a1c1722562?s=128&d=identicon&r=PG&f=1", "display_name": "Tiphaine", "link": "https://stackoverflow.com/users/11508323/tiphaine"}, "is_accepted": true, "score": 2, "last_activity_date": 1563976431, "creation_date": 1563976431, "answer_id": 57184609, "question_id": 57182694, "link": "https://stackoverflow.com/questions/57182694/c-compile-time-runtime-options-and-parameters-how-to-handle/57184609#57184609", "title": "C++ compile-time / runtime options and parameters, how to handle?", "body": "<p>You could have your parameters in a single struct named Config (to keep your words) and make it a singleton.</p>\n\n<p>Encapsulation is important to preserve classes consistency, because a class is responsible of itself. But in your case where the Config class must be accessible to everyone, it is necessary. Furthermore, adding getters and setters to this type of class will only add overhead (in the best case you compiler will probably just inlined it).</p>\n\n<p>Also, if you really want a Traits class to implement compile time parameters, you should probably just have an initialization function (like the constructor of your library).</p>\n"}], "owner": {"reputation": 397, "user_id": 958110, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ef95da4ba9602c6ad06e9d08f6c7d0c6?s=128&d=identicon&r=PG", "display_name": "yannick", "link": "https://stackoverflow.com/users/958110/yannick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 584, "favorite_count": 0, "accepted_answer_id": 57184609, "answer_count": 1, "score": 1, "last_activity_date": 1563976431, "creation_date": 1563970466, "last_edit_date": 1563972299, "question_id": 57182694, "link": "https://stackoverflow.com/questions/57182694/c-compile-time-runtime-options-and-parameters-how-to-handle", "title": "C++ compile-time / runtime options and parameters, how to handle?", "body": "<p>What is the proper way to handle compile-time and runtime options in a generic library? What is good practice for large software in which there are simply too many options for the user to bother about most of them?</p>\n\n<p>Suppose the task is to write a large library to perform calculations on a number of datasets at the same time. There are numerous ways to perform these calculations, and the library must be be highly configurable. Typically, there are options relative to how the calculation is performed as a whole. Then, each dataset has its own set of calculation options. Finally, each calculation has a number of tuning parameters, which must be set as well.</p>\n\n<p>The library itself is generic, but each application which uses that library will use a particular kind of dataset, for which tuning parameters will take on a certain value. Since they will not change throughout the life of the application, I make them known at application <strong>compile-time</strong>. The way I would implement these tuning parameters in the library is through a <code>Traits</code> class, which contains the tuning parameters as <code>static const</code> elements. Calibration of their final value is part of the development of the application.</p>\n\n<p>The datasets will of course change depending on what the user feeds to the application, and therefore a number of <strong>runtime</strong> options must be provided as well (with intelligent defaults). Calibration of their default value is also part of the development of the application. I would implement these options as a <code>Config</code> class which contains these options, and can be changed on application startup (e.g. parsing a config text file). It gets passed to the constructor of a lot of the classes in the library. Each class then calls the <code>Config::get_x</code> for their specific option <code>x</code>.</p>\n\n<p>The thing I don't really like about this design, is that both <code>Traits</code> and <code>Config</code> classes break encapsulation. Some options relate to some parts of the library. Most of the time, however, they don't. And having them suddenly next to each other annoys me, because they affect separate things in the code, which are often in different abstraction layers.</p>\n\n<p>One solution I was thinking about, is using multiple public inheritance for these different parts. A class which needs to know an option then casts the <code>Config</code> object or calls the relevant <code>Trait</code> parent to access it. Also, this passing along of <code>Config</code> to every class that needs it (or whose members need it) is very inelegant. Maybe <code>Config</code> should be a singleton?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 1, "creation_date": 1563970277, "post_id": 57182547, "comment_id": 100875974, "body": "Maybe <code>T</code>? Your question isn&#39;t very clear honestly"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1563970801, "post_id": 57182547, "comment_id": 100876265, "body": "Return value of <code>std::hash::operator()</code> is of type <code>size_t</code>. Live demo: <a href=\"https://wandbox.org/permlink/zGYb4HflHe5JgIAb\" rel=\"nofollow noreferrer\">wandbox.org/permlink/zGYb4HflHe5JgIAb</a>."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1563970953, "post_id": 57182547, "comment_id": 100876344, "body": "Since your unordered map &quot;maps from the <code>T</code> value to the storage index in the vector&quot;, then it&#39;s rather obvious that your type is <code>T</code>. Because that&#39;s what the unordered map&#39;s key does. That&#39;s what the unordered map &quot;maps from&quot;."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1563971025, "post_id": 57182547, "comment_id": 100876390, "body": "how big is this container expected to get?"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1563971101, "post_id": 57182547, "comment_id": 100876439, "body": "What if two inserted values (two strings in your case) will yield the same hash value?"}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1563971165, "post_id": 57182547, "comment_id": 100876485, "body": "It probably should be just T. The only downside with this model is you end up with two copies of T. That&#39;s fine if T is small, or the list is small, but if T is larger, it may be preferable to have just 1 copy and a reference. One option might be to build your vector as iterators into the map?"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1563971329, "post_id": 57182547, "comment_id": 100876597, "body": "@SamVarshavchik The way the question is asked I guess OP doesn&#39;t want to copy the inserted <code>value</code>. But it&#39;s only my assumption."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1563971410, "post_id": 57182547, "comment_id": 100876647, "body": "What was the OP planning to do if two different keys end up having the same hash value? This whole design is fundamentally broken."}, {"owner": {"reputation": 1786, "user_id": 422005, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/12c2e55edb5c5fa6905829dab6dca8fb?s=128&d=identicon&r=PG", "display_name": "user422005", "link": "https://stackoverflow.com/users/422005/user422005"}, "edited": false, "score": 0, "creation_date": 1563971700, "post_id": 57182547, "comment_id": 100876838, "body": "OK - it started out as an attempt to avoid duplicating of the T objects, I must admit I had forgot about the problem when two objects hash to the same key - so I&#39;ll probably just forget the whole thing."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1563971882, "post_id": 57182547, "comment_id": 100876959, "body": "I see this &quot;let&#39;s make a set which retains the insertion order&quot; thing over and over again. About 99.86 times out of 100, it&#39;s a design error. Why do you need such a thing?"}, {"owner": {"reputation": 1786, "user_id": 422005, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/12c2e55edb5c5fa6905829dab6dca8fb?s=128&d=identicon&r=PG", "display_name": "user422005", "link": "https://stackoverflow.com/users/422005/user422005"}, "edited": false, "score": 0, "creation_date": 1563972142, "post_id": 57182547, "comment_id": 100877131, "body": "I am writing an application which reads one particular archaic file format - performs simulations - and outputs another equally archaic file format. In the process I need to keep track of the insert order of objects[1], and this was one - probably not very successful attempt.  [1]: It&#39;s more complicated than &quot;just a vector :-)&quot;"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1563972285, "post_id": 57182547, "comment_id": 100877224, "body": "Moving this here: You can use <code>decltype(std::hash&lt;T&gt;{}(std::declval&lt;T&gt;()))</code> to get it generically, but all <code>std::hash::operator()</code> return <code>size_t</code>."}], "answers": [{"comments": [{"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1563972559, "post_id": 57183315, "comment_id": 100877395, "body": "Maybe, you should have asked a different way. For example, <b>How to solve a problem of storing some complex objects in a container without duplicities while maintaining their insertion order, avoiding their copying, and enabling fast lookup?</b> As far as I understand, this is what you really want."}, {"owner": {"reputation": 1786, "user_id": 422005, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/12c2e55edb5c5fa6905829dab6dca8fb?s=128&d=identicon&r=PG", "display_name": "user422005", "link": "https://stackoverflow.com/users/422005/user422005"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1563972686, "post_id": 57183315, "comment_id": 100877466, "body": "Yes - that might have been better; I was probably to focused on my own broken approach. Sounds like you have a good answer to the better question?"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1563972787, "post_id": 57183315, "comment_id": 100877525, "body": "Actually, I don&#39;t, but, generally, it&#39;s quite an interesting problem. You might consider asking a new separate question about it."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1563972960, "post_id": 57183315, "comment_id": 100877606, "body": "My initial thought is to store objects in a <code>std::deque</code>, which does not reallocate during insertions and maintains order. And then, use some &quot;indexing&quot; above it. You might use objects&#39; hashes as keys for fast lookup, but then, for each such a key, you need to store generally multiple pointers/iterators into a deque."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1563973926, "post_id": 57183315, "comment_id": 100878189, "body": "I just created some exemplary code for you: <a href=\"https://wandbox.org/permlink/n8AdGWrJUcktlN2i\" rel=\"nofollow noreferrer\">wandbox.org/permlink/n8AdGWrJUcktlN2i</a>. For higher efficiency, it should be better to store pointers into deque instead of indexes. And, I did not care about possible exceptions. The drawback is that you need a dynamic memory allocations (vectors) just to prevent possible (and maybe very unlikely) hash collisions. Some small-buffer-optimization-enabled vector may help here quite a lot, e.g., <code>boost::container::small_vector</code>."}, {"owner": {"reputation": 1786, "user_id": 422005, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/12c2e55edb5c5fa6905829dab6dca8fb?s=128&d=identicon&r=PG", "display_name": "user422005", "link": "https://stackoverflow.com/users/422005/user422005"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1563976026, "post_id": 57183315, "comment_id": 100879379, "body": "Thanks - the example was interesting - both the use <code>std::deque&lt;T&gt;</code> which is not the first tool in my chest - and the need for a vector of indices to protect agains collisions. I&#39;ll probably start off with your example - thank you!"}], "tags": [], "owner": {"reputation": 1786, "user_id": 422005, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/12c2e55edb5c5fa6905829dab6dca8fb?s=128&d=identicon&r=PG", "display_name": "user422005", "link": "https://stackoverflow.com/users/422005/user422005"}, "is_accepted": false, "score": 0, "last_activity_date": 1563972403, "creation_date": 1563972403, "answer_id": 57183315, "question_id": 57182547, "link": "https://stackoverflow.com/questions/57182547/c-get-type-key-in-stdunordered-sett/57183315#57183315", "title": "C++ get type key in std::unordered_set&lt;T&gt;", "body": "<p>Question is answered in comments - but the whole approach was judged fundamentally broken and I'll just forget about it.</p>\n"}], "owner": {"reputation": 1786, "user_id": 422005, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/12c2e55edb5c5fa6905829dab6dca8fb?s=128&d=identicon&r=PG", "display_name": "user422005", "link": "https://stackoverflow.com/users/422005/user422005"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563972403, "creation_date": 1563969999, "last_edit_date": 1563970965, "question_id": 57182547, "link": "https://stackoverflow.com/questions/57182547/c-get-type-key-in-stdunordered-sett", "title": "C++ get type key in std::unordered_set&lt;T&gt;", "body": "<p>I am creating a custom container which should have semantics of <code>std::set&lt;T&gt;</code>, but the insert order should be retained when iterating. My plan for the implementation is to store the actual objects in a <code>std::vector&lt;T&gt;</code> and then have a <code>std::unordered_map&lt;std::hash&lt;T&gt;::type, size_t&gt;</code> which maps from a hash of the object to the index in the storage vector. So assuming <code>T</code> was <code>std::string</code>:</p>\n\n<pre><code>iset&lt;std::string&gt; is;\n\nis.insert(\"A\");\nis.insert(\"B\");\nis.insert(\"C\");\n</code></pre>\n\n<p>the internal datastructures should be:</p>\n\n<pre><code>storage: [\"A\", \"B\", \"C\"]\nindex: {hash(\"A\"): 0, hash(\"B\"): 1, hash(\"C\"): 2}\n</code></pre>\n\n<p>My initial implementation looks like this - with an obvious missing piece in the declaration of the <code>std::unordered_map&lt;?, size_t&gt;</code>:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass iset {\n    std::vector&lt;T&gt; storage;\n    std::unordered_map&lt;?, size_t&gt; index; // What should be the key type here?\n\n\n    void insert(T&amp;&amp; value) {\n        auto key = std::hash&lt;T&gt;{}(value);\n        if (this-&gt;index.count(key) == 0) {\n            this-&gt;index.insert( std::make_pair(key, this-&gt;storeage.size()));\n            this-&gt;storage.push_back(std::move(value));\n        }  \n    }\n}\n</code></pre>\n\n<p>I have tried various things like: <code>decltype( std::hash&lt;T&gt;() )</code> but currently no success. Is this at all possible?</p>\n"}, {"tags": ["c++", "opengl", "glsl", "raytracing", "compute-shader"], "comments": [{"owner": {"reputation": 1449, "user_id": 5543884, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ebf681dcc74afcc621793d23c512af80?s=128&d=identicon&r=PG&f=1", "display_name": "Jhonny007", "link": "https://stackoverflow.com/users/5543884/jhonny007"}, "edited": false, "score": 1, "creation_date": 1563974255, "post_id": 57182545, "comment_id": 100878374, "body": "For those that say that I need to make a minimal example: This is minimal! It took me hours to reduce the code to what you see here. If I remove more code it magically works or breaks completely."}, {"owner": {"reputation": 3665, "user_id": 2502409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3bb7da4ea752f8cbe91601e127d3bccf?s=128&d=identicon&r=PG", "display_name": "Nazar554", "link": "https://stackoverflow.com/users/2502409/nazar554"}, "edited": false, "score": 0, "creation_date": 1563974467, "post_id": 57182545, "comment_id": 100878484, "body": "Did you try <a href=\"https://renderdoc.org\" rel=\"nofollow noreferrer\">RenderDoc</a> or at least <code>glDebugMessageControl </code>?"}, {"owner": {"reputation": 1449, "user_id": 5543884, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ebf681dcc74afcc621793d23c512af80?s=128&d=identicon&r=PG&f=1", "display_name": "Jhonny007", "link": "https://stackoverflow.com/users/5543884/jhonny007"}, "reply_to_user": {"reputation": 3665, "user_id": 2502409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3bb7da4ea752f8cbe91601e127d3bccf?s=128&d=identicon&r=PG", "display_name": "Nazar554", "link": "https://stackoverflow.com/users/2502409/nazar554"}, "edited": false, "score": 0, "creation_date": 1563975383, "post_id": 57182545, "comment_id": 100878984, "body": "I tried RenderDoc, but it couldn&#39;t capture the shaders execution. I think it doesn&#39;t work, because the shader isn&#39;t inside a frame loop? What do you mean by glDebugMessageControl? I registered a callback. Doesn&#39;t it already capture all errors?"}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1563998193, "post_id": 57182545, "comment_id": 100890528, "body": "@Jhonny007: 1) Debug callbacks only work when you create a OpenGL context with debug capability. Probably, glut won&#39;t do that by default. You can call something that creates an error for sure and check if the callback is executed. 2) You should check if your shader compiles and links successfully. 3) It&#39;s unclear why you use the arb extension version for compute shader. Your shader is written against GL4.3 and compute shader are available there."}, {"owner": {"reputation": 1449, "user_id": 5543884, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ebf681dcc74afcc621793d23c512af80?s=128&d=identicon&r=PG&f=1", "display_name": "Jhonny007", "link": "https://stackoverflow.com/users/5543884/jhonny007"}, "edited": false, "score": 0, "creation_date": 1564043348, "post_id": 57182545, "comment_id": 100903551, "body": "1 &amp; 2) I get an error from the callback if my shader contains syntax erros. 3) I didn&#39;t know that, thank you. I replaced them with the EXT version, but it still doesn&#39;t work."}, {"owner": {"reputation": 1664, "user_id": 2649079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41a2c9d80a4b8917940e65858c9abc0?s=128&d=identicon&r=PG", "display_name": "Nadir", "link": "https://stackoverflow.com/users/2649079/nadir"}, "edited": false, "score": 1, "creation_date": 1564048508, "post_id": 57182545, "comment_id": 100906445, "body": "Are you running this on windows? Does the shader takes more than 2 seconds? If so, there is a limit a program can run on GPU. It happened to me computing volume data on a compute shader. You need to edit the window registry to allow for a shader to stay more on it."}, {"owner": {"reputation": 1449, "user_id": 5543884, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ebf681dcc74afcc621793d23c512af80?s=128&d=identicon&r=PG&f=1", "display_name": "Jhonny007", "link": "https://stackoverflow.com/users/5543884/jhonny007"}, "edited": false, "score": 0, "creation_date": 1564050611, "post_id": 57182545, "comment_id": 100907660, "body": "I am on SUSE Linux Enterprise 12."}, {"owner": {"reputation": 1449, "user_id": 5543884, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ebf681dcc74afcc621793d23c512af80?s=128&d=identicon&r=PG&f=1", "display_name": "Jhonny007", "link": "https://stackoverflow.com/users/5543884/jhonny007"}, "reply_to_user": {"reputation": 1664, "user_id": 2649079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41a2c9d80a4b8917940e65858c9abc0?s=128&d=identicon&r=PG", "display_name": "Nadir", "link": "https://stackoverflow.com/users/2649079/nadir"}, "edited": false, "score": 0, "creation_date": 1564054902, "post_id": 57182545, "comment_id": 100909959, "body": "@Nadir I found out that on linux nvidia also has a timeout limit. Sadly I don&#39;t have admin rights, so I can&#39;t test if it&#39;s that..."}, {"owner": {"reputation": 1664, "user_id": 2649079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41a2c9d80a4b8917940e65858c9abc0?s=128&d=identicon&r=PG", "display_name": "Nadir", "link": "https://stackoverflow.com/users/2649079/nadir"}, "edited": false, "score": 0, "creation_date": 1564055278, "post_id": 57182545, "comment_id": 100910155, "body": "I didnt know they added such limit to linux. Perhaps you can query how much the timeout is and measure how much time your code runs before crashing, just to know if the problem could be that"}, {"owner": {"reputation": 1449, "user_id": 5543884, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ebf681dcc74afcc621793d23c512af80?s=128&d=identicon&r=PG&f=1", "display_name": "Jhonny007", "link": "https://stackoverflow.com/users/5543884/jhonny007"}, "reply_to_user": {"reputation": 1664, "user_id": 2649079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41a2c9d80a4b8917940e65858c9abc0?s=128&d=identicon&r=PG", "display_name": "Nadir", "link": "https://stackoverflow.com/users/2649079/nadir"}, "edited": false, "score": 0, "creation_date": 1564058193, "post_id": 57182545, "comment_id": 100911769, "body": "@Nadir According to this <a href=\"https://stackoverflow.com/questions/30506955/opengl-render-time-limit-on-linux\" title=\"opengl render time limit on linux\">stackoverflow.com/questions/30506955/&hellip;</a> it is 5 seconds, I tested it with different amounts of photons and at around 800k it took 10 seconds and it stopped working. But if I put in even more photons the time for the shader goes still up. At 1M photons it takes 18 seconds and get no result. So I&#39;m not so sure anymore if it is a timeout :("}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1564058423, "post_id": 57182545, "comment_id": 100911890, "body": "Time limits are there to detect if &quot;the app is not responding&quot; and then likely show a message to the user about doing something. Doing the long task in a dedicated thread allows the app to respond to the OS. I&#39;d try to do all GL-stuff in a thread (first set the context as current to this thread) and leave the main thread for user interaction."}], "answers": [{"tags": [], "owner": {"reputation": 1449, "user_id": 5543884, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ebf681dcc74afcc621793d23c512af80?s=128&d=identicon&r=PG&f=1", "display_name": "Jhonny007", "link": "https://stackoverflow.com/users/5543884/jhonny007"}, "is_accepted": true, "score": 2, "last_activity_date": 1564130376, "creation_date": 1564130376, "answer_id": 57216257, "question_id": 57182545, "link": "https://stackoverflow.com/questions/57182545/glsl-compute-shader-doesnt-run-for-large-inputs/57216257#57216257", "title": "GLSL Compute Shader doesn&#39;t run for large inputs", "body": "<p>Operating systems cancel GPU program executions if they take too long. On Windows it is generally two seconds and on Linux it is five seconds most of the time, but it can vary.</p>\n\n<p>This is to detect GPU programs that are stuck and cancel them. There are different methods to get around this timeout, but they all require admin/root privileges, which is not always available.</p>\n\n<p>If possible the execution can be split up into multiple invocations like in the following snippet:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>const uint32_t passSize   = 2048u;\nconst uint32_t numPasses  = (numPhotons / passSize) + 1;\nconst uint32_t numThreads = 64u;\nconst uint32_t numBlocks  = passSize / numThreads;\n\nglUniform1ui(glGetUniformLocation(mTextureTracerProgram, \"passSize\"), passSize);\nfor (uint32_t pass = 0u; pass &lt; numPasses; ++pass) {\n  glUniform1ui(glGetUniformLocation(mTextureTracerProgram, \"pass\"), pass);\n\n  glDispatchComputeGroupSizeARB(numBlocks, 1, 1, numThreads, 1, 1);\n  glMemoryBarrier(GL_SHADER_STORAGE_BARRIER_BIT);\n  glFlush();\n  glFinish();\n}\n</code></pre>\n\n<p>The <code>glFlush()</code> and <code>glFinish()</code> calls are important or the executions will get bundled together and the OS triggers a timeout anyways.</p>\n\n<p>In the shader you just need to access the right sections of the input data like so:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>// other stuff\n\nuniform uint pass;\nuniform uint passSize;\n\nvoid main() {\n  uint gid = gl_GlobalInvocationID.x;\n  uint passId = pass * passSize + gid;\n  if (passId &gt;= photons.length()) return;\n\n  Photon photon = photons[passId];\n\n  // rest of program\n}\n</code></pre>\n\n<p>This is all.</p>\n\n<p>If you want to disable the OS timeouts here is a relevant post for Linux: <a href=\"https://stackoverflow.com/a/30520538/5543884\">https://stackoverflow.com/a/30520538/5543884</a></p>\n\n<p>And here is a post regarding Windows: <a href=\"https://stackoverflow.com/a/29759823/5543884\">https://stackoverflow.com/a/29759823/5543884</a></p>\n"}], "owner": {"reputation": 1449, "user_id": 5543884, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ebf681dcc74afcc621793d23c512af80?s=128&d=identicon&r=PG&f=1", "display_name": "Jhonny007", "link": "https://stackoverflow.com/users/5543884/jhonny007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 1, "accepted_answer_id": 57216257, "answer_count": 1, "score": 2, "last_activity_date": 1564130376, "creation_date": 1563969987, "last_edit_date": 1564045470, "question_id": 57182545, "link": "https://stackoverflow.com/questions/57182545/glsl-compute-shader-doesnt-run-for-large-inputs", "title": "GLSL Compute Shader doesn&#39;t run for large inputs", "body": "<p>The shader takes an SSBO of Photons that have a position, direction, wavelength and intensity and each thread is responsible for tracing exactly one photon through the grid, where at each grid cell the photon hits, the intensity is accumulated for each wavelength to create a spectral distribution for each grid cell.</p>\n\n<p>The problem is that the shader works perfectly for 100,000 photons, but doesn't return a result for 1,000,000 photons.</p>\n\n<p>I looked into the sizes for the SSBOs and all were within my GPUs (NVIDIA Quadro P6000) limits of 2GB:</p>\n\n<ul>\n<li>SSBO Grid size: <strong>1.5GB</strong></li>\n<li>SSBO Photons Size: <strong>0.02GB</strong></li>\n</ul>\n\n<p>If I change the logic at some places it works with one million photons (see lines 87 and 114 for comments).</p>\n\n<p>I currently can't see any explanation of why the shader fails for 1,000,000 photons, but works for 100,000 photons. The logic is the same and the buffer sizes are within limits. (That the buffer size can't be a problem is also confirmed by that it works when changing the logic.)</p>\n\n<p>Below is the source code. If you want to try it yourself here is the code on github: <a href=\"https://github.com/TheJhonny007/TextureTracerDebug\" rel=\"nofollow noreferrer\">https://github.com/TheJhonny007/TextureTracerDebug</a></p>\n\n<p>Compute Shader:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#version 430\n\n#extension GL_EXT_compute_shader: enable\n#extension GL_EXT_shader_storage_buffer_object: enable\n#extension GL_ARB_compute_variable_group_size: enable\n\nconst uint TEX_WIDTH = 1024u;\nconst uint TEX_HEIGHT = TEX_WIDTH;\n\nconst uint MIN_WAVELENGTH = 380u;\nconst uint MAX_WAVELENGTH = 740u;\nconst uint NUM_WAVELENGTHS = MAX_WAVELENGTH - MIN_WAVELENGTH;\n\n// Size: 24 bytes -&gt; ~40,000,000 photons per available gigabyte of ram\nstruct Photon {\n    vec2 position;// m\n    vec2 direction;// normalized\n    uint wavelength;// nm\n    float intensity;// 0..1 should start at 1\n};\n\nlayout(std430, binding = 0) buffer Photons {\n    Photon photons[];\n};\n\n// Size: 1440 bytes -&gt; ~700,000 pixels per available gigabyte of ram\nstruct Pixel {\n    uint intensityAtWavelengths[NUM_WAVELENGTHS];// [0..1000]\n};\n\nlayout(std430, binding = 1) buffer Pixels {\n//Pixel pixels[TEX_WIDTH][TEX_HEIGHT];\n// NVIDIAs linker takes ages to link if the sizes are specified :(\n    Pixel[] pixels;\n};\n\nuniform float xAxisScalingFactor;\n\nvec2 getHorizontalRectangleAt(int i) {\n    float x = pow(float(i), xAxisScalingFactor);\n    float w = pow(float(i + 1), xAxisScalingFactor);\n    return vec2(x, w);\n}\n\nuniform float rectangleHeight;\n\nstruct Rectangle {\n    float x;\n    float y;\n    float w;\n    float h;\n};\n\nlayout (local_size_variable) in;\n\nvoid addToPixel(uvec2 idx, uint wavelength, uint intensity) {\n    if (idx.x &gt;= 0u &amp;&amp; idx.x &lt; TEX_WIDTH &amp;&amp; idx.y &gt;= 0u &amp;&amp; idx.y &lt; TEX_HEIGHT) {\n        uint index = (idx.y * TEX_WIDTH) + idx.x;\n        atomicAdd(pixels[index].intensityAtWavelengths[wavelength - MIN_WAVELENGTH], intensity);\n    }\n}\n\n/// Returns the rectangle at the given indices.\nRectangle getRectangleAt(ivec2 indices) {\n    vec2 horRect = getHorizontalRectangleAt(indices.x);\n    return Rectangle(horRect.x, rectangleHeight * float(indices.y), horRect.y, rectangleHeight);\n}\n\nuniform float shadowLength;\nuniform float shadowHeight;\n\n/// Returns the indices of the rectangle at the given location\nivec2 getRectangleIdxAt(vec2 location) {\n    int x = 0;\n    int y = int(location.y / rectangleHeight);\n    return ivec2(x, y);\n}\n\nfloat getRayIntersectAtX(Photon ray, float x) {\n    float slope = ray.direction.y / ray.direction.x;\n    return slope * (x - ray.position.x) + ray.position.y;\n}\n\nivec2 getRayRectangleExitEdge(Photon ray, Rectangle rect) {\n    float intersectHeight = getRayIntersectAtX(ray, rect.x + rect.w);\n\n    // IF ONE OF THE FIRST TWO CONDITIONS GETS REMOVED IT WORKS WITH 1'000'000 PHOTONS OTHERWISE ONLY 100'000 WHY?\n    if (intersectHeight &lt; rect.y) {\n        return ivec2(0, -1);\n    } else if (intersectHeight &gt; rect.y + rect.h) {\n        return ivec2(0, 1);\n    } else {\n        return ivec2(1, 0);\n    }\n}\n\nvoid main() {\n    uint gid = gl_GlobalInvocationID.x;\n    if (gid &gt;= photons.length()) return;\n\n    Photon photon = photons[gid];\n\n    ivec2 photonTexIndices = getRectangleIdxAt(photon.position);\n    while (photonTexIndices.x &lt; TEX_WIDTH &amp;&amp; photonTexIndices.y &lt; TEX_HEIGHT &amp;&amp;\n    photonTexIndices.x &gt;= 0        &amp;&amp; photonTexIndices.y &gt;= 0) {\n        // need to convert to uint for atomic add operations...\n        addToPixel(uvec2(photonTexIndices), photon.wavelength, uint(photon.intensity * 100.0));\n\n        ivec2 dir = getRayRectangleExitEdge(photon, getRectangleAt(photonTexIndices));\n        photonTexIndices += dir;\n\n        // When the ray goes out of bounds on the bottom then mirror it to simulate rays coming from\n        // the other side of the planet. This works because of the rotational symmetry of the system.\n        // IF COMMENTET OUT IT WORKS WITH 1'000'000 PHOTONS OTHERWISE ONLY 100'000 WHY?\n        if (photonTexIndices.y &lt; 0) {\n            photonTexIndices.y = 0;\n            photon.position.y *= -1.0;\n            photon.direction.y *= -1.0;\n        }\n    }\n}\n</code></pre>\n\n<p>Tracer.hpp</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#ifndef TEXTURE_TRACER_HPP\n#define TEXTURE_TRACER_HPP\n\n#include &lt;glm/glm.hpp&gt;\n#include &lt;random&gt;\n\nnamespace gpu {\n\n    // 6 * 4 = 24 Bytes\n    struct Photon {\n        glm::vec2 position;  // m\n        glm::vec2 direction; // normalized\n        uint32_t waveLength; // nm\n        float intensity;     // 0..1 should start at 1\n    };\n\n    class TextureTracer {\n    public:\n        TextureTracer();\n        uint32_t createShadowMap(size_t numPhotons);\n\n    private:\n        void initTextureTracer();\n        void traceThroughTexture(uint32_t ssboPhotons, size_t numPhotons);\n        Photon emitPhoton();\n        std::vector&lt;Photon&gt; generatePhotons(uint32_t count);\n\n        struct {\n            uint32_t uRectangleHeight;\n            uint32_t uShadowLength;\n            uint32_t uShadowHeight;\n            uint32_t uXAxisScalingFactor;\n        } mTextureTracerUniforms;\n\n        uint32_t mTextureTracerProgram;\n\n        std::mt19937_64 mRNG;\n        std::uniform_real_distribution&lt;&gt; mDistributionSun;\n        std::uniform_int_distribution&lt;uint32_t&gt; mDistributionWavelength;\n        std::bernoulli_distribution mDistributionBoolean;\n    };\n\n} // namespace gpu\n\n#endif // TEXTURE_TRACER_HPP\n</code></pre>\n\n<p>Tracer.cpp</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"TextureTracer.hpp\"\n#include &lt;GL/glew.h&gt;\n#include &lt;algorithm&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;random&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nvoid GLAPIENTRY MessageCallback(GLenum source, GLenum type, GLuint id,\n                                GLenum severity, GLsizei length,\n                                const GLchar *message, const void *userParam) {\n  if (type == GL_DEBUG_TYPE_ERROR)\n    fprintf(stderr, \"GL ERROR: type = 0x%x, severity = 0x%x, message = %s\\n\",\n            type, severity, message);\n  else\n    fprintf(stdout, \"GL INFO: type = 0x%x, severity = 0x%x, message = %s\\n\",\n            type, severity, message);\n}\n\nnamespace gpu {\nconst double TEX_HEIGHT_TO_RADIUS_FACTOR = 4;\nconst double TEX_SHADOW_LENGTH_FACTOR = 8;\n\nconst uint32_t TEX_WIDTH = 1024u;\nconst uint32_t TEX_HEIGHT = TEX_WIDTH;\n\nconst double RADIUS = 6'371'000.0;\nconst double RADIUS_FACTORED = RADIUS * TEX_HEIGHT_TO_RADIUS_FACTOR;\n\nconst double SUN_RADIUS = 695'510'000.0;\nconst double DIST_TO_SUN = 149'600'000'000.0;\nconst double ATMO_HEIGHT = 42'000.0;\n\nstd::string loadShader(const std::string &amp;fileName) {\n  std::ifstream shaderFileStream(fileName, std::ios::in);\n  if (!shaderFileStream.is_open()) {\n    std::cerr &lt;&lt; \"Could not load the GLSL shader from '\" &lt;&lt; fileName &lt;&lt; \"'!\"\n              &lt;&lt; std::endl;\n    exit(-1);\n  }\n\n  std::string shaderCode;\n  while (!shaderFileStream.eof()) {\n    std::string line;\n    std::getline(shaderFileStream, line);\n    shaderCode.append(line + \"\\n\");\n  }\n\n  return shaderCode;\n}\n\nvoid TextureTracer::initTextureTracer() {\n  mTextureTracerProgram = glCreateProgram();\n  uint32_t rayTracingComputeShader = glCreateShader(GL_COMPUTE_SHADER);\n\n  std::string code = loadShader(\"../resources/TextureTracer.glsl\");\n  const char *shader = code.c_str();\n  glShaderSource(rayTracingComputeShader, 1, &amp;shader, nullptr);\n  glCompileShader(rayTracingComputeShader);\n\n  glAttachShader(mTextureTracerProgram, rayTracingComputeShader);\n  glLinkProgram(mTextureTracerProgram);\n\n  mTextureTracerUniforms.uRectangleHeight =\n      glGetUniformLocation(mTextureTracerProgram, \"rectangleHeight\");\n  mTextureTracerUniforms.uShadowHeight =\n      glGetUniformLocation(mTextureTracerProgram, \"shadowHeight\");\n  mTextureTracerUniforms.uShadowLength =\n      glGetUniformLocation(mTextureTracerProgram, \"shadowLength\");\n  mTextureTracerUniforms.uXAxisScalingFactor =\n      glGetUniformLocation(mTextureTracerProgram, \"xAxisScalingFactor\");\n\n  glDetachShader(mTextureTracerProgram, rayTracingComputeShader);\n  glDeleteShader(rayTracingComputeShader);\n}\n\nTextureTracer::TextureTracer()\n    : mRNG(1L), mDistributionSun(\n                    std::uniform_real_distribution&lt;&gt;(-SUN_RADIUS, SUN_RADIUS)),\n      mDistributionWavelength(\n          std::uniform_int_distribution&lt;uint32_t&gt;(380, 739)),\n      mDistributionBoolean(std::bernoulli_distribution(0.5)) {\n  glEnable(GL_DEBUG_OUTPUT);\n  glDebugMessageCallback(MessageCallback, nullptr);\n\n  initTextureTracer();\n}\n\ndouble raySphereDistance(glm::dvec2 origin, glm::dvec2 direction,\n                         glm::dvec2 center, double radius) {\n  glm::dvec2 m = origin - center;\n  double b = glm::dot(m, direction);\n  double c = glm::dot(m, m) - (radius * radius);\n  if (c &gt; 0.0 &amp;&amp; b &gt; 0.0)\n    return -1.0;\n\n  double discr = b * b - c;\n\n  // A negative discriminant corresponds to ray missing sphere\n  if (discr &lt; 0.0)\n    return -1.0;\n\n  // Ray now found to intersect sphere, compute smallest t value of intersection\n  return glm::max(0.0, -b - glm::sqrt(discr));\n}\n\nPhoton TextureTracer::emitPhoton() {\n  std::uniform_real_distribution&lt;&gt; distributionEarth(0.0, ATMO_HEIGHT);\n  glm::dvec2 target = {0.0, RADIUS + distributionEarth(mRNG)};\n\n  double d;\n  do {\n    d = glm::length(glm::dvec2(mDistributionSun(mRNG), mDistributionSun(mRNG)));\n  } while (d &gt; SUN_RADIUS);\n\n  glm::dvec2 startPosition =\n      glm::dvec2(-DIST_TO_SUN, mDistributionBoolean(mRNG) ? d : -d);\n  glm::dvec2 direction = glm::normalize(target - startPosition);\n\n  startPosition +=\n      direction * raySphereDistance(startPosition, direction, {0.0, 0.0},\n                                    RADIUS + ATMO_HEIGHT);\n\n  return {glm::vec2(0.0, startPosition.y), glm::vec2(direction),\n          mDistributionWavelength(mRNG), 1.0f};\n}\n\nstd::vector&lt;Photon&gt; TextureTracer::generatePhotons(uint32_t count) {\n  std::vector&lt;Photon&gt; photons(count);\n  std::generate(photons.begin(), photons.end(),\n                [this]() { return emitPhoton(); });\n  return photons;\n}\n\nvoid TextureTracer::traceThroughTexture(uint32_t ssboPhotons,\n                                        size_t numPhotons) {\n  glUseProgram(mTextureTracerProgram);\n\n  glUniform1f(mTextureTracerUniforms.uRectangleHeight,\n              RADIUS_FACTORED / TEX_HEIGHT);\n\n  const double shadowLength =\n      TEX_SHADOW_LENGTH_FACTOR * (DIST_TO_SUN * RADIUS) / (SUN_RADIUS - RADIUS);\n\n  glUniform1f(mTextureTracerUniforms.uShadowLength, shadowLength);\n  glUniform1f(mTextureTracerUniforms.uShadowHeight, RADIUS_FACTORED);\n\n  const double xAxisScalingFactor =\n      glm::log(shadowLength) / glm::log(static_cast&lt;double&gt;(TEX_WIDTH));\n\n  glUniform1f(mTextureTracerUniforms.uXAxisScalingFactor,\n              static_cast&lt;float&gt;(xAxisScalingFactor));\n\n  const uint32_t MIN_WAVELENGTH = 380u;\n  const uint32_t MAX_WAVELENGTH = 740u;\n  const uint32_t NUM_WAVELENGTHS = MAX_WAVELENGTH - MIN_WAVELENGTH;\n\n  size_t pixelBufferSize =\n      TEX_WIDTH * TEX_HEIGHT * NUM_WAVELENGTHS * sizeof(uint32_t);\n  uint32_t ssboPixels;\n  glGenBuffers(1, &amp;ssboPixels);\n  glBindBuffer(GL_SHADER_STORAGE_BUFFER, ssboPixels);\n  glBufferData(GL_SHADER_STORAGE_BUFFER, pixelBufferSize, nullptr,\n               GL_DYNAMIC_COPY);\n\n  glBindBufferBase(GL_SHADER_STORAGE_BUFFER, 0, ssboPhotons);\n  glBindBufferBase(GL_SHADER_STORAGE_BUFFER, 1, ssboPixels);\n\n  const uint32_t numThreads = 32u;\n  const uint32_t numBlocks = numPhotons / numThreads;\n  std::cout &lt;&lt; \"numBlocks: \" &lt;&lt; numBlocks &lt;&lt; std::endl;\n\n  glDispatchComputeGroupSizeARB(numBlocks, 1, 1, numThreads, 1, 1);\n  glMemoryBarrier(GL_SHADER_STORAGE_BARRIER_BIT);\n\n  struct Pixel {\n    uint32_t intensityAtWavelengths[NUM_WAVELENGTHS];\n  };\n\n  std::vector&lt;Pixel&gt; pixels(TEX_WIDTH * TEX_HEIGHT);\n\n  glBindBuffer(GL_SHADER_STORAGE_BUFFER, ssboPixels);\n  glGetBufferSubData(GL_SHADER_STORAGE_BUFFER, 0, pixelBufferSize,\n                     pixels.data());\n  glBindBuffer(GL_SHADER_STORAGE_BUFFER, 0);\n\n  for (int y = 0; y &lt; TEX_HEIGHT; ++y) {\n    printf(\"%4i | \", y);\n    for (int x = 0; x &lt; TEX_WIDTH; ++x) {\n      Pixel p = pixels[y * TEX_WIDTH + x];\n      int counter = 0;\n      for (uint32_t i : p.intensityAtWavelengths) {\n        counter += i;\n      }\n\n      if (counter == 0) {\n        printf(\"  \");\n      } else if (counter &gt; 100'000'000) {\n        printf(\"%4s\", \"\\u25A0\");\n      } else if (counter &gt; 10'000'000) {\n        printf(\"%4s\", \"\\u25A3\");\n      } else if (counter &gt; 1'000'000) {\n        printf(\"%4s\", \"\\u25A6\");\n      } else if (counter &gt; 100'000) {\n        printf(\"%4s\", \"\\u25A4\");\n      } else {\n        printf(\"%4s\", \"\\u25A1\");\n      }\n    }\n\n    std::cout &lt;&lt; std::endl;\n  }\n\n  glDeleteBuffers(1, &amp;ssboPixels);\n\n  glUseProgram(0);\n}\n\nuint32_t TextureTracer::createShadowMap(size_t numPhotons) {\n  std::vector&lt;Photon&gt; photons = generatePhotons(numPhotons);\n\n  uint32_t ssboPhotons;\n  glGenBuffers(1, &amp;ssboPhotons);\n  glBindBuffer(GL_SHADER_STORAGE_BUFFER, ssboPhotons);\n  glBufferData(GL_SHADER_STORAGE_BUFFER, sizeof(Photon) * photons.size(),\n               photons.data(), GL_DYNAMIC_COPY);\n\n  traceThroughTexture(ssboPhotons, photons.size());\n\n  glDeleteBuffers(1, &amp;ssboPhotons);\n  glDeleteProgram(mTextureTracerProgram);\n\n  glDisable(GL_DEBUG_OUTPUT);\n  glDebugMessageCallback(nullptr, nullptr);\n\n  return 0;\n}\n}\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;GL/glew.h&gt;\n#include &lt;GL/glut.h&gt;\n\n#include \"TextureTracer.hpp\"\n\nint main(int argc, char *argv[]) {\n    glutInit(&amp;argc, argv);\n    glutCreateWindow(\"OpenGL needs a window o.O\");\n    glewInit();\n\n    auto mapper = gpu::TextureTracer();\n\n    // WITH 100'000 PHOTONS IT WORKS, WITH 1'000'000 PHOTONS NOT WHY?\n    mapper.createShadowMap(100'000);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 6021, "user_id": 206404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497437666710e8b13ee168bd7b62fcba?s=128&d=identicon&r=PG", "display_name": "Stephen Newell", "link": "https://stackoverflow.com/users/206404/stephen-newell"}, "edited": false, "score": 0, "creation_date": 1563970131, "post_id": 57182537, "comment_id": 100875886, "body": "Probably depends on optimization levels.  Have you run the code through compiler explorer and tried reading the assembly?"}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1563970382, "post_id": 57182537, "comment_id": 100876033, "body": "Since no pointers are involved, I&#39;d guess no vtable is required either"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1563972922, "post_id": 57182537, "comment_id": 100877586, "body": "The virtual table is entirely an implementation detail. A detail that most compilers use, yes, but they&#39;re free to resolve virtual calls any other way. De-virtualization is therefore also an implementation detail. IMHO this question is actually not answerable"}], "answers": [{"tags": [], "owner": {"reputation": 631, "user_id": 2057014, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d1958eadc7b381d4e81e174be61cfd3e?s=128&d=identicon&r=PG", "display_name": "getsoubl", "link": "https://stackoverflow.com/users/2057014/getsoubl"}, "is_accepted": false, "score": 0, "last_activity_date": 1563972530, "last_edit_date": 1563972530, "creation_date": 1563972118, "answer_id": 57183218, "question_id": 57182537, "link": "https://stackoverflow.com/questions/57182537/calling-pure-virtual-function-in-base-through-instance-of-derived-class/57183218#57183218", "title": "Calling pure virtual function in base through instance of derived class", "body": "<p>First of all the, you must use protected or public access class modifier before functions definitions . In other case private is the default access modifier and  you must set class A : public Base. In addition to this, in the first case in run time the entry in vtable will be use to find the foo function in dervived class (dynamic dispatch). in the second case the function bar is inherited from class A. No dynamic dispatch in this case \u2013 getsoubl </p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 11830148, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FoNa25Al1ng/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfKc2A9PkN2iAi8pZEtoqlFj5Qxug/photo.jpg?sz=128", "display_name": "fredsch", "link": "https://stackoverflow.com/users/11830148/fredsch"}, "edited": false, "score": 0, "creation_date": 1563974772, "post_id": 57183521, "comment_id": 100878659, "body": "Thank you! I did not know about godbolt, very handy. Quick test proves ( <a href=\"https://godbolt.org/z/BaGsbZ\" rel=\"nofollow noreferrer\">godbolt.org/z/BaGsbZ</a> ) , that there is no vtable at all, if inlined by gcc using optimization level -O1"}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1563973031, "creation_date": 1563973031, "answer_id": 57183521, "question_id": 57182537, "link": "https://stackoverflow.com/questions/57182537/calling-pure-virtual-function-in-base-through-instance-of-derived-class/57183521#57183521", "title": "Calling pure virtual function in base through instance of derived class", "body": "<p>The answer is that there is nothing in the C++ standard that would require dynamic dispatch in either of the two invocations. If an implementation can prove what function will be called at runtime, it may dispense with dynamic dispatch. For instance, if the call to <code>bar</code> is inlined, the implementation may be made aware that it is invoking <code>foo</code> on an object whose most derived type is <code>A</code>. In such a case it doesn't need to dispatch dynamically.</p>\n\n<p>For the cases where the call to <code>bar</code> is not inlined, the static type of <code>this</code> inside <code>bar</code> will be <code>Base*</code>. Without any knowledge of the most derived object type and the calling context, and given the indirection, an implementation will need to do dynamic dispatch to guarantee correct behavior.</p>\n\n<p>If you want to know how an implementation handles a concrete piece of code, then you may examine the generated assembly, perhaps with a tool like <a href=\"https://godbolt.org\" rel=\"nofollow noreferrer\">https://godbolt.org</a>. It should make it clear as day what sort of call is being made.</p>\n"}], "owner": {"reputation": 13, "user_id": 11830148, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FoNa25Al1ng/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfKc2A9PkN2iAi8pZEtoqlFj5Qxug/photo.jpg?sz=128", "display_name": "fredsch", "link": "https://stackoverflow.com/users/11830148/fredsch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 57183521, "answer_count": 2, "score": 1, "last_activity_date": 1563973031, "creation_date": 1563969966, "last_edit_date": 1563970030, "question_id": 57182537, "link": "https://stackoverflow.com/questions/57182537/calling-pure-virtual-function-in-base-through-instance-of-derived-class", "title": "Calling pure virtual function in base through instance of derived class", "body": "<p>Will the following code require a vtable lookup or can the compiler foresight, which function to call?</p>\n\n<pre><code>class Base\n{\n    virtual void foo() = 0;\n\n    void bar() {\n        this-&gt;foo();   // [*]\n    };\n};\n\nclass A : Base\n{\n    void foo() final {\n        ...\n    };\n};\n\nBase *base = new A();\nbase-&gt;bar();     // sure vtable lookup at [*]!\n\n\nA a;\na.bar();         // vtable lookup at [*]?\n</code></pre>\n"}, {"tags": ["c++", "googletest"], "comments": [{"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 4, "creation_date": 1563971309, "post_id": 57182503, "comment_id": 100876578, "body": "For the same reasons you put declarations in header files and implementations in multiple cpp files. When your projects get larger, you appreciate this separation."}, {"owner": {"reputation": 31, "user_id": 11405557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dd5ae1d4d2d6d9a9c02b47ecb8e8c27?s=128&d=identicon&r=PG&f=1", "display_name": "Holiday", "link": "https://stackoverflow.com/users/11405557/holiday"}, "reply_to_user": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1564055102, "post_id": 57182503, "comment_id": 100910060, "body": "Is there no any other reasons?"}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1564056495, "post_id": 57182503, "comment_id": 100910770, "body": "As your projects become larger this starts to become the only reason. :-)"}], "answers": [{"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1579104164, "post_id": 59755156, "comment_id": 105656559, "body": "Header files don&#39;t get compiled; they get included. All else being equal, and starting from a blank slate, compile speed shouldn&#39;t be affected whether a function is defined inline in a header or compiled in a separate translation unit. After that, it stands to be faster because a build system can avoid recompiling if it&#39;s unchanged."}, {"owner": {"reputation": 936, "user_id": 3736861, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05b0bc55c4c8033f0da844f66b9f22cb?s=128&d=identicon&r=PG&f=1", "display_name": "Dreamer", "link": "https://stackoverflow.com/users/3736861/dreamer"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1579106905, "post_id": 59755156, "comment_id": 105658113, "body": "@underscore_d yes, headers get included; but <i>once included</i> into a translation unit their code gets <i>compiled</i> - again and again for every translation unit they get included into. In contrast, the function defined in a .cpp file directly only gets compiled once in total. That repeated compilation of the inline function can cause a significant compilation slowdown."}], "tags": [], "owner": {"reputation": 936, "user_id": 3736861, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05b0bc55c4c8033f0da844f66b9f22cb?s=128&d=identicon&r=PG&f=1", "display_name": "Dreamer", "link": "https://stackoverflow.com/users/3736861/dreamer"}, "is_accepted": false, "score": 0, "last_activity_date": 1579103957, "creation_date": 1579103957, "answer_id": 59755156, "question_id": 57182503, "link": "https://stackoverflow.com/questions/57182503/whats-the-difference-between-mock-declare-method-and-mock-method/59755156#59755156", "title": "What&#39;s the difference between MOCK_DECLARE_METHOD and MOCK_METHOD", "body": "<p><code>MOCK_METHOD()</code> is more convenient, but a lot of code will be compiled for every compilation unit (~ .cpp file) that includes it (even transitively). This can get quite slow.</p>\n\n<p>With <code>MOCK_DECLARE_METHOD()</code> and <code>MOCK_DEFINE_METHOD()</code> you put <code>MOCK_DECLARE_METHOD()</code> in your header file and that's reasonably fast to compile again and again; and you put the corresponding <code>MOCK_DEFINE_METHOD()</code> into a single .cpp file, which will be rather slow to compile, but needs to be compiled only once.</p>\n\n<p>Note: It seems that starting with GTest 1.8.1. <code>MOCK_DECLARE_METHOD</code>/<code>MOCK_DEFINE_METHOD</code> are gone and <code>MOCK_METHOD</code> is the only option.</p>\n"}], "owner": {"reputation": 31, "user_id": 11405557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dd5ae1d4d2d6d9a9c02b47ecb8e8c27?s=128&d=identicon&r=PG&f=1", "display_name": "Holiday", "link": "https://stackoverflow.com/users/11405557/holiday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1579103957, "creation_date": 1563969875, "question_id": 57182503, "link": "https://stackoverflow.com/questions/57182503/whats-the-difference-between-mock-declare-method-and-mock-method", "title": "What&#39;s the difference between MOCK_DECLARE_METHOD and MOCK_METHOD", "body": "<p>I mentioned, that some people using GTest declare Mock objects with\nMOCK_DECLARE_METHOD and some with MOCK_METHOD.\nWhat's the difference? As for me, MOCK_METHOD is better, no need of *.cpp file with MOCK_DEFINE_METHOD </p>\n"}, {"tags": ["c++", "c", "cmake", "linker"], "comments": [{"owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "edited": false, "score": 0, "creation_date": 1563970608, "post_id": 57182475, "comment_id": 100876168, "body": "Have a look at this <a href=\"https://stackoverflow.com/questions/6581357/linking-to-stdc-with-cmake-and-gcc-4-1-2\">post</a>. You can set the <code>CC</code> and <code>CXX</code> variables. Or you can edit your CMake file(s) to manually add the libstdc++ library from the older compiler using <code>target_link_libraries</code>."}, {"owner": {"reputation": 1818, "user_id": 4021251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808129eeb69813286f32266f535b2a34?s=128&d=identicon&r=PG&f=1", "display_name": "nega", "link": "https://stackoverflow.com/users/4021251/nega"}, "edited": false, "score": 0, "creation_date": 1564070882, "post_id": 57182475, "comment_id": 100919110, "body": "Can you provide more details about your build system?"}, {"owner": {"reputation": 1818, "user_id": 4021251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808129eeb69813286f32266f535b2a34?s=128&d=identicon&r=PG&f=1", "display_name": "nega", "link": "https://stackoverflow.com/users/4021251/nega"}, "edited": false, "score": 0, "creation_date": 1564071221, "post_id": 57182475, "comment_id": 100919287, "body": "Also, have you tried adding <code>-static-libstdc++</code> to your CXX_FLAGS or CMAKE_CXX_FLAGS?"}, {"owner": {"reputation": 361, "user_id": 10143160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/341e49d07417456d665c509bc994448b?s=128&d=identicon&r=PG&f=1", "display_name": "HFinch", "link": "https://stackoverflow.com/users/10143160/hfinch"}, "reply_to_user": {"reputation": 1818, "user_id": 4021251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808129eeb69813286f32266f535b2a34?s=128&d=identicon&r=PG&f=1", "display_name": "nega", "link": "https://stackoverflow.com/users/4021251/nega"}, "edited": false, "score": 0, "creation_date": 1564135787, "post_id": 57182475, "comment_id": 100940005, "body": "@nega yes I did try to add <code>-static-libstdc++</code> to my cxx flags but this has no effect. What do you want to know abut the build system ? primarily standard gcc 4.1.2"}, {"owner": {"reputation": 1818, "user_id": 4021251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808129eeb69813286f32266f535b2a34?s=128&d=identicon&r=PG&f=1", "display_name": "nega", "link": "https://stackoverflow.com/users/4021251/nega"}, "edited": false, "score": 0, "creation_date": 1564196430, "post_id": 57182475, "comment_id": 100961542, "body": "OS? Linux? if so, what distro? how are the compilers installed? do you have <code>root</code>?"}, {"owner": {"reputation": 1818, "user_id": 4021251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808129eeb69813286f32266f535b2a34?s=128&d=identicon&r=PG&f=1", "display_name": "nega", "link": "https://stackoverflow.com/users/4021251/nega"}, "edited": false, "score": 0, "creation_date": 1564196479, "post_id": 57182475, "comment_id": 100961552, "body": "have you tried building your cmake with <code>-static-libstdc++</code> and then wiping your gcc_4.8.3 chain?"}, {"owner": {"reputation": 361, "user_id": 10143160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/341e49d07417456d665c509bc994448b?s=128&d=identicon&r=PG&f=1", "display_name": "HFinch", "link": "https://stackoverflow.com/users/10143160/hfinch"}, "edited": false, "score": 0, "creation_date": 1564382128, "post_id": 57182475, "comment_id": 100996744, "body": "RHEL 5, compilers are preinstalled and no i do not have permanent root access. When i build cmake i followed the instructions given by <a href=\"https://gitlab.kitware.com/cmake/cmake/tree/v3.13.4\" rel=\"nofollow noreferrer\">gitlab.kitware.com/cmake/cmake/tree/v3.13.4</a> i am not sure if i have the possibility to use <code>-static-libstdc++</code>"}], "owner": {"reputation": 361, "user_id": 10143160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/341e49d07417456d665c509bc994448b?s=128&d=identicon&r=PG&f=1", "display_name": "HFinch", "link": "https://stackoverflow.com/users/10143160/hfinch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563972479, "creation_date": 1563969815, "last_edit_date": 1563972479, "question_id": 57182475, "link": "https://stackoverflow.com/questions/57182475/custom-build-cmake-using-standard-library-also-for-project-with-lower-gcc-versio", "title": "Custom build cmake using standard library also for project with lower gcc version", "body": "<p>I have a custom build cmake v3.10.0 which was compiled with a <code>gcc_4.8.3</code>. I am using this custom build cmake to compile a cmake project that must use <code>gcc _4.1.2</code> because of legacy code. </p>\n\n<p>Executing cmake promted me with an error because it needs to use the <code>libstdc++-IFX.so.6</code> provided by <code>gcc_4.8.3</code> which I fixed by adding the path to the correct library in my <code>LD_LIBRARY_PATH</code> before the path to the libraries provided by <code>gcc_4.1.2</code>.</p>\n\n<p>Compiling my project and linking an executable (which is done by c++) results in the linker taking the <code>gcc_4.8.3</code> stdlibs over the <code>gcc_4.1.2</code> libs. Is there any way to tell cmake to not use the libraries it needs for himself for my cmake project preferably without touching <code>LD_LIBRARY_PATH</code>?</p>\n\n<p><strong>Edits:</strong></p>\n\n<p>@squareskittles comment: I did read and try everything this post suggest but without any changes. The <code>libstdc++-IFX.so.6</code> is still taken from <code>gcc_4.8.3</code></p>\n"}, {"tags": ["c++", "algorithm", "packing", "bin-packing"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1563969794, "post_id": 57182415, "comment_id": 100875681, "body": "The demo on the site you link to does this."}], "answers": [{"tags": [], "owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "is_accepted": true, "score": 1, "last_activity_date": 1564009734, "creation_date": 1564009734, "answer_id": 57192343, "question_id": 57182415, "link": "https://stackoverflow.com/questions/57182415/compute-dimensions-bounding-box-of-packing-algorithm-result/57192343#57192343", "title": "Compute dimensions (bounding box) of packing algorithm result", "body": "<p>To calculate the bounding box that encompasses all the bounding boxes in your list of blocks, you need find the minimum and maximum X and Y and then use that to calculate the width and height of the overall bounding box.</p>\n\n<p>Calculating the maximum width and height of the smaller boxes won't work because that will be the size of the widest and highest of the individual smaller boxes, which won't necessarily be the dimensions of the overall bounding box that encompasses all of them.</p>\n\n<pre><code>float minX = FLT_MAX;\nfloat minY = FLT_MAX;\nfloat maxX = - FLT_MAX;\nfloat maxY = - FLT_MAX;\n\nfor (const Block &amp;block : blocks) {\n\n    if (block.fit) {\n\n        if (block.fit-&gt;x &lt; minX)\n            minX = block.fit-&gt;x;\n\n        if (block.fit-&gt;y &lt; minY)\n            minY = block.fit-&gt;y;\n\n        if (block.fit-&gt;x + block.fit-&gt;w &gt; maxX)\n            maxX = block.fit-&gt;x + block.fit-&gt;w;\n\n        if (block.fit-&gt;y + block.fit-&gt;h &gt; maxY)\n            maxY = block.fit-&gt;y + block.fit-&gt;h;\n\n    }\n\n}\n\n// now that you have the min/max of x and y, calculate overall w and h:\nfloat w = maxX &gt; minX ? maxX - minX : 0.0f;\nfloat h = maxY &gt; minY ? maxY - minY : 0.0f;\n</code></pre>\n"}], "owner": {"reputation": 5298, "user_id": 3405291, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6499e84a22df10a3f4fec15a8bd0d06?s=128&d=identicon&r=PG&f=1", "display_name": "user3405291", "link": "https://stackoverflow.com/users/3405291/user3405291"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 57192343, "answer_count": 1, "score": 0, "last_activity_date": 1564009734, "creation_date": 1563969635, "last_edit_date": 1563974244, "question_id": 57182415, "link": "https://stackoverflow.com/questions/57182415/compute-dimensions-bounding-box-of-packing-algorithm-result", "title": "Compute dimensions (bounding box) of packing algorithm result", "body": "<p>I'm using <a href=\"https://github.com/jakesgordon/bin-packing\" rel=\"nofollow noreferrer\">this</a> binary pack code. I'm using its <a href=\"https://github.com/jakesgordon/bin-packing/blob/master/js/packer.growing.js\" rel=\"nofollow noreferrer\"><code>GrowingPacker</code></a> approach. It works fine, but I have a hard time figuring out the dimensions of the final pack, I mean the bounding box of final result like <code>(xMin, xMax, yMin, yMax)</code>. What is the best approach to find it?</p>\n\n<p>Can I use the final values of <code>x, y, w, h</code> for <a href=\"https://github.com/jakesgordon/bin-packing/blob/master/js/packer.growing.js#L68\" rel=\"nofollow noreferrer\"><code>this.root</code></a> to compute the bounding box?</p>\n\n<p>I'm not sure if it is correct, but currently I'm using a loop like <a href=\"https://github.com/jakesgordon/bin-packing/blob/master/js/packer.growing.js#L50\" rel=\"nofollow noreferrer\">that loop</a> to compute the bounding box of final pack (I'm using C++):</p>\n\n<pre><code>#include &lt;cfloat&gt; // For FLT_MAX\n\nfloat minX = FLT_MAX;\nfloat minY = FLT_MAX;\nfloat maxW = - FLT_MAX;\nfloat maxH = - FLT_MAX;\n\nfor (const Block &amp;block : blocks) {\n\n    if (block.fit) {\n\n        if (block.fit-&gt;x &lt; minX)\n            minX = block.fit-&gt;x;\n\n        if (block.fit-&gt;y &lt; minY)\n            minY = block.fit-&gt;y;\n\n        if (block.fit-&gt;w &gt; maxW)\n            maxW = block.fit-&gt;w;\n\n        if (block.fit-&gt;h &gt; maxH)\n            maxH = block.fit-&gt;h;\n\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "class", "c++11", "initialization", "stdvector"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1563970094, "post_id": 57182390, "comment_id": 100875869, "body": "<code>vector&lt;coordinates&gt; cood = { {4, 5} };</code>"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 11139116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de842bcdbcac402954ef26626e9fbaea?s=128&d=identicon&r=PG&f=1", "display_name": "Cruz", "link": "https://stackoverflow.com/users/11139116/cruz"}, "edited": false, "score": 1, "creation_date": 1563970899, "post_id": 57182649, "comment_id": 100876317, "body": "Thanks, I found the error. It was &quot;vector&lt;coordinates&gt; cood[1]; &quot; ."}, {"owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "reply_to_user": {"reputation": 35, "user_id": 11139116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de842bcdbcac402954ef26626e9fbaea?s=128&d=identicon&r=PG&f=1", "display_name": "Cruz", "link": "https://stackoverflow.com/users/11139116/cruz"}, "edited": false, "score": 0, "creation_date": 1563973387, "post_id": 57182649, "comment_id": 100877873, "body": "@Cruz Yeap. <b>undefined behaviour</b>! See the updated answer."}, {"owner": {"reputation": 35, "user_id": 11139116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de842bcdbcac402954ef26626e9fbaea?s=128&d=identicon&r=PG&f=1", "display_name": "Cruz", "link": "https://stackoverflow.com/users/11139116/cruz"}, "edited": false, "score": 0, "creation_date": 1563973590, "post_id": 57182649, "comment_id": 100877985, "body": "Yes, I saw when I refreshed. Thank you."}], "tags": [], "owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "is_accepted": true, "score": 2, "last_activity_date": 1563972321, "last_edit_date": 1563972321, "creation_date": 1563970334, "answer_id": 57182649, "question_id": 57182390, "link": "https://stackoverflow.com/questions/57182390/how-to-initialize-a-value-to-a-object-decleared-in-a-vector/57182649#57182649", "title": "How to initialize a value to a object decleared in a vector?", "body": "<p>This </p>\n\n<pre><code>vector&lt;coordinates&gt; cood[1];\n</code></pre>\n\n<p>means an array of <code>vector&lt;coordinates&gt;</code> contains one <code>vector&lt;coordinates&gt;</code>. The <code>cood[1]</code> is also wrong, because the array indexing starts from <code>0, 1,..., n-1</code>, not <code>1, 2,..., n</code>. Accessing the out of bound will leads to <a href=\"https://en.cppreference.com/w/cpp/language/ub#Access_out_of_bounds\" rel=\"nofollow noreferrer\">undefined behaviour</a>, hence the posted code has a UB. </p>\n\n<p>You should have <code>cood[0]</code> instead, which means, the first element of the <code>cood</code> array(i.e. of type <code>vector&lt;coordinates&gt;</code>). Obviously the <code>vector&lt;coordinates&gt;</code> has no member <code>x</code> and <code>y</code>, hence you will get compiler error.</p>\n\n<hr>\n\n<p>You probably mean to do</p>\n\n<pre><code>vector&lt;coordinates&gt; cood(1);\n</code></pre>\n\n<p>which is a <em>vector of coordinates</em> with one <code>coordinates</code> element, that will be default initialized by the default-constructor generated by the compiler.</p>\n\n<p>But, you can do directly <em><a href=\"https://en.cppreference.com/w/cpp/language/list_initialization\" rel=\"nofollow noreferrer\">brace-list-initialization</a></em> for the trivial types like:</p>\n\n<pre><code>std::vector&lt;coordinates&gt; cood{ {4, 5} };\n</code></pre>\n\n<p>which does the same as you meant to do.</p>\n"}], "owner": {"reputation": 35, "user_id": 11139116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de842bcdbcac402954ef26626e9fbaea?s=128&d=identicon&r=PG&f=1", "display_name": "Cruz", "link": "https://stackoverflow.com/users/11139116/cruz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 57182649, "answer_count": 1, "score": 1, "last_activity_date": 1563973118, "creation_date": 1563969587, "last_edit_date": 1563973118, "question_id": 57182390, "link": "https://stackoverflow.com/questions/57182390/how-to-initialize-a-value-to-a-object-decleared-in-a-vector", "title": "How to initialize a value to a object decleared in a vector?", "body": "<p>Well, my question is how can I set a value to the object <code>cood</code> of class <code>coordinates</code> created in a vector.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nclass coordinates\n{\npublic:\n    short int x;\n    short int y;\n};\n\nint main()\n{\n    vector&lt;coordinates&gt; cood[1];\n    cood[1].x=(short int)4;\n    cood[1].y=(short int)5;\n\n    return 0;\n}\n</code></pre>\n\n<p>I am getting this error</p>\n\n<pre><code>class std::vector&lt;coordinates&gt;' has no member named 'y'.    \n(for both x and y).\n</code></pre>\n\n<p>I have tried different methods but always get some error.</p>\n"}, {"tags": ["c++", "argv"], "comments": [{"owner": {"reputation": 6021, "user_id": 206404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497437666710e8b13ee168bd7b62fcba?s=128&d=identicon&r=PG", "display_name": "Stephen Newell", "link": "https://stackoverflow.com/users/206404/stephen-newell"}, "edited": false, "score": 1, "creation_date": 1563969667, "post_id": 57182320, "comment_id": 100875609, "body": "Can you give an example of how somebody would use your program?  For example, <code>your-program a.txt folder-b</code>."}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1563969768, "post_id": 57182320, "comment_id": 100875660, "body": "What is your question?"}, {"owner": {"reputation": 1, "user_id": 11829909, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5IQrCDTIruM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reJJB-bprJy1pMYGTBnL8jmxPMhKA/photo.jpg?sz=128", "display_name": "esbu6732", "link": "https://stackoverflow.com/users/11829909/esbu6732"}, "edited": false, "score": 1, "creation_date": 1563970092, "post_id": 57182320, "comment_id": 100875866, "body": "<code>main.cpp filename.txt output.txt</code>"}, {"owner": {"reputation": 1, "user_id": 11829909, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5IQrCDTIruM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reJJB-bprJy1pMYGTBnL8jmxPMhKA/photo.jpg?sz=128", "display_name": "esbu6732", "link": "https://stackoverflow.com/users/11829909/esbu6732"}, "edited": false, "score": 0, "creation_date": 1563970219, "post_id": 57182320, "comment_id": 100875935, "body": "The problem is that after reading the first file, the next file seems to &#39;&#39;point&#39;&#39; to the contents of the previous file."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11829909, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5IQrCDTIruM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reJJB-bprJy1pMYGTBnL8jmxPMhKA/photo.jpg?sz=128", "display_name": "esbu6732", "link": "https://stackoverflow.com/users/11829909/esbu6732"}, "edited": false, "score": 1, "creation_date": 1563981774, "post_id": 57182952, "comment_id": 100882940, "body": "Thank you for your answer! I had to use though <code>namespace fs = std::experimental::filesystem;</code>. It seems that <code>file</code> returns the whole directory together with the file name. How can I retrieve only the file name as a string? For example, <code>input1.txt</code> instead of <code>C:\\...\\...\\input1.txt</code>."}, {"owner": {"reputation": 129, "user_id": 4548698, "user_type": "registered", "profile_image": "https://graph.facebook.com/907392879292292/picture?type=large", "display_name": "Florian Klemme", "link": "https://stackoverflow.com/users/4548698/florian-klemme"}, "reply_to_user": {"reputation": 1, "user_id": 11829909, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5IQrCDTIruM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reJJB-bprJy1pMYGTBnL8jmxPMhKA/photo.jpg?sz=128", "display_name": "esbu6732", "link": "https://stackoverflow.com/users/11829909/esbu6732"}, "edited": false, "score": 0, "creation_date": 1563982222, "post_id": 57182952, "comment_id": 100883178, "body": "Try <code>file.filename()</code>. See here for more information: <a href=\"https://en.cppreference.com/w/cpp/filesystem/path\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/filesystem/path</a> (scroll down, there are a lot of functions you can use)"}], "tags": [], "owner": {"reputation": 129, "user_id": 4548698, "user_type": "registered", "profile_image": "https://graph.facebook.com/907392879292292/picture?type=large", "display_name": "Florian Klemme", "link": "https://stackoverflow.com/users/4548698/florian-klemme"}, "is_accepted": false, "score": 1, "last_activity_date": 1563971268, "creation_date": 1563971268, "answer_id": 57182952, "question_id": 57182320, "link": "https://stackoverflow.com/questions/57182320/read-multiple-files-by-passing-them-in-argv1/57182952#57182952", "title": "Read multiple files by passing them in argv[1]", "body": "<p>I'm not exactly sure what your problem is but maybe this little example can help as a starting point. It shows how you can</p>\n\n<ul>\n<li>Iterate though files in a directory (you need C++17 though)</li>\n<li>Read some number from a file</li>\n<li>Write to another file</li>\n</ul>\n\n<p>Hopefully you can add the rest with no problem. :)</p>\n\n<pre><code>#include &lt;filesystem&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nnamespace fs = std::filesystem;\n\nint main(int argc, char **argv) {\n    std::string input_dir = argv[1];\n    std::string output_file = argv[2];\n\n    std::ofstream out(output_file);\n\n    // Iterate over files in directory\n    for(auto&amp; file : fs::directory_iterator(input_dir)) {\n        std::ifstream in(file.path());\n        // In this example, read a integer number from the current file\n        if (int i; in &gt;&gt; i) {\n            std::cout &lt;&lt; \"Read \" &lt;&lt; i &lt;&lt; \" from \" &lt;&lt; file &lt;&lt; std::endl;\n            // ... and write it to the output file.\n            out &lt;&lt; i &lt;&lt; std::endl;\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 1, "creation_date": 1563978193, "post_id": 57185088, "comment_id": 100880774, "body": "IMO <code>auto i = int{0};</code> is an obfuscated way to write <code>int i = 0;</code>."}, {"owner": {"reputation": 193, "user_id": 11508323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52392146cec0fa85b494f3a1c1722562?s=128&d=identicon&r=PG&f=1", "display_name": "Tiphaine", "link": "https://stackoverflow.com/users/11508323/tiphaine"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1563978518, "post_id": 57185088, "comment_id": 100881006, "body": "Yeah of course, but using auto forces the programmer to initialize his variable. For example you could write <code>int i;</code> but not <code>auto i;</code>"}, {"owner": {"reputation": 129, "user_id": 4548698, "user_type": "registered", "profile_image": "https://graph.facebook.com/907392879292292/picture?type=large", "display_name": "Florian Klemme", "link": "https://stackoverflow.com/users/4548698/florian-klemme"}, "edited": false, "score": 0, "creation_date": 1563981949, "post_id": 57185088, "comment_id": 100883027, "body": "Keep in mind <code>argv[0]</code> is the programs name, so you might want your <code>int i</code> start at 1."}], "tags": [], "owner": {"reputation": 193, "user_id": 11508323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52392146cec0fa85b494f3a1c1722562?s=128&d=identicon&r=PG&f=1", "display_name": "Tiphaine", "link": "https://stackoverflow.com/users/11508323/tiphaine"}, "is_accepted": false, "score": 2, "last_activity_date": 1563977848, "creation_date": 1563977848, "answer_id": 57185088, "question_id": 57182320, "link": "https://stackoverflow.com/questions/57182320/read-multiple-files-by-passing-them-in-argv1/57185088#57185088", "title": "Read multiple files by passing them in argv[1]", "body": "<p>I want to complete @Florian Klemme but I cannot comment.</p>\n\n<p>There is a little example of how to iterate through command line parameters :</p>\n\n<pre><code>int main(int argc, char **argv) \n{\n    for (auto i = int{0}; i &lt; argc; ++i) {\n        // do something with argv[i];\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11829909, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5IQrCDTIruM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reJJB-bprJy1pMYGTBnL8jmxPMhKA/photo.jpg?sz=128", "display_name": "esbu6732", "link": "https://stackoverflow.com/users/11829909/esbu6732"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1563977848, "creation_date": 1563969320, "question_id": 57182320, "link": "https://stackoverflow.com/questions/57182320/read-multiple-files-by-passing-them-in-argv1", "title": "Read multiple files by passing them in argv[1]", "body": "<p>This might be a basic question, but I am new to C++, so I would appreciate your understanding.</p>\n\n<p>What I am trying to do is to read files from a folder and pass one of them at a time in argv[1], get some results from that file, write them in an output file specified in argv[2], then the same for the next file, and so on.</p>\n\n<p>I guess it has something to do with pointers but I am not sure how to fix this.</p>\n\n<p>Thank you for any input!</p>\n\n<p>Here is what I have so far:</p>\n\n<pre><code>vector&lt;string&gt; getFilenames(string folder)\n{\n    vector&lt;string&gt; names;\n    string search_path = folder + \"/*.*\";\n    WIN32_FIND_DATA fd;\n    HANDLE hFind = ::FindFirstFile(search_path.c_str(), &amp;fd);\n    if (hFind != INVALID_HANDLE_VALUE) {\n        do {\n           // read all (real) files in current folder\n           // , delete '!' read other 2 default folder . and ..\n               if (!(fd.dwFileAttributes &amp; FILE_ATTRIBUTE_DIRECTORY)) {\n            names.push_back(fd.cFileName);\n           }\n        } while (::FindNextFile(hFind, &amp;fd));\n        ::FindClose(hFind);\n    }\n\n   return names;\n}\n\n\nint main(int argc, char **argv) {\n\n    ofstream fileout(argv[2], ios::out | ios::app);\n    int a, b, c;\n\n    vector&lt;string&gt; filenames = getFilenames(\"folder path\");\n    istringstream iss;\n\n    for (int i = 0; i &lt; filenames.size(); i++) {\n        iss.str(filenames[i]);\n        iss &gt;&gt; argv[1];\n        if (readFile(a, b, c, argv[1]) == 0) {\n\n            /* do something */\n        }\n    }\n\n    fileout.close();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "sorting", "matrix", "struct"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1563968935, "post_id": 57182127, "comment_id": 100875245, "body": "Please don&#39;t use online judge or competition sites as a basic learning resource, they won&#39;t really teach you anything useful other than being good at such sites and not much else. Instead I suggest you <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list/388282#388282\">get a few good books</a> to read. If you switched to better learning resources you wouldn&#39;t (hopefully) have such bad habits as using one-based array indexes (among other things)."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1563969052, "post_id": 57182127, "comment_id": 100875296, "body": "As a possible hint about what your problem <i>might</i> be: You have an off-by-one error, where you <i>will</i> go out of bounds of the initialized data in the <code>data</code> array. And if you had learned C++ properly then you probably would not have that error."}, {"owner": {"reputation": 23, "user_id": 10692384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea821e01e32b8bda5012ec1778ac5aa?s=128&d=identicon&r=PG&f=1", "display_name": "antoniu200", "link": "https://stackoverflow.com/users/10692384/antoniu200"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1563969205, "post_id": 57182127, "comment_id": 100875375, "body": "@Someprogrammerdude I did read some books, but they only initialized me in programming. Also, those are the ones that taught me this one-based index programming. And since then (5 years ago), I&#39;ve been programming this way. I try my best to get rid of this habit, however, it isn&#39;t easy, as it feels like something instinctive by now. Online Judges aren&#39;t my learning resource, don&#39;t worry. I only use them for exercising my capabilities of writing correct, clean code.  Also, 600001 is enough to ensure the elements fit, otherwise the Online Judge would give me <code>Caught Fatal Signal 11</code>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1563969447, "post_id": 57182127, "comment_id": 100875495, "body": "In that case I apologize, but still implore you to get one of the <i>good</i> books listed in the (curated) list I linked to. And it should also hopefully explain why putting ` &amp;&amp; i + 1 &lt;= unNul1 + unNul2` will not save you from going out of bounds (hint: the logical operators does <a href=\"https://en.wikipedia.org/wiki/Short-circuit_evaluation\" rel=\"nofollow noreferrer\"><i>short-circuit evaluation</i></a>)."}, {"owner": {"reputation": 23, "user_id": 10692384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea821e01e32b8bda5012ec1778ac5aa?s=128&d=identicon&r=PG&f=1", "display_name": "antoniu200", "link": "https://stackoverflow.com/users/10692384/antoniu200"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1563971017, "post_id": 57182127, "comment_id": 100876386, "body": "@Someprogrammerdude Thanks for the advice, I downloaded those books. When I&#39;ll get more money, I&#39;ll buy them too, they look like they&#39;re worth reading.  Also, just read that Wikipedia page and tested my evaluation (added another element in the array, identical to the last) and it did <i>not</i> go beyond the limits, while the evaluation goes like this:      - Are the first coordinates the same? (<code>true</code>)      - Are the second coords the same? (<code>true</code>)      - Is <code>i &lt;= unNul1 + unNul2 + 1</code>? (<code>false</code>)   If you still think it does, please give me some reasoning, as I don&#39;t understand why."}, {"owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 0, "creation_date": 1563971200, "post_id": 57182127, "comment_id": 100876506, "body": "Did you check the amount of memory you are using ? The Judge fixed a limit"}, {"owner": {"reputation": 23, "user_id": 10692384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea821e01e32b8bda5012ec1778ac5aa?s=128&d=identicon&r=PG&f=1", "display_name": "antoniu200", "link": "https://stackoverflow.com/users/10692384/antoniu200"}, "reply_to_user": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 0, "creation_date": 1563971883, "post_id": 57182127, "comment_id": 100876960, "body": "@Damien I&#39;m sorry to be rude, but did <i>you</i>? It&#39;s way under the 64 MB limit for the global variables and way under the 8 MB for the locals."}, {"owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 0, "creation_date": 1563972664, "post_id": 57182127, "comment_id": 100877458, "body": "I just calculated that your array has a size of 9.6MB. Use of <code>sort</code> increases the memory effectively used. And in your question it was not clear what 64MB/8MB effectively refer to. I did not check the on line text. Sorry to have bothered you"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 3, "creation_date": 1563974653, "post_id": 57182127, "comment_id": 100878602, "body": "BTW, those are <a href=\"https://en.wikipedia.org/wiki/Sparse_matrix\" rel=\"nofollow noreferrer\">sparse matrices</a>."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10692384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea821e01e32b8bda5012ec1778ac5aa?s=128&d=identicon&r=PG&f=1", "display_name": "antoniu200", "link": "https://stackoverflow.com/users/10692384/antoniu200"}, "edited": false, "score": 0, "creation_date": 1563981520, "post_id": 57183140, "comment_id": 100882791, "body": "Just submitted the solution with <code>i + 1 &lt;= unNul1 + unNul2</code> first. Same result, same tests fail. Any other advice?"}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1563971843, "creation_date": 1563971843, "answer_id": 57183140, "question_id": 57182127, "link": "https://stackoverflow.com/questions/57182127/sum-of-two-rare-matrices-read-as-coordinate-x-coordinate-y-and-a-value/57183140#57183140", "title": "Sum of two &#39;rare&#39; matrices, read as coordinate X, coordinate Y and a value", "body": "<p>If you have the logical AND operator <code>&amp;&amp;</code>, and the left-hand side expression is <code>false</code> then the right-hand side expression is not evaluated. This is called <a href=\"https://en.wikipedia.org/wiki/Short-circuit_evaluation\" rel=\"nofollow noreferrer\"><em>short-circuit evaluation</em></a>.</p>\n\n<p>It also means that the left-hand side <em>must</em> be evaluated first, before the code know if the right-hand side needs to be evaluated or not.</p>\n\n<p>Now lets take a conditional expression from your code, and simplify it a little:</p>\n\n<pre><code>data[i + 1].coord1 == data[i].coord1 &amp;&amp; i + 1 &lt;= unNul1 + unNul2\n</code></pre>\n\n<p>This is two sub-conditions combined with the <code>&amp;&amp;</code> operator:</p>\n\n<ol>\n<li>The left-hand side <code>data[i + 1].coord1 == data[i].coord1</code>, and</li>\n<li>The right-hand side <code>i + 1 &lt;= unNul1 + unNul2</code></li>\n</ol>\n\n<p>Due to the short-circuit nature of the <code>&amp;&amp;</code> operator, the left-hand side (<code>data[i + 1].coord1 == data[i].coord1</code>) must be evaluated first before the right-hand side (<code>i + 1 &lt;= unNul1 + unNul2</code>).</p>\n\n<p>Now if <code>i</code> happens to be equal to <code>unNul1 + unNul2</code>, then the left-hand side expression will use an index that is out of bounds by one.</p>\n\n<p>To not go out of bounds, you need to check the index <code>i</code> <em>first</em>, which is easiest done by switching the order of the condition to</p>\n\n<pre><code>i + 1 &lt;= unNul1 + unNul2 &amp;&amp; data[i + 1].coord1 == data[i].coord1\n</code></pre>\n\n<p>Now <code>i + 1</code> will not be out of bounds.</p>\n\n<hr>\n\n<p>As for why it's important it's because uninitialized data will have <em>indeterminate</em> values, and using them in almost all ways will lead to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><em>undefined behavior</em></a>. And with the loop condition as you currently have it, then you <em>will</em> use an index into the parts of the array <code>data</code> that is uninitialized.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 10692384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea821e01e32b8bda5012ec1778ac5aa?s=128&d=identicon&r=PG&f=1", "display_name": "antoniu200", "link": "https://stackoverflow.com/users/10692384/antoniu200"}, "edited": false, "score": 0, "creation_date": 1564133176, "post_id": 57205577, "comment_id": 100938492, "body": "Well, since I didn&#39;t really understand much of your code, I decided to see how the Online Judge would react to it. Guess what? Apparently, this also gets 65 points. Also, yes, if the resulting value of two elements is zero, that final element has to be omitted from the output.  In such conditions, I&#39;d love to see the official tests, but we cannot."}], "tags": [], "owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": false, "score": 0, "last_activity_date": 1564068559, "creation_date": 1564068559, "answer_id": 57205577, "question_id": 57182127, "link": "https://stackoverflow.com/questions/57182127/sum-of-two-rare-matrices-read-as-coordinate-x-coordinate-y-and-a-value/57205577#57205577", "title": "Sum of two &#39;rare&#39; matrices, read as coordinate X, coordinate Y and a value", "body": "<p>If I've understood the intent of the posted code, the OP tried to imlement this algorithm to sum two sparse matrices:</p>\n\n<ul>\n<li>read the non zero elements of <em>both</em> matrices into a single array big enough to store the maximum number of elements admissible by the problem constraints. Note that the input is well formed and the triplets representing the n.z. elements of the two matrices are already lexicographically sorted (row-major) for each one of those.</li>\n<li>Sort the whole array, lexicographically. Note that in the compare function the <em>value</em> of the n.z. element is considered too.</li>\n<li>Traverse the array and sum the values of two consecutive elements if they have the same coordinates and store the result in the first one. If the resulting value is non zero, the count of n.z. is updated accordingly. The out of bounds accesses, here, were already pointed out.</li>\n<li>Traverse the array a second time to print out the non zero values of the resulting matrix, skipping the values of the successive elements with the same coordinates. Same out of bounds accesses, as before.</li>\n</ul>\n\n<p>Besides the UB due to the accesses out of bounds, it's unclear to me if the accepted solution requires to <em>actually</em> check if the resulting value of each element is non zero.</p>\n\n<p>Even if that is the case, I think that we can take advantage of the already sorted input and incrementally create the resulting matrix by \"merging\" the two sources. In the following snippet (testable <a href=\"https://wandbox.org/permlink/y9uvnt3pDZjBfVrb\" rel=\"nofollow noreferrer\">here</a>) I also simplified the comparisons between two elements, by using a single 64-bit value representing a position instead of two 32-bit coordinates.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;cstdint&gt;\n#include &lt;cassert&gt;\n#include &lt;utility&gt;\n#include &lt;iterator&gt;\n\nconstexpr uint64_t pos_from(uint32_t r, uint32_t c)\n{\n    return (static_cast&lt;uint64_t&gt;(r) &lt;&lt; 32) ^ c;\n}\n\nconstexpr uint32_t row_from(uint64_t pos)\n{\n    return (pos &gt;&gt; 32) &amp; 0xFFFFFFFF;\n}\n\nconstexpr uint32_t col_from(uint64_t pos)\n{\n    return pos &amp; 0xFFFFFFFF;\n}\n\ntemplate &lt;typename T&gt;\nclass SparseMatrix\n{\n    uint32_t rows_{}, cols_{};\n    std::vector&lt;std::pair&lt;uint64_t, T&gt;&gt; nzs_;\npublic:\n    SparseMatrix(uint32_t r, uint32_t c, uint32_t nzs = 0)\n        : rows_{r}, cols_{c}\n    {\n        nzs_.reserve(nzs);\n    }\n\n    std::istream&amp; read_non_zeroes_from(std::istream&amp; is, uint32_t n)\n    {\n        while(n--)\n        {\n            uint32_t r, c;\n            T value;\n            if ( (is &gt;&gt; r &gt;&gt; c &gt;&gt; value)  &amp;&amp;  value)            \n                nzs_.emplace_back(pos_from(r, c), value);\n        }\n        return is;\n    }\n\n    std::ostream&amp; write_non_zeroes_to(std::ostream&amp; os)\n    {\n        os &lt;&lt; nzs_.size() &lt;&lt; '\\n';\n        for (auto const&amp; i : nzs_)\n            os &lt;&lt; row_from(i.first) &lt;&lt; ' ' &lt;&lt; col_from(i.first) &lt;&lt; ' ' &lt;&lt; i.second &lt;&lt; '\\n';\n        return os;\n    }\n\n    friend SparseMatrix operator+ (SparseMatrix const&amp; a, SparseMatrix const&amp; b)\n    {\n        assert(a.rows_ == b.rows_  &amp;&amp;  a.cols_ == b.cols_);\n        SparseMatrix sum(a.rows_, a.cols_, std::max(a.nzs_.size(), b.nzs_.size()));\n\n        auto i = a.nzs_.cbegin();\n        auto j = b.nzs_.cbegin();\n        auto dest = std::back_inserter(sum.nzs_);\n        while ( i != a.nzs_.cend()  &amp;&amp;  j != b.nzs_.cend() )\n        {\n            if ( i-&gt;first &lt; j-&gt;first )\n            {\n                *dest = *i;\n                ++i;\n            }\n            else if ( j-&gt;first &lt; i-&gt;first )\n            {\n                *dest = *j;\n                ++j;\n            }\n            else\n            {\n                auto sum_value = i-&gt;second + j-&gt;second;\n                if (sum_value)\n                    *dest = {i-&gt;first, sum_value};\n                ++i;\n                ++j;   \n            }\n        }\n        std::copy(i, a.nzs_.cend(), dest);\n        std::copy(j, b.nzs_.cend(), dest);\n        return sum;\n    }\n};\n\nint main()\n{\n    uint32_t n, m, N1, N2;\n    if ( !(std::cin &gt;&gt; n &gt;&gt; m &gt;&gt; N1 &gt;&gt; N2) )\n        std::cerr &lt;&lt; \"Error: unable to read initial data.\\n\";\n\n    SparseMatrix&lt;int32_t&gt; a(n, m, N1);\n    if ( !a.read_non_zeroes_from(std::cin, N1) )\n        std::cerr &lt;&lt; \"Error: unable to read triplets of the first matrix\\n\";\n\n    SparseMatrix&lt;int32_t&gt; b(n, m, N2);\n    if ( !b.read_non_zeroes_from(std::cin, N2) )\n        std::cerr &lt;&lt; \"Error: unable to read triplets of the second matrix.\\n\";\n\n    auto c = a + b;\n    c.write_non_zeroes_to(std::cout);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1564145060, "post_id": 57217367, "comment_id": 100944811, "body": "I&#39;d love to see the official tests too. Note that this program allocates a maximum of 300001 entries for the final matrix, which may be not enough, given the constraints. Also, try implementing only <code>operator&lt;</code>, and use <code>... else if (matrix2[j] &lt; matrix1[i]) ...</code>. There shouldn&#39;t be any difference."}, {"owner": {"reputation": 23, "user_id": 10692384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea821e01e32b8bda5012ec1778ac5aa?s=128&d=identicon&r=PG&f=1", "display_name": "antoniu200", "link": "https://stackoverflow.com/users/10692384/antoniu200"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1564153657, "post_id": 57217367, "comment_id": 100949910, "body": "@Bob__ Yeah, true, could have done that\u2026 4 lines that have no point whatsoever. But anyway, the 300001 limit is fine, since it&#39;s indexed from <code>1</code>, meaning it&#39;ll need one more entry than an array indexed from <code>0</code>."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1564154179, "post_id": 57217367, "comment_id": 100950183, "body": "No, that&#39;s &quot;Ok&quot;, I&#39;m referring to the 1 \u2264 N1, N2 \u2264 300,000 constraint. <i>Both</i> N1 and N2 could be as big as the maximum and the resulting number of non zeroes <i>could</i> be up to N1 + N2. Anyways, if this passes all the tests, it never happens."}, {"owner": {"reputation": 23, "user_id": 10692384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea821e01e32b8bda5012ec1778ac5aa?s=128&d=identicon&r=PG&f=1", "display_name": "antoniu200", "link": "https://stackoverflow.com/users/10692384/antoniu200"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1564154780, "post_id": 57217367, "comment_id": 100950476, "body": "@Bob__ You want to know why that <b><i>never</i></b> happens? Because you cannot do the sum of two matrices of different sizes. And, if you do the sum of two matrices of the same size, the resulting one can&#39;t be double the size. :)"}, {"owner": {"reputation": 23, "user_id": 10692384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea821e01e32b8bda5012ec1778ac5aa?s=128&d=identicon&r=PG&f=1", "display_name": "antoniu200", "link": "https://stackoverflow.com/users/10692384/antoniu200"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1564155480, "post_id": 57217367, "comment_id": 100950820, "body": "Actually, disregard that, the tests should have been over that 300001 limit, as that&#39;s not the size of the matrix, but the number of triplets given."}], "tags": [], "owner": {"reputation": 23, "user_id": 10692384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea821e01e32b8bda5012ec1778ac5aa?s=128&d=identicon&r=PG&f=1", "display_name": "antoniu200", "link": "https://stackoverflow.com/users/10692384/antoniu200"}, "is_accepted": true, "score": 0, "last_activity_date": 1564153492, "last_edit_date": 1564153492, "creation_date": 1564134322, "answer_id": 57217367, "question_id": 57182127, "link": "https://stackoverflow.com/questions/57182127/sum-of-two-rare-matrices-read-as-coordinate-x-coordinate-y-and-a-value/57217367#57217367", "title": "Sum of two &#39;rare&#39; matrices, read as coordinate X, coordinate Y and a value", "body": "<p>Well, I just managed to get to 100 points. Basically, my mistake was the way I defined the <code>operator&lt;</code>, or in the source I posted here (since then I rewrote it a couple of times), <strong>the fact that I wrote an <code>if</code> statement wrong, not the <code>while</code> one</strong>. Here's the new source:</p>\n\n<pre><code>#include &lt;fstream&gt;\n\nusing namespace std;\n\nifstream cin(\"matrice_rara.in\");\nofstream cout(\"matrice_rara.out\");\n\nstruct matrixEntry {\n    int l, c;\n    int val;\n} matrix1[300001], matrix2[300001], finalMatrix[300001];\n\nbool operator&lt; (const matrixEntry &amp;a, const matrixEntry &amp;b)\n{\n    return a.l &lt; b.l || (a.l == b.l &amp;&amp; a.c &lt; b.c);\n}\n\nbool operator&gt; (const matrixEntry &amp;a, const matrixEntry &amp;b)\n{\n    return a.l &gt; b.l || (a.l == b.l &amp;&amp; a.c &gt; b.c);\n}\n\nint matrixSum(int matrix1Size, int matrix2Size)\n{\n    int i = 1, j = 1, k = 0;\n    while (i &lt;= matrix1Size &amp;&amp; j &lt;= matrix2Size)\n    {\n        if (matrix1[i] &lt; matrix2[j])\n            finalMatrix[++k] = matrix1[i++];\n        else if (matrix1[i] &gt; matrix2[j])\n            finalMatrix[++k] = matrix2[j++];\n        else\n        {\n            finalMatrix[++k] = matrix1[i++];\n            finalMatrix[k].val += matrix2[j++].val;\n            if (finalMatrix[k].val == 0)\n                k--;\n        }\n    }\n    while (i &lt;= matrix1Size)\n        finalMatrix[++k] = matrix1[i++];\n    while (j &lt;= matrix2Size)\n        finalMatrix[++k] = matrix2[j++];\n    return k;\n}\n\nint main()\n{\n    int unNul1, unNul2, lin, col;\n\n    cin &gt;&gt; lin &gt;&gt; col &gt;&gt; unNul1 &gt;&gt; unNul2;\n\n    for (int i = 1; i &lt;= unNul1; i++)\n        cin &gt;&gt; matrix1[i].l &gt;&gt; matrix1[i].c &gt;&gt; matrix1[i].val;\n    for (int i = 1; i &lt;= unNul2; i++)\n        cin &gt;&gt; matrix2[i].l &gt;&gt; matrix2[i].c &gt;&gt; matrix2[i].val;\n\n    int unNull = matrixSum(unNul1, unNul2);\n    cout &lt;&lt; unNull &lt;&lt; \"\\n\";\n    for (int i = 1; i &lt;= unNull; i++)\n    {\n        cout &lt;&lt; finalMatrix[i].l &lt;&lt; \" \" &lt;&lt; finalMatrix[i].c &lt;&lt; \" \" &lt;&lt; finalMatrix[i].val &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10692384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea821e01e32b8bda5012ec1778ac5aa?s=128&d=identicon&r=PG&f=1", "display_name": "antoniu200", "link": "https://stackoverflow.com/users/10692384/antoniu200"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 57217367, "answer_count": 3, "score": 0, "last_activity_date": 1564153492, "creation_date": 1563968632, "question_id": 57182127, "link": "https://stackoverflow.com/questions/57182127/sum-of-two-rare-matrices-read-as-coordinate-x-coordinate-y-and-a-value", "title": "Sum of two &#39;rare&#39; matrices, read as coordinate X, coordinate Y and a value", "body": "<p>As I was going through problems with <code>structs</code> on pbinfo.ro, I found a problem in which I'm given the dimensions of two matrices, the number of <code>nonzero</code> elements for each matrix (N1, respectively N2) and then N1 + N2 groups of 3 numbers as follows:</p>\n\n<ul>\n<li>The coordinates, X and Y</li>\n<li>The value located at those coordinates</li>\n</ul>\n\n<p>What I have to do is write a program that does the sum of these two matrices (they both have the same dimensions) and outputs the sum as given in the input (X, Y, and the value at the coordinates).</p>\n\n<p>Here is the full text of the problem:</p>\n\n<h2><a href=\"https://www.pbinfo.ro/?pagina=probleme&amp;id=1323\" rel=\"nofollow noreferrer\">Matrice-Rara | www.pbinfo.ro</a></h2>\n\n<blockquote>\n  <h2>Requirement</h2>\n  \n  <p>Two rare matrices are given and you \n  are asked to calculate their sum.</p>\n  \n  <p>A matrix <code>A (n, m)</code> is called rare if most of its elements are equal to\n  zero (at least half). Because of the small number of nonzero numbers, a\n  rare matrix <code>A (n, m)</code> with <code>k</code> nonzero elements can be stored using an \n  array <code>X</code> containing <code>k</code> triplets of form (line, column, value) corresponding to \n  the nonzero values of the matrix. Elements of the array <code>X</code> are stored in \n  lexicographical order by <code>line</code> and <code>column</code>.</p>\n  \n  <p>For example, the matrix with <code>n = m = 3</code>:</p>\n\n<pre><code>1 0 2\n0 0 5\n0 2 0\n</code></pre>\n  \n  <p>will be saved in <code>X</code> this way: <code>{(1,1,1), (1,3,2), (2,3,5), (3,2,2)}</code>.</p>\n  \n  <h2>Input data</h2>\n  \n  <p>The input file <code>matrice_rara.in</code> contains on the first line the \n  dimensions of the two matrices\n  <code>n m</code>, representing the number of lines \n  and columns, and <code>N1 N2</code>, the number of nonzero elements of matrix <code>A</code> and \n  matrix <code>B</code>. Then the following <code>N1</code> lines will contain triplets for the \n  matrix <code>A</code> in lexicographical order, and the last <code>N2</code> lines will contain \n  triplets representing the nonzero elements of matrix <code>B</code>, also in \n  lexicographical order.</p>\n  \n  <h2>Output data</h2>\n  \n  <p>The output file <code>matrice_rara.out</code> will contain on the first line the \n  number of nonzero elements in the matrix <code>C</code> and then the matrix \n  itself in the form of triplets in lexicographical order, one per line.</p>\n  \n  <h2>Restrictions and clarifications</h2>\n  \n  <ul>\n  <li><code>1 \u2264 n, m \u2264 1,000,000</code></li>\n  <li><code>1 \u2264 N1, N2 \u2264 300,000</code></li>\n  <li><code>-1,000,000,000 \u2264 A[i][j], B[i][j] \u2264 1,000,000,000</code></li>\n  <li><code>Time Limit: 1 second</code></li>\n  <li><code>Memory Limit: 64 MB / 8 MB</code></li>\n  </ul>\n</blockquote>\n\n<p>What I tried is I read all the triplets in one array of triplets, sorted the array and then added the values of the elements that have the same coordinates into the first element in the array that has the repeating coordinates.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std;\n\nifstream cin(\"matrice_rara.in\");\nofstream cout(\"matrice_rara.out\");\n\nstruct matrix\n{\n    int coord1, coord2;\n    long long val;\n} data[600001];\n\nbool operator&lt;(matrix const &amp;a, matrix const &amp;b)\n{\n    if (a.coord1 == b.coord1) {\n        if (a.coord2 == b.coord2) {\n            return a.val &lt; b.val;\n        }\n        return a.coord2 &lt; b.coord2;\n    }\n    return a.coord1 &lt; b.coord1;\n}\n\nint main()\n{\n    int lin, col, unNul1, unNul2;\n    cin &gt;&gt; lin &gt;&gt; col &gt;&gt; unNul1 &gt;&gt; unNul2;\n\n    for (int i = 1; i &lt;= unNul1 + unNul2; i++)\n        cin &gt;&gt; data[i].coord1 &gt;&gt; data[i].coord2 &gt;&gt; data[i].val;\n\n    sort(data + 1, data + unNul1 + unNul2 + 1);\n\n    int unNull = 0;\n    for (int i = 1; i &lt;= unNul1 + unNul2; i++)\n    {\n        int start = i;\n        while (data[i + 1].coord1 == data[i].coord1 &amp;&amp; data[i + 1].coord2 == data[i].coord2 &amp;&amp; i + 1 &lt;= unNul1 + unNul2)\n            i++, data[start].val += data[i].val;\n        if (data[start].val)\n            unNull++;\n    }\n    cout &lt;&lt; unNull &lt;&lt; \"\\n\";\n    for (int i = 1; i &lt;= unNul1 + unNul2; i++)\n    {\n        if (data[i].val)\n            cout &lt;&lt; data[i].coord1 &lt;&lt; \" \" &lt;&lt; data[i].coord2 &lt;&lt; \" \" &lt;&lt; data[i].val &lt;&lt; \"\\n\";\n        while (data[i + 1].coord1 == data[i].coord1 &amp;&amp; data[i + 1].coord2 == data[i].coord2 &amp;&amp; i + 1 &lt;= unNul1 + unNul2)\n            i++;\n    }\n}\n</code></pre>\n\n<p>The code above gets 65 points out of 100, getting correct answers for 6 of the 9 tests, and Wrong Answer for the rest (no TLE).</p>\n\n<p>Any help?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 2, "creation_date": 1563974016, "post_id": 57182084, "comment_id": 100878240, "body": "This seems like the sort of problem that would be easier for you to solve by using your debugger, rather than asking people to guess the problem based on an incomplete fragment of code. Alternatively, you&#39;ll need to put together a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1563974906, "post_id": 57182084, "comment_id": 100878733, "body": "Note that heap corruption does not necessarily detect right after the corruption happens. It could detect the corruption minutes later. The corruption could be caused by some other part of your code and only detected now."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1563975006, "post_id": 57182084, "comment_id": 100878791, "body": "<b><i>that the issue arises when the smallImageCounter reaches 430. Before that data is stored with no issues</i></b> Is <code>smallImageCounter</code> greater than the size of the array you allocated? Maybe either <code>smallImageRowSize</code> is not equal to <code>getSmallRowSize()</code> or <code>smallImageCollumnSize</code> is not equal to <code>getSmallCollumnSize()</code>"}, {"owner": {"reputation": 43, "user_id": 6255419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e54d8852b6c6213b740a6a60d5227e?s=128&d=identicon&r=PG&f=1", "display_name": "Max Kenney", "link": "https://stackoverflow.com/users/6255419/max-kenney"}, "edited": false, "score": 0, "creation_date": 1563981768, "post_id": 57182084, "comment_id": 100882937, "body": "This is more or less all the code I have, I know its that line specifically that is causing the problem because when I remove it then the first array is able to read as normal. Small image counter has a size of 1764 and the getters for smallRow and smallCollumn directly return the respective variables."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 6255419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e54d8852b6c6213b740a6a60d5227e?s=128&d=identicon&r=PG&f=1", "display_name": "Max Kenney", "link": "https://stackoverflow.com/users/6255419/max-kenney"}, "edited": false, "score": 0, "creation_date": 1563971983, "post_id": 57182146, "comment_id": 100877018, "body": "I feel like such an idiot for missing that, however it didnt fix the error. Thank you though I&#39;m sure that would have caused me issues later on."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "reply_to_user": {"reputation": 43, "user_id": 6255419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e54d8852b6c6213b740a6a60d5227e?s=128&d=identicon&r=PG&f=1", "display_name": "Max Kenney", "link": "https://stackoverflow.com/users/6255419/max-kenney"}, "edited": false, "score": 0, "creation_date": 1563973347, "post_id": 57182146, "comment_id": 100877843, "body": "@MaxKenney well, you have provided neither the error message nor <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, so we can only guess now. Please edit your question accordingly."}, {"owner": {"reputation": 43, "user_id": 6255419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e54d8852b6c6213b740a6a60d5227e?s=128&d=identicon&r=PG&f=1", "display_name": "Max Kenney", "link": "https://stackoverflow.com/users/6255419/max-kenney"}, "edited": false, "score": 0, "creation_date": 1563973632, "post_id": 57182146, "comment_id": 100878022, "body": "Sorry I dont think I understand, I did give the error message I am receiving In the question unless there is a way to receive more information about the error I am unaware of.  I will add the new information I have found from trying to debug but I am not sure it will help in trying to solve the problem"}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "reply_to_user": {"reputation": 43, "user_id": 6255419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e54d8852b6c6213b740a6a60d5227e?s=128&d=identicon&r=PG&f=1", "display_name": "Max Kenney", "link": "https://stackoverflow.com/users/6255419/max-kenney"}, "edited": false, "score": 1, "creation_date": 1563973741, "post_id": 57182146, "comment_id": 100878085, "body": "What you provided was exception description - so there are no compile errors, that&#39;s good. If that didn&#39;t solve your problem and different exceptions pop up, try to extract the non-working code and ask another question."}, {"owner": {"reputation": 43, "user_id": 6255419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e54d8852b6c6213b740a6a60d5227e?s=128&d=identicon&r=PG&f=1", "display_name": "Max Kenney", "link": "https://stackoverflow.com/users/6255419/max-kenney"}, "edited": false, "score": 0, "creation_date": 1563974461, "post_id": 57182146, "comment_id": 100878481, "body": "Oh okay, well in terms of different exceptions I get one on the same line as I suspected before saying it has triggered a breakpoint when a breakpoint isnt there. It then opens a new tab in visual studio and displays the message &#39;wntdll.pdb not loaded&#39;"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1563976277, "post_id": 57182146, "comment_id": 100879560, "body": "<b><i>&#39;wntdll.pdb not loaded&#39;</i></b> Is not really important. You don&#39;t want to debug the OS for Microsoft. Walk up the callstack to your code by switching the stack frame in the debugger."}], "tags": [], "owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "is_accepted": false, "score": 1, "last_activity_date": 1563968715, "creation_date": 1563968715, "answer_id": 57182146, "question_id": 57182084, "link": "https://stackoverflow.com/questions/57182084/a-heap-has-been-corrupted-after-populating-another-2d-array/57182146#57182146", "title": "A heap has been corrupted after populating another 2d array", "body": "<p>You confused <code>new double()</code> with <code>new double[]</code>. The first one allocates a <strong>single</strong> <code>double</code> and initializes it to the value from the parenthesis, where the second one allocates a dynamic array of <code>double</code>s of a size from the square brackets.</p>\n\n<p>Change:</p>\n\n<pre><code>double* baseImage = new double(largeImageRowSize * largeImageCollumnSize);\ndouble* wallyImage = new double(smallImageRowSize * smallImageCollumnSize);\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>double* baseImage = new double[largeImageRowSize * largeImageCollumnSize];\ndouble* wallyImage = new double[smallImageRowSize * smallImageCollumnSize];\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6255419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e54d8852b6c6213b740a6a60d5227e?s=128&d=identicon&r=PG&f=1", "display_name": "Max Kenney", "link": "https://stackoverflow.com/users/6255419/max-kenney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 654, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1563974946, "creation_date": 1563968471, "last_edit_date": 1563974946, "question_id": 57182084, "link": "https://stackoverflow.com/questions/57182084/a-heap-has-been-corrupted-after-populating-another-2d-array", "title": "A heap has been corrupted after populating another 2d array", "body": "<p>I am writing a program where I need to take 2 text files and see where the smaller image is inside the bigger one. For this I need to use 2 dimensional arrays. This has all been going fine when I was just using one however now that I have populated the second array with the data from the smaller image I am getting an error saying: </p>\n\n<blockquote>\n  <p>Unhandled exception at 0x77338519 (ntdll.dll) in  Wheres Wally.exe:\n  0xC0000374: A heap has been corrupted (parameters: 0x773758A0).</p>\n</blockquote>\n\n<p>I have managed to narrow it down to one line in particular which is when the second array is actual given values</p>\n\n<pre><code>//Array Containing Initial Values Of The Base Image\n            double* baseImage = new double(largeImageRowSize * largeImageCollumnSize);\n            //Array Containing Values Of The Small Image\n            double* wallyImage = new double(smallImageRowSize * smallImageCollumnSize);\n\n            //Fill BaseImage with all values from the text file\n            baseImage = read_text(\"Cluttered_scene.txt\", 1024, 768);\n\n            //Allocate 36 arrays for each row (so 49x36 arrays)\n            for (int i = 0; i &lt; getLargeRowSize(); i++)\n                a2dArray[i] = new double[getLargeCollumnSize()];\n\n            //Put data of image into 2d array\n            int largeImageCounter = 0;\n            for (int y = 0; y &lt; getLargeCollumnSize(); y++) {\n                for (int x = 0; x &lt; getLargeRowSize(); x++) {\n\n                    a2dArray[y][x] = baseImage[largeImageCounter];\n                    largeImageCounter++;\n                    //cout &lt;&lt; a2dArray[x][y];\n                }\n            }\n\n            //Fill wallyImage array with all values of the small wally text file\n            wallyImage = read_text(\"Wally_grey.txt\", 49, 36);\n\n            //Allocate 36 arrays for each row (so 49x36 arrays)\n            for (int i = 0; i &lt; getSmallRowSize(); i++)\n                a2dArrayForWally[i] = new double[getSmallCollumnSize()];\n\n            //Put data of image into 2d array\n            int smallImageCounter = 0;\n            for (int y = 0; y &lt; getSmallCollumnSize(); y++) {\n                for (int x = 0; x &lt; getSmallRowSize(); x++) {\n\n                    a2dArrayForWally[y][x] = wallyImage[smallImageCounter];\n                    smallImageCounter++;\n                    //cout &lt;&lt; a2dArray[x][y];\n                }\n            }\n</code></pre>\n\n<p>The line giving the error is within the final for loop</p>\n\n<pre><code>a2dArrayForWally[y][x] = wallyImage[smallImageCounter];\n</code></pre>\n\n<p>So obviously this is something to do with where the memory is being stored, but I'm new to C++ and after googling I cant seem to find whats wrong with my code.</p>\n\n<p>Any help would be greatly appreciated!</p>\n\n<p>Edit:</p>\n\n<p>Through trying to solve the error myself I have discovered that the issue arises when the <code>smallImageCounter</code> reaches 430. Before that data is stored with no issues</p>\n"}, {"tags": ["c++", "inheritance", "operator-overloading"], "comments": [{"owner": {"reputation": 823, "user_id": 6699414, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7e32082597c5678a976d298d91eba29e?s=128&d=identicon&r=PG&f=1", "display_name": "PhoenixBlue", "link": "https://stackoverflow.com/users/6699414/phoenixblue"}, "edited": false, "score": 0, "creation_date": 1563968067, "post_id": 57181783, "comment_id": 100874754, "body": "If you cast the parent to child, then you can use the comparison operator"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1563968202, "post_id": 57181783, "comment_id": 100874834, "body": "why do you have a double comparison in the first place? Maybe it is something obvious, but I dont see it.  Why is <code>return IsEqual(other);</code>  not sufficient?"}, {"owner": {"reputation": 183, "user_id": 11373693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2fe0c4087a319ee9d61ff5a360887a2?s=128&d=identicon&r=PG&f=1", "display_name": "user11373693", "link": "https://stackoverflow.com/users/11373693/user11373693"}, "edited": false, "score": 0, "creation_date": 1563968540, "post_id": 57181783, "comment_id": 100875030, "body": "If StateGroup contains a State I need to operator ==  between them to return true. But i need it in both ways.  StateGroup == State and State == StateGroup."}, {"owner": {"reputation": 183, "user_id": 11373693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2fe0c4087a319ee9d61ff5a360887a2?s=128&d=identicon&r=PG&f=1", "display_name": "user11373693", "link": "https://stackoverflow.com/users/11373693/user11373693"}, "reply_to_user": {"reputation": 823, "user_id": 6699414, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7e32082597c5678a976d298d91eba29e?s=128&d=identicon&r=PG&f=1", "display_name": "PhoenixBlue", "link": "https://stackoverflow.com/users/6699414/phoenixblue"}, "edited": false, "score": 0, "creation_date": 1563968863, "post_id": 57181783, "comment_id": 100875206, "body": "@PhoenixBlue I cannot cast parent to child. There is vector inside child. If I cast parent to child, it will try to access some random memory."}], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 11373693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2fe0c4087a319ee9d61ff5a360887a2?s=128&d=identicon&r=PG&f=1", "display_name": "user11373693", "link": "https://stackoverflow.com/users/11373693/user11373693"}, "edited": false, "score": 0, "creation_date": 1563973156, "post_id": 57182720, "comment_id": 100877731, "body": "It would not work with inheritance. <code>A&amp; pa00 = b00; A&amp; pa01 = b01; std::cout &lt;&lt; (pa00 == pa01) &lt;&lt; std::endl;</code>"}, {"owner": {"reputation": 183, "user_id": 11373693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2fe0c4087a319ee9d61ff5a360887a2?s=128&d=identicon&r=PG&f=1", "display_name": "user11373693", "link": "https://stackoverflow.com/users/11373693/user11373693"}, "edited": false, "score": 0, "creation_date": 1563973388, "post_id": 57182720, "comment_id": 100877876, "body": "non member functions seemed elegant to me too, but I need to compare <code>State</code> and <code>StateGroup</code> pointed by <code>State*</code> or  <code>State&amp;</code>"}], "tags": [], "owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "is_accepted": false, "score": 0, "last_activity_date": 1563970534, "creation_date": 1563970534, "answer_id": 57182720, "question_id": 57181783, "link": "https://stackoverflow.com/questions/57181783/how-to-define-a-comparison-between-a-child-and-a-parent/57182720#57182720", "title": "How to define a comparison between a child and a parent", "body": "<p>I think you can redefine the operator in both directions.</p>\n\n<p>Here is an example that worked with me:</p>\n\n<p><em>.h</em>:</p>\n\n<pre><code>class B;\n\nclass A\n{\n    protected:\n        int a;\n        int b;\n\n    public:\n        A(int aa, int bb);\n\n    friend bool operator==(const A &amp; lhs, const B &amp; rhs);\n    friend bool operator==(const B &amp; lhs, const A &amp; rhs);\n};\n\nclass B : public A\n{\n    protected:\n        int c;\n\n    public:\n        B(int aa, int bb, int cc);\n};\n</code></pre>\n\n<p><em>.cpp</em>:</p>\n\n<pre><code>A::A(int aa, int bb) : a(aa), b(bb)\n{}\nB::B(int aa, int bb, int cc) : A(aa, bb), c(cc)\n{}\n\nbool operator==(const A &amp; lhs, const B &amp; rhs)\n{\n    return (lhs.a == rhs.a) &amp;&amp; (lhs.b == rhs.b);\n}\n\nbool operator==(const B &amp; lhs, const A &amp; rhs)\n{\n    return (lhs.a == rhs.a) &amp;&amp; (lhs.b == rhs.b);\n}\n</code></pre>\n\n<p>I have made the following test:</p>\n\n<pre><code>int main()\n{\n    A a1(2, 5);\n    B b1(2, 5, 0);\n\n    std::cout &lt;&lt; (a1 == b1) &lt;&lt; std::endl;\n    std::cout &lt;&lt; (b1 == a1) &lt;&lt; std::endl;\n\n    B b2(3, 4, 2);\n\n    std::cout &lt;&lt; (a1 == b2) &lt;&lt; std::endl;\n    std::cout &lt;&lt; (b2 == a1) &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>As expected, it outputs:</p>\n\n<blockquote>\n  <p>1<br/>\n  1<br/>\n  0<br/>\n  0<br/></p>\n</blockquote>\n\n<p>I hope it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 183, "user_id": 11373693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2fe0c4087a319ee9d61ff5a360887a2?s=128&d=identicon&r=PG&f=1", "display_name": "user11373693", "link": "https://stackoverflow.com/users/11373693/user11373693"}, "is_accepted": true, "score": 0, "last_activity_date": 1569781591, "last_edit_date": 1569781591, "creation_date": 1563971061, "answer_id": 57182880, "question_id": 57181783, "link": "https://stackoverflow.com/questions/57181783/how-to-define-a-comparison-between-a-child-and-a-parent/57182880#57182880", "title": "How to define a comparison between a child and a parent", "body": "<p>I did it.</p>\n\n<p>I have made virtual <code>operator ==</code> in parent and it calls of <code>other.IsEqual</code></p>\n\n<pre><code>virtual bool operator==(const IState&amp; other)const { other.IsEqual(*this); }\n</code></pre>\n\n<p>And then redefined it in StateGroup to </p>\n\n<pre><code>virtual bool operator==(const IState&amp; other)const { return IsEqual(other); }\n</code></pre>\n\n<p>Double comparison is removed and it is still ensured when comparing State and StateGroup, <code>StateGroup::IsEqual</code> is used in both ways.</p>\n\n<pre><code>class IState {\n    //cannot copy/assign\n    IState(const IState&amp; s) {}\n    IState&amp; operator=(const IState&amp;) { return *this; }\nprotected:\n    //protected constructor makes it abstract\n    IState() {}\n\n    virtual bool IsEqual(const IState&amp; other)const { return this == &amp;other; }\npublic:\n    virtual ~IState() {}\n\n    //bool operator==(const IState&amp; other)const { return IsEqual(other) || other.IsEqual(*this); }\n    virtual bool operator==(const IState&amp; other)const { other.IsEqual(*this); }\n    bool operator!=(const IState&amp; other)const { return !(*this == other); }\n};\n\nclass State : public IState {\npublic:\n    State() {}\n};\n\nclass StateGroup : public State {\n    vector&lt;State*&gt; states;\n\n    //if parent would be equal, child is equal too\n    //else need to check vector for a equal ptr\n    //it could be called recursively if needed\nprotected:\n    virtual bool IsEqual(const IState&amp; other)const {\n        return State::IsEqual(other) ||\n            find(states.begin(), states.end(), &amp;other) != states.end();\n    }\n\npublic:\n    StateGroup() {}\n    virtual bool AddState(State&amp; st) {\n        if (find(states.begin(), states.end(), &amp;st) != states.end()) return false;\n        states.push_back(&amp;st);\n        return true;\n    }\n    virtual bool operator==(const IState&amp; other)const { return IsEqual(other); }\n};\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 11373693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2fe0c4087a319ee9d61ff5a360887a2?s=128&d=identicon&r=PG&f=1", "display_name": "user11373693", "link": "https://stackoverflow.com/users/11373693/user11373693"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 57182880, "answer_count": 2, "score": 0, "last_activity_date": 1569781604, "creation_date": 1563967443, "last_edit_date": 1569781604, "question_id": 57181783, "link": "https://stackoverflow.com/questions/57181783/how-to-define-a-comparison-between-a-child-and-a-parent", "title": "How to define a comparison between a child and a parent", "body": "<p>I am creating an state machine, where state is a class. I need to be able group some states in stategroups. Those groups inherit from states (very similar behavior). I need to be able to compare state with groups same way I am comparing states <code>operator ==</code>.</p>\n\n<p>What is the best way to do this (in C++03 and C++11)? Is there an idiom or pattern? </p>\n\n<p>I've made virtual method <code>IsEqual</code> and redefined it in stategroup. \n<code>Operator ==</code> calls it twice like: <code>return (lhs == rhs) || (rhs == lhs)</code>.\nBut It seems to complicated. And I am not sure if it is clear and readeble.</p>\n\n<pre><code>//Simplified version of the code\n\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std;\n\n// A state, which can be transioned from/to, and which can represent the current state\nclass IState {\n    //cannot copy/assign\n    IState(const IState&amp; s) {}\n    IState&amp; operator=(const IState&amp;) { return *this; }\nprotected:\n    //protected constructor makes it abstract\n    IState() {}\n\n    virtual bool IsEqual(const IState&amp; other)const { return this == &amp;other; }\npublic:\n    virtual ~IState() {}\n\n    bool operator==(const IState&amp; other)const { return IsEqual(other) || other.IsEqual(*this); }\n    bool operator!=(const IState&amp; other)const { return !(*this == other); }\n\n\n};\n\n\n\n\nclass State : public IState {\npublic:\n    State() {}\n};\n\nclass StateGroup : public State {\n    vector&lt;State*&gt; states;\n\n    //if parent would be equal, child is equal too\n    //else need to check vector for a equal ptr\n    //it could be called recursively if needed\n    virtual bool IsEqual(const IState&amp; other)const {\n        return State::IsEqual(other) ||\n            find(states.begin(), states.end(), &amp;other) != states.end();\n    }\npublic:\n    StateGroup() {}\n    virtual bool AddState(State&amp; st) {\n        if (find(states.begin(), states.end(), &amp;st) != states.end()) return false;\n        states.push_back(&amp;st);\n        return true;\n    }\n};\n\n\n//see if it is working\n\nint main()\n{\n    State s1, s2;\n    StateGroup sg1, sg2;\n    sg1.AddState(s1);\n    sg2.AddState(s2);\n\n    State* ps = &amp;s1;\n    bool b;\n\n    cout &lt;&lt; boolalpha;\n\n    cout &lt;&lt; \"states\" &lt;&lt; endl;\n    b = s1 == *ps;\n    cout &lt;&lt; \"result of s1 == *ps is \" &lt;&lt; b &lt;&lt; \" expected true\" &lt;&lt; endl;\n    b = s1 != *ps;\n    cout &lt;&lt; \"result of s1 != *ps is \" &lt;&lt; b &lt;&lt; \" expected false\" &lt;&lt; endl;\n\n    b = s1 == s2;\n    cout &lt;&lt; \"result of s1 == s2 is \" &lt;&lt; b &lt;&lt; \" expected false\" &lt;&lt; endl;\n    b = s1 != s2;\n    cout &lt;&lt; \"result of s1 != s2 is \" &lt;&lt; b &lt;&lt; \" expected true\" &lt;&lt; endl;\n\n    cout &lt;&lt; \"groups\" &lt;&lt; endl;\n    b = sg1 == sg2;\n    cout &lt;&lt; \"result of sg1 == sg2 is \" &lt;&lt; b &lt;&lt; \" expected false\" &lt;&lt; endl;\n    b = sg1 != sg2;\n    cout &lt;&lt; \"result of sg1 != sg2 is \" &lt;&lt; b &lt;&lt; \" expected true\" &lt;&lt; endl;\n\n    cout &lt;&lt; \"states and groups\" &lt;&lt; endl;\n    b = s1 == sg1;\n    cout &lt;&lt; \"result of s1 == sg1 is \" &lt;&lt; b &lt;&lt; \" expected true\" &lt;&lt; endl;\n    b = s1 != sg1;\n    cout &lt;&lt; \"result of s1 != sg1 is \" &lt;&lt; b &lt;&lt; \" expected false\" &lt;&lt; endl;\n\n    b = s1 == sg2;\n    cout &lt;&lt; \"result of s1 == sg2 is \" &lt;&lt; b &lt;&lt; \" expected false\" &lt;&lt; endl;\n    b = s1 != sg2;\n    cout &lt;&lt; \"result of s1 != sg2 is \" &lt;&lt; b &lt;&lt; \" expected true\" &lt;&lt; endl;\n\n    b = sg1 == s1;\n    cout &lt;&lt; \"result of sg1 == s1 is \" &lt;&lt; b &lt;&lt; \" expected true\" &lt;&lt; endl;\n    b = sg1 != s1;\n    cout &lt;&lt; \"result of sg1 != s1 is \" &lt;&lt; b &lt;&lt; \" expected false\" &lt;&lt; endl;\n\n    b = sg1 == s2;\n    cout &lt;&lt; \"result of sg1 == s2 is \" &lt;&lt; b &lt;&lt; \" expected false\" &lt;&lt; endl;\n    b = sg1 != s2;\n    cout &lt;&lt; \"result of sg1 != s2 is \" &lt;&lt; b &lt;&lt; \" expected true\" &lt;&lt; endl;\n\n    cout &lt;&lt; \"state and state pointer pointing to group\" &lt;&lt; endl;\n    ps = &amp;sg1;\n    b = s1 == *ps;\n    cout &lt;&lt; \"result of s1 == *ps is \" &lt;&lt; b &lt;&lt; \" expected true\" &lt;&lt; endl;\n    b = s1 != *ps;\n    cout &lt;&lt; \"result of s1 != *ps is \" &lt;&lt; b &lt;&lt; \" expected false\" &lt;&lt; endl;\n\n    b = s2 == *ps;\n    cout &lt;&lt; \"result of s2 == *ps is \" &lt;&lt; b &lt;&lt; \" expected false\" &lt;&lt; endl;\n    b = s2 != *ps;\n    cout &lt;&lt; \"result of s2 != *ps is \" &lt;&lt; b &lt;&lt; \" expected true\" &lt;&lt; endl;\n    return 0;\n};\n</code></pre>\n\n<p>I am getting output as expected.\nUnit tests in original code passed also.\nTested in IAR Embedded Workbench (Renesas V850), Visual studio and Code::Blocks(GCC). </p>\n\n<p>So I think it works. But I do not like that double comparation in <code>operator==</code>.</p>\n"}, {"tags": ["c#", "c++", "visual-studio", "dllimport", "dllexport"], "comments": [{"owner": {"reputation": 1190, "user_id": 11291455, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DeXw9UBXxKQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reVpCjCZyaprKSzlRLY9Dy1QdNo1w/mo/photo.jpg?sz=128", "display_name": "Steve Todd", "link": "https://stackoverflow.com/users/11291455/steve-todd"}, "edited": false, "score": 0, "creation_date": 1563967091, "post_id": 57181533, "comment_id": 100874227, "body": "Have you tried examining your DLL with a tool like Depends? C++ has a habit of applying name mangling to function names, so the actual published name may only start with what you are expecting. The other thing to check is that both projects are targeting the same number of bits (32 or 64 bit Windows)."}, {"owner": {"reputation": 931, "user_id": 2763895, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c79ed41f2de6232396735c8088baef4c?s=128&d=identicon&r=PG&f=1", "display_name": "Hamed_gibago", "link": "https://stackoverflow.com/users/2763895/hamed-gibago"}, "reply_to_user": {"reputation": 1190, "user_id": 11291455, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DeXw9UBXxKQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reVpCjCZyaprKSzlRLY9Dy1QdNo1w/mo/photo.jpg?sz=128", "display_name": "Steve Todd", "link": "https://stackoverflow.com/users/11291455/steve-todd"}, "edited": false, "score": 0, "creation_date": 1563967370, "post_id": 57181533, "comment_id": 100874363, "body": "@SteveTodd Both projects are in x86. Dependency walker didn&#39;t help me. How could I use that? I will send a picture of dll in Depends"}, {"owner": {"reputation": 931, "user_id": 2763895, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c79ed41f2de6232396735c8088baef4c?s=128&d=identicon&r=PG&f=1", "display_name": "Hamed_gibago", "link": "https://stackoverflow.com/users/2763895/hamed-gibago"}, "reply_to_user": {"reputation": 1190, "user_id": 11291455, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DeXw9UBXxKQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reVpCjCZyaprKSzlRLY9Dy1QdNo1w/mo/photo.jpg?sz=128", "display_name": "Steve Todd", "link": "https://stackoverflow.com/users/11291455/steve-todd"}, "edited": false, "score": 0, "creation_date": 1563967763, "post_id": 57181533, "comment_id": 100874580, "body": "@SteveTodd I&#39;ve added Dependency walker in my edited post."}, {"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1563968553, "post_id": 57181533, "comment_id": 100875037, "body": "Make method public."}], "answers": [{"comments": [{"owner": {"reputation": 931, "user_id": 2763895, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c79ed41f2de6232396735c8088baef4c?s=128&d=identicon&r=PG&f=1", "display_name": "Hamed_gibago", "link": "https://stackoverflow.com/users/2763895/hamed-gibago"}, "edited": false, "score": 0, "creation_date": 1563968658, "post_id": 57182058, "comment_id": 100875109, "body": "@EyIM Thanks for the answer. I&#39;m not professional in c++. Would you give me some reference or book to get better in c++. Any reference that is highlighted for you?"}, {"owner": {"reputation": 5170, "user_id": 1410246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfce8c2aa420b800bb7595ac5fbc986d?s=128&d=identicon&r=PG", "display_name": "EylM", "link": "https://stackoverflow.com/users/1410246/eylm"}, "reply_to_user": {"reputation": 931, "user_id": 2763895, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c79ed41f2de6232396735c8088baef4c?s=128&d=identicon&r=PG&f=1", "display_name": "Hamed_gibago", "link": "https://stackoverflow.com/users/2763895/hamed-gibago"}, "edited": false, "score": 1, "creation_date": 1563974666, "post_id": 57182058, "comment_id": 100878609, "body": "More about calling conventions: <a href=\"https://www.codeproject.com/Articles/1388/Calling-Conventions-Demystified\" rel=\"nofollow noreferrer\">codeproject.com/Articles/1388/Calling-Conventions-Demystifie&zwnj;&#8203;d</a>"}], "tags": [], "owner": {"reputation": 5170, "user_id": 1410246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfce8c2aa420b800bb7595ac5fbc986d?s=128&d=identicon&r=PG", "display_name": "EylM", "link": "https://stackoverflow.com/users/1410246/eylm"}, "is_accepted": true, "score": 1, "last_activity_date": 1563968381, "creation_date": 1563968381, "answer_id": 57182058, "question_id": 57181533, "link": "https://stackoverflow.com/questions/57181533/c-project-doest-not-defined-entry-point-for-c-dll-written-by-myself/57182058#57182058", "title": "C# project doest not defined entry point for c++ dll written by myself", "body": "<p>You are exporting the function as <code>__stdcall</code> , but declaring it in C# as <code>CallingConvention.Cdecl</code>.</p>\n\n<p>Change the DllImport to:</p>\n\n<p><code>[DllImport(@\"SniReceiver.dll\", CallingConvention = CallingConvention.StdCall)]</code>.</p>\n"}], "owner": {"reputation": 931, "user_id": 2763895, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c79ed41f2de6232396735c8088baef4c?s=128&d=identicon&r=PG&f=1", "display_name": "Hamed_gibago", "link": "https://stackoverflow.com/users/2763895/hamed-gibago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 57182058, "answer_count": 1, "score": 0, "last_activity_date": 1563968767, "creation_date": 1563966644, "last_edit_date": 1563968767, "question_id": 57181533, "link": "https://stackoverflow.com/questions/57181533/c-project-doest-not-defined-entry-point-for-c-dll-written-by-myself", "title": "C# project doest not defined entry point for c++ dll written by myself", "body": "<p>I'm using a <code>c#</code> socket that pass it to receive data from <code>c++</code> DLL and return received result to <code>c#</code> and do other staff in <code>c#</code>.</p>\n\n<p>I have a <code>c++</code> project like this:</p>\n\n<p>SniReceiver.h</p>\n\n<pre><code>#ifdef SNIRECEIVER_EXPORTS\n#define SNIRECEIVER_API __declspec(dllexport)\n#else\n#define SNIRECEIVER_API __declspec(dllimport)\n#endif\n#include &lt;WinSock2.h&gt;\n\nextern \"C\" __declspec(dllexport) int __stdcall receive_socket(DWORD socket);\n</code></pre>\n\n<p>SniReceiver.cpp</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"SniReceiver.h\"\n\n#define DEFAULT_BUFLEN 512\nchar recvbuf[DEFAULT_BUFLEN];\nint recvbuflen = DEFAULT_BUFLEN;\n\nextern \"C\" __declspec(dllexport) int __stdcall receive_socket(DWORD socket)\n{\n    int  iResult = recv((SOCKET)socket, recvbuf, recvbuflen, 0);\n    return iResult;\n}\n</code></pre>\n\n<p>and my c# app:</p>\n\n<pre><code>[DllImport(@\"SniReceiver.dll\", CallingConvention = CallingConvention.Cdecl)]\nprivate static extern int receive_socket(IntPtr sock);\n\nstatic void Main(string[] args)\n{\n    IPEndPoint endpoint = new IPEndPoint(IPAddress.Parse(\"192.168.200.1\"), 80);\n    Socket sListen = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);\n    sListen.Bind(endpoint);\n    sListen.Listen(10);\n    Socket sClient = sListen.Accept();\n\n    int rec= receive_socket(sClient.Handle);\n\n    Console.WriteLine(\"Hello World!\");            \n    Console.ReadKey();\n} \n</code></pre>\n\n<p>when calling <code>int rec= receive_socket(sClient.Handle);</code>\nget error </p>\n\n<blockquote>\n  <p>System.EntryPointNotFoundException: 'Unable to find an entry point named 'receive_socket' in DLL 'SniReceiver.dll'.</p>\n</blockquote>\n\n<p>Remember I've copied <code>SniReceiver.dll</code> beside my <code>c#</code> exe</p>\n\n<p><a href=\"https://i.stack.imgur.com/0ZOmV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0ZOmV.png\" alt=\"Picture with DependencyWalker\"></a></p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1563976713, "post_id": 57181476, "comment_id": 100879851, "body": "Why are you passing pointers to the input floats? Why not pass the input floats by value? Why not pass the output float by reference (to avoid pointers)."}], "answers": [{"comments": [{"owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "edited": false, "score": 0, "creation_date": 1563967301, "post_id": 57181597, "comment_id": 100874320, "body": "Is something wrong ? Why the downvote ? Any explanation ? I would be glad to read it."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 2, "creation_date": 1563967327, "post_id": 57181597, "comment_id": 100874340, "body": "Neither of those is the correct choice. <code>m_Errval</code> is clearly not intended to be modified (and modifying it after a <code>const_cast</code> would be Undefined Behavior). The correct choice would be to make <code>m_Input01</code> a <code>const float*</code> (and make the constructor take a <code>const float*</code> because the input should not be modified. (Wasn&#39;t me who voted btw)."}, {"owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1563967495, "post_id": 57181597, "comment_id": 100874431, "body": "@MaxLanghof Ah I see. Am I correct if I say that he should pass <code>const float *</code> into <code>Mux</code> constructor instead of <code>float *</code> (since he&#39;s not modifying the parameters) ?"}, {"owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1563968179, "post_id": 57181597, "comment_id": 100874818, "body": "@MaxLanghof Thanks for the explanation, I&#39;ve cited it in my edit."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1563976362, "post_id": 57181597, "comment_id": 100879618, "body": "The use of <code>const_cast&lt;&gt;()</code> to remove a const qualifier is one of the biggest red flags in a code review. The result of this operation leads to very brittle code that can at some subsequent point easily lead to broken code because of the potential for causing undefined behavior. As a result I consider the advice  <code>If you really want to do this, you will have to use const_cast.</code> so bad as to be wrong."}, {"owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1564036795, "post_id": 57181597, "comment_id": 100900086, "body": "@MartinYork Yes this is why I specified <i>&quot;If you really want to do this&quot;</i> that is to say: <i>&quot;if you really want to give a <code>const float *</code> to a <code>float *</code>&quot;</i>. I agree, it is a bad idea, but without refactoring, <code>const_cast</code> is the only solution. And he seems to not modify the parameters so since he&#39;s not modifying them, <code>const_cast</code> should still be fine. Undefined behaviour occurs when we try to modify the resulting value."}], "tags": [], "owner": {"reputation": 3693, "user_id": 11455384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e87a1e837a79a0248716b61a930f67fa?s=128&d=identicon&r=PG&f=1", "display_name": "Fareanor", "link": "https://stackoverflow.com/users/11455384/fareanor"}, "is_accepted": true, "score": -1, "last_activity_date": 1563968751, "last_edit_date": 1563968751, "creation_date": 1563966842, "answer_id": 57181597, "question_id": 57181476, "link": "https://stackoverflow.com/questions/57181476/invalid-conversion-from-const-float-to-float-in-c/57181597#57181597", "title": "invalid conversion from &#39;const float*&#39; to &#39;float*&#39; in c++", "body": "<p>You declared <code>m_ErrVal</code> as a <code>const float</code> so <code>&amp;m_ErrVal</code> is a <code>const float *</code>. The constructor of <code>Mux</code> expects a <code>float *</code> not a <code>const float *</code>. This is the error.</p>\n\n<p>If you really want to do this, you will have to use <code>const_cast</code>.</p>\n\n<p>For example <code>const_cast&lt;float*&gt;(&amp;m_ErrVal)</code>. Or you can remove the const qualifier if not needed, it is yours to choose.</p>\n\n<hr>\n\n<p><strong>EDIT:</strong> But if you do not intend to modify the given <code>float *</code> to the <code>Mux</code> constructor, I think you should pass them as <code>const float *</code> instead of using <code>const_cast</code>.</p>\n\n<p>For more information about the use of <code>const_cast</code>, you can read <em><strong>@MaxLanghof</strong></em> comment or check <a href=\"https://stackoverflow.com/questions/19554841/how-to-use-const-cast/19554871#19554871\">this link</a>.</p>\n"}], "owner": {"reputation": 91, "user_id": 11189825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a22c50dd9b38b21ddbfba468212a78f6?s=128&d=identicon&r=PG&f=1", "display_name": "L3sek", "link": "https://stackoverflow.com/users/11189825/l3sek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1141, "favorite_count": 0, "accepted_answer_id": 57181597, "answer_count": 1, "score": 0, "last_activity_date": 1563968751, "creation_date": 1563966419, "question_id": 57181476, "link": "https://stackoverflow.com/questions/57181476/invalid-conversion-from-const-float-to-float-in-c", "title": "invalid conversion from &#39;const float*&#39; to &#39;float*&#39; in c++", "body": "<p>I have following problem. I have defined C++ class called Mux</p>\n\n<pre><code>class Mux{\npublic:\n    Mux(uint32_t* const bitsArray, const uint32_t control_01, const uint32_t control_02,\n        float* input_01, float* input_02, float* input_03, float* input_04,\n        float* output);\n    virtual ~Mux();\n\n    void Update(void);\n\nprivate:\n\n    uint32_t* m_BitsArray;\n    uint32_t  m_Control01;\n    uint32_t  m_Control02;\n    float*    m_Input01;\n    float*    m_Input02;\n    float*    m_Input03;\n    float*    m_Input04;\n    float*    m_Output;\n\n    uint8_t GetControlValue(uint32_t* const bitsArray, const uint32_t control_01, const uint32_t control_02);\n\n};\n\nMux::Mux(uint32_t* const bitsArray,\n                        const uint32_t control_01, const uint32_t control_02,\n                        float* input_01, float* input_02, float* input_03, float* input_04,\n                        float* output):\n                        m_BitsArray{bitsArray},\n                        m_Control01{control_01},\n                        m_Control02{control_02},\n                        m_Input01{input_01},\n                        m_Input02{input_02},\n                        m_Input03{input_03},\n                        m_Input04{input_04},\n                        m_Output{output}{\n\n}\n\nMux::~Mux() {\n    // TODO Auto-generated destructor stub\n}\n\nvoid Mux::Update(void){\n\n    uint8_t controlValue = GetControlValue(m_BitsArray, m_Control01, m_Control02);\n\n    switch(controlValue){\n\n        case 0:\n            *m_Output = *m_Input01;\n        break;\n\n        case 1:\n            *m_Output = *m_Input02;\n        break;\n\n        case 2:\n            *m_Output = *m_Input03;\n        break;\n\n        case 3:\n            *m_Output = *m_Input04;\n        break;\n\n    }\n\n}\n\nuint8_t Mux::GetControlValue(uint32_t* const bitsArray, const uint32_t control_01, const uint32_t control_02){\n\n    uint8_t controlValue = 0;\n\n    if(Utils::TestBitSet(bitsArray, control_01)){\n        controlValue += 1;\n    }\n\n    if(Utils::TestBitSet(bitsArray, control_02)){\n        controlValue += 2;\n    }\n\n    return controlValue;\n\n}\n</code></pre>\n\n<p>As soon as I attempt to instantiate this class in another class called Test\nI receive <code>error: invalid conversion from 'const float*' to 'float*' [-fpermissive]</code> in compilation process and last argument in Mux class constructor call in Test constructor is underlined.</p>\n\n<pre><code>class Test{\npublic:\n\n    Test(float par01Value, float par02Value);\n    virtual ~Test();\n\n    void Loop(void);\n\nprivate:\n\n    uint32_t m_BitsArray[1] = {0};\n\n    Mux *m_MuxTest;\n\n    const float m_ErrVal = 0.0;\n\n    struct Pars_t{\n        float par01;\n        float par02;\n    };\n\n    struct Vars_t{\n        float var01;\n        float var02;\n        float var03;\n    };\n\n    Vars_t m_Vars = {0.0};\n    Pars_t m_Pars = {0.0};\n\n};\n\n\n\n#define LW_01               (0)\n\n// Byte 01\n#define LSig01              (LW_01*32 + 0x00)\n#define LSig02              (LW_01*32 + 0x01)\n//efine L                   (LW_01*32 + 0x02)\n//efine L                   (LW_01*32 + 0x03)\n//efine L                   (LW_01*32 + 0x04)\n//efine L                   (LW_01*32 + 0x05)\n//efine L                   (LW_01*32 + 0x06)\n//efine L                   (LW_01*32 + 0x07)\n\n// Byte 02\n//efine L                   (LW_01*32 + 0x08)\n//efine L                   (LW_01*32 + 0x09)\n//efine L                   (LW_01*32 + 0x0A)\n//efine L                   (LW_01*32 + 0x0B)\n//efine L                   (LW_01*32 + 0x0C)\n//efine L                   (LW_01*32 + 0x0D)\n//efine L                   (LW_01*32 + 0x0E)\n//efine L                   (LW_01*32 + 0x0F)\n\n// Byte 03\n//efine L                   (LW_01*32 + 0x10)\n//efine L                   (LW_01*32 + 0x11)\n//efine L                   (LW_01*32 + 0x12)\n//efine L                   (LW_01*32 + 0x13)\n//efine L                   (LW_01*32 + 0x14)\n//efine L                   (LW_01*32 + 0x15)\n//efine L                   (LW_01*32 + 0x16)\n//efine L                   (LW_01*32 + 0x17)\n\n// Byte 04\n//efine L                   (LW_01*32 + 0x18)\n//efine L                   (LW_01*32 + 0x19)\n//efine L                   (LW_01*32 + 0x1A)\n//efine L                   (LW_01*32 + 0x1B)\n//efine L                   (LW_01*32 + 0x1C)\n//efine L                   (LW_01*32 + 0x1D)\n//efine L                   (LW_01*32 + 0x1E)\n//efine L                   (LW_01*32 + 0x1F)\n\nTest::Test(float par01Value, float par02Value){\n\n    m_Pars.par01 = par01Value;\n    m_Pars.par02 = par02Value;\n\n    m_MuxTest = new Mux(m_BitsArray, LSig01, LSig02,\n                                            &amp;m_ErrVal,\n                                            &amp;(m_Pars.par01),\n                                            &amp;(m_Pars.par02),\n                                            &amp;m_ErrVal,\n                                            &amp;(m_Vars.var01));\n\n}\n\nvoid Test::Loop(void){\n\n    m_MuxTest-&gt;Update();\n\n}\n\nTest::~Test(){\n    // TODO Auto-generated destructor stub\n}\n\n}\n</code></pre>\n\n<p>I don't understand what I am doing wrong. Can anybody help?</p>\n"}, {"tags": ["c++", "performance", "time", "clock"], "answers": [{"comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 1, "creation_date": 1563966589, "post_id": 57181487, "comment_id": 100873964, "body": "Migh as well use <code>auto</code> instead of <code>high_resolution_clock::time_point</code> :)"}], "tags": [], "owner": {"reputation": 1605, "user_id": 11723965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3ygAu.jpg?s=128&g=1", "display_name": "nivpeled", "link": "https://stackoverflow.com/users/11723965/nivpeled"}, "is_accepted": true, "score": 2, "last_activity_date": 1563966436, "creation_date": 1563966436, "answer_id": 57181487, "question_id": 57181427, "link": "https://stackoverflow.com/questions/57181427/how-to-fix-errors-on-the-program-to-measure-the-performance/57181487#57181487", "title": "How to fix errors on the program to measure the performance", "body": "<p>You forgot to declare and initialize <code>begin</code> and <code>end</code>.</p>\n\n<p>try:</p>\n\n<pre><code>#include &lt;chrono&gt;\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nusing namespace std::chrono;\n\nint main()\n{\n    #define N 2\n\n    // being\n    high_resolution_clock::time_point begin = high_resolution_clock::now();\n\n\n\n    double A[N][N] = {\n        {1.0, 2.0},\n        {2.0, 1.0}\n    };\n\n    double B[N][N] = {\n        {3.0, 1.0},\n        {0.0, 3.0}\n    };\n\n    double C[N][N] = {\n        {0.0, 0.0},\n        {0.0, 0.0}\n    };\n    int i, j, k;\n\n    for(i=0; i&lt;N; i++)\n        for(j=0; j&lt;N; j++)\n            for(k=0; k&lt;N; k++)\n                C[i][j] += A[i][k]*B[k][j];\n\n\n    // end\n    high_resolution_clock::time_point end = high_resolution_clock::now();\n\n\n  // aquire the passed time\n  seconds elapsed_time = duration_cast&lt;seconds&gt;(end - begin);\n  std::cout &lt;&lt; elapsed_time.count() &lt;&lt; \"seconds\" &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "is_accepted": false, "score": 0, "last_activity_date": 1563966658, "creation_date": 1563966658, "answer_id": 57181540, "question_id": 57181427, "link": "https://stackoverflow.com/questions/57181427/how-to-fix-errors-on-the-program-to-measure-the-performance/57181540#57181540", "title": "How to fix errors on the program to measure the performance", "body": "<p>They compiler is telling you that you are using two variables without prior declaration. You must declare variables by specifying their data type before you reference them.</p>\n"}], "owner": {"reputation": 213, "user_id": 10062624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/953be4d13f195a707aa2f631b7ec17ce?s=128&d=identicon&r=PG&f=1", "display_name": "NPP", "link": "https://stackoverflow.com/users/10062624/npp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 57181487, "answer_count": 2, "score": 0, "last_activity_date": 1563966658, "creation_date": 1563966254, "last_edit_date": 1563966458, "question_id": 57181427, "link": "https://stackoverflow.com/questions/57181427/how-to-fix-errors-on-the-program-to-measure-the-performance", "title": "How to fix errors on the program to measure the performance", "body": "<p>I would like to measure the performance of the code about matrix multiplication.</p>\n\n<p>Though I was able to execute a simple program and got the correct answer, my program which I would like to get the result was not able to be compiled successfully.</p>\n\n<p>How can I fix these bugs?</p>\n\n<p>I have tried to execte the below simple program to understand the basic of time measurement in C++.</p>\n\n<p>output </p>\n\n<pre><code>3seconds\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;chrono&gt;\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nusing namespace std::chrono;\n\nint main()\n{\n  // 1. current date and time\n  high_resolution_clock::time_point begin = high_resolution_clock::now();\n\n  // 2. process to take time\n  std::this_thread::sleep_for(seconds(3));\n\n  // 3. current date and time \n  high_resolution_clock::time_point end = high_resolution_clock::now();\n\n  // aquired passed time\n  seconds elapsed_time = duration_cast&lt;seconds&gt;(end - begin);\n  std::cout &lt;&lt; elapsed_time.count() &lt;&lt; \"seconds\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;chrono&gt;\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nusing namespace std::chrono;\n\nint main()\n{\n    #define N 2\n\n    double A[N][N] = {\n        {1.0, 2.0},\n        {2.0, 1.0}\n    };\n\n    double B[N][N] = {\n        {3.0, 1.0},\n        {0.0, 3.0}\n    };\n\n    double C[N][N] = {\n        {0.0, 0.0},\n        {0.0, 0.0}\n    };\n    int i, j, k;\n\n    for(i=0; i&lt;N; i++)\n        for(j=0; j&lt;N; j++)\n            for(k=0; k&lt;N; k++)\n                C[i][j] += A[i][k]*B[k][j];\n\n\n  // aquire the passed time\n  seconds elapsed_time = duration_cast&lt;seconds&gt;(end - begin);\n  std::cout &lt;&lt; elapsed_time.count() &lt;&lt; \"seconds\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ g++ -o clock clock.cpp\nclock.cpp:34:49: error: use of undeclared identifier 'end'\n  seconds elapsed_time = duration_cast&lt;seconds&gt;(end - begin);\n                                                ^\nclock.cpp:34:55: error: use of undeclared identifier 'begin'\n  seconds elapsed_time = duration_cast&lt;seconds&gt;(end - begin);\n                                                      ^\n2 errors generated.\n</code></pre>\n"}, {"tags": ["c++", "android-ndk", "64-bit"], "comments": [{"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1563966315, "post_id": 57181385, "comment_id": 100873820, "body": "Are you sure that each of the pointers in vector is valid one? There are many questionable practices here (starting from using raw pointers)."}, {"owner": {"reputation": 507, "user_id": 4593846, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1095d4be6173b85931b08009701a5167?s=128&d=identicon&r=PG&f=1", "display_name": "dvrer", "link": "https://stackoverflow.com/users/4593846/dvrer"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1563966457, "post_id": 57181385, "comment_id": 100873891, "body": "yes, it worked flawlessly before, the only change was adding 64 build type to the compile process"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 1, "creation_date": 1563969231, "post_id": 57181385, "comment_id": 100875394, "body": "<code>it worked flawlessly before</code> is not an argument. UB means that incorrect code can crash or can pretend that it is &quot;flawless&quot; or can do strange things. I would start from analyzing crashed thread callstack, then static code analysis (clang), then try address sanitizer."}, {"owner": {"reputation": 507, "user_id": 4593846, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1095d4be6173b85931b08009701a5167?s=128&d=identicon&r=PG&f=1", "display_name": "dvrer", "link": "https://stackoverflow.com/users/4593846/dvrer"}, "edited": false, "score": 0, "creation_date": 1563975166, "post_id": 57181385, "comment_id": 100878874, "body": "i was just able to reproduce it with debugger attached on a 64 device, the array size is 1, the i is 0 and the object in the array seems initialized with all its members at the correct values, yet it shows a sigbus error"}, {"owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "edited": false, "score": 1, "creation_date": 1563990142, "post_id": 57181385, "comment_id": 100887081, "body": "What is the type of <code>objectsInTile</code>?"}, {"owner": {"reputation": 507, "user_id": 4593846, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1095d4be6173b85931b08009701a5167?s=128&d=identicon&r=PG&f=1", "display_name": "dvrer", "link": "https://stackoverflow.com/users/4593846/dvrer"}, "reply_to_user": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "edited": false, "score": 0, "creation_date": 1563991448, "post_id": 57181385, "comment_id": 100887668, "body": "@DanAlbert std::vector&lt;MatchObject*&gt;"}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1563995785, "post_id": 57181385, "comment_id": 100889520, "body": "Please share the code of <code>MatchObject::isMainObject()</code>. Is <b>MatchObject</b> a derived class?"}, {"owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "edited": false, "score": 0, "creation_date": 1564001208, "post_id": 57181385, "comment_id": 100891690, "body": "I don&#39;t suppose it&#39;s a vector with a custom allocator? <code>SIGBUS</code> often means that that some memory (in this case, the memory pointed to by <code>in</code>) that was allocated with a different alignment than the objects it is storing."}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "reply_to_user": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "edited": false, "score": 0, "creation_date": 1564040145, "post_id": 57181385, "comment_id": 100901713, "body": "@DanAlbert Wouldn&#39;t the error code be <code>BUS_ADRALN</code> if it was an alignment issue? Or is <code>BUS_ADRERR</code> also used for that purpose?"}, {"owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "edited": false, "score": 0, "creation_date": 1564428832, "post_id": 57181385, "comment_id": 101019837, "body": "Good point. I&#39;m not actually sure."}], "owner": {"reputation": 507, "user_id": 4593846, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1095d4be6173b85931b08009701a5167?s=128&d=identicon&r=PG&f=1", "display_name": "dvrer", "link": "https://stackoverflow.com/users/4593846/dvrer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563966137, "creation_date": 1563966137, "question_id": 57181385, "link": "https://stackoverflow.com/questions/57181385/c-vector-crash-only-in-64-build-sigbus", "title": "c++ vector crash only in 64 build - SIGBUS", "body": "<p>after uploading a 64 build of an android app i get new crash reports - <code>signal 7 (SIGBUS), code 2 (BUS_ADRERR)</code></p>\n\n<p>it never happened on 32 bit arm build that was live for months before.</p>\n\n<p>what can be the problem?</p>\n\n<p>this is the code part that crash:</p>\n\n<pre><code>if (objectsInTile.size() == 0) return nullptr;\n\nfor (int i = (int)objectsInTile.size() - 1; i &gt;= 0; i--) \n{\n    MatchObject* in = objectsInTile[i];\n\n    //the crash happens in the bottom line\n    if (in-&gt;isMainObject()) return in;\n}\n\nreturn nullptr;\n</code></pre>\n"}, {"tags": ["c++", "opengl", "glfw"], "comments": [{"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1563966938, "post_id": 57181150, "comment_id": 100874146, "body": "Could you elaborate what you are trying to do? Usually, you&#39;ll have a renderloop in a glfw application that runs until <code>glfwWindowShouldClose</code> is true."}, {"owner": {"reputation": 31, "user_id": 11807725, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-726JHBOTw1E/AAAAAAAAAAI/AAAAAAAAB28/mAwyh4_BRSs/photo.jpg?sz=128", "display_name": "Harold Trotter", "link": "https://stackoverflow.com/users/11807725/harold-trotter"}, "reply_to_user": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1563968220, "post_id": 57181150, "comment_id": 100874841, "body": "Yes, I added main.cpp in my code"}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1563968306, "post_id": 57181150, "comment_id": 100874887, "body": "You&#39;re missing a <code>glfwDestroyWindow(window);</code> right before <code>glfwTerminate</code>. (I assume that <code>-&gt;HandleEvents()</code> calls <code>glfwPollEvents()</code>)."}, {"owner": {"reputation": 31, "user_id": 11807725, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-726JHBOTw1E/AAAAAAAAAAI/AAAAAAAAB28/mAwyh4_BRSs/photo.jpg?sz=128", "display_name": "Harold Trotter", "link": "https://stackoverflow.com/users/11807725/harold-trotter"}, "reply_to_user": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1563968604, "post_id": 57181150, "comment_id": 100875072, "body": "Yes, It calls glfwPollEvents()"}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1563968720, "post_id": 57181150, "comment_id": 100875139, "body": "Did adding <code>glfwDestroyWindow</code> solve the problem?"}, {"owner": {"reputation": 31, "user_id": 11807725, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-726JHBOTw1E/AAAAAAAAAAI/AAAAAAAAB28/mAwyh4_BRSs/photo.jpg?sz=128", "display_name": "Harold Trotter", "link": "https://stackoverflow.com/users/11807725/harold-trotter"}, "reply_to_user": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1563968780, "post_id": 57181150, "comment_id": 100875170, "body": "No, it didn&#39;t. Again - the opengl window is closing, but the console is not."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1563969194, "post_id": 57181150, "comment_id": 100875370, "body": "Change your main method declaration to <code>#ifdef _WIN32 int WINAPI WinMain (HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd) #else int main(int argc, const char** argv) #endif &#47;&#47; _WIN32 </code>. And then check your IDE settings, it should create desktop application and not the console."}, {"owner": {"reputation": 31, "user_id": 11807725, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-726JHBOTw1E/AAAAAAAAAAI/AAAAAAAAB28/mAwyh4_BRSs/photo.jpg?sz=128", "display_name": "Harold Trotter", "link": "https://stackoverflow.com/users/11807725/harold-trotter"}, "edited": false, "score": 0, "creation_date": 1564038982, "post_id": 57181150, "comment_id": 100901095, "body": "I want the console running (for debbuging purposes)."}, {"owner": {"reputation": 1664, "user_id": 2649079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41a2c9d80a4b8917940e65858c9abc0?s=128&d=identicon&r=PG", "display_name": "Nadir", "link": "https://stackoverflow.com/users/2649079/nadir"}, "edited": false, "score": 1, "creation_date": 1564053231, "post_id": 57181150, "comment_id": 100909111, "body": "When you say the console does not close, do you mean the loop never ends? Are you running it on debug mode on Visual Studio?"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 11807725, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-726JHBOTw1E/AAAAAAAAAAI/AAAAAAAAB28/mAwyh4_BRSs/photo.jpg?sz=128", "display_name": "Harold Trotter", "link": "https://stackoverflow.com/users/11807725/harold-trotter"}, "is_accepted": true, "score": -1, "last_activity_date": 1564085466, "creation_date": 1564085466, "answer_id": 57209509, "question_id": 57181150, "link": "https://stackoverflow.com/questions/57181150/how-to-check-if-glfw-window-is-running/57209509#57209509", "title": "How to check if GLFW window is running?", "body": "<p>I fixed it. I had an infinite loop running in the background(checking for opengl errors). Thank you for your support!</p>\n"}], "owner": {"reputation": 31, "user_id": 11807725, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-726JHBOTw1E/AAAAAAAAAAI/AAAAAAAAB28/mAwyh4_BRSs/photo.jpg?sz=128", "display_name": "Harold Trotter", "link": "https://stackoverflow.com/users/11807725/harold-trotter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 57209509, "answer_count": 1, "score": 1, "last_activity_date": 1564085466, "creation_date": 1563965344, "last_edit_date": 1563967915, "question_id": 57181150, "link": "https://stackoverflow.com/questions/57181150/how-to-check-if-glfw-window-is-running", "title": "How to check if GLFW window is running?", "body": "<p>I am creating an app using GLEW and GLFW. I want to check if my window is still running. Is there any way to do this?</p>\n\n<pre><code>int main(void)\n{\n\napp = new Application();\nwhile (!glfwWindowShouldClose(app-&gt;m_Window))\n{\n    /* Render here */\n    renderer.Clear();\n\n    app-&gt;Update();\n    app-&gt;Render(&amp;renderer, shader);\n    glfwSwapBuffers(app-&gt;m_Window);\n\n    /* Poll for and process events */\n    app-&gt;HandleEvents();\n}\nglfwTerminate();\nreturn 0;\n}\n</code></pre>\n\n<p>After I close the opengl window, the console still runs.</p>\n"}, {"tags": ["c++", "clang", "abstract-syntax-tree", "clang++"], "comments": [{"owner": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "edited": false, "score": 1, "creation_date": 1563962980, "post_id": 57180369, "comment_id": 100871854, "body": "Have you tried: <a href=\"https://clang.llvm.org/docs/LibASTMatchersReference.html\" rel=\"nofollow noreferrer\">clang.llvm.org/docs/LibASTMatchersReference.html</a>"}, {"owner": {"reputation": 21, "user_id": 11829566, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eQ7Hca4rduk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reCtkVDRoGogt4E9WG8V33Pv_mwxg/photo.jpg?sz=128", "display_name": "kleii", "link": "https://stackoverflow.com/users/11829566/kleii"}, "reply_to_user": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "edited": false, "score": 0, "creation_date": 1563963278, "post_id": 57180369, "comment_id": 100872011, "body": "@KostasRim Thats what I use to extract the functions. Now I want to iterate over the statements in the body and process them."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 1, "creation_date": 1563965884, "post_id": 57180369, "comment_id": 100873584, "body": "Looks like the classic use-case for a <a href=\"https://en.wikipedia.org/wiki/Visitor_pattern\" rel=\"nofollow noreferrer\">visitor pattern</a>, no?"}, {"owner": {"reputation": 21, "user_id": 11829566, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eQ7Hca4rduk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reCtkVDRoGogt4E9WG8V33Pv_mwxg/photo.jpg?sz=128", "display_name": "kleii", "link": "https://stackoverflow.com/users/11829566/kleii"}, "reply_to_user": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1563966973, "post_id": 57180369, "comment_id": 100874164, "body": "@G.M. I would need to extend the Stmt classes with the accept method, no? Those are library classes."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 11829566, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eQ7Hca4rduk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reCtkVDRoGogt4E9WG8V33Pv_mwxg/photo.jpg?sz=128", "display_name": "kleii", "link": "https://stackoverflow.com/users/11829566/kleii"}, "is_accepted": false, "score": 1, "last_activity_date": 1563973781, "creation_date": 1563973781, "answer_id": 57183760, "question_id": 57180369, "link": "https://stackoverflow.com/questions/57180369/is-there-an-elegant-way-to-traverse-clang-ast-statements/57183760#57183760", "title": "Is there an elegant way to traverse Clang AST Statements?", "body": "<p>By navigating through the code of clang::TextNodeDumper, I found a solution.\nApparently Clang has its own visitors for statements, declarations etc...\nSimple example:</p>\n\n<pre><code>class StatementVisitor : public ConstStmtVisitor&lt;StatementVisitor&gt; {\n\npublic:\n    StatementVisitor();\n\n    void Visit(const Stmt *Node) {\n        ConstStmtVisitor&lt;StatementVisitor&gt;::Visit(Node);\n    }\n\n    void VisitIfStmt(const IfStmt *Node) {\n        llvm::outs() &lt;&lt; \" An if statement yay!\\n\";\n    }\n\n    void VisitWhileStmt(const WhileStmt *Node) {\n        llvm::outs() &lt;&lt; \" A While statement yay!\\n\";\n    }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 11923119, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-r4Ww80y17iQ/AAAAAAAAAAI/AAAAAAAAESY/PQehyUucdso/photo.jpg?sz=128", "display_name": "Saam", "link": "https://stackoverflow.com/users/11923119/saam"}, "is_accepted": false, "score": 0, "last_activity_date": 1573941997, "creation_date": 1573941997, "answer_id": 58895637, "question_id": 57180369, "link": "https://stackoverflow.com/questions/57180369/is-there-an-elegant-way-to-traverse-clang-ast-statements/58895637#58895637", "title": "Is there an elegant way to traverse Clang AST Statements?", "body": "<p>you can use <a href=\"https://clang.llvm.org/docs/RAVFrontendAction.html\" rel=\"nofollow noreferrer\">RecursiveASTVisitor</a></p>\n\n<p>its traverse all statement in given code, recursively</p>\n\n<pre><code>class MyASTVisitor : public RecursiveASTVisitor&lt;MyASTVisitor&gt;\n{\n    public:\n    bool VisitFunctionDecl(FunctionDecl* f)\n    {\n        ...\n    }\n\n    bool VisitIfStmt(IfStmt* IF)\n    {\n        ...\n    }\n\n    bool VisitForStmt(ForStmt* FS)\n    {\n        ...\n    }\n\n    bool VisitWhileStmt(WhileStmt* WS)\n    {\n        ...\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11829566, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eQ7Hca4rduk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reCtkVDRoGogt4E9WG8V33Pv_mwxg/photo.jpg?sz=128", "display_name": "kleii", "link": "https://stackoverflow.com/users/11829566/kleii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 728, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1573941997, "creation_date": 1563962822, "question_id": 57180369, "link": "https://stackoverflow.com/questions/57180369/is-there-an-elegant-way-to-traverse-clang-ast-statements", "title": "Is there an elegant way to traverse Clang AST Statements?", "body": "<p>I am trying to traverse all function definitions and extract information from them. I have to iterate over all statements in the function body, and depending on the type, execute a specific function.</p>\n\n<p>For the moment I have an ugly if-else block. Is there a more elegant way to do this?</p>\n\n<pre><code>void FunctionMatcher::processStatement(const clang::Stmt *statement) {\n    string type = statement-&gt;getStmtClassName();\n    if (type == \"ReturnStmt\") {\n        auto rs = dyn_cast&lt;const ReturnStmt *&gt;(statement);\n        processReturnStmt(rs);\n    } else if (type == \"WhileStmt\") {\n        auto ws = dyn_cast&lt;WhileStmt&gt;(statement);\n        processWhileStmt(ws);\n    } else if (type == \"ForStmt\") {\n        auto fs = dyn_cast&lt;const ForStmt *&gt;(statement);\n        processForStmt(fs);\n    } else if (type == \"IfStmt\") {\n        auto is = dyn_cast&lt;const IfStmt *&gt;(statement);\n        processIfStmt(is);\n    } else if (type == \"SwitchStmt\") {\n        auto ss = dyn_cast&lt;const SwitchStmt *&gt;(statement);\n        processSwitchStmt(ss);\n    } else if (type == \"CompoundStmt\") {\n        auto cs = dyn_cast&lt;const CompoundStmt *&gt;(statement);\n        for (auto child : cs-&gt;children())\n            processStatement(child);\n    } else {\n      // ...\n    }\n</code></pre>\n"}]