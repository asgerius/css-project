[{"tags": ["c++", "variadic-macros", "boost-preprocessor"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1522886840, "post_id": 49662165, "comment_id": 86334429, "body": "I find it really hard to believe you need to do this stuff. Or at least that you need to do it via the C preprocessor."}, {"owner": {"reputation": 169, "user_id": 1015148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee0489b5a9137e9634f11d4e739d0fdc?s=128&d=identicon&r=PG", "display_name": "Colin Andrews", "link": "https://stackoverflow.com/users/1015148/colin-andrews"}, "edited": false, "score": 0, "creation_date": 1522887238, "post_id": 49662165, "comment_id": 86334522, "body": "I assure you, I have a real world use case that makes sense. Most of what I am doing is accomplished with variadic templated types. The preprocessor is just being used to eliminate a lot of repetition in the final classes that use the templated types. The phony names above are just placeholders, but maybe they make it seem like my use case is trivial?"}], "answers": [{"tags": [], "owner": {"reputation": 169, "user_id": 1015148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee0489b5a9137e9634f11d4e739d0fdc?s=128&d=identicon&r=PG", "display_name": "Colin Andrews", "link": "https://stackoverflow.com/users/1015148/colin-andrews"}, "is_accepted": true, "score": 0, "last_activity_date": 1522906307, "last_edit_date": 1522906307, "creation_date": 1522893789, "answer_id": 49663041, "question_id": 49662165, "link": "https://stackoverflow.com/questions/49662165/va-args-sees-extra-empty-arg-when-invoked-inside-boost-pp-seq-for-each/49663041#49663041", "title": "__VA_ARGS__ sees extra empty arg when invoked inside BOOST_PP_SEQ_FOR_EACH", "body": "<p>I figured out what is going on.</p>\n\n<p>Where I invoke <code>DO_STUFF</code> with <code>SEQ_FOR_EACH</code> I use <code>BOOST_PP_TUPLE_ENUM</code>:</p>\n\n<pre><code>#define INVOKE_DS( r, data, elem )      \\\n   DO_STUFF(BOOST_PP_TUPLE_ENUM(elem)); \\\n</code></pre>\n\n<p><code>BOOST_PP_TUPLE_ENUM</code> turns a tuple <code>(a,b,c,d)</code> into comma separated tokens without the parenthesis <code>a,b,c,d</code>.</p>\n\n<p>I assumed that that meant that <code>DO_STUFF(BOOST_PP_TUPLE_ENUM((a,b,c,d)))</code> would see 4 arguments, but in fact it still sees only one that is <code>a,b,c,d</code>.</p>\n\n<p>This expansion:</p>\n\n<pre><code>#define DO_STUFF(name,...)   \\\n    STUFF1(name,__VA_ARGS__) \\\n    STUFF2(name,__VA_ARGS__) \\\n    STUFF3(name,__VA_ARGS__)\n</code></pre>\n\n<p>Is actually adding the extra empty parameter in this case because <code>__VA_ARGS__</code> is empty.</p>\n\n<p>So the solution was pretty simple. I just created a different variant of the <code>DO_STUFF</code> macro that is used in the <code>DO_LOTS_OF_STUFF</code> case</p>\n\n<pre><code>#define DO_LOTS_OF_STUFF(SEQ)       \\\n   BOOST_PP_SEQ_FOR_EACH(              \\\n     INVOKE_DS, _,                     \\\n     BOOST_PP_VARIADIC_SEQ_TO_SEQ(SEQ) \\\n   )\n\n#define INVOKE_DS( r, data, elem )      \\\n   DO_STUFF_1(BOOST_PP_TUPLE_ENUM(elem)); \\\n\n#define DO_STUFF_1(tuple_args)   \\\n    STUFF1(tuple_args) \\\n    STUFF2(tuple_args) \\\n    STUFF3(tuple_args)\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 1015148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee0489b5a9137e9634f11d4e739d0fdc?s=128&d=identicon&r=PG", "display_name": "Colin Andrews", "link": "https://stackoverflow.com/users/1015148/colin-andrews"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 49663041, "answer_count": 1, "score": 0, "last_activity_date": 1522906307, "creation_date": 1522886350, "question_id": 49662165, "link": "https://stackoverflow.com/questions/49662165/va-args-sees-extra-empty-arg-when-invoked-inside-boost-pp-seq-for-each", "title": "__VA_ARGS__ sees extra empty arg when invoked inside BOOST_PP_SEQ_FOR_EACH", "body": "<p>My actual code example is quite complex, but I will try to summarize the behavior I am seeing with a simple illustration.</p>\n\n<p>I have a macro that I want to be able to call individually, or multiple times as a part of a larger macro expansion:</p>\n\n<pre><code>#define DO_STUFF(name,...)   \\\n    STUFF1(name,__VA_ARGS__) \\\n    STUFF2(name,__VA_ARGS__) \\\n    STUFF3(name,__VA_ARGS__)\n</code></pre>\n\n<p>I can use <code>DO_STUFF(dave, int, char)</code> and similar variations directly in a source file and it generates the code I expect.</p>\n\n<p>I also want to invoke big lists of the <code>DO_STUFF</code> macro with another list of inputs. In order to handle this case, I am using boost preprocessor with a sequence of tuples (or variadic sequence):</p>\n\n<pre><code>DO_LOTS_OF_STUFF(\n      (dave, ball, pen)          \\\n      (alice, cat, dog, bicycle) \\\n      (peter, bird) )\n</code></pre>\n\n<p>My definition of <code>DO_LOTS_OF_STUFF</code> looks like:</p>\n\n<pre><code>#define DO_LOTS_OF_STUFF(SEQ)       \\\n   BOOST_PP_SEQ_FOR_EACH(              \\\n     INVOKE_DS, _,                     \\\n     BOOST_PP_VARIADIC_SEQ_TO_SEQ(SEQ) \\\n   )\n\n#define INVOKE_DS( r, data, elem )      \\\n   DO_STUFF(BOOST_PP_TUPLE_ENUM(elem)); \\\n</code></pre>\n\n<p>When I invoke <code>DO_LOTS_OF_STUFF</code> as illustrated above, <code>STUFF1</code>, <code>STUFF2</code>, and <code>STUFF3</code> are all invoked with an extra comma at the end with an empty parameter.</p>\n\n<p>If I break the expansion at the point that <code>DO_STUFF</code> is invoked (by changing its name), the preprocessor output looks like I expect:</p>\n\n<pre><code>DO_STUFF(dave, ball, pen)\nDO_STUFF(alice, cat, dog, bicycle)\nDO_STUFF(peter, bird)\n</code></pre>\n\n<p>If I break the expansion at the <code>STUFF1</code>, <code>STUFF2</code>, and <code>STUFF3</code> level, they appear in the output with an extra empty parameter:</p>\n\n<pre><code>STUFF1(dave, ball, pen,)\nSTUFF2(dave, ball, pen,)\nSTUFF3(dave, ball, pen,)\nSTUFF1(alice, cat, dog, bicycle,)\nSTUFF2(alice, cat, dog, bicycle,)\nSTUFF3(alice, cat, dog, bicycle,)\nSTUFF1(peter, bird,)\nSTUFF2(peter, bird,)\nSTUFF3(peter, bird,)\n</code></pre>\n\n<p>Is this just one of those things to avoid in preprocessor meta-programming like \"don't use <code>##</code>\"? \"Don't use <code>__VA_ARGS__</code> in nested macros\"?</p>\n\n<p>Any advice on how to define <code>DO_STUFF</code> or  <code>DO_LOTS_OF_STUFF</code> to avoid this issue?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1522885434, "post_id": 49662019, "comment_id": 86334000, "body": "It looks like your function completely ignores the <code>input</code> it was passed and opts to read a new input in itself...is that intended?"}, {"owner": {"reputation": 214, "user_id": 3765016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OnRue.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/3765016/sean"}, "edited": false, "score": 0, "creation_date": 1522885444, "post_id": 49662019, "comment_id": 86334004, "body": "In your main method, you are using an index, i, which is never incremented."}, {"owner": {"reputation": 1, "user_id": 8761801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3c97614ce6c24f2ab76bb4730b2bd28?s=128&d=identicon&r=PG&f=1", "display_name": "HarleyD", "link": "https://stackoverflow.com/users/8761801/harleyd"}, "edited": false, "score": 0, "creation_date": 1522886627, "post_id": 49662019, "comment_id": 86334366, "body": "the function should show cin &lt;&lt; userInput[i]; if this is what you were asking. No it was not intended"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8761801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3c97614ce6c24f2ab76bb4730b2bd28?s=128&d=identicon&r=PG&f=1", "display_name": "HarleyD", "link": "https://stackoverflow.com/users/8761801/harleyd"}, "edited": false, "score": 0, "creation_date": 1522888171, "post_id": 49662278, "comment_id": 86334794, "body": "Thank you Remy, i was going about this the wrong way and making it too complicated"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1522888626, "last_edit_date": 1522888626, "creation_date": 1522887224, "answer_id": 49662278, "question_id": 49662019, "link": "https://stackoverflow.com/questions/49662019/trying-to-make-a-loop-to-check-the-string-for-numbers-only-and-negative-numbers/49662278#49662278", "title": "Trying to make a loop to check the string for numbers only and negative numbers allowed in C++ im new to programming this is a class project", "body": "<p>Your code doesn't work because you are not utilizing <code>std::string</code> correctly.</p>\n\n<p>When <code>main()</code> prompts the user, it reads into a <code>char</code> of an empty <code>std::string</code>, which is undefined behavior.  You should be reading into the <code>std::string</code> itself without calling its <code>operator[]</code> at all.  <code>operator&gt;&gt;</code> has an overload for reading <code>std::string</code> values.</p>\n\n<p><code>checkInput()</code> is just all kinds of wrong.  It takes an <code>int</code> as input instead of a <code>std::string</code>, but ignores that input and waits for the user to type in <em>another</em> string value.  Then it loops through <em>that</em> string instead of the one read by <code>main()</code>, and only checks the 1st <code>char</code> before exiting.  If the <code>char</code> is a digit, <code>checkInput()</code> returns true, and <code>main()</code> exits.  Otherwise, <code>checkInput()</code> prompts the user to type in <em>yet another</em> <code>char</code> and then returns false, which then causes <code>main()</code> to prompt the user to type in <em>yet another</em> <code>char</code>. <code>checkInput()</code> does not actually loop through an entire string at all, and does no have any handling for the <code>-</code> character.</p>\n\n<p>Try this instead:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cctype&gt;\n#include &lt;limits&gt;\n\nusing namespace std;\n\nbool checkInput(const string &amp;);\n\nint main()\n{\n    string userInput;\n\n    cout &lt;&lt; \"Please enter a numeric value : \";\n    do\n    {\n        cin &gt;&gt; userInput;\n        if (checkInput(userInput))\n            break;\n\n        cin.clear();\n        cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n');    \n\n        cout &lt;&lt; \"Please enter a valid numeric value: \";\n    }\n    while (true);\n\n    cout &lt;&lt; \"\\nYour input \" &lt;&lt; userInput &lt;&lt; \" is a valid numeric input.\" &lt;&lt; endl;\n\n    system(\"pause\");\n    return 0;\n}\n\nbool checkInput(const string &amp;input)\n{\n    if (input.empty())\n        return false;\n\n    string::size_type i = 0;\n    if (input[0] == '-')\n    {\n        ++i;\n        if (i == input.length())\n            return false;\n    }\n\n    do\n    {\n        if (!isdigit(input[i]))\n            return false;    \n    }\n    while (++i &lt; input.length());\n\n    return true;\n}\n</code></pre>\n\n<p>However, the best way to handle this situation is to simply not allow the user to enter non-integer values to begin with.  <code>operator&gt;&gt;</code> has overloads for reading integer values, both signed and unsigned types.  In this case, reading <code>int</code> values will suffice.  Let <code>cin</code> do all of the input validation for you:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;limits&gt;\n\nusing namespace std;\n\nint main()\n{\n    int userInput;\n\n    cout &lt;&lt; \"Please enter a numeric value : \";\n    while (!(cin &gt;&gt; userInput))\n    {\n        cin.clear();\n        cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n');\n        cout &lt;&lt; \"Please enter a valid numeric value: \";\n    }\n\n    cout &lt;&lt; \"\\nYour input \" &lt;&lt; userInput &lt;&lt; \" is a valid numeric input.\" &lt;&lt; endl;\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8761801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3c97614ce6c24f2ab76bb4730b2bd28?s=128&d=identicon&r=PG&f=1", "display_name": "HarleyD", "link": "https://stackoverflow.com/users/8761801/harleyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1522888626, "creation_date": 1522885283, "last_edit_date": 1522886948, "question_id": 49662019, "link": "https://stackoverflow.com/questions/49662019/trying-to-make-a-loop-to-check-the-string-for-numbers-only-and-negative-numbers", "title": "Trying to make a loop to check the string for numbers only and negative numbers allowed in C++ im new to programming this is a class project", "body": "<p>I'm trying to make a loop to check input strings for numbers only, and negative numbers are allowed.  I'm new to programming, this is for a class project.</p>\n\n<p>This code works, to an extent.  When it shows the output, it does not show the first number, and does not allow <code>-</code> to be used. I cannot figure out where I'm going wrong in this.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cctype&gt;\n\nusing namespace std;\nstring userInput;\nint i = 0;\nbool checkInput(int);\n\n\nint main()\n{\n    do\n    {\n        cout &lt;&lt; \"Please enter a numeric value : \";\n        string userInput;\n        cin &gt;&gt; userInput[i];\n    }\n    while (!checkInput(userInput[i]));\n\n    system(\"pause\");\n    return 0;\n}\n\nbool checkInput(int input)\n{\n    string userInput;\n    int i;\n    cin &gt;&gt; userInput;\n\n    for (int i = 0; i &lt; userInput.length(); i++)\n        if (isdigit(userInput[i]))\n        {\n            cout &lt;&lt; \"\\nYour input \" &lt;&lt; userInput &lt;&lt; \" is a valid numeric input.\" &lt;&lt; endl;\n            return true;\n        }\n        else\n        {\n            cout &lt;&lt; \"Please enter a valid numeric value: \";\n            cin &gt;&gt; userInput[i];\n            return false;\n        }\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1522884457, "post_id": 49661860, "comment_id": 86333735, "body": "<a href=\"http://en.cppreference.com/w/c/string/byte/memcmp\" rel=\"nofollow noreferrer\">C++ at least</a> seems to say that the behavior is undefined if you access beyond either object, which means passing a size of 3 in your example leads to UB."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "reply_to_user": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1522884548, "post_id": 49661860, "comment_id": 86333763, "body": "@bnaecker cppreference is falible, the question is whether it <i>can</i> access beyond <code>s1</code> in this example."}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 2, "creation_date": 1522884612, "post_id": 49661860, "comment_id": 86333780, "body": "I could forsee an implementation that would use SIMD instructions that would be likely to compare past the first difference. I&#39;d reckon the standard would avoid limiting against such optimizations"}, {"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1522884617, "post_id": 49661860, "comment_id": 86333781, "body": "Sure, it&#39;s not the standard, I&#39;m just using it as one piece of evidence."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1522884652, "post_id": 49661860, "comment_id": 86333789, "body": "Nothing says the function must do a character by character comparison. So no guaranteed short-circuiting, I would say."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1522885112, "post_id": 49661860, "comment_id": 86333921, "body": "This is why you want to use <code>strncmp</code> instead of <code>memcmp</code>."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 2, "creation_date": 1522885139, "post_id": 49661860, "comment_id": 86333924, "body": "If you want &quot;short-circuiting&quot; behaviour, use <code>strcmp()</code>.   There is nothing in the specification of <code>memcmp()</code> which requires the bytes to be compared sequentially, or that specifies circumstances in which any bytes in either sequence not be accessed.   Since <code>sizeof(s1) &lt; 3</code>, your <code>memcpy()</code> call has undefined behaviour."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 1, "creation_date": 1522885239, "post_id": 49661860, "comment_id": 86333948, "body": "re: strcmp/strncmp. I can rewrite this example to be arrays of ints and it&#39;s the same question."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "reply_to_user": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1522885276, "post_id": 49661860, "comment_id": 86333956, "body": "@vu1p3n0x that&#39;s what I was thinking."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1522887332, "post_id": 49662056, "comment_id": 86334552, "body": "The glibc example isn&#39;t evidence; it uses the same technique for <code>strcmp</code> which <i>is</i> guaranteed not to read past a null terminator by the standard. It relies on platform-specific knowledge that such a read won&#39;t cause problems"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1522887892, "post_id": 49662056, "comment_id": 86334720, "body": "@M.M <a href=\"https://github.com/lattera/glibc/blob/master/string/strcmp.c\" rel=\"nofollow noreferrer\">glibc&#39;s strcmp implementation</a> doesn&#39;t contain such an optimization."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1522887932, "post_id": 49662056, "comment_id": 86334735, "body": "Maybe it&#39;s been changed ; I recall reading discussion about it in the past"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1522889066, "post_id": 49662056, "comment_id": 86335024, "body": "@M.M It looks like it will use the compiler intrinsic for <code>strcmp</code> if one is available, but I assume that intrinsic will be implemented safely by the compiler. I have edited to add an analysis of the code detailing how the <code>memcmp</code> implementation can cause a crash if the size is too short."}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 1, "creation_date": 1522889229, "post_id": 49662056, "comment_id": 86335066, "body": "Are you capable of constructing an example that crashes glibc&#39;s <code>memcmp</code> which wouldn&#39;t if it read one character at a time?"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "reply_to_user": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1522890726, "post_id": 49662056, "comment_id": 86335392, "body": "@zneak Added an example."}], "tags": [], "owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "is_accepted": true, "score": 5, "last_activity_date": 1593708666, "last_edit_date": 1593708666, "creation_date": 1522885586, "answer_id": 49662056, "question_id": 49661860, "link": "https://stackoverflow.com/questions/49661860/can-stdmemcmp-read-any-bytes-past-the-first-difference/49662056#49662056", "title": "Can std::memcmp read any bytes past the first difference?", "body": "<p>The function is not guaranteed to short-circuit because the standard doesn't say it must.</p>\n<p>Not only is it not guaranteed to short-circuit, but in practice many implementations will not. For example, <a href=\"https://github.com/lattera/glibc/blob/master/string/memcmp.c#L115\" rel=\"nofollow noreferrer\">glibc</a> compares elements of type <code>unsigned long int</code> (except for the last few bytes), so it could read up to 7 bytes past the location which compared differently on a 64-bit implementation.</p>\n<p>Some may think that this won't cause an access violation on the platforms glibc  targets, because access to these <code>unsigned long int</code>s will always be aligned and therefore will not cross a page boundary. But when the two sources have a different alignment, glibc will read two consecutive <code>unsigned long int</code>s from one of the sources, which may be in different pages. If the different byte was in the first of those, an access violation can still be triggered before glibc performed the comparison (see function <a href=\"http://github.com/lattera/glibc/blob/master/string/memcmp.c#L208\" rel=\"nofollow noreferrer\"><code>memcmp_not_common_alignment</code></a>).</p>\n<p>In short: Specifying a length that is larger than the real size of the buffer is undefined behavior even if the different byte occured before this length, and can cause crashes on common implementations.</p>\n<p>Here's proof that it can crash: <a href=\"https://ideone.com/8jTREr\" rel=\"nofollow noreferrer\">https://ideone.com/8jTREr</a></p>\n"}], "owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 570, "favorite_count": 3, "accepted_answer_id": 49662056, "answer_count": 1, "score": 7, "last_activity_date": 1593708666, "creation_date": 1522884020, "last_edit_date": 1592644375, "question_id": 49661860, "link": "https://stackoverflow.com/questions/49661860/can-stdmemcmp-read-any-bytes-past-the-first-difference", "title": "Can std::memcmp read any bytes past the first difference?", "body": "<p>Consider:</p>\n<pre><code>constexpr char s1[] = &quot;a&quot;;\nconstexpr char s2[] = &quot;abc&quot;;\nstd::memcmp(s1, s2, 3);\n</code></pre>\n<p>If <code>memcmp</code> stops at the first difference it sees, it will not read past the second byte of s1 (the nul terminator), however I don't see anything in the C standard to confirm this behavior, and I don't know of anything in C++ which extends it.</p>\n<blockquote>\n<p><em>n1570 7.24.4.1</em> <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"noreferrer\">PDF link</a></p>\n<p><code>int memcmp(const void *s1, const void *s2, size_t n);</code></p>\n<p>The <code>memcmp</code> function compares the first <code>n</code> characters of the object pointed to by <code>s1</code> to the first n characters of the object pointed to by <code>s2</code></p>\n</blockquote>\n<p>Is my understanding correct that the standard describes the behavior as reading all <code>n</code> bytes of both arguments, but libraries can short circuit as-if they did?</p>\n"}, {"tags": ["c++", "operators"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 9388932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/329e8b36f3802e230d0967abf07362d8?s=128&d=identicon&r=PG&f=1", "display_name": "J_Roost312", "link": "https://stackoverflow.com/users/9388932/j-roost312"}, "edited": false, "score": 0, "creation_date": 1522884462, "post_id": 49661879, "comment_id": 86333738, "body": "when i use the cout &lt;&lt; left + right, it tells me that &lt;&lt;  does not have any matching operators"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1522885055, "post_id": 49661879, "comment_id": 86333903, "body": "<code>left</code> and <code>right</code> are declared as <code>fraction</code>. There is an overloaded <code>operator&lt;&lt;</code> defined to print out a <code>fraction</code>, so it should work. On a side note, all of the <code>friend</code> operators should be taking <code>fraction</code> values as <code>const fraction &amp;</code>, except for <code>operator&gt;&gt;</code>"}, {"owner": {"reputation": 5, "user_id": 9388932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/329e8b36f3802e230d0967abf07362d8?s=128&d=identicon&r=PG&f=1", "display_name": "J_Roost312", "link": "https://stackoverflow.com/users/9388932/j-roost312"}, "edited": false, "score": 0, "creation_date": 1522886028, "post_id": 49661879, "comment_id": 86334170, "body": "I&#39;m actually just getting a ton of errors in my code now since switching to this. It wouldnt accept just doing cout &lt;&lt;. I&#39;m honestly just confused as to how all this works. In my operators I have them printing to the page, so wouldn&#39;t I just call them so that they run at that time and print to the console? Also, how does it know that cin &gt;&gt; left; is actually going to the istream&amp; operator?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1522886136, "post_id": 49661879, "comment_id": 86334208, "body": "It knows it because it looks for an overload of the <code>&gt;&gt;</code> operator that has arguments matching <code>istream</code> and <code>fraction</code>."}, {"owner": {"reputation": 5, "user_id": 9388932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/329e8b36f3802e230d0967abf07362d8?s=128&d=identicon&r=PG&f=1", "display_name": "J_Roost312", "link": "https://stackoverflow.com/users/9388932/j-roost312"}, "edited": false, "score": 0, "creation_date": 1522886808, "post_id": 49661879, "comment_id": 86334417, "body": "Ok, I got the cout &lt;&lt; to work by creating more fraction objects, and saving the operator into it before doing a cout &lt;&lt; and it took that error away. When I run it, it asks for the first operand, and after inputting the number, it doesn&#39;t jump to the next prompt, it wants two numbers put in rather than just the numerator."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1522886958, "post_id": 49661879, "comment_id": 86334459, "body": "Try flushing <code>cout</code> after the second prompt."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1522886980, "post_id": 49661879, "comment_id": 86334463, "body": "See <a href=\"https://stackoverflow.com/questions/2704752/flushing-of-cout-prior-to-reading-input-using-cin-why/2704757\" title=\"flushing of cout prior to reading input using cin why\">stackoverflow.com/questions/2704752/&hellip;</a>"}, {"owner": {"reputation": 5, "user_id": 9388932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/329e8b36f3802e230d0967abf07362d8?s=128&d=identicon&r=PG&f=1", "display_name": "J_Roost312", "link": "https://stackoverflow.com/users/9388932/j-roost312"}, "edited": false, "score": 0, "creation_date": 1522888424, "post_id": 49661879, "comment_id": 86334853, "body": "My values aren&#39;t getting to the right function or something. All my answers come out as 0/1"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1522889027, "post_id": 49661879, "comment_id": 86335017, "body": "I can&#39;t reproduce that. Adding all the <code>const fraction &amp;</code> types to the function parameters got rid of all my errors, and when I add <code>3&#47;4</code> and <code>1&#47;2</code> I get <code>5&#47;4</code>."}, {"owner": {"reputation": 5, "user_id": 9388932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/329e8b36f3802e230d0967abf07362d8?s=128&d=identicon&r=PG&f=1", "display_name": "J_Roost312", "link": "https://stackoverflow.com/users/9388932/j-roost312"}, "edited": false, "score": 0, "creation_date": 1522894319, "post_id": 49661879, "comment_id": 86336143, "body": "I think the const was screwing me up, because once i did it, it worked fine. I was putting it in the wrong spot until I saw your code. Now it makes sense as to what was going wrong. Thank you so much for your help. This got it working for me!"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 0, "last_activity_date": 1522889125, "last_edit_date": 1522889125, "creation_date": 1522884175, "answer_id": 49661879, "question_id": 49661845, "link": "https://stackoverflow.com/questions/49661845/replacing-function-calls-with-overloaded-operators-c/49661879#49661879", "title": "Replacing function calls with Overloaded Operators C++", "body": "<p>Change calls to <code>read()</code> into uses of <code>cin &gt;&gt;</code>, <code>print()</code> is replaced with <code>cout &lt;&lt;</code>, and methods like <code>add()</code> get replaced with their corresponding operators.</p>\n\n<pre><code>case 'A':\ncase 'a':\n    cout &lt;&lt; \"Adding\" &lt;&lt; endl &lt;&lt; \"enter the first operand: \";\n    cin &gt;&gt; left;\n    cout &lt;&lt; \"enter the second operand: \";\n    cin &gt;&gt; right;\n    cout &lt;&lt; left + right;\n    break;\n</code></pre>\n\n<p>You also should change the parameter types of all the operators except <code>&gt;&gt;</code> to <code>const fraction &amp;</code>. This solves the errors about not finding a matching function.</p>\n\n<p>Here's the full code (I only included the <code>A</code> operation, the rest are similar):</p>\n\n<pre><code>#include \"iostream\"\nusing namespace std;\n\nclass fraction\n{\nprivate:\n    int      numerator;\n    int      denominator;\n\npublic:\n    fraction(int n = 0, int d = 1);\n    friend fraction operator+(const fraction &amp;f1, const fraction &amp;f2);\n    friend fraction operator-(const fraction &amp;f1, const fraction &amp;f2);\n    friend fraction operator*(const fraction &amp;f1, const fraction &amp;f2);\n    friend fraction operator/(const fraction &amp;f1, const fraction &amp;f2);\n    friend ostream&amp; operator&lt;&lt;(ostream&amp; out, const fraction&amp; f);\n    friend istream&amp; operator&gt;&gt;(istream&amp; in, fraction&amp; f);\n};\n\nusing namespace std;\n\n\nint gcd(int u, int v);\n\nfraction::fraction(int n, int d) : numerator(n), denominator(d)\n{\n    int     common = gcd(numerator, denominator);\n    numerator /= common;\n    denominator /= common;\n}\n\nfraction operator+(const fraction &amp;f1, const fraction &amp;f2)\n{\n    int     n = f1.numerator * f2.denominator + f2.numerator * f1.denominator;\n    int     d = f1.denominator * f2.denominator;\n\n    return fraction(n, d);\n}\n\nfraction operator-(const fraction &amp;f1, const fraction &amp;f2)\n{\n    int     n = f1.numerator * f2.denominator - f2.numerator * f1.denominator;\n    int     d = f1.denominator * f2.denominator;\n\n    return fraction(n, d);\n}\n\nfraction operator*(const fraction &amp;f1, const fraction &amp;f2)\n{\n    int     n = f1.numerator * f2.numerator;\n    int     d = f1.denominator * f2.denominator;\n\n    return fraction(n, d);\n}\n\nfraction operator/(const fraction &amp;f1, const fraction &amp;f2)\n{\n    int     n = f1.numerator * f2.denominator;\n    int     d = f1.denominator * f2.numerator;\n\n    return fraction(n, d);\n}\n\nostream&amp; operator&lt;&lt;(ostream&amp; out, const fraction&amp; f)\n{\n    out &lt;&lt; f.numerator &lt;&lt; \"/\" &lt;&lt; f.denominator &lt;&lt; endl;\n\n    return out;\n}\n\n\n\nistream&amp; operator&gt;&gt;(istream&amp; in, fraction&amp; f)\n{\n    cout &lt;&lt; \"Please enter the numerator: \";\n    cin &gt;&gt; f.numerator;\n    cout &lt;&lt; \"Please enter the denominator: \";\n    cin &gt;&gt; f.denominator;\n\n    return in;\n}\n\n\n\n// Euclid's Algorithm for finding the greatest common divisor\n\nint gcd(int u, int v)\n{\n    u = (u &lt; 0) ? -u : u;\n    v = (v &lt; 0) ? -v : v;\n\n    while (u &gt; 0)\n    {\n        if (u &lt; v)\n        {\n            int t = u;  // swap u and v\n            u = v;\n            v = t;\n        }\n\n        u -= v;\n    }\n\n    return v;           // the GCD of u and v\n}\n\nint main()\n{\n    char        choice;\n    fraction    left;\n    fraction    right;\n\n    do\n    {\n        cout &lt;&lt; \"A\\tAdd\\n\";\n        cout &lt;&lt; \"S\\tSub\\n\";\n        cout &lt;&lt; \"M\\tMult\\n\";\n        cout &lt;&lt; \"D\\tDiv\\n\";\n        cout &lt;&lt; \"E\\tExit\\n\";\n\n        cout &lt;&lt; \"\\nChoice?: \";\n\n        cin &gt;&gt; choice;\n        cin.ignore();\n\n        switch (choice)\n        {\n        case 'A':\n        case 'a':\n            cout &lt;&lt; \"Adding\" &lt;&lt; endl &lt;&lt; \"enter the first operand: \";\n            cin &gt;&gt; left;\n            cout &lt;&lt; \"enter the second operand: \";\n            cin &gt;&gt; right;\n            cout &lt;&lt; left + right;\n            break;\n        case 'E' :\n        case 'e' :\n            break;\n        default:\n            cerr &lt;&lt; \"Unrecognized choice: \" &lt;&lt; choice &lt;&lt; endl;\n            break;\n        }\n    } while (choice != 'e' &amp;&amp; choice != 'E');\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 9388932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/329e8b36f3802e230d0967abf07362d8?s=128&d=identicon&r=PG&f=1", "display_name": "J_Roost312", "link": "https://stackoverflow.com/users/9388932/j-roost312"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "accepted_answer_id": 49661879, "answer_count": 1, "score": -1, "last_activity_date": 1522889125, "creation_date": 1522883824, "question_id": 49661845, "link": "https://stackoverflow.com/questions/49661845/replacing-function-calls-with-overloaded-operators-c", "title": "Replacing function calls with Overloaded Operators C++", "body": "<p>In my assignment, I have been stuck on one area know matter how many times I read the text book or try and search for help. I feel really confused in this spot, and could really use some advice so I can get over this hurdle as well as learn what is proper. I am still new to programming. So bear with me. We have two .cpp files and one .h file. One of the .cpp has a switch statement that calls different functions depending on users choice. In the old assignment, it was just calling functions, but we are using the same assignment and changing it to overloaded operators. We are instructed to manipulate the .cpp file to replace function calls with our operators. But, I can not figure out how to call those operators, so that they print out their prompts and take in the users values through the operators rather than the old functions. TIA for any help.</p>\n\n<p>.h file</p>\n\n<pre><code>    #ifndef _FRACTION_H_\n    #define _FRACTION_H_\n    #include \"iostream\"\n    using namespace std;\n\n    class fraction\n    {\n    private:\n        int      numerator;\n        int      denominator;\n\n    public:\n        fraction(int n = 0, int d = 1) : numerator(n), denominator(d) {};\n        friend fraction operator+(fraction f1, fraction f2);\n        friend fraction operator-(fraction f1, fraction f2);\n        friend fraction operator*(fraction f1, fraction f2);\n        friend fraction operator/(fraction f1, fraction f2);\n        friend ostream&amp; operator&lt;&lt;(ostream&amp; out, fraction&amp; f);\n        friend istream&amp; operator&gt;&gt;(istream&amp; in, fraction&amp; f);\n    };\n\n    #endif\n</code></pre>\n\n<p>.cpp file</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"fraction.h\"\nusing namespace std;\n\n\nint gcd(int u, int v);\n\n\n\nfraction::fraction(int n, int d) : numerator(n), denominator(d)\n{\n    int     common = gcd(numerator, denominator);\n    numerator /= common;\n    denominator /= common;\n}\n\n\n\nfraction operator+(fraction f1, fraction f2)\n{\n    int     n = f1.numerator * f2.denominator + f2.numerator * f1.denominator;\n    int     d = f1.denominator * f2.denominator;\n\n    return fraction(n, d);\n}\n\n\n\nfraction operator-(fraction f1, fraction f2)\n{\n    int     n = f1.numerator * f2.denominator - f2.numerator * f1.denominator;\n    int     d = f1.denominator * f2.denominator;\n\n    return fraction(n, d);\n}\n\n\nfraction operator*(fraction f1, fraction f2)\n{\n    int     n = f1.numerator * f2.numerator;\n    int     d = f1.denominator * f2.denominator;\n\n    return fraction(n, d);\n}\n\n\nfraction operator/(fraction f1, fraction f2)\n{\n    int     n = f1.numerator * f2.denominator;\n    int     d = f1.denominator * f2.numerator;\n\n    return fraction(n, d);\n}\n\n\nostream&amp; operator&lt;&lt;(ostream&amp; out, fraction&amp; f)\n{\n    out &lt;&lt; f.numerator &lt;&lt; \"/\" &lt;&lt; f.denominator &lt;&lt; endl;\n\n    return out;\n}\n\n\n\nistream&amp; operator&gt;&gt;(istream&amp; in, fraction&amp; f)\n{\n    cout &lt;&lt; \"Please enter the numerator: \";\n    cin &gt;&gt; f.numerator;\n    cout &lt;&lt; \"Please enter the denominator: \";\n    cin &gt;&gt; f.denominator;\n\n    return in;\n}\n\n\n\n// Euclid's Algorithm for finding the greatest common divisor\n\nint gcd(int u, int v)\n{\n    u = (u &lt; 0) ? -u : u;\n    v = (v &lt; 0) ? -v : v;\n\n    while (u &gt; 0)\n    {\n        if (u &lt; v)\n        {\n            int t = u;  // swap u and v\n            u = v;\n            v = t;\n        }\n\n        u -= v;\n    }\n\n    return v;           // the GCD of u and v\n}\n</code></pre>\n\n<p>.cpp file (this is the one I need to replace function calls with operators)\nThis is where I am stuck, and not sure how to replace my function calls with my operators.</p>\n\n<pre><code>#include \"fraction.h\"\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    char        choice;\n    fraction    left;\n    fraction    right;\n\n    do\n    {\n        cout &lt;&lt; \"A\\tAdd\\n\";\n        cout &lt;&lt; \"S\\tSub\\n\";\n        cout &lt;&lt; \"M\\tMult\\n\";\n        cout &lt;&lt; \"D\\tDiv\\n\";\n        cout &lt;&lt; \"E\\tExit\\n\";\n\n        cout &lt;&lt; \"\\nChoice?: \";\n\n        cin &gt;&gt; choice;\n        cin.ignore();\n\n        switch (choice)\n        {\n            case 'A':\n            case 'a':\n                cout &lt;&lt; \"Adding\" &lt;&lt; endl;\n                cout &lt;&lt; \"enter the first operand: \";\n                left.read();\n                cout &lt;&lt; \"enter the second operand: \";\n                right.read();\n                left.add(right).print();\n                break;\n            case 'S':\n            case 's':\n                cout &lt;&lt; \"enter the first operand: \";\n                left.read();\n                cout &lt;&lt; \"enter the second operand: \";\n                right.read();\n                left.sub(right).print();\n                break;\n            case 'M':\n            case 'm':\n                cout &lt;&lt; \"enter the first operand: \";\n                left.read();\n                cout &lt;&lt; \"enter the second operand: \";\n                right.read();\n                left.mult(right).print();\n                break;\n            case 'D':\n            case 'd':\n                cout &lt;&lt; \"enter the first operand: \";\n                left.read();\n                cout &lt;&lt; \"enter the second operand: \";\n                right.read();\n                left.div(right).print();\n                break;\n            case 'E' :\n            case 'e' :\n                break;\n            default:\n                cerr &lt;&lt; \"Unrecognized choice: \" &lt;&lt; choice &lt;&lt; endl;\n                break;\n        }\n    } while (choice != 'e' &amp;&amp; choice != 'E');\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "accessor"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 1, "creation_date": 1522882890, "post_id": 49661688, "comment_id": 86333287, "body": "There is no implicit multiplication in C++. Add some <code>*</code>&#39;s."}, {"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 1, "creation_date": 1522882898, "post_id": 49661688, "comment_id": 86333291, "body": "<code>(xArg)(xArg)</code> is not a valid expression.  Do you want them multiplied?  If so <code>sqrt(xArg*xArg + yArg * yArg)</code> is sufficient"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 9418866, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5xlcj5Nz1Ac/AAAAAAAAAAI/AAAAAAAAATE/x5fi1FEEGzI/photo.jpg?sz=128", "display_name": "Ana", "link": "https://stackoverflow.com/users/9418866/ana"}, "edited": false, "score": 0, "creation_date": 1522883256, "post_id": 49661733, "comment_id": 86333387, "body": "oh wow, thank you! no idea how i missed something that simple"}], "tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": true, "score": 2, "last_activity_date": 1522883067, "creation_date": 1522883067, "answer_id": 49661733, "question_id": 49661688, "link": "https://stackoverflow.com/questions/49661688/using-accessor-to-print-out-data-in-two-formats/49661733#49661733", "title": "Using accessor to print out data in two formats", "body": "<p><code>(xArg)(xArg)</code> looks <em>kind of</em> like a function call <code>f(xArg)</code>.</p>\n\n<p>The real problem is that in C++, unlike in math, there is no implicit multiplication. You have to be explict - <code>xArg*xArg + yArg*yArg</code>.</p>\n"}], "owner": {"reputation": 97, "user_id": 9418866, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5xlcj5Nz1Ac/AAAAAAAAAAI/AAAAAAAAATE/x5fi1FEEGzI/photo.jpg?sz=128", "display_name": "Ana", "link": "https://stackoverflow.com/users/9418866/ana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 49661733, "answer_count": 1, "score": 1, "last_activity_date": 1522883477, "creation_date": 1522882754, "last_edit_date": 1522883477, "question_id": 49661688, "link": "https://stackoverflow.com/questions/49661688/using-accessor-to-print-out-data-in-two-formats", "title": "Using accessor to print out data in two formats", "body": "<p>I'm trying to use an accessor function to print out/return data from a class, after manipulating it. I am currently getting an error:</p>\n\n<blockquote>\n  <p>expression preceding parentheses of apparent call must have pointer-to function type</p>\n</blockquote>\n\n<p>The <code>forceType</code>, <code>xArg</code> and <code>yArg</code> parameter values are taken from a file that is being read in <code>main()</code>. I need to be able to print out the original <code>xArg</code> and the <code>pol</code> (which is modified <code>xArg</code>).</p>\n\n<p>I'm very new to all of this, so would really appreciate some help.</p>\n\n<pre><code>Force::Force(char fType, float xAr, float yAr)\n{\n    forceType = fType;\n    xArg = xAr;\n    yArg = yAr;    \n}\n\nfloat Force::GetXArg () const {\n    if (forceType == 'c'){\n        return xArg;\n    }\n    else {\n        float pol = sqrt((xArg)(xArg)+(yArg)(yArg));\n        cout &lt;&lt; pol &lt;&lt; endl;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 1, "creation_date": 1522882896, "post_id": 49661673, "comment_id": 86333289, "body": "The other question is somewhat more specialized (it wants the constructor of a type specified with a template), but the answer is applicable to yours."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1522883413, "post_id": 49661673, "comment_id": 86333429, "body": "Like the answer to the other question says - <code>std::string</code> is the name of the class, not the name of a constructor. The constructor doesn&#39;t <i>have</i> a name on its own."}], "owner": {"reputation": 764, "user_id": 3367128, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/100000468302976/picture?type=large", "display_name": "dylhunn", "link": "https://stackoverflow.com/users/3367128/dylhunn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1522882847, "answer_count": 0, "score": 0, "last_activity_date": 1522882623, "creation_date": 1522882623, "question_id": 49661673, "link": "https://stackoverflow.com/questions/49661673/assign-a-constructor-to-an-stdfunction-variable", "closed_reason": "Duplicate", "title": "Assign a constructor to an std::function variable", "body": "<p>I would like to assign a specific constructor of the <code>string</code> class (the one that takes <code>char*</code>) to an std::function variable, like so:</p>\n\n<pre><code>std::function&lt;string(char*)&gt; stringConstructor = std::string; // incorrect\n</code></pre>\n\n<p>More generally, I would like to be able to pass this constructor as a parameter to another function that takes an argument of type <code>std::function&lt;string(char*)&gt;</code>. Is this possible?</p>\n"}, {"tags": ["c#", "c++", ".net", "dll"], "comments": [{"owner": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "edited": false, "score": 0, "creation_date": 1522885385, "post_id": 49661658, "comment_id": 86333984, "body": "Start by taking a step back. Can you make the parameter an <code>IntPtr</code> and  pass an AllocHGlobal&#39;d block, and then read from that?  Does that still crash? If the answer is yes, it still crashes, then plainly the problem is somewhere else. If no, well, then problem solved."}, {"owner": {"reputation": 11, "user_id": 8755067, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TqGBj.jpg?s=128&g=1", "display_name": "O. Shep", "link": "https://stackoverflow.com/users/8755067/o-shep"}, "reply_to_user": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "edited": false, "score": 0, "creation_date": 1522887452, "post_id": 49661658, "comment_id": 86334590, "body": "Yeah I tried that method, but the problem still persists."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1522946367, "post_id": 49661658, "comment_id": 86366058, "body": "You have good evidence that the native code corrupted the GC heap.  Putting GC.Collect() after the call might induce the crash sooner.  Whether that corruption is caused by this particular call is not so obvious, the unlikely scenario is that the C++ code could access the array but the C# code could not.  Hopefully it doesn&#39;t swallow an AccessViolationException, look in the Output window.  Fwiw, how <i>length</i> is calculated is not visible, forgetting to compensate for bpp and stride are classic bugs."}, {"owner": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1523300622, "post_id": 49661658, "comment_id": 86494317, "body": "@HansPassant: That&#39;s the scenario I was thinking of when I suggested that a global-alloc&#39;d block be passed in. If the native code is writing past the bounds of that block then odds are good it won&#39;t hit a CLR data structure, unlike if it is writing past a CLR heap allocated block."}], "answers": [{"tags": [], "owner": {"reputation": 24396, "user_id": 18192, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c939f58c5869fead24efafcec0056914?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/18192/brian"}, "is_accepted": false, "score": 0, "last_activity_date": 1522945848, "creation_date": 1522945848, "answer_id": 49677286, "question_id": 49661658, "link": "https://stackoverflow.com/questions/49661658/strange-issues-trying-to-pass-uint8-t-from-c-to-c/49677286#49677286", "title": "Strange Issues Trying to Pass uint8_t* from C# to C++", "body": "<p>Without access to the library itself, it's hard to provide direct help.  However, interop problems can often be resolved by creating a shim, then contracting the shim's code into non-existence once the shim is working.  An added benefit to this approach is that it splits the problem into more manageable chunks, and makes it easier to ask for focused help if stuck.</p>\n\n<p><strong>How to solve C#/C++ interop problems via shimming:</strong></p>\n\n<ol>\n<li>Write a C++ application which can call into the library. \nIdeally, this is just a matter of compiling a code sample from the\nvendor.  </li>\n<li>Write a trivial C++ library which you can call from C#. \nThis should just be a matter of compiling a code sample from MSDN or elsewhere.</li>\n<li>Iteratively modify the signature of the C++ and C# code from step 2 until it is identical to the signature used in step 1.  If you get stuck on any of the complex parameters, split them into primitives and pass them individually.   \n\n<ul>\n<li>If you split your parameters into basic enough components, you'll probably be able to find working code samples.</li>\n<li>If you get stuck on a specific parameter, write both a broken version (using the parameter you're stuck on) and a working version (using a parameter you got to work in step 2).  Then, you can post a question on SO like, \n\n<blockquote>\n  <p>The above code works, but when I change the parameter from classA to classB, line 5 causes a crash with the error message \"error: foo\". I thought this change was OK because of ZZZ.  How can I add a classB parameter without this crash? </p>\n</blockquote></li>\n</ul></li>\n<li>Recompile your application in step 1 as a library.  Modify the code in step 3 to call this library.</li>\n<li>(Optional) Inline the code from steps 1 and 3 (i.e., get rid of the shim).  If this step fails, you'll probably be stuck on a specific parameter, which again may be suitable to rework into a stackoverflow question.</li>\n<li>(Optional) Recombine any parameters that were split during step 3.</li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 8755067, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TqGBj.jpg?s=128&g=1", "display_name": "O. Shep", "link": "https://stackoverflow.com/users/8755067/o-shep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1522945848, "creation_date": 1522882544, "question_id": 49661658, "link": "https://stackoverflow.com/questions/49661658/strange-issues-trying-to-pass-uint8-t-from-c-to-c", "title": "Strange Issues Trying to Pass uint8_t* from C# to C++", "body": "<p>I am having major issues working with a third-party API from C#.  I do not have the full source code for this API, nor do I know how the DLL was compiled.  I have been trying for many, many hours to figure this out to no avail.</p>\n\n<p>As far as I can tell, the function in question is defined in C++ as such:\n</p>\n\n<pre><code>    extern \"C\" uint32_t __stdcall GetQHYCCDSingleFrame(qhyccd_handle *handle,\n uint32_t *w, uint32_t *h, uint32_t *bpp, uint32_t *channels, uint8_t *imgdata);\n</code></pre>\n\n<p>The trouble-object in question is <code>uint8_t *imgdata</code>.  It is intended to be an array of 8-bit integers, passed by reference to the function. In C++, I declare the object as such:</p>\n\n<pre><code>ImgData = (unsigned char *)malloc(length);\nmemset(ImgData,0,length);\n</code></pre>\n\n<p>before passing it to the above function.</p>\n\n<p>In C#, I have tried a few different methods of passing the <code>imgdata</code> object correctly, but all result in similar issues.  For example, I have declared a byte array in C# as:\n<code>byte[] ImgData = new byte[length]</code>.  The <code>GetQHYCCDSingleFrame</code> function is imported into C# using the following declaration:</p>\n\n<pre><code>[DllImport(\"qhyccd.dll\", EntryPoint = \"GetQHYCCDSingleFrame\")]\n        public static extern UInt32 GetQHYCCDSingleFrame(IntPtr handle, ref UInt32 w, ref UInt32 h, ref UInt32 bpp, ref UInt32 channels, byte[] rawArray);\n</code></pre>\n\n<p>I can call the function properly without errors, but I run into issues when trying to use the <code>ImgData</code> array in C#.  In particular, say that I would like to print each element in the array to the console using the following code snippet:</p>\n\n<pre><code>for (int i = 0; i &lt; length; i++)\n{\n    Console.WriteLine(Convert.ToString(ImgData[i]));  \n}\n</code></pre>\n\n<p>This appears to run until about the 84,000th element, at which point a pop-up occurs telling me that \"Application has stopped working\", with no other error information.  I can access that element just fine, but if I want to write each element to a .CSV file, looping will always crash my program with no error information.  To make things even stranger the following code snippet will work:</p>\n\n<pre><code>byte safeByte;\nfor (int i = 0; i &lt; length; i++)\n{\n   safeByte = rawArray[i];\n\n}\n</code></pre>\n\n<p>which indicates to me that it's not necessarily a memory-access issue.  And, finally, to make things even more confusing, this code snippet will crash with the same \"Application has stopped working\" popup:</p>\n\n<pre><code>byte safeByte;\nbyte[] newArray = new byte[length];\nfor (int i = 0; i &lt; length; i++)\n{\n     safeByte = rawArray[i];\n}\n</code></pre>\n\n<p>except that it will crash while declaring the <code>newArray</code> object, before even entering the loop.</p>\n\n<p>I have tried many solutions from stackoverflow questions similar to mine, but nothing has worked, and I will always get the same \"Application has stopped working\" popup.  I really just need to save this data somehow to a text file in its integer form.  </p>\n"}, {"tags": ["c++", "glm-math"], "comments": [{"owner": {"reputation": 3141, "user_id": 2468549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b87d95c561b24d120cbfb5a1c5c9867?s=128&d=identicon&r=PG", "display_name": "Frax", "link": "https://stackoverflow.com/users/2468549/frax"}, "edited": false, "score": 0, "creation_date": 1523563702, "post_id": 49661585, "comment_id": 86624891, "body": "Maybe for a single number it returns true or false. For a vector it apparently returns a vector, and you try to assign it to a boolean variable."}], "answers": [{"tags": [], "owner": {"reputation": 698, "user_id": 2323908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80b84a0e679c6c32e168f2b8865cd4cb?s=128&d=identicon&r=PG&f=1", "display_name": "Joakim Thor&#233;n", "link": "https://stackoverflow.com/users/2323908/joakim-thor%c3%a9n"}, "is_accepted": false, "score": 1, "last_activity_date": 1552748077, "creation_date": 1552748077, "answer_id": 55198090, "question_id": 49661585, "link": "https://stackoverflow.com/questions/49661585/how-to-use-glmisnan/55198090#55198090", "title": "How to use glm::isnan()", "body": "<p>The GLM 0.9.9 documentation for <code>glm::isnan</code> can be found at <a href=\"https://glm.g-truc.net/0.9.9/api/a00662.html\" rel=\"nofollow noreferrer\">https://glm.g-truc.net/0.9.9/api/a00662.html</a>. It says that the return type is <code>vec&lt;L, bool, Q&gt;</code>, so you can use <code>glm::all</code> like so:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>bool b = glm::all(glm::isnan(my_vector));\n</code></pre>\n\n<p>to check if all components of <code>my_vector</code> are NaN.</p>\n"}], "owner": {"reputation": 501, "user_id": 4083078, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/54cb2765c41c930e79afcc184c78b1f1?s=128&d=identicon&r=PG&f=1", "display_name": "Octo", "link": "https://stackoverflow.com/users/4083078/octo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 730, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1552748077, "creation_date": 1522882089, "last_edit_date": 1523563141, "question_id": 49661585, "link": "https://stackoverflow.com/questions/49661585/how-to-use-glmisnan", "title": "How to use glm::isnan()", "body": "<p>I can't get glm::isnan() to compile in my Visual C++ project.</p>\n\n<pre><code>#include &lt;glm/glm.hpp&gt;\n\nglm::vec3 my_vector = ... ;\n\nbool b = glm::isnan(my_vector);\n</code></pre>\n\n<p>The last line causes the following compilation error:</p>\n\n<p>error C2440: 'initializing' : cannot convert from 'glm::detail::tvec3' to 'bool'</p>\n\n<p>According to documentation it returs true or false.</p>\n"}, {"tags": ["c++", "opencv"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 8740138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa739dc8406c9dbd7ce7534aeb069c47?s=128&d=identicon&r=PG&f=1", "display_name": "SEPS", "link": "https://stackoverflow.com/users/8740138/seps"}, "edited": false, "score": 0, "creation_date": 1522885549, "post_id": 49661992, "comment_id": 86334032, "body": "thank you very much :) could you please tell me for what type CV_32S is good for? THX"}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "reply_to_user": {"reputation": 85, "user_id": 8740138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa739dc8406c9dbd7ce7534aeb069c47?s=128&d=identicon&r=PG&f=1", "display_name": "SEPS", "link": "https://stackoverflow.com/users/8740138/seps"}, "edited": false, "score": 0, "creation_date": 1522885784, "post_id": 49661992, "comment_id": 86334105, "body": "<code>CV_32S</code> means signed integer, as usual <code>int</code>. I&#39;ve never got to use it though."}], "tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": true, "score": 1, "last_activity_date": 1522885055, "creation_date": 1522885055, "answer_id": 49661992, "question_id": 49661579, "link": "https://stackoverflow.com/questions/49661579/initialize-cvmatones-with-defined-size-of-type-int/49661992#49661992", "title": "initialize cv::Mat::ones with defined Size of type int", "body": "<p>it's built in: <code>cv::Mat mm = cv::Mat::ones(width, height, cv::CV_32S)</code></p>\n"}], "owner": {"reputation": 85, "user_id": 8740138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa739dc8406c9dbd7ce7534aeb069c47?s=128&d=identicon&r=PG&f=1", "display_name": "SEPS", "link": "https://stackoverflow.com/users/8740138/seps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 49661992, "answer_count": 1, "score": 0, "last_activity_date": 1522885055, "creation_date": 1522882042, "question_id": 49661579, "link": "https://stackoverflow.com/questions/49661579/initialize-cvmatones-with-defined-size-of-type-int", "title": "initialize cv::Mat::ones with defined Size of type int", "body": "<p>I just started working with opencv and I just have some kind of basic question. I have an integer which is defined with patch_size * patch_size.</p>\n\n<p>I created a Matrix cv::Mat::ones() and want to initialize this Matrix in first parameter (Size size) with Size of this patch_size * patch_size. But I am not able to convert/cast an Integer into Size.</p>\n\n<p>So my question is, what is a good way to do this.</p>\n\n<p>I also want to know, how I can define the second parameter (int type) in this case</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "sql", "sqlite"], "comments": [{"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 1, "creation_date": 1522881380, "post_id": 49661402, "comment_id": 86332716, "body": "You can&#39;t use <code>char*</code> like that. It&#39;s time to ditch <code>char*</code> and use <code>std::string</code> instead, or even <code>std::stringstream</code> (to allow easier creation of SQL statements)"}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1522881450, "post_id": 49661402, "comment_id": 86332738, "body": "It is a bad idea to take user input and put it straight into a SQL statement, but for your assignment it shouldn&#39;t matter. You should filter their input though. <a href=\"https://xkcd.com/327/\" rel=\"nofollow noreferrer\">Relevant XKCD</a>"}, {"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 0, "creation_date": 1522881580, "post_id": 49661402, "comment_id": 86332795, "body": "pSQL[1] allows SQL injection and has invalid syntax."}, {"owner": {"reputation": 700, "user_id": 1243281, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e19799c46384e196f77009cac79f365b?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/1243281/jack"}, "edited": false, "score": 0, "creation_date": 1522881926, "post_id": 49661402, "comment_id": 86332922, "body": "If you want to avoid injection issues, check out <a href=\"https://www.sqlite.org/c3ref/stmt.html\" rel=\"nofollow noreferrer\">prepared statements</a>"}, {"owner": {"reputation": 5, "user_id": 9426328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84fc2ba5d765bf573c22d8aa5a7ed628?s=128&d=identicon&r=PG&f=1", "display_name": "KingKenny04", "link": "https://stackoverflow.com/users/9426328/kingkenny04"}, "edited": false, "score": 0, "creation_date": 1522882540, "post_id": 49661402, "comment_id": 86333148, "body": "String doesn&#39;t work, either.  See above.  How do I &quot;filter&quot; an input?  This is my first programming class so I&#39;m fairly new to C++, and we only just looked at SQL for the first time last week."}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1522883842, "post_id": 49661402, "comment_id": 86333565, "body": "Like I said, you need to use <code>std::stringstream</code>: <code>std::ostringstream ss; ss &lt;&lt; &quot;insert into expenses (&#39; &lt;&lt; saleDesc &lt;&lt; &quot;&#39;), &quot; &lt;&lt; price</code> etc"}], "answers": [{"tags": [], "owner": {"reputation": 746, "user_id": 2480711, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2cf2031176ea40b5be577a9a1b025ada?s=128&d=identicon&r=PG", "display_name": "dempzorz", "link": "https://stackoverflow.com/users/2480711/dempzorz"}, "is_accepted": false, "score": 1, "last_activity_date": 1522884242, "creation_date": 1522884242, "answer_id": 49661886, "question_id": 49661402, "link": "https://stackoverflow.com/questions/49661402/c-user-input-to-sqlite3/49661886#49661886", "title": "C++ user input to sqlite3", "body": "<p>Since this is just a class assignment, I doubt that you are going to have to worry about SQL injection attacks, so I wouldn't bother trying to sanitize your input.</p>\n\n<p>Your other issue is you are confusing <code>char*</code>s and <code>std::string</code>s.  The sqlite API requires you to pass it <code>char*</code>s so it can be used from C code, however that doesn't mean you need to use them.  <code>std::string</code> is a wrapper for the char array, which you can get with the <code>c_str()</code> method.  I don't think you really need to put the SQL statements in an array at the end.  How about something like this:</p>\n\n<pre><code>std::string  addTable = \"CREATE TABLE IF NOT EXISTS expenses(id INTEGER PRIMARY KEY \"\n                        \"AUTOINCREMENT NOT NULL, logged TIMESTAMP DEFAULT \"\n                        \"CURRENT_TIMESTAMP NOT NULL, desc VARCHAR(40), price INT,\"\n                        \"satisfaction INT)\";\nstd::string insertExpense = \"INSERT INTO expenses('\" + saleDesc + \"',\" + std::to_string(price) \",\" + std::to_string(satisf) + \")\";\nstd::string selectAllExpenses = \"SELECT * FROM expenses\";\n</code></pre>\n\n<p>Then when you want to pass it to the sqlite API, you could use <code>c_str()</code></p>\n\n<pre><code>sqlite3_exec(db, addTable.c_str(), ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5, "user_id": 9426328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84fc2ba5d765bf573c22d8aa5a7ed628?s=128&d=identicon&r=PG&f=1", "display_name": "KingKenny04", "link": "https://stackoverflow.com/users/9426328/kingkenny04"}, "is_accepted": true, "score": 0, "last_activity_date": 1522979692, "creation_date": 1522979692, "answer_id": 49684064, "question_id": 49661402, "link": "https://stackoverflow.com/questions/49661402/c-user-input-to-sqlite3/49684064#49684064", "title": "C++ user input to sqlite3", "body": "<p>Thanks everyone for the responses.  I spent about an hour and a half with my professor yesterday going over this, and this actually stumped him.  I eventually found a way to make this work with the array, but I want to stress that the solution I came up with is pretty much only good for this assignment.  For anyone reading this with a similar problem, this method is not only messy, but also allows for SQL injection which should be avoided.</p>\n\n<p>The problem, as many here have mentioned in comments, was that I was trying to stick a string into a char* array.  The workaround we came up with was to add the SQL commands with the variables expanded in them directly to a string variable, like so:</p>\n\n<pre><code>string insertExpense = \"INSERT INTO expenses(desc, price, satisf) VALUES ('\" + saleDesc + \"', \"\n                        \"\"+ to_string(price) + \", \" + to_string(satisf) + \")\";\n</code></pre>\n\n<p>We then made that variable a c_str and assigned it to a char* variable, like so:</p>\n\n<pre><code>const char *line1 = insertExpense.c_str();\n</code></pre>\n\n<p>We then simply assigned this char* variable directly to the correct position in the array, like so:</p>\n\n<pre><code>const char *pSQL[6];\npSQL[0] = \"CREATE TABLE IF NOT EXISTS expenses(id INTEGER PRIMARY KEY \"\n          \"AUTOINCREMENT NOT NULL, logged TIMESTAMP DEFAULT \"\n          \"CURRENT_TIMESTAMP NOT NULL, desc VARCHAR(40), price REAL,\"\n          \"satisf INT)\";\npSQL[1] = line1;\npSQL[2] = \"SELECT * FROM expenses\";\npSQL[3] = \"SELECT sum(satisf) FROM expenses\";\n</code></pre>\n\n<p>This method correctly makes the SQL table and populates it with the correct statements as stored in their respective variables.  I want to stress again that this method is both very messy and dangerous, and for anyone with a similar issue, it is probably a much better idea to use prepared statements, as others in the comments have already mentioned.  Thank you everyone!</p>\n"}], "owner": {"reputation": 5, "user_id": 9426328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84fc2ba5d765bf573c22d8aa5a7ed628?s=128&d=identicon&r=PG&f=1", "display_name": "KingKenny04", "link": "https://stackoverflow.com/users/9426328/kingkenny04"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 965, "favorite_count": 0, "accepted_answer_id": 49684064, "answer_count": 2, "score": 0, "last_activity_date": 1522979692, "creation_date": 1522880922, "question_id": 49661402, "link": "https://stackoverflow.com/questions/49661402/c-user-input-to-sqlite3", "title": "C++ user input to sqlite3", "body": "<p>I have a class assignment that asks us to write a C++ program that tracks spending, allows modification of the records, and returns \"satisfaction\" numbers about individual expenses (i.e. how good the user felt about spending that money).  Our instructor has indicated that he'd like us to use sqlite3 in this program.  He's given us a sample program that builds a table in sqlite3 and inputs predetermined values for the columns.  This program runs just fine without issue.</p>\n\n<p>What I am trying to do is modify the program to accept user inputs and store them in the sqlite3 database.  This is the code I have thus far:</p>\n\n<pre><code>int main()\n{\n    string salesDesc;\n    int price;\n    int satisf;\n    sqlite3 *db;\n    char *szErrMsg = 0;\n\n    cout &lt;&lt; \"Description of Expense: \";\n    cin &gt;&gt; saleDesc;\n    cout &lt;&lt; endl;\n\n    cout &lt;&lt; \"Price: \";\n    cin &gt;&gt; price;\n    cout &lt;&lt; endl;\n\n    cout &lt;&lt; \"Your Satisfaction: \";\n    cin &gt;&gt; satisf;\n    cout &lt;&lt; endl;\n\n    // open database\n    int rc = sqlite3_open(\"spending_track.sqlite\", &amp;db);\n    if (rc)\n    {\n        cout &lt;&lt; \"Cannot open database\\n\";\n    }\n    else\n    {\n        cout &lt;&lt; \"Database opened successfully\\n\";\n    }\n\n    const char *pSQL[6];\n    pSQL[0] = \"CREATE TABLE IF NOT EXISTS expenses(id INTEGER PRIMARY KEY \"\n              \"AUTOINCREMENT NOT NULL, logged TIMESTAMP DEFAULT \"\n              \"CURRENT_TIMESTAMP NOT NULL, desc VARCHAR(40), price INT,\"\n              \"satisfaction INT)\";\n    pSQL[1] = \"INSERT INTO expenses('\" + string(saleDesc) + \"',\" price \",\" satisf \")\";\n    pSQL[2] = \"SELECT * FROM expenses\";\n    pSQL[3] = \"SELECT sum(satisf) FROM expenses\";\n\n    // blablabla the rest of the program\n</code></pre>\n\n<p>When I try to compile this, I receive the following error:</p>\n\n<blockquote>\n  <p>error: cannot convert 'std::_cxx11::basic_string' to 'const char*' in assignment \n  pSQL[1] = \"INSERT INTO expenses('\" + string(saleDesc) + \"',\" price \",\" satisf \")\";</p>\n</blockquote>\n\n<p>If I change <code>string(saleDesc)</code> to <code>saleDesc</code>, I get the same error.</p>\n\n<p>If I change <code>string saleDesc;</code> to <code>char* saleDesc;</code>, I receive the following error:</p>\n\n<blockquote>\n  <p>error: invalid operands of types 'const char[23]' and 'char*' to binary 'operator+'\n  pSQL[1] = \"INSERT INTO expenses('\" + string(saleDesc) + \"',\" price \",\" satisf \")\";</p>\n</blockquote>\n\n<p>I'm not sure what else to try to get this to work.  I have also heard that it's a bad idea to allow users to directly input to sqlite3 tables.  What would be a more \"proper\" way to do this?</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1522956308, "post_id": 49661469, "comment_id": 86371779, "body": "What happened to type T for the type of data? There are two types that are needed."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1522956710, "post_id": 49661469, "comment_id": 86372006, "body": "<code>Matrix</code> only has 1 template parameter <code>T</code>. The approach I showed allows you to use whatever type of input iterators you want, as long as dereferencing a given iterator yields a value that is a <code>T</code>, or is implicitly convertible to a <code>T</code>"}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1522956798, "post_id": 49661469, "comment_id": 86372051, "body": "I got it to compile successfully, but I really don&#39;t understand what I am doing with &#39;typename std::iterator_traits&lt;InputIterator&gt;::iterator_category()&#39;"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1522956892, "post_id": 49661469, "comment_id": 86372105, "body": "You don&#39;t have to use that if you don&#39;t want to. It is just a way of ensuring that whatever iterator type you use for <code>InputIt</code> is actually a forward input iterator, and not a non-forward input iterator, or an output iterator."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1522956937, "post_id": 49661469, "comment_id": 86372130, "body": "I want to. I just need to understand how it works better. Perhaps I should Google more on templates and typename."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1522956995, "post_id": 49661469, "comment_id": 86372160, "body": "Did you read the article I linked to in my answer? Using this technique, the code will compile only if the type of iterators (<code>InputIt</code>) you pass in are actually forward input iterators. In other words, if <code>iterator_category()</code> returns <code>std::forward_iterator_tag</code> or a descendant.  Otherwise, the code will not compile, since <code>iterator_category()</code> would return a value that cannot be passed to the parameter that is expecting a <code>std::forward_iterator_tag</code>"}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1522957214, "post_id": 49661469, "comment_id": 86372272, "body": "Yea, and I can match the text you type up with thier example, but there really isn&#39;t much there on what &#39;typename&#39; keyword means, or how it works, or how it is passed and matched up with the tag."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 1, "creation_date": 1522957949, "post_id": 49661469, "comment_id": 86372658, "body": "Every type of iterator requires a <a href=\"http://en.cppreference.com/w/cpp/iterator/iterator_traits\" rel=\"nofollow noreferrer\"><code>std::iterator_traits</code></a> specialization (the STL handles this for standard iterators, you have to provide your own if you write your own iterators). <code>iterator_category</code> specifies a specific type of iterator tag. <code>typename</code> tells the compiler that <code>iterator_category</code> is a type resolved using a template parameter (passed to <code>std::iterator_traits</code>) that is dependent on another template (the one from <code>Matrix</code>). Calling <code>iterator_category()</code> creates an instance of whatever type <code>iterator_category</code> refers to"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1522959657, "last_edit_date": 1522959657, "creation_date": 1522881301, "answer_id": 49661469, "question_id": 49661373, "link": "https://stackoverflow.com/questions/49661373/take-a-range-as-an-argument/49661469#49661469", "title": "Take a range as an argument", "body": "<p>You are declaring your constructor's iterator parameters to be instances of <code>std::forward_iterator_tag</code>, which is an <a href=\"http://en.cppreference.com/w/cpp/iterator/iterator_tags\" rel=\"nofollow noreferrer\">iterator tag</a>, not an actual iterator.</p>\n\n<p>Iterator tags are used for restricting template specializations to specific types of iterators.</p>\n\n<p>For example, say an algorithm requires random-access iterators. It can produce a compiler error if non random-access iterators are passed to it.</p>\n\n<p>Or, multiple overloads of a given algorithm can use iterator tags to restrict the type of iterators they accept, so they can use different logic/optimizations when passed different types of iterators.</p>\n\n<p>In your case, to do what you want, you need to change your constructor to have a template parameter for the iterator type (just like STL algorithms do):</p>\n\n<pre><code>template&lt;class InputIt&gt;\nMatrix(const size_t order, InputIt first, InputIt last)\n</code></pre>\n\n<p>Now, you can pass in whatever type of iterator you want (as long as dereferencing an iterator yields a value that is compatible with your <code>Matrix</code> class's <code>T</code> template parameter, since that is how your constructor body is using the iterator values).</p>\n\n<p>Or, if you want to make sure that only iterators that are forward input iterators are passed in, and not any other types of iterators, you can do something more like this:</p>\n\n<pre><code>private:\n    template&lt;class InputIt&gt;\n    Matrix(const size_t order, InputIt first, InputIt last, std::forward_iterator_tag)\n    {\n        // initialization here ...\n    }\n\npublic:\n    template&lt;class InputIt&gt;\n    Matrix(const size_t order, InputIt first, InputIt last)\n        : Matrix(order, first, last, typename std::iterator_traits&lt;InputIt&gt;::iterator_category())\n    {\n    }\n</code></pre>\n\n<p>The code will compile only if <code>InputIt</code> is an iterator type whose <code>std::iterator_traits</code> specialization provides an <code>iterator_category</code> that is <code>std::forward_iterator_tag</code> or a descendant.</p>\n\n<p>This approach is commonly known as <a href=\"https://www.boost.org/community/generic_programming.html#tag_dispatching\" rel=\"nofollow noreferrer\">Tag Dispatching</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "is_accepted": false, "score": 0, "last_activity_date": 1522881944, "creation_date": 1522881944, "answer_id": 49661565, "question_id": 49661373, "link": "https://stackoverflow.com/questions/49661373/take-a-range-as-an-argument/49661565#49661565", "title": "Take a range as an argument", "body": "<p><code>forward_iterator_tag</code> is a tag that <a href=\"http://en.cppreference.com/w/cpp/iterator/iterator_tags\" rel=\"nofollow noreferrer\">defines the category of an iterator</a>. You won't be able to initialize an iterator from that parameter.</p>\n\n<p>Iterators can be pointers, classes, integers - basically any object that satisfies the <a href=\"http://en.cppreference.com/w/cpp/iterator#Iterator_categories\" rel=\"nofollow noreferrer\">iterator categories</a>. Clearly you can't anticipate what the type of iterator you will be passed in the general case, which is why it is common to have your functions deduce the iterators with templates.</p>\n\n<pre><code>template&lt;class InputIt&gt;\nvoid foo(InputIt begin, InputIt end);\n</code></pre>\n\n<p>This way you don't need to know the type of the iterators and can treat all possible iterator types in a uniform way.</p>\n"}, {"tags": [], "owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1522883887, "creation_date": 1522883887, "answer_id": 49661851, "question_id": 49661373, "link": "https://stackoverflow.com/questions/49661373/take-a-range-as-an-argument/49661851#49661851", "title": "Take a range as an argument", "body": "<p>You made your life hard by using vector of vectors.\nYou don't need that and it leads to memory fragmentation.</p>\n\n<pre><code>template&lt;class T&gt;\nclass Matrix\n{\nprivate:\n    std::size_t m_order;\n    std::vector&lt;T&gt; m_data;\n\npublic:\n    template &lt;class InputIterator&gt;\n    Matrix(std::size_t order, \n           InputIterator begin, InputIterator end)\n    : m_order(order)\n    {\n        if (std::distance(begin, end) &gt; order * order) {\n            throw std::runtime_error(\"invalid params\");\n        }\n        m_data.reserve(order * order);\n        std::copy(begin, end, std::back_inserter(m_data));\n        m_data.resize(order * order);\n    }\n\n    T GetElement(size_t row, size_t column) const\n    {\n        checkIndexes(row, column);\n        return m_data[row + column * m_order];\n    }\n\n    void SetElement(size_t row, size_t column, T value)\n    {\n        checkIndexes(row, column);\n        m_data[row + column * m_order] = value;\n    }\n\nprivate:\n    void checkIndexes(size_t row, size_t column) const {\n        if (row &gt; order || column &gt; order) {\n            throw std::runtime_error(\"invalid params\");\n        }\n    }\n\u2026 \u2026 \u2026\n</code></pre>\n"}], "owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 49661469, "answer_count": 3, "score": 0, "last_activity_date": 1522959657, "creation_date": 1522880778, "question_id": 49661373, "link": "https://stackoverflow.com/questions/49661373/take-a-range-as-an-argument", "title": "Take a range as an argument", "body": "<p>Many of the STL algorithms take a range and an argument. I am interested in seeing what it would take to take a range in my constructor.</p>\n\n<p>Suppose I am making a Matrix class. What would the constructor look like?\nI believe the forward iterator is the most generic.</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\ntemplate &lt;class T&gt;\nclass Matrix\n{\nprivate:\n\n    const size_t                m_order;\n    std::vector&lt;std::vector&lt;T&gt;&gt; m_data;\n\npublic:\n\n    Matrix(const size_t order, forward_iterator_tag begin, forward_iterator_tag end)\n        :\n        m_order(order)\n      , m_data (order, std::vector&lt;T&gt;(order))\n    {\n        if (std::distance(begin, end) != order * order)\n        {\n            throw std::runtime_error(\"invalid params\");\n        }\n\n        for (size_t currentRow = 0; currentRow &lt; m_order; ++currentRow)\n        {\n            for (size_t currentColumn = 0; currentColumn &lt; m_order; ++currentColumn)\n            {\n                m_data[row].push_back(*begin);\n\n                if (++begin == end)\n                {\n                    throw std::runtime_error(\"invalid params\");\n                }\n            }\n        }\n    }\n\n    T GetElement(size_t row, size_t column) const\n    {\n        if (row &gt; order || column &gt; order)\n        {\n            throw std::runtime_error(\"invalid params\");\n        }\n\n        return m_data[row][column];\n    }\n};\n\n\n//------------------------------------------------------------------------------\n// Finds all permutations of the distinct numbers that make up a matrix of order n, from 1 to n^2\nstd::vector&lt;std::vector&lt;size_t&gt;&gt; GetAllPermutations(size_t order)\n{\n    std::vector&lt;std::vector&lt;size_t&gt;&gt; result;\n\n    // It is important than we have these sorted least to greatest to start, in order to use the next_permutation algorithm\n    std::vector&lt;size_t&gt; elements;\n    for(size_t currentNumber = 1; currentNumber &lt;= order * order; ++currentNumber)\n    {\n        elements.push_back(currentNumber);\n    }\n\n    do\n    {\n        // Store the current permutation\n        result.push_back(elements);\n\n    } while (std::next_permutation(elements.begin(), elements.end()));\n\n    return result;\n}\n\nint main()\n{\n    const size_t order = 3;\n    std::vector&lt;std::vector&lt;size_t&gt;&gt; permutations = GetAllPermutations(order);\n\n    Matrix&lt;size_t&gt; matrix(order, permutations.begin(), permutations.end());\n\n    return 0;\n}\n</code></pre>\n\n<p>But the iterator is not the right type evidently. What do I use?</p>\n"}, {"tags": ["c++", "c++11", "templates"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1522880500, "post_id": 49661287, "comment_id": 86332390, "body": "What does it say past that in the error message? The compiler also tells you why it couldn&#39;t match the given possibility"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1522880704, "post_id": 49661287, "comment_id": 86332460, "body": "The compiler can&#39;t deduce <code>T</code> from the lambda. You need some way of ruling out the <code>function</code> parameter from deduction."}, {"owner": {"reputation": 764, "user_id": 3367128, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/100000468302976/picture?type=large", "display_name": "dylhunn", "link": "https://stackoverflow.com/users/3367128/dylhunn"}, "edited": false, "score": 0, "creation_date": 1522880815, "post_id": 49661287, "comment_id": 86332504, "body": "Indeed, explicitly specifying the type at the call site <code>getRecord&lt;type&gt;(...)</code> causes the compiler to generate much more useful error messages (in this case, I had a missing <code>const</code> elsewhere.)"}], "owner": {"reputation": 764, "user_id": 3367128, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/100000468302976/picture?type=large", "display_name": "dylhunn", "link": "https://stackoverflow.com/users/3367128/dylhunn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1522880479, "answer_count": 0, "score": 0, "last_activity_date": 1522880322, "creation_date": 1522880322, "question_id": 49661287, "link": "https://stackoverflow.com/questions/49661287/cannot-invoke-template-function", "closed_reason": "Duplicate", "title": "Cannot invoke template function", "body": "<p>I am trying to invoke a template function, but get the error:</p>\n\n<pre><code>error: no matching member function for call to 'getRecord'\n  return getRecord(player, myVoidPtr,\n         ^~~~~~~~~\n./file.h:90:15: note: candidate template ignored: could not match 'function&lt;type-parameter-0-0 (char *)&gt;' against\n      '(lambda at file.cc:55:5)'\n  const char *getRecord(const T&amp; item, void *filePtr, std::function&lt;T(char*)&gt; parseFn);\n</code></pre>\n\n<p>Here is my implementation:</p>\n\n<pre><code>const char *getPlayerRec(const std::string&amp; player) {\n  return getRecord(player, myVoidPtr,\n    [](const char *record) {\n      return string(record);\n    }\n  );\n}\n\ntemplate &lt;typename T&gt;\nconst char *getRecord(const T&amp; item, void *filePtr, std::function&lt;T(char*)&gt; parseFn) {\n  // (elided)\n}\n</code></pre>\n\n<p>What have I misunderstood?</p>\n"}, {"tags": ["c++", "inheritance", "constants"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1522880639, "post_id": 49661273, "comment_id": 86332433, "body": "You are right that inheritance shouldn&#39;t be abused just for code reuse. However, this should probably just be <code>DataStructure</code> and <code>const DataStructure</code>. There&#39;s no reason I can think of for why you&#39;d want to have these separate"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1522880827, "post_id": 49661273, "comment_id": 86332507, "body": "&quot;A is a B&quot; means that you can do to an A ecerything you can do to a B, and maybe more. It then makes sense that a const data structure, having only read access, is the base class of the normal data structure that <i>also</i> has write access."}, {"owner": {"reputation": 224, "user_id": 2450542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sUfEq.png?s=128&g=1", "display_name": "Alex Jones", "link": "https://stackoverflow.com/users/2450542/alex-jones"}, "edited": false, "score": 1, "creation_date": 1522880838, "post_id": 49661273, "comment_id": 86332512, "body": "Is there any difference between a const class and a class with const members?"}, {"owner": {"reputation": 224, "user_id": 2450542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sUfEq.png?s=128&g=1", "display_name": "Alex Jones", "link": "https://stackoverflow.com/users/2450542/alex-jones"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1522880971, "post_id": 49661273, "comment_id": 86332560, "body": "@Quentin I see how this could be the case, but would that not mean that DataStructure inherits the constness of data() and data_?"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1522881780, "post_id": 49661273, "comment_id": 86332861, "body": "Warning: You appear to be violating the Rule Of Three."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1522882237, "post_id": 49661273, "comment_id": 86333035, "body": "There is something similar already used in the standard library:  the relationship between a <code>const_iterator</code> and an <code>iterator</code>."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1522887520, "post_id": 49661273, "comment_id": 86334609, "body": "<code>ConstDataStructure</code> doesn&#39;t appear to have any means to initialize its <code>data_</code> member. It&#39;s not clear what purpose it serves."}, {"owner": {"reputation": 224, "user_id": 2450542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sUfEq.png?s=128&g=1", "display_name": "Alex Jones", "link": "https://stackoverflow.com/users/2450542/alex-jones"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1522887659, "post_id": 49661273, "comment_id": 86334644, "body": "@IgorTandetnik that is handled in the constructor. Here the default constructor doesn&#39;t take in any arguments, but you could imagine one that does would be written similarly. I don&#39;t think it&#39;s necessary to write each possible type of constructor explicitly to ask this question."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1522888445, "post_id": 49661273, "comment_id": 86334857, "body": "If you could modify <code>ConstDataStructure</code> to have its <code>data_</code> member <code>protected</code> and non-const, then <code>DataStructure</code> could derive from it and drop its own <code>data_</code> member. Alternatively (and perhaps preferably), create a common base class that houses the data, and derive both <code>DataStructure</code> and <code>ConstDataStructure</code> from that."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1522917581, "post_id": 49661273, "comment_id": 86345480, "body": "@AlexanderJ93 <code>data()</code> can be overloaded to have a <code>const</code> and a non-<code>const</code> version. As for <code>data_</code>, it is an implementation detail -- and the demonstration that a sensible interface does not necessarily map to a straightforward implementation :)"}], "owner": {"reputation": 224, "user_id": 2450542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sUfEq.png?s=128&g=1", "display_name": "Alex Jones", "link": "https://stackoverflow.com/users/2450542/alex-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1522880242, "creation_date": 1522880242, "question_id": 49661273, "link": "https://stackoverflow.com/questions/49661273/inherit-from-const-ized-class-c", "title": "Inherit from const-ized class (C++)", "body": "<p>Say I have a class called DataStructure and another class called ConstDataStructure related as below:</p>\n\n<pre><code>class DataStructure\n{\n    public:\n        DataStructure();\n        virtual ~DataStructure();\n        unsigned char * data();\n\n        template &lt;class T&gt;\n        void setData(T data);\n\n    private:\n        unsigned char * data_;\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>class ConstDataStructure\n{\n    public:\n        ConstDataStructure();\n        virtual ~ConstDataStructure();\n        const unsigned char * data() const;\n\n    private:\n        const unsigned char * data_;\n}\n</code></pre>\n\n<p>I am asked to \"make DataStructure inherit from ConstDataStructure for reuse\". However, this doesn't seem to be a logical statement. I've been taught that inheritance is like an \"is-a\" relationship, so if A inherits from B, that's like saying that \"A is a B\". Here, it would be like saying that \"DataStructure is a ConstDataStructure\", which doesn't seem to be the case, as the DataStructure class has mutable data_ object with a setter function, while the ConstDataStructure necessarily has neither. It seems more natural for ConstDataStructure to inherit from DataStructure, since it is the same kind of class, but a more specific instance of it. Or, to simply not inherit in either direction, though that does seem redundant.</p>\n\n<p>Am I wrong here? Is the request sensical? If so, how does inheriting from a const-ized version of the class work?</p>\n"}, {"tags": ["c++", "qt", "c++11", "smart-pointers"], "comments": [{"owner": {"reputation": 4795, "user_id": 683905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7bc5b9f8f9c6f0e5d25b2d88e2cc1386?s=128&d=identicon&r=PG", "display_name": "Jaa-c", "link": "https://stackoverflow.com/users/683905/jaa-c"}, "edited": false, "score": 3, "creation_date": 1522881061, "post_id": 49661213, "comment_id": 86332603, "body": "If you use Qt, you are more or less forced to use Qt&#39;s parent system to manage memory (=delete) of <code>QObject</code>s. I suggest you follow that pattern. For any other objects allocated on heap (that do not derive from <code>QObject</code>), use standard smart pointers - <code>std::shared_ptr</code> and <code>std::unique_ptr</code>."}, {"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1522911463, "post_id": 49661213, "comment_id": 86341671, "body": "Why do you want to use pointers in your container at all? Why not just <code>QList&lt;MyObject&gt;</code>?"}, {"owner": {"reputation": 2026, "user_id": 831165, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e5f54e56221e9a3b19f91603e6b9772f?s=128&d=identicon&r=PG", "display_name": "ndbd", "link": "https://stackoverflow.com/users/831165/ndbd"}, "edited": false, "score": 0, "creation_date": 1522914019, "post_id": 49661213, "comment_id": 86343272, "body": "Why not use <code>QList&lt;MyObject&gt;</code>? 1.) Just for the sake of an example and 2.) these could be complex objects created on the heap for whatever reason, i.e. size, or dynamically created elsewhere."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1522915765, "post_id": 49661213, "comment_id": 86344325, "body": "Qt is pretty old; it introduced many classes before there were standard <code>std::</code> equivalents. That doesn&#39;t mean they are better. That said, <code>QString</code> is probably slightly easier to use."}, {"owner": {"reputation": 1705, "user_id": 9103250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3c613d7186c7314ee818673ea4c79fd?s=128&d=identicon&r=PG&f=1", "display_name": "CharonX", "link": "https://stackoverflow.com/users/9103250/charonx"}, "edited": false, "score": 4, "creation_date": 1523265768, "post_id": 49661213, "comment_id": 86472645, "body": "For the sake of the example: Don&#39;t return a pointer to QList&lt;&gt;, return the QList&lt;&gt; itself. 1) The compiler should be able to perfor RVO or std::move 2) Quite a few classes (especially containers, including QList) use <a href=\"http://doc.qt.io/qt-5/implicit-sharing.html\" rel=\"nofollow noreferrer\">Implicit Sharing</a> i.e. copying the object will result in a shallow copy (which is very cheap, both memory and peformance wise), that will only detach (i.e. deep copy)  if you do something to change it (perform non-const operations on it)."}, {"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 0, "creation_date": 1523354568, "post_id": 49661213, "comment_id": 86515907, "body": "ndbd : you should accept an answer, it has received enough attention and good answers."}], "answers": [{"comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1523301500, "post_id": 49728679, "comment_id": 86494731, "body": "<code>QObject</code> ownership is a catch-all - it can be preempted. It&#39;s there when you need it, but you don&#39;t have to use it at all by preempting it."}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": true, "score": 3, "last_activity_date": 1523263792, "last_edit_date": 1523263792, "creation_date": 1523262889, "answer_id": 49728679, "question_id": 49661213, "link": "https://stackoverflow.com/questions/49661213/qt-how-to-use-qts-smartpointers/49728679#49728679", "title": "Qt: How to use Qt&#39;s Smartpointers", "body": "<p>You are pretty much forced to use <code>Qt</code> idiom of owning raw pointers for GUI objects, as <code>QWidget</code> derived types will assume ownership of child elements.</p>\n\n<p>Elsewhere, you should as much as possible avoid using <em>any</em> type of pointer. Most of the time you can pass a reference. If you need polymorphic ownership, then use <code>std::unique_ptr</code>. In <em>very rare</em> cicrcumstances, you have multiple independent lifetimes that need ownership of a shared resource, for which you use <code>std::shared_ptr</code>.</p>\n\n<p>The Qt collection classes also interact badly with modern C++ constructs, e.g.</p>\n\n<pre><code>extern QList&lt;Foo&gt; getFoos();\n\nfor (const Foo &amp; foo : getFoos()) \n{ /*foo is a dangling reference here*/ }\n\nfor (const Foo &amp; foo : std::as_const(getFoos()))\n{ /*This is safe*/ }\n</code></pre>\n\n<p>Your snippet would be</p>\n\n<pre><code>std::vector&lt;std::unique_ptr&lt;MyObject&gt;&gt; foobar(MyOtherObject &amp; obj) {\n\n   // do some stuff with MyOtherObject\n\n   std::vector&lt;std::unique_ptr&lt;MyObject&gt;&gt; ls;\n   for(int i=0;i&lt;10;i++)\n   { \n       ls.emplace_back(std::make_unique&lt;MyObject&gt;());\n       ...\n   }\n   return ls;\n}\n\nint main() {\n\n   MyOtherObject foo = MyOtherObject;\n   auto bar = foobar(foo);\n  // do stuff\n  // destructors do the cleanup automatically\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4795, "user_id": 683905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7bc5b9f8f9c6f0e5d25b2d88e2cc1386?s=128&d=identicon&r=PG", "display_name": "Jaa-c", "link": "https://stackoverflow.com/users/683905/jaa-c"}, "is_accepted": false, "score": 2, "last_activity_date": 1523270554, "last_edit_date": 1523270554, "creation_date": 1523262930, "answer_id": 49728697, "question_id": 49661213, "link": "https://stackoverflow.com/questions/49661213/qt-how-to-use-qts-smartpointers/49728697#49728697", "title": "Qt: How to use Qt&#39;s Smartpointers", "body": "<blockquote>\n  <p>1.) As far as I understand, if I derive from QObject, I should better stick to Qt's object tree and ownership model and forget about\n  smartpointers. Correct?</p>\n</blockquote>\n\n<p>Yes. When using <code>QObjects</code>, I would recommend to rely on it's parent - child model to manage memory. It works well and you can't avoid it altogether, so use that.</p>\n\n<blockquote>\n  <p>2.) In C++ I can get by with std::shared_ptr and std::unique_ptr. What are the equivalent smart pointers in Qt?</p>\n</blockquote>\n\n<p>There is <code>QSharedPointer</code> and <code>QScopedPointer</code>, which is somewhat similar to <code>unique_ptr</code>, but doesn't support move semantics. IMHO there is no reason to use these nowadays, just use the smart pointers provided by standard library (to manage lifetime of objects that do not derive from <code>QObject</code>).</p>\n\n<blockquote>\n  <p>4.) In particular: Should I change function signature into using smartpointers? It seems to create quite complex type signatures\n  (return type and passed arguments). Also what if some \"legacy\"\n  function calls another function - is it better to write function\n  signatures with raw pointers, and use smartpointers only \"inside\"\n  functions?</p>\n</blockquote>\n\n<p>Generally - use smart pointers only to manage memory = use them only when there is an ownership relation. If you just pass an instance to a function that works with it but doesn't take ownership, pass just a plain old pointer.</p>\n\n<p>Concerning your example, it's a bit hard to say without context. Both <code>ls</code> and <code>mi</code> could be a <code>unique_ptr</code>. Better, you could just allocate <code>ls</code> on stack. And even better, avoid using <code>QList</code> and use <code>std::vector</code> or something like that.</p>\n"}, {"tags": [], "owner": {"reputation": 8160, "user_id": 1035613, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b4d6ce44848765d7b02e4309c9efe9bb?s=128&d=identicon&r=PG", "display_name": "Dmitry Sazonov", "link": "https://stackoverflow.com/users/1035613/dmitry-sazonov"}, "is_accepted": false, "score": 2, "last_activity_date": 1523378282, "last_edit_date": 1523378282, "creation_date": 1523279337, "answer_id": 49733783, "question_id": 49661213, "link": "https://stackoverflow.com/questions/49661213/qt-how-to-use-qts-smartpointers/49733783#49733783", "title": "Qt: How to use Qt&#39;s Smartpointers", "body": "<blockquote>\n  <ol>\n  <li>As far as I understand, if I derive from QObject, I should better stick to Qt's object tree and ownership model and forget about\n  smartpointers. Correct?</li>\n  </ol>\n</blockquote>\n\n<p>Better to say \"it depends\". First, you should know what <a href=\"https://doc.qt.io/qt-5.10/thread-basics.html\" rel=\"nofollow noreferrer\">thread affinity in Qt</a> is. Good example - <a href=\"https://doc.qt.io/qt-5/qthread.html#details\" rel=\"nofollow noreferrer\"><code>QThread worker</code></a>.</p>\n\n<p><code>QObject</code> uses parent-child memory management, so if the parent is destroyed, then all its children will be destroyed too.  In the \"Qt way\", it is enough to manage only root object lifetime. It is very easy, when you create <code>QObject</code>-based classes on heap (for example, with <code>new</code> operator). But there are some exceptions:</p>\n\n<ul>\n<li>You should be careful with objects <a href=\"https://doc.qt.io/qt-5/objecttrees.html\" rel=\"nofollow noreferrer\">that are created on the stack</a>.</li>\n<li><p>Classes with parent-child relations should belong to the same thread. You may use <a href=\"https://doc.qt.io/qt-5/qobject.html#moveToThread\" rel=\"nofollow noreferrer\"><code>QObject::moveToThread()</code></a> method to control thread affinity. So if instances of related objects should belong to different threads, they may not have parent-child relations.</p>\n\n<p>There is a pattern to auto-delete objects that belong to different threads. For example, if we should delete <code>p2</code> when <code>p1</code> is destroyed:</p>\n\n<pre><code>QThread t;\nt.start();\nQObject *p1 = new MyClass1{};\np1-&gt;moveToThread( &amp;t );\np1-&gt;doSomeWork();\nQObject *p2 = new MyClass2{};\nQObject::connect( p1, &amp;QObject::destroyed, p2, &amp;QObject::deleteLater ); // here\n</code></pre>\n\n<p>Object <code>p2</code> will be destroyed when you delete <code>p1</code>.</p>\n\n<p>We've employed a useful method above: <a href=\"https://doc.qt.io/qt-5/qobject.html#deleteLater\" rel=\"nofollow noreferrer\"><code>QObject::deleteLater()</code></a>. It schedules object deletion asap. It may be used in several cases:</p></li>\n<li><p>You need to delete an object from within a slot or during emitting of a signal. You should not delete such objects directly, because it may cause problems. Example: self-destroying button (somewhere in <code>MyClass</code>):</p>\n\n<pre><code>auto btn = new QPushButton{/*...*/};\nQObject::connect( btn, &amp;QPushButton::clicked, this, &amp;MyClass::onClicked );\n\nvoid MyClass::onClicked()\n{\n    auto p = qobject_cast&lt;QPushButton *&gt;( sender() );\n    // delete p; // Will cause error, because it is forbidden to delete objects during signal/slot calls\n    p-&gt;deleteLater(); // OK, deletion will occurs after exit from the slot and will be correct\n}\n</code></pre></li>\n</ul>\n\n<p>For working with QObject-based pointer there is a <a href=\"https://doc.qt.io/qt-5/qpointer.html\" rel=\"nofollow noreferrer\"><code>QPointer</code></a> helper. It will not automatically delete an object, but it will be valid all the time. It will contain a reference to an object or a <code>nullptr</code>. When object is removed, all its <code>QPointer</code> instances will be nulled automatically. Example:</p>\n\n<pre><code>class Foo : public QObject { /* ... */ };\n\nclass Bar\n{\npublic:\n    void setup( Foo * foo )\n    {\n        p = foo;\n    }\n\n    void use()\n    {\n        if ( p )\n        {\n            p-&gt;doSomething(); // Safe\n        }\n    }\n\nprivate:\n    QPointer&lt;Foo&gt; p;\n};\n// ...\nFoo * foo = new Foo{};\nBar bar;\nbar.setup( foo );\ndelete foo; // or not delete\nbar.use();  // OK, it's safe\n</code></pre>\n\n<p>Note, that <code>QPointer</code> uses the <code>QObject::destroyed()</code>signal for managing internal reference, so using it to keep a large amount of objects may cause performance issues (only on mass creation/destruction). Performance with accessing to this pointers is same as with raw pointers.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>In C++ I can get by with <code>std::shared_ptr</code> and <code>std::unique_ptr</code>. What are the equivalent smart pointers in Qt?</li>\n  </ol>\n</blockquote>\n\n<p>Yes, there are <a href=\"https://doc.qt.io/qt-5/qsharedpointer.html\" rel=\"nofollow noreferrer\"><code>QSharedPointer</code></a> and <a href=\"https://doc.qt.io/qt-5/qscopedpointer.html\" rel=\"nofollow noreferrer\"><code>QScopedPointer</code></a> that work in similar way. Some benefits for using these pointers include <a href=\"https://doc.qt.io/qt-5/qscopedpointer.html#details\" rel=\"nofollow noreferrer\">custom deleters</a>, like <code>QScopedPointerDeleter</code>, <code>QScopedPointerArrayDeleter</code>, <code>QScopedPointerPodDeleter</code>, <code>QScopedPointerDeleteLater</code>.</p>\n\n<p>Also you may use something like this, for QObject-based classes, if you need postponed deletion:</p>\n\n<pre><code>QSharedPointer&lt;MyObject&gt;(new MyObject, &amp;QObject::deleteLater);\n</code></pre>\n\n<p>Attention: you should not use this smart pointer with direct setting of parent objects, because destructor will be called twice.</p>\n\n<pre><code>class Foo : public QObject\n{\nQScopedPointer&lt;MyClass&gt; p;\n\npublic:\nFoo()\n    : p{ new MyClass(this) } // NO!!! Use new MyClass() without specifying parent\n// Object lifetime is tracked by QScopedPointer\n{}\n};\n</code></pre>\n\n<p>If you have a list of raw pointers, you may use helpers like <a href=\"https://doc.qt.io/qt-5/qtalgorithms.html#qDeleteAll-1\" rel=\"nofollow noreferrer\"><code>qDeleteAll()</code></a> for cleanup. Example:</p>\n\n<pre><code>QList&lt;MyObject *&gt; list;\n//...\nqDeleteAll( list );\nlist.clear();\n</code></pre>\n\n<blockquote>\n  <p>3.</p>\n  \n  <p>4.</p>\n  \n  <p>5.</p>\n</blockquote>\n\n<p>It depends on your design and C++ code style. Personal approach, from my experience:</p>\n\n<ol>\n<li>Use parent-child only for <code>QWidget</code>-based classes.</li>\n<li>Use shared pointers only when you can't control an object lifetime</li>\n<li>In all other cases - use unique pointers</li>\n<li>To share something between two classes - use <a href=\"https://en.cppreference.com/w/cpp/language/reference\" rel=\"nofollow noreferrer\">references</a>.</li>\n<li>In case of complex logic - use smart pointers. But double-check\nfor loops (use weak pointers in most cases)</li>\n</ol>\n\n<p>Feel free to ask in comments for any clarifications.</p>\n"}, {"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1523374347, "last_edit_date": 1523374347, "creation_date": 1523301442, "answer_id": 49740144, "question_id": 49661213, "link": "https://stackoverflow.com/questions/49661213/qt-how-to-use-qts-smartpointers/49740144#49740144", "title": "Qt: How to use Qt&#39;s Smartpointers", "body": "<p>First of all, modern C++ allows you to use values, and Qt supports that. Thus, the default should be to use <code>QObject</code>s as if they were non-movable, non-copyable values. Your snippet, in fact, requires no explicit memory management at all. And this does not clash at all with the fact that the objects have a parent.</p>\n\n<pre><code>#include &lt;QObject&gt;\n#include &lt;list&gt;\n\nusing MyObject = QObject;\nusing MyOtherObject = QObject;\n\nstd::list&lt;MyObject&gt; makeObjects(MyOtherObject *other, QObject *parent = {}) {\n  std::list&lt;MyObject&gt; list;\n  for (int i = 0; i &lt; 10; ++i) {\n    #if __cplusplus &gt;= 201703L // C++17 allows more concise code\n    auto &amp;obj = list.emplace_back(parent);\n    #else\n    auto &amp;obj = (list.emplace_back(parent), list.back());\n    #endif\n    //...\n  }\n  return list;\n}\n\nint main() {\n  MyOtherObject other;\n  auto objects = makeObjects(&amp;other, &amp;other);\n  //...\n  objects.erase(objects.begin()); // the container manages lifetimes\n  //\n}\n</code></pre>\n\n<p>C++ has strict object destruction order, and <code>objects</code> is guaranteed to be destroyed before <code>other</code>. Thus, by the time <code>other.~QObject()</code> runs, there are no <code>MyObject</code> children, and thus there's no issue with double-deletion.</p>\n\n<p>In general, here are the viable approaches to storing <code>QObject</code> collections, with their requirements:</p>\n\n<ol>\n<li><p><code>std::array</code> - all elements of same type, fixed size, cannot be returned</p></li>\n<li><p><code>std::list</code> - all elements of same type, doesn't have a <code>RandomAccessIterator</code>, container owns the objects</p></li>\n<li><p><code>std::deque</code> - all elements of same type, has <code>RandomAccessIterator</code> but doesn't allow <code>erase</code> since your objects are not <code>MoveAssignable</code> (but of course can be cleared/destroyed), container owns the objects</p></li>\n<li><p><code>std::vector&lt;std::unique_ptr&lt;BaseClass&gt;&gt;</code> - elements of any type i.e. it is a polymorphic container, container owns the objects</p></li>\n<li><p><code>std::vector&lt;QObject*&gt;</code> or <code>QObjectList</code> - non-owning, non-tracking container. Qt code is full of <code>QObjectList = QList&lt;QObject*&gt;</code>.</p></li>\n<li><p><code>QObject</code> (sic!) - elements of any <code>QObject</code> type, container optionally owns the objects, container tracks the object lifetime, the element pointer can be used to remove the object from the container; only one container can hold a given object, uses a bare vector to store the objects and thus additions/removals of children are <code>O(N)</code>.</p></li>\n</ol>\n\n<p>When storing the objects themselves, and not their collections, with object lifetime being the same as the containing scope, it's easiest to keep them as values. For example:</p>\n\n<pre><code>class ButtonGrid : public QWidget {\n  static constexpr int const N = 3;\n  QGridLayout m_gridLayout{this};\n  QLabel m_label;\n  std::array&lt;QPushButton, N*N&gt; m_buttons;\npublic:\n  ButtonGrid(QWidget *parent = {}) : QWidget{parent} {\n     int r = 0, c = 0;\n     m_gridLayout.addWidget(&amp;m_label, r, c, 1, N);\n     r ++;\n     for (auto &amp;b : m_buttons) {\n        m_gridLayout.addWidget(&amp;b, r, c);\n        c ++;\n        if (c == N)\n           c = 0, r ++;\n     }\n  }\n};\n</code></pre>\n\n<p>Now, to answer your questions:</p>\n\n<ol>\n<li><p><em>Should I better stick to Qt's object tree and ownership model?</em> There's no choice in that matter: that model is there and it can't be disabled. But it's designed as a catch-all and you can preempt it. <code>QObject</code> ownership model only ensures that children don't outlive the parent. It prevents resource leaks. You're free to end the childrens' lives before the parent dies. You're also free to have parentless objects.</p></li>\n<li><p><em>What are the equivalent smart pointers in Qt?</em> It doesn't matter. You're writing C++ - use <code>std::shared_ptr</code> and <code>std::unique_ptr</code>. There's no benefit to using Qt's equivalents since Qt 5.7: from that version onwards, Qt requires C++11 support in the compiler, and thus those pointers must be supported.</p></li>\n<li><p><em>How to translate the above snippet into a version using smart pointers?</em> There's no need to. Keep objects by value. Perhaps you need to have a different snippet that would actually require the use of smart pointers.</p></li>\n<li><p><em>Should I change function signature into using smart pointers?</em> No. You haven't motivated any smart pointer use.</p></li>\n<li><p>N/A</p></li>\n</ol>\n"}], "owner": {"reputation": 2026, "user_id": 831165, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e5f54e56221e9a3b19f91603e6b9772f?s=128&d=identicon&r=PG", "display_name": "ndbd", "link": "https://stackoverflow.com/users/831165/ndbd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1570, "favorite_count": 2, "accepted_answer_id": 49728679, "answer_count": 4, "score": 6, "last_activity_date": 1523378282, "creation_date": 1522879885, "last_edit_date": 1522880549, "question_id": 49661213, "link": "https://stackoverflow.com/questions/49661213/qt-how-to-use-qts-smartpointers", "title": "Qt: How to use Qt&#39;s Smartpointers", "body": "<p>I have experience in \"old-fashioned\" C++ programming (i.e. I care myself about pointers and memory management). I do want to make use of modern concepts though.</p>\n\n<p>Since my application makes heavy use of Qt, I'd like to use Qt's smartpointers. I am however somewhat confused about smartpointers in general, and their use in Qt.</p>\n\n<p>1.) As far as I understand, if I derive from <code>QObject</code>, I should better stick to Qt's object tree and ownership model and forget about smartpointers. Correct?</p>\n\n<p>2.) In C++ I can get by with <code>std::shared_ptr</code> and <code>std::unique_ptr</code>. What are the equivalent smart pointers in Qt?</p>\n\n<p>Suppose I have the following code: </p>\n\n<pre><code>QList&lt;MyObject *&gt; * foobar(MyOtherObject *ptr) {\n\n   // do some stuff with MyOtherObject\n\n   QList&lt;MyObject* &gt; ls = new QList&lt;MyObject*&gt;();\n   for(int i=0;i&lt;10;i++) {    \n       MyObject* mi = new MyObject();\n       ...\n       ls.insert(mi);\n   }\n   return ls;\n}\n\nint main() {\n\n   MyOtherObject* foo = new MyOtherObject();\n   QList&lt;MyObject*&gt; *bar = foobar(foo);\n  // do stuff\n  // and don't care about cleaning up?!\n}\n</code></pre>\n\n<p>3.) How to translate the above snippet into a version using smartpointers?</p>\n\n<p>4.) In particular: Should I change function signature into using smartpointers? It seems to create quite complex type signatures (return type and passed arguments). Also what if some \"legacy\" function calls another function - is it better to write function signatures with raw pointers, and use smartpointers only \"inside\" functions?</p>\n\n<p>5.) What smartpointer should replace <code>ls</code> in the function <code>foobar</code>? What is the pointer type that should be used for <code>mi</code>, i.e. the objects stored in the <code>QList</code>?</p>\n"}, {"tags": ["c++", "montecarlo"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1522882566, "post_id": 49661195, "comment_id": 86333159, "body": "You should add the <code>lattice.h</code> and <code>simulation.h</code> headers to your question."}], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 7771270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9768b57b64496acdbb5438b76c1cad8e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Petrosyan", "link": "https://stackoverflow.com/users/7771270/alex-petrosyan"}, "edited": false, "score": 0, "creation_date": 1522925498, "post_id": 49667901, "comment_id": 86351023, "body": "I don&#39;t think that&#39;s the problem. First of all the answer isn&#39;t shifted by a factor of 2, if anything it&#39;s shifted by less than 50%, (i.e. 1 unit of J).   Second, when I change either <code>compute dE</code> to its half, the system stops converging. It doesn&#39;t shift as I wanted, but rather changes behaviour entirely.  Could you please explain more?"}, {"owner": {"reputation": 379, "user_id": 7771270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9768b57b64496acdbb5438b76c1cad8e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Petrosyan", "link": "https://stackoverflow.com/users/7771270/alex-petrosyan"}, "edited": false, "score": 0, "creation_date": 1522926560, "post_id": 49667901, "comment_id": 86351760, "body": "Update: You were right. Not exactly, but you nudged me in the right direction.  <code>compute_dE</code>  is off by a factor of 3/2, not 2. There&#39;s double the point energy because of flipping the spin, but also sice we&#39;re changing the interaction energy for the four surrounding spins, another point energy (not two because of the double counting.)"}, {"owner": {"reputation": 762, "user_id": 5140209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e01b9767fc11559daa976d55c1c1065c?s=128&d=identicon&r=PG&f=1", "display_name": "lr1985", "link": "https://stackoverflow.com/users/5140209/lr1985"}, "reply_to_user": {"reputation": 379, "user_id": 7771270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9768b57b64496acdbb5438b76c1cad8e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Petrosyan", "link": "https://stackoverflow.com/users/7771270/alex-petrosyan"}, "edited": false, "score": 0, "creation_date": 1522927418, "post_id": 49667901, "comment_id": 86352346, "body": "Actually, the real issue is that you don&#39;t use the input temperature, but, for some reason, you update the temperature throughout the simulation and use that in the acceptance ratio. That&#39;s not right. I&#39;ll edit the answer accordingly"}, {"owner": {"reputation": 379, "user_id": 7771270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9768b57b64496acdbb5438b76c1cad8e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Petrosyan", "link": "https://stackoverflow.com/users/7771270/alex-petrosyan"}, "edited": false, "score": 0, "creation_date": 1522931579, "post_id": 49667901, "comment_id": 86355342, "body": "I&#39;m not sure about the energy feedback. I&#39;d assumed that the system is being isolated and thus the energy released from aligning the spins heats the system up. If it&#39;s not the case, I&#39;d be willing to update the code..."}, {"owner": {"reputation": 762, "user_id": 5140209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e01b9767fc11559daa976d55c1c1065c?s=128&d=identicon&r=PG&f=1", "display_name": "lr1985", "link": "https://stackoverflow.com/users/5140209/lr1985"}, "reply_to_user": {"reputation": 379, "user_id": 7771270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9768b57b64496acdbb5438b76c1cad8e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Petrosyan", "link": "https://stackoverflow.com/users/7771270/alex-petrosyan"}, "edited": false, "score": 0, "creation_date": 1522999777, "post_id": 49667901, "comment_id": 86386286, "body": "Well, you are using the acceptance rule that is associated to constant-temperature systems, meaning that you are implicitly coupling the system to a heat bath. I suspect that, if the temperature were to be variable during the course of the simulation, you would have to use a different acceptance rule."}], "tags": [], "owner": {"reputation": 762, "user_id": 5140209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e01b9767fc11559daa976d55c1c1065c?s=128&d=identicon&r=PG&f=1", "display_name": "lr1985", "link": "https://stackoverflow.com/users/5140209/lr1985"}, "is_accepted": true, "score": 1, "last_activity_date": 1522927632, "last_edit_date": 1522927632, "creation_date": 1522917817, "answer_id": 49667901, "question_id": 49661195, "link": "https://stackoverflow.com/questions/49661195/ising-model-simulation-offset-critical-temperature/49667901#49667901", "title": "Ising model simulation offset critical temperature", "body": "<p>I have found a few issues in your code:</p>\n\n<ul>\n<li><p>The <code>compute_dE</code> method returns the wrong energy, as the factor of 2 shouldn't be there. The Hamiltonian of the Ising system is </p>\n\n<p><img src=\"https://latex.codecogs.com/gif.latex?H%20%3D%20-J%5Csum_%7Bi%20%3E%20j%7D%20%5Csigma_i%20%5Csigma_j%20%3D%20-%5Cfrac%7B1%7D%7B2%7D%20J%20%5Csum_%7Bi%20%5Cneq%20j%7D%5Csigma_i%20%5Csigma_j\" alt=\"energy\"></p>\n\n<p>While you are effectively using</p>\n\n<p><img src=\"https://latex.codecogs.com/gif.latex?H%20%3D%20-2J%5Csum_%7Bi%20%3E%20j%7D%20%5Csigma_i%20%5Csigma_j%20%3D%20-J%20%5Csum_%7Bi%20%5Cneq%20j%7D%5Csigma_i%20%5Csigma_j\" alt=\"wrong\"></p></li>\n<li><p>The <code>compute_energy</code> method returns the wrong energy. The method should iterate over each spin pair only once. Something like this should do the trick:</p>\n\n<p><code>for (unsigned int i = 0; i &lt; max; i++) {\n    for (unsigned int j = i + 1; j &lt; max; j++) {\n      energy_sum += other.compute_point_energy(i, j);\n    }\n}</code></p></li>\n<li><p>You use a temperature that is updated on the fly instead of using the target temperature. I do not really understand the purpose of that.</p></li>\n</ul>\n"}], "owner": {"reputation": 379, "user_id": 7771270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9768b57b64496acdbb5438b76c1cad8e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Petrosyan", "link": "https://stackoverflow.com/users/7771270/alex-petrosyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 1, "accepted_answer_id": 49667901, "answer_count": 1, "score": 3, "last_activity_date": 1522927632, "creation_date": 1522879798, "last_edit_date": 1522925913, "question_id": 49661195, "link": "https://stackoverflow.com/questions/49661195/ising-model-simulation-offset-critical-temperature", "title": "Ising model simulation offset critical temperature", "body": "<p>I'm writing a simulation of the Ising model in 2D. The model behaves as predicted except for one thing: the critical temperature is roughly 3.5 while it should be near <code>2/ln(2 + sqrt (2))</code>. </p>\n\n<p>The project is a C++ program that generates the data, and a shell script that exercises the program. The full code can be found <a href=\"https://github.com/appetrosyan/Ising-Model-simulation.git\" rel=\"nofollow noreferrer\">here</a>. Also here's <strong>lattice.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"include/lattice.h\"\n\nusing namespace std;\n\n/*\nCopy assignment operator, too long to include in the header.\n*/\nlattice &amp;lattice::operator=(const lattice &amp;other) {\n  size_ = other.size_;\n  spins_ = other.spins_;\n  J_ = other.J_;\n  H_ = other.H_;\n  delete spins_;\n  return *this;\n}\n\nvoid lattice::print() {\n  unsigned int area = size_ * size_;\n  for (unsigned int i = 0; i &lt; area; i++) {\n    cout &lt;&lt; to_symbol(spins_-&gt;at(i));\n    if (i % size_ == size_ - 1)\n      cout &lt;&lt; endl;\n  }\n  cout &lt;&lt; endl;\n}\n\n/*\nComputes the energy associated with a spin at the given point.\n\nIt is explicitly float as that would allow the compiler to make use of multiple\nregisters instead of keeping track of unneeded precision.  (typically J, H ~ 1).\n*/\nfloat lattice::compute_point_energy(int row, int col) {\n  int accumulator = get(row + 1, col) + get(row - 1, col) + get(row, col - 1) +\n                    get(row, col + 1);\n  return -get(row, col) * (accumulator * J_ + H_);\n}\n\n/*\nComputes total magnetisation in O(n^2). Thread safe\n*/\nint lattice::total_magnetisation() {\n  int sum = 0;\n  #pragma omp parallel for reduction(+ : sum)\n  for (unsigned int i = 0; i &lt; size_ * size_; i++) {\n    sum += spins_-&gt;at(i);\n  }\n  return sum;\n}\n\nint inline to_periodic(int row, int col, int size) {\n  if (row &lt; 0 || row &gt;= size)\n    row = abs(size - abs(row));\n  if (col &lt; 0 || col &gt;= size)\n    col = abs(size - abs(col));\n  return row * size + col;\n}\n</code></pre>\n\n<p>with <strong>lattice.h</strong></p>\n\n<pre><code>#ifndef lattice_h\n#define lattice_h\n\n#include &lt;cmath&gt;\n#include &lt;vector&gt;\n\n/* Converts spin up/down to easily printable symbols. */\nchar inline to_symbol(int in) { return in == -1 ? '-' : '+'; }\n\n/* Converts given pair of indices to those with periodic boundary conditions. */\nint inline to_periodic(int row, int col, int size) {\n  if (row &lt; 0 || row &gt;= size)\n    row = abs(size - abs(row));\n  if (col &lt; 0 || col &gt;= size)\n    col = abs(size - abs(col));\n  return row * size + col;\n}\n\nclass lattice {\nprivate:\n  unsigned int size_;\n  // vector&lt;bool&gt; would be more space efficient, but it would not allow\n  // multithreading\n  std::vector&lt;short&gt; *spins_;\n  float J_;\n  float H_;\n\npublic:\n  lattice() noexcept : size_(0), spins_(NULL), J_(1.0), H_(0.0) {}\n  lattice(int new_size, double new_J, double new_H) noexcept\n      : size_(new_size), spins_(new std::vector&lt;short&gt;(size_ * size_, 1)),\n        J_(new_J), H_(new_H) {}\n  lattice(const lattice &amp;other) noexcept\n      : lattice(other.size_, other.J_, other.H_) {\n#pragma omp parallel for\n    for (unsigned int i = 0; i &lt; size_ * size_; i++)\n      spins_-&gt;at(i) = other.spins_-&gt;at(i);\n  }\n  lattice &amp;operator=(const lattice &amp;);\n\n  ~lattice() { delete spins_; }\n  void print();\n  short get(int row, int col) {\n    return spins_-&gt;at(to_periodic(row, col, size_));\n  }\n  unsigned int get_size() { return size_; }\n  void flip(int row, int col) { spins_-&gt;at(to_periodic(row, col, size_)) *= -1; }\n  int total_magnetisation();\n  float compute_point_energy(int row, int col);\n};\n\n#endif\n</code></pre>\n\n<p>and <strong>simulation.cpp</strong> </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;math.h&gt;\n#include \"include/simulation.h\"\n\nusing namespace std;\n\n/*\nAdvances the simulation a given number of steps, and updates/prints the statistics\ninto the given file pointer.\n\nDefaults to stdout.\n\nThe number of time_steps is explcitly unsigned, so that linters/IDEs remind\nthe end user of the file that extra care needs to be taken, as well as to allow\nadvancing the simulation a larger number of times.\n*/\nvoid simulation::advance(unsigned int time_steps, FILE *output) {\n  unsigned int area = spin_lattice_.get_size() * spin_lattice_.get_size();\n  for (unsigned int i = 0; i &lt; time_steps; i++) {\n    // If we don't update mean_energy_ every time, we might get incorrect\n    // thermodynamic behaviour.\n    total_energy_ = compute_energy(spin_lattice_);\n    double temperature_delta = total_energy_/area - mean_energy_;\n    if (abs(temperature_delta) &lt; 1/area){\n      cerr&lt;&lt;temperature_delta&lt;&lt;\"! Reached equilibrium \"&lt;&lt;endl;\n    }\n    temperature_ += temperature_delta;\n    mean_energy_ = total_energy_ / area;\n    if (time_ % print_interval_ == 0) {\n      total_magnetisation_ = spin_lattice_.total_magnetisation();\n      mean_magnetisation_ = total_magnetisation_ / area;\n      print_status(output);\n    }\n    advance();\n  }\n}\n\n/*\nAdvances the simulation a single step.\n\nDOES NOT KEEP TRACK OF STATISTICS. Hence private.\n*/\nvoid simulation::advance() {\n  #pragma omp parallel for collapse(2)\n  for (unsigned int row = 0; row &lt; spin_lattice_.get_size(); row++) {\n    for (unsigned int col = 0; col &lt; spin_lattice_.get_size(); col++) {\n      double dE = compute_dE(row, col);\n      double p = r_.random_uniform();\n      float rnd = rand() / (RAND_MAX + 1.);\n      if (exp(-dE / temperature_) &gt; rnd) {\n        spin_lattice_.flip(row, col);\n      }\n    }\n  }\n  time_++;\n}\n\n/*\nComputes change in energy due to flipping one single spin.\n\nThe function returns a single-precision floating-point number, as data cannot under\nmost circumstances make use of greater precision than that (save J is set to a\nnon-machine-representable value).\n\nThe code modifies the spin lattice, as an alternative (copying the neighborhood\nof a given point), would make the code run slower by a factor of 2.25\n*/\nfloat simulation::compute_dE(int row, int col) {\n  float e_0 =  spin_lattice_.compute_point_energy(row, col);\n  return -4*e_0;\n\n\n}\n/*\nComputes the total energy associated with spins in the spin_lattice_.\n\nI originally used this function to test the code that tracked energy as the lattice\nitself was modified, but that code turned out to be only marginally faster, and\nnot thread-safe. This is due to a race condition: when one thread uses a neighborhood\nof a point, while another thread was computing the energy of one such point in\nthe neighborhood of (row, col).\n*/\ndouble simulation::compute_energy(lattice &amp;other) {\n  double energy_sum = 0;\n  unsigned int max = other.get_size();\n  #pragma omp parallel for reduction(+ : energy_sum)\n  for (unsigned int i = 0; i &lt; max; i++) {\n    for (unsigned int j = 0; j &lt; max; j++) {\n      energy_sum += other.compute_point_energy(i, j);\n    }\n  }\n  return energy_sum;\n}\n\nvoid simulation::set_to_chequerboard(int step){\n  if (time_ !=0){\n    return;\n  }else{\n    for (unsigned int i=0; i&lt; spin_lattice_.get_size(); ++i){\n      for (unsigned int j=0; j&lt;spin_lattice_.get_size(); ++j){\n        if ((i/step)%2-(j/step)%2==0){\n          spin_lattice_.flip(i, j);\n        }\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>with <strong>simulation.h</strong> </p>\n\n<pre><code>#ifndef simulation_h\n#define simulation_h\n\n#include \"lattice.h\"\n#include \"rng.h\"\n#include &lt;gsl/gsl_rng.h&gt;\n\n/*\nThe logic of the entire simulation of the Ising model of magnetism.\n\nThis simulation will run and print statistics at a given time interval.\nA simulation can be advanced a single time step, or many at a time,\n*/\nclass simulation {\nprivate:\n  unsigned int time_ = 0;  // Current time of the simulation.\n  rng r_ = rng();\n  lattice spin_lattice_;\n  double temperature_;\n  double mean_magnetisation_ = 1;\n  double mean_energy_;\n  double total_magnetisation_;\n  double total_energy_;\n  unsigned int print_interval_ = 1;\n  void advance();\n\npublic:\n  void set_print_interval(unsigned int new_print_interval) { print_interval_ = new_print_interval; }\n\n  simulation(int new_size, double new_temp, double new_J, double new_H)\n      : time_(0), spin_lattice_(lattice(new_size, new_J, new_H)), temperature_(new_temp),\n        mean_energy_(new_J * (-4)), total_magnetisation_(new_size * new_size),\n        total_energy_(compute_energy(spin_lattice_)) {}\n\n  void print_status(FILE *f) {\n    f = f==NULL? stdout : f;\n    fprintf(f, \"%4d\\t%e \\t%e\\t%e\\n\", time_, mean_magnetisation_,\n            mean_energy_, temperature_);\n  }\n  void advance(unsigned int time_steps, FILE *output);\n  double compute_energy(lattice &amp;other);\n  float compute_dE(int row, int col);\n  void set_to_chequerboard(int step);\n  void print_lattice(){\n    spin_lattice_.print();\n  };\n  // void load_custom(const lattice&amp; custom);\n};\n\n#endif\n</code></pre>\n\n<p>The output right now looks something like this: <img src=\"https://i.stack.imgur.com/Cn3U4.png\" alt=\"Step function near 2.7\">\nwhile it should be a step down near 2.26</p>\n"}, {"tags": ["c++", "c++20", "spaceship-operator"], "comments": [{"owner": {"reputation": 32760, "user_id": 206367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/121b360a4d7d20be6e220dcdb555649f?s=128&d=identicon&r=PG", "display_name": "t0mm13b", "link": "https://stackoverflow.com/users/206367/t0mm13b"}, "edited": false, "score": 0, "creation_date": 1522879755, "post_id": 49661170, "comment_id": 86332142, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/48065905/is-the-three-way-comparison-operator-always-efficient\">Is the three-way comparison operator always efficient?</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1522894000, "post_id": 49661170, "comment_id": 86336077, "body": "<a href=\"https://stackoverflow.com/questions/47485803/how-and-why-did-the-iso-c-standards-committee-wg21-decide-to-accept-the-prop\" title=\"how and why did the iso c standards committee wg21 decide to accept the prop\">stackoverflow.com/questions/47485803/&hellip;</a>"}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 2, "creation_date": 1529024873, "post_id": 49661170, "comment_id": 88737873, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/47466358/what-is-the-operator-in-c\">What is the &lt;=&gt; operator in C++?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1522881680, "post_id": 49661253, "comment_id": 86332834, "body": "Yeah, but why add an operator and complicate the grammar - which is already an unparseable mess as it is? Just create a <code>std::compare</code> working in a similar way as <code>std::hash</code> - already provided for builtin types, user definable for custom types."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 5, "creation_date": 1522881888, "post_id": 49661253, "comment_id": 86332900, "body": "@MatteoItalia: 1. It doesn&#39;t complicate parsing the grammar. The C++ grammar has a ambiguity issues, this isn&#39;t one of them. 2. This is part of a grander scheme of things which will include compiler-generated <a href=\"http://en.cppreference.com/w/cpp/language/default_comparisons\" rel=\"nofollow noreferrer\">default comparison operators</a> for most types, which will be <i>awesome</i>."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1522881896, "post_id": 49661253, "comment_id": 86332905, "body": "Also, point 3 is a bit of a moot point - current compilers already optimize without problems sequences of comparisons regarding the same values."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 2, "creation_date": 1522881983, "post_id": 49661253, "comment_id": 86332950, "body": "@MatteoItalia: about point 3 - not moot, in the same sense that you don&#39;t need &gt;= since you have &gt; and =. If the hardware does &gt;=, why shouldn&#39;t you be able to say that?"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1522882258, "post_id": 49661253, "comment_id": 86333042, "body": "1. It&#39;s extra syntax, it complicates the grammar. If it can be done without any particular problem with existing syntax, generally you don&#39;t want to touch it. 2. So what? Range-based <code>for</code> already knows about <code>begin</code> and <code>end</code>, what would be the problem in letting compiler-generated operators know about <code>compare</code>?"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1522882351, "post_id": 49661253, "comment_id": 86333074, "body": "You got it reversed. You don&#39;t have <code>&lt;=</code> because the hardware knows how to do <code>&lt;=</code>, you have <code>&lt;=</code> because it&#39;s an operator that often comes useful when writing code. The compiler then maps it on the underlying hardware the best it can."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 3, "creation_date": 1522882581, "post_id": 49661253, "comment_id": 86333166, "body": "@MatteoItalia: C++ did not invent the 3-way comparison spaceship operator. Other languages did. C++ is merely adopting it in a C++ form. There&#39;s no reason for C++ to spell it <code>compare</code> when we can just spell it the way everyone else does."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1522882696, "post_id": 49661253, "comment_id": 86333216, "body": "@MatteoItalia: &quot;<i>what would be the problem in letting compiler-generated operators know about compare?</i>&quot; There&#39;s a huge difference between range-based <code>for</code> doing ADL lookup on <code>begin</code> and canonizing a name (which is common enough to already be in use by many other people) with an <code>= default</code> implementation and special language meaning. I&#39;ll take the minor grammar &quot;complication&quot; of &lt;=&gt; over breaking tons of code by potentially changing the meaning of every <code>compare</code> function that someone has written."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1522882963, "post_id": 49661253, "comment_id": 86333310, "body": "@NicolBolas: disputable; Python calls it <code>cmp</code>; OCaml and Haskell call it <code>compare</code>; Java calls it <code>compareTo</code>. But ok, it&#39;s an operator because someone liked how it looked, not because there&#39;s some technical reason why it couldn&#39;t be implemented otherwise. That&#39;s the answer I was looking for."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 2, "creation_date": 1522883084, "post_id": 49661253, "comment_id": 86333345, "body": "@MatteoItalia: &quot;<i>it&#39;s an operator because someone liked how it looked, not because there&#39;s some technical reason why it couldn&#39;t be implemented otherwise</i>&quot; If you wish to pretend that&#39;s the case, you can do so. It doesn&#39;t make what I said about existing <code>compare</code> functions any less true. <code>operator&lt;=&gt;</code> has the advantage of having no existing functions to conflict with."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1522883320, "post_id": 49661253, "comment_id": 86333405, "body": "@NicolBolas: with this kind of reasoning we&#39;d need a new operator for any customization point; I don&#39;t expect <code>compare</code> to be any more common than - say - <code>hash</code>. But you could call it any other way - say, <code>three_way_compare</code>; or just ignore ADL and require a template specialization straight into <code>std</code> (which would solve the conflict problem once for all). Again, the point is, it&#39;s not like it couldn&#39;t be done without a grammar modification, it just looks better this way. I&#39;m fine with it, I&#39;m just trying to understand the rationale."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1522919576, "post_id": 49661253, "comment_id": 86346851, "body": "@MatteoItalia: 1. (About your earlier comment regarding hardware capabilities) Sometimes hardware capabilities inspire programming language structures, sometimes it&#39;s the other way around. 2. I disagree that if something can be done with existing syntax, you generally don&#39;t want to touch it. It&#39;s not that the current syntax of C++ is held to be pure and perfect. It&#39;s kind of a work-in-progress. Some stuff gets added, occasionally a few things get removed."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1522929781, "post_id": 49661253, "comment_id": 86354049, "body": "@einpoklum: I&#39;m quite sure that the spaceship operators doesn&#39;t arise out of hardware capabilities; it comes out from the need of compactly provide an all-in-one comparison function, and the <code>&lt;=&gt;</code> syntax and name actually comes from Perl, which is definitely as far away from hardware as a language can be. Also, intrinsics - which are arguably the part of C and C++ implementations that is nearest to the hardware - are normally provided as functions or function-like macros; operators are just syntactic sugar."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1522930158, "post_id": 49661253, "comment_id": 86354313, "body": "As for the &quot;don&#39;t touch the core language if it&#39;s not necessary&quot; part, it&#39;s just that it&#39;s the general attitude used so far in the development of the C++ language, and for a good reason; introducing syntax (and in general, modifications to the core language) is way more cumbersome than adding parts of the library. It breaks compatibility (I&#39;ll have to add <code>#ifdef</code> in class libraries around <code>operator&lt;=&gt;</code>, and the implementation will need to avoid it anyway), it is more difficult to test in existing implementations, it&#39;s impossible to backport. Library-only changes are more convenient."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1522934638, "post_id": 49661253, "comment_id": 86357602, "body": "@MatteoItalia: I feel your pain... Remember, though, that my answer gave potential motivation that springs to my mind, not the choices of the standards committee."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 3, "creation_date": 1523227057, "post_id": 49661253, "comment_id": 86460510, "body": "@MatteoItalia: &quot;<i>Library-only changes are more convenient.</i>&quot; And yet less useful. Without any core language changes, <code>= default</code> comparison generation would not be possible. And without <i>that</i>, then the ability to put user-defined types in template parameters (something that is being added for C++20) would not be possible. This is no different from rvalue references; you <i>could</i> have made that some kind of standard library type that language features could key off of, but then we wouldn&#39;t be able to use it to fix forwarding."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 1, "creation_date": 1523227323, "post_id": 49661253, "comment_id": 86460586, "body": "Why would it not be possible to have user-defined types in template parameters without compiler-generated comparisons? Don&#39;t you mean it would be problematic?"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "edited": false, "score": 0, "creation_date": 1548243160, "post_id": 49661253, "comment_id": 95470878, "body": "@Moia: I respectfully disagree, as does OP."}, {"owner": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "edited": false, "score": 0, "creation_date": 1548243199, "post_id": 49661253, "comment_id": 95470892, "body": "@einpoklum sorry, I meant code example not explanation"}, {"owner": {"reputation": 5809, "user_id": 893406, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NwATJ.png?s=128&g=1", "display_name": "v.oddou", "link": "https://stackoverflow.com/users/893406/v-oddou"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1552990236, "post_id": 49661253, "comment_id": 97209727, "body": "@MatteoItalia I think it would be cool to have a <code>hash</code> operator. Just like Nim enables sigil as function names. you could say <code>#var</code> to mean <code>std::hash(var)</code> and <code>&lt;-var</code> to say <code>std::move(var)</code>. These are all liberties you can take in Nim. (or almost; because sigils are actually quite limited)"}], "tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": true, "score": 18, "last_activity_date": 1581175162, "last_edit_date": 1581175162, "creation_date": 1522880115, "answer_id": 49661253, "question_id": 49661170, "link": "https://stackoverflow.com/questions/49661170/why-do-we-need-the-spaceship-operator-in-c/49661253#49661253", "title": "Why do we need the spaceship &lt;=&gt; operator in C++?", "body": "<p>I'll give you three points of motivation, just off the top of my head:</p>\n\n<ol>\n<li>It's the common generalization of all other comparison operator (for totally-ordered domains): <code>&gt;</code>, <code>&gt;=</code>, <code>==</code>, <code>&lt;=</code>, <code>&lt;</code> . Using <code>&lt;=&gt;</code> (spaceship), you can implement each of these other operations in a completely generic way.</li>\n<li>For strings, it's equivalent to the good old <code>strcmp()</code> function from the C standard library. So - useful for lexicographic order checks, such as data in vectors or lists or other ordered containers.</li>\n<li>For integral numbers, it's what the hardware does anyway: On <code>x86</code> or <code>x86_64</code> Comparing a and b (<code>CMP RAX, RBX</code>) is basically like subtracting (<code>SUB RAX, RBX</code>) except that <code>RAX</code> doesn't actually change, only the flags are affected, so you can use \"jump on equal/not equal/greater than/lesser than/etc.\" (JE/JNE/JGT/JLT etc.) as the next instruction. <code>CMP</code> should be thought of as a \"spaceship compare\".</li>\n</ol>\n"}], "owner": {"reputation": 2795, "user_id": 1201507, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/09d736757447fe10ccc7650179dd4f32?s=128&d=identicon&r=PG", "display_name": "Ram", "link": "https://stackoverflow.com/users/1201507/ram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7790, "favorite_count": 1, "accepted_answer_id": 49661253, "answer_count": 1, "score": 22, "last_activity_date": 1581175162, "creation_date": 1522879632, "last_edit_date": 1562838232, "question_id": 49661170, "link": "https://stackoverflow.com/questions/49661170/why-do-we-need-the-spaceship-operator-in-c", "title": "Why do we need the spaceship &lt;=&gt; operator in C++?", "body": "<p>Why do we need such an operator in C++ and how is it useful in modern C++ programming? Any real world code examples where this can be applied will help.</p>\n\n<p>This question is geared to understand the practical application in real world without reading wordy proposal from Herb Sutter. No offense to the proposal though.</p>\n"}, {"tags": ["c++", "c++11", "gcc", "compiler-errors"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1522879605, "post_id": 49661043, "comment_id": 86332085, "body": "Can&#39;t duplicate exact error message, but it looks like you need to enable c++11. Make sure -std=c++11 is in the compiler command line somewhere near the beginning."}, {"owner": {"reputation": 281, "user_id": 6022772, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9b8882fcc45328fb451d0fc9575f43ae?s=128&d=identicon&r=PG", "display_name": "user74091", "link": "https://stackoverflow.com/users/6022772/user74091"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1522879947, "post_id": 49661043, "comment_id": 86332208, "body": "i needed to include -std=c++11, that worked. if this solution is distinct from the other solutions this is marked as a duplicate to, answer so i can accept"}, {"owner": {"reputation": 281, "user_id": 6022772, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9b8882fcc45328fb451d0fc9575f43ae?s=128&d=identicon&r=PG", "display_name": "user74091", "link": "https://stackoverflow.com/users/6022772/user74091"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1522880171, "post_id": 49661043, "comment_id": 86332290, "body": "and this question should not be marked as duplicate because the answer to that problem used c-strings where this one use c-flags, other people might make the same mistake"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1522880378, "post_id": 49661043, "comment_id": 86332352, "body": "You can accomplish the goal either way. Both are valid. 5 bucks says the guts of <code>void open( const std::string &amp;filename, ios_base::openmode mode);</code> looks something like <code>open(filename.c_str(), mode);</code>"}], "owner": {"reputation": 281, "user_id": 6022772, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9b8882fcc45328fb451d0fc9575f43ae?s=128&d=identicon&r=PG", "display_name": "user74091", "link": "https://stackoverflow.com/users/6022772/user74091"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "closed_date": 1522879275, "answer_count": 0, "score": 0, "last_activity_date": 1530535824, "creation_date": 1522878902, "last_edit_date": 1530535824, "question_id": 49661043, "link": "https://stackoverflow.com/questions/49661043/why-wont-this-program-compile-with-user-input-for-filename", "closed_reason": "Duplicate", "title": "why wont this program compile with user input for filename", "body": "<p>I copied this problem straight out of the textbook <a href=\"https://rads.stackoverflow.com/amzn/click/com/0134544846\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">tony gaddis c++</a>, and it won't compile. Compiler is gcc 5.4.0. this is the my program:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\n#include&lt;string&gt;\nusing namespace std;\n\nint main() \n{\n    string fileName;\n    char ch;\n    fstream file;\n\n    cout &lt;&lt; \"enter a filename: \";\n    cin &gt;&gt; fileName;\n\n    file.open(fileName, ios::in);\n\n    if(file)\n    {\n        file.get(ch);\n\n        while(file)\n        {\n            cout &lt;&lt; ch;\n\n            file.get(ch);\n        }\n        file.close();\n    } \n    else \n        cout &lt;&lt; fileName &lt;&lt; \" could not be opened.\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>Again, I copied this straight out of the text. In fact it fails immediately after this point:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\n#include&lt;string&gt;\nusing namespace std;\n\nint main() \n{\n    string fileName;\n    char ch;\n    fstream file;\n\n    cout &lt;&lt; \"enter a filename: \";\n    cin &gt;&gt; fileName;\n\n    file.open(filename, ios::in);\n\n    // comment everything else out and compile still fails\n\n    return 0;\n}\n</code></pre>\n\n<p>this is the errors spit in the console:</p>\n\n<pre><code>chp12chal.cpp: In function \u2018int main()\u2019:\nchp12chal.cpp:15:32: error: no matching function for call to \u2018std::basic_fstream&lt;char&gt;::open(std::\n__cxx11::string&amp;, const openmode&amp;)\u2019     \nfile.open(filename, ios::in);\n                           ^\nIn file included from chp12chal.cpp:2:0:\n/usr/include/c++/5/fstream:1001:7: note: candidate: void std::basic_fstream&lt;_CharT, _Traits&gt;::open\n(const char*, std::ios_base::openmode) [with _CharT = char; _Traits = std::char_traits&lt;char&gt;; std:\n:ios_base::openmode = std::_Ios_Openmode]       \n       open(const char* __s,\n       ^\n/usr/include/c++/5/fstream:1001:7: note: no known conversion for argument 1 from \u2018std::__cxx11::\nstring {aka std::__cxx11::basic_string&lt;char&gt;}\u2019 to \u2018const char*\u2019\n</code></pre>\n\n<p>So I'm not sure what all of that means. Though I only started having this problem once I started taking user input as a variable for the input stream. </p>\n\n<p>When I simply code in the path of the file to open it works fine. </p>\n\n<p>Also, I know fileName and filename are not spelled the same, but that's the way it is done throughout the book in numerous examples so I'm leaving that as so. </p>\n\n<p>Could this be a compiler specific issue?</p>\n\n<p>addendum:</p>\n\n<p>I did also try:</p>\n\n<pre><code>string fileName;\nfileName = \"chp12txt.txt\";\nchar ch;\nfstream file;\n\nfile.open(fileName, ios::in);\n</code></pre>\n\n<p>To rule that out and still get same errors.</p>\n"}, {"tags": ["c++", "function", "execute"], "comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 1, "creation_date": 1522878680, "post_id": 49660986, "comment_id": 86331678, "body": "The assumption begged in the title is &quot;not possible&quot;."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 2, "creation_date": 1522878697, "post_id": 49660986, "comment_id": 86331683, "body": "It&#39;s because of the space in the file name. Use <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\"><code>getline</code></a>."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1522879053, "post_id": 49660986, "comment_id": 86331829, "body": "Hell all - probably not a good way to start a post. But then again I am a queer atheist poof. So I will be going to he&#39;ll."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1522879064, "post_id": 49660986, "comment_id": 86331835, "body": "<code>&gt;&gt;</code>&#39;s default behaviour is to stop after a single whitespace-delimited token. Basically it reads one and only one word. You want behaviour more like Option 2 in this linked answer: <a href=\"https://stackoverflow.com/a/7868998/4581301\">stackoverflow.com/a/7868998/4581301</a>"}, {"owner": {"reputation": 9, "user_id": 8351340, "user_type": "registered", "profile_image": "https://graph.facebook.com/1947268478874250/picture?type=large", "display_name": "Christian Potts", "link": "https://stackoverflow.com/users/8351340/christian-potts"}, "edited": false, "score": 0, "creation_date": 1522879096, "post_id": 49660986, "comment_id": 86331850, "body": "It seems that getline has fixed the issue! thanks very much, I spent way to much time trying to figure out this issue!"}], "owner": {"reputation": 9, "user_id": 8351340, "user_type": "registered", "profile_image": "https://graph.facebook.com/1947268478874250/picture?type=large", "display_name": "Christian Potts", "link": "https://stackoverflow.com/users/8351340/christian-potts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "closed_date": 1522878907, "answer_count": 0, "score": 0, "last_activity_date": 1522878723, "creation_date": 1522878591, "last_edit_date": 1522878723, "question_id": 49660986, "link": "https://stackoverflow.com/questions/49660986/c-is-executing-a-function-before-its-called", "closed_reason": "Duplicate", "title": "C++ is executing a function before its called?", "body": "<p>Hell all. This problem is driving me up the wall as I cant figure out what i'm doing wrong. All I want is to collect to variables and pass them into a function, however as soon as a input the first variable the function runs?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\nvoid avg_rain(string, string);\nint main()\n{\n    string file, unit;\n\n    //Prompt user for file names, and assign to character array\n    cout &lt;&lt; \"Please type the file names with extentions that you would like to open, seperate file names with spaces. \\nfile name(s) :\";\n    cin &gt;&gt; file;\n\n    //Prompt user for measurement unit\n    cout &lt;&lt; \"Please type the unit you would like measurments to be converted to (mm, cm, in)\\nUnit : \";\n    cin &gt;&gt; unit;\n\n    //execute function with passed through parameters\n    avg_rain(file, unit);\n\n    system(\"pause\");\nreturn 0;\n}\n\nvoid avg_rain(string ffile ,string funit )\n{\n    cout &lt;&lt; ffile;\n}\n</code></pre>\n\n<p>Even though  don't type anything for the second variable, this is my output.</p>\n\n<p>[OUTPUT:]</p>\n\n<pre><code>Please type the file names with extentions that you would like to open, seperate file names with spaces.\n\nfile name(s) :hello world\nPlease type the unit you would like measurments to be converted to (mm, cm, in)\n\nUnit : hello\n\nPress any key to continue . . .\n</code></pre>\n"}, {"tags": ["c++", "cuda"], "answers": [{"tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 1, "last_activity_date": 1522880105, "creation_date": 1522880105, "answer_id": 49661252, "question_id": 49660964, "link": "https://stackoverflow.com/questions/49660964/cuda-block-wide-parallel-primitives/49661252#49661252", "title": "CUDA Block-wide Parallel Primitives", "body": "<p>CUDA itself does not provide this functionality.</p>\n\n<p>The <a href=\"https://github.com/NVlabs/cub\" rel=\"nofollow noreferrer\">CUB library</a> was built with this purpose in mind.</p>\n\n<p>The block-level primitives are summarized <a href=\"http://nvlabs.github.io/cub/group___block_module.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>This <a href=\"http://nvlabs.github.io/cub/classcub_1_1_block_reduce.html\" rel=\"nofollow noreferrer\">page</a> has reference code for implementation of a block reduce.</p>\n"}], "owner": {"reputation": 506, "user_id": 1034772, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/73da738e07cc0bd7c9f365e279579400?s=128&d=identicon&r=PG", "display_name": "user1034772", "link": "https://stackoverflow.com/users/1034772/user1034772"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 49661252, "answer_count": 1, "score": 0, "last_activity_date": 1522880105, "creation_date": 1522878476, "question_id": 49660964, "link": "https://stackoverflow.com/questions/49660964/cuda-block-wide-parallel-primitives", "title": "CUDA Block-wide Parallel Primitives", "body": "<p>Are there any built-in CUDA kernel functions that are equivalent to OpenCL 2.0 work_group_* functions? I'm specifically looking for work_group_scan_exclusive_add and work_group_reduce_add. My naive implementations of these operations do not perform as well as OpenCL's built-in functions, and I expect that an implementation using __shfl could be used to speed things up with CUDA.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 826, "user_id": 1402389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/599c4eaaff0f5d2c3fe5feca6560173b?s=128&d=identicon&r=PG", "display_name": "FBergo", "link": "https://stackoverflow.com/users/1402389/fbergo"}, "edited": false, "score": 0, "creation_date": 1522876844, "post_id": 49660578, "comment_id": 86330842, "body": "Calling a vector &quot;list&quot;, using anything besides array/vector for quicksort, swapping the loop variable inside a for loop. This is nightmare fuel."}, {"owner": {"reputation": 27, "user_id": 2387629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea3f54cae9dd287516b9e13bb38b3d5?s=128&d=identicon&r=PG", "display_name": "Jordan Ward", "link": "https://stackoverflow.com/users/2387629/jordan-ward"}, "reply_to_user": {"reputation": 826, "user_id": 1402389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/599c4eaaff0f5d2c3fe5feca6560173b?s=128&d=identicon&r=PG", "display_name": "FBergo", "link": "https://stackoverflow.com/users/1402389/fbergo"}, "edited": false, "score": 0, "creation_date": 1522877573, "post_id": 49660578, "comment_id": 86331197, "body": "@FBergo Not sure what you mean, could you clarify?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1522877886, "post_id": 49660578, "comment_id": 86331354, "body": "On the first point, <code>std::list</code> exists in the standard library. The names may wind up colliding since it looks like <code>using namespace std;</code> is in play. A quick side note on that: <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">Why is \u201cusing namespace std\u201d considered bad practice?</a>"}, {"owner": {"reputation": 27, "user_id": 2387629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea3f54cae9dd287516b9e13bb38b3d5?s=128&d=identicon&r=PG", "display_name": "Jordan Ward", "link": "https://stackoverflow.com/users/2387629/jordan-ward"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1522878118, "post_id": 49660578, "comment_id": 86331451, "body": "@user4581301 Yeah this was written for us. All we were told to change is the three functions (quick sort, multiway_merge, and partition). I understand using namespace std shouldn&#39;t be used all the time. I see your point on the calling the vector &quot;list&quot; also, this was also name by whoever wrote this for us. I have only written the code inside the three functions, not the headers."}, {"owner": {"reputation": 27, "user_id": 2387629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea3f54cae9dd287516b9e13bb38b3d5?s=128&d=identicon&r=PG", "display_name": "Jordan Ward", "link": "https://stackoverflow.com/users/2387629/jordan-ward"}, "edited": false, "score": 0, "creation_date": 1522878421, "post_id": 49660578, "comment_id": 86331570, "body": "Also, why I am getting downvoted so many times??"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1522878805, "post_id": 49660578, "comment_id": 86331729, "body": "I was going to comment on that. I can see a case for (and acted on) closing the question for not having an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Basically you have too much stuff going on in the code sample. This shows that you&#39;ve done insufficient debugging on your own to narrow down the scope of the code to a single bug or related group of bugs. It could also be a &quot;Why haven&#39;t you walked through your code with a debugger?&quot; protest. I didn&#39;t downvote  because by the time I got here it was already -5 and that&#39;s a little excessive for a question like this."}, {"owner": {"reputation": 27, "user_id": 2387629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea3f54cae9dd287516b9e13bb38b3d5?s=128&d=identicon&r=PG", "display_name": "Jordan Ward", "link": "https://stackoverflow.com/users/2387629/jordan-ward"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1522879144, "post_id": 49660578, "comment_id": 86331872, "body": "@user4581301 I have walked through it and honestly not trying to make excuses but the University that I go to has not shown us how to debug very well. Only very basic, so I am trying to debug using xCode but came here for help/advice also."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1522879858, "post_id": 49660578, "comment_id": 86332183, "body": "Universities generally don&#39;t teach debugging. I moved from comp sci to electrical engineering after a professor I was going to have to deal with over the next 3 years told the class that &quot;If you write your code correctly you don&#39;t have to debug.&quot; and wasn&#39;t trying to be funny. Absolutely clueless &lt;expletive deleted&gt;. Anyway, first step to debugging just about anything is make the problem smaller. Try to isolate the bug. That&#39;s what the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is all about. Most of the time by the time you get half way to an MCVE you see the bug and can fix it yourself."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1522880076, "post_id": 49660578, "comment_id": 86332249, "body": "Anyway hit things one problem at a time. If your target bug is in <code>multiway_merge</code>, there is no reason to include the quicksort implementation. Don&#39;t even post it unless somehow removing it changes the behavior of <code>multiway_merge</code>."}, {"owner": {"reputation": 27, "user_id": 2387629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea3f54cae9dd287516b9e13bb38b3d5?s=128&d=identicon&r=PG", "display_name": "Jordan Ward", "link": "https://stackoverflow.com/users/2387629/jordan-ward"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1522880352, "post_id": 49660578, "comment_id": 86332341, "body": "@user4581301 I mean removing the quick sort would definitely change the behavior of multiway_merge because the vectors are supposed to be sorted by the time the program gets to multiway_merge."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1522880756, "post_id": 49660578, "comment_id": 86332479, "body": "You can demonstrate the bug by feeding pre-sorted lists into <code>multiway_merge</code>. No need to call <code>quicksort</code> first and you have the added benefit of not having to deal with whatever bugs are in <code>quicksort</code>. The goal is to debug as little as possible at a time. More code means more surface area for bugs to hide in and probably more bugs. If you have two bugs and fix one, how will you know you fixed the bug? The program still doesn&#39;t work. One bug, one fix, one test. Two bugs isn&#39;t twice the work; it&#39;s more like multiple bugs make the work go exponential."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1522880902, "post_id": 49660578, "comment_id": 86332536, "body": "By the way, I don&#39;t like the looks of <code>for(index = first + 1; index &lt;= last; index++)</code> in <code>partition</code> It might work, haven&#39;t tested it, but it&#39;s not standard for a Lomuto partition and this raises my suspicion level."}, {"owner": {"reputation": 27, "user_id": 2387629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea3f54cae9dd287516b9e13bb38b3d5?s=128&d=identicon&r=PG", "display_name": "Jordan Ward", "link": "https://stackoverflow.com/users/2387629/jordan-ward"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1522881376, "post_id": 49660578, "comment_id": 86332714, "body": "@user4581301 I see what you mean now. I looked up &quot;Lomuto partition&quot; because I wasn&#39;t sure what that was but I am not supposed to use that. Like my OP says, we are supposed to use the median of the first, last, and middle elements of the vector for the pivot, not just use the last element as the pivot."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1522882331, "post_id": 49660578, "comment_id": 86333068, "body": "There are two things you do in <code>partition</code>: 1) Pick the pivot, and 2) partition based on the pivot. Lomuto&#39;s default pivot selection is trivial, but easily replaced with more complicated algorithms as you have done. But the partitioning doesn&#39;t look right. If you run into bugs, I&#39;d match what you have done with all but the first couple lines of Lomuto. Wikipedia has a good page on quicksort, complete with pseudocode if I remember correctly."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1522877022, "post_id": 49660645, "comment_id": 86330940, "body": "Alternative: initialize <code>output_list</code> to the correct size (eg <code>vector&lt;int&gt; output_list(n * m);</code>) and then assign values <code>output_list[wherever] = whatever;</code>"}, {"owner": {"reputation": 27, "user_id": 2387629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea3f54cae9dd287516b9e13bb38b3d5?s=128&d=identicon&r=PG", "display_name": "Jordan Ward", "link": "https://stackoverflow.com/users/2387629/jordan-ward"}, "edited": false, "score": 0, "creation_date": 1522877212, "post_id": 49660645, "comment_id": 86331030, "body": "Thank you that solved that problem. Like I said in the original post, the main function was written for us, so I&#39;m not sure why they initialized it like that. I am also having one other problem that I just ran into. Anything bigger than 3 lists is causing my program to crash in the quick sort function. Any idea why? Not sure why it works for a smaller number of lists but not anymore than 3."}, {"owner": {"reputation": 27, "user_id": 2387629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea3f54cae9dd287516b9e13bb38b3d5?s=128&d=identicon&r=PG", "display_name": "Jordan Ward", "link": "https://stackoverflow.com/users/2387629/jordan-ward"}, "edited": false, "score": 0, "creation_date": 1522877517, "post_id": 49660645, "comment_id": 86331163, "body": "@scohe001 The only reason I don&#39;t think initializing the output_list to size n * m would work is because when I get to the while loop in my multiway_merge function, I don&#39;t have a count or anything to know where to assign the next value in the vector."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 27, "user_id": 2387629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea3f54cae9dd287516b9e13bb38b3d5?s=128&d=identicon&r=PG", "display_name": "Jordan Ward", "link": "https://stackoverflow.com/users/2387629/jordan-ward"}, "edited": false, "score": 0, "creation_date": 1522877666, "post_id": 49660645, "comment_id": 86331245, "body": "@JordanWard Sounds like option 2 may be your best bet. No rampant resizing because of the <code>reserve</code> and <code>push_back</code> provides your book-keeping for you."}, {"owner": {"reputation": 27, "user_id": 2387629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea3f54cae9dd287516b9e13bb38b3d5?s=128&d=identicon&r=PG", "display_name": "Jordan Ward", "link": "https://stackoverflow.com/users/2387629/jordan-ward"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1522878000, "post_id": 49660645, "comment_id": 86331393, "body": "@user4581301 Okay, now it works fine for small lists with few numbers but when I do more than 3 lists, it wants to crash. Not sure why it works with fewer lists but not more than 3. Any idea why this might be?"}], "tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": true, "score": 1, "last_activity_date": 1522877264, "last_edit_date": 1522877264, "creation_date": 1522876808, "answer_id": 49660645, "question_id": 49660578, "link": "https://stackoverflow.com/questions/49660578/why-is-my-final-vector-double-the-size-it-should-be-and-have-leading-0s/49660645#49660645", "title": "Why is my final vector double the size it should be and have leading 0&#39;s?", "body": "<p><code>vector&lt;int&gt; output_list(n * m);</code> initializes <code>output_list</code> to be size <code>n*m</code> and fills with 0's. You then <code>push_back</code> values after that.</p>\n\n<p>You have 3 options:</p>\n\n<ol>\n<li><p>Don't initialize <code>output_list</code> to have values. Let the program reserve space on the fly as you <code>push_back</code>.</p></li>\n<li><p>Don't initialize <code>output_list</code> to have values, but increase its <em>capacity</em> using <a href=\"http://en.cppreference.com/w/cpp/container/vector/reserve\" rel=\"nofollow noreferrer\"><code>reserve</code></a>.</p></li>\n<li><p>Initialize <code>output_list</code> as you have, but don't <code>push_back</code> in the function. Instead, modify the values of the indexes instead of adding more.</p></li>\n</ol>\n"}], "owner": {"reputation": 27, "user_id": 2387629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea3f54cae9dd287516b9e13bb38b3d5?s=128&d=identicon&r=PG", "display_name": "Jordan Ward", "link": "https://stackoverflow.com/users/2387629/jordan-ward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 49660645, "answer_count": 1, "score": -5, "last_activity_date": 1522877264, "creation_date": 1522876562, "question_id": 49660578, "link": "https://stackoverflow.com/questions/49660578/why-is-my-final-vector-double-the-size-it-should-be-and-have-leading-0s", "title": "Why is my final vector double the size it should be and have leading 0&#39;s?", "body": "<p>I am doing this small project for a class and I have pretty much finished it but for some reason my merged vector is double the size it should be and has leading 0's that shouldn't be there. The main function was written for us, we have to write the partition, quick sort, and multiway_merge functions. First, the program should take in the number of lists, number of integers in each list, and then the numbers that go in each list from the keyboard. Then we quick sort each of the lists using a quick sort and partition function. The pivot in the partition function should be the median of the first, middle, and last elements in the list. Once sorted, we use the multiway_merge function to merge the sorted lists. I have gotten it to sort the lists and merge them but for some reason I am getting a final vector that is double the size it should be and the first half of it are 0's. If you guys could help me figure this out, that would be great!</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;cmath&gt;\n#include &lt;queue&gt;\n\nusing namespace std;\n\nint partition(vector&lt;int&gt;&amp; list, int first, int last) {\n    // The pivot should be the median of the\n    // first, middle, and last elements.\n    int pivot;\n    int index, smallIndex;\n    int middle = floor(list.size() / 2);\n\n    int arr[3] = {first, middle, last};\n    int size = sizeof(arr) / sizeof(arr[0]);\n    sort(arr, arr + size);\n\n    swap(first, arr[1]);\n    pivot = list[first];\n    smallIndex = first;\n\n    for(index = first + 1; index &lt;= last; index++)\n        if(list[index] &lt; pivot) {\n            smallIndex++;\n            swap(smallIndex, index);\n        }\n\n    swap(first, smallIndex);\n    return smallIndex;\n}\n\nvoid quicksort(vector&lt;int&gt;&amp; list, int first, int last) {\n    if(first == last)\n        return;\n\n    else {\n        int pivotLocation = partition(list, first, last);\n        quicksort(list, first, pivotLocation - 1);\n        quicksort(list, pivotLocation + 1, last);\n    }\n}\n\nvoid multiway_merge(vector&lt;vector&lt;int&gt; &gt;&amp; input_lists, \nvector&lt;int&gt;&amp; output_list) {\n    int size = input_lists.size();\n    int s = input_lists[0].size();\n    priority_queue&lt;int, vector&lt;int&gt;, greater&lt;int&gt; &gt; minHeap;\n\n    for(int i = 0; i &lt; size; i++) {\n        for(int j = 0; j &lt; s; j++) {\n            minHeap.push(input_lists[i][j]);\n\n            if(minHeap.size() &gt; size) {\n                output_list.push_back(minHeap.top());\n                minHeap.pop();\n            }\n        }\n    }\n\n    while(minHeap.size()) {\n        output_list.push_back(minHeap.top());\n        minHeap.pop();\n    }\n}\n\nint main(int argc, char** argv) {\n    int n, m;\n    cin &gt;&gt; n &gt;&gt; m;\n\n    vector&lt;vector&lt;int&gt; &gt; input_lists(n, vector&lt;int&gt;(m));\n\n    for (int i = 0; i &lt; n; ++i) {\n        for (int j = 0; j &lt; m; ++j) {\n            cin &gt;&gt; input_lists[i][j];\n        }\n    }\n\n    // Quicksort k sublists\n    for (int i = 0; i &lt; input_lists.size(); ++i)\n        quicksort(input_lists[i], 0, m-1);\n\n    // Merge n input sublists into one sorted list\n    vector&lt;int&gt; output_list(n * m);\n    multiway_merge(input_lists, output_list);\n\n    for (int i = 0; i &lt; output_list.size(); ++i)\n        cout &lt;&lt; output_list[i] &lt;&lt; \" \";\n    cout &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 7, "creation_date": 1522876971, "post_id": 49660558, "comment_id": 86330909, "body": "Your function returns by value, which means it returns a copy of the thing that you put in the return expression (usually).  Theoretically there is no difference in behaviour or performance between the two codes you mention in #3, other than the result of <code>decltype(myRef1)</code>"}, {"owner": {"reputation": 4300, "user_id": 4513509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MAkrs.png?s=128&g=1", "display_name": "NonCreature0714", "link": "https://stackoverflow.com/users/4513509/noncreature0714"}, "edited": false, "score": 0, "creation_date": 1522879032, "post_id": 49660558, "comment_id": 86331818, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/57483/what-are-the-differences-between-a-pointer-variable-and-a-reference-variable-in\">What are the differences between a pointer variable and a reference variable in C++?</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 4300, "user_id": 4513509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MAkrs.png?s=128&g=1", "display_name": "NonCreature0714", "link": "https://stackoverflow.com/users/4513509/noncreature0714"}, "edited": false, "score": 2, "creation_date": 1522882688, "post_id": 49660558, "comment_id": 86333210, "body": "@NonCreature0714 that thread doesn&#39;t seem to cover this question (which doesn&#39;t mention pointers at all)"}, {"owner": {"reputation": 1756, "user_id": 5233188, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/OS2a7.png?s=128&g=1", "display_name": "goulashsoup", "link": "https://stackoverflow.com/users/5233188/goulashsoup"}, "reply_to_user": {"reputation": 4300, "user_id": 4513509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MAkrs.png?s=128&g=1", "display_name": "NonCreature0714", "link": "https://stackoverflow.com/users/4513509/noncreature0714"}, "edited": false, "score": 0, "creation_date": 1522885409, "post_id": 49660558, "comment_id": 86333993, "body": "@NonCreature0714 I took a look to the question which should answer mine because it is a DUPLICATE and couldn&#39;t see anything about const references in relation to member variables... Can you explain why you think my question is a duplication so that I&#39;m able to make the difference more clear?"}, {"owner": {"reputation": 4300, "user_id": 4513509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MAkrs.png?s=128&g=1", "display_name": "NonCreature0714", "link": "https://stackoverflow.com/users/4513509/noncreature0714"}, "edited": false, "score": 0, "creation_date": 1522887230, "post_id": 49660558, "comment_id": 86334520, "body": "I <i>think</i> it <i>may</i> be a dup because: 1) adding <code>const</code> doesn&#39;t change the behavior during assignment but after assignment, 2) There is no different behaviour if the value is copy assigned from an object or a hard-coded value, 3) Even copied <code>const</code> values, behavior is not different than any copied value and it part of its new scope. 4) <code>const</code> behavior is <a href=\"https://stackoverflow.com/questions/4486326/does-const-just-mean-read-only-or-something-more\">well-established</a> and adds nothing unique to the assignment of variables or reference variables, whether copied from a member variable or not."}, {"owner": {"reputation": 4300, "user_id": 4513509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MAkrs.png?s=128&g=1", "display_name": "NonCreature0714", "link": "https://stackoverflow.com/users/4513509/noncreature0714"}, "edited": false, "score": 1, "creation_date": 1522887314, "post_id": 49660558, "comment_id": 86334545, "body": "@goulashsoup That said, I defer to M.M&#39;s greater expertise, and apologize for mistakenly raising an incorrect flag."}, {"owner": {"reputation": 65414, "user_id": 768469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/383724e63ab04b146277912c16f27f54?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/768469/nemo"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1522887510, "post_id": 49660558, "comment_id": 86334605, "body": "@M.M That is true for C++11 (which effectively mandates copy elision); but not necessarily, in theory, for C++03 (which permits but does not require it). Although probably true in practice regardless."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 65414, "user_id": 768469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/383724e63ab04b146277912c16f27f54?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/768469/nemo"}, "edited": false, "score": 0, "creation_date": 1522887911, "post_id": 49660558, "comment_id": 86334729, "body": "@Nemo C++11 doesn&#39;t effectively mandate copy elision; my comment applies to the current version (C++17) which does"}], "answers": [{"comments": [{"owner": {"reputation": 1756, "user_id": 5233188, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/OS2a7.png?s=128&g=1", "display_name": "goulashsoup", "link": "https://stackoverflow.com/users/5233188/goulashsoup"}, "edited": false, "score": 0, "creation_date": 1522879013, "post_id": 49660952, "comment_id": 86331805, "body": "I didn&#39;t downvote but <i>the value of <code>myRef1</code> will change if the value of the member changes</i> is wrong simply because <code>getMyMember1()</code> DOES NOT return a reference."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 1, "creation_date": 1522879675, "post_id": 49660952, "comment_id": 86332112, "body": "<code>myRef1</code> is not a reference to the member, but to the temporary returned from the (member) function."}, {"owner": {"reputation": 4300, "user_id": 4513509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MAkrs.png?s=128&g=1", "display_name": "NonCreature0714", "link": "https://stackoverflow.com/users/4513509/noncreature0714"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1522880102, "post_id": 49660952, "comment_id": 86332257, "body": "@DanielJour correction made, with a link to an explanation of temporaries."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 2, "creation_date": 1522881245, "post_id": 49660952, "comment_id": 86332668, "body": "Yes there is a technical difference, but I&#39;m not aware of any practical difference in behavior, except if you use them with <code>decltype</code> (as M.M already commented on the question)."}], "tags": [], "owner": {"reputation": 4300, "user_id": 4513509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MAkrs.png?s=128&g=1", "display_name": "NonCreature0714", "link": "https://stackoverflow.com/users/4513509/noncreature0714"}, "is_accepted": true, "score": 4, "last_activity_date": 1522887867, "last_edit_date": 1522887867, "creation_date": 1522878381, "answer_id": 49660952, "question_id": 49660558, "link": "https://stackoverflow.com/questions/49660558/c-difference-between-copy-initialization-and-const-reference-initialization-if/49660952#49660952", "title": "C++ Difference between copy initialization and const reference initialization if value comes from member variable", "body": "<p>There is a negligible technical difference. (As M.M pointed out in the comments.)</p>\n\n<p>Firstly, this: </p>\n\n<pre><code>const string myVal1 = myObj.getMyMember1();\n</code></pre>\n\n<p>Initializes a string <code>const</code> which is a copy of the value of the member of <code>myObj</code>. </p>\n\n<p>But this: </p>\n\n<pre><code>const string &amp;myRef1 = myObj.getMyMember1();\n</code></pre>\n\n<p>Initializes a string <code>const</code> <a href=\"https://stackoverflow.com/questions/10897799/temporary-objects-when-are-they-created-how-do-you-recognise-them-in-code\">reference to a temporary</a> returned by the member of <code>myObj</code>, and can never be reassigned. </p>\n\n<p>In both cases, a copy is made... <a href=\"https://stackoverflow.com/questions/4486326/does-const-just-mean-read-only-or-something-more\">And adding <code>const</code></a> promises the compiler those values won't be reassigned.</p>\n"}, {"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1522887795, "post_id": 49661322, "comment_id": 86334685, "body": "This code though does have a tepmorary, the method does not return a reference..."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1522888126, "post_id": 49661322, "comment_id": 86334778, "body": "The OP talks about references to members, even though their code doesn&#39;t reflect that.  So its not really clear what they&#39;re asking for, or where their confusion is, other than a basic confusion of references and values."}], "tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 2, "last_activity_date": 1522880526, "creation_date": 1522880526, "answer_id": 49661322, "question_id": 49660558, "link": "https://stackoverflow.com/questions/49660558/c-difference-between-copy-initialization-and-const-reference-initialization-if/49661322#49661322", "title": "C++ Difference between copy initialization and const reference initialization if value comes from member variable", "body": "<blockquote>\n  <p>Normally if you use a constant reference to a r-value the lifetime of the r-value is extended to match the lifetime of the reference.</p>\n</blockquote>\n\n<p>This is incorrect.  The correct statement is \"If you create a const rvalue reference to and unnamed temporary object, the lifetime of that temporary object is extended to match the lifetime of the rvalue reference\".</p>\n\n<p>No temporary object means no lifetime extension.  In particular, when a method returns a reference, it returns a reference.  There's no unnamed temporary object created, so there's nothing to have its lifetime extended.  Only when it returns a non-reference actual object by value AND that object is not named, so there's an actual unnamed temporary return value object that is not elided by RVO, is there an opportunity for the lifetime of that temporary to be extended.</p>\n"}], "owner": {"reputation": 1756, "user_id": 5233188, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/OS2a7.png?s=128&g=1", "display_name": "goulashsoup", "link": "https://stackoverflow.com/users/5233188/goulashsoup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 1, "accepted_answer_id": 49660952, "answer_count": 2, "score": 4, "last_activity_date": 1522887867, "creation_date": 1522876513, "last_edit_date": 1522885614, "question_id": 49660558, "link": "https://stackoverflow.com/questions/49660558/c-difference-between-copy-initialization-and-const-reference-initialization-if", "title": "C++ Difference between copy initialization and const reference initialization if value comes from member variable", "body": "<p>Consider the following:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass MyClass {\n    public:\n        MyClass(string myMemberInitValue);\n        const string getMyMember1();\n    private:\n        string myMember;\n};\n\nMyClass::MyClass(string myMemberInitValue) :\n    myMember(myMemberInitValue)\n{}\n\nconst string MyClass::getMyMember1()\n{\n    return myMember;\n}\n\nint main()\n{\n    MyClass myObj(\"Hello World\");\n\n    const string myVal1 = myObj.getMyMember1(); // Ok\n    const string &amp;myRef1 = myObj.getMyMember1(); // A reference to an rvalue\n\n    ...\n\n    return 0;\n};\n</code></pre>\n\n<hr>\n\n<p>Normally if you use a constant <a href=\"https://herbsutter.com/2008/01/01/gotw-88-a-candidate-for-the-most-important-const/\" rel=\"nofollow noreferrer\">reference to a r-value</a>  the <a href=\"http://www.learncpp.com/cpp-tutorial/74a-returning-values-by-value-reference-and-address/\" rel=\"nofollow noreferrer\">lifetime of the r-value is extended to match the lifetime of the reference</a>... </p>\n\n<p><strong>1. But what if the r-value is a member variable of an object?</strong></p>\n\n<p>Either the value gets copied or a reference to the member variable is made but that would just be valid as long as the value of the member variable doesn't change... </p>\n\n<p><strong>2. So in my understanding the value must be copied anyway, right?</strong></p>\n\n<p><strong>3. So is there a difference between <code>const string myVal1 = myObj.getMyMember1()</code> and <code>const string &amp;myRef1 = myObj.getMyMember1()</code> (compiler behavior, performance)?</strong></p>\n"}, {"tags": ["c++", "random"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1522875370, "post_id": 49660257, "comment_id": 86330107, "body": "You used <code>(rand() % 100)+ 1;</code> to get a random number in the range you wanted.  Just modify it with the new range you want."}, {"owner": {"reputation": 23, "user_id": 8858840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fee09bde188350648684bbd8b3e8b3f?s=128&d=identicon&r=PG&f=1", "display_name": "pleka7", "link": "https://stackoverflow.com/users/8858840/pleka7"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1522875871, "post_id": 49660257, "comment_id": 86330371, "body": "I did it before, but it will always print the same random number,i think because I can only use srand once."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1522876154, "post_id": 49660257, "comment_id": 86330506, "body": "Yes, you only use <code>srand</code> once.  You change the 100 and 1 in <code>(rand() % 100)+ 1</code> to the new range you want and then call that."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8858840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fee09bde188350648684bbd8b3e8b3f?s=128&d=identicon&r=PG&f=1", "display_name": "pleka7", "link": "https://stackoverflow.com/users/8858840/pleka7"}, "edited": false, "score": 0, "creation_date": 1522944735, "post_id": 49660894, "comment_id": 86365082, "body": "Thank you so much, very helpful! Btw, did you come up yourself with this random function?"}, {"owner": {"reputation": 23, "user_id": 8858840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fee09bde188350648684bbd8b3e8b3f?s=128&d=identicon&r=PG&f=1", "display_name": "pleka7", "link": "https://stackoverflow.com/users/8858840/pleka7"}, "edited": false, "score": 0, "creation_date": 1522947248, "post_id": 49660894, "comment_id": 86366605, "body": "Thank you so much, very helpful! But in a case in which I have guess = 65 for example and I tell the computer to guess it, and in the first loop for example gives me 14, in the second loop 50, in the 3rd loop 67, 4th loop give me 12. How can I handle the case in which the computer  acknowledge the values inserted before, so I can point it in the right direction? For example: being guess = 65, 1st loop gives 14, second loop 50, 3rd loop 67, 4th loop 59, 5th loop 63, 7th loop 65.How can i orient the program in that direction?"}, {"owner": {"reputation": 1533, "user_id": 6204556, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EJxCy.jpg?s=128&g=1", "display_name": "Shadi", "link": "https://stackoverflow.com/users/6204556/shadi"}, "reply_to_user": {"reputation": 23, "user_id": 8858840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fee09bde188350648684bbd8b3e8b3f?s=128&d=identicon&r=PG&f=1", "display_name": "pleka7", "link": "https://stackoverflow.com/users/8858840/pleka7"}, "edited": false, "score": 0, "creation_date": 1522947678, "post_id": 49660894, "comment_id": 86366853, "body": "You want the computer to guess a number in your mind between 1 and 100 by narrowing randomly generated numbers?"}, {"owner": {"reputation": 1533, "user_id": 6204556, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EJxCy.jpg?s=128&g=1", "display_name": "Shadi", "link": "https://stackoverflow.com/users/6204556/shadi"}, "reply_to_user": {"reputation": 23, "user_id": 8858840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fee09bde188350648684bbd8b3e8b3f?s=128&d=identicon&r=PG&f=1", "display_name": "pleka7", "link": "https://stackoverflow.com/users/8858840/pleka7"}, "edited": false, "score": 0, "creation_date": 1522949234, "post_id": 49660894, "comment_id": 86367749, "body": "@pleka7, If yes, you can use two variables <code>minguess</code> and <code>maxguess</code>. Initialize them to <code>0</code> and <code>100</code> respectively. and call <code>random(minguess,maxguess)</code> then you change them as needed."}, {"owner": {"reputation": 23, "user_id": 8858840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fee09bde188350648684bbd8b3e8b3f?s=128&d=identicon&r=PG&f=1", "display_name": "pleka7", "link": "https://stackoverflow.com/users/8858840/pleka7"}, "edited": false, "score": 0, "creation_date": 1522968787, "post_id": 49660894, "comment_id": 86377066, "body": "Thank you @Shadi! Yes, I would like the program to narrow it down, based on the previous generated numbers, for example knowing that the number guessed is less than 60 and more than 40, and not give me numbers like 12 !"}, {"owner": {"reputation": 1533, "user_id": 6204556, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EJxCy.jpg?s=128&g=1", "display_name": "Shadi", "link": "https://stackoverflow.com/users/6204556/shadi"}, "reply_to_user": {"reputation": 23, "user_id": 8858840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fee09bde188350648684bbd8b3e8b3f?s=128&d=identicon&r=PG&f=1", "display_name": "pleka7", "link": "https://stackoverflow.com/users/8858840/pleka7"}, "edited": false, "score": 0, "creation_date": 1522975359, "post_id": 49660894, "comment_id": 86378703, "body": "@pleka7         Check the <b><i>Update</i></b> section in the answer."}], "tags": [], "owner": {"reputation": 1533, "user_id": 6204556, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EJxCy.jpg?s=128&g=1", "display_name": "Shadi", "link": "https://stackoverflow.com/users/6204556/shadi"}, "is_accepted": false, "score": 0, "last_activity_date": 1522975221, "last_edit_date": 1522975221, "creation_date": 1522878092, "answer_id": 49660894, "question_id": 49660257, "link": "https://stackoverflow.com/questions/49660257/how-can-i-generate-a-random-number-which-is-higher-or-lower-than-the-random-num/49660894#49660894", "title": "How can I generate a random number which is, higher or lower than the random number generated before?", "body": "<p>You just need to call random with your new limits. </p>\n\n<p>To make things easier let us write a function that generates integers between any two limits we specify, say <code>low_limit</code> and <code>low_limit</code>. </p>\n\n<pre><code>int random(int low_limit, int up_limit){\n    return rand() % ((up_limit - low_limit) + 1) + low_limit;\n}\n</code></pre>\n\n<p>Now generate the first number by calling the function and save the result into a <code>temp</code> variable.</p>\n\n<pre><code>temp = random (0, 100);\n</code></pre>\n\n<p>Now upon user input you can use <code>temp</code> to call <code>random</code> like this:</p>\n\n<pre><code>   if (value == higher)\n       temp = random (temp, 100);\n    else if (value == lower)\n       temp = random (0, temp);\n</code></pre>\n\n<p>For different random numbers each run you can use <code>srand</code> function with a parameter that can give a different seed each time like system time.</p>\n\n<pre><code>srand(time(NULL));\n</code></pre>\n\n<p>note: Use the proper headers.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Based on your comments, you can use extra two variables say: <code>minguess</code> and <code>maxguess</code> to narrow your random generation range. check the following piece of code:</p>\n\n<pre><code>srand(time(NULL));\nint choice, minguess = 0, maxguess = 100, current;\ndo{\n    choice = 0;\n    current = random(minguess,maxguess);\n    cout &lt;&lt; \"\\n My guess is: \" &lt;&lt; current &lt;&lt; \"\\n\";\n    while (choice &lt; 1 || choice &gt; 3){\n        cout &lt;&lt; \"\\n Enter you choice: \\n\";\n        cout &lt;&lt; \" 1- higher. \\n\";\n        cout &lt;&lt; \" 2- lower. \\n\";\n        cout &lt;&lt; \" 3- quit. \\n\\n\";\n        cin &gt;&gt; choice;\n    }\n    if (choice == 1)\n        minguess = current;\n    else if (choice == 2)\n        maxguess = current;\n} while (choice != 3);\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8858840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fee09bde188350648684bbd8b3e8b3f?s=128&d=identicon&r=PG&f=1", "display_name": "pleka7", "link": "https://stackoverflow.com/users/8858840/pleka7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522975221, "creation_date": 1522875252, "last_edit_date": 1522878901, "question_id": 49660257, "link": "https://stackoverflow.com/questions/49660257/how-can-i-generate-a-random-number-which-is-higher-or-lower-than-the-random-num", "title": "How can I generate a random number which is, higher or lower than the random number generated before?", "body": "<p>/*Instead of increment 1 or decrease 1 the random number in the for loop, I would like the code to generate a random integer higher than the previous random generated if guess is higher and to generate a random integer lower than the previous random generated if the guess is lower./</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;ctime&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main(){\n    int counter = 0;\n    unsigned int guess;\n    srand(time(NULL));\n    unsigned int random_number = (rand() % 100)+ 1;\n\n    std::string higher = \"higher\";\n    std::string lower = \"lower\";\n    std::string value = \"\";\n\n    cout &lt;&lt; \"Please enter a number between 1 and 100, so the computer can guess it!\" &lt;&lt; endl;\n    cin &gt;&gt; guess;\n    cout &lt;&lt; random_number &lt;&lt; endl;\n\n    while (guess != random_number)\n    {\n        cout &lt;&lt; \"Is it a lower or higher value?\" &lt;&lt; endl;\n        cin &gt;&gt; value;\n        if (value == higher)\n        {\n            for(int i = 1; i&lt; 2; i++)\n            {\n                random_number = random_number + 1;\n                cout &lt;&lt; random_number &lt;&lt; endl;\n            }\n        }\n        else if (value == lower)\n        {\n            for(int i =1; i &lt; 2; i++)\n            {\n                random_number = random_number - 1;\n                cout &lt;&lt; random_number &lt;&lt; endl;\n            }\n        }\n    }\n    cout &lt;&lt; \"This PC is fabulous\" &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2017", "unreal-engine4"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1522875239, "post_id": 49660107, "comment_id": 86330048, "body": "&quot;There are build errors&quot; means your code doesn&#39;t compile - this isn&#39;t IntelliSense&#39;s fault and third party tools won&#39;t fix it either. Read the error messages and fix those errors instead of blaming your tools"}, {"owner": {"reputation": 137, "user_id": 6067562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ee927e2e46a742f343114200cd3ca55?s=128&d=identicon&r=PG&f=1", "display_name": "alexanders916", "link": "https://stackoverflow.com/users/6067562/alexanders916"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1522875335, "post_id": 49660107, "comment_id": 86330099, "body": "Sorry, I didn&#39;t write it right, it sais that it is expecting to have build errors because of the false placed macro. I&#39;m not that of a noob to not recognize my build errors in that file."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1522875484, "post_id": 49660107, "comment_id": 86330156, "body": "No, that message still means that your code failed to compile - this has nothing to do with IntelliSense. In fact the full message asks you if you want to run <i>the last successful build</i>. There&#39;s an Error list available in Visual studio that will list all the errors that occurred during compilation"}, {"owner": {"reputation": 137, "user_id": 6067562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ee927e2e46a742f343114200cd3ca55?s=128&d=identicon&r=PG&f=1", "display_name": "alexanders916", "link": "https://stackoverflow.com/users/6067562/alexanders916"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1522875564, "post_id": 49660107, "comment_id": 86330204, "body": "First stop downvoting without reason, it <b>does</b> compile: <code>========== Build: 2 succeeded, 0 failed, 0 up-to-date, 0 skipped ==========</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user820304"}, "edited": false, "score": 0, "creation_date": 1522875650, "post_id": 49660107, "comment_id": 86330246, "body": "I used to run into many of these issues, but do not remember the specific steps I used to fix them. FWIW, I do have a C++ project (with some blueprints on top, but those are minimal configuration differences) working with just UE4.18 &amp; VS2017."}, {"owner": {"reputation": 137, "user_id": 6067562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ee927e2e46a742f343114200cd3ca55?s=128&d=identicon&r=PG&f=1", "display_name": "alexanders916", "link": "https://stackoverflow.com/users/6067562/alexanders916"}, "edited": false, "score": 0, "creation_date": 1522875667, "post_id": 49660107, "comment_id": 86330254, "body": "The errors persist, just this bizarre build error dialog disappeared."}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1522876045, "post_id": 49660107, "comment_id": 86330454, "body": "Hmm, reading this: <a href=\"https://stackoverflow.com/help/why-vote\">stackoverflow.com/help/why-vote</a> I think that downvoting answers which seem stupid is actually the idea of the voting mechanism. After all &quot;stupid&quot; is practically the opposite of &quot;helpful&quot;. This also applies in case you should actually refer to downvoting questions which seem stupid."}, {"owner": {"reputation": 137, "user_id": 6067562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ee927e2e46a742f343114200cd3ca55?s=128&d=identicon&r=PG&f=1", "display_name": "alexanders916", "link": "https://stackoverflow.com/users/6067562/alexanders916"}, "edited": false, "score": 0, "creation_date": 1522876106, "post_id": 49660107, "comment_id": 86330486, "body": "So I&#39;m not allowed to ask a question where no answer was given at any time?"}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1522876281, "post_id": 49660107, "comment_id": 86330561, "body": "I do not understand that. Apart from its provocative nature of course. What do you mean by &quot;a question where no answer was given at any time&quot;?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user820304"}, "edited": false, "score": 0, "creation_date": 1522876291, "post_id": 49660107, "comment_id": 86330568, "body": "I don&#39;t agree with the downvotes, personally. If I had to guess, I&#39;d think the language of your post comes across as a bit fussy, and maybe that&#39;s rubbing people the wrong way? I&#39;d also suggest also posting this on the <a href=\"https://answers.unrealengine.com/\" rel=\"nofollow noreferrer\">UE4 Q/A</a>."}, {"owner": {"reputation": 137, "user_id": 6067562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ee927e2e46a742f343114200cd3ca55?s=128&d=identicon&r=PG&f=1", "display_name": "alexanders916", "link": "https://stackoverflow.com/users/6067562/alexanders916"}, "edited": false, "score": 0, "creation_date": 1522876457, "post_id": 49660107, "comment_id": 86330650, "body": "Because I&#39;m fighting with this for about a year right now and I&#39;m a bit sick of it. I already posted this on the UE4 Q/A but nobody got an answer for half a year. That&#39;s why I posted the question with the risk of being downvoted (what clearly happened here)."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 2, "creation_date": 1522876644, "post_id": 49660107, "comment_id": 86330736, "body": "@alexanders916: People are downvoting because half the question is a rant, and the problem is very poorly described to the point where it&#39;s hard for us to even understand what you&#39;re experiencing. You mention intellisense, but then also quote build errors, but then also say that there are no build errors. You say intellisense throws up because the macro isn&#39;t on line 9, but don&#39;t say what &quot;throw up&quot; means, or describe why line 9 is relevant. This confusion means the question is unclear, which means it should be downvoted."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1522876711, "post_id": 49660107, "comment_id": 86330766, "body": "However: <a href=\"https://answers.unrealengine.com/questions/299013/uclass-error.html\" rel=\"nofollow noreferrer\" title=\"uclass error.html\">answers.unrealengine.com/questions/299013/uclass-error.html</a> looks similar, and <a href=\"https://forums.unrealengine.com/development-discussion/c-gameplay-programming/118541-this-declaration-has-no-storage-class-or-type-specifier\" rel=\"nofollow noreferrer\">forums.unrealengine.com/development-discussion/&hellip;</a>. <a href=\"https://marketplace.visualstudio.com/items?itemName=RxCompiLe.UE4Intellisense\" rel=\"nofollow noreferrer\">marketplace.visualstudio.com/&hellip;</a> appears to be a plugin designed to help."}, {"owner": {"reputation": 137, "user_id": 6067562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ee927e2e46a742f343114200cd3ca55?s=128&d=identicon&r=PG&f=1", "display_name": "alexanders916", "link": "https://stackoverflow.com/users/6067562/alexanders916"}, "edited": false, "score": 0, "creation_date": 1522876725, "post_id": 49660107, "comment_id": 86330773, "body": "Ok I will rewrite my question in a proper way and language, I&#39;m sorry, I&#39;m just angry that this can&#39;t be fixed..."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1522876829, "post_id": 49660107, "comment_id": 86330834, "body": "Also see <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> and <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>.  There&#39;s no reason to mention <code>RotationSpeed</code> in your stackoverflow question."}, {"owner": {"reputation": 137, "user_id": 6067562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ee927e2e46a742f343114200cd3ca55?s=128&d=identicon&r=PG&f=1", "display_name": "alexanders916", "link": "https://stackoverflow.com/users/6067562/alexanders916"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1522876847, "post_id": 49660107, "comment_id": 86330847, "body": "@MooingDuck To your solutions... I already looked them up. The first one is the &quot;recompile another solution&quot; workaround and the other is Visual Assist which costs 100$."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1522881165, "post_id": 49660107, "comment_id": 86332644, "body": "@alexanders916: The question reads MUCH better now, thanks you. Changed my downvote to an upvote."}], "answers": [{"tags": [], "owner": {"reputation": 381, "user_id": 1381252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66042b7b5c5e2dcd1334dfaf9b09ccf9?s=128&d=identicon&r=PG", "display_name": "JonS", "link": "https://stackoverflow.com/users/1381252/jons"}, "is_accepted": false, "score": 0, "last_activity_date": 1523195577, "creation_date": 1523195577, "answer_id": 49718584, "question_id": 49660107, "link": "https://stackoverflow.com/questions/49660107/how-to-code-in-ue4-using-visual-studio-only/49718584#49718584", "title": "How to code in UE4 using Visual Studio only?", "body": "<p>This is normal in my experience. I have followed instructions to set up VS and I still get underlines. Now I just ignore them. </p>\n"}], "owner": {"reputation": 137, "user_id": 6067562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ee927e2e46a742f343114200cd3ca55?s=128&d=identicon&r=PG&f=1", "display_name": "alexanders916", "link": "https://stackoverflow.com/users/6067562/alexanders916"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 887, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523195577, "creation_date": 1522874670, "last_edit_date": 1522894719, "question_id": 49660107, "link": "https://stackoverflow.com/questions/49660107/how-to-code-in-ue4-using-visual-studio-only", "title": "How to code in UE4 using Visual Studio only?", "body": "<p>After some time I had in mind to try Unreal Engine beside Unity (look how to code, how to solve things here with help of C++ and the UE API). A unresolving problem is IntelliSense in Visual Studio without any 3rd party tools like Visual Assist or Resharper C++ (which is the only good supported IDE for UE4). When adding a new <code>#include</code> in the header section, IntelliSense underlines line 10 <code>UCLASS()</code> red, because <code>this declaration has no storage class or type specifier</code>. Take this header file as an example: </p>\n\n<pre><code>#pragma once\n\n#include \"CoreMinimal.h\"\n#include \"Components/StaticMeshComponent.h\" // Broken when adding this line\n#include \"GameFramework/Actor.h\"\n#include \"RotatingActor.generated.h\"\n\nUCLASS()\nclass UE419DEMO_API ARotatingActor : public AActor\n{\n    GENERATED_BODY() // ERROR: \"this declaration has no storage class or type specifier\"\n\npublic: \n    ARotatingActor();\n\nprotected:\n    virtual void BeginPlay() override;\n\npublic: \n    virtual void Tick(float DeltaTime) override;\n\n    UPROPERTY(EditAnywhere)\n    UStaticMeshComponent *StaticMeshComponent; // The include is needed for this line here, because without the header file, IntelliSense doesn't autocomplete methods which belong to this class.\n\n};\n</code></pre>\n\n<p>This file compiles perfectly fine without any build errors on any side of Visual Studio, despite the red underlined <code>UCLASS()</code> and red lines on the <code>.cpp</code> side because <code>class \"UObject\" has no member \"BeginPlay\"</code>. This is disrupting in some way, because this error isn't a real error, rather a error because Visual Studio can't recognize the macro <code>UCLASS()</code>, which previously was on line 9 and now on line 10.</p>\n\n<p>That said I ask me if this behavior is normal. Do I have to pay money (Visual Assist) or keep reopening Visual Studio (which disrupts my coding flow and also steals time) to solve that problem. Does somebody has a solution for this specific problem?</p>\n"}, {"tags": ["c++", "objective-c", "xcode", "cocoa"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1522873940, "post_id": 49659717, "comment_id": 86329347, "body": "Wow. That&#39;s a big fscking struct. Seems like not the best design..."}, {"owner": {"reputation": 4344, "user_id": 1845040, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/EZEso.png?s=128&g=1", "display_name": "Benjamin de Bos", "link": "https://stackoverflow.com/users/1845040/benjamin-de-bos"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1522874013, "post_id": 49659717, "comment_id": 86329379, "body": "Can&#39;t help it mate! It&#39;s for F1 2017 for codemasters. It&#39;s being received from an UDP packet. Which is fine imho :) Any idea how to convert this struct to a dictionary?"}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1522876415, "post_id": 49659717, "comment_id": 86330632, "body": "Does <code>UDPPacket const *packet = reinterpret_cast&lt;UDPPacket const *&gt;(data);</code> not work?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1522877366, "post_id": 49659717, "comment_id": 86331101, "body": "Fun fact: one of the many differences between C and C++ is in C++ one does has no need for the <code>typedef</code>ing  <code>struct</code>s. <code>struct CarUDPData { members };</code> is sufficient to use <code>CarUDPData</code> throughout your code."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1522877466, "post_id": 49659717, "comment_id": 86331141, "body": "Make sure that <code>float m_session_time_left;</code> in <code>UDPPacket</code> doesn&#39;t cause you any padding problems due to 32-bit aligning a <code>float</code> in a sea of bytes."}, {"owner": {"reputation": 17713, "user_id": 1801544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CcSB.jpg?s=128&g=1", "display_name": "Larme", "link": "https://stackoverflow.com/users/1801544/larme"}, "edited": false, "score": 0, "creation_date": 1522910683, "post_id": 49659717, "comment_id": 86341238, "body": "See this: <a href=\"https://stackoverflow.com/questions/5373545/structs-to-nsdata-to-structs\" title=\"structs to nsdata to structs\">stackoverflow.com/questions/5373545/&hellip;</a> For <code>NSData</code> &lt;=&gt; <code>Struct</code>. Then you have to implement yourself an init to a NSObject (NSDictionary or Custom Object representing the struct) yourself and reverse. What you can do quickly is use a custom object, and let it have a property of your struct and that way you may have &quot;methods&quot; on it. (that&#39;s just encapsulating, not the best way if it&#39;s only for that)."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1522888561, "post_id": 49661167, "comment_id": 86334886, "body": "A caveat on <code>#pragma</code> use. A <code>#pragma</code> is a non-standard extension  that compilers are allowed to silently discard if they do not support. You may get a compiler warning, but officially it&#39;s up to the programmer to make sure it&#39;s supported."}, {"owner": {"reputation": 4344, "user_id": 1845040, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/EZEso.png?s=128&g=1", "display_name": "Benjamin de Bos", "link": "https://stackoverflow.com/users/1845040/benjamin-de-bos"}, "edited": false, "score": 0, "creation_date": 1522917283, "post_id": 49661167, "comment_id": 86345255, "body": "this returns me 3 compiler errors: <code>Must use &#39;struct&#39; tag to refer to type &#39;UDPPacket&#39;</code>, <code>Use of undeclared identifier &#39;reinterpret_cast&#39;</code> and <code>Use of undeclared identifier &#39;UDPPacket&#39;</code>."}], "tags": [], "owner": {"reputation": 119, "user_id": 3264950, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hgedi.jpg?s=128&g=1", "display_name": "lucas.exe", "link": "https://stackoverflow.com/users/3264950/lucas-exe"}, "is_accepted": false, "score": 1, "last_activity_date": 1522879621, "creation_date": 1522879621, "answer_id": 49661167, "question_id": 49659717, "link": "https://stackoverflow.com/questions/49659717/receiving-bytes-through-udp-cast-to-struct-then-to-nsdictionary/49661167#49661167", "title": "Receiving bytes through UDP, cast to struct, then to NSDictionary", "body": "<p>Unlike C, C ++ does not allow you to implicitly convert a void * pointer to another type  pointer without using cast explicitly.</p>\n\n<p>As Killzone Kid said, you can do:</p>\n\n<pre><code>UDPPacket const *packet = reinterpret_cast&lt;UDPPacket const *&gt;(data);\n</code></pre>\n\n<p>You also need check if the struct has padding. Normally the compiler add 'spaces' between the variables to keep them alignment (multiple of 4 bytes, typically).</p>\n\n<p>If you wish, you can disable it using:</p>\n\n<pre><code>#pragma pack(push, 1)\nstruct UDPPacket {\n    // ...\n}\n#pragma pack(pop)\n</code></pre>\n"}], "owner": {"reputation": 4344, "user_id": 1845040, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/EZEso.png?s=128&g=1", "display_name": "Benjamin de Bos", "link": "https://stackoverflow.com/users/1845040/benjamin-de-bos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522879621, "creation_date": 1522873149, "last_edit_date": 1522874086, "question_id": 49659717, "link": "https://stackoverflow.com/questions/49659717/receiving-bytes-through-udp-cast-to-struct-then-to-nsdictionary", "title": "Receiving bytes through UDP, cast to struct, then to NSDictionary", "body": "<p>So i'm receiving a bytes into a NSData object which i can read raw with <code>[data bytes]</code> I also have a struct which you can find below.</p>\n\n<p>How can i cast this data with the struct to something more useful? Like an NSDictionary or another object?</p>\n\n<p>What i'm trying:</p>\n\n<pre><code>UDPPacket packet;\npacket = [data bytes];\n</code></pre>\n\n<p>But it returns an error:<code>Assigning to 'UDPPacket' from incompatible type 'const void *'</code></p>\n\n<p>The struct:</p>\n\n<pre><code>typedef struct {\n    float m_worldPosition[3]; // world co-ordinates of vehicle\n    float m_lastLapTime;\n    float m_currentLapTime;\n    float m_bestLapTime;\n    float m_sector1Time;\n    float m_sector2Time;\n    float m_lapDistance;\n    Byte  m_driverId;\n    Byte  m_teamId;\n    Byte  m_carPosition;     // UPDATED: track positions of vehicle\n    Byte  m_currentLapNum;\n    Byte  m_tyreCompound; // compound of tyre \u2013 0 = ultra soft, 1 = super soft, 2 = soft, 3 = medium, 4 = hard, 5 = inter, 6 = wet\n    Byte  m_inPits;           // 0 = none, 1 = pitting, 2 = in pit area\n    Byte  m_sector;           // 0 = sector1, 1 = sector2, 2 = sector3\n    Byte  m_currentLapInvalid; // current lap invalid - 0 = valid, 1 = invalid\n    Byte  m_penalties;  // NEW: accumulated time penalties in seconds to be added\n} CarUDPData;\n\n\ntypedef struct {\n    float m_time;\n    float m_lapTime;\n    float m_lapDistance;\n    float m_totalDistance;\n    float m_x; // World space position\n    float m_y; // World space position\n    float m_z; // World space position\n    float m_speed; // Speed of car in MPH\n    float m_xv; // Velocity in world space\n    float m_yv; // Velocity in world space\n    float m_zv; // Velocity in world space\n    float m_xr; // World space right direction\n    float m_yr; // World space right direction\n    float m_zr; // World space right direction\n    float m_xd; // World space forward direction\n    float m_yd; // World space forward direction\n    float m_zd; // World space forward direction\n    float m_susp_pos[4]; // Note: All wheel arrays have the order:\n    float m_susp_vel[4]; // RL, RR, FL, FR\n    float m_wheel_speed[4];\n    float m_throttle;\n    float m_steer;\n    float m_brake;\n    float m_clutch;\n    float m_gear;\n    float m_gforce_lat;\n    float m_gforce_lon;\n    float m_lap;\n    float m_engineRate;\n    float m_sli_pro_native_support; // SLI Pro support\n    float m_car_position; // car race position\n    float m_kers_level; // kers energy left\n    float m_kers_max_level; // kers maximum energy\n    float m_drs; // 0 = off, 1 = on\n    float m_traction_control; // 0 (off) - 2 (high)\n    float m_anti_lock_brakes; // 0 (off) - 1 (on)\n    float m_fuel_in_tank; // current fuel mass\n    float m_fuel_capacity; // fuel capacity\n    float m_in_pits; // 0 = none, 1 = pitting, 2 = in pit area\n    float m_sector; // 0 = sector1, 1 = sector2, 2 = sector3\n    float m_sector1_time; // time of sector1 (or 0)\n    float m_sector2_time; // time of sector2 (or 0)\n    float m_brakes_temp[4]; // brakes temperature (centigrade)\n    float m_tyres_pressure[4]; // tyres pressure PSI\n    float m_team_info; // team ID\n    float m_total_laps; // total number of laps in this race\n    float m_track_size; // track size meters\n    float m_last_lap_time; // last lap time\n    float m_max_rpm; // cars max RPM, at which point the rev limiter will kick in\n    float m_idle_rpm; // cars idle RPM\n    float m_max_gears; // maximum number of gears\n    float m_sessionType; // 0 = unknown, 1 = practice, 2 = qualifying, 3 = race\n    float m_drsAllowed; // 0 = not allowed, 1 = allowed, -1 = invalid / unknown\n    float m_track_number; // -1 for unknown, 0-21 for tracks\n    float m_vehicleFIAFlags; // -1 = invalid/unknown, 0 = none, 1 = green, 2 = blue, 3 = yellow, 4 = red\n    float m_era;                     // era, 2017 (modern) or 1980 (classic)\n    float m_engine_temperature;   // engine temperature (centigrade)\n    float m_gforce_vert; // vertical g-force component\n    float m_ang_vel_x; // angular velocity x-component\n    float m_ang_vel_y; // angular velocity y-component\n    float m_ang_vel_z; // angular velocity z-component\n    Byte  m_tyres_temperature[4]; // tyres temperature (centigrade)\n    Byte  m_tyres_wear[4]; // tyre wear percentage\n    Byte  m_tyre_compound; // compound of tyre \u2013 0 = ultra soft, 1 = super soft, 2 = soft, 3 = medium, 4 = hard, 5 = inter, 6 = wet\n    Byte  m_front_brake_bias;         // front brake bias (percentage)\n    Byte  m_fuel_mix;                 // fuel mix - 0 = lean, 1 = standard, 2 = rich, 3 = max\n    Byte  m_currentLapInvalid;     // current lap invalid - 0 = valid, 1 = invalid\n    Byte  m_tyres_damage[4]; // tyre damage (percentage)\n    Byte  m_front_left_wing_damage; // front left wing damage (percentage)\n    Byte  m_front_right_wing_damage; // front right wing damage (percentage)\n    Byte  m_rear_wing_damage; // rear wing damage (percentage)\n    Byte  m_engine_damage; // engine damage (percentage)\n    Byte  m_gear_box_damage; // gear box damage (percentage)\n    Byte  m_exhaust_damage; // exhaust damage (percentage)\n    Byte  m_pit_limiter_status; // pit limiter status \u2013 0 = off, 1 = on\n    Byte  m_pit_speed_limit; // pit speed limit in mph\n    float m_session_time_left;  // NEW: time left in session in seconds\n    Byte  m_rev_lights_percent;  // NEW: rev lights indicator (percentage)\n    Byte  m_is_spectating;  // NEW: whether the player is spectating\n    Byte  m_spectator_car_index;  // NEW: index of the car being spectated\n\n    // Car data\n    Byte  m_num_cars;               // number of cars in data\n    Byte  m_player_car_index;         // index of player's car in the array\n    CarUDPData  m_car_data[20];   // data for all cars on track\n    float m_yaw;  // NEW (v1.8)\n    float m_pitch;  // NEW (v1.8)\n    float m_roll;  // NEW (v1.8)\n    float m_x_local_velocity;          // NEW (v1.8) Velocity in local space\n    float m_y_local_velocity;          // NEW (v1.8) Velocity in local space\n    float m_z_local_velocity;          // NEW (v1.8) Velocity in local space\n    float m_susp_acceleration[4];   // NEW (v1.8) RL, RR, FL, FR\n    float m_ang_acc_x;                 // NEW (v1.8) angular acceleration x-component\n    float m_ang_acc_y;                 // NEW (v1.8) angular acceleration y-component\n    float m_ang_acc_z;                 // NEW (v1.8) angular acceleration z-component\n} UDPPacket;\n</code></pre>\n"}, {"tags": ["c++", "qt", "qstatemachine"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1522875631, "post_id": 49659678, "comment_id": 86330239, "body": "Why do not you do a loop?"}, {"owner": {"reputation": 7090, "user_id": 446188, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/adcad5cd5e8b2a6b8a1eb83f7f91bc78?s=128&d=identicon&r=PG", "display_name": "ezpresso", "link": "https://stackoverflow.com/users/446188/ezpresso"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1522877956, "post_id": 49659678, "comment_id": 86331382, "body": "@eyllanesc, What kind of loop you are talking about?"}], "owner": {"reputation": 7090, "user_id": 446188, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/adcad5cd5e8b2a6b8a1eb83f7f91bc78?s=128&d=identicon&r=PG", "display_name": "ezpresso", "link": "https://stackoverflow.com/users/446188/ezpresso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1522872950, "creation_date": 1522872950, "question_id": 49659678, "link": "https://stackoverflow.com/questions/49659678/qstatemachine-transitions-between-all-the-states", "title": "QStateMachine: transitions between all the states", "body": "<p>I am developing a vector drawing application. I have a QStateMachine with 4 QStates: DefaultState, SelectionState, LineDrawingState, PolygonDrawingState. When the user clicks the appropriate tool button, the corresponding transition is triggered and the state is entered. The user is able to switch between any of 4 tools (and underlying states).</p>\n\n<p>Here is the problem. I have to instantiate 3 transition objects for every single state so the state machine is able to switch from the current state to any other state. I mean I have to:</p>\n\n<pre><code>defaultState-&gt;addTransition(new SwitchModeTransition(GPM_SelectObject, selectionState) );\ndefaultState-&gt;addTransition(new SwitchModeTransition(GPM_DrawLine, lineDrawingState) );\ndefaultState-&gt;addTransition(new SwitchModeTransition(GPM_DrawPolygon, polygonDrawingState) );\n...\nselectionState-&gt;addTransition(new SwitchModeTransition(GPM_Default, defaultState) );\nselectionState-&gt;addTransition(new SwitchModeTransition(GPM_DrawLine, lineDrawingState) );\nselectionState-&gt;addTransition(new SwitchModeTransition(GPM_DrawPolygon, polygonDrawingState) );\n... // and so on for every single state\n</code></pre>\n\n<p>This seems to be very redundant. Is there any more simple way to make QStateMachine to switch between all 4 states when the corresponding transition is triggered?</p>\n"}, {"tags": ["c++", "stl", "c++14", "variadic-templates", "sfinae"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1522872744, "post_id": 49659590, "comment_id": 86328746, "body": "That&#39;s an unnamed template parameter with a default argument. It&#39;s just there to make sure the <a href=\"http://en.cppreference.com/w/cpp/types/enable_if\" rel=\"nofollow noreferrer\"><code>enable_if_t</code></a> resolves to a type."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1522872791, "post_id": 49659590, "comment_id": 86328770, "body": "A good read: <a href=\"http://en.cppreference.com/w/cpp/types/enable_if\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/types/enable_if</a>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 4, "creation_date": 1522874981, "post_id": 49659590, "comment_id": 86329901, "body": "I would certainly not recommend you read STL files."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 6241890, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G0hOE.jpg?s=128&g=1", "display_name": "Cody W", "link": "https://stackoverflow.com/users/6241890/cody-w"}, "edited": false, "score": 0, "creation_date": 1522884005, "post_id": 49659987, "comment_id": 86333611, "body": "Thank you so much. That is what I thought it was doing but I couldn&#39;t really find anything to support that idea. The SFINAE is exactly the kind of thing I am looking to learn more about."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 6, "last_activity_date": 1522890839, "last_edit_date": 1522890839, "creation_date": 1522874177, "answer_id": 49659987, "question_id": 49659590, "link": "https://stackoverflow.com/questions/49659590/what-does-templateclass-enable-if-t-do/49659987#49659987", "title": "What does template&lt;class = enable_if_t&lt;...&gt;&gt; do?", "body": "<p>Look for S.F.I.N.A.E.: \"Substitution Failure Is Not An Error\".</p>\n\n<p>See a possible implementation of <code>std::enable_if</code> (<code>std::enable_if_t</code> is only a helper <code>using</code>, C++14 introduced, to access the <code>type</code> in a simpler way) </p>\n\n<pre><code>template&lt;bool B, class T = void&gt;\nstruct enable_if {};\n\ntemplate&lt;class T&gt;\nstruct enable_if&lt;true, T&gt; { typedef T type; };\n</code></pre>\n\n<p>Is made so <em>iff</em> (if and only if) the template boolean value (the first template parameter) is <code>true</code>, <code>std::enable_if&lt;...&gt;::type</code> is defined (with the type in the second template parameter; <code>void</code> if unexpressed).</p>\n\n<p>To make it simple, you have that, in your example</p>\n\n<pre><code>template&lt;class _Fn,\n    class... _Args,\n    class = enable_if_t&lt;!is_same&lt;decay_t&lt;_Fn&gt;, thread&gt;::value&gt;&gt;\n    explicit thread(_Fn&amp;&amp; _Fx, _Args&amp;&amp;... _Ax)\n    {   // construct with _Fx(_Ax...)\n    ...\n    }\n</code></pre>\n\n<p><code>enable_if_t</code> (that is <code>typename std::enable_if&lt;...&gt;::type)</code> is available iff the first value (<code>!std::is_same&lt;typename std::decay&lt;_Fn&gt;::type, thread&gt;::value</code>) is <code>true</code>.</p>\n\n<p>That is: </p>\n\n<ul>\n<li><p>if <code>!std::is_same&lt;typename std::decay&lt;_Fn&gt;::type, thread&gt;::value</code> is <code>true</code>, the substitution <code>class = enable_if_t&lt;!is_same&lt;decay_t&lt;_Fn&gt;, thread&gt;::value&gt;&gt;</code> is performed and the function is implemented</p></li>\n<li><p>if <code>!std::is_same&lt;typename std::decay&lt;_Fn&gt;::type, thread&gt;::value</code> is <code>false</code>, the substitution <code>class = enable_if_t&lt;!is_same&lt;decay_t&lt;_Fn&gt;, thread&gt;::value&gt;&gt;</code> fail, the function isn't implemented <em>but</em> this ins't an error (SFINAE).</p></li>\n</ul>\n\n<p>Why the language permit this?</p>\n\n<p>Because, by example, you can implement two version of the function</p>\n\n<pre><code>template&lt;class _Fn,\n    class... _Args, //  vvvv true case\n    class = enable_if_t&lt;true == is_same&lt;decay_t&lt;_Fn&gt;, thread&gt;::value&gt;&gt;\n    explicit thread(_Fn&amp;&amp; _Fx, _Args&amp;&amp;... _Ax)\n    { /* do something */ }\n\ntemplate&lt;class _Fn,\n    class... _Args, //  vvvvv false case\n    class = enable_if_t&lt;false == is_same&lt;decay_t&lt;_Fn&gt;, thread&gt;::value&gt;&gt;\n    explicit thread(_Fn&amp;&amp; _Fx, _Args&amp;&amp;... _Ax)\n    { /* do something else */ }\n</code></pre>\n\n<p>Suggestion: search for SFINAE and study it because is an important part of modern C++.</p>\n"}], "owner": {"reputation": 93, "user_id": 6241890, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G0hOE.jpg?s=128&g=1", "display_name": "Cody W", "link": "https://stackoverflow.com/users/6241890/cody-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2016, "favorite_count": 1, "accepted_answer_id": 49659987, "answer_count": 1, "score": 7, "last_activity_date": 1540692132, "creation_date": 1522872616, "last_edit_date": 1540692132, "question_id": 49659590, "link": "https://stackoverflow.com/questions/49659590/what-does-templateclass-enable-if-t-do", "title": "What does template&lt;class = enable_if_t&lt;...&gt;&gt; do?", "body": "<p>I have been reading STL files to learn better ways to format my code, and to learn tricks to be more efficient. I have been reading the thread files and I can't figure out what some of the code does.</p>\n\n<pre><code>template&lt;class _Fn,\n    class... _Args,\n    class = enable_if_t&lt;!is_same&lt;decay_t&lt;_Fn&gt;, thread&gt;::value&gt;&gt;\n    explicit thread(_Fn&amp;&amp; _Fx, _Args&amp;&amp;... _Ax)\n    {   // construct with _Fx(_Ax...)\n    ...\n    }\n</code></pre>\n\n<p><code>std::enable_if_t</code> is </p>\n\n<pre><code>template&lt;bool _Test,\n    class _Ty = void&gt;\n    using enable_if_t = typename enable_if&lt;_Test, _Ty&gt;::type;\n\ntemplate&lt;class _Ty&gt;\n    struct enable_if&lt;true, _Ty&gt;\n    {   // type is _Ty for _Test\n    using type = _Ty;\n    };\n</code></pre>\n\n<p>that code is all copyrighted in the thread and str1common STLs.</p>\n\n<p>my only question is what does the <code>class = enable_if_t&lt;...></code> do?</p>\n"}, {"tags": ["c++", "eclipse", "eclipse-cdt", "centos7"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1522872368, "post_id": 49659482, "comment_id": 86328540, "body": "See if this helps: <a href=\"https://stackoverflow.com/q/9131763/10077\">Eclipse CDT C++11/C++0x support</a>"}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 1, "creation_date": 1522872597, "post_id": 49659482, "comment_id": 86328659, "body": "I think you imported the project wrong. Check the .project or .cproject files in the project folder. Compare the files from both VMs"}, {"owner": {"reputation": 1556, "user_id": 611716, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/f4i2e.jpg?s=128&g=1", "display_name": "Frecklefoot", "link": "https://stackoverflow.com/users/611716/frecklefoot"}, "edited": false, "score": 0, "creation_date": 1522873818, "post_id": 49659482, "comment_id": 86329278, "body": "Thanks, Thomas. We imported the exact same files into both Eclipse installs."}, {"owner": {"reputation": 1556, "user_id": 611716, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/f4i2e.jpg?s=128&g=1", "display_name": "Frecklefoot", "link": "https://stackoverflow.com/users/611716/frecklefoot"}, "edited": false, "score": 0, "creation_date": 1522874469, "post_id": 49659482, "comment_id": 86329602, "body": "Thanks, Fred. A lot of the recommendations require the C/C++ Build pages, which we also don&#39;t have. The other page requires changes to the &quot;Properties-&gt;C/C++ Build-&gt;Settings-&gt;Tool Settings-&gt;GCC C++ Compiler-&gt;Miscellaneous-&gt;Other Flags&quot; page, which is also missing for us."}, {"owner": {"reputation": 44207, "user_id": 141719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5026f7977fda423dc990cc74b2ad4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "HighCommander4", "link": "https://stackoverflow.com/users/141719/highcommander4"}, "edited": false, "score": 0, "creation_date": 1522891677, "post_id": 49659482, "comment_id": 86335578, "body": "Have you tried the suggestion from the question Fred linked, to modify the &quot;Command to get compiler specs&quot; (first part of <a href=\"https://stackoverflow.com/a/24561615\">this answer</a>)? This is the most reliable method in my experience."}, {"owner": {"reputation": 1556, "user_id": 611716, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/f4i2e.jpg?s=128&g=1", "display_name": "Frecklefoot", "link": "https://stackoverflow.com/users/611716/frecklefoot"}, "reply_to_user": {"reputation": 44207, "user_id": 141719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5026f7977fda423dc990cc74b2ad4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "HighCommander4", "link": "https://stackoverflow.com/users/141719/highcommander4"}, "edited": false, "score": 0, "creation_date": 1522941837, "post_id": 49659482, "comment_id": 86363217, "body": "Thank you, @HighCommander4. I did follow those steps, and had high hopes for them. However, the &quot;Properties -&gt; C/C++ General -&gt; Preprocessor Include Paths, Marcos etc.&quot; submenu doesn&#39;t show when we import it into Eclipse. That menu is needed for the step that says &quot;This is important&quot;. I think importing it in a manner where Eclipse actually thinks it&#39;s a C++ project is key here."}, {"owner": {"reputation": 1556, "user_id": 611716, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/f4i2e.jpg?s=128&g=1", "display_name": "Frecklefoot", "link": "https://stackoverflow.com/users/611716/frecklefoot"}, "edited": false, "score": 0, "creation_date": 1522960324, "post_id": 49659482, "comment_id": 86373856, "body": "I added images to my original question for clarification."}, {"owner": {"reputation": 44207, "user_id": 141719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5026f7977fda423dc990cc74b2ad4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "HighCommander4", "link": "https://stackoverflow.com/users/141719/highcommander4"}, "edited": false, "score": 0, "creation_date": 1523640620, "post_id": 49659482, "comment_id": 86660118, "body": "I may have an idea as to what&#39;s going on. When creating the project, instead of doing &quot;File -&gt; New -&gt; C/C++ Project&quot;, can you try doing &quot;File -&gt; New -&gt; Other -&gt; C/C++ -&gt; C++ Project&quot; (note: <i>not</i> &quot;C/C++ Project&quot;)? The resulting project should have the missing preference page."}, {"owner": {"reputation": 1556, "user_id": 611716, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/f4i2e.jpg?s=128&g=1", "display_name": "Frecklefoot", "link": "https://stackoverflow.com/users/611716/frecklefoot"}, "edited": false, "score": 0, "creation_date": 1523663481, "post_id": 49659482, "comment_id": 86668641, "body": "We imported the existing project from a directory, we didn&#39;t create a new project. All we can figure is that there&#39;s a bug in the current version of Eclipse. We just downloaded an older version of Eclipse Oxygen, and it imports the project perfectly. It feels like taking a step backwards, but it&#39;s the only thing we could get to work."}], "answers": [{"tags": [], "owner": {"reputation": 1556, "user_id": 611716, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/f4i2e.jpg?s=128&g=1", "display_name": "Frecklefoot", "link": "https://stackoverflow.com/users/611716/frecklefoot"}, "is_accepted": true, "score": 0, "last_activity_date": 1524059061, "creation_date": 1524059061, "answer_id": 49901341, "question_id": 49659482, "link": "https://stackoverflow.com/questions/49659482/eclipse-cdt-missing-features/49901341#49901341", "title": "Eclipse CDT missing features", "body": "<p>I can't really be proud of our solution to this problem. The version of Eclipse that works is Oxygen.1a Release (<strong>4.7.1a</strong>). The \"latest and greatest\" release of Eclipse (at the time) was Oxygen.2 Release (<strong>4.7.2</strong>). We downloaded and installed 4.7.1a and it worked. There must be a defect in 4.7.2 that prevents it from correctly recognizing C++ 11 code.</p>\n\n<p>Oxygen.1a 4.7.1a imports the project perfectly and shows up all the options we need to make changes and get the application to compile and run correctly.</p>\n"}], "owner": {"reputation": 1556, "user_id": 611716, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/f4i2e.jpg?s=128&g=1", "display_name": "Frecklefoot", "link": "https://stackoverflow.com/users/611716/frecklefoot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 666, "favorite_count": 0, "accepted_answer_id": 49901341, "answer_count": 1, "score": 0, "last_activity_date": 1524635863, "creation_date": 1522872207, "last_edit_date": 1522943561, "question_id": 49659482, "link": "https://stackoverflow.com/questions/49659482/eclipse-cdt-missing-features", "title": "Eclipse CDT missing features", "body": "<p>We have a C++ project we want to enhance using <strong>Eclipse</strong> on <strong>Linux</strong> (CentOS 7). We have one Linux VM with Eclipse and <strong>CDT</strong> (a C++ plug-in) installed. Using <strong>CMake</strong>, we generated make files for the project and brought it up in Eclipse (File \u2192 Import \u2192 General \u2192 Existing Projects into Workspace). From there we need to do some fixes to make it compile C++ 11 code. We do this via the \"Properties \u2192 C/C++ General \u2192 Preprocessor Include Paths, Macros etc.\" page. It all builds and works fine.</p>\n\n<p>We created new Linux VMs with the same version of Linux. We installed Eclipse (Oxygen) and installed the CDT plug-in. We followed all the same steps as above, except in these new VMs, there is no \"C/C++ General \u2192 Preprocessor Include Paths, Macros etc.\" option in the Properties dialog. We can get the code to compile as C++ 11, but the IDE itself doesn't recognize C++ 11 and marks most of the code as errors. If we had the \"Preprocessor Include Paths, Macros etc.\" page, we could makes the necessary changes, but for the life of us, we can't figure out why it doesn't show up in the new VMs. Both Eclipse installs have the same plug-ins (one, namely, CDT).</p>\n\n<p>Is there something we're missing? Is there another way to access the options that the missing page allows?</p>\n\n<p><strong>UPDATE</strong>\nPerhaps some visual will help. Here is what the Properties page looks like when opened on the original Linux VM:</p>\n\n<p><a href=\"https://i.stack.imgur.com/A4Ayo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A4Ayo.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is what the Properties page looks like when opened in the new VMs:\n<a href=\"https://i.stack.imgur.com/lipgd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lipgd.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see, in the second image, there is no \"Preprocessor Include Paths, Macros, etc.\" option underneath \"C/C++ General\". That is the problem. Without that page, we can't do several things to the project we need to to get it to operate correctly.</p>\n"}, {"tags": ["c++", "linux"], "answers": [{"tags": [], "owner": {"reputation": 469, "user_id": 7870866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91bc2e98d69ec4a62c590965bb2c3359?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Vasant", "link": "https://stackoverflow.com/users/7870866/jay-vasant"}, "is_accepted": false, "score": 0, "last_activity_date": 1522872269, "creation_date": 1522872269, "answer_id": 49659500, "question_id": 49659412, "link": "https://stackoverflow.com/questions/49659412/c-print-slowly-but-skip-when-user-presses-enter-or-anything-shouldnt-wait-th/49659500#49659500", "title": "C++ Print slowly but skip when user presses enter or anything. Shouldn&#39;t wait though", "body": "<p>1) Copy the String in a new variable(until it got printed).</p>\n\n<p>2) Use a do-while loop until user presses enter.</p>\n\n<p>3) Find out the remaining string and print after ending the do-while loop.</p>\n\n<p>Hope it helps :)</p>\n"}, {"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1522875789, "post_id": 49659688, "comment_id": 86330325, "body": "I recommend <a href=\"http://man7.org/linux/man-pages/man2/poll.2.html\" rel=\"nofollow noreferrer\">poll(2)</a> instead of the limited and almost obsolete <code>select</code>"}, {"owner": {"reputation": 3, "user_id": 9598855, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Arminaz Bakh", "link": "https://stackoverflow.com/users/9598855/arminaz-bakh"}, "edited": false, "score": 0, "creation_date": 1522989490, "post_id": 49659688, "comment_id": 86382046, "body": "Is it possible with something that is in the standard library and not exclusively for Linux? Unfortunately, the project is passed around through the different Operating system, and I can not rely on something only on Window or only on Linux."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 3, "user_id": 9598855, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Arminaz Bakh", "link": "https://stackoverflow.com/users/9598855/arminaz-bakh"}, "edited": false, "score": 0, "creation_date": 1523004555, "post_id": 49659688, "comment_id": 86389116, "body": "@ArminazBakh look into boost asio select. I haven&#39;t worked with it, but at a first glance it looks like it&#39;s a bit more complicated. I could be wrong."}], "tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": true, "score": 0, "last_activity_date": 1522879292, "last_edit_date": 1522879292, "creation_date": 1522873033, "answer_id": 49659688, "question_id": 49659412, "link": "https://stackoverflow.com/questions/49659412/c-print-slowly-but-skip-when-user-presses-enter-or-anything-shouldnt-wait-th/49659688#49659688", "title": "C++ Print slowly but skip when user presses enter or anything. Shouldn&#39;t wait though", "body": "<p>Edit: select is obsolete. Use <a href=\"http://man7.org/linux/man-pages/man2/poll.2.html\" rel=\"nofollow noreferrer\">pool</a> instead</p>\n\n<hr>\n\n<p>What you want is to wait for a specific amount of time or until you have something on stdin.</p>\n\n<p>Since you are on linux this can be achieved with <a href=\"http://man7.org/linux/man-pages/man2/select.2.html\" rel=\"nofollow noreferrer\">select</a>. </p>\n\n<blockquote>\n<pre><code>int select(int nfds, fd_set *readfds, fd_set *writefds,\n                     fd_set *exceptfds, struct timeval *timeout);\n</code></pre>\n  \n  <p>select() and pselect() allow a program to monitor multiple file\n         descriptors, waiting until one or more of the file descriptors become\n         \"ready\" for some class of I/O operation</p>\n</blockquote>\n\n<p>You don't need multiple file selectors. Just stdin. And set the timeout to 1 millisecond.</p>\n\n<p>Since I don't have a linux handy here is some untested code adapted from the linked page example and your example:</p>\n\n<pre><code>fd_set rfds;\nstruct timeval tv;\nint retval;\n\n/* Watch stdin to see when it has input. */\n\nFD_ZERO(&amp;rfds);\nFD_SET(STDIN_FILENO, &amp;rfds);\n\n/* Wait 1 millisecond. */\n\ntv.tv_sec = 0;\ntv.tv_usec = 1000;\n\nint position = 0;\n\nfor (int position = 0; position &lt; s.length(); ++position)\n{\n    retval = select(1, &amp;rfds, nullptr, nullptr, &amp;tv);\n\n    if (retval == -1)\n    {\n       perror(\"select()\");\n       // exit or throw or deal with error\n    }\n    else if (retval)\n    {\n       // Data available on cin (user pressed enter)\n\n       std::string subString = s.substr(position);\n       std::cout &lt;&lt; subString &lt;&lt; std::endl;\n       break;\n    }\n    else\n    {\n       // No data on cin, continue printing\n       std::cout &lt;&lt; s[position] &lt;&lt; std::flush;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9598855, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Arminaz Bakh", "link": "https://stackoverflow.com/users/9598855/arminaz-bakh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 49659688, "answer_count": 2, "score": 0, "last_activity_date": 1522879292, "creation_date": 1522871905, "last_edit_date": 1522872862, "question_id": 49659412, "link": "https://stackoverflow.com/questions/49659412/c-print-slowly-but-skip-when-user-presses-enter-or-anything-shouldnt-wait-th", "title": "C++ Print slowly but skip when user presses enter or anything. Shouldn&#39;t wait though", "body": "<p>I have a C++ function here:</p>\n\n<pre><code>void printTextSlowly(string &amp;s, int speed)\n{\n    int position = 0;\n    for(char c: s)\n    {\n        position++;\n        std::this_thread::sleep_for(std::chrono::milliseconds(speed));\n        std::cout &lt;&lt; c &lt;&lt; std::flush;\n\n        // Should run until user presses enter.\n        //if(cin.ignore())\n        //{\n        //    std::string subString = s.substr(position);\n        //    std::cout &lt;&lt; subString &lt;&lt; std::endl;\n        //    break;\n        //}\n    }\n}\n</code></pre>\n\n<p>So basically this will slow the text down which it does but when user presses enter, it should stop and print out the rest of the text. With cin.ignore() it waits for the user to do something. I don't want it to wait.</p>\n\n<p>Help is greatly appreciated.</p>\n"}, {"tags": ["c++", "polymorphism", "overloading"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1522871681, "post_id": 49659207, "comment_id": 86328111, "body": "The ability to override a method in a subclass is one of the basic ideas of OO programming. The base class provides a default method, but subclasses can override it if they need to specialize in some way."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1522871748, "post_id": 49659207, "comment_id": 86328153, "body": "Yes, it&#39;s bad practice. A more reasonable design would be to avoid inheritance completely. In fact, I don&#39;t think you need your classes at all. Just use <code>std::set</code> and turn <code>disjoint</code> into a non-member function operating on iterators or on two <code>std::set</code>s (whatever is appropriate for your problem)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 4, "creation_date": 1522871832, "post_id": 49659207, "comment_id": 86328207, "body": "@Barmar and others. He&#39;s asking about overloading, not overriding."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9478968"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1522872296, "post_id": 49659207, "comment_id": 86328503, "body": "@ChristianHackl This is just a simple example. What if I have more complicated classes that are not implemented in the standard library?"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1522872298, "post_id": 49659207, "comment_id": 86328505, "body": "@Barmar: Double dispatch is not naturally supported by C++, yet this is what you effectively need when a <code>virtual</code> member function has a parameter of its own base-class type. As a result, you have to manually check the dynamic type of the parameter with <code>typeid</code> / <code>dynamic_cast</code> in every overriding function, because every combination of ConcreteClassX and ConcreteClassY may need specialised behaviour. I don&#39;t think this can ever lead to a really clean design."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9478968"}, "reply_to_user": {"reputation": 704, "user_id": 7595618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51cf59e6785bbd9f82f28e8cfc0f2935?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Borkland", "link": "https://stackoverflow.com/users/7595618/mike-borkland"}, "edited": false, "score": 0, "creation_date": 1522872416, "post_id": 49659207, "comment_id": 86328564, "body": "@MikeBorkland I do mean overload and not override. In fact, name hiding would still occur if  <code>MySet::disjoint</code> were made virtual."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1522872448, "post_id": 49659207, "comment_id": 86328579, "body": "@ConfusedByCode: The standard library is designed to be extensible with your own containers, your own algorithms and your own iterators. So the answer to your question is: just write your own container class and make its interface compatible (providing <code>begin()</code> / <code>end()</code> and so on)."}], "answers": [{"tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1522873060, "creation_date": 1522873060, "answer_id": 49659701, "question_id": 49659207, "link": "https://stackoverflow.com/questions/49659207/is-overloading-a-base-class-function-bad-practice/49659701#49659701", "title": "Is overloading a base class function bad practice?", "body": "<p>The reason name hiding was introduced was to handle the case where we have:</p>\n\n<pre><code>class Base {\n    // stuff\n};\n\nclass Derived : public Base {\n    // more stuff\npublic:\n    static int foo(int);\n};\n</code></pre>\n\n<p>and there is a call to <code>Derived::foo()</code> with a literal <code>'a'</code> as argument.  Then the developer of <code>Base</code> adds a new private function <code>Base::foo(char)</code>.  Without name hiding, the program suddenly stops compiling - the call to <code>Derived::foo</code> resolves to the private member in <code>Base</code>.  Name hiding prevents this.  </p>\n\n<p>The above is not a problem in your example (because <code>using</code> means that you already knew about <code>foo</code>/<code>disjoint</code>), so overloading a base class member function is not intrinsically bad.  </p>\n\n<p>However, your motivating example is not very motivating - a <code>SortedRange</code> doesn't feel like it isA <code>MySet</code>.  I doubt inheritance is the right approach.  (And unless a <code>SortedRange</code> is supposed to represent <em>all</em> integers between two limits, your <code>disjoint</code> implementation is incorrect - it will return <code>[1, 3, 5]</code> as not disjoint with <code>[2, 4, 6]</code>)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9478968"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 49659701, "answer_count": 1, "score": 1, "last_activity_date": 1522873239, "creation_date": 1522871095, "last_edit_date": 1522873239, "question_id": 49659207, "link": "https://stackoverflow.com/questions/49659207/is-overloading-a-base-class-function-bad-practice", "title": "Is overloading a base class function bad practice?", "body": "<p>Suppose I have a base class <code>MySet</code>:</p>\n\n<pre><code>class MySet {\n    std::vector&lt;int&gt; set;\npublic:\n    bool disjoint(const MySet &amp;other) const {\n        // loop over entire set and see if any elements\n        //    are in other.set\n    }\n};\n</code></pre>\n\n<p>And I have a derived class <code>SortedRange</code>:</p>\n\n<pre><code>class SortedRange : public MySet {\n    // All integers between two limits\npublic:\n    using MySet::disjoint;\n    bool disjoint(const SortedRange &amp;other) const {\n         return set.first() &gt; other.set.last()\n                 || other.set.first() &gt; set.last();\n    }\n};\n</code></pre>\n\n<p>The <code>disjoint</code> method in <code>MySet</code> will work for every class that derives from <code>MySet</code>, but when finding the disjointness between two <code>SortedRanges</code> it makes sense to overload the <code>disjoint</code> method in the derived class:</p>\n\n<pre><code>int main() {\n    MySet* base = new Set();\n    SortedRange* derived = new SortedRange();\n\n    derived-&gt;disjoint(*derived); // Can use optimized disjoint function\n    derived-&gt;disjoint(*base); // Should fall back on base disjoint function\n}\n</code></pre>\n\n<p>I've read that <a href=\"http://www.programmerinterview.com/index.php/c-cplusplus/c-name-hiding/\" rel=\"nofollow noreferrer\">name hiding</a> was added in for good reason, and that subverting it in this way is bad practice.</p>\n\n<p>Is there a better way to implement something like this without subverting name hiding?</p>\n"}, {"tags": ["c++", "windows", "getline", "eof", "clion"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1522870315, "post_id": 49658995, "comment_id": 86327315, "body": "It&#39;s impossible to tell without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 11, "user_id": 1540089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86abf6a785e3534e42c4a83e226f25f8?s=128&d=identicon&r=PG", "display_name": "Ron Zeitouny", "link": "https://stackoverflow.com/users/1540089/ron-zeitouny"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1522870566, "post_id": 49658995, "comment_id": 86327464, "body": "I improved my example, it still happens, even in this minimal code!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1522871067, "post_id": 49658995, "comment_id": 86327731, "body": "Your &quot;minimal code&quot; will not compile."}, {"owner": {"reputation": 5867, "user_id": 9125195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75fc90d1f6de6ff28c739b85bdb82f4c?s=128&d=identicon&r=PG&f=1", "display_name": "Sid S", "link": "https://stackoverflow.com/users/9125195/sid-s"}, "edited": false, "score": 0, "creation_date": 1522871101, "post_id": 49658995, "comment_id": 86327745, "body": "Ctrl-Z is eof on Windows.  The code you posted works fine for me, compiled with VS2015."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1522871220, "post_id": 49658995, "comment_id": 86327820, "body": "Could your antivirus be causing this? I know that have been many reports of aVast preventing c++ code from working when the sandbox mode was enabled."}], "owner": {"reputation": 11, "user_id": 1540089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86abf6a785e3534e42c4a83e226f25f8?s=128&d=identicon&r=PG", "display_name": "Ron Zeitouny", "link": "https://stackoverflow.com/users/1540089/ron-zeitouny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1522870537, "creation_date": 1522870223, "last_edit_date": 1522870537, "question_id": 49658995, "link": "https://stackoverflow.com/questions/49658995/clion-getline-crashes-on-eof-when-not-in-debug-mode", "title": "CLion - getline crashes on EOF when not in debug mode", "body": "<p>My program attempts to read from stdin line-by-line until it receives ctrl+d:</p>\n\n<pre><code>int main(int argc, char ** argv) {\n    std::string inputLine;\n\n    // Read from stdin, until you get Ctrl+D\n    while(std::getline(std::cin, inputLine)) {\n       //Do some work...\n\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Now, everything works, until the user sends ctrl+D.\nWhen the user enters ctrl+d, the program crashes: I get the Windows error that my process has crashed, and CLion gives me this error message:</p>\n\n<blockquote>\n  <p>Process finished with exit code -1073741819 (0xC0000005)</p>\n</blockquote>\n\n<p>When I run my code in debug mode this doesn't happen! It only happens when I run using CLion's Run button.</p>\n\n<p>I guess I should also note that CLion is configured to send EOF on ctrl+D, even though I am on Windows.</p>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1522870611, "post_id": 49658983, "comment_id": 86327492, "body": "Don&#39;t use <code>malloc</code> in C++. For strings use <code>std::string</code>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1522870650, "post_id": 49658983, "comment_id": 86327511, "body": "Also, <code>TEXT.open(..., ios::in);</code> followed by <code>TEXT.open(..., ios::out | ios::app);</code>?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1522871986, "post_id": 49658983, "comment_id": 86328305, "body": "Why is this tagged as C++? It looks like C (except for the <code>cin</code> usage). Also; could you post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> rather than a code snippet?"}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1522888954, "post_id": 49658983, "comment_id": 86334992, "body": "Would recommend getting a <a href=\"https://stackoverflow.com/q/388242/9254539\">good book</a> instead of whatever you&#39;re learning &quot;C++&quot; from currently."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1522872900, "creation_date": 1522872900, "answer_id": 49659669, "question_id": 49658983, "link": "https://stackoverflow.com/questions/49658983/add-another-file-to-the-end-of-the-current-file-by-using-functions-in-c/49659669#49659669", "title": "add another file to the end of the current file by using functions in c++", "body": "<p>I see a number of problems with this code:</p>\n\n<ul>\n<li><p>allocating <code>character</code> using <code>malloc()</code> instead of <code>new[]</code>, and then not reading anything into <code>character</code> before writing it to file, and not deallocating <code>character</code>.</p></li>\n<li><p>opening <code>TEXT</code> with <code>ios::in</code>, not reading anything from it, and then reopening it with <code>ios::out | ios::app</code> without <code>close()</code>'ing it first.</p></li>\n<li><p>reading user input into the memory that <code>Name</code> points to, which may or may not be large enough to hold the user input, or may be pointing at read-only memory, etc.</p></li>\n</ul>\n\n<p>It is really difficult to figure out what your code is <em>trying</em> to do.  But I <em>think</em> you might try something more like this instead:</p>\n\n<pre><code>void copyFile(fstream &amp;TEXT, char *Name) {\n    TEXT.close();\n    TEXT.open(Name, ios::in);\n    ostringstream ss;\n    ss &lt;&lt; TEXT.rdbuf();\n    TEXT.close();\n    cout &lt;&lt; \"Enter File Name: \";\n    string otherName;\n    getline(cin, otherName);\n    TEXT.open(otherName.c_str(), ios::out | ios::app);\n    TEXT &lt;&lt; \" \" &lt;&lt; ss.str();\n    cout &lt;&lt; \"Done copying..\\n\";\n}\n</code></pre>\n\n<p>Or, maybe you want something more like this:</p>\n\n<pre><code>void copyFile(fstream &amp;TEXT, char *Name){\n    ifstream ifs(Name);\n    cout &lt;&lt; \"Enter File Name: \";\n    string otherName;\n    getline(cin, otherName);\n    TEXT.close();\n    TEXT.open(otherName.c_str(), ios::out | ios::app);\n    TEXT &lt;&lt; \" \" &lt;&lt; ifs.rdbuf();\n    cout &lt;&lt; \"Done copying..\\n\";\n}\n</code></pre>\n\n<p>Or, maybe simply this:</p>\n\n<pre><code>void copyFile(fstream &amp;TEXT, char *Name) {\n    ifstream ifs(Name);\n    TEXT &lt;&lt; \" \" &lt;&lt; ifs.rdbuf();\n    cout &lt;&lt; \"Done copying..\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9568988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f9ef75ae19a117897de696d52ef38b?s=128&d=identicon&r=PG&f=1", "display_name": "RadwaAhmed", "link": "https://stackoverflow.com/users/9568988/radwaahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1522872900, "creation_date": 1522870197, "last_edit_date": 1522871684, "question_id": 49658983, "link": "https://stackoverflow.com/questions/49658983/add-another-file-to-the-end-of-the-current-file-by-using-functions-in-c", "title": "add another file to the end of the current file by using functions in c++", "body": "<p>I want to copy the content of another file to the end of the current file I am using.  The code runs, but nothing happens in the file.  This is part of the code:</p>\n\n<pre><code>void copyFile(fstream &amp;TEXT, char *Name){\n    TEXT.close();\n    TEXT.open(Name, ios::in);\n    char* character = (char *) malloc(sizeof(char) * 100);\n    cin.clear();\n    //cin.getline(character, 1000, '\\0');\n    cout &lt;&lt; \"Enter File Name: \";\n    cin.ignore();\n    cin.getline(Name, 100, '\\n');;\n    TEXT.open(Name, ios::out | ios::app);\n    TEXT &lt;&lt; \" \" &lt;&lt; character;\n    cout &lt;&lt; \"Done copying..\\n\";\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1522870149, "post_id": 49658852, "comment_id": 86327235, "body": "Welcome to Stack Overflow! Please <b><a href=\"https://stackoverflow.com/posts/49658852/edit\">edit</a></b> your question with an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> or <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE (Short, Self Contained, Correct Example)</a>"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1522870151, "post_id": 49658852, "comment_id": 86327237, "body": "Looks like something is trying to call <code>BST::inorderCollectionTraversal()</code>, which was not given any arguments, and does not exist."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9598650, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-y_q-p6SnZGQ/AAAAAAAAAAI/AAAAAAAAHvY/fMGZgHD31SA/photo.jpg?sz=128", "display_name": "Chung ZH", "link": "https://stackoverflow.com/users/9598650/chung-zh"}, "edited": false, "score": 0, "creation_date": 1522955169, "post_id": 49659322, "comment_id": 86371116, "body": "Appreciate ur input. I tried it with ur suggestion but it  creates more errors pointing to the std::"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 11, "user_id": 9598650, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-y_q-p6SnZGQ/AAAAAAAAAAI/AAAAAAAAHvY/fMGZgHD31SA/photo.jpg?sz=128", "display_name": "Chung ZH", "link": "https://stackoverflow.com/users/9598650/chung-zh"}, "edited": false, "score": 0, "creation_date": 1522956102, "post_id": 49659322, "comment_id": 86371660, "body": "Are you compiling with C++11 or later enabled? Did you add <code>#include &lt;functional&gt;</code> to your code?"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1522871503, "creation_date": 1522871503, "answer_id": 49659322, "question_id": 49658852, "link": "https://stackoverflow.com/questions/49658852/error-no-matching-function-for-call-for-function-pointer/49659322#49659322", "title": "error: no matching function for call for function pointer", "body": "<p><code>BST::func</code> is declared as a pointer to a standalone function, but you are trying to pass it a class method when calling <code>inorderCollectionTraversal(collectData)</code>.  If <code>collectData()</code> is not declared as <code>static</code> (which your code implies, assuming <code>collector</code> is a non-static member of <code>Query</code>), then this will not work, as <code>collectData()</code> has an implicit <code>this</code> parameter that <code>func</code> does not populate when called.</p>\n\n<p>Consider changing <code>func</code> to use <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function\" rel=\"nofollow noreferrer\"><code>std::function</code></a> instead:</p>\n\n<pre><code>std::function&lt;void(T&amp;)&gt; func;\n</code></pre>\n\n<p>And then you can use a lambda to invoke <code>collectData()</code>:</p>\n\n<pre><code>...-&gt;second.inorderCollectionTraversal([this](Weather &amp;w){ collectData(w); });\n</code></pre>\n\n<p>Or even just push into <code>collector</code> directly:</p>\n\n<pre><code>...-&gt;second.inorderCollectionTraversal([&amp;](Weather &amp;w){ collector.push_back(w); });\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9598650, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-y_q-p6SnZGQ/AAAAAAAAAAI/AAAAAAAAHvY/fMGZgHD31SA/photo.jpg?sz=128", "display_name": "Chung ZH", "link": "https://stackoverflow.com/users/9598650/chung-zh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 592, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522871503, "creation_date": 1522869742, "last_edit_date": 1522870661, "question_id": 49658852, "link": "https://stackoverflow.com/questions/49658852/error-no-matching-function-for-call-for-function-pointer", "title": "error: no matching function for call for function pointer", "body": "<p>I created a templated BST with function to collect data:</p>\n\n<pre><code>typedef void (*func)(T&amp;);\n\n...\n\ntemplate&lt;class T&gt;\nvoid BST&lt;T&gt;::inorderCollectionTraversal(func f) const\n{\n    inorderCollection(root,f);\n}\n\ntemplate&lt;class T&gt;\nvoid BST&lt;T&gt;::inorderCollection(node&lt;T&gt; *p, func f) const\n{\n    if(p!=NULL){\n        inorderCollection(p-&gt;leftPtr, f);\n        f(p-&gt;data);\n        inorderCollection(p-&gt;rightPtr, f);\n    }\n}\n</code></pre>\n\n<p>And then in another class, I tried to use this data structure to sort objects of another class. I am unable to extract the objects from the BST:</p>\n\n<pre><code>map&lt;string, BST&lt;Weather&gt; &gt; dataByMonth;\n\ndataByMonth.find(monthCount[i]+eYear)-&gt;second.inorderCollectionTraversal(collectData); // the error points to this line\n\nvoid Query::collectData(Weather&amp; w){\n    collector.push_back(w);\n}\n</code></pre>\n\n<p>Everything else was tested with no issue. Only this is not working. The error message is :</p>\n\n<pre>\nNo matching function for call to 'BST&lt;Weather>::inorderCollectionTraversal(&lt;unresolved overloaded function type>)\n\ncandidate: void BST&lt;T>::inorderCollectionTraversal(BST&lt;T>::func) const [with T\n\nerror: no matching function for call to 'BST&lt;MetData>::inorderCollectionTraversal(&lt;unresolved overloaded function type>)'|\ninclude\\BST.h|235|note: candidate: void BST&lt;T>::inorderCollectionTraversal(BST&lt;T>::func) const [with T = MetData; BST&lt;T>::func = void (*)(MetData&)]|\ninclude\\BST.h|235|note:   no known conversion for argument 1 from '&lt;unresolved overloaded function type>' to 'BST&lt;MetData>::func {aka void (*)(MetData&)}'|\n</pre>\n\n<p>Can anyone advise where I went wrong?</p>\n"}, {"tags": ["c++", "solaris"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1522869883, "post_id": 49658814, "comment_id": 86327075, "body": "Note how one of the functions in the call-stack is called <code>__verbose_terminate_handler</code>. That should have printed something relevant. What did it print? Please show it to us, in full and complete and unmodified."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1522869958, "post_id": 49658814, "comment_id": 86327117, "body": "Also, without a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> it&#39;s going to be <i>very</i> hard to help you."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1522870014, "post_id": 49658814, "comment_id": 86327143, "body": "@Someprogrammerdude I am pretty sure that if OP manages to create MCVE, this will be the answer to the problem. In essence, this question is asking about creating MCVE :)"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1522870057, "post_id": 49658814, "comment_id": 86327169, "body": "Lastly, if you actually start the program <i>inside</i> the debugger it should catch the exception being thrown  (I don&#39;t know about the Solaris dbx debugger, but it would be pretty worthless otherwise). So you can see exactly when where and how the exception is being thrown."}, {"owner": {"reputation": 3716, "user_id": 331059, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dcddae70351aff62451086cd399801f9?s=128&d=identicon&r=PG", "display_name": "Bwmat", "link": "https://stackoverflow.com/users/331059/bwmat"}, "edited": false, "score": 0, "creation_date": 1522870147, "post_id": 49658814, "comment_id": 86327233, "body": "It prints out <code>terminate called after throwing an instance of &#39;Simba::Support::ErrorException&#39; Abort (core dumped)</code>"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1522870879, "post_id": 49658814, "comment_id": 86327621, "body": "How are you compiling your binary?  Also, please post the output from <code>ldd binary</code>."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 1, "creation_date": 1522893127, "post_id": 49658814, "comment_id": 86335900, "body": "It shouldn\u2019t matter because of the <code>catch(...)</code>, but are the throw and the putative catching defined in different dynamic objects?"}, {"owner": {"reputation": 3716, "user_id": 331059, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dcddae70351aff62451086cd399801f9?s=128&d=identicon&r=PG", "display_name": "Bwmat", "link": "https://stackoverflow.com/users/331059/bwmat"}, "edited": false, "score": 0, "creation_date": 1522893319, "post_id": 49658814, "comment_id": 86335943, "body": "No, the catch is in the same .so, and all frames between them are likewise"}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1522893394, "post_id": 49658814, "comment_id": 86335952, "body": "Can we see some more frames above <code>SetAttribute</code>?"}, {"owner": {"reputation": 3716, "user_id": 331059, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dcddae70351aff62451086cd399801f9?s=128&d=identicon&r=PG", "display_name": "Bwmat", "link": "https://stackoverflow.com/users/331059/bwmat"}, "edited": false, "score": 0, "creation_date": 1522893425, "post_id": 49658814, "comment_id": 86335960, "body": "I&#39;ll update with them tomorrow"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1522925242, "post_id": 49658814, "comment_id": 86350855, "body": "What is your <i>entire</i> link command? For both the shared object and the actual executable having the problem.  I don&#39;t see any dependencies on a C++ run-time library in the <code>ldd</code> output you posted.  I&#39;d think there should be a <code>libstdc++.so.6</code> or similar."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1522951211, "post_id": 49658814, "comment_id": 86368829, "body": "Interestingly, when I try to build a C++ shared object, <b>and I link that object with g++</b>, I always get the dynamic dependencies on both <code>libgcc_s.so</code> and <code>libstdc++.so</code>, even with the <code>-static-libgcc</code> option.  With the <code>-static-libstdc++</code> option also, I get no dynamic dependencies on either, but I do get a huge shared object."}], "answers": [{"comments": [{"owner": {"reputation": 3716, "user_id": 331059, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dcddae70351aff62451086cd399801f9?s=128&d=identicon&r=PG", "display_name": "Bwmat", "link": "https://stackoverflow.com/users/331059/bwmat"}, "edited": false, "score": 0, "creation_date": 1522937837, "post_id": 49670700, "comment_id": 86360048, "body": "Iodbctest was <i>supposed</i> to have been built with gcc, but I guess that&#39;s not the case, given the ldd output?"}, {"owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "edited": false, "score": 1, "creation_date": 1522937970, "post_id": 49670700, "comment_id": 86360155, "body": "It doesn&#39;t look like it - I can&#39;t see libCrun or libCstd in the ldd output. (These are the libs that the Oracle compiler uses by default)."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 3716, "user_id": 331059, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dcddae70351aff62451086cd399801f9?s=128&d=identicon&r=PG", "display_name": "Bwmat", "link": "https://stackoverflow.com/users/331059/bwmat"}, "edited": false, "score": 0, "creation_date": 1522941935, "post_id": 49670700, "comment_id": 86363276, "body": "@Bwmat <i>Iodbctest was supposed to have been built with gcc</i>  If it&#39;s linking <code>g++</code>-built C++ shared objects, it needs to be linked with <code>g++</code> (Well, it doesn&#39;t <b>need</b> to be, but that&#39;s certainly the easiest way to get the required C++ dependencies...)"}, {"owner": {"reputation": 3716, "user_id": 331059, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dcddae70351aff62451086cd399801f9?s=128&d=identicon&r=PG", "display_name": "Bwmat", "link": "https://stackoverflow.com/users/331059/bwmat"}, "edited": false, "score": 0, "creation_date": 1522942223, "post_id": 49670700, "comment_id": 86363500, "body": "There&#39;s no direct relationship between iodbctest &amp; my binary: the former (indirectly) dynamically loads the latter and uses it via the standard ODBC api."}, {"owner": {"reputation": 3716, "user_id": 331059, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dcddae70351aff62451086cd399801f9?s=128&d=identicon&r=PG", "display_name": "Bwmat", "link": "https://stackoverflow.com/users/331059/bwmat"}, "edited": false, "score": 0, "creation_date": 1522942333, "post_id": 49670700, "comment_id": 86363566, "body": "Ideally our shared objects could be loaded by any program(regardless of compiler), could this be accomplished by somehow statically linking to the runtime?"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 3716, "user_id": 331059, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dcddae70351aff62451086cd399801f9?s=128&d=identicon&r=PG", "display_name": "Bwmat", "link": "https://stackoverflow.com/users/331059/bwmat"}, "edited": false, "score": 0, "creation_date": 1522942753, "post_id": 49670700, "comment_id": 86363830, "body": "@Bwmat You need a GCC version at least 4.9.2 to statically link the C++ run-time library.  And doing <i>that</i> with a shared object is probably unreliable - what happens if another part of the application causes the C++ run-time shared object to be loaded?  That would put <i>two</i> copies of the C++ run-time into such a process."}], "tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": false, "score": 1, "last_activity_date": 1522938941, "last_edit_date": 1522938941, "creation_date": 1522925918, "answer_id": 49670700, "question_id": 49658814, "link": "https://stackoverflow.com/questions/49658814/debugging-terminate-called-after-throwing-an-instance-of-when-the-excepti/49670700#49670700", "title": "Debugging &#39;terminate called after throwing an instance of ...&#39;, when the exception _should_ have been caught", "body": "<p>I'm of course a bit guessing in the blue here, and thus this is half-answer half-comment, but exceptions not being caught even if they should sounds <em>a lot</em> like an ABI issue.</p>\n\n<p><strong>Do you compile <em>all</em> libraries and executables working together here with the same compiler?</strong> This includes libraries like the C++ standard library!</p>\n\n<p><a href=\"https://stackoverflow.com/a/27527146/1116364\">This answer</a> says that loading a shared library which is built with GCC won't work in an executable built with Solaris Studio, unless you built that executable with <a href=\"https://docs.oracle.com/cd/E37069_01/html/E37071/gndfg.html\" rel=\"nofollow noreferrer\">Solaris 12.4 or newer and enabled C++11 support</a> via <code>-std=c++11</code>.</p>\n\n<p>Thus an immediate \"fix\" would be to change / check the compile flags of the executable which loads that shared library with the offending code.</p>\n\n<hr>\n\n<p>Another difference between the executable and the shared library could be that one is configured for \"setjmp/longjmp\" exceptions and the other is not.  <code>_GLIBCPP_SJLJ_EXCEPTIONS</code> in <a href=\"http://www.fifi.org/doc/gcj-3.0/libstdc++/html_user/eh__throw_8cc-source.html\" rel=\"nofollow noreferrer\"><code>eh_throw.cc</code></a> and in <a href=\"http://www.cs.bham.ac.uk/internal/courses/2005/17423/doc/libstdc++-html-USERS-3.2.1/c++config_8h-source.html\" rel=\"nofollow noreferrer\">some config I found online.</a></p>\n\n<p><a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.8.5/gnat_ugn_unw/Platform-Specific-Information-for-the-Run-Time-Libraries.html\" rel=\"nofollow noreferrer\">Mention of the different exception handling strategies in GCC docs</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 3716, "user_id": 331059, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dcddae70351aff62451086cd399801f9?s=128&d=identicon&r=PG", "display_name": "Bwmat", "link": "https://stackoverflow.com/users/331059/bwmat"}, "edited": false, "score": 0, "creation_date": 1523296718, "post_id": 49731924, "comment_id": 86492297, "body": "The shared object is built from C++ source. It will link without either static or dynamic dependencies on the C++ runtime library? I&#39;d expect it to fail to load at runtime at the least?"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 3716, "user_id": 331059, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dcddae70351aff62451086cd399801f9?s=128&d=identicon&r=PG", "display_name": "Bwmat", "link": "https://stackoverflow.com/users/331059/bwmat"}, "edited": false, "score": 0, "creation_date": 1523356651, "post_id": 49731924, "comment_id": 86517350, "body": "@Bwmat Are any of the other shared objects you pull into the executable C++?  They could be pulling in the C++ run-time libraries, in which case the <code>-static-libgcc</code> might result in multiple copies of that library.  What shared objects are linked into your running C process when it fails to catch the exception?  You can use <code>proc -map</code> in <code>dbx</code>, or <code>pldd PID</code> from a shell prompt."}, {"owner": {"reputation": 3716, "user_id": 331059, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dcddae70351aff62451086cd399801f9?s=128&d=identicon&r=PG", "display_name": "Bwmat", "link": "https://stackoverflow.com/users/331059/bwmat"}, "edited": false, "score": 0, "creation_date": 1523568139, "post_id": 49731924, "comment_id": 86626912, "body": "Adding <code>-lgcc -lstdc++</code> to the link seems to solve the problem. Thanks!  Before trying that, we noticed that the call to <code>__cxa_throw</code> was actually in a different .so than the previous frame! (One of our dependencies, <code>libicuuc_sb32.so</code> like you guessed, actually)"}, {"owner": {"reputation": 3716, "user_id": 331059, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dcddae70351aff62451086cd399801f9?s=128&d=identicon&r=PG", "display_name": "Bwmat", "link": "https://stackoverflow.com/users/331059/bwmat"}, "edited": false, "score": 0, "creation_date": 1523568256, "post_id": 49731924, "comment_id": 86626963, "body": "Does it even make sense to use <code>-static-libgcc</code> but not <code>-static-libstdc++</code>?"}], "tags": [], "owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": true, "score": 1, "last_activity_date": 1523273484, "creation_date": 1523273484, "answer_id": 49731924, "question_id": 49658814, "link": "https://stackoverflow.com/questions/49658814/debugging-terminate-called-after-throwing-an-instance-of-when-the-excepti/49731924#49731924", "title": "Debugging &#39;terminate called after throwing an instance of ...&#39;, when the exception _should_ have been caught", "body": "<p>If you're going to create a C++ shared object that's loaded by a non-C++ executable, you need to ensure your C++ shared object has dynamic dependencies on the proper C++ run-time libraries.</p>\n\n<p>Your C++ shared object that you load with a C executable has no dependency on the <code>libstdc++.so</code> shared object.</p>\n\n<p>This link command for your shared object:</p>\n\n<pre><code>/opt/csw/gcc4/bin/g++ -DSIMBA -D_REENTRANT -m32 -fPIC -pthread\n-Wall -Wno-unknown-pragmas  -lrt   -O1 -g  -shared \nAPI/ImpalaClient_solaris10sparc_gcc4_9_release32.cpp.o \nAPI/ImpalaTCLIServiceThreadSafeClient_solaris10sparc_gcc4_9_release32.cpp.o\nCore/ImpalaConnection_solaris10sparc_gcc4_9_release32.cpp.o \nCore/ImpalaDriver_solaris10sparc_gcc4_9_release32.cpp.o \nCore/ImpalaEnvironment_solaris10sparc_gcc4_9_release32.cpp.o \nCore/ImpalaStatement_solaris10sparc_gcc4_9_release32.cpp.o\nDataEngine/ImpalaAggregateFunction_solaris10sparc_gcc4_9_release32.cpp.o\n DataEngine/ImpalaCaseInsensitiveMetadataResult_solaris10sparc_gcc4_9_release32.cpp.o\nDataEngine/ImpalaDataEngine_solaris10sparc_gcc4_9_release32.cpp.o\nDataEngine/ImpalaDSIExtQueryExecutor_solaris10sparc_gcc4_9_release32.cpp.o\nDataEngine/ImpalaFetchThread_solaris10sparc_gcc4_9_release32.cpp.o\nDataEngine/ImpalaNativeQueryExecutor_solaris10sparc_gcc4_9_release32.cpp.o\nDataEngine/ImpalaPlaceholderTable_solaris10sparc_gcc4_9_release32.cpp.o\nDataEngine/ImpalaResultSet_solaris10sparc_gcc4_9_release32.cpp.o\nDataEngine/ImpalaScalarFunction_solaris10sparc_gcc4_9_release32.cpp.o\nDataEngine/Metadata/ImpalaColumnsMetadataSource_solaris10sparc_gcc4_9_release32.cpp.o\nDataEngine/Metadata/ImpalaMetadataHelper_solaris10sparc_gcc4_9_release32.cpp.o\nDataEngine/Metadata/ImpalaTablesMetadataSource_solaris10sparc_gcc4_9_release32.cpp.o\nDataEngine/Metadata/ImpalaTypeInfoMetadataSource_solaris10sparc_gcc4_9_release32.cpp.o\nQueryTranslation/ImpalaSQLGenerator_solaris10sparc_gcc4_9_release32.cpp.o\nUtilities/ImpalaTypeUtilities_solaris10sparc_gcc4_9_release32.cpp.o\nUtilities/ImpalaUtilities_solaris10sparc_gcc4_9_release32.cpp.o\n../ThirdParty/ImpalaClients_Thrift_0_9_0/TCLIServiceClient/src/TCLIService_solaris10sparc_gcc4_9_release32.cpp.o\n../ThirdParty/ImpalaClients_Thrift_0_9_0/TCLIServiceClient/src/TCLIService_constants_solaris10sparc_gcc4_9_release32.cpp.o\n../ThirdParty/ImpalaClients_Thrift_0_9_0/TCLIServiceClient/src/TCLIService_types_solaris10sparc_gcc4_9_release32.cpp.o\nMain_Unix_solaris10sparc_gcc4_9_release32.cpp.o     -mimpure-text -static-libgcc\n-L./solaris10sparc/gcc4_9/release32\n-L/bamboo/bamboo-agent-home/xml-data/build-dir/ThirdParty/icu/53.1.x/solaris10sparc/gcc4_9/release32/lib\n-licudata_sb32 -licui18n_sb32 -licuuc_sb32 -lpthread -lm\n-Wl,-M,exports_Solaris.map -lrt -lnsl -lsocket -lresolv -lxnet\n-Wl,-M,exports_Solaris.map\n-Wl,-zallextract,/bamboo/bamboo-agent-home/xml-data/build-dir/SimbaEngine/Maintenance/10.1/Product/Lib/solaris10sparc/gcc4_9/release32/libSimbaODBC.a,\n/bamboo/bamboo-agent-home/xml-data/build-dir/SimbaEngine/Maintenance/10.1/Product/Lib/solaris10sparc/gcc4_9/release32/libSimbaDSI.a,\n/bamboo/bamboo-agent-home/xml-data/build-dir/SimbaEngine/Maintenance/10.1/Product/Lib/solaris10sparc/gcc4_9/release32/libSimbaSupport.a,\n/bamboo/bamboo-agent-home/xml-data/build-dir/SimbaEngine/Maintenance/10.1/Product/Lib/solaris10sparc/gcc4_9/release32/libAEProcessor.a,\n/bamboo/bamboo-agent-home/xml-data/build-dir/SimbaEngine/Maintenance/10.1/Product/Lib/solaris10sparc/gcc4_9/release32/libCore.a,\n/bamboo/bamboo-agent-home/xml-data/build-dir/SimbaEngine/Maintenance/10.1/Product/Lib/solaris10sparc/gcc4_9/release32/libDSIExt.a,\n/bamboo/bamboo-agent-home/xml-data/build-dir/SimbaEngine/Maintenance/10.1/Product/Lib/solaris10sparc/gcc4_9/release32/libExecutor.a,\n/bamboo/bamboo-agent-home/xml-data/build-dir/SimbaEngine/Maintenance/10.1/Product/Lib/solaris10sparc/gcc4_9/release32/libParser.a,\n/bamboo/bamboo-agent-home/xml-data/build-dir/Drivers/DriverShared/KerberosSupport/Maintenance/10.1/Lib/solaris10sparc/gcc4_9/release32/libKerberosSupport.a,\n/bamboo/bamboo-agent-home/xml-data/build-dir/Drivers/DriverShared/ThriftExtension/0.9.0/Maintenance/10.1/Lib/solaris10sparc/gcc4_9/release32/libThriftExtension.a,\n/bamboo/bamboo-agent-home/xml-data/build-dir/Drivers/DriverShared/DriverSupport/Maintenance/10.1/Lib/solaris10sparc/gcc4_9/release32/libDriverSupport.a\n-Wl,-zweakextract,/bamboo/bamboo-agent-home/xml-data/build-dir/ThirdParty/openssl/1.1.0/solaris10sparc/gcc4_9/release32/lib/libssl.a,\n/bamboo/bamboo-agent-home/xml-data/build-dir/ThirdParty/openssl/1.1.0/solaris10sparc/gcc4_9/release32/lib/libcrypto.a,\n/bamboo/bamboo-agent-home/xml-data/build-dir/Drivers/DriverShared/cyrus-sasl/2.1.26/saslGSSAPI/Maintenance/1.0/Binaries/solaris10sparc/gcc4_9/release32/lib/libsasl2.a,\n/bamboo/bamboo-agent-home/xml-data/build-dir/ThirdParty/boost/1.57.0_sb_icusb_53.1.x/solaris10sparc/gcc4_9/release32/lib/libboost_sb_date_time.a,\n/bamboo/bamboo-agent-home/xml-data/build-dir/ThirdParty/boost/1.57.0_sb_icusb_53.1.x/solaris10sparc/gcc4_9/release32/lib/libboost_sb_regex.a,\n/bamboo/bamboo-agent-home/xml-data/build-dir/ThirdParty/boost/1.57.0_sb_icusb_53.1.x/solaris10sparc/gcc4_9/release32/lib/libboost_sb_thread.a,\n/bamboo/bamboo-agent-home/xml-data/build-dir/ThirdParty/boost/1.57.0_sb_icusb_53.1.x/solaris10sparc/gcc4_9/release32/lib/libboost_sb_system.a,\n/bamboo/bamboo-agent-home/xml-data/build-dir/ThirdParty/thrift/0.9.0_openssl1.1.0_boost1.57.0_sb_icusb_53.1.x/solaris10sparc/gcc4_9/release32/lib/libthrift.a,\n/bamboo/bamboo-agent-home/xml-data/build-dir/ThirdParty/boost/1.57.0_sb_icusb_53.1.x/solaris10sparc/gcc4_9/release32/lib/libboost_sb_atomic.a,\n/bamboo/bamboo-agent-home/xml-data/build-dir/Drivers/DriverShared/cyrus-sasl/2.1.26/saslGSSAPI/Maintenance/1.0/Binaries/solaris10sparc/gcc4_9/release32/lib/sasl2/libgs2.a\n-L/bamboo/bamboo-agent-home/xml-data/build-dir/ThirdParty/MIT_Kerberos/1.14/solaris10sparc/gcc4_9/release32/lib\n-lgssapi_krb5 -lkrb5 -lkrb5support -lk5crypto -lcom_err\n-o ../Bin/solaris10sparc/gcc4_9/release32/libimpalaodbc_sb32.so\n</code></pre>\n\n<p>produces a C++ shared object without a dynamic dependency on <code>libstdc++.so</code>.  Also, note that despite the <code>-static-libgcc</code> argument, there's still a dynamic dependency on <code>libgcc_s.so</code>:</p>\n\n<pre><code>libgcc_s.so.1 =&gt;         /opt/csw/lib/libgcc_s.so.1\n</code></pre>\n\n<p>That may be because one or all of <code>libicudata_sb32.so</code>,<code>libicui18n_sb32.so</code>, and/or <code>libicuuc_sb32.so</code> were linked in a way the <em>requires</em> a dynamic <code>libgcc</code>.  See <a href=\"https://stackoverflow.com/questions/13169461/compile-libconfig-with-static-libgcc-and-static-libstdc/18263911#18263911\">compile libconfig++ with -static-libgcc and -static-libstdc++</a> for an example of a question where <code>-static-libgcc</code> and <code>-static-libstdc++</code> still produced a binary with dynamic dependencies on shared object versions of those libraries.</p>\n\n<p>The C binary that you use to load this shared object is linked with</p>\n\n<pre><code>gcc -std=gnu99 -m32 -DODBCVER=0x0350 -DIODBC_BUILD=8120326 -m32\n-o iodbctest iodbctest.o  ../iodbc/.libs/libiodbc.a -ldl\n</code></pre>\n\n<p>That's not going to result in any dependency on <code>libstdc++.so</code>, nor should it.</p>\n\n<p>And see <a href=\"https://stackoverflow.com/questions/13169461/compile-libconfig-with-static-libgcc-and-static-libstdc/18263911\">Linking libstdc++ statically: any gotchas?</a> for just one question about potential issues linking <code>libstdc++</code> statically.  And note that even that question merely deals with statically linking one copy of <code>libstdc++</code> into an executable.  Statically linking <code>libstdc++</code> into a shared object raises all kinds of other issues:  will each C++ shared object liked in get proper access to that <em>one</em> copy of the C++ run-time linked in that way?  Or are you going to statically link in multiple copies of <code>libstdc++</code> into every C++ shared object your process might load?  How well with <em>that</em> work?  If weird issues start appearing, how would you even begin to debug them?</p>\n\n<p>What happens if a non-C++ executable dynamically loads a C++ shared object with a static copy of <code>libstdc++</code> inside it, then that same executable dynamically links in another C++ shared object with a dynamic dependency on <code>libstdc++.so</code>? What's going to happen then when a dynamic copy of the C++ runtime from <code>libstdc++.so</code> is loaded after the static copy has already been loaded and initialized?  What happens if you reverse the order?  What happens if there's an upgrade that changes <code>libstdc++.so</code>, but you don't provide an updated copy of the <em>statically-linked</em> copy of <code>libstdc++</code>?</p>\n\n<p>The bottom line is:  if you're creating C++ shared objects that need to be loaded by a non-C++ executable and don't want to deal with all the potential issues listed above, you need to properly record the dynamic dependencies on the C++ run time in all the C++ shared objects.</p>\n\n<p>You need to add something like</p>\n\n<pre><code>-lgcc -lstdc++\n</code></pre>\n\n<p>to the <strong>shared object</strong> link commands for your C++ shared objects that can be loaded into a C binary.</p>\n"}], "owner": {"reputation": 3716, "user_id": 331059, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dcddae70351aff62451086cd399801f9?s=128&d=identicon&r=PG", "display_name": "Bwmat", "link": "https://stackoverflow.com/users/331059/bwmat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1594, "favorite_count": 0, "accepted_answer_id": 49731924, "answer_count": 2, "score": 5, "last_activity_date": 1523273484, "creation_date": 1522869566, "last_edit_date": 1523153283, "question_id": 49658814, "link": "https://stackoverflow.com/questions/49658814/debugging-terminate-called-after-throwing-an-instance-of-when-the-excepti", "title": "Debugging &#39;terminate called after throwing an instance of ...&#39;, when the exception _should_ have been caught", "body": "<p>I'm debugging an issue which only seems to happen on Solaris (we test on Windows, Linux, OSX, Solaris, HP-UX, and AIX).</p>\n\n<p>Our code throws an exception (which is totally expected), and this results in the 'terminate called after throwing an instance of ...' message being printed, and the process being terminated.</p>\n\n<pre><code>(dbx) where -h\ncurrent thread: t@1\ndbx: forward reference `Connection' not defined, see `help forwardref'\n  [1] __lwp_kill(0x0, 0x6, 0x0, 0x6, 0xffbffeff, 0x0), at 0xff2ce364\n  [2] raise(0x6, 0x0, 0x0, 0xff2ad954, 0xffffffff, 0x6), at 0xff267958\n  [3] abort(0x132cb0, 0x1, 0xff122f38, 0xedbe0, 0xff333558, 0x0), at 0xff242910\n=&gt;[4] __gnu_cxx::__verbose_terminate_handler(), line 95 in \"vterminate.cc\"\n  [5] __cxxabiv1::__terminate(handler = 0xff125098 = &amp;__gnu_cxx::__verbose_terminate_handler()), line 47 in \"eh_terminate.cc\"\n  [6] std::terminate(), line 57 in \"eh_terminate.cc\"\n  [7] __cxa_throw(obj = 0x132cf8, tinfo = 0xfef2bf2c, dest = 0xfe204240 = &amp;Simba::Support::ErrorException::~ErrorException()), line 87 in \"eh_throw.cc\"\n  [8] Simba::ODBC::ConnectionAttributes::SetAttribute(this = 0x12a060, in_attribute = &lt;value unavailable&gt;, in_value = 0x132c78, in_length = -3), line 299 in \"ConnectionAttributes.cpp\"\n</code></pre>\n\n<p><code>Simba::Support::ErrorException</code> <em>is</em> the type the message complains about, and we <em>are</em> throwing an instance of it on line 299 in ConnectionAttributes.cpp, but as far as I know, that <em>shouldn't</em> cause std::terminate() to be thrown, because:</p>\n\n<ul>\n<li>As far as I can tell, this isn't being thrown from a destructor during stack unwinding prompted by a prior exception (I added tracing into the exception type's constructor, and it's only called once before the crash)</li>\n<li>The current thread's stack has at least one frame with a <code>catch (Simba::Support::ErrorException&amp;)</code> on it (and that same frame has a <code>catch (...)</code> too, just to be sure), with probably others above it that should catch the exception.</li>\n</ul>\n\n<p>What other reasons could there be for this? Am I missing something with my logic?</p>\n\n<p>Given that it's only happening on Solaris, I'm thinking some issue in the runtime?</p>\n\n<p>Edit: Some more details</p>\n\n<ul>\n<li><code>uname -a</code> output on the machine: <code>SunOS b3-sol10spr-01 5.10 Generic_147440-01 sun4v sparc sun4v</code></li>\n<li>We're building w/ GCC 4.9.2</li>\n<li>This is happening on a SPARC box, but we've had other issues related to exceptions on Solaris x86 before: <a href=\"https://stackoverflow.com/questions/38383982/crash-caused-by-invalid-exception-unwinding\">Crash caused by invalid exception unwinding?</a></li>\n<li>Flags used during compilation of the driver: <code>-DSIZEOF_LONG_INT=4 -DSQL_WCHART_CONVERT -DHAVE_LONG_LONG -m32 -fPIC -pthread  -Wall -Wno-unknown-pragmas -DSIMBA -D_REENTRANT -DCLUNIX -DNDEBUG -D_POSIX_PTHREAD_SEMANTICS  -O0 -g -D_DEBUG</code></li>\n<li>Flags used during linking of the driver: <code>-DSIMBA -D_REENTRANT -m32 -fPIC -pthread  -Wall -Wno-unknown-pragmas -O1 -g  -shared -mimpure-text -static-libgcc -Wl,-M,exports_Solaris.map</code> (skipped a bunch of -lxxx)</li>\n</ul>\n\n<p>LDD output for shared library (which houses the offending code)</p>\n\n<pre><code>        libicudata_sb32.so.53 =&gt;         /bamboo/Adhoc/ThirdParty/icu/53.1.x/solaris10sparc/gcc4_9/release32/lib/libicudata_sb32.so.53\n        libicui18n_sb32.so.53 =&gt;         /bamboo/Adhoc/ThirdParty/icu/53.1.x/solaris10sparc/gcc4_9/release32/lib/libicui18n_sb32.so.53\n        libicuuc_sb32.so.53 =&gt;   /bamboo/Adhoc/ThirdParty/icu/53.1.x/solaris10sparc/gcc4_9/release32/lib/libicuuc_sb32.so.53\n        libpthread.so.1 =&gt;       /lib/libpthread.so.1\n        librt.so.1 =&gt;    /lib/librt.so.1\n        libnsl.so.1 =&gt;   /lib/libnsl.so.1\n        libsocket.so.1 =&gt;        /lib/libsocket.so.1\n        libresolv.so.2 =&gt;        /lib/libresolv.so.2\n        libxnet.so.1 =&gt;  /lib/libxnet.so.1\n        libgssapi_krb5.so.2 =&gt;   /opt/csw/lib/libgssapi_krb5.so.2\n        libkrb5.so.3 =&gt;  /opt/csw/lib/libkrb5.so.3\n        libkrb5support.so.0 =&gt;   /opt/csw/lib/libkrb5support.so.0\n        libk5crypto.so.3 =&gt;      /opt/csw/lib/libk5crypto.so.3\n        libcom_err.so.3 =&gt;       /opt/csw/lib/libcom_err.so.3\n        libm.so.2 =&gt;     /lib/libm.so.2\n        libc.so.1 =&gt;     /lib/libc.so.1\n        libgcc_s.so.1 =&gt;         /opt/csw/lib/libgcc_s.so.1\n        libaio.so.1 =&gt;   /lib/libaio.so.1\n        libmd.so.1 =&gt;    /lib/libmd.so.1\n        libmp.so.2 =&gt;    /lib/libmp.so.2\n        libscf.so.1 =&gt;   /lib/libscf.so.1\n        libintl.so.8 =&gt;  /opt/csw/lib/sparcv8/libintl.so.8\n        libdoor.so.1 =&gt;  /lib/libdoor.so.1\n        libuutil.so.1 =&gt;         /lib/libuutil.so.1\n        libgen.so.1 =&gt;   /lib/libgen.so.1\n        libiconv.so.2 =&gt;         /opt/csw/lib/sparcv8/libiconv.so.2\n        /lib/libm/libm_hwcap1.so.2\n        /platform/sun4v/lib/libc_psr.so.1\n        /platform/sun4v/lib/libmd_psr.so.1\n</code></pre>\n\n<p>LDD output for iodbctest (Not sure how this was built)</p>\n\n<pre><code>        libdl.so.1 =&gt;    /lib/libdl.so.1\n        libc.so.1 =&gt;     /lib/libc.so.1\n        libm.so.2 =&gt;     /lib/libm.so.2\n        /lib/libm/libm_hwcap1.so.2\n        /platform/sun4v/lib/libc_psr.so.1\n</code></pre>\n\n<p>Also, for someone who asked, if I set dbx to break on exceptions, I first break at this stack</p>\n\n<pre><code>(dbx) where -h\ncurrent thread: t@1\ndbx: forward reference `Connection' not defined, see `help forwardref'\n=&gt;[1] __cxa_throw(obj = 0x13a268, tinfo = 0xfef2bf2c, dest = 0xfe204240 = &amp;Simba::Support::ErrorException::~ErrorException()), line 65 in \"eh_throw.cc\"\n  [2] Simba::ODBC::ConnectionAttributes::SetAttribute(this = 0x12d5d0, in_attribute = &lt;value unavailable&gt;, in_value = 0x13a1e8, in_length = -3), line 299 in \"ConnectionAttributes.cpp\"\n</code></pre>\n\n<p>and then if I continue, it crashes at the location previously mentioned.</p>\n\n<p>Edit 2:\nHere's some more stack frames when terminate is called:</p>\n\n<pre><code>(dbx) where -h\ncurrent thread: t@1\ndbx: forward reference `Connection' not defined, see `help forwardref'\n  [1] __lwp_kill(0x0, 0x6, 0x0, 0x6, 0xffbffeff, 0x0), at 0xff2ce364\n  [2] raise(0x6, 0x0, 0x0, 0xff2ad954, 0xffffffff, 0x6), at 0xff267958\n  [3] abort(0x132cb0, 0x1, 0xff122f38, 0xedbe0, 0xff333558, 0x0), at 0xff242910\n=&gt;[4] __gnu_cxx::__verbose_terminate_handler(), line 95 in \"vterminate.cc\"\n  [5] __cxxabiv1::__terminate(handler = 0xff125098 = &amp;__gnu_cxx::__verbose_terminate_handler()), line 47 in \"eh_terminate.cc\"\n  [6] std::terminate(), line 57 in \"eh_terminate.cc\"\n  [7] __cxa_throw(obj = 0x132cf8, tinfo = 0xfef2bf2c, dest = 0xfe204240 = &amp;Simba::Support::ErrorException::~ErrorException()), line 87 in \"eh_throw.cc\"\n  [8] Simba::ODBC::ConnectionAttributes::SetAttribute(this = 0x12a060, in_attribute = &lt;value unavailable&gt;, in_value = 0x132c78, in_length = -3), line 299 in \"ConnectionAttributes.cpp\"\n  [9] Simba::ODBC::ConnectionState::SQLSetConnectAttr(this = &lt;value unavailable&gt;, in_connection = 0x129e08, Attribute = 1051, ValuePtr = 0x132c78, StringLength = -3), line 495 in \"ConnectionState.cpp\"\n  [10] Simba::ODBC::ConnectionState2::SQLSetConnectAttr(this = 0xd7a30, in_connection = 0x129e08, Attribute = 1051, ValuePtr = 0x132c78, StringLength = -3), line 526 in \"ConnectionState2.cpp\"\n  [11] Simba::ODBC::Connection::SQLSetConnectAttr(this = 0x129e08, Attribute = 1051, ValuePtr = 0x132c78, StringLength = -3), line 1746 in \"Connection.cpp\"\n  [12] Simba::ODBC::SQLSetConnectAttrTask&lt;true&gt;::DoSynchronously(, line 266 in \"SQLSetConnectAttrTask.h\"\n  [13] DoTask&lt;Simba::ODBC::SQLSetConnectAttrTask&lt;true&gt; &gt;(in_functionName = 0xfea68b10 \"SQLSetConnectAttr\", in_handle = 0x2, in_parameters = STRUCT), line 638 in \"CInterface.cpp\"\n  [14] SQLSetConnectAttrW(ConnectionHandle = 0x2, Attribute = 1051, Value = 0x132c78, StringLength = -3), line 4053 in \"CInterface.cpp\"\n  [15] _iodbcdm_SetConnectOption_init(0x9a568, 0x41b, 0x7b4a0, 0x41, 0x99e68, 0xffffefc8), at 0x23ae0\n  [16] _iodbcdm_driverload(0xffbfec10, 0xffbfec40, 0x9a568, 0x1, 0x0, 0x41), at 0x26458\n  [17] SQLDriverConnect_Internal(0x9a568, 0x0, 0xffbff590, 0xfffffffd, 0x98dc0, 0x1000), at 0x2a72c\n  [18] SQLDriverConnect(0x9a568, 0x0, 0xffbff590, 0xfffffffd, 0x98dc0, 0x1000), at 0x2b7e0\n  [19] ODBC_Connect(0xffbffb7b, 0x98c80, 0x0, 0x98c9e, 0xff3303ec, 0x4), at 0x16638\n  [20] main(0x2, 0xffbffa7c, 0xffbffa88, 0x99dc0, 0xff3700c0, 0x0), at 0x1837c\n</code></pre>\n\n<p>Also, I've confirmed that iodbctest was in fact built with gcc</p>\n\n<pre><code>Making all in samples\ngcc -std=gnu99 -DHAVE_CONFIG_H -I. -I../include -I../include -DNO_FRAMEWORKS   -DWITH_PTHREADS -D_REENTRANT  -m32 -DODBCVER=0x0350 -DIODBC_BUILD=8120326 -MT iodbctest.o -MD -MP -MF .deps/iodbctest.Tpo -c -o iodbctest.o iodbctest.c\nmv -f .deps/iodbctest.Tpo .deps/iodbctest.Po\n/bin/bash ../libtool --tag=CC    --mode=link gcc -std=gnu99  -m32 -DODBCVER=0x0350 -DIODBC_BUILD=8120326  -static -m32 -o iodbctest iodbctest.o ../iodbc/libiodbc.la \nlibtool: link: gcc -std=gnu99 -m32 -DODBCVER=0x0350 -DIODBC_BUILD=8120326 -m32 -o iodbctest iodbctest.o  ../iodbc/.libs/libiodbc.a -ldl\n</code></pre>\n\n<p>Edit 3: Here's the link command for the .so</p>\n\n<pre><code>/opt/csw/gcc4/bin/g++ -DSIMBA -D_REENTRANT -m32 -fPIC -pthread  -Wall -Wno-unknown-pragmas  -lrt   -O1 -g  -shared API/ImpalaClient_solaris10sparc_gcc4_9_release32.cpp.o API/ImpalaTCLIServiceThreadSafeClient_solaris10sparc_gcc4_9_release32.cpp.o Core/ImpalaConnection_solaris10sparc_gcc4_9_release32.cpp.o Core/ImpalaDriver_solaris10sparc_gcc4_9_release32.cpp.o Core/ImpalaEnvironment_solaris10sparc_gcc4_9_release32.cpp.o Core/ImpalaStatement_solaris10sparc_gcc4_9_release32.cpp.o DataEngine/ImpalaAggregateFunction_solaris10sparc_gcc4_9_release32.cpp.o DataEngine/ImpalaCaseInsensitiveMetadataResult_solaris10sparc_gcc4_9_release32.cpp.o DataEngine/ImpalaDataEngine_solaris10sparc_gcc4_9_release32.cpp.o DataEngine/ImpalaDSIExtQueryExecutor_solaris10sparc_gcc4_9_release32.cpp.o DataEngine/ImpalaFetchThread_solaris10sparc_gcc4_9_release32.cpp.o DataEngine/ImpalaNativeQueryExecutor_solaris10sparc_gcc4_9_release32.cpp.o DataEngine/ImpalaPlaceholderTable_solaris10sparc_gcc4_9_release32.cpp.o DataEngine/ImpalaResultSet_solaris10sparc_gcc4_9_release32.cpp.o DataEngine/ImpalaScalarFunction_solaris10sparc_gcc4_9_release32.cpp.o DataEngine/Metadata/ImpalaColumnsMetadataSource_solaris10sparc_gcc4_9_release32.cpp.o DataEngine/Metadata/ImpalaMetadataHelper_solaris10sparc_gcc4_9_release32.cpp.o DataEngine/Metadata/ImpalaTablesMetadataSource_solaris10sparc_gcc4_9_release32.cpp.o DataEngine/Metadata/ImpalaTypeInfoMetadataSource_solaris10sparc_gcc4_9_release32.cpp.o QueryTranslation/ImpalaSQLGenerator_solaris10sparc_gcc4_9_release32.cpp.o Utilities/ImpalaTypeUtilities_solaris10sparc_gcc4_9_release32.cpp.o Utilities/ImpalaUtilities_solaris10sparc_gcc4_9_release32.cpp.o ../ThirdParty/ImpalaClients_Thrift_0_9_0/TCLIServiceClient/src/TCLIService_solaris10sparc_gcc4_9_release32.cpp.o ../ThirdParty/ImpalaClients_Thrift_0_9_0/TCLIServiceClient/src/TCLIService_constants_solaris10sparc_gcc4_9_release32.cpp.o ../ThirdParty/ImpalaClients_Thrift_0_9_0/TCLIServiceClient/src/TCLIService_types_solaris10sparc_gcc4_9_release32.cpp.o Main_Unix_solaris10sparc_gcc4_9_release32.cpp.o     -mimpure-text -static-libgcc -L./solaris10sparc/gcc4_9/release32 -L/bamboo/bamboo-agent-home/xml-data/build-dir/ThirdParty/icu/53.1.x/solaris10sparc/gcc4_9/release32/lib -licudata_sb32 -licui18n_sb32 -licuuc_sb32 -lpthread -lm -Wl,-M,exports_Solaris.map -lrt -lnsl -lsocket -lresolv -lxnet -Wl,-M,exports_Solaris.map -Wl,-zallextract,/bamboo/bamboo-agent-home/xml-data/build-dir/SimbaEngine/Maintenance/10.1/Product/Lib/solaris10sparc/gcc4_9/release32/libSimbaODBC.a,/bamboo/bamboo-agent-home/xml-data/build-dir/SimbaEngine/Maintenance/10.1/Product/Lib/solaris10sparc/gcc4_9/release32/libSimbaDSI.a,/bamboo/bamboo-agent-home/xml-data/build-dir/SimbaEngine/Maintenance/10.1/Product/Lib/solaris10sparc/gcc4_9/release32/libSimbaSupport.a,/bamboo/bamboo-agent-home/xml-data/build-dir/SimbaEngine/Maintenance/10.1/Product/Lib/solaris10sparc/gcc4_9/release32/libAEProcessor.a,/bamboo/bamboo-agent-home/xml-data/build-dir/SimbaEngine/Maintenance/10.1/Product/Lib/solaris10sparc/gcc4_9/release32/libCore.a,/bamboo/bamboo-agent-home/xml-data/build-dir/SimbaEngine/Maintenance/10.1/Product/Lib/solaris10sparc/gcc4_9/release32/libDSIExt.a,/bamboo/bamboo-agent-home/xml-data/build-dir/SimbaEngine/Maintenance/10.1/Product/Lib/solaris10sparc/gcc4_9/release32/libExecutor.a,/bamboo/bamboo-agent-home/xml-data/build-dir/SimbaEngine/Maintenance/10.1/Product/Lib/solaris10sparc/gcc4_9/release32/libParser.a,/bamboo/bamboo-agent-home/xml-data/build-dir/Drivers/DriverShared/KerberosSupport/Maintenance/10.1/Lib/solaris10sparc/gcc4_9/release32/libKerberosSupport.a,/bamboo/bamboo-agent-home/xml-data/build-dir/Drivers/DriverShared/ThriftExtension/0.9.0/Maintenance/10.1/Lib/solaris10sparc/gcc4_9/release32/libThriftExtension.a,/bamboo/bamboo-agent-home/xml-data/build-dir/Drivers/DriverShared/DriverSupport/Maintenance/10.1/Lib/solaris10sparc/gcc4_9/release32/libDriverSupport.a -Wl,-zweakextract,/bamboo/bamboo-agent-home/xml-data/build-dir/ThirdParty/openssl/1.1.0/solaris10sparc/gcc4_9/release32/lib/libssl.a,/bamboo/bamboo-agent-home/xml-data/build-dir/ThirdParty/openssl/1.1.0/solaris10sparc/gcc4_9/release32/lib/libcrypto.a,/bamboo/bamboo-agent-home/xml-data/build-dir/Drivers/DriverShared/cyrus-sasl/2.1.26/saslGSSAPI/Maintenance/1.0/Binaries/solaris10sparc/gcc4_9/release32/lib/libsasl2.a,/bamboo/bamboo-agent-home/xml-data/build-dir/ThirdParty/boost/1.57.0_sb_icusb_53.1.x/solaris10sparc/gcc4_9/release32/lib/libboost_sb_date_time.a,/bamboo/bamboo-agent-home/xml-data/build-dir/ThirdParty/boost/1.57.0_sb_icusb_53.1.x/solaris10sparc/gcc4_9/release32/lib/libboost_sb_regex.a,/bamboo/bamboo-agent-home/xml-data/build-dir/ThirdParty/boost/1.57.0_sb_icusb_53.1.x/solaris10sparc/gcc4_9/release32/lib/libboost_sb_thread.a,/bamboo/bamboo-agent-home/xml-data/build-dir/ThirdParty/boost/1.57.0_sb_icusb_53.1.x/solaris10sparc/gcc4_9/release32/lib/libboost_sb_system.a,/bamboo/bamboo-agent-home/xml-data/build-dir/ThirdParty/thrift/0.9.0_openssl1.1.0_boost1.57.0_sb_icusb_53.1.x/solaris10sparc/gcc4_9/release32/lib/libthrift.a,/bamboo/bamboo-agent-home/xml-data/build-dir/ThirdParty/boost/1.57.0_sb_icusb_53.1.x/solaris10sparc/gcc4_9/release32/lib/libboost_sb_atomic.a,/bamboo/bamboo-agent-home/xml-data/build-dir/Drivers/DriverShared/cyrus-sasl/2.1.26/saslGSSAPI/Maintenance/1.0/Binaries/solaris10sparc/gcc4_9/release32/lib/sasl2/libgs2.a -L/bamboo/bamboo-agent-home/xml-data/build-dir/ThirdParty/MIT_Kerberos/1.14/solaris10sparc/gcc4_9/release32/lib -lgssapi_krb5 -lkrb5 -lkrb5support -lk5crypto -lcom_err -o ../Bin/solaris10sparc/gcc4_9/release32/libimpalaodbc_sb32.so\n</code></pre>\n"}, {"tags": ["c++", "gtk", "gtk3", "opencv3.0"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 6473086, "user_type": "registered", "profile_image": "https://graph.facebook.com/1704872096439363/picture?type=large", "display_name": "Andrew Shao", "link": "https://stackoverflow.com/users/6473086/andrew-shao"}, "edited": false, "score": 0, "creation_date": 1522895720, "post_id": 49661590, "comment_id": 86336453, "body": "Thanks! And also for the second question, if I want to make the image bigger, is it possible for make the container&#39;s size fixed, so that when image gets bigger, the part exceeds the container does not show in the container. (Cuz usually the container just get larger along with its image."}, {"owner": {"reputation": 3049, "user_id": 6150775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f16a0c1701c5debb928d96fa22ba0582?s=128&d=identicon&r=PG&f=1", "display_name": "theGtknerd", "link": "https://stackoverflow.com/users/6150775/thegtknerd"}, "reply_to_user": {"reputation": 39, "user_id": 6473086, "user_type": "registered", "profile_image": "https://graph.facebook.com/1704872096439363/picture?type=large", "display_name": "Andrew Shao", "link": "https://stackoverflow.com/users/6473086/andrew-shao"}, "edited": false, "score": 0, "creation_date": 1522924205, "post_id": 49661590, "comment_id": 86350167, "body": "A <a href=\"https://developer.gnome.org/gnome-devel-demos/stable/scrolledwindow.c.html.en\" rel=\"nofollow noreferrer\">scrolled window</a>, maybe?"}, {"owner": {"reputation": 3049, "user_id": 6150775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f16a0c1701c5debb928d96fa22ba0582?s=128&d=identicon&r=PG&f=1", "display_name": "theGtknerd", "link": "https://stackoverflow.com/users/6150775/thegtknerd"}, "reply_to_user": {"reputation": 39, "user_id": 6473086, "user_type": "registered", "profile_image": "https://graph.facebook.com/1704872096439363/picture?type=large", "display_name": "Andrew Shao", "link": "https://stackoverflow.com/users/6473086/andrew-shao"}, "edited": false, "score": 0, "creation_date": 1522924286, "post_id": 49661590, "comment_id": 86350214, "body": "Please provide a use case and code for your request. Without knowing what you are doing, and what you tried, it is hard to recommend a solution."}, {"owner": {"reputation": 39, "user_id": 6473086, "user_type": "registered", "profile_image": "https://graph.facebook.com/1704872096439363/picture?type=large", "display_name": "Andrew Shao", "link": "https://stackoverflow.com/users/6473086/andrew-shao"}, "edited": false, "score": 0, "creation_date": 1522976729, "post_id": 49661590, "comment_id": 86379036, "body": "Okay Sorry about the confusion. For example, I had a 200 * 200 window, add a container, add a 100* 100 image to the container, if we move around the image, say we move it towards right, when image hits the border of the window, the window is going to grow alongwith when I move the image more. I want to prevent the container from resizing. I wonder if I made it clear..."}, {"owner": {"reputation": 39, "user_id": 6473086, "user_type": "registered", "profile_image": "https://graph.facebook.com/1704872096439363/picture?type=large", "display_name": "Andrew Shao", "link": "https://stackoverflow.com/users/6473086/andrew-shao"}, "edited": false, "score": 0, "creation_date": 1522977255, "post_id": 49661590, "comment_id": 86379162, "body": "Oh it does look like scrolled window is a good solution. Ill try that! Thanks!"}], "tags": [], "owner": {"reputation": 3049, "user_id": 6150775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f16a0c1701c5debb928d96fa22ba0582?s=128&d=identicon&r=PG&f=1", "display_name": "theGtknerd", "link": "https://stackoverflow.com/users/6150775/thegtknerd"}, "is_accepted": true, "score": 1, "last_activity_date": 1522882126, "creation_date": 1522882126, "answer_id": 49661590, "question_id": 49658732, "link": "https://stackoverflow.com/questions/49658732/gtk-3-when-widget-is-too-large/49661590#49661590", "title": "Gtk 3 when widget is too large", "body": "<p>It is pretty easy when you know how. In C:</p>\n\n<pre><code>GdkPixbuf *pixbuf;\nGtkWidget *preview_image;\n\npreview_image = gtk_image_new ();\npixbuf = gdk_pixbuf_new_from_file_at_scale (file_uri, \n                                            128, \n                                            128, \n                                            TRUE, NULL);\ngtk_image_set_from_pixbuf (GTK_IMAGE(preview_image), pixbuf);\n</code></pre>\n\n<p>the pixbuf <a href=\"https://developer.gnome.org/gdk-pixbuf/stable/gdk-pixbuf-File-Loading.html#gdk-pixbuf-new-from-file-at-scale\" rel=\"nofollow noreferrer\">docs</a> and the image <a href=\"https://developer.gnome.org/gtk3/stable/GtkImage.html#gtk-image-new\" rel=\"nofollow noreferrer\">docs</a></p>\n\n<p>Basically, you can't put an image in any type of scrolling 'window' directly from a file. Instead, load the file into a pixbuf, and the pixbuf into the image and all sizing should automatically take care of itself.</p>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 6473086, "user_type": "registered", "profile_image": "https://graph.facebook.com/1704872096439363/picture?type=large", "display_name": "Andrew Shao", "link": "https://stackoverflow.com/users/6473086/andrew-shao"}, "is_accepted": false, "score": 0, "last_activity_date": 1522978725, "creation_date": 1522978725, "answer_id": 49683961, "question_id": 49658732, "link": "https://stackoverflow.com/questions/49658732/gtk-3-when-widget-is-too-large/49683961#49683961", "title": "Gtk 3 when widget is too large", "body": "<p>So I tried something other than scrolled view, I was using gtk_fixed, whose size is going to increment if we move a widget outside the window. </p>\n\n<p>And I switched to gtk_layout later(which includes the functionality that gtk_fixed had), and set the adjustment, to have the size of the layout fixed. </p>\n\n<p>Sorry about the confusion again in previous answer!</p>\n"}], "owner": {"reputation": 39, "user_id": 6473086, "user_type": "registered", "profile_image": "https://graph.facebook.com/1704872096439363/picture?type=large", "display_name": "Andrew Shao", "link": "https://stackoverflow.com/users/6473086/andrew-shao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 49661590, "answer_count": 2, "score": 1, "last_activity_date": 1522978725, "creation_date": 1522869293, "question_id": 49658732, "link": "https://stackoverflow.com/questions/49658732/gtk-3-when-widget-is-too-large", "title": "Gtk 3 when widget is too large", "body": "<p>I am kind of new to gtk 3.0 +, And I was wondering how do people deal with the case when the image size is too big. </p>\n\n<ol>\n<li><p>Is it possible to have a fixed size frame to display image(as far as I know, seems like the container size will change depend on widget size it holds, gtk_overlay seems to be possible, but I m not sure if there is other ways of doing this</p></li>\n<li><p>If step 1 is possible, when the image get too large, what is the idea of, under the fixed size area, when we move around the image, we could see different part of the image(other part that exceeds the area is not showing</p></li>\n</ol>\n"}, {"tags": ["javascript", "c++", "qt", "qjsengine"], "answers": [{"tags": [], "owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "is_accepted": false, "score": 1, "last_activity_date": 1522914622, "last_edit_date": 1522914622, "creation_date": 1522886499, "answer_id": 49662184, "question_id": 49658551, "link": "https://stackoverflow.com/questions/49658551/convert-qjsonobject-to-javascript-object/49662184#49662184", "title": "Convert QJsonObject to Javascript object", "body": "<p>Possibly, convert individual <code>QJsonObject</code> values to <code>QJSValue</code> using <code>toScriptValue()</code>, then concatenate them up to the <code>QJSValueList</code> .. and call <code>func</code> to append them up in one <code>QJSValue</code>.</p>\n\n<pre><code>QJSEngine myEngine;\nQJsonObject obj;\nobj[\"1\"] = QString(\"A\");\nobj[\"2\"] = QString(\"B\");\nobj[\"3\"] = QString(\"C\");\n\nQJSValue func = myEngine.evaluate(\"(function() {var args = Array.prototype.slice.call(arguments); var res='';for(i=0; i&lt;args.length; i++) {res += args[i]}; return res})\");\nQJSValueList args;\nfor (int i=0 ; i &lt; obj.size(); i++){\n    args &lt;&lt; myEngine.toScriptValue(obj.value(obj.keys().at(i)));\n}\nQJSValue res = func.call(args);\n</code></pre>\n\n<hr>\n\n<p>I am not sure though if this is the right thing you should do, because you can get the QJSValue directly as an object,</p>\n\n<pre><code>QJSValue res = myEngine.newObject();\nfor (int i=0; i&lt;args.length(); i++){\n    res.setProperty(i,args[i]);\n}\n</code></pre>\n\n<p>or a QJSValue array:</p>\n\n<pre><code>QJSValue objArray = myEngine.newArray(args.length());\nfor (int x=0; x&lt; args.length();x++){\n    objArray.setProperty(x,args[x]);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "is_accepted": false, "score": 3, "last_activity_date": 1530602811, "last_edit_date": 1530602811, "creation_date": 1530602196, "answer_id": 51148648, "question_id": 49658551, "link": "https://stackoverflow.com/questions/49658551/convert-qjsonobject-to-javascript-object/51148648#51148648", "title": "Convert QJsonObject to Javascript object", "body": "<p>I had a similar problem. I started going down the path of just walking the tree recursively from the QJsonValue and building a QJSValue from that.</p>\n\n<pre><code>QJSValue Convert(QJSEngine* engine, const QJsonValue&amp; val)\n{\n    if (val.isBool())\n    {\n        return QJSValue(val.toBool());\n    }\n    else if (val.isString())\n    {\n        return QJSValue(val.toString());\n    }\n    else if (val.isDouble())\n    {\n        return QJSValue(val.toDouble());\n    }\n    else if (val.isNull())\n    {\n        return QJSValue(QJSValue::NullValue);\n    }\n    else if (val.isUndefined())\n    {\n        return QJSValue(QJSValue::UndefinedValue);\n    }\n    else if (val.isObject())\n    {\n        QJsonObject obj = val.toObject();\n        QJSValue newobj = engine-&gt;newObject();\n        for (auto itor = obj.begin(); itor != obj.end(); itor++)\n        {\n            QString key = itor.key();\n            QJsonValue value = itor.value();\n            QJSValue convertedValue = Convert(engine, value);\n            newobj.setProperty(key, convertedValue);\n        }\n        return newobj;\n    }\n    else if (val.isArray())\n    {\n        QJsonArray arr = val.toArray();\n        QJSValue newobj = engine-&gt;newArray(arr.size());\n        for (int i = 0; i &lt; arr.size(); i++)\n        {\n            QJsonValue value = arr[i];\n            QJSValue convertedValue = Convert(engine, value);\n            newobj.setProperty(i, convertedValue);\n        }\n        return newobj;\n    }\n\n\n    // ASSERT(FALSE &amp;&amp; \"This shouldn't happen\");\n    return QJSValue(QJSValue::UndefinedValue);\n\n}\n</code></pre>\n\n<p>In the above code you could pass a QJsonObject or any other type of JSON node for conversion to a QJSValue.</p>\n\n<p>I'm currently going with something closer to your original solution - just invoke JSON.parse from the engine:</p>\n\n<pre><code>QJSValue func = engine-&gt;evaluate(\"JSON.parse\");\nQJSValueList args;\nargs.append(jsonText); // jsonText is a QString or QJSValue string\nQJSValue result = func.call(args);\nreturn result;\n</code></pre>\n"}], "owner": {"reputation": 1667, "user_id": 4490542, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8925b87f1bc4c6a3bc6956628c9d3b6f?s=128&d=identicon&r=PG&f=1", "display_name": "e.jahandar", "link": "https://stackoverflow.com/users/4490542/e-jahandar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1075, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1530602811, "creation_date": 1522868657, "last_edit_date": 1522894835, "question_id": 49658551, "link": "https://stackoverflow.com/questions/49658551/convert-qjsonobject-to-javascript-object", "title": "Convert QJsonObject to Javascript object", "body": "<p>As qt docs on <code>QJSValue</code>, <code>QJsonObject</code> ins't implicitly convertible to <code>QJSValue</code>, I want to call a javascript function with <code>QJSEngine</code> from C++, the arguments should be passed with <code>QList&lt;QJsValue&gt;</code> to call function of another <code>QJSValue</code> which holds the function itself.</p>\n\n<p>The problem is one of my arguments is <code>QJsonObject</code>, until now i am supposed to convert it to text then calling and passing it to the javascript function that calls to <code>JSON.parse</code> for converting it to object, i am looking for a solution that lets me convert <code>QJsonObject</code> into <code>QJSValue</code> in C++ and call javascript function with object arguments instead of json text.</p>\n\n<p>Currently the code is like something below</p>\n\n<pre><code>QJsonObject obj;\nobj[\"1\"] = QString(\"A\");\nobj[\"2\"] = QString(\"B\");\n\nQJSValue func = myEngine.evaluate(\"(function(arg) { var obj = JSON.parse(arg); var res = obj[\\\"1\\\"] + obj[\\\"2\\\"]; return res; })\");\nQJSValueList args;\nargs &lt;&lt; QString(QJsonDocument(obj).toJson());\nQJSValue res = func.call(args);\n</code></pre>\n\n<p>I would like to have a function like <code>QJSValue ConvertToQJSValue(QJsonObject object)</code> something like this :</p>\n\n<pre><code>QJsonObject obj;\nobj[\"1\"] = QString(\"A\");\nobj[\"2\"] = QString(\"B\");\n\nQJSValue func = myEngine.evaluate(\"(function(arg) { var res = arg[\\\"1\\\"] + arg[\\\"2\\\"];  return res; })\");\nQJSValueList args;\nargs &lt;&lt; ConvertToQJSValue(obj);\nQJSValue res = func.call(args);\n</code></pre>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 4, "creation_date": 1522868972, "post_id": 49658529, "comment_id": 86326558, "body": "i am already lost at <code>input += 1,2,...</code>."}, {"owner": {"reputation": 193, "user_id": 1688674, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e5cd494c63be43c3f73a5530f87d11f1?s=128&d=identicon&r=PG", "display_name": "wellnoidea", "link": "https://stackoverflow.com/users/1688674/wellnoidea"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1522869105, "post_id": 49658529, "comment_id": 86326648, "body": "@user463035818 Thanks for the solidarity, one normally has to be afraid to admit such things."}, {"owner": {"reputation": 193, "user_id": 1688674, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e5cd494c63be43c3f73a5530f87d11f1?s=128&d=identicon&r=PG", "display_name": "wellnoidea", "link": "https://stackoverflow.com/users/1688674/wellnoidea"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1523042030, "post_id": 49658529, "comment_id": 86412440, "body": "Effective searching: IDE to the rescue, Visual Studio Code using C/C++ (ms-vscode.cpptools) gives on hover the following tooltip: <code>boost::range_detail::filtered_range&lt;...&gt; boost::range_detail::operator|&lt;std::__1::vector&lt;int, std::__1::allocator&lt;int&gt;&gt;, is_even&gt;(std::__1::vector&lt;...&gt; &amp;r, const boost::range_detail::filter_holder&lt;...&gt; &amp;f)  +2 overloads </code>"}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1522956792, "post_id": 49659685, "comment_id": 86372048, "body": "+1 for quoting my highly qualified statement :P. To be honest I was almost certain that this code must be an april foolsday joke. Out of curiosity i tried to implement this <code>+= 1,2,3</code> stuff, it is surprisingly easy, but I agree that it obsolete, I would even say it is a not nice usage of operator overloading."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1522956872, "post_id": 49659685, "comment_id": 86372094, "body": "btw at least I was most interested in the &quot; If so, how does one effectively search for such operators in libraires like boost?&quot; part of the question, which you dont really adress in your answer"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1522967492, "post_id": 49659685, "comment_id": 86376724, "body": "@user463035818 You don&#39;t. You just look at the code, see <code>using namespace boost::assign</code> and go from there. It&#39;s questionable library design, though I understand people were in desperate need for succinct container initializers before c++11. (And, of course I don&#39;t address that part in my answer, because it was never part of the question, which was posted by someone else, even :))"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 4, "last_activity_date": 1522896785, "last_edit_date": 1522896785, "creation_date": 1522873019, "answer_id": 49659685, "question_id": 49658529, "link": "https://stackoverflow.com/questions/49658529/what-is-the-effect-of-the-pipe-operator-in-c-boostadaptorsfiltered/49659685#49659685", "title": "What is the effect of the pipe operator in c++ boost::adaptors::filtered?", "body": "<p>This is a <a href=\"https://www.boost.org/doc/libs/1_66_0/libs/range/doc/html/range/reference/adaptors/introduction.html\" rel=\"nofollow noreferrer\">Boost Range <strong>Adaptor</strong></a>. Some more documentation has been written in this <a href=\"https://theboostcpplibraries.com/boost.range-adaptors\" rel=\"nofollow noreferrer\">online book \"The Boost C++ Libraries\"</a>.</p>\n\n<p>There are many such ranges, which can be composed to write high-level functional effect. Examples are here:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/23579832/why-is-there-no-transform-if-in-the-c-standard-library/23579922#23579922\">Why is there no transform_if in the C++ standard library?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/7254131/is-it-possible-to-use-boostfilter-iterator-for-output/7254598#7254598\">Is it possible to use boost::filter_iterator for output?</a></li>\n</ul>\n\n<h2>The <code>filtered</code> adaptor</h2>\n\n<p><code>input | filtered(is_even())</code> creates a temporary instance of the adaptor type:</p>\n\n<pre><code>boost::range_detail::filtered_range&lt;is_even, std::vector&lt;int&gt; &gt;\n</code></pre>\n\n<p>That's a type that models the Range Concept and holds a reference to the source range (<code>input</code>) as well as a copy of the filter predicate (<code>is_even()</code>).</p>\n\n<p>The Range Concept is then implemented such that iteration of the range yields a bidirectional range as if it had only the elements of the source range that satisfy the filter predicate. You could equally write:</p>\n\n<pre><code>is_even predicate;\nfor (auto const&amp; i : input)\n    if (predicate(i))\n        std::cout &lt;&lt; i &lt;&lt; \",\";\n</code></pre>\n\n<p><code>range | adaptor</code> is an expression template that generates a new <em>adapted</em> range. </p>\n\n<h2>How/Why Does It Work With <code>|</code>?</h2>\n\n<p>The real answer is \"because that's how it's designed and documented\". The more technical explanation is because <code>filtered(is_even())</code> is of type <code>boost::range_detail::filter_holder&lt;is_even&gt;</code> which has an overloaded <code>operator |</code>:</p>\n\n<pre><code>template&lt; class SinglePassRange, class Predicate &gt;\ninline filtered_range&lt;Predicate, SinglePassRange&gt;\noperator|(SinglePassRange&amp; r,\n          const filter_holder&lt;Predicate&gt;&amp; f)\n{\n    BOOST_RANGE_CONCEPT_ASSERT((SinglePassRangeConcept&lt;SinglePassRange&gt;));\n    return filtered_range&lt;Predicate, SinglePassRange&gt;( f.val, r );\n}\n</code></pre>\n\n<blockquote>\n  <p>Note: The assert only verifies the <strong>minimum</strong> required traversal category. As documented you'll get <a href=\"https://www.boost.org/doc/libs/1_49_0/libs/range/doc/html/range/reference/adaptors/reference/filtered.html\" rel=\"nofollow noreferrer\">\"The minimum of the range category of rng and Bidirectional Range\"</a>, which is a Bidirectional Range in this case (because vector has random traversal).</p>\n</blockquote>\n\n<h2>The Other Thing</h2>\n\n<blockquote>\n  <p>I am already lost at input += 1,2,.... \u2013 user463035818 56 mins ago</p>\n</blockquote>\n\n<p>That's Boost Assign, unrelated to the range adaptor, I'd venture that C++11 makes it largely obsolete, because you can easily say</p>\n\n<pre><code>std::vector&lt;int&gt; input { 1, 2, 3, 4, 5, 6, 7, 8, 9 };\n</code></pre>\n\n<p>Or indeed</p>\n\n<pre><code>std::vector&lt;int&gt; input;\ninput.insert(input.end(), { 1, 2, 3, 4, 5, 6, 7, 8, 9 });\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 1688674, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e5cd494c63be43c3f73a5530f87d11f1?s=128&d=identicon&r=PG", "display_name": "wellnoidea", "link": "https://stackoverflow.com/users/1688674/wellnoidea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1404, "favorite_count": 2, "accepted_answer_id": 49659685, "answer_count": 1, "score": 6, "last_activity_date": 1522896785, "creation_date": 1522868583, "question_id": 49658529, "link": "https://stackoverflow.com/questions/49658529/what-is-the-effect-of-the-pipe-operator-in-c-boostadaptorsfiltered", "title": "What is the effect of the pipe operator in c++ boost::adaptors::filtered?", "body": "<p>In <a href=\"https://www.boost.org/doc/libs/1_49_0/libs/range/doc/html/range/reference/adaptors/reference/filtered.html\" rel=\"noreferrer\"><code>boost::adaptors::filtered</code></a> the filter function is used likeso:</p>\n\n<pre><code>std::vector&lt;int&gt; input;\ninput += 1,2,3,4,5,6,7,8,9;\n\nboost::copy(\n        input | filtered(is_even()),\n        std::ostream_iterator&lt;int&gt;(std::cout, \",\"));\n</code></pre>\n\n<p>What is the effect of the pipe operator in this case? It is not defined for <code>std::vector</code>, is it an overload? If so, how does one effectively search for such operators in libraires like boost?</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1522870935, "post_id": 49658327, "comment_id": 86327652, "body": "You have some arbitrary points in 3D which are in a coordinate system with the origin somewhere. This rvec and tvec will be the transformation from this origin somewhere (call it local or world coordinates) to the camera. Ideally the camera will end facing the points so they can be projected in the image plane. If it is local coordinates then the origin is in the object (probably a corner or something) if it is world coordinates, the origin is in some arbitrary place (maybe even at the camera and the transformation is identity)"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1522872501, "post_id": 49658327, "comment_id": 86328613, "body": "If I were you, I would try to find it out experimentally by inserting known values for either case and check assumed outcome. Be aware that the 3D coordinate system might not be what you expect, the y axis is pointing downwards."}, {"owner": {"reputation": 1, "user_id": 7588628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b437fb79aa1bcc3fcc5831a781d7fc2?s=128&d=identicon&r=PG&f=1", "display_name": "Aly", "link": "https://stackoverflow.com/users/7588628/aly"}, "reply_to_user": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1526314610, "post_id": 49658327, "comment_id": 87685825, "body": "Thanks, @api55. That was helpful"}], "owner": {"reputation": 1, "user_id": 7588628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b437fb79aa1bcc3fcc5831a781d7fc2?s=128&d=identicon&r=PG&f=1", "display_name": "Aly", "link": "https://stackoverflow.com/users/7588628/aly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 734, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1522867836, "creation_date": 1522867836, "question_id": 49658327, "link": "https://stackoverflow.com/questions/49658327/understanding-projectpoints-opencv-c", "title": "Understanding projectPoints (OpenCV C++)", "body": "<p>I am currently working on a project, in which I have a simulation environment (Gazebo based). This simulation has a virtual camera and an object, which I am tracking. </p>\n\n<p>I am trying to put a bounding box around an object's image that I receive from the camera without using any CV algorithms, which is an easy task considering that I know exact position of the object in space and I can find out camera matrix, but I am failing to understand <code>cv::projectPoints(InputArray objectPoints, InputArray rvec, InputArray tvec, InputArray cameraMatrix, InputArray distCoeffs, OutputArray imagePoints)</code> function. </p>\n\n<p><code>InputArray objectPoints</code> is an array of object points that I want to project. But I fail to understand <strong>in which coordinate system</strong>:</p>\n\n<ul>\n<li>Some tutorials seems to define them in <strong>local coordinates</strong> of an object, which means that <code>rvec</code> and <code>tvec</code> define rotation and translation (in camera coordinates) <strong>of the object</strong> in space. </li>\n<li>In different sources, <code>rvec</code> and <code>tvec</code> stand for rotation and translation <strong>of the camera</strong> in the world coordinates and therefore <code>objectPoints</code> are defined in <strong>world coordinates</strong>.</li>\n</ul>\n\n<p>Which approach is the right one? </p>\n"}, {"tags": ["c++", "visual-studio-2008", "crypto++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1522867927, "post_id": 49658309, "comment_id": 86325939, "body": "Yes there are <i>two</i> solutions: 1) You ask the author to fix them by reporting them as bugs. 2) You fix them yourself and <i>then</i> report them to the author together with your fixes. The library is, after all, open source with a <a href=\"https://github.com/weidai11/cryptopp\" rel=\"nofollow noreferrer\">GitHub repository</a> where you can create a fork and then push-requests for your changes."}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1522868049, "post_id": 49658309, "comment_id": 86326006, "body": "@Someprogrammerdude: Yes, I was thinking to go into fixing them myself. Unfortunately that project is quite large, so I don&#39;t want to mess something up in crypto that way."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1522868075, "post_id": 49658309, "comment_id": 86326028, "body": "Your compiler is several versions too old for <code>extern template</code>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1522868819, "post_id": 49658309, "comment_id": 86326474, "body": "&quot;my Visual Studio 2008&quot; - word of advice; get yourself a compiler that&#39;s less than 10 years old."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1522868935, "post_id": 49658309, "comment_id": 86326538, "body": "The compiler warns you that <code>extern template</code> <a href=\"https://stackoverflow.com/a/8133000/597607\">was a non-standard extension in 2008</a>. In C++11 there now <i>is</i> a standardized feature <a href=\"http://en.cppreference.com/w/cpp/language/class_template\" rel=\"nofollow noreferrer\">extern template</a>. The features seem to work <i>just about</i> the same, but not exactly."}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1522869045, "post_id": 49658309, "comment_id": 86326609, "body": "@JesperJuhl: OK, it&#39;s off topic here, but why is VS2018 bad? OK, it&#39;s 10 yrs old, but at least it loads in a flash, doesn&#39;t take GBs of disk space to install, doesn&#39;t want me to log in with my Microsoft account to work, and best of all, doesn&#39;t produce over-bloated executables just to name a few."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1522869470, "post_id": 49658309, "comment_id": 86326858, "body": "@c00000fd it also doen&#39;t support modern C++ (the most important point), has an inferior optimizer compared to newer versions and is no longer supported by MS (as far as I know)."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1522869799, "post_id": 49658309, "comment_id": 86327036, "body": "Visual studio warns of <code>this</code> in member initializer lists because <code>this</code> isn&#39;t done initializing yet and bad things could happen if you do more than just store <code>this</code>. I&#39;m not sure you can get rid of that error without manually verifying that all uses of this in the initializer lists is safe and turning it off. The rest of it probably is the new library version is assuming you have a compiler supporting the more recent standards. MSVS 2015 might be as early as you can go."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1522915650, "post_id": 49658309, "comment_id": 86344248, "body": "@c00000fd - We tried to remove the warnings some time ago. We don&#39;t know how to fix some of them. Some attempts to fix the early VS warnings broke other compilers, like Clang on OS X. Also see <a href=\"https://github.com/weidai11/cryptopp/issues/412\" rel=\"nofollow noreferrer\">Issue 412, Crypto++ messes with user&#39;s warning config</a>, where we backed-off on the warnings we suppress."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1522915810, "post_id": 49658309, "comment_id": 86344360, "body": "@c00000fd - Also, in the case of the socket code above, you can just delete the source files if you are not using them. We are contemplating removing them from the library proper since they are not crypto related. Also see <a href=\"https://github.com/weidai11/cryptopp/issues/208\" rel=\"nofollow noreferrer\">Issue 208, Investigate moving OS specific Socket and Thread to the Patch Page</a>"}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1522915953, "post_id": 49658309, "comment_id": 86344435, "body": "@jww: Thanks for your reply. You know it&#39;s somewhat tricky to remove something w/o knowing alot about the library. As for <code>m_sender(*this)</code> part where you instantiate it like that in the constructor, it is just wrong and may lead to crashes, like it was pointed out above."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1522917352, "post_id": 49658309, "comment_id": 86345304, "body": "Thanks @c00000fd. I think <code>m_sender(*this)</code> is just stashing away a reference for future use. But we would be happy to entertain patches for it (especially if we are wandering into UB)."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1522919212, "post_id": 49658309, "comment_id": 86346588, "body": "These warnings are produced by /Wall.  You don&#39;t like all of them.  Use /W3 or /W4."}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1522955507, "post_id": 49658309, "comment_id": 86371300, "body": "@jww: I was able to resolve <code>this : used in base member initializer list</code> warnings by excluding the following from the project: <code>socketft.h</code>, <code>socketft.cpp</code>, <code>ida.h</code>, <code>ida.cpp</code>. That last one, what does it do?"}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "edited": false, "score": 0, "creation_date": 1522955515, "post_id": 49658309, "comment_id": 86371304, "body": "Also what to do with these warnings: <code>warning C4505: &#39;CryptoPP::AuthenticatedSymmetricCipher::AlgorithmName&#39; : unreferenced local function has been removed</code>. I <a href=\"https://stackoverflow.com/q/8107844/670017\">found this page</a> that deals with the same issue, but for me, I don&#39;t want to disable it on the global scale for my entire project."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1523215200, "post_id": 49658309, "comment_id": 86456781, "body": "@c00000fd - Crypto++ 7.0 was released this weekend. It includes <a href=\"https://github.com/weidai11/cryptopp/commit/62a9574f3fd6\" rel=\"nofollow noreferrer\">Commit 62a9574f3fd6</a>, which should squash the Visual Studio complaint about <code>AuthenticatedSymmetricCipher::AlgorithmName</code>."}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1523226976, "post_id": 49658309, "comment_id": 86460485, "body": "@jww: Oh, great. Thanks. I&#39;ll check it out tomorrow. You guys are cranking those out so quickly that it&#39;s hard to keep up. Which kinda concerns me. Say, if we compile our project with one version of cryptopp library, do you have a mailing list or something that can notify us of any critical vulnerabilities in that version that could be found later, and most importantly in which particular class those were found in?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1523228588, "post_id": 49658309, "comment_id": 86460908, "body": "@c00000fd - Crypto++ 7.0 was unplanned. We planned on riding Crypto++ 6.1 for a year or so.  Crypto++ 7.0 was released to clear a memory error. I wanted it off the books to stop potential attacks. If you want another C++ security library, then try <a href=\"https://botan.randombit.net/\" rel=\"nofollow noreferrer\">Jack Lloyd&#39;s Botan</a>. The mailing lists are at <a href=\"https://www.cryptopp.com/#lists\" rel=\"nofollow noreferrer\">Crypto++ Home Page | Mailing Lists</a>. The memory error was announced at <a href=\"https://groups.google.com/d/msg/cryptopp-users/AudO2yrAeuw/2oxSbu8OAwAJ\" rel=\"nofollow noreferrer\">Crypto++ 6.2 release</a>. We are fully transparent. There are no special lists."}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "edited": false, "score": 0, "creation_date": 1523237282, "post_id": 49658309, "comment_id": 86462806, "body": "Thanks. And, no, I think I&#39;ll stick with Crypto++ for now. I&#39;m somewhat invested in it too. I dug into some classed and checked them to be implemented &quot;right&quot; (for my liking.) What I like the most about Crypto++ is that it doesn&#39;t go crazy of the latest C++ trends and can be compiled with older versions of IDEs. VS2008 in my case. And also that (until this post) it used to compile very cleanly without any muted warnings or other cutting of corners. But like I said, I&#39;ll check v.7.0 next week."}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1523429003, "post_id": 49658309, "comment_id": 86551548, "body": "@jww: Hmm. I&#39;m not sure what to think about v.7.0. I&#39;ve been trying to compile it for the last 2 days. It still has the same <code>this : used in base member initializer list</code> bug, which I can resolve by excluding <code>socketft</code> and <code>ida</code> files from the project. But now I&#39;m <a href=\"https://i.imgur.com/bBkQr0Q.png\" rel=\"nofollow noreferrer\">getting linker errors</a> of unresolved external symbols when trying to compile a test project with the <code>.lib</code> file from v.7.0."}], "owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1522915327, "creation_date": 1522867750, "last_edit_date": 1522915327, "question_id": 49658309, "link": "https://stackoverflow.com/questions/49658309/resolution-for-63-warnings-when-compiling-crypto-and-visual-studio", "title": "Resolution for 63 warnings when compiling Crypto++ and Visual Studio", "body": "<p>I had Crypto++ library v.5.6.2 in one of my projects. It used to compile (as a static <code>.lib</code>) very cleanly.</p>\n\n<p>Now I see the need to upgrade to the <a href=\"https://www.cryptopp.com/#download\" rel=\"nofollow noreferrer\">latest available version 6.1.0</a> with Visual Studio 2008, but when I tried to compile it gave me 63 warning messages listed below.</p>\n\n<p>I know those are just warnings and many people ignore them. I personally <strong>do not</strong>.</p>\n\n<p>So I was wondering if there's a resolution for those?</p>\n\n<pre><code>Building and assembling rdrand.asm\n Assembling: c:\\Users\\User\\C++\\cryptopp610\\rdrand.asm\nPerforming Custom Build Step\n        1 file(s) copied.\nCompiling...\npch.cpp\nc:\\users\\User\\c++\\cryptopp610\\cryptlib.h(1318) : warning C4505: 'CryptoPP::AuthenticatedSymmetricCipher::AlgorithmName' : unreferenced local function has been removed\nCompiling...\nvmac.cpp\ntwofish.cpp\nttmac.cpp\ntrdlocal.cpp\ntigertab.cpp\ntiger.cpp\ntftables.cpp\ntea.cpp\nstrciphr.cpp\nsquaretb.cpp\nsquare.cpp\nsosemanuk.cpp\nsocketft.cpp\nc:\\users\\User\\c++\\cryptopp610\\socketft.h(197) : warning C4355: 'this' : used in base member initializer list\nc:\\users\\User\\c++\\cryptopp610\\socketft.h(213) : warning C4355: 'this' : used in base member initializer list\nskipjack.cpp\nsimple.cpp\nsharkbox.cpp\nshark.cpp\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(409) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(410) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(411) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nshacal2.cpp\nsha3.cpp\nsha.cpp\nCompiling...\nserpent.cpp\nseed.cpp\nseal.cpp\nsalsa.cpp\nsafer.cpp\nrw.cpp\nrsa.cpp\nc:\\users\\User\\c++\\cryptopp610\\oaep.h(50) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nrng.cpp\nripemd.cpp\nrijndael.cpp\nrdtables.cpp\nrdrand.cpp\nrc6.cpp\nrc5.cpp\nrc2.cpp\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(409) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(410) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(411) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nrandpool.cpp\nrabin.cpp\nc:\\users\\User\\c++\\cryptopp610\\oaep.h(50) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nqueue.cpp\npubkey.cpp\npssr.cpp\nCompiling...\npolynomi.cpp\npoly1305.cpp\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(409) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(410) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(411) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\npkcspad.cpp\npanama.cpp\nosrng.cpp\nc:\\users\\User\\c++\\cryptopp610\\osrng.h(256) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\noaep.cpp\nc:\\users\\User\\c++\\cryptopp610\\oaep.h(50) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nnetwork.cpp\nnbtheory.cpp\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(409) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(410) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(411) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nmqv.cpp\nmqueue.cpp\nmodes.cpp\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(409) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(410) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(411) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nmisc.cpp\nmd5.cpp\nmd4.cpp\nmd2.cpp\nmarss.cpp\nmars.cpp\nluc.cpp\nc:\\users\\User\\c++\\cryptopp610\\oaep.h(50) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\dh.h(169) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nkeccak.cpp\ninteger.cpp\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(409) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(410) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(411) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nCompiling...\nidea.cpp\nida.cpp\nc:\\users\\User\\c++\\cryptopp610\\ida.h(73) : warning C4355: 'this' : used in base member initializer list\nc:\\users\\User\\c++\\cryptopp610\\ida.h(121) : warning C4355: 'this' : used in base member initializer list\nhrtimer.cpp\nhmac.cpp\nhex.cpp\ngzip.cpp\ngost.cpp\ngfpcrypt.cpp\ngf2n.cpp\ngf2_32.cpp\ngf256.cpp\ngcm.cpp\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(409) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(410) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(411) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nfipstest.cpp\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(409) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(410) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(411) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\dh.h(169) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\ecpoint.h(49) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\ecpoint.h(82) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\osrng.h(256) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\oaep.h(50) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nfips140.cpp\nfilters.cpp\nfiles.cpp\nesign.cpp\nemsa2.cpp\nelgamal.cpp\necp.cpp\nc:\\users\\User\\c++\\cryptopp610\\ecpoint.h(49) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\ecpoint.h(82) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nCompiling...\nec2n.cpp\nc:\\users\\User\\c++\\cryptopp610\\ecpoint.h(49) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\ecpoint.h(82) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\neax.cpp\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(409) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(410) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(411) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\ndsa.cpp\ndh2.cpp\ndh.cpp\nc:\\users\\User\\c++\\cryptopp610\\dh.h(169) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\ndessp.cpp\ndes.cpp\ndefault.cpp\ncryptlib.cpp\nc:\\users\\User\\c++\\cryptopp610\\osrng.h(256) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\ncrc.cpp\ncpu.cpp\ncmac.cpp\nchannels.cpp\nchacha.cpp\nccm.cpp\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(409) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(410) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(411) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\ncbcmac.cpp\ncasts.cpp\ncast.cpp\ncamellia.cpp\nblumshub.cpp\nCompiling...\nblowfish.cpp\nblake2.cpp\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(409) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(410) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(411) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nbfinit.cpp\nbasecode.cpp\nbase64.cpp\nbase32.cpp\nauthenc.cpp\nasn.cpp\narc4.cpp\nalgparam.cpp\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(409) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(410) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(411) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nalgebra.cpp\nadler32.cpp\nCompiling...\n3way.cpp\nzlib.cpp\nzinflate.cpp\nzdeflate.cpp\nxtrcrypt.cpp\nxtr.cpp\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(409) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(410) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nc:\\users\\User\\c++\\cryptopp610\\algparam.h(411) : warning C4231: nonstandard extension used : 'extern' before template explicit instantiation\nwinpipes.cpp\nwhrlpool.cpp\nwake.cpp\nwait.cpp\nCompiling...\niterhash.cpp\nc:\\users\\User\\c++\\cryptopp610\\cryptlib.h(1318) : warning C4505: 'CryptoPP::AuthenticatedSymmetricCipher::AlgorithmName' : unreferenced local function has been removed\ndll.cpp\nc:\\users\\User\\c++\\cryptopp610\\cryptlib.h(1318) : warning C4505: 'CryptoPP::AuthenticatedSymmetricCipher::AlgorithmName' : unreferenced local function has been removed\nCreating library...\nResults \n\n\nBuild log was saved at \"file://c:\\Users\\User\\C++\\cryptopp610\\Win32\\cryptlib\\Debug\\BuildLog.htm\"\ncryptlib - 0 error(s), 63 warning(s)\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT:</strong> Here's one of those <code>warning C4355: 'this' : used in base member initializer list</code> where <code>m_sender</code> is being initialized in constructor:</p>\n\n<pre><code>/// socket-based implementation of NetworkSink\nclass SocketSink : public NetworkSink, public Socket\n{\npublic:\n    SocketSink(socket_t s=INVALID_SOCKET, unsigned int maxBufferSize=0, unsigned int autoFlushBound=16*1024)\n        : NetworkSink(maxBufferSize, autoFlushBound), Socket(s), m_sender(*this) {}\n\n    void SendEof() {ShutDown(SD_SEND);}\n\nprivate:\n    NetworkSender &amp; AccessSender() {return m_sender;}\n    SocketSender m_sender;\n};\n</code></pre>\n\n<p>Although while trying to correct it by doing this:</p>\n\n<pre><code>class SocketSink : public NetworkSink, public Socket\n{\npublic:\n    SocketSink(socket_t s=INVALID_SOCKET, unsigned int maxBufferSize=0, unsigned int autoFlushBound=16*1024)\n        : NetworkSink(maxBufferSize, autoFlushBound), Socket(s)\n    {\n        m_sender = *this;\n    }\n\n    void SendEof() {ShutDown(SD_SEND);}\n\nprivate:\n    NetworkSender &amp; AccessSender() {return m_sender;}\n    SocketSender m_sender;\n};\n</code></pre>\n\n<p>I get this error. But I'm not really that familiar with this library to make an assignment constructor myself:</p>\n\n<pre><code>error C2512: 'CryptoPP::SocketSender' : no appropriate default constructor available\nerror C2582: 'operator =' function is unavailable in 'CryptoPP::SocketSender'\n</code></pre>\n\n<p>So yeah, if anyone familiar with Crypto++ can help me with those, I'd appreciate it. There's too many bugs like this.</p>\n"}, {"tags": ["c++", "inheritance"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1522867501, "post_id": 49658236, "comment_id": 86325672, "body": "You likely forgot to include the header containing the forward declared type in your implementation files."}, {"owner": {"reputation": 47, "user_id": 6704442, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cbece7d4bc51239976baf80fabbd434a?s=128&d=identicon&r=PG&f=1", "display_name": "Kamil Turek", "link": "https://stackoverflow.com/users/6704442/kamil-turek"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1522923172, "post_id": 49658236, "comment_id": 86349363, "body": "@Fran&#231;oisAndrieux Yeah, I was making forward declaration in header file and then I should include in cpp header to class that I want to refer. Problem solved. Thanks."}], "owner": {"reputation": 47, "user_id": 6704442, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cbece7d4bc51239976baf80fabbd434a?s=128&d=identicon&r=PG&f=1", "display_name": "Kamil Turek", "link": "https://stackoverflow.com/users/6704442/kamil-turek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "closed_date": 1522867618, "answer_count": 0, "score": 0, "last_activity_date": 1522867427, "creation_date": 1522867427, "question_id": 49658236, "link": "https://stackoverflow.com/questions/49658236/how-to-create-two-classes-including-each-other-with-inheritance", "closed_reason": "Duplicate", "title": "How to create two classes including each other with inheritance?", "body": "<p>I have just seen similar <a href=\"https://stackoverflow.com/questions/4964482/how-to-create-two-classes-in-c-which-use-each-other-as-data/4964508\">question</a> but that doesn't solve my problem, because I'm struggling with inheritance. That's how my simplified code looks:</p>\n\n<p>Game.h</p>\n\n<pre><code>#include \"Ghost.h\"\n\nclass Game\n{\n   Ghost * myGhost;\n};\n</code></pre>\n\n<p>Ghost.h</p>\n\n<pre><code>#include \"MovableItem.h\"\n\nclass Ghost : public MovableItem\n{\n   Ghost(Game * parentGame) : MovableItem(parentGame)\n   {\n   }\n};\n</code></pre>\n\n<p>MovableItem.h</p>\n\n<pre><code>class MovableItem\n{\n   MovableItem(Game * parentGame);\n};\n</code></pre>\n\n<p>When I'm trying to use forward declaration of class Game, I get 'invalid use of incomplete type class Game' compilation error and without that declaration I get 'Game does not name a type'. How can I solve that problem? Thanks for advance.</p>\n"}, {"tags": ["c++", "templates", "boost", "floating-point", "integer-overflow"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1522867407, "post_id": 49658182, "comment_id": 86325616, "body": "No, there is no numeric cast in Standard Library. As for non-boost implementation, boost is open-source, you can take implementation from boost and use it as is."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1522867511, "post_id": 49658182, "comment_id": 86325677, "body": "Naturally, if you do take the implementation from boost and use it like @SergeyA suggests, you still need to comply with the open source license that Boost uses."}, {"owner": {"reputation": 26039, "user_id": 245265, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/416db680915c487cfe3349aeb498ce44?s=128&d=identicon&r=PG", "display_name": "Emile Cormier", "link": "https://stackoverflow.com/users/245265/emile-cormier"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1577845397, "post_id": 49658182, "comment_id": 105268392, "body": "@SergeyA I checked the Boost implementation, and it&#39;s unfortunately not as simple as copying a header file."}], "answers": [{"comments": [{"owner": {"reputation": 15897, "user_id": 11722, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b0124a12d060a036500e83ec44972492?s=128&d=identicon&r=PG", "display_name": "Zitrax", "link": "https://stackoverflow.com/users/11722/zitrax"}, "edited": false, "score": 0, "creation_date": 1546176628, "post_id": 49658950, "comment_id": 94793466, "body": "This compiles with -Wconversion in g++ as mentioned, but not in clang. See <a href=\"https://godbolt.org/z/MMaFny\" rel=\"nofollow noreferrer\">godbolt.org/z/MMaFny</a>"}, {"owner": {"reputation": 15897, "user_id": 11722, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b0124a12d060a036500e83ec44972492?s=128&d=identicon&r=PG", "display_name": "Zitrax", "link": "https://stackoverflow.com/users/11722/zitrax"}, "edited": false, "score": 0, "creation_date": 1546180151, "post_id": 49658950, "comment_id": 94794312, "body": "In addition g++ &gt; 4.8.5 can also warn due to <code>-Wsign-compare</code> which is added by <code>-Wall</code>."}, {"owner": {"reputation": 26039, "user_id": 245265, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/416db680915c487cfe3349aeb498ce44?s=128&d=identicon&r=PG", "display_name": "Emile Cormier", "link": "https://stackoverflow.com/users/245265/emile-cormier"}, "edited": false, "score": 0, "creation_date": 1577847437, "post_id": 49658950, "comment_id": 105268546, "body": "Shouldn&#39;t <code>negative_overflow_possible</code> simply be <code>std::numeric_limits&lt;Dst&gt;::lowest() &gt; std::numeric_limits&lt;Src&gt;::lowest()</code>? I don&#39;t understand the need for the <code>std::numeric_limits&lt;Src&gt;::is_signed or</code> part."}, {"owner": {"reputation": 26039, "user_id": 245265, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/416db680915c487cfe3349aeb498ce44?s=128&d=identicon&r=PG", "display_name": "Emile Cormier", "link": "https://stackoverflow.com/users/245265/emile-cormier"}, "edited": false, "score": 0, "creation_date": 1577848148, "post_id": 49658950, "comment_id": 105268590, "body": "I think you meant <b>and</b> not <b>or</b>, so <code>negative_overflow_possible = std::numeric_limits&lt;Src&gt;::is_signed and ...</code>  I presume the <code>std::numeric_limits&lt;Src&gt;::is_signed and</code> part is intended for short-circuiting the evaluation of the following <code>std::numeric_limits&lt;Dst&gt;::lowest() &gt; std::numeric_limits&lt;Src&gt;::lowest()</code> expression."}, {"owner": {"reputation": 26039, "user_id": 245265, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/416db680915c487cfe3349aeb498ce44?s=128&d=identicon&r=PG", "display_name": "Emile Cormier", "link": "https://stackoverflow.com/users/245265/emile-cormier"}, "edited": false, "score": 0, "creation_date": 1577850779, "post_id": 49658950, "comment_id": 105268798, "body": "Unless I missed something, I also noticed that the four outer if..else if clauses are redundant. The logic can be greatly simplified."}, {"owner": {"reputation": 15365, "user_id": 52074, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dd14249e07e1f1d6a949bffa569377ad?s=128&d=identicon&r=PG", "display_name": "Trevor Boyd Smith", "link": "https://stackoverflow.com/users/52074/trevor-boyd-smith"}, "reply_to_user": {"reputation": 26039, "user_id": 245265, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/416db680915c487cfe3349aeb498ce44?s=128&d=identicon&r=PG", "display_name": "Emile Cormier", "link": "https://stackoverflow.com/users/245265/emile-cormier"}, "edited": false, "score": 0, "creation_date": 1578937876, "post_id": 49658950, "comment_id": 105593882, "body": "@EmileCormier at the moment i can&#39;t verify whether your comments/edits are right or wrong because verifying would take more time that i have at the moment. at the very least i would have to find the code that runs all the test cases."}, {"owner": {"reputation": 26039, "user_id": 245265, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/416db680915c487cfe3349aeb498ce44?s=128&d=identicon&r=PG", "display_name": "Emile Cormier", "link": "https://stackoverflow.com/users/245265/emile-cormier"}, "edited": false, "score": 0, "creation_date": 1578941011, "post_id": 49658950, "comment_id": 105595279, "body": "@TrevorBoydSmith Your example was still useful as a starting point, and I thank you for it."}], "tags": [], "owner": {"reputation": 15365, "user_id": 52074, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dd14249e07e1f1d6a949bffa569377ad?s=128&d=identicon&r=PG", "display_name": "Trevor Boyd Smith", "link": "https://stackoverflow.com/users/52074/trevor-boyd-smith"}, "is_accepted": false, "score": 3, "last_activity_date": 1577848583, "last_edit_date": 1577848583, "creation_date": 1522870035, "answer_id": 49658950, "question_id": 49658182, "link": "https://stackoverflow.com/questions/49658182/does-c-have-an-equivalent-boostnumeric-castdesttypesourcetype/49658950#49658950", "title": "does c++ have an equivalent boost::numeric_cast&lt;DestType&gt;(SourceType)?", "body": "<p><strong><a href=\"https://stackoverflow.com/questions/49658182/does-c-have-an-equivalent-boostnumeric-castdesttypesourcetype#comment86325616_49658182\">As @SergeyA stated</a>, no the standard C++ spec does not currently have an equivalent to Boost's <code>boost::numeric_cast&lt;typename Destination&gt;(Source value)</code>.</strong></p>\n\n<p>Here is a straight-forward implementation that uses only standard C++:</p>\n\n<pre><code>template&lt;typename Dst, typename Src&gt;\ninline Dst numeric_cast(Src value)\n{\n    typedef std::numeric_limits&lt;Dst&gt; DstLim;\n    typedef std::numeric_limits&lt;Src&gt; SrcLim;\n\n    const bool positive_overflow_possible = DstLim::max() &lt; SrcLim::max();\n    const bool negative_overflow_possible =\n            SrcLim::is_signed\n            or\n            (DstLim::lowest() &gt; SrcLim::lowest());\n\n    // unsigned &lt;-- unsigned\n    if((not DstLim::is_signed) and (not SrcLim::is_signed)) {\n        if(positive_overflow_possible and (value &gt; DstLim::max())) {\n            throw std::overflow_error(__PRETTY_FUNCTION__ +\n                                      std::string(\": positive overflow\"));\n        }\n    }\n    // unsigned &lt;-- signed\n    else if((not DstLim::is_signed) and SrcLim::is_signed) {\n        if(positive_overflow_possible and (value &gt; DstLim::max())) {\n            throw std::overflow_error(__PRETTY_FUNCTION__ +\n                                      std::string(\": positive overflow\"));\n        }\n        else if(negative_overflow_possible and (value &lt; 0)) {\n            throw std::overflow_error(__PRETTY_FUNCTION__ +\n                                      std::string(\": negative overflow\"));\n        }\n\n    }\n    // signed &lt;-- unsigned\n    else if(DstLim::is_signed and (not SrcLim::is_signed)) {\n        if(positive_overflow_possible and (value &gt; DstLim::max())) {\n            throw std::overflow_error(__PRETTY_FUNCTION__ +\n                                      std::string(\": positive overflow\"));\n        }\n    }\n    // signed &lt;-- signed\n    else if(DstLim::is_signed and SrcLim::is_signed) {\n        if(positive_overflow_possible and (value &gt; DstLim::max())) {\n            throw std::overflow_error(__PRETTY_FUNCTION__ +\n                                      std::string(\": positive overflow\"));\n        } else if(negative_overflow_possible and (value &lt; DstLim::lowest())) {\n            throw std::overflow_error(__PRETTY_FUNCTION__ +\n                                      std::string(\": negative overflow\"));\n        }\n    }\n\n    // limits have been checked, therefore safe to cast\n    return static_cast&lt;Dst&gt;(value);\n} \n</code></pre>\n\n<p>notes:</p>\n\n<ul>\n<li>compiler is g++ version 4.8.5.</li>\n<li>compiler flags:\n\n<ul>\n<li>-std=c++0x</li>\n<li>-O0</li>\n<li>-g3</li>\n<li>-pedantic</li>\n<li>-pedantic-errors</li>\n<li>-Wall</li>\n<li>-Wextra</li>\n<li>-Werror</li>\n<li>-Wconversion</li>\n<li>-c</li>\n<li>-fmessage-length=0</li>\n<li>-Wsign-conversion</li>\n<li>-fPIC</li>\n<li>-MMD</li>\n<li>-MP</li>\n</ul></li>\n<li>for floating point types you can't use <code>std::numeric_limits&lt;float&gt;::min()</code> but instead must use <code>std::numeric_limits&lt;Dst&gt;::lowest()</code> because <code>::min</code> returns is 1e-38 instead of a negative floating point value</li>\n<li>lots of the <code>std::numeric_limits</code> are const expressions and so the compiler will be able to greatly simplify this at compile time (i.e. N if statements will be reduced to one if-statement at compile time or none)</li>\n</ul>\n"}], "owner": {"reputation": 15365, "user_id": 52074, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dd14249e07e1f1d6a949bffa569377ad?s=128&d=identicon&r=PG", "display_name": "Trevor Boyd Smith", "link": "https://stackoverflow.com/users/52074/trevor-boyd-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1336, "favorite_count": 1, "answer_count": 1, "score": 8, "last_activity_date": 1577848583, "creation_date": 1522867228, "question_id": 49658182, "link": "https://stackoverflow.com/questions/49658182/does-c-have-an-equivalent-boostnumeric-castdesttypesourcetype", "title": "does c++ have an equivalent boost::numeric_cast&lt;DestType&gt;(SourceType)?", "body": "<p>I am doing a bunch of applied-mathematics/signal-processing/algorithms C++ code.</p>\n\n<p>I have enabled the <code>-Wconversion</code> compiler warning to catch issues like runtime conversion of numbers that are type <code>double</code> to type <code>int32_t</code>.</p>\n\n<p>Obviously I am always concerned during these conversions because:</p>\n\n<ul>\n<li>loss of the numbers decimal value</li>\n<li>possible positive or negative overflow (\"positive overflow\" is when a double has a value greater than INT32_MAX and tries to store that value in the destination type (<code>int32_t</code> in this case))</li>\n</ul>\n\n<p>Whenever I am concerned about such a conversion I usually use the one-liner check: </p>\n\n<pre><code>boost::numeric_cast&lt;DestType&gt;(SourceType)\n</code></pre>\n\n<p>However I would like to do the same thing without <code>boost</code>.</p>\n\n<p><strong>Does straight C++ have an equivalent <code>boost::numeric_cast&lt;DestType&gt;(SourceType)</code>?</strong></p>\n\n<p><strong>If straight C++ does not have an equivalent, what would be a comparable non-<code>boost</code> implementation?</strong></p>\n\n<p>I would think a somewhat comparable check would be basically a template function that has a single if statement to check the input parameter against positive or negative overflow (by using the <code>std::numeric_limits&lt;DestType&gt;</code> <code>::max()</code> and <code>::min()</code> and throws an exception).</p>\n"}, {"tags": ["c++", "memory", "dynamic", "allocation"], "comments": [{"owner": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 1, "creation_date": 1522866446, "post_id": 49657934, "comment_id": 86325050, "body": "What line in main() cause to segfault? The problem could be solved easily with only debugger."}, {"owner": {"reputation": 37, "user_id": 8075115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c9ce9fdb9d6c8d529d122a43b7e2331?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Nordin", "link": "https://stackoverflow.com/users/8075115/ben-nordin"}, "reply_to_user": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 0, "creation_date": 1522866534, "post_id": 49657934, "comment_id": 86325093, "body": "After the very last line."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1522866542, "post_id": 49657934, "comment_id": 86325095, "body": "<code>MyString.h</code> is missing and there is too much irrevelant code. This link should be useful: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "edited": false, "score": 0, "creation_date": 1522866623, "post_id": 49657934, "comment_id": 86325139, "body": "Your allocation function has a delete in it....."}, {"owner": {"reputation": 68716, "user_id": 39742, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b3900ab00ee7e4c0906fb212050fbe23?s=128&d=identicon&r=PG", "display_name": "Naveen", "link": "https://stackoverflow.com/users/39742/naveen"}, "edited": false, "score": 0, "creation_date": 1522866846, "post_id": 49657934, "comment_id": 86325287, "body": "what are you trying to achieve in <code>buffer_allocate</code>? You allocate and then deallocate immediately!"}, {"owner": {"reputation": 37, "user_id": 8075115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c9ce9fdb9d6c8d529d122a43b7e2331?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Nordin", "link": "https://stackoverflow.com/users/8075115/ben-nordin"}, "edited": false, "score": 0, "creation_date": 1522866902, "post_id": 49657934, "comment_id": 86325311, "body": "sorry the deallocation just slipped in there. Its gone now"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1522867062, "post_id": 49657934, "comment_id": 86325419, "body": "If <code>std::bad_alloc</code> is thrown, then you have nothing to <code>delete</code> since the allocation didn&#39;t happen."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1522867191, "post_id": 49657934, "comment_id": 86325480, "body": "<code>c_str()</code> returning a raw owning pointer is a nasty trap."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 8075115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c9ce9fdb9d6c8d529d122a43b7e2331?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Nordin", "link": "https://stackoverflow.com/users/8075115/ben-nordin"}, "edited": false, "score": 0, "creation_date": 1522867012, "post_id": 49658080, "comment_id": 86325388, "body": "I just tried this and it cut off the last one or two characters of each array"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 37, "user_id": 8075115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c9ce9fdb9d6c8d529d122a43b7e2331?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Nordin", "link": "https://stackoverflow.com/users/8075115/ben-nordin"}, "edited": false, "score": 0, "creation_date": 1522867132, "post_id": 49658080, "comment_id": 86325461, "body": "@BenNordin, I had an error in the first version of the answer. I have updated it since. If you see errors after using the updated version, there are more problems in your code."}, {"owner": {"reputation": 37, "user_id": 8075115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c9ce9fdb9d6c8d529d122a43b7e2331?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Nordin", "link": "https://stackoverflow.com/users/8075115/ben-nordin"}, "edited": false, "score": 0, "creation_date": 1522867396, "post_id": 49658080, "comment_id": 86325609, "body": "thanks for the help with the ctor but it didnt help the segmentation fault."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 37, "user_id": 8075115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c9ce9fdb9d6c8d529d122a43b7e2331?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Nordin", "link": "https://stackoverflow.com/users/8075115/ben-nordin"}, "edited": false, "score": 0, "creation_date": 1522868617, "post_id": 49658080, "comment_id": 86326365, "body": "@BenNordin, it works for me using VS, g++ 6.4, as well as at <a href=\"https://ideone.com/aFcsBX\" rel=\"nofollow noreferrer\">https://ideone.com</a>. I had to use <code>size_t</code> instead of <code>int</code> for the loop variables."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1522866845, "creation_date": 1522866845, "answer_id": 49658080, "question_id": 49657934, "link": "https://stackoverflow.com/questions/49657934/segmentation-fault-after-everything-executes-dynamic-memory-allocation-c/49658080#49658080", "title": "Segmentation fault after everything executes-dynamic memory allocation: c++", "body": "<p>One problem that I noticed is:</p>\n\n<pre><code>m_size = strlen(str);\nbuffer_allocate(m_size);\n</code></pre>\n\n<p>That allocates one less than the number of characters you need. As a consequence, you end up not copying the terminating null character to the object's <code>m_buffer</code>.</p>\n\n<p>I suggest changing the constructor to:</p>\n\n<pre><code>MyString::MyString(const char * str)\n{\n    m_size = strlen(str)+1;\n    buffer_allocate(m_size);\n    strcpy(m_buffer, str);\n}\n</code></pre>\n\n<p><strong>PS</strong> I did not look for other problems in your code. There may be more, or none.</p>\n"}], "owner": {"reputation": 37, "user_id": 8075115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c9ce9fdb9d6c8d529d122a43b7e2331?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Nordin", "link": "https://stackoverflow.com/users/8075115/ben-nordin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1522866845, "creation_date": 1522866309, "last_edit_date": 1522866839, "question_id": 49657934, "link": "https://stackoverflow.com/questions/49657934/segmentation-fault-after-everything-executes-dynamic-memory-allocation-c", "title": "Segmentation fault after everything executes-dynamic memory allocation: c++", "body": "<p>I am fairly new to dynamic memory allocation and am having trouble. I'm thinking the problem is within my allocation function but I could be wrong. Here is the MyString.cpp file. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include \"MyString.h\"\nusing namespace std;\n\nMyString::MyString()\n{\n    m_size = 0;\n    buffer_allocate(0);\n\n}\nMyString::MyString(const char * str)\n{\n    m_size = strlen(str);\n    buffer_allocate(m_size);\n\n    for(int i = 0; i &lt; m_size; i++)\n    {\n        m_buffer[i] = str[i];\n    }\n}\nMyString::MyString(const MyString &amp; other_myStr)\n{\n    m_size = other_myStr.size();\n    buffer_allocate(other_myStr.size());\n    for(int i = 0; i &lt; other_myStr.size(); i++)\n    {\n        m_buffer[i] = other_myStr.c_str()[i];\n    }\n}\nvoid MyString::buffer_deallocate()\n{\n    delete[] m_buffer;\n    m_size = 0;\n}\nvoid MyString::buffer_allocate(size_t size)\n{\n    try\n    {\n            m_buffer = new char[size];\n    }\n    catch(bad_alloc&amp; ex)\n    {\n\n        delete[] m_buffer;\n    }\n}\nMyString::~MyString()\n{\n    buffer_deallocate();\n}\nsize_t MyString::size() const\n{\n    return m_size;\n}\nsize_t MyString::length() const\n{\n    return m_size - 1;\n}\nconst char* MyString::c_str() const\n{\n    char * arr = (char*) malloc(m_size + 1);\n    int i;\n    for(i = 0; i &lt; m_size; i++)\n    {\n        arr[i] = m_buffer[i];\n    }\n    arr[i] = '\\0';\n    return arr;\n}\nbool MyString::operator== (const MyString &amp; other_myStr) const\n{\n    for(int i = 0; (i &lt; m_size) &amp;&amp; (i &lt; other_myStr.size()); i++)\n    {\n        if(m_buffer[i] != other_myStr.c_str()[i])\n        {\n            return false;\n        }\n\n    }\n    if(m_size != other_myStr.size())\n    {\n        return false;\n    }\n    return true;\n}\nMyString &amp; MyString::operator= (const MyString &amp; other_myStr)\n{\n    buffer_deallocate();\n    buffer_allocate(other_myStr.size());\n    for(int i = 0; i &lt; other_myStr.size(); i++)\n    {\n        m_buffer[i] = other_myStr.c_str()[i];\n    }\n    return *this;\n}\nMyString MyString::operator+ (const MyString &amp; other_myStr) const\n{\n    int length = this-&gt;size() + other_myStr.size();\n    char * temp = (char*)malloc(length);\n    int j = 0;\n    for(int i = 0; i &lt; length; i++)\n    {\n        if(i &lt; this-&gt;size())\n        {\n            temp[i] = m_buffer[i];\n        }\n        else\n        {\n            temp[i] = other_myStr.c_str()[j];\n            j++;\n\n        }\n    }\n    MyString rhs = MyString(temp);\n    return rhs;\n}\nchar &amp; MyString::operator[] (size_t index)\n{\n    return m_buffer[index];\n}\nconst char &amp; MyString::operator[] (size_t index) const\n{\n    return m_buffer[index];\n}\nstd::ostream &amp; operator&lt;&lt;(std::ostream &amp; os, const MyString &amp; myStr)\n{\n    for(int i = 0; i &lt; myStr.size(); i++)\n    {\n        os &lt;&lt; myStr[i];\n    }\n    os &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Like I said, the segmentation fault is happening after the entire program is being executed so my guess is that there is some memory leak issue. I appreciate the help in advance. \nAnd here is the main function:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"MyString.h\"\nusing namespace std;\n\nint main(void)\n{\n    MyString dft;\n    if(dft.size() == 0)\n    {\n        cout &lt;&lt; \"Successful Default c-tor\" &lt;&lt; endl;\n    }\n    MyString param(\"Successful Parameter c-tor\");\n    MyString copy(dft);\n    cout &lt;&lt; param;\n    MyString ms_size_length(\"Size and length test:\");\n    cout &lt;&lt; ms_size_length;\n    cout &lt;&lt; \"Size of MyString: \" &lt;&lt; ms_size_length.size() &lt;&lt; endl;\n    cout &lt;&lt; \"Length of MyString: \" &lt;&lt; ms_size_length.length() &lt;&lt; endl; \n    MyString ms_toCstring(\"C-String equivalent successfully obtained!\");\n    cout &lt;&lt; ms_toCstring.c_str() &lt;&lt; endl; \n    MyString ms_same1(\"The same\"), ms_same2(\"The same\"); \n    if (ms_same1==ms_same2)   \n    {\n        cout &lt;&lt; \"Same success\" &lt;&lt; endl; \n    }\n    MyString ms_different(\"The same (NOT)\");\n    if (!(ms_same1==ms_different))\n    {\n        cout &lt;&lt; \"Different success\" &lt;&lt; endl; \n    }\n    MyString ms_assign(\"Before assignment\"); \n    ms_assign = MyString(\"After performing assignment\"); \n    MyString ms_append1(\"The first part\"); \n    MyString ms_append2(\" and the second\"); \n    MyString ms_concat = ms_append1 + ms_append2; \n    cout &lt;&lt; ms_concat;\n    MyString ms_access(\"Access successful (NOT)\"); \n    ms_access[17] = 0; \n    cout &lt;&lt; ms_access;\n\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1522865592, "post_id": 49657674, "comment_id": 86324538, "body": "<i>Everything works except for when it reads negative values from the file</i> -- Weren&#39;t you given these requirements before you wrote any code?  If so, shouldn&#39;t have this been part of your original design?  By jumping in and coding things before thinking them out is going to paint you into a box when you may realize you have to redo the entire program to fit the requirements."}, {"owner": {"reputation": 139, "user_id": 9598367, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "throwthedays", "link": "https://stackoverflow.com/users/9598367/throwthedays"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1522866159, "post_id": 49657674, "comment_id": 86324878, "body": "I was given these requirements, that is correct. I am still new at this and am learning how to effectively tackle problems like this. I will take your advice and apply it to my problems in the future."}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 9598367, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "throwthedays", "link": "https://stackoverflow.com/users/9598367/throwthedays"}, "edited": false, "score": 1, "creation_date": 1522868430, "post_id": 49658176, "comment_id": 86326257, "body": "Thank you very much for the help. I did not even think to use a for loop in this way."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 1, "last_activity_date": 1522867200, "creation_date": 1522867200, "answer_id": 49658176, "question_id": 49657674, "link": "https://stackoverflow.com/questions/49657674/output-negative-values-in-a-bar-chart-using-stars-to-represent-a-range-of-three/49658176#49658176", "title": "Output negative values in a bar chart using stars to represent a range of three values", "body": "<p>The problem is with statement <code>cout &lt;&lt; std::right&lt;&lt; setw(11)&lt;&lt; '*'</code>, which writes several stars, always filled with blanks in between. You seem to have misinterpreted <code>std::right</code> in a way as if it would \"redirect\" output direction from right to left henceforth. Yet it just modifies the default positioning of the fill characters, but output is still written from left to right.</p>\n\n<p>As your scale is always from -30 to +120, I'd rather run a loop through this scale and check if the current position is in the respective temperature range. This is - in my opinion - easier to read than the <code>std::right</code>-things. It could look as follows. </p>\n\n<pre><code>int temperature;\ncout &lt;&lt; \"Temperatures for 24 hours:\" &lt;&lt; endl;\ncout &lt;&lt;setw(6) &lt;&lt; \"-30\" &lt;&lt; setw(9) &lt;&lt; '0' &lt;&lt; setw(10) &lt;&lt; \"30\" &lt;&lt; setw(10) &lt;&lt; \"60\" &lt;&lt; setw(10) &lt;&lt; \"90\" &lt;&lt; setw(10) &lt;&lt; \"120\"&lt;&lt; endl;\nwhile (inData &gt;&gt; temperature) {\n    cout &lt;&lt; setw(3) &lt;&lt; temperature;\n    int tempDiv3 = temperature / 3;\n    for (int i=-30/3; i&lt;=120/3; i++) {\n        if (i == 0) {\n            cout &lt;&lt; '|';\n        }\n        else if (tempDiv3 &lt; 0 &amp;&amp; i &gt;= tempDiv3 &amp;&amp; i &lt; 0) {\n            cout &lt;&lt; '*';\n        }\n        else if (tempDiv3 &gt; 0 &amp;&amp; i &lt;= tempDiv3 &amp;&amp; i &gt; 0) {\n            cout &lt;&lt; '*';\n        }\n        else  {\n            cout &lt;&lt; ' ';\n        }\n    }\n    cout &lt;&lt; endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 9598367, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "throwthedays", "link": "https://stackoverflow.com/users/9598367/throwthedays"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 49658176, "answer_count": 1, "score": 2, "last_activity_date": 1526652103, "creation_date": 1522865324, "last_edit_date": 1526652103, "question_id": 49657674, "link": "https://stackoverflow.com/questions/49657674/output-negative-values-in-a-bar-chart-using-stars-to-represent-a-range-of-three", "title": "Output negative values in a bar chart using stars to represent a range of three values", "body": "<p>This is the assignment.</p>\n\n<ol>\n<li>Design and write a C++ program that inputs a series of 24 hourly temperatures from a file, and outputs a bar chart (using stars) of the temperatures for the day. (Hint; that is an Input file and the output of the program goes to the screen)</li>\n<li>The temperature should be printed to the left of the corresponding bar, and there should be a heading that gives the scale of the chart.</li>\n<li>The range of temperatures should be from -30 to 120 F . Because it is hard to display 150 characters on the screen, you should have each star represent a range of 3 degrees. That way, the bars will be at most 50 characters wide.</li>\n</ol>\n\n<p>This is what I have.</p>\n\n<pre><code>//Include statements\n#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;iomanip&gt;\n#include &lt;fstream&gt;\n#include &lt;cmath&gt;\n\nusing namespace std;\n\nint main()\n{\n//Variable declarations\nint count;\nfloat temperature;\nfloat stars;\n\n//Declare and open input file\nifstream inData;\ninData.open(\"temperatures.txt\");\n\n//Program logic\ncout &lt;&lt; \"Temperatures for 24 hours:\" &lt;&lt; endl;\ncout &lt;&lt;setw(6) &lt;&lt; \"-30\" &lt;&lt; setw(9) &lt;&lt; '0' &lt;&lt; setw(10) &lt;&lt; \"30\" &lt;&lt; setw(10) &lt;&lt; \"60\" &lt;&lt; setw(10) &lt;&lt; \"90\" &lt;&lt; setw(10) &lt;&lt; \"120\"&lt;&lt; endl;\nwhile (inData &gt;&gt; temperature) {\n    cout &lt;&lt; setw(3) &lt;&lt; temperature;\n    if (temperature &lt; 0) {\n        count = 0;\n        stars = round(temperature / 3)*-1;\n        while (count &lt;= stars) {\n            cout &lt;&lt; std::right&lt;&lt; setw(11)&lt;&lt; '*';\n            count++;\n        }\n        cout &lt;&lt; '|';\n    }\n    if (temperature &gt; 0) {\n        count = 0;\n        stars = ceil(temperature / 3);\n        cout &lt;&lt; setw(12) &lt;&lt; '|';\n        while (count &lt; stars) {\n            cout &lt;&lt; '*';\n            count++;\n        }\n    }\n    else {\n        cout &lt;&lt; setw(12) &lt;&lt; '|';\n    }\n    count++;\n    cout &lt;&lt; endl;\n}\n//Closing program statements\nsystem(\"pause\");\nreturn 0;\n}\n</code></pre>\n\n<p>Everything works except for when it reads negative values from the file. How do I line up the bar and output the stars from the bar to the left? </p>\n\n<p>Here is an example of what the bar chart should look like <a href=\"https://books.google.com/books?id=mxZBPSjSEYUC&amp;pg=PA233&amp;lpg=PA233&amp;dq=1.%09Design%20and%20write%20a%20C%2B%2B%20program%20that%20inputs%20a%20series%20of%2024%20hourly&amp;ots=IDsOvmGJue&amp;sig=0yet2EgArAxkoFXUmrLwBOssIzU&amp;hl=en&amp;ei=R8akTP-8MMWblgeP_7y4DA&amp;sa=X&amp;oi=book_result&amp;ct=result#v=onepage&amp;q=1.%09Design%20and%20write%20a%20C%2B%2B%20program%20that%20inputs%20a%20series%20of%2024%20hourly&amp;f=false\" rel=\"nofollow noreferrer\"><strong>this</strong></a></p>\n"}, {"tags": ["c++", "c++11", "system-design"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1522864943, "post_id": 49657525, "comment_id": 86324205, "body": "Should be possible to write a <a href=\"http://clang.llvm.org/extra/clang-tidy/\" rel=\"nofollow noreferrer\">clang tidy</a> check to ensure values are unique.."}, {"owner": {"reputation": 443, "user_id": 6317971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8aQrQ.jpg?s=128&g=1", "display_name": "codehearts", "link": "https://stackoverflow.com/users/6317971/codehearts"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1522865065, "post_id": 49657525, "comment_id": 86324278, "body": "@JesperJuhl That sounds like it would work, but we&#39;re using <code>arm-none-eabi-g++</code>"}, {"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 1, "creation_date": 1522865107, "post_id": 49657525, "comment_id": 86324301, "body": "Keep the old enum member and rename it to <code>ICON_A_DEPRECATED</code>. Then only add new ones at the end."}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1522865230, "post_id": 49657525, "comment_id": 86324370, "body": "Since you mention the client and server and say that the <code>icons_t</code> must remain constant, I assume that the enums are converted to a number transfered over the network and then those numbers are converted back to enums, is that correct?"}, {"owner": {"reputation": 443, "user_id": 6317971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8aQrQ.jpg?s=128&g=1", "display_name": "codehearts", "link": "https://stackoverflow.com/users/6317971/codehearts"}, "reply_to_user": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1522865347, "post_id": 49657525, "comment_id": 86324432, "body": "@t.niese Yes, the enums are converted to ints for network transmission and then converted back to enums when received"}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1522865718, "post_id": 49657525, "comment_id": 86324611, "body": "Then add a unit tests that check if the decoded enum corresponds to the previously decoded one. And if you do this test for every enum, then it should not be possible to either decode <code>ICON_D</code>  or  <code>ICON_E</code>, and fail for one of those."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1522865902, "post_id": 49657525, "comment_id": 86324718, "body": "I presume you would select a behavior based on a received <code>enum</code> value at some point. Perhaps using an <code>std::map</code> or a <code>switch</code>. You can make sure at that point that the enum is always unique. For example, <code>switch</code> won&#39;t allow equivalent <code>case</code> labels. If you use a <code>std::map</code> make sure that all insertions succeed and that a matching element wasn&#39;t already present. It won&#39;"}, {"owner": {"reputation": 443, "user_id": 6317971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8aQrQ.jpg?s=128&g=1", "display_name": "codehearts", "link": "https://stackoverflow.com/users/6317971/codehearts"}, "reply_to_user": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1522866657, "post_id": 49657525, "comment_id": 86325164, "body": "@t.niese We don&#39;t have unit tests for our enum values, doing so means we have the problem of ensuring tests are written and maintained now"}, {"owner": {"reputation": 680, "user_id": 2303176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f47107aaff2c656bb305e866155258f1?s=128&d=identicon&r=PG", "display_name": "badola", "link": "https://stackoverflow.com/users/2303176/badola"}, "edited": false, "score": 0, "creation_date": 1522867894, "post_id": 49657525, "comment_id": 86325920, "body": "If this is C++11 question, why not use <code>enum class</code> ? I mean you can avoid a lot of problems, by just using <code>enum class</code>."}], "answers": [{"tags": [], "owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "is_accepted": true, "score": 1, "last_activity_date": 1522866224, "creation_date": 1522866224, "answer_id": 49657903, "question_id": 49657525, "link": "https://stackoverflow.com/questions/49657525/ensure-key-value-of-enumerable-type-never-changes-between-software-revs/49657903#49657903", "title": "Ensure key/value of enumerable type never changes between software revs", "body": "<p>I have previously done tests that check out previous builds and scan header files for this type of version-breaking behaviour. You can use diff to generate a report of any changes, grep that for the common pattern, and identify the difference between deleting a fixed-index entry, changing the index of an entry, and deleting or inserting a floating index entry.</p>\n\n<p>The one obvious way to avoid it is to NOT remove the dead indices, but rename them, i.e. <code>ICON_A</code> becomes <code>ICON_A_RETIRED</code>, and its slot is reserved for ever. It is inevitable that someone will change an index, though, so a good unit test would also help. Forcing a boilerplate style means the test is simpler than coping with the generic case. </p>\n\n<p>Another trick might be to accept that the issue will occur, but if it is only a problem for customers, and at each software release/revision, update a base number for the range, release the software and update again, so the dev version is never compatible with the release, eg</p>\n\n<pre><code>#define ICON_RANGE 0x1000\n#define ICON_REVISION_BASE ((RELEASENUM+ISDEVFLAG)*ICON_RANGE)\nenum icon_t {\n  iconTMax = ICON_REVISION_BASE+ICON_RANGE,\n  iconTBase = ICON_REVISION_BASE,\n  icon_A,\n  icon_B,\n</code></pre>\n\n<p>Then, at run-time, any icons not in the current range are easily rejected, or you might provide a special look-up between versions, perhaps generated by trawling your version control revisions. Note that you can only provide backward compatibility this way, not forward compatibility. It would be up to newer code to preemptively back-translate their icon numbers to send to older modules, which may be more effort than it is worth.</p>\n"}, {"comments": [{"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 1, "creation_date": 1522921664, "post_id": 49658268, "comment_id": 86348405, "body": "You could add a static_assert to do this job at compile time. I&#39;m not sure what it gives you when someone adds a new icon. Certainly having a LAST is a good idea."}], "tags": [], "owner": {"reputation": 443, "user_id": 6317971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8aQrQ.jpg?s=128&g=1", "display_name": "codehearts", "link": "https://stackoverflow.com/users/6317971/codehearts"}, "is_accepted": false, "score": 0, "last_activity_date": 1522867551, "creation_date": 1522867551, "answer_id": 49658268, "question_id": 49657525, "link": "https://stackoverflow.com/questions/49657525/ensure-key-value-of-enumerable-type-never-changes-between-software-revs/49658268#49658268", "title": "Ensure key/value of enumerable type never changes between software revs", "body": "<p>This thought just crossed my mind: if we keep a literal at the end for the enum size, our unit tests can use that to assert if we haven't verified each enum literal:</p>\n\n<pre><code>enum icons_t {\n  ICON_A_DEPRECATED,\n  ICON_B,\n  ICON_C,\n  ICON_COUNT // ALWAYS KEEP THIS LAST\n};\n</code></pre>\n\n<p>Then in testing:</p>\n\n<pre><code>unsigned int verifyCount = 0;\nverify(0, ICON_A_DEPRECATED); // verifyCount++, assert 0 was not verified before\nverify(1, ICON_B); // verifyCount++, assert 1 was never verified before\nassert(ICON_COUNT == verifyCount, \"Not all icons verified\");\n</code></pre>\n\n<p>Then our only problem is ensuring tests pass before releasing, which we should be doing anyway.</p>\n"}, {"comments": [{"owner": {"reputation": 443, "user_id": 6317971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8aQrQ.jpg?s=128&g=1", "display_name": "codehearts", "link": "https://stackoverflow.com/users/6317971/codehearts"}, "edited": false, "score": 0, "creation_date": 1522870413, "post_id": 49658887, "comment_id": 86327367, "body": "I&#39;ve thought about this, but we must convert to int when transmitting over the network. If server 1.0 has <code>enum class {A, B, C}</code> and client 2.0 has <code>enum class {B, C}</code>, then the server would cast A to 0 and the client would cast 0 to B"}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 1, "creation_date": 1522922479, "post_id": 49658887, "comment_id": 86348914, "body": "You can&#39;t freely assign integers to unscoped enumerations either in c++, so I&#39;m not sure what this gives you. Note that one of the latest standards does allow you to assign {1234} to a scoped enum without an explicit cast, which may be useful somewhere."}], "tags": [], "owner": {"reputation": 680, "user_id": 2303176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f47107aaff2c656bb305e866155258f1?s=128&d=identicon&r=PG", "display_name": "badola", "link": "https://stackoverflow.com/users/2303176/badola"}, "is_accepted": false, "score": 0, "last_activity_date": 1522869823, "creation_date": 1522869823, "answer_id": 49658887, "question_id": 49657525, "link": "https://stackoverflow.com/questions/49657525/ensure-key-value-of-enumerable-type-never-changes-between-software-revs/49658887#49658887", "title": "Ensure key/value of enumerable type never changes between software revs", "body": "<p>Since the question has been tagged C++11, this could be better handled with <strong>Scoped enumerations</strong>.<br>\nRead about it here : <a href=\"http://en.cppreference.com/w/cpp/language/enum\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/enum</a> </p>\n\n<p>Since the same enum file is included in both client and server, then removing any entry would lead to compilation failure in places a missing entry is being used.</p>\n\n<p>All that need to be changed, is your <code>icon_t</code>.<br>\nUpgrade it from <code>enum</code> to <code>enum class</code></p>\n\n<pre><code>enum class icon_t\n{\n    ICON_A,\n    ICON_B,\n};\n</code></pre>\n\n<p>Now you can't blatantly pass <code>int</code> instead of an <code>icon_t</code>. This reduces your probability to make mistakes drastically.</p>\n\n<p>So the calling side</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nenum class icon_t\n{\n    ICON_A,\n    ICON_B,\n};\n\nvoid test_icon(icon_t const &amp; icon)\n{\n    if (icon == icon_t::ICON_A)\n        std::cout &lt;&lt; \"icon_t::ICON_A\";\n    if (icon == icon_t::ICON_B)\n        std::cout &lt;&lt; \"icon_t::ICON_B\";\n}\n\nint main()\n{\n    auto icon = icon_t::ICON_A;\n    test_icon(icon); // this is ok\n    test_icon(1); // Fails at compile time : no known conversion from 'int' to 'const icon_t' for 1st argument \n    return 0;\n}\n</code></pre>\n\n<p>Moreover, extracting numerical values is allowed from Scoped Enumerators. <code>static_cast</code> to <code>int</code> is allowed. If required.</p>\n\n<pre><code>int n = static_cast&lt;int&gt;(icon); // Would return 0, the index of icon_t::ICON_A\n</code></pre>\n"}], "owner": {"reputation": 443, "user_id": 6317971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8aQrQ.jpg?s=128&g=1", "display_name": "codehearts", "link": "https://stackoverflow.com/users/6317971/codehearts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 49657903, "answer_count": 3, "score": 0, "last_activity_date": 1522869823, "creation_date": 1522864719, "question_id": 49657525, "link": "https://stackoverflow.com/questions/49657525/ensure-key-value-of-enumerable-type-never-changes-between-software-revs", "title": "Ensure key/value of enumerable type never changes between software revs", "body": "<p>We have a client/server application where older servers are supported by newer clients. Both support a shared set of icons.</p>\n\n<p>We're representing the icons as an implicit enum that's included in the server and client builds:</p>\n\n<pre><code>enum icons_t { // rev 1.0\n  ICON_A, // 0\n  ICON_B, // 1\n  ICON_C  // 2\n};\n</code></pre>\n\n<p>Sometimes we retire icons (weren't being used, or used internally and weren't listed in our API), which led to the following code being committed:</p>\n\n<pre><code>enum icons_t { // rev 2.0\n  ICON_B, // 0\n  ICON_C  // 1 (now if a rev 1.0 server uses ICON_B, it will get ICON_C instead)\n};\n</code></pre>\n\n<p>I've changed our enum to the following to try and work around this:</p>\n\n<pre><code>// Big scary header about commenting out old icons\nenum icons_t { // rev 2.1\n  // Removed: ICON_A = 0,\n  ICON_B = 1,\n  ICON_C = 2\n};\n</code></pre>\n\n<p>Now my worry is a bad merge when multiple people add new icons:</p>\n\n<pre><code>// Big scary header about commenting out old icons\nenum icons_t { // rev 30\n  // Removed: ICON_A = 0,\n  ICON_B = 1,\n  ICON_C = 2,\n  ICON_D = 3,\n  ICON_E = 3 // Bad merge leaves 2 icons with same value\n};\n</code></pre>\n\n<p>Since it's an enum we don't really have a way to assert if the values aren't unique.</p>\n\n<p>Is there a better data structure to manage this data, or a design change that wouldn't be open to mistakes like this? My thoughts have been going towards a tool to analyze pull requests and block merges if this issue is detected.</p>\n"}, {"tags": ["c++", "windows", "readdirectorychangesw"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1522865088, "post_id": 49657444, "comment_id": 86324293, "body": "Do not lose <code>buffer</code>, it tells you what changed.  Right now you have a nasty dangling pointer bug, it writes to a local variable that is not local anymore.  That it going to crash your program in a completely undiagnosable way sooner or later."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 1, "creation_date": 1522865789, "post_id": 49657444, "comment_id": 86324646, "body": "When you create the file or directory, this causes the last-modified time of <code>c:\\testA\\testB</code> to change, which means a directory change is reported for <code>c:\\testA</code>. (The result of <code>dir c:\\testA</code> has changed.)"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1522866131, "post_id": 49657444, "comment_id": 86324860, "body": "really <code>buffer</code> and <code>overlap</code> is wrong used. you got the wrong results. when you create <code>c:\\testA\\testB\\newdir</code> - with correct usage - you got 2 notify - (<code>FILE_ACTION_ADDED</code>, <code>testB\\newdir</code>)  and (<code>FILE_ACTION_MODIFIED</code>, <code>testB</code>)"}, {"owner": {"reputation": 1503, "user_id": 1078116, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0911cee39ffe69b10ec3352c17368537?s=128&d=identicon&r=PG", "display_name": "alvion", "link": "https://stackoverflow.com/users/1078116/alvion"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1522867919, "post_id": 49657444, "comment_id": 86325936, "body": "@HansPassant This is just the minimum code necessary to reproduce the bug.  In our actual production code, we are of course properly tracking buffer, managing the file handles, etc, etc."}, {"owner": {"reputation": 1503, "user_id": 1078116, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0911cee39ffe69b10ec3352c17368537?s=128&d=identicon&r=PG", "display_name": "alvion", "link": "https://stackoverflow.com/users/1078116/alvion"}, "edited": false, "score": 0, "creation_date": 1524826550, "post_id": 49657444, "comment_id": 87138044, "body": "RbMm I&#39;ve simplified the code a bit, I don&#39;t really care about the results in the new code.  The call to WaitForSingleObjectEx <b>never wakes up</b>, so how I interpret the results can&#39;t possibly matter."}], "owner": {"reputation": 1503, "user_id": 1078116, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0911cee39ffe69b10ec3352c17368537?s=128&d=identicon&r=PG", "display_name": "alvion", "link": "https://stackoverflow.com/users/1078116/alvion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 348, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524827044, "creation_date": 1522864416, "last_edit_date": 1524827044, "question_id": 49657444, "link": "https://stackoverflow.com/questions/49657444/why-is-readdirectorychangesw-not-triggered-correctly-when-a-subdirectory-is-crea", "title": "Why is ReadDirectoryChangesW not triggered correctly when a subdirectory is created inside the watched directory?", "body": "<p><strong>(Updated with simpler code)</strong></p>\n\n<p>I'm using ReadDirectoryChangesW() to watch for changes to certain folders.  It works correctly when a <em>file</em> is created in one of the watched folders, but when a <em>subdirectory</em> is created it is never notified.  </p>\n\n<p>For example, if I watch the path c:\\testA\\testB and create a file in that folder, then ReadDirectoryChangesW() works correctly.  If I instead create a <em>directory</em> in that folder, then WaitForSingleObjectEx doesn't ever return.</p>\n\n<p>Interestingly, if I instead watch c:\\testA and create a directory under c:\\testA\\testB then WaitForSingleObjectEx returns as expected.  Note that I am not watching subfolders, (bWatchSubtree == false) so this result is very strange.</p>\n\n<p>One possible solution is to watch two folders for every folder that I want to monitor, the folder itself for file changes, and the parent folder for any subdirectory changes, but you can see why that is tedious.</p>\n\n<p>Here is some sample code to reproduce the problem:</p>\n\n<pre><code>HANDLE watchDir(const char* dirPath)\n{\n    HANDLE dir = CreateFile(\n        dirPath,\n        FILE_LIST_DIRECTORY,\n        FILE_SHARE_READ | FILE_SHARE_WRITE | FILE_SHARE_DELETE,\n        NULL,\n        OPEN_EXISTING,\n        FILE_FLAG_BACKUP_SEMANTICS | FILE_FLAG_OVERLAPPED,\n        NULL);\n\n    const size_t kBufferSize = 32 * 1024;\n    char buffer[kBufferSize];\n    OVERLAPPED overlap;\n\n    memset(&amp;overlap, 0, sizeof(overlap));\n    memset(&amp;buffer, 0, sizeof(buffer));\n\n    overlap.hEvent = CreateEvent(NULL, FALSE, FALSE, NULL);\n\n    if (ReadDirectoryChangesW(\n        dir,\n        buffer,\n        sizeof(buffer),\n        FALSE,  /* bWatchSubtree = false, we only watch one folder*/\n        FILE_NOTIFY_CHANGE_FILE_NAME | FILE_NOTIFY_CHANGE_LAST_WRITE | FILE_NOTIFY_CHANGE_CREATION,\n        NULL,\n        &amp;overlap,\n        NULL) != 0)\n    {\n        return overlap.hEvent;\n    }\n    else\n    {\n        return nullptr;\n    }\n}\n\nvoid main(int nargs, const char* args)\n{\n    HANDLE watchHandle = watchDir(\"C:\\\\testA\\\\testB\");\n    if (watchHandle == nullptr)\n    {\n        cout &lt;&lt; \"Failed to issue watch command\" &lt;&lt; endl;\n        return;\n    }\n\n    DWORD result = WaitForSingleObjectEx(watchHandle, INFINITE, false);\n\n    // This code will never be reached when creating a dir in c:\\testA\\testB, but it WILL if a file is created in that folder.\n    cout &lt;&lt; \"Done waiting for dir: \" &lt;&lt; result &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Running this code and making a new <strong>file</strong> at c:\\testA\\testB\\newfile.txt yields this output:</p>\n\n<pre><code>c:\\testA\\testB modified.\n</code></pre>\n\n<p>Running this code and making a new <strong>directory</strong> at c:\\testA\\testB\\newdir is never woken up.</p>\n\n<p>Why does creating a directory cause a notification for two folders up?  Why not just the parent?  Why should creating a file and creating a folder act differently at all?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 3699, "user_id": 375399, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2ee1c857b767375e1fc848279f64584b?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/375399/nick"}, "edited": false, "score": 0, "creation_date": 1522871153, "post_id": 49657358, "comment_id": 86327776, "body": "Is the background window a window from your application or another? I&#39;m guessing another since you grab the window handle."}, {"owner": {"reputation": 199, "user_id": 2380157, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/c22c19d4f84e44d85a55902c8d2efc4d?s=128&d=identicon&r=PG", "display_name": "GUI-Novice", "link": "https://stackoverflow.com/users/2380157/gui-novice"}, "reply_to_user": {"reputation": 3699, "user_id": 375399, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2ee1c857b767375e1fc848279f64584b?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/375399/nick"}, "edited": false, "score": 0, "creation_date": 1522906627, "post_id": 49657358, "comment_id": 86339361, "body": "@Nick, yes it is a window from another application. For example, I am working in a Notepad program, and I opened my Qt applicaiton, the Qt app should grab the window title of Notepad application."}], "answers": [{"tags": [], "owner": {"reputation": 3699, "user_id": 375399, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2ee1c857b767375e1fc848279f64584b?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/375399/nick"}, "is_accepted": false, "score": 0, "last_activity_date": 1522871353, "creation_date": 1522871353, "answer_id": 49659285, "question_id": 49657358, "link": "https://stackoverflow.com/questions/49657358/how-to-get-background-application-window-title-in-qt/49659285#49659285", "title": "How to get background application window title in QT?", "body": "<p>If it's the previous (or next, see link) window in the Z-Order, you can use: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms633509(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>GetNextWindow</code></a>, like so:</p>\n\n<pre><code>QString MyWindow::getBackgroundWindowTitle()\n{\n    char buff[256];\n    HWND myHwnd = GetForegroundWindow();\n    HWND hwnd = GetNextWindow(myHwnd, GW_HWNDNEXT);\n    GetWindowText(hwnd, (LPWSTR) buff, 254);\n    QString title = QString::fromWCharArray((const wchar_t *)buff);\n    return title;\n}\n</code></pre>\n\n<p>Now, if I understand your question, you just need to move the call to <code>getBackgroundWindowTitle</code> to your button handler:</p>\n\n<pre><code>void MyWindow::OnPushbuttonPressed()\n{\n    ui-&gt;labelBackgroundWindowTitle.setText(getBackgroundWindowTitle());\n}\n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 2380157, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/c22c19d4f84e44d85a55902c8d2efc4d?s=128&d=identicon&r=PG", "display_name": "GUI-Novice", "link": "https://stackoverflow.com/users/2380157/gui-novice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 307, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1522871353, "creation_date": 1522864111, "last_edit_date": 1522864167, "question_id": 49657358, "link": "https://stackoverflow.com/questions/49657358/how-to-get-background-application-window-title-in-qt", "title": "How to get background application window title in QT?", "body": "<p>In my qt application when I press a button, I need to display the background application window title. Currently i used to manage this in such a way that, call 'getBackgroundWindowTitle' function before 'setupUi' call. So this returns the background application window title for me. My current implementation is as below</p>\n\n<pre><code>MyWindow::MyWindow(QWidget *parent) :\nQMainWindow(parent),\nui(new Ui::MyWindow)\n{\n    g_window_title = getBackgroundWindowTitle();\n    ui-&gt;setupUi(this);\n}\n\nvoid MyWindow::OnPushbuttonPressed()\n{\n    ui-&gt;labelBackgroundWindowTitle.setText(g_window_title);\n}\n\nQString MyWindow::getBackgroundWindowTitle()\n{\n    char buff[256];\n    HWND hwnd = GetForegroundWindow(); //currently this gives my current application window title\n    GetWindowText(hwnd, (LPWSTR) buff, 254);\n    QString title = QString::fromWCharArray((const wchar_t *)buff);\n    return title;\n}\n</code></pre>\n\n<p>But, the issue with this code is, when the background application window changes, I need to restart the application to get the background title again because 'getBackgroundWindowTitle' need to be called before setupUi call.</p>\n\n<p>I am looking for anytime solution in such a way that when user pressed the pushbutton, the background application window title should be retrieved. </p>\n\n<p>Can somebody help me to modify my code ? </p>\n"}, {"tags": ["c++", "oop", "coding-style", "operator-overloading"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1522864138, "post_id": 49657351, "comment_id": 86323737, "body": "It&#39;s actually common practice. A great rule of thumb is to <i>avoid</i> duplicating code when you can. Though in my experience you are more likely to see <code>operator+</code> implemented in terms of <code>operator+=</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1522864193, "post_id": 49657351, "comment_id": 86323768, "body": "Is isn&#39;t actually spelled out  but everything you want know is here: <a href=\"https://stackoverflow.com/questions/4421706/what-are-the-basic-rules-and-idioms-for-operator-overloading\" title=\"what are the basic rules and idioms for operator overloading\">stackoverflow.com/questions/4421706/&hellip;</a>"}, {"owner": {"reputation": 121, "user_id": 9399979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0448c9d7befa90aeb74b09a8143ee26?s=128&d=identicon&r=PG&f=1", "display_name": "Mykel", "link": "https://stackoverflow.com/users/9399979/mykel"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1522864276, "post_id": 49657351, "comment_id": 86323822, "body": "@Fran&#231;oisAndrieux Thank you. Can you elaborate on your last statement?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1522864282, "post_id": 49657351, "comment_id": 86323826, "body": "You&#39;d see <code>operator@</code> implemented by using <code>operator@=</code> because it can be more efficient. It&#39;s often possible for the <code>@=</code> to be more efficient than the plain <code>@</code>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1522864381, "post_id": 49657351, "comment_id": 86323870, "body": "@Mykel Notice that <code>*this + progA</code> will have to create a temporary instance of <code>myClass</code> which shouldn&#39;t be strictly necessary for implementing <code>operator+=</code>. If you implement <code>operator+=</code> directly and instead change <code>operator+</code> to refer to <code>operator+=</code> (make a copy of <code>*this</code> and call <code>operator+=</code> on that copy, which you return) you can get away with a more efficient implementation."}, {"owner": {"reputation": 121, "user_id": 9399979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0448c9d7befa90aeb74b09a8143ee26?s=128&d=identicon&r=PG&f=1", "display_name": "Mykel", "link": "https://stackoverflow.com/users/9399979/mykel"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1522864481, "post_id": 49657351, "comment_id": 86323940, "body": "@Justin Thank you for the explanation. But if you implement an @= Operator before the @ operator, doesn&#39;t that mean you would have to reuse some code to implement the @ operator? going against the rule of thumb of duplicating code?"}, {"owner": {"reputation": 121, "user_id": 9399979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0448c9d7befa90aeb74b09a8143ee26?s=128&d=identicon&r=PG&f=1", "display_name": "Mykel", "link": "https://stackoverflow.com/users/9399979/mykel"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1522864619, "post_id": 49657351, "comment_id": 86324021, "body": "@Fran&#231;oisAndrieux Wow. That&#39;s brilliant. Thank you. New skill to add to my tool. Thanks once again"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1522864765, "post_id": 49657351, "comment_id": 86324090, "body": "It&#39;s perfectly fine."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1522865018, "last_edit_date": 1522865018, "creation_date": 1522864633, "answer_id": 49657501, "question_id": 49657351, "link": "https://stackoverflow.com/questions/49657351/is-it-okay-to-use-an-overloaded-operator-to-implement-another-operator-overload/49657501#49657501", "title": "Is it okay to use an overloaded operator to implement another operator overload?", "body": "<p>You can do that. However, it is more common to implement <code>operator+</code> using  <code>operator+=</code> instead of the other way around.</p>\n\n<pre><code>myClass &amp; operator += (const myClass &amp; rhs) { ... )\n\n// Return by value.\n// const member function.\nmyClass operator + (const myClass &amp; rhs) const\n{\n    myClass ret = *this; // Uses copy constructor, not assignment.\n    return ret += rhs;\n}\n</code></pre>\n\n<p>The interface</p>\n\n<pre><code>myClass &amp; operator + (const myClass &amp; rhs);\n</code></pre>\n\n<p>is not idiomatic since you cannot do the equivalent of</p>\n\n<pre><code>int a = 10 + 20;\n</code></pre>\n\n<p>Using</p>\n\n<pre><code>MyClass a = MyClass(args...) + MyClass(args...);\n</code></pre>\n\n<p>won't work since the first object in RHS is a temporary object.</p>\n"}], "owner": {"reputation": 121, "user_id": 9399979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0448c9d7befa90aeb74b09a8143ee26?s=128&d=identicon&r=PG&f=1", "display_name": "Mykel", "link": "https://stackoverflow.com/users/9399979/mykel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 49657501, "answer_count": 1, "score": 3, "last_activity_date": 1522865673, "creation_date": 1522864095, "last_edit_date": 1522865673, "question_id": 49657351, "link": "https://stackoverflow.com/questions/49657351/is-it-okay-to-use-an-overloaded-operator-to-implement-another-operator-overload", "title": "Is it okay to use an overloaded operator to implement another operator overload?", "body": "<p>For instance if I have overloaded a + operator</p>\n\n<pre><code>myClass &amp; operator + (const myClass &amp; rhs)\n</code></pre>\n\n<p>and also overloaded = operator</p>\n\n<pre><code>myClass &amp; operator = (const myClass &amp; rhs)\n</code></pre>\n\n<p>both operators are working fine. Can I use this overloaded operator in my += operator overload?</p>\n\n<pre><code>myClass &amp; operator += (const myClass &amp; rhs){\n\n*this = *this + progA;\n\nreturn *this;\n\n}\n</code></pre>\n\n<p>The above code is working okay. I just want to know if this is good code writing practice or I should re-use the code from the two previous implementations for the += operator overload.</p>\n"}, {"tags": ["c++", "binary-search-tree"], "comments": [{"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 2, "creation_date": 1522864052, "post_id": 49657310, "comment_id": 86323692, "body": "what is the question?"}, {"owner": {"reputation": 3, "user_id": 9214232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e366ac4635b7a30b52dd053e7120e83?s=128&d=identicon&r=PG&f=1", "display_name": "Tomhass", "link": "https://stackoverflow.com/users/9214232/tomhass"}, "reply_to_user": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1522864144, "post_id": 49657310, "comment_id": 86323743, "body": "@Jeffrey I have a test.cpp I can run to test if my functions work and it fails every time, they just don&#39;t work and I don&#39;t know why"}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1522864199, "post_id": 49657310, "comment_id": 86323772, "body": "You code is not using what is in the class define in the header.  For instance, where do you set the member variable root in your code?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1522864441, "post_id": 49657310, "comment_id": 86323910, "body": "&quot;they just don&#39;t work and I don&#39;t know why&quot; is a far cry from a proper problem description. <i>How</i> don&#39;t they work? What did you expect? What did you observe? What did you learn while stepping through the code with your debugger?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1522865131, "post_id": 49657310, "comment_id": 86324314, "body": "<code>Node* tree; Node* treeNew;</code> -- Why are you declaring globals here?  You&#39;re cheating by creating your own set of global variables &quot;on the side&quot;, building your own version of tree, and not using the class member variables declared in the header.  By using globals, you&#39;re creating something outside of the class, thus violating the basic rule of encapsulation.  I suggest you remove those two variables, and start over, given that the only thing you have to work with is the class itself, and any local variables you may want to use within the class functions."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9244305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UVtXJ.jpg?s=128&g=1", "display_name": "xiaoxi", "link": "https://stackoverflow.com/users/9244305/xiaoxi"}, "is_accepted": false, "score": 0, "last_activity_date": 1522896047, "creation_date": 1522896047, "answer_id": 49663291, "question_id": 49657310, "link": "https://stackoverflow.com/questions/49657310/binary-search-tree-unchangeable-header-file/49663291#49663291", "title": "Binary Search Tree unchangeable header file", "body": "<p>There are many mistakes with your code, and you need to correct them.</p>\n\n<p>For example,</p>\n\n<ol>\n<li><p>Within the function insert(std::string word), if the tree is null, there is nothing to be done, but in fact you should create a node(with the value of \"word\") and insert it. similarly, the root may change sometimes, and you must consider it.</p></li>\n<li><p>Within the function BinarySearchTree(const BinarySearchTree &amp;rhs), you never use rhs. Further, I guess you mean that a deep dopy, so your code can't work at all.</p></li>\n</ol>\n\n<p>My advice is that you should rewrite your function(after making a full understanding of BST). Meanwhile, you may describe your question clearly asap.  </p>\n"}], "owner": {"reputation": 3, "user_id": 9214232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e366ac4635b7a30b52dd053e7120e83?s=128&d=identicon&r=PG&f=1", "display_name": "Tomhass", "link": "https://stackoverflow.com/users/9214232/tomhass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 604, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522896047, "creation_date": 1522863939, "question_id": 49657310, "link": "https://stackoverflow.com/questions/49657310/binary-search-tree-unchangeable-header-file", "title": "Binary Search Tree unchangeable header file", "body": "<p>I'm doing an assignment on binary search trees. We are given a header file and we are not allowed to alter it.</p>\n\n<p>I have a function for creating an BST with an initial value to store, a function to create a BST by copying an existing tree and a function to insert into a BST.</p>\n\n<p>I am struggling to find out what's wrong, everywhere I look online for help always has differences in the header file which I can't do. Any help would be appreciated.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"bst.h\"\n\n// Creating nodes  \nNode* tree;\nNode* treeNew;\n\n\n// Creates an empty binary tree - 1\nBinarySearchTree::BinarySearchTree()\n{\n    treeNew = nullptr;\n}\n\n// Creates a binary tree with an initial value to store - 2\nBinarySearchTree::BinarySearchTree(std::string word)\n{\n    Node *tree = new Node;\n    tree-&gt;left = nullptr;\n    tree-&gt;right = nullptr;\n    tree-&gt;data = word;\n}\n\n// Creates a binary tree by copying an existing tree - 3\nBinarySearchTree::BinarySearchTree(const BinarySearchTree &amp;rhs)\n{\n    if (tree != NULL) {\n\n        Node *treeNew = new Node;\n        treeNew-&gt;data = tree-&gt;data;\n\n        Node *leftTreeNew = new Node;\n        leftTreeNew = tree-&gt;left;\n\n        Node *rightTreeNew = new Node;\n        rightTreeNew = tree-&gt;right;\n    }\n    else {\n        treeNew = NULL;\n    }\n}\n\n// Adds a word to the tree\nvoid BinarySearchTree::insert(std::string word)\n{\n    Node *nextNode = tree;\n    Node *currentNode;\n\n\n    while (nextNode != NULL) {\n        currentNode = nextNode;\n\n        if (word &lt; currentNode-&gt;data) {\n            nextNode = currentNode-&gt;left;\n        } else {\n            nextNode = currentNode-&gt;right;\n        }\n    } \n}\n</code></pre>\n\n<p>here's my header file </p>\n\n<pre><code>#pragma once\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n// Node of the tree\nstruct Node\n{\n    // Data stored in this node of the tree\n    std::string data;\n    // The left branch of the tree\n    Node *left = nullptr;\n    // The right branch of the tree\n    Node *right = nullptr;\n};\n\nclass BinarySearchTree\n{\nprivate:\n    // Pointer to root of the tree\n    Node *root = nullptr;\npublic:\n    // Creates an empty binary tree\n    BinarySearchTree();\n    // Creates a binary tree with an inital word to store\n    BinarySearchTree(std::string word);\n    // Creates a binary tree by copying an existing tree\n    BinarySearchTree(const BinarySearchTree &amp;rhs);\n    // Destroys (cleans up) the tree\n    ~BinarySearchTree();\n    // Adds a word to the tree\n    void insert(std::string word);\n    // Removes a word from the tree\n    void remove(std::string word);\n    // Checks if a word is in the tree\n    bool exists(std::string word) const;\n    // Creates a string representing the tree in alphabetical order\n    std::string inorder() const;\n    // Creates a string representing the tree in pre-order\n    std::string preorder() const;\n    // Creates a string representing the tree in post-order\n    std::string postorder() const;\n    // Checks if two trees are equal\n    bool operator==(const BinarySearchTree &amp;other) const;\n    // Checks if two trees are not equal\n    bool operator!=(const BinarySearchTree &amp;other) const;\n    // Reads in words from an input stream into the tree\n    friend std::istream&amp; operator&gt;&gt;(std::istream &amp;in, BinarySearchTree &amp;tree);\n    // Writes the words, in-order, to an output stream\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream &amp;out, const BinarySearchTree &amp;tree);\n};\n</code></pre>\n"}, {"tags": ["c++", "arrays", "string", "arduino"], "comments": [{"owner": {"reputation": 5508, "user_id": 794749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pfE2l.jpg?s=128&g=1", "display_name": "gre_gor", "link": "https://stackoverflow.com/users/794749/gre-gor"}, "edited": false, "score": 0, "creation_date": 1522863660, "post_id": 49657181, "comment_id": 86323442, "body": "And what are the contents of <code>buffer2</code>?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1522863710, "post_id": 49657181, "comment_id": 86323475, "body": "And what is <code>buffer2</code>? How was it declared, defined and initialized? Does it, most importantly, contain a <i>string terminator</i>?"}, {"owner": {"reputation": 189, "user_id": 7349614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-FrZ-e-BY-Mo/AAAAAAAAAAI/AAAAAAAAAKQ/Wgq4gYKy8R4/photo.jpg?sz=128", "display_name": "Alexander Hoerl", "link": "https://stackoverflow.com/users/7349614/alexander-hoerl"}, "reply_to_user": {"reputation": 5508, "user_id": 794749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pfE2l.jpg?s=128&g=1", "display_name": "gre_gor", "link": "https://stackoverflow.com/users/794749/gre-gor"}, "edited": false, "score": 0, "creation_date": 1522864904, "post_id": 49657181, "comment_id": 86324182, "body": "@gre_gor Oh sorry its of the type byte and length is 18. byte buffer2[18];"}, {"owner": {"reputation": 189, "user_id": 7349614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-FrZ-e-BY-Mo/AAAAAAAAAAI/AAAAAAAAAKQ/Wgq4gYKy8R4/photo.jpg?sz=128", "display_name": "Alexander Hoerl", "link": "https://stackoverflow.com/users/7349614/alexander-hoerl"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1522864923, "post_id": 49657181, "comment_id": 86324195, "body": "@Someprogrammerdude Oh sorry its of the type byte and length is 18. byte buffer2[18]; I guess it doesn&#39;t contain a string terminator its only a name."}, {"owner": {"reputation": 5508, "user_id": 794749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pfE2l.jpg?s=128&g=1", "display_name": "gre_gor", "link": "https://stackoverflow.com/users/794749/gre-gor"}, "edited": false, "score": 0, "creation_date": 1522865021, "post_id": 49657181, "comment_id": 86324253, "body": "I am asking about the contents. Crate a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1522865146, "post_id": 49657181, "comment_id": 86324324, "body": "So if it&#39;s a &quot;name&quot; it could be <i>shorter</i> than the 16 bytes you use from the array? If you have a C-style string, then add a terminator and check for that (and the length)."}, {"owner": {"reputation": 189, "user_id": 7349614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-FrZ-e-BY-Mo/AAAAAAAAAAI/AAAAAAAAAKQ/Wgq4gYKy8R4/photo.jpg?sz=128", "display_name": "Alexander Hoerl", "link": "https://stackoverflow.com/users/7349614/alexander-hoerl"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1522865548, "post_id": 49657181, "comment_id": 86324521, "body": "@Someprogrammerdude I&#39;m new to c++ how can I add a terminator and check for that? also I don&#39;t know the content of the variable and its length in the final version so the length should be determined dynamically."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1522865700, "post_id": 49657181, "comment_id": 86324598, "body": "Then I recommend <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list/388282#388282\">getting a good book or two (or three or more)</a>. The terminator is the character <code>&#39;\\0&#39;</code>. You add it after the last character you add to the buffer. And you check for it by normal comparison."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1522865827, "post_id": 49657181, "comment_id": 86324671, "body": "There is another solution to your problem as well, and that is to keep track of the number of characters in the array (in a variable), and use that as the upper limit of the loops where you iterate over the characters."}, {"owner": {"reputation": 189, "user_id": 7349614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-FrZ-e-BY-Mo/AAAAAAAAAAI/AAAAAAAAAKQ/Wgq4gYKy8R4/photo.jpg?sz=128", "display_name": "Alexander Hoerl", "link": "https://stackoverflow.com/users/7349614/alexander-hoerl"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1522865913, "post_id": 49657181, "comment_id": 86324726, "body": "@Someprogrammerdude isn&#39;t there a way to convert the buffer to a string without having to add \\0 int the first place?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1522866017, "post_id": 49657181, "comment_id": 86324799, "body": "No. A <code>char</code> string in C++ is actually named <b><i>null-terminated</b> byte string</i>. It is the terminator that turns an array of characters into a string."}, {"owner": {"reputation": 189, "user_id": 7349614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-FrZ-e-BY-Mo/AAAAAAAAAAI/AAAAAAAAAKQ/Wgq4gYKy8R4/photo.jpg?sz=128", "display_name": "Alexander Hoerl", "link": "https://stackoverflow.com/users/7349614/alexander-hoerl"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1522866231, "post_id": 49657181, "comment_id": 86324916, "body": "@Someprogrammerdude but when I don&#39;t convert it to a string but a char array would this solve my problem?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1522866328, "post_id": 49657181, "comment_id": 86324970, "body": "As I said in one of my later comments, you could skip the terminator <i>if you keep track of the current size</i>. It&#39;s not a <i>string</i> though, just an array of <code>char</code> elements."}, {"owner": {"reputation": 189, "user_id": 7349614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-FrZ-e-BY-Mo/AAAAAAAAAAI/AAAAAAAAAKQ/Wgq4gYKy8R4/photo.jpg?sz=128", "display_name": "Alexander Hoerl", "link": "https://stackoverflow.com/users/7349614/alexander-hoerl"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1522866543, "post_id": 49657181, "comment_id": 86325097, "body": "@Someprogrammerdude is there a way to get how much chars are in the byte array? The I could use this number to convert to char array."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1522866809, "post_id": 49657181, "comment_id": 86325264, "body": "That&#39;s why I keep telling you, <i>no</i> there isn&#39;t. Either you have a terminator, <i>or</i> you have a variable which will tell you. How do you fill the array? Where do the characters come from? You must initialize the contents <i>somewhere</i> in your code. There you can do either solution: Add terminator each and every time you add a new character, <i>or</i> save the position of the last character plus one in a variable as the length."}, {"owner": {"reputation": 189, "user_id": 7349614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-FrZ-e-BY-Mo/AAAAAAAAAAI/AAAAAAAAAKQ/Wgq4gYKy8R4/photo.jpg?sz=128", "display_name": "Alexander Hoerl", "link": "https://stackoverflow.com/users/7349614/alexander-hoerl"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1522866945, "post_id": 49657181, "comment_id": 86325344, "body": "@Someprogrammerdude The contents of the variable are gathered by a function that reads to content of a rfid card."}], "owner": {"reputation": 189, "user_id": 7349614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-FrZ-e-BY-Mo/AAAAAAAAAAI/AAAAAAAAAKQ/Wgq4gYKy8R4/photo.jpg?sz=128", "display_name": "Alexander Hoerl", "link": "https://stackoverflow.com/users/7349614/alexander-hoerl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 378, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1522864981, "creation_date": 1522863525, "last_edit_date": 1522864981, "question_id": 49657181, "link": "https://stackoverflow.com/questions/49657181/arduino-trying-to-convert-a-byte-array-to-a-string-results-in-a-strange-output", "title": "Arduino: Trying to convert a Byte Array to a String results in a strange output", "body": "<p>I'm trying to convert a byte array into a string using the following code.</p>\n\n<pre><code>String b = String((char*)buffer2);\n</code></pre>\n\n<p>but when I output the string I get a very strange result that contains white spaces and special characters that normally shouldn't be in the string. </p>\n\n<p>buffer2 is of the type byte and its length is 18.\nthis is how its declared: </p>\n\n<pre><code>byte buffer2[18];\n</code></pre>\n\n<p>When I use the following code to print the byte array I get the results I expect. </p>\n\n<pre><code>for (uint8_t i = 0; i &lt; 16; i++) {\n    Serial.write(buffer2[i] );\n}\n</code></pre>\n\n<p>I'm wondering how I can convert a byte array to a string the proper way.</p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 344, "user_id": 8877217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec886d4b5b1bdafa8b9ef5d452ba932e?s=128&d=identicon&r=PG&f=1", "display_name": "Sharad Khanna", "link": "https://stackoverflow.com/users/8877217/sharad-khanna"}, "edited": false, "score": 0, "creation_date": 1522863858, "post_id": 49657141, "comment_id": 86323567, "body": "Next time please put your code into the question. It is generally looked down upon to have links to other pages and pictures containing code"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9307131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2157bb53c7313263291ff7fb8c428405?s=128&d=identicon&r=PG&f=1", "display_name": "F. Peter", "link": "https://stackoverflow.com/users/9307131/f-peter"}, "edited": false, "score": 0, "creation_date": 1522864224, "post_id": 49657308, "comment_id": 86323788, "body": "It worked. Thank you very much. So I should establish my object in the file that I am calling the functions, not in the .h files where I access my class?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 1, "user_id": 9307131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2157bb53c7313263291ff7fb8c428405?s=128&d=identicon&r=PG&f=1", "display_name": "F. Peter", "link": "https://stackoverflow.com/users/9307131/f-peter"}, "edited": false, "score": 0, "creation_date": 1522864483, "post_id": 49657308, "comment_id": 86323942, "body": "The header is for things that are common to several files. Things that you just need locally are better declared where needed."}, {"owner": {"reputation": 1, "user_id": 9307131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2157bb53c7313263291ff7fb8c428405?s=128&d=identicon&r=PG&f=1", "display_name": "F. Peter", "link": "https://stackoverflow.com/users/9307131/f-peter"}, "edited": false, "score": 0, "creation_date": 1522864642, "post_id": 49657308, "comment_id": 86324032, "body": "Cool. Thank you again for the help."}], "tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": false, "score": 1, "last_activity_date": 1522863932, "creation_date": 1522863932, "answer_id": 49657308, "question_id": 49657141, "link": "https://stackoverflow.com/questions/49657141/specific-example-needed-error-already-defined-obj-one-or-more-multiple-defi/49657308#49657308", "title": "Specific example needed. ERROR: Already defined .obj + One or more multiple defined symbols", "body": "<p>You declare a variable <code>ARITH math;</code> in the header, and then include it in two different source files. So you get two copies of the variable.</p>\n\n<p>Just declare it in main.cpp, where it is used, and remove it from the header.</p>\n"}], "owner": {"reputation": 1, "user_id": 9307131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2157bb53c7313263291ff7fb8c428405?s=128&d=identicon&r=PG&f=1", "display_name": "F. Peter", "link": "https://stackoverflow.com/users/9307131/f-peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1522863932, "creation_date": 1522863383, "question_id": 49657141, "link": "https://stackoverflow.com/questions/49657141/specific-example-needed-error-already-defined-obj-one-or-more-multiple-defi", "title": "Specific example needed. ERROR: Already defined .obj + One or more multiple defined symbols", "body": "<p>I have recently been studying C++ and I am having a little trouble with using classes in separate files. I think I have the basic understanding down, but I keep receiving this same error and I'm not sure how to overcome it. I have searched online for a while, but answers seem vague and use a lot of technical jargon that someone new to c++, such as myself, would not understand. If you could I would appreciate some help on this issue with specific explanation as to why MY code is not working in this particular instance. Please, and thank you.</p>\n\n<p><a href=\"https://i.stack.imgur.com/kjJgc.png\" rel=\"nofollow noreferrer\">Code and subsequent errors...</a></p>\n\n<p><strong>NOTE!</strong> I am asking for an explanation specific to my code of exactly what needs to be done. Not a general answer as to what may be the problem. Seeing the problem solved will greatly help me in understanding the issue. I am having a very difficult time understanding the vague, general, and seemingly guessy responses of similar questions. Thank you again for the help.</p>\n"}, {"tags": ["c++", "sdl-2"], "comments": [{"owner": {"reputation": 1222, "user_id": 1576803, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/5fPDS.gif?s=128&g=1", "display_name": "aram", "link": "https://stackoverflow.com/users/1576803/aram"}, "edited": false, "score": 2, "creation_date": 1522866492, "post_id": 49657018, "comment_id": 86325072, "body": "Your program is crashing because gHelloWorld is NULL"}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1522872009, "post_id": 49657018, "comment_id": 86328319, "body": "And don&#39;t name your functions after system functions like <code>close()</code>.  <a href=\"https://stackoverflow.com/questions/48566070/sdl-error-while-creating-window\">Gonna have a bad time.</a>"}, {"owner": {"reputation": 19, "user_id": 9598089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5315c44d1c3345cdbf44e7e46659716?s=128&d=identicon&r=PG&f=1", "display_name": "nutron", "link": "https://stackoverflow.com/users/9598089/nutron"}, "edited": false, "score": 1, "creation_date": 1522873719, "post_id": 49657018, "comment_id": 86329235, "body": "I changed  <code>close()</code>  to <code>close_prg()</code> .   Are you sure gHelloWorld is still NULL ? it is at the top of the code , but in the main function it gets a value.  <code>gHelloWorld = SDL_CreateRGBSurfaceFrom((void*)pixels,             100,             100,             8,             100,             0x000000FF,             0x0000FF00,             0x00FF0000,             0);</code>"}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 2, "creation_date": 1522928495, "post_id": 49657018, "comment_id": 86353124, "body": "@nutron I fail to imagine why Aram (supposedly) decided to just run your program in debugger and quickly figure out where problem is, but you didn&#39;t even after that being pointed out. Seriously, use debugger, it helps. On other note - your pixel format makes no sense so SDL_CreateRGBSurfaceFrom fails to create a surface (and <code>SDL_GetError()</code> call will say &quot;Unknown pixel format&quot;, which explains the problem quite well). You say it is 8 bits per pixel (SDL implies it is paletted) but specify RGB masks way outside of 8 bit range. Setting masks to 0 creates paletted surface here."}, {"owner": {"reputation": 19, "user_id": 9598089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5315c44d1c3345cdbf44e7e46659716?s=128&d=identicon&r=PG&f=1", "display_name": "nutron", "link": "https://stackoverflow.com/users/9598089/nutron"}, "edited": false, "score": 0, "creation_date": 1522937458, "post_id": 49657018, "comment_id": 86359786, "body": "So i use codeblocks and use the GDB32.exe  in compiler settings &gt; toolchain executables &gt; resource compiler.   The debugger passes SDL_CreateRGBSurfaceFrom without a problem , but once it reaches SDL_SetPaletteColors , the crash occurs with these errors..."}, {"owner": {"reputation": 19, "user_id": 9598089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5315c44d1c3345cdbf44e7e46659716?s=128&d=identicon&r=PG&f=1", "display_name": "nutron", "link": "https://stackoverflow.com/users/9598089/nutron"}, "edited": false, "score": 0, "creation_date": 1522937683, "post_id": 49657018, "comment_id": 86359930, "body": "#0 0x40158e\tSDL_main(argc=argc@entry=1, args=args@entry=0x30008) (C:\\Users\\nutron\\Desktop\\codeblock_projects\\pixel\\01_hello_S&zwnj;&#8203;DL.cpp:117) #1 0x401f4e\tmain_utf8(argv=0x30008, argc=&lt;optimized out&gt;) (../src/main/windows/SDL_windows_main.c:126)  #2 ??\tmain_getcmdline () (../src/main/windows/SDL_windows_main.c:159)  #3 0x4021f5\tWinMain@16(hInst=0x400000, hPrev=0x0, szCmdLine=0x2743e97 &quot;&quot;, sw=10) (../src/main/windows/SDL_windows_main.c:202)  #4 0x418e0b\tmain () (??:??)"}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1522937814, "post_id": 49657018, "comment_id": 86360026, "body": "@nutron exactly, and you can use the same debugger to inspect values of your variables (and registers), and it will show your surface to be NULL, as that is what <code>SDL_CreateRGBSurfaceFrom</code> returned (it by no means supposed to crash - it couldn&#39;t figure out what you want it to do so it raised an error message and returned NULL). Crash happens later when you trying to read from NULL structure and do <code>gHelloWorld-&gt;format-&gt;palette</code>, which have nothing to do with function call. Also using e.g. <code>-g3</code> option and reducing compiler optimisation level usually helps with debugging."}, {"owner": {"reputation": 19, "user_id": 9598089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5315c44d1c3345cdbf44e7e46659716?s=128&d=identicon&r=PG&f=1", "display_name": "nutron", "link": "https://stackoverflow.com/users/9598089/nutron"}, "edited": false, "score": 0, "creation_date": 1523026022, "post_id": 49657018, "comment_id": 86403491, "body": "As you guys said , the return value of <code>SDL_CreateRGBSurfaceFrom</code> was NULL. I changed the parameters to fit the provided  data format and i get almost the right image i want to. <code>gHelloWorld = SDL_CreateRGBSurfaceFrom((void*)pixels,             100,             100,             8,             100,             0x00000000,             0x00000000,             0x00000000,             0);</code>  did the trick"}, {"owner": {"reputation": 19, "user_id": 9598089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5315c44d1c3345cdbf44e7e46659716?s=128&d=identicon&r=PG&f=1", "display_name": "nutron", "link": "https://stackoverflow.com/users/9598089/nutron"}, "edited": false, "score": 0, "creation_date": 1523026815, "post_id": 49657018, "comment_id": 86404028, "body": "now i have to figure out two things , why the gradient pattern crops to the right end and why  the debugger did not show the return value of <code>SDL_CreateRGBSurfaceFrom</code> to be NULL , unless NULL variables are not displayed at all.  Thanks guys for the hints. the documentation of SDL is a little sparse when it comes to examples for displaying surfaces generated within code the rather than surfaces loaded from image files."}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1523297158, "post_id": 49657018, "comment_id": 86492531, "body": "@nutron I suppose crop happens because you do <code>if(icnt2 == 99){icnt2 =0;}</code>, but at that point icnt2 already incremented, so it gets reset on each 99th pixel, while row have 100 (and 1 pixel offset accumulated on each line, moving it further and further). As for NULL - it is just a normal value, debugger is not supposed to trap on each NULL. Basically it is just a value that conventionally considered &#39;special&#39; to indicate empty value. If function can&#39;t do what it is requested, it often returns NULL to indicate it failed (but anyway - check documentation of function, there is no guarantee)"}], "owner": {"reputation": 19, "user_id": 9598089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5315c44d1c3345cdbf44e7e46659716?s=128&d=identicon&r=PG&f=1", "display_name": "nutron", "link": "https://stackoverflow.com/users/9598089/nutron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1522871846, "creation_date": 1522862925, "last_edit_date": 1522871846, "question_id": 49657018, "link": "https://stackoverflow.com/questions/49657018/sdl-setpalettecolors-crashes-program", "title": "SDL_SetPaletteColors crashes program", "body": "<p>The program is supposed take pixel data from a uni dimensional array and display it.  The pixel data is supposed to be 1 byte per pixel, which is supposed to result in a gray scale image.</p>\n\n<p>The result is supposed to look like this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/vDYr2.jpg\" alt=\"GRADIENT PATTERN\">\n<br></p>\n\n<p>Th problem i run into is that the \"SDL_SetPaletteColors\" command crashes the program.</p>\n\n<p>What am I doing wrong here?</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;SDL.h&gt;\n#include &lt;stdio.h&gt;\n\n//Screen dimension constants\nconst int SCREEN_WIDTH = 100;\nconst int SCREEN_HEIGHT = 100;\n\nchar* pixels;\nint icnt,icnt2;\n\n\n\n//Starts up SDL and creates window\nbool init();\n\n//Frees media and shuts down SDL\nvoid close();\n\n//The window we'll be rendering to\nSDL_Window* gWindow = NULL;\n\n//The surface contained by the window\nSDL_Surface* gScreenSurface = NULL;\n\n//The image we will load and show on the screen\n//SDL_Surface* gHelloWorld = NULL;\nSDL_Surface* gHelloWorld = NULL;\n\n\n\n\nbool init()\n{\n    //Initialization flag\n    bool success = true;\n\n    //Initialize SDL\n    if( SDL_Init( SDL_INIT_VIDEO ) &lt; 0 )\n    {\n        printf( \"SDL could not initialize! SDL_Error: %s\\n\", SDL_GetError() );\n        success = false;\n    }\n    else\n    {\n        //Create window\n        gWindow = SDL_CreateWindow( \"SDL Tutorial\", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, SCREEN_WIDTH, SCREEN_HEIGHT, SDL_WINDOW_SHOWN );\n        if( gWindow == NULL )\n        {\n            printf( \"Window could not be created! SDL_Error: %s\\n\", SDL_GetError() );\n            success = false;\n        }\n        else\n        {\n            //Get window surface\n            gScreenSurface = SDL_GetWindowSurface( gWindow );\n        }\n    }\n\n    return success;\n}\n\n\n\nvoid close()\n{\n    //Deallocate surface\n    SDL_FreeSurface( gHelloWorld );\n    gHelloWorld = NULL;\n\n    //Destroy window\n    SDL_DestroyWindow( gWindow );\n    gWindow = NULL;\n\n    //Quit SDL subsystems\n    SDL_Quit();\n}\n\nint main( int argc, char* args[] )\n{\n    pixels = new char[10000];      //pixel array\n    icnt2=0;\n    SDL_Color colors[256];\n\n    for(icnt=0;icnt&lt;10000;icnt++)  //gradient test image generator\n    {\n      pixels[icnt]=(char)icnt2;\n      icnt2++;\n      if(icnt2 == 99){icnt2 =0;}\n    }\n\n\n\n    //Start up SDL and create window\n    if( !init() )\n    {\n        printf( \"Failed to initialize!\\n\" );\n    }\n    else\n    {\n\n            gHelloWorld = SDL_CreateRGBSurfaceFrom((void*)pixels,\n            100,\n            100,\n            8,\n            100,\n            0x000000FF,\n            0x0000FF00,\n            0x00FF0000,\n            0);\n\n            for(icnt = 0; icnt &lt; 255; icnt++)\n            {\n                colors[icnt].r = colors[icnt].g = colors[icnt].b = icnt;\n            }\n\n            //program crashes here   ------------------\n            SDL_SetPaletteColors(gHelloWorld-&gt;format-&gt;palette, colors, 0, 255);   //program crashes here\n            //-----------------------------------------\n\n            //Apply the image\n            SDL_BlitSurface( gHelloWorld, NULL, gScreenSurface, NULL );\n\n            //Update the surface\n            SDL_UpdateWindowSurface( gWindow );\n\n            //Wait two seconds\n            SDL_Delay( 2000 );\n        //}\n    }\n\n    //Free resources and close SDL\n    close();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "linked-list"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9598192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa275ee5bc3b14838db1a62f908e8e06?s=128&d=identicon&r=PG&f=1", "display_name": "one31thirtyseven", "link": "https://stackoverflow.com/users/9598192/one31thirtyseven"}, "edited": false, "score": 0, "creation_date": 1522873027, "post_id": 49657599, "comment_id": 86328884, "body": "thanks! Yes, was not looking for a full solution. I&#39;ve just been stuck on this issue all day and was looking for a point in the right direction."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 0, "last_activity_date": 1522865004, "creation_date": 1522865004, "answer_id": 49657599, "question_id": 49657002, "link": "https://stackoverflow.com/questions/49657002/insert-node-at-an-index-linked-list-not-returning-list-correctly/49657599#49657599", "title": "insert node at an index: linked list not returning list correctly", "body": "<p>With </p>\n\n<pre><code>insertAt(list, createNode(value), index);\n</code></pre>\n\n<p><code>list</code> is passed by value into </p>\n\n<pre><code>NODE * insertAt(NODE * pList, NODE * pNode, int index)\n</code></pre>\n\n<p><code>pList</code> is a copy of <code>list</code>, so updates to <code>pList</code> made inside the function are not reflected in <code>list</code>.</p>\n\n<p>By accepting the return value in <code>list</code></p>\n\n<pre><code>list = insertAt(list, createNode(value), index);\n</code></pre>\n\n<p>updates <code>list</code> with the change. </p>\n\n<p>Unfortunately </p>\n\n<pre><code>list = insertAt(list, createNode(value), index);\n</code></pre>\n\n<p>appears to lose the rest of the list because </p>\n\n<pre><code>for (int i = 0; i &lt; index - 1; i++)\n{\n    temp = temp-&gt;next;\n}\n</code></pre>\n\n<p>iterated to find <code>index</code> and </p>\n\n<pre><code>return temp;\n</code></pre>\n\n<p>sends <code>index</code> back to be stored in <code>list</code>, leaking the beginning of the list.</p>\n\n<p>This is clearly for educational purposes (and if by some chance it isn't, use <code>std::list</code>) so I am uncomfortable providing a full solution.</p>\n\n<pre><code>NODE * insertAt(NODE *&amp; pList, NODE * pNode, int index)\n</code></pre>\n\n<p>should get you started down the right path.</p>\n\n<p>Other notes:</p>\n\n<p>Test for end of the list when iterating through it looking for <code>index</code> in case the list ends early.</p>\n\n<p>Exit the function as well as printing the error message if <code>pList</code> is null. There is no point to continuing with a non-existent list. </p>\n"}], "owner": {"reputation": 3, "user_id": 9598192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa275ee5bc3b14838db1a62f908e8e06?s=128&d=identicon&r=PG&f=1", "display_name": "one31thirtyseven", "link": "https://stackoverflow.com/users/9598192/one31thirtyseven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 49657599, "answer_count": 1, "score": 0, "last_activity_date": 1522865004, "creation_date": 1522862850, "last_edit_date": 1522863160, "question_id": 49657002, "link": "https://stackoverflow.com/questions/49657002/insert-node-at-an-index-linked-list-not-returning-list-correctly", "title": "insert node at an index: linked list not returning list correctly", "body": "<p>I am creating a linked list program, and a function I have created allows a user to insert a new node at any index in the list. </p>\n\n<hr>\n\n<p>The function has two cases, one if the node is to be inserted at the first index in the list (<em>index == 0)</em>, and one if the index is not the first index. </p>\n\n<p>The code only ever runs correctly for one of the cases, depending on how I call the function in main. </p>\n\n<p>In main, I have tried to call the function two ways, (value is the node value, and createNode creates the node.)</p>\n\n<hr>\n\n<p>The first is:</p>\n\n<pre><code>insertAt(list, createNode(value), index);\n</code></pre>\n\n<p>When I call the function this way, the function runs correctly except, the exception case for <em>index == 0</em> does not insert the node at all</p>\n\n<hr>\n\n<p>The second is: </p>\n\n<pre><code>list = insertAt(list, createNode(value), index);\n</code></pre>\n\n<p>When implemented this way, the (<em>index == 0</em>) case runs correctly, but the other case does not. </p>\n\n<p>In this case, the function returns a modified list without all the nodes before <em>index</em>.</p>\n\n<p>Here is the function code:</p>\n\n<pre><code>NODE * insertAt(NODE * pList, NODE * pNode, int index)\n{\n    if (!pList) {\n        cout &lt;&lt; \"error\";\n    }\n\n    NODE * temp = pList;\n\n    if (index == 0)\n    {\n        pNode-&gt;next = temp;\n        temp = pNode;\n        return temp;\n    }\n    else\n    {\n        for (int i = 0; i &lt; index - 1; i++)\n        {\n        temp = temp-&gt;next;\n        }\n\n        pNode-&gt;next = temp-&gt;next;\n        temp-&gt;next = pNode;\n\n        return temp;\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "mat"], "comments": [{"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1522864061, "post_id": 49656977, "comment_id": 86323698, "body": "<code>push_back(const Mat&amp; m)</code> is what you&#39;re using in your working example"}, {"owner": {"reputation": 2212, "user_id": 1595504, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/45ce3e54b7c852a2cf8fd568b1a573a1?s=128&d=identicon&r=PG", "display_name": "nayab", "link": "https://stackoverflow.com/users/1595504/nayab"}, "edited": false, "score": 0, "creation_date": 1522864162, "post_id": 49656977, "comment_id": 86323752, "body": "In your fail case, you are calling push_back with a pointer but reference expected."}, {"owner": {"reputation": 297, "user_id": 7033055, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DgO5C.png?s=128&g=1", "display_name": "yode", "link": "https://stackoverflow.com/users/7033055/yode"}, "reply_to_user": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1522864477, "post_id": 49656977, "comment_id": 86323936, "body": "@vu1p3n0x Is it not <a href=\"https://i.stack.imgur.com/guCmx.png\" rel=\"nofollow noreferrer\">this</a>?"}, {"owner": {"reputation": 155, "user_id": 9197066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bef5e21a03bc873503bfd202fc4674e2?s=128&d=identicon&r=PG&f=1", "display_name": "tem", "link": "https://stackoverflow.com/users/9197066/tem"}, "reply_to_user": {"reputation": 2212, "user_id": 1595504, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/45ce3e54b7c852a2cf8fd568b1a573a1?s=128&d=identicon&r=PG", "display_name": "nayab", "link": "https://stackoverflow.com/users/1595504/nayab"}, "edited": false, "score": 0, "creation_date": 1522864904, "post_id": 49656977, "comment_id": 86324183, "body": "@nayab Sorry, I cannot understand your comment. Would you mind to post an answer to specfiy it?"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1522874378, "post_id": 49656977, "comment_id": 86329559, "body": "push_back  for Mats with vectors does exist, but it is not documented. I would&#39;ve expected, that it assumes the Mat to be with 1 col only, since converting a vector to Mat like cv::Mat a = cv::Mat(vector) will generate a Nx1 matrix with N rows, but my tests didn&#39;t work, it always tells that either type or cols is wrong. Probably you&#39;d have to debug it by watching the code yourself and maybe adding debug code in openCV."}], "owner": {"reputation": 155, "user_id": 9197066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bef5e21a03bc873503bfd202fc4674e2?s=128&d=identicon&r=PG&f=1", "display_name": "tem", "link": "https://stackoverflow.com/users/9197066/tem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 447, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1522869601, "creation_date": 1522862768, "last_edit_date": 1522869601, "question_id": 49656977, "link": "https://stackoverflow.com/questions/49656977/how-to-use-push-back-to-process-mat-in-opencv", "title": "How to use push_back to process Mat in OpenCV", "body": "<p>Cross post <a href=\"http://answers.opencv.org/question/188629/how-to-use-push_back/\" rel=\"nofollow noreferrer\">here</a></p>\n\n<hr>\n\n<p>I can use it normally like</p>\n\n<pre><code>Mat mat = (Mat_&lt;uchar&gt;(2, 4) &lt;&lt; 5, 6, 0, 4, 0, 1, 9, 9);\nMat mat2 = (Mat_&lt;uchar&gt;(2, 4) &lt;&lt; 5, 77, 0, 4, 2, 3, 9, 6);\n//success\nmat.push_back(mat2);\n</code></pre>\n\n<p>But I note there are other two usage when I use <code>F12</code> to see the definition. Such as </p>\n\n<p><img src=\"https://i.stack.imgur.com/YEPaY.png\" alt=\"\"></p>\n\n<p>I think it supports <code>push_back</code> a <code>vector</code> into <code>Mat</code>, but I can not run it normally</p>\n\n<pre><code>//fail\nvector&lt;vector&lt;uchar&gt;&gt; v1 = { { 5, 77, 0, 4 },{ 2, 3, 9, 6 } };\nmat.push_back(v1);\n//fail\nvector&lt;uchar&gt; v2 = { 2, 3, 9, 6 };\nmat.push_back(v2);\n</code></pre>\n\n<p>Can anybody tell me something? What have I missed something?</p>\n"}, {"tags": ["c++", "xcode", "scanf", "fopen"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1522862831, "post_id": 49656970, "comment_id": 86322987, "body": "Is there a specific reason you choose to you use C mechanisms for this?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1522863003, "post_id": 49656970, "comment_id": 86323078, "body": "It&#39;s not clear from the provided code what the problem is. Notably, there is no hint as to what <code>fl</code> or <code>filename</code> are. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 1, "user_id": 9570561, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_87WJOKzUJs/AAAAAAAAAAI/AAAAAAAAAWk/wf48KAYwjxk/photo.jpg?sz=128", "display_name": "Hendrik Wijnant", "link": "https://stackoverflow.com/users/9570561/hendrik-wijnant"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1522917244, "post_id": 49656970, "comment_id": 86345234, "body": "I choose C++ because it happens to be something I learned in the past, no other reason than that :) My actual code is langer and the info in the txt files as well. I made a small code example that gives the same exception, to illustrate my problem.   Like mentioned in the comment, fl is an array of floats: float fl[10]; However I think the code is not the issue and It will rather be something in the settings of Xcode I guess."}, {"owner": {"reputation": 1, "user_id": 9570561, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_87WJOKzUJs/AAAAAAAAAAI/AAAAAAAAAWk/wf48KAYwjxk/photo.jpg?sz=128", "display_name": "Hendrik Wijnant", "link": "https://stackoverflow.com/users/9570561/hendrik-wijnant"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1522917710, "post_id": 49656970, "comment_id": 86345580, "body": "I edited the code. I hope this provides more details and if you need more info to be able to figure out the problem, please ask."}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1522919454, "post_id": 49656970, "comment_id": 86346772, "body": "No, you are using C mechanisms, not C++. Your code is not complete, so we cannot easily reproduce your issue. And you should <a href=\"https://code.tutsplus.com/tutorials/what-is-exc_bad_access-and-how-to-debug-it--cms-24544\" rel=\"nofollow noreferrer\">Google your error messages</a>"}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1522919626, "post_id": 49656970, "comment_id": 86346884, "body": "Also <a href=\"http://www.cplusplus.com/doc/tutorial/files/\" rel=\"nofollow noreferrer\">check the C++ tutorial</a>"}, {"owner": {"reputation": 1, "user_id": 9570561, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_87WJOKzUJs/AAAAAAAAAAI/AAAAAAAAAWk/wf48KAYwjxk/photo.jpg?sz=128", "display_name": "Hendrik Wijnant", "link": "https://stackoverflow.com/users/9570561/hendrik-wijnant"}, "edited": false, "score": 0, "creation_date": 1522920163, "post_id": 49656970, "comment_id": 86347270, "body": "I did google the problem and did not find any explanation for my problem."}, {"owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 0, "creation_date": 1522921653, "post_id": 49656970, "comment_id": 86348395, "body": "if you say that the problem only occurs when call both readfile functions wouldn&#39;t it be appropriate to show both then? Judging from the array &quot;filename&quot; if it is global and you have that in both functions without initializing it there is a high risk that is the culprit."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9570561, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_87WJOKzUJs/AAAAAAAAAAI/AAAAAAAAAWk/wf48KAYwjxk/photo.jpg?sz=128", "display_name": "Hendrik Wijnant", "link": "https://stackoverflow.com/users/9570561/hendrik-wijnant"}, "is_accepted": false, "score": 0, "last_activity_date": 1522921700, "creation_date": 1522921700, "answer_id": 49669254, "question_id": 49656970, "link": "https://stackoverflow.com/questions/49656970/exc-bad-access-code-1-address-0x68-in-second-read-method/49669254#49669254", "title": "EXC_BAD_ACCESS (code=1, address=0x68) in second read method", "body": "<p>Found the answer. Should have used 'strcpy' instead of 'strcat'. Thx for the help and suggestions!</p>\n"}, {"tags": [], "owner": {"reputation": 484, "user_id": 7473688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06d59a75869bae02d0696acb268413c4?s=128&d=identicon&r=PG&f=1", "display_name": "Owen Morgan", "link": "https://stackoverflow.com/users/7473688/owen-morgan"}, "is_accepted": false, "score": 0, "last_activity_date": 1522922192, "creation_date": 1522922192, "answer_id": 49669406, "question_id": 49656970, "link": "https://stackoverflow.com/questions/49656970/exc-bad-access-code-1-address-0x68-in-second-read-method/49669406#49669406", "title": "EXC_BAD_ACCESS (code=1, address=0x68) in second read method", "body": "<p>You never initialise <code>i</code>.</p>\n\n<p><code>for (int i == 0; i &lt; 10; i++){</code></p>\n\n<p>should be:</p>\n\n<p><code>for (int i = 0; i &lt; 10; i++){</code></p>\n\n<p><code>i</code> will likely contain garbage which causes you to dereference random bits of memory and gives your bad access.</p>\n"}], "owner": {"reputation": 1, "user_id": 9570561, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_87WJOKzUJs/AAAAAAAAAAI/AAAAAAAAAWk/wf48KAYwjxk/photo.jpg?sz=128", "display_name": "Hendrik Wijnant", "link": "https://stackoverflow.com/users/9570561/hendrik-wijnant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1089, "favorite_count": 1, "answer_count": 2, "score": -2, "last_activity_date": 1522922192, "creation_date": 1522862748, "last_edit_date": 1522921475, "question_id": 49656970, "link": "https://stackoverflow.com/questions/49656970/exc-bad-access-code-1-address-0x68-in-second-read-method", "title": "EXC_BAD_ACCESS (code=1, address=0x68) in second read method", "body": "<p>I am relatively new to using Xcode for c++. </p>\n\n<p>My problem is the following:  </p>\n\n<p>I am trying to read two txt file using fopen for which I made two different methods (in the example code I only have one method for keeping it short)  Both methods for reading the files work perfect seperatly, i.e. when I test them alone in the main, they read the data perfectly from the file. However if I call both methods together in the main, the exception \"EXC_BAD_ACCESS (code=1, address=0x68)\" is thrown when reading the second txt file. So it seems to be impossible to open and read more than 1 file. My code looks something like this: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;string&gt;\n#include &lt;time.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;vector&gt;\n#include &lt;iterator&gt;\n#include &lt;algorithm&gt;\n#include &lt;numeric&gt;\n#include &lt;sstream&gt;\n#include &lt;vector&gt;\n\nfloat fl[10];\n\nvoid readfile(std::string s){\n    strcat(filename, s.c_str());\n    input = fopen(filename, \"r\");\n    for (int i == 0; i &lt; 10; i++){\n       fscanf(input, \"%f\\t\", fl[i]);\n    }\n    fclose(input);\n}\n</code></pre>\n\n<p>Following main works </p>\n\n<pre><code>int main(int argc, const char * argv[]) {\n    std::string s1 = \"Input1\"; \n    readfile(s1);\n    return 0;\n}\n</code></pre>\n\n<p>In this main the exception is thrown in the method readfile(s2).</p>\n\n<pre><code>int main(int argc, const char * argv[]) {\n    std::string s1 = \"Input1.txt\"; \n    std::string s2 = \"Input2.txt\";\n    readfile(s1);\n    readfile(s2);\n    return 0;\n}\n</code></pre>\n\n<p>The txt files input1 and input2 contain 10 float numbers each separated by tabs.</p>\n\n<p>The exception is thrown at the fscanf line. Does anyone have a clue on what the problem might be?</p>\n"}, {"tags": ["c++", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 3300, "user_id": 6780025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e434396bfaf34dfdfe38f9ba8f6bfd11?s=128&d=identicon&r=PG&f=1", "display_name": "iga", "link": "https://stackoverflow.com/users/6780025/iga"}, "is_accepted": false, "score": 0, "last_activity_date": 1545446237, "creation_date": 1545446237, "answer_id": 53892643, "question_id": 49656961, "link": "https://stackoverflow.com/questions/49656961/tensorflow-c-api-difference-between-fetch-outputs-and-run-outputs-in-ses/53892643#53892643", "title": "Tensorflow C++ API: Difference between `fetch_outputs` and `run_outputs` in `Session::Run`", "body": "<p>Your understanding is mostly correct. <code>fetch_outputs</code> is a list of tensors that will be computed and returned in <code>outputs</code>. <code>run_outputs</code> is a list of operations that we need to run (e.g. update some variable) but don't care about their outputs.</p>\n\n<p>I am not sure what you mean by \"Is it also possible that I got the value of run_outputs as well\". If you want the resulting tensors from operations in <code>run_outputs</code>, just include these tensors in <code>fetch_outputs</code>. They are not included in <code>outputs</code> - that is their whole purpose.</p>\n"}], "owner": {"reputation": 11292, "user_id": 258355, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/69222caf76c445b2758f18bb815b5c22?s=128&d=identicon&r=PG", "display_name": "Summer_More_More_Tea", "link": "https://stackoverflow.com/users/258355/summer-more-more-tea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1545446237, "creation_date": 1522862706, "question_id": 49656961, "link": "https://stackoverflow.com/questions/49656961/tensorflow-c-api-difference-between-fetch-outputs-and-run-outputs-in-ses", "title": "Tensorflow C++ API: Difference between `fetch_outputs` and `run_outputs` in `Session::Run`", "body": "<p>Hello TensorFlow experts,</p>\n\n<p>I found in the C++ API signature of Session::Run as below</p>\n\n<pre><code>Status Run(\n  const RunOptions &amp; run_options,\n  const FeedType &amp; inputs,\n  const std::vector&lt; Output &gt; &amp; fetch_outputs,\n  const std::vector&lt; Operation &gt; &amp; run_outputs,\n  std::vector&lt; Tensor &gt; *outputs,\n  RunMetadata *run_metadata\n) const \n</code></pre>\n\n<p>What is the difference between <code>fetch_outputs</code> and <code>run_outputs</code>? Per my understanding at present, <code>run_outputs</code> is the final operation node evaluated during the run and <code>fetch_outputs</code> are all the intermediate values generated when evaluating <code>run_outputs</code>. And it looks the results of <code>fetch_outputs</code> are stored into <code>outputs</code> when function returns. Is it also possible that I got the value of <code>run_outputs</code> as well (or <code>run_outputs</code> has been included into <code>outputs</code>)?</p>\n"}, {"tags": ["c++", "oop", "g++"], "comments": [{"owner": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "edited": false, "score": 0, "creation_date": 1522862929, "post_id": 49656950, "comment_id": 86323041, "body": "The <code>function</code> doesn&#39;t live inside the object and the <code>pointer</code> <code>pCat</code> still exists. If you add a member function and try to access it after <code>delete</code> it will <code>segfault</code>"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 4, "creation_date": 1522863550, "post_id": 49656950, "comment_id": 86323376, "body": "undefined behavior, it can do anything. Maybe turn on the lights of white house xmas tree, maybe format yr hard drive. It can also appear to work perfectly - this is the most vexing UB as it will fail for sure at the most inconvenient time, like just as the rocket takes off"}, {"owner": {"reputation": 337, "user_id": 4091452, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/100002156861277/picture?type=large", "display_name": "Andrei Damian", "link": "https://stackoverflow.com/users/4091452/andrei-damian"}, "edited": false, "score": 1, "creation_date": 1522866004, "post_id": 49656950, "comment_id": 86324785, "body": "undefined behaviour always works."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 337, "user_id": 4091452, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/100002156861277/picture?type=large", "display_name": "Andrei Damian", "link": "https://stackoverflow.com/users/4091452/andrei-damian"}, "edited": false, "score": 1, "creation_date": 1522870801, "post_id": 49656950, "comment_id": 86327580, "body": "@AndreiDamian: A very strange way to put it. I&#39;d say that when you have undefined behaviour, then &quot;it works&quot; and &quot;it doesn&#39;t work&quot; are both meaningless statements."}, {"owner": {"reputation": 337, "user_id": 4091452, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/100002156861277/picture?type=large", "display_name": "Andrei Damian", "link": "https://stackoverflow.com/users/4091452/andrei-damian"}, "edited": false, "score": 0, "creation_date": 1522871445, "post_id": 49656950, "comment_id": 86327950, "body": "I wanted to say that when you have undefined behaviour, anything the code would do is &quot;correct&quot;, and that means that &quot;it works&quot; as expected."}], "answers": [{"tags": [], "owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "is_accepted": false, "score": 6, "last_activity_date": 1522863181, "creation_date": 1522863181, "answer_id": 49657079, "question_id": 49656950, "link": "https://stackoverflow.com/questions/49656950/c-object-deleted-created-with-new-but-member-function-still-working/49657079#49657079", "title": "C++: object deleted (created with new) but member function still working (?)", "body": "<blockquote>\n  <p>why is not crashing</p>\n</blockquote>\n\n<p>Because dereferencing <code>nullptr</code> or accessing a deleted object is undefined behaviour. C++ doesn't have required crashes, but crashes can be the result of undefined behaviour.</p>\n\n<blockquote>\n  <p>which precautions should I take</p>\n</blockquote>\n\n<p>That's a rather broad topic. The most important thing in C++ is not to use dynamic allocation if you don't need to. Write:</p>\n\n<pre><code>Cat cat;\ncat.meow();\n</code></pre>\n\n<p>If you cannot do that, use <code>std::unique_ptr</code>:</p>\n\n<pre><code>auto cat_ptr = std::make_unique&lt;Cat&gt;();\ncat_ptr-&gt;meow();\n</code></pre>\n\n<p>If you need a collection, don't use <code>new[]</code>. Use <code>std::vector</code>:</p>\n\n<pre><code>std::vector&lt;Cat&gt; cats;\nstd::vector&lt;std::unique_ptr&lt;Cat&gt;&gt; cat_ptrs;\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 4753962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/556ff350cc75cc8102659d28e84ce983?s=128&d=identicon&r=PG&f=1", "display_name": "rsp", "link": "https://stackoverflow.com/users/4753962/rsp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1522863181, "creation_date": 1522862687, "last_edit_date": 1522863044, "question_id": 49656950, "link": "https://stackoverflow.com/questions/49656950/c-object-deleted-created-with-new-but-member-function-still-working", "title": "C++: object deleted (created with new) but member function still working (?)", "body": "<p>Just for curiosity and experimenting I wrote following code and now am trying to understand whats happening after delete... why is the cat object still meowing ??</p>\n\n<p>the compiler version I use:</p>\n\n<pre><code>g++ (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609\n</code></pre>\n\n<p>and compile the code: </p>\n\n<pre><code>g++ cat.cpp -pedantic -Wall -o cat\n</code></pre>\n\n<p>With other compilers may crash when calling meou() after delete.</p>\n\n<p>I would like to know </p>\n\n<ul>\n<li>why is not crashing</li>\n<li>which precautions should I take</li>\n</ul>\n\n<p>the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\n\nclass Cat\n{\n    public:\n        Cat()  { cout &lt;&lt; \"Cat construct\" &lt;&lt; endl; }\n        ~Cat() { cout &lt;&lt; \"Cat destruct\" &lt;&lt; endl; }\n        void meow(); \n};\n\nvoid Cat::meow(void)\n{\n    cout &lt;&lt; \"meow...\" &lt;&lt; endl;\n}    \n\nint main()\n{\n    Cat * pCat = new Cat;    \n    pCat-&gt;meow();    \n    cout &lt;&lt; \"pCat = \" &lt;&lt; pCat &lt;&lt; endl;    \n    delete pCat;    \n    pCat = NULL;    \n    cout &lt;&lt; \"pCat = \" &lt;&lt; pCat &lt;&lt; endl;    \n    pCat-&gt;meow();    \n    cout &lt;&lt; \"why still meowing?!\" &lt;&lt; endl;    \n    return 0;\n}\n</code></pre>\n\n<p>the output:</p>\n\n<pre><code>Cat construct\nmeow...\npCat = 0x2147030\nCat destruct\npCat = 0\nmeow...\nwhy still meowing?!\n</code></pre>\n"}, {"tags": ["c++", "opengl", "sdl", "sdl-2"], "comments": [{"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 3, "creation_date": 1522862789, "post_id": 49656917, "comment_id": 86322959, "body": "In core mode you <b>must have</b> a named <a href=\"https://www.khronos.org/opengl/wiki/Vertex_Specification#Vertex_Array_Object\" rel=\"nofollow noreferrer\">Vertex Array Object</a>, because the default vertex array object &quot;0&quot; is not valid."}, {"owner": {"reputation": 1282, "user_id": 1598568, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/373928e3d048d0ec62102ae86228e4ce?s=128&d=identicon&r=PG", "display_name": "William Oliver", "link": "https://stackoverflow.com/users/1598568/william-oliver"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1522863403, "post_id": 49656917, "comment_id": 86323285, "body": "@Rabbid76 Thanks.   So do you mean I need to add something like     <code>glGenVertexArrays(1, &amp;vao); glBindVertexArray(vao);</code> ?  I just tried that, and I get &quot;EXC_BAD_ACCESS (code=1, address=0x0)&quot;"}, {"owner": {"reputation": 1282, "user_id": 1598568, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/373928e3d048d0ec62102ae86228e4ce?s=128&d=identicon&r=PG", "display_name": "William Oliver", "link": "https://stackoverflow.com/users/1598568/william-oliver"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 1, "creation_date": 1522863665, "post_id": 49656917, "comment_id": 86323446, "body": "@Rabbid76 Just figured it out, the answer to that issue was here <a href=\"https://stackoverflow.com/a/46377012/1598568\">stackoverflow.com/a/46377012/1598568</a> (needed to add <code>glewExperimental = GL_TRUE;</code>)  Thanks! Your solution worked for me. If you post it as an answer I will accept it."}, {"owner": {"reputation": 1282, "user_id": 1598568, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/373928e3d048d0ec62102ae86228e4ce?s=128&d=identicon&r=PG", "display_name": "William Oliver", "link": "https://stackoverflow.com/users/1598568/william-oliver"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1522863963, "post_id": 49656917, "comment_id": 86323643, "body": "@Rabbid76 I wouldn&#39;t say its a duplicate, the main issue was not knowing that I needed a named Vertex Array Object in the first place. That was an answer about the EXC_BAD_ACCESS issue."}], "answers": [{"comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 2, "creation_date": 1522865200, "post_id": 49657380, "comment_id": 86324350, "body": "The easy fix is to make a single VAO and bind it, and then proceed as usual."}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 3, "last_activity_date": 1522864202, "creation_date": 1522864202, "answer_id": 49657380, "question_id": 49656917, "link": "https://stackoverflow.com/questions/49656917/switching-from-opengl-2-1-with-glsl-1-2-to-opengl-3-3-with-glsl-version-1-5-brea/49657380#49657380", "title": "Switching from OpenGL 2.1 with GLSL 1.2 to OpenGL 3.3 with GLSL version 1.5 breaks my code", "body": "<blockquote>\n  <p>There are no compile time errors and no runtime errors, but it only renders a blank screen. However, when I change...</p>\n</blockquote>\n\n<p>In core mode you must have a named <a href=\"https://www.khronos.org/opengl/wiki/Vertex_Specification#Vertex_Array_Object\" rel=\"nofollow noreferrer\">Vertex Array Object</a>, because the default vertex array object \"0\" is not valid.</p>\n\n<hr/>\n\n<blockquote>\n  <p>So do you mean I need to add something like <code>glGenVertexArrays(1, &amp;vao);</code> <code>glBindVertexArray(vao);</code> ? I just tried that, and I get \"EXC_BAD_ACCESS (code=1, address=0x0)\"</p>\n</blockquote>\n\n<p><a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glGenVertexArrays.xhtml\" rel=\"nofollow noreferrer\"><code>glGenVertexArrays</code></a> is available in since OpenGL version 3.0. If vertex array objects are supported can be checked by <code>glewGetExtension(\"GL_ARB_vertex_array_object\")</code>.</p>\n\n<p>Glew can enable additional extensions by:</p>\n\n<pre><code>glewExperimental = GL_TRUE;\nglewInit();\n</code></pre>\n\n<p>See the <a href=\"http://glew.sourceforge.net/basic.html\" rel=\"nofollow noreferrer\">GLEW documentation</a>:</p>\n\n<blockquote>\n  <p>GLEW obtains information on the supported extensions from the graphics driver. Experimental or pre-release drivers, however, might not report every available extension through the standard mechanism, in which case GLEW will report it unsupported. To circumvent this situation, the <code>glewExperimental</code> global switch can be turned on by setting it to <code>GL_TRUE</code> before calling <code>glewInit()</code>, which ensures that all extensions with valid entry points will be exposed.</p>\n</blockquote>\n"}], "owner": {"reputation": 1282, "user_id": 1598568, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/373928e3d048d0ec62102ae86228e4ce?s=128&d=identicon&r=PG", "display_name": "William Oliver", "link": "https://stackoverflow.com/users/1598568/william-oliver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 0, "accepted_answer_id": 49657380, "answer_count": 1, "score": 2, "last_activity_date": 1522864202, "creation_date": 1522862552, "question_id": 49656917, "link": "https://stackoverflow.com/questions/49656917/switching-from-opengl-2-1-with-glsl-1-2-to-opengl-3-3-with-glsl-version-1-5-brea", "title": "Switching from OpenGL 2.1 with GLSL 1.2 to OpenGL 3.3 with GLSL version 1.5 breaks my code", "body": "<p>I am trying to switch my OpenGL version from OpenGL 2.1 to OpenGL 3.3. The minimal reproducible OpenGL 3.3 code is as follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#include &lt;SDL2/SDL.h&gt;\n#include &lt;GL/glew.h&gt;\n\nstatic const GLuint WIDTH = 512;\nstatic const GLuint HEIGHT = 512;\nstatic const GLchar* vertex_shader_source =\n\"#version 330\\n\"\n\"in vec2 coord2d;\\n\"\n\"void main() {\\n\"\n\"    gl_Position = vec4(coord2d, 0.0, 1.0);\\n\"\n\"}\\n\";\nstatic const GLchar* fragment_shader_source =\n\"#version 330\\n\"\n\"out vec4 color;\\n\"\n\"void main() {\\n\"\n\"    color = vec4(1.0, 0.0, 0.0, 1.0);\\n\"\n\"}\\n\";\nstatic GLfloat vertices[] = {\n    0.0,  0.8,\n    -0.8, -0.8,\n    0.8, -0.8,\n};\n\nGLuint common_get_shader_program(\n                                 const char *vertex_shader_source,\n                                 const char *fragment_shader_source\n                                 ) {\n    GLchar *log = NULL;\n    GLint log_length, success;\n    GLuint fragment_shader, program, vertex_shader;\n\n    /* Vertex shader */\n    vertex_shader = glCreateShader(GL_VERTEX_SHADER);\n    glShaderSource(vertex_shader, 1, &amp;vertex_shader_source, NULL);\n    glCompileShader(vertex_shader);\n    glGetShaderiv(vertex_shader, GL_COMPILE_STATUS, &amp;success);\n    glGetShaderiv(vertex_shader, GL_INFO_LOG_LENGTH, &amp;log_length);\n    log = (char*) malloc(log_length);\n    if (log_length &gt; 0) {\n        glGetShaderInfoLog(vertex_shader, log_length, NULL, log);\n        printf(\"vertex shader log:\\n\\n%s\\n\", log);\n    }\n    if (!success) {\n        printf(\"vertex shader compile error\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    /* Fragment shader */\n    fragment_shader = glCreateShader(GL_FRAGMENT_SHADER);\n    glShaderSource(fragment_shader, 1, &amp;fragment_shader_source, NULL);\n    glCompileShader(fragment_shader);\n    glGetShaderiv(fragment_shader, GL_COMPILE_STATUS, &amp;success);\n    glGetShaderiv(fragment_shader, GL_INFO_LOG_LENGTH, &amp;log_length);\n    if (log_length &gt; 0) {\n        log = (char*)realloc(log, log_length);\n        glGetShaderInfoLog(fragment_shader, log_length, NULL, log);\n        printf(\"fragment shader log:\\n\\n%s\\n\", log);\n    }\n    if (!success) {\n        printf(\"fragment shader compile error\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    /* Link shaders */\n    program = glCreateProgram();\n    glAttachShader(program, vertex_shader);\n    glAttachShader(program, fragment_shader);\n    glLinkProgram(program);\n    glGetProgramiv(program, GL_LINK_STATUS, &amp;success);\n    glGetProgramiv(program, GL_INFO_LOG_LENGTH, &amp;log_length);\n    if (log_length &gt; 0) {\n        log = (char*)realloc(log, log_length);\n        glGetProgramInfoLog(program, log_length, NULL, log);\n        printf(\"shader link log:\\n\\n%s\\n\", log);\n    }\n    if (!success) {\n        printf(\"shader link error\");\n        exit(EXIT_FAILURE);\n    }\n\n    /* Cleanup. */\n    free(log);\n    glDeleteShader(vertex_shader);\n    glDeleteShader(fragment_shader);\n    return program;\n}\n\nint main(void) {\n    GLint attribute_coord2d;\n    GLuint program, vbo;\n    SDL_Event event;\n\n    SDL_Init(SDL_INIT_TIMER | SDL_INIT_VIDEO);\n    SDL_GL_SetAttribute (SDL_GL_CONTEXT_MAJOR_VERSION, 3);\n    SDL_GL_SetAttribute (SDL_GL_CONTEXT_MINOR_VERSION, 3);\n    SDL_GL_SetAttribute (SDL_GL_CONTEXT_PROFILE_MASK, SDL_GL_CONTEXT_PROFILE_CORE);\n\n    SDL_Window *window;\n    SDL_GLContext gl_context;\n    window = SDL_CreateWindow(__FILE__, 0, 0,\n                              WIDTH, HEIGHT, SDL_WINDOW_OPENGL);\n    gl_context = SDL_GL_CreateContext(window);\n    glewInit();\n\n    /* Shader setup. */\n    program = common_get_shader_program(vertex_shader_source, fragment_shader_source);\n    attribute_coord2d = glGetAttribLocation(program, \"coord2d\");\n\n    /* Buffer setup. */\n    glGenBuffers(1, &amp;vbo);\n    glBindBuffer(GL_ARRAY_BUFFER, vbo);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);\n    glVertexAttribPointer(attribute_coord2d, 2, GL_FLOAT, GL_FALSE, 0, 0);\n    glBindBuffer(GL_ARRAY_BUFFER, 0);\n\n    /* Global draw state */\n    glUseProgram(program);\n    glViewport(0, 0, WIDTH, HEIGHT);\n    glClearColor(0.0f, 0.0f, 0.0f, 1.0f);\n\n    /* Main loop. */\n    while (1) {\n        glClear(GL_COLOR_BUFFER_BIT);\n        glEnableVertexAttribArray(attribute_coord2d);\n        glDrawArrays(GL_TRIANGLES, 0, 3);\n        glDisableVertexAttribArray(attribute_coord2d);\n        SDL_GL_SwapWindow(window);\n        if (SDL_PollEvent(&amp;event) &amp;&amp; event.type == SDL_QUIT)\n            break;\n    }\n\n    /* Cleanup. */\n    glDeleteBuffers(1, &amp;vbo);\n    glDeleteProgram(program);\n    SDL_GL_DeleteContext(gl_context);\n    SDL_DestroyWindow(window);\n    SDL_Quit();\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>There are no compile time errors and no runtime errors, but it only renders a blank screen. However, when I change <code>vertex_shader_source</code> to </p>\n\n<pre><code>\"#version 120\\n\"\n\"attribute vec2 coord2d;\\n\"\n\"void main() {\\n\"\n\"    gl_Position = vec4(coord2d, 0.0, 1.0);\\n\"\n\"}\\n\";\n</code></pre>\n\n<p><code>fragment_shader_source</code> to </p>\n\n<pre><code>\"#version 120\\n\"\n\"void main() {\\n\"\n\"    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\\n\"\n\"}\\n\";\n</code></pre>\n\n<p>and comment out the lines</p>\n\n<pre><code>SDL_GL_SetAttribute (SDL_GL_CONTEXT_MAJOR_VERSION, 3);\nSDL_GL_SetAttribute (SDL_GL_CONTEXT_MINOR_VERSION, 3);\nSDL_GL_SetAttribute (SDL_GL_CONTEXT_PROFILE_MASK, SDL_GL_CONTEXT_PROFILE_CORE);\n</code></pre>\n\n<p>the code works and I get the expected output. </p>\n\n<p><a href=\"https://i.stack.imgur.com/3CouJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3CouJ.png\" alt=\"enter image description here\"></a></p>\n\n<p>It feels like the OpenGL 3.3 version of the code should work, especially considering there are very few differences between the two code snippets. I have also checked to make sure that the vertex buffer is being set correctly using <code>glGetBufferSubData</code>. As far as I can tell, it is being set correctly. </p>\n\n<p>The only two possibilities I can think of are</p>\n\n<ol>\n<li>There is something I do not understand about the vertex shader and/or fragment shader source code.</li>\n<li>There is something wrong with my build process. I.e. a library is missing or not being linked. </li>\n</ol>\n\n<p>Concerning the second possibility, I am using XCode on Mac OSX, and these are the libraries I am linking with. </p>\n\n<p><a href=\"https://i.stack.imgur.com/ED1zr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ED1zr.png\" alt=\"enter image description here\"></a></p>\n\n<p>Could anyone help me figure out what is wrong?</p>\n"}, {"tags": ["c++", "cmake", "clion"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1522862803, "post_id": 49656740, "comment_id": 86322970, "body": "After configure the project <i>in-source</i> (with build directory equal to source one), you cannot configure the project <i>out-of-source</i> until you remove CMake configuration files, like <code>CMakeCache.txt</code>, from the source dir."}, {"owner": {"reputation": 704, "user_id": 1833497, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/69f90ea46a8896e7435cd259e018adb9?s=128&d=identicon&r=PG", "display_name": "Andreas T", "link": "https://stackoverflow.com/users/1833497/andreas-t"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1522864910, "post_id": 49656740, "comment_id": 86324187, "body": "Sorry, I don&#39;t get what that means. I am just using CLion and don&#39;t do anything manually. I already tried deleting CMakeCache.txt but it is re-generated."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1522865826, "post_id": 49656740, "comment_id": 86324669, "body": "Hm, I am not expert in CLion, but, as <code>CMakeCache.txt</code> is regenerated in the source dir, it looks like you have setup CLion to perform <i>in-source</i> build (with the build directory equal to the source one)."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 11566398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2310b81c88370ea41681793a9a3c7d87?s=128&d=identicon&r=PG&f=1", "display_name": "stkgn", "link": "https://stackoverflow.com/users/11566398/stkgn"}, "is_accepted": false, "score": 1, "last_activity_date": 1559037954, "last_edit_date": 1559037954, "creation_date": 1559034297, "answer_id": 56338582, "question_id": 49656740, "link": "https://stackoverflow.com/questions/49656740/clion-contexts-and-cmakecache/56338582#56338582", "title": "CLion contexts and CMakeCache", "body": "<p><strong>!! please backup your project before applying my instructions !!</strong></p>\n\n<p>I have got the same problem after adding new target to the CMakeLists.txt</p>\n\n<p>To solve this error: </p>\n\n<blockquote>\n  <p>Cannot generate 'Release' into .....<code>&lt;path&gt;</code>.....\n  CMakeCache.txt is found in the project dir, only in-source generation will be performed.</p>\n</blockquote>\n\n<p>I delete folders <strong>cmake-build-*</strong> and <strong>CMakeCache.txt</strong></p>\n\n<p>After it I have got next error (or something like this):</p>\n\n<blockquote>\n  <p>Error cmake cache </p>\n</blockquote>\n\n<p>To solve this error I just <strong>restart the clion</strong>.\nAlso sometimes I press <strong><code>File</code> -> <code>Reload CMake Project</code></strong>, but visually nothing happends. </p>\n\n<p>As result I have got workable project.</p>\n"}], "owner": {"reputation": 704, "user_id": 1833497, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/69f90ea46a8896e7435cd259e018adb9?s=128&d=identicon&r=PG", "display_name": "Andreas T", "link": "https://stackoverflow.com/users/1833497/andreas-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2350, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1559037954, "creation_date": 1522861921, "question_id": 49656740, "link": "https://stackoverflow.com/questions/49656740/clion-contexts-and-cmakecache", "title": "CLion contexts and CMakeCache", "body": "<p>I am running into the problem of easily switching between Debug and Release builds of my projects in CLion. After looking around, I found that in 2016, the system was changed and many users ran into trouble. However, none of the fixes that were suggested helped me.</p>\n\n<p>Under Settings / Cmake, I entered two profiles, Release and Debug. However, in both the configuration selection at the top right of the editor and the context selection at the bottom right of the editor, only the first of the two profiles is available.</p>\n\n<p>Also, the first profile seems to work fine with CMake, whereas for the second one I get an error message:</p>\n\n<pre><code>Cannot generate 'Debug' into /home/foo/code/cmake-build-debug\nCMakeCache.txt is found in the project dir, only in-source generation will be performed.\n\n[Failed to reload]\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 5453649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9101e9230bca056fe8e2d8095f40e178?s=128&d=identicon&r=PG&f=1", "display_name": "pad11", "link": "https://stackoverflow.com/users/5453649/pad11"}, "edited": false, "score": 0, "creation_date": 1522862390, "post_id": 49656799, "comment_id": 86322742, "body": "Yep, that did it!  Didn&#39;t think to check that since the errors pointed at other things."}], "tags": [], "owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "is_accepted": true, "score": 4, "last_activity_date": 1522862116, "creation_date": 1522862116, "answer_id": 49656799, "question_id": 49656734, "link": "https://stackoverflow.com/questions/49656734/expected-a-or-errors-when-splitting-up-scripts-that-worked-as-one-script/49656799#49656799", "title": "Expected a &quot;)&quot; or &quot;;&quot; errors when splitting up scripts that worked as one script", "body": "<p>You cannot have both:</p>\n\n<pre><code>#define BFS\n</code></pre>\n\n<p>and</p>\n\n<pre><code>int* BFS(Graph G, int V, int r);\n</code></pre>\n\n<p>as this will change the function name, during pre-processing. As a first step, please try</p>\n\n<pre><code>#ifndef BFS_H\n#define BFS_H\n</code></pre>\n\n<p>instead. Does that fix the error?</p>\n"}], "owner": {"reputation": 191, "user_id": 5453649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9101e9230bca056fe8e2d8095f40e178?s=128&d=identicon&r=PG&f=1", "display_name": "pad11", "link": "https://stackoverflow.com/users/5453649/pad11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 49656799, "answer_count": 1, "score": -1, "last_activity_date": 1522862309, "creation_date": 1522861890, "last_edit_date": 1522862309, "question_id": 49656734, "link": "https://stackoverflow.com/questions/49656734/expected-a-or-errors-when-splitting-up-scripts-that-worked-as-one-script", "title": "Expected a &quot;)&quot; or &quot;;&quot; errors when splitting up scripts that worked as one script", "body": "<p>I previously had one script that included a function and the main in one script.  I decided to have main on its own but now running into an error that isn't clear to me.  The scripts are below.  I can add the rest if necessary.  But yeah, if I don't have <code>bfs.h</code> and <code>main.cpp</code> and have main where BFs is defined then there are no issues.  Getting errors in <code>bfs.h</code> and <code>main.cpp</code> though.  Comments at the lines...</p>\n\n<p>bfs.h</p>\n\n<pre><code>#ifndef BFS\n#define BFS\n\n#include \"graph.h\"\n\nint* BFS(Graph G, int V, int r);  // error here at G, int and )\n\n#endif\n</code></pre>\n\n<p>Exact error messages</p>\n\n<p>1)  At G - this declaration has no storage class or type specifier</p>\n\n<p>2)  At Int - expected an indentifer</p>\n\n<p>3)  At r  -expected a ';'</p>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"bfs.h\"\n#include \"graph.h\"\n\nint main() {\n    int V = 4;\n    Graph G(V);  // ERROR HERE - expected a \";\"\n    G.addEdge(0, 1);\n    G.addEdge(0, 2);\n    G.addEdge(1, 2);\n    G.addEdge(2, 0);\n    G.addEdge(2, 3);\n    int* parents = BFS(G, V, 0);\n    for (int i = 0; i &lt; V; i++)\n        std::cout &lt;&lt; parents[i] &lt;&lt; \" \";\n    std::cout &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Exact error - \"expected a ;\"</p>\n\n<p>graph.h</p>\n\n<pre><code>#ifndef GRAPH\n#define GRAPH\n\n#include &lt;list&gt;\n\nclass Graph {\n    int V;\n    std::list&lt;int&gt; *adj;\n\npublic:\n    Graph(int V);\n    void addEdge(int v, int w);\n    std::list&lt;int&gt; getAdj(int u);\n};\n\n#endif\n</code></pre>\n"}, {"tags": ["c++", "serialization", "boost"], "comments": [{"owner": {"reputation": 168, "user_id": 750913, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/ER9IR.jpg?s=128&g=1", "display_name": "Joseph", "link": "https://stackoverflow.com/users/750913/joseph"}, "edited": false, "score": 0, "creation_date": 1522863461, "post_id": 49656499, "comment_id": 86323315, "body": "What version of boost are you using? What file and line number is that static assertion at?"}], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 0, "last_activity_date": 1522874791, "creation_date": 1522874791, "answer_id": 49660141, "question_id": 49656499, "link": "https://stackoverflow.com/questions/49656499/c-boost-deserialize-char-array-into-an-obj/49660141#49660141", "title": "c++ boost deserialize char array into an obj", "body": "<p>You're deserializing into a <code>const</code> object. Here's the actual code around that failing assert:</p>\n\n<pre><code>// cannot load data into a \"const\" object unless it's a\n// wrapper around some other non-const object.\nBOOST_STATIC_ASSERT(typex::value);\n</code></pre>\n\n<p>So, fix it :)</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/c3f1dc6d9ed44518\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/serialization/string.hpp&gt;\n#include &lt;boost/serialization/serialization.hpp&gt;\n\nstruct MyData {\n    std::string s;\n    float values[7];\n\n  private:\n    friend class boost::serialization::access;\n    template &lt;typename Ar&gt;\n    void serialize(Ar&amp; ar, unsigned) { ar &amp; s &amp; values; }\n};\n\n#include &lt;boost/iostreams/device/array.hpp&gt;\n#include &lt;boost/iostreams/device/back_inserter.hpp&gt;\n#include &lt;boost/iostreams/stream.hpp&gt;\n#include &lt;boost/archive/binary_oarchive.hpp&gt;\n#include &lt;boost/archive/binary_iarchive.hpp&gt;\nnamespace bio = boost::iostreams;\n\nstd::vector&lt;char&gt; to_buffer(const MyData&amp; obj) {     \n    std::vector&lt;char&gt; buffer;\n\n    bio::stream&lt;bio::back_insert_device&lt;std::vector&lt;char&gt; &gt; &gt; os(buffer);\n\n    namespace ba = boost::archive;\n    ba::binary_oarchive oa(os, ba::archive_flags::no_header);\n\n    oa &lt;&lt; obj;\n    return buffer;\n}\n\nvoid from_buffer(char* buffer, MyData&amp; obj) {     \n    bio::stream&lt;bio::array_source&gt; is(buffer, 4096);\n\n    namespace ba = boost::archive;\n    ba::binary_iarchive ia(is, ba::archive_flags::no_header);\n\n    ia &gt;&gt; obj;\n}\n\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\nstatic inline std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, MyData const&amp; object) {\n    os &lt;&lt; \"s:\" &lt;&lt; std::quoted(object.s) &lt;&lt; \", values:[\";\n    for (float v : object.values)\n        os &lt;&lt; \" \" &lt;&lt; v;\n    return os &lt;&lt; \" ]\";\n}\n\nint main() {\n    auto buffer = to_buffer(MyData { \"hello world\", { 1,2,3,4,5,6,7 } });\n\n    MyData received;\n    from_buffer(buffer.data(), received);\n\n    std::cout &lt;&lt; \"Received: \" &lt;&lt; received &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>Received: s:\"hello world\", values:[ 1 2 3 4 5 6 7 ]\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 850399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc38445e6d27f286f28060953c598947?s=128&d=identicon&r=PG", "display_name": "chans", "link": "https://stackoverflow.com/users/850399/chans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 0, "accepted_answer_id": 49660141, "answer_count": 1, "score": 1, "last_activity_date": 1522874791, "creation_date": 1522861016, "question_id": 49656499, "link": "https://stackoverflow.com/questions/49656499/c-boost-deserialize-char-array-into-an-obj", "title": "c++ boost deserialize char array into an obj", "body": "<p>in boost bus schedule sample code.<br>\n<a href=\"https://www.boost.org/doc/libs/1_66_0/libs/serialization/example/demo.cpp\" rel=\"nofollow noreferrer\">bus schedule sample</a>\nI try to deserialize the data in a char array.  So I added this function.  But it has this error.  What is wrong?</p>\n\n<pre><code>void frombuffer_schedule(char* buffer,const bus_schedule&amp; obj)\n{     \n    boost::iostreams::stream&lt;boost::iostreams::array_source&gt;  is(buffer, 4096);\n    boost::archive::binary_iarchive ia(is,boost::archive::archive_flags::no_header);\n    ia &gt;&gt; obj;\n}\n</code></pre>\n\n<p>The error is \"error: static assertion failed: typex::value\"</p>\n"}, {"tags": ["c++", "eclipse", "gdb", "pydev"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1522860913, "post_id": 49656375, "comment_id": 86321969, "body": "Just guessing here, but was the library built with debug symbols enabled?"}, {"owner": {"reputation": 258, "user_id": 1780392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/a095851ac60cb511f6ac04ebc97c8862?s=128&d=identicon&r=PG", "display_name": "xjsc16x", "link": "https://stackoverflow.com/users/1780392/xjsc16x"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1522861547, "post_id": 49656375, "comment_id": 86322296, "body": "Yes, debug symbols are enabled"}, {"owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "edited": false, "score": 0, "creation_date": 1522898524, "post_id": 49656375, "comment_id": 86337079, "body": "Are you on Windows? If so, <code>&#47;home&#47;myname</code> probably <i>doesn&#39;t</i> exist, your <code>ls</code> only pretends that it does (but GDB doesn&#39;t)."}, {"owner": {"reputation": 258, "user_id": 1780392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/a095851ac60cb511f6ac04ebc97c8862?s=128&d=identicon&r=PG", "display_name": "xjsc16x", "link": "https://stackoverflow.com/users/1780392/xjsc16x"}, "edited": false, "score": 0, "creation_date": 1522938632, "post_id": 49656375, "comment_id": 86360698, "body": "No, I am in a dev VM running CentOS6.9"}, {"owner": {"reputation": 3193, "user_id": 6608866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a0bd6f09706e701866702448c5924?s=128&d=identicon&r=PG&f=1", "display_name": "PaulR", "link": "https://stackoverflow.com/users/6608866/paulr"}, "edited": false, "score": 0, "creation_date": 1524660113, "post_id": 49656375, "comment_id": 87061248, "body": "what does &quot;/home/myname/.../&quot; mean? Is this three dots notation an extension in your shell, possibly enabled by a configuration? My guess is, that gdb is not using the same configuration or shell. Or was that just a placeholder for regular folders you inserted in the posting?"}, {"owner": {"reputation": 258, "user_id": 1780392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/a095851ac60cb511f6ac04ebc97c8862?s=128&d=identicon&r=PG", "display_name": "xjsc16x", "link": "https://stackoverflow.com/users/1780392/xjsc16x"}, "reply_to_user": {"reputation": 3193, "user_id": 6608866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a0bd6f09706e701866702448c5924?s=128&d=identicon&r=PG&f=1", "display_name": "PaulR", "link": "https://stackoverflow.com/users/6608866/paulr"}, "edited": false, "score": 1, "creation_date": 1524663366, "post_id": 49656375, "comment_id": 87063565, "body": "@PaulR, it&#39;s just short notation for the full file path. There&#39;s nothing special about the path."}], "answers": [{"tags": [], "owner": {"reputation": 371, "user_id": 963454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e468915dae7e5bfd1867f09d6a00472?s=128&d=identicon&r=PG", "display_name": "Steve Adams", "link": "https://stackoverflow.com/users/963454/steve-adams"}, "is_accepted": false, "score": 0, "last_activity_date": 1548153488, "creation_date": 1548153488, "answer_id": 54306381, "question_id": 49656375, "link": "https://stackoverflow.com/questions/49656375/eclipse-gdb-cant-find-source-files/54306381#54306381", "title": "Eclipse GDB can&#39;t find source files", "body": "<p>For cmake projects:</p>\n\n<p>The launch configuration can default to the wrong executable, so go to launch configuration => main  and check the \"C/C++ Application\"\nChange it from this:  build/default/\nto this:  build/cmake.debug.linux.x86_64/</p>\n\n<p>(you can do this with the \"Search Project\" button.\nThis will then pick up the correct debug version and all your source will be found when you debug.</p>\n"}], "owner": {"reputation": 258, "user_id": 1780392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/a095851ac60cb511f6ac04ebc97c8862?s=128&d=identicon&r=PG", "display_name": "xjsc16x", "link": "https://stackoverflow.com/users/1780392/xjsc16x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1228, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1548153488, "creation_date": 1522860579, "last_edit_date": 1522939398, "question_id": 49656375, "link": "https://stackoverflow.com/questions/49656375/eclipse-gdb-cant-find-source-files", "title": "Eclipse GDB can&#39;t find source files", "body": "<p>My workspaces are located in my home directory.</p>\n\n<p>I am currently trying to debug python code which loads a shared C++ library, using Eclipse Oxygen and PyDev. I can debug the Python files just fine.</p>\n\n<p>I run the program (pytest unit test if that matters) with a breakpoint somewhere in the test before the shared library is called (but after it is loaded) and then run a C/C++ Attach to Application debug and attach to the paused python thread. I then set a breakpoint in my C++ code and resume python, and get this from the GDB console output:</p>\n\n<blockquote>\n  <p>No source file named /home/myname/.../models/sourcefile.cpp</p>\n</blockquote>\n\n<p>Doing an <code>ls /home/myname/.../models</code> clearly shows  that that file exists.</p>\n\n<p>I'm not sure if this matters but my library was compiled with CMake where the source and build directory are siblings. E.g. workspace is ~/dev and source is in ~/dev/sourceFolder and build files are in ~/dev/buildFolder</p>\n\n<p>Update:</p>\n\n<p>I was able to attach to the running Python debug thread manually in the console using <code>gdb python &lt;thread_number&gt;</code>. This works and finds my source files just fine, allowing me to debug manually in the console. It would still be much faster and less cumbersome if I were able to get it to work in Eclipse.</p>\n\n<p>Things I've tried in the C++ debug config settings:</p>\n\n<ul>\n<li>In preferences, changing C/C++ -> Debug -> Source Lookup to have\nabsolute file path first, profile first, and relative file path\nfirst</li>\n<li>In CppDebug settings debugger tab, manually added build and source directory to shared libraries</li>\n<li>In CppDebug settings source tab, manually added source directory in source lookup path</li>\n</ul>\n\n<p>None of these seemed to do much.</p>\n"}, {"tags": ["c++", "qt", "qml"], "comments": [{"owner": {"reputation": 73, "user_id": 1825803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DzXzZ.jpg?s=128&g=1", "display_name": "Erick Guzm&#225;n", "link": "https://stackoverflow.com/users/1825803/erick-guzm%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1522862288, "post_id": 49656366, "comment_id": 86322687, "body": "You can expose specific C++ properties to QML using Q_PROPERTY. <a href=\"http://doc.qt.io/qt-5/qtqml-cppintegration-exposecppattributes.html\" rel=\"nofollow noreferrer\">Exposing Attributes of C++ Types to QML</a>"}, {"owner": {"reputation": 11, "user_id": 4877490, "user_type": "registered", "profile_image": "https://graph.facebook.com/849917451741899/picture?type=large", "display_name": "Pedro Martinez", "link": "https://stackoverflow.com/users/4877490/pedro-martinez"}, "reply_to_user": {"reputation": 73, "user_id": 1825803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DzXzZ.jpg?s=128&g=1", "display_name": "Erick Guzm&#225;n", "link": "https://stackoverflow.com/users/1825803/erick-guzm%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1522863898, "post_id": 49656366, "comment_id": 86323595, "body": "Thanks for your reply. I really don&#39;t know much about Q_PROPERTY. The property I want to modify is of a type QtPositioning.coordinate. I would have to redefine that on C++ side. I&#39;m really not an expert and the examples in the link are not very useful. I am after all exposing the signal emitted as a property which does get updated in the QML. I can confirm the signal is being detected but the map not being updated. I don&#39;t know maybe a different example would be more useful."}, {"owner": {"reputation": 11, "user_id": 4877490, "user_type": "registered", "profile_image": "https://graph.facebook.com/849917451741899/picture?type=large", "display_name": "Pedro Martinez", "link": "https://stackoverflow.com/users/4877490/pedro-martinez"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1522870565, "post_id": 49656366, "comment_id": 86327463, "body": "I&#39;m not asking how to make a connection from C++ to QML but rather how to handle the parameters passed in my particular case. @eyllanesc if you have nothing to add and you did not read the code posted or all the way then please let someone else help."}, {"owner": {"reputation": 11, "user_id": 4877490, "user_type": "registered", "profile_image": "https://graph.facebook.com/849917451741899/picture?type=large", "display_name": "Pedro Martinez", "link": "https://stackoverflow.com/users/4877490/pedro-martinez"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1522871677, "post_id": 49656366, "comment_id": 86328105, "body": "@eyllanesc you could have asked for clarification on the question if you did not understand it properly. Now based on your erroneous interpretation of the question when people that can potentially help will just pass because you improperly marked as such. This is why I do think it is a bad thing to do. Many people that come here for answers might not be professional developers but can find solutions in other examples and people suggesting edits to their codes."}, {"owner": {"reputation": 11, "user_id": 4877490, "user_type": "registered", "profile_image": "https://graph.facebook.com/849917451741899/picture?type=large", "display_name": "Pedro Martinez", "link": "https://stackoverflow.com/users/4877490/pedro-martinez"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1522871944, "post_id": 49656366, "comment_id": 86328281, "body": "@eyllanesc By the way I read the documentation extensively before posting a problem here. Sometimes the documentation might not work for a person. Might no be clear to a person with a different background for example. If you really want to help instead of marking duplicates you could have looked at the problem from your perspective and suggest something."}, {"owner": {"reputation": 11, "user_id": 4877490, "user_type": "registered", "profile_image": "https://graph.facebook.com/849917451741899/picture?type=large", "display_name": "Pedro Martinez", "link": "https://stackoverflow.com/users/4877490/pedro-martinez"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1522872237, "post_id": 49656366, "comment_id": 86328469, "body": "@eyllanesc So telling me to do an investigation is you idea of a full glass? You explicitly said and I quote &quot;This question was asked innumerable times&quot; you clearly misunderstood the question then because the signal is implemented correctly in the code. Keep marking duplicates it is easier in the end."}, {"owner": {"reputation": 11, "user_id": 4877490, "user_type": "registered", "profile_image": "https://graph.facebook.com/849917451741899/picture?type=large", "display_name": "Pedro Martinez", "link": "https://stackoverflow.com/users/4877490/pedro-martinez"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1522872904, "post_id": 49656366, "comment_id": 86328823, "body": "@eyllanesc From your perspective you were wrong and you are not even capable of admitting it."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1522872982, "post_id": 49656366, "comment_id": 86328867, "body": "Well, it seems we&#39;re not going to understand each other, bye :D Anyway, if I see something bad I&#39;ll notice, do not take it personel, <a href=\"https://stackoverflow.com/help/be-nice\">be nice</a>"}, {"owner": {"reputation": 11, "user_id": 4877490, "user_type": "registered", "profile_image": "https://graph.facebook.com/849917451741899/picture?type=large", "display_name": "Pedro Martinez", "link": "https://stackoverflow.com/users/4877490/pedro-martinez"}, "edited": false, "score": 0, "creation_date": 1522880722, "post_id": 49656366, "comment_id": 86332467, "body": "Remember, it is ok to be wrong otherwise how will you learn! Don&#39;t erase your comments there is feedback there as well. All feedback is useful! :D #benice"}], "answers": [{"tags": [], "owner": {"reputation": 1544, "user_id": 6475652, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/8d783a89da27c7d36c0935fc2af7b38e?s=128&d=identicon&r=PG&f=1", "display_name": "Fryz", "link": "https://stackoverflow.com/users/6475652/fryz"}, "is_accepted": false, "score": 0, "last_activity_date": 1522870110, "last_edit_date": 1522870110, "creation_date": 1522869291, "answer_id": 49658731, "question_id": 49656366, "link": "https://stackoverflow.com/questions/49656366/qml-refresh-issue-while-receivinig-c-signals-passed-from-c/49658731#49658731", "title": "QML: Refresh issue while receivinig C++ signals passed from C++", "body": "<p>As described here <a href=\"http://doc.qt.io/qt-5/qtqml-cppintegration-overview.html\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/qtqml-cppintegration-overview.html</a>, you have basically three ways to integrate C++ with QML code :</p>\n\n<ol>\n<li>Expose your C++ class to QML ( properties, signals, slots..) and register it as an instanciable QML type</li>\n<li>Same as 1 but register it as a singleton type so it is instantiated by the QML engine, not explicitly in the QML code</li>\n<li>Same as 1 but make it available to QML via context properties for example, in this case, you create the instance of your class on the C++ side of your application</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 4877490, "user_type": "registered", "profile_image": "https://graph.facebook.com/849917451741899/picture?type=large", "display_name": "Pedro Martinez", "link": "https://stackoverflow.com/users/4877490/pedro-martinez"}, "is_accepted": false, "score": 0, "last_activity_date": 1522877879, "last_edit_date": 1522877879, "creation_date": 1522870372, "answer_id": 49659026, "question_id": 49656366, "link": "https://stackoverflow.com/questions/49656366/qml-refresh-issue-while-receivinig-c-signals-passed-from-c/49659026#49659026", "title": "QML: Refresh issue while receivinig C++ signals passed from C++", "body": "<p>Solved it by moving the Connections inside the Map and redefining in the mainwindow.cpp and mainwindow.h the way the QML is instantiated. That way the map is refreshed properly every time the QML captures the signal.</p>\n\n<p>Added to mainwindow.cpp</p>\n\n<pre><code>private:\ncoordUpdate *upd;\n</code></pre>\n\n<p>Changed</p>\n\n<pre><code>MainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n\n    ui-&gt;setupUi(this);\n    ui-&gt;startU-&gt;setDisabled(true);\n    setupLogging();\n    setupGPS();\n\n    coordUpdate upd;\n    ui-&gt;quickWidget-&gt;rootContext()-&gt;setContextProperty(\"updcoord\",upd);\n    ui-&gt;quickWidget-&gt;setSource(QUrl(\"qrc:/geom_map.qml\"));\n\n\n}\n</code></pre>\n\n<p>to </p>\n\n<pre><code>MainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n\n    ui-&gt;setupUi(this);\n    ui-&gt;startU-&gt;setDisabled(true);\n    setupLogging();\n    setupGPS();\n\n    upd = new coordUpdate;\n    ui-&gt;quickWidget-&gt;rootContext()-&gt;setContextProperty(\"updcoord\",upd);\n    ui-&gt;quickWidget-&gt;setSource(QUrl(\"qrc:/geom_map.qml\"));\n\n\n}\n</code></pre>\n\n<p>and in the QML</p>\n\n<pre><code>Rectangle {\n    width: 300\n    height: 300\n    visible: true\n\n\n\n    Plugin {\n        id: osmPlugin\n        name: \"esri\"\n\n    }\n\n\n    Map {\n        id: map\n        anchors.fill: parent\n        plugin: osmPlugin\n//        center: QtPositioning.coordinate(y, x)\n        zoomLevel: 15\n        activeMapType: map.supportedMapTypes[1] // This selects thetype of mapa to display\n\n        MapCircle {\n            id:circle\n            center: QtPositioning.coordinate(y, x) \n            radius: 50\n            color: 'red'\n\n        }\n\n        // Create connections with c++\n        Connections             // Define actions for custom slots\n        {\n            id:cppConnection\n            target: updcoord\n            onSendCoord: {\n                  // To access signal parameter, name the parameter\n                console.log(\"signal received\",ycoord,xcoord)\n                circle.center = QtPositioning.coordinate(ycoord,xcoord)\n\n\n           }\n        }\n\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4877490, "user_type": "registered", "profile_image": "https://graph.facebook.com/849917451741899/picture?type=large", "display_name": "Pedro Martinez", "link": "https://stackoverflow.com/users/4877490/pedro-martinez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 341, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1522881594, "creation_date": 1522860560, "last_edit_date": 1522881594, "question_id": 49656366, "link": "https://stackoverflow.com/questions/49656366/qml-refresh-issue-while-receivinig-c-signals-passed-from-c", "title": "QML: Refresh issue while receivinig C++ signals passed from C++", "body": "<p>Hi i have bee playing recently with Qt for mobile development. I started simple using all the code in C++ (given that I have more experience with it) and now I'm starting to use QML. In my app I have a QQuickWidget in the ui where I display a map. The goal is simple to center the map every time the phone emits the coordinates.\nThis is how I set up my QML</p>\n\n<pre><code>ui-&gt;quickWidget-&gt;setSource(QUrl(\"qrc:/geom_map.qml\"));\n</code></pre>\n\n<p>and this is my QML file</p>\n\n<pre><code>Rectangle {\nwidth: 300\nheight: 300\nvisible: true\n\n\nPlugin {\n    id: osmPlugin\n    name: \"esri\"\n    // specify plugin parameters if necessary\n    // PluginParameter {\n    //     name:\n    //     value:\n    // }\n}\n\n\nMap {\n    id: map\n    anchors.fill: parent\n    plugin: osmPlugin\n    center: QtPositioning.coordinate(51.0, -114.0) \n    zoomLevel: 10\n    activeMapType: map.supportedMapTypes[1] // This selects the type of map to display\n\n\n\n}\n</code></pre>\n\n<p>I declared a class to handle the sending of the coordinates to the QML and setup a connection on the QML for receiving the signal</p>\n\n<pre><code>    #ifndef COORDUPDATE_H\n#define COORDUPDATE_H\n\n#include &lt;QObject&gt;\n#include &lt;QVariant&gt;\n\nclass coordUpdate : public QObject\n{\n    Q_OBJECT\npublic:\n    explicit coordUpdate(QObject *parent = nullptr);\n//    Q_INVOKABLE void sendupd(double xcoord, double ycoord);\nprivate:\n\n\nsignals:\n    void sendCoord(QVariant xcoord,QVariant ycoord);\n\n\nprivate slots:\n\n\n\npublic slots:\n    void sendupd(double xcoord, double ycoord);\n\n\n\n\n};\n\n#endif // COORDUPDATE_H\n\n\n#include \"coordupdate.h\"\n#include &lt;QDebug&gt;\n\ncoordUpdate::coordUpdate(QObject *parent) :\n    QObject(parent)\n{\n\n}\n\n\n\nvoid coordUpdate::sendupd(double xcoord,double ycoord){\n\n    emit sendCoord(xcoord,ycoord);\n    qDebug() &lt;&lt; \"signal emitted\";\n}\n</code></pre>\n\n<p>The problem I'm having is that if I call </p>\n\n<pre><code>void MainWindow::setGPSLocation(QGeoPositionInfo geoPositionInfo)\n{\n\n    statusBar()-&gt;showMessage(\"Updating position...\",1000);\n    QString text=\"Location=unknown\";\n\n    if (geoPositionInfo.isValid())\n    {\n        // get the current location coordinates\n        QGeoCoordinate geoCoordinate = geoPositionInfo.coordinate();\n\n        // transform coordinates to lat/lon\n        qreal latitude = geoCoordinate.latitude();\n        qreal longitude = geoCoordinate.longitude();\n        qreal altitude = geoCoordinate.altitude();\n        double lon = longitude;\n        double lat = latitude;\n\n\n        //on position updated we also need to record the data\n\n\n\n\n    coordUpdate upd;\n    ui-&gt;quickWidget-&gt;rootContext()-&gt;setContextProperty(\"updcoord\",&amp;upd);\n    ui-&gt;quickWidget-&gt;setSource(QUrl(\"qrc:/geom_map.qml\"));\n    upd.sendupd(longitude,latitude);\n    qDebug() &lt;&lt; \"reading coordinates\" &lt;&lt; longitude &lt;&lt; latitude;\n\n\n    }\n\n}\n</code></pre>\n\n<p>Then the coordinates get updated but the whole thing gets refreshed. Is there a better way to update the information sent to the QML file? I know I would better developing in QML exclusively but I very interested in the use of QQuickWiget for the time being.</p>\n\n<p>I'm not asking how to connect a signal from C++ to QML. The code does that. What I was asking was how to properly update the map with the information passed. I already read the documentation. Unfortunately not much of the documentation focus on QQuickWidgets but rather have a main class instantiated with QQmlEngine.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 1, "creation_date": 1522860087, "post_id": 49656161, "comment_id": 86321447, "body": "<a href=\"http://en.cppreference.com/w/cpp/types/is_standard_layout\" rel=\"nofollow noreferrer\"><code>std::is_standard_layout</code></a> must be true, and then you could use <a href=\"http://en.cppreference.com/w/cpp/types/offsetof\" rel=\"nofollow noreferrer\"><code>offsetof</code></a> otherwise this is UB as far as I know."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 3, "creation_date": 1522860129, "post_id": 49656161, "comment_id": 86321470, "body": "Tagging the class with __attribute__((packed)) might be a way to ensure the data really is layed out contiguously."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1522860425, "post_id": 49656161, "comment_id": 86321679, "body": "You can&#39;t legalize your hack.  The only thing we know about a standard layout class is the first member shares the same address as the class. after that there could be padding.  Your asserts at least will stop it from compiling if your assumptions break."}, {"owner": {"reputation": 1281, "user_id": 9242492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBHcC.gif?s=128&g=1", "display_name": "George Robinson", "link": "https://stackoverflow.com/users/9242492/george-robinson"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1522875532, "post_id": 49656161, "comment_id": 86330180, "body": "@Jeremy  Do you think __attribute__((packed)) or #pragma pack(1) have any influence on the memory layout of derived class member variables ?"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1522877911, "post_id": 49656161, "comment_id": 86331359, "body": "@KarolaN I would expect them to (assuming you apply the tags to both the base and derived classes), although I admit I&#39;ve never tried it myself so I might be wrong."}, {"owner": {"reputation": 1281, "user_id": 9242492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBHcC.gif?s=128&g=1", "display_name": "George Robinson", "link": "https://stackoverflow.com/users/9242492/george-robinson"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1522939312, "post_id": 49656161, "comment_id": 86361189, "body": "@Mgetz  The user &quot;etarion&quot; wrote, that this is not a &quot;standard layout&quot; because it contains data members in different classes of the inheritance hierarchy and the &quot;offsetof&quot; might work only with C++17 compilers."}], "answers": [{"comments": [{"owner": {"reputation": 15751, "user_id": 524436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a5336a2844502fe58c2c06bc12c32ed?s=128&d=identicon&r=PG", "display_name": "etarion", "link": "https://stackoverflow.com/users/524436/etarion"}, "edited": false, "score": 1, "creation_date": 1522912121, "post_id": 49656270, "comment_id": 86342065, "body": "offsetof is only guaranteed to work for standard layout types, this is not a standard layout type (it has data members in different classes of the inheritance hierarchy). Before C++17, using offsetof on a non-standard-layout class is undefined (and OP is unlikely to use a C++17 compiler already), from C++17 it&#39;s an optional feature (does not need to be implemented)."}], "tags": [], "owner": {"reputation": 1405, "user_id": 1476792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c301fe5a5792851c5eb25873d06214?s=128&d=identicon&r=PG", "display_name": "Yimin Rong", "link": "https://stackoverflow.com/users/1476792/yimin-rong"}, "is_accepted": false, "score": 1, "last_activity_date": 1522860239, "creation_date": 1522860239, "answer_id": 49656270, "question_id": 49656161, "link": "https://stackoverflow.com/questions/49656161/how-to-legalize-a-hack-which-assumes-adjacent-storage-of-a-derived-class-variabl/49656270#49656270", "title": "How to legalize a hack which assumes adjacent storage of a derived class variable?", "body": "<p>I would use <code>offsetof</code> and assert that the offset of <code>checksum</code> is in the expected place. Your code will probably work as-is anywhere, but if someone mucks up the base class, your code may no longer work. Safest is the hard way.</p>\n"}, {"comments": [{"owner": {"reputation": 1281, "user_id": 9242492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBHcC.gif?s=128&g=1", "display_name": "George Robinson", "link": "https://stackoverflow.com/users/9242492/george-robinson"}, "edited": false, "score": 0, "creation_date": 1522937382, "post_id": 49669289, "comment_id": 86359723, "body": "Unfortunately, the first assert() will fail after such modification"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 1281, "user_id": 9242492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBHcC.gif?s=128&g=1", "display_name": "George Robinson", "link": "https://stackoverflow.com/users/9242492/george-robinson"}, "edited": false, "score": 1, "creation_date": 1522938469, "post_id": 49669289, "comment_id": 86360563, "body": "That seems like an incorrect assumption to start with, regardless of my proposed modification. So it&#39;s probably worth fixing that as well."}, {"owner": {"reputation": 1281, "user_id": 9242492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBHcC.gif?s=128&g=1", "display_name": "George Robinson", "link": "https://stackoverflow.com/users/9242492/george-robinson"}, "edited": false, "score": 0, "creation_date": 1523198507, "post_id": 49669289, "comment_id": 86450940, "body": "From the beginning, I was clear in my question, that this type of solution is unacceptable.  I specifically wrote &quot;...without resorting to copying the xdata and checksum to a 3rd variable adjacently &quot;."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 1281, "user_id": 9242492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBHcC.gif?s=128&g=1", "display_name": "George Robinson", "link": "https://stackoverflow.com/users/9242492/george-robinson"}, "edited": false, "score": 1, "creation_date": 1523204855, "post_id": 49669289, "comment_id": 86453161, "body": "@KarolaN: Well, the whole point of this solution is to copy only the checksum,not <code>xdata</code>. Copying an 8 byte value with locality of reference is practically free."}, {"owner": {"reputation": 1281, "user_id": 9242492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBHcC.gif?s=128&g=1", "display_name": "George Robinson", "link": "https://stackoverflow.com/users/9242492/george-robinson"}, "edited": false, "score": 0, "creation_date": 1523369383, "post_id": 49669289, "comment_id": 86526553, "body": "Yes, copying 8 bytes of checksum has minimum performance penalty, but increasing the size of xdata[] changes the result of sizeof(xdata) and the size of entire class instance, that contains it.  This breaks the code code that uses this base class all over the place.  I did not exclude changing these sizes, but I am going to do it now."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1522921809, "creation_date": 1522921809, "answer_id": 49669289, "question_id": 49656161, "link": "https://stackoverflow.com/questions/49656161/how-to-legalize-a-hack-which-assumes-adjacent-storage-of-a-derived-class-variabl/49669289#49669289", "title": "How to legalize a hack which assumes adjacent storage of a derived class variable?", "body": "<p>The easiest way to make this legal is to change the base class to <code>xdata[BYTES + sizeof(std::int64_t)]</code>. This way, you don't need to copy both <code>xdata</code> and <code>checksum</code> to a third variable; instead you just copy <code>checksum</code> to the reserved space at the end of <code>xdata</code>.</p>\n"}], "owner": {"reputation": 1281, "user_id": 9242492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBHcC.gif?s=128&g=1", "display_name": "George Robinson", "link": "https://stackoverflow.com/users/9242492/george-robinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1523369464, "creation_date": 1522859812, "last_edit_date": 1523369464, "question_id": 49656161, "link": "https://stackoverflow.com/questions/49656161/how-to-legalize-a-hack-which-assumes-adjacent-storage-of-a-derived-class-variabl", "title": "How to legalize a hack which assumes adjacent storage of a derived class variable?", "body": "<p>While analyzing a 3rd party code, I came across a hack, which assumes that the variable in a base class is stored adjacently to another variable of a class that is derived from it.  The derived class adds a checksum variable and a function, that calculates a hash of the data from the Base Class concatenated with the checksum in the Derived Class.</p>\n\n<p>This hack works, but it seems that the assumption it makes, cannot be relied upon.\nThe abridged code illustrating this, is listed below ( see the comment: \"UGLY HACK!\" ) :</p>\n\n<pre><code>template&lt;unsigned int BYTES&gt;\nclass BaseClass {\nprotected:\n        unsigned char xdata[BYTES];\n\npublic:\n        BaseClass() { memset(&amp;xdata[0], 0, sizeof(xdata));  };\n        void FooFn() {};\n        unsigned char* BigFn() {};\n};\n\n\ntemplate&lt;unsigned int BYTES&gt;\nclass DerivedClass : public BaseClass&lt;BYTES&gt; {\nprotected:\n    __int64 checksum;\n\n    __int64 CalcChecksum(unsigned char* pBegin, unsigned char* pEnd);\n\npublic:\n    DerivedClass();\n\n    void HashOfDataAndChecksum(unsigned __int64* outputhash);\n};    \n//-----------------------------------------------------------------------\n\ntemplate&lt;unsigned int BYTES&gt;\n__int64 DerivedClass&lt;BYTES&gt;::CalcChecksum(unsigned char* pBegin, unsigned char* pEnd) {\n    __int64 sum = 0;\n\n    while (pBegin++ &lt; pEnd)\n        sum += *pBegin;\n\n    return ~sum;\n}\n\ntemplate&lt;unsigned int BYTES&gt;\nDerivedClass&lt;BYTES&gt;::DerivedClass() {\n    checksum = CalcChecksum(&amp;BaseClass&lt;BYTES&gt;::xdata[0], &amp;BaseClass&lt;BYTES&gt;::xdata[sizeof(BaseClass&lt;BYTES&gt;::xdata)]);\n}\n\ntemplate&lt;unsigned int BYTES&gt;\nvoid DerivedClass&lt;BYTES&gt;::HashOfDataAndChecksum(unsigned __int64* outputhash) {\n    int i;\n    unsigned char* pBegin = &amp;BaseClass&lt;BYTES&gt;::xdata[0];\n    unsigned char* pEnd = (unsigned char*)(&amp;checksum) + sizeof(checksum);  //UGLY HACK!  Works only if the checksum immediately follows xdata[] in memory.\n    unsigned char* x = pBegin;\n\n    while (x &lt; pBegin + ( (pEnd-pBegin) &amp; 0xFFFFFFFFFFFFFFC0) )\n    {\n        for (i = 0; i &lt; 29; i++)\n        {\n            XCOMPRESS(x[0], x[8], x[16], x[24], x[32], x[40], x[48], x[56]);\n            XCOMPRESS(x[24], x[16], x[8], x[0], x[56], x[48], x[40], x[32]);\n            XCOMPRESS(x[32], x[48], x[0], x[16], x[24], x[40], x[56], x[8]);\n            XCOMPRESS(x[8], x[32], x[56], x[48], x[40], x[0], x[24], x[16]);\n            XCOMPRESS(x[48], x[40], x[56], x[0], x[32], x[24], x[16], x[8]);\n            XCOMPRESS(x[16], x[40], x[8], x[48], x[24], x[56], x[0], x[16]);\n            XCOMPRESS(x[56], x[48], x[24], x[16], x[8], x[0], x[32], x[40]);\n            XCOMPRESS(x[8], x[24], x[40], x[56], x[0], x[16], x[32], x[48]);\n            CROSS_NORMALIZE(&amp;x[0]);\n        }\n        x += 64;\n    }\n\n    for (i=0; i &lt; ((pEnd-pBegin) &amp; (size_t)0x3f); i++ )\n    {\n        //A lot more hashing code\n    }\n\n};\n\n\nint main()\n{\n    BaseClass&lt;1048576&gt; b;\n    assert(sizeof(b) == 1048576);  //This must be true because the code that uses the BaseClass relies on sizeof() this way a lot.\n\n    DerivedClass&lt;1048576&gt; d;\n    assert( sizeof(d) == 1048576 + sizeof(__int64) ); //This must be true because the code that uses the DerivedClass relies on sizeof() to be the sum of the BaseClass and DerivedClass storages.\n\n    unsigned __int64 h[8];\n    d.FooFn();  //This function operates only on the xdata of the BaseClass\n    d.HashOfDataAndChecksum(&amp;h[0]);  //This function calculates a hash of the xdata in the BaseClass concatenated with the checksum in the DerivedClass\n}\n</code></pre>\n\n<p>How to legalize this hack without resorting to copying the xdata and checksum to a 3rd variable adjacently ?   ...and without modifying the hashing algorithm or the size of the base class?</p>\n"}, {"tags": ["c++", "linux", "windows", "cmake", "eigen3"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1522862416, "post_id": 49656136, "comment_id": 86322758, "body": "This is probably unrelated, but <b>never set</b> <i>CMAKE_BINARY_DIR</i> variable. Many CMake things depends on its <a href=\"https://cmake.org/cmake/help/v3.9/variable/CMAKE_BINARY_DIR.html\" rel=\"nofollow noreferrer\">actual meaning</a>, and changing it may result in subtle bugs. As for the error you get, run <code>make VERBOSE=1</code> and check that the compiler&#39;s command line includes <code>-std</code> option compatible with <code>c++11</code>."}, {"owner": {"reputation": 23, "user_id": 9597645, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qJt9iRbjeqM/AAAAAAAAAAI/AAAAAAAAfEI/ow_276sMaic/photo.jpg?sz=128", "display_name": "exto", "link": "https://stackoverflow.com/users/9597645/exto"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1522913115, "post_id": 49656136, "comment_id": 86342681, "body": "As you said, this is not related, but I have eliminated the property anyway. Thanks for the advice!"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9597645, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qJt9iRbjeqM/AAAAAAAAAAI/AAAAAAAAfEI/ow_276sMaic/photo.jpg?sz=128", "display_name": "exto", "link": "https://stackoverflow.com/users/9597645/exto"}, "edited": false, "score": 0, "creation_date": 1522913048, "post_id": 49657155, "comment_id": 86342641, "body": "I&#39;ve been programming in C ++ for some years but I did not know this encoding. I renamed all the variables and now everything works correctly. Thank you!"}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "reply_to_user": {"reputation": 23, "user_id": 9597645, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qJt9iRbjeqM/AAAAAAAAAAI/AAAAAAAAfEI/ow_276sMaic/photo.jpg?sz=128", "display_name": "exto", "link": "https://stackoverflow.com/users/9597645/exto"}, "edited": false, "score": 0, "creation_date": 1522946755, "post_id": 49657155, "comment_id": 86366308, "body": "@exto If this solved your problem, you should <a href=\"https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\">accept this answer</a>"}], "tags": [], "owner": {"reputation": 3967, "user_id": 4184884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fVkAe.png?s=128&g=1", "display_name": "oLen", "link": "https://stackoverflow.com/users/4184884/olen"}, "is_accepted": true, "score": 2, "last_activity_date": 1522863435, "creation_date": 1522863435, "answer_id": 49657155, "question_id": 49656136, "link": "https://stackoverflow.com/questions/49656136/error-with-eigen-in-cross-platform-project/49657155#49657155", "title": "Error with Eigen in cross-platform project", "body": "<p>You must avoid using <code>not</code> and <code>and</code> as variable names under Linux, you should just rename them to something else for your code to compile.</p>\n\n<p>They are actually C++ keywords (<a href=\"http://en.cppreference.com/w/cpp/language/operator_alternative\" rel=\"nofollow noreferrer\">see here</a>), which causes problems under Linux. Visual Studio does not recognize them, which explains why the compilation works under Windows. See <a href=\"https://stackoverflow.com/q/24414124/4184884\">this SO question</a> for details.</p>\n"}], "owner": {"reputation": 23, "user_id": 9597645, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qJt9iRbjeqM/AAAAAAAAAAI/AAAAAAAAfEI/ow_276sMaic/photo.jpg?sz=128", "display_name": "exto", "link": "https://stackoverflow.com/users/9597645/exto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 49657155, "answer_count": 1, "score": 2, "last_activity_date": 1522863435, "creation_date": 1522859752, "question_id": 49656136, "link": "https://stackoverflow.com/questions/49656136/error-with-eigen-in-cross-platform-project", "title": "Error with Eigen in cross-platform project", "body": "<p>I'm developing a dynamic library that will be linked on both Windows and Linux softwares. In order to simplify the build operation I decided to use <strong>cmake</strong>.</p>\n\n<p>The library has the following structure:</p>\n\n<pre><code>MyProject\n\u2514 Subproject_1\n| \u2514 ...\n| \u2514 CMakeLists.txt\n\u2514 Subproject_2\n| \u2514 ...\n| \u2514 CMakeLists.txt\n\u2514 ...\n\u2514 CMakeLists.txt\n</code></pre>\n\n<p>In the <em>Subproject_1</em> I used <strong>Eigen 3.3</strong> (I downloaded the <a href=\"http://bitbucket.org/eigen/eigen/get/3.3.4.tar.bz2\" rel=\"nofollow noreferrer\">latest release</a>) and <strong>OpenCV 3.3.0</strong>.</p>\n\n<p>The main CMakeLists file is this</p>\n\n<pre><code>cmake_minimum_required (VERSION 2.8)\nSET(CMAKE_CXX_STANDARD 11)\nproject (MyProject)\n\n## Output directory configuration\nSET(out_dir ./)\nSET(EXECUTABLE_OUTPUT_PATH ${out_dir}../lib/ CACHE PATH \"Build directory\" FORCE)\nSET(LIBRARY_OUTPUT_PATH ${out_dir}../lib/ CACHE PATH \"Build directory\" FORCE)\nSET(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${out_dir}../lib)\nSET(CMAKE_BUILD_FILES_DIRECTORY ${out_dir})\nSET(CMAKE_BUILD_DIRECTORY ${out_dir})\nSET(CMAKE_BINARY_DIR  ${out_dir})\nSET(CMAKE_CACHEFILE_DIR ${out_dir})\n\nSET(opencv_path \"\")\nif (WIN32 OR MSVC OR MSYS OR MINGW)\n  SET(opencv_path \"../opencv-3.3.0/build64/\")\nendif()\nmessage(\"Setted OpenCV path to '\" ${opencv_path} \"'\")\n\nfind_package(OpenCV REQUIRED PATHS ${opencv_path}\n    opencv_core opencv_features2d opencv_flann opencv_highgui opencv_imgcodecs opencv_imgproc opencv_photo opencv_plot opencv_xfeatures2d opencv_ml opencv_video\n)\n\n# Additional dependencies\ninclude_directories(\n  ${OPENCV_INCLUDE_DIRS}\n  \"../eigen/\"\n  \"Subprojects_1/include\"\n  \"Subprojects/include\"\n)\n\n## Subprojects\nadd_subdirectory (\"Subproject_1\")\nadd_subdirectory (\"Subproject_2\")\n</code></pre>\n\n<p>while the Subproject_1 CMakeLists file is</p>\n\n<pre><code>cmake_minimum_required (VERSION 2.8)\nproject(Subproject_1)\n\nfile (GLOB core_file \"include/*.h\" \"src/*.cpp\")\nadd_library(library SHARED ${core_file})\ntarget_link_libraries(library \n  ${OpenCV_LIBRARIES}\n)\n</code></pre>\n\n<p>Now, when I compile the project on Windows all work properly, but if I try to compile it on Ubuntu 16.04 LTS I have this errors:</p>\n\n<pre><code>... error: cannot declare reference to \u2018Eigen::MatrixXi&amp; {aka class Eigen::Matrix&lt;int, -1, -1&gt;&amp;}\u2019, which is not a typedef or a template type argument\n   static void bitwiseAND(const Eigen::MatrixXi&amp; m1, const Eigen::MatrixXi&amp; m2, Eigen::MatrixXi&amp; and);\n                                                                                                 ^\n\n... error: cannot declare reference to \u2018Eigen::MatrixXi&amp; {aka class Eigen::Matrix&lt;int, -1, -1&gt;&amp;}\u2019, which is not a typedef or a template type argument\n   static void bitwiseNOT(const Eigen::MatrixXi&amp; m, Eigen::MatrixXi&amp; not);\n                                                                     ^\n</code></pre>\n\n<p>I'm pretty sure that the problem is not due to cmake, but I didn't find anything on Google or here that help me to solve it. Furthermore, I tried to follow the <a href=\"https://eigen.tuxfamily.org/dox/TopicCMakeGuide.html\" rel=\"nofollow noreferrer\">Eigen official instructions</a> but they not works for me on Windows.</p>\n\n<p>To be precise, I'm using:</p>\n\n<ul>\n<li>on Windows: Visual Studio 2017, make version 3.8 and Ninja</li>\n<li>on Ubuntu: make version 4.1</li>\n</ul>\n\n<p>The library and the Eigen files are the same on the two OSs since I'm sharing the workspace directory containing the two repositories, and I've already tried to use Ninja also on Ubuntu.</p>\n\n<p>Every suggestion is welcome</p>\n"}, {"tags": ["c++", "opengl"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9589156"}, "edited": false, "score": 0, "creation_date": 1522860271, "post_id": 49656192, "comment_id": 86321567, "body": "Problem is at the moment with my code it is drawing just 1 char of the string at a time. i have used glDrawArrays to draw the full string at once once the verts are added but thats still slow"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9589156"}, "edited": false, "score": 0, "creation_date": 1522860695, "post_id": 49656192, "comment_id": 86321840, "body": "I dont think i can use VBO&#39;s because i dont know what the text will be."}, {"owner": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "edited": false, "score": 0, "creation_date": 1522861032, "post_id": 49656192, "comment_id": 86322043, "body": "@wihutamiz Unfortunatelly, it&#39;s hard to tell anything without the full code. OpenGL is verycomplex and different seemingly unrelated things can actually influence each other. Concerning VBO&#39;s: I would expect the text not to change frequently, so you can just refill VBO with data upon text change."}], "tags": [], "owner": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "is_accepted": false, "score": 4, "last_activity_date": 1522860226, "last_edit_date": 1522860226, "creation_date": 1522859913, "answer_id": 49656192, "question_id": 49656061, "link": "https://stackoverflow.com/questions/49656061/opengl-gldrawarrays-slower-then-glbegin/49656192#49656192", "title": "OpenGL glDrawArrays slower then glBegin", "body": "<p>One of the main performance problems using OpenGL is the number of OpenGL calls. This is where <code>glDrawArrays</code> becomes handy: if you were rendering, say, a million triangles, it would be about a million calls of <code>glVertex</code> and similar, but still only a few calls using <code>glDrawArrays</code>.</p>\n\n<p>Now, in your case inside the loop you render only a single quad, and the number of OpenGL calls is roughly the same with both methods. That's why you don't see a performance increase.</p>\n\n<p>It seems that you can do this without any looping:</p>\n\n<pre><code>glVertexPointer(2, GL_INT, sizeof(Vertex), &amp;vert[0].x);\nglTexCoordPointer(2, GL_FLOAT, sizeof(Vertex), &amp;vert[0].u);\nglDrawArrays(GL_QUADS, 0, 4 * sLen); // &lt;-- note\n</code></pre>\n\n<p>thus rendering all the quads at once. I expect this to be a lot more performant.</p>\n\n<p>An even better way (the one that is actually used in practice) is to use <a href=\"https://www.khronos.org/opengl/wiki/Vertex_Specification#Vertex_Buffer_Object\" rel=\"nofollow noreferrer\">VBO's</a>, thus copying vertex data on GPU only once and then using this.</p>\n"}, {"tags": [], "owner": {"reputation": 2199, "user_id": 168802, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/09943daec8ac8cc7a4801b12d709cad0?s=128&d=identicon&r=PG", "display_name": "Freddy", "link": "https://stackoverflow.com/users/168802/freddy"}, "is_accepted": false, "score": 1, "last_activity_date": 1522861612, "creation_date": 1522861612, "answer_id": 49656658, "question_id": 49656061, "link": "https://stackoverflow.com/questions/49656061/opengl-gldrawarrays-slower-then-glbegin/49656658#49656658", "title": "OpenGL glDrawArrays slower then glBegin", "body": "<p>@lisyarus is correct. Your issue is that you're using a interfaces intended to work with a buffer object, but you are using it in a immediate mode method.</p>\n\n<p>I saw in your comment to @lisyarus that you said you could not use buffer objects because you do not know your string in advance. However, this is not entirely true. I am going to make some assumptions below, which may or may not be correct, but they should point you in the correct direction.</p>\n\n<p>In your current example you are sending a draw for each quad that represents a character in your string. Based on this we know, at minimum, how long this string is. Instead, lets build an in memory representation and then batch your draw commands to take care of all characters in your string.</p>\n\n<p>So in the beginning create your in memory representation</p>\n\n<pre><code>Vertex* v = (Vertex*)malloc(sizeof(Vertex) * numOfVertexForString);\n</code></pre>\n\n<p>Then in your loop do not issue any <code>GL</code> function calls. Instead build out the memory buffer above. Then after your loop create a VBO and draw all of your quads in one single call.</p>\n\n<pre><code>GLuint vbo;\nGLGenBuffers(1, &amp;vbo);\nGLBindBuffer(GL_VERTEX_ARRAY, vbo);\nGLBufferData(GL_VERTEX_ARRAY, sizeof(Vertex) * numOfVertexInString, v, GL_STATIC_DRAW);\n</code></pre>\n\n<p>Then, finally draw the content of the buffer object.</p>\n\n<pre><code>glDrawArray(GL_QUADS, 0, 4 * sLen);\n</code></pre>\n\n<p>When working with any graphics library the focus is on reducing the number of calls you make. Because these calls route through the driver they are slow. Even worst, is that if your data is not in the format the graphics library needs the driver if forced to translate it. You cannot avoid what goes on in the driver, but you can avoid the number of calls you send its way.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9589156"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1522861612, "creation_date": 1522859510, "question_id": 49656061, "link": "https://stackoverflow.com/questions/49656061/opengl-gldrawarrays-slower-then-glbegin", "title": "OpenGL glDrawArrays slower then glBegin", "body": "<p>I have been playing with glDrawArrays in my function.</p>\n\n<p>For some reason im dropping around 400fps when drawing with glDrawArrays.</p>\n\n<p>Im calling my Print function 2000 times for testing.</p>\n\n<p>Not really sure why because i thought glDrawArrays was ment to be the way to do this?</p>\n\n<p>Here is the print function:</p>\n\n<pre><code>void Font::Print(const char* Text, int x, int y)\n{\n    int sLen, Loop;\n    int Row, Col;\n    float U, V, U1, V1;\n\n    CurX = x;\n    CurY = y;\n\n    sLen = (int)strnlen(Text, BFG_MAXSTRING);\n\n\n#ifdef ARRAYDRAW\n    glEnableClientState(GL_VERTEX_ARRAY);\n    glEnableClientState(GL_TEXTURE_COORD_ARRAY);\n#else\n    glBegin(GL_QUADS);\n#endif\n\n    for (Loop = 0; Loop != sLen; ++Loop)\n    {\n        Row = (Text[Loop] - Base) / RowPitch;\n        Col = (Text[Loop] - Base) - Row * RowPitch;\n\n        U = Col * ColFactor;\n        V = Row * RowFactor;\n        U1 = U + ColFactor;\n        V1 = V + RowFactor;\n\n#ifdef ARRAYDRAW\n        Vertex vert[] = {\n            CurX, CurY,\n            U, V1,\n\n            CurX + CellX, CurY,\n            U1, V1,\n\n            CurX + CellX, CurY + CellY,\n            U1, V,\n\n            CurX, CurY + CellY,\n            U, V\n        };\n\n        glVertexPointer(2, GL_INT, sizeof(Vertex), &amp;vert[0].x);\n        glTexCoordPointer(2, GL_FLOAT, sizeof(Vertex), &amp;vert[0].u);\n        glDrawArrays(GL_QUADS, 0, 4);\n#else\n        glTexCoord2f(U, V1);  glVertex2i(CurX, CurY);\n        glTexCoord2f(U1, V1);  glVertex2i(CurX + CellX, CurY);\n        glTexCoord2f(U1, V); glVertex2i(CurX + CellX, CurY + CellY);\n        glTexCoord2f(U, V); glVertex2i(CurX, CurY + CellY);\n#endif\n\n\n        CurX += Width[Text[Loop]];\n    }\n\n#ifdef ARRAYDRAW\n    glDisableClientState(GL_VERTEX_ARRAY);\n    glDisableClientState(GL_TEXTURE_COORD_ARRAY);\n#else\n    glEnd();\n#endi\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 5, "creation_date": 1522859710, "post_id": 49656006, "comment_id": 86321223, "body": "You can&#39;t do that.  <code>#include</code> each header you need separately."}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 3, "creation_date": 1522860313, "post_id": 49656006, "comment_id": 86321597, "body": "Don&#39;t. It&#39;s very bad practice."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1522861497, "post_id": 49656006, "comment_id": 86322272, "body": "c++ is &quot;you dont pay for what you dont use&quot;, so dont expect anything like that to ever be possible ;)"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1522861948, "post_id": 49656006, "comment_id": 86322516, "body": "<code>find &#47; -type f -name &#39;*.h&#39; -o -name &#39;*.hpp&#39; | sed -e &quot;s&#47;\\(.*\\)&#47;#include &lt;\\1&gt;&#47;&quot; &gt; master_header.h</code> Have fun."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1522862385, "post_id": 49656006, "comment_id": 86322737, "body": "Sooner or later you&#39;ll stumble across how to do this, at least for G++-based compilers. Refrain from using it. It kills code portability, slows your compile times (Which is funny because if you use it for the intended purpose, it speeds up compilation) and adds tens of thousands of identifiers to your code. Add <code>using namespace std;</code> to it and you have a minefield to wade through and debug. It&#39;s not fun."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1522870688, "post_id": 49656006, "comment_id": 86327537, "body": "@user4581301: Happened already :("}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1522871896, "post_id": 49656006, "comment_id": 86328248, "body": "@ChristianHackl Inevitable and forces me to waste a downvote"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1522922277, "post_id": 49656006, "comment_id": 86348798, "body": "@user2079303: That misses the Standard headers, as they don&#39;t <i>have</i> extensions. E.g. <code>&lt;iostream&gt;</code> and <code>&lt;vector&gt;</code>."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1522922582, "post_id": 49656006, "comment_id": 86348983, "body": "@MSalters They won&#39;t be missed if user has stdlibc++, since it has <code>bits&#47;stdc++.h</code> which includes all standarad headers. Still, that means my <code>master_header.h</code> isn&#39;t portable after all :("}], "answers": [{"comments": [{"owner": {"reputation": 1758, "user_id": 8724882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d88f8198fb4ae68267aced911e3533f9?s=128&d=identicon&r=PG&f=1", "display_name": "sandwood", "link": "https://stackoverflow.com/users/8724882/sandwood"}, "edited": false, "score": 0, "creation_date": 1524057624, "post_id": 49656149, "comment_id": 86816984, "body": "Agree with the first sentence but second sentence about removing include to <code>using namespace std;</code> would immedialy lead to other compilation failures in the OP code.  Deciding to use <code>using</code> directive or fully qualified namespace is more guided with local coding rule and/or probability of name collision"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 1758, "user_id": 8724882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d88f8198fb4ae68267aced911e3533f9?s=128&d=identicon&r=PG&f=1", "display_name": "sandwood", "link": "https://stackoverflow.com/users/8724882/sandwood"}, "edited": false, "score": 0, "creation_date": 1524077732, "post_id": 49656149, "comment_id": 86829970, "body": "@sandwood: Of course it would lead to compilation failures. The OP would hopefully understand them and fix the code, and if not, ask about more details. It is extremely obvious here, given the question itself, that the OP uses &quot;using namespace std&quot; for no good reason."}], "tags": [], "owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "is_accepted": true, "score": 12, "last_activity_date": 1525276127, "last_edit_date": 1525276127, "creation_date": 1522859783, "answer_id": 49656149, "question_id": 49656006, "link": "https://stackoverflow.com/questions/49656006/how-to-import-all-include-in-c/49656149#49656149", "title": "How to import all #include in c++?", "body": "<p><code>#include &lt;*&gt;</code> is not C++, and there is no comparable feature to use. You must explicitly specify every header you need. This is a <em>good</em> thing. Get used to it.</p>\n\n<p>You should also get rid of <code>using namespace std;</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 289, "user_id": 4667743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70d2b27e8fdc6936c4cc78d6b8577c11?s=128&d=identicon&r=PG&f=1", "display_name": "Schorsch", "link": "https://stackoverflow.com/users/4667743/schorsch"}, "is_accepted": false, "score": 5, "last_activity_date": 1522859960, "creation_date": 1522859960, "answer_id": 49656203, "question_id": 49656006, "link": "https://stackoverflow.com/questions/49656006/how-to-import-all-include-in-c/49656203#49656203", "title": "How to import all #include in c++?", "body": "<p>Yeah, you are confused here. With <em>#include</em> you really include a file. That means, the compiler takes the files contents and puts then and the position of your <em>#include-statement</em>. Every include in your code extends your file. That means the compiler has more work todo. If you would include <em>all</em> files, your compiler offers, that would be way to much. C++ include-system is something else than pythons module-system. So you have to include those files you really want. What you could do is, you can make a header file where you put those includes which you need often, and then you only include this header file. Your compiler would then include the files you included there. Example:</p>\n\n<pre><code>// includes.hpp\n#pragma once\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n// ...\n</code></pre>\n\n<p>And here is how you could use that:</p>\n\n<pre><code>// main.cpp\n#include \"includes.hpp\"\n\nint main(int argc, char **argv) {\n    std::string some_text = \"Hello there\";\n    std::cout &lt;&lt; some_text &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Please note also, don't use using namespace in a header file. Every header which includes this header would also get this using namespace statement. That can yield to problems in the future. I don't use it in code files neither. You can use using on specific parts of the namespace. But that is another topic. Maybe just google for <em>using namespace</em> problems.</p>\n\n<p>What is important to say here. Even if you save some work with such include headers. Use them with attention. Like i said, include really copies text and so your compiler has more todo. Therefore your compilation time increases. In some cases this is a good solution, but most of the time it is better to include the parts you really need. In many cases, you don't even need to include headers, but you would use forward declarations. Just try to keep that in mind for the future.</p>\n"}, {"tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": false, "score": 8, "last_activity_date": 1522862138, "last_edit_date": 1522862138, "creation_date": 1522860127, "answer_id": 49656245, "question_id": 49656006, "link": "https://stackoverflow.com/questions/49656006/how-to-import-all-include-in-c/49656245#49656245", "title": "How to import all #include in c++?", "body": "<ol>\n<li><p>C++ is not Python.</p>\n\n<p>Do you mean Python's <code>from module import *</code>? Because that's different to what the C++ version you suggested would do (if it existed, which it doesn't), and anyway</p></li>\n<li><p>Header files are not modules.</p>\n\n<p>C++ doesn't really have modules. You can organize your directory structure and build system into logical modules, but you have to do that yourself.</p>\n\n<p>The include directive itself though, is a textual operation: it just pastes the contents of the named file in place of the directive. There is no module scope, it's just ... <em>there</em>.</p></li>\n<li><p>If your suggested syntax did work (which, again, it doesn't) - it would include <em>all</em> files. Not all .h files, but just ... everything. There isn't a required filename extension for C++ (I've seen .h, .hpp, .hxx, .cpp, .cxx and .C as well as a few rarer ones) so there would be no implicit filter on the wildcard.</p></li>\n</ol>\n"}], "owner": {"reputation": 91, "user_id": 9591168, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Tom", "link": "https://stackoverflow.com/users/9591168/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 702, "favorite_count": 0, "accepted_answer_id": 49656149, "answer_count": 3, "score": 3, "last_activity_date": 1525276127, "creation_date": 1522859339, "last_edit_date": 1522859612, "question_id": 49656006, "link": "https://stackoverflow.com/questions/49656006/how-to-import-all-include-in-c", "title": "How to import all #include in c++?", "body": "<p>I was making a C++ program, and I was trying to import all with <code>#include</code>.\nBut what I tried didn't work. I think I might be getting a bit confused with Python's <code>import *</code> function.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;*&gt;\n\nusing namespace std;\n\nint main()\n{\n    cout &lt;&lt; Hello! &lt;&lt; endl;\n    return 0\n}\n</code></pre>\n\n<p>So then, I opened up cmd and typed in:</p>\n\n<pre><code>c++ test.cpp -o test.exe\n</code></pre>\n\n<p>And this is the error I get...</p>\n\n<pre><code>Microsoft Windows [Version 10.0.16299.309]\n(c) 2017 Microsoft Corporation. All rights reserved.\n\nC:\\Users\\thoma&gt;cd Desktop\n\nC:\\Users\\thoma\\Desktop&gt;c++ test.cpp -o test.exe\ntest.cpp:1:13: fatal error: c:\\mingw\\lib\\gcc\\mingw32\\6.3.0\\include\\c++\\*: Invalid argument\n #include &lt;*&gt;\n             ^\ncompilation terminated.\n\nC:\\Users\\thoma\\Desktop&gt;\n</code></pre>\n\n<p>My compiler is MinGW. Any help or answers would be much appreciated.</p>\n"}, {"tags": ["c++", "import"], "comments": [{"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 4, "creation_date": 1522858429, "post_id": 49655729, "comment_id": 86320506, "body": "Why? What&#39;s the benefit of smooshing two completely independent implementations into a single function body? This function is part of an abstraction layer, and it&#39;s completely normal to have separate platform-specific implementations of the same interface. Also: what on earth do you expect to <code>catch</code> from an <code>ioctl</code> call?"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 2, "creation_date": 1522858557, "post_id": 49655729, "comment_id": 86320581, "body": "dont <code>#include</code> things in the middle of a function like that. that header is literally being copy pasted in the middle of the function. I wouldnt expect anything good from that."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1522858887, "post_id": 49655729, "comment_id": 86320797, "body": "@Useless Maybe <code>Vector::w</code> has a throwing assignment operator :)"}, {"owner": {"reputation": 66, "user_id": 6585097, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-U7Sx0EuLLH4/AAAAAAAAAAI/AAAAAAAAAn8/KBTneTP3SuI/photo.jpg?sz=128", "display_name": "Mirco De Zorzi", "link": "https://stackoverflow.com/users/6585097/mirco-de-zorzi"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1522859152, "post_id": 49655729, "comment_id": 86320950, "body": "@user2079303 not really, I added it just in case there would be some runtime problem but I guess it&#39;s useless"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1522858877, "post_id": 49655824, "comment_id": 86320786, "body": "&quot;You can&#39;t #include library headers into a function&quot; - Well, you <i>can</i>. It&#39;s just usually a bad idea ;-)"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1522859232, "post_id": 49655824, "comment_id": 86320995, "body": "@JesperJuhl (-: I amended just in case someone doesn&#39;t get what I meant."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 0, "last_activity_date": 1522859134, "last_edit_date": 1522859134, "creation_date": 1522858609, "answer_id": 49655824, "question_id": 49655729, "link": "https://stackoverflow.com/questions/49655729/making-a-c-function-cross-platform-with-runtime-importing/49655824#49655824", "title": "Making a c++ function cross platform with &quot;runtime importing&quot;", "body": "<p>You can't <code>#include</code> library headers into a function, and expect it to work (unless it's a very unconventional library whose documentation says that you need to do that). You must include them in the global scope:</p>\n\n<pre><code>#ifdef __linux__ \n#include&lt;sys/ioctl.h&gt;\n#include&lt;unistd.h&gt; \n#elif _WIN32 | _WIN64\n#include&lt;windows.h&gt;\n#endif\n\nbool DisplayManager::getWindowSize(){\n</code></pre>\n\n<blockquote>\n  <p>Making a c++ function cross platform with \u201cruntime importing\u201d</p>\n</blockquote>\n\n<p>You cannot \"import\" headers at runtime. That said, <code>__linux__</code>, <code>_WIN32</code> and <code>_WIN64</code> are defined at pre-processing time, so there's no need here to \"import\" headers at runtime.</p>\n"}], "owner": {"reputation": 66, "user_id": 6585097, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-U7Sx0EuLLH4/AAAAAAAAAAI/AAAAAAAAAn8/KBTneTP3SuI/photo.jpg?sz=128", "display_name": "Mirco De Zorzi", "link": "https://stackoverflow.com/users/6585097/mirco-de-zorzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 49655824, "answer_count": 1, "score": 0, "last_activity_date": 1522859134, "creation_date": 1522858193, "question_id": 49655729, "link": "https://stackoverflow.com/questions/49655729/making-a-c-function-cross-platform-with-runtime-importing", "title": "Making a c++ function cross platform with &quot;runtime importing&quot;", "body": "<p>I was writing this simple function that updates the terminal size:</p>\n\n<pre><code>bool DisplayManager::getWindowSize(){\n    Vector windowsize; // Class with h and w attributes and operator overloading\n    #ifdef __linux__ \n    try{\n        #include&lt;sys/ioctl.h&gt;\n        #include&lt;unistd.h&gt; \n        struct winsize window;\n        ioctl(STDOUT_FILENO, TIOCGWINSZ, &amp;window);\n        windowsize.w = window.ws_col;\n        windowsize.h = window.ws_row;\n    }catch(...){\n        return false;\n    }\n    #elif _WIN32 | _WIN64\n    try{\n        #include&lt;windows.h&gt;\n        CONSOLE_SCREEN_BUFFER_INFO csbi;\n        GetConsoleScreenBufferInfo(GetStdHandle(STD_OUTPUT_HANDLE), &amp;csbi);\n        newWindowsize.w = csbi.srWindow.Right - csbi.rsWindow.Left + 1;\n        newWindowsize.h = csbi.srWindow.Bottom - csbi.rsWindow.Top + 1;\n    }catch(...){\n        return false;\n    }\n    #endif\n    mWindowsize = windowsize;\n    return true;\n}\n</code></pre>\n\n<p>I tried to make it cross-platform and added an <em>if else</em> with one branch importing two linux specific libraries and the other impoting a windows library but this doesn't work.</p>\n\n<p>I tried to come up with a solution that would work but I couldn't really think about anything.</p>\n\n<p>If it's possible I'd like to keep the function in one block and not have two separate file, one per os.</p>\n"}, {"tags": ["c++", "video", "com", "directshow"], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 5821185, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Cmtvr2anWGk/AAAAAAAAAAI/AAAAAAAAAHM/ddLulFqH6WE/photo.jpg?sz=128", "display_name": "Iman Abdollahzadeh", "link": "https://stackoverflow.com/users/5821185/iman-abdollahzadeh"}, "edited": false, "score": 0, "creation_date": 1523001675, "post_id": 49657168, "comment_id": 86387346, "body": "Thanks a lot for your helpful comment. I tried to use the graph from the MSDN website. There is this approach in <a href=\"https://msdn.microsoft.com/en-us/library/dd318239(v=vs.85).aspx\" rel=\"nofollow noreferrer\">link</a> and they say <i>The easiest way is to add the WM ASF Writer to the filter graph and then use the IGraphBuilder::RenderFile method to build the graph automatically</i>. Following that I tried to write this code, but still does not work."}, {"owner": {"reputation": 131, "user_id": 5821185, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Cmtvr2anWGk/AAAAAAAAAAI/AAAAAAAAAHM/ddLulFqH6WE/photo.jpg?sz=128", "display_name": "Iman Abdollahzadeh", "link": "https://stackoverflow.com/users/5821185/iman-abdollahzadeh"}, "edited": false, "score": 0, "creation_date": 1523002109, "post_id": 49657168, "comment_id": 86387600, "body": "the new code is in Edited section above. There is also the manual approach in the same MSDN link, but to start, I would like to follow the automatic way of converting AVI to WMV. If I need to manually configure the ASF Writer, which did not hinted for the automatic approach, could you please give me some small coding hints how to do it?"}, {"owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "reply_to_user": {"reputation": 131, "user_id": 5821185, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Cmtvr2anWGk/AAAAAAAAAAI/AAAAAAAAAHM/ddLulFqH6WE/photo.jpg?sz=128", "display_name": "Iman Abdollahzadeh", "link": "https://stackoverflow.com/users/5821185/iman-abdollahzadeh"}, "edited": false, "score": 0, "creation_date": 1523002142, "post_id": 49657168, "comment_id": 86387619, "body": "Instead of <code>SetOutputFileName</code> and <code>RenderFile</code> I would recommend doing <code>CoCreateInstance</code> + <code>AddFilter</code> + <code>IPin.Connect</code> calls to build the graph accurately and with fine control. Also, you need to set up WM ASF Writer profile before connecting the filter pins."}], "tags": [], "owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1522863463, "creation_date": 1522863463, "answer_id": 49657168, "question_id": 49655580, "link": "https://stackoverflow.com/questions/49655580/convert-avi-file-to-wmv-in-c-directshow-graphedit-and-source-code/49657168#49657168", "title": "Convert AVI file to WMV in C++ DirectShow; GraphEdit and source code", "body": "<p>The provided filter graph does not produce a WMV (also known as ASF) file. Instead, you are trying to create an AVI file with .WMV extension (you are using AVI Mux!).</p>\n\n<p>Second issue is use of Smart Tee filter, it should not be used in such transcoding graph. Smart Tee has its own (and documented) designation.</p>\n\n<p>To produce a WMV file, you need to connect MJPEG decoder output to input of an instance of <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd390985\" rel=\"nofollow noreferrer\">WM ASF Writer Filter</a>. The filter needs to be configured and have a profile attached.</p>\n\n<p>For more information, see <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd375008\" rel=\"nofollow noreferrer\">Creating ASF Files in DirectShow</a>.</p>\n\n<p>Also <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd318239\" rel=\"nofollow noreferrer\">from MSDN</a> right on your question:</p>\n\n<p><img src=\"https://msdn.microsoft.com/dynimg/IC420245.png\" alt=\"\"></p>\n"}], "owner": {"reputation": 131, "user_id": 5821185, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Cmtvr2anWGk/AAAAAAAAAAI/AAAAAAAAAHM/ddLulFqH6WE/photo.jpg?sz=128", "display_name": "Iman Abdollahzadeh", "link": "https://stackoverflow.com/users/5821185/iman-abdollahzadeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523001974, "creation_date": 1522857687, "last_edit_date": 1523001974, "question_id": 49655580, "link": "https://stackoverflow.com/questions/49655580/convert-avi-file-to-wmv-in-c-directshow-graphedit-and-source-code", "title": "Convert AVI file to WMV in C++ DirectShow; GraphEdit and source code", "body": "<p>I would like to make a tool to get an AVI file as input and convert it to WMV file and save it on my hard disc.\nIn GraphEdit I was successful to do it as you can see in</p>\n\n<p><a href=\"https://i.stack.imgur.com/8gU8u.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8gU8u.png\" alt=\"enter image description here\"></a></p>\n\n<p>I started to make the COM C++ code for the same task to have the same effect but I don't get where the issue might be that prevent me to have the final converted file.\nThis is the code I have written (there's a lot of memory leak). \nI checked all returned values and all are OKAY, so there is no error in calls.</p>\n\n<pre><code>#include &lt;dshow.h&gt;\n#pragma comment(lib,\"Strmiids.lib\") \n#define AVI_FILE_PATH L\"C:\\\\...\\\\Desktop\\\\oo.avi\"\n#define WMV_FILE_PATH L\"C:\\\\...\\\\Desktop\\\\BRGMovie.wmv\"\n\nint main() {\n    IGraphBuilder* pGraph             = NULL;\n    IBaseFilter*   pSource            = NULL;\n    IBaseFilter*   pAviSplitter       = NULL;\n    IBaseFilter*   pMjpegDecompressor = NULL;\n    IBaseFilter*   pSmartTee          = NULL;\n    IBaseFilter*   pAviMux            = NULL;\n    IBaseFilter*   pFileWriter        = NULL;\n    ICaptureGraphBuilder2* pBuild     = NULL;\n    IFileSourceFilter*  FileSource    = NULL;\n\n    CoInitialize(NULL);\n    CoCreateInstance(CLSID_FilterGraph, NULL, CLSCTX_INPROC_SERVER, IID_IGraphBuilder, (void**)&amp;pGraph            );\n    CoCreateInstance(CLSID_AsyncReader, NULL, CLSCTX_INPROC_SERVER, IID_IBaseFilter,   (void**)&amp;pSource           );\n    CoCreateInstance(CLSID_AviSplitter, NULL, CLSCTX_INPROC_SERVER, IID_IBaseFilter,   (void**)&amp;pAviSplitter      );\n    CoCreateInstance(CLSID_MjpegDec,    NULL, CLSCTX_INPROC_SERVER, IID_IBaseFilter,   (void**)&amp;pMjpegDecompressor);\n    CoCreateInstance(CLSID_SmartTee,    NULL, CLSCTX_INPROC_SERVER, IID_IBaseFilter,   (void**)&amp;pSmartTee         );\n    CoCreateInstance(CLSID_AviDest,     NULL, CLSCTX_INPROC_SERVER, IID_IBaseFilter,   (void**)&amp;pAviMux           );\n    CoCreateInstance(CLSID_FileWriter,  NULL, CLSCTX_INPROC_SERVER, IID_IBaseFilter,   (void**)&amp;pFileWriter       );\n    CoCreateInstance(CLSID_FileSource,  NULL, CLSCTX_INPROC_SERVER, IID_IFileSourceFilter, (void**)&amp;FileSource);\n    CoCreateInstance(CLSID_CaptureGraphBuilder2, NULL, CLSCTX_INPROC_SERVER, IID_ICaptureGraphBuilder2, (void**)&amp;pBuild);\n\n    pGraph-&gt;AddFilter(pSource,            NULL);\n    pGraph-&gt;AddFilter(pAviSplitter,       NULL);\n    pGraph-&gt;AddFilter(pMjpegDecompressor, NULL);\n    pGraph-&gt;AddFilter(pSmartTee,          NULL);\n    pGraph-&gt;AddFilter(pAviMux,            NULL);\n    pGraph-&gt;AddFilter(pFileWriter,        NULL);\n\n    pSource-&gt;QueryInterface(IID_IFileSourceFilter, (void**)&amp;FileSource);\n    FileSource-&gt;Load(AVI_FILE_PATH, NULL);\n\n    pBuild-&gt;SetOutputFileName(&amp;MEDIASUBTYPE_Asf, WMV_FILE_PATH, &amp;pAviMux, NULL);\n    pBuild-&gt;RenderStream(NULL, &amp;MEDIATYPE_Video, pSource, 0, pAviMux);\n\n    IEnumPins*  EnumPins = NULL;\n    IPin*       OutPin   = NULL;\n    IPin*       InPin    = NULL;\n    ULONG       fetched  = NULL;\n    PIN_INFO    pinfo;\n\n    // find source output\n    pSource-&gt;EnumPins(&amp;EnumPins);\n    EnumPins-&gt;Reset();\n    EnumPins-&gt;Next(1, &amp;OutPin, &amp;fetched);\n    EnumPins-&gt;Release();\n\n    // find AviSplitter input\n    pAviSplitter-&gt;EnumPins(&amp;EnumPins);\n    EnumPins-&gt;Reset();\n    EnumPins-&gt;Next(1, &amp;InPin, &amp;fetched);\n    InPin-&gt;QueryPinInfo(&amp;pinfo);\n    pinfo.pFilter-&gt;Release();       \n    pGraph-&gt;Connect(OutPin, InPin);\n    InPin-&gt;Release();\n    OutPin-&gt;Release();\n\n    // find AviSplitter upper output\n    EnumPins-&gt;Reset();\n    EnumPins-&gt;Next(1, &amp;OutPin, &amp;fetched);\n    OutPin-&gt;QueryPinInfo(&amp;pinfo);\n    pinfo.pFilter-&gt;Release();\n\n    EnumPins-&gt;Skip(1);\n    EnumPins-&gt;Release();\n\n    // find MjpegDecompressor input\n    pMjpegDecompressor-&gt;EnumPins(&amp;EnumPins);\n    EnumPins-&gt;Reset();\n    EnumPins-&gt;Next(1, &amp;InPin, &amp;fetched);    \n\n    pGraph-&gt;Connect(OutPin, InPin);\n    InPin-&gt;Release();\n    OutPin-&gt;Release();\n\n    // find MjpegDecompressor output\n    EnumPins-&gt;Reset();\n    EnumPins-&gt;Next(1, &amp;OutPin, &amp;fetched);\n    OutPin-&gt;QueryPinInfo(&amp;pinfo);\n    pinfo.pFilter-&gt;Release();\n    EnumPins-&gt;Release();\n\n    // find SmartTee input\n    pSmartTee-&gt;EnumPins(&amp;EnumPins);\n    EnumPins-&gt;Reset();\n    EnumPins-&gt;Next(1, &amp;InPin, &amp;fetched);\n\n    pGraph-&gt;Connect(OutPin, InPin);\n    InPin-&gt;Release();\n    OutPin-&gt;Release();\n\n    // find SmartTee output\n    EnumPins-&gt;Reset();\n    EnumPins-&gt;Next(1, &amp;OutPin, &amp;fetched);\n    OutPin-&gt;QueryPinInfo(&amp;pinfo);\n    pinfo.pFilter-&gt;Release();\n\n    EnumPins-&gt;Skip(1);\n\n    // find AVIMux input\n    pAviMux-&gt;EnumPins(&amp;EnumPins);\n    EnumPins-&gt;Reset();\n    EnumPins-&gt;Next(1, &amp;InPin, &amp;fetched);\n\n    pGraph-&gt;Connect(OutPin, InPin);\n    InPin-&gt;Release();\n    OutPin-&gt;Release();\n\n    EnumPins-&gt;Skip(1);\n\n    // find AVIMux output\n    EnumPins-&gt;Reset();\n    EnumPins-&gt;Next(1, &amp;OutPin, &amp;fetched);\n    OutPin-&gt;QueryPinInfo(&amp;pinfo);\n    pinfo.pFilter-&gt;Release();   \n\n    // find FileWriter input\n    pFileWriter-&gt;EnumPins(&amp;EnumPins);\n    EnumPins-&gt;Reset();\n    EnumPins-&gt;Next(1, &amp;InPin, &amp;fetched);\n    EnumPins-&gt;Release();\n    pGraph-&gt;Connect(OutPin, InPin);\n    InPin-&gt;Release();\n    OutPin-&gt;Release();\n    FileSource-&gt;Release();\n    CoUninitialize();\n    return 0;\n}\n</code></pre>\n\n<p>Edited:</p>\n\n<pre><code>int main() {\n    IGraphBuilder* pGraph = NULL;\n    IBaseFilter*   pASFWriter = NULL;\n    IMediaControl *pControl = NULL;\n    IMediaEvent   *pEvent = NULL;\n    ICaptureGraphBuilder2* pBuild = NULL;\n\n    HRESULT hr = CoInitialize(NULL);\n    hr = CoCreateInstance(CLSID_FilterGraph, NULL, CLSCTX_INPROC_SERVER, IID_IGraphBuilder, (void **)&amp;pGraph);\n    hr = CoCreateInstance(CLSID_WMAsfWriter, NULL, CLSCTX_INPROC_SERVER, IID_IBaseFilter, (void **)&amp;pASFWriter);\n    hr = CoCreateInstance(CLSID_CaptureGraphBuilder2, NULL, CLSCTX_INPROC_SERVER, IID_ICaptureGraphBuilder2, (void**)&amp;pBuild);\n    hr = pGraph-&gt;QueryInterface(IID_IMediaControl, (void **)&amp;pControl);\n    hr = pGraph-&gt;QueryInterface(IID_IMediaEvent, (void **)&amp;pEvent);\n    hr = pBuild-&gt;SetOutputFileName(&amp;MEDIASUBTYPE_Asf, WMV_FILE_PATH, &amp;pASFWriter, NULL);\n    hr = pGraph-&gt;RenderFile(AVI_FILE_PATH, NULL);\n    hr = pControl-&gt;Run();\n    long evCode;\n    pEvent-&gt;WaitForCompletion(INFINITE, &amp;evCode);\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "linux", "delay", "ftdi", "d2xx"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1522858066, "post_id": 49655439, "comment_id": 86320306, "body": "Sounds like it&#39;s time to do some driver debugging.."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1522859289, "post_id": 49655439, "comment_id": 86321019, "body": "I think putting a logic analyzer on the UART lines would be a lot easier than driver debugging, and should prove whether the latency comes from the target device or the FTDI.  Note that the WIndows FTDI VCP drivers have quite a few settings to play with in the device properties dialog in device manager, and several of those affect latency.  Can&#39;t remember if there&#39;s an API to control those when using D2XX mode, but if there is one, it should work on the Linux D2XX as well."}], "owner": {"reputation": 99, "user_id": 8623933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72e3f6c0cad398068c8de817b17fc044?s=128&d=identicon&r=PG&f=1", "display_name": "pixelpress", "link": "https://stackoverflow.com/users/8623933/pixelpress"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 577, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1522857206, "creation_date": 1522857206, "question_id": 49655439, "link": "https://stackoverflow.com/questions/49655439/using-ftdi-d2xx-and-thorlabs-apt-communication-protocol-results-in-delays-on-lin", "title": "Using FTDI D2xx and Thorlabs APT communication protocol results in delays on Linux", "body": "<p>I am trying to communicate with the Thorlabs TDC001 controllers (apt - dc servo controller) by using the FTDI D2xx driver on Linux. However, when I send writing commands, large delays occur (1-2 seconds) until the command is actually executed on TDC001.\nIn particular, this can be observed when the connected linear stage is moving and a new position command is sent. It takes 1-2 seconds until the stage actually changes its direction. Also, if I request DCSTATUSUPDATE (which gives position and velocity) and then read out the queue of FTDI, I do not get the right data. Only if I wait 1 second between requesting and reading, I get the (correct) data, but for the past. I added the C++ code for this case.\nI need live-data and faster execution of writing commands for closed-loop control. </p>\n\n<p>I'm not sure if the problem is on the side of Thorlabs or FTDI. Everything works, except for the large delays. There are other commands, e.g. MOVE_STOP, which respond immediately. Also, if I send a new position command right after finishing homing, it is executed immediately.\nWhenever I ask for FT_GetStatus, there is nothing else in the Tx or Rx queue except the 20 bytes in Rx for DCSTATUSUPDATE.</p>\n\n<p>The references for D2XX and APT communication protocol can be found here:</p>\n\n<p><a href=\"http://www.ftdichip.com/Support/Documents/ProgramGuides/D2XX_Programmer&#39;s_Guide(FT_000071).pdf\" rel=\"nofollow noreferrer\">FTDI Programmer's Guide</a></p>\n\n<p><a href=\"https://www.thorlabs.com/software/apt/APT_Communications_Protocol_Rev_15.pdf\" rel=\"nofollow noreferrer\">Thorlabs APT Communication Protocol</a></p>\n\n<p>The initialization function:</p>\n\n<pre><code>bool CommunicationFunctions::initializeKeyHandle(string serialnumber){\n  //INITIALIZATION//\n  /*\n   * This function initializes the TDC motor controller and finds its corresponding keyhandle.\n   */\n  keyHandle = NULL;\n\n  // To open the device, the vendor and product ID must be set correctly\n  ftStatus = FT_SetVIDPID(0x403,0xfaf0);\n  }\n\n  //Open device:\n  const char* tmp = serialnumber.c_str();\n  int numAttempts=0;\n  while (keyHandle ==0){\n    ftStatus = FT_OpenEx(const_cast&lt;char*&gt;(tmp),FT_OPEN_BY_SERIAL_NUMBER, &amp;keyHandle);\n    if (numAttempts++&gt;20){\n      cerr &lt;&lt; \"Device Could Not Be Opened\";\n      return false;\n    }\n  }\n\n  // Set baud rate to 115200\n  ftStatus = FT_SetBaudRate(keyHandle,115200);\n\n  // 8 data bits, 1 stop bit, no parity\n  ftStatus = FT_SetDataCharacteristics(keyHandle, FT_BITS_8, FT_STOP_BITS_1, FT_PARITY_NONE);\n\n  // Pre purge dwell 50ms.\n  usleep(50);\n\n  // Purge the device.\n  ftStatus = FT_Purge(keyHandle, FT_PURGE_RX | FT_PURGE_TX);\n\n  // Post purge dwell 50ms.\n  usleep(50);\n\n  // Reset device.\n  ftStatus = FT_ResetDevice(keyHandle);\n\n  // Set flow control to RTS/CTS.\n  ftStatus = FT_SetFlowControl(keyHandle, FT_FLOW_RTS_CTS, 0, 0);\n\n  // Set RTS.\n  ftStatus = FT_SetRts(keyHandle);\n\n  return true;\n}\n</code></pre>\n\n<p>How I read out my data:</p>\n\n<pre><code>bool CommunicationFunctions::read_tdc(int32_t* position, uint16_t* velocity){    \n  uint8_t *RxBuffer = new uint8_t[256]();\n  DWORD RxBytes;\n  DWORD BytesReceived = 0;\n\n  // Manually request status update:\n  uint8_t req_statusupdate[6] = {0x90,0x04,0x01,0x00,0x50,0x01};\n  ftStatus = FT_Write(keyHandle, req_statusupdate, (DWORD)6, &amp;written);\n  if(ftStatus != FT_OK){\n    cerr &lt;&lt; \"Command could not be transmitted: Request status update\" &lt;&lt; endl;\n    return false;\n  }\n\n//  sleep(1); //**this sleep() would lead to right result, but I don't want this delay**\n\n  // Get number of bytes in queue of TDC001\n  FT_GetQueueStatus(keyHandle,&amp;RxBytes);\n\n  // Check if there are bytes in queue before reading them, otherwise do\n  // not read anything in\n  if(RxBytes&gt;0){\n    ftStatus=FT_Read(keyHandle,RxBuffer,RxBytes,&amp;BytesReceived);\n    if(ftStatus != FT_OK){\n      cerr &lt;&lt; \"Read device failed!\" &lt;&lt; endl;\n      return false;\n    }\n  }\n\n  // Check if enough bytes are received, i.e. if signal is right\n  if(!(BytesReceived &gt;= 6)){\n    cerr &lt;&lt; \"Error in bytes received\" &lt;&lt; endl;\n    return false;\n  }\n\n  // Look for correct message in RxBuffer and read out velocity and position\n  getPosVel(position,velocity,RxBuffer);\n\n  // Delete receive buffer\n  delete[] RxBuffer;\n  RxBuffer = NULL;\n\n  return true;\n}\n</code></pre>\n\n<p>If I use read_tdc function after homing and during movement to absolute position, I just get \"Homing completed\" message in the first attempt. When I try read_tdc again, I get an old value (probably the one from before). I don't understand what happens here. Why does this old data even remain in the queue (latency is 10 ms). Can anybody help me to get faster responses and reactions?</p>\n"}, {"tags": ["c++", "c", "bash", "tcl"], "comments": [{"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 6, "creation_date": 1522856565, "post_id": 49655160, "comment_id": 86319302, "body": "Eh, how about picking <i>one</i> language?"}, {"owner": {"reputation": 306, "user_id": 9464761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98021f004e15acd14387c43c77356d16?s=128&d=identicon&r=PG&f=1", "display_name": "NetJohn", "link": "https://stackoverflow.com/users/9464761/netjohn"}, "edited": false, "score": 1, "creation_date": 1522856596, "post_id": 49655160, "comment_id": 86319329, "body": "Have you looked at all at the library provided in &lt;time.h&gt;? <a href=\"https://en.wikibooks.org/wiki/C_Programming/time.h\" rel=\"nofollow noreferrer\">en.wikibooks.org/wiki/C_Programming/time.h</a>"}, {"owner": {"reputation": 387, "user_id": 9540923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d48a552370030dd69ae1d9ba44d88fd?s=128&d=identicon&r=PG&f=1", "display_name": "Some progammer", "link": "https://stackoverflow.com/users/9540923/some-progammer"}, "edited": false, "score": 1, "creation_date": 1522856679, "post_id": 49655160, "comment_id": 86319392, "body": "Using C++, you can use the <a href=\"https://www.boost.org/\" rel=\"nofollow noreferrer\">Boost</a> library or <a href=\"http://en.cppreference.com/w/cpp/header/ctime\" rel=\"nofollow noreferrer\">ctime</a>."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1522858064, "post_id": 49655160, "comment_id": 86320305, "body": "For Tcl, read <a href=\"http://www.tcl-lang.org/man/tcl8.6/TclCmd/clock.htm\" rel=\"nofollow noreferrer\">tcl-lang.org/man/tcl8.6/TclCmd/clock.htm</a>"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1522861584, "post_id": 49655160, "comment_id": 86322315, "body": "May be of help <a href=\"https://stackoverflow.com/questions/24686846/get-current-time-in-milliseconds-or-hhmmssmmm-format/35157784#35157784\" title=\"get current time in milliseconds or hhmmssmmm format\">stackoverflow.com/questions/24686846/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 10469, "user_id": 519360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f90aeb577f276cbaee4db1b7bdf622a?s=128&d=identicon&r=PG", "display_name": "Adam Katz", "link": "https://stackoverflow.com/users/519360/adam-katz"}, "edited": false, "score": 1, "creation_date": 1522857107, "post_id": 49655319, "comment_id": 86319699, "body": "The epoch date in the question is in microseconds, not seconds.  If you treat it as seconds, <code>date</code> presents the year as 48254773."}, {"owner": {"reputation": 6202, "user_id": 2494754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DeXuj.png?s=128&g=1", "display_name": "NVRM", "link": "https://stackoverflow.com/users/2494754/nvrm"}, "reply_to_user": {"reputation": 10469, "user_id": 519360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f90aeb577f276cbaee4db1b7bdf622a?s=128&d=identicon&r=PG", "display_name": "Adam Katz", "link": "https://stackoverflow.com/users/519360/adam-katz"}, "edited": false, "score": 0, "creation_date": 1522857217, "post_id": 49655319, "comment_id": 86319776, "body": "Ah thanks mate for precision."}], "tags": [], "owner": {"reputation": 6202, "user_id": 2494754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DeXuj.png?s=128&g=1", "display_name": "NVRM", "link": "https://stackoverflow.com/users/2494754/nvrm"}, "is_accepted": false, "score": 0, "last_activity_date": 1550642426, "last_edit_date": 1550642426, "creation_date": 1522856797, "answer_id": 49655319, "question_id": 49655160, "link": "https://stackoverflow.com/questions/49655160/how-can-i-convert-epoch-time-in-microseconds-to-readable-format/49655319#49655319", "title": "How can I convert epoch time in microseconds to readable format", "body": "<p>In the shell:</p>\n\n<pre><code>date -d @1522711404881438\n</code></pre>\n\n<p>From javascript:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>console.log(new Date(1522711404881438).toLocaleString('fr-FR'))\r\nconsole.log(new Date(1522711404881438).toLocaleString('en-US'))</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 10469, "user_id": 519360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f90aeb577f276cbaee4db1b7bdf622a?s=128&d=identicon&r=PG", "display_name": "Adam Katz", "link": "https://stackoverflow.com/users/519360/adam-katz"}, "is_accepted": false, "score": 2, "last_activity_date": 1522857021, "creation_date": 1522857021, "answer_id": 49655383, "question_id": 49655160, "link": "https://stackoverflow.com/questions/49655160/how-can-i-convert-epoch-time-in-microseconds-to-readable-format/49655383#49655383", "title": "How can I convert epoch time in microseconds to readable format", "body": "<p>I don't think you were looking for a bash answer, but you included that in your list of tags and it's pretty simple:</p>\n\n<pre><code>t=1522711404881438\ndate -d @${t%??????}\n</code></pre>\n\n<p>(Using BSD date, you want <code>date -jf %s {t%??????}</code>)</p>\n\n<p>Given this <code>$t</code> and <code>TZ=PST8PDT</code>, this results in</p>\n\n<blockquote>\n  <p>Mon Apr  2 16:23:24 PDT 2018</p>\n</blockquote>\n\n<p>To get the format you want, specify it to date:</p>\n\n<pre><code>t=1522711404881438\ndate -d @${t%??????}.${t:10} +\"%Y-%m-%d %T.%N\"\n</code></pre>\n\n<blockquote>\n  <p>2018-04-02 16:23:24.881438000</p>\n</blockquote>\n\n<p>(This requires GNU date)</p>\n"}], "owner": {"reputation": 2625, "user_id": 996371, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1ee29a8958d7782b7a83b665e83976ee?s=128&d=identicon&r=PG", "display_name": "my_question", "link": "https://stackoverflow.com/users/996371/my-question"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 0, "closed_date": 1522858163, "answer_count": 2, "score": -3, "last_activity_date": 1550642426, "creation_date": 1522856331, "question_id": 49655160, "link": "https://stackoverflow.com/questions/49655160/how-can-i-convert-epoch-time-in-microseconds-to-readable-format", "closed_reason": "Needs more focus", "title": "How can I convert epoch time in microseconds to readable format", "body": "<p>I have integer like this, 1522711404881438, it is the epoch time in microseconds. How can I convert it to human readable format, something like, <code>2018-04-03 11:22:33.123456</code>. My local time is GMT-7:00 time zone.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "c", "cmake", "fortran"], "answers": [{"comments": [{"owner": {"reputation": 5586, "user_id": 3309610, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4329755c47f01a17242610d2fac65859?s=128&d=identicon&r=PG", "display_name": "bremen_matt", "link": "https://stackoverflow.com/users/3309610/bremen-matt"}, "edited": false, "score": 0, "creation_date": 1522856964, "post_id": 49655275, "comment_id": 86319612, "body": "I could not find that &quot;CMAKE_FORTRAN_FLAGS&quot; when I was googling. Thanks for that. Also, it feels to me like that should be something like CMAKE_FLAGS which sets flags for all languages, but I cannot find it."}, {"owner": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "reply_to_user": {"reputation": 5586, "user_id": 3309610, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4329755c47f01a17242610d2fac65859?s=128&d=identicon&r=PG", "display_name": "bremen_matt", "link": "https://stackoverflow.com/users/3309610/bremen-matt"}, "edited": false, "score": 0, "creation_date": 1522857155, "post_id": 49655275, "comment_id": 86319734, "body": "@bremen_matt It is actually <code>CMAKE_Fortran_FLAGS</code>, I&#39;v finally found this in the docs: <a href=\"https://cmake.org/cmake/help/v3.11/envvar/FFLAGS.html?highlight=cmake_fortran_flags\" rel=\"nofollow noreferrer\">cmake.org/cmake/help/v3.11/envvar/&hellip;</a> . I don&#39;t think something like <code>CMAKE_FLAGS</code> exists: different languages usually need way different flags."}], "tags": [], "owner": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "is_accepted": true, "score": 1, "last_activity_date": 1522857246, "last_edit_date": 1522857246, "creation_date": 1522856645, "answer_id": 49655275, "question_id": 49654905, "link": "https://stackoverflow.com/questions/49654905/gcc-bprefix-in-cmake/49655275#49655275", "title": "GCC -Bprefix in Cmake", "body": "<p>You can set the corresponding <code>CMAKE_&lt;LANG&gt;_FLAGS</code> variables, like</p>\n\n<pre><code>set(PREFIX \"your prefix\")\n\nset(CMAKE_C_FLAGS       \"-B${PREFIX}\")\nset(CMAKE_CXX_FLAGS     \"-B${PREFIX}\")\nset(CMAKE_Fortran_FLAGS \"-B${PREFIX}\")\n</code></pre>\n\n<p>Or, if you wish to <em>append</em> this flag to existing flags, do</p>\n\n<pre><code>set(CMAKE_C_FLAGS       \"${CMAKE_C_FLAGS}       -B${PREFIX}\")\nset(CMAKE_CXX_FLAGS     \"${CMAKE_CXX_FLAGS}     -B${PREFIX}\")\nset(CMAKE_Fortran_FLAGS \"${CMAKE_Fortran_FLAGS} -B${PREFIX}\")\n</code></pre>\n\n<p>See the documentation for <a href=\"https://cmake.org/cmake/help/v3.11/envvar/CFLAGS.html\" rel=\"nofollow noreferrer\">CMAKE_C_FLAGS</a>, <a href=\"https://cmake.org/cmake/help/v3.11/envvar/CXXFLAGS.html\" rel=\"nofollow noreferrer\">CMAKE_CXX_FLAGS</a>, and <a href=\"https://cmake.org/cmake/help/v3.11/envvar/FFLAGS.html\" rel=\"nofollow noreferrer\">CMAKE_Fortran_FLAGS</a>.</p>\n\n<p>It seems to me that there should be more direct and CMake-ish ways of doing this, like, probably, setting the <code>CMAKE_PROGRAM_PATH</code> variable to <code>${PREFIX}</code> or something like that, but I am not sure.</p>\n"}], "owner": {"reputation": 5586, "user_id": 3309610, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4329755c47f01a17242610d2fac65859?s=128&d=identicon&r=PG", "display_name": "bremen_matt", "link": "https://stackoverflow.com/users/3309610/bremen-matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 49655275, "answer_count": 1, "score": 0, "last_activity_date": 1522857246, "creation_date": 1522855579, "question_id": 49654905, "link": "https://stackoverflow.com/questions/49654905/gcc-bprefix-in-cmake", "title": "GCC -Bprefix in Cmake", "body": "<p>I need to use the '-B' prefix when compiling a project. I ran a test with a small hello world program, but I need to incorporate this into the CMakeLists file for a large project now. The project uses C, C++, and Fortran code. I need the same prefix for all languages. How should I specify that? </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1522855719, "post_id": 49654887, "comment_id": 86318650, "body": "Since this is C++, why don&#39;t you just use something like a vector of vectors?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1522855781, "post_id": 49654887, "comment_id": 86318699, "body": "You can easily return a 2d array by returning a two dimensional <code>std::array</code> or <code>std::vector</code>. C-style arrays really are not worth the trouble."}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1522856081, "post_id": 49654887, "comment_id": 86318938, "body": "You should either use C++ features and avoid C functions and headers or vice versa. Either use C with <code>printf</code> or C++ with <code>cout</code>."}, {"owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 2, "creation_date": 1522857905, "post_id": 49654887, "comment_id": 86320212, "body": "This is really bad C++. I would say this is C, with the only exception of using <code>cout</code>."}, {"owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "edited": false, "score": 0, "creation_date": 1522858940, "post_id": 49654887, "comment_id": 86320832, "body": "Unless this is a learning exercise then I&#39;d recommend using a template library like Eigen <a href=\"http://eigen.tuxfamily.org/index.php?title=Main_Page\" rel=\"nofollow noreferrer\">eigen.tuxfamily.org/index.php?title=Main_Page</a>. Not only will this make your life easier but it will also  reduce inefficient temporary copies."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1522856392, "post_id": 49654984, "comment_id": 86319179, "body": "It should be noted that a vector of vectors is the same as a <code>T**</code> and can/will not be laid out in memory like a 2d array."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1522857223, "post_id": 49654984, "comment_id": 86319782, "body": "@NathanOliver <code>T**</code> <i>can</i> (and usually does in the case of matrices) point to an array with same memory layout like a 2d array. There is of course the extra array of <code>T*</code>, which point to the rows of <code>T</code> while with 2d array the location of rows is implicitly known from the type, but the rows of <code>T</code> that contain the values can have the same structure."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1522856349, "last_edit_date": 1522856349, "creation_date": 1522855811, "answer_id": 49654984, "question_id": 49654887, "link": "https://stackoverflow.com/questions/49654887/can-a-function-return-a-2d-array/49654984#49654984", "title": "Can a function return a 2d Array?", "body": "<blockquote>\n  <p>I should multiply 2 matrices A &amp; B, but I don't know how to return the matrix C, can somebody help? </p>\n</blockquote>\n\n<pre><code>return c;\n</code></pre>\n\n<p>will not work since the array decays to a pointer. Not only that, the pointer becomes invalid as soon as the function returns since <code>c</code> is a function local variable.</p>\n\n<p>If the size of the matrix is known at compile time, you may use <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\"><code>std::array</code></a>. If the size of the matrix is known at run time only, you should use <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a> of <code>std::vector</code>.</p>\n\n<pre><code>std::array&lt;std::array&lt;int, 100&gt;, 100&gt; matrixMultiply(...) {}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>std::vector&lt;std::vector&lt;int&gt;&gt; matrixMultiply(...) {}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1522856283, "post_id": 49655083, "comment_id": 86319107, "body": "<code>std::vector&lt;std::vector&lt;int&gt;&gt;</code> is not performance friendly and should be avoid for any serious code."}], "tags": [], "owner": {"reputation": 59, "user_id": 459128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d43b5d56e516d66d02ac138bb3456d?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/459128/adrian"}, "is_accepted": false, "score": -1, "last_activity_date": 1522856103, "creation_date": 1522856103, "answer_id": 49655083, "question_id": 49654887, "link": "https://stackoverflow.com/questions/49654887/can-a-function-return-a-2d-array/49655083#49655083", "title": "Can a function return a 2d Array?", "body": "<p>As others have stated you could use the <code>std::vector&lt;std::vector&lt;int&gt;&gt;</code> but if you still want to use a 2D, array you need to dynamically allocate the 2D array in the function using a malloc and return a <code>double* matrixMultiply(double a[100][100],double b[100][100], int rowA,int colB,int colArowB)</code> or you could also allocate in the main function and just pass the address reference <code>cout&lt;&lt;matrixMultiply(&amp;a,&amp;b,n,m,p);</code></p>\n"}, {"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1522971422, "post_id": 49655176, "comment_id": 86377762, "body": "<code>_MatrixRow</code> is a reserved identifier."}, {"owner": {"reputation": 162, "user_id": 9555953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c95ad33f64777f5592b0dc9b9da6cc67?s=128&d=identicon&r=PG", "display_name": "Nothing Mi", "link": "https://stackoverflow.com/users/9555953/nothing-mi"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1522981135, "post_id": 49655176, "comment_id": 86380021, "body": "@user2079303 this program works well, and what does your <code>reserved identifier</code> mean? could you show me some reference?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1523002174, "post_id": 49655176, "comment_id": 86387632, "body": "a reserved identifier is something that you mustn&#39;t define, or else the program will have undefined behaviour. For reference, see the section [reserved.names] of the standard. &#39;works well&#39; is the second worst kind of UB."}, {"owner": {"reputation": 162, "user_id": 9555953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c95ad33f64777f5592b0dc9b9da6cc67?s=128&d=identicon&r=PG", "display_name": "Nothing Mi", "link": "https://stackoverflow.com/users/9555953/nothing-mi"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1523014540, "post_id": 49655176, "comment_id": 86395564, "body": "@user2079303 thank you very much, I checked rules of the identifier naming. I will modify my code later!"}, {"owner": {"reputation": 162, "user_id": 9555953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c95ad33f64777f5592b0dc9b9da6cc67?s=128&d=identicon&r=PG", "display_name": "Nothing Mi", "link": "https://stackoverflow.com/users/9555953/nothing-mi"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1523029326, "post_id": 49655176, "comment_id": 86405646, "body": "@user2079303 the code has been updated, thanks for your help!"}], "tags": [], "owner": {"reputation": 162, "user_id": 9555953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c95ad33f64777f5592b0dc9b9da6cc67?s=128&d=identicon&r=PG", "display_name": "Nothing Mi", "link": "https://stackoverflow.com/users/9555953/nothing-mi"}, "is_accepted": false, "score": -2, "last_activity_date": 1523029020, "last_edit_date": 1523029020, "creation_date": 1522856387, "answer_id": 49655176, "question_id": 49654887, "link": "https://stackoverflow.com/questions/49654887/can-a-function-return-a-2d-array/49655176#49655176", "title": "Can a function return a 2d Array?", "body": "<p><code>vector</code> maybe a better choice for this case in C++.</p>\n\n<p>the function maybe looks like the following, and the entire program for this question is <a href=\"https://github.com/nothingmi/stackoverflow-demo/tree/master/cpp-49654887\" rel=\"nofollow noreferrer\">here</a></p>\n\n<pre><code>using namespace std;\n\ntypedef vector&lt;double&gt; MatrixRow;\ntypedef vector&lt;MatrixRow&gt; Matrix;\n\nMatrix matrix_multiply(const Matrix &amp;left, const Matrix &amp;right)\n{\n    // Validate conditions of multiplication of matrices\n    if (left.empty())\n    {\n        cerr &lt;&lt; \"Left matrix is empty.\" &lt;&lt; endl;\n        exit(-1);\n    }\n\n    if (right.empty())\n    {\n        cerr &lt;&lt; \"Right matrix is empty.\" &lt;&lt; endl;\n        exit(-1);\n    }\n\n    const int leftRowCount = left.size();\n    const int leftColumnCount = left.front().size();\n\n    const int rightRowCount = right.size();\n    const int rightColumnCount = right.front().size();\n\n    if (leftColumnCount != rightRowCount)\n    {\n        cerr &lt;&lt; \"The number of columns of the left matrix is not the same as the number of columns of the right matrix.\" &lt;&lt; endl;\n        exit(-1);\n    }\n\n    cout &lt;&lt; \"Calculate steps\" &lt;&lt; endl\n         &lt;&lt; \"=====\" &lt;&lt; endl;\n\n    // Calculation\n    Matrix matrix(leftRowCount);\n    for (int i = 0; i &lt; leftRowCount; i++)\n    {\n        matrix.at(i).resize(rightColumnCount);\n        for (int j = 0; j &lt; rightColumnCount; j++)\n        {\n            matrix.at(i).at(j) = 0;\n            cout &lt;&lt; \"M(\" &lt;&lt; i &lt;&lt; \",\" &lt;&lt; j &lt;&lt; \") = \";\n            for (int k = 0; k &lt; leftColumnCount; k++)\n            {\n                cout &lt;&lt; \"L(\" &lt;&lt; i &lt;&lt; \",\" &lt;&lt; k &lt;&lt; \") + R(\" &lt;&lt; k &lt;&lt; \",\" &lt;&lt; j &lt;&lt; \")\";\n                if (k &lt; leftColumnCount - 1)\n                {\n                    cout &lt;&lt; \" + \";\n                }\n                matrix.at(i).at(j) += left.at(i).at(k) * right.at(k).at(j);\n            }\n            cout &lt;&lt; endl;\n        }\n    }\n\n    cout &lt;&lt; endl;\n\n    return matrix;\n}\n</code></pre>\n\n<p>More about identifier naming:</p>\n\n<blockquote>\n  <h3>In declarations</h3>\n  \n  <p>An identifier can be used to name objects, references,\n  functions, enumerators, types, class members, namespaces, templates,\n  template specializations, parameter packs, goto labels, and other\n  entities, with the following exceptions:</p>\n  \n  <ul>\n  <li>the identifiers that are keywords cannot be used for other purposes;</li>\n  <li>the identifiers with a double underscore anywhere are reserved; the</li>\n  <li>identifiers that begin with an underscore followed by an uppercase\n  letter are reserved; </li>\n  <li>the identifiers that begin with an underscore are\n  reserved in the global namespace.</li>\n  </ul>\n</blockquote>\n\n<p>more about identifier naming in C++, visit <a href=\"http://en.cppreference.com/w/cpp/language/identifiers\" rel=\"nofollow noreferrer\">here</a> for details.</p>\n"}], "owner": {"reputation": 1, "user_id": 9565819, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OBNJEWv3RVY/AAAAAAAAAAI/AAAAAAAAAMY/8VLk-auuAgE/photo.jpg?sz=128", "display_name": "Gabriel Nastase", "link": "https://stackoverflow.com/users/9565819/gabriel-nastase"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1523029020, "creation_date": 1522855536, "question_id": 49654887, "link": "https://stackoverflow.com/questions/49654887/can-a-function-return-a-2d-array", "title": "Can a function return a 2d Array?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\ndouble matrixMultiply(double a[100][100],double b[100][100], int rowA,int colB,int colArowB){\n    double c[100][100];\n    int i,j,k;\n    for(i=0;i&lt;rowA;i++)\n        for(j=0;j&lt;colB;j++){\n            for(k=0;k&lt;colArowB;k++)\n                c[i][j]=c[i][j]+a[i][k]+b[k][j];}\n    return c;\n    }\nint main()\n{\n    double a[100][100],b[100][100];\n    int n,m,o,p,i,j;\n    printf(\"%s \\n\", \"Nr. linii A:\");\n    scanf(\"%d\",&amp;n);\n    printf(\"%s \\n\", \"Nr. coloane A:\");\n    scanf(\"%d\",&amp;m);\n    printf(\"%s \\n\", \"Nr. linii B:\");\n    scanf(\"%d\",&amp;o);\n    printf(\"%s \\n\", \"Nr. coloane B:\");\n    scanf(\"%d\",&amp;p);\n    printf(\"%s \\n\", \"A=\");\n    for(i=0;i&lt;n;i++)\n        for(j=0;j&lt;m;j++)\n            scanf(\"%d\", &amp;a[i][j]);\n    printf(\"%s \\n\", \"B=\");\n    for(i=0;i&lt;o;i++)\n        for(j=0;j&lt;p;j++)\n            scanf(\"%d\", &amp;b[i][j]);\n    if(m==o){\n    printf(\"Matricile se pot inmulti\");\n    cout&lt;&lt;matrixMultiply(a,b,n,m,p);\n    return 0;}\n\n    else printf(\"Matricile nu se pot inmulti\");\n\n    return 0;\n}\n</code></pre>\n\n<p>I should multiply 2 matrices A &amp; B, but I don't know how to return the matrix C, can somebody help?\nThere is an error returning the matrix C,also do I need a for to print the matrix C?</p>\n"}, {"tags": ["c++", "string", "c++11", "char", "integer-arithmetic"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1522864499, "post_id": 49654849, "comment_id": 86323954, "body": "With <code>auto i = 1 + &#39;0&#39;; std::cout &lt;&lt; i &lt;&lt; std::endl;</code>. You will get <code>49</code> too."}], "answers": [{"comments": [{"owner": {"reputation": 1646, "user_id": 2985951, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e3d68092c6e405cffe2c1d067adf6bf1?s=128&d=identicon&r=PG&f=1", "display_name": "john01dav", "link": "https://stackoverflow.com/users/2985951/john01dav"}, "edited": false, "score": 0, "creation_date": 1522855794, "post_id": 49654941, "comment_id": 86318710, "body": "When I change the first cout statement to <code>std::cout &lt;&lt; static_cast&lt;char&gt;(1) + &#39;0&#39; &lt;&lt; std::endl;</code> the output remains unchanged, despite the fact it is now a char + char = char statement, so it should use the overload of <code>operator&lt;&lt;</code> for a char. Why?"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 1646, "user_id": 2985951, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e3d68092c6e405cffe2c1d067adf6bf1?s=128&d=identicon&r=PG&f=1", "display_name": "john01dav", "link": "https://stackoverflow.com/users/2985951/john01dav"}, "edited": false, "score": 0, "creation_date": 1522855828, "post_id": 49654941, "comment_id": 86318737, "body": "@john01dav Change it to <code>static_cast&lt;char&gt;(1 + &#39;0&#39;)</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 1646, "user_id": 2985951, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e3d68092c6e405cffe2c1d067adf6bf1?s=128&d=identicon&r=PG&f=1", "display_name": "john01dav", "link": "https://stackoverflow.com/users/2985951/john01dav"}, "edited": false, "score": 0, "creation_date": 1522855838, "post_id": 49654941, "comment_id": 86318744, "body": "@john01dav Anything that is smaller than an <code>int</code> is promoted to an <code>int</code> when doing operations to it.  So <code>char + char</code>, <code>short + short</code>, <code>char + short</code>, ... will all be an <code>int</code>"}, {"owner": {"reputation": 1646, "user_id": 2985951, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e3d68092c6e405cffe2c1d067adf6bf1?s=128&d=identicon&r=PG&f=1", "display_name": "john01dav", "link": "https://stackoverflow.com/users/2985951/john01dav"}, "edited": false, "score": 0, "creation_date": 1522855884, "post_id": 49654941, "comment_id": 86318787, "body": "@NathanOliver Thanks! Although can I recommend that as a good addition to the answer for future readers?"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 7, "last_activity_date": 1522856125, "last_edit_date": 1522856125, "creation_date": 1522855701, "answer_id": 49654941, "question_id": 49654849, "link": "https://stackoverflow.com/questions/49654849/why-does-the-result-of-an-expression-depend-on-where-the-expression-is-placed/49654941#49654941", "title": "Why does the result of an expression depend on where the expression is placed?", "body": "<p>The result of a <code>int + char</code> is an <code>int</code>.  So when you do</p>\n\n<pre><code>char c = 1 + '0';\n</code></pre>\n\n<p>You actually get</p>\n\n<pre><code>char c = 49;\n</code></pre>\n\n<p>And now <code>c</code> has the value of <code>49</code>.  When yo go to print that though, <code>cout</code>'s <code>operator &lt;&lt;</code> is overloaded to take a <code>char</code> and instead of displaying <code>49</code> it will display the character that <code>49</code> represents.</p>\n\n<p>When you do</p>\n\n<pre><code>std::cout &lt;&lt; 1 + '0' &lt;&lt; std::endl;\n</code></pre>\n\n<p>Since <code>1 + '0'</code> is an <code>int</code> you get the <code>int</code> overload of <code>operator &lt;&lt;</code> which just outputs the integer 49.</p>\n\n<hr>\n\n<p>It should be noted that anything smaller than an <code>int</code> will be promoted to an <code>int</code> when doing arithmetic operations.  That means that, <code>char + char</code>, <code>short + short</code>, <code>char + short</code>, ..., will all be an <code>int</code> so even doing something like</p>\n\n<pre><code>std::cout &lt;&lt; static_cast&lt;char&gt;(1) + '0' &lt;&lt; std::endl;\n</code></pre>\n\n<p>Will still give you a integer output.  You have to cast the result back to a <code>char</code> to get a <code>char</code> like</p>\n\n<pre><code>std::cout &lt;&lt; static_cast&lt;char&gt;(1 + '0') &lt;&lt; std::endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 0, "last_activity_date": 1522855768, "creation_date": 1522855768, "answer_id": 49654967, "question_id": 49654849, "link": "https://stackoverflow.com/questions/49654849/why-does-the-result-of-an-expression-depend-on-where-the-expression-is-placed/49654967#49654967", "title": "Why does the result of an expression depend on where the expression is placed?", "body": "<blockquote>\n  <p>but when it happens inside such a statement, it produces a garbage\n  answer.</p>\n</blockquote>\n\n<p>No.</p>\n\n<pre><code>char c = 1 + '0';\nstd::cout &lt;&lt; c &lt;&lt; std::endl;\n</code></pre>\n\n<p>In this case the rvalue <code>int</code> is implicitly converted to <code>char</code>. Then the <code>char</code> overload is used with <code>std::cout</code>, resulting in '1' as ASCII.</p>\n\n<hr>\n\n<pre><code>std::cout &lt;&lt; 1 + '0' &lt;&lt; std::endl;\n</code></pre>\n\n<p>In this case you're printing out the integer right away, so the integer overload is picked, this prints the numeric value of the '1' which is 49.</p>\n"}], "owner": {"reputation": 1646, "user_id": 2985951, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e3d68092c6e405cffe2c1d067adf6bf1?s=128&d=identicon&r=PG&f=1", "display_name": "john01dav", "link": "https://stackoverflow.com/users/2985951/john01dav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 49654941, "answer_count": 2, "score": 3, "last_activity_date": 1522856125, "creation_date": 1522855449, "question_id": 49654849, "link": "https://stackoverflow.com/questions/49654849/why-does-the-result-of-an-expression-depend-on-where-the-expression-is-placed", "title": "Why does the result of an expression depend on where the expression is placed?", "body": "<p>I am currently working on a more complex program, and I came across a very weird syntax error best demonstrated with the following minimal example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main(int argc, char *argv[]){\n        char c = 1 + '0';\n        std::cout &lt;&lt; 1 + '0' &lt;&lt; std::endl;\n        std::cout &lt;&lt; c &lt;&lt; std::endl;\n        std::cout &lt;&lt; '0' + 1 &lt;&lt; std::endl;\n        return 1;\n}\n</code></pre>\n\n<p>This example produces the following output:</p>\n\n<pre><code>$ ./program\n49\n1\n49\n</code></pre>\n\n<p>What appears to be happening here is that when the conversion from a single digit integer expression to a character happens outside a stream statement, it succeeds, but when it happens inside such a statement, it produces a garbage answer. </p>\n\n<p>I tried to find someone else asking something similar on Google, but I can't find anything relevant. </p>\n\n<p>I am using g++ <code>(Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609</code> on Ubuntu 16.04 LTS x64, but the issue occurs in clang <code>version 3.8.0-2ubuntu4 (tags/RELEASE_380/final)</code> as well, which rules out a compiler bug.</p>\n"}, {"tags": ["c++", "opencv", "image-processing", "template-matching"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1522862842, "post_id": 49654633, "comment_id": 86322991, "body": "Arbitrary size and rotation makes this a hard problem.  Are there a specific set of rotations, like multiples of 45 degrees?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1522922707, "post_id": 49654633, "comment_id": 86349056, "body": "@stark: Not at all. This isn&#39;t a C++ problem, of course. In pattern recognition, it&#39;s trivial."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1523028143, "post_id": 49654633, "comment_id": 86404900, "body": "Trivial? Yet 3 radically different answers.  None of which suggest how to identify which is the top or bottom of the resulting pattern."}], "answers": [{"tags": [], "owner": {"reputation": 186, "user_id": 7538978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KV3Sn.jpg?s=128&g=1", "display_name": "Soheyb Kadi", "link": "https://stackoverflow.com/users/7538978/soheyb-kadi"}, "is_accepted": false, "score": 0, "last_activity_date": 1522892342, "creation_date": 1522892342, "answer_id": 49662881, "question_id": 49654633, "link": "https://stackoverflow.com/questions/49654633/how-to-detect-a-multiple-bar-pattern/49662881#49662881", "title": "How to detect a multiple-bar pattern?", "body": "<p>Here's how I would approach your problem.</p>\n\n<ul>\n<li><p>Since your pattern is totally black, may be you can benefit from that\nand just do a threshold. Try a very low threshold (if it's a perfect\nblack, use 1 as a threshold).</p></li>\n<li><p>After above step, using findContours should already do a good job in\ndetecting shapes. But what you'll need is a way to <strong>recognize</strong> your\npattern. Since you your patterns may show up in different scale and/or\norientation, you will need a scale/orientation invariant descriptor. I\nmean here, a shape descriptor. You can look at\n<a href=\"https://en.wikipedia.org/wiki/Image_moment\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Image_moment</a> for Hu moments.</p></li>\n<li><p>That will be for only one bar in each pattern. You should complete\nyour search by designing a specific feature for your pattern with the\nhelp of the features extracted from each bar.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 0, "last_activity_date": 1522923650, "creation_date": 1522923650, "answer_id": 49669934, "question_id": 49654633, "link": "https://stackoverflow.com/questions/49654633/how-to-detect-a-multiple-bar-pattern/49669934#49669934", "title": "How to detect a multiple-bar pattern?", "body": "<p>Th trick here is that you have 14 parallel edges. Those are impossible to miss. As noted in other answer, threshold to isolate them. Directly after that, run the edge detector. This turns black&amp;white edges into lines, while the rest of the image might produce a few scattered pixels. Visualize this to see for yourself.</p>\n\n<p>Next, run the Hough Transform from OpenCV. This gives you lines in the format {offset, direction}. Even if a few scattered background pixels would coincidentally line up, they wouldn't form 14 lines with the same direction.</p>\n\n<p>You can calculate the maximum offset difference to find the scale of the bar pattern, and double-check the relative offsets to check individual bar widths and spacings. Remember, the 14 lines are edges, so you need to pair them.</p>\n\n<p>At this point you've identified the direction and scale of the bar pattern. it might be a bit surprising to realize you haven't actually identified the actual bar positions. The reason for this procedure is that we tackle the hard problem first. We now go back to the output of the edge detection, and divide all the edges there into three categories: the parallel edges, the rounded end caps between two pairs of parallel edges (follow the contours), and random background pixels. You might need a <code>MORPH_CLOSE</code> operation to close gaps in the contour.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9590073"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1522923650, "creation_date": 1522854853, "last_edit_date": 1522858048, "question_id": 49654633, "link": "https://stackoverflow.com/questions/49654633/how-to-detect-a-multiple-bar-pattern", "title": "How to detect a multiple-bar pattern?", "body": "<p><strong>I'd like to detect a custom \"multiple-bar pattern\" in an image.</strong> </p>\n\n<p>The pattern looks like this, kind of a group of parallel <strong>black</strong> bars with the same width but different height, see this image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Cck42.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Cck42.png\" alt=\"image 1\"></a></p>\n\n<p>This pattern could be on the image or even not but if it is - I'd like to get it's position. </p>\n\n<p><strong>Note</strong>: The color of the pattern is <strong>black</strong> in every case.</p>\n\n<p><strong>Note</strong>: The size of the pattern is unknown, so it could be big or could be super small.</p>\n\n<p><strong>Note</strong>: The pattern bar count is a fixed number. It will be the same ( in this case 7) for every occurrence.</p>\n\n<hr>\n\n<p>An image could look like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/P3v2c.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/P3v2c.jpg\" alt=\"Image\"></a></p>\n\n<p>And after performing the code search algorithm this should happen:</p>\n\n<p><a href=\"https://i.stack.imgur.com/iVC71.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iVC71.jpg\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>Any help would be very appreciated. Thanks a million in advance, Tempi.</p>\n\n<p><strong>Note</strong>: The code I got so far <em>(not working)</em></p>\n\n<pre><code>Mat myImage; // this is the mat of the photo you can see above\nMat algorithmImage;\nmyImage.coptyTo(algorithmImage); \ncvtColor(algorithmImage, algorithmImage, CV_RGB2HSV);\n\ndouble imgThreshold = 20;\ncv::inRange(algorithmImage, cv::Scalar(0, 0, 0, 0), cv::Scalar(180, 255, 30, 0), 20);\n\nMat canny;\nvector&lt;vector&lt;Point&gt;&gt; contours;\nvector&lt;Vec4i&gt; hierarchy;\n\nCanny( algorithmImage, canny, 3, 6, 3 );\nfindContours( canny, contours, hierarchy, CV_RETR_TREE, CV_CHAIN_APPROX_SIMPLE, Point(0, 0) );\n\nfor( int i = 0; i&lt;contours.size(); i++ ) {\n  // ??\n}\n\nbool isLineAlreadyFound(const Vec4i&amp; _l1, const Vec4i&amp; _l2) {\n    Vec4i l1(_l1), l2(_l2);\n\n    float length1 = sqrtf((l1[2] - l1[0])*(l1[2] - l1[0]) + (l1[3] - l1[1])*(l1[3] - l1[1]));\n    float length2 = sqrtf((l2[2] - l2[0])*(l2[2] - l2[0]) + (l2[3] - l2[1])*(l2[3] - l2[1]));\n\n    float product = (l1[2] - l1[0])*(l2[2] - l2[0]) + (l1[3] - l1[1])*(l2[3] - l2[1]);\n\n    if (fabs(product / (length1 * length2)) &lt; cos(CV_PI / 30))\n        return false;\n\n    float mx1 = (l1[0] + l1[2]) * 0.5f;\n    float mx2 = (l2[0] + l2[2]) * 0.5f;\n\n    float my1 = (l1[1] + l1[3]) * 0.5f;\n    float my2 = (l2[1] + l2[3]) * 0.5f;\n    float dist = sqrtf((mx1 - mx2)*(mx1 - mx2) + (my1 - my2)*(my1 - my2));\n\n    if (dist &gt; std::max(length1, length2) * 0.5f)\n        return false;\n\n    return true;\n}\n</code></pre>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 31426, "user_id": 4763489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89773f016f1f4cc2c4e790a6c3f7b004?s=128&d=identicon&r=PG&f=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/4763489/florian"}, "edited": false, "score": 0, "creation_date": 1522871173, "post_id": 49654192, "comment_id": 86327786, "body": "If you are willing to share your <code>CMakeList.txt</code> for review, this is probably more a question for <a href=\"https://codereview.stackexchange.com/\">Code Review at Stack Exchange site</a>"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5542816, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cySAq.jpg?s=128&g=1", "display_name": "Kryx", "link": "https://stackoverflow.com/users/5542816/kryx"}, "edited": false, "score": 0, "creation_date": 1522929838, "post_id": 49654768, "comment_id": 86354076, "body": "Nice! thank you! I will use your first solution now, my library is actually not ready for a proper packaging, but I will try to change it to make it better :)"}], "tags": [], "owner": {"reputation": 42863, "user_id": 577603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/70c19b44cc2eb6f1a87a08fc892c502b?s=128&d=identicon&r=PG", "display_name": "ComicSansMS", "link": "https://stackoverflow.com/users/577603/comicsansms"}, "is_accepted": true, "score": 1, "last_activity_date": 1522855256, "creation_date": 1522855256, "answer_id": 49654768, "question_id": 49654192, "link": "https://stackoverflow.com/questions/49654192/choose-to-build-library-or-executable-in-cmake/49654768#49654768", "title": "choose to build library or executable in cmake", "body": "<p>A quick way to detect if your current project is also the top-level project is by inspecting <a href=\"https://cmake.org/cmake/help/v3.11/variable/PROJECT_SOURCE_DIR.html\" rel=\"nofollow noreferrer\"><code>PROJECT_SOURCE_DIR</code></a> and <a href=\"https://cmake.org/cmake/help/v3.11/variable/CMAKE_SOURCE_DIR.html\" rel=\"nofollow noreferrer\"><code>CMAKE_SOURCE_DIR</code></a>:</p>\n\n<pre><code>if(PROJECT_SOURCE_DIR STREQUAL CMAKE_SOURCE_DIR)\n    message(\"You are building stand-alone!\")\nendif()\n</code></pre>\n\n<p>But note that this might not be the best solution to your problem. Allowing libraries to be pulled into third-party builds like this requires explicit support from both your library and the enclosing build.</p>\n\n<p>Alternatively, you can build both projects separately, but provide <a href=\"https://cmake.org/cmake/help/v3.11/manual/cmake-packages.7.html\" rel=\"nofollow noreferrer\">proper packaging</a> for your library to make it easy to integrate. This approach is usually more flexible, as it gives your clients the freedom to choose when and how they want to build your library before pulling it into their build.</p>\n"}], "owner": {"reputation": 43, "user_id": 5542816, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cySAq.jpg?s=128&g=1", "display_name": "Kryx", "link": "https://stackoverflow.com/users/5542816/kryx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 483, "favorite_count": 0, "accepted_answer_id": 49654768, "answer_count": 1, "score": 1, "last_activity_date": 1522855256, "creation_date": 1522853653, "question_id": 49654192, "link": "https://stackoverflow.com/questions/49654192/choose-to-build-library-or-executable-in-cmake", "title": "choose to build library or executable in cmake", "body": "<p>I'm building a library in c++ for which I generate project with CMake.\nHowever, I don't know how to write a good CMakeLists.txt at the top directory of the library.</p>\n\n<p>In fact, actually it works if I want to simply include the library in another project (adding library, linking sources, etc...), but I want that if I generate the library itself without other project, it generate a demo project provided by the library.\nSo I would like a CMakeLists that </p>\n\n<ol>\n<li>link the library in the case of an inclusion in a project</li>\n<li>build a demo in the case of the CmakeLists is used as the top cmakelists.</li>\n</ol>\n\n<p>My first idea is to search if \"project(xxx)\" has already been called, but I don't know if this is a good idea. As I don't really know what is the good practice about this I have real difficulties to find information in the documentation.</p>\n"}, {"tags": ["c++", "enums", "bit-manipulation", "enum-flags"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1522852937, "post_id": 49653901, "comment_id": 86316568, "body": "What about <a href=\"http://en.cppreference.com/w/cpp/utility/bitset\" rel=\"nofollow noreferrer\">std::bitset</a>?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1522853210, "post_id": 49653901, "comment_id": 86316782, "body": "Maybe I have a different understanding of bitwise semantics, but <code>std::bitset</code> supports all the bitwise operators."}, {"owner": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1522853305, "post_id": 49653901, "comment_id": 86316861, "body": "It&#39;s not what I thought it was - and you&#39;re right - it enables bitwise ops.  But then you still don&#39;t have a name-scoped set of flag-names - one still has to set that up externally and they have no semantic relationship to the type at all... no?"}, {"owner": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1522853616, "post_id": 49653901, "comment_id": 86317081, "body": "Maybe using a <code>struct</code> with <code>constexpr static</code> flag names and a <code>std::bitset</code> member is the &quot;best of all worlds&quot;?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1522853670, "post_id": 49653901, "comment_id": 86317112, "body": "It&#39;s not a perfect solution to your problem, but it does address some of your concerns and the <code>struct FileFlags</code> example immediately brought it to mind. I thought it was worth mentioning."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1522854562, "post_id": 49653901, "comment_id": 86317792, "body": "@Fran&#231;oisAndrieux <code>std::bitset</code> may be wasteful in terms of size. If I have six bitflags, I probably don&#39;t want the corresponding type to take 64 bits. But e.g. MSVC and gcc currently do just that, because <code>std::bitset</code> is backed by an integral array in those implementations (despite the desired size being a template parameter). I get it, the libraries could improve this, but as a user you may be left high and dry if they don&#39;t."}, {"owner": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "edited": false, "score": 1, "creation_date": 1522854802, "post_id": 49653901, "comment_id": 86317996, "body": "It seems like C++ has been dancing <i>around</i> this issue forever and a day without actually addressing the freakin&#39; problem.  Would be nice.  Or if there is something I&#39;m missing - some technique to enable bitwise semantics for a class enum within an enclosing class definition?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1522854968, "post_id": 49653901, "comment_id": 86318119, "body": "There&#39;s always the option of writing a standards proposal. Then <i>maybe</i> in C++20 you&#39;ll get your perfect solution :-)"}, {"owner": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "edited": false, "score": 0, "creation_date": 1522855299, "post_id": 49653901, "comment_id": 86318351, "body": "lol - time to ring up my good buddy Herb Sutter and look into such a thing :D"}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 1, "creation_date": 1522856107, "post_id": 49653901, "comment_id": 86318960, "body": "I use std::bitset. If its length is issue then make or use some length-optimized clone of it <a href=\"https://github.com/ClaasBontus/bitset2\" rel=\"nofollow noreferrer\">github.com/ClaasBontus/bitset2</a>"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1522861531, "post_id": 49653901, "comment_id": 86322290, "body": "@Mordachai He already has metaclasses in the works, which should allow you to write the metaclasses <code>bitset</code> so you can just say <code>bitset FileFlags { int ReadOnly, Hidden, ...; };</code>."}, {"owner": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1522871513, "post_id": 49653901, "comment_id": 86327996, "body": "@DanielH you mean Herb Sutter does?  His metaclasses WIP?  That&#39;ll be quite some time down the road.  But it looks interesting!"}, {"owner": {"reputation": 16519, "user_id": 19100, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d85c685bac51d4cc044f3bc15f09316f?s=128&d=identicon&r=PG", "display_name": "dalle", "link": "https://stackoverflow.com/users/19100/dalle"}, "edited": false, "score": 1, "creation_date": 1523036620, "post_id": 49653901, "comment_id": 86409772, "body": "I find this rather useful : <a href=\"https://github.com/rmartinho/wheels/blob/stable/include/wheels/enums.h%2B%2B\" rel=\"nofollow noreferrer\">github.com/rmartinho/wheels/blob/stable/include/wheels/&hellip;</a>"}, {"owner": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "edited": false, "score": 0, "creation_date": 1523113697, "post_id": 49653901, "comment_id": 86430921, "body": "That&#39;s another nice implementation very much along the lines of the first two I mention in my OP, with some fun preprocessor macro expansion tricks :)"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1532704186, "post_id": 49653901, "comment_id": 90088486, "body": "It might help if you write a short piece of example code that demonstrates the use of all of the features you want."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1549366718, "post_id": 49653901, "comment_id": 95868532, "body": "I use <a href=\"https://stackoverflow.com/a/31906371/560648\">stackoverflow.com/a/31906371/560648</a> / <a href=\"https://codereview.stackexchange.com/q/96146/2503\">codereview.stackexchange.com/q/96146/2503</a>."}], "answers": [{"comments": [{"owner": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "edited": false, "score": 0, "creation_date": 1522866401, "post_id": 49656467, "comment_id": 86325022, "body": "you want to give a more complete example?  this looks like it needs to use a bit class to provide the correct meaning of flags and / or enable the bitwise operators.  this also looks very similar to my approach (#3) of using a wrapper class to enable bitwise operations by wrapping an enum type.  Fundamentally, this doesn&#39;t solve the problem any better than #1, #2, or #3, above."}, {"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "reply_to_user": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "edited": false, "score": 0, "creation_date": 1522910529, "post_id": 49656467, "comment_id": 86341145, "body": "If you add the free consexper bit function to the bitset interface, combining flags using boolean operators won&amp;#39;t be a trouble. But an even better approach would be a variadic  function that sets some bits on: &#39; template &amp;lt;typename flags_enum&amp;gt; constexpr bitflags&amp;lt;flags_enum&amp;gt; onbits(flags_enum ...);&#39;"}, {"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "reply_to_user": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "edited": false, "score": 0, "creation_date": 1522910798, "post_id": 49656467, "comment_id": 86341301, "body": "You have prepared the boilerplate; you need to extend the interface by adding a few adapter/convenience functions."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549367146, "post_id": 49656467, "comment_id": 95868771, "body": "@Red.Wave The variadic template is a good idea. In fact, that&#39;s one of the modifications I made to Xaqq&#39;s solution (see my answer)!"}, {"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549373684, "post_id": 49656467, "comment_id": 95872727, "body": "@LightnessRacesinOrbit the problem is fragmented enums, min and max elements of the enum, number of possible values which in turn may be used as an option for further optimization and compactness. But again underlying_type together with numeric_limits addresses most issues. Unused bits can be set to a specfic pattern that helps detection of uninitialized bitset or other errors due to cheating/improper casting or to save enum revision  number/minimal reflection. I&#39;d rather a use trait class to deal with such issues."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549377994, "post_id": 49656467, "comment_id": 95875268, "body": "@Red.Wave Xaqq used a trailing &quot;Max&quot; enumeration to do that, though I dropped it because I wasn&#39;t worried about compactness (and neither should you be!) -- though have made me realise my choice of size for the bitset is buggy, whoops. Improper casting should only be possible with extreme hacks that will look dangerous anyway and are the cheater&#39;s fault alone.  Not sure about unset bits - why not init everything to 0 i.e. &quot;unset&quot;?"}, {"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549381759, "post_id": 49656467, "comment_id": 95877671, "body": "@LightnessRacesinOrbit  a fast buggy reply of mine. size is an important problem. Without proper metadata, The smallest enum type (char) would lead to a 32 byte(256 bit) long enum - mostly unused; too expensive. Very rare situations need 32 bits, many only need 3 or 4 bits(less than a byte). So the least we need is a type trait with start and end enum values. Such meta functions are best disscoverd with a currently none-existent compiler magic. Enum metadata is a controversial missing feature. A lot of other data could be considered as part of enum metadata: is it contiguous or gaps exist?..."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549383242, "post_id": 49656467, "comment_id": 95878560, "body": "@Red.Wave Is it <i>really</i> &quot;too expensive&quot;? Most things are aligned to 32-byte boundaries anyway, no? Okay you <i>could</i> pack one into 8 bytes or perhaps 16 or 24 ... but what do you get from that, really?"}, {"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549384369, "post_id": 49656467, "comment_id": 95879186, "body": "@LightnessRacesinOrbit underlying_type is expensive it does not suit. Correct Impl is something like std::bitset&lt;enm::end-enm::start&gt;. However, ideal is like std::bitset&lt;number_of_values&lt;enm&gt;()&gt; which seems imposible to achieve."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549388164, "post_id": 49656467, "comment_id": 95881371, "body": "@Red.Wave Expensive how?"}, {"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549390667, "post_id": 49656467, "comment_id": 95882535, "body": "@LightnessRacesinOrbit number of needed bits has no relation with the underlying type. It is either limited by value range or number of elements of enum both of which are normally relatively small."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549391446, "post_id": 49656467, "comment_id": 95882921, "body": "@Red.Wave But how does that make it <i>expensive</i>?"}, {"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549391847, "post_id": 49656467, "comment_id": 95883107, "body": "@LightnessRacesinOrbit assuming char as underlying type, there are 256 possible values which means bitset&lt;256&gt;, but actual number of enumeration is much less; let&#39;s say 11 for file access perms on linux. 11 bits(2 bytes) vs 256 bits(32 bytes). If you can&#39;t see the difference, I can&#39;t  explain anymore."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549392116, "post_id": 49656467, "comment_id": 95883233, "body": "@Red.Wave I can see that the numbers are different, but you still haven&#39;t explained where the <i>expense</i> comes into it, though I&#39;ve asked repeatedly... What actual, practical problem do you foresee with this? &quot;The numbers are a bit higher&quot; isn&#39;t an answer to that question."}, {"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549426256, "post_id": 49656467, "comment_id": 95893478, "body": "@LightnessRacesinOrbit numbers are not a bit higher. You are consuming ten+ times more memory than needed. The purpose of using flags is compactness of multiple fields and using less memory. You are violating the purpose."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549449959, "post_id": 49656467, "comment_id": 95903347, "body": "@Red.Wave I think you overestimate how packed things are in memory. If you can give me a real-world reason why a 32-byte bitset is a deal-breaker compared to a 2-byte bitset, that goes beyond obvious cases like a severely memory-constrained system with many of these things packed next to each other in memory, I&#39;m going to have to conclude that you cannot answer my question :P For general purposes this is <i>worth</i> the simplified code, in my view."}, {"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549450472, "post_id": 49656467, "comment_id": 95903666, "body": "@LightnessRacesinOrbit in that case should one store a flag per bit - while it a lot is easier to store one flag per byte or even per int32? The obvious answer is size considerations. Have you ever used atd::vector&lt;bool&gt;? Many complain that it should be byte oriented rather than bit. Why has boost wasted so much human time on defining various bitset types? Having more hardware resource capacity is not an excuse for wasting them."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1549451027, "post_id": 49656467, "comment_id": 95904055, "body": "@Red.Wave Have you ever heard that vector&lt;bool&gt; is well-loved and considered to have been a good idea? No, neither have I... it is widely considered to have been a premature optimisation at the cost of many maintenance and clarity problems. You&#39;re still not answering my question so let&#39;s end this here :)"}], "tags": [], "owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "is_accepted": false, "score": -1, "last_activity_date": 1522860893, "creation_date": 1522860893, "answer_id": 49656467, "question_id": 49653901, "link": "https://stackoverflow.com/questions/49653901/in-pursuit-of-a-better-bitflag-enum/49656467#49656467", "title": "In pursuit of a better bitflag enum", "body": "<p>Implementing own bitset with underlying integer type selection is not difficult. The problem with enum is that the necessary meta information for adapting to bitset is missing. But still with proper meta programming and flag enable traits it is possible to have such syntax:</p>\n\n<pre><code>flagset&lt;file_access_enum&gt;   rw = bit(read_access_flag)|bit(write_access_flag);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 36931, "user_id": 225757, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e7140b12949e4652885f6bb02b435f42?s=128&d=identicon&r=PG", "display_name": "Roland Illig", "link": "https://stackoverflow.com/users/225757/roland-illig"}, "edited": false, "score": 0, "creation_date": 1608389789, "post_id": 53126957, "comment_id": 115571635, "body": "Why would someone ever want to use the <code>&lt;</code> and <code>&gt;</code> operators on bit sets?"}, {"owner": {"reputation": 177, "user_id": 10568520, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DXsuUNlrVHQ/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbByCvt2XzR9wLYRbnP_L5pmT1KM2w/mo/photo.jpg?sz=128", "display_name": "Andrey Sv", "link": "https://stackoverflow.com/users/10568520/andrey-sv"}, "reply_to_user": {"reputation": 36931, "user_id": 225757, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e7140b12949e4652885f6bb02b435f42?s=128&d=identicon&r=PG", "display_name": "Roland Illig", "link": "https://stackoverflow.com/users/225757/roland-illig"}, "edited": false, "score": 0, "creation_date": 1608418062, "post_id": 53126957, "comment_id": 115579551, "body": "@RolandIllig This only cover the task explained in comment &quot;should be comparable to integral values&quot;. Of \u0441ourse it may never be used by consumer but for fulfillment it included. Actually it is only sample for demo and can be improved"}], "tags": [], "owner": {"reputation": 177, "user_id": 10568520, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DXsuUNlrVHQ/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbByCvt2XzR9wLYRbnP_L5pmT1KM2w/mo/photo.jpg?sz=128", "display_name": "Andrey Sv", "link": "https://stackoverflow.com/users/10568520/andrey-sv"}, "is_accepted": false, "score": 0, "last_activity_date": 1541201319, "creation_date": 1541201319, "answer_id": 53126957, "question_id": 49653901, "link": "https://stackoverflow.com/questions/49653901/in-pursuit-of-a-better-bitflag-enum/53126957#53126957", "title": "In pursuit of a better bitflag enum", "body": "<p>For example</p>\n\n<pre><code>// union only for convenient bit access. \ntypedef union a\n{ // it has its own name-scope\n    struct b\n     {\n         unsigned b0 : 1;\n         unsigned b2 : 1;\n         unsigned b3 : 1;\n         unsigned b4 : 1;\n         unsigned b5 : 1;\n         unsigned b6 : 1;\n         unsigned b7 : 1;\n         unsigned b8 : 1;\n         //...\n     } bits;\n    unsigned u_bits;\n    // has the following valid bit-flags in it\n    typedef enum {\n        Empty = 0u,\n        ReadOnly = 0x01u,\n        Hidden  = 0x02u\n    } Values;\n    Values operator =(Values _v) { u_bits = _v; return _v; }\n     // should be freely usable with standard bitwise operators such as | &amp; ^ ~   \n    union a&amp; operator |( Values _v) { u_bits |= _v; return *this; }\n    union a&amp; operator &amp;( Values _v) { u_bits &amp;= _v; return *this; }\n    union a&amp; operator |=( Values _v) { u_bits |= _v; return *this; }\n    union a&amp; operator &amp;=( Values _v) { u_bits &amp;= _v; return *this; }\n     // ....\n    // they should be comparable to integral values such as 0\n    bool operator &lt;( unsigned _v) { return u_bits &lt; _v; }\n    bool operator &gt;( unsigned _v) { return u_bits &gt; _v; }\n    bool operator ==( unsigned _v) { return u_bits == _v; }\n    bool operator !=( unsigned _v) { return u_bits != _v; }\n} BITS;\n\n\nint main()\n {\n     BITS bits;\n     int integral = 0;\n\n     bits = bits.Empty;\n\n     // they should be comparable to integral values such as 0\n     if ( bits == 0)\n     {\n         bits = bits.Hidden;\n         // should be freely usable with standard bitwise operators such as | &amp; ^ ~\n         bits = bits | bits.ReadOnly;\n         bits |= bits.Hidden;\n         // the result of any bitwise operators should remain the named type, and not devolve into an integral\n         //bits = integral &amp; bits; // error\n         //bits |= integral; // error\n     }\n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 163, "user_id": 10662359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc33da4c6819cb83cb3292947b436da3?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/10662359/james"}, "is_accepted": false, "score": 0, "last_activity_date": 1544785087, "creation_date": 1544785087, "answer_id": 53778397, "question_id": 49653901, "link": "https://stackoverflow.com/questions/49653901/in-pursuit-of-a-better-bitflag-enum/53778397#53778397", "title": "In pursuit of a better bitflag enum", "body": "<p>I use <code>enum class</code> with the following templated operators:</p>\n\n<pre><code>template&lt; typename ENUM, typename std::enable_if&lt; std::is_enum&lt; ENUM &gt;::value, int &gt;::type* = nullptr &gt;\ninline ENUM operator |( ENUM lhs, ENUM rhs )\n{\n    return static_cast&lt; ENUM &gt;( static_cast&lt; UInt32 &gt;( lhs ) | static_cast&lt; UInt32 &gt;( rhs ));\n}\n\ntemplate&lt; typename ENUM, typename std::enable_if&lt; std::is_enum&lt; ENUM &gt;::value, int &gt;::type* = nullptr &gt;\ninline ENUM&amp; operator |=( ENUM&amp; lhs, ENUM rhs )\n{\n    lhs = lhs | rhs;\n    return lhs;\n}\n\ntemplate&lt; typename ENUM, typename std::enable_if&lt; std::is_enum&lt; ENUM &gt;::value, int &gt;::type* = nullptr &gt;\ninline UInt32 operator &amp;( ENUM lhs, ENUM rhs )\n{\n    return static_cast&lt; UInt32 &gt;( lhs ) &amp; static_cast&lt; UInt32 &gt;( rhs );\n}\n\ntemplate&lt; typename ENUM, typename std::enable_if&lt; std::is_enum&lt; ENUM &gt;::value, int &gt;::type* = nullptr &gt;\ninline ENUM&amp; operator &amp;=( ENUM&amp; lhs, ENUM rhs )\n{\n    lhs = lhs &amp; rhs;\n    return lhs;\n}\n\ntemplate&lt; typename ENUM, typename std::enable_if&lt; std::is_enum&lt; ENUM &gt;::value, int &gt;::type* = nullptr &gt;\ninline ENUM&amp; operator &amp;=( ENUM&amp; lhs, int rhs )\n{\n    lhs = static_cast&lt; ENUM &gt;( static_cast&lt; int &gt;( lhs ) &amp; rhs );\n    return lhs;\n}\n</code></pre>\n\n<p>If you're concerned about the above operators leaking out into other enums, I guess you could encapsulate them at the same namespace where the enum is declared, or even just implement them on an enum by enum basis (I used to use a macro for that).  Generally speaking though, I've considered that overkill, and now have them declared within my top-level namespace for any code to use.</p>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 0, "last_activity_date": 1549366943, "creation_date": 1549366943, "answer_id": 54533636, "question_id": 49653901, "link": "https://stackoverflow.com/questions/49653901/in-pursuit-of-a-better-bitflag-enum/54533636#54533636", "title": "In pursuit of a better bitflag enum", "body": "<p>I take the approach of <a href=\"https://codereview.stackexchange.com/q/96146/2503\">Xaqq's <code>FlagSet</code> on Code Review SE</a>.</p>\n\n<p>The key is to introduce a new type to serve as a \"container\" for one or more switched-on values from a fixed list of options. Said container is a wrapper around <code>bitset</code> that takes, as input, instances of a scoped enum.</p>\n\n<p>It's type-safe thanks to the scoped enum, and can perform bitwise-like operations via operator overload delegating to bitset operations. And you can still use the scoped enum directly if you wish, and if you don't need the bitwise operations or to store multiple flags.</p>\n\n<p>For production, I did make some changes to the linked code; a few of those are discussed in comments on the Code Review page.</p>\n"}, {"tags": [], "owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "is_accepted": false, "score": 1, "last_activity_date": 1560025660, "creation_date": 1560025660, "answer_id": 56509899, "question_id": 49653901, "link": "https://stackoverflow.com/questions/49653901/in-pursuit-of-a-better-bitflag-enum/56509899#56509899", "title": "In pursuit of a better bitflag enum", "body": "<p>You can have friend functions inside of an enclosing class that takes the enum as values. This can be used within a macro to define the necessary functions, all within a class scope.</p>\n\n<p>For example, to avoid the <code>is_bitflag_enum</code> trait to specialize, specialize a struct which holds the enums and the operators. This is like #2, and still can't be done in a class.</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate&lt;class Tag&gt;\nstruct bitflag {\n    enum class type;\n\n#define DEFINE_BITFLAG_OPERATOR(OP) \\\n    friend constexpr type operator OP(type lhs, type rhs) noexcept { \\\n        typedef typename ::std::underlying_type&lt;type&gt;::type underlying; \\\n        return static_cast&lt;type&gt;(static_cast&lt;underlying&gt;(lhs) OP static_cast&lt;underlying&gt;(rhs)); \\\n    } \\\n    friend constexpr type&amp; operator OP ## = (type&amp; lhs, type rhs) noexcept { \\\n        return (lhs = lhs OP rhs); \\\n    }\n\n    DEFINE_BITFLAG_OPERATOR(|)\n    DEFINE_BITFLAG_OPERATOR(&amp;)\n    DEFINE_BITFLAG_OPERATOR(^)\n\n#undef DEFINE_BITFLAG_OPERATOR\n\n#define DEFINE_BITFLAG_OPERATOR(OP) \\\n    friend constexpr bool operator OP(type lhs, typename ::std::underlying_type&lt;type&gt;::type rhs) noexcept { \\\n        return static_cast&lt;typename ::std::underlying_type&lt;type&gt;::type&gt;(lhs) OP rhs; \\\n    } \\\n    friend constexpr bool operator OP(typename ::std::underlying_type&lt;type&gt;::type lhs, type rhs) noexcept { \\\n        return lhs OP static_cast&lt;typename ::std::underlying_type&lt;type&gt;::type&gt;(rhs); \\\n    }\n\n    DEFINE_BITFLAG_OPERATOR(==)\n    DEFINE_BITFLAG_OPERATOR(!=)\n    DEFINE_BITFLAG_OPERATOR(&lt;)\n    DEFINE_BITFLAG_OPERATOR(&gt;)\n    DEFINE_BITFLAG_OPERATOR(&gt;=)\n    DEFINE_BITFLAG_OPERATOR(&lt;=)\n\n#undef DEFINE_BITFLAG_OPERATOR\n\n    friend constexpr type operator~(type e) noexcept {\n        return static_cast&lt;type&gt;(~static_cast&lt;typename ::std::underlying_type&lt;type&gt;::type&gt;(e));\n    }\n\n    friend constexpr bool operator!(type e) noexcept {\n        return static_cast&lt;bool&gt;(static_cast&lt;typename ::std::underlying_type&lt;type&gt;::type&gt;(e));\n    }\n};\n\n// The `struct file_flags_tag` (Which declares a new type) differentiates between different\n// enum classes declared\ntemplate&lt;&gt; enum class bitflag&lt;struct file_flags_tag&gt;::type {\n    none = 0,\n    readable = 1 &lt;&lt; 0,\n    writable = 1 &lt;&lt; 1,\n    executable = 1 &lt;&lt; 2,\n    hidden = 1 &lt;&lt; 3\n};\n\nusing file_flags = bitflag&lt;file_flags_tag&gt;::type;\n\nbool is_executable(file_flags f) {\n    return (f &amp; file_flags::executable) == 0;\n}\n</code></pre>\n\n<p>You can also make a single macro to define every single friend function. This is like #1, but it is all within a class scope.</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\n#define MAKE_BITFLAG_FRIEND_OPERATORS_BITWISE(OP, ENUM_TYPE) \\\n    friend constexpr ENUM_TYPE operator OP(ENUM_TYPE lhs, ENUM_TYPE rhs) noexcept { \\\n        typedef typename ::std::underlying_type&lt;ENUM_TYPE&gt;::type underlying; \\\n        return static_cast&lt;ENUM_TYPE&gt;(static_cast&lt;underlying&gt;(lhs) OP static_cast&lt;underlying&gt;(rhs)); \\\n    } \\\n    friend constexpr ENUM_TYPE&amp; operator OP ## = (ENUM_TYPE&amp; lhs, ENUM_TYPE rhs) noexcept { \\\n        return (lhs = lhs OP rhs); \\\n    }\n\n#define MAKE_BITFLAG_FRIEND_OPERATORS_BOOLEAN(OP, ENUM_TYPE) \\\n    friend constexpr bool operator OP(ENUM_TYPE lhs, typename ::std::underlying_type&lt;ENUM_TYPE&gt;::type rhs) noexcept { \\\n        return static_cast&lt;typename ::std::underlying_type&lt;ENUM_TYPE&gt;::type&gt;(lhs) OP rhs; \\\n    } \\\n    friend constexpr bool operator OP(typename ::std::underlying_type&lt;ENUM_TYPE&gt;::type lhs, ENUM_TYPE rhs) noexcept { \\\n        return lhs OP static_cast&lt;typename ::std::underlying_type&lt;ENUM_TYPE&gt;::type&gt;(rhs); \\\n    }\n\n\n#define MAKE_BITFLAG_FRIEND_OPERATORS(ENUM_TYPE) \\\n    public: \\\n    MAKE_BITFLAG_FRIEND_OPERATORS_BITWISE(|, ENUM_TYPE) \\\n    MAKE_BITFLAG_FRIEND_OPERATORS_BITWISE(&amp;, ENUM_TYPE) \\\n    MAKE_BITFLAG_FRIEND_OPERATORS_BITWISE(^, ENUM_TYPE) \\\n    MAKE_BITFLAG_FRIEND_OPERATORS_BOOLEAN(==, ENUM_TYPE) \\\n    MAKE_BITFLAG_FRIEND_OPERATORS_BOOLEAN(!=, ENUM_TYPE) \\\n    MAKE_BITFLAG_FRIEND_OPERATORS_BOOLEAN(&lt;, ENUM_TYPE) \\\n    MAKE_BITFLAG_FRIEND_OPERATORS_BOOLEAN(&gt;, ENUM_TYPE) \\\n    MAKE_BITFLAG_FRIEND_OPERATORS_BOOLEAN(&gt;=, ENUM_TYPE) \\\n    MAKE_BITFLAG_FRIEND_OPERATORS_BOOLEAN(&lt;=, ENUM_TYPE) \\\n    friend constexpr ENUM_TYPE operator~(ENUM_TYPE e) noexcept { \\\n        return static_cast&lt;ENUM_TYPE&gt;(~static_cast&lt;typename ::std::underlying_type&lt;ENUM_TYPE&gt;::type&gt;(e)); \\\n    } \\\n    friend constexpr bool operator!(ENUM_TYPE e) noexcept { \\\n        return static_cast&lt;bool&gt;(static_cast&lt;typename ::std::underlying_type&lt;ENUM_TYPE&gt;::type&gt;(e)); \\\n    }\n\n// ^ The above in a header somewhere\n\nclass my_class {\npublic:\n    enum class my_flags {\n        none = 0, flag_a = 1 &lt;&lt; 0, flag_b = 1 &lt;&lt; 2\n    };\n\n    MAKE_BITFLAG_FRIEND_OPERATORS(my_flags)\n\n    bool has_flag_a(my_flags f) {\n        return (f &amp; my_flags::flag_a) == 0;\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 8647, "user_id": 112755, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/653e9876709910096ccdde524a306bf8?s=128&d=identicon&r=PG", "display_name": "Mordachai", "link": "https://stackoverflow.com/users/112755/mordachai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1047, "favorite_count": 6, "answer_count": 5, "score": 18, "last_activity_date": 1560025660, "creation_date": 1522852755, "last_edit_date": 1544806629, "question_id": 49653901, "link": "https://stackoverflow.com/questions/49653901/in-pursuit-of-a-better-bitflag-enum", "title": "In pursuit of a better bitflag enum", "body": "<p>Okay, so we're at C++ 17 and there still isn't a satisfactory answer to a really great bitflags interface in C++.  </p>\n\n<p>We have <code>enum</code> which bleed their member values into the enclosing scope, but do implicitly convert to their underlying type, so can be used as-if they were bit flags but refuse to reassign back into the enum without casting.</p>\n\n<p>We have <code>enum class</code> which solves the name scope issue so that their values must be explicitly named <code>MyEnum::MyFlag</code> or even <code>MyClass::MyEnum::MyFlag</code>, but they do not implicitly convert to their underlying type, so cannot be used as bit-flags without endless casting back and forth.</p>\n\n<p>And finally, we have the old bit-fields from <code>C</code> such as:</p>\n\n<pre><code>struct FileFlags {\n   unsigned ReadOnly : 1;\n   unsigned Hidden : 1;\n   ...\n};\n</code></pre>\n\n<p>Which has the drawback of having no good way to initialize itself as a whole - one has to resort to using memset or casting the address or similar to overwrite the entire value or initialize it all at once or otherwise manipulate multiple bits at once.  It also suffers from not being able to name the value of a given flag, as opposed to its address - so there is no name representing 0x02, whereas there is such a name when using enums, hence it's easy with enums to name a combination of flags, such as <code>FileFlags::ReadOnly | FileFlags::Hidden</code>- there simply isn't a good way to say as much for bit-fields.</p>\n\n<p>In addition we still have simple <code>constexpr</code> or <code>#define</code> to name bit values and then simply not use enums at all.  This works, but completely dissociates the bit values from the underlying bitflag type.  Perhaps this is ultimately not the worst approach, particularly if the bit flag values are <code>constexpr</code> within a struct to give them their own name-scope?</p>\n\n<pre><code>struct FileFlags {\n    constexpr static uint16_t ReadOnly = 0x01u;\n    constexpr static uint16_t Hidden = 0x02u;\n    ...\n}\n</code></pre>\n\n<p>So, as it currently stands, we have a lot of techniques, none of which add up to a really solid way to say </p>\n\n<blockquote>\n  <p>Here is a type which has the following valid bit-flags in it, it has its own name-scope, and these bits and type should be freely usable with standard bitwise operators such as | &amp; ^ ~, and they should be comparable to integral values such as 0, and the result of any bitwise operators should remain the named type, and not devolve into an integral</p>\n</blockquote>\n\n<p>All of that said, there are a number of attempts floating around to try to produce the above entity in C++ - </p>\n\n<ol>\n<li>The windows OS team developed a simple macro that generates C++ code to define the necessary missing operators on a given enum type <code>DEFINE_ENUM_FLAG_OPERATORS(EnumType)</code> which then defines operator | &amp; ^ ~ and the associated assignment ops such as |= and etc.</li>\n<li>'grisumbras' has a public GIT project for enabling bitflag semantics with scoped enums <a href=\"https://github.com/grisumbras/enum-flags\" rel=\"nofollow noreferrer\">here</a>, which uses <code>enable_if</code> meta programming to allow a given enum to convert to a bit-flag type which supports the missing operators and back again silently.</li>\n<li>Without knowing the above, I wrote a relatively simple bit_flags wrapper which defines all of the bitwise operators on itself, so that one can use a <code>bit_flags&lt;EnumType&gt; flags</code> and then <code>flags</code> has bitwise semantics.  What this fails to do is allow the enumerated base to actually properly handle bitwise operators directly, so you cannot say <code>EnumType::ReadOnly | EnumType::Hidden</code> even when using a <code>bit_flags&lt;EnumType&gt;</code> because the underlying enum itself still doesn't support the necessary operators.  I had to end up doing the same thing essentially as #1 and #2 above, and enabling <code>operator | (EnumType, EnumType)</code> for the various bitwise operators by requiring users to declare a specialization for a meta type for their enum such as <code>template &lt;&gt; struct is_bitflag_enum&lt;EnumType&gt; : std::true_type {};</code></li>\n</ol>\n\n<p>Ultimately, the problem with #1, #2, and #3 is that it is not possible (as far as I know) to define the missing operators on the enum itself (as in #1) or to define the necessary enabler type (e.g. <code>template &lt;&gt; struct is_bitflag_enum&lt;EnumType&gt; : std::true_type {};</code> as in #2 and partially #3) at class scope.  Those must happen outside of a class or struct, as C++ simply doesn't have a mechanism that I am aware of which would allow me to make such declarations within a class.</p>\n\n<p>So now, I have the desire to have a set of flags that should be scoped to a given class, but I cannot use those flags within the class header (e.g. default initialization, inline functions, etc.) because I cannot enable any of the machinery that allows the enum to be treated as bitflags until after the closing brace for the class definition.  Or, I can define all such flag-enums outside of the class that they belong to, so that I can then invoke the \"make this enum into a bitwise type\" before the user-class definition, to have full use of that functionality in the client class - but now the bit flags are in the outer scope instead of being associated to the class itself.</p>\n\n<p>This isn't the end of the world - none of the above is.  But all of it causes endless headaches when writing my code - and stops me from writing it in the most natural way - i.e. with a given flag-enum that belongs to a specific class within (scoped to) that client class, but with bitwise flag-semantics (my approach #3 almost allows this - so long as everything is wrapped by a bit_flags - to explicitly enable the needed bitwise compatibility).</p>\n\n<p>All of this still leaves me with the annoying sense that this could be much better than it is!  </p>\n\n<p><strong>There surely should be - and perhaps is but I haven't figured it out yet - approach to enums to enable bitwise operators on them while allowing them to be declared and used within an enclosing class scope...</strong></p>\n\n<p>Does anyone have a wip or an approach I haven't considered above, that would allow me \"the best of all possible worlds\" on this?</p>\n"}, {"tags": ["c++", "sfml"], "comments": [{"owner": {"reputation": 1835, "user_id": 3195314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BiMED.png?s=128&g=1", "display_name": "alseether", "link": "https://stackoverflow.com/users/3195314/alseether"}, "edited": false, "score": 2, "creation_date": 1522853219, "post_id": 49653856, "comment_id": 86316790, "body": "How long is actually <code>title</code>? It can be really long if <code>frames</code> or <code>ticks</code> are <code>double</code>"}, {"owner": {"reputation": 359, "user_id": 9240261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f47ue.gif?s=128&g=1", "display_name": "Albanninou", "link": "https://stackoverflow.com/users/9240261/albanninou"}, "reply_to_user": {"reputation": 1835, "user_id": 3195314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BiMED.png?s=128&g=1", "display_name": "alseether", "link": "https://stackoverflow.com/users/3195314/alseether"}, "edited": false, "score": 0, "creation_date": 1522853428, "post_id": 49653856, "comment_id": 86316947, "body": "<b>frame</b> and <b>tick</b> are <b>uint64_t</b> , but he work with <b>std::cout</b> , he show me : <i>120 fps, 60 ticks</i>"}, {"owner": {"reputation": 1835, "user_id": 3195314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BiMED.png?s=128&g=1", "display_name": "alseether", "link": "https://stackoverflow.com/users/3195314/alseether"}, "edited": false, "score": 0, "creation_date": 1522853568, "post_id": 49653856, "comment_id": 86317049, "body": "I&#39;m not able to replicate the error, could you give extra info about versions, system, platform, etc?"}, {"owner": {"reputation": 359, "user_id": 9240261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f47ue.gif?s=128&g=1", "display_name": "Albanninou", "link": "https://stackoverflow.com/users/9240261/albanninou"}, "reply_to_user": {"reputation": 1835, "user_id": 3195314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BiMED.png?s=128&g=1", "display_name": "alseether", "link": "https://stackoverflow.com/users/3195314/alseether"}, "edited": false, "score": 0, "creation_date": 1522854019, "post_id": 49653856, "comment_id": 86317389, "body": "my bad they are <b>int</b> and i work in window 32 bit"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1523960447, "post_id": 49653856, "comment_id": 86766473, "body": "<i>&quot;I get this error: std::length_error&quot;</i> When: upon constructing the string, or upon passing it? Did the compiler not provide any further info than that message?"}], "answers": [{"comments": [{"owner": {"reputation": 359, "user_id": 9240261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f47ue.gif?s=128&g=1", "display_name": "Albanninou", "link": "https://stackoverflow.com/users/9240261/albanninou"}, "edited": false, "score": 0, "creation_date": 1523703171, "post_id": 49810489, "comment_id": 86676383, "body": "I use visual studio 2015"}], "tags": [], "owner": {"reputation": 2213, "user_id": 1034248, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/be63e5221accb92b50f75ad083fe3e65?s=128&d=identicon&r=PG", "display_name": "Lukas", "link": "https://stackoverflow.com/users/1034248/lukas"}, "is_accepted": false, "score": 0, "last_activity_date": 1523600470, "last_edit_date": 1592644375, "creation_date": 1523600470, "answer_id": 49810489, "question_id": 49653856, "link": "https://stackoverflow.com/questions/49653856/sfml-stdlength-error-on-window-settitle/49810489#49810489", "title": "SFML std::length_error on window.setTitle", "body": "<p>Here's what the <a href=\"http://en.cppreference.com/w/cpp/error/length_error\" rel=\"nofollow noreferrer\">exception description</a> says:</p>\n<blockquote>\n<p>Defines a type of object to be thrown as exception. It reports errors that result from attempts to exceed implementation defined length limits for some object.</p>\n<p>This exception is thrown by member functions of std::basic_string and std::vector::reserve</p>\n</blockquote>\n<p>Sounds to me like you're using a strange compiler with strange limits.</p>\n"}, {"tags": [], "owner": {"reputation": 359, "user_id": 9240261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f47ue.gif?s=128&g=1", "display_name": "Albanninou", "link": "https://stackoverflow.com/users/9240261/albanninou"}, "is_accepted": true, "score": 1, "last_activity_date": 1523960134, "creation_date": 1523960134, "answer_id": 49875446, "question_id": 49653856, "link": "https://stackoverflow.com/questions/49653856/sfml-stdlength-error-on-window-settitle/49875446#49875446", "title": "SFML std::length_error on window.setTitle", "body": "<p>Hello i have find my probleme but i dont understand for what but i just need do : </p>\n\n<pre><code>string title =  to_string(frames) + \" fps, \" + to_string(ticks) + \" ticks\";\nwindow-&gt;setTitle(title.c_str());\n</code></pre>\n\n<p><strong>\".c_str()\"</strong> solve my probleme </p>\n"}], "owner": {"reputation": 359, "user_id": 9240261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f47ue.gif?s=128&g=1", "display_name": "Albanninou", "link": "https://stackoverflow.com/users/9240261/albanninou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 49875446, "answer_count": 2, "score": 1, "last_activity_date": 1523960134, "creation_date": 1522852624, "last_edit_date": 1522939630, "question_id": 49653856, "link": "https://stackoverflow.com/questions/49653856/sfml-stdlength-error-on-window-settitle", "title": "SFML std::length_error on window.setTitle", "body": "<p>I started a project with SFML, I want show the fps and the tick on the window title but that is not working:</p>\n\n<pre><code>string title =  to_string(frames) + \" fps, \" + to_string(ticks) + \" ticks\";\nwindow-&gt;setTitle(title);\n</code></pre>\n\n<p>I get this error: <strong>std::length_error</strong></p>\n\n<p>I have try that and it worked:</p>\n\n<pre><code>window-&gt;setTitle(\"5454,grgvfvfvfvfvfvffffffffffrtrrh\");\n</code></pre>\n\n<p><strong>fps and frame</strong> are <strong>int</strong></p>\n\n<p>So I don't understand, if someone has an answer.</p>\n"}, {"tags": ["c++", "segmentation-fault"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1522851916, "post_id": 49653521, "comment_id": 86315679, "body": "<code>iter++</code> instead of <code>++iter;</code>"}, {"owner": {"reputation": 285, "user_id": 7449638, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c9a765971a8fb15188f388ad772d9bad?s=128&d=identicon&r=PG&f=1", "display_name": "Hana", "link": "https://stackoverflow.com/users/7449638/hana"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1522852763, "post_id": 49653521, "comment_id": 86316406, "body": "I actually changed iter++ to ++iter as an attempt to resolve the issue.."}], "answers": [{"tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1522852174, "creation_date": 1522852174, "answer_id": 49653686, "question_id": 49653521, "link": "https://stackoverflow.com/questions/49653521/segmentation-fault-error-reading-variable-c-list/49653686#49653686", "title": "segmentation fault/ error reading variable - c++ list", "body": "<pre><code>        next = ++iter;\n</code></pre>\n\n<p>iter is incremented, then assigned to next. Both next and iter now point to the element following the one you want to remove, or past the last element of the list.</p>\n\n<pre><code>        _list.erase(iter);\n</code></pre>\n\n<p>The (wrong) element, if any, is erased, invalidating both next and iter. If unlucky, you try to erase the end iterator.</p>\n\n<pre><code>        iter = next;\n</code></pre>\n\n<p>A no-op. They were pointing to the same element, and invalidated together.</p>\n"}], "owner": {"reputation": 285, "user_id": 7449638, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c9a765971a8fb15188f388ad772d9bad?s=128&d=identicon&r=PG&f=1", "display_name": "Hana", "link": "https://stackoverflow.com/users/7449638/hana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 595, "favorite_count": 0, "closed_date": 1522851924, "answer_count": 1, "score": -1, "last_activity_date": 1522853228, "creation_date": 1522851709, "last_edit_date": 1522853228, "question_id": 49653521, "link": "https://stackoverflow.com/questions/49653521/segmentation-fault-error-reading-variable-c-list", "closed_reason": "Duplicate", "title": "segmentation fault/ error reading variable - c++ list", "body": "<p>I have a segmentation fault I can't understand.\nThis is the code:</p>\n\n<pre><code>void RemoveDuplicates(list&lt;int&gt;&amp; _list)\n{\n    set&lt;int&gt; uniqueElements;\n    list&lt;int&gt;::iterator iter = _list.begin();\n    list&lt;int&gt;::iterator next;\n    pair&lt;set&lt;int&gt;::iterator, bool&gt; res;\n\n    while (iter != _list.end())\n    {\n        res = uniqueElements.insert(*iter);\n        if (!res.second)\n        {\n            next = ++iter;\n            _list.erase(iter);\n            iter = next;\n            continue;\n        }\n        iter++;\n    }\n}\n</code></pre>\n\n<p>and a test for the function (in a separate file):</p>\n\n<pre><code>#include &lt;list&gt;\n#include &lt;iostream&gt;\n#include \"lists.h\"\n\nusing namespace std;\n\nint main()\n{\n    list&lt;int&gt; list;\n    list.push_front(12);\n    list.push_front(7);\n    list.push_front(2);\n    list.push_front(9);\n    list.push_front(12);\n    list.push_front(12);\n    list.push_front(19);\n\n    RemoveDuplicates(list);\n    cout &lt;&lt; list.size() &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>The segmentation fault occurs at curtain iteration of the while loop that looks quite random to me. When accessing the 5th element in the list (the one with the value 2) in the following line:</p>\n\n<pre><code>res = uniqueElements.insert(*iter);\n</code></pre>\n\n<p>The problem is accessing *iter.\nWhen I run it through gdb (on g++), I print the *iter each loop (gdb shows the address of the element and its value), and then when I get to the 5th one, it says 'error reading variable'.</p>\n\n<p>As for the <a href=\"https://stackoverflow.com/questions/596162/can-you-remove-elements-from-a-stdlist-while-iterating-through-it\">duplicate</a>\nI think I understand the logic of removing a node from a list, but I still have the problem.\nThe ++iter was changed from iter++ (probably wrongly) as an attempt to solve the problem.\nI changed it back to </p>\n\n<pre><code>next = iter++;\n</code></pre>\n\n<p>and I am getting the following error: \ninvalid pointer\nprogram received signal SIGABRT, Aborted</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1522851391, "post_id": 49653381, "comment_id": 86315228, "body": "The lines aren&#39;t numbers. It&#39;s not clear which lines are 39 and 40."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1522851532, "post_id": 49653381, "comment_id": 86315347, "body": "If you want to store reference: use <code>auto&amp;</code>, if you don&#39;t: use <code>auto</code>. What is the problem with such approach?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1522851557, "post_id": 49653381, "comment_id": 86315365, "body": "@AlgirdasPreid\u017eius It sounds to me like OP wants the compiler to complain if anyone tries to make a copy of the returned object."}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 2, "creation_date": 1522851566, "post_id": 49653381, "comment_id": 86315373, "body": "It feels bad for us to have to copy the code to an IDE to get line number. Consider having a comment in the code specify line numbers."}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 3, "creation_date": 1522851592, "post_id": 49653381, "comment_id": 86315399, "body": "you can use something like <code>HANDLE</code> or <code>shared_ptr</code> which is itself copyable, but share the same resource."}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 4, "creation_date": 1522851611, "post_id": 49653381, "comment_id": 86315419, "body": "Isn&#39;t it the caller&#39;s fault to copy values unnecessarily? ..."}, {"owner": {"reputation": 289, "user_id": 4667743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70d2b27e8fdc6936c4cc78d6b8577c11?s=128&d=identicon&r=PG&f=1", "display_name": "Schorsch", "link": "https://stackoverflow.com/users/4667743/schorsch"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1522853887, "post_id": 49653381, "comment_id": 86317275, "body": "@Fran&#231;ois Andrieux sorry i will add the corresponsing line numbers."}, {"owner": {"reputation": 289, "user_id": 4667743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70d2b27e8fdc6936c4cc78d6b8577c11?s=128&d=identicon&r=PG&f=1", "display_name": "Schorsch", "link": "https://stackoverflow.com/users/4667743/schorsch"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1522853891, "post_id": 49653381, "comment_id": 86317281, "body": "@AlgirdasPreid\u017eius yeah, that is the way. But making a copy is expensive in this case. And the API would be much more robust if the API would prevent the caller from wrong usage."}], "answers": [{"comments": [{"owner": {"reputation": 289, "user_id": 4667743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70d2b27e8fdc6936c4cc78d6b8577c11?s=128&d=identicon&r=PG&f=1", "display_name": "Schorsch", "link": "https://stackoverflow.com/users/4667743/schorsch"}, "edited": false, "score": 0, "creation_date": 1522854137, "post_id": 49653750, "comment_id": 86317495, "body": "I don&#39;t like to take a shares_ptr. I store the objects covered in unique_ptrs, so theoretically i could return a constant reference on to the unique_ptr. The best idea i heard was that i can return the object in a wrapper class. If someone wants to copy the object and he knows why, there is no problem. But it would be bad API design if you accidentally copy a heavy weight class by forgetting one sign. So even if shared_ptrs would be a solution, they would change the whole ownership model of my code and that is nothing i want. But thanks for your input."}], "tags": [], "owner": {"reputation": 18867, "user_id": 3336423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MfMjU.png?s=128&g=1", "display_name": "jpo38", "link": "https://stackoverflow.com/users/3336423/jpo38"}, "is_accepted": false, "score": 0, "last_activity_date": 1522852334, "creation_date": 1522852334, "answer_id": 49653750, "question_id": 49653381, "link": "https://stackoverflow.com/questions/49653381/prevent-returned-reference-from-being-copied/49653750#49653750", "title": "Prevent returned reference from being copied", "body": "<p>If you make your objects copyable there will definitely be no way for your to prevent them from copying it....</p>\n\n<p>If you return a reference to a copyable object, you can't prevent developers using your class from copying them at some point. If they use <code>auto&amp;</code>, the object won't be copied, but if they use \u0300<code>auto</code>, the object will be copied....and even if they used <code>auto&amp;</code> when they called your <code>getReference()</code> function, you can't prevent them from doing a later copy (when they will call a function or assigning a new variable).</p>\n\n<p>An alternative, as commented by \"apple apple\", is to return a <code>shared_ptr</code>. Then your ressource manager stores shared pointers to ressources and gives access to them. Then, the caller may use many instances of the <code>shared_ptr</code>, all pointing to the same ressource which is not copied in the end. If he uses <code>auto</code> he gets a copy of the <code>shared_ptr</code>, if he uses <code>auto&amp;</code> he gets a reference to <code>shared_ptr</code>, but, in both case they point to the same ressource which were not copied.</p>\n\n<p>If the caller really wants to do a copy, he will find a way to do it by using <code>shared_ptr::get()</code> to access the copyable object.</p>\n"}, {"comments": [{"owner": {"reputation": 289, "user_id": 4667743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70d2b27e8fdc6936c4cc78d6b8577c11?s=128&d=identicon&r=PG&f=1", "display_name": "Schorsch", "link": "https://stackoverflow.com/users/4667743/schorsch"}, "edited": false, "score": 0, "creation_date": 1522853964, "post_id": 49653906, "comment_id": 86317341, "body": "That is a good solution. At this point, resources are stored as unique_ptrs, so maybe i could just return a const unique_ptr as resolt. Or just plain constant pointers, but that would be that good. I will check your solution in code :) Thanks for your input."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 3, "last_activity_date": 1522852767, "creation_date": 1522852767, "answer_id": 49653906, "question_id": 49653381, "link": "https://stackoverflow.com/questions/49653381/prevent-returned-reference-from-being-copied/49653906#49653906", "title": "Prevent returned reference from being copied", "body": "<p>You cannot prevent other code from copying objects that are copyable. So, if you want other code to not be able to copy copyable objects that you hold, then you must not return a reference to them.</p>\n\n<p>Instead, you could return a wrapper object, that delegates its functionality to an instance of the copyable class whose reference is held privately within the wrapper:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Wrapper {\n    T&amp; t;\npublic:\n    Wrapper(T&amp; t) : t(t) {}\n    T* operator-&gt;() { return &amp;t; }\n};\n\nWrapper&lt;T&gt; SomeHolder&lt;T&gt;::getSomeMember() {\n    return {some_member};\n}\n</code></pre>\n\n<p>Since direct member access operator cannot be overloaded, you will need to change the calling code to use the indirect member access instead.</p>\n"}, {"tags": [], "owner": {"reputation": 23041, "user_id": 1149664, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ac4f96b553d2e45776bd6235fee4222d?s=128&d=identicon&r=PG", "display_name": "Johan Lundberg", "link": "https://stackoverflow.com/users/1149664/johan-lundberg"}, "is_accepted": false, "score": 1, "last_activity_date": 1522855554, "creation_date": 1522855554, "answer_id": 49654897, "question_id": 49653381, "link": "https://stackoverflow.com/questions/49653381/prevent-returned-reference-from-being-copied/49654897#49654897", "title": "Prevent returned reference from being copied", "body": "<p>I also suggest to use a smart pointer, but I prefer to not use reference members. That way client can keep handles. </p>\n\n<pre><code>template&lt;typename T&gt;\nstruct ViewPtr {\n  ViewPtr() = delete;\n  ViewPtr(T* tp) : tp(tp) {}\n  T* operator-&gt;() { return tp; }\n  const T* operator-&gt;() const { return tp; }\n  private:\n  T* tp;\n};\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass SomeHolder {\nprivate:\n  T some_member;\npublic:\n  ViewPtr&lt;T&gt; getReference() {\n    return &amp;some_member;\n  }\n};\n</code></pre>\n\n<p>This <code>Viewtr</code> also opts to \"propagate const\". That is: if you have a const view object (or if it's a member, and you are in a const method) you get a const interface.</p>\n"}], "owner": {"reputation": 289, "user_id": 4667743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70d2b27e8fdc6936c4cc78d6b8577c11?s=128&d=identicon&r=PG&f=1", "display_name": "Schorsch", "link": "https://stackoverflow.com/users/4667743/schorsch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 49653906, "answer_count": 3, "score": 0, "last_activity_date": 1522855554, "creation_date": 1522851328, "last_edit_date": 1522854207, "question_id": 49653381, "link": "https://stackoverflow.com/questions/49653381/prevent-returned-reference-from-being-copied", "title": "Prevent returned reference from being copied", "body": "<p>I have some class which manages some resources. You get get a reference to one of those resources from this managing class. Resources are heavy-weight objects, so you normally don't want to copy them. In my case, a base-class for resources is no solution, because my 'resource-manager' is a template class which should work with already defined resource classes of other people. I made some simple example to show my problem:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n// copyable class\nclass Copyable {\npublic:\n  Copyable() = default;\n  Copyable(const Copyable&amp;) {\n      std::cout &lt;&lt; \"Copyconstructor called\" &lt;&lt; std::endl;\n  }\n\n  Copyable&amp; operator=(const Copyable&amp;) {\n      std::cout &lt;&lt; \"assignment operator called\" &lt;&lt; std::endl;\n      return *this;\n  }\n};\n\n// non copyable class\nclass NonCopyable {\npublic:\n  NonCopyable() = default;\nprivate:\n  NonCopyable(const NonCopyable&amp;) = delete;\n  NonCopyable&amp; operator=(const NonCopyable&amp;) = delete;\n};\n\n// some class that can return a reference\ntemplate &lt;typename T&gt;\nclass SomeHolder {\nprivate:\n    T some_member;\npublic:    \n    T&amp; getReference() {\n        return some_member;\n    }\n};\n\nint main() {\n    SomeHolder&lt;Copyable&gt; holder_1;\n    auto copyable_1 = holder_1.getReference();    \n    auto &amp;copyable_2 = holder_1.getReference();\n\n    SomeHolder&lt;NonCopyable&gt; holder_2;\n    //auto noncopyable_1 = holder_2.getReference(); // line 39\n    auto &amp;noncopyable_2 = holder_2.getReference();  // line 40\n}\n</code></pre>\n\n<p>The class SomeHolder returns a reference on the owned object. As you see in line 39, this reference gets copied. Normal way to get the reference is done in line 40. But if you miss the &amp; you get a copy, which you normally don't want. If you uncomment line 39, you get an error because the resource isn't copyable in this case.\nLike i said before, wanting all resources to be not copyable isn't a solution in my case. Do you have ideas to other design decisions? I write this class to hold resources for games. I am writing a small library for recurring tasks. So i don't know if your framework works with copyable textures and sounds. Maybe there is no great solution for my problem, but if you have design suggestions, let me know.</p>\n"}, {"tags": ["c++", "c", "encryption", "openssl", "rsa"], "answers": [{"tags": [], "owner": {"reputation": 5562, "user_id": 1946679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed74e2cdc59d058b76a76c90dd3c3bdc?s=128&d=identicon&r=PG", "display_name": "Matt Caswell", "link": "https://stackoverflow.com/users/1946679/matt-caswell"}, "is_accepted": true, "score": 5, "last_activity_date": 1522866502, "creation_date": 1522866502, "answer_id": 49657981, "question_id": 49653346, "link": "https://stackoverflow.com/questions/49653346/how-to-do-rsa-public-key-encryption-using-openssl-evp-routines/49657981#49657981", "title": "How to do RSA public key encryption using OpenSSL EVP routines?", "body": "<p>To do asymmetric encryption you need to use different EVP routines than for symmetric crypto. In particular see the EVP_PKEY_encrypt() function. The man page is here, and it contains an example.</p>\n\n<p><a href=\"https://www.openssl.org/docs/man1.1.0/crypto/EVP_PKEY_encrypt.html\" rel=\"noreferrer\">https://www.openssl.org/docs/man1.1.0/crypto/EVP_PKEY_encrypt.html</a></p>\n"}], "owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2939, "favorite_count": 0, "accepted_answer_id": 49657981, "answer_count": 1, "score": 2, "last_activity_date": 1522866502, "creation_date": 1522851223, "question_id": 49653346, "link": "https://stackoverflow.com/questions/49653346/how-to-do-rsa-public-key-encryption-using-openssl-evp-routines", "title": "How to do RSA public key encryption using OpenSSL EVP routines?", "body": "<p>I am using the <a href=\"https://www.openssl.org/docs/man1.1.0/crypto/EVP_EncryptInit.html\" rel=\"nofollow noreferrer\">EVP high-level functions in OpenSSL</a>. I haven't found any examples online showing how to use these functions (e.g. <code>EVP_EncryptInit_ex()</code>, <code>EVP_EncryptUpdate()</code>, <code>EVP_EncryptFinal_ex()</code>) to encrypt data using an RSA public key. Specifically, I do not see a <code>EVP_CIPHER</code> type that matches RSA, similar to what you see for AES like: <code>const EVP_CIPHER *EVP_aes_128_cbc(void);</code> in <code>evp.h</code>. I think one for RSA is required to initialize EVP for encryption using that method.</p>\n\n<p>Can anyone help me understand how to use an RSA existing key to encrypt data using OpenSSL's EVP routines? Examples would be <em>extremely</em> helpful.</p>\n"}, {"tags": ["c++", "gcc"], "comments": [{"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1522851204, "post_id": 49653235, "comment_id": 86315078, "body": "<a href=\"https://stackoverflow.com/questions/656420/is-there-any-way-to-get-readable-gcc-error-and-warning-output-at-the-command-lin\">Related</a> <a href=\"https://stackoverflow.com/questions/24928244/how-to-hide-defaulted-template-parameters-in-gcc-error-messages\">related</a>."}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1522851227, "post_id": 49653235, "comment_id": 86315091, "body": "Just grep your <code>filename.cpp:</code>... (of course this is not a &quot;command line switch to GCC&quot;)"}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1522851714, "post_id": 49653235, "comment_id": 86315509, "body": "Better grep gcc&#39;s output: <code>g++ filename.cpp -fdiagnostics-color=always | head -30</code>."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1522851928, "post_id": 49653235, "comment_id": 86315692, "body": "The first error message that appears for this error is <code>&lt;source&gt;:11:15: error: no match for &#39;operator&lt;&lt;&#39;</code>, which seems pretty straightforward and gives the location in your code. There are cases where it&#39;s hard to find where the error is from the message but this isn&#39;t one of them."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1522852439, "post_id": 49653235, "comment_id": 86316133, "body": "@interjay, yes, I just couldn&#39;t quickly construct MCVE with those. There are cases when the actual error line could only be seen in like <code>required from here</code> message."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 1, "creation_date": 1522852778, "post_id": 49653235, "comment_id": 86316421, "body": "Does <a href=\"https://stackoverflow.com/q/13025773/27302\">stackoverflow.com/q/13025773/27302</a> help? I\u2019m reluctant to close as a duplicate in case <code>gccfilter</code> hasn\u2019t been maintained or you need a flag for some reason, but it might work. Failing that the only other option I found was <a href=\"https://stackoverflow.com/q/11313600/27302\">stackoverflow.com/q/11313600/27302</a>, and I hope there\u2019s a better solution by now."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1522852922, "post_id": 49653235, "comment_id": 86316554, "body": "@DanielH no, gccfilter doesn&#39;t help, because I work in environment where installing 3rd-party extra apps is problematic."}, {"owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "edited": false, "score": 0, "creation_date": 1522853320, "post_id": 49653235, "comment_id": 86316872, "body": "&quot;it will take considerable time to even find out which line is ultimately responsible for this issue&quot; - not really. With <code>-fdiagnostics-color=always</code> corresponding line is colored in red and can be found relatively easy."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1522853557, "post_id": 49653235, "comment_id": 86317041, "body": "The &quot;required from here&quot; message appears when you&#39;re using templates. Like this: <a href=\"https://godbolt.org/g/d9gqtX\" rel=\"nofollow noreferrer\">godbolt.org/g/d9gqtX</a>. The problem is that there&#39;s no way for the compiler to know if the typo was in the template or the code which uses it, so it shows both. If you had a solution that hides one of them, it might hide the actual culprit."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1522865202, "post_id": 49653235, "comment_id": 86324351, "body": "@interjay Certainly, this is why it could be a switch and people could use it... On any rate, no means no."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1522923908, "post_id": 49653235, "comment_id": 86349953, "body": "Here&#39;s a common trick : the existence of tools often points to the need for those tools. If tool Y takes the output of tool X to do some operation Foo, then presumably Y was created because X can&#39;t do Foo. So substitute X=gcc, Y=gccfilter, and Foo=this question. That givs us the answer, &quot;no, gcc can&#39;t do what gccfilter does, else why would gccfilter exist?&quot;"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1522934334, "post_id": 49653235, "comment_id": 86357344, "body": "@MSalters not really, especially in open source domain. First of, gcc filter is old. Something could pop along. Second off, people who were doing gccfilter might have had their reasons."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1522852492, "post_id": 49653437, "comment_id": 86316178, "body": "Yes, I agree with fatal errors being a partial solution. Upvoting, but not accepting :D"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1522852775, "post_id": 49653437, "comment_id": 86316417, "body": "@SergeyA I totally understand.  I&#39;m not sure I would accept this either unless there really isn&#39;t any other compiler flag."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 7, "last_activity_date": 1522853330, "last_edit_date": 1522853330, "creation_date": 1522851466, "answer_id": 49653437, "question_id": 49653235, "link": "https://stackoverflow.com/questions/49653235/shortening-gcc-error-messages/49653437#49653437", "title": "Shortening GCC error messages", "body": "<p>One way is to use <code>-Wfatal-errors</code>.  It changes the error message from</p>\n\n<pre><code>&lt;source&gt;: In function 'void foo()':\n\n&lt;source&gt;:11:15: error: no match for 'operator&lt;&lt;' (operand types are 'std::ostream {aka std::basic_ostream&lt;char&gt;}' and 'Z')\n\n     std::cout &lt;&lt; z; // typo - meant s\n\n     ~~~~~~~~~~^~~~\n\nIn file included from /opt/compiler-explorer/gcc-7.3.0/include/c++/7.3.0/iostream:39:0,\n\n                 from &lt;source&gt;:2:\n\n/opt/compiler-explorer/gcc-7.3.0/include/c++/7.3.0/ostream:108:7: note: candidate: std::basic_ostream&lt;_CharT, _Traits&gt;::__ostream_type&amp; std::basic_ostream&lt;_CharT, _Traits&gt;::operator&lt;&lt;(std::basic_ostream&lt;_CharT, _Traits&gt;::__ostream_type&amp; (*)(std::basic_ostream&lt;_CharT, _Traits&gt;::__ostream_type&amp;)) [with _CharT = char; _Traits = std::char_traits&lt;char&gt;; std::basic_ostream&lt;_CharT, _Traits&gt;::__ostream_type = std::basic_ostream&lt;char&gt;]\n\n       operator&lt;&lt;(__ostream_type&amp; (*__pf)(__ostream_type&amp;))\n\nmany more lines of errors\n</code></pre>\n\n<p>to</p>\n\n<pre><code>    &lt;source&gt;: In function 'void foo()':\n\n&lt;source&gt;:11:15: error: no match for 'operator&lt;&lt;' (operand types are 'std::ostream {aka std::basic_ostream&lt;char&gt;}' and 'Z')\n\n     std::cout &lt;&lt; z; // typo - meant s\n\n     ~~~~~~~~~~^~~~\n\ncompilation terminated due to -Wfatal-errors.\n\nCompiler returned: 1\n</code></pre>\n\n<p>The only downside is you will only get the first error.  If your compile times are long then this isn't the greatest as you wouldn't be able to fix any other errors until you fix that first one and recompile.</p>\n"}], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1522865160, "creation_date": 1522850966, "last_edit_date": 1522865160, "question_id": 49653235, "link": "https://stackoverflow.com/questions/49653235/shortening-gcc-error-messages", "title": "Shortening GCC error messages", "body": "<p>Whenever <code>gcc</code> can't find a matching overload for a function with multiple overloads, it gives lines and lines of errors, explaining which overload was tried and why it was not used.</p>\n\n<p>While often it is useful, it is also often not, as the problem as a simple typo at the call site. And in this particular case, it is not even helpful, because it will take considerable time to even find out which line is ultimately responsible for this issue.</p>\n\n<p>Is there any command line switch to GCC to shorten the output and only include the actual triggering line? For example:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nstruct Z{};\n\nvoid foo() {\n\n    std::string s;\n    Z z;\n\n    std::cout &lt;&lt; z; // typo - meant s \n}\n</code></pre>\n\n<p>See error output: <a href=\"https://godbolt.org/g/wz5vL2\" rel=\"nofollow noreferrer\">https://godbolt.org/g/wz5vL2</a></p>\n\n<p><strong>Small addition</strong>: third party solutions (STLFilt, gccfilter, etc) do not fit the bill, because a) my work environment is not welcoming towards installing 3rd party apps and b) they tend to become unmaintained and stop working with the next compiler upgrade</p>\n"}, {"tags": ["c++", "arrays", "sorting", "struct"], "comments": [{"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 0, "creation_date": 1522851354, "post_id": 49653214, "comment_id": 86315192, "body": "This is very unusual. Typically you have some type of container which can be sorted. For frequent changes a list is well suited. Storing the position inside the sorted elements need a full recalculating of all positions by every insertation. This is very inefficient. That did not mean it couldn&#39;t be done, but it is not very useful!"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1522851703, "post_id": 49653214, "comment_id": 86315500, "body": "This looks like a double linked list, not an array."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1522851766, "post_id": 49653214, "comment_id": 86315553, "body": "This doesn&quot;t look like a sensible design to me. If you want to sort pointers or indices based on the content of an immutable array, have a separate array of pointers or indices and sort it. Why you would need prev/next is a total mystery."}, {"owner": {"reputation": 21, "user_id": 9540059, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216083692553392/picture?type=large", "display_name": "Riccardo", "link": "https://stackoverflow.com/users/9540059/riccardo"}, "edited": false, "score": 0, "creation_date": 1522852696, "post_id": 49653214, "comment_id": 86316349, "body": "thank you, i think i&#39;ll use the array of pointers, i thought it would have been more comprehensible with a struct but at the end it was a lot more complex to implement"}], "answers": [{"comments": [{"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1522851593, "post_id": 49653453, "comment_id": 86315401, "body": "std::end(*_array) will not work, as this is only a pointer to the first element."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 0, "last_activity_date": 1522851643, "last_edit_date": 1522851643, "creation_date": 1522851509, "answer_id": 49653453, "question_id": 49653214, "link": "https://stackoverflow.com/questions/49653214/finding-the-sorted-order-of-an-an-array-of-structs-in-c/49653453#49653453", "title": "Finding the sorted order of an an array of structs in c++", "body": "<p>You can create a new array or vector of <a href=\"http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper\" rel=\"nofollow noreferrer\">std::reference_wrapper</a> and then <a href=\"http://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"nofollow noreferrer\">std::sort</a> that container to get a sorted \"view\" of the original array.</p>\n\n<p>For example:</p>\n\n<pre><code>std::vector&lt;std::reference_wrapper&lt;elemento&gt;&gt; sorted_view(std::begin(the_array), std::end(the_array);\nstd::sort(std::begin(sorted_view), std::end(sorted_view), comparison_function_or_lambda);\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9540059, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216083692553392/picture?type=large", "display_name": "Riccardo", "link": "https://stackoverflow.com/users/9540059/riccardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522864754, "creation_date": 1522850899, "last_edit_date": 1522864754, "question_id": 49653214, "link": "https://stackoverflow.com/questions/49653214/finding-the-sorted-order-of-an-an-array-of-structs-in-c", "title": "Finding the sorted order of an an array of structs in c++", "body": "<p>I have: </p>\n\n<pre><code>int  _size; //array's dimension\nint _cont; //number of elements at the moment (&lt;_size)\nbool _full;\n\nstruct elemento {\n    T value;\n    int pos;\n    elemento *prev;\n    elemento *next;\n    elemento(): value(0), pos(-1), prev(0), next(0){}\n    elemento(const T &amp;v): value(v), pos(-1), prev(0), next(0){}\n};\nelemento *_array;\n</code></pre>\n\n<p>I want to sort it without modifying the original array, except setting \"pos\" to save the position of the sorted element.  I expected it would be useful to set a next/prev pointer for confronting the two elements' values but I can't figure out how. I made a function</p>\n\n<pre><code>add(elemento v) \n</code></pre>\n\n<p>where I manually insert every element, and I was thinking about calling the sorting function at <code>v.pos=sort_function(_cont)</code> but I cannot figure out how to sort.</p>\n"}, {"tags": ["python", "c++", "pybind11"], "comments": [{"owner": {"reputation": 3990, "user_id": 6095394, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7e512acda63343ac20eedd20c3964911?s=128&d=identicon&r=PG&f=1", "display_name": "pschill", "link": "https://stackoverflow.com/users/6095394/pschill"}, "edited": false, "score": 0, "creation_date": 1522852113, "post_id": 49653205, "comment_id": 86315840, "body": "Do you want to call python code from c++, call c++ code from python, or both?"}, {"owner": {"reputation": 790, "user_id": 2723494, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f4a7e3798552e42bb0ea3e843312cc0d?s=128&d=identicon&r=PG&f=1", "display_name": "user2723494", "link": "https://stackoverflow.com/users/2723494/user2723494"}, "reply_to_user": {"reputation": 3990, "user_id": 6095394, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7e512acda63343ac20eedd20c3964911?s=128&d=identicon&r=PG&f=1", "display_name": "pschill", "link": "https://stackoverflow.com/users/6095394/pschill"}, "edited": false, "score": 0, "creation_date": 1522852533, "post_id": 49653205, "comment_id": 86316220, "body": "At this stage, just call c++ from Python. Python calls c++, c++ performs some operation more efficiently, then passes the result back to python."}, {"owner": {"reputation": 3990, "user_id": 6095394, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7e512acda63343ac20eedd20c3964911?s=128&d=identicon&r=PG&f=1", "display_name": "pschill", "link": "https://stackoverflow.com/users/6095394/pschill"}, "edited": false, "score": 6, "creation_date": 1522853521, "post_id": 49653205, "comment_id": 86317010, "body": "Both pybind11 and boost do a good job with creating the bindings. However, you want to think twice about introducing a large depency such as boost. If you only need a library for python bindings, go with pybind11, since it is much more lightweight. I also made good experiences with the cython library. The main difference between pybind11 and cython is that with pybind11 you write the bindings in c++, while in cython you write the bindings in a language similar to python."}], "answers": [{"tags": [], "owner": {"reputation": 386, "user_id": 7237628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a333b87481c0ecac25832977bcf1b1f6?s=128&d=identicon&r=PG&f=1", "display_name": "ryadav", "link": "https://stackoverflow.com/users/7237628/ryadav"}, "is_accepted": true, "score": 16, "last_activity_date": 1525165075, "creation_date": 1525165075, "answer_id": 50113786, "question_id": 49653205, "link": "https://stackoverflow.com/questions/49653205/pybind11-or-boost-python-or-neither/50113786#50113786", "title": "Pybind11 or Boost.Python or neither-", "body": "<p>I would recommend PyBind11. I am using it for similar use-case where Python modules calls C++ to perform operations which are costlier and performance extensive. Boost Python is a richer library with size cost where as PyBind11 is header only and it supports STL which makes life easier to pass on basic data structure without writing any code!   If you can wrap your calls to basic C function and primitive data types then Cpython would be the best!</p>\n"}, {"tags": [], "owner": {"reputation": 119, "user_id": 2525388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57b91fc56eb5efa02f19150f1d48dada?s=128&d=identicon&r=PG", "display_name": "Joe Marley", "link": "https://stackoverflow.com/users/2525388/joe-marley"}, "is_accepted": false, "score": 10, "last_activity_date": 1525219537, "creation_date": 1525219537, "answer_id": 50125447, "question_id": 49653205, "link": "https://stackoverflow.com/questions/49653205/pybind11-or-boost-python-or-neither/50125447#50125447", "title": "Pybind11 or Boost.Python or neither-", "body": "<p>We are using pybind11 in-house for something similar to what you describe (C++ module being accessed from Python).  I am unwilling to pull in all the requirements of Boost, and pybind11 takes care of much of the \"glue\" normally necessary between C++ and Python.  Things like converting exceptions are not readily thought of in many cases, but are handled nicely by pybind11.</p>\n\n<p>In addition we write wrappers around our C++ internal classes, so that pybind11 can be pybind11 and our internal core engine can be C++.  Translations are typically not that hard.</p>\n\n<p>Personal experience with pybind11 is that \"easy things are easy, hard things are still hard\".  Anything that is covered in the sample tutorial is quickly second nature, but things that aren't obvious usually take some digging to find a good way to do.</p>\n\n<p>Still, all in all, very recommended.  I would use it again for new projects in a heartbeat.</p>\n"}], "owner": {"reputation": 790, "user_id": 2723494, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f4a7e3798552e42bb0ea3e843312cc0d?s=128&d=identicon&r=PG&f=1", "display_name": "user2723494", "link": "https://stackoverflow.com/users/2723494/user2723494"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5903, "favorite_count": 2, "accepted_answer_id": 50113786, "answer_count": 2, "score": 13, "last_activity_date": 1525219537, "creation_date": 1522850862, "question_id": 49653205, "link": "https://stackoverflow.com/questions/49653205/pybind11-or-boost-python-or-neither", "title": "Pybind11 or Boost.Python or neither-", "body": "<p>I'm curious what the most flexible, most efficient, and most seamless method is for getting C++ and Python to talk to each other. \nThe contenders seem to be Pybind11, Boost.Python, and neither (simply writing functions and wrappers as below).</p>\n\n<pre><code>using namespace boost::algorithm;\nstatic PyObject* strtest(PyObject* self, PyObject* args)\n{\n    std::string s = \"Boost C++ Libraries\";\n    to_upper(s);\n    PyObject * python_val = Py_BuildValue(\"s\", s.c_str());\n    return python_val;\n}\n\n\nPyMODINIT_FUNC initmath_demo(void)\n{\n    static PyMethodDef methods[] = {\n        \"Test boost libraries\" },\n        { NULL, NULL, 0, NULL }\n\n    };\n\n    PyObject *m = Py_InitModule(\"math_demo\", methods);\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 1, "creation_date": 1522850757, "post_id": 49653112, "comment_id": 86314737, "body": "I suspect this is implementation specific."}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1522850809, "post_id": 49653112, "comment_id": 86314775, "body": "<a href=\"https://stackoverflow.com/questions/6627167/stdsetinsert-how-bad-can-i-hint\">Related, possible duplicate</a>. &quot;the <code>_M_insert_unique</code> member function with a hint argument looks one node to the left of the hint, then one node to the right, then defaults to calling the ordinary insert routine.&quot;"}, {"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1522851288, "post_id": 49653112, "comment_id": 86315139, "body": "The <a href=\"https://gcc.gnu.org/onlinedocs/libstdc++/manual/associative.html#containers.associative.insert_hints\" rel=\"nofollow noreferrer\">libstdc++ docs</a> seem to imply that if the hint is not correct it is not used at all."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1522851421, "post_id": 49653112, "comment_id": 86315260, "body": "If you are worried about performance, the real answer is most likely: Don&#39;t use <code>std::map&lt;&gt;</code> in the first place. Its performance is much worse than <code>std::vector&lt;&gt;</code> and <code>std::unordered_map&lt;&gt;</code>, and I have yet to come across an application that cannot replace <code>std::map&lt;&gt;</code> with either without any problems."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1522889186, "post_id": 49653112, "comment_id": 86335052, "body": "@ChrisDrew: The problem is that in C++98, the standard said it was effective if the insertion point was immediately after the hint. That was corrected to what was originally intended (before the hint) in C++11. Some implementations now check both, since both have been specified at different times."}], "answers": [{"comments": [{"owner": {"reputation": 261, "user_id": 8000475, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1e1c4ef80b02f0991fd63cef0bf1b842?s=128&d=identicon&r=PG&f=1", "display_name": "imhuay", "link": "https://stackoverflow.com/users/8000475/imhuay"}, "edited": false, "score": 0, "creation_date": 1522851522, "post_id": 49653342, "comment_id": 86315339, "body": "Excuse, what is it means <code>permitted to ignore the hint</code>? Is it means that if the hint doesn&#39;t meet some requirement, the set will not use it?"}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "reply_to_user": {"reputation": 261, "user_id": 8000475, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1e1c4ef80b02f0991fd63cef0bf1b842?s=128&d=identicon&r=PG&f=1", "display_name": "imhuay", "link": "https://stackoverflow.com/users/8000475/imhuay"}, "edited": false, "score": 0, "creation_date": 1522852957, "post_id": 49653342, "comment_id": 86316586, "body": "@imhuay Sorry I had the wrong quote but the gist is similar. Yes, the hint needs to be exact, otherwise it can/will be ignored."}], "tags": [], "owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "is_accepted": false, "score": 3, "last_activity_date": 1522853280, "last_edit_date": 1522853280, "creation_date": 1522851211, "answer_id": 49653342, "question_id": 49653112, "link": "https://stackoverflow.com/questions/49653112/does-it-matter-that-the-insert-hint-place-which-is-close-the-final-place-is-befo/49653342#49653342", "title": "Does it matter that the insert hint place which is close the final place is before or after the final place?", "body": "<p>This seems to be implementation dependent. So you need to check your library implementation. (I have not checked other revisions).</p>\n\n<p>n3797 Table 102. \u00a7 23.2.4.</p>\n\n<blockquote>\n  <p>logarithmic in general, but amortized constant if it\n  is inserted right before p</p>\n</blockquote>\n\n<p>The standard says that if you provide the exact insertion point (as given by lower_bound for instance) the map/set will use this and no extra work needs to be done to do the insert, unless special circumstances are met.  If you do not provide the precise insertion point it can behave like a regular insert. If you provide an incorrect insertion point it is not allowed to behave worse than a regular insert.</p>\n\n<p>A regular insert finds the insertion point in the map in a very similar fashion to <code>lower_bound</code>. <code>lower_bound</code>is also logarithmic. So if you do <code>lower_bound + insert(hint, element)</code> you are doing the same work as just <code>insert(element)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 3, "creation_date": 1522885322, "post_id": 49661999, "comment_id": 86333966, "body": "Neat post but it is a rant. Not a concise answer to the question."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 3, "creation_date": 1522885698, "post_id": 49661999, "comment_id": 86334069, "body": "This answer has a very large amount of text. It would be a lot easier to understand if you made it more concise. There is a lot of extra &quot;fluff&quot; that can be simply removed, for example"}, {"owner": {"reputation": 313, "user_id": 6483524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eeb6ee7ec0f01f1d68bb7a9f2ffa34f?s=128&d=identicon&r=PG&f=1", "display_name": "Tiger4Hire", "link": "https://stackoverflow.com/users/6483524/tiger4hire"}, "edited": false, "score": 0, "creation_date": 1522896835, "post_id": 49661999, "comment_id": 86336720, "body": "Yes, agreed. I haven&#39;t posted in a while, I kind of got carried away.I"}], "tags": [], "owner": {"reputation": 313, "user_id": 6483524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eeb6ee7ec0f01f1d68bb7a9f2ffa34f?s=128&d=identicon&r=PG&f=1", "display_name": "Tiger4Hire", "link": "https://stackoverflow.com/users/6483524/tiger4hire"}, "is_accepted": false, "score": 4, "last_activity_date": 1522981481, "last_edit_date": 1522981481, "creation_date": 1522885087, "answer_id": 49661999, "question_id": 49653112, "link": "https://stackoverflow.com/questions/49653112/does-it-matter-that-the-insert-hint-place-which-is-close-the-final-place-is-befo/49661999#49661999", "title": "Does it matter that the insert hint place which is close the final place is before or after the final place?", "body": "<p>The bad news...</p>\n\n<p>We call these types map/set, but what we really mean is tree&lt;pair&gt;/tree. The insert operation on a tree is a lower_bound O(log(N)), followed by the operation to actually add the new value. (Normally the tree is an RB tree so adding may involve a \"rotation\")</p>\n\n<p>By calling lower_bound then inserting, you are simply implementing insert function the hard way. There is no way this could ever be faster. If it was, we would be asking why this wasn't the default implementation.</p>\n\n<p>The good news...</p>\n\n<p>If what you are really asking is ... \"How do I go faster than a map\". This is easy. There are a couple of choices, depending upon what is slower - access or insertion/deletion, how many elements are stored, how big the key/value types are, or if there are special reasons why key/value are expensive to move, etc.</p>\n\n<p>1) Hash map, implementation in std as unordered_map\nThis is a technique sometimes called bucket sorting. What you do is supply a function that turns the key into a number. Then you mod the number and use it to look-up into an array of maps. A lot of people mistaken believe means it gives linear access, it doesn't, it is still O(log(N)), just with a smaller N.\nThe downside is it uses more memory. Obviously the hash function needs to be fast too.</p>\n\n<p>2)<br>\nFor faster lookup, consider a sorted-vector (sometimes called a flat-map, see boost::flatmap). It is simply a std::vector&lt;pair&lt;key,value&gt;&gt;, just sort'ed. Gloriously simple this structure is much faster than map for lookups. It works because the lower_bound function is also a general algorithm, and is still log(N), but vectors are much more cache friendly. Expect it to go around 4 times faster.<br>\nInsertion/deletion are O(N) because you have to memcpy memory around....but, as stated above, insertion requires a lower_bound call, or equivalent, and this is faster with sorted-vectors. By experimentation, I have found that vector is faster than set/map for insertion/deletion for structures of less than 4K, but after that it becomes slower, but this is obviously H/W dependent.  </p>\n\n<p>3) Don't insert/delete, use a sorted vector as above, but do not call insert/erase, instead simply push_back to insert. To remove, swap the item with back() and resize. This means the sorting will break everytime you insert/erase, so you need a dirty flag. When you do a look-up, you check the dirty flag and if its set, you sort. The std::sort algorithm is real piece of science, it's awesomely fast. I mean really FAST... The only downside is that it is N*log(N), so for large data sets (1000's of elements, or more) you need multiple inserts/erase to pay off, although not as many as people suspect.\nIt's also getting complex enough that you probably need a class/template to abstract it.  </p>\n\n<p>For fastest insert/delete...\n4) The king of all sorting algorithms, is a radix sort. Implementing 3) with a radix-sort gives you O(N) sorting time.\nDownside, radix algorithms generally need very large datasets to be worth while, (>10,000 elements typically), which is why they are not normally used. For smaller data-sets you normally find std:sort wins. \nPlus, I do not know a standard radix sort implementation, so it means writing your own, or a lot of googling. Typically, radix sorting only supports integer keys (although there is no inherent reason why it can't be extended).</p>\n\n<p>For the hackers...<br>\n5) set&lt;float&ft; or map&lt;float,X&gt; implies floating point comparisons. Now a real hack is to use an integer compare on floating-point data (as in alias-cast, cast a float* to int* in the compare function). This works because floating point numbers store the exponent in the MSB, so a larger number has a larger exponent. The only problem is the sign flag, it's the wrong way around, so be aware if you ever iterate over the structure, the positive values are sorted low to high. Negative numbers are sorted high to low, meaning that the map isn't really sorted. If you only have either +ve or -ve numbers this doesn't matter. If you only insert/erase/lookup then the absolute storage order isn't important.<br>\n(If you want to know why integer comparison is faster, it's because its more complicated, also often CPU's have separate registers for floating point, and access to those registers is slower).\nAlso note, that alias-cast'ing sometimes breaks compiler optimisations, depending on compiler you might need to tell the compiler what your doing. You do this using a compiler flag. On GCC this is no_strict_aliasing, Visual Studio on the other hand doesn't care, and should be fine without)<br>\n...<br>\nand so on, the point is there are lots of ways to beat the \"standard\" algorithms, because the standard algorithms involve trading-off pro-and-cons, to balance all cases. If you only have one, known case, you can often beat them. But... if you don't have specific knowledge of what it is you are storing, or how many, then trying to beat the std::XXXXX is a suckers game. The standard algorithms are implemented by people who have been doing this for decades, and know what they are doing.\nThat is why what you trying is silly, if it was that easy, the std::XXXX version would already do it.</p>\n"}], "owner": {"reputation": 261, "user_id": 8000475, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1e1c4ef80b02f0991fd63cef0bf1b842?s=128&d=identicon&r=PG&f=1", "display_name": "imhuay", "link": "https://stackoverflow.com/users/8000475/imhuay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 1, "answer_count": 2, "score": 6, "last_activity_date": 1522981481, "creation_date": 1522850619, "last_edit_date": 1522850880, "question_id": 49653112, "link": "https://stackoverflow.com/questions/49653112/does-it-matter-that-the-insert-hint-place-which-is-close-the-final-place-is-befo", "title": "Does it matter that the insert hint place which is close the final place is before or after the final place?", "body": "<p>I am using the function <code>insert</code> with hint (<code>emplace_hint</code>) in the set/map.</p>\n\n<p>The <a href=\"http://www.cplusplus.com/reference/map/map/emplace_hint/\" rel=\"nofollow noreferrer\">api doc</a> said that when using hint place it will \"begin search the final place from the hint palce and speeding up the process considerably when the actual insertion point is either position or <strong>close to it</strong>.\"</p>\n\n<p>I want to know does the <strong>close</strong> here means before, after or both, and how to effectivly use this feature? </p>\n\n<p>If use <code>lower_bound</code> or <code>upper_bound</code> to find the close place handbefore, it seems not speedup the process. </p>\n"}, {"tags": ["c++", "beginthread"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1522850775, "post_id": 49653102, "comment_id": 86314742, "body": "You may be interested the c++ standard library&#39;s <a href=\"http://en.cppreference.com/w/cpp/thread\" rel=\"nofollow noreferrer\">thread support</a>."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1522851264, "post_id": 49653102, "comment_id": 86315123, "body": "Does the thread never run? Or does the main thread ask the thread&#39;s state (e.g. with <code>blnIsRunning()</code>) and never receives <code>true</code>? If thread is updating <code>mestate</code> and <code>clsOpenLDVthread::blnIsRunning()</code> (called from main thread) accesses <code>mestate</code> it has to be safed by a mutex or made <code>atomic</code>. Otherwise, &quot;internal magic&quot; (e.g. caching) may prevent that both threads get equal/correct results (at the same time)."}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 0, "creation_date": 1522851311, "post_id": 49653102, "comment_id": 86315160, "body": "In the thread function I am sending a message to the console, it never gets executed.  See the first very simple example which works...the later doesn&#39;t."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1522851564, "post_id": 49653102, "comment_id": 86315372, "body": "Nevertheless, <i>every</i> data which is shared between threads must be safed against concurrent access. I once was thinking a <code>bool</code> (in my imagination a bit) is atomic by definition. Until I learnt that I was wrong. Caching, code re-ordering and such things can make this assumption wrong. The only chance to grant correct behavior (i.e. force determinism) is to insert fences and barriers by using locks or atomics."}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1522851671, "post_id": 49653102, "comment_id": 86315469, "body": "@Scheff, I understand what you are saying and I have used mutexes before to lock and unlock and protect data areas...however this is a stage I will implement later, at the moment it is not getting to the thread itself, in my thread handler there is no shared data just an output to the console...it never gets there."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1522852480, "post_id": 49653102, "comment_id": 86316167, "body": "After looking again, I&#39;m not quite sure. The thread should at least start one time. (Couldn&#39;t see anything suspicious.) The only thing where I&#39;m not sure about: <code>OutputDebugString(&quot;msgReaderThread\\n&quot;);</code> (I&#39;ve never used it. May be, you&#39;ve experiences with it but not if called in another thread than the main thread...) Did you set a break point on it which was reached in debugger? (Replacement with <code>printf()</code> as in your first test would do as well.)"}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1522852651, "post_id": 49653102, "comment_id": 86316309, "body": "@Scheff,  I added that line just to see that something was going to be output to the console...the function OutputDebugString is ok it works in Windows and outputs to the console, but setting a break point on this line or even a simple variable assignment in the thread body, never gets executed."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1522852792, "post_id": 49653102, "comment_id": 86316435, "body": "Btw. If <code>clsOpenLDVrdr::msgReaderThread()</code> is the thread main function it stops very soon. Make a loop with a sleep into it as you did in your test. (Not that it exits too soon...) ;-) (Although, it does not explain why the breakpoint is never reached...)"}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1522852894, "post_id": 49653102, "comment_id": 86316524, "body": "@Scheff, yet msgReaderThread is the thread body function, the intention in the final code is to add a lot more to it, but it never gets there even once, which it should..."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1522853970, "post_id": 49653102, "comment_id": 86317346, "body": "so what&#39;s <code>blnResult</code>?"}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1522854014, "post_id": 49653102, "comment_id": 86317385, "body": "@UKMonkey, its a boolean variable, true or false."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1522854200, "post_id": 49653102, "comment_id": 86317539, "body": "@SPlatten very funny :P   What&#39;s it&#39;s value.  Does the OS report that it&#39;s started a thread?"}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1522854268, "post_id": 49653102, "comment_id": 86317592, "body": "@UkMonkey, sorry, wasn&#39;t trying to be funny, I didn&#39;t know what you were asking, isn&#39;t the result obvious?  If mhThread (the handle) returned is not NULL or 0 then the result is true else false."}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 0, "creation_date": 1522854325, "post_id": 49653102, "comment_id": 86317631, "body": "I&#39;ve also just tried using _beginthreadex, will edit post now to show with alternative, but the result is the same..."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1522854494, "post_id": 49653102, "comment_id": 86317745, "body": "@SPlatten yes it it obvious - but you&#39;ve not said if it&#39;s true or false.  ie are you trying to work out why a thread doesn&#39;t enter it&#39;s main because the OS never reports that it&#39;s started a thread..."}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1522854653, "post_id": 49653102, "comment_id": 86317865, "body": "@UKMonkey, the result of blnResult is true a typical value of &#39;mhThread &#39; is 0x00000794"}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 1, "creation_date": 1522857120, "post_id": 49653102, "comment_id": 86319707, "body": "@SPlatten Which suggests the <i>thread</i> is being created, but that something happens to it before it gets to your <code>OutputDebugString()</code> call. Not overly experienced in threads, but can you pass a class-member function to <code>_beginthread()</code>? (It&#39;s probably expecting a <code>this</code> and not getting anything). Try just passing a standalone function at first. Then, as in your first example, try a <code>static</code> member function. If you <i>need</i> a class-memeber function, you will probably need to pass <code>this</code> in to <code>_beginthread()</code> as morph it back into a class-pointer in the thread function."}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "reply_to_user": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1522857542, "post_id": 49653102, "comment_id": 86319983, "body": "@TripeHound, Please see edit of my post at the bottom, I will add my results now."}, {"owner": {"reputation": 2785, "user_id": 1057849, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yB8Qu.jpg?s=128&g=1", "display_name": "Josh Greifer", "link": "https://stackoverflow.com/users/1057849/josh-greifer"}, "edited": false, "score": 0, "creation_date": 1522859831, "post_id": 49653102, "comment_id": 86321280, "body": "What is the threading model of your linked c runtime library?  Assuming it&#39;s /MT"}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "reply_to_user": {"reputation": 2785, "user_id": 1057849, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yB8Qu.jpg?s=128&g=1", "display_name": "Josh Greifer", "link": "https://stackoverflow.com/users/1057849/josh-greifer"}, "edited": false, "score": 0, "creation_date": 1522859866, "post_id": 49653102, "comment_id": 86321308, "body": "@JoshGreifer, sorry, I&#39;m not sure what you mean, how do I find out?"}, {"owner": {"reputation": 2785, "user_id": 1057849, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yB8Qu.jpg?s=128&g=1", "display_name": "Josh Greifer", "link": "https://stackoverflow.com/users/1057849/josh-greifer"}, "edited": false, "score": 0, "creation_date": 1522859893, "post_id": 49653102, "comment_id": 86321320, "body": "Are you using visual studio to build your application?"}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "reply_to_user": {"reputation": 2785, "user_id": 1057849, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yB8Qu.jpg?s=128&g=1", "display_name": "Josh Greifer", "link": "https://stackoverflow.com/users/1057849/josh-greifer"}, "edited": false, "score": 0, "creation_date": 1522859930, "post_id": 49653102, "comment_id": 86321344, "body": "@JoshGreifer, yes, Microsoft Visual Studio 2008, version 9.0.30729 SP"}, {"owner": {"reputation": 2785, "user_id": 1057849, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yB8Qu.jpg?s=128&g=1", "display_name": "Josh Greifer", "link": "https://stackoverflow.com/users/1057849/josh-greifer"}, "edited": false, "score": 0, "creation_date": 1522860024, "post_id": 49653102, "comment_id": 86321407, "body": "Well,  I can&#39;t remember where the option is in VS 2008, but in later versions you&#39;ll find it in the &quot;C/C++ -&gt; Code Generation&quot; section of the project properties.  Should be set to /MT or /MTd"}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "reply_to_user": {"reputation": 2785, "user_id": 1057849, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yB8Qu.jpg?s=128&g=1", "display_name": "Josh Greifer", "link": "https://stackoverflow.com/users/1057849/josh-greifer"}, "edited": false, "score": 0, "creation_date": 1522860091, "post_id": 49653102, "comment_id": 86321453, "body": "@JoshGreifer, in C/C++ Code Generation, Runtime Library, &quot;Multi-threaded Debug (/MTd)&quot;"}, {"owner": {"reputation": 2785, "user_id": 1057849, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yB8Qu.jpg?s=128&g=1", "display_name": "Josh Greifer", "link": "https://stackoverflow.com/users/1057849/josh-greifer"}, "reply_to_user": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 0, "creation_date": 1522860105, "post_id": 49653102, "comment_id": 86321461, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/168238/discussion-between-josh-greifer-and-splatten\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "is_accepted": true, "score": 1, "last_activity_date": 1522910514, "creation_date": 1522910514, "answer_id": 49665701, "question_id": 49653102, "link": "https://stackoverflow.com/questions/49653102/threads-not-running-why/49665701#49665701", "title": "Threads not running, why?", "body": "<p>Solved...I didn't realise at first but for some reason the existing DLL had a call to:</p>\n\n<pre><code>    DisableThreadLibraryCalls(hInstance);\n</code></pre>\n\n<p>This prevents the threads from running.  Having commented this out everything now works.</p>\n"}], "owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 49665701, "answer_count": 1, "score": 0, "last_activity_date": 1522910514, "creation_date": 1522850598, "last_edit_date": 1522858689, "question_id": 49653102, "link": "https://stackoverflow.com/questions/49653102/threads-not-running-why", "title": "Threads not running, why?", "body": "<p>I wrote a simple test application to prove that the threads work:</p>\n\n<pre><code>    // Test.cpp : Defines the entry point for the console application.\n    //\n\n    #include \"stdafx.h\"\n\n    class clsTest {\n    private:\n        uintptr_t muintHandle;\n\n        static unsigned int __stdcall fnThread(void* pData) {\n            while( 1 ) {\n                _sleep(1000);\n                printf(\"In fnThread, handle = %d\\n\", *(uintptr_t*)pData);\n            }\n            return 0;\n        }\n    public:\n        clsTest() {\n            muintHandle = _beginthreadex(0, 0, &amp;clsTest::fnThread, (void*)&amp;muintHandle, 0, 0);\n            printf(\"clsTest(), after beginthreadex, handle = %u\\n\", muintHandle);\n        }\n    };\n\n    int _tmain(int argc, _TCHAR* argv[]) {\n        clsTest* pT = NULL;\n\n        while(1) {\n            printf(\"From _tmain\\n\");\n\n            if ( pT == NULL ) {\n                pT = new clsTest();\n            }\n            _sleep(1000);\n        }\n        return 0;\n    }\n</code></pre>\n\n<p>The output from this application is:</p>\n\n<pre><code>    From _tmain\n    clsTest(), after beginthreadex, handle = 112\n    In fnThread, handle = 112\n    From _tmain\n    In fnThread, handle = 112\n    From _tmain\n    In fnThread, handle = 112\n    From _tmain\n    In fnThread, handle = 112\n    From _tmain\n    In fnThread, handle = 112\n    From _tmain\n    In fnThread, handle = 112        \n    ...\n</code></pre>\n\n<p>Continuously which is exactly what I would expect to see...Now in a much larger project I have a base class:</p>\n\n<pre><code>    typedef enum {\n            eIdle = 0,      //Thread is not working at all\n            eStarted,       //Thread has been started but is not fully operational yet\n            eRunning,       //Thread is working normally\n            ePausing,       //Thread is requested to enter the paused state\n            ePaused,        //Thread is paused\n            eTerminating    //Termination has been requested but not completed yet\n        } eThreadStates; \n\n    class clsOpenLDVthread {\n    protected:\n        volatile eThreadStates meState;\n        CRITICAL_SECTION mCritControl;  // critical section for thread control\n        char mszName[80];\n        HANDLE mhEvent, mhThread;\n        virtual bool blnStart() = 0;\n\n    public:\n        clsOpenLDVthread(LPCSTR pszName);\n        ~clsOpenLDVthread();\n\n        bool inline blnIsRunning();\n        bool inline blnIsStopped();\n        bool inline blnIsStopping();\n        bool inline blnIsStarting();\n        bool inline blnIsPausing();\n        bool inline blnIsPaused();\n        bool blnPause(bool blnState);\n        virtual bool blnStop();\n    };\n\n    clsOpenLDVthread::clsOpenLDVthread(LPCSTR pszName) : meState(eIdle)\n                                               , mhThread(NULL) {\n        ::InitializeCriticalSection(&amp;mCritControl); //Get a critical section\n        //Get a unique name for signaling event\n        sprintf(mszName, \"%s%d\", pszName, ::GetCurrentProcessId());\n        //Get the event object\n        mhEvent = ::CreateEvent(NULL, FALSE, FALSE, mszName);\n    }       \n    clsOpenLDVthread::~clsOpenLDVthread() {\n        if ( blnIsPaused() ) {\n            blnPause(false);\n        }\n        if ( blnIsRunning() ) {\n            blnStop();\n        }\n        if ( mhEvent ) {\n            ::CloseHandle(mhEvent);\n            mhEvent = NULL;\n        }\n        ::DeleteCriticalSection(&amp;mCritControl);\n    }\n    bool clsOpenLDVthread::blnIsPaused() {\n        return meState == ePaused;\n    }\n    bool clsOpenLDVthread::blnIsPausing() {\n        return meState == ePausing;\n    }\n    bool clsOpenLDVthread::blnIsRunning() {\n        return meState == eRunning;\n    }\n    bool clsOpenLDVthread::blnIsStarting() {\n        return meState == eStarted;\n    }\n    bool clsOpenLDVthread::blnIsStopped() {\n        return meState == eIdle;\n    }\n    bool clsOpenLDVthread::blnIsStopping() {\n        return meState == eTerminating;\n    }\n    bool clsOpenLDVthread::blnPause(bool blnState) {\n        bool blnResult = mhThread != NULL;\n        if ( blnResult ) {\n            if ( blnState ) {\n                unsigned uintCountDown = 10u;\n\n                if ( blnIsRunning() || blnIsPausing() ) {\n                    meState = ePausing;\n                    while( blnIsPausing() &amp;&amp; -- uintCountDown ) {\n                        ::SetEvent(mhEvent);\n        //Give thread chance to run and pause\n                        _sleep(751);\n                    }\n                    blnResult = blnIsPaused();\n                }\n            } else {\n                if ( blnIsPaused() ) {\n                    meState = eRunning;\n                    //this will need replacing...mhThread-&gt;ResumeThread();\n                }\n                blnResult = true;\n            }\n        }\n        return blnResult;\n    }\n    bool clsOpenLDVthread::blnStop() {\n        bool blnResult = meState == eIdle;\n        unsigned uintCountDown = 100u;\n\n        if ( blnIsPaused() ) {\n            blnPause(false);\n        }\n        if ( blnIsRunning() ) {\n            meState = eTerminating;\n\n            while( !blnIsStopped() &amp;&amp; --uintCountDown ) {\n                if ( mhEvent ) {\n                    ::SetEvent(mhEvent);\n                }\n        //Give thread a change to run and terminate\n                _sleep(501);\n            }\n            blnResult = blnIsStopped();\n            mhThread = NULL;\n        }\n        return blnResult;\n    }\n</code></pre>\n\n<p>Finally a derived class that implements the thread class and provides the blnStart method:</p>\n\n<pre><code>    class clsOpenLDVrdr : public clsOpenLDVthread {\n    public:\n    //Maximum size of uplink data per single transfer\n        static const unsigned mscuBuffersize;\n    private:\n    //The thread's main routine\n        static void msgReaderThread(LPVOID lpParam);\n\n    public:\n        clsOpenLDVrdr();\n        virtual ~clsOpenLDVrdr();\n    //Call this to start the thread, see clsOpenLDVthread for more operations\n        virtual bool blnStart();\n    };\n\n    const unsigned clsOpenLDVrdr::mscuBuffersize = MAX_OPENLDV_DATA;\n\n    clsOpenLDVrdr::clsOpenLDVrdr() : clsOpenLDVthread(_T(\"EvOpenLDVrdr\")) {\n    }\n    clsOpenLDVrdr::~clsOpenLDVrdr() {\n    }\n    bool clsOpenLDVrdr::blnStart() {\n        bool blnResult = false;\n        if ( blnIsStopped() ) {\n            meState = eStarted;\n        //Create the thread\n            mhThread = (HANDLE)_beginthread(&amp;clsOpenLDVrdr::msgReaderThread\n                                            ,0, NULL);\n            blnResult = mhThread != NULL;\n\n            while( blnResult &amp;&amp; (meState == eStarted) ) {\n        //Give the thread chance to start and initialize\n                _sleep(501);\n            }\n        }\n        return blnResult &amp;&amp; (meState == eRunning);\n    }\n    void clsOpenLDVrdr::msgReaderThread(LPVOID lpParam) {\n            OutputDebugString(\"msgReaderThread\\n\");\n    }\n</code></pre>\n\n<p>An instance of the class clsOpenLDVrdr is created and the blnStart method called:</p>\n\n<pre><code>    clsOpenLDVrdr* pobjReader = new clsOpenLDVrdr();\n    pobjReader-&gt;blnStart();\n</code></pre>\n\n<p>I can see in the debugger that \"blnStart\" is being called and stepping into it everything is executed...but the thread never runs.</p>\n\n<p>Also tried using _beginthreadex instead of _beginthread:</p>\n\n<pre><code>    mhThread = (HANDLE)_beginthreadex(0, 0, pfnThread, pobParam, 0, 0);\n</code></pre>\n\n<p>No difference.  There is some kind of incompatibility problem here as the simple example I created at the start of this post works and there isn't much difference between the two versions.  Except maybe the way its used...the first simple example was created as a Windows console application.  The project I'm having difficulty with is in a DLL.</p>\n\n<p>I'm attaching to the DLL with the debugger and stepping through the code which works until it gets to the loop after the beginthread call then it just loops forever and never gets into the thread.</p>\n\n<p>I just tried the following, adding a standalone thread with a standard C function:</p>\n\n<pre><code>    unsigned __stdcall threadTest(void* pobjData) {\n        OutputDebugString(\"threadTest\\n\");\n        return 0;\n   }\n</code></pre>\n\n<p>I then modify the \"_beginthread\" call as follows:</p>\n\n<pre><code>    mhThread = (HANDLE)_beginthreadex(0, 0, threadTest, pobjParam, 0, 0);\n</code></pre>\n\n<p>Sadly the result is the same, the threadTest function is not called.  But a valid handle is returned.</p>\n\n<p>Found this:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/8274083/unable-to-call-a-thread-in-dll-file\">unable to call a thread in dll file</a></p>\n\n<p>Looks interesting and may explain the strange behaviour I'm experiencing.</p>\n"}, {"tags": ["c++", "c++11", "language-lawyer"], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 5, "last_activity_date": 1522862348, "creation_date": 1522862348, "answer_id": 49656857, "question_id": 49653048, "link": "https://stackoverflow.com/questions/49653048/user-defined-conversion-operator-template-and-built-in-operators-no-match-for-o/49656857#49656857", "title": "User-defined conversion operator template and built-in operators: no match for operator", "body": "<p>I believe clang is right.</p>\n\n<p>To do lookup on <code>+</code>, since at least one argument has class type, we consider <a href=\"https://timsong-cpp.github.io/cppwp/n3337/over#match.oper-6\" rel=\"noreferrer\">member, non-member, and builtin candidates</a>. There aren't any member or non-member candidates, so that's eay enough. There is a builtin candidate for <a href=\"https://timsong-cpp.github.io/cppwp/n3337/over.built#12\" rel=\"noreferrer\"><code>int operator+(int, int)</code></a>, which is the only candidate. That candidate is viable because <code>A</code> can be convertible to <code>int</code>, directly (we have a standard conversion from <code>A</code> to <code>const A&amp;</code> for the implicit object parameter, and then the user defined conversion from that to <code>int</code>, there's no further conversion necessary). As we have one viable candidate, that trivially makes it the best viable candidate.</p>\n\n<hr />\n\n<p>Note that if <code>A</code> just had <code>operator int() const { return 1; }</code>, gcc would accept it. It's just the conversion function <em>template</em> that fails to be considered. </p>\n"}], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 49656857, "answer_count": 1, "score": 9, "last_activity_date": 1522863579, "creation_date": 1522850481, "last_edit_date": 1522863579, "question_id": 49653048, "link": "https://stackoverflow.com/questions/49653048/user-defined-conversion-operator-template-and-built-in-operators-no-match-for-o", "title": "User-defined conversion operator template and built-in operators: no match for operator", "body": "<p>Consider the following MCVE.</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\nstruct A {\n    template&lt;typename T, typename std::enable_if&lt;std::is_same&lt;T,int&gt;::value,int&gt;::type = 0&gt;\n    operator T() const { return static_cast&lt;T&gt;(1); }\n};\n\nint main() {\n    int x = 1;\n    A a;\n    return x + a;\n}\n</code></pre>\n\n<p><strong>clang</strong> compiles it fine. <a href=\"https://godbolt.org/g/6V5Zc3\" rel=\"noreferrer\"><strong>DEMO</strong></a></p>\n\n<p>But <strong>GCC</strong> fails with:</p>\n\n<pre><code>error: no match for 'operator+' (operand types are 'int' and 'A')\n  return x + a;\n         ~~^~~\n</code></pre>\n\n<p><strong>Question:</strong> who is right and why?</p>\n"}, {"tags": ["c++", "qt", "opengl", "qtgui"], "comments": [{"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1522950480, "post_id": 49652917, "comment_id": 86368436, "body": "It the app doesn&#39;t crash on debbug-mode, then you likely have some invalid pointer or data. Try commenting some lines and add some <code>std::cout</code> info to get the culprit line."}], "answers": [{"tags": [], "owner": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "is_accepted": false, "score": 1, "last_activity_date": 1523720940, "creation_date": 1523720940, "answer_id": 49833275, "question_id": 49652917, "link": "https://stackoverflow.com/questions/49652917/qt-opengl-segmentation-fault/49833275#49833275", "title": "Qt OpenGL Segmentation Fault", "body": "<p>Since you mentioned the terminal, I'm assuming you are running on Linux. </p>\n\n<p>Please be aware that QtCreator does not simply run your program with gdb. It also set up the <a href=\"http://doc.qt.io/qtcreator/creator-run-settings.html#selecting-the-run-environment\" rel=\"nofollow noreferrer\">running environment</a>, ensuring <strong>LD_LIBRARY_PATH</strong> is set correctly to let your application find the Qt dynamic libraries.</p>\n\n<p>If your program crashes immediately at startup, it may just be that it is not using the correct Qt libraries. Imagine you have Qt 5.2 installed on your system via distro packages, but you are developing with Qt SDK 5.9. When you run your software with QtCreator, it will set LD_LIBRARY_PATH to let your software use Qt 5.9. But when you run it from the terminal, it will use Qt 5.2 from /usr/lib, which is not binary compatible, and thus, crashes your program.</p>\n"}], "owner": {"reputation": 37, "user_id": 8359819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b8f066e17aa35d7613a7589404b0cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Jaav", "link": "https://stackoverflow.com/users/8359819/jaav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 708, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523720940, "creation_date": 1522850116, "last_edit_date": 1522946817, "question_id": 49652917, "link": "https://stackoverflow.com/questions/49652917/qt-opengl-segmentation-fault", "title": "Qt OpenGL Segmentation Fault", "body": "<p>I modified example from website (<a href=\"http://doc.qt.io/qt-5/qtgui-openglwindow-example.html\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/qtgui-openglwindow-example.html</a>) to work with 3D models and noticed that when I execute my program from terminal (without debugger) my program crushes. When I execute it from Qt Creator in debug mode it never crushes, and that's why I noticed that right now. I'm having bad time figuring this out. Object I'm trying to render is about 4k vertices.</p>\n\n<p>Code (there is some additional code about arduino readings, but it's not error's cause for sure):</p>\n\n<pre><code>#include \"h/modelwindow.h\"\n\nModelWindow::ModelWindow(QString modelDestination) : m_program(Q_NULLPTR), angle(0.0f,0.0f,0.0f),\n                                                     distance(0.0f,0.0f,0.0f)\n{\n    objectModel.LoadObject(modelDestination);\n}\n\nModelWindow::~ModelWindow()\n{\n    delete m_program;\n}\n\nvoid ModelWindow::initialize()\n{\n    m_program = new QOpenGLShaderProgram(this);\n    if(m_program-&gt;addShaderFromSourceFile(QOpenGLShader::Vertex, QDir::currentPath()+\"/shaders/basicshader.vert\"))\n    {\n        qDebug() &lt;&lt; \"Vertex shader loaded\";\n    }\n    else\n    {\n        close();\n        qDebug() &lt;&lt; \"Unable to load vertex shader\";\n    }\n    if(m_program-&gt;addShaderFromSourceFile(QOpenGLShader::Fragment,QDir::currentPath()+\"/shaders/basicshader.frag\"))\n    {\n        qDebug() &lt;&lt; \"Fragment shader loaded\";\n    }\n    else\n    {\n        close();\n        qDebug() &lt;&lt; \"Unable to load vertex fragment\";\n    }\n\n    m_program-&gt;link();\n    m_program-&gt;bind();\n\n    m_positionAttribute = m_program-&gt;attributeLocation(\"posAttr\");\n    m_colorAttribute=m_program-&gt;attributeLocation(\"colAttr\");\n    m_matrixUniform = m_program-&gt;uniformLocation(\"matrix\");\n}\n\nvoid ModelWindow::render()\n{\n    arduino.readLine();\n\n    //arduino delay in seconds\n    float aDelay = 0.1f;\n    float threshold = 0.1f;\n    float threshold2 = 0.001f;\n\n    QVector3D temp = arduino.gyro()* aDelay;\n    QVector3D temp2 = arduino.acc()* aDelay *aDelay * 10;\n\n    if(temp.x() &gt; threshold || temp.x() &lt; -threshold)\n    {\n        angle.setX(angle.x()+temp.x());\n    }\n    if(temp.y() &gt; threshold || temp.y() &lt; -threshold)\n    {\n        angle.setY(angle.y()+temp.y());\n    }\n    if(temp.z() &gt; threshold || temp.z() &lt; -threshold)\n    {\n        angle.setZ(angle.z()+temp.z());\n    }\n    if(temp2.x() &gt; threshold2 || temp2.x() &lt; -threshold2)\n    {\n        distance.setX(distance.x()+temp2.x());\n    }\n    if(temp2.y() &gt; threshold2 || temp2.y() &lt; -threshold2)\n    {\n        distance.setY(distance.y()+temp2.y());\n    }\n    if(temp2.z() &gt; threshold2 || temp2.z() &lt; -threshold2)\n    {\n        distance.setZ(distance.z()+temp2.z());\n    }\n\n    qDebug() &lt;&lt; \"Distance: \" &lt;&lt; distance.y() &lt;&lt; \" m \" &lt;&lt; distance.z() &lt;&lt; \" m \" &lt;&lt; -distance.x() &lt;&lt; \" m\";\n    qDebug() &lt;&lt; \"Angle: \" &lt;&lt; angle.y() &lt;&lt; \" deg \" &lt;&lt; angle.z() &lt;&lt; \" deg \" &lt;&lt; -angle.x() &lt;&lt; \" deg\";\n\n    glViewport(0, 0, width(), height());\n    glClear(GL_COLOR_BUFFER_BIT);\n    m_program-&gt;bind();\n\n    QMatrix4x4 matrix;\n    matrix.perspective(60.0f, 4.0f/3.0f, 0.1f, 100.0f);\n\n    //axes\n    //board | OpenGL\n    //  x   |   -z\n    //  y   |   x\n    //  z   |   y\n\n    //translations\n    matrix.translate(0.0f,0.0f,-4.0f);\n\n    matrix.translate(-distance.y(),0.0f,distance.x());\n\n    //rotations\n    matrix.rotate(angle.x(), 0, 0, -1);\n    matrix.rotate(angle.y(), 1, 0, 0);\n    matrix.rotate(angle.z(), 0, -1, 0);\n\n    m_program-&gt;setUniformValue(m_matrixUniform, matrix);\n\n    QVector &lt;QVector3D&gt; colors;\n\n    for(int i=0; i&lt;objectModel.vertices().size(); ++i)\n    {\n        QVector3D temp(0.75f, 0.75f, 0.75f);\n        colors.push_back(temp);\n    }\n\n    glVertexAttribPointer(m_positionAttribute, 3, GL_FLOAT, GL_TRUE, sizeof(QVector3D), &amp;objectModel.vertices()[0]);\n    glVertexAttribPointer(m_colorAttribute,3, GL_FLOAT, GL_FALSE, sizeof(QVector3D), &amp;colors[0]);\n\n    glEnableVertexAttribArray(0);\n    glEnableVertexAttribArray(1);\n\n    glDrawArrays(GL_TRIANGLES, 0, objectModel.vertices().size());\n\n    glDisableVertexAttribArray(1);\n    glDisableVertexAttribArray(0);\n\n    m_program-&gt;release();\n}\n</code></pre>\n\n<p>I think problem is in </p>\n\n<pre><code> glDrawArrays(GL_TRIANGLES, 0, objectModel.vertices().size());\n</code></pre>\n\n<p>or my object is too big.</p>\n\n<p>EDIT: All of Vertex Data is allocated statically.</p>\n"}, {"tags": ["c++", "set"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1522849819, "post_id": 49652762, "comment_id": 86313933, "body": "Look up what <code>find</code> returns"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1522849896, "post_id": 49652762, "comment_id": 86314002, "body": "What does <code>std::set::find</code> return if the element is not present in the set?"}, {"owner": {"reputation": 671, "user_id": 8022336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VsZUw.png?s=128&g=1", "display_name": "pointerless", "link": "https://stackoverflow.com/users/8022336/pointerless"}, "edited": false, "score": 1, "creation_date": 1522850413, "post_id": 49652762, "comment_id": 86314454, "body": "The <code>std::set::find</code> function returns the <code>std::set::end</code> iterator if the item is not found. Just for the avoidance of doubt."}], "answers": [{"comments": [{"owner": {"reputation": 1285, "user_id": 9215365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SInc5.jpg?s=128&g=1", "display_name": "John Ding", "link": "https://stackoverflow.com/users/9215365/john-ding"}, "edited": false, "score": 0, "creation_date": 1522851219, "post_id": 49653313, "comment_id": 86315081, "body": "and although I pointed out your mistake, i still dont know what you really want to do, please edit your question."}], "tags": [], "owner": {"reputation": 1285, "user_id": 9215365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SInc5.jpg?s=128&g=1", "display_name": "John Ding", "link": "https://stackoverflow.com/users/9215365/john-ding"}, "is_accepted": false, "score": 0, "last_activity_date": 1522851139, "creation_date": 1522851139, "answer_id": 49653313, "question_id": 49652762, "link": "https://stackoverflow.com/questions/49652762/query-with-stl-set-function/49653313#49653313", "title": "Query with STL set function", "body": "<p>Three mistakes.\n- when return expression is called, the function ends and <strong>won't</strong> execute the expressions following  <code>return</code>.</p>\n\n<ul>\n<li><p>Wrong parameter passing to erase</p></li>\n<li><p>Do the redundant work</p></li>\n</ul>\n\n<p>As for the third one, you can directly use the return value of <code>insert</code>, which is a <code>std::pair</code> and you can check the second menber to ensure whether insert is done or not.</p>\n\n<p>And I think that it's no need for you to check if insert has succeeded.</p>\n\n<p>What you want is all inside <a href=\"http://en.cppreference.com/w/cpp/container/set\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/container/set</a></p>\n"}], "owner": {"reputation": 179, "user_id": 6671115, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/afb31cad947f2eada3740c6a8c7c9b20?s=128&d=identicon&r=PG&f=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/6671115/abhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1522851359, "creation_date": 1522849765, "last_edit_date": 1522851359, "question_id": 49652762, "link": "https://stackoverflow.com/questions/49652762/query-with-stl-set-function", "title": "Query with STL set function", "body": "<p>I am new to C++ STL. In the below example</p>\n\n<pre><code>bool checkDuplicatesWithinK(int arr[], int n, int k)\n{  \n    set&lt;int&gt; myset;\n\n    for (int i = 0; i &lt; n; i++)\n    {\n        if (myset.find(arr[i]) != myset.end())\n            return true;\n\n        myset.insert(arr[i]);\n\n        if (i &gt;= k)\n            myset.erase(arr[i-k]);\n    }\n    return false;\n}\n</code></pre>\n\n<p>Here I am not able to understand below line</p>\n\n<pre><code>if (myset.find(arr[i]) != myset.end())\n    return true;\n</code></pre>\n\n<p><code>myset.find(arr[i])</code> is checking whether the element is present in the set. But why have they put the condition not equal to <code>myset.end()</code>?\nI read the description of <code>myset.end()</code> and this will return the iterator value of the element following last element.</p>\n"}, {"tags": ["c++", "pybind11"], "answers": [{"comments": [{"owner": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "edited": false, "score": 0, "creation_date": 1522850058, "post_id": 49652833, "comment_id": 86314163, "body": "Awesome, thanks! (I will accept when SO allows me in a few min)"}], "tags": [], "owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "is_accepted": true, "score": 3, "last_activity_date": 1522849946, "creation_date": 1522849946, "answer_id": 49652833, "question_id": 49652710, "link": "https://stackoverflow.com/questions/49652710/overload-class-member-function-marked-const/49652833#49652833", "title": "Overload class member function marked const", "body": "<p>There is a special tag for const overloaded methods.</p>\n\n<pre><code>namespace py = pybind11;\n\nPYBIND11_MODULE(example,m)\n{\n  py::class_&lt;Foo&gt;(m, \"Foo\")\n    .def(\"bar\", py::overload_cast&lt;const std::vector&lt;double&gt;&amp;&gt;(&amp;Foo::bar, py::const_));\n}\n</code></pre>\n"}], "owner": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 326, "favorite_count": 0, "accepted_answer_id": 49652833, "answer_count": 1, "score": 0, "last_activity_date": 1522849946, "creation_date": 1522849611, "question_id": 49652710, "link": "https://stackoverflow.com/questions/49652710/overload-class-member-function-marked-const", "title": "Overload class member function marked const", "body": "<p>I am having trouble overloading class member functions that are marked <code>const</code>, while there is no problem when the functions are not marked <code>const</code>. Also the overload itself works fine in pure C++.</p>\n\n<p>The following fails</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;pybind11/pybind11.h&gt;\n\n\nclass Foo\n{\npublic:\n  Foo(){};\n\n  std::vector&lt;double&gt; bar(const std::vector&lt;double&gt; &amp;a) const\n  {\n    return a;\n  }\n\n  std::vector&lt;int&gt; bar(const std::vector&lt;int&gt; &amp;a) const\n  {\n    return a;\n  }\n};\n\n\nnamespace py = pybind11;\n\nPYBIND11_MODULE(example,m)\n{\n  py::class_&lt;Foo&gt;(m, \"Foo\")\n    .def(\"bar\", py::overload_cast&lt;const std::vector&lt;double&gt;&amp;&gt;(&amp;Foo::bar));\n}\n</code></pre>\n\n<p>Compiled using:</p>\n\n<pre><code>clang++ -O3 -shared -std=c++14 `python3-config --cflags --ldflags --libs` example.cpp -o example.so -fPIC\n</code></pre>\n\n<p>Gives error:</p>\n\n<pre><code>...  \nno matching function for call to object of type 'const detail::overload_cast_impl&lt;const vector&lt;double, allocator&lt;double&gt; &gt; &amp;&gt;'\n    .def(\"bar\", py::overload_cast&lt;const std::vector&lt;double&gt;&amp;&gt;(&amp;Foo::bar));\n...\n</code></pre>\n\n<p>Whereas the code works when I remove the <code>const</code> mark of the functions. </p>\n\n<p>How should I perform this overload?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 83, "user_id": 7072435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342bf44a0d5bd0614144e49af399381b?s=128&d=identicon&r=PG&f=1", "display_name": "runesbane", "link": "https://stackoverflow.com/users/7072435/runesbane"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1522849931, "post_id": 49652582, "comment_id": 86314043, "body": "Yes. I&#39;ve tried the solution I just edited in above, string stream, and assign. Either a previously posted solution doesn&#39;t compile with my code, or it produces garbage random values as the result."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1522850223, "post_id": 49652582, "comment_id": 86314310, "body": "Does any of the functions you pass <code>result</code> to add the null-terminator at the end? Otherwise try <code>return std::string(result, result + len);</code>."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 3, "creation_date": 1522850260, "post_id": 49652582, "comment_id": 86314348, "body": "@runesbane sorry, I didn&#39;t notice <code>unsigned</code>, that was important. See this duplicate instead: <a href=\"https://stackoverflow.com/questions/17746688/convert-unsigned-char-to-string\" title=\"convert unsigned char to string\">stackoverflow.com/questions/17746688/&hellip;</a>"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1522850421, "post_id": 49652582, "comment_id": 86314464, "body": "aside: since len is a compile time constant; you may prefer to use an array; std::array; or std::vector to hold your characters.  so that you don&#39;t have the leak if you throw an exception before your free"}, {"owner": {"reputation": 83, "user_id": 7072435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342bf44a0d5bd0614144e49af399381b?s=128&d=identicon&r=PG&f=1", "display_name": "runesbane", "link": "https://stackoverflow.com/users/7072435/runesbane"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1522850591, "post_id": 49652582, "comment_id": 86314619, "body": "@user2079303 I tried that solution as well, It produces garbage results in signature:  HMAC digest: 20ef96358c199befc0a0e6de47170734532e48e7ddfbf4ea48ef20798934&zwnj;&#8203;2677 &lt;---- this is what result is    ?5???????G4S.H?????H? y?4&amp;w?\u0389f? &lt;---- this is what gets sent to signature"}, {"owner": {"reputation": 83, "user_id": 7072435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342bf44a0d5bd0614144e49af399381b?s=128&d=identicon&r=PG&f=1", "display_name": "runesbane", "link": "https://stackoverflow.com/users/7072435/runesbane"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1522850850, "post_id": 49652582, "comment_id": 86314805, "body": "@Bob__ while your suggestion does compile it also produces garbage values in signature string...I&#39;m really not sure what the issue is here but it&#39;s going right over my head whatever it is."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1522850884, "post_id": 49652582, "comment_id": 86314826, "body": "@runesbane Ah, so you don&#39;t want to convert the data to string <i>as is</i>, but rather a hexadecimal representation? You should elaborate on that in the question."}, {"owner": {"reputation": 83, "user_id": 7072435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342bf44a0d5bd0614144e49af399381b?s=128&d=identicon&r=PG&f=1", "display_name": "runesbane", "link": "https://stackoverflow.com/users/7072435/runesbane"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1522850940, "post_id": 49652582, "comment_id": 86314868, "body": "@user2079303 I guess so? I really wasn&#39;t aware that was what was needed to be done or I would&#39;ve mentioned it."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1522851393, "post_id": 49652582, "comment_id": 86315230, "body": "There&#39;s also no need to copy <code>APIkey</code> into a non standard VLA, just pass <code>APIkey.c_str()</code> to the init function."}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 0, "last_activity_date": 1522857295, "creation_date": 1522857295, "answer_id": 49655463, "question_id": 49652582, "link": "https://stackoverflow.com/questions/49652582/converting-hex-data-from-unsigned-char-to-string/49655463#49655463", "title": "Converting hex data from unsigned char* to string", "body": "<p>This code does too many unnecessary copies and calls.</p>\n\n<p>A simpler version:</p>\n\n<pre><code>inline char binary_to_hex_digit(unsigned a) {\n    return a + (a &lt; 10 ? '0' : 'a' - 10);\n}\n\nstd::string binary_to_hex(unsigned char const* binary, unsigned binary_len) {\n    std::string r(binary_len * 2, '\\0');\n    for(unsigned i = 0; i &lt; binary_len; ++i) {\n        r[i * 2] = binary_to_hex_digit(binary[i] &gt;&gt; 4);\n        r[i * 2 + 1] = binary_to_hex_digit(binary[i] &amp; 15);\n    }\n    return r;\n}\n\nstd::string HMACsha256(std::string const&amp; message, std::string const&amp; key) {\n    unsigned char result[EVP_MAX_MD_SIZE];\n    unsigned result_len = 0;\n    HMAC(EVP_sha256(), key.data(), key.size(), reinterpret_cast&lt;unsigned char const*&gt;(message.data()), message.size(), result, &amp;result_len);\n    return binary_to_hex(result, result_len);\n}\n\nint main() {\n    auto mac = HMACsha256(\"message\", \"password\");\n    std::cout &lt;&lt; mac &lt;&lt; '\\n';\n}\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 7072435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342bf44a0d5bd0614144e49af399381b?s=128&d=identicon&r=PG&f=1", "display_name": "runesbane", "link": "https://stackoverflow.com/users/7072435/runesbane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 49655463, "answer_count": 1, "score": -2, "last_activity_date": 1522857295, "creation_date": 1522849306, "last_edit_date": 1522851458, "question_id": 49652582, "link": "https://stackoverflow.com/questions/49652582/converting-hex-data-from-unsigned-char-to-string", "title": "Converting hex data from unsigned char* to string", "body": "<p>I have this code:</p>\n\n<pre><code>string HMACsha256(string message, string APIkey){\n\n    // The secret key for hashing\n    char key[APIkey.length() + 1];\n    strcpy(key, APIkey.c_str());\n\n    // The data that we're going to hash\n    char data[message.length() + 1];\n    strcpy(data, message.c_str());\n\n    unsigned char* result;\n    unsigned int len = 64;\n\n    result = (unsigned char*)malloc(sizeof(char) * len);\n\n    HMAC_CTX ctx;\n    HMAC_CTX_init(&amp;ctx);\n\n    HMAC_Init_ex(&amp;ctx, key, strlen(key), EVP_sha256(), NULL);\n    HMAC_Update(&amp;ctx, (unsigned char*)&amp;data, strlen(data));\n    HMAC_Final(&amp;ctx, result, &amp;len);\n    HMAC_CTX_cleanup(&amp;ctx);\n\n    printf(\"HMAC digest: \");\n\n    string signature; // &lt;-------- I want to store the values from the printf with result in the loop below in this\n\n    for (int i = 0; i != len; i++){\n        printf(\"%02x\", (unsigned int)result[i]); //&lt;--- I want this in signature string\n    }\n\n    cout &lt;&lt; endl&lt;&lt;  \"SIG: \" &lt;&lt; signature &lt;&lt; endl;\n\n    free(result);\n\n    return signature;\n}\n</code></pre>\n\n<p>Everything about it works fine, except I need to be able to return the result as a string. I've been unable to come up with a way to take the hex data from the unsigned char* result variable and store it into the signature string. Does anyone know how I can go about this?</p>\n\n<p>EDIT: This question was flagged as a duplicate of <a href=\"https://stackoverflow.com/questions/1195675/convert-a-char-to-stdstring\">convert a char* to std::string</a>\nHowever, I have already tried the excepted answer on that thread of doing</p>\n\n<pre><code>const char *s = \"Hello, World!\";\nstd::string str(s);\n</code></pre>\n\n<p>With my code it looks like:</p>\n\n<pre><code>string signature(result);\n</code></pre>\n\n<p>Running my code like that produces this error:</p>\n\n<pre><code>error: no matching constructor for initialization of 'string' (aka 'basic_string&lt;char, char_traits&lt;char&gt;, allocator&lt;char&gt; &gt;')\n    string signature(result);\n</code></pre>\n\n<p>With </p>\n\n<pre><code> string signature(reinterpret_cast&lt;char*&gt;(result));\n</code></pre>\n\n<p>The results are:</p>\n\n<pre><code> Result:\n 20ef96358c199befc0a0e6de47170734532e48e7ddfbf4ea48ef207989342677\n Signature:\n ?5???????G4S.H?????H? y?4&amp;w?\u0389f?\n</code></pre>\n\n<p>It's been brought to my attention that I \"don't want to convert the data to string as is, but rather a hexadecimal representation\" if that makes this question more clear for anyone.</p>\n"}, {"tags": ["c++", "string", "pointers", "inheritance"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1522849246, "post_id": 49652536, "comment_id": 86313467, "body": "Because a <code>std::string</code> contains the string, a <code>const char *</code> merely points at it."}], "answers": [{"tags": [], "owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "is_accepted": false, "score": 0, "last_activity_date": 1522850089, "creation_date": 1522850089, "answer_id": 49652902, "question_id": 49652536, "link": "https://stackoverflow.com/questions/49652536/c-using-stdstring-v-char-in-a-base-class-base-class-has-a-redudant-copy-of/49652902#49652902", "title": "c++ using std:string v char* in a base class - base class has a redudant copy of the string", "body": "<p>With the constructor:</p>\n\n<pre><code>Cat(std::string name) : Animal(name, \"Meow\")\n</code></pre>\n\n<p>\"Meow\" is a constant and will have an address in memory. The compiler will use this same constant for every <code>Cat</code>. All <code>Cat</code> objects' <code>m_speak</code> variables will point to that one location.</p>\n\n<p>If you make <code>m_speak</code> a <code>std::string</code>, the variable <code>m_speak</code> will copy \"Meow\" into its internal buffer. This will happen everytime you create a cat, so there will be many copies.</p>\n\n<p>The same thing applies to <code>Dog</code> and \"Woof\".</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 0, "last_activity_date": 1522850097, "creation_date": 1522850097, "answer_id": 49652905, "question_id": 49652536, "link": "https://stackoverflow.com/questions/49652536/c-using-stdstring-v-char-in-a-base-class-base-class-has-a-redudant-copy-of/49652905#49652905", "title": "c++ using std:string v char* in a base class - base class has a redudant copy of the string", "body": "<p><code>const char*</code> is a pointer. A pointer stores the memory address of an object (the first character of the string in this case). In this case, the member of each instance points to the same string, so there are no duplicates of the content of the string.</p>\n\n<p><code>std::string</code> is not a pointer. Each <code>std::string</code> object has their own buffer where the contents are stored, so each instance has the contents of the string stored by the member.</p>\n"}], "owner": {"reputation": 1011, "user_id": 9583271, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "arcoxia tom", "link": "https://stackoverflow.com/users/9583271/arcoxia-tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1522850097, "creation_date": 1522849164, "question_id": 49652536, "link": "https://stackoverflow.com/questions/49652536/c-using-stdstring-v-char-in-a-base-class-base-class-has-a-redudant-copy-of", "title": "c++ using std:string v char* in a base class - base class has a redudant copy of the string", "body": "<p>In the class below from this <a href=\"http://www.learncpp.com/cpp-tutorial/121-pointers-and-references-to-the-base-class-of-derived-objects/\" rel=\"nofollow noreferrer\">tutorial</a> it says that </p>\n\n<blockquote>\n  <p>you can also make m_speak a std::string, but the downside of doing so\n  is that each Animal will contain a redundant copy of the \u201cspeak\u201d</p>\n</blockquote>\n\n<p>I'm trying to understand this, how would using <code>string</code> instead of <code>char*</code> only create a redundant copy of <code>string</code> and not a <code>char*</code>.  </p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nclass Animal\n{\nprotected:\n    std::string m_name;\n    const char* m_speak;\n\n    // We're making this constructor protected because\n    // we don't want people creating Animal objects directly,\n    // but we still want derived classes to be able to use it.\n    Animal(std::string name, const char* speak)\n        : m_name(name), m_speak(speak)\n    {\n    }\n\npublic:\n    std::string getName() { return m_name; }\n    const char* speak() { return m_speak; }\n};\n\nclass Cat: public Animal\n{\npublic:\n    Cat(std::string name)\n        : Animal(name, \"Meow\")\n    {\n    }\n};\n\nclass Dog: public Animal\n{\npublic:\n    Dog(std::string name)\n        : Animal(name, \"Woof\")\n    {\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "types"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1522849280, "post_id": 49652513, "comment_id": 86313507, "body": "What do you mean by <i>configurable datatype</i>?"}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1522849393, "post_id": 49652513, "comment_id": 86313606, "body": "You can use the <code>auto</code> specifier and see what the compiler makes of it. In your case chances are it will be <code>unsigned long</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1522849536, "post_id": 49652513, "comment_id": 86313711, "body": "@Ron No chances about it.  <code>unsigned long</code> has a higher rank than <code>int</code> so it will always be a <code>unsigned long</code>."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1522849649, "post_id": 49652513, "comment_id": 86313799, "body": "@NathanOliver Indeed."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1522849748, "post_id": 49652513, "comment_id": 86313878, "body": "Cannot reproduce on <a href=\"https://wandbox.org/permlink/arDLtyx8cXu7g5Kl\" rel=\"nofollow noreferrer\">wandbox.org/permlink/arDLtyx8cXu7g5Kl</a>. What is your architecture? What is your <code>sizeof(unsigned long)</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "is_accepted": false, "score": 2, "last_activity_date": 1522849342, "creation_date": 1522849342, "answer_id": 49652594, "question_id": 49652513, "link": "https://stackoverflow.com/questions/49652513/what-is-the-best-data-type-to-store-the-result-intlong-in-c/49652594#49652594", "title": "What is the best data type to store the result int*long in c++", "body": "<p>Int64 is fine. You're getting 0 because your code first calculates the 32 bit product (which is 0) then stores it in int64 variable. Try this way:</p>\n\n<pre><code>int64_t result3 = (int64_t)(RValue2)*RValue1;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1522849883, "creation_date": 1522849883, "answer_id": 49652808, "question_id": 49652513, "link": "https://stackoverflow.com/questions/49652513/what-is-the-best-data-type-to-store-the-result-intlong-in-c/49652808#49652808", "title": "What is the best data type to store the result int*long in c++", "body": "<pre><code>int RValue1 = 4096;                 // 0x1000 \nunsigned long RValue2 = 1048576;    // 0x10`0000\nlong long result1 = RValue2*RValue1;// 0x1`0000`0000\n</code></pre>\n\n<p>With the above the multiplication is being done using <code>unsigned long</code> math, even though the result is stored in a <code>long long</code>.  The result overflowed <code>unsigned long</code> 32-bit math so it \"wrapped around\" to 0.  Had <code>unsigned long</code> been 64-bit, no problem would have been noted.</p>\n\n<p>With mixed integer types, I recommend instead of casting, as it can sometimes narrow the type used in the computation, multiply by 1 of the target type to insure the calculation is done with <em>at least</em> as wide as the target's type.</p>\n\n<pre><code>long long result1 = 1LL*RValue2*RValue1;\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 9001283, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MyH6tMA6zKo/AAAAAAAAAAI/AAAAAAAAAvM/c1XHO14_2u8/photo.jpg?sz=128", "display_name": "vagdevi pedalenka", "link": "https://stackoverflow.com/users/9001283/vagdevi-pedalenka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1522849883, "creation_date": 1522849089, "question_id": 49652513, "link": "https://stackoverflow.com/questions/49652513/what-is-the-best-data-type-to-store-the-result-intlong-in-c", "title": "What is the best data type to store the result int*long in c++", "body": "<p>What is the best configurable datatype to assign the result of int* unsigned long</p>\n\n<p>For example:</p>\n\n<pre><code>int RValue1 = 4096;\nunsigned long RValue2 = 1048576;\n</code></pre>\n\n<p>I want to store result of RValue2*RValue1 in a variabl.</p>\n\n<p>I tried the following:</p>\n\n<pre><code>int RValue1 = 4096;\nunsigned long RValue2 = 1048576;\nlong long result1 = RValue2*RValue1; //resulted 0\nint64_t result2 = RValue2*RValue1;// resulted 0\n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c++", "set"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 6, "creation_date": 1522848334, "post_id": 49652220, "comment_id": 86312751, "body": "Sure.  Use an iterator and <i>advance</i> it the appropriate amount.  Give it a try"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1522848384, "post_id": 49652220, "comment_id": 86312796, "body": "<a href=\"http://en.cppreference.com/w/cpp/container/set\" rel=\"nofollow noreferrer\"><code>std::set</code></a> (like any other <a href=\"http://en.cppreference.com/w/cpp/container\" rel=\"nofollow noreferrer\">standard container</a>) can be iterated over."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1522848638, "post_id": 49652220, "comment_id": 86312984, "body": "bear in mind; std::set isn&#39;t as good as a std::vector for random access"}], "answers": [{"comments": [{"owner": {"reputation": 1285, "user_id": 9215365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SInc5.jpg?s=128&g=1", "display_name": "John Ding", "link": "https://stackoverflow.com/users/9215365/john-ding"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1522849180, "post_id": 49652383, "comment_id": 86313422, "body": "@user463035818 Yes, of course, I just want to explain.why set elements are sorted. In fact, this is the basic requirement. And I haven&#39;t seen a complier implements set by another approach."}, {"owner": {"reputation": 1285, "user_id": 9215365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SInc5.jpg?s=128&g=1", "display_name": "John Ding", "link": "https://stackoverflow.com/users/9215365/john-ding"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1522849322, "post_id": 49652383, "comment_id": 86313540, "body": "Maybe I have trouble express by using English... I mean that the elements are sorted is the basic requirement."}, {"owner": {"reputation": 1285, "user_id": 9215365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SInc5.jpg?s=128&g=1", "display_name": "John Ding", "link": "https://stackoverflow.com/users/9215365/john-ding"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1522850028, "post_id": 49652383, "comment_id": 86314135, "body": "@user463035818 Thanks, it feels much better."}], "tags": [], "owner": {"reputation": 1285, "user_id": 9215365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SInc5.jpg?s=128&g=1", "display_name": "John Ding", "link": "https://stackoverflow.com/users/9215365/john-ding"}, "is_accepted": false, "score": 0, "last_activity_date": 1522849424, "last_edit_date": 1522849424, "creation_date": 1522848748, "answer_id": 49652383, "question_id": 49652220, "link": "https://stackoverflow.com/questions/49652220/how-to-display-a-certain-item-from-the-set-c/49652383#49652383", "title": "How to display a certain item from the set C++", "body": "<p>The elements in a <code>std::set</code> are always <strong>in order</strong> (sets are typically implemented as <code>red-black tree</code>).That interesting property, of course, can be used.</p>\n\n<p>By using <code>range-based for</code> (since Cpp11) or search the section between <code>set::begin()</code> and <code>set::end()</code>, you can insure the elements inside.</p>\n\n<p>Here is the reference <a href=\"http://en.cppreference.com/w/cpp/container/set\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/container/set</a></p>\n"}, {"tags": [], "owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "is_accepted": false, "score": 0, "last_activity_date": 1522849469, "creation_date": 1522849469, "answer_id": 49652646, "question_id": 49652220, "link": "https://stackoverflow.com/questions/49652220/how-to-display-a-certain-item-from-the-set-c/49652646#49652646", "title": "How to display a certain item from the set C++", "body": "<p>A description of std::set can be found <a href=\"http://en.cppreference.com/w/cpp/container/set\" rel=\"nofollow noreferrer\">here</a>. The key points are that</p>\n\n<ol>\n<li>Elements are sorted</li>\n<li>Elements are unique</li>\n<li>Lookup time is O(lg2(n)) </li>\n<li>Insertion time is also O(lg2(n))</li>\n<li>Element access bidirectional. You can iterate forwards and backward, but you can't select a random element as with <code>tmpSet[8]</code>. This means O(n) access time for random elements.</li>\n</ol>\n\n<p>If you do want to have random access, you could use a <a href=\"https://www.boost.org/doc/libs/1_56_0/doc/html/boost/container/flat_set.html\" rel=\"nofollow noreferrer\">boost::flat_set</a>. This has the same properties as above except</p>\n\n<ol>\n<li>Insertion time is O(n)</li>\n<li>Element access is random, so you can write <code>tmpSet[8]</code> which whill have O(1) complexity.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 1, "last_activity_date": 1522849825, "last_edit_date": 1522849825, "creation_date": 1522849514, "answer_id": 49652672, "question_id": 49652220, "link": "https://stackoverflow.com/questions/49652220/how-to-display-a-certain-item-from-the-set-c/49652672#49652672", "title": "How to display a certain item from the set C++", "body": "<p>Yes.</p>\n\n<pre><code>std::set&lt;std::string&gt; tmpSet = ...; // Create your set somehow.\n// Get an iterator to the first (smallest) item in the set.\nstd::set&lt;std::string&gt;::iterator setStartIt = tmpSet.begin();\n// Dereference the iterator to obtain a reference to the first element.\nstd::string&amp; firstItem = *setStart;\n// Get an iterator for the third element (this is two after the first!).\nauto thirdItemIt = std::next(setStartIt, 2);\nstd::string&amp; thirdItem = *thirdItemIt;\n// Get the tenth item.\nstd::string&amp; tenthItem = *std::next(setStartIt, 9);\n</code></pre>\n\n<p>Note that you can also use <code>std::advance()</code> (which modifies the iterator you pass instead of returning a new one.\nAlso keep in mind that this is not efficient: Since the <code>std::set</code> iterator is not a <code>RandomAccessIterator</code>, the complexity of <code>std::next</code> and <code>std::advance</code> are linear (so it will take 10 operations to get the 10th item).</p>\n\n<p>If you want to look at all elements, looping over them would of course be the proper way:</p>\n\n<pre><code>for (auto it = tmpSet.begin(); it != tempSet.end(); ++it) {\n    std::string currentElement = *it;\n    ...\n}\n</code></pre>\n\n<p>Or, using a range-based for loop:</p>\n\n<pre><code>for (auto&amp; currentElement : tmpSet)\n    ...\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 9345327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2069ec3e416709ea266268b1d18e664c?s=128&d=identicon&r=PG&f=1", "display_name": "AWRDev.", "link": "https://stackoverflow.com/users/9345327/awrdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 49652672, "answer_count": 3, "score": 1, "last_activity_date": 1522849825, "creation_date": 1522848273, "question_id": 49652220, "link": "https://stackoverflow.com/questions/49652220/how-to-display-a-certain-item-from-the-set-c", "title": "How to display a certain item from the set C++", "body": "<p>I have a set, let's say <code>set&lt;string&gt;tmpSet</code>. I have some elements in it,for example <code>10</code>, but I don't know what they are, because I've got this set by <code>set_intersection</code> of two another sets. Can I display for example just <code>first, third and eighth</code> element from the set? </p>\n"}, {"tags": ["c++", ".net", "winapi", "mfc"], "comments": [{"owner": {"reputation": 1705, "user_id": 9103250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3c613d7186c7314ee818673ea4c79fd?s=128&d=identicon&r=PG&f=1", "display_name": "CharonX", "link": "https://stackoverflow.com/users/9103250/charonx"}, "edited": false, "score": 1, "creation_date": 1522848531, "post_id": 49652210, "comment_id": 86312912, "body": "My initial thought would be to run a periodic timer in your process to verify that the new process is still running, and if not to terminate your own proccess..."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 3, "creation_date": 1522849439, "post_id": 49652210, "comment_id": 86313635, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms685061(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 1705, "user_id": 9103250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3c613d7186c7314ee818673ea4c79fd?s=128&d=identicon&r=PG&f=1", "display_name": "CharonX", "link": "https://stackoverflow.com/users/9103250/charonx"}, "edited": false, "score": 1, "creation_date": 1522872277, "post_id": 49652210, "comment_id": 86328494, "body": "@CharonX: Polling should be your last resort. It&#39;s the last thing you consider, when there aren&#39;t any other solutions. There are better solutions."}, {"owner": {"reputation": 42375, "user_id": 21567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23a053b78fc2567576235b77fa2e4c16?s=128&d=identicon&r=PG", "display_name": "Christian.K", "link": "https://stackoverflow.com/users/21567/christian-k"}, "edited": false, "score": 0, "creation_date": 1523116461, "post_id": 49652210, "comment_id": 86431765, "body": "Use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms684161(v=vs.85).aspx\" rel=\"nofollow noreferrer\">win32 job objects</a>."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1522915773, "post_id": 49652550, "comment_id": 86344332, "body": "Worth noting, <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb762154.aspx\" rel=\"nofollow noreferrer\">ShellExecuteEx</a> <i>can</i> return a process handle."}, {"owner": {"reputation": 91, "user_id": 7036037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95f44609453ccbec0edc3a4c61e1a899?s=128&d=identicon&r=PG&f=1", "display_name": "Dogus Sunna", "link": "https://stackoverflow.com/users/7036037/dogus-sunna"}, "edited": false, "score": 0, "creation_date": 1522919544, "post_id": 49652550, "comment_id": 86346832, "body": "What do you mean?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 3, "creation_date": 1522920518, "post_id": 49652550, "comment_id": 86347520, "body": "@VictorGubin: The <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb759784.aspx\" rel=\"nofollow noreferrer\">SHELLEXECUTEINFO</a> structure contains an <i>hProcess</i> field, storing the process handle - if requested and available - on return."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1522958345, "post_id": 49652550, "comment_id": 86372864, "body": "Besides, the <code>CreateProcess</code> call is wrong. Passing both <i>lpApplicationName</i> and <i>lpCommandLine</i> is reserved for the specific case, where an application doesn&#39;t follow the convention to pass the application name as the first command line argument. This call will not do what you hope it would."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1522959268, "post_id": 49652550, "comment_id": 86373373, "body": "@IInspectable Why don&#39;t you post your own answer? I heard this is a free to use system. BTW. &quot;suggest edit&quot;option exist for members who have such privileges"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1522959984, "post_id": 49652550, "comment_id": 86373697, "body": "I don&#39;t post an answer, because the combination of tags on this question attracts users with poor voting habits. 4 upvotes on an answer, that doesn&#39;t work, nor does it even compile in a project with default settings speaks for itself. You are free to take the input to improve your answer."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1523015682, "post_id": 49652550, "comment_id": 86396351, "body": "If you post someone else&#39;s code, you need to properly attribute it to that author. You even copied the section of the license you are violating. That&#39;s not entirely prudent. And the code is really way more convoluted than it need be. Plus, using the ANSI API <i>will</i> fail on some systems, and you have no control over that. Unicode has been around for decades. Time to adopt it already."}], "tags": [], "owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "is_accepted": false, "score": 3, "last_activity_date": 1523049814, "last_edit_date": 1523049814, "creation_date": 1522849207, "answer_id": 49652550, "question_id": 49652210, "link": "https://stackoverflow.com/questions/49652210/kill-my-process-if-the-other-process-is-killed/49652550#49652550", "title": "Kill my process if the other process is killed", "body": "<p>What you can do - is make parent process wait until child process exit, and then shut down the parent. </p>\n\n<p>Win API legacy functions, like <code>ShellExecute</code> do not return process identifier, which can be used by parent process to wait a child process to exit. So you would have to use core <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>CreateProcess</code></a> system call directly. Then you can make parent process to await a child process to exit/terminate. You can use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms687032(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>WaitForSingleObject</code></a> Win API synchronization function for this.  </p>\n\n<p>Following example demonstrate the described technique:</p>\n\n<pre><code>/*\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.\n*/\n#include &lt;cstdlib&gt;\n#include &lt;cstdio&gt;\n#include &lt;cstring&gt;\n\n#ifdef _WIN32\n#   define HAS_BSOD\n#   include &lt;windows.h&gt;\n#endif // _WIN32\n\n#if defined(unix) \\\n      || defined(__unix) \\\n      || defined(_XOPEN_SOURCE) \\\n      || defined(_POSIX_SOURCE) \n\n#   include &lt;sys/types.h&gt;\n#   include &lt;sys/wait.h&gt;\n\n#endif // defined\n\n#if defined(__GNUC__) &amp;&amp; !defined(_alloca)\n#   define _alloca(__s) __builtin_alloca( (__s) )\n#endif // __GNUC__\n\n\n/// execute an external command and suspend current thread until this command exit\nint execute_and_wait(const char* command, const char *args);\n\n#ifdef HAS_BSOD\nint execute_and_wait(const char* command, const char *args)\n{\n    ::STARTUPINFOW cif;\n    std::memset(&amp;cif, 0, sizeof(cif));\n    cif.cb = sizeof(cif);\n    ::PROCESS_INFORMATION pi;\n    std::memset( &amp;pi, 0, sizeof(pi) );\n\n    // MS API expecting single line path and program arguments\n    const std::size_t len = std::strlen(command) + std::strlen(args) + 2;\n    char* cmdline = static_cast&lt;char*&gt;( _alloca( len ) );\n    std::memset(cmdline, 0, len);\n    std::strcat(cmdline, command);\n    std::strcat(cmdline, \" \");\n    std::strcat(cmdline, args);\n\n    // We need to convert our command line into UTF-16LE, since MS API like\n    // this UNICODE representation, and don't like UTF-8\n   // furthermore may crash a whole application  or even show blue screen of doom when UTF-8, depending on something we don't know\n    ::UINT acp = ::GetACP(); // obtain current ISO like code-page i.e. CP1252\n    const std::size_t wlen = ::MultiByteToWideChar(acp, 0, cmdline, len, nullptr, 0) + 1;\n    wchar_t* wcmdline = static_cast&lt;wchar_t*&gt;( _alloca(wlen) );\n    std::memset(wcmdline, 0, wlen );\n    ::MultiByteToWideChar(acp, 0, cmdline, len, wcmdline , wlen );\n\n    if ( ::CreateProcessW(\n                      NULL, /* Say hello to MS DOS and OS/2 and left NULL */\n                      wcmdline, /* command and arguments  */\n                      NULL, /* Some security structure, with void* pointer on another security structure, needs to be NULL to be inherited from parent  */\n                      NULL, /*  Some security structure, with void* pointer on another security structure, needs to be NULL to be inherited from parent */\n                      FALSE, /*\n                                copy all opened files and sockets if TRUE,\n                                almost fork if\n                                typedef int BOOL;\n                                #define TRUE 1\n                                #define FALSE 0\n                                 */\n                      NORMAL_PRIORITY_CLASS, /* 20 possible flags */\n                      NULL, /* add ability to add a few additional environment variables, or change existing like PATH (actually nice feature)  */\n                      NULL, /* execution directory, nice feature but needs to be NULL to be inherited from parent */\n                      &amp;cif,\n                      &amp;pi)\n        )\n    {\n        ::WaitForSingleObject( pi.hProcess, INFINITE );\n        int ret = EXIT_FAILURE;\n        ::GetExitCodeProcess(pi.hProcess,LPDWORD(&amp;ret));\n        // Close process and thread handles.\n        ::CloseHandle( pi.hProcess );\n        ::CloseHandle( pi.hThread );\n        return ret;\n    }\n    return EXIT_FAILURE;\n}\n\n#else // no Blue Screen of Doom (Some UNIX variant like Linux/Mac/FreeBSD etc)\n\nint execute_and_wait(const char* command, const char *args)\n{\n    ::pid_t child_pid = ::fork();\n    if(child_pid &lt; 0)\n        return EXIT_FAILURE;\n    if(0 == child_pid) {\n        // UTF-8 in most cases, if it's not - we don't expect a crash or kernel panic\n        ::execl(command, args);\n        // if we here something went wrong\n        ::exit(EXIT_FAILURE);\n    }\n    int ret;\n    ::waitpid(child_pid, &amp;ret, 0);\n    return ret;\n}\n\n#endif // HAS_BSOD\n\n#ifdef HAS_BSOD\nstatic const char *SYS_EDITOR = \"notepad.exe\";\n#else\nstatic const char *SYS_EDITOR = \"less\";\n#endif // HAS_BSOD\n\nint main(int argc, const char** argv)\n{\n    std::printf(\"About to fork with: %s \\n\", __FILE__ );\n    int exit_code = execute_and_wait(SYS_EDITOR, __FILE__);\n    std::printf(\"This is it, exit code :%d \\n\", exit_code);\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/nKnNP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nKnNP.png\" alt=\"fork result\"></a>\n<a href=\"https://i.stack.imgur.com/yrfje.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yrfje.png\" alt=\"waitpid result\"></a></p>\n\n<p>Also if you are able to use <a href=\"https://www.boost.org/doc/libs/1_66_0/doc/html/process.html\" rel=\"nofollow noreferrer\">boost process</a>, code will looks like following:</p>\n\n<pre><code>// This example code is under public domain\n#include &lt;iostream&gt;\n#include &lt;boost/process.hpp&gt;\n\n#ifdef _WIN32\nstatic const char *SYS_EDITOR = \"notepad.exe \";\n#else\nstatic const char *SYS_EDITOR = \"vi \";\n#endif\n\nint main()\n{\n    std::string path(SYS_EDITOR);\n    path.append( __FILE__ );\n    std::cout &lt;&lt; \"About to fork with command : \" &lt;&lt; path &lt;&lt; std::endl;\n    std::error_code ec;\n    boost::process::child c(path);\n    c.wait(ec);\n    return c.exit_code();\n}\n</code></pre>\n\n<p>My advice you'd better don't read this <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682512(v=vs.85).aspx\" rel=\"nofollow noreferrer\">MSDN</a> page</p>\n"}, {"comments": [{"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1523024779, "post_id": 49671515, "comment_id": 86402614, "body": "Although this code might (or might not) solve the problem, a good answer always requires an explanation on how the problem is solved."}], "tags": [], "owner": {"reputation": 91, "user_id": 7036037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95f44609453ccbec0edc3a4c61e1a899?s=128&d=identicon&r=PG&f=1", "display_name": "Dogus Sunna", "link": "https://stackoverflow.com/users/7036037/dogus-sunna"}, "is_accepted": true, "score": 1, "last_activity_date": 1522928571, "creation_date": 1522928571, "answer_id": 49671515, "question_id": 49652210, "link": "https://stackoverflow.com/questions/49652210/kill-my-process-if-the-other-process-is-killed/49671515#49671515", "title": "Kill my process if the other process is killed", "body": "<pre><code>    SHELLEXECUTEINFO ShExecInfo = { 0 };\n    ShExecInfo.cbSize = sizeof(SHELLEXECUTEINFO);\n    ShExecInfo.fMask = SEE_MASK_NOCLOSEPROCESS;\n    ShExecInfo.hwnd = NULL;\n    ShExecInfo.lpVerb = NULL;\n    ShExecInfo.lpFile = exeFile.c_str();\n    ShExecInfo.lpParameters = \"\";\n    ShExecInfo.lpDirectory = NULL;\n    ShExecInfo.nShow = SW_SHOW;\n    ShExecInfo.hInstApp = NULL;\n    ShellExecuteEx(&amp;ShExecInfo);\n    ShowWindow(SW_HIDE);\n    WaitForSingleObject(ShExecInfo.hProcess, INFINITE);\n    EndDialog(0);\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 7036037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95f44609453ccbec0edc3a4c61e1a899?s=128&d=identicon&r=PG&f=1", "display_name": "Dogus Sunna", "link": "https://stackoverflow.com/users/7036037/dogus-sunna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 339, "favorite_count": 0, "accepted_answer_id": 49671515, "answer_count": 2, "score": 3, "last_activity_date": 1523049814, "creation_date": 1522848239, "last_edit_date": 1522944265, "question_id": 49652210, "link": "https://stackoverflow.com/questions/49652210/kill-my-process-if-the-other-process-is-killed", "title": "Kill my process if the other process is killed", "body": "<p>I want to write a code that starts a process and kills mine when the other process is killed.</p>\n\n<p>Do you know good solutions?</p>\n\n<p>My current code:</p>\n\n<pre><code>std::string exeFile{ ExePath() + \"\\\\DTMlibrary.exe\" };\n\nif (is_file_exist(exeFile.c_str()))\n{\n    ShellExecute(NULL, \"open\", exeFile.c_str(), NULL, NULL, SW_SHOWDEFAULT);\n    EndDialog(0);\n}\nelse\n{\n    MessageBox(\"Setup DTMlibrary.exe not found \", \"System Information\", MB_ICONINFORMATION);\n    EndDialog(0);\n}\n</code></pre>\n"}, {"tags": ["c++", "performance", "static-analysis"], "comments": [{"owner": {"reputation": 1464, "user_id": 936269, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1fac3223b59eb3774aef86f7684f7f5f?s=128&d=identicon&r=PG", "display_name": "Lars Nielsen", "link": "https://stackoverflow.com/users/936269/lars-nielsen"}, "edited": false, "score": 0, "creation_date": 1522848220, "post_id": 49652173, "comment_id": 86312649, "body": "you can write a &quot;parser&quot; which counts it for you"}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 13, "creation_date": 1522848226, "post_id": 49652173, "comment_id": 86312654, "body": "The thing is, there&#39;s really no such thing as a C++ instruction..."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1522848228, "post_id": 49652173, "comment_id": 86312655, "body": "compile to assembly and then count yourself or write a program to count the lines for you?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1522848231, "post_id": 49652173, "comment_id": 86312658, "body": "What do you mean by &quot;instruction&quot;? A <i>statement</i>? An <i>expression</i>?"}, {"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 2, "creation_date": 1522848528, "post_id": 49652173, "comment_id": 86312907, "body": "What is the sense behind that activity? If you want to see how many resources your program requires ( cpu power, ram, cache  ... ) measure with known tools. Execution speed is not counting instructions. It has to do with cache locality, cache miss, optimizing ( compile time constants, loop unrolling, .... ). So all you get by counting your assembly instructions has nearly nothing to do with execution speed."}, {"owner": {"reputation": 251717, "user_id": 895245, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/jhDFt.png?s=128&g=1", "display_name": "Ciro Santilli\u65b0\u7586\u68c9\u82b1TRUMP BAN BAD", "link": "https://stackoverflow.com/users/895245/ciro-santilli%e6%96%b0%e7%96%86%e6%a3%89%e8%8a%b1trump-ban-bad"}, "edited": false, "score": 0, "creation_date": 1605556036, "post_id": 49652173, "comment_id": 114681029, "body": "Related: <a href=\"https://stackoverflow.com/questions/13313510/quick-way-to-count-number-of-instructions-executed-in-a-c-program\" title=\"quick way to count number of instructions executed in a c program\">stackoverflow.com/questions/13313510/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1522849765, "post_id": 49652299, "comment_id": 86313890, "body": "<code>sloccount</code> &amp; <code>cloc</code> measure the source code, which is not what the OP is asking."}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 1, "creation_date": 1522850309, "post_id": 49652299, "comment_id": 86314382, "body": "What the OP is asking doesn&#39;t make any sense in the first place."}, {"owner": {"reputation": 619, "user_id": 457228, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/UlVpC.jpg?s=128&g=1", "display_name": "Sach", "link": "https://stackoverflow.com/users/457228/sach"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1522851453, "post_id": 49652299, "comment_id": 86315287, "body": "@BasileStarynkevitch read the question again.... for the example. OP is expecting 4 as a result (6 as a result). So, accordingly, he is expecting a number of statement or lines of code."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1522851496, "post_id": 49652299, "comment_id": 86315326, "body": "But OP expects something related to some <i>execution</i> of his program. Indeed what he is asking for does not make any sense. Your answers deal only with the source code (and is unrelated to execution). In particular, <code>sloccount</code> &amp; <code>cloc</code> both (rightly) measure <a href=\"https://en.wikipedia.org/wiki/Dead_code\" rel=\"nofollow noreferrer\">dead code</a>"}, {"owner": {"reputation": 619, "user_id": 457228, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/UlVpC.jpg?s=128&g=1", "display_name": "Sach", "link": "https://stackoverflow.com/users/457228/sach"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1522851647, "post_id": 49652299, "comment_id": 86315452, "body": "@BasileStarynkevitch so for that, I had suggested profiling tool ( similar to your answer) as well. but profiling will provide the different result for different input data (in general scenario)."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1522851680, "post_id": 49652299, "comment_id": 86315476, "body": "Yes. But I guess OP wants profiling. Of course, his question is really confusing (and most of us agree that it does not make any sense)"}, {"owner": {"reputation": 619, "user_id": 457228, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/UlVpC.jpg?s=128&g=1", "display_name": "Sach", "link": "https://stackoverflow.com/users/457228/sach"}, "edited": false, "score": 0, "creation_date": 1522851842, "post_id": 49652299, "comment_id": 86315624, "body": "so I had provided both solutions. one is loc and another is profiling."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1522853585, "post_id": 49652299, "comment_id": 86317066, "body": "But still no explanation and no hints on why the OP&#39;s question makes no sense."}], "tags": [], "owner": {"reputation": 619, "user_id": 457228, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/UlVpC.jpg?s=128&g=1", "display_name": "Sach", "link": "https://stackoverflow.com/users/457228/sach"}, "is_accepted": false, "score": -1, "last_activity_date": 1522848505, "creation_date": 1522848505, "answer_id": 49652299, "question_id": 49652173, "link": "https://stackoverflow.com/questions/49652173/count-c-instructions-executed/49652299#49652299", "title": "Count c++ instructions executed", "body": "<p>check sloccount for linux.</p>\n\n<p>Also, You can use cloc utility to count lines of code.</p>\n\n<p><a href=\"http://cloc.sourceforge.net/\" rel=\"nofollow noreferrer\">http://cloc.sourceforge.net/</a></p>\n\n<p>Runtime number of lines execution may vary according to input data. You can use the profiling tools to understand coverage or which lines are executed more.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 9361615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89ff38ac8ed46d08e855f5767af3bad6?s=128&d=identicon&r=PG&f=1", "display_name": "Will B.", "link": "https://stackoverflow.com/users/9361615/will-b"}, "edited": false, "score": 0, "creation_date": 1522849128, "post_id": 49652442, "comment_id": 86313371, "body": "It should show 4 (or 6) too, considering that optimization. So yes, I want statement count. This is because I have calculated the O, and I want to see where the graphic (tests in practice, with different sizes of problem, n) goes, comparing it with the O function."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 23, "user_id": 9361615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89ff38ac8ed46d08e855f5767af3bad6?s=128&d=identicon&r=PG&f=1", "display_name": "Will B.", "link": "https://stackoverflow.com/users/9361615/will-b"}, "edited": false, "score": 1, "creation_date": 1522849825, "post_id": 49652442, "comment_id": 86313942, "body": "What only makes sense is profiling and benchmarking. What you want does not make any sense in practice, and has no actual interest."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1522850004, "post_id": 49652442, "comment_id": 86314111, "body": "Remember that <code>c++</code> statements don&#39;t take the same execution time. I mean 1 statement could translate to a single ASM instruction or hundreds. So even if you could count them is the count even meaningful?"}, {"owner": {"reputation": 619, "user_id": 457228, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/UlVpC.jpg?s=128&g=1", "display_name": "Sach", "link": "https://stackoverflow.com/users/457228/sach"}, "edited": false, "score": 0, "creation_date": 1522852139, "post_id": 49652442, "comment_id": 86315860, "body": "@BasileStarynkevitch look like I understand the question better than you.. OP is saying that he needs the number of statements. hope you change your vote."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1522852510, "post_id": 49652442, "comment_id": 86316190, "body": "I&#39;m trying to explain that OP&#39;s question makes no sense. You agree on that nonsense, but did not even try to explain why."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 3, "last_activity_date": 1522854912, "last_edit_date": 1522854912, "creation_date": 1522848896, "answer_id": 49652442, "question_id": 49652173, "link": "https://stackoverflow.com/questions/49652173/count-c-instructions-executed/49652442#49652442", "title": "Count c++ instructions executed", "body": "<p>C++ don't have \"instructions\" but statements (and it is unclear why <code>i++, j++;</code> -which is a single statement with a <a href=\"https://en.wikipedia.org/wiki/Comma_operator\" rel=\"nofollow noreferrer\">comma operator</a>-  should be counted differently than  <code>i++; j++;</code> and both could have the <em>same</em> <a href=\"https://en.wikipedia.org/wiki/Semantics_(computer_science)\" rel=\"nofollow noreferrer\">semantics</a> and are likely to generate the <em>same</em> code in most compilers....)</p>\n\n<p><sup>(so your question is unclear, and probably makes no sense)</sup></p>\n\n<p>And a C++ compiler could <a href=\"https://en.wikipedia.org/wiki/Optimizing_compiler\" rel=\"nofollow noreferrer\">optimize</a> your code (using the <a href=\"https://en.wikipedia.org/wiki/As-if_rule\" rel=\"nofollow noreferrer\">as-if rule</a>) into the equivalent of</p>\n\n<pre><code>c += 2;\nd += 2;\n</code></pre>\n\n<p>which has the same <em>observable</em> behavior as your code chunk. Then what \"statement count\" do you want to measure? <a href=\"https://en.wikipedia.org/wiki/Loop_unrolling\" rel=\"nofollow noreferrer\">Loop unrolling</a> is a very common optimization (that most compilers would do).</p>\n\n<p>At last, on modern CPUs (like those in your laptop), the execution time is not much related to the number of C++ statements (or even of <a href=\"https://en.wikipedia.org/wiki/Machine_code\" rel=\"nofollow noreferrer\">machine code</a> instructions) executed, because of <a href=\"https://en.wikipedia.org/wiki/CPU_cache\" rel=\"nofollow noreferrer\">cache</a> issues, <a href=\"https://en.wikipedia.org/wiki/Branch_predictor\" rel=\"nofollow noreferrer\">branch predictors</a>, <a href=\"https://en.wikipedia.org/wiki/Instruction_pipelining\" rel=\"nofollow noreferrer\">instruction pipelining</a>, <a href=\"https://en.wikipedia.org/wiki/Superscalar_processor\" rel=\"nofollow noreferrer\">superscalar processors</a>, etc...</p>\n\n<p>Perhaps you want <a href=\"https://en.wikipedia.org/wiki/Profiling_(computer_programming)\" rel=\"nofollow noreferrer\">profiling</a> tools. On Linux, if you compile <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Invoking-GCC.html\" rel=\"nofollow noreferrer\">with</a> <code>g++ -pg -O</code> then use <a href=\"http://man7.org/linux/man-pages/man1/gprof.1.html\" rel=\"nofollow noreferrer\">gprof(1)</a> (but look also into <a href=\"http://man7.org/linux/man-pages/man1/perf.1.html\" rel=\"nofollow noreferrer\">perf(1)</a>), you get something close to what you want.</p>\n\n<p><sup>(I am not sure your question makes real sense; what makes much more sense is the measured time of some benchmark, that you repeat several times and that you make long enough - at least half a second in practice.)</sup></p>\n\n<p>Read also about <a href=\"https://en.wikipedia.org/wiki/Worst-case_execution_time\" rel=\"nofollow noreferrer\">Worst Case Execution Time</a> (WCET). There are tools related to it.</p>\n\n<p>Remember that <a href=\"https://en.wikipedia.org/wiki/Time_complexity\" rel=\"nofollow noreferrer\">time complexity</a> is <a href=\"https://en.wikipedia.org/wiki/Asymptotic_analysis\" rel=\"nofollow noreferrer\">asymptotic</a>. It cares about timing for arbitrarily large input sizes, and the notion of limit and of convergence is essential when you speak of <em>O(n)</em>.</p>\n\n<p>Don't forget that optimizing compilers are changing your code in some significant way. See CppCon 2017: Matt Godbolt talk: <a href=\"https://youtu.be/bSkpMdDe4g4\" rel=\"nofollow noreferrer\"><em>\u201cWhat Has My Compiler Done for Me Lately? Unbolting the Compiler's Lid\u201d</em></a> (which also give hints on why in practice a decent C++ compiler has to make a lot of optimizations; without them C++ would be practically <a href=\"https://softwareengineering.stackexchange.com/a/273711/40065\">useless</a>).</p>\n\n<p>If you are ready to spend months to get a more or less generic solution to your question, you could design and make some <a href=\"https://gcc.gnu.org/onlinedocs/gccint/Plugins.html\" rel=\"nofollow noreferrer\">GCC plugin</a> to add instrumentation code into your program. I really think it is not worth the effort, but you are free to try.</p>\n\n<p>Part of the difficulty of such an hypothetical GCC plugin is to measure <em>precisely</em> and <em>unambiguously</em> what are the statements in every C++ code - including C++ code using standard <a href=\"http://en.cppreference.com/w/cpp/container\" rel=\"nofollow noreferrer\">containers</a> which most genuine C++ code use .... You'll find out that it is not simple.... what would be exactly the dynamic statement count -in your ill-defined sense- of some genuine C++ code using <a href=\"http://en.cppreference.com/w/cpp/header/vector\" rel=\"nofollow noreferrer\"><code>&lt;vector&gt;</code></a> like <code>std::vector&lt;int&gt; v(10); v.push_back(2);</code> ?? Your measure would probably be specific to some particular implementation (e.g. the GCC one) of the C++ standard library.</p>\n\n<p><sup>(and that is another reason why your question does not make any sense; notice that on my Linux desktop <code>#include &lt;vector&gt;</code> expands to nearly ten thousand lines, but most of the statements there get optimized and removed as <a href=\"https://en.wikipedia.org/wiki/Dead_code\" rel=\"nofollow noreferrer\">dead code</a>)</sup></p>\n\n<p>If you just want to get measures for one particular program, it is simpler (but still useless) to manually add some global counter increment in each of your <a href=\"https://en.wikipedia.org/wiki/Basic_block\" rel=\"nofollow noreferrer\">basic blocks</a>. If you adopt a particular but verbose -so hard to follow- C++ coding style where each basic block is <em>syntactically</em> a block in braces <code>{}</code>, that could be easy, and perhaps might be done automatically (at least if you don't use most of C++ features, like its containers).</p>\n\n<p>But I recommend to use <em>existing</em> profiling, <a href=\"https://en.wikipedia.org/wiki/Code_coverage\" rel=\"nofollow noreferrer\">code coverage</a>, <a href=\"https://en.wikipedia.org/wiki/Benchmark_(computing)\" rel=\"nofollow noreferrer\">benchmarking</a> and timing tools (e.g. on Linux <code>gprof</code>, <code>perf</code>, <a href=\"http://man7.org/linux/man-pages/man1/gcov.1.html\" rel=\"nofollow noreferrer\">gcov(1)</a>, <a href=\"http://man7.org/linux/man-pages/man1/time.1.html\" rel=\"nofollow noreferrer\">time(1)</a> etc...; see also <a href=\"http://man7.org/linux/man-pages/man7/time.7.html\" rel=\"nofollow noreferrer\">time(7)</a>)</p>\n"}], "owner": {"reputation": 23, "user_id": 9361615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89ff38ac8ed46d08e855f5767af3bad6?s=128&d=identicon&r=PG&f=1", "display_name": "Will B.", "link": "https://stackoverflow.com/users/9361615/will-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1283, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1522856141, "creation_date": 1522848143, "last_edit_date": 1522856141, "question_id": 49652173, "link": "https://stackoverflow.com/questions/49652173/count-c-instructions-executed", "title": "Count c++ instructions executed", "body": "<p>I'm interested in counting the number of c++ instructions executed in a particular c++ program, in order to compare theoretic efficiency (that I've calculated) with efficiency in practice. Calculating theoretic efficiency I'm counting the number of instructions, that's why I need to count the total c++ instructions that the program has executed.</p>\n\n<p>For example, for this code:</p>\n\n<pre><code>for(int i = 0; i &lt; 2; i++) {\n    c++;\n    d++;\n}\n</code></pre>\n\n<p>It should show me 4 instructions executed (or 6 if we count the automatic i++ on the for loop).</p>\n\n<p>Is there any way to do it? I have searched related questions but I don't want to count instructions in assembly code, I want the c++ instructions count.</p>\n"}, {"tags": ["c++", "function", "lambda", "rust", "closures"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1522848115, "post_id": 49652147, "comment_id": 86312564, "body": "&quot;<i>how do they generated code at runtime</i>&quot; They don&#39;t, there is no JIT embedded within the exec."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1522848130, "post_id": 49652147, "comment_id": 86312579, "body": "Drawing parallels between the C++ and some managed language can prove to be counter productive."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1522848131, "post_id": 49652147, "comment_id": 86312581, "body": "C++ doesn&#39;t generate any code at runtime.  It is a compiled language."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 2, "creation_date": 1522848324, "post_id": 49652147, "comment_id": 86312742, "body": "This is just a <code>Syntactic sugar</code> for Java, C# and C++. Compiler creates a class instance or callback function at compile time, the only difference lambda is unnamed unlike callback created with another approach. And then this functional object used at run-time with the same way as normal."}, {"owner": {"reputation": 29, "user_id": 8886492, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wC-MOfTyv08/AAAAAAAAAAI/AAAAAAAAAD4/2lGJOl5Aul0/photo.jpg?sz=128", "display_name": "Tzeroxik", "link": "https://stackoverflow.com/users/8886492/tzeroxik"}, "edited": false, "score": 0, "creation_date": 1522848324, "post_id": 49652147, "comment_id": 86312743, "body": "maybe I didn&#39;t express myself well, I meant how are anonymous functions implemented in aot compiled languages?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1522848428, "post_id": 49652147, "comment_id": 86312834, "body": "That may differ from language to language.  A google search for <i>how are lambdas implemented in &lt;language&gt;</i> should answer your questions"}, {"owner": {"reputation": 29, "user_id": 8886492, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wC-MOfTyv08/AAAAAAAAAAI/AAAAAAAAAD4/2lGJOl5Aul0/photo.jpg?sz=128", "display_name": "Tzeroxik", "link": "https://stackoverflow.com/users/8886492/tzeroxik"}, "edited": false, "score": 0, "creation_date": 1522848490, "post_id": 49652147, "comment_id": 86312876, "body": "Oh I see, thanks Victor!"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 4, "creation_date": 1522848518, "post_id": 49652147, "comment_id": 86312899, "body": "I sincerely doubt that Java or C# lambdas are actually JITted any more than named functions are. A lambda is still a compile-time construct, unlike (say) <code>eval</code>-style commands."}, {"owner": {"reputation": 29, "user_id": 8886492, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wC-MOfTyv08/AAAAAAAAAAI/AAAAAAAAAD4/2lGJOl5Aul0/photo.jpg?sz=128", "display_name": "Tzeroxik", "link": "https://stackoverflow.com/users/8886492/tzeroxik"}, "edited": false, "score": 0, "creation_date": 1522848973, "post_id": 49652147, "comment_id": 86313259, "body": "So simplifying it&#39;s king of an object or a structure with a function pointer to it, whose variables/values will be allocated on either the stack or heap (depending on implementation) at runtime?"}, {"owner": {"reputation": 9509, "user_id": 257568, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c736aafc7e3bfcf9f924d09bde3aa99?s=128&d=identicon&r=PG", "display_name": "ArtemGr", "link": "https://stackoverflow.com/users/257568/artemgr"}, "edited": false, "score": 0, "creation_date": 1522849137, "post_id": 49652147, "comment_id": 86313383, "body": "C# and Java can be AOT-compiled by .NET. Under .NET they are AOT-compiled languages. And Microsoft C++ can be used in a managed mode, it&#39;s a managed language (just like Java and C#). The question seems to carry some questionable assumptions. Anonymous != JIT."}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 1, "creation_date": 1522849691, "post_id": 49652147, "comment_id": 86313832, "body": "In Rust, the lambda is compiled (at compile time) as a method on struct containing captured variables. So there is no runtime."}, {"owner": {"reputation": 29, "user_id": 8886492, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wC-MOfTyv08/AAAAAAAAAAI/AAAAAAAAAD4/2lGJOl5Aul0/photo.jpg?sz=128", "display_name": "Tzeroxik", "link": "https://stackoverflow.com/users/8886492/tzeroxik"}, "edited": false, "score": 0, "creation_date": 1522849713, "post_id": 49652147, "comment_id": 86313851, "body": "I know that anonymous isn&#39;t the same as jit compiling, but in some places they refer that there&#39;s an anonymous class file created in java&#39;s lambda expressions that then is JIT compiled, and yes they are AOT compiled under the JVM/.Net/insertEnvHere, I might not have used the correct terms because english is not my native language, but you&#39;re not helping with all those assumptions in any way to answer this question, if I&#39;m associating rust with c++ it&#39;s obvious that I&#39;m not talking about managed c++. I welcome criticism to help me learn, but i&#39;d appreciate some focus on the core question"}, {"owner": {"reputation": 9509, "user_id": 257568, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c736aafc7e3bfcf9f924d09bde3aa99?s=128&d=identicon&r=PG", "display_name": "ArtemGr", "link": "https://stackoverflow.com/users/257568/artemgr"}, "edited": false, "score": 0, "creation_date": 1522857794, "post_id": 49652147, "comment_id": 86320146, "body": "- &quot;<i>but in some places they refer that there&#39;s an anonymous class file created in java&#39;s lambda expressions that then is JIT compiled</i>&quot; - yes, but <b>everything</b> is JIT-compiled there, not just the lambdas. - &quot;<i>and yes they are AOT compiled under the JVM/.Net/insertEnvHere</i>&quot; - no, Java is JIT on Oracle JVM, but can be AOT on .NET."}, {"owner": {"reputation": 29, "user_id": 8886492, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wC-MOfTyv08/AAAAAAAAAAI/AAAAAAAAAD4/2lGJOl5Aul0/photo.jpg?sz=128", "display_name": "Tzeroxik", "link": "https://stackoverflow.com/users/8886492/tzeroxik"}, "edited": false, "score": 0, "creation_date": 1522865694, "post_id": 49652147, "comment_id": 86324594, "body": "As far as I know usually java is aot compiled to bytecode and the bytecode is the one being jit compiled on the jvm, yes it can be done for .net aot but why assume something that isn&amp;#39;t standart, when someone says java usually it&amp;#39;s assumed to run on the jvm, not .NET."}, {"owner": {"reputation": 34798, "user_id": 1362755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97aa8c37ffa60c4262955aefae56e605?s=128&d=identicon&r=PG", "display_name": "the8472", "link": "https://stackoverflow.com/users/1362755/the8472"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1522865978, "post_id": 49652147, "comment_id": 86324768, "body": "@Angew they actually are. Java lambdas do more lifting than just some static method or anonymous class. <a href=\"https://stackoverflow.com/a/30002627/1362755\">stackoverflow.com/a/30002627/1362755</a>"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 34798, "user_id": 1362755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97aa8c37ffa60c4262955aefae56e605?s=128&d=identicon&r=PG", "display_name": "the8472", "link": "https://stackoverflow.com/users/1362755/the8472"}, "edited": false, "score": 0, "creation_date": 1522872065, "post_id": 49652147, "comment_id": 86328357, "body": "@the8472 Thanks for the info, TIL something new."}], "answers": [{"comments": [{"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1522849830, "post_id": 49652687, "comment_id": 86313946, "body": "AFAIK, in C# a lambda is converted to a class, just as in C++. And that&#39;s the same in Rust (struct + method)."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 2, "last_activity_date": 1522850157, "last_edit_date": 1522850157, "creation_date": 1522849569, "answer_id": 49652687, "question_id": 49652147, "link": "https://stackoverflow.com/questions/49652147/how-are-anonymous-functions-implemented-in-aot-compiled-languages/49652687#49652687", "title": "How are anonymous functions implemented in AOT-compiled languages?", "body": "<pre><code>int y = 3;\nauto f = [y](int x) { return x*y; };\n</code></pre>\n\n<p>this is a C++11 lambda.  The complier (basically) converts it to:</p>\n\n<pre><code>struct __anonymous_name__ {\n  int operator()(int x) const { return x*y; }\n\n  int y;\n};\n__anonymous_name__ f = {y};\n</code></pre>\n\n<p>where everything with <code>__</code> in the name is not actually named, just given names for exposition purposes.</p>\n\n<p>At runtime, everything has a fixed type, no code is generated.</p>\n\n<p><code>std::function&lt;int(int)&gt;</code> can store a copy of <code>f</code> above, but that uses a type erasure mechanism that goes beyond the scope of this question.  Note, however, that <code>f</code> is not an object of type related to <code>std::function&lt;int(int)&gt;</code>; C++ has more than one kind of polymorphism.</p>\n\n<hr>\n\n<p>I also seriously doubt that Java/C# lambdas are JIT'd any more than the rest of your code.</p>\n"}], "owner": {"reputation": 29, "user_id": 8886492, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wC-MOfTyv08/AAAAAAAAAAI/AAAAAAAAAD4/2lGJOl5Aul0/photo.jpg?sz=128", "display_name": "Tzeroxik", "link": "https://stackoverflow.com/users/8886492/tzeroxik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "closed_date": 1522851221, "accepted_answer_id": 49652687, "answer_count": 1, "score": -2, "last_activity_date": 1522850157, "creation_date": 1522848070, "last_edit_date": 1522848446, "question_id": 49652147, "link": "https://stackoverflow.com/questions/49652147/how-are-anonymous-functions-implemented-in-aot-compiled-languages", "closed_reason": "Needs more focus", "title": "How are anonymous functions implemented in AOT-compiled languages?", "body": "<p>It is my understanding that in managed languages like C#/Java, anonymous functions are generated by the compiler at runtime and then JIT compiled into the program. </p>\n\n<p>What about in unmanaged languages like Rust and C++? How can those languages create functions at runtime? What are the lower level details of implementing a lambda expression? </p>\n"}, {"tags": ["c#", "c++", "dll", "heap", "void-pointers"], "comments": [{"owner": {"reputation": 1007, "user_id": 2826535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e8ad4f5da7e39c0839d9eb6012bf6fc?s=128&d=identicon&r=PG&f=1", "display_name": "Julo", "link": "https://stackoverflow.com/users/2826535/julo"}, "edited": false, "score": 0, "creation_date": 1522848296, "post_id": 49652072, "comment_id": 86312718, "body": "I would say, the problem can be in <code>*net = readNertFromTensorflow(modelFile)</code>. What is the <code>Net</code> type? It is a structure or a class?"}, {"owner": {"reputation": 1007, "user_id": 2826535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e8ad4f5da7e39c0839d9eb6012bf6fc?s=128&d=identicon&r=PG&f=1", "display_name": "Julo", "link": "https://stackoverflow.com/users/2826535/julo"}, "edited": false, "score": 0, "creation_date": 1522848727, "post_id": 49652072, "comment_id": 86313063, "body": "The Total commander has a similar way of creating definitions in you can look at that. The difference is, that the initialisation is returned as return value: <code>HANDLE __stdcall OpenArchive(tOpenArchiveData *archiveData)</code> in your case: <code>void *loadNet()</code>."}, {"owner": {"reputation": 31, "user_id": 8979649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28fd377278e668c7982243bdc94e7529?s=128&d=identicon&r=PG&f=1", "display_name": "andyl1992", "link": "https://stackoverflow.com/users/8979649/andyl1992"}, "reply_to_user": {"reputation": 1007, "user_id": 2826535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e8ad4f5da7e39c0839d9eb6012bf6fc?s=128&d=identicon&r=PG&f=1", "display_name": "Julo", "link": "https://stackoverflow.com/users/2826535/julo"}, "edited": false, "score": 0, "creation_date": 1522850195, "post_id": 49652072, "comment_id": 86314282, "body": "the Net type is a class"}, {"owner": {"reputation": 1007, "user_id": 2826535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e8ad4f5da7e39c0839d9eb6012bf6fc?s=128&d=identicon&r=PG&f=1", "display_name": "Julo", "link": "https://stackoverflow.com/users/2826535/julo"}, "edited": false, "score": 0, "creation_date": 1522850418, "post_id": 49652072, "comment_id": 86314459, "body": "This <code>*np = &amp;net;</code> assignation of class is not a good idea. There can be the problem. And how is defined the <code>readNertFromTensorflow</code>. This can be another problem."}, {"owner": {"reputation": 31, "user_id": 8979649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28fd377278e668c7982243bdc94e7529?s=128&d=identicon&r=PG&f=1", "display_name": "andyl1992", "link": "https://stackoverflow.com/users/8979649/andyl1992"}, "reply_to_user": {"reputation": 1007, "user_id": 2826535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e8ad4f5da7e39c0839d9eb6012bf6fc?s=128&d=identicon&r=PG&f=1", "display_name": "Julo", "link": "https://stackoverflow.com/users/2826535/julo"}, "edited": false, "score": 0, "creation_date": 1522851104, "post_id": 49652072, "comment_id": 86315003, "body": "readNetFromTensorflow is from the opencv library used in the dll"}, {"owner": {"reputation": 31, "user_id": 8979649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28fd377278e668c7982243bdc94e7529?s=128&d=identicon&r=PG&f=1", "display_name": "andyl1992", "link": "https://stackoverflow.com/users/8979649/andyl1992"}, "reply_to_user": {"reputation": 1007, "user_id": 2826535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e8ad4f5da7e39c0839d9eb6012bf6fc?s=128&d=identicon&r=PG&f=1", "display_name": "Julo", "link": "https://stackoverflow.com/users/2826535/julo"}, "edited": false, "score": 0, "creation_date": 1522851943, "post_id": 49652072, "comment_id": 86315707, "body": "commenting out the <code>*net = readNetFromTensorflow(modelFile);</code> stops the error from occurring. I guess this means i am saving the model to heap incorrectly."}], "owner": {"reputation": 31, "user_id": 8979649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28fd377278e668c7982243bdc94e7529?s=128&d=identicon&r=PG&f=1", "display_name": "andyl1992", "link": "https://stackoverflow.com/users/8979649/andyl1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1522853332, "creation_date": 1522847813, "last_edit_date": 1522853332, "question_id": 49652072, "link": "https://stackoverflow.com/questions/49652072/creating-an-object-inside-a-dll-on-heap-to-use-in-other-dll-calls", "title": "Creating an object inside a dll on heap to use in other dll calls", "body": "<h2>Background</h2>\n\n<p>I have a c# program that calls a c++ dll containing the code to create a model(Net type) and use the model to evaluate an image. As the dll function currently contains the code to load the model, the time taken to run this function is too long the for the task of evaluating a live feed. </p>\n\n<p>I would like to only have to create the model once from a dll call and then pass a pointer to the model to an evaluate function, thus removing the overhead of loading the model from file.</p>\n\n<h2>Attempt</h2>\n\n<p>I have attempted to create a function that is passed a void **, creates a model on heap and points the passed void ** to it. This would allow me to pass the pointer to other functions within the dll and create a model object from the memory on heap.</p>\n\n<p>I cannot get this to work and, although it seems to me like it should be possible, i am not sure if it is.</p>\n\n<p>Any suggestions on how to tackle this or on how to fix my code would be appreciated, thanks.  </p>\n\n<h2>Error</h2>\n\n<p>Attempted to read or write protected memory at \"loadNet()\"</p>\n\n<p>c++/dll code</p>\n\n<pre><code>void loadNet(void **np)\n{\n    String modelFile = \"graph.pb\";\n    Net *net;\n    net = (Net *)malloc(sizeof(Net));\n    *net = readNetFromTensorflow(modelFile)\n\n    *np = &amp;net;\n}\n\nextern \"C\"{\n    DLLEXPORT void loadNet(void **);\n}\n</code></pre>\n\n<p>c# code to call dll</p>\n\n<pre><code>[DllImport(\"Project5.dll\")]\npublic static extern unsafe void loadNet(void **np);\n\nstatic void Main(string[] args)\n{\n    unsafe\n    {\n        void *np;\n        loadNet(&amp;np);\n\n        Bitmap img = (Bitmap)Image.FromFile(\"2.png\");\n\n        BitmapData bmpData = img.LockBits(new Rectangle(0,0,img.Width, \n                             img.Height),ImageLockMode.ReadWrite, \n                             img.PixelFormat);\n        Results results = evalImgGest2(bmpData.Scan0,&amp;np);\n        img.UnlockBits(bmpData);\n\n        Console.WriteLine(results.five);\n        Console.WriteLine(results.fist);\n        Console.WriteLine(results.index);\n    }         \n}\n</code></pre>\n\n<h2>Updates</h2>\n\n<pre><code>net = (Net *)malloc(sizeof(Net)); // is causing error \nNet *net = new Net(); // replacing with this removes error \n</code></pre>\n"}, {"tags": ["c++", "matrix", "multiplication"], "comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1522848359, "post_id": 49651994, "comment_id": 86312773, "body": "The terminating condition for the inner loop <code>col_id &lt; mat2[0].size() &lt; col_id</code> will often result in the loop body never being entered."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 7779250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb0cda3308c04a29257773511c6f8c7c?s=128&d=identicon&r=PG&f=1", "display_name": "Philip8", "link": "https://stackoverflow.com/users/7779250/philip8"}, "edited": false, "score": 0, "creation_date": 1522848864, "post_id": 49652059, "comment_id": 86313166, "body": "Thanks. It was trivial but my eyes could not catch it."}], "tags": [], "owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "is_accepted": true, "score": 3, "last_activity_date": 1522847788, "creation_date": 1522847788, "answer_id": 49652059, "question_id": 49651994, "link": "https://stackoverflow.com/questions/49651994/my-matrix-multiplication-code-does-nothing-c/49652059#49652059", "title": "My matrix multiplication code does nothing (C++)", "body": "<p><code>for (unsigned int col_id = 0; col_id &lt; mat2[0].size() &lt; col_id; ++col_id) {</code></p>\n\n<p>Check your terminating condition. That doesn't seem right. You meant:</p>\n\n<p><code>for (unsigned int col_id = 0; col_id &lt; mat2[0].size(); ++col_id) {</code></p>\n"}], "owner": {"reputation": 67, "user_id": 7779250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb0cda3308c04a29257773511c6f8c7c?s=128&d=identicon&r=PG&f=1", "display_name": "Philip8", "link": "https://stackoverflow.com/users/7779250/philip8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 49652059, "answer_count": 1, "score": 0, "last_activity_date": 1522847788, "creation_date": 1522847613, "question_id": 49651994, "link": "https://stackoverflow.com/questions/49651994/my-matrix-multiplication-code-does-nothing-c", "title": "My matrix multiplication code does nothing (C++)", "body": "<p>My function template for matrix multiplication is as follows:</p>\n\n<pre><code>template&lt;typename element_type&gt;\nvoid matMul(const std::vector&lt;std::vector&lt;element_type&gt;&gt; &amp; mat1,\nconst std::vector&lt;std::vector&lt;element_type&gt;&gt; &amp; mat2,\nstd::vector&lt;std::vector&lt;element_type&gt;&gt; &amp; result\n) {\nif (mat1[0].size() != mat2.size()) {\n    std::cout &lt;&lt; \"dimensions do not match...\" &lt;&lt; std::endl;\n    return;\n}\n\nresult.resize(mat1.size());\nfor (std::vector&lt;double&gt; &amp; row : result) {\n    row.resize(mat2[0].size());\n}\n\nfor (unsigned int row_id = 0; row_id &lt; mat1.size(); ++row_id) {\n    for (unsigned int col_id = 0; col_id &lt; mat2[0].size() &lt; col_id; ++col_id) {\n        for (unsigned int element_id = 0; element_id &lt; mat1[0].size(); ++element_id) {\n////////////////////////////////////////////////////////////////////////////////////\n            result[row_id][col_id] += mat1[row_id][element_id] * mat2[element_id][col_id];//HERE I WILL MENTION BELOW...\n////////////////////////////////////////////////////////////////////////////////////\n        }\n    }\n}\n</code></pre>\n\n<p>I passed </p>\n\n<pre><code>std::vector&lt;std::vector&lt;double&gt;&gt; mul1 = {\n    {1.0, 2.0, 3.0}, \n{4.0, 5.0, 6.0}\n};\n</code></pre>\n\n<p>,</p>\n\n<pre><code>std::vector&lt;std::vector&lt;double&gt;&gt; mul2 = {\n    {7.0, 8.0},\n{9.0, 10.0}, \n{11.0, 12.0}\n};\n</code></pre>\n\n<p>and</p>\n\n<pre><code>std::vector&lt;std::vector&lt;double&gt;&gt; result;\n</code></pre>\n\n<p>And the next code is for test:</p>\n\n<pre><code>matMul(mul1, mul2, result);\nfor (std::vector&lt;double&gt; row : result) {\n    for (double element : row) {\n        std::cout &lt;&lt; element &lt;&lt; \" \";\n    }\n    std::cout &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>0 0\n0 0\n</code></pre>\n\n<p>When I tried to debug in Visual Studio 2017, I found the break point does not work in the place I mentioned above. It seemed to do exactly nothing and just to pass by the part. Why does my VS2017 ignore the part? And how to fix it?</p>\n"}, {"tags": ["c++", "c++11", "stl", "c++14"], "comments": [{"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 1, "creation_date": 1522847370, "post_id": 49651835, "comment_id": 86311934, "body": "<i>&quot;could even cause rehashing&quot;</i> - no, I don&#39;t think it could, because you only insert after erasing, so there will always be enough capacity to avoid hitting the load factor."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1522847378, "post_id": 49651835, "comment_id": 86311938, "body": "@Someprogrammerdude OP has defined a Hash and an Equals that dereference"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1522847563, "post_id": 49651835, "comment_id": 86312096, "body": "None of the custom dereferencing stuff is actually relevant to the question about replacing an element in a set though."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1522847808, "post_id": 49651835, "comment_id": 86312306, "body": "Oh, and if you really need to do this, use a wrapper type with a <code>mutable Foo*</code> member. But it&#39;s a pretty repulsive solution, which suggests it&#39;s not an ideal design."}, {"owner": {"reputation": 1827, "user_id": 187998, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/003aa224fb6ca93a53bd2973a98e242e?s=128&d=identicon&r=PG", "display_name": "Clearer", "link": "https://stackoverflow.com/users/187998/clearer"}, "edited": false, "score": 2, "creation_date": 1522848119, "post_id": 49651835, "comment_id": 86312568, "body": "You may want to have a look at <code>std::map</code> instead."}], "answers": [{"comments": [{"owner": {"reputation": 2077, "user_id": 4694124, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c4e2b18d7cefdae9b599a884d2ae4e4c?s=128&d=identicon&r=PG", "display_name": "Lukas Barth", "link": "https://stackoverflow.com/users/4694124/lukas-barth"}, "edited": false, "score": 0, "creation_date": 1522848448, "post_id": 49651934, "comment_id": 86312844, "body": "Thanks. So, assigning to the iterator is off the table. However, my question was &quot;how to replace the element most efficiently&quot; - do you see any other way of doing that without an additional hash table lookup?  I&#39;m currently wondering whether I can use the iterator that erase() returns as a hint for a subsequent insert() - but since the search is probably performed forwards, I&#39;d need to do a std::prev() on the iterator first, and it&#39;s a ForwardIterator\u2026"}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1522848508, "post_id": 49651934, "comment_id": 86312895, "body": "Your first sentence is a non-sequitur. You can quite easily have non const elements with mutatable values that you can actively change which wouldn&#39;t affect the hash nor anything else in the structure. Yes its dangerous, but the op seems full aware of this. But as the standard says it is so this is all fairly moot."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1522850170, "post_id": 49651934, "comment_id": 86314258, "body": "@MikeVine <a href=\"http://eel.is/c++draft/container.requirements#unord.req-5\" rel=\"nofollow noreferrer\">&quot;For any key <code>k</code> in a container, calling <code>hash(k)</code> shall always return the same value&quot;</a>, If you mutate your <code>Foo k</code> in such a way that <code>hash(k)</code> changes, you are in Undefined Behaviour land. The elements being <code>const</code> <i>helps stop you trying</i> to do that."}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 2, "creation_date": 1522854674, "post_id": 49651934, "comment_id": 86317880, "body": "@Caleth Yes I understand that. And so does op. He&#39;s asking if he mutates it in such a way that it doesn&#39;t change the hash can he just update it? The answer is you should be able to but you cant. Its not a limitation with hash-maps in general just the one specified in the standard in particular. And, imo, its a shame."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1522854900, "post_id": 49651934, "comment_id": 86318067, "body": "@MikeVine We are talking about a hash <b>set</b>. A <code>std::unordered_map&lt;int, Foo *&gt;</code> would let you modify the <code>Foo</code>, although you would then have to take care to ensure you don&#39;t modify <code>Foo::set_value</code>, if your intention is to keep that in sync with the map&#39;s key"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 2077, "user_id": 4694124, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c4e2b18d7cefdae9b599a884d2ae4e4c?s=128&d=identicon&r=PG", "display_name": "Lukas Barth", "link": "https://stackoverflow.com/users/4694124/lukas-barth"}, "edited": false, "score": 0, "creation_date": 1522855770, "post_id": 49651934, "comment_id": 86318694, "body": "@LukasBarth I&#39;ve added some alternatives that may work in your situation"}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 1, "creation_date": 1522869078, "post_id": 49651934, "comment_id": 86326629, "body": "I&#39;d say that for safety, you should partition the content of your object to have all index-altering members in one sub-struct and all non-altering members in another substruct that is mutable, and then you can easily provide a method to copy or swap over the mutable substruct. But after doing that, you have effectively reinvented <code>unordered_map</code>"}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": true, "score": 3, "last_activity_date": 1522855651, "last_edit_date": 1522855651, "creation_date": 1522847408, "answer_id": 49651934, "question_id": 49651835, "link": "https://stackoverflow.com/questions/49651835/c-replace-an-element-in-a-stdunordered-set-to-which-we-have-an-iterator/49651934#49651934", "title": "C++: Replace an element in a std::unordered_set to which we have an iterator", "body": "<p>No, this is not possible, <em>by design</em>.</p>\n\n<p>All access to the elements contained within the set are <code>const</code> qualified, so that the set can maintain the necessary structure to be able to search in O(1) time. If you could modify the elements, they could be in the wrong place.</p>\n\n<p>You can <code>insert</code> the contents of <code>my_set</code> (or in C++17 <code>merge</code> the set directly) into a new (single element) set then swap them, however this is an O(N) operation.</p>\n\n<pre><code>decltype(my_set) temp{ { foo } }; \ntemp.insert(my_set.begin(), my_set.end());\nstd::swap(my_set, temp);\n// my_set now has foo, temp has replaced element or is empty\n</code></pre>\n\n<p>Alternatively, if you only care about the value of <code>foo-&gt;other_value</code> being placed into the set, note that you can modify an object through a <code>const</code> pointer.</p>\n\n<pre><code>auto ptr = *my_set.insert(foo).first;\nptr-&gt;other_value = foo-&gt;other_value;\nassert(ptr-&gt;set_value == foo-&gt;set_value);\n// ptr is \"Foo * const\", not \"Foo const *\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "is_accepted": false, "score": 0, "last_activity_date": 1522891531, "creation_date": 1522891531, "answer_id": 49662779, "question_id": 49651835, "link": "https://stackoverflow.com/questions/49651835/c-replace-an-element-in-a-stdunordered-set-to-which-we-have-an-iterator/49662779#49662779", "title": "C++: Replace an element in a std::unordered_set to which we have an iterator", "body": "<p>Would something like this work for you? Might not be the best design, you can optimise it (maybe have a wrapper <code>class MySet</code>) with a member <code>replace_if_lower</code>. The idea is to use a <code>shared_ptr</code> to add a bit of safety to an otherwise potentially unsafe operation.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;unordered_set&gt;\n#include &lt;memory&gt;\n\nstruct Foo\n{\n    int set_value;\n    int other_value;\n    Foo(int _s, int _o)\n        :\n          set_value(_s),\n          other_value(_o)\n    {}\n\n    friend std::ostream&amp; operator &lt;&lt; (std::ostream&amp; _s, const Foo&amp; _f)\n    {\n        return _s &lt;&lt; _f.set_value &lt;&lt; \", \"  &lt;&lt; _f.other_value;\n    }\n};\n\nusing FooPtr = std::shared_ptr&lt;Foo&gt;;\n\nstruct SetEqual {\n    bool operator()(const FooPtr&amp; lhs, const FooPtr&amp; rhs) const noexcept\n    {\n        return lhs-&gt;set_value == rhs-&gt;set_value;\n    }\n};\nstruct SetHasher {\n    size_t operator()(const FooPtr&amp; foo) const noexcept\n    {\n        std::hash&lt;int&gt; hasher;\n        return hasher(foo-&gt;set_value);\n    }\n};\n\nstd::unordered_set&lt;FooPtr, SetHasher, SetEqual&gt; my_set;\n\nvoid replace_if_lower(FooPtr&amp; foo)\n{\n    auto insertion_result = my_set.insert(foo);\n    bool was_inserted = insertion_result.second;\n    auto insertion_it = insertion_result.first;\n\n    if (!was_inserted)\n    {\n        // Replace iff the other value is lower\n        if (foo-&gt;other_value &lt; (*insertion_it)-&gt;other_value)\n        {\n            // This is what I would like to do:\n            // *insertion_it = foo;\n\n            // Swap the pointer contents:\n            const_cast&lt;FooPtr&amp;&gt;(*insertion_it).swap(foo);\n        }\n    }\n}\n\nint main()\n{\n    my_set.emplace(std::make_shared&lt;Foo&gt;(1,1));\n    my_set.emplace(std::make_shared&lt;Foo&gt;(2,1));\n    my_set.emplace(std::make_shared&lt;Foo&gt;(3,1));\n\n    std::cout &lt;&lt; \"Foo set:\\n\";\n    for (const auto&amp; f : my_set)\n    {\n        std::cout &lt;&lt; f &lt;&lt; \": \" &lt;&lt; *f &lt;&lt; \"\\n\";\n    }\n    std::cout &lt;&lt; \"\\n\";\n\n    FooPtr f30(std::make_shared&lt;Foo&gt;(3,0));\n\n    replace_if_lower(f30);\n\n    std::cout &lt;&lt; \"Foo set:\\n\";\n    for (const auto&amp; f : my_set)\n    {\n        std::cout &lt;&lt; f &lt;&lt; \": \" &lt;&lt; *f &lt;&lt; \"\\n\";\n    }\n    std::cout &lt;&lt; \"\\n\";\n\n    FooPtr f32(std::make_shared&lt;Foo&gt;(3,2));\n\n    replace_if_lower(f32);\n\n    std::cout &lt;&lt; \"Foo set:\\n\";\n    for (const auto&amp; f : my_set)\n    {\n        std::cout &lt;&lt; f &lt;&lt; \": \" &lt;&lt; *f &lt;&lt; \"\\n\";\n    }\n    std::cout &lt;&lt; \"\\n\";\n\n    return 0;\n}\n</code></pre>\n\n<p>This prints</p>\n\n<pre><code>Foo set:\n0x563e834eec70: 3, 1\n0x563e834eec90: 2, 1\n0x563e834eec30: 1, 1\n\nFoo set:\n0x563e834efd30: 3, 0\n0x563e834eec90: 2, 1\n0x563e834eec30: 1, 1\n\nFoo set:\n0x563e834efd30: 3, 0\n0x563e834eec90: 2, 1\n0x563e834eec30: 1, 1\n</code></pre>\n"}], "owner": {"reputation": 2077, "user_id": 4694124, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c4e2b18d7cefdae9b599a884d2ae4e4c?s=128&d=identicon&r=PG", "display_name": "Lukas Barth", "link": "https://stackoverflow.com/users/4694124/lukas-barth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 868, "favorite_count": 0, "accepted_answer_id": 49651934, "answer_count": 2, "score": 4, "last_activity_date": 1522891531, "creation_date": 1522847109, "question_id": 49651835, "link": "https://stackoverflow.com/questions/49651835/c-replace-an-element-in-a-stdunordered-set-to-which-we-have-an-iterator", "title": "C++: Replace an element in a std::unordered_set to which we have an iterator", "body": "<p>I have a <code>std::unordered_set</code> of pointers to some objects. The set has custom hash and equivalence functions, s.t. objects can be equal regarding the set even if the objects are not equal in the sense of \"all members are equal\".</p>\n\n<p>Now I want to insert a new object. If an equivalent object already exists in the set, I want the old object to be replaced if and only if some condition on the \"other\" members (i.e., which are not part of the hash / equality check) of the objects is true.</p>\n\n<p>If I decide to replace the object, I wonder how to do this most efficiently. I feel like the whole process should be doable with a single hashmap lookup. My best approach currently is this:</p>\n\n<ul>\n<li>First, call <code>set.insert(new_object)</code>. If that actually inserts the object, we are done. (This costs us one hashmap lookup.)</li>\n<li>If not, an equivalent object is in the set, and we get an iterator to it. Check the condition based on <code>new_object</code> and the iterator. This doesn't invoke any hashmap operation.</li>\n<li>If the condition is true, replace whatever the iterator points to by <code>new_object</code>. That's the tricky part. It looks like I can't do <code>*the_iterator = new_object</code>. The best I can currently figure out is to do <code>set.erase(the_iterator); set.insert(new_object);</code> - but that requires a new hashmap lookup for the insert, and could even cause rehashing. Both should not be necessary.</li>\n</ul>\n\n<p>Below is a complete example demonstrating what I'm trying to do. It's a bit lengthy because of the custom hash / equality structs, sorry.</p>\n\n<pre><code>#include &lt;unordered_set&gt;\n\nstruct Foo {\n    int set_value;\n    int other_value;\n};\n\nstruct SetEqual {\n    bool operator()(Foo * lhs, Foo * rhs) const noexcept\n    {\n        return lhs-&gt;set_value == rhs-&gt;set_value;\n    }\n};\nstruct SetHasher {\n    size_t operator()(Foo * foo) const noexcept\n    {\n        std::hash&lt;int&gt; hasher;\n        return hasher(foo-&gt;set_value);\n    }\n};\n\nstd::unordered_set&lt;Foo *, SetHasher, SetEqual&gt; my_set;\n\nvoid \nreplace_if_lower(Foo * foo) \n{\n    auto insertion_result = my_set.insert(foo);\n    bool was_inserted = insertion_result.second;\n    auto insertion_it = insertion_result.first;\n\n    if (!was_inserted) {\n        // Replace iff the other value is lower\n        if (foo-&gt;other_value &lt; (*insertion_it)-&gt;other_value) {\n            // This is what I would like to do:\n            // *insertion_it = foo;\n\n            // This is the best I could figure out:\n            my_set.erase(insertion_it);\n            my_set.insert(foo); \n        }\n    }\n}\n</code></pre>\n\n<p>Does anybody see how to do this with just one set lookup? I would be fine with useing C++ 11 or 14 features. Thanks!</p>\n"}, {"tags": ["c++", "opengl", "3d", "glut", "freeglut"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8482543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60036846fddb1d5a21abc49f8f5a0209?s=128&d=identicon&r=PG&f=1", "display_name": "user8482543", "link": "https://stackoverflow.com/users/8482543/user8482543"}, "edited": false, "score": 0, "creation_date": 1522848999, "post_id": 49652246, "comment_id": 86313280, "body": "How does one turn texturing off? And take it up with the university I have to do this stuff for lmao."}, {"owner": {"reputation": 23, "user_id": 8482543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60036846fddb1d5a21abc49f8f5a0209?s=128&d=identicon&r=PG&f=1", "display_name": "user8482543", "link": "https://stackoverflow.com/users/8482543/user8482543"}, "edited": false, "score": 0, "creation_date": 1522849611, "post_id": 49652246, "comment_id": 86313763, "body": "glDisable(GL_TEXTURE_2D); nvm got it already... everything working as expected"}], "tags": [], "owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "is_accepted": true, "score": 1, "last_activity_date": 1522853215, "last_edit_date": 1522853215, "creation_date": 1522848361, "answer_id": 49652246, "question_id": 49651830, "link": "https://stackoverflow.com/questions/49651830/opengl-lighting-not-working/49652246#49652246", "title": "Opengl lighting not working", "body": "<p>So, you draw this \"temple\" cube</p>\n\n<ol>\n<li>while texturing is still on, with the last texture of your skybox which is still bound. Since <code>glutSloidCube</code> does not provide any texcoords, the same texcoords will be used all over the place. You can use <code>glDisable(GL_TEXTURE_2D)</code> to disable it.</li>\n<li>with a color of (0,0,0) while <code>glColorMaterial</code> is set to <code>GL_AMBIENT_AND_DIFFUSE</code>, so you basically will get only specular lighting</li>\n<li>with the GL's fixed function, so you only get gouraud shading, and will not get any useful specular highlight because the lighting is just calculated at each corner vertex of your cube</li>\n</ol>\n\n<p>So, in the end, you'll get a crappy specular highlight, modulated by some corner texel color of some of on of your skybox textures, interpolated across your cube faces.</p>\n\n<p>You should note that <em>almost every single GL function</em> you are using is <em>deprecated</em> since a <em>decade</em> now. Your code is totally outdated, the fixed function is long gone from GPUs. If you really want to learn OpenGL nowadays, you shouldn't do it in ways which are 20 years old.</p>\n"}], "owner": {"reputation": 23, "user_id": 8482543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60036846fddb1d5a21abc49f8f5a0209?s=128&d=identicon&r=PG&f=1", "display_name": "user8482543", "link": "https://stackoverflow.com/users/8482543/user8482543"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 49652246, "answer_count": 1, "score": -1, "last_activity_date": 1522855250, "creation_date": 1522847088, "last_edit_date": 1522855250, "question_id": 49651830, "link": "https://stackoverflow.com/questions/49651830/opengl-lighting-not-working", "title": "Opengl lighting not working", "body": "<p>So far a sky box and cube and ability to move the camera left right forward and back is working. However the cube is not being shaded by the lighting and isn't even appearing as the correct color. From my perspective I've enabled everything I was told to enable and created a light source etc etc so I'm pretty lost.</p>\n\n<pre><code>//  ========================================================================\n//\n//  ========================================================================\n\n#include &lt;iostream&gt;\n#include &lt;GL/freeglut.h&gt;\n#include &lt;cmath&gt;\n#include \"loadTGA.h\"\nusing namespace std;\n\n#define GL_CLAMP_TO_EDGE 0x812F   //To get rid of seams between textures\nfloat theta = 0.0;      //Camera rotation\nfloat cdr=3.14159265/180.0; //Conversion from degrees to radians\nfloat eye_x=0.0, eye_z=0.0; \nfloat look_x=eye_x + 100*sin(cdr*theta);\nfloat look_z=eye_z - 100*cos(cdr*theta);\n\nGLuint texId[6];\n\nvoid loadGLTextures()               // Load bitmaps And Convert To Textures\n{\n    glGenTextures(6, texId);        // Create texture ids\n    // *** left ***\n    glBindTexture(GL_TEXTURE_2D, texId[0]);\n    loadTGA(\"alps_rt.tga\");\n    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR); \n    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);    \n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);    \n\n    // *** front ***\n    glBindTexture(GL_TEXTURE_2D, texId[1]);\n    loadTGA(\"alps_ft.tga\");\n    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR); \n    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);    \n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);    \n\n    // *** right ***\n    glBindTexture(GL_TEXTURE_2D, texId[2]);\n    loadTGA(\"alps_lf.tga\");\n    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR); \n    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);    \n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);    \n\n    // *** back***\n    glBindTexture(GL_TEXTURE_2D, texId[3]);\n    loadTGA(\"alps_bk.tga\");\n    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR); \n    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);    \n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);    \n\n    // *** top ***\n    glBindTexture(GL_TEXTURE_2D, texId[4]);\n    loadTGA(\"alps_up.tga\");\n    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR); \n    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);    \n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);    \n\n    // *** down ***\n    glBindTexture(GL_TEXTURE_2D, texId[5]);\n    loadTGA(\"grass.tga\");\n    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR); \n    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);   \n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);\n\n    glTexEnvi(GL_TEXTURE_ENV,GL_TEXTURE_ENV_MODE,GL_REPLACE);\n}\n\n//========================================================================================\n\nvoid temple(){\n\n\n    glColor3f(0, 0, 0);\n    glPushMatrix();\n      glTranslatef(20, 10, 0);\n      glutSolidCube(1);\n    glPopMatrix();\n\n\n}\n\n\n\nvoid skybox(){\n    glEnable(GL_TEXTURE_2D);\n\n    ////////////////////// LEFT WALL ///////////////////////\n    glBindTexture(GL_TEXTURE_2D, texId[0]);\n    glBegin(GL_QUADS);\n    glTexCoord2f(0., 0.);\n    glVertex3f(-10000,  0, 10000);\n    glTexCoord2f(1., 0.);\n    glVertex3f(-10000, 0., -10000);\n    glTexCoord2f(1., 1.);\n    glVertex3f(-10000, 10000., -10000);\n    glTexCoord2f(0., 1.);\n    glVertex3f(-10000, 10000, 10000);\n    glEnd();\n\n    ////////////////////// FRONT WALL ///////////////////////\n    glBindTexture(GL_TEXTURE_2D, texId[1]);\n    glBegin(GL_QUADS);\n    glTexCoord2f(0., 0.);\n    glVertex3f(-10000,  0, -10000);\n    glTexCoord2f(1., 0.);\n    glVertex3f(10000, 0., -10000);\n    glTexCoord2f(1., 1.);\n    glVertex3f(10000, 10000, -10000);\n    glTexCoord2f(0., 1.);\n    glVertex3f(-10000,  10000, -10000);\n    glEnd();\n\n    ////////////////////// RIGHT WALL ///////////////////////\n    glBindTexture(GL_TEXTURE_2D, texId[2]);\n    glBegin(GL_QUADS);\n    glTexCoord2f(0., 0.);\n    glVertex3f(10000,  0, -10000);\n    glTexCoord2f(1., 0.);\n    glVertex3f(10000, 0, 10000);\n    glTexCoord2f(1., 1.);\n    glVertex3f(10000, 10000,  10000);\n    glTexCoord2f(0., 1.);\n    glVertex3f(10000,  10000,  -10000);\n    glEnd();\n\n\n    ////////////////////// REAR WALL ////////////////////////\n    glBindTexture(GL_TEXTURE_2D, texId[3]);\n    glBegin(GL_QUADS);\n    glTexCoord2f(0., 0.);\n    glVertex3f( 10000, 0, 10000);\n    glTexCoord2f(1., 0.);\n    glVertex3f(-10000, 0,  10000);\n    glTexCoord2f(1., 1.);\n    glVertex3f(-10000, 10000,  10000);\n    glTexCoord2f(0., 1.);\n    glVertex3f( 10000, 10000, 10000);\n    glEnd();\n\n    /////////////////////// TOP //////////////////////////\n    glBindTexture(GL_TEXTURE_2D, texId[4]);\n    glBegin(GL_QUADS);\n    glTexCoord2f(0., 0.);\n    glVertex3f(-10000, 10000, -10000);\n    glTexCoord2f(1., 0.);\n    glVertex3f(10000, 10000,  -10000);\n    glTexCoord2f(1., 1.);\n    glVertex3f(10000, 10000,  10000);\n    glTexCoord2f(0., 1.);\n    glVertex3f(-10000, 10000, 10000);\n    glEnd();\n\n    /////////////////////// FLOOR //////////////////////////\n    glBindTexture(GL_TEXTURE_2D, texId[5]);\n    glBegin(GL_QUADS);\n    glTexCoord2f(0., 0.);\n    glVertex3f(-10000, 0., 10000);\n    glTexCoord2f(100., 0.);\n    glVertex3f(10000, 0.,  10000);\n    glTexCoord2f(100., 100.);\n    glVertex3f(10000, 0., -10000);\n    glTexCoord2f(0., 100.);\n    glVertex3f(-10000, 0., -10000);\n    glEnd();\n\n}\n\n//---------------------------------------------------------------------\nvoid initialise(void) \n{    \n    float grey[4] = {0.2, 0.2, 0.2, 1.0};\n    float white[4]  = {1.0, 1.0, 1.0, 1.0};\n\n    loadGLTextures();\n\n    glEnable(GL_LIGHTING);\n    glEnable(GL_LIGHT0);\n\n    glLightfv(GL_LIGHT0, GL_AMBIENT, grey);\n    glLightfv(GL_LIGHT0, GL_DIFFUSE, white);\n    glLightfv(GL_LIGHT0, GL_SPECULAR, white);\n\n    glEnable(GL_COLOR_MATERIAL);\n    glColorMaterial(GL_FRONT, GL_AMBIENT_AND_DIFFUSE);\n\n    glEnable(GL_DEPTH_TEST);\n    glEnable(GL_TEXTURE_2D);\n    glEnable(GL_NORMALIZE);\n    glClearColor (0.0, 0.0, 0.0, 0.0);\n\n    glMatrixMode (GL_PROJECTION);\n    glLoadIdentity ();\n    gluPerspective(90.0, 1.0, 1.0, 20000.0);   //Perspective projection\n\n}\n\n//---------------------------------------------------------------------\nvoid display(void)\n{\n    float outsidelightpos[4] = {1.0f, 1.0f, 1.0f, 1.0f};\n\n    glClear (GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\n    glMatrixMode(GL_MODELVIEW);\n    glLoadIdentity();\n\n    gluLookAt (eye_x, 10, eye_z, look_x, 10, look_z, 0, 1, 0);  //camera rotation\n\n    glLightfv(GL_LIGHT0, GL_POSITION, outsidelightpos);\n\n    skybox();\n\n    temple();\n\n    glFlush();\n}\n\n//--------------------------------------------------------------\n void special(int key, int x, int y)\n {\n\n    if(key==GLUT_KEY_LEFT) theta-=5;         //Turn left\n    else if(key==GLUT_KEY_RIGHT) theta+=5;   //Turn right\n    else if(key == GLUT_KEY_DOWN)\n    {  //Move backward\n        eye_x -= 5*sin(cdr*theta);\n        eye_z += 5*cos(cdr*theta);\n    }\n    else if(key == GLUT_KEY_UP)\n    { //Move forward\n        eye_x += 5*sin(cdr*theta);\n        eye_z -= 5*cos(cdr*theta);\n    }\n\n    look_x = eye_x + 100*sin(cdr*theta);\n    look_z = eye_z - 100*cos(cdr*theta);\n\n    glutPostRedisplay();\n    glutSwapBuffers();\n}\n//-------------------------------------------------------------------\n\nint main(int argc, char** argv)\n{\n    glutInit(&amp;argc, argv);\n    glutInitDisplayMode (GLUT_SINGLE | GLUT_DEPTH);\n    glutInitWindowSize (1024, 800); \n    glutInitWindowPosition (50, 50);\n\n    glutCreateWindow (\"Alex Bull's Assignment\");\n    initialise();\n    glutDisplayFunc(display); \n    glutSpecialFunc(special);\n\n    glutMainLoop();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "type-conversion"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1522846873, "post_id": 49651716, "comment_id": 86311582, "body": "I&#39;m guessing it&#39;s just floating point math being floating point math, but can you also provide a true <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1522847096, "post_id": 49651716, "comment_id": 86311755, "body": "Nice rhyme though."}], "owner": {"reputation": 11, "user_id": 4829862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZlZkt.jpg?s=128&g=1", "display_name": "Mohamed Ali Chebbi", "link": "https://stackoverflow.com/users/4829862/mohamed-ali-chebbi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "closed_date": 1522846809, "answer_count": 0, "score": 0, "last_activity_date": 1522846756, "creation_date": 1522846756, "question_id": 49651716, "link": "https://stackoverflow.com/questions/49651716/convert-uint-to-double-c", "closed_reason": "Duplicate", "title": "convert uint to double c++", "body": "<p>trying to convert uint16 to double ; I got some precision trouble :</p>\n\n<pre><code>    inline static double makePrice(uint16_t data)\n    {\n        return (double)data/100;\n    }\n\n    int priceOffset = -100;\n    double const bidPrice = makePrice(msg.getBidPrice()+ priceOffset * 100);\n\n\nHere the value with GDB :\n    (gdb) p msg.getBidPrice()\n    $8 = 17590\n    (gdb) p  API::makePrice(msg.getBidPrice()+ priceOffset * 100)\n    $9 = 175.90000000000001\n    (gdb) p priceOffset\n    $10 = 0\n    (gdb) p msg.getBidPrice()/100.0\n    $11 = 175.89999999999998\n</code></pre>\n\n<p>Is this an issue with received value msg.getBidPrice() ?</p>\n"}]