[{"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 2, "creation_date": 1524095367, "post_id": 49910620, "comment_id": 86837111, "body": "<code>animal=nullptr; delete animal;</code> is probably not going to work like you think it will."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1524095463, "post_id": 49910620, "comment_id": 86837128, "body": "Think on what can happen if you <code>delete</code> all of the <code>dogs</code> if <code>dogs</code> and <code>animals</code> share pointers to instances."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1524095573, "post_id": 49910620, "comment_id": 86837153, "body": "<i>&quot;I can&#39;t use shared_ptr nor unique_ptr in my code.&quot;</i> Write your own smart pointer then."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 3, "creation_date": 1524095576, "post_id": 49910620, "comment_id": 86837154, "body": "Passing a vector to a function by value could leave the caller confused, since the actual vector passed will not be changed, but the pointers it contains will be deleted."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 3, "creation_date": 1524095659, "post_id": 49910620, "comment_id": 86837173, "body": "Also, having gone to the trouble of deriving things from Animal, why do you have separate vectors for cats and dogs?"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1524096204, "post_id": 49910620, "comment_id": 86837286, "body": "Animal does not have a virtual destructor.  Things will not end well."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1524096434, "post_id": 49910620, "comment_id": 86837346, "body": "This seems the wrong way round: <code>animal=nullptr; delete animal;</code>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1524096542, "post_id": 49910620, "comment_id": 86837376, "body": "C++ doesn&#39;t have <a href=\"https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)\" rel=\"nofollow noreferrer\">contravariance</a>"}, {"owner": {"reputation": 29, "user_id": 9648593, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C3GPHJAPrkY/AAAAAAAAAAI/AAAAAAAAApA/SoHnhLP-WMQ/photo.jpg?sz=128", "display_name": "Gabel Luc", "link": "https://stackoverflow.com/users/9648593/gabel-luc"}, "edited": false, "score": 0, "creation_date": 1524131279, "post_id": 49910620, "comment_id": 86851216, "body": "Thanks a lot for your answers, but this is just a dummy code to represent a bigger project. I couldn&#39;t upload 20 files worth of code in one question ^^. I even had to change the names to make it sound a bit more logical."}], "answers": [{"comments": [{"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 2, "creation_date": 1524096403, "post_id": 49910718, "comment_id": 86837338, "body": "Yes, you can do it with polymorphism with a few small changes to the program. Templates are a little more advanced."}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1524097264, "post_id": 49910718, "comment_id": 86837552, "body": "That&#39;s a little more detail than I wanted to give for what smells like a homework question. Nice of you to point out the solution that doesn&#39;t use pointers though."}, {"owner": {"reputation": 29, "user_id": 9648593, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C3GPHJAPrkY/AAAAAAAAAAI/AAAAAAAAApA/SoHnhLP-WMQ/photo.jpg?sz=128", "display_name": "Gabel Luc", "link": "https://stackoverflow.com/users/9648593/gabel-luc"}, "edited": false, "score": 0, "creation_date": 1524142727, "post_id": 49910718, "comment_id": 86859008, "body": "Thank you very much ! It seems to work just like I wanted. Not sure my programming teacher will like it, but i&#39;ll try anyway ;)"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 2, "last_activity_date": 1524097969, "last_edit_date": 1524097969, "creation_date": 1524096239, "answer_id": 49910718, "question_id": 49910620, "link": "https://stackoverflow.com/questions/49910620/clear-a-vector-of-derived-classes-using-a-function-with-a-vector-of-class-as-arg/49910718#49910718", "title": "Clear a vector of derived classes using a function with a vector of class as argument", "body": "<p>Polymorphism isn't what you are looking for.  You can use a template instead, eg:</p>\n\n<pre><code>class Animal{\n    public:\n        virtual ~Animal(){}\n};\n\nclass Dog : public Animal{};\nclass Cat : public Animal{};\n\nclass House{\n    private :\n        std::vector&lt;Dog*&gt; Dogs;\n        std::vector&lt;Cat*&gt; Cats;\n\n        template&lt;typename T&gt;\n        void clearList(std::vector&lt;T*&gt; &amp;animals){\n            for (T *animal : animals){\n                 delete animal;\n            }\n            animals.clear();\n        }\n\n    public :\n        ~House(){\n            clearList(dogs);\n            clearList(cats);\n        }\n};\n</code></pre>\n\n<p>If you really want to use polymorphism for the function, then you would have to change the <code>vector</code> objects to be the same type, then you don't need the template, eg:</p>\n\n<pre><code>class Animal{\n    public:\n        virtual ~Animal(){}\n};\n\nclass Dog : public Animal{};\nclass Cat : public Animal{};\n\nclass House{\n    private :\n        std::vector&lt;Animal*&gt; Dogs;\n        std::vector&lt;Animal*&gt; Cats;\n\n        void clearList(std::vector&lt;Animal*&gt; &amp;animals){\n            for (Animal *animal : animals){\n                 delete animal;\n            }\n            animals.clear();\n        }\n\n    public :\n        ~House(){\n            clearList(dogs);\n            clearList(cats);\n        }\n};\n</code></pre>\n\n<p>Otherwise, simply do not store pointers to begin with, and let <code>vector</code>'s own destructor destroy the objects for you:</p>\n\n<pre><code>class Animal{\n    public:\n        virtual ~Animal(){}\n};\n\nclass Dog : public Animal{};\nclass Cat : public Animal{};\n\nclass House{\n    private :\n        std::vector&lt;Dog&gt; Dogs;\n        std::vector&lt;Cat&gt; Cats;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1524096506, "post_id": 49910723, "comment_id": 86837367, "body": "&quot;<i>since you already have pointers, just make them pointers to the base class rather than the derived class</i>&quot; - yes, but then you will likely have to type-cast them every time you want to access them."}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 3617, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 0, "creation_date": 1524096789, "post_id": 49910723, "comment_id": 86837437, "body": "@GRC no, because your code is only about 1/3 of what&#39;s necessary."}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1524096890, "post_id": 49910723, "comment_id": 86837466, "body": "@RemyLebeau if all the methods you wanted to use on those objects were also virtual, you wouldn&#39;t need any casting. Hard to know from this toy example if that will be a problem or not."}, {"owner": {"reputation": 3617, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1524097164, "post_id": 49910723, "comment_id": 86837531, "body": "@RemyLebeau I do appreciate your comment but I do want to know what am I missing. :)"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 3617, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 0, "creation_date": 1524097354, "post_id": 49910723, "comment_id": 86837571, "body": "@GRC: <code>vector&lt;Animal*&gt;</code>, <code>vector&lt;Dog*&gt;</code>, and <code>vector&lt;Cat*&gt;</code> are three distinct types, despite being based on the same <code>vector&lt;T&gt;</code> implementation. You can&#39;t interchange them like you are thinking."}, {"owner": {"reputation": 3617, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1524097738, "post_id": 49910723, "comment_id": 86837672, "body": "@RemyLebeau you are confusing the hell out of me now :(. You are doing the same thing :) <code>void clearList(std::vector&lt;Animal*&gt; &amp;animals)</code>. This is copied from your code :)"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 3617, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 0, "creation_date": 1524097856, "post_id": 49910723, "comment_id": 86837707, "body": "@GRC Look at that particular example again more carefully, I had changed everything in it to use just <code>vector&lt;Animal*&gt;</code> everywhere, so there is only 1 type involved. My other examples distinguish <code>vector&lt;Dog*&gt;</code> from <code>vector&lt;Cat*&gt;</code> - 2 distinct types"}], "tags": [], "owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 2, "last_activity_date": 1524096318, "creation_date": 1524096318, "answer_id": 49910723, "question_id": 49910620, "link": "https://stackoverflow.com/questions/49910620/clear-a-vector-of-derived-classes-using-a-function-with-a-vector-of-class-as-arg/49910723#49910723", "title": "Clear a vector of derived classes using a function with a vector of class as argument", "body": "<p>To effectively use polymorphism, you need two things: virtual functions, and pointers or references to the base class. In your case, since you already have pointers, just make them pointers to the base class rather than the derived class. And since you want to delete these pointers, make the destructors virtual.</p>\n"}], "owner": {"reputation": 29, "user_id": 9648593, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C3GPHJAPrkY/AAAAAAAAAAI/AAAAAAAAApA/SoHnhLP-WMQ/photo.jpg?sz=128", "display_name": "Gabel Luc", "link": "https://stackoverflow.com/users/9648593/gabel-luc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1524097969, "creation_date": 1524095250, "last_edit_date": 1524096437, "question_id": 49910620, "link": "https://stackoverflow.com/questions/49910620/clear-a-vector-of-derived-classes-using-a-function-with-a-vector-of-class-as-arg", "title": "Clear a vector of derived classes using a function with a vector of class as argument", "body": "<p>I have a class <code>Animal</code>, with two derived classes <code>Cat</code> and <code>Dog</code> respectively.\nI also have a class <code>House</code> which contains two lists as attributes: a list of every cat in the house ( <code>std::vector&lt;Cat*&gt;</code> ), and a list of every dog ( <code>vector&lt;Dog*&gt;</code>).</p>\n\n<p>My goal is to code a function in House which clears a list of animals ( <code>void House::clearList( std::vector&lt;Animal*&gt; )</code> ). I'd like to avoid duplicating code as much as possible. Hence, creating one function for both list would be optimal.</p>\n\n<p>I'd like to call this function in the destructor of <code>House</code>:</p>\n\n<pre><code>class Animal{};\n\nclass Dog : public Animal{};\nclass Cat : public Animal{};\n\nclass House{\n    private :\n        std::vector&lt;Dog*&gt; Dogs;\n        std::vector&lt;Cat*&gt; Cats;\n    public :\n       ~House(){\n            clearList(dogs);\n            clearList(cats);\n       }\n       clearList(std::vector&lt;Animal*&gt; animals){\n            for (auto&amp; animal : animals){\n                 animal=nullptr;\n                 delete animal;\n            }\n       }\n};\n</code></pre>\n\n<p>The compiler displays :</p>\n\n<blockquote>\n  <p>error: no matching function for call to '<code>House::clearList(std::vector&lt;Cat*&gt;&amp;)</code>'\n      note:   no known conversion for argument 1 from '<code>std::vector&lt;Cat*&gt;</code>' to '<code>std::vector&lt;Animal*&gt;</code>'</p>\n</blockquote>\n\n<p>I can't use <code>shared_ptr</code> nor <code>unique_ptr</code> in my code.</p>\n\n<p>How can I use polymorphism to solve this?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 7254, "user_id": 633684, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FILa8kQG7TI/AAAAAAAAAAI/AAAAAAAAABE/W39twkD272Q/photo.jpg?sz=128", "display_name": "xiaofeng.li", "link": "https://stackoverflow.com/users/633684/xiaofeng-li"}, "edited": false, "score": 0, "creation_date": 1524094879, "post_id": 49910561, "comment_id": 86836999, "body": "You should use <code>rbegin()</code> and <code>rend()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 9434578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1dbb00de2d9934efc3dc718dfa8ff6b?s=128&d=identicon&r=PG&f=1", "display_name": "John Tedesco", "link": "https://stackoverflow.com/users/9434578/john-tedesco"}, "edited": false, "score": 0, "creation_date": 1524094961, "post_id": 49910583, "comment_id": 86837020, "body": "I see. Thank you so much for your help."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1524095861, "post_id": 49910583, "comment_id": 86837204, "body": "What do you mean by &quot;<i>half</i> closed and <i>half</i> open range&quot;?"}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1524096253, "post_id": 49910583, "comment_id": 86837295, "body": "@499602D2, I am using <a href=\"http://mathworld.wolfram.com/Half-ClosedInterval.html\" rel=\"nofollow noreferrer\">this terminology</a>"}], "tags": [], "owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "is_accepted": true, "score": 6, "last_activity_date": 1524096359, "last_edit_date": 1524096359, "creation_date": 1524094900, "answer_id": 49910583, "question_id": 49910561, "link": "https://stackoverflow.com/questions/49910561/reverse-output-of-vector-array-giving-strange-result/49910583#49910583", "title": "Reverse output of vector array giving strange result", "body": "<p>The <a href=\"http://en.cppreference.com/w/cpp/container/vector/end\" rel=\"nofollow noreferrer\">end</a> iterator of a vector doesn't reference valid data.  The valid data is from <code>[begin, end)</code> (half closed and half open range).  So you can't expect the <code>*</code> operator on it to work.  In fact, doing so is undefined behavior.</p>\n\n<p>Instead, to iterate backwards, use the <a href=\"http://en.cppreference.com/w/cpp/iterator/reverse_iterator\" rel=\"nofollow noreferrer\">reverse_iterators</a> <code>arr.rbegin()</code> and <code>arr.rend()</code> and use the <code>++</code> operator as so:</p>\n\n<pre><code>for(std::vector&lt;int&gt;::reverse_iterator it = arr.rbegin(); it != arr.rend(); ++it)\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 9434578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1dbb00de2d9934efc3dc718dfa8ff6b?s=128&d=identicon&r=PG&f=1", "display_name": "John Tedesco", "link": "https://stackoverflow.com/users/9434578/john-tedesco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 49910583, "answer_count": 1, "score": 0, "last_activity_date": 1524096359, "creation_date": 1524094710, "question_id": 49910561, "link": "https://stackoverflow.com/questions/49910561/reverse-output-of-vector-array-giving-strange-result", "title": "Reverse output of vector array giving strange result", "body": "<p>I am starting off with learning a bit more about vectors. One of the first practice exercises I was told to do was to output the contents of the array using 'iterator format'. As an additional exercise I was told to try and print the array in reverse using the same method as it similar to pointer arithmetic.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\nusing namespace std;\nint main(){\n vector&lt;int&gt; arr;\n arr.push_back(1);\n arr.push_back(2);\n arr.push_back(3);\n arr.push_back(4);\n\n for(vector&lt;int&gt;::iterator it = arr.end(); it &gt;= arr.begin(); it--){\n cout &lt;&lt; *it &lt;&lt; endl;\n }\n}\n</code></pre>\n\n<p>The output is as follows:</p>\n\n<pre><code>-820575969\n4\n3\n2\n1\n</code></pre>\n\n<p>The program is working and it is printing out the numbers in the array in reverse order. However why is the first thing outputted some long negative number? Thanks for any help.</p>\n\n<p>R,\nJohn</p>\n"}, {"tags": ["c++", "qt", "qt5", "qgraphicsitem", "qlabel"], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 6789651, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211116379373630/picture?type=large", "display_name": "Matheus Ianzer", "link": "https://stackoverflow.com/users/6789651/matheus-ianzer"}, "edited": false, "score": 0, "creation_date": 1524100529, "post_id": 49910888, "comment_id": 86838343, "body": "Thanks for the reply! Now the new text is centered, but the red background is still larger than the text, I thought <code>adjustSize()</code> would take care of it, why is that?"}, {"owner": {"reputation": 315, "user_id": 6789651, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211116379373630/picture?type=large", "display_name": "Matheus Ianzer", "link": "https://stackoverflow.com/users/6789651/matheus-ianzer"}, "edited": false, "score": 0, "creation_date": 1524104781, "post_id": 49910888, "comment_id": 86839337, "body": "Yes, I did copy your code, all I did was separate function headers to .h and implementation to .cpp. I think maybe I&#39;m not overriding <code>boundingRect()</code> correctly since I don&#39;t really know for sure where to put it, sorry for the newbie c++ struggle, but where should I place overridden functions from Qt headers?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 315, "user_id": 6789651, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211116379373630/picture?type=large", "display_name": "Matheus Ianzer", "link": "https://stackoverflow.com/users/6789651/matheus-ianzer"}, "edited": false, "score": 1, "creation_date": 1524197170, "post_id": 49910888, "comment_id": 86883173, "body": "@MatheusIanzer Never mess with working code until you confirm that it works. &quot;All I did&quot; is irrelevant - everyone says that. It&#39;s the software engineering equivalent of &quot;hold my beer, watch this&quot;. Get it working as-is first, then commit to git, then change a small thing, verify that it still works, commit, and keep going like that, in small chunks. And yes, use git, even on little examples. Make it a habit. Then you&#39;ll embrace change instead of dreading it."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 4, "last_activity_date": 1524102125, "last_edit_date": 1524102125, "creation_date": 1524097676, "answer_id": 49910888, "question_id": 49910514, "link": "https://stackoverflow.com/questions/49910514/qlabel-not-resizing-after-changing-its-text/49910888#49910888", "title": "QLabel not resizing after changing its text", "body": "<p>You can adjust the size of the <code>QLabel</code> with <code>adjustSize()</code>, but even so the <code>QGraphicsProxyWidget</code> will not change its size causing the problem to persist, to correct we must overwrite <code>boundingRect()</code> and return the appropriate size, in addition to this the way you set the text does not is appropriate, if you are creating a class that has the label inside you could create a <code>setText()</code> method that updates the <code>QLabel</code> without the need to write a lot of code:</p>\n\n<pre><code>class GraphicsProxyWidget: public QGraphicsProxyWidget{\npublic:\n    using QGraphicsProxyWidget::QGraphicsProxyWidget;\n    QRectF boundingRect() const{\n        if(widget())\n            return QRectF(widget()-&gt;rect());\n        return QGraphicsProxyWidget::boundingRect();\n    }\n};\n\nclass DiagramItem: public QGraphicsPolygonItem{\n    QLabel *label;\n    GraphicsProxyWidget *pMyProxy ;\npublic:\n    explicit DiagramItem(DiagramType diagramType, QMenu *contextMenu, QGraphicsItem *parent=nullptr):QGraphicsPolygonItem(parent) {\n        label = new QLabel;\n        pMyProxy = new GraphicsProxyWidget(this);\n        pMyProxy-&gt;setWidget(label);\n        label-&gt;setTextInteractionFlags(Qt::TextEditorInteraction);\n        label-&gt;setStyleSheet(\"QLabel { background-color : red; color : blue; }\");\n        setText(\"I AM A SQARE DADADA\");\n        ...\n    }\n    void setText(const QString &amp; text){\n       label-&gt;setText(text);\n       label-&gt;adjustSize();\n       pMyProxy-&gt;setPos(boundingRect().center()-label-&gt;rect().center());\n    }\n};\n</code></pre>\n\n<p>and then the <code>setItemLabel</code> method would look like this:</p>\n\n<pre><code>void MainWindow::setItemLabel(){\n    if(!scene-&gt;selectedItems().isEmpty())\n    {\n        auto *item = scene-&gt;selectedItems().first();\n        DiagramItem *it = static_cast&lt;DiagramItem *&gt;(item);\n        if(it){\n            QDialog *diag = new QDialog(this);\n            QComboBox *box = new QComboBox();\n            QLineEdit *lt = new QLineEdit();\n            QDialogButtonBox *buttonBox = new QDialogButtonBox(QDialogButtonBox::Ok\n                                                               | QDialogButtonBox::Cancel);\n            QVBoxLayout *mainLayout = new QVBoxLayout();\n            connect(buttonBox, SIGNAL(accepted()), diag, SLOT(accept()));\n            connect(buttonBox, SIGNAL(rejected()), diag, SLOT(reject()));\n            mainLayout-&gt;addWidget(lt);\n            mainLayout-&gt;addWidget(buttonBox);\n\n            diag-&gt;setLayout(mainLayout);\n            if(diag-&gt;exec() == QDialog::Accepted){\n                it-&gt;setText(lt-&gt;text())\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>#include &lt;QApplication&gt;\n#include &lt;QGraphicsProxyWidget&gt;\n#include &lt;QGraphicsView&gt;\n#include &lt;QLabel&gt;\n#include &lt;QTimer&gt;\n\nclass GraphicsProxyWidget: public QGraphicsProxyWidget{\npublic:\n    using QGraphicsProxyWidget::QGraphicsProxyWidget;\n    QRectF boundingRect() const{\n        if(widget())\n            return QRectF(widget()-&gt;rect());\n        return QGraphicsProxyWidget::boundingRect();\n    }\n};\n\nclass DiagramItem: public QGraphicsPolygonItem{\n    QLabel *label;\n    GraphicsProxyWidget *pMyProxy ;\npublic:\n    explicit DiagramItem(QGraphicsItem *parent=nullptr):QGraphicsPolygonItem(parent) {\n        label = new QLabel;\n        pMyProxy = new GraphicsProxyWidget(this);\n        pMyProxy-&gt;setWidget(label);\n        label-&gt;setTextInteractionFlags(Qt::TextEditorInteraction);\n        label-&gt;setStyleSheet(\"QLabel { background-color : red; color : blue; }\");\n        setText(QString(\"I AM A SQARE DADADA\"));\n        setBrush(Qt::green);\n    }\n    void setText(const QString &amp; text){\n       label-&gt;setText(text);\n       label-&gt;adjustSize();\n       pMyProxy-&gt;setPos(boundingRect().center()-label-&gt;rect().center());\n    }\n};\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    QGraphicsView w;\n    QGraphicsScene *scene = new QGraphicsScene;\n    w.setScene(scene);\n    auto it = new DiagramItem;\n    QPolygonF myPolygon({QPointF(-120, -80), QPointF(-70, 80),\n                         QPointF(120, 80), QPointF(70, -80),\n                         QPointF(-120, -80)});\n    it-&gt;setPolygon(myPolygon);\n    scene-&gt;addItem(it);\n    QTimer::singleShot(1000, [it](){\n        it-&gt;setText(\"some text\");\n    });\n    w.show();\n    return a.exec();\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/nZo5g.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nZo5g.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/JSMBR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JSMBR.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 315, "user_id": 6789651, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211116379373630/picture?type=large", "display_name": "Matheus Ianzer", "link": "https://stackoverflow.com/users/6789651/matheus-ianzer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1643, "favorite_count": 0, "accepted_answer_id": 49910888, "answer_count": 1, "score": 1, "last_activity_date": 1524116558, "creation_date": 1524094284, "last_edit_date": 1524116558, "question_id": 49910514, "link": "https://stackoverflow.com/questions/49910514/qlabel-not-resizing-after-changing-its-text", "title": "QLabel not resizing after changing its text", "body": "<p>I have a QLabel centered in a custom QGraphicsPolygonItem and I'm using a QAction to change the labels text, but when the text changes the label size doesn't change, I want it to resize to the size of the new text and keep it centered. Here's my custom item constrctor:</p>\n\n<pre><code>DiagramItem::DiagramItem(DiagramType diagramType, QMenu *contextMenu,\n         QGraphicsItem *parent)\n: QGraphicsPolygonItem(parent){\nQGraphicsProxyWidget* pMyProxy = new QGraphicsProxyWidget(this);\nQLabel *label = new QLabel();\nlabel-&gt;setText(QString(\"I AM A SQARE DADADA\"));\nlabel-&gt;setTextInteractionFlags(Qt::TextEditorInteraction);\nlabel-&gt;setStyleSheet(\"QLabel { background-color : red; color : blue; }\");\npMyProxy-&gt;setWidget(label);\npMyProxy-&gt;setPos(this-&gt;boundingRect().center()-label-&gt;rect().center());\n...\n</code></pre>\n\n<p>Here's the slot I'm using to change the text of the label:</p>\n\n<pre><code>void MainWindow::setItemLabel(){\nif(!scene-&gt;selectedItems().isEmpty())\n{\n    auto *item = scene-&gt;selectedItems().first();\n    if(!(item-&gt;childItems().isEmpty()))\n    {\n        auto proxy = static_cast&lt;QGraphicsProxyWidget *&gt;(item-&gt;childItems().first());\n        if(proxy)\n        {\n            auto label = qobject_cast&lt;QLabel*&gt;(proxy-&gt;widget());\n            if(label)\n            {\n                QDialog *diag = new QDialog(this);\n                QComboBox *box = new QComboBox();\n                QLineEdit *lt = new QLineEdit();\n                QDialogButtonBox *buttonBox = new QDialogButtonBox(QDialogButtonBox::Ok\n                                                                    | QDialogButtonBox::Cancel);\n                QVBoxLayout *mainLayout = new QVBoxLayout();\n                connect(buttonBox, SIGNAL(accepted()), diag, SLOT(accept()));\n                connect(buttonBox, SIGNAL(rejected()), diag, SLOT(reject()));\n                mainLayout-&gt;addWidget(lt);\n                mainLayout-&gt;addWidget(buttonBox);\n\n                diag-&gt;setLayout(mainLayout);\n                if(diag-&gt;exec() == QDialog::Accepted){\n                    QString *usrInpt = new QString();\n                    *usrInpt = lt-&gt;text();\n                    label-&gt;rect().setWidth(usrInpt-&gt;length());\n                    label-&gt;setText(*usrInpt);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Here's what I'm getting as a result, this is before triggering the slot above:\n<a href=\"https://i.stack.imgur.com/PDzlz.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PDzlz.jpg\" alt=\"BeforeSlotTriggere\"></a>\nAnd here's what I'm getting after the slot is triggered:\n<a href=\"https://i.stack.imgur.com/slztp.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/slztp.jpg\" alt=\"AfterSlotTriggered\"></a></p>\n\n<p>This line isn't doing anything too, and I have no idea why:</p>\n\n<pre><code>label-&gt;rect().setWidth(usrInpt-&gt;length());\n</code></pre>\n\n<p>What am I missing?</p>\n"}, {"tags": ["c++", "strtok"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 1, "creation_date": 1524094288, "post_id": 49910482, "comment_id": 86836834, "body": "Is there a reason you don&#39;t do <code>char sep[2];</code> instead of allocating on the heap? (plus you&#39;re leaking since you&#39;ve forgotten to delete it)"}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1524094326, "post_id": 49910482, "comment_id": 86836844, "body": "Why oh why would you do this: <code>char * sep = new char[2];</code>? Of course the obvious has happened: you forgot to delete it and have a memory leak. You might need to show how you call <code>splitStr()</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1524094571, "post_id": 49910482, "comment_id": 86836913, "body": "You should never use strtok in C++, or in C, really."}, {"owner": {"reputation": 19, "user_id": 9666907, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-M1UkdBBYSdI/AAAAAAAAAAI/AAAAAAAAAFs/veGhxmk1jL0/photo.jpg?sz=128", "display_name": "Swailwort", "link": "https://stackoverflow.com/users/9666907/swailwort"}, "edited": false, "score": 0, "creation_date": 1524095151, "post_id": 49910482, "comment_id": 86837066, "body": "I had to create the auxiliar sep[2] to create a constant char for strtok, which is, on itself, a terrible function"}, {"owner": {"reputation": 19, "user_id": 9666907, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-M1UkdBBYSdI/AAAAAAAAAAI/AAAAAAAAAFs/veGhxmk1jL0/photo.jpg?sz=128", "display_name": "Swailwort", "link": "https://stackoverflow.com/users/9666907/swailwort"}, "edited": false, "score": 0, "creation_date": 1524095308, "post_id": 49910482, "comment_id": 86837095, "body": "John, I had to create it to &quot;convert&quot; the char separator to a constant char, in order to use it inside the strtok. I certainly forgot to delete it, but does it really affect the execution of the next sequence of code?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1524096147, "post_id": 49910482, "comment_id": 86837270, "body": "<code>const char sep[] = { separator, &#39;\\0&#39; };</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1524096268, "post_id": 49910482, "comment_id": 86837297, "body": "What problem are you having with the code? The only issue I can see is that there&#39;s no way to tell where the last token is in the returned array."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1524096277, "post_id": 49910482, "comment_id": 86837299, "body": "You allocate <code>sizeRet</code> elements for <code>tot</code>, but nothing in your loop restricts it to accessing only <code>sizeRet</code> elements. You might have a buffer overrun."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1524096348, "post_id": 49910482, "comment_id": 86837321, "body": "@IgorTandetnik We could say that&#39;s the caller&#39;s problem, they should ensure that <code>sizeRet</code> is large enough (e.g. at least <code>strlen(str)</code>)"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1524096499, "post_id": 49910482, "comment_id": 86837365, "body": "@Barmar We could say that, yes. But perhaps the problem the OP is having is precisely that the caller (conspicuously absent from the question) failed to ensure that."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1524096689, "post_id": 49910482, "comment_id": 86837411, "body": "<code>Error reading characters of string</code> doesn&#39;t sound like a standard error, where does that come from?"}, {"owner": {"reputation": 3852, "user_id": 5321363, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10153640801268875/picture?type=large", "display_name": "Rann Lifshitz", "link": "https://stackoverflow.com/users/5321363/rann-lifshitz"}, "edited": false, "score": 0, "creation_date": 1524097189, "post_id": 49910482, "comment_id": 86837534, "body": "perhaps the <code>Error reading characters of string</code> is related to the used IDE ? <a href=\"https://stackoverflow.com/questions/18946459/error-reading-characters-of-string\" title=\"error reading characters of string\">stackoverflow.com/questions/18946459/&hellip;</a>"}, {"owner": {"reputation": 3852, "user_id": 5321363, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10153640801268875/picture?type=large", "display_name": "Rann Lifshitz", "link": "https://stackoverflow.com/users/5321363/rann-lifshitz"}, "edited": false, "score": 0, "creation_date": 1524097309, "post_id": 49910482, "comment_id": 86837563, "body": "i am running the code in question on an onlice c++ compiler, and am only getting seg faults at the first strtok. No mention of <code>Error reading characters of string</code>"}, {"owner": {"reputation": 19, "user_id": 9666907, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-M1UkdBBYSdI/AAAAAAAAAAI/AAAAAAAAAFs/veGhxmk1jL0/photo.jpg?sz=128", "display_name": "Swailwort", "link": "https://stackoverflow.com/users/9666907/swailwort"}, "edited": false, "score": 0, "creation_date": 1524098783, "post_id": 49910482, "comment_id": 86837922, "body": "Using Visual Studio, the problem was not with the Separator, and sizeRet is in fact large enough according to the rest of the code which is specific to calculating it. The problem is specifically when reading the string to which I apply strtok; oddly enough, If I decide to allocate memory for it, it only returns garbage. It&#39;s weird"}, {"owner": {"reputation": 724, "user_id": 9454255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDrB2.png?s=128&g=1", "display_name": "Jack C.", "link": "https://stackoverflow.com/users/9454255/jack-c"}, "edited": false, "score": 0, "creation_date": 1524105408, "post_id": 49910482, "comment_id": 86839465, "body": "This function works for me if <code>str</code> is a real character array (<code>char str[] = &quot;a string&quot;;</code>), but it segfaults if I pass a string literal as <code>str</code>.  This is because <code>strtok</code> <a href=\"http://en.cppreference.com/w/c/string/byte/strtok\" rel=\"nofollow noreferrer\">writes to the string each time it finds a token</a>."}], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 9666907, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-M1UkdBBYSdI/AAAAAAAAAAI/AAAAAAAAAFs/veGhxmk1jL0/photo.jpg?sz=128", "display_name": "Swailwort", "link": "https://stackoverflow.com/users/9666907/swailwort"}, "is_accepted": false, "score": 0, "last_activity_date": 1524174280, "creation_date": 1524174280, "answer_id": 49930686, "question_id": 49910482, "link": "https://stackoverflow.com/questions/49910482/c-error-reading-character-of-string-using-strtok/49930686#49930686", "title": "C++ Error reading character of String using Strtok", "body": "<p>Well, the problem is solved. Decided to stop usign strtok and doind the good old iterative runs avoiding the separators and Voila, it works perfectly. I hate Visual Studio though</p>\n"}], "owner": {"reputation": 19, "user_id": 9666907, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-M1UkdBBYSdI/AAAAAAAAAAI/AAAAAAAAAFs/veGhxmk1jL0/photo.jpg?sz=128", "display_name": "Swailwort", "link": "https://stackoverflow.com/users/9666907/swailwort"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 242, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1524174280, "creation_date": 1524094064, "last_edit_date": 1524099822, "question_id": 49910482, "link": "https://stackoverflow.com/questions/49910482/c-error-reading-character-of-string-using-strtok", "title": "C++ Error reading character of String using Strtok", "body": "<p>The problem here resides with reading the <code>char * nv</code>, which basically points to <code>0xCCCCCCCC</code> with the error <code>Error reading characters of string</code></p>\n\n<p>Already tried other fixes. There are more steps to this code but this is the simplified, overly-specific version:</p>\n\n<pre><code>char** splitStr(char* str, char separator, int sizeRet) {\n    char ** tot = new char *[sizeRet];\n    char * sep = new char[2];\n    sep[0] = separator;\n    sep[1] = '\\0';\n    char * nv;\n    nv = strtok(str, sep);\n    int i = 0;\n    while (nv != NULL) {\n        tot[i] = nv;\n        nv = strtok(NULL, sep);\n        i++;\n    }\n    return tot;\n}\n</code></pre>\n\n<p>Update</p>\n\n<p>The code works in an online compiler perfectly. It doesn't work in Visual Studio 2017 for some odd reason. Will try eliminating some folders from the framework I have to use, and try again.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 3, "creation_date": 1524093201, "post_id": 49910325, "comment_id": 86836546, "body": "You need to tell us exactly what you were expecting to happen and what you get instead. Also, you should make an effort to minimize the program while retaining the problem, to help us realize what&#39;s broken."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1524097430, "post_id": 49910325, "comment_id": 86837602, "body": "If I had time to use a debugger, I could tell you the issues.  Could you use a debugger for me and edit your post with the results?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1524097792, "post_id": 49910325, "comment_id": 86837685, "body": "Don&#39;t use <code>if (something==true)</code> and <code>if (something==false)</code>. Use <code>if (something)</code> and <code>if (!something)</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1524097982, "post_id": 49910325, "comment_id": 86837731, "body": "Use nested loops for <code>pozX</code> and <code>posI</code>, instead of trying to do them in the same loop."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1524098096, "post_id": 49910325, "comment_id": 86837759, "body": "Your method of not counting the cell as a neighbor of itself is wrong. You can just subtract 1 from <code>neighbours</code> when <code>positions[x][i]</code> is true."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 2, "creation_date": 1524098127, "post_id": 49910325, "comment_id": 86837765, "body": "Your code clears all new_positions each time through the loop and then if position=true it checks for neighbours - if there are &lt;2 or &gt;3 it reclears new_position but it never does anything if the position should stay alive.  The bit that makes new cells when there are 3 neighbours looks right."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1524098274, "post_id": 49910325, "comment_id": 86837797, "body": "BTW, using X and I is confusing. Usually we call the two axes on a grid X and Y."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9666840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d84aaa24063250192e4650c35b8483de?s=128&d=identicon&r=PG&f=1", "display_name": "sptls", "link": "https://stackoverflow.com/users/9666840/sptls"}, "edited": false, "score": 0, "creation_date": 1524139380, "post_id": 49911295, "comment_id": 86856755, "body": "Thank you for your in-deepth answer. I actually manged to solve it myself yesterday. Step by step printing every change and analyzing what is wrong. It took me few hours ;s I need to start using debugger as you suggested. There was two main issues: one was if statment that was supose to check if current position is diffrent from current analized cell so it won&#39;t cout itself as neighbour. I should have used OR instead AND. The second issue, as you mentioned, I din&#39;t check if cell should stay alive, so in next loop they all would reset. Again;thank you for your answer it was very helpful."}], "tags": [], "owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "is_accepted": true, "score": 0, "last_activity_date": 1524101107, "creation_date": 1524101107, "answer_id": 49911295, "question_id": 49910325, "link": "https://stackoverflow.com/questions/49910325/conways-game-of-life-c-code-check/49911295#49911295", "title": "Conway&#39;s Game of Life C++ Code check", "body": "<p>How I debugged the code was by using <a href=\"https://www.onlinegdb.com/\" rel=\"nofollow noreferrer\">https://www.onlinegdb.com/</a>\nLearning to use a debugger is really valuable...</p>\n\n<p>What I have done includes:</p>\n\n<ul>\n<li>I removed the kbhit() test and the Sleep() call and cls because I am not using a windows compiler.  You will have to put those back if you use my code.</li>\n<li>I changed the bit that displays the board to give it line numbers and to display something in the blank cells and I changed it to avoid calling endl to flush the buffer for every single line.</li>\n<li><p>I changed the way neighbours were calculated.  I think you were subtracting 1 to take care of the extra add that was done - I think it is better to just use an if statement to avoid adding it in the first place.  Here is my version:</p>\n\n<pre><code>            int neighbours=0;\n            for(int pozI=i-1; pozI&lt;=i+1; pozI++)\n                for(int pozX=x-1; pozX&lt;=x+1; pozX++)\n                    if(pozX!=x || pozI!=i) // don't check position[i][x]\n                        if(pozX&gt;=0 &amp;&amp; pozX&lt;50 &amp;&amp; pozI&gt;=0 &amp;&amp; pozI&lt;50)\n                            if(positions[pozI][pozX]==true)\n                                neighbours++;\n</code></pre></li>\n<li><p>I changed the way the new board was calculated.  You weren't ever setting the new position to true if it should stay alive.  Here is my version:</p>\n\n<pre><code>        // set the new board\n        new_positions[i][x]=false;\n        if(positions[i][x]==true)\n            if(neighbours==2 || neighbours==3)\n                new_positions[i][x]=true; // staying alive\n        if(positions[i][x]==false)\n            if(neighbours==3)\n                new_positions[i][x]=true; // being born\n</code></pre></li>\n</ul>\n\n<p>What I have not done includes:</p>\n\n<ul>\n<li>There are a lot of stylistic issues and whether they are changed is debateable depending on what you consider best practice.  Things like the variable names and having everything in main() and having a global <code>using namespace std;</code> and using a C style array instead of a std::array are all things that we could argue about but that belongs on codereview.stackexchange.com so I haven't changed any of that.</li>\n</ul>\n\n<p>Here is the full program:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std; \n\nint main()\n{\n    bool positions[50][50], new_positions[50][50];\n\n    // clear the board\n    for(int i=0; i&lt;50; i++)\n        for(int x=0; x&lt;50; x++)\n            positions[i][x]=false;\n\n    //This is some patterns i've put manually into array just for testing, \n    //they should \"be alive\" at least for 3-4 cycles    \n    positions[5][5]=true;\n    positions[5][6]=true;\n    positions[5][7]=true;\n    positions[6][5]=true;\n    positions[5][8]=true;\n    positions[5][9]=true;\n    positions[5][10]=true;\n    positions[5][11]=true;\n\n    positions[5][5]=true;\n    positions[6][5]=true;\n    positions[7][5]=true;\n    positions[5][6]=true;\n    positions[8][5]=true;\n    positions[5][7]=true;\n    positions[6][8]=true;\n    positions[7][9]=true;\n    positions[8][10]=true;\n    positions[9][5]=true;\n\n    positions[11][11]=true;\n    positions[11][12]=true;\n    positions[12][11]=true;\n    positions[12][12]=true;\n\n    // print the initial board\n    for(int i=0; i&lt;50; i++) {\n        cout &lt;&lt; setw(4) &lt;&lt; i &lt;&lt; setw(1) &lt;&lt; \" \";\n        for(int x=0; x&lt;50; x++)\n            cout &lt;&lt; (positions[i][x]==true?\"X\":\".\");\n        cout &lt;&lt; \"\\n\";\n    }\n    cout &lt;&lt; endl;\n\n    for(int steps=0; steps&lt;15; steps++) {\n        for(int i=0; i&lt;50; i++) {\n            for(int x=0; x&lt;50; x++) {\n\n                // count the neighbours\n                int neighbours=0;\n                for(int pozI=i-1; pozI&lt;=i+1; pozI++)\n                    for(int pozX=x-1; pozX&lt;=x+1; pozX++)\n                        if(pozX!=x || pozI!=i) // don't check position[i][x]\n                            if(pozX&gt;=0 &amp;&amp; pozX&lt;50 &amp;&amp; pozI&gt;=0 &amp;&amp; pozI&lt;50)\n                                if(positions[pozI][pozX]==true)\n                                    neighbours++;\n\n                // set the new board\n                new_positions[i][x]=false;\n                if(positions[i][x]==true)\n                    if(neighbours==2 || neighbours==3)\n                        new_positions[i][x]=true; // staying alive\n                if(positions[i][x]==false)\n                    if(neighbours==3)\n                        new_positions[i][x]=true; // being born\n            }\n        }\n\n        // print the old board and the new one\n        for(int i=0; i&lt;50; i++) {\n            cout &lt;&lt; setw(4) &lt;&lt; i &lt;&lt; setw(1) &lt;&lt; \" \";\n            for(int x=0; x&lt;50; x++)\n                cout &lt;&lt; (positions[i][x]==true?\"X\":\".\");\n            cout &lt;&lt; \"    \";\n            for(int x=0; x&lt;50; x++)\n                cout &lt;&lt; (new_positions[i][x]==true?\"X\":\".\");\n            cout &lt;&lt; \"\\n\";\n        }\n        cout &lt;&lt; endl;\n\n        // save the generation\n        for(int i=0; i&lt;50; i++)\n            for(int x=0; x&lt;50; x++)\n                positions[i][x]=new_positions[i][x];\n    }\n\n    // print the final board\n    for(int i=0; i&lt;50; i++) {\n        cout &lt;&lt; setw(4) &lt;&lt; i &lt;&lt; setw(1) &lt;&lt; \" \";\n        for(int x=0; x&lt;50; x++)\n            cout &lt;&lt; (positions[i][x]==true?\"X\":\".\");\n        cout &lt;&lt; \"\\n\";\n    }\n    cout &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9666840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d84aaa24063250192e4650c35b8483de?s=128&d=identicon&r=PG&f=1", "display_name": "sptls", "link": "https://stackoverflow.com/users/9666840/sptls"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 473, "favorite_count": 1, "accepted_answer_id": 49911295, "answer_count": 1, "score": -1, "last_activity_date": 1524101107, "creation_date": 1524092943, "last_edit_date": 1524097569, "question_id": 49910325, "link": "https://stackoverflow.com/questions/49910325/conways-game-of-life-c-code-check", "title": "Conway&#39;s Game of Life C++ Code check", "body": "<p>I'll start by saying that I'm a begginer. I've started learning 2 weeks ago. Today I found some video on YT about this Conway's Game of Life. With things I've learned so far I tought I'll give it a go. So I've made this(code below). It doesn't work like it should be and I'm out of ideas why. Could someone check this code below and tell me what's wrong? I don't want a complete solution, just a tip what I should check.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;windows.h&gt;\n#include &lt;conio.h&gt;\n\nusing namespace std; \n\nint main()\n{\n    bool positions[50][50], new_positions[50][50];\n    int neighbours=0;\n\n    for(int i=0; i&lt;50; i++) {\n        for(int x=0; x&lt;50; x++) positions[i][x]=false;\n    }\n\n    for(int i=0; i&lt;50; i++) {\n        for(int x=0; x&lt;50; x++) new_positions[i][x]=false;\n    }\n\n    //This is some patterns i've put manually into array just for testing, \n    //they should \"be alive\" at least for 3-4 cycles    \n    positions[5][5]=true;\n    positions[5][6]=true;\n    positions[5][7]=true;\n    positions[6][5]=true;\n    positions[5][8]=true;\n    positions[5][9]=true;\n    positions[5][10]=true;\n    positions[5][11]=true;\n\n    positions[5][5]=true;\n    positions[6][5]=true;\n    positions[7][5]=true;\n    positions[5][6]=true;\n    positions[8][5]=true;\n    positions[5][7]=true;\n    positions[6][8]=true;\n    positions[7][9]=true;\n    positions[8][10]=true;\n    positions[9][5]=true;\n\n\n    positions[11][11]=true;\n    positions[11][12]=true;\n    positions[12][11]=true;\n    positions[12][12]=true;\n\n\n    while(!(kbhit())) {\n\n        for(int i=0; i&lt;50; i++) {\n            for(int x=0; x&lt;50; x++) {\n                for(int pozX=x-1, pozI=i-1; pozI&lt;=i+1; pozX++) {\n                    //if(pozX!=x &amp;&amp; pozI!=i) {      //this \"if\" doesn't work, don't know why                \n                        if(pozX&gt;=0 &amp;&amp; pozX&lt;50 &amp;&amp; pozI&gt;=0 &amp;&amp; pozI&lt;50) {\n                            if(positions[pozI][pozX]==true) neighbours++;\n                        }\n                    //}\n                    if(pozX==x+1) {\n                        pozX=x-1;\n                        pozI++;\n                    }\n                }\n                if(neighbours==1) neighbours=0;//had to use this instead of previously mentioned if\n                if(positions[i][x]==true) {\n                    if((neighbours&gt;3) || (neighbours&lt;2)) new_positions[i][x]=false;\n                }\n                if(positions[i][x]==false &amp;&amp; neighbours==3) new_positions[i][x]=true;\n                neighbours=0;\n            }\n        }\n\n        for(int i=0; i&lt;50; i++) {\n            for(int x=0; x&lt;50; x++) {\n                if(new_positions[i][x]==true) cout &lt;&lt; \"X\";\n                else cout &lt;&lt; \" \";\n            }\n            cout &lt;&lt; endl;\n        }\n\n        for(int i=0; i&lt;50; i++) {\n            for(int x=0; x&lt;50; x++) positions[i][x]=false; //clears all cells\n        }\n\n        for(int i=0; i&lt;50; i++) {\n            for(int x=0; x&lt;50; x++) positions[i][x]=new_positions[i][x]; //sets cell status from this cycle, I know I could do this in one loop, but it is more clear to me this way\n        }\n\n        for(int i=0; i&lt;50; i++) {\n            for(int x=0; x&lt;50; x++) new_positions[i][x]=false; //clears this cycle \"buffor\"\n        }   \n\n        Sleep(3000);\n        system(\"cls\");\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1524092748, "post_id": 49910262, "comment_id": 86836436, "body": "Your question is really not clear, but EOF is not the sequence  of characters &quot;EOF&quot; - it&#39;s a (to simplify greatly) special keypress, such as Ctrl-D or Ctrl-Z, depending on platform."}, {"owner": {"reputation": 108, "user_id": 2724914, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001168396439/picture?type=large", "display_name": "Aflah Bhari", "link": "https://stackoverflow.com/users/2724914/aflah-bhari"}, "edited": false, "score": 1, "creation_date": 1524093036, "post_id": 49910262, "comment_id": 86836511, "body": "According to this: <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/get\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/io/basic_istream/get</a>  cin.get() shouldn&#39;t give you an EOF character when it hits an EOF. Which I think would mean you shouldn&#39;t really reach your != EOF condition."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1524093633, "post_id": 49910262, "comment_id": 86836672, "body": "Yes, the comparison should be using <code>!= std::istream::traits_type::eof()</code> (aka <code>!= std::char_traits&lt;char&gt;::eof()</code>) instead of <code>!= EOF</code>. A better option is to use the other overloaded version of <code>get()</code> that returns a <code>char</code> by reference instead: <code>while (cin.get(character1)) { ... }</code>, but then the final value of <code>character1</code> will be indeterminate once the loop breaks."}, {"owner": {"reputation": 73, "user_id": 9282793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9432d30a6fc40af643d290e5305c50ec?s=128&d=identicon&r=PG&f=1", "display_name": "MarionaGlenni", "link": "https://stackoverflow.com/users/9282793/marionaglenni"}, "edited": false, "score": 0, "creation_date": 1524093771, "post_id": 49910262, "comment_id": 86836703, "body": "I got where my misunderstanding was coming from. It was a mistake on my part. Thanks all for the input"}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1524094246, "post_id": 49910262, "comment_id": 86836822, "body": "I was a bit surprised to see on Linux it does not work a character at a time on the terminal, until I remembered <code>stty</code> and <code>termios</code>. Linux consoles are a terminal, and they pretend to be a serial terminal from the 1970s. Their default mode is line by line. So no input is actually sent until you press Return. Unless you run <code>stty -icanon</code>, or use the functions in <code>man termios</code> to turn off ICANON mode. But warning, once out of ICANON mode you cannot use Ctrl-D for end of file."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 9282793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9432d30a6fc40af643d290e5305c50ec?s=128&d=identicon&r=PG&f=1", "display_name": "MarionaGlenni", "link": "https://stackoverflow.com/users/9282793/marionaglenni"}, "edited": false, "score": 0, "creation_date": 1524093810, "post_id": 49910398, "comment_id": 86836712, "body": "Thanks Duthomhas. I understood everything now"}], "tags": [], "owner": {"reputation": 4313, "user_id": 2706707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BoAxS.gif?s=128&g=1", "display_name": "D&#250;thomhas", "link": "https://stackoverflow.com/users/2706707/d%c3%bathomhas"}, "is_accepted": false, "score": 1, "last_activity_date": 1524093546, "creation_date": 1524093546, "answer_id": 49910398, "question_id": 49910262, "link": "https://stackoverflow.com/questions/49910262/the-use-of-cin-get-to-read-a-characters/49910398#49910398", "title": "The use of cin.get() to read a character(s)", "body": "<p>EOF/cin.eof() are not the same as the ASCII/tty EOF character(s). In both cases, the value is meaningful only in context, and may not actually exist otherwise.</p>\n\n<p>On Windows EOF is signaled with Ctrl+Z.<br>\nOn *nixen, it is signaled with Ctrl+D.</p>\n\n<p>You cannot print it to the terminal either way. Tell the user to press the correct keys. And remember, the value of <code>EOF</code> has absolutely no relation to anything in the input stream (except being unrepresentable as a valid character value).</p>\n\n<p>You see no output until you signal EOF because terminal input is, by default, line-buffered. Try pressing Enter during your input sequence to see the effect. If you wish to play with unbuffered input then that is a (lenghty) answer to another question.</p>\n"}], "owner": {"reputation": 73, "user_id": 9282793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9432d30a6fc40af643d290e5305c50ec?s=128&d=identicon&r=PG&f=1", "display_name": "MarionaGlenni", "link": "https://stackoverflow.com/users/9282793/marionaglenni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 733, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1524095245, "creation_date": 1524092449, "last_edit_date": 1524093524, "question_id": 49910262, "link": "https://stackoverflow.com/questions/49910262/the-use-of-cin-get-to-read-a-characters", "title": "The use of cin.get() to read a character(s)", "body": "<p>Can someone explain to me how cin.get() works below. My thinking  is that cin.get() takes in a character from the keyboard (when you type it), assigns it to character1, then compares it to EOF, if this comparison is not equal, it prints it, then goes back to the while loop and does thesame until the EOF character is entered. What I expected to see is characters printed each time I enter them until EOF is entered but I am suprised to see that the program takes in characters until I enter EOF then it prints them all. </p>\n\n<pre><code>      int character1; \n      cout &lt;&lt; \"Before input, cin.eof() is \" &lt;&lt; cin.eof()&lt;&lt; endl\n         &lt;&lt; \"Enter a sentence followed by end-of-file:\" &lt;&lt; endl;\n      while ((character1 = cin.get()) != EOF)   \n             cout.put(character1);\n\n        cout &lt;&lt; \"\\nEOF in this system is: \" &lt;&lt; character &lt;&lt; endl;\n</code></pre>\n"}, {"tags": ["c++", "priority-queue"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1524092203, "post_id": 49910185, "comment_id": 86836270, "body": "Is what you really want to do to change the order of things in the queue after they have been added to the queue?"}, {"owner": {"reputation": 730, "user_id": 8270416, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/876b251bdfdc25fbda57c01009c054be?s=128&d=identicon&r=PG&f=1", "display_name": "ttemple", "link": "https://stackoverflow.com/users/8270416/ttemple"}, "edited": false, "score": 0, "creation_date": 1524092215, "post_id": 49910185, "comment_id": 86836272, "body": "top() returns an iterator, I think.  you will need to dereference.  try *pq.top..."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1524092226, "post_id": 49910185, "comment_id": 86836273, "body": "The placement of an item in a priority queue is decided by its value. The safest, easiest way to update this position is to pop it off, change it, push it back in."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 730, "user_id": 8270416, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/876b251bdfdc25fbda57c01009c054be?s=128&d=identicon&r=PG&f=1", "display_name": "ttemple", "link": "https://stackoverflow.com/users/8270416/ttemple"}, "edited": false, "score": 0, "creation_date": 1524092325, "post_id": 49910185, "comment_id": 86836307, "body": "@ttemple You think wrong."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1524092350, "post_id": 49910185, "comment_id": 86836317, "body": "No, this is not what a priority queue is for. Whatever problem you&#39;re trying to solve with this, either it&#39;s the wrong solution, or a priority queue is the wrong container for this."}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1524092741, "post_id": 49910185, "comment_id": 86836434, "body": "As a general rule of thumb, you should always prefer to use <code>std::vector</code> unless you have severe cause to use something else. We can&#39;t see exactly what you are doing with your <code>priority_queue</code>, but it may be time to think &quot;Is this the right tool for the job?&quot;"}, {"owner": {"reputation": 35, "user_id": 9666826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9839862a5e0825ce306f54eeb0deee6b?s=128&d=identicon&r=PG&f=1", "display_name": "JDoe4444", "link": "https://stackoverflow.com/users/9666826/jdoe4444"}, "reply_to_user": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1524094264, "post_id": 49910185, "comment_id": 86836831, "body": "@Tas Do you know if Heaps will allow you to edit an element once the Object has been inserted onto the heap? I ask this because I need a container with a comparator(i.e. priority queue)."}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1524106786, "post_id": 49910185, "comment_id": 86839730, "body": "Please avoid the <a href=\"https://meta.stackexchange.com/q/66377\">XY problem</a> and give us the big picture of what you&#39;re trying to do, besides the specific problem and what you&#39;re currently trying. I think you can actually update a value in a heap, but whatever you&#39;re trying to do, using standard library containers will be much easier than making your own heap."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 9666826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9839862a5e0825ce306f54eeb0deee6b?s=128&d=identicon&r=PG&f=1", "display_name": "JDoe4444", "link": "https://stackoverflow.com/users/9666826/jdoe4444"}, "edited": false, "score": 0, "creation_date": 1524208184, "post_id": 49910278, "comment_id": 86887448, "body": "Would I be able to insert a pointer for the priority queue and create another pointer pointing to the same data on the queue, so I can edit it outside the queue?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 35, "user_id": 9666826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9839862a5e0825ce306f54eeb0deee6b?s=128&d=identicon&r=PG&f=1", "display_name": "JDoe4444", "link": "https://stackoverflow.com/users/9666826/jdoe4444"}, "edited": false, "score": 0, "creation_date": 1524214134, "post_id": 49910278, "comment_id": 86890856, "body": "@JDoe4444 As long as you don&#39;t touch any data used by <code>Compare</code>, sure you could do that."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 0, "last_activity_date": 1524092598, "creation_date": 1524092598, "answer_id": 49910278, "question_id": 49910185, "link": "https://stackoverflow.com/questions/49910185/how-can-i-edit-object-members-in-a-priority-queue-once-it-has-been-pushed-onto-t/49910278#49910278", "title": "How can I edit object members in a priority queue once it has been pushed onto the queue", "body": "<blockquote>\n  <p>How can I edit object members in a priority queue once it has been pushed onto the queue</p>\n</blockquote>\n\n<p>You can not modify non-mutable members of an object within a priority queue, because <code>top</code> returns a const reference.</p>\n\n<p>What you can do, is make a copy of the <code>top</code>, then <code>pop</code> it, and <code>push</code> the modified copy.</p>\n\n<p>Or, you could use a mutable member, but if you do so, remember that <code>Compare</code> must not use that member.</p>\n"}], "owner": {"reputation": 35, "user_id": 9666826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9839862a5e0825ce306f54eeb0deee6b?s=128&d=identicon&r=PG&f=1", "display_name": "JDoe4444", "link": "https://stackoverflow.com/users/9666826/jdoe4444"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524092598, "creation_date": 1524091958, "question_id": 49910185, "link": "https://stackoverflow.com/questions/49910185/how-can-i-edit-object-members-in-a-priority-queue-once-it-has-been-pushed-onto-t", "title": "How can I edit object members in a priority queue once it has been pushed onto the queue", "body": "<p>I'm still new to C++. I would like to modify the variable \"change\" once I have already pushed the struct A onto the priority queue. Can this be done?\nThis is what I have tried</p>\n\n<pre><code>pq.top().change = 200; //But it says this is only readable\n</code></pre>\n\n<p>This is the what I have:</p>\n\n<pre><code>priority_queue&lt;A, vector&lt;A&gt;, comparator&gt; pq;\n\nstruct A{\n    vector&lt;B&gt; list;\n    int change = 0;\n};\n</code></pre>\n\n<p>Any guidence would be helpful. Thank you.</p>\n"}, {"tags": ["c++", "for-loop", "nodes", "doubly-linked-list"], "comments": [{"owner": {"reputation": 10010, "user_id": 1894021, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JXt2j.jpg?s=128&g=1", "display_name": "Isaac", "link": "https://stackoverflow.com/users/1894021/isaac"}, "edited": false, "score": 4, "creation_date": 1524092069, "post_id": 49910180, "comment_id": 86836234, "body": "You might want to go to your instructor."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1524092074, "post_id": 49910180, "comment_id": 86836237, "body": "Are you asking how to call <code>insert()</code> in a loop? You would store the <code>Node*</code> pointers in an array, and then loop through the array"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1524092560, "post_id": 49910180, "comment_id": 86836377, "body": "One of the beauties of a loop is <a href=\"https://en.wikipedia.org/wiki/Scope_(computer_science)\" rel=\"nofollow noreferrer\">it is scoped</a>. You can use the same name over and over again."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 9666782, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Daniel Nguyen", "link": "https://stackoverflow.com/users/9666782/daniel-nguyen"}, "edited": false, "score": 0, "creation_date": 1524094257, "post_id": 49910423, "comment_id": 86836825, "body": "void insert(Node *newnode, Node *pred);  It&#39;s suppose to be doubly linked."}, {"owner": {"reputation": 154, "user_id": 2531457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cffbbbd18678b2ce23a0c06ca17c438c?s=128&d=identicon&r=PG&f=1", "display_name": "Scorta", "link": "https://stackoverflow.com/users/2531457/scorta"}, "reply_to_user": {"reputation": 41, "user_id": 9666782, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Daniel Nguyen", "link": "https://stackoverflow.com/users/9666782/daniel-nguyen"}, "edited": false, "score": 0, "creation_date": 1524100633, "post_id": 49910423, "comment_id": 86838378, "body": "Okay, see the user4581301&#39;s answer. He/she makes it very clear."}], "tags": [], "owner": {"reputation": 154, "user_id": 2531457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cffbbbd18678b2ce23a0c06ca17c438c?s=128&d=identicon&r=PG&f=1", "display_name": "Scorta", "link": "https://stackoverflow.com/users/2531457/scorta"}, "is_accepted": false, "score": 0, "last_activity_date": 1524093709, "creation_date": 1524093709, "answer_id": 49910423, "question_id": 49910180, "link": "https://stackoverflow.com/questions/49910180/doubly-linked-list-with-for-loop-c/49910423#49910423", "title": "doubly linked list with for loop c++", "body": "<p>I don't really understand what mylist.insert(a, b) does? Insert node a into to position b? Normally, to do what you said, we use the code as below:</p>\n\n<pre><code>for (size_t i = 0; i &lt; number_of_nodes_you_want_to_insert; ++i) {\n    Node *n = new Node(i);\n    mylist.insert(n);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 0, "last_activity_date": 1524104126, "last_edit_date": 1524104126, "creation_date": 1524095340, "answer_id": 49910626, "question_id": 49910180, "link": "https://stackoverflow.com/questions/49910180/doubly-linked-list-with-for-loop-c/49910626#49910626", "title": "doubly linked list with for loop c++", "body": "<p>The names, identifiers, mean nothing. They are simply place holders. We use nice names because it makes things easier for the human brain to understand what the variable is for. The computer does not care. It chucks the name as soon as possible and replaces it with an address, an offset from an address or a hardware register.</p>\n\n<p>You cannot use the same identifier within the same scope, but the scope of a loop ends with the end of the loop and then starts over again recreating any identifiers if the loop requires another iteration.</p>\n\n<p>What goes in the loop? Obviously we need to create a <code>Node</code> and insert the node, but we also need to keep track of where to insert the next node. This leads to a semi-bug in the teacher-provided example: </p>\n\n<pre><code>DL_List mylist;\nif (mylist.empty()) // list better not be constructed with pre-existing nodes\n    mylist.insert(n1, mylist.head); // because this doesn't happen if it isn't empty\nmylist.insert(n2, n1); // and where is n1, Hmmm? We might not have added it.\n</code></pre>\n\n<p><code>n1</code> wouldn't be in the list and if it's not in the list, then linking <code>n2</code> to <code>n1</code> for the list isn't such a good idea.</p>\n\n<p>My pitch has slightly different behaviour, but at least it isn't broken behaviour. I suggest always inserting the first node at the beginning of the list., If there happens to be stuff already in the list, so be it. It gets pushed toward the end of the list.</p>\n\n<p>In this case you need one extra place-holder to keep track of where to insert, and the value of this placeholder needs to remain intact between iterations of the loop. To allow it to persist we define it outside the loop.</p>\n\n<pre><code>Node * where_to_insert = mylist.head;\nfor (int count = 1; cows.not_home(); count++)\n{\n    Node * n = new Node(count);\n    mylist.insert(n, where_to_insert);\n    where_to_insert = n;\n}\n</code></pre>\n\n<p>The above will loop and add nodes until the cows come home. Hopefully they will come home before count overflows, but this eventuality can be avoided by using a more relevant terminating condition for the loop.</p>\n"}], "owner": {"reputation": 41, "user_id": 9666782, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Daniel Nguyen", "link": "https://stackoverflow.com/users/9666782/daniel-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 348, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1524104126, "creation_date": 1524091926, "question_id": 49910180, "link": "https://stackoverflow.com/questions/49910180/doubly-linked-list-with-for-loop-c", "title": "doubly linked list with for loop c++", "body": "<p>I just learned about pointers in c++, and my instructor told to create a doubly linked list with a for loop. However, the only example I was given was</p>\n\n<pre><code>    Node *n1 = new Node(1);\n    Node *n2 = new Node(2);\n    Node *n3 = new Node(3);\n    Node *n4 = new Node(4);\n    Node *n5 = new Node(5);\n    DL_List mylist;\n    if (mylist.empty())\n        mylist.insert(n1, mylist.head);\n    mylist.insert(n2, n1);\n    mylist.insert(n3, n2);\n    mylist.insert(n4, n3);\n    mylist.insert(n5, n4);\n    mylist.display();\n</code></pre>\n\n<p>I have no idea how to set a for loop for this because I don't know how to name them in the loop, or how I would connect them.</p>\n"}, {"tags": ["c++", "arduino"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1524091574, "post_id": 49910084, "comment_id": 86836111, "body": "Store your objects in an array, then it&#39;ll just be <code>Objects[Argument].ClassVariable</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 5, "creation_date": 1524091606, "post_id": 49910084, "comment_id": 86836121, "body": "Don&#39;t invent some syntax, post some real code that illustrates how you want to call the function."}, {"owner": {"reputation": 37, "user_id": 9622322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75b7b0230b96ea0ee843a4979061d6c1?s=128&d=identicon&r=PG&f=1", "display_name": "Cammack", "link": "https://stackoverflow.com/users/9622322/cammack"}, "edited": false, "score": 0, "creation_date": 1524093685, "post_id": 49910084, "comment_id": 86836685, "body": "No invented syntax - in my code, the function: <code>void Function() { Variable = Object1.ClassVariable;}</code> returns the desired result, setting the value of <code>Variable</code> equal to the value of <code>Object1.ClassVariable</code>. I only want to know if I can use a function argument to set which object <code>ClassVariable</code> is to be read from."}, {"owner": {"reputation": 37, "user_id": 9622322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75b7b0230b96ea0ee843a4979061d6c1?s=128&d=identicon&r=PG&f=1", "display_name": "Cammack", "link": "https://stackoverflow.com/users/9622322/cammack"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1524095072, "post_id": 49910084, "comment_id": 86837046, "body": "@Igor, I might end up with 15 objects, each of which has 9 member variables defined. Is there an easy way to set up an array of objects as you suggest? Trying to read the variables from the class objects in order to create such an array seems to need the same solution as the initial problem?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1524095904, "post_id": 49910084, "comment_id": 86837215, "body": "Can you show the definitions of those objects and variables? It&#39;s not clear what you are trying to achieve."}, {"owner": {"reputation": 820, "user_id": 773334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e3f02e2b54328999774ae28a1a7ec2f?s=128&d=identicon&r=PG", "display_name": "JACH", "link": "https://stackoverflow.com/users/773334/jach"}, "edited": false, "score": 0, "creation_date": 1524096863, "post_id": 49910084, "comment_id": 86837452, "body": "The code you have doesn&#39;t work. I guess that&#39;s why Neil mentioned that much. You can&#39;t create a function that creates an object name at run time, because C++ is not an interpreted language (that is, you compile it, and your object names become just a reference in memory. In other words, they become meaningless to the execution). There are better ways to return attributes (possibly using interfaces). But I want to understand what is what you&#39;re trying to do. The piece of code you show doesn&#39;t tell the whole story"}, {"owner": {"reputation": 820, "user_id": 773334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e3f02e2b54328999774ae28a1a7ec2f?s=128&d=identicon&r=PG", "display_name": "JACH", "link": "https://stackoverflow.com/users/773334/jach"}, "edited": false, "score": 0, "creation_date": 1524096998, "post_id": 49910084, "comment_id": 86837496, "body": "Furthermore: having classes (or objects) without meaningful names is a bad idea. And believe me: object1, object2, object3 are not meaningful at all (and the path to hell, if you ask me)"}, {"owner": {"reputation": 37, "user_id": 9622322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75b7b0230b96ea0ee843a4979061d6c1?s=128&d=identicon&r=PG&f=1", "display_name": "Cammack", "link": "https://stackoverflow.com/users/9622322/cammack"}, "reply_to_user": {"reputation": 820, "user_id": 773334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e3f02e2b54328999774ae28a1a7ec2f?s=128&d=identicon&r=PG", "display_name": "JACH", "link": "https://stackoverflow.com/users/773334/jach"}, "edited": false, "score": 0, "creation_date": 1524097942, "post_id": 49910084, "comment_id": 86837723, "body": "@JACH I&#39;ll post the full code, I just thought it more likely to obfuscate than help. The function in question is setPrevEncVal (line 291). Line 293 is where I&#39;m trying to get a pointer to work The class is <code>Modes</code>, the true object names being used are <code>mode1</code>, <code>mode2</code> etc."}, {"owner": {"reputation": 820, "user_id": 773334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e3f02e2b54328999774ae28a1a7ec2f?s=128&d=identicon&r=PG", "display_name": "JACH", "link": "https://stackoverflow.com/users/773334/jach"}, "edited": false, "score": 0, "creation_date": 1524098244, "post_id": 49910084, "comment_id": 86837790, "body": "I posted a suggestion. It will require a learning curve, but it will be worth it. Also, don&#39;t use magic numbers <a href=\"https://en.wikipedia.org/wiki/Magic_number_(programming)\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Magic_number_(programming)</a> . At the very minimum, use an enum or defines. Just to be clear, in my answer I used &quot;MODE_1&quot;... that&#39;s also a &quot;magic number&quot;. Use meaningful descriptions instead"}, {"owner": {"reputation": 37, "user_id": 9622322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75b7b0230b96ea0ee843a4979061d6c1?s=128&d=identicon&r=PG&f=1", "display_name": "Cammack", "link": "https://stackoverflow.com/users/9622322/cammack"}, "edited": false, "score": 0, "creation_date": 1524098347, "post_id": 49910084, "comment_id": 86837814, "body": "As added above, the reason I want to do what I&#39;m asking is so that a previously stored value (the parameters for other functions) can be written to the variable being used to store a rotary encoder&#39;s position, so that when the user cycles through the settings, the previous value is returned before turning the encoder dial changes it to a new value."}, {"owner": {"reputation": 37, "user_id": 9622322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75b7b0230b96ea0ee843a4979061d6c1?s=128&d=identicon&r=PG&f=1", "display_name": "Cammack", "link": "https://stackoverflow.com/users/9622322/cammack"}, "reply_to_user": {"reputation": 820, "user_id": 773334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e3f02e2b54328999774ae28a1a7ec2f?s=128&d=identicon&r=PG", "display_name": "JACH", "link": "https://stackoverflow.com/users/773334/jach"}, "edited": false, "score": 0, "creation_date": 1524098523, "post_id": 49910084, "comment_id": 86837851, "body": "Thanks @JACH! Learning curve is good, all of this is new to me anyway, I&#39;ve never used classes before."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 9622322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75b7b0230b96ea0ee843a4979061d6c1?s=128&d=identicon&r=PG&f=1", "display_name": "Cammack", "link": "https://stackoverflow.com/users/9622322/cammack"}, "edited": false, "score": 0, "creation_date": 1524136330, "post_id": 49910938, "comment_id": 86854618, "body": "Let&#39;s see if I&#39;m following your example... Each mode is defined as a separate class, <code>AMeaningfulName</code> etc, this is where the settings for each mode will be stored. Another class <code>ModeFactory</code> creates objects of these separate mode classes, depending on the mode selected by the user. The separate mode classes are called by the virtual function in <code>Mode</code>, this is where the code to change each mode class variable is. The main code will use <code>ModeFactory</code> to create mode objects, will tell <code>Mode</code> which separate mode class it should be using, and will send the outputs to the display etc. Am I close?"}, {"owner": {"reputation": 820, "user_id": 773334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e3f02e2b54328999774ae28a1a7ec2f?s=128&d=identicon&r=PG", "display_name": "JACH", "link": "https://stackoverflow.com/users/773334/jach"}, "reply_to_user": {"reputation": 37, "user_id": 9622322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75b7b0230b96ea0ee843a4979061d6c1?s=128&d=identicon&r=PG&f=1", "display_name": "Cammack", "link": "https://stackoverflow.com/users/9622322/cammack"}, "edited": false, "score": 1, "creation_date": 1524147427, "post_id": 49910938, "comment_id": 86862441, "body": "Yes. That&#39;s the idea. In this case, Mode is the interface that your child classes implement. Then you add the specifics to each class. Then your main code doesn&#39;t care if you are executing an object of class1 or class2, as long as it has the methods in your interface. It&#39;s a very common and very useful practice. Take a look at this explanation, which also made me laugh <a href=\"https://stackoverflow.com/a/14244705/773334\">stackoverflow.com/a/14244705/773334</a>"}], "tags": [], "owner": {"reputation": 820, "user_id": 773334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e3f02e2b54328999774ae28a1a7ec2f?s=128&d=identicon&r=PG", "display_name": "JACH", "link": "https://stackoverflow.com/users/773334/jach"}, "is_accepted": true, "score": 1, "last_activity_date": 1524113854, "last_edit_date": 1524113854, "creation_date": 1524098128, "answer_id": 49910938, "question_id": 49910084, "link": "https://stackoverflow.com/questions/49910084/using-a-pointer-to-use-a-variable-as-part-of-a-call-to-a-class-variable/49910938#49910938", "title": "Using a pointer to use a variable as *part* of a call to a class variable", "body": "<p>To answer the question:</p>\n\n<p><strong>You can't, because C++ is a compiled language</strong>, and as such, the names of the functions, objects and variables become meaningless (instead, they become just addresses)</p>\n\n<p>For example, you may see in your code</p>\n\n<pre><code> int myVariable = 6;\n</code></pre>\n\n<p>but the compiler sees:</p>\n\n<pre><code> mov [6], [0x6874]\n</code></pre>\n\n<p>Read <a href=\"https://stackoverflow.com/questions/3265357/compiled-vs-interpreted-languages\">Compiled vs. Interpreted Languages</a> for more reference.</p>\n\n<p><em>[For your particular case]</em></p>\n\n<p>You'll be better off if you use interfaces and a factory.</p>\n\n<pre><code>class Mode {\n    virtual int getAttribute() = 0;\n}\n\nclass AMeaningfulName : public Mode {\n    int getAttribute()  { return 1; }\n}\n\nclass SelectAnotherMeaningfulNamePlease : public Mode {\n    int getAttribute() { return 2; }\n}\n\nclass ModeFactory {\n    Mode getMode(int userSelectedMode) {\n\n        if (userSelectedMode == MODE_1) {\n            return new AMeaningfulMode();\n        } else if (userSelectedMode == MODE_2) {\n            return new SelectAnotherMeaningulNamePlease();\n        } else {\n            //send an exception so the user knows he selected something invalid\n        }\n    }\n}\n\n\n///now, in your main or elsewhere\nModeFactory factory = new ModeFactory();\nMode mode = factory.getMode(userSelectedValue);\nint theAtttributeIWanted = mode.getAttribute();\n</code></pre>\n\n<p>Take a look at virtual functions\n<a href=\"https://en.wikipedia.org/wiki/Virtual_function\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Virtual_function</a></p>\n\n<p>And also at factory pattern\n<a href=\"https://www.tutorialspoint.com/design_pattern/factory_pattern.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/design_pattern/factory_pattern.htm</a></p>\n"}], "owner": {"reputation": 37, "user_id": 9622322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75b7b0230b96ea0ee843a4979061d6c1?s=128&d=identicon&r=PG&f=1", "display_name": "Cammack", "link": "https://stackoverflow.com/users/9622322/cammack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 49910938, "answer_count": 1, "score": -3, "last_activity_date": 1524113854, "creation_date": 1524091319, "last_edit_date": 1524098056, "question_id": 49910084, "link": "https://stackoverflow.com/questions/49910084/using-a-pointer-to-use-a-variable-as-part-of-a-call-to-a-class-variable", "title": "Using a pointer to use a variable as *part* of a call to a class variable", "body": "<p>I'm trying to use a pointer in a function argument to read a variable from a class, like this:</p>\n\n<pre><code>void Function(int (*Argument)) {\n    Variable = Object*Argument.ClassVariable;\n}\n</code></pre>\n\n<p><strong>Note: the reason I want to do this is so that I can set the value of a rotary encoder position equal to the value a class variable was previously at, prior to allowing the user to change that class variable value. This way, when the user cycles through the class variables to set them, the starting position for each variable is the saved value.</strong></p>\n\n<p>Class objects are named <code>Object1</code>, <code>Object2</code>, etc.\nThe variable I want to read from each object is named <code>ClassVariable</code>.\nWhen I call the function, i will use<code>Function(ClassNumber);</code></p>\n\n<p>If <code>ClassNumber</code> is <code>13</code> at the time the function is called, I want <code>Variable</code> to be made equal to <code>Object13.ClassVariable</code></p>\n\n<p>Is this possible?</p>\n\n<p>Further Info:</p>\n\n<p>The entire class is public.</p>\n\n<p>Constructor for class objects (note, this is arduino, <code>byte</code> is 8-bit unsigned):</p>\n\n<pre><code>  Modes(byte hue, byte sat, byte val, int del, bool hROal, bool hset, bool sset, bool vset, bool dset) {\n    hueVal = hue;\n    satVal = sat;\n    valVal = val;\n    delVal = del;\n    hueROallow = hROal;\n    hSet = hset;\n    sSet = sset;\n    vSet = vset;\n    dSet = dset;\n  }\n</code></pre>\n\n<p>Each class object is a separate 'mode' that the user can select. The <code>Argument</code> i intend using in the function is the 'mode number' currently selected.</p>\n\n<p><strong>FULL CODE (very much a work in progress)</strong></p>\n\n<pre><code>#include &lt;SPI.h&gt;\n#include &lt;Wire.h&gt;\n#include &lt;Adafruit_GFX.h&gt;\n#include &lt;Adafruit_SH1106.h&gt;\n\nconst byte Button2 = 8;\n\nconst byte EncApin = 3;           // EncApin **MUST BE interrupt**\nconst byte EncBpin = 4;           // These are the three pins the encoder A/B &amp; button are connected to\nconst byte EncButt = 2;           //\n\nstatic int8_t enc_states[] = {0,-1,1,0,1,0,0,-1,-1,0,0,1,0,1,-1,0};   // array to set encoder H/L sequence\nbyte encVal;          // initialises reading from encoder\n\nAdafruit_SH1106 display(0);   // Initialise display? (On SPI OLED screens this sets the MOSI/CLK/DC/RST/CS pins)\n\n\nint displayVal; // to store the current output value for display\nString displayMode;\nbyte mode = 1;              // set mode 0 at beginning\nbyte qtyModes = 3;          // set number of modes that may be selected here\n\nbyte setMode = 1;\nbyte qtySetModes = 4;       // set number of sub-modes for setting values\n\n///// FUNCTION PROTOTYPES ///////// must be declared here to allow the class to use them\nvoid EncReading(); \nvoid EncReadingRO();\n\n////////////////////////////////////////////////////////\n////////////// ******** CLASSES ********* //////////////\n////////////////////////////////////////////////////////\nclass Modes {\n\n  public:   // everything in the class below this will be available to the program outside of the class\n\n  // Class Member Variables\n  // These are initialized at startup\n  byte hueVal;\n  byte satVal;\n  byte valVal;\n  int delVal;\n  bool hueROallow;\n  bool hSet;\n  bool sSet;\n  bool vSet;\n  bool dSet;\n\n  byte CLdisplayVal;\n  String displayDesc;\n\n  // These maintain the current state\n  unsigned long prevMillis;   // will store last time LED was updated\n\n  // Constructor - creates a Mode &amp; initializes the member variables and state\n  // additional options for whether rollover of values allowed needed\n  Modes(byte hue, byte sat, byte val, int del, bool hROal, bool hset, bool sset, bool vset, bool dset) {\n    hueVal = hue;\n    satVal = sat;\n    valVal = val;\n    delVal = del;\n    hueROallow = hROal;\n    hSet = hset;\n    sSet = sset;\n    vSet = vset;\n    dSet = dset;\n  }\n\n  void Update() {\n    switch (setMode) {\n      case 1:           // case 1 for hue update\n        if (hSet == 0) { \n          displayDesc = F(\" HUE (FIXED)\");\n          CLdisplayVal = hueVal;\n          break;\n          }\n        if (hueROallow == 1) EncReadingRO();\n        else EncReading();\n        hueVal = encVal;\n        CLdisplayVal = encVal;\n        displayDesc = F(\" HUE\");\n        break;\n\n      case 2:           // saturation update\n        if (sSet == 0) { \n          displayDesc = F(\" SATURATION (FIXED)\");\n          CLdisplayVal = satVal;\n          break;\n          }\n        EncReading();\n        satVal = encVal;\n        CLdisplayVal = encVal;\n        displayDesc = F(\" SATURATION\");\n        break;\n\n      case 3:           // value update\n        if (vSet == 0) { \n          displayDesc = F(\" BRIGHTNESS (FIXED)\");\n          CLdisplayVal = valVal;\n          break;\n          }\n        EncReading();\n        valVal = encVal;\n        CLdisplayVal = encVal;\n        displayDesc = F(\" BRIGHTNESS\");\n        break;\n\n      case 4:           // delay update\n        if (dSet == 0) { \n          displayDesc = F(\" TIMING (FIXED)\");\n          CLdisplayVal = delVal;\n          break;\n          }\n        EncReading();\n        delVal = encVal;\n        CLdisplayVal = encVal;\n        displayDesc = F(\" TIMING\");\n        break;\n      }\n    displayReading();\n  }\n\n  void displayReading() {\n    unsigned long currMillis = millis();        // These four lines are to\n    static unsigned long prevMillis;                     // act as a delay, except\n    if (currMillis - prevMillis &gt;= 100) {   // without holding the execution          // note: encoder reading sensitive to delal changes, 100 not bad\n      prevMillis = currMillis;                  // of other code\n      display.fillRect(39, 30, 54, 24, BLACK);\n      display.fillRect(0, 0, 128, 18, WHITE);\n      display.setTextSize(1);\n      display.setTextColor(BLACK);\n      display.setCursor(1,1);\n      display.println(displayMode);\n      display.setCursor(1,10);\n      display.println(displayDesc);\n      display.setTextSize(3);\n      display.setTextColor(WHITE);\n      display.setCursor(39,30);\n      display.println(CLdisplayVal);\n      display.display();\n    }\n  }\n};\n\n\n////////// Construct objects - this sets up the objects we want of the class 'Modes'\n// Modes modex(Hue0-255, Sat0-255, Val0-255, Del0-255, Hue rollover0/1, Hue settable0/1, Sset0/1, Vset0/1, Dse0/1\nModes mode1(50, 100, 150, 100, 1, 1, 1, 1, 1);   // object 'mode1', initializing with H50, S100, V150, D100, hue rollover &amp; settable options ON\nModes mode2(55, 105, 155, 105, 0, 1, 1, 1, 1);\nModes mode3(63, 73, 83, 93, 0, 1, 1, 1, 1);\n\n////////////////////////////////////////////////////////\n////////// ******** SETUP / LOOP ********* /////////////\n////////////////////////////////////////////////////////\n\nvoid setup() {\n  Serial.begin(115200);\n  display.begin(SH1106_SWITCHCAPVCC, 0x3C);  // initialize with the I2C addr 0x3D (for the 128x64)\n  display.clearDisplay();\n  display.display();\n  pinMode(EncApin, INPUT_PULLUP);  // Turn on internal pullup resistors for encoder pins &amp; buttons\n  pinMode(EncBpin, INPUT_PULLUP);\n  pinMode(Button2, INPUT_PULLUP);\n  pinMode(EncButt, INPUT_PULLUP);\n  attachInterrupt(digitalPinToInterrupt(EncApin), read_encoder, CHANGE);\n  attachInterrupt(digitalPinToInterrupt(EncButt), encButtPress, FALLING);\n  pciSetup(Button2);    // set up encApin for pin change interrupt\n  encVal = mode1.hueVal;           // initialize the encoder to the mode1 setmode1 value\n}\n\nvoid loop() {\n  switch(mode) {\n    case 1:\n      displayMode = F(\"MODE:Call it anything\");\n      mode1.Update();\n      // add call to the mode 1 LED display function here, using mode1.xyz variables\n      break;\n\n    case 2:\n      displayMode = F(\"MODE:Second\");\n      mode2.Update();\n      // add call to the mode 2 LED display function here, using mode2.xyz variables\n      break;\n\n    case 3:\n      displayMode = F(\"MODE:Third\");\n      mode3.Update();\n      // add call to the mode 2 LED display function here, using mode2.xyz variables\n      break;\n\n  }\n\nSerial.print(F(\"Enc: \"));\nSerial.print(encVal);\nSerial.print(F(\"    M1 H: \"));\nSerial.print(mode1.hueVal);\nSerial.print(F(\"  S: \"));\nSerial.print(mode1.satVal);\nSerial.print(F(\"  V: \"));\nSerial.print(mode1.valVal);\nSerial.print(F(\"  D: \"));\nSerial.print(mode1.delVal);\nSerial.print(F(\"    M2 H: \"));\nSerial.print(mode2.hueVal);\nSerial.print(F(\"  S: \"));\nSerial.print(mode2.satVal);\nSerial.print(F(\"  V: \"));\nSerial.print(mode2.valVal);\nSerial.print(F(\"  D: \"));\nSerial.println(mode2.delVal);\n\n//  Serial.print(F(\"freeMemory()=\"));\n//  Serial.println(freeMemory());\n\n}\n\n////////////////////////////////////////////////////////\n//////////// ******** FUNCTIONS ********* //////////////\n////////////////////////////////////////////////////////\n\n///// Function to set encVal, 0-255, NO rollover\nvoid EncReading() {\n  int8_t encoderdata;\n  encoderdata = read_encoder();                           // returns the +- value from the read_encoder function\n  if (encoderdata) {                                      // if not equal to zero\n    if (encVal+encoderdata&gt;255 || encVal+encoderdata&lt;0);    // these if/else statements clamp encVal to prevent byte rollover\n    else {\n      encVal += encoderdata;\n    } // end else\n  }\n}\n///// Function to set encVal, 0-255, WITH rollover\nvoid EncReadingRO() {\n  int8_t encoderdata;\n  encoderdata = read_encoder();                           // returns the +- value from the read_encoder function\n  if (encoderdata) {                                      // if not equal to zero\n    encVal += encoderdata;\n  }\n}\n\n////////////////////////////////////////////////////////\n//////////// ******** INTERRUPTS ********* /////////////\n////////////////////////////////////////////////////////\n\n/////// Pin Change Interrupt Setup Function /////////// called in void setup to set the selected pin as a PCI\nvoid pciSetup(byte pin)\n{\n    *digitalPinToPCMSK(pin) |= bit (digitalPinToPCMSKbit(pin));  // enable pin\n    PCIFR  |= bit (digitalPinToPCICRbit(pin)); // clear any outstanding interrupt\n    PCICR  |= bit (digitalPinToPCICRbit(pin)); // enable interrupt for the group\n}\n\n//////////// PCI Interrupt Sub Routines////////\n// ISR (PCINT0_vect) is ISR for D8-13 // ISR (PCINT2_vect) is ISR for A0-5 // ISR (PCINT2_vect) is ISR for D0-7 //\nISR (PCINT0_vect) // handle pin change interrupt for D8 to D13 here, depending on which are set in void setup\n {    \n  if(digitalRead(Button2) == LOW)\n     buttonPress();\n }\n\n\n//////// Func for ENCODER button press ISR ****** CHANGE 'setMode' ***** ///////////////\nvoid encButtPress() {\n  static unsigned long prevInterrTime = 0;\n  unsigned long interrTime = millis();\n  if (interrTime - prevInterrTime &gt; 200) {\n    setMode++;\n    // *** ADD HERE *** need to set encVal to whatever the existing value is in the setMode being switched to\n    if (setMode &gt; qtySetModes) setMode = 1;\n    prevInterrTime = interrTime;\n    setPrevEncVal(mode);\n  }\n}\n\nvoid setPrevEncVal(byte (*modeNum)) {\n  switch (setMode) {\n    case 1: encVal = mode&amp;modeNum.hueVal; break;\n    case 2: encVal = mode1.satVal; break;\n    case 3: encVal = mode1.valVal; break;\n    case 4: encVal = mode1.delVal; break;\n  }\n}\n\n//////// Func for button press ISR ****** CHANGE 'mode' ***** ///////////////\nvoid buttonPress() {\n  static unsigned long prevInterrTime = 0;\n  unsigned long interrTime = millis();\n  if (interrTime - prevInterrTime &gt; 200) {\n    mode++;           // increment 'mode'\n    setMode = 1;      // reset 'setMode'\n  }\n  if (mode &gt; qtyModes) mode = 1;\n  prevInterrTime = interrTime;\n}\n\n//////// Func for +1/-1 encoder reading ISR ///////\n/* returns change in encoder state (-1,0,1) */\nint8_t read_encoder() {\n  static uint8_t old_AB = 0;\n  old_AB &lt;&lt;= 2;\n  old_AB |= ((digitalRead(EncBpin))?(1&lt;&lt;1):0) | ((digitalRead(EncApin))?(1&lt;&lt;0):0);\n  return ( enc_states[( old_AB &amp; 0x0f )]);\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1524091644, "post_id": 49910077, "comment_id": 86836131, "body": "Warning: <code>pow</code> operates in floating point. You may get truncation errors due to lack of precision in larger numbers. On a less vital note, <code>pow</code> is designed to compute stuff like e to the power of pi and is usually vast overkill for computing the power of integers. A simple loop that multiplies is often faster in addition to safer ( no truncation issues)"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1524091894, "post_id": 49910077, "comment_id": 86836192, "body": "You do multiplication of big integers just like you learnt to do long multiplication in school.  Get a pencil and paper and multiply 123*456.  Do it exactly the same way on the computer.  Do not use any library functions as they are not needed."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1524091927, "post_id": 49910077, "comment_id": 86836202, "body": "To best solve this problem, step through the code in question either on paper (following your coded instructions to the letter) or with the debugging software that almost certainly came with your C++ development environment to watch where errors occur."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1524092153, "post_id": 49910077, "comment_id": 86836259, "body": "Usage of <code>pow</code> almost makes the whole attempt null and void, given the <a href=\"https://stackoverflow.com/questions/25678481/why-does-pown-2-return-24-when-n-5-with-my-compiler-and-os\">issues with pow</a>."}], "answers": [{"tags": [], "owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "is_accepted": false, "score": 0, "last_activity_date": 1524108140, "creation_date": 1524108140, "answer_id": 49912203, "question_id": 49910077, "link": "https://stackoverflow.com/questions/49910077/how-to-perform-biginteger-multiplication-on-char-vectors/49912203#49912203", "title": "How to perform BigInteger multiplication on char vectors?", "body": "<p>I'm not sure how you're trying to do this, but here is a walkthrough of why you're getting the result 1212 instead of 132:</p>\n\n<pre><code>BigInt operator*(int x)// x is 4\n    {\n        // Let's say storage holds 33, that's\n        // {3, 3} in your char vector;\n        int extra = 0;\n        int dec_mod = pow(10, this-&gt;storage.size()); // dec_mod may be 100\n\n\n        for (auto &amp; g : storage) \n        {\n            g = g * x + extra;  // same as g = 3 * 4 + 0, g = 12\n            int mod_g = g % dec_mod; // same as mod_g = 12 % 100 = 12\n            extra = g / dec_mod; // same as 12 / 100 = 0\n            g = mod_g;  // g = 12\n        }\n        // Exact same thing happens on the second iteration, your storage vector\n        // ends up as {12, 12};\n        // That's why your result is 1212\n\n        while (extra &gt; 0) {\n            storage.push_back(extra % dec_mod);\n            extra /= dec_mod;\n        }\n        return *this;\n    }\n</code></pre>\n\n<p>I'm not sure how you are trying to do it, but here's my attempt, it's just as one would do it on paper:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nstruct BigInt\n{\n    BigInt(std::string num) { for (auto &amp;i : num) storage.push_back(i - 48); }\n    BigInt(std::vector&lt;char&gt; numVect) : storage(numVect) {}\n\n    vector&lt;char&gt; storage;\n\n    string getAsString() \n    { string str; for (auto&amp; i : storage) str += i + 48; return str; }\n    // Add 48 to turn 0 - 9 to ascii string.\n\n    vector&lt;char&gt; add(vector&lt;char&gt;&amp; lhs, vector&lt;char&gt;&amp; rhs)\n    // Add function only needed if number is multiplied by more than one digit.\n    {\n        // Fill with zeros to make both vectors same length.\n        int sizeDiff = (int)lhs.size() - (int)rhs.size();\n        if (sizeDiff &lt; 0)\n            lhs.insert(lhs.begin(), abs(sizeDiff), 0);\n        else if (sizeDiff &gt; 0)\n            rhs.insert(rhs.begin(), abs(sizeDiff), 0);\n\n        vector&lt;char&gt; resultVect;\n        int carry = 0;\n        for (int i = lhs.size() - 1; i &gt;= 0; --i)\n        {\n            int result = lhs[i] + rhs[i] + carry;\n            carry = result / 10;\n            result %= 10;\n            resultVect.insert(resultVect.begin(), result);\n        }\n        if (carry != 0) resultVect.insert(resultVect.begin(), carry);\n\n        return resultVect;\n    }\n\n    BigInt operator*(BigInt rhs)\n    {\n        int unitPlace = 0; // Keeps track of how many zeros to add in subsequent results\n        vector&lt;char&gt; totalVect; // Accumulated value after each addition\n        vector&lt;char&gt; resultVect; // Result of this particular multiplication\n\n        for (int i = rhs.storage.size() - 1; i &gt;= 0; --i, unitPlace++)\n        {\n            int carry = 0;\n            for (int k = 0; k &lt; unitPlace; ++k) resultVect.push_back(0);\n\n            for (int j = storage.size() - 1; j &gt;= 0; j--)\n            {\n                int result = rhs.storage[i] * storage[j] + carry;\n                carry = result / 10;\n                result %= 10;\n\n                resultVect.insert(resultVect.begin(), result);\n            }\n            resultVect.insert(resultVect.begin(), carry);\n            totalVect = add(totalVect, resultVect); // Add sub-result\n            resultVect.clear();\n        }\n\n        // Strip leading zeros\n        for (int i = 0; i &lt; totalVect.size(); ++i) {\n            if (totalVect[i] == 0) totalVect.erase(totalVect.begin() + i);\n            else break;\n        }\n\n        return BigInt{ totalVect };\n    }\n};\n\nint main()\n{\n    BigInt a{ \"335467\" };\n    BigInt b{ \"1019737\" };\n\n    BigInt c = a * b;\n\n    std::cout &lt;&lt; c.getAsString() &lt;&lt; '\\n';\n\n    cin.ignore();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 4233831, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d6c0632221bded7625bbdadb5462cf18?s=128&d=identicon&r=PG&f=1", "display_name": "jahir anderson", "link": "https://stackoverflow.com/users/4233831/jahir-anderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 264, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1524108140, "creation_date": 1524091276, "question_id": 49910077, "link": "https://stackoverflow.com/questions/49910077/how-to-perform-biginteger-multiplication-on-char-vectors", "title": "How to perform BigInteger multiplication on char vectors?", "body": "<p>I'm implementing a BigInt in c++ and am trying to overload the multiplication operator. I'm storing large integers in a char vector. </p>\n\n<pre><code>vector&lt;char&gt; storage;\n</code></pre>\n\n<p>Here is what I did to implement operator*(int)</p>\n\n<pre><code>BigInt BigInt::operator*(int x)\n{\nint extra = 0;\nint dec_mod = pow(10, this-&gt;storage.size());\n\nfor (auto &amp; g : storage) {\n    g = g * x + extra;\n    int mod_g = g % dec_mod;\n    extra = g / dec_mod;\n    g = mod_g;\n}\n\nwhile (extra &gt; 0) {\n    storage.push_back(extra % dec_mod);\n    extra /= dec_mod;\n}\n\nreturn *this;\n}\n</code></pre>\n\n<p>The operator*(bigInt) function returns wrong answers. For example, 33 * 4 returns 1212 and not 132.This was my attempt at writing the overloaded operator* which takes a bigint object:</p>\n\n<pre><code>BigInt BigInt::operator*(BigInt bigN) {\nint carry = 0;\n\nfor (int i = bigN.storage.size()-1; i &gt;= 0; i--) {\n\n    for (int j = this-&gt;storage.size()-1; j &gt;= 0; j--) {\n\n        int val = (this-&gt;storage.at(i) * bigN.storage.at(j)) + carry;\n        this-&gt;storage.push_back(val % 10);\n        carry = val / 10;\n    }\n\n}\nreturn *this;\n}\n</code></pre>\n\n<p>It looks like the logic in the carry is flawed, but i'm not sure how to fix it.</p>\n"}, {"tags": ["c++", "database", "class", "templates", "visual-studio-2017"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1524089745, "post_id": 49909794, "comment_id": 86835549, "body": "As the errors mention, copy constructors and assignment operators expect a <code>const</code> reference."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1524090432, "post_id": 49909794, "comment_id": 86835781, "body": "Off-topic, but your assignment operator is flawed on two levels.  Self-assignment won&#39;t work correctly, and if something happens in <code>push_back</code> to throw an exception, you&#39;ve corrupted your object by erasing the items.    The <a href=\"https://stackoverflow.com/questions/30857668/assignment-operator-in-linked-list-c\">copy / swap</a> idiom makes this a 3 line function."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1524093160, "post_id": 49909794, "comment_id": 86836536, "body": "If you were already using the STL to begin with (via <code>std::vector</code>), why can&#39;t you use <code>std::list</code> or <code>std::forward_list</code> instead of implementing your own linked-list implementation?"}, {"owner": {"reputation": 13, "user_id": 8941554, "user_type": "registered", "profile_image": "https://graph.facebook.com/1455573147811076/picture?type=large", "display_name": "R\u0103zvan Manea", "link": "https://stackoverflow.com/users/8941554/r%c4%83zvan-manea"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1524094613, "post_id": 49909794, "comment_id": 86836927, "body": "@RemyLebeau because the teacher&#39;s asked us to implement it ourselves..."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1524126707, "post_id": 49909794, "comment_id": 86848056, "body": "Those functions should take argument by const reference"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1524126731, "post_id": 49909794, "comment_id": 86848071, "body": "When you are re-implementing something in <code>std</code>, a good start is declaring <b>exactly the same</b> members. You then just have to work out how to define them"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8941554, "user_type": "registered", "profile_image": "https://graph.facebook.com/1455573147811076/picture?type=large", "display_name": "R\u0103zvan Manea", "link": "https://stackoverflow.com/users/8941554/r%c4%83zvan-manea"}, "edited": false, "score": 0, "creation_date": 1524092374, "post_id": 49910099, "comment_id": 86836326, "body": "That is where I get error C2662, it also gives me: C3536\t&#39;&lt;begin&gt;$L0&#39;: cannot be used before it is initialized  and C2100\tillegal indirection  and C2664\t&#39;void LinkedList&lt;Medicament&gt;::push_back(const ElemType &amp;)&#39;: cannot convert argument 1 from &#39;int&#39; to &#39;const Medicament &amp;&#39;"}, {"owner": {"reputation": 13, "user_id": 8941554, "user_type": "registered", "profile_image": "https://graph.facebook.com/1455573147811076/picture?type=large", "display_name": "R\u0103zvan Manea", "link": "https://stackoverflow.com/users/8941554/r%c4%83zvan-manea"}, "edited": false, "score": 0, "creation_date": 1524092801, "post_id": 49910099, "comment_id": 86836447, "body": "Wait, so I can&#39;t pass temporaries by reference, meaning I either have to pass the argument by value or to modify my code?`"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "reply_to_user": {"reputation": 13, "user_id": 8941554, "user_type": "registered", "profile_image": "https://graph.facebook.com/1455573147811076/picture?type=large", "display_name": "R\u0103zvan Manea", "link": "https://stackoverflow.com/users/8941554/r%c4%83zvan-manea"}, "edited": false, "score": 0, "creation_date": 1524092871, "post_id": 49910099, "comment_id": 86836469, "body": "@R\u0103zvanManea You pass temporaries by const reference.  To fix the C2662 error, your <code>begin</code> function needs to be const as well (<code>begin() const</code>)."}, {"owner": {"reputation": 13, "user_id": 8941554, "user_type": "registered", "profile_image": "https://graph.facebook.com/1455573147811076/picture?type=large", "display_name": "R\u0103zvan Manea", "link": "https://stackoverflow.com/users/8941554/r%c4%83zvan-manea"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1524094946, "post_id": 49910099, "comment_id": 86837016, "body": "@1201ProgramAlarm awwwwww... damn, that was the issue \u3078\u3078 thanks a lot!"}], "tags": [], "owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "is_accepted": true, "score": 3, "last_activity_date": 1524091383, "creation_date": 1524091383, "answer_id": 49910099, "question_id": 49909794, "link": "https://stackoverflow.com/questions/49909794/class-has-no-suitable-copy-constructor-no-binary-operator-found/49910099#49910099", "title": "Class has no suitable copy constructor, no binary operator &#39;=&#39; found,", "body": "<p>This is not correct.</p>\n\n<pre><code>LinkedList(LinkedList&lt;ElemType&gt;&amp; lst) : LinkedList()\n</code></pre>\n\n<p>Change it to this.</p>\n\n<pre><code>LinkedList(const LinkedList&lt;ElemType&gt;&amp; lst) : LinkedList()\n</code></pre>\n\n<p>This is not correct.</p>\n\n<pre><code>LinkedList&lt;ElemType&gt;&amp; operator=(LinkedList&lt;ElemType&gt;&amp; lst)\n</code></pre>\n\n<p>Change it to this.</p>\n\n<pre><code>LinkedList&lt;ElemType&gt;&amp; operator=(const LinkedList&lt;ElemType&gt;&amp; lst)\n</code></pre>\n\n<p>Your temporaries cannot bind to mutable references.</p>\n"}, {"comments": [{"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "edited": false, "score": 0, "creation_date": 1524136017, "post_id": 49916102, "comment_id": 86854403, "body": "I wonder why you didn&#39;t try std::forward_list. Was it your assignment to implement one basic container class?"}], "tags": [], "owner": {"reputation": 13, "user_id": 8941554, "user_type": "registered", "profile_image": "https://graph.facebook.com/1455573147811076/picture?type=large", "display_name": "R\u0103zvan Manea", "link": "https://stackoverflow.com/users/8941554/r%c4%83zvan-manea"}, "is_accepted": false, "score": 0, "last_activity_date": 1524126019, "creation_date": 1524126019, "answer_id": 49916102, "question_id": 49909794, "link": "https://stackoverflow.com/questions/49909794/class-has-no-suitable-copy-constructor-no-binary-operator-found/49916102#49916102", "title": "Class has no suitable copy constructor, no binary operator &#39;=&#39; found,", "body": "<p>Thanks @<strong>1201ProgramAlarm</strong> for helping me fix C2662. As they mentioned, I forgot to make the lists's <code>begin()</code> method <code>const</code>, which caused the said compile error at \n <code>for (auto&amp; elem : lst)</code>.</p>\n\n<p>I was trying to get around this by setting the copy constructor's and the assignment operators' parameters to <em>non-const</em>, which caused the other errors when passing a temporary argument to a <em>non-const reference</em>, as @<strong>Drew Dormann</strong> mentioned.</p>\n\n<p>That didn't happen when testing the <code>LinkedList</code> class because I didn't call the copy constructor with a <em>temporary argument</em> in the test's module. I'll remember to take greater care of const correctness from now on. Thank you for the support!\no(_ _)o</p>\n"}], "owner": {"reputation": 13, "user_id": 8941554, "user_type": "registered", "profile_image": "https://graph.facebook.com/1455573147811076/picture?type=large", "display_name": "R\u0103zvan Manea", "link": "https://stackoverflow.com/users/8941554/r%c4%83zvan-manea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4048, "favorite_count": 0, "accepted_answer_id": 49910099, "answer_count": 2, "score": 1, "last_activity_date": 1524126019, "creation_date": 1524089651, "last_edit_date": 1524091995, "question_id": 49909794, "link": "https://stackoverflow.com/questions/49909794/class-has-no-suitable-copy-constructor-no-binary-operator-found", "title": "Class has no suitable copy constructor, no binary operator &#39;=&#39; found,", "body": "<p>To put it simply, my compiler refuses to call the <strong>copy constructor</strong> and the <strong>assignment operator which I provided</strong>.\nI had a project for university to make a database-like program in C++ using architecture stratification(domain, repository, service and UI). Initially I was asked to use <code>std::vector</code> and I completed the program without any struggle. But now I have to replace <code>std::vector</code> with... a <strong>simply linked list</strong>\nI've pretty much finished writing the linked list and <strong>I've tested all of its functionalities</strong>. However, when I implement it in the program, replacing the <code>std::vector</code>, the compiler won't recognize the copy constructor and the assignment operator!\nHere is part of the Linked List implementation(without the <code>Node</code> class and <code>ForwardIterator</code> class which I've tested and don't seem to cause any issues)</p>\n\n<pre><code>template &lt;class ElemType&gt;\nclass LinkedList\n{\n    Node&lt;ElemType&gt; *front, *back;\n\npublic:\n\n    LinkedList() : front{ NULL }, back{ NULL } {}\n\n    //The problematic copy constructor\n    LinkedList(LinkedList&lt;ElemType&gt;&amp; lst) : LinkedList() {\n        for (auto&amp; elem : lst)\n            push_back(elem);\n    }\n\n    ~LinkedList() {\n        while (front != NULL)\n            erase(begin());\n    }\n\n    //The problematic assignment operator\n    LinkedList&lt;ElemType&gt;&amp; operator=(LinkedList&lt;ElemType&gt;&amp; lst) {\n    while (front != NULL)\n        erase(begin());\n    for (auto&amp; elem : lst)\n        push_back(elem);\n    return *this;\n    }\n</code></pre>\n\n<p>I get the following errors multiple times:</p>\n\n<blockquote>\n  <p>E0334 class \"LinkedList&lt; Medicament >\" has no suitable copy constructor</p>\n  \n  <p>E0349 no operator \"=\" matches these operands</p>\n  \n  <p>C2440    'initializing': cannot convert from 'LinkedList&lt; Medicament >' to\n  'LinkedList&lt; Medicament >'</p>\n  \n  <p>C2679    binary '=': no operator found which takes a right-hand operand\n  of type 'LinkedList&lt; Medicament >' (or there is no acceptable\n  conversion)</p>\n</blockquote>\n\n<p>I would normally make the parameters and auto's <code>const</code>, but that gives me another error(no idea why), despite <code>push_back()</code> taking a const reference:</p>\n\n<blockquote>\n  <p>C2662 'ForwardIterator&lt; Medicament > LinkedList&lt; Medicament >::begin(void)': cannot convert 'this' pointer from 'const LinkedList&lt; Medicament >' to 'LinkedList&lt; Medicament > &amp;'</p>\n</blockquote>\n\n<p>The main errors(copy constructor and assignment) only happen when I pass the argument as a return value of a member function from within the service/repository/ui . A short example that causes this issue:</p>\n\n<pre><code>class MediRepo {                                    //repository\n\npublic:\n    LinkedList&lt;Medicament&gt; elem;                    //I made it public for now\n\n//............\n\n    //Returns a copy of the medicine list\n    LinkedList&lt;Medicament&gt; getMeds() { return elem; }\n}\n\n//main\nMediRepo rep;\nLinkedList&lt;Medicament&gt; medlist{ rep.getMeds() };    //ERROR E0334 and C2440\nLinkedList&lt;Medicament&gt; medlist{ rep.elem };         //OK\n</code></pre>\n\n<p>Like I said, the linked lists(including the constructor and the assignment operator) work perfectly fine outside of the service/repository. If I spend more time, I can probably come up with a half-assed workaround to this, but I hope somebody can tell me what I am doing wrong that gives me these errors(the one with const parameters, too, if possible). I've spent way too many hours trying to solve this...\nAlso, please ask if you would like to see more of the source code. </p>\n"}, {"tags": ["c++", "qt", "function-pointers", "qmap"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1524088996, "post_id": 49909663, "comment_id": 86835293, "body": "<code>return it.value()();</code> Once you obtained the function pointer with <code>it.value()</code>, you need to actually call the function."}, {"owner": {"reputation": 1, "user_id": 7350224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/845eb22a38606495455ee733018d2bab?s=128&d=identicon&r=PG&f=1", "display_name": "Agrowal", "link": "https://stackoverflow.com/users/7350224/agrowal"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1524090603, "post_id": 49909663, "comment_id": 86835847, "body": "Ahhh so simple. Anyway many thanks to you, it worked!"}, {"owner": {"reputation": 2748, "user_id": 6165833, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b6bbdd7a7472d52c14da82af5eb6d20?s=128&d=identicon&r=PG&f=1", "display_name": "ymoreau", "link": "https://stackoverflow.com/users/6165833/ymoreau"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1524130560, "post_id": 49909663, "comment_id": 86850586, "body": "@IgorTandetnik consider to make an actual answer, this would help future reader to have an accepted answer to the question :)"}], "answers": [{"comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 1, "user_id": 7350224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/845eb22a38606495455ee733018d2bab?s=128&d=identicon&r=PG&f=1", "display_name": "Agrowal", "link": "https://stackoverflow.com/users/7350224/agrowal"}, "edited": false, "score": 0, "creation_date": 1524364391, "post_id": 49934535, "comment_id": 86940202, "body": "I forgot that the free-standing function return types don&#39;t support covariance. Fixed."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1524376374, "last_edit_date": 1524376374, "creation_date": 1524201812, "answer_id": 49934535, "question_id": 49909663, "link": "https://stackoverflow.com/questions/49909663/function-pointer-from-qmap/49934535#49934535", "title": "Function pointer from QMap", "body": "<p>That's a little bit complicated. You're writing C++, so you shouldn't be copying Java. C++ is way more expressive here.</p>\n\n<ol>\n<li>You won't need the explicit <code>Create</code>/<code>Free</code> methods - the compiler can generate them for you, automatically. </li>\n<li>You definitely need a virtual destructor, otherwise the interface will be useless. Any class you intend to derive from must have a virtual destructor, with very few specialized exceptions from this rule.</li>\n<li>All implementations of virtual methods should be declared <code>override</code>, including the destructor, but not <code>virtual</code> as that'd violate DRY.</li>\n<li>The classes can carry their names, so that the factory can register them just by knowing their types. This is an optional behavior of the factory.</li>\n</ol>\n\n\n\n<pre><code>#include &lt;QtCore&gt;\n\nclass IAnimal {\npublic:\n    virtual int GetNumberOfLegs() const = 0;\n    virtual QString Speaks() = 0;\n    virtual ~IAnimal() {}\n};\n\nclass Cat : public IAnimal {\npublic:\n    int GetNumberOfLegs() const override { return 4; }\n    QString Speaks() override { return QStringLiteral(\"Meow\"); }\n    static auto className() { return \"Cat\"; }\n};\n\nclass Dog : public IAnimal {\npublic:\n    int GetNumberOfLegs() const override { return 4; }\n    QString Speaks() override { return QStringLiteral(\"Woof\"); }\n    static auto className() { return \"Dog\"; }\n};\n</code></pre>\n\n<p>Now we can have a generic factory. Note that all sane C++ container types manage their data. You don't need to explicitly clear them on destruction. We're leveraging C++11. The <code>Register</code> method will only accept types that derive from <code>Interface</code>, and that method automatically generates a construction function using the lambda expression.</p>\n\n<p>The lifetime of the instance should be controlled explicitly by instantiating it in <code>main()</code>.</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;typeindex&gt;\n#include &lt;map&gt;\n\ntemplate &lt;class Interface&gt; class Factory {\n  template &lt;class C, class T = void&gt; struct enable_if_I :\n    std::enable_if&lt;std::is_base_of&lt;Interface, C&gt;::value, T&gt; {};\n  using create_fn = Interface* (*)();\n  std::map&lt;QByteArray, create_fn, std::less&lt;&gt;&gt; m_creators;\n  std::map&lt;std::type_index, QByteArray&gt; m_names;\n  static Factory *&amp;instance_ref() { // assume no inline static yet\n    static Factory *m_instance;\n    return m_instance;\n  }\n  Factory(const Factory &amp;) = delete;\n  Factory &amp;operator=(const Factory &amp;) = delete;\npublic:\n  Factory() {\n    Q_ASSERT(!instance());\n    instance_ref() = this;\n  }\n  virtual ~Factory() { instance_ref() = {}; }\n</code></pre>\n\n<p>In general, registration requires the type and name of the derived class. This presupposes nothing about whether the class has a <code>className()</code> member. The factory stores both the factory function and the name. This allows name look up without having <code>className</code> as a virtual method of the interface.</p>\n\n<pre><code>  template &lt;class T&gt; typename enable_if_I&lt;T&gt;::type Register(const QByteArray &amp;name) {\n    m_creators[name] = +[]()-&gt;Interface* { return new T(); };\n    m_names[{typeid(T)}] = name;\n  }\n</code></pre>\n\n<p>When class names are known, we can leverage them to register one or more classes, given just their types.</p>\n\n<pre><code>  template &lt;class T1&gt; typename enable_if_I&lt;T1&gt;::type Register() {\n    this-&gt;Register&lt;T1&gt;(T1::className());\n  }\n  template &lt;class T1, class T2, class...T&gt; typename enable_if_I&lt;T1&gt;::type Register() {\n    this-&gt;Register&lt;T1&gt;(T1::className());\n    this-&gt;Register&lt;T2, T...&gt;();\n  }\n</code></pre>\n\n<p>The instance creation methods are optimized not to copy the name given, no matter the format. This is why we use the <code>std::map&lt;K, V, std::less&lt;&gt;&gt;</code> map with a transparent comparator. <code>QByteArray</code> provides <code>operator&lt;</code> that takes various types on the right-hand side, and to exploit this, the type of the key (here: name) must reach the comparator.</p>\n\n<pre><code>  template &lt;typename T&gt; static Interface *CreateA(T &amp;&amp;t) {\n      return instance() ? instance()-&gt;Create(std::forward&lt;T&gt;(t)) : nullptr;\n  }\n  Interface *Create(QLatin1String name) const { return Create(name.data()); }\n  template &lt;typename T&gt; Interface *Create(T &amp;&amp;name) const;\n  static const QByteArray &amp;NameOfA(const Interface * obj);\n  const QByteArray &amp;NameOf(const Interface *) const;\n  static Factory *instance() { return instance_ref(); }\n};\n\ntemplate &lt;class Interface&gt;\ntemplate &lt;typename T&gt; Interface *Factory&lt;Interface&gt;::Create(T &amp;&amp;name) const {\n  auto it = m_creators.find(name);\n  return (it != m_creators.end()) ? it-&gt;second() : nullptr;\n}\nnamespace detail { \nconst QByteArray &amp; null() { static const QByteArray n; return n; }\n}\ntemplate &lt;class Interface&gt;\nconst QByteArray &amp;Factory&lt;Interface&gt;::NameOfA(const Interface *obj) {\n  return instance() ? instance()-&gt;NameOf(obj) : detail::null();\n}\ntemplate &lt;class Interface&gt;\nconst QByteArray &amp;Factory&lt;Interface&gt;::NameOf(const Interface *obj) const {\n  auto it = m_names.find(typeid(*obj));\n  return (it != m_names.end()) ? it-&gt;second : detail::null();\n}\n</code></pre>\n\n<p>The generic factory takes the interface and concrete types and registers them all in the constructor. This makes building the factories simple.</p>\n\n<pre><code>template &lt;class Interface, class ...Types&gt;\nclass GenericFactory : public Factory&lt;Interface&gt; {\npublic:\n  GenericFactory() {\n    this-&gt;template Register&lt;Types...&gt;();\n  }\n};\n\nusing AnimalFactory = GenericFactory&lt;IAnimal, Cat, Dog&gt;;\n</code></pre>\n\n<p>Example of use, with asserts to indicate desired behavior. Note that to destroy the objects, one merely has to <code>delete</code> their instance. The compiler will generate the calls.</p>\n\n<pre><code>int main() {\n  Q_ASSERT(!AnimalFactory::instance());\n  {\n    AnimalFactory animals;\n    Q_ASSERT(AnimalFactory::instance());\n    auto *dog1 = AnimalFactory::CreateA(\"Dog\");\n    Q_ASSERT(dynamic_cast&lt;Dog*&gt;(dog1));\n    Q_ASSERT(AnimalFactory::NameOfA(dog1) == Dog::className());\n    Q_ASSERT(dog1-&gt;Speaks() == QStringLiteral(\"Woof\"));\n    auto *dog2 = AnimalFactory::CreateA(QLatin1String(\"Dog\"));\n    Q_ASSERT(dynamic_cast&lt;Dog*&gt;(dog2));\n    auto *cat = AnimalFactory::CreateA(\"Cat\");\n    Q_ASSERT(dynamic_cast&lt;Cat*&gt;(cat));\n    Q_ASSERT(cat-&gt;Speaks() == QStringLiteral(\"Meow\"));\n    Q_ASSERT(AnimalFactory::NameOfA(cat) == Cat::className());\n    delete cat;\n    delete dog2;\n    delete dog1;\n  }\n  Q_ASSERT(!AnimalFactory::instance());\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7350224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/845eb22a38606495455ee733018d2bab?s=128&d=identicon&r=PG&f=1", "display_name": "Agrowal", "link": "https://stackoverflow.com/users/7350224/agrowal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1202, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524376374, "creation_date": 1524088877, "question_id": 49909663, "link": "https://stackoverflow.com/questions/49909663/function-pointer-from-qmap", "title": "Function pointer from QMap", "body": "<p>I'm trying to implement factory method pattern in my QT project following this example: <a href=\"https://www.codeproject.com/Articles/363338/Factory-Pattern-in-Cplusplus\" rel=\"nofollow noreferrer\">https://www.codeproject.com/Articles/363338/Factory-Pattern-in-Cplusplus</a>  </p>\n\n<pre><code>#include &lt;QCoreApplication&gt;\n#include &lt;QDebug&gt;\n\nclass IAnimal\n{\npublic:\n    virtual int GetNumberOfLegs() const = 0;\n    virtual void Speak() = 0;\n    virtual void Free() = 0;\n};\ntypedef IAnimal* (__stdcall *CreateAnimalFn)(void);\n\n// IAnimal implementations\nclass Cat : public IAnimal\n{\npublic:\n    int GetNumberOfLegs() const { return 4; }\n    void Speak() { qDebug() &lt;&lt; \"Meow\" &lt;&lt; endl; }\n    void Free() { delete this; }\n\n    static IAnimal * __stdcall Create() { return new Cat(); }\n};\n\nclass Dog : public IAnimal\n{\npublic:\n    int GetNumberOfLegs() const { return 4; }\n    void Speak() { qDebug() &lt;&lt; \"Woof\" &lt;&lt; endl; }\n    void Free() { delete this; }\n\n    static IAnimal * __stdcall Create() { return new Dog(); }\n};\n</code></pre>\n\n<p>Factory class:</p>\n\n<pre><code>// Factory for creating instances of IAnimal\nclass AnimalFactory\n{\nprivate:\n    AnimalFactory();\n    AnimalFactory(const AnimalFactory &amp;) { }\n    AnimalFactory &amp;operator=(const AnimalFactory &amp;) { return *this; }\n\n    typedef QMap&lt;QString,CreateAnimalFn&gt; FactoryMap;\n    FactoryMap m_FactoryMap;\npublic:\n    ~AnimalFactory() { m_FactoryMap.clear(); }\n\n    static AnimalFactory *Get()\n    {\n        static AnimalFactory instance;\n        return &amp;instance;\n    }\n\n    void Register(const QString &amp;animalName, CreateAnimalFn pfnCreate);\n    IAnimal *CreateAnimal(const QString &amp;animalName);\n};\n\nAnimalFactory::AnimalFactory()\n{\n    Register(\"Cat\", &amp;Cat::Create);\n    Register(\"Dog\", &amp;Dog::Create);\n}\n\nvoid AnimalFactory::Register(const QString &amp;animalName, CreateAnimalFn pfnCreate)\n{\n    m_FactoryMap[animalName] = pfnCreate;\n}\n\nIAnimal *AnimalFactory::CreateAnimal(const QString &amp;animalName)\n{\n    FactoryMap::iterator it = m_FactoryMap.find(animalName);\n    if( it != m_FactoryMap.end() )\n    return it.value();\n    return NULL;\n}\n</code></pre>\n\n<p>However I am encountering such an error: </p>\n\n<pre><code>cannot convert 'IAnimal* (__attribute__((__stdcall__)) *)()' to 'IAnimal*' in return\n         return it.value();\n</code></pre>\n\n<p>Only existing anwser (<a href=\"https://stackoverflow.com/questions/13330806/insert-function-pointer-into-qmap-qt\">Insert function pointer into QMap (Qt)</a>) suggests making Create() functions static which doesn't seem to help.  </p>\n\n<p>I will be very grateful for any piece of advice.</p>\n"}, {"tags": ["c++", "c++11", "immutability"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1524091586, "post_id": 49909456, "comment_id": 86836114, "body": "Can you store these extra attributes into other struct. Your pipeline seems to work only on a part of your structure, so split structure might help (one which use pipeline, the other which is pass as-is)."}], "answers": [{"comments": [{"owner": {"reputation": 500, "user_id": 187359, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bc319c4b6ab42da4cce05ac52cc6f6c3?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/187359/jay"}, "edited": false, "score": 0, "creation_date": 1524091355, "post_id": 49909691, "comment_id": 86836051, "body": "This is kind of what the code I&#39;d like to replace is like. These messages are passed through lots of different classes, through a queue, and other stuff. It can be difficult to determine if a &quot;message&quot; at some point has been parsed, or handled, or has this attribute or that one. My goal was to give clarity about what has and hasn&#39;t been done with a message by using immutable types."}, {"owner": {"reputation": 11371, "user_id": 481061, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c4876d67fda212cee59d97ac5a676c2d?s=128&d=identicon&r=PG", "display_name": "Felix Dombek", "link": "https://stackoverflow.com/users/481061/felix-dombek"}, "reply_to_user": {"reputation": 500, "user_id": 187359, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bc319c4b6ab42da4cce05ac52cc6f6c3?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/187359/jay"}, "edited": false, "score": 0, "creation_date": 1524096978, "post_id": 49909691, "comment_id": 86837492, "body": "In that case, I&#39;d simply use inheritance."}, {"owner": {"reputation": 11371, "user_id": 481061, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c4876d67fda212cee59d97ac5a676c2d?s=128&d=identicon&r=PG", "display_name": "Felix Dombek", "link": "https://stackoverflow.com/users/481061/felix-dombek"}, "reply_to_user": {"reputation": 500, "user_id": 187359, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bc319c4b6ab42da4cce05ac52cc6f6c3?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/187359/jay"}, "edited": false, "score": 0, "creation_date": 1524097371, "post_id": 49909691, "comment_id": 86837581, "body": "@Jay Or you could look into mixins aka the decorator pattern, which do a kind of inheritance by template arguments."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1524132535, "post_id": 49909691, "comment_id": 86852106, "body": "But isn&#39;t the downside that each time your message is processed by a stage it gets copied? I guess you could pimpl and move to reduce that overhead. The mixin template thing can work, but can generate a lot of internal code duplication, especially if your pipeline is not linear."}], "tags": [], "owner": {"reputation": 11371, "user_id": 481061, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c4876d67fda212cee59d97ac5a676c2d?s=128&d=identicon&r=PG", "display_name": "Felix Dombek", "link": "https://stackoverflow.com/users/481061/felix-dombek"}, "is_accepted": false, "score": 0, "last_activity_date": 1524088989, "creation_date": 1524088989, "answer_id": 49909691, "question_id": 49909456, "link": "https://stackoverflow.com/questions/49909456/how-to-pass-information-through-a-pipeline-of-immutable-types/49909691#49909691", "title": "How to pass information through a &quot;pipeline&quot; of immutable types", "body": "<p>You could create a compound type which can hold all information you need, where each stage in the pipeline simply adds values to it. The compound type would have to be mutable, but the values in it don't have to. E.g. wrap a <code>std::map&lt;PropertyType, std::any&gt;</code> in a class which provides only <code>const</code> getters. Then add all revelant new information to it at each stage and return this object instead of the <code>string</code>.</p>\n"}], "owner": {"reputation": 500, "user_id": 187359, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bc319c4b6ab42da4cce05ac52cc6f6c3?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/187359/jay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1524088989, "creation_date": 1524087761, "question_id": 49909456, "link": "https://stackoverflow.com/questions/49909456/how-to-pass-information-through-a-pipeline-of-immutable-types", "title": "How to pass information through a &quot;pipeline&quot; of immutable types", "body": "<p>I have some code that deals with receiving messages, parsing them, and handling them. I'm interested in making the types immutable to make it easier to reason about them. Here's a stripped down example:</p>\n\n<pre><code>class ReceivedMessage {\npublic:\n  ReceivedMessage(const string&amp; message)\n    : m_message(message)\n  { }\n  const string&amp; GetReceivedMessage() const { return m_message; }\n  chrono::steady_clock::time_point GetReceivedAt() const { return m_receivedAt; }\n\nprivate:\n  const string m_message;\n  const chrono::steady_clock::time_point m_receivedAt = chrono::steady_clock::now();\n}\n\nclass ParsedMessage {\npublic:\n  ParsedMessage(const ReceivedMessage&amp; rm)\n    : m_json(ParseMessage(rm.GetReceivedMessage()))\n  { }\n  const string&amp; GetJson() const { return m_json; }\n\nprivate:\n  const json_t m_json;\n}\n\nclass HandledMessage {\npublic:\n  HandledMessage(const ParsedMessage&amp; pm)\n    : m_result(HandleMessage(pm))\n  { }\n  const string&amp; GetResult() const { return m_result; }\n\nprivate:\n  const string m_result;\n}\n</code></pre>\n\n<p>... and so on. This works fine, but at the end of the \"pipeline\", a response needs to be sent. To form the response, attributes from the first type (e.g., <code>m_receivedAt</code>) are needed.</p>\n\n<p>I'm not sure of the best/right way to pass those early attributes through to the final type. Here are my ideas:</p>\n\n<ul>\n<li>Inheritance seems simple, but my peers say I should favor composition over inheritance.</li>\n<li>Each type could hold a copy of the preceding message type (i.e., ParsedMessage would hold a ReceivedMessage) and delegate calls for information from the earlier types to it, so ParsedMessage would have an additional method like <code>chrono::steady_clock::time_point GetReceivedAt() const { return m_parentMessage.GetReceivedAt(); }</code>. This feels verbose, and there's a lot of repetition if information needs to be passed from the first type to the last.</li>\n<li>Each message type could provide access to each of its parent message types, so to get <code>m_receivedAt</code> from a HandledMessage, it might look like <code>handledMessage.GetReceivedMessage().GetReceivedAt();</code>. This puts the burden of knowing which message type contains a particular attribute on the caller, though. I'm not sure that's something they need to deal with.</li>\n</ul>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1524086855, "post_id": 49909229, "comment_id": 86834433, "body": "Don&#39;t you just need <code>gsl::span&lt;T&gt; x</code>?"}, {"owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1524086975, "post_id": 49909229, "comment_id": 86834501, "body": "@NathanOliver When that accepts a <code>gsl::span&lt;int&gt;</code>, <code>x</code> is a mutable span instead of an immutable span... Is the use case realistic?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1524087046, "post_id": 49909229, "comment_id": 86834539, "body": "Ah, you want the span to be immutable in the function, not just take an immutable span if you get one."}, {"owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1524087574, "post_id": 49909229, "comment_id": 86834743, "body": "@NathanOliver yea."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1524087697, "post_id": 49909229, "comment_id": 86834798, "body": "The easiest way probably is to write a second overload taking <code>gsl::span&lt;T&gt;</code>. It can just call the original function, after casting the parameter."}, {"owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "edited": false, "score": 0, "creation_date": 1524090172, "post_id": 49909229, "comment_id": 86835684, "body": "How to write that overload? Sorry if I miss something basic because I learn c++ on my own. I tried <code>template &lt;typename T&gt; void foo(gsl::span&lt;T&gt; x) { foo&lt;const T&gt;(x); }</code> But that gives segmentation fault."}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 2, "last_activity_date": 1524090517, "last_edit_date": 1524090517, "creation_date": 1524090225, "answer_id": 49909898, "question_id": 49909229, "link": "https://stackoverflow.com/questions/49909229/write-template-function-that-accepts-mutable-span-as-an-immutable-span/49909898#49909898", "title": "Write template function that accepts mutable span as an immutable span", "body": "<p><code>gsl::span&lt;const T&gt;</code> has constructor accepting <code>gsl::span&lt;T&gt;</code>. So you \"just\" have an issue of template deduction.</p>\n\n<p>You have several ways to workaround your issue:</p>\n\n<ul>\n<li><p>Be explicit at call site:</p>\n\n<ul>\n<li>call <code>foo&lt;int&gt;(arr)</code></li>\n<li>or call <code>foo(gsl::span&lt;const int&gt;(arr))</code></li>\n</ul></li>\n<li><p>Write overloads:</p>\n\n<pre><code>template &lt;typename T&gt;\nvoid foo(gsl::span&lt;const T&gt; arr) { /* Your implementation */ }\n\ntemplate &lt;typename T&gt;\nvoid foo(gsl::span&lt;T&gt; arr) { foo(gsl::span&lt;const T&gt;(arr)); }\n</code></pre></li>\n<li><p>Write helper functions to be less explicit at call site, for example:</p>\n\n<pre><code>template &lt;typename T&gt;\nspan&lt;const T&gt; as_immutable_view(span&lt;T&gt; s) { return s; }\n</code></pre>\n\n<p>and then call <code>foo(as_immutable_view(arr))</code></p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 3521, "user_id": 658087, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/hvS4q.png?s=128&g=1", "display_name": "JD\u0142ugosz", "link": "https://stackoverflow.com/users/658087/jd%c5%82ugosz"}, "is_accepted": false, "score": 1, "last_activity_date": 1524610931, "creation_date": 1524610931, "answer_id": 50011843, "question_id": 49909229, "link": "https://stackoverflow.com/questions/49909229/write-template-function-that-accepts-mutable-span-as-an-immutable-span/50011843#50011843", "title": "Write template function that accepts mutable span as an immutable span", "body": "<p>How about just making a const version of the variable out of the parameter?</p>\n\n<pre><code>template &lt;typename T&gt;\nvoid foo(gsl::span&lt;T&gt; x_raw)\n{\n   gsl::span&lt;const T&gt; x { x_raw }; // add const if not already present\n   // use x in the code\n}\n</code></pre>\n"}], "owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 2, "accepted_answer_id": 49909898, "answer_count": 2, "score": 0, "last_activity_date": 1524610931, "creation_date": 1524086668, "last_edit_date": 1524087711, "question_id": 49909229, "link": "https://stackoverflow.com/questions/49909229/write-template-function-that-accepts-mutable-span-as-an-immutable-span", "title": "Write template function that accepts mutable span as an immutable span", "body": "<p>A <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/docs/gsl-intro.md\" rel=\"nofollow noreferrer\">gsl::span</a> is view of a piece of memory.</p>\n\n<p><code>foo</code> is a template function that can accept either a mutable span and an immutable span. </p>\n\n<p>I want the code within <code>foo</code> to always only have immutable access to the piece memory.</p>\n\n<pre><code>#include &lt;gsl/gsl&gt;  // gsl-lite\n\ntemplate &lt;typename T&gt;\nvoid foo(gsl::span&lt;const T&gt; x) {}\n\nint main() {\n    int arr[] = {0, 1, 2, 3, 4};\n    auto s1 = gsl::span&lt;int&gt;(arr);\n    foo(s1);\n}\n</code></pre>\n\n<p>This doesn't work because no type conversion during template instantiation.</p>\n\n<p>If I write the following instead:</p>\n\n<pre><code>template &lt;typename T&gt;\nvoid foo(gsl::span&lt;T&gt; x) {}\n</code></pre>\n\n<p>Within <code>foo</code>, <code>x</code> can be a mutable span.</p>\n\n<p>What is the correct fix for this use case?</p>\n"}, {"tags": ["c++", "operator-overloading", "language-lawyer"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 5, "creation_date": 1524085692, "post_id": 49909016, "comment_id": 86833971, "body": "Whatever you define it to be. It&#39;s a user-defined operator?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1524086511, "post_id": 49909016, "comment_id": 86834288, "body": "Admittedly not the best example, but pretend there&#39;s a <code>struct Z { void operator=(int ); };</code> in front of that? Otherwise, it doesn&#39;t matter what it means - the point is just to demonstrate that you can have user-defined <code>operator[]</code> for class types."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1524086574, "post_id": 49909016, "comment_id": 86834316, "body": "Even better, pretend <code>using Z = int&amp;;</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1524086744, "post_id": 49909016, "comment_id": 86834383, "body": "<code>X</code> is apparently something that acts like a multi-dimensional array, and <code>Z</code> is the type of the elements that it holds."}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 4, "last_activity_date": 1524141803, "last_edit_date": 1524141803, "creation_date": 1524086764, "answer_id": 49909257, "question_id": 49909016, "link": "https://stackoverflow.com/questions/49909016/what-is-the-meaning-of-the-subscript-operator-used-in-the-example-in-over-sub/49909257#49909257", "title": "What is the meaning of the subscript operator used in the example in [over.sub]/1?", "body": "<blockquote>\n  <p>What is <code>Z</code> in the operator[] declaration?</p>\n</blockquote>\n\n<p>It is the return type of the function.  It's not used in the example at all so there is no reason for it to actual be defined as something it i just there to show that the function returns something.  Maybe they should but it isn't really needed.</p>\n\n<blockquote>\n  <p>What is the probable meaning of the expression <code>x[{1,2,3}] = 7;</code> ?</p>\n</blockquote>\n\n<p>I believe it is showing that you can actually pass more than one value but still have it count as one parameter as the operator is defined as having</p>\n\n<blockquote>\n  <p>[...]exactly one parameter[...]</p>\n</blockquote>\n\n<p>Since the entire <code>initializer_list</code> is the actual parameter it allows you to pass many values.  This could be one way to write a index of operator for an N dimension matrix.  Instead over overloading the <code>operator()</code> you could overload the <code>operator[]</code> with an <code>initializer_list</code> where each value is a index for the corresponding dimension.</p>\n"}], "owner": {"reputation": 3019, "user_id": 411165, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YYrH2.jpg?s=128&g=1", "display_name": "Ayrosa", "link": "https://stackoverflow.com/users/411165/ayrosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1524141803, "creation_date": 1524085597, "last_edit_date": 1592644375, "question_id": 49909016, "link": "https://stackoverflow.com/questions/49909016/what-is-the-meaning-of-the-subscript-operator-used-in-the-example-in-over-sub", "title": "What is the meaning of the subscript operator used in the example in [over.sub]/1?", "body": "<p><a href=\"http://eel.is/c++draft/over.sub#1\" rel=\"nofollow noreferrer\">[over.sub]/1</a></p>\n<p>Example:</p>\n<pre><code>struct X {\n    Z operator[](std::initializer_list&lt;int&gt;);\n};\nX x;\nx[{1,2,3}] = 7; // OK: meaning x.operator[]({1,2,3})\nint a[10];\na[{1,2,3}] = 7; // error: built-in subscript operator\n</code></pre>\n<p>What is <code>Z</code> in the operator[] declaration?<br />\nWhat is the probable meaning of the expression <code>x[{1,2,3}] = 7;</code> ?</p>\n"}, {"tags": ["c++", "opencv", "video-capture"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 2, "creation_date": 1524086834, "post_id": 49909001, "comment_id": 86834420, "body": "Mask out the upper bits, so you&#39;re left only with the 7 least significant ones and see if it makes any more sense. | Just curious -- what platform, what OpenCV version, and where did that build come from?"}, {"owner": {"reputation": 1378, "user_id": 4405942, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c7bec3f70a2a1a0c35a5a33323b4f51?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/4405942/gerry"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1524088117, "post_id": 49909001, "comment_id": 86834960, "body": "Correct. That solved it. Thank you. FYI: ubuntu, opencv 3.1, and I don&#39;t know what that means."}], "owner": {"reputation": 1378, "user_id": 4405942, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1c7bec3f70a2a1a0c35a5a33323b4f51?s=128&d=identicon&r=PG&f=1", "display_name": "Gerry", "link": "https://stackoverflow.com/users/4405942/gerry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "closed_date": 1524088043, "answer_count": 0, "score": 0, "last_activity_date": 1524085522, "creation_date": 1524085522, "question_id": 49909001, "link": "https://stackoverflow.com/questions/49909001/waitkey-outputs-garbage-when-using-videocapture", "closed_reason": "Duplicate", "title": "waitKey() outputs garbage when using VideoCapture", "body": "<p>I'm trying to stop webcam playback on pressing escape.</p>\n\n<pre><code>cv::VideoCapture cap(0);\nwhile(true){\n    cv::Mat cameraFrame;\n    cap.read(cameraFrame);\n    cv::imshow(\"cam\", cameraFrame);\n            std::cerr&lt;&lt;cv::waitKey(1);\n    if (cv::waitKey(1) == 27){\n        if( cap.isOpened() )\n            cap.release();\n    }\n}\n</code></pre>\n\n<p>Code is from <a href=\"http://www.cplusplus.com/forum/general/154365/\" rel=\"nofollow noreferrer\">here</a>. The webcam is never closing and the output of this thing is:</p>\n\n<pre><code>-1-1-1-1-11048603-1-1-1-11048603-1-11048603-1-110486031048603-110486031048603-1-11048689-1104868910486891048689-1-1-111140831310819-1-1-1-1-1-1-1-11114089-1-1-1\n</code></pre>\n\n<p>Where -1 is the code for pressing nothing, 1048603 is escape and 1114089 is the letter q. What on earth is happening? I was expecting ascii key codes. How do I make my program react to pressing escape or q in a correct way? This does not occur if </p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "webrtc"], "answers": [{"tags": [], "owner": {"reputation": 11384, "user_id": 4352772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/olHTi.jpg?s=128&g=1", "display_name": "Philipp Hancke", "link": "https://stackoverflow.com/users/4352772/philipp-hancke"}, "is_accepted": true, "score": 1, "last_activity_date": 1524085494, "creation_date": 1524085494, "answer_id": 49908993, "question_id": 49908883, "link": "https://stackoverflow.com/questions/49908883/webrtc-native-c-examples-difference-between-the-relay-server-and-turn-server/49908993#49908993", "title": "WebRTC Native C++ examples: Difference between the relay server and turn server", "body": "<p>no, the relay-server is a very old version of google's TURN variant dating from before TURN became a standard.</p>\n"}], "owner": {"reputation": 405, "user_id": 7817385, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2c7a1101a066bf53c7a52b441a1280fc?s=128&d=identicon&r=PG&f=1", "display_name": "Valdir", "link": "https://stackoverflow.com/users/7817385/valdir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 914, "favorite_count": 0, "accepted_answer_id": 49908993, "answer_count": 1, "score": 1, "last_activity_date": 1524085494, "creation_date": 1524084950, "question_id": 49908883, "link": "https://stackoverflow.com/questions/49908883/webrtc-native-c-examples-difference-between-the-relay-server-and-turn-server", "title": "WebRTC Native C++ examples: Difference between the relay server and turn server", "body": "<p>I want to know the differences in use of these two examples as it both seem to relay a connection:</p>\n\n<p><a href=\"https://webrtc.googlesource.com/src/+/master/examples/relayserver/relayserver_main.cc\" rel=\"nofollow noreferrer\">https://webrtc.googlesource.com/src/+/master/examples/relayserver/relayserver_main.cc</a></p>\n\n<p><a href=\"https://webrtc.googlesource.com/src/+/master/examples/turnserver/turnserver_main.cc\" rel=\"nofollow noreferrer\">https://webrtc.googlesource.com/src/+/master/examples/turnserver/turnserver_main.cc</a></p>\n\n<p>I'm already using turn server for browser to browser connections and I know, for example, that media servers like Kurento relays peer connections in order to save the user's bandwidth when connecting to multiple peers. Is the WebRTC Native relay server example the same as Kurento, (I mean, the concept)?</p>\n"}, {"tags": ["c++", "multidimensional-array", "filestream", "readfile"], "answers": [{"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 1, "last_activity_date": 1524090271, "creation_date": 1524090271, "answer_id": 49909909, "question_id": 49908871, "link": "https://stackoverflow.com/questions/49908871/how-do-i-read-a-file-and-store-it-as-a-matrix-2d-aray/49909909#49909909", "title": "How do I read a file and store it as a Matrix (2D aray)?", "body": "<p>You are almost there with your <code>createMatrix</code> function, but <code>return myArray[V][V];</code> not what you want to do. This is saying return a single  <code>int</code> that is outside the bounds of the array(Array of size V is valid 0 to V-1. <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">Undefined Behaviour</a> badness will result from breaching the array's bounds. </p>\n\n<p>Fortunately you don't have to return a darn thing. <code>myArray</code> is a pointer to the array that <code>createMatrix</code> was called with (See <a href=\"https://stackoverflow.com/questions/1461432/what-is-array-decaying\">What is array decaying?</a>) so <code>in &gt;&gt; myArray[i][j];</code> is reading the file directly into the array.</p>\n\n<p>So with a few checks to make sure the reading succeeded:</p>\n\n<pre><code>bool createMatrix(int myArray[V][V]) \n{\n    ifstream in(\"C:\\\\Users\\\\Austin\\\\Documents\\\\adjMatrix\\\\output.txt\");\n    if (in) // if the file is open and readable\n    {\n        for (int i = 0; i &lt; V; i++)\n        {\n            for (int j = 0; j &lt; V; j++)\n            {\n                if (!(in &gt;&gt; myArray[i][j]))\n                { // failed to read a value from the file. Bad file\n                    // may want to log the error here so you know why it failed\n                    return false;\n                }\n            }\n        }\n    }\n    else\n    { // couldn't open the file\n        // may want to log the error here so you know why it failed\n        return false;\n    }\n    return true; // read everything we wanted to read. all done.\n}\n</code></pre>\n\n<p>and then in <code>main</code></p>\n\n<pre><code>int main()\n{\n    int graph[V][V];\n    if (createMatrix(graph)) \n    { // read the file successfully\n        int m = 5; // Number of colors\n        graphColoring(graph, m);\n    }\n    else\n    { // did not read the file successfully\n         // display failure message\n    }\n    system(\"pause\");\n}\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 8003362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02bf9806119de16684ab3d083e3a6f6a?s=128&d=identicon&r=PG&f=1", "display_name": "Gene", "link": "https://stackoverflow.com/users/8003362/gene"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 0, "accepted_answer_id": 49909909, "answer_count": 1, "score": 2, "last_activity_date": 1608182039, "creation_date": 1524084885, "last_edit_date": 1608182039, "question_id": 49908871, "link": "https://stackoverflow.com/questions/49908871/how-do-i-read-a-file-and-store-it-as-a-matrix-2d-aray", "title": "How do I read a file and store it as a Matrix (2D aray)?", "body": "<p>I have a graph coloring program that takes in a 2D array as an adjacency matrix and colors the graph based on that adjacency matrix.  This file is <code>Color.cpp</code>. I have another program that creates this adjacency matrix and puts it in a text file, this program <code>AdjacencyMatrix.cpp</code>.</p>\n<p>When I originally created the coloring program, I hard coded the adjacency matrix into the 2D array <code>graph[V][V]</code> where V is the number of vertices.</p>\n<p>These are two separate programs, I was just copying and pasting the adjacency matrix created by <code>AdjacencyMatrix.cpp</code> into <code>Color.cpp</code>.</p>\n<p>Because my program already creates a file with the adjacency matrix in it, I want to have my coloring program read that file.  I know best practice is to combine them and have the matrix stored in the array passed into the coloring program in one cohesive program. I think reading a file is my simplest solution at this point, but if more experienced users can show me how to store the matrix in a data structure and pass it into the coloring program, I welcome it.</p>\n<p><strong>AdjacencyMatrix.cpp</strong></p>\n<p>This program takes in a file that is a string of integers listed as adjacent pairs and creates an adjacency matrix from it, then stores it in a file.  The file &quot;24cell_skeleton.txt&quot; is the file it reads in and &quot;out.txt&quot; is the file it prints the matrix into.</p>\n<pre><code>#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\nconst int cellSize = 24;\nbool graph[cellSize][cellSize];\nint prevNum = -1;\nint currNum = -1;\n\n\nbool markMatrix(int x, int y) {\ngraph[x][y] = true;\ngraph[y][x] = true;\n/*std:cout &lt;&lt; &quot;adding pair: &quot; &lt;&lt; y &lt;&lt; &quot;,&quot; &lt;&lt; x &lt;&lt; &quot;\\n&quot;;*/\nreturn true;\n\n}\n\nint main()\n{\n\nifstream in(&quot;C:\\\\Users\\\\Austin\\\\Documents\\\\adjMatrix\\\\24cell_skeleton.txt&quot;);\nofstream out;\nout.open(&quot;C:\\\\Users\\\\Austin\\\\Documents\\\\adjMatrix\\\\output.txt&quot;, ios::out);\nios::out;\n\nstring line, field;\n\nvector&lt; vector&lt;string&gt; &gt; array;  // the 2D array\nvector&lt;string&gt; v;                // array of values for one line only\n\nwhile (getline(in, line))    // get next line in file\n{\n    v.clear();\n    stringstream ss(line);\n\n    while (getline(ss, field, ','))  // break line into comma delimited fields\n    {\n        v.push_back(field);  // add each field to the 1D array\n    }\n\n    array.push_back(v);  // add the 1D array to the 2D array\n}\n\n// print out what was read in\nbool firstIter = true;\n\nfor (size_t i = 0; i&lt;array.size(); ++i)\n{\n    for (size_t j = 0; j&lt;array[i].size(); ++j)\n    {\n        string curr = array[i][j]; // (separate fields by |)\n        prevNum = currNum;\n        currNum = stoi(curr);\n\n        if (j != 0 &amp;&amp; firstIter) { //if its not the first iteration . . . or the last?\n                                   /*out &lt;&lt; &quot;adding pair: &quot; &lt;&lt; prevNum &lt;&lt; &quot;,&quot; &lt;&lt; currNum &lt;&lt; &quot;\\n&quot;;*/\n            markMatrix(prevNum, currNum);\n        }\n    }\n    firstIter = false;\n\n}\n\nin.close();\n\n\n//std::cout &lt;&lt; &quot;{&quot;;\nfor (int i = 1; i &lt;= cellSize; ++i)\n{\n    std::cout &lt;&lt; &quot;{&quot;;\n    out &lt;&lt; &quot;{&quot;;\n    for (int j = 1; j &lt;= cellSize; ++j)\n    {\n        //std::cout &lt;&lt; &quot;{&quot;;\n        std::cout &lt;&lt; graph[i][j] &lt;&lt; ' ';\n        std::cout &lt;&lt; &quot;, &quot;;\n        out &lt;&lt; graph[i][j] &lt;&lt; ' ';\n        out &lt;&lt; &quot;, &quot;;\n        //std::cout &lt;&lt; &quot;}&quot;;\n    }\n    out &lt;&lt; &quot;},&quot;;\n    std::cout &lt;&lt; &quot;},&quot;;\n    std::cout &lt;&lt; std::endl;\n}\n\n//std::cout &lt;&lt; &quot;}&quot;;\n\nout.close();\n//cout &lt;&lt; graph[534][42];\n\nsystem(&quot;pause&quot;);\nreturn 0;\n\n}\n</code></pre>\n<p><strong>Color.cpp</strong></p>\n<p>This file colors a graph given an adjacency matrix. Like I mentioned before, the matrix is hard coded into it (copy and pasted from the file the previous program created). This is where I would like to read the file instead of copy and paste it myself.</p>\n<pre><code>#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;fstream&gt;\n#include&lt;stdio.h&gt;\n#include&lt;cstdio&gt;\n\n\n// Number of vertices in the graph\n#define V 24\n\nusing namespace std;\n\n//this function was added in the update to attempt reading file and storing into a 2d matrix\n\nint createMatrix(int myArray[V][V]) \n{\n  ifstream in(&quot;C:\\\\Users\\\\Austin\\\\Documents\\\\adjMatrix\\\\output.txt&quot;);\n\n  for (int i = 0; i &lt; V; i++)\n  {\n    for (int j = 0; j &lt; V; j++)\n    {\n        in &gt;&gt; myArray[i][j];\n    }\n  }\nreturn myArray[V][V];\n}\n//end of updated code added\n\nvoid printSolution(int color[]);\n\n/* A utility function to check if the current color assignment\nis safe for vertex v */\nbool isSafe(int v, bool graph[V][V], int color[], int c)\n{\nfor (int i = 0; i &lt; V; i++)\n    if (graph[v][i] &amp;&amp; c == color[i])\n        return false;\nreturn true;\n}\n\n/* A recursive utility function to solve m coloring problem */\nbool graphColoringUtil(bool graph[V][V], int m, int color[], int v)\n{\n/* base case: If all vertices are assigned a color then\nreturn true */\nif (v == V)\n    return true;\n\n/* Consider this vertex v and try different colors */\nfor (int c = 1; c &lt;= m; c++)\n{\n    /* Check if assignment of color c to v is fine*/\n    if (isSafe(v, graph, color, c))\n    {\n        color[v] = c;\n\n        /* recur to assign colors to rest of the vertices */\n        if (graphColoringUtil(graph, m, color, v + 1) == true)\n            return true;\n\n        /* If assigning color c doesn't lead to a solution\n        then remove it */\n        color[v] = 0;\n    }\n}\n\n/* If no color can be assigned to this vertex then return false */\nreturn false;\n}\n\nbool graphColoring(bool graph[V][V], int m)\n{\n// Initialize all color values as 0. This initialization is needed\n// correct functioning of isSafe()\nint *color = new int[V];\nfor (int i = 0; i &lt; V; i++)\n    color[i] = 0;\n\n// Call graphColoringUtil() for vertex 0\nif (graphColoringUtil(graph, m, color, 0) == false)\n{\n    std::cout &lt;&lt; &quot;Solution does not exist&quot;;\n    return false;\n}\n\n// Print the solution\nprintSolution(color);\nreturn true;\n}\n\n/* A utility function to print solution */\nvoid printSolution(int color[])\n{\nstd::cout &lt;&lt; &quot;Solution Exists:&quot;\n    &quot; Following are the assigned colors \\n&quot;;\nfor (int i = 0; i &lt; V; i++)\n    std::cout &lt;&lt; color[i];\nstd::cout &lt;&lt; &quot;\\n&quot;;\n}\n\n// driver program to test above function\nint main()\n{\n\n/* Create following graph and test whether it is 3 colorable\n(3)---(2)\n| / |\n| / |\n| / |\n(0)---(1)\n*/\nbool graph[V][V] = {\n    { 0 , 1 , 0 , 1 , 1 , 0 , 0 , 1 , 1 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 1 , 1 , 1 , 0 , 1 , 1 , 0 , 0 , },\n    { 1 , 1 , 1 , 0 , 0 , 1 , 1 , 0 , 0 , 1 , 1 , 0 , 0 , 0 , 0 , 0 , 1 , 1 , 1 , 0 , 0 , 1 , 0 , 0 , },\n    { 0 , 1 , 1 , 1 , 0 , 0 , 1 , 1 , 0 , 0 , 1 , 0 , 0 , 0 , 0 , 0 , 1 , 1 , 1 , 1 , 0 , 0 , 0 , 1 , },\n    { 1 , 0 , 1 , 0 , 0 , 0 , 0 , 1 , 1 , 0 , 0 , 1 , 0 , 0 , 0 , 0 , 1 , 1 , 0 , 1 , 1 , 1 , 0 , 0 , },\n    { 1 , 0 , 0 , 0 , 1 , 1 , 0 , 1 , 0 , 0 , 0 , 0 , 1 , 0 , 0 , 0 , 1 , 0 , 1 , 0 , 1 , 1 , 1 , 1 , },\n    { 0 , 1 , 0 , 0 , 1 , 0 , 1 , 0 , 0 , 0 , 0 , 0 , 0 , 1 , 0 , 0 , 1 , 0 , 1 , 1 , 0 , 1 , 1 , 0 , },\n    { 0 , 1 , 1 , 0 , 0 , 1 , 0 , 1 , 0 , 0 , 0 , 0 , 0 , 0 , 1 , 0 , 1 , 0 , 1 , 1 , 0 , 0 , 1 , 1 , },\n    { 1 , 0 , 1 , 1 , 1 , 0 , 1 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 1 , 1 , 0 , 0 , 1 , 1 , 0 , 1 , 1 , },\n    { 1 , 0 , 0 , 1 , 0 , 0 , 0 , 0 , 0 , 1 , 0 , 1 , 1 , 0 , 0 , 0 , 0 , 1 , 0 , 1 , 1 , 1 , 1 , 1 , },\n    { 0 , 1 , 0 , 0 , 0 , 0 , 0 , 0 , 1 , 1 , 1 , 0 , 0 , 1 , 1 , 0 , 0 , 1 , 1 , 0 , 0 , 1 , 0 , 1 , },\n    { 0 , 1 , 1 , 0 , 0 , 0 , 0 , 0 , 0 , 1 , 1 , 1 , 0 , 0 , 1 , 0 , 0 , 1 , 1 , 1 , 1 , 1 , 0 , 1 , },\n    { 0 , 0 , 0 , 1 , 0 , 0 , 0 , 0 , 1 , 0 , 1 , 0 , 0 , 0 , 0 , 1 , 0 , 1 , 0 , 1 , 1 , 0 , 1 , 1 , },\n    { 0 , 0 , 0 , 0 , 1 , 0 , 0 , 0 , 1 , 0 , 0 , 0 , 1 , 1 , 0 , 1 , 0 , 0 , 0 , 0 , 1 , 1 , 1 , 1 , },\n    { 0 , 0 , 0 , 0 , 0 , 1 , 0 , 0 , 0 , 1 , 0 , 0 , 1 , 1 , 1 , 0 , 0 , 0 , 1 , 0 , 0 , 1 , 1 , 1 , },\n    { 0 , 0 , 0 , 0 , 0 , 0 , 1 , 0 , 0 , 1 , 1 , 0 , 0 , 1 , 1 , 1 , 0 , 0 , 1 , 1 , 0 , 0 , 1 , 1 , },\n    { 0 , 0 , 0 , 0 , 0 , 0 , 0 , 1 , 0 , 0 , 0 , 1 , 1 , 0 , 1 , 1 , 0 , 0 , 0 , 1 , 1 , 0 , 1 , 1 , },\n    { 1 , 1 , 1 , 1 , 1 , 1 , 1 , 1 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , },\n    { 1 , 1 , 1 , 1 , 0 , 0 , 0 , 0 , 1 , 1 , 1 , 1 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , },\n    { 1 , 1 , 1 , 0 , 1 , 1 , 1 , 0 , 0 , 1 , 1 , 0 , 0 , 1 , 1 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , },\n    { 0 , 0 , 1 , 1 , 0 , 1 , 1 , 1 , 1 , 0 , 1 , 1 , 0 , 0 , 1 , 1 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , },\n    { 1 , 0 , 0 , 1 , 1 , 0 , 0 , 1 , 1 , 0 , 1 , 1 , 1 , 0 , 0 , 1 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , },\n    { 1 , 1 , 0 , 1 , 1 , 1 , 0 , 0 , 1 , 1 , 1 , 0 , 1 , 1 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , },\n    { 0 , 0 , 0 , 0 , 1 , 1 , 1 , 1 , 1 , 0 , 0 , 1 , 1 , 1 , 1 , 1 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , },\n    { 0 , 0 , 1 , 0 , 1 , 0 , 1 , 1 , 1 , 1 , 1 , 1 , 1 , 1 , 1 , 1 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , },\n};\nint m = 5; // Number of colors\ngraphColoring(graph, m);\n//return 0;\n\nsystem(&quot;pause&quot;);\n}\n</code></pre>\n<p><strong>Is there a way to take in this matrix from the file rather than hard coding it into the program?</strong>  The brackets and commas are easy to add or remove from the file.  They are necessary when hard coded into the coloring program but I don't think they would be necessary if I could read from the file.</p>\n<p>To make this as clear as possible, where you see the 24x24 matrix in <code>Color.cpp</code>, I would like to have that section be a matrix read from out.txt that <code>AdjacencyMatrix.cpp</code> creates.</p>\n<p><strong>Edit/Update</strong></p>\n<p>I have this so far in the beginning of <code>color.cpp</code></p>\n<pre><code>int createMatrix(int myArray[V][V]) \n{\n  ifstream in(&quot;C:\\\\Users\\\\Austin\\\\Documents\\\\adjMatrix\\\\output.txt&quot;);\n\n  for (int i = 0; i &lt; V; i++)\n  {\n    for (int j = 0; j &lt; V; j++)\n    {\n        in &gt;&gt; myArray[i][j];\n    }\n  }\nreturn myArray[V][V];\n}\n</code></pre>\n<p>I know something is off here, but if I can get this to work I plan to use something like</p>\n<pre><code>bool graph[V][V] = \n{ \n    myArray[V][V]\n};\n</code></pre>\n<p>in <code>main()</code>.</p>\n<p>As of now VisualStudio says <code>myArray</code> is an undeclared identifier and is undefined in <code>main()</code>.</p>\n"}, {"tags": ["c++", "math", "visual-c++", "trigonometry"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1524084519, "post_id": 49908764, "comment_id": 86833478, "body": "It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming. Further reading: <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>"}, {"owner": {"reputation": 1551, "user_id": 806802, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/5kFde.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/806802/srini"}, "edited": false, "score": 0, "creation_date": 1524084819, "post_id": 49908764, "comment_id": 86833622, "body": "are you using Taylor&#39;s series to calculate sine?"}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 1, "creation_date": 1524084911, "post_id": 49908764, "comment_id": 86833663, "body": "Your code looks very different from the formula you claim to implement..."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1524085666, "post_id": 49908764, "comment_id": 86833966, "body": "Were do you add <code>x</code> ? I mean sin(x) = x - x^3/3! ..."}, {"owner": {"reputation": 344, "user_id": 8877217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec886d4b5b1bdafa8b9ef5d452ba932e?s=128&d=identicon&r=PG&f=1", "display_name": "Sharad Khanna", "link": "https://stackoverflow.com/users/8877217/sharad-khanna"}, "edited": false, "score": 0, "creation_date": 1524085710, "post_id": 49908764, "comment_id": 86833980, "body": "Where is x? It doesn&#39;t exist in the code."}, {"owner": {"reputation": 1551, "user_id": 806802, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/5kFde.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/806802/srini"}, "reply_to_user": {"reputation": 344, "user_id": 8877217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec886d4b5b1bdafa8b9ef5d452ba932e?s=128&d=identicon&r=PG&f=1", "display_name": "Sharad Khanna", "link": "https://stackoverflow.com/users/8877217/sharad-khanna"}, "edited": false, "score": 0, "creation_date": 1524085711, "post_id": 49908764, "comment_id": 86833981, "body": "@LoganPaul you are using radians, not degrees. sin(45 degrees) is 1/sqrt(2)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 344, "user_id": 8877217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec886d4b5b1bdafa8b9ef5d452ba932e?s=128&d=identicon&r=PG&f=1", "display_name": "Sharad Khanna", "link": "https://stackoverflow.com/users/8877217/sharad-khanna"}, "edited": false, "score": 0, "creation_date": 1524085733, "post_id": 49908764, "comment_id": 86833991, "body": "@LoganPaul sin(45 radians) = .85..., sin(45 degres) = .70..."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1524100920, "post_id": 49908764, "comment_id": 86838459, "body": "note that your power function is also <a href=\"https://stackoverflow.com/a/101613/995714\">not efficient</a>"}], "answers": [{"comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1524087967, "post_id": 49909096, "comment_id": 86834904, "body": "You don&#39;t need the <code>negative_flag</code> at all.  All you need is to flip between <code>1</code> and -<code>1</code> and multiply by that value. <code>double multiplier = 1.0; ...for(...) {... sin += term * multiplier; multiplier *= -1; }</code>"}, {"owner": {"reputation": 11, "user_id": 9566857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9347105f69a75bf50ae0f2ca5204ad91?s=128&d=identicon&r=PG&f=1", "display_name": "Johanson151", "link": "https://stackoverflow.com/users/9566857/johanson151"}, "edited": false, "score": 0, "creation_date": 1524088008, "post_id": 49909096, "comment_id": 86834925, "body": "@Srini Doesnt my &quot;odds&quot; variable skip all even numbers? Why didn&#39;t my function work?"}, {"owner": {"reputation": 1551, "user_id": 806802, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/5kFde.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/806802/srini"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1524088351, "post_id": 49909096, "comment_id": 86835072, "body": "@PaulMcKenzie yes that seems a bit cleaner :)"}, {"owner": {"reputation": 1551, "user_id": 806802, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/5kFde.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/806802/srini"}, "reply_to_user": {"reputation": 11, "user_id": 9566857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9347105f69a75bf50ae0f2ca5204ad91?s=128&d=identicon&r=PG&f=1", "display_name": "Johanson151", "link": "https://stackoverflow.com/users/9566857/johanson151"}, "edited": false, "score": 0, "creation_date": 1524088668, "post_id": 49909096, "comment_id": 86835183, "body": "@Johanson151 I&#39;ve edited my answer to provide some more explanation about what you were doing wrong :)"}, {"owner": {"reputation": 11, "user_id": 9566857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9347105f69a75bf50ae0f2ca5204ad91?s=128&d=identicon&r=PG&f=1", "display_name": "Johanson151", "link": "https://stackoverflow.com/users/9566857/johanson151"}, "edited": false, "score": 0, "creation_date": 1524090207, "post_id": 49909096, "comment_id": 86835694, "body": "@Srini Thank you very much! You were very helpful!"}, {"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "edited": false, "score": 0, "creation_date": 1524116571, "post_id": 49909096, "comment_id": 86842482, "body": "You don&#39;t need factorial and power at all. Since you&#39;re iterating over the term ordinal, it is possible to incrementally calculate next term in the series by simple multiplication/division."}, {"owner": {"reputation": 1551, "user_id": 806802, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/5kFde.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/806802/srini"}, "edited": false, "score": 0, "creation_date": 1524117279, "post_id": 49909096, "comment_id": 86842762, "body": "That&#39;s a great observation and a good suggestion for optimization."}], "tags": [], "owner": {"reputation": 1551, "user_id": 806802, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/5kFde.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/806802/srini"}, "is_accepted": true, "score": 3, "last_activity_date": 1524089098, "last_edit_date": 1524089098, "creation_date": 1524085981, "answer_id": 49909096, "question_id": 49908764, "link": "https://stackoverflow.com/questions/49908764/sin-algorithm-not-working/49909096#49909096", "title": "Sin algorithm not working", "body": "<p>your taylor series expansion function is incorrect. :)</p>\n\n<p>you have to disregard all even terms.</p>\n\n<p>I have fixed it for you (i removed some windows specific stuff as I don;t have a windows machine: the <code>stdfax.h</code> header and the calls to <code>pause</code> were removed)</p>\n\n<pre><code># include &lt;cstdlib&gt;\n# include &lt;iostream&gt;\n\nusing namespace std;\n\ndouble sin(int input, int decimal_count);\nint factorial(int n);\ndouble deg_to_rad(int deg);\ndouble power(double base, int power);\n\n\nint main(){\n    double angle;\n    int decimal;\n\n    cout &lt;&lt; \"The sine value is: \" &lt;&lt; sin(45,8) &lt;&lt; endl;\n\n    //end\n    system(\"sleep 2\");\n    return 0;\n}\n\ndouble sin(int input, int accuracy) {\n    int odds = 3;\n    double sin;\n    double rads = deg_to_rad(input);\n    bool negative_flag = true;\n    cout &lt;&lt; \"You entered \" &lt;&lt; input &lt;&lt; \" degrees\" &lt;&lt; endl;\n    cout &lt;&lt; \"This is \" &lt;&lt; rads &lt;&lt; \" radians\" &lt;&lt; endl;\n    sin = rads;\n\n    for (int taylor_term = 3; taylor_term &lt;= 7; taylor_term += 2) {\n        double term = (double)(power(rads, taylor_term) / factorial(taylor_term));\n        if (negative_flag) {\n            term = -1 * term;\n        }\n        negative_flag = !(negative_flag);\n        sin += term;\n    }\n    return sin;\n}\n\n\n\nint factorial(int n) {\n    int fact = 1;\n\n    for (int j = 1; j &lt;= n; j+=1) {\n        fact = fact * j;\n    }\n    return fact;\n}\n</code></pre>\n\n<p>Running this output</p>\n\n<pre><code>You entered 45 degrees\nThis is 0.785398 radians\nThe sine value is: 0.707106\n</code></pre>\n\n<h3>Explanation</h3>\n\n<p>The taylor series expansion for sine is a series of terms with odd taylor's coefficients that alternate  in sign. In my code the alternating signs is effected by the flag. I've also taken into account only the first 3 terms of the taylor series expansion. </p>\n\n<p>Other than that, the line <code>double term = (double)(power(rads, taylor_term) / factorial(taylor_term));</code> calculates every term in the taylor series expansion.</p>\n\n<p><code>negative_flag = !(negative_flag);</code> resets the flag sign for the next term.</p>\n\n<h3>Addressing your comment and where your code was a bit wrong</h3>\n\n<p>Below is your sin func with minimal changes to make it work.\nWhat you were doing wrong</p>\n\n<p><strong><em>These are just minimal edits, performing these edits would naturally be followed up with some code style cleanup. eg: the <code>if</code> and <code>else</code> block(not <code>else if</code>) have almost the exact same code</em></strong></p>\n\n<ol>\n<li>sin was not being initialized before being modified</li>\n<li>the attribution to correct signs the taylor terms in the <code>if</code> blocks was not correct.</li>\n<li><p>the extra subtraction of <code>rads</code> at the end from <code>sin</code> was not required. Once these things were fixed, your code works :)</p>\n\n<pre><code>int odds = 3;\ndouble sin ;\ndouble rads = deg_to_rad(input);\nsin = rads;\n\nfor (int i = 1; i &lt;= accuracy; i += 1) {\n\n\n    if (i==1) {\n        sin = sin - power(rads, odds) / factorial(odds);\n    }\n    else if (i%2==0) {\n        sin = (power(rads, odds) / factorial(odds)) + sin;\n\n    }\n    else {\n        sin = -(power(rads, odds) / factorial(odds)) + sin;\n\n    }\n    odds = odds + 2;\n\n}\nreturn sin;\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 9566857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9347105f69a75bf50ae0f2ca5204ad91?s=128&d=identicon&r=PG&f=1", "display_name": "Johanson151", "link": "https://stackoverflow.com/users/9566857/johanson151"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 1, "accepted_answer_id": 49909096, "answer_count": 1, "score": 0, "last_activity_date": 1524089098, "creation_date": 1524084410, "question_id": 49908764, "link": "https://stackoverflow.com/questions/49908764/sin-algorithm-not-working", "title": "Sin algorithm not working", "body": "<p>I made a c++ program that calculates sin without math.h. Im using this algorithm for my program <a href=\"https://ibb.co/bTnQnS\" rel=\"nofollow noreferrer\">https://ibb.co/bTnQnS</a>. I enter 45 degrees, the program converts degrees to radians, the program uses the algorithm, and the program outputs -0.868597. The program should output 0.70710678 or \u221a2/2. What am I doing wrong with the algorithm?</p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n\nusing namespace std;\n\ndouble sin(int input, int decimal_count);\nint factorial(int n);\ndouble deg_to_rad(int deg);\ndouble power(double base, int power);\n\n\nint main(){\n    double angle;\n    int decimal;\n\n    cout &lt;&lt; sin(45,8) &lt;&lt; endl;\n\n    //end\n    system(\"pause\");\n    return 0;\n}\n\ndouble sin(int input, int accuracy) {\n    int odds = 3;\n    double sin;\n    double rads = deg_to_rad(input);\n\n    for (int i = 1; i &lt;= accuracy; i += 1) {\n\n\n        if (i==1) {\n            sin = power(rads, odds) / factorial(odds);\n        }\n        else if (i%2==0) { \n            sin = (power(rads, odds) / factorial(odds)) + sin; \n\n        }\n        else {\n            sin = (power(rads, odds) / factorial(odds)) - sin;\n\n        }\n        odds = odds + 2;\n\n    }\n    sin = sin - rads;\n    return sin;\n}\n\n\n\nint factorial(int n) {\n    int fact = 1;\n\n    for (int j = 1; j &lt;= n; j+=1) {\n        fact = fact * j;\n    }\n    return fact;\n}\n\n\n\ndouble deg_to_rad(int deg) {\n    return deg*(3.14159265/180);\n}\n\n\ndouble power(double base, int power) {\n    double ans = 1;\n\n    for (int k = 1; k &lt;= power; k+=1) {\n        ans = ans * base;\n    }\n\n    return ans;\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "glfw"], "comments": [{"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 3, "creation_date": 1524087109, "post_id": 49908762, "comment_id": 86834570, "body": "Edit in a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 764, "user_id": 7598582, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EeiMh_v63wE/AAAAAAAAAAI/AAAAAAAABSo/N4ZLgGMTlkk/photo.jpg?sz=128", "display_name": "Paritosh Kulkarni", "link": "https://stackoverflow.com/users/7598582/paritosh-kulkarni"}, "edited": false, "score": 0, "creation_date": 1524120945, "post_id": 49908762, "comment_id": 86844617, "body": "Your problem sounds very similar to particle system using point sprites. Have look at them."}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1524122871, "post_id": 49908762, "comment_id": 86845800, "body": "If you want the points to appear over time and never disappear, then place the glDrawArrays outside of the loop and increase the count instead of the start."}, {"owner": {"reputation": 45, "user_id": 7190389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02aa0bdfa752aca7f49ca50b24d79406?s=128&d=identicon&r=PG&f=1", "display_name": "Nas25", "link": "https://stackoverflow.com/users/7190389/nas25"}, "edited": false, "score": 0, "creation_date": 1524124098, "post_id": 49908762, "comment_id": 86846560, "body": "Thank you BDL!!! The issue here was exactly that - I was increasing the start whilst incrementing the index...doh! Thanks again!"}], "answers": [{"tags": [], "owner": {"reputation": 45, "user_id": 7190389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02aa0bdfa752aca7f49ca50b24d79406?s=128&d=identicon&r=PG&f=1", "display_name": "Nas25", "link": "https://stackoverflow.com/users/7190389/nas25"}, "is_accepted": false, "score": 0, "last_activity_date": 1524419747, "creation_date": 1524419747, "answer_id": 49969005, "question_id": 49908762, "link": "https://stackoverflow.com/questions/49908762/opengl-points-drawn-disappear-draw-call-and-swap-buffer-issue/49969005#49969005", "title": "OpenGL points drawn disappear, draw call and swap buffer issue?", "body": "<p>Fixed this issue by increasing the 'count' argument in glDrawArrays as suggested by BDL in the comments! Thanks!</p>\n"}], "owner": {"reputation": 45, "user_id": 7190389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02aa0bdfa752aca7f49ca50b24d79406?s=128&d=identicon&r=PG&f=1", "display_name": "Nas25", "link": "https://stackoverflow.com/users/7190389/nas25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1524419747, "creation_date": 1524084407, "last_edit_date": 1524087057, "question_id": 49908762, "link": "https://stackoverflow.com/questions/49908762/opengl-points-drawn-disappear-draw-call-and-swap-buffer-issue", "title": "OpenGL points drawn disappear, draw call and swap buffer issue?", "body": "<p>I am wanting to draw points on screen from the vertex data already sent to the GPU using GL_POINTS. At the moment they are drawn for a split second and then disappear. I am using a time-dependent loop as I want the points to appear sequentially...</p>\n\n<pre><code>if (currentTime &gt; insertionRateTime)\n{\n    cout &lt;&lt; \"insertionRateTime = \" &lt;&lt; insertionRateTime &lt;&lt; \"index\" &lt;&lt; index &lt;&lt; endl;\n    insertionRateTime += insertionRate;\n    glDrawArrays(GL_POINTS, index, 1); \n    index += 1;\n}\n\nglfwSwapBuffers(window);\nglfwPollEvents();\n</code></pre>\n\n<p>Can anybody shed any light here? If I place the glDrawArrays outside of the if statement then the points drawn remain until the next point is drawn :(</p>\n"}, {"tags": ["c++", "string", "vector", "gtkmm"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7686038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2a7a0935689399ca09bc1036336eec0?s=128&d=identicon&r=PG&f=1", "display_name": "Duy Nguyen", "link": "https://stackoverflow.com/users/7686038/duy-nguyen"}, "edited": false, "score": 0, "creation_date": 1524085389, "post_id": 49908858, "comment_id": 86833869, "body": "So please tell  me what should I do to prevent this crash? Thanks! I have tried using Order *order0 = new Order (1); but it still doesn&#39;t work."}], "tags": [], "owner": {"reputation": 382, "user_id": 9577131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb34545785599110d51fed19873e1913?s=128&d=identicon&r=PG&f=1", "display_name": "atrelinski", "link": "https://stackoverflow.com/users/9577131/atrelinski"}, "is_accepted": false, "score": 0, "last_activity_date": 1524085767, "last_edit_date": 1524085767, "creation_date": 1524084836, "answer_id": 49908858, "question_id": 49908431, "link": "https://stackoverflow.com/questions/49908431/do-c-vector-and-gtkmm-work-together-perfectly-segmentation-fault-when-gettin/49908858#49908858", "title": "Do C++ vector and Gtkmm work together perfectly?. Segmentation fault when getting values of vector&lt;string&gt; from gtkmm on_click method", "body": "<p>In the method <code>auto_add()</code>, <code>Order</code> object is created, which is destroyed in the end of <code>auto_add()</code> method. However in mean time pointer to this object is added to vector <code>orders</code>. This pointer point to invalid data in memory outside <code>auto_add()</code> method. Accessing data behind this pointer give crash.</p>\n\n<pre><code>void Emporium::auto_add() {\n  Order order0(1); //creating order0 local variable\n  add_order(&amp;order0);  //here pointer to something that will be destroyed soon is stored\n  std::vector&lt;std::string&gt; record = order_to_strings(0);\n  std::cout &lt;&lt; \"This is printing from emporium.cpp class\" &lt;&lt;std::endl \n            &lt;&lt; \"Id:\" &lt;&lt; record[0] &lt;&lt;\"State: \"&lt;&lt; record[1]&lt;&lt;\"Price:\"&lt;&lt; record[2]&lt;&lt; std::endl;    \n} //order0 local variable is destroyed here\n\nvoid Emporium::add_order (Order* order) {\n  orders.push_back(order);\n}\n</code></pre>\n\n<p>One of possible solution to prevent crash you can create <code>Order</code> object like this:</p>\n\n<pre><code>void Emporium::auto_add() {\n  add_order(new Order(1));\n  std::vector&lt;std::string&gt; record = order_to_strings(0);\n  std::cout &lt;&lt; \"This is printing from emporium.cpp class\" &lt;&lt;std::endl \n            &lt;&lt; \"Id:\" &lt;&lt; record[0] &lt;&lt;\"State: \"&lt;&lt; record[1]&lt;&lt;\"Price:\"&lt;&lt; record[2]&lt;&lt; std::endl;    \n}\n</code></pre>\n\n<p>But then for code correctness, remember to delete orders that are in <code>std::vector&lt;Order*&gt;  orders</code> in the <code>Emporium</code> class destructor.</p>\n"}], "owner": {"reputation": 1, "user_id": 7686038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2a7a0935689399ca09bc1036336eec0?s=128&d=identicon&r=PG&f=1", "display_name": "Duy Nguyen", "link": "https://stackoverflow.com/users/7686038/duy-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524085767, "creation_date": 1524082977, "question_id": 49908431, "link": "https://stackoverflow.com/questions/49908431/do-c-vector-and-gtkmm-work-together-perfectly-segmentation-fault-when-gettin", "title": "Do C++ vector and Gtkmm work together perfectly?. Segmentation fault when getting values of vector&lt;string&gt; from gtkmm on_click method", "body": "<p>I am in middle of creating treeview for my project using gtkmm and C++. \nWhat I want to do is to get variable properties from my <strong>order</strong> class. And I choose to use vector to store those properties so I get them easily by calling that method in the different class such as my <strong>main_window</strong> class. I can successfully get all values from other classes except <strong>main_window</strong> class showing segmentation fault. </p>\n\n<p>To run my program:\n1/ type \"make\" in terminal\n2/ type \"./mice\" to run program\n3/ click file->test. The program crashes</p>\n\n<p>main_window.cpp class:</p>\n\n<pre><code>void Main_window::on_test_click() {\nstd::cout&lt;&lt; \" On _test_clicked\\n\";\n//auto add 1 order\ncontroller.execute_cmd(99);\n //THE LINE BELOW IS NOT WORKING IN ON_TEST_CLICK\nstd::vector&lt;std::string&gt; record = controller.order_to_strings(0);\n</code></pre>\n\n<p>}</p>\n\n<p>auto_add method from emporium. cpp </p>\n\n<pre><code>void Emporium::auto_add() {\n  Order order0(1);\n  add_order(&amp;order0);  \n  std::vector&lt;std::string&gt; record = order_to_strings(0);\n  std::cout &lt;&lt; \"This is printing from emporium.cpp class\" &lt;&lt;std::endl \n            &lt;&lt; \"Id:\" &lt;&lt; record[0] &lt;&lt;\"State: \"&lt;&lt; record[1]&lt;&lt;\"Price:\"&lt;&lt; record[2]&lt;&lt; std::endl;    \n}\n</code></pre>\n\n<p>vector methods in emporium, order, controller classes.</p>\n\n<pre><code>std::vector&lt;std::string&gt; Controller::order_to_strings(int index) {\n   emporium.order_to_strings(index);\n}\nstd::vector&lt;std::string&gt; Emporium::order_to_strings(int index) { \n      return orders[index]-&gt;to_strings();\n     }\nstd::vector&lt;std::string&gt; Order::to_strings(){\n  std::vector&lt;std::string&gt; order;\n  order.push_back(std::to_string(id_number));\n  order.push_back(state.to_string());\n  order.push_back(std::to_string(price));\n  return order;\n}\n</code></pre>\n\n<p>Error: </p>\n\n<pre><code>    *** Error in `./mice': free(): invalid pointer: 0x00007fa77a295000 ***\n    ======= Backtrace: =========\n    /lib/x86_64-linux-gnu/libc.so.6(+0x777e5)[0x7fa77d63a7e5]\n    /lib/x86_64-linux-gnu/libc.so.6(+0x8037a)[0x7fa77d64337a]\n    /lib/x86_64-linux-gnu/libc.so.6(cfree+0x4c)[0x7fa77d64753c]\n    ./mice[0x406793]\n    ./mice[0x4065cf]\n    ./mice[0x40630a]\n    ./mice[0x405eb7]\n    ./mice(_ZNSt6vectorINSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEESaIS5_EED1Ev+0x35)[0x405b03]\n ......\n</code></pre>\n\n<p>This is my full version of my project. Test folder is my simplified version: <a href=\"https://github.com/dtn9797/MICE/tree/master/test\" rel=\"nofollow noreferrer\">https://github.com/dtn9797/MICE/tree/master/test</a></p>\n"}, {"tags": ["c++", "eclipse"], "comments": [{"owner": {"reputation": 4912, "user_id": 1953533, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Vs4v8.jpg?s=128&g=1", "display_name": "CroCo", "link": "https://stackoverflow.com/users/1953533/croco"}, "edited": false, "score": 0, "creation_date": 1524083148, "post_id": 49908428, "comment_id": 86832798, "body": "<i>it does not compile</i> not helpful clue."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1524083753, "post_id": 49908428, "comment_id": 86833116, "body": "Headed in the wrong direction, I think. Go to properties -&gt; C/C++ General-&gt;Paths and Symbols and add the include folder path on the Includes tab, add any libraries (without the extension or any lib prefixes. Eg enter wtf if you want libwtf.a) to the Libraries Tab, and then add the path to the libraries to the Library Paths tab."}], "owner": {"reputation": 99, "user_id": 7418868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f16fdacc8452bb21bc945f99d2eb510?s=128&d=identicon&r=PG&f=1", "display_name": "Razmode", "link": "https://stackoverflow.com/users/7418868/razmode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524083171, "creation_date": 1524082970, "last_edit_date": 1524083171, "question_id": 49908428, "link": "https://stackoverflow.com/questions/49908428/how-do-i-use-the-crypto-library-within-eclipse-c", "title": "How do I use the Crypto++ library within Eclipse? (C++)", "body": "<p>I'm having trouble getting Crypto++ to work from within the C++ Eclipse IDE. I <em>think</em> I installed it correctly, but every time I try to do any sort of include in the file so I can use the new library, it does not compile. It will compile C++ normally, but it won't let me use the new library. (Bear in mind, I am not too familiar with this whole process with libraries as a whole.)</p>\n\n<p>My process:</p>\n\n<ul>\n<li>Downloaded 7.0 from here: <a href=\"https://www.cryptopp.com/#download\" rel=\"nofollow noreferrer\">https://www.cryptopp.com/#download</a></li>\n<li>Unzipped it into a folder on my Desktop called Crypto++</li>\n<li>Created a new project, it compiled.</li>\n<li>Right click on new project, properties -> C/C++ Build -> settings ->\nTool settings</li>\n<li>Clicked add, file system, and then clicked the folder I created, and\nhit apply.</li>\n</ul>\n\n<p>So, it is listed under library search path, but this include does not work:</p>\n\n<pre><code>#include \"cryptlib.h\"\n</code></pre>\n\n<p>Did I install the library properly, or am I missing something?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>fatal error: cryptlib.h: No such file or directory</p>\n"}, {"tags": ["c++", "visual-studio", "compilation"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1524082580, "post_id": 49908202, "comment_id": 86832521, "body": "yes, what is the problem, when the project compiles and runs?"}, {"owner": {"reputation": 4665, "user_id": 1447389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iQhtr.jpg?s=128&g=1", "display_name": "Soleil", "link": "https://stackoverflow.com/users/1447389/soleil"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1524320098, "post_id": 49908202, "comment_id": 86929465, "body": "@user463035818 the problem is not to make the sample run, but to understand its implementation. Reading and understanding code is an important part of engineering."}], "answers": [{"comments": [{"owner": {"reputation": 4665, "user_id": 1447389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iQhtr.jpg?s=128&g=1", "display_name": "Soleil", "link": "https://stackoverflow.com/users/1447389/soleil"}, "edited": false, "score": 0, "creation_date": 1524084279, "post_id": 49908509, "comment_id": 86833381, "body": "OK, I&#39;m trying to know through which .h I&#39;m reaching combaseapi.h. Isn&#39;t through the /showincludes output ?"}, {"owner": {"reputation": 382, "user_id": 9577131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb34545785599110d51fed19873e1913?s=128&d=identicon&r=PG&f=1", "display_name": "atrelinski", "link": "https://stackoverflow.com/users/9577131/atrelinski"}, "reply_to_user": {"reputation": 4665, "user_id": 1447389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iQhtr.jpg?s=128&g=1", "display_name": "Soleil", "link": "https://stackoverflow.com/users/1447389/soleil"}, "edited": false, "score": 0, "creation_date": 1524085269, "post_id": 49908509, "comment_id": 86833822, "body": "What do you mean by saying &#39;Isn&#39;t through the /showincludes output ?&#39;   /showincludes option just list headers, their order and which one is included by which (indentation)."}, {"owner": {"reputation": 4665, "user_id": 1447389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iQhtr.jpg?s=128&g=1", "display_name": "Soleil", "link": "https://stackoverflow.com/users/1447389/soleil"}, "edited": false, "score": 0, "creation_date": 1524226161, "post_id": 49908509, "comment_id": 86898453, "body": "I didn&#39;t see combaseapi.h in the  /showincludes output. How did you find that Objbase.h was including combaseapi.h ?"}, {"owner": {"reputation": 382, "user_id": 9577131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb34545785599110d51fed19873e1913?s=128&d=identicon&r=PG&f=1", "display_name": "atrelinski", "link": "https://stackoverflow.com/users/9577131/atrelinski"}, "reply_to_user": {"reputation": 4665, "user_id": 1447389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iQhtr.jpg?s=128&g=1", "display_name": "Soleil", "link": "https://stackoverflow.com/users/1447389/soleil"}, "edited": false, "score": 0, "creation_date": 1524252830, "post_id": 49908509, "comment_id": 86913656, "body": "@Soleil I have updated my answer. Is it more clear now?"}], "tags": [], "owner": {"reputation": 382, "user_id": 9577131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb34545785599110d51fed19873e1913?s=128&d=identicon&r=PG&f=1", "display_name": "atrelinski", "link": "https://stackoverflow.com/users/9577131/atrelinski"}, "is_accepted": false, "score": 1, "last_activity_date": 1524252784, "last_edit_date": 1524252784, "creation_date": 1524083274, "answer_id": 49908509, "question_id": 49908202, "link": "https://stackoverflow.com/questions/49908202/how-to-find-which-header-is-including-another-header-in-the-include-tree/49908509#49908509", "title": "How to find which header is including another header in the include tree?", "body": "<p>I created very small example on my own. It doesn't work but compiling successfully:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"Objbase.h\"\n#include \"Unknwn.h\"\n#include \"Propsys.h\"\n\nint main()\n{\n    IPropertyStore *pPropertyStore;\n\n    CoCreateInstance(IID_IUnknown, NULL, CLSCTX_INPROC_SERVER,\n        IID_PPV_ARGS(&amp;pPropertyStore));\n\n    return 0;\n}\n</code></pre>\n\n<p>In Visual Studio 2017, I see <code>combaseapi.h</code> included through <code>Objbase.h</code> header:</p>\n\n<pre><code>1&gt;Note: including file: C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.16299.0\\um\\Objbase.h\n1&gt;Note: including file:  C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.16299.0\\shared\\winapifamily.h\n1&gt;Note: including file:   C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.16299.0\\shared\\winpackagefamily.h\n1&gt;Note: including file:  C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.16299.0\\shared\\rpc.h\n...\n1&gt;Note: including file:    C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.16299.0\\um\\ole2.h\n1&gt;Note: including file:     C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.16299.0\\shared\\pshpack8.h\n1&gt;Note: including file:     C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.16299.0\\um\\objbase.h\n1&gt;Note: including file:      C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.16299.0\\shared\\pshpack8.h\n1&gt;Note: including file:      C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.16299.0\\um\\combaseapi.h\n...\n</code></pre>\n\n<p>Above compiler Output should be read in following way. If the line below has more indent it means that header in above line is including header from below line. I am including <code>#include \"Objbase.h\"</code> and in my .cpp file and going through increasing indentation I see <code>combaseapi.h</code> (last line in attached part of Output). From this I know that <code>Objbase.h</code> through 5 headers through his way is including <code>combaseapi.h</code>.</p>\n\n<p>I am using Windows 10. </p>\n\n<p>I don't see any remarks in <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ee330727(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Microsoft documentation</a></p>\n\n<p>Maybe try to check debugger Output again?</p>\n"}], "owner": {"reputation": 4665, "user_id": 1447389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iQhtr.jpg?s=128&g=1", "display_name": "Soleil", "link": "https://stackoverflow.com/users/1447389/soleil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524319978, "creation_date": 1524082031, "last_edit_date": 1524319978, "question_id": 49908202, "link": "https://stackoverflow.com/questions/49908202/how-to-find-which-header-is-including-another-header-in-the-include-tree", "title": "How to find which header is including another header in the include tree?", "body": "<p>In the <a href=\"https://github.com/Microsoft/DirectX-Graphics-Samples/tree/master/Samples/Desktop/D3D12HelloWorld/src/HelloWindow\" rel=\"nofollow noreferrer\">D3D12HelloWindow project</a> from Microsoft DirectX samples there is a reference to <code>IID_PPV_ARGS</code>. When I navigate with F12 in VS2017 enterprise, I reach <code>combaseapi.h</code>, but the output from the compiler with <code>/showincludes</code> does not quote it at all.</p>\n\n<p>In the end, the project compiles and run correctly, but I cannot know which header is including directly or undirectly <code>combaseapi.h</code> ?</p>\n\n<p>How can I find which header is using <code>combaseapi.h</code> ?</p>\n\n<p><strong>The goal/problem is to understand a certain implementation</strong> (a certain DirectX 12 aspect) so I can use it to enrich my own (in that case a DirectX 12 WPF asset).</p>\n"}, {"tags": ["c++", "string", "parsing", "find", "substring"], "comments": [{"owner": {"reputation": 704, "user_id": 7595618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51cf59e6785bbd9f82f28e8cfc0f2935?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Borkland", "link": "https://stackoverflow.com/users/7595618/mike-borkland"}, "edited": false, "score": 1, "creation_date": 1524082850, "post_id": 49908178, "comment_id": 86832653, "body": "Look into regular expressions."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1524082853, "post_id": 49908178, "comment_id": 86832657, "body": "What is nnn? Can it contain the letters X/Y/Z? Cant you simply find the next whitespace after<code>xPos</code> ?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1524083884, "post_id": 49908178, "comment_id": 86833182, "body": "Can you give several actual input examples?"}, {"owner": {"reputation": 13842, "user_id": 759253, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0136e90dfd678a82c1dbba77dcbfc28e?s=128&d=identicon&r=PG", "display_name": "Igor R.", "link": "https://stackoverflow.com/users/759253/igor-r"}, "edited": false, "score": 0, "creation_date": 1524134883, "post_id": 49908178, "comment_id": 86853564, "body": "See Spirit-based solution for your updated question in my updated answer."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 4946677, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-wZXDKORUu9M/AAAAAAAAAAI/AAAAAAAAABA/0pCtrBzMLzI/photo.jpg?sz=128", "display_name": "John T", "link": "https://stackoverflow.com/users/4946677/john-t"}, "edited": false, "score": 0, "creation_date": 1524165865, "post_id": 49908510, "comment_id": 86873478, "body": "This looks to be an appropriate solution. However, my IDE (CLION) is complaining that qi::lit expects two arguments. Looking at the docs, that doesn&#39;t seem to be the case. Have you ever encountered an issue like that?"}, {"owner": {"reputation": 13842, "user_id": 759253, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0136e90dfd678a82c1dbba77dcbfc28e?s=128&d=identicon&r=PG", "display_name": "Igor R.", "link": "https://stackoverflow.com/users/759253/igor-r"}, "reply_to_user": {"reputation": 39, "user_id": 4946677, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-wZXDKORUu9M/AAAAAAAAAAI/AAAAAAAAABA/0pCtrBzMLzI/photo.jpg?sz=128", "display_name": "John T", "link": "https://stackoverflow.com/users/4946677/john-t"}, "edited": false, "score": 0, "creation_date": 1524168065, "post_id": 49908510, "comment_id": 86874550, "body": "@JohnT well, the static analysis of c++ code is not a simple task, especially when it comes to modern, extensivly templated code. Try upgrading CLion, they&#39;re constantly improving it."}], "tags": [], "owner": {"reputation": 13842, "user_id": 759253, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0136e90dfd678a82c1dbba77dcbfc28e?s=128&d=identicon&r=PG", "display_name": "Igor R.", "link": "https://stackoverflow.com/users/759253/igor-r"}, "is_accepted": false, "score": 2, "last_activity_date": 1524134849, "last_edit_date": 1524134849, "creation_date": 1524083286, "answer_id": 49908510, "question_id": 49908178, "link": "https://stackoverflow.com/questions/49908178/extract-substring-from-string-c/49908510#49908510", "title": "Extract substring from string C++", "body": "<p>Each time I need to parse something in C++, I consider using Boost.Spirit. It is suitable for both trivial and quite complex parsing tasks.</p>\n\n<p>With Boost.Spirit, it would <a href=\"https://wandbox.org/permlink/nsuPXVArN6dNodAY\" rel=\"nofollow noreferrer\">look like this</a>:</p>\n\n<pre><code>#include &lt;boost/config/warning_disable.hpp&gt;\n#include &lt;boost/spirit/include/qi.hpp&gt;\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nint main()\n{\n  namespace qi = boost::spirit::qi;\n  namespace ascii = boost::spirit::ascii;\n  std::string input = \"G0/G1 X001 Y123 Z321\";\n  int x, y, z;\n  bool result = qi::phrase_parse(input.begin(), input.end(),\n     qi::lit(\"G0/G1\") &gt;&gt; \"X\" &gt;&gt; qi::int_ &gt;&gt; \"Y\" &gt;&gt; qi::int_ &gt;&gt; \"Z\" &gt;&gt; qi::int_ , ascii::space, x, y, z);\n  if (result)\n  {\n      std::cout &lt;&lt; \"X:\" &lt;&lt; x &lt;&lt; std::endl;\n      std::cout &lt;&lt; \"Y:\" &lt;&lt; y &lt;&lt; std::endl;\n      std::cout &lt;&lt; \"Z:\" &lt;&lt; z &lt;&lt; std::endl;\n  }\n}\n</code></pre>\n\n<p>Note that the coordinates are parsed directly into <code>int</code>s!</p>\n\n<p><strong>UPDATE</strong>: A bit more <a href=\"https://wandbox.org/permlink/JrJKbru0CbXurZGH\" rel=\"nofollow noreferrer\">complicated parsing</a>, according to your updated question:</p>\n\n<pre><code>#include &lt;boost/config/warning_disable.hpp&gt;\n#include &lt;boost/spirit/include/qi.hpp&gt;\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;boost/optional.hpp&gt;\n#include &lt;boost/optional/optional_io.hpp&gt;\n\nint main()\n{\n  namespace qi = boost::spirit::qi;\n  namespace ascii = boost::spirit::ascii;\n  std::string input = \"G0 X001 Z321\";\n  boost::optional&lt;float&gt; x, y, z;\n  int cmd;\n  using namespace qi;\n  bool result = phrase_parse(input.begin(), input.end(), qi::lexeme[lit(\"G\") &gt;&gt; int_] &gt;&gt; -(lit(\"X\") &gt;&gt; float_) &gt;&gt; -(lit(\"Y\") &gt;&gt; float_) &gt;&gt; -(lit(\"Z\") &gt;&gt; float_) , ascii::space, cmd, x, y, z);\n  if (result)\n  {\n      std::cout &lt;&lt; \"Command number:\" &lt;&lt; cmd &lt;&lt; std::endl;\n      std::cout &lt;&lt; \"X:\" &lt;&lt; x &lt;&lt; std::endl;\n      std::cout &lt;&lt; \"Y:\" &lt;&lt; y &lt;&lt; std::endl;\n      std::cout &lt;&lt; \"Z:\" &lt;&lt; z &lt;&lt; std::endl;\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1104, "user_id": 6296060, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZ37JUkP1Pw/AAAAAAAAAAI/AAAAAAAAAYw/Fp6BfZuv7Ho/photo.jpg?sz=128", "display_name": "greedy52", "link": "https://stackoverflow.com/users/6296060/greedy52"}, "is_accepted": false, "score": 1, "last_activity_date": 1524083380, "creation_date": 1524083380, "answer_id": 49908525, "question_id": 49908178, "link": "https://stackoverflow.com/questions/49908178/extract-substring-from-string-c/49908525#49908525", "title": "Extract substring from string C++", "body": "<p>Using <code>std::stringstream</code></p>\n\n<pre><code>int x, y, z = -1;\n\nstd::stringstream ss(\"G0/G1 X123 Y456\");\nstd::string str;\nwhile (ss&gt;&gt;str) {\n    if (str.at(0) == 'X') {\n        std::stringstream(str.substr(1)) &gt;&gt; x;\n    } else if (str.at(0) == 'Y') {\n        std::stringstream(str.substr(1)) &gt;&gt; y;\n    } else if (str.at(0) == 'Z') {\n        std::stringstream(str.substr(1)) &gt;&gt; z;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 4946677, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-wZXDKORUu9M/AAAAAAAAAAI/AAAAAAAAABA/0pCtrBzMLzI/photo.jpg?sz=128", "display_name": "John T", "link": "https://stackoverflow.com/users/4946677/john-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1524134849, "creation_date": 1524081916, "last_edit_date": 1524085811, "question_id": 49908178, "link": "https://stackoverflow.com/questions/49908178/extract-substring-from-string-c", "title": "Extract substring from string C++", "body": "<p>I have a text file with GCode commands. When I encounter a specific command, I want to place a new line after it with a new command. That part is not an issue. The issue I have is that the command has the following form <code>G0/G1 Xnnn Ynnn Znnn</code> where the X/Y/Z params may or may not be present (at least one is required, but not all). What I want are the numbers after the X/Y/Z. My current working solution would involve using <code>substring(start + 1, end - 1)</code> and <code>find(X/Y/Z)</code>, then checking for all combinations as:</p>\n\n<pre><code>size_t xPos = str.find(\"X\");\nsize_t yPos = str.find(\"Y\");\nsize_t zPos = str.find(\"Z\");\nfloat x, y, z;\nif(xPos != std::string::npos &amp;&amp; yPos != std::string::npos) \n    x = std:stof(str.substring(xPos + 1, yPos - 1);\n</code></pre>\n\n<p>Is this an appropriate method of doing this? Am I overcomplicating things?</p>\n\n<p>Edit: So, an input would look like <code>G0 X101.1 Y102.3</code> or <code>G0 Y122</code> or <code>G0 X55 Z123</code>, so the <code>n</code> refers to a digit and the command is to tell something like a 3D printer how many units to move in a given direction, so it may need to make a move in one, two, or three directions.</p>\n"}, {"tags": ["c++", "c", "macros", "c-preprocessor"], "comments": [{"owner": {"reputation": 916, "user_id": 4743979, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30aac06a8fa100d4bd5076dbbb09ce15?s=128&d=identicon&r=PG&f=1", "display_name": "DutChen18", "link": "https://stackoverflow.com/users/4743979/dutchen18"}, "edited": false, "score": 1, "creation_date": 1524080268, "post_id": 49907716, "comment_id": 86831296, "body": "NAME##_2 might work"}], "answers": [{"comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1524081694, "post_id": 49907739, "comment_id": 86832050, "body": "Caveat to the solution is that if <code>NAME</code> is itself a macro, it will not be expanded in the second expanded line, where as it would get expanded in the first line."}], "tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": true, "score": 4, "last_activity_date": 1524080236, "creation_date": 1524080236, "answer_id": 49907739, "question_id": 49907716, "link": "https://stackoverflow.com/questions/49907716/macro-variable-is-not-expanded-if-directly-followed-by-chars-that-form-a-valid-i/49907739#49907739", "title": "Macro variable is not expanded if directly followed by chars that form a valid identifier", "body": "<p>You can use <code>##</code> glue:</p>\n\n<pre><code>#define DECLARE(NAME) \\\n   int NAME;         \\\n   int NAME##_2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 3, "last_activity_date": 1524080254, "creation_date": 1524080254, "answer_id": 49907742, "question_id": 49907716, "link": "https://stackoverflow.com/questions/49907716/macro-variable-is-not-expanded-if-directly-followed-by-chars-that-form-a-valid-i/49907742#49907742", "title": "Macro variable is not expanded if directly followed by chars that form a valid identifier", "body": "<p>The final line of your macro could be</p>\n\n<pre><code>int NAME##_2\n</code></pre>\n\n<p>which would do it. <code>##</code> <em>concatenates</em> tokens. </p>\n"}], "owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 49907739, "answer_count": 2, "score": -1, "last_activity_date": 1524081284, "creation_date": 1524080142, "question_id": 49907716, "link": "https://stackoverflow.com/questions/49907716/macro-variable-is-not-expanded-if-directly-followed-by-chars-that-form-a-valid-i", "title": "Macro variable is not expanded if directly followed by chars that form a valid identifier", "body": "<p>Given a preprocessor macro like</p>\n\n<pre><code>#define DECLARE(NAME) \\\n    int NAME;         \\\n    int NAME_2\n</code></pre>\n\n<p><code>Name_2</code> denotes a new identifier. Is it possible to expand <code>Name</code>, so that </p>\n\n<pre><code>DECLARE(x);\n</code></pre>\n\n<p>becomes </p>\n\n<pre><code>int x;\nint x_2;\n</code></pre>\n"}, {"tags": ["c++", "linux"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1524080409, "post_id": 49907708, "comment_id": 86831357, "body": "<code>select()</code> modifies the <code>fd_set</code>(s) that you pass it to. You need to reset them on each loop iteration."}, {"owner": {"reputation": 23, "user_id": 9592205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b1d4d93e45c79e5af39f0bc93fd72da?s=128&d=identicon&r=PG&f=1", "display_name": "greg", "link": "https://stackoverflow.com/users/9592205/greg"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1524080971, "post_id": 49907708, "comment_id": 86831661, "body": "@RemyLebeau I added an FD_ZERO(&amp;read_set) and an FD_SET(file_descriptor, &amp;set) call after the else, inside the while loop and I&#39;m still getting failed reads."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1524081151, "post_id": 49907708, "comment_id": 86831761, "body": "Because you are not handling return values correctly."}, {"owner": {"reputation": 23, "user_id": 9592205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b1d4d93e45c79e5af39f0bc93fd72da?s=128&d=identicon&r=PG&f=1", "display_name": "greg", "link": "https://stackoverflow.com/users/9592205/greg"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1524082572, "post_id": 49907708, "comment_id": 86832518, "body": "@RemyLebeau I implemented your answer below, and while it&#39;s handling the error cases better, I&#39;m just getting a bunch of &quot;peer disconnected&quot; instead."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1524084639, "post_id": 49907708, "comment_id": 86833535, "body": "And? If you don&#39;t want those messages logged, then don&#39;t log them. But you do need to handle the cases where <code>select()</code> and <code>read()</code> actually fail, and the case where <code>read()</code> returns 0 after <code>select()</code> says the socket is readable, which means the peer closed the connection gracefully, so you can&#39;t read/write from/to that peer anymore. You need to decide what you want <code>Read()</code> to do when the connection with the peer disappears"}, {"owner": {"reputation": 23, "user_id": 9592205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b1d4d93e45c79e5af39f0bc93fd72da?s=128&d=identicon&r=PG&f=1", "display_name": "greg", "link": "https://stackoverflow.com/users/9592205/greg"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1524085237, "post_id": 49907708, "comment_id": 86833805, "body": "Fair enough. No arguments here."}], "answers": [{"tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 1, "last_activity_date": 1524080914, "creation_date": 1524080914, "answer_id": 49907894, "question_id": 49907708, "link": "https://stackoverflow.com/questions/49907708/unsuccessful-read-after-successful-select-and-fd-isset/49907894#49907894", "title": "Unsuccessful read() after successful select() and FD_ISSET()", "body": "<p>A return value of 0 from read (your <code>if (!count)</code> check) does not mean that the read failed -- it means that the read succeeded and got an EOF.</p>\n\n<p>In any case, <code>select</code> returning with the file descriptor set does not mean that a read of that fd will not fail -- it means that a read of that fd will not block, and will return something immediately, either failure or success.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 9592205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b1d4d93e45c79e5af39f0bc93fd72da?s=128&d=identicon&r=PG&f=1", "display_name": "greg", "link": "https://stackoverflow.com/users/9592205/greg"}, "edited": false, "score": 0, "creation_date": 1524081368, "post_id": 49907932, "comment_id": 86831887, "body": "Okay, I see what you mean now by my error handling, and resetting fd_set and time_val. I&#39;ll give this a shot. Thanks!"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1524081367, "last_edit_date": 1524081367, "creation_date": 1524081052, "answer_id": 49907932, "question_id": 49907708, "link": "https://stackoverflow.com/questions/49907708/unsuccessful-read-after-successful-select-and-fd-isset/49907932#49907932", "title": "Unsuccessful read() after successful select() and FD_ISSET()", "body": "<p>You are not using <code>select()</code> correctly.  It modifies the <code>fd_set</code>, and possibly the <code>time_val</code>, so you have to reset them on each loop iteration.</p>\n\n<p>Also, you are not handling errors correctly.  <code>read()</code> returns -1 on error, 0 on disconnect, and > 0 on bytes read.  You are not handling error and disconnect conditions correctly.</p>\n\n<p>Try something more like this instead:</p>\n\n<pre><code>int MyClass::Read(int file_descriptor)\n{\n    unsigned short read_buffer[READ_BUFFER_SIZE];\n    fd_set read_set;\n    time_val timeout;\n    int return_value, count;\n\n    do\n    {\n        // Initialize read file descriptor\n        FD_ZERO(&amp;read_set);\n\n        // Add driver file descriptor\n        FD_SET(file_descriptor, &amp;read_set);\n\n        // Set timeout\n        timeout.tv_sec = 0;\n        timeout.tv_usec = 10000;\n\n        // Wait for data to be available to read\n        return_value = select(file_descriptor + 1, &amp;read_set, NULL, NULL, &amp;timeout);\n\n        // Make sure an error or a timeout didn't occur\n        if (-1 == return_value)\n        {\n            cout &lt;&lt; \"select failed\" &lt;&lt; endl;\n            return -1;\n        }\n\n        if (0 == return_value)\n        {\n            cout &lt;&lt; \"select timed out\" &lt;&lt; endl;\n            continue; // or return, your choice...\n        }\n\n        // select() returned &gt; 0, so the fd_set MUST be set,\n        // so no need to check it with FD_ISSET()...\n\n        // read in the data\n\n        count = read(file_descriptor, read_buffer, sizeof(read_buffer));\n\n        // Double check that data was actually read in\n        if (-1 == count)\n        {\n            cout &lt;&lt; \"read failed\" &lt;&lt; endl;\n            return -1;\n        }\n\n        if (0 == count)\n        {\n            cout &lt;&lt; \"peer disconnected\" &lt;&lt; endl;\n            return 0; // or -1, or whatever you want...\n        }\n\n        // success\n        break;\n    }\n    while (true);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9592205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b1d4d93e45c79e5af39f0bc93fd72da?s=128&d=identicon&r=PG&f=1", "display_name": "greg", "link": "https://stackoverflow.com/users/9592205/greg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1524101795, "creation_date": 1524080116, "last_edit_date": 1524101795, "question_id": 49907708, "link": "https://stackoverflow.com/questions/49907708/unsuccessful-read-after-successful-select-and-fd-isset", "title": "Unsuccessful read() after successful select() and FD_ISSET()", "body": "<p>In a Linux environment, I have an application that gets a file descriptor from an API call to a driver. The following function is what I use to read the data read in by a card on my system. About 1 out of 10 reads fail. I am puzzled as to why, after a successful select, and checking to see if the read_fd is set, no data is returned.</p>\n\n<pre><code>int MyClass::Read(int file_descriptor)\n{\n    unsigned short read_buffer[READ_BUFFER_SIZE];\n    fd_set read_set;\n    time_val timeout;\n    int return_value = 0;\n    int count = 0;\n    int status = -1;\n\n    // Initialize read file descriptor\n    FD_ZERO(&amp;read_set)\n\n    // Add driver file descriptor\n    FD_SET(file_descriptor, &amp;read_set)\n\n    // Set timeout\n    timeout.tv_sec = 0;\n    timeout.tv_usec = 10000;\n\n    while(!count)\n    {\n        // Wait for data to be available to read\n        return_value = select(file_descriptor + 1, &amp;read_set, NULL, NULL, &amp;timeout);\n\n        // Make sure an error or a timeout didn't occur\n        if (-1 == return_value)\n        {\n            cout &lt;&lt; \"an error occurred\" &lt;&lt; endl;\n        }\n        else if (0 == return_value)\n        {\n            cout &lt;&lt; \"a timeout occurred\" &lt;&lt; endl;\n        }\n        else\n        {\n            // If the read file descriptor is set, read in the data\n            if (FD_ISSET(file_descriptor, &amp;read_set))\n            {\n                count = read(file_descriptor, read_buffer, sizeof(read_buffer));\n\n                // Double check that data was read in\n                if (!count)\n                {\n                    cout &lt;&lt; \"read failed\" &lt;&lt; endl;\n                }\n                else\n                {\n                    // Set status to success\n                    status = 0;\n                }\n            }\n        }\n    }\n\n    return status;\n}\n</code></pre>\n"}, {"tags": ["c++", "auto"], "answers": [{"tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 10, "last_activity_date": 1524079722, "creation_date": 1524079722, "answer_id": 49907615, "question_id": 49907596, "link": "https://stackoverflow.com/questions/49907596/auto-declaration-issue-in-c/49907615#49907615", "title": "&#39;auto&#39; declaration issue in C++", "body": "<p>This line will make a <em>copy</em> of your object</p>\n\n<pre><code>for (auto M : MyObj)\n</code></pre>\n\n<p>change it to a reference so you can modify it</p>\n\n<pre><code>for (auto&amp; M : MyObj)\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 9501757, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Chi-fung LAM", "link": "https://stackoverflow.com/users/9501757/chi-fung-lam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 49907615, "answer_count": 1, "score": 1, "last_activity_date": 1524080119, "creation_date": 1524079643, "last_edit_date": 1524080119, "question_id": 49907596, "link": "https://stackoverflow.com/questions/49907596/auto-declaration-issue-in-c", "title": "&#39;auto&#39; declaration issue in C++", "body": "<p>I have a problem in using <code>auto</code> declarations. I write a program in Visual Studio 2017 as follow:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nclass MyClass\n{\npublic:\n    struct mystruct {\n        vector&lt;int&gt; vi;\n    };\n    vector&lt;mystruct&gt; TheStructV;\n    void AddStructV() {\n        TheStructV.push_back(mystruct());\n    };\n};\n\nint main()\n{\n    MyClass MyObj[3];\n    for (int a = 0; a &lt; 3; a++) {\n        MyObj[a].AddStructV();\n        for (int i = 1; i &lt;= 5; i++) {\n            MyObj[a].TheStructV[MyObj[a].TheStructV.size() - 1].vi.push_back(i * 10 + idx);\n        }\n        idx++;\n    }\n    for (int b = 0; b&lt;3; b++) {\n        cout &lt;&lt; \"MyObj[\" &lt;&lt; b  &lt;&lt; \"] struct vector size:\" &lt;&lt; MyObj[b].TheStructV.size() &lt;&lt; endl;\n        cout &lt;&lt; \"MyObj[\" &lt;&lt; b  &lt;&lt; \"] struct vi size:\" &lt;&lt; MyObj[b].TheStructV[0].vi.size() &lt;&lt; endl;\n    }\n    for (int i = 0; i &lt; 3; i++) {\n        cout &lt;&lt; \"MyObj[\" &lt;&lt; i  &lt;&lt; \"].vi:\";\n        for (int j = 0; j &lt; 5; j++) {\n            cout &lt;&lt; MyObj[i].TheStructV[0].vi[j] &lt;&lt; \"-\";\n        }\n        cout &lt;&lt; endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>It works as expected, and the output is:</p>\n\n<pre>\nMyObj[0] struct vector size:1\nMyObj[0] struct vi size:5\nMyObj[1] struct vector size:1\nMyObj[1] struct vi size:5\nMyObj[2] struct vector size:1\nMyObj[2] struct vi size:5\nMyObj[0].vi:11-21-31-41-51-\nMyObj[1].vi:12-22-32-42-52-\nMyObj[2].vi:13-23-33-43-53-\n</pre>\n\n<p>However, if I change the code to this:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nclass MyClass\n{\npublic:\n    struct mystruct {\n        vector&lt;int&gt; vi;\n    };\n    vector&lt;mystruct&gt; TheStructV;\n    void AddStructV() {\n        TheStructV.push_back(mystruct());\n    };\n};\n\nint main()\n{\n    MyClass MyObj[3];\n\n    int idx = 1;\n    for (auto M : MyObj) {\n        M.AddStructV();\n        for (int i = 1; i &lt;= 5; i++) {\n            M.TheStructV[M.TheStructV.size() - 1].vi.push_back(i * 10 + idx);\n        }\n        idx++;\n    }\n    for (int b = 0; b&lt;3; b++) {\n        cout &lt;&lt; \"MyObj[\" &lt;&lt; b &lt;&lt; \"] struct vector size:\" &lt;&lt; MyObj[b].TheStructV.size() &lt;&lt; endl;\n        cout &lt;&lt; \"MyObj[\" &lt;&lt; b &lt;&lt; \"] struct vi size:\" &lt;&lt; MyObj[b].TheStructV[0].vi.size() &lt;&lt; endl;\n    }\n    idx = 1;\n    for (auto MC : MyObj) {\n        cout &lt;&lt; \"MyObj[\" &lt;&lt; idx - 1 &lt;&lt; \"].vi:\";\n        for (auto thisStruct : MC.TheStructV) {\n            cout &lt;&lt; thisStruct.vi[0] &lt;&lt; \"-\";\n            cout &lt;&lt; thisStruct.vi[1] &lt;&lt; \"-\";\n            cout &lt;&lt; thisStruct.vi[2] &lt;&lt; \"-\";\n            cout &lt;&lt; thisStruct.vi[3] &lt;&lt; \"-\";\n            cout &lt;&lt; thisStruct.vi[4] &lt;&lt; \"-\";\n        }\n        cout &lt;&lt; endl;\n        idx++;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>It compiles without problem, but I get an error when I run it, and the output is:</p>\n\n<pre>\nMyObj[0] struct vector size:0\n</pre>\n\n<p>The program is stuck here.</p>\n\n<p>It seems that I am missing something.  I even tried replacing <code>auto M</code> with <code>MyClass M</code>, but still the same problem.</p>\n"}, {"tags": ["c++", "windows", "visual-c++", "unicode"], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 9362206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71b8db708c835f4394e563b3bf42a28?s=128&d=identicon&r=PG&f=1", "display_name": "Sandro4912", "link": "https://stackoverflow.com/users/9362206/sandro4912"}, "edited": false, "score": 0, "creation_date": 1524160489, "post_id": 49912012, "comment_id": 86870588, "body": "can you explain why you have to use                <code>_setmode(_fileno(stdout), _O_U16TEXT);&#47;&#47;wcout instead of cout     _setmode(_fileno(stdin), _O_U16TEXT); &#47;&#47;wcin  instead of cin     auto loc = std::locale(std::locale(),              new std::codecvt_utf16&lt;wchar_t, 0x10ffff, std::little_endian&gt;());</code>   why it doesnt work by just use std::wstring, std::wcout ??"}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "reply_to_user": {"reputation": 115, "user_id": 9362206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71b8db708c835f4394e563b3bf42a28?s=128&d=identicon&r=PG&f=1", "display_name": "Sandro4912", "link": "https://stackoverflow.com/users/9362206/sandro4912"}, "edited": false, "score": 0, "creation_date": 1524163097, "post_id": 49912012, "comment_id": 86871955, "body": "I don&#39;t know the inner workings of the console, and I don&#39;t think you are interested in that explanation. You might ask <i>&quot;why is that not done by default?&quot;</i> The reason is you cannot use <code>std::cout</code> after calling <code>_setmode</code> (unless you reset the mode back to <code>_O_TEXT</code>) somebody decided not to break <code>cout</code> for default programs. <code>wfstream</code> is a little complicated but that&#39;s because it can support both UTF8 and UTF16. See updated answer."}], "tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": true, "score": 0, "last_activity_date": 1524163034, "last_edit_date": 1524163034, "creation_date": 1524106685, "answer_id": 49912012, "question_id": 49907441, "link": "https://stackoverflow.com/questions/49907441/type-in-special-characters-and-save-in-file/49912012#49912012", "title": "type in special characters and save in file", "body": "<p>The easiest solution (which is deprecated) is to use ANSI code page for German:</p>\n\n<pre><code>setlocale(LC_ALL, \"gr\");\ncout &lt;&lt; \"abc\u00f6\u00e4\u00fc\u00d1\\n\";\n\nofstream fout(\"ansi.txt\");\nfout &lt;&lt; \"abc\u00f6\u00e4\u00fc\u00d1\\n\";\n</code></pre>\n\n<p>This will work for some limited character sets, it's relatively safe if you stick to Western Latin characters. Maybe this is what you have done with your C code. It doesn't have much to do with saving the file in binary or text.</p>\n\n<p>In Windows it is recommended to use Unicode with wide string functions. Example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;codecvt&gt;\n#include &lt;io.h&gt;\n#include &lt;fcntl.h&gt;\n\nint main() \n{\n    _setmode(_fileno(stdout), _O_U16TEXT);//wcout instead of cout\n    _setmode(_fileno(stdin), _O_U16TEXT); //wcin  instead of cin\n    std::locale loc_utf16(std::locale(), new std::codecvt_utf16&lt;wchar_t&gt;);\n\n    std::wofstream fout(L\"utf16.txt\", std::ios::binary);\n    if(fout)\n    {\n        fout.imbue(loc_utf16);\n        fout &lt;&lt; L'\\xFEFF'; //insert optional BOM for UTF16\n        fout &lt;&lt; L\"abc\u00f6\u00e4\u00fc\u00d1 \u03b5\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ae\\r\\n\";\n        fout.close();\n    }\n\n    std::wifstream fin(L\"utf16.txt\", std::ios::binary);\n    if(fin)\n    {\n        fin.imbue(loc_utf16);\n        fin.seekg(2, std::ios::beg); //skip optional BOM if it were added\n        std::wstring ws;\n        while(std::getline(fin, ws)) std::wcout &lt;&lt; ws &lt;&lt; std::endl;\n        fin.close();\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The disadvantage with UTF16 is that programs on systems like Linux may have a hard time with this format. Some people will save the file in UTF8 format, because UTF8 is more familiar with other systems.</p>\n\n<p>Windows itself is UTF16 based. So you have to read and display the input in UTF16. But you can read/write the file in UTF8 format. Example:</p>\n\n<pre><code>std::wcout &lt;&lt; \"enter:\";\nstd::wstring sw;\nstd::wcin &gt;&gt; sw;\n\nstd::locale loc_utf8(std::locale(), new std::codecvt_utf8&lt;wchar_t&gt;);\nstd::wofstream fout(L\"utf8.txt\", std::ios::binary);\nif(fout)\n{\n    fout.imbue(loc_utf8);\n    fout &lt;&lt; sw &lt;&lt; L\"\\r\\n\";\n    fout &lt;&lt; L\"abc\u00f6\u00e4\u00fc\u00d1 \u03b5\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ae\\r\\n\";\n}\n</code></pre>\n\n<p>Here the binary flag does matter.</p>\n"}], "owner": {"reputation": 115, "user_id": 9362206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71b8db708c835f4394e563b3bf42a28?s=128&d=identicon&r=PG&f=1", "display_name": "Sandro4912", "link": "https://stackoverflow.com/users/9362206/sandro4912"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "closed_date": 1524125134, "accepted_answer_id": 49912012, "answer_count": 1, "score": 0, "last_activity_date": 1524163034, "creation_date": 1524079024, "last_edit_date": 1524083009, "question_id": 49907441, "link": "https://stackoverflow.com/questions/49907441/type-in-special-characters-and-save-in-file", "closed_reason": "Duplicate", "title": "type in special characters and save in file", "body": "<p>I want to use a plain text file to save input from a user to read it out later In the application it is possible that there occur German and Spanish special signs. Unfortunately the code below doesn't save the signs properly in the file. How is it best to solve this issue?</p>\n\n<p>I solved this issue in a similar application in C by saving in a .bin file instead of a .txt but isnt there a better solution in c++?</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n\nint main() {\n\n\n    std::string s = \"abc\u00f6\u00e4\u00fc\u00d1\"; //(alt + 165 for \u00d1)\n    std::ofstream ofs{ \"test.txt\" };\n    ofs &lt;&lt; s &lt;&lt;'\\n';            //this works fine  \"abc\u00f6\u00e4\u00fc\u00d1\"\n\n\n    std::string s2;\n    std::cin &gt;&gt; s2;     //typeing in the app abc\u00f6\u00e4\u00fc\u00d1   (alt+165 for \u00d1)\n    // i use a windows system with a german keyboard setting\n\n    ofs &lt;&lt; s2 &lt;&lt;'\\n';       //this doesn't it gets   \"abc\u201d\u201e\u00a5\"\n}\n</code></pre>\n\n<p>I use a windows 7 64 system with visual studio 2017 with a german keyboard setting.</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1524078616, "post_id": 49907294, "comment_id": 86830382, "body": "<a href=\"http://en.cppreference.com/w/cpp/algorithm/transform\" rel=\"nofollow noreferrer\">This looks like a job for <code>std::transform</code>.</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 1104, "user_id": 6296060, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZ37JUkP1Pw/AAAAAAAAAAI/AAAAAAAAAYw/Fp6BfZuv7Ho/photo.jpg?sz=128", "display_name": "greedy52", "link": "https://stackoverflow.com/users/6296060/greedy52"}, "edited": false, "score": 1, "creation_date": 1524079509, "post_id": 49907294, "comment_id": 86830884, "body": "@XinHuang please dont be a victim of <a href=\"https://en.wikipedia.org/wiki/Cargo_cult_programming\" rel=\"nofollow noreferrer\">cargo cult programming</a> ;)"}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 4517806, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3P9Ev.png?s=128&g=1", "display_name": "tomdol", "link": "https://stackoverflow.com/users/4517806/tomdol"}, "edited": false, "score": 0, "creation_date": 1524079182, "post_id": 49907411, "comment_id": 86830714, "body": "Whenever you compare a float with a zero using == a kitten dies somewhere on the other side of the globe"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 1104, "user_id": 6296060, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZ37JUkP1Pw/AAAAAAAAAAI/AAAAAAAAAYw/Fp6BfZuv7Ho/photo.jpg?sz=128", "display_name": "greedy52", "link": "https://stackoverflow.com/users/6296060/greedy52"}, "edited": false, "score": 0, "creation_date": 1524079232, "post_id": 49907411, "comment_id": 86830738, "body": "@XinHuang your comparison will cause confusing result because using your sign negative * negative can be negative and negative*positive can be positive according to your definition"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 181, "user_id": 4517806, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3P9Ev.png?s=128&g=1", "display_name": "tomdol", "link": "https://stackoverflow.com/users/4517806/tomdol"}, "edited": false, "score": 1, "creation_date": 1524079254, "post_id": 49907411, "comment_id": 86830751, "body": "@tomdol Except for the time that you want to know if a value is exactly equal to <code>0.0</code>.... which is exactly what the OP asked. So your point is?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 181, "user_id": 4517806, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3P9Ev.png?s=128&g=1", "display_name": "tomdol", "link": "https://stackoverflow.com/users/4517806/tomdol"}, "edited": false, "score": 1, "creation_date": 1524079310, "post_id": 49907411, "comment_id": 86830780, "body": "@tomdol there is only a single number that is on the edge of being negative and being positive, not a range of numbers, using an epislon is actually wrong here"}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 1104, "user_id": 6296060, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZ37JUkP1Pw/AAAAAAAAAAI/AAAAAAAAAYw/Fp6BfZuv7Ho/photo.jpg?sz=128", "display_name": "greedy52", "link": "https://stackoverflow.com/users/6296060/greedy52"}, "edited": false, "score": 1, "creation_date": 1524079463, "post_id": 49907411, "comment_id": 86830860, "body": "@XinHuang Aside from the other comment, your suggestion is actually plain wrong since you need to scale the <code>epsilon()</code> - For a 32-bits float on IEEE754, epsilon is 0.00000011920928955078125, which is the value represented by the last bit of the mantissa, except that this can be scaled down up to <code>2^-128</code> by the exponent."}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 2, "last_activity_date": 1524078933, "creation_date": 1524078933, "answer_id": 49907411, "question_id": 49907294, "link": "https://stackoverflow.com/questions/49907294/vector-float-to-int-sign-conversion/49907411#49907411", "title": "vector float to int/sign conversion", "body": "<p>You can use <a href=\"http://en.cppreference.com/w/cpp/algorithm/transform\" rel=\"nofollow noreferrer\"><code>std::transform</code></a> to do your comparisons and replace the elements accordingly.</p>\n\n<pre><code>std::transform(v.begin(), v.end(), v.begin(), [](float f)\n{\n    return f == 0 ? 0 : (f &lt; 0 ? -1 : 1);\n});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 1, "creation_date": 1524080279, "post_id": 49907622, "comment_id": 86831305, "body": "What&#39;s the point? This code is equivalent to CoryKramer one... Blindlessly avoiding using <code>==</code> between floating point numbers for the sake of avoiding it is pointless."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1524080655, "post_id": 49907622, "comment_id": 86831488, "body": "@user463035818 I was refering to the <i>&quot;There&#39;s an easy way to avoid equality operator:&quot;</i>, but thanks for pointing out this."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1524080754, "post_id": 49907622, "comment_id": 86831542, "body": "imho it is misleading that you write &quot;to avoid the equality operator&quot;, because the equality operator isnt really the point. You could add using a call to the equality operator, but it would still be better in terms of not using jumps: <a href=\"https://godbolt.org/g/fZjVEE\" rel=\"nofollow noreferrer\">godbolt.org/g/fZjVEE</a>. That being said, I would always go for clarity and readability (ie if i want to compare for equality to zero i&#39;d write <code>n==0</code>) and let the compiler do its job"}], "tags": [], "owner": {"reputation": 181, "user_id": 4517806, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3P9Ev.png?s=128&g=1", "display_name": "tomdol", "link": "https://stackoverflow.com/users/4517806/tomdol"}, "is_accepted": false, "score": 0, "last_activity_date": 1524079749, "creation_date": 1524079749, "answer_id": 49907622, "question_id": 49907294, "link": "https://stackoverflow.com/questions/49907294/vector-float-to-int-sign-conversion/49907622#49907622", "title": "vector float to int/sign conversion", "body": "<p>There's an easy way to avoid equality operator:</p>\n\n<pre><code>std::vector&lt;float&gt; in{-0.4, 0.0, 5.0001};\nstd::vector&lt;int&gt; out;\nout.reserve(in.size());\n\nstd::transform(in.begin(), in.end(), std::back_inserter(out), [](float n) {\n    return (n &gt; 0.0) - (n &lt; 0.0);\n});\n</code></pre>\n"}], "owner": {"reputation": 2378, "user_id": 1277239, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/42d3dede20a5ce60d6b89149cb0abc08?s=128&d=identicon&r=PG", "display_name": "Nick X Tsui", "link": "https://stackoverflow.com/users/1277239/nick-x-tsui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 49907411, "answer_count": 2, "score": 1, "last_activity_date": 1524079749, "creation_date": 1524078511, "question_id": 49907294, "link": "https://stackoverflow.com/questions/49907294/vector-float-to-int-sign-conversion", "title": "vector float to int/sign conversion", "body": "<p>I have a vector </p>\n\n<pre><code>vector&lt;float&gt;v = {-0.2f, 1.4f, -6.5f};\n</code></pre>\n\n<p>I like it gets converted to </p>\n\n<pre><code>v = {-1, 1, -1};\n</code></pre>\n\n<p>The logic is: for each element, if it is less than 0, then set to -1, if it is equal to 0, then set it to 0, if it is greater than 0, then set it to 1.</p>\n"}, {"tags": ["c++", "c++11", "encryption", "gpgme"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1524078258, "post_id": 49907203, "comment_id": 86830228, "body": "The library is open source, it should be possible to find examples and other programs using that library. BTW: Since you have code that doesn&#39;t work but which you want to get to work, providing a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would improve your question&#39;s quality."}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 8609201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3640c6a126ad94344bfd48eee454469a?s=128&d=identicon&r=PG&f=1", "display_name": "abstriction", "link": "https://stackoverflow.com/users/8609201/abstriction"}, "is_accepted": false, "score": 1, "last_activity_date": 1534835084, "last_edit_date": 1534835084, "creation_date": 1524144762, "answer_id": 49922430, "question_id": 49907203, "link": "https://stackoverflow.com/questions/49907203/how-to-import-gpg-key-and-decrypt-file-using-c-gpgme/49922430#49922430", "title": "How to import GPG key and decrypt file using C++ GPGME", "body": "<p>The invalid value error appears to have come from the lack of setup associated with the context. </p>\n\n<p>According to <a href=\"https://www.gnupg.org/documentation/manuals/gpgme.pdf\" rel=\"nofollow noreferrer\">documentation</a>, a new context needs to be created but for that to succeed a library version check must be called in order to initialize subsystems. Hence the additional lines of code should be added.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>gpgme_check_version(NULL);\ngpgme_new(&amp;ctx);\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 8609201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3640c6a126ad94344bfd48eee454469a?s=128&d=identicon&r=PG&f=1", "display_name": "abstriction", "link": "https://stackoverflow.com/users/8609201/abstriction"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1347, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1534835084, "creation_date": 1524078150, "last_edit_date": 1524164061, "question_id": 49907203, "link": "https://stackoverflow.com/questions/49907203/how-to-import-gpg-key-and-decrypt-file-using-c-gpgme", "title": "How to import GPG key and decrypt file using C++ GPGME", "body": "<p>How do I simply load a gpg key to import into a context using GPGME C++ library?</p>\n\n<p>I am trying to build an application that decrypts a file using GPGME but I am struggling to understand the GPU Documentation. I've tried to search the web for examples but have yet to come across one that loads in a preexisting GPG key. The attempt I made consists of trying to create a context and loading a preexisting key into which will be used to decrypt a file based on <a href=\"https://github.com/seiyak/GPGME-sample-code\" rel=\"nofollow noreferrer\">this</a> sample code. </p>\n\n<p><strike> I keep getting \"<strong>Invalid Input</strong>\" as a response error and have no idea why. I have included the code with output statements removed, but commented the output returns on them. </strike></p>\n\n<p>Update: After fixing the context, the decryption outputs success althrough the file is not properly decrypted and a key does not appear to have succesfully been added. I have provided the modified code below.</p>\n\n<pre><code>#include &lt;gpgme.h&gt;\n#include &lt;fcntl.h&gt;\n\nauto main(int argc, char** argv) -&gt; int\n{\n    gpgme_ctx_t ctx;\n    gpgme_error_t err;\n    gpgme_check_version(NULL);\n    err = gpgme_new(&amp;ctx);                          // returns Success\n    gpgme_data_t keydata;\n\n    // ATTEMPTING TO IMPORT KEY FILE\n    // returns Success\n    err = gpgme_data_new_from_file(&amp;keydata, \"test.gpg\", 1); \n\n    // ATTEMPTING TO IMPORT KEY INTO CONTEXT\n    err = gpgme_op_import(ctx, keydata);            // returns Success \n\n    // ATTEMPTING TO CHECK RESULT\n    // when accessing \"imported\" member, returns 0 keys imported\n    gpgme_import_result_t impRes = gpgme_op_import_result(ctx); \n\n    // DECRYPT DATA\n\n    gpgme_data_t fileDecrypted, fileEncrypted;\n\n    int fdEncrypt = open(\"EncryptedFile.tar.gz\", O_RDONLY);\n    int fdDecrypt = open(\"DecryptedFile.tar.gz\", O_CREAT | O_WRONLY, S_IRUSR | S_IWUSR);\n\n    err = gpgme_data_new_from_fd(&amp;fileEncrypted, fdEncrypt); // returns Success\n    err = gpgme_data_new_from_fd(&amp;fileDecrypted, fdDecrypt); // returns Success \n\n    gpgme_decrypt_result_t dec_result;\n    // returns Success\n    err = gpgme_op_decrypt_start (ctx, fileEncrypted, fileDecrypted);\n    dec_result = gpgme_op_decrypt_result(ctx); // returns address location\n\n    return 0;\n}\n</code></pre>\n\n<p>Any input is much appreciated, thanks in advance! </p>\n"}, {"tags": ["c++", "linked-list", "iterator", "double"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1524078611, "post_id": 49907152, "comment_id": 86830378, "body": "Most of this code is similar to the STL&#39;s containers and iterators. I&#39;d suggest you read a generic C++ tutorial, which will also cover the parts of the standard library that have their root in the STL."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1524078360, "post_id": 49907238, "comment_id": 86830273, "body": "&quot;<i>the only two insertable positions in the list are list beginning and list end</i>&quot; - that is not true.  Once you have the <code>begin</code> iterator, you can advance it to the desired item before then calling <code>insert()</code>. This is how linked-list iterators always work, since a linked list does not allow for random access."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1524078401, "post_id": 49907238, "comment_id": 86830291, "body": "@RemyLebeau, good point, I missed the increment/decrement. Edited."}, {"owner": {"reputation": 21, "user_id": 9666091, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sara Alan", "link": "https://stackoverflow.com/users/9666091/sara-alan"}, "edited": false, "score": 0, "creation_date": 1524078662, "post_id": 49907238, "comment_id": 86830409, "body": "dear,  if I make a list and call the Begin function, it&#39;s returning an  iterator object how I&#39;ll use it on may main function. Can I use the iterator function on it ( ++ , == , .. etc )  I&#39;m really don&#39;t understand why he made this operator ( ++ , == , .. etc ) while I can&#39;t use them"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 21, "user_id": 9666091, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sara Alan", "link": "https://stackoverflow.com/users/9666091/sara-alan"}, "edited": false, "score": 0, "creation_date": 1524078730, "post_id": 49907238, "comment_id": 86830445, "body": "@SaraMohamed what makes you think you can&#39;t use them? That are all <code>public</code>. The only things that are <code>private</code> are the <code>Node</code>s themselves, and you don&#39;t need direct access to them. Simply call the <code>begin()</code> method and save the iterator to a <code>NodeList::Iterator</code> variable, then use that variable as needed."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 21, "user_id": 9666091, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sara Alan", "link": "https://stackoverflow.com/users/9666091/sara-alan"}, "edited": false, "score": 0, "creation_date": 1524078867, "post_id": 49907238, "comment_id": 86830520, "body": "@SaraMohamed i added some code which hopefully clears your confusion."}, {"owner": {"reputation": 21, "user_id": 9666091, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sara Alan", "link": "https://stackoverflow.com/users/9666091/sara-alan"}, "edited": false, "score": 0, "creation_date": 1524080292, "post_id": 49907238, "comment_id": 86831310, "body": "Thanks a lot, I really appreciate that"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1524079330, "last_edit_date": 1524079330, "creation_date": 1524078293, "answer_id": 49907238, "question_id": 49907152, "link": "https://stackoverflow.com/questions/49907152/iterator-on-double-linkedlist-class/49907238#49907238", "title": "Iterator on double Linkedlist class", "body": "<p>To insert in the front or back of the list, you have to obtain the <code>begin</code> or <code>end</code> iterator.</p>\n\n<p>To insert in the middle of the list, you have to obtain the <code>begin</code> iterator and than increment it until you reach the desired position (making sure you do not reach past the <code>end</code> iterator).</p>\n\n<p>Alternatively, you can start with the <code>end</code> iterator and decrement it.</p>\n\n<p>Example:</p>\n\n<pre><code>NodeList list;\nlist.insertFront(10); // put one element\nlist.insertFront(20); // put another element\n// list is now 20 -&gt; 10\nNodeList::iterator it = list.begin();\n++it;\nlist.insert(it, 15); // this inserts 15 before 10\n// List now is 20 -&gt; 15 -&gt; 10\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 9666091, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sara Alan", "link": "https://stackoverflow.com/users/9666091/sara-alan"}, "edited": false, "score": 0, "creation_date": 1524079591, "post_id": 49907335, "comment_id": 86830937, "body": "Thanks a lot dear , really I&#39;m very thankful for this"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1524079104, "last_edit_date": 1524079104, "creation_date": 1524078634, "answer_id": 49907335, "question_id": 49907152, "link": "https://stackoverflow.com/questions/49907152/iterator-on-double-linkedlist-class/49907335#49907335", "title": "Iterator on double Linkedlist class", "body": "<p>The <code>begin()</code> method returns an <code>Iterator</code> to the front of the list.  <code>Iterator</code> is a <code>public</code> nested class of <code>NodeList</code>, so you have to quality <code>Iterator</code> when declaring a variable of that type, eg:</p>\n\n<pre><code>int main ()\n{\n    NodeList Nl;\n\n    // optionally, insert some items into the list...\n\n    NodeList::Iterator p = Nl.begin();\n    // optionally, increment p if you want to insert in the middle of the list...\n\n    N1.insert(p, 5);\n\n    return 0; \n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9666091, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sara Alan", "link": "https://stackoverflow.com/users/9666091/sara-alan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 744, "favorite_count": 0, "accepted_answer_id": 49907335, "answer_count": 2, "score": 0, "last_activity_date": 1524079330, "creation_date": 1524077978, "last_edit_date": 1524078314, "question_id": 49907152, "link": "https://stackoverflow.com/questions/49907152/iterator-on-double-linkedlist-class", "title": "Iterator on double Linkedlist class", "body": "<p>This code is from a \"Data Structures\" book By Micheal T.Goodrigh. I'm studying on my own so I have no one to explain this code for me:</p>\n\n<pre><code>typedef int Elem;               // list base element type\nclass NodeList {              // node-based list\nprivate:\n  struct Node {               // a node of the list\n    Elem elem;                // element value\n    Node* prev;               // previous in list\n    Node* next;               // next in list\n  };\npublic:\n  class Iterator {                // an iterator for the list\n  public:\n    Elem&amp; operator*();            // reference to the element\n    bool operator==(const Iterator&amp; p) const; // compare positions\n    bool operator!=(const Iterator&amp; p) const;\n    Iterator&amp; operator++();           // move to next position\n    Iterator&amp; operator--();           // move to previous position\n    friend class NodeList;            // give NodeList access\n  private:\n    Node* v;                  // pointer to the node\n    Iterator(Node* u);            // create from node\n  };\npublic:\n  NodeList();                 // default constructor\n  int size() const;               // list size\n  bool empty() const;             // is the list empty?\n  Iterator begin() const;         // beginning position\n  Iterator end() const;           // (just beyond) last position\n  void insertFront(const Elem&amp; e);        // insert at front\n  void insertBack(const Elem&amp; e);     // insert at rear\n  void insert(const Iterator&amp; p, const Elem&amp; e); // insert e before p\n  void eraseFront();              // remove first\n  void eraseBack();               // remove last\n  void erase(const Iterator&amp; p);      // remove p\nprivate:                  // data members\n  int     n;                  // number of items\n  Node*   header;             // head-of-list sentinel\n  Node*   trailer;                // tail-of-list sentinel\n};\n</code></pre>\n\n<p>I'm very confused how I use the <code>insert()</code> method.  How do I pass an iterator to it while the iteretor is inside its class and <code>Node</code> is private?</p>\n\n<pre><code>int main () {\n  NodeList Nl;\n  N1.insert(p,5)      // How to create this p iterator and pass it to insert?\n  return 0; \n}\n</code></pre>\n"}, {"tags": ["c++", "clang"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1524078009, "post_id": 49907136, "comment_id": 86830110, "body": "Change toolset in project settings."}, {"owner": {"reputation": 670, "user_id": 5605546, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XtgXs.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/5605546/adrian"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1524078292, "post_id": 49907136, "comment_id": 86830245, "body": "I have done this already (is Visual Studio 2017 (v141)) and still doesn&#39;t work."}], "answers": [{"comments": [{"owner": {"reputation": 670, "user_id": 5605546, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XtgXs.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/5605546/adrian"}, "edited": false, "score": 0, "creation_date": 1524078653, "post_id": 49907228, "comment_id": 86830403, "body": "I have tried all you suggested but still doesn&#39;t work. Always tries to compile using this path : c:\\qt\\qt5.9.3\\tools\\qtcreator\\bin\\clang\\bin\\clang.exe"}, {"owner": {"reputation": 437, "user_id": 1135770, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VCTfz.jpg?s=128&g=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/1135770/rahul"}, "reply_to_user": {"reputation": 670, "user_id": 5605546, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XtgXs.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/5605546/adrian"}, "edited": false, "score": 0, "creation_date": 1524078761, "post_id": 49907228, "comment_id": 86830464, "body": "Is there any package added ? If yes then close visual studio delete packages folder and restore your packages then try again."}, {"owner": {"reputation": 670, "user_id": 5605546, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XtgXs.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/5605546/adrian"}, "edited": false, "score": 0, "creation_date": 1524078842, "post_id": 49907228, "comment_id": 86830507, "body": "I have removed everything, I have created a new project on a new disk only with main() and the result is the same."}, {"owner": {"reputation": 437, "user_id": 1135770, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VCTfz.jpg?s=128&g=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/1135770/rahul"}, "reply_to_user": {"reputation": 670, "user_id": 5605546, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XtgXs.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/5605546/adrian"}, "edited": false, "score": 0, "creation_date": 1524078917, "post_id": 49907228, "comment_id": 86830557, "body": "Restore your visual studio it seems other updates have broken something"}, {"owner": {"reputation": 670, "user_id": 5605546, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XtgXs.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/5605546/adrian"}, "edited": false, "score": 0, "creation_date": 1524079145, "post_id": 49907228, "comment_id": 86830684, "body": "how can I do this?"}, {"owner": {"reputation": 670, "user_id": 5605546, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XtgXs.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/5605546/adrian"}, "edited": false, "score": 0, "creation_date": 1524079746, "post_id": 49907228, "comment_id": 86831026, "body": "I also restore the settings and the result is the same."}], "tags": [], "owner": {"reputation": 437, "user_id": 1135770, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VCTfz.jpg?s=128&g=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/1135770/rahul"}, "is_accepted": false, "score": 0, "last_activity_date": 1524078252, "creation_date": 1524078252, "answer_id": 49907228, "question_id": 49907136, "link": "https://stackoverflow.com/questions/49907136/visual-studio-use-clang-compiler-and-fails/49907228#49907228", "title": "Visual Studio use clang compiler and fails", "body": "<blockquote>\n  <p>Below are some solutions might help you.</p>\n</blockquote>\n\n<ol>\n<li>You can delete your bin and obj folder then try to build</li>\n<li>Clean your solution then build your project</li>\n<li>Move your project from C to D drive (Might be some security access problem).</li>\n<li>Clear your Temp files Win+R -- %Temp% hit enter and remove temp files</li>\n</ol>\n"}], "owner": {"reputation": 670, "user_id": 5605546, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XtgXs.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/5605546/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 262, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1524078252, "creation_date": 1524077921, "last_edit_date": 1524078126, "question_id": 49907136, "link": "https://stackoverflow.com/questions/49907136/visual-studio-use-clang-compiler-and-fails", "title": "Visual Studio use clang compiler and fails", "body": "<p>I have a strange problem with Visual Studio. Yesterday, all was fine.  Today, it gives me compiler errors, even if i try to run just an example like this:</p>\n\n<pre><code>int main()\n{\n return 0;\n}\n</code></pre>\n\n<p>This is all of the errors:</p>\n\n<pre><code>Severity    Code    Description Project File    Line    Suppression State\nWarning C4335   Mac file format detected: please convert the source file to either DOS or UNIX format   test    c:\\qt\\qt5.9.3\\tools\\qtcreator\\bin\\clang\\bin\\clang.exe   1   \nError   C3872   '0x90': this character is not allowed in an identifier  test    c:\\qt\\qt5.9.3\\tools\\qtcreator\\bin\\clang\\bin\\clang.exe   1   \nError   C2018   unknown character '0x3' test    c:\\qt\\qt5.9.3\\tools\\qtcreator\\bin\\clang\\bin\\clang.exe   1   \nError   C2018   unknown character '0x4' test    c:\\qt\\qt5.9.3\\tools\\qtcreator\\bin\\clang\\bin\\clang.exe   1   \nError   C2018   unknown character '0x40'    test    c:\\qt\\qt5.9.3\\tools\\qtcreator\\bin\\clang\\bin\\clang.exe   1   \nError   C2018   unknown character '0x18'    test    c:\\qt\\qt5.9.3\\tools\\qtcreator\\bin\\clang\\bin\\clang.exe   1   \nError   C2018   unknown character '0x1' test    c:\\qt\\qt5.9.3\\tools\\qtcreator\\bin\\clang\\bin\\clang.exe   1   \nError   C2018   unknown character '0xe' test    c:\\qt\\qt5.9.3\\tools\\qtcreator\\bin\\clang\\bin\\clang.exe   1   \nError   C2018   unknown character '0x1f'    test    c:\\qt\\qt5.9.3\\tools\\qtcreator\\bin\\clang\\bin\\clang.exe   1   \nError   C4430   missing type specifier - int assumed. Note: C++ does not support default-int    test    c:\\qt\\qt5.9.3\\tools\\qtcreator\\bin\\clang\\bin\\clang.exe   1   \nError   C2146   syntax error: missing ';' before identifier '\u00ff\u00ff\u00b8'   test    c:\\qt\\qt5.9.3\\tools\\qtcreator\\bin\\clang\\bin\\clang.exe   1   \nError   C3872   '0x2021': this character is not allowed in an identifier    test    c:\\qt\\qt5.9.3\\tools\\qtcreator\\bin\\clang\\bin\\clang.exe   2   \nError   C2018   unknown character '0x1d'    test    c:\\qt\\qt5.9.3\\tools\\qtcreator\\bin\\clang\\bin\\clang.exe   2   \nError   C3872   '0xa9': this character is not allowed in an identifier  test    c:\\qt\\qt5.9.3\\tools\\qtcreator\\bin\\clang\\bin\\clang.exe   2   \nError   C3873   '0xa9': this character is not allowed as a first character of an identifier test    c:\\qt\\qt5.9.3\\tools\\qtcreator\\bin\\clang\\bin\\clang.exe   2   \nError   C3872   '0xf7': this character is not allowed in an identifier  test    c:\\qt\\qt5.9.3\\tools\\qtcreator\\bin\\clang\\bin\\clang.exe   2   \nError   C2018   unknown character '0x6' test    c:\\qt\\qt5.9.3\\tools\\qtcreator\\bin\\clang\\bin\\clang.exe   2   \nError   C2018   unknown character '0x16'    test    c:\\qt\\qt5.9.3\\tools\\qtcreator\\bin\\clang\\bin\\clang.exe   2   \nError   C2018   unknown character '0x1' test    c:\\qt\\qt5.9.3\\tools\\qtcreator\\bin\\clang\\bin\\clang.exe   2   \nError   C2018   unknown character '0x7' test    c:\\qt\\qt5.9.3\\tools\\qtcreator\\bin\\clang\\bin\\clang.exe   2   \nError   C2018   unknown character '0x2' test    c:\\qt\\qt5.9.3\\tools\\qtcreator\\bin\\clang\\bin\\clang.exe   2   \nError   C2018   unknown character '0xe' test    c:\\qt\\qt5.9.3\\tools\\qtcreator\\bin\\clang\\bin\\clang.exe   2   \n</code></pre>\n\n<p>This is happening even if I create an empty project.</p>\n\n<p>I think the problem is related with <code>clang.exe</code> from Qt. I don't understand why it is trying to use that compiler (I didn't change anything). </p>\n\n<p>How can I change this and use the \"Visual C++ 14.1\" compiler again?</p>\n"}, {"tags": ["c++", "eclipse", "git", "cygwin", "clion"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1524078228, "post_id": 49906992, "comment_id": 86830212, "body": "Given that you have cloned the project using <code>eclipse</code> what is preventing you from reading the source, pulling updates etc? What is your specific problem? It seems the hard part is over."}, {"owner": {"reputation": 1589, "user_id": 6683344, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2f075a3347921d1f464ccab1fc16f3c1?s=128&d=identicon&r=PG", "display_name": "Robert Lewis", "link": "https://stackoverflow.com/users/6683344/robert-lewis"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1524078294, "post_id": 49906992, "comment_id": 86830246, "body": "After I clone the repo, Eclipse wants me to create a project from it. Nothing I&#39;ve tried works."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1524078477, "post_id": 49906992, "comment_id": 86830319, "body": "What I usually do is clone the git repo using <code>git</code> in the <code>eclipse</code> workespace folder. Then I go to <code>eclipse</code> and create a <code>C++ Makeile</code>project using the same name it cloned into. Then <code>eclipse</code> automatically detects the <code>git</code> control files and adds <code>git</code> features."}, {"owner": {"reputation": 1589, "user_id": 6683344, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2f075a3347921d1f464ccab1fc16f3c1?s=128&d=identicon&r=PG", "display_name": "Robert Lewis", "link": "https://stackoverflow.com/users/6683344/robert-lewis"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1524078658, "post_id": 49906992, "comment_id": 86830407, "body": "Thanks. Which of these options do I select for toolchain? Cross GCC, GNU Autotools, MacOSX Berkeley UPC, or MacOSX GCC? Oh, wait, there&#39;s a bunch more options if I deselect &quot;Show only available toolchains that support this (Mac) platform&quot;."}, {"owner": {"reputation": 1589, "user_id": 6683344, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2f075a3347921d1f464ccab1fc16f3c1?s=128&d=identicon&r=PG", "display_name": "Robert Lewis", "link": "https://stackoverflow.com/users/6683344/robert-lewis"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1524078868, "post_id": 49906992, "comment_id": 86830522, "body": "A couple of the options mention <code>Cygwin</code>: &quot;Cygwin GCC&quot; and &quot;LLVM with Clang (Windows) (Cygwin)&quot;. As I noted, the original CLion project was created on Windows using Cygwin."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1524078870, "post_id": 49906992, "comment_id": 86830523, "body": "I use <code>Makefile project-&gt;Empty project</code>  and <code>Linux GCC</code> tool-chain. Avoid <code>Cross GCC</code> and <code>GNU Autotools</code> unless you are cross-compiling (which you may be?) or using <code>GNU Autotools</code> (which you are not)."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1524078910, "post_id": 49906992, "comment_id": 86830553, "body": "What system are <b>you</b> using?"}, {"owner": {"reputation": 1589, "user_id": 6683344, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2f075a3347921d1f464ccab1fc16f3c1?s=128&d=identicon&r=PG", "display_name": "Robert Lewis", "link": "https://stackoverflow.com/users/6683344/robert-lewis"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1524078930, "post_id": 49906992, "comment_id": 86830563, "body": "MacOS High Sierra (and I don&#39;t care about compiling or editing)"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1524078956, "post_id": 49906992, "comment_id": 86830577, "body": "Then I would  choose the simplest looking toolchain for that platform."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1524079048, "post_id": 49906992, "comment_id": 86830632, "body": "Probably <code>MacOSX GCC</code> (do you have <code>GCC</code> installed)?"}, {"owner": {"reputation": 1589, "user_id": 6683344, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2f075a3347921d1f464ccab1fc16f3c1?s=128&d=identicon&r=PG", "display_name": "Robert Lewis", "link": "https://stackoverflow.com/users/6683344/robert-lewis"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1524079555, "post_id": 49906992, "comment_id": 86830913, "body": "They&#39;re part of Xcode, right?"}], "answers": [{"tags": [], "owner": {"reputation": 1589, "user_id": 6683344, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2f075a3347921d1f464ccab1fc16f3c1?s=128&d=identicon&r=PG", "display_name": "Robert Lewis", "link": "https://stackoverflow.com/users/6683344/robert-lewis"}, "is_accepted": true, "score": 0, "last_activity_date": 1524080185, "creation_date": 1524080185, "answer_id": 49907726, "question_id": 49906992, "link": "https://stackoverflow.com/questions/49906992/how-to-use-eclipse-to-observe-a-clion-project-in-git/49907726#49907726", "title": "How to use Eclipse to observe a CLion project in Git", "body": "<p>As mentioned in comments, the solution (after cloning the repo) is to create a new \"Makefile Project with existing code\". Enter the project name and point it at the local repo. In my case, for Toolchain I selected MacOSX GCC. </p>\n"}], "owner": {"reputation": 1589, "user_id": 6683344, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2f075a3347921d1f464ccab1fc16f3c1?s=128&d=identicon&r=PG", "display_name": "Robert Lewis", "link": "https://stackoverflow.com/users/6683344/robert-lewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 49907726, "answer_count": 1, "score": 0, "last_activity_date": 1524080185, "creation_date": 1524077474, "question_id": 49906992, "link": "https://stackoverflow.com/questions/49906992/how-to-use-eclipse-to-observe-a-clion-project-in-git", "title": "How to use Eclipse to observe a CLion project in Git", "body": "<p>There is a C/C++ project in GitLab made with CLion &amp; Cygwin. Since I don't have CLion, I want to use Eclipse to simply look at the source files, pull updates, etc. I don't need to edit, build, or run it. </p>\n\n<p>I can't figure out how to make this work. I've been able to use Eclipse to clone the repo locally, but am stuck on what to do next. </p>\n"}, {"tags": ["c++", "inheritance"], "comments": [{"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 2, "creation_date": 1524076544, "post_id": 49906708, "comment_id": 86829319, "body": "Your guru was probable talking about something like <code>foo(int&amp;)</code> vs <code>foo(const int&amp;)</code>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1524076804, "post_id": 49906708, "comment_id": 86829477, "body": "Beware that, in general, code that demonstrates a behavior is not proof of that behavior. For example, I could construct an example on my platform that uses a dangling reference to an <code>int</code> and that would appear to work. But that isn&#39;t proof that it works in general, only that I was (un)lucky with my undefined behavior. Because of the existence of undefined behavior, showing that something behaves in a certain way doesn&#39;t prove that it will always behave that way. It&#39;s best to instead rely on credible documentation, ideally the standard itself."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 3, "creation_date": 1524077191, "post_id": 49906708, "comment_id": 86829691, "body": "likely dupe of <a href=\"https://stackoverflow.com/questions/17208570/top-level-const-doesnt-influence-a-function-signature\">Top-level const doesn&#39;t influence a function signature</a> or <a href=\"https://stackoverflow.com/questions/3681188/why-does-a-function-declaration-with-a-const-argument-allow-calling-of-a-functio\">Why does a function declaration with a const argument allow calling of a function with a non-const argument?</a>; see also the more searchable <a href=\"https://stackoverflow.com/questions/24290732/const-qualifier-disappears-from-pure-virtual-function\">const qualifier disappears from pure virtual function</a>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1524078205, "post_id": 49906708, "comment_id": 86830205, "body": "It doesn&#39;t &quot;break&quot; anything; it&#39;s simply that an overriding function must have the same argument list as the function that it overrides. Just as <code>void f(int)</code> in a derived class doesn&#39;t override <code>virtual void f(double)</code> in a base class, <code>void f(int&amp;)</code> doesn&#39;t override <code>virtual void(const int&amp;)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 4, "last_activity_date": 1524076480, "creation_date": 1524076480, "answer_id": 49906730, "question_id": 49906708, "link": "https://stackoverflow.com/questions/49906708/virtual-functions-with-varying-of-function-parameters-in-derived-class-by-const/49906730#49906730", "title": "Virtual functions with varying of function parameters in derived class by const type in &quot;function parameter&quot; will break virtual mechanism?", "body": "<p>Your <code>C++ guru</code> is wrong (provided you understood them, gurus tend to talk in cryptic messages). <code>Const</code>-qualifier on the argument type itself is not a part of a function signature at all.</p>\n\n<p>For example, <code>void foo(int* const );</code> is no different from <code>void foo(int* )</code>. Please note, it is not the same as const qualification of the indirect object, like <code>void foo(const int* )</code> is different from <code>void foo(int* )</code>.</p>\n\n<p>In your particular case, <code>void test(int x)</code> is the same as <code>void test(int const x)</code></p>\n"}, {"comments": [{"owner": {"reputation": 673, "user_id": 103465, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/55c7d950f6e97c444f2542b746c634c4?s=128&d=identicon&r=PG", "display_name": "buddy", "link": "https://stackoverflow.com/users/103465/buddy"}, "edited": false, "score": 0, "creation_date": 1524077937, "post_id": 49906764, "comment_id": 86830071, "body": "everything right. Thanks for the answer"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 4, "last_activity_date": 1524076576, "creation_date": 1524076576, "answer_id": 49906764, "question_id": 49906708, "link": "https://stackoverflow.com/questions/49906708/virtual-functions-with-varying-of-function-parameters-in-derived-class-by-const/49906764#49906764", "title": "Virtual functions with varying of function parameters in derived class by const type in &quot;function parameter&quot; will break virtual mechanism?", "body": "<p><code>void test(int)</code> != <code>void test(int) const</code> and would \"break\" virtual call.<br>\nand <code>void test(int&amp;)</code> != <code>void test(const int&amp;)</code> and would \"break\" virtual call.</p>\n\n<p><code>void test(int)</code> is the same declaration than <code>void test(const int)</code> and won't \"break\" virtual call.</p>\n"}, {"tags": [], "owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "is_accepted": true, "score": 5, "last_activity_date": 1524076789, "creation_date": 1524076789, "answer_id": 49906813, "question_id": 49906708, "link": "https://stackoverflow.com/questions/49906708/virtual-functions-with-varying-of-function-parameters-in-derived-class-by-const/49906813#49906813", "title": "Virtual functions with varying of function parameters in derived class by const type in &quot;function parameter&quot; will break virtual mechanism?", "body": "<p>The top level cv-qualifier is not part of function signature, they are simply ignored.</p>\n\n<p><a href=\"https://timsong-cpp.github.io/cppwp/n4659/dcl.fct#5\" rel=\"noreferrer\">[dcl.fct]/5</a></p>\n\n<blockquote>\n  <p>After producing the list of parameter types, any top-level cv-qualifiers modifying a parameter type are deleted when forming the function type.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 2, "creation_date": 1524077253, "post_id": 49906911, "comment_id": 86829729, "body": "<i>&quot;He was right&quot;</i> does not follow from <i>&#39;one compiler was buggy at one point in time&#39;</i> (and now emits a rather spurious warning). This is a useful factoid, for sure. However, it&#39;s not an answer. A &quot;C++ guru&quot; would refer to the Standard, not one version of one compiler."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1524077371, "post_id": 49906911, "comment_id": 86829789, "body": "@underscore_d if this compiler is actually used in this setting, than of course guru is right, but the OP is wrong omitting this detail."}, {"owner": {"reputation": 673, "user_id": 103465, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/55c7d950f6e97c444f2542b746c634c4?s=128&d=identicon&r=PG", "display_name": "buddy", "link": "https://stackoverflow.com/users/103465/buddy"}, "edited": false, "score": 0, "creation_date": 1524077744, "post_id": 49906911, "comment_id": 86829977, "body": "Added up there, thanks for giving loads of good answers!"}, {"owner": {"reputation": 673, "user_id": 103465, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/55c7d950f6e97c444f2542b746c634c4?s=128&d=identicon&r=PG", "display_name": "buddy", "link": "https://stackoverflow.com/users/103465/buddy"}, "edited": false, "score": 0, "creation_date": 1524078562, "post_id": 49906911, "comment_id": 86830358, "body": "Writing portable code, you still have to think about versions?"}, {"owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "edited": false, "score": 1, "creation_date": 1524081820, "post_id": 49906911, "comment_id": 86832111, "body": "It&#39;s not <i>right</i> if it&#39;s an untrue statement--even if it happened to function as expected in one specific, broken context.  At best, it&#39;s just not &quot;100% wrong in all situations.&quot;"}], "tags": [], "owner": {"reputation": 673, "user_id": 103465, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/55c7d950f6e97c444f2542b746c634c4?s=128&d=identicon&r=PG", "display_name": "buddy", "link": "https://stackoverflow.com/users/103465/buddy"}, "is_accepted": false, "score": 1, "last_activity_date": 1524077155, "creation_date": 1524077155, "answer_id": 49906911, "question_id": 49906708, "link": "https://stackoverflow.com/questions/49906708/virtual-functions-with-varying-of-function-parameters-in-derived-class-by-const/49906911#49906911", "title": "Virtual functions with varying of function parameters in derived class by const type in &quot;function parameter&quot; will break virtual mechanism?", "body": "<p>He was right.just found it by seeing the warning.</p>\n\n<p>In this case : Compilers before VS2008 would break the virtual mechanism in this case.</p>\n\n<p>Later compilers it gives warning C4373: virtual function overrides '%$pS', previous versions of the compiler did not override when parameters only differed by const/volatile qualifiers</p>\n\n<p>found the documentation here <a href=\"https://msdn.microsoft.com/en-us/library/bb384874.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/bb384874.aspx</a></p>\n"}, {"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1524077929, "post_id": 49907112, "comment_id": 86830068, "body": "This is a good perspective on it. Also: This is why I strictly enforce right-to-left types in all my own code! <code>int const *const</code> it has to be."}, {"owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1524079844, "post_id": 49907112, "comment_id": 86831080, "body": "When I get to decide the coding style, that&#39;s my rule too.  Yes, the rule for const is to modify the thing to its left <i>unless</i> there is nothing to its left, in which case it does the thing to its right.  Modifying the thing to its right is the <i>exception</i> to the rule, and makes reading out loud right-to-left more cumbersome."}], "tags": [], "owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "is_accepted": false, "score": 3, "last_activity_date": 1524077834, "creation_date": 1524077834, "answer_id": 49907112, "question_id": 49906708, "link": "https://stackoverflow.com/questions/49906708/virtual-functions-with-varying-of-function-parameters-in-derived-class-by-const/49907112#49907112", "title": "Virtual functions with varying of function parameters in derived class by const type in &quot;function parameter&quot; will break virtual mechanism?", "body": "<p>The equivalent of std::decay happens to argument types for functions.  (It's actually the reverse, std::decay is modeled after what functions arguments do.)</p>\n\n<p>The <em>outermost</em> const will be dropped from the signature.  By outermost, think of types as envelopes composed over different types.  A pointer to const int is a different type than a pointer to int, and will result in a different function signature.  (With a pointer, you can think of the pointer itself as the outer thing, and what it points to is \"inner\" and not modified.)</p>\n\n<ul>\n<li><em><code>const int</code></em> - becomes just <em><code>int</code></em></li>\n<li><em><code>int *</code></em> is unchanged and remains <em><code>int *</code></em></li>\n<li><em><code>const int *</code></em> is unchanged and remains <em><code>const int *</code></em> - const is on the int, not the pointer, and only the outermost const is dropped</li>\n<li><p><em><code>int const *</code></em> is unchanged and remains <em><code>int const *</code></em> - const is on the int, not the pointer, and only the outermost const is dropped.  (Note, this is 100% identical in meaning as <code>const int *</code>)</p></li>\n<li><p><em><code>int * const</code></em> - changes to <em><code>int *</code></em> - because const qualifies the outermost pointer</p></li>\n<li><em><code>int * const * const</code></em> becomes <em><code>int * const *</code></em> - outer const is dropped on outer pointer, inner const is not dropped on the inner pointer.</li>\n<li><em><code>const int * const * const</code></em> becomes <em><code>const int * const *</code></em> - outer const is dropped on outer pointer, inner const is not dropped on the inner pointer, and const is also kept on the internal-most int</li>\n<li><em><code>MyTemplate&lt;const T&gt;</code></em> - unchanged, remains <em><code>MyTemplate&lt;const T&gt;</code></em>, because the const isn't on the outer type, but nestled in a template parameter</li>\n</ul>\n\n<p>So yes, const does affect type, but not in the simple case like you tried.  Only when it's contained inside of a type, not affecting the outermost type.</p>\n\n<p>If you read types from <em>right-to-left</em> it can help.  If the rightmost thing in a type specifier is a <em>const</em>, it is always dropped (example <code>int * const</code>).  If the leftmost thing is const, it is only dropped if the thing it is qualifying is the rightmost thing in the type (example <code>const int</code>, the leftmost thing is const and it affects the int to its right AND the int to its right is the rightmost thing in the type.)  (example 2: <code>const * int</code> not dropped, because leftmost const modifies the thing to its right that is not the rightmost thing in the type.)</p>\n"}], "owner": {"reputation": 673, "user_id": 103465, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/55c7d950f6e97c444f2542b746c634c4?s=128&d=identicon&r=PG", "display_name": "buddy", "link": "https://stackoverflow.com/users/103465/buddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 565, "favorite_count": 0, "closed_date": 1538134310, "accepted_answer_id": 49906813, "answer_count": 5, "score": 1, "last_activity_date": 1538134361, "creation_date": 1524076344, "last_edit_date": 1524077695, "question_id": 49906708, "link": "https://stackoverflow.com/questions/49906708/virtual-functions-with-varying-of-function-parameters-in-derived-class-by-const", "closed_reason": "Duplicate", "title": "Virtual functions with varying of function parameters in derived class by const type in &quot;function parameter&quot; will break virtual mechanism?", "body": "<p>A C++ guru told that varying the function parameter type with const in derived class, will break the virtual call mechanism.</p>\n\n<p>I tried a simple program ( forgive for non standard code, written purely for test) , which prove otherwise.\nThe function parameter change by const value will not break the virtual mechanism,</p>\n\n<p>Is there any reasons &amp; documentation pointing to this behavior?</p>\n\n<p>Behavior noted with  VS 2012 compiler &amp; latest g++ compiler.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\n\nclass Base\n{\npublic:\nBase(){ cout&lt;&lt;\"base\"&lt;&lt;endl;}\nvirtual ~Base(){ cout&lt;&lt;\"dest base\"&lt;&lt;endl;}\nvirtual void test(const int x){ cout &lt;&lt; \"base test\"&lt;&lt;\"x = \" &lt;&lt; x&lt;&lt;endl;}\n};\n\nclass Derived : public Base\n{\npublic:\nDerived(){ cout&lt;&lt;\"derived\"&lt;&lt;endl;}\nvirtual ~Derived(){ cout&lt;&lt;\"dest derived\"&lt;&lt;endl;}\nvirtual void test(int x){ cout &lt;&lt; \"derived test\"&lt;&lt;\"x = \" &lt;&lt; x&lt;&lt;endl;}\n};\nint main() {\n\n    Base *b = new Derived();\n    b-&gt;test(10);\n    delete b;\n    return 0;\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>base\nderived\nderived testx = 10\ndest derived\ndest base\n</code></pre>\n"}, {"tags": ["c++", "matrix", "memory", "inversion"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1524076555, "post_id": 49906643, "comment_id": 86829323, "body": "Recommend running your program through a memory usage checker like AddressSanitizer or valgrind."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 9536117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f66c79704a341a60344113ff7819b1?s=128&d=identicon&r=PG&f=1", "display_name": "ZZ32", "link": "https://stackoverflow.com/users/9536117/zz32"}, "edited": false, "score": 0, "creation_date": 1524079789, "post_id": 49906895, "comment_id": 86831051, "body": "Hi, thanks for your reply. I changed that part but still had the same issue."}, {"owner": {"reputation": 6065, "user_id": 864027, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f26a415e9299390c5090b6150a39b30?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/864027/daniel"}, "reply_to_user": {"reputation": 21, "user_id": 9536117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f66c79704a341a60344113ff7819b1?s=128&d=identicon&r=PG&f=1", "display_name": "ZZ32", "link": "https://stackoverflow.com/users/9536117/zz32"}, "edited": false, "score": 0, "creation_date": 1524094867, "post_id": 49906895, "comment_id": 86836996, "body": "@ZZ32 one thing I recommend is setting pointers to <code>nullptr</code> after they&#39;ve been <code>delete</code>d. That way you&#39;ll get a segfault immediately when you try to use it. That usually makes debugging easier."}], "tags": [], "owner": {"reputation": 6065, "user_id": 864027, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f26a415e9299390c5090b6150a39b30?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/864027/daniel"}, "is_accepted": false, "score": 2, "last_activity_date": 1524077254, "last_edit_date": 1524077254, "creation_date": 1524077116, "answer_id": 49906895, "question_id": 49906643, "link": "https://stackoverflow.com/questions/49906643/memory-issue-when-calculating-matrix-inverse-by-c/49906895#49906895", "title": "Memory issue when calculating matrix inverse by C++", "body": "<p>The error is because of this code in the <code>MatrixInversion</code> function;</p>\n\n<pre><code>delete [] temp;\nfor(int i=0; i&lt;order-1; i++)\n    delete [] minor[i];\ndelete [] minor;\n</code></pre>\n\n<p>The variables <code>temp</code> and <code>minor</code> were defined as follows:</p>\n\n<pre><code>long double *temp = new long double[(order-1)*(order-1)];\nlong double **minor = new long double*[order-1];\nfor(int i=0;i&lt;order-1;i++)\n     minor[i] = temp+(i*(order-1));\n</code></pre>\n\n<p>Each row in the <code>minor</code> matrix does not have new memory allocated to it; rather, it's just a pointer into the <code>temp</code> array. So what happens is you try to delete memory that wasn't allocated with <code>new</code>.</p>\n\n<p>You should remove the <code>for</code> loop deleting the elements of <code>minor</code>. That memory will be freed when you <code>delete [] temp;</code>.</p>\n"}], "owner": {"reputation": 21, "user_id": 9536117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f66c79704a341a60344113ff7819b1?s=128&d=identicon&r=PG&f=1", "display_name": "ZZ32", "link": "https://stackoverflow.com/users/9536117/zz32"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524077254, "creation_date": 1524076116, "last_edit_date": 1524077105, "question_id": 49906643, "link": "https://stackoverflow.com/questions/49906643/memory-issue-when-calculating-matrix-inverse-by-c", "title": "Memory issue when calculating matrix inverse by C++", "body": "<p>I am now using some c++ code to compute matrix inverse and the matrix is stored in a two-dimensional array. </p>\n\n<p>However, I met some possible memory issues that I had no idea how to fix it. Sometimes, I can get good return while sometimes error occurs. Really appreciate if you can give advice.</p>\n\n<p>I got error message \"malloc: *** error for object 0x163faaa38: incorrect checksum for freed object - object was probably modified after being freed.\n\". </p>\n\n<p>Also, please see this picture and I use it to indicate which part of the code might go wrong.</p>\n\n<p><a href=\"https://i.stack.imgur.com/pNXUD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pNXUD.png\" alt=\"possible error code line\"></a></p>\n\n<p>Thank you very much.</p>\n\n<pre><code>long double Determinant(long double **a, int n)\n{\n    int i, j, j1, j2 ;                    // general loop and matrix subscripts\n    long double det = 0 ;                   // init determinant\n    // pointer to pointers to implement 2d\n    // square array\n    long double **m;\n    if (n == 1) {                 // should not get here\n        det = a[0][0] ;\n    }\n\n    else if (n == 2)  {                // basic 2X2 sub-matrix determinate\n        // definition. When n==2, this ends the\n        det = a[0][0] * a[1][1] - a[1][0] * a[0][1] ;// the recursion series\n    }\n\n    // recursion continues, solve next sub-matrix\n    else {                             // solve the next minor by building a\n        // sub matrix\n        det = 0 ;                      // initialize determinant of sub-matrix\n\n        // for each column in sub-matrix\n        for (j1 = 0 ; j1 &lt; n ; j1++) {\n            // get space for the pointer list\n            m = new long double*[n-1];\n            //m = (double **) malloc((n-1)* sizeof(double *)) ;\n\n            for (i = 0 ; i &lt; n-1 ; i++)\n                m[i] = new long double[n-1];\n            //     i[0][1][2][3]  first malloc\n            //  m -&gt; +  +  +  +   space for 4 pointers\n            //       |  |  |  |          j  second malloc\n            //       |  |  |  +-&gt; _ _ _ [0] pointers to\n            //       |  |  +----&gt; _ _ _ [1] and memory for\n            //       |  +-------&gt; _ a _ [2] 4 doubles\n            //       +----------&gt; _ _ _ [3]\n            //\n            //                   a[1][2]\n            // build sub-matrix with minor elements excluded\n            for (i = 1 ; i &lt; n ; i++) {\n                j2 = 0 ;               // start at first sum-matrix column position\n                // loop to copy source matrix less one column\n                for (j = 0 ; j &lt; n ; j++) {\n                    if (j == j1) continue ; // don't copy the minor column element\n\n                    m[i-1][j2] = a[i][j] ;  // copy source element into new sub-matrix\n                    // i-1 because new sub-matrix is one row\n                    // (and column) smaller with excluded minors\n                    j2++ ;                  // move to next sub-matrix column position\n                }\n            }\n\n            det += pow(-1.0, 1.0 + j1 + 1.0) * a[0][j1] * Determinant(m, n-1);\n            // sum x raised to y power\n            // recursively get determinant of next\n            // sub-matrix which is now one\n            // row &amp; column smaller\n            for (i = 0 ; i &lt; n-1 ; i++) delete m[i];// free the storage allocated to\n            // to this minor's set of pointers\n            // free the storage for the original\n            // pointer to pointer\n            delete [] m;\n        }\n\n    }\n\n    return(det);\n}\n\n// calculate the cofactor of element (row,col)\nvoid GetMinor(long double **src, long double **dest, int row, int col, int order)\n{\n    // indicate which col and row is being copied to dest\n    int colCount=0,rowCount=0;\n\n    for(int i = 0; i &lt; order; i++ )\n    {\n        if( i != row )\n        {\n            colCount = 0;\n            for(int j = 0; j &lt; order; j++ )\n            {\n                // when j is not the element\n                if( j != col )\n                {\n                    dest[rowCount][colCount] = src[i][j];\n                    colCount++;\n                }\n            }\n            rowCount++;\n        }\n    }\n}\n\n// Calculate the determinant recursively.\nlong double CalcDeterminant(long double **mat, int order)\n{\n    // order must be &gt;= 0\n    // stop the recursion when matrix is a single element\n    if( order == 1 )\n        return mat[0][0];\n\n    // the determinant value\n    long double det = 0;\n\n    // allocate the cofactor matrix\n    long double **minor;\n    minor = new long double*[order-1];\n    for(int i=0;i&lt;order-1;i++)\n        minor[i] = new long double[order-1];\n\n    for(int i = 0; i &lt; order; i++)\n    {\n        // get minor of element (0,i)\n        GetMinor(mat, minor, 0, i, order);\n        // the recusion is here!\n\n        det += (i%2==1?-1.0:1.0) * mat[0][i] * CalcDeterminant(minor,order-1);\n        //det += pow( -1.0, i ) * mat[0][i] * CalcDeterminant( minor,order-1 );\n    }\n\n    // release memory\n    for(int i=0;i&lt;order-1;i++)\n        delete [] minor[i];\n    delete [] minor;\n\n    return det;\n}\n\n\n// matrix inversioon\n\nvoid MatrixInversion(long double **InputM, int order, long double **InvM)\n{\n    // get the determinant of a\n    long double det = 1.0/CalcDeterminant(InputM, order);\n\n    // memory allocation\n    long double *temp = new long double[(order-1)*(order-1)];\n    long double **minor = new long double*[order-1];\n    for(int i=0;i&lt;order-1;i++)\n        minor[i] = temp+(i*(order-1));\n\n    for(int j=0;j&lt;order;j++)\n    {\n        for(int i=0;i&lt;order;i++)\n        {\n            // get the co-factor (matrix) of A(j,i)\n            GetMinor(InputM,minor,j,i,order);\n            InvM[i][j] = det*CalcDeterminant(minor,order-1);\n            if((i+j)%2 == 1)\n                InvM[i][j] = -InvM[i][j];\n        }\n    }\n\n    // release memory\n    //delete [] minor[0];\n    delete [] temp;\n    for(int i=0; i&lt;order-1; i++)\n        delete [] minor[i];\n    delete [] minor;\n}\n</code></pre>\n"}, {"tags": ["c++", "switch-statement", "recipe"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1524075575, "post_id": 49906466, "comment_id": 86828736, "body": "You need to revisit how case statements work: <a href=\"http://en.cppreference.com/w/cpp/language/switch\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/switch</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1524075794, "post_id": 49906466, "comment_id": 86828856, "body": "A <code>case</code> must be a compile-time constant value. It can&#39;t be a condition. This should really be an <code>if {} else if {} else {}</code>."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1524075999, "post_id": 49906466, "comment_id": 86828995, "body": "Please get yourself <a href=\"https://stackoverflow.com/q/388242/10077\">a good C++ book</a>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1524076150, "post_id": 49906466, "comment_id": 86829088, "body": "&quot;D:\\c++ dev-c\\Makefile.win   recipe for target &#39;abc.o&#39; failed&quot; simply means that because of the previously listed errors in your code the program could not be built."}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1524076073, "post_id": 49906574, "comment_id": 86829047, "body": "The inconsistent indentation and seemingly random addition of white space (include in a string literal) bother me more than I would have expected."}], "tags": [], "owner": {"reputation": 43, "user_id": 8169678, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VaAlTb5NyQE/AAAAAAAAAAI/AAAAAAAACI0/wpN98zI9WvI/photo.jpg?sz=128", "display_name": "akash singh", "link": "https://stackoverflow.com/users/8169678/akash-singh"}, "is_accepted": true, "score": 0, "last_activity_date": 1524079867, "last_edit_date": 1524079867, "creation_date": 1524075866, "answer_id": 49906574, "question_id": 49906466, "link": "https://stackoverflow.com/questions/49906466/switch-statement-not-working-c-and-d-c-dev-c-makefile-win-recipe-for-target/49906574#49906574", "title": "Switch statement not working c++ and D:\\c++ dev-c\\Makefile.win recipe for target &#39;abc.o&#39; failed", "body": "<p>I prefer you to use if else instead of switch because you cann't do comparisons in cases in switch</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\nusing namespace std;\n\nclass abcformule{\npublic:\n    int discriminant(double a, double b, double c) {\n        return pow(b, 2) - 4 * a *c;\n    }\n\n    void answer(double a2, double b2, double c2) {\n        int D = discriminant(a2, b2, c2);\n\n            if(D&lt;0){\n                cout &lt;&lt; \"Discriminant is lower than 0, no solutions for x.\";\n                cout &lt;&lt; endl;\n            } else if(D&gt;0){\n                cout &lt;&lt; \"Discriminant is bigger than 0, two solutions for x:     \";\n                cout &lt;&lt; endl; \n                cout &lt;&lt; \"x = \" &lt;&lt; (-b2 + sqrt(D)) / (2 * a2) &lt;&lt;\n                        \" or \" &lt;&lt; (-b2 - sqrt(D)) / (2 * a2) &lt;&lt; \n                        \".\" &lt;&lt; endl;\n            } else{\n                cout &lt;&lt; \"Discriminant is 0, only one solution for x: \" &lt;&lt;          endl;\n                cout &lt;&lt; (-b2) / (2 * a2) &lt;&lt; endl;\n            }   \n    }\n};\n\nint main(int argc, char** argv) {\n    abcformule abc;\n    abc.answer(5, -2, -7);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9664991, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jP8r_FxEaSk/AAAAAAAAAAI/AAAAAAAAAcM/U12Cnj6H5Jo/photo.jpg?sz=128", "display_name": "Lucas Knook", "link": "https://stackoverflow.com/users/9664991/lucas-knook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 49906574, "answer_count": 1, "score": -5, "last_activity_date": 1524079867, "creation_date": 1524075452, "question_id": 49906466, "link": "https://stackoverflow.com/questions/49906466/switch-statement-not-working-c-and-d-c-dev-c-makefile-win-recipe-for-target", "title": "Switch statement not working c++ and D:\\c++ dev-c\\Makefile.win recipe for target &#39;abc.o&#39; failed", "body": "<p>So, I continued working on my abc formula in c++, and yet again, some errors pop up :D</p>\n\n<p>this is what I have now:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\nusing namespace std;\n\nclass abcformule{\n    public:\n        int discriminant(double a, double b, double c) {\n            return pow(b, 2) - 4 * a *c;\n        }\n\n        void answer(double a2, double b2, double c2) {\n            int D = discriminant(a2, b2, c2);\n            switch(D) {\n                case &lt; 0:\n                    cout &lt;&lt; \"Discriminant is lower than 0, no solutions for x.\";\n                    cout &lt;&lt; endl;\n                    break;\n                case &gt; 0:\n                    cout &lt;&lt; \"Discriminant is bigger than 0, two solutions for x: \";\n                    cout &lt;&lt; endl; \n                    cout &lt;&lt; \"x = \" &lt;&lt; (-b2 + sqrt(D)) / (2 * a2) &lt;&lt;\n                            \" or \" &lt;&lt; (-b2 - sqrt(D)) / (2 * a2) &lt;&lt; \n                            \".\" &lt;&lt; endl;\n                    break;\n                case = 0:\n                    cout &lt;&lt; \"Discriminant is 0, only one solution for x: \" &lt;&lt; endl;\n                    cout &lt;&lt; (-b2) / (2 * a2) &lt;&lt; endl;\n            }\n        }\n};\n\nint main(int argc, char** argv) {\n    abcformule abc;\n    abc.answer(5, -2, -7);\n    return 0;\n}\n</code></pre>\n\n<p>And these are the errors:</p>\n\n<pre><code>D:\\c++ dev-c\\abc.cpp    In member function 'void abcformule::answer(double, double, double)':\n14  10  D:\\c++ dev-c\\abc.cpp    [Error] 'D' cannot appear in a constant-expression\n18  10  D:\\c++ dev-c\\abc.cpp    [Error] expected primary-expression before '&gt;' token\n25  10  D:\\c++ dev-c\\abc.cpp    [Error] expected primary-expression before '=' token\n25  12  D:\\c++ dev-c\\abc.cpp    [Error] an assignment cannot appear in a constant-expression\n</code></pre>\n\n<p>How do I fix this?\nOh, and I saw this thing pop up in the error log too:</p>\n\n<pre><code>28      D:\\c++ dev-c\\Makefile.win   recipe for target 'abc.o' failed\n</code></pre>\n"}, {"tags": ["c++", "sfml"], "answers": [{"tags": [], "owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "is_accepted": true, "score": 1, "last_activity_date": 1524075405, "creation_date": 1524075405, "answer_id": 49906455, "question_id": 49906248, "link": "https://stackoverflow.com/questions/49906248/sfml-custom-class-not-closing/49906455#49906455", "title": "SFML Custom Class Not Closing", "body": "<p>Your flag <code>game.isOpen</code> stays true, so the while loop continues to excute, but your <code>RenderWindow</code> is closed.</p>\n\n<p>Update the <code>Game::close</code> method like this :</p>\n\n<pre><code>void Game::close() {\n    window-&gt;close();\n    isOpen = false;\n}\n</code></pre>\n"}], "owner": {"reputation": 1380, "user_id": 1811541, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/1QGHJ.png?s=128&g=1", "display_name": "MBJH", "link": "https://stackoverflow.com/users/1811541/mbjh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "accepted_answer_id": 49906455, "answer_count": 1, "score": 1, "last_activity_date": 1524075405, "creation_date": 1524074657, "question_id": 49906248, "link": "https://stackoverflow.com/questions/49906248/sfml-custom-class-not-closing", "title": "SFML Custom Class Not Closing", "body": "<p>I have a custom class called \"Game\"</p>\n\n<pre><code>#include \"Game.h\"\n#include &lt;SFML/Audio.hpp&gt;\n#include &lt;SFML/Graphics.hpp&gt;\n#include &lt;SFML/Graphics/Text.hpp&gt;\nusing namespace sf;\n\nGame::Game(float length, float height, std::string title) {\n    this-&gt;length = length;\n    this-&gt;height = height;\n    this-&gt;window = new RenderWindow(VideoMode(this-&gt;length, this-&gt;height), title);\n    this-&gt;isOpen = true;\n    display();\n}\n\nbool Game::pollEvent() {\n    return window-&gt;pollEvent(e);\n}\n\nvoid Game::close() {\n    window-&gt;close();\n}\n\nvoid Game::display() {\n    window-&gt;display();\n}\n\nvoid Game::clear() {\n    window-&gt;clear(Color::White);\n}\n\nvoid Game::paint(Drawable component) {\n    window-&gt;draw(component);\n}\n\nvoid Game::sleep(long millis) {\n    sf::sleep(milliseconds(millis));\n}\n\n\nGame::~Game() {\n}\n</code></pre>\n\n<p>And a main class that executes the program</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include \"Game.h\"\n\nusing namespace sf;\n\nint main(int argc, char** argv) {\n    Game game(1000, 1000, \"My Class Works!\");\n    while (game.isOpen) {\n        while (game.pollEvent()) {\n            if (game.e.type == Event::Closed) {\n                game.close();\n            }\n        }\n        game.clear();\n        game.sleep(1000/60);\n        game.display();\n    }\n}\n</code></pre>\n\n<p>The window displays on the screen, however, when I try to close the window, it freezes and does not close. I am new to SFML so I would like to know if I am doing this the correct way, and my class is how it is supposed to be. Everything else seems to work apart from that. Why is it not closing? Thanks.</p>\n"}, {"tags": ["c++", "count", "sum", "average"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1524075630, "post_id": 49905610, "comment_id": 86828764, "body": "plain english: Learn  To  Use  Your  Debugger"}, {"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1524075990, "post_id": 49905610, "comment_id": 86828989, "body": "Have you verified that the desired sum and average are actually correct? Why are you starting with <code>count = -1</code> instead of <code>0</code>?"}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 0, "creation_date": 1524076009, "post_id": 49905610, "comment_id": 86829001, "body": "Use the debugger, Luke."}, {"owner": {"reputation": 11, "user_id": 9665686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/858bcb5cde17cc96f6abdca1ba160b2b?s=128&d=identicon&r=PG&f=1", "display_name": "kveliz", "link": "https://stackoverflow.com/users/9665686/kveliz"}, "reply_to_user": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1524076326, "post_id": 49905610, "comment_id": 86829184, "body": "@nico I know the file has 200 lines of numbers. int count = 0, I always came up with 201."}, {"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1524076718, "post_id": 49905610, "comment_id": 86829410, "body": "Then this is definitely a possible error source. <code>-1</code> does not make sense. Maybe, the stream is reading something at the end or beginning of the file that is not supposed to be read. Or one line contains two numbers separated by some other character."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1524079360, "post_id": 49905610, "comment_id": 86830812, "body": "<code>while (!inputFile.eof())</code> does not do what you think it does . <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\" title=\"why is iostreameof inside a loop condition considered wrong\">stackoverflow.com/questions/5605125/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 9665686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/858bcb5cde17cc96f6abdca1ba160b2b?s=128&d=identicon&r=PG&f=1", "display_name": "kveliz", "link": "https://stackoverflow.com/users/9665686/kveliz"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1524081405, "post_id": 49905610, "comment_id": 86831908, "body": "@pm100 Thank you! Using while (inputFile &gt;&gt; num) instead worked."}], "owner": {"reputation": 11, "user_id": 9665686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/858bcb5cde17cc96f6abdca1ba160b2b?s=128&d=identicon&r=PG&f=1", "display_name": "kveliz", "link": "https://stackoverflow.com/users/9665686/kveliz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 634, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572224372, "creation_date": 1524072304, "last_edit_date": 1524075807, "question_id": 49905610, "link": "https://stackoverflow.com/questions/49905610/c-calculations-not-adding-up-to-random-txt-file", "title": "c++ calculations not adding up to Random.txt file", "body": "<p>my calculations are off in c++ program. The homework assignment is:</p>\n\n<blockquote>\n  <p>\"Write a program that reads all the number in the \"Random.txt\" file\n  and calculates the following:</p>\n  \n  <p>a. The number of numbers is the file (the final count) b. The sum of\n  all the numbers in the file (total) c. The average of all the numbers\n  in the file (total/count)</p>\n  \n  <p>Your program should then display the number of numbers found in the\n  file, the sum of the numbers, and the average of the numbers.\"</p>\n</blockquote>\n\n<p>Correct sum is 105,527, I get 106,042\nCorrect average is 528 (if rounded), I get 530</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nint main() \n{\n\nifstream inputFile;\n\ninputFile.open(\"/Users/KJVeliz/Desktop/Random.txt\");\ndouble num, totalCount, avg;\ntotalCount = 0;\n\nint count = -1;\nwhile (!inputFile.eof())\n\n    {\n        inputFile &gt;&gt; num;\n        count++;\n\n        totalCount += num; \n        avg = totalCount / count;\n\n     }\n\ncout &lt;&lt; \"The number of numbers in the file is: \" &lt;&lt; count &lt;&lt; endl;\n\ncout &lt;&lt;\"The sum of the numbers is: \" &lt;&lt; totalCount &lt;&lt; endl;\n\ncout &lt;&lt; \"The average of the numbers is: \" &lt;&lt; avg &lt;&lt; endl;\n\nreturn 0;\n\n}\n</code></pre>\n\n<p>Any help you can offer as to why my calculations are not matching up is much appreciated. I am new to the programming world, so if your answers could be in as much plain English as possible, that would help.</p>\n"}, {"tags": ["android", "c++", "opencv"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1524072517, "post_id": 49905345, "comment_id": 86827159, "body": "Have you set which STL to use in the project? see: <a href=\"https://developer.android.com/ndk/guides/cpp-support.html\" rel=\"nofollow noreferrer\">developer.android.com/ndk/guides/cpp-support.html</a>  As Android NDK supports more than one STL, it defaults to none."}, {"owner": {"reputation": 2092, "user_id": 4792660, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/59ace870f4a27de7c1cb1ecb3436d195?s=128&d=identicon&r=PG&f=1", "display_name": "user8469759", "link": "https://stackoverflow.com/users/4792660/user8469759"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1524072691, "post_id": 49905345, "comment_id": 86827254, "body": "How do I set that?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1524073032, "post_id": 49905345, "comment_id": 86827417, "body": "Read the link it tells you."}, {"owner": {"reputation": 2092, "user_id": 4792660, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/59ace870f4a27de7c1cb1ecb3436d195?s=128&d=identicon&r=PG&f=1", "display_name": "user8469759", "link": "https://stackoverflow.com/users/4792660/user8469759"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1524073953, "post_id": 49905345, "comment_id": 86827916, "body": "I read the link, but still not sure I&#39;ve understood. Should I change some CMake file somehow?"}, {"owner": {"reputation": 2092, "user_id": 4792660, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/59ace870f4a27de7c1cb1ecb3436d195?s=128&d=identicon&r=PG&f=1", "display_name": "user8469759", "link": "https://stackoverflow.com/users/4792660/user8469759"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1524075231, "post_id": 49905345, "comment_id": 86828580, "body": "See my update, is that what you meant?"}], "owner": {"reputation": 2092, "user_id": 4792660, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/59ace870f4a27de7c1cb1ecb3436d195?s=128&d=identicon&r=PG&f=1", "display_name": "user8469759", "link": "https://stackoverflow.com/users/4792660/user8469759"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 295, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524078561, "creation_date": 1524071298, "last_edit_date": 1524078561, "question_id": 49905345, "link": "https://stackoverflow.com/questions/49905345/not-including-stl-libraries-in-c-project-during-building-in-cross-platform-pro", "title": "Not including stl libraries in C++ project during building in cross platform project Visual Studio 2015", "body": "<p>I'm trying to build a shared library. However I don't have a single clue of why I'm getting the following error:</p>\n\n<pre><code>2&gt;  ANT_HOME=D:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Apps\\apache-ant-1.9.3\\\n2&gt;  JAVA_HOME=\n2&gt;  NDK_ROOT=C:\\ProgramData\\Microsoft\\AndroidNDK64\\android-ndk-r13b\n2&gt;  ProjectDLL.cpp\n2&gt;  In file included from ..\\ProjectDLL\\ProjectDLL.cpp:1:\n2&gt;  In file included from ..\\ProjectDLL/ProjectDLL.h:4:\n2&gt;  In file included from C:\\Users\\User\\ProjectMaterialCapture\\ProjectVSSolution\\Project\\../ProjectSourceCode/headers\\Project.hh:10:\n2&gt;  In file included from C:\\Users\\User\\ProjectMaterialCapture\\ProjectVSSolution\\Project\\../ProjectSourceCode/headers\\capture.hh:11:\n2&gt;  In file included from C:\\Users\\User\\ProjectMaterialCapture\\ProjectVSSolution\\Project\\../ProjectSourceCode/headers\\myCommons.hh:11:\n2&gt;  In file included from C:\\Users\\User\\ProjectMaterialCapture\\ProjectVSSolution\\Project\\../../dependencies/opencv-sdk-3.4.1/sdk/native/jni/include\\opencv2/core/core.hpp:48:\n2&gt;  In file included from C:\\Users\\User\\ProjectMaterialCapture\\ProjectVSSolution\\Project\\../../dependencies/opencv-sdk-3.4.1/sdk/native/jni/include\\opencv2/core.hpp:52:\n2&gt;  In file included from C:\\Users\\User\\ProjectMaterialCapture\\ProjectVSSolution\\Project\\../../dependencies/opencv-sdk-3.4.1/sdk/native/jni/include\\opencv2/core/cvdef.h:91:\n2&gt;C:\\Users\\User\\ProjectMaterialCapture\\ProjectVSSolution\\Project\\../../dependencies/opencv-sdk-3.4.1/sdk/native/jni/include\\opencv2/core/hal/interface.h(15,10): fatal error : 'cstddef' file not found\n2&gt;  #include &lt;cstddef&gt;\n2&gt;           ^\n2&gt;  1 error generated.\n========== Rebuild All: 1 succeeded, 1 failed, 0 skipped ==========\n</code></pre>\n\n<p>I've tried to check If that header is actually in my ndk folder, and it is there. Can you give me any clue on why I'm getting such error?</p>\n\n<p>Thx</p>\n\n<p><strong>Update</strong>: Am I supposed to do:</p>\n\n<blockquote>\n  <p>LLVM's libc++ is the C++ standard library that has been used by the\n  Android OS since Lollipop, and in the future will be the only STL\n  available in the NDK.</p>\n  \n  <p>Until NDK r16, the NDK's libc++ is only of beta quality. Beginning\n  with NDK r16, libc++ will be the preferred STL. A future NDK release\n  will remove the other options.</p>\n  \n  <p>The shared library for this runtime is libc++_shared.so, and the\n  static library is libc++_static.a.</p>\n  \n  <p>libc++ is dual-licensed under both the University of Illinois\n  \"BSD-Like\" license and the MIT license. For more information, see the\n  license file.</p>\n</blockquote>\n\n<p>? But isn't this handled by the following</p>\n\n<p><a href=\"https://i.stack.imgur.com/lCWFy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lCWFy.png\" alt=\"enter image description here\"></a></p>\n\n<p>?</p>\n\n<p><strong>Update</strong>: </p>\n\n<p>Apparently the problem is more related to the combination \"Android\"+\"ARM\". I've just created a shared library from scratch, if I set the target to be <code>Debug/Release ARM</code> I get all this error:</p>\n\n<pre><code>1&gt;C:\\ProgramData\\Microsoft\\AndroidNDK64\\android-ndk-r13b\\toolchains\\arm-linux-androideabi-4.9\\prebuilt\\windows-x86_64/lib/gcc/arm-linux-androideabi/4.9.x/../../../../arm-linux-androideabi/bin\\ld : error : cannot find -lgnustl_static\n</code></pre>\n\n<p>Still I don't know why. </p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 351, "user_id": 8816219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6e1d4b609105b1db1a567d6b676ca3f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok Bhaskar", "link": "https://stackoverflow.com/users/8816219/ashok-bhaskar"}, "edited": false, "score": 1, "creation_date": 1524070777, "post_id": 49905094, "comment_id": 86826203, "body": "How many cores do you have available?"}, {"owner": {"reputation": 1, "user_id": 8182072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aec99d786533e73381bae036e462714?s=128&d=identicon&r=PG&f=1", "display_name": "JDoe", "link": "https://stackoverflow.com/users/8182072/jdoe"}, "reply_to_user": {"reputation": 351, "user_id": 8816219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6e1d4b609105b1db1a567d6b676ca3f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok Bhaskar", "link": "https://stackoverflow.com/users/8816219/ashok-bhaskar"}, "edited": false, "score": 0, "creation_date": 1524070996, "post_id": 49905094, "comment_id": 86826319, "body": "@AshokBhaskar - This test PC only has 2 cores and 4 threads (Intel&#174; Core\u2122 i5-6300U Processor), my main pc has 4 cores. I was considering running this on AWS to be faster, so I suppose it will have more cores than this laptop."}, {"owner": {"reputation": 17175, "user_id": 1756636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92f14a1f21e57ba761c7163b2d00a78a?s=128&d=identicon&r=PG&f=1", "display_name": "SomeWittyUsername", "link": "https://stackoverflow.com/users/1756636/somewittyusername"}, "edited": false, "score": 0, "creation_date": 1524071015, "post_id": 49905094, "comment_id": 86826327, "body": "<code>int i(0)</code> - seriously?"}, {"owner": {"reputation": 1, "user_id": 8182072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aec99d786533e73381bae036e462714?s=128&d=identicon&r=PG&f=1", "display_name": "JDoe", "link": "https://stackoverflow.com/users/8182072/jdoe"}, "reply_to_user": {"reputation": 17175, "user_id": 1756636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92f14a1f21e57ba761c7163b2d00a78a?s=128&d=identicon&r=PG&f=1", "display_name": "SomeWittyUsername", "link": "https://stackoverflow.com/users/1756636/somewittyusername"}, "edited": false, "score": 0, "creation_date": 1524071260, "post_id": 49905094, "comment_id": 86826461, "body": "@SomeWittyUsername - I am no coder by training, so... do you mind explaining whats wrong? Anyway not exactly focusing on the question."}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1524071309, "post_id": 49905094, "comment_id": 86826490, "body": "Unless you are actually assigning the tasks to different cores, you are just running more code on the same code, which will not be faster.. it will be slower."}, {"owner": {"reputation": 17175, "user_id": 1756636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92f14a1f21e57ba761c7163b2d00a78a?s=128&d=identicon&r=PG&f=1", "display_name": "SomeWittyUsername", "link": "https://stackoverflow.com/users/1756636/somewittyusername"}, "edited": false, "score": 0, "creation_date": 1524071375, "post_id": 49905094, "comment_id": 86826527, "body": "@JDoe That&#39;s just a pretty awkward syntax.."}, {"owner": {"reputation": 1, "user_id": 8182072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aec99d786533e73381bae036e462714?s=128&d=identicon&r=PG&f=1", "display_name": "JDoe", "link": "https://stackoverflow.com/users/8182072/jdoe"}, "reply_to_user": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1524071398, "post_id": 49905094, "comment_id": 86826543, "body": "@DavidHoelzer - Is there a programatic mode to find how many available cores there are?"}, {"owner": {"reputation": 1, "user_id": 8182072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aec99d786533e73381bae036e462714?s=128&d=identicon&r=PG&f=1", "display_name": "JDoe", "link": "https://stackoverflow.com/users/8182072/jdoe"}, "edited": false, "score": 0, "creation_date": 1524071494, "post_id": 49905094, "comment_id": 86826596, "body": "@DavidHowlzer - Just found it! <a href=\"https://stackoverflow.com/questions/150355/programmatically-find-the-number-of-cores-on-a-machine\" title=\"programmatically find the number of cores on a machine\">stackoverflow.com/questions/150355/&hellip;</a>  still you see nothing wrong with the code? E.g. threads trying to run on the same variable. Again, I am quite newbie on these subjects.."}, {"owner": {"reputation": 351, "user_id": 8816219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6e1d4b609105b1db1a567d6b676ca3f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok Bhaskar", "link": "https://stackoverflow.com/users/8816219/ashok-bhaskar"}, "edited": false, "score": 0, "creation_date": 1524071549, "post_id": 49905094, "comment_id": 86826621, "body": "@JDoe How much slower is the multithreaded version? I&#39;m not sure if your specific implementation is buggy, but parallel code can be slower than single-threaded code if the overhead of parallel code is too large, e.g. data copying time or threads competing for the memory bus."}, {"owner": {"reputation": 351, "user_id": 8816219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6e1d4b609105b1db1a567d6b676ca3f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok Bhaskar", "link": "https://stackoverflow.com/users/8816219/ashok-bhaskar"}, "reply_to_user": {"reputation": 17175, "user_id": 1756636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92f14a1f21e57ba761c7163b2d00a78a?s=128&d=identicon&r=PG&f=1", "display_name": "SomeWittyUsername", "link": "https://stackoverflow.com/users/1756636/somewittyusername"}, "edited": false, "score": 1, "creation_date": 1524072125, "post_id": 49905094, "comment_id": 86826931, "body": "@SomeWittyUsername int i(0) is fine, but I think uniform initialization syntax (i.e. with braces, int i{0}) is the way to go; take a look at <a href=\"https://softwareengineering.stackexchange.com/questions/133688/is-c11-uniform-initialization-a-replacement-for-the-old-style-syntax?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\" title=\"is c11 uniform initialization a replacement for the old style syntax\">softwareengineering.stackexchange.com/questions/133688/&hellip;</a>"}, {"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1524072130, "post_id": 49905094, "comment_id": 86826934, "body": "Are you sure the code is actually running in parallel? <code>std::async</code> defaults to a launch policy that doesn&#39;t enforce using threads, and may only be doing lazy evaluation of the function. You can use the <code>std::async(std::launch::async, ...)</code> overload to ensure multiple threads are used."}, {"owner": {"reputation": 866, "user_id": 7607594, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OyzH_J0Nigs/AAAAAAAAAAI/AAAAAAAAAFg/tWm2BVaSBwY/photo.jpg?sz=128", "display_name": "Jorge Omar Medra", "link": "https://stackoverflow.com/users/7607594/jorge-omar-medra"}, "edited": false, "score": 0, "creation_date": 1524072411, "post_id": 49905094, "comment_id": 86827092, "body": "Single thread is faster than multi thread because each thread has its own context and OS switch from one context to another and this means that OS must store the status of each context every time that a thread is waiting and recover when it is reactivated. Also consider the size of your data and the algorithm that you are using, maybe Multithreading could be faster than single thread when it has an huge amount of data, check this link about Asymptotic Complexity: <a href=\"https://www.cs.cornell.edu/courses/cs3110/2013sp/supplemental/lectures/lec19-asymp/review.html\" rel=\"nofollow noreferrer\">cs.cornell.edu/courses/cs3110/2013sp/supplemental/lectures/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 8182072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aec99d786533e73381bae036e462714?s=128&d=identicon&r=PG&f=1", "display_name": "JDoe", "link": "https://stackoverflow.com/users/8182072/jdoe"}, "reply_to_user": {"reputation": 351, "user_id": 8816219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6e1d4b609105b1db1a567d6b676ca3f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok Bhaskar", "link": "https://stackoverflow.com/users/8816219/ashok-bhaskar"}, "edited": false, "score": 0, "creation_date": 1524073104, "post_id": 49905094, "comment_id": 86827459, "body": "@AshokBhaskar - In microseconds, single-thread takes 2 on average, multi-thread takes 500-ish."}, {"owner": {"reputation": 1, "user_id": 8182072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aec99d786533e73381bae036e462714?s=128&d=identicon&r=PG&f=1", "display_name": "JDoe", "link": "https://stackoverflow.com/users/8182072/jdoe"}, "edited": false, "score": 0, "creation_date": 1524073124, "post_id": 49905094, "comment_id": 86827471, "body": "@bnacker - enforced your version thank you! Still, same result."}, {"owner": {"reputation": 351, "user_id": 8816219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6e1d4b609105b1db1a567d6b676ca3f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok Bhaskar", "link": "https://stackoverflow.com/users/8816219/ashok-bhaskar"}, "edited": false, "score": 0, "creation_date": 1524074839, "post_id": 49905094, "comment_id": 86828377, "body": "2 microseconds vs 500 microseconds sounds like the cost of parallel overhead to me - can you generate a larger test case and see how the two algorithms compare?"}], "answers": [{"tags": [], "owner": {"reputation": 351, "user_id": 8816219, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6e1d4b609105b1db1a567d6b676ca3f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok Bhaskar", "link": "https://stackoverflow.com/users/8816219/ashok-bhaskar"}, "is_accepted": false, "score": 1, "last_activity_date": 1524081230, "creation_date": 1524081230, "answer_id": 49907970, "question_id": 49905094, "link": "https://stackoverflow.com/questions/49905094/concurrent-threads-slower-than-single-thread/49907970#49907970", "title": "Concurrent Threads Slower than Single Thread", "body": "<p>Parallel programs are not necessarily faster than serial programs; there are both fixed and variable time costs to setting up parallel algorithms, and for small and/or simple problems, this parallel overhead cost can be greater than the cost of the serial algorithm as a whole. Examples of parallel overhead include thread spawning and synchronization, extra memory copying, and memory bus pressure. At around 2 mircoseconds for your serial program and around 500 microseconds for your parallel program, it's likely your matrix is small enough that the work of setting up the parallel algorithm overshadows the work of solving the matrix problem.</p>\n"}], "owner": {"reputation": 1, "user_id": 8182072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aec99d786533e73381bae036e462714?s=128&d=identicon&r=PG&f=1", "display_name": "JDoe", "link": "https://stackoverflow.com/users/8182072/jdoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524081230, "creation_date": 1524070463, "last_edit_date": 1524070857, "question_id": 49905094, "link": "https://stackoverflow.com/questions/49905094/concurrent-threads-slower-than-single-thread", "title": "Concurrent Threads Slower than Single Thread", "body": "<p>I've been comparing two ways of finding the highest value from a matrix (should they be duplicated, randomly choose between them), single threaded vs multi-threaded. Typically, the multi-thread should be faster, assuming I coded this properly. Because it is not, it is by far slower, I can only assume I did something wrong. Can someone pinpoint what I did wrong?</p>\n\n<p>Note: I know I shouldn't use rand(), but for this purpose I feel there aren't that many problems with doing so, I'll replace it with a mt19937_64 after this is working properly.</p>\n\n<p>Thanks in advance!</p>\n\n<pre><code>double* RLPolicy::GetActionWithMaxQ(std::tuple&lt;int, double*, int*, int*, int, double*&gt;* state, long* selectedActionIndex, bool&amp; isActionQZero)\n{\n    const bool useMultithreading = true;\n\n    double* qIterator = Utilities::DiscretizeStateActionPairToStart(_world-&gt;GetCurrentStatePointer(), (long*)&amp;(std::get&lt;0&gt;(*state)));\n\n    // Represents the action-pointer for which Q-values are duplicated\n    // Note: A shared_ptr is used instead of a unique_ptr since C++11 wont support unique_ptrs for pointers to pointers **\n    static std::shared_ptr&lt;double*&gt; duplicatedQValues(new double*[*_world-&gt;GetActionsNumber()], std::default_delete&lt;double*&gt;());\n    /*[](double** obj) {\n    delete[] obj;\n    });*/\n\n    static double* const defaultAction = _actionsListing.get();// [0];\n    double* actionOut = defaultAction; //default action\n    static double** const duplicatedQsDefault = duplicatedQValues.get();\n\n    if (!useMultithreading)\n    {    \n        const double* const qSectionEnd = qIterator + *_world-&gt;GetActionsNumber() - 1;\n\n        double* largestValue = qIterator;\n        int currentActionIterator = 0;\n\n        long duplicatedIndex = -1;\n\n        do {\n            if (*qIterator &gt; *largestValue)\n            {\n                largestValue = qIterator;\n                actionOut = defaultAction + currentActionIterator;\n                *selectedActionIndex = currentActionIterator;\n                duplicatedIndex = -1;\n            }\n            // duplicated value, map it\n            else if (*qIterator == *largestValue)\n            {\n                ++duplicatedIndex;\n                *(duplicatedQsDefault + duplicatedIndex) = defaultAction + currentActionIterator;\n            }\n            ++currentActionIterator;\n            ++qIterator;\n        } while (qIterator != qSectionEnd);\n\n        // If duped (equal) values are found, select among them randomly with equal probability\n        if (duplicatedIndex &gt;= 0)\n        {\n            *selectedActionIndex = (std::rand() % duplicatedIndex);\n            actionOut = *(duplicatedQsDefault + *selectedActionIndex);\n        }\n\n        isActionQZero = *largestValue == 0;\n\n        return actionOut;\n\n    }\n    else\n    {\n        static const long numberOfSections = 6;\n        unsigned int actionsPerSection = *_world-&gt;GetActionsNumber() / numberOfSections;\n        unsigned long currentSectionStart = 0;\n\n        static double* actionsListing = _actionsListing.get();\n\n        long currentFoundResult = FindActionWithMaxQInMatrixSection(qIterator, 0, actionsPerSection, duplicatedQsDefault, actionsListing);\n\n        static std::vector&lt;std::future&lt;long&gt;&gt; maxActions;\n        for (int i(0); i &lt; numberOfSections - 1; ++i)\n        {\n            currentSectionStart += actionsPerSection;\n            maxActions.push_back(std::async(&amp;RLPolicy::FindActionWithMaxQInMatrixSection, std::ref(qIterator), currentSectionStart, std::ref(actionsPerSection), std::ref(duplicatedQsDefault), actionsListing));\n        }\n\n        long foundActionIndex;\n\n        actionOut = actionsListing + currentFoundResult;\n\n        for (auto &amp;f : maxActions)\n        {\n            f.wait();\n\n            foundActionIndex = f.get();\n\n            if (actionOut == nullptr)\n                actionOut = defaultAction;\n            else if (*(actionsListing + foundActionIndex) &gt; *actionOut)\n                actionOut = actionsListing + foundActionIndex;\n        }\n\n        maxActions.clear();\n\n        return actionOut;\n    }\n}\n\n/*\n    Deploy a thread to find the action with the highest Q-value for the provided Q-Matrix section.\n\n    @return - The index of the action (on _actionListing) which contains the highest Q-value.\n*/\nlong RLPolicy::FindActionWithMaxQInMatrixSection(double* qMatrix, long sectionStart, long sectionLength, double** dupListing, double* actionListing)\n{\n    double* const matrixSectionStart = qMatrix + sectionStart;\n    double* const matrixSectionEnd = matrixSectionStart + sectionLength;\n    double** duplicatedSectionStart = dupListing + sectionLength;\n\n    static double* const defaultAction = actionListing;\n    long maxValue = sectionLength;\n    long maxActionIndex = 0;\n    double* qIterator = matrixSectionStart;\n    double* largestValue = matrixSectionStart;\n\n    long currentActionIterator = 0;\n\n    long duplicatedIndex = -1;\n\n    do {\n        if (*qIterator &gt; *largestValue)\n        {\n            largestValue = qIterator;\n            maxActionIndex = currentActionIterator;\n            duplicatedIndex = -1;\n        }\n        // duplicated value, map it\n        else if (*qIterator == *largestValue)\n        {\n            ++duplicatedIndex;\n            *(duplicatedSectionStart + duplicatedIndex) = defaultAction + currentActionIterator;\n        }\n        ++currentActionIterator;\n        ++qIterator;\n    } while (qIterator != matrixSectionEnd);\n\n    // If duped (equal) values are found, select among them randomly with equal probability\n    if (duplicatedIndex &gt;= 0)\n    {\n        maxActionIndex = (std::rand() % duplicatedIndex);\n    }\n\n    return maxActionIndex;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 40268, "user_id": 1298400, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ee2c2af01b6b83f8010ccde5032947b0?s=128&d=identicon&r=PG", "display_name": "Jeffery Thomas", "link": "https://stackoverflow.com/users/1298400/jeffery-thomas"}, "edited": false, "score": 0, "creation_date": 1524076705, "post_id": 49905034, "comment_id": 86829406, "body": "You + operator returns a reference to a local variable. <a href=\"https://stackoverflow.com/questions/4643713/c-returning-reference-to-local-variable\" title=\"c returning reference to local variable\">stackoverflow.com/questions/4643713/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 841, "user_id": 4410241, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/97aa5d63c4461ea7b79c29514064f084?s=128&d=identicon&r=PG", "display_name": "aln447", "link": "https://stackoverflow.com/users/4410241/aln447"}, "edited": false, "score": 0, "creation_date": 1524070768, "post_id": 49905106, "comment_id": 86826200, "body": "Worked! Thank you!"}, {"owner": {"reputation": 17175, "user_id": 1756636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92f14a1f21e57ba761c7163b2d00a78a?s=128&d=identicon&r=PG&f=1", "display_name": "SomeWittyUsername", "link": "https://stackoverflow.com/users/1756636/somewittyusername"}, "edited": false, "score": 0, "creation_date": 1524070878, "post_id": 49905106, "comment_id": 86826258, "body": "This is a whole lotta unnecessary overhead. The temporary here is not needed. Just add to the original matrix and return the reference to <i>this</i> at the end"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 17175, "user_id": 1756636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92f14a1f21e57ba761c7163b2d00a78a?s=128&d=identicon&r=PG&f=1", "display_name": "SomeWittyUsername", "link": "https://stackoverflow.com/users/1756636/somewittyusername"}, "edited": false, "score": 0, "creation_date": 1524071028, "post_id": 49905106, "comment_id": 86826333, "body": "@SomeWittyUsername, it is idiomatic to return an object by value from the binary <code>+</code> operator function. Think of <code>int a = 10 + 20;</code> if the <code>operator+</code> function returns a reference, you can&#39;t use that."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 17175, "user_id": 1756636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92f14a1f21e57ba761c7163b2d00a78a?s=128&d=identicon&r=PG&f=1", "display_name": "SomeWittyUsername", "link": "https://stackoverflow.com/users/1756636/somewittyusername"}, "edited": false, "score": 0, "creation_date": 1524071049, "post_id": 49905106, "comment_id": 86826344, "body": "@SomeWittyUsername -- maybe, but that&#39;s a different operation than the original. The original doesn&#39;t modify the object that <code>+</code> is called on; your version does. In fact, your version would typically be named <code>operator+=</code>, and would be used to implement <code>operator+(const Macierz&amp;, const Macierz&amp;)</code>."}, {"owner": {"reputation": 17175, "user_id": 1756636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92f14a1f21e57ba761c7163b2d00a78a?s=128&d=identicon&r=PG&f=1", "display_name": "SomeWittyUsername", "link": "https://stackoverflow.com/users/1756636/somewittyusername"}, "edited": false, "score": 0, "creation_date": 1524071166, "post_id": 49905106, "comment_id": 86826410, "body": "@RSahu Yes, I meant what Pete Becker wrote below."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 5, "last_activity_date": 1524071801, "last_edit_date": 1524071801, "creation_date": 1524070494, "answer_id": 49905106, "question_id": 49905034, "link": "https://stackoverflow.com/questions/49905034/operator-overload-returns-array-of-zeroes/49905106#49905106", "title": "Operator &quot;+&quot; overload returns array of zeroes", "body": "<blockquote>\n  <p>The result is an array of zeroes.</p>\n</blockquote>\n\n<p>You are returning a reference to a function local variable. The reference becomes a dangling reference as soon as the function returns. As a consequence, your program has undefined behavior.</p>\n\n<p>Change the function to return by value instead.</p>\n\n<pre><code>// Remove the reference type specifier\n//     |\n//     v \nMacierz operator + (Macierz &amp;f) {\n    Macierz newM;\n    ...\n    return newM;\n}\n</code></pre>\n\n<p>I suggest couple of further refinements to the function.</p>\n\n<ol>\n<li>Change it to a <code>const</code> member function.</li>\n<li>Change the argument type to a <code>const&amp;</code>.</li>\n</ol>\n\n<p>With those changes, you can use the function using <code>const</code> objects too.</p>\n\n<pre><code>Macierz operator + (Macierz const&amp; f) const {\n    Macierz newM;\n    ...\n    return newM;\n}\n</code></pre>\n\n<p>A related post: <a href=\"https://stackoverflow.com/questions/49657351/is-it-okay-to-use-an-overloaded-operator-to-implement-another-operator-overload\">Is it okay to use an overloaded operator to implement another operator overload?</a>.</p>\n"}], "owner": {"reputation": 841, "user_id": 4410241, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/97aa5d63c4461ea7b79c29514064f084?s=128&d=identicon&r=PG", "display_name": "aln447", "link": "https://stackoverflow.com/users/4410241/aln447"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524071801, "creation_date": 1524070232, "question_id": 49905034, "link": "https://stackoverflow.com/questions/49905034/operator-overload-returns-array-of-zeroes", "title": "Operator &quot;+&quot; overload returns array of zeroes", "body": "<p>I have a simple operator + overload method for a class Macierz which is supposed to get the 2d matrix variable from the object, and sum all of this matrix variable with the same field of another Macierz object.</p>\n\n<pre><code>Macierz &amp; operator + (Macierz &amp;f) {\n    Macierz newM;\n\n    for (int i = 0; i &lt; length; i++)\n        for (int j = 0; j &lt; length; j++) \n            newM.macierz[i][j] = macierz[i][j] + f.macierz[i][j];\n\n\n    return newM;\n}\n</code></pre>\n\n<p>The calculating works fine. Displaying the <code>newM</code> variable produces a correct value, however when I try to use it like this:</p>\n\n<pre><code>float y[3][3] = { {1.00f, 2.00f, 3.00f}, { 4.00f, 5.00f, 6.00f }, { 7.00f, 8.00f, 9.00f } };\nMacierz m5(y); //fill m5 array with values from above\n    Macierz m2(2.00f); //fill m2 entirely with 2.00f values\n\n    cout &lt;&lt; m2 + m5;\n</code></pre>\n\n<p>The result is an array of zeroes.</p>\n\n<p>How could this happen? The <code>macierz</code> variable is a simple <code>float[3][3]</code> field.</p>\n\n<p>Any help would be amazing</p>\n"}, {"tags": ["c++", "templates", "metaprogramming"], "comments": [{"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1524069930, "post_id": 49904874, "comment_id": 86825740, "body": "Wish I could upvote this question twice. Thanks for the clear explanation, test driver, and for showing your attempts."}], "answers": [{"comments": [{"owner": {"reputation": 241, "user_id": 2966033, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/190eb67f08305dd2d8acd4199f24ae4a?s=128&d=identicon&r=PG&f=1", "display_name": "jezzi23", "link": "https://stackoverflow.com/users/2966033/jezzi23"}, "edited": false, "score": 0, "creation_date": 1524074351, "post_id": 49905025, "comment_id": 86828109, "body": "Thanks a lot! I&#39;m glad my mess didn&#39;t compile because this will be a lot easier to manage. Although I wonder if I was somewhere on the right path to getting it to do the right thing, despite its ugliness..."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1524078000, "post_id": 49905025, "comment_id": 86830108, "body": "<code>T</code> might be not default constructible (and so <code>tuple&lt;T&gt;</code>), so you should replace <code>pick&lt;Ts&gt;::type{}</code> by <code>std::declval&lt;pick&lt;Ts&gt;::type&gt;</code>."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 6, "last_activity_date": 1524070189, "creation_date": 1524070189, "answer_id": 49905025, "question_id": 49904874, "link": "https://stackoverflow.com/questions/49904874/c-variadic-template-type-filtering-transformation/49905025#49905025", "title": "C++ variadic template type filtering transformation", "body": "<p>Firstly, define a <code>pick&lt;T&gt;</code> helper that returns an <em>empty tuple</em> for excluded items, and a <em>tuple containing the item</em> otherwise:</p>\n\n<pre><code>template &lt;typename&gt;\nstruct pick;\n\ntemplate &lt;typename T&gt;\nstruct pick&lt;filter&lt;INCLUDE, T&gt;&gt; { using type = std::tuple&lt;T&gt;; };\n\ntemplate &lt;typename T&gt;\nstruct pick&lt;filter&lt;EXCLUDE, T&gt;&gt; { using type = std::tuple&lt;&gt;; };\n</code></pre>\n\n<p>Then, implement your filtering logic in terms of <code>std::tuple_cat</code>:</p>\n\n<pre><code>template &lt;typename&gt;\nstruct filter_all;\n\ntemplate &lt;typename... Ts&gt;\nstruct filter_all&lt;std::tuple&lt;Ts...&gt;&gt;\n{   \n    using type = decltype(std::tuple_cat(typename pick&lt;Ts&gt;::type{}...));\n};\n</code></pre>\n\n<p>Done! </p>\n\n<p><a href=\"https://wandbox.org/permlink/2mpdcwQUDj2xb6LO\" rel=\"noreferrer\"><strong>live example on wandbox.org</strong></a></p>\n\n<hr>\n\n<p>If you can modify the implementation of <code>filter</code> to expose a <code>constexpr bool</code>, it can be even simpler:</p>\n\n<pre><code>template &lt;int filter_val, class T&gt;\nstruct filter \n{\n    static constexpr bool pick = filter_val == INCLUDE;\n    using type = T;\n};\n\ntemplate &lt;typename T&gt;\nstruct filter_all;\n\ntemplate &lt;typename... Ts&gt;\nstruct filter_all&lt;std::tuple&lt;Ts...&gt;&gt;\n{   \n    using type = decltype(std::tuple_cat(\n        std::conditional_t&lt;Ts::pick, \n            std::tuple&lt;typename Ts::type&gt;, std::tuple&lt;&gt;&gt;{}...\n    ));\n};\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/s2mb2JNqGGpwMdjM\" rel=\"noreferrer\"><strong>live example on wandbox.org</strong></a></p>\n"}], "owner": {"reputation": 241, "user_id": 2966033, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/190eb67f08305dd2d8acd4199f24ae4a?s=128&d=identicon&r=PG&f=1", "display_name": "jezzi23", "link": "https://stackoverflow.com/users/2966033/jezzi23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 398, "favorite_count": 0, "accepted_answer_id": 49905025, "answer_count": 1, "score": 4, "last_activity_date": 1524070189, "creation_date": 1524069576, "question_id": 49904874, "link": "https://stackoverflow.com/questions/49904874/c-variadic-template-type-filtering-transformation", "title": "C++ variadic template type filtering transformation", "body": "<p><strong>Problem.</strong></p>\n\n<p>I am new to template metaprogramming and am unsure of how to implement\na type filtering transformation on a tuple where a type is produced when provided\nwith a filtering description. I believe the following code snippet demonstrates\nthe behaviour I want.</p>\n\n<pre><code>enum : int {\n  INCLUDE,\n  EXCLUDE\n};\n\ntemplate &lt;int filter_val, class T&gt;\nstruct filter {\n};\n\nint\nmain() {\n\n  struct A {};\n  struct B {};\n  struct C {};\n\n  typedef std::tuple&lt;filter&lt;INCLUDE, A&gt;,\n                     filter&lt;EXCLUDE, B&gt;,\n                     filter&lt;INCLUDE, C&gt;&gt; filters;\n\n  typedef filter_all&lt;filters&gt;::type filtered;\n\n  static_assert(std::is_same&lt;filtered,\n                             std::tuple&lt;A, C&gt;\n                            &gt;::value,\n                \":(\");\n\n  return 0;\n}\n</code></pre>\n\n<p><strong>What I've tried</strong></p>\n\n<p>To my knowledge, you cannot unpack more than 1 independent variadic templates so the way I thought about approaching the problem is to maintain two tuples during the recursive template specialization process where one of them represents where we are in the recursion while the other represents the so-far included T's.</p>\n\n<pre><code>template &lt;template &lt;class ...&gt; class, class ...Unfiltered_Ts&gt;\nstruct filter_all {\nprivate: \n  template &lt;class Unfiltered_Ts_Tuple, class Included_Ts_Tuple&gt;\n  struct filter_all_impl;\n\n  // CASE 1: Include T in the result\n  template &lt;\n    template &lt;int, class&gt; class, int filter_val, class T, class ...Unfiltered_Ts_impl, // Unfiltered input\n    template &lt;class ...&gt; class, class ...Included_Ts                                   // Result so far\n  &gt;\n  struct filter_all_impl&lt;std::tuple&lt;filter&lt;INCLUDE, T&gt;,\n                                    Unfiltered_Ts_impl...&gt;,\n                         std::tuple&lt;Included_Ts...&gt;&gt; {\n    typedef typename\n      filter_all_impl&lt;std::tuple&lt;Unfiltered_Ts_impl...&gt;,\n                      std::tuple&lt;Included_Ts..., T&gt; // Append T to result\n                     &gt;::type type;\n  };\n\n  // CASE 2: Don't include T in the result\n  template &lt;\n    template &lt;int, class&gt; class, int filter_val, class T, class ...Unfiltered_Ts_impl, // Unfiltered input\n    template &lt;class ...&gt; class, class ...Included_Ts                                   // Result so far\n  &gt;\n  struct filter_all_impl&lt;std::tuple&lt;filter&lt;EXCLUDE, T&gt;,\n                                    Unfiltered_Ts_impl...&gt;,\n                         std::tuple&lt;Included_Ts...&gt;\n                        &gt; {\n    typedef typename\n      filter_all_impl&lt;std::tuple&lt;Unfiltered_Ts_impl...&gt;,\n                      std::tuple&lt;Included_Ts...&gt; // Don't append T to result\n                     &gt;::type type;\n  };\n\n  // CASE 3: Filtering finished - set the final type as the included T's\n  template &lt;\n    template &lt;int, class&gt; class, int filter_val, class T, class ...Unfiltered_Ts_impl, \n    template &lt;class ...&gt; class, class ...Included_Ts\n  &gt;\n  struct filter_all_impl&lt;&lt;&gt;, // empty\n                         std::tuple&lt;Included_Ts...&gt;\n                        &gt; {\n    // Final step, set type as a tuple of all included Ts\n    typedef std::tuple&lt;Included_Ts...&gt; type;\n  };\npublic:\n  typedef typename filter_all_impl&lt;\n    std::tuple&lt;Unfiltered_Ts...&gt;, // Initially contains all unfiltered Ts\n    std::tuple&lt;&gt;                  // Initially empty filtered Ts which eventually becomes the return type\n  &gt;::type type;\n};\n</code></pre>\n\n<p>I hope there is a simpler way to do this transformation but this is what I have arrived at so far but it's far from compiling and complains about the template specializations not being valid. Any guidance is appreciated.</p>\n"}, {"tags": ["c++", "uwp", "com", "windows-runtime", "wrl"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 3, "creation_date": 1524070042, "post_id": 49904862, "comment_id": 86825800, "body": "UWP is thoroughly COM-powered at its core.  But they dropped all the &quot;bad parts&quot;, no more IDispatch and no more registry.  And lots of spackle on top to hide the COM, implemented by the &quot;language projection&quot;.  WRL and C++/WinRT (it is ready) are the Hard Way to do it, no language projection.  VB.NET, C#, Javascript or C++/CX are much less punishing.  Create a UWP component with the &quot;Windows Runtime Component&quot; project template."}, {"owner": {"reputation": 11321, "user_id": 4184842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9mD03.jpg?s=128&g=1", "display_name": "Peter Torr - MSFT", "link": "https://stackoverflow.com/users/4184842/peter-torr-msft"}, "edited": false, "score": 2, "creation_date": 1524084484, "post_id": 49904862, "comment_id": 86833468, "body": "FYI C++/WinRT is indeed a projection - it&#39;s actually <i>a better projection than C++/CX</i> (at least from the consumption side) since it is 100% pure C++, no language extensions required. More on-topic, let me ask a few folks around here. I believe Desktop Bridge should work for you."}, {"owner": {"reputation": 11321, "user_id": 4184842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9mD03.jpg?s=128&g=1", "display_name": "Peter Torr - MSFT", "link": "https://stackoverflow.com/users/4184842/peter-torr-msft"}, "edited": false, "score": 1, "creation_date": 1524088464, "post_id": 49904862, "comment_id": 86835103, "body": "Can you please clarify your question with a few things? (1) Do you want your app / COM object to be &quot;pure&quot; UWP (runs on all devices) or are you OK with fullTrust UWP (aka Desktop Bridge) that is Desktop-only? And (2) are the COM objects only for use with the app that ships them, or are they supposed to be used by other apps?"}, {"owner": {"reputation": 351, "user_id": 3538373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o5NLP.jpg?s=128&g=1", "display_name": "Jason Chueh", "link": "https://stackoverflow.com/users/3538373/jason-chueh"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1524101569, "post_id": 49904862, "comment_id": 86838619, "body": "@HansPassant I have tried &quot;Windows Runtime Component&quot; project. It only works with UWP apps. I wnat the component can still be used by our old products which only support IDispatch based COM. Is there a way to make UWP component work as the old COM? We cannot afford to pack all old sotfware with DesktopBridge so that they can use UWP components."}, {"owner": {"reputation": 351, "user_id": 3538373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o5NLP.jpg?s=128&g=1", "display_name": "Jason Chueh", "link": "https://stackoverflow.com/users/3538373/jason-chueh"}, "reply_to_user": {"reputation": 11321, "user_id": 4184842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9mD03.jpg?s=128&g=1", "display_name": "Peter Torr - MSFT", "link": "https://stackoverflow.com/users/4184842/peter-torr-msft"}, "edited": false, "score": 0, "creation_date": 1524102026, "post_id": 49904862, "comment_id": 86838719, "body": "@PeterTorr-MSFT Thank you for answering my question :). I have edited my question."}, {"owner": {"reputation": 4894, "user_id": 3956290, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/ZsQ0z.png?s=128&g=1", "display_name": "Mehrzad Chehraz", "link": "https://stackoverflow.com/users/3956290/mehrzad-chehraz"}, "edited": false, "score": 0, "creation_date": 1524145635, "post_id": 49904862, "comment_id": 86861057, "body": "JFYI: You cannot use &quot;the great UI framework of UWP&quot; on a Desktop Bridge app. It needs to be a pure UWP to use the UI Framework."}], "owner": {"reputation": 351, "user_id": 3538373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o5NLP.jpg?s=128&g=1", "display_name": "Jason Chueh", "link": "https://stackoverflow.com/users/3538373/jason-chueh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 692, "favorite_count": 3, "answer_count": 0, "score": 7, "last_activity_date": 1577619927, "creation_date": 1524069525, "last_edit_date": 1577619927, "question_id": 49904862, "link": "https://stackoverflow.com/questions/49904862/using-atl-com-objects-in-uwp-apps", "title": "Using ATL/COM objects in UWP apps", "body": "<p>My company has many old projects that are written in vb6. We have some reusable software components which are written in ATL/C++. We're now considering to rewrite our app with UWP but it seems that UWP apps do not support the old COM technology. I am researching if there is a way to implement a COM object which also supports UWP. I understand that porting our old components to UWP Components would definitely work. But we do not want to maintain two version of common components because we have shipped many old software and we still provide software support. Some of those software have been used by our customers for more than 10 years. It is impossible to upgrade all software we have shipped.</p>\n\n<p>I have come up with few possible solutions:</p>\n\n<p><strong>Desktop Bridge</strong></p>\n\n<p>I have found a phrase called \"Packaged COM\" which can be used by UWP apps with Desktop Bridge. This article, <a href=\"https://blogs.windows.com/buildingapps/2017/04/13/com-server-ole-document-support-desktop-bridge/#O5M5b284bJgvB99K.97\" rel=\"nofollow noreferrer\">COM Server and OLE Document support for the Desktop Bridge</a>, gives an example of calling an exe COM server from an UWP app. It seems to be a good solution if it also supprts InProcessServer. I did found something suspicious, <a href=\"https://docs.microsoft.com/en-us/uwp/schemas/appxpackage/appxmanifestschema/element-inprocessserver\" rel=\"nofollow noreferrer\">InProcessServer</a>, but it turns out that it is for WinRT components.</p>\n\n<p>I have also tried to add the COM reference to the UWP project. The code can successfully refer to the COM object. However, it doesn't work at runtime. The UWP app has its own registry hive, therefor is won't load the COM object which is registered to the system registry. I'm thinking that if I add the registration information to the private hive of the UWP app and pack the COM dll along with the app, this may work. Just couldn't find any example. </p>\n\n<p><strong>ATL/COM</strong> </p>\n\n<p>Since we have implemented our business logic into COM objects. The most viable solution would be upgrading our COM object to support UWP applications. WinRT components still use COM technology but implement the new interface <code>IInspectable</code>, I assume that the old ATL based COM object can be modified to support the calling convention of UWP if it implements <code>IInspectable</code> interface. I just don't have any clue to do this.</p>\n\n<p><strong>WRL</strong> </p>\n\n<p>I found an MSDN article, <a href=\"https://docs.microsoft.com/en-us/cpp/windows/how-to-create-a-classic-com-component-using-wrl\" rel=\"nofollow noreferrer\">How to: Create a Classic COM Component Using WRL</a>, talking about using WRL project template to implement classes COM object which can be used in Win32 application as well as UWP apps.</p>\n\n<p>It says:</p>\n\n<blockquote>\n  <p>You can use the Windows Runtime C++ Template Library (WRL) to create basic classic COM components for use in desktop apps, in addition to using it for Universal Windows Platform (UWP) apps</p>\n</blockquote>\n\n<p>But I soon realise that WRL project template is no longer supported by Microsoft. All the download links of the project template I found on the web are no longer available.</p>\n\n<p><strong>C++/WinRT</strong></p>\n\n<p>This technology seems to be the successor of WRL. It seems promising but unfortunately have not yet been released. </p>\n\n<hr/>\n\n<p>To clarify few things from <a href=\"https://stackoverflow.com/users/4184842/peter-torr-msft\">@Peter Torr</a>:</p>\n\n<blockquote>\n  <p>(1) Do you want your app / COM object to be \"pure\" UWP (runs on all\n  devices) or are you OK with fullTrust UWP (aka Desktop Bridge) that is\n  Desktop-only? And (2) are the COM objects only for use with the app\n  that ships them, or are they supposed to be used by other apps?</p>\n</blockquote>\n\n<ol>\n<li><p>My company uses Windows platform to provide PC-based industrial automation services(both hardware and software). So the answer is yes, we are happy with fullTrust UWP. Our products will only run on desktop. We just want to embrace the new technology and leverage the great UI framework of UWP.</p></li>\n<li><p>COM objects are for both new apps(UWP) and old software(some are vb6 based). We are happy with packaging COM objects with UWP apps and using system registered COM for old software as long as those COM objects are the same(built from the same code base).</p></li>\n</ol>\n"}, {"tags": ["c++", "templates", "c++17", "template-meta-programming", "sfinae"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1524069725, "post_id": 49904809, "comment_id": 86825621, "body": "Why should <code>is_pointer_like_arrow_dereferencable_v&lt;int*&gt;</code> be true?  What does it means to use <code>-&gt;</code> on an <code>int*</code>?"}, {"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1524069927, "post_id": 49904809, "comment_id": 86825737, "body": "<code>int*</code> is indeed a bad example for that but you can dereference any pointer type with <code>-&gt;</code>. I.e. <code>auto x = new std::vector&lt;int&gt;; x-&gt;push_back(10);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1524070175, "post_id": 49904914, "comment_id": 86825867, "body": "I get the point. And changing the implementation accordingly fixes the problem. But why is <code>operator-&gt;()</code> not defined for pointer types when they actually can be accessed via <code>-&gt;</code>?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1524071355, "post_id": 49904914, "comment_id": 86826515, "body": "because <code>operator-&gt;()</code> is a function; <code>decltype(std::declval&lt;T&gt;().operator-&gt;())</code> give you the type returned by a <b>function</b> <code>operator-&gt;()</code> in <code>T</code>. With a pointer to a generic <code>struct</code> (by example) you can use the arrow operator but (generally speaking) isn&#39;t defined a function <code>operator-&gt;()</code>"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1524072797, "post_id": 49904914, "comment_id": 86827302, "body": "@Timo - answer improved with an alternative way to write <code>is_pointer_like_arrow_dereferencable</code>; hope this helps"}, {"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1524076207, "post_id": 49904914, "comment_id": 86829117, "body": "That is actually a neat solution. But I think you changed the semantics of  <code>is_pointer_like</code>. In my case it&#39;s defined as <code>is_pointer_like = is_pointer_like_dereferencable &amp;&amp; is_pointer_like_arrow_dereferencable</code>. Also I don&#39;t understand the 2nd overload. Why <code>std::declval&lt;T&gt;()-&gt;operator-&gt;()</code>? Shouldn&#39;t this be <code>std::declval&lt;T&gt;().operator-&gt;()</code>?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1524077196, "post_id": 49904914, "comment_id": 86829694, "body": "@Timo - sorry but I don&#39;t see, in your code example, <code>is_pointer_like_dereferencable</code>; I&#39;ve tried to rewrite your example; obviously you can modify it to obtain a different semantic. Regarding the second overload... you&#39;re rigth: is <code>std::declval&lt;T&gt;().operator-&gt;()</code>; sorry; answer corrected."}, {"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1524077458, "post_id": 49904914, "comment_id": 86829837, "body": "I&#39;ve written the relations of the different structs at the top of my question, but it&#39;s alright. I understand what you mean. Thanks for your help."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1524078100, "post_id": 49904914, "comment_id": 86830149, "body": "@Timo - Yes, but the example is a little different and this confused me; anyway, following the example of <code>is_pointer_like()</code>, should be simple to write a couple of set of declared template functions: one for <code>is_pointer_like_dereferencable</code> and one for <code>is_pointer_like_arrow_dereferencable</code>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1524078714, "post_id": 49904914, "comment_id": 86830438, "body": "using <code>overload_tag&lt;N&gt;</code> is more readable than remember priority order versus <code>int</code>, <code>long</code>, <code>unsigned long</code>."}, {"owner": {"reputation": 3284, "user_id": 1487069, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/jsf93.png?s=128&g=1", "display_name": "Carlo Wood", "link": "https://stackoverflow.com/users/1487069/carlo-wood"}, "edited": false, "score": 0, "creation_date": 1572890236, "post_id": 49904914, "comment_id": 103693815, "body": "This answer doesn&#39;t work correctly. First of all, Test return the wrong types (you can&#39;t convert Test to int). After fixing that (thats just the test code) when you comment out <code>operator-&gt;</code> in Test it still prints 1 for is_pointer_like_arrow_dereferencable_v&lt;Test&lt;int&gt;&gt;."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 3284, "user_id": 1487069, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/jsf93.png?s=128&g=1", "display_name": "Carlo Wood", "link": "https://stackoverflow.com/users/1487069/carlo-wood"}, "edited": false, "score": 0, "creation_date": 1572965323, "post_id": 49904914, "comment_id": 103720861, "body": "@CarloWood - It&#39;s passed more that a year from this question so I don&#39;t remember well... anyway, it seems to me that you&#39;re right regarding the <code>Test</code> wrong return type (I&#39;m surprised that the compiler doesn&#39;t warn about it) but, as you can see, I&#39;ve simply copied the <code>Test</code> class from the question. But, given that you comment <code>operator-&gt;()</code>, why <code>is_pointer_like_arrow_dereferencable_v&lt;Test&lt;int&gt;&gt;</code> shoudn&#39;t be <code>1</code>: the <code>operator* ()</code> is still present."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 2, "last_activity_date": 1524077150, "last_edit_date": 1524077150, "creation_date": 1524069717, "answer_id": 49904914, "question_id": 49904809, "link": "https://stackoverflow.com/questions/49904809/template-function-for-detecting-pointer-like-dereferencable-types-fails-for-ac/49904914#49904914", "title": "Template function for detecting pointer like (dereferencable) types fails for actual pointer types", "body": "<blockquote>\n  <p>But when I test the mechanism with the code below, pointer types (like int* are not detected correctly). Why is that?</p>\n</blockquote>\n\n<p>S.F.I.N.A.E.: Substitution Failure Is Not An Error</p>\n\n<p>So, for <code>int*</code>, from <code>decltype(std::declval&lt;T&gt;().operator-&gt;()</code> you get a substitution failure and the specialization isn't considered. So is used the general form, so <code>std::false</code></p>\n\n<p>You should write <strong>two</strong> specializations: one or pointers and one for <code>operator-&gt;()</code> enabled classes.</p>\n\n<p>Bonus answer: instead of type traits as <code>is_pointer_like_arrow_dereferencable</code> (overcomplicated, IMHO), I propose you to pass through a set of helper functions (only declared)</p>\n\n<pre><code>template &lt;typename&gt;\nstd::false_type is_pointer_like (unsigned long);\n\ntemplate &lt;typename T&gt;\nauto is_pointer_like (int)\n   -&gt; decltype( * std::declval&lt;T&gt;(), std::true_type{} );\n\ntemplate &lt;typename T&gt;\nauto is_pointer_like (long)\n   -&gt; decltype( std::declval&lt;T&gt;().operator-&gt;(), std::true_type{} );\n</code></pre>\n\n<p>so <code>is_pointer_like_arrow_dereferencable</code> can be simply written as a <code>using</code></p>\n\n<pre><code>template &lt;typename T&gt;\nusing is_pointer_like_arrow_dereferencable = decltype(is_pointer_like&lt;T&gt;(0));\n</code></pre>\n\n<p>with helper <code>is_pointer_like_arrow_dereferencable_v</code></p>\n\n<pre><code>template &lt;typename T&gt;\nstatic auto const is_pointer_like_arrow_dereferencable_v\n   = is_pointer_like_arrow_dereferencable&lt;T&gt;::value;\n</code></pre>\n\n<p>The following is a full working example</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;vector&gt;\n\ntemplate &lt;typename&gt;\nstd::false_type is_pointer_like (unsigned long);\n\ntemplate &lt;typename T&gt;\nauto is_pointer_like (int)\n   -&gt; decltype( * std::declval&lt;T&gt;(), std::true_type{} );\n\ntemplate &lt;typename T&gt;\nauto is_pointer_like (long)\n   -&gt; decltype( std::declval&lt;T&gt;().operator-&gt;(), std::true_type{} );\n\ntemplate &lt;typename T&gt;\nusing is_pointer_like_arrow_dereferencable = decltype(is_pointer_like&lt;T&gt;(0));\n\ntemplate &lt;typename T&gt;\nstatic auto const is_pointer_like_arrow_dereferencable_v\n   = is_pointer_like_arrow_dereferencable&lt;T&gt;::value;\n\n\ntemplate &lt;typename T&gt;\nstruct Test\n {\n   T &amp; operator*  () { return *this; }\n   T * operator-&gt; () { return  this; }\n }; \n\nint main()\n {\n   std::cout &lt;&lt; is_pointer_like_arrow_dereferencable_v&lt;int&gt;\n      &lt;&lt; std::endl, // false\n   std::cout &lt;&lt; is_pointer_like_arrow_dereferencable_v&lt;int*&gt;\n      &lt;&lt; std::endl, // true\n   std::cout &lt;&lt; is_pointer_like_arrow_dereferencable_v&lt;std::vector&lt;int&gt;&gt;\n      &lt;&lt; std::endl, // false\n   std::cout &lt;&lt; is_pointer_like_arrow_dereferencable_v&lt;std::vector&lt;int&gt;*&gt;\n      &lt;&lt; std::endl, // true\n   std::cout &lt;&lt; is_pointer_like_arrow_dereferencable_v&lt;Test&lt;int&gt;&gt;\n      &lt;&lt; std::endl, // true\n   std::cout &lt;&lt; is_pointer_like_arrow_dereferencable_v&lt;Test&lt;int&gt;*&gt;\n      &lt;&lt; std::endl, // true\n   std::cout &lt;&lt; is_pointer_like_arrow_dereferencable_v&lt;std::shared_ptr&lt;int&gt;&gt;\n      &lt;&lt; std::endl, // true\n   std::cout &lt;&lt; is_pointer_like_arrow_dereferencable_v&lt;std::shared_ptr&lt;int&gt;*&gt;\n      &lt;&lt; std::endl, // true\n   std::cout &lt;&lt; is_pointer_like_arrow_dereferencable_v&lt;int***&gt;\n      &lt;&lt; std::endl; // true\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1524076791, "post_id": 49905438, "comment_id": 86829464, "body": "I did the <code>P&lt;T, R...&gt;</code> specialization only to check for the return type, haven&#39;t thought about the case you pointed out with the iterator. So I guess I can remove the whole specialization."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 1, "last_activity_date": 1524072030, "last_edit_date": 1524072030, "creation_date": 1524071651, "answer_id": 49905438, "question_id": 49904809, "link": "https://stackoverflow.com/questions/49904809/template-function-for-detecting-pointer-like-dereferencable-types-fails-for-ac/49905438#49905438", "title": "Template function for detecting pointer like (dereferencable) types fails for actual pointer types", "body": "<p>First off, this specialization is at best pointless, but actually wrong:</p>\n\n<pre><code>template &lt;template &lt;typename...&gt; typename P, typename T, typename... R&gt;\nstruct is_pointer_like_arrow_dereferencable&lt;P&lt;T, R...&gt;,\n    std::enable_if_t&lt;\n        std::is_same_v&lt;\n            decltype(std::declval&lt;P&lt;T, R...&gt;&gt;().operator-&gt;()), \n            std::add_pointer_t&lt;T&gt;&gt;&gt;\n    &gt; : std::true_type\n{ };\n</code></pre>\n\n<p>There isn't anything special about class template specializations with all type parameters when it comes to being pointer-like. So you shouldn't need to treat <code>P&lt;T, R...&gt;</code> any differently than just <code>T</code>. </p>\n\n<p>Now, this specialization also has problems:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct is_pointer_like_arrow_dereferencable&lt;T,\n    std::enable_if_t&lt;\n        std::is_pointer_v&lt;T&gt; ||\n        std::is_same_v&lt;decltype(std::declval&lt;T&gt;().operator-&gt;()), std::add_pointer_t&lt;T&gt;&gt;&gt;\n    &gt; : std::true_type\n{\n};\n</code></pre>\n\n<p>First, raw pointers don't have <code>.operator-&gt;()</code>. That makes the whole boolean expression ill-formed, which causes the entire specialization to get thrown out. Short circuiting happens on an expression by expression basis, but each expression still has to be valid.</p>\n\n<p>Second, <code>-&gt;</code> doesn't have to return <code>add_pointer_t&lt;T&gt;</code>. <code>std::vector&lt;X&gt;::iterator::operator-&gt;</code> returns an <code>X*</code>, not an <code>iterator*</code>. So that's just checking the wrong thing. </p>\n\n<p>We can let the base case check for pointers, and just let the specialization check for <code>.operator-&gt;</code> across all types (whether they're class template specializations or not):</p>\n\n<pre><code>template &lt;typename T, typename = void&gt;\nstruct is_pointer_like_arrow_dereferencable\n    : std::is_pointer&lt;T&gt;\n{ };\n\ntemplate &lt;typename T&gt;\nstruct is_pointer_like_arrow_dereferencable&lt;T, \n    void_t&lt;decltype(std::declval&lt;T&gt;().operator-&gt;())&gt;\n    &gt;\n: std::true_type\n{ };\n</code></pre>\n\n<p>That said, <code>is_pointer</code> probably isn't sufficient since it doesn't make sense for <code>int*</code> to be \"arrow dereferenceable\". So you probably want to do something like:</p>\n\n<pre><code>template &lt;typename T, typename = void&gt;\nstruct is_pointer_like_arrow_dereferencable\n    : std::false_type\n{ };\n\ntemplate &lt;typename T&gt;\nstruct is_pointer_like_arrow_dereferencable&lt;T*, void&gt;\n    : std::disjunction&lt;std::is_class&lt;T&gt;, std::is_union&lt;T&gt;&gt;\n{ };\n</code></pre>\n\n<p>Or some such.</p>\n"}, {"comments": [{"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1524081290, "post_id": 49907712, "comment_id": 86831843, "body": "Unfortunately I&#39;m on Windows and it looks like msvc doesn&#39;t support <code>experimental&#47;type_traits</code> right now. Btw. your definition of <code>arrow_type</code>  queries <code>operator()</code> insted of <code>operator-&gt;()</code>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 1, "creation_date": 1524081402, "post_id": 49907712, "comment_id": 86831907, "body": "@Timo: link provides possible implementation. Typo fixed Btw."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 3, "last_activity_date": 1524081332, "last_edit_date": 1524081332, "creation_date": 1524080138, "answer_id": 49907712, "question_id": 49904809, "link": "https://stackoverflow.com/questions/49904809/template-function-for-detecting-pointer-like-dereferencable-types-fails-for-ac/49907712#49907712", "title": "Template function for detecting pointer like (dereferencable) types fails for actual pointer types", "body": "<p>I suggest to use <a href=\"http://en.cppreference.com/w/cpp/experimental/is_detected\" rel=\"nofollow noreferrer\"><code>std::experimental::is_detected</code></a> and then simply have:</p>\n\n<pre><code>template &lt;typename T&gt; dereferencable_type = decltype(*declval&lt;T&gt;());\ntemplate &lt;typename T&gt; arrow_type = decltype(declval&lt;T&gt;().operator-&gt;());\n\ntemplate &lt;typename T&gt; is_dereferencable =\n    std::experimental::is_detected&lt;dereferencable_type, T&gt;;\ntemplate &lt;typename T&gt; has_arrow = std::experimental::is_detected&lt;arrow_type, T&gt;;\n</code></pre>\n\n<p>and then compose those traits:</p>\n\n<pre><code>template &lt;typename T&gt;\nusing is_pointer_like_dereferencable = is_dereferencable&lt;T&gt;;\n\ntemplate &lt;typename T&gt;\nis_pointer_like_arrow_dereferencable = std::disjunction&lt;std::is_pointer&lt;T&gt;, has_arrow&lt;T&gt;&gt;;\n\ntemplate &lt;typename T&gt;\nstd::is_pointer_like = std::conjunction&lt;is_pointer_like_dereferencable&lt;T&gt;,\n                                        is_pointer_like_arrow_dereferencable&lt;T&gt;&gt;;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3284, "user_id": 1487069, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/jsf93.png?s=128&g=1", "display_name": "Carlo Wood", "link": "https://stackoverflow.com/users/1487069/carlo-wood"}, "is_accepted": false, "score": 0, "last_activity_date": 1572894334, "creation_date": 1572894334, "answer_id": 58699602, "question_id": 49904809, "link": "https://stackoverflow.com/questions/49904809/template-function-for-detecting-pointer-like-dereferencable-types-fails-for-ac/58699602#58699602", "title": "Template function for detecting pointer like (dereferencable) types fails for actual pointer types", "body": "<p>Based on Jarod42's answer (which doesn't compile for me), I created the following code snippet (C++17),</p>\n\n<pre><code>#include \"sys.h\"    // Required for libcwd (debug output).\n#include \"debug.h\"  // Required for libcwd (debug output).\n#include &lt;vector&gt;\n#include &lt;memory&gt;\n#include &lt;iostream&gt;\n\n//-----------------------------------------------------------------------------\n// Start of implementation.\n\n#include &lt;experimental/type_traits&gt;\n#include &lt;type_traits&gt;\n\ntemplate&lt;typename T&gt; using dereferencable_type =\n    decltype(*std::declval&lt;T&gt;());\ntemplate&lt;typename T&gt; using arrow_type =\n    decltype(std::declval&lt;T&gt;().operator-&gt;());\n\ntemplate&lt;typename T&gt; using is_dereferencable =\n    std::experimental::is_detected&lt;dereferencable_type, T&gt;;\n\ntemplate&lt;typename T&gt; using has_arrow =\n    std::experimental::is_detected&lt;arrow_type, T&gt;;\n\ntemplate&lt;typename T&gt; using is_pointer_like_dereferencable =\n    is_dereferencable&lt;T&gt;;\n\ntemplate&lt;typename T&gt; using is_pointer_like_arrow_dereferencable =\n    std::disjunction&lt;std::is_pointer&lt;T&gt;, has_arrow&lt;T&gt;&gt;;\n\ntemplate &lt;typename T&gt; using is_pointer_like =\n    std::conjunction&lt;is_pointer_like_dereferencable&lt;T&gt;,\n                     is_pointer_like_arrow_dereferencable&lt;T&gt;&gt;;\n\ntemplate&lt;typename T&gt; inline constexpr bool is_pointer_like_dereferencable_v =\n    is_pointer_like_dereferencable&lt;T&gt;::value;\ntemplate&lt;typename T&gt; inline constexpr bool is_pointer_like_arrow_dereferencable_v =\n    is_pointer_like_arrow_dereferencable&lt;T&gt;::value;\ntemplate&lt;typename T&gt; inline constexpr bool is_pointer_like_v =\n    is_pointer_like&lt;T&gt;::value;\n\n// End of implementation\n//-----------------------------------------------------------------------------\n\ntemplate&lt;typename T&gt;\nstruct TestNone\n{\n  static int const n;\n};\n\ntemplate&lt;typename T&gt;\nstruct TestRef : public TestNone&lt;T&gt;\n{\n  T const&amp; operator*() { return TestNone&lt;T&gt;::n; }\n};\n\ntemplate&lt;typename T&gt;\nstruct TestArrow : public TestNone&lt;T&gt;\n{\n  TestArrow const* operator-&gt;() { return this; }\n};\n\ntemplate&lt;typename T&gt;\nstruct TestBoth : virtual public TestRef&lt;T&gt;, virtual public TestArrow&lt;T&gt;\n{\n};\n\n//static\ntemplate&lt;typename T&gt;\nint const TestNone&lt;T&gt;::n = 42;\n\ntemplate&lt;typename T&gt;\nvoid test()\n{\n  Dout(dc::notice|continued_cf, '\"' &lt;&lt;\n      libcwd::type_info_of&lt;T&gt;().demangled_name() &lt;&lt; \"\\\" is \");\n  bool something = true;\n  if (is_pointer_like_v&lt;T&gt;)\n    Dout(dc::continued, \"pointer-like.\");\n  else\n  {\n    if (is_pointer_like_arrow_dereferencable_v&lt;T&gt;)\n      Dout(dc::continued, \"arrow dereferencable; \");\n    else\n      something = is_pointer_like_dereferencable_v&lt;T&gt;;\n    if (is_pointer_like_dereferencable_v&lt;T&gt;)\n      Dout(dc::continued, \"dereferencable; \");\n  }\n  if (!something)\n    Dout(dc::continued, \"not a pointer or pointer-like.\");\n  Dout(dc::finish, \"\");\n}\n\nint main()\n{\n  Debug(NAMESPACE_DEBUG::init());\n\n  test&lt;int&gt;();\n  test&lt;int*&gt;();\n  test&lt;std::vector&lt;int&gt;&gt;();\n  test&lt;std::vector&lt;int&gt;*&gt;();\n  test&lt;std::shared_ptr&lt;int&gt;&gt;();\n  test&lt;std::shared_ptr&lt;int&gt;*&gt;();\n  test&lt;std::shared_ptr&lt;int***&gt;&gt;();\n  test&lt;TestNone&lt;int&gt;&gt;();\n  test&lt;TestNone&lt;int&gt;*&gt;();\n  test&lt;TestRef&lt;int&gt;&gt;();\n  test&lt;TestRef&lt;int&gt;*&gt;();\n  test&lt;TestArrow&lt;int&gt;&gt;();\n  test&lt;TestArrow&lt;int&gt;*&gt;();\n  test&lt;TestBoth&lt;int&gt;&gt;();\n  test&lt;TestBoth&lt;int&gt;*&gt;();\n}\n</code></pre>\n\n<p>where <code>sys.h</code> and <code>debug.h</code> are 'standard' headers from the git submodule <a href=\"https://github.com/CarloWood/cwds\" rel=\"nofollow noreferrer\">cwds</a>.</p>\n\n<p>This prints the following debug output:</p>\n\n<blockquote>\n  <p>NOTICE  : \"<code>int</code>\" is not a pointer or pointer-like.<br>\n  NOTICE  : \"<code>int*</code>\" is pointer-like.<br>\n  NOTICE  : \"<code>std::vector&lt;int, std::allocator&lt;int&gt; &gt;</code>\" is not a pointer or pointer-like.<br>\n  NOTICE  : \"<code>std::vector&lt;int, std::allocator&lt;int&gt; &gt;*</code>\" is pointer-like.<br>\n  NOTICE  : \"<code>std::shared_ptr&lt;int&gt;</code>\" is pointer-like.<br>\n  NOTICE  : \"<code>std::shared_ptr&lt;int&gt;*</code>\" is pointer-like.<br>\n  NOTICE  : \"<code>std::shared_ptr&lt;int***&gt;</code>\" is pointer-like.<br>\n  NOTICE  : \"<code>TestNone&lt;int&gt;</code>\" is not a pointer or pointer-like.<br>\n  NOTICE  : \"<code>TestNone&lt;int&gt;*</code>\" is pointer-like.<br>\n  NOTICE  : \"<code>TestRef&lt;int&gt;</code>\" is dereferencable;<br>\n  NOTICE  : \"<code>TestRef&lt;int&gt;*</code>\" is pointer-like.<br>\n  NOTICE  : \"<code>TestArrow&lt;int&gt;</code>\" is arrow dereferencable;<br>\n  NOTICE  : \"<code>TestArrow&lt;int&gt;*</code>\" is pointer-like.<br>\n  NOTICE  : \"<code>TestBoth&lt;int&gt;</code>\" is pointer-like.<br>\n  NOTICE  : \"<code>TestBoth&lt;int&gt;*</code>\" is pointer-like.</p>\n</blockquote>\n"}], "owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 519, "favorite_count": 1, "accepted_answer_id": 49904914, "answer_count": 4, "score": 1, "last_activity_date": 1572894334, "creation_date": 1524069369, "last_edit_date": 1524073842, "question_id": 49904809, "link": "https://stackoverflow.com/questions/49904809/template-function-for-detecting-pointer-like-dereferencable-types-fails-for-ac", "title": "Template function for detecting pointer like (dereferencable) types fails for actual pointer types", "body": "<p>I am trying to write a mechanism to detect if a type is a <em>pointer like</em> type. By that I mean it is dereferencable through <code>operator*()</code> and <code>operator-&gt;()</code>.</p>\n\n<p>I have three different structs that are specialized accordingly:</p>\n\n<ol>\n<li><code>is_pointer_like_dereferencable</code> which checks for <code>operator*()</code></li>\n<li><code>is_pointer_like_arrow_dereferencable</code> which checks for <code>operator-&gt;()</code></li>\n<li><code>is_pointer_like</code> which simply combines 1 &amp; 2</li>\n</ol>\n\n<p>I added specializations for non-templated types like <code>int, int*, ...</code> and for templated types like <code>std::vector&lt;...&gt;, std::shared_ptr&lt;...&gt;, ...</code>.</p>\n\n<p>However, it seems that I made a mistake when implementing <code>is_pointer_like_arrow_dereferencable</code>. The relevant code is </p>\n\n<pre><code>template &lt;typename T, typename = void&gt;\nstruct is_pointer_like_arrow_dereferencable : std::false_type \n{\n};\n\ntemplate &lt;typename T&gt;\nstruct is_pointer_like_arrow_dereferencable&lt;T, std::enable_if_t&lt;\n                                                std::is_pointer_v&lt;T&gt; ||\n                                                std::is_same_v&lt;decltype(std::declval&lt;T&gt;().operator-&gt;()), std::add_pointer_t&lt;T&gt;&gt;&gt;\n    &gt; : std::true_type\n{\n};\n\n\ntemplate &lt;template &lt;typename...&gt; typename P, typename T, typename... R&gt;\nstruct is_pointer_like_arrow_dereferencable&lt;P&lt;T, R...&gt;, std::enable_if_t&lt;\n                                                std::is_same_v&lt;decltype(std::declval&lt;P&lt;T, R...&gt;&gt;().operator-&gt;()), std::add_pointer_t&lt;T&gt;&gt;&gt;\n    &gt; : std::true_type\n{\n};\n\ntemplate &lt;typename T&gt;\nconstexpr bool is_pointer_like_arrow_dereferencable_v = is_pointer_like_arrow_dereferencable&lt;T&gt;::value;\n</code></pre>\n\n<p>The 2nd struct should check if a non-templated type is either an actual pointer type or if the type does have an arrow operator that returns a pointer to itself. But when I test the mechanism with the code below, pointer types (like <code>int*</code> are not detected correctly). Why is that?</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct Test\n{\n    T&amp; operator*()\n    {\n        return *this;\n    }\n\n    T* operator-&gt;()\n    {\n        return this;\n    }\n};   \n\nvoid main()\n{\n    bool\n        a = is_pointer_like_arrow_dereferencable_v&lt;int&gt;, // false\n        b = is_pointer_like_arrow_dereferencable_v&lt;int*&gt;, // false, should be true\n        c = is_pointer_like_arrow_dereferencable_v&lt;vector&lt;int&gt;&gt;, // false\n        d = is_pointer_like_arrow_dereferencable_v&lt;vector&lt;int&gt;*&gt;, // false, should be true\n        e = is_pointer_like_arrow_dereferencable_v&lt;Test&lt;int&gt;&gt;, // true\n        f = is_pointer_like_arrow_dereferencable_v&lt;Test&lt;int&gt;*&gt;, // false, should be true\n        g = is_pointer_like_arrow_dereferencable_v&lt;shared_ptr&lt;int&gt;&gt;, // true\n        h = is_pointer_like_arrow_dereferencable_v&lt;shared_ptr&lt;int&gt;*&gt;, // false, should be true\n        i = is_pointer_like_arrow_dereferencable_v&lt;int***&gt;; // false\n}\n</code></pre>\n\n<p>The <code>is_pointer_like_dereferencable</code> struct only differs at the <code>std::is_same_v&lt;...&gt;</code> part and it does detect actual pointer types correctly. </p>\n\n<p>The fact that it fails to detect pointer types (which should be covered by <code>std::is_pointer_v&lt;...&gt;</code>) doesn't make any sense to me. Can someone explain this?</p>\n"}, {"tags": ["c++", "c++11", "templates", "eigen", "eigen3"], "comments": [{"owner": {"reputation": 3953, "user_id": 1866656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ac0ebcab32a8a880576cf42822d707?s=128&d=identicon&r=PG&f=1", "display_name": "Ash", "link": "https://stackoverflow.com/users/1866656/ash"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1524069625, "post_id": 49904772, "comment_id": 86825568, "body": "@user463035818 Thank you very much for you comment. Could you elaborate a little bit? I don&#39;t get the chance to work as often as I&#39;d like with templates, so I&#39;m not very comfortable with them..."}], "answers": [{"comments": [{"owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 2, "creation_date": 1524070401, "post_id": 49904997, "comment_id": 86825996, "body": "To complete, depending on the context, it might be a good idea to make <code>f</code> it a free function to enable partial specialization."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1524080523, "post_id": 49904997, "comment_id": 86831416, "body": "<i>&quot;you cannot define a specialized method of the class without specializing the class.&quot;</i>. You can do it, but you cannot <b>partially</b> specialize a method/function (and OP would require a partial specialization so specialize the class)."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1524080637, "post_id": 49904997, "comment_id": 86831475, "body": "@Jarod42 thanks a lot, I knew that i was missing something, but I wasnt sure what it was.... better now?"}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 5, "last_activity_date": 1524080647, "last_edit_date": 1524080647, "creation_date": 1524070076, "answer_id": 49904997, "question_id": 49904772, "link": "https://stackoverflow.com/questions/49904772/template-parameters-that-depend-on-other-template-parameters/49904997#49904997", "title": "Template parameters that depend on other template parameters?", "body": "<p>This is a simplified version of your code:</p>\n\n<pre><code>template&lt;size_t rows, size_t cols&gt; struct Foo {   double foo(); };\n\ntemplate&lt;size_t rows&gt; double Foo&lt;rows,3&gt;::f() { return 3;}\n</code></pre>\n\n<p>The error you get:</p>\n\n<pre><code>error: invalid use of incomplete type \u2018struct Foo&lt;rows, 3ul&gt;\u2019\ndouble Foo&lt;rows,3&gt;::f() { return 3;}\n</code></pre>\n\n<p>The problem isnt really that one of your template parameters depends on others, but the problem is that you cannot partially specialize a member without partially specializing the class.</p>\n\n<p>This works:</p>\n\n<pre><code>template&lt;size_t rows, size_t cols&gt; struct Foo {   double foo(); };\n\ntemplate&lt;size_t rows&gt; struct Foo&lt;rows,3&gt; { double f() { return 3;}  };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": false, "score": 4, "last_activity_date": 1524081223, "last_edit_date": 1524081223, "creation_date": 1524078622, "answer_id": 49907332, "question_id": 49904772, "link": "https://stackoverflow.com/questions/49904772/template-parameters-that-depend-on-other-template-parameters/49907332#49907332", "title": "Template parameters that depend on other template parameters?", "body": "<p>An alternative to partial class specialization like in <a href=\"https://stackoverflow.com/a/49904997/27678\">user463035818's answer</a> (or trying to fully-specialize the function) is a technique called <em>tagged dispatch</em>.</p>\n\n<p>The way you do it is by creating overloaded helper functions to dispatch to, and allowing normal overloading to take over based on argument parameters.</p>\n\n<p>Below I'll show how to specialize for an <code>Eigen::Array&lt;double, rows, cols&gt;</code>:</p>\n\n<pre><code>template&lt;unsigned int rows, unsigned int cols,typename arrtype&gt;\nclass Variance\n{\npublic:\n    double f(const arrtype&amp; arg)\n    {\n        return f_impl(arg, tag&lt;arrtype&gt;{});\n    }\nprivate:\n    template&lt;class... T&gt;\n    struct tag{};\n\n    template&lt;class... T&gt;\n    double f_impl(const arrtype&amp;, tag&lt;T...&gt;){\n        std::cout &lt;&lt; \"catch-all function\\n\";\n        return 42.0;\n    }\n\n    double f_impl(const arrtype&amp;, tag&lt;Eigen::Array&lt;double, rows, cols&gt;&gt;){\n        std::cout &lt;&lt; \"specialization for Eigen::Array&lt;double, rows, cols&gt;\\n\";\n        return 1337.0;\n    }\n};\n</code></pre>\n\n<p>And now you can call it like so:</p>\n\n<pre><code>Variance&lt;1, 1, int&gt; non_specialized;\nnon_specialized.f(int{}); // prints \"catch-all function\"\n\nVariance&lt;1, 1, Eigen::Array&lt;double, 1, 1&gt;&gt; specialized;\nspecialized.f(Eigen::Array&lt;double, 1, 1&gt;{}); // prints \"specialization for Eigen::Array&lt;double, rows, cols&gt;\"\n</code></pre>\n\n<h2><a href=\"https://wandbox.org/permlink/l8Ltmxayi0BEuVjw\" rel=\"nofollow noreferrer\">Demo</a></h2>\n\n<hr>\n\n<p>Tagged dispatch is very useful when you want to avoid copy-pasting nearly identical functions for both the base template class and your specialized class, or putting everything into some common base and using polymorphism.</p>\n"}], "owner": {"reputation": 3953, "user_id": 1866656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ac0ebcab32a8a880576cf42822d707?s=128&d=identicon&r=PG&f=1", "display_name": "Ash", "link": "https://stackoverflow.com/users/1866656/ash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 1, "accepted_answer_id": 49904997, "answer_count": 2, "score": 4, "last_activity_date": 1524081223, "creation_date": 1524069217, "question_id": 49904772, "link": "https://stackoverflow.com/questions/49904772/template-parameters-that-depend-on-other-template-parameters", "title": "Template parameters that depend on other template parameters?", "body": "<p>I have found a few similar questions (<em>e.g.</em> <a href=\"https://stackoverflow.com/questions/22365492/non-type-template-parameter-whose-type-depends-on-another-parameter\">this</a>), but none of them really answer mine. Consider this code snippet:    </p>\n\n<pre><code>template&lt;unsigned int rows, unsigned int cols,typename arrtype&gt;\nclass Variance\n{\n   double f(const arrtype &amp;);\n};\n\ntemplate&lt;unsigned int rows, unsigned int cols&gt;\ndouble Variance&lt;rows,cols,Eigen::Matrix&lt;double,rows,cols&gt;&gt;\n    ::f(const Eigen::Array&lt;double,rows,cols&gt; &amp; M) \n{\n  //do stuff\n}\n</code></pre>\n\n<p>As you can see in the specialization, the type <code>arrtype</code> will depend on <code>rows</code> and <code>cols</code>. The code above results in a compiler error (g++ 5.4.0):</p>\n\n<pre><code>invalid use of incomplete type \u2018class Variance&lt;rows, cols, Eigen::Matrix&lt;double, rows, cols&gt; &gt;\n</code></pre>\n\n<p>I have tried <code>typename arrtype&lt;rows, cols&gt;</code> in the template declaration, but then it complains that <code>arrtype</code>\u00a0is not a type, which makes sense.</p>\n\n<p>What is the proper way to use templated types that depend on other templated types?</p>\n"}, {"tags": ["c++", "c++14", "copy-constructor", "move-semantics", "move-constructor"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 4614366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5060c14f2600fda002c0b9144c9986d3?s=128&d=identicon&r=PG&f=1", "display_name": "73nismit", "link": "https://stackoverflow.com/users/4614366/73nismit"}, "edited": false, "score": 0, "creation_date": 1524068865, "post_id": 49904414, "comment_id": 86825121, "body": "Hmm I don&#39;t know if i fully understand your awnser, but removing One(num_of_datas) and manually adding the One(num_of_datas) numof_ones number of times in a loop does fix the problem. Is this the fix you meant?"}, {"owner": {"reputation": 10545, "user_id": 238902, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BRFti.png?s=128&g=1", "display_name": "Default", "link": "https://stackoverflow.com/users/238902/default"}, "reply_to_user": {"reputation": 35, "user_id": 4614366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5060c14f2600fda002c0b9144c9986d3?s=128&d=identicon&r=PG&f=1", "display_name": "73nismit", "link": "https://stackoverflow.com/users/4614366/73nismit"}, "edited": false, "score": 2, "creation_date": 1524069192, "post_id": 49904414, "comment_id": 86825317, "body": "@73nismit you&#39;re calling a constructor of vector that copies the argument. from <a href=\"http://en.cppreference.com/w/cpp/container/vector/vector\" rel=\"nofollow noreferrer\">here</a> - <i>2) Constructs the container with count <b>copies</b> of elements with value value.</i>."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 35, "user_id": 4614366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5060c14f2600fda002c0b9144c9986d3?s=128&d=identicon&r=PG&f=1", "display_name": "73nismit", "link": "https://stackoverflow.com/users/4614366/73nismit"}, "edited": false, "score": 1, "creation_date": 1524069263, "post_id": 49904414, "comment_id": 86825372, "body": "@73nismit moving an object is like moving an apple from a box to another box.  The result is that last box looks like the first before the move; but you didn&#39;t need to go to the shops to get more apples.  This works great if you only need 1 apple.  If you need 5 apples in 5 boxes though; you&#39;re going to need to get more; in which case you need to copy the box."}, {"owner": {"reputation": 10545, "user_id": 238902, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BRFti.png?s=128&g=1", "display_name": "Default", "link": "https://stackoverflow.com/users/238902/default"}, "edited": false, "score": 0, "creation_date": 1524069293, "post_id": 49904414, "comment_id": 86825389, "body": "Also, it doesn&#39;t say that the move constructor is deleted, it&#39;s the copyconstructor that is deleted. switch places on &quot;move&quot; and &quot;copy&quot;?"}, {"owner": {"reputation": 35, "user_id": 4614366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5060c14f2600fda002c0b9144c9986d3?s=128&d=identicon&r=PG&f=1", "display_name": "73nismit", "link": "https://stackoverflow.com/users/4614366/73nismit"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1524072021, "post_id": 49904414, "comment_id": 86826874, "body": "@UKmonkey I don&#39;t want to copy or move to begin with, i want to initialize the size of the 2d array"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 35, "user_id": 4614366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5060c14f2600fda002c0b9144c9986d3?s=128&d=identicon&r=PG&f=1", "display_name": "73nismit", "link": "https://stackoverflow.com/users/4614366/73nismit"}, "edited": false, "score": 0, "creation_date": 1524124838, "post_id": 49904414, "comment_id": 86846981, "body": "@73nismit I said that because you said you said you didn&#39;t get moving Vs copying.  Keeping with the apple analogy; initialising the vector size means you want to say how many boxes to make; your options are to say &quot;make default boxes&quot; which will likely be empty (call the default constructor), or &quot;make boxes that are a copy of this one&quot;.  By giving the vector a size and an object, it goes with that you want the latter.  I hope that helps make things clear about moving and copying! :)"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 8, "last_activity_date": 1524068032, "creation_date": 1524068032, "answer_id": 49904414, "question_id": 49904301, "link": "https://stackoverflow.com/questions/49904301/stdvector-doesnt-call-move-constructor-with-objects-with-noexcept-move-constr/49904414#49904414", "title": "std::vector doesn&#39;t call move constructor with objects with noexcept move constructs", "body": "<p>Because the problem is here:</p>\n\n<pre><code>Two(std::size_t numof_ones, std::size_t num_of_datas)\n: ones(numof_ones, One(num_of_datas))\n{ }\n</code></pre>\n\n<p>You can't move from <code>One</code> you create here, you really need to copy from it <code>numof_ones</code> times.</p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 4614366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5060c14f2600fda002c0b9144c9986d3?s=128&d=identicon&r=PG&f=1", "display_name": "73nismit", "link": "https://stackoverflow.com/users/4614366/73nismit"}, "edited": false, "score": 0, "creation_date": 1524144996, "post_id": 49907746, "comment_id": 86860624, "body": "This is what I did to prevent the compiler errors, but I don&#39;t think it&#39;s the right way to do it though. It doesn&#39;t feel right."}], "tags": [], "owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "is_accepted": false, "score": 2, "last_activity_date": 1524085604, "last_edit_date": 1524085604, "creation_date": 1524080276, "answer_id": 49907746, "question_id": 49904301, "link": "https://stackoverflow.com/questions/49904301/stdvector-doesnt-call-move-constructor-with-objects-with-noexcept-move-constr/49907746#49907746", "title": "std::vector doesn&#39;t call move constructor with objects with noexcept move constructs", "body": "<p>Unfortunately, there is no easy way of constructing a <code>std::vector&lt;One&gt;</code> of size <code>numof_ones</code> without <code>One</code> having a default constructor or a copy constructor. The constructor you chose takes <code>numof_ones</code> <strong>copies</strong> of the single value you give it into each element of the vector.</p>\n\n<p>The easiest solution is probably to not initialize <code>ones</code> in the constructor initializer list but instead initialize it in the body of the constructor:</p>\n\n<pre><code>Two(std::size_t numof_ones, std::size_t num_of_datas) {\n    ones.reserve(numof_ones);\n    for (size_t i = 0; i != numof_ones; ++i) {\n        ones.emplace_back(num_of_datas);\n    }\n}\n</code></pre>\n\n<p>(Technically you could probably use the <code>std::vector</code> constructor that takes two iterators and provide your own custom iterator but it is probably not worth the effort).</p>\n"}], "owner": {"reputation": 35, "user_id": 4614366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5060c14f2600fda002c0b9144c9986d3?s=128&d=identicon&r=PG&f=1", "display_name": "73nismit", "link": "https://stackoverflow.com/users/4614366/73nismit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 538, "favorite_count": 0, "accepted_answer_id": 49904414, "answer_count": 2, "score": 2, "last_activity_date": 1524085604, "creation_date": 1524067650, "question_id": 49904301, "link": "https://stackoverflow.com/questions/49904301/stdvector-doesnt-call-move-constructor-with-objects-with-noexcept-move-constr", "title": "std::vector doesn&#39;t call move constructor with objects with noexcept move constructs", "body": "<p>I've been struggeling a lot lately with move and copy constructors and can't seem to find the awnser on my own.\nThe structure is fairly simple. A class OWUP which holds a std::unique_ptr to an object (in this example an int), a class One which is a simple wrapper around std::vector of OWUP's and class Two which is a simple wrapper std::vector of One's.  </p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;vector&gt;\n\nclass OWUP {\npublic:\n    OWUP()\n    : data(nullptr)\n    { }\n\n    OWUP(const OWUP &amp;) = delete;\n    OWUP &amp;operator=(const OWUP &amp;) = delete; \n    OWUP(OWUP &amp;&amp;) noexcept = default;\n    OWUP &amp;operator=(OWUP &amp;&amp;) noexcept = default; \n\n    std::unique_ptr&lt;int&gt; data; \n};\n\nclass One {\npublic:\n    One(std::size_t numof_datas)\n    : datas(numof_datas)\n    { }\n\n    One(const One &amp;) = delete;\n    One &amp;operator=(const One &amp;) = delete; \n    One(One &amp;&amp;) noexcept = default;\n    One &amp;operator=(One &amp;&amp;) noexcept = default; \n\n    std::vector&lt;OWUP&gt; datas;\n};\n\nclass Two {\npublic:\n    Two(std::size_t numof_ones, std::size_t num_of_datas)\n    : ones(numof_ones, One(num_of_datas))\n    { }\n\n    Two(const Two &amp;) = delete;\n    Two &amp;operator=(const Two &amp;) = delete; \n    Two(Two &amp;&amp;) noexcept = default;\n    Two &amp;operator=(Two &amp;&amp;) noexcept = default;\n\n    std::vector&lt;One&gt; ones;\n}; \n</code></pre>\n\n<p>The code gets the following error code with <code>g++ -std=c++14 example.cpp</code></p>\n\n<pre><code>In file included from /usr/include/c++/7.3.1/memory:64:0,\n                 from example.cpp:1:\n/usr/include/c++/7.3.1/bits/stl_construct.h: In instantiation of 'void std::_Construct(_T1*, _Args&amp;&amp; ...) [with _T1 = One; _Args = {const One&amp;}]':\n/usr/include/c++/7.3.1/bits/stl_uninitialized.h:210:18:   required from 'static _ForwardIterator std::__uninitialized_fill_n&lt;_TrivialValueType&gt;::__uninit_fill_n(_ForwardIterator, _Size, const _Tp&amp;) [with _ForwardIterator = One*; _Size = long unsigned int; _Tp = One; bool _TrivialValueType = false]'\n/usr/include/c++/7.3.1/bits/stl_uninitialized.h:255:17:   required from '_ForwardIterator std::uninitialized_fill_n(_ForwardIterator, _Size, const _Tp&amp;) [with _ForwardIterator = One*; _Size = long unsigned int; _Tp = One]'\n/usr/include/c++/7.3.1/bits/stl_uninitialized.h:366:39:   required from '_ForwardIterator std::__uninitialized_fill_n_a(_ForwardIterator, _Size, const _Tp&amp;, std::allocator&lt;_Tp2&gt;&amp;) [with _ForwardIterator = One*; _Size = long unsigned int; _Tp = One; _Tp2 = One]'\n/usr/include/c++/7.3.1/bits/stl_vector.h:1337:33:   required from 'void std::vector&lt;_Tp, _Alloc&gt;::_M_fill_initialize(std::vector&lt;_Tp, _Alloc&gt;::size_type, const value_type&amp;) [with _Tp = One; _Alloc = std::allocator&lt;One&gt;; std::vector&lt;_Tp, _Alloc&gt;::size_type = long unsigned int; std::vector&lt;_Tp, _Alloc&gt;::value_type = One]'\n/usr/include/c++/7.3.1/bits/stl_vector.h:298:27:   required from 'std::vector&lt;_Tp, _Alloc&gt;::vector(std::vector&lt;_Tp, _Alloc&gt;::size_type, const value_type&amp;, const allocator_type&amp;) [with _Tp = One; _Alloc = std::allocator&lt;One&gt;; std::vector&lt;_Tp, _Alloc&gt;::size_type = long unsigned int; std::vector&lt;_Tp, _Alloc&gt;::value_type = One; std::vector&lt;_Tp, _Alloc&gt;::allocator_type = std::allocator&lt;One&gt;]'\nexample.cpp:40:39:   required from here\n/usr/include/c++/7.3.1/bits/stl_construct.h:75:7: error: use of deleted function 'One::One(const One&amp;)'\n     { ::new(static_cast&lt;void*&gt;(__p)) _T1(std::forward&lt;_Args&gt;(__args)...); }\n       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nexample.cpp:29:3: note: declared here\n   One(const One &amp;) = delete;\n   ^~~\n</code></pre>\n\n<p>I've tried my best to force it to use move constructors. I also tried to create my own move constructors with std::move, but that resulted int the same compile error. I'm aware that std::vector tests for move_if_noexcept(), but for can't find out why it doesn't. What is it that i'm doing wrong?</p>\n"}, {"tags": ["c++", "linker", "static-libraries"], "answers": [{"comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 1, "creation_date": 1524067574, "post_id": 49904266, "comment_id": 86824315, "body": "No <code>-l</code> prefix?"}], "tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": false, "score": 3, "last_activity_date": 1524067592, "last_edit_date": 1524067592, "creation_date": 1524067529, "answer_id": 49904266, "question_id": 49904188, "link": "https://stackoverflow.com/questions/49904188/g-error-linking-functions-from-static-library/49904266#49904266", "title": "g++ error linking functions from static library", "body": "<p>This part of your command line is wrong:</p>\n\n<pre><code> -Lsenselock/libsenseEIV.a\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code> senselock/libsenseEIV.a\n</code></pre>\n\n<p>(The <code>-Lfoo/bar.a</code> tells linker to <em>search</em> directory <code>foo/bar.a/</code> for libraries, which is <em>not at all</em> what you want.)</p>\n\n<blockquote>\n  <p>No <code>-l</code> prefix?</p>\n</blockquote>\n\n<p>You can specify linking with <code>libsenseEIV.a</code> in the following (mostly equivalent) ways:</p>\n\n<pre><code>senselock/libsenseEIV.a\n-Lsenselock -lsenseEIV\n-Lsenselock -l:libsenseEIV.a\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 181, "user_id": 4517806, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3P9Ev.png?s=128&g=1", "display_name": "tomdol", "link": "https://stackoverflow.com/users/4517806/tomdol"}, "reply_to_user": {"reputation": 3491, "user_id": 659503, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/kQXQL.png?s=128&g=1", "display_name": "TSG", "link": "https://stackoverflow.com/users/659503/tsg"}, "edited": false, "score": 0, "creation_date": 1524068359, "post_id": 49904304, "comment_id": 86824834, "body": "Try the full path after <code>-L</code>, for example <code>-L&#47;home&#47;...&#47;libs&#47;senselock</code> and experimentally add <code>.a</code> to the lib name after <code>-l</code>"}, {"owner": {"reputation": 3491, "user_id": 659503, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/kQXQL.png?s=128&g=1", "display_name": "TSG", "link": "https://stackoverflow.com/users/659503/tsg"}, "edited": false, "score": 0, "creation_date": 1524070681, "post_id": 49904304, "comment_id": 86826148, "body": "Strange but the full path worked.  If you want to update your answer to &quot;LIBS += -L$$PWD/senselock/ -lsenseEIV&quot; I&#39;ll check as accepted"}, {"owner": {"reputation": 181, "user_id": 4517806, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3P9Ev.png?s=128&g=1", "display_name": "tomdol", "link": "https://stackoverflow.com/users/4517806/tomdol"}, "reply_to_user": {"reputation": 3491, "user_id": 659503, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/kQXQL.png?s=128&g=1", "display_name": "TSG", "link": "https://stackoverflow.com/users/659503/tsg"}, "edited": false, "score": 0, "creation_date": 1524071935, "post_id": 49904304, "comment_id": 86826837, "body": "Done. You can give it one more try and pass a path relative to your .pro file. But your solution with <code>$$PWD</code> variable is elegant enough."}], "tags": [], "owner": {"reputation": 181, "user_id": 4517806, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3P9Ev.png?s=128&g=1", "display_name": "tomdol", "link": "https://stackoverflow.com/users/4517806/tomdol"}, "is_accepted": false, "score": 1, "last_activity_date": 1524071838, "last_edit_date": 1524071838, "creation_date": 1524067664, "answer_id": 49904304, "question_id": 49904188, "link": "https://stackoverflow.com/questions/49904188/g-error-linking-functions-from-static-library/49904304#49904304", "title": "g++ error linking functions from static library", "body": "<p>You're using the linker flags wrong, you should specify the library path after <code>-L</code> and the library name after <code>-l</code>. In other words you need to have both in the assignment to <code>LIBS</code> variable in your .pro file.</p>\n\n<p>After all it turns out that you can use  <code>LIBS += -L$$PWD/senselock/ -lsenseEIV</code> for your case</p>\n"}], "owner": {"reputation": 3491, "user_id": 659503, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/kQXQL.png?s=128&g=1", "display_name": "TSG", "link": "https://stackoverflow.com/users/659503/tsg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1524071838, "creation_date": 1524067325, "last_edit_date": 1524068085, "question_id": 49904188, "link": "https://stackoverflow.com/questions/49904188/g-error-linking-functions-from-static-library", "title": "g++ error linking functions from static library", "body": "<p>I have a Qt5 C++ program and I'm trying to link to a static library.  The static library is senselock/libsenseEIV.a (relative to the main.cpp file).  When I compile I see the output below:</p>\n\n<pre><code>                                                                      ^\ng++ -Wl,-rpath,/opt/Qt/5.7/gcc_64/lib -o test1 main.o   -Lsenselock/libsenseEIV.a -L/opt/Qt/5.7/gcc_64/lib -lQt5Core -lpthread \nmain.o: In function `test1()':\n/test1/main.cpp:31: undefined reference to `S4Enum'\n/test1/main.cpp:58: undefined reference to `S4Enum'\n/test1/main.cpp:71: undefined reference to `S4Open'\n/test1/main.cpp:83: undefined reference to `S4Control'\n/test1/main.cpp:102: undefined reference to `S4Close'\ncollect2: error: ld returned 1 exit status\nmake: *** [Makefile:216: test1] Error 1\n11:55:27: The process \"/usr/bin/make\" exited with code 2.\nError while building/deploying project test1 (kit: Desktop Qt 5.7.1 GCC 64bit)\nWhen executing step \"Make\"\n</code></pre>\n\n<p>and in my .pro file I have</p>\n\n<pre><code>LIBS += -Lsenselock/libsenseEIV.a\n</code></pre>\n\n<p>in case that matters.  Can someone explain how to fix this error?  The undefined reference errors all relate to functions located in that libsenseEIV.a library.</p>\n\n<p>I don't understand if the compiler can't find the .a file or there's some other error.</p>\n\n<hr>\n\n<p>UPDATE: I tried this syntax </p>\n\n<pre><code>LIBS += -Lsenselock -lsenseEIV\n</code></pre>\n\n<p>but it generates error </p>\n\n<blockquote>\n  <p>/usr/bin/ld: cannot find -lsenseEIV</p>\n</blockquote>\n\n<p>Am I using the wrong library name?  If so how would I find the name?  (assuming this is compiled into the .a file)</p>\n"}, {"tags": ["c++", "csv", "parsing", "getline"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 2, "creation_date": 1524066978, "post_id": 49903946, "comment_id": 86823940, "body": "No remaining question here, then?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8440212"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1524067314, "post_id": 49903946, "comment_id": 86824138, "body": "Unless there&#39;s a better way of going about it, no. Thank you."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1524072650, "post_id": 49903946, "comment_id": 86827228, "body": "Consider replacing <code>if(j&lt;cols)</code> with <code>while(j&lt;cols)</code> to catch lines that end 2 or more elements too soon."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1524072701, "post_id": 49903946, "comment_id": 86827257, "body": "This can also occur where the file did not contain a <code>POSIX EOF</code> (e.g. a <code>&#39;\\n&#39;</code> following the final line). You cannot rely on this as a significant minority of editors still do not enforce a POSIX EOF."}], "answers": [{"tags": [], "owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "is_accepted": true, "score": 0, "last_activity_date": 1524072125, "creation_date": 1524072125, "answer_id": 49905566, "question_id": 49903946, "link": "https://stackoverflow.com/questions/49903946/c-read-csv-file-until-end-of-line-not-finding-last-cell/49905566#49905566", "title": "C++ Read CSV file until end of line, not finding last cell", "body": "<p>Here's another method to parse input from a stringstream. I made a sample program illustrating another way to use <code>getline</code>. I would have made a complete function, but you don't have any in your original question, so I added plenty of comments.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;vector&gt;\n#include &lt;array&gt;\n#include &lt;algorithm&gt;\n#include &lt;functional&gt;\n\nint main()\n{\n  // Test cases.\n  std::istringstream lineStream(\"1,2,3,4\\n\");\n  //std::istringstream lineStream(\"5,,7,\\n\");\n  //std::istringstream lineStream(\"9,,11,\\n\");\n\n  // Vector of 10-char arrays\n  std::vector&lt;std::array&lt;char, 10&gt;&gt; output;\n  // \"NaN\" array, instead of recreating it each iteration.\n  std::array&lt;char, 10&gt; NaN = { 'N', 'a', 'N'};\n\n  // Split lineStream on 10 characters, or comma, in cell variable.\n  // NOTE : Here, I assume you have maximum 10 characters field, but adjust\n  // this based on your specific case. Also, this will capture the \"\\n\", so\n  // we'll need to handle that.\n  for (std::array&lt;char, 10&gt; cell; lineStream.getline(&amp;cell[0], 10, ','); )\n  {\n      // Replace the \\n character with an end of string.\n      // NOTE : this is basic character filtering, and doesn't handle\n      // tabulations, or windows-style endline, so it should probably be\n      // more robust.\n      std::replace(cell.begin(), cell.end(), '\\n', '\\0');\n\n      // Check if cell is empty, and assign it \"NaN\"      \n      if((cell[0] == '\\0') || (cell.empty()))\n        cell = NaN;\n      // Push the cell back to the output vector.\n      output.push_back(cell);\n  }\n\n  // Display the output vector\n  for (auto&amp; a : output)\n  {\n    std::cout &lt;&lt; &amp;a[0] &lt;&lt; \" \";\n  }\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8440212"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1035, "favorite_count": 0, "closed_date": 1524081581, "accepted_answer_id": 49905566, "answer_count": 1, "score": 0, "last_activity_date": 1524072125, "creation_date": 1524066504, "last_edit_date": 1524066926, "question_id": 49903946, "link": "https://stackoverflow.com/questions/49903946/c-read-csv-file-until-end-of-line-not-finding-last-cell", "closed_reason": "Not suitable for this site", "title": "C++ Read CSV file until end of line, not finding last cell", "body": "<p>I'm reading in a CSV file that has columns of different lengths that looks something like this:</p>\n\n<pre><code>1,2,3,4\\n\n5,,7,\\n\n9,,11,\\n\n</code></pre>\n\n<p>And my problem is that I want it to read the following into a vector:</p>\n\n<pre><code>1 2 3 4\n5 nan 7 nan\n9 nan 11 nan\n</code></pre>\n\n<p>So I'm using the following:</p>\n\n<pre><code>int i = 0;\nwhile(getline(data,line))               // Read each line\n{\nstd::stringstream lineStream(line);     \nwhile(getline(lineStream,cell,','))     // Read each cell in the line\n{\n    if(cell.empty())                    // If ,, use NaN\n    {\n        strains.push_back(std::numeric_limits&lt;double&gt;::quiet_NaN());\n    }\n    else\n    {\n        strains.push_back(std::stod(cell));\n    }\n}\n}\n</code></pre>\n\n<p>The problem is that it's skipping the empty cells that end the lines, so it's outputting:</p>\n\n<pre><code>1 2 3 4\n5 nan 7 9\nnan 11\n</code></pre>\n\n<p>Do y'all have any idea how I could count that last column even if it's empty? I'm thinking about having an \"if row length &lt; 4, add empty cell\" kind of thing. Thank you</p>\n\n<p><strong>EDIT</strong> I fixed it with that last thing, I put a counter to count how many cells, and then at the end of the inner loop I added:</p>\n\n<pre><code>if(j&lt;cols) // If counted less than 12 columns,\n{\n    strains.push_back(std::numeric_limits&lt;double&gt;::quiet_NaN());\n}\n</code></pre>\n\n<p>If you have any suggestions or corrections though I'm open to it, thanks.</p>\n"}, {"tags": ["c++", "polymorphism", "operator-overloading"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1524065981, "post_id": 49903769, "comment_id": 86823270, "body": "Did you try passing <code>std::ostream</code> by reference?"}, {"owner": {"reputation": 2462, "user_id": 3343783, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/011bea65b35392a6d1649eee9f95b7d9?s=128&d=identicon&r=PG&f=1", "display_name": "Nisba", "link": "https://stackoverflow.com/users/3343783/nisba"}, "edited": false, "score": 0, "creation_date": 1524066080, "post_id": 49903769, "comment_id": 86823345, "body": "Uh, that is only a typo fortunately! The compiler error is gone, but still I am not getting the desired output (see the last comment on the code for classes)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1524066216, "post_id": 49903769, "comment_id": 86823423, "body": "Then it is a dupe of <a href=\"https://stackoverflow.com/questions/357307/how-to-call-a-parent-class-function-from-derived-class-function\">this</a>.  You need <code>return Base::print(stream)</code>"}, {"owner": {"reputation": 2462, "user_id": 3343783, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/011bea65b35392a6d1649eee9f95b7d9?s=128&d=identicon&r=PG&f=1", "display_name": "Nisba", "link": "https://stackoverflow.com/users/3343783/nisba"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1524066708, "post_id": 49903769, "comment_id": 86823760, "body": "@NathanOliver I added this <code>return obj.Base::print(stream);</code> and made <code>print</code> protected in the base class, but I am not getting the correct output."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1524067127, "post_id": 49903769, "comment_id": 86824038, "body": "I&#39;ve retracted my close vote.  You&#39;ll need more changes as pointed out in the answer below."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 1, "creation_date": 1524067299, "post_id": 49903769, "comment_id": 86824131, "body": "Remove <code>friend std::ostream &amp; operator&lt;&lt;</code> in the derived classes, IMO the base class&#39;s overload should be able to handle the derived ones too.  Then in the overridden <code>print()</code> methods, call <code>Base::print()</code> first."}], "answers": [{"comments": [{"owner": {"reputation": 2462, "user_id": 3343783, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/011bea65b35392a6d1649eee9f95b7d9?s=128&d=identicon&r=PG&f=1", "display_name": "Nisba", "link": "https://stackoverflow.com/users/3343783/nisba"}, "edited": false, "score": 1, "creation_date": 1524067289, "post_id": 49904030, "comment_id": 86824126, "body": "Working great, thanks! I think that the return value of print is redundant, I can make it void, call <code>obj.print(stream)</code> in <code>Base</code> and then return <code>stream</code>."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1524067421, "post_id": 49904030, "comment_id": 86824211, "body": "<code>this-&gt;</code> before <code>Base::print</code> can be removed."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 2462, "user_id": 3343783, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/011bea65b35392a6d1649eee9f95b7d9?s=128&d=identicon&r=PG&f=1", "display_name": "Nisba", "link": "https://stackoverflow.com/users/3343783/nisba"}, "edited": false, "score": 0, "creation_date": 1524067555, "post_id": 49904030, "comment_id": 86824303, "body": "@Nisba, you&#39;re welcome. Yes, you can change the return type of <code>print</code> to <code>void</code> without affecting the functionality."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 6, "last_activity_date": 1524067591, "last_edit_date": 1524067591, "creation_date": 1524066785, "answer_id": 49904030, "question_id": 49903769, "link": "https://stackoverflow.com/questions/49903769/how-to-properly-overload-the-stream-operator-for-printing-in-an-polymorphic-clas/49904030#49904030", "title": "How to properly overload the stream operator for printing in an polymorphic class?", "body": "<p>The solution is very simple.</p>\n\n<ol>\n<li>Define the <code>operator&lt;&lt;</code> function only for the base class. There is no need to define it for the derived types.</li>\n<li>Rely on the <code>virtual</code> function mechanism to invoke the <code>print</code> function of the derived class.</li>\n<li>Add code to call <code>Base::print</code> from the derived classes before printing the derived class specific content. Make sure the function is not <code>private</code> in the base class.</li>\n</ol>\n\n<hr>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Base {\n   protected:\n      virtual std::ostream &amp; print(std::ostream&amp; stream) const {\n         stream &lt;&lt; \"Base class output\\n\";\n         return stream;\n      }\n\n   public:\n\n   // Define it only for the base class.\n   friend std::ostream &amp; operator&lt;&lt;(std::ostream &amp; stream, const Base &amp; obj) {\n      return obj.print(stream);\n   }\n\n   virtual ~Base() {}\n};\n\nclass A : public Base {\n\n   std::ostream &amp; print(std::ostream &amp; stream) const {\n      // Print the base class specific information first.\n      Base::print(stream);\n\n      // Print the derived class specific information.\n      stream &lt;&lt; \"foo = \" &lt;&lt; foo &lt;&lt; \"\\n\";\n      return stream;\n   }\n\n   int foo = 0;\n   public:\n   ~A() {}\n};\n\nclass B : public Base {\n\n   std::ostream &amp; print(std::ostream &amp; stream) const {\n      // Print the base class-specific information first.\n      Base::print(stream);\n\n      // Print the derived class specific information.\n      stream &lt;&lt; \"bar = \" &lt;&lt; bar &lt;&lt; \"\\n\";\n      return stream;\n   }\n\n   int bar = 0;\n   public:\n   ~B() {}\n};\n</code></pre>\n\n<p>With those changes, I get the desired output. See it working at <a href=\"https://ideone.com/x6ti3W\" rel=\"nofollow noreferrer\">https://ideone.com/x6ti3W</a>.</p>\n"}], "owner": {"reputation": 2462, "user_id": 3343783, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/011bea65b35392a6d1649eee9f95b7d9?s=128&d=identicon&r=PG&f=1", "display_name": "Nisba", "link": "https://stackoverflow.com/users/3343783/nisba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 1, "accepted_answer_id": 49904030, "answer_count": 1, "score": 2, "last_activity_date": 1524067591, "creation_date": 1524065934, "last_edit_date": 1524066277, "question_id": 49903769, "link": "https://stackoverflow.com/questions/49903769/how-to-properly-overload-the-stream-operator-for-printing-in-an-polymorphic-clas", "title": "How to properly overload the stream operator for printing in an polymorphic class?", "body": "<p>EDIT: the code had a typo, now it compiles but I am still not getting the output I want.</p>\n\n<p>I am attempting to overload the stream operator for <code>std::cout</code>, <code>std::fstream</code>, etc, but I am not being able to handle polymorphism properly: I am not able to get the output I want to see. \nI would like the subclasses to show the content of the superclass and then its content, while the superclass to show only its content.\nThis can be achieved by introducing a new function <code>print_only_base()</code> in the <code>Base</code> function, but I suspect that I can make the code working even without adding a new function.</p>\n\n<p><strong>What I want to get</strong></p>\n\n<p>I have a base class which has some attributes that I want to be showed on screen when I do</p>\n\n<pre><code>Base base;\nstd::cout &lt;&lt; base;\n</code></pre>\n\n<p>There are two classes, <code>A</code> and <code>B</code> which inherits from <code>Base</code>. <code>Base</code> is a polymorphic class and <code>A</code> and <code>B</code> are showing different output when streamed.</p>\n\n<p>I want an object of class <code>Base</code> to show only its output, while an object of class <code>A</code> (the same for <code>B</code>) to show first the output itself if seen as an instance of <code>Base</code> and then the output of itself seen as <code>A</code> (or <code>B</code>).</p>\n\n<p>Below the code I write the output I would expect and my (not working) attempt.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Base {\n    virtual std::ostream &amp; print(std::ostream stream) const {\n        stream &lt;&lt; \"Base class output\\n\";\n        return stream;\n    }\npublic:\n    friend std::ostream &amp; operator&lt;&lt;(std::ostream &amp; stream, const Base &amp; obj) {\n        return obj.print(stream);\n    }\n    virtual ~Base() {}\n};\n\nclass A : public Base {\n    std::ostream &amp; print(std::ostream &amp; stream) const {\n        stream &lt;&lt; \"foo = \" &lt;&lt; foo &lt;&lt; \"\\n\";\n        return stream;\n    }\n    int foo = 0;\npublic:\n    friend std::ostream &amp; operator&lt;&lt;(std::ostream &amp; stream, const A &amp; obj) {\n        // here I would like to call the base class for printing, but I would enter in an infinite loop\n        return obj.print(stream);\n    }\n    ~A() {}\n};\n\nclass B : public Base {\n    std::ostream &amp; print(std::ostream &amp; stream) const {\n        stream &lt;&lt; \"bar = \" &lt;&lt; bar &lt;&lt; \"\\n\";\n        return stream;\n    }\n    int bar = 0;\npublic:\n    friend std::ostream &amp; operator&lt;&lt;(std::ostream &amp; stream, const B &amp; obj) {\n        // here I would like to call the base class for printing, but I would enter in an infinite loop\n        return obj.print(stream);\n    }\n    ~B() {}\n};\n</code></pre>\n\n<p>Main function:</p>\n\n<pre><code>int main(int argc, char * argv[]) {\n    Base * base = new Base();\n    A * a = new A();\n    B * b = new B();\n    Base * a_inside = dynamic_cast&lt;Base *&gt;(a);\n\n    std::cout &lt;&lt; *base &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; *a &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; *b &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; *a_inside &lt;&lt; \"\\n\";\n\n    delete base;\n    delete a;\n    delete b;\n\n    /* output I want to get\n       Base class output\n\n       Base class output\n       foo = 0\n\n       Base class output\n       bar = 0\n\n       Base class output\n       foo = 0\n    */\n\n\n    return 0;\n}\n</code></pre>\n\n<p>How can I get the desired behaviour?</p>\n"}, {"tags": ["java", "c++", "tostring"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 7, "creation_date": 1524064690, "post_id": 49903357, "comment_id": 86822321, "body": "Nope.  If you want that you have to write it."}, {"owner": {"reputation": 4313, "user_id": 2224047, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UZ83S.jpg?s=128&g=1", "display_name": "Nikolai  Shevchenko", "link": "https://stackoverflow.com/users/2224047/nikolai-shevchenko"}, "edited": false, "score": 2, "creation_date": 1524064702, "post_id": 49903357, "comment_id": 86822331, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/26597189/can-i-implement-tostring-on-c-structs-for-debugging-purposes\">Can I implement .ToString() on C++ structs for debugging purposes?</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1524064983, "post_id": 49903357, "comment_id": 86822562, "body": "There is <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/to_string\" rel=\"nofollow noreferrer\">std::to_string</a> for built-in types, but that&#39;s it."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1524065115, "post_id": 49903357, "comment_id": 86822664, "body": "@JesperJuhl one can specialise it for custom types too"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1524065251, "post_id": 49903357, "comment_id": 86822773, "body": "@UKMonkey Sure, but I got the impression that OP was asking about what was available off the bat."}, {"owner": {"reputation": 1791, "user_id": 794606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a1d5c337bdddae373bbdcb92fdb7077?s=128&d=identicon&r=PG", "display_name": "Jacek Cz", "link": "https://stackoverflow.com/users/794606/jacek-cz"}, "edited": false, "score": 1, "creation_date": 1524065374, "post_id": 49903357, "comment_id": 86822875, "body": "No everithing has sense. Most similar techniques in Java/C# have sense only with reflection"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1524066545, "post_id": 49903357, "comment_id": 86823655, "body": "The most universal way to stringize objects in C++ is to <a href=\"https://stackoverflow.com/q/476272/7571258\">provide an overload of <code>operator &lt;&lt;</code> for <code>std::ostream</code></a> and on some platforms like Windows also <code>std::wostream</code>. Doesn&#39;t work automatically for all types, but the nice thing about this mechanism is that you can write your own overload if the original author of the type doesn&#39;t provide one."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1524064930, "post_id": 49903391, "comment_id": 86822521, "body": "Besides functions, and maybe templates everything in C++ is an object."}, {"owner": {"reputation": 181, "user_id": 4517806, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3P9Ev.png?s=128&g=1", "display_name": "tomdol", "link": "https://stackoverflow.com/users/4517806/tomdol"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1524064986, "post_id": 49903391, "comment_id": 86822565, "body": "Comparing to Java, where everything(?) is a subclass of Object - there&#39;s no such thing in cpp. Of course ints, chars and everything else are PODs but there&#39;s no common interface for all of them. This is what I meant."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1524064998, "post_id": 49903391, "comment_id": 86822577, "body": "There is a distinction between a class type and an object. There are many non-class type objects. It would be more accurate to say &quot;Not everything in c++ is a class type.&quot;"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1524065051, "post_id": 49903391, "comment_id": 86822612, "body": "@tomdol Maybe rephrase it then that in C++, not everything is derived from a <code>Object</code> class?"}], "tags": [], "owner": {"reputation": 181, "user_id": 4517806, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3P9Ev.png?s=128&g=1", "display_name": "tomdol", "link": "https://stackoverflow.com/users/4517806/tomdol"}, "is_accepted": false, "score": 1, "last_activity_date": 1524065380, "last_edit_date": 1524065380, "creation_date": 1524064687, "answer_id": 49903391, "question_id": 49903357, "link": "https://stackoverflow.com/questions/49903357/c-tostring-operator-similair-to-object-tostring/49903391#49903391", "title": "C++ toString operator similair to Object.toString", "body": "<p>There's nothing like this built-in the language. Not everything in C++ is an object(there's no common class from which everything derives).</p>\n"}, {"comments": [{"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1524066711, "post_id": 49903692, "comment_id": 86823761, "body": "<code>operator &lt;&lt;</code> for <code>std::ostream</code> deserves being mentioned too."}, {"owner": {"reputation": 864, "user_id": 9609025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a028356e4549baeabab70bc969af80a8?s=128&d=identicon&r=PG&f=1", "display_name": "mackycheese21", "link": "https://stackoverflow.com/users/9609025/mackycheese21"}, "edited": false, "score": 0, "creation_date": 1524244120, "post_id": 49903692, "comment_id": 86909710, "body": "Darn. Well I guess I will just have to infiltrate apple headquarters and hit the CEO with a pipe until he agrees to give good java support :)"}], "tags": [], "owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "is_accepted": true, "score": 6, "last_activity_date": 1524412127, "last_edit_date": 1524412127, "creation_date": 1524065677, "answer_id": 49903692, "question_id": 49903357, "link": "https://stackoverflow.com/questions/49903357/c-tostring-operator-similair-to-object-tostring/49903692#49903692", "title": "C++ toString operator similair to Object.toString", "body": "<p>There is no equivalent. Unlike JAVA, not everything in C++ is derived from some (<code>Object</code>) superclass. There is no <code>::toString()</code> member function as there is no superclass in C++ to begin with. C++ does not support reflection either.</p>\n\n<p>That being said, there is a <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/to_string\" rel=\"nofollow noreferrer\">std::to_string</a> function having 9 different overloads for the built-in types. To achieve the functionality you want, you can <a href=\"http://en.cppreference.com/w/cpp/language/operators\" rel=\"nofollow noreferrer\">overload</a> the output stream <a href=\"http://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt\" rel=\"nofollow noreferrer\">operator&lt;&lt;</a> for each of your classes.</p>\n"}], "owner": {"reputation": 864, "user_id": 9609025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a028356e4549baeabab70bc969af80a8?s=128&d=identicon&r=PG&f=1", "display_name": "mackycheese21", "link": "https://stackoverflow.com/users/9609025/mackycheese21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 656, "favorite_count": 0, "accepted_answer_id": 49903692, "answer_count": 2, "score": 3, "last_activity_date": 1524412127, "creation_date": 1524064595, "question_id": 49903357, "link": "https://stackoverflow.com/questions/49903357/c-tostring-operator-similair-to-object-tostring", "title": "C++ toString operator similair to Object.toString", "body": "<p>In Java every Object has a toString method and a hashcode method.\nIs there an equivalent hashcode and toString for each object in C++?</p>\n"}, {"tags": ["c++", "templates", "initializer-list"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1524064135, "post_id": 49903157, "comment_id": 86821896, "body": "You could add template arguments to your <code>addStage</code> member function (<code>template&lt;unsigned int X, unsigned int Y&gt; void addStage(Stage&lt;X,Y&gt; stage)</code>) though you will likely find it challenging to store them in any sort of conventional container."}, {"owner": {"reputation": 8160, "user_id": 1035613, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b4d6ce44848765d7b02e4309c9efe9bb?s=128&d=identicon&r=PG", "display_name": "Dmitry Sazonov", "link": "https://stackoverflow.com/users/1035613/dmitry-sazonov"}, "edited": false, "score": 1, "creation_date": 1524064143, "post_id": 49903157, "comment_id": 86821906, "body": "Make a template method <code>addStage</code>?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1524064154, "post_id": 49903157, "comment_id": 86821916, "body": "You need to make <code>addStage</code> a template as well."}, {"owner": {"reputation": 2622, "user_id": 2509453, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/83630742111abce16e8e104158644bc2?s=128&d=identicon&r=PG", "display_name": "Johannes", "link": "https://stackoverflow.com/users/2509453/johannes"}, "edited": false, "score": 0, "creation_date": 1524064312, "post_id": 49903157, "comment_id": 86822029, "body": "Interesting, I did not know the &quot;template member&quot; concept yet. About storing them in a container: the stages are not stored as a container, instead each stage knows its successor. As for the initializer-list: any ideas how to do that?"}, {"owner": {"reputation": 2329, "user_id": 1363486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d556e3afbb20ad2623b46413d1cb345?s=128&d=identicon&r=PG", "display_name": "Marco Pantaleoni", "link": "https://stackoverflow.com/users/1363486/marco-pantaleoni"}, "edited": false, "score": 0, "creation_date": 1524064408, "post_id": 49903157, "comment_id": 86822111, "body": "If the pipeline of stages is known at compile time, you could also use a templated pipeline which has as template parameters all the stages instead of dimensions. Sort of <code>template&lt;typename... Stages&gt; class TemplatePipeline</code>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1524064677, "post_id": 49903157, "comment_id": 86822307, "body": "@Johannes You are describing a linked list of <code>Stage</code>s. You will still likely encounter challenges in forming this list. Specifically, consider what kind of object a <code>Stage</code> expects it&#39;s successor to be. If it&#39;s an object of the same type, that means a <code>Stage&lt;6,5&gt;</code> cannot refer to it&#39;s successor if it&#39;s a <code>Stage&lt;5,4&gt;</code> since they are different types. You may need to use a base type that all <code>Stage</code> inherit from and use polymorphism. You may bump into a similar problem when trying to let a <code>Pipeline</code> refer to the first element of your list."}, {"owner": {"reputation": 2329, "user_id": 1363486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d556e3afbb20ad2623b46413d1cb345?s=128&d=identicon&r=PG", "display_name": "Marco Pantaleoni", "link": "https://stackoverflow.com/users/1363486/marco-pantaleoni"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1524064875, "post_id": 49903157, "comment_id": 86822470, "body": "@Fran&#231;oisAndrieux the templated pipeline would avoid this problem because it doesn&#39;t have to build any container, it could simply call <code>setNext</code> on each stage using the next template argument."}, {"owner": {"reputation": 2622, "user_id": 2509453, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/83630742111abce16e8e104158644bc2?s=128&d=identicon&r=PG", "display_name": "Johannes", "link": "https://stackoverflow.com/users/2509453/johannes"}, "reply_to_user": {"reputation": 2329, "user_id": 1363486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d556e3afbb20ad2623b46413d1cb345?s=128&d=identicon&r=PG", "display_name": "Marco Pantaleoni", "link": "https://stackoverflow.com/users/1363486/marco-pantaleoni"}, "edited": false, "score": 0, "creation_date": 1524065083, "post_id": 49903157, "comment_id": 86822636, "body": "@MarcoPantaleoni I think Francois is right, this is indeed not as simple as I thought"}], "answers": [{"tags": [], "owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "is_accepted": false, "score": 4, "last_activity_date": 1524064964, "creation_date": 1524064964, "answer_id": 49903474, "question_id": 49903157, "link": "https://stackoverflow.com/questions/49903157/passing-templates-without-knowing-their-parameters/49903474#49903474", "title": "Passing templates without knowing their parameters", "body": "<p>You can make a proxy and return a new type after every <code>add</code>. This can take advantage of the compile-time check of the dimension.</p>\n\n<pre><code>template&lt;int NBeg, int NEnd&gt; struct Stage {};\n\ntemplate&lt;int N, int Saved&gt;\nstruct PipelineBuilder {\n    template&lt;int M&gt;\n    PipelineBuilder&lt;M, Saved&gt;\n    AddStage(Stage&lt;N, M&gt;) { return {}; }\n\n    void done() {\n        static_assert(Saved == N, \"Incompatible dim\");\n    }\n};\n\ntemplate&lt;int NIn, int NOut&gt;\nstruct Pipeline {\n    PipelineBuilder&lt;NIn, NOut&gt; GetBuilder() { return {}; }\n};\n\nint main() {\n    Stage&lt;6,5&gt; s1;\n    Stage&lt;5,4&gt; s2;\n    Stage&lt;4,3&gt; s3;\n\n    Pipeline&lt;6, 2&gt; p;\n\n    p\n        .GetBuilder()\n        .AddStage(s1)\n        .AddStage(s2)\n        .AddStage(s3)\n        .done()\n        ;\n}\n</code></pre>\n"}], "owner": {"reputation": 2622, "user_id": 2509453, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/83630742111abce16e8e104158644bc2?s=128&d=identicon&r=PG", "display_name": "Johannes", "link": "https://stackoverflow.com/users/2509453/johannes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1524064964, "creation_date": 1524064004, "question_id": 49903157, "link": "https://stackoverflow.com/questions/49903157/passing-templates-without-knowing-their-parameters", "title": "Passing templates without knowing their parameters", "body": "<p>I am new to C++ and I unsure if I just don't know how to do this or if my approach is all wrong.</p>\n\n<p>I have a Pipeline of processing Stages: each Stage takes data of a certain dimension, transforms it (which might change that dimension) and then calls the next stage on that data. Those dimensions are known at compile time and realized as template parameters. The method <code>setNext</code> is used define the following Stage.</p>\n\n<pre><code>template&lt;unsigned int dimIn, unsigned int dimOut&gt;\nclass Stage {\n    void process(Data&lt;dimIn&gt; dataIn) {\n        Data&lt;dimOut&gt; processed = // do something\n        mNextStage.process(processed)\n    }\n\n    void setNext(Data&lt;dimOut&gt;) {\n        // store pointer to next stage\n    }\n}\n</code></pre>\n\n<p>This works as expected. To group several stages and simplify their construction I want to create a Pipeline object to which different Stages can be passed. The problem is, that the input/output dimensions of the Stages is not equal, so I am unsure how to do this:</p>\n\n<pre><code>template&lt;unsigned int firstDimIn, unsigned int firstDimOut&gt;\nclass Pipeline {\n    void addStage(Stage&lt;?,?&gt; stage) {\n        // template parameters of stage are unknown\n    }\n}\n</code></pre>\n\n<p>The Pipeline is a template too, its parameters hold the input dimension of the first stage and output dimension of the last stage.</p>\n\n<p>Example usage:</p>\n\n<pre><code>Stage&lt;6,5&gt; s1;\nStage&lt;5,4&gt; s2;\nStage&lt;4,2&gt; s3;\n\nPipeline&lt;6,2&gt; pipe;\npipe.addStage(s1);\npipe.addStage(s2);\npipe.addStage(s3);\n</code></pre>\n\n<p>Instead of building the Pipeline step by step with <code>.addStage()</code> a nice solution would also be to use initializer-lists:</p>\n\n<pre><code>Pipeline&lt;6,2&gt; pipe = {s1, s2, s3};\n</code></pre>\n\n<p>But I encounter the same problem there.</p>\n"}, {"tags": ["c++", "debugging", "cmake"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1524063745, "post_id": 49903047, "comment_id": 86821613, "body": "CMake is not a compiler. Find which compiler you are using and use a compatible debugger."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1524063754, "post_id": 49903047, "comment_id": 86821626, "body": "What compiler are you using for CMAKE?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1524064920, "post_id": 49903047, "comment_id": 86822512, "body": "Could you show your <code>CMakeLists.txt</code> you seem to have added <code>-g</code> to the wrong setting in CMake."}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 3, "creation_date": 1524065167, "post_id": 49903047, "comment_id": 86822699, "body": "Note that using a build type of <code>Debug</code> or <code>RelWithDebInfo</code> will add the <code>-g</code> compiler flag automatically; you don&#39;t need to add it yourself (which appears to be the reason you are seeing this error)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1524065168, "post_id": 49903047, "comment_id": 86822702, "body": "Those are the options for CMAKE, not the compiler or debugger.  CMAKE is a build system.  You make a file describing how your code should be compiled and then CMAKE uses that to have the compiler compile the code."}], "owner": {"reputation": 54, "user_id": 9179901, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4989b2fccd9972a11e68449c988c12a3?s=128&d=identicon&r=PG&f=1", "display_name": "Christoph ", "link": "https://stackoverflow.com/users/9179901/christoph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 479, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524064397, "creation_date": 1524063672, "last_edit_date": 1524064397, "question_id": 49903047, "link": "https://stackoverflow.com/questions/49903047/determine-place-of-segmentation-error-cmake", "title": "Determine place of segmentation error CMake", "body": "<p>I am trying to figure out where a segmentation error is made. Thesame issue has been solved below for a different compiler. I am using CMake and am wondering if this compiler also has this function. CMake has no <code>-g</code> build option so I have no idea where to look. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/2876357/determine-the-line-of-code-that-causes-a-segmentation-fault?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\">Determine the line of code that causes a segmentation fault?</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/Jwdpg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Jwdpg.png\" alt=\"CMake Debugger info\"></a></p>\n\n<p>Here is also some info on what build options there are available for the debugger, maybe this points out what debugger I use since I have no idea. </p>\n\n<pre><code>/usr/bin/make: invalid option -- 'g'\nUsage: make [options] [target] ...\nOptions:\n  -b, -m                      Ignored for compatibility.\n  -B, --always-make           Unconditionally make all targets.\n  -C DIRECTORY, --directory=DIRECTORY\n                              Change to DIRECTORY before doing anything.\n  -d                          Print lots of debugging information.\n  --debug[=FLAGS]             Print various types of debugging information.\n  -e, --environment-overrides\n                              Environment variables override makefiles.\n  --eval=STRING               Evaluate STRING as a makefile statement.\n  -f FILE, --file=FILE, --makefile=FILE\n                              Read FILE as a makefile.\n  -h, --help                  Print this message and exit.\n  -i, --ignore-errors         Ignore errors from recipes.\n  -I DIRECTORY, --include-dir=DIRECTORY\n                              Search DIRECTORY for included makefiles.\n  -j [N], --jobs[=N]          Allow N jobs at once; infinite jobs with no arg.\n  -k, --keep-going            Keep going when some targets can't be made.\n  -l [N], --load-average[=N], --max-load[=N]\n                              Don't start multiple jobs unless load is below N.\n  -L, --check-symlink-times   Use the latest mtime between symlinks and target.\n  -n, --just-print, --dry-run, --recon\n                              Don't actually run any recipe; just print them.\n  -o FILE, --old-file=FILE, --assume-old=FILE\n                              Consider FILE to be very old and don't remake it.\n  -O[TYPE], --output-sync[=TYPE]\n                              Synchronize output of parallel jobs by TYPE.\n  -p, --print-data-base       Print make's internal database.\n  -q, --question              Run no recipe; exit status says if up to date.\n  -r, --no-builtin-rules      Disable the built-in implicit rules.\n  -R, --no-builtin-variables  Disable the built-in variable settings.\n  -s, --silent, --quiet       Don't echo recipes.\n  -S, --no-keep-going, --stop\n                              Turns off -k.\n  -t, --touch                 Touch targets instead of remaking them.\n  --trace                     Print tracing information.\n  -v, --version               Print the version number of make and exit.\n  -w, --print-directory       Print the current directory.\n  --no-print-directory        Turn off -w, even if it was turned on implicitly.\n  -W FILE, --what-if=FILE, --new-file=FILE, --assume-new=FILE\n                              Consider FILE to be infinitely new.\n  --warn-undefined-variables  Warn when an undefined variable is referenced.\n\nThis program built for x86_64-pc-linux-gnu\nReport bugs to &lt;bug-make@gnu.org&gt;\n</code></pre>\n"}, {"tags": ["c++", "raii"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1524063291, "post_id": 49902918, "comment_id": 86821249, "body": "A default destructor is not the same a destructor that does nothing. The destructor still needs to be called even if it&#39;s the compiler generated one (default one)."}, {"owner": {"reputation": 489, "user_id": 1710742, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a5a628bfe488520e30127b24071504a2?s=128&d=identicon&r=PG", "display_name": "Jackson", "link": "https://stackoverflow.com/users/1710742/jackson"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1524063381, "post_id": 49902918, "comment_id": 86821323, "body": "So yes, there should be a <code>virtual ~Printable() {}</code> definition?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1524063635, "post_id": 49902918, "comment_id": 86821525, "body": "The base type still needs a <code>virtual</code> destructor, though you can still use the default destructor by using <code>virtual ~Printable() = default;</code>."}, {"owner": {"reputation": 489, "user_id": 1710742, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a5a628bfe488520e30127b24071504a2?s=128&d=identicon&r=PG", "display_name": "Jackson", "link": "https://stackoverflow.com/users/1710742/jackson"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1524064714, "post_id": 49902918, "comment_id": 86822343, "body": "Thank you. Would all subclasses need to also explicitly define a destructor?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1524064757, "post_id": 49902918, "comment_id": 86822368, "body": "You need a virtual destructor if your code deletes an object of a derived type through a pointer to the base. If the destructor in that situation is not virtual the behavior is <b>undefined</b>. That <b>might</b> show up as failing to free resources, but there is no such requirement; the language definition does not tell you what that program will do."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1524064858, "post_id": 49902918, "comment_id": 86822454, "body": "The use of default destructor vs user-defined destructor has no relation at all on how <code>virtual</code> and destructors interact. Types inherited from in a polymorphic context need a <code>virtual</code> destructor if destruction through a pointer to base type is possible, regardless of whether or not any of the classes involve has explicit destructor implementations or use the default destructor."}], "owner": {"reputation": 489, "user_id": 1710742, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a5a628bfe488520e30127b24071504a2?s=128&d=identicon&r=PG", "display_name": "Jackson", "link": "https://stackoverflow.com/users/1710742/jackson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "closed_date": 1524063443, "answer_count": 0, "score": 0, "last_activity_date": 1524063257, "creation_date": 1524063257, "question_id": 49902918, "link": "https://stackoverflow.com/questions/49902918/is-virtual-destructor-in-base-class-needed-when-all-destructors-are-default", "closed_reason": "Duplicate", "title": "Is virtual destructor in base class needed when all destructors are default", "body": "<p>I understand that we should use virtual destructors in base classes to ensure proper resource disposal, because it guarantees the inheritance chain will be observed and all parent destructors will be called when destructing an object. That being said, do we also need virtual destructors in base classes when both the base class and any subclasses use only the default destructor? Example:</p>\n\n<pre><code>class Printable {\n  virtual std::string print();\n};\n\nclass A : public Printable {\n  int foo;\n  bool bar;\n  std::string print() override;\n}\n\nclass B : public Printable {\n  std::vector&lt;int&gt; foo;\n  std::string print() override;\n}\n</code></pre>\n\n<p>There are no resources being managed, and all destructors are implicitly default. Is it still advisable to specify a virtual destructor in <code>Printable</code>?</p>\n"}, {"tags": ["c++", "operands"], "answers": [{"comments": [{"owner": {"reputation": 1369, "user_id": 4383396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1279516226/picture?type=large", "display_name": "Grant Williams", "link": "https://stackoverflow.com/users/4383396/grant-williams"}, "reply_to_user": {"reputation": 15, "user_id": 9664991, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jP8r_FxEaSk/AAAAAAAAAAI/AAAAAAAAAcM/U12Cnj6H5Jo/photo.jpg?sz=128", "display_name": "Lucas Knook", "link": "https://stackoverflow.com/users/9664991/lucas-knook"}, "edited": false, "score": 0, "creation_date": 1524063464, "post_id": 49902891, "comment_id": 86821395, "body": "good luck! I wrote this same problem as my first ever program in basic on my calculator back in the day. It definitely gets easier with practice!"}], "tags": [], "owner": {"reputation": 1369, "user_id": 4383396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1279516226/picture?type=large", "display_name": "Grant Williams", "link": "https://stackoverflow.com/users/4383396/grant-williams"}, "is_accepted": true, "score": 2, "last_activity_date": 1524063196, "creation_date": 1524063196, "answer_id": 49902891, "question_id": 49902824, "link": "https://stackoverflow.com/questions/49902824/c-invalid-operands-of-types-double-and-const-char-5-to-binary-operator/49902891#49902891", "title": "C++ invalid operands of types &#39;double&#39; and &#39;const char [5]&#39; to binary &#39;operator+&#39;", "body": "<p>The problem is you cant use the \"+\" operator the way you are in the print statement. Use the \"&lt;&lt;\" operator instead. Try changing your cout statement to look something like: </p>\n\n<pre><code>cout &lt;&lt; (-b2 + discriminant(a2, b2, c2)) / (2 * a2) &lt;&lt; \" and \" &lt;&lt; (-b2 - discriminant(a2, b2, c2)) / (2 * a2) &lt;&lt; \"\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1369, "user_id": 4383396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1279516226/picture?type=large", "display_name": "Grant Williams", "link": "https://stackoverflow.com/users/4383396/grant-williams"}, "edited": false, "score": 1, "creation_date": 1524063391, "post_id": 49902912, "comment_id": 86821334, "body": "I dont know if it really makes sense to cast the doubles to a string when you can just print the statements separately."}, {"owner": {"reputation": 43, "user_id": 3435317, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100001274954384/picture?type=large", "display_name": "Tobias", "link": "https://stackoverflow.com/users/3435317/tobias"}, "reply_to_user": {"reputation": 1369, "user_id": 4383396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1279516226/picture?type=large", "display_name": "Grant Williams", "link": "https://stackoverflow.com/users/4383396/grant-williams"}, "edited": false, "score": 0, "creation_date": 1524063450, "post_id": 49902912, "comment_id": 86821381, "body": "You are right, i didn&#39;t really know how to &quot;spell&quot; it but the &quot;&lt;&lt;&quot; operator is the better way. I&#39;ll edit my answer"}], "tags": [], "owner": {"reputation": 43, "user_id": 3435317, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100001274954384/picture?type=large", "display_name": "Tobias", "link": "https://stackoverflow.com/users/3435317/tobias"}, "is_accepted": false, "score": 0, "last_activity_date": 1524063500, "last_edit_date": 1524063500, "creation_date": 1524063253, "answer_id": 49902912, "question_id": 49902824, "link": "https://stackoverflow.com/questions/49902824/c-invalid-operands-of-types-double-and-const-char-5-to-binary-operator/49902912#49902912", "title": "C++ invalid operands of types &#39;double&#39; and &#39;const char [5]&#39; to binary &#39;operator+&#39;", "body": "<pre><code> + \"and \" + \n</code></pre>\n\n<p>in the line </p>\n\n<pre><code> cout &lt;&lt; (-b2 + discriminant(a2, b2, c2)) / (2 * a2) + \"and \" + (-b2 - discriminant(a2, b2, c2)) / (2 * a2);\n</code></pre>\n\n<p>does not work as the part before + and the part after the second + are double values which you want to be added to a string. \nPrint these double values directly with cout using \"&lt;&lt;\" operator instead of\"+\"</p>\n"}], "owner": {"reputation": 15, "user_id": 9664991, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jP8r_FxEaSk/AAAAAAAAAAI/AAAAAAAAAcM/U12Cnj6H5Jo/photo.jpg?sz=128", "display_name": "Lucas Knook", "link": "https://stackoverflow.com/users/9664991/lucas-knook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 766, "favorite_count": 1, "accepted_answer_id": 49902891, "answer_count": 2, "score": 1, "last_activity_date": 1524063500, "creation_date": 1524063018, "question_id": 49902824, "link": "https://stackoverflow.com/questions/49902824/c-invalid-operands-of-types-double-and-const-char-5-to-binary-operator", "title": "C++ invalid operands of types &#39;double&#39; and &#39;const char [5]&#39; to binary &#39;operator+&#39;", "body": "<p>I am new to c++ and I have been learning for about 4 weeks, and I now started to try programming my own things, like this thing here I am working on:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\nusing namespace std;\n\nclass abcformule{\n    public:\n        int discriminant(double a, double b, double c){\n            return pow(b, 2) - 4 * a *c;\n        }\n\n        void answer(double a2, double b2, double c2){\n            cout &lt;&lt; (-b2 + discriminant(a2, b2, c2)) / (2 * a2) + \"and \" + (-b2 - discriminant(a2, b2, c2)) / (2 * a2);\n        }\n};\n\nint main() {\n    abcformule abc;\n    abc.answer(5, -2, -7);\n    return 0;\n}\n</code></pre>\n\n<p>It isn't done yet, but as you might guess, it is supposed to use the abc formula to solve x for quadratic formulas. (I am only 14 years old, I don't want to make homework lol).</p>\n\n<p>So, it gives me this error:</p>\n\n<pre><code>12  58  D:\\c++ dev-c\\abc.cpp    [Error] invalid operands of types    'double' and 'const char [5]' to binary 'operator+'\n</code></pre>\n\n<p>What does this mean, and what do I do to fix it?</p>\n"}, {"tags": ["java", "android", "c++", "java-native-interface", "multicast"], "comments": [{"owner": {"reputation": 375, "user_id": 8043759, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e9d95dc6eb7c91c353d363d3378348e3?s=128&d=identicon&r=PG", "display_name": "user221256", "link": "https://stackoverflow.com/users/8043759/user221256"}, "edited": false, "score": 0, "creation_date": 1524064469, "post_id": 49902739, "comment_id": 86822149, "body": "You will probably need foreground service and return START_STICKY from the <code>onStartIntent()</code>. But whatever you do the service (maybe less likely) may get killed by the system when it&#39;s running low on resources."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1524064506, "post_id": 49902739, "comment_id": 86822187, "body": "Android can kill any background process when it needs resources (or it just feels like it). Threads run in processes, therefore your thread(s) can/will be killed."}, {"owner": {"reputation": 91, "user_id": 4295103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84d5c47af08b3c923c836597dd28a229?s=128&d=identicon&r=PG&f=1", "display_name": "Prakhar Asthana", "link": "https://stackoverflow.com/users/4295103/prakhar-asthana"}, "edited": false, "score": 0, "creation_date": 1595576510, "post_id": 49902739, "comment_id": 111528508, "body": "Did you find solution for this ?"}], "answers": [{"comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1524064692, "post_id": 49903110, "comment_id": 86822322, "body": "See recent changes:  <a href=\"https://developer.android.com/about/versions/oreo/background.html\" rel=\"nofollow noreferrer\">developer.android.com/about/versions/oreo/background.html</a>"}], "tags": [], "owner": {"reputation": 43, "user_id": 3435317, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100001274954384/picture?type=large", "display_name": "Tobias", "link": "https://stackoverflow.com/users/3435317/tobias"}, "is_accepted": false, "score": 0, "last_activity_date": 1524063847, "creation_date": 1524063847, "answer_id": 49903110, "question_id": 49902739, "link": "https://stackoverflow.com/questions/49902739/android-service-and-native-threads/49903110#49903110", "title": "Android service and native threads", "body": "<p>Not sure if I get your problem right, but all these points you mention, one can accomplish by using the Android Service Component like describede here: <a href=\"https://developer.android.com/guide/components/services.html\" rel=\"nofollow noreferrer\">https://developer.android.com/guide/components/services.html</a></p>\n\n<p>I worked with this some time ago and it did just these points you require.\nPlease correct me if I'm wrong.</p>\n"}], "owner": {"reputation": 2726, "user_id": 1884325, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a4e2bd26f106332a62d676c3ba09a51?s=128&d=identicon&r=PG", "display_name": "user1884325", "link": "https://stackoverflow.com/users/1884325/user1884325"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 645, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524063847, "creation_date": 1524062781, "question_id": 49902739, "link": "https://stackoverflow.com/questions/49902739/android-service-and-native-threads", "title": "Android service and native threads", "body": "<p>Given the limitations that are being imposed on background services in later versions of Android, how do you accomplish the following:</p>\n\n<ol>\n<li><p>The application's JAVA background service and the native C++ threads which are started by the JAVA background service via JNI continue to run regardless of the phone's state (screen on or off) and regardless of the application's state (activity life cycle). If an activity has been destroyed, the background service must continue to run.</p></li>\n<li><p>If the user clears the application from the task list (menu button), the background service continues to run and so does the C++ threads.</p></li>\n<li><p>If the user presses the menu back button, the background service continues to run and so does the C++ threads.</p></li>\n<li><p>If the user navigates to the OS settings (applications) and selects FORCE CLOSE/STOP for the application, then the application AND the background service is stopped/destroyed.</p></li>\n</ol>\n\n<p>One of the native threads is responsible for listening and processing UDP data via a socket that listens for multicast data. It is critical that this continues to work regardless of phone/app state (unless the app is forcefully closed).</p>\n"}, {"tags": ["c++", "parallel-processing", "mandelbrot", "c++-amp"], "owner": {"reputation": 13, "user_id": 9664862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b353eb354481a30013b73a90947e6bf?s=128&d=identicon&r=PG&f=1", "display_name": "Liam_Foth", "link": "https://stackoverflow.com/users/9664862/liam-foth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1524098704, "creation_date": 1524062567, "last_edit_date": 1524098704, "question_id": 49902658, "link": "https://stackoverflow.com/questions/49902658/using-gaussian-filter-in-c-amp-returning-wrong-colours", "title": "Using Gaussian Filter in C++ AMP returning wrong colours", "body": "<p>I'm trying to use a Gaussian filter on a generated Mandelbrot set, and I have a solution that will work sequentially. However, I do want to have a solution that works using GPU processing. </p>\n\n<p>I'm using C++ AMP to use GPU processing. An issue with storing the individual color channels of the pixels is that in AMP you <strong>can't</strong> use unsigned 8 bit integers ( <strong><code>uint8_t</code></strong> ), therefore I've had to store the channels in unsigned 32 bit integers ( <strong><code>uint32_t</code></strong> ). All of the syntax that I've implemented into the AMP code is the same as the sequential one, however the colours of the one generated in AMP has the wrong colours output, however the shape of the Mandelbrot can still be seen.</p>\n\n<p>So, I believe its the way that I'm recollecting the channels together for the pixel that's giving the wrong colour. If anymore details are needed, I can provide them.</p>\n\n<p><a href=\"https://i.stack.imgur.com/if7HM.jpg\" rel=\"nofollow noreferrer\">Sequential Output</a>\n<a href=\"https://i.stack.imgur.com/if7HM.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/if7HM.jpg\" alt=\"enter image description here\"></a>\nSequential Code:</p>\n\n<pre><code>void applyFilter(){\n\n    int kernelCentreX, kernelCentreY;// center index of kernel\n    int kernelRadius = 5 / 2;\n    uint8_t r, g, b;\n    float kernelTotal = 0.0;\n    float redTotal = 0.0, blueTotal = 0.0, greenTotal = 0.0;\n    float sum;\n\n    the_clock::time_point start = the_clock::now();\n\n    for (int y = 0; y &lt; HEIGHT; y++) { //loop through image height\n        for (int x = 0; x &lt; WIDTH; x++) {//loop through image width\n\n            float redTotal = 0.0, blueTotal = 0.0, greenTotal = 0.0;\n            float kernelTotal = 0.0;\n\n            for (int v = 0; v &lt; 5; v++) { //loop through for kernel height\n                for (int u = 0; u &lt; 5; u++) { //loop through for kernel width\n\n                    // Current position\n                    int cX = x + u - kernelRadius;\n                    int cY = y + v - kernelRadius;\n\n                    //Make sure we stay in boundries\n                    if (cX &lt; 0 || cX &gt; WIDTH - 1 || cY &lt; 0 || cY &gt; HEIGHT - 1)\n                    {\n                        continue;\n                    }\n\n                    //Get colour channels of current pixel\n                    r = (image[cY][cX] &gt;&gt; 16);\n                    g = (image[cY][cX] &gt;&gt; 8);\n                    b = (image[cY][cX]);\n\n                    //Get colour channels of current pixel\n                    /*r = image[cY][cX] &gt;&gt; 16;\n                    g = image[cY][cX] &gt;&gt; 8;\n                    b = image[cY][cX];*/\n\n                    //Calculate Totals\n                    redTotal += r *kernel[v][u];\n                    greenTotal += g *kernel[v][u];\n                    blueTotal += b *kernel[v][u];\n                    kernelTotal += kernel[v][u];\n\n                }\n            }\n\n            //Calculate new pixel values\n            r = (redTotal / kernelTotal);\n            g = (greenTotal / kernelTotal);\n            b = (blueTotal / kernelTotal);\n\n            image[y][x] = (r &lt;&lt; 16 | g &lt;&lt; 8 | b);\n\n        }\n    }\n\n    the_clock::time_point end = the_clock::now();\n    auto time_taken = duration_cast&lt;milliseconds&gt;(end - start).count();\n    cout &lt;&lt; \"Time taken to apply kernel(sequential) \" &lt;&lt; time_taken &lt;&lt; \"ms\" &lt;&lt; endl;\n\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/QdaKx.jpg\" rel=\"nofollow noreferrer\">Parallel Output</a>\n<a href=\"https://i.stack.imgur.com/QdaKx.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QdaKx.jpg\" alt=\"enter image description here\"></a>\nParallel Code:</p>\n\n<pre><code>void applyFilterAMP() {\n\n    the_clock::time_point start = the_clock::now();\n\n    uint32_t *pImage = &amp;(image[0][0]);\n    uint32_t *pFilteredImage = &amp;(filteredImage[0][0]);\n    float *pKernel = &amp;(kernel[0][0]);\n    uint32_t pi[HEIGHT/3][WIDTH/3][3];\n    uint32_t* pPi = &amp;(pi[0][0][0]);\n\n    array_view&lt;float, 2&gt;k(5, 5, pKernel);\n    array_view&lt;uint32_t, 2&gt; m(HEIGHT, WIDTH, pImage);\n    array_view&lt;uint32_t, 2&gt; fi(HEIGHT, WIDTH, pFilteredImage);\n    //array_view&lt;uint32_t, 3&gt; piColor(HEIGHT/3, WIDTH/3, 3, pPi);\n    fi.discard_data();\n\n    static const int TileSize = 16;\n\n    parallel_for_each(fi.extent, [=](concurrency::index&lt;2&gt; idx) restrict(amp) {\n    //parallel_for_each(fi.extent.tile&lt;TileSize, TileSize&gt;(), [=](tiled_index&lt;TileSize, TileSize&gt; tidx) restrict(amp) {\n            int kernelCentreX, kernelCentreY;// center index of kernel\n            int kernelRadius = 5/2;\n            int y = idx[0];\n            int x = idx[1];\n            //int y = tidx.global[0];\n            //int x = tidx.global[1];\n\n            float kernelTotal = 0.0;\n            float redTotal = 0.0, blueTotal = 0.0, greenTotal = 0.0;\n            float sum=0.0;\n\n            uint32_t r, g, b, newPixel;\n\n            for (int v = 0; v &lt; 5; v++) { //loop through for kernel height\n                for (int u = 0; u &lt; 5; u++) { //loop through for kernel width\n\n                    // Current position\n                    int cX = x + u - kernelRadius;\n                    int cY = y + v - kernelRadius;\n                    //int cX = tidx.global[1] + u - kernelRadius;\n                    //int cY = tidx.global[0] + v - kernelRadius;\n\n                    //Make sure we stay in boundries\n                    if ((cX &lt; 0 || cX &gt; WIDTH - 1 || cY &lt; 0 || cY &gt; HEIGHT - 1))\n                    {\n                        continue;\n                    }\n\n                    //Get colour channels of pixel\n                    r = m[cY][cX] &gt;&gt; 16; \n                    g = m[cY][cX] &gt;&gt; 8;\n                    b = m[cY][cX];\n\n                    //Calculate Totals\n                    redTotal += r *k[v][u];\n                    greenTotal += g *k[v][u];\n                    blueTotal += b *k[v][u];\n                    kernelTotal += k[v][u];\n                }\n            }\n\n            //Calculate new pixel values\n            r = (redTotal / kernelTotal);\n            g = (greenTotal / kernelTotal);\n            b = (blueTotal / kernelTotal);\n\n            fi[y][x] = (r &lt;&lt; 16 | g &lt;&lt; 8 | b);\n\n    });\n    fi.synchronize();\n    //m.synchronize();\n    the_clock::time_point end = the_clock::now();\n    auto time_taken = duration_cast&lt;milliseconds&gt;(end - start).count();\n    cout &lt;&lt; \"Time taken to apply kernel(parallel) \" &lt;&lt; time_taken &lt;&lt; \"ms\" &lt;&lt; endl;\n\n\n    errno_t err = memcpy_s(image, sizeof(uint32_t)*(HEIGHT * WIDTH), filteredImage, sizeof(uint32_t)*(HEIGHT * WIDTH));\n    if (err)\n    {\n        printf(\"Error executing memcpy_s.\\n\");\n    }\n\n    /*for (int j = 0; j &lt; HEIGHT; j++) {\n        for (int i = 0; i &lt; WIDTH; i++) {\n            image[j][i] = filteredImage[j][i];\n        }\n    }*/\n\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "qt"], "comments": [{"owner": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "edited": false, "score": 0, "creation_date": 1524062468, "post_id": 49902533, "comment_id": 86820616, "body": "startDetached returns a false in case of error. Did you check the return value?"}, {"owner": {"reputation": 4576, "user_id": 3156300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Oo88B.png?s=128&g=1", "display_name": "JokerMartini", "link": "https://stackoverflow.com/users/3156300/jokermartini"}, "reply_to_user": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "edited": false, "score": 0, "creation_date": 1524064539, "post_id": 49902533, "comment_id": 86822208, "body": "what is odd is this works: QProcess::startDetached(&quot;notepad.exe&quot;, QStringList() &lt;&lt; &quot;C:/Users/john/testing.py&quot;); but not when trying to call python"}, {"owner": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "edited": false, "score": 0, "creation_date": 1524064717, "post_id": 49902533, "comment_id": 86822346, "body": "You should provide a canonical path to QProcess, which uses the syntax of the running OS. In order words, have you tried to type QProcess::startDetached(C:\\\\python27\\\\python.exe&quot;) ?"}, {"owner": {"reputation": 4576, "user_id": 3156300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Oo88B.png?s=128&g=1", "display_name": "JokerMartini", "link": "https://stackoverflow.com/users/3156300/jokermartini"}, "reply_to_user": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "edited": false, "score": 0, "creation_date": 1524065873, "post_id": 49902533, "comment_id": 86823201, "body": "@S.Monteleone ive updated the question with the latest findings."}, {"owner": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "edited": false, "score": 0, "creation_date": 1524067436, "post_id": 49902533, "comment_id": 86824220, "body": "Well clearly the issue was the path string used wrong slashes. Now, about python complaining, is there any reason why the python script is now in a different location ? Is it the same script?"}, {"owner": {"reputation": 4576, "user_id": 3156300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Oo88B.png?s=128&g=1", "display_name": "JokerMartini", "link": "https://stackoverflow.com/users/3156300/jokermartini"}, "reply_to_user": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "edited": false, "score": 0, "creation_date": 1524069599, "post_id": 49902533, "comment_id": 86825554, "body": "I was just trying different python scripts. it should not matter where the python script lives itself."}, {"owner": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "edited": false, "score": 0, "creation_date": 1524070284, "post_id": 49902533, "comment_id": 86825936, "body": "Indeed. But as they say, the devil is in the details. :) Try using the start method instead of execute. Execute is the static one, hence it will ignore the environment. Please let me know if this solves the issue and I will write a full answer."}, {"owner": {"reputation": 4576, "user_id": 3156300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Oo88B.png?s=128&g=1", "display_name": "JokerMartini", "link": "https://stackoverflow.com/users/3156300/jokermartini"}, "reply_to_user": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "edited": false, "score": 0, "creation_date": 1524070868, "post_id": 49902533, "comment_id": 86826250, "body": "@S.Monteleone no luck. Nothing appears to happen or even print to the logger console."}, {"owner": {"reputation": 4576, "user_id": 3156300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Oo88B.png?s=128&g=1", "display_name": "JokerMartini", "link": "https://stackoverflow.com/users/3156300/jokermartini"}, "reply_to_user": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "edited": false, "score": 0, "creation_date": 1524070895, "post_id": 49902533, "comment_id": 86826269, "body": "I&#39;m quite baffled that something so simple to do in cmd and python and C# is becoming quite a headache."}, {"owner": {"reputation": 4576, "user_id": 3156300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Oo88B.png?s=128&g=1", "display_name": "JokerMartini", "link": "https://stackoverflow.com/users/3156300/jokermartini"}, "reply_to_user": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "edited": false, "score": 0, "creation_date": 1524071066, "post_id": 49902533, "comment_id": 86826351, "body": "I wonder if there is a need for me to set the current working directory to be that of the python file itself. Is that something with qprocess?"}, {"owner": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "edited": false, "score": 0, "creation_date": 1524071269, "post_id": 49902533, "comment_id": 86826467, "body": "Nothing appears in console because the stderr and stdout of your process (the Python interpreter in this case) are redirected. You can use the QProcess::readyReadStandardError() signal to read the stderr (there&#39;s another one for the stdout). Then you can use the same interface as the QIODevice. Test it with a python script that shows a message box: if you see it, then it is starting fine. Also, the process will be attached, so your Qt app must be open the whole time, otherwise the child process will be killed."}, {"owner": {"reputation": 4576, "user_id": 3156300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Oo88B.png?s=128&g=1", "display_name": "JokerMartini", "link": "https://stackoverflow.com/users/3156300/jokermartini"}, "reply_to_user": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "edited": false, "score": 0, "creation_date": 1524071552, "post_id": 49902533, "comment_id": 86826622, "body": "How can i make the python file execute under a different process so i can eventually close the main app without affecting the child process?"}, {"owner": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "reply_to_user": {"reputation": 4576, "user_id": 3156300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Oo88B.png?s=128&g=1", "display_name": "JokerMartini", "link": "https://stackoverflow.com/users/3156300/jokermartini"}, "edited": false, "score": 0, "creation_date": 1524071587, "post_id": 49902533, "comment_id": 86826647, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/169267/discussion-between-s-monteleone-and-jokermartini\">continue this discussion in chat</a>."}, {"owner": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "edited": false, "score": 0, "creation_date": 1524071821, "post_id": 49902533, "comment_id": 86826769, "body": "call setProgram(), setArgument() and then startDetached()"}], "answers": [{"tags": [], "owner": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "is_accepted": true, "score": 2, "last_activity_date": 1524079134, "creation_date": 1524079134, "answer_id": 49907471, "question_id": 49902533, "link": "https://stackoverflow.com/questions/49902533/launch-separate-process-in-qt/49907471#49907471", "title": "Launch separate process in Qt", "body": "<p>I will recap the details enlisted in the various comments and provide the final solution for your question.</p>\n\n<p><strong>Paths and backslashes</strong></p>\n\n<p>The QProcess API uses the <strong>CreateProcess</strong> on Win32 platforms and therefore paths must be provided in accordance with the OS convention (using backslashes instead of slashes). In your example, \"C:/python27/python.exe\" must be converted to \"C:\\Python27\\python.exe\". The double backslash here is due to C++ string literals escaping.</p>\n\n<p><strong>Environment</strong></p>\n\n<p>As you have correctly noted in your update, you need to set a few environment variables in order to make the Python interpreter work as expected. </p>\n\n<p>You also specified you want to <strong>detach</strong> the invoked python script, so it can run even when your application is closed.</p>\n\n<p>This is trickier with Qt &lt; 5.10 as the appropriate API to accomplish this task was introduced <strong>with Qt 5.10</strong> (see <a href=\"http://blog.qt.io/blog/2017/08/25/a-new-qprocessstartdetached/\" rel=\"nofollow noreferrer\">this</a> post from the Qt blog).</p>\n\n<p>With Qt 5.10, the correct code is:</p>\n\n<pre><code>QProcess process;\n\n// set the environment variables\nQProcessEnvironment env = QProcessEnvironment::systemEnvironment();\nenv.insert(\"PYTHONHOME\", \"C:\\\\Python27\");\nenv.insert(\"PYTHONPATH\", \"C:\\\\Python27\\\\Lib\");\nprocess.setProcessEnvironment(env);\n\n// set program name and args\nprocess.setProgram(\"C:\\\\Python27\\\\python.exe\");\nprocess.setArguments(args);\n\n// start the detached process\nprocess.startDetached();\n</code></pre>\n\n<p>The code you have in your updated answer doesn't work because it is using the <strong>static</strong> execute() method. You see, a static method is part of a class, and this means you can call it from an object instance of that class, however, since it's static, it can't access the object's members. In other words, execute() can't know anything about the QProcessEnvironment you set before.</p>\n\n<p>For the same reason, calling the startDetached() overload which accepts two arguments won't work either, because it is static too. </p>\n\n<p>The Qt blog post explains exactly why this new non static overload was created, and this fits perfectly in your scenario.</p>\n\n<p><strong>Closing my app kills the python interpreter.</strong></p>\n\n<p>This is true if you run your Qt app in <strong>debug</strong>. That's because the detached process (the python interpreter in this case) is <strong>attached to the debugger too</strong>, and since the debugging session is closed when your Qt app is closed, this kills python too.</p>\n\n<p>However, if you run your deployed app (double click on the exe, not from the debugger) it should work as expected.</p>\n"}], "owner": {"reputation": 4576, "user_id": 3156300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Oo88B.png?s=128&g=1", "display_name": "JokerMartini", "link": "https://stackoverflow.com/users/3156300/jokermartini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 371, "favorite_count": 0, "accepted_answer_id": 49907471, "answer_count": 1, "score": 0, "last_activity_date": 1524079134, "creation_date": 1524062274, "last_edit_date": 1524065859, "question_id": 49902533, "link": "https://stackoverflow.com/questions/49902533/launch-separate-process-in-qt", "title": "Launch separate process in Qt", "body": "<p>I'm attempting to run an python file from a Qt application however I have two problems. One it does not appear to launch the python tool. And secondly when I try doing a simple test using just notepad as an example, i notice that Notepad closes when i close my application. I'm not sure why the python tool is not launching and why the process is not truly independent from the Qt application.</p>\n\n<pre><code>else if(QFileInfo(path).isFile() &amp;&amp; path.endsWith(\".py\", Qt::CaseInsensitive))\n{\n    QProcess::startDetached(\"C:/python27/python.exe\", QStringList() &lt;&lt; \"C:/Users/john/testing.py\");\n\n    QProcess *proc = new QProcess();\n    proc-&gt;startDetached(\"notepad.exe\");\n}\n</code></pre>\n\n<p><strong>Update #1</strong>: Second attempt still failing....\nI've research a bit more and even attempted the code below and it's now giving me the error:</p>\n\n<blockquote>\n  <p>ImportError: No module named site</p>\n</blockquote>\n\n<p>Which is confusing to me because I'm setting the env paths. At the end of the day all im trying to do is run a shell command like the following, but from Qt. </p>\n\n<pre><code>\"C:/python27/python.exe\" \"C:/Users/john/testing.py\"\n</code></pre>\n\n<p>Latest code:</p>\n\n<pre><code>QString program( \"C:\\\\Python27\\\\python.exe\" );\nQStringList args = QStringList() &lt;&lt; \"C:\\\\Users\\\\jmartini\\\\Desktop\\\\Trash\\\\testing.py\";\n\nQProcess process;\nQProcessEnvironment env = QProcessEnvironment::systemEnvironment();\nenv.insert(\"PYTHONHOME\", \"C:\\\\Python27\");\nenv.insert(\"PYTHONPATH\", \"C:\\\\Python27\\\\Lib\");\nprocess.setProcessEnvironment(env);\n\nprocess.execute(program, args);\n</code></pre>\n"}, {"tags": ["c++", "ios", "xcode", "firebase", "admob"], "comments": [{"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1524091039, "post_id": 49902463, "comment_id": 86835985, "body": "(Meta advice: this looks like a good question to me. However, editors will generally trim out meta/voting commentary in questions, since we&#39;d rather voting was an organic as possible. It&#39;s always possible that someone might find a duplicate that you missed. We say the same about questions asking for upvotes, or asking readers not to downvote as well.)"}], "owner": {"reputation": 601, "user_id": 8150130, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1629543837056783/picture?type=large", "display_name": "Treyten Carey", "link": "https://stackoverflow.com/users/8150130/treyten-carey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 237, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1524090946, "creation_date": 1524062087, "last_edit_date": 1524090946, "question_id": 49902463, "link": "https://stackoverflow.com/questions/49902463/http-load-failed-in-admob", "title": "HTTP Load Failed in Admob", "body": "<p>I have been through SO and Google and back trying to figure this out, and I am very stuck.</p>\n\n<p>I am trying to implement the Admob C++ SDK into my project on iOS with Xcode.\nThe following code works correctly on Android, but not on iOS:</p>\n\n<pre><code>Advertisement::banner = new firebase::admob::BannerView();\n      Game::log(\"Initializing..\");\n#ifdef _ANDROID_PLATFORM_\n      Advertisement::banner-&gt;Initialize(Game::state-&gt;activity-&gt;clazz, kBannerAdUnit, banner_ad_size);\n#else\n      Advertisement::banner-&gt;Initialize(getUIView(), kBannerAdUnit, banner_ad_size);\n#endif\n      Game::log(\"Waiting for Initialize...\");\n      WaitForFutureCompletion(Advertisement::banner-&gt;InitializeLastResult());\n\n      // Load the banner ad.\n      Game::log(\"Loading a banner ad.\");\n      Advertisement::banner-&gt;LoadAd(request);\n</code></pre>\n\n<p>The error I'm getting is described as follows:</p>\n\n<pre><code>NSURLSession/NSURLConnection HTTP load failed (kCFStreamErrorDomainSSL, -9802)\n</code></pre>\n\n<p><em>Read below for what I have tried, what has worked, and what has not worked.</em></p>\n\n<p><strong>The Admob CPP Example</strong></p>\n\n<p>I downloaded the Admob example from <a href=\"https://github.com/firebase/quickstart-cpp/tree/master/admob/testapp\" rel=\"nofollow noreferrer\">here</a>, and wow, <em>it works!</em> No errors, displays the banners fine, etc.</p>\n\n<p>So after that worked, I scrapped my project, modified the example above to include my own app's content, and then I receive the <code>HTTP load failed</code> error above.</p>\n\n<p>Note that I have manually checked that all of my settings are the same and that the plist file is the same. The only difference in the two applications is my non-Admob code (otherwise the admob code is identical), so that <em>shouldn't</em> be the issue. As I have been through it several times, I still cannot identify why this is happening.</p>\n\n<p><strong>plist</strong></p>\n\n<p>I have added to my plist file <code>NSAllowsArbitraryLoads</code> and also <code>NSExceptionDomains</code> for <code>myProject.firebaseio.com</code> described <a href=\"https://stackoverflow.com/questions/31662134/https-request-in-ios-9-nsurlsession-nsurlconnection-http-load-failed-kcfstrea\">here</a> and <a href=\"https://stackoverflow.com/questions/30739473/nsurlsession-nsurlconnection-http-load-failed-on-ios-9?rq=1\">here</a> with no success. It seems these do not impact the application, as I still receive <code>HTTP load failed</code> above.</p>\n\n<p>I am not connecting to any HTTP site, only HTTPS, unless Admob does this automatically for the ads. It also seems I am not able to see to which site Admob is connecting, so I cannot test it with <code>NSCurl</code>.</p>\n\n<p>I have tried this with both, the iPhoneX and 5s, and they show identical results.</p>\n"}, {"tags": ["c++", "timeout", "ifstream", "network-drive"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1524062039, "post_id": 49902425, "comment_id": 86820256, "body": "Try accessing the file through Windows Explorer in the same situation and you will likely find that it takes just as long to timeout. This doesn&#39;t sound like a c++ problem."}, {"owner": {"reputation": 1, "user_id": 9664861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7adbc9ce59573ab75e201ebc24391d7?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Sj&#246;str&#246;m", "link": "https://stackoverflow.com/users/9664861/michael-sj%c3%b6str%c3%b6m"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1524062642, "post_id": 49902425, "comment_id": 86820747, "body": "True, that takes forever as well."}], "owner": {"reputation": 1, "user_id": 9664861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7adbc9ce59573ab75e201ebc24391d7?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Sj&#246;str&#246;m", "link": "https://stackoverflow.com/users/9664861/michael-sj%c3%b6str%c3%b6m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 174, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524061981, "creation_date": 1524061981, "question_id": 49902425, "link": "https://stackoverflow.com/questions/49902425/ifstream-timeout-very-long-when-trying-to-open-file-on-inaccessible-network-driv", "title": "ifstream timeout very long when trying to open file on inaccessible network drive", "body": "<p>Think of a scenario where I start my application, do some work which includes saving network drive file paths, e.g. \"\\my\\network\\drive\\file.txt\".</p>\n\n<p>Next time I open my application the network cable has been unplugged.</p>\n\n<p>This results in a very long timeout time when trying to read files using ifstream. The timeout range is from 4 - 30 seconds and I don't know why it's different from time to time.</p>\n\n<p>Code causing the timeout:\n<code>std::unique_ptr&lt;std::ifstream&gt; ifs(new std::ifstream(\"\\\\my\\network\\drive\\file.txt\", std::ios_base::in));</code></p>\n\n<p>Any idea why the timeout is so long?</p>\n\n<p>I'm running Windows 10 on a high-end computer.</p>\n"}, {"tags": ["c++", "alignment", "intel"], "comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1524061962, "post_id": 49902217, "comment_id": 86820198, "body": "Does <code>__m256i</code> need to be aligned to a 32 byte (256 bit) boundary? <code>a+4</code> isn&#39;t on a 32 byte boundary."}, {"owner": {"reputation": 943, "user_id": 5642738, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b3abf90276ea09982abd3c632a9e5354?s=128&d=identicon&r=PG&f=1", "display_name": "Caesar", "link": "https://stackoverflow.com/users/5642738/caesar"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1524062150, "post_id": 49902217, "comment_id": 86820354, "body": "@kevin Each elements is 32 bit integer, so <code>a+1</code> <code>a+2</code> <code>a+3</code> ... should also align on 32-byte boundary, isn&#39;t?"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1524062221, "post_id": 49902217, "comment_id": 86820419, "body": "No, <code>a+1</code> is on a 32 bit (4 byte) boundary."}, {"owner": {"reputation": 943, "user_id": 5642738, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b3abf90276ea09982abd3c632a9e5354?s=128&d=identicon&r=PG&f=1", "display_name": "Caesar", "link": "https://stackoverflow.com/users/5642738/caesar"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1524062596, "post_id": 49902217, "comment_id": 86820701, "body": "@Kevin I got it, it is 32-<code>byte</code> boundary instead of 32-<code>bit</code> boundary. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1524082156, "post_id": 49902672, "comment_id": 86832287, "body": "On different <i>compilers</i>, you mean.  Intel intrinsics can only compile for x86.  But yes, some compilers use <code>vmovdqu</code> (unaligned store) even when the source uses <code>store</code> instead of <code>storeu</code>, to be more &quot;forgiving&quot;.  (Or to disable your ability to build a version that uses HW alignment checking to detect potential performance issues.)"}], "tags": [], "owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "is_accepted": true, "score": 1, "last_activity_date": 1524062616, "creation_date": 1524062616, "answer_id": 49902672, "question_id": 49902217, "link": "https://stackoverflow.com/questions/49902217/c-store-data-in-middle-of-an-aligned-array/49902672#49902672", "title": "c++ store data in middle of an aligned array", "body": "<p><code>__m256i</code> needs to be aligned to a 32 byte (256 bit) boundary. Since the array <code>a</code> is aligned to a 32 byte boundary via <code>alignas(32)</code>, the addresses <code>a</code> and <code>a+8</code> (equivalent address to <code>(char*)a + 8*sizeof(int32_t)</code>) are also aligned to 32 byte boundaries.</p>\n\n<p>However <code>a+4</code> is not. Its address will be between two 32 byte boundaries. Because of this your third statement has undefined behavior and may do different things on different architectures.</p>\n"}], "owner": {"reputation": 943, "user_id": 5642738, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b3abf90276ea09982abd3c632a9e5354?s=128&d=identicon&r=PG&f=1", "display_name": "Caesar", "link": "https://stackoverflow.com/users/5642738/caesar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 49902672, "answer_count": 1, "score": 1, "last_activity_date": 1524062616, "creation_date": 1524061372, "last_edit_date": 1524062234, "question_id": 49902217, "link": "https://stackoverflow.com/questions/49902217/c-store-data-in-middle-of-an-aligned-array", "title": "c++ store data in middle of an aligned array", "body": "<pre><code>#include&lt;cstdint&gt;\n#include&lt;iostream&gt;\n#include&lt;immintrin.h&gt;\nusing namespace std;\n\nint main()\n{\n    alignas(32) int32_t a[32];\n    __m256i t256(_mm256_setzero_si256());\n    _mm256_store_si256(reinterpret_cast&lt;__m256i*&gt;(a),t256);\n    cout&lt;&lt;\"pass\"&lt;&lt;endl;\n    _mm256_store_si256(reinterpret_cast&lt;__m256i*&gt;(a+8),t256);\n    cout&lt;&lt;\"pass\"&lt;&lt;endl;\n    _mm256_store_si256(reinterpret_cast&lt;__m256i*&gt;(a+4),t256);\n    cout&lt;&lt;\"pass\"&lt;&lt;endl;\n}\n</code></pre>\n\n<p>I get three \"pass\" while running this program in windows (compiling by vs2017 15.6.6 and CPU is i7-6700HQ).<br>\nHowever, I get <code>Segmentation fault</code> while running the third statement in arch linux (compiling by g++ 7.3.1 &amp; clang 6.0.0 and CPU is i7-7820x).<br>\nThe options I use is <code>-std=c++17 -march=native</code>.<br><br>\nIn my opinion, I can store in everywhere inside <code>a</code>, because <code>a</code> is align on a 32-byte boundary, and every elements is a 32 bit integer.<br><br></p>\n\n<p>But what do I get <code>Segmentation fault</code>?<br>\n<a href=\"https://software.intel.com/sites/landingpage/IntrinsicsGuide/#text=_mm256_store_si256\" rel=\"nofollow noreferrer\">Intel _mm256_store_si256</a></p>\n"}, {"tags": ["c++", "excel", "vba", "debugging"], "comments": [{"owner": {"reputation": 64429, "user_id": 1188513, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wNdZG.jpg?s=128&g=1", "display_name": "Mathieu Guindon", "link": "https://stackoverflow.com/users/1188513/mathieu-guindon"}, "edited": false, "score": 0, "creation_date": 1524061985, "post_id": 49902164, "comment_id": 86820220, "body": "Does it work if you add an actual reference to the DLL (via tools/references) in the VBE?"}, {"owner": {"reputation": 3613, "user_id": 3437979, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6b05c587e3faf4af86bcff4ac556086b?s=128&d=identicon&r=PG&f=1", "display_name": "Bogey", "link": "https://stackoverflow.com/users/3437979/bogey"}, "reply_to_user": {"reputation": 64429, "user_id": 1188513, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wNdZG.jpg?s=128&g=1", "display_name": "Mathieu Guindon", "link": "https://stackoverflow.com/users/1188513/mathieu-guindon"}, "edited": false, "score": 0, "creation_date": 1524063419, "post_id": 49902164, "comment_id": 86821357, "body": "Seems to be the same issue when adding a reference via tools/references"}, {"owner": {"reputation": 64429, "user_id": 1188513, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wNdZG.jpg?s=128&g=1", "display_name": "Mathieu Guindon", "link": "https://stackoverflow.com/users/1188513/mathieu-guindon"}, "edited": false, "score": 0, "creation_date": 1524063674, "post_id": 49902164, "comment_id": 86821555, "body": "I&#39;m not familiar with C++, but is there a COM registration for the library? The entry point would have a specific GUID that you should be able to find in the registry under <code>HKCR&#47;CLSID&#47;{GUID}</code> - that key would have an <code>InprocServer32</code> subkey, with a <code>CodeBase</code> path pointing to the DLL location - is it there and pointing to the build path?"}, {"owner": {"reputation": 3613, "user_id": 3437979, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6b05c587e3faf4af86bcff4ac556086b?s=128&d=identicon&r=PG&f=1", "display_name": "Bogey", "link": "https://stackoverflow.com/users/3437979/bogey"}, "reply_to_user": {"reputation": 64429, "user_id": 1188513, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wNdZG.jpg?s=128&g=1", "display_name": "Mathieu Guindon", "link": "https://stackoverflow.com/users/1188513/mathieu-guindon"}, "edited": false, "score": 0, "creation_date": 1524064197, "post_id": 49902164, "comment_id": 86821951, "body": "It is indeed an ATL COM project; I&#39;m still a bit overwhelmed by COM registration - it cannot be registered on a machine level due to lack of admin rights (and indeed none of the GUIDs are under HKCR/CLSID). Could there be anything similar in terms of user-level registration in any other registry tree?"}, {"owner": {"reputation": 64429, "user_id": 1188513, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wNdZG.jpg?s=128&g=1", "display_name": "Mathieu Guindon", "link": "https://stackoverflow.com/users/1188513/mathieu-guindon"}, "edited": false, "score": 0, "creation_date": 1524064542, "post_id": 49902164, "comment_id": 86822212, "body": "I&#39;m not 100% sure, but with my own side project (a COM add-in for the VBE, written in C#), I have to run VS as administrator in order to get a build to correctly register. If you leave the VBE opened with an early-bound reference to the DLL, can you still successfully build the DLL? If so, you&#39;re somehow not loading the DLL from the build location - VS shouldn&#39;t be able to overwrite the DLL while it&#39;s in use."}, {"owner": {"reputation": 64429, "user_id": 1188513, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wNdZG.jpg?s=128&g=1", "display_name": "Mathieu Guindon", "link": "https://stackoverflow.com/users/1188513/mathieu-guindon"}, "edited": false, "score": 0, "creation_date": 1524065359, "post_id": 49902164, "comment_id": 86822863, "body": "hmm, odd indeed - I&#39;m stumped at this point... good luck!"}, {"owner": {"reputation": 3613, "user_id": 3437979, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6b05c587e3faf4af86bcff4ac556086b?s=128&d=identicon&r=PG&f=1", "display_name": "Bogey", "link": "https://stackoverflow.com/users/3437979/bogey"}, "reply_to_user": {"reputation": 64429, "user_id": 1188513, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wNdZG.jpg?s=128&g=1", "display_name": "Mathieu Guindon", "link": "https://stackoverflow.com/users/1188513/mathieu-guindon"}, "edited": false, "score": 0, "creation_date": 1524065945, "post_id": 49902164, "comment_id": 86823252, "body": "Ah, my mistake (deleted the previous comment). Built the DLL without changing code, so VS didn&#39;t try to recreate it in the first place. In short - rebuilding the DLL while its referenced in VBA does indeed not work as it is in use"}, {"owner": {"reputation": 36798, "user_id": 2887618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e643417e67e5a3bb9f659e4491ed26b0?s=128&d=identicon&r=PG&f=1", "display_name": "Florent B.", "link": "https://stackoverflow.com/users/2887618/florent-b"}, "edited": false, "score": 0, "creation_date": 1524070252, "post_id": 49902164, "comment_id": 86825910, "body": "FYI it&#39;s possible to register a COM DLL without admin right. Either write yourself the keys in <code>HKCU</code> instead of <code>HKCR</code> or override the registry root with <code>RegOverridePredefKey</code> before the registration."}], "answers": [{"tags": [], "owner": {"reputation": 1758, "user_id": 8724882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d88f8198fb4ae68267aced911e3533f9?s=128&d=identicon&r=PG&f=1", "display_name": "sandwood", "link": "https://stackoverflow.com/users/8724882/sandwood"}, "is_accepted": false, "score": 1, "last_activity_date": 1524481281, "creation_date": 1524481281, "answer_id": 49979503, "question_id": 49902164, "link": "https://stackoverflow.com/questions/49902164/debugging-a-c-dll-loaded-into-excel-via-loadlibrary/49979503#49979503", "title": "Debugging a C++ DLL loaded into Excel via LoadLibrary()", "body": "<p>You might try to add a __debugbreak directive. If the dll is build in debug, it should open the Windows Just in Time debugger.</p>\n\n<pre><code>__declspec(dllexport) int __stdcall Test()\n{\n  __debugbreak(); \n  return 123;\n}\n</code></pre>\n\n<p>see <a href=\"https://msdn.microsoft.com/en-us//library/f408b4et.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us//library/f408b4et.aspx</a></p>\n"}], "owner": {"reputation": 3613, "user_id": 3437979, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6b05c587e3faf4af86bcff4ac556086b?s=128&d=identicon&r=PG&f=1", "display_name": "Bogey", "link": "https://stackoverflow.com/users/3437979/bogey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1524481281, "creation_date": 1524061259, "question_id": 49902164, "link": "https://stackoverflow.com/questions/49902164/debugging-a-c-dll-loaded-into-excel-via-loadlibrary", "title": "Debugging a C++ DLL loaded into Excel via LoadLibrary()", "body": "<p>I'm writing a C++-based DLL which exports a few functions, let's say in a simple case</p>\n\n<pre><code>__declspec(dllexport) int __stdcall Test()\n{\n  return 123;\n}\n</code></pre>\n\n<p>Then, I load this DLL into a running Excel process via VBA, and invoke its Test function:</p>\n\n<pre><code>Private Declare PtrSafe Function LoadLibrary Lib \"kernel32\" Alias \"LoadLibraryA\" (ByVal lpLibFileName As String) As LongPtr\nPrivate Declare Function Test Lib \"MyLibrary.dll\" () As Long\n\nSub executeTest()\n  LoadLibrary \"Path\\To\\MyLibrary.dll\"\n  Dim result As Long: result = Test()\nEnd Sub\n</code></pre>\n\n<p>This works fine. But I don't seem to be able to Debug the C++ part of it.</p>\n\n<p>I've tried firing up Excel, and before executing any code (i.e. befoer the DLL is loaded into Excel), attaching Visual Studio to the running Excel process.\nWhen I set a breakpoint, it's \"white\" - aka \"This breakpoint will not currently be hit. No symbols have been loaded for this document\". Makes sense as my DLL hasn't been laoded into Excel yet.</p>\n\n<p>Then, I execute the VBA code, which will load up the DLL and invoke the Test function. But the debugger's status doesn't change, the breakpoint remains in this state; at no point does it seem to realize the library has been loaded / is able to debug it.</p>\n\n<p>Am I doing anything wrong there? Is there a way to debug calls to my DLL in this scenario?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "boost", "geometry", "boost-geometry"], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 1, "last_activity_date": 1524064472, "last_edit_date": 1524064472, "creation_date": 1524063684, "answer_id": 49903053, "question_id": 49902090, "link": "https://stackoverflow.com/questions/49902090/dataset-of-invalid-geometries-in-boostgeometry/49903053#49903053", "title": "Dataset of invalid geometries in boost::geometry", "body": "<p>The Boost Geometry library implements the OGC standard. From the <a href=\"https://www.boost.org/doc/libs/1_67_0/libs/geometry/doc/html/geometry/introduction.html\" rel=\"nofollow noreferrer\">intro</a></p>\n\n<blockquote>\n  <p>The library follows existing conventions:</p>\n  \n  <ul>\n  <li>conventions from <a href=\"http://www.boost.org/development/requirements.html\" rel=\"nofollow noreferrer\">Boost</a></li>\n  <li>conventions from the std library</li>\n  <li>conventions and names from one of the <a href=\"http://www.opengeospatial.org/\" rel=\"nofollow noreferrer\">OGC</a> standards on geometry and, more specificly, from the <a href=\"http://www.opengeospatial.org/standards/sfa\" rel=\"nofollow noreferrer\">OGC Simple Feature Specification</a></li>\n  </ul>\n</blockquote>\n\n<p>So the list that you used is relevant.</p>\n\n<p>Besides, you can use the <code>is_valid</code> function with a <code>reason</code> parameter to  interrogate the library about your geometry. I have several examples on this site showing how to do that. (Note: Not all constraints might be validatable)</p>\n\n<h2>Your Samples, Live</h2>\n\n<p>Let's adopt the outer ring orientation from the samples (not the BG default):</p>\n\n<pre><code>namespace bg = boost::geometry;\nusing pt    = bg::model::d2::point_xy&lt;double&gt;;\nusing poly  = bg::model::polygon&lt;pt, false&gt;;\nusing multi = bg::model::multi_polygon&lt;poly&gt;;\n</code></pre>\n\n<p>Let's create a generalized checker:</p>\n\n<pre><code>template &lt;typename Geo = poly&gt; void check(std::string wkt) {\n    Geo g;\n    bg::read_wkt(wkt, g);\n    std::string reason;\n    bool ok = bg::is_valid(g, reason);\n    std::cout &lt;&lt; \"Valid: \" &lt;&lt; std::boolalpha &lt;&lt; ok &lt;&lt; \" (\" &lt;&lt; reason &lt;&lt; \")\\n\";\n\n    bg::correct(g);\n    if (bg::is_valid(g, reason)) {\n        std::cout &lt;&lt; \"Autocorrected: \" &lt;&lt; bg::wkt(g) &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<p>And run it for all the test cases:</p>\n\n<pre><code>//Hole Outside Shell\ncheck(\"POLYGON((0 0, 10 0, 10 10, 0 10, 0 0), (15 15, 15 20, 20 20, 20 15, 15 15))\");\n//Nested Holes\ncheck(\"POLYGON((0 0, 10 0, 10 10, 0 10, 0 0), (2 2, 2 8, 8 8, 8 2, 2 2), (3 3, 3 7, 7 7, 7 3, 3 3))\");\n//Disconnected Interior\ncheck(\"POLYGON((0 0, 10 0, 10 10, 0 10, 0 0), (5 0, 10 5, 5 10, 0 5, 5 0))\");\n//Self Intersection\ncheck(\"POLYGON((0 0, 10 10, 0 10, 10 0, 0 0))\");\n//Ring Self Intersection\ncheck(\"POLYGON((5 0, 10 0, 10 10, 0 10, 0 0, 5 0, 3 3, 5 6, 7 3, 5 0))\");\n//Nested Shells\ncheck&lt;multi&gt;(\"MULTIPOLYGON(((0 0, 10 0, 10 10, 0 10, 0 0)),(( 2 2, 8 2, 8 8, 2 8, 2 2)))\");\n//Duplicated Rings\ncheck&lt;multi&gt;(\"MULTIPOLYGON(((0 0, 10 0, 10 10, 0 10, 0 0)),((0 0, 10 0, 10 10, 0 10, 0 0)))\");\n//Too Few Points\ncheck(\"POLYGON((2 2, 8 2))\");\n//Invalid Coordinate\ncheck(\"POLYGON((NaN 3, 3 4, 4 4, 4 3, 3 3))\");\n//Ring Not Closed\ncheck(\"POLYGON((0 0, 0 10, 10 10, 10 0))\");\n</code></pre>\n\n<h2>Output</h2>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/caa505beb7e486c4\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<p>Prints</p>\n\n<pre><code>Valid: false (Geometry has interior rings defined outside the outer boundary)\nValid: false (Geometry has nested interior rings)\nValid: false (Geometry has wrong orientation)\nValid: false (Geometry has wrong orientation)\nValid: false (Geometry has invalid self-intersections. A self-intersection point was found at (5, 0); method: t; operations: i/i; segment IDs {source, multi, ring, segment}: {0, -1, -1, 4}/{0, -1, -1, 8})\nValid: false (Multi-polygon has intersecting interiors)\nValid: false (Geometry has invalid self-intersections. A self-intersection point was found at (10, 0); method: e; operations: c/c; segment IDs {source, multi, ring, segment}: {0, 0, -1, 0}/{0, 1, -1, 0})\nValid: false (Geometry has too few points)\nValid: false (Geometry has point(s) with invalid coordinate(s))\nValid: false (Geometry is defined as closed but is open)\nAutocorrected: POLYGON((0 0,10 0,10 10,0 10,0 0))\n</code></pre>\n\n<blockquote>\n  <p>Note: the <code>bg::correct</code> might in cases correct /part/ of the problem, but leave other issues, and this <code>check</code> function doesn't report on that.</p>\n</blockquote>\n"}], "owner": {"reputation": 23, "user_id": 7126346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9477f8820023802a5ceb7f007e3309a3?s=128&d=identicon&r=PG&f=1", "display_name": "Ruben", "link": "https://stackoverflow.com/users/7126346/ruben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 49903053, "answer_count": 1, "score": 1, "last_activity_date": 1524064492, "creation_date": 1524061064, "last_edit_date": 1524064492, "question_id": 49902090, "link": "https://stackoverflow.com/questions/49902090/dataset-of-invalid-geometries-in-boostgeometry", "title": "Dataset of invalid geometries in boost::geometry", "body": "<p>Exists a dataset of all posible invalid geometries using c++ and boost::geometry libraries? or at least polygon coordinates of that invalid geomtries that i can to translate to boost::geometry\nExample: Selfintersection, etc\nI would like to test my application with a least all posibles invalid geometries. \nSomething like this:</p>\n\n<p><a href=\"https://knowledge.safe.com/articles/21674/invalid-ogc-geometry-examples.html\" rel=\"nofollow noreferrer\">https://knowledge.safe.com/articles/21674/invalid-ogc-geometry-examples.html</a></p>\n\n<p>but with more test cases with inners and outer polygons.</p>\n"}, {"tags": ["c++", "matrix", "add"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1524060940, "post_id": 49901995, "comment_id": 86819396, "body": "You don&#39;t now how to write an if statement to check if the sizes are equal?"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1524061012, "post_id": 49901995, "comment_id": 86819449, "body": "<code>mP</code> and <code>mSize</code> should be replaced with a <code>std::vector&lt;int&gt;</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9664805"}, "edited": false, "score": 0, "creation_date": 1524061022, "post_id": 49901995, "comment_id": 86819456, "body": "I don&#39;t know how to represent a size of the first and the second matrix"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1524061141, "post_id": 49901995, "comment_id": 86819543, "body": "You access <code>mP</code> of both the class you are adding to and the class you are adding from in the line <code>mP[i] + mat.mP[i]</code>, just adapt that to be the member you use for the size."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9664805"}, "edited": false, "score": 0, "creation_date": 1524061532, "post_id": 49901995, "comment_id": 86819872, "body": "<code>if(mSize == mat.mSize)</code> thanks"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1524063528, "post_id": 49901995, "comment_id": 86821442, "body": "What matrix class is this?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9664805"}, "edited": false, "score": 0, "creation_date": 1524063716, "post_id": 49901995, "comment_id": 86821592, "body": "I don&#39;t know what you expect... It&#39;s class called &#39;matrix&#39;, Sorry, but I don&#39;t really understand what I should answer"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1524073918, "post_id": 49901995, "comment_id": 86827901, "body": "What class? Written by who? Downloaded from where? Where is the rest of it, so that people can be sure what all those mysterious member variables do?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9664805"}, "edited": false, "score": 0, "creation_date": 1524130021, "post_id": 49901995, "comment_id": 86850149, "body": "Oh, It&#39;s just written by me as a kind of &#39;homework&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1524072395, "post_id": 49903115, "comment_id": 86827084, "body": "Not too shabby, but <code>double* operator[] (int row) const</code> leaves a pointer that can be used to change the contents of <code>matrix</code> in the hands of the caller, violating the spirit of a <code>const</code> method, and <a href=\"https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">The Rule of Three</a> has been violated."}, {"owner": {"reputation": 2329, "user_id": 1363486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d556e3afbb20ad2623b46413d1cb345?s=128&d=identicon&r=PG", "display_name": "Marco Pantaleoni", "link": "https://stackoverflow.com/users/1363486/marco-pantaleoni"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1524073982, "post_id": 49903115, "comment_id": 86827927, "body": "Thanks for the heads up. Fixed the Rule of Three, and improved a bit the <code>operator[]</code>. TBH actual code would encapsulate the row returned by <code>operator[]</code> but probably it would become too large and adding little to this discussion."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1524074837, "post_id": 49903115, "comment_id": 86828375, "body": "When I need to do a <code>const</code> accessor for a matrix like this it looks something like <code>double operator()(int row, int column) const { return mP[row * mColumns + column]; }</code> non-<code>const</code> version is identical other than returning a reference. Wee bit less vulnerable to mis-use. Good write-up over here: <a href=\"https://isocpp.org/wiki/faq/operator-overloading#matrix-subscript-op\" rel=\"nofollow noreferrer\">isocpp.org/wiki/faq/operator-overloading#matrix-subscript-op</a>"}], "tags": [], "owner": {"reputation": 2329, "user_id": 1363486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d556e3afbb20ad2623b46413d1cb345?s=128&d=identicon&r=PG", "display_name": "Marco Pantaleoni", "link": "https://stackoverflow.com/users/1363486/marco-pantaleoni"}, "is_accepted": false, "score": 2, "last_activity_date": 1524073756, "last_edit_date": 1524073756, "creation_date": 1524063859, "answer_id": 49903115, "question_id": 49901995, "link": "https://stackoverflow.com/questions/49901995/checking-the-matrix-size/49903115#49903115", "title": "Checking the matrix size", "body": "<p>A general 2d matrix has two different dimensions, rows and columns (unless it is the particular case of a square matrix).</p>\n\n<p>In the general case, your code could be:</p>\n\n<pre><code>#include &lt;stdexcept&gt;\n\nclass matrix\n{\npublic:\n    matrix(int rows, int columns) :\n        mRows(rows), mColumns(columns), mP(NULL)\n    {\n        mP = new double[mRows * mColumns];\n        for (int i = 0; i &lt; mRows * mColumns; i++)\n            mP[i] = 0.0;\n    }\n\n    matrix(const matrix&amp; other) :\n        mRows(other.mRows), mColumns(other.mColumns), mP(NULL)\n    {\n        mP = new double[mRows * mColumns];\n        for (int i = 0; i &lt; mRows * mColumns; i++)\n            mP[i] = other.mP[i];\n    }\n\n    ~matrix()\n    {\n        delete[] mP;\n    }\n\n    const double* operator[] (int row) const {\n        return &amp;mP[row * mColumns];\n    }\n\n    double* operator[] (int row) {\n        return &amp;mP[row * mColumns];\n    }\n\n    matrix&amp; operator=(const matrix&amp; other) {\n        if (this == &amp;other) return *this;\n        if ((mRows != other.mRows) || (mColumns != other.mColumns)) throw std::invalid_argument( \"dimensions don't match\" );\n        for (int r = 0; r &lt; mRows; r++) {\n            for (int c = 0; c &lt; mColumns; c++) {\n                (*this)[r][c] = other[r][c];\n            }\n        }\n        return *this;\n    }\n\n    matrix&amp; operator+=(const matrix&amp; other) {\n        if ((mRows != other.mRows) || (mColumns != other.mColumns)) throw std::invalid_argument( \"dimensions don't match\" );\n        for (int r = 0; r &lt; mRows; r++) {\n            for (int c = 0; c &lt; mColumns; c++) {\n                (*this)[r][c] += other[r][c];\n            }\n        }\n        return *this;\n    }\n\nprivate:\n    int mRows;\n    int mColumns;\n    double *mP;\n};\n\ninline matrix operator+(matrix lhs, const matrix&amp; rhs)\n{\n    lhs += rhs;\n    return lhs;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9664805"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1524073756, "creation_date": 1524060817, "question_id": 49901995, "link": "https://stackoverflow.com/questions/49901995/checking-the-matrix-size", "title": "Checking the matrix size", "body": "<p>I don't really know how to check the size of both matrices, if they are appropriate to be added. \nHere's my code, which is currently running without errors:</p>\n\n<pre><code>matrix operator+(const matrix &amp; mat){\n    matrix add;\n    add.mSize = mat.mSize;\n    add.mP = new int[add.mSize * add.mSize];\n    for(int i = 0; i &lt; add.mSize * add.mSize; i++){\n        add.mP[i] = mP[i] + mat.mP[i];\n    }\n    return add;                        \n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm"], "comments": [{"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1524061143, "post_id": 49901935, "comment_id": 86819545, "body": "What does (de)compressing a counter look like?"}, {"owner": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1524061483, "post_id": 49901935, "comment_id": 86819832, "body": "@Useless I&#39;ve added a pseudo-code of what I mean with (de)compressing a counter."}, {"owner": {"reputation": 10649, "user_id": 255803, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/k9vUb.png?s=128&g=1", "display_name": "AVH", "link": "https://stackoverflow.com/users/255803/avh"}, "edited": false, "score": 0, "creation_date": 1524064857, "post_id": 49901935, "comment_id": 86822451, "body": "@TomdeGeus Why is stride value 60 being dropped and not 20? Is that a typo or am I misunderstanding the algorithm?"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1524065459, "post_id": 49901935, "comment_id": 86822937, "body": "Oh, so you don&#39;t want to do a linear scan of the source converting the flat index into n-dimensional coordinates, right? But isn&#39;t that likely to be most efficient?"}, {"owner": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "reply_to_user": {"reputation": 10649, "user_id": 255803, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/k9vUb.png?s=128&g=1", "display_name": "AVH", "link": "https://stackoverflow.com/users/255803/avh"}, "edited": false, "score": 0, "creation_date": 1524065602, "post_id": 49901935, "comment_id": 86823037, "body": "@Darhuuk <code>rstrides</code> contains the strides of the reduced array. As its shape is <code>{2,4,5}</code> its stride should be <code>{rshape[1]*rshape[0], rshape[0], 1} == {20, 5, 1}</code>. I&#39;ve added comments to emphasize this point."}, {"owner": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1524065760, "post_id": 49901935, "comment_id": 86823132, "body": "@Useless There must be a more cleaver way... What I call &#39;decompressing the index&#39; involves still quite some modulo&#39;s. I would love to be precise which way would be most efficient, but I&#39;m yet to find another way. In the meantime I could try to time the nested loops vs. the decompression."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1524066891, "post_id": 49901935, "comment_id": 86823883, "body": "You can probably do something nifty with an iterable slice proxy object, but it seems like a lot of work to set up in isolation. It feels more like part of a general matrix library."}, {"owner": {"reputation": 10649, "user_id": 255803, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/k9vUb.png?s=128&g=1", "display_name": "AVH", "link": "https://stackoverflow.com/users/255803/avh"}, "edited": false, "score": 0, "creation_date": 1524135914, "post_id": 49901935, "comment_id": 86854331, "body": "@TomdeGeus Ah, of course, I don&#39;t know how I missed that."}], "answers": [{"comments": [{"owner": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "edited": false, "score": 0, "creation_date": 1524076729, "post_id": 49904674, "comment_id": 86829423, "body": "I found a way how to break it ;) (<a href=\"https://ideone.com/0B6VC6\" rel=\"nofollow noreferrer\">see example</a>). However, I don&#39;t understand why it is broken...."}, {"owner": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "reply_to_user": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "edited": false, "score": 0, "creation_date": 1524132606, "post_id": 49904674, "comment_id": 86852152, "body": "@TomdeGeus Interestingly, there was a minor error from your side (using <code>MAX_DIM</code> instead of <code>m_ndim</code>) and a more significant one from mine (correctly offset computation). I fixed the answer, and the fixed code is <a href=\"https://ideone.com/dlwj3K\" rel=\"nofollow noreferrer\">here</a>. In any case, even though the complexity is equivalent (iterating once through the first whole tensor), the other answer should be significantly better, cache-wise."}, {"owner": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "edited": false, "score": 0, "creation_date": 1524141208, "post_id": 49904674, "comment_id": 86857943, "body": "Thanks for the fix! In fact, I expected that in my off-site implementation <code>MAX_DIM</code> and <code>m_ndim</code> are equivalent, as I fill the strides until <code>MAX_DIM</code>. But this is not so important I guess. Indeed I go with the other implementation, but thanks a lot!"}], "tags": [], "owner": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "is_accepted": false, "score": 1, "last_activity_date": 1524132484, "last_edit_date": 1524132484, "creation_date": 1524068897, "answer_id": 49904674, "question_id": 49901935, "link": "https://stackoverflow.com/questions/49901935/reduction-sum-along-arbitrary-axes-of-a-multidimensional-array/49904674#49904674", "title": "Reduction (sum) along arbitrary axes of a multidimensional array", "body": "<p>I think this should work:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nint main()\n{\n  // shape, stride &amp; data of the matrix\n  size_t shape  [] = {  2, 3, 4, 5};\n  size_t strides[] = {60, 20, 5, 1};\n  std::vector&lt;double&gt; data(2 * 3 * 4 * 5);\n\n  size_t rshape  [] = { 2, 4, 5};\n  size_t rstrides[] = {3, 5, 1};\n  std::vector&lt;double&gt; rdata(2 * 4 * 5, 0.0);\n\n  const unsigned int NDIM = 4;\n  unsigned int axis = 1;\n\n  for (size_t i = 0 ; i &lt; data.size() ; ++i) data[i] = 1;\n\n  // How many elements to advance after each reduction\n  size_t step_axis = strides[NDIM - 1];\n  if (axis == NDIM - 1)\n  {\n      step_axis = strides[NDIM - 2];\n  }\n  // Position of the first element of the current reduction\n  size_t offset_base = 0;\n  size_t offset = 0;\n  size_t s = 0;\n  for (auto &amp;v : rdata)\n  {\n      // Current reduced element\n      size_t offset_i = offset;\n      for (unsigned int i = 0; i &lt; shape[axis]; i++)\n      {\n          // Reduce\n          v += *(data.data() + offset_i);\n          // Advance to next element\n          offset_i += strides[axis];\n      }\n      s = (s + 1) % strides[axis];\n      if (s == 0)\n      {\n          offset_base += strides[axis - 1];\n          offset = offset_base;\n      }\n      else\n      {\n          offset += step_axis;\n      }\n  }\n\n  // Print\n  for ( size_t a = 0 ; a &lt; rshape[0] ; ++a )\n    for ( size_t b = 0 ; b &lt; rshape[1] ; ++b )\n      for ( size_t c = 0 ; c &lt; rshape[2] ; ++c )\n        std::cout &lt;&lt; \"(\" &lt;&lt; a &lt;&lt; \",\" &lt;&lt; b &lt;&lt; \",\" &lt;&lt; c &lt;&lt; \") \" &lt;&lt; \\\n        rdata[ a*rstrides[0] + b*rstrides[1] + c*rstrides[2] ] &lt;&lt; std::endl;\n\n  return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>(0,0,0) 3\n(0,0,1) 3\n(0,0,2) 3\n(0,0,3) 3\n(0,0,4) 3\n(0,1,0) 3\n(0,1,1) 3\n(0,1,2) 3\n(0,1,3) 3\n(0,1,4) 3\n(0,2,0) 3\n(0,2,1) 3\n(0,2,2) 3\n// ...\n</code></pre>\n\n<p>Setting <code>axis = 3</code> yields:</p>\n\n<pre><code>(0,0,0) 5\n(0,0,1) 5\n(0,0,2) 5\n(0,0,3) 5\n(0,0,4) 5\n(0,1,0) 5\n(0,1,1) 5\n(0,1,2) 5\n(0,1,3) 5\n(0,1,4) 5\n(0,2,0) 5\n(0,2,1) 5\n(0,2,2) 5\n(0,2,3) 5\n// ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "edited": false, "score": 0, "creation_date": 1524075486, "post_id": 49905058, "comment_id": 86828708, "body": "That&#39;s very clever, exactly where I&#39;m looking for. I think I understand what is being done, but for future reference I do think that the post would benefit from an explanation of <code>ni</code>."}, {"owner": {"reputation": 909, "user_id": 6504815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/797Ai.jpg?s=128&g=1", "display_name": "vishal-wadhwa", "link": "https://stackoverflow.com/users/6504815/vishal-wadhwa"}, "reply_to_user": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "edited": false, "score": 0, "creation_date": 1524080150, "post_id": 49905058, "comment_id": 86831243, "body": "@TomdeGeus added explanation. :)"}], "tags": [], "owner": {"reputation": 909, "user_id": 6504815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/797Ai.jpg?s=128&g=1", "display_name": "vishal-wadhwa", "link": "https://stackoverflow.com/users/6504815/vishal-wadhwa"}, "is_accepted": true, "score": 3, "last_activity_date": 1524120603, "last_edit_date": 1524120603, "creation_date": 1524070335, "answer_id": 49905058, "question_id": 49901935, "link": "https://stackoverflow.com/questions/49901935/reduction-sum-along-arbitrary-axes-of-a-multidimensional-array/49905058#49905058", "title": "Reduction (sum) along arbitrary axes of a multidimensional array", "body": "<p>I don't know how efficient this code is, but in my opinion, it is sure to be precise. </p>\n\n<h3>What's going on?</h3>\n\n<p>A little on <code>adjusted_strides</code>:</p>\n\n<p>For <code>axis_count = 4</code>, <code>adjusted_strides</code> has size <code>5</code>, where:</p>\n\n<pre><code> adjusted_strides[0] = shape[0]*shape[1]*shape[2]*shape[3];\n adjusted_strides[1] = shape[1]*shape[2]*shape[3];\n adjusted_strides[2] = shape[2]*shape[3];\n adjusted_strides[3] = shape[3];\n adjusted_strides[4] = 1;\n</code></pre>\n\n<p>Let's take the example where the number of dimensions is <code>4</code> and the shape of the multidimensional array (<code>A</code>) is <code>n0, n1, n2, n3</code>. </p>\n\n<p>When we need to transform this array into another multidimensional array (<code>B</code>) of shape: <code>n0, n2, n3</code> (compressing <code>axis = 1 (0-based)</code>), then, we try to proceed as follows:</p>\n\n<p>For each index of <code>A</code> we try to find its position in <code>B</code>.\nLet <code>A[i][j][k][l]</code> be any element in <code>A</code>. Its position in <code>flat_A</code> will be <code>A[i*n1*n2*n3 + j*n2*n3 + k*n3 + l]</code></p>\n\n<p><strong><code>idx = i*n1*n2*n3 + j*n2*n3 + k*n3 + l;</code></strong></p>\n\n<p>In the compressed array <code>B</code>, this element will be a part of (or added to), <code>B[i][k][l]</code>. In <code>flat_B</code> the index is <strong><code>new_idx = i*n2*n3 + k*n3 + l;</code></strong>.</p>\n\n<p><strong>How do we form <code>new_idx</code> from <code>idx</code>?</strong></p>\n\n<ol>\n<li><p>All the axes before the compressed axis have the shape of the compressed axis as a part of their product. In our example we had to remove axis <code>1</code>, so all the axes which were before the 1st axis (only one here: the <code>0th axis</code>) represented by <code>i</code>), have <code>n1</code> as a part of product (<code>i*n1*n2*n3</code>).</p></li>\n<li><p>All the axes after the compressed axis remain unaffected.</p></li>\n<li><p>Finally, we need to do two things:</p>\n\n<ol>\n<li><p>Isolate the indices of the axes before the index of the axis to be compressed and remove the shape of this axis:</p>\n\n<p><em>Integer division</em>: <code>idx / (n1*n2*n3);</code> (<code>== idx / adjusted_strides[1]</code>). </p>\n\n<p>We are left with just <code>i</code>, which can be readjusted according to the new shape (by multiplying with <code>n2*n3</code>): we get </p>\n\n<p><code>i*n2*n3</code> (<code>== i * adjusted_strides[2]</code>).</p></li>\n<li><p>We isolate the axes after the compressed axis, which are unaffected by its shape.</p>\n\n<p><code>idx % (n2*n3)</code> (<code>== idx % adjusted_strides[2]</code>) </p>\n\n<p>which gives us <code>k*n3 + l</code>. </p></li>\n<li><p>Adding the results of step <em>i.</em> and <em>ii.</em> results in:</p>\n\n<p><code>computed_idx = i*n2*n3 + k*n3 + l;</code></p>\n\n<p>Which is the same as <code>new_idx</code>. So, our transformation was correct :).</p></li>\n</ol></li>\n</ol>\n\n<h3>Code:</h3>\n\n<p>Note: <code>ni</code> refers to <code>new_idx</code>.</p>\n\n<pre><code>  size_t cmp_axis = 1, axis_count = sizeof shape/ sizeof *shape;\n  std::vector&lt;size_t&gt; adjusted_strides;\n  //adjusted strides is basically same as strides\n  //only difference being that the first element is the \n  //total number of elements in the n dim array.\n\n  //The only reason to introduce this array was\n  //so that I don't have to write any if-elses\n  adjusted_strides.push_back(shape[0]*strides[0]);\n  adjusted_strides.insert(adjusted_strides.end(), strides, strides + axis_count);\n  for(size_t i = 0; i &lt; data.size(); ++i) {\n    size_t ni = i/adjusted_strides[cmp_axis]*adjusted_strides[cmp_axis+1] + i%adjusted_strides[cmp_axis+1];\n    rdata[ni] += data[i];\n  }\n</code></pre>\n\n<h3>Output (axis = 1)</h3>\n\n<pre><code>(0,0,0) 3\n(0,0,1) 3\n(0,0,2) 3\n(0,0,3) 3\n(0,0,4) 3\n(0,1,0) 3\n(0,1,1) 3\n(0,1,2) 3\n(0,1,3) 3\n(0,1,4) 3\n(0,2,0) 3\n(0,2,1) 3\n(0,2,2) 3\n(0,2,3) 3\n(0,2,4) 3\n(0,3,0) 3\n(0,3,1) 3\n(0,3,2) 3\n...\n</code></pre>\n\n<p>Tested <a href=\"https://ideone.com/bjC1NG\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>For further reading, refer to <a href=\"https://en.wikipedia.org/wiki/Row-_and_column-major_order#Address_calculation_in_general\" rel=\"nofollow noreferrer\">this</a>.</p>\n"}], "owner": {"reputation": 4097, "user_id": 2646505, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/XGEyF.jpg?s=128&g=1", "display_name": "Tom de Geus", "link": "https://stackoverflow.com/users/2646505/tom-de-geus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 49905058, "answer_count": 2, "score": 4, "last_activity_date": 1524132484, "creation_date": 1524060632, "last_edit_date": 1524065464, "question_id": 49901935, "link": "https://stackoverflow.com/questions/49901935/reduction-sum-along-arbitrary-axes-of-a-multidimensional-array", "title": "Reduction (sum) along arbitrary axes of a multidimensional array", "body": "<p>I want to perform a sum reduction along arbitrary axes of a multidimensional matrix which may have arbitrary dimensions (e.g. axis 5 of a 10-dimensional array). The matrix is stored using the row-major format, i.e. as a <code>vector</code> together with the strides along each axis. </p>\n\n<p>I know how to perform this reduction using nested loops (see example below), but doing this results in a hard-coded axis (the reduction is along axis 1 below) and an arbitrary number of dimensions (4 below). <em>How can I generalize this without using the nested loops?</em></p>\n\n<hr>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nint main()\n{\n  // shape, stride &amp; data of the matrix\n\n  size_t shape  [] = { 2, 3, 4, 5};\n  size_t strides[] = {60,20, 5, 1};\n\n  std::vector&lt;double&gt; data(2*3*4*5);\n\n  for ( size_t i = 0 ; i &lt; data.size() ; ++i ) data[i] = 1.;\n\n  // shape, stride &amp; data (zero-initialized) of the reduced matrix\n\n  size_t rshape  [] = { 2, 4, 5};\n  size_t rstrides[] = {20, 5, 1};\n\n  std::vector&lt;double&gt; rdata(2*4*5, 0.0);\n\n  // compute reduction\n\n  for ( size_t a = 0 ; a &lt; shape[0] ; ++a )\n    for ( size_t c = 0 ; c &lt; shape[2] ; ++c )\n      for ( size_t d = 0 ; d &lt; shape[3] ; ++d )\n        for ( size_t b = 0 ; b &lt; shape[1] ; ++b )\n          rdata[ a*rstrides[0]                 + c*rstrides[1] + d*rstrides[2] ] += \\\n          data [ a*strides [0] + b*strides [1] + c*strides [2] + d*strides [3] ];\n\n  // print resulting reduced matrix\n\n  for ( size_t a = 0 ; a &lt; rshape[0] ; ++a )\n    for ( size_t b = 0 ; b &lt; rshape[1] ; ++b )\n      for ( size_t c = 0 ; c &lt; rshape[2] ; ++c )\n        std::cout &lt;&lt; \"(\" &lt;&lt; a &lt;&lt; \",\" &lt;&lt; b &lt;&lt; \",\" &lt;&lt; c &lt;&lt; \") \" &lt;&lt; \\\n        rdata[ a*rstrides[0] + b*rstrides[1] + c*rstrides[2] ] &lt;&lt; std::endl;\n\n  return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>Note: I want to avoid 'decompressing' and 'compressing' a counter. By this I mean that I could, in pseudo-code, do:</p>\n\n<pre><code>for ( size_t i = 0 ; i &lt; data.size() ; ++i ) \n{\n  i -&gt; {a,b,c,d}\n\n  discard \"b\" (axis 1) -&gt; {a,c,d}\n\n  rdata(a,c,d) += data(a,b,c,d)\n}\n</code></pre>\n"}, {"tags": ["c++", "r", "rcpp"], "comments": [{"owner": {"reputation": 117262, "user_id": 1412059, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MQ33X.jpg?s=128&g=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/1412059/roland"}, "edited": false, "score": 0, "creation_date": 1524060965, "post_id": 49901812, "comment_id": 86819415, "body": "&quot;Perhaps the most confusing part is that if I select the code chunk inside of the loop and repeatedly run it, it works(!). However, if I run the R code using the loop it crashes on the second iteration.&quot; Does it happen in the loop if you turn off JIT compilation?"}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1524061165, "post_id": 49901812, "comment_id": 86819563, "body": "You <code>tau2</code> (in R) gets overwritten inside your <code>foo()</code> -- these are (eventually) all <code>SEXP</code> which are <i>pointers</i>.  Rename, or copy <code>tau2</code> inside."}, {"owner": {"reputation": 1692, "user_id": 2072412, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5d094df2435465f1adf35aab0825e1dd?s=128&d=identicon&r=PG", "display_name": "hejseb", "link": "https://stackoverflow.com/users/2072412/hejseb"}, "reply_to_user": {"reputation": 117262, "user_id": 1412059, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MQ33X.jpg?s=128&g=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/1412059/roland"}, "edited": false, "score": 0, "creation_date": 1524061241, "post_id": 49901812, "comment_id": 86819618, "body": "@Roland If I run <code>compile::enableJIT</code> with <code>0</code>, <code>1</code> or <code>2</code> it works."}, {"owner": {"reputation": 17516, "user_id": 1345455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DrBTs.jpg?s=128&g=1", "display_name": "coatless", "link": "https://stackoverflow.com/users/1345455/coatless"}, "edited": false, "score": 0, "creation_date": 1524061278, "post_id": 49901812, "comment_id": 86819645, "body": "This isn&#39;t the issue at all... The underlying cpp code is bad. In particular, the use of the <code>Rcpp::</code> generators given a <code>NumericVector</code> being <i>forced</i> into an <code>arma::vec</code>."}, {"owner": {"reputation": 1692, "user_id": 2072412, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5d094df2435465f1adf35aab0825e1dd?s=128&d=identicon&r=PG", "display_name": "hejseb", "link": "https://stackoverflow.com/users/2072412/hejseb"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1524061442, "post_id": 49901812, "comment_id": 86819791, "body": "@DirkEddelbuettel That&#39;s basically what I&#39;m after. It&#39;s an MCMC sampler where <code>tau2</code> is one of the variables being updated. It&#39;s supposed to be in C++ all of it (where I guess it makes more sense), but right now when I ran into this i was just testing this updating function out from R to simplify the debugging process."}, {"owner": {"reputation": 1692, "user_id": 2072412, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5d094df2435465f1adf35aab0825e1dd?s=128&d=identicon&r=PG", "display_name": "hejseb", "link": "https://stackoverflow.com/users/2072412/hejseb"}, "reply_to_user": {"reputation": 17516, "user_id": 1345455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DrBTs.jpg?s=128&g=1", "display_name": "coatless", "link": "https://stackoverflow.com/users/1345455/coatless"}, "edited": false, "score": 0, "creation_date": 1524061536, "post_id": 49901812, "comment_id": 86819878, "body": "@coatless In my defense, that was actually just to make the example minimal."}], "answers": [{"comments": [{"owner": {"reputation": 1692, "user_id": 2072412, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5d094df2435465f1adf35aab0825e1dd?s=128&d=identicon&r=PG", "display_name": "hejseb", "link": "https://stackoverflow.com/users/2072412/hejseb"}, "edited": false, "score": 0, "creation_date": 1524062020, "post_id": 49902223, "comment_id": 86820243, "body": "I&#39;m not expecting much in terms of the numbers (it&#39;s just a reprex), but what I wasn&#39;t expecting was <code>nu</code> to change when 1) it&#39;s not overwritten in the C++ code and 2) it&#39;s a constant reference. So my question was mostly about understanding what was going on."}, {"owner": {"reputation": 1692, "user_id": 2072412, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5d094df2435465f1adf35aab0825e1dd?s=128&d=identicon&r=PG", "display_name": "hejseb", "link": "https://stackoverflow.com/users/2072412/hejseb"}, "edited": false, "score": 0, "creation_date": 1524117863, "post_id": 49902223, "comment_id": 86843003, "body": "Now I just remembered why I avoided using <code>double</code> in the first place---your answer here: <a href=\"https://stackoverflow.com/questions/44047145/function-pass-by-reference-in-rcpparmadillo\" title=\"function pass by reference in rcpparmadillo\">stackoverflow.com/questions/44047145/&hellip;</a> I&#39;m working on a Gibbs sampler, so <code>tau2</code> is like the current value of tau^2 in the sampler and the function in my example updates it (although obviously in the example the code is meaningless). I was so focused on this issue that I forgot to add that to my post."}], "tags": [], "owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "is_accepted": false, "score": 1, "last_activity_date": 1524061414, "creation_date": 1524061414, "answer_id": 49902223, "question_id": 49901812, "link": "https://stackoverflow.com/questions/49901812/understanding-strange-behavior-in-rcpp/49902223#49902223", "title": "Understanding strange behavior in Rcpp", "body": "<p>If I change the interface to using a <code>double</code> it all works:</p>\n\n<h3>Code</h3>\n\n<pre><code>#include &lt;RcppArmadillo.h&gt;\n// [[Rcpp::depends(RcppArmadillo)]]\n// [[Rcpp::export]]\nRcpp::List foo(double &amp; tau2, const arma::vec &amp; nu) {\n\n  arma::vec bet = Rcpp::rnorm(3);\n  tau2 = R::rgamma(1, arma::as_scalar(sum(pow(bet, 2)/nu)));\n\n  return Rcpp::List::create(Rcpp::Named(\"nu\") = nu,\n                            Rcpp::Named(\"tau2\") = tau2);\n}\n\n/*** R\nn &lt;- 3\nm &lt;- matrix(0, n, 1)\nfor (r in 1:1000) {\n  tau2 &lt;- 1.0\n  nu &lt;- matrix(1, n, 1)\n  upd &lt;- foo(tau2, nu)\n}\n*/\n</code></pre>\n\n<h3>Demo</h3>\n\n<pre><code>R&gt; sourceCpp(\"/tmp/hejseb.cpp\")\n\nR&gt; n &lt;- 3\n\nR&gt; m &lt;- matrix(0, n, 1)\n\nR&gt; for (r in 1:1000) {\n+   tau2 &lt;- 1.0\n+   nu &lt;- matrix(1, n, 1)\n+   upd &lt;- foo(tau2, nu)\n+ }\nR&gt; upd\n$nu\n     [,1]\n[1,]    1\n[2,]    1\n[3,]    1\n\n$tau2\n[1] 1.77314\n\nR&gt; \n</code></pre>\n\n<p>I am not sure if those are the numbers you expected. I don't really have time to work through what you are trying to do.</p>\n"}, {"comments": [{"owner": {"reputation": 1692, "user_id": 2072412, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5d094df2435465f1adf35aab0825e1dd?s=128&d=identicon&r=PG", "display_name": "hejseb", "link": "https://stackoverflow.com/users/2072412/hejseb"}, "edited": false, "score": 0, "creation_date": 1524062164, "post_id": 49902369, "comment_id": 86820366, "body": "That is admittedly a better solution. Can you offer any insights into why <code>nu</code> is modified despite not being overwritten in the C++ code and despite being a constant reference? I understand that the code is quite subpar, but it would be useful to know <i>why</i> this is happening (not just how to avoid it)."}, {"owner": {"reputation": 17516, "user_id": 1345455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DrBTs.jpg?s=128&g=1", "display_name": "coatless", "link": "https://stackoverflow.com/users/1345455/coatless"}, "reply_to_user": {"reputation": 1692, "user_id": 2072412, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5d094df2435465f1adf35aab0825e1dd?s=128&d=identicon&r=PG", "display_name": "hejseb", "link": "https://stackoverflow.com/users/2072412/hejseb"}, "edited": false, "score": 0, "creation_date": 1524064898, "post_id": 49902369, "comment_id": 86822487, "body": "<code>nu</code> is being passed as a &quot;reference&quot; with <code>&amp;</code>. Thus, it is using the <i>same</i> memory as the object in <i>R</i>. We&#39;re doing this when we used the advanced constructor to move over the random sample draws. To keep it stationary: Remove the <code>&amp;</code>. However, in this example, nothing changes."}, {"owner": {"reputation": 1692, "user_id": 2072412, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5d094df2435465f1adf35aab0825e1dd?s=128&d=identicon&r=PG", "display_name": "hejseb", "link": "https://stackoverflow.com/users/2072412/hejseb"}, "edited": false, "score": 0, "creation_date": 1524067424, "post_id": 49902369, "comment_id": 86824212, "body": "I see. In my application nu is in fact fairly large so my intention was to avoid copying it (hence the &amp;). But I guess this messes it all up."}, {"owner": {"reputation": 1692, "user_id": 2072412, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5d094df2435465f1adf35aab0825e1dd?s=128&d=identicon&r=PG", "display_name": "hejseb", "link": "https://stackoverflow.com/users/2072412/hejseb"}, "edited": false, "score": 0, "creation_date": 1524117961, "post_id": 49902369, "comment_id": 86843043, "body": "As I just commented on Dirk&#39;s answer, I just remembered that I avoided <code>double</code> in the first place because of his answer here: <a href=\"https://stackoverflow.com/questions/44047145/function-pass-by-reference-in-rcpparmadillo\" title=\"function pass by reference in rcpparmadillo\">stackoverflow.com/questions/44047145/&hellip;</a> I essentially just want to give the function some variables which it should update accordingly."}, {"owner": {"reputation": 17516, "user_id": 1345455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DrBTs.jpg?s=128&g=1", "display_name": "coatless", "link": "https://stackoverflow.com/users/1345455/coatless"}, "reply_to_user": {"reputation": 1692, "user_id": 2072412, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5d094df2435465f1adf35aab0825e1dd?s=128&d=identicon&r=PG", "display_name": "hejseb", "link": "https://stackoverflow.com/users/2072412/hejseb"}, "edited": false, "score": 0, "creation_date": 1524191192, "post_id": 49902369, "comment_id": 86881699, "body": "In the case of needing references, you can use <code>arma::vec&amp; tau</code> and save a value into <code>tau2</code> via <code>tau2(0) = R::gamma(1, ...)</code>. In the future, consider making a bit more complete scenario."}, {"owner": {"reputation": 1692, "user_id": 2072412, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5d094df2435465f1adf35aab0825e1dd?s=128&d=identicon&r=PG", "display_name": "hejseb", "link": "https://stackoverflow.com/users/2072412/hejseb"}, "edited": false, "score": 0, "creation_date": 1524202175, "post_id": 49902369, "comment_id": 86884642, "body": "You&#39;re right in that I should&#39;ve been clear about wanting to use references from the beginning. Your suggestion illustrates the problem: changing to <code>tau2(0)</code> doesn&#39;t fix the issue (code doesn&#39;t run), but letting <code>tau2</code> be a double fixes it. I had managed to remove the problem before my post, which is why I asked about an explanation rather than a fix. As you and Dirk made quite obvious, my code isn&#39;t great. But my thinking was that if I don&#39;t understand <i>why</i> switching to <code>double</code> fixes the problem, I will probably make the same mistake again. Which would mean bothering you guys again..."}], "tags": [], "owner": {"reputation": 17516, "user_id": 1345455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DrBTs.jpg?s=128&g=1", "display_name": "coatless", "link": "https://stackoverflow.com/users/1345455/coatless"}, "is_accepted": false, "score": 2, "last_activity_date": 1524061827, "creation_date": 1524061827, "answer_id": 49902369, "question_id": 49901812, "link": "https://stackoverflow.com/questions/49901812/understanding-strange-behavior-in-rcpp/49902369#49902369", "title": "Understanding strange behavior in Rcpp", "body": "<p>Two fixes: </p>\n\n<ol>\n<li><code>tau2</code> is a double (mimic @dirkeddelbuettel here)</li>\n<li>Temporary variable for the <code>NumericVector</code> of length <em>n</em> being generated prior to saving into <code>bet</code></li>\n</ol>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;RcppArmadillo.h&gt;\n// [[Rcpp::depends(RcppArmadillo)]]\n\n// [[Rcpp::export]]\nRcpp::List foo(double tau2, const arma::vec &amp; nu) {\n\n  int n = nu.n_elem;\n\n  Rcpp::NumericVector x = Rcpp::rnorm(n);\n  arma::vec bet = arma::vec(x.begin(), n, true, false);\n\n  tau2 = R::rgamma(1, arma::as_scalar(sum(pow(bet, 2) / nu)));\n\n  return Rcpp::List::create(Rcpp::Named(\"nu\") = nu,\n                            Rcpp::Named(\"tau2\") = tau2);\n}\n</code></pre>\n\n<p>Test case:</p>\n\n<pre><code>n &lt;- 3\nm &lt;- matrix(0, n, 1)\nfor (r in 1:1000) {\n  tau2 &lt;- 1.0\n  nu &lt;- matrix(1, n, 1)\n  upd &lt;- foo(tau2, nu)\n}\nupd\n#&gt; $nu\n#&gt;      [,1]\n#&gt; [1,]    1\n#&gt; [2,]    1\n#&gt; [3,]    1\n#&gt; \n#&gt; $tau2\n#&gt; [1] 3.292889\n</code></pre>\n"}], "owner": {"reputation": 1692, "user_id": 2072412, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5d094df2435465f1adf35aab0825e1dd?s=128&d=identicon&r=PG", "display_name": "hejseb", "link": "https://stackoverflow.com/users/2072412/hejseb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1524118066, "creation_date": 1524060284, "last_edit_date": 1524118066, "question_id": 49901812, "link": "https://stackoverflow.com/questions/49901812/understanding-strange-behavior-in-rcpp", "title": "Understanding strange behavior in Rcpp", "body": "<p>I have run into something I cannot wrap my head around. It's part of a larger coding effort, but a minimal example is here:</p>\n\n<pre><code>#include &lt;RcppArmadillo.h&gt;\n// [[Rcpp::depends(RcppArmadillo)]]\n// [[Rcpp::export]]\nRcpp::List foo(arma::vec &amp; tau2, const arma::vec &amp; nu) {\n\n  arma::vec bet = Rcpp::rnorm(3);\n  tau2 = R::rgamma(1, arma::as_scalar(sum(pow(bet, 2)/nu)));\n\n  return Rcpp::List::create(Rcpp::Named(\"nu\") = nu,\n                            Rcpp::Named(\"tau2\") = tau2);\n}\n</code></pre>\n\n<p>(<code>tau2</code>, although a scalar, is a vector here because I want to pass by reference: <a href=\"https://stackoverflow.com/questions/44047145/function-pass-by-reference-in-rcpparmadillo\">function pass by reference in RcppArmadillo</a>) </p>\n\n<p>What is puzzling me is that if I now run the following R code:</p>\n\n<pre><code>n &lt;- 3\nm &lt;- matrix(0, n, 1)\nfor (r in 1:1000) {\n  tau2 &lt;- 1.0\n  nu &lt;- matrix(1, n, 1)\n  upd &lt;- foo(tau2, nu)\n}\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>error: element-wise division: incompatible matrix dimensions: 3x1 and 18x1\nError in foo(tau2, nu) : \n  element-wise division: incompatible matrix dimensions: 3x1 and 18x1\n</code></pre>\n\n<p>where the <code>18x1</code> varies; mostly it's <code>0x1</code> but it's always a multiple of <code>3</code>. </p>\n\n<p>Looking at the output:</p>\n\n<pre><code>&gt; nu\n         [,1]     [,2]     [,3]     [,4]\n[1,] 4.165242 4.165242 4.165242 4.165242\n[2,] 4.165242 4.165242 4.165242 4.165242\n[3,] 4.165242 4.165242 4.165242 4.165242\n&gt; upd\n$nu\n     [,1]\n[1,]    1\n[2,]    1\n[3,]    1\n\n$tau2\n         [,1]\n[1,] 4.165242\n</code></pre>\n\n<p>That is, despite declaring <code>nu</code> as a constant reference (which I do because I do <em>not</em> want it changed), it is altered. The value it is filled with is <code>upd$tau2</code> (but why?).</p>\n\n<p>Strangely, I can make the behavior go away by seemingly meaningless changes by:</p>\n\n<ul>\n<li>putting <code>tau2 &lt;- 1.0</code> or <code>nu &lt;- matrix(1, n, 1)</code> (or both) outside of the loop</li>\n<li>removing the reference in the first argument (i.e. using <code>arma::vec tau2</code>)</li>\n<li>not dividing <code>pow(bet, 2)</code> by <code>nu</code></li>\n<li>changing to <code>nu &lt;- rep(1, n)</code></li>\n</ul>\n\n<p>Perhaps the most confusing part is that if I select the code chunk inside of the loop and repeatedly run it, it works(!). However, if I run the R code using the loop it crashes on the second iteration.</p>\n\n<p>Because I seem to be able to fix the problem, I'm mostly interested in learning what is going on here. I suspect it's just a consequence of my lack of expertise in C++ and recklessness with various variable types, so knowing what is causing all of this would be very valuable.</p>\n"}, {"tags": ["c++", "c++14"], "comments": [{"owner": {"reputation": 706, "user_id": 4070330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de272559ba2ec727fe9b3108afa222f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kashpur", "link": "https://stackoverflow.com/users/4070330/andrew-kashpur"}, "edited": false, "score": 2, "creation_date": 1524060905, "post_id": 49901791, "comment_id": 86819368, "body": "can you cache variables using get_var right after initializing script language?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2176127"}, "edited": false, "score": 0, "creation_date": 1524062391, "post_id": 49901791, "comment_id": 86820556, "body": "maybe an <code>std::map</code> could do the trick"}, {"owner": {"reputation": 3560, "user_id": 1303846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG", "display_name": "Remember Monica", "link": "https://stackoverflow.com/users/1303846/remember-monica"}, "reply_to_user": {"reputation": 706, "user_id": 4070330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de272559ba2ec727fe9b3108afa222f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kashpur", "link": "https://stackoverflow.com/users/4070330/andrew-kashpur"}, "edited": false, "score": 0, "creation_date": 1524070363, "post_id": 49901791, "comment_id": 86825978, "body": "@AndrewKashpur if you mean whether the handle returned by get_var stays valid indefinitely, the answer is yes for this example. The problem is that get_var cannot be called at program initialisation, otherwise the consstructor could simply call it."}, {"owner": {"reputation": 3560, "user_id": 1303846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG", "display_name": "Remember Monica", "link": "https://stackoverflow.com/users/1303846/remember-monica"}, "edited": false, "score": 0, "creation_date": 1524070790, "post_id": 49901791, "comment_id": 86826213, "body": "@user2176127 a std::map can&#39;t be used at compile time, can it?"}, {"owner": {"reputation": 1574, "user_id": 6172310, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T2-U1BpQmAw/AAAAAAAAAAI/AAAAAAAABXE/ZiY6MpBP3ek/photo.jpg?sz=128", "display_name": "Andreas H.", "link": "https://stackoverflow.com/users/6172310/andreas-h"}, "edited": false, "score": 0, "creation_date": 1524088761, "post_id": 49901791, "comment_id": 86835217, "body": "Your problem could be solved by &#39;reflection&#39; but stupid C++ does not currently offer this functionality."}], "answers": [{"comments": [{"owner": {"reputation": 3560, "user_id": 1303846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG", "display_name": "Remember Monica", "link": "https://stackoverflow.com/users/1303846/remember-monica"}, "edited": false, "score": 0, "creation_date": 1524070265, "post_id": 49902023, "comment_id": 86825917, "body": "These are nice alternatives, but none of them compute the list at compile time - the first few require me to do the job manually, the last is at runtime. I will try to improve m,y question in the hope that it becomes clearer."}, {"owner": {"reputation": 1574, "user_id": 6172310, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T2-U1BpQmAw/AAAAAAAAAAI/AAAAAAAABXE/ZiY6MpBP3ek/photo.jpg?sz=128", "display_name": "Andreas H.", "link": "https://stackoverflow.com/users/6172310/andreas-h"}, "reply_to_user": {"reputation": 3560, "user_id": 1303846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG", "display_name": "Remember Monica", "link": "https://stackoverflow.com/users/1303846/remember-monica"}, "edited": false, "score": 1, "creation_date": 1524089073, "post_id": 49902023, "comment_id": 86835322, "body": "I think what you really need is some kind of preprocessor which offers some reflection functionality. I&#39;m afraid this can&#39;t be done with standard c++ at least until C++20 (see <a href=\"https://www.meetingcpp.com/blog/items/reflections-on-the-reflection-proposals.html\" rel=\"nofollow noreferrer\">meetingcpp.com/blog/items/&hellip;</a>)"}], "tags": [], "owner": {"reputation": 1574, "user_id": 6172310, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T2-U1BpQmAw/AAAAAAAAAAI/AAAAAAAABXE/ZiY6MpBP3ek/photo.jpg?sz=128", "display_name": "Andreas H.", "link": "https://stackoverflow.com/users/6172310/andreas-h"}, "is_accepted": false, "score": 1, "last_activity_date": 1524062642, "last_edit_date": 1524062642, "creation_date": 1524060885, "answer_id": 49902023, "question_id": 49901791, "link": "https://stackoverflow.com/questions/49901791/incrementally-build-vector-of-variable-pointers-at-compile-time/49902023#49902023", "title": "Incrementally build vector of variable pointers at compile time", "body": "<p>I am not completly sure if I understand you question, but why not simply use classic old arrays:</p>\n\n<pre><code>static int var1;\nstatic int var2;\nstatic int var3;\n\nstatic int* vars[] = { &amp;var1, &amp;var2, &amp;var3, nullptr };\n\nfor(size_t i = 0; vars[i]; ++i)\n    std::cout &lt;&lt; *vars[i] &lt;&lt; std::endl;\n</code></pre>\n\n<p>This should work for all data types and it is guaranteed to happen at compile time.</p>\n\n<p>The following version is also built at compile time (at least in Visual C++ 2017):</p>\n\n<pre><code>static const auto vararr = std::array&lt;int*, 3&gt;{ &amp;var1, &amp;var2, &amp;var3 };\n</code></pre>\n\n<p>The same can be done for you scriptvarwrapper:</p>\n\n<pre><code>struct scriptvarwrapper\n{\n    scriptvar *handle;\n    const char *name;\n};\n\nstatic scriptvarwrapper vars[] = {\n    {nullptr, \"var1\"},\n    {nullptr, \"var2\"},\n    {nullptr, nullptr}\n};\n\nvoid init_vars()\n{\n    for (size_t i = 0; vars[i].name; ++i)\n        vars[i].handle = get_var(vars[i].name);\n}\n</code></pre>\n\n<p>In C++ the script variable 'var1' can be accessed by vars[0].handle and 'var2' is in vars[1].handle. </p>\n\n<p>Maybe you'd prefer the following solution:</p>\n\n<pre><code>struct scriptvarwrapper\n{\n    scriptvar **handle;\n    const char *name;\n};\n\nstatic scriptvar *var1 = nullptr;\nstatic scriptvar *var2 = nullptr;\n\nstatic scriptvarwrapper vars[] = {\n    { &amp;var1, \"var1\"},\n    { &amp;var2, \"var2\"},\n    {nullptr, nullptr}\n};\n\nvoid init_vars()\n{\n    for (size_t i = 0; vars[i].name; ++i)\n        *vars[i].handle = get_var(vars[i].name);\n}\n</code></pre>\n\n<p>var1 and var2 as scriptvars, initialized to nullptr and added to a compile time array 'vars' using the 'scriptvarwrapper'. In 'init_vars' the scriptvars are initialized and can then be used by accessing 'var1' and 'var2' (without even knowing of the compile time array used for initializing them)</p>\n\n<p>A non-compile-time but simple-to-use solution:</p>\n\n<pre><code>class ScriptVar\n{\npublic:\n    ScriptVar(const char *name_)\n        : name(name_)\n    {\n        vars.insert(this);\n    }\n\n    scriptvar* operator-&gt;()\n    {\n        return handle;\n    }\n\n    static void initVars()\n    {\n        for (auto var : vars)\n            var-&gt;handle = get_var(var-&gt;name);\n    }\n\nprivate:\n    static std::set&lt;ScriptVar*&gt; vars;\n    const char *name;\n    scriptvar *handle;\n};\n\nconst ScriptVar var1(\"namespace::var1\");\nconst ScriptVar var2(\"namespace::var2\");\n</code></pre>\n\n<p>Each defined ScriptVar is registered in ScriptVar::vars and after calling ScriptVar::initVars() all defined ScriptVars can be accessed with the -> operator.</p>\n"}], "owner": {"reputation": 3560, "user_id": 1303846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG", "display_name": "Remember Monica", "link": "https://stackoverflow.com/users/1303846/remember-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524072509, "creation_date": 1524060215, "last_edit_date": 1524072509, "question_id": 49901791, "link": "https://stackoverflow.com/questions/49901791/incrementally-build-vector-of-variable-pointers-at-compile-time", "title": "Incrementally build vector of variable pointers at compile time", "body": "<p>I am trying to solve a problem where I have a number of scattered variable declarations (in a single compilation unit), and I want to build a vector of their addresses at compile time (if not possible as a space efficient vector, other data structures would work as well, such as a linked list).</p>\n\n<pre><code>static type var1;\nstatic type var2;\nstatic type var3;\n\n// ...\nfor (type *i : varlist)\n   do something with each varX\n</code></pre>\n\n<p>As an expanded example and rationale, assume I have a scripting language, and I have a way to modify script variables from C++ by getting a handle, say <code>scriptvar *</code>. These handles can be found by calling a <code>get_var</code> function with a name:</p>\n\n<pre><code>scriptvar *var1 = get_var (\"namespace::var1\");\nscriptvar *var2 = get_var (\"namespace::var2\");\n</code></pre>\n\n<p>This is slow, so I wish to cache the <code>scriptvar *</code> values in global variables. Unfortunately, I must only call <code>get_var</code> after initialising the script language, which might happen late in the program, so I cannot just use <code>get_var</code> in an initializer expression, but have to delay calling it.</p>\n\n<p>It would be nice if I could write a <code>scriptvarwrapper</code> class or use some other means that would allow me to declare these global handle variables at any point, but also built a space-efficient vector of these vairables at compile time that I can access later:</p>\n\n<pre><code>struct scriptvarwrapper\n{\n  scriptvar *handle;\n  const char *name;\n  / ...\n};\n\nstatic scriptvarwrapper var1 (\"namespace::var1\");\nstatic scriptvarwrapper var2 (\"namespace::var2\");\nstatic scriptvarwrapper var3 (\"namespace::var3\");\n\nvoid init_vars ()\n{\n  for (scriptvarwrapper *i : somecontainer)\n     i-&gt;handle = get_var (i-&gt;name);\n}\n</code></pre>\n\n<p>It would be ideal if this container would end up being just an array/vector-like data structure in memory that consists of the pointers to these variables. Obviously, the goal is to build this at compile time, so solutions putting something into a <code>std::vector</code> in the constructor would not solve the problem.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>To clarify the problem - what I want is a solution that automatically compiles an array or list of all these declared variables at compile time, without me having to list them individually and without a constructor building a list dynamically at runtime, presumably through some cool and nifty metaprogramming method, such as a constexpr function that somehow chains all these vairables together in a list or, preferably, something that results in just an array of pointers to all scriptvarwrapper objects in memory, either terminated with a special value or with known size.</p>\n\n<p>Specifically, having to put the scriptvarwrapper objects into a static array manually will not do, nor will putting them into a std::vector in their constructor suffice.</p>\n\n<p>The rationale for this is maintainability - if I add a variable anywhere in my program, I do not want to have to list it separately again because that is easy to forget - and efficiency - I do not want to build a dynamic data structure at runtime for what is, effectively, a constant known at compiletime.</p>\n\n<p>The preference for some kind of array is due to efficiency - a solution that results in a 100 byte structure for each such object at compiletime is of course not very useful, likewise would be allocating a very large array just for future expansion.</p>\n\n<p><strong>Update 2:</strong></p>\n\n<p>To clarify further, the exact syntax and layout and type of the storage is not that important. What is important is that I can have a number of independent and scattered-through-the-file(s) variable declarations and their addresses are automatically and without manual enumeration put into some kind of read-only container that can somehow be iterated over at runtime to find all these declarations.</p>\n\n<p>The goal is to efficiently find all those variables without the possibility of me forgetting to list one separately, nor to have to build data structures dynamically at runtime, since the information is all known at compile time, and C++ is such a cool language with compile time metaprogramming. Alas, I don't know how or if it even is possible.</p>\n\n<p><strong>Update 3:</strong></p>\n\n<p>Sorry for all these updates, I am learning how difficult it is to express this problem. Here is an example of how things could look like:</p>\n\n<pre><code>static scriptvarwrapper var1 (\"name\");\nADD_LIST (var1); // magic macro\n\nstatic scriptvarwrapper var2 (\"name\");\nADD_LIST (var2);\n</code></pre>\n\n<p>The key here is that, although I have to list each variable and even use an ugly macro maybe, it is hard to overlook or forget to list a variable because the <code>ADD_LIST</code> is directly at the place of the declaration - remember, the declarations might be scattered all over a long file, or even in some include files, so I am looking for a solution that makes it hard to forget to include a declaration in my list.</p>\n\n<p>Ideally, therefore, the constructor or the mere act of declaring a <code>scriptvarwrapper</code> would make sure its listed, so it can't be overlooked. A solution that puts everything in a <code>std::vector</code> in the constructor would work, except would feel ugly due to the runtime overhead.</p>\n\n<p>As an old C hand that I am, I considered using GCC extensions to put these into their own ELF section, much like constructors themselves work on ELF systems - they are gathered by pointer into their own section, and all such sections are concatenated at link time, with a special object file at the end that delivers the sentinel end value.</p>\n"}, {"tags": ["c++", "matrix"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1524060774, "post_id": 49901744, "comment_id": 86819259, "body": "<i>&quot;Here is what I have been don so far&quot;</i> And? Does it work? Presumably not, so what is the problem? It&#39;s unclear what you&#39;re asking."}, {"owner": {"reputation": 11, "user_id": 8007995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1434bdbf718569bf20f0550c6393f2a3?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/8007995/adam"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1524061476, "post_id": 49901744, "comment_id": 86819824, "body": "It is reading the first 9 numbers in the file. For example the input file is : First line : 1 2  3 4 5 6 7 8 9  Second Line: 10 11 12 13 14 15 16 17 18 and I want to read only: 1 2 3  10 11 12 . The program I wrote read 1 2  3 4 5 6 7 8 9."}, {"owner": {"reputation": 11, "user_id": 8007995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1434bdbf718569bf20f0550c6393f2a3?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/8007995/adam"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1524061536, "post_id": 49901744, "comment_id": 86819877, "body": "I don&#39;t want to read the whole line of numbers in the first row."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1524061603, "post_id": 49901744, "comment_id": 86819934, "body": "That&#39;s good info! Please <a href=\"https://stackoverflow.com/posts/49901744/edit\">edit</a> your question to contain that, rather than putting it in comments."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1524071174, "post_id": 49901744, "comment_id": 86826417, "body": "Take a look at option 2 of this answer: <a href=\"https://stackoverflow.com/a/7868998/4581301\">stackoverflow.com/a/7868998/4581301</a> . Basically, try to read a line. Place line into <code>stringstream</code>. Read <code>NCOLS</code> values from <code>stringstream</code>. Repeat until you either can&#39;t read a line (file too short) or you&#39;ve read <code>NROWS</code> lines."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8007995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1434bdbf718569bf20f0550c6393f2a3?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/8007995/adam"}, "edited": false, "score": 0, "creation_date": 1524061770, "post_id": 49901879, "comment_id": 86820050, "body": "This command std::getline(data, skip); doesn&#39;t work. The output now are all 0&#39;s."}, {"owner": {"reputation": 11, "user_id": 8007995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1434bdbf718569bf20f0550c6393f2a3?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/8007995/adam"}, "edited": false, "score": 0, "creation_date": 1524063191, "post_id": 49901879, "comment_id": 86821158, "body": "This skip like 10 rows not going to the next line."}, {"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "reply_to_user": {"reputation": 11, "user_id": 8007995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1434bdbf718569bf20f0550c6393f2a3?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/8007995/adam"}, "edited": false, "score": 0, "creation_date": 1524067550, "post_id": 49901879, "comment_id": 86824300, "body": "It can not skip 10 lines, you loop is limited by <code>NROWS</code>. You did smth wrong or your input data is not correct."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1524071589, "post_id": 49901879, "comment_id": 86826648, "body": "Rather than a <code>getline</code> (copies into <code>string</code>), consider <code>ignore(numeric_limits&lt;streamsize&gt;::max(), &#39;\\n&#39;);</code> (discards all data to end of line. No copy. No <code>string</code> resize overhead)."}], "tags": [], "owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1524060845, "last_edit_date": 1524060845, "creation_date": 1524060465, "answer_id": 49901879, "question_id": 49901744, "link": "https://stackoverflow.com/questions/49901744/read-numbers-from-file-based-on-their-position-as-matrix-in-c/49901879#49901879", "title": "Read numbers from file based on their position as matrix in c++", "body": "<p>You should skip lines after each <code>NCOLS</code> column numbers are read.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nconst int NROWS = 3;\nconst int NCOLS = 3;\nint main()\n{\n   ifstream data;\n\n   double Numbers[NROWS][NCOLS];\n\n   double Num;\n\n   data.open(\"Input.txt\");\n   for (int i = 0; i&lt;NROWS; ++i)\n   {\n       for (int j = 0; j&lt;NCOLS; ++j)\n       {\n           data &gt;&gt; Num;\n           Numbers[i][j]=Num;\n           cout &lt;&lt; Numbers[i][j] &lt;&lt; endl;\n       }\n       std::string skip;\n       std::getline(data, skip);\n   }\n   data.close();\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8007995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1434bdbf718569bf20f0550c6393f2a3?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/8007995/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524085399, "creation_date": 1524060117, "last_edit_date": 1524085399, "question_id": 49901744, "link": "https://stackoverflow.com/questions/49901744/read-numbers-from-file-based-on-their-position-as-matrix-in-c", "title": "Read numbers from file based on their position as matrix in c++", "body": "<p>I have a big file with numbers and I want to extract numbers based on their positions(row, column). For example, if I want to process only the first 3 rows and 3 columns which are 9 numbers. The program print the 9 numbers in the first row. I want to go the next line once the column index is 4. \nHow to do this in c++.\nHere is what I have been don so far:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nconst int NROWS = 3;\nconst int NCOLS = 3;\nint main()\n{\n   ifstream data;\n\n   double Numbers[NROWS][NCOLS];\n\n   double Num;\n\n   data.open(\"Input.txt\");\n   for (int i = 0; i&lt;NROWS; ++i)\n   {\n          for (int j = 0; j&lt;NCOLS; ++j)\n       {\n           data &gt;&gt; Num;\n           Numbers[i][j]=Num;\n           cout &lt;&lt; Numbers[i][j] &lt;&lt; endl;\n       }\n   }\n   data.close();\n   return 0;\n  }\n</code></pre>\n"}, {"tags": ["python", "c++", "hook", "ctypes"], "comments": [{"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1524060404, "post_id": 49901708, "comment_id": 86819011, "body": "Seems pretty straightforward: <code>byref</code> wants an argument that isn&#39;t <code>None</code>.  The <a href=\"https://docs.python.org/3/library/ctypes.html#ctypes.byref\" rel=\"nofollow noreferrer\">docs</a> are pretty clear on this point: &quot;must be an instance of a ctypes type&quot;.  <code>None</code> is not an instance of a ctypes type."}, {"owner": {"reputation": 478, "user_id": 2441776, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/95fa29a97504ac88c5c2e495bfe1f885?s=128&d=identicon&r=PG&f=1", "display_name": "Elia Iliashenko", "link": "https://stackoverflow.com/users/2441776/elia-iliashenko"}, "reply_to_user": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 1, "creation_date": 1524062330, "post_id": 49901708, "comment_id": 86820503, "body": "If it was straightforward, I would guess what I should put there instead of byref. What does it expect?"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1524071874, "post_id": 49901708, "comment_id": 86826810, "body": "Add <code>MH_CreateHook</code>&#39;s signature. And also always specify which line of code generates an error (even though in this case it&#39;s obvious). Also try to avoid having &quot;undefined&quot; stuff like <code>cmp_func</code> (This is also known as <a href=\"https://stackoverflow.com/help/mcve\">&#91;SO&#93;: How to create a Minimal, Complete, and Verifiable example (mcve)</a>)."}, {"owner": {"reputation": 7154, "user_id": 1470749, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wyXz0.jpg?s=128&g=1", "display_name": "101", "link": "https://stackoverflow.com/users/1470749/101"}, "edited": false, "score": 1, "creation_date": 1524102079, "post_id": 49901708, "comment_id": 86838732, "body": "Try passing <code>None</code> (without <code>byref</code>) or <code>POINTER(c_long)()</code> directly."}, {"owner": {"reputation": 478, "user_id": 2441776, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/95fa29a97504ac88c5c2e495bfe1f885?s=128&d=identicon&r=PG&f=1", "display_name": "Elia Iliashenko", "link": "https://stackoverflow.com/users/2441776/elia-iliashenko"}, "reply_to_user": {"reputation": 7154, "user_id": 1470749, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wyXz0.jpg?s=128&g=1", "display_name": "101", "link": "https://stackoverflow.com/users/1470749/101"}, "edited": false, "score": 0, "creation_date": 1524242277, "post_id": 49901708, "comment_id": 86908757, "body": "@101 this doesn&#39;t work.     hook = minHook.MH_CreateHook(hkprcSysMsg, _callback_pointer(callback), POINTER(c_long)()) ValueError: Procedure called with not enough arguments (12 bytes missing) or wrong calling convention"}], "owner": {"reputation": 478, "user_id": 2441776, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/95fa29a97504ac88c5c2e495bfe1f885?s=128&d=identicon&r=PG&f=1", "display_name": "Elia Iliashenko", "link": "https://stackoverflow.com/users/2441776/elia-iliashenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 346, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1524480931, "creation_date": 1524060058, "last_edit_date": 1524480931, "question_id": 49901708, "link": "https://stackoverflow.com/questions/49901708/void-pointer-in-a-function-with-ctypes", "title": "Void pointer in a function with ctypes", "body": "<p>I need to use <a href=\"https://www.codeproject.com/Articles/44326/MinHook-The-Minimalistic-x-x-API-Hooking-Libra\" rel=\"nofollow noreferrer\">minHook.dll</a> for my project.\nThe example provided seems straightforward, but I cannot get it to work.\nI don't understand this part:</p>\n\n<pre><code>MESSAGEBOXW fpMessageBoxW = NULL;\n\n// Create a hook for MessageBoxW, in disabled state.\nif (MH_CreateHook(&amp;MessageBoxW, &amp;DetourMessageBoxW, \n    reinterpret_cast&lt;LPVOID*&gt;(&amp;fpMessageBoxW)) != MH_OK)\n{\n    return 1;\n}\n</code></pre>\n\n<p>Here's my Python code (adapted for the function I need to hook):</p>\n\n<pre><code>def _callback_pointer(handler):\n    \"\"\"Create and return C-pointer\"\"\"\n    print('handler=',cmp_func(handler))\n    return cmp_func(handler)\n\ndef callback(*args, **kwargs):\n    print(args, kwargs)\n    res = windll.user32.CallNextHookEx(*args, **kwargs)\n    print(res)\n    return res\ncmp_func = CFUNCTYPE(c_int, c_int, wintypes.HINSTANCE, POINTER(c_void_p))\nhinstDLL = ctypes.windll.LoadLibrary('Gdi32')._handle\nhkprcSysMsg = ctypes.windll.kernel32.GetProcAddress(hinstDLL, \"TextOutW\".encode(encoding='ascii'))\nminHook = ctypes.cdll.LoadLibrary('lib/minHook.dll')\nminHook.MH_Initialize()\norig_fp = None\nminHook.MH_CreateHook(hkprcSysMsg, _callback_pointer(callback), byref(orig_fp))\n</code></pre>\n\n<p>It ends up with an error:</p>\n\n<blockquote>\n  <p>TypeError: byref() argument must be a ctypes instance, not 'NoneType'</p>\n</blockquote>\n\n<p>What should I do to at least make <code>MH_CreateHook</code> return <code>1</code>?</p>\n\n<p><strong>UPDATE:</strong> Here is <code>MH_CreateHook</code> signature:</p>\n\n<pre><code>MH_STATUS WINAPI MH_CreateHook(LPVOID pTarget, LPVOID pDetour, LPVOID *ppOriginal)\n</code></pre>\n"}, {"tags": ["python", "c++", "tensorflow", "keras"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1524060483, "post_id": 49901661, "comment_id": 86819068, "body": "Floating point unreliabilities maybe? I don&#39;t know which parts in there differ, but depending on what &quot;slightly different&quot; means, it sounds like your parsing/math/rounding could introduce slight differences for different floating point handling."}, {"owner": {"reputation": 586, "user_id": 3016483, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/jFQDy.jpg?s=128&g=1", "display_name": "Illuminati0x5B", "link": "https://stackoverflow.com/users/3016483/illuminati0x5b"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1524063144, "post_id": 49901661, "comment_id": 86821119, "body": "@MaxLanghof That&#39;s what I thought. But sometimes, result vary more than 40%. Python does use tensorflow C++ api. Shouldn&#39;t the floating point error be the same?"}, {"owner": {"reputation": 4957, "user_id": 2230844, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1b0e722a4823f29c56d7a97bc6500ccc?s=128&d=identicon&r=PG", "display_name": "denfromufa", "link": "https://stackoverflow.com/users/2230844/denfromufa"}, "edited": false, "score": 0, "creation_date": 1524235601, "post_id": 49901661, "comment_id": 86904780, "body": "where is your keras model?"}, {"owner": {"reputation": 586, "user_id": 3016483, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/jFQDy.jpg?s=128&g=1", "display_name": "Illuminati0x5B", "link": "https://stackoverflow.com/users/3016483/illuminati0x5b"}, "reply_to_user": {"reputation": 4957, "user_id": 2230844, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1b0e722a4823f29c56d7a97bc6500ccc?s=128&d=identicon&r=PG", "display_name": "denfromufa", "link": "https://stackoverflow.com/users/2230844/denfromufa"}, "edited": false, "score": 0, "creation_date": 1524247881, "post_id": 49901661, "comment_id": 86911592, "body": "@denfromufa I converted my keras model to .pb file. (&quot;graph.pb&quot;)"}, {"owner": {"reputation": 4957, "user_id": 2230844, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1b0e722a4823f29c56d7a97bc6500ccc?s=128&d=identicon&r=PG", "display_name": "denfromufa", "link": "https://stackoverflow.com/users/2230844/denfromufa"}, "edited": false, "score": 0, "creation_date": 1524257734, "post_id": 49901661, "comment_id": 86915768, "body": "then your example is not reproducible"}, {"owner": {"reputation": 586, "user_id": 3016483, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/jFQDy.jpg?s=128&g=1", "display_name": "Illuminati0x5B", "link": "https://stackoverflow.com/users/3016483/illuminati0x5b"}, "reply_to_user": {"reputation": 4957, "user_id": 2230844, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1b0e722a4823f29c56d7a97bc6500ccc?s=128&d=identicon&r=PG", "display_name": "denfromufa", "link": "https://stackoverflow.com/users/2230844/denfromufa"}, "edited": false, "score": 0, "creation_date": 1524494659, "post_id": 49901661, "comment_id": 86984022, "body": "@denfromufa Why? The weights are the same."}], "answers": [{"comments": [{"owner": {"reputation": 586, "user_id": 3016483, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/jFQDy.jpg?s=128&g=1", "display_name": "Illuminati0x5B", "link": "https://stackoverflow.com/users/3016483/illuminati0x5b"}, "edited": false, "score": 0, "creation_date": 1524677605, "post_id": 49977878, "comment_id": 87072516, "body": "Thank you. Resizing image was the problem."}], "tags": [], "owner": {"reputation": 1061, "user_id": 6280540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b6eb7772d196c098862678ef5ca8ab2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel GL", "link": "https://stackoverflow.com/users/6280540/daniel-gl"}, "is_accepted": true, "score": 2, "last_activity_date": 1524476472, "creation_date": 1524476472, "answer_id": 49977878, "question_id": 49901661, "link": "https://stackoverflow.com/questions/49901661/tensorflow-c-inference-result-is-slightly-different-from-keras-inference/49977878#49977878", "title": "Tensorflow C++ inference result is slightly different from Keras inference", "body": "<p>I would guess that the error does not come from the execution of the graph but on the preprocessing you do on the image. For me the candidate is <code>ops::ResizeBilinear</code>, each library has a slightly different implementation of the bilinear interpolation so you might expect differences between tensorflow and keras.</p>\n\n<p>Try to evaluate the difference using an image of the correct size in both systems, so you can avoid the interpolation. As an example, I had to reimplement my own C++ interpolation to be as close as possible to the one i had use in python. </p>\n"}], "owner": {"reputation": 586, "user_id": 3016483, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/jFQDy.jpg?s=128&g=1", "display_name": "Illuminati0x5B", "link": "https://stackoverflow.com/users/3016483/illuminati0x5b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 693, "favorite_count": 0, "accepted_answer_id": 49977878, "answer_count": 1, "score": 3, "last_activity_date": 1524476472, "creation_date": 1524059920, "question_id": 49901661, "link": "https://stackoverflow.com/questions/49901661/tensorflow-c-inference-result-is-slightly-different-from-keras-inference", "title": "Tensorflow C++ inference result is slightly different from Keras inference", "body": "<p>I trained my model in Keras and I converted it to tensorflow model for inference using C++ (I didn't quantize). My inference code in C++ is straight forward. </p>\n\n<p>I read image directly from file. I perform Decode png, resize and normalize operations using the following functions.</p>\n\n<pre><code>static Status ReadFile(Env *oEnv, const string &amp;sFileName, Tensor *output)\n{\n    uint64 nFileSize = 0;\n    TF_RETURN_IF_ERROR(oEnv-&gt;GetFileSize(sFileName, &amp;nFileSize));\n\n    string oFile;\n    oFile.resize(nFileSize);\n\n    std::unique_ptr&lt;RandomAccessFile&gt; oFileAccess;\n    TF_RETURN_IF_ERROR(oEnv-&gt;NewRandomAccessFile(sFileName, &amp;oFileAccess));\n\n    StringPiece oData;\n    TF_RETURN_IF_ERROR(oFileAccess-&gt;Read(0, nFileSize, &amp;oData, &amp;(oFile)[0]));\n\n    output-&gt;scalar&lt;string&gt;()() = oData.ToString();\n    return Status::OK();\n\n}\n\n//Reads a PNG image and converts it to a tensor of specified size.\nStatus ReadImageFromFile(const string &amp;sFileName, const int nWidth, const int nHeight, const float fMean, const float fScale, std::vector&lt;Tensor&gt; *oTensor)\n{\n    Tensor oTInput(DT_STRING, TensorShape());\n    TF_RETURN_IF_ERROR(ReadFile(Env::Default(), sFileName, &amp;oTInput));\n\n\n    auto oTRoot = Scope::NewRootScope();\n    auto oInput = ops::Placeholder(oTRoot.WithOpName(\"input\"), DT_STRING);\n    std::vector&lt;std::pair&lt;string, Tensor&gt;&gt; oInputs = { {\"input\",oTInput} };\n\n    Output oOpImgRead = ops::DecodePng(oTRoot.WithOpName(\"png_file\"), oInput, ops::DecodePng::Channels(3));\n    auto oTFloatConv = ops::Cast(oTRoot.WithOpName(\"float_conv\"), oOpImgRead, DT_FLOAT);\n    auto oDimExpand = ops::ExpandDims(oTRoot, oTFloatConv, 0);\n    auto oResize = ops::ResizeBilinear(oTRoot, oDimExpand, ops::Const(oTRoot.WithOpName(\"size\"), { nHeight, nWidth }));\n    auto oMeanSub = ops::Sub(oTRoot, oResize, { fMean });\n    auto oScale = ops::Div(oTRoot.WithOpName(\"output\"), oMeanSub, { fScale });\n\n    GraphDef oGraph;\n    TF_RETURN_IF_ERROR(oTRoot.ToGraphDef(&amp;oGraph));\n\n    Session *oSess;\n    NewSession(SessionOptions(), &amp;oSess);\n    TF_RETURN_IF_ERROR(oSess-&gt;Create(oGraph));\n    TF_RETURN_IF_ERROR(oSess-&gt;Run({ oInputs }, { \"output\" }, {}, oTensor));\n    return Status::OK();\n}\n</code></pre>\n\n<p>Then I perform inference using the following code.</p>\n\n<pre><code>GraphDef oGraphDef;\noStatus = ReadBinaryProto(Env::Default(), \"models/graph.pb\", &amp;oGraphDef);\nif (!oStatus.ok())\n{\n    std::cout &lt;&lt; oStatus.ToString() &lt;&lt; std::endl;\n    getchar();\n    return -1;\n}\nstd::cout &lt;&lt; \"Graph read\\n\";\n\nstd::vector&lt;Tensor&gt; oInputTensors;\n\noStatus = ReadImageFromFile(\"temp.png\", 224, 224, 127.5, 255.0, &amp;oInputTensors);\nif (!oStatus.ok())\n{\n    std::cout &lt;&lt; oStatus.ToString() &lt;&lt; std::endl;\n    getchar();\n    return -1;\n}\nstd::cout &lt;&lt; \"Input image read\\n\";\n//Create Session\nSession *oSess;\noStatus = NewSession(SessionOptions(), &amp;oSess);\nif (!oStatus.ok())\n{\n    std::cout &lt;&lt; oStatus.ToString() &lt;&lt; std::endl;\n    getchar();\n    return -1;\n}\noStatus = oSess-&gt;Create(oGraphDef);\nif (!oStatus.ok())\n{\n    std::cout &lt;&lt; oStatus.ToString() &lt;&lt; std::endl;\n    getchar();\n    return -1;\n}\nstd::vector&lt;Tensor&gt; oOutputs;\noStatus = oSess-&gt;Run({ { \"input_input\",oInputTensors[0] } }, { \"activation_output/Relu\" }, {}, &amp;oOutputs);\nif (!oStatus.ok())\n{\n    std::cout &lt;&lt; oStatus.ToString() &lt;&lt; std::endl;\n    getchar();\n    return -1;\n}\n</code></pre>\n\n<p>Am I missing something?</p>\n"}, {"tags": ["android", "c++", "java-native-interface"], "comments": [{"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1524065157, "post_id": 49901602, "comment_id": 86822691, "body": "Does the app crash if you only add the new native method to your Java and C++ files, but don&#39;t call it?"}, {"owner": {"reputation": 9667, "user_id": 4675736, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/yXNEM.jpg?s=128&g=1", "display_name": "Wai Yan Hein", "link": "https://stackoverflow.com/users/4675736/wai-yan-hein"}, "reply_to_user": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1524069168, "post_id": 49901602, "comment_id": 86825304, "body": "No.The app only crashes when I call that funcion."}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 1, "creation_date": 1524079308, "post_id": 49901602, "comment_id": 86830778, "body": "What if you only call the second function, not the first one? What if you remove the declaration of the first method?"}, {"owner": {"reputation": 801, "user_id": 74739, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBpz9.jpg?s=128&g=1", "display_name": "zenzelezz", "link": "https://stackoverflow.com/users/74739/zenzelezz"}, "edited": false, "score": 0, "creation_date": 1524224567, "post_id": 49901602, "comment_id": 86897464, "body": "I don&#39;t suppose there&#39;s any more info in the log if you set the error level to warning or debug?"}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 7212345, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4aoPlCVIjkQ/AAAAAAAAAAI/AAAAAAAAAEc/t85zqCFSdss/photo.jpg?sz=128", "display_name": "Ashish Gupta", "link": "https://stackoverflow.com/users/7212345/ashish-gupta"}, "is_accepted": false, "score": 1, "last_activity_date": 1568803350, "last_edit_date": 1568803350, "creation_date": 1568798683, "answer_id": 57989382, "question_id": 49901602, "link": "https://stackoverflow.com/questions/49901602/unable-to-use-multiple-functions-in-single-native-c-library-file-in-android/57989382#57989382", "title": "Unable to use multiple functions in single native C++ library file in Android", "body": "<p>I tried by doing this way and it's working:</p>\n\n<pre><code>#include &lt;jni.h&gt;\n#include &lt;string&gt;\n\nextern \"C\" JNIEXPORT jstring\n\nJNICALL\nJava_com_package_name_Keys_apiKey(JNIEnv *env, jobject object)\n{\n    std::string api_key = \"https://api.api.net\";\n    return env-&gt;NewStringUTF(api_key.c_str());\n}\n\nextern \"C\" JNIEXPORT jstring\n\nJNICALL\nJava_com_package_name_Keys_imageApiKey(JNIEnv *env, jobject object)\n{\n    std::string image_api_key = \"https://api.api.com/\";\n    return env-&gt;NewStringUTF(image_api_key.c_str());\n}\n</code></pre>\n"}], "owner": {"reputation": 9667, "user_id": 4675736, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/yXNEM.jpg?s=128&g=1", "display_name": "Wai Yan Hein", "link": "https://stackoverflow.com/users/4675736/wai-yan-hein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1568803350, "creation_date": 1524059789, "last_edit_date": 1541977395, "question_id": 49901602, "link": "https://stackoverflow.com/questions/49901602/unable-to-use-multiple-functions-in-single-native-c-library-file-in-android", "title": "Unable to use multiple functions in single native C++ library file in Android", "body": "<p>I am developing an Android application that is using C++ native library. I have integrated the c++ into my project and call the C++ function from Java through JNI successfully. But the problem is I cannot declare multiple functions in single C++ native library.</p>\n\n<p>This is my native C++ code in native-lib.cpp file</p>\n\n<pre><code>#include &lt;jni.h&gt;\n#include &lt;string&gt;\n\n#include &lt;opencv2/core/core.hpp&gt;\n#include &lt;opencv2/imgproc/imgproc.hpp&gt;\n#include &lt;opencv2/features2d/features2d.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;opencv2/highgui/highgui.hpp&gt;\n#include &lt;opencv2/stitching.hpp&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\nusing namespace cv;\n\nextern \"C\" {\nJNIEXPORT\njstring\nJava_media_memento_memento_SphereCameraActivity_stitchPhotos(\n        JNIEnv *env,\n        jobject ) {\n\n    std::string hello = \"This is the function one\";\n    return env-&gt;NewStringUTF(hello.c_str());\n}\n\n\n\n}\n</code></pre>\n\n<p>From the Java, I load the library like this</p>\n\n<pre><code>static {\n      System.loadLibrary(\"native-lib\");\n   }\n</code></pre>\n\n<p>and call the function. It was working. But I trued to add the new function to the native-lib.cpp as follow.</p>\n\n<pre><code>#include &lt;jni.h&gt;\n#include &lt;string&gt;\n\n#include &lt;opencv2/core/core.hpp&gt;\n#include &lt;opencv2/imgproc/imgproc.hpp&gt;\n#include &lt;opencv2/features2d/features2d.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;opencv2/highgui/highgui.hpp&gt;\n#include &lt;opencv2/stitching.hpp&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\nusing namespace cv;\n\nextern \"C\" {\nJNIEXPORT\njstring\nJava_media_memento_memento_SphereCameraActivity_stitchPhotos(\n        JNIEnv *env,\n        jobject ) {\n\n    std::string hello = \"This is the function one\";\n    return env-&gt;NewStringUTF(hello.c_str());\n}\n\n    JNIEXPORT\njstring\nJava_media_memento_memento_SphereCameraActivity_sayHello(\n        JNIEnv *env,\n        jobject ) {\n    std::string hello = \"Stitching the photo in C++\";\n    return env-&gt;NewStringUTF(hello.c_str());\n}\n\n}\n</code></pre>\n\n<p>As you can see, the new function is sayHello. When I run my application and call sayHello function from java, the app crashes. </p>\n\n<p>The error in the logcat seems not related to the problem at all.</p>\n\n<p><a href=\"https://i.stack.imgur.com/e7Jj3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e7Jj3.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can I solve the problem and use multiple functions in a single native c++ library file?</p>\n"}, {"tags": ["c++", "c++11", "data-structures", "c++14", "c++17"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1524059533, "post_id": 49901445, "comment_id": 86818344, "body": "Will the single member always be named the same?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1524059830, "post_id": 49901445, "comment_id": 86818577, "body": "It sounds like you want to interpret one type&#39;s <code>xy</code> member as another type&#39;s <code>xy</code>. Consider whether or not this would actually be desirable. The value of a <code>CartesianCoordinates::xy</code> doesn&#39;t mean the same thing as a value of a <code>GeographicCoordinates::xy</code> and interpreting one type&#39;s value as another type&#39;s value isn&#39;t logically consistent. The question itself is interesting, but the suggested application seems like a poor design decision."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1524060099, "post_id": 49901445, "comment_id": 86818779, "body": "It&#39;s not clear to me whether you want this example to output 5 or the longitude of the result of a logical conversion to <code>GeographicCoordinates</code>."}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 0, "creation_date": 1524211908, "post_id": 49901445, "comment_id": 86889573, "body": "I would hate to work on codebase where programmers have made such structs and then mechanically reinterpret between those. In actual reality geographical coordinate data from different external origins and/or to different external targets is different (see GEOREF, UTM, MGRS, GARS and USNG). Programmers should not add to it by making lot of dumb differently named structs that are in essence just a pair of doubles with unknown unit, accuracy and validity. Instead they should use one (and only one) real class and convert to other formats maximally close to external interfaces."}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1524066187, "post_id": 49901774, "comment_id": 86823399, "body": "You also need to add ctor from pair to the types."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1524066271, "post_id": 49901774, "comment_id": 86823482, "body": "@Yakk Why?  They are an aggregate."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 4, "last_activity_date": 1524060176, "creation_date": 1524060176, "answer_id": 49901774, "question_id": 49901445, "link": "https://stackoverflow.com/questions/49901445/allow-implicit-casting-for-types-with-the-same-underlying-structure/49901774#49901774", "title": "Allow implicit casting for types with the same underlying structure", "body": "<p>Well, as long as you don't want to transform the data in the data member, and as long as the member is always named the same thing, you can use a template conversion operator.  Then you use SFINAE to constrain the template for only types that have the named member that is the same type as the named member of the class.   Adding</p>\n\n<pre><code>template &lt;typename T, std::enable_if_t&lt;std::is_same_v&lt;std::pair&lt;double, double&gt;, decltype(std::declval&lt;T&amp;&gt;().xy)&gt;&gt;* = nullptr&gt;\noperator T() { return T{xy}; }\n</code></pre>\n\n<p>To both classes allows them to be converted to one another and allows</p>\n\n<pre><code>int main()\n{\n    getGeographicCoordinates(returnCartesian());\n}\n</code></pre>\n\n<p>to run (<a href=\"http://coliru.stacked-crooked.com/a/3e2b8c192d3808b3\" rel=\"nofollow noreferrer\">live example</a>)</p>\n\n<hr>\n\n<p>If the classes will not use the same member variable name then you could have them all surface a typedef that is named the same that is the type of the data member and use that.  That would look like</p>\n\n<pre><code>template &lt;typename T, std::enable_if_t&lt;std::is_same_v&lt;my_variable_typedef, typename T::my_variable_typedef&gt;&gt;* = nullptr&gt;\noperator T() { return T{xy}; }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "is_accepted": false, "score": 0, "last_activity_date": 1524060224, "creation_date": 1524060224, "answer_id": 49901796, "question_id": 49901445, "link": "https://stackoverflow.com/questions/49901445/allow-implicit-casting-for-types-with-the-same-underlying-structure/49901796#49901796", "title": "Allow implicit casting for types with the same underlying structure", "body": "<p>This can be solved by defining an access interface to the members.</p>\n\n<p>I would suggest you reuse the <code>get</code> idiom and define templated (on an index) <code>get</code> free functions for all the structs you want this behaviour to work on.</p>\n\n<p>Then you must define the functions that should work on all these types in a similar manner as templates, and access the members through the <code>get</code> interface.</p>\n"}, {"comments": [{"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1524136399, "post_id": 49903725, "comment_id": 86854670, "body": "Do I understand correctly that your answer looks like it blown up compared to NathanOlivier&#39;s, because he uses aggregate initialization and your answer is more general? Or am I missing something else? It&#39;s interesting to understand the difference between one-liner utility and a template glitter bomb (Sorry for the comparison, I like it but, boy, my teammates wouldn&#39;t want to maintain it.)"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1524136686, "post_id": 49903725, "comment_id": 86854876, "body": "@luk32 his requires that SFINAE conversion operator written on each leaf class and that member names match exactly.  Mine requires inheritance and the members friend function."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 0, "last_activity_date": 1524066142, "last_edit_date": 1524066142, "creation_date": 1524065774, "answer_id": 49903725, "question_id": 49901445, "link": "https://stackoverflow.com/questions/49901445/allow-implicit-casting-for-types-with-the-same-underlying-structure/49903725#49903725", "title": "Allow implicit casting for types with the same underlying structure", "body": "<p>No, not without lots of per-structure boilerplate.</p>\n\n<blockquote>\n  <p>In fact reinterpret_cast/pointers should work</p>\n</blockquote>\n\n<p>Not actually true.  You can reinterpret from struct to pair using the fact that the pair is the first element in the standard layout structure, but you can only reinterpret from pair to struct <em>if that structure type is actually there</em>.</p>\n\n<p>If an object of the structure type isn't there, the reinterpret from pair to struct is undefined behavior.</p>\n\n<p>Here is an attempt to do this in <a href=\"/questions/tagged/c%2b%2b17\" class=\"post-tag\" title=\"show questions tagged &#39;c++17&#39;\" rel=\"tag\">c++17</a> with minimal boilerplate while remaining generic.  We do inherit from an empty CRTP empty parent type to inject some friends and conversion operators.  Also, we have to add some code that exposes the members of each to the CRTP parent.</p>\n\n<pre><code>template&lt;class A, class B&gt;\nstruct tie_same;\n\ntemplate&lt;class A, class B&gt;\nusing tie_check = typename tie_same&lt;A,B&gt;::type;\n\ntemplate&lt;class D&gt;\nstruct structured {\n  friend auto as_tie( structured&lt;D&gt;&amp; s ) {\n    auto&amp; self = static_cast&lt;D&amp;&gt;(s);\n    auto members = get_members(self);\n    return std::apply( [&amp;self](auto...pm) {\n      return std::tie( (self.*pm)... );\n    }, members );\n  }\n  friend auto as_tie( structured&lt;D&gt; const&amp; s ) {\n    auto&amp; self = static_cast&lt;D const&amp;&gt;(s);\n    auto members = get_members(self);\n    return std::apply( [&amp;self](auto...pm) {\n      return std::tie( (self.*pm)... );\n    }, members );\n  }\n\n  template&lt;class T,\n    std::enable_if_t&lt;\n      tie_check&lt;T,D&gt;{},\n      bool\n    &gt; = true\n  &gt;\n  operator T() const&amp; {\n    T tmp;\n    as_tie(tmp) = as_tie( *this );\n    return tmp;\n  }\n};\n\ntemplate&lt;class A, class B&gt;\nstruct tie_compatible {\n  template&lt;class X&gt;\n  using tie_type = decltype( as_tie( std::declval&lt;X&gt;() ) );\n  using type = std::is_same&lt; tie_type&lt;A&amp;&gt;, tie_type&lt;B&amp;&gt; &gt;;\n};\n</code></pre>\n\n<p>a bit tricky but does the job.</p>\n\n<p>To support this system in a type <code>X</code>, you need to:</p>\n\n<ol>\n<li>inherit <code>X</code> from <code>structured&lt;X&gt;</code>.</li>\n<li>Implement <code>auto members(X const&amp; x)</code> that returns a tuple of pointer-to-members you care about.</li>\n<li>Have a default constructor for your target type, and be ok with construction-through-assignment.</li>\n</ol>\n\n<p>Here are your types augmented with this feature:</p>\n\n<pre><code>struct CartesianCoordinates: structured&lt;CartesianCoordinates&gt; {\n  std::pair&lt;double, double&gt; xy;\n\n  friend auto get_members( CartesianCoordinates const&amp; self ) {\n    return std::make_tuple( &amp;CartesianCoordinates::xy );\n  }\n\n  void x(double val) { xy.first = val; }\n  void y(double val) { xy.second = val; }\n  double x() const { return xy.first; }\n  double y() const { return xy.second; }\n};\n\nstruct GeographicCoordinates: structured&lt;GeographicCoordinates&gt; {\n  std::pair&lt;double, double&gt; xy;\n\n  friend auto get_members( GeographicCoordinates const&amp; self ) {\n    return std::make_tuple( &amp;GeographicCoordinates::xy );\n  }\n\n  void longtitude(double val) { xy.first = val; }\n  void lattitude(double val) { xy.second = val; }\n  double longtitude() const { return xy.first; }\n  double lattitude() const { return xy.second; }\n};\n</code></pre>\n\n<p>In <a href=\"/questions/tagged/c%2b%2b14\" class=\"post-tag\" title=\"show questions tagged &#39;c++14&#39;\" rel=\"tag\">c++14</a> just implement your own <code>notstd::apply</code>.</p>\n\n<p>In <a href=\"/questions/tagged/c%2b%2b11\" class=\"post-tag\" title=\"show questions tagged &#39;c++11&#39;\" rel=\"tag\">c++11</a> it gets annoying due to the lack of return type deduction.</p>\n\n<pre><code>#define RETURNS(...) \\\n   noexecpt(noexcept(__VA_ARGS__)) \\\n   -&gt; decltype(__VA_ARGS__) \\\n   { return __VA_ARGS__; }\n</code></pre>\n\n<p><code>RETURNS</code> can patch over that pain a bit.</p>\n\n<pre><code>auto foo()\n  RETURNS( 1+2 )\n</code></pre>\n\n<p>replacing</p>\n\n<pre><code>auto foo() {\n  return 1+2;\n}\n</code></pre>\n\n<p>sometimes works.  (There are important differences still, but what can you do)</p>\n"}], "owner": {"reputation": 2499, "user_id": 5208760, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L6VNv.jpg?s=128&g=1", "display_name": "Mateusz", "link": "https://stackoverflow.com/users/5208760/mateusz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 49901774, "answer_count": 3, "score": 2, "last_activity_date": 1524066142, "creation_date": 1524059346, "last_edit_date": 1524059893, "question_id": 49901445, "link": "https://stackoverflow.com/questions/49901445/allow-implicit-casting-for-types-with-the-same-underlying-structure", "title": "Allow implicit casting for types with the same underlying structure", "body": "<p>I've got several structures in my code which all have</p>\n\n<ul>\n<li>one member with the same type, e.g. <code>std::pair</code> or <code>cv::Point2d</code>  </li>\n<li>different functions, e.g. getters/setters named differently in each struct</li>\n</ul>\n\n<p>Example:</p>\n\n<pre><code>struct CartesianCoordinates {\n    std::pair&lt;double, double&gt; xy;\n\n    void x(double val) { xy.first = val; }\n    void y(double val) { xy.second = val; }\n    double x() const { return xy.first; }\n    double y() const { return xy.second; }\n};\n\nstruct GeographicCoordinates {\n    std::pair&lt;double, double&gt; xy;\n\n    void longtitude(double val) { xy.first = val; }\n    void lattitude(double val) { xy.second = val; }\n    double longtitude() const { return xy.first; }\n    double lattitude() const { return xy.second; }\n};\n</code></pre>\n\n<p>Now I want to be able to convert between those types <em>implicitly</em>, like this:</p>\n\n<pre><code>CartesianCoordinates returnCartesian()\n{\n    CartesianCoordinates c;\n    c.x(5);\n    c.y(-13);\n    return c;\n}\n\nvoid getGeographicCoordinates(const GeographicCoordinates&amp; c) {\n    std::cout &lt;&lt; c.longtitude() &lt;&lt; '\\n';\n}\n\nint main()\n{\n    getGeographicCoordinates(returnCartesian());\n}\n</code></pre>\n\n<p>Is there any way to achieve this without</p>\n\n<ul>\n<li>defining cast operators (I don't want to define those in every struct, 1:1),</li>\n<li>providing base class for those structures (if I don't want to define any base class)?</li>\n</ul>\n\n<p>In fact <code>reinterpret_cast</code>/pointers should work, but do any modern C++ mechanism exist that I am not aware of and that could help me to solve it with least structures implementation overhead, just using the fact that <strong>all structures have the same structure inside</strong>?</p>\n"}, {"tags": ["c++", "qt", "qtconcurrent"], "comments": [{"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 1, "creation_date": 1524059798, "post_id": 49901423, "comment_id": 86818547, "body": "There is no need for QtConcurrent here. You can have just a worker thread for any kind of IO and send signals to UI thread from there. <a href=\"https://stackoverflow.com/questions/35673201/qt-5-update-qprogressbar-during-qthread-work-via-signal\" title=\"qt 5 update qprogressbar during qthread work via signal\">stackoverflow.com/questions/35673201/&hellip;</a>"}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 1, "creation_date": 1524059911, "post_id": 49901423, "comment_id": 86818644, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/35673201/qt-5-update-qprogressbar-during-qthread-work-via-signal\">Qt 5 : update QProgressBar during QThread work via signal</a>"}, {"owner": {"reputation": 542, "user_id": 3595035, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7eb07f723aacc995947f935f332bd072?s=128&d=identicon&r=PG&f=1", "display_name": "Divano", "link": "https://stackoverflow.com/users/3595035/divano"}, "reply_to_user": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1524061762, "post_id": 49901423, "comment_id": 86820046, "body": "What if I have few Loader classes? QFutureWatcher seems to be very handy because it has signals for monitoring the progress. Should I write my own base class with this signals and inherit it for each loader or inherit QtConcurrent::ThreadEngine&lt;T&gt;?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 1, "creation_date": 1524064365, "post_id": 49901423, "comment_id": 86822074, "body": "@AlexanderV Manual thread management is often wasteful. Having a thread pool dedicated to I/O work is quite sensible."}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1524066466, "post_id": 49901423, "comment_id": 86823601, "body": "@KubaOber the task is plain and simple. But of course dealing with massive parallelism etc. may get an advantage of better abstractions."}], "owner": {"reputation": 542, "user_id": 3595035, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7eb07f723aacc995947f935f332bd072?s=128&d=identicon&r=PG&f=1", "display_name": "Divano", "link": "https://stackoverflow.com/users/3595035/divano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 264, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1524059292, "creation_date": 1524059292, "question_id": 49901423, "link": "https://stackoverflow.com/questions/49901423/qtconcurrent-load-big-file-in-separate-thread-and-show-progress", "title": "QtConcurrent load big file in separate thread and show progress", "body": "<p>I need to load a big file which is an .zip archive and contains two files: config and data. The loading progress consists of three stages: parse config, parse data, map data to more appropriate format. I need to do it in a separate thread. Also I need to display the progress and the stage in the progress dialog which contains QLabel for stage and QProgressBar for current stage progress.</p>\n\n<p>After some studying of QtConcurrent I going to use code like this:</p>\n\n<pre><code>class OscillogramLoader : public QtConcurrent::ThreadEngine&lt;Data&gt;\n{\npublic:\n    OscillogramLoader(QString filename);\nprotected:\n    QtConcurrent::ThreadFunctionResult threadFunction() override;\nprivate:\n    QString m_filename;\n};\n\nQtConcurrent::ThreadFunctionResult OscillogramLoader::threadFunction()\n{\n    futureInterfaceTyped()-&gt;setProgressRange(0, 50);\n\n    for (int i = 0; i &lt; 50; ++ i)\n    {\n        if (isCanceled())\n            break;\n        futureInterfaceTyped()-&gt;setProgressValueAndText(i, \"Parsing config\");\n\n        QThread::msleep(100); // Real work will be here\n    }\n\n    futureInterfaceTyped()-&gt;setProgressRange(50, 250);\n\n    for (int i = 0; i &lt; 200; ++ i)\n    {\n        if (isCanceled())\n            break;\n        futureInterfaceTyped()-&gt;setProgressValueAndText(50 + i, \"Map data\");\n\n        QThread::msleep(50); // Real work will be here\n    }\n\n    futureInterfaceTyped()-&gt;setProgressRange(250, 350);\n\n    for (int i = 0; i &lt; 100; ++ i)\n    {\n        if (isCanceled())\n            break;\n        futureInterfaceTyped()-&gt;setProgressValueAndText(250 + i, \"Map data\");\n\n        QThread::msleep(80); // Real work will be here\n    }\n\n    reportResult(new OscillogramData()); // returning loaded data\n\n    return QtConcurrent::ThreadFinished;\n}\n\n....\nQFutureWatcher&lt;OscillogramData&gt;* watcher = new QFutureWatcher&lt;OscillogramData&gt;();\nQObject::connect(watcher, &amp;QFutureWatcher&lt;OscillogramData&gt;::started, ...);\nQObject::connect(watcher, &amp;QFutureWatcher&lt;OscillogramData&gt;::progressRangeChanged, ...);\nQObject::connect(watcher, &amp;QFutureWatcher&lt;OscillogramData&gt;::progressTextChanged, ...);\nQObject::connect(watcher, &amp;QFutureWatcher&lt;OscillogramData&gt;::progressValueChanged, ...);\nQObject::connect(watcher, &amp;QFutureWatcher&lt;OscillogramData&gt;::finished, [=](){\n    OscillogramData data = watcher-&gt;result();\n    showData(&amp;data);\n    watcher-&gt;deleteLater();\n});\nwatcher-&gt;setFuture(QFuture&lt;OscillogramData&gt;(\n    QtConcurrent::startThreadEngine(new OscillogramLoader(\"/home/example/test1.zip\"))));\n....\n</code></pre>\n\n<p>Is it ok?</p>\n\n<p>My old version of the loader class is inherited from QThread, has progressChanged, done, failure signals and overrided run method. Is it better or worse then previous code?</p>\n\n<pre><code>class OscillogramLoader : public QThread\n{\n    Q_OBJECT\npublic:\n    explicit OscillogramLoader(QString filename, QObject* parent = nullptr);\n\n    QString filename() const;\n    bool isCanceled() const;\n\npublic slots:\n    void cancel();\n\nsignals:\n    void progressChanged(QString stage, double parcent);\n    void done(QString filaname, QSharedPointer&lt;OscillogramData&gt; data);\n    void failure(LoadFailureException exception);\n\nprotected:\n    void run() override;\n\nprivate:\n    QString m_filename;\n    bool m_cancelled;\n};\n</code></pre>\n"}, {"tags": ["c++", "static-members", "forward-declaration"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1524059365, "post_id": 49901383, "comment_id": 86818217, "body": "&quot;but i have already forward declared Sample class&quot; forward declaration does not make a class complete. What is unclear in the error message?"}, {"owner": {"reputation": 739, "user_id": 3198492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4XiW7.jpg?s=128&g=1", "display_name": "DanielCollier", "link": "https://stackoverflow.com/users/3198492/danielcollier"}, "edited": false, "score": 2, "creation_date": 1524059400, "post_id": 49901383, "comment_id": 86818236, "body": "move &quot;int Sample::objCount = 0;&quot; after the class. you cannot intialiase an incomplete type."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1524059768, "post_id": 49901383, "comment_id": 86818524, "body": "The compiler needs to see a definition of the class (not just a forward declaration) before it sees a definition of a static member of that class.   The error message about an &quot;incomplete type&quot; is your compiler&#39;s way of complaining about only having seen a forward declaration."}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 4, "last_activity_date": 1524059589, "creation_date": 1524059589, "answer_id": 49901526, "question_id": 49901383, "link": "https://stackoverflow.com/questions/49901383/forward-declaration-of-a-class-having-static-member/49901526#49901526", "title": "forward declaration of a class having static member", "body": "<p>Forward-declaring a class is a promise to the compiler to provide a definition at some later point. In return the compiler lets you use your forward-declared class in other declarations, where the content of the class is not required, such as declaring a pointer or a reference.</p>\n\n<p>Defining members of a class relies on the knowledge of the content of the class. Therefore, a simple forward declaration is no longer sufficient: your class must be defined in order for the compiler to deal with its member definitions properly.</p>\n\n<p>In your example forward declaration is not required. You should move class definition into a header file, include it in your <code>main</code> file, and move <code>Sample::objCount</code> either into the <code>main</code> file, or into a separate <code>sample.cpp</code> file.</p>\n"}], "owner": {"reputation": 544, "user_id": 1039936, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/fO39L.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/1039936/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 522, "favorite_count": 0, "accepted_answer_id": 49901526, "answer_count": 1, "score": 1, "last_activity_date": 1524060624, "creation_date": 1524059171, "last_edit_date": 1524060624, "question_id": 49901383, "link": "https://stackoverflow.com/questions/49901383/forward-declaration-of-a-class-having-static-member", "title": "forward declaration of a class having static member", "body": "<p>Am I doing anything wrong in below code. I am getting the following compilation error :</p>\n\n<blockquote>\n  <p><strong>ERROR:</strong> Invalid use of incomplete type <code>classSample</code></p>\n</blockquote>\n\n<p>But I have already forward declared the <code>class Sample</code>.</p>\n\n<pre><code>class Sample;\n\nint Sample::objCount = 0;\n\nclass Sample\n{\npublic:\n    static int objCount;\n    Sample()\n    {\n        Sample::objCount++;\n        std::cout&lt;&lt; \"creating object = \"&lt;&lt;Sample::objCount&lt;&lt;std::endl;\n    }\n    ~Sample()\n    {\n        Sample::objCount--;\n        std::cout&lt;&lt; \"destroying object = \"&lt;&lt;Sample::objCount&lt;&lt;std::endl;\n    }\n};\n\nint main()\n{    \n    Sample obj;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "typetraits", "c++-standard-library", "libstdc++"], "comments": [{"owner": {"reputation": 6188, "user_id": 7703564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bc3387440ec2c075d16d2bb152a540?s=128&d=identicon&r=PG&f=1", "display_name": "Jodocus", "link": "https://stackoverflow.com/users/7703564/jodocus"}, "edited": false, "score": 3, "creation_date": 1524060173, "post_id": 49901309, "comment_id": 86818839, "body": "I don&#39;t think so. E.g. in the <a href=\"https://github.com/llvm-mirror/libcxx/blob/master/include/type_traits#L3447\" rel=\"nofollow noreferrer\">llvm implementation</a>, the placeholder <code>is_scalar</code> is used which rather seems like a first approximation."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1524060215, "post_id": 49901309, "comment_id": 86818872, "body": "For the record, MSVC (2015) also uses an intrinsic."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 6188, "user_id": 7703564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bc3387440ec2c075d16d2bb152a540?s=128&d=identicon&r=PG&f=1", "display_name": "Jodocus", "link": "https://stackoverflow.com/users/7703564/jodocus"}, "edited": false, "score": 0, "creation_date": 1524060563, "post_id": 49901309, "comment_id": 86819137, "body": "@Jodocus LLVM also uses an intrinsic: <a href=\"https://github.com/llvm-mirror/libcxx/blob/master/include/type_traits#L3430\" rel=\"nofollow noreferrer\">github.com/llvm-mirror/libcxx/blob/master/include/&hellip;</a>"}, {"owner": {"reputation": 6188, "user_id": 7703564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bc3387440ec2c075d16d2bb152a540?s=128&d=identicon&r=PG&f=1", "display_name": "Jodocus", "link": "https://stackoverflow.com/users/7703564/jodocus"}, "reply_to_user": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 2, "creation_date": 1524060663, "post_id": 49901309, "comment_id": 86819194, "body": "@Holt Yes, and in case it&#39;s not available, it will fall back on something that is actually wrong, indicating that if it was possible, the writers of libc++ would&#39;ve done it."}, {"owner": {"reputation": 26593, "user_id": 811335, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ca588e5bfb1ac0a5d8ec8acb422aa564?s=128&d=identicon&r=PG", "display_name": "A. K.", "link": "https://stackoverflow.com/users/811335/a-k"}, "reply_to_user": {"reputation": 6188, "user_id": 7703564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bc3387440ec2c075d16d2bb152a540?s=128&d=identicon&r=PG&f=1", "display_name": "Jodocus", "link": "https://stackoverflow.com/users/7703564/jodocus"}, "edited": false, "score": 0, "creation_date": 1524142670, "post_id": 49901309, "comment_id": 86858967, "body": "@Jodocus, I was also looking if there is some approximate implementation. That way some of the types will benefit."}], "answers": [{"tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": false, "score": 4, "last_activity_date": 1539881612, "creation_date": 1539881612, "answer_id": 52878955, "question_id": 49901309, "link": "https://stackoverflow.com/questions/49901309/is-it-possible-to-have-a-library-implementation-of-is-trivially-constructible-wi/52878955#52878955", "title": "Is it possible to have a library implementation of is_trivially_constructible without relying on compiler builtins?", "body": "<p>No, it's not possible (otherwise we probably would have already done it in libstdc++!)</p>\n\n<p>We had to wait for the new compiler builtin to be implemented.</p>\n\n<p>Using <code>is_scalar</code> is a conservative approximation, but is obviously wrong for trivially constructible class types.</p>\n"}], "owner": {"reputation": 26593, "user_id": 811335, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ca588e5bfb1ac0a5d8ec8acb422aa564?s=128&d=identicon&r=PG", "display_name": "A. K.", "link": "https://stackoverflow.com/users/811335/a-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1539881612, "creation_date": 1524058962, "question_id": 49901309, "link": "https://stackoverflow.com/questions/49901309/is-it-possible-to-have-a-library-implementation-of-is-trivially-constructible-wi", "title": "Is it possible to have a library implementation of is_trivially_constructible without relying on compiler builtins?", "body": "<p>I'm using gcc-4.9 which does not have the is_trivially_constructible type trait. Looking into the libstdc++ source code (type_traits), this depends on __is_trivially_constructible which is implemented in the compiler itself.</p>\n\n<p>I was wondering if it was possible to implement this trait as a library rather than relying on compiler such that I can use this in my project which is stuck using gcc-4.9.</p>\n"}, {"tags": ["c++", "arrays", "printing", "ostream"], "comments": [{"owner": {"reputation": 587, "user_id": 6598037, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-7xRnu14I800/AAAAAAAAAAI/AAAAAAAABHg/GXo_1S1LuYM/photo.jpg?sz=128", "display_name": "Arthur Guiot", "link": "https://stackoverflow.com/users/6598037/arthur-guiot"}, "edited": false, "score": 0, "creation_date": 1524058899, "post_id": 49901187, "comment_id": 86817912, "body": "Duplicate <a href=\"https://stackoverflow.com/questions/1370323/printing-an-array-in-c\" title=\"printing an array in c\">stackoverflow.com/questions/1370323/printing-an-array-in-c</a>"}, {"owner": {"reputation": 1390, "user_id": 6804762, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b41e265dcfe306ac9138ed4bca68c0ce?s=128&d=identicon&r=PG", "display_name": "xoxel", "link": "https://stackoverflow.com/users/6804762/xoxel"}, "edited": false, "score": 0, "creation_date": 1524058999, "post_id": 49901187, "comment_id": 86817977, "body": "It&#39;s an extremely basic question involving looping on arrays/lists, I highly suggest you to take a look at some beginners tutorials."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1524059906, "post_id": 49901187, "comment_id": 86818639, "body": "I recommend a <code>for</code> loop and operator <code>%</code>."}], "owner": {"reputation": 1, "user_id": 7611698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012d36455caa5267bc688d5a4335ef35?s=128&d=identicon&r=PG&f=1", "display_name": "Stefano Ornato", "link": "https://stackoverflow.com/users/7611698/stefano-ornato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "closed_date": 1524058725, "answer_count": 0, "score": 0, "last_activity_date": 1524058594, "creation_date": 1524058594, "question_id": 49901187, "link": "https://stackoverflow.com/questions/49901187/how-do-i-print-an-array-using-iostream", "closed_reason": "Duplicate", "title": "How do i print an array using iostream?", "body": "<pre><code>    virtual ostream &amp;put(ostream &amp;os){\n        return A::put(os)&lt;&lt;f()&lt;&lt;\"/min   \"&lt;&lt;len&lt;&lt; \"  \"&lt;&lt;*values;\n    }\n</code></pre>\n\n<p>Is there a way to see print the entire array \"values\"?\nEach time i execute the program it prints the first lement in the array,is there a way to print each values in a row?</p>\n"}, {"tags": ["c++", "visual-studio-2017", "gdb", "remote-debugging", "gdbserver"], "comments": [{"owner": {"reputation": 1031, "user_id": 6763393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44926355c84effac26e3a3f1582405a?s=128&d=identicon&r=PG&f=1", "display_name": "stanthomas", "link": "https://stackoverflow.com/users/6763393/stanthomas"}, "edited": false, "score": 0, "creation_date": 1524242199, "post_id": 49901105, "comment_id": 86908717, "body": "There appears to be an issue around threading because there&#39;s a clear difference between the two GDB outputs in that area. Are all the required shared libraries present? Is that the exact same makefile in Visual Studio as used from the command line on the Redhat system? Do you get the same result when you go to the VS created project folder on RedHat, make the makefile then start GDB? Can you share the details of the project settings <code>General</code> and <code>Remote Build</code> tabs (black out the login)? Which VS2017 version are you on?"}, {"owner": {"reputation": 1031, "user_id": 6763393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44926355c84effac26e3a3f1582405a?s=128&d=identicon&r=PG&f=1", "display_name": "stanthomas", "link": "https://stackoverflow.com/users/6763393/stanthomas"}, "edited": false, "score": 0, "creation_date": 1524257042, "post_id": 49901105, "comment_id": 86915480, "body": "A couple more questions: is this a GUI application, in which case which GUI? Is there anything in your <code>bash</code> environment that is not there in an <code>ssh</code> environment? Can you run the debug session over <code>ssh</code> from the Windows host outside VS?"}, {"owner": {"reputation": 2024, "user_id": 1369830, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a1515fdfadc01b3a0cbf7bb133e9af9d?s=128&d=identicon&r=PG", "display_name": "warunanc", "link": "https://stackoverflow.com/users/1369830/warunanc"}, "reply_to_user": {"reputation": 1031, "user_id": 6763393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44926355c84effac26e3a3f1582405a?s=128&d=identicon&r=PG&f=1", "display_name": "stanthomas", "link": "https://stackoverflow.com/users/6763393/stanthomas"}, "edited": false, "score": 0, "creation_date": 1524467719, "post_id": 49901105, "comment_id": 86966563, "body": "@stanthomas this is not a GUI program. Let me help you to get this recreated at your end  I&#39;m trying to debug the following program <a href=\"https://github.com/warunanc/socket-programming-examples-c\" rel=\"nofollow noreferrer\">github.com/warunanc/socket-programming-examples-c</a>  I used following links to try this out <a href=\"https://blogs.msdn.microsoft.com/vcblog/2017/04/11/linux-development-with-c-in-visual-studio/\" rel=\"nofollow noreferrer\">blogs.msdn.microsoft.com/vcblog/2017/04/11/&hellip;</a> <a href=\"https://blogs.msdn.microsoft.com/vcblog/2016/03/30/visual-c-for-linux-development/\" rel=\"nofollow noreferrer\">blogs.msdn.microsoft.com/vcblog/2016/03/30/&hellip;</a>  Basically, I have invoked GDB on the remote server itself. The application is not built nor running in the windows box. All happens in the Linux box."}, {"owner": {"reputation": 2024, "user_id": 1369830, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a1515fdfadc01b3a0cbf7bb133e9af9d?s=128&d=identicon&r=PG", "display_name": "warunanc", "link": "https://stackoverflow.com/users/1369830/warunanc"}, "reply_to_user": {"reputation": 1031, "user_id": 6763393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44926355c84effac26e3a3f1582405a?s=128&d=identicon&r=PG&f=1", "display_name": "stanthomas", "link": "https://stackoverflow.com/users/6763393/stanthomas"}, "edited": false, "score": 0, "creation_date": 1524468239, "post_id": 49901105, "comment_id": 86966868, "body": "@stanthomas I added the other project property images as well, in the question description"}, {"owner": {"reputation": 1031, "user_id": 6763393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44926355c84effac26e3a3f1582405a?s=128&d=identicon&r=PG&f=1", "display_name": "stanthomas", "link": "https://stackoverflow.com/users/6763393/stanthomas"}, "edited": false, "score": 0, "creation_date": 1524521919, "post_id": 49901105, "comment_id": 86998032, "body": "I&#39;ll try to look at your application but, for now, can you confirm that, when you manually reproduce the steps used by Visual Studio <i>outside</i> Visual Studio, i.e. run <code>make</code> and <code>gdb</code> via <code>ssh</code> directly from the command line on the Windows host, everything runs fine. Because the most likely explaination is that there&#39;s something in your environment when logged in directly on the Linux remote that is different when going in via <code>ssh</code>."}, {"owner": {"reputation": 2024, "user_id": 1369830, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a1515fdfadc01b3a0cbf7bb133e9af9d?s=128&d=identicon&r=PG", "display_name": "warunanc", "link": "https://stackoverflow.com/users/1369830/warunanc"}, "reply_to_user": {"reputation": 1031, "user_id": 6763393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44926355c84effac26e3a3f1582405a?s=128&d=identicon&r=PG&f=1", "display_name": "stanthomas", "link": "https://stackoverflow.com/users/6763393/stanthomas"}, "edited": false, "score": 0, "creation_date": 1524529459, "post_id": 49901105, "comment_id": 87000060, "body": "Yes, it&#39;s working fine. Visual studio also basically creates a ssh session afaik"}, {"owner": {"reputation": 1031, "user_id": 6763393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44926355c84effac26e3a3f1582405a?s=128&d=identicon&r=PG&f=1", "display_name": "stanthomas", "link": "https://stackoverflow.com/users/6763393/stanthomas"}, "edited": false, "score": 0, "creation_date": 1524582217, "post_id": 49901105, "comment_id": 87026340, "body": "Visual Studio drives the Linux remote over <code>ssh</code>. So, if you run manually run a remote session over <code>ssh</code> from the Windows host to the Linux system using the same login and same commends you will get exactly the same behavior as you see in Visual Studio. But it does have to be <i>exactly</i> the same, same commands, same folder, same paths, same steps."}, {"owner": {"reputation": 2024, "user_id": 1369830, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a1515fdfadc01b3a0cbf7bb133e9af9d?s=128&d=identicon&r=PG", "display_name": "warunanc", "link": "https://stackoverflow.com/users/1369830/warunanc"}, "reply_to_user": {"reputation": 1031, "user_id": 6763393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44926355c84effac26e3a3f1582405a?s=128&d=identicon&r=PG&f=1", "display_name": "stanthomas", "link": "https://stackoverflow.com/users/6763393/stanthomas"}, "edited": false, "score": 0, "creation_date": 1524591955, "post_id": 49901105, "comment_id": 87032212, "body": "It works when I run manually"}, {"owner": {"reputation": 1031, "user_id": 6763393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44926355c84effac26e3a3f1582405a?s=128&d=identicon&r=PG&f=1", "display_name": "stanthomas", "link": "https://stackoverflow.com/users/6763393/stanthomas"}, "edited": false, "score": 0, "creation_date": 1524665567, "post_id": 49901105, "comment_id": 87065046, "body": "That doesn&#39;t make any sense to me &#39;cos all VCLinux does is drive the Linux remote over <code>ssh</code>."}], "owner": {"reputation": 2024, "user_id": 1369830, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a1515fdfadc01b3a0cbf7bb133e9af9d?s=128&d=identicon&r=PG", "display_name": "warunanc", "link": "https://stackoverflow.com/users/1369830/warunanc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 766, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524468215, "creation_date": 1524058390, "last_edit_date": 1524468215, "question_id": 49901105, "link": "https://stackoverflow.com/questions/49901105/error-when-visual-studio-remote-debugging-with-gdb", "title": "Error when Visual Studio Remote Debugging with GDB", "body": "<p>I have a sample c++ application which builds and runs fine in a Red Hat installation.</p>\n\n<p>I wanted to have the source code of this application in my windows machine so I can create a Visual Studio project and use Visual Studio 2017's new features which makes it possible to build and debug programs on a Linux server.</p>\n\n<p>I successfully managed the following</p>\n\n<ul>\n<li>Create a 'make file' project using Visual Studio CE 2017</li>\n<li>Connect to the remote server and build by invoking make command at\nthe server</li>\n</ul>\n\n<p>My remote debugger settings are as follows\n<a href=\"https://i.stack.imgur.com/vsvzS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vsvzS.png\" alt=\"enter image description here\"></a></p>\n\n<p>Remote Build Settings are as follows\n<a href=\"https://i.stack.imgur.com/LtJrU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LtJrU.png\" alt=\"enter image description here\"></a></p>\n\n<p>General Settings are as follows\n<a href=\"https://i.stack.imgur.com/U4PaC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/U4PaC.png\" alt=\"enter image description here\"></a></p>\n\n<p>However, when I try to debug the program via Visual Studio (using gdb in the server) following error occurs</p>\n\n<p><a href=\"https://i.stack.imgur.com/a7PoY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a7PoY.png\" alt=\"enter image description here\"></a></p>\n\n<p>Since this doesn't reveal much, I enabled verbose mode (in GDB) and following is the verbose output. Apparently, GDB crashes after loading symbols for one of the source files.</p>\n\n<p><a href=\"https://i.stack.imgur.com/W7cv1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W7cv1.png\" alt=\"enter image description here\"></a></p>\n\n<p>Furthermore, I can manually GDB the binary in the Linux Server without any problems</p>\n\n<p><a href=\"https://i.stack.imgur.com/MXRfC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MXRfC.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "csv", "omnet++"], "comments": [{"owner": {"reputation": 6021, "user_id": 206404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497437666710e8b13ee168bd7b62fcba?s=128&d=identicon&r=PG", "display_name": "Stephen Newell", "link": "https://stackoverflow.com/users/206404/stephen-newell"}, "edited": false, "score": 2, "creation_date": 1524058423, "post_id": 49901087, "comment_id": 86817566, "body": "And what have you tried so far?"}, {"owner": {"reputation": 1779, "user_id": 1065992, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sWiDT.png?s=128&g=1", "display_name": "Blood-HaZaRd", "link": "https://stackoverflow.com/users/1065992/blood-hazard"}, "edited": false, "score": 1, "creation_date": 1524058645, "post_id": 49901087, "comment_id": 86817721, "body": "he did an std::move(home work);"}, {"owner": {"reputation": 706, "user_id": 4070330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de272559ba2ec727fe9b3108afa222f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kashpur", "link": "https://stackoverflow.com/users/4070330/andrew-kashpur"}, "edited": false, "score": 0, "creation_date": 1524058782, "post_id": 49901087, "comment_id": 86817808, "body": "if you want a piece of code there are 3 ways : 1) find existing piece of code 2) write it yourself 3) have someone else write it for you. for (1) use google, SO does not provide (3) as far as i know."}, {"owner": {"reputation": 141, "user_id": 3611201, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ddf4f41f44eea8c576d5c2e760195fee?s=128&d=identicon&r=PG&f=1", "display_name": "Saad", "link": "https://stackoverflow.com/users/3611201/saad"}, "edited": false, "score": 0, "creation_date": 1524058854, "post_id": 49901087, "comment_id": 86817883, "body": "ok ok. I should have been clear. my mistake."}, {"owner": {"reputation": 141, "user_id": 3611201, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ddf4f41f44eea8c576d5c2e760195fee?s=128&d=identicon&r=PG&f=1", "display_name": "Saad", "link": "https://stackoverflow.com/users/3611201/saad"}, "edited": false, "score": 0, "creation_date": 1524058950, "post_id": 49901087, "comment_id": 86817945, "body": "I have edited the question. Please review"}, {"owner": {"reputation": 1416, "user_id": 635587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02aedf4c8dee4417fe7673a7c10cf291?s=128&d=identicon&r=PG", "display_name": "Attila", "link": "https://stackoverflow.com/users/635587/attila"}, "edited": false, "score": 1, "creation_date": 1524059429, "post_id": 49901087, "comment_id": 86818263, "body": "What do you mean it &quot;isn&#39;t working somehow&quot;? Is there a compilation error? If so, have you read it? What does it say? It would be useful to include it in your question. Or, it compiles, but crashes? When and how?"}, {"owner": {"reputation": 706, "user_id": 4070330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de272559ba2ec727fe9b3108afa222f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kashpur", "link": "https://stackoverflow.com/users/4070330/andrew-kashpur"}, "edited": false, "score": 1, "creation_date": 1524059447, "post_id": 49901087, "comment_id": 86818276, "body": "std::getline(data,std::string value) - as far as i know you cant declare variable inside function call"}, {"owner": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "edited": false, "score": 3, "creation_date": 1524059594, "post_id": 49901087, "comment_id": 86818391, "body": "You need to convert your <code>std::string value</code> into an <code>L3Address</code> object before adding it to a vector of <code>L3Address</code> objects.  Since you didn&#39;t provide any info about what <code>L3Address</code> is, we cannot help you."}, {"owner": {"reputation": 141, "user_id": 3611201, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ddf4f41f44eea8c576d5c2e760195fee?s=128&d=identicon&r=PG&f=1", "display_name": "Saad", "link": "https://stackoverflow.com/users/3611201/saad"}, "reply_to_user": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "edited": false, "score": 0, "creation_date": 1524060021, "post_id": 49901087, "comment_id": 86818724, "body": "@JustinRandall L3Address is used as a variable in &quot;Omnet++&quot; a network simulation tool that has c++ on its back end. Every node in the simulation has an ip address of the type L3Address. again apologies for not being clear enough."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1524060138, "post_id": 49901087, "comment_id": 86818812, "body": "@ThomasMatthews forget the comment it was the wrong question, sorry. I deleted it. Il will delete this one in a few minutes"}], "answers": [{"comments": [{"owner": {"reputation": 1416, "user_id": 635587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02aedf4c8dee4417fe7673a7c10cf291?s=128&d=identicon&r=PG", "display_name": "Attila", "link": "https://stackoverflow.com/users/635587/attila"}, "edited": false, "score": 0, "creation_date": 1524061180, "post_id": 49901985, "comment_id": 86819575, "body": "AFAIK it doesn&#39;t have to be an <i>alias</i>, just implicitly constructible (convertible) from <code>std::string</code>. And since the question is tagged with <code>omnet++</code>, they are most likely talking about this class: <a href=\"https://github.com/inet-framework/inet/blob/master/src/inet/networklayer/common/L3Address.h\" rel=\"nofollow noreferrer\">github.com/inet-framework/inet/blob/master/src/inet/&hellip;</a> which is only explicitly constructible from <code>const char *</code>."}, {"owner": {"reputation": 1436, "user_id": 4341198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1afe57c0798cf3205c694ee52856fc01?s=128&d=identicon&r=PG&f=1", "display_name": "Dusteh", "link": "https://stackoverflow.com/users/4341198/dusteh"}, "reply_to_user": {"reputation": 1416, "user_id": 635587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02aedf4c8dee4417fe7673a7c10cf291?s=128&d=identicon&r=PG", "display_name": "Attila", "link": "https://stackoverflow.com/users/635587/attila"}, "edited": false, "score": 2, "creation_date": 1524061324, "post_id": 49901985, "comment_id": 86819693, "body": "@Attila You are correct. However it seems to be a different type constructible from <code>const char*</code> - updated my answer."}, {"owner": {"reputation": 141, "user_id": 3611201, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ddf4f41f44eea8c576d5c2e760195fee?s=128&d=identicon&r=PG&f=1", "display_name": "Saad", "link": "https://stackoverflow.com/users/3611201/saad"}, "edited": false, "score": 0, "creation_date": 1524062956, "post_id": 49901985, "comment_id": 86820992, "body": "@Dusteh there is nothing wrong with your answer. The above answer just puts some light on &quot;Omnet++&quot; (a tag that I mentioned in my question). Thank you though"}], "tags": [], "owner": {"reputation": 1436, "user_id": 4341198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1afe57c0798cf3205c694ee52856fc01?s=128&d=identicon&r=PG&f=1", "display_name": "Dusteh", "link": "https://stackoverflow.com/users/4341198/dusteh"}, "is_accepted": false, "score": 3, "last_activity_date": 1524060790, "creation_date": 1524060790, "answer_id": 49901985, "question_id": 49901087, "link": "https://stackoverflow.com/questions/49901087/reading-from-csv-and-storing-in-a-vector/49901985#49901985", "title": "Reading from CSV and storing in a Vector", "body": "<p>Your example doesn't seem to compile. Besides the missing parenthesis the <code>getline</code> function you are using requires a variable reference as the second argument. Hence, you should fix your code by defining the <code>value</code> variable before use.</p>\n\n<p>Additionally to construct the <code>L3Address</code> you can benefit from the constructor accepting <code>const char*</code>.</p>\n\n<pre><code>std::ifstream  data(\"data.csv\");\nstd::string value;\nwhile(std::getline(data,value))\n{\n    destAddresses.emplace_back(value.c_str());\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 141, "user_id": 3611201, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ddf4f41f44eea8c576d5c2e760195fee?s=128&d=identicon&r=PG&f=1", "display_name": "Saad", "link": "https://stackoverflow.com/users/3611201/saad"}, "edited": false, "score": 0, "creation_date": 1524062870, "post_id": 49902026, "comment_id": 86820918, "body": "Works exactly like it should. Appreciated"}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": true, "score": 3, "last_activity_date": 1524060888, "creation_date": 1524060888, "answer_id": 49902026, "question_id": 49901087, "link": "https://stackoverflow.com/questions/49901087/reading-from-csv-and-storing-in-a-vector/49902026#49902026", "title": "Reading from CSV and storing in a Vector", "body": "<p>Let's go look at the documentation of <a href=\"https://omnetpp.org/doc/inet/api-current/doxy/classinet_1_1_l3_address.html\" rel=\"nofollow noreferrer\"><code>L3Address</code></a> (note 1). Here we can see a function  <code>bool L3Address::tryParse(const char * str)</code>, which will try to interpret a C-string as an address, and tell you if it succeded.</p>\n\n<pre><code>std::ifstream  data(\"data.csv\");\nstd::string line;\nwhile (std::getline(data, line) {\n    L3Address addr;\n    if (addr.tryParse(line.c_str())) {\n        destAddresses.push_back(addr);\n    }\n    else\n    {\n        // TODO: handle malformed address\n    }\n}\n</code></pre>\n\n<p>Note 1: The tooling that generated this documentation is formatting it very badly, so it is excusable that you couldn't get here yourself.</p>\n"}], "owner": {"reputation": 141, "user_id": 3611201, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ddf4f41f44eea8c576d5c2e760195fee?s=128&d=identicon&r=PG&f=1", "display_name": "Saad", "link": "https://stackoverflow.com/users/3611201/saad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 466, "favorite_count": 0, "accepted_answer_id": 49902026, "answer_count": 2, "score": 0, "last_activity_date": 1524060888, "creation_date": 1524058340, "last_edit_date": 1524058802, "question_id": 49901087, "link": "https://stackoverflow.com/questions/49901087/reading-from-csv-and-storing-in-a-vector", "title": "Reading from CSV and storing in a Vector", "body": "<p>Consider I have the following csv file:</p>\n\n<pre><code>10.0.0.26\n10.0.0.30\n10.0.0.34\n10.0.0.38\n...\n...\n</code></pre>\n\n<p>Consider I have a vector:</p>\n\n<pre><code>std::vector&lt;L3Address&gt; destAddresses;\n</code></pre>\n\n<p>I want a piece of code the will read the above csv file till the very last address and store each of that address in the above vector.</p>\n\n<pre><code>std::ifstream  data(\"data.csv\");\nwhile(//till the end of file){\n//read from csv\n//write to vector\n}\n</code></pre>\n\n<p>I have tried the following:</p>\n\n<pre><code>std::ifstream  data(\"data.csv\");\nwhile(std::getline(data,std::string value){\ndestAddresses.push_back(value);\n}\n</code></pre>\n\n<p>But this isn't working somehow. </p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 5, "creation_date": 1524057790, "post_id": 49900866, "comment_id": 86817119, "body": "UB\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 3, "creation_date": 1524057870, "post_id": 49900866, "comment_id": 86817170, "body": "Array indices in C or C++ (You should choose one) begin at 0, not 1."}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1524057883, "post_id": 49900866, "comment_id": 86817179, "body": "@Bathsheba how were you able to add a comment with less than 15 characters? o.O"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1524057940, "post_id": 49900866, "comment_id": 86817229, "body": "Accessing an array out of bounds is <i>undefined behaviour</i> (google that term)."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1524058123, "post_id": 49900866, "comment_id": 86817358, "body": "&quot; Why It allows to write where you are not allocated to.&quot;  because it is not obligated to validate your access."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1524058326, "post_id": 49900866, "comment_id": 86817496, "body": "@tkausl: You have to be very rich."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1524058894, "post_id": 49900866, "comment_id": 86817908, "body": "<i>&quot;My logic is that if we have 20 elements then we have elements of array from index 0 till index 19, and 20 index was written by machine with &#39;\\0&#39; automatically.&quot;</i> The compiler adds the NULL terminator  (and reserve enough space in memory for it) only when you initialize a <b>char</b> array with a string literal: <code>char str[] = &quot;Hello&quot;;</code> --&gt; <code>{&#39;H&#39;, &#39;e&#39;, &#39;l&#39;, &#39;l&#39;, &#39;o&#39;, &#39;\\0&#39;}</code>, because the string literal itself is null-terminated, but you have arrays of <code>int</code>s"}], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 9459136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af2cd2fda1dd12f2e40903a79127ca4?s=128&d=identicon&r=PG&f=1", "display_name": "Guilherme Simas", "link": "https://stackoverflow.com/users/9459136/guilherme-simas"}, "is_accepted": true, "score": 1, "last_activity_date": 1524058517, "creation_date": 1524058517, "answer_id": 49901154, "question_id": 49900866, "link": "https://stackoverflow.com/questions/49900866/stack-smashing-detected-segmentation-fault/49901154#49901154", "title": "Stack smashing detected/segmentation fault", "body": "<p>Notice you are writing from index 1 up to and including n.\nSo if you input X (let's say, 20), your last element will be written to the X+1th index of your array.</p>\n\n<p>That being said, accessing indexes out of your array boundaries renders undefined behavior (as already mentioned by @Bathsheba).</p>\n\n<p>The reason a segmentation fault does not occur when accessing the 21th index, in your case, is probably that since your array was allocated in the stack, is is accessing allocated memory (which could be n, i, or even the program or stack counter).</p>\n\n<p>This has already been asked in other questions, such as <a href=\"https://stackoverflow.com/questions/10051782/array-overflow-why-does-this-work\">this one</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 6580551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/954ecb9e861e153fe5fccebc0df8fdb4?s=128&d=identicon&r=PG&f=1", "display_name": "salt en", "link": "https://stackoverflow.com/users/6580551/salt-en"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "closed_date": 1524058505, "accepted_answer_id": 49901154, "answer_count": 1, "score": -1, "last_activity_date": 1524058626, "creation_date": 1524057767, "question_id": 49900866, "link": "https://stackoverflow.com/questions/49900866/stack-smashing-detected-segmentation-fault", "closed_reason": "Duplicate", "title": "Stack smashing detected/segmentation fault", "body": "<p>Why I input 21 elements and it works fine? and If I input 22 it appears segmentation fault/stack smashing.(OS Linux). If I allocated only 20 elements.\nI've tried some sort of online compilers and there I could even write more elements.</p>\n\n<p>My logic is that if we have 20 elements then we have elements of array from index 0 till index 19, and 20 index was written by machine with '\\0' automatically.</p>\n\n<p>Could you please explain to me how it works. Why It allows to write where you are not allocated to. And why stack smashing/segmentation fault appears on 22 elements rather than 21 elements.</p>\n\n<p>Or could you please let me know what books do I have to use to find information about.</p>\n\n<p>There is a piece of code below.</p>\n\n<pre><code>int n, i;\nint a[20];\n\nprintf(\"Enter no of emelents of array\\n\");\nscanf(\"%d\", &amp;n);\nprintf(\"\\nEnter %d elements: \", n);\nfor(i = 1; i &lt;= n; i++)\n{\n    scanf(\"%d\", &amp;a[i]);\n}\n</code></pre>\n"}, {"tags": ["c++", "language-lawyer", "c++-standard-library"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1524057918, "post_id": 49900562, "comment_id": 86817212, "body": "The requirement doesn&#39;t say that <code>*iter_copy</code> remains unchanged, it says that <code>*iter</code> remains unchanged."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1524058770, "post_id": 49900562, "comment_id": 86817802, "body": "Note that <code>(void)++(++X(a)), *a</code> being equivalent to <code>*a</code> is not true; if <code>a</code> is one-before-<code>end()</code> a double increment is UB, so the first is UB while the second is not.  However, if <code>*iter_copy</code> cannot invalidate <code>*a</code>, then netiher can <code>(void)++X(iter_copy), *iter_copy</code> as the two are equivalent."}, {"owner": {"reputation": 285, "user_id": 8883101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72dd202c3271ff3ca9c8d345b3b35fec?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno", "link": "https://stackoverflow.com/users/8883101/bruno"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1524059034, "post_id": 49900562, "comment_id": 86817993, "body": "@Yakk but past-the-end iterators are not dereferenceable and the requirement is &quot;if a and b are dereferenceable then ...&quot;"}, {"owner": {"reputation": 285, "user_id": 8883101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72dd202c3271ff3ca9c8d345b3b35fec?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno", "link": "https://stackoverflow.com/users/8883101/bruno"}, "edited": false, "score": 0, "creation_date": 1524060195, "post_id": 49900562, "comment_id": 86818857, "body": "but does it really says that? (ignoring the cast to void which is just because of the operator comma, and assuming that all the iterators are valid so no past-the-end edge case) It says that if I have <code>iter</code> and make a copy <code>iter_copy</code> of it, then after <code>++iter_copy</code> <code>*iter</code> is unchanged. Then I can make another copy <code>iter_copy_copy</code> of <code>iter_copy</code>, increment <code>iter_copy_copy</code> and the requirement says that <code>*iter_copy</code> is unchanged. But it seems to me that nothing is said about the original <code>*iter</code>. It might have been changed by the second increment..."}], "answers": [{"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1524065101, "post_id": 49902848, "comment_id": 86822650, "body": "@Angew Corrected, I think?"}, {"owner": {"reputation": 285, "user_id": 8883101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72dd202c3271ff3ca9c8d345b3b35fec?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno", "link": "https://stackoverflow.com/users/8883101/bruno"}, "edited": false, "score": 0, "creation_date": 1524066051, "post_id": 49902848, "comment_id": 86823325, "body": "Yes I was thinking about something like that. However this begs the question: Should the multi-pass guarantee be strengthened since it seems that the algorithms in &lt;algorithm&gt; requiring Forward iterators assume that the &quot;strong&quot; multi-pass guarantee holds ?"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1524065073, "last_edit_date": 1524065073, "creation_date": 1524063075, "answer_id": 49902848, "question_id": 49900562, "link": "https://stackoverflow.com/questions/49900562/strength-of-the-multi-pass-guarantee-for-forward-iterators/49902848#49902848", "title": "Strength of the multi-pass guarantee for forward iterators", "body": "<p>Sure, it's <em>possible</em> to come up with a type that meets all the forward iterator guarantees but isn't perfectly multi-pass. </p>\n\n<pre><code>class Evil {\n    int* p;\n    size_t idx;\n\npublic:\n    using iterator_category = std::forward_iterator_tag;\n    using difference_type = std::ptrdiff_t;\n    using value_type = int;\n    using pointer = int*;\n    using reference = int&amp;;\n\n    Evil() : p(nullptr), idx(0) { }\n    Evil(int* p, size_t idx) : p(p), idx(idx) { }\n    Evil(Evil const&amp; ) = default;\n    Evil&amp; operator=(Evil const&amp; ) = default;\n    ~Evil() = default;\n\n    // only p participates in comparison\n    bool operator==(Evil const&amp; rhs) const {\n        return p == rhs.p &amp;&amp; idx % 2 == rhs.idx % 2; \n    }\n    bool operator!=(Evil const&amp; rhs) const { return !(*this == rhs); }\n\n    // incrementing is sort of destructive\n    Evil&amp; operator++() {\n        ++idx;\n        ++p[idx % 2];\n        return *this;\n    }\n    Evil operator++(int) {\n        auto tmp = *this;\n        ++*this;\n        return tmp;\n    }\n\n    int&amp; operator*() { return p[idx % 2]; }\n};\n</code></pre>\n\n<p>Let's go through the requirements:</p>\n\n<ul>\n<li><code>a == b</code> implies <code>++a == ++b</code>. Check. <code>operator++()</code> doesn't even affect equality. </li>\n<li><code>(void)*a, *a</code> is equivalent to <code>*a</code>. Check, dereferencing isn't destructive.</li>\n<li><code>(void)++X(a), *a</code> is equivalent to <code>*a</code>. Check. Incrementing one changes the <em>other</em> int, not the one this iterator currently \"points\" to. So this condition also holds. </li>\n<li><code>a == b</code> iff <code>*a</code> and <code>*b</code> are bound to the same object. Check. </li>\n</ul>\n\n<p>However, <code>(void)++++X(a), *a</code> is definitely not equivalent to <code>*a</code>. You'll get the same <code>int</code> back, it'll just be one larger. </p>\n\n<p>The fact that I can come up with a comically impractical iterator that doesn't meet the guarantee might suggest that there's an actual practical one that also doesn't meet the guarantee. There's a lot of C++ out there. </p>\n"}], "owner": {"reputation": 285, "user_id": 8883101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72dd202c3271ff3ca9c8d345b3b35fec?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno", "link": "https://stackoverflow.com/users/8883101/bruno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 1, "accepted_answer_id": 49902848, "answer_count": 1, "score": 6, "last_activity_date": 1524065073, "creation_date": 1524056928, "last_edit_date": 1524059772, "question_id": 49900562, "link": "https://stackoverflow.com/questions/49900562/strength-of-the-multi-pass-guarantee-for-forward-iterators", "title": "Strength of the multi-pass guarantee for forward iterators", "body": "<p>Consider the definition of Forward iterators in the standard (draft n4659, [forward.iterators]/27.2.5):</p>\n\n<blockquote>\n  <p>A class or pointer type <code>X</code> satisfies the requirements of a forward iterator if</p>\n  \n  <ul>\n  <li><code>X</code> satisfies the requirements of an input iterator (27.2.3),</li>\n  <li><code>X</code> satisfies the <code>DefaultConstructible</code> requirements (20.5.3.1),</li>\n  <li>If <code>X</code> is a mutable iterator, <code>reference</code> is a reference to <code>T</code>; if <code>X</code> is a constant iterator, <code>reference</code> is a reference to <code>const T</code>,</li>\n  <li>The expressions in Table 97 are valid and have the indicated semantics, and</li>\n  <li>Objects of type <code>X</code> offer the <em>multi-pass guarantee</em>, described below.\n  [note omitted]\n  Two dereferenceable iterators <code>a</code> and <code>b</code> of type <code>X</code> offer the multi-pass guarantee if:\n  \n  <ul>\n  <li><code>a == b</code> implies <code>++a == ++b</code> and</li>\n  <li><code>X</code> is a pointer type or the expression <code>(void)++X(a), *a</code> is equivalent to the expression <code>*a</code>.</li>\n  </ul></li>\n  </ul>\n  \n  <p>[ Note: The requirement that <code>a == b</code> implies <code>++a == ++b</code> (which is not true for input and output iterators) and the removal of the restrictions on the number of the assignments through a mutable iterator (which applies to output iterators) allows the use of multi-pass one-directional algorithms with forward iterators. - end note ]</p>\n  \n  <p>[table 97 omitted]</p>\n  \n  <ul>\n  <li>If <code>a</code> and <code>b</code> are equal, then either <code>a</code> and <code>b</code> are both dereferenceable or else neither is dereferenceable.</li>\n  <li>If <code>a</code> and <code>b</code> are both dereferenceable, then <code>a == b</code> if and only if <code>*a</code> and <code>*b</code> are bound to the same object.</li>\n  </ul>\n</blockquote>\n\n<p>The intent of the multi-pass guarantee seems seems to be about allowing code like:</p>\n\n<pre><code>*iter &lt;---------------------------------------------------\nX iter_copy(iter);                                       |\n/* do something with iter_copy */                        |\n++iter_copy; ... ++iter_copy;                            |\n/* iter has not changed, and *iter now is equivalent     |\n * to *iter before the operations on iter_copy */        |\n*iter &lt;---------------------------------------------------\n</code></pre>\n\n<p>However formally the multi-pass guarantee only seems to imply that doing a copy of iter and incrementing the copy leaves <code>*iter</code> unchanged, and a second subsequent increment to <code>iter_copy</code> might change <code>*iter</code>.</p>\n\n<p>Now your first thought might be \"duh, induction!\", but it seems to fall short of the desired result; all it says is if we do a copy of <code>iter_copy</code> and increment <em>that</em> copy, then <code>*iter_copy</code> is unchanged but it says nothing about the original <code>*iter</code>.</p>\n\n<p><strong>Question: Is it possible to show that the multi-pass guarantee as specified implies what is intended ?</strong></p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1524056954, "post_id": 49900179, "comment_id": 86816509, "body": "I am not sure in what coordinate system your pointcloud is... but R and T are the position of the camera relative to the origin of your point cloud. If the pointcloud is already in the origin, then R and T are not needed. If it is in the model point of view (origin in the center of the pointcloud) then you need an R an T that represents the pose of the camera for this origin.... Take a look to <a href=\"http://answers.opencv.org/question/4379/from-3d-point-cloud-to-disparity-map/\" rel=\"nofollow noreferrer\">this</a> it explains how to use your Q matrix to go to from 3D to disparity map"}, {"owner": {"reputation": 21, "user_id": 9013513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18e2994c6250ef0e79e98e03f4ff2ada?s=128&d=identicon&r=PG&f=1", "display_name": "brayen", "link": "https://stackoverflow.com/users/9013513/brayen"}, "reply_to_user": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1524069994, "post_id": 49900179, "comment_id": 86825773, "body": "Thank you for your answer. That helps a lot already. But now I&#39;m wondering how I could get the coords of the actual left (rectified) image of that point. So am I correct, if I say that to get the coordinates of a certain point in the left image, I could just take the coordinates of the disparity map of that point. And to get the coordinates of the right image I take the disparity coords and add the actual disparity at that point? I&#39;m not sure if it&#39;s clear what I try to explain. What is the default &quot;base&quot; coordinate system of a disparity map, created with stereo SGBM? Many thanks in advance"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 9013513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18e2994c6250ef0e79e98e03f4ff2ada?s=128&d=identicon&r=PG&f=1", "display_name": "brayen", "link": "https://stackoverflow.com/users/9013513/brayen"}, "edited": false, "score": 0, "creation_date": 1524127900, "post_id": 49914309, "comment_id": 86848750, "body": "Thanks for your answer. But I&#39;ve realized I&#39;ve got a more basic problem here. I&#39;ll open up new question for that. Thanks for your help."}], "tags": [], "owner": {"reputation": 507, "user_id": 5725763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HRJw4.jpg?s=128&g=1", "display_name": "Gopiraj", "link": "https://stackoverflow.com/users/5725763/gopiraj"}, "is_accepted": false, "score": 2, "last_activity_date": 1524119969, "creation_date": 1524119969, "answer_id": 49914309, "question_id": 49900179, "link": "https://stackoverflow.com/questions/49900179/project-point-from-point-cloud-to-image-in-opencv/49914309#49914309", "title": "Project point from point cloud to Image in OpenCV", "body": "<p>You have a 3D point and you want to get the corresponding 2D location of it right? If you have the camera calibration matrix (3x3 matrix), you will be able to project the point to the image</p>\n\n<pre><code>cv::Point2d get2DFrom3D(cv::Point3d p, cv::Mat1d CameraMat)\n{\n    cv::Point2d pix;\n    pix.x = (p.x * CameraMat(0, 0)) / p.z + CameraMat(0, 2);\n    pix.y = ((p.y * CameraMat(1, 1)) / p.z + CameraMat(1, 2));\n    return pix;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9013513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18e2994c6250ef0e79e98e03f4ff2ada?s=128&d=identicon&r=PG&f=1", "display_name": "brayen", "link": "https://stackoverflow.com/users/9013513/brayen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3766, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524119969, "creation_date": 1524055756, "question_id": 49900179, "link": "https://stackoverflow.com/questions/49900179/project-point-from-point-cloud-to-image-in-opencv", "title": "Project point from point cloud to Image in OpenCV", "body": "<p>I'm trying to project a point from 3D to 2D in OpenCV with C++. At the Moment, I'm using cv::projectPoints() but it's just not working out.</p>\n\n<p>But first things first. I'm trying to write a program, that finds an intersection between a point cloud and a line in space. So I calibrated two cameras, did rectification and matching using SGBM. Finally I projected the disparity map to 3d using reprojectTo3D(). That all works very well and in meshlab, I can visualize my point cloud.</p>\n\n<p>After that I wrote an algorithm to find the intersection between the point cloud and a line which I coded manually. That works fine, too. I found a point in the point cloud about 1.5 mm away from the line, which is good enough for the beginning. So I took this point and tried to project it back to the image, so I could mark it. But here is the problem.</p>\n\n<p>Now the point is not inside the image anymore. As I took an intersection in the middle of the image, this is not possible. I think the problem could be in the coordinate systems, as I don't know in which coordinate system the point cloud is written (left camera, right camera or something else).</p>\n\n<p>My projectPoints function looks like:</p>\n\n<pre><code>projectPoints(intersectionPoint3D, R, T, cameraMatrixLeft, distortionCoeffsLeft, intersectionPoint2D, noArray(), 0);\n</code></pre>\n\n<p>R and T are the rotation and translation from one camera to another (got that from stereoCalibrate). Here might be my mistake, but how can I fix it? I also tried to set these to (0,0,0) but it doesn't work either. Also I tried to transform the R Matrix using Rodrigues to a vector. Still same problem.</p>\n\n<p>I'm sorry if this has been asked before, but I'm not sure how to search for this problem. I hope my text is clear enought to help me... if you need more information, I will gladly provide it.</p>\n\n<p>Many thanks in advance.</p>\n"}, {"tags": ["c++", "smart-pointers", "unique-ptr"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 7, "creation_date": 1524055726, "post_id": 49900128, "comment_id": 86815648, "body": "That is standard behavior. The smart pointers emulate &quot;real&quot; pointers closely, and by dereferencing a &quot;real&quot; pointer you get what it points to, and it&#39;s the same with the smart pointers."}, {"owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1524055778, "post_id": 49900128, "comment_id": 86815682, "body": "@Someprogrammerdude Thank you for clarifying that for me."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1524055944, "post_id": 49900128, "comment_id": 86815823, "body": "FYI: <code>std::unique_ptr &lt;Frame&gt; localFrame (new Frame(rows, cols));</code> should be <code>auto localFrame = std::make_unique&lt;Frame&gt;(rows, cols);</code>.  This stops a leak if something goes wrong and saves a move/copy"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1524056127, "post_id": 49900128, "comment_id": 86815962, "body": "@NathanOliver unfortunately that requires c++14 and not everybody can afford to switch immediately. And I doubt original form involves copy or move."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1524056418, "post_id": 49900128, "comment_id": 86816156, "body": "@Slava <code>std::make_unique</code> is trivially implementable in C++11. Just grab one of the implementations floating around :)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1524056743, "post_id": 49900128, "comment_id": 86816355, "body": "@Quentin unfortunately I cannot legally implement <code>std::make_unique</code>"}, {"owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1524056837, "post_id": 49900128, "comment_id": 86816416, "body": "@Quentin I am stuck with c++ 11."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1524057252, "post_id": 49900128, "comment_id": 86816721, "body": "If you want to implement your own for C++11 see: <a href=\"https://stackoverflow.com/questions/7038357/make-unique-and-perfect-forwarding\" title=\"make unique and perfect forwarding\">stackoverflow.com/questions/7038357/&hellip;</a>.  Although I stand corrected in my suggestion, <code>make_shared</code> is where you really see the savings.  I&#39;m just used to using <code>make_unique</code> to be consistent."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1524059711, "post_id": 49900128, "comment_id": 86818478, "body": "@Slava why not?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1524061631, "post_id": 49900128, "comment_id": 86819955, "body": "@Quentin I cannot introduce new names into <code>std</code> namespace."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1524062869, "post_id": 49900128, "comment_id": 86820917, "body": "@Slava oh, you&#39;re picking nits -- of course I meant implementing an equivalent function :p"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1524063378, "post_id": 49900128, "comment_id": 86821320, "body": "@Quentin no I am not, I prefer to write <code>std::make_shared</code> or <code>std::make_unique</code>, but putting it into global namespace (or some other) defeats the purpose, I do not want to change source later, so I do not see much benefits of using such function outside of <code>std</code>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1524063607, "post_id": 49900128, "comment_id": 86821501, "body": "@Slava it solves the potential exception safety issue with the unspecified evaluation order in expressions such as <code>foo(std::u_ptr&lt;A&gt;(new A), std::u_ptr&lt;B&gt;(new B))</code>. If both <code>new</code>-expressions are evaluated first, and the second one throws, the first one&#39;s result is leaked."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1524063916, "post_id": 49900128, "comment_id": 86821732, "body": "@Quentin I know, but there is simpler solution, not to write such expression. Anyway what OP uses does not have such issue and there is no copy/move involved"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1524064016, "post_id": 49900128, "comment_id": 86821818, "body": "@Slava yeah, but you have to remember that. Passing two dynamically-allocated objects to a function is not unusual."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1524064201, "post_id": 49900128, "comment_id": 86821957, "body": "@Quentin maybe, but I never seen one. But having exception in middle of that is pretty unusual. Anyway creating your own function can have many headaches (not technical, organizational problems). So thanks for guys in standard, some have to deal with it."}], "answers": [{"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1524056848, "post_id": 49900210, "comment_id": 86816421, "body": "Although, the operator is used quite <i>explicitly</i> here."}], "tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": true, "score": 10, "last_activity_date": 1524056591, "last_edit_date": 1524056591, "creation_date": 1524055836, "answer_id": 49900210, "question_id": 49900128, "link": "https://stackoverflow.com/questions/49900128/passing-unique-ptr-to-a-function-by-reference/49900210#49900210", "title": "passing unique_ptr to a function by reference", "body": "<p>\"Some implicit conversion\" is <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr/operator*\" rel=\"noreferrer\">std::unique_ptr::operator*</a> which is quite a standard operator that returns a reference to the pointed-to object. You don't need to overcomplicate it.</p>\n"}], "owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1341, "favorite_count": 0, "accepted_answer_id": 49900210, "answer_count": 1, "score": 1, "last_activity_date": 1524056591, "creation_date": 1524055641, "question_id": 49900128, "link": "https://stackoverflow.com/questions/49900128/passing-unique-ptr-to-a-function-by-reference", "title": "passing unique_ptr to a function by reference", "body": "<p>I noticed a behaviour in some library that I am compiling, which was slightly unexpected and wanted to clarify that.</p>\n\n<p>There is a class which has a method of the following form:</p>\n\n<pre><code>void notify(Frame &amp; frame);\n</code></pre>\n\n<p>Now, there is a caller which uses a <code>unique_ptr</code> as follows:</p>\n\n<pre><code>std::unique_ptr &lt;Frame&gt; localFrame (new Frame(rows, cols));\n</code></pre>\n\n<p>Now when it calls the method it does:</p>\n\n<pre><code>obj-&gt;notify(*localFrame);\n</code></pre>\n\n<p>So this relies on some implicit conversion of the underlying pointer to a reference.</p>\n\n<p>My question is that is this cross platform and expected behaviour? Is there any use for me to do something something like:</p>\n\n<pre><code>obj-&gt;notify(*localFrame-&gt;get());\n</code></pre>\n"}, {"tags": ["c++", "stack", "postfix-notation"], "comments": [{"owner": {"reputation": 19, "user_id": 9545247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5VFr_JUZKvc/AAAAAAAAAAI/AAAAAAAAAXQ/FCx-MeV8L5c/photo.jpg?sz=128", "display_name": "Niraj Wagh", "link": "https://stackoverflow.com/users/9545247/niraj-wagh"}, "edited": false, "score": 0, "creation_date": 1524055172, "post_id": 49899946, "comment_id": 86815276, "body": "For example. I entered the postfix expression as &quot;23+&quot; and the result was &#39;e&#39;."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1524055296, "post_id": 49899946, "comment_id": 86815367, "body": "Is that the <i>only</i> input you give? What does <code>stack</code> store? <code>int</code> values? What happens if an operation result in a value larger than <code>9</code>?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1524055402, "post_id": 49899946, "comment_id": 86815435, "body": "The <a href=\"http://en.cppreference.com/w/cpp/language/ascii\" rel=\"nofollow noreferrer\">ASCII</a> values for <code>&#39;2&#39;</code> and <code>&#39;3&#39;</code> are <code>50</code> and <code>51</code> respectively. <code>50 + 51</code> is <code>101</code> which happens to be the ASCII value for <code>&#39;e&#39;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 9545247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5VFr_JUZKvc/AAAAAAAAAAI/AAAAAAAAAXQ/FCx-MeV8L5c/photo.jpg?sz=128", "display_name": "Niraj Wagh", "link": "https://stackoverflow.com/users/9545247/niraj-wagh"}, "edited": false, "score": 0, "creation_date": 1524055806, "post_id": 49900039, "comment_id": 86815712, "body": "I performed the conversions but it is working for the results &lt;9.  How can i get the right values of result &gt;9."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 19, "user_id": 9545247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5VFr_JUZKvc/AAAAAAAAAAI/AAAAAAAAAXQ/FCx-MeV8L5c/photo.jpg?sz=128", "display_name": "Niraj Wagh", "link": "https://stackoverflow.com/users/9545247/niraj-wagh"}, "edited": false, "score": 0, "creation_date": 1524055873, "post_id": 49900039, "comment_id": 86815774, "body": "This is what I explained in the paragraph that starts with &quot;This approach is problematic ...&quot;"}, {"owner": {"reputation": 19, "user_id": 9545247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5VFr_JUZKvc/AAAAAAAAAAI/AAAAAAAAAXQ/FCx-MeV8L5c/photo.jpg?sz=128", "display_name": "Niraj Wagh", "link": "https://stackoverflow.com/users/9545247/niraj-wagh"}, "edited": false, "score": 0, "creation_date": 1524056054, "post_id": 49900039, "comment_id": 86815902, "body": "So there is no way I can use a char stack to get the right result?"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 19, "user_id": 9545247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5VFr_JUZKvc/AAAAAAAAAAI/AAAAAAAAAXQ/FCx-MeV8L5c/photo.jpg?sz=128", "display_name": "Niraj Wagh", "link": "https://stackoverflow.com/users/9545247/niraj-wagh"}, "edited": false, "score": 0, "creation_date": 1524056976, "post_id": 49900039, "comment_id": 86816522, "body": "@NirajWagh There is, but it would be very much akin to hammering a square peg into a round hole."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1524055370, "creation_date": 1524055370, "answer_id": 49900039, "question_id": 49899946, "link": "https://stackoverflow.com/questions/49899946/how-to-evaluate-a-postfix-expression-using-character-stack-using-ascii-conversio/49900039#49900039", "title": "How to evaluate a postfix expression using character stack using ASCII conversions", "body": "<p>The problem with your code is that you push digits as characters (which is OK) but you use them as if they were <code>int</code>s. If you would like to keep only characters on the stack, you would need to perform conversions on the way in and on the way out:</p>\n\n<pre><code>int op1=s.pop() - '0';\nint op2=s.pop() - '0';\n...\ns.push(res + '0');\n</code></pre>\n\n<p>This approach is problematic, because you would have no easy way to deal with multi-digit numbers. You would be better off converting your stack to a stack of integers, and modifying your code to work with multi-digit inputs.</p>\n\n<p><strong>Note:</strong> <code>^</code> is a XOR, a bitwise operation. Since all the other operations are arithmetic, I suppose that you wanted <code>'^'</code> to signify raising <code>op1</code> to the power of <code>op2</code>. In this case you should use <code>pow</code> function from the math library.</p>\n"}, {"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1524055496, "creation_date": 1524055496, "answer_id": 49900078, "question_id": 49899946, "link": "https://stackoverflow.com/questions/49899946/how-to-evaluate-a-postfix-expression-using-character-stack-using-ascii-conversio/49900078#49900078", "title": "How to evaluate a postfix expression using character stack using ASCII conversions", "body": "<p>The <a href=\"http://en.cppreference.com/w/cpp/language/ascii\" rel=\"nofollow noreferrer\">ASCII</a> values for <code>'2'</code> and <code>'3'</code> are <code>50</code> and <code>51</code> respectively. <code>50 + 51</code> is <code>101</code> which happens to be the ASCII value for <code>'e'</code>.</p>\n\n<p>You're adding the ASCII <em>encoded</em> values instead of the digits.</p>\n\n<p>To convert a digit to its <code>int</code> equivalent, take a look at that <a href=\"http://en.cppreference.com/w/cpp/language/ascii\" rel=\"nofollow noreferrer\">ASCII table</a> again. Don't you see some pattern when it comes to digits? Experiment with doing e.g. <code>'3' - '0'</code> and see what you get.</p>\n\n<p>When you get it, you will have your solution.</p>\n"}], "owner": {"reputation": 19, "user_id": 9545247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5VFr_JUZKvc/AAAAAAAAAAI/AAAAAAAAAXQ/FCx-MeV8L5c/photo.jpg?sz=128", "display_name": "Niraj Wagh", "link": "https://stackoverflow.com/users/9545247/niraj-wagh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 423, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1534345134, "creation_date": 1524055142, "last_edit_date": 1534345134, "question_id": 49899946, "link": "https://stackoverflow.com/questions/49899946/how-to-evaluate-a-postfix-expression-using-character-stack-using-ascii-conversio", "title": "How to evaluate a postfix expression using character stack using ASCII conversions", "body": "<p>The code is implemented using ADT by including the \"stack.h\" user defined header file.</p>\n\n<p>The header file has code for stack operation.\nI am getting the outputs as weird symbols because of improper ASCII conversions.</p>\n\n<p>What changes should i make in the code to get the correct output.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string.h&gt;\n#include \"stack.h\"\nusing namespace std;\n\nvoid posteva(char postfix[])\n{\n    stack s;\n    int i=0;\n    while(postfix[i]!='\\0')\n    {\n        char x=postfix[i];\n        if(isdigit(x))\n        {\n            s.push(x);\n        }\n        else\n        {\n            int op1=s.pop();\n            int op2=s.pop();\n            int res;\n            switch(x)\n            {\n                case '+':\n                    res=op1+op2;\n                    break;\n                case '-':\n                    res=op1-op2;\n                    break;\n                case '*':\n                    res=op1*op2;\n                    break;\n                case '/':\n                    res=op1/op2;\n                    break;\n                case '%':\n                    res=op1%op2;\n                    break;  \n                case '^':\n                    res=op1^op2;\n                    break;              \n            }\n            s.push(res);\n        }\n        i++;\n    }\n    cout&lt;&lt;\"\\n\\nRESULT :\"&lt;&lt;s.pop();\n}\n\nint main()\n{\n    char postfix[20];\n    cout&lt;&lt;\"\\n\\nEnter the postfix : \";\n    cin&gt;&gt;postfix;\n    posteva(postfix);   \n}\n</code></pre>\n"}, {"tags": ["c++", "tcpsocket", "windows-api-code-pack"], "comments": [{"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1524055748, "post_id": 49899736, "comment_id": 86815667, "body": "Try <a href=\"https://stackoverflow.com/questions/22993997/determining-packet-loss-on-tcp-connection-on-win32-programmatically\">GetTcpStatisticsEx</a>."}, {"owner": {"reputation": 1, "user_id": 9019377, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--Oro5ejedkk/AAAAAAAAAAI/AAAAAAAALWg/Flt33qzblu8/photo.jpg?sz=128", "display_name": "Karguvel Rajan RamaChandran", "link": "https://stackoverflow.com/users/9019377/karguvel-rajan-ramachandran"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1524128055, "post_id": 49899736, "comment_id": 86848830, "body": "Hi Thanks for your response. I want to know Packet loss information per TCP Receiver Socket."}], "owner": {"reputation": 1, "user_id": 9019377, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--Oro5ejedkk/AAAAAAAAAAI/AAAAAAAALWg/Flt33qzblu8/photo.jpg?sz=128", "display_name": "Karguvel Rajan RamaChandran", "link": "https://stackoverflow.com/users/9019377/karguvel-rajan-ramachandran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524054511, "creation_date": 1524054511, "question_id": 49899736, "link": "https://stackoverflow.com/questions/49899736/how-to-know-packet-loss-stats-of-specific-tcp-socket-in-windows-similar-to-how", "title": "How to know packet loss stats of specific TCP socket in Windows? Similar to how Resource Monitor is showing?", "body": "<p>I want to know how to find Packet Loss % and Latency stats from TcpConnectionEstatsPath</p>\n"}, {"tags": ["c++", "algorithm"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 2, "creation_date": 1524055967, "post_id": 49899687, "comment_id": 86815837, "body": "It&#39;s also a completely garbage loop; since if you pass it the vector <code>[1, 100, 200, 300]</code> you&#39;ll find it just crashes.  (You&#39;ll notice that it&#39;s trying to edit the item in the array of index &lt;value of array item&gt; - and thus by having these large numbers it&#39;s going to try to edit data out of bounds)  It should ensure that the value is in range of the size of vector as well as being != 0 or +/- INT32_MAX"}, {"owner": {"reputation": 1011, "user_id": 9583271, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "arcoxia tom", "link": "https://stackoverflow.com/users/9583271/arcoxia-tom"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1524062904, "post_id": 49899687, "comment_id": 86820951, "body": "@UKMonkey <code>[1, 100, 200, 300]</code> seems to work ok?"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1524063408, "post_id": 49899687, "comment_id": 86821350, "body": "try replacing it with <code>.at()</code> rather than <code>[]</code> and you&#39;ll see the exception get thrown."}], "answers": [{"tags": [], "owner": {"reputation": 16438, "user_id": 312896, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/57c5b6cdd1a94aef510d5dce28992494?s=128&d=identicon&r=PG", "display_name": "Yola", "link": "https://stackoverflow.com/users/312896/yola"}, "is_accepted": false, "score": 0, "last_activity_date": 1524055733, "creation_date": 1524055733, "answer_id": 49900171, "question_id": 49899687, "link": "https://stackoverflow.com/questions/49899687/c-finding-the-first-missing-positive-value-in-an-unsorted-array/49900171#49900171", "title": "c++ finding the first missing positive value in an unsorted array", "body": "<p>The idea is to code information about presence of number <code>n</code> as a sign of a number in position <code>A[n-valMin]</code>.</p>\n\n<pre><code>-1,-2147483647,-2,-1,4,3\n</code></pre>\n\n<p>Here we see that 1, 2, 3, 4 are present, because first 4 array elements have minus sign. So, the first absent positive number is 5.</p>\n"}, {"tags": [], "owner": {"reputation": 181, "user_id": 7446248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfdac828a0b32e8977b22f5a2d76bdf0?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Kumar", "link": "https://stackoverflow.com/users/7446248/tarun-kumar"}, "is_accepted": false, "score": 1, "last_activity_date": 1524056904, "creation_date": 1524056904, "answer_id": 49900551, "question_id": 49899687, "link": "https://stackoverflow.com/questions/49899687/c-finding-the-first-missing-positive-value-in-an-unsorted-array/49900551#49900551", "title": "c++ finding the first missing positive value in an unsorted array", "body": "<p>Here, </p>\n\n<blockquote>\n  <p>since we can\u2019t use extra space. I <strong>*can</strong> mark the values to negative to indicate the slot is taken.</p>\n</blockquote>\n\n<p>The solution is using the same <em>input array</em> to mark the slots which are taken. </p>\n\n<p>These lines : </p>\n\n<p><code>int &amp;val = nums[abs(num) - valMin];\n if (val &gt; 0) val = -val;</code></p>\n\n<p><em>abs(num)</em>, because there could be a case like {0,-4,-5,6,1,2,3}, so '2' will be marked '-2' before it is iterated.</p>\n\n<p>These lines are,</p>\n\n<ol>\n<li><p>Getting value at the index 'num' - 1, essentially, as valMin will be 1 always, otherwise it would have returned the function.</p></li>\n<li><p>Then checking if this value is positive, that means this index has never been checked before by the logic, else it would be negative. So, if the value is positive, make is negative, to mark that <strong>value corresponding to this index is present in the array</strong>.</p></li>\n</ol>\n\n<p>So, for example, in the input array, the iterations will be like :</p>\n\n<blockquote>\n  <p>{0,-4,-5,6,1,2,3} => {0,MAX,MAX,6,1,2,3}<br>{0,MAX,MAX,<strong>6</strong>,1,2,3} => {0,MAX,MAX,6,1,-2,3}<br>{0,MAX,MAX,6,<strong>1</strong>,2,3} => {0,MAX,MAX,6,1,-2,3}<br>{0,MAX,MAX,6,1,<strong>2</strong>,3} => {0,-MAX,MAX,6,1,-2,3}<br>{0,MAX,MAX,6,1,2,<strong>3</strong>} => {0,-MAX,-MAX,6,1,-2,3}</p>\n</blockquote>\n\n<p>Then, <code>if (A[i - valMin] &gt; 0) return i;</code> will check the first entry which is positive, that is <code>i-valMin</code> or should I say <code>i-1</code>. So, essentially, the first positive <code>index + 1</code> is the answer. </p>\n\n<p>Here, in the example input array, <code>{0,-MAX,-MAX,6,1,-2,3}</code>; the first positive index is 3, so the answer is 3+1 i.e. 4</p>\n"}], "owner": {"reputation": 1011, "user_id": 9583271, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "arcoxia tom", "link": "https://stackoverflow.com/users/9583271/arcoxia-tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1524056904, "creation_date": 1524054392, "last_edit_date": 1524055446, "question_id": 49899687, "link": "https://stackoverflow.com/questions/49899687/c-finding-the-first-missing-positive-value-in-an-unsorted-array", "title": "c++ finding the first missing positive value in an unsorted array", "body": "<p>I'm trying to understand <a href=\"https://leetcode.com/problems/first-missing-positive/discuss/17179/easy-to-understand-c++-solution\" rel=\"nofollow noreferrer\">this</a> solution that finds the first missing positive value in an unsorted array. It works like this</p>\n\n<blockquote>\n  <p>1, locate min and max of the input, and mark the negative values with a\n  special positive value.\n      2. After ensure the min starts with 1 (otherwise we know \u20181\u2019 is missing), we scan the input, similar to counting sort, since we can\u2019t\n  use extra space. I can\u2019t mark the values to negative to indicate the\n  slot is taken.</p>\n  \n  <p>3.scan the range the input where we just did count on between valMin and valMax, if we can any slot isn\u2019t taken (as in is positive) then we\n  know that\u2019s the slot where the missing number is.</p>\n</blockquote>\n\n<p>My question is what are these 2 lines doing? </p>\n\n<pre><code>int &amp;val = nums[abs(num) - valMin];\nif (val &gt; 0) val = -val;\n</code></pre>\n\n<p>For example if your input array is <code>{ 1, -3, 2, 1, 4, 3 };</code> \nafter this point your array becomes <code>-1,-2147483647,-2,-1,4,3</code></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n#include &lt;limits.h&gt;\n\nusing namespace std;\n\nint firstMissingPositive(vector&lt;int&gt; &amp;A) {\n\n        int valMin = INT32_MAX, valMax = 0;\n\n        for (auto &amp;num:A) {\n\n            if (num &gt; 0) {\n                valMin = min(valMin, num);\n                valMax = max(valMax, num);\n\n            } else {\n\n                num = INT32_MAX;\n\n            }\n        }\n\n        for (auto &amp;num:A)\n            cout &lt;&lt; num &lt;&lt; \",\";\n\n        cout &lt;&lt; \"\\n\";\n\n        if (valMin != 1) return 1;\n        for (int &amp;num:A) {\n            if (num != 0 and abs(num) != INT32_MAX) {\n                int &amp;val = A[abs(num) - valMin];\n                if (val &gt; 0) val = -val;\n            }\n        }\n        for (auto &amp;num:A)\n                    cout &lt;&lt; num &lt;&lt; \",\";\n\n        //scan the range the input where we just did count on between valMin and valMax,\n        //if we can any slot isn\u2019t taken (as in is positive) then we know that\u2019s the slot where the missing number is.\n\n        for (int i = valMin; i &lt; valMax; ++i) {\n            if (A[i - valMin] &gt; 0) return i;\n        }\n        return valMax + 1;\n    }\n\nint main()\n{\n    std::vector&lt;int&gt; v = { 1, -3, 2, 1, 4, 3 };\n    int answer = firstMissingPositive(v);\n    cout &lt;&lt; answer;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "vim", "compiler-warnings", "syntastic"], "answers": [{"comments": [{"owner": {"reputation": 343, "user_id": 4700818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aef9c7b3bf82528c4e5e16652aeeb76?s=128&d=identicon&r=PG&f=1", "display_name": "dekuShrub", "link": "https://stackoverflow.com/users/4700818/dekushrub"}, "edited": false, "score": 0, "creation_date": 1524127886, "post_id": 49904044, "comment_id": 86848737, "body": "So... can I just type <code>let g:syntastic_cpp_compiler_options=&quot;-Wall&quot;</code> to enable warnings and it will not overwrite any of the default settings (if there are any)?"}, {"owner": {"reputation": 38, "user_id": 3723030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa4b0e57b53af43dba222170f520484f?s=128&d=identicon&r=PG&f=1", "display_name": "user3723030", "link": "https://stackoverflow.com/users/3723030/user3723030"}, "reply_to_user": {"reputation": 343, "user_id": 4700818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aef9c7b3bf82528c4e5e16652aeeb76?s=128&d=identicon&r=PG&f=1", "display_name": "dekuShrub", "link": "https://stackoverflow.com/users/4700818/dekushrub"}, "edited": false, "score": 0, "creation_date": 1524130453, "post_id": 49904044, "comment_id": 86850493, "body": "yep, i will keep 2 or 3 settings in the .vimrc, commenting out the unnecessary. use &quot; to comment a row"}, {"owner": {"reputation": 343, "user_id": 4700818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aef9c7b3bf82528c4e5e16652aeeb76?s=128&d=identicon&r=PG&f=1", "display_name": "dekuShrub", "link": "https://stackoverflow.com/users/4700818/dekushrub"}, "edited": false, "score": 0, "creation_date": 1524134586, "post_id": 49904044, "comment_id": 86853369, "body": "Ok, nice! it seems to work for me to simply set all my usual flags in that string. Are the options you have written in the answer <code>-m32 -I .&#47;inc -I .&#47;inc&#47;libs</code> relevant for me? I don&#39;t recognize any of them."}, {"owner": {"reputation": 38, "user_id": 3723030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa4b0e57b53af43dba222170f520484f?s=128&d=identicon&r=PG&f=1", "display_name": "user3723030", "link": "https://stackoverflow.com/users/3723030/user3723030"}, "reply_to_user": {"reputation": 343, "user_id": 4700818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aef9c7b3bf82528c4e5e16652aeeb76?s=128&d=identicon&r=PG&f=1", "display_name": "dekuShrub", "link": "https://stackoverflow.com/users/4700818/dekushrub"}, "edited": false, "score": 0, "creation_date": 1524141760, "post_id": 49904044, "comment_id": 86858311, "body": "yea i just pasted my settings, you can put any valid gcc/g++ flags there. the ones you see will add include directories, and force 32bit output"}], "tags": [], "owner": {"reputation": 38, "user_id": 3723030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa4b0e57b53af43dba222170f520484f?s=128&d=identicon&r=PG&f=1", "display_name": "user3723030", "link": "https://stackoverflow.com/users/3723030/user3723030"}, "is_accepted": true, "score": 2, "last_activity_date": 1524066813, "creation_date": 1524066813, "answer_id": 49904044, "question_id": 49899495, "link": "https://stackoverflow.com/questions/49899495/vim-syntastic-show-warnings-and-set-warning-level/49904044#49904044", "title": "Vim Syntastic show warnings and set warning level", "body": "<p>for every project,\nin .vimrc in the project folder i will put something like</p>\n\n<pre><code>let g:syntastic_cpp_compiler_options=\"-m32 -I ./inc -I ./inc/libs\"\n</code></pre>\n\n<p>you can select <strong>-w</strong>, -Wno- or any warning level you want</p>\n\n<p>use g:syntastic_c_compiler_options for pure C code</p>\n\n<p>ofcourse you put this in the global .vimrc. here we use vim to edit code in several programming languages, so we use different .vimrc per project</p>\n"}], "owner": {"reputation": 343, "user_id": 4700818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aef9c7b3bf82528c4e5e16652aeeb76?s=128&d=identicon&r=PG&f=1", "display_name": "dekuShrub", "link": "https://stackoverflow.com/users/4700818/dekushrub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 887, "favorite_count": 0, "accepted_answer_id": 49904044, "answer_count": 1, "score": 0, "last_activity_date": 1524066813, "creation_date": 1524053756, "question_id": 49899495, "link": "https://stackoverflow.com/questions/49899495/vim-syntastic-show-warnings-and-set-warning-level", "title": "Vim Syntastic show warnings and set warning level", "body": "<p>I use Vim with syntastic to code in C++ and I see all errors but I don't get any warnings. It would be nice if I didn't have to use the compiler in the terminal just to get all compiler-messages. Some errors differ in different c++ standards so it should be possible to at least change the version of c++ to error-check for.</p>\n\n<ul>\n<li>How do I do I show warnings?</li>\n<li>How do I set the warning levels and settings as I do when I compile a program using g++?</li>\n<li>How do I set this up if I start using another language? If I get a specific command to run for c++, then I would be lost the next time.</li>\n</ul>\n\n<p>I can't find how to do this from the manual at <code>:h syntastic</code>. I have only looked at the sections that I thought were relevant however.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "edited": false, "score": 4, "creation_date": 1524053119, "post_id": 49899236, "comment_id": 86813976, "body": "Your array has 3 elements not 4, you are reading element out of range in this line <code>arr[3] = defence;</code>."}, {"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1524053213, "post_id": 49899236, "comment_id": 86814030, "body": "Your <code>Tank</code> and <code>Warplane</code> classes look identical, at least, API wise. Why don&#39;t you use a single class instead?"}, {"owner": {"reputation": 19, "user_id": 9522172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395fe9c98fa461016f03b92afc02c14c?s=128&d=identicon&r=PG&f=1", "display_name": "HappyEnd", "link": "https://stackoverflow.com/users/9522172/happyend"}, "reply_to_user": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "edited": false, "score": 0, "creation_date": 1524053763, "post_id": 49899236, "comment_id": 86814334, "body": "@rafix07 it&#39;s just typo, I&#39;ve improve this but the problem is same."}, {"owner": {"reputation": 19, "user_id": 9522172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395fe9c98fa461016f03b92afc02c14c?s=128&d=identicon&r=PG&f=1", "display_name": "HappyEnd", "link": "https://stackoverflow.com/users/9522172/happyend"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1524053767, "post_id": 49899236, "comment_id": 86814337, "body": "@vahancho yes they do, but I&#39;m setting to them different graphics, I could create 1 class and inherit from her but, idk you think this will solve the problem ?"}, {"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1524053890, "post_id": 49899236, "comment_id": 86814407, "body": "@HappyEnd, my comment was just observation. I didn&#39;t mean it will solve the problem, but it definitely may help to avoid such problems. Anyways, you could reconsider your class design."}, {"owner": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "edited": false, "score": 0, "creation_date": 1524054582, "post_id": 49899236, "comment_id": 86814868, "body": "The SIGSEGV happens when accessing <i>this</i>. Are you sure the Warplane object is valid when you call showStatisticOfWarplane() ? Also, is there any other thread involved in the lifecycle of that object?"}, {"owner": {"reputation": 1043, "user_id": 3668507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d75ecbb1ee181e25bb0b4c781fe8680f?s=128&d=identicon&r=PG&f=1", "display_name": "Taron", "link": "https://stackoverflow.com/users/3668507/taron"}, "edited": false, "score": 0, "creation_date": 1524060579, "post_id": 49899236, "comment_id": 86819144, "body": "It is really a bad Idea to allocate an array with new and return it outside the class. Nobody knows the ownership of this array and the caller is supposed to delete it later. This is bad design. Return a object or a unique_ptr or shared_ptr at least"}, {"owner": {"reputation": 19, "user_id": 9522172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395fe9c98fa461016f03b92afc02c14c?s=128&d=identicon&r=PG&f=1", "display_name": "HappyEnd", "link": "https://stackoverflow.com/users/9522172/happyend"}, "reply_to_user": {"reputation": 1043, "user_id": 3668507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d75ecbb1ee181e25bb0b4c781fe8680f?s=128&d=identicon&r=PG&f=1", "display_name": "Taron", "link": "https://stackoverflow.com/users/3668507/taron"}, "edited": false, "score": 0, "creation_date": 1524073484, "post_id": 49899236, "comment_id": 86827664, "body": "Yea, the problem was that the warplane pointer were not valid... My bad, stupid mistake... @Taron thanks for ideas, I&#39;ll try to fix this :)"}, {"owner": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "edited": false, "score": 0, "creation_date": 1524074051, "post_id": 49899236, "comment_id": 86827959, "body": "@HappyEnd I added my answer, for people who may read your question in the future."}], "answers": [{"tags": [], "owner": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "is_accepted": true, "score": 1, "last_activity_date": 1524074012, "creation_date": 1524074012, "answer_id": 49906061, "question_id": 49899236, "link": "https://stackoverflow.com/questions/49899236/qt-variable-assignment-no-such-value-sigsegv/49906061#49906061", "title": "QT variable assignment, &lt;no such value&gt;, SIGSEGV", "body": "<p>The SIGSEGV happens when trying to access <em>amountOfWarplanes</em> which is an internal member of the class <strong>Warplane</strong>. This means it happens while trying to access <strong>this</strong>.</p>\n\n<p>These conditions suggest that the Warplane pointer is invalid.</p>\n"}], "owner": {"reputation": 19, "user_id": 9522172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395fe9c98fa461016f03b92afc02c14c?s=128&d=identicon&r=PG&f=1", "display_name": "HappyEnd", "link": "https://stackoverflow.com/users/9522172/happyend"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "accepted_answer_id": 49906061, "answer_count": 1, "score": 0, "last_activity_date": 1524074012, "creation_date": 1524052912, "question_id": 49899236, "link": "https://stackoverflow.com/questions/49899236/qt-variable-assignment-no-such-value-sigsegv", "title": "QT variable assignment, &lt;no such value&gt;, SIGSEGV", "body": "<p>I've got 3 clases, every one have 3 variables of int type. Also 3 member functions in which I try to assign those variables to dynamic array and return the array. In first case every thing is fine, problems apears when i try to assign variables from second and the third class.</p>\n\n<pre><code>#ifndef TANK_H\n#define TANK_H\n\n#include &lt;QObject&gt;\n#include &lt;QGraphicsScene&gt;\n#include &lt;QGraphicsPixmapItem&gt;\n\nclass Tank : public QObject, public QGraphicsPixmapItem\n{\n    Q_OBJECT\npublic:\n    explicit Tank(QObject *parent = nullptr);\n    void setTanks(int x, int y, QGraphicsScene * scene);\n    void addTanks(int howMany = 0);\n    int * showStatisticsOfTank();\n\nprotected:\n    QGraphicsScene * scene;\n    int coordinateX, coordinateY;\n\n    int amountOfTanks;\n    int attack;\n    int defence;\n    int cost;\nsignals:\npublic slots:\n};\n\n#endif // TANK_H\n</code></pre>\n\n<p>In .cpp file:</p>\n\n<pre><code>int *Tank::showStatisticsOfTank()\n{\n    int * arr = new int[3];\n    arr[0] = amountOfTanks;\n    arr[1] = attack;\n    arr[2] = defence;\n    return arr;\n}\n</code></pre>\n\n<p>This works...\nBut:</p>\n\n<pre><code>#ifndef WARPLANE_H\n#define WARPLANE_H\n\n#include &lt;QObject&gt;\n#include &lt;QGraphicsScene&gt;\n#include &lt;QGraphicsPixmapItem&gt;\n\nclass Warplane : public QObject, public QGraphicsPixmapItem\n{\n    Q_OBJECT\npublic:\n    explicit Warplane(QObject *parent = nullptr);\n    void setWarplane(int x, int y, QGraphicsScene * scene);\n    void addWarplane(int howMany = 0);\n    int * showStatisticOfWarplane();\n\nprotected:\n    QGraphicsScene * scene;\n    int coordinateX, coordinateY;\n\n    int amountOfWarplanes;\n    int attack;\n    int defence;\n    int cost;\nsignals:  \npublic slots:\n};\n\n#endif // WARPLANE_H\n</code></pre>\n\n<p>In .cpp file:</p>\n\n<pre><code>int *Warplane::showStatisticOfWarplane()\n{\n    int * arr = new int[3];\n    arr[0] = amountOfWarplanes; //HERE ERROR SHOWS UP\n    arr[1] = attack;\n    arr[3] = defence;\n    return arr;\n}\n</code></pre>\n\n<p>This doesn't... The SIGSEGV error shows up and debugger stops at this line. When I'm trying to look what value is in the amountOfWarplanes,attack and defence it says:</p>\n\n<pre><code>&lt;no such value&gt;. \n</code></pre>\n\n<p>The third class is pretty the same, and when I comment out the second class error apears in third class in the same spot. I tried to clean all -> rebuild, doesn't works.</p>\n"}, {"tags": ["android", "c++", "opencv", "java-native-interface", "opencv-stitching"], "comments": [{"owner": {"reputation": 941, "user_id": 3483932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WeG2V.jpg?s=128&g=1", "display_name": "FanFM", "link": "https://stackoverflow.com/users/3483932/fanfm"}, "edited": false, "score": 0, "creation_date": 1562679629, "post_id": 49899180, "comment_id": 100446184, "body": "I have the same problem. So, did you solve this problem?"}], "answers": [{"comments": [{"owner": {"reputation": 288, "user_id": 4343845, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-XjmNy0hUlsE/AAAAAAAAAAI/AAAAAAAADag/ywAy1F7fFac/photo.jpg?sz=128", "display_name": "Ricardo Chen He", "link": "https://stackoverflow.com/users/4343845/ricardo-chen-he"}, "edited": false, "score": 0, "creation_date": 1606294117, "post_id": 60448274, "comment_id": 114917989, "body": "Awesome, made my night."}], "tags": [], "owner": {"reputation": 87, "user_id": 1926763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcDPg.jpg?s=128&g=1", "display_name": "Victor Shpyrka", "link": "https://stackoverflow.com/users/1926763/victor-shpyrka"}, "is_accepted": false, "score": 2, "last_activity_date": 1582880267, "creation_date": 1582880267, "answer_id": 60448274, "question_id": 49899180, "link": "https://stackoverflow.com/questions/49899180/error49-undefined-reference-to-cvstitchercreatedefaultbool-in-using-o/60448274#60448274", "title": "Error:(49) undefined reference to &#39;cv::Stitcher::createDefault(bool)&#39; in using OpenCV native in Android", "body": "<p>I had a quite similar problem and solved it with linking \"libopencv_stitching.a\" static library from OpenCV SDK in my CMakeLists.txt file.</p>\n\n<pre><code>file(GLOB CVLIBS \npath/to/your/opencv/sdk/staticlibs/${ANDROID_ABI}/libopencv_stitching.a)\n...\ntarget_link_libraries( # Specifies the target library.\n...\n${CVLIBS}\n# Links the target library to the log library\n# included in the NDK.\n${log-lib})\n</code></pre>\n\n<p>Also this answer can be useful as well: <a href=\"https://stackoverflow.com/questions/40948953/building-opencv-for-android-and-using-it-with-the-ndk\">Building OpenCV for Android and using it with the NDK</a></p>\n"}], "owner": {"reputation": 9667, "user_id": 4675736, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/yXNEM.jpg?s=128&g=1", "display_name": "Wai Yan Hein", "link": "https://stackoverflow.com/users/4675736/wai-yan-hein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 482, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1582880267, "creation_date": 1524052732, "last_edit_date": 1524052839, "question_id": 49899180, "link": "https://stackoverflow.com/questions/49899180/error49-undefined-reference-to-cvstitchercreatedefaultbool-in-using-o", "title": "Error:(49) undefined reference to &#39;cv::Stitcher::createDefault(bool)&#39; in using OpenCV native in Android", "body": "<p>I am developing an Android application that involves some image processing. I am now stitching images using OpenCV. I am doing it in c++. So, I integrated the OpenCV (both native c++ and Java) into my Android project. But when I use the stitching features in c++ and run my project, it is giving me the compilation error. </p>\n\n<p>This is my whole c++ library (native-lib) for stitching images.</p>\n\n<pre><code>//\n// Created by Acer on 3/28/2018.\n//\n\n#include &lt;jni.h&gt;\n#include &lt;string&gt;\n\n#include &lt;opencv2/core/core.hpp&gt;\n#include &lt;opencv2/imgproc/imgproc.hpp&gt;\n#include &lt;opencv2/features2d/features2d.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;opencv2/stitching.hpp&gt;\n\nusing namespace std;\nusing namespace cv;\n\nextern \"C\" {\njstring\nJava_media_memento_memento_SphereCameraActivity_stitchPhotos(\n        JNIEnv *env,\n        jobject /* this */, jlong addrMat, jlong addrNewMat, jlongArray addrsPreviews) {\n\n\n\n    Mat &amp;in = *(Mat *) addrMat;\n    Mat &amp;newMat = *(Mat *) addrNewMat;\n    int size = env-&gt;GetArrayLength(addrsPreviews);\n    jlong *addrPreviewArray = env-&gt;GetLongArrayElements(addrsPreviews, NULL);\n    vector&lt;Mat&gt; imgs(size);\n    for (long i = 0; i &lt; size; i++) {\n        jlong previewAddress = addrPreviewArray[i];\n        imgs[i] = *(Mat *) previewAddress;\n    }\n\n\n    bool try_use_gpu = false;\n    Mat pano;\n    Stitcher stitcher = Stitcher::createDefault(try_use_gpu);\n    Stitcher::Status status = stitcher.stitch(imgs, pano);\n\n    if (status != Stitcher::OK) {\n        //the return map would be null\n    } else {\n        //copy the map.\n        pano.copyTo(newMat);\n        newMat = pano;\n    }\n\n    env-&gt;ReleaseLongArrayElements(addrsPreviews, addrPreviewArray, 0);\n}\n\n}\n</code></pre>\n\n<p>This is my CMakeList.txt file</p>\n\n<pre><code>set(pathToProject C:/Users/iljim/Desktop/memento/memento-android)\nset(pathToOpenCv C:/Users/iljim/Desktop/OpenCV-3.1.0-android-sdk/OpenCV-android-sdk)\n\n# Sets the minimum version of CMake required to build your native library.\n# This ensures that a certain set of CMake features is available to\n# your build.\n\ncmake_minimum_required(VERSION 3.4.1)\n\nset(CMAKE_VERBOSE_MAKEFILE on)\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=gnu++11\")\n\ninclude_directories(C:/Users/iljim/Desktop/OpenCV-3.1.0-android-sdk/OpenCV-android-sdk/sdk/native/jni/include)\n\n\n# Specifies a library name, specifies whether the library is STATIC or\n# SHARED, and provides relative paths to the source code. You can\n# define multiple libraries by adding multiple add_library() commands,\n# and CMake builds them for you. When you build your app, Gradle\n# automatically packages shared libraries with your APK.\n\nadd_library( # Specifies the name of the library.\n             native-lib\n\n             # Sets the library as a shared library.\n             SHARED\n\n             # Provides a relative path to your source file(s).\n             src/main/cpp/native-lib.cpp )\n\nadd_library( # Specifies the name of the library.\n            cubemap\n\n             # Sets the library as a shared library.\n             SHARED\n\n             # Provides a relative path to your source file(s).\n             src/main/cpp/cubemap.cpp )\n\n\nadd_library( lib_opencv SHARED IMPORTED )\nset_target_properties(lib_opencv PROPERTIES IMPORTED_LOCATION ${CMAKE_CURRENT_SOURCE_DIR}/src/main/jniLibs/${ANDROID_ABI}/libopencv_java3.so)\n\n\n\n\n# Searches for a specified prebuilt library and stores the path as a\n# variable. Because system libraries are included in the search path by\n# default, you only need to specify the name of the public NDK library\n# you want to add. CMake verifies that the library exists before\n# completing its build.\n\nfind_library( # Sets the name of the path variable.\n              log-lib\n\n              # Specifies the name of the NDK library that\n              # you want CMake to locate.\n              log )\n\n# Specifies libraries CMake should link to your target library. You\n# can link multiple libraries, such as libraries you define in the\n# build script, prebuilt third-party libraries, or system libraries.\n\ntarget_link_libraries( # Specifies the target library.\n                       native-lib\n\n                       # OpenCV lib\n                       lib_opencv\n\n                       # Cubemap lib\n                       cubemap\n\n                       # Links the target library to the log library\n                       # included in the NDK.\n                       ${log-lib} )\n</code></pre>\n\n<p>When I run, I got the mentioned error.</p>\n\n<pre><code>Error:error: linker command failed with exit code 1 (use -v to see invocation)\nError:(49) undefined reference to 'cv::Stitcher::createDefault(bool)'\nError:(50) undefined reference to 'cv::Stitcher::stitch(cv::_InputArray const&amp;, cv::_OutputArray const&amp;)'\n</code></pre>\n\n<p>I found this link - <a href=\"https://stackoverflow.com/questions/44512462/undefined-reference-to-cvstitchercreatedefaultbool\">undefined reference to `cv::Stitcher::createDefault(bool)&#39;</a>. But I believe I integrated the c++ opencv native lib properly. That is why I can use other libraries. When I check the file in the SDK folder, the stitching.hpp exists. So, what might be possible and how can I solve it?</p>\n"}, {"tags": ["c++", "qt", "c++11", "plugins", "qml"], "comments": [{"owner": {"reputation": 1758, "user_id": 8724882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d88f8198fb4ae68267aced911e3533f9?s=128&d=identicon&r=PG&f=1", "display_name": "sandwood", "link": "https://stackoverflow.com/users/8724882/sandwood"}, "edited": false, "score": 0, "creation_date": 1524052849, "post_id": 49899071, "comment_id": 86813796, "body": "plugin can also we written plug-in so it means you plug something in something else right ? so basically your question is a non-sense in itself"}, {"owner": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "edited": false, "score": 0, "creation_date": 1524055974, "post_id": 49899071, "comment_id": 86815844, "body": "Plug into what? You could certainly have a DLL that launches a GUI when loaded, or changes an existing GUI."}, {"owner": {"reputation": 8160, "user_id": 1035613, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b4d6ce44848765d7b02e4309c9efe9bb?s=128&d=identicon&r=PG", "display_name": "Dmitry Sazonov", "link": "https://stackoverflow.com/users/1035613/dmitry-sazonov"}, "edited": false, "score": 0, "creation_date": 1524062279, "post_id": 49899071, "comment_id": 86820467, "body": "<a href=\"http://doc.qt.io/qt-5/plugins-howto.html\" rel=\"nofollow noreferrer\">Plugins in Qt how-to</a>"}, {"owner": {"reputation": 31, "user_id": 7057240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b455450c31a051824eafc5e482c0fe0?s=128&d=identicon&r=PG&f=1", "display_name": "Milad Karimi", "link": "https://stackoverflow.com/users/7057240/milad-karimi"}, "reply_to_user": {"reputation": 1758, "user_id": 8724882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d88f8198fb4ae68267aced911e3533f9?s=128&d=identicon&r=PG&f=1", "display_name": "sandwood", "link": "https://stackoverflow.com/users/8724882/sandwood"}, "edited": false, "score": 0, "creation_date": 1524062760, "post_id": 49899071, "comment_id": 86820832, "body": "the major application is digital cluster instrument and there will be 4-5 application in it(navigation , player , phone etc). so i want the whole media app load when it is in use and unload it when no need for it.  sorry for my bad English.@Cubic @sandwood"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 7057240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b455450c31a051824eafc5e482c0fe0?s=128&d=identicon&r=PG&f=1", "display_name": "Milad Karimi", "link": "https://stackoverflow.com/users/7057240/milad-karimi"}, "edited": false, "score": 0, "creation_date": 1524063123, "post_id": 49901125, "comment_id": 86821106, "body": "the major application is digital instrument cluster and inside it we have 4-5 application like media player , navigation , phone etc. for example we want the whole media player as plugin so we can load/unload it whenever it is in use. and the media player is designed with Qml/C++ so it is not just a c++shared object."}, {"owner": {"reputation": 150, "user_id": 9584062, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gOWs7oDUj3k/AAAAAAAAAAI/AAAAAAAAAAk/iwx7FvoxMeE/photo.jpg?sz=128", "display_name": "el famoso", "link": "https://stackoverflow.com/users/9584062/el-famoso"}, "reply_to_user": {"reputation": 31, "user_id": 7057240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b455450c31a051824eafc5e482c0fe0?s=128&d=identicon&r=PG&f=1", "display_name": "Milad Karimi", "link": "https://stackoverflow.com/users/7057240/milad-karimi"}, "edited": false, "score": 0, "creation_date": 1524103263, "post_id": 49901125, "comment_id": 86838995, "body": "i see... just read the plugin documentation it&#39;s not very complicated"}], "tags": [], "owner": {"reputation": 150, "user_id": 9584062, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gOWs7oDUj3k/AAAAAAAAAAI/AAAAAAAAAAk/iwx7FvoxMeE/photo.jpg?sz=128", "display_name": "el famoso", "link": "https://stackoverflow.com/users/9584062/el-famoso"}, "is_accepted": false, "score": 1, "last_activity_date": 1524058458, "creation_date": 1524058458, "answer_id": 49901125, "question_id": 49899071, "link": "https://stackoverflow.com/questions/49899071/create-qml-c-application-as-a-plugin/49901125#49901125", "title": "Create Qml/C++ application as a plugin", "body": "<p>You can create your (<strong>almost</strong>) whole application as a plugin. <strong>But</strong> you will at some point need an executable to load your plugin.</p>\n\n<p>But making your whole application as a plugin isn't the best way. Only use plugins for the parts of your application that you will change,  so that you only have to update the plugins file that are dynamically loaded, and let the rest stay static.</p>\n\n<p>Now you also need to do some research by yourself, read the documentation, find out how to make and use a Qt plugin... Your question isn't specific and answers are not tutorials...</p>\n"}], "owner": {"reputation": 31, "user_id": 7057240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b455450c31a051824eafc5e482c0fe0?s=128&d=identicon&r=PG&f=1", "display_name": "Milad Karimi", "link": "https://stackoverflow.com/users/7057240/milad-karimi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524398671, "creation_date": 1524052394, "last_edit_date": 1524398671, "question_id": 49899071, "link": "https://stackoverflow.com/questions/49899071/create-qml-c-application-as-a-plugin", "title": "Create Qml/C++ application as a plugin", "body": "<p>I wonder if it is possible to create an application as a plugin so it can be use inside another Gui application. Something like a media player with <strong>Qml</strong> in front (not widgets) inside a digital instrument cluster so that we can <strong>load/unload</strong> it whenever we need.\nI know about shared objects and routine of making a c++ plugin.but I need GUI/qml apps as a plugin. Please let me know if it is possible and the steps required?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "windows", "winapi", "process", "createprocess"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1524052355, "post_id": 49899007, "comment_id": 86813487, "body": "child process independent from parent. it not died when killed parent."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1524052487, "post_id": 49899007, "comment_id": 86813566, "body": "you of course can exec process inside job object and kill all processes in job, but not think this is good solution - kill processes. every process must correct exit"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 2, "creation_date": 1524053238, "post_id": 49899007, "comment_id": 86814044, "body": "possibly related: <a href=\"https://stackoverflow.com/questions/53208/how-do-i-automatically-destroy-child-processes-in-windows?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\" title=\"how do i automatically destroy child processes in windows\">stackoverflow.com/questions/53208/&hellip;</a>"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1524053525, "post_id": 49899007, "comment_id": 86814203, "body": "Agree. @BillLumbert: Please indicate if there&#39;s any difference between that question and this one."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1524054191, "post_id": 49899007, "comment_id": 86814586, "body": "really need call <code>TerminateJobObject </code> instead set <code>JOB_OBJECT_LIMIT_KILL_ON_JOB_CLOSE</code> limit, if we want terminate all process tree. anyway this not good idea. or what sense call <code>GetExitCodeProcess</code> before <code>TerminateProcess</code> ?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1524054591, "post_id": 49899007, "comment_id": 86814873, "body": "This sounds like you are trying to implement a service rather than a regular application. In that case, the service control manager already implements dependency management for you."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1524055806, "post_id": 49899007, "comment_id": 86815711, "body": "@IInspectable - nobody (including scm) will be kill child process. dependency management here unrelated"}], "owner": {"reputation": 3341, "user_id": 2196255, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/4b3b3f880a75076742544f6f7b2b7fa2?s=128&d=identicon&r=PG", "display_name": "Bill Lumbert", "link": "https://stackoverflow.com/users/2196255/bill-lumbert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524052234, "creation_date": 1524052234, "question_id": 49899007, "link": "https://stackoverflow.com/questions/49899007/c-process-launched-from-another-process-is-not-killed-when-an-initial-one-is", "title": "C++ - Process launched from another process is not killed when an initial one is killed", "body": "<p>I have a problem that a process created inside of another one is left, when the parent one is killed with something like 'kill task'. More precisely, application launches general_service.exe. Inside of this service, I launch a new logger_runner.exe. When main application stops, it just kill general_service.exe, but in task manager I see my logger_runner.exe. When I stop general_service.exe in VS, it is left as well.\nHow to make my logger_runner depends on general_service ?</p>\n\n<p>Thanks for the help!</p>\n\n<p>This function starts my .exe</p>\n\n<pre><code>void startLogger(PROCESS_INFORMATION &amp; processInformation) {\n    std::wstring commandLine = L\"\\\"\" + PathUtils::programFolder() + LR\"(\\logger_runner.exe)\" + L\"\\\"\";\n\n    STARTUPINFOW startupInfo;\n\n    memset(&amp;startupInfo, 0, sizeof(startupInfo));\n    memset(&amp;processInformation, 0, sizeof(processInformation));\n\n    wchar_t* commandLineCopy = _wcsdup(commandLine.c_str());\n\n    if (!CreateProcessW(NULL,           // No module name (use command line)\n       commandLineCopy,                // Command line\n       NULL,                           // Process handle not inheritable\n       NULL,                           // Thread handle not inheritable\n       TRUE,                          // Set handle inheritance to FALSE\n       0,                              // No creation flags\n       NULL,                           // Use parent's environment block\n       NULL,                           // Use parent's starting directory \n       &amp;startupInfo,                   // Pointer to STARTUPINFO structure\n       &amp;processInformation)            // Pointer to PROCESS_INFORMATION structure\n    )\n   {\n       free(commandLineCopy);\n       throw SystemException();\n   }\n\n   free(commandLineCopy);\n</code></pre>\n\n<p>}</p>\n\n<p>This function should ends logger_runner.exe</p>\n\n<pre><code>void closeLogger(PROCESS_INFORMATION &amp; processInformation) {\n    // Check exit code\n    DWORD exitCode = 0;\n    GetExitCodeProcess(processInformation.hProcess, &amp;exitCode);\n\n    if (TerminateProcess(processInformation.hProcess, 0) == 0) {\n        std::cerr &lt;&lt; \"Could not terminate logger process\\n\";\n    }\n\n    // Close process and thread handles. \n    CloseHandle(processInformation.hProcess);\n    CloseHandle(processInformation.hThread);\n}\n</code></pre>\n\n<p>All these functions are called inside of the wrapper</p>\n\n<pre><code>class LoggerWrapper {\npublic:\n    LoggerWrapper() {\n        startLogger(m_processInformation);\n    };\n\n    ~LoggerWrapper() {\n        closeLogger(m_processInformation);\n    }\nprivate:\n    PROCESS_INFORMATION m_processInformation;\n};\n</code></pre>\n\n<p>In wmain function of my general_service solution, I just call </p>\n\n<pre><code>LoggerWrapper logger\n</code></pre>\n"}, {"tags": ["c++", "linux", "visual-studio", "boost"], "comments": [{"owner": {"reputation": 15, "user_id": 9663867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0aba523235ba14cd8b5d16d04c18e91?s=128&d=identicon&r=PG&f=1", "display_name": "MooN_Tiga", "link": "https://stackoverflow.com/users/9663867/moon-tiga"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1524052586, "post_id": 49898806, "comment_id": 86813630, "body": "@VTT I did everything according to this tutorial: <a href=\"https://www.boost.org/doc/libs/1_61_0/more/getting_started/unix-variants.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_61_0/more/getting_started/&hellip;</a> (Step 5.1). So it should be complete."}], "answers": [{"comments": [{"owner": {"reputation": 423, "user_id": 4286324, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/84L0s.jpg?s=128&g=1", "display_name": "sonu gupta", "link": "https://stackoverflow.com/users/4286324/sonu-gupta"}, "edited": false, "score": 0, "creation_date": 1535685753, "post_id": 49908958, "comment_id": 91166711, "body": "You saved me. I was banging my head since morning. Pardon my ignorance, but I still did not understand what is the use of bootstrap.sh and prefix? why do we need to install b2? I&#39; believe the single <i>apt-get</i> command is enough."}, {"owner": {"reputation": 1031, "user_id": 6763393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44926355c84effac26e3a3f1582405a?s=128&d=identicon&r=PG&f=1", "display_name": "stanthomas", "link": "https://stackoverflow.com/users/6763393/stanthomas"}, "reply_to_user": {"reputation": 423, "user_id": 4286324, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/84L0s.jpg?s=128&g=1", "display_name": "sonu gupta", "link": "https://stackoverflow.com/users/4286324/sonu-gupta"}, "edited": false, "score": 1, "creation_date": 1535749824, "post_id": 49908958, "comment_id": 91196620, "body": "<code>bootstrap.sh</code> queries your system configuration to create a <code>b2</code> command file that is tailored to you and the libraries you want to install. If you download Boost directly from <code>www.boost.org</code> then you should follow this route. If you install Boost from your distro, with <code>apt-get</code> etc., then the library has already been built to a standard configuration of your distro. Be aware that distro provided libraries are often several versions behind."}], "tags": [], "owner": {"reputation": 1031, "user_id": 6763393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44926355c84effac26e3a3f1582405a?s=128&d=identicon&r=PG&f=1", "display_name": "stanthomas", "link": "https://stackoverflow.com/users/6763393/stanthomas"}, "is_accepted": true, "score": 2, "last_activity_date": 1524182481, "last_edit_date": 1524182481, "creation_date": 1524085329, "answer_id": 49908958, "question_id": 49898806, "link": "https://stackoverflow.com/questions/49898806/how-to-add-boost-libraries-to-a-visual-studio-linux-project/49908958#49908958", "title": "How to add boost libraries to a Visual Studio Linux project?", "body": "<p>boost::asio is a header-only library, i.e. you simply specify the path to boost::asio source in the include directory path but it does depend on some other libraries with compiled binaries (object files). You must list these additonal libraries in the Visual Studio project under <code>Linker - Input - Library Dependencies</code>. E.g. in the case of Boost.System specify <code>boost_system</code> and the linker will add the <code>lib</code> prefix and <code>.a</code> or <code>.so</code> extension.</p>\n\n<p>This is something extra you must do on Linux, on Windows Boost automatically adds the library references thru a Visual Studio directive.</p>\n\n<p>I'm curious about how you've installed Boost; it looks to me like your include path on the Linux remote is <code>/home/pi/boostPrefix/include</code>. If you have followed the standard Boost install procedure (<code>boostrap.sh</code> and <code>b2</code>) the Boost headers will be in <code>/.../boost_1_66_0/boost/asio</code>, the include path you specify in the Visual Studio project <code>C/C++ &gt; Additional Include Directories</code> will be <code>/.../boost_1_66_0</code> and in your C++ code you will write <code>#include &lt;boost/asio&gt;</code></p>\n\n<p>Incidentally, you do not need to specify <code>/usr/include</code> in the library path, GCC looks there by default.</p>\n"}], "owner": {"reputation": 15, "user_id": 9663867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0aba523235ba14cd8b5d16d04c18e91?s=128&d=identicon&r=PG&f=1", "display_name": "MooN_Tiga", "link": "https://stackoverflow.com/users/9663867/moon-tiga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1871, "favorite_count": 0, "accepted_answer_id": 49908958, "answer_count": 1, "score": 1, "last_activity_date": 1524182481, "creation_date": 1524051589, "last_edit_date": 1524051754, "question_id": 49898806, "link": "https://stackoverflow.com/questions/49898806/how-to-add-boost-libraries-to-a-visual-studio-linux-project", "title": "How to add boost libraries to a Visual Studio Linux project?", "body": "<p>I have created a little chat server which I have tested and compiled on Windows without any problems. The next step would be to put this server on my Raspberry Pi. But at that point I'm getting many errors.</p>\n\n<p>I created a Visual Studio Remote Linux Project which I have conntected to my Raspberry Pi. I think that the compiler cannot find the libraries.</p>\n\n<p>Some errors which I get(total errors are about 700):</p>\n\n<blockquote>\n  <p>-Error (active)   E0304   no instance of overloaded function \"boost::asio::buffer\"   matches the argument list\n  -Error (active)   E0020   identifier \"sa_family_t\" is undefined   VoiceChatServer \n  -Error (active)   E0059   function call is not allowed in a constant expression\n  -Error (active)   E2778   builtin function is not available because vector types are not supported\n  -Error (active)   E0035   #error directive: Only Windows, POSIX and std::thread are supported!</p>\n</blockquote>\n\n<p>My Project Properties look like that:\nVC++ Directories > Include Directories: C:\\Program Files\\Cpp_Libs\\boost_1_66_0,\n/home/pi/boostPrefix/include/,\nC:\\includeLinux\\include,\n/usr/include/</p>\n\n<p>C/C++ > Additional Include Directories: C:\\Program Files\\Cpp_Libs\\boost_1_66_0,\n/home/pi/boostPrefix/include/,\nC:\\includeLinux\\include,\n/usr/include/</p>\n\n<p>Linker > Additional Library Directories: /home/pi/boostPrefix/lib/,\nC:\\Program Files\\Cpp_Libs\\boost_1_66_0\\stage\\lib</p>\n\n<p>Does anybody know how to include the libraries correctly?</p>\n"}, {"tags": ["c++", "opencv", "tensorflow", "bazel"], "owner": {"reputation": 11, "user_id": 8896018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9151306e96ed1a16c40fe42d1f9e5b46?s=128&d=identicon&r=PG&f=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/8896018/viktor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 459, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1524258328, "creation_date": 1524051234, "last_edit_date": 1524258328, "question_id": 49898690, "link": "https://stackoverflow.com/questions/49898690/building-opencv-3-3-0-program-with-bazel-compiler-produces-linking-errors", "title": "Building OpenCV 3.3.0 program with Bazel compiler produces linking errors", "body": "<p>I'm trying to use Bazel to compile an OpenCV based C++ program, and I'm facing an issue.</p>\n\n<p>I created my project with this <code>WORKSPACE</code> file:</p>\n\n<pre><code>new_local_repository(\nname = \"opencv330\",\npath = \"/usr/opencv330\",\nbuild_file = \"opencv330.BUILD\",)\n</code></pre>\n\n<p>and this <code>opencv330.BUILD</code> file:</p>\n\n<pre><code>cc_library(\nname = \"opencv330\",\nsrcs = glob([\"lib/*.so*\"]),\nhdrs = glob([\"include/**/*.hpp\", \"include/**/*.h\", \n\"/include/opencv2/*.h\", \"/include/opencv2/*.hpp\"]),\nincludes = [\"include\"],\nvisibility = [\"//visibility:public\"], \nlinkstatic = 1,\n)\nc_binary(\n    name = \"main\",\n    srcs = [\"main.cc\"],\n    deps = [\n    \"@opencv330//:opencv330\"\n    ],\n)\n</code></pre>\n\n<p>As an example, I try to use the simple Opencv program, which reads video from a file:</p>\n\n<pre><code>CvCapture* g_capture = NULL; // \u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u0434\u043b\u044f \u0432\u0438\u0434\u0435\u043e\u0444\u0430\u0439\u043b\u0430\ng_capture = cvCreateFileCapture(\"1080.mp4\");\nIplImage* frame;\nframe = cvQueryFrame(g_capture);\ncvNamedWindow(\"original\", 0); // \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043e\u043a\u043d\u0430\n\n\nwhile(1){\n frame = cvQueryFrame(g_capture); // \u041f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435       \u0447\u0442\u0435\u043d\u0438\u0435 \u043a\u0430\u0434\u0440\u043e\u0432\n\n if (!frame) { // \u041a\u043e\u043d\u0435\u0446 \u0444\u0430\u0439\u043b\u0430, \u043a\u0430\u0434\u0440\u043e\u0432 \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0435\u0442\n        break;\n    }\n\n  // Display the resulting frame\n cvShowImage(\"original\", frame); // \u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043a\u0430\u0434\u0440\u0430\n\n  // Press  ESC on keyboard to exit\n  char c = cvWaitKey(15); // \u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 15 \u043c\u0441, \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 ASCII \u043a\u043e\u0434\u0430 \u043a\u043b\u0430\u0432\u0438\u0448\u0438\n  if (c == 27) { // \u0415\u0441\u043b\u0438 Esc - \u0432\u044b\u0445\u043e\u0434 \u0438\u0437 \u0446\u0438\u043a\u043b\u0430\n      break;\n  }\n}\n\n// When everything done, release the video capture object\ncvReleaseCapture(&amp;g_capture); // \u0417\u0430\u043a\u0440\u044b\u0442\u0438\u0435 \u0444\u0430\u0439\u043b\u0430\n\n// Closes all the frames\ncvDestroyAllWindows();\n</code></pre>\n\n<p>But now I have error: </p>\n\n<blockquote>\n  <p>In file included from ./tensorflow/core/framework/tensor.h:19:0,\n                   from ./tensorflow/cc/framework/ops.h:21,\n                   from ./tensorflow/cc/ops/const_op.h:19,\n                   from tensorflow/examples/label_image/main.cc:41: /home/viol5728/tensorflow-r1.7/third_party/eigen3/unsupported/Eigen/CXX11/Tensor:1:42:\n  fatal error: unsupported/Eigen/CXX11/Tensor: No such file or directory</p>\n  \n  <h1>include \"unsupported/Eigen/CXX11/Tensor\"</h1>\n</blockquote>\n\n<p>But file Tensor is in the directory \"unsupported/Eigen/CXX11/Tensor\"! \n(Tensorflow 1.7)</p>\n\n<p>There is two directories in system: </p>\n\n<p>1)\"/home/viol5728/tensorflow-r1.7/third_party/eigen3/unsupported/Eigen/CXX11\"</p>\n\n<p>2) \"/usr/include/eigen3/unsupported/Eigen\"</p>\n\n<p>So how can I point Bazel to first directory?????</p>\n"}, {"tags": ["c++", "linker", "simplejson", "multiple-definition-error"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 4564311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35459b44a6ca77ca8d54fd3b2768ff8b?s=128&d=identicon&r=PG&f=1", "display_name": "levente", "link": "https://stackoverflow.com/users/4564311/levente"}, "edited": false, "score": 0, "creation_date": 1524056885, "post_id": 49898891, "comment_id": 86816463, "body": "I&#39;m gonna try it later today, thank you for the tip."}, {"owner": {"reputation": 6940, "user_id": 1559401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/t9DjW.jpg?s=128&g=1", "display_name": "rbaleksandar", "link": "https://stackoverflow.com/users/1559401/rbaleksandar"}, "edited": false, "score": 0, "creation_date": 1612706878, "post_id": 49898891, "comment_id": 116845027, "body": "Update: 2021 the issue is still present. So I would rather look for alternatives. In it&#39;s current state it&#39;s unusable."}], "tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 1, "last_activity_date": 1524051875, "creation_date": 1524051875, "answer_id": 49898891, "question_id": 49898527, "link": "https://stackoverflow.com/questions/49898527/multiple-definitions-with-simplejson-library-c/49898891#49898891", "title": "Multiple definitions with SimpleJSON library (C++)", "body": "<p>Yes, there is a problem with the SimpleJSON library you are using.  A quick look at json.hpp confirms it defines several namespace-scope non-template functions in the header file without marking them <code>inline</code>.  This makes it impossible to include the header from multiple translation units, which seriously reduces how it can be used.</p>\n\n<p>This has already been reported <a href=\"https://github.com/nbsdx/SimpleJSON/issues/4\" rel=\"nofollow noreferrer\">on SimpleJSON's git issue tracker</a>. It looks like at least one person has attempted and committed a fix on a personal branch, but it has not yet been pulled to the main branch.  You might be able to get code from that branch to try it out.</p>\n"}], "owner": {"reputation": 75, "user_id": 4564311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35459b44a6ca77ca8d54fd3b2768ff8b?s=128&d=identicon&r=PG&f=1", "display_name": "levente", "link": "https://stackoverflow.com/users/4564311/levente"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "accepted_answer_id": 49898891, "answer_count": 1, "score": 0, "last_activity_date": 1524051875, "creation_date": 1524050691, "question_id": 49898527, "link": "https://stackoverflow.com/questions/49898527/multiple-definitions-with-simplejson-library-c", "title": "Multiple definitions with SimpleJSON library (C++)", "body": "<p>I am writing a program in C++ using SimpleJSON as the JSON library of my choice, and have ran into a weird bug, where the following (quite simple) files generate tons of error messages while being linked:</p>\n\n<p>jsonobject.hpp:</p>\n\n<pre><code>#ifndef _JSONOBJECT\n#define _JSONOBJECT\n\n#include \"../../lib/simplejson/json.hpp\"\n\nint foo();\n\n#endif\n</code></pre>\n\n<p>jsonobject.cpp:</p>\n\n<pre><code>#include \"jsonobject.hpp\"\n\nint foo()\n{\n   return 0;\n}\n</code></pre>\n\n<p>main.cpp:</p>\n\n<pre><code>#include \"jsonobject.hpp\"\n\nint main()\n{\n    return foo();\n}\n</code></pre>\n\n<p>The error messages (I am using <code>g++ *.cpp -std=c++11</code> for compiling):</p>\n\n<pre><code>/tmp/ccMoY6Vl.o: In function `json::Array()':\nmain.cpp:(.text+0x1cd): multiple definition of `json::Array()'\n/tmp/ccjd4YF7.o:jsonobject.cpp:(.text+0x1cd): first defined here\n/tmp/ccMoY6Vl.o: In function `json::Object()':\nmain.cpp:(.text+0x23e): multiple definition of `json::Object()'\n/tmp/ccjd4YF7.o:jsonobject.cpp:(.text+0x23e): first defined here\n/tmp/ccMoY6Vl.o: In function `json::operator&lt;&lt;(std::ostream&amp;, json::JSON const&amp;)':\nmain.cpp:(.text+0x2af): multiple definition of `json::operator&lt;&lt;(std::ostream&amp;, json::JSON const&amp;)'\n/tmp/ccjd4YF7.o:jsonobject.cpp:(.text+0x2af): first defined here\n/tmp/ccMoY6Vl.o: In function `json::JSON::Load(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;)':\nmain.cpp:(.text+0x1a0c): multiple definition of `json::JSON::Load(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;)'\n/tmp/ccjd4YF7.o:jsonobject.cpp:(.text+0x1a0c): first defined here\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>Am I doing something wrong here, or is this the fault of the SimpleJSON library (<a href=\"https://github.com/nbsdx/SimpleJSON/\" rel=\"nofollow noreferrer\">Here it is on GitHub</a>)?</p>\n"}, {"tags": ["c++", "input"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1524050837, "post_id": 49898468, "comment_id": 86812437, "body": "It&#39;s hard to guess exactly where in this code the problem is (especially since I don&#39;t know Italian). You could help by posting a much smaller version with all the parts that aren&#39;t needed to reproduce the problem removed. (See: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.)"}, {"owner": {"reputation": 1, "user_id": 9663894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a2a47970b07372845df5f8761e2da1e?s=128&d=identicon&r=PG&f=1", "display_name": "Giulio Bilato", "link": "https://stackoverflow.com/users/9663894/giulio-bilato"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1524050918, "post_id": 49898468, "comment_id": 86812496, "body": "I&#39;ll edit it in a few seconds and then I&#39;ll read the question that&#39;s marked as duplicate to mine."}], "owner": {"reputation": 1, "user_id": 9663894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a2a47970b07372845df5f8761e2da1e?s=128&d=identicon&r=PG&f=1", "display_name": "Giulio Bilato", "link": "https://stackoverflow.com/users/9663894/giulio-bilato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "closed_date": 1524050769, "answer_count": 0, "score": 0, "last_activity_date": 1524050974, "creation_date": 1524050509, "last_edit_date": 1524050974, "question_id": 49898468, "link": "https://stackoverflow.com/questions/49898468/input-wont-work-correctly-c", "closed_reason": "Duplicate", "title": "Input won&#39;t work correctly c++", "body": "<p>This is my first post here, and I have to say that you've saved me a lot of times! But, in this moment I've got a problem.</p>\n\n<p>In this code (this is the main of my project, and yes, I'm Italian and at my school if you write code in English <strong><em>you</em></strong> have to translate it in Italian, sorry for that...) that has object and classes with inheritance, the problem is that the first time you input the data of the book (yes, it's for a library) it write it correctly, the second time it jumps the first voice of input (Author generality) and goes straight to the name of the book. What can I do to avoid that the program does this?</p>\n\n<p>Thanks in advance, and good coding to all of you!</p>\n\n<pre><code>system(\"CLS\");\ncout&lt;&lt;\"\\nInserisci le generalita' dell'autore: \";\ncin.ignore(-1);\ngetline(cin,nome);\ncout&lt;&lt;\"nome \"&lt;&lt;nome;\n\ncout&lt;&lt;\"\\nInserisci il nome del libro: \";\ncin.ignore(-1);\ngetline(cin,nomelibro);\ncout&lt;&lt;\"nome libro \"&lt;&lt;nomelibro;\n\ncout&lt;&lt;\"\\nInserisci il genere del libro: \";\ncin.ignore(-1);\ngetline(cin,genere);\ncout&lt;&lt;\"genere \"&lt;&lt;genere;\n\ncout&lt;&lt;\"\\nInserisci il prezzo del libro: \";\ncin&gt;&gt;prezzo;\ncout&lt;&lt;\"prezzo \"&lt;&lt;prezzo;\n\ncout&lt;&lt;\"\\nInserisci il codice a barre del prodotto: \";\ncin&gt;&gt;codice;\n\ndisponibile = true;\n\nLibro nuovolibro (nome,nomelibro,genere,prezzo,codice,disponibile);\n\nvettore.push_back(nuovolibro);\n</code></pre>\n"}, {"tags": ["c++", "c++11", "visual-c++", "bit-fields", "reinterpret-cast"], "comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 3, "creation_date": 1524050514, "post_id": 49898424, "comment_id": 86812217, "body": "You are falling foul of the annoying fact that a <code>uint8_t</code> is in reality an <code>unsigned char</code>, so will be printed as some ascii character - quite likely not a visible one. Cast this up to some other integer type. But bear in mind what you are doing (treating a type as something it isn&#39;t) is horrible <a href=\"http://en.cppreference.com/w/cpp/language/ub\" rel=\"nofollow noreferrer\"><b>Undefined Behaviour</b></a>, there are no guarantees whatsoever what will happen."}, {"owner": {"reputation": 175, "user_id": 9663907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a98ea5e2beb4fad69554866ebe40b?s=128&d=identicon&r=PG&f=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/9663907/mandeep"}, "reply_to_user": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1524050903, "post_id": 49898424, "comment_id": 86812483, "body": "@BoBTFish Tried with char type still no output"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "reply_to_user": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1524051043, "post_id": 49898424, "comment_id": 86812589, "body": "As @BoBTFish says this is undefined behaviour.  The size and layout of <code>struct xs</code> is implementation defined and may not be a <code>uint8_t</code> in size.  Even if it was, what your casts are doing is defined to not work.  See <b>Notes</b> in: <a href=\"http://en.cppreference.com/w/cpp/language/bit_field\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/bit_field</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1524051213, "post_id": 49898424, "comment_id": 86812695, "body": "just a warning: maybe &quot;getting used to&quot; reinterpret cast isnt the best idea. reinterpret casts are for special circumstances and shouldnt be used too often, actually they are red flags that indicate that something weird is going on."}], "answers": [{"comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1524051647, "post_id": 49898721, "comment_id": 86813000, "body": "<i>&quot;you did not initialize the memory you are inspecting, so it can be 0&quot;</i> no, it will be uninitialized garbage."}, {"owner": {"reputation": 8075, "user_id": 2169853, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/68b89009f4066d3e1adbe72d4329c8d3?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/2169853/jens"}, "edited": false, "score": 1, "creation_date": 1524052393, "post_id": 49898721, "comment_id": 86813509, "body": "I don&#39;t think it is UB. There is an exception for pointers of type <code>char*</code>, <code>unsigned char*</code> and <code>std::byte*</code>."}, {"owner": {"reputation": 1101, "user_id": 3783662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5409812f5cca63c1deb974fe00f65644?s=128&d=identicon&r=PG&f=1", "display_name": "ph&#246;n", "link": "https://stackoverflow.com/users/3783662/ph%c3%b6n"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1524052406, "post_id": 49898721, "comment_id": 86813516, "body": "@JonathanWakely so techniccally it CAN be 0 :P sure, according to the standard its garbage. what i initially thought of was a compiler &quot;extension&quot; where the int would get zero initialized in debug mode only. i think i read it somewhere that visual studio did it? but i may be super wrong here. so i let it open to &quot;it can be 0&quot;."}, {"owner": {"reputation": 1101, "user_id": 3783662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5409812f5cca63c1deb974fe00f65644?s=128&d=identicon&r=PG&f=1", "display_name": "ph&#246;n", "link": "https://stackoverflow.com/users/3783662/ph%c3%b6n"}, "reply_to_user": {"reputation": 8075, "user_id": 2169853, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/68b89009f4066d3e1adbe72d4329c8d3?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/2169853/jens"}, "edited": false, "score": 1, "creation_date": 1524052573, "post_id": 49898721, "comment_id": 86813617, "body": "@Jens you are right. but is uint8_t always(!) aliasing char,unsigned char or byte?"}, {"owner": {"reputation": 8075, "user_id": 2169853, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/68b89009f4066d3e1adbe72d4329c8d3?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/2169853/jens"}, "edited": false, "score": 0, "creation_date": 1524053887, "post_id": 49898721, "comment_id": 86814403, "body": "@ph&#246;n You are right. <code>std::uint8_t</code> can be any type that is exactly 8 bits, so even if <code>CHAR_BITS==8</code> it could be something else. <code>char</code> can also be larger than 8 bits (which would make <code>sizeof</code> interesting since it measures in multiples of <code>sizeof(char)</code>), and in this case <code>std::uint8_t</code> has ot be different. I have never seen this in real life."}, {"owner": {"reputation": 175, "user_id": 9663907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a98ea5e2beb4fad69554866ebe40b?s=128&d=identicon&r=PG&f=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/9663907/mandeep"}, "edited": false, "score": 0, "creation_date": 1524057607, "post_id": 49898721, "comment_id": 86816970, "body": "@phon Please tell me with an example how to initzialise for the memory. thank You"}, {"owner": {"reputation": 1101, "user_id": 3783662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5409812f5cca63c1deb974fe00f65644?s=128&d=identicon&r=PG&f=1", "display_name": "ph&#246;n", "link": "https://stackoverflow.com/users/3783662/ph%c3%b6n"}, "edited": false, "score": 0, "creation_date": 1524057909, "post_id": 49898721, "comment_id": 86817204, "body": "you created an object of type <code>xs</code> with the name <code>zs</code>. so you can access the data with <code>zs.num = 40</code> for example"}, {"owner": {"reputation": 8075, "user_id": 2169853, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/68b89009f4066d3e1adbe72d4329c8d3?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/2169853/jens"}, "reply_to_user": {"reputation": 175, "user_id": 9663907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a98ea5e2beb4fad69554866ebe40b?s=128&d=identicon&r=PG&f=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/9663907/mandeep"}, "edited": false, "score": 0, "creation_date": 1524058801, "post_id": 49898721, "comment_id": 86817830, "body": "@Mandeep xs a{1,0,1,40};"}, {"owner": {"reputation": 175, "user_id": 9663907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a98ea5e2beb4fad69554866ebe40b?s=128&d=identicon&r=PG&f=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/9663907/mandeep"}, "edited": false, "score": 0, "creation_date": 1524058832, "post_id": 49898721, "comment_id": 86817858, "body": "@ph&#246;n thank you. I now tried implementing int* P = static_cast&lt;int*&gt;(static_cast&lt;void*&gt;(&amp;zs)); It works. However, if i define x as true than output is 1 but if i define y as true then output is 2. In which order it is working like that tthank You."}, {"owner": {"reputation": 175, "user_id": 9663907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a98ea5e2beb4fad69554866ebe40b?s=128&d=identicon&r=PG&f=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/9663907/mandeep"}, "edited": false, "score": 0, "creation_date": 1524059069, "post_id": 49898721, "comment_id": 86818019, "body": "@ph&#246;n I think i know its working in 8421 rule as on the basis of bit position it gives me a int number. But then y it does not work when trying to use char instead of int there."}, {"owner": {"reputation": 1101, "user_id": 3783662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5409812f5cca63c1deb974fe00f65644?s=128&d=identicon&r=PG&f=1", "display_name": "ph&#246;n", "link": "https://stackoverflow.com/users/3783662/ph%c3%b6n"}, "edited": false, "score": 0, "creation_date": 1524063042, "post_id": 49898721, "comment_id": 86821057, "body": "what output do you wanna see/what do you expect?"}], "tags": [], "owner": {"reputation": 1101, "user_id": 3783662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5409812f5cca63c1deb974fe00f65644?s=128&d=identicon&r=PG&f=1", "display_name": "ph&#246;n", "link": "https://stackoverflow.com/users/3783662/ph%c3%b6n"}, "is_accepted": true, "score": 0, "last_activity_date": 1524051344, "creation_date": 1524051344, "answer_id": 49898721, "question_id": 49898424, "link": "https://stackoverflow.com/questions/49898424/bit-field-struct-to-int-in-c/49898721#49898721", "title": "Bit Field Struct to int in C++", "body": "<ol>\n<li><p>it is undefined behavior to access an object through a pointer to a type other than the type of the object. it works with most compilers, but technically your programm is allowed to do whatever it wants.</p></li>\n<li><p>assuming we are not running into a problem mentioned in 1, my guess is that uint8_t is an alias for char, so cout will put a char onto your console. \nyou did not initialize the memory you are inspecting, so it can be 0. a char with value zero wont print out anything \"observeable\" in your console, look at the ascii table. try filling your struct with a 50 for example</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1033, "user_id": 7667894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9cbd2317a1ddffc1e8f9ca0ff56b6f6?s=128&d=identicon&r=PG&f=1", "display_name": "AlexG", "link": "https://stackoverflow.com/users/7667894/alexg"}, "is_accepted": false, "score": 0, "last_activity_date": 1524052452, "creation_date": 1524052452, "answer_id": 49899093, "question_id": 49898424, "link": "https://stackoverflow.com/questions/49898424/bit-field-struct-to-int-in-c/49899093#49899093", "title": "Bit Field Struct to int in C++", "body": "<p>There are two things that need to be solved here. First off, as some pointed out, you cannot access your object this way. If you want to construct a uint8_t properly, you would need to read the variables inside your struct and do some bit shifts, something like this:</p>\n\n<pre><code>uint8_t value = 0;\nvalue |= (zs.x ? 1 &lt;&lt; 7 : 0);\nvalue |= (zs.y ? 1 &lt;&lt; 6 : 0);\nvalue |= (zs.z ? 1 &lt;&lt; 5 : 0);\nvalue |= zs.num;\n</code></pre>\n\n<p>Now, the second problem you are facing is that you're trying to output a number of 8-bits wide. By default, this is interpreted as a 'character' and will display as such. In order to accomplish what you want to do, you can either use a variable with a different length (uint16_t, uint32_t, ...) or use std::to_string.</p>\n\n<pre><code>cout &lt;&lt; std::to_string(value) &lt;&lt; endl;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 175, "user_id": 9663907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a98ea5e2beb4fad69554866ebe40b?s=128&d=identicon&r=PG&f=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/9663907/mandeep"}, "edited": false, "score": 0, "creation_date": 1524058783, "post_id": 49900481, "comment_id": 86817809, "body": "Thank you what u described in &quot;1&quot; is exactly what i wanted. I now tried implementing int* P = static_cast&lt;int*&gt;(static_cast&lt;void*&gt;(&amp;zs)); It works. However, if i define x as true than output is 1 but if i define y as true then output is 2. In which order it is working like that tthank You."}, {"owner": {"reputation": 175, "user_id": 9663907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a98ea5e2beb4fad69554866ebe40b?s=128&d=identicon&r=PG&f=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/9663907/mandeep"}, "edited": false, "score": 0, "creation_date": 1524059094, "post_id": 49900481, "comment_id": 86818035, "body": "I think i know its working in 8421 rule as on the basis of bit position it gives me a int number. But then y it does not work when trying to use char instead of int there."}, {"owner": {"reputation": 8075, "user_id": 2169853, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/68b89009f4066d3e1adbe72d4329c8d3?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/2169853/jens"}, "edited": false, "score": 0, "creation_date": 1524059171, "post_id": 49900481, "comment_id": 86818077, "body": "Is there a reason you used <code>#define</code> for the constants? It seems to be a beginner&#39;s quesiton, so I would not show something that you shouldn&#39;t use."}, {"owner": {"reputation": 8075, "user_id": 2169853, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/68b89009f4066d3e1adbe72d4329c8d3?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/2169853/jens"}, "reply_to_user": {"reputation": 175, "user_id": 9663907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a98ea5e2beb4fad69554866ebe40b?s=128&d=identicon&r=PG&f=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/9663907/mandeep"}, "edited": false, "score": 1, "creation_date": 1524059265, "post_id": 49900481, "comment_id": 86818140, "body": "@Mandeep I am afraid that at least I don&#39;t understand what you saying. What is 8421? Where do you use a char insteaf of int? There is no <code>int</code> in the code."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 8075, "user_id": 2169853, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/68b89009f4066d3e1adbe72d4329c8d3?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/2169853/jens"}, "edited": false, "score": 0, "creation_date": 1524059287, "post_id": 49900481, "comment_id": 86818158, "body": "@Jens No particular reason. <code>const uint8_t x = 0B1000&#39;0000</code> would have worked just as well as the <code>#define</code>s"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 175, "user_id": 9663907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a98ea5e2beb4fad69554866ebe40b?s=128&d=identicon&r=PG&f=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/9663907/mandeep"}, "edited": false, "score": 0, "creation_date": 1524059370, "post_id": 49900481, "comment_id": 86818220, "body": "@Mandeep I&#39;m not sure what the 8421 number you speak of is, but that won&#39;t fit in a <code>uint8_t</code>/<code>char</code>."}, {"owner": {"reputation": 175, "user_id": 9663907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a98ea5e2beb4fad69554866ebe40b?s=128&d=identicon&r=PG&f=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/9663907/mandeep"}, "reply_to_user": {"reputation": 8075, "user_id": 2169853, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/68b89009f4066d3e1adbe72d4329c8d3?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/2169853/jens"}, "edited": false, "score": 0, "creation_date": 1524059619, "post_id": 49900481, "comment_id": 86818405, "body": "@Jens By 8421 rule i mean &quot;Binary-coded decimal&quot; secondly i tried using int * instead of Uint * . it works &quot;int* P = static_cast&lt;int*&gt;(static_cast&lt;void*&gt;(&amp;zs));&quot; It gives me output on the &quot;Binary-coded decimal&quot; value."}, {"owner": {"reputation": 175, "user_id": 9663907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a98ea5e2beb4fad69554866ebe40b?s=128&d=identicon&r=PG&f=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/9663907/mandeep"}, "reply_to_user": {"reputation": 8075, "user_id": 2169853, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/68b89009f4066d3e1adbe72d4329c8d3?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/2169853/jens"}, "edited": false, "score": 0, "creation_date": 1524059655, "post_id": 49900481, "comment_id": 86818434, "body": "@Jens now when i try using char instead of int * it gives me no output"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 175, "user_id": 9663907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a98ea5e2beb4fad69554866ebe40b?s=128&d=identicon&r=PG&f=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/9663907/mandeep"}, "edited": false, "score": 0, "creation_date": 1524059792, "post_id": 49900481, "comment_id": 86818539, "body": "@Mandeep Note that as mentioned in <b>3</b> of my answer you may not cast a <code>struct xs</code> pointer to an <code>int</code> pointer. To do so would be undefined behavior."}, {"owner": {"reputation": 8075, "user_id": 2169853, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/68b89009f4066d3e1adbe72d4329c8d3?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/2169853/jens"}, "reply_to_user": {"reputation": 175, "user_id": 9663907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a98ea5e2beb4fad69554866ebe40b?s=128&d=identicon&r=PG&f=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/9663907/mandeep"}, "edited": false, "score": 0, "creation_date": 1524059834, "post_id": 49900481, "comment_id": 86818579, "body": "@Mandeep I am still not sure I understand. Your approach with <code>static_cast</code> or <code>reinterpret_cast</code> is undefined behavior, as pointed out many times in comments in the answer above. It may look like it is correct because it behaves as you expect, but that is not guaranteed by the language semantics. <a href=\"http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html\" rel=\"nofollow noreferrer\">blog.llvm.org/2011/05/what-every-c-programmer-should-know.ht&zwnj;&#8203;ml</a> contains some usefull explanation. If you cast it to a <code>char</code> it may also not work because your struct may not fit into <code>sizeof(char)</code>, which is probably one byte."}, {"owner": {"reputation": 175, "user_id": 9663907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a98ea5e2beb4fad69554866ebe40b?s=128&d=identicon&r=PG&f=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/9663907/mandeep"}, "edited": false, "score": 0, "creation_date": 1524059920, "post_id": 49900481, "comment_id": 86818649, "body": "@JonathanMee I am not getting. My question is simple that int pointer Works !!! but Char pointer does not work y"}, {"owner": {"reputation": 8075, "user_id": 2169853, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/68b89009f4066d3e1adbe72d4329c8d3?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/2169853/jens"}, "reply_to_user": {"reputation": 175, "user_id": 9663907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a98ea5e2beb4fad69554866ebe40b?s=128&d=identicon&r=PG&f=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/9663907/mandeep"}, "edited": false, "score": 0, "creation_date": 1524060029, "post_id": 49900481, "comment_id": 86818733, "body": "@Mandeep Maybe you need to open a new question because the text you posted in the question asks something else. But all answers are here in the comments and in the answer. Accessing something which is not an <code>int</code> through a pointer of type <code>int*</code> is undefined behavior (UB). It does something which may look correct, but another compiler or even just different compiler flags will do something else."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 175, "user_id": 9663907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a98ea5e2beb4fad69554866ebe40b?s=128&d=identicon&r=PG&f=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/9663907/mandeep"}, "edited": false, "score": 0, "creation_date": 1524060945, "post_id": 49900481, "comment_id": 86819401, "body": "@Mandeep Hey I kinda agree with Jens that a new question would be helpful in understanding what you&#39;re asking. It&#39;s just hard to get it in the comments. If you could ask and link here I&#39;ll try to come help."}], "tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 1, "last_activity_date": 1524059654, "last_edit_date": 1524059654, "creation_date": 1524056658, "answer_id": 49900481, "question_id": 49898424, "link": "https://stackoverflow.com/questions/49898424/bit-field-struct-to-int-in-c/49900481#49900481", "title": "Bit Field Struct to int in C++", "body": "<p>There a lot of problems here:</p>\n\n<ol>\n<li>You seem to believe that <code>x</code>, <code>y</code>, and <code>z</code> will all pack into the single <code>uint_8</code>. This is not the case. \"Adjacently declared bit fields <strong>of the same type</strong> can then be packed by the compiler into a reduced number of words\"<sup><a href=\"https://en.wikipedia.org/wiki/Bit_field#Implementation\" rel=\"nofollow noreferrer\">[1]</a></sup></li>\n<li>\"The value of <code>sizeof(bool)</code> is implementation defined and might differ from 1\"<sup><a href=\"http://en.cppreference.com/w/cpp/language/types#Boolean_type\" rel=\"nofollow noreferrer\">[2]</a></sup> Therefore your <code>xs</code> will be implementation defined, but certainly not equivilent to <code>sizeof(uint_8)</code></li>\n<li>Because <code>xs</code> is not \"similar\" to a <code>uint_8</code> according to <a href=\"http://en.cppreference.com/w/cpp/language/reinterpret_cast#Type_aliasing\" rel=\"nofollow noreferrer\">the rules defined for C++'s type aliasing</a> the behavior of your <code>reinterpret_cast&lt;uint_8*&gt;</code> is undefined</li>\n<li>Finally <a href=\"https://stackoverflow.com/questions/49898424/struct-to-int-in-c#comment86812217_49898424\">as has been pointed out by many others</a> the reason that you can't see anything is that whatever implementation defined value is at <code>*P</code> it is likely a control character with no visible representation when treated by <code>cout</code> as a <code>char</code></li>\n</ol>\n\n<p>A possible workaround to the code you have would be to use these definitions:</p>\n\n<pre><code>constexpr uint8_t X = 0B1000'0000;\nconstexpr uint8_t Y = 0B0100'0000;\nconstexpr uint8_t Z = 0B0010'0000;\nconstexpr uint8_t NUM = 0B0001'1111;\n\nuint8_t zs;\n</code></pre>\n\n<p>Then given that some value is assigned to <code>zs</code> you can perform these functions to output the former bit fields:</p>\n\n<pre><code>cout &lt;&lt; ((zs &amp; X) != 0) &lt;&lt; endl;\ncout &lt;&lt; ((zs &amp; Y) != 0) &lt;&lt; endl;\ncout &lt;&lt; ((zs &amp; Z) != 0) &lt;&lt; endl;\ncout &lt;&lt; (zs &amp; NUM) &lt;&lt; endl;\n</code></pre>\n\n<p><a href=\"https://ideone.com/duUKGe\" rel=\"nofollow noreferrer\"><kbd>Live Example</kbd></a></p>\n"}], "owner": {"reputation": 175, "user_id": 9663907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234a98ea5e2beb4fad69554866ebe40b?s=128&d=identicon&r=PG&f=1", "display_name": "Mandeep", "link": "https://stackoverflow.com/users/9663907/mandeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1006, "favorite_count": 0, "accepted_answer_id": 49898721, "answer_count": 3, "score": -1, "last_activity_date": 1524059654, "creation_date": 1524050388, "last_edit_date": 1524059569, "question_id": 49898424, "link": "https://stackoverflow.com/questions/49898424/bit-field-struct-to-int-in-c", "title": "Bit Field Struct to int in C++", "body": "<p>I have a struct with same type members in it. I am trying to convert it into <code>uint8_t</code> type. I am able to do that but cannot see the output please tell me where I am going wrong. Also I know there are another ways to do it? I am trying to do it this way because I want to get use to <code>static_cast</code> and <code>reinterpret_cast</code>.</p>\n\n<p>Code is below:</p>\n\n<pre><code>int main()\n{\n    struct xs{\n        bool x :1 ;\n        bool y :1;\n        bool z :1;\n        uint8_t num :5;\n    } zs;\n\n    uint8_t* P = static_cast&lt;uint8_t*&gt;(static_cast&lt;void*&gt;(&amp;zs));\n\n    cout &lt;&lt; *P &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1524052623, "post_id": 49898415, "comment_id": 86813651, "body": "Nice clean code. Note however that using the custom property is unncessary complicated, you can use property bundles these days: <a href=\"http://coliru.stacked-crooked.com/a/134bfbe5805fd0a2\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/134bfbe5805fd0a2</a>"}], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 2, "last_activity_date": 1524052345, "creation_date": 1524052345, "answer_id": 49899053, "question_id": 49898415, "link": "https://stackoverflow.com/questions/49898415/boost-library-how-to-get-neighbouring-nodes/49899053#49899053", "title": "Boost library, how to get neighbouring nodes?", "body": "<pre><code>auto neighbours = boost::adjacent_vertices(94, g);\n</code></pre>\n\n<p>Print them like e.g.</p>\n\n<pre><code>for (auto vd : make_iterator_range(neighbours))\n    std::cout &lt;&lt; \"94 has adjacent vertex \" &lt;&lt; vd &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>94 has adjacent vertex 93\n94 has adjacent vertex 3\n</code></pre>\n\n<p>If you wanted outgoing edges only, that assumes <code>directedS</code> or <code>bidirectionalS</code>, in which case you can also do:</p>\n\n<pre><code>    for (auto ed : make_iterator_range(boost::out_edges(94, g)))\n        std::cout &lt;&lt; \"outgoing: \" &lt;&lt; ed &lt;&lt; \"\\n\";\n    for (auto ed : make_iterator_range(boost::in_edges(94, g)))\n        std::cout &lt;&lt; \"incident: \" &lt;&lt; ed &lt;&lt; \"\\n\";\n</code></pre>\n\n<h2>Live Demo</h2>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/fb4f75e83b5d8e10\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/graph/adjacency_list.hpp&gt;\n#include &lt;boost/graph/connected_components.hpp&gt;\n#include &lt;iostream&gt;\n\nusing namespace boost;\nusing namespace std;\n\nint main() {\n    int N = 10000;\n\n    struct status_t { typedef vertex_property_tag kind; };\n    typedef property&lt;status_t, string&gt; status;\n    typedef adjacency_list&lt;vecS, vecS, bidirectionalS, status&gt; MyGraph;\n\n    MyGraph g(N);\n\n    // add some random edges\n    add_edge(0, 1, g);\n    add_edge(100, 153, g);\n    add_edge(634, 12, g);\n\n    add_edge(93, 94, g);\n    add_edge(94, 3, g);\n\n    property_map&lt;MyGraph, status_t&gt;::type status_map = get(status_t(), g);\n\n    for (int i = 0; i &lt; 10; i++) {\n        status_map[i] = \"S\";\n    }\n\n    {\n        auto neighbours = boost::adjacent_vertices(94, g);\n        for (auto vd : make_iterator_range(neighbours))\n            std::cout &lt;&lt; \"94 has adjacent vertex \" &lt;&lt; vd &lt;&lt; \"\\n\";\n\n        // prints\n        // for undirected:\n        //  94 has adjacent vertex 93\n        //  94 has adjacent vertex 3\n        // for directed/bidirectionalS:\n        //  94 has adjacent vertex 3\n    }\n\n    {   // for bidirectionalS:\n        for (auto ed : make_iterator_range(boost::out_edges(94, g)))\n            std::cout &lt;&lt; \"outgoing: \" &lt;&lt; ed &lt;&lt; \"\\n\";\n        for (auto ed : make_iterator_range(boost::in_edges(94, g)))\n            std::cout &lt;&lt; \"incident: \" &lt;&lt; ed &lt;&lt; \"\\n\";\n    }\n\n}\n</code></pre>\n\n<p>Printing</p>\n\n<pre><code>94 has adjacent vertex 3\noutgoing: (94,3)\nincident: (93,94)\n</code></pre>\n"}], "owner": {"reputation": 309, "user_id": 7120280, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lEPSIOyPlLA/AAAAAAAAAAI/AAAAAAAAAC4/WPyQH-76Ii4/photo.jpg?sz=128", "display_name": "Terry BRETT", "link": "https://stackoverflow.com/users/7120280/terry-brett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 923, "favorite_count": 0, "accepted_answer_id": 49899053, "answer_count": 1, "score": 4, "last_activity_date": 1524052345, "creation_date": 1524050359, "question_id": 49898415, "link": "https://stackoverflow.com/questions/49898415/boost-library-how-to-get-neighbouring-nodes", "title": "Boost library, how to get neighbouring nodes?", "body": "<p>After generating a graph with <code>n</code> nodes, and adding the edges at random, how would I go around getting all the neighbours of a specific node. Is there a function similar to NetworkX's <code>G.neighbors(i)</code>?</p>\n\n<p>This is what I've got so far, creating adjacency list</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/graph/adjacency_list.hpp&gt;\n#include &lt;boost/graph/connected_components.hpp&gt;\n\nusing namespace boost;\nusing namespace std;\n\nint main() {\n\n    int N = 10000;\n\n    struct status_t{\n        typedef vertex_property_tag kind;\n    };\n\n    typedef\n    property &lt;status_t, string&gt; status;\n\n    typedef\n    adjacency_list&lt;vecS, vecS, undirectedS, status&gt; MyGraph;\n\n    MyGraph g (N);\n\n    // add some random edges\n    add_edge(0, 1, g);\n    add_edge(100, 153, g);\n    add_edge(634, 12, g);\n    add_edge(94, 3, g);\n\n    property_map&lt;MyGraph, status_t&gt;::type status_map = get(status_t(), g);\n\n    for (int i = 0; i &lt; 10; i++){\n        status_map[i] = \"S\";\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "unit-testing", "cmake", "unresolved-external"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1524052979, "post_id": 49898160, "comment_id": 86813879, "body": "Am I correctly understand, that errors are about building the library <code>ch8lib</code>? It would be expected, as you don&#39;t link your library with SFML ones (you link only the executable)."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1524054289, "post_id": 49898160, "comment_id": 86814659, "body": "You should copy the errors as text using the Output Tab instead of the Errors Tab."}, {"owner": {"reputation": 789, "user_id": 5535775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f1a9b682779a524cf31fcc022a2a77d0?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5535775/kevin"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1524085135, "post_id": 49898160, "comment_id": 86833761, "body": "@Tsyvarev can you make an answer with how to do that?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1524089024, "post_id": 49898160, "comment_id": 86835304, "body": "I meant, that as your library <code>ch8lib</code> uses SFML functions, you should link that library with SFML one: <code>target_link_libraries(ch8lib sfml-graphics sfml-window sfml-audio)</code>. As for executable, it can be linked with your library only: <code>target_link_libraries(${EXECUTABLE_NAME} ch8lib)</code>."}, {"owner": {"reputation": 789, "user_id": 5535775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f1a9b682779a524cf31fcc022a2a77d0?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5535775/kevin"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1524091790, "post_id": 49898160, "comment_id": 86836167, "body": "@Tsyvarev Thank you, now I have the following errors: <code>LNK1104\tcannot open file &#39;Debug\\ch8lib.lib&#39;</code> and same with <code>..\\Debug\\ch8lib.lib</code>.  I tried commenting out the /lib lines in the first CMakeLists above, to the same error. I will update the OP with my new CMakeLists.  Any idea?"}, {"owner": {"reputation": 789, "user_id": 5535775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f1a9b682779a524cf31fcc022a2a77d0?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5535775/kevin"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1524096538, "post_id": 49898160, "comment_id": 86837375, "body": "@Tsyvarev Making it static works. Do you want to add an answer so I can accept it?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1524125273, "post_id": 49898160, "comment_id": 86847233, "body": "I am not sure which part of the question deserves an answer. You got unresolved symbols because you simply didn&#39;t link with a library. The error about <code>Debug&#47;ch8lib.lib</code> being not existed is described in <a href=\"https://stackoverflow.com/questions/40739061/error-lnk1104-cannot-open-file-debug-myprojectlib-lib\">that question</a>. Also, the error messages currently are not part of the question post, so after linked image will disappear, the question will have a little meaning."}], "owner": {"reputation": 789, "user_id": 5535775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f1a9b682779a524cf31fcc022a2a77d0?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5535775/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 147, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524091871, "creation_date": 1524049616, "last_edit_date": 1524091871, "question_id": 49898160, "link": "https://stackoverflow.com/questions/49898160/unresolved-externals-on-unit-test-on-windows-only-not-on-linux-using-cmake", "title": "Unresolved Externals on Unit Test on Windows Only, Not on Linux using CMake", "body": "<p>I've learned that I need to compile my main project as a library, so my unit tests can link to them. This works on Linux, but on Windows, via Visual Studio, it provides unresolved externals. </p>\n\n<p>Here's the parent project CMakeLists:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.9.1)\nset(CMAKE_LEGACY_CYGWIN_WIN32 1)\nset (CMAKE_CXX_STANDARD 11) # Set C++11\nproject(CHIP8)\n\n# To maintain a clean tree, set some useful variables so we're not building everything in root.\n# set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib) # static library\n# set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib) # dynamic library\n# set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin) # executables\n# set(CMAKE_MODULE_PATH \"${CMAKE_CURRENT_SOURCE_DIR}/modules\" ${CMAKE_MODULE_PATH})\n\n# Include SFML\nadd_subdirectory(${CMAKE_SOURCE_DIR}/dep/SFML)\ninclude_directories(${CMAKE_SOURCE_DIR}/dep/SFML/include)\n\n# Add our test directory\nadd_subdirectory (test)\n\n#Include where to find headers\ninclude_directories(./src)\ninclude_directories(./src/headers)\n\nset(EXECUTABLE_NAME \"CHIP8\")\n\nadd_library (ch8lib ${CMAKE_SOURCE_DIR}/src/chipeight.cpp ${CMAKE_SOURCE_DIR}/src/headers/chipeight.h)\n\n# Here we will include all our source files to be built to the executable (include all so they show in IDE).\nadd_executable(${EXECUTABLE_NAME} \n    ${CMAKE_SOURCE_DIR}/src/main.cpp\n    ${CMAKE_SOURCE_DIR}/src/chipeight.cpp\n    ${CMAKE_SOURCE_DIR}/src/headers/chipeight.h\n)\n\ntarget_link_libraries(ch8lib sfml-graphics sfml-window sfml-audio)\ntarget_link_libraries(${EXECUTABLE_NAME} ch8lib)\n</code></pre>\n\n<p>The important part is here:</p>\n\n<pre><code>add_library (ch8lib ${CMAKE_SOURCE_DIR}/src/chipeight.cpp ${CMAKE_SOURCE_DIR}/src/headers/chipeight.h)\n</code></pre>\n\n<p>And the unit test CMakeLists:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.9.1)\nset (CMAKE_CXX_STANDARD 11) # Set C++11\nset(CMAKE_LEGACY_CYGWIN_WIN32 1)\n\nPROJECT(CHIP8TESTS)\n\n# Prepare \"Catch\" library for other executables\nset(CATCH_INCLUDE_DIR ${CMAKE_CURRENT_SOURCE_DIR})\nadd_library(Catch INTERFACE)\ntarget_include_directories(Catch INTERFACE ${CATCH_INCLUDE_DIR})\n\n#Include where to find headers\ninclude_directories(../src)\ninclude_directories(../src/headers)\n\nset(TEST_SOURCES\n    ${CMAKE_CURRENT_SOURCE_DIR}/tests.cpp\n)\n\nadd_executable(tests ${TEST_SOURCES})\ntarget_link_libraries(tests Catch ch8lib sfml-graphics sfml-window sfml-audio)\n\n# enable_testing()\n# add_test(NAME RunTests COMMAND tests)\n</code></pre>\n\n<p>I'm making sure to link SFML because it seems the errors originate from there: <a href=\"https://i.imgur.com/FV18cqC.png\" rel=\"nofollow noreferrer\">https://i.imgur.com/FV18cqC.png</a></p>\n\n<p>Does anyone know a solution to this problem of unresolved externals?</p>\n\n<p>What I want to do is this:</p>\n\n<p>1) Compile my main project</p>\n\n<p>2) Compile my test project</p>\n\n<p>3) Run my test project</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "multithreading", "progress-bar", "stdasync"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1524048517, "post_id": 49897743, "comment_id": 86810833, "body": "Use an (atomic) global variable to hold the progress. The async function updates it, and in the main thread poll this value for changes. The main thread displays the value (in any way it feels like) when a change is detected."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1524048932, "post_id": 49897743, "comment_id": 86811111, "body": "As another alternative; rather than <code>while (true)</code> - do a known amount of work; and then re-queue more when it&#39;s done.  This will not only allow you to terminate your worker in a nice way should the user close your app; but also give you notification that some % has been completed."}, {"owner": {"reputation": 229, "user_id": 1986879, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/2089c1e7d95748d29b0a452f141177ce?s=128&d=identicon&r=PG&f=1", "display_name": "Alonbs", "link": "https://stackoverflow.com/users/1986879/alonbs"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1524059356, "post_id": 49897743, "comment_id": 86818203, "body": "@Someprogrammerdude - If you could please give some code scheme. I know how to do what you suggested using pthreads etc, but I&#39;m not sure how to do this: &quot;the main thread displays the value when a change is detected&quot;.  references would be appreciated too."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1524061901, "post_id": 49897743, "comment_id": 86820155, "body": "Detecting a change is easy: Store the old value (initialized to some suitable default value) and compare against the current value. Do whatever needs to be done if a change is detected, and then make the old value equal to the current value. Repeat. And your main thread is at the moment stuck waiting for the futures to become ready, doing nothing else. It could poll the futures using e.g. <a href=\"http://en.cppreference.com/w/cpp/thread/future/wait_for\" rel=\"nofollow noreferrer\"><code>wait_for</code></a> and then check for the change in the progress."}, {"owner": {"reputation": 229, "user_id": 1986879, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/2089c1e7d95748d29b0a452f141177ce?s=128&d=identicon&r=PG&f=1", "display_name": "Alonbs", "link": "https://stackoverflow.com/users/1986879/alonbs"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1524226571, "post_id": 49897743, "comment_id": 86898698, "body": "@Someprogrammerdude  thanks! that&#39;s what I was looking for."}], "answers": [{"comments": [{"owner": {"reputation": 229, "user_id": 1986879, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/2089c1e7d95748d29b0a452f141177ce?s=128&d=identicon&r=PG&f=1", "display_name": "Alonbs", "link": "https://stackoverflow.com/users/1986879/alonbs"}, "edited": false, "score": 0, "creation_date": 1524221907, "post_id": 49902993, "comment_id": 86895752, "body": "Thanks, but actually I wanted to avoid using mutexs. Something similar to what @someprogrammerdude suggested. But I&#39;ll check both options. Thank you."}], "tags": [], "owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "is_accepted": true, "score": 1, "last_activity_date": 1524068479, "last_edit_date": 1524068479, "creation_date": 1524063477, "answer_id": 49902993, "question_id": 49897743, "link": "https://stackoverflow.com/questions/49897743/c-display-progress-bar-when-using-stdasync/49902993#49902993", "title": "C++ - display progress bar when using std::async", "body": "<p>Seems you need a lock while using <code>std::cout</code> , otherwise the async tasks will  make a mess output( they all try to print on the console at same time). \nHowever I recommend you using GDIplus ( seems you are using in your code) to print the text instead of showing on a console window which is rather ugly.</p>\n\n<pre><code>Image *image = new Image(width, height);\n\nsize_t max = width * height;\nsize_t cores = std::thread::hardware_concurrency();\nvolatile atomic&lt;size_t&gt; count(0);\nvector&lt;future&lt;void&gt;&gt; future_vector;\nmutex cout_lock;\nwhile (cores--)\n{\n    future_vector.push_back(\n        std::async(launch::async, [=, &amp;camera, &amp;scene, &amp;count]()\n        {\n            while (true)\n            {\n                std::size_t index = count++;\n                if (index &gt;= max)\n                    break;\n\n                GLuint i = index % width;\n                GLuint j = index / width;\n\n                Ray ray = camera.generateRay(i + .5, j - .5);\n                vec3 color = recursiveRayTrace(scene, ray, maxDepth);\n                image-&gt;setPixel(i, j, color);\n\n                {  //lock variable scope\n                   lock_guard&lt;mutex&gt; lock(cout_lock)\n                   std::cout &lt;&lt; \"Progress: [ \"&lt;&lt; setprecision(1) &lt;&lt; fixed &lt;&lt; (count / (GLfloat)max) * 100.0 &lt;&lt; \"% ] \\r\";\n                   std::cout.flush();\n                }\n\n            }\n        }));\n}\n\nfor (auto&amp; e : future_vector) {\n    e.get();\n}\n\nreturn image;\n</code></pre>\n"}], "owner": {"reputation": 229, "user_id": 1986879, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/2089c1e7d95748d29b0a452f141177ce?s=128&d=identicon&r=PG&f=1", "display_name": "Alonbs", "link": "https://stackoverflow.com/users/1986879/alonbs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1334, "favorite_count": 0, "accepted_answer_id": 49902993, "answer_count": 1, "score": 1, "last_activity_date": 1524226506, "creation_date": 1524048290, "last_edit_date": 1524226506, "question_id": 49897743, "link": "https://stackoverflow.com/questions/49897743/c-display-progress-bar-when-using-stdasync", "title": "C++ - display progress bar when using std::async", "body": "<p>So I'm working on a ray-tracer, and in order to reduce rendering time, I used std::async to do pixel calculations independently. \nI used <a href=\"https://medium.com/@phostershop/solving-multithreaded-raytracing-issues-with-c-11-7f018ecd76fa\" rel=\"nofollow noreferrer\">this</a> tutorial, and everything works great, and indeed I was able to save about 70% in rendering time.</p>\n\n<p>Still, some scenes take a while to render, and I'd like to display some-sort of progress bar. As I'm fairly a newbie to async infra, I'm not quite sure how to do that. I'd like some sort of mechanism to only print the progress from the 'main', calling', thread.</p>\n\n<p>Here the rendering loop - notice the commented lines for progress bar - which obviously should not go there:</p>\n\n<pre><code>Image *image = new Image(width, height);\n\nsize_t max = width * height;\nsize_t cores = std::thread::hardware_concurrency();\nvolatile atomic&lt;size_t&gt; count(0);\nvector&lt;future&lt;void&gt;&gt; future_vector;\n\nwhile (cores--)\n{\n    future_vector.push_back(\n        std::async(launch::async, [=, &amp;camera, &amp;scene, &amp;count]()\n        {\n            while (true)\n            {\n                std::size_t index = count++;\n                if (index &gt;= max)\n                    break;\n\n                GLuint i = index % width;\n                GLuint j = index / width;\n\n                Ray ray = camera.generateRay(i + .5, j - .5);\n                vec3 color = recursiveRayTrace(scene, ray, maxDepth);\n                image-&gt;setPixel(i, j, color);\n\n                // THIS IS BAD\n                //std::cout &lt;&lt; \"Progress: [ \"&lt;&lt; setprecision(1) &lt;&lt; fixed &lt;&lt; (count / (GLfloat)max) * 100.0 &lt;&lt; \"% ] \\r\";\n                //std::cout.flush();\n\n            }\n        }));\n}\n\nfor (auto&amp; e : future_vector) {\n    e.get();\n}\n\nreturn image;\n</code></pre>\n\n<p><strong>UPDATE:</strong>\nSo I did what some answers suggested - here are the results - for future readers. \nMy benchmark for a few scenes was 15 seconds (I took something fast on purpose), when rendering asynchronously.\nWhen I used mutex, time was slowed down to 26 seconds. (Still better than 1.32 on single-thread). \nI also actively waited for one of the working threads, and kept updating the progress every 100mili or so - and render time was 16 seconds. So I'm very pleased with this result, as the printing barely slowed the process. </p>\n\n<p>Thanks,\nAlon</p>\n"}, {"tags": ["c++", "opencv", "image-stabilization"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 1, "creation_date": 1524049762, "post_id": 49897630, "comment_id": 86811694, "body": "can you post sample images in a sequence? Videos are nothing else than sequential images, so if it does not work, the method might just not be great for low-fps-videos, maybe it assumes small movements between images."}, {"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 1, "creation_date": 1524051173, "post_id": 49897630, "comment_id": 86812669, "body": "I haven&#39;t use this part of OpenCV yet, but by the looks of it you can create a derived <code>IFrameSource</code> class that uses a vector (only 3 functions to implement)."}, {"owner": {"reputation": 333, "user_id": 4961771, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-aErLWQeeehA/AAAAAAAAAAI/AAAAAAAAADA/AIq2bVw-kt8/photo.jpg?sz=128", "display_name": "Adri&#225;n Arroyo Perez", "link": "https://stackoverflow.com/users/4961771/adri%c3%a1n-arroyo-perez"}, "edited": false, "score": 0, "creation_date": 1524051692, "post_id": 49897630, "comment_id": 86813032, "body": "maybe I did not understand the class correctly, but I assumed that the video must already be pre-built before the stabilization, and my problem is that I must stabilize while the images are being received. will this derived IFrameSource class help me with this&#191;"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1524053937, "post_id": 49897630, "comment_id": 86814437, "body": "@Adri&#225;nArroyoPerez: as in <a href=\"https://en.wikipedia.org/wiki/Causal_system\" rel=\"nofollow noreferrer\">causal systems</a> ? Video stabilization is of course a specific problem from the broader field of control theory."}, {"owner": {"reputation": 333, "user_id": 4961771, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-aErLWQeeehA/AAAAAAAAAAI/AAAAAAAAADA/AIq2bVw-kt8/photo.jpg?sz=128", "display_name": "Adri&#225;n Arroyo Perez", "link": "https://stackoverflow.com/users/4961771/adri%c3%a1n-arroyo-perez"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1524056268, "post_id": 49897630, "comment_id": 86816048, "body": "@MSalters i guess that is it, for each new image it must be stabilize just when it arrives"}, {"owner": {"reputation": 3391, "user_id": 264540, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2a5d4d5a780831c699b1751ca808abc2?s=128&d=identicon&r=PG", "display_name": "Scott Smith", "link": "https://stackoverflow.com/users/264540/scott-smith"}, "reply_to_user": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1524162049, "post_id": 49897630, "comment_id": 86871393, "body": "@api55 - Your comment is pretty close to an answer. You might want to re-post it as such?"}, {"owner": {"reputation": 3391, "user_id": 264540, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2a5d4d5a780831c699b1751ca808abc2?s=128&d=identicon&r=PG", "display_name": "Scott Smith", "link": "https://stackoverflow.com/users/264540/scott-smith"}, "edited": false, "score": 0, "creation_date": 1524162265, "post_id": 49897630, "comment_id": 86871521, "body": "@Adri&#225;n Arroyo Perez - In your particular case, can you wait until you&#39;ve received &#39;all&#39; of the images/frames before stabilizing, or do you need the results continuously, as the images are being received? The answer might determine whether you can assemble the frames you&#39;re getting into a stream that can be fed into stabilizer..."}, {"owner": {"reputation": 333, "user_id": 4961771, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-aErLWQeeehA/AAAAAAAAAAI/AAAAAAAAADA/AIq2bVw-kt8/photo.jpg?sz=128", "display_name": "Adri&#225;n Arroyo Perez", "link": "https://stackoverflow.com/users/4961771/adri%c3%a1n-arroyo-perez"}, "reply_to_user": {"reputation": 3391, "user_id": 264540, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2a5d4d5a780831c699b1751ca808abc2?s=128&d=identicon&r=PG", "display_name": "Scott Smith", "link": "https://stackoverflow.com/users/264540/scott-smith"}, "edited": false, "score": 0, "creation_date": 1524205364, "post_id": 49897630, "comment_id": 86885973, "body": "@ScottSmith Currently we have discarded that option as we would like to postprocess every image after stabilizing it."}], "owner": {"reputation": 333, "user_id": 4961771, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-aErLWQeeehA/AAAAAAAAAAI/AAAAAAAAADA/AIq2bVw-kt8/photo.jpg?sz=128", "display_name": "Adri&#225;n Arroyo Perez", "link": "https://stackoverflow.com/users/4961771/adri%c3%a1n-arroyo-perez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524047988, "creation_date": 1524047988, "question_id": 49897630, "link": "https://stackoverflow.com/questions/49897630/consequent-image-stabilization-in-opencv-c", "title": "Consequent Image stabilization in OpenCV c++", "body": "<p>I am looking for a stabilization technique/algorithm that works with a set of sequential images, but not a video (each image arrives every 1.2s aprox). OpenCV seems to have this stabilization but over video (<a href=\"https://docs.opencv.org/3.4.1/d2/d6c/classcv_1_1videostab_1_1StabilizerBase.html\" rel=\"nofollow noreferrer\">stabilizer</a>), are there any other classes that I can use to stabilize this set of images? Or, is there a way to make it work with this class?</p>\n\n<p>Cheers and thanks!</p>\n"}, {"tags": ["android", "c++", "opencv"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1524049606, "post_id": 49897447, "comment_id": 86811583, "body": "where is the xml file on your android system? Does your application have the android rights to access that file (or the file system at all)?"}, {"owner": {"reputation": 352, "user_id": 7225691, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oT3ho.jpg?s=128&g=1", "display_name": "mazend", "link": "https://stackoverflow.com/users/7225691/mazend"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1524051256, "post_id": 49897447, "comment_id": 86812715, "body": "If I put the xml to assets/StreamingAssets in Unity, the xml file exists in myapp.apk/assets folder.(I attached snapshot) However I don&#39;t know how to access the compressed(=apk) xml file from C++ side code."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1524052046, "post_id": 49897447, "comment_id": 86813277, "body": "<a href=\"https://stackoverflow.com/questions/8246917/how-to-access-unity-assets-natively-on-android-or-iphone\" title=\"how to access unity assets natively on android or iphone\">stackoverflow.com/questions/8246917/&hellip;</a>"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1524052185, "post_id": 49897447, "comment_id": 86813372, "body": "If I understand it right, you can use <code>Application.streamingAssetsPath + &quot;&#47;&quot; + filename</code> to access your files?"}, {"owner": {"reputation": 352, "user_id": 7225691, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oT3ho.jpg?s=128&g=1", "display_name": "mazend", "link": "https://stackoverflow.com/users/7225691/mazend"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1524054485, "post_id": 49897447, "comment_id": 86814784, "body": "@Micka I want to know how to access the xml file in the apk from C++ code(=so file in the apk)."}, {"owner": {"reputation": 352, "user_id": 7225691, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oT3ho.jpg?s=128&g=1", "display_name": "mazend", "link": "https://stackoverflow.com/users/7225691/mazend"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1524055636, "post_id": 49897447, "comment_id": 86815575, "body": "Sorry, It seems like my poor English skill made you confused."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1524058903, "post_id": 49897447, "comment_id": 86817915, "body": "is it basically the same question as this one? <a href=\"https://stackoverflow.com/questions/18090483/fopen-fread-apk-assets-from-nativeactivity-on-android\" title=\"fopen fread apk assets from nativeactivity on android\">stackoverflow.com/questions/18090483/&hellip;</a>"}, {"owner": {"reputation": 352, "user_id": 7225691, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oT3ho.jpg?s=128&g=1", "display_name": "mazend", "link": "https://stackoverflow.com/users/7225691/mazend"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1524063398, "post_id": 49897447, "comment_id": 86821340, "body": "@Micka, I think the question is quite similar with mine. But the difference is that I&#39;m developing an android application in Unity with C#."}], "owner": {"reputation": 352, "user_id": 7225691, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oT3ho.jpg?s=128&g=1", "display_name": "mazend", "link": "https://stackoverflow.com/users/7225691/mazend"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 235, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524051390, "creation_date": 1524047475, "last_edit_date": 1524051390, "question_id": 49897447, "link": "https://stackoverflow.com/questions/49897447/how-to-access-cascade-xml-file-from-c-dll-in-android", "title": "How to access cascade xml file from C++ dll in Android", "body": "<p>I'm developing an android application that uses OpenCV C++ dll(.so file) in Unity.\nThe C++ dll accesses a cascade file to use OpenCV functions.</p>\n\n<p>*C++ DLL side code</p>\n\n<pre><code>cv::String face_cascade_name = \"haarcascade_frontalface_alt.xml\";\nif (!face_cascade.load(face_cascade_name)) {\n    printf(\"--(!)Error loading face cascade, please change face_cascade_name in source code.\\n\");\n    return -1;\n};\n</code></pre>\n\n<p>However If I build an android application in Unity and install the app on Android device, it fails to load the xml file.</p>\n\n<p>How can I access the cascade xml in C++ DLL in Android apk?</p>\n\n<p>*If I put the xml to assets/StreamingAssets in Unity, the xml file exists in myapp.apk/assets folder.\n<a href=\"https://i.stack.imgur.com/OYwOV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OYwOV.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "qt", "qtsql"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 9247028, "user_type": "registered", "profile_image": "https://graph.facebook.com/1243181472492529/picture?type=large", "display_name": "Ashu Ansari", "link": "https://stackoverflow.com/users/9247028/ashu-ansari"}, "edited": false, "score": 0, "creation_date": 1524047722, "post_id": 49897426, "comment_id": 86810274, "body": "No, I just want to know what condition should I use for this."}, {"owner": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "reply_to_user": {"reputation": 5, "user_id": 9247028, "user_type": "registered", "profile_image": "https://graph.facebook.com/1243181472492529/picture?type=large", "display_name": "Ashu Ansari", "link": "https://stackoverflow.com/users/9247028/ashu-ansari"}, "edited": false, "score": 0, "creation_date": 1524047925, "post_id": 49897426, "comment_id": 86810432, "body": "What do you mean by that?"}], "tags": [], "owner": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "is_accepted": false, "score": 0, "last_activity_date": 1524047401, "creation_date": 1524047401, "answer_id": 49897426, "question_id": 49897314, "link": "https://stackoverflow.com/questions/49897314/how-to-show-data-from-database-in-qtableview-using-some-condition/49897426#49897426", "title": "How to show data from database in QTableView using some condition", "body": "<p>You are looking for the <strong>LIMIT</strong> keyword in your SQL query, e.g.:</p>\n\n<pre><code>\"select eid,name,surname,salary from employeeInfo LIMIT 10 OFFSET 10\"\n</code></pre>\n\n<p>will return 10 rows after the first 10.</p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 9247028, "user_type": "registered", "profile_image": "https://graph.facebook.com/1243181472492529/picture?type=large", "display_name": "Ashu Ansari", "link": "https://stackoverflow.com/users/9247028/ashu-ansari"}, "edited": false, "score": 0, "creation_date": 1524048020, "post_id": 49897609, "comment_id": 86810500, "body": "could you please give me an example?"}, {"owner": {"reputation": 5, "user_id": 9247028, "user_type": "registered", "profile_image": "https://graph.facebook.com/1243181472492529/picture?type=large", "display_name": "Ashu Ansari", "link": "https://stackoverflow.com/users/9247028/ashu-ansari"}, "edited": false, "score": 0, "creation_date": 1524048092, "post_id": 49897609, "comment_id": 86810543, "body": "how I can show data from the database as my requirement."}, {"owner": {"reputation": 2204, "user_id": 2027606, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b0d51131d464f104ef33e4126e729027?s=128&d=identicon&r=PG", "display_name": "Andrei R.", "link": "https://stackoverflow.com/users/2027606/andrei-r"}, "reply_to_user": {"reputation": 5, "user_id": 9247028, "user_type": "registered", "profile_image": "https://graph.facebook.com/1243181472492529/picture?type=large", "display_name": "Ashu Ansari", "link": "https://stackoverflow.com/users/9247028/ashu-ansari"}, "edited": false, "score": 0, "creation_date": 1524048577, "post_id": 49897609, "comment_id": 86810881, "body": "@AshuAnsari, as the name suggests, proxy model just maps elements from source model (<code>QSqlQueryModel</code> in your case)."}], "tags": [], "owner": {"reputation": 2204, "user_id": 2027606, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b0d51131d464f104ef33e4126e729027?s=128&d=identicon&r=PG", "display_name": "Andrei R.", "link": "https://stackoverflow.com/users/2027606/andrei-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1524047937, "creation_date": 1524047937, "answer_id": 49897609, "question_id": 49897314, "link": "https://stackoverflow.com/questions/49897314/how-to-show-data-from-database-in-qtableview-using-some-condition/49897609#49897609", "title": "How to show data from database in QTableView using some condition", "body": "<p>if you don't want to send SQL query every time, but just change number of displayed elements, you may write <a href=\"http://doc.qt.io/qt-5/qabstractproxymodel.html\" rel=\"nofollow noreferrer\"><code>QAbstractProxyModel</code></a>-based model class. You'll only need to override <code>mapFromSource</code>, <code>mapToSource</code> and <code>rowCount</code> methods</p>\n"}], "owner": {"reputation": 5, "user_id": 9247028, "user_type": "registered", "profile_image": "https://graph.facebook.com/1243181472492529/picture?type=large", "display_name": "Ashu Ansari", "link": "https://stackoverflow.com/users/9247028/ashu-ansari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 319, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1524070294, "creation_date": 1524047061, "last_edit_date": 1524070294, "question_id": 49897314, "link": "https://stackoverflow.com/questions/49897314/how-to-show-data-from-database-in-qtableview-using-some-condition", "title": "How to show data from database in QTableView using some condition", "body": "<p>I am a beginner in Qt programming and I am working on a project in which I am using SQLite database.</p>\n\n<p>I have 20 rows in my database and I just want to show last five rows in <code>QTableView</code> when I press show button first time. If I then press the show button a second time, the last 10 rows should be shown from the database.</p>\n\n<p>But I don't have any idea what codes I should write. Please help me.</p>\n\n<p>look at this image I just want to display last five rows when I click show button first time and then I want to display 10 last rows when I click show button the second time. </p>\n\n<p><img src=\"https://i.stack.imgur.com/TVvsN.png\" alt=\"\"></p>\n\n<p>Thank you in advance.</p>\n\n<p>Here is my code to show the data from SQLite database into <code>QTableView</code>.</p>\n\n<pre><code>void SecondWindow::on_pushButton_show_clicked()\n{\n    MainWindow conn;\n    QSqlQueryModel *model = new QSqlQueryModel();\n    conn.openConn();\n    QSqlQuery *qry = new QSqlQuery(conn.mydb);\n    qry-&gt;prepare(\"select eid,name,surname,salary from employeeInfo\");\n    qry-&gt;exec();\n    model-&gt;setQuery(*qry);\n    ui-&gt;tableView-&gt;setModel(model);\n    conn.closeConn();\n    qDebug() &lt;&lt; (model-&gt;rowCount());\n}\n</code></pre>\n"}]