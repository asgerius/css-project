[{"tags": ["c++", "function", "while-loop", "return", "return-value"], "comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1443656514, "post_id": 32877231, "comment_id": 53585730, "body": "Definitions for <code>Node</code> and <code>List</code>? Also if this is for school, there are a few easy &quot;downmarks&quot; like <code>int result = NULL;</code>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1443656956, "post_id": 32877231, "comment_id": 53585846, "body": "When you used the debugger, which statement is causing the issue?"}, {"owner": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "edited": false, "score": 0, "creation_date": 1443657912, "post_id": 32877231, "comment_id": 53586074, "body": "Your use of <code>&amp;&amp;</code> and <code>||</code> is potentially ambiguous, remember that <code>&amp;&amp;</code> binds before <code>||</code> so something like <code>if (foo &amp;&amp; bar || foobar)</code> is evaluated as <code>if ((foo &amp;&amp; bar) || foobar)</code> and not <code>if (foo &amp;&amp; (bar || foobar))</code>"}, {"owner": {"reputation": 15, "user_id": 3777357, "user_type": "registered", "profile_image": "https://graph.facebook.com/1416301430/picture?type=large", "display_name": "Alfred Intal", "link": "https://stackoverflow.com/users/3777357/alfred-intal"}, "reply_to_user": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "edited": false, "score": 0, "creation_date": 1443658338, "post_id": 32877231, "comment_id": 53586177, "body": "@user657267 I&#39;ll try to put my conditions in parenthesis to be like this? <code>if ((head-&gt;cards == &quot;Emperor&quot;) &amp;&amp; (root-&gt;card == &quot;Slave&quot;)) || ( &#47;&#47; other conditions)</code> Is that what you mean?"}, {"owner": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "edited": false, "score": 0, "creation_date": 1443658402, "post_id": 32877231, "comment_id": 53586189, "body": "@AlfredIntal It probably won&#39;t make a difference in this case but it&#39;s something to keep in mind. Your example is incomplete however, there are 6 undefined functions."}, {"owner": {"reputation": 15, "user_id": 3777357, "user_type": "registered", "profile_image": "https://graph.facebook.com/1416301430/picture?type=large", "display_name": "Alfred Intal", "link": "https://stackoverflow.com/users/3777357/alfred-intal"}, "reply_to_user": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "edited": false, "score": 0, "creation_date": 1443658564, "post_id": 32877231, "comment_id": 53586218, "body": "@user657267 Okay. I&#39;ll edit my question and I will put the remaining functions that I use in the said program."}, {"owner": {"reputation": 15, "user_id": 3777357, "user_type": "registered", "profile_image": "https://graph.facebook.com/1416301430/picture?type=large", "display_name": "Alfred Intal", "link": "https://stackoverflow.com/users/3777357/alfred-intal"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1443658972, "post_id": 32877231, "comment_id": 53586314, "body": "@ThomasMatthews When I used my debugger, the function winChecker is returning the value 2 even though the conditions aren&#39;t met yet, I reproduce the issue by picking Citizen and the opponent draws Citizen as well, the function should return 0 instead it returns 2."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1443659439, "post_id": 32877231, "comment_id": 53586413, "body": "Sounds like you know where the problem is then. Step through winChecker with an eye on the variables, looking for where they deviate from the expected. Once they do, bingo!"}, {"owner": {"reputation": 15, "user_id": 3777357, "user_type": "registered", "profile_image": "https://graph.facebook.com/1416301430/picture?type=large", "display_name": "Alfred Intal", "link": "https://stackoverflow.com/users/3777357/alfred-intal"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1443659991, "post_id": 32877231, "comment_id": 53586516, "body": "@user4581301 Yeah, I will try again. But when I try F10 (Debugging mode) in VS 2015, I am really puzzled as to why Citizen vs Citizen makes winChecker return 2, instead of 0. Thanks for the boost!"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1443660881, "post_id": 32877231, "comment_id": 53586713, "body": "No idea, but at the moment it&#39;s not even going to compile because you&#39;re missing a couple brackets. Oh, and placing <code>using namespace std;</code> in a header will have other programmers cursing your name.  <a href=\"http://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">It is a dangerous enough shortcut at the best of times</a>, but in a header it&#39;s silently lethal to others as well as you. Not a good habit to get into."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1443661340, "post_id": 32877231, "comment_id": 53586809, "body": "Cleaned up the code a bit and gave it a run. When the input should have been citizen and citizen, the winCheck received emperor and slave. Why that would be, I dunno. Didn&#39;t check, but in that case a return of 2 is perfectly justified and your error is elsewhere."}, {"owner": {"reputation": 15, "user_id": 3777357, "user_type": "registered", "profile_image": "https://graph.facebook.com/1416301430/picture?type=large", "display_name": "Alfred Intal", "link": "https://stackoverflow.com/users/3777357/alfred-intal"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1443662126, "post_id": 32877231, "comment_id": 53586967, "body": "@user4581301 Woah, I didn&#39;t know that it was a wrong habit. It was the one that was being taught to us all along. Alright I will try to use it in a local scope or maybe not use it at all. Thanks for pointing out about that maybe my struct has something going on in it. I&#39;ll look on it."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 3777357, "user_type": "registered", "profile_image": "https://graph.facebook.com/1416301430/picture?type=large", "display_name": "Alfred Intal", "link": "https://stackoverflow.com/users/3777357/alfred-intal"}, "edited": false, "score": 0, "creation_date": 1443665589, "post_id": 32878109, "comment_id": 53587713, "body": "Hello! Thanks for contributing. I just re-checked my work and I got a lot of function naming wrong. And also you point one of my biggest mistakes, I deleted the values before I call the checker making it just point at the head and giving same results all over again."}], "tags": [], "owner": {"reputation": 8173, "user_id": 3299580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5442c85b57162abfc606d86c0083e1d?s=128&d=identicon&r=PG&f=1", "display_name": "The Dark", "link": "https://stackoverflow.com/users/3299580/the-dark"}, "is_accepted": false, "score": 0, "last_activity_date": 1443663018, "creation_date": 1443663018, "answer_id": 32878109, "question_id": 32877231, "link": "https://stackoverflow.com/questions/32877231/c-function-returns-wrong-return-value/32878109#32878109", "title": "C++ Function returns wrong return value?", "body": "<p>It looks like when you select a card to play, you then delete that card from the deck, then compare the first card of the two decks. That doesn't seem right, surely you want to compare the cards you just selected?</p>\n\n<p>If so, you should be calling <code>winCheck</code> with <code>selectKaijiCardAtIndex</code> and <code>selectTonegawaCardAtIndex</code>. You also want to do this <em>before</em> you delete the cards from the deck as the <code>deleteSelectedKaijiCard</code> function actually deletes the card so you can't use it after that.</p>\n\n<p>This probably mean rearranging your code a bit and not call <code>wincheck</code> in so many places.</p>\n"}], "owner": {"reputation": 15, "user_id": 3777357, "user_type": "registered", "profile_image": "https://graph.facebook.com/1416301430/picture?type=large", "display_name": "Alfred Intal", "link": "https://stackoverflow.com/users/3777357/alfred-intal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 281, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443668982, "creation_date": 1443656187, "last_edit_date": 1443668982, "question_id": 32877231, "link": "https://stackoverflow.com/questions/32877231/c-function-returns-wrong-return-value", "title": "C++ Function returns wrong return value?", "body": "<p>I made a simple command line application based on Kaiji Ep. 16 that mimics the game Emperor Card (for our midterms in basic programming). I got stuck on what I think is a simple problem, but I can't seem to solve it on my own. I have this function \"winChecker(List *root, Node *head),\" that checks what cards are drawn and who wins over who.</p>\n\n<p>And it seems that it returns a wrong return value whenever I draw Citizen and the opponent draws Citizen as well. It should just loop, since Citizen vs Citizen is draw, according to my code.</p>\n\n<p>Can you help me understand what I'm doing wrong here. Also if you see some other mistakes, feel free to point them out. I'm open to learn.</p>\n\n<p>PS: I only used struct for Node and List since we aren't allowed to use Class for our midterms yet. I got 1 header file for each of those.</p>\n\n<p>Source.cpp</p>\n\n<pre><code>    #include \"Node.h\"\n#include \"List.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;ctime&gt;\n\nusing namespace std;\n\nNode *createKaijiDeck(int round);\nNode *selectKaijiCard(Node *head, int index);\nNode *deleteSelectedKaijiCard(Node *head, int index);\nList* createTonegawaDeck(int round);\nList *selectTonegawaCard(List *root, int indexT);\nList *deleteSelectedTonegawaCard(List *root, int indexT);\nbool betCheck(int betLength, int remainingLength);\nint prizeCheck(int betLength, int round);\nvoid printDeck(Node * head);\nint winCheck(List *root, Node *head, int cardIndex, int randTonegawa);\nvoid gameOver(int cash, int round, int input, int remaining);\n\nint main() {\n\n    // Seed the RNG\n    srand((unsigned int)time(0));\n\n    // Initilizing variables\n    int input, cardIndex, randTonegawa, countTonegawa = 0, cash = 0, remaining = 30;\n\n    // Round loop\n    for (int round = 1; round &lt; 12; round++) {\n\n        cout &lt;&lt; \"===============================================\" &lt;&lt; endl;\n        cout &lt;&lt; \"                ROUND \" &lt;&lt; round &lt;&lt; endl;\n        cout &lt;&lt; \"===============================================\" &lt;&lt; endl;\n        cout &lt;&lt; \"How much would you like to bet, in milimeters?\" &lt;&lt; endl;\n        cout &lt;&lt; \"(You still have \" &lt;&lt; remaining &lt;&lt; \" milimeters left.)\" &lt;&lt; endl;\n        cin &gt;&gt; input;\n        betCheck(input, remaining);\n\n        // Match loop\n        if (betCheck(input, remaining) == true) {\n\n            cout &lt;&lt; \"You can win \" &lt;&lt; prizeCheck(input, round) &lt;&lt; \" Yen.\" &lt;&lt; endl &lt;&lt; endl;\n            cout &lt;&lt; \"Cash currently at hand: \" &lt;&lt; cash &lt;&lt; endl;\n            Node* head = createKaijiDeck(round);\n            List* root = createTonegawaDeck(round);\n            do {\n                printDeck(head);\n\n                cout &lt;&lt; \"Select a card to play [1 - 5]: \";\n                cin &gt;&gt; cardIndex;\n                randTonegawa = (rand() % (5 - countTonegawa));\n                Node* selectKaijiCardAtIndex = selectKaijiCard(head, cardIndex);\n                cout &lt;&lt; \"You chose the card: \" &lt;&lt; selectKaijiCardAtIndex-&gt;cards &lt;&lt; endl;\n                List* selectTonegawaCardAtIndex = selectTonegawaCard(root, randTonegawa);\n                cout &lt;&lt; \"Tonegawa chose the card: \" &lt;&lt; selectTonegawaCardAtIndex-&gt;card &lt;&lt; endl;\n                cout &lt;&lt; endl;\n                countTonegawa++;\n            } while (winCheck(root, head, cardIndex, randTonegawa) == 0);\n\n            // Match up checker (Emperor &gt; Citizen &gt; Slave &gt; Emperor)\n            if (winCheck(root, head, cardIndex, randTonegawa) == 1) {\n\n                cash = cash + prizeCheck(input, round);\n                cout &lt;&lt; \"Round \" &lt;&lt; round &lt;&lt; \" winner is Kaiji.\" &lt;&lt; endl;\n                cout &lt;&lt; \"You won \" &lt;&lt; prizeCheck(input, round) &lt;&lt; \" Yen!\" &lt;&lt; endl;\n            }\n            else if (winCheck(root, head, cardIndex, randTonegawa) == 2) {\n\n                remaining = remaining - input;\n                cout &lt;&lt; \"Round \" &lt;&lt; round &lt;&lt; \" winner is Tonegawa.\" &lt;&lt; endl;\n                cout &lt;&lt; \"The pin moved by \" &lt;&lt; input &lt;&lt; \" milimeters!\" &lt;&lt; endl;\n            }\n\n        }\n        else if (betCheck(input, remaining) == false)\n        {\n            cout &lt;&lt; \"You lose! You already lost your ear!\" &lt;&lt; endl;\n            system(\"pause\");\n            exit(0);\n        }\n    }\n    return 0;\n}\n\nNode *createKaijiDeck(int round) {\n\n    Node* head = NULL;\n    Node* curr = NULL;\n    Node* prev = NULL;\n\n    if (round == 1 || round == 2 || round == 3 || round == 7 || round == 8 || round == 9) {\n        curr = new Node;\n        curr-&gt;cards = \"Emperor\";\n        prev = curr;\n        head = curr;\n\n        for (int i = 0; i &lt; 3; i++) {\n\n            curr = new Node;\n            curr-&gt;cards = \"Citizen\";\n            prev-&gt;next = curr;\n            prev = curr;\n        }\n\n        curr = new Node;\n        curr-&gt;cards = \"Citizen\";\n        prev-&gt;next = curr;\n\n    }\n\n    if (round == 4 || round == 5 || round == 6 || round == 10 || round == 11 || round == 12) {\n        curr = new Node;\n        curr-&gt;cards = \"Slave\";\n        prev = curr;\n        head = curr;\n\n        for (int i = 0; i &lt; 3; i++) {\n\n            curr = new Node;\n            curr-&gt;cards = \"Citizen\";\n            prev-&gt;next = curr;\n            prev = curr;\n        }\n\n        curr = new Node;\n        curr-&gt;cards = \"Citizen\";\n        prev-&gt;next = curr;\n\n    }\n\n    return head;\n\n}\nNode *selectKaijiCard(Node *head, int indexK) {\n\n    for (int i = 0; i &lt; indexK - 1; i++) {\n\n        head = head-&gt;next;\n    }\n\n    return head;\n}\nNode *deleteSelectedKaijiCard(Node *head, int indexK) {\n\n    Node *curr = NULL;\n    if (indexK == 1)\n    {\n        curr = head;\n        head = head-&gt;next;\n        delete curr;\n        return head;\n    }\n\n    Node *deleteCard = head;\n\n    for (int i = 0; i &lt; indexK - 1; i++) {\n\n        curr = deleteCard;\n        deleteCard = deleteCard-&gt;next;\n    }\n    curr-&gt;next = deleteCard-&gt;next;\n    delete deleteCard;\n    return head;\n}\nList *createTonegawaDeck(int round) {\n\n    List *root = NULL;\n    List *front = NULL;\n    List *tail = NULL;\n\n    if (round == 1 || round == 2 || round == 3 || round == 7 || round == 8 || round == 9) {\n        front = new List;\n        front-&gt;card = \"Slave\";\n        tail = front;\n        root = front;\n\n        for (int i = 0; i &lt; 3; i++) {\n\n            front = new List;\n            front-&gt;card = \"Citizen\";\n            tail-&gt;next = front;\n            tail = front;\n        }\n\n        front = new List;\n        front-&gt;card = \"Citizen\";\n        tail-&gt;next = front;\n    }\n\n    if (round == 4 || round == 5 || round == 6 || round == 10 || round == 11 || round == 12) {\n        front = new List;\n        front-&gt;card = \"Emperor\";\n        tail = front;\n        root = front;\n\n        for (int i = 0; i &lt; 3; i++) {\n\n            front = new List;\n            front-&gt;card = \"Citizen\";\n            tail-&gt;next = front;\n            tail = front;\n        }\n\n        front = new List;\n        front-&gt;card = \"Citizen\";\n        tail-&gt;next = front;\n        front-&gt;next = root;\n    }\n\n    return root;\n}\nList *selectTonegawaCard(List *root, int indexT) {\n    for (int i = 0; i &lt; indexT; i++) {\n\n        root = root-&gt;next;\n    }\n\n    return root;\n\n}\nList *deleteSelectedTonegawaCard(List *root, int indexT) {\n\n    List *front = NULL;\n    if (indexT == 0)\n    {\n        front = root;\n        root = root-&gt;next;\n        delete front;\n        return root;\n    }\n\n    List *deleteTonegawaCard = root;\n\n    for (int i = 0; i &lt; indexT; i++) {\n\n        front = deleteTonegawaCard;\n        deleteTonegawaCard = deleteTonegawaCard-&gt;next;\n    }\n    front-&gt;next = deleteTonegawaCard-&gt;next;\n    delete deleteTonegawaCard;\n    return root;\n}\nbool betCheck(int betLength, int remainingLength) {\n\n    bool flag;\n    if (betLength &lt;= remainingLength) {\n        flag = true;\n    }\n    else if (betLength &gt; remainingLength) {\n        flag = false;\n    }\n    return flag;\n}\nint prizeCheck(int betLength, int round) {\n\n    int yen;\n    if (round == 1 || round == 2 || round == 3 || round == 7 || round == 8 || round == 9) {\n\n        yen = betLength * 100000;\n    }\n    if (round == 4 || round == 5 || round == 6 || round == 10 || round == 11 || round == 12) {\n\n        yen = betLength * 500000;\n    }\n    return yen;\n}\nvoid printDeck(Node * head) {\n\n    int count = 1;\n    cout &lt;&lt; \"===============\" &lt;&lt; endl;\n    cout &lt;&lt; \"Kaiji's cards\" &lt;&lt; endl;\n    cout &lt;&lt; \"===============\" &lt;&lt; endl &lt;&lt; endl;\n    while (head != NULL) {\n        cout &lt;&lt; count &lt;&lt; \". \" &lt;&lt; head-&gt;cards &lt;&lt; endl;\n        head = head-&gt;next;\n        count++;\n    }\n    cout &lt;&lt; endl;\n}\nint winCheck(List *root, Node *head, int cardIndex, int randTonegawa) {\n\n    int result = 0;\n\n    if ((head-&gt;cards == \"Citizen\") &amp;&amp; (root-&gt;card == \"Citizen\")) {\n\n        result = 0;\n    }\n    else if ((head-&gt;cards == \"Emperor\") &amp;&amp; (root-&gt;card == \"Citizen\") || (head-&gt;cards == \"Slave\") &amp;&amp; (root-&gt;card == \"Emeperor\") || (head-&gt;cards == \"Citizen\") &amp;&amp; (root-&gt;card == \"Slave\")) {\n\n        result = 1;\n    }\n    else if ((root-&gt;card == \"Emperor\") &amp;&amp; (head-&gt;cards == \"Citizen\") || root-&gt;card == \"Slave\" &amp;&amp; head-&gt;cards == \"Emperor\" || root-&gt;card == \"Citizen\" &amp;&amp; head-&gt;cards == \"Slave\") {\n\n        result = 2;\n    }\n    head = deleteSelectedKaijiCard(head, cardIndex);\n    root = deleteSelectedTonegawaCard(root, randTonegawa);\n    return result;\n}\nvoid gameOver(int cash, int round, int input, int remaining) {\n\n    if (round &lt;= 12 &amp;&amp; cash == 20000000 &amp;&amp; betCheck(input, remaining) == true) {\n        cout &lt;&lt; \"You did not entirely win! You only got \" &lt;&lt; cash &lt;&lt; \" Yen in 12 rounds!\" &lt;&lt; endl;\n        system(\"pause\");\n        exit(0);\n    }\n    else if (round == 12 &amp;&amp; cash &lt; 20000000 &amp;&amp; betCheck(input, remaining) == false) {\n\n        cout &lt;&lt; \"You won! You got\" &lt;&lt; cash &lt;&lt; \" Yen at Round \" &lt;&lt; round &lt;&lt; endl;\n    }\n\n}\n</code></pre>\n\n<p>List.h</p>\n\n<pre><code>#pragma once\n#include &lt;string&gt;\nusing namespace std;\n\nstruct List {\n    string card;\n    List* next = NULL;\n};\n</code></pre>\n\n<p>Node.h</p>\n\n<pre><code>#pragma once\n#include &lt;string&gt;\nusing namespace std;\n\nstruct Node {\n    string cards;\n    Node* next = NULL;\n    Node* prev = NULL;  \n};\n</code></pre>\n"}, {"tags": ["c++", "printing", "formatting", "pascals-triangle"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1443656148, "post_id": 32877194, "comment_id": 53585641, "body": "Using <code>double</code> might get you into trouble. Why not a 64-bit integer?"}, {"owner": {"reputation": 1, "user_id": 4668251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2299fd6a19b2a3c2507ee831beed009a?s=128&d=identicon&r=PG", "display_name": "Chris Masterson", "link": "https://stackoverflow.com/users/4668251/chris-masterson"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1443657603, "post_id": 32877194, "comment_id": 53586010, "body": "I figured out how to do it.  I simply used an if else statement inside the second for loop which would print a space before and after the pascal number if it is less than 10 and it prints only a space after if it is 10 or greater."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1443658354, "post_id": 32877194, "comment_id": 53586180, "body": "If you&#39;ve got a workable answer, might want to add that below."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1443658822, "post_id": 32877194, "comment_id": 53586284, "body": "Search StackOverflow for &quot;c++ pascal triangle&quot; to see examples."}], "owner": {"reputation": 1, "user_id": 4668251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2299fd6a19b2a3c2507ee831beed009a?s=128&d=identicon&r=PG", "display_name": "Chris Masterson", "link": "https://stackoverflow.com/users/4668251/chris-masterson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1443663992, "creation_date": 1443655990, "last_edit_date": 1443663992, "question_id": 32877194, "link": "https://stackoverflow.com/questions/32877194/c-pascals-triangle-formatting", "title": "C++ Pascals Triangle formatting", "body": "<p>I am currently having an issue with a pascal's triangle function I am working on.  My main issue is that it doesn't format like a half pyramid but like a curve almost.  Here is my code so far, I will include the current output at the end where i set numRows=6:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;math.h&gt;\n\nusing namespace std;\n\ndouble factorial(double x)\n{   \n    int i;\n    double x_new=1;\n    for (i=x; i&gt;=1; i--)\n    {\n        x_new*=i;\n    }\n\n    return x_new;\n}\n\ndouble Pascal(double n, double p){\n    double d=n-p;\n    double fact_1;\n    double fact_2;\n    double fact_3;\n    fact_1=factorial(n);\n    fact_2=factorial(p);\n    fact_3=factorial(d);\n    return fact_1/(fact_2*fact_3);\n}\n\n\nint main()\n{\n    int n;\n    double  numRows;\n    double numCollumns;\n    cout &lt;&lt; \"Enter number of rows: \";\n    cin &gt;&gt; numRows;\n    n=numRows+1;\n    for (numRows=0; numRows&lt;n;numRows++)\n    {\n        for(numCollumns=0; numCollumns&lt;=numRows;numCollumns++)\n        {\n            cout &lt;&lt; Pascal(numRows, numCollumns) &lt;&lt; \" \";\n        }\n        cout &lt;&lt; endl;\n    }\n\n\n\n\n}  \n\n//this is the output of the function when numRows is set to 6:\n//  1  \n//  1 1\n//  1 2 1\n//  1 3 3 1\n//  1 4 6 4 1\n//  1 5 10 10 5 1\n</code></pre>\n"}, {"tags": ["c++", "multidimensional-array"], "answers": [{"comments": [{"owner": {"reputation": 289, "user_id": 5212115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25fecbb15f84998a822cbd9eb7a47e79?s=128&d=identicon&r=PG&f=1", "display_name": "Kirkova", "link": "https://stackoverflow.com/users/5212115/kirkova"}, "edited": false, "score": 0, "creation_date": 1443657081, "post_id": 32877287, "comment_id": 53585884, "body": "Though I would also recommend a vector, you can still use arrays, you just have to allocate them dynamically. int **MatrixArray = new int*[i]; for(int k = 0; k &lt; i; k++) { MatrixArray[k] = new int[j]; } This works because the system can ask for more memory when it&#39;s the heap whenever you need it (during runtime), so you can allocate the 2D array on the heap. Arrays on the stack need to have constant values like @Lightness said. Again, a vector is easier, but this is basically what the vector is doing under the hood."}, {"owner": {"reputation": 3, "user_id": 4456321, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004240395098/picture?type=large", "display_name": "Zoel Parent", "link": "https://stackoverflow.com/users/4456321/zoel-parent"}, "edited": false, "score": 0, "creation_date": 1443657564, "post_id": 32877287, "comment_id": 53586001, "body": "Seems like I will have to use vectors then, thanks for the speedy reply."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 0, "last_activity_date": 1443656589, "creation_date": 1443656589, "answer_id": 32877287, "question_id": 32877180, "link": "https://stackoverflow.com/questions/32877180/declaring-arrays-with-const-variables/32877287#32877287", "title": "Declaring arrays with const variables", "body": "<p>Array dimensions must be <em>compile-time constant</em>, and <code>const</code> doesn't mean that.</p>\n\n<p>A <code>const</code> object cannot change its value after initialisation, but its initialiser may be determined at runtime (e.g. <code>const int x = rand()</code>) so, in general, these objects are not valid candidates for array dimensions.</p>\n\n<p>Introducing... <code>constexpr</code>.</p>\n\n<p>If you plonk the keyword <code>constexpr</code> in front of the dimensions, you will be off to a good start. Your compiler will prevent you from breaking the contract of <code>constexpr</code>, and will consequently enable you to use your shiny new <code>constexpr</code> object as an array dimension.</p>\n\n<p>Alas, in this example, you <em>are</em> breaking that contract already, since the inputs are non-constant. Tough cookies.</p>\n\n<p><strong>Use a vector instead.</strong></p>\n"}], "owner": {"reputation": 3, "user_id": 4456321, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004240395098/picture?type=large", "display_name": "Zoel Parent", "link": "https://stackoverflow.com/users/4456321/zoel-parent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 32877287, "answer_count": 1, "score": 0, "last_activity_date": 1443656589, "creation_date": 1443655934, "question_id": 32877180, "link": "https://stackoverflow.com/questions/32877180/declaring-arrays-with-const-variables", "title": "Declaring arrays with const variables", "body": "<p>I am trying to create a multidimensional array, however when I pass a const int value I can't compile.  Error is \"expression must have a constant value\" for each dimension.</p>\n\n<pre><code>class Matrix {\n\n public:\n     Matrix(int rowCount, int columnCount, int scalarInput) { \n\n        const int row_C = rowCount;\n        const int colum_C = columnCount;\n        const int scalar_C = scalarInput;\n\n        matrixCalculation(row_C, colum_C, scalar_C);\n    }\n\n\n    void matrixCalculation(const int i, const int j, const int s) {\n\n        int matrixArray[i][j]; // error here, i and j: \"expression must have a constant value\"\n\n\n    }\n\n};\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "visual-studio", "visual-c++", "visual-studio-2015"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 3897570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v8nRk.jpg?s=128&g=1", "display_name": "calvinsykes", "link": "https://stackoverflow.com/users/3897570/calvinsykes"}, "edited": false, "score": 0, "creation_date": 1443656882, "post_id": 32877247, "comment_id": 53585823, "body": "This does fix the issue, but I&#39;m still curious why the files were found when targeting x64 but not x86.   Additionally, <a href=\"http://www.c-sharpcorner.com/UploadFile/7ca517/shared-project-an-impressive-features-of-visual-studio-201/\" rel=\"nofollow noreferrer\">this link</a> seems to suggest that shared items are automatically accessible without having to modify include paths."}, {"owner": {"reputation": 2487, "user_id": 5380314, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8924d6d1c2470b1d7c8190dc37ef517c?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Nasonov", "link": "https://stackoverflow.com/users/5380314/andrey-nasonov"}, "reply_to_user": {"reputation": 5, "user_id": 3897570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v8nRk.jpg?s=128&g=1", "display_name": "calvinsykes", "link": "https://stackoverflow.com/users/3897570/calvinsykes"}, "edited": false, "score": 0, "creation_date": 1443657013, "post_id": 32877247, "comment_id": 53585864, "body": "That link it about C#/.NET, not Native C++."}, {"owner": {"reputation": 5, "user_id": 3897570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v8nRk.jpg?s=128&g=1", "display_name": "calvinsykes", "link": "https://stackoverflow.com/users/3897570/calvinsykes"}, "edited": false, "score": 0, "creation_date": 1443657439, "post_id": 32877247, "comment_id": 53585971, "body": "It seems surprising that an IDE feature is not universal to all languages supported by the IDE, but fair enough."}, {"owner": {"reputation": 4874, "user_id": 212538, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8f47479e0460220549065c1d3a231d23?s=128&d=identicon&r=PG", "display_name": "Janus", "link": "https://stackoverflow.com/users/212538/janus"}, "edited": false, "score": 0, "creation_date": 1486139946, "post_id": 32877247, "comment_id": 71232274, "body": "I agree this is how it works -- but it seems to be a bug: From the section &quot;Share source code across multiple C++ projects&quot; on <a href=\"https://blogs.msdn.microsoft.com/vcblog/2015/07/30/cross-platform-code-sharing-with-visual-c/\" rel=\"nofollow noreferrer\">this</a> msdn blog post:  <i>the files in the referenced \u201cshared items\u201d project will simply be treated as if they were part of the referencing project</i>."}], "tags": [], "owner": {"reputation": 2487, "user_id": 5380314, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8924d6d1c2470b1d7c8190dc37ef517c?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Nasonov", "link": "https://stackoverflow.com/users/5380314/andrey-nasonov"}, "is_accepted": true, "score": 1, "last_activity_date": 1443656269, "creation_date": 1443656269, "answer_id": 32877247, "question_id": 32877179, "link": "https://stackoverflow.com/questions/32877179/including-code-in-shared-project-only-works-when-x64-platform-is-selected/32877247#32877247", "title": "Including code in shared project only works when x64 platform is selected", "body": "<p>Adding project references in VS++ projects does not affect include paths.</p>\n\n<p>You should manually add referenced project directories into include path for all configurations and platforms.</p>\n"}], "owner": {"reputation": 5, "user_id": 3897570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v8nRk.jpg?s=128&g=1", "display_name": "calvinsykes", "link": "https://stackoverflow.com/users/3897570/calvinsykes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 795, "favorite_count": 0, "accepted_answer_id": 32877247, "answer_count": 1, "score": 0, "last_activity_date": 1443656269, "creation_date": 1443655932, "question_id": 32877179, "link": "https://stackoverflow.com/questions/32877179/including-code-in-shared-project-only-works-when-x64-platform-is-selected", "title": "Including code in shared project only works when x64 platform is selected", "body": "<p>I have a VS2015 solution with a folder structure like the following:</p>\n\n<pre><code>solution\n    project1\n        (code and headers for project1)\n    project2\n        (code and headers for project2)\n    shared_items_project\n        folder1\n            (some shared code and headers)\n        folder2\n            (more shared code and headers)\n</code></pre>\n\n<p>When the target platform is set to x64 code in project1 and project2, which reference the shared project, can include headers in it like <code>#include \"folder1\\some_header.h\"</code>. This seems to be the correct behaviour IMO: everything in the shared project appears to lie in the same directory as the project referencing it.<br>\nHowever, switching platform to Win32 stops this working: VS claims it can't find any of the files unless the includes are rewritten like <code>#include \"..\\shared_project\\folder1\\some_header.h\"</code>, implying that the shared project isn't being referenced.</p>\n\n<p>I've been unable to find anything in the project properties that would stop shared items being imported, nor do the project files give any indication that shared item importing is dependent on architecture setting. So I'm at a loss as to why this should be happening - ideas appreciated!</p>\n"}, {"tags": ["c++", "qt", "http", "qt5", "ipc"], "comments": [{"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 1, "creation_date": 1443656658, "post_id": 32877094, "comment_id": 53585771, "body": "I would not write custom socket at all. No matter what class encapsulates the socket, either loopback accessible to your system socket, or not. I would rather explore the way to manipulate the firewall for allowing specific process/socket to access loopback."}, {"owner": {"reputation": 21, "user_id": 5380493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9666c1e240fb069cc095b360f9087268?s=128&d=identicon&r=PG&f=1", "display_name": "Vitaliy", "link": "https://stackoverflow.com/users/5380493/vitaliy"}, "reply_to_user": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1443703052, "post_id": 32877094, "comment_id": 53605262, "body": "@AlexanderVX I know how to configure firewall. I can&#39;t configure firewall because I have not administrator&#39;s permissions on this computer. I can&#39;t add additional rules to firewall because of corporate security policy. Therefore, I need custom socket."}], "owner": {"reputation": 21, "user_id": 5380493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9666c1e240fb069cc095b360f9087268?s=128&d=identicon&r=PG&f=1", "display_name": "Vitaliy", "link": "https://stackoverflow.com/users/5380493/vitaliy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 360, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1443655406, "creation_date": 1443655406, "question_id": 32877094, "link": "https://stackoverflow.com/questions/32877094/how-to-create-custom-qtcpsocket-class-in-qnetworkaccessmanager", "title": "How to create custom QTcpSocket class in QNetworkAccessManager", "body": "<p><strong>How to create custom QTcpSocket class in QNetworkAccessManager?</strong></p>\n\n<p>I want to write a simple client-server application, which will be communicate using HTTP protocol.\nIt will be a simple http web server with QTcpServer and simple Web Browser with QWebView and QTcpSocket.\nThis application will have two thread in one process. One thread for server and one thread for client. Client will communicate with server using HTTP protocol.\nIn this case, communication between server and client (using HTTP) takes place via a network.</p>\n\n<p>I want to organize communication (using HTTP) between server and client, was via some inter process communication (IPC). For example dbus or any. Because HTTP is a text protocol, and we can send text data to server via network or dbus or any IPC.\nI want to organize HTTP communication via IPC for my application, because I work on the computer where I have not a root permissions, and closed all unused ports and interfaces (including loop back). If QNetworkAccessManager uses network for HTTP requests, it is clear to me.</p>\n\n<p>Is it possible in QT framework create MyCustomQTcpSocket wich will be inherited from QTcpSocket class? And MyCustomQTcpSocket will be write data into dbus (or any IPC) instead of TCP socket</p>\n\n<p>I think if we can create custom (for example MyQNetworkAccessManager) QNetworkAccessManager and after assign MyQNetworkAccessManager for QWebView then we can create custom (for example MyCustomQTcpSocket) QTcpSocket and assign MyCustomQTcpSocket for MyQNetworkAccessManager.</p>\n\n<p>I know that we can create custom MyQNetworkAccessManager from QNetworkAccessManager and make realization our own createRequest method, but if do this, than we need also create own realization of QNetworkReply class, own realization of slots and signals and other dependencies.</p>\n\n<p>If we create custom QTcpSocket class, we will be able to redirect text data from network to dbus (or any IPC) and we will be able to decrease own realization of dependencies (like own QNetworkReply, signals, slots) .</p>\n"}, {"tags": ["c++", "pointers", "reference", "virtual", "abstract"], "comments": [{"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1443656311, "post_id": 32877089, "comment_id": 53585681, "body": "Don&#39;t forget to add a <code>virtual</code> destructor to <code>base</code>."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1443722650, "post_id": 32877089, "comment_id": 53617397, "body": "If your manager uses shared pointers, why not just take a shared pointer as the argument to the <code>add</code> method?"}], "answers": [{"comments": [{"owner": {"reputation": 1009, "user_id": 4044399, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-so9b_hyiueo/AAAAAAAAAAI/AAAAAAAAADg/a32_3oCvIe4/photo.jpg?sz=128", "display_name": "Willy Goat", "link": "https://stackoverflow.com/users/4044399/willy-goat"}, "edited": false, "score": 0, "creation_date": 1443657615, "post_id": 32877173, "comment_id": 53586021, "body": "Very interesting. I&#39;ll probably be using this in my project. Not as elegant as I&#39;d hoped, but It&#39;s not the end of the world if the user has to know there&#39;s pointers."}, {"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "reply_to_user": {"reputation": 1009, "user_id": 4044399, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-so9b_hyiueo/AAAAAAAAAAI/AAAAAAAAADg/a32_3oCvIe4/photo.jpg?sz=128", "display_name": "Willy Goat", "link": "https://stackoverflow.com/users/4044399/willy-goat"}, "edited": false, "score": 0, "creation_date": 1443658686, "post_id": 32877173, "comment_id": 53586256, "body": "@WillyGoat I&#39;ve added another option where the caller doesn&#39;t really need to know there are any pointers involved."}], "tags": [], "owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "is_accepted": true, "score": 4, "last_activity_date": 1443658402, "last_edit_date": 1443658402, "creation_date": 1443655900, "answer_id": 32877173, "question_id": 32877089, "link": "https://stackoverflow.com/questions/32877089/arrays-of-pointers-to-abstract-types/32877173#32877173", "title": "Arrays of Pointers to Abstract Types", "body": "<h2>Pass <code>unique_ptr</code></h2>\n\n<p>Your <code>add</code> function takes ownership of this object. A safe way of passing ownership is to pass <code>unique_ptr</code>.</p>\n\n<p>Using a <code>unique_ptr</code> is fairly flexible because you can construct a <code>shared_ptr</code> from a <code>unique_ptr</code> or if you change your mind in the future you can store the <code>unique_ptr</code> directly. </p>\n\n<pre><code>class manager{\n  vector&lt;shared_ptr&lt;base&gt;&gt; ptrs;\npublic:\n  void add(std::unique_ptr&lt;base&gt; ptr){\n    ptrs.emplace_back(std::move(ptr));\n  }\n};\n\nmanager foo;\nfoo.add(std::make_unique&lt;derived&gt;());\n</code></pre>\n\n<p>Using a temporary <code>std::unique_ptr</code> you avoid the owning raw pointer that is not exception safe. By using <code>make_unique</code> you can avoid writing <code>new</code>.</p>\n\n<p><a href=\"http://melpon.org/wandbox/permlink/F0V80kVXpYlUfXSa\" rel=\"nofollow\">Live demo.</a></p>\n\n<h2>Pass a Factory</h2>\n\n<p>Another option if the caller really doesn't want to have to deal with any kind of pointer is to pass some sort of Factory that the <code>add</code> function uses to construct the object. The Factory could simply be a <code>static</code> <code>create</code> function on the <code>derived</code> class itself:</p>\n\n<pre><code>using Factory = std::function&lt;std::unique_ptr&lt;base&gt;()&gt;;\n\nclass manager{\n std::vector&lt;std::shared_ptr&lt;base&gt;&gt; ptrs;\npublic:\n void addUsing(const Factory&amp; factory){\n  ptrs.emplace_back(factory());\n }\n};\n\nclass derived : public base {\npublic:\n ...\n  static std::unique_ptr&lt;derived&gt; create() { \n    return std::make_unique&lt;derived&gt;();\n  }\n};\n\nmanager foo;\nfoo.addUsing(derived::create);\n</code></pre>\n\n<p><a href=\"http://melpon.org/wandbox/permlink/VJNhqbPtqgmApm9o\" rel=\"nofollow\">Live demo</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1443656559, "post_id": 32877228, "comment_id": 53585745, "body": "This is great but it relies on the type being added being known at compile time. Often with polymorphic types the type will not be known till runtime."}, {"owner": {"reputation": 2969, "user_id": 4683600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbcf47e6c220e1d2bf49575565b46da5?s=128&d=identicon&r=PG&f=1", "display_name": "bku_drytt", "link": "https://stackoverflow.com/users/4683600/bku-drytt"}, "reply_to_user": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1443656886, "post_id": 32877228, "comment_id": 53585825, "body": "@ChrisDrew I understand, but I based it off of his example where he called <code>manager.add(derived()</code>, which implied (from my point of view) that he knew the type he was adding."}, {"owner": {"reputation": 1009, "user_id": 4044399, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-so9b_hyiueo/AAAAAAAAAAI/AAAAAAAAADg/a32_3oCvIe4/photo.jpg?sz=128", "display_name": "Willy Goat", "link": "https://stackoverflow.com/users/4044399/willy-goat"}, "edited": false, "score": 0, "creation_date": 1443657368, "post_id": 32877228, "comment_id": 53585957, "body": "Wow, I really like the result of this. Unfortunately there&#39;s a lot of unfamiliar code there, so I&#39;ll have to do some reading before I can use something like that."}, {"owner": {"reputation": 2969, "user_id": 4683600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbcf47e6c220e1d2bf49575565b46da5?s=128&d=identicon&r=PG&f=1", "display_name": "bku_drytt", "link": "https://stackoverflow.com/users/4683600/bku-drytt"}, "reply_to_user": {"reputation": 1009, "user_id": 4044399, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-so9b_hyiueo/AAAAAAAAAAI/AAAAAAAAADg/a32_3oCvIe4/photo.jpg?sz=128", "display_name": "Willy Goat", "link": "https://stackoverflow.com/users/4044399/willy-goat"}, "edited": false, "score": 0, "creation_date": 1443657547, "post_id": 32877228, "comment_id": 53585996, "body": "@WillyGoat In that case, I recommend you head on over to: <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/388242/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2969, "user_id": 4683600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbcf47e6c220e1d2bf49575565b46da5?s=128&d=identicon&r=PG&f=1", "display_name": "bku_drytt", "link": "https://stackoverflow.com/users/4683600/bku-drytt"}, "is_accepted": false, "score": 1, "last_activity_date": 1443657119, "last_edit_date": 1443657119, "creation_date": 1443656181, "answer_id": 32877228, "question_id": 32877089, "link": "https://stackoverflow.com/questions/32877089/arrays-of-pointers-to-abstract-types/32877228#32877228", "title": "Arrays of Pointers to Abstract Types", "body": "<p>You can let your <code>add()</code> function be passed the arguments to be used in the construction of type <code>T</code>, where <code>T</code> is specified as the type of a subclass.</p>\n\n<pre><code>template &lt;typename T, typename... TArgs&gt;\nvoid add(TArgs&amp;&amp;... args)\n{\n    ptrs.emplace_back(std::make_shared&lt;T&gt;(std::forward&lt;TArgs&gt;(args)...));\n}\n</code></pre>\n\n<p>Which can then be called as follows:</p>\n\n<pre><code>bm.add&lt;derived_a&gt;( \"hello\" ); // derived_a constructor takes a string\nbm.add&lt;derived_b&gt;( 42 );      // derived_b constructor takes an int\n</code></pre>\n\n<p><strong>Full example</strong></p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;memory&gt;\n\nclass base\n{\npublic:\n    virtual void f() = 0;\n};\n\nclass derived_a : public base\n{\npublic:\n    derived_a( std::string const&amp; s ) : s_{ s } {}\n    void f() override { std::cout &lt;&lt; \"derived_a::string = \" &lt;&lt; s_ &lt;&lt; '\\n'; }\n\nprivate:\n    std::string s_;\n};\n\nclass derived_b : public base\n{\npublic:\n    derived_b( int i ) : i_{ i } {}\n    void f() override { std::cout &lt;&lt; \"derived_b::int = \" &lt;&lt; i_ &lt;&lt; '\\n'; }\n\nprivate:\n    int i_;\n};\n\nclass base_manager\n{\npublic:\n    template &lt;typename T, typename... TArgs&gt;\n    void add( TArgs&amp;&amp;... args )\n    {\n        ptrs.emplace_back( std::make_shared&lt;T&gt;( std::forward&lt;TArgs&gt;( args )... ) );\n    }\n\n    void print() { for ( auto&amp; d : ptrs ) d-&gt;f(); }\n\nprivate:\n    std::vector&lt;std::shared_ptr&lt;base&gt;&gt; ptrs;\n};\n\nint main()\n{\n    base_manager bm;\n    bm.add&lt;derived_a&gt;( \"hello\" );\n    bm.add&lt;derived_b&gt;( 42 );\n    bm.print();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1009, "user_id": 4044399, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-so9b_hyiueo/AAAAAAAAAAI/AAAAAAAAADg/a32_3oCvIe4/photo.jpg?sz=128", "display_name": "Willy Goat", "link": "https://stackoverflow.com/users/4044399/willy-goat"}, "edited": false, "score": 0, "creation_date": 1443658055, "post_id": 32877436, "comment_id": 53586100, "body": "That&#39;s very nice! I take it this couldn&#39;t be done with a copy constructor, right? I&#39;m guessing it&#39;d run into the same problems when you try to <code>emplace_back(&amp;base(obj))</code>?"}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "reply_to_user": {"reputation": 1009, "user_id": 4044399, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-so9b_hyiueo/AAAAAAAAAAI/AAAAAAAAADg/a32_3oCvIe4/photo.jpg?sz=128", "display_name": "Willy Goat", "link": "https://stackoverflow.com/users/4044399/willy-goat"}, "edited": false, "score": 0, "creation_date": 1443658207, "post_id": 32877436, "comment_id": 53586147, "body": "@Willy Goat. You can do it with a copy constructor, but then you need a if-else statement inside the add method, that creates a copy of the right type. This has also the disadvantage, that everytime, you add a new class to your project, you also have to extend that if-elseif-.. statement"}, {"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "reply_to_user": {"reputation": 1009, "user_id": 4044399, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-so9b_hyiueo/AAAAAAAAAAI/AAAAAAAAADg/a32_3oCvIe4/photo.jpg?sz=128", "display_name": "Willy Goat", "link": "https://stackoverflow.com/users/4044399/willy-goat"}, "edited": false, "score": 0, "creation_date": 1443658938, "post_id": 32877436, "comment_id": 53586306, "body": "@WillyGoat For reference this technique is closely related to the <a href=\"https://en.wikipedia.org/wiki/Prototype_pattern\" rel=\"nofollow noreferrer\">Prototype pattern</a>."}, {"owner": {"reputation": 1009, "user_id": 4044399, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-so9b_hyiueo/AAAAAAAAAAI/AAAAAAAAADg/a32_3oCvIe4/photo.jpg?sz=128", "display_name": "Willy Goat", "link": "https://stackoverflow.com/users/4044399/willy-goat"}, "edited": false, "score": 0, "creation_date": 1443659051, "post_id": 32877436, "comment_id": 53586330, "body": "Aah. Thank you. I think a clone method is my preferred solution for now."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "reply_to_user": {"reputation": 1009, "user_id": 4044399, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-so9b_hyiueo/AAAAAAAAAAI/AAAAAAAAADg/a32_3oCvIe4/photo.jpg?sz=128", "display_name": "Willy Goat", "link": "https://stackoverflow.com/users/4044399/willy-goat"}, "edited": false, "score": 1, "creation_date": 1443659252, "post_id": 32877436, "comment_id": 53586374, "body": "@WillyGoat: there is actually a very nice extension to this pattern, that doesn&#39;t require a clone method, that is explained in this talk:<a href=\"https://www.youtube.com/watch?v=bIhUE5uUFOA\" rel=\"nofollow noreferrer\">youtube.com/watch?v=bIhUE5uUFOA</a>. It has the advantage, that it is non-intrusive, but the internals of manager become quite complicated. Maybe I&#39;ll update my answer later."}, {"owner": {"reputation": 1009, "user_id": 4044399, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-so9b_hyiueo/AAAAAAAAAAI/AAAAAAAAADg/a32_3oCvIe4/photo.jpg?sz=128", "display_name": "Willy Goat", "link": "https://stackoverflow.com/users/4044399/willy-goat"}, "edited": false, "score": 0, "creation_date": 1443659770, "post_id": 32877436, "comment_id": 53586469, "body": "@MikeMB Oh, nice, I&#39;ll definitely listen to the talk."}], "tags": [], "owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "is_accepted": false, "score": 1, "last_activity_date": 1443659891, "last_edit_date": 1443659891, "creation_date": 1443657502, "answer_id": 32877436, "question_id": 32877089, "link": "https://stackoverflow.com/questions/32877089/arrays-of-pointers-to-abstract-types/32877436#32877436", "title": "Arrays of Pointers to Abstract Types", "body": "<p>You can't pass a temporary (an r-value) to a non-const reference. Also you try to take the address of that temporary object, which will in the end produce a dangling pointer and undefined behavior. </p>\n\n<p><strong>Assuming you want to pass an object of unknown runtime type to the manager:</strong><br>\nOne thing you can do is using some sort of polymorphic copy mechanism (like a virtual clone method) and make an internal copy of the object on the heap (it has to be polymorphic, to avoid object slicing).</p>\n\n<pre><code>class base {\npublic:\n    virtual void do_stuff() = 0;\n    virtual shared_ptr&lt;base&gt; clone() const = 0;\n    virtual ~base()=default;\n};\n\nclass derived : public base {\n    int data;\npublic:\n    derived() :data(0) {};\n    derived(const derived&amp; other) :data(other.data)\n    {};\n    virtual shared_ptr&lt;base&gt; clone() const override { \n        return make_shared&lt;derived&gt;(*this); \n    };\n    void do_stuff() {/*stuff*/ }\n};\n\nclass manager {\n    vector&lt;shared_ptr&lt;base&gt;&gt; ptrs;\npublic:\n    void add(const base&amp; obj) {\n        ptrs.emplace_back(obj.clone());\n    }\n};\nint main() {\n    manager foo;\n    foo.add(derived());\n}\n</code></pre>\n\n<p>without the <code>clone</code>, it would look something like this:</p>\n\n<pre><code>void add(const base&amp; obj) {\n    if (typeid(obj)== typeid(derived) ){\n        ptrs.emplace_back(make_shared&lt;derived&gt;(static_cast&lt;const derived&amp;&gt;(obj)));              \n    }\n    else if (typeid(obj) == typeid(derived2)) { \n    ...         \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1443663456, "post_id": 32878038, "comment_id": 53587261, "body": "How is this simpler than passing a <code>unique_ptr</code>? If you pass a <code>shared_ptr</code> you have the overhead of incrementing and decrementing the reference count on the <code>shared_ptr</code>. Also it is not clear if <code>add</code> is taking ownership or not."}], "tags": [], "owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "is_accepted": false, "score": 0, "last_activity_date": 1443662398, "creation_date": 1443662398, "answer_id": 32878038, "question_id": 32877089, "link": "https://stackoverflow.com/questions/32877089/arrays-of-pointers-to-abstract-types/32878038#32878038", "title": "Arrays of Pointers to Abstract Types", "body": "<p>Your original question seems to be concerned over the fact that the user/caller creates a pointer and hands it off and never deletes it.  My example below, simply makes it explicit to the user that he can hand it off and forget about it.  In otherwords, require the user to pass a shared_ptr...</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;vector&gt;\n#include &lt;memory&gt;\n\nusing namespace std;\n\nclass base{\npublic:\n    virtual void do_stuff() = 0;\n};\n\nclass derived : public base{\npublic:\n    void do_stuff(){/*stuff*/ }\n};\n\nclass manager{\n    vector&lt;shared_ptr&lt;base&gt;&gt; ptrs;\npublic:\n    void add(shared_ptr&lt;base&gt; ptr){\n        ptrs.emplace_back(ptr);\n    }\n};\n\nint main()\n{\n    manager foo;\n    shared_ptr&lt;derived&gt; bp(new derived()); //require the user supply a smart pointer\n    foo.add(bp);\n    return 0;\n}\n</code></pre>\n\n<p>This is simpler than the other posts, and may not be as forward thinking, but it does not require the derived class to implement additional base members.  In many cases, it is may be enough.</p>\n"}], "owner": {"reputation": 1009, "user_id": 4044399, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-so9b_hyiueo/AAAAAAAAAAI/AAAAAAAAADg/a32_3oCvIe4/photo.jpg?sz=128", "display_name": "Willy Goat", "link": "https://stackoverflow.com/users/4044399/willy-goat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 32877173, "answer_count": 4, "score": 3, "last_activity_date": 1443662398, "creation_date": 1443655367, "last_edit_date": 1443656961, "question_id": 32877089, "link": "https://stackoverflow.com/questions/32877089/arrays-of-pointers-to-abstract-types", "title": "Arrays of Pointers to Abstract Types", "body": "<p>I have been experimenting with abstract types.\nThe code below gives me a desired effect.</p>\n\n<pre><code>class base{\npublic:\n virtual void do_stuff() = 0;\n};\n\nclass derived: public base{\npublic:\n void do_stuff(){/*stuff*/}\n};\n\nclass manager{\n vector&lt;shared_ptr&lt;base&gt;&gt; ptrs;\npublic:\n void add(base* ptr){\n  ptrs.emplace_back(ptr);\n }\n};\n\nmanager foo;\nfoo.add(new derived());\n</code></pre>\n\n<p>Fine and dandy, but it's awkward because the user is not only dealing with pointers, but has to use <code>new</code> without ever calling <code>delete</code>. My question is if there's a way I can implement this where the user of <code>manager</code> doesn't ever have to deal with pointers or <code>new</code>.</p>\n\n<pre><code>foo.add(derived()); //example\n</code></pre>\n\n<p>My attempts to implement this end up as:</p>\n\n<pre><code>class manager{\n vector&lt;shared_ptr&lt;base&gt;&gt; ptrs;\npublic:\n void add(base&amp; ref){\n  ptrs.emplace_back(&amp;ref);\n }\n};\n</code></pre>\n\n<p>But, the compiler says <code>no known conversion from 'derived' to 'base&amp;'</code>. I have no idea how to make a reference to <code>base</code> compatible with a reference to <code>derived</code>. How do I get around this?</p>\n"}, {"tags": ["c++", "variables", "char"], "answers": [{"tags": [], "owner": {"reputation": 2487, "user_id": 5380314, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8924d6d1c2470b1d7c8190dc37ef517c?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Nasonov", "link": "https://stackoverflow.com/users/5380314/andrey-nasonov"}, "is_accepted": false, "score": 0, "last_activity_date": 1443655561, "creation_date": 1443655561, "answer_id": 32877117, "question_id": 32877087, "link": "https://stackoverflow.com/questions/32877087/how-to-display-char-character-as-an-int-not-as-the-ascii-symbol/32877117#32877117", "title": "How to display char character as an int, not as the ASCII symbol", "body": "<p>You should use <code>std::to_string</code> function to convert the number into string.</p>\n"}, {"tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 2, "last_activity_date": 1443655961, "creation_date": 1443655961, "answer_id": 32877186, "question_id": 32877087, "link": "https://stackoverflow.com/questions/32877087/how-to-display-char-character-as-an-int-not-as-the-ascii-symbol/32877186#32877186", "title": "How to display char character as an int, not as the ASCII symbol", "body": "<p>You're using int values for your characters, rather than characters, so you will get whatever characters happen to have those codes in your character set.  Use <code>'</code> arounds a character to get the character code for a specifiec character:</p>\n\n<pre><code>for (char ch = '1'; ch &lt;= '9'; ch++)\n    sections(prefix + ch + '.', levels - 1);\n</code></pre>\n\n<p>Note that this depends on the digit characters all being contiguous and in ascending order in your character set (implementation defined), but that is the case for every character set I can think of...</p>\n"}, {"tags": [], "owner": {"reputation": 63, "user_id": 4805067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f50940a4c14d72a6289bf0ca0ce209ba?s=128&d=identicon&r=PG&f=1", "display_name": "Max Shuu", "link": "https://stackoverflow.com/users/4805067/max-shuu"}, "is_accepted": false, "score": 0, "last_activity_date": 1443656732, "creation_date": 1443656732, "answer_id": 32877313, "question_id": 32877087, "link": "https://stackoverflow.com/questions/32877087/how-to-display-char-character-as-an-int-not-as-the-ascii-symbol/32877313#32877313", "title": "How to display char character as an int, not as the ASCII symbol", "body": "<p>The problem is your for-loop</p>\n\n<pre><code>char ch = 1 //is not a 1\nchar ch = '1' //instead is (but i'm not sure if you can increment this)\nchar ch = 49 // is also a 1\n</code></pre>\n\n<p>hope that helps.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/ASCII\" rel=\"nofollow\">https://en.wikipedia.org/wiki/ASCII</a></p>\n"}], "owner": {"reputation": 31, "user_id": 4771925, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f7ce080a5a2c8e439ded54d423cfb737?s=128&d=identicon&r=PG&f=1", "display_name": "MadelineStates", "link": "https://stackoverflow.com/users/4771925/madelinestates"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1443656732, "creation_date": 1443655359, "question_id": 32877087, "link": "https://stackoverflow.com/questions/32877087/how-to-display-char-character-as-an-int-not-as-the-ascii-symbol", "title": "How to display char character as an int, not as the ASCII symbol", "body": "<p>I need this character to display as a number but I keep getting smiley faces and hearts and other ASCII symbols. This part is where I think the problem is:</p>\n\n<pre><code> s = prefix + ch + '.';\n</code></pre>\n\n<p>And here's the whole code:</p>\n\n<pre><code>int main()\n{\n    int levels = 2;\n    string prefix = \"Recursion:\";\n\n    sections(prefix, levels);\n\n    system(\"pause\");\n    return 0;\n}\n\nvoid sections(string prefix, int levels)\n{\n    if (levels == 0)\n    {\n        cout &lt;&lt; prefix &lt;&lt; endl;\n    }\n    else\n    {\n        for (char ch = 1; ch &lt;= 9; ch++)\n        {\n            string s;\n            s = prefix + ch + '.';\n            sections(s, levels - 1);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "opengl"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4208508, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/V25kf.jpg?s=128&g=1", "display_name": "Kindman", "link": "https://stackoverflow.com/users/4208508/kindman"}, "edited": false, "score": 0, "creation_date": 1443814876, "post_id": 32877626, "comment_id": 53657155, "body": "Thank you for the clarification. I&#39;m still confused about the part &quot;Always configure an auxiliary directory structure for header and library files&quot;. Would you mind explaining it in detail. Thank you :D"}], "tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": false, "score": 1, "last_activity_date": 1443903331, "last_edit_date": 1592644375, "creation_date": 1443658806, "answer_id": 32877626, "question_id": 32877001, "link": "https://stackoverflow.com/questions/32877001/i-cannot-find-the-folder-c-program-files-x86-microsoft-visual-studio-14-0-vc/32877626#32877626", "title": "I cannot find the folder C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\include\\gl on my laptop. How do I add it?", "body": "<blockquote>\n<p>Also does that mean opengl is not installed by default because I did check all the boxes when I installed visual studio community 2015. I couldn't find any clear answer anywhere.</p>\n</blockquote>\n<p>You have to distinguish between:</p>\n<ul>\n<li><p>a fully featured OpenGL driver being installed (which unfortunately doesn't happen by default on Windows)</p>\n</li>\n<li><p>the OpenGL development support files being available for your compiler environment.</p>\n</li>\n</ul>\n<p>As far as the compiler environment is concerned, since OpenGL-1.1 has been part of the Windows ABI contract since Windows-NT-4 all compilers that target the Windows-32 API <em>must</em> ship with the required support files.</p>\n<p>To check if your compiler installation is complete try to compile and execute the following little program:</p>\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;GL/gl.h&gt;\n#include &lt;stdio.h&gt;\n\n#pragma comment(lib, &quot;opengl32.lib&quot;)\n\nint main(int argc, char *argv[])\n{\n    if( &amp;glGetError ) {\n        fprintf(stderr, &quot;OpenGL glGetError symbol available\\n&quot;);\n    }\n}\n</code></pre>\n<p>It does not actually call an OpenGL function, but compiling it requires to link against opengl32.lib and testing for the symbol glGetError being non-NULL makes sure the linker will pull in a reference.</p>\n<blockquote>\n<p>I'm supposed to add glut and glew header files to the aforementioned folder</p>\n</blockquote>\n<p>Don't! <em>Never</em> put anything manually into installation directories of the compiler toolchain. <em>Always</em> configure an auxiliary directory structure for header and library files, that you add to your projects' compiler include and linker search paths.</p>\n<p>Install GLEW there. If you got the instructions to install GLEW into the compiler toolchain directory, disregard any other advice coming from the same source, as whoever is the source is apparently clueless about proper DevOps.</p>\n<h3>Update due to question in comment</h3>\n<p>In software development using 3rd party libraries is commonplace. You normally want to collect those libraries at a common location. Such libraries usually consist of header files, binaries and on some operating systems additional linker stubs. The binaries are built for a specific operating system and the linker stubs are made for specific compilers.</p>\n<p>The following would be such a directory structure, inspired by the way *nix OSs organize their stuff</p>\n<ul>\n<li><code>/local/include/</code>  gets all the headers</li>\n<li><code>/local/i686-windows/bin</code> 32 bit Windows extra tooling executables</li>\n<li><code>/local/i686-pc-linux-gnu/bin</code> 32 bit Linux extra tooling executables</li>\n<li><code>/local/i686-windows/lib</code> 32 bit Windows DLLs</li>\n<li><code>/local/i686-windows/libmsvc</code> 32 bit Visual C++ linker stubs and static libraries</li>\n<li><code>/local/i686-windows/libmingw</code> 32 bit GNU MinGW linker stubs and static libs</li>\n<li><code>/local/i686-pc-linux-gnu/lib</code> 32 bit Linux SOs and static libraries</li>\n<li><code>/local/x86_64-windows/bin</code> 64 bit Windows extra tooling executables</li>\n<li><code>/local/x86_64-pc-linux-gnu/bin</code> 64 bit Linux extra tooling executables</li>\n<li><code>/local/x86_64-windows/lib</code> 64 bit Windows DLLs</li>\n<li><code>/local/x86_64-windows/libmsvc</code> 32 bit Visual C++ linker stubs and static libraries</li>\n<li><code>/local/x86_64-windows/libmingw</code> 32 bit GNU MinGW linker stubs and static libs</li>\n<li><code>/local/x86_64-linux-gnu/lib</code> 64 bit Linux SOs and static libraries</li>\n</ul>\n<p>Ok, so the above list may be a little bit excessive for a simple development environment. But say you're targeting 64 bit Windows, using the Visual C++ compiler, then you'd create a directory structure</p>\n<ul>\n<li><code>/local/include/</code></li>\n<li><code>/local/x86_64-windows/bin</code></li>\n<li><code>/local/x86_64-windows/lib</code></li>\n<li><code>/local/x86_64-windows/libmsvc</code></li>\n</ul>\n<p>You'd add <code>GL/glut.h</code> and <code>GL/glew.h</code> (and the other header files) beneath <code>/local/include</code>, e.g.</p>\n<pre><code>/local/include/GL/glxew.h\n/local/include/GL/glew.h\n/local/include/GL/glut.h\n/local/include/GL/wglew.h\n</code></pre>\n<p>The <code>.lib</code> files you put into <code>/local/x86_64-windows/libmsvc</code> and the DLLs into <code>/local/x86_64-windows/lib</code>. Then in your project build settings you can simply add <code>/local/x86_64-windows/libmsvc</code> as a linker search path. For the DLLs you should add <code>/local/x86_64-windows/lib</code> to your systems environment <code>PATH</code> variable, so that they are found when executing the programs you built. For deployment of those programs copy the required DLLs beside the EXE file.</p>\n"}], "owner": {"reputation": 43, "user_id": 4208508, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/V25kf.jpg?s=128&g=1", "display_name": "Kindman", "link": "https://stackoverflow.com/users/4208508/kindman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2704, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443903331, "creation_date": 1443654793, "question_id": 32877001, "link": "https://stackoverflow.com/questions/32877001/i-cannot-find-the-folder-c-program-files-x86-microsoft-visual-studio-14-0-vc", "title": "I cannot find the folder C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\include\\gl on my laptop. How do I add it?", "body": "<p>Also does that mean opengl is not installed by default because I did check all the boxes when I installed visual studio community 2015. I couldn't find any clear answer anywhere. I'm supposed to add glut and glew header files to the aforementioned folder where gl.h and glu.h should already be there. But I couldnt find the folder include\\gl itself. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 4, "creation_date": 1443653443, "post_id": 32876780, "comment_id": 53584909, "body": "Is this just an intellectual exercise? If you are actually <i>using</i> code like this, you are almost certainly going down the wrong path."}, {"owner": {"reputation": 48529, "user_id": 63074, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e77511a13f8c53b87610e52b4b38aa43?s=128&d=identicon&r=PG", "display_name": "Mike Dinescu", "link": "https://stackoverflow.com/users/63074/mike-dinescu"}, "edited": false, "score": 0, "creation_date": 1443653444, "post_id": 32876780, "comment_id": 53584910, "body": "Parenthesis to the rescue.. Have you tried to parenthesize your code? And perhaps break the process down into 2-3 lines of code, perhaps using some local helper variables?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1443653860, "post_id": 32876780, "comment_id": 53585042, "body": "No production level code would use such construct. Even asking such from an academical viewpoint, its pretty poorly asked after all."}, {"owner": {"reputation": 7, "user_id": 5357358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/639518ad1ced5c2da7e76cd5cf2b3d3b?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/5357358/john-doe"}, "edited": false, "score": 0, "creation_date": 1443654058, "post_id": 32876780, "comment_id": 53585100, "body": "Well, if you just can&#39;t answer my question  it&#39;s not because it&#39;s poorly asked, it&#39;s because you don&#39;t know due to lack of knowledge."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1443656745, "post_id": 32876780, "comment_id": 53585799, "body": "You had me at <i>&quot;Suppose I have <code>int ****ptr;</code>&quot;</i> I mean seriously mate wtf"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1443656764, "post_id": 32876780, "comment_id": 53585803, "body": "I&#39;m voting to close this question as off-topic because intellectual exercises require intellect."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 5357358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/639518ad1ced5c2da7e76cd5cf2b3d3b?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/5357358/john-doe"}, "edited": false, "score": 0, "creation_date": 1443654287, "post_id": 32876885, "comment_id": 53585163, "body": "thank you very much. One last question: parethesis after int*** are used for initialization? What if I don&#39;t use them?"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "reply_to_user": {"reputation": 7, "user_id": 5357358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/639518ad1ced5c2da7e76cd5cf2b3d3b?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/5357358/john-doe"}, "edited": false, "score": 0, "creation_date": 1443654370, "post_id": 32876885, "comment_id": 53585190, "body": "See <a href=\"http://stackoverflow.com/questions/5211090/not-using-parentheses-in-constructor-call-with-new-c\" title=\"not using parentheses in constructor call with new c\">stackoverflow.com/questions/5211090/&hellip;</a>"}], "tags": [], "owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "is_accepted": true, "score": 1, "last_activity_date": 1443653992, "creation_date": 1443653992, "answer_id": 32876885, "question_id": 32876780, "link": "https://stackoverflow.com/questions/32876780/allocating-array-in-quadriple-pointer/32876885#32876885", "title": "Allocating array in quadriple pointer", "body": "<pre><code>int ****ptr;\nptr = new int***();\n*ptr = new int**();\n**ptr = new int*();\n***ptr = new int[size_of_arr];\n\n//access (***ptr)[index]\n\ndelete[] ***ptr;\ndelete **ptr;\ndelete *ptr;\ndelete ptr;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "is_accepted": false, "score": 0, "last_activity_date": 1443654496, "creation_date": 1443654496, "answer_id": 32876960, "question_id": 32876780, "link": "https://stackoverflow.com/questions/32876780/allocating-array-in-quadriple-pointer/32876960#32876960", "title": "Allocating array in quadriple pointer", "body": "<p>Note that <code>***ptr[4]</code> and <code>(***ptr)[4]</code> are <em>not</em> the same thing. The index operator (<code>[4]</code>) takes precedence over the dereference operator (<code>*</code>).</p>\n\n<pre><code>int ****ptr;\nptr = new int***[5];\nptr[4] = new int**;\n*ptr[4] = new int*;\n**ptr[4] = new int;\n***ptr[4] = 77;\n\ndelete **ptr[4];\ndelete *ptr[4];\ndelete ptr[4];\ndelete [] ptr;\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 5357358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/639518ad1ced5c2da7e76cd5cf2b3d3b?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/5357358/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "closed_date": 1443713850, "accepted_answer_id": 32876885, "answer_count": 2, "score": -5, "last_activity_date": 1443654496, "creation_date": 1443653306, "last_edit_date": 1443653699, "question_id": 32876780, "link": "https://stackoverflow.com/questions/32876780/allocating-array-in-quadriple-pointer", "closed_reason": "Needs details or clarity", "title": "Allocating array in quadriple pointer", "body": "<p>Suppose I have int <code>****ptr;</code>. I want to allocate a dynamic 1-dimensional array on the end of this ptr, so when I type <code>***ptr[4]</code> I would yield an element. Please, help.</p>\n\n<p>p.s.\nI am not using this code in my real applications, it's just an intellectual exercise to understand how pointers work.\nI cannot directly do <code>***ptr = malloc(sizeof(int)*size_of_arr));</code> right? BEcause this way i will not be able to yield any elements</p>\n"}, {"tags": ["c++", "qt", "interface", "signals-slots"], "comments": [{"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 2, "creation_date": 1443656352, "post_id": 32876713, "comment_id": 53585692, "body": "virtual signal makes no sense to me as long as the signal has no implementation. Just declare a signal at parent."}, {"owner": {"reputation": 451, "user_id": 6659494, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Cmwn6.png?s=128&g=1", "display_name": "Damir Porobic", "link": "https://stackoverflow.com/users/6659494/damir-porobic"}, "edited": false, "score": 0, "creation_date": 1569874287, "post_id": 32876713, "comment_id": 102730096, "body": "Did you find any solution for this?"}], "answers": [{"tags": [], "owner": {"reputation": 475, "user_id": 4812102, "user_type": "registered", "profile_image": "https://graph.facebook.com/984436241567947/picture?type=large", "display_name": "Aurel Branzeanu", "link": "https://stackoverflow.com/users/4812102/aurel-branzeanu"}, "is_accepted": false, "score": 0, "last_activity_date": 1443735369, "creation_date": 1443735369, "answer_id": 32897262, "question_id": 32876713, "link": "https://stackoverflow.com/questions/32876713/connect-qt-signals-declared-in-interface/32897262#32897262", "title": "Connect QT Signals declared in interface", "body": "<p>Signals could not be virtual. Could be declared in interfaces without virtual clause and should be inherited by lower classes.</p>\n"}], "owner": {"reputation": 93, "user_id": 1459188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/drHgH.jpg?s=128&g=1", "display_name": "sng", "link": "https://stackoverflow.com/users/1459188/sng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1851, "favorite_count": 1, "answer_count": 1, "score": 7, "last_activity_date": 1443735369, "creation_date": 1443652888, "last_edit_date": 1443654284, "question_id": 32876713, "link": "https://stackoverflow.com/questions/32876713/connect-qt-signals-declared-in-interface", "title": "Connect QT Signals declared in interface", "body": "<p>Is there any way to use Qt5 style Signal &amp; Slot connection if the signals are declared in interfaces ?. </p>\n\n<p>My Interfaces:</p>\n\n<pre><code>class IMyInterfaces{\nprotected:\n    IMyInterfaces() {} //Prohibit instantiate interfaces\npublic:\n    virtual ~IMyInterfaces(){} \n\nsignals:\n    virtual void notify_signal() =0;\n};\nQ_DECLARE_INTERFACE(IMyInterfaces, \"IMyInterfaces\");\n</code></pre>\n\n<p>And a class which implements above interfaces:</p>\n\n<pre><code>class MyClass : public QObject, public IMyInterfaces{\n    Q_OBJECT\n    Q_INTERFACES(IMyInterfaces) //Indicates interface implements\npublic:\n    MyClass():QObject(){\n    }\n    ~MyClass(){}\n\nsignals:\n     void notify_signal();\n};\n</code></pre>\n\n<p>In main program I would like to do something like this:</p>\n\n<pre><code>IMyInterfaces * myObject = new MyClass();\n//Connect signal using Qt5 style (This will introduce compilation errors)\nconnect(myObject ,&amp;IMyInterfaces::notify_signal, otherObject, &amp;OtherClass::aSlot);\n</code></pre>\n\n<p>The old style works but requires to cast to QObject:</p>\n\n<pre><code>QObject::connect(dynamic_cast&lt;QObject *&gt;(m),SIGNAL(notify_signal()),other,SLOT(aSlot())); //This works but need to cast to QObject. \n</code></pre>\n"}, {"tags": ["c++", "qt"], "answers": [{"comments": [{"owner": {"reputation": 523, "user_id": 1048148, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b3d759bd92ca093a50c49dfc07f26c59?s=128&d=identicon&r=PG", "display_name": "Martin Hennig", "link": "https://stackoverflow.com/users/1048148/martin-hennig"}, "edited": false, "score": 0, "creation_date": 1443779427, "post_id": 32897161, "comment_id": 53637520, "body": "As i stated, I open the project from a CMakeLists.txt file. In other words, it is a cmake project, not a qmake project. Therefore there are no .pro or .pro.user files. I have however imported the project several times from scratch without noticing any difference."}], "tags": [], "owner": {"reputation": 475, "user_id": 4812102, "user_type": "registered", "profile_image": "https://graph.facebook.com/984436241567947/picture?type=large", "display_name": "Aurel Branzeanu", "link": "https://stackoverflow.com/users/4812102/aurel-branzeanu"}, "is_accepted": false, "score": 1, "last_activity_date": 1443734857, "creation_date": 1443734857, "answer_id": 32897161, "question_id": 32876695, "link": "https://stackoverflow.com/questions/32876695/qtcreator-failed-to-start-program-path-or-permissions-wrong/32897161#32897161", "title": "QtCreator: Failed to start program. Path or permissions wrong?", "body": "<p>Have you tried to delete all the pro.user files from the project directory and then restarting Qt Creator and possibly reconfigure the projects? </p>\n"}], "owner": {"reputation": 523, "user_id": 1048148, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b3d759bd92ca093a50c49dfc07f26c59?s=128&d=identicon&r=PG", "display_name": "Martin Hennig", "link": "https://stackoverflow.com/users/1048148/martin-hennig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2875, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1593697716, "creation_date": 1443652813, "question_id": 32876695, "link": "https://stackoverflow.com/questions/32876695/qtcreator-failed-to-start-program-path-or-permissions-wrong", "title": "QtCreator: Failed to start program. Path or permissions wrong?", "body": "<p>I have opened a cmakelists.txt as a project in QtCreator under Windows 7. It compiles just fine and it produces a working executable in the right path. Only in the creator, the program wont start after building it. It always gives me the same error:</p>\n\n<p>\"Failed to start program. Path or permissions wrong?\nH:\\path\\to\\my.exe exited with code -1\"</p>\n\n<p>As the path (I have double-checked) is right, and the executable is in the right place and runs fine, I was guessing the permissions were the problem.\nI have tried running the creator as admin, which did not change anything.\nI also tried changing the working directory in \"Options- Build and Run - General\"</p>\n\n<p>Any ideas would be greatly appreciated!</p>\n\n<p>I am using QtCreator Qt Creator 3.3.1 Based on Qt 5.4.1, with a mingw compiler.</p>\n"}, {"tags": ["c++", "codeblocks"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user499054"}, "edited": false, "score": 1, "creation_date": 1443652231, "post_id": 32876517, "comment_id": 53584563, "body": "What is the error that is displayed?"}], "answers": [{"tags": [], "owner": {"reputation": 187, "user_id": 5090805, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6af55c13c60b9e4da54cea9f75e2c9d0?s=128&d=identicon&r=PG", "display_name": "Tyler", "link": "https://stackoverflow.com/users/5090805/tyler"}, "is_accepted": true, "score": 5, "last_activity_date": 1443651870, "creation_date": 1443651870, "answer_id": 32876561, "question_id": 32876517, "link": "https://stackoverflow.com/questions/32876517/errorexpected-before-token/32876561#32876561", "title": "&quot;error:expected &#39;;&#39; before &#39;{&#39; token", "body": "<p>You have <code>else()</code> in your code (above the return statement). <code>else</code> does not need parentheses after it. Also be aware that you probably don't need to have number as a global variable in this situation. If it MUST be global, do it, but otherwise try to keep your variables scoped in a class or function.</p>\n"}], "owner": {"reputation": 11, "user_id": 5382359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a995c10e646b3b0e9a6f81b2106e1d00?s=128&d=identicon&r=PG&f=1", "display_name": "Generic Man", "link": "https://stackoverflow.com/users/5382359/generic-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 32876561, "answer_count": 1, "score": 0, "last_activity_date": 1443652221, "creation_date": 1443651592, "last_edit_date": 1443652221, "question_id": 32876517, "link": "https://stackoverflow.com/questions/32876517/errorexpected-before-token", "title": "&quot;error:expected &#39;;&#39; before &#39;{&#39; token", "body": "<p>I'm doing homework in C++ using code blocks. The task was to write a program that will determine if a number is odd or even. Code is below. </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint number;\n\nint main()\n{\n   cout&lt;&lt;\"Please enter number\"&lt;&lt;endl;\n   cin&gt;&gt;number;\n   if(number%2==0)\n   {\n      cout&lt;&lt;\"The number:\"&lt;&lt;number&lt;&lt;\" is even\" &lt;&lt;endl;\n   }\n   else()\n   {\n      cout&lt;&lt;\"The number:\"&lt;&lt;number&lt;&lt;\" is odd\" &lt;&lt;endl;\n   }\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "json", "qt"], "answers": [{"tags": [], "owner": {"reputation": 16742, "user_id": 999943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e4c3b5820f4f39c2bbe57a8823dd0ad?s=128&d=identicon&r=PG", "display_name": "phyatt", "link": "https://stackoverflow.com/users/999943/phyatt"}, "is_accepted": true, "score": 3, "last_activity_date": 1443655879, "creation_date": 1443655879, "answer_id": 32877170, "question_id": 32876450, "link": "https://stackoverflow.com/questions/32876450/qt-writing-integer-data-into-json/32877170#32877170", "title": "Qt - Writing integer data into JSON", "body": "<p><code>QtJson</code> is baked into Qt 5.  It is easy to use, and gets it all ready for you pretty easily.</p>\n\n<pre><code>#include &lt;QCoreApplication&gt;\n#include &lt;QDebug&gt;\n#include &lt;QJsonObject&gt;\n#include &lt;QJsonDocument&gt;\n\nvoid saveToJson(QJsonObject &amp; json);\n\nint main(int argc, char *argv[])\n{\n    QCoreApplication a(argc, argv);\n\n    QJsonObject jsonObject;\n\n    saveToJson(jsonObject);\n\n    QJsonDocument jsonDoc(jsonObject);\n\n    qDebug() &lt;&lt; \"Example of QJsonDocument::toJson() &gt;&gt;&gt;\";\n    qDebug() &lt;&lt; jsonDoc.toJson();\n    qDebug() &lt;&lt; \"&lt;&lt;&lt;\";\n\n    return a.exec();\n}\n\nvoid saveToJson(QJsonObject &amp; json)\n{\n    QJsonObject ball;\n    ball[\"posx\"] = 12;\n    ball[\"posy\"] = 35;\n\n    json[\"ball\"] = ball;\n}\n</code></pre>\n\n<p>output</p>\n\n<pre><code>Example of QJsonDocument::toJson() &gt;&gt;&gt;\n\"{\n    \"ball\": {\n        \"posx\": 12,\n        \"posy\": 35\n    }\n}\n\"\n&lt;&lt;&lt;\n</code></pre>\n\n<p>Note: <code>qDebug()</code> wraps <code>QString</code> objects in quotes when printing. To get rid of that, pass your <code>QString</code> into <code>qPrintable()</code>.  And it puts <code>endl</code> in for you at the end of each line. </p>\n\n<p>For a more complex example see the official:</p>\n\n<p>JSON Save Game Example</p>\n\n<p><a href=\"http://doc.qt.io/qt-5/qtcore-json-savegame-example.html\" rel=\"nofollow\">http://doc.qt.io/qt-5/qtcore-json-savegame-example.html</a></p>\n\n<p>Hope that helps.</p>\n"}, {"tags": [], "owner": {"reputation": 16742, "user_id": 999943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e4c3b5820f4f39c2bbe57a8823dd0ad?s=128&d=identicon&r=PG", "display_name": "phyatt", "link": "https://stackoverflow.com/users/999943/phyatt"}, "is_accepted": false, "score": 1, "last_activity_date": 1443656945, "creation_date": 1443656945, "answer_id": 32877349, "question_id": 32876450, "link": "https://stackoverflow.com/questions/32876450/qt-writing-integer-data-into-json/32877349#32877349", "title": "Qt - Writing integer data into JSON", "body": "<p>And here are more examples of string manipulations, but for readability and maintainability, please use the <code>QJson</code> classes.</p>\n\n<pre><code>QString str;\nstr = QString(\"{\\\"ball\\\":{\\\"posx\\\":%1,\\\"posy\\\":%2}}\").arg(12).arg(35);\nqDebug() &lt;&lt; qPrintable(str);\n\nQByteArray ba = str.toLocal8Bit();\n\nqDebug() &lt;&lt; ba;\n\nQString str2;\n\nstr2 = \"{\\\"ball\\\":{\\\"posx\\\":\"\n        + QString::number(12)\n        + \",\\\"posy\\\":\"\n        + QString::number(35)\n        + \"}}\";\nqDebug() &lt;&lt; qPrintable(str2);\n</code></pre>\n\n<p>output</p>\n\n<pre><code>{\"ball\":{\"posx\":12,\"posy\":35}}\n\"{\"ball\":{\"posx\":12,\"posy\":35}}\"\n{\"ball\":{\"posx\":12,\"posy\":35}}\n</code></pre>\n\n<p>Note again that the quotes are added by <code>qDebug()</code> when printing a <code>QByteArray</code> object.</p>\n\n<p>Hope that helps.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1190832"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2077, "favorite_count": 0, "accepted_answer_id": 32877170, "answer_count": 2, "score": 0, "last_activity_date": 1443695785, "creation_date": 1443651194, "last_edit_date": 1443695785, "question_id": 32876450, "link": "https://stackoverflow.com/questions/32876450/qt-writing-integer-data-into-json", "title": "Qt - Writing integer data into JSON", "body": "<p>I am using Qt (5.5) and I want to exchange data in JSON format in a client-server application.</p>\n\n<p>So the format is constant:</p>\n\n<pre><code>{\n    \"ball\":\n    {\n        \"posx\": 12,\n        \"posy\": 35\n    }\n}\n</code></pre>\n\n<p>I would like to be able to define a ByteArray or string like so:</p>\n\n<p><code>QByteArray data = \"{\\\"ball\\\":{\\\"posx\\\":%s,\\\"posy\\\":%s}}\"</code> </p>\n\n<p>and then just write whatever the values for that into the string.</p>\n\n<p>How do I do that?</p>\n"}, {"tags": ["c++", "qt", "qtreeview", "qabstractitemmodel"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5394235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4723dfc5aa2b1f18278215676b31b4a3?s=128&d=identicon&r=PG&f=1", "display_name": "RovingStone", "link": "https://stackoverflow.com/users/5394235/rovingstone"}, "reply_to_user": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 0, "creation_date": 1443709557, "post_id": 32888930, "comment_id": 53609700, "body": "Could you try to implement <a href=\"http://doc.qt.io/qt-5.5/qabstractitemmodel.html#beginInsertRows\" rel=\"nofollow noreferrer\">insertRows</a> method? By default it does nothing and return false."}], "tags": [], "owner": {"reputation": 1, "user_id": 5394235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4723dfc5aa2b1f18278215676b31b4a3?s=128&d=identicon&r=PG&f=1", "display_name": "RovingStone", "link": "https://stackoverflow.com/users/5394235/rovingstone"}, "is_accepted": false, "score": -2, "last_activity_date": 1443707433, "last_edit_date": 1443707433, "creation_date": 1443706320, "answer_id": 32888930, "question_id": 32876390, "link": "https://stackoverflow.com/questions/32876390/qt-view-not-updating-after-qabstractitemmodelbegininsertrows-endinsertrows/32888930#32888930", "title": "Qt: View not updating after QAbstractItemModel::beginInsertRows/endInsertRows", "body": "<p>Try to emit <a href=\"http://doc.qt.io/qt-5.5/qabstractitemmodel.html#dataChanged\" rel=\"nofollow\">dataChanged</a> signal with parent index as argument.</p>\n"}, {"tags": [], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "is_accepted": true, "score": 4, "last_activity_date": 1443730403, "creation_date": 1443730403, "answer_id": 32896075, "question_id": 32876390, "link": "https://stackoverflow.com/questions/32876390/qt-view-not-updating-after-qabstractitemmodelbegininsertrows-endinsertrows/32896075#32896075", "title": "Qt: View not updating after QAbstractItemModel::beginInsertRows/endInsertRows", "body": "<p>An issue like this is indicative of an error elsewhere in the model. Without seeing the implementation of the model it is impossible to say where.</p>\n\n<p>Using <a href=\"https://wiki.qt.io/Model_Test\" rel=\"nofollow\">Model Test</a> can be very helpful in diagnosing the issue.</p>\n\n<p>Literally all you need to is instantiate a <code>ModelTest</code> instance with your model</p>\n\n<pre><code>QTreeView(&amp;_model);\nModelTest test(&amp;_model);\n</code></pre>\n\n<p>If the model doesn't conform, you will get assertion failures from <code>ModelTest</code> </p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5193721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf77139d48d5196e47751171800f3db3?s=128&d=identicon&r=PG&f=1", "display_name": "WiverN", "link": "https://stackoverflow.com/users/5193721/wivern"}, "is_accepted": false, "score": 0, "last_activity_date": 1463481019, "creation_date": 1463481019, "answer_id": 37273574, "question_id": 32876390, "link": "https://stackoverflow.com/questions/32876390/qt-view-not-updating-after-qabstractitemmodelbegininsertrows-endinsertrows/37273574#37273574", "title": "Qt: View not updating after QAbstractItemModel::beginInsertRows/endInsertRows", "body": "<p>I fixed this by adding <code>ui-&gt;treeView-&gt;reset();</code> after insert rows</p>\n"}, {"tags": [], "owner": {"reputation": 2201, "user_id": 382784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ef9aa6aad6b3a0251d6872bc4c5bdae?s=128&d=identicon&r=PG", "display_name": "wedesoft", "link": "https://stackoverflow.com/users/382784/wedesoft"}, "is_accepted": false, "score": 0, "last_activity_date": 1592520363, "creation_date": 1592520363, "answer_id": 62460573, "question_id": 32876390, "link": "https://stackoverflow.com/questions/32876390/qt-view-not-updating-after-qabstractitemmodelbegininsertrows-endinsertrows/62460573#62460573", "title": "Qt: View not updating after QAbstractItemModel::beginInsertRows/endInsertRows", "body": "<p>Make sure that the index passed to <code>beginInsertRows</code> is correct. In particular the column number for the index needs to be zero if the children are attached to column zero (which they normally are)!</p>\n"}], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2471, "favorite_count": 0, "accepted_answer_id": 32896075, "answer_count": 4, "score": 5, "last_activity_date": 1592520363, "creation_date": 1443650871, "last_edit_date": 1592644375, "question_id": 32876390, "link": "https://stackoverflow.com/questions/32876390/qt-view-not-updating-after-qabstractitemmodelbegininsertrows-endinsertrows", "title": "Qt: View not updating after QAbstractItemModel::beginInsertRows/endInsertRows", "body": "<p>I have a <code>QAbstractItemModel</code> derived model attached to a  <code>QTreeView</code></p>\n<p>I want to programatically append a single row to a node somewhere in my tree hierarchy.</p>\n<p>I have a slot which is connected to a signal from my view. The signal sends the <code>QModelIndex</code> of the node to which I want to append my new row. In the slot I call <code>beginInsertRows(...)</code> using that <code>QModelIndex</code> and <strong>the new row's row number</strong>, append the new row to my model data, and then call <code>endInsertRows()</code>:</p>\n<p>The value passed to <code>beginInsertRows(...)</code> is the number of child rows the parent node has <strong>prior to appending the new node</strong>.</p>\n<p>That is, if there are 4 child rows, they will have row indices 0, 1, 2 and 3. Therefore the new row number added will be 4.</p>\n<pre><code>void Model::slotOnAddRow(QModelIndex parent, std::string key)\n{\n    assert(parent.isValid());\n    Row&amp; parent_row = *static_cast&lt;Row*&gt;(parent.internalPointer());\n\n    beginInsertRows(parent, parent_row.numChildren(), parent_row.numChildren());\n\n    parent_row.addChildRow(key);\n\n    endInsertRows();\n}\n</code></pre>\n<p>The problem I'm having is that after calling <code>endInsertRows()</code> my view does not update.</p>\n<h2>Example:</h2>\n<p>Here is an example of my tree view.</p>\n<p><a href=\"https://i.stack.imgur.com/HW5s4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HW5s4.png\" alt=\"enter image description here\" /></a></p>\n<h2>Scenario:</h2>\n<ul>\n<li>I want to append a new row to <strong><code>SPREAD_1</code></strong>.</li>\n<li><strong><code>SPREAD_1</code></strong> currently has 4 children rows:\n<ul>\n<li><em>0</em>: <strong><code>inst_id</code></strong></li>\n<li><em>1</em>: <strong><code>LEG_1</code></strong></li>\n<li><em>2</em>: <strong><code>LEG_2</code></strong></li>\n<li><em>3</em>: <strong><code>LEG_3</code></strong></li>\n</ul>\n</li>\n<li>The new row will therefore have row index <em>4</em>, so I call <code>beginInsertRows(SPREAD_1, 4, 4);</code></li>\n</ul>\n<p>I do just this, and <strong>my view does not show my new row.</strong></p>\n<h2>Proof the node does actually exist:</h2>\n<p>I know the row exists in my model, because if I <strong>collapse</strong> the <code>SPREAD_1</code> node, and then <strong>re-expand it</strong>, my newly added row is now visible:</p>\n<p><a href=\"https://i.stack.imgur.com/HA544.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HA544.png\" alt=\"enter image description here\" /></a></p>\n<h2>Question:</h2>\n<p>AFAIKT I've followed the <a href=\"http://doc.qt.io/qt-5.5/qabstractitemmodel.html#beginInsertRows\" rel=\"nofollow noreferrer\">example online</a> correctly, but I'm obviously missing something.</p>\n<p>How can I append a new row to a tree node, and have the view update?</p>\n<p>Do I need to emit a signal or override another base class method?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1443651199, "post_id": 32876375, "comment_id": 53584250, "body": "You have a stray pair of parentheses on the definition."}], "answers": [{"tags": [], "owner": {"reputation": 89231, "user_id": 10320, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pijgr.jpg?s=128&g=1", "display_name": "dreamlax", "link": "https://stackoverflow.com/users/10320/dreamlax"}, "is_accepted": false, "score": 7, "last_activity_date": 1443651190, "creation_date": 1443651190, "answer_id": 32876449, "question_id": 32876375, "link": "https://stackoverflow.com/questions/32876375/c-error-size-declared-as-function-returning-a-function/32876449#32876449", "title": "C++ error: &quot;size&quot; declared as function returning a function", "body": "<p>The problem is with this line:</p>\n\n<pre><code>size_t Text::size() const()\n</code></pre>\n\n<p>Remove the <code>()</code> after <code>const</code>, so you have:</p>\n\n<pre><code>size_t Text::size() const\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 3211391, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ebd31bb514b5e299c6d5caefb6298362?s=128&d=identicon&r=PG&f=1", "display_name": "user3211391", "link": "https://stackoverflow.com/users/3211391/user3211391"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "closed_date": 1443656804, "answer_count": 1, "score": 0, "last_activity_date": 1443656789, "creation_date": 1443650782, "last_edit_date": 1443656789, "question_id": 32876375, "link": "https://stackoverflow.com/questions/32876375/c-error-size-declared-as-function-returning-a-function", "closed_reason": "Not suitable for this site", "title": "C++ error: &quot;size&quot; declared as function returning a function", "body": "<p>I'm not sure why I am getting an error during compilation that says \"error: \"size\" declared as function returning a function\" when size() is returning a type size_t. Any help would be appreciated, thanks.</p>\n\n<pre><code>// Text.h\n#include &lt;cstring&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nnamespace w3 {\n    class Text {\n        string* arrayRecords;\n        size_t numRecords;\n    public:\n        Text();\n        Text(const char* fileName);\n        size_t size() const;\n        ~Text();\n    };\n}\n\n// Text.cpp\n\n#include \"Text.h\"\n\nnamespace w3 {\n    Text::Text() {\n        numRecords = 0;\n        arrayRecords = nullptr;\n    }\n\n    Text::Text(const char* fileName) {\n        //\n    }\n\n    size_t Text::size() const() {\n        return numRecords;\n    }\n\n    Text::~Text() {\n        if(arrayRecords)\n            delete [] arrayRecords;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "sorting", "insertion-sort"], "comments": [{"owner": {"reputation": 31, "user_id": 5341254, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/720933391344835/picture?type=large", "display_name": "Caleb Moriarty", "link": "https://stackoverflow.com/users/5341254/caleb-moriarty"}, "edited": false, "score": 0, "creation_date": 1443650714, "post_id": 32876328, "comment_id": 53584092, "body": "I wasn&#39;t sure what part of the code the error was occurring in, so I posted everything, sorry if its a lot."}, {"owner": {"reputation": 14193, "user_id": 183203, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf9ec57f64280ffe34ddd221d5c5151f?s=128&d=identicon&r=PG", "display_name": "antlersoft", "link": "https://stackoverflow.com/users/183203/antlersoft"}, "edited": false, "score": 1, "creation_date": 1443650921, "post_id": 32876328, "comment_id": 53584155, "body": "Please post the exact error you are trying to fix-- does your program event compile, or does it crash when you run it?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1443651448, "post_id": 32876328, "comment_id": 53584333, "body": "<code>int arr[size];</code>  This is not valid C++ since <code>size</code> is a variable."}, {"owner": {"reputation": 31, "user_id": 5341254, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/720933391344835/picture?type=large", "display_name": "Caleb Moriarty", "link": "https://stackoverflow.com/users/5341254/caleb-moriarty"}, "edited": false, "score": 0, "creation_date": 1443651622, "post_id": 32876328, "comment_id": 53584390, "body": "Is that really the issue? I have used that before in previous programs. however this is my first attempt at using it while implementing multiple functions."}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1443651748, "post_id": 32876328, "comment_id": 53584425, "body": "The error message says you can&#39;t assign a <code>void</code> to a <code>string</code>. <code>sortArr</code> doesn&#39;t return anything."}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1443651829, "post_id": 32876328, "comment_id": 53584446, "body": "It&#39;s not a runtime error; your code doesn&#39;t compile."}, {"owner": {"reputation": 31, "user_id": 5341254, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/720933391344835/picture?type=large", "display_name": "Caleb Moriarty", "link": "https://stackoverflow.com/users/5341254/caleb-moriarty"}, "edited": false, "score": 0, "creation_date": 1443651869, "post_id": 32876328, "comment_id": 53584458, "body": "How should I fix this then? The reason I had sortArr set as void is because my instructions said it should have no return value."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5341254, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/720933391344835/picture?type=large", "display_name": "Caleb Moriarty", "link": "https://stackoverflow.com/users/5341254/caleb-moriarty"}, "edited": false, "score": 0, "creation_date": 1443652615, "post_id": 32876554, "comment_id": 53584661, "body": "Thank you for the quick response. I tried making the changes you suggested, and the program now compiles, but when it tries to print the sorted array, it just outputs:  \u2592\u2592\u2592 ]/{\u2592\u2592\u2592ygX\u2592\u2592\u2592\u2592 @P\u2592\u2592\u25923\u2592\u2592\u2592x\u2592f3\u25921\u2592\u2592\u2592gp@X\u2592\u2592\u2592\u2592 @P\u2592\u2592\u2592         @H\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592       \u2592\u2592&amp;\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592.\u2592\u2592e\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592\u2592!\u2592\u2592\u2592\u2592\u2592d@@8  h       \u2592 @  \u2592f \u2592\u25929\u2592\u2592\u2592\u2592\u2592I\u2592\u2592O\u2592=\u2592,\u259201\ud9da\udf97\u2592\u2592\u2592"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 31, "user_id": 5341254, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/720933391344835/picture?type=large", "display_name": "Caleb Moriarty", "link": "https://stackoverflow.com/users/5341254/caleb-moriarty"}, "edited": false, "score": 0, "creation_date": 1443652999, "post_id": 32876554, "comment_id": 53584756, "body": "@CalebMoriarty How are you printing it? You need to loop over the array and print each element in turn."}, {"owner": {"reputation": 31, "user_id": 5341254, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/720933391344835/picture?type=large", "display_name": "Caleb Moriarty", "link": "https://stackoverflow.com/users/5341254/caleb-moriarty"}, "edited": false, "score": 0, "creation_date": 1443653283, "post_id": 32876554, "comment_id": 53584844, "body": "Oh, haha that was it. I don&#39;t know why I didn&#39;t think of that before, I should know that by now haha. Thank you for your help :)"}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 2, "last_activity_date": 1443651812, "creation_date": 1443651812, "answer_id": 32876554, "question_id": 32876328, "link": "https://stackoverflow.com/questions/32876328/c-insertion-sort-error-when-passing-values-between-functions/32876554#32876554", "title": "C++ Insertion Sort: error when passing values between functions", "body": "<p>You have two variables named \"arr\": one in <code>main</code> and one in <code>sortArr</code>.</p>\n\n<p>You're reading into the one in <code>main</code> and sorting the one in <code>sortArr</code> (which is uninitialised, so the program is undefined).</p>\n\n<p>Pass the array as a parameter:</p>\n\n<pre><code>void sortArr(bool order, int arr[], int size){\n</code></pre>\n\n<p>There's also the issue of your attempting to assign the non-existent return value (<code>void</code>) of <code>sortArr</code> to a <code>std::string</code>.<br>\nDon't do that.  </p>\n\n<p>Call the function like this:</p>\n\n<pre><code>sortArr(order, arr, size);\n</code></pre>\n\n<p>(<code>int arr[size];</code> is also relying on a g++ extension \u2013 variable length arrays \u2013 which is non-standard. Consider using <code>std::vector</code>. It's been around for a couple of decades and is nothing to fear any more.)</p>\n"}], "owner": {"reputation": 31, "user_id": 5341254, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/720933391344835/picture?type=large", "display_name": "Caleb Moriarty", "link": "https://stackoverflow.com/users/5341254/caleb-moriarty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 32876554, "answer_count": 1, "score": -1, "last_activity_date": 1443657662, "creation_date": 1443650536, "last_edit_date": 1443657662, "question_id": 32876328, "link": "https://stackoverflow.com/questions/32876328/c-insertion-sort-error-when-passing-values-between-functions", "title": "C++ Insertion Sort: error when passing values between functions", "body": "<p>So I'm coding this program for class, in C++, where I ask the user to input the size of an array, and then the numbers inside of it. Then it asks the user if they wish to have it sorted in ascending, or descending order. </p>\n\n<p>I have tested each of my sorting algorithms individually, and both seem to work flawlessly, however, when I combine them in the sortArr function and pass the values entered by the user from the main function, I get a monstrous error which I cant even decipher. Does anyone know what the problem with my program is?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\nusing namespace std;\n\nvoid sortArr(bool order, int size)\n{\n    int imax;\n    int max;\n    int arr[size];\n\n    if (order == true)\n    {\n        for (int i = size - 1; i &gt; 0; i--)\n        {\n            max = arr[0];\n            imax = i;\n\n            for (int j = 0; j &lt; i; j++)\n            {\n                if (arr[j] &gt; arr[imax])\n                {\n                    max = arr[j];\n                    imax = j;\n                }\n            }\n\n            if (imax != i)\n            {\n                int temp = arr[i];\n\n                arr[i] = arr[imax];\n                arr[imax] = temp;\n            }\n        }\n    }\n\n    else if (order == false)\n    {\n        for (int i = 0; i &lt; size; i++)\n        {\n            max = arr[0];\n            imax = i;\n\n            for (int j = size - 1; j &gt; i; j--)\n            {\n                if (arr[j] &gt; arr[imax])\n                {\n                    max = arr[j];\n                    imax = j;\n                }\n            }\n\n            if (imax != i)\n            {\n                int temp = arr[i];\n\n                arr[i] = arr[imax];\n                arr[imax] = temp;\n            }\n        }\n    }\n}\n\nint main()\n{\n    int size;\n    int a;\n    bool order;\n    string output;\n\n    cout &lt;&lt; \"Enter the size of the array: \";\n    cin &gt;&gt; size;\n    if (size &lt; 0)\n    {\n        cout &lt;&lt; \"ERROR: You entered an incorrect value for the array size!\" &lt;&lt; endl;\n        return 1;\n    }\n\n    int arr[size];\n\n    cout &lt;&lt; \"Enter the numbers in the array, seperated by a space, and press enter: \";\n    for (int i = 0; i &lt; size; i++)\n    {\n        scanf(\"%d\", &amp;arr[i]);\n    }\n\n    cout &lt;&lt; \"Sort in ascending (0) or descending (1) order? \";\n    cin &gt;&gt; a;\n    if (a == 0)\n    {\n        order = true;\n        cout &lt;&lt; \"This is the sorted array in ascending order: \";\n    }\n    else if (a == 1)\n    {\n        order = false;\n        cout &lt;&lt; \"This is the sorted array in descening order: \";\n    }\n\n    output = sortArr(order, size);\n    cout &lt;&lt; output &lt;&lt; endl;\n\n    return 0;\n}\n\ncout &lt;&lt; \"Sort in ascending (0) or descending (1) order? \";\ncin &gt;&gt; a;\nif(a == 0){\n    order = true;\n    cout &lt;&lt; \"This is the sorted array in ascending order: \";\n}\nelse if(a == 1) {\n    order = false;\n    cout &lt;&lt; \"This is the sorted array in descening order: \";\n}\n\noutput = sortArr(order, size);\ncout &lt;&lt; output &lt;&lt; endl;\n\nreturn 0;\n}\n</code></pre>\n\n<p>The error code I'm receiving is this: </p>\n\n<pre><code>sortArray1.cpp: In function 'int main()':\nsortArray1.cpp:84:9: error: no match for 'operator=' (operand types are 'std::string {aka std::basic_string&lt;char&gt;}' and 'void')\n  output = sortArr(order, size);\n         ^\nsortArray1.cpp:84:9: note: candidates are:\nIn file included from /usr/include/c++/4.8/string:52:0,\n                 from /usr/include/c++/4.8/bits/locale_classes.h:40,\n                 from /usr/include/c++/4.8/bits/ios_base.h:41,\n                 from /usr/include/c++/4.8/ios:42,\n                 from /usr/include/c++/4.8/ostream:38,\n                 from /usr/include/c++/4.8/iostream:39,\n                 from sortArray1.cpp:1:\n/usr/include/c++/4.8/bits/basic_string.h:546:7: note: std::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp; std::basic_string&lt;_CharT, _Traits, _Alloc&gt;::operator=(const std::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp;) [with _CharT = char; _Traits = std::char_traits&lt;char&gt;; _Alloc = std::allocator&lt;char&gt;]\n       operator=(const basic_string&amp; __str)\n       ^\n/usr/include/c++/4.8/bits/basic_string.h:546:7: note:   no known conversion for argument 1 from 'void' to 'const std::basic_string&lt;char&gt;&amp;'\n/usr/include/c++/4.8/bits/basic_string.h:554:7: note: std::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp; std::basic_string&lt;_CharT, _Traits, _Alloc&gt;::operator=(const _CharT*) [with _CharT = char; _Traits = std::char_traits&lt;char&gt;; _Alloc = std::allocator&lt;char&gt;]\n       operator=(const _CharT* __s)\n       ^\n/usr/include/c++/4.8/bits/basic_string.h:554:7: note:   no known conversion for argument 1 from 'void' to 'const char*'\n/usr/include/c++/4.8/bits/basic_string.h:565:7: note: std::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp; std::basic_string&lt;_CharT, _Traits, _Alloc&gt;::operator=(_CharT) [with _CharT = char; _Traits = std::char_traits&lt;char&gt;; _Alloc = std::allocator&lt;char&gt;]\n       operator=(_CharT __c)\n       ^\n/usr/include/c++/4.8/bits/basic_string.h:565:7: note:   no known conversion for argument 1 from 'void' to 'char'\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1443650714, "post_id": 32876327, "comment_id": 53584091, "body": "while(!input.eof()) doesnt do what you think"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1443650860, "post_id": 32876327, "comment_id": 53584127, "body": "what did the debugger show you? Does you code go through that loop?"}, {"owner": {"reputation": 133, "user_id": 5055959, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-Zfe5me4MtgA/AAAAAAAAAAI/AAAAAAAAABE/GBv3zw6FpRI/photo.jpg?sz=128", "display_name": "YakSal Tafri", "link": "https://stackoverflow.com/users/5055959/yaksal-tafri"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1443650905, "post_id": 32876327, "comment_id": 53584144, "body": "@pm100 No bugs, the command prompt opens but doesn&#39;t show anything"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1443651100, "post_id": 32876327, "comment_id": 53584215, "body": "i asked what the debugger shows. You have a bug - the code doesnt do what you expect - thats a bug. Use the debugger to step through the program"}, {"owner": {"reputation": 133, "user_id": 5055959, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-Zfe5me4MtgA/AAAAAAAAAAI/AAAAAAAAABE/GBv3zw6FpRI/photo.jpg?sz=128", "display_name": "YakSal Tafri", "link": "https://stackoverflow.com/users/5055959/yaksal-tafri"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1443651288, "post_id": 32876327, "comment_id": 53584280, "body": "@pm100 &quot;Process terminated with status 0 (0 minute(s), 1 second(s)) 0 error(s), 0 warning(s) (0 minute(s), 1 second(s))&quot;"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1443651351, "post_id": 32876327, "comment_id": 53584296, "body": "you need to learn to use a debugger, what platform are you on?"}, {"owner": {"reputation": 133, "user_id": 5055959, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-Zfe5me4MtgA/AAAAAAAAAAI/AAAAAAAAABE/GBv3zw6FpRI/photo.jpg?sz=128", "display_name": "YakSal Tafri", "link": "https://stackoverflow.com/users/5055959/yaksal-tafri"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1443651392, "post_id": 32876327, "comment_id": 53584314, "body": "@pm100 I&#39;m using codeblocks"}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 5055959, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-Zfe5me4MtgA/AAAAAAAAAAI/AAAAAAAAABE/GBv3zw6FpRI/photo.jpg?sz=128", "display_name": "YakSal Tafri", "link": "https://stackoverflow.com/users/5055959/yaksal-tafri"}, "edited": false, "score": 0, "creation_date": 1443652148, "post_id": 32876438, "comment_id": 53584531, "body": "When I try to run this I get an error &quot;undefined reference to WinMain@16&quot; which I did not get previously"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 133, "user_id": 5055959, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-Zfe5me4MtgA/AAAAAAAAAAI/AAAAAAAAABE/GBv3zw6FpRI/photo.jpg?sz=128", "display_name": "YakSal Tafri", "link": "https://stackoverflow.com/users/5055959/yaksal-tafri"}, "edited": false, "score": 0, "creation_date": 1443656084, "post_id": 32876438, "comment_id": 53585626, "body": "@YakSalTafri If you mindlessly cut and pasted R Sahu&#39;s modification over top of your source you will no longer have a main function."}, {"owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "reply_to_user": {"reputation": 133, "user_id": 5055959, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-Zfe5me4MtgA/AAAAAAAAAAI/AAAAAAAAABE/GBv3zw6FpRI/photo.jpg?sz=128", "display_name": "YakSal Tafri", "link": "https://stackoverflow.com/users/5055959/yaksal-tafri"}, "edited": false, "score": 0, "creation_date": 1443660243, "post_id": 32876438, "comment_id": 53586578, "body": "@YakSalTafri - replace only your <code>tellen</code> function with R Sahu&#39;s <code>tellen</code> function."}, {"owner": {"reputation": 133, "user_id": 5055959, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-Zfe5me4MtgA/AAAAAAAAAAI/AAAAAAAAABE/GBv3zw6FpRI/photo.jpg?sz=128", "display_name": "YakSal Tafri", "link": "https://stackoverflow.com/users/5055959/yaksal-tafri"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1443719731, "post_id": 32876438, "comment_id": 53615897, "body": "@user4581301 Nice assumption on your part, I didn&#39;t mindlessly copy and paste it, I fidgeted with it before I asked."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 133, "user_id": 5055959, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-Zfe5me4MtgA/AAAAAAAAAAI/AAAAAAAAABE/GBv3zw6FpRI/photo.jpg?sz=128", "display_name": "YakSal Tafri", "link": "https://stackoverflow.com/users/5055959/yaksal-tafri"}, "edited": false, "score": 0, "creation_date": 1443720164, "post_id": 32876438, "comment_id": 53616096, "body": "@YakSalTafri I certainly could have worded that better. I apologize."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1443651098, "creation_date": 1443651098, "answer_id": 32876438, "question_id": 32876327, "link": "https://stackoverflow.com/questions/32876327/retrieving-all-numbers-from-a-certain-text-file/32876438#32876438", "title": "Retrieving all numbers from a certain text file", "body": "<p>Things to change:</p>\n\n<ol>\n<li><p>Add a check to make sure that the file was opened successfully.</p></li>\n<li><p>Use type <code>int</code> when reading characters using <code>istream::get()</code> instead of <code>char</code>.</p></li>\n<li><p>Change the <code>while</code> statement a bit.</p></li>\n</ol>\n\n\n\n<pre><code>void tellen (){\n    ifstream input;\n    ofstream output;\n\n    input.open (\"test\",ios::in);\n    if ( !input )\n    {\n       std::cerr &lt;&lt; \"Unable to open file.\\n\";\n       return;\n    }\n\n    int kar; // Don't use char.\n    while ( (kar = input.get()) != EOF  ){\n        if ( kar &gt;= '0' and kar &lt;= '9'){\n           cout.put(kar); // I prefer this.\n           // cout &lt;&lt; (char)kar;\n        }\n    }\n    //cout &lt;&lt; \"Aantal characters:\" &lt;&lt; aantalchar &lt;&lt; endl;\n    //cout &lt;&lt; \"Aantal regels:\" &lt;&lt; aantalregels &lt;&lt; endl;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "edited": false, "score": 0, "creation_date": 1443660037, "post_id": 32877697, "comment_id": 53586524, "body": "<code>input &gt;&gt; kar</code> will get larger integers than just a digit value (i.e, it will parse strings of digits and not get individual digits).  if the string of digits is large enough, it could do something unexpected.  its not the same result as <code>kar = input.get()</code>"}, {"owner": {"reputation": 106, "user_id": 4946382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e9a94216b36137f7c0884b859b8762f?s=128&d=identicon&r=PG&f=1", "display_name": "Santosderek", "link": "https://stackoverflow.com/users/4946382/santosderek"}, "reply_to_user": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "edited": false, "score": 0, "creation_date": 1443661198, "post_id": 32877697, "comment_id": 53586783, "body": "@Les I&#39;m so sorry! If you look back at the code I have edited it and it is now correct! I&#39;m sorry for the confusion!"}], "tags": [], "owner": {"reputation": 106, "user_id": 4946382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e9a94216b36137f7c0884b859b8762f?s=128&d=identicon&r=PG&f=1", "display_name": "Santosderek", "link": "https://stackoverflow.com/users/4946382/santosderek"}, "is_accepted": true, "score": 0, "last_activity_date": 1443661753, "last_edit_date": 1443661753, "creation_date": 1443659305, "answer_id": 32877697, "question_id": 32876327, "link": "https://stackoverflow.com/questions/32876327/retrieving-all-numbers-from-a-certain-text-file/32877697#32877697", "title": "Retrieving all numbers from a certain text file", "body": "<p>The following code will give you output of a txt file called test. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;cstdlib&gt;\n\nusing namespace std;\n\nvoid tellen() {\n    ifstream input;\n    ofstream output;\n\n    int kar;\n    char charKar;\n    input.open(\"test.txt\", ios::in);\n\n    // could replace \"test.txt\" with a variable such as filePath = \"/downloads/test.txt\"\n\n    if (input.is_open()) {\n        while (!input.eof()) {\n\n            kar = input.get(); //kar gets inputed as an ASCII\n            charKar = static_cast&lt;char&gt;(kar);//charKar converts the ASCII into a char variable\n\n\n\n            if (charKar &gt;= '0' &amp;&amp; charKar &lt;= '9'){ //Evaluate charKar, not kar\n\n                 cout &lt;&lt; charKar &lt;&lt; endl;\n\n            }\n\n\n\n        }\n\n        input.close();\n    }\n    else {\n        cout &lt;&lt; \"\\nFile Did Not Open!\";\n    }\n\n\n}\n\nint main() {\n\n    tellen();\n\n    return 0;\n} //main\n</code></pre>\n\n<p>I have tested the code and it works! Sorry if it's messy I was making eggs while coding this so if you have any questions just ask!</p>\n"}], "owner": {"reputation": 133, "user_id": 5055959, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-Zfe5me4MtgA/AAAAAAAAAAI/AAAAAAAAABE/GBv3zw6FpRI/photo.jpg?sz=128", "display_name": "YakSal Tafri", "link": "https://stackoverflow.com/users/5055959/yaksal-tafri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 32877697, "answer_count": 2, "score": 1, "last_activity_date": 1443661753, "creation_date": 1443650535, "last_edit_date": 1443660174, "question_id": 32876327, "link": "https://stackoverflow.com/questions/32876327/retrieving-all-numbers-from-a-certain-text-file", "title": "Retrieving all numbers from a certain text file", "body": "<p>I have the following program:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;cstdlib&gt;\n\nusing namespace std;\n\nvoid tellen ()\n{\n    ifstream input;\n    ofstream output;\n    char kar;\n    input.open (\"test\",ios::in);\n    kar = input.get();\n    while ( !input.eof() ){\n        if ( kar &gt;= '0' and kar &lt;= '9'){\n            cout &lt;&lt; kar;\n            kar = input.get();\n        }\n        else\n            kar = input.get();\n\n    }\n    //cout &lt;&lt; \"Aantal characters:\" &lt;&lt; aantalchar &lt;&lt; endl;\n    //cout &lt;&lt; \"Aantal regels:\" &lt;&lt; aantalregels &lt;&lt; endl;\n}\n\nint main()\n{\n    tellen();\n    return 0;\n} //main\n</code></pre>\n\n<p>What I intended this program to do is to show me all numbers in a certain text file (\"Test\" in this case) in the command window. I'm wondering why this doesn't work? I have a file called test but when I run this the command prompt gives me a blank. The problem persists when I change \"test\" to \"test.txt\". Does anyone have a clue what the problem is? Maybe it has to do with the location of the file?</p>\n"}, {"tags": ["c++", "vector", "deque"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1443649065, "post_id": 32875989, "comment_id": 53583404, "body": "Construct the vector from a pair of iterators?"}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 2, "creation_date": 1443649102, "post_id": 32875989, "comment_id": 53583416, "body": "If it&#39;s got only 15 elements, the vector won&#39;t be noticably slower than the deque. If you don&#39;t even <i>know</i> if it will be slow, then find out first, then ask question."}, {"owner": {"reputation": 2487, "user_id": 5380314, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8924d6d1c2470b1d7c8190dc37ef517c?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Nasonov", "link": "https://stackoverflow.com/users/5380314/andrey-nasonov"}, "edited": false, "score": 1, "creation_date": 1443649136, "post_id": 32875989, "comment_id": 53583436, "body": "My suggestion is to compute the size of the vector and to call <code>vector::reserve</code> to prevent container reallocation."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1443649445, "post_id": 32875989, "comment_id": 53583576, "body": "seems like a ring buffer problem to me."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1443650095, "post_id": 32875989, "comment_id": 53583842, "body": "So your last paragraph is unrelated to the question about appending deques to the end of vectors, right? Because it is kind of confusing."}], "answers": [{"tags": [], "owner": {"reputation": 97, "user_id": 5019077, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152774845152583/picture?type=large", "display_name": "Mercyful", "link": "https://stackoverflow.com/users/5019077/mercyful"}, "is_accepted": false, "score": 0, "last_activity_date": 1443649244, "creation_date": 1443649244, "answer_id": 32876072, "question_id": 32875989, "link": "https://stackoverflow.com/questions/32875989/fastest-way-to-add-a-deque-onto-the-end-of-a-vector/32876072#32876072", "title": "Fastest way to add a deque onto the end of a vector?", "body": "<p>You could do something like</p>\n\n<p>queue/vector myItem;</p>\n\n<pre><code>// Swap the position to the back, if it's first use 0 if you like\nmyItem[position].swap(myItem.back());\nmyItem.pop_back();\n</code></pre>\n\n<p>Then it's not reallocating the entire list when you remove from the front.</p>\n"}, {"tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": true, "score": 3, "last_activity_date": 1443654383, "creation_date": 1443654383, "answer_id": 32876944, "question_id": 32875989, "link": "https://stackoverflow.com/questions/32875989/fastest-way-to-add-a-deque-onto-the-end-of-a-vector/32876944#32876944", "title": "Fastest way to add a deque onto the end of a vector?", "body": "<blockquote>\n  <p>Fastest way to add a deque onto the end of a vector?</p>\n</blockquote>\n\n<p>Getting the size of the deque is possible in constant time (as for all STL containers), then reserve space in the vector to limit memory management overhead to a single allocation, finally move the elements out of the deque into the vector:</p>\n\n<pre><code>// std::vector v, std::deque d\nv.reserve(v.size() + d.size());\nstd::move(std::begin(d), std::end(d), std::back_inserter(v));\nd.clear(); // or reuse in some way\n</code></pre>\n\n<p>If you intend to append multiple containers to the vector, consider <code>reserve</code>ing the complete storage necessary at once.</p>\n\n<p>Watch for <code>std::bad_alloc</code> exceptions if the amount of data is huge. In that case using contiguous storage of a vector isn't ideal.</p>\n"}], "owner": {"reputation": 658, "user_id": 5244410, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/c2e125721f74672d38c5dcd66aaf5bb4?s=128&d=identicon&r=PG&f=1", "display_name": "wprins", "link": "https://stackoverflow.com/users/5244410/wprins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1461, "favorite_count": 0, "accepted_answer_id": 32876944, "answer_count": 2, "score": -2, "last_activity_date": 1443654383, "creation_date": 1443648763, "question_id": 32875989, "link": "https://stackoverflow.com/questions/32875989/fastest-way-to-add-a-deque-onto-the-end-of-a-vector", "title": "Fastest way to add a deque onto the end of a vector?", "body": "<p>This question is about speed.</p>\n\n<p>I am using a function in the openCV libraries (in FaceRecognizer class) which requires the input of a vector. I need to build this vector by combining several deque. Are there any faster ways other than iterating through the deque and pushing back each element to the vector? </p>\n\n<p><strong>Some info about the deque</strong>: it is a deque of 15 elements where I continuously push_back and if it has 16+ elements I pop_front. Order matters.</p>\n\n<p>Alternatively I could change the deque's to vectors if that might speed up everything, but from what I understand that will be slow when I delete the first element of the vector when it reaches size 16.</p>\n"}, {"tags": ["c++", "arrays", "memory-management", "memory-leaks", "heap-memory"], "comments": [{"owner": {"reputation": 2487, "user_id": 5380314, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8924d6d1c2470b1d7c8190dc37ef517c?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Nasonov", "link": "https://stackoverflow.com/users/5380314/andrey-nasonov"}, "edited": false, "score": 1, "creation_date": 1443648678, "post_id": 32875930, "comment_id": 53583250, "body": "3. Yes, the size of the allocated array is stored typically in the area before the pointer."}, {"owner": {"reputation": 2487, "user_id": 5380314, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8924d6d1c2470b1d7c8190dc37ef517c?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Nasonov", "link": "https://stackoverflow.com/users/5380314/andrey-nasonov"}, "edited": false, "score": 1, "creation_date": 1443648926, "post_id": 32875930, "comment_id": 53583359, "body": "Duplicate: <a href=\"http://stackoverflow.com/questions/1553382/is-delete-equal-to-delete\" title=\"is delete equal to delete\">stackoverflow.com/questions/1553382/is-delete-equal-to-delet&zwnj;&#8203;e</a>"}, {"owner": {"reputation": 20315, "user_id": 963881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e82a2a2b9ddf6fb580a9c34b2eca65f4?s=128&d=identicon&r=PG&f=1", "display_name": "syntagma", "link": "https://stackoverflow.com/users/963881/syntagma"}, "edited": false, "score": 0, "creation_date": 1443648947, "post_id": 32875930, "comment_id": 53583365, "body": "1. and 2. Yes, it&#39;s undefined behavior"}], "answers": [{"comments": [{"owner": {"reputation": 1402, "user_id": 3088216, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0069b50a6eb086f64e842fab5c558a6e?s=128&d=identicon&r=PG", "display_name": "rsht", "link": "https://stackoverflow.com/users/3088216/rsht"}, "edited": false, "score": 0, "creation_date": 1443649366, "post_id": 32876019, "comment_id": 53583541, "body": "That clarify a lot for me. Thanks!"}, {"owner": {"reputation": 7117, "user_id": 1245420, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c5a428623702851ce5f462822483fc6c?s=128&d=identicon&r=PG", "display_name": "phonetagger", "link": "https://stackoverflow.com/users/1245420/phonetagger"}, "edited": false, "score": 0, "creation_date": 1443650611, "post_id": 32876019, "comment_id": 53584050, "body": "<code>delete</code> and <code>delete[]</code> cannot possibly be &quot;implemented identically&quot;. For POD types, the effects of calling either may be indistinguishable, but for user-defined types that contain pointers to other allocations owned by the objects being deleted, there is a profound difference between calling <code>delete</code> and calling <code>delete[]</code>, even on systems where the effects of using them incorrectly on POD types is indistinguishable. The key issue is that <code>delete</code> will call the type&#39;s destructor only once, for the object at [0], while <code>delete[]</code> will call the destructor for each object in the array."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 7117, "user_id": 1245420, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c5a428623702851ce5f462822483fc6c?s=128&d=identicon&r=PG", "display_name": "phonetagger", "link": "https://stackoverflow.com/users/1245420/phonetagger"}, "edited": false, "score": 0, "creation_date": 1443652051, "post_id": 32876019, "comment_id": 53584507, "body": "@phonetagger: It certainly is possible for <code>delete</code> and <code>delete[]</code> to be implemented identically, if, for example, <code>new T</code> was implemented to have the same effect as <code>new T[1]</code>."}], "tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": true, "score": 12, "last_activity_date": 1443649367, "last_edit_date": 1443649367, "creation_date": 1443648979, "answer_id": 32876019, "question_id": 32875930, "link": "https://stackoverflow.com/questions/32875930/why-cant-i-delete-other-than-first-element-from-array-by-pointer/32876019#32876019", "title": "Why can&#39;t I delete other-than-first element from array by pointer", "body": "<blockquote>\n  <ol>\n  <li>Why <code>delete intArPtr</code> doesn't yield any memory leaks? Is it\n  undefined behavior and I'm just lucky no to have any?</li>\n  </ol>\n</blockquote>\n\n<p>Correct, it is undefined behavior to call <code>delete</code> on memory allocated with <code>new[]</code>. For one, it won't call the destructors on the array members.</p>\n\n<p>For two, even if you are just asking about memory deallocation and not about object destruction, it's possible for <code>delete</code> and <code>delete[]</code> to be implemented identically, or for them to be different. They read like they're the same thing but they're not: <code>delete</code> and <code>delete[]</code> are two different operators with potentially different implementations. They could use different allocation strategies (see the answer to question #3 below).</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Why <code>delete intArPtr1</code> gives an error on run-time? Why doesn't it delete all elements but first from the array?</li>\n  </ol>\n</blockquote>\n\n<p>You have to pass <code>delete</code> a pointer allocated with <code>new</code>. The exact pointer. Not a pointer within a <code>new</code>-allocated memory region, that doesn't work. It has to be the same pointer to the start of the region.</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>How does C++'s runtime knows size of the allocated array (for delete [])? Is it stored somewhere?</li>\n  </ol>\n</blockquote>\n\n<p>A common allocator strategy is to store the number of bytes allocated right before the allocated region. <code>delete</code> would then take the pointer you pass it, look 4 or 8 bytes to the left, and interpret that integer as the size of the region. If you pass it a pointer to somewhere else its lookback strategy will fail.</p>\n\n<p>The C++ language doesn't specify how memory allocation is tracked, so this is an implementation detail. Different standard libraries, compilers, and operating systems will do this differently. What I described is just one possible mechanism.</p>\n\n<p>Further reading:</p>\n\n<ul>\n<li>C++ FAQ: <a href=\"https://isocpp.org/wiki/faq/freestore-mgmt#delete-array\" rel=\"noreferrer\">\"What if I forget the <code>[]</code> when <code>delete</code>ing an array allocated via <code>new T[n]</code>?\"</a></li>\n<li>C++ FAQ: <a href=\"https://isocpp.org/wiki/faq/freestore-mgmt#num-elems-in-new-array\" rel=\"noreferrer\">\"After <code>p = new Fred[n]</code>, how does the compiler know there are <code>n</code> objects to be destructed during <code>delete[] p</code>?\"</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 2487, "user_id": 5380314, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8924d6d1c2470b1d7c8190dc37ef517c?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Nasonov", "link": "https://stackoverflow.com/users/5380314/andrey-nasonov"}, "edited": false, "score": 1, "creation_date": 1443649267, "post_id": 32876022, "comment_id": 53583490, "body": "1. It depends on implementation - undefined behavior."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": -2, "last_activity_date": 1443648997, "creation_date": 1443648997, "answer_id": 32876022, "question_id": 32875930, "link": "https://stackoverflow.com/questions/32875930/why-cant-i-delete-other-than-first-element-from-array-by-pointer/32876022#32876022", "title": "Why can&#39;t I delete other-than-first element from array by pointer", "body": "<p>Answers:</p>\n\n<ol>\n<li>No memory leaks in your exampe. As a matter of fact, deleting array without [] will only cause memory leaks if the objects inside arrays have some memory allocated themselves and are supposed to free that memory in the destructor. In all other cases, improper delete will not cause a memory leak.</li>\n<li>Because the size of memory allocated is stored just before the pointer. When you are accessing any other element of the array but the first, there is no proper memory size there.</li>\n<li>See 2.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 10487, "user_id": 840960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c79d55b76b6994dec3fb96bd1c7803bf?s=128&d=identicon&r=PG", "display_name": "Shlublu", "link": "https://stackoverflow.com/users/840960/shlublu"}, "is_accepted": false, "score": 0, "last_activity_date": 1443680763, "last_edit_date": 1443680763, "creation_date": 1443649206, "answer_id": 32876067, "question_id": 32875930, "link": "https://stackoverflow.com/questions/32875930/why-cant-i-delete-other-than-first-element-from-array-by-pointer/32876067#32876067", "title": "Why can&#39;t I delete other-than-first element from array by pointer", "body": "<ol>\n<li>Why delete intArPtr doesn't yield any memory leaks? Is it undefined behavior and I'm just lucky no to have any?</li>\n</ol>\n\n<p>Yes and no at the same time. Using <code>delete</code> instead of <code>delete[]</code> is not clean, but usually works. Basically the pointer and offset are both stored at allocation time. This allows a proper deallocation to occur when using <code>delete</code>, even by accident.</p>\n\n<ol start=\"2\">\n<li>Why delete intArPtr1 gives an error on run-time? Why doesn't it delete all elements but first from the array?</li>\n</ol>\n\n<p><code>intArPtr1</code> does not correspond to the pointer of the allocated area. When trying to <code>delete</code> that, the runtime cannot find this address in the allocation table.</p>\n\n<ol start=\"3\">\n<li>How does C++'s runtime knows size of the allocated array (for delete [])? Is it stored somewhere?</li>\n</ol>\n\n<p>It is stored in the allocation table, with the pointer to the allocated area.</p>\n"}], "owner": {"reputation": 1402, "user_id": 3088216, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0069b50a6eb086f64e842fab5c558a6e?s=128&d=identicon&r=PG", "display_name": "rsht", "link": "https://stackoverflow.com/users/3088216/rsht"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 1, "accepted_answer_id": 32876019, "answer_count": 3, "score": 4, "last_activity_date": 1443680763, "creation_date": 1443648486, "last_edit_date": 1443649534, "question_id": 32875930, "link": "https://stackoverflow.com/questions/32875930/why-cant-i-delete-other-than-first-element-from-array-by-pointer", "title": "Why can&#39;t I delete other-than-first element from array by pointer", "body": "<p>Consider following code:</p>\n\n<pre><code>int main()\n{\n  int *intArPtr = new int[100];\n  int *intArPtr1 = intArPtr + 1;\n\n  delete [] intArPtr; //ok\n  //delete intArPtr; //valgrind warning, but no leaks!\n  //delete intArPtr1; //invalid pointer error\n\n  return 0;\n}\n</code></pre>\n\n<p>I know that <code>delete [] intArPtr</code> is the only valid way to delete this array, but I'm just curious about following:</p>\n\n<ol>\n<li>Why <code>delete intArPtr</code> doesn't yield any memory leaks? Is it\nundefined behavior and I'm just lucky not to have any?</li>\n<li>Why <code>delete intArPtr1</code> gives an error on run-time? Why doesn't it delete all elements but first from the array?</li>\n<li>How does C++'s runtime knows size of the allocated array (for delete [])? Is it stored somewhere?</li>\n</ol>\n"}, {"tags": ["java", "c++"], "answers": [{"tags": [], "owner": {"reputation": 2260, "user_id": 3434874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KemED.jpg?s=128&g=1", "display_name": "Blake Yarbrough", "link": "https://stackoverflow.com/users/3434874/blake-yarbrough"}, "is_accepted": false, "score": 1, "last_activity_date": 1443648269, "creation_date": 1443648269, "answer_id": 32875882, "question_id": 32875849, "link": "https://stackoverflow.com/questions/32875849/using-the-razer-chroma-sdk-from-java/32875882#32875882", "title": "Using the Razer Chroma SDK from Java", "body": "<p>You probably want to look into using <a href=\"http://thebreakfastpost.com/2012/01/21/wrapping-a-c-library-with-jni-introduction/\" rel=\"nofollow\">JNI</a></p>\n"}, {"tags": [], "owner": {"reputation": 1079, "user_id": 3980985, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/420d11e24da591e6af471495d6eac9b0?s=128&d=identicon&r=PG", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3980985/keith-m"}, "is_accepted": true, "score": 0, "last_activity_date": 1444673703, "last_edit_date": 1495540287, "creation_date": 1444673703, "answer_id": 33087637, "question_id": 32875849, "link": "https://stackoverflow.com/questions/32875849/using-the-razer-chroma-sdk-from-java/33087637#33087637", "title": "Using the Razer Chroma SDK from Java", "body": "<p>The easiest way I found, and then one that doesn't require learning stuff like JNI:</p>\n\n<ol>\n<li>Create a console application with commands that fire off what you need</li>\n<li>In Java, launch the console application and redirect it's input and output streams so you can send it commands, and log it's output (see <a href=\"https://stackoverflow.com/a/12013910/3980985\">12013910</a>)</li>\n<li>Have a command in the console application that you can pass a PID, and have the console application watch for when it closes, and then it will close itself. (This fixes having the console application not being closed if the Java application crashes and doesn't call the closing method(s))</li>\n</ol>\n"}], "owner": {"reputation": 1079, "user_id": 3980985, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/420d11e24da591e6af471495d6eac9b0?s=128&d=identicon&r=PG", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3980985/keith-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 712, "favorite_count": 0, "closed_date": 1444776740, "accepted_answer_id": 33087637, "answer_count": 2, "score": -1, "last_activity_date": 1444673844, "creation_date": 1443648093, "last_edit_date": 1444673844, "question_id": 32875849, "link": "https://stackoverflow.com/questions/32875849/using-the-razer-chroma-sdk-from-java", "closed_reason": "Duplicate", "title": "Using the Razer Chroma SDK from Java", "body": "<p>I want to make a Java app that uses the Razer Chroma SDK, but the Chroma SDK is in c++</p>\n\n<p>Is there a way I can run c++ code from Java? </p>\n\n<p>I must use Java for what I want to make.</p>\n\n<p>I have almost no experience in c++, but I understand enough to get doing what I need. </p>\n\n<p><strong>EDIT:</strong> </p>\n\n<p>This question is slightly different then others, because it is about a specific SDK, not about general c++ libraries. For this library I was able to use a simpler approach then learning to use things like JNI</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1443648088, "post_id": 32875798, "comment_id": 53583014, "body": "The Compiler claims correctly, you didn&#39;t specify a compile time available size for your array here: <code>int new_ints[];</code>. You rather want to use a <code>std::vector&lt;int&gt;</code> instead."}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 0, "creation_date": 1443648716, "post_id": 32875798, "comment_id": 53583266, "body": "Use <code>std::vector</code> and <code>std::remove</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1443648808, "post_id": 32875798, "comment_id": 53583309, "body": "You can&#39;t use an array as tha target of an assignment -- <code>new_ints = ...</code> is not valid."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1443648881, "post_id": 32875798, "comment_id": 53583343, "body": "And there&#39;s no reason for <code>stripList</code> to return the array, since it updates the array in place."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1443648908, "post_id": 32875798, "comment_id": 53583353, "body": "Inside the <code>stripList</code> function, <code>valid_ints</code> is a pointer, not an array. So <code>sizeof(valid_ints)</code> is the size of a pointer, not the number of elements in the array."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1443648969, "post_id": 32875851, "comment_id": 53583373, "body": "He also needs to pass the size of the array to <code>stripList</code>, because <code>sizeof(valid_ints)</code> will be <code>sizeof(int*)</code>."}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 1, "last_activity_date": 1443648886, "last_edit_date": 1443648886, "creation_date": 1443648097, "answer_id": 32875851, "question_id": 32875798, "link": "https://stackoverflow.com/questions/32875798/remove-and-shift-array-c/32875851#32875851", "title": "Remove and shift array c++", "body": "<p>In <code>c++</code> size of an <code>array</code> must be known at compile time. Ie <code>int new_ints[]</code> is illegal. You will need to have a defined size ie <code>new_ints[10]</code>. (See <a href=\"http://en.cppreference.com/w/cpp/language/array\" rel=\"nofollow\">here</a> for more details) Or better yet, utilize the fantastic advantages of <code>c++</code> and use a <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow\"><code>std::vector</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 854, "user_id": 5007618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dqUU0.jpg?s=128&g=1", "display_name": "Patrick Yu", "link": "https://stackoverflow.com/users/5007618/patrick-yu"}, "is_accepted": true, "score": 1, "last_activity_date": 1443654318, "creation_date": 1443654318, "answer_id": 32876936, "question_id": 32875798, "link": "https://stackoverflow.com/questions/32875798/remove-and-shift-array-c/32876936#32876936", "title": "Remove and shift array c++", "body": "<p>Like what Ben said, it is highly recommended to use an vector if you would like to resize your array to fit in new elements.</p>\n\n<p><a href=\"http://www.cplusplus.com/reference/vector/vector/vector/\" rel=\"nofollow\">http://www.cplusplus.com/reference/vector/vector/vector/</a></p>\n\n<p>Here's my example: (note alternatively you can use vector::erase to erase undesired elements)</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nint main()\n{\n  vector&lt;int&gt; valid_ints;\n  vector&lt;int&gt; new_ints;\n\n  int tmp = 2;\n\n  //read in elements\n  for(int i = 1; i &lt;= 9; i++)\n  {\n    valid_ints.push_back(i);\n  }\n  //valid_ints will hold {1,2,3,4,5,6,7,8,9}\n\n  for(int i = 0; i &lt; valid_ints.size(); i++)\n  {\n    //We will add an element to new_ints from valid_ints everytime the valid_ints[i] is NOT tmp. (or 2.)\n     if(valid_ints[i] != tmp)\n     {\n\n       new_ints.push_back(valid_ints[i]);\n     }\n  }\n\n  //Print out the new ints\n  for(int i = 0; i &lt; new_ints.size(); i++)\n  {\n    cout &lt;&lt; new_ints[i] &lt;&lt; ' ';\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>The resulting vector will be filled in this order:</p>\n\n<p>{1}</p>\n\n<p>{1,3} (skip 2!)</p>\n\n<p>{1,3,4}</p>\n\n<p>{1,3,4,5}</p>\n\n<p>so on... until</p>\n\n<p>{1,3,4,5,6,7,8,9}</p>\n\n<p><strong>So, the output would be:</strong></p>\n\n<p>1 3 4 5 6 7 8 9</p>\n"}], "owner": {"reputation": 3, "user_id": 4522533, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/49ec29939d48e048c9df0d6ce7161753?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Jack", "link": "https://stackoverflow.com/users/4522533/bob-jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 32876936, "answer_count": 2, "score": -3, "last_activity_date": 1443654318, "creation_date": 1443647856, "question_id": 32875798, "link": "https://stackoverflow.com/questions/32875798/remove-and-shift-array-c", "title": "Remove and shift array c++", "body": "<p>I want to locate a specific item from an array and then shift the array to remove that item. I have a list of integers {1, 2, 3, 4, 5, 6, 7, 8, 9} and want to remove the integer 2.</p>\n\n<p>Currently I am getting an error: storage size of \u2018new_ints\u2019 isn\u2019t known on the line:</p>\n\n<pre><code>int new_ints[];\n</code></pre>\n\n<p>Not sure what this means or how can I fix this?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>int main() {\n\n  int tmp = 2;\n  int valid_ints[] = {1, 2, 3, 4, 5, 6, 7, 8, 9};\n\n  int new_ints[];\n  new_ints = stripList(tmp, valid_ints);\n\n  for (int i = 0; i &lt; sizeof(new_ints); i++)\n    cout &lt;&lt; new_ints[i] &lt;&lt; endl;\n\n  return 0;\n}\n\n\nint *stripList (int tmp, int valid_ints[]){\n\n  for (int i = 0; i &lt; sizeof(valid_ints); i++){\n    for (int j = tmp; j &lt; sizeof(valid_ints); j++){\n      valid_ints[j] = valid_ints[j+1];\n    }\n  }\n  return valid_ints;\n}\n</code></pre>\n"}, {"tags": ["c++", "arduino", "arduino-uno"], "answers": [{"tags": [], "owner": {"reputation": 45, "user_id": 4047911, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/540719020/picture?type=large", "display_name": "Michael Doughty", "link": "https://stackoverflow.com/users/4047911/michael-doughty"}, "is_accepted": false, "score": 0, "last_activity_date": 1443647703, "creation_date": 1443647703, "answer_id": 32875764, "question_id": 32875763, "link": "https://stackoverflow.com/questions/32875763/pjrc-encoder-object-as-property-of-another-object/32875764#32875764", "title": "PJRC Encoder Object as Property of Another Object", "body": "<p>The key was, in-fact, to initialize the encoder within the Pump object, as I've been reading on the Arduino boards posted by people some variant of my issue.</p>\n\n<p>I constructed the encoder within the property declarations of 'Pump.h'. Since the <a href=\"https://www.sparkfun.com/products/12757\" rel=\"nofollow\">RedBoard</a> I'm working with is an Arduino Uno, in essence, the only acceptable pins are 2 and 3 for interrupts. I declared the encoder with the following line under the class's list of private properties:</p>\n\n<pre><code>Encoder encoder = Encoder(2,3);     //  attached encoder\n</code></pre>\n\n<p>And it now works flawlessly. There is likely an option to pass the encoder pins to the Pump constructor and have it be flexible, but for the time being I need something that works more than I need something perfect.</p>\n"}], "owner": {"reputation": 45, "user_id": 4047911, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/540719020/picture?type=large", "display_name": "Michael Doughty", "link": "https://stackoverflow.com/users/4047911/michael-doughty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443647703, "creation_date": 1443647703, "question_id": 32875763, "link": "https://stackoverflow.com/questions/32875763/pjrc-encoder-object-as-property-of-another-object", "title": "PJRC Encoder Object as Property of Another Object", "body": "<p>I'm borrowing <a href=\"http://www.pjrc.com/teensy/td_libs_Encoder.html\" rel=\"nofollow\">PJRC's Encoder library</a> to manage a stepper-powered syringe pump I am running off a <a href=\"https://www.sparkfun.com/products/12757\" rel=\"nofollow\">Sparkfun RedBoard</a> and a <a href=\"https://www.sparkfun.com/products/12859\" rel=\"nofollow\">BigEasy Driver</a>.</p>\n\n<p>I've been developing the program modularly, defining lower-level classes first and working up from there. It is my <em>desire</em> that higher-level classes take instances of lower classes as properties. In my current nightmare, I'm building a syringe Pump class with Stepper motor and Encoder objects as properties.</p>\n\n<p>I'm organizing the library into a header file and '.cpp' file as recommended by the Arduino Tutorials. The Pump class is declared as follows in 'Pump.h':</p>\n\n<pre><code>#include \"Arduino.h\"\n#include \"Stepper.h\"\n#include \"Encoder.h\"\n\n#define PUMP_TOP_SPEED 50   // ml/min               top pump speed\n#define PUMP_ERROR 10       // encoder counts       acceptable error\n\nclass Pump {\n\n    private:\n\n        Stepper motor;          // object       stepper motor\n        Encoder encoder;        // object       attached encoder\n        int countPerRev;        // #            encoder counts per relovlution\n        float nominalVolume;    // mL           nominal syringe volume\n        float innerDiameter;    // cm           syringe inner diameter\n        float shaftLead;        // cm           driveshaft threading lead distance\n        float degVolume;        // mL           effective volume change per degree of rotation\n        bool state;             // boolean      T = ready, F = slept\n\n    public:\n\n        // constructor\n        Pump(const Stepper&amp; stp, const Encoder&amp; enc, int cpr, float vol, float diam, float lead);\n\n        float volume();                         // returns nominalVolume\n        float position();                       // returns current pump position in mL\n        void hold();                            // high power state to resist back-pressure\n        void relax();                           // low power state\n        void pump(float vol, float rate);       // pumps the requested volume at requested rate\n        void release();                         // moves the plunger all the way out so syringe can be serviced\n        void set();                             // returns plunger to zero mL\n};\n</code></pre>\n\n<p>The relevant code in 'Pump.cpp' file which I have been testing with is the constructor and the definition of the <code>pump()</code> method, which goes like so:</p>\n\n<pre><code>// constructor\nPump::Pump(const Stepper&amp; stp, const Encoder&amp; enc, int cpr, float vol, float diam, float lead) : motor(stp), encoder(enc), countPerRev(cpr), nominalVolume(vol), innerDiameter(diam), shaftLead(lead) {\n\n    // calculate volume per degree\n    // (diameter^2 / 4) * PI * (lead / 360) = mL / deg\n    // diam * diam * lead * PI / 360 / 4 = (diam diam lead PI) / 1440\n    degVolume = innerDiameter * innerDiameter * shaftLead * PI / 1440;\n\n    // construct the encoder inside here\n    /*encoder = new(Encoder(2,3));\n\n    // set it to 0\n    encoder.write(0);*/\n}\n\n// pumping function\nvoid Pump::pump(float vol, float rate) {\n\n    /*\n        vol &lt; 0         INFUSE\n        vol &gt; 0         WITHDRAW\n    */\n\n    if (rate &gt; PUMP_TOP_SPEED) rate = PUMP_TOP_SPEED; // limit rate\n\n    if (!state) hold(); // wake up the motor if it's asleep\n\n    // make sure this doesn't push outside of the acceptable range\n    if (position() + vol &lt;= nominalVolume &amp;&amp; position() + vol &gt;= 0) {\n\n        // (mL) / (mL/deg) = deg\n        float degrees = vol / degVolume; // find number of degrees to turn the motor\n        Serial.print(\"Looking to turn \");\n        Serial.print(degrees, DEC);\n        Serial.print(\" degrees at \");\n\n        // (count) + (deg) * (count/rev) / (deg/rev) = count\n        long goal = encoder.read() + degrees * countPerRev / 360; // set target encoder reading\n\n        // (mL/min) / (mL/deg) / (deg/rev) = RPM\n        int rpm = abs(rate) / degVolume / 360; // find RPM to turn the motor\n        Serial.print(rpm, DEC);\n        Serial.println(\" RPM in full-stepping mode\");\n        Serial.print(\"Going from encoder count \");\n        Serial.print(encoder.read(), DEC);\n        Serial.print(\" to \");\n        Serial.println(goal, DEC);\n\n        motor.drive(degrees, 1, rpm); // drive the pump\n\n        int err = goal - encoder.read(); // how far from the goal are we in counts?\n        Serial.print(\"Reached encoder count \");\n        Serial.println(encoder.read(), DEC);\n        Serial.print(\"Missed by \");\n        Serial.println(err, DEC);\n\n    }\n}\n</code></pre>\n\n<p>I've been testing my <code>pump()</code> method and threw in a whole bunch of <code>Serial.print()</code> to try to debug and figure out what is happening and from what I can see, the Encoder object that is a <strong>property of the Pump object</strong> doesn't have its position updated as the shaft turns, whereas the Encoder object <strong>declared in the Arduino sketch</strong> and passed to the Pump constructor does.</p>\n\n<p>As you can see above I've tried to initialize the encoder within the pump constructor but the 2 or 3 things I tried all threw a bunch of cryptic errors in the Arduino IDE when I tried to compile, left that commented out section so you can see what I was trying.</p>\n\n<p>What I find exceedingly annoying is that while my own Stepper object works fine, the Pump object can turn the motor, the Encoder object won't function inside the Pump object. When I run the sketch:</p>\n\n<pre><code>#include &lt;Stepper.h&gt;\n#include &lt;Encoder.h&gt;\n#include &lt;Pump.h&gt;\n\n// initialize stepper\nStepper motor(4, 5, 6, 7, 8, 9, 10, 11);\n\n// initialize encoder\nEncoder encoder(2, 3);\n\n// initialize the pump\nPump pump(motor, encoder, 1440, 25, 2.328, 0.1);\n\nvoid setup() {\n  // start the Serial connection\n  Serial.begin(9600);\n\n  // set up the motor\n  motor.enable();\n  motor.reset();\n\n  // pump\n  pump.pump(0.25,25);\n\n  Serial.print(\"Pump reading:       \");\n  Serial.println(pump.position(), DEC);\n  Serial.print(\"Encoder reading:    \");\n  Serial.println(encoder.read(), DEC);\n\n  // cool boards\n  pump.relax();\n\n}\n\nvoid loop() {}\n</code></pre>\n\n<p>I get back the following in the Serial monitor:</p>\n\n<pre><code>Looking to turn 211.4397277832 degrees at 58 RPM in full-stepping mode\nGoing from encoder count 0 to 845\nReached encoder count 0\nMissed by 845\nPump reading:       0.0000000000\nEncoder reading:    845\n</code></pre>\n\n<p>So, the method <code>encoder.read()</code> always returns zero in the Pump object but when I called it at the end of my sketch in the <code>setup()</code> function it turns I turned exactly as far as I wanted to.</p>\n\n<p>Thank you for reading. I'd appreciate guidance on how to either properly pass an active Encoder object to Pump, or how to properly initialize an Encoder object within Pump without freaking out the compiler.</p>\n"}, {"tags": ["c#", "c++", "visual-studio-2010", "openmp"], "comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 1, "creation_date": 1443649929, "post_id": 32875759, "comment_id": 53583783, "body": "it&#39;s not a good idea to do file io in the inner loop"}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1443687595, "post_id": 32875759, "comment_id": 53595760, "body": "You can&#39;t parallelize <code>a[0][j]=a[0][j-1]-1</code> the way you have done it. If I understand it correctly you can rewrite it as <code>a[0][j] = a[0][0]-j</code> which will parallelize fine. For example for <code>a[] = {9,3,4,5}</code> before after the loop it&#39;s <code>{9,8,7,6}</code>."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 2, "creation_date": 1443688066, "post_id": 32875759, "comment_id": 53595970, "body": "Your code has other problems as well. In your function <code>alignment</code> you write to <code>a</code> which is shared by each thread.  This is going to cause a race condition. Not only that but how you write to it has dependencies on previous iterations on <code>i</code> and <code>j</code>. You need to remove the dependencies or maybe use something like a prefix sum if possible."}, {"owner": {"reputation": 23217, "user_id": 265519, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/96a7c4cd4722d28b4bbb35be34a756e1?s=128&d=identicon&r=PG&f=1", "display_name": "edgarmtze", "link": "https://stackoverflow.com/users/265519/edgarmtze"}, "edited": false, "score": 0, "creation_date": 1443887576, "post_id": 32875759, "comment_id": 53675400, "body": "So what would be a better aproach?"}], "answers": [{"comments": [{"owner": {"reputation": 23217, "user_id": 265519, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/96a7c4cd4722d28b4bbb35be34a756e1?s=128&d=identicon&r=PG&f=1", "display_name": "edgarmtze", "link": "https://stackoverflow.com/users/265519/edgarmtze"}, "edited": false, "score": 0, "creation_date": 1444375288, "post_id": 33029526, "comment_id": 53886289, "body": "If you can test the program to reduce its execution time, the bounty is yours"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "reply_to_user": {"reputation": 23217, "user_id": 265519, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/96a7c4cd4722d28b4bbb35be34a756e1?s=128&d=identicon&r=PG&f=1", "display_name": "edgarmtze", "link": "https://stackoverflow.com/users/265519/edgarmtze"}, "edited": false, "score": 1, "creation_date": 1444435481, "post_id": 33029526, "comment_id": 53918434, "body": "@cMinor I&#39;ll check that this weekend, I didn&#39;t have time to yesterday."}, {"owner": {"reputation": 23217, "user_id": 265519, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/96a7c4cd4722d28b4bbb35be34a756e1?s=128&d=identicon&r=PG&f=1", "display_name": "edgarmtze", "link": "https://stackoverflow.com/users/265519/edgarmtze"}, "edited": false, "score": 0, "creation_date": 1444534870, "post_id": 33029526, "comment_id": 53942129, "body": "Nice way to improve <code>aligment</code>,however, Do you think there could be a better way to speed up the main function, specially the part where aligment is called? <code>for(i=0;i&lt;=tlen-slen+k ;i++) \t\t\t{ \t\t\t\talignment(a,s,t.substr(i,slen+k),k);  \t\t\t\tfor(j=max(0,slen-k);j&lt;=min(slen+k,tlen-i);j++) \t\t\t\t{ ....</code>  I am testing program with this file, Could you please tell How much time it takes to complete in your Computer?<a href=\"https://www.dropbox.com/s/vb9wjho6mp8lvgf/test_k.txt?dl=0\" rel=\"nofollow noreferrer\">dropbox.com/s/vb9wjho6mp8lvgf/test_k.txt?dl=0</a>  . And finally Does VS 2015 improves the code that much?, why?"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "reply_to_user": {"reputation": 23217, "user_id": 265519, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/96a7c4cd4722d28b4bbb35be34a756e1?s=128&d=identicon&r=PG&f=1", "display_name": "edgarmtze", "link": "https://stackoverflow.com/users/265519/edgarmtze"}, "edited": false, "score": 0, "creation_date": 1444536874, "post_id": 33029526, "comment_id": 53942422, "body": "@cMinor VS2010, 94 seconds.  VS2015, 67 seconds.  5318 matches.  Looking at the disassembly of both compilers, it looks like VS2015 does a better job with instruction scheduling, although the instruction choices are slightly different as well.  For the main function, you can assign the <code>min</code> that <code>j</code> is being compared with to a local variable, and change <code>a[slen][j]</code> to be a pointer or iterator like I did in <code>alignment</code>.  This won&#39;t have much of an effect, though, since most of the time is spent in <code>alignment</code>."}, {"owner": {"reputation": 23217, "user_id": 265519, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/96a7c4cd4722d28b4bbb35be34a756e1?s=128&d=identicon&r=PG&f=1", "display_name": "edgarmtze", "link": "https://stackoverflow.com/users/265519/edgarmtze"}, "edited": false, "score": 0, "creation_date": 1444537636, "post_id": 33029526, "comment_id": 53942538, "body": "Ok, could you please share all code (main and aligment function) you used so I can award you the bounty ?"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "reply_to_user": {"reputation": 23217, "user_id": 265519, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/96a7c4cd4722d28b4bbb35be34a756e1?s=128&d=identicon&r=PG&f=1", "display_name": "edgarmtze", "link": "https://stackoverflow.com/users/265519/edgarmtze"}, "edited": false, "score": 0, "creation_date": 1444540755, "post_id": 33029526, "comment_id": 53943019, "body": "@cMinor Code for main added in another edit to my answer."}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": true, "score": 1, "last_activity_date": 1444540729, "last_edit_date": 1444540729, "creation_date": 1444361938, "answer_id": 33029526, "question_id": 32875759, "link": "https://stackoverflow.com/questions/32875759/optimize-or-propose-c-c-code-using-omp-to-find-all-similar-k-motifs/33029526#33029526", "title": "Optimize or propose c++, c# code using omp to find all similar k motifs", "body": "<p>As mentioned in a comment to your post, in order to parallelize calls to <code>alignment</code>, each thread needs to have its own copy of <code>a</code>.  You can do this with the <code>firstprivate</code> OpenMP clause:</p>\n\n<pre><code>#pragma omp parallel for firstprivate(a)\n</code></pre>\n\n<p>In <code>alignment</code> itself you repeat calculations in your loops that the optimizer might not be eliminating.  The calls to <code>a.size</code> and using <code>min</code> in the conditions of your loops could be computed once and stored in a local variable.  Constantly calculating <code>a[i]</code> and <code>a[i-1]</code> can also be lifted out of the inner loop.</p>\n\n<pre><code>int asize = int(a.size());\nfor(i = 1; i &lt; asize; i++) {\n    int jend = min(ylen, i + k);\n    vi &amp;cura = a[i];\n    vi &amp;preva = a[i-1];\n    for(j = max(1, i - k);j &lt;= jend; j++)\n        cura[j] = max(x[i-1] == y[j-1]?preva[j-1] : (preva[j-1]-1), max(preva[j]-1,cura[j-1]-1));\n}\n</code></pre>\n\n<p>The Windows headers define <code>max</code> and <code>min</code> macros.  If you're using those (and not the inline functions in the STL) that could also repeat code unnecessarily.</p>\n\n<p>Another bottleneck could be the output of matches, depending on how frequently a match is found.  One way to improve this is to store the <code>i-1,j</code> pairs into a new local variable (also include it in the <code>private</code> clause), then use a <code>reduction</code> clause to combine the results (although I'm not sure how that works with containers).  Once you're done with your for loop you can output the results, possibly sorting them first.</p>\n\n<p>Trying to parallelize the <code>j</code> loop that initializes <code>a[0]</code> is probably not worthwhile.  The code needs fixed to get that to work (also mentioned in a comment), and the multiple threads could cause it to run slower if the overhead starting the threads is too much, or if there is cache line contention among threads if multiple threads try to write to nearly adjacent values in memory.  If the sample <code>s</code> in your code is typical I'd just run this on one thread.</p>\n\n<p>When you construct your <code>a</code> vector, you can include the <code>-999</code> initial value in the constructor if the contained vector:</p>\n\n<pre><code>vector&lt;vi&gt; a(slen + 1, vi(slen + k + 1, -999));\n</code></pre>\n\n<p>then the initialization loop right below it would just have to set the value of the first element in each contained vector.</p>\n\n<p>That should do for a start.  Note:  Code samples are suggestions, and have not been compiled or tested.</p>\n\n<p><strong>EDIT</strong> I've worked thru this, and the results are not what you are hoping for.</p>\n\n<p>Initially I just ran your code (to get my baseline performance numbers).  Using VC2010, maximum optimization, 64 bit compile.</p>\n\n<pre><code>cl /nologo /W4 /MD /EHsc /Ox /favor:INTEL64 sequencing.cpp\n</code></pre>\n\n<p>Since I don't have your data files, I randomly generated a <code>t</code> of 50,000 [AGCT] characters, <code>s</code> of 5,000, and used a <code>k</code> of 50.  This took <strong>135 seconds</strong> with no hits output.  When I set <code>t</code> to be <code>s</code> plus 45,000 random characters, I got a lot of hits with no noticeable impact on the execution time.</p>\n\n<p>I got this working with omp (using <code>firstprivate</code> instead of <code>private</code> to get the initial value of <code>a</code> copied in) and it crashed.  Looking in to that I realized that calls to <code>alignment</code> <strong>depend on the result of the previous call</strong>.  So this cannot be executed on multiple cores.</p>\n\n<p>I did rewrite <code>alignment</code> to remove all the redundant computations and got a reduction of around 25% in the execution time (to <strong>103 seconds</strong>):</p>\n\n<pre><code>void alignment(vector&lt;vi&gt;&amp;a, const string &amp;x, const string y, int k){\n    string tx,ty;\n    int i,j;\n    int ylen=int(a[0].size());\n    int asize = int(a.size());\n    for(i = 1; i &lt; asize; i++) {\n        auto xi = x[i - 1];\n        int jend = min(ylen, i + k);\n        vi &amp;cura = a[i];\n        const vi &amp;preva = a[i-1];\n        j = max(1, i - k);\n        auto caj = cura[j - 1];\n        const auto *yp = &amp;y[j - 1];\n        auto *pca = &amp;cura[j];\n        auto *ppj = &amp;preva[j - 1];\n        for(;j &lt;= jend; j++) {\n            caj = *pca = max(*ppj - (xi != *yp), max(ppj[1] - 1, caj - 1));\n            ++yp;\n            ++pca;\n            ++ppj;\n        }\n    }\n}\n</code></pre>\n\n<p>The last thing I did was compile this using VS2015.  This reduced the execution time another 28% to around <strong>74 seconds</strong>.</p>\n\n<p>Similar tweaks and adjustments can be made in <code>main</code>, but with no observable effect on performance as a majority of time is spent in <code>alignment</code>.</p>\n\n<p>Execution times using a 32 bit binary are similar.</p>\n\n<p>It did occur to me that since <code>alignment</code> works with a lot of data, it <em>might</em> be possible to run this on two (or more) threads, and overlap the area the threads work with (so that the second thread is only accessing elements of the first thread's results once they are computed, but before the first thread has completed working with the entire array.  However, that would require creating your own thread and some very careful synchronization between the thread to ensure the right data is available in the right place.  I didn't try to make this work.</p>\n\n<p><strong>EDIT 2</strong> The source for an optimized version of main:</p>\n\n<pre><code>int main()\n{\n//  int k = 50;\n//  string s = \"AATTAGCTAAGGTGTACGATGTCCCATTGTGTAAGATTAGGAACTCCATTTAGGTTACCTCCGTCTTAAGTGATGGACCGTGGGTAGCTGCGTCCGATGGACTCATGCAGCGCCCGGATACCTGCAGTATTTATTATATAGGTCTGCGCACCAAACGATTTCTTTCGTGGTCGGGATTCCGGGGTCCTCCGCTATTCAGAGAGCTAAATA\";\n//  string t = \"ACAATGCAGCAATCCAGCGCCGGAATTTAAGAATAGGTCAGTTTGTAAGGCACTGTTCCCGTTATTCGTAATGCAGTATTAACGTTAATGCTCGAGACCATATTGGACGTCAGTATGCAGACCTGTGCTAGGGTGGTCTATTTCAAGATCACCGAGCTAGGCGCGTGAGCTAACAGGCCGTAATGGTGGCGCCCGCTCCCATAATCACTTCACGAAGCATTAGGTAGACTACCATTTAGGAAGCCCTCTCGCCCGCGTACTGGTTACAGCCCACTACAATGGATACTCCTTACTTCGGTGCAGGCAAGACTTCTACAAAGAAGCGTCCAAGAAGTTGTCGTAGCTCGTTCTTACCCCACCTGTATAAAATTGATCCAGTCGTACATATGACGATGCTGAGCCTCGGACTGGTAAATACAAGTCAAAGGACCAACCCATTACAGTATGAACTACCGGTGG\";\n    time_t start = time(NULL);\n    std::ofstream out(\"output.txt\");\n    ifstream someStream( \"data.txt\" );\n    string line;\n    getline( someStream, line );    int k = atoi(line.c_str() );\n    getline( someStream, line );    string s =line;\n    getline( someStream, line );    string t= line;\n    int slen=int(s.length()), tlen=int(t.length());\n\n    int i,j;\n    vector&lt;vi&gt; a(slen + 1, vi(slen + k + 1, -999));\n    a[0][0]=0;\n    for(i=1;i&lt;=slen;i++)\n        a[i][0]=-i;\n\n    {\n        int ej=int(a[0].size());\n        for(j=1;j&lt;ej;j++)\n            a[0][j] = -j;\n    }\n    //cout &lt;&lt; \"init\";\n    time_t endINIT = time(NULL);\n    cout&lt;&lt;\"Execution Init Time: \"&lt;&lt; (double)(endINIT-start)&lt;&lt;\" Seconds\"&lt;&lt;std::endl;\n\n    {\n        int endi=tlen-slen+k;\n        for(i=0;i&lt;=endi;i++)\n        {\n            alignment(a,s,t.substr(i,slen+k),k);\n            int ej=min(slen+k,tlen-i);\n            j=max(0,slen-k);\n            const auto *aj = &amp;a[slen][j];\n            for(;j&lt;=ej;j++,++aj)\n            {\n                if(*aj&gt;=-k)\n                {\n                    //cout&lt;&lt;(i+1)&lt;&lt;' '&lt;&lt;j&lt;&lt;endl;\n                    out &lt;&lt;(i+1)&lt;&lt;' '&lt;&lt;j&lt;&lt;endl;\n                }\n            }\n        }\n    }\n    time_t end = time(NULL);\n    cout&lt;&lt;\"Execution Time: \"&lt;&lt; (double)(end-start)&lt;&lt;\" Seconds\"&lt;&lt;std::endl;  \n    out.close();\n    return 0;\n}\n</code></pre>\n\n<p>The code for <code>alignment</code> is unchanged from what I listed above.</p>\n"}], "owner": {"reputation": 23217, "user_id": 265519, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/96a7c4cd4722d28b4bbb35be34a756e1?s=128&d=identicon&r=PG&f=1", "display_name": "edgarmtze", "link": "https://stackoverflow.com/users/265519/edgarmtze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 2, "accepted_answer_id": 33029526, "answer_count": 1, "score": 2, "last_activity_date": 1444540729, "creation_date": 1443647696, "last_edit_date": 1492087233, "question_id": 32875759, "link": "https://stackoverflow.com/questions/32875759/optimize-or-propose-c-c-code-using-omp-to-find-all-similar-k-motifs", "title": "Optimize or propose c++, c# code using omp to find all similar k motifs", "body": "<p>Given A positive integer <code>k (k\u226450)</code>, a DNA string s of length at most <code>5,000</code> representing a motif, and a DNA string t of length at most <code>50,000</code> representing a genome.</p>\n\n<p>The problem consists on returning all substrings <code>t\u2032</code> of t such that the edit distance <code>d_E(s,t\u2032)</code> </p>\n\n<blockquote>\n  <p>The edit distance between two strings is the minimum number of elementary\n  operations (insertions, deletions, and substitutions) to transform one\n  string into the other, for instamce <code>s = 'TGCATAT'</code> and <code>t' = 'ATCCGAT'</code> <a href=\"https://i.stack.imgur.com/lJ2XH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lJ2XH.png\" alt=\"enter image description here\"></a>\n  <a href=\"https://codereview.stackexchange.com/questions/10130/edit-distance-between-two-strings\">here is a c++ implementation by</a> user1131146 account aban \n  Maybe it would be better to use that??</p>\n</blockquote>\n\n<p>is less than or equal to <code>k</code>. Each substring should be encoded by a pair containing its location in <code>t</code> followed by its length.</p>\n\n<p>for instance</p>\n\n<pre><code>2\nACGTAG\nACGGATCGGCATCGT\n</code></pre>\n\n<p>should output</p>\n\n<pre><code>1 4\n1 5\n1 6\n</code></pre>\n\n<p>For this example <code>k=2</code> results mean:<br>\nFor indices <code>1 to 4</code>, <code>d_E(s,t\u2032)=2</code> (ADD <code>T</code> THEN one <code>A</code> BEFORE LAST <code>t's G</code>)</p>\n\n<pre><code>s  = ACGTAG\nt' = ACGG\n</code></pre>\n\n<p>For indices <code>1 to 5</code> <code>d_E(s,t\u2032)=2</code> (ADD <code>G</code> to end of <code>t'</code> THEN replace <code>t's G</code> at index 4 by <code>T</code>)</p>\n\n<pre><code>s  = ACGTAG\nt' = ACGGA\n</code></pre>\n\n<p>For indices <code>1 to 6</code> <code>d_E(s,t\u2032)=2</code> (REPLACE LAST <code>t's T</code> BY <code>G</code>THEN replace <code>t's G</code> at index 4 by <code>T</code>) </p>\n\n<pre><code>s  = ACGTAG\nt' = ACGGAT\n</code></pre>\n\n<p>Having the solution to get <code>all substrings of a genome that are within a certain fixed distance of the desired motif</code>,What would be the best way to parallelize a solution using omp. As the longer the strings become program takes too much time.</p>\n\n<p>I have tested using omp <code>#pragma omp parallel for</code> then using a <code>lock</code> in the write to file section, and also <code>#pragma omp critical</code> However I do not know if I am paralelizing it correctly.</p>\n\n<pre><code>void alignment(vector&lt;vi&gt;&amp;a, string &amp;x, string y, int k){\n    string tx,ty;\n    int i,j;\n    int ylen=a[0].size();\n    for(i=1;i&lt;a.size();i++){\n        for(j=max(1,i-k);j&lt;=min(ylen,i+k);j++){ \n            a[i][j] = max(x[i-1] == y[j-1]?a[i-1][j-1] : (a[i-1][j-1]-1), max(a[i-1][j]-1,a[i][j-1]-1));\n        }\n    }\n}\n\nint main()\n{\n    int k = 23;\n    string s = \"AATTAGCTAAGGTGTACGATGTCCCATTGTGTAAGATTAGGAACTCCATTTAGGTTACCTCCGTCTTAAGTGATGGACCGTGGGTAGCTGCGTCCGATGGACTCATGCAGCGCCCGGATACCTGCAGTATTTATTATATAGGTCTGCGCACCAAACGATTTCTTTCGTGGTCGGGATTCCGGGGTCCTCCGCTATTCAGAGAGCTAAATA\";\n    string t = \"ACAATGCAGCAATCCAGCGCCGGAATTTAAGAATAGGTCAGTTTGTAAGGCACTGTTCCCGTTATTCGTAATGCAGTATTAACGTTAATGCTCGAGACCATATTGGACGTCAGTATGCAGACCTGTGCTAGGGTGGTCTATTTCAAGATCACCGAGCTAGGCGCGTGAGCTAACAGGCCGTAATGGTGGCGCCCGCTCCCATAATCACTTCACGAAGCATTAGGTAGACTACCATTTAGGAAGCCCTCTCGCCCGCGTACTGGTTACAGCCCACTACAATGGATACTCCTTACTTCGGTGCAGGCAAGACTTCTACAAAGAAGCGTCCAAGAAGTTGTCGTAGCTCGTTCTTACCCCACCTGTATAAAATTGATCCAGTCGTACATATGACGATGCTGAGCCTCGGACTGGTAAATACAAGTCAAAGGACCAACCCATTACAGTATGAACTACCGGTGG\";\n    time_t start = time(NULL);\n    std::ofstream out(\"output.txt\");\n    ifstream someStream( \"data.txt\" );\n    string line;\n    getline( someStream, line );    int k = atoi(line.c_str() );\n    getline( someStream, line );    string s =line;\n    getline( someStream, line );    string t= line;\n    int slen=s.length(), tlen=t.length();\n    vector&lt;vi&gt;a( slen+1, vi(slen+k+1)); \n    int i,j;\n    for(i=1;i&lt;a.size();i++)\n        fill(a[i].begin(),a[i].end(),-999),a[i][0]=a[i-1][0]-1;\n    #pragma omp parallel for\n    {\n        for(j=1;j&lt;a[0].size();j++)\n        {\n            a[0][j]=a[0][j-1]-1;\n        }\n    }\n    //cout &lt;&lt; \"init\";\n    time_t endINIT = time(NULL);\n    cout&lt;&lt;\"Execution Init Time: \"&lt;&lt; (double)(endINIT-start)&lt;&lt;\" Seconds\"&lt;&lt;std::endl;\n    //omp_lock_t writelock;\n    //omp_init_lock(&amp;writelock);\n\n    #pragma omp parallel for\n    {\n    for(i=0;i&lt;=tlen-slen+k;i++)\n    {\n        alignment(a,s,t.substr(i,slen+k),k); \n        for(j=max(0,slen-k);j&lt;=min(slen+k,tlen-i);j++)\n        {\n            if(a[slen][j]&gt;=-k)\n            {\n\n                //omp_set_lock(&amp;writelock);    \n                //cout&lt;&lt;(i+1)&lt;&lt;' '&lt;&lt;j&lt;&lt;endl;\n                #pragma omp critical \n                {\n                    out &lt;&lt;(i+1)&lt;&lt;' '&lt;&lt;j&lt;&lt;endl;\n                }\n                //omp_unset_lock(&amp;writelock);\n            }\n        }\n    }\n    }\n    //omp_destroy_lock(&amp;writelock);\n    time_t end = time(NULL);\n    cout&lt;&lt;\"Execution Time: \"&lt;&lt; (double)(end-start)&lt;&lt;\" Seconds\"&lt;&lt;std::endl;  \n    out.close();\n    return 0;\n}\n</code></pre>\n\n<p>I have not been able to complete this or optimize it. Is there a better way? </p>\n"}, {"tags": ["c++", "string"], "answers": [{"comments": [{"owner": {"reputation": 273, "user_id": 5216575, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/148757c64629b9aee98c586f544352c5?s=128&d=identicon&r=PG", "display_name": "Hugh", "link": "https://stackoverflow.com/users/5216575/hugh"}, "edited": false, "score": 0, "creation_date": 1443648224, "post_id": 32875819, "comment_id": 53583059, "body": "Thank you that&#39;s exactly what the problem was! I will &quot;accept&quot; this answer in a few minutes"}], "tags": [], "owner": {"reputation": 530, "user_id": 5390857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7819533c0a30c75fa032760761d446ac?s=128&d=identicon&r=PG&f=1", "display_name": "dxdy", "link": "https://stackoverflow.com/users/5390857/dxdy"}, "is_accepted": true, "score": 0, "last_activity_date": 1443647950, "creation_date": 1443647950, "answer_id": 32875819, "question_id": 32875753, "link": "https://stackoverflow.com/questions/32875753/using-istringstream-to-distinguish-between-0-and-non-numerical-string/32875819#32875819", "title": "Using istringstream() to distinguish between &quot;0&quot; and non-numerical string", "body": "<p><code>betstring.at(0) != 0</code> does not do what you probably expect it to do. You want to compare characters, that is, see if the first character is <code>'0'</code>, so you have to put that in there. As it is, your code sees whether the fist char has the numerical value zero (which would be '\\0').</p>\n"}, {"tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": false, "score": 0, "last_activity_date": 1447501624, "creation_date": 1447501624, "answer_id": 33708058, "question_id": 32875753, "link": "https://stackoverflow.com/questions/32875753/using-istringstream-to-distinguish-between-0-and-non-numerical-string/33708058#33708058", "title": "Using istringstream() to distinguish between &quot;0&quot; and non-numerical string", "body": "<blockquote>\n  <p>... the player should enter an integer number as their new bet. To prevent errors when someone mistypes and enters a string the code is intended to take in a string, check if it is a number, and if it is not then ask the player to enter a valid bet.</p>\n</blockquote>\n\n<p>Something like the following will work for you.</p>\n\n<pre><code>template &lt;class T&gt;\nT StringToValue(const std::string&amp; str) {\n    std::istringstream iss(str);\n    T value; iss &gt;&gt; value;\n\n    // Use fail(), not bad()\n    if (iss.fail())\n        throw std::runtime_error(\"'\" + str +\"' is not a value\");\n\n    return value;   \n}\n</code></pre>\n\n<p>You can use it like:</p>\n\n<pre><code>string betstring;\ncin &gt;&gt; betstring;\n\nint bet;\nbet = StringToValue&lt;int&gt;(betstring);\n</code></pre>\n\n<p>If the string is not a presentation of type <code>T</code> (<code>int</code>, <code>float</code>, etc), then a <code>runtime_error</code> is thrown.</p>\n\n<p>If you switch to <code>bad()</code>, then the function will return 0 when it encounters something that would throw under <code>fail()</code>.</p>\n"}], "owner": {"reputation": 273, "user_id": 5216575, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/148757c64629b9aee98c586f544352c5?s=128&d=identicon&r=PG", "display_name": "Hugh", "link": "https://stackoverflow.com/users/5216575/hugh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 32875819, "answer_count": 2, "score": 1, "last_activity_date": 1447501624, "creation_date": 1443647676, "question_id": 32875753, "link": "https://stackoverflow.com/questions/32875753/using-istringstream-to-distinguish-between-0-and-non-numerical-string", "title": "Using istringstream() to distinguish between &quot;0&quot; and non-numerical string", "body": "<p>I am trying to make a program to play poker. When betting the player should enter an integer number as their new bet. To prevent errors when someone mistypes and enters a string the code is intended to take in a string, check if it is a number, and if it is not then ask the player to enter a valid bet.</p>\n\n<p>The code below is my attempt at making a function to do that using the istringstream function to convert the string betstring to an int. </p>\n\n<p>istringstream returns 0 if the string has no number in it. betstring is an invalid entry if it is a number less than 0 or if it contains no numbers. If betstring is \"0\" this is a valid bet. </p>\n\n<p>If betstring is mixed letters and numbers (e.g. j96kp) then this \"j96kp\" is assumed to indicate a bet of 96 for simplicity so it is valid.</p>\n\n<p>The problem comes when I enter a betstring equal to \"0\". The code interprets this as an invalid bet. I have checked the logic operators and I do not understand why the code does not take \"0\" to be a valid bet.</p>\n\n<p>Can anybody spot where the problem is arising?</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint requestBet()\n{\n    int newbet;\n    string betstring;\n    int validbet = 0;\n    while(!validbet)\n    { //loop until a valid bet is entered\n        cin &gt;&gt; betstring;\n        validbet = 1; //assume bet is valid then test this\n        istringstream(betstring) &gt;&gt; newbet; \n        if(((newbet == 0) &amp;&amp; (betstring.at(0) != 0)) || (newbet &lt; 0))\n        {\n            cout &lt;&lt; \"Enter a valid bet\" &lt;&lt; endl;\n            validbet = 0;\n        }\n    }\n    return newbet;\n}\n\nint main()\n{\n    int number;\n    cout &lt;&lt; \"Enter your bet\" &lt;&lt; endl;\n    number = requestBet();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++builder", "c++builder-10-seattle"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1443660159, "post_id": 32875633, "comment_id": 53586552, "body": "Bring the code here."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 3891957, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/b4c04b9228983d9eee07fbe58a6ced2a?s=128&d=identicon&r=PG&f=1", "display_name": "kc3ase", "link": "https://stackoverflow.com/users/3891957/kc3ase"}, "edited": false, "score": 0, "creation_date": 1443713726, "post_id": 32877773, "comment_id": 53612632, "body": "Thanks Remy. I had simply copied this header file wrong."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 2, "last_activity_date": 1443660038, "creation_date": 1443660038, "answer_id": 32877773, "question_id": 32875633, "link": "https://stackoverflow.com/questions/32875633/c-10-seattle-embarcadero-type-complex-array/32877773#32877773", "title": "C++ 10 Seattle Embarcadero Type complex_array", "body": "<p><code>complex_array</code> is a custom class defined in NEC2++'s <a href=\"https://github.com/tmolteno/necpp/blob/master/src/math_util.h\" rel=\"nofollow\"><code>math_util.h</code></a> header file:</p>\n\n<pre><code>#if USING_EIGEN_ARRAY\n  #include &lt;Eigen/Dense&gt;\n\n  typedef Eigen::Matrix&lt;int32_t, Eigen::Dynamic, 1&gt;  int_array;\n  typedef Eigen::Matrix&lt;nec_float, Eigen::Dynamic, 1&gt;  real_array;\n  typedef Eigen::Matrix&lt;nec_complex, Eigen::Dynamic, 1&gt;  complex_array; // &lt;-- here\n#else\n  // Use our own types rather than Eigen\n  #include \"safe_array.h\"\n  typedef safe_array&lt;int32_t&gt;  int_array;\n  typedef safe_array&lt;nec_float&gt;  real_array;\n  typedef safe_array&lt;nec_complex&gt;  complex_array; // &lt;-- here\n\n  typedef safe_matrix&lt;int32_t&gt;  int_matrix;\n  typedef safe_matrix&lt;nec_float&gt;  real_matrix;\n  typedef safe_matrix&lt;nec_complex&gt;  complex_matrix;\n#endif\n</code></pre>\n\n<p>Whatever code you are compiling that claims <code>complex_array</code> is undefined is missing an <code>#include</code> statement for <code>math_util.h</code>.</p>\n"}], "owner": {"reputation": 85, "user_id": 3891957, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/b4c04b9228983d9eee07fbe58a6ced2a?s=128&d=identicon&r=PG&f=1", "display_name": "kc3ase", "link": "https://stackoverflow.com/users/3891957/kc3ase"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443660098, "creation_date": 1443647142, "last_edit_date": 1443660098, "question_id": 32875633, "link": "https://stackoverflow.com/questions/32875633/c-10-seattle-embarcadero-type-complex-array", "title": "C++ 10 Seattle Embarcadero Type complex_array", "body": "<p>I'm trying to work with the open source code from MSVC called NEC2++\n<a href=\"https://github.com/tmolteno/necpp\" rel=\"nofollow\">https://github.com/tmolteno/necpp</a></p>\n\n<p>There is an undefined type called complex_array which Builder can't recognize. I have Boost installed but I don't see this type anywhere in the documentation. I am assuming this is a type for an array for real and imaginary numbers. I can not find such a type in Builder or Boost documentation.</p>\n\n<p>I'm looking for possible solutions to port this code.</p>\n"}, {"tags": ["c++", "string", "c++11", "opendir"], "comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 2, "creation_date": 1443646889, "post_id": 32875523, "comment_id": 53582489, "body": "And the relevant information: what is the <i>(textual) value</i> of <code>c</code> at time of invocation? Since specifying the string works (with a known value), and <code>c</code> is of the right type, then the likely culprit is the actual value supplied is .. unexpected/different."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 4, "creation_date": 1443647096, "post_id": 32875523, "comment_id": 53582577, "body": "Psychic prediction: The failing string includes a newline and/or carriage return that was in the file it was read from and wasn&#39;t stripped."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1443647157, "post_id": 32875523, "comment_id": 53582605, "body": "@ShadowRanger, let&#39;s see who&#39;s prediction is correct... I have the feeling it is yours :)"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1443649250, "post_id": 32875523, "comment_id": 53583480, "body": "And to go with these psychic predictions, some debugging/troubleshooting tips: 1) just before the <code>opendir()</code> call add something like <code>printf(&quot;c is \\&quot;%s\\&quot;\\n&quot;, c);</code>.  Note the quotes around the dump of the string so that whitespace can be easily detected. 2) post actual code that reproduces your problem so things like <code>path</code> going out of scope or being changed aren&#39;t hidden. and 3) dump <code>errno</code> and/or use <code>perror()</code> to tell you what the specific error is."}, {"owner": {"reputation": 13, "user_id": 5389689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3aKb1.png?s=128&g=1", "display_name": "Jangell", "link": "https://stackoverflow.com/users/5389689/jangell"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1443653609, "post_id": 32875523, "comment_id": 53584972, "body": "@ShadowRanger, you got it! I used <a href=\"http://stackoverflow.com/questions/216823/whats-the-best-way-to-trim-stdstring\">this</a> example of how to trim whitespace and I got it to work. Thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 4, "last_activity_date": 1443647105, "creation_date": 1443647105, "answer_id": 32875617, "question_id": 32875523, "link": "https://stackoverflow.com/questions/32875523/why-wont-opendir-open-a-path-after-converting-the-path-type-with-c-str/32875617#32875617", "title": "Why won&#39;t opendir() open a path after converting the path type with c_str()?", "body": "<p>Looking at my crystall ball, I see the following issue: path is modified (or even leaves the scope) after <code>path.c_str()</code> is called, but before <code>opendir()</code> is called. It is usually a bad practice to remember result of <code>c_str()</code> in any variable, as it leads to issues like this. <code>c_str()</code> is intended for in-place usage, like following </p>\n\n<pre><code>opendir(path.c_str());\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5389689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3aKb1.png?s=128&g=1", "display_name": "Jangell", "link": "https://stackoverflow.com/users/5389689/jangell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 943, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443648159, "creation_date": 1443646789, "question_id": 32875523, "link": "https://stackoverflow.com/questions/32875523/why-wont-opendir-open-a-path-after-converting-the-path-type-with-c-str", "title": "Why won&#39;t opendir() open a path after converting the path type with c_str()?", "body": "<p>I'm trying to open a directory, the name of which (<em>path</em>) is currently in a std::string read in originally from a .csv file (although I don't think that changes anything about the string itself). Calling opendir(path.c_str()) returns NULL. I tried the following code, doing the conversion outside of opendir():</p>\n\n<pre><code>DIR *dir;\nbool first = True;\nstring level = \"\";\nstruct dirent *ent;\n\nconst char * c = path.c_str();\n// A\nif ((dir = opendir(c)) != NULL){\n    // do stuff\n    // should open the directory and go here\n}else{\n    // always ends up here\n}\n</code></pre>\n\n<p>While this failed with path=\"LeanDataBase\", a directory in the project folder, substituting opendir(\"LeanDataBase\") for opendir(c) does seem to open the directory. However, this function is recursive, so I can't hard code this value or it doesn't work and falls into an infinite loop.</p>\n\n<p>I also tried printing the types, with the following two lines inserted right after \"A\" in the previous code:</p>\n\n<pre><code>cout &lt;&lt; typeid(c).name() &lt;&lt; endl;\ncout &lt;&lt; typeid(\"LeanDataBase\").name() &lt;&lt; endl;\n</code></pre>\n\n<p>Which yielded the following output:</p>\n\n<pre><code>PKc\nA13_c\n</code></pre>\n\n<p>Does this mean that I'm passing the wrong type to opendir()? It seems like it can handle PKc, but not A13_c. Is there a way to convert the path string to the proper type?</p>\n"}, {"tags": ["c++", "inline"], "answers": [{"comments": [{"owner": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "edited": false, "score": 0, "creation_date": 1443646426, "post_id": 32875328, "comment_id": 53582267, "body": "Also, the inline keyword is only a hint or a wish, the compiler is not required to follow it. I would bet that modern compilers simply ignore it."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1443646565, "post_id": 32875328, "comment_id": 53582340, "body": "Depends on the language. <a href=\"https://gustedt.wordpress.com/2010/11/29/myth-and-reality-about-inline-in-c99/\" rel=\"nofollow noreferrer\">C99&#39;s <code>inline</code> is not a hint at all.</a>."}], "tags": [], "owner": {"reputation": 530, "user_id": 5390857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7819533c0a30c75fa032760761d446ac?s=128&d=identicon&r=PG&f=1", "display_name": "dxdy", "link": "https://stackoverflow.com/users/5390857/dxdy"}, "is_accepted": false, "score": 6, "last_activity_date": 1443645978, "creation_date": 1443645978, "answer_id": 32875328, "question_id": 32875295, "link": "https://stackoverflow.com/questions/32875295/inline-functions-within-an-inline-function/32875328#32875328", "title": "inline functions within an inline function", "body": "<p>In most situations, you can rest comfortably leaving inlining-decisions to the compiler, which will know far better than you when and when not it will result in better performance.</p>\n\n<p>In this specific situation, I would stronlgy suspect that it is completely up to the compiler what to do.</p>\n"}, {"tags": [], "owner": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "is_accepted": true, "score": 4, "last_activity_date": 1443646562, "creation_date": 1443646562, "answer_id": 32875461, "question_id": 32875295, "link": "https://stackoverflow.com/questions/32875295/inline-functions-within-an-inline-function/32875461#32875461", "title": "inline functions within an inline function", "body": "<p>No, the inline keywords will only cause the A code to be inlined inside the caller code. This will not affect inlining of B.</p>\n\n<p>Besides this, in c++, the inline keyword is only a hint to the compiler, which is allowed to ignore it. Modern compilers decide when the functions need to be inlined, even if the keyword is not used.</p>\n"}, {"tags": [], "owner": {"reputation": 20315, "user_id": 963881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e82a2a2b9ddf6fb580a9c34b2eca65f4?s=128&d=identicon&r=PG&f=1", "display_name": "syntagma", "link": "https://stackoverflow.com/users/963881/syntagma"}, "is_accepted": false, "score": 2, "last_activity_date": 1443646690, "creation_date": 1443646690, "answer_id": 32875491, "question_id": 32875295, "link": "https://stackoverflow.com/questions/32875295/inline-functions-within-an-inline-function/32875491#32875491", "title": "inline functions within an inline function", "body": "<p>When you declare a function/method <code>inline</code>, it is just a <em>hint</em> to the compiler that this particular function should be inlined. The compiler then may or may not inline it. The same applies for nested calls like the call to <code>B()</code> inside <code>A()</code>.</p>\n\n<p>I would probably add <code>inline</code> specifier to both of the functions, but that's just a matter of style - modern optimizing compiler like GCC will optimize it anyways.</p>\n"}, {"comments": [{"owner": {"reputation": 780, "user_id": 1464870, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/680cd344c37910e3631c2449583b818f?s=128&d=identicon&r=PG", "display_name": "Monster Hunter", "link": "https://stackoverflow.com/users/1464870/monster-hunter"}, "edited": false, "score": 0, "creation_date": 1443647765, "post_id": 32875682, "comment_id": 53582858, "body": "in the case you mentioned, is the function actually inlined or <code>inline</code> just resolve the linker error?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 780, "user_id": 1464870, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/680cd344c37910e3631c2449583b818f?s=128&d=identicon&r=PG", "display_name": "Monster Hunter", "link": "https://stackoverflow.com/users/1464870/monster-hunter"}, "edited": false, "score": 1, "creation_date": 1443648596, "post_id": 32875682, "comment_id": 53583215, "body": "@MonsterHunter, it is guranteed to resolve a linker error. It does not guaratee to perform the actual inlining. But don&#39;t you worry. Modern compilers LOVE inlining. If anything can be inlined, it would be inlined :)"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 4, "last_activity_date": 1443647345, "creation_date": 1443647345, "answer_id": 32875682, "question_id": 32875295, "link": "https://stackoverflow.com/questions/32875295/inline-functions-within-an-inline-function/32875682#32875682", "title": "inline functions within an inline function", "body": "<p>Somehow all the commenters failed to mention that there are cases when inline is NOT a mere hint to the compiler, but a mandated keyword. It happens when one puts a non-template definition of a function in the header file included by multiple .cpp files. In this case absence of inline will trigger a linker error. As a matter of fact, this is the only case when one should even bother typing those 6 characters. In other cases, compilers will inline everything they can - regardless of this keyword presence.</p>\n"}], "owner": {"reputation": 780, "user_id": 1464870, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/680cd344c37910e3631c2449583b818f?s=128&d=identicon&r=PG", "display_name": "Monster Hunter", "link": "https://stackoverflow.com/users/1464870/monster-hunter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 32875461, "answer_count": 4, "score": 3, "last_activity_date": 1443647345, "creation_date": 1443645882, "last_edit_date": 1443646140, "question_id": 32875295, "link": "https://stackoverflow.com/questions/32875295/inline-functions-within-an-inline-function", "title": "inline functions within an inline function", "body": "<p>for the following function:</p>\n\n<pre><code>inline void A() {\n   ...\n   B();\n   ...\n}\n</code></pre>\n\n<p>is <em>B</em> also inlined by the compiler? </p>\n\n<p>If not, should I make <em>B</em> inline to increase performance?</p>\n"}, {"tags": ["c++", "c", "macos", "webkit", "gtk"], "comments": [{"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1443671114, "post_id": 32875266, "comment_id": 53588961, "body": "There are two different versions of WebKitGTK, confusingly called WebKitGTK (which I&#39;ll call WebKit1 here) and WebKit2GTK. They are both maintained (as far as I know), and have subtle but important differences. The function <code>webkit_uri_request_new()</code> is only in WebKit2GTK, but you&#39;re using WebKit1. There are two things you can do: either switch your code to WebKit1 or find a WebKit2GTK. Here are the documentation entry points for <a href=\"http://webkitgtk.org/reference/webkitgtk/stable/\" rel=\"nofollow noreferrer\">WebKit1</a> and <a href=\"http://webkitgtk.org/reference/webkit2gtk/stable/\" rel=\"nofollow noreferrer\">WebKit2GTK</a>."}, {"owner": {"reputation": 1943, "user_id": 1391824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20b30c131f358c299e7b5c89870c3761?s=128&d=identicon&r=PG", "display_name": "TingPing", "link": "https://stackoverflow.com/users/1391824/tingping"}, "reply_to_user": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 1, "creation_date": 1443704068, "post_id": 32875266, "comment_id": 53605971, "body": "@andlabs do note that WebKit2GTK does not support OSX yet."}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 4761506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/987726e7d342c04caca1a12a3cfd5ea1?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Boucher", "link": "https://stackoverflow.com/users/4761506/olivier-boucher"}, "is_accepted": true, "score": 0, "last_activity_date": 1443726324, "creation_date": 1443726324, "answer_id": 32895001, "question_id": 32875266, "link": "https://stackoverflow.com/questions/32875266/c-c-clang-linking-error-on-mac-osx-webkitgtk/32895001#32895001", "title": "c/c++ clang linking error on Mac OSX - webkitgtk", "body": "<p>The problem is that I was using<br>\n<code>pkg_check_modules(WEBKIT REQUIRED webkitgtk-3.0)</code><br>\ninstead of<br>\n<code>pkg_check_modules(WEBKIT REQUIRED webkit2gtk-3.0)</code>  </p>\n"}], "owner": {"reputation": 36, "user_id": 4761506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/987726e7d342c04caca1a12a3cfd5ea1?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Boucher", "link": "https://stackoverflow.com/users/4761506/olivier-boucher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 0, "accepted_answer_id": 32895001, "answer_count": 1, "score": 0, "last_activity_date": 1443726324, "creation_date": 1443645758, "question_id": 32875266, "link": "https://stackoverflow.com/questions/32875266/c-c-clang-linking-error-on-mac-osx-webkitgtk", "title": "c/c++ clang linking error on Mac OSX - webkitgtk", "body": "<p>I am trying to use GTK3 and WebKitGTK. I am successful at running the following code :</p>\n\n<pre><code>#include &lt;gtk/gtk.h&gt;\n#include &lt;webkit2/webkit2.h&gt;\n#include &lt;JavaScriptCore/JavaScript.h&gt;\n\nusing namespace std;\n\nstatic void destroyWindowCb(GtkWidget* widget, GtkWidget* window);\nstatic gboolean closeWebViewCb(WebKitWebView* webView, GtkWidget* window);\n\nint main(int argc, char* argv[])\n{\n// Initialize GTK+\ngtk_init(&amp;argc, &amp;argv);\n\n// Create an 800x600 window that will contain the browser instance\nGtkWidget *main_window = gtk_window_new(GTK_WINDOW_TOPLEVEL);\ngtk_window_set_default_size(GTK_WINDOW(main_window), 800, 600);\n\n// Create a browser instance\nWebKitWebView *webView = WEBKIT_WEB_VIEW(webkit_web_view_new());\n\n// Put the browser area into the main window\ngtk_container_add(GTK_CONTAINER(main_window), GTK_WIDGET(webView));\n\n// Set up callbacks so that if either the main window or the browser instance is\n// closed, the program will exit\ng_signal_connect(main_window, \"destroy\", G_CALLBACK(destroyWindowCb), NULL);\ng_signal_connect(webView, \"close\", G_CALLBACK(closeWebViewCb), main_window);\n\n// Load a web page into the browser instance\nwebkit_web_view_load_uri(webView, \"http://www.webkitgtk.org/\");\n\n// Make sure that when the browser area becomes visible, it will get mouse\n// and keyboard events\ngtk_widget_grab_focus(GTK_WIDGET(webView));\n\n// Make sure the main window and all its contents are visible\ngtk_widget_show_all(main_window);\n\n// Run the main GTK+ event loop\ngtk_main();\n\nreturn 0;\n}\n\n\nstatic void\ndestroyWindowCb(GtkWidget* widget, GtkWidget* window)\n{\n    gtk_main_quit();\n}\n\nstatic gboolean\ncloseWebViewCb(WebKitWebView* webView, GtkWidget* window)\n{\n    gtk_widget_destroy(window);\n    return TRUE;\n}\n</code></pre>\n\n<p>And the following cmake list : </p>\n\n<pre><code>cmake_minimum_required(VERSION 3.3)\nproject(HttpsMock)\n\n# Use the package PkgConfig to detect GTK+ headers/library files\nfind_package(PkgConfig REQUIRED)\n\npkg_check_modules(GTK3 REQUIRED gtk+-3.0)\npkg_check_modules(WEBKIT REQUIRED webkitgtk-3.0)\n\n# Setup CMake to use GTK+, tell the compiler where to look for headers\ninclude_directories(${GTK3_INCLUDE_DIRS})\ninclude_directories(${WEBKIT_INCLUDE_DIRS})\n\n# and to the linker where to look for libraries\nlink_directories(${GTK3_LIBRARY_DIRS})\nlink_directories(${WEBKIT_LIBRARY_DIRS})\n\n# Add other flags to the compiler\nadd_definitions(${GTK3_CFLAGS_OTHER})\nadd_definitions(${WEBKIT_CFLAGS_OTHER})\n\n# Flags and source\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++11 -v\")\n\nset(SOURCE_FILES main.cpp)\n\nadd_executable(HttpsMock ${SOURCE_FILES})\n# Linking\ntarget_link_libraries(HttpsMock ${GTK3_LIBRARIES})\ntarget_link_libraries(HttpsMock ${WEBKIT_LIBRARIES})\n</code></pre>\n\n<p>But as soon as I try to use another method like :</p>\n\n<pre><code>WebKitURIRequest *request = webkit_uri_request_new(\"http://www.webkitgtk.org/\");\n</code></pre>\n\n<p>The program doesn't want to link anymore. It's really weird. Here's a sample of the error :</p>\n\n<pre><code>[100%] Linking CXX executable HttpsMock\nApple LLVM version 7.0.0 (clang-700.0.72)\nTarget: x86_64-apple-darwin14.5.0\nThread model: posix\n \"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ld\" -demangle -dynamic -arch x86_64 -macosx_version_min 10.10.0 -syslibroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk -o HttpsMock -L/opt/local/lib -search_paths_first -headerpad_max_install_names CMakeFiles/HttpsMock.dir/main.cpp.o -lwebkitgtk-3.0 -lgtk-3 -lgdk-3 -lpangocairo-1.0 -lpangoft2-1.0 -lpango-1.0 -lm -lfontconfig -lfreetype -latk-1.0 -lcairo-gobject -lcairo -lgdk_pixbuf-2.0 -lsoup-2.4 -lgio-2.0 -lgobject-2.0 -ljavascriptcoregtk-3.0 -lglib-2.0 -lintl -rpath /opt/local/lib -lc++ -lSystem /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/7.0.0/lib/darwin/libclang_rt.osx.a\nUndefined symbols for architecture x86_64:\n  \"_webkit_uri_request_new\", referenced from:\n      _main in main.cpp.o\nld: symbol(s) not found for architecture x86_64\n</code></pre>\n\n<p>I really have no clue of what is going on. Could someone please enlighten me?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "c++11", "vector"], "comments": [{"owner": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "edited": false, "score": 0, "creation_date": 1443645889, "post_id": 32875261, "comment_id": 53581982, "body": "So you want to remove the first element of the vector? Or do you want to have another vector which has the same elements except the first one? Or do you want to pass a specific range of elements?"}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "reply_to_user": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "edited": false, "score": 0, "creation_date": 1443645933, "post_id": 32875261, "comment_id": 53582012, "body": "@\u028e\u01dd\u0279\u025f\u025f\u025f\u01dd\u017f No, I don&#39;t want to remove the element -- I want to get the first element (which is easy; <code>parts[0]</code>) and the rest (which I can&#39;t figure out). To put it in your words: &quot;another vector which has the same elements except the first one&quot;"}, {"owner": {"reputation": 762, "user_id": 1987633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7cc5084e895540051a920e541ab9b8c?s=128&d=identicon&r=PG", "display_name": "Andre Kostur", "link": "https://stackoverflow.com/users/1987633/andre-kostur"}, "edited": false, "score": 0, "creation_date": 1443651026, "post_id": 32875261, "comment_id": 53584188, "body": "While it&#39;s an interesting exercise, you may wish to look up on your platform for a library which will process your command-line arguments for you (such as getopt() on Linux....)."}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "reply_to_user": {"reputation": 762, "user_id": 1987633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7cc5084e895540051a920e541ab9b8c?s=128&d=identicon&r=PG", "display_name": "Andre Kostur", "link": "https://stackoverflow.com/users/1987633/andre-kostur"}, "edited": false, "score": 0, "creation_date": 1443651162, "post_id": 32875261, "comment_id": 53584235, "body": "@Andre Oh, that&#39;s all this is: An exercise. I wanna relearn C++, so I&#39;m trying to avoid any non-standard libraries."}], "answers": [{"comments": [{"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1443646003, "post_id": 32875312, "comment_id": 53582048, "body": "Ooh, I totally missed the constructors in the documentation. I&#39;m gonna try this, and if it works out, accept when it lets me."}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1443647714, "post_id": 32875312, "comment_id": 53582836, "body": "As far as I can tell, this works! I&#39;m gonna put it in my code and pray it works. Thanks for the help :D"}, {"owner": {"reputation": 17966, "user_id": 1032073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/649a4.png?s=128&g=1", "display_name": "celtschk", "link": "https://stackoverflow.com/users/1032073/celtschk"}, "reply_to_user": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 1, "creation_date": 1443678023, "post_id": 32875312, "comment_id": 53590885, "body": "@QPaysTaxes: But don&#39;t forget to check that the vector is not empty, or you&#39;ll get undefined behaviour."}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 1, "creation_date": 1443681453, "post_id": 32875312, "comment_id": 53592304, "body": "better to use <code>args(std::next(begin(parts), end(parts))</code> so that it also works with <code>std::list</code> and C-arrays (the latter case might need <code>std::</code> qualification or using directive)."}, {"owner": {"reputation": 23294, "user_id": 6345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1f5ce0fac6a8d23e6dced87ab200e669?s=128&d=identicon&r=PG", "display_name": "Johann Gerell", "link": "https://stackoverflow.com/users/6345/johann-gerell"}, "reply_to_user": {"reputation": 17966, "user_id": 1032073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/649a4.png?s=128&g=1", "display_name": "celtschk", "link": "https://stackoverflow.com/users/1032073/celtschk"}, "edited": false, "score": 1, "creation_date": 1443685770, "post_id": 32875312, "comment_id": 53594787, "body": "@celtschk: Just a clarification for your comment; it&#39;ll be UB, because begin() is equal to end() if it&#39;s empty, and if you get the next iterator after begin() with begin() + 1, you&#39;ll go outside of the iterable range."}], "tags": [], "owner": {"reputation": 15257, "user_id": 648078, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9698c2f1c188de4ebf3c4496d9f07eb0?s=128&d=identicon&r=PG", "display_name": "Marius Bancila", "link": "https://stackoverflow.com/users/648078/marius-bancila"}, "is_accepted": true, "score": 11, "last_activity_date": 1443645929, "creation_date": 1443645929, "answer_id": 32875312, "question_id": 32875261, "link": "https://stackoverflow.com/questions/32875261/get-all-elements-but-the-first-as-a-separate-vector/32875312#32875312", "title": "Get all elements but the first as a separate vector", "body": "<blockquote>\n  <p>TL;DR: How can I get all but the first elements of a vector?</p>\n</blockquote>\n\n<p>If you want a vector containing that then do this:</p>\n\n<pre><code>std::vector&lt;int&gt; parts = ...;\nstd::vector&lt;int&gt; args(parts.begin() + 1, parts.end());\n</code></pre>\n\n<p>If you want only to access the vector elements then start from <code>parts.begin()+1</code> until <code>parts.end()</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1443646074, "post_id": 32875336, "comment_id": 53582097, "body": "I wanted a vector because it&#39;s easier for me to work with, specifically getting things at specific indices."}, {"owner": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "reply_to_user": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1443646319, "post_id": 32875336, "comment_id": 53582204, "body": "@QPaysTaxes You are still using vectors, you just pass iterators of that vectors instead of the vector itself."}, {"owner": {"reputation": 17966, "user_id": 1032073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/649a4.png?s=128&g=1", "display_name": "celtschk", "link": "https://stackoverflow.com/users/1032073/celtschk"}, "reply_to_user": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 1, "creation_date": 1443678316, "post_id": 32875336, "comment_id": 53590999, "body": "@QPaysTaxes: Vector iterators are random access iterators, therefore they support indices. For example, inside <code>func</code> you could access the third element of the subsequence (assuming it exists) using <code>begin[2]</code>. Of course that then limits your function to be used on random access interators (vector, deque and array), but that&#39;s not necessarily wrong; several standard library functions do that, too. The main difference is that with iterators, you do not copy the elements, but access the elements in the original vector."}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "reply_to_user": {"reputation": 17966, "user_id": 1032073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/649a4.png?s=128&g=1", "display_name": "celtschk", "link": "https://stackoverflow.com/users/1032073/celtschk"}, "edited": false, "score": 0, "creation_date": 1443695627, "post_id": 32875336, "comment_id": 53600568, "body": "@celtschk Oh, I see! That makes sense. Seems like I need to do some more research."}], "tags": [], "owner": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "is_accepted": false, "score": 4, "last_activity_date": 1443646280, "last_edit_date": 1443646280, "creation_date": 1443646002, "answer_id": 32875336, "question_id": 32875261, "link": "https://stackoverflow.com/questions/32875261/get-all-elements-but-the-first-as-a-separate-vector/32875336#32875336", "title": "Get all elements but the first as a separate vector", "body": "<p>The most idiomatic way would be to use iterators and make your function accept an iterator like this:</p>\n\n<pre><code>template&lt;typename It&gt;\nvoid func(It begin, It end) { ... }\n</code></pre>\n\n<p>and then you pass your vector as:</p>\n\n<pre><code>func(begin(vector) + 1, end(vector));\n</code></pre>\n"}], "owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3805, "favorite_count": 0, "accepted_answer_id": 32875312, "answer_count": 2, "score": 2, "last_activity_date": 1443646280, "creation_date": 1443645728, "question_id": 32875261, "link": "https://stackoverflow.com/questions/32875261/get-all-elements-but-the-first-as-a-separate-vector", "title": "Get all elements but the first as a separate vector", "body": "<p>I'm trying to write a basic command-line program in C++. While the rest of the code probably has problems galore, too, the one I'm facing now is this: I've split the inputted line into pieces, but I can't figure out how to get all but the first so I can pass it down the line as the list of arguments for the command.</p>\n\n<p>If this was Ruby, I'd do something like this, where <code>parts</code> is the array of space-separated arguments for the command:</p>\n\n<pre><code>command = parts[0]\nargs = parts[1..-1]\n</code></pre>\n\n<p>where <code>parts</code> is the array of bits that were space-separated. </p>\n\n<p><strong>TL;DR</strong>:  How can I get all but the first elements of a <code>vector</code>?</p>\n\n<p>If using another type makes it easier, feel free to say as much -- I don't think I'll have <em>that</em> much trouble porting it over.</p>\n\n<p>I've tried using a <code>deque</code>, but I don't want to modify <code>parts</code>, just get pieces of it. I've also searched around on this site, but all of the questions that turn up are either related but solved in a way that I can't use, starts of a really hacky workaround that I'd rather avoid, or totally unrelated.</p>\n\n<hr>\n\n<p><sup>P.S. I'm not <code>using namespace std</code>, but <code>std::</code> is a pain to type so I omitted it here. Please do provide it in your answers, where applicable.</sup></p>\n\n<p><sup>P.P.S. I'm just (re)starting at C++ so please provide an explanation along with your answer.</sup></p>\n"}, {"tags": ["c++", "gcc", "extern", "weak"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1443647813, "post_id": 32875230, "comment_id": 53582876, "body": "It isn&#39;t quite clear what you mean by a class declaring an extern &quot;C&quot; function. Can you show some code?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1443648150, "post_id": 32875230, "comment_id": 53583037, "body": "Can&#39;t you just put <code>extern &quot;C&quot;</code> around the declaration of the function in the second file? Since you put this around the definition in the first file, it will be compiled as if it were in a C program, and the caller will call it like a C function."}, {"owner": {"reputation": 6701, "user_id": 4975126, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-wxykA2o2_PU/AAAAAAAAAAI/AAAAAAAAEyY/VGbVvqSSw1Q/photo.jpg?sz=128", "display_name": "Aidan Gomez", "link": "https://stackoverflow.com/users/4975126/aidan-gomez"}, "edited": false, "score": 0, "creation_date": 1443649366, "post_id": 32875230, "comment_id": 53583540, "body": "I don&#39;t see why not. extern &quot;C&quot; has to do with compiler linkage <a href=\"http://stackoverflow.com/questions/1041866/in-c-source-what-is-the-effect-of-extern-c\" title=\"in c source what is the effect of extern c\">stackoverflow.com/questions/1041866/&hellip;</a>"}, {"owner": {"reputation": 7687, "user_id": 3220983, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ypq01.jpg?s=128&g=1", "display_name": "BuvinJ", "link": "https://stackoverflow.com/users/3220983/buvinj"}, "edited": false, "score": 0, "creation_date": 1443650183, "post_id": 32875230, "comment_id": 53583883, "body": "I&#39;ve used extern &quot;C&quot; with dlls and GetProcAddress to get a function pointer.  Is there maybe something similar I could do here?"}, {"owner": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 0, "creation_date": 1444086325, "post_id": 32875230, "comment_id": 53743481, "body": "The easiest way i can think of would not answer your question but is maybe an acceptable workaround. What about building two versions of your app. And the strong one executes the weak one if supppsed to?"}, {"owner": {"reputation": 7687, "user_id": 3220983, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ypq01.jpg?s=128&g=1", "display_name": "BuvinJ", "link": "https://stackoverflow.com/users/3220983/buvinj"}, "edited": false, "score": 0, "creation_date": 1444136902, "post_id": 32875230, "comment_id": 53766463, "body": "Fassl, that&#39;s a good suggestion.  I thought of that as possibility too.  I could definitely do that with say a Windows exe.  I&#39;m not sure how to accomplish that though with an iOS app.  How do I launch &quot;another app&quot;, but keep them bundled within one? I don&#39;t want to have two icons on the desktop, and I certainly don&#39;t want to deal with code signing, app store submission, dual downloading / syncing, etc."}, {"owner": {"reputation": 7687, "user_id": 3220983, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ypq01.jpg?s=128&g=1", "display_name": "BuvinJ", "link": "https://stackoverflow.com/users/3220983/buvinj"}, "edited": false, "score": 0, "creation_date": 1444137083, "post_id": 32875230, "comment_id": 53766597, "body": "Also, if anyone checks out the link I posted regarding my primary reason for doing this, you&#39;ll see that I kind of &quot;solved&quot; that one without doing this alternate app deal.  I still want this option though as a way to &quot;bail&quot; on Qt before using it for any number of potential reasons in the future."}, {"owner": {"reputation": 614, "user_id": 4876536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36757ceb0bbec00338926fc2ab6cda58?s=128&d=identicon&r=PG&f=1", "display_name": "fassl", "link": "https://stackoverflow.com/users/4876536/fassl"}, "edited": false, "score": 0, "creation_date": 1444424344, "post_id": 32875230, "comment_id": 53915014, "body": "I guess it is kind of an archive or folder like on Mac OS .app. If so and there is something like execve or any of its alternatives you could launch the other app. Or you build the weak one with your strong function being called something else, and you binary patch the final executable to jump to your function from within the weak one, restore the actual instructions and jump back... well pretty messy and probably not so easy to automate... probably possible, worth the effort? I don&#39;t know, can&#39;t think of anything easier at the moment."}], "owner": {"reputation": 7687, "user_id": 3220983, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ypq01.jpg?s=128&g=1", "display_name": "BuvinJ", "link": "https://stackoverflow.com/users/3220983/buvinj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 482, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1443649109, "creation_date": 1443645624, "last_edit_date": 1495540702, "question_id": 32875230, "link": "https://stackoverflow.com/questions/32875230/can-i-call-a-c-extern-c-function-in-a-cpp-from-another-cpp", "title": "Can I call a C++ extern &quot;C&quot; function in a cpp from another cpp?", "body": "<p>I'm working with a C++ class which I CANNOT modify that declares an extern \"C\" function from within a cpp file (not a .h).</p>\n\n<p>How do I call that function from another cpp file?  </p>\n\n<p>To further complicate matters, the function is declared with the \"weak\" attribute, and as such I can overwrite it.  What I'm really trying to do is call that weak function from my strong function in a manner analogous to calling a base class function from a derived class which is overriding the function. </p>\n\n<ul>\n<li>MORE -</li>\n</ul>\n\n<p>Alright let's get really specific since ppl are asking for more info...</p>\n\n<p>I'm creating a Qt 5.5 project for an iOS App.  I found a bug where Qt will crash if you load the app face up.  See thread: <a href=\"https://stackoverflow.com/questions/32763586/qt-for-ios-locks-up-when-app-is-launched-face-up-qiosscreen-mm-assertion\">Qt for iOS locks up when app is launched face up. (qiosscreen.mm assertion)</a></p>\n\n<p>I am NOT building from the Qt source.  I am using it out of the box.  I can see the cpp source, but I cannot actually modify or include it.</p>\n\n<p>I figured out a way with a static class to detect that my problem will occur before it does.  Since I don't actually know how to fix it, I want to display an error message at least rather than just having the app go to a black screen when you launch it.  </p>\n\n<p>Qt iOS apps load using the class \"qioseventdispatcher\".  The cpp (which I can't change or include) declares a weak main function and another weak function called qtmn.  You are suppose to override qtmn as your \"main\" function - which this qt class calls.  You can, however, override the \"real\" main too and create your own native app without the qt underlying layers.  </p>\n\n<p>I want to determine at RUNTIME (I can do this at compile time now) if I'm going to have the qt functions called or my own to load a simple native app that will display an error message.  </p>\n\n<p>Here's some of the qt cpp:</p>\n\n<pre><code>    extern \"C\" int __attribute__((weak)) main(int argc, char *argv[])\n    {\n        @autoreleasepool {\n  ...\n            qEventDispatcherDebug() &lt;&lt; \"Running UIApplicationMain\"; qIndent();\n            return UIApplicationMain(argc, argv, nil, NSStringFromClass([QIOSApplicationDelegate class]));\n        }\n    }\n\n  ...\n\n    // We define qtmn so that user_main_trampoline() will not cause\n    // missing symbols in the case of hybrid applications that don't\n    // use our main wrapper. Since the symbol is weak, it will not\n    // get used or cause a clash in the normal Qt application usecase,\n    // where we rename main to qtmn before linking.\n    extern \"C\" int __attribute__((weak)) qtmn(int argc, char *argv[])\n    {\n        Q_UNUSED(argc);\n        Q_UNUSED(argv);\n\n        Q_UNREACHABLE();\n    }\n</code></pre>\n\n<p>qtmn() goes on the get called by the UIApplication selector (void) applicationDidFinishLaunching.</p>\n\n<p>I want to provide a \"strong\" copy of main, and a strong copy of qtmn().  My copy of main will decide to load my native app, or call the qt weak main function somehow, which will then call my qtmn() function in the standar Qt for iOS manner.</p>\n"}, {"tags": ["c++", "for-loop", "getline"], "comments": [{"owner": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "edited": false, "score": 9, "creation_date": 1443645262, "post_id": 32875103, "comment_id": 53581690, "body": "<a href=\"http://stackoverflow.com/questions/6819082/stdgetline-on-stdcin\">stackoverflow.com/questions/6819082/stdgetline-on-stdcin</a>"}, {"owner": {"reputation": 15257, "user_id": 648078, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9698c2f1c188de4ebf3c4496d9f07eb0?s=128&d=identicon&r=PG", "display_name": "Marius Bancila", "link": "https://stackoverflow.com/users/648078/marius-bancila"}, "edited": false, "score": 0, "creation_date": 1443645679, "post_id": 32875103, "comment_id": 53581878, "body": "<a href=\"http://stackoverflow.com/questions/257091/how-do-i-flush-the-cin-buffer\" title=\"how do i flush the cin buffer\">stackoverflow.com/questions/257091/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 879, "user_id": 4753072, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/1056861254343164/picture?type=large", "display_name": "Jacob Macallan", "link": "https://stackoverflow.com/users/4753072/jacob-macallan"}, "edited": false, "score": 0, "creation_date": 1443646164, "post_id": 32875294, "comment_id": 53582130, "body": "I got an error where it says I cannot initialize a parameter of int_type when using the   cin.ignore(1, &quot;\\n&quot;);"}, {"owner": {"reputation": 5421, "user_id": 2317535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pleek.jpg?s=128&g=1", "display_name": "ashiquzzaman33", "link": "https://stackoverflow.com/users/2317535/ashiquzzaman33"}, "reply_to_user": {"reputation": 879, "user_id": 4753072, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/1056861254343164/picture?type=large", "display_name": "Jacob Macallan", "link": "https://stackoverflow.com/users/4753072/jacob-macallan"}, "edited": false, "score": 0, "creation_date": 1443646643, "post_id": 32875294, "comment_id": 53582373, "body": "@Xari, sorry my mistake use &#39;\\n&#39; not &quot;\\n&quot;."}], "tags": [], "owner": {"reputation": 5421, "user_id": 2317535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pleek.jpg?s=128&g=1", "display_name": "ashiquzzaman33", "link": "https://stackoverflow.com/users/2317535/ashiquzzaman33"}, "is_accepted": true, "score": 2, "last_activity_date": 1443647647, "last_edit_date": 1443647647, "creation_date": 1443645881, "answer_id": 32875294, "question_id": 32875103, "link": "https://stackoverflow.com/questions/32875103/for-loop-skipping-getline-c/32875294#32875294", "title": "For-Loop Skipping getline C++", "body": "<p>May be you use 'std::cin>>someVar'  before  'setLocations' function call, which doesn't consume newline. To resolve, use this code segment before 'for' loop</p>\n\n<pre><code>std::cin.ignore(1, '\\n');\n</code></pre>\n"}], "owner": {"reputation": 879, "user_id": 4753072, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/1056861254343164/picture?type=large", "display_name": "Jacob Macallan", "link": "https://stackoverflow.com/users/4753072/jacob-macallan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "closed_date": 1443682785, "accepted_answer_id": 32875294, "answer_count": 1, "score": 1, "last_activity_date": 1443647647, "creation_date": 1443645140, "question_id": 32875103, "link": "https://stackoverflow.com/questions/32875103/for-loop-skipping-getline-c", "closed_reason": "Duplicate", "title": "For-Loop Skipping getline C++", "body": "<p>I'm having a problem where my for-loop skips over the getline function. If I replace it with <strong>std::cin</strong> then it works, so I think it's something related to what I inputted in getline.</p>\n\n<p>Here's my code.</p>\n\n<pre><code>void setLocations(int amount) {\n    locations = new std::string[amount];\n    locations[0] = startingLocation;\n\n    // starts at 1 because we want to skip first index. The amount is set at 2 by default, so the loop should iterate at least once.\n    for (int x = 1; x &lt; amount; x++)\n        std::getline(std::cin, locations[x]);    \n}\n</code></pre>\n"}, {"tags": ["c++", "c", "opengl"], "comments": [{"owner": {"reputation": 724, "user_id": 2540607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8f40627c8c656db70d39b2fb244f865?s=128&d=identicon&r=PG", "display_name": "wendelbsilva", "link": "https://stackoverflow.com/users/2540607/wendelbsilva"}, "edited": false, "score": 0, "creation_date": 1443644705, "post_id": 32874915, "comment_id": 53581414, "body": "You can use <a href=\"https://open.gl/depthstencils\" rel=\"nofollow noreferrer\">stencil buffer</a>."}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1443647017, "post_id": 32874915, "comment_id": 53582542, "body": "Or you can limit the drawable area using <code>glViewport</code>. But be aware that you will also have to adjust the projection matrix."}, {"owner": {"reputation": 1, "user_id": 5394832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddc37cfb05d83505a288eb2c37a0b428?s=128&d=identicon&r=PG&f=1", "display_name": "christoph", "link": "https://stackoverflow.com/users/5394832/christoph"}, "edited": false, "score": 0, "creation_date": 1443946200, "post_id": 32874915, "comment_id": 53688476, "body": "ok, thanks a lot  what would the best way to handle windows self made creation, where i need to move inside in x and y the point of view ?"}], "answers": [{"tags": [], "owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "is_accepted": false, "score": 1, "last_activity_date": 1443648297, "creation_date": 1443648297, "answer_id": 32875889, "question_id": 32874915, "link": "https://stackoverflow.com/questions/32874915/opengl-how-to-clip-a-2d-area-to-avoid-text-with-glutbitmap-to-be-printed-out-of/32875889#32875889", "title": "OpenGL: how to clip a 2D area to avoid text with GlutBitmap to be printed out of this area?", "body": "<p><a href=\"https://www.opengl.org/sdk/docs/man/html/glScissor.xhtml\" rel=\"nofollow\"><code>glScissor()</code></a> + <code>glEnable(GL_SCISSOR_TEST)</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 5394832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddc37cfb05d83505a288eb2c37a0b428?s=128&d=identicon&r=PG&f=1", "display_name": "christoph", "link": "https://stackoverflow.com/users/5394832/christoph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443659504, "creation_date": 1443644472, "last_edit_date": 1443659504, "question_id": 32874915, "link": "https://stackoverflow.com/questions/32874915/opengl-how-to-clip-a-2d-area-to-avoid-text-with-glutbitmap-to-be-printed-out-of", "title": "OpenGL: how to clip a 2D area to avoid text with GlutBitmap to be printed out of this area?", "body": "<p>How can I define in my app some areas where text can be printed, without overflowing out of them?</p>\n\n<pre><code>int printText(char *myChar, int color, double x, double y, double z)\n{\n    call_color(color);\n    int end_of_char=strlen(myChar);\n    glRasterPos3d(x,y,-1);\n    for(int i=0;i&lt;end_of_char;i++)\n    {\n        glutBitmapCharacter(GLUT_BITMAP_8_BY_13,myChar[i]);\n    }\n    return(0);\n}\n</code></pre>\n\n<p>sample:</p>\n\n<pre><code>void window_function()\n{\n    // printing things before on all screen\n    // define clipping aera\n    char tem[64];\n    sprintf(tem,\"mouse x: %.4f mouse y: %.4f\",mouse_ox,mouse_oy);\n    printText(tem,COL_LIGHT_GREY,x+0.005,y-0.085,1.0);\n    //re opening the clipping aera to the complete screen\n    //printing other stuff    \n}\n</code></pre>\n"}, {"tags": ["c++", "eclipse", "snappy"], "comments": [{"owner": {"reputation": 801, "user_id": 74739, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBpz9.jpg?s=128&g=1", "display_name": "zenzelezz", "link": "https://stackoverflow.com/users/74739/zenzelezz"}, "edited": false, "score": 0, "creation_date": 1443658197, "post_id": 32874883, "comment_id": 53586142, "body": "It seems to me like you may be meant to use your terminal and run <code>.&#47;autogen.sh</code> followed by <code>.&#47;configure</code> from the folder where you extracted Snappy."}, {"owner": {"reputation": 965, "user_id": 1686342, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/65fcd679f5d8aeef7c7b271341d5ff53?s=128&d=identicon&r=PG", "display_name": "user1686342", "link": "https://stackoverflow.com/users/1686342/user1686342"}, "reply_to_user": {"reputation": 801, "user_id": 74739, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gBpz9.jpg?s=128&g=1", "display_name": "zenzelezz", "link": "https://stackoverflow.com/users/74739/zenzelezz"}, "edited": false, "score": 0, "creation_date": 1443688181, "post_id": 32874883, "comment_id": 53596037, "body": "Ok, thanks. Although I followed some slightly different steps, it worked in the end. Do you know how I can now copy this into eclipse?"}], "owner": {"reputation": 965, "user_id": 1686342, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/65fcd679f5d8aeef7c7b271341d5ff53?s=128&d=identicon&r=PG", "display_name": "user1686342", "link": "https://stackoverflow.com/users/1686342/user1686342"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 278, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1443644336, "creation_date": 1443644336, "question_id": 32874883, "link": "https://stackoverflow.com/questions/32874883/how-to-import-google-snappy-to-eclipse-c-project", "title": "How to import google snappy to eclipse C++ project", "body": "<p>I have an eclipse C++ project and downloaded the google snappy project files (<a href=\"http://google.github.io/snappy/\" rel=\"nofollow\">http://google.github.io/snappy/</a>) over into eclipse. </p>\n\n<p>Once I attempt to compile, I receive an error stating: </p>\n\n<pre><code>  fatal error: snappy-stubs-public.h: No such file or directory...\n</code></pre>\n\n<p>This file doesn't exist, but when I go into the file snappy-stats-public.h.in it says that the file (missing) will be generated at configure time. Is there something I am missing to get this working?</p>\n"}, {"tags": ["c++", "combobox", "mfc"], "comments": [{"owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 0, "creation_date": 1443644775, "post_id": 32874848, "comment_id": 53581448, "body": "Your code looks incorrect.  &#39;Newing&#39; a class returns a pointer.  You have not declared &#39;dlg2&#39; as a pointer."}, {"owner": {"reputation": 13, "user_id": 5394751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f090487753c1bad18a3ff13ab21aecf6?s=128&d=identicon&r=PG&f=1", "display_name": "D. Kue", "link": "https://stackoverflow.com/users/5394751/d-kue"}, "reply_to_user": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 0, "creation_date": 1443645185, "post_id": 32874848, "comment_id": 53581658, "body": "Thank you for your reply. I changed the line to CSecond *dlg2 = new CSecond();  and dlg2-&gt; instead of dlg2. ... I still get the assertion error"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5394751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f090487753c1bad18a3ff13ab21aecf6?s=128&d=identicon&r=PG&f=1", "display_name": "D. Kue", "link": "https://stackoverflow.com/users/5394751/d-kue"}, "edited": false, "score": 0, "creation_date": 1443645771, "post_id": 32875145, "comment_id": 53581924, "body": "That did it. Thank you for your fast reply and the solution"}], "tags": [], "owner": {"reputation": 15257, "user_id": 648078, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9698c2f1c188de4ebf3c4496d9f07eb0?s=128&d=identicon&r=PG", "display_name": "Marius Bancila", "link": "https://stackoverflow.com/users/648078/marius-bancila"}, "is_accepted": true, "score": 1, "last_activity_date": 1443645314, "creation_date": 1443645314, "answer_id": 32875145, "question_id": 32874848, "link": "https://stackoverflow.com/questions/32874848/c-mfc-create-new-dialog-and-add-combobox-item/32875145#32875145", "title": "C++ MFC create new dialog and add Combobox item", "body": "<p>The problem is the second dialog is a modal dialog. The windows does not exist before the call to <code>DoModal()</code> and no longer exist after that function returns. Therefore calling <code>AddString</code> on the combobox is not all right, since the combo box does not exist at that time. </p>\n\n<p>The solution is to initialize the dialog with your desired values (like in the constructor for instance, or other methods) and then in <code>OnInitDialog()</code> use those values to setup the controls (including this call to <code>AddString</code> for the combobox).</p>\n"}], "owner": {"reputation": 13, "user_id": 5394751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f090487753c1bad18a3ff13ab21aecf6?s=128&d=identicon&r=PG&f=1", "display_name": "D. Kue", "link": "https://stackoverflow.com/users/5394751/d-kue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1729, "favorite_count": 0, "accepted_answer_id": 32875145, "answer_count": 1, "score": 1, "last_activity_date": 1443796463, "creation_date": 1443644244, "last_edit_date": 1443796463, "question_id": 32874848, "link": "https://stackoverflow.com/questions/32874848/c-mfc-create-new-dialog-and-add-combobox-item", "title": "C++ MFC create new dialog and add Combobox item", "body": "<p>I'm using MFC to build an application with two dialogs.\nWhen I press a button in the parent dialog a new window including a Combobox should apprear.</p>\n\n<p>I created a first dialog with a button \"New\". This button will open the second dialog.\nTherefor I created a second dialog with a Combobox. The Combobox has a linked variable <code>variableCombobox</code>. The second class is called <code>CSecond</code>.</p>\n\n<p>Before I do anything in the new dialog I want to add an item to the Combobox.\nIn the first dialog class I create the new window like this:</p>\n\n<pre><code>void CFirstDlg::OnBnClickedNew()\n{\n    CSecond dlg2 = new CSecond();\n    dlg2.variableCombobox.AddString(L\"test\");\n    dlg2.DoModal();\n}\n</code></pre>\n\n<p>The program crashes in the line I want to add the <code>test</code> string to the Combobox showing an assertion error.\nI noticed that the <code>dlg2</code> object is <code>null</code> but I don't know why.</p>\n\n<p>Can anyone tell me how to create a second window immediately adding an new item in the Combobox of the second window?</p>\n"}, {"tags": ["c++", "pointers", "struct"], "comments": [{"owner": {"reputation": 1213, "user_id": 612003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HuUtm.jpg?s=128&g=1", "display_name": "Matthew Moss", "link": "https://stackoverflow.com/users/612003/matthew-moss"}, "edited": false, "score": 0, "creation_date": 1443644282, "post_id": 32874820, "comment_id": 53581214, "body": "You are returning (via the pointer reference) a pointer to a stack object that is initialized when <code>initialize</code> begins and is destructed when <code>initialize</code> ends. Stale pointer is a bad pointer."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 6, "last_activity_date": 1443646207, "last_edit_date": 1443646207, "creation_date": 1443644264, "answer_id": 32874855, "question_id": 32874820, "link": "https://stackoverflow.com/questions/32874820/create-struct-object-in-a-function-and-pass-its-pointer/32874855#32874855", "title": "Create struct object in a function and pass its pointer", "body": "<p>You are trying to use the pointer to local variable outside of it's scope funciton. In your example, <code>myInfo</code> instance inside <code>initialize()</code> will be deleted after you exit the function, and the address you remembered will be pointing to random garbage memory. You should never use pointers to local variables outside of their scopes.</p>\n\n<p>How to fix the issue? The easiest way would be to ditch the pointer here, and instead pass your struct by non-const reference. Code would look like following:</p>\n\n<pre><code>void initialize(complex_struct&amp; info)\n{\n    // some other codes that modify the contents of myInfo\n    info.input_components = 3;\n}\n\nvoid myfunction()\n{\n    complex_struct info;\n    initialize(info);\n    std::cout &lt;&lt; info.input_components &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>There is one subtle flaw in the suggested code: effectively info is initialized twice. First time when it's instance is created (<code>complex_struct info</code>) and the second time inside initialize() function. It would not have any noticeable effect in this example (<code>info</code> is allocated on the stack, and I do not think it has any non-trivial constructor) but might be of bigger problem in other setting. The best way to initialize it in this case would be to return the struct from the initialzer function, and rely on copy-elision to optimize away all the copies. Illustration code:</p>\n\n<pre><code>complex_struct initialize()\n{\n    complex_struct info;\n    // some other codes that modify the contents of myInfo\n    info.input_components = 3;\n    return info;\n}\n\nvoid myfunction()\n{\n    complex_struct info = initialize();\n    std::cout &lt;&lt; info.input_components &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 311, "user_id": 932368, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/11f2061dae26489e2e0502ad1f9880aa?s=128&d=identicon&r=PG", "display_name": "Erencie", "link": "https://stackoverflow.com/users/932368/erencie"}, "edited": false, "score": 0, "creation_date": 1443645130, "post_id": 32874873, "comment_id": 53581627, "body": "Does the line of code &quot;complex_struct myinfo;&quot; involve time-consuming memory allocation itself? I am trying to keep the memory allocation activities within the initialize() function so as to perform an accurate performance measurement."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 311, "user_id": 932368, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/11f2061dae26489e2e0502ad1f9880aa?s=128&d=identicon&r=PG", "display_name": "Erencie", "link": "https://stackoverflow.com/users/932368/erencie"}, "edited": false, "score": 1, "creation_date": 1443645183, "post_id": 32874873, "comment_id": 53581657, "body": "I am guessing that you are asking whether that involves dynamic memory allocation. The answer to that is: no, it does not. That object is created using stack memory."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1443644797, "last_edit_date": 1443644797, "creation_date": 1443644312, "answer_id": 32874873, "question_id": 32874820, "link": "https://stackoverflow.com/questions/32874820/create-struct-object-in-a-function-and-pass-its-pointer/32874873#32874873", "title": "Create struct object in a function and pass its pointer", "body": "<p>You are returning a pointer to an object in the stack frame. That object gets deleted when the function returns. You have a dangling pointer in <code>myfunction</code>.</p>\n\n<p>Ways to solve the problem:</p>\n\n<p><strong>Allocate memory from heap</strong></p>\n\n<pre><code>static void initialize(complex_struct*&amp; infoPtr)\n{\n    infoPtr = new complex_struct ;\n    infoPtr-&gt;input_components = 3;\n}\n</code></pre>\n\n<p>Make sure to deallocate the memory in the calling function.</p>\n\n<p><strong>Use an object, instead of a pointer</strong></p>\n\n<pre><code>static void initialize(complex_struct&amp; info)\n{\n    info.input_components = 3;\n}\n</code></pre>\n\n<p>and change its usage:</p>\n\n<pre><code>static void myfunction()\n{\n    complex_struct info;\n    initialize(info);\n    std::cout &lt;&lt; info.input_components &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 311, "user_id": 932368, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/11f2061dae26489e2e0502ad1f9880aa?s=128&d=identicon&r=PG", "display_name": "Erencie", "link": "https://stackoverflow.com/users/932368/erencie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 32874873, "answer_count": 2, "score": 0, "last_activity_date": 1443646207, "creation_date": 1443644134, "last_edit_date": 1443644455, "question_id": 32874820, "link": "https://stackoverflow.com/questions/32874820/create-struct-object-in-a-function-and-pass-its-pointer", "title": "Create struct object in a function and pass its pointer", "body": "<p>I am trying to pass in a empty struct pointer into a function called \"initialize\" as an output parameter and then after the function finishes I could retrieve the object pointed by the struct pointer. Some unexpected behaviors occur and I don't quite understand.</p>\n\n<p>Below is my code:</p>\n\n<pre><code>static void initialize(complex_struct*&amp; infoPtr)\n{\n    complex_struct myInfo;\n    infoPtr = &amp;myInfo;\n    // some other codes that modify the contents of myInfo\n    infoPtr-&gt;input_components = 3;\n}\n\nstatic void myfunction()\n{\n    complex_struct* infoPtr = nullptr;\n    initialize(infoPtr);\n    std::cout &lt;&lt; infoPtr-&gt;input_components &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>The output of this is an arbitrary large integer number. But I was expecting an integer 3 is printed.</p>\n\n<p>Restrictions:\nI cannot modify complex_struct; it is a third_party struct that needs to be used. \nAlso, the reason why I need initialize() to be a separate function is that I am doing performance measurement on the memory allocation of complex_struct. So moving the first line of code in initialize() to myfunction() is not an ideal solution.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1443644053, "post_id": 32874740, "comment_id": 53581100, "body": "What&#39;s wrong with only including the headers that define the Engine-only classes in the Engine implementation files?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4921399"}, "edited": false, "score": 0, "creation_date": 1443644316, "post_id": 32874800, "comment_id": 53581226, "body": "I&#39;m including engine.h in my game class, and engine.h is including other classes that I want to hide from game."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 4, "creation_date": 1443644406, "post_id": 32874800, "comment_id": 53581269, "body": "so use forward declarations + include these classes only in the relevant engine CPP files."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4921399"}, "edited": false, "score": 0, "creation_date": 1443644560, "post_id": 32874800, "comment_id": 53581344, "body": "I forgot about including in CPP files. Thanks!"}], "tags": [], "owner": {"reputation": 1640, "user_id": 1324960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7ba74725fd85fe4541fc3fa38eef801?s=128&d=identicon&r=PG", "display_name": "Evers", "link": "https://stackoverflow.com/users/1324960/evers"}, "is_accepted": false, "score": 0, "last_activity_date": 1443644051, "creation_date": 1443644051, "answer_id": 32874800, "question_id": 32874740, "link": "https://stackoverflow.com/questions/32874740/hiding-class-visibility-c/32874800#32874800", "title": "Hiding class visibility C++", "body": "<p>If you don't include the headers then they won't be 'visible'. So only include the headers of the class you want to use.</p>\n"}, {"tags": [], "owner": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "is_accepted": true, "score": 4, "last_activity_date": 1443644973, "last_edit_date": 1443644973, "creation_date": 1443644483, "answer_id": 32874919, "question_id": 32874740, "link": "https://stackoverflow.com/questions/32874740/hiding-class-visibility-c/32874919#32874919", "title": "Hiding class visibility C++", "body": "<p>There are a lot of different approaches so here is one of them how to solve that.</p>\n\n<p><strong>Private constructor</strong></p>\n\n<p>By making the constructor of <code>Foo</code> private you can ensure that just the <code>friend</code> classes can allocate instances of the object. This approach complains already at compile-time. One disadvantage is that you have to list all classes that are allowed to create instances of <code>Foo</code>. In case we are talking about a few classes this would be a proper way to go with.</p>\n\n<pre><code>class Foo\n{\nprivate:\n  Foo() {}\n  friend class Engine;\n};\n\nclass Engine\n{\n    Foo f; // OK\n};\n\nclass ForeignClass\n{\n    Foo f; // FAILED to create\n};\n\nvoid main()\n{\n    Foo f; // FAILED to create\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "is_accepted": false, "score": 0, "last_activity_date": 1443670648, "creation_date": 1443670648, "answer_id": 32879031, "question_id": 32874740, "link": "https://stackoverflow.com/questions/32874740/hiding-class-visibility-c/32879031#32879031", "title": "Hiding class visibility C++", "body": "<p>When developing a Game Engine project there is considerable thought to its design process. One of the most important goals is to design this project to be as modular and reusable as possible. All of your Engine's components should be in their own project and all Game content should be in its own project as well. This way you can reuse the Game Engine project to create multiple games only by creating a new Game Project. This way you do not have to strip out Game Source Code from within the Engine itself and breaking the engine. This saves a lot of time, work and trouble in the future. Consider this Design Pattern. The project design flow that I am showing you below is using the OpenGL API.</p>\n\n<p><strong>Engine Project</strong>: A static lib that contains all the classes that are required for loading images, sounds, processing shaders, rendering objects to the screen and handling networking.</p>\n\n<ul>\n<li>Engine: This class will be abstract and it will create your window, setup up the game resolution and initialize either DirectX or OpenGL or any other Graphics API. Your Game class that is located in its own project will inherit from this.</li>\n<li>AssetStorage: Class that manages the memory of all assets.</li>\n<li>Batch: A class that creates a types of batches of triangle strips, fans etc. to be use to send vertices to the video card.</li>\n<li>BatchManager: Class that manages batches.</li>\n<li>CommonStructs: Header only file that contains structs &amp; enums that are commonaly used throughout multiple classes within the engine.</li>\n<li>ExceptionHandler: A Class that handles all exceptions.</li>\n<li>FontManager: A Class that manages fonts which are loaded from texture files.</li>\n<li>Logger: A class that will log either to a File or the Console when either an Error, Warning or an important message needs to be displayed or logged.</li>\n<li>Settings: A class that stores user settings, such as resolution, mouse sensitivity etc.</li>\n<li>Singleton: An abstract base class that is used to make sure specific classes can only exist once per running of application. Examples, any Manger Class Types, Engine::Game are a type of a Singleton object.</li>\n<li>Utility: A class that is not an object but contains many useful functions which are defined as being static. To use one of such you would include the *.h file and call any method as in <code>Utility::convertToUnsigned( string );</code></li>\n<li>Animation: An abstract class that all animation types will derive from.</li>\n<li>AnimationGuiMover: A type of animation responsible for moving Gui objects.</li>\n<li>AnimationManager: A manager class that manages all animations.</li>\n<li>AnimationTimer: A type of animation object that is based on a set timer.</li>\n<li>FileHandler: Base class that specific file handler types will derive from</li>\n<li>MkoFileReader: Reading in a user defined 2D or 3D object.</li>\n<li>TextFileReader: Reading in a text file.</li>\n<li>TextFileWriter: Writing to a Text file.</li>\n<li>TextureFileReader: Reading in texture file: png, tga, bmp, jpeg, etc.</li>\n<li>Array2d: An Mko object type.</li>\n<li>BaseMko: Base class for Mko objects.</li>\n<li>FontFile: A 2D image file to create Fonts.</li>\n<li>Image2D: Another Mko object type.</li>\n<li>Surface3d: Another Mko object type</li>\n<li>VisualMko: Any Mko object that has visual rendering associates such as a sprite or 3D model.</li>\n<li>ShaderManager: A manager class that handles all shaders.</li>\n<li>ShaderProgramSettings: Used to set OpenGL Shader Programs according to attributes and uniforms - relies heavily on templates.</li>\n<li>ShaderVariable: This can either be an attribute or uniform and relies heavily on templates.</li>\n<li>BlockProcess: Class used to block a process: Such that we only want 1 instance of the game running, so within windows it will create a mutex based off of the windows handle and application name, preventing multiple executions of this application.</li>\n<li>BlockThread: Used to create and destroy critical sections when working with multithreading.</li>\n<li>OpenglThread: A specific thread class used to work with OpenGL</li>\n<li>VolatileLocker: Similar to BlockThread but used with volatile data types.</li>\n<li><strong>Gui System:</strong> <em>This is a hierarchy of classes; some which are abstract base classes</em></li>\n<li>GuiCompositeElement: Abstract Base Class</li>\n<li>GuiElement: Abstract Base Class</li>\n<li>GuiImage: Inherits from GuiRenderable</li>\n<li>GuiImageElement: Does not inherit from any other class.</li>\n<li>GuiLabel: Inherits from GuiText</li>\n<li>GuiLayout: Abstract Base Class for All Layout Types - Inherits from GuiRenderable</li>\n<li>GuiLayoutAbsolute: Inherits from GuiLayout</li>\n<li>GuiLayoutGrid: Inherits from GuiLayout</li>\n<li>GuiLayoutSlices: Inherits from GuiLayout</li>\n<li>GuiLayoutStack: Inherits from GuiLayout</li>\n<li>GuiLoader: A class that reads in a gui text file parses the data and constructs all gui objects to reduce build times when changing data within the gui system.</li>\n<li>GuiRenderable: Inherits from GuiCompositeElement but is also an abstract base class</li>\n<li>GuiScreen: Can not be a child of another Gui Type But contains Gui children - inherits from GuiCompositeElement</li>\n<li>GuiText: Inherits from GuiRenderable</li>\n<li>GuiTextArea: Inherits from GuiText</li>\n<li><strong>More To Come:</strong> <em>Objects such as sound processing, networking etc.</em></li>\n</ul>\n\n<p><strong>Game Project</strong>: Contains game only content such as which assets to load, loading levels, how to handle user input from keyboard mouse etc., and anything that is specific to this game.</p>\n\n<ul>\n<li>main.cpp - Main Entry Point.</li>\n<li>Game: Game Class that starts the game loop, initializes all settings, constructs all necessary objects etc., and handles user input.</li>\n<li>GameState: Switching between playing, pausing, etc. A state machine.</li>\n<li>Property: Properties that are specific to this game.</li>\n<li><strong>More To Come</strong>: <em>This project is far from finished</em></li>\n</ul>\n\n<p>As you can see this is designed with the idea of the Game Engine being as generic and modular as possible in order to separate all Game Logic from Engine Logic. With this type of design process, all one needs to do to build a completely different game using the same existing engine is to remove the Game project and add a new one, store all of the assets in their appropriate directories and write the necessary code for the new game. This way one doesn't have to worry about diving into the Engine project hunting through thousands of lines of code trying to determine what is Engine code and what is Game Code with the high possibility of breaking the engine. This kind of design flow will save many future headaches, and precious time. </p>\n\n<p>As you can see the Engine class is responsible for the creation of the Window, Setting up the Graphics API, creating the Manager Objects and the ability to load in and render resources. With this Engine class being abstract a Game class must inherit from it and having pure virtual methods to handle keyboard &amp; mouse input makes certain that each game must implement how the user controls will be handled. This project has been in development for a couple of years and still more work needs to be done. This solution / game engine is considerably lite weight compared to anything that is of an industrial standard use engine and I am already expanding well over 100,000 lines of code and I haven't even mentioned anything about game logic, scoring, level progression, physics, nor AI.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4921399"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 1, "accepted_answer_id": 32874919, "answer_count": 3, "score": 2, "last_activity_date": 1501767160, "creation_date": 1443643811, "last_edit_date": 1501767160, "question_id": 32874740, "link": "https://stackoverflow.com/questions/32874740/hiding-class-visibility-c", "title": "Hiding class visibility C++", "body": "<p>I'm creating a game engine, I've got a lot of different classes.\nMy engine and game are in the same project.</p>\n\n<p>Some classes should be used only by my game engine, not by game.</p>\n\n<p>Can I hide some classes to make them accessible only for Engine classes?</p>\n\n<p>@Edit</p>\n\n<p>I'm including engine.h in my game class, and engine.h is including other classes that I want to hide from game.</p>\n"}, {"tags": ["c++", "string-search"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1443643944, "post_id": 32874700, "comment_id": 53581040, "body": "In order to speed up a search, you will need to change the data structure, such as sorting it or using a linked list or hash generator.  Sometimes, with small data, a brute force linear search is your fastest alternative.  Some processors have specialized functions for searching for a byte in memory."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1443644031, "post_id": 32874700, "comment_id": 53581079, "body": "If the data to be searched is huge, you may want to consider using multiple threads for searching.  One thorn with this technique is the overhead in setting up the threads.  Ideally, you could delegate thread processing to cores, such as cores in the GPU or processor."}, {"owner": {"reputation": 32308, "user_id": 20270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37335856df5e5e73d82bca5a805bd647?s=128&d=identicon&r=PG", "display_name": "Hasturkun", "link": "https://stackoverflow.com/users/20270/hasturkun"}, "edited": false, "score": 0, "creation_date": 1443644064, "post_id": 32874700, "comment_id": 53581104, "body": "Possibly see <a href=\"http://graphics.stanford.edu/~seander/bithacks.html##ValueInWord\" rel=\"nofollow noreferrer\">this page</a>"}, {"owner": {"reputation": 7675, "user_id": 2923952, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/71908bd318301d831c4b9eb6ca1c13a2?s=128&d=identicon&r=PG&f=1", "display_name": "Siler", "link": "https://stackoverflow.com/users/2923952/siler"}, "edited": false, "score": 0, "creation_date": 1443644477, "post_id": 32874700, "comment_id": 53581309, "body": "I&#39;m aware of all the issues with speeding up search - for huge data sets something like a suffix trie might be useful.  I&#39;m just specifically asking about optimized single-char searches that make use of reading a word at a time.  I&#39;d just like to understand how the actual comparisons are done - what sort of bitwise logic is done to speed up the search?"}, {"owner": {"reputation": 7675, "user_id": 2923952, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/71908bd318301d831c4b9eb6ca1c13a2?s=128&d=identicon&r=PG&f=1", "display_name": "Siler", "link": "https://stackoverflow.com/users/2923952/siler"}, "reply_to_user": {"reputation": 32308, "user_id": 20270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37335856df5e5e73d82bca5a805bd647?s=128&d=identicon&r=PG", "display_name": "Hasturkun", "link": "https://stackoverflow.com/users/20270/hasturkun"}, "edited": false, "score": 0, "creation_date": 1443644545, "post_id": 32874700, "comment_id": 53581335, "body": "@Hasturkun - thanks that&#39;s exactly what I was looking for.  If you post it as an answer I will accept it"}], "answers": [{"tags": [], "owner": {"reputation": 32308, "user_id": 20270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37335856df5e5e73d82bca5a805bd647?s=128&d=identicon&r=PG", "display_name": "Hasturkun", "link": "https://stackoverflow.com/users/20270/hasturkun"}, "is_accepted": true, "score": 2, "last_activity_date": 1443649221, "creation_date": 1443649221, "answer_id": 32876070, "question_id": 32874700, "link": "https://stackoverflow.com/questions/32874700/optimizing-string-search-for-a-single-byte/32876070#32876070", "title": "optimizing string search for a single byte", "body": "<p>You can use <a href=\"http://graphics.stanford.edu/~seander/bithacks.html##ValueInWord\" rel=\"nofollow\">this snippet from Bit Twiddling Hacks</a>:</p>\n\n<pre><code>#define haszero(v) (((v) - 0x01010101UL) &amp; ~(v) &amp; 0x80808080UL)\n#define hasvalue(x,n) \\\n(haszero((x) ^ (~0UL/255 * (n))))\n</code></pre>\n\n<p>It effectively XORs each byte with the character to be tested, then determines if any byte is now zero.</p>\n\n<p>At this point you can get the location of the matching byte (or bytes) from the return value of the expression, e.g. the value will be 0x00000080 if the least significant byte matches the value.</p>\n"}], "owner": {"reputation": 7675, "user_id": 2923952, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/71908bd318301d831c4b9eb6ca1c13a2?s=128&d=identicon&r=PG&f=1", "display_name": "Siler", "link": "https://stackoverflow.com/users/2923952/siler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 32876070, "answer_count": 1, "score": 1, "last_activity_date": 1443649221, "creation_date": 1443643628, "question_id": 32874700, "link": "https://stackoverflow.com/questions/32874700/optimizing-string-search-for-a-single-byte", "title": "optimizing string search for a single byte", "body": "<p>In general, string search algorithms (like Boyer-Moore) are optimized for cases where the <em>search string</em> is long-ish.  That is, Boyer-Moore is great because by lining up the search string with our text, we can skip <code>N = len(search string)</code> characters if the end of the search string doesn't match the text.</p>\n\n<p>But what if our search string is really short?  Like a single byte or character?  In this case, Boyer-Moore doesn't help much.</p>\n\n<p>So, what are some alternative algorithms for speeding up searching?</p>\n\n<p>I know that many optimized library search routines (like <code>memchr</code> in C), take the strategy of reading the input string word by word, rather than char by char.  So on a 64-bit machine, 8 bytes can be examined at once, rather than a single byte.</p>\n\n<p>I'd like to know how these optimized string/byte searches actually work.  How does the actual comparison work then?  I know it obviously must involve bit masking - but I don't see how performing all the bit masking is any better than simply search character by character.</p>\n\n<p>So, suppose our search char is <code>0xFF</code>.  Ignoring alignment issues, let's say we have some input buffer: <code>void* buf</code>.  We can read it word by word by saying:</p>\n\n<pre><code>const unsigned char search_char = 0xFF;\nunsigned char* bufptr = static_cast&lt;unsigned char*&gt;(buf);\nunsigned char* bufend = bufptr + BUF_SIZE;\n\nwhile (bufptr != bufend)\n{\n   // Ignore alignment concerns for now, assume BUF_SIZE % sizeof(uintptr_t) == 0\n   //\n   std::uinptr_t next_word = *reinterpret_cast&lt;std::uintptr_t*&gt;(bufptr);\n\n   // ... but how do we compare next_word with our search char?\n\n   bufptr += sizeof(std::uintptr_t);\n}\n</code></pre>\n\n<p>I also realize that the above code is not strictly portable, because <code>std::uintptr_t</code> isn't guaranteed to actually be word size.  But let's assume for the sake of this question that <code>std::uinptr_t</code> is equal to the processor word size.  (An actual implementation would likely need platform-specific macros to get the actual word-size)</p>\n\n<p>So, how do we actually check if the byte <code>0xFF</code> occurs anywhere in the value of <code>next_word</code>?</p>\n\n<p>We can use <code>OR</code> operations of course, but it seems we'd still need to perform a lot of OR'ing and bit shifting to check each byte of <code>next_word</code>, at which point it becomes questionable whether this optimization is actually any better than simply scanning character by character.</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1443644351, "last_edit_date": 1443644351, "creation_date": 1443643315, "answer_id": 32874624, "question_id": 32874592, "link": "https://stackoverflow.com/questions/32874592/destructor-as-private-throws-compile-time-error/32874624#32874624", "title": "Destructor as private throws compile time error", "body": "<p>The compiler has to generate code to invoke the destructor where the object goes out of scope.</p>\n\n<p>Visibility is enforced at compile time, so if the destructor isn't visible where the compiler needs to generate code to invoke it, the compiler will normally issue an error message and reject the code.</p>\n\n<p>In theory, the standard only requires a compiler to issue a \"diagnostic\" (with little definition of what that constitutes) so a compiler could, theoretically, be set up to print out a warning of some sort, and allow compilation to complete (and generate code to invoke the destructor where the object goes out of scope, even though the destructor isn't visible, or possibly to throw an exception, or just about anything else it wants to). In reality, I can't quite imagine a compiler doing anything like that (making a dtor private is usually done specifically to <em>prevent</em> an object from being instantiated), and I don't know of any real compiler that's ever worked that way.</p>\n"}, {"tags": [], "owner": {"reputation": 41100, "user_id": 1938163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WV0Fi.png?s=128&g=1", "display_name": "Marco A.", "link": "https://stackoverflow.com/users/1938163/marco-a"}, "is_accepted": true, "score": 4, "last_activity_date": 1443643643, "creation_date": 1443643643, "answer_id": 32874704, "question_id": 32874592, "link": "https://stackoverflow.com/questions/32874592/destructor-as-private-throws-compile-time-error/32874704#32874704", "title": "Destructor as private throws compile time error", "body": "<p>Visibility is a compile-time feature: you check for a set of constraints at compile-time to ensure run-time safety (to a certain degree). When a program is compiled into a release binary all information regarding private/public stuff is lost. Those constructs help you writing good, safe, maintainable code but are not intended as runtime error checkers.</p>\n"}], "owner": {"reputation": 1463, "user_id": 3083195, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/862fcf01c7837e10629ed86910f46029?s=128&d=identicon&r=PG&f=1", "display_name": "anurag86", "link": "https://stackoverflow.com/users/3083195/anurag86"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 1, "accepted_answer_id": 32874704, "answer_count": 2, "score": 1, "last_activity_date": 1443644351, "creation_date": 1443643165, "question_id": 32874592, "link": "https://stackoverflow.com/questions/32874592/destructor-as-private-throws-compile-time-error", "title": "Destructor as private throws compile time error", "body": "<p>If i create an object on stack, its constructor would get called. Its destructor would be called during the end of execution of main or when it goes out of scope etc. But <em>calling of destructor when an object goes out of scope</em> happens during Runtime. Then why is it a compile time error if i make the destructor private?\nMy expectation according to my understanding is that there should be no compile time error and during the execution the object should get created on stack without any error, however as the object goes out of scope there should be some run time error(or crash or whatever). Why is it not the behavior?</p>\n"}, {"tags": ["c++", "segmentation-fault"], "comments": [{"owner": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "edited": false, "score": 0, "creation_date": 1443644604, "post_id": 32874591, "comment_id": 53581369, "body": "I don&#39;t see the method <code>getTargets()</code> anywhere defined."}, {"owner": {"reputation": 11, "user_id": 2671851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3590453cf5385ebfda4744cfad1dc189?s=128&d=identicon&r=PG", "display_name": "meysamabl", "link": "https://stackoverflow.com/users/2671851/meysamabl"}, "reply_to_user": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "edited": false, "score": 0, "creation_date": 1443657548, "post_id": 32874591, "comment_id": 53585997, "body": "I didn&#39;t put it here for code brevity. It is actually there inside the Alpha.h class as setter and getter."}, {"owner": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "edited": false, "score": 0, "creation_date": 1443692777, "post_id": 32874591, "comment_id": 53598931, "body": "Since it is working with @sergej&#39;s code, I guess <code>getTargets()</code> returns a copy instead of a reference. This is why I asked for the method definition."}, {"owner": {"reputation": 11, "user_id": 2671851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3590453cf5385ebfda4744cfad1dc189?s=128&d=identicon&r=PG", "display_name": "meysamabl", "link": "https://stackoverflow.com/users/2671851/meysamabl"}, "reply_to_user": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "edited": false, "score": 0, "creation_date": 1443716476, "post_id": 32874591, "comment_id": 53614287, "body": "I suppose I was returning a copy. I changed the code from list&lt;Alpha*&gt; getTargets() const { return targets; } to list&lt;Alpha*&gt;&amp; getTargets() { return targets;} . Now I realized what was my problem. Thanks you."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 2671851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3590453cf5385ebfda4744cfad1dc189?s=128&d=identicon&r=PG", "display_name": "meysamabl", "link": "https://stackoverflow.com/users/2671851/meysamabl"}, "edited": false, "score": 0, "creation_date": 1443657682, "post_id": 32875479, "comment_id": 53586030, "body": "It is working now, But I still do not understand why it was not working when I was trying to iterate through the local targets without copying into new list&lt;Alpha*&gt; ?"}], "tags": [], "owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "is_accepted": true, "score": 1, "last_activity_date": 1443774288, "last_edit_date": 1443774288, "creation_date": 1443646631, "answer_id": 32875479, "question_id": 32874591, "link": "https://stackoverflow.com/questions/32874591/getting-error-segmentation-fault-core-dumped-process-returned-139-0x8b/32875479#32875479", "title": "getting error segmentation fault (core dumped) process returned 139 (0x8B)", "body": "<p>Does this what you expect?</p>\n\n<pre><code>it = teamA.begin();\nlist&lt;Alpha*&gt; targets = it-&gt;getTargets(); // local targets list copy! \nlist&lt;Alpha*&gt;::iterator itr = targets.begin();\n\n/// now trying to access it\nwhile (itr != targets.end())\n{\n    (*itr)-&gt;display();\n    itr++;\n}\n</code></pre>\n\n<p>The problem in your code:</p>\n\n<pre><code>list&lt;Alpha*&gt;::iterator itr = it-&gt;getTargets().begin();\n//                                      ^       ^\n//                                      |       |\n// returns a temporary list copy -------+       |\n// returns an iterator to the temp. list copy --+\n</code></pre>\n\n<p>Now the temporary list is destroyed.</p>\n\n<pre><code>    (*itr)-&gt;display();\n    itr++;\n//   ^\n//   |\n//   +--- ERROR: iterator to a list that has been destroyed\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 2671851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3590453cf5385ebfda4744cfad1dc189?s=128&d=identicon&r=PG", "display_name": "meysamabl", "link": "https://stackoverflow.com/users/2671851/meysamabl"}, "edited": false, "score": 0, "creation_date": 1443737104, "post_id": 32893373, "comment_id": 53624321, "body": "Thank you for your thorough  explanation."}], "tags": [], "owner": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "is_accepted": false, "score": 1, "last_activity_date": 1443720352, "creation_date": 1443720352, "answer_id": 32893373, "question_id": 32874591, "link": "https://stackoverflow.com/questions/32874591/getting-error-segmentation-fault-core-dumped-process-returned-139-0x8b/32893373#32893373", "title": "getting error segmentation fault (core dumped) process returned 139 (0x8B)", "body": "<p>As from the comments, the method <code>getTargets()</code> was defined as </p>\n\n<pre><code>list&lt;Alpha*&gt; getTargets() const\n{\n    return targets;\n}\n</code></pre>\n\n<p>This returns a copy, which was used in </p>\n\n<pre><code>list&lt;Alpha*&gt;::iterator itr = it-&gt;getTargets().begin();\n</code></pre>\n\n<p>and </p>\n\n<pre><code>while(itr != it-&gt;getTargets().end()) {\n</code></pre>\n\n<p>as a temporary object, which will be destroyed immediately. This means <code>itr</code> is an iterator to a <code>list</code>, which no longer exists. When trying to access the object through the iterator, the program crashes.</p>\n\n<p>When you copy the temporary list into a local variable, as @sergej did, or when you return a reference to the object's member, the list exists throughout the loop and the iterator points to a valid list.</p>\n"}], "owner": {"reputation": 11, "user_id": 2671851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3590453cf5385ebfda4744cfad1dc189?s=128&d=identicon&r=PG", "display_name": "meysamabl", "link": "https://stackoverflow.com/users/2671851/meysamabl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 798, "favorite_count": 0, "accepted_answer_id": 32875479, "answer_count": 2, "score": -1, "last_activity_date": 1443774288, "creation_date": 1443643158, "question_id": 32874591, "link": "https://stackoverflow.com/questions/32874591/getting-error-segmentation-fault-core-dumped-process-returned-139-0x8b", "title": "getting error segmentation fault (core dumped) process returned 139 (0x8B)", "body": "<p>I have a list of pointer of the same class inside my class. but when I want to access the data, I get error.what should I do to resolve my problem. I am newbie to c++ and I can not figure it out the problem. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;list&gt;\nusing namespace std;\nclass Alpha\n{\n    public:\n\n    Alpha() {}\n\n    Alpha(int val) : i(val) {}\n\n    virtual ~Alpha() {}\n\n    void addTarget(Alpha* alpha)\n    {\n        targets.push_back(alpha);\n    }\n\n    void display() {\n        cout &lt;&lt; i &lt;&lt; \" -------------\";\n    }\n\n    private:\n    int i; //!&lt; Member variable \"i\"\n    list&lt;Alpha*&gt; targets;\n\n  };\n</code></pre>\n\n<p>and here is my main function: </p>\n\n<pre><code>  #include &lt;iostream&gt;\n  #include &lt;list&gt;\n  #include \"Alpha.h\"\n  using namespace std;\n\n  int main()\n  {\n    list&lt;Alpha&gt; teamA, teamB;\n\n    Alpha* alptr;\n    for(int i = 0; i &lt; 3; i++)\n    {\n    alptr = new Alpha;\n    teamA.push_back(*alptr);\n    alptr = nullptr;\n    }\n\n   for(int i = 0; i &lt; 3; i++)\n   {\n    alptr = new Alpha;\n    teamB.push_back(*alptr);\n    alptr = nullptr;\n   }\n\n   list&lt;Alpha&gt;::iterator it = teamA.begin();\n\n   for(;it != teamA.end(); it++)\n   {\n    for(list&lt;Alpha&gt;::iterator itr = teamB.begin(); \n                                  itr != teamB.end();itr++)\n    {\n        it-&gt;addTarget(&amp;(*itr));\n    }\n}\nit = teamA.begin();\nlist&lt;Alpha*&gt;::iterator itr = it-&gt;getTargets().begin();\n/// now trying to access it\nwhile(itr != it-&gt;getTargets().end())\n{\n    (*itr)-&gt;display();\n    itr++;\n}\n\nreturn 0;\n}\n</code></pre>\n\n<p>And here is my output: </p>\n\n<pre><code>segmentation fault (core dumped) process returned 139 (0x8B)\n</code></pre>\n"}, {"tags": ["c++", "pointers", "linked-list"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1443643292, "post_id": 32874570, "comment_id": 53580727, "body": "use a <code>std::shared_ptr</code> ..."}, {"owner": {"reputation": 3486, "user_id": 169658, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1d33e1e7435098d967269707961a090b?s=128&d=identicon&r=PG", "display_name": "Colin", "link": "https://stackoverflow.com/users/169658/colin"}, "edited": false, "score": 3, "creation_date": 1443643396, "post_id": 32874570, "comment_id": 53580772, "body": "You are deleting the LinkedListNode, but is that destructor deleting the weapon?"}, {"owner": {"reputation": 558, "user_id": 4148676, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh6.googleusercontent.com/-sbHqmzM75wA/AAAAAAAAAAI/AAAAAAAAANQ/aLgd4DZAwqk/photo.jpg?sz=128", "display_name": "unknownSPY", "link": "https://stackoverflow.com/users/4148676/unknownspy"}, "reply_to_user": {"reputation": 3486, "user_id": 169658, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1d33e1e7435098d967269707961a090b?s=128&d=identicon&r=PG", "display_name": "Colin", "link": "https://stackoverflow.com/users/169658/colin"}, "edited": false, "score": 0, "creation_date": 1443643740, "post_id": 32874570, "comment_id": 53580936, "body": "@Colin Ah so is Clear() just deleting all the nodes pointers in the list rather than actually calling delete on what each node points to?"}, {"owner": {"reputation": 733, "user_id": 101039, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/88oCA.png?s=128&g=1", "display_name": "JPhi1618", "link": "https://stackoverflow.com/users/101039/jphi1618"}, "edited": false, "score": 0, "creation_date": 1443646321, "post_id": 32874570, "comment_id": 53582208, "body": "Clear is deleting the node, but a node isn&#39;t a weapon right?  You need to delete the weapon the node points to, and then delete the node.  But in reality, using something like <code>shared_ptr</code> would be best so the delete happens automatically. when all the pointers to an object are gone."}, {"owner": {"reputation": 3486, "user_id": 169658, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1d33e1e7435098d967269707961a090b?s=128&d=identicon&r=PG", "display_name": "Colin", "link": "https://stackoverflow.com/users/169658/colin"}, "edited": false, "score": 0, "creation_date": 1443650771, "post_id": 32874570, "comment_id": 53584107, "body": "@unknownSPY Correct. In the destructor for LinkedListNode you need to find a way to delete the thing its containing. Also: you should probably make ~BaseCharacter virtual."}, {"owner": {"reputation": 558, "user_id": 4148676, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh6.googleusercontent.com/-sbHqmzM75wA/AAAAAAAAAAI/AAAAAAAAANQ/aLgd4DZAwqk/photo.jpg?sz=128", "display_name": "unknownSPY", "link": "https://stackoverflow.com/users/4148676/unknownspy"}, "reply_to_user": {"reputation": 3486, "user_id": 169658, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1d33e1e7435098d967269707961a090b?s=128&d=identicon&r=PG", "display_name": "Colin", "link": "https://stackoverflow.com/users/169658/colin"}, "edited": false, "score": 0, "creation_date": 1443695269, "post_id": 32874570, "comment_id": 53600371, "body": "@Colin  Thanks.  I guess I can just loop through the list calling delete on each Weapon in the list (which would clean up the actual objects in the list) before calling Clear()?"}], "answers": [{"comments": [{"owner": {"reputation": 558, "user_id": 4148676, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh6.googleusercontent.com/-sbHqmzM75wA/AAAAAAAAAAI/AAAAAAAAANQ/aLgd4DZAwqk/photo.jpg?sz=128", "display_name": "unknownSPY", "link": "https://stackoverflow.com/users/4148676/unknownspy"}, "edited": false, "score": 0, "creation_date": 1443695142, "post_id": 32875406, "comment_id": 53600296, "body": "Hi, sorry maybe I wasn&#39;t clear in my slimmed down example.  the List of weapons is not a global list so no two characters would have a pointer to the same weapon.  Each character has their own list.  and as you correctly said.  Some one has to <code>own</code> the weapon.  currently its the character.  I guess I want a method that actually deletes all the Weapons in the list rather than just the nodes of the list"}, {"owner": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "reply_to_user": {"reputation": 558, "user_id": 4148676, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh6.googleusercontent.com/-sbHqmzM75wA/AAAAAAAAAAI/AAAAAAAAANQ/aLgd4DZAwqk/photo.jpg?sz=128", "display_name": "unknownSPY", "link": "https://stackoverflow.com/users/4148676/unknownspy"}, "edited": false, "score": 0, "creation_date": 1443695831, "post_id": 32875406, "comment_id": 53600692, "body": "Yes, that makes sense. So in your example you just delete the instance of <code>LinkedListNode</code> but the weapon seems to remain in memory. If your character owns the weapon you should browse the list and delete the weapon before you clear the list (e.g. via <code>delete node-&gt;data;</code> or however you can access it). If your linked-list actually owns the weapon you should delete the object in <code>DoubleLinkedList&lt;C&gt;::Clear()</code>."}, {"owner": {"reputation": 558, "user_id": 4148676, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh6.googleusercontent.com/-sbHqmzM75wA/AAAAAAAAAAI/AAAAAAAAANQ/aLgd4DZAwqk/photo.jpg?sz=128", "display_name": "unknownSPY", "link": "https://stackoverflow.com/users/4148676/unknownspy"}, "edited": false, "score": 0, "creation_date": 1443699764, "post_id": 32875406, "comment_id": 53603038, "body": "OK, so I think possibly the best solution is to first call something like <code>delete node-&gt;Data</code> and then call the <code>DoubleLinkedList&lt;C&gt;::Remove()</code> function on that node which removes (tidily) the node from the list then deletes the node?"}, {"owner": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "reply_to_user": {"reputation": 558, "user_id": 4148676, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh6.googleusercontent.com/-sbHqmzM75wA/AAAAAAAAAAI/AAAAAAAAANQ/aLgd4DZAwqk/photo.jpg?sz=128", "display_name": "unknownSPY", "link": "https://stackoverflow.com/users/4148676/unknownspy"}, "edited": false, "score": 0, "creation_date": 1443699909, "post_id": 32875406, "comment_id": 53603138, "body": "Yes, that would be one way. It depends if you want that <code>DoubleLinkedList</code> owns the objects or if just acts as a list."}, {"owner": {"reputation": 558, "user_id": 4148676, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh6.googleusercontent.com/-sbHqmzM75wA/AAAAAAAAAAI/AAAAAAAAANQ/aLgd4DZAwqk/photo.jpg?sz=128", "display_name": "unknownSPY", "link": "https://stackoverflow.com/users/4148676/unknownspy"}, "edited": false, "score": 0, "creation_date": 1443700733, "post_id": 32875406, "comment_id": 53603648, "body": "The only problem I can for see with having the list own the objects is if a list was created iwth objects that aren&#39;t created with <code>new</code> if would fail when trying to delete something that wasn&#39;t an object?  or is that wrong"}], "tags": [], "owner": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "is_accepted": false, "score": 0, "last_activity_date": 1443646318, "creation_date": 1443646318, "answer_id": 32875406, "question_id": 32874570, "link": "https://stackoverflow.com/questions/32874570/deleting-a-pointer-in-a-list-causing-memory-leak/32875406#32875406", "title": "Deleting a pointer in a list causing memory leak", "body": "<p>Are you really having a memory-<em>leak</em> or <em>corruption</em>? I could think of a <em>corruption</em> because you delete the weapon and in case a second player has the same pointer to the weapon <code>DoubleLinkedList&lt;C&gt;::Clear</code> tries to free the memory again of the same object.</p>\n\n<p>Removing <code>delete</code> might work here but that's not the final solution. Someone has to <code>own</code> the actual weapon - probably the game-engine which creates the asset and assigns them to the individual characters. But why do all characters share the same instance? Shouldn't each player own his own copy of the weapon? I would expect the weapon has an individual ammo count and this shouldn't be shared :)</p>\n\n<p>Therefore each player should own his own weapon.</p>\n"}], "owner": {"reputation": 558, "user_id": 4148676, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh6.googleusercontent.com/-sbHqmzM75wA/AAAAAAAAAAI/AAAAAAAAANQ/aLgd4DZAwqk/photo.jpg?sz=128", "display_name": "unknownSPY", "link": "https://stackoverflow.com/users/4148676/unknownspy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443646318, "creation_date": 1443643091, "question_id": 32874570, "link": "https://stackoverflow.com/questions/32874570/deleting-a-pointer-in-a-list-causing-memory-leak", "title": "Deleting a pointer in a list causing memory leak", "body": "<p>So I have a program (a game but the question in c++ question) which has a Character class.  This is simplified code of the classes/methods in question</p>\n\n<p>eg</p>\n\n<p>BaseCharacter.h</p>\n\n<pre><code>class BaseCharacter\n{\n    BaseCharacter();\n    ~BaseCharacter();\n\n    Weapon* m_currentWeapon;\n    DoubleLinkedList&lt;Weapon*&gt; m_weaponsHeld;\n}\n</code></pre>\n\n<p>BaseCharacter.cpp</p>\n\n<pre><code>BaseCharacter::BaseCharacter()\n{\n    m_currentWeapon = new Weapon();\n    m_weaponsHeld.Insert(m_currentWeapon);\n}\nBaseCharacter::~BaseCharacter()\n{\n    m_weaponsHeld.Clear();\n}\n</code></pre>\n\n<p>The idea of this class is that every character starts with one starting weapon (which is added to the list of weapons) and also can hold mulitple weapons (which when created are stored through the List)</p>\n\n<p>The List functions for Insert and Clear are like this</p>\n\n<pre><code>template &lt;class C&gt;\ninline void\nDoubleLinkedList&lt;C&gt;::Insert(const C &amp;Data)\n{\n    LinkedListNode&lt;C&gt;* node = new LinkedListNode&lt;C&gt;(Data);\n\n    if(m_tail)\n    {\n        m_tail-&gt;SetNext(node);\n        node-&gt;SetPrevious(m_tail);\n        m_tail = node;\n    }\n    else\n    {\n        m_head = node;\n        m_tail = node;\n    }\n  listSize++;\n}\n\n\ntemplate &lt;class C&gt;\ninline void\nDoubleLinkedList&lt;C&gt;::Clear()\n{\n    LinkedListNode&lt;C&gt;* entry = m_head;\n\n    while (entry)\n    {\n        LinkedListNode&lt;C&gt;* release = entry;\n        entry = entry-&gt;GetNext();\n        delete release;\n    }\n\n    listSize = 0;\n    m_head = 0;\n    m_tail = 0;\n}\n</code></pre>\n\n<p>The issue I am having is that when the BaseCharacters class is deleted, the destructor is called and a memory leak occurs.</p>\n\n<p>I don't really understand (well I have a small idea - think I am deleting a pointer to a pointer when I clear the list rather than the object stored in the list) why the Weapon classes destructor isn't called when the lists Clear() function is called in the BaseCharacters destructor.</p>\n\n<p>Can someone show me the logic error in cleaning up the list and weapons of the character?</p>\n"}, {"tags": ["c++", "binary-tree", "binary-search-tree", "binary-search"], "comments": [{"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 2, "creation_date": 1443643164, "post_id": 32874550, "comment_id": 53580676, "body": "Your first step, before posting here, would be to run this in your debugger."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1443643482, "post_id": 32874550, "comment_id": 53580815, "body": "Why is your <code>add</code> function returning a pointer?  I would expect that an <code>add</code> or <code>insert</code> function adds a node to the list; no return values expected.  Need more code to clarify how the tree is implemented."}, {"owner": {"reputation": 562, "user_id": 3210987, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e6c01edf1fca851f14d376eb9d2c15d8?s=128&d=identicon&r=PG&f=1", "display_name": "Alex_adl04", "link": "https://stackoverflow.com/users/3210987/alex-adl04"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1443643487, "post_id": 32874550, "comment_id": 53580819, "body": "@KevinDTimm that would be wonderful if it were not for the fact that I do not know anything about debugging, If I knew how to I would be glad to implement said solution and would not have asked in here, but I currently do not have the time and need to come up with a quick solution."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1443643716, "post_id": 32874550, "comment_id": 53580926, "body": "@Alex_adl04: Consider your program the first step in learning a debugger.  If you need a quick solution, use <code>std::map</code>; or a external library, as they have already been debugged, saving you precious development time that can be spent learning a debugger."}, {"owner": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "edited": false, "score": 0, "creation_date": 1443643744, "post_id": 32874550, "comment_id": 53580938, "body": "To solve this issue you should post the declaration of <code>myBinaryTree</code> including all assignments. I wouldn&#39;t be surprised if the members of <code>myBinaryTree</code> are not initialized properly. @Alex_adl04: You use C++, not C, so I highly recommend to initialize the members of your struct in the constructor. <b>I highly recommend you to learn how to use a debugger! You can solve such issue normally in less than 20 secondson your own for such code.</b>"}], "answers": [{"comments": [{"owner": {"reputation": 562, "user_id": 3210987, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e6c01edf1fca851f14d376eb9d2c15d8?s=128&d=identicon&r=PG&f=1", "display_name": "Alex_adl04", "link": "https://stackoverflow.com/users/3210987/alex-adl04"}, "edited": false, "score": 0, "creation_date": 1443681362, "post_id": 32874790, "comment_id": 53592256, "body": "got it! I greatly appreciate the effort in helping me solve this issue. I was under the assumption that I could call the function and do not have to pass it as an assignment being that it was using pointers, thus thinking that that itself would suffice to work on the node. Easy fix and it works great now, thank you."}], "tags": [], "owner": {"reputation": 2588, "user_id": 2162377, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/F8rp3.png?s=128&g=1", "display_name": "Jakube", "link": "https://stackoverflow.com/users/2162377/jakube"}, "is_accepted": true, "score": 1, "last_activity_date": 1443644004, "creation_date": 1443644004, "answer_id": 32874790, "question_id": 32874550, "link": "https://stackoverflow.com/questions/32874550/binary-tree-search-not-returning-the-expected-value/32874790#32874790", "title": "Binary Tree Search not returning the expected value", "body": "<p>The function <code>add</code> returns a pointer to the root of the binary tree. Normally this is just the same pointer as the function parameter <code>p_tree</code>, since the root of a binary tree never changes. </p>\n\n<p>But in the case of an empty tree (<code>p_tree == NULL</code>), than <code>add</code> will return a pointer to the newly created tree-root. So you have to update your variable <code>myBinaryTree</code>. After executing </p>\n\n<pre><code>node* myBinaryTree = NULL;\nadd(myBinaryTree,1);\n</code></pre>\n\n<p>the variable <code>myBinaryTree</code> has still the value <code>NULL</code>. You haven't updated it to the root of the tree. The following code works: </p>\n\n<pre><code>node* myBinaryTree = NULL;\nmyBinaryTree = add(myBinaryTree,1);\ncout &lt;&lt; \"Testing to see if it is there\" &lt;&lt; endl;\nif (search(myBinaryTree,1) == NULL) {\n    cout &lt;&lt; \"Node not found\" &lt;&lt; endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 562, "user_id": 3210987, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e6c01edf1fca851f14d376eb9d2c15d8?s=128&d=identicon&r=PG&f=1", "display_name": "Alex_adl04", "link": "https://stackoverflow.com/users/3210987/alex-adl04"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 32874790, "answer_count": 1, "score": -3, "last_activity_date": 1443644004, "creation_date": 1443643001, "question_id": 32874550, "link": "https://stackoverflow.com/questions/32874550/binary-tree-search-not-returning-the-expected-value", "title": "Binary Tree Search not returning the expected value", "body": "<p>If I have a structure:</p>\n\n<pre><code>struct node{\n  int key_value;\n  node * p_left;\n  node * p_right;\n};\n</code></pre>\n\n<p>And an add function:</p>\n\n<pre><code>node* add(node * p_tree, int key) {\n  //--The base case of the recursive function will be placed in here\n  //--since binary trees are recursive in nature and linked data structures\n  //--are as a whole in terms of space and memory, the recursive function will\n  //--suffice for most cases involving binary trees.\n  //--In this case, if the given parameter is null, we create the tree\n  //--by allocating the necessary memory space\n  if (p_tree == NULL) {\n    node * pnew_tree = new node;\n    pnew_tree-&gt;p_left = NULL;\n    pnew_tree-&gt;p_right = NULL;\n    pnew_tree-&gt;key_value = key;\n    cout &lt;&lt; \"Added node: \" &lt;&lt; pnew_tree-&gt;key_value &lt;&lt; endl;\n    return pnew_tree;\n  }// end of base case\n\n  //--Depending of the value of the node, we determine if we will add to the left side or the right side of the subtree\n  if (key &lt; p_tree-&gt;key_value){\n    // if it is less than the value, we add to the left\n    p_tree-&gt;p_left = add(p_tree-&gt;p_left, key);\n  }\n  else{\n    p_tree-&gt;p_right = add(p_tree-&gt;p_right, key);\n  }\n  return p_tree;\n} // end of function\n</code></pre>\n\n<p>As well as a search function:</p>\n\n<pre><code>node* search(node *p_tree, int key) {\n  //--First:\n  if (p_tree != NULL) { \n    if(key == p_tree-&gt;key_value){\n      cout &lt;&lt; \"Node found\" &lt;&lt; endl;\n      return p_tree;\n    }\n    if(key &lt; p_tree-&gt;key_value){\n      return search(p_tree-&gt;p_left, key);\n    }\n    else{\n      return search(p_tree-&gt;p_right, key);\n    }\n  }\n    else{\n      return NULL;\n    }\n\n\n}//--End of recursive search function\n</code></pre>\n\n<p>Why is it that when I run:</p>\n\n<pre><code> add(myBinaryTree,1);\n cout &lt;&lt; \"Testing to see if it is there\" &lt;&lt; endl;\n if (search(myBinaryTree,1) == NULL {\n   cout &lt;&lt; \"Node not found\" &lt;&lt; endl;\n }\n</code></pre>\n\n<p>The output is \"Node not found\" instead of \"Node found\" ?\nas far as I know the add function does not return NULL, why is this the case?\nI have tried looking into similar questions, but cannot comprehend the code in them enough to come up with my own solution, I am also not well versed in debugging using my IDE(codeblocks) and thus do not know where to go.\n(I just need a logical fix since I can not seem to find one in myself)</p>\n"}, {"tags": ["c++", "templates", "recursion", "overloading"], "comments": [{"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 2, "creation_date": 1443642472, "post_id": 32874397, "comment_id": 53580392, "body": "Because the <code>print(const pair&lt;T,U&gt;&amp; t)</code> overload should be <i>at least</i> declared before the one calling it"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1443642883, "post_id": 32874397, "comment_id": 53580570, "body": "@PiotrSkotnicki That should be an answer."}], "answers": [{"tags": [], "owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "is_accepted": true, "score": 2, "last_activity_date": 1443643261, "creation_date": 1443643261, "answer_id": 32874605, "question_id": 32874397, "link": "https://stackoverflow.com/questions/32874397/rule-for-template-deduction-for-overloaded-recursive-function-in-c/32874605#32874605", "title": "rule for template deduction for overloaded recursive function in c++", "body": "<p>The problem is not related to template argument deduction, neither to overload resolution. The <code>print</code> overload taking a pair is not picked by the compiler because it can't be found by unqualified name lookup, neither by ADL. You should either reorder the two definitions of your functions, so that the one taking a pair comes first:</p>\n\n<pre><code>template &lt;class T,class U&gt; string print(const pair&lt;T,U&gt;&amp; t){\n    /**/\n}\n\ntemplate &lt;class T&gt; string print(const vector&lt;T&gt;&amp; t){\n    /**/\n}\n</code></pre>\n\n<p>or declare all functions before you define and use them:</p>\n\n<pre><code>template &lt;class T&gt; string print(const T&amp; t);\ntemplate &lt;class T,class U&gt; string print(const pair&lt;T,U&gt;&amp; t);    \ntemplate &lt;class T&gt; string print(const vector&lt;T&gt;&amp; t);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 1, "last_activity_date": 1443643435, "creation_date": 1443643435, "answer_id": 32874656, "question_id": 32874397, "link": "https://stackoverflow.com/questions/32874397/rule-for-template-deduction-for-overloaded-recursive-function-in-c/32874656#32874656", "title": "rule for template deduction for overloaded recursive function in c++", "body": "<p>Your problem is that when you're trying to print a <code>vector&lt;pair&lt;X&gt;&gt;</code>, this call with the <code>vector</code> overload:</p>\n\n<pre><code>s &lt;&lt; print(t[i]) &lt;&lt; ' ';\n</code></pre>\n\n<p>can't find the <code>pair&lt;T,U&gt;</code> overload because unqualified lookup happens at point of definition, not later. So it calls your generic <code>print(const T&amp;)</code> not because of some break in template ordering rules but rather because the <code>pair&lt;T, U&gt;</code> overload simply isn't visible. </p>\n\n<hr />\n\n<p>If only I could say Argument-Dependent Lookup in the Leeroy Jenkins voice. That would be awesome. Anyway, the cool thing about ADL is that lookup happens <em>later</em>. So you don't have to worry about making sure all your functions are predefined. Just throw in a extra argument and let ADL do its thing. At top-level, we just forward:</p>\n\n<pre><code>template &lt;typename T&gt;\nstring print(T const&amp; val)\n{\n    return print(adl::helper{}, val);\n}\n</code></pre>\n\n<p>And then we define all our same <code>print</code> functions within <code>namespace adl</code>:</p>\n\n<pre><code>namespace adl {\n    struct helper{};\n\n    template&lt;class A, class T&gt; string print(A, const T&amp; t){\n        ostringstream s;\n        s &lt;&lt; t;\n        return s.str();\n    }\n\n    template&lt;class A, class T&gt; string print(A, const vector&lt;T&gt;&amp; t){\n        ostringstream s;\n        s &lt;&lt; '[';\n        for(int i=0;i&lt;(int)t.size();i++)\n            s &lt;&lt; print(helper{}, t[i]) &lt;&lt; ' ';\n        s &lt;&lt; ']';\n        return s.str();\n    }\n\n    template&lt;class A, class T,class U&gt; string print(A, const pair&lt;T,U&gt;&amp; t){\n        ostringstream s;\n        s &lt;&lt; '(' &lt;&lt; print(helper{}, t.first) &lt;&lt; ',' &lt;&lt; print(helper{}, t.second) &lt;&lt; ')';\n        return s.str();\n    }\n}\n</code></pre>\n\n<p>No ordering issues anywhere. Now we can even print a <code>vector</code> of <code>pair</code> of <code>vector</code> of <code>pair</code> of ...</p>\n"}], "owner": {"reputation": 23, "user_id": 5394540, "user_type": "registered", "profile_image": "https://graph.facebook.com/1175789715770123/picture?type=large", "display_name": "Adrien Chan Hon Tong", "link": "https://stackoverflow.com/users/5394540/adrien-chan-hon-tong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 32874605, "answer_count": 2, "score": 2, "last_activity_date": 1443644076, "creation_date": 1443642354, "last_edit_date": 1495535220, "question_id": 32874397, "link": "https://stackoverflow.com/questions/32874397/rule-for-template-deduction-for-overloaded-recursive-function-in-c", "title": "rule for template deduction for overloaded recursive function in c++", "body": "<p>I have found a lot of information about template deduction (eg <a href=\"https://stackoverflow.com/questions/31563580/c-templated-function-overloading-rules\">C++ templated function overloading rules</a>) but it does not help me understand the behaviour of template deduction for an overloaded recursive function.\nIn the following code, I do not really understand how the compiler managed to deduce that it should use the <code>vector&lt;T&gt;</code> function two times for <code>vectvect</code> and the <code>pair&lt;T,U&gt;</code> two times for <code>pairpair</code> - but it can.\nThus, I do not understand why it can not deduce that it should use both <code>vector&lt;T&gt;</code> and <code>pair&lt;T,U&gt;</code> function for <code>vectpair</code> ?</p>\n\n<p>Is this something to do with why the <code>const</code> keyword leads to increase the conversion and thus make the <code>T</code> function better ? (But how do the two other examples can work in this case ?)</p>\n\n<p>Is the two first deduction only possible because the current function is tested first for the template deduction in a recursive call ?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\ntemplate&lt;class T&gt; string print(const T&amp; t){\n    ostringstream s;\n    s &lt;&lt; t;\n    return s.str();\n}\n\ntemplate&lt;class T&gt; string print(const vector&lt;T&gt;&amp; t){\n    ostringstream s;\n    s &lt;&lt; '[';\n    for(int i=0;i&lt;(int)t.size();i++)\n        s &lt;&lt; print(t[i]) &lt;&lt; ' ';\n    s &lt;&lt; ']';\n    return s.str();\n}\n\ntemplate&lt;class T,class U&gt; string print(const pair&lt;T,U&gt;&amp; t){\n    ostringstream s;\n    s &lt;&lt; '(' &lt;&lt; print(t.first) &lt;&lt; ',' &lt;&lt; print(t.second) &lt;&lt; ')';\n    return s.str();\n}\n\nint main ( int argc, char **argv ) {\n    vector&lt;vector&lt;double&gt; &gt; vectvect(4,vector&lt;double&gt;(4));\n    for(int i=0;i&lt;(int)4;i++)\n        for(int j=0;j&lt;(int)4;j++)\n            vectvect[i][j] = i*4+j;\n    pair&lt;int,pair&lt;string,double&gt; &gt; pairpair = make_pair(10, make_pair(\"foo\",0.5));\n    vector&lt;pair&lt;int,string&gt; &gt; vectpair(1,make_pair(42,\"bar\"));\n\n    ///template deduction\n    cout &lt;&lt; print(vectvect) &lt;&lt; endl;\n    cout &lt;&lt; print(pairpair) &lt;&lt; endl;\n\n    ///template deduction failure\n    //====&gt; here is the problem \n    //cout &lt;&lt; print(vectpair) &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Currently, I am just trying to understand, but if somebody knows how to do it without introducing large source overhead, I am interested.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "protocol-buffers"], "answers": [{"tags": [], "owner": {"reputation": 669, "user_id": 4579769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca78829adddf5ecfeb931be838afb007?s=128&d=identicon&r=PG&f=1", "display_name": "psv", "link": "https://stackoverflow.com/users/4579769/psv"}, "is_accepted": false, "score": 0, "last_activity_date": 1443699204, "creation_date": 1443699204, "answer_id": 32886574, "question_id": 32874292, "link": "https://stackoverflow.com/questions/32874292/converting-googleprotobufrepeatedfieldfloat-to-float/32886574#32886574", "title": "Converting google::protobuf::RepeatedField&lt;float&gt; to float", "body": "<p>You can iterate over your Y-s</p>\n\n<pre><code>for(auto value : Foo.y())\n{\n    //do something with value here\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 30998, "user_id": 2686899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/StqEe.jpg?s=128&g=1", "display_name": "Kenton Varda", "link": "https://stackoverflow.com/users/2686899/kenton-varda"}, "is_accepted": true, "score": 1, "last_activity_date": 1443760399, "creation_date": 1443760399, "answer_id": 32900594, "question_id": 32874292, "link": "https://stackoverflow.com/questions/32874292/converting-googleprotobufrepeatedfieldfloat-to-float/32900594#32900594", "title": "Converting google::protobuf::RepeatedField&lt;float&gt; to float", "body": "<p>You want:</p>\n\n<pre><code>float b = foo.y(0);\n</code></pre>\n\n<p>(Stack overflow is complaining that my answer is to short...)</p>\n"}], "owner": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2325, "favorite_count": 0, "accepted_answer_id": 32900594, "answer_count": 2, "score": 1, "last_activity_date": 1443760399, "creation_date": 1443641995, "question_id": 32874292, "link": "https://stackoverflow.com/questions/32874292/converting-googleprotobufrepeatedfieldfloat-to-float", "title": "Converting google::protobuf::RepeatedField&lt;float&gt; to float", "body": "<p>I am using Google's Protobuf to create a C++ class called <code>Foo</code>, as follows:</p>\n\n<pre><code>message Foo\n{\n    optional int32 x = 1;\n    repeated float y = 2;\n}\n</code></pre>\n\n<p>In the created C++ class, this creates a member variable <code>y</code> of type <code>const google::protobuf::RepeatedField&lt;float&gt;</code>. Now, in my C++ code, I want to access the <code>x</code> and <code>y</code> variables of an instance of <code>Foo</code>, called <code>foo</code>. In this example, <code>y</code> is of length one, i.e. it contains one float:</p>\n\n<pre><code>int a = foo.x();\nfloat b = foo.y();\nfloat c = foo.y()[0];\n</code></pre>\n\n<p>Here, the first line works, but I get errors for both the second and third lines. I am just trying to get the value of this float that is stored in <code>y</code>.</p>\n\n<p>How should I be doing this?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "arrays", "c++11"], "comments": [{"owner": {"reputation": 4612, "user_id": 2277510, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/fcffe01e34fc11c789b0a9098e356195?s=128&d=identicon&r=PG&f=1", "display_name": "coder hacker", "link": "https://stackoverflow.com/users/2277510/coder-hacker"}, "edited": false, "score": 0, "creation_date": 1443641862, "post_id": 32874146, "comment_id": 53580107, "body": "If you can use map, use it to keep track of numbers already in the list. Or use a set instead of array?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1443641872, "post_id": 32874146, "comment_id": 53580110, "body": "I dunno, maybe <a href=\"http://en.cppreference.com/w/cpp/algorithm/unique\" rel=\"nofollow noreferrer\">use <code>std::unique</code></a>?"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 4612, "user_id": 2277510, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/fcffe01e34fc11c789b0a9098e356195?s=128&d=identicon&r=PG&f=1", "display_name": "coder hacker", "link": "https://stackoverflow.com/users/2277510/coder-hacker"}, "edited": false, "score": 0, "creation_date": 1443641900, "post_id": 32874146, "comment_id": 53580122, "body": "@coderhacker <code>array&lt;bool,91&gt;</code> would be sufficient :-)"}, {"owner": {"reputation": 4612, "user_id": 2277510, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/fcffe01e34fc11c789b0a9098e356195?s=128&d=identicon&r=PG&f=1", "display_name": "coder hacker", "link": "https://stackoverflow.com/users/2277510/coder-hacker"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1443641964, "post_id": 32874146, "comment_id": 53580146, "body": "@dasblinkenlight Yes For this array is better as elements are limited:)"}, {"owner": {"reputation": 11, "user_id": 5307075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e06a9411b2a8e86b70109723a93d0cf?s=128&d=identicon&r=PG&f=1", "display_name": "cotton", "link": "https://stackoverflow.com/users/5307075/cotton"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1443642152, "post_id": 32874146, "comment_id": 53580230, "body": "@dasblinkenlight not for this assignment.  For the next one I can."}, {"owner": {"reputation": 11, "user_id": 5307075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e06a9411b2a8e86b70109723a93d0cf?s=128&d=identicon&r=PG&f=1", "display_name": "cotton", "link": "https://stackoverflow.com/users/5307075/cotton"}, "edited": false, "score": 0, "creation_date": 1443643823, "post_id": 32874146, "comment_id": 53580977, "body": "You think I need to recursively call a function which iterates backward over the array?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1443646871, "post_id": 32874146, "comment_id": 53582482, "body": "No vector, bummer, but did the instructor also ban <a href=\"http://en.cppreference.com/w/cpp/container/set\" rel=\"nofollow noreferrer\">std::set</a>? It&#39;s unique by nature."}, {"owner": {"reputation": 11, "user_id": 5307075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e06a9411b2a8e86b70109723a93d0cf?s=128&d=identicon&r=PG&f=1", "display_name": "cotton", "link": "https://stackoverflow.com/users/5307075/cotton"}, "edited": false, "score": 0, "creation_date": 1443654829, "post_id": 32874146, "comment_id": 53585301, "body": "He did not, but I we haven&#39;t gone over that yet"}, {"owner": {"reputation": 1349, "user_id": 7219646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/468228f1b25f2f7ea7d41c913854c36f?s=128&d=identicon&r=PG&f=1", "display_name": "Rishi", "link": "https://stackoverflow.com/users/7219646/rishi"}, "edited": false, "score": 0, "creation_date": 1516772805, "post_id": 32874146, "comment_id": 83820738, "body": "This can be solved using a variation of counting sort; you already know the range of inputs"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5307075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e06a9411b2a8e86b70109723a93d0cf?s=128&d=identicon&r=PG&f=1", "display_name": "cotton", "link": "https://stackoverflow.com/users/5307075/cotton"}, "edited": false, "score": 0, "creation_date": 1443642869, "post_id": 32874250, "comment_id": 53580560, "body": "Could you be more specific with the if/else statement?"}, {"owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "reply_to_user": {"reputation": 11, "user_id": 5307075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e06a9411b2a8e86b70109723a93d0cf?s=128&d=identicon&r=PG&f=1", "display_name": "cotton", "link": "https://stackoverflow.com/users/5307075/cotton"}, "edited": false, "score": 0, "creation_date": 1443647654, "post_id": 32874250, "comment_id": 53582813, "body": "if variable = userarray[j] then break the for loop and go to next input"}], "tags": [], "owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "is_accepted": false, "score": -1, "last_activity_date": 1443641788, "creation_date": 1443641788, "answer_id": 32874250, "question_id": 32874146, "link": "https://stackoverflow.com/questions/32874146/how-do-i-parse-arrays-in-c-for-duplicates/32874250#32874250", "title": "How do I parse arrays in C++ for duplicates", "body": "<p>inside of your for loop, instead of makign the cin go directly into the array, add another int variable and set it to equal the input</p>\n\n<pre><code>cin &gt;&gt; variable\n</code></pre>\n\n<p>then make a for loop that iterates through your current array to make sure its not a duplicate; use the line below as your for loop</p>\n\n<pre><code>for(int j = 0; j &lt; i; j++)\n</code></pre>\n\n<p>if the number is already in the array, just continue. Else, add it in.</p>\n\n<p>Also, instead of using a for loop in the beginning, I would use a while loop with </p>\n\n<pre><code>while(i &lt; arraysize)\n</code></pre>\n\n<p>Then deincrement array size every time you see a duplicate and only increment i when you add an element</p>\n"}, {"tags": [], "owner": {"reputation": 1860, "user_id": 3671410, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/7dAyV.jpg?s=128&g=1", "display_name": "Artur Pyszczuk", "link": "https://stackoverflow.com/users/3671410/artur-pyszczuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1443643410, "creation_date": 1443643410, "answer_id": 32874650, "question_id": 32874146, "link": "https://stackoverflow.com/questions/32874146/how-do-i-parse-arrays-in-c-for-duplicates/32874650#32874650", "title": "How do I parse arrays in C++ for duplicates", "body": "<p>If you can use <code>std::vector</code>, then you can use following solution.</p>\n\n<pre><code>template &lt;typename Type&gt;\nstd::vector&lt;Type&gt; unique_entries (std::vector&lt;Type&gt; vec) { \n    for (auto iter = vec.begin (); iter != vec.end (); ++iter) { \n        auto f = std::find_if (iter+1, vec.end (), [&amp;] (const Type&amp; val) {\n           return *iter == val; // (X)\n        });\n\n        if (f != vec.end ()) { \n            vec.erase (std::remove (iter+1, vec.end (), *iter), vec.end ());\n        }\n    }\n    return vec;\n}\n\ntemplate &lt;typename T&gt;\nvoid show (std::vector&lt;T&gt; vec) {\n    for (const auto&amp; v : vec) {\n        std::cout &lt;&lt; v &lt;&lt; \" \";\n    }\n    std::cout &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>And example would be like that:</p>\n\n<pre><code>std::vector&lt;int&gt; vec {11, 12, 12, 12, 13, 14, 15, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27};\nstd::vector&lt;short&gt; vec2 {1, 1, 1, 2, 3, 2, 1, 2, 1, 2, 3, 2, 1, 2, 3, 2, 1, 2, 10};\nstd::vector&lt;std::string&gt; vec3 {\"a\", \"a\", \"a\", \"aa\", \"b\", \"b\", \"bb\", \"c\"};\n\nshow (vec);\nshow (unique_entries (vec));\n\nshow (vec2);\nshow (unique_entries (vec2));\n\nshow (vec3);\nshow (unique_entries (vec3));\n</code></pre>\n\n<p>And the output:</p>\n\n<pre><code>11 12 12 12 13 14 15 15 16 17 18 19 20 21 22 23 24 25 26 27 \n11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 \n1 1 1 2 3 2 1 2 1 2 3 2 1 2 3 2 1 2 10 \n1 2 3 10 \na a a aa b b bb c \na aa b bb c \n</code></pre>\n\n<p>Look at the line (X), basically you can use this <code>unique_entries</code> for all types which offer <code>operator==</code>, but you have to keep in mind that this will probably fail if you use this function for floating point types.</p>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 5390194, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/4e11804168356f79565ab4384883e3bc?s=128&d=identicon&r=PG", "display_name": "Mutex202", "link": "https://stackoverflow.com/users/5390194/mutex202"}, "is_accepted": false, "score": 0, "last_activity_date": 1443644094, "creation_date": 1443644094, "answer_id": 32874808, "question_id": 32874146, "link": "https://stackoverflow.com/questions/32874146/how-do-i-parse-arrays-in-c-for-duplicates/32874808#32874808", "title": "How do I parse arrays in C++ for duplicates", "body": "<p>Hope this is what you are looking for........... Basically I use an another array to store the elements already entered by the user. So when the user enters a number it checks whether it is already in the array of 'entered elements' or not.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#define MAX 20\n\nusing namespace std;\n\n\nint main()\n{  \n  int list[MAX],visitedElements[MAX];\n  int noElements,element,currentIndex;\n  bool flag=false;\n\n  cout&lt;&lt;\"Enter total no. of elements(MAX=20):\"&lt;&lt;endl;\n  cin&gt;&gt;noElements;\n\n  for(int i=0; i&lt;noElements; i++)\n  {\n       visitedElements[i] = -1;\n  }\n\n  for(int i=0;i&lt;noElements;i++)\n  { \n     currentIndex=i;\n     cout&lt;&lt;\"Enter Element:\"&lt;&lt;endl;\n     cin&gt;&gt;element;\n     for(i=0;i&lt;currentIndex;i++)\n     {\n        if(visitedElements[i] == element)\n        {\n           flag==true;\n           break;\n        }\n     }\n     if(flag == false)\n     {\n       list[i]=element;\n       visitedElements[i] = element; \n     }\n     flag = false;\n }\n cout&lt;&lt;\"Elements in list are\"&lt;&lt;endl;\n for(int i=0 ; i&lt;noElements ;i++)\n cout&lt;&lt;list[i]&lt;&lt;endl;\n\n return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 587, "user_id": 5392353, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V3iOt.jpg?s=128&g=1", "display_name": "Repcak", "link": "https://stackoverflow.com/users/5392353/repcak"}, "is_accepted": false, "score": 0, "last_activity_date": 1443646068, "last_edit_date": 1443646068, "creation_date": 1443644971, "answer_id": 32875042, "question_id": 32874146, "link": "https://stackoverflow.com/questions/32874146/how-do-i-parse-arrays-in-c-for-duplicates/32875042#32875042", "title": "How do I parse arrays in C++ for duplicates", "body": "<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main(){\n\n    int tab[10];\n    int i=0,j;\n    int number=0;\n    int counter=1;\n    bool flag=true;\n    int tries=0;\n\n    while(tries&lt;10){\n\n    do{\n        cin&gt;&gt;number;\n        tries++;\n        if((number&gt;100)||(number&lt;10)){\n            cout&lt;&lt;\"Wrong number, has to be between 10 and 100\"&lt;&lt;endl;\n        }\n    }\n    while((number&gt;100)||(number&lt;10));\n\n    flag=true;\n    if(i==0){\n        tab[i]=number;\n    }\n    else{  \n\n        for(j=0; j&lt;counter; j++){\n            if(tab[j]==number){\n                flag=false;\n                i--;\n                break;\n            }\n        }\n    }\n\n    if(flag==true){\n        tab[i]=number;\n        counter++;\n    }\n\n    i++;\n    }\n\n    for(i=0; i&lt;counter-1; i++){\n        cout&lt;&lt;tab[i]&lt;&lt;\", \";\n    }\n}\n</code></pre>\n\n<p>I kinda meesed it up probably. I'm new to programing but this is my solution.\nSo. You said it has to take 20 digits, mine takes 10, after 10 inputs it will list the array. So if my input is \"10, 10, 10, 12, 13, 15, 15, 18, 22, 22\"\nthe output is: \"10, 12, 13, 15, 18, 22\"\nI could probably erase half of the code but like i said I'm a beginner and i was writing it in a hurry.</p>\n\n<p>EDIT: Ups, small mistake in the array declaration. I was testing it for 5 elements and forgot to make a bigger array.</p>\n"}, {"tags": [], "owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "is_accepted": false, "score": 0, "last_activity_date": 1527913044, "last_edit_date": 1527913044, "creation_date": 1516769030, "answer_id": 48414963, "question_id": 32874146, "link": "https://stackoverflow.com/questions/32874146/how-do-i-parse-arrays-in-c-for-duplicates/48414963#48414963", "title": "How do I parse arrays in C++ for duplicates", "body": "<p>The question asked to use one array, so I would loop over the numbers already in the array after reading in each number and check for duplicates. It would look something like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nconstexpr int ARRAY_SIZE 20;\n\nint main()\n{\n    int userArray[ARRAY_SIZE], validNumbers = 0;\n    for(int i = 0; i &lt; ARRAY_SIZE; i++)\n    {\n        int num;\n        bool isGood = true;\n        std::cin &gt;&gt; num;\n        //code to check if input is in range here\n        for(int j = 0; j &lt; validNumbers; j++)\n        {\n            if(userArray[j] == num)\n            {\n                isGood = false;\n                break;\n            }\n        }\n        if(isGood)\n        {\n            userArray[validNumbers] = num;\n            validNumbers++;\n        }\n    }\n    //userArray now contains all unique numbers in the order that they were entered\n    for(int i = 0; i &lt; validNumbers; i++)\n    {\n        std::cout &lt;&lt; userArray[i];\n        if(i &lt; validNumbers - 1)\n        {\n            std::cout &lt;&lt; ' ';\n        }\n    }\n    std::cout &lt;&lt; '\\n';\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5307075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e06a9411b2a8e86b70109723a93d0cf?s=128&d=identicon&r=PG&f=1", "display_name": "cotton", "link": "https://stackoverflow.com/users/5307075/cotton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 468, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1527913044, "creation_date": 1443641293, "last_edit_date": 1443642104, "question_id": 32874146, "link": "https://stackoverflow.com/questions/32874146/how-do-i-parse-arrays-in-c-for-duplicates", "title": "How do I parse arrays in C++ for duplicates", "body": "<p>Please help me use C++ to parse an array and only display numbers that are unique.  I have written a program which answers most of the question below.</p>\n\n<p><b>Question:</b>\nUse a one-demensional array to solve the following problem.  Read in 20 numbers, each of which is between 10 and 100, inclusive.  As each number is read, validate  and store it in the array only if it isn't a duplicate of a number already read.  After reading all the values, display only the unique values that the user entered.  Provide for the \"worst case\" in which all 20 number are different.  Use the smallest possible array to solve this problem.</p>\n\n<p><b>What I've done:</b>\nMy program creates a 20 item array.  Prompts user for data, validates it and displays it.  I have tried several way to only display unique data, however I have not accomplished what the question asks. </p>\n\n<p><b> Sample User Input: </b></p>\n\n<p>11, 12, 12, 12, 13, 14, 15, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27</p>\n\n<p><b> My Program Output: </b></p>\n\n<p>{ 11, 12, 12, 12, 13, 14, 15, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27 }</p>\n\n<p><b> Correct Program Output: </b></p>\n\n<p>{ 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27 }</p>\n\n<p>Any advice where to go with this.  See below for code.  Thank you for your help!</p>\n\n<pre><code>#include &lt;iostream&gt;  \n#include &lt;array&gt; // needed for c++11 arrays\nusing namespace std;\n\nint main()\n{\n    const int arraySize = 20; // limit array length to 20\n    array  &lt;int, arraySize userArray&gt;  = {}; \n\n    //Populate array with user input and validate it to be between 10 and 100\n\n    for (int i = 0; i &lt; userArray.size(); i++)\n    {\n            cout &lt;&lt; \"Enter a number between 10 and 100\" &lt;&lt; endl;\n            cin &gt;&gt; userArray[i]; // get user input assign it to proper array subscript\n\n            while(userArray[i] &gt; 100 || userArray[i] &lt; 10)//validate user input to be between 10 and 100\n            {\n                    cout &lt;&lt; \"Number needs to be between 10 and 100. Enter a new number\" &lt;&lt; endl;\n                    cin &gt;&gt; userArray[i]; //reassign the proper array subscript if needed\n            }\n\n    }\n\n    cout &lt;&lt; endl;\n\n    //display the information to look like an array\n    //result looks like [ v, w, x, y, z ]\n\n    cout &lt;&lt; \"[ \";\n    //display array values\n    for (int i = 0; i &lt; userArray.size() - 1; i++)\n    {\n            cout &lt;&lt; userArray[i] &lt;&lt; \", \";\n    }\n    //properly display last array item\n    cout &lt;&lt; userArray[(userArray.size() - 1)] &lt;&lt; \" ]\" &lt;&lt; endl;\n\n\n    return 0; }\n</code></pre>\n"}, {"tags": ["c++", "c", "c++11"], "comments": [{"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 5, "creation_date": 1443641364, "post_id": 32874142, "comment_id": 53579868, "body": "<i>And that was quiet true until the appearance of C++x0, C++11</i> No, C89 is not a subset of C++98."}, {"owner": {"reputation": 5456, "user_id": 99456, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Mjq7j.jpg?s=128&g=1", "display_name": "yannis", "link": "https://stackoverflow.com/users/99456/yannis"}, "edited": false, "score": 0, "creation_date": 1443951745, "post_id": 32874142, "comment_id": 53689951, "body": "This has been <a href=\"http://programmers.stackexchange.com/q/298665/25936\">migrated to Programmers</a>. I had to clear the actual migration history (which deleted the automated migration link) to deal with some technical nonsense (migrations getting locked upon rejection, etc)."}], "answers": [{"tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 4, "last_activity_date": 1443643951, "last_edit_date": 1495535219, "creation_date": 1443641551, "answer_id": 32874209, "question_id": 32874142, "link": "https://stackoverflow.com/questions/32874142/should-i-stop-using-the-term-c-c/32874209#32874209", "title": "Should I stop using the term C/C++?", "body": "<blockquote>\n  <p>I was always told that C is a subset of C++ or C++ is C with classes. And that was quiet true until the appearance of C++x0, C++11 (or the modern C++ 11/14/17 in general).</p>\n</blockquote>\n\n<p>C has never been a subset of C++. For example C89 is not a subset of C++98. </p>\n\n<p>A few examples:</p>\n\n<ul>\n<li>the C89 <em>identifier-list form</em> for function parameter declaration is not supported in C++</li>\n<li>C89 and C++98 have different types for the characters constants</li>\n<li>C89 and C++98 have different types for string literals</li>\n<li>logical operators yield different types in C89 and C++98 (<code>int</code> vs <code>bool</code>)</li>\n</ul>\n\n<blockquote>\n  <ol>\n  <li>Should I stop using the term C/C++?</li>\n  </ol>\n</blockquote>\n\n<p>Yes.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>If the answer to #1 is yes, how would I call a program that use a mix of C and C++?</li>\n  </ol>\n</blockquote>\n\n<p>A program is either C or C++ (if even some very basic program can compiled with either a C or a C++ compiler). What compiler are you using to compile it? It should answer your question. Harbison &amp; Steele coined the term <a href=\"https://stackoverflow.com/questions/9694776/what-is-clean-c-and-how-does-it-differ-from-standard-c\"><em>Clean C</em></a> to designate a common subset of C and C++ but I think it was a bad idea. </p>\n\n<p><strong>EDIT</strong>: However I admit that technically you can link C and C++ objects files in a single program but OTH there are many languages that are allowed to be mixed in a single program for example Java and C++. I think using the term C/C++ program only adds to the confusion that it is written in a single language called C/C++.</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>Given that both of them are 'different' languages is it likely that at some point C++ compilers stop supporting code written in the C language (since modern c++ is diverging from the C mentality for basic stuff like pointers, dynamic memory handling, etc)</li>\n  </ol>\n</blockquote>\n\n<p>There are many features (example: variable length array, flexible array member, <code>_Generic</code>, ...) of C99 or C11 that are not supported by any C++ version.</p>\n"}, {"tags": [], "owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "is_accepted": true, "score": 4, "last_activity_date": 1443644233, "last_edit_date": 1443644233, "creation_date": 1443641577, "answer_id": 32874214, "question_id": 32874142, "link": "https://stackoverflow.com/questions/32874142/should-i-stop-using-the-term-c-c/32874214#32874214", "title": "Should I stop using the term C/C++?", "body": "<p>C was never a subset of C++. The most obvious example of this is <code>int new;</code>.  This has been true since C89 and C++98, and the languages have only grown further from each other as new standards have come out.</p>\n\n<blockquote>\n  <p>Should I stop using the term C/C++</p>\n</blockquote>\n\n<p>Yes</p>\n\n<blockquote>\n  <p>If the answer to #1 is yes, how would I call a program that use a mix of C and C++?</p>\n</blockquote>\n\n<p>A source file is written in one language or the other.  A program can consist of code from multiple languages working together, or an executable produced by linking different compiled objects.  You would say the program was written in C and C++, \"C/C++\" is not a language.</p>\n\n<blockquote>\n  <p>Given that both of them are 'different' languages is it likely that at some point C++ compilers stop supporting code written in the C language</p>\n</blockquote>\n\n<p>3) They never did. <code>int *a = malloc(10);</code>. <a href=\"http://ideone.com/2G9xT1\" rel=\"nofollow\">C</a> and <a href=\"http://ideone.com/zWSPTF#view_cmperr_content\" rel=\"nofollow\">C++</a> have long since diverged.  click the links or see below for a file that is fine with C89 and up, but isn't valid under any C++ standard.</p>\n\n<p>4) afaik no, the working groups are aware of each other but the standards make the decisions that are best for themselves.</p>\n\n<pre><code>/* A bunch of code that compiles and runs under C89 but fails under any C++ */\n\n/* type aliases and struct names occupy separate namespaces in C, not in C++ */\nstruct S { int i; };\ntypedef int S;\n\n\nstruct Outer { struct Inner { int i; } in; };\n/* struct Inner will be Outer::Inner in C++ due to name scope */\nstruct Inner inner;\n\n\n/* default return type of int in C, C++ functions need explicit return types */\ng() {\n    return 0;\n}\n\n\n/* C sees this as two declarations of the same integer,\n * C++ sees it as redefinition */\nint n;\nint n;\n\n\n/* K&amp;R style argument type declarations */\nvoid h(i) int i; { }\n\n\n/* struct type declaration in return type */\nstruct S2{int a;} j(void) { struct S2 s = {1}; return s; }\n\n\n/* struct type declaration in argument, stupid and useless, but valid */\n/*void dumb(struct S3{int a;} s) { } */\n\n\n/* enum/int assignment */\nenum E{A, B};\nenum E e = 1;\n\n\nvoid k() {\n    goto label; /* C allows jumping past an initialization */\n    {\n        int x = 0;\nlabel:\n        x = 1;\n    }\n}\n\n\n/* () in declaration means unspecified number of arguments in C, the definition\n * can take any number of arguments,\n * but means the same as (void) in C++  (definition below main) */\nvoid f();\n\nint main(void) {\n    f(1); /* doesn't match declaration in C++ */\n    {\n        /* new is a keyword in C++ */\n        int new = 0;\n    }\n\n    /* no stdio.h include results in implicit definiton in C.  However,\n     * as long as a matching function is found at link-time, it's fine.\n     * C++ requires a declaration for all called functions */\n    puts(\"C is not C++\");\n    {\n        int *ip;\n        void *vp = 0;\n        ip = vp; /* cast required in C++, not in C */\n    }\n    return 0;\n}\n\n/* matches declaration in C, not in C++ */\nvoid f(int i) { }\n</code></pre>\n\n<p>I always feel it's worth mentioning that C <em>is</em> a subset of Objective-C.</p>\n"}, {"tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 2, "last_activity_date": 1443646420, "creation_date": 1443646420, "answer_id": 32875433, "question_id": 32874142, "link": "https://stackoverflow.com/questions/32874142/should-i-stop-using-the-term-c-c/32875433#32875433", "title": "Should I stop using the term C/C++?", "body": "<blockquote>\n  <p>In general the SO users ask the person who is asking the question to choose a language: C or C++. Why?</p>\n</blockquote>\n\n<p>There are many subtle differences between C and C++. For example, in C++, a <code>const</code> variable at global scope has internal linkage unless declared <code>extern</code>, but in C it has external linkage unless declared <code>static</code>. By saying \"C/C++\", the OP is asserting knowledge that the answer to their question is the same in both C and C++, when it very well might not be. <strong>This needlessly makes things harder for would-be answerers.</strong></p>\n\n<ul>\n<li><p>Sometimes we can spot that the code isn't valid in one language or the other (for example, implicit conversions from <code>void*</code> to pointer to object are not valid in C++). This is annoying. Why are you saying \"C/C++\" when you have a piece of code that's valid in C but not C++? Did you intend C, or is this just an error in code intended to be C++? </p></li>\n<li><p>Sometimes the answer will be different depending on the language (for example, variable-length arrays exist in C99 but not in C++). If we don't know what language you're talking about, either we have to guess, or write an answer for both when only one will actually be useful, because <em>you know which language you're actually using; you're just not telling us!</em></p></li>\n<li><p>Sometimes the answer really is the same for both languages, but it's hard to be sure. For example, I think C and C++ have the same integer conversion rules, but in order to be really, really sure, I have to read both standards carefully. Again, this makes me do twice as much work as necessary when you probably only care about one of the languages.</p></li>\n</ul>\n\n<p>Anyway, to answer your other questions:</p>\n\n<ol>\n<li><p>Yes.</p></li>\n<li><p>If you are linking together C and C++ code, it is acceptable to use both tags, but please specify which language each file is in.</p></li>\n<li><p>There are breaking changes sometimes, but they're rare and typically limited in impact (otherwise they don't get approved). For example, <code>auto</code> in C++11.</p></li>\n<li><p>I don't think they directly collaborate, but they pay attention to developments in the other language and try to avoid introducing changes that would make compatibility more difficult.</p></li>\n</ol>\n\n<p>And if you really do want to know about both languages, that's fine, and you can say that in your question. When you say \"C/C++\", I'm really not sure what you mean, and it really looks like you're making an assumption about the two languages.</p>\n"}], "owner": {"reputation": 13712, "user_id": 1313233, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/hBeXC.png?s=128&g=1", "display_name": "rkachach", "link": "https://stackoverflow.com/users/1313233/rkachach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "closed_date": 1443647966, "accepted_answer_id": 32874214, "answer_count": 3, "score": 0, "last_activity_date": 1443647881, "creation_date": 1443641277, "last_edit_date": 1443647881, "question_id": 32874142, "link": "https://stackoverflow.com/questions/32874142/should-i-stop-using-the-term-c-c", "closed_reason": "Not suitable for this site", "title": "Should I stop using the term C/C++?", "body": "<p>I understand C and C++ are different languages but when I was learning C++ I was always told that <strong>C is a subset of C++</strong> or C++ is C with classes. And that was quiet true until the appearance of C++x0, C++11 (or the modern C++ 11/14/17 in general). In fact (specially when working on embedded systems) it's very likely to find code written in C++ but with a lot of parts written entirely in pure C language. Here I have several questions:</p>\n\n<ol>\n<li>Should I stop using the term C/C++? </li>\n<li>If the answer to #1 is yes, how would I call a program that use a mix of C and C++?</li>\n<li>Given that both of them are 'different' languages is it likely that at some point C++ compilers stop supporting code written in the C language (since modern c++ is diverging from the C mentality for basic stuff like pointers, dynamic memory handling, etc)</li>\n<li>Is there right now any collaboration between the people who makes the standards of C/C++ to keep the compatibility</li>\n<li>If #4 is yes, such collaboration could end up in the near future with the appearance of the <em>modern c++</em> (11/14/17)</li>\n</ol>\n\n<p>I know that there already similar questions, but I'm sure that a lot of people share these doubts so I'm very interested to get good answers specially for the points that have to do with the C++ tendency in the near future.</p>\n"}, {"tags": ["c++", "templates", "c++14", "variadic-templates"], "answers": [{"comments": [{"owner": {"reputation": 182, "user_id": 2503867, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8621772926262787d11480de4c64a09b?s=128&d=identicon&r=PG", "display_name": "Vemulo", "link": "https://stackoverflow.com/users/2503867/vemulo"}, "edited": false, "score": 0, "creation_date": 1443641780, "post_id": 32874182, "comment_id": 53580077, "body": "&quot;cannot call member function &#39;auto phy_effect::particle_sys::ParticleAttributeGenerator&lt;Attribu&zwnj;&#8203;teType, Type, Types&gt;::createDistribution(Tfirst, Trest ..., Tfirst, Trest ...) [with Tfirst = float; Trest = {float, float}; AttributeType = glm::tvec3&lt;float, (glm::precision)0u&gt;; Type = float; Types = {float, float}]&#39; without object        decltype (createDistribution&lt;Type, Types...&gt;(std::declval&lt;Type&gt;(), std::declval&lt;Types&gt;()..., std::declval&lt;Type&gt;(), std::declval&lt;Types&gt;()...)) distributionTuple; &quot;, now I got this error."}, {"owner": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "reply_to_user": {"reputation": 182, "user_id": 2503867, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8621772926262787d11480de4c64a09b?s=128&d=identicon&r=PG", "display_name": "Vemulo", "link": "https://stackoverflow.com/users/2503867/vemulo"}, "edited": false, "score": 0, "creation_date": 1443642600, "post_id": 32874182, "comment_id": 53580446, "body": "Ah, that&#39;s because you need to <code>createDistribution</code> is a member function and it needs something object-like to work with. Use <code>std::declval</code> to provide that as well. Edited in."}], "tags": [], "owner": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "is_accepted": false, "score": 1, "last_activity_date": 1443642616, "last_edit_date": 1443642616, "creation_date": 1443641442, "answer_id": 32874182, "question_id": 32873902, "link": "https://stackoverflow.com/questions/32873902/defining-member-variable-using-decltype-on-variadic-function-template-of-a-class/32874182#32874182", "title": "Defining member variable using decltype on variadic function template of a class template", "body": "<p>Use <a href=\"http://en.cppreference.com/w/cpp/utility/declval\" rel=\"nofollow\"><code>std::declval</code></a> when you need to construct a complete invocation of a function in an unevaluated context. Using it, you would declare <code>distributionTuple</code> like this:</p>\n\n<pre><code>decltype (std::declval&lt;ParticleAttributeGenerator&gt;().createDistribution&lt;Type, Types...&gt;(std::declval&lt;Type&gt;(), std::declval&lt;Types&gt;()..., std::declval&lt;Type&gt;(), std::declval&lt;Types&gt;()...)) distributionTuple;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 4, "last_activity_date": 1443641541, "creation_date": 1443641541, "answer_id": 32874205, "question_id": 32873902, "link": "https://stackoverflow.com/questions/32873902/defining-member-variable-using-decltype-on-variadic-function-template-of-a-class/32874205#32874205", "title": "Defining member variable using decltype on variadic function template of a class template", "body": "<p>First off, let's massively simplify the example down to something more manageable with less external stuff:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Bar\n{\nprivate:\n    template &lt;typename U&gt;\n    auto foo(U a, U b)\n    {\n        return std::tuple&lt;U&gt;(a+b);\n    }\n\npublic:\n    Bar(T a, T b)\n    {\n        distributionTuple = foo&lt;T&gt;(a, b);\n    }\n\nprivate:\n    decltype (foo&lt;T&gt;(T, T)) distributionTuple;\n};\n\nint main()\n{\n    Bar&lt;int&gt; b(4, 4);\n}\n</code></pre>\n\n<p>This gives me the sample compile error that you present in your question (cannot convert <code>std::tuple&lt;int&gt;</code> to <code>int</code>. That's because:</p>\n\n<pre><code>foo&lt;T&gt;(T, T)\n</code></pre>\n\n<p>isn't a valid function call. You need to call <code>foo&lt;T&gt;</code> with <em>expressions</em> that have those types. Not just a list of types. For that, we have <a href=\"http://en.cppreference.com/w/cpp/utility/declval\" rel=\"nofollow\"><code>std::declval</code></a>. That is:</p>\n\n<pre><code>foo&lt;T&gt;(std::declval&lt;T&gt;(), std::declval&lt;T&gt;())\n</code></pre>\n\n<p>Once you make that change, you'll get a new compile error: \"cannot call member function <code>foo</code> without object.\" So let's add an object with <code>declval</code> again. The following compiles:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Bar\n{\nprivate:\n    template &lt;typename U&gt;\n    auto foo(U a, U b)\n    {\n        return std::tuple&lt;U&gt;(a+b);\n    }\n\npublic:\n    Bar(T a, T b)\n    {\n        distributionTuple = foo&lt;T&gt;(a, b);\n    }\n\nprivate:\n    decltype(std::declval&lt;Bar&gt;().foo&lt;T&gt;(\n                 std::declval&lt;T&gt;(), \n                 std::declval&lt;T&gt;())\n             ) distributionTuple;\n};\n</code></pre>\n"}], "owner": {"reputation": 182, "user_id": 2503867, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8621772926262787d11480de4c64a09b?s=128&d=identicon&r=PG", "display_name": "Vemulo", "link": "https://stackoverflow.com/users/2503867/vemulo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 777, "favorite_count": 1, "accepted_answer_id": 32874205, "answer_count": 2, "score": 2, "last_activity_date": 1443642616, "creation_date": 1443640314, "question_id": 32873902, "link": "https://stackoverflow.com/questions/32873902/defining-member-variable-using-decltype-on-variadic-function-template-of-a-class", "title": "Defining member variable using decltype on variadic function template of a class template", "body": "<p>I am trying to use 'decltype' on a variadic function template to get its return value type and then use it to define a member variable. But I keep getting this error:</p>\n\n<pre><code>D:\\Qt Projects\\OpenGL_PhysicsSim\\lib\\Physics Effects\\include\\ParticleList.hpp:89: error: cannot convert 'std::tuple&lt;std::uniform_real_distribution&lt;double&gt;, std::uniform_real_distribution&lt;double&gt;, std::uniform_real_distribution&lt;double&gt; &gt;' to 'int' in assignment\n     distributionTuple = createDistribution&lt;Type, Types...&gt;(meanValue, meanValues..., varianceValue, varianceValues...);\n</code></pre>\n\n<p>Basically, the decltype fails and declare <code>distributionTuple</code> as int rather than deduce return type of <code>createDistribution</code>. </p>\n\n<pre><code>template&lt;typename AttributeType, typename Type, typename ...Types&gt;\nclass ParticleAttributeGenerator\n{\nprivate:\n template&lt;typename T&gt;\n auto createDistribution(T meanValue, T varianceValue)\n {\n   static_assert(\n     std::is_integral&lt;Type&gt;::value || std::is_floating_point&lt;Type&gt;::value,\n     \"Type should be either integral value or floating point value\");\n\n   using distType = typename std::conditional&lt; std::is_integral&lt;T&gt;::value,\n                                               std::uniform_int_distribution&lt;&gt;,\n                                               std::uniform_real_distribution&lt;&gt; &gt;::type;\n   T a = meanValue - varianceValue;\n   T b = meanValue + varianceValue;\n\n   return std::tuple&lt;distType&gt;(distType(a,b));\n }\n\n template&lt;typename Tfirst, typename ...Trest&gt;\n auto createDistribution(Tfirst meanValue, Trest... meanValues, Tfirst varianceValue, Trest... varianceValues)\n {\n   static_assert(\n     std::is_integral&lt;Type&gt;::value || std::is_floating_point&lt;Type&gt;::value,\n     \"Type should be either integral value or floating point value\");\n\n   using distType = typename std::conditional&lt; std::is_integral&lt;Tfirst&gt;::value,\n                                               std::uniform_int_distribution&lt;&gt;,\n                                               std::uniform_real_distribution&lt;&gt; &gt;::type;\n   Tfirst a = meanValue - varianceValue;\n   Tfirst b = meanValue + varianceValue;\n\n   static_assert((sizeof...(meanValues)) == (sizeof...(varianceValues)), \"number of meanValues and varianceValues should match!\");\n\n   return std::tuple_cat(std::tuple&lt;distType&gt;(distType(a,b)), createDistribution&lt;Trest...&gt;(meanValues..., varianceValues...));\n }\n\npublic:\n ParticleAttributeGenerator(Type meanValue, Types... meanValues, Type varianceValue, Types... varianceValues)\n {\n   distributionTuple = createDistribution&lt;Type, Types...&gt;(meanValue, meanValues..., varianceValue, varianceValues...);  // 89 : error          \n }\n\nprivate:\n  //using result_type_t = typename std::result_of&lt;createDistribution(Type, Types..., Type, Types...)&gt;::type;\n  decltype (createDistribution&lt;Type, Types...&gt;(Type, Types..., Type, Types...)) distributionTuple;\n  //decltype (createDistribution&lt;Type, Types...&gt;(0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f)) distributionTuple;\n};\n</code></pre>\n\n<p>It works when I provide all the values of arguments of <code>createDistribution</code>, but that is not the behavior I was looking for. Since I don't know how many parameters there will be for that function, it has to stay as variadic template function.</p>\n\n<p>Example of how I plan to use the class template:</p>\n\n<pre><code>ParticleAttributeGenerator&lt;glm::vec3, float, float, float&gt; example1(3.0f, 1.0f, 3.0f, 1.0f, 3.0f, 1.0f);\nParticleAttributeGenerator&lt;glm::u8vec4, uint8_t, uint8_t, uint8_t, uint8_t&gt; example2(3, 2, 25, 5, 51, 12, 32, 3);\n</code></pre>\n\n<p>if I don't have any member variable and use <code>distributedTuple</code> as:</p>\n\n<pre><code>auto distributionTuple = createDistribution&lt;Type, Types...&gt;(meanValue, meanValues..., varianceValue, varianceValues...);\n</code></pre>\n\n<p>It compiles, therefore I believe <code>createDistribution</code> manages to define tuple recursively. But that is no use for me. There must be something wrong that I am missing.\nI use GCC 4.9.2 in -std=c++14 mode. </p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 0, "creation_date": 1443659213, "post_id": 32873834, "comment_id": 53586366, "body": "You have a slight misunderstanding about (c): while <code>e</code> is a pointer-to-constant, it is <b>not</b> const. For example, you can modify <code>e</code> by writing <code>e = e+1;</code>.  If <code>e</code> were <code>const</code>, then its type would be <code>const int * const</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1121, "user_id": 4988044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/176bea70fb8474bc1a454ffeefd59702?s=128&d=identicon&r=PG&f=1", "display_name": "TheCppZoo", "link": "https://stackoverflow.com/users/4988044/thecppzoo"}, "is_accepted": false, "score": 7, "last_activity_date": 1465246454, "last_edit_date": 1465246454, "creation_date": 1443640176, "answer_id": 32873862, "question_id": 32873834, "link": "https://stackoverflow.com/questions/32873834/c-different-deduction-of-type-auto-between-const-int-and-cont-int/32873862#32873862", "title": "C++ : Different deduction of type auto between const int * and cont int &amp;", "body": "<p>The reason is not the const-ness, but the r-value-ness.</p>\n\n<p>You can't take a non-const reference to an r-value.</p>\n\n<p>If you wonder what's an r-value, the original idea was something that can only be at the right side of an assignment.</p>\n\n<p>To take the address of a compile-time constant the compiler first copies it, and gives you that address.  To enable that behavior, the reference must explicitly be <code>const</code>.</p>\n\n<p>To complete the answer:\ncase</p>\n\n<ul>\n<li>c) the type of <code>ci</code> is <code>const int</code>, thus the type of <code>&amp;ci</code> is address of <code>const int</code>.</li>\n<li>d) The type of <code>42</code> is <code>int</code>.  <code>auto</code> deduces to <code>int</code>, <code>f</code> is declared a reference to <code>int</code>, but fails to bind to r-value</li>\n<li>e) The type of <code>g</code> is <code>const int &amp;</code>, which can bind to compile time constant.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 0, "last_activity_date": 1443640902, "creation_date": 1443640902, "answer_id": 32874046, "question_id": 32873834, "link": "https://stackoverflow.com/questions/32873834/c-different-deduction-of-type-auto-between-const-int-and-cont-int/32874046#32874046", "title": "C++ : Different deduction of type auto between const int * and cont int &amp;", "body": "<p>In</p>\n\n<pre><code>auto &amp;f = 42;\n</code></pre>\n\n<p><code>42</code> has the type <code>int</code> so <code>auto &amp;f</code> becomes <code>int &amp;f</code>.  Now <code>42</code> is a compile time literal and as such it is an r-value.  We cannot bind an r-value to a reference so you get a compiler error.  When you used</p>\n\n<pre><code>const auto &amp;g = 42\n</code></pre>\n\n<p><code>g</code> is now a <code>const int &amp;</code> and a <code>const &amp;</code> can bind to a temporary and extends its lifetime.</p>\n"}, {"tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": false, "score": 1, "last_activity_date": 1443640921, "creation_date": 1443640921, "answer_id": 32874052, "question_id": 32873834, "link": "https://stackoverflow.com/questions/32873834/c-different-deduction-of-type-auto-between-const-int-and-cont-int/32874052#32874052", "title": "C++ : Different deduction of type auto between const int * and cont int &amp;", "body": "<p>That's because the type of <code>42</code> is not <code>const int</code>, it's <code>int</code>. It's an rvalue, which means it cannot bind to an lvalue reference (unless it's a reference to <code>const</code>), but it's still of type <code>int</code>. So that's what <code>auto</code> deduces to.</p>\n\n<p>If you try it with <code>ci</code> instead of <code>42</code>, you'll find it <a href=\"http://coliru.stacked-crooked.com/a/146302e26a632820\" rel=\"nofollow\">works</a>:</p>\n\n<pre><code>auto &amp;e = ci;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 762, "user_id": 1987633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7cc5084e895540051a920e541ab9b8c?s=128&d=identicon&r=PG", "display_name": "Andre Kostur", "link": "https://stackoverflow.com/users/1987633/andre-kostur"}, "is_accepted": false, "score": 0, "last_activity_date": 1443657495, "creation_date": 1443657495, "answer_id": 32877434, "question_id": 32873834, "link": "https://stackoverflow.com/questions/32873834/c-different-deduction-of-type-auto-between-const-int-and-cont-int/32877434#32877434", "title": "C++ : Different deduction of type auto between const int * and cont int &amp;", "body": "<p>I think you have a small amount of confusion as to what's going on.  Your c isn't trying to deduce anything regarding <code>const</code>.  <code>ci</code> is <code>const int</code> (int which is const).  <code>&amp;ci</code> is a <code>const int *</code> (non-const pointer to an int which is const).  The auto could not just be <code>int *</code> as then you would have broken the const contract.</p>\n\n<p>As others have mentioned, for d you're trying to bind a non-const reference to an rvalue (The number '42' doesn't necessarily exist anywhere in memory, thus how could you form a reference to it... which in the future you could modify?).  For e, the compiler is now willing to put 42 somewhere in memory because you just promised that you're not going to change it.</p>\n"}], "owner": {"reputation": 2833, "user_id": 303250, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/363f15e560fb17bbfb5fe228a7b2dde2?s=128&d=identicon&r=PG", "display_name": "yapkm01", "link": "https://stackoverflow.com/users/303250/yapkm01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 1, "answer_count": 4, "score": 4, "last_activity_date": 1465246454, "creation_date": 1443640081, "question_id": 32873834, "link": "https://stackoverflow.com/questions/32873834/c-different-deduction-of-type-auto-between-const-int-and-cont-int", "title": "C++ : Different deduction of type auto between const int * and cont int &amp;", "body": "<p>Here are the code samples.</p>\n\n<pre><code>a. int ii = 0;\nb. const int ci = ii;\nc. auto e = &amp;ci; --&gt; e is const int *\nd. auto &amp;f = 42; --&gt; invalid initialization of non-const reference of type \u2018int&amp;\u2019 from an rvalue of type \u2018int\u2019\ne. const auto &amp;g = 42 --&gt; ok\n</code></pre>\n\n<p>Observation:<br>\n1. for clause c) the type const is automatically deduced<br>\n2. for clause d) the type const is not automatically deduced<br>\n3. for clause e) the type const has to be added manually in order for it to work.</p>\n\n<p>Why type const is automatically deduced for clause c but not d?</p>\n"}, {"tags": ["c++", "time", "milliseconds"], "comments": [{"owner": {"reputation": 2963, "user_id": 1855442, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61b99c64abe73180373944232b0c734f?s=128&d=identicon&r=PG", "display_name": "Pradheep", "link": "https://stackoverflow.com/users/1855442/pradheep"}, "edited": false, "score": 2, "creation_date": 1443639657, "post_id": 32873659, "comment_id": 53579077, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/19555121/how-to-get-current-timestamp-in-milliseconds-since-1970-just-the-way-java-gets\" title=\"how to get current timestamp in milliseconds since 1970 just the way java gets\">stackoverflow.com/questions/19555121/&hellip;</a>"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 2963, "user_id": 1855442, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61b99c64abe73180373944232b0c734f?s=128&d=identicon&r=PG", "display_name": "Pradheep", "link": "https://stackoverflow.com/users/1855442/pradheep"}, "edited": false, "score": 0, "creation_date": 1443639828, "post_id": 32873659, "comment_id": 53579169, "body": "It&#39;s not a duplicate, @Pradheep but it is very similar. It&#39;ll probably require a more involved answer than what that question required."}, {"owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 0, "creation_date": 1443640049, "post_id": 32873659, "comment_id": 53579269, "body": "If Boost is supported on your platform, it is probably the only system-independent method.  Otherwise, please specify an operating system and execution platform:  Linux, MSDOS, MSWindows, OS/2, Unix, etc., 32-bit, 64-bit, JRE, etc."}], "answers": [{"tags": [], "owner": {"reputation": 4121, "user_id": 19674, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5057291c386d12733d4123a1e277384e?s=128&d=identicon&r=PG", "display_name": "Jon Trauntvein", "link": "https://stackoverflow.com/users/19674/jon-trauntvein"}, "is_accepted": false, "score": 0, "last_activity_date": 1443639907, "creation_date": 1443639907, "answer_id": 32873779, "question_id": 32873659, "link": "https://stackoverflow.com/questions/32873659/how-can-i-get-current-time-of-day-in-milliseconds-in-c/32873779#32873779", "title": "How can I get current time of day in milliseconds in C++?", "body": "<p>With the exception of using boost::chrono, I am not aware of any system independent method.  I have implemented the following for windows and posix:</p>\n\n<pre><code>   LgrDate LgrDate::gmt()\n   {\n      LgrDate rtn;\n#ifdef _WIN32\n      SYSTEMTIME sys;\n      GetSystemTime(&amp;sys);\n      rtn.setDate(\n         sys.wYear,\n         sys.wMonth,\n         sys.wDay);\n      rtn.setTime(\n         sys.wHour,\n         sys.wMinute,\n         sys.wSecond,\n         sys.wMilliseconds*uint4(nsecPerMSec));\n#else\n      struct timeval time_of_day;\n      struct tm broken_down;\n      gettimeofday(&amp;time_of_day,0);\n      gmtime_r(\n         &amp;time_of_day.tv_sec,\n         &amp;broken_down);\n      rtn.setDate(\n         broken_down.tm_year + 1900,\n         broken_down.tm_mon + 1,\n         broken_down.tm_mday);\n      rtn.setTime(\n         broken_down.tm_hour,\n         broken_down.tm_min,\n         broken_down.tm_sec,\n         time_of_day.tv_usec * nsecPerUSec);\n#endif\n      return rtn;\n   } // gmt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "is_accepted": false, "score": 0, "last_activity_date": 1443640025, "creation_date": 1443640025, "answer_id": 32873809, "question_id": 32873659, "link": "https://stackoverflow.com/questions/32873659/how-can-i-get-current-time-of-day-in-milliseconds-in-c/32873809#32873809", "title": "How can I get current time of day in milliseconds in C++?", "body": "<p>On a POSIX system I would do</p>\n\n<pre><code>#include &lt;sys/time.h&gt;\n#include &lt;sys/resource.h&gt;\n\nstruct timespec tspec;\nclock_gettime(CLOCK_REALTIME, &amp;tspec);\nint sec = (int) tspec.tv_sec;\nint msec = (int) ((double) tspec.tv_nsec) / 1000000.0;\n</code></pre>\n\n<p>Note, <code>CLOCK_REALTIME</code> is used to get the wall clock, which is adjusted using NTP</p>\n\n<p>and then use whatever you have for the h:m:s part</p>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1443641691, "post_id": 32874098, "comment_id": 53580037, "body": "Thank Crom! I was looking at the other answers and wondering where the heck is std::chrono? The only problem here is on some systems you may have to switch to the high_resolution_clock to get the ms. system_clock should be good enough for modern desktop use, but test it to make sure the milliseconds are changing in ms, not 10s or 16s of ms."}, {"owner": {"reputation": 13376, "user_id": 873025, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/d8rRW.jpg?s=128&g=1", "display_name": "Snps", "link": "https://stackoverflow.com/users/873025/snps"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1443642042, "post_id": 32874098, "comment_id": 53580188, "body": "@user4581301 Ah yes, thanks for pointing it out! Use <a href=\"http://en.cppreference.com/w/cpp/chrono/high_resolution_clock\" rel=\"nofollow noreferrer\"><code>std::high_resolution_clock</code></a> when necessary."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 1, "creation_date": 1443643153, "post_id": 32874098, "comment_id": 53580674, "body": "I&#39;m going to disagree with using &#39;high_resolution_clock&#39;. Newer versions of C++ removed &#39;to_time_t&#39; from the high resolution clock, because it&#39;s not guaranteed to be aligned to any specific Epoch. In fact, most versions of the high resolution clock simply return the number of nanoseconds since the computer was turned on. Only &#39;system_clock&#39; expressly provides a &#39;to_time_t&#39; conversion in newer versions of C++. If you expressly need Millisecond precision in this kind of application, you should probably be tracking milliseconds a different way."}, {"owner": {"reputation": 13376, "user_id": 873025, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/d8rRW.jpg?s=128&g=1", "display_name": "Snps", "link": "https://stackoverflow.com/users/873025/snps"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1443643266, "post_id": 32874098, "comment_id": 53580715, "body": "@Xirema Ok, but then you can still use <code>std::high_resolution_clock</code> for calculating the number of milliseconds since the last second. The current local time have to be produced using <code>std::system_clock</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1443643651, "post_id": 32874098, "comment_id": 53580892, "body": "@Xirema just cut my comment off at the knees. It&#39;s not quite that simple. high_resolution_clock is the system&#39;s fastest clock and makes no pretenses of being mapped to a useful epoch without having a time_point of the time required, a time_point of the required epoch (<i>if this is possible</i> with the high_resolution_clock&#39;s implementation), and calculating the span between the two. Don&#39;t expect portability."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 1, "creation_date": 1443643820, "post_id": 32874098, "comment_id": 53580975, "body": "Yeah, but remember that that quantity of milliseconds is going to be aligned relative to when the computer is turned on, not to the System Clock&#39;s perception of each second relative to the Unix Time Stamp. &#39;high_resolution_clock&#39; will report milliseconds of, say, 436 when the CPU is actually 243 milliseconds out from the second. Then when the hrc reports 798, the CPU would be 605 milliseconds out. Basically, if Millisecond resolution is important, It has to be measured relative to HRC, not to the System Clock. And you won&#39;t get &quot;x milliseconds of the day&quot; in &quot;perfect&quot;, &lt;1ms resolution."}, {"owner": {"reputation": 13376, "user_id": 873025, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/d8rRW.jpg?s=128&g=1", "display_name": "Snps", "link": "https://stackoverflow.com/users/873025/snps"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1443644121, "post_id": 32874098, "comment_id": 53581140, "body": "@Xirema Hmm, good point. It seems logical that there won&#39;t be any requirement for synchronization between the two different clocks. It appears to be a tricky cat to skin when the system clock doesn&#39;t have millisecond resolution."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1443645877, "post_id": 32874098, "comment_id": 53581976, "body": "@Xirema Actually no guarantee that the epoch of high_resolution_clock is bound to system start. This is just a possible monotonic implementation. All that high_resolution_clock guarantees is that it is the fastest available clock. Could be system time, could be a monotonic counter, could be a hamster in a wheel. It&#39;s just fast."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1443645973, "post_id": 32874098, "comment_id": 53582032, "body": "Yeah, I&#39;m just using system start as an example to shorten the explanation. My comments were already brushing against the character limit."}], "tags": [], "owner": {"reputation": 13376, "user_id": 873025, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/d8rRW.jpg?s=128&g=1", "display_name": "Snps", "link": "https://stackoverflow.com/users/873025/snps"}, "is_accepted": true, "score": 8, "last_activity_date": 1443645669, "last_edit_date": 1495542265, "creation_date": 1443641074, "answer_id": 32874098, "question_id": 32873659, "link": "https://stackoverflow.com/questions/32873659/how-can-i-get-current-time-of-day-in-milliseconds-in-c/32874098#32874098", "title": "How can I get current time of day in milliseconds in C++?", "body": "<p>Using the portable <a href=\"http://en.cppreference.com/w/cpp/chrono\" rel=\"nofollow noreferrer\"><code>std::chrono</code></a></p>\n\n<pre><code>auto now = std::chrono::system_clock::now();\nauto time = std::chrono::system_clock::to_time_t(now);\nauto ms = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(now.time_since_epoch()) -\n          std::chrono::duration_cast&lt;std::chrono::seconds&gt;(now.time_since_epoch());\n\nstd::cout &lt;&lt; std::put_time(std::localtime(&amp;time), \"%H h %M m %S s \");\nstd::cout &lt;&lt; ms.count() &lt;&lt; \" ms\" &lt;&lt; std::endl;\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>21 h 24 m 22 s 428 ms</p>\n</blockquote>\n\n<p><kbd><a href=\"http://coliru.stacked-crooked.com/a/8addb8b90f62fe3a\" rel=\"nofollow noreferrer\"><strong>Live example</strong></a></kbd></p>\n\n<hr>\n\n<h3>Note for systems with clocks that doesn't support millisecond resolution</h3>\n\n<p>As pointed out by <a href=\"https://stackoverflow.com/questions/32873659/how-can-i-get-current-time-of-day-in-milliseconds-in-c#comment53580037_32874098\">@user4581301</a>, on some systems <a href=\"http://en.cppreference.com/w/cpp/chrono/system_clock\" rel=\"nofollow noreferrer\"><code>std::system_clock</code></a> might not have enough resolution for accurately representing current time in milliseconds. If that is the case, try using <a href=\"http://en.cppreference.com/w/cpp/chrono/high_resolution_clock\" rel=\"nofollow noreferrer\"><code>std::high_resolution_clock</code></a> for calculating the number of milliseconds since the last second. This will ensure the highest available resolution provided by your implementation.</p>\n\n<p>Taking the time from two clocks will inevitably lead you to get two separate points in time (however small the time difference will be). So keep in mind that using a separate clock for calculating the milliseconds will not yield perfect synchronization between the second, and millisecond periods.</p>\n\n<pre><code>// Use system clock for time.\nauto now = std::chrono::system_clock::now();\n\n/* A small amount of time passes between storing the time points. */\n\n// Use separate high resolution clock for calculating milliseconds.\nauto hnow = std::chrono::high_resolution_clock::now();\nauto ms = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(hnow.time_since_epoch()) -\n          std::chrono::duration_cast&lt;std::chrono::seconds&gt;(hnow.time_since_epoch());\n</code></pre>\n\n<p>Also, there seems to be no guarantee that the tick events of <code>std::high_resolution_clock</code> and <code>std::system_clock</code> are synchronized, and because of this the millisecond period might not be in sync with the periodic update of the current second given by the system clock.</p>\n\n<p>Because of these reasons, using a separate high resolution clock for millisecond resolution should not be used when &lt;1 second precision is critical.</p>\n"}], "owner": {"reputation": 13, "user_id": 5317984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed3a63572ad91abc72555dd7dc886b8?s=128&d=identicon&r=PG&f=1", "display_name": "\u041d\u0438\u043a\u0438\u0442\u0430 \u041c\u0430\u043b\u044b\u0448\u0435\u0432", "link": "https://stackoverflow.com/users/5317984/%d0%9d%d0%b8%d0%ba%d0%b8%d1%82%d0%b0-%d0%9c%d0%b0%d0%bb%d1%8b%d1%88%d0%b5%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3310, "favorite_count": 0, "accepted_answer_id": 32874098, "answer_count": 3, "score": 1, "last_activity_date": 1443645669, "creation_date": 1443639445, "last_edit_date": 1443642780, "question_id": 32873659, "link": "https://stackoverflow.com/questions/32873659/how-can-i-get-current-time-of-day-in-milliseconds-in-c", "title": "How can I get current time of day in milliseconds in C++?", "body": "<p>The thing is, I have to somehow get current time of day in milliseconds in convenient format.</p>\n\n<p>Example of desired output:</p>\n\n<blockquote>\n  <p>21 h 04 min 12 s 512 ms</p>\n</blockquote>\n\n<p>I know how to get this format in seconds, but I have no idea how to get my hands on milliseconds?</p>\n"}, {"tags": ["python", "c++", "design-patterns"], "comments": [{"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1443639757, "post_id": 32873650, "comment_id": 53579137, "body": "Do you mean this <a href=\"https://pypi.python.org/pypi/lazy\" rel=\"nofollow noreferrer\"><code>lazy</code> package</a> and this <a href=\"http://pythonhosted.org/lazy/#lazy.lazy\" rel=\"nofollow noreferrer\"><code>lazy</code> decorator</a> ?"}, {"owner": {"reputation": 11, "user_id": 4032227, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UBItefiNm_Y/AAAAAAAAAAI/AAAAAAAAAIE/7kbgYqPKr74/photo.jpg?sz=128", "display_name": "Alexander Steshenko", "link": "https://stackoverflow.com/users/4032227/alexander-steshenko"}, "reply_to_user": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1443640009, "post_id": 32873650, "comment_id": 53579249, "body": "Hi Bakuriu, yep decorator. Example: class lazy(object):         def __init__(self, function):                 self._function = function          def __get__(self, instance, owner = None):                 if instance == None:                         return self                 val = self._function(instance)                 setattr(instance, self._function.func_name, val)                 return val"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1443642668, "post_id": 32873650, "comment_id": 53580470, "body": "It isn&#39;t clear what your specific problem is."}, {"owner": {"reputation": 11, "user_id": 4032227, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UBItefiNm_Y/AAAAAAAAAAI/AAAAAAAAAIE/7kbgYqPKr74/photo.jpg?sz=128", "display_name": "Alexander Steshenko", "link": "https://stackoverflow.com/users/4032227/alexander-steshenko"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1443643515, "post_id": 32873650, "comment_id": 53580831, "body": "@n.m. hi. Ok, sorry for bad explanation. I want don`t create object while it not need. I stored raw data which transfer into constructor but not immediately. While object not need it just storaged (lazy) for create object in future and data for transfer in constructor. I want create objects to demand. How implement this on Python I know but C++ porting difficult for me."}, {"owner": {"reputation": 11, "user_id": 4032227, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UBItefiNm_Y/AAAAAAAAAAI/AAAAAAAAAIE/7kbgYqPKr74/photo.jpg?sz=128", "display_name": "Alexander Steshenko", "link": "https://stackoverflow.com/users/4032227/alexander-steshenko"}, "reply_to_user": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1443643744, "post_id": 32873650, "comment_id": 53580939, "body": "@Bakuriu yep how decorator."}, {"owner": {"reputation": 1355, "user_id": 1163462, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fb5426025e066629df319666ed5dd553?s=128&d=identicon&r=PG", "display_name": "basav", "link": "https://stackoverflow.com/users/1163462/basav"}, "edited": false, "score": 0, "creation_date": 1443674978, "post_id": 32873650, "comment_id": 53589979, "body": "you mean something like this ??:<a href=\"http://stackoverflow.com/questions/21252296/lazy-initialization-with-singleton-pattern\" title=\"lazy initialization with singleton pattern\">stackoverflow.com/questions/21252296/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 4032227, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UBItefiNm_Y/AAAAAAAAAAI/AAAAAAAAAIE/7kbgYqPKr74/photo.jpg?sz=128", "display_name": "Alexander Steshenko", "link": "https://stackoverflow.com/users/4032227/alexander-steshenko"}, "reply_to_user": {"reputation": 1355, "user_id": 1163462, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fb5426025e066629df319666ed5dd553?s=128&d=identicon&r=PG", "display_name": "basav", "link": "https://stackoverflow.com/users/1163462/basav"}, "edited": false, "score": 0, "creation_date": 1443697030, "post_id": 32873650, "comment_id": 53601431, "body": "@basav thanks for answer maybe this is solution of my problem."}], "owner": {"reputation": 11, "user_id": 4032227, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UBItefiNm_Y/AAAAAAAAAAI/AAAAAAAAAIE/7kbgYqPKr74/photo.jpg?sz=128", "display_name": "Alexander Steshenko", "link": "https://stackoverflow.com/users/4032227/alexander-steshenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1443639721, "creation_date": 1443639404, "last_edit_date": 1495542572, "question_id": 32873650, "link": "https://stackoverflow.com/questions/32873650/lazy-evaluation-with-pair-factory-in-c", "title": "Lazy evaluation with pair factory in C++", "body": "<p>I'm trying to implement <code>lazy</code> in C++ like in this Python example using decorators:</p>\n\n<pre><code>@lazy\n@factory(Category)\ndef func(self):\n    return self.__raw_data  # for building object include object type and **params\n</code></pre>\n\n<p>I found <a href=\"http://bartoszmilewski.com/2014/04/21/getting-lazy-with-c/\" rel=\"nofollow noreferrer\">Getting Lazy with C++</a> and <a href=\"https://stackoverflow.com/questions/414243/lazy-evaluation-in-c\">Lazy evaluation in C++</a> post but they haven't helped me. I don't understand how implement the lazy.</p>\n"}, {"tags": ["c++", "qt", "layout"], "comments": [{"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1443641270, "post_id": 32873581, "comment_id": 53579821, "body": "It is simple: you have only created the layout in some container widget. But you want the content of layout to be scaled, right? rzadKontener-&gt;addWidget(pSomeOtheWidget); I guess."}, {"owner": {"reputation": 404, "user_id": 4673641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8a9875f1b03f66af55450397ed8da52?s=128&d=identicon&r=PG&f=1", "display_name": "jhnnslschnr", "link": "https://stackoverflow.com/users/4673641/jhnnslschnr"}, "reply_to_user": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1443641394, "post_id": 32873581, "comment_id": 53579897, "body": "@AlexanderVX <code>rzadKontenerLayout-&gt;addWidget(...)</code> i guess"}, {"owner": {"reputation": 818, "user_id": 4791056, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh3.googleusercontent.com/-bqHPOIJKwFg/AAAAAAAAAAI/AAAAAAAAAB4/dYsinW5LVhY/photo.jpg?sz=128", "display_name": "Petersaber", "link": "https://stackoverflow.com/users/4791056/petersaber"}, "reply_to_user": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1443641424, "post_id": 32873581, "comment_id": 53579913, "body": "@AlexanderVX I am doing that. <code>ui-&gt;listWidgetZdjeciaModelu-&gt;findChild&lt;QWidget*&gt;(objectName)&zwnj;&#8203;-&gt;layout()-&gt;addWidge&zwnj;&#8203;t(zdjecieKontener);</code> where <code>objectName</code> equals <code>&quot;rzadKontener_&quot; + poziom</code> . <code>zdjecieKontener</code> is a picture, a name, a lineEdit and a button. It adds it, but doesn&#39;t scale."}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1443641697, "post_id": 32873581, "comment_id": 53580040, "body": "Yes, I meant rzadKontenerLayout-&gt;addWidget(...)  thank you."}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1443641751, "post_id": 32873581, "comment_id": 53580065, "body": "@Petersaber make sure that     widget-&gt;setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding);"}, {"owner": {"reputation": 818, "user_id": 4791056, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh3.googleusercontent.com/-bqHPOIJKwFg/AAAAAAAAAAI/AAAAAAAAAB4/dYsinW5LVhY/photo.jpg?sz=128", "display_name": "Petersaber", "link": "https://stackoverflow.com/users/4791056/petersaber"}, "reply_to_user": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1443641890, "post_id": 32873581, "comment_id": 53580118, "body": "@AlexanderVX it&#39;s set. But maybe I have to edit the <code>QListWidgetItem</code> instead? But how do I access that..."}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1443642168, "post_id": 32873581, "comment_id": 53580233, "body": "The policy should be set for the widget you are inserting to layout. And I am unsure why that fixed length at container?"}, {"owner": {"reputation": 818, "user_id": 4791056, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh3.googleusercontent.com/-bqHPOIJKwFg/AAAAAAAAAAI/AAAAAAAAAB4/dYsinW5LVhY/photo.jpg?sz=128", "display_name": "Petersaber", "link": "https://stackoverflow.com/users/4791056/petersaber"}, "reply_to_user": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1443643353, "post_id": 32873581, "comment_id": 53580756, "body": "@AlexanderVX it&#39;d be easiest to just adjust the QListWidgetItem size, but I have no idea how"}], "answers": [{"tags": [], "owner": {"reputation": 818, "user_id": 4791056, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh3.googleusercontent.com/-bqHPOIJKwFg/AAAAAAAAAAI/AAAAAAAAAB4/dYsinW5LVhY/photo.jpg?sz=128", "display_name": "Petersaber", "link": "https://stackoverflow.com/users/4791056/petersaber"}, "is_accepted": false, "score": 1, "last_activity_date": 1443650616, "last_edit_date": 1443650616, "creation_date": 1443645518, "answer_id": 32875205, "question_id": 32873581, "link": "https://stackoverflow.com/questions/32873581/qt-c-qlistwidget-layout-doesnt-scale-to-fit-the-content/32875205#32875205", "title": "Qt C++ - QListWidget layout doesn&#39;t scale to fit the content", "body": "<p>I found an answer. Instead of modifying the QWidget inside the list, I should be modifying the <code>QListWidgetItem</code> it's inside of (the parent...). </p>\n\n<pre><code>QWidget* newPicture = new QWidget;\nyadda yadda yadda (....)\nint currentRowWidth = ui-&gt;listWidgetZdjeciaModelu-&gt;findChild&lt;QWidget*&gt;(objectName)-&gt;width(); //gets max width of rzadKontener, which fills the entirety of the row - it equals the QListWidgetItem's width\nint newWidth = currentRowWidth + 225; //225 is a fixed width of newPicture \nui-&gt;listWidgetZdjeciaModelu-&gt;item(0)-&gt;setSizeHint(QSize(newWidth, 200));\n\nui-&gt;listWidgetZdjeciaModelu-&gt;findChild&lt;QWidget*&gt;(objectName)-&gt;layout()-&gt;addWidget(newPicture );\n</code></pre>\n\n<p>We can do <code>ui-&gt;listWidgetZdjeciaModelu-&gt;item(0)-&gt;setSizeHint(QSize(newWidth, 200));</code> instead of a specific row (<code>-&gt;item(row)</code>), because the list is a rectangle. Doesn't matter which row we enlarge, the entire thing will stretch anyway. </p>\n\n<p>But, if you want to get the row number, you can do it this way:</p>\n\n<pre><code>int row=0; \n//we make a list. Each of my QListWidgetItem has a unique string poziom in it, so I can filter by that. \nQList&lt;QListWidgetItem *&gt; items = ui-&gt;listWidgetZdjeciaModelu-&gt;findItems(poziom, Qt::MatchContains);\nif (items.size() &gt; 0) {\n    //we use the first (and only, in my case) item on this list to get row number\n    row = ui-&gt;listWidgetZdjeciaModelu-&gt;row(items[0]); \n}\n</code></pre>\n\n<p>Weird thing is, I already tried this. Must've kept making a typo.</p>\n"}], "owner": {"reputation": 818, "user_id": 4791056, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh3.googleusercontent.com/-bqHPOIJKwFg/AAAAAAAAAAI/AAAAAAAAAB4/dYsinW5LVhY/photo.jpg?sz=128", "display_name": "Petersaber", "link": "https://stackoverflow.com/users/4791056/petersaber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 786, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443650616, "creation_date": 1443639143, "last_edit_date": 1443650585, "question_id": 32873581, "link": "https://stackoverflow.com/questions/32873581/qt-c-qlistwidget-layout-doesnt-scale-to-fit-the-content", "title": "Qt C++ - QListWidget layout doesn&#39;t scale to fit the content", "body": "<p>I have a <code>QWidget rzadKontener</code> that represents a row in a <code>QListWidget</code>. </p>\n\n<pre><code>QWidget* rzadKontener = new QWidget;\nQHBoxLayout* rzadKontenerLayout = new QHBoxLayout();\nrzadKontenerLayout-&gt;setAlignment(Qt::AlignLeft);\nrzadKontenerLayout-&gt;setAlignment(Qt::AlignTop);\nrzadKontener-&gt;setObjectName(\"rzadKontener_\" + poziom);\nrzadKontener-&gt;setFixedHeight(200);\nrzadKontener-&gt;setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding);\nrzadKontener-&gt;setLayout(rzadKontenerLayout);\n\n (....)\n\nQListWidgetItem* newItemRzad = new QListWidgetItem;\nnewItemRzad-&gt;setSizeHint(QSize(listSize*225, 200));\nQString poziomText = poziom;\nnewItemRzad-&gt;setText(poziomText);\nnewItemRzad-&gt;setTextColor(QColor(Qt::white));\n\nui-&gt;listWidgetZdjeciaModelu-&gt;addItem(newItemRzad);\nui-&gt;listWidgetZdjeciaModelu-&gt;setItemWidget(newItemRzad, rzadKontener);\n</code></pre>\n\n<p>It contains a number of items, that are <code>QWidgets</code> with pictures, buttons and text. It is then placed in a <code>QListWidget</code> as a row full of these items. When I add 5 items at once, while creating a new <code>rzadKontener</code>, scroll bars in the <code>QListWidget</code> will appear. But if I add 3 and then 2 items later on, they'll go out of bounds without a scrollbar. How can I force the layout to scale to the new <code>rzadKontener</code>'s size?</p>\n"}, {"tags": ["c++", "algorithm", "jpeg", "file-format"], "comments": [{"owner": {"reputation": 19534, "user_id": 884862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c16a1a1a26718fe4ba2d0903ebb056f2?s=128&d=identicon&r=PG", "display_name": "Louis Ricci", "link": "https://stackoverflow.com/users/884862/louis-ricci"}, "edited": false, "score": 0, "creation_date": 1443641317, "post_id": 32873541, "comment_id": 53579839, "body": "You could probably just search for your metadata from the beginning and end of your image file, in the hopes that no sane peice of software would jam metadata between image data in the middle of a file."}, {"owner": {"reputation": 7979, "user_id": 104109, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1ef4d8fdadddc19a7314267a649bc10c?s=128&d=identicon&r=PG", "display_name": "BitBank", "link": "https://stackoverflow.com/users/104109/bitbank"}, "edited": false, "score": 0, "creation_date": 1443690191, "post_id": 32873541, "comment_id": 53597288, "body": "All meta-data should be defined BEFORE you hit the SOS tag."}, {"owner": {"reputation": 2873, "user_id": 1929959, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/be7c8d8d01d02c41df25100e7f294234?s=128&d=identicon&r=PG", "display_name": "Mihai8", "link": "https://stackoverflow.com/users/1929959/mihai8"}, "edited": false, "score": 0, "creation_date": 1561770182, "post_id": 32873541, "comment_id": 100182737, "body": "You can use <a href=\"https://www.exiv2.org/\" rel=\"nofollow noreferrer\">exiv2.org</a> to extract metadata."}], "answers": [{"tags": [], "owner": {"reputation": 7287, "user_id": 594267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a822bcc4849454cfc43b073bb0b8df6?s=128&d=identicon&r=PG", "display_name": "Vinicius Kamakura", "link": "https://stackoverflow.com/users/594267/vinicius-kamakura"}, "is_accepted": false, "score": 0, "last_activity_date": 1443641420, "creation_date": 1443641420, "answer_id": 32874177, "question_id": 32873541, "link": "https://stackoverflow.com/questions/32873541/scanning-a-jpeg-file-for-markers/32874177#32874177", "title": "Scanning a JPEG file for markers", "body": "<p>Maybe visit <a href=\"http://www.ijg.org/\" rel=\"nofollow\">http://www.ijg.org/</a>, download the C code and check how they do on the lib?</p>\n\n<p>I think djpeg.c has a parser for the markers.</p>\n"}, {"tags": [], "owner": {"reputation": 18530, "user_id": 3344003, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/988af95d5692ee66b1fc2fe725ba738e?s=128&d=identicon&r=PG&f=1", "display_name": "user3344003", "link": "https://stackoverflow.com/users/3344003/user3344003"}, "is_accepted": false, "score": 1, "last_activity_date": 1443813624, "creation_date": 1443813624, "answer_id": 32914362, "question_id": 32873541, "link": "https://stackoverflow.com/questions/32873541/scanning-a-jpeg-file-for-markers/32914362#32914362", "title": "Scanning a JPEG file for markers", "body": "<blockquote>\n  <p>So ... if you hit a \"Start-Of-Scan\" marker while iterating over a JPEG\n  file, how do you know where the next marker begins? Do you simply have\n  to do a linear search, byte-by-byte, to find the next 0xFF character?</p>\n</blockquote>\n\n<p>In a scan you can have FF00 or a restart marker. Any other  FFxx sequence should be the start of the next block.</p>\n\n<p>Also, a JPEG image does not have to have an APP0 marker.</p>\n"}], "owner": {"reputation": 7675, "user_id": 2923952, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/71908bd318301d831c4b9eb6ca1c13a2?s=128&d=identicon&r=PG&f=1", "display_name": "Siler", "link": "https://stackoverflow.com/users/2923952/siler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1253, "favorite_count": 2, "answer_count": 2, "score": 5, "last_activity_date": 1561769035, "creation_date": 1443638954, "last_edit_date": 1561769035, "question_id": 32873541, "link": "https://stackoverflow.com/questions/32873541/scanning-a-jpeg-file-for-markers", "title": "Scanning a JPEG file for markers", "body": "<p>I have a C++ application that has a very straightforward requirement of extracting some meta-data from a JPEG file.  </p>\n\n<p>There are various libraries to do this, but initially when prototyping I simply wanted to get things done fast, and since I knew the anatomy of a JPEG file was conveniently delineated by <a href=\"https://en.wikipedia.org/wiki/JPEG#Syntax_and_structure\" rel=\"nofollow noreferrer\">a series of markers</a>, (i.e. <code>{0xFF, 0xXX}</code> tuples with a corresponding length field), I thought it would be easy enough to just iterate over the sections of a JPEG file by starting from the first marker, and iterating from marker to marker until I hit the End-Of-Image marker.</p>\n\n<p>This was easy to implement by simply reading in the JPEG data into an <code>std::vector&lt;unsigned char&gt;</code>, and then just iterating over it, finding marker sections.  I eventually abstracted this logic into a \"marker-iterator\" class that made it even easier to work with.</p>\n\n<p>Generally this works great.  In fact, usually the meta-data I'm interested in appears in the first marker after the SOI marker (i.e. the APP0 marker, beginning with <code>{ 0xF0, 0xE0 }</code>).  So, for the most part I don't even NEED to actually write logic to iterate over the <em>whole</em> JPEG file - I can just check the header which always contains the APP0 marker.</p>\n\n<p>Except then I discovered my assumption was wrong.  Apparently, the <code>0xF0</code>, <code>0xE0</code> marker <a href=\"https://stackoverflow.com/questions/5413022/is-the-2nd-and-3rd-byte-of-a-jpeg-image-always-the-app0-or-app1-marker\"><strong>doesn't ALWAYS have to be the first segment</strong></a>.  </p>\n\n<p>Okay, no problem - iterating over all the markers is easy enough anyway.  Except, then I ran into another problem.  For the most part, finding the next marker is as easy as adding a length field to the current index position into the JPEG data buffer.  But apparently some length fields <em>don't actually indicate the entire length</em> of a particular segment.  For example, the <strong>\"Start-Of-Scan\"</strong> segment in a JPEG file is followed by <a href=\"https://en.wikipedia.org/wiki/JPEG#Syntax_and_structure\" rel=\"nofollow noreferrer\"><strong>\"entropy-coded data\"</strong></a>.  The size of the \"entropy-coded data\" is not included in the length field.</p>\n\n<p>So ... if you hit a \"Start-Of-Scan\" marker while iterating over a JPEG file, how do you know where the next marker begins?  Do you simply have to do a linear search, byte-by-byte, to find the next <code>0xFF</code> character?  </p>\n\n<p>Actually, that wouldn't work either, because the entropy-coded data <em>itself</em> may contain <code>0xFF</code> characters.  However, apparently it is required by the JPEG standard that any <code>0xFF</code> byte that appears in the entropy-coded data must be followed by a <code>0x00</code> byte to differentiate it from an actual marker.</p>\n\n<p>Okay, so that still doesn't give me any way to find the next marker after the \"Start-Of-Scan\" section <em>without</em> doing a brute force linear search.  Is that the only possible way to do it (without complex parsing logic that is specific for the \"Start-Of-Scan\" section?)</p>\n"}, {"tags": ["c++", "unit-testing", "googlemock"], "answers": [{"tags": [], "owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "is_accepted": true, "score": 21, "last_activity_date": 1443648224, "last_edit_date": 1443648224, "creation_date": 1443641046, "answer_id": 32874089, "question_id": 32873490, "link": "https://stackoverflow.com/questions/32873490/using-google-mocks-how-to-give-a-mock-implementation-without-caring-about-set/32874089#32874089", "title": "Using Google Mocks, how to give a mock implementation without caring about / setting any expectation of invocation", "body": "<p>Include the Google Mock header file:</p>\n\n<pre><code>#include &lt;gmock/gmock.h&gt;\n</code></pre>\n\n<p>Declare a mock class:</p>\n\n<pre><code>struct MyMock : MyInterface\n{\n    MOCK_METHOD3( doThing, int(int x, int y, int z) );\n};\n</code></pre>\n\n<p>Instantiate the mock as a <em>NiceMock</em> (it won't issue any warning upon an unregistered call):</p>\n\n<pre><code>testing::NiceMock&lt;MyMock&gt; mock;\n</code></pre>\n\n<p>Bring the <em>anything</em> matcher to the scope:</p>\n\n<pre><code>using testing::_;\n</code></pre>\n\n<p>Define default behavior with <code>ON_CALL</code> rather than <code>EXPECT_CALL</code> using one of the below options:</p>\n\n<h3>Option #1</h3>\n\n<p>Hard-code a default return value:</p>\n\n<pre><code>ON_CALL( mock, doThing(_,_,_) ).WillByDefault(testing::Return(0));\n//                                     default return value ~~^\n</code></pre>\n\n<h3>Option #2</h3>\n\n<p>Delegate the call to a global function:</p>\n\n<pre><code>int foo(int x, int y, int z)\n{\n    if (x == 1)\n        return y + z;\n    else\n        return y - z;\n}\n\nON_CALL( mock, doThing(_,_,_) ).WillByDefault(testing::Invoke(foo));\n</code></pre>\n\n<h3>Option #3</h3>\n\n<p>Delegate the call to a lambda expression (C++11):</p>\n\n<pre><code>ON_CALL( mock, doThing(_,_,_) ).WillByDefault(testing::Invoke(\n    [] (int x, int y, int z)\n    { \n        if (x == 1)\n            return y + z;\n        else\n            return y - z;\n    }\n));\n</code></pre>\n\n<h3>Option #4</h3>\n\n<p>Build a lambda expression with the <em>Boost.Lambda</em> library:</p>\n\n<pre><code>#include &lt;boost/lambda/lambda.hpp&gt;\n#include &lt;boost/lambda/if.hpp&gt;\n\nusing namespace boost::lambda;\n\nON_CALL( mock, doThing(_,_,_) ).WillByDefault(testing::Invoke(\n    ret&lt;int&gt;(if_then_else(_1 == 1, _2 + _3, _2 - _3))\n));\n\n// or: ret&lt;int&gt;(if_(_1 == 1)[_2 + _3].else_[_2 - _3])\n</code></pre>\n"}], "owner": {"reputation": 839, "user_id": 5090093, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/wU3YG.jpg?s=128&g=1", "display_name": "nappyfalcon", "link": "https://stackoverflow.com/users/5090093/nappyfalcon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12648, "favorite_count": 1, "accepted_answer_id": 32874089, "answer_count": 1, "score": 6, "last_activity_date": 1443648224, "creation_date": 1443638775, "last_edit_date": 1443648125, "question_id": 32873490, "link": "https://stackoverflow.com/questions/32873490/using-google-mocks-how-to-give-a-mock-implementation-without-caring-about-set", "title": "Using Google Mocks, how to give a mock implementation without caring about / setting any expectation of invocation", "body": "<p>I have an interface class say:</p>\n\n<pre><code>class MyInterface\n{\npublic:\n    virtual int doThing(int x, int y, int z) = 0;\n};\n</code></pre>\n\n<p>I want to write a mock implementation for use in my tests. E.g.Traditionally, without using Google Mocks, I would write say:</p>\n\n<pre><code>class MyMock : public MyInterface\n{\npublic:\n    virtual int doThing(int x, int y, int z)\n    {\n        if (x == 1)\n            return y + z;\n        else\n            return y - z;\n    }\n};\n</code></pre>\n\n<p>How would I do this in google mocks. Please note, I don't want to (Ok, I don't need to) set an expectation about how this mock is called. I'm just using it to test something else.</p>\n\n<p>How would you do it (and what is the most clearest way)? I find the google mocks documentation a little too concise to figure this out.</p>\n"}, {"tags": ["c++", "c++11", "unique-ptr"], "comments": [{"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 4, "creation_date": 1443638154, "post_id": 32873299, "comment_id": 53578262, "body": "without seeing some code it&#39;s hard to tell."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1443638164, "post_id": 32873299, "comment_id": 53578271, "body": "Please <b><a href=\"https://stackoverflow.com/posts/32873299/edit\">edit</a></b> your question with an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> or <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE (Short, Self Contained, Correct Example)</a>"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1443639635, "post_id": 32873299, "comment_id": 53579073, "body": "You should only be passing a <code>std::unique_ptr</code> to a function if that function may need to alter its ownership. Otherwise you should pass the <i>raw pointer</i> (or a reference) that the <code>unique_ptr</code> is managing."}], "answers": [{"tags": [], "owner": {"reputation": 2348, "user_id": 864406, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd625e8a9c68a44bee8185847b7b59b0?s=128&d=identicon&r=PG", "display_name": "Lucretiel", "link": "https://stackoverflow.com/users/864406/lucretiel"}, "is_accepted": false, "score": 0, "last_activity_date": 1443638404, "creation_date": 1443638404, "answer_id": 32873392, "question_id": 32873299, "link": "https://stackoverflow.com/questions/32873299/unique-ptr-destructor-saying-object-has-never-been-allocated/32873392#32873392", "title": "Unique_ptr destructor saying object has never been allocated", "body": "<p>I'd need to see a code example to give you a specific solution or feedback.</p>\n\n<p>However, this line:</p>\n\n<blockquote>\n  <p>Right now, I create a unique_ptr to this object and pass a reference to that unique_ptr to other objects to perform certain tasks.</p>\n</blockquote>\n\n<p>is very suspicious to me. It's almost always incorrect to pass the reference to your <code>unique_ptr</code> (or other owning data structure) around. You should favor a simple reference to the underlying object; that is, you should replace all instances of <code>std_unqiue_ptr&lt;Model&gt;&amp;</code> with <code>Model&amp;</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 3332140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9dd468af69f317e136172f0f1c734a7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3332140/alex"}, "is_accepted": false, "score": -1, "last_activity_date": 1443639328, "last_edit_date": 1443639328, "creation_date": 1443639012, "answer_id": 32873557, "question_id": 32873299, "link": "https://stackoverflow.com/questions/32873299/unique-ptr-destructor-saying-object-has-never-been-allocated/32873557#32873557", "title": "Unique_ptr destructor saying object has never been allocated", "body": "<p>When I read it:</p>\n\n<blockquote>\n  <p>Right now, I create a unique_ptr to this object and pass a reference to that unique_ptr to other objects to perform certain tasks.</p>\n</blockquote>\n\n<p>I understand something like</p>\n\n<pre><code>std::unique_ptr&lt;type&gt; u( new type() );\nstd::unique_ptr&lt;type&gt; w = u;\n</code></pre>\n\n<p>But the principe of the <code>unique_ptr</code> is to be handled only one time. This throw an error because the copy-contructor of a <code>unique_ptr</code>-wrapped object is disabled.</p>\n\n<p>But without an example, dificult to answer :)</p>\n"}, {"comments": [{"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 1, "creation_date": 1443639382, "post_id": 32873594, "comment_id": 53578958, "body": "There would be no need for a naked pointer. You can just pass the object itself (as opposed to the <code>shared_ptr</code>) by reference."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1443639504, "post_id": 32873594, "comment_id": 53579018, "body": "@BenjaminLindley, using pointer interface might be preferred for some reason."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": -2, "last_activity_date": 1443639194, "creation_date": 1443639194, "answer_id": 32873594, "question_id": 32873299, "link": "https://stackoverflow.com/questions/32873299/unique-ptr-destructor-saying-object-has-never-been-allocated/32873594#32873594", "title": "Unique_ptr destructor saying object has never been allocated", "body": "<p>Contrary to some answers here, there is nothing wrong with passing managing entities (shared_ptr, unique_ptr) by const reference. In fact, passing by reference might be the only way in some cases with unique_ptr and preferred with shared_ptr. Example:</p>\n\n<pre><code>void foo(const std::shared_ptr&lt;obj_t&gt;/*&amp;*/ obj) { obj-&gt;func(); }\n</code></pre>\n\n<p>Without the reference, there would be an unncessary reference counter increment/decrement, causing performance delay. No, someone would argue that there is no need to use shared_ptr in the foo() to begin with, and I would agree, but some development environments I've seen are really strict about 'no naked pointers in our code!', and arguing them wrong might cost you your job. In this case, passing by reference is the solution.</p>\n"}, {"tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": true, "score": 1, "last_activity_date": 1443640064, "creation_date": 1443640064, "answer_id": 32873826, "question_id": 32873299, "link": "https://stackoverflow.com/questions/32873299/unique-ptr-destructor-saying-object-has-never-been-allocated/32873826#32873826", "title": "Unique_ptr destructor saying object has never been allocated", "body": "<p><strong>1. <em>Why is this error happening?</em></strong></p>\n\n<p>Without seeing your code it is impossible to answer why this is happening.</p>\n\n<p><strong>2. <em>Is unique_ptr the right way to tackle this problem?</em></strong></p>\n\n<p>According to Straustrup and Sutter's <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#Rr-smartptrparam\" rel=\"nofollow\">Core Guidlines</a></p>\n\n<blockquote>\n  <h3> R.30: Take smart pointers as parameters only to explicitly express lifetime semantics</h3>\n  \n  <p><strong>Reason</strong>: Accepting a smart pointer to a <code>widget</code> is wrong if the function just needs the <code>widget</code> itself.\n  It should be able to accept any <code>widget</code> object, not just ones whose lifetimes are managed by a particular kind of smart pointer.\n  A function that does not manipulate lifetime should take raw pointers or references instead.</p>\n</blockquote>\n\n<p>You should only be passing a <code>std::unique_ptr</code> to a function if that function may need to alter its <em>ownership</em>. Otherwise you should pass the <em>raw pointer</em> or a <em>reference</em> to the object that the <code>unique_ptr</code> is managing.</p>\n"}], "owner": {"reputation": 19, "user_id": 1096633, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f9dcbfad8b59d50a0d005d60048388da?s=128&d=identicon&r=PG", "display_name": "pandapirate", "link": "https://stackoverflow.com/users/1096633/pandapirate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "accepted_answer_id": 32873826, "answer_count": 4, "score": -2, "last_activity_date": 1443643239, "creation_date": 1443638047, "last_edit_date": 1443643239, "question_id": 32873299, "link": "https://stackoverflow.com/questions/32873299/unique-ptr-destructor-saying-object-has-never-been-allocated", "title": "Unique_ptr destructor saying object has never been allocated", "body": "<p>I have a main process that owns a Model object. The purpose of this is to share a Model between various objects that performs tasks and modifies the same Model. </p>\n\n<p>Right now, I create a unique_ptr to this object and pass a reference to that unique_ptr to other objects to perform certain tasks. </p>\n\n<p>The tasks all complete correctly, but something weird happens when it tries to call the destructor on the unique_ptr. It shows:</p>\n\n<p>RAW: memory allocation bug: object at 0xd0ebdfb2b8 has never been allocated</p>\n\n<p>Question:</p>\n\n<ol>\n<li>Why is this error happening?</li>\n<li>Is unique_ptr the right way to tackle this problem?</li>\n</ol>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "inheritance", "multiple-inheritance", "virtual-inheritance"], "comments": [{"owner": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "edited": false, "score": 2, "creation_date": 1443638313, "post_id": 32873294, "comment_id": 53578350, "body": "Works in MSVC. What compiler are you using? It looks like it thinks <code>AB::foo()</code> is not a member of <code>AB</code>, double check the signature is identical in your non-simplified version.."}, {"owner": {"reputation": 225, "user_id": 1535728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6fdb58ee777ca61d910e8de06fece8b9?s=128&d=identicon&r=PG", "display_name": "zeropoint", "link": "https://stackoverflow.com/users/1535728/zeropoint"}, "edited": false, "score": 0, "creation_date": 1443638539, "post_id": 32873294, "comment_id": 53578480, "body": "Yes, compiles fine in MSVC! Please state the compiler, version, and any compiler flags (if you are using any)."}, {"owner": {"reputation": 396, "user_id": 3603857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qwxrm.png?s=128&g=1", "display_name": "DrWatson", "link": "https://stackoverflow.com/users/3603857/drwatson"}, "edited": false, "score": 0, "creation_date": 1443638588, "post_id": 32873294, "comment_id": 53578505, "body": "<a href=\"http://codepad.org/7vxKWShz\" rel=\"nofollow noreferrer\">codepad.org/7vxKWShz</a>"}, {"owner": {"reputation": 108, "user_id": 2088857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a265e83572ee6e21bb0425512277b8f5?s=128&d=identicon&r=PG", "display_name": "kc9jud", "link": "https://stackoverflow.com/users/2088857/kc9jud"}, "edited": false, "score": 0, "creation_date": 1443638823, "post_id": 32873294, "comment_id": 53578654, "body": "I realized that I had typo&#39;d -- <code>void foo()</code> and <code>void AB::foo()</code> are very different!"}], "answers": [{"tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": false, "score": 0, "last_activity_date": 1443638481, "creation_date": 1443638481, "answer_id": 32873407, "question_id": 32873294, "link": "https://stackoverflow.com/questions/32873294/calling-overridden-functions-in-c-with-multiple-inheritance/32873407#32873407", "title": "Calling overridden functions in C++ with multiple inheritance", "body": "<p>The specific object can be <code>*this</code>, so <code>this-&gt;A::foo()</code> and <code>this-&gt;B::foo()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 108, "user_id": 2088857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a265e83572ee6e21bb0425512277b8f5?s=128&d=identicon&r=PG", "display_name": "kc9jud", "link": "https://stackoverflow.com/users/2088857/kc9jud"}, "is_accepted": false, "score": 0, "last_activity_date": 1443638675, "creation_date": 1443638675, "answer_id": 32873457, "question_id": 32873294, "link": "https://stackoverflow.com/questions/32873294/calling-overridden-functions-in-c-with-multiple-inheritance/32873457#32873457", "title": "Calling overridden functions in C++ with multiple inheritance", "body": "<p>I was not defining my function in the correct namespace. <code>void foo()</code> and <code>void AB::foo()</code> are very different!</p>\n"}], "owner": {"reputation": 108, "user_id": 2088857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a265e83572ee6e21bb0425512277b8f5?s=128&d=identicon&r=PG", "display_name": "kc9jud", "link": "https://stackoverflow.com/users/2088857/kc9jud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1443642083, "creation_date": 1443638034, "last_edit_date": 1443642083, "question_id": 32873294, "link": "https://stackoverflow.com/questions/32873294/calling-overridden-functions-in-c-with-multiple-inheritance", "title": "Calling overridden functions in C++ with multiple inheritance", "body": "<p>I'm having trouble with a multiple inheritance usage case (it's not my project, I didn't decide the inheritance scheme, sorry). Anyway, I can't seem to call a protected <code>virtual</code> member function from an overriding function. Here's a simplified class structure:</p>\n\n<pre><code>class Base {\n    protected:\n        virtual void foo() { }\n};\n\nclass A: virtual public Base {\n    protected:\n        virtual void foo();\n};\nvoid A::foo() { printf(\"Hello A\\n\"); }\n\nclass B: virtual public Base {\n    protected:\n        virtual void foo();\n};\nvoid B::foo() { printf(\"Hello B\\n\"); }\n\nclass AB: public A, public B {\n    protected:\n        void foo();\n};\nvoid AB::foo()\n{\n    A::foo();\n    B::foo();\n}\n</code></pre>\n\n<p>I would expect that if I call <code>AB</code>'s <code>foo()</code>, I'll get output that looks like</p>\n\n<pre><code>Hello A\nHello B\n</code></pre>\n\n<p>However, when I compile, I get an errors like:</p>\n\n<pre><code>error #308: function \"A::foo\" is inaccessible\n    A::foo();\n       ^\nerror: a nonstatic member reference must be relative to a specific object\n    A::foo();\n    ^\n\nerror #308: function \"B::foo\" is inaccessible\n    B::foo();\n       ^\nerror: a nonstatic member reference must be relative to a specific object\n    B::foo();\n    ^\n</code></pre>\n\n<p>Even if I make all of the <code>foo</code>s public, I still see this. What's wrong?</p>\n"}, {"tags": ["python", "c++", "mfc"], "comments": [{"owner": {"reputation": 8843, "user_id": 349948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e06d0e631af3fe3d713e76f2957fb05f?s=128&d=identicon&r=PG", "display_name": "Corley Brigman", "link": "https://stackoverflow.com/users/349948/corley-brigman"}, "edited": false, "score": 1, "creation_date": 1443638354, "post_id": 32873234, "comment_id": 53578382, "body": "have to ask: are you mixing tabs and spaces? and does this import into a python console?"}, {"owner": {"reputation": 10018, "user_id": 1309356, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o45P6.png?s=128&g=1", "display_name": "cha", "link": "https://stackoverflow.com/users/1309356/cha"}, "edited": false, "score": 0, "creation_date": 1443677569, "post_id": 32873234, "comment_id": 53590734, "body": "why do use have semicolons in your Python code?"}], "owner": {"reputation": 533, "user_id": 2002288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7bf6830e387572641612bdf484a1aaa2?s=128&d=identicon&r=PG", "display_name": "sg_man", "link": "https://stackoverflow.com/users/2002288/sg-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1443637743, "creation_date": 1443637743, "question_id": 32873234, "link": "https://stackoverflow.com/questions/32873234/why-cant-i-get-embedded-python-to-work-in-a-c-mfc-application-with-python-f", "title": "Why can&#39;t I get embedded Python to work in a C++ / MFC application with Python functions longer than one line?", "body": "<p>I am trying to embed Python 3.4 in a C++ / MFC / Windows application.</p>\n\n<p>I am trying to use PyRun_SimpleString to import a Python module, so something like:</p>\n\n<pre><code>PyRun_SimpleString(\"import testmod\")\n</code></pre>\n\n<p>is what I have.  Here is testmod.py:</p>\n\n<pre><code>def hello():\n    return 5;\n\ndef four(input):\n    print(input * 4);\n</code></pre>\n\n<p>When I import this (via PyRun_SimpleString), PyRunSimpleString returns 0 (good), when I change testmod.py to:</p>\n\n<pre><code>def hello():\n    c = 5\n    return c;\n\ndef four(input):\n    print(input * 4);\n</code></pre>\n\n<p>I get a return value of -1...something went wrong.  I also hit a breakpoint which I put in </p>\n\n<pre><code>static void print_error_text(PyObject *f, int offset, PyObject *text_obj)\n</code></pre>\n\n<p>which is in pythonrun.c</p>\n\n<p>Okay, this one seems pretty strange to me.  Any ideas?</p>\n"}, {"tags": ["c++", "algorithm", "computer-vision", "computer-science"], "comments": [{"owner": {"reputation": 129, "user_id": 5386223, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153613209708618/picture?type=large", "display_name": "Aram Antonyan", "link": "https://stackoverflow.com/users/5386223/aram-antonyan"}, "edited": false, "score": 0, "creation_date": 1443637678, "post_id": 32873149, "comment_id": 53578037, "body": "Please ask more specific question, is there a specific issue with code?"}, {"owner": {"reputation": 33, "user_id": 2371508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5755fad445fcd2925f89f506c16a4d85?s=128&d=identicon&r=PG", "display_name": "jessemcready", "link": "https://stackoverflow.com/users/2371508/jessemcready"}, "reply_to_user": {"reputation": 129, "user_id": 5386223, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153613209708618/picture?type=large", "display_name": "Aram Antonyan", "link": "https://stackoverflow.com/users/5386223/aram-antonyan"}, "edited": false, "score": 0, "creation_date": 1443637845, "post_id": 32873149, "comment_id": 53578122, "body": "No, there are no coding errors.  It just when I am setting the pixels to different colors, both of the objects are showing up as the same color.  I am not sure if it is a problem with the labeling algorithm itself or the way I am using the disjoint sets"}], "owner": {"reputation": 33, "user_id": 2371508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5755fad445fcd2925f89f506c16a4d85?s=128&d=identicon&r=PG", "display_name": "jessemcready", "link": "https://stackoverflow.com/users/2371508/jessemcready"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1443834991, "creation_date": 1443637377, "last_edit_date": 1443834991, "question_id": 32873149, "link": "https://stackoverflow.com/questions/32873149/connected-component-algorithm-not-differentiating-between-objects", "title": "Connected Component Algorithm Not Differentiating Between Objects", "body": "<p>I am trying to write a program that takes a binary image and uses the sequential labeling algorithm to label each object and then color them a shade a gray different from each other.  </p>\n\n<p>I believe my program is differentiating alright, but it does not color them different colors.  I am using the union/find algorithm to combine labels.</p>\n\n<p>Any help would be great:</p>\n\n<pre><code>#include \"Image.h\"\n#include \"Image.cpp\"\n#include \"Pgm.cpp\"\n#include \"DisjSets.h\"\n#include \"DisjSets.cpp\"\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main(int argc, char **argv){\n  if(argc != 3){\n    std::cout &lt;&lt; \"Use as p2 &lt;input image&gt; &lt;output image name&gt;\" &lt;&lt; std::endl;\n    return 0;\n  }\n\n  Image *im;\n  im = new Image;\n\n  if(readImage(im, argv[1]) != 0){\n    cout &lt;&lt; \"File \" &lt;&lt; argv[1] &lt;&lt; \" could not be opened.\" &lt;&lt; endl;\n    return 0;\n  }\n\n  int labels[im-&gt;getNRows()][im-&gt;getNCols()];\n  int linked[im-&gt;getNRows()];\n\n  for(int x = 0; x &lt; im-&gt;getNRows(); x++){\n    for(int y = 0; y &lt; im-&gt;getNCols(); y++){\n      labels[x][y] = 0; //fill the labels array\n      linked[x] = 0;\n    }\n  }\n\n  int current_label = 1;\n\n  DisjSets *disj;\n  disj = new DisjSets(im-&gt;getNRows());\n\n  int rows = im-&gt;getNRows();\n  int cols = im-&gt;getNCols();\n\n  for(int r = 0; r &lt; rows; r++)\n    for(int c = 0; c &lt; cols; c++){\n      if(r-1&lt;0 || c-1&lt;0){\n        r++;\n        c++;\n        continue;\n      }\n      if(im-&gt;getPixel(r,c) == 1){\n        if(im-&gt;getPixel(r-1, c) == 0 &amp;&amp; im-&gt;getPixel(r, c-1) == 0) {\n          if(labels[r][c] == 0 &amp;&amp; labels[r-1][c] == 0 &amp;&amp; labels[r][c-1] == 0){\n          linked[current_label] = current_label;\n          labels[r][c] = current_label;\n          current_label += 1;\n        }\n        }else{\n        if((im-&gt;getPixel(r-1, c) == 1) &amp;&amp; im-&gt;getPixel(r, c-1) == 0){\n          labels[r][c] = labels[r-1][c];\n        }\n        else if((im-&gt;getPixel(r-1, c) == 0) &amp;&amp; im-&gt;getPixel(r, c-1) == 1){\n          labels[r][c] = labels[r][c-1];\n        }\n        else if((im-&gt;getPixel(r-1, c) == 1) &amp;&amp; im-&gt;getPixel(r, c-1) == 1){\n          if(labels[r-1][c] == labels[r][c-1] &amp;&amp; labels[r-1][c] != 0 &amp;&amp; labels[r][c-1] != 0){\n            labels[r][c] = labels[r-1][c];\n          } else {\n              if(labels[r][c-1] &lt; labels[r-1][c] &amp;&amp; labels[r-1][c] != 0 &amp;&amp; labels[r][c-1] != 0){\n                labels[r][c] = labels[r][c-1];\n                linked[labels[r][c]] = disj-&gt;unionSets(linked[labels[r][c]], labels[r-1][c]);\n            } else if(labels[r][c-1] &gt; labels[r-1][c] &amp;&amp; labels[r-1][c] != 0 &amp;&amp; labels[r][c-1] != 0){\n              labels[r][c] = labels[r-1][c];\n              linked[labels[r][c]] = disj-&gt;unionSets(linked[labels[r][c]], labels[r][c-1]);\n          }\n        }\n      }\n    }\n  }\n}\n\n\n      for(int r = 0; r &lt; im-&gt;getNRows(); r++){\n        for(int c = 0; c &lt; im-&gt;getNCols(); c++){\n          if(labels[r][c] != labels[r+1][c+1] &amp;&amp; labels[r][c] != labels[r+1][c] &amp;&amp; labels[r][c+1])\n            cout &lt;&lt; labels[r][c] &lt;&lt; \" \";\n          if(im-&gt;getPixel(r,c) == 1){\n            labels[r][c] = disj-&gt;find(linked[labels[r][c]]);\n            if(labels[r][c] &lt; 30){\n              im-&gt;setPixel(r,c,1);\n            } else if(labels[r][c] &gt; 30)\n              im-&gt;setPixel(r,c,2);\n          }\n\n        }\n      }\n\n\n\n  if(writeImage(im, argv[2]) != 0){\n    cout &lt;&lt; \"Cannot write to file: \" &lt;&lt; argv[2] &lt;&lt; endl;\n    return 0;\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>EDIT: Ok so it turns out, if I print my labels array, all of my labels are 0.  Can someone explain why this is happening?</p>\n\n<p>EDIT2: I fixed it so that I fill the labels array, but I am not sure how to go about doing the pixel color changing. Also updated the code</p>\n"}, {"tags": ["c++", "graph", "cycle", "depth-first-search"], "answers": [{"tags": [], "owner": {"reputation": 137, "user_id": 4887228, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f7567e2304e25f16d8b7436cc39a710?s=128&d=identicon&r=PG&f=1", "display_name": "Jozef Bugo\u0161", "link": "https://stackoverflow.com/users/4887228/jozef-bugo%c5%a1"}, "is_accepted": true, "score": 1, "last_activity_date": 1443711130, "last_edit_date": 1495540400, "creation_date": 1443711130, "answer_id": 32890618, "question_id": 32873133, "link": "https://stackoverflow.com/questions/32873133/detecting-and-printing-cycle-in-undirected-graph/32890618#32890618", "title": "Detecting and printing cycle in undirected graph", "body": "<p>I've found a solution. I've tried <em>j_random_hacker's</em> solution in this <a href=\"https://stackoverflow.com/questions/28244232/how-to-detect-if-an-undirected-graph-has-a-cycle-and-output-it-using-bfs-or-dfs\">post</a> and it didn't work. But problem was with indexing in cycleVertices in my code. Variable index was always same. So I've added a new attribute index in the class Graph and now it works. \nSo here is the edited code:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include &lt;list&gt;\n\n#define FINISHED -1\n#define NOCYCLE -2\nusing namespace std;\n\n\nclass Graph\n{\n    int V;   \n    int index;\n    list&lt;int&gt; *adj;   \npublic:\n    Graph(int V);   \n    void addEdge(int v, int w);  \n    void set_index();\n    int Graph::isCyclicUtil(int v, bool visited[], int *cycleVertices, int parent);\n};\n\nGraph::Graph(int V)\n{\n    this-&gt;V = V;\n    adj = new list&lt;int&gt;[V];\n    this-&gt;index = 0;\n}\n\nvoid Graph::set_index()\n{\n    this-&gt;index = 0;\n}\n\nvoid Graph::addEdge(int v, int w)\n{\n    adj[v].push_back(w); \n    adj[w].push_back(v); \n}\n\nint Graph::isCyclicUtil(int v, bool visited[], int *cycleVertices, int parent)\n{\n    visited[v] = true;\n\n    list&lt;int&gt;::iterator i;\n    for (i = adj[v].begin(); i != adj[v].end(); ++i)\n    {\n        if (!visited[*i])\n        {\n            int result = isCyclicUtil(*i, visited, cycleVertices, v);\n            if (result == FINISHED)\n                return FINISHED;\n            else if (result != NOCYCLE) {\n                cycleVertices[index++] = v;\n                if (result == v)\n                    return FINISHED;\n                else\n                    return result;\n            }\n        }\n\n        else if (*i != parent) {\n            return *i;\n        }\n    }\n    return NOCYCLE;\n}\n\n\nint main()\n{\n    bool *visited = new bool[4];\n    for (int i = 0; i &lt; 4; i++)\n        visited[i] = false;\n    int cycleVertices[4];\n    for (int i = 0; i &lt; 4; i++)\n        cycleVertices[i] = -1;\n    Graph g1(4);\n    g1.addEdge(0, 1);\n    g1.addEdge(1, 2);\n    g1.addEdge(2, 3);\n    g1.addEdge(3, 0);\n    g1.isCyclicUtil(3, visited, cycleVertices, -1) ? cout &lt;&lt; \"Graph contains cycle\\n\" :\n        cout &lt;&lt; \"Graph doesn't contain cycle\\n\";\n    int x = 0;\n    while (cycleVertices[x] != -1)\n        cout &lt;&lt; cycleVertices[x++] &lt;&lt; \" \";\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 338, "user_id": 9543314, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AyjYqK2CgTs/AAAAAAAAAAI/AAAAAAAAAi0/7DFu2E8Fno8/photo.jpg?sz=128", "display_name": "ssp4all", "link": "https://stackoverflow.com/users/9543314/ssp4all"}, "is_accepted": false, "score": 0, "last_activity_date": 1618698563, "creation_date": 1618698563, "answer_id": 67143567, "question_id": 32873133, "link": "https://stackoverflow.com/questions/32873133/detecting-and-printing-cycle-in-undirected-graph/67143567#67143567", "title": "Detecting and printing cycle in undirected graph", "body": "<p>Here is my DFS solution in Python</p>\n<pre><code>#program to print all nodes included in the cycle in the given undirected graph \n\nimport collections\n\nedges = [[1, 2], [2, 3], [1, 3], [2, 4], [4, 5], [5, 6], [4, 6]]\nn = 6\n\nparent = [0] * (n + 1)\ncolor = [0] * (n + 1)\nmark = [0] * (n + 1)\ncycleno = 0\n\ngraph = collections.defaultdict(set)\n\nfor i, j in edges:\n    graph[i].add(j)\n    graph[j].add(i)\n\ndef dfs(u, v):\n    global cycleno \n\n    if color[u] == 2: #node explore complete\n        return \n    elif color[u] == 1: #cycle found\n        cycleno += 1\n        cur = v \n        mark[cur] = cycleno \n        while cur != u:\n            cur = parent[cur]\n            mark[cur] = cycleno \n    else:\n        parent[u] = v \n        color[u] = 1\n        for nei in graph[u]:\n            if nei == parent[u]:    continue \n            dfs(nei, u)\n        color[u] = 2 #exploration for this node completed\n    \n\ndfs(1, 0)\nprint(mark)\n</code></pre>\n<p>Output:\n<code>[0, 1, 1, 1, 2, 2, 2]</code> which means nodes 1, 2, 3 and 4, 5, 6 belongs to the cycles respectively.</p>\n<p>Reference: <a href=\"https://www.tutorialspoint.com/print-all-the-cycles-in-an-undirected-graph-in-cplusplus\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/print-all-the-cycles-in-an-undirected-graph-in-cplusplus</a></p>\n"}], "owner": {"reputation": 137, "user_id": 4887228, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f7567e2304e25f16d8b7436cc39a710?s=128&d=identicon&r=PG&f=1", "display_name": "Jozef Bugo\u0161", "link": "https://stackoverflow.com/users/4887228/jozef-bugo%c5%a1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4071, "favorite_count": 1, "accepted_answer_id": 32890618, "answer_count": 2, "score": 1, "last_activity_date": 1618698563, "creation_date": 1443637328, "last_edit_date": 1495540810, "question_id": 32873133, "link": "https://stackoverflow.com/questions/32873133/detecting-and-printing-cycle-in-undirected-graph", "title": "Detecting and printing cycle in undirected graph", "body": "<p>I have question similar - same - as this <a href=\"https://stackoverflow.com/questions/28244232/how-to-detect-if-an-undirected-graph-has-a-cycle-and-output-it-using-bfs-or-dfs\">one</a>. So I want to know how to not only detect cycle but also print out vertices which this cycle contains. I tried ways which were mentioned in the question above, but I must have done something wrong, why it doesn't work for my. Also my program checks just if one specific vertex makes cycle. My code is here:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include &lt;list&gt;\nusing namespace std;\n\n\nclass Graph\n{\n    int V;    \n    list&lt;int&gt; *adj;    \npublic:\n    Graph(int V);   \n    void addEdge(int v, int w);   \n    bool Graph::isCyclicUtil(int v, bool visited[], int *cycleVertices, int parent, int index);\n};\n\nGraph::Graph(int V)\n{\n    this-&gt;V = V;\n    adj = new list&lt;int&gt;[V];\n}\n\nvoid Graph::addEdge(int v, int w)\n{\n    adj[v].push_back(w); \n    adj[w].push_back(v);\n}\n\n\nbool Graph::isCyclicUtil(int v, bool visited[], int *cycleVertices, int parent, int index)\n{\n\n    visited[v] = true;\n\n\n    list&lt;int&gt;::iterator i;\n    for (i = adj[v].begin(); i != adj[v].end(); ++i)\n    {\n\n        if (!visited[*i])\n        {\n            if (isCyclicUtil(*i, visited, cycleVertices, v, index)) {\n                if (index &lt;= 1 || cycleVertices[0] != cycleVertices[index - 1])\n                    cycleVertices[index++] = *i;\n                return true;\n            }\n        }\n\n        else if (*i != parent) {\n            cycleVertices[index++] = *i;\n            return true;\n        }\n    }\n    return false;\n}\n\n\nint main()\n{\n    bool *visited = new bool[5];\n    for (int i = 0; i &lt; 5; i++)\n        visited[i] = false;\n    int cycleVertices[5];\n    for (int i = 0; i &lt; 5; i++)\n        cycleVertices[i] = -1;\n    Graph g1(5);\n    g1.addEdge(1, 0);\n    g1.addEdge(0, 2);\n    g1.addEdge(2, 1);\n    g1.addEdge(0, 3);\n    g1.addEdge(3, 4);\n    g1.isCyclicUtil(4, visited, cycleVertices, -1, 0) ? cout &lt;&lt; \"Graph contains cycle\\n\" :\n        cout &lt;&lt; \"Graph doesn't contain cycle\\n\";\n    int x = 0;\n    while (cycleVertices[x] != -1)\n        cout &lt;&lt; cycleVertices[x++] &lt;&lt; \" \";\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "clang", "sfinae"], "comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1443637526, "post_id": 32873117, "comment_id": 53577948, "body": "Nope. That shouldn&#39;t compile"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1443637820, "post_id": 32873117, "comment_id": 53578108, "body": "<i>&quot;global&quot; function</i> or <i>global function</i>?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 4, "creation_date": 1443637857, "post_id": 32873117, "comment_id": 53578134, "body": "This is a VS bug. The code is not legal. SF in SFINAE stands for substitution failure. This code fails before any substitution is being made, namely, at the template definition."}, {"owner": {"reputation": 1166, "user_id": 176168, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/885443a5726395f1db5cb55fe8967e30?s=128&d=identicon&r=PG", "display_name": "user176168", "link": "https://stackoverflow.com/users/176168/user176168"}, "edited": false, "score": 0, "creation_date": 1443638560, "post_id": 32873117, "comment_id": 53578492, "body": "So how do find out whether a function exists using Clang (note. not a member function)?"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1443638913, "post_id": 32873117, "comment_id": 53578706, "body": "@user176168 you may be interested in <a href=\"http://stackoverflow.com/q/22464225/4892076\">this question</a>."}, {"owner": {"reputation": 1166, "user_id": 176168, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/885443a5726395f1db5cb55fe8967e30?s=128&d=identicon&r=PG", "display_name": "user176168", "link": "https://stackoverflow.com/users/176168/user176168"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1443639381, "post_id": 32873117, "comment_id": 53578955, "body": "@jaggedSpire. Firstly thanks for the link but isnt that just detecting that a function exists with a specific signature?  I want to detect a specific instance of a signature."}], "answers": [{"comments": [{"owner": {"reputation": 1166, "user_id": 176168, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/885443a5726395f1db5cb55fe8967e30?s=128&d=identicon&r=PG", "display_name": "user176168", "link": "https://stackoverflow.com/users/176168/user176168"}, "edited": false, "score": 0, "creation_date": 1443642177, "post_id": 32873952, "comment_id": 53580236, "body": "Thanks Dutow! What if the function signature is void bar(void)? It looks like the above is using the template argument of double to decide whether the function exists."}, {"owner": {"reputation": 1166, "user_id": 176168, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/885443a5726395f1db5cb55fe8967e30?s=128&d=identicon&r=PG", "display_name": "user176168", "link": "https://stackoverflow.com/users/176168/user176168"}, "edited": false, "score": 0, "creation_date": 1443642254, "post_id": 32873952, "comment_id": 53580265, "body": "Sorry for some reason completely missed you saying that above! Thanks"}, {"owner": {"reputation": 5460, "user_id": 73657, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gzkFl.png?s=128&g=1", "display_name": "Dutow", "link": "https://stackoverflow.com/users/73657/dutow"}, "reply_to_user": {"reputation": 1166, "user_id": 176168, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/885443a5726395f1db5cb55fe8967e30?s=128&d=identicon&r=PG", "display_name": "user176168", "link": "https://stackoverflow.com/users/176168/user176168"}, "edited": false, "score": 1, "creation_date": 1443677211, "post_id": 32873952, "comment_id": 53590658, "body": "I edited my answer - you won&#39;t find a standard compliant method for checking a void(void) method - but there is a clang extension helping you with it, if you only need it with clang."}, {"owner": {"reputation": 1166, "user_id": 176168, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/885443a5726395f1db5cb55fe8967e30?s=128&d=identicon&r=PG", "display_name": "user176168", "link": "https://stackoverflow.com/users/176168/user176168"}, "edited": false, "score": 0, "creation_date": 1443688444, "post_id": 32873952, "comment_id": 53596188, "body": "Thanks for a wonderful answer Dutow. I couldnt have asked for anymore. It just so happens the extension will work fine for my particular case where I dont want the user of my UE4 Slate UI wrapper to have to laboriously write all the optional delegates for a UI element.  Instead I detect whether a function has been given and then return an empty delegate if not.  Anyway thank you again!"}, {"owner": {"reputation": 16113, "user_id": 347508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0552df3ae8cb4abb34baaf22bb493dc?s=128&d=identicon&r=PG", "display_name": "kritzikratzi", "link": "https://stackoverflow.com/users/347508/kritzikratzi"}, "edited": false, "score": 0, "creation_date": 1501931721, "post_id": 32873952, "comment_id": 78002850, "body": "i just tried. <code>__is_identifier</code> seems to test if something is a valid identifier, not if it exists, which makes sense given the name. for example <code>__is_identifier(myFunnyMethod)</code> will return true, whether you declared it or not."}], "tags": [], "owner": {"reputation": 5460, "user_id": 73657, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gzkFl.png?s=128&g=1", "display_name": "Dutow", "link": "https://stackoverflow.com/users/73657/dutow"}, "is_accepted": true, "score": 2, "last_activity_date": 1443677239, "last_edit_date": 1443677239, "creation_date": 1443640549, "answer_id": 32873952, "question_id": 32873117, "link": "https://stackoverflow.com/questions/32873117/clang-3-5-detecting-a-gobal-function-doesnt-exist-using-sfinae/32873952#32873952", "title": "Clang 3.5: Detecting a gobal function doesn&#39;t exist using SFINAE", "body": "<p>If you know the exact signature of the function you are looking for, it can be solved with SFINAE (tested with clang 3.6 and gcc 4.9):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint SomeMethod(double d) {\n        // nop\n        return 0;\n}\n\nstruct HasSomeMethod {\n        typedef char no[2];\n\n        template &lt;typename C&gt;\n        static auto test(C c) -&gt; decltype(SomeMethod(c));\n        //static auto test(C c) -&gt; decltype(SomeOtherMethod(c));\n\n        template &lt;typename&gt;\n        static no&amp; test(...);\n\n        static const bool value = sizeof(test&lt;double&gt;(1.0)) == sizeof(int);\n};\n\nint main()\n{\n    printf(\"%d\\n\", HasSomeMethod::value);\n}\n</code></pre>\n\n<p>This outputs 1, and 0 if you switch the test method to the commented version.</p>\n\n<p>It works with any global method as long as it has at least one parameter you can extract to a template parameter.</p>\n\n<p>SFINAE is an abbreviation for \"Substitution Failure Is Not An Error\". Which means, you have to:</p>\n\n<ul>\n<li>use a template parameter which will be substituted by the compiler</li>\n<li>your subject must somehow depend on this template parameter</li>\n</ul>\n\n<p>My example solves this latter by providing a templated parameter to the subject function - if there is no such function, it can't be substituted, which is valid. </p>\n\n<p>Same result if there is no such overload you are looking for. You can change the parameter of SomeMethod in the code, or at the testing point, and you'll see.</p>\n\n<p>Unfortunately, for this case using <code>type_traits</code>, and similar tricks isn't possible. For example, the following method:</p>\n\n<pre><code>template&lt;typename C&gt;\nstatic auto test(C c) -&gt; typename std::is_same&lt;decltype(SomeXXMethod()), decltype(c)&gt;::type\n</code></pre>\n\n<p>has the same problem as your original code. For member detection this works because <code>C::SomeMethod</code> depends on the template parameter.</p>\n\n<p>Because of this requirement, a method with no parameter, but a non-void return type probably can be checked, but I have no idea how right now. </p>\n\n<p>But if you have a void method without parameters, I'm sure you won't find a standard way to do it - you can't find any valid type specification which has both your type and that method in it.</p>\n\n<h2>Clang specific</h2>\n\n<p>If you just want a Clang specific check, there are <a href=\"http://clang.llvm.org/docs/LanguageExtensions.html\" rel=\"nofollow\">Clang specific extensions</a></p>\n\n<p>For example, you can use the <code>#if __is_identifier(SomeMethod)</code> macro, which checks if a given identifier exists. It might be a variable, or a function, or anything, but inside this block, you can use SFINAE to decide it's type.</p>\n"}], "owner": {"reputation": 1166, "user_id": 176168, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/885443a5726395f1db5cb55fe8967e30?s=128&d=identicon&r=PG", "display_name": "user176168", "link": "https://stackoverflow.com/users/176168/user176168"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 0, "accepted_answer_id": 32873952, "answer_count": 1, "score": 1, "last_activity_date": 1443677239, "creation_date": 1443637282, "question_id": 32873117, "link": "https://stackoverflow.com/questions/32873117/clang-3-5-detecting-a-gobal-function-doesnt-exist-using-sfinae", "title": "Clang 3.5: Detecting a gobal function doesn&#39;t exist using SFINAE", "body": "<p>So I have the following piece of code that works perfectly under VS2012.  It detects whether a global function 'Bar' exists.  </p>\n\n<p>Sadly this fails to compile under clang 3.5 with this error:</p>\n\n<pre><code>error : use of undeclared identifier 'Bar'\n  template &lt;typename T&gt; static int Foo( decltype( Bar )* ) { return 2; }            \n                                                  ^ \n</code></pre>\n\n<p>Does clang support this kind of thing and if so what is the correct syntax?</p>\n\n<p>Thanks</p>\n\n<pre><code>template &lt;typename T&gt; static int Foo( decltype( Bar )* ) { return 2; }      \ntemplate &lt;typename T&gt; static int Foo(...) { return 1; } \n\nvoid main()\n{\n    printf(\"%d\", Foo&lt;int&gt;(nullptr));\n}\n</code></pre>\n"}, {"tags": ["c++", "segmentation-fault", "singly-linked-list"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1443637205, "post_id": 32873075, "comment_id": 53577783, "body": "Please <b><a href=\"https://stackoverflow.com/posts/32873075/edit\">edit</a></b> your question with an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> or <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE (Short, Self Contained, Correct Example)</a>"}, {"owner": {"reputation": 6770, "user_id": 3658660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b40f4e2bead9eca6951da110a3c84e7?s=128&d=identicon&r=PG&f=1", "display_name": "hlscalon", "link": "https://stackoverflow.com/users/3658660/hlscalon"}, "edited": false, "score": 0, "creation_date": 1443637329, "post_id": 32873075, "comment_id": 53577852, "body": "<code>if (head = NULL)</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 129, "user_id": 5386223, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153613209708618/picture?type=large", "display_name": "Aram Antonyan", "link": "https://stackoverflow.com/users/5386223/aram-antonyan"}, "is_accepted": false, "score": 0, "last_activity_date": 1443637315, "creation_date": 1443637315, "answer_id": 32873128, "question_id": 32873075, "link": "https://stackoverflow.com/questions/32873075/c-printing-linked-list-segmentation-fault/32873128#32873128", "title": "C++ printing linked list , segmentation fault", "body": "<p>One issue I see is that you assign NULL to head</p>\n\n<p><code>if (head = NULL)</code> must be <code>if (head == NULL)</code></p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 0, "last_activity_date": 1443637937, "last_edit_date": 1443637937, "creation_date": 1443637570, "answer_id": 32873190, "question_id": 32873075, "link": "https://stackoverflow.com/questions/32873075/c-printing-linked-list-segmentation-fault/32873190#32873190", "title": "C++ printing linked list , segmentation fault", "body": "<p>I am going to assume that the line</p>\n\n<pre><code>if ( head = NULL )\n</code></pre>\n\n<p>is an error in transcribing your code, and that your working code uses</p>\n\n<pre><code>if ( head == NULL )\n</code></pre>\n\n<p>The real error I see is that you are using</p>\n\n<pre><code>    cout &lt;&lt; head-&gt;data &lt;&lt; endl;\n    head = head-&gt;next;\n    while (head-&gt;next != NULL)  // This line is not good\n    {\n        cout &lt;&lt; head-&gt;data &lt;&lt; endl;\n        head = head-&gt;next;\n    }\n    cout &lt;&lt; \"NULL\";\n</code></pre>\n\n<p>That line will always be a problem. At some point, <code>head</code> will be equal to <code>NULL</code> and you will try to access the <code>NULL</code> pointer.</p>\n\n<p>Change that block of code to:</p>\n\n<pre><code>while (head != NULL)\n{\n    cout &lt;&lt; head-&gt;data &lt;&lt; endl;\n    head = head-&gt;next;\n}\ncout &lt;&lt; \"NULL\";\n</code></pre>\n\n<p>In fact, the entire function can be:</p>\n\n<pre><code>void Print(Node* head)\n{\n    while (head != NULL)\n    {\n        cout &lt;&lt; head-&gt;data &lt;&lt; endl;\n        head = head-&gt;next;\n    }\n    cout &lt;&lt; \"NULL\";\n}\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 5188181, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-h4VShzd67XE/AAAAAAAAAAI/AAAAAAAAA7Q/1rLmQS3qnKU/photo.jpg?sz=128", "display_name": "Prithviraj Sukale", "link": "https://stackoverflow.com/users/5188181/prithviraj-sukale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "accepted_answer_id": 32873190, "answer_count": 2, "score": -1, "last_activity_date": 1443637937, "creation_date": 1443637131, "last_edit_date": 1443637184, "question_id": 32873075, "link": "https://stackoverflow.com/questions/32873075/c-printing-linked-list-segmentation-fault", "title": "C++ printing linked list , segmentation fault", "body": "<pre><code>void Print(Node *head)\n{\n\n    if (head = NULL)\n    {\n        cout &lt;&lt; \"NULL\";\n    }\n    else\n    {\n        cout &lt;&lt; head-&gt;data &lt;&lt; endl;\n        head = head-&gt;next;\n        while (head-&gt;next != NULL)\n        {\n            cout &lt;&lt; head-&gt;data &lt;&lt; endl;\n            head = head-&gt;next;\n        }\n        cout &lt;&lt; \"NULL\";\n    }\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1443637068, "post_id": 32872899, "comment_id": 53577713, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/10828937/how-to-make-cin-to-take-only-numbers\">How to make cin to take only numbers</a>"}, {"owner": {"reputation": 19, "user_id": 5394273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2443f57f21137aff86a9a88d39c4c4fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mofayew", "link": "https://stackoverflow.com/users/5394273/mofayew"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1443639282, "post_id": 32872899, "comment_id": 53578899, "body": "That forum question doesn&#39;t work for me. It doesn&#39;t prompt the user to enter in the value again."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1443639431, "post_id": 32872899, "comment_id": 53578984, "body": "That is easily fixed by changing <code>std::cout &lt;&lt; &quot;Error!&quot; &lt;&lt; std::endl;</code> to whatever you want."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1443639657, "post_id": 32872899, "comment_id": 53579078, "body": "Your <code>while</code> loop doesn&#39;t give the user a chance to enter anything."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1443641587, "post_id": 32872899, "comment_id": 53579986, "body": "@Mofayew <i>&quot;that forum question ...&quot;</i> You should notice, that Stack Overflow isn&#39;t a forum."}, {"owner": {"reputation": 19, "user_id": 5394273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2443f57f21137aff86a9a88d39c4c4fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mofayew", "link": "https://stackoverflow.com/users/5394273/mofayew"}, "edited": false, "score": 0, "creation_date": 1443646428, "post_id": 32872899, "comment_id": 53582268, "body": "when I put cin &gt;&gt; kWh in the while loop it doesn&#39;t prompt the user to re-enter. Is there another way I should be doing this?"}, {"owner": {"reputation": 19, "user_id": 5394273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2443f57f21137aff86a9a88d39c4c4fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mofayew", "link": "https://stackoverflow.com/users/5394273/mofayew"}, "edited": false, "score": 0, "creation_date": 1443646675, "post_id": 32872899, "comment_id": 53582396, "body": "How do I loop back to have the user enter a number if they have entered a letter?"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 5394273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2443f57f21137aff86a9a88d39c4c4fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mofayew", "link": "https://stackoverflow.com/users/5394273/mofayew"}, "edited": false, "score": 0, "creation_date": 1443638050, "post_id": 32873103, "comment_id": 53578211, "body": "I have to create a variable for kWh. so my variable can&#39;t be j it is kWh."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 19, "user_id": 5394273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2443f57f21137aff86a9a88d39c4c4fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mofayew", "link": "https://stackoverflow.com/users/5394273/mofayew"}, "edited": false, "score": 0, "creation_date": 1443638311, "post_id": 32873103, "comment_id": 53578348, "body": "@Mofayew It&#39;s not the name of the variable that&#39;s the issue, it&#39;s the way you&#39;re reading."}, {"owner": {"reputation": 19, "user_id": 5394273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2443f57f21137aff86a9a88d39c4c4fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mofayew", "link": "https://stackoverflow.com/users/5394273/mofayew"}, "edited": false, "score": 0, "creation_date": 1443638883, "post_id": 32873103, "comment_id": 53578689, "body": "Please help me better understand then. I am doing &quot;double kWh; cin  &gt;&gt; kWh;&quot;"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 19, "user_id": 5394273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2443f57f21137aff86a9a88d39c4c4fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mofayew", "link": "https://stackoverflow.com/users/5394273/mofayew"}, "edited": false, "score": 0, "creation_date": 1443638940, "post_id": 32873103, "comment_id": 53578721, "body": "Just don&#39;t do what I did in my second line. Don&#39;t try to read integers from <code>cin</code> because you need to read things other than integers so that you can report errors."}, {"owner": {"reputation": 19, "user_id": 5394273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2443f57f21137aff86a9a88d39c4c4fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mofayew", "link": "https://stackoverflow.com/users/5394273/mofayew"}, "edited": false, "score": 0, "creation_date": 1443639379, "post_id": 32873103, "comment_id": 53578954, "body": "I&#39;m not sure what you mean. If I don&#39;t use your second line you are saying don&#39;t ask for user input?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 19, "user_id": 5394273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2443f57f21137aff86a9a88d39c4c4fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mofayew", "link": "https://stackoverflow.com/users/5394273/mofayew"}, "edited": false, "score": 1, "creation_date": 1443639491, "post_id": 32873103, "comment_id": 53579015, "body": "No, I&#39;m saying &quot;don&#39;t try to read integers from cin because you need to read things other than integers so that you can report errors&quot;. Ask for user input, but then have code that can read all the kinds of user input you need to accept, which includes things other than integers because you need to read them to determine that they&#39;re not integers."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 19, "user_id": 5394273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2443f57f21137aff86a9a88d39c4c4fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mofayew", "link": "https://stackoverflow.com/users/5394273/mofayew"}, "edited": false, "score": 0, "creation_date": 1443654234, "post_id": 32873103, "comment_id": 53585149, "body": "To put it another way, you&#39;re thinking &quot;only integers are valid for my program, so I&#39;ll use code that can only read integers&quot;. But that&#39;s not true. At the low level of the input routine, integers, characters, and all kinds of other things are valid input, they just cause your program to produce error output at the next level up. So you need input code that can read anything, analyze it, and decide whether to produce an error output or not. So that requires input code that can read more than just integers. So no <code>cin &gt;&gt; someInteger;</code>."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": -1, "last_activity_date": 1443637208, "creation_date": 1443637208, "answer_id": 32873103, "question_id": 32872899, "link": "https://stackoverflow.com/questions/32872899/how-to-loop-back-if-a-user-enters-a-letter-instead-of-a-number-c/32873103#32873103", "title": "how to loop back if a user enters a letter instead of a number c++", "body": "<p>Just don't do this:</p>\n\n<pre><code>int j;\ncin &gt;&gt; j;\n</code></pre>\n\n<p>Because what will only read numbers and you need to read things other than numbers so you can report an error when they are entered.</p>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 5394273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2443f57f21137aff86a9a88d39c4c4fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mofayew", "link": "https://stackoverflow.com/users/5394273/mofayew"}, "is_accepted": false, "score": 0, "last_activity_date": 1443647372, "creation_date": 1443647372, "answer_id": 32875690, "question_id": 32872899, "link": "https://stackoverflow.com/questions/32872899/how-to-loop-back-if-a-user-enters-a-letter-instead-of-a-number-c/32875690#32875690", "title": "how to loop back if a user enters a letter instead of a number c++", "body": "<p>As simple as this may be... this answered my question: <a href=\"http://www.dreamincode.net/forums/topic/186890-c-excluding-letters-on-user-input/\" rel=\"nofollow\">http://www.dreamincode.net/forums/topic/186890-c-excluding-letters-on-user-input/</a></p>\n"}], "owner": {"reputation": 19, "user_id": 5394273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2443f57f21137aff86a9a88d39c4c4fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mofayew", "link": "https://stackoverflow.com/users/5394273/mofayew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1828, "favorite_count": 0, "answer_count": 2, "score": -6, "last_activity_date": 1443647372, "creation_date": 1443636413, "last_edit_date": 1443646638, "question_id": 32872899, "link": "https://stackoverflow.com/questions/32872899/how-to-loop-back-if-a-user-enters-a-letter-instead-of-a-number-c", "title": "how to loop back if a user enters a letter instead of a number c++", "body": "<p>My program identifies that a user has entered a letter instead of a number, but it doesn't ask for user input after that. I need to be able to prompt the user to enter another value that is a number and create a loop or something that will check the value every time to make sure it isn't a letter/s. </p>\n\n<p>This is the part of my code that does the check for invalid character:</p>\n\n<pre><code>while (!cin.good())\n{\ncout &lt;&lt; \"Error! I only accept numbers! Enter in a number.\" &lt;&lt; endl;\ncin.clear();\ncin.ignore(numeric_limits&lt;streamsize&gt;::max());\n}\n</code></pre>\n"}, {"tags": ["c++", "segmentation-fault", "mpi"], "comments": [{"owner": {"reputation": 3671, "user_id": 577108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610ad16428ea873d3e8f624eacd58045?s=128&d=identicon&r=PG", "display_name": "haraldkl", "link": "https://stackoverflow.com/users/577108/haraldkl"}, "edited": false, "score": 0, "creation_date": 1443644740, "post_id": 32872770, "comment_id": 53581436, "body": "How many processes are you using? It looks to me like you are allocating a and c only on rank 0, but delete it on all ranks. Also, in your check wether a and c are properly allocated, you should probably better call MPI_Abort, as the other processes will not reach the MPI_Finalize and hang infinitely at the first communication with rank 0."}, {"owner": {"reputation": 11, "user_id": 5394400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18d06bcd95981a6034d804a6f73df841?s=128&d=identicon&r=PG&f=1", "display_name": "Timothy Wilkins", "link": "https://stackoverflow.com/users/5394400/timothy-wilkins"}, "reply_to_user": {"reputation": 3671, "user_id": 577108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610ad16428ea873d3e8f624eacd58045?s=128&d=identicon&r=PG", "display_name": "haraldkl", "link": "https://stackoverflow.com/users/577108/haraldkl"}, "edited": false, "score": 0, "creation_date": 1443656701, "post_id": 32872770, "comment_id": 53585784, "body": "Thanks. I am currently only attempting to run with 2 processes. It seems that the second process (rank 1) is always the one to cause the segmentation fault."}], "answers": [{"tags": [], "owner": {"reputation": 3671, "user_id": 577108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610ad16428ea873d3e8f624eacd58045?s=128&d=identicon&r=PG", "display_name": "haraldkl", "link": "https://stackoverflow.com/users/577108/haraldkl"}, "is_accepted": false, "score": 2, "last_activity_date": 1443671320, "creation_date": 1443671320, "answer_id": 32879119, "question_id": 32872770, "link": "https://stackoverflow.com/questions/32872770/segmentation-fault-calling-mpi-finalize-in-c/32879119#32879119", "title": "Segmentation Fault calling MPI_Finalize() in c", "body": "<p>You are creating <code>a</code> and <code>c</code> only on rank 0:</p>\n\n<pre><code>   if (id == 0) {\n      // allocate from heap space for a and c\n      a = new (nothrow) float[dim_l*dim_m];\n      c = new (nothrow) float[row_per_proc*p*dim_n];\n</code></pre>\n\n<p>Therefore, you should also delete them only on rank 0:</p>\n\n<pre><code>   if (id == 0) {\n      /*\n         stop recording the execution time\n      */ \n      TIMER_STOP;\n\n      cout &lt;&lt; \"C matrix =\" &lt;&lt; endl;\n      print_matrix(c,dim_l,dim_n);\n      cout &lt;&lt; endl;\n      cout &lt;&lt; \"time=\" &lt;&lt; setprecision(8) &lt;&lt;  TIMER_ELAPSED/1000000.0  &lt;&lt; \" seconds\" &lt;&lt; endl;\n      delete a; delete c;\n   }\n\n   // return allocated memory\n   delete b; delete rbuf; delete sbuf;\n</code></pre>\n\n<p>Additional note: you are calling <code>MPI_Finalize</code> if the allocation on rank 0 fails, better call <code>MPI_Abort</code> in that case, or broadcast the result of this check, to notify all processes of that failure and allow a proper termination. With your code right now, the program might hang infinitely when running into this error.</p>\n"}], "owner": {"reputation": 11, "user_id": 5394400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18d06bcd95981a6034d804a6f73df841?s=128&d=identicon&r=PG&f=1", "display_name": "Timothy Wilkins", "link": "https://stackoverflow.com/users/5394400/timothy-wilkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 936, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1443812398, "creation_date": 1443635948, "last_edit_date": 1443812398, "question_id": 32872770, "link": "https://stackoverflow.com/questions/32872770/segmentation-fault-calling-mpi-finalize-in-c", "title": "Segmentation Fault calling MPI_Finalize() in c", "body": "<p>I am running into a problem with MPI_Finalize. I get a segmentation fault at the end of the program when I can <code>MPI_Finalize();</code>, with this output:</p>\n\n<pre><code>A matrix =\n48.3962 65.3245 15.0385 \n72.383 25.8898 46.0265 \n\nB matrix =\n\n15.4881 50.6507 6.74602 71.0055 \n12.2209 77.5441 61.5452 31.5127 \n46.8515 89.4849 70.0342 57.3195 \n\ngather returned: 0\nC matrix =\n2252.46 8862.55 5400.1 6356.94 \ngather returned: 0\n3593.88 9792.53 5305.12 8593.66 \n\ntime=7.6e-05 seconds\n[dmc:13852] *** Process received signal ***\n[dmc:13852] Signal: Segmentation fault (11)\n[dmc:13852] Signal code:  (128)\n[dmc:13852] Failing at address: (nil)\n[dmc:13852] [ 0] /lib64/libpthread.so.0(+0xf850)[0x7fcba45e8850]\n[dmc:13852] [ 1] /opt/asn/apps/openmpi_1.8.3_intel/lib/libopen-pal.so.6(opal_memory_ptmalloc2_int_free+0x1a9)[0x7fcba3b74a79]\n[dmc:13852] [ 2] /opt/asn/apps/openmpi_1.8.3_intel/lib/libopen-pal.so.6(opal_memory_ptmalloc2_free+0xad)[0x7fcba3b765fd]\n[dmc:13852] [ 3] /opt/asn/apps/openmpi_1.8.3_intel/lib/openmpi/mca_btl_openib.so(+0x27e14)[0x7fcb8f5cbe14]\n[dmc:13852] [ 4] /opt/asn/apps/openmpi_1.8.3_intel/lib/openmpi/mca_btl_openib.so(mca_btl_openib_finalize+0x484)[0x7fcb8f5b0724]\n[dmc:13852] [ 5] /opt/asn/apps/openmpi_1.8.3_intel/lib/libmpi.so.1(+0x8c246)[0x7fcba4d9e246]\n[dmc:13852] [ 6] /opt/asn/apps/openmpi_1.8.3_intel/lib/libopen-pal.so.6(mca_base_framework_close+0x63)[0x7fcba3b14ac3]\n[dmc:13852] [ 7] /opt/asn/apps/openmpi_1.8.3_intel/lib/libopen-pal.so.6(mca_base_framework_close+0x63)[0x7fcba3b14ac3]\n[dmc:13852] [ 8] /opt/asn/apps/openmpi_1.8.3_intel/lib/libmpi.so.1(ompi_mpi_finalize+0x60e)[0x7fcba4d5e21e]\n[dmc:13852] [ 9] ./mm_mult_mpi_gnu[0x4036ba]\n[dmc:13852] [10] /lib64/libc.so.6(__libc_start_main+0xe6)[0x7fcba427bc36]\n[dmc:13852] [11] ./mm_mult_mpi_gnu[0x402859]\n[dmc:13852] *** End of error message ***\n</code></pre>\n\n<p>And here is my program: </p>\n\n<pre><code>using namespace std;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;sstream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/time.h&gt;\n#include \"mpi.h\"\n#include &lt;cmath&gt;\n\n#define MX_SZ 320\n#define SEED 2397           /* random number seed */\n#define MAX_VALUE  100.0    /* maximum size of array elements A, and B */\n\n/* copied from mpbench */\n#define TIMER_CLEAR     (tv1.tv_sec = tv1.tv_usec = tv2.tv_sec = tv2.tv_usec = 0)\n#define TIMER_START     gettimeofday(&amp;tv1, (struct timezone*)0)\n#define TIMER_ELAPSED   ((tv2.tv_usec-tv1.tv_usec)+((tv2.tv_sec-tv1.tv_sec)*1000000))\n#define TIMER_STOP      gettimeofday(&amp;tv2, (struct timezone*)0)\nstruct timeval tv1,tv2;\n\n/*\nThis declaration facilitates the creation of a two dimensional \ndynamically allocated arrays (i.e. the lxm A array, the mxn B\narray, and the lxn C array).  It allows pointer arithmetic to \nbe applied to a single data stream that can be dynamically allocated.\nTo address the element at row x, and column y you would use the\nfollowing notation:  A(x,y),B(x,y), or C(x,y), respectively.\nNote that this differs from the normal C notation if A were a\ntwo dimensional array of A[x][y] but is still very descriptive\nof the data structure.\n*/\nfloat *a,*b,*c,*rbuf,*sbuf;\n#define A(i,j) *(a+i*dim_m+j)\n#define B(i,j) *(b+i*dim_n+j)\n#define C(i,j) *(c+i*dim_n+j)\n#define RBUF(i,j) *(rbuf+i*dim_m+j)\n#define SBUF(i,j) *(sbuf+i*dim_n+j)\n\n\n/*\n   Routine to retrieve the data size of the numbers array from the \n   command line or by prompting the user for the information\n*/\nvoid get_index_size(int argc,char *argv[],int *dim_l,int *dim_m,int *dim_n) {\n   if(argc!=2 &amp;&amp; argc!=4) {\n      cout&lt;&lt;\"usage:  mm_mult_serial [l_dimension] &lt;m_dimension n_dimmension&gt;\"\n           &lt;&lt; endl;\n      exit(1);\n   }\n   else {\n      if (argc == 2) {\n         *dim_l = *dim_n = *dim_m = atoi(argv[1]);\n      }\n      else {\n         *dim_l = atoi(argv[1]);\n         *dim_m = atoi(argv[2]);\n         *dim_n = atoi(argv[3]);\n      }\n   }\n   if (*dim_l&lt;=0 || *dim_n&lt;=0 || *dim_m&lt;=0) {\n      cout&lt;&lt;\"Error: number of rows and/or columns must be greater than 0\"\n          &lt;&lt; endl;\n      exit(1);\n   }\n}\n\n/*\n   Routine that fills the number matrix with Random Data with values\n   between 0 and MAX_VALUE\n   This simulates in some way what might happen if there was a \n   single sequential data acquisition source such as a single file\n*/\nvoid fill_matrix(float *array,int dim_m,int dim_n)\n{\n   int i,j;\n   for(i=0;i&lt;dim_m;i++) {\n      for (j=0;j&lt;dim_n;j++) {\n         array[i*dim_n+j]=drand48()*MAX_VALUE;\n      }\n   }\n}\n\n/*\n   Routine that outputs the matrices to the screen \n*/\nvoid print_matrix(float *array,int dim_m,int dim_n)\n{\n   int i,j;\n   for(i=0;i&lt;dim_m;i++) {\n      for (j=0;j&lt;dim_n;j++) {\n         cout &lt;&lt; array[i*dim_n+j] &lt;&lt; \" \";\n      }\n      cout &lt;&lt; endl;\n   }\n}\n\n/*\n   MAIN ROUTINE: summation of a number list\n*/\n\nint main( int argc, char *argv[])\n{\n   float dot_prod;\n   int dim_l,dim_n,dim_m;\n   int i,j,k;\n   int id,p;\n   int row_per_proc;\n   int remain_rows;\n   int error;\n   MPI::Status status;\n   MPI::Init(argc, argv);\n\n   id = MPI::COMM_WORLD.Get_rank();\n   p = MPI::COMM_WORLD.Get_size();\n\n   if ( id == 0 ) {\n      /* \n      get matrix sizes\n      */\n      get_index_size(argc,argv,&amp;dim_l,&amp;dim_m,&amp;dim_n);\n\n      row_per_proc = ceil(float(dim_l)/p);\n      if (dim_l%p &gt; 0) {\n         remain_rows = dim_l - (row_per_proc*(p-1));\n      } else {\n         remain_rows = 0;\n      }\n   }\n\n   // allocate space for b in all processes since it is shared\n   b = new (nothrow) float[dim_m*dim_n];\n   if (b==0) {\n      cout &lt;&lt; \"ERROR: Insufficient Memory\" &lt;&lt; endl;\n      MPI_Finalize();\n      exit(1);\n   }\n\n   if (id == 0) {\n      // allocate from heap space for a and c\n      a = new (nothrow) float[dim_l*dim_m];\n      c = new (nothrow) float[row_per_proc*p*dim_n];\n      if (a==0 || c==0) {\n         cout &lt;&lt; \"ERROR: Insufficient Memory\" &lt;&lt; endl;\n         MPI_Finalize();\n         exit(1);\n      }\n\n      /*\n         initialize numbers matrix with random data\n      */ \n      srand48(SEED);\n      fill_matrix(a,dim_l,dim_m);\n      fill_matrix(b,dim_m,dim_n);\n\n      /*\n        output numbers matrix\n      */\n      cout &lt;&lt; \"A matrix =\" &lt;&lt; endl;\n      print_matrix(a,dim_l,dim_m);\n      cout &lt;&lt; endl;\n\n      cout &lt;&lt; \"B matrix =\" &lt;&lt; endl;\n      print_matrix(b,dim_m,dim_n);\n      cout &lt;&lt; endl;\n   }\n   /*\n     broadcast variables\n   */\n   MPI_Bcast(&amp;p, 1, MPI_INT, 0, MPI_COMM_WORLD);\n   MPI_Bcast(&amp;dim_l, 1, MPI_INT, 0, MPI_COMM_WORLD);\n   MPI_Bcast(&amp;dim_m, 1, MPI_INT, 0, MPI_COMM_WORLD);\n   MPI_Bcast(&amp;dim_n, 1, MPI_INT, 0, MPI_COMM_WORLD);\n   MPI_Bcast(&amp;row_per_proc, 1, MPI_INT, 0, MPI_COMM_WORLD);\n   MPI_Bcast(&amp;remain_rows, 1, MPI_INT, 0, MPI_COMM_WORLD);\n\n   /* \n     process 0 sends rows to workers\n   */\n   rbuf = new float[row_per_proc*dim_m];\n   MPI_Scatter(a, row_per_proc*dim_m, MPI_FLOAT, rbuf, row_per_proc*dim_m, MPI_FLOAT, 0, MPI_COMM_WORLD);\n\n   /*\n     send matrix B to all other processes\n   */\n   MPI_Bcast(b, dim_m*dim_n, MPI_FLOAT, 0, MPI_COMM_WORLD);\n\n   /*\n   Start recording the execution time\n   */\n   if (id == 0) {\n      TIMER_CLEAR;\n      TIMER_START;\n   }\n\n   // multiply local part of matrix\n   sbuf = new float[row_per_proc*dim_n];\n   for (i=0; i&lt;row_per_proc; i++) {\n      for (j=0; j&lt;dim_n; j++) {\n         dot_prod = 0.0;\n         for (k=0; k&lt;dim_m; k++) {\n            dot_prod += RBUF(i,k)*B(k,j);\n         }\n         SBUF(i,j) = dot_prod;\n      }\n   }\n\n   // send the calculated values back to process 0\n   error = MPI_Gather(sbuf, row_per_proc*dim_n, MPI_FLOAT, c, row_per_proc*dim_n, MPI_FLOAT, 0, MPI_COMM_WORLD);\n   cout &lt;&lt; \"gather returned: \" &lt;&lt; error &lt;&lt; endl;\n\n   if (id == 0) {\n      /*\n         stop recording the execution time\n      */ \n      TIMER_STOP;\n\n      cout &lt;&lt; \"C matrix =\" &lt;&lt; endl;\n      print_matrix(c,dim_l,dim_n);\n      cout &lt;&lt; endl;\n      cout &lt;&lt; \"time=\" &lt;&lt; setprecision(8) &lt;&lt;  TIMER_ELAPSED/1000000.0  &lt;&lt; \" seconds\" &lt;&lt; endl;\n   }\n\n   // return allocated memory\n   delete a; delete b; delete c; delete rbuf; delete sbuf;\n   error = MPI_Finalize();\n   cout &lt;&lt; \"finalize returned: \" &lt;&lt; error &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "extern"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1443635396, "post_id": 32872607, "comment_id": 53576861, "body": "<code>extern const int i = 42;</code>"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1443635516, "post_id": 32872607, "comment_id": 53576928, "body": "@KerrekSB Ohhh yes, indeed, can you please write an answer so I can accept it? It completely slipped out of my mind that <code>const</code> needs an initialization. But still not completely clear, why <code>const int i = 42;</code> in <code>source.cpp</code> doesn&#39;t work and produces an undefined symbol?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1443635663, "post_id": 32872607, "comment_id": 53576995, "body": "OK, done. It&#39;s about linkage; what you wrote doesn&#39;t produce external linkage."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1443635681, "post_id": 32872607, "comment_id": 53577010, "body": "makes perfect sense now, thanks, kept forgetting that <code>const</code> has internal linkage."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1443635773, "post_id": 32872607, "comment_id": 53577050, "body": "Well, <code>const</code> on variables at namespace scope, yes..."}], "answers": [{"tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 5, "last_activity_date": 1443635643, "creation_date": 1443635643, "answer_id": 32872708, "question_id": 32872607, "link": "https://stackoverflow.com/questions/32872607/use-case-for-initialized-extern-variable/32872708#32872708", "title": "Use case for initialized extern variable", "body": "<p>The <code>extern</code> specifier is useful in conjunction with variables that would have internal linkage without it, such as constants at namespace scope:</p>\n\n<p><strong>a.cpp:</strong></p>\n\n<pre><code>extern const int n = 10;  // external linkage\n</code></pre>\n\n<p><strong>b.cpp:</strong></p>\n\n<pre><code>int main()\n{\n    extern const int n;   // finds the n defined in the other TU\n    return n;\n}\n</code></pre>\n"}], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1186, "favorite_count": 0, "accepted_answer_id": 32872708, "answer_count": 1, "score": 1, "last_activity_date": 1443635643, "creation_date": 1443635288, "last_edit_date": 1592644375, "question_id": 32872607, "link": "https://stackoverflow.com/questions/32872607/use-case-for-initialized-extern-variable", "title": "Use case for initialized extern variable", "body": "<p>I realized that I can <em>define</em> an <code>extern</code> variable, like:</p>\n<p><strong>source.cpp</strong></p>\n<pre><code>extern int i = 42; // definition, can very well just remove the `extern`\n</code></pre>\n<p><strong>main.cpp</strong></p>\n<pre><code>#include &lt;iostream&gt;\n\nextern int i; // declaration\n\nint  main()\n{\n    std::cout &lt;&lt; i &lt;&lt; std::endl;\n}\n</code></pre>\n<p>I can then compile and link the program,</p>\n<pre><code>g++ main.cpp source.cpp\n</code></pre>\n<p>and it runs and correctly displays <code>42</code>. The warning I get is</p>\n<blockquote>\n<p>warning: 'i' initialized and declared 'extern' (gcc)</p>\n<p>warning: 'extern' variable has an initializer (clang)</p>\n</blockquote>\n<p>Using <code>int i = 42;</code> in <code>source.cpp</code> has exactly the same overall effect.</p>\n<p><strong>My question</strong>: is there any non-trivial use case for variables <em>defined</em> <code>extern</code> (not just declared then defined in another translation unit)? Is such a definition even standard compliant?</p>\n"}, {"tags": ["c++", "animation", "directx", "fbx"], "comments": [{"owner": {"reputation": 96, "user_id": 3052941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1baa29731377bd44e431ca0e609cce6c?s=128&d=identicon&r=PG&f=1", "display_name": "malhotraprateek", "link": "https://stackoverflow.com/users/3052941/malhotraprateek"}, "edited": false, "score": 0, "creation_date": 1443702231, "post_id": 32872530, "comment_id": 53604722, "body": "It has been a long time since I tried importing an Fbx file like you are doing. I use the Asset Importer library to import different kinds of 3D models. I know this is not what you asked for, but thought that maybe I should suggest this. There seem to be a lot of tutorials out there for using assimp."}, {"owner": {"reputation": 621, "user_id": 1118495, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cc45c855d7c8f3cf2a78d17a718a2724?s=128&d=identicon&r=PG", "display_name": "P. Avery", "link": "https://stackoverflow.com/users/1118495/p-avery"}, "reply_to_user": {"reputation": 96, "user_id": 3052941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1baa29731377bd44e431ca0e609cce6c?s=128&d=identicon&r=PG&f=1", "display_name": "malhotraprateek", "link": "https://stackoverflow.com/users/3052941/malhotraprateek"}, "edited": false, "score": 0, "creation_date": 1445305621, "post_id": 32872530, "comment_id": 54257917, "body": "@malhotraprateek The Asset Importer Library doesn&#39;t include Autodesk Filmbox files(.fbx). It is, however, useful for many other file formats"}], "owner": {"reputation": 621, "user_id": 1118495, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cc45c855d7c8f3cf2a78d17a718a2724?s=128&d=identicon&r=PG", "display_name": "P. Avery", "link": "https://stackoverflow.com/users/1118495/p-avery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1653, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1445154600, "creation_date": 1443634986, "question_id": 32872530, "link": "https://stackoverflow.com/questions/32872530/extracting-skin-data-from-an-fbx-file", "title": "Extracting skin data from an FBX file", "body": "<p>I need to convert animation data from Autodesk's FBX file format to one that is compatible with DirectX; specifically, I need to calculate the offset matrices for my skinned mesh. I have written a converter( which in this case converts .fbx to my own 'scene' format ) in which I would like to calculate an offset matrix for my mesh. Here is code:</p>\n\n<pre><code>//\n//  Skin\n//\nif(bHasDeformer)\n{\n    // iterate deformers( TODO: ACCOUNT FOR MULTIPLE DEFORMERS )\n    for(int i = 0; i &lt; ncDeformers &amp;&amp; i &lt; 1; ++i)\n    {\n        // skin\n        FbxSkin *pSkin = (FbxSkin*)pMesh-&gt;GetDeformer(i, FbxDeformer::eSkin);\n        if(pSkin == NULL)\n            continue;\n\n        // bone count\n        int ncBones = pSkin-&gt;GetClusterCount();\n\n        // iterate bones\n        for (int boneIndex = 0; boneIndex &lt; ncBones; ++boneIndex)\n        {                       \n            // cluster\n            FbxCluster* cluster = pSkin-&gt;GetCluster(boneIndex);\n\n            // bone ref\n            FbxNode* pBone = cluster-&gt;GetLink();\n\n            // Get the bind pose\n            FbxAMatrix bindPoseMatrix, transformMatrix;\n            cluster-&gt;GetTransformMatrix(transformMatrix);\n            cluster-&gt;GetTransformLinkMatrix(bindPoseMatrix);\n\n            // decomposed transform components\n            vS = bindPoseMatrix.GetS();\n            vR = bindPoseMatrix.GetR();\n            vT = bindPoseMatrix.GetT();\n\n            int *pVertexIndices = cluster-&gt;GetControlPointIndices();\n            double *pVertexWeights = cluster-&gt;GetControlPointWeights();\n\n            // Iterate through all the vertices, which are affected by the bone\n            int ncVertexIndices = cluster-&gt;GetControlPointIndicesCount();\n\n            for (int iBoneVertexIndex = 0; iBoneVertexIndex &lt; ncVertexIndices; iBoneVertexIndex++) \n            {\n                // vertex\n                int niVertex = pVertexIndices[iBoneVertexIndex];\n\n                // weight\n                float fWeight = (float)pVertexWeights[iBoneVertexIndex];\n            }\n        }\n    }\n</code></pre>\n\n<p>How do I convert the fbx transforms to a bone offset matrix?</p>\n"}, {"tags": ["c++", "templates", "c++11"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1443635032, "post_id": 32872505, "comment_id": 53576690, "body": "1. Please post actual code of how you could call it. What&#39;s <code>variable</code>, what&#39;s <code>func()</code>? 2. Post full compiler error."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1443635793, "post_id": 32872505, "comment_id": 53577065, "body": "Are you trying to reinvent <code>boost::lexical_cast</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1443635189, "creation_date": 1443635189, "answer_id": 32872576, "question_id": 32872505, "link": "https://stackoverflow.com/questions/32872505/casting-char-to-int-reference-in-a-template/32872576#32872576", "title": "Casting char to int reference in a template", "body": "<p>You need to re-think your design.</p>\n\n<p><code>static_cast</code> will not allow casting <code>char</code> or <code>char&amp;</code> to <code>int&amp;</code>. That's what's going to happen in the following call:</p>\n\n<pre><code>f1&gt;&gt;type_transform(variable);\n</code></pre>\n\n<p>if <code>variable</code> is of type <code>char</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1079, "user_id": 2308211, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c44e36061f8bf558031c1ee44d038c5c?s=128&d=identicon&r=PG", "display_name": "SPMP", "link": "https://stackoverflow.com/users/2308211/spmp"}, "edited": false, "score": 0, "creation_date": 1443643658, "post_id": 32873481, "comment_id": 53580902, "body": "Thanks! I updated the question, and added one at the end. Could you please explain how we could avoid writing separate specializations for function templates with lvalue references and rvalue references?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 1079, "user_id": 2308211, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c44e36061f8bf558031c1ee44d038c5c?s=128&d=identicon&r=PG", "display_name": "SPMP", "link": "https://stackoverflow.com/users/2308211/spmp"}, "edited": false, "score": 0, "creation_date": 1443644503, "post_id": 32873481, "comment_id": 53581317, "body": "@user2308211 split read and write io helpers.  Made <code>io_helper</code> function determine which to use based on r/l/constness of argument.  Code refuses to read into an rvalue (which is usually the sign of a bug: I&#39;d advise against changing that.  Make reading into rvalues explicit), but will write from one."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 1079, "user_id": 2308211, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c44e36061f8bf558031c1ee44d038c5c?s=128&d=identicon&r=PG", "display_name": "SPMP", "link": "https://stackoverflow.com/users/2308211/spmp"}, "edited": false, "score": 1, "creation_date": 1443646565, "post_id": 32873481, "comment_id": 53582339, "body": "@user2308211 and typos fixed, live example added."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 2, "last_activity_date": 1443646516, "last_edit_date": 1443646516, "creation_date": 1443638751, "answer_id": 32873481, "question_id": 32872505, "link": "https://stackoverflow.com/questions/32872505/casting-char-to-int-reference-in-a-template/32873481#32873481", "title": "Casting char to int reference in a template", "body": "<p>You cannot bind a reference to <code>int</code> to a <code>char</code>.</p>\n\n<p>If you want to read something as another type, do a bit more work:</p>\n\n<pre><code>template&lt;class T&gt;\nstruct io_storage {\n  T&amp; t;\n  io_storage(io_storage&amp;&amp;)=default;\n  io_storage(T&amp; tin):t(tin) {}\n};\ntemplate&lt;class T, class=void, class storage=io_storage&lt;T&gt;&gt;\nstruct io_read_helper_t:storage {\n  friend std::istream&amp; operator&gt;&gt;( std::istream&amp; i, io_read_helper_t x ) {\n    return i &gt;&gt; x.t;\n  }\n  using storage::storage;\n};\ntemplate&lt;class T, class=void, class storage=io_storage&lt;T&gt;&gt;\nstruct io_write_helper_t:storage {\n  friend std::ostream&amp; operator&lt;&lt;( std::ostream&amp; o, io_write_helper_t x ) {\n    return o &lt;&lt; x.t;\n  }\n  using storage::storage;\n};\ntemplate&lt;class T, class impl=io_write_helper_t&lt;T, void, io_read_helper_t&lt;T&gt;&gt;&gt;\nstruct io_helper_t : impl {\n  using impl::impl;\n};\n\ntemplate&lt;class T&gt;\nio_helper_t&lt;T&gt; io_helper( T&amp; t ) { return {t}; }\ntemplate&lt;class T&gt;\nio_write_helper_t&lt;const T&gt; io_helper( T const&amp; t ) { return {t}; }\ntemplate&lt;class T&gt;\nio_write_helper_t&lt;const T&gt; io_helper( T&amp;&amp; t ) { return {t}; }\n\ntemplate&lt;class...&gt;struct voider{using type=void;};\ntemplate&lt;class...Ts&gt;using void_t=typename voider&lt;Ts...&gt;::type;\n\ntemplate&lt;class T&gt;\nstruct io_type_as {};\ntemplate&lt;&gt; struct io_type_as&lt;char&gt;{ using type=int; };\n\ntemplate&lt;class T&gt;\nusing io_type_as_t=typename io_type_as&lt;typename std::remove_const&lt;T&gt;::type&gt;::type;\n\ntemplate&lt;class T, class storage&gt;\nstruct io_read_helper_t&lt;T, void_t&lt;io_type_as_t&lt;T&gt;&gt;, storage&gt;:storage {\n  using X=io_type_as_t&lt;T&gt;;\n  friend std::istream&amp; operator&gt;&gt;( std::istream&amp; i, io_read_helper_t x ) {\n    X tmp;\n    auto&amp; r = i &gt;&gt; io_helper(tmp);\n    x.t = std::move(tmp);\n    return r;\n  }\n  using storage::storage;\n};\ntemplate&lt;class T, class storage&gt;\nstruct io_write_helper_t&lt;T, void_t&lt;io_type_as_t&lt;T&gt;&gt;, storage&gt;:storage {\n  using X=io_type_as_t&lt;T&gt;;\n  friend std::ostream&amp; operator&lt;&lt;( std::ostream&amp; o, io_write_helper_t x )\n  {\n    return o &lt;&lt; io_helper(X(x.t));\n  }\n  using storage::storage;\n};\n</code></pre>\n\n<p>now, if you define <code>io_type_as&lt;X&gt;::type</code> to be <code>Y</code>, <code>iohelper(x)</code> will automatically read/write as type <code>Y</code>, and be assigned before/after as needed.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/25cb255f5ba53417\" rel=\"nofollow\">live example</a></p>\n"}], "owner": {"reputation": 1079, "user_id": 2308211, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c44e36061f8bf558031c1ee44d038c5c?s=128&d=identicon&r=PG", "display_name": "SPMP", "link": "https://stackoverflow.com/users/2308211/spmp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 32873481, "answer_count": 2, "score": 0, "last_activity_date": 1443646516, "creation_date": 1443634912, "last_edit_date": 1443645996, "question_id": 32872505, "link": "https://stackoverflow.com/questions/32872505/casting-char-to-int-reference-in-a-template", "title": "Casting char to int reference in a template", "body": "<p>[UPDATE: Yakk pretty much answered my question, but I'm updating the question for clarity. I have one other question, that I mention at the end.]</p>\n\n<p>I am trying to write a serialization function, as a part of which, I need to convert char to int, and leave other types unchanged. I have written the following code:</p>\n\n<pre><code>#include&lt;string&gt;\n#include&lt;iostream&gt;\n#include&lt;vector&gt;\n\nusing namespace std;\ntemplate&lt;typename T1&gt;\nstruct return_type {typedef T1 type;};\ntemplate&lt;&gt;\nstruct return_type&lt;char&gt; {typedef int type;};\n\ntemplate&lt;typename T1&gt;\ntypename return_type&lt;T1&gt;::type &amp;type_transform(T1 &amp;&amp;t) \n{\n    //If writing/reading char, cast it to int \n    return static_cast&lt;typename return_type&lt;T1&gt;::type &amp;&gt;(t);\n} \n\ntemplate&lt;typename T1&gt;\ntypename return_type&lt;T1&gt;::type &amp;type_transform(T1 &amp;t) \n{\n    //If writing/reading char, cast it to int \n    return static_cast&lt;typename return_type&lt;T1&gt;::type &amp;&gt;(t);\n} \n\nchar fn()\n{\n    return '\\n';\n}\n\nmain()\n{\n\n    ofstream ofs(\"serialized.txt\");\n    //        ofs&lt;&lt;type_transform(fn()); error, should write 10\n    ofs.close();\n    ifstream ifs(\"serialized.txt\");\n    //        ifs&gt;&gt;type_transform(b);    error, should read newline back\n\n}\n</code></pre>\n\n<p>I get an error:</p>\n\n<p><code>invalid static_cast from type \u2018char\u2019 to type \u2018return_type&lt;char&gt;::type&amp; {aka int&amp;}\u2019</code></p>\n\n<p>Questions:</p>\n\n<ol>\n<li>How can I make this work?</li>\n<li>How can I avoid rewriting the template specialization for lvalue and rvalue references?</li>\n</ol>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 4, "creation_date": 1443634808, "post_id": 32872465, "comment_id": 53576563, "body": "You cannot test for whether something is dangling. Any attempt to do so would have undefined behaviour."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 3, "creation_date": 1443635554, "post_id": 32872465, "comment_id": 53576942, "body": "This is basically a dup of <a href=\"http://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope\" title=\"can a local variables memory be accessed outside its scope\">stackoverflow.com/questions/6441218/&hellip;</a> with the addition of a question about the lifetime of string literals"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1443635634, "post_id": 32872465, "comment_id": 53576981, "body": "<i>&quot;in my tests it is not&quot;</i> lol you what?"}], "answers": [{"tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": true, "score": 13, "last_activity_date": 1443635523, "last_edit_date": 1495541738, "creation_date": 1443635076, "answer_id": 32872550, "question_id": 32872465, "link": "https://stackoverflow.com/questions/32872465/const-char-value-lifetime/32872550#32872550", "title": "const char * value lifetime", "body": "<p>The variables <code>p</code> and <code>t</code> are stack variables that you declared, so they have a lifetime that ends at the end of their enclosing block.</p>\n\n<p>But the value of <code>t</code> is the address of the string literal <code>\"test\"</code>, and that is not a variable you declared, it's not on the stack. It's a string literal, which is a constant defined in the program (similar to the integer literal <code>99</code> or the floating point literal <code>0.99</code>). Literals don't go out of scope as you expect, because they are not created or destroyed, they just <em>are</em>.</p>\n\n<p>The standard says:</p>\n\n<blockquote>\n  <p>Evaluating a string-literal results in a string literal object with static storage duration, initialized from the given characters as specified above.</p>\n</blockquote>\n\n<p>So the object that the compiler creates to represent the literal <code>\"test\"</code> has static storage duration, which is the same duration as globals and <code>static</code> variables, meaning it doesn't go out of scope like a stack variable.</p>\n\n<p>The value of <code>p</code> is the address of <code>t</code>, which <em>does</em> become an invalid pointer when <code>t</code> goes out of scope, but that doesn't mean that the value stored at that address suddenly becomes inaccessible or gets wiped. The expression <code>*p</code> is undefined behaviour, but it appears to work because nothing has reused that memory location yet so <code>*p</code> still contains the address of the string literal. For more details on that see the top answer to <a href=\"https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope\">Can a local variable&#39;s memory be accessed outside its scope?</a></p>\n"}, {"tags": [], "owner": {"reputation": 5187, "user_id": 967426, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/944c8dcbf25fb7291afad797fb54afd9?s=128&d=identicon&r=PG", "display_name": "Tony K.", "link": "https://stackoverflow.com/users/967426/tony-k"}, "is_accepted": false, "score": 3, "last_activity_date": 1443635394, "last_edit_date": 1443635394, "creation_date": 1443635088, "answer_id": 32872557, "question_id": 32872465, "link": "https://stackoverflow.com/questions/32872465/const-char-value-lifetime/32872557#32872557", "title": "const char * value lifetime", "body": "<p>Compilers put literal strings into a statically allocated space which is loaded into a protected segment of the virtual memory, such that those strings can be shared over the entire lifetime of the process (the value is a constant, so no need to take the overhead of constantly springing them into existence). Looking for something like that to be deallocated is a waste of time, since it never actually happens.</p>\n\n<p>The variables are stack-allocated. The string constant should be thought of as just that: a string constant...like the number 3.</p>\n"}, {"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 1, "last_activity_date": 1443635476, "creation_date": 1443635476, "answer_id": 32872651, "question_id": 32872465, "link": "https://stackoverflow.com/questions/32872465/const-char-value-lifetime/32872651#32872651", "title": "const char * value lifetime", "body": "<p>String literals get allocated in the static storage.</p>\n\n<p>If you mention a string literal anywhere in your program, it's as if you did:</p>\n\n<pre><code>static const char someUniqueIdentifier[]=\"the data\";\n</code></pre>\n\n<p>in the global scope.</p>\n\n<p><code>const char* str = \"some string\";</code> means make sure <code>\"some string\"</code> exists as a constant null-terminated array in the static section of the program and point <code>str</code> to it.</p>\n\n<p>You're however referencing your automatic (=on the stack) pointer in the first example, not the static storage string. That indeed has a lifetime limited to it's scope, however when you invoke <code>test2()</code>, the scope of <code>test1()</code> hasn't ended yet.</p>\n"}], "owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3656, "favorite_count": 1, "closed_date": 1443635648, "accepted_answer_id": 32872550, "answer_count": 3, "score": 6, "last_activity_date": 1443636092, "creation_date": 1443634753, "last_edit_date": 1443636092, "question_id": 32872465, "link": "https://stackoverflow.com/questions/32872465/const-char-value-lifetime", "closed_reason": "Duplicate", "title": "const char * value lifetime", "body": "<p><strong>EDIT:</strong> The question about why the code in this question works has been answered by the linked question in the duplicate marking. The question about string literal lifetime is answered in the answer to this question.</p>\n\n<p>I am trying to understand how and when the string pointed to by <code>const char *</code> gets deallocated.</p>\n\n<p>Consider:</p>\n\n<pre><code>const char **p = nullptr;\n\n{\n    const char *t = \"test\";\n    p = &amp;t;\n}\n\ncout &lt;&lt; *p;\n</code></pre>\n\n<p>After leaving the inner scope I would expect <code>p</code> to be a dangling pointer to <code>const char *</code>. However in my tests it is not. That would imply that the value of <code>t</code> actually continues to be valid and accessible even after <code>t</code> gets out of scope.</p>\n\n<p>It could be due to prolonging the lifetime of the temporary by binding it to const reference. But I do no such thing and even by saving the reference to <code>t</code> in a member variable and printing the value from different function later still gives me its correct value.</p>\n\n<pre><code>class CStringTest\n{\npublic:\n    void test1()\n    { \n        const char *t = \"test\";\n        m_P = &amp;t;\n        test2();\n    }\n\n    void test2() \n    { \n        cout &lt;&lt; *m_P;\n    }\n\nprivate:\n    const char **m_P = nullptr;\n};\n</code></pre>\n\n<p>So what is the lifetime of the <code>t</code>'s value here? I would say I am invoking undefined behaviour by dereferencing a pointer to a value of a variable that went out of scope. But it works every time so I think that is not the case.</p>\n\n<p>When trying some other type like <code>QString</code>:</p>\n\n<pre><code>QString *p = nullptr;\n\n{\n    QString str = \"test\";\n    p = &amp;str;\n}\n\ncout &lt;&lt; *p;\n</code></pre>\n\n<p>the code always prints the value correctly too even though it should not. <code>str</code> went out of scope with its value and I have not prolonged its lifetime by binding it to const reference either.</p>\n\n<p>Interestingly the class example with <code>QString</code> behaves as I would expect and <code>test2()</code> prints gibberish because the value indeed went out of scope and <code>m_P</code> became dangling pointer.</p>\n\n<p>So what is the actual lifetime of <code>const char *</code>'s value?</p>\n"}, {"tags": ["c++", "unit-testing", "c++11", "network-programming"], "comments": [{"owner": {"reputation": 126, "user_id": 3621991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2b4f373f14efa0965985d481590d39d?s=128&d=identicon&r=PG&f=1", "display_name": "user3621991", "link": "https://stackoverflow.com/users/3621991/user3621991"}, "edited": false, "score": 0, "creation_date": 1443637139, "post_id": 32872414, "comment_id": 53577745, "body": "You might use gMock."}], "answers": [{"tags": [], "owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "is_accepted": true, "score": 0, "last_activity_date": 1446917785, "creation_date": 1446917785, "answer_id": 33585703, "question_id": 32872414, "link": "https://stackoverflow.com/questions/32872414/how-to-write-a-test-for-a-network-listener/33585703#33585703", "title": "How to write a test for a network listener?", "body": "<p>I'm going to use py.test to run my functional tests, even though this is a C++ project.</p>\n"}], "owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 33585703, "answer_count": 1, "score": 0, "last_activity_date": 1446917785, "creation_date": 1443634567, "question_id": 32872414, "link": "https://stackoverflow.com/questions/32872414/how-to-write-a-test-for-a-network-listener", "title": "How to write a test for a network listener?", "body": "<p>I am currently writing a piece of C++ code that will listen for network connections. I'm using gtest to write unit tests but I've reached a problem I don't know how to fix:</p>\n\n<p>How can I test the functions that listen for network connections? If I put this in my unit test they'll block.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1443634737, "post_id": 32872413, "comment_id": 53576509, "body": "are you using <code>cin &gt;&gt; something</code> before <code>cout &lt;&lt; &quot;Movie Name: &quot; &lt;&lt; endl;</code>?  If so then see: <a href=\"http://stackoverflow.com/questions/21567291/why-does-stdgetline-skip-input-after-a-formatted-extraction\" title=\"why does stdgetline skip input after a formatted extraction\">stackoverflow.com/questions/21567291/&hellip;</a>"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1443635007, "post_id": 32872413, "comment_id": 53576679, "body": "@NathanOliver Indeed, my bad."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1443635455, "post_id": 32872413, "comment_id": 53576895, "body": "<i>&quot;I need to get an output of the input that I have created the first one, but I maybe do something wrong because the second output won&#39;t print out the input&quot;</i> This is art."}], "answers": [{"tags": [], "owner": {"reputation": 28, "user_id": 5372969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d1e6138374051e0f80b9b7d4dbf5896?s=128&d=identicon&r=PG&f=1", "display_name": "TheUnknown", "link": "https://stackoverflow.com/users/5372969/theunknown"}, "is_accepted": false, "score": 0, "last_activity_date": 1443639861, "creation_date": 1443639861, "answer_id": 32873767, "question_id": 32872413, "link": "https://stackoverflow.com/questions/32872413/c-expression-and-activity-cin-getline/32873767#32873767", "title": "C++ expression and activity cin.getline", "body": "<p>Try this:</p>\n\n<pre><code>cout&lt;&lt; \"Movie Name: \" &lt;&lt; endl;\ncin &gt;&gt; movie_name &gt;&gt; endl;\ncout &lt;&lt; \"Movie Name: \" &lt;&lt; movie_name &lt;&lt; endl;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5392037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6343daf9000c6d83822f62dfd0bab931?s=128&d=identicon&r=PG&f=1", "display_name": "Aut Bhalang", "link": "https://stackoverflow.com/users/5392037/aut-bhalang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443639861, "creation_date": 1443634560, "last_edit_date": 1443634601, "question_id": 32872413, "link": "https://stackoverflow.com/questions/32872413/c-expression-and-activity-cin-getline", "title": "C++ expression and activity cin.getline", "body": "<p>I need to get an output of the input that I have created the first one, but I maybe do something wrong because the second output won't print out the input</p>\n\n<pre><code>cout &lt;&lt; \"Movie Name: \" &lt;&lt; endl;\ncin.getline(movie_name, SIZE);\ncin.ignore();\n\ncout &lt;&lt; \"Movie Name: \" &lt;&lt; movie_name &lt;&lt; endl;\n</code></pre>\n\n<p>The last line only output \"Movie Name:\" but won't print out the input that I have created.</p>\n"}, {"tags": ["c++", "templates", "c++11", "typetraits"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1443634640, "post_id": 32872387, "comment_id": 53576450, "body": "This compiles with MSVS 2015"}, {"owner": {"reputation": 1403, "user_id": 5076707, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tGqWB.jpg?s=128&g=1", "display_name": "Pumkko", "link": "https://stackoverflow.com/users/5076707/pumkko"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1443634826, "post_id": 32872387, "comment_id": 53576571, "body": "Yes and g++ accepts the code, so why clang rejects it ? is it a clang++ bug ?"}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 1, "creation_date": 1443637381, "post_id": 32872387, "comment_id": 53577876, "body": "I would prefer to write this as <code>template&lt;typename T, typename = int&gt; struct check : std::true_type { }; template&lt;typename T&gt; struct check&lt;T, decltype(T::i)&gt; : public std::false_type { }; static constexpr bool value = check&lt;HasIt&gt;();</code>"}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 1, "last_activity_date": 1443635495, "creation_date": 1443635495, "answer_id": 32872660, "question_id": 32872387, "link": "https://stackoverflow.com/questions/32872387/ambiguous-call-in-custom-member-detector/32872660#32872660", "title": "Ambiguous call in custom member detector", "body": "<p>The code should be valid. We have two viable candidates:</p>\n\n<pre><code>template &lt;class U&gt;\nstatic char check( decltype(U::i)* ); // --&gt; int*\n\ntemplate &lt;class U&gt;\nstatic int check( U* ); // --&gt; HasIt*\n</code></pre>\n\n<p><code>nullptr</code> is convertible to both pointer types, neither conversion is better than the other, both candidates are function templates. But the former is more specialized than the latter, so it should be preferred. This is a clang bug.</p>\n\n<p>A simple workaround that works for both compilers is to change the second overload to instead be:</p>\n\n<pre><code>template&lt;typename U&gt;\nstatic int check(...);   \n</code></pre>\n\n<p>Since anything is preferred over ellipses, this still remains the fallback option, without having to rely on template partial ordering rules. </p>\n\n<p>Furthermore, since we're in C++11, we can just use the return types directly:</p>\n\n<pre><code>template&lt;class U&gt;\nstatic std::false_type check( decltype(U::i)* ); \n\ntemplate&lt;typename U&gt;\nstatic std::true_type check(...);\n\nusing type = decltype(check&lt;HasIt&gt;(nullptr));\nstatic constexpr bool value = type::value;\n</code></pre>\n"}], "owner": {"reputation": 1403, "user_id": 5076707, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tGqWB.jpg?s=128&g=1", "display_name": "Pumkko", "link": "https://stackoverflow.com/users/5076707/pumkko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 32872660, "answer_count": 1, "score": 2, "last_activity_date": 1443635508, "creation_date": 1443634474, "last_edit_date": 1443635508, "question_id": 32872387, "link": "https://stackoverflow.com/questions/32872387/ambiguous-call-in-custom-member-detector", "title": "Ambiguous call in custom member detector", "body": "<p>I was working in my own implementation of a member detector to improve my programming skills. The following code compile well with g++ but clang++ reject the code, the error is : </p>\n\n<blockquote>\n  <p>error: call to 'check' is ambiguous main.cpp:19:17: note: candidate function [with U = has_member::HasIt]</p>\n  \n  <p>static char check( decltype(U::i)* ); </p>\n  \n  <p>main.cpp:22:16: note: candidate function [with U =\n  has_member::HasIt]</p>\n  \n  <p>static int check(U*);</p>\n</blockquote>\n\n<p>Here's the code of the class </p>\n\n<pre><code>template&lt;typename T&gt;\nstruct has_member \n{\n\n    struct Fallback\n    {\n        int i;\n    };\n\n    struct HasIt : Fallback, T\n    {};\n\n    template&lt;class U&gt;\n    static char check( decltype(U::i)* ); \n\n    template&lt;typename U&gt;\n    static int check(U*);    \n\n    static const bool value = sizeof(check&lt;HasIt&gt;( nullptr ) ) == sizeof(int);\n};\n\nclass Test\n{\npublic:\n\n};\n\nint main()\n{\n    auto v  = has_member&lt;Test&gt;::value;\n\n    std::cout &lt;&lt; std::boolalpha &lt;&lt; v;\n}\n</code></pre>\n\n<p>Live example <a href=\"http://coliru.stacked-crooked.com/a/dc75d4ee66d3d414\" rel=\"nofollow\">here</a></p>\n\n<p>The question is : is the code valid ? If it is why g++ accepts it ?</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 7, "creation_date": 1443634372, "post_id": 32872312, "comment_id": 53576309, "body": "accessing memory you do not control is undefined behavior."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4180612"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1443635191, "post_id": 32872312, "comment_id": 53576765, "body": "@NathanOliver We have no idea if he does control that memory, because he didn&#39;t said what <code>x</code> is. <code>x</code> could be defined as such: <code>int a[2]; int&amp; x = a;</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1443635308, "post_id": 32872312, "comment_id": 53576821, "body": "@Fireho in the code it could be but the question is <code>Set Value Of Random Memory Address</code> and it is unlikely they will have control of that random address."}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1443637576, "post_id": 32872312, "comment_id": 53577978, "body": "@NathanOliver In this case, I think they&#39;re intentionally invoking that undefined behavior. :)"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1443637681, "post_id": 32872312, "comment_id": 53578039, "body": "@Peter James Flanagan: Why did you use a <code>*</code> in the first case and then suddenly omitted it in the second? What was your logic behind omitting it?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1443638052, "post_id": 32872312, "comment_id": 53578214, "body": "Same reason you can&#39;t do <code>x + 1  = 5;</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1443638519, "post_id": 32872312, "comment_id": 53578471, "body": "You can&#39;t be guaranteed that every address is accessible or that the address is defined.  For example, in some embedded systems there are address available but nothing exists there.  In bigger operating systems, the OS may not want you poking around in the address space, so it will prevent you from doing so.  In other systems, the addresses may be <i>virtual</i>, so you have no idea what you are accessing."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1443640018, "post_id": 32872312, "comment_id": 53579253, "body": "@PeterJamesFlanagan I think you pinged me by mistake.  I think you ment to ping Thomas Matthews."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4180612"}, "is_accepted": false, "score": 2, "last_activity_date": 1443634434, "creation_date": 1443634434, "answer_id": 32872375, "question_id": 32872312, "link": "https://stackoverflow.com/questions/32872312/set-value-of-random-memory-address/32872375#32872375", "title": "Set value of random memory address", "body": "<p>You forgot to use the <code>*</code> operator.</p>\n"}, {"tags": [], "owner": {"reputation": 13376, "user_id": 873025, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/d8rRW.jpg?s=128&g=1", "display_name": "Snps", "link": "https://stackoverflow.com/users/873025/snps"}, "is_accepted": true, "score": 3, "last_activity_date": 1443638933, "last_edit_date": 1443638933, "creation_date": 1443637119, "answer_id": 32873073, "question_id": 32872312, "link": "https://stackoverflow.com/questions/32872312/set-value-of-random-memory-address/32873073#32873073", "title": "Set value of random memory address", "body": "<p>The error is due to you trying to assign to a temporary address.</p>\n\n<pre><code>(&amp;x + 1) = 0;\n</code></pre>\n\n<p>What you probably meant was:</p>\n\n<pre><code>*(&amp;x + 1) = 0;\n</code></pre>\n\n<p>The results of this expression depends on the type of <code>x</code>. If <code>x</code> is of type <code>int</code>, then this will result in undefined behaviour as you are effectively assigning to memory that have not been allocated.</p>\n\n<p>However, using a type as the following will result in well defined behaviour for your example.</p>\n\n<pre><code>struct Foo {\n    Foo&amp; operator=(int i) { x[0] = i; return *this; }\n    int* operator&amp;() { return x.data(); }\n    std::array&lt;int, 2&gt; x{{0}};\n};\n\nint main() {\n    Foo x;\n    x = 1;\n    std::cout &lt;&lt; *(&amp;x + 1) &lt;&lt; std::endl; // Equivalent to 'x.x[1]' which is '0'.\n    *(&amp;x + 1) = 0; // Ok.\n}\n</code></pre>\n\n<p>In C++, it is always undefined behaviour to access memory that have not been previously allocated. The results of such an operation can result in pretty much anything as, e.g., the execution of a random instruction laying around in deallocated memory.</p>\n"}], "owner": {"reputation": 59, "user_id": 4590438, "user_type": "registered", "profile_image": "https://graph.facebook.com/922329971131995/picture?type=large", "display_name": "Peter James Flanagan", "link": "https://stackoverflow.com/users/4590438/peter-james-flanagan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "accepted_answer_id": 32873073, "answer_count": 2, "score": 1, "last_activity_date": 1443638933, "creation_date": 1443634250, "last_edit_date": 1443638148, "question_id": 32872312, "link": "https://stackoverflow.com/questions/32872312/set-value-of-random-memory-address", "title": "Set value of random memory address", "body": "<p>I understand that it probably isn't good practice to do the following. However, I was curious as to if it was possible?</p>\n\n<pre><code>x = 1;\ncout &lt;&lt; *(&amp;x + 1) &lt;&lt; endl; // Prints value at next memory address.\n(&amp;x + 1) = 0; // DOESN'T WORK.\n\n// I want to set the value of the next memory address.\n</code></pre>\n\n<p>The error I get says:</p>\n\n<blockquote>\n  <p>error: lvalue required as left operand of assignment</p>\n</blockquote>\n\n<p>Is there anything I can change to make this work, even though I understand that this probably isn't useful.</p>\n"}, {"tags": ["c++", "memory-management", "coding-style", "singleton", "systemc"], "owner": {"reputation": 528, "user_id": 1134337, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a720109d043271ade2fe5ad6c138821a?s=128&d=identicon&r=PG", "display_name": "Bertone", "link": "https://stackoverflow.com/users/1134337/bertone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 359, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1443634057, "creation_date": 1443634057, "question_id": 32872261, "link": "https://stackoverflow.com/questions/32872261/systemc-tlm-c-sharing-memory-pool-static-members-static-methods-singleton", "title": "SystemC/TLM (C++) sharing memory pool; static members, static methods, Singleton or?", "body": "<p><strong>Context:</strong>\nI am writing a specific communication protocol to be used between TLM models (HW blocks described with SystemC and thus C++).\nTLM notion is not important, just note that this communication is mimicked by allocating objects, the generic payloads (gps), that are passed between these C++ models of HW blocks.</p>\n\n<p><strong>Aim:</strong>\nTogether with the protocol, I want to provide a memory manager that should be able to efficiently handle the gps; this is quite important since in one simulation lots of gps are <em>constructed, used and destroyed</em> and this can slow down things a lot.\nMy goal is also to create something simple that could be used by others without efforts.</p>\n\n<p><strong>Issues:</strong></p>\n\n<ol>\n<li><p>The first issue I had was in creating a single shared pool for all the blocks communicating with that protocol. I thought about creating a static member in the mm class, but then I realized that:</p>\n\n<ul>\n<li>Static members require a definition in the cpp. This makes the mm class less intuitive to use (with different people using this, some will forget to do so) and I would prefer to avoid that.</li>\n<li>Depending on where (and in which?) in the cpp file the static variable definition is done, the pool might not have wet the parameters needed to be initialized (i.e., the number of mm instances created).</li>\n</ul></li>\n<li><p>The second issue is similar to the first one. I want to count the number of instances and thus instead of a pool I need to create a shared counter to be used then by the pool to initialize itself. Again, I wanted to avoid static variable definitions in a cpp file and to guarantee the order of initialization.</p></li>\n</ol>\n\n<p>I have considered mainly:</p>\n\n<ul>\n<li>static members (discarded for the reasons above)</li>\n<li>Singletons (discarded because I don't need to create a whole class for the pool to make it visible by others and single-instanced)</li>\n<li>static methods (the approaches I finally picked and that is not far from a complete Singleton)</li>\n</ul>\n\n<p>This is the code I produced (only relevant part included):</p>\n\n<pre><code>/**\n* Helper class to count another class' number of instances.\n*/\nclass counter {\npublic:\n  // Constructor\n  counter() : count(0) {}\n\n  //Destructor\n  virtual ~counter() {}\n\nprivate:\n  unsigned int count;\n\npublic:\n  unsigned int get_count() {return count;}\n  void incr_count() {count++;}\n  void decr_count() {count--;}\n};\n\n\ntemplate &lt;unsigned int MAX = 1&gt;\nclass mm: public tlm::tlm_mm_interface {\n//////////////////////////////TYPEDEFS AND ENUMS/////////////////////////////\npublic:\n  typedef tlm::tlm_generic_payload gp_t;\n\n///////////////////////////CLASS (CON/DE)STRUCTOR////////////////////////////\npublic:\n  // Constructor\n  mm() {inst_count().incr_count();}\n\n  // Copy constructor\n  mm(const mm&amp;) {inst_count().incr_count();}\n\n  // Destructor\n  virtual ~mm() {}  // no need to decrease instance count in our case\n\n////////////////////////////////CLASS METHODS////////////////////////////////\npublic:\n  // Counter for number of isntances.\n  static counter&amp; inst_count() {\n    static counter cnt;\n    return cnt;\n  }\n\n  /* This pattern makes sure that:\n  -- 1. The pool is created only when the first alloc appears\n  -- 2. All instances of mm have been already created (known instance sequence)\n  -- 3. Only one pool exists */\n  static boost::object_pool&lt;gp_t&gt;&amp; get_pool() {\n    static boost::object_pool&lt;gp_t&gt; p(\n      mm&lt;MAX&gt;::inst_count().get_count() * MAX / 2, // creation size\n      mm&lt;MAX&gt;::inst_count().get_count() * MAX      // max size used\n    );\n    return p;\n  }\n\n  // Allocate\n  virtual gp_t* allocate() {\n    //...\n    return gp;\n  }\n\n  // Free the generic payload and data_ptr\n  virtual void free(gp_t* gp) {\n     //...\n     get_pool().destroy(gp);\n  }\n}\n</code></pre>\n\n<p>Now, the initiator block class header should have a member:</p>\n\n<pre><code>mm m_mm;\n</code></pre>\n\n<p>And the initiator block class cpp should use this like:</p>\n\n<pre><code>tlm_generic_payload* gp;\ngp = m_mm.allocate();\n//...\nm_mm.free(gp); // In truth this is called by gp-&gt;release()...\n               // ...not important here\n</code></pre>\n\n<p>Having an electronic HW background, I am mainly trying to improve coding style, learn new approaches and optimize speed/memory allocation.</p>\n\n<p>Is there a better way to achieve this? In particular considering my doubts:</p>\n\n<ul>\n<li>It seems to me a not optimal workaround to encapsulate the counter in a class, put it locally (but static) in a static method and then do the same for the pool.</li>\n<li>even though SystemC \"simulation kernel\" is single-threaded, I need to consider a multithread case...I am not sure that the relationship between those two static methods is safe even thou independently they should be safe...with C++03 g++ adds code to guarantee it and with C++11:</li>\n</ul>\n\n<blockquote>\n  <p>\u00a76.7 [stmt.dcl] p4 If control enters the declaration concurrently while the variable is being initialized, the concurrent execution shall wait for completion of the initialization.</p>\n</blockquote>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "multithreading", "vector", "declaration"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5394190, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1gKPhnkyGc4/AAAAAAAAAAI/AAAAAAAAAIw/17tn1I4Yi4g/photo.jpg?sz=128", "display_name": "Claudio Menares", "link": "https://stackoverflow.com/users/5394190/claudio-menares"}, "edited": false, "score": 0, "creation_date": 1443635569, "post_id": 32872242, "comment_id": 53576952, "body": "thanks for your answer.... now this error apears... &quot;error C3867: &#39;Fractal::calcIterThread&#39;: function call missing argument list; use &#39;&amp;Fractal::calcIterThread&#39; to create a pointer to member&quot;"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1443635889, "post_id": 32872242, "comment_id": 53577110, "body": "Isn&#39;t the error message itself telling you EXACTLY how to fix the error?"}, {"owner": {"reputation": 31, "user_id": 5394190, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1gKPhnkyGc4/AAAAAAAAAAI/AAAAAAAAAIw/17tn1I4Yi4g/photo.jpg?sz=128", "display_name": "Claudio Menares", "link": "https://stackoverflow.com/users/5394190/claudio-menares"}, "edited": false, "score": 0, "creation_date": 1443637344, "post_id": 32872242, "comment_id": 53577861, "body": "other error appears when I correct with suggestion of compiler ... (a extract) error C2064: term does not evaluate to a function taking 4 arguments 1&gt;          class does not define an &#39;operator()&#39; or a user defined conversion operator to a pointer-to-function or reference-to-function that takes appropriate number of arguments 1&gt;          c:\\program files (x86)\\microsoft visual studio 12.0\\vc\\include\\functional(1137) : see reference to function template instantiation &#39;void std::_Bind&lt;true,void,std::_Pmf_wrap&lt;void (__thiscall Fractal::* )(std::vector&lt;std::vector&lt;iterc,std ......."}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 2, "last_activity_date": 1443633970, "creation_date": 1443633970, "answer_id": 32872242, "question_id": 32872202, "link": "https://stackoverflow.com/questions/32872202/how-to-declare-a-vector-of-thread/32872242#32872242", "title": "how to declare a vector of thread", "body": "<p>Try this:</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;thread&gt;\n#include &lt;vector&gt;\n\n// ...\n\nint numThreads = 10;\nstd::vector&lt;std::thread&gt; workers;\n\nfor (int i = 0; i != numThreads; ++i)\n{\n    workers.emplace_back(calcIterThread, std::ref(res), inicia, fin, i);\n}\n\nfor (auto &amp; t : workers)\n{\n    t.join(); \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 5394190, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1gKPhnkyGc4/AAAAAAAAAAI/AAAAAAAAAIw/17tn1I4Yi4g/photo.jpg?sz=128", "display_name": "Claudio Menares", "link": "https://stackoverflow.com/users/5394190/claudio-menares"}, "is_accepted": false, "score": 1, "last_activity_date": 1443708451, "creation_date": 1443708451, "answer_id": 32889686, "question_id": 32872202, "link": "https://stackoverflow.com/questions/32872202/how-to-declare-a-vector-of-thread/32889686#32889686", "title": "how to declare a vector of thread", "body": "<p>finally I can solve the problem with this change in my code...</p>\n\n<pre><code>workers.emplace_back(thread{ [&amp;]() {\n    calcIterThread(ref(res), inicio, fin, i);\n}});\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5394190, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1gKPhnkyGc4/AAAAAAAAAAI/AAAAAAAAAIw/17tn1I4Yi4g/photo.jpg?sz=128", "display_name": "Claudio Menares", "link": "https://stackoverflow.com/users/5394190/claudio-menares"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1472, "favorite_count": 0, "accepted_answer_id": 32872242, "answer_count": 2, "score": 0, "last_activity_date": 1443708451, "creation_date": 1443633837, "question_id": 32872202, "link": "https://stackoverflow.com/questions/32872202/how-to-declare-a-vector-of-thread", "title": "how to declare a vector of thread", "body": "<p>i'm new in c++ programing and need some help to use a thread library with vector library...</p>\n\n<p>first I follow this <a href=\"https://solarianprogrammer.com/2012/02/27/cpp-11-thread-tutorial-part-2/\" rel=\"nofollow\">tutorial</a></p>\n\n<p>but the compiler (visual studio 2013) show me errors and I don't know how correct it:</p>\n\n<p>first declaration of function</p>\n\n<pre><code>void Fractal::calcIterThread(vector&lt;vector&lt;iterc&gt;&gt; &amp;matriz, int desdePos, int hastaPos, int idThread){\n   ...\n}    \n</code></pre>\n\n<p>in main loop</p>\n\n<pre><code>vector&lt;vector&lt;iterc&gt;&gt; res;\nres.resize(altoPantalla);\n\nfor (int i = 0; i &lt; altoPantalla; i++){\n   res[i].resize(anchoPantalla);\n}\n\nint numThreads = 10;\nvector&lt;thread&gt; workers(numThreads);\n\nfor (int i = 0; i &lt; numThreads; i++){ //here diferent try\n   thread workers[i] (calcIterThread, ref(res), inicio, fin, i)); // error: expresion must have a constant value\n   workers[i] = thread(calcIterThread, ref(res), inicio, fin, i)); // error: no instance of constructor \"std::thread::thread\" matches the argument list\n}\n\n...rest of code... \n</code></pre>\n\n<p>thanks for any help to clarify </p>\n"}, {"tags": ["c++", "file", "text", "vector", "double"], "comments": [{"owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "edited": false, "score": 0, "creation_date": 1443634329, "post_id": 32872198, "comment_id": 53576285, "body": "You could start by considering <code>fstream</code> for input and its respective syntax."}, {"owner": {"reputation": 404, "user_id": 4673641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8a9875f1b03f66af55450397ed8da52?s=128&d=identicon&r=PG&f=1", "display_name": "jhnnslschnr", "link": "https://stackoverflow.com/users/4673641/jhnnslschnr"}, "edited": false, "score": 1, "creation_date": 1443634373, "post_id": 32872198, "comment_id": 53576311, "body": "<code>stringstream ss(argv[1]);</code> only puts the filename and not the contents of the file into <code>ss</code>."}, {"owner": {"reputation": 23386, "user_id": 33345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487d8f71839dcd0a5a90f2185f960c3d?s=128&d=identicon&r=PG", "display_name": "greyfade", "link": "https://stackoverflow.com/users/33345/greyfade"}, "edited": false, "score": 0, "creation_date": 1443634625, "post_id": 32872198, "comment_id": 53576445, "body": "You <i>could</i> overload <code>::operator&gt;&gt;</code> for <code>Distance</code>."}], "answers": [{"tags": [], "owner": {"reputation": 311, "user_id": 588960, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/964d268f687b2d410e03d9845a87ca75?s=128&d=identicon&r=PG&f=1", "display_name": "aasthetic", "link": "https://stackoverflow.com/users/588960/aasthetic"}, "is_accepted": false, "score": 1, "last_activity_date": 1443636289, "creation_date": 1443636289, "answer_id": 32872861, "question_id": 32872198, "link": "https://stackoverflow.com/questions/32872198/read-text-file-into-vector-double-double-string-c/32872861#32872861", "title": "Read text file into vector (double, double, string)? C++", "body": "<p>These are some general points whenever you end up using C++ :-</p>\n\n<ol>\n<li><p>Avoid pointers if you can. Prefer references or composite classes like string in place of char *.</p></li>\n<li><p>The C++ reference online can help you find out the correct usage very easily.</p></li>\n<li><p>GDB can help you in most of the cases for such problems as in your question.</p></li>\n</ol>\n\n<p>As suggested in the comments , you have to read the file in the string stream first and then only you can parse it. I have not compiled the code below but I hope it gives you a good idea about how to do this.In this case, the file is standard input. You can read from that in the following manner :-</p>\n\n<pre><code>char buffer[1000]; // assumine each line of input will not be more than this\nwhile(cin.getline(buffer , 1000)) // constant 1000 can be moved to a MACRO\n{\n    // cin does not eat up the newline character. So we have to do something like this to make it work\n    cin.ignore (std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n'); \n    //discard characters until newline is found\n    stringstream ss(buffer); // Insert the string into a stream\n    vector&lt;string&gt; tokens; // Create vector to hold our words\n    string buf ;\n\n    Distance distance ; \n    ss&gt;&gt;buf;\n    distance.x = stod(buf);\n    tokens.push_back(buf);\n\n    ss&gt;&gt;buf;\n    distance.x = stod(buf);\n    tokens.push_back(buf);\n\n    ss&gt;&gt;buf;\n    distance.x = buf;\n    tokens.push_back(buf);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5394272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23000b6d5a495089506cfd5b895d8c07?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5394272/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 557, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443636289, "creation_date": 1443633823, "last_edit_date": 1443634732, "question_id": 32872198, "link": "https://stackoverflow.com/questions/32872198/read-text-file-into-vector-double-double-string-c", "title": "Read text file into vector (double, double, string)? C++", "body": "<p>I have a text format that uses <em>latitude</em>, <em>longitude</em> and <em>name of location</em>\n, for example:</p>\n\n<pre><code>41.3333 34.3232 Old Building\n</code></pre>\n\n<p>I have to read this text file (from the command line), split each line by white space, use <code>stod</code> to convert the <code>lat</code> and <code>long</code> back into a <code>double</code>, then read the whole file into a vector or a list. </p>\n\n<p>This is what I currently I am  stuck on:   </p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nclass Distance{\npublic:\n    double x;\n    double y;\n    string location;\n};\n\nint main(int argc, char *argv[]){\n    // If the user didn't provide a filename command line argument,\n    // print an error and exit.\n    if (argc &lt;= 1){\n        cout &lt;&lt; \"Usage: \" &lt;&lt; argv[0] &lt;&lt; \" &lt;Filename&gt;\" &lt;&lt; endl;\n        exit(1);\n    }\n\n    char *pFilename = argv[1];\n\n    string buf; // Have a buffer string\n    stringstream ss(argv[1]); // Insert the string into a stream\n    vector&lt;string&gt; tokens; // Create vector to hold our words\n\n    while (ss &gt;&gt; buf)\n        tokens.push_back(buf);\n}\n</code></pre>\n\n<h2>Question:</h2>\n\n<ol>\n<li>Could I have some insight on how to proceed with the implementation?</li>\n</ol>\n\n<p>Answer: from here I need to look at each line in the file and split them by whitespace then store the file in a vector by what they are. So the first number of the text file would be latitude, second longitude, and third (string) is location. </p>\n"}, {"tags": ["c++", "multidimensional-array"], "answers": [{"comments": [{"owner": {"reputation": 1182, "user_id": 2851157, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1105433830/picture?type=large", "display_name": "Akshay Damle", "link": "https://stackoverflow.com/users/2851157/akshay-damle"}, "reply_to_user": {"reputation": 13, "user_id": 5212557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f06f68d1cf5d4359f6ad598a02f8e3b8?s=128&d=identicon&r=PG&f=1", "display_name": "Knight", "link": "https://stackoverflow.com/users/5212557/knight"}, "edited": false, "score": 0, "creation_date": 1443640034, "post_id": 32872545, "comment_id": 53579264, "body": "Try changing the if condition to: <code>if(a[i][j] == &#39;\\n&#39;)</code> instead of comparing the value with 13."}, {"owner": {"reputation": 1182, "user_id": 2851157, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1105433830/picture?type=large", "display_name": "Akshay Damle", "link": "https://stackoverflow.com/users/2851157/akshay-damle"}, "reply_to_user": {"reputation": 13, "user_id": 5212557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f06f68d1cf5d4359f6ad598a02f8e3b8?s=128&d=identicon&r=PG&f=1", "display_name": "Knight", "link": "https://stackoverflow.com/users/5212557/knight"}, "edited": false, "score": 0, "creation_date": 1443712887, "post_id": 32872545, "comment_id": 53612101, "body": "What output are you getting?"}, {"owner": {"reputation": 1182, "user_id": 2851157, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1105433830/picture?type=large", "display_name": "Akshay Damle", "link": "https://stackoverflow.com/users/2851157/akshay-damle"}, "reply_to_user": {"reputation": 13, "user_id": 5212557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f06f68d1cf5d4359f6ad598a02f8e3b8?s=128&d=identicon&r=PG&f=1", "display_name": "Knight", "link": "https://stackoverflow.com/users/5212557/knight"}, "edited": false, "score": 0, "creation_date": 1443713899, "post_id": 32872545, "comment_id": 53612746, "body": "It works; check this link out: <a href=\"https://ideone.com/OegC7h\" rel=\"nofollow noreferrer\">ideone.com/OegC7h</a> Be sure to press the enter key after the string. The output is 7 0 because j has come back to 0 when the code takes in the newline character. j can never be 5 because the for loop wouldn&#39;t execute in that case, as the condition is: <code>j&lt;n</code> and not <code>j&lt;=n</code>"}], "tags": [], "owner": {"reputation": 1182, "user_id": 2851157, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1105433830/picture?type=large", "display_name": "Akshay Damle", "link": "https://stackoverflow.com/users/2851157/akshay-damle"}, "is_accepted": true, "score": 0, "last_activity_date": 1443635045, "creation_date": 1443635045, "answer_id": 32872545, "question_id": 32872153, "link": "https://stackoverflow.com/questions/32872153/error-in-inputting-a-2d-character-array/32872545#32872545", "title": "Error in inputting a 2d character array", "body": "<p>This is happening because <code>cin</code> ignores white space and newline ('\\n', whose ASCII code is 13). This means the condition <code>if(a[i][j] == 13)</code> never evaluates to true.</p>\n\n<p>Solution: Use <code>cin.get(a[i][j])</code> instead of <code>cin&gt;&gt;a[i][j]</code></p>\n\n<p>This works because the <code>cin.get()</code> method does not ignore the newline character ('\\n').</p>\n"}], "owner": {"reputation": 13, "user_id": 5212557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f06f68d1cf5d4359f6ad598a02f8e3b8?s=128&d=identicon&r=PG&f=1", "display_name": "Knight", "link": "https://stackoverflow.com/users/5212557/knight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 1, "accepted_answer_id": 32872545, "answer_count": 1, "score": 0, "last_activity_date": 1443637179, "creation_date": 1443633668, "last_edit_date": 1443637179, "question_id": 32872153, "link": "https://stackoverflow.com/questions/32872153/error-in-inputting-a-2d-character-array", "title": "Error in inputting a 2d character array", "body": "<p>I am entering a 2D character array and have to stop entering when the user hit the enter key . But my code is not showing any output.<br>\nInput:</p>\n\n<pre><code>5  // where this is the number of columns, \n   // number of rows are unknown so have taken maximum rows as: 40\n</code></pre>\n\n<p>array:</p>\n\n<pre><code>toioynnkpheleaigshareconhtomesnlewx\n</code></pre>\n\n<p>Expected output: </p>\n\n<pre><code>i = 7, j = 5\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>int main(){\n    char a[100][100];\n    int n, i, j, p, q;\n    cin &gt;&gt; n;\n    if(n==0)\n       exit(0);\n\n    for(i = 0; i &lt; 40; i++){\n        for(j = 0; j &lt; n; j++){\n            cin &gt;&gt; a[i][j];\n\n            if(a[i][j]==13)  // 13 = ASCII code for enter key\n                goto jump;\n        }\n    }\n\njump:\n    cout&lt;&lt;i&lt;&lt;\"\\n\"&lt;&lt;j&lt;&lt;\"\\n\";\n\n}\n</code></pre>\n\n<p>But it is not printing anything.</p>\n\n<p>What could be wrong with it?</p>\n"}, {"tags": ["c++", "scaling", "allegro5"], "comments": [{"owner": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 1, "creation_date": 1443637973, "post_id": 32872148, "comment_id": 53578175, "body": "Rather than shrinking by a certain amount, maybe shrink by a percentage? Or check the size of the rectangle before you allow another shrink operation - if it&#39;s too smaller than the amount you shrink by, then don&#39;t allow another shrink..."}, {"owner": {"reputation": 63, "user_id": 5217000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6edfac73fbfa903ca7ff1b6057a0893d?s=128&d=identicon&r=PG&f=1", "display_name": "mchoy25", "link": "https://stackoverflow.com/users/5217000/mchoy25"}, "reply_to_user": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1443641716, "post_id": 32872148, "comment_id": 53580050, "body": "@twalberg Yes after seeing the problems I have, I put in a check to make sure the shrink is valid. It&#39;s temporary and only gives me resolution up to the static value I shrink by (in this case up to .5 away from each other). A percentage though, that could work! Thanks."}, {"owner": {"reputation": 63, "user_id": 5217000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6edfac73fbfa903ca7ff1b6057a0893d?s=128&d=identicon&r=PG&f=1", "display_name": "mchoy25", "link": "https://stackoverflow.com/users/5217000/mchoy25"}, "reply_to_user": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1443645573, "post_id": 32872148, "comment_id": 53581836, "body": "Never mind. Percentage gives me slightly better resolution, but the edges eventually reach the point where they&#39;ll overtake each other."}, {"owner": {"reputation": 14111, "user_id": 1126943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yeuHw.png?s=128&g=1", "display_name": "zch", "link": "https://stackoverflow.com/users/1126943/zch"}, "edited": false, "score": 1, "creation_date": 1443647744, "post_id": 32872148, "comment_id": 53582850, "body": "Try <code>left = center - f * (center - left)</code>, where <code>f</code> is factor by which you are zooming (e.g. 2) and center is position that is to be preserved by zooming (e.g. coordinates of mouse pointer or middle of the screen)"}, {"owner": {"reputation": 63, "user_id": 5217000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6edfac73fbfa903ca7ff1b6057a0893d?s=128&d=identicon&r=PG&f=1", "display_name": "mchoy25", "link": "https://stackoverflow.com/users/5217000/mchoy25"}, "reply_to_user": {"reputation": 14111, "user_id": 1126943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yeuHw.png?s=128&g=1", "display_name": "zch", "link": "https://stackoverflow.com/users/1126943/zch"}, "edited": false, "score": 0, "creation_date": 1443653931, "post_id": 32872148, "comment_id": 53585060, "body": "@zch Awesome. This works great for zooming in. As it gets closer to the center, it decreases the amount it zooms in. Now the problem is when I zoom out, as I get further from the center, it gets huge extremely fast."}], "owner": {"reputation": 63, "user_id": 5217000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6edfac73fbfa903ca7ff1b6057a0893d?s=128&d=identicon&r=PG&f=1", "display_name": "mchoy25", "link": "https://stackoverflow.com/users/5217000/mchoy25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1443646761, "creation_date": 1443633637, "last_edit_date": 1443646761, "question_id": 32872148, "link": "https://stackoverflow.com/questions/32872148/function-to-approach-a-number-asymptotically", "title": "Function to approach a number asymptotically", "body": "<p>I have a map that I can zoom in and out of. Gridlines display the latitude and longitude.\nRight now I zoom in by shrinking the borders by a specific amount. </p>\n\n<p>Say top edge is lat 30n, bot edge is lat 28n, left edge is lon -40w, right edge is lon -38w.</p>\n\n<p>So for one zoom in, the new edges are 29.5n, 28.5n, -39.5w,-38.5 respectively.</p>\n\n<p>Zooming in enough times would eventually make the opposite edges equal each other and then flip.</p>\n\n<p>So next zoom in for top and bot edge would be 29n, 29n and then next 28.5n,29.5n which flips the orientation. </p>\n\n<p>I'm looking for a function or a way that I can continuously zoom in, but never have the edges equal each other or flip. In others words something where I can get the edges to continuously get closer and closer to each other, but never touch.</p>\n\n<p>So I have an idea that I'll need some function like </p>\n\n<p><code>lim x-&gt; infinity of x/(x+1) - 1 + midpoint of the two edges</code> </p>\n\n<p>which basically means, as I zoom in I will approach the midpoint.\nIf this is valid, I don't know how to implement limits in C++.</p>\n\n<p>This is only one equation too. I have two edges on each axis and so I'd need two equations to approach the midpoint from both sides at an equal rate.</p>\n"}, {"tags": ["c++", "opengl", "bsod"], "answers": [{"comments": [{"owner": {"reputation": 20017, "user_id": 2282011, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/p8sXJ.jpg?s=128&g=1", "display_name": "Devolus", "link": "https://stackoverflow.com/users/2282011/devolus"}, "edited": false, "score": 0, "creation_date": 1443633798, "post_id": 32872035, "comment_id": 53575985, "body": "Still, it&#39;s pretty lame that there is a BSOD because of this. Shouldn&#39;t happen, no matter what."}, {"owner": {"reputation": 25, "user_id": 5394169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a2175eb4d3ab7092c1cfa17a004c3c1?s=128&d=identicon&r=PG&f=1", "display_name": "Aethedigm", "link": "https://stackoverflow.com/users/5394169/aethedigm"}, "edited": false, "score": 0, "creation_date": 1443633907, "post_id": 32872035, "comment_id": 53576044, "body": "WOW. I cannot believe I didn&#39;t notice that. I spent so much time restarting my PC and dealing with the BSOD I didn&#39;t even think to check order.  Ripped it to the bottom of the main message loop. Works proper. Thanks."}], "tags": [], "owner": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "is_accepted": true, "score": 2, "last_activity_date": 1443633243, "creation_date": 1443633243, "answer_id": 32872035, "question_id": 32871873, "link": "https://stackoverflow.com/questions/32871873/windows-10-opengl-bsod-kernel-mode-trap/32872035#32872035", "title": "Windows 10 OpenGL BSOD, &quot;Kernel Mode Trap&quot;", "body": "<p>As far as I understand, <code>GetDC</code> should fail, because there's still no client area created for this window - the first window message is <code>WM_NC_CREATE</code>, and this is too early for client area manipulation.</p>\n\n<p>You may execute D3D code only after <code>WM_CREATE</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 5394169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a2175eb4d3ab7092c1cfa17a004c3c1?s=128&d=identicon&r=PG&f=1", "display_name": "Aethedigm", "link": "https://stackoverflow.com/users/5394169/aethedigm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "accepted_answer_id": 32872035, "answer_count": 1, "score": 2, "last_activity_date": 1443633243, "creation_date": 1443632663, "question_id": 32871873, "link": "https://stackoverflow.com/questions/32871873/windows-10-opengl-bsod-kernel-mode-trap", "title": "Windows 10 OpenGL BSOD, &quot;Kernel Mode Trap&quot;", "body": "<p>So, I'm building a default context in OpenGL, (Without extensions) and for some reason, as soon as my window opens, I BSOD with an \"Unexpected Kernel Mode Trap\"</p>\n\n<p>Now, this is pretty default. As I've just used the startup VS 2015 Community win32 application, and applied the OpenGL context code verbatim. Which includes a message box which supposedly should show me my OpenGL version (4.4). However, it opens blank, and upon closing, when it should open the OpenGL CS_DCOWN window, I BSOD.</p>\n\n<p>Just wondering if anyone has insight as to what command is specifically causing the BSOD, or if my practices are wrong?</p>\n\n<p>I come from a mostly Direct3D9 background.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"PureGL.h\"\n#include &lt;gl\\GL.h&gt;\n\n#pragma comment (lib, \"opengl32.lib\");\n\n#define MAX_LOADSTRING 100\n\n// Global Variables:\nHINSTANCE hInst;                                // current instance\nWCHAR szTitle[MAX_LOADSTRING];                  // The title bar text\nWCHAR szWindowClass[MAX_LOADSTRING];            // the main window class name\n\n// Forward declarations of functions included in this code module:\nATOM                MyRegisterClass(HINSTANCE hInstance);\nBOOL                InitInstance(HINSTANCE, int);\nLRESULT CALLBACK    WndProc(HWND, UINT, WPARAM, LPARAM);\n\nint APIENTRY wWinMain(_In_ HINSTANCE hInstance, _In_opt_ HINSTANCE hPrevInstance, _In_ LPWSTR lpCmdLine, _In_ int nCmdShow)\n{\n    UNREFERENCED_PARAMETER(hPrevInstance);\n    UNREFERENCED_PARAMETER(lpCmdLine);\n\n    // TODO: Place code here.\n\n    // Initialize global strings\n    LoadStringW(hInstance, IDS_APP_TITLE, szTitle, MAX_LOADSTRING);\n    LoadStringW(hInstance, IDC_PUREGL, szWindowClass, MAX_LOADSTRING);\n    MyRegisterClass(hInstance);\n\n    // Perform application initialization:\n    if (!InitInstance (hInstance, nCmdShow))\n    {\n        return FALSE;\n    }\n\n    HACCEL hAccelTable = LoadAccelerators(hInstance, MAKEINTRESOURCE(IDC_PUREGL));\n\n    MSG msg;\n\n    // Main message loop:\n    while (GetMessage(&amp;msg, nullptr, 0, 0))\n    {\n        if (!TranslateAccelerator(msg.hwnd, hAccelTable, &amp;msg))\n        {\n            TranslateMessage(&amp;msg);\n            DispatchMessage(&amp;msg);\n        }\n    }\n\n    return (int) msg.wParam;\n}\n\nATOM MyRegisterClass(HINSTANCE hInstance)\n{\n    WNDCLASSEXW wcex;    \n    wcex.cbSize = sizeof(WNDCLASSEX);    \n    wcex.style          = CS_OWNDC | CS_HREDRAW | CS_VREDRAW;\n    wcex.lpfnWndProc    = WndProc;\n    wcex.cbClsExtra     = 0;\n    wcex.cbWndExtra     = 0;\n    wcex.hInstance      = hInstance;\n    wcex.hIcon          = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_PUREGL));\n    wcex.hCursor        = LoadCursor(nullptr, IDC_ARROW);\n    wcex.hbrBackground  = (HBRUSH)(COLOR_WINDOW+1);\n    wcex.lpszMenuName   = MAKEINTRESOURCEW(IDC_PUREGL);\n    wcex.lpszClassName  = szWindowClass;\n    wcex.hIconSm        = LoadIcon(wcex.hInstance, MAKEINTRESOURCE(IDI_SMALL));\n\n    return RegisterClassExW(&amp;wcex);\n}\n\nBOOL InitInstance(HINSTANCE hInstance, int nCmdShow)\n{\n   hInst = hInstance; // Store instance handle in our global variable\n\n   HWND hWnd = CreateWindowW(szWindowClass, szTitle, WS_OVERLAPPEDWINDOW,\n      CW_USEDEFAULT, 0, CW_USEDEFAULT, 0, nullptr, nullptr, hInstance, nullptr);\n\n   if (!hWnd)\n   {\n      return FALSE;\n   }\n\n   ShowWindow(hWnd, nCmdShow);\n   UpdateWindow(hWnd);\n\n   return TRUE;\n}\n\nLRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)\n{\n    PIXELFORMATDESCRIPTOR pfd = {\n        sizeof(PIXELFORMATDESCRIPTOR),\n        1,\n        PFD_DRAW_TO_WINDOW | PFD_SUPPORT_OPENGL | PFD_DOUBLEBUFFER,\n        PFD_TYPE_RGBA,\n        32,\n        0, 0, 0, 0, 0, 0,\n        0,\n        0,\n        0,\n        0, 0, 0, 0,\n        24,\n        8,\n        0,\n        PFD_MAIN_PLANE,\n        0,\n        0, 0, 0\n    };\n\n    HDC ourWindowHandleToDeviceContext = GetDC(hWnd);\n\n    int letWindowsChooseThisPixelFormat;\n    letWindowsChooseThisPixelFormat = ChoosePixelFormat(ourWindowHandleToDeviceContext, &amp;pfd);\n    SetPixelFormat(ourWindowHandleToDeviceContext, letWindowsChooseThisPixelFormat, &amp;pfd);\n\n    HGLRC ourOpenGLRenderingContext = wglCreateContext(ourWindowHandleToDeviceContext);\n    wglMakeCurrent(ourWindowHandleToDeviceContext, ourOpenGLRenderingContext);\n\n    MessageBoxA(0, (char*)glGetString(GL_VERSION), \"OPENGL VERSION\", 0);\n\n    wglDeleteContext(ourOpenGLRenderingContext);\n    PostQuitMessage(0);\n\n    switch (message)\n    {\n    case WM_COMMAND:\n        {\n            int wmId = LOWORD(wParam);\n            // Parse the menu selections:\n            switch (wmId)\n            {\n            case IDM_EXIT:\n                DestroyWindow(hWnd);\n                break;\n            default:\n                return DefWindowProc(hWnd, message, wParam, lParam);\n            }\n        }\n        break;\n    case WM_PAINT:\n        {\n            PAINTSTRUCT ps;\n            HDC hdc = BeginPaint(hWnd, &amp;ps);\n            // TODO: Add any drawing code that uses hdc here...\n            EndPaint(hWnd, &amp;ps);\n        }\n        break;\n    case WM_DESTROY:\n        PostQuitMessage(0);\n        break;\n    default:\n        return DefWindowProc(hWnd, message, wParam, lParam);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Hardware details if known issues - AMD FX 6300, ASUS Radeon R9-285</p>\n"}, {"tags": ["c++", "terminal", "cout"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1443632347, "post_id": 32871732, "comment_id": 53575231, "body": "It completely depends on your terminal. On a basic Linux terminal emulator, a <code>\\r</code> character ought to be enough. There are loads of duplicates of this though, so I shan&#39;t elaborate."}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1443632457, "post_id": 32871732, "comment_id": 53575283, "body": "@LightnessRacesinOrbit Surely this wouldn&#39;t work in the case where the number of digits printed changed? IE: From 1.999% to 2% - which would print 2%999%? (Actually: 1.999 % to 2 %99%)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1443633490, "post_id": 32871732, "comment_id": 53575823, "body": "That&#39;s right; you&#39;d need leading or trailing spaces to mask the old input where the new input doesn&#39;t already. But that&#39;s easy. And, as I said, this is a duplicate so you can find all this detail already written-about elsewhere."}], "answers": [{"comments": [{"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1443632560, "post_id": 32871832, "comment_id": 53575345, "body": "Same comment as just a second ago for this though: Surely this wouldn&#39;t work in the case where the number of digits printed changed? IE: From 1.999% to 2% - which would print 1.999 % then 2 %99% ?"}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1443632600, "post_id": 32871832, "comment_id": 53575362, "body": "But it&#39;s a step in the right direction, thanks for the info"}, {"owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "reply_to_user": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1443632604, "post_id": 32871832, "comment_id": 53575365, "body": "Add spaces after the percent sign if you want to be safe."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1443632687, "post_id": 32871832, "comment_id": 53575413, "body": "<code>\\r</code> can be used with <code>cout</code> as well."}, {"owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1443632802, "post_id": 32871832, "comment_id": 53575479, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 old habits die hard. When I want more control of the formatting I tend to revert to printf."}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1443632809, "post_id": 32871832, "comment_id": 53575483, "body": "Could use std::fixed I guess?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1443632969, "post_id": 32871832, "comment_id": 53575555, "body": "@user3728501 Of course, and <code>std::setw()</code>, <code>std::right</code> accordingly."}, {"owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "reply_to_user": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1443633154, "post_id": 32871832, "comment_id": 53575644, "body": "@user3728501 the simplest would be to add about 7 spaces assuming there won&#39;t be more than 8 figures. But if it&#39;s just for debugging, as seems to be indicted in the question that should be enough. If it&#39;s for production, consider using a fixed precision or a string of n-m spaces."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1443633513, "post_id": 32871832, "comment_id": 53575834, "body": "This is terminal specific. And try making it work when redirecting output to a file."}, {"owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1443633628, "post_id": 32871832, "comment_id": 53575908, "body": "@LightnessRacesinOrbit out of curiosity, what terminal doesn&#39;t work with this?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1443633816, "post_id": 32871832, "comment_id": 53575997, "body": "@AviGinsburg: A near-infinite list. I&#39;m not going to enumerate them, but <code>cmd.exe</code> comes to mind for a start. Fortunately, <i>I don&#39;t need to</i>, because writing portable C++ code (and in the absence of a specific technology having been stated in the question) requires that we not even get to the point where such a list is required. Besides, I literally just gave you an example of when this will lead to unexpected results."}, {"owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1443634023, "post_id": 32871832, "comment_id": 53576111, "body": "@LightnessRacesinOrbit I&#39;ve actually done that with tee. It&#39;s a bit ugly but readable. And it wouldn&#39;t be much worse than OPs current status."}, {"owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1443634227, "post_id": 32871832, "comment_id": 53576221, "body": "@LightnessRacesinOrbit not everything is portable. Try redirecting stdout for <i>part</i> of a program. But there are some solutions/nonportable hacks that work."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1443634659, "post_id": 32871832, "comment_id": 53576463, "body": "Right, so state the target platform/technology! Otherwise the answer is incomplete/misleading as purporting to be &quot;a C++ solution&quot; when it&#39;s not :)"}, {"owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1443634768, "post_id": 32871832, "comment_id": 53576536, "body": "@LightnessRacesinOrbit Too many to enumerate ;) but point taken."}, {"owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1443634902, "post_id": 32871832, "comment_id": 53576616, "body": "@LightnessRacesinOrbit <code>cmd.exe</code> in my experience works fine with <code>\\r</code>."}], "tags": [], "owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "is_accepted": false, "score": 1, "last_activity_date": 1443635058, "last_edit_date": 1443635058, "creation_date": 1443632514, "answer_id": 32871832, "question_id": 32871732, "link": "https://stackoverflow.com/questions/32871732/c-program-console-terminal-output-how-to-implement-updating-text/32871832#32871832", "title": "C++ Program, Console/Terminal Output. How to implement &quot;updating text&quot;", "body": "<p>Instead of <code>\\n</code> or <code>std::endl</code>, use <code>\\r</code>. The difference is that the latter returns the cursor to the beginning if the line without a new line.</p>\n\n<p>Disclaimer (as per Lightness' objections): This is not necessarily portable, so YMMV.</p>\n"}], "owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 867, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443635058, "creation_date": 1443632168, "last_edit_date": 1443632389, "question_id": 32871732, "link": "https://stackoverflow.com/questions/32871732/c-program-console-terminal-output-how-to-implement-updating-text", "title": "C++ Program, Console/Terminal Output. How to implement &quot;updating text&quot;", "body": "<p>I am writing a C++ program, which runs a long data analysis algorithm. It takes several days to finish running, so it is useful to have a prompt which outputs the \"percentage complete\" every time a new loop in the program starts so that the user (me) knows the computer isn't sitting in an infinite loop somewhere or has crashed.</p>\n\n<p>At the moment I am doing this the most basic way, by computing the percentage complete as a floating point number and doing:</p>\n\n<pre><code>std::cout &lt;&lt; \"Percentage complete: \" &lt;&lt; percentage_complete &lt;&lt; \" %\" &lt;&lt; std::endl;\n</code></pre>\n\n<p>But, when the program has a million loops to run, this is kind of messy. In addition, if the terminal scrollback is only 1000 lines, then I lose the initial debug info printed out at the start once the program is 0.1 % complete.</p>\n\n<p>I would like to copy an idea I have seen in other programs, where instead of writing a new line each time with the percentage complete, I simply replace the last line written to the terminal with the new percentage complete.</p>\n\n<p>How can I do this? Is that possible? And if so, can this be done in a cross platform way? Are there several methods of doing this?</p>\n\n<p>I am unsure how to describe what I am trying to do perfectly clearly, so I hope that this clear enough that you understand what I am trying to do.</p>\n\n<p>To clarify, rather than seeing this:</p>\n\n<pre><code>Running program.\nDebug info:\nTotal number of loops: 1000000\n\nPercentage complete: 0 %\nPercentage complete: 0.001 %\nPercentage complete: 0.002 %\n.\n.\n.\nPercentage complete: 1.835 %\n</code></pre>\n\n<p>I would like to see this:</p>\n\n<pre><code>Running program.\nDebug info:\nTotal number of loops: 1000000\n\nPercentage complete: 1.835 %\n</code></pre>\n\n<p>And then on the next loop the terminal should update to this:</p>\n\n<pre><code>Running program.\nDebug info:\nTotal number of loops: 1000000\n\nPercentage complete: 1.836 %\n</code></pre>\n\n<p>I hope that's enough information.</p>\n\n<p>(Okay, so this output would actually be for 100000 steps, not 1000000.)</p>\n"}, {"tags": ["c++", "user-interface", "qt5"], "comments": [{"owner": {"reputation": 404, "user_id": 4673641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8a9875f1b03f66af55450397ed8da52?s=128&d=identicon&r=PG&f=1", "display_name": "jhnnslschnr", "link": "https://stackoverflow.com/users/4673641/jhnnslschnr"}, "edited": false, "score": 1, "creation_date": 1443632970, "post_id": 32871672, "comment_id": 53575557, "body": "Do you know <a href=\"http://doc.qt.io/qt-5/qsplitter.html\" rel=\"nofollow noreferrer\"><code>QSplitter</code></a>?"}, {"owner": {"reputation": 307, "user_id": 4650521, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/42fea27a0b72ce50d8cdc4b6e10e22c5?s=128&d=identicon&r=PG&f=1", "display_name": "Collin Reynolds", "link": "https://stackoverflow.com/users/4650521/collin-reynolds"}, "reply_to_user": {"reputation": 404, "user_id": 4673641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8a9875f1b03f66af55450397ed8da52?s=128&d=identicon&r=PG&f=1", "display_name": "jhnnslschnr", "link": "https://stackoverflow.com/users/4673641/jhnnslschnr"}, "edited": false, "score": 0, "creation_date": 1443642821, "post_id": 32871672, "comment_id": 53580538, "body": "Thank you so much, I had no idea what to look for. This is exactly what I needed."}], "answers": [{"tags": [], "owner": {"reputation": 307, "user_id": 4650521, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/42fea27a0b72ce50d8cdc4b6e10e22c5?s=128&d=identicon&r=PG&f=1", "display_name": "Collin Reynolds", "link": "https://stackoverflow.com/users/4650521/collin-reynolds"}, "is_accepted": true, "score": 1, "last_activity_date": 1443642927, "creation_date": 1443642927, "answer_id": 32874527, "question_id": 32871672, "link": "https://stackoverflow.com/questions/32871672/allow-user-to-resize-widgets-at-runtime-in-qt5/32874527#32874527", "title": "Allow user to resize widgets at runtime in QT5", "body": "<p>Thanks to jhnnslschnr I was able to solve this via the QSplitter widget. If you're using QtCreator as I was, you can use QSplitter simply by Ctrl-clicking the widgets you want in the splitter and then selecting \"Lay out horizontally (vertically) in splitter\". The user can now select the partitioning at run-time.</p>\n"}], "owner": {"reputation": 307, "user_id": 4650521, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/42fea27a0b72ce50d8cdc4b6e10e22c5?s=128&d=identicon&r=PG&f=1", "display_name": "Collin Reynolds", "link": "https://stackoverflow.com/users/4650521/collin-reynolds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 437, "favorite_count": 0, "accepted_answer_id": 32874527, "answer_count": 1, "score": 0, "last_activity_date": 1443642927, "creation_date": 1443632008, "question_id": 32871672, "link": "https://stackoverflow.com/questions/32871672/allow-user-to-resize-widgets-at-runtime-in-qt5", "title": "Allow user to resize widgets at runtime in QT5", "body": "<p>I have an application written in C++/QT5 with a QListView widget within a QHBoxLayout within a QGroupBox. There is also a QTabWidget in the main window. I would like the user to be able to resize the QListView widget by clicking and dragging and for the other items to automatically resize themselves accordingly.</p>\n\n<p>I feel like this should be something that is easily done within the framework of QT5, but I can't for the life of me find a way. Even having a border on the list view that I can resize within the code of my application would be a start.</p>\n"}, {"tags": ["c++", "c++11", "lambda", "g++", "std-function"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 2, "creation_date": 1443633389, "post_id": 32871606, "comment_id": 53575771, "body": "@Nawaz Why did you delete your answer?"}, {"owner": {"reputation": 404, "user_id": 4673641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8a9875f1b03f66af55450397ed8da52?s=128&d=identicon&r=PG&f=1", "display_name": "jhnnslschnr", "link": "https://stackoverflow.com/users/4673641/jhnnslschnr"}, "edited": false, "score": 1, "creation_date": 1443633972, "post_id": 32871606, "comment_id": 53576081, "body": "Clang++ 3.7.0 also prints garbage (g++ lead to a segmentation fault for me)."}, {"owner": {"reputation": 478, "user_id": 1725816, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0e46d33a24749378a59c25348e8bc435?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1725816/kevin"}, "reply_to_user": {"reputation": 404, "user_id": 4673641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8a9875f1b03f66af55450397ed8da52?s=128&d=identicon&r=PG&f=1", "display_name": "jhnnslschnr", "link": "https://stackoverflow.com/users/4673641/jhnnslschnr"}, "edited": false, "score": 0, "creation_date": 1443634542, "post_id": 32871606, "comment_id": 53576405, "body": "@jhnnslschnr Thanks for checking - not sure why the posted answer was deleted (it seemed correct) but the essence was that a lambda returning a value will happily bind to a std::function with a reference return type, the end result being that the lambda returns a copy and the function returns a reference to the temporary copy. I suppose this is no different than returning a local variable from a function with a reference return type."}], "answers": [{"comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 1, "creation_date": 1443634699, "post_id": 32872389, "comment_id": 53576485, "body": "In C++14 it can be <code>-&gt; decltype(auto)</code>."}, {"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 0, "creation_date": 1443694456, "post_id": 32872389, "comment_id": 53599890, "body": "True about the type deduction, but you didn&#39;t answer the other half of the question. Simplified: Why is <code>function&lt;const T &amp;()&gt;</code> allowed to bind to a lambda returning a <code>T</code> by value? This will <i>always</i> create a dangling reference. I&#39;d say this is either a library bug or an oversight in the standard since this case can be checked at compile time using <code>decltype</code>."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 0, "creation_date": 1443707259, "post_id": 32872389, "comment_id": 53608124, "body": "@ArneVogel Standard defect. gcc/clang are perfectly conforming in allowing that construction. Added the wording."}, {"owner": {"reputation": 1278, "user_id": 166389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a26ca7932c9550b26ff5bcaae562d2f?s=128&d=identicon&r=PG", "display_name": "TBBle", "link": "https://stackoverflow.com/users/166389/tbble"}, "edited": false, "score": 1, "creation_date": 1445826830, "post_id": 32872389, "comment_id": 54471829, "body": "We just hit this same issue with std::function directly, putting a value-returning function into a std::function returning a const-ref. MSVC 2015 diagnoses it correctly, MSVC 2013 only picks it up for function pointers, not std::bind-created objects, and neither gcc nor clang actually notice this. Is this quality-of-implementation, or a standard defect that needs to be raised?"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 13, "last_activity_date": 1443707424, "last_edit_date": 1443707424, "creation_date": 1443634483, "answer_id": 32872389, "question_id": 32871606, "link": "https://stackoverflow.com/questions/32871606/odd-return-behavior-with-stdfunction-created-from-lambda-c/32872389#32872389", "title": "Odd return behavior with std::function created from lambda (C++)", "body": "<p><strong>Why is it broken?</strong></p>\n\n<p>When the return type of a lambda is deduced, reference and cv-qualifications are dropped. So the return type of </p>\n\n<pre><code>[](const std::vector&lt;int&gt; &amp;in){return in;};\n</code></pre>\n\n<p>is just <code>std::vector&lt;int&gt;</code>, not <code>std::vector&lt;int&gt; const&amp;</code>. As a result, if we strip out the lambda and <code>std::function</code> part of your code, we effectively have:</p>\n\n<pre><code>std::vector&lt;int&gt; lambda(std::vector&lt;int&gt; const&amp; in)\n{\n    return in;\n}\n\nstd::vector&lt;int&gt; const&amp; callback(std::vector&lt;int&gt; const&amp; in)\n{\n    return lambda(in);\n}\n</code></pre>\n\n<p><code>lambda</code> returns a temporary. It effectively is just copied its input. This temporary is bound the reference return in <code>callback</code>. But temporaries bound to a reference in a <code>return</code> statement do not have their lifetime extended, so the temporary is destroyed at the end of the return statement. Thus, at this point:</p>\n\n<pre><code>callback(v).at(0)\n-----------^\n</code></pre>\n\n<p>we have a dangling reference to a destroyed <em>copy</em> of <code>v</code>. </p>\n\n<p>The solution is to explicitly specify the return type of the lambda to be a reference:</p>\n\n<pre><code> [](const std::vector&lt;int&gt; &amp;in)-&gt; const std::vector&lt;int&gt;&amp; {return in;}\n [](const std::vector&lt;int&gt; &amp;in)-&gt; decltype(auto) {return in;} // C++14\n</code></pre>\n\n<p>Now there are no copies, no temporaries, no dangling references, and no undefined behavior. </p>\n\n<p><strong>Who's at fault?</strong></p>\n\n<p>As to whether this is expected behavior, the answer is actually yes. The conditions for constructibility of a <code>std::function</code> are [func.wrap.func.con]:</p>\n\n<blockquote>\n  <p><code>f</code> is Callable (20.9.12.2) for argument types <code>ArgTypes...</code> and return type <code>R</code>.</p>\n</blockquote>\n\n<p>where, [func.wrap.func]:</p>\n\n<blockquote>\n  <p>A callable object <code>f</code> of type <code>F</code> is <em>Callable</em> for argument types <code>ArgTypes</code> and return type <code>R</code> if the expression\n  <code>INVOKE (f, declval&lt;ArgTypes&gt;()..., R)</code>, considered as an unevaluated operand (Clause 5), is well\n  formed (20.9.2).</p>\n</blockquote>\n\n<p>where, [func.require], emphasis mine:</p>\n\n<blockquote>\n  <p>Define <code>INVOKE(f, t1, t2, ..., tN, R)</code> as <code>static_cast&lt;void&gt;(INVOKE (f, t1, t2, ..., tN))</code> if <code>R</code> is <em>cv</em> <code>void</code>, otherwise <code>INVOKE(f, t1, t2, ..., tN)</code> <strong>implicitly converted to <code>R</code></strong>.</p>\n</blockquote>\n\n<p>So, if we had:</p>\n\n<pre><code>T func();\nstd::function&lt;T const&amp;()&gt; wrapped(func);\n</code></pre>\n\n<p>That actually meets all the standard requirements: <code>INVOKE(func)</code> is well-formed and while it returns <code>T</code>, <code>T</code> <em>is</em> implicitly convertible to <code>T const&amp;</code>. So this isn't a gcc or clang bug. This is likely a standard defect, as I don't see why you would ever want to allow such a construction. This will <em>never</em> be valid, so the wording should likely require that if <code>R</code> is a reference type then <code>F</code> must return a reference type as well. </p>\n"}, {"tags": [], "owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "is_accepted": false, "score": 2, "last_activity_date": 1443696387, "creation_date": 1443696387, "answer_id": 32885608, "question_id": 32871606, "link": "https://stackoverflow.com/questions/32871606/odd-return-behavior-with-stdfunction-created-from-lambda-c/32885608#32885608", "title": "Odd return behavior with std::function created from lambda (C++)", "body": "<p>I did a bit of my own searching regarding the <code>std::function</code> constructor. It seems this part is an oversight in the interaction of <code>std::function</code> and the standard's <a href=\"http://en.cppreference.com/w/cpp/concept/Callable\" rel=\"nofollow\"><code>Callable</code> concept</a>. <code>std::function&lt;R(Args...)&gt;::function&lt;F&gt;(F)</code> requires <code>F</code> to be <code>Callable</code> as <code>R(Args...)</code>, which in itself seems reasonable. <code>Callable</code> for <code>R(Args...)</code> requires <code>F</code>'s return type (when given arguments of types <code>Args...</code> to be implicitly convertible to <code>R</code>, which also in itself seems reasonable. Now when <code>R</code> is <code>const R_ &amp;</code>, this will an allow implicit conversion of <code>R_</code> to <code>const R_ &amp;</code> because const references are allowed to bind to rvalues. This is not necessarily unsafe. E.g. consider a function <code>f()</code> that returns an <code>int</code>, but is considered callable as <code>const int &amp;()</code>.</p>\n\n<pre><code>const int &amp;result = f();\nif ( f == 5 )\n{\n   // ...\n}\n</code></pre>\n\n<p>There is no issue here because of C++'s rules for extending the lifetime of a temporary. <em>However</em>, the following has undefined behavior:</p>\n\n<pre><code>std::function&lt;const int &amp;()&gt; fWrapped{f};\nif ( fWrapped() == 5 )\n{\n   // ...\n}\n</code></pre>\n\n<p>This is because lifetime extension does not apply here. The temporary is created inside of <code>std::function</code>'s <code>operator()</code> and is destroyed before the comparison.</p>\n\n<p>Therefore, <code>std::function</code>'s constructor probably should not rely on <code>Callable</code> alone, but enforce the additional restriction that implicit conversion of an rvalue to a <code>const</code> lvalue in order to bind to a reference is forbidden. Alternatively, <code>Callable</code> could be changed to never allow this conversion, at the expense of disallowing some safe usage (if only because of lifetime extension).</p>\n\n<p>To make things more complicated yet, <code>fWrapped()</code> from the above example is perfectly safe to call, as long as you don't access the target of the dangling reference.</p>\n"}, {"tags": [], "owner": {"reputation": 415, "user_id": 2445507, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/3742424fd95d492934df8b0ccf1b2bf0?s=128&d=identicon&r=PG", "display_name": "user2445507", "link": "https://stackoverflow.com/users/2445507/user2445507"}, "is_accepted": false, "score": 0, "last_activity_date": 1526706249, "creation_date": 1526706249, "answer_id": 50421951, "question_id": 32871606, "link": "https://stackoverflow.com/questions/32871606/odd-return-behavior-with-stdfunction-created-from-lambda-c/50421951#50421951", "title": "Odd return behavior with std::function created from lambda (C++)", "body": "<p>If you use:</p>\n\n<pre><code>return std::ref(in);\n</code></pre>\n\n<p>In your lambda it will work.</p>\n\n<p>This will make your lambda's return type a <code>std::reference_wrapper&lt;std::vector&lt;int&gt;&gt;</code> which is implicitly convertible to <code>std::vector&lt;int&gt;&amp;</code>.</p>\n"}], "owner": {"reputation": 478, "user_id": 1725816, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0e46d33a24749378a59c25348e8bc435?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1725816/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2452, "favorite_count": 1, "accepted_answer_id": 32872389, "answer_count": 3, "score": 14, "last_activity_date": 1526706249, "creation_date": 1443631731, "last_edit_date": 1505392103, "question_id": 32871606, "link": "https://stackoverflow.com/questions/32871606/odd-return-behavior-with-stdfunction-created-from-lambda-c", "title": "Odd return behavior with std::function created from lambda (C++)", "body": "<p>I'm having trouble with std::functions created from lambdas if the function returns a reference but the return type isn't explicitly called out as a reference. It seems that the std::function is created fine with no warnings, but upon calling it, a value is returned when a reference is expected, causing things to blow up. Here's a very contrived example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;functional&gt;\n\nint main(){\n   std::vector&lt;int&gt; v;\n   v.push_back(123);\n   std::function&lt;const std::vector&lt;int&gt;&amp;(const std::vector&lt;int&gt;&amp;)&gt; callback =\n      [](const std::vector&lt;int&gt; &amp;in){return in;};\n   std::cout &lt;&lt; callback(v).at(0) &lt;&lt; std::endl;\n   return 0;\n}\n</code></pre>\n\n<p>This prints out garbage, however if the lambda is modified to explicitly return a const reference it works fine. I can understand the compiler thinking the lambda is return-by-value without the hint (when I originally ran into this problem, the lambda was directly returning the result from a function that returned a const reference, in which case I would think that the const reference return of the lambda would be deducible, but apparently not.) What I am surprised by is that the compiler lets the std::function be constructed from the lambda with mismatched return types. Is this behavior expected? Am I missing something in the standard that allows this mismatch to occur? I'm seeing this with g++ (GCC) 4.8.2, haven't tried it with anything else.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "bulletphysics"], "answers": [{"tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 1, "last_activity_date": 1443632762, "creation_date": 1443632762, "answer_id": 32871903, "question_id": 32871496, "link": "https://stackoverflow.com/questions/32871496/bullet-vehicle-addwheel-parameters/32871903#32871903", "title": "bullet vehicle addWheel parameters", "body": "<p>From <a href=\"http://bulletphysics.org/Bullet/BulletFull/classbtRaycastVehicle.html#ab553ee172346b9cea796abd56ba12a40\" rel=\"nofollow\">the documentation</a> the method <code>btRayvastVehicle::addWheel</code> has the signature</p>\n\n<pre><code>btWheelInfo &amp; btRaycastVehicle::addWheel( const btVector3&amp; connectionPointCS0,\n                                          const btVector3&amp; wheelDirectionCS0,\n                                          const btVector3&amp; wheelAxleCS,\n                                          btScalar suspensionRestLength,\n                                          btScalar wheelRadius,\n                                          const btVehicleTuning&amp; tuning,\n                                          bool  isFrontWheel\n                                        )\n</code></pre>\n\n<p>From the <a href=\"http://bulletphysics.org/Bullet/BulletFull/btRaycastVehicle_8cpp_source.html\" rel=\"nofollow\">method definition</a> you can click on each of the member variables to go to the header (which is also very vaguely documented unfortunately).</p>\n\n<pre><code>//\n// basically most of the code is general for 2 or 4 wheel vehicles, but some of it needs to be reviewed\n//\nbtWheelInfo&amp; btRaycastVehicle::addWheel( const btVector3&amp; connectionPointCS, const btVector3&amp; wheelDirectionCS0,const btVector3&amp; wheelAxleCS, btScalar suspensionRestLength, btScalar wheelRadius,const btVehicleTuning&amp; tuning, bool isFrontWheel)\n{\n\n    btWheelInfoConstructionInfo ci;\n\n    ci.m_chassisConnectionCS = connectionPointCS;\n    ci.m_wheelDirectionCS = wheelDirectionCS0;\n    ci.m_wheelAxleCS = wheelAxleCS;\n    ci.m_suspensionRestLength = suspensionRestLength;\n    ci.m_wheelRadius = wheelRadius;\n    ci.m_suspensionStiffness = tuning.m_suspensionStiffness;\n    ci.m_wheelsDampingCompression = tuning.m_suspensionCompression;\n    ci.m_wheelsDampingRelaxation = tuning.m_suspensionDamping;\n    ci.m_frictionSlip = tuning.m_frictionSlip;\n    ci.m_bIsFrontWheel = isFrontWheel;\n    ci.m_maxSuspensionTravelCm = tuning.m_maxSuspensionTravelCm;\n    ci.m_maxSuspensionForce = tuning.m_maxSuspensionForce;\n\n    m_wheelInfo.push_back( btWheelInfo(ci));\n\n    btWheelInfo&amp; wheel = m_wheelInfo[getNumWheels()-1];\n\n    updateWheelTransformsWS( wheel , false );\n    updateWheelTransform(getNumWheels()-1,false);\n    return wheel;\n}\n</code></pre>\n\n<p>So it looks like the first 5 arguments essentially describe the position and orientation of each of the wheels. The 6th argument (<code>tuning</code>) seems to describe mechanical properties of the tire such as friction, damping, etc. The last parameter seems self-explanatory.</p>\n"}], "owner": {"reputation": 2319, "user_id": 2211273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6d55ba6b0f08aed750502866c7e7ee77?s=128&d=identicon&r=PG", "display_name": "Kritzefitz", "link": "https://stackoverflow.com/users/2211273/kritzefitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 563, "favorite_count": 0, "accepted_answer_id": 32871903, "answer_count": 1, "score": 1, "last_activity_date": 1443641159, "creation_date": 1443631384, "last_edit_date": 1443641159, "question_id": 32871496, "link": "https://stackoverflow.com/questions/32871496/bullet-vehicle-addwheel-parameters", "title": "bullet vehicle addWheel parameters", "body": "<p>I'm trying to make a simple raycast vehicle in bullet. It is supposed to be a box on sour wheels.</p>\n\n<p>I'm now stuck with the calls to <code>btRayvastVehicle::addWheel</code>, because I don't understand what exactly they mean, as they're not well documented in the API documentation and as a non-native English speaker, I'm having a hard time, to infer what they are based on their names.</p>\n\n<p>What particularly puzzles me, is how exactly the three first parameters define the position and orientation of the wheel.</p>\n\n<p>So what exactly do the parameters of <code>btRaycastVehicle::addWheel</code> do?</p>\n"}, {"tags": ["c++", "linux", "multithreading", "alignment", "pipe"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1443631638, "post_id": 32871452, "comment_id": 53574844, "body": "What makes you actually think you need a pipe to do this? Also note asking for opinions is off-topic."}, {"owner": {"reputation": 51, "user_id": 4625189, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a8cc2dc8bb62de506fb93a132a45d05f?s=128&d=identicon&r=PG&f=1", "display_name": "GoodToLearn", "link": "https://stackoverflow.com/users/4625189/goodtolearn"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1443633401, "post_id": 32871452, "comment_id": 53575779, "body": "because the existing app was done by other developer using libuv event driven framework, the recving thread (of pipe) sends/recvs data with an external app via TCP. And the recving thread uses libvn&#39;s loop to monitor that TCP socket.  The sending thread ( of pipe) can&#39;t directly send data via that same TCP socket ( due to the libuv&#39;s restriction ). Thus, pipe seems to me a solution."}, {"owner": {"reputation": 51, "user_id": 4625189, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a8cc2dc8bb62de506fb93a132a45d05f?s=128&d=identicon&r=PG&f=1", "display_name": "GoodToLearn", "link": "https://stackoverflow.com/users/4625189/goodtolearn"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1443633437, "post_id": 32871452, "comment_id": 53575795, "body": "Why asking for opinions is off-topic ?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1443634407, "post_id": 32871452, "comment_id": 53576330, "body": "Because the policies say so. Though it&#39;s not explicitly mentioned <a href=\"http://stackoverflow.com/help/on-topic\">here</a> it&#39;s a primary close reason."}, {"owner": {"reputation": 6647, "user_id": 550062, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X5OLy.png?s=128&g=1", "display_name": "Becuzz", "link": "https://stackoverflow.com/users/550062/becuzz"}, "edited": false, "score": 4, "creation_date": 1443636712, "post_id": 32871452, "comment_id": 53577508, "body": "From the <a href=\"http://stackoverflow.com/help/dont-ask\">article on things that you shouldn&#39;t ask on SO</a>: &quot;there is no actual problem to be solved\u201d or &quot;you are asking an open-ended, hypothetical question: \u201cWhat if ______ happened?\u201d&quot; Also, this is very open ended with a lot of potential answers that could all be equally valid.  From the same article: &quot;Your questions should be reasonably scoped. If you can imagine an entire book that answers your question, you\u2019re asking too much.&quot;  If you want a forum where people can brainstorm potential problems, SO isn&#39;t it."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 6647, "user_id": 550062, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X5OLy.png?s=128&g=1", "display_name": "Becuzz", "link": "https://stackoverflow.com/users/550062/becuzz"}, "edited": false, "score": 0, "creation_date": 1443637054, "post_id": 32871452, "comment_id": 53577700, "body": "@Becuzz Well, maybe an edge case, because using a <code>pipe</code> handle should be simply considered the wrong approach for such problem. Anyway, the question might come out <i>to broad</i> without asking for particular code improvements/fixes."}, {"owner": {"reputation": 51, "user_id": 4625189, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a8cc2dc8bb62de506fb93a132a45d05f?s=128&d=identicon&r=PG&f=1", "display_name": "GoodToLearn", "link": "https://stackoverflow.com/users/4625189/goodtolearn"}, "edited": false, "score": 0, "creation_date": 1443638176, "post_id": 32871452, "comment_id": 53578279, "body": "I see your points about the open ended question. Thanks."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 1, "creation_date": 1443673541, "post_id": 32871452, "comment_id": 53589562, "body": "I think that this question is on-topic and has an answer that fits into our format.  It could easily be made clear by re-wording the last paragraph.  I would do this if it were not for a link from an active Meta question. @GoodToLearn It would improve your question <i>a lot</i> if you could update it with a short but working code demo.  I&#39;m concerned that you&#39;re going to invoke UB but I can&#39;t tell for sure without seeing your code.  If you want a review of some working code, consider asking on <a href=\"https://codereview.stackexchange.com/tour\">Code Review</a>."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 4625189, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a8cc2dc8bb62de506fb93a132a45d05f?s=128&d=identicon&r=PG&f=1", "display_name": "GoodToLearn", "link": "https://stackoverflow.com/users/4625189/goodtolearn"}, "edited": false, "score": 0, "creation_date": 1443638422, "post_id": 32872286, "comment_id": 53578425, "body": "in this case, std::condition_variabl and mutex might not work for recving thread as it blocks in the default UV_loop of libnv event driving framework. ( which is similar to ( but more complex than)  select or epoll."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1443673909, "post_id": 32872286, "comment_id": 53589661, "body": "There is a simple trick in this situation: Use the deque as suggested but instead of using a condition variable, keep using a pipe.  However, you don&#39;t use it to send the actual data but merely write a single byte to it whenever you have added something to the deque.  You should still protect the data structure with a mutex."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1443634164, "creation_date": 1443634164, "answer_id": 32872286, "question_id": 32871452, "link": "https://stackoverflow.com/questions/32871452/64-bit-linux-g-passing-struct-btw-two-threads-via-pipe/32872286#32872286", "title": "64 bit Linux g++ passing STRUCT btw two threads via pipe", "body": "<p>I would rather use a <a href=\"http://en.cppreference.com/w/cpp/container/deque\" rel=\"nofollow\"><code>std::deque&lt;MyStruct&gt;</code></a>, and use a simple synchronisation mechanism like a <a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable\" rel=\"nofollow\"><code>std::condition_variable</code></a> to notify the consumer thread about available data, plus a <a href=\"http://en.cppreference.com/w/cpp/thread/mutex\" rel=\"nofollow\"><code>std:::mutex</code></a> to make writing/reading to/from the queue thread safe.</p>\n\n<p>I think this should be far more efficient than a <code>pipe</code> handle and all of the <code>write()</code>/<code>read()</code> operations coming along with such technique.</p>\n"}], "owner": {"reputation": 51, "user_id": 4625189, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a8cc2dc8bb62de506fb93a132a45d05f?s=128&d=identicon&r=PG&f=1", "display_name": "GoodToLearn", "link": "https://stackoverflow.com/users/4625189/goodtolearn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443634466, "creation_date": 1443631242, "last_edit_date": 1443634466, "question_id": 32871452, "link": "https://stackoverflow.com/questions/32871452/64-bit-linux-g-passing-struct-btw-two-threads-via-pipe", "title": "64 bit Linux g++ passing STRUCT btw two threads via pipe", "body": "<p>I have a C++ app running on 64 bit Linux. I am planning to pass a simple struct data (without virtual function in it) from one thread to another thread ( in same process) via pipe WITHOUT any special consideration of alignment. Basically, the sending side sends the amount of sizeof(struct) bytes. And recving side cast those bytes to struct.  There is no concurrent access/atomicity concern. And there won't be any plan to pass the data to a different process or remote machine in the future.  </p>\n\n<p>I am positive that the code will work as expected. </p>\n\n<p>However, I like to get opinions from experts of SO on my approach to see if there is any potential issues. ( as testing might not disclose them in this case).</p>\n"}, {"tags": ["c++", "inheritance", "interface", "vtable"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1443631219, "post_id": 32871370, "comment_id": 53574607, "body": "Is the app and the dll built with the same compiler with the same settings? If so, it should work. If not, I don&#39;t think there&#39;s a way to make it work."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1443631223, "post_id": 32871370, "comment_id": 53574610, "body": "You need  <code>dynamic_cast</code>"}, {"owner": {"reputation": 70803, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1443631276, "post_id": 32871370, "comment_id": 53574639, "body": "Since Character inherits from IVob in more than one way, this may be an instance of the <i>diamond problem</i>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 70803, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1443631450, "post_id": 32871370, "comment_id": 53574734, "body": "@DavidGrayson Well this could be solved making it a <code>virtual</code> base."}, {"owner": {"reputation": 9, "user_id": 5393964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95d2005a348dfca55cd55593c22f9ca0?s=128&d=identicon&r=PG", "display_name": "truepaddii", "link": "https://stackoverflow.com/users/5393964/truepaddii"}, "edited": false, "score": 0, "creation_date": 1443631685, "post_id": 32871370, "comment_id": 53574878, "body": "The library should be cross platform and is therefore compiled via cmake and gcc. <code>dynamic_cast</code> wouldn&#39;t be available, since I plan not to provide RTTI information. (public server application)"}], "owner": {"reputation": 9, "user_id": 5393964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95d2005a348dfca55cd55593c22f9ca0?s=128&d=identicon&r=PG", "display_name": "truepaddii", "link": "https://stackoverflow.com/users/5393964/truepaddii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "closed_date": 1443631156, "answer_count": 0, "score": 0, "last_activity_date": 1443635061, "creation_date": 1443630989, "last_edit_date": 1443635061, "question_id": 32871370, "link": "https://stackoverflow.com/questions/32871370/c-multiple-inheritance-with-interface", "closed_reason": "Duplicate", "title": "C++ multiple inheritance with interface", "body": "<p>I have a question concerning multiple inheritance. In my project, I want to add support for dll plugins and need an interface for that reason. In the application, I create objects like players and visual objects and hand them to the dll interface. the dll only has the ability to interpret a character pointer as ICharacter for example. My problem occurs, within the application itself:</p>\n\n<pre><code>class IGameObject\n{\n    virtual const std::string &amp;getName(void) const = 0;\n    virtual void setName(const std::string &amp;name) = 0;\n};\n\nclass IVob : public virtual IGameObject\n{\n    virtual const Math::Vec3 &amp;getPosition(void) const = 0;\n    virtual void setPosition(const Math::Vec3 &amp;pos) = 0;\n    // more pure virtual functions\n};\n\nclass ICharacter : public virtual IVob\n{\n    // pure virtual functions\n};\n\nclass GameObject : public virtual IGameObject\n{\n    GameObject();\n\n    virtual const std::string &amp;getName(void) const override;\n    virtual void setName(const std::string &amp;name) override;\n    // more virtual function override\n};\n\nclass Vob : public virtual IVob, public GameObject\n{\n    Vob(VobType type);\n\n    virtual const Math::Vec3 &amp;getPosition(void) const override;\n    virtual void setPosition(const Math::Vec3 &amp;pos) override;\n    // more virtual function override\n};\n\nclass Character : public ICharacter, public Vob\n{\n    Character();\n\n    // virtual function override\n};\n</code></pre>\n\n<p>Suppose character is of ICharacter</p>\n\n<p>Now, if I want to call <code>character-&gt;setPosition(pos);</code> it may crash, since it comes as ICharacter pointer. If I <code>reinterpret_cast&lt;Character*&gt;(character)-&gt;setPosition(pos);</code> it, then it may work properly. It seems, as if the vtables got mixed up, but I can't see where that happens. If I reorder the inheritance it may \u2013 in some constellation \u2013 work.</p>\n\n<p>Process looks like:</p>\n\n<p>Creation (<code>Character*</code>) -> dll interface (<code>reinterpret_cast&lt;ICharacter*&gt;</code>) -> call functions in dll interface, which are 100% part of the original character</p>\n\n<p>If passed back to the application:</p>\n\n<p>dll interface (<code>ICharacter*</code>) -> application (<code>reinterpret_cast&lt;Character *&gt;</code>)</p>\n\n<p>What do I miss?</p>\n\n<p>Thanks in advance</p>\n\n<p>Edit: In fact did I try to <code>dynamic_cast</code>, but that didn't help. Now it crashes in an even earlier call.</p>\n"}, {"tags": ["c++", "boost", "boost-spirit-karma"], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1443655034, "post_id": 32873295, "comment_id": 53585348, "body": "recorded <a href=\"https://www.livecoding.tv/video/odr-karma-bzip2-iostreams-and-multi-index/\" rel=\"nofollow noreferrer\">live stream</a> (after ~5 minutes) (<a href=\"http://chat.stackoverflow.com/transcript/10?m=24182469#24182469\">experiment</a>)"}, {"owner": {"reputation": 5246, "user_id": 601567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/354e6825881d0dbb29130bdd4c0e560e?s=128&d=identicon&r=PG", "display_name": "ForeverLearning", "link": "https://stackoverflow.com/users/601567/foreverlearning"}, "edited": false, "score": 0, "creation_date": 1464814943, "post_id": 32873295, "comment_id": 62644327, "body": "Can I contact you offline? I have a general question on Boost Karma&#39;s applicability to a situation I am running into (and for which the Q doesn&#39;t quite follow the stackoverflow pattern)."}, {"owner": {"reputation": 5246, "user_id": 601567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/354e6825881d0dbb29130bdd4c0e560e?s=128&d=identicon&r=PG", "display_name": "ForeverLearning", "link": "https://stackoverflow.com/users/601567/foreverlearning"}, "edited": false, "score": 0, "creation_date": 1464815019, "post_id": 32873295, "comment_id": 62644361, "body": "I addressed this to sehe using @ but for whatever reason SO is not displaying it, especially considering you have made a lone comment to your own post."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 1, "creation_date": 1522942376, "post_id": 32873295, "comment_id": 86363598, "body": "Thanks for the <code>array_sink</code> tip!"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1522948506, "post_id": 32873295, "comment_id": 86367337, "body": "@sehe Do you know how this actually works under the hood? I&#39;m looking at <code>boost::spirit::ostream_iterator</code>, I assume karma detects that the buffer gets exhausted becuase of the <code>good</code> accessor here: <a href=\"https://github.com/boostorg/spirit/blob/develop/include/boost/spirit/home/karma/stream/ostream_iterator.hpp#L60\" rel=\"nofollow noreferrer\">github.com/boostorg/spirit/blob/develop/include/boost/spirit&zwnj;&#8203;/&hellip;</a> So karma is actually more general than just taking an <code>OutputIterator</code>, it will use the <code>good</code> member function if it is available to check if the output iterator is still valid?"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 1, "creation_date": 1522948723, "post_id": 32873295, "comment_id": 86367462, "body": "I guess the details are here actually, it makes sense now: <a href=\"https://github.com/boostorg/spirit/blob/develop/include/boost/spirit/home/karma/detail/output_iterator.hpp\" rel=\"nofollow noreferrer\">github.com/boostorg/spirit/blob/develop/include/boost/spirit&zwnj;&#8203;/&hellip;</a>"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 4, "last_activity_date": 1443639040, "last_edit_date": 1443639040, "creation_date": 1443638034, "answer_id": 32873295, "question_id": 32871313, "link": "https://stackoverflow.com/questions/32871313/how-does-one-generate-from-boost-karma-into-c-array/32873295#32873295", "title": "How does one generate from boost karma into C++ array?", "body": "<p>The Karma iterator-based API (<a href=\"http://www.boost.org/doc/libs/1_59_0/libs/spirit/doc/html/spirit/karma/reference/generate_api/iterator_api.html\" rel=\"nofollow\">here</a>) takes... output iterators.</p>\n\n<p>You can just create one for you array.</p>\n\n<p>Problem with that is that you need to be very sure about the buffer capacity never being insufficient:</p>\n\n<pre><code>    char buffer[1024];\n    char* it = buffer;\n    karma::generate(it, karma::double_ &lt;&lt; karma::eol, 3.13);\n\n    std::cout.write(buffer, std::distance(buffer, it));\n</code></pre>\n\n<p>Note how you cannot assume the buffer to be NUL-terminated. Use the generated size.</p>\n\n<h2>Safe using <code>array_sink</code>:</h2>\n\n<p>There's a more convenient, more general approach in Boost Iostreams that is safe in the face of fixed-size buffers too:</p>\n\n<pre><code>    char buffer[310];\n    io::stream&lt;io::array_sink&gt; as(buffer);\n    boost::spirit::ostream_iterator it(as);\n</code></pre>\n\n<p>Here's a live demo that demonstrates the characteristics:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/e8b730a7ab874c1e\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/spirit/include/karma.hpp&gt;\n#include &lt;boost/iostreams/device/array.hpp&gt;\n#include &lt;boost/iostreams/stream.hpp&gt;\n\nnamespace karma = boost::spirit::karma;\nnamespace io    = boost::iostreams;\n\nvoid test(std::vector&lt;int&gt; const&amp; v) \n{\n    char buffer[310];\n    io::stream&lt;io::array_sink&gt; as(buffer);\n    boost::spirit::ostream_iterator it(as);\n\n    using namespace karma;\n    if (generate(it, int_ % \", \" &lt;&lt; eol, v))\n    {\n        std::cout &lt;&lt; \"Success: \";\n        std::cout.write(buffer, as.tellp());\n    } else\n        std::cout &lt;&lt; \"Generation failed (insufficient capacity?)\\n\";\n}\n\nint main() {\n\n    std::cout &lt;&lt; \"Should be ok: \\n\";\n    std::vector&lt;int&gt; v(100, 1);\n    test(v);\n\n    std::cout &lt;&lt; \"This will exceed buffer capacity: \\n\";\n    std::iota(v.begin(), v.end(), 42);\n    test(v);\n}\n</code></pre>\n\n<p>Which prints</p>\n\n<pre><code>Should be ok: \nSuccess: 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1\nThis will exceed buffer capacity: \nGeneration failed (insufficient capacity?)\n</code></pre>\n"}], "owner": {"reputation": 2693, "user_id": 1338952, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8b68393134f679f403bf573569e94161?s=128&d=identicon&r=PG", "display_name": "user1338952", "link": "https://stackoverflow.com/users/1338952/user1338952"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 1, "accepted_answer_id": 32873295, "answer_count": 1, "score": 3, "last_activity_date": 1464815000, "creation_date": 1443630765, "question_id": 32871313, "link": "https://stackoverflow.com/questions/32871313/how-does-one-generate-from-boost-karma-into-c-array", "title": "How does one generate from boost karma into C++ array?", "body": "<p>I see how karma can be used to generate into a container that manages memory, like <em>std::string</em>. But what about the case where a buffer (<em>char[N]</em>) has been pre-allocated?</p>\n\n<pre><code>  {\n    using namespace boost::spirit::karma;\n    {\n      std::string buffer;\n      generate(std::inserter(buffer, buffer.begin()), double_, 3.13);\n      std::cout &lt;&lt; ':' &lt;&lt; buffer &lt;&lt; ':' &lt;&lt; std::endl;\n    }\n    {\n      //////////////////////////////////////////////////////////////////////\n      // How to make the following work? Is there a builtin output\n      // iterator that just works?\n#if defined(MAJIC)\n      char buffer[1024];\n      generate(buffer, double_, 3.13);\n      std::cout &lt;&lt; ':' &lt;&lt; buffer &lt;&lt; ':' &lt;&lt; std::endl;\n#endif\n    }\n  }\n</code></pre>\n\n<p>I would like to find a way to parse the double into an address of an existing buffer. It is ok to assume the buffer is large enough for this case. Maybe the underlying question is really - is there already an output iterator adapter or something in karma for native arrays that could be used?</p>\n"}, {"tags": ["c++", "linux", "cuda", "nsight", "icc"], "comments": [{"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1443646255, "post_id": 32871311, "comment_id": 53582175, "body": "Are you compiling and linking with the intel compiler in g++ compatibility mode?"}, {"owner": {"reputation": 1013, "user_id": 1666926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/927ab8c64f7265f61514e8f9bd24b258?s=128&d=identicon&r=PG", "display_name": "MrMas", "link": "https://stackoverflow.com/users/1666926/mrmas"}, "reply_to_user": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1443655584, "post_id": 32871311, "comment_id": 53585480, "body": "@talonmies I was under the impression that Intel compiles g++ compatibility mode by default, and you would have to explicitly shut it off using the --no-gcc flag. Having said that, I will update my post to show my compiling and linking flags."}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1443729979, "post_id": 32871311, "comment_id": 53621239, "body": "Based on all cases I have ever encountered, &quot;insufficient driver&quot; means your driver is too old, relative to the version of the CUDA runtime being used. Update your driver package to the latest available for your platform. Since modern CUDA versions come with a matching driver package included, it is not clear how you wound up with an out-of-date driver."}, {"owner": {"reputation": 1013, "user_id": 1666926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/927ab8c64f7265f61514e8f9bd24b258?s=128&d=identicon&r=PG", "display_name": "MrMas", "link": "https://stackoverflow.com/users/1666926/mrmas"}, "reply_to_user": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1443730201, "post_id": 32871311, "comment_id": 53621345, "body": "@njuffa, as I stated in my post, the problem doesn&#39;t truly appear to be a driver problem since I can get my application to run from Nsight. Having said that, there is probably a way for the wrong driver or wrong runtime library to be loaded, creating a mismatch. Based on the results from ldd, I don&#39;t think this is the problem, but any ideas outside of using ldd to check this would be appreciated."}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 1, "creation_date": 1443730478, "post_id": 32871311, "comment_id": 53621486, "body": "Instead of hypothesizing further, my suggestion is to simply install the latest driver package (that is only a few minutes of work) to check if that fixes the problem.  I have never seen a false positive &quot;insufficient driver&quot; error being emitted by the CUDA runtime, which doesn&#39;t mean such a bug is impossible, it just seems very unlikely."}, {"owner": {"reputation": 1013, "user_id": 1666926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/927ab8c64f7265f61514e8f9bd24b258?s=128&d=identicon&r=PG", "display_name": "MrMas", "link": "https://stackoverflow.com/users/1666926/mrmas"}, "reply_to_user": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1443730567, "post_id": 32871311, "comment_id": 53621536, "body": "@njuffa, point taken. I did update the driver yesterday but failed to update the runtime library so it broke everything. I&#39;m reliant on IT doing it so I&#39;m not sure it was done correctly."}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 1, "creation_date": 1443730785, "post_id": 32871311, "comment_id": 53621634, "body": "This does not add up in my mind. An older CUDA runtime should work just fine with a newer CUDA driver, it&#39;s the reverse scenario that does not work and gives rise to the &quot;insufficient driver&quot; error. In other words, you should be able to install never drivers without updating the CUDA runtime. You may want to check with your IT department to see what exactly it is they are doing."}, {"owner": {"reputation": 1013, "user_id": 1666926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/927ab8c64f7265f61514e8f9bd24b258?s=128&d=identicon&r=PG", "display_name": "MrMas", "link": "https://stackoverflow.com/users/1666926/mrmas"}, "reply_to_user": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1443742131, "post_id": 32871311, "comment_id": 53625608, "body": "@njuffa, I did update the driver. though I&#39;m certain now that the problem is not the driver, but due to a bad LD_LIBRARY_PATH. See my answer below. Thanks very much for your time. Your response ultimately led me down the correct path. If you were to put an answer down, I&#39;ll select it as the correct one."}], "answers": [{"tags": [], "owner": {"reputation": 1013, "user_id": 1666926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/927ab8c64f7265f61514e8f9bd24b258?s=128&d=identicon&r=PG", "display_name": "MrMas", "link": "https://stackoverflow.com/users/1666926/mrmas"}, "is_accepted": true, "score": 1, "last_activity_date": 1443742393, "last_edit_date": 1495540311, "creation_date": 1443742393, "answer_id": 32898384, "question_id": 32871311, "link": "https://stackoverflow.com/questions/32871311/runtime-cudaerrorinsufficientdriver-error-from-cudagetdevicecount-when-compiling/32898384#32898384", "title": "Runtime cudaErrorInsufficientDriver error from cudaGetDeviceCount when compiling with nvcc, icpc", "body": "<p>Don't add to LD_LIBRARY_PATH <code>.../cuda7.0/lib64/stubs</code>. If you do, you will pick up libcuda.so from there instead of from the driver. (See <a href=\"https://stackoverflow.com/questions/27018340/cmake-does-not-properly-find-cuda-library\">this post</a>).</p>\n"}], "owner": {"reputation": 1013, "user_id": 1666926, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/927ab8c64f7265f61514e8f9bd24b258?s=128&d=identicon&r=PG", "display_name": "MrMas", "link": "https://stackoverflow.com/users/1666926/mrmas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3205, "favorite_count": 0, "accepted_answer_id": 32898384, "answer_count": 1, "score": 1, "last_activity_date": 1443742393, "creation_date": 1443630760, "last_edit_date": 1495542574, "question_id": 32871311, "link": "https://stackoverflow.com/questions/32871311/runtime-cudaerrorinsufficientdriver-error-from-cudagetdevicecount-when-compiling", "title": "Runtime cudaErrorInsufficientDriver error from cudaGetDeviceCount when compiling with nvcc, icpc", "body": "<p><strong>PROBLEM</strong></p>\n\n<p>I have an FFT-based application that uses FFTW3. I am working on porting the application to a CUDA-based implementation using CUFFT. Compiling and running the FFT core of the application standalone within Nsight works fine. I have moved from there to integrating the device code into my application.</p>\n\n<p>When I run using with the CUFFT core code integrated into my application, <code>cudaGetDeviceCount</code> returns a <code>cudaErrorInsufficientDriver</code> error, although I did not get it with the Nsight standalone run. This call is made at the beginning of the run when I'm initializing the GPU.</p>\n\n<p><strong>BACKGROUND</strong></p>\n\n<p>I am running on CentOS 6, using CUDA 7.0 on a GeForce GTX 750, and <code>icpc</code> 12.1.5. I have also successfully tested a small example using a GT 610. Both cards work in Nsight (and I've also compiled and run command-line without problems, though not as extensively as from within Nsight).</p>\n\n<p>To integrate the CUFFT implementation of the FFT core into my application, I compiled and device-linked with <code>nvcc</code> and then used <code>icpc</code> (the Intel C++ Compiler) to compile the host code and to link the device and host code to create a .so. I finally completed that step without errors or warnings (relying on <a href=\"http://devblogs.nvidia.com/parallelforall/separate-compilation-linking-cuda-device-code/\" rel=\"nofollow noreferrer\">this tutorial</a>).</p>\n\n<p>(The reasoning as to why I'm using a .so has a fair amount of history and additional background. Suffice it to say that making a .so is required for my application.)</p>\n\n<p>The tutorial points out that compilation steps are different between generating the standalone executable (as I do in Nsight) and generating a device-linked library for inclusion in a .so. To get through the compilation, I had to add <code>-lcudart</code> as described in the tutorial, as well as <code>-lcuda</code>, to my <code>icpc</code> linking call (as well as the <code>-L</code> to add <code>.../cuda-7.0/lib64</code> and <code>.../cuda-7.0/lib64/stubs</code> as the paths to those libraries).</p>\n\n<p>NOTE: <code>nvcc</code> links in <code>libcudart</code> by default. I'm assuming it does the same for <code>libcuda</code> since Nsight doesn't include either of these libraries in any of the compile and linking steps.. As an aside, I do find it strange that although <code>nvcc</code> links them in by default, they don't show up from a call to <code>ldd</code> on the executable.</p>\n\n<p>I also had to add <code>--compiler-options '-fPIC'</code> to my <code>nvcc</code> commands to avoid errors described <a href=\"https://stackoverflow.com/questions/19364969/compilation-fails-with-relocation-r-x86-64-32-against-rodata-str1-8-can-not\">here</a>.</p>\n\n<p>I have seen some chatter (for one example, see <a href=\"https://stackoverflow.com/questions/23464046/has-anyone-actually-gotten-nvcc-and-the-intel-compiler-to-work-together\">this post</a>) about Intel/NVCC compatibilities, but it looks like they arise at compile-time with older versions of NVCC, so...I <em>think</em> I'm ok on that account.</p>\n\n<p>Finally, here are the compile commands for compilation of three .cu files (all are identical except for the name of the .cu file and the name of the .o file):</p>\n\n<pre><code>nvcc\n-ccbin g++\n-Iinc\n-I/path/to/cuda/samples/common/inc\n-m64\n-O3\n-gencode arch=compute_20,code=sm_20\n-gencode arch=compute_30,code=sm_30\n-gencode arch=compute_35,code=sm_35\n-gencode arch=compute_37,code=sm_37\n-gencode arch=compute_50,code=sm_50\n-gencode arch=compute_52,code=sm_52\n-gencode arch=compute_52,code=compute_52\n--relocatable-device-code=true\n--compile\n--compiler-options '-fPIC'\n-o my_object_file1.o\n-c my_source_code_file1.cu\n</code></pre>\n\n<p>And here are the flags I pass to the device linking step:</p>\n\n<pre><code>nvcc\n-ccbin g++\n-Iinc\n-I/path/to/cuda/samples/common/inc\n-m64\n-O3\n-gencode arch=compute_20,code=sm_20\n-gencode arch=compute_30,code=sm_30\n-gencode arch=compute_35,code=sm_35\n-gencode arch=compute_37,code=sm_37\n-gencode arch=compute_50,code=sm_50\n-gencode arch=compute_52,code=sm_52\n-gencode arch=compute_52,code=compute_52\n--compiler-options '-fPIC'\n--device-link\nmy_object_file1.o\nmy_object_file2.o\nmy_object_file3.o\n-o my_device_linked_object_file.o\n</code></pre>\n\n<p>I probably don't need the <code>-gencode</code> flags for 30, 37, and 52, at least currently, but they shouldn't cause any problems, and eventually, I will likely compile that way.</p>\n\n<p>And here are my compiling flags (minus the -o flag, and all my -I flags) that I use for the .cc file that uses calls my CUDA library:</p>\n\n<pre><code>-c\n-fpic\n-D_LARGEFILE_SOURCE\n-D_FILE_OFFSET_BITS=64\n-fno-operator-names\n-D_REENTRANT\n-D_POSIX_PTHREAD_SEMANTICS\n-DM2KLITE -DGCC_\n-std=gnu++98\n-O2\n-fp-model source\n-gcc\n-wd1881\n-vec-report0\n</code></pre>\n\n<p>Finally, here are my linking flags:</p>\n\n<pre><code>-pthread\n-shared\n</code></pre>\n\n<p>Any ideas on how to fix this problem?</p>\n"}, {"tags": ["c++", "fstream", "ifstream", "getline"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 2, "creation_date": 1443630173, "post_id": 32871059, "comment_id": 53573974, "body": "<i>How</i> are you compiling and, more importantly, linking?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1443630193, "post_id": 32871059, "comment_id": 53573990, "body": "The code provided compiles OK after you add missing int to the main()."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 5, "creation_date": 1443630230, "post_id": 32871059, "comment_id": 53574009, "body": "So this has nothing at all to do with input from a file, and everything to do with just basic compilation of a C++ program. You should have tried a Hello World and spotted that the problem remains. Sounds like you&#39;re writing <code>gcc</code>, not <code>g++</code>. You also need a return type for <code>main</code>."}, {"owner": {"reputation": 11, "user_id": 5390626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36061be1a73a571b428c6fd15d4ffede?s=128&d=identicon&r=PG&f=1", "display_name": "btown", "link": "https://stackoverflow.com/users/5390626/btown"}, "edited": false, "score": 0, "creation_date": 1443632786, "post_id": 32871059, "comment_id": 53575473, "body": "Based on your comments I found this thread which explains everything: <a href=\"http://stackoverflow.com/questions/3178342/compiling-a-c-program-with-gcc\" title=\"compiling a c program with gcc\">stackoverflow.com/questions/3178342/&hellip;</a>  Thanks for the help - I didn&#39;t realise I couldn&#39;t use gcc without linking. Will use g++ from now on."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 2, "last_activity_date": 1443630300, "creation_date": 1443630300, "answer_id": 32871172, "question_id": 32871059, "link": "https://stackoverflow.com/questions/32871059/ifstream-in-c-compiler-issues/32871172#32871172", "title": "ifstream in c++ - compiler issues", "body": "<p>Unclear compilation (likely linking) issues aside, reading from stream is straightforward:</p>\n\n<pre><code>infile &gt;&gt; a &gt;&gt; b &gt;&gt; c &gt;&gt; d &gt;&gt; e;\n</code></pre>\n\n<p>will do the trick, assuming you have your data white-space delimited.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5390626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36061be1a73a571b428c6fd15d4ffede?s=128&d=identicon&r=PG&f=1", "display_name": "btown", "link": "https://stackoverflow.com/users/5390626/btown"}, "edited": false, "score": 0, "creation_date": 1443633114, "post_id": 32871465, "comment_id": 53575627, "body": "Thanks, that is exactly what I was looking for with the &gt;&gt; operator. I specifically don&#39;t want it to be a string so I will use the first one. Do I need to specify anything to indicate new line?(i.e like I do in C with &quot;\\n&quot;) or will it automatically skip to the next non white space character it sees?"}, {"owner": {"reputation": 106, "user_id": 4946382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e9a94216b36137f7c0884b859b8762f?s=128&d=identicon&r=PG&f=1", "display_name": "Santosderek", "link": "https://stackoverflow.com/users/4946382/santosderek"}, "reply_to_user": {"reputation": 11, "user_id": 5390626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36061be1a73a571b428c6fd15d4ffede?s=128&d=identicon&r=PG&f=1", "display_name": "btown", "link": "https://stackoverflow.com/users/5390626/btown"}, "edited": false, "score": 0, "creation_date": 1443633770, "post_id": 32871465, "comment_id": 53575971, "body": "It will automatically search for the next integer type, ignoring the &quot;\\n&quot;. Within the if statement if you add &#39;cout &lt;&lt; a &lt;&lt; b &lt;&lt; c &lt;&lt; x &lt;&lt; y &lt;&lt; z;&#39; after recieving the integers you should see what I mean."}], "tags": [], "owner": {"reputation": 106, "user_id": 4946382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e9a94216b36137f7c0884b859b8762f?s=128&d=identicon&r=PG&f=1", "display_name": "Santosderek", "link": "https://stackoverflow.com/users/4946382/santosderek"}, "is_accepted": false, "score": 0, "last_activity_date": 1443635045, "last_edit_date": 1443635045, "creation_date": 1443631278, "answer_id": 32871465, "question_id": 32871059, "link": "https://stackoverflow.com/questions/32871059/ifstream-in-c-compiler-issues/32871465#32871465", "title": "ifstream in c++ - compiler issues", "body": "<p>Try this             </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nint main() {\n    int a, b, c, x, y, z;\n\n    ifstream infile;\n    infile.open(\"input.dat\", ios::in); //Open input.dat in input/read mode \n\n    if (infile.is_open()) {\n\n        infile &gt;&gt; a &gt;&gt; b &gt;&gt; c &gt;&gt; x &gt;&gt; y &gt;&gt; z;\n        cout &lt;&lt; a &lt;&lt; b &lt;&lt; c &lt;&lt; x &lt;&lt; y &lt;&lt; z;\n        infile.close(); //you close here since file would really be open here\n        return 0;\n    }\n    else {\n        cout &lt;&lt; \"Unable to open file.\" &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>You could replace </p>\n\n<blockquote>\n  <p>infile >> a >> b >> c;</p>\n</blockquote>\n\n<p>To </p>\n\n<pre><code>getline(infile, PUTSTRINGHERE);\n</code></pre>\n\n<p>If you wanted to get the whole line as a string variable, though you must include </p>\n\n<pre><code>#include &lt;iostream&gt;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5390626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36061be1a73a571b428c6fd15d4ffede?s=128&d=identicon&r=PG&f=1", "display_name": "btown", "link": "https://stackoverflow.com/users/5390626/btown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 464, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1443635045, "creation_date": 1443629936, "last_edit_date": 1443633303, "question_id": 32871059, "link": "https://stackoverflow.com/questions/32871059/ifstream-in-c-compiler-issues", "title": "ifstream in c++ - compiler issues", "body": "<p>I am transitioning from C to C++ and I am trying to open and read an input file and simultaneously assign variables to the values read in. For example, I have 6 variables: <code>a</code>, <code>b</code>, <code>c</code>, <code>x</code>, <code>y</code>,<code>z</code> and my file: <code>input.dat</code> looks like this: </p>\n\n<pre><code>1     2     3\n4     5     6\n</code></pre>\n\n<p>So in C I would write: </p>\n\n<pre><code>infile = fopen(\"input.dat\",\"r\");\nfscanf(infile, \"%d \\t %d \\t %d \\n %d \\t %d \\t %d \\n\",&amp;a,&amp;b,&amp;c,&amp;x,&amp;y,&amp;z);\n</code></pre>\n\n<p>I am trying to do the same thing in C++ using <code>ifstream</code> but I am having trouble compiling a simple program: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nmain(){\n    int a, b, c, x, y, z;\n\n    ifstream infile(\"input.dat\", ifstream::in); //Open input.dat in input/read mode \n\n    if(infile.is_open()){\n       /*read and assign variables from file - not sure how to do this yet*/\n       return 0;\n    } else {\n        cout &lt;&lt; \"Unable to open file.\" &lt;&lt; endl;\n    }\n    infile.close();\n\n    return 0;\n}\n</code></pre>\n\n<p>When I try to compile this I get a ton of errors thrown at me that all look something like:</p>\n\n<pre><code> \"Undefined reference to std::cout\"\n</code></pre>\n\n<p>I am sure it is just some silly mistake but I can't seem to figure it out. I was trying to follow the syntax described in the examples at:<a href=\"http://www.cplusplus.com/doc/tutorial/files/\" rel=\"nofollow\">http://www.cplusplus.com/doc/tutorial/files/</a></p>\n\n<h2>Question:</h2>\n\n<p>1.How to properly use <code>fstream</code> in the above code?</p>\n\n<p>2.How input from files is read and assigned to variables. I understand it can be done with <code>getline</code>. Is it possible to use the extraction <code>operator &gt;&gt;</code> and if so, what would the syntax be for this example? </p>\n"}, {"tags": ["c++", "boost", "bzip2", "bz2"], "comments": [{"owner": {"reputation": 2173, "user_id": 1132850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eec4b20243d5171f582fb5146a845206?s=128&d=identicon&r=PG", "display_name": "PiQuer", "link": "https://stackoverflow.com/users/1132850/piquer"}, "edited": false, "score": 0, "creation_date": 1446776116, "post_id": 32870991, "comment_id": 54896045, "body": "The patch posted in the comments to <a href=\"https://svn.boost.org/trac/boost/ticket/9749\" rel=\"nofollow noreferrer\">svn.boost.org/trac/boost/ticket/9749</a> fixes the problem for me. Unfortunately the bug is still open for quite some time now."}, {"owner": {"reputation": 61, "user_id": 1171157, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S3jYq.jpg?s=128&g=1", "display_name": "HyperBoar", "link": "https://stackoverflow.com/users/1171157/hyperboar"}, "edited": false, "score": 0, "creation_date": 1602862592, "post_id": 32870991, "comment_id": 113863613, "body": "It seems that this issue has been fixed at some point, the patch svn.boost.org/trac/boost/ticket/9749 seems to have been incorporated into <code>boost&#47;iostreams&#47;filter&#47;bzip2.hpp</code>. Decompressing now works for me for multi-stream files with Boost 1.72."}], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 4, "last_activity_date": 1611802064, "last_edit_date": 1611802064, "creation_date": 1443641146, "answer_id": 32874112, "question_id": 32870991, "link": "https://stackoverflow.com/questions/32870991/boost-1-59-not-decompressing-all-bzip2-streams/32874112#32874112", "title": "Boost 1.59 not decompressing all bzip2 streams", "body": "<p>You are right.</p>\n<p>It seems that changeset #63057 only fixes part of the issue.</p>\n<p>The corresponding unit-test does work, though. But it uses the <code>copy</code> algorithm (also on a <code>composite&lt;&gt;</code> instead of a <code>filtering_istream</code>, if that is relevant).</p>\n<p>I'd open this as a defect or a regression. Include a file that exhibits the problem, of course. For me it's reproduced using just <code>/etc/dictionaries-common/words</code> compressed with <code>pbzip2</code> (default options).</p>\n<p><strike>I have the <code>test.bz2</code> here: <a href=\"http://7f0d2fd2-af79-415c-ab60-033d3b494dc9.s3.amazonaws.com/test.bz2\" rel=\"nofollow noreferrer\">http://7f0d2fd2-af79-415c-ab60-033d3b494dc9.s3.amazonaws.com/test.bz2</a></strike></p>\n<p>Here's my test program:</p>\n<pre><code>#include &lt;boost/iostreams/filtering_stream.hpp&gt;\n#include &lt;boost/iostreams/filter/bzip2.hpp&gt;\n#include &lt;boost/iostreams/stream.hpp&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n\nnamespace io = boost::iostreams;\n\nvoid multiple_member_test(); // from the unit tests in changeset #63057\n\nint main() {\n    //multiple_member_test();\n    //return 0;\n\n    std::ifstream trans_file(&quot;test.bz2&quot;, std::ios::binary);\n\n    //Set up boost bzip2 compression\n    io::filtering_istream in;\n    in.push(io::bzip2_decompressor());\n    in.push(trans_file);\n\n    //Begin reading\n    std::string str;\n    while(std::getline(in, str))\n    {\n        std::cout &lt;&lt; str &lt;&lt; &quot;\\n&quot;;\n    }\n}\n\n#include &lt;boost/iostreams/compose.hpp&gt;\n#include &lt;boost/iostreams/copy.hpp&gt;\n#include &lt;boost/iostreams/device/array.hpp&gt;\n#include &lt;boost/iostreams/device/back_inserter.hpp&gt;\n#include &lt;cassert&gt;\n#include &lt;sstream&gt;\n\nvoid multiple_member_test()  // from the unit tests in changeset #63057\n{ \n    std::string      data(20ul &lt;&lt; 20, '*');\n    std::vector&lt;char&gt;  temp, dest; \n\n    // Write compressed data to temp, twice in succession \n    io::filtering_ostream out; \n    out.push(io::bzip2_compressor()); \n    out.push(io::back_inserter(temp)); \n    io::copy(boost::make_iterator_range(data), out); \n    out.push(io::back_inserter(temp)); \n    io::copy(boost::make_iterator_range(data), out); \n\n    // Read compressed data from temp into dest \n    io::filtering_istream in; \n    in.push(io::bzip2_decompressor()); \n    in.push(io::array_source(&amp;temp[0], temp.size())); \n    io::copy(in, io::back_inserter(dest)); \n\n    // Check that dest consists of two copies of data \n    assert(data.size() * 2 == dest.size()); \n    assert(std::equal(data.begin(), data.end(), dest.begin())); \n    assert(std::equal(data.begin(), data.end(), dest.begin() + dest.size() / 2)); \n\n    dest.clear(); \n    io::copy( \n            io::array_source(&amp;temp[0], temp.size()), \n            io::compose(io::bzip2_decompressor(), io::back_inserter(dest))); \n\n    // Check that dest consists of two copies of data \n    assert(data.size() * 2 == dest.size()); \n    assert(std::equal(data.begin(), data.end(), dest.begin())); \n    assert(std::equal(data.begin(), data.end(), dest.begin() + dest.size() / 2)); \n} \n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 5393974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0enBL.jpg?s=128&g=1", "display_name": "Primalfido", "link": "https://stackoverflow.com/users/5393974/primalfido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 568, "favorite_count": 2, "accepted_answer_id": 32874112, "answer_count": 1, "score": 4, "last_activity_date": 1611802064, "creation_date": 1443629642, "last_edit_date": 1443713161, "question_id": 32870991, "link": "https://stackoverflow.com/questions/32870991/boost-1-59-not-decompressing-all-bzip2-streams", "title": "Boost 1.59 not decompressing all bzip2 streams", "body": "<p>I've been trying to decompress some .bz2 files on the fly and line-by-line so to speak as the files I'm dealing with are massive uncompressed (region of 100 GB uncompressed) so I wanted to add a solution that saves disk space.</p>\n\n<p>I have no problems decompressing using files compressed with vanilla bzip2 but files compressed with pbzip2 only decompress the first bz2 stream it finds. This bugtracker relates to the problem: <a href=\"https://svn.boost.org/trac/boost/ticket/3853\" rel=\"nofollow\">https://svn.boost.org/trac/boost/ticket/3853</a> but I was lead to believe it was fixed past version 1.41. I've checked the bzip2.hpp file and it contains the 'fixed' version and I've also checked that the version of Boost used in the program is 1.59.</p>\n\n<p>The code is here:</p>\n\n<pre><code>cout&lt;&lt;\"Warning bzip2 support is a little buggy!\"&lt;&lt;endl;\n\n//Open the file here\ntrans_file.open(files[i].c_str(), std::ios_base::in |  std::ios_base::binary);\n\n//Set up boost bzip2 compression\nboost::iostreams::filtering_istream in;\nin.push(boost::iostreams::bzip2_decompressor());\nin.push(trans_file);\nstd::string str;\n\n//Begin reading\nwhile(std::getline(in, str))\n{\n    std::stringstream stream(str);\n    stream&gt;&gt;id_f&gt;&gt;id_i&gt;&gt;aif;\n    /* Do stuff with values here*/\n}\n</code></pre>\n\n<p>Any suggestions would be great. Thanks!</p>\n"}, {"tags": ["c++", "string", "loops", "erase"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1443629912, "post_id": 32870967, "comment_id": 53573805, "body": "After you erase the character from <code>tmpgword</code>, it&#39;s not equal to <code>word</code> any more. So the positions in <code>word</code> don&#39;t match the positions in <code>tmpgword</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1443630086, "post_id": 32870967, "comment_id": 53573909, "body": "<code>.tmpgword.find()</code> returns the position of the character when it&#39;s found. Why don&#39;t you just put that in a variable and erase that position?"}, {"owner": {"reputation": 900, "user_id": 4786728, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/DXg4w.jpg?s=128&g=1", "display_name": "Michael Heidelberg", "link": "https://stackoverflow.com/users/4786728/michael-heidelberg"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1443636630, "post_id": 32870967, "comment_id": 53577467, "body": "I made a mistake ==&gt; I changed my code many times, I found a better solution but I wanted to know why this code is not working well; ( coding for more than 3 hours), I lost my concentration and I didn&#39;t recognize this mistake, thanks, I understand what&#39;s going on now."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1443630532, "post_id": 32871191, "comment_id": 53574190, "body": "@Galik Thx. I hate using an editor without paren-matching."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 4, "last_activity_date": 1443630498, "last_edit_date": 1443630498, "creation_date": 1443630377, "answer_id": 32871191, "question_id": 32870967, "link": "https://stackoverflow.com/questions/32870967/member-function-erase-not-working-in-a-loop/32871191#32871191", "title": "member function erase() not working in a loop", "body": "<p>After you do the first erase, the character positions in <code>tmpgword</code> are not the same as in <code>word</code>.</p>\n\n<p><code>string::find()</code> returns the position of the element when it's found, so you can use that instead of looping through <code>word</code>.</p>\n\n<pre><code>size_t pos = 0;\nwhile ((pos = tmpgword.find(guess, pos)) != string::npos) {\n    tmpgword.erase(pos, 1);\n}\n</code></pre>\n\n<p>I've used <code>pos</code> as the starting position for each call to <code>find()</code> so it starts from where it just erased, rather than searching from the beginning each time through (there can't be any occurrences before that, because they've all been erased).</p>\n"}], "owner": {"reputation": 900, "user_id": 4786728, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/DXg4w.jpg?s=128&g=1", "display_name": "Michael Heidelberg", "link": "https://stackoverflow.com/users/4786728/michael-heidelberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 32871191, "answer_count": 1, "score": 2, "last_activity_date": 1443630498, "creation_date": 1443629581, "question_id": 32870967, "link": "https://stackoverflow.com/questions/32870967/member-function-erase-not-working-in-a-loop", "title": "member function erase() not working in a loop", "body": "<p>I'm programming a little game; but stringname.erase() seems to be not working in a 'for-loop' , I want to understand why, I have other alternatives, but I don't understand what's going on in the following code.</p>\n\n<p><strong>More explications of my situation (<em>Important!)</em>:</strong></p>\n\n<p>guess is a char.\n'tmgword' and 'word' are of type string, and: tmgword = word ;</p>\n\n<p>what I understand from my code: </p>\n\n<p>in the first time,the 'while'-loop verifies if there is 'guess' in the string 'tmpgword'. \n That is true and the for-loop is working fine, the right character(guess) that verifies the if-condition is erased.</p>\n\n<p>in the second time: the 'while'-loop verifies again if there is 'guess' in the string 'tmpgword'. \nthat is true, and hence we go into the 'for-loop' again; and then into the 'if'-block ( the right char is found ) but here erase() don't work, and we enter in an infinite loop.</p>\n\n<p>when the program finds the right index using 'for-loop', I break, and I start the search from the beginning in case there are more occurrences of guess.</p>\n\n<p>the problem is: the program finds 'guess' again but erase() won't delete it!</p>\n\n<p>can someone explain please. Here is my code:</p>\n\n<pre><code>while (tmpgword.find(guess,0) != string::npos )\n        {\n            for (i = 0; i &lt; word.size(); i++) // verify the input; \n            {\n\n                if (word[i] == guess)\n                {\n                    encword[i] = word[i];//I don't think this line is important\n                    tmpgword.erase(tmpgword.begin() + i);\n                    break;\n                }\n\n            }\n        }\n</code></pre>\n"}, {"tags": ["c++", "windows", "debugging", "memory-address"], "answers": [{"comments": [{"owner": {"reputation": 618, "user_id": 409528, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2516fba3b430779c2a16c38df5b68a0?s=128&d=identicon&r=PG", "display_name": "nobs", "link": "https://stackoverflow.com/users/409528/nobs"}, "edited": false, "score": 0, "creation_date": 1443685312, "post_id": 32871542, "comment_id": 53594512, "body": "Thanks for the answer! This is great!"}], "tags": [], "owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "is_accepted": true, "score": 2, "last_activity_date": 1443631840, "last_edit_date": 1443631840, "creation_date": 1443631530, "answer_id": 32871542, "question_id": 32870882, "link": "https://stackoverflow.com/questions/32870882/getting-from-memory-address-to-function-in-source/32871542#32871542", "title": "Getting from memory address to function in source", "body": "<h2>Process Explorer</h2>\n\n<p>This can be done in Process Explorer itself under <code>Options|Configure symbols...</code>:</p>\n\n<ol>\n<li>Choose <code>dbghelp.dll</code></li>\n<li><p>Set the symbol path</p>\n\n<pre><code>SRV*c:\\debug\\symbols*http://msdl.microsoft.com/download/symbols;c:\\mysymbols\n</code></pre></li>\n</ol>\n\n<p>But this may not be very convenient for your customer.</p>\n\n<p>A safer and typically more user friendly way:</p>\n\n<ol>\n<li>Right click the process</li>\n<li>Choose <code>Create dump | Create Minidump...</code></li>\n<li>Select a file name</li>\n<li>Let the customer send you the dump so that you can analyze it.</li>\n</ol>\n\n<p>With a dump, you can't do anything wrong and even weeks later, it can still be analyzed, which you can't in case of transient data just displayed by Process Explorer for a moment.</p>\n\n<h2>WinDbg</h2>\n\n<p>You can do it in WinDbg like this:</p>\n\n<ol>\n<li>open the executable in question but <strong>as a dump file</strong></li>\n<li><code>.symfix</code></li>\n<li><code>.sympath+ &lt;your PDB path&gt;</code></li>\n<li><code>.reload</code></li>\n<li><code>ln myexe.exe+0x1b5773</code></li>\n</ol>\n"}], "owner": {"reputation": 618, "user_id": 409528, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2516fba3b430779c2a16c38df5b68a0?s=128&d=identicon&r=PG", "display_name": "nobs", "link": "https://stackoverflow.com/users/409528/nobs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 32871542, "answer_count": 1, "score": 1, "last_activity_date": 1443631840, "creation_date": 1443629354, "question_id": 32870882, "link": "https://stackoverflow.com/questions/32870882/getting-from-memory-address-to-function-in-source", "title": "Getting from memory address to function in source", "body": "<p>with the tool Process Explorer I know that my process hangs at a special function\nmyexe.exe+0x1b5773</p>\n\n<p>is there a way to get to the exact function if I have the pdb available?\nOr must there be a .map file for this information?</p>\n\n<p>I know I can attach to the exe with a debugger, but this is now always a option if the problem occures on a not developer machine..</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1443629004, "post_id": 32870732, "comment_id": 53573233, "body": "Welcome to Stack Overflow! Please <b><a href=\"https://stackoverflow.com/posts/32870732/edit\">edit</a></b> your question with an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> or <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE (Short, Self Contained, Correct Example)</a>.  Also what line is line 243?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1443629186, "post_id": 32870732, "comment_id": 53573328, "body": "Also calling <code>main()</code> in your program is illegal. C++14 3.6.1(3) <code>The function main shall not be used within a program.</code>"}, {"owner": {"reputation": 1, "user_id": 5393946, "user_type": "registered", "profile_image": "https://graph.facebook.com/1207271159290424/picture?type=large", "display_name": "Roland Joseph Hernando", "link": "https://stackoverflow.com/users/5393946/roland-joseph-hernando"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1443629819, "post_id": 32870732, "comment_id": 53573737, "body": "I&#39;m so sorry, I am rushing and I put too many details. And this is line 243  \twhile(inventory&gt;&gt;rec.prodtype&gt;&gt;rec.menutype&gt;&gt;rec.prodnum"}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1443629468, "post_id": 32870845, "comment_id": 53573504, "body": "They do have <code>ifstream student(&quot;record.txt&quot;);</code> so it could be a copy and paste error."}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1443629515, "post_id": 32870845, "comment_id": 53573531, "body": "@NathanOliver Yup that does indeed look like the issue"}, {"owner": {"reputation": 1, "user_id": 5393946, "user_type": "registered", "profile_image": "https://graph.facebook.com/1207271159290424/picture?type=large", "display_name": "Roland Joseph Hernando", "link": "https://stackoverflow.com/users/5393946/roland-joseph-hernando"}, "edited": false, "score": 0, "creation_date": 1443630350, "post_id": 32870845, "comment_id": 53574077, "body": "Is there a format in copy-pasting a code to be retrieved in the compiler?"}], "tags": [], "owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "is_accepted": false, "score": 1, "last_activity_date": 1443629247, "creation_date": 1443629247, "answer_id": 32870845, "question_id": 32870732, "link": "https://stackoverflow.com/questions/32870732/how-to-fix-an-expected-primary-expression-error/32870845#32870845", "title": "How to fix an &quot;expected primary-expression&quot; error", "body": "<p>In <code>find_name()</code> function:</p>\n\n<pre><code>while(inventory&gt;&gt;rec.prodtype&gt;&gt;rec.menutype&gt;&gt;rec.prodnum\n           &gt;&gt;rec.prodname&gt;&gt;rec.prodprice&gt;&gt;rec.quantity)\n</code></pre>\n\n<p>You dont declare what <code>inventory</code> is in this function. Did you mean to open a file in a variable called <code>inventory</code> like you did in the other functions?</p>\n\n<p>The reason the compiler is giving weird errors is you declared a type called <code>inventory</code> and so not seeing a local variable called inventory it assumes you're using the type which makes no sense in the context of the above line and the compiler gets confused and gives a fairly obscure error.</p>\n"}], "owner": {"reputation": 1, "user_id": 5393946, "user_type": "registered", "profile_image": "https://graph.facebook.com/1207271159290424/picture?type=large", "display_name": "Roland Joseph Hernando", "link": "https://stackoverflow.com/users/5393946/roland-joseph-hernando"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1443630010, "creation_date": 1443628927, "last_edit_date": 1443630010, "question_id": 32870732, "link": "https://stackoverflow.com/questions/32870732/how-to-fix-an-expected-primary-expression-error", "title": "How to fix an &quot;expected primary-expression&quot; error", "body": "<p>I'm working on a project in our programming class which requires me to make an inventory system. There is an error in the code in line 243 that gives weird errors when I compile it.</p>\n\n<p>Line 243 beneath in the code is</p>\n\n<p>while(inventory>>rec.prodtype>>rec.menutype>>rec.prodnum</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;windows.h&gt;\n#include&lt;string&gt;\n#include&lt;fstream&gt;\n#include&lt;conio.h&gt;\n#include&lt;stdlib.h&gt;\nusing namespace std;\nHANDLE console = GetStdHandle(STD_OUTPUT_HANDLE);\nCOORD CursorPosition;\n\nvoid gotoXY(int x, int y);\nvoid add();\nvoid view();\nvoid menu();\nvoid types();\nvoid input();\nvoid stock();\nvoid find_name();\nvoid find_number();\nvoid find_type();\nvoid find_mtype();\nvoid all();\nvoid output();\n\nstruct inventory{\n    string prodtype,menutype;\n    string prodnum,prodname;\n    int quantity;\n    float prodprice;\n}rec;\n\nint main()\n{\n    int x=1,y=1; //for gotoXY\n    char l; //choice to determine add/view\n    system(\"cls\");\n    cout&lt;&lt;\"\\n\\n\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\";\n    cout&lt;&lt;\"\\t\\t\\t\\t  INVENTORY SYSTEM\\n\";\n    cout&lt;&lt;\"\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\";\n    cout&lt;&lt;\"\\n\\t\\t   ---- [1]  Add new product           ----\"\n        &lt;&lt;\"\\n\\t\\t   ---- [2]  Add stocks to existing products   ----\"\n        &lt;&lt;\"\\n\\t\\t   ---- [3]  View Products         ----\"\n        &lt;&lt;\"\\n\\t\\t   ---- [4]  Exit Program          ----\"\n        &lt;&lt;\"\\n\\n\\t\\t\\t\\t  Enter choice : \";\n    back:\n    l=getch();\n    if(l=='1')\n    add();\n    else if(l=='2')\n    stock();\n    else if(l=='3')\n    view();\n    else if(l=='4')\n    return 0;\n    else\n    goto back;\n}\n\nvoid stock_intro()\n{\n    cout&lt;&lt;\"\\n\\n\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\";\n    cout&lt;&lt;\"\\t\\t\\t\\t   ADDING OF STOCKS\\n\";\n    cout&lt;&lt;\"\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\\n\\n\";\n}\n\nvoid stock()\n{\n    string num; //for inputting prodnum...\n    int x; //for adding stocks\n    string prodtype,menutype;\n    string prodnum,prodname;\n    int quantity;\n    float prodprice;\n    ifstream inventory(\"inventory.txt\");\n    system(\"cls\");\n    stock_intro();\n    cout&lt;&lt;\"\\t\\t\\t     Enter Product Number to add stock:\\n\\n\";\n    cout&lt;&lt;\"\\t\\t\\t     \";\n    cin&gt;&gt;num;\n    while(inventory&gt;&gt;prodtype&gt;&gt;menutype\n          &gt;&gt;prodnum&gt;&gt;prodname&gt;&gt;quantity\n          &gt;&gt;prodprice){\n            system(\"cls\");\n            cout&lt;&lt;\"How many stocks would you like to add?: \";\n            cin&gt;&gt;x;\n            rec.quantity=rec.quantity+x;\n\n          }\n}\n\nvoid types()\n{\n    ofstream inventory(\"inventory.txt\", ios::app);\n    char c;\n    cout&lt;&lt;\"\\n\\n\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\";\n    cout&lt;&lt;\"\\t\\t\\t\\tFOOD AND BEVERAGES\\n\";\n    cout&lt;&lt;\"\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\\n\";\n    cout&lt;&lt;\"\\t\\t\\t\\t [A] SNACKS\\n\\t\\t\\t\\t [B] CANDIES\\n\\t\\t\\t\\t [C] BISCUITS\\n\\t\\t\\t\\t [D] CHOCOLATES\\n\\t\\t\\t\\t [E] CANNED GOODS\\n\\t\\t\\t\\t [F] CONDIMENTS\\n\\t\\t\\t\\t [G] INSTANT NOODLES\\n\\t\\t\\t\\t [H] BEVERAGE / DRINKS\\n\";\n    cout&lt;&lt;\"\\n\\t\\t\\t\\t Enter Choice: \";\n    back:\n    c=getch();\n    c=toupper(c);\n    if(c=='A')\n    rec.menutype=\"SNACKS\";\n    else if(c=='B')\n    rec.menutype=\"CANDIES\";\n    else if(c=='C')\n    rec.menutype=\"BISCUITS\";\n    else if(c=='D')\n    rec.menutype=\"CHOCOLATES\";\n    else if(c=='E')\n    rec.menutype=\"CANNED GOODS\";\n    else if(c=='F')\n    rec.menutype=\"CONDIMENTS\";\n    else if(c=='G')\n    rec.menutype=\"INSTANT NOODLES\";\n    else if(c=='H')\n    rec.menutype=\"BEVERAGE / DRINKS\";\n    else\n    goto back;\n    inventory&lt;&lt;rec.menutype;\n}\n\nvoid input()\n{\n    system(\"cls\");\n    cout&lt;&lt;\"\\n\\n\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\";\n    cout&lt;&lt;\"\\t\\t\\t\\tADDING OF PRODUCTS\\n\";\n    cout&lt;&lt;\"\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\\n\\n\";\n    ofstream inventory(\"inventory.txt\", ios::app);\n    cout&lt;&lt;\"\\t\\t\\tEnter Product number: \";\n    cin&gt;&gt;rec.prodnum;\n    cout&lt;&lt;\"\\t\\t\\tEnter Product name: \";\n    cin&gt;&gt;rec.prodname;\n    cout&lt;&lt;\"\\t\\t\\tEnter Product price: \";\n    cin&gt;&gt;rec.prodprice;\n    cout&lt;&lt;\"\\t\\t\\tEnter Quantity: \";\n    cin&gt;&gt;rec.quantity;\n    inventory&lt;&lt;endl\n             &lt;&lt;rec.prodnum&lt;&lt;endl\n             &lt;&lt;rec.prodname&lt;&lt;endl\n             &lt;&lt;rec.prodprice&lt;&lt;endl\n             &lt;&lt;rec.quantity&lt;&lt;endl&lt;&lt;endl;\n}\n\nvoid add()\n{\n    char c,d; //for choosing food or hygene\n    char e; //for choosing if add another of not\n    back2:\n    system(\"cls\");\n    cout&lt;&lt;\"\\n\\n\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\";\n    cout&lt;&lt;\"\\t\\t\\t\\t     ADD PRODUCTS\\n\";\n    cout&lt;&lt;\"\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\";\n    ofstream inventory (\"inventory.txt\", ios::app);\n    cout&lt;&lt;\"\\n\\n\\t\\t\\t\\t[A] FOOD and BEVERAGES\\n\\t\\t\\t\\t[B] HYGIENE\";\n    cout&lt;&lt;\"\\n\\n\\t\\t\\t\\tEnter Choice: \";\n    back1:\n    c=getch();\n    d=toupper(c);\n    if(d=='A')\n    rec.prodtype=\"Food &amp; Beverages\";\n    else if(d=='B')\n    rec.prodtype=\"Hygiene\";\n    else\n    goto back1;\n    system(\"cls\");\n    inventory&lt;&lt;rec.prodtype&lt;&lt;endl;\n    types();\n    input();\n    cout&lt;&lt;\"\\n\\t\\t\\tEnter another product? [Y / N]: \";\n    back3:\n    e=getch();\n    e=toupper(e);\n    if(e=='Y')\n    goto back2;\n    else if(e=='N')\n    main();\n    else\n    goto back3;\n}\n\nvoid output()\n{\n    cout&lt;&lt;\"Product Type: \"\n        &lt;&lt;rec.prodtype&lt;&lt;endl;\n    cout&lt;&lt;\"Menu Type : \"\n        &lt;&lt;rec.menutype&lt;&lt;endl;\n    cout&lt;&lt;\" Product Number: \"\n        &lt;&lt;rec.prodnum&lt;&lt;endl;\n    cout&lt;&lt;\" Product Name: \"\n        &lt;&lt;rec.prodname&lt;&lt;endl;\n    cout&lt;&lt;\" Product Price: \"\n        &lt;&lt;rec.prodprice&lt;&lt;endl;\n    cout&lt;&lt;\" Stocks Available: \"\n        &lt;&lt;rec.quantity&lt;&lt;endl;\n}\n\nvoid view_intro()\n{\n    system(\"cls\");\n    cout&lt;&lt;\"\\n\\n\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\";\n    cout&lt;&lt;\"\\t\\t\\t\\tVIEWING OF INVENTORY\\n\";\n    cout&lt;&lt;\"\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\u00cd\\n\";\n}\n\nvoid view()\n{\n    char ch;\n    system(\"cls\");\n    view_intro();\n    cout&lt;&lt;\"\\n\\t\\t        ---- [1]  Find by Product Name   ----\"\n        &lt;&lt;\"\\n\\t\\t        ---- [2]  Find by Product Number  ----\"\n        &lt;&lt;\"\\n\\t\\t        ---- [3]  Find by Product Type   ----\"\n        &lt;&lt;\"\\n\\t\\t        ---- [4]  Find by Menu Type      ----\"\n        &lt;&lt;\"\\n\\t\\t        ---- [5]  Display all Records     ----\"\n        &lt;&lt;\"\\n\\n\\t\\t\\t\\t  Enter choice : \";\n    back:\n    ch=getch();\n    ch=getch();\n    switch(ch)\n    {\n        case '1': find_name();break;\n        case '2': find_number();break;\n        case '3': find_type();break;\n        case '4': find_mtype();break;\n        case '5': all();break;\n        default: goto back;\n    }\n}\n\nvoid find_name()\n{\n    string name;\n    int v=0;\n    system(\"cls\");\n    view_intro();\n    ifstream student(\"record.txt\");\n    cout&lt;&lt;\"\\n Enter Product Name [incorrect capitalization is invalid]: \";\n    cin&gt;&gt;name;\n    system(\"cls\");\n    view_intro();\n    while(inventory&gt;&gt;rec.prodtype&gt;&gt;rec.menutype&gt;&gt;rec.prodnum\n           &gt;&gt;rec.prodname&gt;&gt;rec.prodprice&gt;&gt;rec.quantity)\n    {\n        back:\n    while(name==rec.prodname)\n    {\n        output();\n        break;\n        }\n        v++;\n        if(v&lt;1)\n        {   \n        goto back;  \n        }\n}\n        system(\"pause\");\n        main();\n}\n\nvoid gotoXY(int x, int y) \n{ \nCursorPosition.X = x;\nCursorPosition.Y = y;\nSetConsoleCursorPosition(console,CursorPosition);\n}\n</code></pre>\n"}, {"tags": ["c++", "dll", "unreal-engine4", ".lib", "gdcm"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 5393522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f7d0a7869c3bc28671de3004cff00a6?s=128&d=identicon&r=PG&f=1", "display_name": "MelD", "link": "https://stackoverflow.com/users/5393522/meld"}, "is_accepted": true, "score": 1, "last_activity_date": 1444288402, "creation_date": 1444288402, "answer_id": 33009010, "question_id": 32870692, "link": "https://stackoverflow.com/questions/32870692/using-gdcm-libs-in-ue4/33009010#33009010", "title": "Using gdcm libs in UE4", "body": "<p>Now I got the solution:</p>\n\n<ul>\n<li>In my VolumeImport.Build.cs I additionally added the DLLs:\nPublicDelayLoadDLLs.Add(Path.Combine(LibrariesPath, \"gdcmMSFF.dll\")); ...</li>\n<li>I changed the gdcmMediaStorage.h file: Comment out the \"using namespace gdcm;\"</li>\n<li>Furthermore I had dynamic_cast problems with this big library and it needs to enable RTTI</li>\n</ul>\n"}], "owner": {"reputation": 31, "user_id": 5393522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f7d0a7869c3bc28671de3004cff00a6?s=128&d=identicon&r=PG&f=1", "display_name": "MelD", "link": "https://stackoverflow.com/users/5393522/meld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 0, "accepted_answer_id": 33009010, "answer_count": 1, "score": 1, "last_activity_date": 1444288402, "creation_date": 1443628791, "question_id": 32870692, "link": "https://stackoverflow.com/questions/32870692/using-gdcm-libs-in-ue4", "title": "Using gdcm libs in UE4", "body": "<p>For my UE4 project I want to use the GDCM libraries for C++ to load CT Scans. So I really tried a lot the last few days but I'm still not able to use GDCM... But where is the error? Can someone help me?</p>\n\n<ul>\n<li>I created the dll and lib files with CMake (VS 2013 Win64) successfully. </li>\n<li>I put all the libs in ...Unreal Projects\\VolumeImport\\ThirdParty\\Includes\\GDCM\\Libraries</li>\n<li>I added each of the 16 libs in the VolumeImport.Build.cs with \n    PublicAdditionalLibraries.Add(Path.Combine(LibrariesPath, \"gdcmMSFF.lib\")); \n    PublicAdditionalLibraries.Add(Path.Combine(LibrariesPath, \"gdcmCommon.lib\")); ...</li>\n<li>I put all the header files in Unreal Projects\\VolumeImport\\ThirdParty\\Includes\\GDCM\\Includes</li>\n<li>I set the Includepath to this location in the project properties.</li>\n<li>I put all the dlls in C:\\Windows\\System32</li>\n</ul>\n\n<p>Then I used the headers:</p>\n\n<pre><code>#include \"VolumeImport.h\"\n\n#include &lt;gdcmVersion.h&gt;\n#include &lt;gdcmReader.h&gt;\n#include &lt;gdcmPixmapReader.h&gt;\n#include &lt;gdcmImageReader.h&gt;\n#include &lt;gdcmAttributes.h&gt;\n\nbool CTFileLoader::Convert_DICOM()\n{\n    /** ... other well working code ... */\n\n    gdcm::Trace::SetDebug(false); gdcm::Trace::SetError(true);\n\n    gdcm::ImageReader reader;\n    reader.SetFilename(files_to_process[i].c_str()); \n    if(!reader.Read()) { }\n\n}   \n</code></pre>\n\n<p>And I get an error in the gdcmMediaStorage.h: \"error C4515: 'gdcm': Namespace uses itself.\" </p>\n\n<p>I tried using different includes but this causes diffrent errors in diffrent headers... Is there something wrong with the libraries? But I'm sure they were added, because using only the gdcmTrace.h and the gdcm::Trace::functions works fine. </p>\n"}, {"tags": ["c++", "linker", "cmake"], "comments": [{"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 0, "creation_date": 1443629012, "post_id": 32870624, "comment_id": 53573237, "body": "Some compilers, such as Microsoft-VC have a <code>#pragma</code> that allows you to specify compiler and linker options in the source code. Boost uses this to automatically select the correct shared library depending on compiler macros."}, {"owner": {"reputation": 1106, "user_id": 4524939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/235aae38c41c64d0a18b847b1b61a049?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor Tak&#225;cs", "link": "https://stackoverflow.com/users/4524939/tibor-tak%c3%a1cs"}, "reply_to_user": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 0, "creation_date": 1443629078, "post_id": 32870624, "comment_id": 53573269, "body": "We are working with GCC under linux and do not use #pragma :("}], "answers": [{"comments": [{"owner": {"reputation": 1106, "user_id": 4524939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/235aae38c41c64d0a18b847b1b61a049?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor Tak&#225;cs", "link": "https://stackoverflow.com/users/4524939/tibor-tak%c3%a1cs"}, "edited": false, "score": 1, "creation_date": 1443629002, "post_id": 32870699, "comment_id": 53573229, "body": "I am creating also a shared library. Is this a cause?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1106, "user_id": 4524939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/235aae38c41c64d0a18b847b1b61a049?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor Tak&#225;cs", "link": "https://stackoverflow.com/users/4524939/tibor-tak%c3%a1cs"}, "edited": false, "score": 0, "creation_date": 1443629632, "post_id": 32870699, "comment_id": 53573613, "body": "@TiborTak&#225;cs: Yes. That&#39;s a crucial detail that should have been in the question from the start. As it stands, the original final paragraph of my answer is what you&#39;re looking for."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 2, "last_activity_date": 1443628805, "creation_date": 1443628805, "answer_id": 32870699, "question_id": 32870624, "link": "https://stackoverflow.com/questions/32870624/linking-a-shared-object-into-other-shared-object-c-project/32870699#32870699", "title": "Linking a shared object into other shared object C++ project", "body": "<blockquote>\n  <p>My experience is (which surprised me) that is work properly (i.e. the whole building process finished).</p>\n</blockquote>\n\n<p>That seems unlikely.</p>\n\n<p>In fact&hellip;</p>\n\n<blockquote>\n  <p>How can it possible?</p>\n</blockquote>\n\n<p>It's not.</p>\n\n<p>The only explanation is that you <em>weren't</em> using symbols defined inside those library files. They were either in header-only parts of the third-party code, or they weren't part of the third-party code at all.</p>\n\n<p>Or you were building a shared library of your own. The ultimate executable would still need the third-party libraries linked in, though.</p>\n"}, {"comments": [{"owner": {"reputation": 1106, "user_id": 4524939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/235aae38c41c64d0a18b847b1b61a049?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor Tak&#225;cs", "link": "https://stackoverflow.com/users/4524939/tibor-tak%c3%a1cs"}, "edited": false, "score": 0, "creation_date": 1443629641, "post_id": 32870840, "comment_id": 53573621, "body": "This means that in the executable it have to be linked both my shared object and the shared object which is used in my shared object? Instead my shared object can not find the body of the used symbol."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1106, "user_id": 4524939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/235aae38c41c64d0a18b847b1b61a049?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor Tak&#225;cs", "link": "https://stackoverflow.com/users/4524939/tibor-tak%c3%a1cs"}, "edited": false, "score": 0, "creation_date": 1443629664, "post_id": 32870840, "comment_id": 53573641, "body": "@TiborTak&#225;cs: Yes. Your shared object isn&#39;t <i>trying</i> to find the symbols in the other shared object. That all gets resolved when you build an actual executable."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 1106, "user_id": 4524939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/235aae38c41c64d0a18b847b1b61a049?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor Tak&#225;cs", "link": "https://stackoverflow.com/users/4524939/tibor-tak%c3%a1cs"}, "edited": false, "score": 0, "creation_date": 1443630124, "post_id": 32870840, "comment_id": 53573938, "body": "@TiborTak&#225;cs: If the first SO links in the second SO, it will add a <code>NEEDED</code> entry in the first SO header, so that when the exe links to the first SO, the second SO will be linked in automatically. But if you link the first SO without the second SO, then the exe will need to link to both  or else it will fail."}], "tags": [], "owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "is_accepted": true, "score": 3, "last_activity_date": 1443629232, "creation_date": 1443629232, "answer_id": 32870840, "question_id": 32870624, "link": "https://stackoverflow.com/questions/32870624/linking-a-shared-object-into-other-shared-object-c-project/32870840#32870840", "title": "Linking a shared object into other shared object C++ project", "body": "<p>In POSIX shared libraries, you can have undefined symbols in a shared library, and all will link just fine. As long as the executable is fully linked, there will be no linker errors.</p>\n\n<p>That's done this way because dynamic libraries mimic the behaviour of static libraries, and static libraries can have undefined symbols (static libraries are not linked, to begin with).</p>\n\n<p>If you come from a Windows background, then it will surprise you, because Windows DLLs cannot have undefined symbols.</p>\n\n<p>If you are worried about this, you can check the linker options <code>--no-undefined</code> and <code>--no-allow-shlib-undefined</code>.</p>\n"}], "owner": {"reputation": 1106, "user_id": 4524939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/235aae38c41c64d0a18b847b1b61a049?s=128&d=identicon&r=PG&f=1", "display_name": "Tibor Tak&#225;cs", "link": "https://stackoverflow.com/users/4524939/tibor-tak%c3%a1cs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 32870840, "answer_count": 2, "score": 0, "last_activity_date": 1443629232, "creation_date": 1443628597, "last_edit_date": 1443629025, "question_id": 32870624, "link": "https://stackoverflow.com/questions/32870624/linking-a-shared-object-into-other-shared-object-c-project", "title": "Linking a shared object into other shared object C++ project", "body": "<p>I am working in a very big C++ project to create a big shared object where we are using an external SDK which have several header files and several shared libraries which belong to each other. This means that the declaration of SDK classes are in the header files but their definitions are in the shared objects.</p>\n\n<p>I understand that because of the declarations in header files I can compile this code.</p>\n\n<p>But what I do not understand exactly is <strong>when do I have to specify the used shared objects for the linker explicitly?</strong></p>\n\n<p>Namely if I specify it (e.g. in cmake with <em>target_link_libraries</em> command) then the linker can check that a symbol will be in the shared library or not. But what happens if I do not specify it (i.e. there is not any -l[shared_object_name] flags in linkage)? My experience is (which surprised me) that is work properly (i.e. the whole building process finished). How can it possible?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 4, "creation_date": 1443628727, "post_id": 32870622, "comment_id": 53573053, "body": "So you fully read a previous Q&amp;A asking whether it&#39;s possible to replace a method ......... then you asked the exact same question again?"}, {"owner": {"reputation": 31685, "user_id": 277826, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/243fa25a38ec7aad2b0dcdb79276602d?s=128&d=identicon&r=PG", "display_name": "sdaau", "link": "https://stackoverflow.com/users/277826/sdaau"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1443628943, "post_id": 32870622, "comment_id": 53573187, "body": "@LightnessRacesinOrbit - well, yes; as one, I&#39;m not sure whether the &quot;runtime&quot; qualifier applies here (I&#39;d like to make a &quot;patch&quot; once at start, and not change it dynamically, maybe there are relaxed criteria for that?); secondly, if polymorphism is the answer, I don&#39;t really have an idea how I would go about extending only <code>MyBase</code>, without having to also extend <code>A1</code>, <code>A2</code> and the whole inheritance chain - which is what I&#39;d like to avoid, and the main reason for my question."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1443629019, "post_id": 32870622, "comment_id": 53573240, "body": "Well the long and short of it is that you can&#39;t. Get the library author to fix the bug, and build your own forked and fixed version of it in the meantime."}, {"owner": {"reputation": 31685, "user_id": 277826, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/243fa25a38ec7aad2b0dcdb79276602d?s=128&d=identicon&r=PG", "display_name": "sdaau", "link": "https://stackoverflow.com/users/277826/sdaau"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1443629053, "post_id": 32870622, "comment_id": 53573254, "body": "Thanks for that @LightnessRacesinOrbit - feel free to post that as an answer, I&#39;ll accept it. Cheers!"}], "answers": [{"comments": [{"owner": {"reputation": 31685, "user_id": 277826, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/243fa25a38ec7aad2b0dcdb79276602d?s=128&d=identicon&r=PG", "display_name": "sdaau", "link": "https://stackoverflow.com/users/277826/sdaau"}, "edited": false, "score": 1, "creation_date": 1443629233, "post_id": 32870781, "comment_id": 53573353, "body": "Thanks for that, @AndreyNasonov - but then the <code>A1</code>, <code>A2</code> classes still wouldn&#39;t know about  <code>MyBaseAdaptor</code>, unless I recode them too, so they inherit from <code>MyBaseAdaptor</code>; is that correct?"}, {"owner": {"reputation": 2487, "user_id": 5380314, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8924d6d1c2470b1d7c8190dc37ef517c?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Nasonov", "link": "https://stackoverflow.com/users/5380314/andrey-nasonov"}, "reply_to_user": {"reputation": 31685, "user_id": 277826, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/243fa25a38ec7aad2b0dcdb79276602d?s=128&d=identicon&r=PG", "display_name": "sdaau", "link": "https://stackoverflow.com/users/277826/sdaau"}, "edited": false, "score": 1, "creation_date": 1443629301, "post_id": 32870781, "comment_id": 53573399, "body": "Yes, <code>class A1 : public MyBaseAdaptor</code>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1443629531, "post_id": 32870781, "comment_id": 53573542, "body": "@AndreyNasonov: The OP is pointing out, quite correctly, that he&#39;d have to do this for <i>each and every class in the inheritance tree</i>, which is not desired. You have not answered the question per the given constraints."}], "tags": [], "owner": {"reputation": 2487, "user_id": 5380314, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8924d6d1c2470b1d7c8190dc37ef517c?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Nasonov", "link": "https://stackoverflow.com/users/5380314/andrey-nasonov"}, "is_accepted": false, "score": 0, "last_activity_date": 1443629062, "creation_date": 1443629062, "answer_id": 32870781, "question_id": 32870622, "link": "https://stackoverflow.com/questions/32870622/replacing-a-c-base-class-method/32870781#32870781", "title": "Replacing a C++ base class method?", "body": "<p>I'd like to suggest you to create an adapter class and use it as the base class for <code>A</code> and <code>B</code></p>\n\n<pre><code>class MyBaseAdaptor: public MyBase\n{\n    using MyBase::MyBase; // Inherit constructors\n\npublic:\n    int getBaseVal(int inval)  // Hide the old method\n    {\n        // your code here\n    }\n};\n</code></pre>\n\n<p>But it is better to fix the library.</p>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 4, "last_activity_date": 1443629577, "creation_date": 1443629577, "answer_id": 32870962, "question_id": 32870622, "link": "https://stackoverflow.com/questions/32870622/replacing-a-c-base-class-method/32870962#32870962", "title": "Replacing a C++ base class method?", "body": "<p>The long and short of it is that you can't; at least, not within the given constraints (which rule out various sub-optimal hacks, such as Andrey's!).</p>\n\n<p>Get the library author to fix the bug, and build your own forked and fixed version of it in the meantime.</p>\n"}], "owner": {"reputation": 31685, "user_id": 277826, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/243fa25a38ec7aad2b0dcdb79276602d?s=128&d=identicon&r=PG", "display_name": "sdaau", "link": "https://stackoverflow.com/users/277826/sdaau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 32870962, "answer_count": 2, "score": 1, "last_activity_date": 1443631116, "creation_date": 1443628596, "last_edit_date": 1495540703, "question_id": 32870622, "link": "https://stackoverflow.com/questions/32870622/replacing-a-c-base-class-method", "title": "Replacing a C++ base class method?", "body": "<p>I have seen <a href=\"https://stackoverflow.com/questions/29645454/is-it-possible-to-replace-a-method-at-runtime-in-c-c\">Is it possible to replace a method at runtime in C/C++?</a>, but I am something of a C++ newbie, and so cannot yet see how (and if) it applies to my case, so I'd like to try asking with my example.</p>\n\n<p>In the example below, assume classes <code>MyBase</code>, <code>A1</code>, and <code>A2</code>, come from some library, and I'm using them in my <code>main</code>:</p>\n\n<pre><code>// g++ -std=c++11 -o test.exe test.cpp\n\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass MyBase {\npublic:\n  MyBase() { }\n  ~MyBase() { }\n  int getBaseVal(int inval) {\n    return inval + 5;\n  }\n};\n\nclass A1 : public MyBase {\npublic:\n  A1() : MyBase() { }\n  ~A1() { }\n  int getVal(int inval) {\n    return getBaseVal(inval) + 10;\n  }\n};\n\nclass A2 : public A1 {\npublic:\n  A2() : A1() { }\n  ~A2() { }\n  int getVal(int inval) {\n    return getBaseVal(inval) + 20;\n  }\n};\n\n\nint main() {\n  A1 _a1 = A1(); A2 _a2 = A2();\n  cout &lt;&lt; \"A1 for 10: \" &lt;&lt; _a1.getVal(10) &lt;&lt; endl;\n  cout &lt;&lt; \"A2 for 10: \" &lt;&lt; _a2.getVal(10) &lt;&lt; endl;\n  return 0;\n}\n</code></pre>\n\n<p>Now, let's say I would like to leave this library untouched, but I've discovered a bug in <code>MyBase::getBaseVal</code>, in that the right value returned should be <code>inval + 6;</code> instead of the given <code>inval + 5;</code>. So, nothing complicated, but access to the input arguments of the method is needed.</p>\n\n<p>So do I have an option, to define a new function, say:</p>\n\n<pre><code>int getNewBaseVal(int inval) {\n  return inval + 6;\n}\n</code></pre>\n\n<p>.. and then somehow \"replace\" the old <code>MyBase::getBaseVal</code>:</p>\n\n<ul>\n<li>On a class level (that is, <code>MyBase</code> would be \"patched\"), such that all subsequent instantiations of <code>A1</code> and <code>A2</code> will ultimately use the <code>getNewBaseVal</code> when their <code>getVal</code>s are called;</li>\n<li>On an object level, such that only a particular instantiation of, say, <code>A1</code> as object (like <code>_a1</code>) would ultimately use the <code>getNewBaseVal</code> when its <code>getVal</code> is called;</li>\n</ul>\n\n<p>... by writing some code at the start of the <code>main</code> function?</p>\n"}, {"tags": ["c++", "c++11", "boost", "enums"], "answers": [{"comments": [{"owner": {"reputation": 3874, "user_id": 1930508, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f709ca5b37805423d076b4e3f103f67?s=128&d=identicon&r=PG", "display_name": "Flamefire", "link": "https://stackoverflow.com/users/1930508/flamefire"}, "edited": false, "score": 0, "creation_date": 1443647230, "post_id": 32874135, "comment_id": 53582637, "body": "I&#39;m trying to implement a workaround for a known boost bug in versions that are common among the regular package-manager installation. So I don&#39;t have a choice in this case."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 3874, "user_id": 1930508, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f709ca5b37805423d076b4e3f103f67?s=128&d=identicon&r=PG", "display_name": "Flamefire", "link": "https://stackoverflow.com/users/1930508/flamefire"}, "edited": false, "score": 0, "creation_date": 1443649540, "post_id": 32874135, "comment_id": 53583610, "body": "You could choose to not use the package manager version... That&#39;s a choice"}, {"owner": {"reputation": 3874, "user_id": 1930508, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f709ca5b37805423d076b4e3f103f67?s=128&d=identicon&r=PG", "display_name": "Flamefire", "link": "https://stackoverflow.com/users/1930508/flamefire"}, "edited": false, "score": 0, "creation_date": 1443689568, "post_id": 32874135, "comment_id": 53596871, "body": "Sure. But this is used in super-computing environments. It is often not a viable choice for the users to install and compile an own boost version but they have to use, what is provided."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 0, "last_activity_date": 1443641238, "creation_date": 1443641238, "answer_id": 32874135, "question_id": 32870467, "link": "https://stackoverflow.com/questions/32870467/access-to-different-struct-with-same-name/32874135#32874135", "title": "Access to different struct with same name", "body": "<p>I think you should just write portable code. </p>\n\n<p>Conditionally compiling \"competing\" variants of the code only solicits <a href=\"http://en.cppreference.com/w/cpp/language/definition\" rel=\"nofollow\">ODR violations</a> and spurious ABI incompatibility issues.</p>\n"}], "owner": {"reputation": 3874, "user_id": 1930508, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f709ca5b37805423d076b4e3f103f67?s=128&d=identicon&r=PG", "display_name": "Flamefire", "link": "https://stackoverflow.com/users/1930508/flamefire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443641238, "creation_date": 1443628108, "question_id": 32870467, "link": "https://stackoverflow.com/questions/32870467/access-to-different-struct-with-same-name", "title": "Access to different struct with same name", "body": "<p>I'm trying to implement a workaround for boost versions that cause problems with scoped enums on linking in C++11 mode: See <a href=\"https://svn.boost.org/trac/boost/ticket/6779\" rel=\"nofollow\">https://svn.boost.org/trac/boost/ticket/6779</a> and <a href=\"https://svn.boost.org/trac/boost/ticket/10038\" rel=\"nofollow\">https://svn.boost.org/trac/boost/ticket/10038</a></p>\n\n<p>The problem is simply: Most pre-distributed boost libs expose (namespaces stripped):<br>\n<code>detail::copy_file(path const&amp;, path const&amp;, copy_option::enum_type, error_code*)</code><br>\nBut C++11 compilation tries to find:<br>\n<code>detail::copy_file(path const&amp;, path const&amp;, copy_option, error_code*)</code><br>\ndue to the fact, that C++98 boost uses emulated scoped enums, instead of the C++11 ones.</p>\n\n<p>I though I might be able to write an adapter for that put it into an own object file and link that into the program, but I failed with my naive approach:</p>\n\n<pre><code>#define copy_option native_copy_option__\n#include &lt;boost/filesystem/operations.hpp&gt;\n#undef copy_option\n\nnamespace boost {\nnamespace filesystem {\n\n    struct copy_option{\n        enum enum_type{none, fail_if_exists = none, overwrite_if_exists};\n    };\n\nnamespace detail {\n\n    void copy_file(const path&amp; from, const path&amp; to, copy_option::enum_type option, system::error_code* ec=0);\n\n    using copy_option = native_copy_option__;\n    void copy_file(const path&amp; from, const path&amp; to, copy_option option, system::error_code* ec)\n    {\n        copy_file(from, to, static_cast&lt;boost::filesystem::copy_option::enum_type&gt;(option), ec);\n    }\n\n}  // namespace detail\n}  // namespace filesystem\n}  // namespace boost\n</code></pre>\n\n<p>The problem is: I need to define a function with the C++11 enum in the signature but also declare a function with the C++98 enum which has the same name.</p>\n\n<p>Is this somehow possible?</p>\n"}, {"tags": ["c++", "quicksort"], "comments": [{"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "edited": false, "score": 0, "creation_date": 1443628151, "post_id": 32870437, "comment_id": 53572620, "body": "Any particular reason not to use <code>std::sort</code>? (e.g., recreational reasons?)"}, {"owner": {"reputation": 6529, "user_id": 4252320, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-_DAs7Dtci9U/AAAAAAAAAAI/AAAAAAAAIf8/96ZNJAUF2Xk/photo.jpg?sz=128", "display_name": "ergonaut", "link": "https://stackoverflow.com/users/4252320/ergonaut"}, "edited": false, "score": 0, "creation_date": 1443628214, "post_id": 32870437, "comment_id": 53572661, "body": "print or debug and see where it&#39;s caught"}, {"owner": {"reputation": 25, "user_id": 4864430, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01597aed0eda03651ac207b68255c4b?s=128&d=identicon&r=PG&f=1", "display_name": "Killedan9", "link": "https://stackoverflow.com/users/4864430/killedan9"}, "edited": false, "score": 0, "creation_date": 1443628442, "post_id": 32870437, "comment_id": 53572841, "body": "Yeah I&#39;m not using std::sort so I can get a feel for how the algorithm works.  I&#39;ve also done a lot of printing test cases to try and find where it&#39;s getting caught up but so far all I could tell was that it was getting caught in an infinite loop."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4864430, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01597aed0eda03651ac207b68255c4b?s=128&d=identicon&r=PG&f=1", "display_name": "Killedan9", "link": "https://stackoverflow.com/users/4864430/killedan9"}, "edited": false, "score": 0, "creation_date": 1443628989, "post_id": 32870654, "comment_id": 53573217, "body": "Could you elaborate? Are you saying that the program will constantly call quickSort(3,6,arr) and that&#39;s whats causing the infinite loop? If this is the case what could I do to prevent this?"}, {"owner": {"reputation": 1627, "user_id": 2893839, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/A1yFr.jpg?s=128&g=1", "display_name": "Lorenzo Belli", "link": "https://stackoverflow.com/users/2893839/lorenzo-belli"}, "reply_to_user": {"reputation": 25, "user_id": 4864430, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01597aed0eda03651ac207b68255c4b?s=128&d=identicon&r=PG&f=1", "display_name": "Killedan9", "link": "https://stackoverflow.com/users/4864430/killedan9"}, "edited": false, "score": 0, "creation_date": 1443629144, "post_id": 32870654, "comment_id": 53573303, "body": "Yes that&#39;s what cause your infinite loop. Not selecting properly the pivot index. <code>getPivot()</code> actually should be named as <code>GetPivotIndex()</code>"}, {"owner": {"reputation": 25, "user_id": 4864430, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01597aed0eda03651ac207b68255c4b?s=128&d=identicon&r=PG&f=1", "display_name": "Killedan9", "link": "https://stackoverflow.com/users/4864430/killedan9"}, "edited": false, "score": 0, "creation_date": 1443629333, "post_id": 32870654, "comment_id": 53573421, "body": "My god... Of course it needed to add the beginning value... That seems to have solved everything. Thank you very much! (excuse me while I bang my head on the wall for missing something so simple)."}], "tags": [], "owner": {"reputation": 1627, "user_id": 2893839, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/A1yFr.jpg?s=128&g=1", "display_name": "Lorenzo Belli", "link": "https://stackoverflow.com/users/2893839/lorenzo-belli"}, "is_accepted": true, "score": 0, "last_activity_date": 1443629039, "last_edit_date": 1443629039, "creation_date": 1443628676, "answer_id": 32870654, "question_id": 32870437, "link": "https://stackoverflow.com/questions/32870437/c-recursive-quicksort-infinite-loop/32870654#32870654", "title": "c++ recursive quicksort infinite loop", "body": "<p><code>quickSort(3,6,arr)</code> will always call <code>quickSort(3,6,arr)</code>.</p>\n\n<p>I think you miss</p>\n\n<pre><code>int getPivot(int begin,int end)\n{\n    //Takes length of array as input and returns the position of the pivot\n    int len = end-begin;\n    if(len &lt; 3){\n        return end;\n    }else{\n        return 2+begin; // Here\n    }\n};\n</code></pre>\n\n<p>EDIT: Clarification</p>\n\n<p><code>GetPivot(3,6)</code> will return 2, instead should return an index between 3 and 6.</p>\n"}, {"tags": [], "owner": {"reputation": 117, "user_id": 3870048, "user_type": "registered", "profile_image": "https://graph.facebook.com/1121094577/picture?type=large", "display_name": "MGM_Squared", "link": "https://stackoverflow.com/users/3870048/mgm-squared"}, "is_accepted": false, "score": 0, "last_activity_date": 1443635026, "creation_date": 1443635026, "answer_id": 32872541, "question_id": 32870437, "link": "https://stackoverflow.com/questions/32870437/c-recursive-quicksort-infinite-loop/32872541#32872541", "title": "c++ recursive quicksort infinite loop", "body": "<p>You could also use the median of three approach for your pivot.  It is a little more robust.  </p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nvoid myswap(int* arr, int left, int right)\n{\n    int swap = arr[left];\n    arr[left] = arr[right];\n    arr[right] = swap;\n}\n\nint getPivotIndex(int* arr, int begin, int end){\n    int middle = (begin + end) / 2;\n\n    if (arr[end] &lt; arr[begin])\n    {\n        myswap(arr, begin, end);\n    }\n\n    if (arr[middle] &lt; arr[begin])\n    {\n        myswap(arr, middle, begin);\n    }\n\n    if (arr[end] &lt; arr[middle])\n    {\n        myswap(arr, end, middle);\n    }\n\n    return middle;\n};\n\n\nvoid quickSort(int begin, int end, int* arr){\n    int pivot = arr[getPivotIndex(arr, begin, end)];\n    int tempLeft = begin, tempRight = end;\n    while (tempLeft &lt;= tempRight){\n        while (arr[tempLeft] &lt; pivot){\n            tempLeft++;\n        }\n        while (arr[tempRight] &gt; pivot){\n            tempRight--;\n        }\n        if (tempLeft &lt;= tempRight){\n            myswap(arr, tempLeft, tempRight);\n            tempLeft++;\n            tempRight--;\n        }\n     }\n    if (begin &lt; tempRight){\n        quickSort(begin, tempRight, arr);\n    }\n    if (tempLeft &lt; end){\n        quickSort(tempLeft, end, arr);\n    }\n}\n\nint main() {\n    int array[] = { 6, 0, 2, 5, 4, 3, 1 }; // Test we are actually sorting\n    int length = 7;\n    quickSort(0, length - 1, array);\n\n    for (int i = 0; i &lt; length; i++)\n    {\n        std::cout &lt;&lt; \"array[\" &lt;&lt; i &lt;&lt; \"]: \" &lt;&lt; array[i] &lt;&lt; endl;\n    }\n    return 0;\n }\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 4864430, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01597aed0eda03651ac207b68255c4b?s=128&d=identicon&r=PG&f=1", "display_name": "Killedan9", "link": "https://stackoverflow.com/users/4864430/killedan9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "accepted_answer_id": 32870654, "answer_count": 2, "score": 0, "last_activity_date": 1443635026, "creation_date": 1443628025, "last_edit_date": 1443628348, "question_id": 32870437, "link": "https://stackoverflow.com/questions/32870437/c-recursive-quicksort-infinite-loop", "title": "c++ recursive quicksort infinite loop", "body": "<p>So I've been having a problem with a c++ program that quicksorts an array of integers. When I have more than six elements in my array, the sort infinitely loops for some reason. I think I've isolated the problem to the choosing of mm pivotal value, but I can't work out for the life of me why it's causing it to break.</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nint getPivot(int begin,int end){//Takes length of array as input and returns the position of the pivot\n    int len = end-begin;\n    if(len &lt; 3){\n        return end;\n    }else{\n        return 2;\n    }\n};\n\nvoid quickSort(int begin, int end, int arr[]){\n    int pivot = arr[getPivot(begin,end)];//get Pivotal value - If I replace this with just 0 then there are no problems...\n    int tempLeft = begin, tempRight = end;\n    int temp;\n    while(tempLeft &lt;= tempRight){\n        while(arr[tempLeft] &lt; pivot){//Find a point where there are 2 elements that need to be swapped\n            tempLeft++;\n        }\n        while(arr[tempRight] &gt; pivot){\n            tempRight--;\n        }\n        if(tempLeft &lt;= tempRight){\n            temp = arr[tempLeft];//Swap the elements\n            arr[tempLeft] = arr[tempRight];\n            arr[tempRight] = temp;\n            tempLeft++;//Skip these swapped elements in the sort\n            tempRight--;\n        }\n    }\n    if (begin &lt; tempRight){//Only recurse lower if the new sub array has a length greater than 1\n        quickSort(begin, tempRight, arr);\n    }\n    if (tempLeft &lt; end){\n        quickSort(tempLeft, end, arr);\n    }\n}\n\nmain() {\n    int array[] = {0,1,2,3,4,5,6};\n    int length = 7;\n    quickSort(0,length-1,array);\n}\n</code></pre>\n\n<p>You will probably ask why I have such a weird way of choosing my pivotal value, but lets just say that for this instance the pivotal value has to be the third element in each sublist or if the sub list is smaller than 3 it is the last item in the sublist.</p>\n\n<p>The reason I think the problem is associated with the pivotal value is because when I replace my method of choosing a pivot with just using the first element in the sublist I don't have any problems.</p>\n\n<p>If run, as is now the program, will segfault after looping infinitely but if the array being sorted is one element shorter, it will work fine. That has had me baffled for hours now, and I can't work out what the problem is. If anyone has any tips or suggestions, they would be greatly appreciated.</p>\n"}, {"tags": ["c++", "opencv", "mat", "rect"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 2, "creation_date": 1443628216, "post_id": 32870430, "comment_id": 53572664, "body": "You just need to correct: <code>Rect region = Rect(x, y, width, heigth);</code>"}, {"owner": {"reputation": 351, "user_id": 4546023, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e87450187ab9e19ed7c05c87c9e6ae10?s=128&d=identicon&r=PG&f=1", "display_name": "Jaime Menendez Llana", "link": "https://stackoverflow.com/users/4546023/jaime-menendez-llana"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1443628463, "post_id": 32870430, "comment_id": 53572856, "body": "Uffff!!! terrible mistake! I imagined it would be obvious... Thanks a lot for the helpness!!"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1443628550, "post_id": 32870430, "comment_id": 53572919, "body": "Glad it helped. I just posted a detailed answer."}, {"owner": {"reputation": 7099, "user_id": 1475548, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/09sbK.jpg?s=128&g=1", "display_name": "Octopus", "link": "https://stackoverflow.com/users/1475548/octopus"}, "edited": false, "score": 0, "creation_date": 1443628566, "post_id": 32870430, "comment_id": 53572925, "body": "Not really relevant to your question, but: since width and height are ints and face.cols and face.rows are ints, wouldn&#39;t it be better to calc width as face.cols / 20, just so its all in the same domain (ints) rather than doing that math with a float (or a double)?"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "reply_to_user": {"reputation": 7099, "user_id": 1475548, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/09sbK.jpg?s=128&g=1", "display_name": "Octopus", "link": "https://stackoverflow.com/users/1475548/octopus"}, "edited": false, "score": 0, "creation_date": 1443628753, "post_id": 32870430, "comment_id": 53573069, "body": "@Octopus since you&#39;re casting to integer the result is  the same, but you&#39;re absolutely correct."}, {"owner": {"reputation": 351, "user_id": 4546023, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e87450187ab9e19ed7c05c87c9e6ae10?s=128&d=identicon&r=PG&f=1", "display_name": "Jaime Menendez Llana", "link": "https://stackoverflow.com/users/4546023/jaime-menendez-llana"}, "edited": false, "score": 0, "creation_date": 1443628760, "post_id": 32870430, "comment_id": 53573074, "body": "Yes, what you say is razonable. I gonna do it. Thanks for the comment!"}], "answers": [{"tags": [], "owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "is_accepted": false, "score": 3, "last_activity_date": 1443628511, "creation_date": 1443628511, "answer_id": 32870595, "question_id": 32870430, "link": "https://stackoverflow.com/questions/32870430/how-to-divide-an-opencv-mat-in-rectangular-sub-regions/32870595#32870595", "title": "How to divide an OpenCV Mat in rectangular sub-regions?", "body": "<p>OpenCV <a href=\"http://docs.opencv.org/modules/core/doc/basic_structures.html#rect\" rel=\"nofollow\">Rect</a> can be constructed as:</p>\n\n<pre><code>Rect(int _x, int _y, int _width, int _height);\n</code></pre>\n\n<p>So you need to change the line in your code as:</p>\n\n<pre><code>Rect region = Rect(x, y, width, heigth);\n</code></pre>\n\n<p>It seems that you instead passed the coordinates of the top left and bottom right corners. If you want to do so, use this other constructor:</p>\n\n<pre><code>Rect(const Point&amp; pt1, const Point&amp; pt2);\n</code></pre>\n\n<p>and you can do like:</p>\n\n<pre><code>Rect region = Rect(Point(x, y), Point(x+width, y+heigth));\n</code></pre>\n"}], "owner": {"reputation": 351, "user_id": 4546023, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e87450187ab9e19ed7c05c87c9e6ae10?s=128&d=identicon&r=PG&f=1", "display_name": "Jaime Menendez Llana", "link": "https://stackoverflow.com/users/4546023/jaime-menendez-llana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1222, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443629153, "creation_date": 1443627994, "last_edit_date": 1443629153, "question_id": 32870430, "link": "https://stackoverflow.com/questions/32870430/how-to-divide-an-opencv-mat-in-rectangular-sub-regions", "title": "How to divide an OpenCV Mat in rectangular sub-regions?", "body": "<p>I want to divide a simple <code>Mat</code> (200x200) in different regions (10x10). \nI make 2 loops, then I create a <code>Rect</code> where I indicate the variables I want in each iteration <code>(x, y, width, height)</code>. Finally, I save this region of the image inside a <code>vector</code> of <code>Mat</code>s. </p>\n\n<p>But something is wrong with my code:</p>\n\n<pre><code>Mat face = Mat(200, 200, CV_8UC1);\nvector&lt;Mat&gt; regions;\nMat region_frame;\nint width = face.cols * 0.05;\nint heigth = face.rows * 0.05;\nfor(int y=0; y&lt;=(face.rows - heigth); y+=heigth)\n{\n    for(int x=0; x&lt;=(face.cols - width); x+=width)\n    {\n        Rect region = Rect(x, y, x+width, y+heigth);\n        region_frame = face(region);\n        regions.push_back(region_frame);            \n    }\n}\n</code></pre>\n\n<p>The problem is just in the final step, it's not working with size of the new <code>region_frame</code> I try to create. It's increasing with each iteration number of cols. </p>\n\n<p>How can I solve this?</p>\n"}, {"tags": ["c++", "c++14"], "comments": [{"owner": {"reputation": 7242, "user_id": 109019, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/266408e128b44b980a953eda085d38a2?s=128&d=identicon&r=PG", "display_name": "Salgar", "link": "https://stackoverflow.com/users/109019/salgar"}, "edited": false, "score": 0, "creation_date": 1443628034, "post_id": 32870390, "comment_id": 53572529, "body": "order of initialization is not obscure, it&#39;s well defined and there is nothing wrong with this code."}, {"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 0, "creation_date": 1443628036, "post_id": 32870390, "comment_id": 53572531, "body": "1) yes order of initialisation is part of the specs, 2) yes - clear documentation might help"}, {"owner": {"reputation": 1627, "user_id": 2893839, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/A1yFr.jpg?s=128&g=1", "display_name": "Lorenzo Belli", "link": "https://stackoverflow.com/users/2893839/lorenzo-belli"}, "edited": false, "score": 0, "creation_date": 1443628148, "post_id": 32870390, "comment_id": 53572613, "body": "I would rely on it only with a good comment explaining. Follow the quote &#39;Always code like your code mantainer is a serial killer who knows where you live&#39;"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4650542"}, "edited": false, "score": 0, "creation_date": 1443774327, "post_id": 32870464, "comment_id": 53634938, "body": "I put it in with some block cap warnings in the header file."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 5, "last_activity_date": 1443628094, "creation_date": 1443628094, "answer_id": 32870464, "question_id": 32870390, "link": "https://stackoverflow.com/questions/32870390/relying-on-order-of-initialisation/32870464#32870464", "title": "Relying on order of initialisation", "body": "<ol>\n<li><p>Is is safe according to the standard.</p></li>\n<li><p>Extremely unsafe. Few folk are aware of this, and someone maintaining your header file might reorder the members with disastrous consequences.</p></li>\n</ol>\n\n<p>I wouldn't rely on it.</p>\n"}, {"tags": [], "owner": {"reputation": 2487, "user_id": 5380314, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8924d6d1c2470b1d7c8190dc37ef517c?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Nasonov", "link": "https://stackoverflow.com/users/5380314/andrey-nasonov"}, "is_accepted": false, "score": 2, "last_activity_date": 1443628662, "creation_date": 1443628662, "answer_id": 32870652, "question_id": 32870390, "link": "https://stackoverflow.com/questions/32870390/relying-on-order-of-initialisation/32870652#32870652", "title": "Relying on order of initialisation", "body": "<p>I'd like to rewrite the code to make the code obvious even to a monkey.</p>\n\n<p>Another potential problem here may occur when the class <code>foo</code> is the base class. The thread will start on non fully constructed object. What will happen if the constructor of the derived class fails? In this case it is better move thread execution out of the constructor to <code>start()</code> method.</p>\n"}, {"tags": [], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": false, "score": 4, "last_activity_date": 1443636186, "last_edit_date": 1495539886, "creation_date": 1443628791, "answer_id": 32870691, "question_id": 32870390, "link": "https://stackoverflow.com/questions/32870390/relying-on-order-of-initialisation/32870691#32870691", "title": "Relying on order of initialisation", "body": "<p>Although <em>by the standard</em> it is safe, I wouldn't go with it.</p>\n\n<p><strong>Anecdote:</strong> I wrote a customized ThreadPool on Windows OS using visual studio 2013. I declared the thread pool global. Of course <em>by the standard</em>, global objects are destructed after main has returned. the thread pool destructor tried to <code>join</code> each thread, but alas! a dead-lock. (you can read about this problem here: <a href=\"https://stackoverflow.com/questions/10915233/stdthreadjoin-hangs-if-called-after-main-exits-when-using-vs2012-rc\">std::thread::join() hangs if called after main() exits when using VS2012 RC</a>). The standard states very clearly that if a thread is joinable, there is no problem joining it, but as you can see, this wasn't perfectly implemented.</p>\n\n<p>Why am I telling you this unrelated issue? Because even compilers and platforms have some bugs. Subtle things may not get implemented 100% correctly at the first few relevant-supporting compiler versions. </p>\n\n<p>This is why I wouldn't go with this idea.\nAs a work-around, I would declare the thread wrapped in <code>std::unique_ptr</code> and initialize it in the constructor body. That way there is no chance it will be initialized before <code>keep_going</code>.</p>\n\n<pre><code>foo(): \n  keep_going{true}\n   { my_thread = std::make_unique&lt;std::thread&gt;(&amp;foo::go,this); }\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4650542"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 32870464, "answer_count": 3, "score": 7, "last_activity_date": 1443636186, "creation_date": 1443627871, "question_id": 32870390, "link": "https://stackoverflow.com/questions/32870390/relying-on-order-of-initialisation", "title": "Relying on order of initialisation", "body": "<p>According to the C++ 14 standard, non-static member variables are initialised in the order they are declared in a class.   The cut down code below relies on this rule to control a thread function.</p>\n\n<pre><code>class foo\n{\n     foo(): \n          keep_going{true},\n          my_thread(&amp;foo::go,this)\n     {}\n\n      void go()\n      {\n          while(keep_going)\n             check a std::condition_variable and do some work;\n      }\n      bool keep_going;\n      std::thread my_thread;\n}\n</code></pre>\n\n<p>Note that <code>keep_going</code> is declared before the thread object and should be set to <code>true</code> by the time the thread enters the go function.  This is fine and seems to work OK.</p>\n\n<p>However, this is multithreaded code and it pays to be paranoid so I have two questions:</p>\n\n<p>1 Is it safe to rely on the order of initialisation like this?  My real object doesn't make sense without the processing thread so I want to set it going in the constructor.</p>\n\n<p>2 Is it unsafe to give code to others when it relies on relatively obscure things like the order of initialisation?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 446, "user_id": 4696442, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/51b527ec57cdb1bf65dd30ed7d192219?s=128&d=identicon&r=PG&f=1", "display_name": "Thufir Hawat", "link": "https://stackoverflow.com/users/4696442/thufir-hawat"}, "edited": false, "score": 0, "creation_date": 1443628077, "post_id": 32870388, "comment_id": 53572563, "body": "Welcome to SO, next time please indicate which programming language you are using, so people who know this language will easily see this question."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1443628220, "post_id": 32870388, "comment_id": 53572666, "body": "You seem to be missing the <code>=</code> sign when declaring arrays. This code won&#39;t compile."}, {"owner": {"reputation": 2341, "user_id": 5198101, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e368f319f68500b32b5fdbe73e27f640?s=128&d=identicon&r=PG&f=1", "display_name": "RaGa__M", "link": "https://stackoverflow.com/users/5198101/raga-m"}, "edited": false, "score": 0, "creation_date": 1443629810, "post_id": 32870388, "comment_id": 53573731, "body": "Is there any problem passing an array as a parameter to void show_card()"}, {"owner": {"reputation": 733, "user_id": 101039, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/88oCA.png?s=128&g=1", "display_name": "JPhi1618", "link": "https://stackoverflow.com/users/101039/jphi1618"}, "edited": false, "score": 0, "creation_date": 1443630548, "post_id": 32870388, "comment_id": 53574209, "body": "For basic assignments like this, its very common to just make your variables global by creating them <i>outside</i> of a function, normally in your cpp file before main() or any other function is written.  Global variables will be accessible from all functions without the need to pass parameters.  Once you getting working with globals, you can then play with passing things around as parameters."}, {"owner": {"reputation": 733, "user_id": 101039, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/88oCA.png?s=128&g=1", "display_name": "JPhi1618", "link": "https://stackoverflow.com/users/101039/jphi1618"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1443630707, "post_id": 32870388, "comment_id": 53574293, "body": "@ForceBru, that&#39;s a new C++11 syntax that does compile.  It can also be used with classes and STL containers. More info <a href=\"http://en.cppreference.com/w/cpp/language/list_initialization\" rel=\"nofollow noreferrer\">here</a>..."}], "owner": {"reputation": 1, "user_id": 5393865, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6l5avoJIskA/AAAAAAAAAAI/AAAAAAAAAC8/m_HZR784dBY/photo.jpg?sz=128", "display_name": "Arthur Vaz", "link": "https://stackoverflow.com/users/5393865/arthur-vaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1443628066, "creation_date": 1443627865, "last_edit_date": 1443628066, "question_id": 32870388, "link": "https://stackoverflow.com/questions/32870388/how-to-use-the-elements-of-an-array-on-another-function", "title": "How to use the elements of an array on another function?", "body": "<p>I need to make a game for my programming class and part of it envolves shuffling some cards (represented by numbers) and then showing them on another function. </p>\n\n<p>Since the cards are then distributed into two arrays I need to access those values on the show function.</p>\n\n<pre><code>int deck_shuffle()\n{\n    int deck[] {1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,5,5,5,5,6,6,6,6,7,8,9,10};\n        srand(time(0));\n\n\nrandom_shuffle(&amp;deck[0], &amp;deck[28]);\n        int player1_hand[] {deck[0], deck[1], deck[2]};\n        int player2_hand[] {deck[3], deck[4], deck[5]}\n}\n\n\n\nvoid show_cards()\n{\ncout &lt;&lt;\"PLAYER 1 HAND\" &lt;&lt; endl ;\n\n\ncout&lt;&lt; player1_hand[0] &lt;&lt;  endl ;\ncout&lt;&lt; player1_hand[1] &lt;&lt; endl;\ncout&lt;&lt; player1_hand[2] &lt;&lt; endl;\n\ncout &lt;&lt;\"PLAYER 2 HAND\" &lt;&lt; endl ;\n\ncout&lt;&lt; player2_hand[0] &lt;&lt; endl;\ncout&lt;&lt; player2_hand[1] &lt;&lt; endl;\ncout&lt;&lt; player2_hand[2] &lt;&lt; endl;\n\n\n}\n</code></pre>\n\n<p>How can I use the values of the arrays </p>\n\n<pre><code>int player1_hand[]\n</code></pre>\n\n<p>and</p>\n\n<pre><code>int player2_hand[]\n</code></pre>\n\n<p>On the function:</p>\n\n<pre><code>void show_cards()\n</code></pre>\n\n<p>??\nThanks in advance!</p>\n"}, {"tags": ["c++", "list", "pointers", "boolean"], "comments": [{"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 3, "creation_date": 1443626601, "post_id": 32869889, "comment_id": 53571570, "body": "<code>node* aux = first;</code> and <code>delete aux;</code> doesn&#39;t seem like it&#39;s going to lead to defined behavior..."}, {"owner": {"reputation": 1627, "user_id": 2893839, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/A1yFr.jpg?s=128&g=1", "display_name": "Lorenzo Belli", "link": "https://stackoverflow.com/users/2893839/lorenzo-belli"}, "edited": false, "score": 2, "creation_date": 1443626713, "post_id": 32869889, "comment_id": 53571630, "body": "Could you please specify what this operator== is supposed to do? Why a delete statement inside operator== ? Also, avoid putting the else statement in the same line and without parenthesis."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1443626966, "post_id": 32869889, "comment_id": 53571809, "body": "If this and B have the same &quot;first&quot; node, then their data is identical, however they also have some traversal state, so do you want to know if they are both at the same point in iteration or not?  Or can you just return this.first == B.first;"}, {"owner": {"reputation": 41, "user_id": 2713746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f5e801e5f8294ddc1c3f86e967dc9c?s=128&d=identicon&r=PG&f=1", "display_name": "Burnsed", "link": "https://stackoverflow.com/users/2713746/burnsed"}, "edited": false, "score": 0, "creation_date": 1443626977, "post_id": 32869889, "comment_id": 53571814, "body": "operator == is suposed to compare between two objects of the class if they contain the same info in their nodes, so the size must be equal ofc."}, {"owner": {"reputation": 41, "user_id": 2713746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f5e801e5f8294ddc1c3f86e967dc9c?s=128&d=identicon&r=PG&f=1", "display_name": "Burnsed", "link": "https://stackoverflow.com/users/2713746/burnsed"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1443627040, "post_id": 32869889, "comment_id": 53571855, "body": "@KennyOstrom They dont shate the same nodes, we are just comparing the info on their nodes."}, {"owner": {"reputation": 1627, "user_id": 2893839, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/A1yFr.jpg?s=128&g=1", "display_name": "Lorenzo Belli", "link": "https://stackoverflow.com/users/2893839/lorenzo-belli"}, "edited": false, "score": 0, "creation_date": 1443627203, "post_id": 32869889, "comment_id": 53571982, "body": "Do you mean the boolean returned by this function has the value 204 (interpreted as true)?"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1443627214, "post_id": 32869889, "comment_id": 53571992, "body": "So you just want to know if this.first.info == B.first.info, and then repeat for the next nodes"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1443627310, "post_id": 32869889, "comment_id": 53572067, "body": "No matter what you do with comparisons and traveral won&#39;t matter anyway, because you delete your tree for no reason.  You should not delete unless it is directly paired with new."}, {"owner": {"reputation": 41, "user_id": 2713746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f5e801e5f8294ddc1c3f86e967dc9c?s=128&d=identicon&r=PG&f=1", "display_name": "Burnsed", "link": "https://stackoverflow.com/users/2713746/burnsed"}, "reply_to_user": {"reputation": 1627, "user_id": 2893839, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/A1yFr.jpg?s=128&g=1", "display_name": "Lorenzo Belli", "link": "https://stackoverflow.com/users/2893839/lorenzo-belli"}, "edited": false, "score": 0, "creation_date": 1443628371, "post_id": 32869889, "comment_id": 53572777, "body": "I tried to erase the delete line but it is still not working. And @LorenzoBelli, the value returned has random values different to 1 or 0, and they interprete those as true always.."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1443628475, "post_id": 32869889, "comment_id": 53572859, "body": "What makes you think this function &quot;returns 244&quot;?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1443628535, "post_id": 32869889, "comment_id": 53572902, "body": "This code is extremely unclear."}, {"owner": {"reputation": 41, "user_id": 2713746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f5e801e5f8294ddc1c3f86e967dc9c?s=128&d=identicon&r=PG&f=1", "display_name": "Burnsed", "link": "https://stackoverflow.com/users/2713746/burnsed"}, "edited": false, "score": 0, "creation_date": 1443628865, "post_id": 32869889, "comment_id": 53573138, "body": "well ive a main.cpp then there I do: bool x = cj == cj2; cout&lt;&lt;x;"}, {"owner": {"reputation": 41, "user_id": 2713746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f5e801e5f8294ddc1c3f86e967dc9c?s=128&d=identicon&r=PG&f=1", "display_name": "Burnsed", "link": "https://stackoverflow.com/users/2713746/burnsed"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1443629210, "post_id": 32869889, "comment_id": 53573339, "body": "@LightnessRacesinOrbit"}], "answers": [{"comments": [{"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1443627045, "post_id": 32870064, "comment_id": 53571860, "body": "You don&#39;t call delete unless it&#39;s paired with new.  Just because you &quot;can&quot; get away with &quot;delete nullptr&quot; doesn&#39;t mean you should."}, {"owner": {"reputation": 41, "user_id": 2713746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f5e801e5f8294ddc1c3f86e967dc9c?s=128&d=identicon&r=PG&f=1", "display_name": "Burnsed", "link": "https://stackoverflow.com/users/2713746/burnsed"}, "edited": false, "score": 0, "creation_date": 1443627259, "post_id": 32870064, "comment_id": 53572033, "body": "Yeah but first is not NULL!"}, {"owner": {"reputation": 41, "user_id": 2713746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f5e801e5f8294ddc1c3f86e967dc9c?s=128&d=identicon&r=PG&f=1", "display_name": "Burnsed", "link": "https://stackoverflow.com/users/2713746/burnsed"}, "edited": false, "score": 0, "creation_date": 1443627478, "post_id": 32870064, "comment_id": 53572163, "body": "Still I deleted the &quot;delete aux&quot; and it is still not working! :/"}, {"owner": {"reputation": 1627, "user_id": 2893839, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/A1yFr.jpg?s=128&g=1", "display_name": "Lorenzo Belli", "link": "https://stackoverflow.com/users/2893839/lorenzo-belli"}, "edited": false, "score": 0, "creation_date": 1443627704, "post_id": 32870064, "comment_id": 53572321, "body": "The variable <code>cerca</code> is set to <code>true</code> or <code>false</code> in this method, there are no possible values. I exclude that your compiler set <code>true</code> to a random positive integer. You could try to check the value of <code>cerca</code> at every iteration of while loop. I suspect someone is overwriting your variable on the stack (for example the method <code>conte</code>)."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 41, "user_id": 2713746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f5e801e5f8294ddc1c3f86e967dc9c?s=128&d=identicon&r=PG&f=1", "display_name": "Burnsed", "link": "https://stackoverflow.com/users/2713746/burnsed"}, "edited": false, "score": 0, "creation_date": 1443628488, "post_id": 32870064, "comment_id": 53572870, "body": "@Burnsed: No it doesn&#39;t. Why do you think it does? How are you determining that? Your method of determining that is broken."}, {"owner": {"reputation": 41, "user_id": 2713746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f5e801e5f8294ddc1c3f86e967dc9c?s=128&d=identicon&r=PG&f=1", "display_name": "Burnsed", "link": "https://stackoverflow.com/users/2713746/burnsed"}, "edited": false, "score": 0, "creation_date": 1443629358, "post_id": 32870064, "comment_id": 53573433, "body": "@LorenzoBelli Could u please be more specific?"}], "tags": [], "owner": {"reputation": 1627, "user_id": 2893839, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/A1yFr.jpg?s=128&g=1", "display_name": "Lorenzo Belli", "link": "https://stackoverflow.com/users/2893839/lorenzo-belli"}, "is_accepted": false, "score": -1, "last_activity_date": 1443626920, "creation_date": 1443626920, "answer_id": 32870064, "question_id": 32869889, "link": "https://stackoverflow.com/questions/32869889/c-bool-not-returning-true-or-false-using-pointers/32870064#32870064", "title": "C++ Bool not returning true or false using pointers", "body": "<p>If <code>first==NULL</code> then <code>aux==NULL</code> and then you call <code>delete aux</code>.</p>\n"}], "owner": {"reputation": 41, "user_id": 2713746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32f5e801e5f8294ddc1c3f86e967dc9c?s=128&d=identicon&r=PG&f=1", "display_name": "Burnsed", "link": "https://stackoverflow.com/users/2713746/burnsed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 378, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1443629428, "creation_date": 1443626485, "last_edit_date": 1443629428, "question_id": 32869889, "link": "https://stackoverflow.com/questions/32869889/c-bool-not-returning-true-or-false-using-pointers", "title": "C++ Bool not returning true or false using pointers", "body": "<p>Im trying to implement a list of nodes on my own using pointers. \nSo ive this on my class as private:</p>\n\n<pre><code>class cj_enters {\n\nprivate:\nstruct node{\n  node* next;\n  node* prev;\n  int info;\n}; \n\nnode* first;\nnode* last;\nnode* actual;\n\nint size;\n\npublic:\n.\n.\n};\n</code></pre>\n\n<p>And im trying to implement this method:</p>\n\n<pre><code>bool cj_enters:: operator==(const cj_enters&amp; B) const{\n  bool cerca = true;\n  node* aux = first;\n  while(aux != NULL and cerca){\n      if(!B.conte(aux-&gt;info)) // this method is working and it tells if object B has the info somewhere of the current node info(aux).\n      {\n          cerca = false;\n      }\n      else aux = aux -&gt; next;\n  }\n\nreturn cerca;\n}\n</code></pre>\n\n<p>So I don't know why but this method is returning me strange values like 244 or so when I compare two of these objects, it doesn't matter if they are the same or they are not.</p>\n\n<p>Why is that? Thanks</p>\n"}, {"tags": ["c++", "gcc", "boost-asio"], "comments": [{"owner": {"reputation": 1724, "user_id": 764191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tefZa.jpg?s=128&g=1", "display_name": "SChepurin", "link": "https://stackoverflow.com/users/764191/schepurin"}, "edited": false, "score": 1, "creation_date": 1443627184, "post_id": 32869631, "comment_id": 53571972, "body": "Get some IDE to help you with this task. Or learn how to use makefile."}], "answers": [{"comments": [{"owner": {"reputation": 276, "user_id": 355167, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/070ae87468fdb9fb0ed83867808aa310?s=128&d=identicon&r=PG", "display_name": "Filippok", "link": "https://stackoverflow.com/users/355167/filippok"}, "reply_to_user": {"reputation": 451, "user_id": 4605420, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/971f9138acd1c46cc512a1049483cc7c?s=128&d=identicon&r=PG&f=1", "display_name": "Oana Andone", "link": "https://stackoverflow.com/users/4605420/oana-andone"}, "edited": false, "score": 0, "creation_date": 1443626562, "post_id": 32869690, "comment_id": 53571545, "body": "<a href=\"https://github.com/boostorg/asio/tree/master/example/cpp11/http/server\" rel=\"nofollow noreferrer\">github.com/boostorg/asio/tree/master/example/cpp11/http/serv&zwnj;&#8203;er</a> - there is makefile for boost build system."}, {"owner": {"reputation": 451, "user_id": 4605420, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/971f9138acd1c46cc512a1049483cc7c?s=128&d=identicon&r=PG&f=1", "display_name": "Oana Andone", "link": "https://stackoverflow.com/users/4605420/oana-andone"}, "edited": false, "score": 0, "creation_date": 1443645471, "post_id": 32869690, "comment_id": 53581782, "body": "But I use version non-boost"}], "tags": [], "owner": {"reputation": 276, "user_id": 355167, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/070ae87468fdb9fb0ed83867808aa310?s=128&d=identicon&r=PG", "display_name": "Filippok", "link": "https://stackoverflow.com/users/355167/filippok"}, "is_accepted": false, "score": 2, "last_activity_date": 1443625943, "creation_date": 1443625943, "answer_id": 32869690, "question_id": 32869631, "link": "https://stackoverflow.com/questions/32869631/compile-asio-with-gcc/32869690#32869690", "title": "Compile asio with gcc", "body": "<p>You should compile all cpp files - not only main.cpp.</p>\n"}, {"comments": [{"owner": {"reputation": 2237, "user_id": 1219722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f308a0947ea106f91b5ba413cd9c04c?s=128&d=identicon&r=PG", "display_name": "Dmitry Rubanovich", "link": "https://stackoverflow.com/users/1219722/dmitry-rubanovich"}, "edited": false, "score": 0, "creation_date": 1469764787, "post_id": 34326160, "comment_id": 64682754, "body": "Why would server.cpp need to be added to the compilation line? The linker is reporting errors in server.cpp, so it looks like it is already being pulled in."}, {"owner": {"reputation": 1308, "user_id": 5689220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FipQW.png?s=128&g=1", "display_name": "villapx", "link": "https://stackoverflow.com/users/5689220/villapx"}, "reply_to_user": {"reputation": 2237, "user_id": 1219722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f308a0947ea106f91b5ba413cd9c04c?s=128&d=identicon&r=PG", "display_name": "Dmitry Rubanovich", "link": "https://stackoverflow.com/users/1219722/dmitry-rubanovich"}, "edited": false, "score": 0, "creation_date": 1470143366, "post_id": 34326160, "comment_id": 64818758, "body": "@DmitryRubanovich You&#39;re right. But based off of the OP&#39;s compilation command, they <i>didn&#39;t</i> pull in server.cpp, so they must have pasted a different compilation command from the one that was actually used to produce this error. I&#39;ll edit my answer accordingly"}], "tags": [], "owner": {"reputation": 1308, "user_id": 5689220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FipQW.png?s=128&g=1", "display_name": "villapx", "link": "https://stackoverflow.com/users/5689220/villapx"}, "is_accepted": true, "score": 2, "last_activity_date": 1470143694, "last_edit_date": 1470143694, "creation_date": 1450323116, "answer_id": 34326160, "question_id": 32869631, "link": "https://stackoverflow.com/questions/32869631/compile-asio-with-gcc/34326160#34326160", "title": "Compile asio with gcc", "body": "<p>First off, let me say that it seems you have provided the wrong compilation command to produce that error message, since the error message indicates that you're compiling <code>server.cpp</code>, e.g.:</p>\n\n<pre><code>server.cpp:(.text+0x1a3): undefined reference to 'http::server::connection_manager::connection_manager()'\n</code></pre>\n\n<p>when you're actually not. In fact, you're only compiling <code>main.cpp</code>, since that's the only cpp file that's in the compilation command you gave.</p>\n\n<p>As another answer states, you need to compile <em>all</em> of the .cpp files for the HTTP server, not just <code>main.cpp</code>. To do that, you simply pass all of the .cpp files to your <code>g++</code> command:</p>\n\n<pre><code>g++ main.cpp connection.cpp connection_manager.cpp mime_types.cpp reply.cpp request_handler.cpp request_parser.cpp server.cpp -std=c++11 -I/home/gabi/Downloads/asio-1.11.0/include -pthread\n</code></pre>\n\n<hr>\n\n<p>And finally, contrary to what another answer says, you do <strong>not</strong> need to link against any libraries, because Asio is a header-only library. Boost.Asio, however, is not header-only, and so <em>if</em> you were using Boost.Asio, you'd need to link to the Boost 'System' library with the following linker flags:</p>\n\n<p><code>-L/path/to/folder/containing/Boost/libs/ -lboost_system</code></p>\n\n<p>(This is assuming that the Boost libraries are not installed in a standard system location, such as <code>/lib</code>; if they were, you could omit the <code>-L</code> flag. As was stated in a comment, <code>-lboost_system</code> tells the linker (<code>ld</code>) to look for a library called <code>libboost_system.so</code>. See the <code>ld</code> <a href=\"http://linux.die.net/man/1/ld\" rel=\"nofollow\">man page</a> for more information on how <code>ld</code> finds libraries.)</p>\n\n<p>However, since, as you said, you are only using Asio and not Boost.Asio, you are fine with just including the appropriate .hpp header files and using the <code>-I</code> compiler flag to point to the header file locations.</p>\n"}], "owner": {"reputation": 451, "user_id": 4605420, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/971f9138acd1c46cc512a1049483cc7c?s=128&d=identicon&r=PG&f=1", "display_name": "Oana Andone", "link": "https://stackoverflow.com/users/4605420/oana-andone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1329, "favorite_count": 0, "accepted_answer_id": 34326160, "answer_count": 2, "score": 1, "last_activity_date": 1470143694, "creation_date": 1443625749, "last_edit_date": 1443717767, "question_id": 32869631, "link": "https://stackoverflow.com/questions/32869631/compile-asio-with-gcc", "title": "Compile asio with gcc", "body": "<p>I tried to compile HTTP Server from here <a href=\"http://think-async.com/Asio/asio-1.11.0/doc/asio/examples/cpp11_examples.html#asio.examples.cpp11_examples.http_server\" rel=\"nofollow\">http://think-async.com/Asio/asio-1.11.0/doc/asio/examples/cpp11_examples.html#asio.examples.cpp11_examples.http_server</a> with gcc.\nI used </p>\n\n<pre><code> g++ main.cpp -std=c++11 -I/home/gabi/Downloads/asio-1.11.0/include -pthread\n</code></pre>\n\n<p>I get this</p>\n\n<pre><code>/tmp/ccE1vIzF.o: In function `http::server::server::server(std::string const&amp;, std::string const&amp;, std::string const&amp;)':\nserver.cpp:(.text+0x1a3): undefined reference to `http::server::connection_manager::connection_manager()'\nserver.cpp:(.text+0x1e0): undefined reference to `http::server::request_handler::request_handler(std::string const&amp;)'\n/tmp/ccE1vIzF.o: In function `http::server::server::do_accept()::{lambda(std::error_code)#1}::operator()(std::error_code) const':\nserver.cpp:(.text+0x52a): undefined reference to `http::server::connection_manager::start(std::shared_ptr&lt;http::server::connection&gt;)'\n/tmp/ccE1vIzF.o: In function `http::server::server::do_await_stop()::{lambda(std::error_code, int)#1}::operator()(std::error_code, int) const':\nserver.cpp:(.text+0x5e9): undefined reference to `http::server::connection_manager::stop_all()'\n/tmp/ccE1vIzF.o: In function `_ZN9__gnu_cxx13new_allocatorIN4http6server10connectionEE9constructIS3_IN4asio19basic_stream_socketINS6_2ip3tcpENS6_21stream_socket_serviceIS9_EEEERNS2_18connection_managerERNS2_15request_handlerEEEEvPT_DpOT0_':\nserver.cpp:(.text._ZN9__gnu_cxx13new_allocatorIN4http6server10connectionEE9constructIS3_IN4asio19basic_stream_socketINS6_2ip3tcpENS6_21stream_socket_serviceIS9_EEEERNS2_18connection_managerERNS2_15request_handlerEEEEvPT_DpOT0_[_ZN9__gnu_cxx13new_allocatorIN4http6server10connectionEE9constructIS3_IN4asio19basic_stream_socketINS6_2ip3tcpENS6_21stream_socket_serviceIS9_EEEERNS2_18connection_managerERNS2_15request_handlerEEEEvPT_DpOT0_]+0x8b): undefined reference to `http::server::connection::connection(asio::basic_stream_socket&lt;asio::ip::tcp, asio::stream_socket_service&lt;asio::ip::tcp&gt; &gt;, http::server::connection_manager&amp;, http::server::request_handler&amp;)'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>Does anyone know why?\nif I try to compile <a href=\"http://think-async.com/Asio/asio-1.11.0/doc/asio/examples/cpp11_examples.html#asio.examples.cpp11_examples.allocation\" rel=\"nofollow\">http://think-async.com/Asio/asio-1.11.0/doc/asio/examples/cpp11_examples.html#asio.examples.cpp11_examples.allocation</a> works.</p>\n"}, {"tags": ["c++", "atomic", "stl-algorithm"], "comments": [{"owner": {"reputation": 4802, "user_id": 3852968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e803f34d50b5355d8cf39bdb4ce2932?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/3852968/andrew"}, "edited": false, "score": 0, "creation_date": 1443625967, "post_id": 32869601, "comment_id": 53571141, "body": "You could create a <code>back_emplacer</code> (see, for example, <a href=\"http://stackoverflow.com/questions/18728257/back-emplacer-implementation-default-operator-vs-universal-reference-version\" title=\"back emplacer implementation default operator vs universal reference version\">stackoverflow.com/questions/18728257/&hellip;</a>)"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1443626534, "post_id": 32869601, "comment_id": 53571525, "body": "Can you provide a <a href=\"http://www.stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>? The problem is likely in your &quot;...&quot; somewhere. Is <code>some_object</code> movable?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1443627436, "post_id": 32869601, "comment_id": 53572144, "body": "What compiler?  What line of the above code is complaining about the copy ctor being called?  What is the actual error message, in entirety?  Why do you think &quot;the above code&quot; requires &quot;copying ctor&quot; exactly?"}], "answers": [{"comments": [{"owner": {"reputation": 431, "user_id": 2896121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c21847e05c6b288c7d7da7b96ceaaaf?s=128&d=identicon&r=PG&f=1", "display_name": "Constantin Baranov", "link": "https://stackoverflow.com/users/2896121/constantin-baranov"}, "edited": false, "score": 0, "creation_date": 1443954068, "post_id": 32869664, "comment_id": 53690450, "body": "And it&#39;s not obvious that <code>worker</code> move constructor should copy <code>done</code> value."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 5, "last_activity_date": 1443628411, "last_edit_date": 1443628411, "creation_date": 1443625849, "answer_id": 32869664, "question_id": 32869601, "link": "https://stackoverflow.com/questions/32869601/stdgenerate-n-algorithm-requires-copying-ctor-how-to-avoid-this-in-code-below/32869664#32869664", "title": "std::generate_n algorithm requires copying ctor. how to avoid this in code below?", "body": "<p>Your class:</p>\n\n<pre><code>class worker {\n    std::atomic_bool done;\n};\n</code></pre>\n\n<p>is not copyable or moveable because <code>std::atomic</code> explicitly <code>delete</code>s its copy constructor (which implicitly <code>delete</code>s its move constructor). If you want to allow it to be moved or copied, you have to write that yourself, e.g.:</p>\n\n<pre><code>worker(worker&amp;&amp; rhs)\n: done(rhs.done.load())\n{ }\n</code></pre>\n"}], "owner": {"reputation": 2187, "user_id": 2920614, "user_type": "registered", "accept_rate": 48, "profile_image": "https://lh4.googleusercontent.com/-esVq312MLXE/AAAAAAAAAAI/AAAAAAAA2Tk/jQtcCx2Owb0/photo.jpg?sz=128", "display_name": "amigo421", "link": "https://stackoverflow.com/users/2920614/amigo421"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 32869664, "answer_count": 1, "score": 1, "last_activity_date": 1443628411, "creation_date": 1443625662, "last_edit_date": 1443627974, "question_id": 32869601, "link": "https://stackoverflow.com/questions/32869601/stdgenerate-n-algorithm-requires-copying-ctor-how-to-avoid-this-in-code-below", "title": "std::generate_n algorithm requires copying ctor. how to avoid this in code below?", "body": "<pre><code>    std::vector&lt;std::thread&gt; thread_pool;\n    ...\n    std::generate_n(std::back_inserter(thread_pool), cpu_cores,\n                    [] (){\n        //...\n        return std::thread{worker(worker_name) };\n    } );\n</code></pre>\n\n<p>where:</p>\n\n<pre><code>  class worker {\n      std::atomic_bool done;\n  protected:\n      void operator()() {\n          while(!done) {\n //   some work\n          }\n   }\n   public:\n   worker(const std::string&amp; worker_name)\n       : done(false) {\n        // some initialization \n    }\n // other fields\n };\n\n\n  error: use of deleted function 'std::atomic_bool::atomic_bool(const std::atomic_bool&amp;)'\n</code></pre>\n\n<p>GCC 4.9</p>\n\n<p>as I see atomic can't be copied, just moved.\ncode above requires copying ctor for some_object class.\nhow to solve this ?  </p>\n\n<p>(probably the design itself is worse, \nhere , some_object is a functor for a thread, and atomic is a flag to shut the process down)</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1443625523, "post_id": 32869530, "comment_id": 53570863, "body": "How big is your file?"}, {"owner": {"reputation": 19, "user_id": 5212956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95acca70944de317631d5a7a60f230f9?s=128&d=identicon&r=PG&f=1", "display_name": "JTran", "link": "https://stackoverflow.com/users/5212956/jtran"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1443625853, "post_id": 32869530, "comment_id": 53571072, "body": "Well I&#39;m making a program where you store someone SSN address name and age. I need to find a way to delete the recorded information without the data file becoming to large so I have to track which record has been deleted."}, {"owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "edited": false, "score": 0, "creation_date": 1443626235, "post_id": 32869530, "comment_id": 53571319, "body": "What you&#39;re describing is usually called defragmentation rather than compression. Googling that term might turn up some helpful information."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 3, "creation_date": 1443628132, "post_id": 32869530, "comment_id": 53572598, "body": "If the data is small enough, read everything and write everything each time (no empty data), or if the data is too big, use a database."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1443628308, "post_id": 32869530, "comment_id": 53572726, "body": "You may want to research the topic of <i>memory fragmentation</i> to find algorithms.  I agree with @crashmstr, if the data is too big, use a database."}, {"owner": {"reputation": 2560, "user_id": 857853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7eb69bcd9b721d0af2839a1337a0885f?s=128&d=identicon&r=PG", "display_name": "Zharf", "link": "https://stackoverflow.com/users/857853/zharf"}, "edited": false, "score": 0, "creation_date": 1443628474, "post_id": 32869530, "comment_id": 53572858, "body": "I would just like to add that writing a struct directly to a file from memory and reading directly from a file, is a bad idea. There&#39;s dozens of potential portability problems in that hole. Better to use a proper serialization and deserialization."}], "answers": [{"tags": [], "owner": {"reputation": 2394, "user_id": 4952137, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c40d9f94080a45d91ee151dfe960cee3?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Sparber", "link": "https://stackoverflow.com/users/4952137/thomas-sparber"}, "is_accepted": false, "score": 0, "last_activity_date": 1443627648, "last_edit_date": 1492086987, "creation_date": 1443627648, "answer_id": 32870298, "question_id": 32869530, "link": "https://stackoverflow.com/questions/32869530/compressing-the-binary-file/32870298#32870298", "title": "Compressing the binary file", "body": "<p>There are so many things you Need to think about... You Need to make sure to have enough space at the target Position (no overlapping)...</p>\n\n<p>Actually this is the functionality of a filesystem, so why reinvent the wheel?</p>\n\n<p>E.g. on Linux you can create a filesystem <a href=\"https://unix.stackexchange.com/questions/43903/create-file-image-container\">inside a file</a> and then <a href=\"http://www.linuxquestions.org/questions/linux-general-1/how-to-mount-img-file-882386/\" rel=\"nofollow noreferrer\">mount it</a>. Then you can create a file for each person and save it in the filesystem. This way you are (almost) sure to have no bugs and receive security updates.</p>\n\n<p>If you are not on Linux you can probably use some filesystem (NTFS, EXT4...) c++ apis to directly use the file as filesystem.</p>\n\n<p>If you don't like that idea, I suggest to re-create the entire file and then delete the old file. Of course you only re-create it with the non-deleted entries.</p>\n\n<p><strong>Last but no leaset:</strong> If your file is very small then I think you actually don't Need defragmentation at all.</p>\n"}], "owner": {"reputation": 19, "user_id": 5212956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95acca70944de317631d5a7a60f230f9?s=128&d=identicon&r=PG&f=1", "display_name": "JTran", "link": "https://stackoverflow.com/users/5212956/jtran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1443627648, "creation_date": 1443625449, "last_edit_date": 1443626061, "question_id": 32869530, "link": "https://stackoverflow.com/questions/32869530/compressing-the-binary-file", "title": "Compressing the binary file", "body": "<p>After deleting a record from the file, there could be an unused amount of memory in the file that was once occupied by the deleted record.  Many of these deleted records in the file can cause the file to grow very large but actually contain little useful data.  There are a couple of ways to avoid this:</p>\n\n<ol>\n<li>Whenever a new record is inserted in the file, it could be inserted in the first available space in the file, not necessarily at the end.  However, this can lead to inefficiency if you search the file for the first available space - this would nullify the usefulness of the indexing structure for this operation.  You could maintain a simple queue that held the locationInFile of all records that had been deleted.  Whenever an insertion is required, an element could be retrieved (de-queued) from queue and used as the location to store the new record in the file. (Don\u2019t forget to update the indexing structure). </li>\n<li>After a certain threshold of deletions is reached (let\u2019s use 5 deletions for example), the binary file would be compressed. This means that all of the valid records in the file would be moved to the beginning of the file (compressed to the beginning).  Consider the following picture where each square represents a place for a record in a file, each integer represents a valid record in use and each \u2018x\u2019 represents a deleted record:\n1 x x 2 x 3 x x 4</li>\n</ol>\n\n<p>After the compression of the file, it would look something like:\n1 2 3 4 x x x x x </p>\n\n<p>Notice that all of the valid records are moved to the top of the file.  This method would require significant updates to your indexing structure. </p>\n\n<p>**Any idea how I could implement this in code. Maybe a seek function can be useful. **</p>\n\n<pre><code>     // This program uses a structure variable to store a record to a file.\n #include &lt;iostream&gt;\n #include &lt;fstream&gt;\n using namespace std;\n\n// Array sizes\nconst int SSN_SIZE = 10, NAME_SIZE = 51, ADDR_SIZE = 51, PHONE_SIZE = 14;\n\n// Declare a structure for the record.\n struct Info {\n    char ssn[SSN_SIZE];\n    char name[NAME_SIZE];\n    int age;\n    char phone[PHONE_SIZE];\n };\n int main() {\n    Info person;   // To hold info about a person\n    char again;    // To hold Y or N\n    // Open a file for binary output.\n    fstream people(\"people.dat\", ios::out | ios::binary);\n    do {\n        // Get data about a person.\n        cout &lt;&lt; \"Enter the following data about a \" &lt;&lt; \"person:\\n\";\n        cout &lt;&lt; \"SSN: \";\n        cin.getline(person.ssn, SSN_SIZE);\n        cout &lt;&lt; \"Name: \";\n        cin.getline(person.name, NAME_SIZE);\n        cout &lt;&lt; \"Age: \";\n        cin &gt;&gt; person.age;\n        cin.ignore(); // Skip over the remaining newline.\n        cout &lt;&lt; \"Phone: \";\n        cin.getline(person.phone, PHONE_SIZE);\n\n        // Write the contents of the person structure to the file.\n        people.write(reinterpret_cast&lt;char *&gt;(&amp;person), sizeof(person));\n\n        // Determine whether the user wants to write another record.\n        cout &lt;&lt; \"Do you want to enter another record? \";\n        cin &gt;&gt; again;\n        cin.ignore(); // Skip over the remaining newline.\n    } while (again == 'Y' || again == 'y');\n\n    // Close the file.\n    people.close();\n\n    people.open(\"people.dat\", ios::in | ios::binary);\n\n    if (!people) {\n        cout &lt;&lt; \"Error opening file. Program aborting.\\n\";\n        return 0;\n    }\n\n    cout &lt;&lt; \"Here are the people in the file:\\n\\n\";\n    // Read the first record from the file.\n    people.read(reinterpret_cast&lt;char *&gt;(&amp;person),\n        sizeof(person));\n    // While not at the end of the file, display the records.\n    while (!people.eof()) {\n        // Display the record.\n        cout &lt;&lt; \"Name: \";\n        cout &lt;&lt; person.name &lt;&lt; endl;\n        cout &lt;&lt; \"Age: \";\n        cout &lt;&lt; person.age &lt;&lt; endl;\n        cout &lt;&lt; \"Address line 1: \";\n        cout &lt;&lt; person.address1 &lt;&lt; endl;\n        cout &lt;&lt; \"Address line 2: \";\n        cout &lt;&lt; person.address2 &lt;&lt; endl;\n        cout &lt;&lt; \"Phone: \";\n        cout &lt;&lt; person.phone &lt;&lt; endl;\n\n              // Wait for the user to press the Enter key.\n        cout &lt;&lt; \"\\nPress the Enter key to see the next record.\\n\";\n        enter code here`cin.get(again);\n\n            // Read the next record from the file.\n        people.read(reinterpret_cast&lt;char *&gt;(&amp;person),\n        sizeof(person));\n\n    }\n\n\n\n        cout &lt;&lt; \"That's all the data in the file!\\n\";\n        people.close();\n        return 0;\n}\n</code></pre>\n"}]