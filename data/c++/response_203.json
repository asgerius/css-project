[{"tags": ["c++", "templates", "overriding", "multiple-inheritance", "mixins"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1543452802, "post_id": 53529916, "comment_id": 93929059, "body": "Do you understand <i>why</i> you&#39;re getting the output you are?  Use a debugger to step thru the code if necessary.  That&#39;s an important step in figuring out how to do what you want to."}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1543453648, "post_id": 53529916, "comment_id": 93929240, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with an emphasis on <i>MINIMAL</i>.   We don&#39;t need a backstory, either."}, {"owner": {"reputation": 49, "user_id": 6573945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71efdc843b3a453966819ef1cf8f65fd?s=128&d=identicon&r=PG", "display_name": "Massimiliano Leoni", "link": "https://stackoverflow.com/users/6573945/massimiliano-leoni"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1543460644, "post_id": 53529916, "comment_id": 93930668, "body": "@1201ProgramAlarm I do not understand it, and I tried to make it clear that that is in fact the point of the question by repeatedly writing it."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 6573945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71efdc843b3a453966819ef1cf8f65fd?s=128&d=identicon&r=PG", "display_name": "Massimiliano Leoni", "link": "https://stackoverflow.com/users/6573945/massimiliano-leoni"}, "edited": false, "score": 0, "creation_date": 1543463241, "post_id": 53531421, "comment_id": 93931140, "body": "Hi, thanks for your help! What you describe is what I meant in my post, but still it&#39;s not clear to me why the compiler chooses <code>adaptive::save</code> for <code>common&lt;dual&gt;::save</code> when there is <code>dual::save</code> higher in the hierarchy that is not virtual. Calling <code>dual::save</code> from <code>adaptive::save</code> is tricky because <code>run</code> will do a bunch of stuff and call <code>save</code> multiple times before returning, and I have several functions like <code>save</code>. I could store a flag in the classes and check it whenever one of these functions is called but it looks ugly. Overriding <code>run</code> duplicates code, which I&#39;d like to avoid."}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 0, "last_activity_date": 1543462008, "creation_date": 1543462008, "answer_id": 53531421, "question_id": 53529916, "link": "https://stackoverflow.com/questions/53529916/c-override-resolution-with-mixins-and-multiple-inheritance/53531421#53531421", "title": "C++ override resolution with mixins and multiple inheritance", "body": "<p>First, an explanation on why you're getting the output you see.</p>\n\n<p><code>a.run</code> calls <code>adaptive.run</code>.  <code>adaptive.run</code> first explicitly calls <code>primal::run</code>, which will call the virtual <code>save</code> function, <code>adaptive::save</code>.</p>\n\n<p><code>adaptive::save</code> explicitly calls <code>primal::save</code> (<code>common&lt;primal&gt;::save</code>) and outputs \"primal::common\".  We then return back into <code>adaptive::save</code> and output \"Adaptive\", then return back to <code>adaptive::run</code>.</p>\n\n<p>Now we explicitly call <code>dual::run</code> (<code>common&lt;dual&gt;::run</code>).  This will call the virtual <code>save</code> function, which will again be the <code>adaptive::save</code> override which will duplicate your existing output.</p>\n\n<p><strong>How do you fix it to get what you want?</strong></p>\n\n<p>That depends on some details that are not present in your question.  Here are some possibilities.</p>\n\n<p>The simplest way would be to explicitly call <code>dual::save</code> from within <code>adaptive::save</code>, but I presume this won't work for you since <code>dual</code> has work to do before that can happen.</p>\n\n<p>You can have <code>adaptive::save</code> do nothing, then call <code>save</code> for both subobjects within <code>run</code>.</p>\n\n<p>You could make <code>run</code> <code>virtual</code> and override within the <code>dual</code> class.</p>\n"}], "owner": {"reputation": 49, "user_id": 6573945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71efdc843b3a453966819ef1cf8f65fd?s=128&d=identicon&r=PG", "display_name": "Massimiliano Leoni", "link": "https://stackoverflow.com/users/6573945/massimiliano-leoni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1543462008, "creation_date": 1543449471, "question_id": 53529916, "link": "https://stackoverflow.com/questions/53529916/c-override-resolution-with-mixins-and-multiple-inheritance", "title": "C++ override resolution with mixins and multiple inheritance", "body": "<p>I am puzzled by the behavior below that I am unable to explain. I tried to write a meaningful title but I am not sure I nailed it. </p>\n\n<p>A bit of background, first.\nI write numerical simulations software and I am trying to modernize my code a bit. I have three numerical solvers: <code>primal</code>, <code>dual</code> and <code>adaptive</code>.\nA <code>primal</code> solver does its work unaware of anything else; a <code>dual</code> solver has many things in common with a <code>primal</code> but is never used alone, and an <code>adaptive</code> solver is a wrapper that contains and runs a <code>primal</code> and a <code>dual</code>, in this order.\nNow, the thing is that when an <code>adaptive</code> solver runs its <code>primal</code> solver, the <code>primal</code> needs to perform some additional operations as compared to when it is used alone. Let one such operation be <code>save</code>. Also, <code>primal</code> and <code>dual</code> have a lot in common so I figured they should share code in a <code>common</code> class.</p>\n\n<p>This was my initial design</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\ntemplate &lt;typename s&gt;\nstruct common\n{\n    void run()\n    {\n        static_cast&lt;s*&gt;(this)-&gt;save();\n    }\n};\n\nstruct primal : public common&lt;primal&gt;\n{\n    virtual void save()\n    {\n        cout &lt;&lt; \"  Primal\\n\";\n    }\n};\n\nstruct dual : public common&lt;dual&gt;\n{\n    void save()\n    {\n        cout &lt;&lt; \"  Dual\\n\";\n    }\n};\n\nstruct adaptive : public primal,\n                  public dual\n{\n    void run()\n    {\n        primal::run();\n        dual::run();\n    }\n\n    virtual void save()\n    {\n        primal::save();\n        cout &lt;&lt; \"    Adaptive\\n\";\n    }\n};\n\nint main(int argc, const char *argv[])\n{\n    adaptive a;\n    a.run();\n    return 0;\n}\n</code></pre>\n\n<p>and it prints</p>\n\n<pre><code>  Primal\n    Adaptive\n  Dual\n</code></pre>\n\n<p>which, to me, means that</p>\n\n<ol>\n<li><code>a.run</code> calls <code>primal::run = common&lt;primal&gt;::run</code></li>\n<li><code>common&lt;primal&gt;::run</code> calls <code>primal::save</code>, but this method is <code>virtual</code> so it resolves to calling <code>adaptive::save</code></li>\n<li><code>adaptive::save</code> calls <code>primal::save</code> explicitly, because I want it to perform <code>primal</code>'s normal tasks plus something else</li>\n<li><code>adaptive::save</code> does some other work and returns</li>\n<li><code>a.run</code> calls <code>dual::run = common&lt;dual&gt;::run</code>, which calls <code>dual::save</code>, but this method is <em>not</em> <code>virtual</code> so it is selected ignoring <code>adaptive::save</code>.</li>\n</ol>\n\n<p>All is well so far, and this is exactly what I wanted.\nSo, first question: is all the above correct?</p>\n\n<p>Now, here come the problems.\nAfter some refactoring, <code>primal::save</code> and <code>dual::save</code> are now the same function, so I want to put it into <code>common</code> and keep extending the behavior in <code>adaptive</code> only.</p>\n\n<p>As a first step, I changed the code to</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename s&gt;\nstruct common\n{\n    void run()\n    {\n        save();\n    }\n\n    virtual void save()\n    {\n        cout &lt;&lt; \"This should never be called\\n\";\n    }\n};\n\n// Everything else stays the same\n</code></pre>\n\n<p>and now the output is</p>\n\n<pre><code>  Primal\n    Adaptive\n  Primal\n    Adaptive\n</code></pre>\n\n<p>while I was expecting the same output as before.\nThis is the first thing that I do not understand: it seems to me that now the call to <code>dual::save</code> made by <code>dual::run()</code> is being resolved all the way to <code>adaptive::save</code> while I was expecting it to stop at <code>dual::save</code> as this method is not <code>virtual</code>.\nThis is my second question: why is this happening? What is different from before?</p>\n\n<p>Finally, I wrote the code as I had it in mind in its final version, plus some debugging stuff, and it looks like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\ntemplate &lt;typename s&gt;\nstruct common\n{\n    void run()\n    {\n        save();\n    }\n\n    virtual void save()\n    {\n        cout &lt;&lt; s::name &lt;&lt; \"::common\\n\";\n    }\n};\n\nstruct primal : public common&lt;primal&gt;\n{\n    static const string name;\n};\nconst string primal::name = \"primal\";\n\nstruct dual : public common&lt;dual&gt;\n{\n    static const string name;\n};\nconst string dual::name = \"dual\";\n\nstruct adaptive : public primal,\n                  public dual\n{\n    virtual void save()\n    {\n        primal::save();\n        cout &lt;&lt; \"    Adaptive\\n\";\n    }\n\n    void run()\n    {\n        primal::run();\n        dual::run();\n    }\n};\n\nint main(int argc, const char *argv[])\n{\n    adaptive a;\n    a.run();\n\n    return 0;\n}\n</code></pre>\n\n<p>and it prints</p>\n\n<pre><code>primal::common\n    Adaptive\nprimal::common\n    Adaptive\n</code></pre>\n\n<p>as the previous version, while I was expecting</p>\n\n<pre><code>primal::common\n    Adaptive\ndual::common\n</code></pre>\n\n<p>The final question is then on how I can get it to do what I want.</p>\n\n<p>Thanks for reading all the way through here, any hint is appreciated!\nI have to stick to C++98 if possible.</p>\n"}, {"tags": ["c++", "windows", "assembly", "x86-64", "masm"], "comments": [{"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 2, "creation_date": 1543449244, "post_id": 53529809, "comment_id": 93928279, "body": "You free the stack using <code>add rsp, ( 0C0h + 030h )</code> and then attempt to do <code>pop rbp</code>. However you pushed <code>rbp</code> between those two chunks so you pop the wrong value. It&#39;s unclear what you need the <code>030h</code> for anyway."}, {"owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1543449770, "post_id": 53529809, "comment_id": 93928397, "body": "@Jester Thanks a lot, fixed by doing add rsp, 0C0h / pop rbp / add rsp, 030h in the end. I wonder whether the code is now good with regards to SEH handling, and with regards to AV searching for unusual calling conventions in software."}, {"owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1543449797, "post_id": 53529809, "comment_id": 93928401, "body": "@Jester About <code>30h</code>, windows needs up to <code>28h</code> bytes on the stack: <a href=\"http://www.gamasutra.com/view/news/178446/Indepth_Windows_x64_ABI_Stack_frames.php\" rel=\"nofollow noreferrer\">gamasutra.com/view/news/178446/&hellip;</a> However, <code>28h</code> is not a multiple of 16, and I need it to be aligned to save/restore these SSE registers. That\u2019s why I rounded up to <code>30h</code>."}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1543450027, "post_id": 53529809, "comment_id": 93928462, "body": "I think you misunderstood that part. That is the shadow space and you only need that if you call other functions and even then, it&#39;s not at that place."}], "owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543448750, "creation_date": 1543448750, "question_id": 53529809, "link": "https://stackoverflow.com/questions/53529809/implementing-a-simple-64-bit-windows-function-in-assembly", "title": "Implementing a simple 64 bit Windows function in assembly", "body": "<p>Because of <a href=\"https://developercommunity.visualstudio.com/content/problem/350355/the-compiler-optimized-a-single-very-fast-instruct.html\" rel=\"nofollow noreferrer\">this bug</a> in VC++ compiler I\u2019m porting parts of my code from C++ to assembly. VC++ doesn\u2019t support inline assembly for 64 bit targets, so I\u2019m forced to just create an assembly file.</p>\n\n<p>Why does the following <strong>empty</strong> function crashes in runtime saying \u201cAccess violation executing location 0x0000000000000000\u201d ?</p>\n\n<p>C++ portion:</p>\n\n<pre><code>extern \"C\"\n{\n    void asm_proc( const void* p1, const void* p2, void* p3 );\n}\n\nint main()\n{\n    asm_proc( nullptr, nullptr, nullptr );\n    return 0;\n}\n</code></pre>\n\n<p>Assembly portion:</p>\n\n<pre><code>PUBLIC asm_proc\n\n; Save the non-volatile XMM registers to the stack starting from specified offset. This uses 160 = A0h bytes of the stack.\n; https://docs.microsoft.com/en-us/cpp/build/register-usage?view=vs-2017#register-volatility-and-preservation\nSAVE_XMM_REGS macro offset\n    movaps [ rsp + offset ], xmm6\n    movaps [ rsp + offset + 10h ], xmm7\n    movaps [ rsp + offset + 20h ], xmm8\n    movaps [ rsp + offset + 30h ], xmm9\n    movaps [ rsp + offset + 40h ], xmm10\n    movaps [ rsp + offset + 50h ], xmm11\n    movaps [ rsp + offset + 60h ], xmm12\n    movaps [ rsp + offset + 70h ], xmm13\n    movaps [ rsp + offset + 80h ], xmm14\n    movaps [ rsp + offset + 90h ], xmm15\nendm\n\n; Restore XMM registers from the stack.\nLOAD_XMM_REGS macro offset\n    movaps xmm15, [ rsp + offset + 90h ]\n    movaps xmm14, [ rsp + offset + 80h ]\n    movaps xmm13, [ rsp + offset + 70h ]\n    movaps xmm12, [ rsp + offset + 60h ]\n    movaps xmm11, [ rsp + offset + 50h ]\n    movaps xmm10, [ rsp + offset + 40h ]\n    movaps xmm8,  [ rsp + offset + 20h ]\n    movaps xmm7,  [ rsp + offset + 10h ]\n    movaps xmm6,  [ rsp + offset ]\nendm\n\n.CODE\n\nalign(16)\nasm_proc PROC FRAME\n; const void* p1: rcx\n; const void* p2: rdx\n; void *p3: r8\n\n    ; Some boilerplate copy-pasted from this repository: https://github.com/lallousx86/AsmInVs/tree/master/x64asm\n\n    ; Prologue\n    sub rsp, 030h ; allocate stack space\n    .allocstack 030h ; encode that change\n    push rbp ; save old frame pointer\n    .pushreg rbp ; encode stack operation\n    mov rbp, rsp ; set new frame pointer\n    .setframe rbp, 0 ; encode frame pointer\n    .endprolog\n\n    ; Need stack space for XMM6-15 registers, they're non-volatile\n    sub rsp, 0C0h\n\n    ; Save non-volatile registers we use.\n    ; https://docs.microsoft.com/en-us/cpp/build/register-usage?view=vs-2017#register-volatility-and-preservation\n    mov QWORD ptr [ rsp ], r12\n    mov QWORD ptr [ rsp + 8 ], r13\n    mov QWORD ptr [ rsp + 10h ], r14\n    mov QWORD ptr [ rsp + 18h ], r15\n    SAVE_XMM_REGS 20h\n\n    ; Actual code goes here, stripped out.\n\n    ; Restore non-volatile registers\n    LOAD_XMM_REGS 20h\n    mov r15, QWORD ptr [ rsp + 18h ]\n    mov r14, QWORD ptr [ rsp + 10h ]\n    mov r13, QWORD ptr [ rsp + 8 ]\n    mov r12, QWORD ptr [ rsp ]\n\n    add rsp, ( 0C0h + 030h )\n    pop rbp\n    ret\n\nasm_proc ENDP\n\nEND\n</code></pre>\n\n<p>P.S. My function doesn\u2019t call any other functions, it\u2019s a leaf one. The actual code I\u2019ve stripped out does use r12-15 and xmm6-15 so I required to preserve them, <a href=\"https://docs.microsoft.com/en-us/cpp/build/register-usage?view=vs-2017#register-volatility-and-preservation.\" rel=\"nofollow noreferrer\">see the ABI</a>.</p>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 4, "creation_date": 1543448873, "post_id": 53529787, "comment_id": 93928186, "body": "Take a look at <a href=\"https://en.cppreference.com/w/cpp/utility/initializer_list\" rel=\"nofollow noreferrer\"><code>std::initializer_list</code></a>"}, {"owner": {"reputation": 3189, "user_id": 7016303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dYmXc.jpg?s=128&g=1", "display_name": "Mikel F", "link": "https://stackoverflow.com/users/7016303/mikel-f"}, "edited": false, "score": 4, "creation_date": 1543448878, "post_id": 53529787, "comment_id": 93928188, "body": "Consider using new and delete rather than malloc and free."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1543448964, "post_id": 53529787, "comment_id": 93928209, "body": "unrelated: <code>printf(&quot;The v size is: %d&quot;, v.size());</code> <code>size_t</code> doesn&#39;t match the %d specifier. You could get weird outputs."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1543449071, "post_id": 53529787, "comment_id": 93928234, "body": "In <code>vector&lt;int&gt; v {3,2,4,5};</code>, <code>{3,2,4,5};</code> are not template parameters. That&#39;s an initializer list."}, {"owner": {"reputation": 65, "user_id": 10008406, "user_type": "registered", "profile_image": "https://graph.facebook.com/1730319873689442/picture?type=large", "display_name": "Emanuel Clur", "link": "https://stackoverflow.com/users/10008406/emanuel-clur"}, "edited": false, "score": 0, "creation_date": 1543449235, "post_id": 53529787, "comment_id": 93928276, "body": "the placeholder works the problem is in &quot;m_array = {a...};&quot; and i want to use more raw than using new or delete. I&#39;m old school ahaha"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1543502357, "post_id": 53529787, "comment_id": 93949735, "body": "@EmanuelClur: &quot;<i>i want to use more raw than using new or delete.</i>&quot; Then why are you using C++?"}, {"owner": {"reputation": 65, "user_id": 10008406, "user_type": "registered", "profile_image": "https://graph.facebook.com/1730319873689442/picture?type=large", "display_name": "Emanuel Clur", "link": "https://stackoverflow.com/users/10008406/emanuel-clur"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1543523602, "post_id": 53529787, "comment_id": 93960845, "body": "@NicolBolas My only reason to use c++ instead of c is templates. Why? Because the newest standasts are a lexical sugar; I mean the use of smart pointers instead of raw pointers or use operators like &quot;new&quot; or &quot;delete&quot; is an action that only makes the languge more &quot;anti dumb&quot;."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1543526233, "post_id": 53529787, "comment_id": 93961962, "body": "@EmanuelClur: &quot;<i>Because the newest standasts are a lexical sugar</i>&quot; Except that they&#39;re not. They&#39;re <i>really</i> not. C++ is not &quot;C with stuff&quot;. You cannot create a C++ object by allocating memory and poking at it through a pointer to that type."}, {"owner": {"reputation": 65, "user_id": 10008406, "user_type": "registered", "profile_image": "https://graph.facebook.com/1730319873689442/picture?type=large", "display_name": "Emanuel Clur", "link": "https://stackoverflow.com/users/10008406/emanuel-clur"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1543531366, "post_id": 53529787, "comment_id": 93963989, "body": "@NicolBolas In memory there&#39;s not an Foo object. e.g: struct Foo {     float x, y; }; int main(){     Foo* f_ptr = (Foo*) malloc(sizeof(Foo)); // In memory 8 bytes (4 per float) }  The only difference between use malloc instead of new operator is: new operator make malloc with the size of the all variables and after that call to constructor. There&#39;s no problem with use that semantic but you can see that makes more &quot;ignorants&quot; programmers. So whathever I want help, no make me angry aahaha"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1543536178, "post_id": 53529787, "comment_id": 93965283, "body": "@EmanuelClur: &quot;<i>The only difference between use malloc instead of new operator is: new operator make malloc with the size of the all variables and after that call to constructor.</i>&quot; Then you can show me the part of the ISO C++ standard that says that <code>malloc</code> creates objects. I&#39;ll give you a head start: <a href=\"https://timsong-cpp.github.io/cppwp/n4659/intro.object#1\" rel=\"nofollow noreferrer\">intro.object/1.</a> That describes all of the C++ constructs that create objects. Your code may &quot;work&quot;, but as far as the standard is concerned, it has undefined behavior. <code>new</code> is not &quot;anti-dumb&quot;; it&#39;s an integral part of the language."}, {"owner": {"reputation": 65, "user_id": 10008406, "user_type": "registered", "profile_image": "https://graph.facebook.com/1730319873689442/picture?type=large", "display_name": "Emanuel Clur", "link": "https://stackoverflow.com/users/10008406/emanuel-clur"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1543537134, "post_id": 53529787, "comment_id": 93965491, "body": "@NicolBolas You rlly think that c++ is OOP?. I&#39;d said that new is an operator like otherone. If you don&#39;t belive me then take a look to the sentence &quot;void* operator new( ... )&quot;. If it&#39;s not enought look at the follow code: struct Foo { int x, y; }; int main() { Foo f{3,4}; int* f_ptr = &amp;f.x; printf(&quot;%d&quot;,f_ptr[0]); }  Why can I do that? Because in memory the types doesn&#39;t exists, for the memory Foo is only bytes. Tell me now where is your object?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1543537802, "post_id": 53529787, "comment_id": 93965669, "body": "@EmanuelClur: &quot;<i>Why can I do that?</i>&quot; Because the standard <i>says</i> you can. <code>f.x</code> is an object of type <code>int</code>, so it has an address. You copy that address to <code>f_ptr</code>, so <code>f_ptr</code> points to that object (which is a subobject of <code>f</code>). And <code>f_ptr[0]</code> also valid; it access the pointer as though it were an array, which is perfectly legal so long as the index is 0. There&#39;s nothing invalid in that code."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1543537897, "post_id": 53529787, "comment_id": 93965692, "body": "@EmanuelClur: &quot;<i>I&#39;d said that new is an operator like otherone.</i>&quot; It isn&#39;t. <code>::operator new</code> is a regular function. The <i>syntax</i> <code>new(...) type</code> is special syntax for creating an object. It does so by calling <code>operator new</code> with the given parameters, then using the return value from that call as the memory to create the <code>type</code> object within. Calling <code>::operator new</code> directly does not create objects; it merely allocates memory."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1543538165, "post_id": 53529787, "comment_id": 93965750, "body": "Your class violates <a href=\"https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">The Rule of Three</a>"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1543538406, "post_id": 53529787, "comment_id": 93965806, "body": "@NicolBolas: &quot;You cannot create a C++ object by allocating memory and poking at it through a pointer to that type.&quot;  You... totally can though.   I mean, I love C++ as much as the next guy, but the <code>new operator</code> in most compilers merely calls malloc, and then uses placement new on the pointer to construct the class. <a href=\"https://stackoverflow.com/questions/8918791/how-to-properly-free-the-memory-allocated-by-placement-new/8918942#8918942\" title=\"how to properly free the memory allocated by placement new\">stackoverflow.com/questions/8918791/&hellip;</a>"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1543538584, "post_id": 53529787, "comment_id": 93965839, "body": "@MooingDuck: &quot;<i>You... totally can though.</i>&quot; Not as far as the <i>standard</i> is concerned. Try doing <code>vector&lt;int&gt; *foo = (vector&lt;int&gt;*)malloc(sizeof(foo));</code> and see if <code>foo-&gt;empty()</code> is true the way it ought to be for a newly created empty <code>vector</code>."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1543539081, "post_id": 53529787, "comment_id": 93965943, "body": "@NicolBolas: Here it is, working, with no undefined behavior: <a href=\"http://coliru.stacked-crooked.com/a/121baacc7a573b1d\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/121baacc7a573b1d</a>  See &#167; 18.6.1.3 on placement new.  Oh, I see the misunderstanding. I thought you meant we couldn&#39;t call placement new, but you&#39;re referring to skipping that step."}], "answers": [{"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1543538586, "post_id": 53549437, "comment_id": 93965841, "body": "Note that this isn&#39;t exception safe.  You&#39;ll have to catch the exception, and destruct the constructed elements, then allow the exception to unwind."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1543538601, "post_id": 53549437, "comment_id": 93965844, "body": "Also, your destructor doesn&#39;t destruct the elements. Wait, what does the destructor do? I&#39;m unfamiliar with that overload.  It appears to leak <code>m_array</code> at least."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1543538926, "post_id": 53549437, "comment_id": 93965917, "body": "@MooingDuck: I fixed the destructor. But I&#39;m not writing out the exception handling code."}, {"owner": {"reputation": 65, "user_id": 10008406, "user_type": "registered", "profile_image": "https://graph.facebook.com/1730319873689442/picture?type=large", "display_name": "Emanuel Clur", "link": "https://stackoverflow.com/users/10008406/emanuel-clur"}, "edited": false, "score": 0, "creation_date": 1543543444, "post_id": 53549437, "comment_id": 93966781, "body": "Thx but ...  there&#39;s no way using variadic template?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 65, "user_id": 10008406, "user_type": "registered", "profile_image": "https://graph.facebook.com/1730319873689442/picture?type=large", "display_name": "Emanuel Clur", "link": "https://stackoverflow.com/users/10008406/emanuel-clur"}, "edited": false, "score": 0, "creation_date": 1543546583, "post_id": 53549437, "comment_id": 93967352, "body": "@EmanuelClur: You could, but that would require recursive template instantiation or using some metaprogramming library. Variadic templates are easy to work with when all you need to do is repeat an expression in sequence, but having to perform both a <code>new</code> <i>and</i> a pointer increment makes it much more difficult."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 1, "last_activity_date": 1543538886, "last_edit_date": 1543538886, "creation_date": 1543536718, "answer_id": 53549437, "question_id": 53529787, "link": "https://stackoverflow.com/questions/53529787/how-can-i-pass-the-values-from-variadic-arguments-teamplate-to-a-raw-pointer/53549437#53549437", "title": "How can i pass the values from variadic arguments teamplate to a raw pointer?", "body": "<p>Braced-init-lists (<code>{}</code> constructs) are used to initialize objects as part of their creation. And the member subobjects of a type are initialized before the constructor starts. You can use a braced-init-list to initialize a member subobject, but only as part of a member initializer list.</p>\n\n<p>And even then, <code>m_array</code> is just a pointer. So you could use braced-init-lists to initialize a pointer from another pointer value. But you can't use it to initialize an array when you don't use proper array syntax to create the array.</p>\n\n<p>If you are creating a true <code>vector</code>-like type, then you'll have to take a <code>std::initializer_list&lt;Type&gt;</code> and copy those elements into the array:</p>\n\n<pre><code>vector(std::initializer_list&lt;type&gt; il)\n : m_size{il.size()},\n : m_array{(type*)::operator new(il.size() * sizeof(type), std::align_val_t{alignof(type)})}\n{\n    auto ptr = m_array;\n    //Warning: not exception safe.\n    for(const type &amp;t : il)\n    {\n        new(ptr) type{t};\n        ++ptr;\n    }\n}\n\n~vector()\n{\n    //Destroy in reverse order.\n    for(int ix = ((int)size() - 1); ix &gt;= 0; --ix)\n        m_array[ix]-&gt;~type();\n\n    ::operator delete(m_array, m_size * sizeof(type), std::align_val_t{alignof(type)});\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 10008406, "user_type": "registered", "profile_image": "https://graph.facebook.com/1730319873689442/picture?type=large", "display_name": "Emanuel Clur", "link": "https://stackoverflow.com/users/10008406/emanuel-clur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1543538886, "creation_date": 1543448613, "last_edit_date": 1543448842, "question_id": 53529787, "link": "https://stackoverflow.com/questions/53529787/how-can-i-pass-the-values-from-variadic-arguments-teamplate-to-a-raw-pointer", "title": "How can i pass the values from variadic arguments teamplate to a raw pointer?", "body": "<p>In this little code i wanna create a vector like std::vector, but implemented by myself.\nI'm sorry but i don't have idea about to solve it, if somebody can help me with that will be great.</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct vector {\nprivate:\n    typedef T type;\n\n    type *m_array;\n    size_t m_size;\n\npublic:\n    vector() { }\n    template &lt;typename ... Args&gt;\n    vector(Args&amp;&amp;... a) {\n        m_size = (size_t) sizeof...(a);\n        m_array = (type*) malloc ( m_size * sizeof(type) );\n        m_array = {a...};\n    }\n    ~vector() {\n        free(m_array);\n    }\n    size_t size() {\n        return m_size;\n    }\n    type operator[](size_t pos) {\n        return m_array[pos];\n    }\n};\n\ntemplate &lt;typename ... Ts&gt;\nsize_t count ( Ts ... args ) {\n    return (size_t)( sizeof...(args) );\n}\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    vector&lt;int&gt; v {3,2,4,5};\n    printf(\"The v size is: %d\", v.size());\n\n    for(int i = 0; i &lt; v.size(); ++i)\n        printf(\"Value for v [ %d ] : %d\", i, v[i]);\n\n    system(\"pause&gt;nul\");\n    return 0;\n}\n</code></pre>\n\n<p>The error in C++ Builder(Embarcadero) is the next:</p>\n\n<pre>\n[bcc32c Error] vector.cpp(29): excess elements in scalar initializer\n  vector.cpp(49): in instantiation of function template specialization 'vector::vector' requested here\n</pre>\n"}, {"tags": ["c++", "getline"], "comments": [{"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 0, "creation_date": 1543448490, "post_id": 53529739, "comment_id": 93928082, "body": "Yes, people write <code>while (getline(stream x)) ...</code> a lot."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1543448638, "post_id": 53529739, "comment_id": 93928127, "body": "I agree that <code>getline(getline(stream, x), y)</code> is icky. I would prefer to see <code>getline(stream, x) &amp;&amp; getline(stream , y)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1543448559, "post_id": 53529765, "comment_id": 93928106, "body": "Probably the fact that it can be called without a <code>std::</code> qualifier, thanks to ADL."}, {"owner": {"reputation": 79, "user_id": 4797233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/353c7012e8e85acf9eaf1f19588b696e?s=128&d=identicon&r=PG&f=1", "display_name": "Valhalla", "link": "https://stackoverflow.com/users/4797233/valhalla"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1543449808, "post_id": 53529765, "comment_id": 93928405, "body": "@Nicol Bolas It was because of the lack of <code>std::</code> qualifier. Thanks!"}, {"owner": {"reputation": 79, "user_id": 4797233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/353c7012e8e85acf9eaf1f19588b696e?s=128&d=identicon&r=PG&f=1", "display_name": "Valhalla", "link": "https://stackoverflow.com/users/4797233/valhalla"}, "edited": false, "score": 0, "creation_date": 1543449981, "post_id": 53529765, "comment_id": 93928448, "body": "Ah, that would make sense. Thanks!"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "is_accepted": false, "score": 4, "last_activity_date": 1543448678, "last_edit_date": 1543448678, "creation_date": 1543448447, "answer_id": 53529765, "question_id": 53529739, "link": "https://stackoverflow.com/questions/53529739/why-is-getline-written-so-strangely/53529765#53529765", "title": "Why is getline written so strangely?", "body": "<p>If the function returned a string, there would be no way of indicating that the read failed, as all string values are valid values that could be returned by this (or any other) function. On the other hand, a stream has lots of error indicator flags that can be tested by the code that calls getline. So people can write code like:</p>\n\n<pre><code> while( std::getline( std::cin, somestring )) {\n     // do stuff with somestring\n }\n</code></pre>\n\n<p>and it is hard to see how you could write similar code if <code>getline</code> returned a string.</p>\n\n<blockquote>\n  <p>why is the function not in the std namespace like the rest of the standard library?</p>\n</blockquote>\n\n<p>It is in the <code>std</code> namespace - what makes you think otherwise?</p>\n"}, {"comments": [{"owner": {"reputation": 79, "user_id": 4797233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/353c7012e8e85acf9eaf1f19588b696e?s=128&d=identicon&r=PG&f=1", "display_name": "Valhalla", "link": "https://stackoverflow.com/users/4797233/valhalla"}, "edited": false, "score": 0, "creation_date": 1543449864, "post_id": 53529837, "comment_id": 93928420, "body": "That&#39;s a good point. I didn&#39;t think of the memory allocation."}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 3, "last_activity_date": 1543448939, "creation_date": 1543448939, "answer_id": 53529837, "question_id": 53529739, "link": "https://stackoverflow.com/questions/53529739/why-is-getline-written-so-strangely/53529837#53529837", "title": "Why is getline written so strangely?", "body": "<blockquote>\n  <p>Why does it take a stream and a string by reference as arguments, only to return the same stream that was passed in?</p>\n</blockquote>\n\n<p>It is a common pattern in the stream library to do that. It means you can test the operation being performed as you perform it. For example:</p>\n\n<pre><code>std::string line;\nwhile(std::getline(std::cin, line))\n{\n    // use line here because we know the read succeeded\n}\n</code></pre>\n\n<p>You can also make succinct parsers by \"chaining\" stream functions:</p>\n\n<p>std::string key, value;</p>\n\n<pre><code>if(std::getline(std::getline(in, key, '='), value))\n    my_map[key] = value;\n</code></pre>\n\n<blockquote>\n  <p>It seems more intuitive to only take the stream as an argument, then return the string that was read. </p>\n</blockquote>\n\n<p>The problem with returning a new string every call is that you are constantly allocating new memory for them instead of reusing the memory already allocated to the string you passed in or that it gained while iterating through a loop.</p>\n\n<pre><code>// Here line will not need to allocate memory every time\n// through the loop. Only when it finds a longer line than\n// it has capacity for:\n\nstd::string line;\nwhile(std::getline(std::cin, line))\n{\n    // use line here because we know the read succeeded\n}\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 4797233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/353c7012e8e85acf9eaf1f19588b696e?s=128&d=identicon&r=PG&f=1", "display_name": "Valhalla", "link": "https://stackoverflow.com/users/4797233/valhalla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1543448939, "creation_date": 1543448290, "question_id": 53529739, "link": "https://stackoverflow.com/questions/53529739/why-is-getline-written-so-strangely", "title": "Why is getline written so strangely?", "body": "<p>I don't understand the design decisions behind the C++ getline function.</p>\n\n<p>Why does it take a stream and a string by reference as arguments, only to return the same stream that was passed in? It seems more intuitive to only take the stream as an argument, then return the string that was read. Returning the same stream lets you chain the call, but would anyone really want to use <code>getline(getline(stream, x), y)</code>?</p>\n\n<p>Additionally, why is the function not in the <code>std</code> namespace like the rest of the standard library?</p>\n"}, {"tags": ["c++", "constants", "c++17", "compiler-optimization", "placement-new"], "comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 2, "creation_date": 1543448036, "post_id": 53529624, "comment_id": 93927953, "body": "This seems like a near duplicate of <a href=\"https://stackoverflow.com/q/40165022/364696\">How does std::launder affect containers?</a>."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1543460420, "post_id": 53529624, "comment_id": 93930615, "body": "My answer to <a href=\"https://stackoverflow.com/a/52997191/1708801\">Implementing a std::vector like container without undefined behavior</a> may explain some of the details."}], "owner": {"reputation": 7427, "user_id": 293195, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/seTSX.png?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/293195/gabriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543448077, "creation_date": 1543447507, "last_edit_date": 1543448077, "question_id": 53529624, "link": "https://stackoverflow.com/questions/53529624/violation-of-const-correctness-placement-new-and-undefined-behavior", "title": "Violation of const-correctness [placement new] and undefined behavior", "body": "<p>I have read the following: <a href=\"https://stackoverflow.com/questions/7586848/placement-new-breaks-consts-and-references/7586946#7586946\">Placement new breaks consts and references?</a>\nand by reading the slides from Matthis Kruse at the <a href=\"https://meetingcpp.com/mcpp/slides/2018/prez.pdf\" rel=\"nofollow noreferrer\">C++ Meeting</a> I am confused regarding  the following code</p>\n\n\n\n<pre><code>struct U { const int i; };\nstd::vector&lt;U&gt; B;\nB.push_back({ 1 });\nB.clear();\nB.push_back({ 2 });\nconst int v = B[0].i; // &lt;- Undefined Behavior\n</code></pre>\n\n<p><code>B.clear()</code> only destructs the objects, and <code>B.push_back({2})</code> uses placement new to construct a new object at the start of the memory location <code>B</code> has allocated.</p>\n\n<ol>\n<li>I don't understand quite why the access <code>B[0].i</code> is undefined behavior.</li>\n<li>Could the compiler have cached <code>B[0].i</code> and possibly output <code>1</code>?</li>\n<li>What has std::launder to do with all this? Is it a tool to really make sure these kind of compiler optimizations cannot happen?</li>\n</ol>\n\n<p>The standard libcxx [llvm] implementation:</p>\n\n\n\n<pre><code>template &lt;class Tp, class Allocator&gt;\ninline typename vector&lt;Tp, Allocator&gt;::reference\nvector&lt;Tp, Allocator&gt;::operator[](size_type n)\n{\n   assert(n &lt; size(), \"vector[] index out of bounds\");\n    return this-&gt;__begin_[n];\n}\n</code></pre>\n\n<p>is the same as in the slides.</p>\n\n<p>References from std 2017:  </p>\n\n<ul>\n<li><a href=\"http://eel.is/c++draft/basic.life#8.3\" rel=\"nofollow noreferrer\">8.3</a> (Possible violation)   </li>\n<li><a href=\"http://eel.is/c++draft/basic.life#8.4\" rel=\"nofollow noreferrer\">8.4</a> (mentioning std::launder)</li>\n</ul>\n"}, {"tags": ["c++", "matlab", "armadillo"], "comments": [{"owner": {"reputation": 640, "user_id": 3793674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62a5746c9da4b2293984258875ce00e1?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/3793674/chrisd"}, "edited": false, "score": 1, "creation_date": 1543448544, "post_id": 53529578, "comment_id": 93928102, "body": "Try the <a href=\"https://sourceforge.net/projects/matio/\" rel=\"nofollow noreferrer\">matio</a> library."}, {"owner": {"reputation": 3366, "user_id": 1080929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78ecd4627fdf46fc3b3a217eeb0e5104?s=128&d=identicon&r=PG", "display_name": "mtall", "link": "https://stackoverflow.com/users/1080929/mtall"}, "edited": false, "score": 0, "creation_date": 1543453187, "post_id": 53529578, "comment_id": 93929141, "body": "You can also directly <a href=\"http://arma.sourceforge.net/docs.html#save_load_mat\" rel=\"nofollow noreferrer\">save</a> it in HDF5 format. Matlab has support for loading HDF5 files."}], "owner": {"reputation": 1, "user_id": 8440323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxwuJ.png?s=128&g=1", "display_name": "H.Finch", "link": "https://stackoverflow.com/users/8440323/h-finch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543447160, "creation_date": 1543447160, "question_id": 53529578, "link": "https://stackoverflow.com/questions/53529578/export-matrices-generated-in-c-using-armadillo-to-mat-files", "title": "Export matrices generated in C++ (using Armadillo) to .mat files", "body": "<p>I have the C++ code below (which is compiled using <a href=\"http://arma.sourceforge.net/\" rel=\"nofollow noreferrer\">Armadillo</a> library) and I want to export the created matrix to a <strong>.mat</strong> file to be later imported in MATLAB. I searched already in Google but I did not find any solution.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;armadillo&gt;\n\nusing namespace std;\nusing namespace arma;\n\nint main(){\n\nint ny,nx,nz;\nny = 2;\nnx = 2;\nnz = 4;\n\ncube A(ny,nx,nz,fill::zeros);\n\nint s;\n\nfor (s = 0; s &lt; nz; s++){\n\n    A.slice(s) = (s+1) * ones&lt;mat&gt;(ny,nx);   \n\n}\n\nreturn 0;}\n</code></pre>\n\n<p>Any Idea of how to store <strong>A</strong> into a <strong>.mat</strong> file?</p>\n\n<p>Ps.: OS = Windows 10</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1543447152, "post_id": 53529551, "comment_id": 93927728, "body": "Recommendation: Don&#39;t store a pointer in the hash table. Store the object directly and the whole problem goes away."}, {"owner": {"reputation": 1, "user_id": 8992392, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O6NH9Q_T6mU/AAAAAAAAAAI/AAAAAAAAChE/mBYAW7wQOFI/photo.jpg?sz=128", "display_name": "p4storr", "link": "https://stackoverflow.com/users/8992392/p4storr"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1543447223, "post_id": 53529551, "comment_id": 93927745, "body": "I know, but we&#39;re asked to store a pointer :]"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1543447703, "post_id": 53529551, "comment_id": 93927849, "body": "Well that sucks. Can you store <code>std::unique_ptr&lt;Myclass&gt;</code>? It&#39;s still a pointer... Sorta. If not, <code>HashTable.insert(new Myclass);</code> and make sure to iterate through the hash table and <code>delete</code> all of the <code>Myclass</code>es it stores when you&#39;re done. Better still, embrace <a href=\"https://stackoverflow.com/questions/2321511/what-is-meant-by-resource-acquisition-is-initialization-raii\">RAII</a> and teach <code>HashTable</code> to own (build and destroy in this case) the contained <code>Myclass</code>es ."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8992392, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O6NH9Q_T6mU/AAAAAAAAAAI/AAAAAAAAChE/mBYAW7wQOFI/photo.jpg?sz=128", "display_name": "p4storr", "link": "https://stackoverflow.com/users/8992392/p4storr"}, "edited": false, "score": 0, "creation_date": 1543447844, "post_id": 53529602, "comment_id": 93927895, "body": "How do I create a new Myclass object if it&#39;s not a pointer to an object?"}, {"owner": {"reputation": 1619, "user_id": 7864413, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208517922736756/picture?type=large", "display_name": "Phil M", "link": "https://stackoverflow.com/users/7864413/phil-m"}, "edited": false, "score": 0, "creation_date": 1543449069, "post_id": 53529602, "comment_id": 93928233, "body": "Declare object within Insert if you want a new one each time. That might create other problems if there&#39;s a legitimate reason that object is currently global"}], "tags": [], "owner": {"reputation": 39539, "user_id": 153430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a446e1fd338fb334fa68b3f7470cd65b?s=128&d=identicon&r=PG", "display_name": "Jim Lewis", "link": "https://stackoverflow.com/users/153430/jim-lewis"}, "is_accepted": false, "score": 0, "last_activity_date": 1543447340, "creation_date": 1543447340, "answer_id": 53529602, "question_id": 53529551, "link": "https://stackoverflow.com/questions/53529551/multiple-instances-of-global-variable/53529602#53529602", "title": "multiple instances of global variable", "body": "<p>You never create a new <code>Myclass</code> object. You're just getting the same pointer to the same object every time <code>insert()</code> is called.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 8992392, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O6NH9Q_T6mU/AAAAAAAAAAI/AAAAAAAAChE/mBYAW7wQOFI/photo.jpg?sz=128", "display_name": "p4storr", "link": "https://stackoverflow.com/users/8992392/p4storr"}, "edited": false, "score": 0, "creation_date": 1543447815, "post_id": 53529660, "comment_id": 93927883, "body": "Already did, but it takes like 3 minutes to generate an output and before it ends printing the output it gives me a segmentation fault."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1543447839, "post_id": 53529660, "comment_id": 93927892, "body": "Recommend moving <code>Myclass *object;</code> into <code>insert</code>, no need for global here, add soem explanation of what you&#39;re doing and why, and drop in a reminder to <code>delete</code> all of the ... Never mind. You just added that last bit."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 1, "user_id": 8992392, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O6NH9Q_T6mU/AAAAAAAAAAI/AAAAAAAAChE/mBYAW7wQOFI/photo.jpg?sz=128", "display_name": "p4storr", "link": "https://stackoverflow.com/users/8992392/p4storr"}, "edited": false, "score": 1, "creation_date": 1543447912, "post_id": 53529660, "comment_id": 93927915, "body": "@p4storr you have another bug in that case. Sahil&#39;s answer is the most direct correct solution to your current problem."}, {"owner": {"reputation": 373, "user_id": 5579840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c3ea32a6e9606728457334a4d80002?s=128&d=identicon&r=PG&f=1", "display_name": "Sahil Dhoked", "link": "https://stackoverflow.com/users/5579840/sahil-dhoked"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1543447990, "post_id": 53529660, "comment_id": 93927940, "body": "@user4581301 Definitely would recommend moving Myclass *object  into insert. But we don&#39;t really know why it was global in the first place. One example could be the code needs to track the last MyClass. Will add some explanantion"}, {"owner": {"reputation": 373, "user_id": 5579840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c3ea32a6e9606728457334a4d80002?s=128&d=identicon&r=PG&f=1", "display_name": "Sahil Dhoked", "link": "https://stackoverflow.com/users/5579840/sahil-dhoked"}, "reply_to_user": {"reputation": 1, "user_id": 8992392, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O6NH9Q_T6mU/AAAAAAAAAAI/AAAAAAAAChE/mBYAW7wQOFI/photo.jpg?sz=128", "display_name": "p4storr", "link": "https://stackoverflow.com/users/8992392/p4storr"}, "edited": false, "score": 0, "creation_date": 1543448053, "post_id": 53529660, "comment_id": 93927958, "body": "@p4storr what exactly takes 3 miuntes. Also, please share details of the segmentation fault. Is it due to memory leak?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1543448450, "post_id": 53529660, "comment_id": 93928076, "body": "This is currently a nice, clean question. Adding the printing error to it makes the question too broad and less useful to those who follow. The printing error is a different question and should be treated as a different question."}, {"owner": {"reputation": 373, "user_id": 5579840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c3ea32a6e9606728457334a4d80002?s=128&d=identicon&r=PG&f=1", "display_name": "Sahil Dhoked", "link": "https://stackoverflow.com/users/5579840/sahil-dhoked"}, "edited": false, "score": 0, "creation_date": 1543448939, "post_id": 53529660, "comment_id": 93928203, "body": "Maybe you can periodically remove elements from the Hashtable (and delete them)"}], "tags": [], "owner": {"reputation": 373, "user_id": 5579840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c3ea32a6e9606728457334a4d80002?s=128&d=identicon&r=PG&f=1", "display_name": "Sahil Dhoked", "link": "https://stackoverflow.com/users/5579840/sahil-dhoked"}, "is_accepted": false, "score": 0, "last_activity_date": 1543448307, "last_edit_date": 1543448307, "creation_date": 1543447677, "answer_id": 53529660, "question_id": 53529551, "link": "https://stackoverflow.com/questions/53529551/multiple-instances-of-global-variable/53529660#53529660", "title": "multiple instances of global variable", "body": "<p>How about this?</p>\n\n<pre><code>Myclass *object;\n\nvoid insert()\n{\n    object = new Myclass();\n    object-&gt;doSomething();\n    //Myclass * ptr = object;\n    HashTable.insert(object);\n}\n</code></pre>\n\n<p><strong>Edit</strong>: </p>\n\n<p>PS: Make sure you iterate through the hash table and delete all the pointers, else you will have a huge bunch of dangling pointers</p>\n\n<p><strong>Explanation</strong></p>\n\n<p>You need to ensure your code does not modify old <code>object</code> inside the hash table each time <code>insert</code> is called. So, we make <code>object</code> a pointer and instantiate each time the method <code>insert</code> is called.</p>\n"}], "owner": {"reputation": 1, "user_id": 8992392, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O6NH9Q_T6mU/AAAAAAAAAAI/AAAAAAAAChE/mBYAW7wQOFI/photo.jpg?sz=128", "display_name": "p4storr", "link": "https://stackoverflow.com/users/8992392/p4storr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1543448307, "creation_date": 1543446989, "question_id": 53529551, "link": "https://stackoverflow.com/questions/53529551/multiple-instances-of-global-variable", "title": "multiple instances of global variable", "body": "<p>I got a global variable and a function that everytime it's called, it creates an object of type Myclass, and inserts a pointer to that object inside a HashTable.</p>\n\n<p>So, I want that everytime 'insert' is called it creates a new object of Myclass, makes a pointer to it and store that pointer into a hash table.</p>\n\n<p>Something like:</p>\n\n<pre><code>Myclass object;\n\nvoid insert()\n{\n    object.doSomething();\n    Myclass * ptr = &amp;object;\n    HashTable.insert(ptr);\n}\n</code></pre>\n\n<p>But it doesn't work since everytime 'insert' is called it overwrite the previous object.</p>\n"}, {"tags": ["c++", "visual-studio-2017"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1543447354, "post_id": 53529535, "comment_id": 93927772, "body": "Add <code>scoretotal</code> member to <code>contestants</code> and use it to hold the contestant&#39;s total score. Then sort the list of contestants  by <code>scoretotal</code>. Done."}], "answers": [{"tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": false, "score": 1, "last_activity_date": 1543447305, "creation_date": 1543447305, "answer_id": 53529596, "question_id": 53529535, "link": "https://stackoverflow.com/questions/53529535/how-to-tag-array-number-with-string-using-a-struct/53529596#53529596", "title": "How to &quot;tag&quot; array number with string using a struct?", "body": "<p>Instead of storing and sorting <code>scoretotals</code>, store and sort <code>contestant</code>'s!!</p>\n\n<p>If you add a function for calculating <code>&lt;</code>, you can call <code>sort()</code> with your own struct!</p>\n\n<pre><code>struct less_than_key {\n    inline bool operator() (const contestant&amp; c1, const contestant&amp; c2)\n    {\n        //Consider making a different function to calculate totals to simplify this copy/paste!\n        double c1_total = (c1.score1 + ... + c1.score9) * c1.difficulty;\n        double c2_total = (c2.score1 + ... + c2.score9) * c2.difficulty;\n\n        return (c1_total &lt; c2_total);\n    }\n};\n</code></pre>\n\n<p>And then you can sort with:</p>\n\n<pre><code>std::sort(people, people + 50, less_than_key());\n</code></pre>\n\n<p>After that, it'd be as simple as pulling out the first person and grabbing their name and total!</p>\n"}], "owner": {"reputation": 9, "user_id": 10475758, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UolV36NIa1g/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVjeCYu5iwdtox3BX56qgXhVRohnQ/mo/photo.jpg?sz=128", "display_name": "Kian B.", "link": "https://stackoverflow.com/users/10475758/kian-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1543447305, "creation_date": 1543446831, "question_id": 53529535, "link": "https://stackoverflow.com/questions/53529535/how-to-tag-array-number-with-string-using-a-struct", "title": "How to &quot;tag&quot; array number with string using a struct?", "body": "<p>So I have a loop that takes a line of formatted input that has a name and several numbers and it performs an operation to determine the total score based on those numbers. At the end of the program it is supposed to output the highest score as well as the name of the person who achieved the score. I have a count variable that increases each time it goes through the loop to score the number of the previous \"total score\" into an array. At the end of the program that array with all the totals is sorted from highest to lowest and then scoretotals[0] is outputted to display the highest score. My question is what is the easiest way to get the name corresponding to that number into a value that can be outputted at the end?</p>\n\n<p>I have tried making a struct and then making that array part of the struct but this brings a lot of errors. So here is my code without attempts to output the name corresponding to the highest score</p>\n\n<pre><code> #include &lt;iostream&gt;\n    #include &lt;cmath&gt;\n    #include &lt;string&gt;\n    #include &lt;fstream&gt;\n    #include &lt;algorithm&gt;\n    #include &lt;functional&gt;\n    #include &lt;iomanip&gt;\n    using namespace std;\n\n    int main()\n    {\n        cout &lt;&lt; \"Name    \" &lt;&lt; \"Diff   \" &lt;&lt; \"Sorted scores                                      \" &lt;&lt; \"Total\" &lt;&lt; endl;\n        struct contestants\n        {\n            string name;\n            double difficulty;\n            double score1;\n            double score2;\n            double score3;\n            double score4;\n            double score5;\n            double score6;\n            double score7;\n            double score8;\n            double score9;\n        };\n        contestants person;\n\n        ifstream divers (\"m6dive.txt\");\n        int count = 0;\n\n\n\n        double scoretotals[50];\n\n        while (divers &gt;&gt; person.name &gt;&gt; person.difficulty &gt;&gt; person.score1 &gt;&gt; person.score2 &gt;&gt; person.score3 &gt;&gt; person.score4 &gt;&gt; person.score5 &gt;&gt; person.score6 &gt;&gt; person.score7 &gt;&gt; person.score8 &gt;&gt; person.score9)\n        {\n\n\n            double scores[9] = { person.score1, person.score2, person.score3, person.score4, person.score5, person.score6, person.score7, person.score8, person.score9 };\n\n            std::sort(scores, scores + 9, std::greater&lt; double &gt;()); //sorts from max to min\n\n            double total = (scores[1] + scores[2] + scores[3] + scores[4] + scores[5] + scores[6] + scores[7]) * person.difficulty; //computes score (total excluding min,max multiplied by score)\n\n            //outputs name, difficulty, scores sorted and total\n            cout &lt;&lt; person.name &lt;&lt; \"\\t\" &lt;&lt; std::setprecision(1) &lt;&lt; fixed &lt;&lt; person.difficulty &lt;&lt; \"\\t\" &lt;&lt; scores[8] &lt;&lt; \"\\t\" &lt;&lt; \"\\t\" &lt;&lt; scores [7] &lt;&lt; \" \"&lt;&lt;  scores [6] &lt;&lt; \" \" &lt;&lt; scores[5] &lt;&lt; \" \" &lt;&lt; scores[4] &lt;&lt; \" \" &lt;&lt; scores [3] &lt;&lt; \" \" &lt;&lt; scores [2] &lt;&lt; \" \" &lt;&lt;scores[1] &lt;&lt; \" \" &lt;&lt; scores [0] &lt;&lt; \"   \" &lt;&lt; total &lt;&lt; endl;\n\n\n            scoretotals[count] = total;\n            count++;\n        }\n\n        std::sort(scoretotals, scoretotals + 50, std::greater&lt; double &gt;());\n        cout &lt;&lt; \"Highest score is \" &lt;&lt; scoretotals[0];\n\n    }\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Name    Diff   Sorted scores                                      Total\nAnne    2.0     8.0             8.0 8.5 8.5 9.0 9.0 9.0 9.5 9.5   123.0\nSarah   3.0     8.5             8.5 8.5 8.5 9.0 9.0 9.0 9.5 9.5   186.0\nJon     1.5     6.0             7.0 7.5 7.5 7.5 8.0 8.5 8.5 8.5   81.8\nHighest score is 186.0\n. . .\n</code></pre>\n"}, {"tags": ["c++", "winapi", "memory-management", "virtualalloc"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 2, "creation_date": 1543444358, "post_id": 53529031, "comment_id": 93926945, "body": "<code>char* char_ptr = static_cast&lt;char*&gt;(ptr); char_ptr[i] = &#39;a&#39;;</code> Or, for your specific example, <code>memset(ptr, &#39;a&#39;, 3000);</code>"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1543444472, "post_id": 53529031, "comment_id": 93926988, "body": "virtualalloc and winapi here unrelated at all."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1543444491, "post_id": 53529031, "comment_id": 93926994, "body": "Hard to believe that the code you link to doesn&#39;t compile. Ignoring return values is always a very bad idea. Don&#39;t neglect error checking. Why reserve and commit in separate steps? Why not use the standard library allocator."}, {"owner": {"reputation": 1, "user_id": 10718699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe7f0d86542b3adb30d0cf8f4871639?s=128&d=identicon&r=PG&f=1", "display_name": "og9itepa", "link": "https://stackoverflow.com/users/10718699/og9itepa"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1543446410, "post_id": 53529031, "comment_id": 93927565, "body": "@David Heffernan You are right ignoring return values is a bad idea ignoring them is until i understand how the code works at its core.I have reserve and commit seperated because i from what i tested these two work the same when they are separated and when they are together so for the sake of distinguishing them easily i used them separatedly. The code in the link gives error on  __try and __except ( PageFaultExceptionFilter( GetExceptionCode() ) ) and when i comment them out the code compiles and runs but when it is about to write to memory it just freeze."}, {"owner": {"reputation": 1, "user_id": 10718699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe7f0d86542b3adb30d0cf8f4871639?s=128&d=identicon&r=PG&f=1", "display_name": "og9itepa", "link": "https://stackoverflow.com/users/10718699/og9itepa"}, "edited": false, "score": 0, "creation_date": 1543446418, "post_id": 53529031, "comment_id": 93927571, "body": "Im not using the standard library allocator because i want to have a more direct control of the memory for example being able to have a large contiguous space of pointers and allocate-deallocate parts of it without affecting (my main concern here is fragmentation) the rest of the memory (such as the heap)."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10718699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe7f0d86542b3adb30d0cf8f4871639?s=128&d=identicon&r=PG&f=1", "display_name": "og9itepa", "link": "https://stackoverflow.com/users/10718699/og9itepa"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1543480514, "post_id": 53529634, "comment_id": 93937131, "body": "@David Heffernan Yes indeed i should be checking for errors this is the next step to take from here im just experimenting a bit to get familiar with it.  thank you for your advice."}], "tags": [], "owner": {"reputation": 1, "user_id": 10718699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe7f0d86542b3adb30d0cf8f4871639?s=128&d=identicon&r=PG&f=1", "display_name": "og9itepa", "link": "https://stackoverflow.com/users/10718699/og9itepa"}, "is_accepted": false, "score": -1, "last_activity_date": 1543495754, "last_edit_date": 1543495754, "creation_date": 1543447543, "answer_id": 53529634, "question_id": 53529031, "link": "https://stackoverflow.com/questions/53529031/how-to-put-a-value-in-memory-allocated-by-virtualalloc-in-c/53529634#53529634", "title": "How to put a value in memory allocated by VirtualAlloc in c++?", "body": "<p>@Igor Tandetnik's reply worked</p>\n\n<pre><code>#include&lt;windows.h&gt;\n\nint main() {\n LPVOID ptr = VirtualAlloc(NULL,3000,MEM_RESERVE,PAGE_READWRITE); //reserving memory\n ptr = VirtualAlloc(ptr,3000,MEM_COMMIT,PAGE_READWRITE); //commiting memory\n memset(ptr, 'a', 3000);\n VirtualFree(ptr, 0, MEM_RELEASE); //releasing memory\nreturn 0;\n}\n</code></pre>\n\n<p>thank you for your reply.</p>\n\n<p>[edit]\nalso tried casting to char* and it works too.<br>\nThanks again.</p>\n\n<pre><code>#include&lt;windows.h&gt;\nint main() {\n int i;\n LPVOID ptr = VirtualAlloc(NULL,3000,MEM_RESERVE,PAGE_READWRITE); //reserving memory\nptr = VirtualAlloc(ptr,3000,MEM_COMMIT,PAGE_READWRITE); //commiting memory  \nchar* char_ptr = static_cast&lt;char*&gt;(ptr);\n\nfor(i=0;i&lt;3000;i++){\n    char_ptr[i] = 'a';  \n} \n\nVirtualFree(ptr, 0, MEM_RELEASE); //releasing memory\n\nreturn 0;\n}\n</code></pre>\n\n<p>[edit][2]<br>\nHandling return values as @DavidHeffernan sugested:  </p>\n\n<pre><code>#include&lt;windows.h&gt;  \n#include&lt;iostream&gt;\nusing namespace std; \n\nint main() {\nsize_t in_num_of_bytes,i;\ncout&lt;&lt;\"Please enter the number of bytes you want to allocate:\";\ncin&gt;&gt;in_num_of_bytes;                                      \n\nLPVOID ptr = VirtualAlloc(NULL,in_num_of_bytes,MEM_RESERVE | MEM_COMMIT,PAGE_READWRITE); //reserving and commiting memory\n\nif(ptr){\n    char* char_ptr = static_cast&lt;char*&gt;(ptr);\n    for(i=0;i&lt;in_num_of_bytes;i++){ //write to memory\n        char_ptr[i] = 'a';\n    }\n\n    for(i=0;i&lt;in_num_of_bytes;i++){ //print memory contents\n        cout&lt;&lt;char_ptr[i];\n    }\n\n    VirtualFree(ptr, 0, MEM_RELEASE); //releasing memory    \n}else{\n    cout&lt;&lt;\"[ERROR]:Could not allocate \"&lt;&lt;in_num_of_bytes&lt;&lt;\" bytes of memory\"&lt;&lt;endl; \n}\n\nreturn 0;\n} \n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10718699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe7f0d86542b3adb30d0cf8f4871639?s=128&d=identicon&r=PG&f=1", "display_name": "og9itepa", "link": "https://stackoverflow.com/users/10718699/og9itepa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2591, "favorite_count": 1, "answer_count": 1, "score": -4, "last_activity_date": 1543495754, "creation_date": 1543444010, "last_edit_date": 1543479045, "question_id": 53529031, "link": "https://stackoverflow.com/questions/53529031/how-to-put-a-value-in-memory-allocated-by-virtualalloc-in-c", "title": "How to put a value in memory allocated by VirtualAlloc in c++?", "body": "<p>I'm trying to learn how to use the VirtualAlloc and VirtualFree functions.</p>\n\n<p>I have read msdn's reference on <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366887(v=vs.85).aspx\" rel=\"nofollow noreferrer\">VirtualAlloc</a> and <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366892(v=vs.85).aspx\" rel=\"nofollow noreferrer\">VirtualFree</a> and understood how to use them (at least on a basic level). </p>\n\n<p>The problem is i that i couldn't find how to put values in the allocated memory.</p>\n\n<p>I attempted to write a simple c++ application that:<br>\n1. Reserves 3000 bytes of memory with VirtualAlloc.<br>\n2. Commits the reserved memory.<br>\n3. Puts char type values in the commited memory.<br>\n4. Releases the memory with VirtualFree.  </p>\n\n<pre><code>#include&lt;windows.h&gt;\n\nint main() {\n\n LPVOID ptr = VirtualAlloc(NULL,3000,MEM_RESERVE,PAGE_READWRITE); //reserving memory\n\n ptr = VirtualAlloc(ptr,3000,MEM_COMMIT,PAGE_READWRITE); //commiting memory\n\n    int i;\n    for(i=0; i&lt;3000; i++) {\n       ptr[i]= 'a';         //failed attempt to fill the allocated memory with 'a'\n    }\n\n VirtualFree(ptr, 0, MEM_RELEASE); //releasing memory\n\nreturn 0;\n}\n</code></pre>\n\n<p>ofcourse this gives:</p>\n\n<pre><code>[Warning] pointer of type 'void *' used in arithmetic [-Wpointer-arith]. \n[Error] 'LPVOID {aka void*}' is not a pointer-to-object type.\n</code></pre>\n\n<p>So my question is how do i correctly put a value in the memory allocated by VirtualAlloc in c++?</p>\n\n<p>I also found <a href=\"https://docs.microsoft.com/el-gr/windows/desktop/Memory/reserving-and-committing-memory\" rel=\"nofollow noreferrer\">this</a> example but it didn't compile and i couldn't get it to work.</p>\n"}, {"tags": ["c++", "codeblocks", "mingw-w64"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1543443899, "post_id": 53528993, "comment_id": 93926802, "body": "Where did you get mingw64  from?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1543444328, "post_id": 53528993, "comment_id": 93926941, "body": "Unrelated: Can we talk you out of <code>_beginthreadex</code> and into <code>std::thread</code>?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1543444411, "post_id": 53528993, "comment_id": 93926965, "body": "Looks like you are missing an include. <a href=\"https://msdn.microsoft.com/en-us/library/kdzttdcb.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/kdzttdcb.aspx</a> says you need <code>#include &lt;process.h&gt;</code>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1543444479, "post_id": 53528993, "comment_id": 93926990, "body": "I agree with @user4581301 you should use <code>std::thread</code> anyways."}, {"owner": {"reputation": 139, "user_id": 3259383, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/00cae708183070bec44569ba5aa7d4d1?s=128&d=identicon&r=PG&f=1", "display_name": "user3259383", "link": "https://stackoverflow.com/users/3259383/user3259383"}, "edited": false, "score": 0, "creation_date": 1543445162, "post_id": 53528993, "comment_id": 93927235, "body": "Thanks drescherjm, that was it, missing #include &lt;process.h&gt;. It&#39;s funny none of the other compilers complained about that"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1543445304, "post_id": 53528993, "comment_id": 93927269, "body": "Maybe some other system header you have pulled it in on the older compiler."}, {"owner": {"reputation": 139, "user_id": 3259383, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/00cae708183070bec44569ba5aa7d4d1?s=128&d=identicon&r=PG&f=1", "display_name": "user3259383", "link": "https://stackoverflow.com/users/3259383/user3259383"}, "edited": false, "score": 0, "creation_date": 1543445668, "post_id": 53528993, "comment_id": 93927378, "body": "I included only &lt;windows.h&gt; and neither MinGW or the VC compiler complained. Doesn&#39;t matter anyway"}], "owner": {"reputation": 139, "user_id": 3259383, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/00cae708183070bec44569ba5aa7d4d1?s=128&d=identicon&r=PG&f=1", "display_name": "user3259383", "link": "https://stackoverflow.com/users/3259383/user3259383"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543444266, "creation_date": 1543443741, "last_edit_date": 1543444266, "question_id": 53528993, "link": "https://stackoverflow.com/questions/53528993/how-to-get-mingw64-to-work-with-codeblocks", "title": "How to get mingw64 to work with codeblocks", "body": "<p>I'm trying to get the latest mingw64 working with codeblocks 17.12. I have setup the global compiler settings correctly (as per here:<a href=\"https://medium.com/@yzhong.cs/code-blocks-compile-64-bit-under-windows-with-mingw-w64-79101f5bbc02\" rel=\"nofollow noreferrer\">https://medium.com/@yzhong.cs/code-blocks-compile-64-bit-under-windows-with-mingw-w64-79101f5bbc02</a>). The project I'm trying to compile fails at _beginthreadex. If I compile using the MinGW that comes with codeblocks it works fine (at least it doesn't fail at that point).\nAnyone know what might be the problem?\nThis is the log:</p>\n\n<pre>\nC:\\backup\\warlord\\Warlord\\Warlord\\FightScreen.cpp: In member function 'void FightScreen::StartLoading()':\nC:\\backup\\warlord\\Warlord\\Warlord\\FightScreen.cpp:444:21: error: '_beginthreadex' was not declared in this scope\n  m_handle = (void *)_beginthreadex(0, 0, &LoadInThread, 0, 0, 0);\n                     ^~~~~~~~~~~~~~\nC:\\backup\\warlord\\Warlord\\Warlord\\FightScreen.cpp:444:21: note: suggested alternative: 'OpenThread'\n  m_handle = (void *)_beginthreadex(0, 0, &LoadInThread, 0, 0, 0);\n                     ^~~~~~~~~~~~~~\n                     OpenThread\n</pre>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 63, "user_id": 6690832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3726358dc954f370c6be102d0620af8a?s=128&d=identicon&r=PG&f=1", "display_name": "V Mircan", "link": "https://stackoverflow.com/users/6690832/v-mircan"}, "reply_to_user": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1543443241, "post_id": 53528861, "comment_id": 93926540, "body": "Well because it seems not to link properly. I am trying to get out of a class interdependence loop and i came up with this workaround of making the second class template so that it didn&#39;t need to include the first one."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1543443271, "post_id": 53528861, "comment_id": 93926557, "body": "Highly related: <a href=\"https://stackoverflow.com/questions/31345193/how-can-an-incomplete-type-be-used-as-a-template-parameter-to-vector-here\" title=\"how can an incomplete type be used as a template parameter to vector here\">stackoverflow.com/questions/31345193/&hellip;</a>  Retracted as a dupe as I&#39;m not sure if general support was added."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 4, "creation_date": 1543443272, "post_id": 53528861, "comment_id": 93926558, "body": "You need to show your minimal code for help."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 3, "creation_date": 1543443670, "post_id": 53528861, "comment_id": 93926714, "body": "If you have a link error and that&#39;s relevant to your question, you need to add the error message to your question, along with anything else that is relevant."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10605163"}, "is_accepted": true, "score": 2, "last_activity_date": 1543445520, "last_edit_date": 1543445520, "creation_date": 1543445133, "answer_id": 53529242, "question_id": 53528861, "link": "https://stackoverflow.com/questions/53528861/can-a-class-have-members-that-take-as-argument-the-current-class/53529242#53529242", "title": "Can a class have members that take as argument the current class", "body": "<p>When <code>std::vector&lt;Player&lt;Game&gt;*&gt; players;</code> is parsed, <code>Game</code>'s definition is not yet complete. Therefore <code>Game</code> will be considered <em>incomplete type</em> until its is. Then <code>T=Game</code> in <code>Player</code> and <code>Card</code> are also incomplete at their respective instantiation.</p>\n\n<p>This is not a problem in itself. Incomplete types may be used, but there is a list of situation in which their use is prohibited (see <a href=\"https://en.cppreference.com/w/cpp/language/type#Incomplete_type\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/language/type#Incomplete_type</a> for a reference list).</p>\n\n<p>From your definition for <code>Player</code> and <code>Card</code> it doesn't seem like it requires a complete type for <code>T</code>, however this is highly dependent on the code you left out, e.g. if either of them have a data member of type <code>T</code> or type dependent on <code>T</code>, then there might be a problem.</p>\n\n<p>There is also the question of whether <code>std::vector</code> can accept an incomplete type as template argument. Before C++17 this was not allowed, since C++17 it is allowed at least in the declaration (but not for access to its members). In any case, given your code <code>Card&lt;T&gt;</code> at <code>std::vector&lt;Card&lt;T&gt;&gt; hand;</code> instantiated with <code>T=Game</code> is complete and so the vector is not an issue.</p>\n\n<p>(The way the code was posted, there is also an issue in the template declaration order which I did not address as I have knowledge of the include order and forward-declarations)</p>\n"}], "owner": {"reputation": 63, "user_id": 6690832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3726358dc954f370c6be102d0620af8a?s=128&d=identicon&r=PG&f=1", "display_name": "V Mircan", "link": "https://stackoverflow.com/users/6690832/v-mircan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 53529242, "answer_count": 1, "score": 0, "last_activity_date": 1543445520, "creation_date": 1543442980, "last_edit_date": 1543443788, "question_id": 53528861, "link": "https://stackoverflow.com/questions/53528861/can-a-class-have-members-that-take-as-argument-the-current-class", "title": "Can a class have members that take as argument the current class", "body": "<p>My question is simple:\nCan you have something like this:</p>\n\n<pre><code>class A {\n    B&lt;A&gt; member;\n}\n</code></pre>\n\n<p>Here is a very simplified version of my program:</p>\n\n<pre><code>//Game.h\n\nclass Game{\n     std::vector&lt;Player&lt;Game&gt;*&gt; players;\n}\n\n//Player.h\n\ntemplate &lt;typename T&gt;\nclass Player{\n     std::vector&lt;Card&lt;T&gt;&gt; hand;\n}\n\n//Card.h\ntemplate &lt;typename T&gt;\nclass Card {\n    virtual void playCard(T&amp; game);\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "inheritance", "visibility", "typedef"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10671686"}, "edited": false, "score": 0, "creation_date": 1543454448, "post_id": 53528957, "comment_id": 93929415, "body": "Thanks for your reply, More concretely the problem is that A is a Tree and B an array-like container that saves in memory my defined Node using the Tree structure. So container needs to use internally a tree of nodes.  I suppose this is more or less a common design for datastructures, so how can the problem be resolved typically ?"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1543469268, "last_edit_date": 1543469268, "creation_date": 1543443506, "answer_id": 53528957, "question_id": 53528815, "link": "https://stackoverflow.com/questions/53528815/c-accessibility-vs-visibility/53528957#53528957", "title": "C++ - Accessibility VS visibility", "body": "<p>The problem is that <code>B&lt;T&gt;::Node</code> cannot be used in that line since <code>B&lt;T&gt;</code> is not yet complete. Without a complete definition of <code>B</code>, the compiler cannot use the nested type.</p>\n\n<p>The error will be clearer if you use:</p>\n\n<pre><code>template&lt;typename T&gt;\nclass B: public A&lt;typename B&lt;T&gt;::Node&gt; {\nprivate:\n    struct Node{ int x=42;};\n};\n</code></pre>\n\n<p>With that, g++ produces a more easily understood error with the following code.</p>\n\n<pre><code>template&lt;typename T&gt;\nclass A {};    \n\ntemplate&lt;typename T&gt;\nclass B: public A&lt;typename B&lt;T&gt;::Node&gt; {\nprivate:\n    struct Node{ int x=42;};\n};\n\nint main()\n{\n   B&lt;int&gt; b;\n}\n</code></pre>\n\n<p>Compiler error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>socc.cc: In instantiation of \u2018class B&lt;int&gt;\u2019:\nsocc.cc:13:11:   required from here\nsocc.cc:6:7: error: invalid use of incomplete type \u2018class B&lt;int&gt;\u2019\n class B: public A&lt;typename B&lt;T&gt;::Node&gt; {\n       ^\nsocc.cc:6:7: note: declaration of \u2018class B&lt;int&gt;\u2019\nsocc.cc: In function \u2018int main()\u2019:\nsocc.cc:13:11: warning: unused variable \u2018b\u2019 [-Wunused-variable]\n    B&lt;int&gt; b;\n           ^\n</code></pre>\n\n<hr>\n\n<p>You commented</p>\n\n<blockquote>\n  <p>More concretely the problem is that <code>A</code> is a Tree and <code>B</code> an array-like container that saves in memory my defined <code>Node</code> using the Tree structure. So container needs to use internally a tree of nodes. I suppose this is more or less a common design for data structures, so how can the problem be resolved typically?</p>\n</blockquote>\n\n<p>This calls for aggregation not inheritance.</p>\n\n<pre><code>template&lt;typename T&gt;\nclass A { ... };\n\n\ntemplate &lt;typename T&gt;\nclass B {\n   private:\n      struct Node{ int x=42;};\n      A&lt;Node&gt; data;\n};\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10671686"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1543469268, "creation_date": 1543442710, "last_edit_date": 1543443013, "question_id": 53528815, "link": "https://stackoverflow.com/questions/53528815/c-accessibility-vs-visibility", "title": "C++ - Accessibility VS visibility", "body": "<p>I am working on an exercise to make sense of C++'s accessibility VS visibility.</p>\n\n<p>The following code doesn't compile obviously, but this is what it ideally must be.</p>\n\n<p>B inherits from A with template parameter Node, and Node is private to B.</p>\n\n<pre><code>template&lt;typename T&gt;\nclass A {...};\n\n\ntemplate&lt;typename T&gt;\nclass B: public A&lt;B&lt;T&gt;::Node&gt; {\nprivate:\n    struct Node{ int x=42;};\n};\n</code></pre>\n\n<p>My tentative was:</p>\n\n<pre><code>template&lt;typename T&gt;\nclass A {...};\n\n\ntemplate&lt;typename T&gt;\nclass B: public A&lt;B&lt;T&gt;::N&gt; {\nprivate:\n    struct Node{ int x=42;};\npublic:\n    typedef Node N;\n};\n</code></pre>\n\n<p>I get <code>Error: type/value mismatch at argument 1 in template parameter list for \u2018template class A\u2019</code> for both.</p>\n\n<p>I am really lost with this, your help is appreciated.</p>\n"}, {"tags": ["c++", "sdl-2", "voronoi"], "comments": [{"owner": {"reputation": 720, "user_id": 10696884, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TZLhm3qAv5U/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gTJ8AUH3mkzlYyEQgF0K4AqDVXLw/mo/photo.jpg?sz=128", "display_name": "Thomas Lang", "link": "https://stackoverflow.com/users/10696884/thomas-lang"}, "edited": false, "score": 2, "creation_date": 1543442617, "post_id": 53528722, "comment_id": 93926319, "body": "If your count of dots is small enough, just re-calculate the whole thing. If not, you can use the special property of a Delaunay triangulation, which can be re-triangulated locally. The Voronoi cells are just like the bounding contour of the triangulation if you will."}], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 8794753, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PuBE5SeYZl0/AAAAAAAAAAI/AAAAAAAAAVI/usyVRWbMceI/photo.jpg?sz=128", "display_name": "Onur Balli", "link": "https://stackoverflow.com/users/8794753/onur-balli"}, "is_accepted": true, "score": 0, "last_activity_date": 1543520372, "creation_date": 1543520372, "answer_id": 53546375, "question_id": 53528722, "link": "https://stackoverflow.com/questions/53528722/interactive-voronoi-polygons/53546375#53546375", "title": "Interactive Voronoi polygons?", "body": "<p>I finally got the answer.\nI made a method in voronoi which gets the points on mouse position which looks like the following:</p>\n\n<pre><code>void GetPointsOnMousePosition() {\n        int x, y;\n        SDL_GetMouseState(&amp;x, &amp;y);\n        int d;\n        isClicked = true;\n        cout &lt;&lt; x &lt;&lt; \" and \" &lt;&lt; y &lt;&lt; endl;\n\n        points_.push_back({ x, y }); //where the black points are placed.\n        CreateColors();\n        CreateSites();\n        SetSitesPoints();\n    }\n</code></pre>\n\n<p>this gets the mouse position and sets it on the x and y and pushes it into the array of points.\nand in the main.cpp i asked for the pointsOnMousePosition method reloaded the bmp and saved it as following:</p>\n\n<pre><code>if (e.button.button == SDL_BUTTON_LEFT) {\n                        //bmp.~MyBitmap();\n                        cout &lt;&lt; \"left button pressed\" &lt;&lt; endl;\n                        v.GetPointsOnMousePosition();\n\n                        //adjusts the voronoi map\n                        bmp.SaveBitmap(\"v.bmp\");\n                        gImageSurface = SDL_LoadBMP(\"v.bmp\");\n                        cout &lt;&lt; \"points added!\" &lt;&lt; endl;\n                        isClicked = false;\n                    }\n</code></pre>\n\n<p>Hopefully this helps someone in the future.</p>\n"}], "owner": {"reputation": 55, "user_id": 8794753, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PuBE5SeYZl0/AAAAAAAAAAI/AAAAAAAAAVI/usyVRWbMceI/photo.jpg?sz=128", "display_name": "Onur Balli", "link": "https://stackoverflow.com/users/8794753/onur-balli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 53546375, "answer_count": 1, "score": -1, "last_activity_date": 1543520372, "creation_date": 1543442164, "last_edit_date": 1543444810, "question_id": 53528722, "link": "https://stackoverflow.com/questions/53528722/interactive-voronoi-polygons", "title": "Interactive Voronoi polygons?", "body": "<p>I am trying to create a Voronoi Diagram which looks like the following(this is also my output at the moment):</p>\n\n<p><a href=\"https://i.stack.imgur.com/9vnsv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9vnsv.png\" alt=\"enter image description here\"></a></p>\n\n<p>and my question was how can I make this interactive. \nAnd with that I mean I want to be able to set black dots and then it should adjust to the map and create a Voronoi polygon.</p>\n\n<p>The code structure of my project contains 2 header classes one is where the Voronoi is calculated, the second is the bitmap and as for last the one main.cpp.</p>\n\n<p>the classes look like the following:</p>\n\n<p>voronoi.h</p>\n\n<pre><code>    #pragma once\n\n#include \"stdafx.h\"\n#include \"MyBitmap.h\"\n#include &lt;windows.h&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n\nstatic int DistanceSqrd(const Point&amp; point, int x, int y) {\n    int xd = x - point.x;\n    int yd = y - point.y;\n    return (xd * xd) + (yd * yd);\n}\n\nclass Voronoi {\npublic:\n    void Make(MyBitmap* bmp, int count) {\n        bmp_ = bmp;\n        CreatePoints(count);\n        CreateColors();\n        CreateSites();\n        SetSitesPoints();\n    }\n\n    void CreateSites() { //voronoi triangulation mathematics\n        int w = bmp_-&gt;width(), h = bmp_-&gt;height(), d;\n\n        for (int hh = 0; hh &lt; h; hh++) {\n            for (int ww = 0; ww &lt; w; ww++) {\n\n                int ind = -1, dist = INT_MAX;\n\n                for (size_t it = 0; it &lt; points_.size(); it++) {\n                    const Point&amp; p = points_[it];\n                    d = DistanceSqrd(p, ww, hh); //lines between points\n                    if (d &lt; dist) {\n                        dist = d;\n                        ind = it;\n                    }\n                }\n\n                if (ind &gt; -1)\n                    SetPixel(bmp_-&gt;hdc(), ww, hh, colors_[ind]);\n                else\n                    __asm nop // should never happen!\n            }\n        }\n    }\n    void SetSitesPoints() {\n        for (const auto&amp; point : points_) {\n            int x = point.x, y = point.y;\n\n            for (int i = -1; i &lt; 2; i++)\n                for (int j = -1; j &lt; 2; j++)\n                    SetPixel(bmp_-&gt;hdc(), x + i, y + j, 0);\n        }\n    }\n\n    void CreatePoints(int count) {\n        const int w = bmp_-&gt;width() - 20, h = bmp_-&gt;height() - 20;\n\n        for (int i = 0; i &lt; count; i++) {\n            points_.push_back({ rand() % w + 10, rand() % h + 10 }); //where the black points are placed.\n        }\n    }\n\n    void CreateColors() {\n        for (size_t i = 0; i &lt; points_.size(); i++) {\n            DWORD c = RGB(255, 0,0); //red\n            DWORD d = RGB(0, 0, 255); //blue\n\n            colors_.push_back(c);\n            colors_.push_back(d);\n        }\n    }\n\n    vector&lt;Point&gt; points_;\n    vector&lt;DWORD&gt; colors_;\n    MyBitmap* bmp_;\n};\n</code></pre>\n\n<p>this is responsible for the voronoi algorithms.</p>\n\n<p>next up the MyBitmap.h:</p>\n\n<pre><code>    #pragma once\n#include \"stdafx.h\"\n#include &lt;windows.h&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nstruct Point {\n    int x, y;\n};\n\nclass MyBitmap {\npublic:\n    MyBitmap() : pen_(nullptr) {}\n    ~MyBitmap() {\n        DeleteObject(pen_);\n        DeleteDC(hdc_);\n        DeleteObject(bmp_);\n    }\n\n    bool Create(int w, int h) {\n        BITMAPINFO  bi;\n        ZeroMemory(&amp;bi, sizeof(bi));\n\n        bi.bmiHeader.biSize = sizeof(bi.bmiHeader);\n        bi.bmiHeader.biBitCount = sizeof(DWORD) * 8;\n        bi.bmiHeader.biCompression = BI_RGB;\n        bi.bmiHeader.biPlanes = 1;\n        bi.bmiHeader.biWidth = w;\n        bi.bmiHeader.biHeight = -h;\n\n        void *bits_ptr = nullptr;\n        HDC dc = GetDC(GetConsoleWindow());\n        bmp_ = CreateDIBSection(dc, &amp;bi, DIB_RGB_COLORS, &amp;bits_ptr, nullptr, 0);\n        if (!bmp_) return false;\n\n        hdc_ = CreateCompatibleDC(dc);\n        SelectObject(hdc_, bmp_);\n        ReleaseDC(GetConsoleWindow(), dc);\n\n        width_ = w;\n        height_ = h;\n\n        return true;\n    }\n\n    void SetPenColor(DWORD clr) {\n        if (pen_) DeleteObject(pen_);\n        pen_ = CreatePen(PS_SOLID, 1, clr);\n        SelectObject(hdc_, pen_);\n    }\n\n    bool SaveBitmap(const char* path) {\n        HANDLE file = CreateFileA(path, GENERIC_WRITE, 0, nullptr, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, nullptr);\n        if (file == INVALID_HANDLE_VALUE) {\n            return false;\n        }\n\n        BITMAPFILEHEADER fileheader;\n        BITMAPINFO infoheader;\n        BITMAP bitmap;\n        GetObject(bmp_, sizeof(bitmap), &amp;bitmap);\n\n        DWORD* dwp_bits = new DWORD[bitmap.bmWidth * bitmap.bmHeight];\n        ZeroMemory(dwp_bits, bitmap.bmWidth * bitmap.bmHeight * sizeof(DWORD));\n        ZeroMemory(&amp;infoheader, sizeof(BITMAPINFO));\n        ZeroMemory(&amp;fileheader, sizeof(BITMAPFILEHEADER));\n\n        infoheader.bmiHeader.biBitCount = sizeof(DWORD) * 8;\n        infoheader.bmiHeader.biCompression = BI_RGB;\n        infoheader.bmiHeader.biPlanes = 1;\n        infoheader.bmiHeader.biSize = sizeof(infoheader.bmiHeader);\n        infoheader.bmiHeader.biHeight = bitmap.bmHeight;\n        infoheader.bmiHeader.biWidth = bitmap.bmWidth;\n        infoheader.bmiHeader.biSizeImage = bitmap.bmWidth * bitmap.bmHeight * sizeof(DWORD);\n\n        fileheader.bfType = 0x4D42;\n        fileheader.bfOffBits = sizeof(infoheader.bmiHeader) + sizeof(BITMAPFILEHEADER);\n        fileheader.bfSize = fileheader.bfOffBits + infoheader.bmiHeader.biSizeImage;\n\n        GetDIBits(hdc_, bmp_, 0, height_, (LPVOID)dwp_bits, &amp;infoheader, DIB_RGB_COLORS);\n\n        DWORD wb;\n        WriteFile(file, &amp;fileheader, sizeof(BITMAPFILEHEADER), &amp;wb, nullptr);\n        WriteFile(file, &amp;infoheader.bmiHeader, sizeof(infoheader.bmiHeader), &amp;wb, nullptr);\n        WriteFile(file, dwp_bits, bitmap.bmWidth * bitmap.bmHeight * 4, &amp;wb, nullptr);\n        CloseHandle(file);\n\n        delete[] dwp_bits;\n        return true;\n    }\n\n    HDC hdc() { return hdc_; }\n    int width() { return width_; }\n    int height() { return height_; }\n\nprivate:\n    HBITMAP bmp_;\n    HDC hdc_;\n    HPEN pen_;\n    int width_, height_;\n};\n</code></pre>\n\n<p>and as last but not least main.cpp:</p>\n\n<pre><code>    // Voronoi Diagram Game.cpp : Defines the entry point for the console application.\n//\n\n#include \"stdafx.h\"\n#include &lt;windows.h&gt;\n#include &lt;SDL_image.h&gt;\n#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;SDL.h&gt;\n#include \"MyBitmap.h\"\n#include \"Voronoi.h\"\n\n//Screen dimension constants\nconst int SCREEN_WIDTH = 740;\nconst int SCREEN_HEIGHT = 550;\n\nbool init();\n\n//Loads media\nbool loadMedia();\n\n//Frees media and shuts down SDL\nvoid close();\n\n//Loads individual image\nSDL_Surface* loadSurface(std::string path);\n\n//The window we'll be rendering to\nSDL_Window* gWindow = NULL;\n\n//The surface contained by the window\nSDL_Surface* gScreenSurface = NULL;\n\n//Current displayed PNG image\nSDL_Surface* gImageSurface = NULL;\n\nSDL_Rect sourceRect;\nSDL_Rect destRect;\n//InputHandler * handler = new InputHandler();\n\nint m_count = 0;\n\nbool init()\n{\n    //Initialization flag\n    bool success = true;\n    //where on the screen it is shown\n    sourceRect.x = 20;\n    sourceRect.y = -10;\n    sourceRect.w = 10;\n    sourceRect.y = 10;\n    //how big the window is that the sprite is shown in\n    destRect.x = 0;\n    destRect.y = 0;\n    destRect.w = 740;\n    destRect.h = 550;\n\n    //Initialize SDL\n    if (SDL_Init(SDL_INIT_VIDEO) &lt; 0)\n    {\n        printf(\"SDL could not initialize! SDL Error: %s\\n\", SDL_GetError());\n        success = false;\n    }\n    else\n    {\n        //Create window\n        gWindow = SDL_CreateWindow(\"SDL Tutorial\", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, SCREEN_WIDTH, SCREEN_HEIGHT, SDL_WINDOW_SHOWN);\n        if (gWindow == NULL)\n        {\n            printf(\"Window could not be created! SDL Error: %s\\n\", SDL_GetError());\n            success = false;\n        }\n        else\n        {\n            //Initialize PNG loading\n            int imgFlags = IMG_INIT_PNG;\n            if (!(IMG_Init(imgFlags) &amp; imgFlags))\n            {\n                printf(\"SDL_image could not initialize! SDL_image Error: %s\\n\", IMG_GetError());\n                success = false;\n            }\n            else\n            {\n                //Get window surface\n                gScreenSurface = SDL_GetWindowSurface(gWindow);\n            }\n        }\n    }\n    return success;\n}\n\nbool loadMedia()\n{\n    //Loading success flag\n    bool success = true;\n\n    //Load PNG surface\n    gImageSurface = SDL_LoadBMP(\"v.bmp\");\n    if (gImageSurface == NULL)\n    {\n        printf(\"Failed to load PNG image!\\n\");\n        success = false;\n    }\n\n    return success;\n}\n\nvoid close()\n{\n    //Free loaded image\n    SDL_FreeSurface(gImageSurface);\n    gImageSurface = NULL;\n\n    //Destroy window\n    SDL_DestroyWindow(gWindow);\n    gWindow = NULL;\n\n    //Quit SDL subsystems\n    IMG_Quit();\n    SDL_Quit();\n}\n\nSDL_Surface* loadSurface(std::string path)\n{\n    //The final optimized image\n    SDL_Surface* optimizedSurface = NULL;\n    //Load image at specified path\n    SDL_Surface* loadedSurface = IMG_Load(path.c_str());\n    if (loadedSurface == NULL)\n    {\n        printf(\"Unable to load image %s! SDL_image Error: %s\\n\", path.c_str(), IMG_GetError());\n    }\n    else\n    {\n        //Convert surface to screen format\n        optimizedSurface = SDL_ConvertSurface(loadedSurface, gScreenSurface-&gt;format, NULL);\n        if (optimizedSurface == NULL)\n        {\n            printf(\"Unable to optimize image %s! SDL Error: %s\\n\", path.c_str(), SDL_GetError());\n        }\n        //Get rid of old loaded surface\n        SDL_FreeSurface(loadedSurface);\n    }\n\n    return optimizedSurface;\n}\n\nint main(int argc, char* args[])\n{\n    MyBitmap bmp;\n    Voronoi v;\n\n    srand(GetTickCount());\n    int clickCount = 0;\n\n    bmp.Create(512, 512); //how big the bitmap is\n    bmp.SetPenColor(0);\n    v.Make(&amp;bmp, 50);\n\n    //Start up SDL and create window\n    if (!init())\n    {\n        printf(\"Failed to initialize!\\n\");\n    }\n    else\n    {\n        // create the newbmp\n        bmp.SaveBitmap(\"v.bmp\");\n        //Load media\n        if (!loadMedia())\n        {\n            printf(\"Failed to load media!\\n\");\n        }\n        else\n        {\n            //Main loop flag\n            bool quit = false;\n\n            SDL_Event e;\n            while (!quit)\n            {\n                //Handle events on queue\n                while (SDL_PollEvent(&amp;e) != 0)\n                {\n                    if (e.type == SDL_QUIT)\n                    {\n                        quit = true;\n                    }\n                    else if (e.type == SDL_MOUSEBUTTONDOWN) {\n                        if (e.button.button == SDL_BUTTON_LEFT) {\n                            //TO DO: create a black dot\n                            //TO DO: add voronoi polygon according to the others\n                            cout &lt;&lt; \"left button pressed\" &lt;&lt; endl;\n                            clickCount++;\n                        }\n                    }\n                }\n                //BitBlt(GetDC(GetConsoleWindow()), 20, 20, 512, 512, bmp.hdc(), 0, 0, SRCCOPY); //shows it in the cmd\n                //Apply the image\n                SDL_BlitSurface(gImageSurface, &amp;destRect, gScreenSurface, &amp;sourceRect);\n\n                //Update the surface\n                SDL_UpdateWindowSurface(gWindow);\n\n            }\n        }\n    }\n    //Free resources and close SDL\n    close();\n    return 0;\n}\n</code></pre>\n\n<p>So to summarize I want to be able to place black dots/Voronoi polygons which adjust to the other Voronoi polygons and I haven't found a way yet to do this.</p>\n\n<p>It has to be done by mouse click and on mouse position which I am working on right now.</p>\n\n<p>It is also alright if it starts Blanco without any Voronoi polygons.</p>\n\n<p>I got a good example for this from <a href=\"http://cfbrasz.github.io/VoronoiColoring.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>I have a rough knowledge of what it does (except for the MyBitmap.h) but I got the source code from <a href=\"https://rosettacode.org/wiki/Voronoi_diagram\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1543442114, "post_id": 53528694, "comment_id": 93926133, "body": "&quot;My question is : why doesn&#39;t he call the array version of the operators if it&#39;s to create an array?&quot; because he wants to allocate raw memory to store objects later rather than create array of existing objects."}, {"owner": {"reputation": 554, "user_id": 2924010, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/PIGug.jpg?s=128&g=1", "display_name": "Beno&#238;t Dubreuil", "link": "https://stackoverflow.com/users/2924010/beno%c3%aet-dubreuil"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1543442202, "post_id": 53528694, "comment_id": 93926167, "body": "I meant like the variables <code>test1</code> in my code."}, {"owner": {"reputation": 554, "user_id": 2924010, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/PIGug.jpg?s=128&g=1", "display_name": "Beno&#238;t Dubreuil", "link": "https://stackoverflow.com/users/2924010/beno%c3%aet-dubreuil"}, "edited": false, "score": 0, "creation_date": 1543443033, "post_id": 53528694, "comment_id": 93926449, "body": "@eukaryota Thanks, I totally forgot"}], "owner": {"reputation": 554, "user_id": 2924010, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/PIGug.jpg?s=128&g=1", "display_name": "Beno&#238;t Dubreuil", "link": "https://stackoverflow.com/users/2924010/beno%c3%aet-dubreuil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "closed_date": 1543443516, "answer_count": 0, "score": 1, "last_activity_date": 1543443018, "creation_date": 1543441979, "last_edit_date": 1543443018, "question_id": 53528694, "link": "https://stackoverflow.com/questions/53528694/do-single-and-array-global-operators-do-the-same-thing", "closed_reason": "Duplicate", "title": "Do single and array global operators do the same thing?", "body": "<p>In Herb Sutter's Exceptional C++ book, in the item 12 - Writing Exception-Safe Code\u2014Part 5, the author uses the global operators new and delete (single) rather than the global operators new[] and delete[] to allocate memory for an array without calling the default constructors.</p>\n\n<p>My question is : why doesn't he call the array version of the operators if it's to create an array? The same thing applies for the destructors. See my variables <code>test1</code> and <code>test2</code> below.</p>\n\n<p>If both global operators new and new[] do the same thing with the same parameters, then I don't understand why both exist, if it's not for semantic correctness.</p>\n\n<p>The following pieces of code are taken from the book :</p>\n\n<pre><code>...\ntemplate &lt;class T&gt;\nStackImpl&lt;T&gt;::StackImpl( size_t size )\n    : v_( static_cast&lt;T*&gt;\n            ( size == 0\n            ? 0\n            : operator new(sizeof(T)*size) ) ),\n    vsize_(size),\n    vused_(0)\n{\n} \n\ntemplate &lt;class T&gt;\nStackImpl&lt;T&gt;::~StackImpl()\n{\n    destroy( v_, v_+vused_ ); // this can't throw\n    operator delete( v_ );\n}\n...\n\n// construct() constructs a new object in\n// a given location using an initial value\n//\ntemplate &lt;class T1, class T2&gt;\nvoid construct( T1* p, const T2&amp; value )\n{\n    new (p) T1(value);\n}\n\n// destroy() destroys an object or a range\n// of objects\n//\ntemplate &lt;class T&gt;\nvoid destroy( T* p )\n{\n    p-&gt;~T();\n}\n\ntemplate &lt;class FwdIter&gt;\nvoid destroy( FwdIter first, FwdIter last )\n{\n    while( first != last )\n    {\n        destroy( &amp;*first );\n        ++first;\n    }\n}\n</code></pre>\n\n<p>I didn't fully understand it at first, so I did a little test :</p>\n\n<pre><code>struct OperatorTest\n{\n    OperatorTest()\n    {\n        std::cout &lt;&lt; \"Constructor\" &lt;&lt; std::endl;\n    }\n\n    ~OperatorTest()\n    {\n        std::cout &lt;&lt; \"Destructor\" &lt;&lt; std::endl;\n    }\n\n    OperatorTest&amp;  operator=(const OperatorTest&amp; other)\n    {\n        std::cout &lt;&lt; \"Assignment\" &lt;&lt; std::endl;\n        return *this;\n    }\n};\n\nint main()\n{\n    // Operator new[]\n    OperatorTest* test1 = static_cast&lt;OperatorTest*&gt;(operator new[](sizeof(OperatorTest) * 5)); // Only allocate memory\n    new (&amp;test1[0]) OperatorTest(); // Calls the constructor by doing a placement new\n    test1[0].~OperatorTest(); // Calls the destructor\n    operator delete[](test1);\n\n    std::cout &lt;&lt; std::endl;\n\n    // Operator new\n    OperatorTest* test2 = static_cast&lt;OperatorTest*&gt;(operator new(sizeof(OperatorTest) * 5)); // Only allocate memory\n    new (&amp;test2[0]) OperatorTest(); // Calls the constructor by doing a placement new\n    test2[0].~OperatorTest(); // Calls the destructor\n    operator delete(test2);\n\n    std::cout &lt;&lt; std::endl;\n\n    {\n        // How does the STL allocate memory?\n        std::vector&lt;OperatorTest&gt; test3{ 3 }; // Allocate memory and calls the default constructor\n    }\n\n    std::cout &lt;&lt; std::endl;\n\n    // Manual new[] / delete[]\n    OperatorTest* test4 = new OperatorTest[3];\n    delete[] test4;\n\n    return 0;\n}\n</code></pre>\n\n<p>The results of the main function in console is :</p>\n\n<ol>\n<li>Constructor</li>\n<li><p>Destructor</p>\n\n<p><br/></p></li>\n<li><p>Constructor</p></li>\n<li><p>Destructor</p>\n\n<p><br/></p></li>\n<li><p>Constructor</p></li>\n<li>Constructor</li>\n<li>Constructor</li>\n<li>Destructor</li>\n<li>Destructor</li>\n<li><p>Destructor</p>\n\n<p><br/></p></li>\n<li><p>Constructor</p></li>\n<li>Constructor</li>\n<li>Constructor</li>\n<li>Destructor</li>\n<li>Destructor</li>\n<li>Destructor</li>\n</ol>\n\n<p>Both global single and array operators seem to work to allocate memory for an array.</p>\n"}, {"tags": ["c++", "unix"], "comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 5, "creation_date": 1543441756, "post_id": 53528615, "comment_id": 93925992, "body": "I don&#39;t think you can, or should.  A better approach would be to modify your program so it can run cleanly as a background process."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1543441887, "post_id": 53528615, "comment_id": 93926039, "body": "You can always grab your pid and then check if you&#39;re a background process (and if so, throw some error and exit). This is in bash, but it should be similar in C++ with system functions: <a href=\"https://unix.stackexchange.com/q/118462\">unix.stackexchange.com/q/118462</a>"}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1543443342, "post_id": 53528615, "comment_id": 93926579, "body": "Doesn&#39;t work if the user pauses the program and than executes <code>bg</code>"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 4, "creation_date": 1543443826, "post_id": 53528615, "comment_id": 93926771, "body": "if the only thing that goes wrong is that the output gets mixed up then thats the users choice. They decide to &amp; it for a reason, maybe they dont mind the messed up output, maybe they have piped the output to a file, maybe they are sure there is no other output to get scrambled with"}, {"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1543444175, "post_id": 53528615, "comment_id": 93926890, "body": "I agree with @pm100. The UNIX way is to trust that users know what they&#39;re doing. Avoid being too &quot;helpful&quot;. If they mess themselves up, so be it. If output messes up their terminal they can restart your program with output redirected to a log file or to <code>&#47;dev&#47;null</code>."}], "answers": [{"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": false, "score": 1, "last_activity_date": 1543502361, "last_edit_date": 1543502361, "creation_date": 1543443627, "answer_id": 53528973, "question_id": 53528615, "link": "https://stackoverflow.com/questions/53528615/can-i-prevent-the-user-from-running-my-c-program-in-the-background/53528973#53528973", "title": "Can I prevent the user from running my C++ program in the background?", "body": "<p>While I agree with the comments saying that you should generally trust the users, this tries to answer the question as I've come to understand it from reading the comments (\"<em>If my program runs in the background, the command terminal is usable and operational, but the output of the program obscures user input and displaces the prompt</em>\").</p>\n\n<p>This will not prevent the program from running, but streaming to <code>std::cout</code> will be discarded so the program can run without disturbing the user. Redirecting the output to a file or a pipe will still work.</p>\n\n<pre><code>#define _POSIX_SOURCE\n\n#include &lt;iostream&gt;\n#include &lt;stdexcept&gt;\n\n#include &lt;stdio.h&gt;   // fileno\n#include &lt;unistd.h&gt;  // isatty\n#include &lt;signal.h&gt;  // signal\n#include &lt;fcntl.h&gt;   // fcntl\n#include &lt;termios.h&gt; // tcgetattr/tcsetattr\n\nvoid handle_input(int /*sig*/) {\n    signal(SIGTTIN, SIG_IGN);\n    std::cin.setstate(std::ios::failbit);\n}\n\nvoid handle_output(int /*sig*/) {\n    signal(SIGTTOU, SIG_IGN);\n    std::cout.setstate(std::ios::failbit);\n}\n\nclass TCAttr {\n    int m_fd;\n    termios m_attr;\npublic:\n    TCAttr(int fd) : m_fd(fd), m_attr() {\n        // get input, output and local attributes\n        if(tcgetattr(m_fd, &amp;m_attr) != 0)\n            m_fd = -1;\n    }\n    TCAttr(FILE* fp) : TCAttr(fileno(fp)) {}\n    TCAttr() : m_fd(-1), m_attr() {}\n    ~TCAttr() {\n        // restore original input, output and local attributes\n        if(m_fd&gt;=0)\n            tcsetattr(m_fd, TCSADRAIN, &amp;m_attr);\n    }\n    //\n    bool set_lmode(tcflag_t flag) {\n        termios tmp;\n        if(tcgetattr(m_fd, &amp;tmp)!=0) return false;\n        tmp.c_lflag = flag;\n        return tcsetattr(m_fd, TCSADRAIN, &amp;tmp)==0;\n    }\n    bool add_lmode(tcflag_t flag) {\n        termios tmp;\n        if(tcgetattr(m_fd, &amp;tmp)!=0) return false;\n        tmp.c_lflag |= flag;\n        return tcsetattr(m_fd, TCSADRAIN, &amp;tmp)==0;\n    }\n    bool remove_lmode(tcflag_t flag) {\n        termios tmp;\n        if(tcgetattr(m_fd, &amp;tmp)!=0) return false;\n        tmp.c_lflag &amp;= ~flag;\n        return tcsetattr(m_fd, TCSADRAIN, &amp;tmp)==0;\n    }\n};\n\nint main() {\n    TCAttr tca(stdout);\n\n    if(isatty(fileno(stdin))) {\n        // if tty input is requested in background mode\n        // SIGTTIN will be sent\n        signal(SIGTTIN, handle_input);\n    }\n\n    if(isatty(fileno(stdout))) {\n        // if tty output is requested in background mode\n        // SIGTTOU will be sent\n        signal(SIGTTOU, handle_output);\n        tca.add_lmode(TOSTOP);\n    }\n\n    std::cout &lt;&lt; \"Thanks for not streaming to a tty in background mode\\n\";\n    std::string name;\n    std::cin &gt;&gt; name;\n    std::cout &lt;&lt; name &lt;&lt; \"\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1140, "user_id": 8981474, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5S2rF.png?s=128&g=1", "display_name": "isakbob", "link": "https://stackoverflow.com/users/8981474/isakbob"}, "is_accepted": true, "score": 0, "last_activity_date": 1543690629, "creation_date": 1543690629, "answer_id": 53574062, "question_id": 53528615, "link": "https://stackoverflow.com/questions/53528615/can-i-prevent-the-user-from-running-my-c-program-in-the-background/53574062#53574062", "title": "Can I prevent the user from running my C++ program in the background?", "body": "<p>It is bad practice to do this.  The UNIX convention is to assume that the user is doing the right thing and make accommodations accordingly.  Either modify the program to make it run cleanly as a background process, or presume the user will pipe the output to something like <a href=\"https://stackoverflow.com/a/10508862/8981474\"><code>/dev/null</code></a> or a log.</p>\n"}], "owner": {"reputation": 1140, "user_id": 8981474, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5S2rF.png?s=128&g=1", "display_name": "isakbob", "link": "https://stackoverflow.com/users/8981474/isakbob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 53574062, "answer_count": 2, "score": 3, "last_activity_date": 1543690629, "creation_date": 1543441599, "question_id": 53528615, "link": "https://stackoverflow.com/questions/53528615/can-i-prevent-the-user-from-running-my-c-program-in-the-background", "title": "Can I prevent the user from running my C++ program in the background?", "body": "<p>I have a polling program in C++ that cannot run cleanly as a background process. Therefore I want to prevent the user from being able to use <a href=\"https://stackoverflow.com/questions/13338870/what-does-at-the-end-of-a-linux-command-mean\"><code>&amp;</code></a> after invoking the name of my program in a Linux terminal.</p>\n\n<p>How can I prevent the user from invoking <a href=\"https://stackoverflow.com/questions/13338870/what-does-at-the-end-of-a-linux-command-mean\"><code>&amp;</code></a> after the name of my script?</p>\n"}, {"tags": ["c++", "byte-order-mark"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1543441669, "post_id": 53528559, "comment_id": 93925954, "body": "Unrelated, the reason(s) behind dynamically allocating a single <code>wchar_</code> as opposed to just using a <code>wchar_t var;</code> and <code>&amp;var</code> for the read target perplexes me. Is the <code>&amp;</code> key on your keyboard broken ?"}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "edited": false, "score": 1, "creation_date": 1543443368, "post_id": 53528559, "comment_id": 93926589, "body": "I&#39;m also unsure why this question is tagged C when you are using the C++ <code>new</code> operator"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1543450985, "post_id": 53528559, "comment_id": 93928637, "body": "@WhozCraig --Probably a <a href=\"https://stackoverflow.com/questions/24472174/c-uninitialized-local-variable/24472249#24472249\">victim of this issue?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 9664532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b8de6290053096abb34971f9e63a597?s=128&d=identicon&r=PG&f=1", "display_name": "VIGOR_PICTURES", "link": "https://stackoverflow.com/users/9664532/vigor-pictures"}, "edited": false, "score": 0, "creation_date": 1543444137, "post_id": 53528839, "comment_id": 93926880, "body": "Thanks for quick response and very useful example, but... honestly I don&#39;t get why this happens. Seriously."}, {"owner": {"reputation": 35, "user_id": 9664532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b8de6290053096abb34971f9e63a597?s=128&d=identicon&r=PG&f=1", "display_name": "VIGOR_PICTURES", "link": "https://stackoverflow.com/users/9664532/vigor-pictures"}, "edited": false, "score": 0, "creation_date": 1543444651, "post_id": 53528839, "comment_id": 93927049, "body": "Oh, I can edit coment only for 5 minutes. Maybe my thinking is simply wrong: When I look at my *ini file (as binary file), the first 16 bits are 11111111 11111110. So I thought that it doesn&#39;t matter if I will interpret these bits as 2 separate bytes (FF FE) or one two byte variable (FFFE). I&#39;m definetelly missing something. Anyway, again thanks for response ;)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 35, "user_id": 9664532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b8de6290053096abb34971f9e63a597?s=128&d=identicon&r=PG&f=1", "display_name": "VIGOR_PICTURES", "link": "https://stackoverflow.com/users/9664532/vigor-pictures"}, "edited": false, "score": 1, "creation_date": 1543444702, "post_id": 53528839, "comment_id": 93927067, "body": "@VIGOR_PICTURES Byte order (little endian vs big endian) only makes sense at the level of bytes. Your code doesn&#39;t read bytes."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1543444748, "post_id": 53528839, "comment_id": 93927082, "body": "@melpomene Exactly what I was trying to demonstrate with my answer"}, {"owner": {"reputation": 35, "user_id": 9664532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b8de6290053096abb34971f9e63a597?s=128&d=identicon&r=PG&f=1", "display_name": "VIGOR_PICTURES", "link": "https://stackoverflow.com/users/9664532/vigor-pictures"}, "edited": false, "score": 0, "creation_date": 1543520844, "post_id": 53528839, "comment_id": 93959543, "body": "Ok, I am dumb. I thought that endianness works on bits (basiclly entire multibyte variable is in reverse). Heh, thats what you get when not reading about something by yourself and hearing from someone else."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "reply_to_user": {"reputation": 35, "user_id": 9664532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b8de6290053096abb34971f9e63a597?s=128&d=identicon&r=PG&f=1", "display_name": "VIGOR_PICTURES", "link": "https://stackoverflow.com/users/9664532/vigor-pictures"}, "edited": false, "score": 0, "creation_date": 1543523287, "post_id": 53528839, "comment_id": 93960718, "body": "@VIGOR_PICTURES There is such a thing as <a href=\"https://en.wikipedia.org/wiki/Bit_numbering\" rel=\"nofollow noreferrer\">bit-endianness</a>; it&#39;s just very seldom that you need to deal with it in typical C code."}], "tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": true, "score": 2, "last_activity_date": 1591138328, "last_edit_date": 1591138328, "creation_date": 1543442809, "answer_id": 53528839, "question_id": 53528559, "link": "https://stackoverflow.com/questions/53528559/c-program-reads-bom-in-reverse-go-left-no-the-other-left/53528839#53528839", "title": "C program reads BOM in reverse (Go left... No! The other left)", "body": "<p>Try running the following code on your text file open in <code>fp</code> and see if it helps you catch your <em>conceptual</em> error:</p>\n\n<pre><code>uint8_t bytes[2];\nuint16_t word;\n\nfread(bytes, 1, 2, fp);\nfseek(fp, 0, SEEK_SET);\nfread(&amp;word, 2, 1, fp);\nfclose(fp);\n\nwprintf(L\"%.2hhX %.2hhX\\n\", bytes[0], bytes[1]);\nwprintf(L\"%.4hX\\n\", word);\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 9664532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b8de6290053096abb34971f9e63a597?s=128&d=identicon&r=PG&f=1", "display_name": "VIGOR_PICTURES", "link": "https://stackoverflow.com/users/9664532/vigor-pictures"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 53528839, "answer_count": 1, "score": 2, "last_activity_date": 1591138328, "creation_date": 1543441313, "last_edit_date": 1543444042, "question_id": 53528559, "link": "https://stackoverflow.com/questions/53528559/c-program-reads-bom-in-reverse-go-left-no-the-other-left", "title": "C program reads BOM in reverse (Go left... No! The other left)", "body": "<p>I'm ... confused.\nHere's the thing. I've got an *ini file encoded as UNICODE (Little Endian).\nIn my project in Visual Studio (my own ini parser) I'm checking if text file has got BOM (Byte Order Mark) at the begining of file.</p>\n\n<p>From wikipedia:</p>\n\n<p>11111111 11111110 (0xFFFE) - little endian BOM,</p>\n\n<p>11111110 11111111 (0xFEFF) - big endian BOM.</p>\n\n<p>So far, I'm right, right?</p>\n\n<p>So it's time for little code:    </p>\n\n<pre><code>size_t temp_val = 0;\nwchar_t * endianness_val = new wchar_t;\ntemp_val = fread_s(endianness_val, sizeof(wchar_t), sizeof(wchar_t), 1, fp);\n\n    if (*endianness_val == (wchar_t)0xFFFE)\n    {\n        endianness = 1;\n        wprintf(L\"\\n UNICODE(16bit): Little Endian!\");\n    }\n    else if (*endianness_val == (wchar_t)0xFEFF)\n    {\n        endianness = -1; //big endian\n        wprintf(L\"\\n UNICODE(16bit): Big Endian!\");\n    }\n    else\n    {\n        endianness = 0; //no BOM, little endian default\n        wprintf(L\"\\n No BOM. Narrow characters (8bit) Assuming Little Endian!\");\n    }\n</code></pre>\n\n<p>I'm reading (using fread_s) first wchar_t from file and I'm storing it in endianness_val. Everything seems to be good:</p>\n\n<ul>\n<li>*ini file HAS Byte Order Mark(0xFFFE),</li>\n<li>looking into memory (debuging) gives me the same result - endianess varable stores 0xFFFE.</li>\n</ul>\n\n<p>Aaaannd Visual Studio keeps going into if statement for Big Endian (like a maniac ;)). Of course changing BOM for Big Endian results in Visual Studio entering correct if statement.  Any ideas why this works backwards?</p>\n\n<p>Thanks. </p>\n"}, {"tags": ["c++", "image", "filtering", "rgb"], "comments": [{"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "edited": false, "score": 0, "creation_date": 1543440834, "post_id": 53528417, "comment_id": 93925632, "body": "Hi! Stack Overflow is better suited for specific questions rather than general advices... nevertheless, I would suggest you to take a look at some OpenCV tutorials to start with"}, {"owner": {"reputation": 9, "user_id": 10702883, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wxyp-mi-aAI/AAAAAAAAAAI/AAAAAAAAAC4/yuYS9oROujg/photo.jpg?sz=128", "display_name": "Johnn", "link": "https://stackoverflow.com/users/10702883/johnn"}, "reply_to_user": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "edited": false, "score": 0, "creation_date": 1543441066, "post_id": 53528417, "comment_id": 93925730, "body": "Thank you for your reply! so i directly found a tutorial for thresholding, which looks great! but no apparent one for image filtering. Is filtering not the actual term used? what im trying to do is use the thresholded image to then change its pixel values to change its colors."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 10702883, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wxyp-mi-aAI/AAAAAAAAAAI/AAAAAAAAAC4/yuYS9oROujg/photo.jpg?sz=128", "display_name": "Johnn", "link": "https://stackoverflow.com/users/10702883/johnn"}, "edited": false, "score": 0, "creation_date": 1543441210, "post_id": 53528506, "comment_id": 93925794, "body": "Thank you for replying! I&#39;m sorry if this will pass off as very inexperienced, but i cant seem to find the code that would let me load an image into an array/vector."}, {"owner": {"reputation": 720, "user_id": 10696884, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TZLhm3qAv5U/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gTJ8AUH3mkzlYyEQgF0K4AqDVXLw/mo/photo.jpg?sz=128", "display_name": "Thomas Lang", "link": "https://stackoverflow.com/users/10696884/thomas-lang"}, "reply_to_user": {"reputation": 9, "user_id": 10702883, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wxyp-mi-aAI/AAAAAAAAAAI/AAAAAAAAAC4/yuYS9oROujg/photo.jpg?sz=128", "display_name": "Johnn", "link": "https://stackoverflow.com/users/10702883/johnn"}, "edited": false, "score": 1, "creation_date": 1543441714, "post_id": 53528506, "comment_id": 93925968, "body": "That&#39;s no problem, we are here for help ;) I&#39;ll adapted my answer, hope this helps you."}], "tags": [], "owner": {"reputation": 720, "user_id": 10696884, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TZLhm3qAv5U/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gTJ8AUH3mkzlYyEQgF0K4AqDVXLw/mo/photo.jpg?sz=128", "display_name": "Thomas Lang", "link": "https://stackoverflow.com/users/10696884/thomas-lang"}, "is_accepted": false, "score": 2, "last_activity_date": 1543441999, "last_edit_date": 1543441999, "creation_date": 1543441066, "answer_id": 53528506, "question_id": 53528417, "link": "https://stackoverflow.com/questions/53528417/basic-c-thresholding-and-filtering-an-image/53528506#53528506", "title": "Basic C++ / Thresholding and Filtering an image", "body": "<p>For first experiments, I suggest you consider only grayscale images or just the intensity channel of an RGB image.\nAnyway, if you have some image data:</p>\n\n<ol>\n<li>Read the image (<code>libjpeg</code> etc)</li>\n<li>You should have the data in a big array. If the image is really, really big, you should do the following thing chunk-based.</li>\n<li>Apply the threshold: You enter a threshold, if the image value is below the threshold, you keep it and set all other values to zero. Maybe the other way around, as you please.</li>\n</ol>\n\n<p>For point 1, try starting with <a href=\"https://people.sc.fsu.edu/~jburkardt/data/pgma/pgma.html\" rel=\"nofollow noreferrer\"><code>pgm</code></a> images as they are really easy to read (cf. Wikipedia).\nFor most managable <code>pgm</code> images, you might not need chunk realization, just load the entire thing into one big array of fitting type.</p>\n\n<p>Edit: Some code, consider the concrete assembly to runnable C++ code as an exercise ;)</p>\n\n<pre><code>std::ifstream file(\"your-filename.pgm\", std::ifstream::binary);\n// Read header information:\n// Check out wikipedia article and the C++ documentation for ifstream.\nchar magic[2]; // magic number, P2 or P5\nfile.read(magic, 2);\nif (magic[0] != 'P' || magic[1] &lt; '1' || magic[1] &gt; '5') {\n  throw std::exception(\"Invalid magic number\");\n}\nint width, height, maxValue;\nfile &gt;&gt; width &gt;&gt; height &gt;&gt; maxValue;\nif (maxValue &lt;= 0 || maxValue &gt;= (1 &lt;&lt; 16)) {\n  throw std::exception(\"Max value must be resonable\");\n}\nfile.ignore(1);\n\nstd::unique_ptr&lt;unsigned char&gt; data(new unsigned char[width * height * sizeof(unsigned char)]);\nfile.read(reinterpret_cast&lt;char*&gt;(data.get()), width * height * sizeof(unsigned char));\n// Now, the smart pointer 'data' contains your image grayscale data.\n</code></pre>\n\n<p>Be cautious: Some pgm files use <code>unsigned short</code> instead of <code>unsigned char</code>, but this information is inside the file header (you can identify that by the <code>maxValue</code> field).\nAfter you loaded the data like above, you can just iterate over that array, do your processing (thresholding) and write the processed file to disk again.</p>\n"}], "owner": {"reputation": 9, "user_id": 10702883, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wxyp-mi-aAI/AAAAAAAAAAI/AAAAAAAAAC4/yuYS9oROujg/photo.jpg?sz=128", "display_name": "Johnn", "link": "https://stackoverflow.com/users/10702883/johnn"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "closed_date": 1543446283, "answer_count": 1, "score": -5, "last_activity_date": 1543441999, "creation_date": 1543440618, "question_id": 53528417, "link": "https://stackoverflow.com/questions/53528417/basic-c-thresholding-and-filtering-an-image", "closed_reason": "Needs more focus", "title": "Basic C++ / Thresholding and Filtering an image", "body": "<p>Good day to everyone!</p>\n\n<p>I started learning C++ by myself a couple of weeks ago. I am now hoping to take on a small project; using my Ubuntu machine id like to run a code that can threshold an RGB image and then filter it according to certain values that I'll input myself.</p>\n\n<p>How should I proceed? What should i keep in my mind when trying? And how long do you reckon should it take? Keep in mind that i have 0 prior experience in coding.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "visual-studio", "class", "pointers", "reference"], "comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1543440474, "post_id": 53528351, "comment_id": 93925495, "body": "They all seem like trivial typos. Perhaps just include the lines errors are on and 3 or 4 lines either side (often these type of errors could come from a mistake on a line a few lines before the one reported)"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1543441802, "post_id": 53528351, "comment_id": 93926006, "body": "<a href=\"https://stackoverflow.com/questions/625799/resolve-build-errors-due-to-circular-dependency-amongst-classes\" title=\"resolve build errors due to circular dependency amongst classes\">stackoverflow.com/questions/625799/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "is_accepted": true, "score": 0, "last_activity_date": 1543442138, "last_edit_date": 1543442138, "creation_date": 1543440560, "answer_id": 53528399, "question_id": 53528351, "link": "https://stackoverflow.com/questions/53528351/c-passing-reference-of-class-to-another-class/53528399#53528399", "title": "C++ Passing Reference of class to another class", "body": "<p>It's the classic cicular include issue. <code>GrapicsManager.h</code> includes <code>Room.h</code> and <code>Robot.h</code> which each include <code>GrapicsManager.h</code> again. Now, for example, when compiling <code>GraphicsManager.cpp</code> you include <code>GrapicsManager.h</code>. But before you ever get to the <code>GraphicsManager</code> class definition, you first include <code>Room.h</code>. From there you go straight to include <code>GrapicsManager.h</code> again, but since you have a <code>#pragma once</code> in there, the compiler will simply skip that include. By the time the compiler then gets to the <code>GraphicsManager *gm;</code> member declaration in <code>Room.h</code>, is has never seen a declaration of a type named <code>GraphicsManager</code>. The error message that Visual C++ gives you then</p>\n\n<blockquote>\n  <p>C4430 missing type specifier - int assumed. Note: C++ does not support default-int</p>\n</blockquote>\n\n<p>is arguably a bit unintuitive. At the point where it encounters the identifier <code>GraphicsManager</code>, an identifier can only mean the start of a declaration. Since <code>GraphicsManager</code> is not a known type, the compiler assumes that identifier must be the name of the entity that is supposed to be declared and you just forgot to specify the type. That's why you get the error message you see. C in the olden days used to allow you to omit the type specifier in a declaration which would just mean to use <code>int</code> as a default. So you would see this error as a result of trying to compile ancient, non-standard C code. That's why the error message contains the explicit note that that's not allowed\u2026</p>\n\n<p>You already added forward declarations for <code>Room</code> in <code>Robot.h</code> and for <code>Robot</code> in <code>Room.h</code>. You'll have to do the same for <code>GraphicsManager</code>\u2026</p>\n"}], "owner": {"reputation": 21, "user_id": 8657676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9cf046d8fcbc062a4e66a5f3266bfe1?s=128&d=identicon&r=PG&f=1", "display_name": "Martin mcintosh", "link": "https://stackoverflow.com/users/8657676/martin-mcintosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 0, "accepted_answer_id": 53528399, "answer_count": 1, "score": -1, "last_activity_date": 1543442138, "creation_date": 1543440288, "last_edit_date": 1543440793, "question_id": 53528351, "link": "https://stackoverflow.com/questions/53528351/c-passing-reference-of-class-to-another-class", "title": "C++ Passing Reference of class to another class", "body": "<p>I've been trying to pass my Graphics Manager class to both my Robot and Room class.</p>\n\n<p>But when attempting to pass the class by reference I get 3 errors regarding the pass by reference.</p>\n\n<p>These are the errors I'm referring to:\nC2143 syntax error: missing ';' before '*'</p>\n\n<p>C4430 missing type specifier - int assumed. Note: C++ does not support default-int</p>\n\n<p>C2238 unexpected token(s) preceding ';'</p>\n\n<p>I have attempted to change the way I've been passing the classes but with no luck, I have highlighted the areas in which is causing the error as well as the code that i have tried to use to fix the problem.</p>\n\n<p>Any advice in how i could go about fixing these errors is highly appreciated.</p>\n\n<p>I have not included the full .cpp files as they are quite large but I will include a link to a pasteBin with the full script.</p>\n\n<p>GrapicsManager.h</p>\n\n<pre><code>#pragma once\n#include &lt;iostream&gt;\n#include &lt;SFML/Graphics.hpp&gt;\n#include \"Room.h\"\n#include \"Robot.h\"\n\n\nclass GraphicsManager\n{\n public:\n\n\nRoom* room;     //This does not Flag Up Errors \nRobot* robot;   //This does not Flag Up Errors \n</code></pre>\n\n<p>Robot.h</p>\n\n<pre><code>#pragma once\n#include &lt;iostream&gt;\n#include &lt;SFML/Graphics.hpp&gt;\n#include &lt;SFML/System/String.hpp&gt;\n#include \"GraphicsManager.h\"\n//#include \"Room.h\" //This what i had\nclass Room; //This is what i changed\n//class GraphicsManager; //Wasnt sure if i should use it this \n//way\n\nclass Robot\n{\npublic:\n\n//Graphics Variables\nRoom* room;     //This works after the change\nRobot* robot;   //This works after the change\n\nGraphicsManager *gm;    //This throughs up the error\n\n//This Is what i attemped to use with no effect\n//GraphicsManager* gm = new GraphicsManager(room, robot);\n</code></pre>\n\n<p>Robot.cpp <a href=\"https://pastebin.com/Xd1A3Vii\" rel=\"nofollow noreferrer\">https://pastebin.com/Xd1A3Vii</a></p>\n\n<pre><code>#include \"Robot.h\"\n\n\n\n\nRobot::Robot()\n{\n\ngm = new GraphicsManager(room, robot); //This tells me gm is \n//not declared\nthis-&gt;room = room; //This does not flag up errors\nthis-&gt;robot = robot; //This does not flag up errors\n\n//Room &amp;room = *rm;  // attempted to use this but decided not \n//to\n\n}\n</code></pre>\n\n<p>Room.h</p>\n\n<pre><code>#pragma once\n#include &lt;SFML/Graphics.hpp&gt;\n#include &lt;SFML/System/String.hpp&gt;\n#include \"GraphicsManager.h\" //\n//#include \"Robot.h\"    //what i orginally had\n//class GraphicsManager;    //i decided not to do it this way\nclass Robot;    //What i changed it to \n\n\nclass Room\n{\npublic:\n\n//Reference to other classes\nRoom* room;     //This doesnt throw errors\nRobot* robot;   //This doesnt throw errors\n\n//Refference to graphics manager\nGraphicsManager *gm; //This throws the three errors mentioned\n};\n</code></pre>\n\n<p>Room.cpp <a href=\"https://pastebin.com/6R6vnVfy\" rel=\"nofollow noreferrer\">https://pastebin.com/6R6vnVfy</a></p>\n\n<pre><code>#include \"Room.h\"\n\n\n\nRoom::Room()\n{\n\ngm = new GraphicsManager(room, robot);\nthis-&gt;room = room;\nthis-&gt;robot = robot;\n</code></pre>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1543440073, "post_id": 53528183, "comment_id": 93925327, "body": "Use of <code>while (ss.good()) { ... }</code> is not right. See <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\" title=\"why is iostreameof inside a loop condition considered wrong\">stackoverflow.com/questions/5605125/&hellip;</a>."}, {"owner": {"reputation": 1, "user_id": 10719308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cade0f95959b79a461338ee3b5cde7f?s=128&d=identicon&r=PG&f=1", "display_name": "Hussein Hassoun", "link": "https://stackoverflow.com/users/10719308/hussein-hassoun"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1543441092, "post_id": 53528183, "comment_id": 93925741, "body": "having trouble figuring out the correct way"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1543441230, "post_id": 53528183, "comment_id": 93925803, "body": "See my updated answer."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1543441217, "last_edit_date": 1543441217, "creation_date": 1543440866, "answer_id": 53528468, "question_id": 53528183, "link": "https://stackoverflow.com/questions/53528183/when-i-enter-the-inputs-the-given-inputs-the-program-doesnt-not-run-is-there-an/53528468#53528468", "title": "when I enter the inputs the given inputs the program doesn&#39;t not run is there an error with sstream", "body": "<p>The logic in <code>insertNum</code> is not clear to me but the value of the <code>i</code> increases to a point where you are accessing the array using an out of bounds index.</p>\n\n<p>Add the following line </p>\n\n<pre><code>  cout &lt;&lt; \"i: \" &lt;&lt; i &lt;&lt; endl;\n</code></pre>\n\n<p>as the first statement in the <code>for</code> loop. When I did that, I got the following output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> TEST \ni: 0\ni: 0\ni: 2\ni: 0\ni: 2\ni: 6\ni: 0\ni: 2\ni: 6\ni: 14\ni: 0\ni: 2\ni: 6\ni: 14\ni: 30\ni: 0\ni: 2\ni: 6\ni: 14\ni: 30\ni: 62\ni: 0\ni: 2\ni: 6\ni: 14\ni: 30\ni: 62\ni: 126\ni: 0\ni: 2\ni: 6\ni: 14\ni: 30\ni: 62\ni: 126\ni: 254\ni: 0\ni: 2\ni: 6\ni: 14\ni: 30\ni: 62\ni: 126\ni: 254\ni: 510\ni: 0\ni: 2\ni: 6\ni: 14\ni: 30\ni: 62\ni: 126\ni: 254\ni: 510\ni: 1022\ni: 0\ni: 2\ni: 6\ni: 14\ni: 30\ni: 62\ni: 126\ni: 254\ni: 510\ni: 1022\ni: 2046\ni: 0\ni: 2\ni: 6\ni: 14\ni: 30\ni: 62\ni: 126\ni: 254\ni: 510\ni: 1022\ni: 2046\ni: 4094\n</code></pre>\n\n<p>It ended there with core dump in my setup.</p>\n\n<p>I don't have a suggestion on how to fix it since it is not clear to me what you your goals are for the function.</p>\n\n<p>Of course, you can add more lines of code to print diagnostic messages. For example, you can add </p>\n\n<pre><code>cout &lt;&lt; \"Inserting : \" &lt;&lt; x &lt;&lt; endl;\n</code></pre>\n\n<p>before the <code>for</code> loop to figure out where things to start go wrong.</p>\n\n<hr>\n\n<p>The <code>while</code> loop in <code>stringToArray</code> can be improved to:</p>\n\n<pre><code>while ( ss &gt;&gt; temp )\n{\n   insertNum(temp);\n   count++;\n}\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Why is iostream::eof inside a loop condition considered wrong?</a> for further details.</p>\n"}], "owner": {"reputation": 1, "user_id": 10719308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cade0f95959b79a461338ee3b5cde7f?s=128&d=identicon&r=PG&f=1", "display_name": "Hussein Hassoun", "link": "https://stackoverflow.com/users/10719308/hussein-hassoun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1543441217, "creation_date": 1543439631, "question_id": 53528183, "link": "https://stackoverflow.com/questions/53528183/when-i-enter-the-inputs-the-given-inputs-the-program-doesnt-not-run-is-there-an", "title": "when I enter the inputs the given inputs the program doesn&#39;t not run is there an error with sstream", "body": "<p>My assignment asks to write  a program to read a list of integer data items \ninto an array, determine the position of a number in the list using binary search. The program should print the left and right endpoints for each searching step. The program should print the location of the number if he number is found and print 0 if the number is not found.  </p>\n\n<p>the given inputs are 3 7 8 9 11 13 17 25 27 28 30 31 33 35 36 40 44 47 50 51 53 55 67 68 72 77 78 80 82 91 99</p>\n\n<p>IM suppose find the location of number 30 and 96</p>\n\n<p>when I enter the inputs the given inputs the program doesn't not run \nis there an error with sstream inside the function stringToArray() it may need to allow it to read that many values </p>\n\n<p>please help</p>\n\n<p>I will provide the code below </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt; // allows use of \"stringstream\" which will read in a message \nusing namespace std;\n\n    int SIZE = 200;\n    int bTree[200]= {0};\n\n\n void stringToArray(string input);\n void insertNum(int x);\n void searchTree(int x);\n\n\n\n\n int main()\n {\n    string userInput;\n    int key= 0;\n    char choice;\n\n    cout&lt;&lt; \"Enter values sepereated by spaces. \"&lt;&lt; endl;\n    cout&lt;&lt; \"Example input: 19 24 7 14 9 1 0\" &lt;&lt; endl;   \n    cout&lt;&lt; \"Input: \";\n    getline(cin, userInput);\n\n    stringToArray(userInput);\n\n    cout&lt;&lt; endl &lt;&lt; endl;\n\n\n    do{\n\n        cout&lt;&lt; \"\\n\\nEnter value to search: \";\n        cin&gt;&gt; key;\n\n        searchTree(key);\n\n        cout&lt;&lt; \"\\n Would you like to search another number?\"&lt;&lt; endl;\n        cout&lt;&lt; \"Enter y for yes or n for no\" &lt;&lt; endl;   \n        cout&lt;&lt; \"Choice: \";\n        cin&gt;&gt; choice;\n        toupper(choice);\n\n     }while(choice == 'Y');\n\n\n\n\n\n return 0;  \n }\n\n\n  void stringToArray(string input)\n  {\n    int count= 0;\n    int temp= 0;\n\n    stringstream ss(input);\n\n    cout&lt;&lt; \"\\n TEST \\n\";\n    while(ss.good())\n    {\n        ss&gt;&gt;temp;\n        insertNum(temp);\n        count++;\n      }\n\n    cout&lt;&lt; \"\\n TEST \\n\";\n\n  }\n\n  void insertNum(int x)\n  {\n    int i= 0;\n\n    for(;;)\n    {\n        if(bTree[i] == 0)\n        {\n            bTree[i] = x;\n            break;\n          }\n        else\n        {\n            if(bTree[i] &lt; x)\n            {\n                i= 2*i + 2;\n            }\n            else\n            {\n                i= 2*i + 1;\n            }\n        }\n\n      }\n\n  }\n\n\n\n  void searchTree(int x)\n  {\n    int i= 0;\n\n    for(;;)\n    {\n        if(bTree[i] == 0)\n        {\n            cout &lt;&lt; \"Array is empty 0\" &lt;&lt; endl;\n            break;\n          }\n        else if (bTree[i] == x)\n        {\n            cout &lt;&lt; \"Value: \" &lt;&lt; x &lt;&lt; \" found at index \" &lt;&lt; i &lt;&lt; endl;\n            break;\n        }\n        else if (bTree[i] &lt; x)\n        {\n            i= 2*i + 2;\n            cout &lt;&lt; \"Right child: \" &lt;&lt; bTree[i] &lt;&lt; endl;\n        }\n        else if (bTree[i] &gt; x)\n        {\n            i= 2*i + 1;\n            cout&lt;&lt; \"Left child: \" &lt;&lt; bTree[i] &lt;&lt; endl;\n        }\n\n      }\n\n  }\n</code></pre>\n"}, {"tags": ["c++", "cmake", "aruco"], "comments": [{"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1543441677, "post_id": 53528125, "comment_id": 93925961, "body": "This is a cmake issue; it&#39;s not related to make.  You should have a cmake tag and not a makefile tag."}, {"owner": {"reputation": 146, "user_id": 5357251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RyhsX.jpg?s=128&g=1", "display_name": "aliyasineser", "link": "https://stackoverflow.com/users/5357251/aliyasineser"}, "edited": false, "score": 0, "creation_date": 1544017984, "post_id": 53528125, "comment_id": 94127102, "body": "Did you install opencv from source? If so, you should add opencv_extra path in cmake. You don&#39;t have to show where is aruco. Only opencv should be enough in your case. Check your opencv installation. If you installed aruco from source, cmake and make should handle the path related problems. So I believe you don&#39;t need to give the path. Can you check and update ?"}], "answers": [{"comments": [{"owner": {"reputation": 1479, "user_id": 1414831, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/63346ad40db38cf3a54e84403099e91e?s=128&d=identicon&r=PG", "display_name": "kungphil", "link": "https://stackoverflow.com/users/1414831/kungphil"}, "edited": false, "score": 0, "creation_date": 1543485257, "post_id": 53529109, "comment_id": 93939904, "body": "Thanks @Matthieu but that didn&#39;t solve it, can I test if aruco set the usual variables?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 1479, "user_id": 1414831, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/63346ad40db38cf3a54e84403099e91e?s=128&d=identicon&r=PG", "display_name": "kungphil", "link": "https://stackoverflow.com/users/1414831/kungphil"}, "edited": false, "score": 0, "creation_date": 1543487379, "post_id": 53529109, "comment_id": 93941244, "body": "Just updated by answer after looking up some aruco examples."}], "tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": false, "score": 0, "last_activity_date": 1543487364, "last_edit_date": 1543487364, "creation_date": 1543444436, "answer_id": 53529109, "question_id": 53528125, "link": "https://stackoverflow.com/questions/53528125/fatal-error-no-such-file-or-directory-when-im-sure-i-have-set-find-package-cor/53529109#53529109", "title": "fatal error: No such file or directory when I&#39;m sure I have set find_package correctly", "body": "<p>Once you have your package, you still need to add the include path to add it to the compilation commands:</p>\n\n<pre><code>include_directories(${aruco_DIR})\n</code></pre>\n\n<p>(variable set according to <a href=\"https://github.com/elliotwoods/ArUco-MarkerMapper/blob/master/CMakeLists.txt\" rel=\"nofollow noreferrer\">https://github.com/elliotwoods/ArUco-MarkerMapper/blob/master/CMakeLists.txt</a>)</p>\n\n<p>And same for OpenCV.</p>\n"}], "owner": {"reputation": 1479, "user_id": 1414831, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/63346ad40db38cf3a54e84403099e91e?s=128&d=identicon&r=PG", "display_name": "kungphil", "link": "https://stackoverflow.com/users/1414831/kungphil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 406, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544020558, "creation_date": 1543439364, "last_edit_date": 1544020558, "question_id": 53528125, "link": "https://stackoverflow.com/questions/53528125/fatal-error-no-such-file-or-directory-when-im-sure-i-have-set-find-package-cor", "title": "fatal error: No such file or directory when I&#39;m sure I have set find_package correctly", "body": "<p>I am trying to compile my own scripts that use aruco (v 3.0.7) on Linux. I am using a makefile but when I compile I get this error.</p>\n\n<pre><code>[ 33%] Building CXX object CMakeFiles/aruco_simple.dir/aruco_simple.cpp.o\n/home/ucfaptv/opt/aruco-3.0.7/mine/aruco_simple.cpp:2:25: fatal error: aruco/aruco.h: No such file or directory\n #include &lt;aruco/aruco.h&gt;\n                         ^\ncompilation terminated.\nmake[2]: *** [CMakeFiles/aruco_simple.dir/aruco_simple.cpp.o] Error 1\nmake[1]: *** [CMakeFiles/aruco_simple.dir/all] Error 2\nmake: *** [all] Error 2\n</code></pre>\n\n<p>My CMakeLists.txt looks like this</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8) \nSET(CMAKE_CXX_FLAGS \"-std=c++11\")\n\nfind_package(OpenCV REQUIRED PATHS \"/home/ucfaptv/opt/opencv-3.4.4/build\")\nfind_package(aruco REQUIRED PATH \"/home/ucfaptv/opt/aruco-3.0.7/src\")\n\nadd_library(aruco_simple SHARED aruco_simple.cpp)\ntarget_link_libraries(aruco_simple aruco ${OpenCV_LIBS})\n\nadd_executable(run run.cpp)\ntarget_link_libraries(run aruco_simple aruco ${OpenCV_LIBS})\n\nadd_executable(view view.cpp)\ntarget_link_libraries(view aruco_simple aruco ${OpenCV_LIBS})\n</code></pre>\n\n<p>I thought <code>find_package</code> should point to the <code>aruco.h</code> located in <code>/home/ucfaptv/opt/aruco-3.0.7/src</code></p>\n\n<p>Using the same makefile (paths edited) I can compile just fine on my Mac.</p>\n\n<hr>\n\n<p>I have now install aruco! A colleague pointed out that as I am installing locally (e.g. not <code>make install</code>) <code>aruco.h</code> in not in the directory <code>/usr/local/include/aruco</code> so the include statement is now <code>#include &lt;aruco.h&gt;</code>. I also had to edit the <code>aruco.pc</code> and <code>arucoConfig.cmake</code> files to point at the <code>/home/ucfaptv/opt/aruco-3.0.7/src</code> directory and not at <code>/usr/local/include</code></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 554, "user_id": 2924010, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/PIGug.jpg?s=128&g=1", "display_name": "Beno&#238;t Dubreuil", "link": "https://stackoverflow.com/users/2924010/beno%c3%aet-dubreuil"}, "edited": false, "score": 1, "creation_date": 1543439511, "post_id": 53528065, "comment_id": 93925081, "body": "Seriously, I&#39;d like to know why I&#39;m getting downvoted. I&#39;d really like to improve my question to make it more readable for everyone and easier to understand."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10605163"}, "edited": false, "score": 1, "creation_date": 1543440141, "post_id": 53528065, "comment_id": 93925353, "body": "Why does the third example show that the stadard library does not use <code>operator new[]</code>? The vector has to construct 3 objects, because you asked it to, while your other two examples construct only one object, even if space for 5 was allocated. (Questions about whether this code has the expected behavior defined aside.) Also <code>operator delete</code> does not call the destructor, which is why you need to do it manually beforehand."}, {"owner": {"reputation": 554, "user_id": 2924010, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/PIGug.jpg?s=128&g=1", "display_name": "Beno&#238;t Dubreuil", "link": "https://stackoverflow.com/users/2924010/beno%c3%aet-dubreuil"}, "edited": false, "score": 0, "creation_date": 1543440735, "post_id": 53528065, "comment_id": 93925592, "body": "@eukaryota It was a test to see how the STL&#39;s vector would act if I simply wanted to reserve space for 3 variables. Maybe it&#39;s my background in Java that&#39;s altering how I think it should act. So technically, it&#39;s what I wanted. I&#39;ll add this example."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10605163"}, "edited": false, "score": 1, "creation_date": 1543441165, "post_id": 53528065, "comment_id": 93925772, "body": "<code>std::vector&lt;OperatorTest&gt; test3{ 3 };</code> and <code>new OperatorTest[3];</code> both allocate for (at least) 3 objects of type <code>OperatorTest</code> and construct exactly 3 such objects. <code>std::vector</code> can be made to only allocate, but not construct, with <code>std::vector&lt;OperatorTest&gt; test3; test3.reserve(3);</code> and you will see no construction or destruction happening, but even then it doesn&#39;t tell you anything about how the allocation happened."}, {"owner": {"reputation": 554, "user_id": 2924010, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/PIGug.jpg?s=128&g=1", "display_name": "Beno&#238;t Dubreuil", "link": "https://stackoverflow.com/users/2924010/beno%c3%aet-dubreuil"}, "edited": false, "score": 0, "creation_date": 1543441462, "post_id": 53528065, "comment_id": 93925889, "body": "@eukaryota Hmmm I guess I should have looked more in depth at the documentation. It is said that the default constructor does not allocate memory. I was sure that it was, again because I have a Java background."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10605163"}, "edited": false, "score": 1, "creation_date": 1543441629, "post_id": 53528065, "comment_id": 93925942, "body": "The constructor (of any kind) is not responsible for allocating memory for the object itself. That happens before, e.g. <code>new OperatorTest[3];</code> first calls some variant of <code>operator new[]</code> (its a bit technical) which allocates the memory and then calls the default constructor three times in sequence with a <code>this</code> pointer to each of three subblocks in the allocated block. If any exceptions happen in any of the constructors it rolls-back (by calling the destructor) the already constructed ones and calling <code>operator delete[]</code> to free the memory again, so that this is exception-safe."}], "answers": [{"tags": [], "owner": {"reputation": 489, "user_id": 2568614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4da46987b21a75b5ab25233b597b9ec2?s=128&d=identicon&r=PG", "display_name": "fieres", "link": "https://stackoverflow.com/users/2568614/fieres"}, "is_accepted": true, "score": 1, "last_activity_date": 1543441161, "creation_date": 1543441161, "answer_id": 53528530, "question_id": 53528065, "link": "https://stackoverflow.com/questions/53528065/how-to-correctly-use-the-global-operators-new-new-delete-and-delete/53528530#53528530", "title": "How to correctly use the global operators new, new[], delete and delete[]", "body": "<p>Your usage of the operators new and delete (and their array versions) seem to be correct.</p>\n\n<p>Your code comments (\"Calls the destructor... again\") indicate a misunderstanding. You seem to assume that the global operator delete will not only deallocate memory but also call the destructor of an object. This is not the case. The global operators new and delete only allocate/deallocate raw bytes, as the c-functions malloc and free do. </p>\n\n<p>In this sense, both operator versions (single vs. array) do effectively the same, only they should match, i.e. a chunk of memory allocated by one version must be deallocated with the same version. </p>\n"}], "owner": {"reputation": 554, "user_id": 2924010, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/PIGug.jpg?s=128&g=1", "display_name": "Beno&#238;t Dubreuil", "link": "https://stackoverflow.com/users/2924010/beno%c3%aet-dubreuil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 1, "accepted_answer_id": 53528530, "answer_count": 1, "score": -1, "last_activity_date": 1543441161, "creation_date": 1543439082, "last_edit_date": 1543440977, "question_id": 53528065, "link": "https://stackoverflow.com/questions/53528065/how-to-correctly-use-the-global-operators-new-new-delete-and-delete", "title": "How to correctly use the global operators new, new[], delete and delete[]", "body": "<p>I have a question (1 post per question, I learnt my lesson...) about using the global operators new, new[], delete and delete[] but first, I'll describe the situation.</p>\n\n<p>In Herb Sutter's Exceptional C++ book, in the item 12 - Writing Exception-Safe Code\u2014Part 5, the author uses these following pieces of code :</p>\n\n<pre><code>...\ntemplate &lt;class T&gt;\nStackImpl&lt;T&gt;::StackImpl( size_t size )\n    : v_( static_cast&lt;T*&gt;\n            ( size == 0\n            ? 0\n            : operator new(sizeof(T)*size) ) ),\n    vsize_(size),\n    vused_(0)\n{\n} \n\ntemplate &lt;class T&gt;\nStackImpl&lt;T&gt;::~StackImpl()\n{\n    destroy( v_, v_+vused_ ); // this can't throw\n    operator delete( v_ );\n}\n...\n\n// construct() constructs a new object in\n// a given location using an initial value\n//\ntemplate &lt;class T1, class T2&gt;\nvoid construct( T1* p, const T2&amp; value )\n{\n    new (p) T1(value);\n}\n\n// destroy() destroys an object or a range\n// of objects\n//\ntemplate &lt;class T&gt;\nvoid destroy( T* p )\n{\n    p-&gt;~T();\n}\n\ntemplate &lt;class FwdIter&gt;\nvoid destroy( FwdIter first, FwdIter last )\n{\n    while( first != last )\n    {\n        destroy( &amp;*first );\n        ++first;\n    }\n}\n</code></pre>\n\n<p>I didn't fully understand it at first, so I did a little test :</p>\n\n<pre><code>struct OperatorTest\n{\n    OperatorTest()\n    {\n        std::cout &lt;&lt; \"Constructor\" &lt;&lt; std::endl;\n    }\n\n    ~OperatorTest()\n    {\n        std::cout &lt;&lt; \"Destructor\" &lt;&lt; std::endl;\n    }\n\n    OperatorTest&amp;  operator=(const OperatorTest&amp; other)\n    {\n        std::cout &lt;&lt; \"Assignment\" &lt;&lt; std::endl;\n        return *this;\n    }\n};\n\nint main()\n{\n    // Operator new[]\n    OperatorTest* test1 = static_cast&lt;OperatorTest*&gt;(operator new[](sizeof(OperatorTest) * 5)); // Only allocate memory\n    new (&amp;test1[0]) OperatorTest(); // Calls the constructor by doing a placement new\n    test1[0].~OperatorTest(); // Calls the destructor\n    operator delete[](test1); // Calls the destructor... again\n\n    std::cout &lt;&lt; std::endl;\n\n    // Operator new\n    OperatorTest* test2 = static_cast&lt;OperatorTest*&gt;(operator new(sizeof(OperatorTest) * 5)); // Only allocate memory\n    new (&amp;test2[0]) OperatorTest(); // Calls the constructor by doing a placement new\n    test2[0].~OperatorTest(); // Calls the destructor\n    operator delete(test2); // Calls the destructor... again\n\n    std::cout &lt;&lt; std::endl;\n\n    {\n        // How does the STL allocate memory?\n        std::vector&lt;OperatorTest&gt; test3{ 3 }; // Allocate memory and calls the default constructor\n    }\n\n    std::cout &lt;&lt; std::endl;\n\n    // Manual new[] / delete[]\n    OperatorTest* test4 = new OperatorTest[3];\n    delete[] test4;\n\n    return 0;\n}\n</code></pre>\n\n<p>The results of the main function in console is :</p>\n\n<ol>\n<li>Constructor</li>\n<li><p>Destructor</p>\n\n<p><br/></p></li>\n<li><p>Constructor</p></li>\n<li><p>Destructor</p>\n\n<p><br/></p></li>\n<li><p>Constructor</p></li>\n<li>Constructor</li>\n<li>Constructor</li>\n<li>Destructor</li>\n<li>Destructor</li>\n<li><p>Destructor</p>\n\n<p><br/></p></li>\n<li><p>Constructor</p></li>\n<li>Constructor</li>\n<li>Constructor</li>\n<li>Destructor</li>\n<li>Destructor</li>\n<li>Destructor</li>\n</ol>\n\n<p>My questions is :</p>\n\n<p>Are the variables test1 and test2 correctly created and destructed? One reason why I'm insecure about this is that both the array and single new / delete operators seem to work for an array.</p>\n\n<p>My reasoning is that even the STL does not seem to use those operators. See the variable <code>test3</code> and its output as example.</p>\n"}, {"tags": ["c++", "shared-ptr"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1543438926, "post_id": 53528010, "comment_id": 93924844, "body": "You should pay attention to <i>which</i> instance is being destructed. Step through in a debugger to find out. You may have created an accidental copy in this code."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1543438962, "post_id": 53528010, "comment_id": 93924860, "body": "<a href=\"http://coliru.stacked-crooked.com/a/33d2a00ca83d2bdc\" rel=\"nofollow noreferrer\">I cannot reproduce</a>.  What compiler and version are you using?  Do you have optimizations turned on?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1543438973, "post_id": 53528010, "comment_id": 93924871, "body": "Tip: Accept string arguments as <code>const std::string&amp;</code> to avoid making endless, pointless copies."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 2, "creation_date": 1543439056, "post_id": 53528010, "comment_id": 93924906, "body": "You should show the code calling <code>foo</code>. Also note that <code>Dog</code> class has implicit copy constructor and assignment operators."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1543439095, "post_id": 53528010, "comment_id": 93924917, "body": "@tadman In this case, that advice is wrong, because it means at least one copy needs to be made, namely from the parameter to the member. To minimize copies, accept the argument by value and then move it into the member."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1543439344, "post_id": 53528010, "comment_id": 93925012, "body": "The given code still <a href=\"https://wandbox.org/permlink/6G7TqpLxP5zoDmbh\" rel=\"nofollow noreferrer\">does not produce the specified output</a>"}, {"owner": {"reputation": 570, "user_id": 4256345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d83aded81e3d7ccfef87df0506a9f6e?s=128&d=identicon&r=PG&f=1", "display_name": "blurb", "link": "https://stackoverflow.com/users/4256345/blurb"}, "edited": false, "score": 0, "creation_date": 1543439346, "post_id": 53528010, "comment_id": 93925013, "body": "I have updated the code with my main function.  I&#39;m actually on a mac, g++ version: Apple LLVM version 10.0.0 (clang-1000.10.44.4).  I am going to try running on a centos vm and see what behavior I get."}, {"owner": {"reputation": 570, "user_id": 4256345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d83aded81e3d7ccfef87df0506a9f6e?s=128&d=identicon&r=PG&f=1", "display_name": "blurb", "link": "https://stackoverflow.com/users/4256345/blurb"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1543439430, "post_id": 53528010, "comment_id": 93925049, "body": "@VTT this output is what I would expect to see."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1543439490, "post_id": 53528010, "comment_id": 93925069, "body": "Why would you expect to see two dogs being destroyed after creating just one?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1543439498, "post_id": 53528010, "comment_id": 93925074, "body": "I don&#39;t get the output from the question either: <a href=\"https://ideone.com/KcDC32\" rel=\"nofollow noreferrer\">ideone.com/KcDC32</a>"}, {"owner": {"reputation": 570, "user_id": 4256345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d83aded81e3d7ccfef87df0506a9f6e?s=128&d=identicon&r=PG&f=1", "display_name": "blurb", "link": "https://stackoverflow.com/users/4256345/blurb"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1543439558, "post_id": 53528010, "comment_id": 93925102, "body": "@VTT I&#39;m saying that the output you linked is the output I would expect to see.  My question is asking why there are two destructors called."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1543439606, "post_id": 53528010, "comment_id": 93925126, "body": "Make sure you do a clean build. I don&#39;t expect the compiler to mess this up."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1543439625, "post_id": 53528010, "comment_id": 93925137, "body": "@Brian Accepting argument by value will actually maximize copies. For example You have an instance of <code>std::string</code> and pass it into constructor, then a temporary <code>std::string</code> object is copy created then it will be moved into class field and then destroyed. This temporary object is worthless."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1543439656, "post_id": 53528010, "comment_id": 93925154, "body": "Please edit your question to contain <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Your example is not complete"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1543439664, "post_id": 53528010, "comment_id": 93925155, "body": "@briansrls But there are no two destructors called... The output you&#39;ve listed in your question does not happen. Most likely you got it from code that is different from the code posted or something else..."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1543439755, "post_id": 53528010, "comment_id": 93925193, "body": "@VTT If you want to keep the original value around, then you <i>must</i> make at least one copy. Accepting the argument by value does create an extra object, but doesn&#39;t make any extra copies compared to accepting by const reference."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1543439950, "post_id": 53528010, "comment_id": 93925273, "body": "@Brian Why would you want to create an extra object anyway?"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1543439988, "post_id": 53528010, "comment_id": 93925283, "body": "@VTT In OP&#39;s case, where they&#39;re passing a string literal, passing by const reference guarantees that two copies must be made. Why would you want that?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1543440114, "post_id": 53528010, "comment_id": 93925342, "body": "@Brian VTT is saying accepting by value and moving is a copy plus a move.  accepting by const reference is just a copy, so it is cheaper."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1543440184, "post_id": 53528010, "comment_id": 93925367, "body": "@NathanOliver nevertheless, if you are passing a string literal, passing by value means 1 copy + 1 move, whereas passing by const reference means 2 copies."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1543440388, "post_id": 53528010, "comment_id": 93925458, "body": "@Brian Where is the second copy?  If you get a string literal then you have a constructor call and then a copy.  If you are passed an lvalue you just have a copy.  with pass by value and move you have a constructor call and a move for the string literal and a copy and move for an lvalue.  In both cases no one copies twice."}, {"owner": {"reputation": 570, "user_id": 4256345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d83aded81e3d7ccfef87df0506a9f6e?s=128&d=identicon&r=PG&f=1", "display_name": "blurb", "link": "https://stackoverflow.com/users/4256345/blurb"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1543441821, "post_id": 53528010, "comment_id": 93926011, "body": "@VTT This behavior is reproducible on a random macOS vm I have.  If you would like detailed instructions on how to reproduce it please let me know.  This turned out to be an environment issue, so it seems obvious you may have problems reproducing."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1543442452, "post_id": 53528010, "comment_id": 93926252, "body": "You missed something: there are more constructors than you think, and you didn\u2019t instrument those. What happens is that a copy of your object is made, but you didn\u2019t instrument the copy constructor. You also need to instrument the move constructor. Then you\u2019ll see that the number of constructor and destructor calls is the same. And that\u2019s the only concern of yours: whether a copy or move is performed, or none, is beside the point here. You wondered why there\u2019s seeming double-destruction: there of course isn\u2019t."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1543444411, "post_id": 53528010, "comment_id": 93926964, "body": "@NathanOliver The call to the constructor of <code>std::string</code> from a string literal does basically the same work as the copy constructor. It copies the characters from the string literal to the <code>std::string</code> storage."}, {"owner": {"reputation": 570, "user_id": 4256345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d83aded81e3d7ccfef87df0506a9f6e?s=128&d=identicon&r=PG&f=1", "display_name": "blurb", "link": "https://stackoverflow.com/users/4256345/blurb"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1543444699, "post_id": 53528010, "comment_id": 93927066, "body": "@Brian I don&#39;t think I understand your argument, wouldn&#39;t copying a reference be much quicker in this example, rather than copying a string by value and then copying that argument into the private member.  With pass by reference, we dont copy the whole string, but the location of the string (which is very small in comparison).  And then, we copy the string into the private member."}], "answers": [{"tags": [], "owner": {"reputation": 570, "user_id": 4256345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d83aded81e3d7ccfef87df0506a9f6e?s=128&d=identicon&r=PG&f=1", "display_name": "blurb", "link": "https://stackoverflow.com/users/4256345/blurb"}, "is_accepted": true, "score": 3, "last_activity_date": 1543440365, "creation_date": 1543440365, "answer_id": 53528362, "question_id": 53528010, "link": "https://stackoverflow.com/questions/53528010/c-make-shared-calling-destructor-twice/53528362#53528362", "title": "C++ make_shared calling destructor twice", "body": "<p>I think I've figured it out.</p>\n\n<p>I tried compiling on centos with </p>\n\n<pre><code>g++ shared_ptr.cpp\n</code></pre>\n\n<p>But the compiler complains that shared_ptr is not a part of std.  Changing to </p>\n\n<pre><code>g++ -std=c++11 shared_ptr.cpp\n</code></pre>\n\n<p>makes compilation successful, and I see the behavior I would expect (no double destruction).</p>\n\n<p>My mac's makefile only specified</p>\n\n<pre><code>g++ shared_ptr.cpp\n</code></pre>\n\n<p>I checked my default c standard on my mac, and it is set to 199711L (1997ish).  Even though this is not c++11, it seems like it was able to compile although the behavior is obviously weird.  </p>\n\n<p>On centOS, the default std is also 199711L, but compilation failed.  It sounds like this is undefined behavior and very dangerous.  </p>\n"}], "owner": {"reputation": 570, "user_id": 4256345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d83aded81e3d7ccfef87df0506a9f6e?s=128&d=identicon&r=PG&f=1", "display_name": "blurb", "link": "https://stackoverflow.com/users/4256345/blurb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "closed_date": 1543441488, "accepted_answer_id": 53528362, "answer_count": 1, "score": 2, "last_activity_date": 1543441523, "creation_date": 1543438788, "last_edit_date": 1543441523, "question_id": 53528010, "link": "https://stackoverflow.com/questions/53528010/c-make-shared-calling-destructor-twice", "closed_reason": "Not suitable for this site", "title": "C++ make_shared calling destructor twice", "body": "<p>I have some code that's confusing me.  I've been learning about shared_pointers and am following a guide on youtube.  I am using make_shared to construct my Dog, and assign the shared pointer to p.</p>\n\n<pre><code>class Dog\n{\n    private:\n        std::string name;\n    public:\n        Dog(std::string _name):\n            name(_name)\n        {\n            std::cout &lt;&lt; \"Creating dog with name \" &lt;&lt; name &lt;&lt; std::endl;\n        }\n\n        ~Dog() { std::cout &lt;&lt; \"Destroying dog!\" &lt;&lt; std::endl; }\n\n        void bark()\n        {\n            std::cout &lt;&lt; name &lt;&lt; \" barks like a Dog! Woof!\" &lt;&lt; std::endl;\n        }\n};\n\nstd::shared_ptr&lt;Dog&gt; foo()\n{\n    std::cout &lt;&lt; \"Entering foo\" &lt;&lt; std::endl;\n    std::shared_ptr&lt;Dog&gt; p = std::make_shared&lt;Dog&gt;(\"Tank\"); //will be deleted when freed off stack\n\n    std::cout &lt;&lt; \"Dog use count = \" &lt;&lt; p.use_count() &lt;&lt; std::endl;\n\n    std::shared_ptr&lt;Dog&gt; p2 = p;\n\n    std::cout &lt;&lt; \"Dog use count = \" &lt;&lt; p.use_count() &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; \"Returning first pointer from foo!\" &lt;&lt; std::endl;\n    return p;\n}\nint main()\n{\n    std::shared_ptr&lt;Dog&gt; p = foo();\n\n    std::cout &lt;&lt; \"Dog use count = \" &lt;&lt; p.use_count() &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Compiled with </p>\n\n<pre><code>g++ shared_ptr.cpp\n</code></pre>\n\n<p>However, here is my output:</p>\n\n<pre><code>Entering foo\nCreating dog with name Tank\nDestroying dog!\nDestroying dog!\nDog use count = 1\nDog use count = 2\nReturning first pointer from foo!\n</code></pre>\n\n<p>Could someone explain the logic of constructing and then double destructing somehow?</p>\n"}, {"tags": ["c++", "qt", "qt5", "qt-slot"], "comments": [{"owner": {"reputation": 6147, "user_id": 3767076, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/64707b213de57fb785081ba23aaea2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3767076/felix"}, "edited": false, "score": 1, "creation_date": 1543440214, "post_id": 53527950, "comment_id": 93925389, "body": "This should be fine, as long as you stick with the &quot;old-style&quot; connect syntax (using <code>SIGNAL</code> and <code>SLOT</code>). The Qt5 version using function pointers will not work."}, {"owner": {"reputation": 1544, "user_id": 6475652, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/8d783a89da27c7d36c0935fc2af7b38e?s=128&d=identicon&r=PG&f=1", "display_name": "Fryz", "link": "https://stackoverflow.com/users/6475652/fryz"}, "reply_to_user": {"reputation": 6147, "user_id": 3767076, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/64707b213de57fb785081ba23aaea2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3767076/felix"}, "edited": false, "score": 0, "creation_date": 1543479382, "post_id": 53527950, "comment_id": 93936546, "body": "Could you please explain why it &quot;won&#39;t work&quot; with the new connection syntax ? Because the answer of @eyllanesc suggests to use it."}, {"owner": {"reputation": 6147, "user_id": 3767076, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/64707b213de57fb785081ba23aaea2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3767076/felix"}, "edited": false, "score": 1, "creation_date": 1543484411, "post_id": 53527950, "comment_id": 93939408, "body": "I remember getting a compiler error trying to do so a while ago. But with my current compiler it does indeed work. So yes, @eyllanesc&#39;s answer is correct. It does work, as long as your compiler accepts the use of pure virtual members in the constructor - and thus you <i>should</i> indeed use the new syntax."}], "answers": [{"comments": [{"owner": {"reputation": 6147, "user_id": 3767076, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/64707b213de57fb785081ba23aaea2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3767076/felix"}, "edited": false, "score": 2, "creation_date": 1543484611, "post_id": 53528890, "comment_id": 93939538, "body": "Your answer is correct, but you should hint that this only works, as long as the signal itself is not emitted from the constructor. Calling <code>connect(...); emit signal1();</code> Will terminate the application due to a &quot;pure virtual method called&quot; exception"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 3, "last_activity_date": 1543443137, "creation_date": 1543443137, "answer_id": 53528890, "question_id": 53527950, "link": "https://stackoverflow.com/questions/53527950/is-it-safe-to-connect-a-signal-to-a-pure-virtual-slot-in-a-constructor-of-a-base/53528890#53528890", "title": "Is it safe to connect a signal to a pure virtual slot in a constructor of a base class?", "body": "<p>There is no problem, because the call to the slot is not given in the constructor or destructor of the class but it is called by the event loop, and that can be observed in the .moc:</p>\n\n<pre><code>void Base::qt_static_metacall(QObject *_o, QMetaObject::Call _c, int _id, void **_a)\n{\n    if (_c == QMetaObject::InvokeMetaMethod) {\n        Base *_t = static_cast&lt;Base *&gt;(_o);\n        Q_UNUSED(_t)\n        switch (_id) {\n        case 0: _t-&gt;signal1(); break;\n        case 1: _t-&gt;slot1(); break;\n        default: ;\n        }\n    } else if (_c == QMetaObject::IndexOfMethod) {\n        int *result = reinterpret_cast&lt;int *&gt;(_a[0]);\n        {\n            using _t = void (Base::*)();\n            if (*reinterpret_cast&lt;_t *&gt;(_a[1]) == static_cast&lt;_t&gt;(&amp;Base::signal1)) {\n                *result = 0;\n                return;\n            }\n        }\n    }\n    Q_UNUSED(_a);\n}\n</code></pre>\n\n<hr>\n\n<p>On the other hand it is advisable to use the new connection syntax:</p>\n\n<pre><code># ...\nconnect(this, &amp;Base::signal1, this, &amp;Base::slot1);\n# ...\nQTimer::singleShot(0, &amp;d, &amp;Derived::emitSignal1);\n# ...\n</code></pre>\n"}], "owner": {"reputation": 1544, "user_id": 6475652, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/8d783a89da27c7d36c0935fc2af7b38e?s=128&d=identicon&r=PG&f=1", "display_name": "Fryz", "link": "https://stackoverflow.com/users/6475652/fryz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 53528890, "answer_count": 1, "score": 4, "last_activity_date": 1545531417, "creation_date": 1543438544, "last_edit_date": 1545531417, "question_id": 53527950, "link": "https://stackoverflow.com/questions/53527950/is-it-safe-to-connect-a-signal-to-a-pure-virtual-slot-in-a-constructor-of-a-base", "title": "Is it safe to connect a signal to a pure virtual slot in a constructor of a base class?", "body": "<p>I ask myself if the following code is safe :</p>\n\n<pre><code>#include &lt;QCoreApplication&gt;\n#include &lt;QObject&gt;\n#include &lt;QDebug&gt;\n#include &lt;QTimer&gt;\n\nclass Base : public QObject\n{\n    Q_OBJECT\n\npublic:\n    Base()\n    {\n        // is it safe to do that ?\n        connect(this, SIGNAL(signal1()), this, SLOT(slot1()));\n    }\n    virtual ~Base() {}\n\nsignals:\n    void signal1();\n\npublic slots:\n    virtual void slot1() = 0; // could be only virtual\n};\n\nclass Derived : public Base\n{\n    Q_OBJECT\n\npublic slots:\n    virtual void slot1()\n    {\n        qDebug() &lt;&lt; \"derived slot\";\n    }\n\n    void emitSignal1()\n    {\n        emit signal1();\n    }\n};\n\nint main(int argc, char *argv[])\n{\n    QCoreApplication a(argc, argv);\n\n    Derived d;\n\n    QTimer::singleShot(0, &amp;d, SLOT(emitSignal1()));\n\n    return a.exec();\n}\n\n#include \"main.moc\"\n</code></pre>\n\n<p>The output is as expected :</p>\n\n<pre><code>derived slot\n</code></pre>\n\n<p>I haven't look at what the <code>connect</code> method does behind the scene, but i guess it's something like setting a callback function.</p>\n\n<p>If there is no call to a virtual method in the <code>Base</code> class constructor, then i don't see any side effects so far but is it true ?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "macos", "cmake"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1543438362, "post_id": 53527840, "comment_id": 93924605, "body": "This looks like a compilation error, not a cmake error. And this project looks like a regular executable project, it does not seem to utilize any test library."}, {"owner": {"reputation": 11, "user_id": 5401521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/223b3737e62a9011e4b9774a7bbabf06?s=128&d=identicon&r=PG&f=1", "display_name": "daj", "link": "https://stackoverflow.com/users/5401521/daj"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1543440479, "post_id": 53527840, "comment_id": 93925499, "body": "@VTT It compiles fine when eclipse is used instead of CMake. Do you have an idea for what the cause of the problem is?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5401521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/223b3737e62a9011e4b9774a7bbabf06?s=128&d=identicon&r=PG&f=1", "display_name": "daj", "link": "https://stackoverflow.com/users/5401521/daj"}, "edited": false, "score": 0, "creation_date": 1543441916, "post_id": 53528410, "comment_id": 93926049, "body": "Well, shoot. The entire point of that was to include a String class so that the c++ program can test code written for an arduino. The actual file in automatedtesting is named String.h, not string.h, but I guess the compiler isn&#39;t noticing the difference. Will see if I can get it to pay attention to the case. Thanks for pointing that out!"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "reply_to_user": {"reputation": 11, "user_id": 5401521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/223b3737e62a9011e4b9774a7bbabf06?s=128&d=identicon&r=PG&f=1", "display_name": "daj", "link": "https://stackoverflow.com/users/5401521/daj"}, "edited": false, "score": 0, "creation_date": 1543443819, "post_id": 53528410, "comment_id": 93926768, "body": "Thanks for the comment. I have added a note about case-insensitive nature of MacOS into the answer."}], "tags": [], "owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "is_accepted": true, "score": 1, "last_activity_date": 1543476662, "last_edit_date": 1543476662, "creation_date": 1543440591, "answer_id": 53528410, "question_id": 53527840, "link": "https://stackoverflow.com/questions/53527840/cmake-fails-on-mac/53528410#53528410", "title": "CMake fails on Mac", "body": "<p>Never give a <strong>standard name</strong> to a header with <em>custom</em> functionality!</p>\n\n<p>Changing only a case (lower to upper or vice versa) isn't a good idea too.</p>\n\n<hr>\n\n<p>According to the include chain in the error message, the <strong>system header</strong> file</p>\n\n<pre><code>.../usr/include/c++/v1/cstring\n</code></pre>\n\n<p>actually <strong>includes</strong> a <strong>custom</strong> one</p>\n\n<pre><code>.../automatedTesting/src/string.h\n</code></pre>\n\n<p>This is because you give a standard name <code>string.h</code> to your custom header. (Well, the actual name of the file is <code>String.h</code>, but MacOS uses a <em>case-insensitive</em> filesystem). And this is a real problem: the system header expects to obtain some standard definitions with such include, but the custom header doesn't provide them.</p>\n\n<p>Rename your custom header to the <em>non-standard</em> name (e.g., <code>mystring.h</code>) and adjust your <code>#include</code> directives accordingly.</p>\n\n<hr>\n"}], "owner": {"reputation": 11, "user_id": 5401521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/223b3737e62a9011e4b9774a7bbabf06?s=128&d=identicon&r=PG&f=1", "display_name": "daj", "link": "https://stackoverflow.com/users/5401521/daj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "closed_date": 1543483207, "accepted_answer_id": 53528410, "answer_count": 1, "score": -2, "last_activity_date": 1543865540, "creation_date": 1543437990, "last_edit_date": 1543865540, "question_id": 53527840, "link": "https://stackoverflow.com/questions/53527840/cmake-fails-on-mac", "closed_reason": "Needs more focus", "title": "CMake fails on Mac", "body": "<p>I am running a C++ program to test code in my C++ project. I have successfully run it using Eclipse. However, when I try to build it using CMake (for automated testing) it hits the following issue:\nThe cmake command resolves without problems, but when I run make, it fails with errors of the following three categories:</p>\n\n<pre><code>In file included from /Users/douglas/Desktop/automatedTesting/src/main.cpp:9:\nIn file included from /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/iostream:38:\nIn file included from /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/ios:216:\nIn file included from /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/__locale:15:\nIn file included from /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/string:470:\nIn file included from /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/string_view:169:\nIn file included from /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/__string:56:\nIn file included from /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/algorithm:641:\nIn file included from /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/cstring:61:\nIn file included from /Users/douglas/Desktop/automatedTesting/src/string.h:6:\nIn file included from /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/sstream:174:\nIn file included from /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/ostream:139:\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/streambuf:139:5: error: \nunknown type name 'locale'\n</code></pre>\n\n<p>Along with \u2018locale\u2019 the same issue occurs with \u2018streamsize\u2019</p>\n\n<pre><code>/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/streambuf:155:41: error: \n  incomplete type 'std::__1::ios_base' named in nested name specifier\n</code></pre>\n\n<p>And lastly:    </p>\n\n<pre><code>/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/iosfwd:98:24: note: \n  forward declaration of 'std::__1::ios_base'\n</code></pre>\n\n<p>These errors are repeated multiple times until a total of 20 are generated, at which point it gives the following final output:</p>\n\n<pre><code>fatal error: too many errors emitted, stopping now [-ferror-limit=]\n20 errors generated.\nmake[2]: *** [CMakeFiles/makeTest.dir/src/main.cpp.o] Error 1\nmake[1]: *** [CMakeFiles/makeTest.dir/all] Error 2\nmake: *** [all] Error 2\n</code></pre>\n\n<p>My CMakeLists.txt is the following:</p>\n\n<pre><code>cmake_minimum_required (VERSION 2.6)\nproject(makeTest)\n\nset (makeTest_VERSION_MAJOR 1)\nset (makeTest_VERSION_MINOR 0)\n\nadd_executable(makeTest src/main.cpp serial-messenger/forTest.cpp src/String.cpp src/parson.c)\ntarget_include_directories(makeTest PRIVATE src)\ntarget_include_directories(makeTest PRIVATE serial-messenger)\n</code></pre>\n\n<p>Environment details:</p>\n\n<p>OS: Mac OS High Sierra version 10.13.4</p>\n\n<p>CMake: 3.13.0</p>\n\n<p>CLANG: Apple LLVM version 9.1.0 (clang-902.0.39.2)</p>\n\n<p>XCode is installed</p>\n\n<p>I'm sure I must have made some error with setting up the environment for CMake, but I have no idea what it might be.</p>\n\n<p>Edit: it looks like since Macs are case insensitive, it is mistaking my String.h file for string.h, causing the problem. </p>\n\n<p>Edit 2: The problem was indeed due to Mac being case insensitive. Running it on a case sensitive OS like Linux resolves the issue.</p>\n"}, {"tags": ["c++", "c++14", "icc"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1543437526, "post_id": 53527682, "comment_id": 93924207, "body": "Looks like an intel bug to me."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1543437578, "post_id": 53527682, "comment_id": 93924238, "body": "Most likely intel doesn&#39;t mark <code>pair</code>&#39;s move constructor as <code>noexcept</code>.  I can recal if this is a QOI issue or acxtually a bug."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1543437629, "post_id": 53527682, "comment_id": 93924263, "body": "@NathanOliver Intel uses GCC&#39;s STL (it doesn&#39;t have one), so it would use whatever is available to GCC"}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1543437884, "post_id": 53527682, "comment_id": 93924385, "body": "@SergeyA but <code>noexcept</code> and <code>std::is_nothrow_move_constructible</code> require compiler support, and they seem to fail for map of unique pointers on ICC"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1543437930, "post_id": 53527682, "comment_id": 93924404, "body": "@PiotrSkotnicki which brings us back to the original statement - it is a bug in Intel. My message was that it is not <code>std::pair</code> constructor, which is part of STL."}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1543439420, "post_id": 53527682, "comment_id": 93925043, "body": "libstdc++ 7.3.0 would use <code>map(map&amp;&amp;) = default;</code> to declare a move-constructor. probably icc auto-generates no-<code>noexcept</code> version, forcing a vector to make a copy on relocation"}, {"owner": {"reputation": 1177, "user_id": 407644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d635402b9c87def35381e55867f82343?s=128&d=identicon&r=PG", "display_name": "Jaka", "link": "https://stackoverflow.com/users/407644/jaka"}, "edited": false, "score": 2, "creation_date": 1543440516, "post_id": 53527682, "comment_id": 93925518, "body": "MSVC 18.00.40629 (from 2017 15.9.2) also has this problem"}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1543441190, "post_id": 53527682, "comment_id": 93925781, "body": "Standard doesn&#39;t require map to be noexcept, so Intel is right, standard is flawed in this case."}, {"owner": {"reputation": 1177, "user_id": 407644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d635402b9c87def35381e55867f82343?s=128&d=identicon&r=PG", "display_name": "Jaka", "link": "https://stackoverflow.com/users/407644/jaka"}, "reply_to_user": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1543441711, "post_id": 53527682, "comment_id": 93925966, "body": "@JVApen this also fails with deque, set and list on MSVC does are those also not required to be noexcept?"}, {"owner": {"reputation": 1177, "user_id": 407644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d635402b9c87def35381e55867f82343?s=128&d=identicon&r=PG", "display_name": "Jaka", "link": "https://stackoverflow.com/users/407644/jaka"}, "edited": false, "score": 0, "creation_date": 1543442153, "post_id": 53527682, "comment_id": 93926150, "body": "At least in MSVC&#39;s STL vector is noexcept default constructible if the contained type is nothrow default constructible. map, set, list and deque are not. tuple and pair again are..."}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "reply_to_user": {"reputation": 1177, "user_id": 407644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d635402b9c87def35381e55867f82343?s=128&d=identicon&r=PG", "display_name": "Jaka", "link": "https://stackoverflow.com/users/407644/jaka"}, "edited": false, "score": 0, "creation_date": 1543442769, "post_id": 53527682, "comment_id": 93926372, "body": "@Jaka: I don&#39;t know, I know I worked around this specific bug after finding a report it was correct behavior"}, {"owner": {"reputation": 1384, "user_id": 4639195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RKBh6.png?s=128&g=1", "display_name": "cantordust", "link": "https://stackoverflow.com/users/4639195/cantordust"}, "edited": false, "score": 0, "creation_date": 1543445976, "post_id": 53527682, "comment_id": 93927460, "body": "<a href=\"https://godbolt.org/z/GFl5fB\" rel=\"nofollow noreferrer\">Compiles</a> with ICC 18. ICC 19 also <a href=\"https://godbolt.org/z/HqQPHS\" rel=\"nofollow noreferrer\">fails to compile</a> with <code>reserve</code> instead of <code>resize</code> - I wonder if that is still correct behaviour."}], "answers": [{"comments": [{"owner": {"reputation": 442, "user_id": 8362480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d76c4d79689610ffe4d0637e881bc91a?s=128&d=identicon&r=PG&f=1", "display_name": "H. Rittich", "link": "https://stackoverflow.com/users/8362480/h-rittich"}, "edited": false, "score": 0, "creation_date": 1543493022, "post_id": 53536723, "comment_id": 93944417, "body": "Great answer. Thank you."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1593529552, "post_id": 53536723, "comment_id": 110810518, "body": "It\u2019s important to note <i>why</i> the library is specified this way despite this misbehavior: the main reason is the support for <b>incomplete</b> types in containers like <code>std::map</code>, which precludes making them non-copyable if their element type is."}], "tags": [], "owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "is_accepted": true, "score": 17, "last_activity_date": 1543524254, "last_edit_date": 1543524254, "creation_date": 1543486866, "answer_id": 53536723, "question_id": 53527682, "link": "https://stackoverflow.com/questions/53527682/deleted-function-in-stdpair-when-using-a-unique-ptr-inside-a-map/53536723#53536723", "title": "Deleted Function in std::pair when using a unique_ptr inside a map", "body": "<p>The problem originates from the following post-condition of <code>std::vector&lt;T&gt;::resize</code>, <a href=\"https://timsong-cpp.github.io/cppwp/n4140/sequences#vector.capacity-14\" rel=\"noreferrer\">[vector.capacity]</a>:</p>\n\n<blockquote>\n  <p><em>Remarks:</em> If an exception is thrown other than by the move constructor of a non-<em>CopyInsertable</em> <code>T</code> there are no effects.</p>\n</blockquote>\n\n<p>That is, a vector must remain unchanged if relocation fails. One of the reasons relocation may fail is due to an exception, specifically, when a copy or move constructor, used for shifting elements from an old storage to a new one, throws an exception. </p>\n\n<p>Does <em>copying</em> elements change the original storage in any way? No<sup>1</sup>. Does <em>moving</em> elements change the original storage? Yes. Which operation is more efficient? Moving. Can a vector always prefer moving to copying? Not always. </p>\n\n<p>If a move constructor can throw an exception, there's no possibility to restore the original content of the old storage, because an attempt to move the already shifted elements back to the old chunk may fail <em>again</em>. In such a case, a vector will use a move constructor to relocate its elements from the old storage to a new one <em>only</em> if that move constructor guarantees it will not throw an exception (or a move constructor is the only option when a copy constructor is not available). How does a function promise it will not throw an exception? One will be annotated with the <code>noexcept</code> specifier and tested with the <code>noexcept</code> operator.</p>\n\n<p>Testing the below code with icc:</p>\n\n<pre><code>std::map&lt;int, std::unique_ptr&lt;int&gt;&gt; m;\nstatic_assert(noexcept(std::map&lt;int, std::unique_ptr&lt;int&gt;&gt;(std::move(m))), \"!\");\n</code></pre>\n\n<p>fails on the assertion. This means that <code>m</code> is <em>not</em> nothrow-<em>MoveConstructible</em>.</p>\n\n<p>Does the standard require it to be <code>noexcept</code>? <a href=\"https://timsong-cpp.github.io/cppwp/n4140/map\" rel=\"noreferrer\">[map.overview]</a>:</p>\n\n<pre><code>// [map.cons], construct/copy/destroy:\nmap(const map&amp; x);\nmap(map&amp;&amp; x);\n</code></pre>\n\n<p><code>std::map</code> is both <em>Move-</em> and <em>CopyConstructible</em>. Neither is required not to throw an exception.</p>\n\n<p>However, an implementation is allowed to provide this guarantee <sup>{{citation needed}}</sup>. Your code uses the following definition:</p>\n\n<pre><code>map(map&amp;&amp;) = default;\n</code></pre>\n\n<p>Is an implicitly generated move constructor required to be <code>noexcept</code>? <a href=\"https://timsong-cpp.github.io/cppwp/n4140/except.spec#14\" rel=\"noreferrer\">[except.spec]</a>:</p>\n\n<blockquote>\n  <p>An inheriting constructor ([class.inhctor]) and an implicitly declared special member function (Clause [special]) have an <em>exception-specification</em>. If <code>f</code> is an inheriting constructor or an implicitly declared default constructor, copy constructor, <strong>move constructor</strong>, destructor, copy assignment operator, or move assignment operator, its implicit <em>exception-specification</em> specifies the <em>type-id</em> <code>T</code> if and only if <code>T</code> is allowed by the <em>exception-specification</em> of a function directly invoked by <code>f</code>'s implicit definition; <code>f</code> allows all exceptions if any function it directly invokes allows all exceptions, and <code>f</code> has the <em>exception-specification</em> <code>noexcept(true)</code> <strong>if every function it directly invokes allows no exceptions.</strong></p>\n</blockquote>\n\n<p>At this point, it's hard to say whether the implicitly generated by icc move constructor should be <code>noexcept</code> or not. Either way, <code>std::map</code> itself was not required to be nothrow-<em>MoveConstructible</em>, so it's more a quality of implementation issue (implementation of the library or implementation of implicit generation of constructors) and icc gets away with it regardless of this being an actual bug or not.</p>\n\n<p>Eventually, <code>std::vector</code> will fall back to using the safer option which is a copy constructor to relocate its elements (maps of unique pointers), but since <code>std::unique_ptr</code> is not <em>CopyConstructible</em>, an error is reported.</p>\n\n<p>On the other hand, <code>std::unique_ptr</code>'s move constructor <em>is</em> required to be <code>noexcept</code>, <a href=\"https://timsong-cpp.github.io/cppwp/n4140/unique.ptr.single.ctor\" rel=\"noreferrer\">[unique.ptr.single.ctor]</a>:</p>\n\n<pre><code>unique_ptr(unique_ptr&amp;&amp; u) noexcept;\n</code></pre>\n\n<p>A vector of unique pointers can safely move its elements when relocation is required.</p>\n\n<hr>\n\n<p>In a newer version of <code>stl_map.h</code> there's the following user-provided definition of map's move constructor:</p>\n\n<pre><code>map(map&amp;&amp; __x)\n  noexcept(is_nothrow_copy_constructible&lt;_Compare&gt;::value)\n  : _M_t(std::move(__x._M_t)) { }\n</code></pre>\n\n<p>which explicitly makes <code>noexcept</code> dependent only on whether or not copying a comparator throws.</p>\n\n<hr>\n\n<p><sub><sup>1</sup> Technically, a copy constructor accepting a non-const l-value reference can change the original object, e.g., std::auto_ptr, but <em>MoveInsertable</em> requires vector elements to be constructible from r-values, that cannot bind to non-const l-value references.</sub></p>\n"}], "owner": {"reputation": 442, "user_id": 8362480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d76c4d79689610ffe4d0637e881bc91a?s=128&d=identicon&r=PG&f=1", "display_name": "H. Rittich", "link": "https://stackoverflow.com/users/8362480/h-rittich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1680, "favorite_count": 1, "accepted_answer_id": 53536723, "answer_count": 1, "score": 12, "last_activity_date": 1543524254, "creation_date": 1543437363, "last_edit_date": 1543437582, "question_id": 53527682, "link": "https://stackoverflow.com/questions/53527682/deleted-function-in-stdpair-when-using-a-unique-ptr-inside-a-map", "title": "Deleted Function in std::pair when using a unique_ptr inside a map", "body": "<p>I have a piece of C++ code for which I am not sure whether it is correct or not. Consider the following code.</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;vector&gt;\n#include &lt;map&gt;\n\nusing namespace std;\n\nint main(int argc, char* argv[])\n{\n    vector&lt;map&lt;int, unique_ptr&lt;int&gt;&gt;&gt; v;\n    v.resize(5);\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>The GCC compiles this code without a problem. The Intel compiler (version 19), however, stops with an error:</p>\n\n<pre><code>/usr/local/ [...] /include/c++/7.3.0/ext/new_allocator.h(136): error: function \"std::pair&lt;_T1, _T2&gt;::pair(const std::pair&lt;_T1, _T2&gt; &amp;) [with _T1=const int, _T2=std::unique_ptr&lt;int, std::default_delete&lt;int&gt;&gt;]\" (declared at line 292 of \"/usr/local/ [...] /include/c++/7.3.0/bits/stl_pair.h\") cannot be referenced -- it is a deleted function\n    { ::new((void *)__p) _Up(std::forward&lt;_Args&gt;(__args)...); }\n                            ^\n      detected during:\n\n[...]\n\ninstantiation of \"void std::vector&lt;_Tp, _Alloc&gt;::resize(std::vector&lt;_Tp, _Alloc&gt;::size_type={std::size_t={unsigned long}}) [with _Tp=std::map&lt;int, std::unique_ptr&lt;int, std::default_delete&lt;int&gt;&gt;, std::less&lt;int&gt;, std::allocator&lt;std::pair&lt;const int, std::unique_ptr&lt;int, std::default_delete&lt;int&gt;&gt;&gt;&gt;&gt;, _Alloc=std::allocator&lt;std::map&lt;int, std::unique_ptr&lt;int, std::default_delete&lt;int&gt;&gt;, std::less&lt;int&gt;, std::allocator&lt;std::pair&lt;const int, std::unique_ptr&lt;int, std::default_delete&lt;int&gt;&gt;&gt;&gt;&gt;&gt;]\"\n                  at line 10 of \"program.cpp\"\n</code></pre>\n\n<p>Both compilers compile the following code without a problem.</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;vector&gt;\n#include &lt;map&gt;\n\nusing namespace std;\n\nint main(int argc, char* argv[])\n{\n    vector&lt;unique_ptr&lt;int&gt;&gt; v;\n    v.resize(5);\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>The first code fails with the Intel compiler, because it tries to create a copy of the unique_ptr, which only defines a move constructor. I am, however, not sure whether the first program is a legal C++ program.</p>\n\n<p>I would like to know whether the first code is wrong or whether there is a bug in the Intel compiler. And if the first code is wrong, why is the second one correct? Or is the second one also wrong?</p>\n"}, {"tags": ["c++", "linux", "visual-studio", "cmake"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1543436095, "post_id": 53527330, "comment_id": 93923616, "body": "I have tried automatic solutions but found its best to write the CMakeLists.txt yourself even for a large project. You may want to refactor the layout to be more compatible with CMake when doing so."}, {"owner": {"reputation": 1031, "user_id": 6763393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44926355c84effac26e3a3f1582405a?s=128&d=identicon&r=PG&f=1", "display_name": "stanthomas", "link": "https://stackoverflow.com/users/6763393/stanthomas"}, "edited": false, "score": 0, "creation_date": 1543697668, "post_id": 53527330, "comment_id": 94014141, "body": "Is CMake essentail to you? If not you can use the Visual Sudio C++ for Linux add-on. You&#39;ll have to create a new MSBuild project for the Linux target but, while tedious, is simple and repetetive. You can share the source code. Some more info here : <a href=\"https://stackoverflow.com/questions/51151271/can-i-compile-a-dll-project-to-a-shared-object-so-file-for-arm/51271490#51271490\" title=\"can i compile a dll project to a shared object so file for arm\">stackoverflow.com/questions/51151271/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2559, "user_id": 6547185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BReoW.jpg?s=128&g=1", "display_name": "mr NAE", "link": "https://stackoverflow.com/users/6547185/mr-nae"}, "is_accepted": false, "score": 3, "last_activity_date": 1553251363, "creation_date": 1553251363, "answer_id": 55297866, "question_id": 53527330, "link": "https://stackoverflow.com/questions/53527330/how-can-i-create-a-cmake-file-from-existing-visual-studio-cpp-project/55297866#55297866", "title": "How Can I create a Cmake file from existing visual studio CPP project?", "body": "<p>It would be a great tool if it was possible to convert MSVS project to cmake in Linux environment, but unfortunately I also didn't find such a tool.</p>\n\n<p>However, you can convert VS solution to CMakeLists.txt. You can try <a href=\"https://github.com/algorys/cmakeconverter\" rel=\"nofollow noreferrer\">this</a> or <a href=\"https://github.com/ainvyu/vcxproj2cmake\" rel=\"nofollow noreferrer\">that</a> tools or some others, but then you need to redesign it. </p>\n"}], "owner": {"reputation": 61, "user_id": 1538653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ce3d0dfa3e329594c38bcb8158729c6?s=128&d=identicon&r=PG", "display_name": "user1538653", "link": "https://stackoverflow.com/users/1538653/user1538653"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4104, "favorite_count": 2, "answer_count": 1, "score": 3, "last_activity_date": 1553251363, "creation_date": 1543435717, "last_edit_date": 1543435945, "question_id": 53527330, "link": "https://stackoverflow.com/questions/53527330/how-can-i-create-a-cmake-file-from-existing-visual-studio-cpp-project", "title": "How Can I create a Cmake file from existing visual studio CPP project?", "body": "<p>I am dealing with relatively big visual studio CPP project (we implemented this project from scratch in windows environment). Now, I have to compile this project in Linux environment. But, I have no idea How I can create a Cmake file from this visual studio project . Is there any straight forward solution?</p>\n\n<p>Thank you    </p>\n"}, {"tags": ["c++", "file", "ofstream"], "comments": [{"owner": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "edited": false, "score": 0, "creation_date": 1543432939, "post_id": 53526601, "comment_id": 93922129, "body": "Thank you for posting a question.  Please include a main() function and provide a <a href=\"https://stackoverflow.com/help/mcve\">Compilable, Minimal, Complete, and Verifiable Example</a>.  This helps us help you."}, {"owner": {"reputation": 33, "user_id": 8120239, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HrdGD_bvAH8/AAAAAAAAAAI/AAAAAAAAAL0/vbqzUwgcJaI/photo.jpg?sz=128", "display_name": "Aleksandrs Kantajevs", "link": "https://stackoverflow.com/users/8120239/aleksandrs-kantajevs"}, "reply_to_user": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "edited": false, "score": 0, "creation_date": 1543433471, "post_id": 53526601, "comment_id": 93922386, "body": "@john-murray Compilable, Minimal, Complete, and Verifiable Example  - Done!"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1543433671, "post_id": 53526601, "comment_id": 93922486, "body": "&quot;How I can check whether the permissions would allow the write&quot; - <code>stat()</code> or <code>access()</code> would be two ways.. but it can still fail (TOCTOU)."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1543434345, "post_id": 53526601, "comment_id": 93922791, "body": "Note: <a href=\"https://en.wikipedia.org/wiki/Time_of_check_to_time_of_use\" rel=\"nofollow noreferrer\">TOCTOU is not cuckoo for Cocoa Puffs.</a>"}, {"owner": {"reputation": 1422, "user_id": 4997668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f9ri4.jpg?s=128&g=1", "display_name": "Derek T. Jones", "link": "https://stackoverflow.com/users/4997668/derek-t-jones"}, "edited": false, "score": 0, "creation_date": 1543435526, "post_id": 53526601, "comment_id": 93923346, "body": "I notice that when I run your code on my Linux box (using <code>&#47;</code> instead of `c:\\`), it functions the way you&#39;re expecting (fails with &quot;Error 1&quot;). This makes me wonder whether your problem is more Windows-related than C++-related."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1543435678, "post_id": 53526601, "comment_id": 93923421, "body": "@Fran&#231;oisAndrieux Per <a href=\"https://en.cppreference.com/w/cpp/io/basic_ofstream/basic_ofstream\" rel=\"nofollow noreferrer\">this</a> <code>failbit</code> is set if it can&#39;t open the file."}], "answers": [{"comments": [{"owner": {"reputation": 5733, "user_id": 963195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f79a3e34a1b01290d16f57a61bdaa350?s=128&d=identicon&r=PG", "display_name": "Andrew E", "link": "https://stackoverflow.com/users/963195/andrew-e"}, "edited": false, "score": 0, "creation_date": 1576234603, "post_id": 53527576, "comment_id": 104842206, "body": "I had no idea this was a thing at all. Thank you!"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 5733, "user_id": 963195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f79a3e34a1b01290d16f57a61bdaa350?s=128&d=identicon&r=PG", "display_name": "Andrew E", "link": "https://stackoverflow.com/users/963195/andrew-e"}, "edited": false, "score": 0, "creation_date": 1576236216, "post_id": 53527576, "comment_id": 104842988, "body": "@AndrewE You are welcome! This &quot;feature&quot; had me fooled for quite some time before I found out about it myself. :-)"}], "tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 1, "last_activity_date": 1543438948, "last_edit_date": 1543438948, "creation_date": 1543436860, "answer_id": 53527576, "question_id": 53526601, "link": "https://stackoverflow.com/questions/53526601/stdofstream-dont-show-error-on-permission-denied-c/53527576#53527576", "title": "std::ofstream dont show error on permission denied C++", "body": "<p>I'd say your code works and the write operation is actually done, but for the sake of it, add a check after the write too:</p>\n\n<pre><code>outfile &lt;&lt; err_line &lt;&lt; endl;\nif(outfile.fail()) cout &lt;&lt; \"Error3\\n\";\nelse cout&lt;&lt;\"OK\";\n</code></pre>\n\n<p>On my system, I'll get your <code>Error 1 ... can't open file</code> if the file isn't opened for writing successfully.</p>\n\n<p><em>Edit:</em> Or are you running Windows with <code>Compatibility Files</code> virtualization still active? If so, the file will probably be in the <em>Virtual Store</em>, not in the real <code>C:\\err.txt</code> path.</p>\n\n<p>Example: <code>C:\\Users\\username\\AppData\\Local\\VirtualStore</code></p>\n\n<p>If you find it there, you may find a lot of other stuff in there too. At least I did years ago when I had a similar problem. I decided to manually move (with admin rights) the few important files that some of my older programs had put there and then turn Virtual Store off. I can't find a good and simple official Microsoft link for how to <strong>turn off file and registry virtualization</strong> right now so perhaps this will do:</p>\n\n<p>RegEdit:\n<code>HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies\\System\\</code>\nCreate a <code>DWORD</code> Key with the name <code>EnableVirtualization</code> and give it the value <code>0</code>. If the key is already there, but set to something else than zero, change it.</p>\n\n<p>There's more here:\n<a href=\"https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/dd835564(v=ws.10)#BKMK_Virtualize\" rel=\"nofollow noreferrer\">UAC Group Policy Settings and Registry Key Settings</a></p>\n"}], "owner": {"reputation": 33, "user_id": 8120239, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HrdGD_bvAH8/AAAAAAAAAAI/AAAAAAAAAL0/vbqzUwgcJaI/photo.jpg?sz=128", "display_name": "Aleksandrs Kantajevs", "link": "https://stackoverflow.com/users/8120239/aleksandrs-kantajevs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 981, "favorite_count": 0, "accepted_answer_id": 53527576, "answer_count": 1, "score": 1, "last_activity_date": 1543438948, "creation_date": 1543432688, "last_edit_date": 1543433372, "question_id": 53526601, "link": "https://stackoverflow.com/questions/53526601/stdofstream-dont-show-error-on-permission-denied-c", "title": "std::ofstream dont show error on permission denied C++", "body": "<p>The following code when path = \"c:\\\" doesn't write to file c:\\err.txt because permission is denied. But it doesn't generate an error at the same time. Rather, it outputs \"OK\". </p>\n\n<p>How I can check whether the permissions would allow the write?</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nbool writeLineToErr(string path, string err_line){\n  std::ofstream outfile(path+\"err.txt\", std::ios_base::app);\n\n  if(!outfile){\n      cout&lt;&lt;\"Error 1 \"+path+\"err.txt\"+\" can't open file!\";\n      return false;\n  }\n\n  if(outfile.fail()){\n       cout&lt;&lt;\"Error 2 \"+path+\"err.txt\"+\" can't open file!\";\n      return false;\n  }\n  outfile &lt;&lt; err_line &lt;&lt; endl;\n\n  cout&lt;&lt;\"OK\";\n  outfile.close();\n  return true;\n}\n\nint main(int argc, char** argv) {\n\n    writeLineToErr(\"c:\\\\\",\"Some Line\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1543433469, "post_id": 53526555, "comment_id": 93922385, "body": "You do not need ` (void)` as a prefix to your <code>help()</code>. Overall, I see no problem with solution 2."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1543433506, "post_id": 53526555, "comment_id": 93922403, "body": "@user463035818 compiles just fine. You do not need an instance."}, {"owner": {"reputation": 570, "user_id": 3246135, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7765949b68c1d295858f4cf9bd9ceb1?s=128&d=identicon&r=PG&f=1", "display_name": "nilo", "link": "https://stackoverflow.com/users/3246135/nilo"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1543433684, "post_id": 53526555, "comment_id": 93922495, "body": "@user463035818 I have just double-checked, and solution 2 compiles fine. Try it if you do not believe it (replace the ComplexTypes by ints). You seems to miss the point. <code>help()</code> <i>is</i> an instantiation."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1543433853, "post_id": 53526555, "comment_id": 93922564, "body": "yes it compiles, sorry I misread your code."}, {"owner": {"reputation": 570, "user_id": 3246135, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7765949b68c1d295858f4cf9bd9ceb1?s=128&d=identicon&r=PG&f=1", "display_name": "nilo", "link": "https://stackoverflow.com/users/3246135/nilo"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1543433909, "post_id": 53526555, "comment_id": 93922592, "body": "@user463035818 On the other hand <code>help()</code> in solution 1 or 2 cannot be made static, since it invokes non-static member functions."}, {"owner": {"reputation": 570, "user_id": 3246135, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7765949b68c1d295858f4cf9bd9ceb1?s=128&d=identicon&r=PG&f=1", "display_name": "nilo", "link": "https://stackoverflow.com/users/3246135/nilo"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1543434749, "post_id": 53526555, "comment_id": 93922996, "body": "@SergeyA thanks for your approval."}, {"owner": {"reputation": 570, "user_id": 3246135, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7765949b68c1d295858f4cf9bd9ceb1?s=128&d=identicon&r=PG&f=1", "display_name": "nilo", "link": "https://stackoverflow.com/users/3246135/nilo"}, "reply_to_user": {"reputation": 7363, "user_id": 1678770, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9afe9e6d4e0264da3d228c79162377f8?s=128&d=identicon&r=PG", "display_name": "Human-Compiler", "link": "https://stackoverflow.com/users/1678770/human-compiler"}, "edited": false, "score": 0, "creation_date": 1543435249, "post_id": 53526555, "comment_id": 93923222, "body": "@Bitwize solution 2 without <code>(void)</code> generates no warnings whatsoever. It is not a variable declaration, since the object remains anonymous."}, {"owner": {"reputation": 570, "user_id": 3246135, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7765949b68c1d295858f4cf9bd9ceb1?s=128&d=identicon&r=PG&f=1", "display_name": "nilo", "link": "https://stackoverflow.com/users/3246135/nilo"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1543435256, "post_id": 53526555, "comment_id": 93923228, "body": "@SergeyA I agree <code>(void)</code> is not needed. I just use it to document that I disregard the object returned by the constructor on purpose."}, {"owner": {"reputation": 570, "user_id": 3246135, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7765949b68c1d295858f4cf9bd9ceb1?s=128&d=identicon&r=PG&f=1", "display_name": "nilo", "link": "https://stackoverflow.com/users/3246135/nilo"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1543435720, "post_id": 53526555, "comment_id": 93923438, "body": "@user463035818 I do consider firing two incorrect comments in no time without taking the time to understand the question as disrespectful, and therefore unwelcoming."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1543436013, "post_id": 53526555, "comment_id": 93923580, "body": "Full disclosure: I didn&#39;t downvote the question, but I voted to close it as primarily opinion-based."}, {"owner": {"reputation": 570, "user_id": 3246135, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7765949b68c1d295858f4cf9bd9ceb1?s=128&d=identicon&r=PG&f=1", "display_name": "nilo", "link": "https://stackoverflow.com/users/3246135/nilo"}, "edited": false, "score": 0, "creation_date": 1543436128, "post_id": 53526555, "comment_id": 93923628, "body": "@drescherm quoting the manual: &quot;when should I vote down? Use your downvotes whenever you encounter an egregiously sloppy, no-effort-expended post&quot;. Nothing to do with the subjective &quot;no useful in helping future readers&quot;."}, {"owner": {"reputation": 570, "user_id": 3246135, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7765949b68c1d295858f4cf9bd9ceb1?s=128&d=identicon&r=PG&f=1", "display_name": "nilo", "link": "https://stackoverflow.com/users/3246135/nilo"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1543436807, "post_id": 53526555, "comment_id": 93923922, "body": "@SergeyA I respect the opinion-based argument. My feeling is that whether or not solution 2 could be considered a pattern is dependent on the proportion of people in the community who are aware of the fact that classes in C++ can be used (abused?) in that manner. Solution 2 looks like a function call, which is exactly what the invoker wants (superior to <code>Helper helper; helper.help()</code>if you ask me). It is only obfuscated if people are not used to it. Isn&#39;t pattern discussion a part of StackOverflow?"}], "answers": [{"tags": [], "owner": {"reputation": 570, "user_id": 3246135, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7765949b68c1d295858f4cf9bd9ceb1?s=128&d=identicon&r=PG&f=1", "display_name": "nilo", "link": "https://stackoverflow.com/users/3246135/nilo"}, "is_accepted": false, "score": 0, "last_activity_date": 1543440240, "last_edit_date": 1543440240, "creation_date": 1543438791, "answer_id": 53528011, "question_id": 53526555, "link": "https://stackoverflow.com/questions/53526555/use-a-class-to-handle-shared-state-in-a-non-trivial-sequence-of-functions/53528011#53528011", "title": "Use a class to handle shared state in a non-trivial sequence of functions", "body": "<p>I realize now that @user463035818 in one of his deleted comments to my original question might have meant something like the following (in my defense, nothing was said in the comment about creating an instance of the class in a static member function):</p>\n\n<p>Everything in the header file, and trivialized code, for brevity:</p>\n\n<pre><code>/*\n * Helper.h\n */\nclass Helper {\npublic:\n    static void help() { Helper h; h.step1(); h.step2(); h.step3(); }\nprivate:\n    Helper() {}\n    void step1(){}\n    void step2(){}\n    void step3(){}\n\n    int a;\n    int b;\n    int c;\n};\n</code></pre>\n\n<p>Use directly, no intermediary function abstracting the class:</p>\n\n<pre><code>/*\n * main.cpp\n */\nint main()\n{\n    Helper::help();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 570, "user_id": 3246135, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7765949b68c1d295858f4cf9bd9ceb1?s=128&d=identicon&r=PG&f=1", "display_name": "nilo", "link": "https://stackoverflow.com/users/3246135/nilo"}, "is_accepted": true, "score": 0, "last_activity_date": 1543511838, "creation_date": 1543511838, "answer_id": 53544365, "question_id": 53526555, "link": "https://stackoverflow.com/questions/53526555/use-a-class-to-handle-shared-state-in-a-non-trivial-sequence-of-functions/53544365#53544365", "title": "Use a class to handle shared state in a non-trivial sequence of functions", "body": "<p>One more obvious solution that comes to my mind now, since I had already decided to hide the class entirely in the function's implementation file, is to take out the sequence logic from the class and put it directly in the function instead. I was first opposed to that, as a matter of principle (encapsulation), but I now think it makes sense, especially comparing this idea to making the function a friend of the class (making the function a friend of the class would give it access to all private members, which is not necessary).</p>\n\n<p>Header file:</p>\n\n<pre><code>/**\n * module.h\n */\nvoid sequence();\n</code></pre>\n\n<p>Implementation file:</p>\n\n<pre><code>/**\n * module.cpp\n */\n\n// Helper class, not visible outside this file\nclass Helper {\npublic:\n  Helper();\n  void step1();\n  void step2();\n  void step3();\n\nprivate:\n  int a;\n  ComplexType b;\n  vector&lt;ComplexType2&gt; c;\n};\n\n// Implementation of Helper...\n\n// Implementation of the public function\nvoid sequence()\n{\n  Helper helper;\n  helper.step1();\n  helper.step2();\n  helper.step3();\n}\n</code></pre>\n"}], "owner": {"reputation": 570, "user_id": 3246135, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7765949b68c1d295858f4cf9bd9ceb1?s=128&d=identicon&r=PG&f=1", "display_name": "nilo", "link": "https://stackoverflow.com/users/3246135/nilo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 1, "accepted_answer_id": 53544365, "answer_count": 2, "score": 0, "last_activity_date": 1543511838, "creation_date": 1543432501, "last_edit_date": 1543433070, "question_id": 53526555, "link": "https://stackoverflow.com/questions/53526555/use-a-class-to-handle-shared-state-in-a-non-trivial-sequence-of-functions", "title": "Use a class to handle shared state in a non-trivial sequence of functions", "body": "<p>I need to perform non-trivial I/O operations with several devices in a predetermined sequence.</p>\n\n<p>State (non-trivial too) needs to be maintained in the sequence, and I would rather not pass it as a parameter to the functions, if I can avoid it: manipulating <code>a</code> is less cumbersome than manipulating <code>state.a</code>. Also, encapsulating state and computation on that state in a class seems like one of the main points of object oriented design.</p>\n\n<p>This would lead to something like the following (solution 1).</p>\n\n<p>Header file:</p>\n\n<pre><code>/**\n * module.h\n */\nvoid io_sequence();\n</code></pre>\n\n<p>Implementation file:</p>\n\n<pre><code>/**\n * module.cpp\n */\n\n// Helper class, not visible outside this file\nclass Helper {\npublic:\n  Helper();\n  void help() { step1(); step2(); step3(); }\nprivate:\n  void step1();\n  void step2();\n  void step3();\n\n  int a;\n  ComplexType b;\n  vector&lt;ComplexType2&gt; c;\n};\n\n// Implementation of Helper...\n\n// Implementation of the public function\nvoid io_sequence()\n{\n  // The following two lines could be replaced by Helper().help();\n  Helper helper;\n  helper.help();\n}\n</code></pre>\n\n<p>This will work, but why not the following instead (solution 2)?</p>\n\n<p>Header file:</p>\n\n<pre><code>/**\n * module.h\n */\nvoid io_sequence();\n</code></pre>\n\n<p>Implementation file:</p>\n\n<pre><code>/**\n * module.cpp\n */\n\n// Helper class, not visible outside this file.\n// Invoked like a function.\nclass help {\npublic:\n  help() { step1(); step2(); step3(); }\nprivate:\n  void step1();\n  void step2();\n  void step3();\n\n  int a;\n  ComplexType b;\n  vector&lt;ComplexType2&gt; c;\n};\n\n// Implementation of help...\n\n// Implementation of the public function\nvoid io_sequence()\n{\n  (void) help();\n}\n</code></pre>\n\n<p>I would just go for solution 2, but I cannot find any reference to that pattern on the Internet. I guess that means that it would be frowned upon.</p>\n\n<p>Is solution 2 bad and in that case, what do you recommend instead, or is it just fine?</p>\n\n<p>Note that I had earlier asked <a href=\"https://stackoverflow.com/questions/47064953/using-a-class-as-a-container-object-for-local-variables-as-an-alternative-to-no\">a similar question for Python</a>, and the accepted solution there seemed to indicate that solution 2 for Python was fine (clean according to @jsbueno). </p>\n"}, {"tags": ["c++", "templates", "language-lawyer", "clang++", "variable-templates"], "comments": [{"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 3, "creation_date": 1543476018, "post_id": 53526523, "comment_id": 93935053, "body": "A declaration of a variable is a definition unless it is declared with the <code>extern</code> keyword. If you mean a declaration, you can express it: <code>template &lt;class T&gt; extern const T&amp; ref;</code>. The extern will not change the linkage."}, {"owner": {"reputation": 773, "user_id": 788330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5f0ee9dc87ac3317b68ee99d348992d?s=128&d=identicon&r=PG", "display_name": "leek", "link": "https://stackoverflow.com/users/788330/leek"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1543531944, "post_id": 53526523, "comment_id": 93964182, "body": "This is a declaration of a variable template, not of a variable."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1543578098, "post_id": 53526523, "comment_id": 93978984, "body": "The comment could have been more pedantic, general and less accessible indeed: <a href=\"http://eel.is/c++draft/basic.def#2.2\" rel=\"nofollow noreferrer\">basic.def</a>"}], "answers": [{"comments": [{"owner": {"reputation": 773, "user_id": 788330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5f0ee9dc87ac3317b68ee99d348992d?s=128&d=identicon&r=PG", "display_name": "leek", "link": "https://stackoverflow.com/users/788330/leek"}, "edited": false, "score": 0, "creation_date": 1543533227, "post_id": 53526610, "comment_id": 93964561, "body": "I don&#39;t believe that rule applies here. First, 14.6 is talking about name resolution inside of template definitions, which we&#39;re not talking about here -- <code>const T&amp;</code> does not reference any names outside of the template definition. Second, the <code>ref&lt;int&gt;</code> generates a valid specialization in the only place the <code>ref</code> template is referenced. The <code>ref&lt;int&gt;</code> specialization is instantiated. There is no reference in the program to the <code>ref</code> template which, when looked up, cannot be instantiated. That&#39;s why GCC does not care if the primary template is defined, because it never needs to be instantiated."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 773, "user_id": 788330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5f0ee9dc87ac3317b68ee99d348992d?s=128&d=identicon&r=PG", "display_name": "leek", "link": "https://stackoverflow.com/users/788330/leek"}, "edited": false, "score": 0, "creation_date": 1543537745, "post_id": 53526610, "comment_id": 93965651, "body": "@leek What if we were defining a function template and <code>const T&amp; ref;</code> appeared in the body? Can you see why a compiler would want to reject that? The case in your question is no different. Since references require initialization, this kind of statement can be viewed as <i>syntactically</i> incorrect."}, {"owner": {"reputation": 773, "user_id": 788330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5f0ee9dc87ac3317b68ee99d348992d?s=128&d=identicon&r=PG", "display_name": "leek", "link": "https://stackoverflow.com/users/788330/leek"}, "edited": false, "score": 0, "creation_date": 1543539605, "post_id": 53526610, "comment_id": 93966032, "body": "As I told @Oliv, this is a variable template declaration, not a variable declaration. To use your analogy, if you declare <code>template&lt;class T&gt; void foo(T);</code> as a function template declaration (not a function declaration), and then you specialize <code>template&lt;&gt; void foo(int x) { }</code>, there is no need to define the primary function template in order to instantiate and call <code>foo&lt;int&gt;();</code>. Templates are not objects/functions/types, so their declaration/definition rules are not the same as objects, functions or types. Until they&#39;re instantiated, implicitly or explicitly, they are just templates."}, {"owner": {"reputation": 773, "user_id": 788330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5f0ee9dc87ac3317b68ee99d348992d?s=128&d=identicon&r=PG", "display_name": "leek", "link": "https://stackoverflow.com/users/788330/leek"}, "edited": false, "score": 0, "creation_date": 1543540379, "post_id": 53526610, "comment_id": 93966207, "body": "<code>template&lt;class T&gt; void foo(T) {  const T&amp;ref; }</code> compiles just fine on GCC, but not on Clang, again for maybe the same reasons as OQ. It&#39;s a function template definition, not a function definition. Until it&#39;s instantiated, the fact that <code>const T&amp; ref</code> appears without an initializer is irrelevant, under one interpretation of the standard (which GCC seems to use). In the case of reference templates it becomes more important than this example because we may want specializations without a default definition, which is legal for class templates, function templates and non-ref variable templates."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 773, "user_id": 788330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5f0ee9dc87ac3317b68ee99d348992d?s=128&d=identicon&r=PG", "display_name": "leek", "link": "https://stackoverflow.com/users/788330/leek"}, "edited": false, "score": 0, "creation_date": 1543544244, "post_id": 53526610, "comment_id": 93966923, "body": "@leek Nevertheless, the standard says that if you write a template with the property that every possible instantiation of it is invalid, then the program is ill-formed. If it&#39;s impossible for you to <i>define</i> the template in a way that satisfies this rule, then you&#39;re free to simply <i>declare</i> it, as in the case of <code>template &lt;class T&gt; void foo(T);</code>, and then define specializations only when you can.  You can also declare your variable template with <code>extern</code>, and define it only when you can."}, {"owner": {"reputation": 773, "user_id": 788330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5f0ee9dc87ac3317b68ee99d348992d?s=128&d=identicon&r=PG", "display_name": "leek", "link": "https://stackoverflow.com/users/788330/leek"}, "edited": false, "score": 0, "creation_date": 1543551800, "post_id": 53526610, "comment_id": 93968309, "body": "&quot;A template with the property that every possible instantiation of it is invalid&quot; does not apply to this case. The specialization <code>ref&lt;int&gt;</code> is a valid instantiation. You seem to be confusing template declarations with template instantiations. The primary declaration of a template is not necessarily instantiated. &quot;You&#39;re free to simply declare it... and then define specializations&quot; is precisely what is being done. There is no rule that this is only allowed when it is &quot;impossible to satisfy &lt;some rule&gt;&quot; in the primary template (whatever that rule is -- you didn&#39;t specify it)."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 773, "user_id": 788330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5f0ee9dc87ac3317b68ee99d348992d?s=128&d=identicon&r=PG", "display_name": "leek", "link": "https://stackoverflow.com/users/788330/leek"}, "edited": false, "score": 3, "creation_date": 1543552035, "post_id": 53526610, "comment_id": 93968354, "body": "@leek No, you&#39;re misinterpreting the standard where it says &quot;no valid specialization can be generated for a template&quot;. What it means is that no specialization <i>produced by instantiating the template</i> is valid. An explicit specialization doesn&#39;t count."}, {"owner": {"reputation": 773, "user_id": 788330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5f0ee9dc87ac3317b68ee99d348992d?s=128&d=identicon&r=PG", "display_name": "leek", "link": "https://stackoverflow.com/users/788330/leek"}, "edited": false, "score": 0, "creation_date": 1543556048, "post_id": 53526610, "comment_id": 93969332, "body": "The quoted standard says that if no valid specialization can be generated <b>but</b> it&#39;s not instantiated, it&#39;s an ill-formed definition, but no diagnostic is required (because it&#39;s not being instantiated and therefore is not used -- it&#39;s no-op code). If it&#39;s instantiated, then a diagnostic is required. The quote says nothing about a primary template <i>declaration</i> being required to be a template <i>definition</i>, or that the primary template declaration must, as a definition, be specialized and implicitly instantiated at least once, or else the program is ill-formed."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 773, "user_id": 788330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5f0ee9dc87ac3317b68ee99d348992d?s=128&d=identicon&r=PG", "display_name": "leek", "link": "https://stackoverflow.com/users/788330/leek"}, "edited": false, "score": 0, "creation_date": 1543593364, "post_id": 53526610, "comment_id": 93987353, "body": "@leek Your declaration <code>template &lt;class T&gt; const T&amp; ref</code> is a definition for syntactic reasons. See [basic.def]/2."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1543707974, "post_id": 53526610, "comment_id": 94016408, "body": "&quot;<i>The reference template you&#39;ve written can never yield a valid specialization</i>&quot;. It can: <code>ref&lt;int&gt;</code> is a valid specialization so I don&#39;t think this sentence applies"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1543708696, "post_id": 53526610, "comment_id": 94016546, "body": "@Rakete1111 As I pointed out previously, explicit specializations don&#39;t count for the purposes of this rule."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 8, "last_activity_date": 1543707927, "last_edit_date": 1543707927, "creation_date": 1543432708, "answer_id": 53526610, "question_id": 53526523, "link": "https://stackoverflow.com/questions/53526523/is-initialization-of-a-reference-variable-primary-template-required-even-when-it/53526610#53526610", "title": "Is initialization of a reference variable primary template required even when it is never instantiated?", "body": "<p>I believe this is covered by [temp.res]/8:</p>\n\n<blockquote>\n  <p>... The program is ill-formed, no diagnostic required, if:</p>\n  \n  <ul>\n  <li>no valid specialization can be generated for a template or a substatement of a constexpr if statement within a template and the template is not instantiated...</li>\n  </ul>\n</blockquote>\n\n<p>The reference template you've written can never yield a valid specialization, as the variable produced by an instantiation will always require an initializer.</p>\n\n<hr>\n\n<p>The quotation I provided is from C++17, but there's a similar statement in C++14.</p>\n"}], "owner": {"reputation": 773, "user_id": 788330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5f0ee9dc87ac3317b68ee99d348992d?s=128&d=identicon&r=PG", "display_name": "leek", "link": "https://stackoverflow.com/users/788330/leek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 4, "answer_count": 1, "score": 12, "last_activity_date": 1543707927, "creation_date": 1543432340, "last_edit_date": 1543541890, "question_id": 53526523, "link": "https://stackoverflow.com/questions/53526523/is-initialization-of-a-reference-variable-primary-template-required-even-when-it", "title": "Is initialization of a reference variable primary template required even when it is never instantiated?", "body": "<p>Is it legal to declare a reference template in C++14 without initializing the primary reference template, as long as it is never instantiated?</p>\n\n<pre><code>template&lt;class T&gt;\nconst T&amp; ref;\n\ntemplate&lt;&gt;\nauto ref&lt;int&gt; = 1;\n\nauto x = ref&lt;int&gt;;\n</code></pre>\n\n<p>This produces different results on GCC and Clang:</p>\n\n<pre><code>$ g++ -std=c++14 -c ref.cpp\n$\n\n$ clang -std=c++14 -c ref.cpp\nref.cpp:2:10: error: declaration of reference variable 'ref' requires an\n      initializer\nconst T&amp; ref;\n         ^~~\n1 error generated.\n</code></pre>\n\n<p>It makes no sense having to initialize the primary reference template, because until it's instantiated, it's a template, not a reference.</p>\n\n<p>I have found that I can do something like:</p>\n\n<pre><code>template&lt;class T&gt;\nconst T&amp; ref = \"Meaningless initialization with any value of any type\";\n\ntemplate&lt;&gt;\nauto ref&lt;int&gt; = 1;\n\nauto x = ref&lt;int&gt;;\n</code></pre>\n\n<p>because apparently GCC and Clang both accept but ignore the reference template initializer RHS as long as it's a valid expression and the primary reference template is never instantiated. And any expression of any type satisfies Clang's initialization requirement.</p>\n\n<p>GCC does not require an initializer as long as the primary reference template is never instantiated. That seems to be the correct behavior \"in spirit\", because until a reference template is actually instantiated, it should not need an initializer.</p>\n\n<p>The Standard isn't 100% clear on reference templates. Here's what little I could find on variable template instantiation:</p>\n\n<blockquote>\n  <p><strong>14.7.1</strong></p>\n  \n  <p>Unless a variable template specialization has been explicitly instantiated or explicitly specialized, the variable template specialization is implicitly instantiated when the specialization is used.</p>\n  \n  <p>...</p>\n  \n  <p>An implementation shall not implicitly instantiate ... a variable template ... that does not require instantiation. </p>\n  \n  <p><strong>14.7.2</strong></p>\n  \n  <p>Except for inline functions, declarations with types deduced from their initializer or return value (7.1.6.4), <code>const</code> variables of literal types, <strong>variables of reference types</strong>, and class template specializations, explicit instantiation declarations have the effect of suppressing the implicit instantiation of the entity to which they refer. [ Note: The intent is that an inline function that is the subject of an explicit instantiation declaration will still be implicitly instantiated when odr-used (3.2) so that the body can be considered for inlining, but that no out-of-line copy of the inline function would be generated in the translation unit.\u2014end note ]</p>\n  \n  <p><strong>14.7.3</strong></p>\n  \n  <p>A declaration of a function template, class template, or <strong>variable template</strong> being explicitly specialized shall precede the declaration of the explicit specialization. [ <strong>Note: A declaration, but not a definition of the template is required. \u2014end note</strong> ].</p>\n</blockquote>\n\n<p><strong>Edit to add:</strong></p>\n\n<p>A variable template declaration, class template declaration, or function template declaration, is not the same as a variable declaration, class declaration, or function declaration, respectively, and is not subject to the same rules. Until a template is instantiated, it is just a template.</p>\n\n<p>Class templates, variable templates, and function templates may be declared without providing a primary definition, only specialization definitions. The following code is legal on both Clang and GCC:</p>\n\n<pre><code>// Class\ntemplate&lt;class T&gt; class foo;        // Declaration, not definition\ntemplate&lt;&gt; class foo&lt;int&gt; {};       // Specialization definition\nusing ifoo = foo&lt;int&gt;;              // Specialization instantiation\n\n// Function\ntemplate&lt;class T&gt; void bar(T);      // Declaration, not definition\ntemplate&lt;&gt; void bar(int) {}         // Specialization definition\nvoid (*barp)(int) = bar&lt;int&gt;;       // Specialization instantiation\n\n// Variable\nint j;\ntemplate&lt;class T&gt; T* point;         // Declaration, not definition\ntemplate&lt;&gt; int* point&lt;int&gt; = &amp;j;    // Specialization definition\nint *k = point&lt;int&gt;;                // Specialization instantiation\n</code></pre>\n\n<p>The question, then, is why should it be any different for a reference template? Why should the primary declaration of a reference template have to be a definition with a reference initialization, when that's not true of any other templates?</p>\n\n<pre><code>template&lt;class T&gt; const T&amp; ref;      // Declaration, not definition\ntemplate&lt;&gt; const int&amp; ref&lt;int&gt; = 1;  // Specialization definition\nconst int&amp; iref = ref&lt;int&gt;;          // Specialization instantiation\n</code></pre>\n"}, {"tags": ["c++", "boost", "udp", "packet-loss"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1543431793, "post_id": 53526361, "comment_id": 93921592, "body": "A UDP packet of 65488 bytes? While technically possible, why would you do this?"}, {"owner": {"reputation": 391, "user_id": 4930939, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-6pAtFyAx1Rk/AAAAAAAAAAI/AAAAAAAACF8/jYZJyp6eKTk/photo.jpg?sz=128", "display_name": "Syed Alam Abbas", "link": "https://stackoverflow.com/users/4930939/syed-alam-abbas"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1543431883, "post_id": 53526361, "comment_id": 93921634, "body": "It is coming from another app, that I don&#39;t have control, I am just reading from a fixed port. But I would like to get educated as to why 65k bytes is bad idea ?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1543432166, "post_id": 53526361, "comment_id": 93921790, "body": "Because UDP has no guaranteed delivery. Any packet which exceeds MTU size (likely 1500 bytes) is going to be broken up into several low-level datagrams to be assembled on the receiving side. If the receiving side misses at least one of those packets, the whole sequence is dropped. In your case, you end up with 44 packets."}, {"owner": {"reputation": 391, "user_id": 4930939, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-6pAtFyAx1Rk/AAAAAAAAAAI/AAAAAAAACF8/jYZJyp6eKTk/photo.jpg?sz=128", "display_name": "Syed Alam Abbas", "link": "https://stackoverflow.com/users/4930939/syed-alam-abbas"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1543432391, "post_id": 53526361, "comment_id": 93921893, "body": "Point taken, but I dont have any control of what is being sent, it is external data source app, but in any case there are two things that should be looked at, there is really no true network communication happening, since the external app is hosted and sending on local machine. Second is that  UE4 udp reciever get all the bytes exactly so why shouldn&#39;t ASIO UDP !"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1543432758, "post_id": 53526361, "comment_id": 93922060, "body": "I didn&#39;t get the fact that it is on the local machine. Than the most likely reason is performance. Your ASIO server is to slow processing data, so packets are dropped."}, {"owner": {"reputation": 391, "user_id": 4930939, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-6pAtFyAx1Rk/AAAAAAAAAAI/AAAAAAAACF8/jYZJyp6eKTk/photo.jpg?sz=128", "display_name": "Syed Alam Abbas", "link": "https://stackoverflow.com/users/4930939/syed-alam-abbas"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1543433250, "post_id": 53526361, "comment_id": 93922276, "body": "Are you saying that is an inherent flaw in ASIO or that I am slow in the processing of the bytes received since I am merely printing on cout, how slow can that be  ?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1543433720, "post_id": 53526361, "comment_id": 93922513, "body": "I have no idea where the slowness comes from. This is just one of the reasons why you might miss packets."}, {"owner": {"reputation": 391, "user_id": 4930939, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-6pAtFyAx1Rk/AAAAAAAAAAI/AAAAAAAACF8/jYZJyp6eKTk/photo.jpg?sz=128", "display_name": "Syed Alam Abbas", "link": "https://stackoverflow.com/users/4930939/syed-alam-abbas"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1543513705, "post_id": 53526361, "comment_id": 93956206, "body": "Could concurrency be an issue here, but I cant believe a single threaded I/O which is not doing much work would let some packets be skipped ?"}], "answers": [{"tags": [], "owner": {"reputation": 391, "user_id": 4930939, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-6pAtFyAx1Rk/AAAAAAAAAAI/AAAAAAAACF8/jYZJyp6eKTk/photo.jpg?sz=128", "display_name": "Syed Alam Abbas", "link": "https://stackoverflow.com/users/4930939/syed-alam-abbas"}, "is_accepted": true, "score": 0, "last_activity_date": 1543545984, "creation_date": 1543545984, "answer_id": 53550516, "question_id": 53526361, "link": "https://stackoverflow.com/questions/53526361/boost-asio-dropped-udp-packets-significant-loss-compared-to-ue4-udp-reciever/53550516#53550516", "title": "Boost ASIO - dropped UDP packets, significant loss compared to UE4 udp reciever", "body": "<p>I was able to fix the UDP packets loss issue today. It is not a concurrency issue that can be solved by using a separate thread. It is the issue of data speed intra-epoch not inter-epoch. What I mean by that is, it is a data stream that dumps UDP packets on the port epoch(significant event) to epoch with some acquisition delay in between. That is the window of opportunity to process anything, not within the epoch, but just after the epoch which is the 400 trailing bytes.  I am using a single threaded program but I have Boost ASIO i/o object for asynchronous operations. All I do now is a fast memory copy of every byte array received until I hit a modulo - N(epoch bytes total), then I process each packet from the accumulated array, then I am able to collect all the data without any packet loss! Thanks for all the help @SergeyA<br>\n              If you want to read more about why it is not advisable to use threads besides making application complicated here is the <a href=\"https://www.boost.org/doc/libs/1_68_0/doc/html/boost_asio/overview/core/async.html\" rel=\"nofollow noreferrer\">link</a> : The Proactor Design Pattern: Concurrency Without Threads.</p>\n"}], "owner": {"reputation": 391, "user_id": 4930939, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-6pAtFyAx1Rk/AAAAAAAAAAI/AAAAAAAACF8/jYZJyp6eKTk/photo.jpg?sz=128", "display_name": "Syed Alam Abbas", "link": "https://stackoverflow.com/users/4930939/syed-alam-abbas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 53550516, "answer_count": 1, "score": 0, "last_activity_date": 1543545984, "creation_date": 1543431664, "last_edit_date": 1543435265, "question_id": 53526361, "link": "https://stackoverflow.com/questions/53526361/boost-asio-dropped-udp-packets-significant-loss-compared-to-ue4-udp-reciever", "title": "Boost ASIO - dropped UDP packets, significant loss compared to UE4 udp reciever", "body": "<p>I am trying to use a simple async UDP listener using <a href=\"https://www.boost.org/doc/libs/1_68_0/doc/html/boost_asio/example/cpp11/echo/async_udp_echo_server.cpp\" rel=\"nofollow noreferrer\">this</a>. I also use UE4 UDP Socket (FUdpSocketBuilder) in a game engine project. I don't run these two UDP listeners simultaneously.  I get a series of byte array from a fixed udp port from another application in following order start 36, middle 65488 x 6 and end 400 bytes.  But the problem is I miss 4 x 65488 bytes and sometimes I get the trailing 400 bytes in the boost asio example C++ app. I have tried increasing the received byte array size to a high number including 7-8 times what is declared below:</p>\n\n<pre><code> constexpr int udp_buffer_size = 65536;  // Max limit of each packet size\n boost::array&lt;char, udp_buffer_size&gt; recv_buffer_;\n</code></pre>\n\n<p>What can I do, please advice ? I have also asked this question on <a href=\"https://github.com/boostorg/asio/issues/172\" rel=\"nofollow noreferrer\">Github</a>.</p>\n\n<p>Print from Boost ASIO UDP:</p>\n\n<pre><code>I just recieved 36 bytes of data !\nI just recieved 65488 bytes of data !\nI just recieved 65488 bytes of data !\nI just recieved 36 bytes of data !\nI just recieved 65488 bytes of data !\nI just recieved 65488 bytes of data !\n</code></pre>\n\n<p>Print from UE4: </p>\n\n<pre><code>[2018.11.28 - 17.18.29:724][829]SomeProjectLog:  Warning : 2297. Recieved Bytes from UDP 36.\n[2018.11.28 - 17.18.29:724][829]SomeProjectLog : Warning : 2298. Recieved Bytes from UDP 65488.\n[2018.11.28 - 17.18.29:724][829]SomeProjectLog : Warning : 2299. Recieved Bytes from UDP 65488.\n[2018.11.28 - 17.18.29:725][829]SomeProjectLog : Warning : 2300. Recieved Bytes from UDP 65488.\n[2018.11.28 - 17.18.29:725][829]SomeProjectLog : Warning : 2301. Recieved Bytes from UDP 65488.\n[2018.11.28 - 17.18.29:725][829]SomeProjectLog : Warning : 2302. Recieved Bytes from UDP 65488.\n[2018.11.28 - 17.18.29:725][829]SomeProjectLog : Warning : 2303. Recieved Bytes from UDP 65488.\n[2018.11.28 - 17.18.29:726][829]SomeProjectLog : Warning : 2304. Recieved Bytes from UDP 400.\n[2018.11.28 - 17.18.29:726][829]SomeProjectLog : Warning : 2305. Recieved Bytes from UDP 36.\n[2018.11.28 - 17.18.29:726][829]SomeProjectLog : Warning : 2306. Recieved Bytes from UDP 65488.\n[2018.11.28 - 17.18.29:726][829]SomeProjectLog : Warning : 2307. Recieved Bytes from UDP 65488.\n[2018.11.28 - 17.18.29:726][829]SomeProjectLog : Warning : 2308. Recieved Bytes from UDP 65488.\n[2018.11.28 - 17.18.29:727][829]SomeProjectLog : Warning : 2309. Recieved Bytes from UDP 65488.\n[2018.11.28 - 17.18.29:727][829]SomeProjectLog : Warning : 2310. Recieved Bytes from UDP 65488.\n[2018.11.28 - 17.18.29:727][829]SomeProjectLog : Warning : 2311. Recieved Bytes from UDP 65488.\n[2018.11.28 - 17.18.29:727][829]SomeProjectLog : Warning : 2312. Recieved Bytes from UDP 400.\n</code></pre>\n"}, {"tags": ["c++", "multidimensional-array"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1543431491, "post_id": 53526184, "comment_id": 93921427, "body": "related/dupe: <a href=\"https://stackoverflow.com/questions/41189577/multidimensional-array-indexing-using-pointer-to-elements\" title=\"multidimensional array indexing using pointer to elements\">stackoverflow.com/questions/41189577/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1543432565, "post_id": 53526224, "comment_id": 93921961, "body": "I feel it&#39;s fair to use the term multidimensional array. <code>int[][]</code> is an array with a <a href=\"https://en.cppreference.com/w/cpp/types/rank\" rel=\"nofollow noreferrer\">rank</a> of two. It&#39;s a proper array type, and multidimensional communicates clearly that it has more than one extent. It&#39;s a term that&#39;s also used in <a href=\"https://en.cppreference.com/w/cpp/language/array#Multidimensional_arrays\" rel=\"nofollow noreferrer\">cppreference</a> and used by <a href=\"https://timsong-cpp.github.io/cppwp/dcl.array#:declarator,multidimensional_array\" rel=\"nofollow noreferrer\">the standard</a> (at least in the revision I checked and linked here)."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1543433142, "post_id": 53526224, "comment_id": 93922231, "body": "@Fran&#231;oisAndrieux I have my reasons why I prefer to think of <code>[][]</code> constructs in C++ as arrays of arrays rather than multidimensional arrays (this question is one of them!). Even in your linked quote &quot;multidimensional&quot; seems to be more or less informal, with the formal type below: <code>... type of the identifier of D is \u201carray of N T...</code>. Multidimenstional arrays just don&#39;t exist formally in C++ type system, and I think realizing it eases understanding."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1543433466, "post_id": 53526224, "comment_id": 93922384, "body": "You make it sound like an opinion, but the language specification defines the term. <code>int[2][2]</code> is &quot;an array of 2 array of 2 <code>int</code>&quot;, and it&#39;s written that <i>&quot;When several \u201carray of\u201d specifications are adjacent, a multidimensional array type is created;&quot;</i>. I don&#39;t understand what room there is left for interpretation."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1543433670, "post_id": 53526224, "comment_id": 93922485, "body": "@Fran&#231;oisAndrieux Because there is no such type. You can call it a multidimensional array, but there is no such type in C++. And standard itself is formally defining the type as an array of N T, as I quoted. And like I already said, this question itself is for me a good reason to call them array of arrays."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1543434799, "post_id": 53526224, "comment_id": 93923021, "body": "@SergeyA If you mean that &quot;multidimensional array&quot; is not a type, I agree that it isn&#39;t <i>a</i> type. But it can certainly be used to describes or characterize a type in the sense that you can ask whether or not a type is a multidimensional array. The answer to that question is laid out in the standard. As such it&#39;s definitively a valid term to use when discussing c++ and contrary to your answer there <i>are</i> multidimensional arrays because there exists types for which the answer to the question &quot;Is this type a multidimensional array?&quot; is <i>defined by the language</i> to be yes."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 8, "last_activity_date": 1543434885, "last_edit_date": 1543434885, "creation_date": 1543431182, "answer_id": 53526224, "question_id": 53526184, "link": "https://stackoverflow.com/questions/53526184/is-accessing-the-middle-of-a-multidimensional-array-via-a-pointer-to-its-first-e/53526224#53526224", "title": "Is accessing the middle of a multidimensional array via a pointer to its first element UB?", "body": "<p>Yes, you are correct, and there is not much to add to it. There are no mutidimensional arrays in C++ type system, there are only arrays (of arrays of arrays of arrays ad libitum).</p>\n\n<p>Accessing an element beyond array size is undefined behavior.</p>\n"}], "owner": {"reputation": 105, "user_id": 3647824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4bb21ee612dbdb236031be2d96758c5?s=128&d=identicon&r=PG&f=1", "display_name": "P.JBoy", "link": "https://stackoverflow.com/users/3647824/p-jboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 53526224, "answer_count": 1, "score": 9, "last_activity_date": 1543434885, "creation_date": 1543431019, "last_edit_date": 1543431438, "question_id": 53526184, "link": "https://stackoverflow.com/questions/53526184/is-accessing-the-middle-of-a-multidimensional-array-via-a-pointer-to-its-first-e", "title": "Is accessing the middle of a multidimensional array via a pointer to its first element UB?", "body": "<p>Consider the following code:</p>\n\n<pre><code>int data[2][2];\nint* p(&amp;data[0][0]);\np[3] = 0;\n</code></pre>\n\n<p>Or equivalently:</p>\n\n<pre><code>int data[2][2];\nint (&amp;row0)[2] = data[0];\nint* p = &amp;row0[0];\np[3] = 0;\n</code></pre>\n\n<p>It's not clear to me whether this is undefined behaviour or not.\n<code>p</code> is a pointer to the first element of an array <code>row0</code> with 2 elements, therefore <code>p[3]</code> accesses past the end of the array, which is UB according to 7.6.6 [expr.add]:</p>\n\n<blockquote>\n  <ul>\n  <li>When an expression J that has integral type is added to or subtracted from an expression P of pointer type, the result has the type of P.\n  \n  <ul>\n  <li>If P evaluates to a null pointer value and J evaluates to 0, the result is a null pointer value.</li>\n  <li>Otherwise, <strong>if P points to element <code>x[i]</code> of an array object <code>x</code> with <code>n</code> elements, the expressions P + J and J + P (where J has the value <code>j</code>) point to the (possibly-hypothetical) element <code>x[i+j]</code> if 0 \u2264 <code>i + j</code> \u2264 <code>n</code></strong> and the expression P - J points to the (possibly-hypothetical) element <code>x[i\u2212j]</code> if 0 \u2264 <code>i \u2212 j</code> \u2264 <code>n</code>.</li>\n  <li>Otherwise, the behavior is undefined.</li>\n  </ul></li>\n  </ul>\n</blockquote>\n\n<p>I don't see anything in the standard that gives special treatment to multidimensional arrays, so I can only conclude that the above is, in fact, UB.</p>\n\n<p>Am I correct?</p>\n\n<p>What about the case of <code>data</code> being declared as <code>std::array&lt;std::array&lt;int, 2&gt;, 2&gt;</code>? This case seems even more likely to be UB, as structs may have padding.</p>\n"}, {"tags": ["c++", "c++11", "vector", "tuples"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1543429308, "post_id": 53525734, "comment_id": 93920381, "body": "That is not the full error message."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1543429949, "post_id": 53525734, "comment_id": 93920676, "body": "<a href=\"http://coliru.stacked-crooked.com/a/b443d5e5ee2f7889\" rel=\"nofollow noreferrer\">WFM</a> though I did have to remove <code>Attribute</code> (because I have no idea what it is) so maybe that&#39;s why. As ever, please present your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. This is not optional."}, {"owner": {"reputation": 21048, "user_id": 603516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40895ef337d0a2eb7d538f5f8b3e6d58?s=128&d=identicon&r=PG", "display_name": "Vadzim", "link": "https://stackoverflow.com/users/603516/vadzim"}, "edited": false, "score": 0, "creation_date": 1549644668, "post_id": 53525734, "comment_id": 95989995, "body": "See also <a href=\"https://stackoverflow.com/questions/32084706/why-initialization-doesnt-work-for-tuple\">Why ={} initialization doesn&#39;t work for tuple?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 21048, "user_id": 603516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40895ef337d0a2eb7d538f5f8b3e6d58?s=128&d=identicon&r=PG", "display_name": "Vadzim", "link": "https://stackoverflow.com/users/603516/vadzim"}, "edited": false, "score": 0, "creation_date": 1549644866, "post_id": 53526185, "comment_id": 95990099, "body": "N4387 is implemented in GCC 6.1: <a href=\"https://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/libstdc++/manual/status.html</a>"}], "tags": [], "owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "is_accepted": true, "score": 4, "last_activity_date": 1543431026, "creation_date": 1543431026, "answer_id": 53526185, "question_id": 53525734, "link": "https://stackoverflow.com/questions/53525734/c-add-data-to-a-stdvector-containing-a-stdtuple/53526185#53526185", "title": "c++ add data to a std::vector containing a std::tuple", "body": "<pre><code>args_.push_back({name, typeid(T), value});\n</code></pre>\n\n<p>Before <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4387\" rel=\"nofollow noreferrer\">N4387</a>, <code>std::tuple</code>'s constructor used for the above initialization was unconditionally <code>explicit</code>, and if selected by overload resolution in a copy-list-initialization, the compiler was allowed to raise an error.</p>\n\n<hr>\n\n<pre><code>args_.push_back(std::make_tuple(name, typeid(T), value));\n</code></pre>\n\n<p>The above call will try to use a copy-constructor for an <code>std::type_info</code> instance which is non-copyable.</p>\n\n<hr>\n\n<p>In order to construct a tuple in a pre-N4387 implementation, use <code>emplace_back</code>:</p>\n\n<pre><code>args_.emplace_back(name, typeid(T), value);\n</code></pre>\n\n<p>or push back a tuple of copy-constructible types:</p>\n\n<pre><code>args_.push_back(std::make_tuple(name, std::type_index{typeid(T)}, value));\n//                                         ~~~~~~~~~^\n</code></pre>\n"}], "owner": {"reputation": 319, "user_id": 10285454, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ujOOl9OdcSc/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaORtu402bSp43Awfk8ftcU4n5K4fw/mo/photo.jpg?sz=128", "display_name": "cherry aldi", "link": "https://stackoverflow.com/users/10285454/cherry-aldi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "accepted_answer_id": 53526185, "answer_count": 1, "score": 1, "last_activity_date": 1543431435, "creation_date": 1543429163, "last_edit_date": 1543431435, "question_id": 53525734, "link": "https://stackoverflow.com/questions/53525734/c-add-data-to-a-stdvector-containing-a-stdtuple", "title": "c++ add data to a std::vector containing a std::tuple", "body": "<p>Below is code that adds elements to a vector containing a <code>std::pair</code></p>\n\n<pre><code>std::vector&lt;std::pair&lt;std::string, std::type_index&gt;&gt; args_;\n\ntemplate &lt;class T&gt;\n            inline OperationEntry&amp; setArg(const std::string&amp; name)\n            {\n                args_.push_back({name, typeid(T)});\n                return *this;\n\n            }\n</code></pre>\n\n<p>How do I add elements to a vector containing a <code>std::tuple</code>?</p>\n\n<pre><code>std::vector&lt;std::tuple&lt;std::string, std::type_index, Attribute&gt;&gt; args_;\n\ntemplate &lt;class T&gt;\n            inline OperationEntry&amp; setArg(const std::string&amp; name, Attribute value = Attribute())\n            {\n                args_.push_back({name, typeid(T), value});\n                return *this;\n\n            }\n</code></pre>\n\n<p>I tried <code>args_.push_back(std::make_tuple(name, typeid(T), value));</code></p>\n\n<p>I am getting this error:</p>\n\n<pre><code>[GCC] converting to\n\u2018std::vector&lt;std::tuple&lt;std::__cxx11::basic_string&lt;char,\nstd::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;, std::type_index,\nmv::Attribute&gt; &gt;::value_type {aka\nstd::tuple&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;,\nstd::allocator&lt;char&gt; &gt;, std::type_index, mv::Attribute&gt;}\u2019 from\ninitializer list would use explicit constructor \u2018constexpr std::tuple&lt;\n&lt;template-parameter-1-1&gt; &gt;::tuple(_UElements&amp;&amp; ...) [with _UElements =\n{const std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;,\nstd::allocator&lt;char&gt; &gt;&amp;, const std::type_info&amp;, mv::Attribute&amp;};\n&lt;template-parameter-2-2&gt; = void; _Elements =\n{std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;,\nstd::allocator&lt;char&gt; &gt;, std::type_index, mv::Attribute}]\u2019\n</code></pre>\n"}, {"tags": ["c++", "clang", "llvm", "llvm-ir", "llvm-c++-api"], "answers": [{"tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": true, "score": 4, "last_activity_date": 1543428168, "creation_date": 1543428168, "answer_id": 53525503, "question_id": 53525502, "link": "https://stackoverflow.com/questions/53525502/compiling-c-on-the-fly-clang-libtooling-fails-to-set-triple-for-llvm-ir/53525503#53525503", "title": "Compiling C++ on the fly: clang/libtooling fails to set Triple for LLVM IR", "body": "<p>Unfortunately, it's difficult to use these interfaces to create a proper LLVM module. The only way is even to create a file and compile the file, setting all the include paths:</p>\n\n<p>First there are lots of includes to add:</p>\n\n<pre><code>#include &lt;clang/AST/ASTContext.h&gt;\n#include &lt;clang/AST/ASTConsumer.h&gt;\n#include &lt;clang/Basic/DiagnosticOptions.h&gt;\n#include &lt;clang/Basic/Diagnostic.h&gt;\n#include &lt;clang/Basic/FileManager.h&gt;\n#include &lt;clang/Basic/FileSystemOptions.h&gt;\n#include &lt;clang/Basic/LangOptions.h&gt;\n#include &lt;clang/Basic/MemoryBufferCache.h&gt;\n#include &lt;clang/Basic/SourceManager.h&gt;\n#include &lt;clang/Basic/TargetInfo.h&gt;\n#include &lt;clang/CodeGen/CodeGenAction.h&gt;\n#include &lt;clang/Frontend/CompilerInstance.h&gt;\n#include &lt;clang/Frontend/CompilerInvocation.h&gt;\n#include &lt;clang/Frontend/TextDiagnosticPrinter.h&gt;\n#include &lt;clang/Lex/HeaderSearch.h&gt;\n#include &lt;clang/Lex/HeaderSearchOptions.h&gt;\n#include &lt;clang/Lex/Preprocessor.h&gt;\n#include &lt;clang/Lex/PreprocessorOptions.h&gt;\n#include &lt;clang/Parse/ParseAST.h&gt;\n#include &lt;clang/Sema/Sema.h&gt;\n</code></pre>\n\n<p>Then we need to set up all the engines around the compiler instance:</p>\n\n<pre><code>clang::DiagnosticOptions diagnosticOptions;\nstd::unique_ptr&lt;clang::TextDiagnosticPrinter&gt; textDiagnosticPrinter =\n  std::make_unique&lt;clang::TextDiagnosticPrinter&gt;(llvm::outs(),\n                                                 &amp;diagnosticOptions);\nllvm::IntrusiveRefCntPtr&lt;clang::DiagnosticIDs&gt; diagIDs;\n\nstd::unique_ptr&lt;clang::DiagnosticsEngine&gt; diagnosticsEngine =\n  std::make_unique&lt;clang::DiagnosticsEngine&gt;(diagIDs, &amp;diagnosticOptions, textDiagnosticPrinter.get());\n\nclang::CompilerInstance compilerInstance;\nauto&amp; compilerInvocation = compilerInstance.getInvocation();\n</code></pre>\n\n<p>This is where we can set the triple and also the type of langage we want:</p>\n\n<pre><code>std::stringstream ss;\nss &lt;&lt; \"-triple=\" &lt;&lt; llvm::sys::getDefaultTargetTriple();\nss &lt;&lt; \" -x c++\"; // to activate C++\nss &lt;&lt; \" -fcxx-exceptions\";\nss &lt;&lt; \" -std=c++17\";\n\nstd::istream_iterator&lt;std::string&gt; begin(ss);\nstd::istream_iterator&lt;std::string&gt; end;\nstd::istream_iterator&lt;std::string&gt; i = begin;\nstd::vector&lt;const char*&gt; itemcstrs;\nstd::vector&lt;std::string&gt; itemstrs;\nwhile (i != end) {\n  itemstrs.push_back(*i);\n  ++i;\n}\n\nfor (unsigned idx = 0; idx &lt; itemstrs.size(); idx++) {\n  // note: if itemstrs is modified after this, itemcstrs will be full\n  // of invalid pointers! Could make copies, but would have to clean up then...\n  itemcstrs.push_back(itemstrs[idx].c_str());\n}\n\nclang::CompilerInvocation::CreateFromArgs(compilerInvocation, itemcstrs.data(), itemcstrs.data() + itemcstrs.size(),\n *diagnosticsEngine.release());\n</code></pre>\n\n<p>We can check then options that were set (changing options just here is not enough) and add verbosity:</p>\n\n<pre><code>auto* languageOptions = compilerInvocation.getLangOpts();\nauto&amp; preprocessorOptions = compilerInvocation.getPreprocessorOpts();\nauto&amp; targetOptions = compilerInvocation.getTargetOpts();\nauto&amp; frontEndOptions = compilerInvocation.getFrontendOpts();\n#ifdef DEBUG\nfrontEndOptions.ShowStats = true;\n#endif\nauto&amp; headerSearchOptions = compilerInvocation.getHeaderSearchOpts();\n</code></pre>\n\n<p>Let's add all include header path:</p>\n\n<pre><code>constexpr std::string_view paths[] = {\"/usr/include/c++/8\",\n  \"/usr/include/x86_64-linux-gnu/c++/8\",\n  \"/usr/include/c++/8/backward\",\n  \"/usr/include/clang/6.0.0/include\",\n  \"/usr/local/include\",\n  \"/usr/include/x86_64-linux-gnu\",\n  \"/usr/include\"};\n\nfor(auto path: paths)\n{\n    headerSearchOptions.AddPath(std::string(path), clang::frontend::IncludeDirGroup::Angled, false, false);\n}\n\n#ifdef DEBUG\nheaderSearchOptions.Verbose = true;\n#endif\nauto&amp; codeGenOptions = compilerInvocation.getCodeGenOpts();\n</code></pre>\n\n<p>There should be here a way of setting a file-like string (not using <code>FrontendInputFile</code>), but unfortunately in LLVM 7, there is a check ensuring it's a real file...</p>\n\n<pre><code>frontEndOptions.Inputs.clear();\nfrontEndOptions.Inputs.push_back(clang::FrontendInputFile(filename, clang::InputKind::CXX));\n\ntargetOptions.Triple = llvm::sys::getDefaultTargetTriple();\ncompilerInstance.createDiagnostics(textDiagnosticPrinter.get(), false);\n\nLLVM::Context context;\n</code></pre>\n\n<p>Create now the code generator action and make the compiler instance execute the action:</p>\n\n<pre><code>std::unique_ptr&lt;clang::CodeGenAction&gt; action = std::make_unique&lt;clang::EmitLLVMOnlyAction&gt;(&amp;context);\n\nif (!compilerInstance.ExecuteAction(*action))\n{\n    // Failed to compile, and should display on cout the result of the compilation\n}\n</code></pre>\n"}], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 560, "favorite_count": 0, "accepted_answer_id": 53525503, "answer_count": 1, "score": 4, "last_activity_date": 1586810512, "creation_date": 1543428168, "question_id": 53525502, "link": "https://stackoverflow.com/questions/53525502/compiling-c-on-the-fly-clang-libtooling-fails-to-set-triple-for-llvm-ir", "title": "Compiling C++ on the fly: clang/libtooling fails to set Triple for LLVM IR", "body": "<p>Let's say I want to compile a C++ string on the fly:</p>\n\n<pre><code>llvm::LLVMContext context;\n\nstd::unique_ptr&lt;clang::CodeGenAction&gt; action = std::make_unique&lt;clang::EmitLLVMOnlyAction&gt;(&amp;context);\nclang::tooling::runToolOnCode/*WithArgs*/(action.get(), \"int foo(int x){ return ++x;}\");\n\nstd::unique_ptr&lt;llvm::Module&gt; module = action-&gt;takeModule();\n</code></pre>\n\n<p>Unfortunately, it seems that when LLVM tries to transform the IR, there is an exception saying that the <code>Triple</code> is not set (<a href=\"https://clang.llvm.org/docs/CrossCompilation.html#target-triple\" rel=\"nofollow noreferrer\">https://clang.llvm.org/docs/CrossCompilation.html#target-triple</a>).</p>\n\n<p>Is it possible to use <code>libtooling</code> or <code>libclang</code> for this purpose?</p>\n"}, {"tags": ["c++", "operator-overloading"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1543427761, "post_id": 53525386, "comment_id": 93919666, "body": "You forgot to make a constructor."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1543427790, "post_id": 53525386, "comment_id": 93919674, "body": "So why don&#39;t you just provide a suitable constructor like the compiler demands?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1543429280, "post_id": 53525386, "comment_id": 93920369, "body": "The question has two <b>different</b> definitions of the <code>calc</code> template. Which one are you asking about? Remove the other one."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1543430174, "post_id": 53525386, "comment_id": 93920776, "body": "Okay so what did you want <code>calc&lt;int&gt; a(1)</code> to do?"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1543430067, "post_id": 53525675, "comment_id": 93920725, "body": "Nitpick: constructors don&#39;t have names :P"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1543430102, "post_id": 53525675, "comment_id": 93920736, "body": "<i>&quot;However if you were to call the default constructor in the second example of code, the x and y values would be assigned the default value of T for that compiler.&quot;</i> More likely they&#39;d have an unspecified value, particularly since you chose T=int"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1543430130, "post_id": 53525675, "comment_id": 93920751, "body": "Don&#39;t know what you mean about &quot;multiplying 2 templates together&quot; - unless you&#39;re referring to the fact that this operation will fail for T=string, but that&#39;s generally considered a feature not a bug"}, {"owner": {"reputation": 377, "user_id": 10652509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25da2f7f40c260a3eca61c165d1d75ea?s=128&d=identicon&r=PG&f=1", "display_name": "cwbusacker", "link": "https://stackoverflow.com/users/10652509/cwbusacker"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1543430191, "post_id": 53525675, "comment_id": 93920787, "body": "Yes, according to <a href=\"https://www.geeksforgeeks.org/constructors-c\" rel=\"nofollow noreferrer\">geeksforgeeks.org/constructors-c</a> they do."}, {"owner": {"reputation": 377, "user_id": 10652509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25da2f7f40c260a3eca61c165d1d75ea?s=128&d=identicon&r=PG&f=1", "display_name": "cwbusacker", "link": "https://stackoverflow.com/users/10652509/cwbusacker"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1543430458, "post_id": 53525675, "comment_id": 93920916, "body": "@LightnessRacesinOrbit, You are right. A template can be multiplied together, but if you were to multiply when the template was a string, you&#39;d get compiler errors."}, {"owner": {"reputation": 377, "user_id": 10652509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25da2f7f40c260a3eca61c165d1d75ea?s=128&d=identicon&r=PG&f=1", "display_name": "cwbusacker", "link": "https://stackoverflow.com/users/10652509/cwbusacker"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1543506803, "post_id": 53525675, "comment_id": 93952541, "body": "I can accept what that is saying.  However, using the term &quot;declarator&quot; might be confusing to someone who is new to programming. Hence, the term &quot;name.&quot;"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1543506916, "post_id": 53525675, "comment_id": 93952606, "body": "It would be better if someone new to programming learned the correct things, not the wrong things."}], "tags": [], "owner": {"reputation": 377, "user_id": 10652509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25da2f7f40c260a3eca61c165d1d75ea?s=128&d=identicon&r=PG&f=1", "display_name": "cwbusacker", "link": "https://stackoverflow.com/users/10652509/cwbusacker"}, "is_accepted": false, "score": 1, "last_activity_date": 1543431842, "last_edit_date": 1543431842, "creation_date": 1543428909, "answer_id": 53525675, "question_id": 53525386, "link": "https://stackoverflow.com/questions/53525386/no-suitable-constructor-exists-to-convert-from-int-to-calcint/53525675#53525675", "title": "No suitable constructor exists to convert from &quot;int&quot; to &quot;calc&lt;int&gt;", "body": "<p>When using classes there must be something called a constructor that will initialize the class. That way the variables of that class are set and can be used in the member functions. A constructor doesn't have a return type (not even void) and is always named after the name of the class. So in your case the code would look something like this:</p>\n\n<pre><code>calc&lt;T&gt; (int value)\n{\n    x=value;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>calc&lt;T&gt; (int value)\n{\n    y=value;\n}\n</code></pre>\n\n<p>In your first example of code, the program calls the default constructor which is made for you automatically by the compiler. It would look something like this:</p>\n\n<pre><code>calc&lt;T&gt; ()\n{\n    //since there is nothing to assign. Do nothing.\n}\n</code></pre>\n\n<p>However if you were to call the default constructor in the second example of code, the x and y values would be assigned the default value of T for that\ncompiler.</p>\n\n<p>Now that you have a constructor the item in that object is saved. So that, a.x \nor a.y will equal the value that was sent into the constructor. (In your case 1).</p>\n"}], "owner": {"reputation": 67, "user_id": 10607704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45b773acafd667f43d62866b80d3b634?s=128&d=identicon&r=PG&f=1", "display_name": "CrDS", "link": "https://stackoverflow.com/users/10607704/crds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2700, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1543431842, "creation_date": 1543427689, "question_id": 53525386, "link": "https://stackoverflow.com/questions/53525386/no-suitable-constructor-exists-to-convert-from-int-to-calcint", "title": "No suitable constructor exists to convert from &quot;int&quot; to &quot;calc&lt;int&gt;", "body": "<p>I have this following code that I would like to apply operator overloading to:</p>\n\n<pre><code>template &lt; class T&gt;\nclass calc\n{\npublic:\n\n    T multiply(T x, T y);\n    T add (T x, T y);\n};\n\ntemplate &lt; class T&gt;\nT calc&lt;T&gt;::multiply(T k1, T k2)\n{\n    return k1 * k2;\n}\n\ntemplate &lt; class T&gt;\nT calc&lt;T&gt;::add(T k1, T k2)\n{\n    return k1 + k2;\n}\n\nint main()\n{\n    calc&lt;int&gt; c;\n    std::cout &lt;&lt; c.multiply(1, 5);\n}\n</code></pre>\n\n<p>I have attempted to implement operator overloading, but I have an error: E0415  no suitable constructor exists to convert from \"int\" to \"calc\". Line: calc a(1);</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\ntemplate &lt; class T&gt;\nclass calc\n{\npublic:\n    T x;\n    T y;\n};\n\ntemplate &lt; class T&gt;\ncalc&lt;T&gt; operator*(calc&lt;T&gt; const&amp;  k1, calc&lt;T&gt; const&amp;  k2)\n{\n    calc&lt;T&gt; ret;\n    ret.x = k1.x * k2.x;\n    return ret;\n}\n\nint main()\n{\n    calc&lt;int&gt; a(1);\n    calc&lt;int&gt; b(5);\n    calc&lt;int&gt; result;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "r", "namespaces", "export"], "comments": [{"owner": {"reputation": 71207, "user_id": 1457051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9551722842426adcb7d8b3227e1463e?s=128&d=identicon&r=PG", "display_name": "hrbrmstr", "link": "https://stackoverflow.com/users/1457051/hrbrmstr"}, "edited": false, "score": 0, "creation_date": 1543427890, "post_id": 53525348, "comment_id": 93919726, "body": "Have you included a <code>&#47;&#47; [[Rcpp::export]]</code> line as well in each Rcpp roxygen block?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1543427956, "post_id": 53525348, "comment_id": 93919763, "body": "&quot;cpp scripts&quot; - C++ is <i>not</i> a scripting language. C++ source files are <i>not</i> scripts."}, {"owner": {"reputation": 143, "user_id": 3245178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a5c46dbd5df74bad641b8836ac60ca4?s=128&d=identicon&r=PG&f=1", "display_name": "andy", "link": "https://stackoverflow.com/users/3245178/andy"}, "edited": false, "score": 0, "creation_date": 1543430702, "post_id": 53525348, "comment_id": 93921043, "body": "@hrbmstr yes. i have <code>&#47;&#47; [[Rcpp::export]]</code> directly above the function. But i have <code>&#47;&#47; [[Rcpp::depends(RcppArmadillo)]]</code> <code>#include &lt;RcppArmadillo.h&gt;</code> in between <code>&#47;&#47;&#39;@export</code> and <code>&#47;&#47;[[Rcpp::export]]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 3245178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a5c46dbd5df74bad641b8836ac60ca4?s=128&d=identicon&r=PG&f=1", "display_name": "andy", "link": "https://stackoverflow.com/users/3245178/andy"}, "edited": false, "score": 0, "creation_date": 1543431156, "post_id": 53525564, "comment_id": 93921266, "body": "thanks, i read this in Hadley Wickhams book (p99) but this creates an error.  &quot;Evaluation error: C:/Users/.../R/RcppExports.R:18:1: unexpected [[&quot;. It places <code>[[</code> right before the <code>Rcpp::depends</code> function call. And like i mentioned. Everything runs fine so there isn&#39;t a problem of the code not exporting"}, {"owner": {"reputation": 8984, "user_id": 1568306, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Z3BT4.jpg?s=128&g=1", "display_name": "Anders Ellern Bilgrau", "link": "https://stackoverflow.com/users/1568306/anders-ellern-bilgrau"}, "reply_to_user": {"reputation": 143, "user_id": 3245178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a5c46dbd5df74bad641b8836ac60ca4?s=128&d=identicon&r=PG&f=1", "display_name": "andy", "link": "https://stackoverflow.com/users/3245178/andy"}, "edited": false, "score": 0, "creation_date": 1543432967, "post_id": 53525564, "comment_id": 93922141, "body": "@andy I have edited my post. If that does not work, could you provide some snippets of the src code, the code in RcppExports.Rcpp and RcppExports.R in your post?"}, {"owner": {"reputation": 8984, "user_id": 1568306, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Z3BT4.jpg?s=128&g=1", "display_name": "Anders Ellern Bilgrau", "link": "https://stackoverflow.com/users/1568306/anders-ellern-bilgrau"}, "reply_to_user": {"reputation": 143, "user_id": 3245178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a5c46dbd5df74bad641b8836ac60ca4?s=128&d=identicon&r=PG&f=1", "display_name": "andy", "link": "https://stackoverflow.com/users/3245178/andy"}, "edited": false, "score": 0, "creation_date": 1543475203, "post_id": 53525564, "comment_id": 93934736, "body": "@andy The include should only be once at the top of the document. The NULL comes because the <code>\\\\&#39; @export</code> is not &#39;attached&#39; to the function definition."}, {"owner": {"reputation": 143, "user_id": 3245178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a5c46dbd5df74bad641b8836ac60ca4?s=128&d=identicon&r=PG&f=1", "display_name": "andy", "link": "https://stackoverflow.com/users/3245178/andy"}, "edited": false, "score": 0, "creation_date": 1543503957, "post_id": 53525564, "comment_id": 93950746, "body": "Thanks. I think i get what you are saying. I placed the <code>#include &lt;RcppArmadillo.h&gt;</code> on the very first line of the file. Then followed by the <code>&#47;&#47;&#39;</code> statements in one contiguous block (including the <code>&#47;&#47;&#39;@export</code>). This was the solution. I now don&#39;t have NULL and i can read help file. Thanks a bunch"}], "tags": [], "owner": {"reputation": 8984, "user_id": 1568306, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Z3BT4.jpg?s=128&g=1", "display_name": "Anders Ellern Bilgrau", "link": "https://stackoverflow.com/users/1568306/anders-ellern-bilgrau"}, "is_accepted": true, "score": 2, "last_activity_date": 1543475174, "last_edit_date": 1543475174, "creation_date": 1543428474, "answer_id": 53525564, "question_id": 53525348, "link": "https://stackoverflow.com/questions/53525348/c-documentation-in-an-r-package/53525564#53525564", "title": "c++ documentation in an R package", "body": "<p>You need to have something like</p>\n\n<pre><code>//' @export\n// [[Rcpp::export]]\n</code></pre>\n\n<p><em>right</em> before your function definition. The first is Roxygen saying that the function is to be exposed to the user-interface. The second line is telling Rcpp to export to the R-side---i.e. the functions are simply put/exported into <code>RcppExports.Rcpp</code> and <code>RcppExports.R</code>. Two different things where the former only makes sense if the latter is provided too.</p>\n\n<p>The Roxygen comments <code>\\\\'</code> are just carried on to the <code>RcppExports.R</code> file.</p>\n\n<p><strong>Edit:</strong>\nFrom your comments, I see you metion RcppArmadillo. You only need to <code>#include &lt;RcppArmadillo.h&gt;</code> once at the top of your <code>.cpp</code> file. The <code>// [[Rcpp::depends(RcppArmadillo)]]</code> is not needed.</p>\n"}, {"tags": [], "owner": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "is_accepted": false, "score": 0, "last_activity_date": 1543475083, "creation_date": 1543475083, "answer_id": 53533526, "question_id": 53525348, "link": "https://stackoverflow.com/questions/53525348/c-documentation-in-an-r-package/53533526#53533526", "title": "c++ documentation in an R package", "body": "<p>The <code>roxygen</code> comment has to be next to the function(s) it applies to. Different combination of such comments are possible:</p>\n\n<pre><code>#include &lt;RcppArmadillo.h&gt;\n\n//' @export\n// [[Rcpp::export]]\narma::mat myfunc(int nSize, ... ,arma::cube suitability) { \n   do some stuff\n}\n\n//' @export\n// [[Rcpp::export]]\narma::mat myotherfunc(int nSize, ... ,arma::cube suitability) { \n   do some other stuff\n}\n\n// C++ internal function, i.e. usable in the packages C++ code\narma::mat cppinternal(int nSize, ... ,arma::cube suitability) { \n   do some other stuff\n}\n\n// R internal function, i.e. usable in the packages R code \n// [[Rcpp::export]]\narma::mat Rinternal(int nSize, ... ,arma::cube suitability) { \n   do some other stuff\n}\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 3245178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a5c46dbd5df74bad641b8836ac60ca4?s=128&d=identicon&r=PG&f=1", "display_name": "andy", "link": "https://stackoverflow.com/users/3245178/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 53525564, "answer_count": 2, "score": 0, "last_activity_date": 1543504364, "creation_date": 1543427528, "last_edit_date": 1543504364, "question_id": 53525348, "link": "https://stackoverflow.com/questions/53525348/c-documentation-in-an-r-package", "title": "c++ documentation in an R package", "body": "<p>my R package uses Rcpp and RcppArmadillo. I built it in Rstudio.\nI am following H.Wickhams guide (R-packages). The package builds (with one warning, see below), installs and runs fine.</p>\n\n<p>cpp scripts have been documented using the  //' headers</p>\n\n<p>I have several questions that i think are all related:</p>\n\n<ol>\n<li><p>If i add <code>//'@export</code> to a cpp file then an entry of <code>export()</code> is added to <code>NAMESPACE</code>. Shouldn't it be export(filename)?</p></li>\n<li><p>The <code>RcppExports.R</code> file contains a NULL value and during build i get a warning <em>\"Warning: <code>RcppExports.R:18</code>: Missing name\"</em>. Why is this? How do i rectify it?</p></li>\n<li><p>How do i read the help file for the cpp script. ?filename doesn't seem to work like it does for R files in the package?</p></li>\n</ol>\n\n<p>EDIT: snippet of code from  .cpp</p>\n\n<pre><code>//' @export\n#include &lt;RcppArmadillo.h&gt;\n// [[Rcpp::export]]\narma::mat myfunc(int nSize, ... ,arma::cube suitability) { \n   do some stuff\n}\n</code></pre>\n\n<p>Code from RcppExports.R (This NULL is the warning mentioned above)</p>\n\n<pre><code>#' @export\nNULL\nmyfunc &lt;- function(nSize, ..., suitability) {\n   .Call('_myfunc', PACKAGE = 'mypackage', nSize, ... , suitability)\n}\n</code></pre>\n\n<p>and code from RccpExports.cpp</p>\n\n<pre><code>// Generated by using Rcpp::compileAttributes() -&gt; do not edit by hand\n// Generator token: 10BE3573-1514-4C36-9D1C-5A225CD40393\n#include &lt;RcppArmadillo.h&gt;\n#include &lt;Rcpp.h&gt;\n\nusing namespace Rcpp;\n\n// myfunc\narma::mat myfunc(int nSize, ..., arma::cube suitability);\nRcppExport SEXP _myfunc(SEXP nSizeSEXP, SEXP suitabilitySEXP) {\nBEGIN_RCPP\n  Rcpp::RObject rcpp_result_gen;\n  Rcpp::RNGScope rcpp_rngScope_gen;\n  Rcpp::traits::input_parameter&lt; int &gt;::type nSize(nSizeSEXP);\n  Rcpp::traits::input_parameter&lt; arma::cube &gt;::type suitability(suitabilitySEXP);\n  rcpp_result_gen = Rcpp::wrap(myfunc(nSize, ..., suitability));\n  return rcpp_result_gen;\nEND_RCPP\n}\n\nstatic const R_CallMethodDef CallEntries[] = {\n    {\"_myfunc\", (DL_FUNC) &amp;_myfunc, 9},\n   {NULL, NULL, 0}\n};\n\nRcppExport void R_init_mypackage(DllInfo *dll) {\n   R_registerRoutines(dll, NULL, CallEntries, NULL, NULL);\n   R_useDynamicSymbols(dll, FALSE);\n}\n</code></pre>\n\n<p><strong>SOLUTION</strong>: Thanks to Anders and Ralf</p>\n\n<pre><code>#include &lt;RcppArmadillo.h&gt;\n//' calculates stuff\n//'\n//' Calculates the stuff\n//'\n//'@param nSize number of some stuff\n//'@param p2\n//'@param p3\n//'@param p4\n//'@param p5\n//'@param p6\n//'@param p7\n//'@param p8\n//'@param suitability 3D array \n//' @export\n// [[Rcpp::export]]\narma::mat myfunc(int nSize, ... ,arma::cube suitability) { \n  do some stuff\n}\n</code></pre>\n"}, {"tags": ["c++", "language-lawyer", "std"], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 2, "last_activity_date": 1543428434, "creation_date": 1543428434, "answer_id": 53525554, "question_id": 53525238, "link": "https://stackoverflow.com/questions/53525238/documentation-for-stdbasic-filebufseekpos/53525554#53525554", "title": "Documentation for std::basic_filebuf::seekpos", "body": "<p>From further down the page:</p>\n\n<blockquote>\n  <p>Many implementations do not update the get area in seekpos(), delegating to underflow() that is called by the next sgetc()</p>\n</blockquote>\n\n<p>and:</p>\n\n<blockquote>\n  <p>on some implementations, the get area is emptied by seekpos() and the second underflow() is necessary to observe the effects</p>\n</blockquote>\n\n<p>Looks like that's what happened to you.</p>\n\n<p>It is open to interpretation as to what \"update\" means. The standard is very flexible here (note the lack of explicit postconditions), basically saying \"the implementation gets to do whatever it needs to do in order to carry out its business\".</p>\n\n<p>In this particular case, your filebuf implementation probably emptied the get area when you seeked, then will \"fill\" it on the next underflow() &mdash; arguably both operations in concert are the \"update\", but to be honest you can spin it whichever way you like.</p>\n"}], "owner": {"reputation": 458, "user_id": 7122617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd5c37256b8055814bb503de5efd0b1?s=128&d=identicon&r=PG&f=1", "display_name": "Baykov Nikita", "link": "https://stackoverflow.com/users/7122617/baykov-nikita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 53525554, "answer_count": 1, "score": 3, "last_activity_date": 1543428434, "creation_date": 1543427079, "last_edit_date": 1543428149, "question_id": 53525238, "link": "https://stackoverflow.com/questions/53525238/documentation-for-stdbasic-filebufseekpos", "title": "Documentation for std::basic_filebuf::seekpos", "body": "<p>I have studied documentation page for std::basic_filebuf::seekpos provided by <a href=\"https://en.cppreference.com/w/cpp/io/basic_filebuf/seekpos\" rel=\"nofollow noreferrer\">cppreference.com</a> and got confused by the following sentence:</p>\n\n<blockquote>\n  <p>If the file is open for reading, updates the get area if necessary.</p>\n</blockquote>\n\n<p>As far as I can see on my computer, seekpos ends up with eback()==gptr()==egptr(), i.e. function empties get area. Does this mean that get area has been updated? It would be very nice, if someone could clarify it. Thank you!</p>\n"}, {"tags": ["c++", "function-pointers", "c++17"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1543427346, "post_id": 53525231, "comment_id": 93919480, "body": "I think it is possible to <i>declare</i> said function without reiterating its return type and formal argument list, but it is not possible to <i>define</i> the function without reiterating."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1543427373, "post_id": 53525231, "comment_id": 93919494, "body": "Are you looking for <a href=\"https://en.cppreference.com/w/cpp/language/decltype\" rel=\"nofollow noreferrer\">decltype</a>?"}], "owner": {"reputation": 103, "user_id": 10646643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd2fda72712b67290346e426820028f?s=128&d=identicon&r=PG&f=1", "display_name": "Regus Pregus", "link": "https://stackoverflow.com/users/10646643/regus-pregus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "closed_date": 1543427335, "answer_count": 0, "score": 0, "last_activity_date": 1543427390, "creation_date": 1543427058, "last_edit_date": 1543427390, "question_id": 53525231, "link": "https://stackoverflow.com/questions/53525231/reusing-user-defined-function-pointer-type-to-declare-a-function", "closed_reason": "Duplicate", "title": "Reusing user-defined function pointer type to declare a function", "body": "<p>I am trying to find a way to declare a function by re-using a previously declared function pointer type, as it would allow me to avoid duplication in code (very useful when you have to declare a lot of functions with identical signatures). In other words, I would like to do something like this:</p>\n\n<pre><code>//Declare re-usable function pointer type\nusing TFunctionAddr = int(*)(int arg0);\n//And now, instead of duplicating a function signature like so:\nint FunctionUgly(int arg0)\n{\n  return arg0 + 1;\n}\n//I would like to use TFunctionAddr to somehow declare a new function\n//without reiterating its return type and formal argument list\nSomeMagicSyntaxHere(TFunctionAddr, FunctionNeat)\n{\n  return arg0 + 1;\n}\n//Here \"SomeMagicSyntax()\" is a pseudo-code, not an actual language construct\n</code></pre>\n\n<p>Question: is it at all possible in C/C++ and if yes, what should that be that \"magic syntax\"?</p>\n\n<p>Notice that in this snippet I am not using function pointers to call anything yet, this happens later in the code and is irrelevant to the question at hand. </p>\n\n<p>I am open for suggestions that require any level of C++ standard support, including C++17 and standard library  header facilities, but obviously more bare-bone solutions would be more preferable.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 0, "creation_date": 1543428815, "post_id": 53525213, "comment_id": 93920150, "body": "<code>for (int i = countElement + 1; i &gt; countElement; i--)</code> : in practice, it simply means <code>i = countElement</code>. Is it your intention ?"}, {"owner": {"reputation": 45, "user_id": 10522028, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WgmGl5Xze74/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCvtf2tJU_HNwPr1aA6TxVTdFJEAw/mo/photo.jpg?sz=128", "display_name": "Dat To", "link": "https://stackoverflow.com/users/10522028/dat-to"}, "reply_to_user": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 0, "creation_date": 1543430784, "post_id": 53525213, "comment_id": 93921072, "body": "SO I have the countElement to check how many value do I have in the userChoice column. Then in my next looping, I will assign the arr[i-1][col] =  arr[i][col]. It will skip the already accessed element and start with a new one."}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 10699700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/989d9c60463b8225381d1495895822a4?s=128&d=identicon&r=PG&f=1", "display_name": "ashkan_d13", "link": "https://stackoverflow.com/users/10699700/ashkan-d13"}, "is_accepted": false, "score": 1, "last_activity_date": 1543428788, "creation_date": 1543428788, "answer_id": 53525643, "question_id": 53525213, "link": "https://stackoverflow.com/questions/53525213/how-to-shift-row-elements-in-2d-pointer-array/53525643#53525643", "title": "How to shift row elements in 2D pointer array", "body": "<p>It's hard to figure out your code function precisely (due to some unused variables, duplicated codes, and not using short/single-responsibility functions), anyway it's easy to shift-up a matrix in a required column:</p>\n\n<pre><code>const int rowSize = 7;\nconst int colSize = 7;\n\nchar scr[rowSize][colSize];\n\nvoid shiftUp(int colInd)\n{\n    for (int r = 0; r &lt; rowSize - 1; r++)\n    {\n        scr[r][colInd] = scr[r + 1][colInd];\n    }\n    scr[rowSize - 1][colInd] = '?';\n}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 10522028, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WgmGl5Xze74/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCvtf2tJU_HNwPr1aA6TxVTdFJEAw/mo/photo.jpg?sz=128", "display_name": "Dat To", "link": "https://stackoverflow.com/users/10522028/dat-to"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1543428788, "creation_date": 1543426979, "question_id": 53525213, "link": "https://stackoverflow.com/questions/53525213/how-to-shift-row-elements-in-2d-pointer-array", "title": "How to shift row elements in 2D pointer array", "body": "<p>I have a 2D char pointer array which contains a board game with size 7x7. My array will look like this: <a href=\"https://i.stack.imgur.com/eFklZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eFklZ.png\" alt=\"Board\"></a></p>\n\n<p>I have my code to shift elements in one column up 1 position like this:</p>\n\n<pre><code>void userMove(char **boardOfGame, int *sizeOfBoardGame, char typeOfUserTile, int userChoice)\n{\n    int countElement = 6;\n    char tempElement;\n    for (int i = 6; i &gt; 0; i--)\n    {\n        if (!isspace(boardOfGame[i][userChoice]))\n        {\n            countElement--;\n        }\n    }\n    if (typeOfUserTile == '+' || typeOfUserTile == '-' || typeOfUserTile == '|')\n    {\n        if (boardOfGame[userChoice][6] == 'X')\n        {\n            cout &lt;&lt; \"A locked tile is preventing your tile from being added. Try to be more careful next turn.\" &lt;&lt; endl;\n        }\n        if (boardOfGame[6][userChoice] == ' ')\n        {\n            //boardOfGame[6][userChoice] = printf(\"\\033[1;34m%c\\033[0m\\n\",typeOfUserTile);\n            boardOfGame[6][userChoice] = typeOfUserTile;\n        }                   \n        else if (boardOfGame[6][userChoice] == '+' || boardOfGame[6][userChoice] == '-' || boardOfGame[6][userChoice] == '|')\n        {\n            for (int i = countElement + 1; i &gt; countElement; i--)\n            {\n                //memmove (&amp;boardOfGame[i-1][userChoice], &amp;boardOfGame[i][userChoice], 1);\n                boardOfGame[i-1][userChoice] = boardOfGame[i][userChoice];\n                if (i &lt; 6 &amp;&amp; i &gt; 0)\n                {\n                    boardOfGame[i][userChoice] = boardOfGame[i + 1][userChoice];\n                }           \n                if (i == 0)\n                {\n                    boardOfGame[i][userChoice] = boardOfGame[i+1][userChoice];\n                }\n                boardOfGame[6][userChoice] = typeOfUserTile;                \n            }\n        }               \n    }\n}\n</code></pre>\n\n<p>It works properly in the first three rows, but it has issues in the rest. Please help me fix it, I'm kinda stuck on this matter. Anything helps. Thank you.</p>\n\n<p>My output:<a href=\"https://i.stack.imgur.com/IgW6C.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IgW6C.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "c++11", "find", "c++-standard-library"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1543426049, "post_id": 53524807, "comment_id": 93918882, "body": "Count the parentheses again. <code>-&gt;second</code> dereferences the iterator returned by <code>std::find_if</code>, which points to a pair, and accesses the <code>second</code> member of said pair."}], "answers": [{"tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": true, "score": 2, "last_activity_date": 1543426183, "creation_date": 1543426183, "answer_id": 53525045, "question_id": 53524807, "link": "https://stackoverflow.com/questions/53524807/understanding-stdfind-if-using-a-lamda-on-stdpair/53525045#53525045", "title": "understanding std::find_if() using a lamda on std::pair", "body": "<blockquote>\n  <p>It is my understanding that <code>std::find_if()</code> below returns an iterator</p>\n</blockquote>\n\n<p>Yes, but that iterator is then dereferenced within the same expression. The function returns a <em>copy</em> of the <code>std::type_index</code> from some element of <code>args_</code>, which is presumably some std-like container with a <code>value_type</code> of <code>std::pair&lt;std::string, std::type_index&gt;</code> (or similar). </p>\n\n<p>At a guess it's a <code>std::vector&lt;std::pair&lt;std::string, std::type_index&gt;&gt;</code>, because if it were a map the whole function could be simplified to </p>\n\n<pre><code>return args_.at(name);\n</code></pre>\n\n<blockquote>\n  <p>Could somebody explain why there isn't an iterator defined like this <code>std::pair&lt;std::string, std::type_index&gt;::iterator = std::find_if(...)</code>?</p>\n</blockquote>\n\n<p>Well firstly <code>std::pair</code> doesn't have a member <code>iterator</code>. I assume you meant <code>std::vector&lt;std::pair&lt;std::string, std::type_index&gt;&gt;::iterator</code> (or whichever collection type <code>args_</code> is). </p>\n\n<p>There doesn't need to be a separate statement declaring such an iterator, in much the same way as you don't need a separate <code>double</code> in the statement</p>\n\n<pre><code>return floor(3.14 * radius);\n</code></pre>\n\n<p>when you want an integer circumference calculation.</p>\n\n<blockquote>\n  <p>Where is the iterator returned by <code>std::find_if()</code> stored</p>\n</blockquote>\n\n<p>Anywhere the compiler likes. It only exists while the return statement is being evaluated.</p>\n\n<blockquote>\n  <p>how can you call <code>-&gt;second</code> on its own </p>\n</blockquote>\n\n<p>You aren't. You are calling it on the temporary returned by <code>std::find_if</code></p>\n\n<blockquote>\n  <p>and why is there a <code>!= args_.end()</code> after the closing brace of <code>std::find_if</code>?</p>\n</blockquote>\n\n<p>There isn't. The author <strong>assumes</strong> that they will find a matching element. If they don't, the program has undefined behaviour. That may be intentional, or it may be a bug.</p>\n"}], "owner": {"reputation": 143, "user_id": 9169178, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/37746c5a3aa3c38307f91b8721b65276?s=128&d=identicon&r=PG&f=1", "display_name": "netleap tom", "link": "https://stackoverflow.com/users/9169178/netleap-tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 53525045, "answer_count": 1, "score": 0, "last_activity_date": 1543428451, "creation_date": 1543425316, "last_edit_date": 1543428451, "question_id": 53524807, "link": "https://stackoverflow.com/questions/53524807/understanding-stdfind-if-using-a-lamda-on-stdpair", "title": "understanding std::find_if() using a lamda on std::pair", "body": "<p>It is my understanding that <code>std::find_if() below</code> returns an iterator to the first element in the range of <code>arg</code> for which the third argument (lamda function) returns true. Is that correct? </p>\n\n<p>Could somebody explain why there isn't an iterator defined like this <code>std::pair&lt;std::string, std::type_index&gt;::iterator = std::find_if(...)</code>?</p>\n\n<p>Where is the iterator returned by <code>std::find_if()</code> stored and how can you call <code>-&gt;second</code> on its own and not on an iterator?   </p>\n\n<pre><code>std::type_index argType(const std::string&amp; name) const\n{\n    return std::find_if(args_.begin(), args_.end(),\n        [&amp;name](std::pair&lt;std::string, std::type_index&gt; arg)-&gt;bool\n        {\n            return arg.first == name;\n        }\n    )-&gt;second;\n}\n</code></pre>\n"}, {"tags": ["c++", "oop", "iterator"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1543425280, "post_id": 53524727, "comment_id": 93918426, "body": "Why not make <code>storage</code> a <code>std::map&lt;int, std::list&lt;std::unique_ptr&lt;Interface2&gt;&gt;&gt;</code> and then you can just return a reference to <code>storage[id]</code>?"}, {"owner": {"reputation": 398, "user_id": 4248409, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ed0b051c4d7c8f7d008d8d019066c506?s=128&d=identicon&r=PG&f=1", "display_name": "BAdhi", "link": "https://stackoverflow.com/users/4248409/badhi"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1543460501, "post_id": 53524727, "comment_id": 93930638, "body": "But then the <code>InterfaceImp</code> would have to do operations on the contents of its storage as <code>Interface2</code> not as <code>Interface2Imp</code>. Or are you suggesting to cast it upwards to <code>Interface2Imp</code> when ever needed internally?"}], "answers": [{"tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 2, "last_activity_date": 1543425491, "creation_date": 1543425491, "answer_id": 53524863, "question_id": 53524727, "link": "https://stackoverflow.com/questions/53524727/interfaces-passing-container-of-interfaces/53524863#53524863", "title": "Interfaces passing container of Interfaces", "body": "<p>as it stands the iterate and copy has to be done. The class stores a list of instances of X, you want a list of pointers to instances of X. These are 2 different things. You could maybe do some std::algorithm stuff etc but that does not change the fact that the iterate and clone must be done.</p>\n\n<p>How about changing the interfaces and implementation. Make the class <code>InterfaceImp</code> store a List of shared_ptr to <code>Interface</code>, and make getData method return a List of shared_ptrs. Now the container can directly return its data. (Also you are not moving raw pointers around)</p>\n\n<p>Having said that, what you have at the moment is a better encapsulation. You are not exposing your internal data to your caller, you are cloning it.</p>\n"}, {"tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1543426847, "creation_date": 1543426847, "answer_id": 53525186, "question_id": 53524727, "link": "https://stackoverflow.com/questions/53524727/interfaces-passing-container-of-interfaces/53525186#53525186", "title": "Interfaces passing container of Interfaces", "body": "<p>What you have is basically a <code>multimap&lt;int, Interface2Imp&gt;</code> but with a twist: outside users need to see <code>Interface2*</code> and not <code>Interface2Imp&amp;</code>.</p>\n\n<p>This is a model use case for <em>iterator adapters</em>. You can steal one from <a href=\"https://www.boost.org/doc/libs/1_68_0/libs/iterator/doc/iterator_adaptor.html#tutorial-example\" rel=\"nofollow noreferrer\">Boost</a> or write your own. In the latter case you need a class that contains a real <code>multimap&lt;int, Interface2Imp *&gt;::const_iterator</code> member, forwards most iterator-y methods to it directly, and only adapts <code>operator *()</code> and <code>operator -&gt;()</code> slightly differently (return what the internal member returns but upcasted to the base class pointer/reference).</p>\n\n<p>If you don't want to mention <code>Interface2Imp</code> even in the private part of your iterator adapter, further hide it away with the Pimpl idiom.</p>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1543480483, "last_edit_date": 1543480483, "creation_date": 1543427524, "answer_id": 53525345, "question_id": 53524727, "link": "https://stackoverflow.com/questions/53524727/interfaces-passing-container-of-interfaces/53525345#53525345", "title": "Interfaces passing container of Interfaces", "body": "<p>An alternative solution would be to store smart pointers for the interface implementaion instances in 1st place:</p>\n\n<pre><code>class InterfaceImp : public Interface\n{\npublic:\n    const std::list&lt;std::shared_ptr&lt;Interface2&gt;&gt;&amp; getData(uint id)\n    {\n        return storage[id];\n    }\n\nprivate:\n    std::map&lt;uint, std::list&lt;std::shared_ptr&lt;Interface2&gt;&gt; &gt; storage;\n}\n</code></pre>\n\n<p>If you need access to the <code>Interface2Imp</code> instances to access functions or data, that's not visible through <code>Interface2</code> you can always use a <code>static_cast&lt;Interface2Imp*&gt;</code> with those instances, because your <code>InterfaceImp</code> class knows what was used to instantiate the  <code>std::shared_ptr&lt;Interface2&gt;</code> implementations.<br>\nYou can even do full runtime queries using <code>dynamic_cast&lt;Interface2*&gt;</code> if it is necessary and doesn't hit your application performance wise.</p>\n"}], "owner": {"reputation": 398, "user_id": 4248409, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ed0b051c4d7c8f7d008d8d019066c506?s=128&d=identicon&r=PG&f=1", "display_name": "BAdhi", "link": "https://stackoverflow.com/users/4248409/badhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1543480483, "creation_date": 1543425005, "question_id": 53524727, "link": "https://stackoverflow.com/questions/53524727/interfaces-passing-container-of-interfaces", "title": "Interfaces passing container of Interfaces", "body": "<p>If there is an interface with a method signature as following,</p>\n\n<pre><code>class Interface2\n{\npublic:\n    virtual ~Interface2() {}\n    virtual uint getId() = 0;\n    virtual std::string getName() = 0;\n};\n\nclass Interface\n{\npublic:\n    virtual ~Interface(){}\n    virtual std::list&lt;Interface2*&gt; getData(uint id) = 0;\n};\n</code></pre>\n\n<p>So basically the purpose of <code>getData(uint id)</code> is to expose the internal storage of <code>Interface2</code> interfaces</p>\n\n<p>When implementing a concrete class <code>Interface</code>, it would keep the storage of objects made out of concrete classes of <code>Interface2</code>.</p>\n\n<p>For example, following could be a way of implementing those interfaces</p>\n\n<pre><code>class Interface2Imp : public Interface2\n{\npublic:\n    uint getId() { return id;}\n    std::string getName() { return name;}\n\nprivate:\n    uint id;\n    std::string name;\n};\n\nclass InterfaceImp : public Interface\n{\npublic:\n    std::list&lt;Interface2*&gt; getData(uint id)\n    {\n        std::list&lt;Interface2*&gt; returnList;\n        std::list&lt;Interface2Imp&gt; &amp; a = storage[id];\n        for(auto &amp; it : a)\n        {\n            returnList.push_back(&amp;it);\n        }\n        return returnList;\n    }\n\nprivate:\n    std::map&lt;int, std::list&lt;Interface2Imp&gt; &gt; storage;\n}\n</code></pre>\n\n<p>But looking at how <code>getData(uint id)</code> is implemented we can see that it iterates over its internal storage and then again fill it out to a list of interfaces, which looks costly (and ugly).</p>\n\n<p>Is there a better method to expose the internal data of an interfaces which happen to be exposed as interfaces as well?</p>\n"}, {"tags": ["c++", "linux", "sdl", "clion", "sdl-image"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1543423740, "post_id": 53524216, "comment_id": 93917590, "body": "Are you sure the file is in your current working directory of your process (since it seems that&#39;s where you try to load it from - the CWD is not necessarily the same directory as the executable is stored in)?"}, {"owner": {"reputation": 13, "user_id": 10718203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d7888a427838ec1970827f5e3a75bb8?s=128&d=identicon&r=PG&f=1", "display_name": "Karol", "link": "https://stackoverflow.com/users/10718203/karol"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1543423931, "post_id": 53524216, "comment_id": 93917708, "body": "idle.png, main.cpp and CMakeLists.txt are in folder untitled (name of the project)"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1543424334, "post_id": 53524216, "comment_id": 93917901, "body": "Source location is irrelevant. What matters is the location of the file at runtime compared to the CWD of the process. 3 easy ways to fix: 1) change the cwd at runtime to where the file is and load as you do now. 2) provide an absolute path to the file when loading so cwd is irrelevant. 3) obtain the path to the executable at runtime and then construct a path to the file relative to where the executable is."}, {"owner": {"reputation": 13, "user_id": 10718203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d7888a427838ec1970827f5e3a75bb8?s=128&d=identicon&r=PG&f=1", "display_name": "Karol", "link": "https://stackoverflow.com/users/10718203/karol"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1543424593, "post_id": 53524216, "comment_id": 93918039, "body": "It worked with absolute path. Thanks."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1543424705, "post_id": 53524216, "comment_id": 93918098, "body": "The problem with an absolute path is that it&#39;ll beeak when you move your files. I prefer constructing a executable relative path to resources."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": true, "score": 2, "last_activity_date": 1543438197, "last_edit_date": 1543438197, "creation_date": 1543426136, "answer_id": 53525040, "question_id": 53524216, "link": "https://stackoverflow.com/questions/53524216/sdl-image-cant-load-png-file-with-img-loadtexture/53525040#53525040", "title": "SDL_image Can&#39;t load .png file with IMG_LoadTexture()", "body": "<p>You are loading the image from the current working directory (CWD) of your application. That is <em>not necessarily</em> the same directory as your executable is in (it depends on how it is launched), which you seem to assume.</p>\n\n<p>3 easy ways to fix:</p>\n\n<ol>\n<li>change the cwd at runtime to where the file is and load as you do now. </li>\n<li>provide an absolute path to the file when loading, so cwd is irrelevant. </li>\n<li>obtain the path to the executable at runtime and then construct a path to the file relative to where the executable is. (best option in my opinion since it's robust against moving your project around/installing to a different location).</li>\n</ol>\n"}], "owner": {"reputation": 13, "user_id": 10718203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d7888a427838ec1970827f5e3a75bb8?s=128&d=identicon&r=PG&f=1", "display_name": "Karol", "link": "https://stackoverflow.com/users/10718203/karol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 892, "favorite_count": 0, "accepted_answer_id": 53525040, "answer_count": 1, "score": 1, "last_activity_date": 1543438197, "creation_date": 1543423258, "last_edit_date": 1543423587, "question_id": 53524216, "link": "https://stackoverflow.com/questions/53524216/sdl-image-cant-load-png-file-with-img-loadtexture", "title": "SDL_image Can&#39;t load .png file with IMG_LoadTexture()", "body": "<p>While trying to load a .png file with IMG_LoadTexture(renderer, \"idle.png\")\nSDL_GetError() says: \"Couldn't open idle.png\"\nThere are no compiler errors, just a black window appears.</p>\n\n<p>This is my main.cpp</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;SDL2/SDL.h&gt;\n#include &lt;SDL2/SDL_image.h&gt;\n#include &lt;iostream&gt;\n\nint main(int argc,  char** argv) {\n    SDL_Event event;\n    SDL_Renderer *renderer = NULL;\n    SDL_Texture *texture = NULL;\n    SDL_Window *window = NULL;\n\n    SDL_Init(SDL_INIT_TIMER | SDL_INIT_VIDEO);\n    SDL_CreateWindowAndRenderer(\n            800, 600,\n            0, &amp;window, &amp;renderer\n    );\n    IMG_Init(IMG_INIT_PNG);\n    texture = IMG_LoadTexture(renderer, \"idle.png\");\n    std::cout &lt;&lt; SDL_GetError();\n\n    while (1) {\n        SDL_RenderCopy(renderer, texture, NULL, NULL);\n        SDL_RenderPresent(renderer);\n        if (SDL_PollEvent(&amp;event) &amp;&amp; event.type == SDL_QUIT)\n            break;\n    }\n    SDL_DestroyTexture(texture);\n    IMG_Quit();\n    SDL_DestroyRenderer(renderer);\n    SDL_DestroyWindow(window);\n    SDL_Quit();\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>But I guess the problem is the way I link the library. I installed sdl2, sdl2_image and libpng.</p>\n\n<p>CMakeLists.txt:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.12)\nproject(untitled)\n\nset(CMAKE_CXX_STANDARD 17)\n\nadd_executable(untitled main.cpp)\n\nINCLUDE(FindPkgConfig)\n\nPKG_SEARCH_MODULE(SDL2 REQUIRED sdl2)\nPKG_SEARCH_MODULE(SDL2IMAGE REQUIRED SDL2_image&gt;=2.0.0)\n\nINCLUDE_DIRECTORIES(${SDL2_INCLUDE_DIRS} ${SDL2IMAGE_INCLUDE_DIRS})\nTARGET_LINK_LIBRARIES(untitled ${SDL2_LIBRARIES} ${SDL2IMAGE_LIBRARIES})\n</code></pre>\n"}, {"tags": ["c++", "boost", "boost-spirit"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1543423289, "post_id": 53524161, "comment_id": 93917317, "body": "Have you tried just reassigning to <code>line</code> (or <code>main</code> or other suitable rule)?"}, {"owner": {"reputation": 1060, "user_id": 3197530, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cf0ed34f4caf722c36242dfded60e0be?s=128&d=identicon&r=PG&f=1", "display_name": "pschulz", "link": "https://stackoverflow.com/users/3197530/pschulz"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1543423472, "post_id": 53524161, "comment_id": 93917422, "body": "I haven&#39;t tried anything up to now, but that&#39;s similar to what I thought about with different instances for the individual parsers. However, it&#39;s never easy with boost spirit, so I&#39;m not sure if it&#39;s ok to switch parsers while actually using the parser to consume input. Also, perhaps there is a nice, spiritish way of doing things like this."}], "answers": [{"comments": [{"owner": {"reputation": 1060, "user_id": 3197530, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cf0ed34f4caf722c36242dfded60e0be?s=128&d=identicon&r=PG&f=1", "display_name": "pschulz", "link": "https://stackoverflow.com/users/3197530/pschulz"}, "edited": false, "score": 0, "creation_date": 1543473853, "post_id": 53524397, "comment_id": 93934188, "body": "So it is that easy. Thanks, i&#39;m working on it currently, looks good. Somehow i thought i could not apply this strategy."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 2, "last_activity_date": 1543423897, "creation_date": 1543423897, "answer_id": 53524397, "question_id": 53524161, "link": "https://stackoverflow.com/questions/53524161/dynamically-switch-parser-while-parsing/53524397#53524397", "title": "Dynamically switch parser while parsing", "body": "<p>You can use <a href=\"https://www.boost.org/doc/libs/1_68_0/libs/spirit/doc/html/spirit/qi/reference/auxiliary/lazy.html\" rel=\"nofollow noreferrer\"><code>qi::lazy</code></a> (<a href=\"https://www.boost.org/doc/libs/1_68_0/libs/spirit/doc/html/spirit/qi/reference/auxiliary/lazy.html\" rel=\"nofollow noreferrer\">https://www.boost.org/doc/libs/1_68_0/libs/spirit/doc/html/spirit/qi/reference/auxiliary/lazy.html</a>).</p>\n\n<p>There's an idiomatic pattern related to that, known as <a href=\"http://boost-spirit.com/home/articles/qi-example/nabialek-trick/\" rel=\"nofollow noreferrer\">The Nabialek Trick</a>.</p>\n\n<p>I have several answers up on this site that show these various techniques.</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/search?q=user%3A85371+qi%3A%3Alazy\">https://stackoverflow.com/search?q=user%3A85371+qi%3A%3Alazy</a></li>\n</ul>\n"}], "owner": {"reputation": 1060, "user_id": 3197530, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cf0ed34f4caf722c36242dfded60e0be?s=128&d=identicon&r=PG&f=1", "display_name": "pschulz", "link": "https://stackoverflow.com/users/3197530/pschulz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 53524397, "answer_count": 1, "score": 0, "last_activity_date": 1543423897, "creation_date": 1543423028, "question_id": 53524161, "link": "https://stackoverflow.com/questions/53524161/dynamically-switch-parser-while-parsing", "title": "Dynamically switch parser while parsing", "body": "<p>I'm parsing <a href=\"https://en.wikipedia.org/wiki/SPICE\" rel=\"nofollow noreferrer\">spice netlists</a>, for which I already have a parser. Since I actually use spectre (cadence, integrated electronics), I want to support both simulator languages (they differ, unfortunately). I could use a switch (e.g. commandline) and use the correct parser from start. However, spectre allows <code>simulator lang=spectre</code> statements, which I would also want to support (and vice versa, of course). How can this be done with boost::spirit?</p>\n\n<p>My grammar looks roughly like this:</p>\n\n<pre><code>line = component_parser             | \n       command_parser               |  \n       comment_parser               | \n       subcircuit_parser            | \n       subcircuit_instance_parser;\n\nmain = -line % qi::eol &gt;&gt; qi::eoi;\n</code></pre>\n\n<p>This toplevel structure is fine for both languages, so i need to change the subparsers. A first idea for me would be to have the toplevel parser hold instances (or objects) to the respective parser and to switch on finding the <code>simulator lang</code> statement (with a semantic action). Is this a good approach? If not, how else would one do this?</p>\n"}, {"tags": ["c++", "perlin-noise"], "comments": [{"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 1, "creation_date": 1543423528, "post_id": 53524107, "comment_id": 93917446, "body": "I would expect that if it works in 3D with z=0 but not in 2D, then you just need to do a side by side compare of the code and see what changed. In other words, how is your 2D code different from your 3D code with z=0?"}, {"owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 1, "creation_date": 1543424664, "post_id": 53524107, "comment_id": 93918073, "body": "How is <code>permutation</code>defined ?"}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 9874341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4a3a4708d782345c687a51c999ee967?s=128&d=identicon&r=PG&f=1", "display_name": "statementreply", "link": "https://stackoverflow.com/users/9874341/statementreply"}, "is_accepted": false, "score": 0, "last_activity_date": 1543461734, "creation_date": 1543461734, "answer_id": 53531383, "question_id": 53524107, "link": "https://stackoverflow.com/questions/53524107/whats-causing-these-artefacts-in-my-2d-perlin-noise/53531383#53531383", "title": "What&#39;s causing these artefacts in my 2D Perlin noise?", "body": "<p>There's probably a mistake in <code>grad</code> (the precedence of <code>+</code> is higher than <code>?:</code>), which causes abrupt change of the (anyway incorrect) result on specific <code>xf</code>/<code>yf</code>/<code>hash</code> values.</p>\n\n<pre><code>return ((hash &amp; 4) ? u : -u) + (hash &amp; 8) ? v : -v;\n                              (                   )\n</code></pre>\n"}], "owner": {"reputation": 29435, "user_id": 458742, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ee0a7599f30c29076a3c9a2c022e473b?s=128&d=identicon&r=PG", "display_name": "spraff", "link": "https://stackoverflow.com/users/458742/spraff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1543461734, "creation_date": 1543422856, "last_edit_date": 1543423175, "question_id": 53524107, "link": "https://stackoverflow.com/questions/53524107/whats-causing-these-artefacts-in-my-2d-perlin-noise", "title": "What&#39;s causing these artefacts in my 2D Perlin noise?", "body": "<p>I implemented the <a href=\"https://mrl.nyu.edu/%7Eperlin/noise/\" rel=\"nofollow noreferrer\">improved Perlin noise algorithm</a>. The code as provided for 3D noise works correctly.</p>\n\n<p>I adjusted the algorithm to make a 2D version in what seemed the obvious way. It almost works, but produces artefacts as the images below show.</p>\n\n<p>Here is the correct 3D version:</p>\n\n<pre><code>unsigned inc (unsigned number)\n{\n    return (number + 1) &amp; 255;\n}\n\ndouble fade (double t)\n{\n    // Fade function as defined by Ken Perlin.\n    // This eases coordinate values\n    // so that they will \"ease\" towards integral values.\n    // This ends up smoothing the final output.\n\n    // 6t^5 - 15t^4 + 10t^3\n\n    return t * t * t * (t * (t * 6 - 15) + 10);\n}\n\ndouble lerp (double a, double b, double x)\n{\n    return a + x * (b - a);\n}\n\ndouble grad (unsigned hash, double x, double y, double z)\n{\n    // Take the hashed value and take the first 4 bits of it\n    // (15 == 0b1111)\n\n    unsigned h = hash &amp; 15;\n\n    // If the most significant bit (MSB) of the hash is 0\n    // then set u = x.  Otherwise y.\n\n    double u = h &lt; 8 /* 0b1000 */ ? x : y;\n\n    double v;\n\n    if (h &lt; 4 /* 0b0100 */)\n        // If the first and second significant bits\n        // are 0, set v = y\n        v = y;\n    else if (h == 12 /* 0b1100 */ || h == 14 /* 0b1110*/)\n        // If the first and second significant bits\n        // are 1, set v = x\n        v = x;\n    else\n        // If the first and second significant bits are not\n        // equal (0/1, 1/0) set v = z\n        v = z;\n\n    // Use the last 2 bits to decide if u and v are positive\n    // or negative. Then return their addition.\n\n    return ((h&amp;1) == 0 ? u : -u) + ((h&amp;2) == 0 ? v : -v);\n}\n\n\ndouble\nImprovedNoise :: noise (double x, double y, double z)\n{\n    // Calculate the \"unit cube\" that the point asked will be located in\n    // The left bound is ( |_x_|,|_y_|,|_z_| ) and the right bound is that\n    // plus 1.  Next we calculate the location (from 0.0 to 1.0) in that\n    // cube. We also fade the location to smooth the result.\n\n    int xi = (int)x &amp; 255;\n    int yi = (int)y &amp; 255;\n    int zi = (int)z &amp; 255;\n\n    double xf = x - (int) x;\n    double yf = y - (int) y;\n    double zf = z - (int) z;\n\n    double u = fade (xf);\n    double v = fade (yf);\n    double w = fade (zf);\n\n    int aaa, aba, aab, abb, baa, bba, bab, bbb;\n    auto &amp; p = permutation;\n\n    aaa = p[p[p[    xi ] +     yi ] +     zi ];\n    aba = p[p[p[    xi ] + inc(yi)] +     zi ];\n    aab = p[p[p[    xi ] +     yi ] + inc(zi)];\n    abb = p[p[p[    xi ] + inc(yi)] + inc(zi)];\n    baa = p[p[p[inc(xi)] +     yi ] +     zi ];\n    bba = p[p[p[inc(xi)] + inc(yi)] +     zi ];\n    bab = p[p[p[inc(xi)] +     yi ] + inc(zi)];\n    bbb = p[p[p[inc(xi)] + inc(yi)] + inc(zi)];\n\n    double x1, x2, y1, y2;\n\n    // The gradient function calculates the dot product between a\n    // pseudorandom gradient vector and the vector from the input\n    // coordinate to the 8 surrounding points in its unit cube.\n\n    // This is all then lerped together as a sort of weighted average\n    // based on the faded (u,v,w) values we made earlier.\n\n    x1 = lerp (\n        grad (aaa, xf  , yf  , zf),\n        grad (baa, xf-1, yf  , zf),\n        u);\n\n    x2 = lerp (\n        grad (aba, xf  , yf-1, zf),\n        grad (bba, xf-1, yf-1, zf),\n        u);\n\n    y1 = lerp (x1, x2, v);\n\n    x1 = lerp (\n        grad (aab, xf  , yf  , zf-1),\n        grad (bab, xf-1, yf  , zf-1),\n        u);\n\n    x2 = lerp (\n        grad (abb, xf  , yf-1, zf-1),\n        grad (bbb, xf-1, yf-1, zf-1),\n        u);\n\n    y2 = lerp (x1, x2, v);\n\n    auto result = (lerp (y1, y2, w) + 1) / 2;\n\n    assert (0 &lt;= result);\n    assert (result &lt;= 1);\n    assert (false == std :: isnan (result));\n\n    return result;\n}\n</code></pre>\n\n<p>I generate a 2D image by fixing <code>z=0</code>. This a frequency of 10 so x,y are in [0..10]:</p>\n\n<p><a href=\"https://i.stack.imgur.com/qWQ7H.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qWQ7H.png\" alt=\"enter image description here\"></a></p>\n\n<p>My 2D version:</p>\n\n<pre><code>double grad (unsigned hash, double x, double y)\n{\n    double u = (hash &amp; 1) ? x : y;\n\n    double v = (hash &amp; 2) ? x : y;\n\n    return ((hash &amp; 4) ? u : -u) + (hash &amp; 8) ? v : -v;\n}\n\ndouble\nImprovedNoise :: noise (double x, double y)\n{\n    int xi = (int)x &amp; 255;\n    int yi = (int)y &amp; 255;\n\n    double xf = x - (int) x;\n    double yf = y - (int) y;\n\n    double u = fade (xf);\n    double v = fade (yf);\n\n    int aaa, aba,baa, bba;\n\n    auto &amp; p = permutation;\n\n    aaa = p[p[    xi ] +     yi ];\n    aba = p[p[    xi ] + inc(yi)];\n    baa = p[p[inc(xi)] +     yi ];\n    bba = p[p[inc(xi)] + inc(yi)];\n\n    double x1, x2;\n\n    // The gradient function calculates the dot product between a\n    // pseudorandom gradient vector and the vector from the input\n    // coordinate to the 8 surrounding points in its unit cube.\n\n    // This is all then lerped together as a sort of weighted average\n    // based on the faded (u,v,w) values we made earlier.\n\n    x1 = lerp (\n        grad (aaa, xf  , yf),\n        grad (baa, xf-1, yf),\n        u);\n\n    x2 = lerp (\n        grad (aba, xf  , yf-1),\n        grad (bba, xf-1, yf-1),\n        u);\n\n    double result = (lerp (x1, x2, v) + 1) / 2;\n\n    assert (0 &lt;= result);\n    assert (result &lt;= 1);\n    assert (false == std :: isnan (result));\n\n    return result;\n}\n</code></pre>\n\n<p>Here is the image it generates.</p>\n\n<p><a href=\"https://i.stack.imgur.com/IYubm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IYubm.png\" alt=\"enter image description here\"></a></p>\n\n<p>It's generated using this method:</p>\n\n<pre><code>int size=400;\nint freq=10;\n\ncreate_widget (size, size, [&amp;] (int x, int y)\n{\n    return noise (x*freq / float (size), y*freq / float (size));\n});\n</code></pre>\n\n<p>What's causing those horizontal and vertical lines? I thought it might be an integer boundary issue, but that would predict <code>freq</code> artefacts across the whole image, so I guess it's something else.</p>\n\n<p>Can you see what the mistake is?</p>\n"}, {"tags": ["c++", "c++11", "templates", "template-specialization"], "answers": [{"comments": [{"owner": {"reputation": 1023, "user_id": 1947081, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0abfed788c885ecb97b6ee07e7b68f5f?s=128&d=identicon&r=PG", "display_name": "Croolman", "link": "https://stackoverflow.com/users/1947081/croolman"}, "edited": false, "score": 0, "creation_date": 1543422825, "post_id": 53523978, "comment_id": 93917042, "body": "Ahh, so close, yet so far at the same time."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 12, "last_activity_date": 1543422393, "creation_date": 1543422393, "answer_id": 53523978, "question_id": 53523928, "link": "https://stackoverflow.com/questions/53523928/one-template-specialization-for-several-enum-values/53523978#53523978", "title": "One template specialization for several enum values", "body": "<p>You should put the <code>enable_if</code> in an explicit specialization of <code>DataHolder</code> which matches the default one. The specialization will be chosen if the condition in the <code>enable_if</code> evaluates to <code>true</code>.</p>\n\n<pre><code>template &lt;Modes M, typename = void&gt;\nclass DataHolder\n{\n};\n\ntemplate&lt;Modes M&gt;\nclass DataHolder&lt;M, typename std::enable_if&lt;M == Modes::m1 || M == Modes::m2&gt;::type&gt;\n{\n    public: int a = 4;\n};\n\nint main()\n{   \n    DataHolder&lt;Modes::m1&gt; a; a.a;\n    DataHolder&lt;Modes::m3&gt; b; /* b.a; */\n}\n</code></pre>\n\n<p><a href=\"https://gcc.godbolt.org/z/rIZZeo\" rel=\"noreferrer\"><strong>live example on godbolt.org</strong></a></p>\n"}], "owner": {"reputation": 1023, "user_id": 1947081, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0abfed788c885ecb97b6ee07e7b68f5f?s=128&d=identicon&r=PG", "display_name": "Croolman", "link": "https://stackoverflow.com/users/1947081/croolman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 1, "accepted_answer_id": 53523978, "answer_count": 1, "score": 6, "last_activity_date": 1543422393, "creation_date": 1543422228, "question_id": 53523928, "link": "https://stackoverflow.com/questions/53523928/one-template-specialization-for-several-enum-values", "title": "One template specialization for several enum values", "body": "<p>Normally if I want to have a templated (data) class by enum I would write something like this</p>\n\n<pre><code>enum class Modes : int\n{\n    m1 = 1,\n    m2 = 2,\n    m3 = 3\n};\n\ntemplate &lt;Modes M&gt;\nclass DataHolder\n{\n};\n\ntemplate&lt;&gt;\nclass DataHolder&lt;Modes::m1&gt;\n{\n    public: int a = 4;\n};\n</code></pre>\n\n<p>Then if I want the same specialization for the <code>Modes::m1</code> as for the <code>Modes::m2</code> I would write the same specialization again. Is there a way to write one specialization for several enum values? I have tried it with SFINAE, but I am not succesfull.</p>\n\n<pre><code>template &lt;Modes M, typename = void&gt;\nclass DataHolder\n{\n};\n\ntemplate&lt;Modes M, typename = typename std::enable_if&lt;M == Modes::m1 || M == Modes::m2&gt;::type&gt;\nclass DataHolder\n{\n    public: int a = 4;\n};\n</code></pre>\n\n<p>This doesn't not compile. Especially, after I would like to carry on with different specialization for <code>Modes::m3</code>. I've tried many similiar solution found here on SO, but nothing seems to be solving the issue.</p>\n"}, {"tags": ["c++", "c", "sockets", "udp", "winsock"], "comments": [{"owner": {"reputation": 6588, "user_id": 10524386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe8a1950a1d7e1eccd4cff228c5420ea?s=128&d=identicon&r=PG", "display_name": "grapes", "link": "https://stackoverflow.com/users/10524386/grapes"}, "edited": false, "score": 0, "creation_date": 1543422081, "post_id": 53523822, "comment_id": 93916625, "body": "8304 or 8034? Maybe this is a problem?"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 1, "creation_date": 1543422100, "post_id": 53523822, "comment_id": 93916632, "body": "Your code binds to port 8034, not 8304. Also check that your bind() call succeeds. If it does, you might not be using &quot;packet sender&quot; correctly."}, {"owner": {"reputation": 116, "user_id": 10620492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e82cf6813a5d77475d81c6f63bd5b9?s=128&d=identicon&r=PG&f=1", "display_name": "HappyKeyboard", "link": "https://stackoverflow.com/users/10620492/happykeyboard"}, "edited": false, "score": 1, "creation_date": 1543425127, "post_id": 53523822, "comment_id": 93918333, "body": "check the return value of <code>bind</code>, and if it fails, <code>errno</code> is set.. you could print it for detailed debug info"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 116, "user_id": 10620492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e82cf6813a5d77475d81c6f63bd5b9?s=128&d=identicon&r=PG&f=1", "display_name": "HappyKeyboard", "link": "https://stackoverflow.com/users/10620492/happykeyboard"}, "edited": false, "score": 1, "creation_date": 1543465922, "post_id": 53523822, "comment_id": 93931724, "body": "@HappyKeyboard this is on Windows, so the error code is returned by <code>WSAGetLastError()</code>, not <code>errno</code>. But your point is valid."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1543466041, "post_id": 53523822, "comment_id": 93931756, "body": "@Alophind on a side note, <code>buffer</code> is not null-terminated, but you are treating it like it were. <code>recvfrom()</code> returns the number of bytes actually read, so change <code>cout &lt;&lt; buffer</code> to <code>cout.write(buffer, rc)</code>. Also, you should exit your code if any of the socket functions fail, but you are not doing that."}, {"owner": {"reputation": 812, "user_id": 837741, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/1S5NG.gif?s=128&g=1", "display_name": "Alophind", "link": "https://stackoverflow.com/users/837741/alophind"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1543476990, "post_id": 53523822, "comment_id": 93935508, "body": "@nos I&#39;ve noticed I did write 8304 and not 8034 but this was typo , It still didnt work"}, {"owner": {"reputation": 812, "user_id": 837741, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/1S5NG.gif?s=128&g=1", "display_name": "Alophind", "link": "https://stackoverflow.com/users/837741/alophind"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1543477274, "post_id": 53523822, "comment_id": 93935625, "body": "@RemyLebeau Can I just null terminate it using buffer[rc] = &#39;\\0&#39;; ? (my buffer size is +1 long than message size)"}, {"owner": {"reputation": 812, "user_id": 837741, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/1S5NG.gif?s=128&g=1", "display_name": "Alophind", "link": "https://stackoverflow.com/users/837741/alophind"}, "reply_to_user": {"reputation": 116, "user_id": 10620492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e82cf6813a5d77475d81c6f63bd5b9?s=128&d=identicon&r=PG&f=1", "display_name": "HappyKeyboard", "link": "https://stackoverflow.com/users/10620492/happykeyboard"}, "edited": false, "score": 0, "creation_date": 1543477610, "post_id": 53523822, "comment_id": 93935759, "body": "@HappyKeyboard Last error after bind is 0  , and I know the Packet sender is ok because I see when using Port Listenr on 8034 , that I get the ascii string"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 1, "creation_date": 1543482439, "post_id": 53523822, "comment_id": 93938121, "body": "You&#39;ve suppressed the error from recvfrom() (when rc &lt; 0), are you sure your recvfrom() call does not fail ?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1543501463, "post_id": 53523822, "comment_id": 93949197, "body": "@Alophind you <i>can</i> null-terminate the <code>buffer</code> (you would have to use <code>sizeof(buffer)-1</code> in <code>recvfrom()</code> to make sure you don&#39;t overwrite a valid byte read), but there is really no need to. If you null-terminate, you are making the system have to re-calculate the size you already have in <code>rc</code>. Best to use that size instead of ignore it"}], "owner": {"reputation": 812, "user_id": 837741, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/1S5NG.gif?s=128&g=1", "display_name": "Alophind", "link": "https://stackoverflow.com/users/837741/alophind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543477059, "creation_date": 1543421856, "last_edit_date": 1543477059, "question_id": 53523822, "link": "https://stackoverflow.com/questions/53523822/recvfrom-doesnt-get-any-udp-messages", "title": "recvfrom() doesn&#39;t get any UDP messages", "body": "<p>I'm trying to get UDP messages that are being sent from different applications on my machine.</p>\n\n<p>I created a socket and bind it to an address. When I send UDP messages using Packet Sender, nothing arrives. I tried disabling the firewall just to be sure, and still nothing happens.</p>\n\n<p>I send messages to 127.0.0.1 port 8034.</p>\n\n<p>I tried binding to both 127.0.0.1 and INADDR_ANY, neither work.</p>\n\n<p>This is the code I'm using to listen :</p>\n\n<pre><code>SOCKET SendSocket = INVALID_SOCKET;\nsockaddr_in RecvAddr, ClientAddr;\nWSADATA wsaData;\nstruct sockaddr_in serv, client;\nint l = sizeof(client);\nchar buffer[256];\n\nint iResult = WSAStartup(MAKEWORD(2, 2), &amp;wsaData);\nif (iResult != NO_ERROR) {\n    wprintf(L\"WSAStartup failed with error: %d\\n\", iResult);\n}\n\nSendSocket = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);\nif (SendSocket == INVALID_SOCKET) {\n    wprintf(L\"socket failed with error: %ld\\n\", WSAGetLastError());\n    WSACleanup();\n}\n\nClientAddr.sin_addr.S_un.S_addr = htonl(INADDR_ANY);\nClientAddr.sin_family = AF_INET;\nClientAddr.sin_port = htons(8034);\n\nbind(SendSocket, (struct sockaddr *) &amp;ClientAddr, sizeof(ClientAddr));\n\nbool valid = true;\n\nwhile( valid )\n{\n    //cout &lt;&lt; \"\\ngoing to recv\\n\";\n    int rc = recvfrom(SendSocket, buffer, sizeof(buffer), 0, (struct sockaddr *)&amp;client, &amp;l);\n    if (rc &lt; 0)\n    {\n        //cout &lt;&lt; \"ERROR READING FROM SOCKET\";\n    }\n    else\n    {\n        cout &lt;&lt; \"\\n the message received is : \" &lt;&lt; buffer &lt;&lt; endl;\n    }\n\n    DoPostDrawTask( valid );\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "sfinae"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1543421912, "post_id": 53523817, "comment_id": 93916523, "body": "Default template parameters are not part of template signature. So of these 3 templates first two have the same signature, while third one takes 3 template parameters."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1543421966, "post_id": 53523817, "comment_id": 93916546, "body": "Why not just have the overloads <code>void f(T*)</code>, <code>void f(T&amp;)</code>, and <code>void f(T)</code>?"}, {"owner": {"reputation": 1186, "user_id": 2934305, "user_type": "registered", "profile_image": "https://graph.facebook.com/1425206215/picture?type=large", "display_name": "Andreas Pasternak", "link": "https://stackoverflow.com/users/2934305/andreas-pasternak"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1543422233, "post_id": 53523817, "comment_id": 93916708, "body": "@NathanOliver: How do I do <code>void f(T&amp;&amp;)</code> as not forwarding reference? I mean I could do the whole process reverse but not sure if it makes things easier."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1543422457, "post_id": 53523817, "comment_id": 93916823, "body": "@AndreasPasternak See Pete Becker&#39;s answer"}, {"owner": {"reputation": 1186, "user_id": 2934305, "user_type": "registered", "profile_image": "https://graph.facebook.com/1425206215/picture?type=large", "display_name": "Andreas Pasternak", "link": "https://stackoverflow.com/users/2934305/andreas-pasternak"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1543422791, "post_id": 53523817, "comment_id": 93917028, "body": "@NathanOliver: You are right!"}], "answers": [{"comments": [{"owner": {"reputation": 1186, "user_id": 2934305, "user_type": "registered", "profile_image": "https://graph.facebook.com/1425206215/picture?type=large", "display_name": "Andreas Pasternak", "link": "https://stackoverflow.com/users/2934305/andreas-pasternak"}, "edited": false, "score": 0, "creation_date": 1543422256, "post_id": 53523845, "comment_id": 93916727, "body": "Great, this compiles. I&#39;ll accept if it also works as intended. Thank you so far!"}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 5, "last_activity_date": 1543429532, "last_edit_date": 1543429532, "creation_date": 1543421931, "answer_id": 53523845, "question_id": 53523817, "link": "https://stackoverflow.com/questions/53523817/select-function-based-on-if-template-is-pointer-reference-or-none/53523845#53523845", "title": "Select function based on if template is pointer/reference or none", "body": "<p>Template default argument values are not part of the signature, so you need to further disambiguate the overloads by - as an example - adding an extra dummy template parameter:</p>\n\n<pre><code>template&lt;class T,\n         class = typename std::enable_if_t&lt;std::is_reference&lt;T&gt;::value&gt;&gt;\nvoid f(T &amp;&amp; in)\n{}\n\n// This causes redefinition error \ntemplate&lt;class T,\n    class = typename std::enable_if_t&lt;std::is_pointer&lt;T&gt;::value&gt;, class = void&gt;\nvoid f(T &amp;&amp; in)\n{}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1186, "user_id": 2934305, "user_type": "registered", "profile_image": "https://graph.facebook.com/1425206215/picture?type=large", "display_name": "Andreas Pasternak", "link": "https://stackoverflow.com/users/2934305/andreas-pasternak"}, "edited": false, "score": 0, "creation_date": 1543422775, "post_id": 53523953, "comment_id": 93917017, "body": "How do I deal with const references and pointers? Do I not need an additional overload for those then aswell?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 1186, "user_id": 2934305, "user_type": "registered", "profile_image": "https://graph.facebook.com/1425206215/picture?type=large", "display_name": "Andreas Pasternak", "link": "https://stackoverflow.com/users/2934305/andreas-pasternak"}, "edited": false, "score": 0, "creation_date": 1543423014, "post_id": 53523953, "comment_id": 93917145, "body": "@AndreasPasternak -- you need overloads for whichever types you want to distinguish. This answer addresses the types you mentioned in your question and in your code."}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 10, "last_activity_date": 1543422294, "creation_date": 1543422294, "answer_id": 53523953, "question_id": 53523817, "link": "https://stackoverflow.com/questions/53523817/select-function-based-on-if-template-is-pointer-reference-or-none/53523953#53523953", "title": "Select function based on if template is pointer/reference or none", "body": "<p>The usual way is to provide appropriate overloads:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;class T&gt; void f(T&amp;&amp;) {\n    std::cout &lt;&lt; \"T&amp;&amp;\\n\";\n}\n\ntemplate &lt;class T&gt; void f(T*) {\n    std::cout &lt;&lt; \"T*\\n\";\n}\n\ntemplate &lt;class T&gt; void f(T&amp;) {\n    std::cout &lt;&lt; \"T&amp;\\n\";\n}\n\nint main() {\n    int i;\n    f(std::move(i));\n    f(&amp;i);\n    f(i);\n}\n</code></pre>\n\n<p>This produces the following output:</p>\n\n<pre><code>[temp]$ clang++ -std=c++11 test.cpp\n[temp]$ ./a.out\nT&amp;&amp;\nT*\nT&amp;\n[temp]$ \n</code></pre>\n"}], "owner": {"reputation": 1186, "user_id": 2934305, "user_type": "registered", "profile_image": "https://graph.facebook.com/1425206215/picture?type=large", "display_name": "Andreas Pasternak", "link": "https://stackoverflow.com/users/2934305/andreas-pasternak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 53523845, "answer_count": 2, "score": 4, "last_activity_date": 1543429532, "creation_date": 1543421836, "last_edit_date": 1543422312, "question_id": 53523817, "link": "https://stackoverflow.com/questions/53523817/select-function-based-on-if-template-is-pointer-reference-or-none", "title": "Select function based on if template is pointer/reference or none", "body": "<p>I would like to provide different implementations of a function dependant on if it is a pointer, a reference or a regular type. This is my code so far: </p>\n\n<pre><code>template&lt;class T,\n         class = typename std::enable_if_t&lt;std::is_reference&lt;T&gt;::value&gt;&gt;\nvoid f(T &amp;&amp; in)\n{}\n\n// This causes redefinition error \ntemplate&lt;class T,\n    class = typename std::enable_if_t&lt;std::is_pointer&lt;T&gt;::value&gt;&gt;\nvoid f(T &amp;&amp; in)\n{}\n\ntemplate&lt;class T,\n    class = typename std::enable_if_t&lt;!std::is_reference&lt;T&gt;::value&gt;,\n    class = typename std::enable_if_t&lt;!std::is_pointer&lt;T&gt;::value&gt;&gt;\nvoid f(T &amp;&amp; in)\n{}\n</code></pre>\n\n<p>The middle function causes:</p>\n\n<blockquote>\n  <p>12:13: error: redefinition of 'template void f(T&amp;&amp;)'</p>\n  \n  <p>7:13: note: 'template void f(T&amp;&amp;)' previously declared\n  here</p>\n</blockquote>\n\n<p>Funnily only the first and last function together compile.</p>\n\n<p>Any ideas how to fix it or simplify this code.</p>\n"}, {"tags": ["c++", "eigen"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1543421703, "post_id": 53523724, "comment_id": 93916390, "body": "This is expected. SuperLU uses dense matrices, SparseLU uses Sparse matrices, and you are using Sparse matrices. The two types you have are not compatible and cannot be converted from one to the other."}, {"owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 0, "creation_date": 1543440812, "post_id": 53523724, "comment_id": 93925625, "body": "<code>SparseLU</code> is a built-in rewrite of the external SuperLU solver, so better forget about SuperLU and stick with SparseLU."}], "owner": {"reputation": 1, "user_id": 10717883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/677ad875c6c0c61679c8eb1e570ff3b0?s=128&d=identicon&r=PG&f=1", "display_name": "kajezz", "link": "https://stackoverflow.com/users/10717883/kajezz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543421928, "creation_date": 1543421555, "last_edit_date": 1543421928, "question_id": 53523724, "link": "https://stackoverflow.com/questions/53523724/getting-matrixl-and-matrixu-from-eigensuperlu", "title": "Getting matrixL and matrixU from Eigen::SuperLU?", "body": "<p>I need to get matrices L and U from Eigen::SuperLU. The method matrixU() returns a UMatrixType. When I call this method, I get the following error </p>\n\n<blockquote>\n  <p>:cannot convert from <code>'Eigen::SparseMatrix&lt;std::complex&lt;double&gt;,0,int&gt;'</code> to <code>'const Eigen::TriangularView&lt;Eigen::SparseMatrix&lt;std::complex&lt;double&gt;,0,int&gt;,2&gt; &amp;'</code>. </p>\n</blockquote>\n\n<p>If I replace UMatrixType by LUMAtrixType in SuperLUSupport.h, everything compiles but the following code does not give the expected result. </p>\n\n<pre><code>using  SpMatc = Eigen::SparseMatrix&lt;std::complex&lt;double&gt;&gt;;\nEigen::MatrixXcd matDense = Eigen::MatrixXd::Identity(n, n);\nmatDense(13, 15) = std::complex&lt;double&gt;(5., 3.);\nmatDense(8, 11) = std::complex&lt;double&gt;(3., 9.);\nSpMatc mat = matDense.sparseView();\nEigen::VectorXcd b = Eigen::VectorXcd::Random(n);\nmat.makeCompressed();\nEigen::SuperLU&lt;SpMatc&gt; slu;\nslu.compute(mat);\nEigen::VectorXcd y = slu.solve(b);  \nconst auto&amp; matL = slu.matrixL();\nconst auto&amp; matU = slu.matrixU();\nauto permutationMatrixP = Eigen::PermutationMatrix&lt;Eigen::Dynamic&gt;(slu.permutationP());\nauto permutationMatrixQ = Eigen::PermutationMatrix&lt;Eigen::Dynamic&gt;(slu.permutationQ());\nEigen::VectorXcd res = permutationMatrixP*b;\nmatL.triangularView&lt;Eigen::Lower | Eigen::UnitDiag&gt;().solveInPlace(res);\nmatU.triangularView&lt;Eigen::Upper&gt;().solveInPlace(res);              \nEigen::VectorXcd finalRes = permutationMatrixQ.inverse() * res;         \nEigen::VectorXcd diff = finalRes - y;\nAssert::IsTrue(!finalRes.isApprox(y));\n</code></pre>\n\n<p>If I replace  Eigen::SuperLU by Eigen::SparseLU, the result is ok.</p>\n"}, {"tags": ["c++", "random", "std", "random-seed", "mersenne-twister"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 2, "creation_date": 1543421552, "post_id": 53523687, "comment_id": 93916286, "body": "Why do you expect them to generate the same numbers?"}, {"owner": {"reputation": 51325, "user_id": 474349, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/ZMmIm.png?s=128&g=1", "display_name": "Hong Ooi", "link": "https://stackoverflow.com/users/474349/hong-ooi"}, "edited": false, "score": 4, "creation_date": 1543421605, "post_id": 53523687, "comment_id": 93916324, "body": "As long as the same seed leads to the same sequence of <code>float</code>s, I don&#39;t see a problem"}, {"owner": {"reputation": 36542, "user_id": 104427, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2e852d4a44a1d795a9f207bcd30920bc?s=128&d=identicon&r=PG&f=1", "display_name": "Escualo", "link": "https://stackoverflow.com/users/104427/escualo"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1543421636, "post_id": 53523687, "comment_id": 93916339, "body": "@MaxLanghof because I&#39;m using the same algorithm with the same seed."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 6, "creation_date": 1543421664, "post_id": 53523687, "comment_id": 93916361, "body": "If float and double have different precision then the same transformation applied to them can result in different outcomes due to rounding error.  As long as each type always gives you the same sequence for the same seed your implementation is conforming."}, {"owner": {"reputation": 36542, "user_id": 104427, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2e852d4a44a1d795a9f207bcd30920bc?s=128&d=identicon&r=PG&f=1", "display_name": "Escualo", "link": "https://stackoverflow.com/users/104427/escualo"}, "reply_to_user": {"reputation": 51325, "user_id": 474349, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/ZMmIm.png?s=128&g=1", "display_name": "Hong Ooi", "link": "https://stackoverflow.com/users/474349/hong-ooi"}, "edited": false, "score": 0, "creation_date": 1543421697, "post_id": 53523687, "comment_id": 93916384, "body": "@HongOoi the problem is that I need to compare the same run with two precisions. Not just any valid run, but two runs using the same values (to within their precision)."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 2, "creation_date": 1543421701, "post_id": 53523687, "comment_id": 93916387, "body": "But it&#39;s a different output type. Surely you would not expect that a uniform random over ints would produce the same values as for doubles (which would obviously be impossible unless the random doubles are all required to be integers...). Same deal with <code>float</code> vs <code>double</code>..."}, {"owner": {"reputation": 36542, "user_id": 104427, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2e852d4a44a1d795a9f207bcd30920bc?s=128&d=identicon&r=PG&f=1", "display_name": "Escualo", "link": "https://stackoverflow.com/users/104427/escualo"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1543421878, "post_id": 53523687, "comment_id": 93916499, "body": "@MaxLanghof Sure, but it is unexpected to me that the difference between <code>float</code> and <code>double</code> is in more than the precision (same algorithm applied to floating point types)."}, {"owner": {"reputation": 36542, "user_id": 104427, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2e852d4a44a1d795a9f207bcd30920bc?s=128&d=identicon&r=PG&f=1", "display_name": "Escualo", "link": "https://stackoverflow.com/users/104427/escualo"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1543421972, "post_id": 53523687, "comment_id": 93916553, "body": "@NathanOliver agreed, but I think it is more than that. For example: the second <code>float</code> number is essentially the same as the first <code>double</code> and <code>long double</code>. That tells me that the story is not <i>only</i> precision  in this case."}, {"owner": {"reputation": 36542, "user_id": 104427, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2e852d4a44a1d795a9f207bcd30920bc?s=128&d=identicon&r=PG&f=1", "display_name": "Escualo", "link": "https://stackoverflow.com/users/104427/escualo"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1543422470, "post_id": 53523687, "comment_id": 93916833, "body": "@Fran&#231;oisAndrieux that&#39;s it. I failed to see the underlying reason which is precisely this one: the generator will yield as many bits as the distribution requires, and <code>float</code> will use half as many."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1543422567, "post_id": 53523687, "comment_id": 93916891, "body": "@Escualo Posted as an answer."}], "answers": [{"comments": [{"owner": {"reputation": 36542, "user_id": 104427, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2e852d4a44a1d795a9f207bcd30920bc?s=128&d=identicon&r=PG&f=1", "display_name": "Escualo", "link": "https://stackoverflow.com/users/104427/escualo"}, "edited": false, "score": 0, "creation_date": 1543422388, "post_id": 53523899, "comment_id": 93916781, "body": "Makes perfect sense. I guess I got it wrong (the other way around): the fact that <code>double</code> and <code>long double</code> are &quot;the same&quot; is a coincidence (due to the underlying higher precision of <code>double</code>). In general, I should <i>not</i> expect the same result."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 2, "creation_date": 1543422418, "post_id": 53523899, "comment_id": 93916799, "body": "I&#39;m not sure that truncating uniformly generated <code>long double</code>s to <code>float</code>s would end up with uniformly generated <code>float</code>s, so it could be the case that 2 <i>can&#39;t</i> be conforming. 1 certainly isn&#39;t"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1543422502, "post_id": 53523899, "comment_id": 93916857, "body": "@Caleth For variant 2 I meant that it throws away those bits, not that it uses them for extended precision + truncation. In other words, I mean that all distributions will advance their RNG state by the same amount for the sake of it (without any change in how many bits they actually use)."}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 8, "last_activity_date": 1543422559, "last_edit_date": 1543422559, "creation_date": 1543422131, "answer_id": 53523899, "question_id": 53523687, "link": "https://stackoverflow.com/questions/53523687/c-random-yields-different-numbers-for-same-mersenne-twister-seed-when-using-fl/53523899#53523899", "title": "C++ random yields different numbers for same Mersenne Twister seed when using float precision", "body": "<p>Each distribution will generate floating point numbers by grabbing a sufficient number of (pseudo)random bits from the underlying Mersenne Twister and then producing uniformly distributed floating point numbers from it.</p>\n\n<p>There are only two ways that an implementation could fulfill your expectation of \"same algorithm, therefore same results (minus precision)\":</p>\n\n<ol>\n<li><p><code>std::uniform_real_distribution&lt;long double&gt;(-1, 1)</code> is only as random as <code>std::uniform_real_distribution&lt;float&gt;(-1, 1)</code>. More to the point, the former has exactly as many possible outputs as the latter. If the latter can produce more different values than the former, then it needs to consume more bits of randomness from the underlying Mersenne Twister. If it cannot - well, what's the point of using it (and how would it still be \"uniform\")?</p></li>\n<li><p><code>std::uniform_real_distribution&lt;float&gt;(-1, 1)</code> consumes (and mostly discards) exactly as many bits of randomness from the underlying Mersenne Twister as <code>std::uniform_real_distribution&lt;long double&gt;(-1, 1)</code>. That would be very wasteful and inefficient.</p></li>\n</ol>\n\n<p>Since no sane implementation will do either of the above, <code>std::uniform_real_distribution&lt;long double&gt;(-1, 1)</code> will advance the underlying Mersenne Twister by more steps than <code>std::uniform_real_distribution&lt;float&gt;(-1, 1)</code> for each generated number. That will of course change the progression of the random numbers. This also explains why the <code>long double</code> and <code>double</code> variant are relatively close together: They share most of their random bits initially (whereas float likely requires a lot fewer bits and thus diverges quicker).</p>\n"}, {"tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 2, "last_activity_date": 1543422556, "creation_date": 1543422556, "answer_id": 53524033, "question_id": 53523687, "link": "https://stackoverflow.com/questions/53523687/c-random-yields-different-numbers-for-same-mersenne-twister-seed-when-using-fl/53524033#53524033", "title": "C++ random yields different numbers for same Mersenne Twister seed when using float precision", "body": "<p>Initializing a random number generator to a specific seed will specify the sequence of random bits it puts out. However, you aren't using those bits the same way in each case. A <code>std::uniform_real_distribution&lt;double&gt;</code> has a larger possibility space than <code>std::uniform_real_distribution&lt;float&gt;</code> (assuming <code>sizeof(double) &gt; sizeof(float)</code> on your platform) so it will need to consume a larger quantity of random bits to generate a fully uniform distribution.</p>\n\n<p>The first consequence is that the pseudo-random sequence of bits will have a different interpretation for different distribution types. The second consequence is each distribution moves a different number of bits down the pseudo-random sequence whenever is produces a value, meaning following numbers won't be at the same point in the pseudo-random bit sequence.</p>\n\n<p>The solution to your problem is to always use the same type of distribution. If you want to compare the result of using lower precision values with using higher precision values, only generate values with the highest precision and truncate them down when needed.</p>\n"}, {"tags": [], "owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "is_accepted": false, "score": 2, "last_activity_date": 1543439627, "creation_date": 1543439627, "answer_id": 53528181, "question_id": 53523687, "link": "https://stackoverflow.com/questions/53523687/c-random-yields-different-numbers-for-same-mersenne-twister-seed-when-using-fl/53528181#53528181", "title": "C++ random yields different numbers for same Mersenne Twister seed when using float precision", "body": "<p>Just to add to excellent @MaxLanghof answer with more specifics:</p>\n\n<p>For double code would do something like this - generate u64 integer, and use 53bits of it to make float, along the lines</p>\n\n<pre><code>double r = (u64 &gt;&gt; 11) * (1.0 / (uint64_t(1) &lt;&lt; 53));\n</code></pre>\n\n<p>For long double, assuming Intel 80bits format, with 64bit mantissa, it will do about the same, get 64bits, return back long double.</p>\n\n<pre><code>long double r = u64 * (1.0 / (uint64_t(1) &lt;&lt; 64)); // pseudocode\n</code></pre>\n\n<p>64bit of randomness are consumed in both cases, thus you see same values.</p>\n\n<p>In case of a float, 32bits are used to make single float</p>\n\n<pre><code>float r = (u32 &gt;&gt; 8) * (1.0f / (uint32_t(1) &lt;&lt; 24));\n</code></pre>\n\n<p>32bits of randomness are consumed, and another 32bits are used for next number, which together with endianness makes second float about the same as first double/long double.</p>\n\n<p>Link: <a href=\"http://xoshiro.di.unimi.it/\" rel=\"nofollow noreferrer\">http://xoshiro.di.unimi.it/</a></p>\n"}], "owner": {"reputation": 36542, "user_id": 104427, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2e852d4a44a1d795a9f207bcd30920bc?s=128&d=identicon&r=PG&f=1", "display_name": "Escualo", "link": "https://stackoverflow.com/users/104427/escualo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 0, "accepted_answer_id": 53523899, "answer_count": 3, "score": 9, "last_activity_date": 1543452292, "creation_date": 1543421440, "last_edit_date": 1543452292, "question_id": 53523687, "link": "https://stackoverflow.com/questions/53523687/c-random-yields-different-numbers-for-same-mersenne-twister-seed-when-using-fl", "title": "C++ random yields different numbers for same Mersenne Twister seed when using float precision", "body": "<p>I need to run reproducible Monte Carlo runs. That means I use a known seed that I store with my results, and use that seed if I need to run the same problem instance using the same random numbers. This is common practice.</p>\n\n<p>While investigating the effects of numeric precision, I ran into the following issue: For the same Mersenne Twister seed, <code>std::uniform_real_distribution&lt;float&gt;(-1, 1)</code> returns different numbers than <code>std::uniform_real_distribution&lt;double&gt;(-1, 1)</code> and <code>std::uniform_real_distribution&lt;long double&gt;(-1, 1)</code>, as the following example shows:</p>\n\n<pre><code>#include &lt;iomanip&gt;\n#include &lt;iostream&gt;\n#include &lt;random&gt;\n\ntemplate &lt; typename T &gt;\nvoid numbers( int seed ) {\n  std::mt19937                        gen( seed );\n  std::uniform_real_distribution&lt; T &gt; dis( -1, 1 );\n  auto p = std::numeric_limits&lt; T &gt;::max_digits10;\n  std::cout &lt;&lt; std::setprecision( p ) &lt;&lt; std::scientific &lt;&lt; std::setw( p + 7 )\n            &lt;&lt; dis( gen ) &lt;&lt; \"\\n\"\n            &lt;&lt; std::setw( p + 7 ) &lt;&lt; dis( gen ) &lt;&lt; \"\\n\"\n            &lt;&lt; std::setw( p + 7 ) &lt;&lt; dis( gen ) &lt;&lt; \"\\n\"\n            &lt;&lt; \"**********\\n\";\n}\n\nint main() {\n  int seed = 123;\n  numbers&lt; float &gt;( seed );\n  numbers&lt; double &gt;( seed );\n  numbers&lt; long double &gt;( seed );\n}\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>$ /usr/bin/clang++ -v\nApple LLVM version 10.0.0 (clang-1000.11.45.5)\nTarget: x86_64-apple-darwin18.2.0\nThread model: posix\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\n\n$ /usr/bin/clang++ bug.cpp -std=c++17\n$ ./a.out \n 3.929383755e-01\n 4.259105921e-01\n-4.277213216e-01\n**********\n 4.25910643160561708e-01\n-1.43058149942132062e-01\n 3.81769702875451866e-01\n**********\n 4.259106431605616525145e-01\n-1.430581499421320209545e-01\n 3.817697028754518623166e-01\n**********\n</code></pre>\n\n<p>As you can see, <code>double</code> and <code>long double</code> both start around at the same number (save precision differences) and continue yielding the same values. On the other hand, <code>float</code> starts off with a completely different number, and its second number is similar to the first number produced by <code>double</code> and <code>long double</code>.</p>\n\n<p>Do you see the same behavior in your compiler? Is there a reason for this unexpected (to me) discrepancy?</p>\n\n<h2>Approach</h2>\n\n<p>The responses make it clear that there's no reason to expect that values generated with different underlying precision will be the same.</p>\n\n<p>The approach that I'll take to generate reproducible runs will be to always generate values at the highest precision possible, and cast them to lower precision on demand (e.g., <code>float x = y</code>, where <code>y</code> is <code>double</code> or <code>long double</code>, as the case may be).</p>\n"}, {"tags": ["c++", "linear-programming", "cplex"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 8548014, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5Mqgwiskyvc/AAAAAAAAAAI/AAAAAAAAABg/J72BhnQCDLg/photo.jpg?sz=128", "display_name": "David Speck", "link": "https://stackoverflow.com/users/8548014/david-speck"}, "edited": false, "score": 0, "creation_date": 1543512566, "post_id": 53526672, "comment_id": 93955662, "body": "Thanks. This helps a lot :)"}], "tags": [], "owner": {"reputation": 4913, "user_id": 2280567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LA8CO.jpg?s=128&g=1", "display_name": "Ioannis", "link": "https://stackoverflow.com/users/2280567/ioannis"}, "is_accepted": true, "score": 0, "last_activity_date": 1543433023, "creation_date": 1543433023, "answer_id": 53526672, "question_id": 53523685, "link": "https://stackoverflow.com/questions/53523685/cplex-reduced-costs/53526672#53526672", "title": "CPLEX - Reduced Costs", "body": "<blockquote>\n  <p>I read that variables that are not part of the current solution can also have a reduced cost of zero if they are at one of their limits. Is that true?</p>\n</blockquote>\n\n<p>Yes. If the variables are not on their limits, then they have a reduced cost of zero. If they are at one of their limits they can still have a reduced cost of zero, in case multiple primal optimal solutions exist.</p>\n\n<p>Then, your problem can be seen as a flow problem on the following network:</p>\n\n<p><a href=\"https://i.stack.imgur.com/h97X5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h97X5.png\" alt=\"enter image description here\"></a></p>\n\n<p>Each arc represents the variable value of the node it enters (e.g., <code>1 = x0</code>). The optimal solution corresponds to the path <code>0-2-7-5-4-3</code>, which has a total cost of <code>3</code>. In case you force <code>x1</code> (or <code>x6</code>) equal to 1, then the solution will change to <code>x0=x1=x6=x5=x4=x3=1</code>.</p>\n\n<p>Now, dual values and shadow prices are meaningful only when the optimal basis remains the same. Forcing <code>x1=1</code> changes the optimal basis (because a different path is optimal) and therefore the corresponding dual values may not be meaningful.</p>\n\n<p>An alternative interpretation of the reduced cost is to think of it as the dual price of the non-negativity constraints (i.e., showing how much the objective function will increase in case one unit of a non-basic or zero-level basic variable is forced into the basis at level 1 - assuming non-negativity constraints). Again, its value may not be correct if this alteration changes the optimal basis.</p>\n\n<p>Since the reduced costs are the dual values of the corresponding non-negativity constraints, another experiment you can try is to add explicitly the non-negativity constraints as constraints and then check their dual values. For <code>x6&gt;=0</code> I get a dual value of 100 and an allowable increase of the right-hand-side = 1, while for <code>x1&gt;=0</code> I get a dual value of 0 and an allowable increase of the right-hand-side of 0. This, practically means that the dual value (which is the reduced cost in the case) is not meaningful.</p>\n\n<p>I hope this helps.</p>\n"}], "owner": {"reputation": 83, "user_id": 8548014, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5Mqgwiskyvc/AAAAAAAAAAI/AAAAAAAAABg/J72BhnQCDLg/photo.jpg?sz=128", "display_name": "David Speck", "link": "https://stackoverflow.com/users/8548014/david-speck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 634, "favorite_count": 0, "accepted_answer_id": 53526672, "answer_count": 1, "score": 2, "last_activity_date": 1543433023, "creation_date": 1543421429, "last_edit_date": 1543422356, "question_id": 53523685, "link": "https://stackoverflow.com/questions/53523685/cplex-reduced-costs", "title": "CPLEX - Reduced Costs", "body": "<p>I am currently working with cplex and am trying to determine the reduced cost of a LP. I am a little puzzled by the results. My current understanding of reduced cost is that it describes the amount by which a objective function coefficient must improve before a variable can be part of the solution (value = 1).</p>\n\n<p>Thus all basic variables ( non-zero in the solution) have reduced costs of zero. I read that variables that are not part of the current solution can also have a reduced cost of zero if they are at one of their limits. Is that true?</p>\n\n<p>The reduced cost of the following LP confuses me:</p>\n\n<pre><code>minimize 100*x1 + 3*x5\n0 &lt;= x0, x1, x2, x3, x4, x5, x6, x7, x8\nx0 = 1\nx0 - x1 - x2 = 0\nx3 = 1\nx3 - x4 = 0\nx1 - x6 = 0\nx2 - x7 = 0\n-x4 + x5 - x8 = 0\n-x5 + x6 + x7 + x8 = 0\n</code></pre>\n\n<p>If I use cplex to compute the reduced cost, I get the following result.</p>\n\n<pre><code>Objective Value = 3\nSolution = [1, 0, 1, 1, 1, 1, 0, 1, 0]\nReduced Cost = [0 0 0 0 0 0 100 0 3]\n</code></pre>\n\n<p>I don't understand why the variable x1 has reduced cost of zero, it is neither part of the solution nor is it at the upper limit. Should the reduced value of x1 not be 100 as for variable x7. If I increase the value of x1 by one, I get a solution that is 100 (cost) worse, right?</p>\n\n<p>Here, my C++ code:</p>\n\n<pre><code>#include &lt;ilcplex/ilocplex.h&gt;\n\nint main () {\n  IloEnv             env;\n  IloModel     model(env);\n  IloNumVarArray   x(env);\n  x.add(IloNumVar(env)); //default: between $0$ and $+\\infty$ \n  x.add(IloNumVar(env));\n  x.add(IloNumVar(env)); \n  x.add(IloNumVar(env));\n  x.add(IloNumVar(env)); \n  x.add(IloNumVar(env));\n  x.add(IloNumVar(env));\n  x.add(IloNumVar(env));\n  x.add(IloNumVar(env));\n  model.add(x[0] == 1);\n  model.add(x[0]-x[1]-x[2] == 0);\n  model.add(x[3] == 1);\n  model.add(x[3]-x[4] == 0);\n  model.add(x[1]-x[6] == 0);\n  model.add(x[2]-x[7] == 0);\n  model.add(-x[4]+x[5]-x[8] == 0);\n  model.add(-x[5]+x[6]+x[7]+x[8] == 0);\n  model.add(IloMinimize(env, 100*x[1] + 3*x[5]));\n  IloCplex cplex(model);\n  cplex.solve();\n  std::cout &lt;&lt; \"Min=\" &lt;&lt; cplex.getObjValue() &lt;&lt; std::endl;\n  IloNumArray v(env);\n  cplex.getReducedCosts(v, x);\n  std::cout &lt;&lt; v &lt;&lt; std::endl;\n  env.end();\n}\n</code></pre>\n"}, {"tags": ["c++", "class", "dll", "reference", "include"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1543421210, "post_id": 53523578, "comment_id": 93916074, "body": "You include headers. You don&#39;t include a dll."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1543421311, "post_id": 53523578, "comment_id": 93916127, "body": "is this really standard <code>c++</code> and not managed <code>c++</code> /CLR?"}], "answers": [{"comments": [{"owner": {"reputation": 889, "user_id": 3218162, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100003263097319/picture?type=large", "display_name": "Jacs", "link": "https://stackoverflow.com/users/3218162/jacs"}, "edited": false, "score": 0, "creation_date": 1543421140, "post_id": 53523592, "comment_id": 93916037, "body": "how to get the lib header?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 889, "user_id": 3218162, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100003263097319/picture?type=large", "display_name": "Jacs", "link": "https://stackoverflow.com/users/3218162/jacs"}, "edited": false, "score": 2, "creation_date": 1543421202, "post_id": 53523592, "comment_id": 93916069, "body": "That depends on the library... You can&#39;t restore it from the <code>.dll</code> alone, but the authors of the <code>.dll</code> probably provide it somewhere."}, {"owner": {"reputation": 889, "user_id": 3218162, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100003263097319/picture?type=large", "display_name": "Jacs", "link": "https://stackoverflow.com/users/3218162/jacs"}, "edited": false, "score": 0, "creation_date": 1543421286, "post_id": 53523592, "comment_id": 93916110, "body": "Can&#39;t i generate it from lib&#39;s project solution? There is no .h file in it."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1543421357, "post_id": 53523592, "comment_id": 93916154, "body": "You probably also need or at least want an import library if we are talking about standard <code>c++</code> and not CLR."}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 2, "last_activity_date": 1543421111, "creation_date": 1543421111, "answer_id": 53523592, "question_id": 53523578, "link": "https://stackoverflow.com/questions/53523578/reference-class-from-dll-in-cpp/53523592#53523592", "title": "Reference class from dll in cpp", "body": "<p>If you want to use objects from a library, you should include the headers for that library. These headers tell your compiler which objects (and functions) are available in the library.</p>\n"}], "owner": {"reputation": 889, "user_id": 3218162, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100003263097319/picture?type=large", "display_name": "Jacs", "link": "https://stackoverflow.com/users/3218162/jacs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1543421119, "creation_date": 1543421064, "last_edit_date": 1543421119, "question_id": 53523578, "link": "https://stackoverflow.com/questions/53523578/reference-class-from-dll-in-cpp", "title": "Reference class from dll in cpp", "body": "<p>Im new to cpp, and have a question. How do i reference a class inside a dll?</p>\n\n<pre><code>#include &lt;Interceptor.dll&gt;\n</code></pre>\n\n<p>This is how im including the file.</p>\n\n<p>Im using Interceptor.dll, and wish to use Input class from inside it.</p>\n"}, {"tags": ["c++", "cmake", "ide", "codelite"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1543421390, "post_id": 53523517, "comment_id": 93916179, "body": "&quot;it won&#39;t compile&quot; - so what exactly happens in this case&amp;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2083443"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1543421562, "post_id": 53523517, "comment_id": 93916294, "body": "@VTT It&#39;s simply won&#39;t compile. When I right click the (shared lib)project, and press Build. It simply won&#39;t do anything. And when I set the shared lib project as default project, and press Build on the top of the screen. The IDE just crashes."}], "owner": {"user_type": "does_not_exist", "display_name": "user2083443"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543421452, "creation_date": 1543420880, "last_edit_date": 1543421452, "question_id": 53523517, "link": "https://stackoverflow.com/questions/53523517/codelite-project-exported-from-cmake-doesnt-compile", "title": "CodeLite project exported from CMake doesn&#39;t compile", "body": "<p>I am using CMake to generate a workspace with projects for CodeLite.\nFor that I'm using <code>CMAKE_CODELITE_USE_TARGETS</code> to make sure it creates my projects into multiple CodeLite projects. Unfortunately, it doesn't work correctly. When I generate my project with the flag, multiple projects are created, like I want. But only executables compile. Meaning, if a project is suposed to output a executable, it compiles fine. But if the project output's a shared library, it won't compile.</p>\n\n<p>Now, when I disable my use target's flag mentioned above, it results in having only one project containing all targets, but it compiles file.(Shared and Executables are both compiled just fine)</p>\n\n<p>So for some reason, target's that compile to a shared library don't compile with the use_target's flag, but the do without it.</p>\n\n<p>Does anyone know what's the issue?</p>\n\n<p>Thanks!</p>\n\n<p>Edit:\nI DO need the multi_target's flag btw, without it, I can't debug my program as all executable will become one project.</p>\n\n<p>Edit2:\nSome clarification:\nWhen I right click the (shared lib)project, and press Build. It simply won't do anything. And when I set the shared lib project as default project, and press Build on the top of the screen. The IDE just crashes.</p>\n"}, {"tags": ["c++", "string", "class", "bitset"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 2, "creation_date": 1543420947, "post_id": 53523443, "comment_id": 93915890, "body": "You should overload <code>operator&lt;&lt;</code>"}, {"owner": {"reputation": 6588, "user_id": 10524386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe8a1950a1d7e1eccd4cff228c5420ea?s=128&d=identicon&r=PG", "display_name": "grapes", "link": "https://stackoverflow.com/users/10524386/grapes"}, "edited": false, "score": 0, "creation_date": 1543421421, "post_id": 53523443, "comment_id": 93916206, "body": "overloading operator const char*() will also work"}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1543465737, "post_id": 53523443, "comment_id": 93931691, "body": "How does one &quot;call&quot; an object?"}], "answers": [{"comments": [{"owner": {"reputation": 116, "user_id": 10620492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e82cf6813a5d77475d81c6f63bd5b9?s=128&d=identicon&r=PG&f=1", "display_name": "HappyKeyboard", "link": "https://stackoverflow.com/users/10620492/happykeyboard"}, "reply_to_user": {"reputation": 7130, "user_id": 10239789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YeHJm.png?s=128&g=1", "display_name": "TrebledJ", "link": "https://stackoverflow.com/users/10239789/trebledj"}, "edited": false, "score": 0, "creation_date": 1543422038, "post_id": 53523746, "comment_id": 93916595, "body": "made edits to the post, renamed bar to myString"}, {"owner": {"reputation": 7130, "user_id": 10239789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YeHJm.png?s=128&g=1", "display_name": "TrebledJ", "link": "https://stackoverflow.com/users/10239789/trebledj"}, "edited": false, "score": 0, "creation_date": 1543422346, "post_id": 53523746, "comment_id": 93916758, "body": "That makes it <code>foo.GetString()</code> then, that&#39;s the purpose of passing foo as an argument, no? Also I doubt <code>class Foo() {</code> will compile?"}], "tags": [], "owner": {"reputation": 116, "user_id": 10620492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e82cf6813a5d77475d81c6f63bd5b9?s=128&d=identicon&r=PG&f=1", "display_name": "HappyKeyboard", "link": "https://stackoverflow.com/users/10620492/happykeyboard"}, "is_accepted": false, "score": 0, "last_activity_date": 1543421881, "last_edit_date": 1543421881, "creation_date": 1543421629, "answer_id": 53523746, "question_id": 53523443, "link": "https://stackoverflow.com/questions/53523443/getting-string-from-class-object/53523746#53523746", "title": "Getting string from class object", "body": "<p>Its hard to answer this without seeing your code, but it sounds like you want to implement something like this</p>\n\n<pre><code>class Foo(){\n  public:\n  std::string GetString(){return myString;}\n  std::string SetString(std::string str){myString = str;}\n\n  friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Foo&amp; foo)\n  {\n    return os &lt;&lt; \"My String Is:\" &lt;&lt; GetString() &lt;&lt; \"\\n\";\n  }\n  private:\n  std::string myString;\n};\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 9782736, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yZvIYrmCbP0/AAAAAAAAAAI/AAAAAAAAAEE/Jena5V63bnc/photo.jpg?sz=128", "display_name": "Cow Nation", "link": "https://stackoverflow.com/users/9782736/cow-nation"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "closed_date": 1543702269, "answer_count": 1, "score": 0, "last_activity_date": 1543421881, "creation_date": 1543420682, "question_id": 53523443, "link": "https://stackoverflow.com/questions/53523443/getting-string-from-class-object", "closed_reason": "Duplicate", "title": "Getting string from class object", "body": "<p>I made a bitset based string class and it has it's own getstring function. How can I make it so that whenever I call the object, It will call that function then return the result. I want it like the actual string class where you can just do std::cout &lt;&lt; strobj; and it will just print the string. Currently whenever I call my bitstring object it requires a method. How do I make it like string's?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c++", "class", "insertion-sort"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1543420458, "post_id": 53523304, "comment_id": 93915543, "body": "use a <code>std::vector</code>. <code>new</code> without <code>delete</code> is a memory leak. <code>new</code> with <code>delete</code> is still a potential memory leak. You dont need any manual memory managment here"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1543420621, "post_id": 53523304, "comment_id": 93915670, "body": "<i>Now i have no idea how to sort them with InsertionSort.</i>  -- You didn&#39;t show any attempt, and we have no idea what type of help you are asking for (you&#39;re not asking a focused question).  Anyway <a href=\"https://stackoverflow.com/questions/24650626/how-to-implement-classic-sorting-algorithms-in-modern-c\">here is a link</a>."}], "answers": [{"tags": [], "owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "is_accepted": false, "score": 2, "last_activity_date": 1543421406, "last_edit_date": 1543421406, "creation_date": 1543420673, "answer_id": 53523440, "question_id": 53523304, "link": "https://stackoverflow.com/questions/53523304/insertion-sort-in-a-class/53523440#53523440", "title": "Insertion Sort in a Class?", "body": "<p>You can simply sort the array using the <code>sort</code> algorithm that you have in the standard library and provinding a custom sorting criteria. In the following for instance the sights are sorted by distance.</p>\n\n<pre><code>auto sort_criteria=[](const auto&amp; a, const auto&amp;b){\nreturn a.distance &lt; b.distance;\n};\n\nint main()\n    { \n      Tobekt *A = new Tobekt[n];\n      //read input\n       sort(A, A+n, sort_criteria);\n      //other stuff\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 2530357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vson0.jpg?s=128&g=1", "display_name": "K. Kiryu", "link": "https://stackoverflow.com/users/2530357/k-kiryu"}, "is_accepted": false, "score": 2, "last_activity_date": 1543421364, "creation_date": 1543421364, "answer_id": 53523666, "question_id": 53523304, "link": "https://stackoverflow.com/questions/53523304/insertion-sort-in-a-class/53523666#53523666", "title": "Insertion Sort in a Class?", "body": "<p><a href=\"https://en.wikipedia.org/wiki/Insertion_sort\" rel=\"nofollow noreferrer\">Insertion Sort</a>'s algorithm do not require a new array for sorting. The idea behind insertion sort is to loop through the array twice.</p>\n\n<ul>\n<li>First Loop is to loop through the \"unsorted\" elements in the array and pick the first \"unsorted\" element.</li>\n<li>Second Loop is to compare that element with the previous \"sorted\" elements - if its \"smaller\", move the element towards your start of the array index and repeat until it cannot be moved.</li>\n</ul>\n\n<p>You can visit this <a href=\"https://visualgo.net/bn/sorting\" rel=\"nofollow noreferrer\">link</a> to get a better visualization of how it works. As such, you may need a function that performs the comparison function. Something like...\n</p>\n\n<pre><code>bool SmallerDistance(const Tobekt&amp; lhs, const Tobekt&amp; rhs)\n{\n    return lhs.GetDistance() &lt; rhs.GetDistance();\n}\n</code></pre>\n\n<p>Of course, you would need to create getter function to get the distance from the class. Alternatively, you could always create the <code>operator&lt;</code> member function and compare with two variables.</p>\n\n<p>P.S. Do remember to delete A variable after you <code>new</code> or you will have memory leak for your program.</p>\n"}, {"tags": [], "owner": {"reputation": 846, "user_id": 10623338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YdJ7U.jpg?s=128&g=1", "display_name": "John Allison", "link": "https://stackoverflow.com/users/10623338/john-allison"}, "is_accepted": false, "score": 0, "last_activity_date": 1543423844, "creation_date": 1543423844, "answer_id": 53524383, "question_id": 53523304, "link": "https://stackoverflow.com/questions/53523304/insertion-sort-in-a-class/53524383#53524383", "title": "Insertion Sort in a Class?", "body": "<p>You might find the book of <a href=\"https://github.com/sagar9268/PPLAB/blob/master/Data%20Structures%20%26%20Algorithms%20in%20Java%20-%20Robert%20Lafore.pdf\" rel=\"nofollow noreferrer\">R. Lafore \"Algorithms &amp; Data Structures in Java\"</a> useful. There are two chapters on sorting algorithms including insertion sort with relevant code snippets. (It says Java, but the syntax in Java is close to C++, and there's a section in the book that discusses differences between the two languages.)</p>\n"}], "owner": {"reputation": 9, "user_id": 10717929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6bb9544b87af4664ae916bbf9118423?s=128&d=identicon&r=PG&f=1", "display_name": "StoyanG", "link": "https://stackoverflow.com/users/10717929/stoyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1543423844, "creation_date": 1543420214, "question_id": 53523304, "link": "https://stackoverflow.com/questions/53523304/insertion-sort-in-a-class", "title": "Insertion Sort in a Class?", "body": "<p>I'm a Cpp newbie and I have a question that i can't find an answer to it. So Im writing this program about Tourist sights using a class. Inside i have name of the sight, addres and distance from the city center. All i've done is the input and output. Now i have no idea how to sort them with InsertionSort. Do I need another array?\nI want to sort them by distance but have no idea how to write it.</p>\n\n<p>Here is what i have </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\nclass Tobekt {\n  private: string name;\n          string addres;\n          int distance;\n\n\n  public:\n    void input(void);\n    void output(void);\n}; \n\nvoid Tobekt::input(){\n\n   cout&lt;&lt;\"Landmark name: \";\n   getline(cin, name);\n   getline(cin, addres);\n   cout&lt;&lt;\"Addres: \"; \n    getline(cin, addres);\n    cout&lt;&lt;\"Distance from the city center:  \";\n    cin&gt;&gt;distance;\n}\nvoid Tobekt::output(){\n    cout&lt;&lt;endl;\n    cout&lt;&lt;\"Landmark name: \"&lt;&lt;name&lt;&lt;endl;\n   cout&lt;&lt;\"Addres: \"&lt;&lt;addres&lt;&lt;endl; \n    cout&lt;&lt;\"Distance from the city center: \"&lt;&lt;distance&lt;&lt;endl;\n\n}\n\nint main()\n    { \n    int n;\n    cout&lt;&lt;\"Tourist landmarks:\" ;\n    cin&gt;&gt;n;\n    Tobekt *A = new Tobekt[n];\n    for(int i=0; i&lt;n; i++)\n    {\n        A[i].input();\n    }\n    for(int i=0; i&lt;n; i++)\n    {\n        A[i].output();\n    }\n\nreturn 0;\n    }\n</code></pre>\n"}, {"tags": ["c++", "c++11", "templates", "variadic-templates", "stdbind"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1543420302, "post_id": 53523281, "comment_id": 93915439, "body": "Why not use a lambda? Way more straightforward."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1543420505, "post_id": 53523281, "comment_id": 93915580, "body": "Lambdas are your friend: <code>exec([&amp;](){ d.event&lt;Enum::a&gt;(uint16_t{}); });</code>"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1543420513, "post_id": 53523281, "comment_id": 93915586, "body": "I still sometimes wonder why it was not deprecated as the rest of the <code>*_function</code> were."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1543420599, "post_id": 53523281, "comment_id": 93915654, "body": "@MatthieuBrucher One &quot;reason&quot;: <a href=\"http://www.sdowney.org/2017/06/why-stdbind-cant-be-formally-deprecated/\" rel=\"nofollow noreferrer\">sdowney.org/2017/06/why-stdbind-cant-be-formally-deprecated</a>"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1543420628, "post_id": 53523281, "comment_id": 93915676, "body": "@NathanOliver Thanks for the link!"}, {"owner": {"reputation": 115, "user_id": 1715587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/413bcb7a5acbdc047d6198aa517060fe?s=128&d=identicon&r=PG", "display_name": "user1715587", "link": "https://stackoverflow.com/users/1715587/user1715587"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1543420735, "post_id": 53523281, "comment_id": 93915739, "body": "@NathanOliver That did the trick.  Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 0, "last_activity_date": 1543541535, "last_edit_date": 1543541535, "creation_date": 1543423857, "answer_id": 53524387, "question_id": 53523281, "link": "https://stackoverflow.com/questions/53523281/stdbind-and-variadic-template-function/53524387#53524387", "title": "std::bind and variadic template function", "body": "<p>I suggest to pass through a lambda function, as suggested in comments.</p>\n\n<p>Anyway, if you want to pass to <code>std::bind()</code>, seems to me that a possible solution is</p>\n\n<pre><code>// ..................................................VVVVVVVV  &lt;-- ad this\nexec(std::bind(static_cast&lt;void(Dispatch::*)(uint16_t const &amp;)&gt;\n     (&amp;Dispatch::event&lt;Enum::a, uint16_t const &amp;&gt;), &amp;d, uint16_t()));\n// ...........................^^^^^^^^^^^^^^^^^^  &lt;-- and this\n</code></pre>\n\n<p>I mean: you have to select the <code>event()</code> method explicating also the received type; I suggest <code>uint16_t const &amp;</code> (instead of <code>uint16_t</code>) that is compatible with universal reference signature of your <code>event()</code> method (I suppose other combinations are possible but for a <code>uint16_t</code> activate move semantics... I suppose it's superfluous).</p>\n"}], "owner": {"reputation": 115, "user_id": 1715587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/413bcb7a5acbdc047d6198aa517060fe?s=128&d=identicon&r=PG", "display_name": "user1715587", "link": "https://stackoverflow.com/users/1715587/user1715587"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1543541535, "creation_date": 1543420151, "last_edit_date": 1543423980, "question_id": 53523281, "link": "https://stackoverflow.com/questions/53523281/stdbind-and-variadic-template-function", "title": "std::bind and variadic template function", "body": "<p>Is this even possible?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nenum class Enum {a, b, c };\n\nclass Dispatch {\n    public:\n    void check(uint16_t) { std::cout &lt;&lt; \"check 16\\n\"; }\n    void check(uint32_t) { std::cout &lt;&lt; \"check 32\\n\"; }\n    void check(uint64_t) { std::cout &lt;&lt; \"check 64\\n\"; }\n\n    template&lt;Enum E, typename... A&gt;\n    void event(A&amp;&amp;... args) {\n        tag_event(Tag&lt;E&gt;(), std::forward&lt;A&gt;(args)...);\n    }\n\n    private:\n    template&lt;Enum E&gt; struct Tag {};    \n    void tag_event(Tag&lt;Enum::a&gt;, uint16_t) { std::cout &lt;&lt; \"a\\n\"; }\n    void tag_event(Tag&lt;Enum::b&gt;, uint16_t) { std::cout &lt;&lt; \"b\\n\"; }\n    void tag_event(Tag&lt;Enum::c&gt;, uint16_t) { std::cout &lt;&lt; \"c\\n\"; }\n};\n\nvoid exec(std::function&lt;void()&gt;&amp;&amp; func) { func(); }\n\nint main() {\n    Dispatch d;\n\n    // all good    \n    exec(std::bind(static_cast&lt;void(Dispatch::*)(uint16_t)&gt;(&amp;Dispatch::check), &amp;d, uint16_t()));\n    exec(std::bind(static_cast&lt;void(Dispatch::*)(uint32_t)&gt;(&amp;Dispatch::check), &amp;d, uint32_t()));\n    exec(std::bind(static_cast&lt;void(Dispatch::*)(uint64_t)&gt;(&amp;Dispatch::check), &amp;d, uint64_t()));\n\n    // all good\n    d.event&lt;Enum::a&gt;(uint16_t());\n    d.event&lt;Enum::b&gt;(uint16_t());\n    d.event&lt;Enum::c&gt;(uint16_t());\n\n    // but how do we bind an event&lt;&gt; call?\n    exec(std::bind(static_cast&lt;void(Dispatch::*)(uint16_t)&gt;(&amp;Dispatch::event&lt;Enum::a&gt;), &amp;d, uint16_t()));\n}\n</code></pre>\n\n<p>So I'm trying to bind a call to the variadic template method but get the following compiler error...</p>\n\n<pre><code>In function 'int main()':\n42:86: error: no matches converting function 'event' to type 'void (class Dispatch::*)(uint16_t) {aka void (class Dispatch::*)(short unsigned int)}'\n13:10: note: candidate is: template&lt;Enum E, class ... A&gt; void Dispatch::event(A&amp;&amp; ...)\n</code></pre>\n\n<p>Any suggestions short of exposing all the tag overloads instead?</p>\n"}, {"tags": ["c++", "c++11", "lambda", "g++", "compiler-bug"], "comments": [{"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1543422089, "post_id": 53523073, "comment_id": 93916627, "body": "The code looks well formed. Are you sure you ran the exact same source with different optimisation options?"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1543426542, "post_id": 53523073, "comment_id": 93919113, "body": "On x86_64 this code works as expected with and without optimizations."}, {"owner": {"reputation": 33, "user_id": 5779031, "user_type": "registered", "profile_image": "https://graph.facebook.com/1295734753776746/picture?type=large", "display_name": "Jeunder", "link": "https://stackoverflow.com/users/5779031/jeunder"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 2, "creation_date": 1543426959, "post_id": 53523073, "comment_id": 93919317, "body": "I think this issue only existed on specific version and specific architecture of g++ compiler"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1543427374, "post_id": 53523073, "comment_id": 93919496, "body": "Yes, it is a compiler bug."}], "owner": {"reputation": 33, "user_id": 5779031, "user_type": "registered", "profile_image": "https://graph.facebook.com/1295734753776746/picture?type=large", "display_name": "Jeunder", "link": "https://stackoverflow.com/users/5779031/jeunder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 199, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1543428809, "creation_date": 1543419475, "last_edit_date": 1543428809, "question_id": 53523073, "link": "https://stackoverflow.com/questions/53523073/compiler-bug-lambda-capture-behavior-affected-by-gcc-optimization-level", "title": "Compiler bug? Lambda capture behavior affected by GCC optimization level", "body": "<pre><code>#include &lt;functional&gt;\n#include &lt;stdio.h&gt;\n\nint main()\n{\n    std::function&lt;void(int)&gt; func;\n    int capture = 1234;\n\n    printf(\"outside capture=%d\\n\", capture);\n\n    if (capture) {\n        func =\n            [capture](int x) {\n                printf(\"inside capture=%d\\n\", capture);\n            };\n\n        func(0);\n    }\n}\n</code></pre>\n\n<p>Compile (with -Os, -O2 or -O3) and execute it, result is</p>\n\n<pre><code>outside capture=1234\ninside capture=67213\n</code></pre>\n\n<p>Compile with -O1 or without -O?, the result is (this is what I expect)</p>\n\n<pre><code>outside capture=1234\ninside capture=1234\n</code></pre>\n\n<p>Is there any thing wrong? I doubt this is compiler or C++ standard library bug.\nCould you give me some comments?</p>\n\n<pre><code>$ gcc-linaro-6.1.1-2016.08-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf-g++ -v\nUsing built-in specs.\nCOLLECT_GCC=/opt/arm/gcc-linaro-6.1.1-2016.08-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf-g++\nCOLLECT_LTO_WRAPPER=/opt/arm/gcc-linaro-6.1.1-2016.08-x86_64_arm-linux-gnueabihf/bin/../libexec/gcc/arm-linux-gnueabihf/6.1.1/lto-wrapper\nTarget: arm-linux-gnueabihf\nConfigured with: /home/tcwg-buildslave/workspace/tcwg-make-release/label/docker-trusty-amd64-tcwg/target/arm-linux-gnueabihf/snapshots/gcc-linaro-6.1-2016.08/configure SHELL=/bin/bash --with-mpc=/home/tcwg-buildslave/workspace/tcwg-make-release/label/docker-trusty-amd64-tcwg/target/arm-linux-gnueabihf/_build/builds/destdir/x86_64-unknown-linux-gnu --with-mpfr=/home/tcwg-buildslave/workspace/tcwg-make-release/label/docker-trusty-amd64-tcwg/target/arm-linux-gnueabihf/_build/builds/destdir/x86_64-unknown-linux-gnu --with-gmp=/home/tcwg-buildslave/workspace/tcwg-make-release/label/docker-trusty-amd64-tcwg/target/arm-linux-gnueabihf/_build/builds/destdir/x86_64-unknown-linux-gnu --with-gnu-as --with-gnu-ld --disable-libstdcxx-pch --disable-libmudflap --with-cloog=no --with-ppl=no --with-isl=no --disable-nls --enable-c99 --enable-gnu-indirect-function --with-tune=cortex-a9 --with-arch=armv7-a --with-fpu=vfpv3-d16 --with-float=hard --with-mode=thumb --disable-multilib --enable-multiarch --with-build-sysroot=/home/tcwg-buildslave/workspace/tcwg-make-release/label/docker-trusty-amd64-tcwg/target/arm-linux-gnueabihf/_build/sysroots/arm-linux-gnueabihf --enable-lto --enable-linker-build-id --enable-long-long --enable-shared --with-sysroot=/home/tcwg-buildslave/workspace/tcwg-make-release/label/docker-trusty-amd64-tcwg/target/arm-linux-gnueabihf/_build/builds/destdir/x86_64-unknown-linux-gnu/arm-linux-gnueabihf/libc --enable-languages=c,c++,fortran,lto --enable-checking=release --disable-bootstrap --build=x86_64-unknown-linux-gnu --host=x86_64-unknown-linux-gnu --target=arm-linux-gnueabihf --prefix=/home/tcwg-buildslave/workspace/tcwg-make-release/label/docker-trusty-amd64-tcwg/target/arm-linux-gnueabihf/_build/builds/destdir/x86_64-unknown-linux-gnu\nThread model: posix\ngcc version 6.1.1 20160711 (Linaro GCC 6.1-2016.08) \n</code></pre>\n\n<p>This issue also can be verified on x86_64 by following shell commands</p>\n\n<pre><code>sudo apt-get -y install qemu-user\n\nwget https://releases.linaro.org/components/toolchain/binaries/6.1-2016.08/arm-linux-gnueabihf/gcc-linaro-6.1.1-2016.08-x86_64_arm-linux-gnueabihf.tar.xz\ntar -xf gcc-linaro-6.1.1-2016.08-x86_64_arm-linux-gnueabihf.tar.xz\n\ncat &lt;&lt;EOF &gt; test.cpp\n#include &lt;functional&gt;\n#include &lt;stdio.h&gt;\n\nint main()\n{\n    std::function&lt;void(int)&gt; func;\n    int capture = 1234;\n\n    printf(\"outside capture=%d\\n\", capture);\n\n    if (capture) {\n        func =\n            [capture](int x) {\n                printf(\"inside capture=%d\\n\", capture);\n            };\n\n        func(0);\n    }\n}\nEOF\n\ngcc-linaro-6.1.1-2016.08-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf-g++ -Os test.cpp\n\nqemu-arm gcc-linaro-6.1.1-2016.08-x86_64_arm-linux-gnueabihf/arm-linux-gnueabihf/libc/lib/ld-linux-armhf.so.3 --library-path gcc-linaro-6.1.1-2016.08-x86_64_arm-linux-gnueabihf/arm-linux-gnueabihf/libc/lib ./a.out\n</code></pre>\n\n<p>The result is</p>\n\n<pre><code>outside capture=1234\ninside capture=-161318064\n</code></pre>\n"}, {"tags": ["c++", "c++11", "iterator", "std-pair", "stdtuple"], "comments": [{"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 1, "creation_date": 1543427728, "post_id": 53522784, "comment_id": 93919646, "body": "maybe isn&#39;t useful for you but... if you want to write a common code that works for <code>std::tuple</code> and <code>std::pair</code> (also <code>std::array</code>, if you want) you can use <code>std::get()</code> also for pairs; so, for a <code>p</code> object of a <code>std::pair</code> type, you can use <code>std::get&lt;0&gt;(p)</code> instead of <code>p.first</code>."}], "answers": [{"tags": [], "owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "is_accepted": false, "score": 1, "last_activity_date": 1543418828, "creation_date": 1543418828, "answer_id": 53522864, "question_id": 53522784, "link": "https://stackoverflow.com/questions/53522784/stdtuple-equivalent-of-stdpairs-second-member/53522864#53522864", "title": "std::tuple equivalent of std::pair&#39;s second member?", "body": "<p><code>std::find_if</code> returns an iterator to a pair, that's why you need to use the arrow operator <code>-&gt;</code>, which the iterator has overloaded to return a reference to the actual value for purposes of member access.</p>\n\n<p>Yes, <code>std::get&lt;1&gt;</code> for a tuple will do pretty much the same, but the syntax will be different:</p>\n\n<pre><code>auto it = std::find_if(...);\nreturn std::get&lt;1&gt;(*it);\n</code></pre>\n\n<p>You need to use the dereference operator <code>*</code> instead of the arrow operator, because <code>std::get</code> is a free function and not a tuple's member.</p>\n"}, {"comments": [{"owner": {"reputation": 319, "user_id": 10285454, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ujOOl9OdcSc/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaORtu402bSp43Awfk8ftcU4n5K4fw/mo/photo.jpg?sz=128", "display_name": "cherry aldi", "link": "https://stackoverflow.com/users/10285454/cherry-aldi"}, "edited": false, "score": 0, "creation_date": 1543421570, "post_id": 53522882, "comment_id": 93916302, "body": "many thanks for you explanation. I am reading about <code>std::find()</code>. I&#39;ve posted a second example in my original question following your advice however it is not correct, could you suggest what I&#39;ve done wrong? thank you"}, {"owner": {"reputation": 9649, "user_id": 1052261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4961b82d779d8b8119c69524f1a324cc?s=128&d=identicon&r=PG", "display_name": "Dawid Drozd", "link": "https://stackoverflow.com/users/1052261/dawid-drozd"}, "reply_to_user": {"reputation": 319, "user_id": 10285454, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ujOOl9OdcSc/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaORtu402bSp43Awfk8ftcU4n5K4fw/mo/photo.jpg?sz=128", "display_name": "cherry aldi", "link": "https://stackoverflow.com/users/10285454/cherry-aldi"}, "edited": false, "score": 0, "creation_date": 1543480176, "post_id": 53522882, "comment_id": 93936957, "body": "@cherryaldi I added fix for your second example. If it still doesn&#39;t work please give more information what isn&#39;t working ? Maybe add compilation errors."}], "tags": [], "owner": {"reputation": 9649, "user_id": 1052261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4961b82d779d8b8119c69524f1a324cc?s=128&d=identicon&r=PG", "display_name": "Dawid Drozd", "link": "https://stackoverflow.com/users/1052261/dawid-drozd"}, "is_accepted": false, "score": 1, "last_activity_date": 1543480096, "last_edit_date": 1543480096, "creation_date": 1543418914, "answer_id": 53522882, "question_id": 53522784, "link": "https://stackoverflow.com/questions/53522784/stdtuple-equivalent-of-stdpairs-second-member/53522882#53522882", "title": "std::tuple equivalent of std::pair&#39;s second member?", "body": "<p>Checkout documentation of <a href=\"http://www.cplusplus.com/reference/algorithm/find_if/\" rel=\"nofollow noreferrer\">std::find_if</a></p>\n\n<p>So <code>std::find_if</code> will return iterator. In code #1 it was <a href=\"http://www.cplusplus.com/reference/iterator/\" rel=\"nofollow noreferrer\">iterator</a> to pair, so <code>-&gt;second</code> will husk <code>second</code> element of <a href=\"https://en.cppreference.com/w/cpp/utility/pair\" rel=\"nofollow noreferrer\">std::pair</a>. You use <a href=\"http://www.cplusplus.com/reference/iterator/reverse_iterator/operator-%3E/\" rel=\"nofollow noreferrer\">-> overloaded operator for iterator</a>.</p>\n\n<p>Example:</p>\n\n<pre><code>auto it = std::find_if(args_.begin(), args_.end(),...);\nif(it != args_.end()) // This is important to NOT dereference iterator if it is pointing to end\n{\n    // also you can write (*it).second; (first use dereference operator)\n    return it-&gt;second;\n}\n// ...\n</code></pre>\n\n<p>So in you case you should refactor it to:</p>\n\n<pre><code>std::type_index argType(const std::string&amp; name) const\n{\n    // Please don't do so much in 1 line. Compiler will optimize this for you :)\n    // Please check for std::end, this is potential dangerous.\n    return std::get&lt;1&gt;(*std::find_if(args_.begin(), args_.end(),\n        [&amp;name](std::tuple&lt;std::string, std::type_index, Attribute&gt; arg)-&gt;bool\n        {\n            return std::get&lt;0&gt;(arg) == name;\n        }\n    ));\n}\n</code></pre>\n\n<p>Same example:</p>\n\n<pre><code>auto it = std::find_if(args_.begin(), args_.end(),...);\nif(it != args_.end()) // This is important to NOT dereference iterator if it is pointing to end\n{\n    return std::get&lt;1&gt;(*it);\n}\n// ...\n</code></pre>\n\n<hr>\n\n<p><strong>Important</strong></p>\n\n<p>Please also consider case when you don't find your element. <code>std::find_if</code> will return <code>std::end(args_)</code> if element you are looking for doesn't exist. So calling <code>-&gt;second</code> or <code>std::get&lt;1&gt;(*it)</code> <a href=\"https://stackoverflow.com/questions/26965621/behavior-when-dereferencing-the-end-of-a-vector-of-strings\">is undefinied behaviour</a> and can crush.</p>\n\n<hr>\n\n<p>Fix for <code>hasArg</code> function. Now you don't need dereference your iterator.</p>\n\n<pre><code>bool hasArg(const std::string&amp; name) const\n{\n    return std::find_if(std::begin(args_), std::end(args_),\n        [&amp;name](const std::tuple&lt;std::string, std::type_index, Attribute&gt;&amp; arg)-&gt;bool\n        {\n            return std::get&lt;0&gt;(arg) == name;\n        }\n    ) != std::end(args_);\n}\n</code></pre>\n\n<p>In this solution I used <a href=\"https://en.cppreference.com/w/cpp/iterator/begin\" rel=\"nofollow noreferrer\">std::begin</a> and <a href=\"https://en.cppreference.com/w/cpp/iterator/end\" rel=\"nofollow noreferrer\">std::end</a>. This is more uniwersal way instead calling <code>arg_.begin()</code> :)</p>\n\n<p>Please check how I ficed syntax of your second example. \nOne last thing, when you use <code>std::find_if</code> and lambda to find what you are looking for, argument should be <code>const&amp;</code> in most cases :), because we don't want to make a copy here.</p>\n"}], "owner": {"reputation": 319, "user_id": 10285454, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ujOOl9OdcSc/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaORtu402bSp43Awfk8ftcU4n5K4fw/mo/photo.jpg?sz=128", "display_name": "cherry aldi", "link": "https://stackoverflow.com/users/10285454/cherry-aldi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1543480970, "creation_date": 1543418571, "last_edit_date": 1543480970, "question_id": 53522784, "link": "https://stackoverflow.com/questions/53522784/stdtuple-equivalent-of-stdpairs-second-member", "title": "std::tuple equivalent of std::pair&#39;s second member?", "body": "<p>I'm converting this function to use <code>std::tuple</code> which does not have <code>first</code> and <code>second</code> memebers like <code>std:pair</code>.</p>\n\n<pre><code>std::type_index argumentType(const std::string&amp; name) const\n{\n    return std::find_if(args_.begin(), args_.end(),\n        [&amp;name](std::pair&lt;std::string, std::type_index&gt; arg)-&gt;bool\n        {\n            return arg.first == name;\n        }\n    )-&gt;second;\n}\n</code></pre>\n\n<p>I'm confused by the syntax <code>-&gt;second</code>, what is this doing? and is thre equivalent <code>std::get&lt;1&gt;(arg)</code></p>\n\n<pre><code>std::type_index argType(const std::string&amp; name) const\n{\n    return std::find_if(args_.begin(), args_.end(),\n        [&amp;name](std::tuple&lt;std::string, std::type_index, Attribute&gt; arg)-&gt;bool\n        {\n            return std::get&lt;0&gt;(arg) == name;\n        }\n    )std::get&lt;1&gt;(arg);\n</code></pre>\n\n<p>Example 2:</p>\n\n<p>std::pair</p>\n\n<pre><code>bool hasArg(const std::string&amp; name) const\n{\n    return std::find_if(args_.begin(), args_.end(),\n        [&amp;name](std::pair&lt;std::string, std::type_index&gt; arg)-&gt;bool\n        {\n            return arg.first == name;\n        }\n    ) != args_.end();\n}\n</code></pre>\n\n<p>std::tuple</p>\n\n<pre><code>bool hasArg(const std::string&amp; name) const\n{\n    return std::get&lt;0&gt;(*std::find_if(args_.begin(), args_.end(),\n        [&amp;name](std::tuple&lt;std::string, std::type_index, Attribute&gt; arg)-&gt;bool\n        {\n            return std::get&lt;0&gt;(arg) == name;\n        }\n    )) != args_.end();\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++17", "template-meta-programming", "constexpr"], "answers": [{"comments": [{"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 0, "creation_date": 1543419140, "post_id": 53522892, "comment_id": 93914597, "body": "Wow, such a silly mistake on my part! It seems that the type of <code>i</code> was <code>integral_constant</code>, not <code>int</code>?"}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "reply_to_user": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 0, "creation_date": 1543419182, "post_id": 53522892, "comment_id": 93914635, "body": "@VioletGiraffe yes, and the type itself is known at compile-time. see that I&#39;m not using the value of <code>i</code>"}, {"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 0, "creation_date": 1543419884, "post_id": 53522892, "comment_id": 93915141, "body": "Since <code>std::integral_constant&lt;int, I&gt;</code> is convertible to <code>int</code>, and the conversion function is <code>constexpr</code>, it should be possible to use <code>i</code> in place of <code>decltype(i)::value</code>."}, {"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 0, "creation_date": 1543420236, "post_id": 53522892, "comment_id": 93915394, "body": "Well <a href=\"https://wandbox.org/permlink/vxaHxxIjGFH7rU4F\" rel=\"nofollow noreferrer\">compilers accept <code>value_by_index&lt;i&gt;(values...)</code></a>, and that makes sense since the conversion function does not need to read the value of <code>i</code>."}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 4, "creation_date": 1543429212, "post_id": 53522892, "comment_id": 93920339, "body": "At first I didn&#39;t understand, but now I see what you did there. You&#39;ve converted the value (<code>int</code>) into a template type holding that value as a non-type template parameter. <code>std::integral_constant</code> conveniently provides such a wrapper for integer types; a custom holder template could be written for values of other kinds. A lambda doesn&#39;t see its value argument as <code>constexpr</code>, but it does see the specific type it&#39;s invoked with, and there&#39;s <code>constexpr</code> conversion from the type to the value it holds. Clever."}], "tags": [], "owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "is_accepted": true, "score": 7, "last_activity_date": 1543445182, "last_edit_date": 1543445182, "creation_date": 1543418937, "answer_id": 53522892, "question_id": 53522781, "link": "https://stackoverflow.com/questions/53522781/is-there-a-way-to-pass-a-constexpr-value-into-lambda-so-that-it-remains-const/53522892#53522892", "title": "Is there a way to pass a `constexpr` value into lambda so that it remains `constexpr` inside that lambda?", "body": "<p>Use a generic lambda and a constexpr conversion operator <a href=\"/questions/tagged/c%2b%2b17\" class=\"post-tag\" title=\"show questions tagged &#39;c++17&#39;\" rel=\"tag\">c++17</a>:</p>\n\n<pre><code>template &lt;typename... ValueTypes&gt;\nvoid traverse(ValueTypes... values)\n{\n    static_for&lt;0, sizeof...(ValueTypes)&gt;([&amp;](auto I)\n    //                                       ~~~^\n    {\n        auto v = value_by_index&lt;I&gt;(values...);\n        //                     ~^~\n        std::cout &lt;&lt; v &lt;&lt; std::endl;\n    });\n}\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/dawcx9tmsP5kdFbK\" rel=\"nofollow noreferrer\"><strong>DEMO</strong></a></p>\n\n<p>Use a template parameter list for the lambda expression <a href=\"/questions/tagged/c%2b%2b20\" class=\"post-tag\" title=\"show questions tagged &#39;c++20&#39;\" rel=\"tag\">c++20</a>:</p>\n\n<pre><code>template &lt;typename... ValueTypes&gt;\nvoid traverse(ValueTypes... values)\n{\n    static_for&lt;0, sizeof...(ValueTypes)&gt;([&amp;]&lt;int I&gt;(std::integral_constant&lt;int, I&gt;)\n    //                                       ~~~~^                             ~^~\n    {\n        auto v = value_by_index&lt;I&gt;(values...);\n        //                     ~^~\n        std::cout &lt;&lt; v &lt;&lt; std::endl;\n    });\n}\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/0Cz1bhiZ7d7du9Gl\" rel=\"nofollow noreferrer\"><strong>DEMO 2</strong></a></p>\n"}, {"comments": [{"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 0, "creation_date": 1543433944, "post_id": 53525988, "comment_id": 93922608, "body": "Interesting! I have to admit, I don&#39;t understand what <code>index_sequence</code> does and what it&#39;s for. Going to read on it."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 1, "creation_date": 1543434454, "post_id": 53525988, "comment_id": 93922855, "body": "@VioletGiraffe - <code>std::index_sequence</code>, and <code>std::make_index_sequence</code> that permit to generate sequences, are a very useful tool to works with variadic templates."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 4, "last_activity_date": 1543430200, "creation_date": 1543430200, "answer_id": 53525988, "question_id": 53522781, "link": "https://stackoverflow.com/questions/53522781/is-there-a-way-to-pass-a-constexpr-value-into-lambda-so-that-it-remains-const/53525988#53525988", "title": "Is there a way to pass a `constexpr` value into lambda so that it remains `constexpr` inside that lambda?", "body": "<p>It's too late to play?</p>\n\n<blockquote>\n  <p>Basically, I need a way to iterate values from parameter pack by index (the index part is important, even though it's not required in this example).</p>\n</blockquote>\n\n<p>Sorry but... what about the good old use of <code>std::make_index_sequence</code> and <code>std::index_sequence</code> ?</p>\n\n<p>Maintaining your <code>value_by_index()</code>, I propose the following C++14 solution based on <code>traverse()</code> with <code>traverse_helper()</code></p>\n\n<pre><code>template &lt;typename F, std::size_t ... Is, typename ... VTs&gt;\nvoid traverse_helper (F f, std::index_sequence&lt;Is...&gt;, VTs ... vs)\n { \n   using unused = int[];\n\n   (void)unused { 0, (f(value_by_index&lt;Is&gt;(vs...)), 0)... };\n }\n\ntemplate &lt;typename F, typename ... VTs&gt;\nvoid traverse (F f, VTs ... vs)\n { traverse_helper(f, std::make_index_sequence&lt;sizeof...(VTs)&gt;{}, vs...); }\n</code></pre>\n\n<p>Observe that I've passed also the callable as parameter.</p>\n\n<p>If you can use C++17 (as you tagged), <code>traverse_helper()</code> simply become</p>\n\n<pre><code>template &lt;typename F, std::size_t ... Is, typename ... VTs&gt;\nvoid traverse_helper (F f, std::index_sequence&lt;Is...&gt;, VTs ... vs)\n { (f(value_by_index&lt;Is&gt;(vs...)), ...); }\n</code></pre>\n\n<p>You can call <code>traverse()</code> as follows</p>\n\n<pre><code>traverse([](auto x){ std::cout &lt;&lt; x &lt;&lt; std::endl; },\n         0.0f, 1, 3.33, \"str\");\n</code></pre>\n\n<p>The following is a full C++14 compiling example</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;tuple&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;std::size_t I, typename ... As&gt;\nauto value_by_index (As &amp;&amp; ... as) noexcept\n { return std::get&lt;I&gt;(std::forward_as_tuple(std::forward&lt;As&gt;(as)...)); }\n\ntemplate &lt;typename F, std::size_t ... Is, typename ... VTs&gt;\nvoid traverse_helper (F f, std::index_sequence&lt;Is...&gt;, VTs ... vs)\n { \n   using unused = int[];\n\n   (void)unused { 0, (f(value_by_index&lt;Is&gt;(vs...)), 0)... };\n }\n\ntemplate &lt;typename F, typename ... VTs&gt;\nvoid traverse (F f, VTs ... vs)\n { traverse_helper(f, std::make_index_sequence&lt;sizeof...(VTs)&gt;{}, vs...); }\n\nint main ()\n {\n    traverse([](auto x){ std::cout &lt;&lt; x &lt;&lt; std::endl; },\n             0.0f, 1, 3.33, \"str\");\n }\n</code></pre>\n"}], "owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 1, "accepted_answer_id": 53522892, "answer_count": 2, "score": 5, "last_activity_date": 1543596937, "creation_date": 1543418557, "last_edit_date": 1543596937, "question_id": 53522781, "link": "https://stackoverflow.com/questions/53522781/is-there-a-way-to-pass-a-constexpr-value-into-lambda-so-that-it-remains-const", "title": "Is there a way to pass a `constexpr` value into lambda so that it remains `constexpr` inside that lambda?", "body": "<p>Here's what I want to do; posting the whole code because it's not too long and also to demonstrate the specific task I'm trying to solve. Basically, I need a way to iterate values from parameter pack by index (the index part is important, even though it's not required in this example).</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;tuple&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;int First, int Last, typename Functor&gt;\nconstexpr void static_for(Functor&amp;&amp; f)\n{\n    if constexpr (First &lt; Last)\n    {\n        f(std::integral_constant&lt;int, First&gt;{});\n        static_for&lt;First + 1, Last, Functor&gt;(std::forward&lt;Functor&gt;(f));\n    }\n}\n\ntemplate &lt;size_t index, typename... Args&gt;\nauto value_by_index(Args&amp;&amp;... args) noexcept {\n    return std::get&lt;index&gt;(std::forward_as_tuple(std::forward&lt;Args&gt;(args)...));\n}\n\ntemplate &lt;typename... ValueTypes&gt;\nvoid traverse(ValueTypes... values)\n{\n    static_for&lt;0, sizeof...(ValueTypes)&gt;([&amp;](int i) {\n        auto v = value_by_index&lt;static_cast&lt;size_t&gt;(i), ValueTypes...&gt;(values...);\n        std::cout &lt;&lt; v &lt;&lt; std::endl;\n    });\n}\n\nint main()\n{\n    traverse(0.0f, 1, 3.33, \"str\");\n\n    return 0;\n}\n</code></pre>\n\n<p>The compiler error, of course, is: </p>\n\n<pre><code>&lt;source&gt;:24:71: error: 'i' is not a constant expression\n</code></pre>\n\n<p>If lambdas could have explicit template arguments, <code>i</code> would be such an argument and it would be obvious to the compiler that it's known at compile time. But that's not how lambdas work.</p>\n\n<p>If you want to treat it as an X-Y problem, I suppose I don't specifically need to call a lambda inside my <code>static_for</code>, but I do need to call some piece of code that can access parameter pack(s) of <code>traverse</code> by index, and if <code>traverse</code> was a member function, I need to have access to its <code>this</code>.</p>\n\n<p>Try it online: <a href=\"https://godbolt.org/z/eW4rnm\" rel=\"nofollow noreferrer\">https://godbolt.org/z/eW4rnm</a></p>\n"}, {"tags": ["c++", "visual-studio", "linker"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 1, "creation_date": 1543418916, "post_id": 53522770, "comment_id": 93914447, "body": "at a guess an infinite loop in a static initialiser. We need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Have you tried debugging and hitting pause when the program hangs?"}, {"owner": {"reputation": 749, "user_id": 10663732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wNDF3.jpg?s=128&g=1", "display_name": "tomer zeitune", "link": "https://stackoverflow.com/users/10663732/tomer-zeitune"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1543422535, "post_id": 53522770, "comment_id": 93916870, "body": "@AlanBirtles Thank you very much you were right. infinite loop in a static initialiser. Just by hitting pause it took me a minute to debug the problem. it was an unexpected behavier from the debugging system it got itself into an infinite loop of error dispatching somehow. maybe make an answer so I could mark it as solved ?"}, {"owner": {"reputation": 1118, "user_id": 2191849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fOaLe.jpg?s=128&g=1", "display_name": "static_cast", "link": "https://stackoverflow.com/users/2191849/static-cast"}, "edited": false, "score": 0, "creation_date": 1543428253, "post_id": 53522770, "comment_id": 93919907, "body": "where is the code?"}], "answers": [{"tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": true, "score": 0, "last_activity_date": 1543422657, "creation_date": 1543422657, "answer_id": 53524057, "question_id": 53522770, "link": "https://stackoverflow.com/questions/53522770/visual-studio-cpp-no-entry/53524057#53524057", "title": "Visual Studio CPP No Entry", "body": "<p>You probably have an infinite loop in some static initialisation code.</p>\n\n<p>If you hit pause in the debugger it will show you where the problem lies.</p>\n"}], "owner": {"reputation": 749, "user_id": 10663732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wNDF3.jpg?s=128&g=1", "display_name": "tomer zeitune", "link": "https://stackoverflow.com/users/10663732/tomer-zeitune"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 53524057, "answer_count": 1, "score": 0, "last_activity_date": 1543422657, "creation_date": 1543418518, "last_edit_date": 1543418699, "question_id": 53522770, "link": "https://stackoverflow.com/questions/53522770/visual-studio-cpp-no-entry", "title": "Visual Studio CPP No Entry", "body": "<p>I'm writing a cpp app for some while now. A few hours into the day made a small change did a build to test it and to my surprise , the build executed and nothing happened , it didn't stop executing it had a process running.\nso I stopped it. and this is what I have tried.</p>\n\n<p>Restrating my PC- Same Result</p>\n\n<p>Making a breakpoint after the entry point. - Same Result </p>\n\n<p>breakpoint didn't even hit which makes me think that the entry point just does not work.</p>\n\n<p>Making a syntax error - it didn't compile and didn't run\nwhich means my program did compile and did run before.</p>\n\n<p>Completly undoing everything I did after the last running build - Same Result. it worked before but i guess not anymore</p>\n\n<p>Changing my entry point from WinMain to <code>int main()</code> -\ncmd window was created but no signs of code executing.</p>\n\n<p>Doing std::cout on the first line(with cmd window) - Same Result</p>\n\n<p>The only thing that worked was  commenting the whole file with the entry point and just writing :</p>\n\n<pre><code>    #include &lt;iostream&gt;\nint main() {\n    int i;\n    std::cout &lt;&lt; \"hello\";\n    std::cin &gt;&gt; i;\n}\n</code></pre>\n\n<p>Anyone knows what can make such a weird behavier ?</p>\n"}, {"tags": ["c++", "c++11", "templates", "typetraits", "overloading"], "comments": [{"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1543418572, "post_id": 53522743, "comment_id": 93914191, "body": "<i>&quot;because the compiler won&#39;t allow it&quot;</i>. As always, provide an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and the error message..."}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1543418629, "post_id": 53522743, "comment_id": 93914228, "body": "@VittorioRomeo presumably because enable if was put as a default value, which is not part of the signature, leading to redefinition"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1543418769, "post_id": 53522743, "comment_id": 93914347, "body": "Do you have C++17?"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1543418792, "post_id": 53522743, "comment_id": 93914365, "body": "@PiotrSkotnicki: sure, but the OP needs to put that in the question. We shouldn&#39;t have to do guesswork"}, {"owner": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1543419084, "post_id": 53522743, "comment_id": 93914564, "body": "@VittorioRomeo The compiler won&#39;t allow precisely because no compiler will accept function overloads with the same prototype. I&#39;ve edited the question."}, {"owner": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1543419112, "post_id": 53522743, "comment_id": 93914581, "body": "@MatthieuBrucher No, I&#39;m doing this with C++11"}], "answers": [{"comments": [{"owner": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "edited": false, "score": 0, "creation_date": 1543419792, "post_id": 53522876, "comment_id": 93915068, "body": "While this seems to work regarding overload/template resolution, if I call <code>arg.dim()</code> in the first overload when <code>arg</code> is of type <code>std::vector&lt;int&gt;</code>, it will result in a compilation error <code>has no member named dim()</code>, despite in such a case the second overload would be used, as <code>bool_verifier</code> would return <code>false</code>."}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "edited": false, "score": 0, "creation_date": 1543420027, "post_id": 53522876, "comment_id": 93915247, "body": "Also, that seems to be a separate issue. Please mark this as resolved, and post a new question with a proper MCVE + compiler error."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 2, "last_activity_date": 1543418872, "creation_date": 1543418872, "answer_id": 53522876, "question_id": 53522743, "link": "https://stackoverflow.com/questions/53522743/different-member-function-definition-according-to-compile-time-condition/53522876#53522876", "title": "Different member function definition according to compile-time condition", "body": "<blockquote>\n  <p>Alternatively, is there a way to call <code>bool_verifier&lt;T&gt;</code> from an <code>#if</code> precompiler conditional statement?</p>\n</blockquote>\n\n<p>Nope. The preprocessor runs before anything else, and doesn't have knowledge of C++ at all.</p>\n\n<hr>\n\n<p>You probably need to disambiguate between the two overloads with an extra template parameter (or by changing where <code>enable_if</code> appears), as default template parameter values are not part of the signature. The following works for me:</p>\n\n<pre><code>struct foo\n{\n     template &lt;typename T, typename = std::enable_if_t&lt;bool_verifier&lt;T&gt;{}&gt;&gt; \n     void a();\n\n     template &lt;typename T, typename = std::enable_if_t&lt;!bool_verifier&lt;T&gt;{}&gt;, typename = void&gt; \n     void a();\n};\n</code></pre>\n\n<p><a href=\"https://gcc.godbolt.org/z/T9HWSW\" rel=\"nofollow noreferrer\"><strong>live godbolt.org link</strong></a></p>\n"}], "owner": {"reputation": 1251, "user_id": 2340002, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a4aa312c9abc52b72636e9151f2d0e92?s=128&d=identicon&r=PG", "display_name": "joaocandre", "link": "https://stackoverflow.com/users/2340002/joaocandre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 53522876, "answer_count": 1, "score": 0, "last_activity_date": 1543435927, "creation_date": 1543418434, "last_edit_date": 1543435927, "question_id": 53522743, "link": "https://stackoverflow.com/questions/53522743/different-member-function-definition-according-to-compile-time-condition", "title": "Different member function definition according to compile-time condition", "body": "<p>As per <a href=\"https://stackoverflow.com/a/53338196/2340002\">this answer</a>, I've been using </p>\n\n<pre><code>template &lt;typename T,\n          typename = typename enable_if&lt;bool_verfier&lt;T&gt;()&gt;::type&gt; &gt;\nclassMember(const T&amp; arg);\n</code></pre>\n\n<p>As the function signature for several class members, where <code>bool_verifier&lt;T&gt;()</code> is a templated function that asserts that a particular class <code>T</code> fulfills certain requirements, with return type <code>constexpr bool</code>. This ensures a particular overload of <code>classMember(const T&amp; arg)</code> is only used for particular argument types, but it is not possible to do this when there are multiple overloads with the same prototype/argument signature, because the compiler won't allow it:</p>\n\n<pre><code>// ...\ntemplate &lt;typename T, typename = typename enable_if&lt;bool_verfier&lt;T&gt;()&gt;::type&gt; &gt;\nclassMember(const T&amp; arg);\ntemplate &lt;typename T,  typename = typename enable_if&lt;!(bool_verfier&lt;T&gt;())&gt;::type&gt;&gt;\nclassMember(const T&amp; arg);\n// ...\n</code></pre>\n\n<p>which causes the following compilation error: </p>\n\n<pre><code> \u2018template&lt;class T, class&gt; void myClass::classMember&lt;T&gt;(const T&amp;)\u2019\n cannot be overloaded with\n\u2018template&lt;class T, class&gt; void std::myClass&lt;T&gt;::classMember(const T&amp;)\u2019\n</code></pre>\n\n<p>If I need <code>classMember</code> to have different definitions according to whether or not <code>bool_verifier&lt;T&gt;()</code> returns true, what would be the correct syntax/member declaration? Alternatively, is there a way to call <code>bool_verifier&lt;T&gt;</code> from an <code>#if</code> precompiler conditional statement?</p>\n"}, {"tags": ["c++", "for-loop", "nullptr"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1543418525, "post_id": 53522733, "comment_id": 93914155, "body": "Use C++, no C: <code>std::vector&lt;std::unique_ptr&lt;Student&gt;&gt; classRosterArray(5);</code>"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1543418593, "post_id": 53522733, "comment_id": 93914202, "body": "BTW, your code doesn&#39;t delete the object, mine would. And then you can loop properly on the <code>size()</code>."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1543418831, "post_id": 53522733, "comment_id": 93914388, "body": "Use a <code>vector&lt;string&gt;</code>, or since your data has a key based on <code>studentID</code> (which is a std::string) maybe use a <code>map&lt;string, Student&gt;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10717881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3f56b59848e95c5198e41edff6c9284?s=128&d=identicon&r=PG&f=1", "display_name": "T Young", "link": "https://stackoverflow.com/users/10717881/t-young"}, "edited": false, "score": 0, "creation_date": 1543427926, "post_id": 53523258, "comment_id": 93919743, "body": "Thanks for your solution, it is far more elegant. I am a little lost in implementing it  for use in my other instances that used the original array could you help me understand it a little more? Thanks so much"}], "tags": [], "owner": {"reputation": 1178, "user_id": 1563037, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/vhb7A.png?s=128&g=1", "display_name": "gabry", "link": "https://stackoverflow.com/users/1563037/gabry"}, "is_accepted": true, "score": 1, "last_activity_date": 1543420066, "creation_date": 1543420066, "answer_id": 53523258, "question_id": 53522733, "link": "https://stackoverflow.com/questions/53522733/trying-to-loop-check-for-nullptr-c/53523258#53523258", "title": "Trying to loop check for Nullptr C++", "body": "<p>Problems with your code:</p>\n\n<ul>\n<li>You are using plain C arrays, they are harder to use and easier to break</li>\n<li>In your delete method you are not using \"delete\" to remove the object you have created with \"new\", so you are leaking every removed student.</li>\n<li>If you have more than 5 students your add method fails without any error report</li>\n<li>In a real program when you have a huge number of students iterate all of them for every \"add\" or \"remove\" operation is a big performance hit.</li>\n</ul>\n\n<p>This is how it should be written in modern C++:</p>\n\n<pre><code>map&lt;string, shared_ptr&lt;Student&gt; &gt; classRosterArray;\n\nvoid Roster::add(string studentID, string firstName, string lastName, string email, int age, int daysInCourse1, int daysInCourse2, int daysInCourse3, Degree degreeProgram)\n{\n  int courseDaysin[3] = { daysInCourse1, daysInCourse2, daysInCourse3 };\n  switch (degreeProgram) {\n     case NETWORKING:\n         classRosterArray[studentID] = std::shared_ptr&lt;Student&gt;(new NetworkStudent(age, courseDaysin, studentID, email, firstName, lastName, degreeProgram));\n         break;\n     case SECURITY:\n         classRosterArray[studentID] = shared_ptr&lt;Student&gt;(new SecurityStudent(age, courseDaysin, studentID, email, firstName, lastName, degreeProgram));\n         break;\n         /* [...] */\n     default:\n         classRosterArray[studentID] = shared_ptr&lt;Student&gt;(new Student(age, courseDaysin, studentID, email, firstName, lastName, degreeProgram));\n  }\n}\n\nvoid Roster::remove(string studentID)\n{\n    auto it = classRosterArray.find(studentID);\n    if (it != classRosterArray.end())\n        classRosterArray.erase(it);\n    else\n        cout &lt;&lt; \"ERROR: Student ID '\" &lt;&lt; studentID &lt;&lt; \"' was not found.\";\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10717881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3f56b59848e95c5198e41edff6c9284?s=128&d=identicon&r=PG&f=1", "display_name": "T Young", "link": "https://stackoverflow.com/users/10717881/t-young"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "accepted_answer_id": 53523258, "answer_count": 1, "score": -1, "last_activity_date": 1543427857, "creation_date": 1543418398, "last_edit_date": 1543427857, "question_id": 53522733, "link": "https://stackoverflow.com/questions/53522733/trying-to-loop-check-for-nullptr-c", "title": "Trying to loop check for Nullptr C++", "body": "<p>I am trying to figure out how to alternatively check if the pointer in the array is currently NULL and loop through. At the moment if the content in that part of the array is deleted it will throw an error when looping.</p>\n\n<p>This array is initialized: </p>\n\n<pre><code>Student *classRosterArray[5] = { nullptr, nullptr, nullptr, nullptr, nullptr };\n</code></pre>\n\n<p>The loop</p>\n\n<pre><code>void Roster::add(string studentID, string firstName, string lastName, string email, int age, int daysInCourse1, int daysInCourse2, int daysInCourse3, Degree degreeProgram)\n{\n    int courseDaysin[3] = { daysInCourse1, daysInCourse2, daysInCourse3 };\n\n    for (int i = 0; i &lt; sizeof(classRosterArray) / sizeof(classRosterArray[i]); i++) {\n        if (classRosterArray[i] == nullptr) {\n            if (degreeProgram == NETWORKING) {\n                classRosterArray[i] = new NetworkStudent(age, courseDaysin, studentID, email, firstName, lastName, degreeProgram);\n            }\n            else if (degreeProgram == SECURITY) {\n                classRosterArray[i] = new SecurityStudent(age, courseDaysin, studentID, email, firstName, lastName, degreeProgram);\n            }\n            else if (degreeProgram == SOFTWARE) {\n                classRosterArray[i] = new SoftwareStudent(age, courseDaysin, studentID, email, firstName, lastName, degreeProgram);\n            }\n            else {\n                classRosterArray[i] = new Student(age, courseDaysin, studentID, email, firstName, lastName, degreeProgram);\n            }\n\n            break;//stop \n        }\n    }\n}\n</code></pre>\n\n<p>When Deleted:</p>\n\n<pre><code>void Roster::remove(string studentID)\n{\n    bool studentRemoved = false;\n    for (int i = 0; i &lt; sizeof(classRosterArray) / sizeof(classRosterArray[i]); i++) {\n        if (classRosterArray[i] != nullptr &amp;&amp; classRosterArray[i]-&gt;fetchStudentId() == studentID) {\n            classRosterArray[i] = nullptr;\n            studentRemoved = true;\n            break;\n        }\n    }\n\n    if (studentRemoved == false) {\n        cout &lt;&lt; \"ERROR: Student ID '\" &lt;&lt; studentID &lt;&lt; \"' was not found.\";\n    }\n}\n</code></pre>\n\n<p><strong>Edited to add following code snippets</strong> with the previously suggested modifications how should I go about changing the following now that I am using the Map rather than my original array. Thanks for the help so far guys!</p>\n\n<pre><code>void Roster::printAll()\n{\n    for (int i = 0; i &lt; sizeof(classRosterArray) / sizeof(classRosterArray[i]); i++) {\n        classRosterArray[i]-&gt;print();\n    }\n}\n\nvoid Roster::printByDegreeProgram(int degreeProgram)\n{\n    for (int i = 0; i &lt; sizeof(classRosterArray) / sizeof(classRosterArray[i]); i++) {\n        if (classRosterArray[i]-&gt;fetchDegreeProgram() == degreeProgram) {\n            classRosterArray[i]-&gt;print();\n        }\n    }\n}\n\nvoid Roster::printDaysInCourse(string studentID)\n{\n    float avg = 0;\n    int max = 3;\n    for (int i = 0; i &lt; sizeof(classRosterArray) / sizeof(classRosterArray[i]); i++) {\n        if (classRosterArray[i] != nullptr &amp;&amp; classRosterArray[i]-&gt;fetchStudentId() == studentID) {\n            int *daysInCourse = classRosterArray[i]-&gt;fetchDaysInCourse();\n            for (int x = 0; x &lt; max; x++) {\n                avg += daysInCourse[x];\n            }\n\n            cout &lt;&lt; \"Student \" &lt;&lt; classRosterArray[i]-&gt;fetchStudentId() &lt;&lt; \"'s average number of days in each course is.\" &lt;&lt; (avg / max) &lt;&lt; \"\\n\";\n            break;\n        }\n    }\n}\n\nvoid Roster::printInvalidEmails()\n{\n    for (int i = 0; i &lt; sizeof(classRosterArray) / sizeof(classRosterArray[i]); i++) {\n        string email = classRosterArray[email]-&gt;fetchEmail();\n        bool isValid = false;\n\n        size_t found = email.find(\"@\");\n        if (found != string::npos) {\n            found = email.find(\".\");\n            if (found != string::npos) {\n                found = email.find(\" \");\n                if (found == string::npos) {\n                    isValid = true;\n                }\n            }\n        }\n\n        if (!isValid) {\n            cout &lt;&lt; email &lt;&lt; \" is not a valid email address \\n\";\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "math"], "comments": [{"owner": {"reputation": 3451, "user_id": 7016115, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e53D0.jpg?s=128&g=1", "display_name": "Shudipta Sharma", "link": "https://stackoverflow.com/users/7016115/shudipta-sharma"}, "edited": false, "score": 1, "creation_date": 1543418610, "post_id": 53522672, "comment_id": 93914218, "body": "Make clear about what you want."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1543418679, "post_id": 53522672, "comment_id": 93914274, "body": "Step through the code with a debugger.  That should make it clear what the code is doing when you enter various input."}, {"owner": {"reputation": 21, "user_id": 10717891, "user_type": "registered", "profile_image": "https://graph.facebook.com/2208578069382871/picture?type=large", "display_name": "geeccc", "link": "https://stackoverflow.com/users/10717891/geeccc"}, "edited": false, "score": 0, "creation_date": 1543418793, "post_id": 53522672, "comment_id": 93914367, "body": "So let me make it clear . If i put 3 in console then i have to put 3 more numbers for example 4,8 and 100 . And my code has to output the amount of numbers which are power of 2 , in this case 2"}, {"owner": {"reputation": 21, "user_id": 10717891, "user_type": "registered", "profile_image": "https://graph.facebook.com/2208578069382871/picture?type=large", "display_name": "geeccc", "link": "https://stackoverflow.com/users/10717891/geeccc"}, "edited": false, "score": 0, "creation_date": 1543418869, "post_id": 53522672, "comment_id": 93914415, "body": "I just want to count how many 2&#39;s power are there"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1543418984, "post_id": 53522672, "comment_id": 93914495, "body": "@geeccc Your code doesn&#39;t check if the number is a power of 2. Your code checks if the number can be divided by 2. Hence, it would count &quot;6&quot;, as a &quot;power of 2&quot;."}, {"owner": {"reputation": 21, "user_id": 10717891, "user_type": "registered", "profile_image": "https://graph.facebook.com/2208578069382871/picture?type=large", "display_name": "geeccc", "link": "https://stackoverflow.com/users/10717891/geeccc"}, "edited": false, "score": 0, "creation_date": 1543419127, "post_id": 53522672, "comment_id": 93914588, "body": "so could u write down what i exactly have to write to make my code work as i want ?"}, {"owner": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 0, "creation_date": 1543423452, "post_id": 53522672, "comment_id": 93917406, "body": "This code if(a%2==1) breaks out of the loop if the remainder after dividing by two is 1.  That sounds like an odd number to me."}], "answers": [{"tags": [], "owner": {"reputation": 3451, "user_id": 7016115, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e53D0.jpg?s=128&g=1", "display_name": "Shudipta Sharma", "link": "https://stackoverflow.com/users/7016115/shudipta-sharma"}, "is_accepted": true, "score": 4, "last_activity_date": 1543420013, "last_edit_date": 1543420013, "creation_date": 1543419072, "answer_id": 53522935, "question_id": 53522672, "link": "https://stackoverflow.com/questions/53522672/cpp-powers-of-2-algorothm/53522935#53522935", "title": "cpp powers of 2 algorothm", "body": "<p>You were missing some things:</p>\n\n<ul>\n<li>you were not taking inputs as you want.</li>\n<li>your counting procedure was wrong.</li>\n</ul>\n\n<p><strong>Soln:</strong></p>\n\n<ul>\n<li><p>If a number <code>n</code> is a 2's power, then the <code>and</code> operation of <code>n</code> and\n<code>n - 1</code> must be 0. And in all other cases, the result is not <code>0</code>. Say,</p>\n\n<pre><code>n = 4 (in binary it is 100)\nn - 1 = 3 (in binary it is 11)\nn &amp; (n - 1) = 0\n\n  100 (4)\n&amp; 011 (3)\n-----------\n  000 (0)\n</code></pre></li>\n<li><p>use this technique</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    int tests, a;\n    int counter = 0;\n    cin &gt;&gt; tests;\n    for (int i = 0; i &lt; tests; i++) \n    {\n        cin &gt;&gt; a;\n        if ((a &amp; (a - 1)) == 0)\n            counter = counter + 1;\n    }        \n    cout &lt;&lt; counter;\n    return 0;\n}\n</code></pre></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 2, "creation_date": 1543423421, "post_id": 53523064, "comment_id": 93917394, "body": "Could you expand on your answer? Rather than just posting the code explain what was wrong with the original code and what you changed to fix it."}], "tags": [], "owner": {"reputation": 56, "user_id": 9169946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k4Jnu.jpg?s=128&g=1", "display_name": "aeroyorch", "link": "https://stackoverflow.com/users/9169946/aeroyorch"}, "is_accepted": false, "score": 0, "last_activity_date": 1543486023, "last_edit_date": 1543486023, "creation_date": 1543419454, "answer_id": 53523064, "question_id": 53522672, "link": "https://stackoverflow.com/questions/53522672/cpp-powers-of-2-algorothm/53523064#53523064", "title": "cpp powers of 2 algorothm", "body": "<p>If you want to evaluate all inputs power of two, I would use a double as input in order to get those exponent less than zero (0.5, 0.25, etc.).</p>\n\n<p>With this aim, due to the fact that doubles are expressed in double-precision floating-point format (as defined in IEEE 754-2008 standard), you only should check that the normalized fraction got after descomposing the number with <strong>std::frexp</strong> (<a href=\"https://en.cppreference.com/w/cpp/numeric/math/frexp\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/numeric/math/frexp</a>) is equal to 0.5:</p>\n\n<pre><code>#include &lt;cmath&gt;\n\nbool isPowerOfTwo(double a)\n{\n    int exp;\n    return std::frexp(a, &amp;exp) == 0.5;\n}\n</code></pre>\n\n<p>Then the code:</p>\n\n<pre><code>#include &lt;cmath&gt;\n#include &lt;iostream&gt;\n\nbool isPowerOfTwo(double a)\n{\n    int exp;\n    return std::frexp(a, &amp;exp) == 0.5;\n}\n\nint main() {\n    unsigned counter = 0;\n\n    while (true) {\n        double input;\n        std::cin &gt;&gt; input;\n        if (!isPowerOfTwo(input)) {\n            break;\n        }\n        counter++;\n    }\n    std::cout &lt;&lt; \"Number of inputs power of 2: \" &lt;&lt; counter &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10717891, "user_type": "registered", "profile_image": "https://graph.facebook.com/2208578069382871/picture?type=large", "display_name": "geeccc", "link": "https://stackoverflow.com/users/10717891/geeccc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 53522935, "answer_count": 2, "score": 0, "last_activity_date": 1543486023, "creation_date": 1543418245, "last_edit_date": 1543418456, "question_id": 53522672, "link": "https://stackoverflow.com/questions/53522672/cpp-powers-of-2-algorothm", "title": "cpp powers of 2 algorothm", "body": "<p>so i want this code to be able to count the exact number of powers of 2 but it won't stop until i put odd number in console , any fixes to my code? Thanks a lot in advance<br>\nenter code here :</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main()\n{\n    int a;\n    int counter=0;\n    cin &gt;&gt; a;\n    while(true){\n        cin &gt;&gt; a;\n        if(a%2==1)\n            break;\n\n            a/=2;\n            counter=counter+1;  \n    }\n    cout &lt;&lt; counter;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "operator-overloading"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1543417805, "post_id": 53522468, "comment_id": 93913653, "body": "Related: <a href=\"https://stackoverflow.com/questions/4421706/what-are-the-basic-rules-and-idioms-for-operator-overloading\" title=\"what are the basic rules and idioms for operator overloading\">stackoverflow.com/questions/4421706/&hellip;</a>"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1543417829, "post_id": 53522468, "comment_id": 93913668, "body": "A class member <code>operator*</code> must take one parameter. If you have <code>calc operator*(T x)</code>, then you can write <code>c * 5</code> and that would be equivalent to <code>c.operator*(5)</code>. But that doesn&#39;t seem to be what you want. It&#39;s not in fact clear <i>what</i> it is you want, and how you believe overloaded operators would help you get there. Your question looks like an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problem</a>"}], "owner": {"reputation": 67, "user_id": 10607704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45b773acafd667f43d62866b80d3b634?s=128&d=identicon&r=PG&f=1", "display_name": "CrDS", "link": "https://stackoverflow.com/users/10607704/crds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "closed_date": 1543417908, "answer_count": 0, "score": 0, "last_activity_date": 1543417614, "creation_date": 1543417614, "question_id": 53522468, "link": "https://stackoverflow.com/questions/53522468/applying-operator-overloading", "closed_reason": "Duplicate", "title": "Applying operator overloading", "body": "<p>I have this following code that I would like to apply operator overloading to:</p>\n\n<pre><code>template &lt; class T&gt;\nclass calc\n{\npublic:\n\n    T multiply(T x, T y);\n    T add (T x, T y);\n};\n\ntemplate &lt; class T&gt;\nT calc&lt;T&gt;::multiply(T k1, T k2)\n{\n    return k1 * k2;\n}\n\ntemplate &lt; class T&gt;\nT calc&lt;T&gt;::add(T k1, T k2)\n{\n    return k1 + k2;\n}\n\nint main()\n{\n    calc&lt;int&gt; c;\n    std::cout &lt;&lt; c.multiply(1, 5);\n}\n</code></pre>\n\n<p>I have attempted to implement operator overloading, but I don't fully understand how to go about adapting it. </p>\n\n<p>This is my implementation below, but I have an error: E0344 too many parameters for this operator function (calc operator*(T x, T y);).</p>\n\n<pre><code>template &lt; class T&gt;\nclass calc\n{\npublic:\n    calc operator*(T x, T y);\n    calc operator+(T x, T y);\n};\n\ntemplate &lt; class T&gt;\ncalc&lt;T&gt; operator*(calc&lt;T&gt; const &amp;k1, calc&lt;T&gt; const &amp;k2)\n{   \n    return k1 * k2;\n}\n\ntemplate &lt; class T&gt;\ncalc&lt;T&gt; operator+(calc&lt;T&gt; const &amp;k1, calc&lt;T&gt; const &amp;k2)\n{\n    return k1 + k2;\n}\n\n\nint main()\n{\n\n    calc&lt;int&gt; c;\n    std::cout &lt;&lt; c.operator*(1, 5);\n\n}\n</code></pre>\n"}, {"tags": ["c#", "c++", "unity3d", "dll"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1543417024, "post_id": 53522241, "comment_id": 93913147, "body": "So what&#39;s the error message? All links are done at runtime, Windows and Linux, but on Windows, you get fully linked files, on Linux you may omit the check. You can add link flags to make sure you have everything."}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 0, "creation_date": 1543417352, "post_id": 53522241, "comment_id": 93913346, "body": "Also, are you using the same version of Unity on both Windows and Linux? They change the plugin interface periodically. It&#39;s not clear whether this is really a loading error, initialization or if the error is happening in your code."}], "owner": {"reputation": 604, "user_id": 4168176, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a185dafac089d7771daa6317c293c6?s=128&d=identicon&r=PG&f=1", "display_name": "BenjaFriend", "link": "https://stackoverflow.com/users/4168176/benjafriend"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543416901, "creation_date": 1543416901, "question_id": 53522241, "link": "https://stackoverflow.com/questions/53522241/cross-platform-native-c-dll-in-unity-builds-but-fails-at-runtime", "title": "Cross platform Native C++ DLL in Unity builds but fails at runtime", "body": "<p>I am currently working on creating a native, unmanaged C++ DLL for a Unity project. The DLL uses sockets, and I need it to be cross-platform with Unix based systems. </p>\n\n<p>Clearly I need to use <a href=\"https://docs.microsoft.com/en-us/windows/desktop/winsock/using-winsock\" rel=\"nofollow noreferrer\">WinSock</a> when on a Windows platform, and <a href=\"http://man7.org/linux/man-pages/man2/socket.2.html\" rel=\"nofollow noreferrer\">POSIX</a> sockets when on something like Linux.</p>\n\n<p>The Windows build runs fine from Unity with no problems. I can also <em>build</em> to Linux, but I get runtime errors when I actually try and use the Linux application. I <em>think</em> that this is because the DLL is linked at runtime, and the pre-processor checks I have for different platforms in my C++ code are not actually being re-compiled.</p>\n\n<p>I know that DLL's are Windows proprietary, so there has to be something going on where Unity can actually build with the DLL to Linux in the first place, right? Or is it just not giving me linker errors because I am compiling in a Windows environment, and it doesn't know any better? </p>\n\n<p>My thoughts are that I am going to need to build more than one DLL for my different target platforms. Then check which one to use in C# with some pre-precessor checks.\nMy problem with that is that it is going to make my code a bit of a mess, and I was hoping to abstract the platform checking stuff to C++ so that others can use this DLL more easily. </p>\n\n<p>If anyone has any insight on a direction to move forward in, it would be much appreciated! </p>\n"}, {"tags": ["c++", "qt", "qjson", "qjsonobject"], "comments": [{"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 1, "creation_date": 1543417066, "post_id": 53522200, "comment_id": 93913171, "body": "I believe you have to call <code>QJsonArray array = doc.array();</code> instead, because your top level object is an array."}, {"owner": {"reputation": 541, "user_id": 7559896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45ec66f72c97e2759cb0afa754b52432?s=128&d=identicon&r=PG&f=1", "display_name": "DEKKER", "link": "https://stackoverflow.com/users/7559896/dekker"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1543418457, "post_id": 53522200, "comment_id": 93914124, "body": "@vahancho That also gives 0 elemtns in the array"}], "answers": [{"tags": [], "owner": {"reputation": 12315, "user_id": 658031, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/711e76c263d03660772b5a5198d33671?s=128&d=identicon&r=PG", "display_name": "Saeid Yazdani", "link": "https://stackoverflow.com/users/658031/saeid-yazdani"}, "is_accepted": true, "score": 2, "last_activity_date": 1543420983, "creation_date": 1543420983, "answer_id": 53523554, "question_id": 53522200, "link": "https://stackoverflow.com/questions/53522200/converting-json-text-file-back-to-qjsonarray/53523554#53523554", "title": "Converting JSON text file back to QJsonArray", "body": "<p>Your objects does not have an identifier...so you need to access by position in the array. Something like this:</p>\n\n<pre><code>QJsonDocument doc = QJsonDocument::fromJson(raw.toUtf8());\nQJsonArray arr = doc.array(); // get array representation of the doc\n\nfor(int i = 0; i &lt; arr.size(); i++) {\n        QJsonValue val = arr.at(i);\n        // The following line should thoritically prin the Name field\n        qDebug() &lt;&lt; val.toObject().value(\"Name\");\n}\n</code></pre>\n"}], "owner": {"reputation": 541, "user_id": 7559896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45ec66f72c97e2759cb0afa754b52432?s=128&d=identicon&r=PG&f=1", "display_name": "DEKKER", "link": "https://stackoverflow.com/users/7559896/dekker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 423, "favorite_count": 0, "accepted_answer_id": 53523554, "answer_count": 1, "score": 1, "last_activity_date": 1543420983, "creation_date": 1543416765, "question_id": 53522200, "link": "https://stackoverflow.com/questions/53522200/converting-json-text-file-back-to-qjsonarray", "title": "Converting JSON text file back to QJsonArray", "body": "<p>I have an object that I serialize it into JSON using the code below (also see the the struct):</p>\n\n<pre><code>struct RegisterItem {\n    RegisterType Type = RegisterType::ReadWrite;\n    QString Name = QStringLiteral(\"REGISTER\");\n    int Bank = 0; \n    int Address = 0;\n    int Range = 1;\n    int DefaultValue = 0;\n    int CurrentValue = 0;\n    int SpecialAction = REG_SPECIAL_ACTION_NONE;\n};\n</code></pre>\n\n<p>This code converts it to json text file:</p>\n\n<pre><code>bool saveRegisterStateToFile(const QVector&lt;RegisterWidget*&gt;&amp; widgets)\n{\n    QJsonArray arr;\n\n    for(int i = 0; i &lt; widgets.size(); i++) {\n\n        RegisterItem item = widgets[i]-&gt;registerItem();\n        auto data = QJsonObject({\n\n                                    qMakePair(QString(\"Address\"), QJsonValue(item.Address)),\n                                    qMakePair(QString(\"Name\"), QJsonValue(item.Name)),\n                                    qMakePair(QString(\"Bank\"), QJsonValue(item.Bank)),\n                                    qMakePair(QString(\"Type\"), QJsonValue(static_cast&lt;int&gt;(item.Type))),\n                                    qMakePair(QString(\"DefaultValue\"), QJsonValue(item.DefaultValue)),\n                                    qMakePair(QString(\"SpecialAction\"), QJsonValue(item.SpecialAction))\n                                });\n        arr.push_back(data);\n    }\n\n    QFile file(\"json.txt\");\n    file.open(QFile::WriteOnly);\n    file.write(QJsonDocument(arr).toJson());\n}\n</code></pre>\n\n<p>This all works fine and produces the json file...it looks like this (first few lines):</p>\n\n<pre><code>[\n    {\n        \"Address\": 0,\n        \"Bank\": 0,\n        \"DefaultValue\": 0,\n        \"Name\": \"V_ADC_IN\",\n        \"SpecialAction\": 0,\n        \"Type\": 3\n    },\n    {\n        \"Address\": 1,\n        \"Bank\": 0,\n        \"DefaultValue\": 0,\n        \"Name\": \"V_ADC_SCALE\",\n        \"SpecialAction\": 0,\n        \"Type\": 3\n    },\n    {\n        \"Address\": 2,\n        \"Bank\": 0,\n</code></pre>\n\n<p>Now, I need to do the reverse...but my json object size is always 0! what is the problem?</p>\n\n<pre><code>QFile file(url);\n\nfile.open(QIODevice::ReadOnly | QIODevice::Text);\nQString raw = file.readAll();\nfile.close();\n\nQJsonDocument doc = QJsonDocument::fromJson(raw.toUtf8());\nQJsonObject obj = doc.object();\nQJsonArray arr = obj[\"\"].toArray();\n</code></pre>\n"}, {"tags": ["c++", "oop", "overwrite", "static-members"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1543416763, "post_id": 53522148, "comment_id": 93912967, "body": "You can only override <code>virtual</code> methods."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10567437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YyUSl.jpg?s=128&g=1", "display_name": "Noah Chai", "link": "https://stackoverflow.com/users/10567437/noah-chai"}, "edited": false, "score": 0, "creation_date": 1543482112, "post_id": 53522202, "comment_id": 93937949, "body": "Thank you for your help! Very helpful.The issue got solved succefully ;)"}], "tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": true, "score": 0, "last_activity_date": 1543416773, "creation_date": 1543416773, "answer_id": 53522202, "question_id": 53522148, "link": "https://stackoverflow.com/questions/53522148/trouble-overwriting-inherited-static-const-members/53522202#53522202", "title": "Trouble overwriting inherited static const members", "body": "<p>This cannot work.</p>\n\n<pre><code>    std::string type();\n</code></pre>\n\n<p>This is a fixed fucntion that will return <code>fruit</code> type. PEriod.</p>\n\n<p>If you want to do things your way, use virtual functions:</p>\n\n<pre><code>#include &lt;string&gt;\nclass fruit\n{\npublic:\n    virtual ~fruit() = default;\n    virtual const std::string&amp; type(); // (return _typeStr)\nprivate:\n    static const std::string _typeStr;\n}\nconst std::string fruit::_typeStr = \"fruit\";\nstd::string fruit::type()\n{\n    return _typeStr;\n}\nclass apple:public fruit\n{\npublic:\n    const std::string&amp; type() override; // (return _typeStr; will return apple::_typeStr)\nprivate:\n    static const std::string _typeStr;\n}\nconst std::string apple::_typeStr = \"apple\";\n</code></pre>\n\n<p>And implement the virtual functions to return the string of each class.</p>\n"}, {"comments": [{"owner": {"reputation": 703, "user_id": 9753452, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Michael Surette", "link": "https://stackoverflow.com/users/9753452/michael-surette"}, "edited": false, "score": 0, "creation_date": 1543420355, "post_id": 53523174, "comment_id": 93915465, "body": "Added main to my answer. Removed my erroneous comment. This will compile and run on its own."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1543420396, "post_id": 53523174, "comment_id": 93915497, "body": "Still why do you have spurious <code>;</code> after your functions? But indeed, otherwise valid solution that doesn&#39;t introduce virtual at the cost of a small additional memory usage."}, {"owner": {"reputation": 11, "user_id": 10567437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YyUSl.jpg?s=128&g=1", "display_name": "Noah Chai", "link": "https://stackoverflow.com/users/10567437/noah-chai"}, "edited": false, "score": 0, "creation_date": 1543482230, "post_id": 53523174, "comment_id": 93938009, "body": "Thanks for your help. However, I want the const value typeStr is resource of the class it self and not for each of its instance."}], "tags": [], "owner": {"reputation": 703, "user_id": 9753452, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Michael Surette", "link": "https://stackoverflow.com/users/9753452/michael-surette"}, "is_accepted": false, "score": 1, "last_activity_date": 1543420289, "last_edit_date": 1543420289, "creation_date": 1543419814, "answer_id": 53523174, "question_id": 53522148, "link": "https://stackoverflow.com/questions/53522148/trouble-overwriting-inherited-static-const-members/53523174#53523174", "title": "Trouble overwriting inherited static const members", "body": "<p>One option is to set the non-static variable _typeStr in the constructor.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nclass fruit\n{\npublic:\n    fruit()\n        : _typeStr(\"fruit\"){};\n    fruit(const char *type)\n        : _typeStr(type){};\n    std::string type();\n\nprotected:\n    const std::string _typeStr;\n};\n\nstd::string fruit::type()\n{\n    return _typeStr;\n}\n\nclass apple : public fruit\n{\npublic:\n    apple()\n        : fruit(\"apple\"){};\n};\n\nint main()\n{\n    apple a;\n    cout &lt;&lt; a.type() &lt;&lt; endl;\n    return 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10567437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YyUSl.jpg?s=128&g=1", "display_name": "Noah Chai", "link": "https://stackoverflow.com/users/10567437/noah-chai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 53522202, "answer_count": 2, "score": 0, "last_activity_date": 1543420289, "creation_date": 1543416577, "last_edit_date": 1543416856, "question_id": 53522148, "link": "https://stackoverflow.com/questions/53522148/trouble-overwriting-inherited-static-const-members", "title": "Trouble overwriting inherited static const members", "body": "<p>I have two classes. The base class is fruit,and the derived class is apple. I use type strings to identify the type of the classes.However,when I tried to access the type() function of an instance of class apple to get the return of its type string, I got the base class' type string \"fruit\" rather than \"apple\".What should I do to fix this?\nHere's my code:</p>\n\n<pre><code>#include &lt;string&gt;\nclass fruit\n{\npublic:\n    std::string type();\nprivate:\n    static const std::string _typeStr;\n}\nconst std::string fruit::_typeStr = \"fruit\";\nstd::string fruit::type()\n{\n    return _typeStr;\n}\nclass apple:public fruit\n{\nprivate:\n    static const std::string _typeStr;\n}\nconst std::string apple::_typeStr = \"apple\";\n</code></pre>\n\n<p>In file main.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"fruit.h\"\nint main()\n{\napple::apple a;\ncout&lt;&lt;a.type()&lt;&lt;endl;\nreturn 1;\n}\n</code></pre>\n\n<p>In outputs:</p>\n\n<pre><code>fruit\n</code></pre>\n"}, {"tags": ["c++", "oop", "inheritance", "constructor", "constructor-chaining"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1543416692, "post_id": 53522141, "comment_id": 93912928, "body": "You need to turn up your compiler warnings. <a href=\"http://coliru.stacked-crooked.com/a/a496b35caddac76b\" rel=\"nofollow noreferrer\">they would tell you something bad is happening</a>"}, {"owner": {"reputation": 97, "user_id": 10563898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/173e6d443139886ee61b6d2aa971af78?s=128&d=identicon&r=PG&f=1", "display_name": "Arturo", "link": "https://stackoverflow.com/users/10563898/arturo"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1543416764, "post_id": 53522141, "comment_id": 93912969, "body": "Ah I had a feeling that it&#39;s be something like this. Is there any way I can set the values base classes stats to equal to archer&#39;s stats when I call the constructor?"}, {"owner": {"reputation": 1110, "user_id": 5778465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xnd4J.jpg?s=128&g=1", "display_name": "snake_style", "link": "https://stackoverflow.com/users/5778465/snake-style"}, "edited": false, "score": 0, "creation_date": 1543416774, "post_id": 53522141, "comment_id": 93912975, "body": "you need to remove members damage...cost from Archer class."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1543417236, "post_id": 53522141, "comment_id": 93913270, "body": "@Arturo The constructor is specifically there to set the members. Just tell it the values to set."}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 10563898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/173e6d443139886ee61b6d2aa971af78?s=128&d=identicon&r=PG&f=1", "display_name": "Arturo", "link": "https://stackoverflow.com/users/10563898/arturo"}, "edited": false, "score": 0, "creation_date": 1543417241, "post_id": 53522182, "comment_id": 93913274, "body": "Thanks. I duplicated the members since doing it the way you mentioned makes it kind of unclear what each of the values I&#39;m passing in represent. Is the duplication still a bad thing to do in that case?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 97, "user_id": 10563898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/173e6d443139886ee61b6d2aa971af78?s=128&d=identicon&r=PG&f=1", "display_name": "Arturo", "link": "https://stackoverflow.com/users/10563898/arturo"}, "edited": false, "score": 0, "creation_date": 1543417364, "post_id": 53522182, "comment_id": 93913355, "body": "@Arturo - The duplicated ones are completely independent of the base classes members. They hold different values and have their own address inside the complete object. If you just want to name them meaningfully, I can edit a solution to that. A moment."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1543417475, "post_id": 53522182, "comment_id": 93913436, "body": "@StoryTeller Perhaps name those <code>constexpr</code> something else to avoid any confusion with the inherited members."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1543417529, "post_id": 53522182, "comment_id": 93913478, "body": "@Fran&#231;oisAndrieux - I don&#39;t find it confusing to be honest. The base class members are inaccessible anyway, and ultimately it&#39;s <code>Archer::damage</code> vs <code>Unit::damage</code>."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 7, "last_activity_date": 1543417434, "last_edit_date": 1543417434, "creation_date": 1543416694, "answer_id": 53522182, "question_id": 53522141, "link": "https://stackoverflow.com/questions/53522141/constructor-chaining-not-using-default-values-of-class-members/53522182#53522182", "title": "Constructor chaining not using default values of class members?", "body": "<p>This is a non-starter</p>\n\n<pre><code>class Archer: public Unit{\n    int damage = 25;\n    int range = 50;\n    int maxHp = 100;\n    int cost = 150;\n    int stepSize = 25;\n    int returnedCoins = 0;\npublic:\n    Archer():Unit(damage,maxHp,range,\n                  cost){};\n};\n</code></pre>\n\n<p>Bases are initialized <em>before</em> the members of your class. And speaking of which, you are duplicating the same members for no reason. Just pass those as arguments:</p>\n\n<pre><code>class Archer: public Unit{\n    int stepSize = 25;\n    int returnedCoins = 0;\npublic:\n    Archer():Unit(25,100,50,\n                  150){};\n};\n</code></pre>\n\n<p>If your goal was to just give those values meaningful names, you can make them static class constants:</p>\n\n<pre><code>class Archer: public Unit{\n    static constexpr int damage = 25;\n    static constexpr int range = 50;\n    static constexpr int maxHp = 100;\n    static constexpr int cost = 150;\n\n    int stepSize = 25;\n    int returnedCoins = 0;\npublic:\n    Archer():Unit(damage,maxHp,range,\n                  cost){};\n};\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 10563898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/173e6d443139886ee61b6d2aa971af78?s=128&d=identicon&r=PG&f=1", "display_name": "Arturo", "link": "https://stackoverflow.com/users/10563898/arturo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 53522182, "answer_count": 1, "score": 4, "last_activity_date": 1543417434, "creation_date": 1543416545, "question_id": 53522141, "link": "https://stackoverflow.com/questions/53522141/constructor-chaining-not-using-default-values-of-class-members", "title": "Constructor chaining not using default values of class members?", "body": "<p>I have two classes Unit and Archer. Archer inherits from unit. I tried to use constructor chaining to set the stats for the base class but the stats seem to be set to zero if I use the following code:</p>\n\n<pre><code>#include&lt;iostream&gt;\n\nusing namespace std;\n\nclass Unit{\n    int damage = 0;\n    int curHp = 0;\n    int maxHp = 1;\n    int range = 0;\n    int cost = 0;\n\npublic:\n    Unit(int _damage,int _maxHp,int _range,\n         int _cost){\n        damage = _damage;\n        curHp = maxHp = _maxHp;\n        range = _range;\n        cost = _cost;\n    }\n\n    int getCost(){\n        return cost;\n    }\n};\n\nclass Archer: public Unit{\n    int damage = 25;\n    int range = 50;\n    int maxHp = 100;\n    int cost = 150;\n    int stepSize = 25;\n    int returnedCoins = 0;\npublic:\n    Archer():Unit(damage,maxHp,range,\n                  cost){};\n};\n\nint main()\n{\n    Unit *curUnit =  new Archer();\n    cout&lt;&lt; curUnit-&gt;getCost()&lt;&lt;endl;;\n}\n</code></pre>\n\n<p>The output is 0.If I call Unit's construtor with a value instead of using cost(such as 25), I get the value instead I used. For some reason the base value I set in the archer class does not get used at all.</p>\n\n<p>Also, I'm kind of new to OOP so I think I might be doing this the wrong way. I'd be happy if someone could show me the proper way to do this.</p>\n"}, {"tags": ["c++", "unicode", "utf-8", "split", "stdstring"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1543416500, "post_id": 53522077, "comment_id": 93912800, "body": "Well, you need more than ascii characters for these characters to be handled properly, so using unicode/wstring may be the only option? Or are you using a 1-bye encoding?"}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 1, "creation_date": 1543416868, "post_id": 53522077, "comment_id": 93913049, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/40054732/c-iterate-utf-8-string-with-mixed-length-of-characters\">C++ iterate utf-8 string with mixed length of characters</a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1543457839, "post_id": 53522077, "comment_id": 93930109, "body": "Note: <code>for (auto iter : word) { characters.push_back(&amp;iter); }</code> does not do what you think it does.  <code>word</code> is a <code>std::string</code>, so <code>iter</code> is a single <code>char</code>, and <code>&amp;iter</code> is a <code>char*</code> without a null-terminator. To push individual characters into the <code>vector</code>, you would have to remove the <code>&amp;</code>, but <code>std::string</code> does not have a constructor that takes a single <code>char</code> as its sole input, so you would have to use <code>characters.push_back(std::string(1, iter));</code> or <code>characters.push_back(std::string(&amp;iter, 1));</code>.  Or, you can use <code>std::vector&lt;std::string&gt; characters(word.begin(), word.end());</code> instead."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1543458115, "post_id": 53522077, "comment_id": 93930159, "body": "Also, &quot;<i>Works fine for english words but fails for umlauts</i>&quot; depends on the particular encoding of the <code>std::string</code>. If the string is encoded as UTF-8, then certainly yes, it will not work, since the umlauts (any non-ASCII character in general) will require more than 1 <code>char</code> to encode it.  But, if the string is encoded in a single-byte encoding like Windows-1252 or ISO-8859-1, then the umlauts will work fine."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1543458239, "post_id": 53522077, "comment_id": 93930181, "body": "Also, &quot;<i>my solution with the wstring converter</i>&quot; will not work for Unicode characters that require more than 1 <code>wchar_t</code> to encode them in UTF-16 (codepoints outside the BMP, ie U+10000 and higher)."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1543458467, "post_id": 53522077, "comment_id": 93930225, "body": "You might consider changing your functions to accept an array of <code>char*</code>/<code>wchar_t*</code> pointers (or an array of <code>std::(w)string</code> strings) as input, then you will be able to split the input string using multi-character delimiters."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 1, "creation_date": 1543459773, "post_id": 53522077, "comment_id": 93930484, "body": "The proposed solution in <a href=\"https://stackoverflow.com/questions/40054732/c-iterate-utf-8-string-with-mixed-length-of-characters\">C++ iterate utf-8 string with mixed length of characters</a> doesn&#39;t need external libraries."}], "answers": [{"comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1543493026, "post_id": 53538471, "comment_id": 93944418, "body": "I suggest your iterator return <code>std::string_view</code> instead. Yes, SSO will avoid allocations anyway, but it&#39;s still a bit more expensive. Also, there are lots of possible Unicode-Iterators: Code-Unit (Maybe converting the source), Code-Point, grapheme, grapheme-cluster and more, so go for a more descriptive name."}, {"owner": {"reputation": 2622, "user_id": 2509453, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/83630742111abce16e8e104158644bc2?s=128&d=identicon&r=PG", "display_name": "Johannes", "link": "https://stackoverflow.com/users/2509453/johannes"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1543501851, "post_id": 53538471, "comment_id": 93949442, "body": "I&#39;m on c++14, so I can not use <code>std::string_view</code> but thanks for the hint."}], "tags": [], "owner": {"reputation": 2622, "user_id": 2509453, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/83630742111abce16e8e104158644bc2?s=128&d=identicon&r=PG", "display_name": "Johannes", "link": "https://stackoverflow.com/users/2509453/johannes"}, "is_accepted": false, "score": 0, "last_activity_date": 1543506154, "last_edit_date": 1543506154, "creation_date": 1543492441, "answer_id": 53538471, "question_id": 53522077, "link": "https://stackoverflow.com/questions/53522077/split-stdstring-with-umlauts-into-characters/53538471#53538471", "title": "Split std::string with umlauts into characters", "body": "<p>Thanks for all the replies, they helped me understand that the conversion to Utf-16 or Utf-32 is not the best approach.</p>\n\n<p>I took another look at <a href=\"https://stackoverflow.com/a/40054802/2509453\">this answer</a> and wrote an iterator based on it. I could confirm that it works for utf-8 strings with characters of different bytelengths.</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\n\nclass UtfIterator {\npublic:\n    std::string::const_iterator str_iter;\n    size_t cplen;\n\n    UtfIterator(const std::string::const_iterator str_iter) : str_iter(str_iter) {\n        find_cplen();\n    }\n\n    std::string operator*() const {\n        return std::string(str_iter, str_iter + cplen);\n    }\n\n    UtfIterator&amp; operator++() {\n        str_iter += cplen;\n        find_cplen();\n        return *this;\n    }\n\n    bool operator!=(const UtfIterator &amp;o) const {\n        return this-&gt;str_iter != o.str_iter;\n    }\nprivate:\n    void find_cplen() {\n        cplen = 1;\n        if((*str_iter &amp; 0xf8) == 0xf0) cplen = 4;\n        else if((*str_iter &amp; 0xf0) == 0xe0) cplen = 3;\n        else if((*str_iter &amp; 0xe0) == 0xc0) cplen = 2;\n        // if(iter + cplen &gt; text.length()) cplen = 1;\n    }\n};\n\nint main() {\n    std::string s(\"\u4eca\u5929\u5468\u4e94123\u00e4\u00f6\u00dc\u00df\");\n    for (UtfIterator iter(s.begin()); iter != UtfIterator(s.end()); ++iter) {\n        std::cout &lt;&lt; \"char: \" &lt;&lt; *iter &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>About that uncommented line: As far as I understand its purpose is to find broken Utf-8 strings that have missing bytes in the end. I could not find a way to implement this in my Iterator without knowing the <code>end()</code> iterator. Any ideas?</p>\n"}], "owner": {"reputation": 2622, "user_id": 2509453, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/83630742111abce16e8e104158644bc2?s=128&d=identicon&r=PG", "display_name": "Johannes", "link": "https://stackoverflow.com/users/2509453/johannes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 463, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1543507499, "creation_date": 1543416363, "last_edit_date": 1543418246, "question_id": 53522077, "link": "https://stackoverflow.com/questions/53522077/split-stdstring-with-umlauts-into-characters", "title": "Split std::string with umlauts into characters", "body": "<p>To split an <code>std::string</code> into characters I can just iterate over the string. However, this doesn't work if the string contains german umlauts <code>\u00e4,\u00f6,\u00fc,\u00df,...</code>.</p>\n\n<p>I found a solution using <code>std::wstring_convert&lt;std::codecvt_utf8_utf16&lt;wchar_t&gt;&gt;</code> that works for me. But it feels too complicated, is there a nicer solution?</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;locale&gt;\n#include &lt;codecvt&gt;\n\n// Works with umlauts:\nstd::vector&lt;std::string&gt; split_wstring(const std::string &amp;word) {\n    std::wstring_convert&lt;std::codecvt_utf8_utf16&lt;wchar_t&gt;&gt; converter;\n    std::wstring wword = converter.from_bytes(word);\n    std::vector&lt;std::string&gt; characters;\n    for (auto iter : wword) {\n        characters.push_back(converter.to_bytes(iter));\n    }\n    return characters;\n}\n\n// Works fine for english words but fails for umlauts:\nstd::vector&lt;std::string&gt; split_string(const std::string &amp;word) {\n    std::vector&lt;std::string&gt; characters;\n    for (auto iter : word) {\n        characters.push_back(&amp;iter);\n    }\n    return characters;\n}\n\nint main() {\n    for (auto c : split_string(\"Abc\u00fch\u00dft\u00d6\")) {\n        std::cout &lt;&lt; \"Split String: \" &lt;&lt; c &lt;&lt; std::endl;\n    }\n    for (auto c : split_wstring(\"Abc\u00fch\u00dft\u00d6\")) {\n        std::cout &lt;&lt; \"Split W-String: \" &lt;&lt; c &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>(I split the words into std::strings of length 1 instead of chars, because I need them to be std::strings anyway)</p>\n\n<p>Output is:</p>\n\n<pre><code>Split String: A\nSplit String: b\nSplit String: c\nSplit String: \ufffd\nSplit String: \ufffd\nSplit String: h\nSplit String: \ufffd\nSplit String: \ufffd\nSplit String: t\nSplit String: \ufffd\nSplit String: \ufffd\nSplit W-String: A\nSplit W-String: b\nSplit W-String: c\nSplit W-String: \u00fc\nSplit W-String: h\nSplit W-String: \u00df\nSplit W-String: t\nSplit W-String: \u00d6\n</code></pre>\n\n<p>There is a similar post: <a href=\"https://stackoverflow.com/questions/40054732/c-iterate-utf-8-string-with-mixed-length-of-characters\">C++ iterate utf-8 string with mixed length of characters</a>\nThe solution there is to use lengthy thirdparty code. I think my solution with the wstring converter is already nicer.</p>\n"}, {"tags": ["c++", "algorithm", "math"], "comments": [{"owner": {"reputation": 13228, "user_id": 8398549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8tzrl.jpg?s=128&g=1", "display_name": "Cid", "link": "https://stackoverflow.com/users/8398549/cid"}, "edited": false, "score": 1, "creation_date": 1543416222, "post_id": 53521968, "comment_id": 93912623, "body": "This is pretty unclear to me, can you post the whole content of your exercise?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1543416871, "post_id": 53521968, "comment_id": 93913050, "body": "It&#39;s middle school arithmetic (and your formula is wrong, wher did you get the ==0 part?)"}, {"owner": {"reputation": 1224, "user_id": 4950659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ygz0E.jpg?s=128&g=1", "display_name": "AdminXVII", "link": "https://stackoverflow.com/users/4950659/adminxvii"}, "edited": false, "score": 1, "creation_date": 1543416938, "post_id": 53521968, "comment_id": 93913094, "body": "According to the code, you cannot measure c if <code>c % gcd(a,b) != 0</code>. notice the negation. That is because if statements test whether the condition is <i>NOT</i> 0"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10628441"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1543416950, "post_id": 53521968, "comment_id": 93913101, "body": "@n.m. please i want to know the math  behind this"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10628441"}, "reply_to_user": {"reputation": 1224, "user_id": 4950659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ygz0E.jpg?s=128&g=1", "display_name": "AdminXVII", "link": "https://stackoverflow.com/users/4950659/adminxvii"}, "edited": false, "score": 0, "creation_date": 1543417063, "post_id": 53521968, "comment_id": 93913167, "body": "@AdminXVII thats not negation <code>__</code> include in name of function"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1543417121, "post_id": 53521968, "comment_id": 93913206, "body": "<a href=\"https://math.stackexchange.com\">Mathematics</a> maybe?"}, {"owner": {"reputation": 1224, "user_id": 4950659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ygz0E.jpg?s=128&g=1", "display_name": "AdminXVII", "link": "https://stackoverflow.com/users/4950659/adminxvii"}, "edited": false, "score": 0, "creation_date": 1543417307, "post_id": 53521968, "comment_id": 93913311, "body": "@humblefool <code>if (c % __gcd(a, b))</code> tests if <code>c % __gcd(a, b)</code> is not 0"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1543419748, "post_id": 53521968, "comment_id": 93915037, "body": "names begin with <code>__</code> are reserved. So are names begin with <code>_</code> followed by a capital letter"}], "answers": [{"tags": [], "owner": {"reputation": 1224, "user_id": 4950659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ygz0E.jpg?s=128&g=1", "display_name": "AdminXVII", "link": "https://stackoverflow.com/users/4950659/adminxvii"}, "is_accepted": false, "score": 0, "last_activity_date": 1543417231, "creation_date": 1543417231, "answer_id": 53522339, "question_id": 53521968, "link": "https://stackoverflow.com/questions/53521968/measure-c-litre-using-a-litre-and-b-litre-algorithm/53522339#53522339", "title": "measure c litre using a litre and b litre (algorithm)", "body": "<p>A and B are both multiplied by their GCD</p>\n\n<p>Thus you can be sure that after any number of transfer, both the jars will contain a number divisible by the GCD. If C is not divisible by the GCD, that means it cannot be obtained by any combination of transfers.</p>\n"}, {"tags": [], "owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "is_accepted": true, "score": 1, "last_activity_date": 1543418616, "last_edit_date": 1543418616, "creation_date": 1543417797, "answer_id": 53522520, "question_id": 53521968, "link": "https://stackoverflow.com/questions/53521968/measure-c-litre-using-a-litre-and-b-litre-algorithm/53522520#53522520", "title": "measure c litre using a litre and b litre (algorithm)", "body": "<p>Bezout's Identity:</p>\n\n<p>Let a and b be integers with greatest common divisor d. Then, there exist integers x and y such that ax + by = d. More generally, the integers of the form ax + by are exactly the multiples of d. (Wikipedia)</p>\n\n<p>a and b here correspond to the jugs, x and y to the number of times they are used.</p>\n\n<p>This proves not only that c must be a multiple of the gcd, but also that if c fulfils this condition, then a solution exists. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10628441"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "closed_date": 1543418671, "accepted_answer_id": 53522520, "answer_count": 2, "score": 0, "last_activity_date": 1543418616, "creation_date": 1543416090, "last_edit_date": 1543417483, "question_id": 53521968, "link": "https://stackoverflow.com/questions/53521968/measure-c-litre-using-a-litre-and-b-litre-algorithm", "closed_reason": "Needs details or clarity", "title": "measure c litre using a litre and b litre (algorithm)", "body": "<p>Suppose there are two jugs of a litre and b litre and i have to measure c litre by using the and b i cannot measure c if <code>c % gcd(a,b)!=0</code>.For example if a=21 and b=27 ,I cant't measure 10 litre . Can someone explain the intuition behind this?\nThanks in advance \n<code>AUTOCORRECT</code></p>\n\n<p>This was the question\n<a href=\"https://www.codechef.com/problems/POUR1\" rel=\"nofollow noreferrer\">https://www.codechef.com/problems/POUR1</a></p>\n\n<p>This was the accepted code</p>\n\n<p>See the statement in main <code>if (c % __gcd(a, b) || c &gt; max(a, b))</code>\nHe is printing -1 as this is not possible</p>\n\n<pre><code>    #include&lt;bits/stdc++.h&gt;\n    using namespace std;\n\n    //int aa,bb,cc;\n\n    int process(int a, int b, int c)\n    {\n        int sum = 1, aa = a, bb = 0;\n        while (a != c and b != c) {\n            int f = min(aa, b - bb);\n            bb += f;\n            aa -= f;\n            sum++;\n            if (aa == c || bb == c)\n                break;\n            if (aa == 0)\n                aa = a, sum++;\n            if (bb == b)\n                bb = 0, sum++;\n        }\n        return sum;\n    }\n\n    main()\n    {\n        int t, a, b, c;\n        cin &gt;&gt; t;\n        while (t--) {\n            cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;\n            //cerr &lt;&lt; (c % __gcd(a,b)) &lt;&lt;'\\n';\n            //int aa = a , bb = b;\n            if (c % __gcd(a, b) || c &gt; max(a, b))\n                cout &lt;&lt; -1 &lt;&lt; '\\n';\n            else if (c == a || c == b)\n                cout &lt;&lt; 1 &lt;&lt; '\\n';\n            else\n                cout &lt;&lt; min(process(a, b, c), process(b, a, c)) &lt;&lt; '\\n';\n        }\n    }\n</code></pre>\n"}, {"tags": ["c++", "language-lawyer", "integer-promotion"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1543416063, "post_id": 53521867, "comment_id": 93912521, "body": "I&#39;m kinda tempted to say this can be a dupe <a href=\"https://stackoverflow.com/questions/52175977/how-to-track-newer-c-std-documents-of-given-topic\" title=\"how to track newer c std documents of given topic\">stackoverflow.com/questions/52175977/&hellip;</a>"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 2, "creation_date": 1543416171, "post_id": 53521867, "comment_id": 93912581, "body": "I personally would prefer that all the implicit conversions were deprecated and then removed from the language, however something like this is definitely not going to happen."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1543416513, "post_id": 53521867, "comment_id": 93912809, "body": "Per <a href=\"https://cplusplus.github.io/EWG/ewg-status.html\" rel=\"nofollow noreferrer\">this</a> the issue is still open"}, {"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1543416555, "post_id": 53521867, "comment_id": 93912843, "body": "@VTT How would this play along with minimum type must be <code>int</code> for arithmetic operatrions?"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1543417362, "post_id": 53521867, "comment_id": 93913353, "body": "I think this is an atavism inherited directly from B (or even from BCPL) that had only a single &quot;cell&quot; type. I don&#39;t see any reason not to make arithmetic operations yield the same type as operands and not to have routines to handle overflow."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1543418007, "post_id": 53521867, "comment_id": 93913802, "body": "Note that the proposal that the answer links to is only about overload resolution. It wouldn&#39;t change any promotion rules."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1543424148, "post_id": 53521867, "comment_id": 93917807, "body": "@VTT note the <a href=\"https://stackoverflow.com/a/24372323/1708801\">rationale for promotion rules as they are can be found in the C99 rationale</a>"}], "owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543415758, "creation_date": 1543415758, "question_id": 53521867, "link": "https://stackoverflow.com/questions/53521867/are-there-any-active-proposals-to-change-integral-promotion-rules", "title": "Are there any active proposals to change integral promotion rules?", "body": "<p>As already discussed <a href=\"https://stackoverflow.com/q/15211463/6205379\">here</a> integral promotion rules can cause headaches in some cases (especially for arithmetic operations between signed and unsigned types). At the end of <a href=\"https://stackoverflow.com/a/15388973/6205379\">this</a> answer there is a link to a proposal. However that proposal is from 2012 and I don't know if it was even submitted.</p>\n\n<p>Are there any active proposals or plans to change integral promotion rules to something like <em>the next higher ranked signed type that can hold the value range of the promoted type</em>? I know this causes inconsistency as <code>unsigned long long</code> cannot be promoted to any higher ranked type. This isn't a perfect solution but wouldn't it be at least better than the current situation?</p>\n"}, {"tags": ["c++", "access-violation", "dereference"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1543415673, "post_id": 53521812, "comment_id": 93912318, "body": "0xCCCCCCCC means uninitialized stack memory. <a href=\"https://stackoverflow.com/questions/127386/in-visual-studio-c-what-are-the-memory-allocation-representations\" title=\"in visual studio c what are the memory allocation representations\">stackoverflow.com/questions/127386/&hellip;</a>"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1543415688, "post_id": 53521812, "comment_id": 93912326, "body": "This happens in debug and indicates that you are dereferencing a pointer that was not initialized."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1543415723, "post_id": 53521812, "comment_id": 93912344, "body": "<i>but access violation is much too general for me</i> -- You need to get used to it.  C++ programming requires knowledge of debugging (and avoiding) these issues.  But why are you sinking to the level of storing addresses of anything?  The setup of your program doesn&#39;t require low-level addresses or even pointers."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1543415808, "post_id": 53521812, "comment_id": 93912386, "body": "<code>word_dict_[buffer][&amp;ar] = wordStart;</code> looks very suspicious to me."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1543415826, "post_id": 53521812, "comment_id": 93912398, "body": "&quot;<i>I&#39;ve tried many different things, local variables, backtracking the pointers back into the code, different parentheses... nothing though.</i>&quot; Did you try stepping through your code with a debugger, while observing the values, of all variables?"}], "answers": [{"tags": [], "owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "is_accepted": false, "score": 4, "last_activity_date": 1543416185, "last_edit_date": 1543416185, "creation_date": 1543415817, "answer_id": 53521884, "question_id": 53521812, "link": "https://stackoverflow.com/questions/53521812/c-access-violation-when-deferencing-pointer-to-a-class-member/53521884#53521884", "title": "C++ Access violation when deferencing pointer to a class member", "body": "<pre><code>for (Article ar : articles_) {\n     ...\n    word_dict_[buffer][&amp;ar] = wordStart;\n    ...\n}\n</code></pre>\n\n<p>Here you are storing a pointer to <code>ar</code> in your dictionary, however <code>ar</code> is destroyed at the end of its scope - when your for loop ends. So now you are storing a dangling pointer in your map, which you cannot de-reference.</p>\n\n<p>Store <code>Article</code> objects in your map instead of <code>Article*</code> , or otherwise ensure the <code>Article</code> object lives somewhere as long as you have a pointer to it in your map.</p>\n\n<p>If you have the objects live in your <code>articles_</code> container, you might not need to copy it in your for loop, and instead do:</p>\n\n<pre><code>for (Article&amp; ar : articles_) {\n   .. \n   word_dict_[buffer][&amp;ar] = wordStart;\n</code></pre>\n\n<p>Now you'll get a pointer to your <code>Article</code> object that resides within <code>article_</code>. </p>\n\n<p>Though be aware what you do with <code>article_</code> later on - if you perform operations on it that moves objects around (which can happen for many reasons depending on the container type), your pointers within <code>word_dict_</code> becomes invalid.</p>\n"}, {"tags": [], "owner": {"reputation": 1575, "user_id": 3056501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/215f27224256fccc7e3083d0d248cac6?s=128&d=identicon&r=PG&f=1", "display_name": "divinas", "link": "https://stackoverflow.com/users/3056501/divinas"}, "is_accepted": false, "score": 4, "last_activity_date": 1543417483, "last_edit_date": 1543417483, "creation_date": 1543415866, "answer_id": 53521899, "question_id": 53521812, "link": "https://stackoverflow.com/questions/53521812/c-access-violation-when-deferencing-pointer-to-a-class-member/53521899#53521899", "title": "C++ Access violation when deferencing pointer to a class member", "body": "<pre><code>for (Article ar : articles_)\n</code></pre>\n\n<p>This performs a copy of your article, as a local variable. This local variable goes out of scope as soon as the next iteration of the loop rolls around.</p>\n\n<pre><code>word_dict_[buffer][&amp;ar] = wordStart;\n</code></pre>\n\n<p>Here you store a pointer to the local variable, that is valid only inside your loop.</p>\n\n<p>If you can ensure that your articles will outlive your map, you can store a pointer to the articles stored in <code>articles_</code>. Take note, that if <code>articles_</code> is a <code>std::vector</code>, it might get reallocated when you insert new articles into it, so storing pointers to object inside it has to be done carefully, making sure to invalidate them when the <code>std::vector</code> changes. </p>\n\n<p>If all of the above sounds like your cup of tea, You most probably want to create a reference to the article, like so</p>\n\n<pre><code>for (Article&amp; ar : articles_)\n</code></pre>\n\n<h2>If the above sounds a bit too complicated, you have 2 possible approaches.</h2>\n\n<ol>\n<li><p>Make your <code>word_dict_</code> map store <code>Article</code> objects by Value, instead of as pointers. Downside of this approach is that you store your articles twice, which has logical implications (changes to the article inside your map won't be reflected in the <code>articles_</code> vector and vice-versa) as well as memory implications (you use double the memory)</p></li>\n<li><p>Make your  <code>articles_</code> vector store <code>std::unique_ptr&lt;Article&gt;</code>. This way, you won't need to manually manage the reallocations inside your vector. You will still need to manage the case where an Article is <em>removed</em> from the <code>articles_</code> vector, and make sure to remove it from the <code>word_dict_</code> map. The downside of this approach is that it makes your class uncopiable by default (<code>std::unique_ptr</code> has a deleted copy constructor), which might or might not be a problem for you. If you need them to be copied, you would need to manually provide a copy ctor and copy assignment operator, as well manually implement or <code>= default</code> the other 3 special member functions (see <a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">Rule of 5</a>)</p></li>\n</ol>\n"}], "owner": {"reputation": 43, "user_id": 8783206, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VJ6DffmaXoQ/AAAAAAAAAAI/AAAAAAAAAJg/czusqUPMzDc/photo.jpg?sz=128", "display_name": "Samuel Novelinka", "link": "https://stackoverflow.com/users/8783206/samuel-novelinka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 528, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1543417483, "creation_date": 1543415593, "last_edit_date": 1543415687, "question_id": 53521812, "link": "https://stackoverflow.com/questions/53521812/c-access-violation-when-deferencing-pointer-to-a-class-member", "title": "C++ Access violation when deferencing pointer to a class member", "body": "<p>In my program, I'm trying to dereference a pointer to a struct Article, to get its id, but I'm getting \"Access violation reading location 0xCCCCCCCC\". I've tried many different things, local variables, backtracking the pointers back into the code, different parentheses... nothing though. I'm out of options and I can't see the problem however hard I try.</p>\n\n<p>There might be an answer to this question, but access violation is much too general for me to be able to find the answer I'm looking for (also most of the questions go around arrays, which aren't my case).</p>\n\n<p>Here I define a simple struct to keep my data.</p>\n\n<pre><code>struct Article {\npublic:\n    std::string id;\n    std::string title;\n    std::string text;\n    Article(std::string article_id, std::string article_title, std::string article_text) : id(article_id), title(article_title), text(article_text) {};\n    void toString();\n};\n</code></pre>\n\n<p>Next, I use a dictionary that maps all words to the articles where they appear. The code is not done itself, but maps of words should include all the necessary pointers.</p>\n\n<p><code>std::map&lt;std::string, std::map&lt;Article*, unsigned&gt;&gt; word_dict_;</code></p>\n\n<p>I also keep another <code>vector&lt;Article&gt; articles_</code> wher I keep all of them, so no null pointers should appear in the word_dict_;</p>\n\n<p>Here the dictionary gets generated.</p>\n\n<pre><code>void fulltext::generateDict() {\n    for (Article ar : articles_) {\n        unsigned wordStart;\n        bool isBuilding = false;\n        string buffer = \"\";\n        for (unsigned int it = 0; it &lt;= ar.text.size(); ++it) {\n            char c;\n            if (it &lt; ar.text.size())\n                c = ar.text.at(it);\n            else\n                c = '\\0';\n\n            if (isalpha(c)) {\n                // start or middle of word\n                if (!isBuilding) {\n                    isBuilding = true;\n                    wordStart = it;\n                }\n                buffer += c;\n            }\n            else {\n                isBuilding = false;\n                if (buffer != \"\") {\n                    stringToLower(buffer); // rewrites buffer to low case\n                    // Here I tried creating &amp;ar just for the laughs and it works just fine.\n                    word_dict_[buffer][&amp;ar] = wordStart;\n                    buffer = \"\";\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Last but not least, I want to have it printed out and here the real fun starts.</p>\n\n<pre><code>void fulltext::printWordDict() {\n\n    cout &lt;&lt; \"Printing generated word dictionary: \" &lt;&lt; endl;\n\n    for (auto wordPair : word_dict_) {\n        cout &lt;&lt; \" \\\" \" &lt;&lt; wordPair.first &lt;&lt; \" \\\" \" &lt;&lt; endl;\n        cout &lt;&lt; \"There are \" &lt;&lt; wordPair.second.size() &lt;&lt; \" inputs.\" &lt;&lt; endl;\n        for (pair&lt;Article*, unsigned int&gt; articlePair : wordPair.second) {\n            cout &lt;&lt; (articlePair.first)-&gt;id &lt;&lt; endl; // Here the access violation occurs\n            // Nothing seemingly works\n            // cout &lt;&lt; articlePair.first-&gt;id; ... Access violation\n            // cout &lt;&lt; (*articlePair.first).id; ... Access violation\n            // auto ar = articlePair.first; cout &lt;&lt; ar-&gt;id; ... access violation\n            // auto ar = articlePair.first; cout &lt;&lt; (*ar).id; ... access again\n        }\n        cout &lt;&lt; endl;\n    }\n    cout &lt;&lt; \"Done.\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>These functions are called from within a main function <code>fulltext::proccess()</code> coincidentally in immediate succession. The word_dict_ is class private variable.</p>\n\n<p>If there's need for any other parts of the code, just let me know, although none of the others should make any issues in this case.</p>\n"}, {"tags": ["c++", "windows", "winapi", "fileapi"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1543416095, "post_id": 53521763, "comment_id": 93912540, "body": "what you mean under raw-disk ? files exist inside filesystem. and you can manipulate files only through filesystem. file can be in multiple sectors or located not from sector begin. can be (or not) compressed, encrypted. you need or send request to filesystem or yourself implement filesystem functionality (parse all it structures for found some file)."}, {"owner": {"reputation": 993, "user_id": 1079347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CWTfN.png?s=128&g=1", "display_name": "gast128", "link": "https://stackoverflow.com/users/1079347/gast128"}, "edited": false, "score": 0, "creation_date": 1543417918, "post_id": 53521763, "comment_id": 93913737, "body": "Not sure if it is possible, but low level file system calls are to be found in DeviceIoControl and one of its file system codes."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1543417928, "post_id": 53521763, "comment_id": 93913745, "body": "Yes, it is indeed possible, this is what file system does. If you want to bypass it, you are free to do so."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1543418357, "post_id": 53521763, "comment_id": 93914046, "body": "What <i>problem</i> are you trying to solve? This reads much like an <a href=\"http://xyproblem.info\" rel=\"nofollow noreferrer\">XY Problem</a>."}, {"owner": {"reputation": 25, "user_id": 1876195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/200f5621381f01bd2c562d061fb4e13f?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Rec\u0142aw", "link": "https://stackoverflow.com/users/1876195/micha%c5%82-rec%c5%82aw"}, "edited": false, "score": 0, "creation_date": 1543418559, "post_id": 53521763, "comment_id": 93914182, "body": "To watch the data of the file and for example see what happens to the data when it gets deleted or modified."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 3, "creation_date": 1543421719, "post_id": 53521763, "comment_id": 93916404, "body": "What for? Physical organization of data is an implementation detail of the file system implementation. If you care about notifications of file changes instead, see <a href=\"https://docs.microsoft.com/en-us/windows/desktop/fileio/obtaining-directory-change-notifications\" rel=\"nofollow noreferrer\">Obtaining Directory Change Notifications</a>."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1543417953, "post_id": 53522301, "comment_id": 93913765, "body": "The question is to broad to answer in detail. A short answer to the question is &#39;Yes, it is possible&#39;."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1543417999, "post_id": 53522301, "comment_id": 93913798, "body": "Only for a <i>particular</i> file system (probably NTFS or FAT). Perhaps not for some Ext3 one on an external disk."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1543418071, "post_id": 53522301, "comment_id": 93913847, "body": "Why not? You can still read the disk as a device, and parse ext3 metadata. If the file can be read through normal API, it can by definition be read directly from the disk."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1543418214, "post_id": 53522301, "comment_id": 93913948, "body": "Because the kernel code would modify that data (e.g. because it write new files for <i>other</i> processes) while you are reading it."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1543418274, "post_id": 53522301, "comment_id": 93913995, "body": "Obviously you&#39;d have to issue appropriate locking while doing so."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1543418392, "post_id": 53522301, "comment_id": 93914074, "body": "That was not in the question, and is not easily doable in general. Also, locking work at file level, not at physical sector level. Some file system code might move sectors of a file while it is accessed"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1543418467, "post_id": 53522301, "comment_id": 93914131, "body": "The short answer is &quot;Yes, it is sometimes possible to varying degrees&quot;, but Basile&#39;s answer is far superior to that."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1543418593, "post_id": 53522301, "comment_id": 93914203, "body": "Obviously, if you are implementing file system (this is what question essentially boils down to) you have to behave like a file system. In particular, you need to lock the device while you are working with it on the kernel level. I do not know how to do this in Windows, but I have no doubt it is possible, because this is what file system drivers do."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1543418688, "post_id": 53522301, "comment_id": 93914279, "body": "I don&#39;t know Windows neither. But I happen to know Linux (and using it since 1993). A rule of thumb is that using low level utilities which might move sectors (like <code>debugfs</code> or <code>fsck</code> ...) on a write-mounted filesystem is a bad idea."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1543419027, "post_id": 53522301, "comment_id": 93914523, "body": "On Linux (which I happen to be familiar with as well) you&#39;d write a kernel driver for this task. I am also not familiar with referring to <code>debugfs</code> as a <code>low-level utility</code> akin to fsck, but what do I know."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1543419081, "post_id": 53522301, "comment_id": 93914560, "body": "But that kernel driver might be probably be file system specific. Would you write the same code for Ext4 and for FAT? And on Linux, to watch changing data, <a href=\"http://man7.org/linux/man-pages/man7/inotify.7.html\" rel=\"nofollow noreferrer\">inotify(7)</a> could be simpler (and not requiring kernel code)"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1543419481, "post_id": 53522301, "comment_id": 93914840, "body": "@LightnessRacesinOrbit: you praise my answer but it stays downvoted!"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1543564175, "last_edit_date": 1543564175, "creation_date": 1543417126, "answer_id": 53522301, "question_id": 53521763, "link": "https://stackoverflow.com/questions/53521763/retrieve-physical-address-of-file-on-disk/53522301#53522301", "title": "Retrieve physical address of file on disk", "body": "<p>The whole point of any file system is to <em>abstract</em> the physical disk sectors and provide you a higher level abstraction (called files). So the answer to \"Is it possible to retrieve the physical location\" should be <strong>no!</strong> (in general); some code might even <em>move</em> the sectors of a file (e.g. a <a href=\"https://en.wikipedia.org/wiki/Disk_Defragmenter_(Windows)\" rel=\"nofollow noreferrer\">disk defragmenter</a> and you could imagine it is running concurrently with your program, even if that is not recommended..)</p>\n\n<p>For more, read wikipages on <a href=\"https://en.wikipedia.org/wiki/File_system\" rel=\"nofollow noreferrer\">file systems</a> and <a href=\"https://en.wikipedia.org/wiki/Computer_file\" rel=\"nofollow noreferrer\">files</a>, then read a good book such as <a href=\"http://pages.cs.wisc.edu/~remzi/OSTEP/\" rel=\"nofollow noreferrer\"><em>Operating systems: Three Easy Pieces</em></a></p>\n\n<p>Notice that by using files, you are expecting that your program behave similarly after having moved a file system into a different disk, provided the file paths, contents, and metadata remain the same. In particular, you could have two external USB <a href=\"https://en.wikipedia.org/wiki/Disk_enclosure\" rel=\"nofollow noreferrer\">disks enclosures</a> with different geometries or capacities having the <em>same</em> file contents (perhaps even in different file systems, e.g. VFAT on one and NTFS on another), and you then expect your program to behave identically when accessing such files (in the first box or the second one). Whatever box is plugged, your program would (for example) access the same <code>F:\\MyDir\\MyFile.dat</code> file. As file systems, both boxes would appear identical. At the physical sector level, data would be organized very differently. </p>\n\n<p>BTW, the physical organization of files inside a file system varies greatly from one file system to another one. You could use some <a href=\"https://en.wikipedia.org/wiki/Ext3\" rel=\"nofollow noreferrer\">Ext3</a> file system on your machine (since there are <a href=\"https://www.ext2fsd.com/\" rel=\"nofollow noreferrer\">Ext3 drivers</a> for Windows) - and that is actually useful to share some data between Linux &amp; Windows on a dual boot PC -, and the file organization is different from a <a href=\"https://en.wikipedia.org/wiki/File_Allocation_Table\" rel=\"nofollow noreferrer\">FAT</a> one or a <a href=\"https://en.wikipedia.org/wiki/NTFS\" rel=\"nofollow noreferrer\">NTFS</a> one.</p>\n\n<p>You might get some way to query the kernel to get the actual physical sector location. But I am not sure it works for all file systems (what would be the meaning of a sector location for some remote NFS one). And that information could be stale before your program get it (e.g. if some defragmenter is working in parallel). Also, other processes could access and modify the same file system at the same time (so that meta data -e.g. the sector location- would be obsolete by the time your process is scheduled to run again).</p>\n\n<p>On Windows and on Unix like systems, file system code runs in the kernel. And other processes could use that same code (and the same file system) while your process is not running. Both Windows and Unix have preemptive scheduling, so you have no guarantee that your process runs again in user mode before some other process is using the same file system.</p>\n\n<p>Remember that in practice, your file data often stays in the <a href=\"https://en.wikipedia.org/wiki/Page_cache\" rel=\"nofollow noreferrer\">page cache</a>. And that is why you might not hear your disk working -if you still have a rotating hard disk- when accessing the same file several times in a row (e.g. running the same program on the same file twice, a few seconds apart; usually the second run is keeping the disk silent, because the file data is already in RAM).</p>\n\n<p>In a comment you mention that you want </p>\n\n<blockquote>\n  <p>To watch the data of the file and for example see what happens to the data when it gets deleted or modified. </p>\n</blockquote>\n\n<p>but that should work at the file system level. Linux has <a href=\"http://man7.org/linux/man-pages/man7/inotify.7.html\" rel=\"nofollow noreferrer\">inotify(7)</a> facilities for that (they work on most <em>local</em> file systems, e.g. Ext4 or BTRFS, but not on <em>remote</em> file systems \u00e0 la <a href=\"http://man7.org/linux/man-pages/man5/nfs.5.html\" rel=\"nofollow noreferrer\">nfs(5)</a>, and neither on pseudo file systems \u00e0 la <a href=\"http://man7.org/linux/man-pages/man5/proc.5.html\" rel=\"nofollow noreferrer\">proc(5)</a>). I don't know if Windows has something similar to Linux <code>inotify</code> (but probably <a href=\"https://docs.microsoft.com/en-us/windows/desktop/fileio/obtaining-directory-change-notifications\" rel=\"nofollow noreferrer\">yes</a>, at least in some cases).</p>\n\n<p>You probably should <strong>consider using some database</strong> (maybe as simple as <a href=\"https://sqlite.org/\" rel=\"nofollow noreferrer\">sqlite</a>), and perhaps you want <a href=\"https://en.wikipedia.org/wiki/ACID_(computer_science)\" rel=\"nofollow noreferrer\">ACID</a> properties (then use some real <a href=\"https://en.wikipedia.org/wiki/Relational_database_management_system\" rel=\"nofollow noreferrer\">RDBMS</a> like PostGreSQL). With <a href=\"https://www.postgresql.org/\" rel=\"nofollow noreferrer\">PostGreSQL</a> you might use <code>TRIGGER</code>s to be aware that some data changed, even if some <em>other</em> program changes the same database.</p>\n\n<p>You could also do some <a href=\"https://en.wikipedia.org/wiki/File_locking\" rel=\"nofollow noreferrer\">file locking</a>, and adopt the <em>convention</em> that <em>every</em> program accessing your particular file should lock it appropriately.</p>\n"}], "owner": {"reputation": 25, "user_id": 1876195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/200f5621381f01bd2c562d061fb4e13f?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Rec\u0142aw", "link": "https://stackoverflow.com/users/1876195/micha%c5%82-rec%c5%82aw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 999, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1543564175, "creation_date": 1543415436, "last_edit_date": 1543416676, "question_id": 53521763, "link": "https://stackoverflow.com/questions/53521763/retrieve-physical-address-of-file-on-disk", "title": "Retrieve physical address of file on disk", "body": "<p>Using the Windows API, I'm trying to write a program to read data from a disk. I managed to get access to the content of the drive using <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/fileapi/nf-fileapi-createfilew\" rel=\"nofollow noreferrer\">CreateFile</a> and I'm able to search through it. Let's say there are some files on that disk and I know their paths, but I'm actually interested in their physical location.</p>\n\n<p>My question is:\nIs it possible to retrieve the physical location or address of the files (or sector they're located in) and where are they stored on the drive without searching the whole drive? If so, what functions should I use? Using <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/fileapi/nf-fileapi-setfilepointerex\" rel=\"nofollow noreferrer\">SetFilePointer</a> or <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/fileapi/nf-fileapi-findfirstfilew\" rel=\"nofollow noreferrer\">FindFirstFile</a> don't seem to solve the solution either.</p>\n"}, {"tags": ["c++", "build", "cmake", "point-cloud-library"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1543422729, "post_id": 53521724, "comment_id": 93916985, "body": "Variable <code>EIGEN_INCLUDE_DIR</code> is an output variable. For hint, set <code>EIGEN_ROOT</code> variable instead. That variable should be set to directory, which contains <code>Eigen&#47;Core</code> file inside. Probably, it is <code>C:\\vcpkg-pcl\\vcpkg-master\\installed\\x64-windows\\include</code> directory in your system."}, {"owner": {"reputation": 51, "user_id": 10536840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66d6622f0497b18cb977bef91511c239?s=128&d=identicon&r=PG&f=1", "display_name": "pras123", "link": "https://stackoverflow.com/users/10536840/pras123"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1544515326, "post_id": 53521724, "comment_id": 94292757, "body": "Thanks for the reply. After adding EIGEN_ROOT variable it was able to go ahead. But I am getting another error. -- Looking for pthread.h - not found. even after I installed Pthreads using VCPKG. and set the environment variable PTHREADS_ROOT or PTHREADS_INCLUDE to C:\\vcpkg-pcl\\vcpkg-master\\installed\\x64-windows or C:\\vcpkg-pcl\\vcpkg-master\\installed\\x64-windows\\include. Any help on this is appreciated"}], "owner": {"reputation": 51, "user_id": 10536840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66d6622f0497b18cb977bef91511c239?s=128&d=identicon&r=PG&f=1", "display_name": "pras123", "link": "https://stackoverflow.com/users/10536840/pras123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 607, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1543415341, "creation_date": 1543415341, "question_id": 53521724, "link": "https://stackoverflow.com/questions/53521724/error-while-building-a-cpp-application-by-linking-with-pcl", "title": "Error while building a cpp application by linking with PCL", "body": "<p>I built PCL on windows using VCPKG(MS Visual studio 2017). I am trying to build a CPP application with PCL using cmake 3.12 with the following CMakelists.txt.</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8 FATAL_ERROR)\n\nproject(compute)\n\nfind_package(PCL 1.5 REQUIRED)\n\ninclude_directories(${PCL_INCLUDE_DIRS})\nlink_directories(${PCL_LIBRARY_DIRS})\nadd_definitions(${PCL_DEFINITIONS})\n\nadd_executable (compute compute.cpp)\ntarget_link_libraries (compute ${PCL_LIBRARIES})\n</code></pre>\n\n<p>I also set the following environment variables.</p>\n\n<pre><code>set PCL_INCLUDE_DIRS=\"C:\\vcpkg-pcl\\vcpkg-master\\installed\\x64-windows\\include\\pcl\"\nSET PCL_LIBRARY_DIRS=\"C:\\vcpkg-pcl\\vcpkg-master\\installed\\x64-windows\\lib\"\nset PCL_LIBRARIES=\"pcl_common_release.lib;pcl_features_release.lib;pcl_filters_release.lib;pcl_io_ply_release.lib;pcl_io_release.lib\"\n</code></pre>\n\n<p>I initially got an error saying it is unable to find the file FindPCL.cmake and eventually PCLConfig.cmake or PCL-Config.cmake. I set the environment variable</p>\n\n<p><code>set PCL_DIR=C:\\vcpkg-pcl\\vcpkg-master\\installed\\x64-windows\\share\\pcl</code></p>\n\n<p>where the PCLConfig.cmake is installed. It was able to detect the file. However,\nit is unable to detect PCL(pcl_report_not_found) with the following error.</p>\n\n<pre><code>c:\\PCL-Program&gt;cmake .\n-- Building for: Visual Studio 15 2017\n-- Selecting Windows SDK version 10.0.17763.0 to target Windows 10.0.17134.\n-- The C compiler identification is MSVC 19.16.27023.1\n-- The CXX compiler identification is MSVC 19.16.27023.1\n-- Check for working C compiler: C:/Program Files (x86)/Microsoft Visual Studio/2017/Professional/VC/Tools/MSVC/14.16.27023/bin/Hostx86/x86/cl.exe\n-- Check for working C compiler: C:/Program Files (x86)/Microsoft Visual Studio/2017/Professional/VC/Tools/MSVC/14.16.27023/bin/Hostx86/x86/cl.exe -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Check for working CXX compiler: C:/Program Files (x86)/Microsoft Visual Studio/2017/Professional/VC/Tools/MSVC/14.16.27023/bin/Hostx86/x86/cl.exe\n-- Check for working CXX compiler: C:/Program Files (x86)/Microsoft Visual Studio/2017/Professional/VC/Tools/MSVC/14.16.27023/bin/Hostx86/x86/cl.exe -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Could NOT find Eigen (missing: EIGEN_INCLUDE_DIR)\nCMake Error at C:/vcpkg-pcl/vcpkg-master/installed/x64-windows/share/pcl/PCLConfig.cmake:56 (message):\n  common is required but eigen was not found\nCall Stack (most recent call first):\n  C:/vcpkg-pcl/vcpkg-master/installed/x64-windows/share/pcl/PCLConfig.cmake:356 (pcl_report_not_found)\n  C:/vcpkg-pcl/vcpkg-master/installed/x64-windows/share/pcl/PCLConfig.cmake:526 (find_external_library)\n  CMakeLists.txt:5 (find_package)\n\n\n-- Configuring incomplete, errors occurred!\nSee also \"C:/PCL-Program/CMakeFiles/CMakeOutput.log\".\n\nc:\\PCL-Program&gt;set EIGEN_INCLUDE_DIR\nEIGEN_INCLUDE_DIR=C:\\vcpkg-pcl\\vcpkg-master\\installed\\x64-windows\\include\\Eigen\n</code></pre>\n\n<p>Even after setting the environment variable for EIGEN_INCLUDE_DIR, I am still getting the same error. Please let me know if I am following the right way.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1543414873, "post_id": 53521546, "comment_id": 93911812, "body": "According to the analogy you try to draw, <code>&quot;one&quot;</code> is a <code>char</code>. But it&#39;s not."}, {"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 0, "creation_date": 1543414892, "post_id": 53521546, "comment_id": 93911825, "body": "The compiler already tried to tell you whats wrong. Do you have trouble understanding the error message?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1543414960, "post_id": 53521546, "comment_id": 93911859, "body": "The error message tells you exactly what&#39;s going on. <code>a</code> is an <i>array of <code>int</code> <b>pointers</i></b>. But you are assigning just integers to it. You&#39;re attempting to assign <code>int</code> values to a type <code>cont int *</code>."}, {"owner": {"reputation": 355, "user_id": 9806044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/225f7c4b348d46abfebfaaf15fe09547?s=128&d=identicon&r=PG&f=1", "display_name": "The_Learner", "link": "https://stackoverflow.com/users/9806044/the-learner"}, "reply_to_user": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 0, "creation_date": 1543414972, "post_id": 53521546, "comment_id": 93911872, "body": "@MichaWiedenmann yes, i was unable to understand the error message"}, {"owner": {"reputation": 355, "user_id": 9806044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/225f7c4b348d46abfebfaaf15fe09547?s=128&d=identicon&r=PG&f=1", "display_name": "The_Learner", "link": "https://stackoverflow.com/users/9806044/the-learner"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1543415072, "post_id": 53521546, "comment_id": 93911932, "body": "@lurker In the first Program also I am doing the same right, I am assigning names (&#39;char&#39;) to it."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1543415158, "post_id": 53521546, "comment_id": 93912003, "body": "I understand the confusion. But it&#39;s not the same at all. In the first program you&#39;re assigning literal strings to <code>const char  *</code> which is allowed since C++ references the literal string by it&#39;s pointer (address). Thus the literal string is a <code>char *</code>. If you think about a simpler type without the array, you can declare a single variable, <code>const char *s = &quot;Hello&quot;;</code>, or <code>const int a = 1;</code>."}, {"owner": {"reputation": 1147, "user_id": 8874817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40ae7c9690551846e59d73bb4ed01c7?s=128&d=identicon&r=PG&f=1", "display_name": "Detonar", "link": "https://stackoverflow.com/users/8874817/detonar"}, "edited": false, "score": 0, "creation_date": 1543415261, "post_id": 53521546, "comment_id": 93912070, "body": "<code>&quot;one&quot;</code> is a <code>char*</code>, <code>1</code> is a <code>int</code> not an <code>int*</code>"}, {"owner": {"reputation": 355, "user_id": 9806044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/225f7c4b348d46abfebfaaf15fe09547?s=128&d=identicon&r=PG&f=1", "display_name": "The_Learner", "link": "https://stackoverflow.com/users/9806044/the-learner"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1543415482, "post_id": 53521546, "comment_id": 93912221, "body": "@lurker I understood the error, thank you very much, if possible please write this in the answer. This is the answer I am expecting"}, {"owner": {"reputation": 355, "user_id": 9806044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/225f7c4b348d46abfebfaaf15fe09547?s=128&d=identicon&r=PG&f=1", "display_name": "The_Learner", "link": "https://stackoverflow.com/users/9806044/the-learner"}, "reply_to_user": {"reputation": 1147, "user_id": 8874817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40ae7c9690551846e59d73bb4ed01c7?s=128&d=identicon&r=PG&f=1", "display_name": "Detonar", "link": "https://stackoverflow.com/users/8874817/detonar"}, "edited": false, "score": 0, "creation_date": 1543415501, "post_id": 53521546, "comment_id": 93912234, "body": "@Detonar, Thank you very much"}], "answers": [{"tags": [], "owner": {"reputation": 1147, "user_id": 8874817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40ae7c9690551846e59d73bb4ed01c7?s=128&d=identicon&r=PG&f=1", "display_name": "Detonar", "link": "https://stackoverflow.com/users/8874817/detonar"}, "is_accepted": true, "score": 3, "last_activity_date": 1543417088, "last_edit_date": 1543417088, "creation_date": 1543415420, "answer_id": 53521755, "question_id": 53521546, "link": "https://stackoverflow.com/questions/53521546/why-program-1-is-working-but-not-program-2-could-anybody-explain-whats-wrong-wi/53521755#53521755", "title": "Why Program 1 is working but not Program 2, could anybody explain whats wrong with Program 2?", "body": "<p><code>\"one\"</code> is a <code>char*</code>, <code>1</code> is a <code>int</code> not an <code>int*</code></p>\n\n<p>Therefore, Program2 would have to be:</p>\n\n<pre><code>#include &lt;iostream&gt;\nint main() {\n    const int a[3] = { 1, 2, 3};\n    const int (*p)[3] = &amp;a;\n    for(int i = 0; i &lt; 3; i++) {\n        std::cout &lt;&lt; (*p)[i] &lt;&lt; std::endl; // this line\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 355, "user_id": 9806044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/225f7c4b348d46abfebfaaf15fe09547?s=128&d=identicon&r=PG&f=1", "display_name": "The_Learner", "link": "https://stackoverflow.com/users/9806044/the-learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 53521755, "answer_count": 1, "score": -2, "last_activity_date": 1543417088, "creation_date": 1543414763, "last_edit_date": 1543414916, "question_id": 53521546, "link": "https://stackoverflow.com/questions/53521546/why-program-1-is-working-but-not-program-2-could-anybody-explain-whats-wrong-wi", "title": "Why Program 1 is working but not Program 2, could anybody explain whats wrong with Program 2?", "body": "<p>Program 1 is working fine but Program 2 is giving a compilation error, could anybody tell whats wrong with Program 2..</p>\n\n<p>Program 1</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main() {\n    const char* a[3] = { \"one\", \"two\", \"three\" };\n    const char*(*p)[3] = &amp;a;\n    for(int i = 0; i &lt; 3; i++) {\n        std::cout &lt;&lt; (*p)[i] &lt;&lt; std::endl; // this line\n    }\n    return 0;\n}\n</code></pre>\n\n<p><strong>NO COMPILATION ERROR</strong></p>\n\n<p>Program 2</p>\n\n<pre><code>#include &lt;iostream&gt;\nint main() {\n    const int* a[3] = { 1, 2, 3};\n    const int*(*p)[3] = &amp;a;\n    for(int i = 0; i &lt; 3; i++) {\n        std::cout &lt;&lt; (*p)[i] &lt;&lt; std::endl; // this line\n    }\n    return 0;\n}\n</code></pre>\n\n<p><strong>COMPILATION ERROR</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>error C2440: 'initializing' : cannot convert from 'int' to 'const int *\n</code></pre>\n"}, {"tags": ["c++", "ffmpeg", "webrtc", "x264", "libsourcey"], "comments": [{"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1543585026, "post_id": 53521241, "comment_id": 93982604, "body": "Well no, there&#39;s no entry for 8 in x264_levels here: <a href=\"http://git.videolan.org/?p=x264.git;a=blob_plain;f=common/tables.c;hb=HEAD\" rel=\"nofollow noreferrer\">git.videolan.org/?p=x264.git;a=blob_plain;f=common/&hellip;</a> and from a quick git log -S search there never was. You&#39;ll have to track down where the 8 is coming from."}, {"owner": {"reputation": 67, "user_id": 4985625, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XmBvqOg_-2g/AAAAAAAAAAI/AAAAAAAAADI/-dRgZsQ8cxw/photo.jpg?sz=128", "display_name": "Iranna Pattar", "link": "https://stackoverflow.com/users/4985625/iranna-pattar"}, "reply_to_user": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1543902040, "post_id": 53521241, "comment_id": 94074555, "body": "I am not configuring x264 levels anywhere. here is the av format configuration:  av::VideoCodec(&quot;H.264&quot;, &quot;libx264&quot;, 1280, 720, 30, 2000000, 128000, &quot;yuv420p&quot;),  av::AudioCodec(&quot;AAC&quot;, &quot;libfdk_aac&quot;, 2, 44100, 64000, &quot;s16&quot;));"}, {"owner": {"reputation": 67, "user_id": 4985625, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XmBvqOg_-2g/AAAAAAAAAAI/AAAAAAAAADI/-dRgZsQ8cxw/photo.jpg?sz=128", "display_name": "Iranna Pattar", "link": "https://stackoverflow.com/users/4985625/iranna-pattar"}, "reply_to_user": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1544609877, "post_id": 53521241, "comment_id": 94334047, "body": "Well, by default profile level would be 0. So added level manually. now working fine, but getting segmentation fault after that"}, {"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1544610051, "post_id": 53521241, "comment_id": 94334168, "body": "You might do better <a href=\"https://github.com/sourcey/libsourcey\" rel=\"nofollow noreferrer\">raising an issue on GitHub</a> I guess since you haven&#39;t found people who know this code here. But if you&#39;re able to investigate the stack trace and see what&#39;s gone wrong - maybe it&#39;s some more missing config? - that would be very useful."}, {"owner": {"reputation": 67, "user_id": 4985625, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XmBvqOg_-2g/AAAAAAAAAAI/AAAAAAAAADI/-dRgZsQ8cxw/photo.jpg?sz=128", "display_name": "Iranna Pattar", "link": "https://stackoverflow.com/users/4985625/iranna-pattar"}, "reply_to_user": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1544611126, "post_id": 53521241, "comment_id": 94334853, "body": "@Rup I have raised an issue in Gitub, but no comments."}], "owner": {"reputation": 67, "user_id": 4985625, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XmBvqOg_-2g/AAAAAAAAAAI/AAAAAAAAADI/-dRgZsQ8cxw/photo.jpg?sz=128", "display_name": "Iranna Pattar", "link": "https://stackoverflow.com/users/4985625/iranna-pattar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1544012146, "creation_date": 1543413805, "last_edit_date": 1544012146, "question_id": 53521241, "link": "https://stackoverflow.com/questions/53521241/libsourcey-webrtcrecorder-mp4-file-is-not-generated", "title": "Libsourcey: webrtcrecorder.mp4 file is not generated", "body": "<p>I am running WebRTC Native Video Recorder demo Application, but webrtcrecorder.mp4 file is not generated. As I have gone through some question and answers but unable to find the answer. I am getting some error</p>\n\n<p>here is the command of cmake</p>\n\n<pre><code>cmake .. -DCMAKE_BUILD_TYPE=DEBUG -DBUILD_SHARED_LIBS=OFF     -DBUILD_MODULES=OFF    -DBUILD_APPLICATIONS=OFF \\\n   -DBUILD_SAMPLES=ON         -DBUILD_TESTS=OFF         -DWITH_WEBRTC=ON -DWITH_FFMPEG=ON    -DBUILD_MODULE_base=ON \\\n   -DBUILD_MODULE_crypto=ON   -DBUILD_MODULE_http=ON       -DBUILD_MODULE_json=ON               -DBUILD_MODULE_av=ON    \\\n   -DBUILD_MODULE_net=ON      -DBUILD_MODULE_socketio=ON   -DBUILD_MODULE_symple=ON             -DBUILD_MODULE_stun=ON   \\\n   -DBUILD_MODULE_turn=ON     -DBUILD_MODULE_util=ON       -DBUILD_MODULE_uv=ON                 -DBUILD_MODULE_webrtc=ON \\\n   -DBUILD_SAMPLES_webrtc=ON  -DWEBRTC_INCLUDE_DIR=/home/ubuntu/temp/webrtc-22215-ab42706-linux-x64/include \\\n   -DWEBRTC_LIBRARIES=/home/ubuntu/temp/webrtc-22215-ab42706-linux-x64/lib/ \\\n   -DWEBRTC_ROOT_DIR=/home/ubuntu/temp/webrtc-22215-ab42706-linux-x64    \\\n   -DBUILD_MODULE_openssl=ON   -DOPENSSL_ROOT_DIR=/usr/local/ssl     -DOPENSSL_LIBRARIES=/usr/local/ssl/lib/ \\\n   -DOPENSSL_INCLUDE_DIR=/usr/local/ssl/include/openssl/\n</code></pre>\n\n<p>here are the logs of webrtcrecorder: </p>\n\n<pre><code>Client state changed from Closed to Connecting\n13:31:54 [debug] [application.cpp(104)] Wait for shutdown\n13:31:54 [debug] [signaler.cpp(116)] Client state changed from Connecting to Connected\n13:31:54 [debug] [client.cpp(364)] On handshake: sid=_Wi06W8eF4GdOGn_AAAA, pingInterval=25000, pingTimeout=60000\n13:31:54 [debug] [client.cpp(387)] Peer connected:videorecorder|_Wi06W8eF4GdOGn_AAAA\n13:31:54 [debug] [signaler.cpp(116)] Client state changed from Connected to Online\n13:31:59 [debug] [signaler.cpp(89)] Peer message: demo|Ivv61MFbOi96l__ZAAAB\n13:31:59 [debug] [signaler.cpp(71)] Peer connected: Ivv61MFbOi96l__ZAAAB\n13:31:59 [debug] [client.cpp(387)] Peer connected:demo|Ivv61MFbOi96l__ZAAAB\n13:32:00 [debug] [signaler.cpp(89)] Peer message: demo|Ivv61MFbOi96l__ZAAAB\n13:32:00 [debug] [peer.cpp(130)] Ivv61MFbOi96l__ZAAAB: Receive offer: v=0\no=- 7392103695987858658 2 IN IP4 127.0.0.1\ns=-\nt=0 0\na=group:BUNDLE audio video\na=msid-semantic: WMS je7s7e9RhWY3cMVjVn8y0ipyOgJnTgu1bMYd\nm=audio 9 UDP/TLS/RTP/SAVPF 111 103 104 9 0 8 106 105 13 110 112 113 126\nc=IN IP4 0.0.0.0\na=rtcp:9 IN IP4 0.0.0.0\na=ice-ufrag:ICgM\na=ice-pwd:hruHw+Fgaswb+slJ3/eE3Yad\na=ice-options:trickle\na=fingerprint:sha-256 B3:30:19:FA:91:57:CE:2B:7D:60:C4:16:27:FE:8E:CB:76:57:31:C6:75:72:72:87:36:C4:8E:30:91:01:27:D8\na=setup:actpass\na=mid:audio\na=extmap:1 urn:ietf:params:rtp-hdrext:ssrc-audio-level\na=sendrecv\na=rtcp-mux\na=rtpmap:111 opus/48000/2\na=rtcp-fb:111 transport-cc\na=fmtp:111 minptime=10;useinbandfec=1\na=rtpmap:103 ISAC/16000\na=rtpmap:104 ISAC/32000\na=rtpmap:9 G722/8000\na=rtpmap:0 PCMU/8000\na=rtpmap:8 PCMA/8000\na=rtpmap:106 CN/32000\na=rtpmap:105 CN/16000\na=rtpmap:13 CN/8000\na=rtpmap:110 telephone-event/48000\na=rtpmap:112 telephone-event/32000\na=rtpmap:113 telephone-event/16000\na=rtpmap:126 telephone-event/8000\na=ssrc:1294348972 cname:G/WgJ3Ijh9QR84NI\na=ssrc:1294348972 msid:je7s7e9RhWY3cMVjVn8y0ipyOgJnTgu1bMYd 30683b54-4aef-4c98-bf11-e9f497eddafd\na=ssrc:1294348972 mslabel:je7s7e9RhWY3cMVjVn8y0ipyOgJnTgu1bMYd\na=ssrc:1294348972 label:30683b54-4aef-4c98-bf11-e9f497eddafd\nm=video 9 UDP/TLS/RTP/SAVPF 96 97 98 99 100 101 102 122 127 121 125 107 108 109 124 120 123 119 114\nc=IN IP4 0.0.0.0\na=rtcp:9 IN IP4 0.0.0.0\na=ice-ufrag:ICgM\na=ice-pwd:hruHw+Fgaswb+slJ3/eE3Yad\na=ice-options:trickle\na=fingerprint:sha-256 B3:30:19:FA:91:57:CE:2B:7D:60:C4:16:27:FE:8E:CB:76:57:31:C6:75:72:72:87:36:C4:8E:30:91:01:27:D8\na=setup:actpass\na=mid:video\na=extmap:2 urn:ietf:params:rtp-hdrext:toffset\na=extmap:3 http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\na=extmap:4 urn:3gpp:video-orientation\na=extmap:5 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\na=extmap:6 http://www.webrtc.org/experiments/rtp-hdrext/playout-delay\na=extmap:7 http://www.webrtc.org/experiments/rtp-hdrext/video-content-type\na=extmap:8 http://www.webrtc.org/experiments/rtp-hdrext/video-timing\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=rtpmap:96 VP8/90000\na=rtcp-fb:96 goog-remb\na=rtcp-fb:96 transport-cc\na=rtcp-fb:96 ccm fir\na=rtcp-fb:96 nack\na=rtcp-fb:96 nack pli\na=rtpmap:97 rtx/90000\na=fmtp:97 apt=96\na=rtpmap:98 VP9/90000\na=rtcp-fb:98 goog-remb\na=rtcp-fb:98 transport-cc\na=rtcp-fb:98 ccm fir\na=rtcp-fb:98 nack\na=rtcp-fb:98 nack pli\na=fmtp:98 x-google-profile-id=0\na=rtpmap:99 rtx/90000\na=fmtp:99 apt=98\na=rtpmap:100 H264/90000\na=rtcp-fb:100 goog-remb\na=rtcp-fb:100 transport-cc\na=rtcp-fb:100 ccm fir\na=rtcp-fb:100 nack\na=rtcp-fb:100 nack pli\na=fmtp:100 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f\na=rtpmap:101 rtx/90000\na=fmtp:101 apt=100\na=rtpmap:102 H264/90000\na=rtcp-fb:102 goog-remb\na=rtcp-fb:102 transport-cc\na=rtcp-fb:102 ccm fir\na=rtcp-fb:102 nack\na=rtcp-fb:102 nack pli\na=fmtp:102 level-asymmetry-allowed=1;packetization-mode=0;profile-level-id=42001f\na=rtpmap:122 rtx/90000\na=fmtp:122 apt=102\na=rtpmap:127 H264/90000\na=rtcp-fb:127 goog-remb\na=rtcp-fb:127 transport-cc\na=rtcp-fb:127 ccm fir\na=rtcp-fb:127 nack\na=rtcp-fb:127 nack pli\na=fmtp:127 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f\na=rtpmap:121 rtx/90000\na=fmtp:121 apt=127\na=rtpmap:125 H264/90000\na=rtcp-fb:125 goog-remb\na=rtcp-fb:125 transport-cc\na=rtcp-fb:125 ccm fir\na=rtcp-fb:125 nack\na=rtcp-fb:125 nack pli\na=fmtp:125 level-asymmetry-allowed=1;packetization-mode=0;profile-level-id=42e01f\na=rtpmap:107 rtx/90000\na=fmtp:107 apt=125\na=rtpmap:108 H264/90000\na=rtcp-fb:108 goog-remb\na=rtcp-fb:108 transport-cc\na=rtcp-fb:108 ccm fir\na=rtcp-fb:108 nack\na=rtcp-fb:108 nack pli\na=fmtp:108 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=4d0032\na=rtpmap:109 rtx/90000\na=fmtp:109 apt=108\na=rtpmap:124 H264/90000\na=rtcp-fb:124 goog-remb\na=rtcp-fb:124 transport-cc\na=rtcp-fb:124 ccm fir\na=rtcp-fb:124 nack\na=rtcp-fb:124 nack pli\na=fmtp:124 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=640032\na=rtpmap:120 rtx/90000\na=fmtp:120 apt=124\na=rtpmap:123 red/90000\na=rtpmap:119 rtx/90000\na=fmtp:119 apt=123\na=rtpmap:114 ulpfec/90000\na=ssrc-group:FID 3747062777 227800175\na=ssrc:3747062777 cname:G/WgJ3Ijh9QR84NI\na=ssrc:3747062777 msid:je7s7e9RhWY3cMVjVn8y0ipyOgJnTgu1bMYd e64ec0a4-3603-40d3-a6c6-01c5e60c79ef\na=ssrc:3747062777 mslabel:je7s7e9RhWY3cMVjVn8y0ipyOgJnTgu1bMYd\na=ssrc:3747062777 label:e64ec0a4-3603-40d3-a6c6-01c5e60c79ef\na=ssrc:227800175 cname:G/WgJ3Ijh9QR84NI\na=ssrc:227800175 msid:je7s7e9RhWY3cMVjVn8y0ipyOgJnTgu1bMYd e64ec0a4-3603-40d3-a6c6-01c5e60c79ef\na=ssrc:227800175 mslabel:je7s7e9RhWY3cMVjVn8y0ipyOgJnTgu1bMYd\na=ssrc:227800175 label:e64ec0a4-3603-40d3-a6c6-01c5e60c79ef\n\n13:32:00 [debug] [peer.cpp(165)] Ivv61MFbOi96l__ZAAAB: On signaling state change: 3\n13:32:00 [debug] [peer.cpp(225)] Ivv61MFbOi96l__ZAAAB: On add stream\n13:32:00 [debug] [signaler.cpp(139)] -------onAddRemotestream---------\n13:32:00 [debug] [peermanager.cpp(64)] Received offer: v=0\no=- 7392103695987858658 2 IN IP4 127.0.0.1\ns=-\nt=0 0\na=group:BUNDLE audio video\na=msid-semantic: WMS je7s7e9RhWY3cMVjVn8y0ipyOgJnTgu1bMYd\nm=audio 9 UDP/TLS/RTP/SAVPF 111 103 104 9 0 8 106 105 13 110 112 113 126\nc=IN IP4 0.0.0.0\na=rtcp:9 IN IP4 0.0.0.0\na=ice-ufrag:ICgM\na=ice-pwd:hruHw+Fgaswb+slJ3/eE3Yad\na=ice-options:trickle\na=fingerprint:sha-256 B3:30:19:FA:91:57:CE:2B:7D:60:C4:16:27:FE:8E:CB:76:57:31:C6:75:72:72:87:36:C4:8E:30:91:01:27:D8\na=setup:actpass\na=mid:audio\na=extmap:1 urn:ietf:params:rtp-hdrext:ssrc-audio-level\na=sendrecv\na=rtcp-mux\na=rtpmap:111 opus/48000/2\na=rtcp-fb:111 transport-cc\na=fmtp:111 minptime=10;useinbandfec=1\na=rtpmap:103 ISAC/16000\na=rtpmap:104 ISAC/32000\na=rtpmap:9 G722/8000\na=rtpmap:0 PCMU/8000\na=rtpmap:8 PCMA/8000\na=rtpmap:106 CN/32000\na=rtpmap:105 CN/16000\na=rtpmap:13 CN/8000\na=rtpmap:110 telephone-event/48000\na=rtpmap:112 telephone-event/32000\na=rtpmap:113 telephone-event/16000\na=rtpmap:126 telephone-event/8000\na=ssrc:1294348972 cname:G/WgJ3Ijh9QR84NI\na=ssrc:1294348972 msid:je7s7e9RhWY3cMVjVn8y0ipyOgJnTgu1bMYd 30683b54-4aef-4c98-bf11-e9f497eddafd\na=ssrc:1294348972 mslabel:je7s7e9RhWY3cMVjVn8y0ipyOgJnTgu1bMYd\na=ssrc:1294348972 label:30683b54-4aef-4c98-bf11-e9f497eddafd\nm=video 9 UDP/TLS/RTP/SAVPF 96 97 98 99 100 101 102 122 127 121 125 107 108 109 124 120 123 119 114\nc=IN IP4 0.0.0.0\na=rtcp:9 IN IP4 0.0.0.0\na=ice-ufrag:ICgM\na=ice-pwd:hruHw+Fgaswb+slJ3/eE3Yad\na=ice-options:trickle\na=fingerprint:sha-256 B3:30:19:FA:91:57:CE:2B:7D:60:C4:16:27:FE:8E:CB:76:57:31:C6:75:72:72:87:36:C4:8E:30:91:01:27:D8\na=setup:actpass\na=mid:video\na=extmap:2 urn:ietf:params:rtp-hdrext:toffset\na=extmap:3 http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\na=extmap:4 urn:3gpp:video-orientation\na=extmap:5 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\na=extmap:6 http://www.webrtc.org/experiments/rtp-hdrext/playout-delay\na=extmap:7 http://www.webrtc.org/experiments/rtp-hdrext/video-content-type\na=extmap:8 http://www.webrtc.org/experiments/rtp-hdrext/video-timing\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=rtpmap:96 VP8/90000\na=rtcp-fb:96 goog-remb\na=rtcp-fb:96 transport-cc\na=rtcp-fb:96 ccm fir\na=rtcp-fb:96 nack\na=rtcp-fb:96 nack pli\na=rtpmap:97 rtx/90000\na=fmtp:97 apt=96\na=rtpmap:98 VP9/90000\na=rtcp-fb:98 goog-remb\na=rtcp-fb:98 transport-cc\na=rtcp-fb:98 ccm fir\na=rtcp-fb:98 nack\na=rtcp-fb:98 nack pli\na=fmtp:98 x-google-profile-id=0\na=rtpmap:99 rtx/90000\na=fmtp:99 apt=98\na=rtpmap:100 H264/90000\na=rtcp-fb:100 goog-remb\na=rtcp-fb:100 transport-cc\na=rtcp-fb:100 ccm fir\na=rtcp-fb:100 nack\na=rtcp-fb:100 nack pli\na=fmtp:100 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f\na=rtpmap:101 rtx/90000\na=fmtp:101 apt=100\na=rtpmap:102 H264/90000\na=rtcp-fb:102 goog-remb\na=rtcp-fb:102 transport-cc\na=rtcp-fb:102 ccm fir\na=rtcp-fb:102 nack\na=rtcp-fb:102 nack pli\na=fmtp:102 level-asymmetry-allowed=1;packetization-mode=0;profile-level-id=42001f\na=rtpmap:122 rtx/90000\na=fmtp:122 apt=102\na=rtpmap:127 H264/90000\na=rtcp-fb:127 goog-remb\na=rtcp-fb:127 transport-cc\na=rtcp-fb:127 ccm fir\na=rtcp-fb:127 nack\na=rtcp-fb:127 nack pli\na=fmtp:127 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f\na=rtpmap:121 rtx/90000\na=fmtp:121 apt=127\na=rtpmap:125 H264/90000\na=rtcp-fb:125 goog-remb\na=rtcp-fb:125 transport-cc\na=rtcp-fb:125 ccm fir\na=rtcp-fb:125 nack\na=rtcp-fb:125 nack pli\na=fmtp:125 level-asymmetry-allowed=1;packetization-mode=0;profile-level-id=42e01f\na=rtpmap:107 rtx/90000\na=fmtp:107 apt=125\na=rtpmap:108 H264/90000\na=rtcp-fb:108 goog-remb\na=rtcp-fb:108 transport-cc\na=rtcp-fb:108 ccm fir\na=rtcp-fb:108 nack\na=rtcp-fb:108 nack pli\na=fmtp:108 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=4d0032\na=rtpmap:109 rtx/90000\na=fmtp:109 apt=108\na=rtpmap:124 H264/90000\na=rtcp-fb:124 goog-remb\na=rtcp-fb:124 transport-cc\na=rtcp-fb:124 ccm fir\na=rtcp-fb:124 nack\na=rtcp-fb:124 nack pli\na=fmtp:124 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=640032\na=rtpmap:120 rtx/90000\na=fmtp:120 apt=124\na=rtpmap:123 red/90000\na=rtpmap:119 rtx/90000\na=fmtp:119 apt=123\na=rtpmap:114 ulpfec/90000\na=ssrc-group:FID 3747062777 227800175\na=ssrc:3747062777 cname:G/WgJ3Ijh9QR84NI\na=ssrc:3747062777 msid:je7s7e9RhWY3cMVjVn8y0ipyOgJnTgu1bMYd e64ec0a4-3603-40d3-a6c6-01c5e60c79ef\na=ssrc:3747062777 mslabel:je7s7e9RhWY3cMVjVn8y0ipyOgJnTgu1bMYd\na=ssrc:3747062777 label:e64ec0a4-3603-40d3-a6c6-01c5e60c79ef\na=ssrc:227800175 cname:G/WgJ3Ijh9QR84NI\na=ssrc:227800175 msid:je7s7e9RhWY3cMVjVn8y0ipyOgJnTgu1bMYd e64ec0a4-3603-40d3-a6c6-01c5e60c79ef\na=ssrc:227800175 mslabel:je7s7e9RhWY3cMVjVn8y0ipyOgJnTgu1bMYd\na=ssrc:227800175 label:e64ec0a4-3603-40d3-a6c6-01c5e60c79ef\n\n13:32:00 [debug] [peer.cpp(329)] On SDP parse success\n13:32:00 [debug] [peer.cpp(255)] Ivv61MFbOi96l__ZAAAB: Set local description\n13:32:00 [debug] [peer.cpp(165)] Ivv61MFbOi96l__ZAAAB: On signaling state change: 0\n13:32:00 [debug] [peer.cpp(329)] On SDP parse success\n13:32:00 [debug] [peer.cpp(191)] Ivv61MFbOi96l__ZAAAB: On ICE gathering change: 1\n13:32:00 [debug] [signaler.cpp(89)] Peer message: demo|Ivv61MFbOi96l__ZAAAB\n13:32:00 [debug] [peermanager.cpp(85)] Received candidate: candidate:2999745851 1 udp 2122260223 192.168.56.1 60548 typ host generation 0 ufrag ICgM network-id 2\n13:32:00 [debug] [peer.cpp(185)] Ivv61MFbOi96l__ZAAAB: On ICE connection change: 1\n13:32:00 [debug] [signaler.cpp(89)] Peer message: demo|Ivv61MFbOi96l__ZAAAB\n13:32:00 [debug] [peermanager.cpp(85)] Received candidate: candidate:564218470 1 udp 2122194687 100.64.100.204 60549 typ host generation 0 ufrag ICgM network-id 1 network-cost 10\n13:32:00 [debug] [signaler.cpp(89)] Peer message: demo|Ivv61MFbOi96l__ZAAAB\n13:32:00 [debug] [peermanager.cpp(85)] Received candidate: candidate:2999745851 1 udp 2122260223 192.168.56.1 60550 typ host generation 0 ufrag ICgM network-id 2\n13:32:00 [debug] [signaler.cpp(89)] Peer message: demo|Ivv61MFbOi96l__ZAAAB\n13:32:00 [debug] [peermanager.cpp(85)] Received candidate: candidate:564218470 1 udp 2122194687 100.64.100.204 60551 typ host generation 0 ufrag ICgM network-id 1 network-cost 10\n13:32:00 [debug] [peer.cpp(191)] Ivv61MFbOi96l__ZAAAB: On ICE gathering change: 2\n13:32:00 [debug] [signaler.cpp(89)] Peer message: demo|Ivv61MFbOi96l__ZAAAB\n13:32:00 [debug] [peermanager.cpp(85)] Received candidate: candidate:4233069003 1 tcp 1518280447 192.168.56.1 9 typ host tcptype active generation 0 ufrag ICgM network-id 2\n13:32:00 [debug] [signaler.cpp(89)] Peer message: demo|Ivv61MFbOi96l__ZAAAB\n13:32:00 [debug] [peermanager.cpp(85)] Received candidate: candidate:1864545942 1 tcp 1518214911 100.64.100.204 9 typ host tcptype active generation 0 ufrag ICgM network-id 1 network-cost 10\n13:32:00 [debug] [signaler.cpp(89)] Peer message: demo|Ivv61MFbOi96l__ZAAAB\n13:32:00 [debug] [peermanager.cpp(85)] Received candidate: candidate:4233069003 1 tcp 1518280447 192.168.56.1 9 typ host tcptype active generation 0 ufrag ICgM network-id 2\n13:32:00 [debug] [signaler.cpp(89)] Peer message: demo|Ivv61MFbOi96l__ZAAAB\n13:32:00 [debug] [peermanager.cpp(85)] Received candidate: candidate:1864545942 1 tcp 1518214911 100.64.100.204 9 typ host tcptype active generation 0 ufrag ICgM network-id 1 network-cost 10\n13:32:15 [debug] [peer.cpp(185)] Ivv61MFbOi96l__ZAAAB: On ICE connection change: 4```\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>[libx264 @ 0x7f415c001600] invalid level_idc: 8\n12:00:14 [error] [multiplexencoder.cpp(153)] Error: Cannot open the video codec: Generic error in an external library\n12:00:14 [error] [streamrecorder.cpp(87)] Failed to init encoder: std::exception\n</code></pre>\n\n<p>How to resolve this error?</p>\n"}, {"tags": ["python", "c++", "tensorflow", "keras"], "comments": [{"owner": {"reputation": 1520, "user_id": 5276428, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/jftwU.jpg?s=128&g=1", "display_name": "burglarhobbit", "link": "https://stackoverflow.com/users/5276428/burglarhobbit"}, "edited": false, "score": 0, "creation_date": 1596424921, "post_id": 53521149, "comment_id": 111797764, "body": "Your &#39;Output0&#39; variable is lowercase."}, {"owner": {"reputation": 107, "user_id": 3151256, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e6949b18627aaa84af5c8aa0337bd062?s=128&d=identicon&r=PG&f=1", "display_name": "user3151256", "link": "https://stackoverflow.com/users/3151256/user3151256"}, "edited": false, "score": 0, "creation_date": 1616921141, "post_id": 53521149, "comment_id": 118149426, "body": "Also having same issues in running a model with c++. How did you print layer names ?"}], "owner": {"reputation": 81, "user_id": 10632819, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Luca Giacomoni", "link": "https://stackoverflow.com/users/10632819/luca-giacomoni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2445, "favorite_count": 1, "answer_count": 0, "score": 8, "last_activity_date": 1543418814, "creation_date": 1543413521, "last_edit_date": 1543418814, "question_id": 53521149, "link": "https://stackoverflow.com/questions/53521149/invalid-argument-specified-in-either-feed-devices-or-fetch-devices-was-not-foun", "title": "Invalid argument: specified in either feed_devices or fetch_devices was not found in the Graph", "body": "<p>I am trying to run a model exported from Keras in Tensorflow using the C++ API. The model is exported and imported correctly, however when I try to run the session in C++, the names of the variables I pass in the <code>Run</code> member of <code>tensorflow::Session</code> get modified, causing the error:</p>\n\n<pre><code>Invalid argument: Tensor Output0:0, specified in either feed_devices or fetch_devices was not found in the Graph\n</code></pre>\n\n<p>Here is the model I have built in Keras:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>S = Input(shape=[state_size], name='Input')\nh0 = Dense(self.HIDDEN1_UNITS, name='Hidden1', kernel_initializer=keras.initializers.RandomUniform())(S)\nh0_a = Activation('relu')(h0)\nh1 = Dense(self.HIDDEN2_UNITS, name='Hidden2', kernel_initializer=keras.initializers.RandomUniform())(h0_a)\nh1_a = Activation('relu')(h1)\noutput = Dense(1)(h1_a)\noutput_a = Activation('tanh', name='Output0')(output)\nmodel = Model(S,output_a)\n</code></pre>\n\n<p>The model is exported using <code>tensorflow.python.framework.graph_util</code>\nand <code>tensorflow.python.framework.graph_io</code>, following the approach implemented in <a href=\"https://github.com/amir-abdi/keras_to_tensorflow\" rel=\"noreferrer\">https://github.com/amir-abdi/keras_to_tensorflow</a></p>\n\n<p>The model is then imported in Tensorflow using the C++ API:</p>\n\n<pre class=\"lang-cc prettyprint-override\"><code>ParseProtoUnlimited(&amp;graph_def, &lt;graph_protoprotobuffer&gt;, &lt;graph_size&gt; );\n</code></pre>\n\n<p>The graph seems to be imported successfully, in fact when I print the nodes name contained in the graph in Tensorflow I get the following:</p>\n\n<pre><code>Names : Input_5\nNames : Hidden1_5/kernel\nNames : Hidden1_5/kernel/read\nNames : Hidden1_5/bias\nNames : Hidden1_5/bias/read\nNames : Hidden1_5/MatMul\nNames : Hidden1_5/BiasAdd\nNames : activation_5_1/Relu\nNames : Hidden2_5/kernel\nNames : Hidden2_5/kernel/read\nNames : Hidden2_5/bias\nNames : Hidden2_5/bias/read\nNames : Hidden2_5/MatMul\nNames : Hidden2_5/BiasAdd\nNames : activation_6_1/Relu\nNames : dense_3_1/kernel\nNames : dense_3_1/kernel/read\nNames : dense_3_1/bias\nNames : dense_3_1/bias/read\nNames : dense_3_1/MatMul\nNames : dense_3_1/BiasAdd\nNames : Output_5/Tanh\nNames : output0\n</code></pre>\n\n<p>Now, if I want to try and run the session, I do the following:</p>\n\n<pre class=\"lang-cc prettyprint-override\"><code>Tensor input(DT_FLOAT, TensorShape( { 4 }));\n...\n[init tensor]\n...\nsession-&gt;Run({{\"Input_5\", input}}, {\"Output0\"}, {},\n                &amp;outputs);\n</code></pre>\n\n<p>But the application throws the following error:</p>\n\n<pre><code>Invalid argument: Tensor Output0:0, specified in either feed_devices or fetch_devices was not found in the Graph\n</code></pre>\n\n<p>Why the function Run session appends the :0 to the output tensor I want to retrieve? </p>\n\n<p>Also, I have tried beforehand to do the above with a simple graph built with Tensorflow, and the session on C++ run with no problem. Here is the graph that worked:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>with tf.Session() as sess:\n    a = tf.Variable(5.0, name='a')\n    b = tf.Variable(6.0, name='b')\n    c = tf.multiply(a, b, name=\"c\")\n    sess.run(tf.global_variables_initializer())\n    exported = sess.graph_def.SerializeToString()\n    size = sess.graph_def.ByteSize()\n</code></pre>\n\n<pre class=\"lang-cc prettyprint-override\"><code>Tensor a(DT_FLOAT, TensorShape());\na.scalar&lt;float&gt;()() = 5.0;\n\nTensor b(DT_FLOAT, TensorShape());\nb.scalar&lt;float&gt;()() = 6.0;\n\nstd::vector&lt;std::pair&lt;string, tensorflow::Tensor&gt;&gt; inputs = {\n                { \"a\", a }, { \"b\", b }, };\n\nstd::vector&lt;tensorflow::Tensor&gt; outputs;\nRun the session, evaluating our \"c\" operation from the graph\nstatus = session-&gt;Run(inputs, { \"c\" }, { }, &amp;outputs);\n</code></pre>\n\n<p>Why in the second case I manage to run the session whereas in the first case I get that error?</p>\n\n<p>Keras version is <code>2.2.2</code>\nTensorflow version is <code>1.11.0</code></p>\n\n<p>Any help would be much appreciated.</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 1147, "user_id": 8874817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40ae7c9690551846e59d73bb4ed01c7?s=128&d=identicon&r=PG&f=1", "display_name": "Detonar", "link": "https://stackoverflow.com/users/8874817/detonar"}, "is_accepted": false, "score": 2, "last_activity_date": 1543412942, "creation_date": 1543412942, "answer_id": 53520942, "question_id": 53520853, "link": "https://stackoverflow.com/questions/53520853/use-of-equal-range-for-unordered-map/53520942#53520942", "title": "Use of equal_range for unordered_map", "body": "<p>cplusplus.com writes about <a href=\"http://www.cplusplus.com/reference/unordered_map/unordered_map/equal_range/\" rel=\"nofollow noreferrer\">std::unordered_map::equal_range</a>:</p>\n\n<blockquote>\n  <p>Returns the bounds of a range that includes all the elements in the container with a key that compares equal to k. In unordered_map containers, where keys are unique, the range will include one element at most.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "is_accepted": false, "score": 0, "last_activity_date": 1543416274, "last_edit_date": 1543416274, "creation_date": 1543413131, "answer_id": 53521005, "question_id": 53520853, "link": "https://stackoverflow.com/questions/53520853/use-of-equal-range-for-unordered-map/53521005#53521005", "title": "Use of equal_range for unordered_map", "body": "<blockquote>\n  <p>Also, in <code>std::unordered_multimap</code>, does it presence means all elements with same key will always come together while iterating <code>unordered_multimap</code> with a iterator?</p>\n</blockquote>\n\n<p>In general, the order, in which elements stored in  a <code>std::unordered_multimap</code> are obtained while traversing it, is actually <em>not defined</em>. However, note that <code>std::unordered_multimap</code>s are usually implemented as <a href=\"https://en.wikipedia.org/wiki/Hash_table\" rel=\"nofollow noreferrer\"><em>hash tables</em></a>. By analysing such an implementation you will realize that the ordering is not going to be as \"undefined\" as someone might initially think. </p>\n\n<p>At element insertion (or hash table rehashing), the value resulting of applying the <em>hash function</em> to an element's <em>key</em> is used to select the <em>bucket</em> where that element is going to be stored. Two elements with equal keys will result in the same hash value, therefore they will be stored in the same bucket, so they come together<sup>X</sup> while iterating an <code>std::unordered_multimap</code>.</p>\n\n<hr>\n\n<p><sup>X</sup>Note that even two elements with <em>different keys</em> might also result in the same hash value (i.e., a <em>collision</em>). However, <code>std::unordered_multimap</code> can handle these cases by comparing the keys against equality, and therefore still group elements with equal keys together.</p>\n"}, {"comments": [{"owner": {"reputation": 42401, "user_id": 768110, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/UKahT.jpg?s=128&g=1", "display_name": "RiaD", "link": "https://stackoverflow.com/users/768110/riad"}, "edited": false, "score": 0, "creation_date": 1543413598, "post_id": 53521055, "comment_id": 93910954, "body": "if they are in the same bucket it doesn&#39;t mean they are continious by itself, because other lement can be in the same bucket"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 42401, "user_id": 768110, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/UKahT.jpg?s=128&g=1", "display_name": "RiaD", "link": "https://stackoverflow.com/users/768110/riad"}, "edited": false, "score": 0, "creation_date": 1543413712, "post_id": 53521055, "comment_id": 93911019, "body": "@RiaD Yes, you can have a hash collision but the map has to keep those equally hashed elements separate by checking the equality of the key.  That is why the unordered containers requires the key be hash-able and equally comparable."}, {"owner": {"reputation": 42401, "user_id": 768110, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/UKahT.jpg?s=128&g=1", "display_name": "RiaD", "link": "https://stackoverflow.com/users/768110/riad"}, "edited": false, "score": 0, "creation_date": 1543415067, "post_id": 53521055, "comment_id": 93911926, "body": "my point was that I understood your second not quoted paragraph to imply that (they are in the same bucket) =&gt; (they are grouped). If you was trying to say that, I&#39;m sorry, i&#39;ve misunderstood that then"}, {"owner": {"reputation": 42401, "user_id": 768110, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/UKahT.jpg?s=128&g=1", "display_name": "RiaD", "link": "https://stackoverflow.com/users/768110/riad"}, "edited": false, "score": 0, "creation_date": 1543415155, "post_id": 53521055, "comment_id": 93911998, "body": "btw, I am not really sure I agree with a decision to require equivalent element to be grouped, but of course it&#39;s question not to you but to standard commitee"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 42401, "user_id": 768110, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/UKahT.jpg?s=128&g=1", "display_name": "RiaD", "link": "https://stackoverflow.com/users/768110/riad"}, "edited": false, "score": 0, "creation_date": 1543415247, "post_id": 53521055, "comment_id": 93912059, "body": "@RiaD It would make implementing <code>equal_range</code> difficult if they didn&#39;t.  You&#39;d have to have a skip iterator that could skip of the elements in the bucket that don&#39;t have the same key value."}, {"owner": {"reputation": 42401, "user_id": 768110, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/UKahT.jpg?s=128&g=1", "display_name": "RiaD", "link": "https://stackoverflow.com/users/768110/riad"}, "edited": false, "score": 0, "creation_date": 1543415321, "post_id": 53521055, "comment_id": 93912117, "body": "yes, I understand that, But I have never used <code>equal_range</code> so it&#39;s kinda paying for what I do not use"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 7, "last_activity_date": 1543415177, "last_edit_date": 1543415177, "creation_date": 1543413250, "answer_id": 53521055, "question_id": 53520853, "link": "https://stackoverflow.com/questions/53520853/use-of-equal-range-for-unordered-map/53521055#53521055", "title": "Use of equal_range for unordered_map", "body": "<blockquote>\n  <p>How does it make sense?</p>\n</blockquote>\n\n<p>It kind of does.  The standard requires all associative container to offer <code>equal_range</code> so the non <code>multi</code> containers need to provide it.  It does make writing generic code easier so I suspect that is the reason why all of the containers are required to use it.</p>\n\n<blockquote>\n  <p>Does it presence means all elements with same key will always come together while iterating unordered_map with a iterator?</p>\n</blockquote>\n\n<p>Actually, yes.  Since the all of the keys will have the same value they will hash to the same value which means they all get stored in the same bucket and will be grouped together since the keys compare equally.  From <a href=\"https://timsong-cpp.github.io/cppwp/unord.req#6\" rel=\"noreferrer\">[unord.req]/6</a></p>\n\n<blockquote>\n  <p>An unordered associative container supports unique keys if it may contain at most one element for each key. Otherwise, it supports equivalent keys. unordered_\u00adset and unordered_\u00admap support unique keys. unordered_\u00admultiset and unordered_\u00admultimap support equivalent keys. <strong>In containers that support equivalent keys, elements with equivalent keys are adjacent to each other in the iteration order of the container. Thus, although the absolute order of elements in an unordered container is not specified, its elements are grouped into equivalent-key groups such that all elements of each group have equivalent keys.</strong> Mutating operations on unordered containers shall preserve the relative order of elements within each equivalent-key group unless otherwise specified.</p>\n</blockquote>\n\n<p><sup>emphasis mine</sup></p>\n"}, {"tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 3, "last_activity_date": 1543413440, "creation_date": 1543413440, "answer_id": 53521124, "question_id": 53520853, "link": "https://stackoverflow.com/questions/53520853/use-of-equal-range-for-unordered-map/53521124#53521124", "title": "Use of equal_range for unordered_map", "body": "<p>It's for consistency with the other containers.</p>\n\n<p>It makes more sense in the <code>_multi</code> variants, but is present in all the associative (and unordered associative) containers in the standard library.</p>\n\n<p>It allows you to write code like</p>\n\n<pre><code>template &lt;typename MapLike, typename KeyLike&gt;\nvoid do_stuff(const MapLike &amp; map, const KeyLike &amp; key)\n{\n    auto range = map.equal_range(key);\n    for (auto it = range.first; it != range.second; ++it)\n         // blah\n}\n</code></pre>\n\n<p>Which does not care about what specific container it is dealing with</p>\n"}], "owner": {"reputation": 1541, "user_id": 8654852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6964199e965c7dd96b557865337ca86c?s=128&d=identicon&r=PG&f=1", "display_name": "code707", "link": "https://stackoverflow.com/users/8654852/code707"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1029, "favorite_count": 1, "accepted_answer_id": 53521055, "answer_count": 4, "score": 5, "last_activity_date": 1543416306, "creation_date": 1543412651, "last_edit_date": 1543416306, "question_id": 53520853, "link": "https://stackoverflow.com/questions/53520853/use-of-equal-range-for-unordered-map", "title": "Use of equal_range for unordered_map", "body": "<p>As it makes sense, <code>lower_bound</code> and <code>upper_bound</code> are absent for <code>std::unordered_map</code> because there is no order for elements.  </p>\n\n<p>However <code>std::unordered_map</code> has method <code>equal_range</code>. it return iterators for range corresponding to a key. </p>\n\n<p>How does it make sense? Since there can be only one element with a key in <code>std::unordered_map</code>. It is just <code>find</code> method. </p>\n\n<p>Also, in <code>std::unordered_multimap</code>, does it presence means all elements with same key will always come together while iterating <code>unordered_multimap</code> with a iterator?</p>\n"}, {"tags": ["c++", "endianness"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1543412593, "post_id": 53520770, "comment_id": 93910287, "body": "You may want to take a look at <a href=\"https://www.boost.org/doc/libs/1_68_0/libs/endian/doc/conversion.html\" rel=\"nofollow noreferrer\">boost endian</a>"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1543412597, "post_id": 53520770, "comment_id": 93910290, "body": "Is it possible? Sure, but I&#39;m seeing a similar enum in <a href=\"https://www.boost.org/doc/libs/1_68_0/libs/endian/doc/conversion.html\" rel=\"nofollow noreferrer\">boost</a> so maybe that would do?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1543412597, "post_id": 53520770, "comment_id": 93910291, "body": "The &quot;possible implementation&quot; is not a standardized or otherwise official way of implementing the enumeration. Instead it depends a <i>lot</i> on the compiler used and its corresponding standard library parts. What is shown is only a <i>possibility</i>, an <i>example</i> without any basis on real implementations."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1543412606, "post_id": 53520770, "comment_id": 93910298, "body": "for gcc see here: <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1543412641, "post_id": 53520770, "comment_id": 93910319, "body": "This is going to compiler dependent.  If you need something poratable use <a href=\"https://www.boost.org/doc/libs/1_63_0/libs/endian/doc/index.html\" rel=\"nofollow noreferrer\">Boost.Endian</a>"}, {"owner": {"reputation": 591, "user_id": 5773004, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1b56505987c4fc700395dc53896785e1?s=128&d=identicon&r=PG&f=1", "display_name": "FlashMcQueen", "link": "https://stackoverflow.com/users/5773004/flashmcqueen"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1543412654, "post_id": 53520770, "comment_id": 93910330, "body": "@user463035818 but I am wondering if those macro are garanteed to be defined."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1543412808, "post_id": 53520770, "comment_id": 93910433, "body": "They are not.  <code>std::endian</code> is the guaranteed interface.  However your implementation implements it is up to them."}, {"owner": {"reputation": 591, "user_id": 5773004, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1b56505987c4fc700395dc53896785e1?s=128&d=identicon&r=PG&f=1", "display_name": "FlashMcQueen", "link": "https://stackoverflow.com/users/5773004/flashmcqueen"}, "edited": false, "score": 0, "creation_date": 1543412973, "post_id": 53520770, "comment_id": 93910553, "body": "That&#39;s my question thank you"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1543413562, "post_id": 53520770, "comment_id": 93910926, "body": "the macros used in the example are those defined for gcc. For other compilers you have to check their documentation"}], "owner": {"reputation": 591, "user_id": 5773004, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1b56505987c4fc700395dc53896785e1?s=128&d=identicon&r=PG&f=1", "display_name": "FlashMcQueen", "link": "https://stackoverflow.com/users/5773004/flashmcqueen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "closed_date": 1543412978, "answer_count": 0, "score": 2, "last_activity_date": 1543412349, "creation_date": 1543412349, "question_id": 53520770, "link": "https://stackoverflow.com/questions/53520770/how-to-define-endian-enum-class-waiting-for-c20", "closed_reason": "Duplicate", "title": "How to define endian enum class waiting for C++20?", "body": "<p>Considering the possible implementation <a href=\"https://en.cppreference.com/w/cpp/types/endian\" rel=\"nofollow noreferrer\">here</a>: </p>\n\n<pre><code>enum class endian\n{\n#ifdef _WIN32\n    little = 0,\n    big    = 1,\n    native = little\n#else\n    little = __ORDER_LITTLE_ENDIAN__,\n    big    = __ORDER_BIG_ENDIAN__,\n    native = __BYTE_ORDER__\n#endif\n};\n</code></pre>\n\n<p>Is it sure that</p>\n\n<pre><code>__ORDER_LITTLE_ENDIAN__, __ORDER_BIG_ENDIAN__, __BYTE_ORDER__ \n</code></pre>\n\n<p>are defined in other platforms than WIN32?</p>\n\n<p>Before C++20 is released, is it possible to define such an enum for endianness?\nOtherwise, how to do it properly?</p>\n"}, {"tags": ["c++", "vector", "constructor", "copy-constructor"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1543412471, "post_id": 53520740, "comment_id": 93910205, "body": "A copy constructor that modifies the thing it copies from looks strange."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 4, "creation_date": 1543412580, "post_id": 53520740, "comment_id": 93910277, "body": "Read the second error carefully."}, {"owner": {"reputation": 1147, "user_id": 8874817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40ae7c9690551846e59d73bb4ed01c7?s=128&d=identicon&r=PG&f=1", "display_name": "Detonar", "link": "https://stackoverflow.com/users/8874817/detonar"}, "edited": false, "score": 1, "creation_date": 1543412673, "post_id": 53520740, "comment_id": 93910340, "body": "Try making the copy constructor <code>Foo(const Foo&amp; foo)</code>"}, {"owner": {"reputation": 3926, "user_id": 3004698, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/adc6701aaba8834c47779319be4ea252?s=128&d=identicon&r=PG&f=1", "display_name": "SLN", "link": "https://stackoverflow.com/users/3004698/sln"}, "reply_to_user": {"reputation": 1147, "user_id": 8874817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40ae7c9690551846e59d73bb4ed01c7?s=128&d=identicon&r=PG&f=1", "display_name": "Detonar", "link": "https://stackoverflow.com/users/8874817/detonar"}, "edited": false, "score": 0, "creation_date": 1543412869, "post_id": 53520740, "comment_id": 93910473, "body": "@Detonar Yes, code is compiled after adding <code>const</code> qualifier.  But is this a request from vector? Since <code>Foo ff(f)</code> works fine without the <code>const</code> qualifier."}, {"owner": {"reputation": 1147, "user_id": 8874817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40ae7c9690551846e59d73bb4ed01c7?s=128&d=identicon&r=PG&f=1", "display_name": "Detonar", "link": "https://stackoverflow.com/users/8874817/detonar"}, "edited": false, "score": 1, "creation_date": 1543413393, "post_id": 53520740, "comment_id": 93910822, "body": "@SLN I guess <code>std::vector</code> adds <code>const</code> before copying to ensure the initial object is not changed in some weird copy constructors like the ones juanchopanza had in mind while posting his comment."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1543413951, "post_id": 53520740, "comment_id": 93911169, "body": "@SLN - Think of it like this. If I gave you my lecture to notes to copy after you missed a class, it&#39;d be pretty poor form to doodle all over my notebook, won&#39;t it?"}], "answers": [{"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1543414049, "post_id": 53521218, "comment_id": 93911228, "body": "@bolov - Sorry what? You can&#39;t bind a <b>non-const</b> reference to an object that is const or is referred to by a const reference. This answer is perfectly correct."}], "tags": [], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "is_accepted": true, "score": 4, "last_activity_date": 1543414427, "last_edit_date": 1543414427, "creation_date": 1543413739, "answer_id": 53521218, "question_id": 53520740, "link": "https://stackoverflow.com/questions/53520740/copy-constructor-error-when-initilizing-a-vector-of-custormer-typed-objects/53521218#53521218", "title": "Copy constructor error when initilizing a vector of custormer typed objects", "body": "<p>Look at the signature of the invoked constructor of <code>std::vector</code>:</p>\n\n<pre><code>vector(size_type n, const T&amp; value, const Allocator&amp; = Allocator());\n</code></pre>\n\n<p>The argument <code>f</code> is passed by const reference (parameter <code>value</code>). That parameter therefore cannot be bound to non-const parameter <code>foo</code> of type <code>Foo&amp;</code> of <code>Foo</code>'s copy constructor.</p>\n\n<hr>\n\n<p>Same (simpler) case:</p>\n\n<pre><code>Foo f;\nconst Foo&amp; value = f;\nFoo&amp; foo = value;  // error\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": false, "score": 1, "last_activity_date": 1543413923, "creation_date": 1543413923, "answer_id": 53521276, "question_id": 53520740, "link": "https://stackoverflow.com/questions/53520740/copy-constructor-error-when-initilizing-a-vector-of-custormer-typed-objects/53521276#53521276", "title": "Copy constructor error when initilizing a vector of custormer typed objects", "body": "<p>The constructor you use is <a href=\"https://en.cppreference.com/w/cpp/container/vector/vector\" rel=\"nofollow noreferrer\">std::vector::vector (2)</a></p>\n\n<blockquote>\n<pre><code>vector( size_type count, \n                 const T&amp; value,\n                 const Allocator&amp; alloc = Allocator());\n</code></pre>\n</blockquote>\n\n<p>The parameter <code>value</code> which will be copied inside the constructor is const, and because your copy constructor cannot copy from const the implementation of the constructor cannot create copies to fill the vector.</p>\n"}, {"tags": [], "owner": {"reputation": 1147, "user_id": 8874817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40ae7c9690551846e59d73bb4ed01c7?s=128&d=identicon&r=PG&f=1", "display_name": "Detonar", "link": "https://stackoverflow.com/users/8874817/detonar"}, "is_accepted": false, "score": 0, "last_activity_date": 1543414259, "creation_date": 1543414259, "answer_id": 53521385, "question_id": 53520740, "link": "https://stackoverflow.com/questions/53520740/copy-constructor-error-when-initilizing-a-vector-of-custormer-typed-objects/53521385#53521385", "title": "Copy constructor error when initilizing a vector of custormer typed objects", "body": "<p>The constructor documentation of <a href=\"http://www.cplusplus.com/reference/vector/vector/\" rel=\"nofollow noreferrer\"><code>std::vector</code></a> shows the following signature:</p>\n\n<pre><code>explicit vector (size_type n, const value_type&amp; val = value_type(),\n             const allocator_type&amp; alloc = allocator_type());\n</code></pre>\n\n<p>This shows that it requires <code>val</code> to be a <code>const</code> reference. Because it most likely won't cut this <code>const</code> in it's internal processing it seems to pass <code>val</code> like this to the copy constructor. Because Foo's copy constructor expects an non-<code>const</code> reference to be passed <code>val</code> would lose it's <code>const</code> qualifier. Because this is not allowed the compiler raises the error</p>\n\n<blockquote>\n  <p>Error: candidate constructor not viable: 1st argument ('const Foo') would lose const qualifier</p>\n</blockquote>\n"}], "owner": {"reputation": 3926, "user_id": 3004698, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/adc6701aaba8834c47779319be4ea252?s=128&d=identicon&r=PG&f=1", "display_name": "SLN", "link": "https://stackoverflow.com/users/3004698/sln"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 53521218, "answer_count": 3, "score": 3, "last_activity_date": 1543414427, "creation_date": 1543412244, "last_edit_date": 1543413313, "question_id": 53520740, "link": "https://stackoverflow.com/questions/53520740/copy-constructor-error-when-initilizing-a-vector-of-custormer-typed-objects", "title": "Copy constructor error when initilizing a vector of custormer typed objects", "body": "<p>Class <code>Foo</code> only has a default constructor and a copy constructor. A vector of size 10 initialized by object of type <code>Foo</code> is somehow incorrect.  </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nclass Foo\n{\n    public:\n        Foo() = default; // Error1\n        Foo(Foo&amp; foo) {  // Error2\n            std::cout &lt;&lt; \"copied\" &lt;&lt; std::endl;\n        }\n\n};\n\nint main( void )\n{\n    Foo f;\n    std::vector&lt;Foo&gt; vec(10, f); // Error3\n    return 0;\n}\n</code></pre>\n\n<p>There are 3 errors for the sample code above:</p>\n\n<p><strong>Error1:</strong> candidate constructor not viable: requires 0 arguments, but 1 was provided</p>\n\n<p><strong>Error2:</strong> candidate constructor not viable: 1st argument ('const Foo') would lose const qualifier </p>\n\n<p><strong>Error3:</strong> in instantiation of member function 'std::__1::vector >::vector' requested here</p>\n\n<p>When I remove the copy constructor or the vector in the main function, there are no errors.</p>\n\n<p><strong>Question:</strong> </p>\n\n<p>Which part of the code is wrong and why?</p>\n\n<p>p.s.</p>\n\n<p>When the vector definition is replaced by <code>Foo ff(f)</code>, errors are gone as well. Is the <code>const</code> qualifier is request by the vector?</p>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 2653, "user_id": 1028434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a340b89a8b4efdb83da69d6cc93caac7?s=128&d=identicon&r=PG", "display_name": "fdk1342", "link": "https://stackoverflow.com/users/1028434/fdk1342"}, "edited": false, "score": 0, "creation_date": 1543420521, "post_id": 53520525, "comment_id": 93915592, "body": "I don&#39;t know about to get these properties to inherit across cmake projects.  To use a library that was built outside a cmake project simply use the <code>target_link_libraries</code> and <code>target_include_directories</code>. Are you sure <code>target_include_directories(${MY_MEGA_PROJECT} ${PROJECT_SOURCE_DIR}&#47;include&#47;MyMegaLib}</code> is pointing to the correct directory that contains all the required header files?  Also you have typos in this command it needs to at least be <code>target_include_directories(${MY_MEGA_PROJECT} PRIVATE ${PROJECT_SOURCE_DIR}&#47;include&#47;MyMegaLib)</code>.  <code>find_library</code> is also wrong syntax."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10645353, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ovoshnoe Ragoo", "link": "https://stackoverflow.com/users/10645353/ovoshnoe-ragoo"}, "edited": false, "score": 0, "creation_date": 1543412626, "post_id": 53520729, "comment_id": 93910311, "body": "I am linking library to my project (which is library too) exactly as you wrote, and the problem is still here."}, {"owner": {"reputation": 9269, "user_id": 671366, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/saZXI.png?s=128&g=1", "display_name": "codeling", "link": "https://stackoverflow.com/users/671366/codeling"}, "reply_to_user": {"reputation": 13, "user_id": 10645353, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ovoshnoe Ragoo", "link": "https://stackoverflow.com/users/10645353/ovoshnoe-ragoo"}, "edited": false, "score": 0, "creation_date": 1543413157, "post_id": 53520729, "comment_id": 93910676, "body": "You didn&#39;t show it that&#39;s why I thought that was the reason ;). I&#39;m doing this in the same CMake configuration run - are you cmake&#39;ing your library and your project in a different cmake run? then there might be additional steps required (but I&#39;m unfortunately out of my depth as to what those might be...)"}, {"owner": {"reputation": 13, "user_id": 10645353, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ovoshnoe Ragoo", "link": "https://stackoverflow.com/users/10645353/ovoshnoe-ragoo"}, "edited": false, "score": 0, "creation_date": 1543413499, "post_id": 53520729, "comment_id": 93910895, "body": "Finally added full hierarchy description in post, please look"}, {"owner": {"reputation": 9269, "user_id": 671366, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/saZXI.png?s=128&g=1", "display_name": "codeling", "link": "https://stackoverflow.com/users/671366/codeling"}, "reply_to_user": {"reputation": 13, "user_id": 10645353, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ovoshnoe Ragoo", "link": "https://stackoverflow.com/users/10645353/ovoshnoe-ragoo"}, "edited": false, "score": 0, "creation_date": 1543413662, "post_id": 53520729, "comment_id": 93910996, "body": "Updated my answer as well (though I can&#39;t give you specifics on this export/import procedure unfortunately)! Hope this helps..."}], "tags": [], "owner": {"reputation": 9269, "user_id": 671366, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/saZXI.png?s=128&g=1", "display_name": "codeling", "link": "https://stackoverflow.com/users/671366/codeling"}, "is_accepted": false, "score": 0, "last_activity_date": 1543413623, "last_edit_date": 1543413623, "creation_date": 1543412201, "answer_id": 53520729, "question_id": 53520525, "link": "https://stackoverflow.com/questions/53520525/cmake-how-to-inherit-static-library-includes-and-dependencies/53520729#53520729", "title": "CMake - How to inherit static library includes and dependencies?", "body": "<p>As far as I can tell, in my project it's the <code>TARGET_LINK_LIBRARIES</code> call that pulls in the things exported in the library - don't you have something like that in your case? \nSomething like:</p>\n\n<pre><code>TARGET_LINK_LIBRARIES(${MY_MEGA_PROJECT} ${MY_MEGA_LIB_NAME})\n</code></pre>\n\n<p>But this is when specifying include directories/libraries inside the same CMake run.</p>\n\n<p>When you want to reuse a library build in another CMake run, you probably have to <a href=\"https://gitlab.kitware.com/cmake/community/wikis/doc/tutorials/Exporting-and-Importing-Targets\" rel=\"nofollow noreferrer\">import/export these targets</a> and their include directories/library dependencies etc. Libraries which do that typically generate some .cmake files in their build/install directories which provide these targets.</p>\n"}], "owner": {"reputation": 13, "user_id": 10645353, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ovoshnoe Ragoo", "link": "https://stackoverflow.com/users/10645353/ovoshnoe-ragoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 825, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1543413623, "creation_date": 1543411574, "last_edit_date": 1543413472, "question_id": 53520525, "link": "https://stackoverflow.com/questions/53520525/cmake-how-to-inherit-static-library-includes-and-dependencies", "title": "CMake - How to inherit static library includes and dependencies?", "body": "<p>I'm going to link my static library to some additional dependencies (which are installed in the system) then use this library, but my IDE says \"No such file or directory\" on inherited includes, like this:</p>\n\n<p>CMakeLists.txt of my library:</p>\n\n<pre><code>find_package(lib1 REQUIRED)\ntarget_link_libraries(${MY_MEGA_LIB_NAME} lib1::lib1)\ntarget_include_directories(${MY_MEGA_LIB_NAME} PUBLIC ${LIB1_INCLUDE_DIR})\n\nfind_package(lib2 REQUIRED)\ntarget_link_libraries(${MY_MEGA_LIB_NAME} lib2::lib2)\ntarget_include_directories(${MY_MEGA_LIB_NAME} PUBLIC ${LIB2_INCLUDE_DIR})\n</code></pre>\n\n<p>CMakeLists.txt of project which uses my library:</p>\n\n<pre><code>find_library(${CMAKE_BINARY_DIR}/lib/ MyMegaLib.a)\ntarget_include_directories(${MY_MEGA_PROJECT} ${PROJECT_SOURCE_DIR}/include/MyMegaLib}\n</code></pre>\n\n<p>Errors are like this:</p>\n\n<pre><code>fatal error: lib1.h: No such file or directory\n #include &lt;lib1.h&gt;\n</code></pre>\n\n<p>What should I do to inherit includes properly?</p>\n\n<p>_\nFull hierarchy of my libraries and executables:</p>\n\n<pre><code>pre-lib1, pre-lib2\n^^\nlib1 (installed at the CMAKE_INSTALL_PREFIX path)\n^\nMyMegaLib (static library)\n^\nMyProject(static library and an executable MyProject_tests)\n</code></pre>\n\n<p>So actually I'm getting errors about pre-lib1 and pre-lib2 about RE2 headers (prelib1.h : no such file or directory, preli2.h : no such file or directory) when I'm trying to cmake' MyProject_tests.</p>\n"}, {"tags": ["c++", "inheritance", "polymorphism", "multiple-inheritance", "pure-virtual"], "comments": [{"owner": {"reputation": 1615, "user_id": 10362622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54067bb99c90afda4a7ac844255dc6b5?s=128&d=identicon&r=PG&f=1", "display_name": "dave", "link": "https://stackoverflow.com/users/10362622/dave"}, "edited": false, "score": 0, "creation_date": 1543411722, "post_id": 53520462, "comment_id": 93909670, "body": "I would do it the other way around and inherit <code>Parent</code> from <code>Cousin</code>. This will at least generate a compile error if an author of a <code>Child</code> class forgets to reimplement <code>doUsefulWork()</code> or inherit from a class that has an implementation."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1543411727, "post_id": 53520462, "comment_id": 93909675, "body": "Or vice versa, <code>class Parent : public Cousin { ...</code> will do the trick."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1543411731, "post_id": 53520462, "comment_id": 93909678, "body": "i hope the names are just for the example here. Imho the &quot;child-parent&quot; analogon is one of the worst, as <code>struct Child : Parent</code> actually means that every <code>Child</code> <b>is-a</b> <code>Parent</code>, no wonder that it causes confusion when OO is thaught like that"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1543411976, "post_id": 53520462, "comment_id": 93909839, "body": "I&#39;m not sure whether <code>class Parent: public Cousin {</code> is such a good idea. Deriving <code>class Child1: public Parent, Cousin1 {</code> would have the base class <code>Cousin</code> twice (and that smells like the need of virtual inheritance...)"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1543412264, "post_id": 53520462, "comment_id": 93910053, "body": "What I don&#39;t understand: <code>Child1</code> accessed with a pointer to <code>Parent</code> makes the virtual method <code>doUsefulWork()</code> invisible. It&#39;s a pointer to <code>Cousin</code> which is needed. If in turn, <code>Child3</code> is accidentally not derived from any <code>CousinX</code> with overridden <code>doUsefulWork()</code>, assigning it to a pointer to <code>Cousin</code> should cause trouble. There is something subtle, I&#39;m not yet aware of."}, {"owner": {"reputation": 1147, "user_id": 8874817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40ae7c9690551846e59d73bb4ed01c7?s=128&d=identicon&r=PG&f=1", "display_name": "Detonar", "link": "https://stackoverflow.com/users/8874817/detonar"}, "edited": false, "score": 0, "creation_date": 1543412275, "post_id": 53520462, "comment_id": 93910059, "body": "Is it necessary that you inherit <code>Cousin</code>? An association would be much cleaner anyway. If you have to access protected members of <code>Cousin</code> how about making them <code>friend</code>s?"}, {"owner": {"reputation": 622, "user_id": 2316912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a58f332e3f8b2cc00e4445a3a0c80a0?s=128&d=identicon&r=PG", "display_name": "jlanik", "link": "https://stackoverflow.com/users/2316912/jlanik"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1543412281, "post_id": 53520462, "comment_id": 93910064, "body": "@Scheff  Obviously the child would then inherit only from the Parent directly"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 622, "user_id": 2316912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a58f332e3f8b2cc00e4445a3a0c80a0?s=128&d=identicon&r=PG", "display_name": "jlanik", "link": "https://stackoverflow.com/users/2316912/jlanik"}, "edited": false, "score": 0, "creation_date": 1543412401, "post_id": 53520462, "comment_id": 93910154, "body": "@jlanik I understood it the way, that <code>Cousin1</code> should provide an implementation by override. <code>Cousin</code> just brings the need for this (by the pure virtual). (as I have understood it)"}, {"owner": {"reputation": 622, "user_id": 2316912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a58f332e3f8b2cc00e4445a3a0c80a0?s=128&d=identicon&r=PG", "display_name": "jlanik", "link": "https://stackoverflow.com/users/2316912/jlanik"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1543413206, "post_id": 53520462, "comment_id": 93910711, "body": "@Scheff  I see. Well then children can inherit Cousin1 or Cousin2. It&#39;s diamond, but it should be sdafe as long as Cousin contains only pure virtual methods."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 622, "user_id": 2316912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a58f332e3f8b2cc00e4445a3a0c80a0?s=128&d=identicon&r=PG", "display_name": "jlanik", "link": "https://stackoverflow.com/users/2316912/jlanik"}, "edited": false, "score": 0, "creation_date": 1543413449, "post_id": 53520462, "comment_id": 93910865, "body": "@jlanik Actually, I think there need nothing to be changed. To call the virtual method <code>doUsefulWork()</code> the object pointer must be of type <code>Cousin*</code> (not <code>Parent*</code>). Assigning a pointer to a <code>ChildX</code> to <code>Cousin*</code> will cause compiler complaints if there is no inheritance from any derived <code>CousinX</code>. Actually, I rather see the danger that a <code>ChildX</code> is correctly derived from a <code>CousinX</code> but not from a <code>Parent</code>."}, {"owner": {"reputation": 622, "user_id": 2316912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a58f332e3f8b2cc00e4445a3a0c80a0?s=128&d=identicon&r=PG", "display_name": "jlanik", "link": "https://stackoverflow.com/users/2316912/jlanik"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1543414447, "post_id": 53520462, "comment_id": 93911506, "body": "@Scheff But he does not say anything about whether the Child instances will be accessed through Cousin pointer or reference or some other way. He just says that he wants to make sure that if you make a new class inheriting from Parent, you are required do implement a method <code>void doUsefulWork()</code>. Which to me says <code>Parent: public Cousin</code>."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 622, "user_id": 2316912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a58f332e3f8b2cc00e4445a3a0c80a0?s=128&d=identicon&r=PG", "display_name": "jlanik", "link": "https://stackoverflow.com/users/2316912/jlanik"}, "edited": false, "score": 0, "creation_date": 1543416395, "post_id": 53520462, "comment_id": 93912731, "body": "@jlanik I looked into the profile of OP. It seems to me that OP has stronger background in Java where interfaces are more common than multiple inheritance. Regarding this background, OP&#39;s question makes sense to me somehow. OP didn&#39;t say how she/he actually wants to access <code>ChildX</code>. This info would probably be helpful to clarify this."}, {"owner": {"reputation": 24928, "user_id": 997112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c52a3944cdd2eac9725e54fc548f368?s=128&d=identicon&r=PG", "display_name": "user997112", "link": "https://stackoverflow.com/users/997112/user997112"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1543418653, "post_id": 53520462, "comment_id": 93914249, "body": "@user463035818 Yes I replaced the class names with &quot;basic&quot; ones."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1544133585, "post_id": 53520462, "comment_id": 94178883, "body": "It isn&#39;t clear what your design is in term of relation between classes."}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1543412638, "creation_date": 1543412638, "answer_id": 53520849, "question_id": 53520462, "link": "https://stackoverflow.com/questions/53520462/c-enforcing-implementing-a-pure-virtual-method-from-a-different-inheritance-hi/53520849#53520849", "title": "C++ enforcing implementing a pure virtual method from a different inheritance hierarchy", "body": "<blockquote>\n  <p>How can I guard against the author of a Child subclass forgetting to inherit a Cousin subclass? I would like something which generates a compile time error.</p>\n</blockquote>\n\n<p>The reason you are implementing these interfaces is because there must be functions that consume these interfaces. If an object doesn't implement the interface you get a compiler error when passing the object to that function - that acts as an enforcing check that the object must implement that interface.</p>\n"}], "owner": {"reputation": 24928, "user_id": 997112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c52a3944cdd2eac9725e54fc548f368?s=128&d=identicon&r=PG", "display_name": "user997112", "link": "https://stackoverflow.com/users/997112/user997112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1543412638, "creation_date": 1543411388, "last_edit_date": 1543411903, "question_id": 53520462, "link": "https://stackoverflow.com/questions/53520462/c-enforcing-implementing-a-pure-virtual-method-from-a-different-inheritance-hi", "title": "C++ enforcing implementing a pure virtual method from a different inheritance hierarchy", "body": "<p>I have a <code>Parent</code> class and two <code>Child</code> classes:</p>\n\n<pre><code>class Parent\n{\n};\n\nclass Child1: public Parent\n{\n};\n\nclass Child2 : public Parent\n{\n};\n</code></pre>\n\n<p>I would like a second class hierarchy, with class <code>Cousin</code> at the top of the hierarchy and subclasses called <code>Cousin1</code>, <code>Cousin2</code> etc:</p>\n\n<pre><code>class Cousin\n{\n    virtual void doUsefulWork() = 0;\n};\n\nclass Cousin1 : public Cousin\n{\n    virtual void doUsefulWork() override\n    {\n        // One behaviour\n    }\n};\n\nclass Cousin2 : public Cousin\n{\n    virtual void doUsefulWork() override\n    {\n        // A different behaviour\n    }\n};\n</code></pre>\n\n<p>Each <code>Child</code> subclass MUST inherit a <code>Cousin</code> subclass, to have an implementation of <code>doUsefulWork()</code>:</p>\n\n<pre><code>class Child1 : public Parent, Cousin1\n{\n    // Has implementation of doUsefulWork() from Cousin1\n};\n</code></pre>\n\n<p><strong>How can I guard against the author of a <code>Child</code> subclass forgetting to inherit a <code>Cousin</code> subclass?</strong> I would like something which generates a compile time error. </p>\n\n<p>Every <code>Child</code> subclass must have access to an implementation of <code>doUsefulWork()</code>.</p>\n\n<p>I was thinking of making <code>Cousin</code> inherit from Parent and defining the pure virtual <code>doUsefulWork()</code> in <code>Parent</code>, but then I would have complicated multiple inheritance issues in <code>Child</code> subclasses?</p>\n"}, {"tags": ["c++", "codeblocks", "sdl-2"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1543412820, "post_id": 53520428, "comment_id": 93910443, "body": "Convert large negative error codes to hex and google them.  0xc000001d == STATUS_ILLEGAL_INSTRUCTION, &quot;An attempt was made to execute an illegal instruction&quot;.  That&#39;s quite a hard crash, could be a blown stack with the function return continuing into nomans-land or a corrupted DLL.  Probably the latter, maybe reinstalling the video driver could help."}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1543423158, "post_id": 53520428, "comment_id": 93917223, "body": "Compiler &amp; compiler version?  Building a 64-bit or 32-bit executable?  Self-built SDL2 or binaries?  If binaries, from where?"}], "owner": {"reputation": 80, "user_id": 7658771, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/c38up.png?s=128&g=1", "display_name": "Bicolano", "link": "https://stackoverflow.com/users/7658771/bicolano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 313, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543423089, "creation_date": 1543411279, "last_edit_date": 1543423089, "question_id": 53520428, "link": "https://stackoverflow.com/questions/53520428/loadlibrary-failed-with-error-1073741795-in-sdl2", "title": "loadlibrary failed with error -1073741795 in SDL2", "body": "<p>Help me with this \"loadlibrary failed with error -1073741795\"</p>\n\n<p>I'm using Code::Blocks &amp; SDL2.</p>\n\n<p>I asked my friend to downgrade my laptop from win10 to win7. Now i can't run my C++ programs. Every time I run my program, this error: \"loadlibrary failed with error -1073741795\" always happens.  </p>\n\n<p>But I figured out where the problem is. It's in SDL_Renderer*. Whenever Im initializing my renderer pointer then I run the program, It always ends up in error.</p>\n\n<p>Like this:</p>\n\n<pre><code>SDL_Window *window = NULL; //just for demo purpose, I'll include this declaration of window pointer.\n\nSDL_Renderer *renderer = NULL;\n\nwindow = SDL_CreateWindow(blah blah blah)\n\n//and this is the initialization where the error happens\nrenderer = SDL_CreateRenderer(window, -1,\n                              SDL_RENDERER_ACCELERATED | SDL_RENDERER_PRESENTVSYNC);\n</code></pre>\n\n<p>But when I comment out the initialization of renderer pointer;</p>\n\n<pre><code>//    renderer = SDL_CreateRenderer(window, -1,\n//                                  SDL_RENDERER_ACCELERATED | SDL_RENDERER_PRESENTVSYNC);\n</code></pre>\n\n<p>it runs just fine.</p>\n\n<p><strong>EDITED</strong>: I also figured out the same error. Its in video player like VLC. I can't play any video clips in VLC media player. But my clips run ok in Windows Media Player. The same error happens. I think the problem is in the driver I guess. But I don't know how to fix this.</p>\n"}, {"tags": ["c++", "templates", "math", "floating-point", "class-template"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1543411350, "post_id": 53520410, "comment_id": 93909447, "body": "<code>calc c;</code> --&gt; <code>calc&lt;int&gt; c;</code>? Perhaps <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">a good book on C++</a> is in order?"}], "answers": [{"tags": [], "owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "is_accepted": true, "score": 1, "last_activity_date": 1543411552, "creation_date": 1543411552, "answer_id": 53520517, "question_id": 53520410, "link": "https://stackoverflow.com/questions/53520410/argument-list-for-class-template-calc-is-missing/53520517#53520517", "title": "Argument list for class template &quot;calc&quot; is missing", "body": "<p>How is the compiler to know what kind of <code>calc</code> you want? You have to tell it:</p>\n\n<pre><code>calc&lt;int&gt; c;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>calc&lt;double&gt; c;\n</code></pre>\n\n<p>or...</p>\n"}, {"comments": [{"owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "edited": false, "score": 0, "creation_date": 1543412948, "post_id": 53520817, "comment_id": 93910538, "body": "That is not what <code>plus</code> and <code>multiplies</code> are for -- in this context, they are just the same as <code>+</code> and <code>*</code>. What the OP wants is e.g. a <code>calc&lt;float&gt;</code> class that returns a <code>float</code> even if both arguments are <code>int</code>."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "edited": false, "score": 0, "creation_date": 1543414596, "post_id": 53520817, "comment_id": 93911610, "body": "@TonyK The function definitions I was seeing were: <code>T multiply(T k1, T k2) { return k1 * k2; }</code> thus exactly matching the signature of <code>multiplies</code>, unless I&#39;m misunderstanding something?"}, {"owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "edited": false, "score": 0, "creation_date": 1543414932, "post_id": 53520817, "comment_id": 93911843, "body": "No, they are not the same: <code>multiplies(3,5)</code> will return <code>15</code>; but <code>calc&lt;float&gt;::multiply(3,5)</code> will return <code>15.0f</code>. More important, <code>divides(3,5)</code> will return <code>0</code>; but <code>calc&lt;float&gt;::divide(3,5)</code> will return <code>0.6f</code>."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "edited": false, "score": 0, "creation_date": 1543415142, "post_id": 53520817, "comment_id": 93911989, "body": "@TonyK Well it&#39;s a functor, so in looking at it again due to your comment I did catch that mistake :( But when correctly initialized, it does fully replace <code>calc</code>. I&#39;ve added an example in to demonstrate... and make sure that I did it right :J"}], "tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 1, "last_activity_date": 1543414990, "last_edit_date": 1543414990, "creation_date": 1543412515, "answer_id": 53520817, "question_id": 53520410, "link": "https://stackoverflow.com/questions/53520410/argument-list-for-class-template-calc-is-missing/53520817#53520817", "title": "Argument list for class template &quot;calc&quot; is missing", "body": "<p><a href=\"/questions/tagged/c%2b%2b\" class=\"post-tag\" title=\"show questions tagged &#39;c++&#39;\" rel=\"tag\">c++</a> is a strongly typed language, meaning that you must fully specify all types at declaration. If <code>calc</code> is templated, you cannot declare: <code>calc c</code> as that does not fully specify the type. You must provide the template parameter <code>calc</code> requires to be fully specified, for example:</p>\n\n<pre><code>calc&lt;double&gt; c\n</code></pre>\n\n<hr>\n\n<p><a href=\"https://stackoverflow.com/a/53520517/2642059\">TonyK's answer</a> already fully covers this though. I write this to comment that you are reinventing the wheel. The functionality you are writing is already available in the form of:</p>\n\n<ul>\n<li><a href=\"https://en.cppreference.com/w/cpp/utility/functional/plus\" rel=\"nofollow noreferrer\"><code>plus</code></a> to do addition</li>\n<li><a href=\"https://en.cppreference.com/w/cpp/utility/functional/multiplies\" rel=\"nofollow noreferrer\"><code>multiplies</code></a> to do multiplication</li>\n</ul>\n\n<p>And these do not require a class. So even if something like: <code>cout &lt;&lt; 1 * 5</code> did not meet your needs and you needed to enact this in the form of a function call by creating a functor object:</p>\n\n<pre><code>multiplies&lt;double&gt; foo;\n\ncout &lt;&lt; foo(1, 5);\n</code></pre>\n\n<p><a href=\"https://ideone.com/V8OigN\" rel=\"nofollow noreferrer\"><kbd>Live Example</kbd></a></p>\n"}], "owner": {"reputation": 67, "user_id": 10607704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45b773acafd667f43d62866b80d3b634?s=128&d=identicon&r=PG&f=1", "display_name": "CrDS", "link": "https://stackoverflow.com/users/10607704/crds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1678, "favorite_count": 0, "accepted_answer_id": 53520517, "answer_count": 2, "score": 0, "last_activity_date": 1543414990, "creation_date": 1543411232, "last_edit_date": 1543411914, "question_id": 53520410, "link": "https://stackoverflow.com/questions/53520410/argument-list-for-class-template-calc-is-missing", "title": "Argument list for class template &quot;calc&quot; is missing", "body": "<p>I am trying to modify the class \u201ccalc\u201d to be more generic to accept also doubles or floats. </p>\n\n<pre><code>class calc {\npublic:\n    int multiply(int x, int y);\n    int add(int x, int y);\n};\n\nint calc::multiply(int k1, int k2)\n{\n    return k1 * k2;\n}\n\nint calc::add(int k1, int k2)\n{\n    return k1 + k2;\n}\n</code></pre>\n\n<p>This is my implementation below, but I have an error E0441: argument list for class template \"calc\" is missing (line: calc c;).</p>\n\n<pre><code>template &lt; class T&gt;\nclass calc\n{\npublic:\n\n    T multiply(T x, T y);\n    T add (T x, T y);\n};\n\ntemplate &lt; class T&gt;\nT calc&lt;T&gt;::multiply(T k1, T k2)\n{\n    return k1 * k2;\n}\n\ntemplate &lt; class T&gt;\nT calc&lt;T&gt;::add(T k1, T k2)\n{\n    return k1 + k2;\n}\n\nint main()\n{\n    calc c;\n    std::cout &lt;&lt; c.multiply(1, 5);\n}\n</code></pre>\n\n<p>How do I convert the class to be a template class and function?</p>\n"}, {"tags": ["c++", "visual-studio-2013", "visual-studio-2005", "sizeof", "member-variables"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 3, "creation_date": 1543411361, "post_id": 53520397, "comment_id": 93909453, "body": "Which MSVC version are you using?"}, {"owner": {"reputation": 31, "user_id": 7098708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29b7378f41a99355da0d914659df494d?s=128&d=identicon&r=PG&f=1", "display_name": "vadim b.", "link": "https://stackoverflow.com/users/7098708/vadim-b"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1543411539, "post_id": 53520397, "comment_id": 93909574, "body": "MSVS 2013 and MSVS 2005."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1543416219, "post_id": 53520397, "comment_id": 93912621, "body": "I&#39;d imagine this means that you are working with an up to date version of IAR... versus VS2005... which is not up to date."}], "answers": [{"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1543416379, "post_id": 53520878, "comment_id": 93912723, "body": "This answer does provide some circumstantial evidence of which behavior is correct. As such I feel bad about the fact someone downvoted here, especially when such effort was put into this answer. So have a +1."}, {"owner": {"reputation": 326, "user_id": 8607301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea818d04f214a611c5d007249f85c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Manuel Ramos", "link": "https://stackoverflow.com/users/8607301/jos%c3%a9-manuel-ramos"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1544098028, "post_id": 53520878, "comment_id": 94160189, "body": "I don&#39;t feel bad about downvoting. I&#39;m feeling good somebody could read it and understands it, even if they downvote or upvote that. The standards are not the real world, but the compilers out there, are."}], "tags": [], "owner": {"reputation": 326, "user_id": 8607301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea818d04f214a611c5d007249f85c1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Manuel Ramos", "link": "https://stackoverflow.com/users/8607301/jos%c3%a9-manuel-ramos"}, "is_accepted": false, "score": 0, "last_activity_date": 1554561008, "last_edit_date": 1554561008, "creation_date": 1543412701, "answer_id": 53520878, "question_id": 53520397, "link": "https://stackoverflow.com/questions/53520397/sizeof-in-static-const-member-initialization/53520878#53520878", "title": "sizeof in static const member initialization", "body": "<h2>What do you have?</h2>\n\n<p>You have the definition of a <code>class</code> named <code>A</code>. </p>\n\n<p>Your class <strong>has</strong> a <code>unsigned long</code> named <code>a</code>.</p>\n\n<p>Your class <strong>has</strong> a <code>static const unsigned long</code> named <code>b</code>.</p>\n\n<p>In certain C++ compilers, <strong>static</strong> and <strong>non-static</strong> members of a <code>class</code> can't be mixed, specially in the definition stage.</p>\n\n<h2>What do you want?</h2>\n\n<pre><code>static const unsigned long b = sizeof(unsigned long);\n</code></pre>\n\n<p>This is not exactly what you want, but this is how a smart compiler try to figure out.</p>\n\n<h2>WHY???</h2>\n\n<p>Because static members doesn't limit their scope to the object definition. They overpass the object scope and can be accessed from everywhere simply outputting <code>A::b</code> in the console using <code>std::cout &lt;&lt; A::b &lt;&lt; std::endl</code>, for example.</p>\n\n<p>Clang doesn't accept this construction, GCC does (both with <code>-g -std=c++98</code>)</p>\n\n<p>MSVC 19.14 (visual studio 15.7) doesn't accept it, too, but visual studio 15.8, with MSVC 19.15, does.</p>\n\n<p>Choose carefully.</p>\n\n<h2>Where I check all this stuff?</h2>\n\n<p>Here I check lots of compilers: <a href=\"https://godbolt.org/\" rel=\"nofollow noreferrer\">https://godbolt.org/</a>\nThis is one method, but you must evade this kind of hacks in the future.</p>\n\n<h2>Magic code to check and blame</h2>\n\n<p>The blame part is for mixing C and C++. It's only for compile with older versions without any checks:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nclass A\n{\npublic:\n\n    unsigned long a;\n    static const unsigned long b = sizeof(a); // \"error C2327: 'A::a' : is not a type name, static, or enumerator\" in VC++\n};\n\nint main (void)\n{\n    printf ( \"Hello World\" ); // I strongly not recommend using printf's in C++ code. \n    printf ( \"%d\", A::b );    // This is only to fill a functional example, not a rightful one.\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1543413286, "last_edit_date": 1543413286, "creation_date": 1543412709, "answer_id": 53520880, "question_id": 53520397, "link": "https://stackoverflow.com/questions/53520397/sizeof-in-static-const-member-initialization/53520880#53520880", "title": "sizeof in static const member initialization", "body": "<p>Your MSVS versions are quite old, so based on that, and assuming they default to C++03, they are correct to reject your code. I'll quote <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1905.pdf\" rel=\"nofollow noreferrer\">n1905</a>, which for our purposes is pretty close to the C++03 standard.</p>\n\n<blockquote>\n  <p><strong>9.4 [class.static]</strong> (emphasis mine)</p>\n  \n  <p>If an unqualified-id (5.1) is used in the definition of a static\n  member following the member\u2019s declarator-id, and name lookup (3.4.1)\n  finds that the unqualified-id refers to a static member, enumerator,\n  or nested type of the member\u2019s class (or of a base class of the\n  member\u2019s class), the unqualified-id is transformed into a qualified-id\n  expression in which the nested-name-specifier names the class scope\n  from which the member is referenced. <strong>The definition of a static member\n  shall not use directly the names of the non-static members of its\n  class or of a base class of its class (including as operands of the\n  sizeof operator). The definition of a static member may only refer to\n  these members to form pointer to members (5.3.1) or with the class\n  member access syntax (5.2.5).</strong></p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1543414796, "post_id": 53521388, "comment_id": 93911749, "body": "Keyword is <i>should</i>. And I&#39;m not sure C++11 was the default standard for MSVC2013 back then."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1543414877, "post_id": 53521388, "comment_id": 93911814, "body": "According to <a href=\"https://msdn.microsoft.com/en-us/library/hh567368.aspx\" rel=\"nofollow noreferrer\">this source</a>, C++11 is not entirely supported even in MSVC2015."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1543415412, "post_id": 53521388, "comment_id": 93912181, "body": "@AlgirdasPreid\u017eius You&#39;re not wrong... Even VS2015 has some outstanding C++11 deficiencies. Or maybe I should just say C++ standard deficiencies :( I&#39;ll reword just to be clear. What I was trying to communicate is that <code>sizeof(a)</code> is actually valid code now... It&#39;s just a Visual Studio discrepancy that prevented it from compiling."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1543415593, "post_id": 53521388, "comment_id": 93912281, "body": "@StoryTeller Yeah, I&#39;ve clarified. As has been pointed out VS2013 didn&#39;t even claim to be C++11 compliant."}], "tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 1, "last_activity_date": 1543415517, "last_edit_date": 1543415517, "creation_date": 1543414264, "answer_id": 53521388, "question_id": 53520397, "link": "https://stackoverflow.com/questions/53520397/sizeof-in-static-const-member-initialization/53521388#53521388", "title": "sizeof in static const member initialization", "body": "<p><a href=\"https://stackoverflow.com/a/53520880/2642059\">StoryTeller's answer</a> specifies why this didn't work on <a href=\"/questions/tagged/visual-studio-2005\" class=\"post-tag\" title=\"show questions tagged &#39;visual-studio-2005&#39;\" rel=\"tag\">visual-studio-2005</a>. Namely because it wasn't supported until <a href=\"/questions/tagged/c%2b%2b11\" class=\"post-tag\" title=\"show questions tagged &#39;c++11&#39;\" rel=\"tag\">c++11</a>.</p>\n\n<p>As far as <a href=\"/questions/tagged/visual-studio-2013\" class=\"post-tag\" title=\"show questions tagged &#39;visual-studio-2013&#39;\" rel=\"tag\">visual-studio-2013</a> it's not <em>fully</em> <a href=\"/questions/tagged/c%2b%2b11\" class=\"post-tag\" title=\"show questions tagged &#39;c++11&#39;\" rel=\"tag\">c++11</a> compliant. But I've validated that this code works around the deficiency:</p>\n\n<pre><code>static const unsigned long b = sizeof(decltype(a))\n</code></pre>\n\n<p>If you want something that will work with <a href=\"/questions/tagged/visual-studio-2005\" class=\"post-tag\" title=\"show questions tagged &#39;visual-studio-2005&#39;\" rel=\"tag\">visual-studio-2005</a> as well, consider making <code>b</code> a global, instead of a static member of <code>A</code>:</p>\n\n<pre><code>const unsigned long b = sizeof(A().a)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1543418851, "post_id": 53522113, "comment_id": 93914399, "body": "I believe this to be correct (though I don&#39;t have VS2015 to check.) I just couldn&#39;t figure out the feature name that Microsoft gave to this portion of the spec, so I couldn&#39;t find anything authoritative on the timeline in which support was gained. <a href=\"https://stackoverflow.com/a/53521388/2642059\"><code>decltype</code> can be used to workaround this deficiency circa VS 2012</a>. So I&#39;d really like to read about the limitation... If you could provide a link to source your statements it&#39;s worth a +1 to ya!"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 1, "creation_date": 1543419838, "post_id": 53522113, "comment_id": 93915096, "body": "@JonathanMee: Informally, you could check the value of __cplusplus on the compiler: MSVC2017 is the earliest one that has this to a C++11 value. Probably only worth 1/2 in integer arithmetic ;-)"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 0, "last_activity_date": 1543416469, "creation_date": 1543416469, "answer_id": 53522113, "question_id": 53520397, "link": "https://stackoverflow.com/questions/53520397/sizeof-in-static-const-member-initialization/53522113#53522113", "title": "sizeof in static const member initialization", "body": "<p><code>static</code> <code>const</code>-qualified member in-class initialisers using non-<code>static</code> members were not part of the C++ standard until C++11.</p>\n\n<p>The earliest MSVC compiler that fully supports C++11 is MSVC2017.</p>\n\n<p>That compiler will compile your code correctly.</p>\n"}], "owner": {"reputation": 31, "user_id": 7098708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29b7378f41a99355da0d914659df494d?s=128&d=identicon&r=PG&f=1", "display_name": "vadim b.", "link": "https://stackoverflow.com/users/7098708/vadim-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 53520880, "answer_count": 4, "score": 1, "last_activity_date": 1554561008, "creation_date": 1543411197, "last_edit_date": 1553878171, "question_id": 53520397, "link": "https://stackoverflow.com/questions/53520397/sizeof-in-static-const-member-initialization", "title": "sizeof in static const member initialization", "body": "<p>I have such code:</p>\n\n<pre><code>class A\n{\npublic:\n\n    unsigned long a;\n    static const unsigned long b = sizeof(a); // \"error C2327: 'A::a' : is not a type name, static, or enumerator\" in VC++\n};\n</code></pre>\n\n<p>I got compiler error in VC++ and no errors in IAR.\nWhich compiler is right, what C++ standart says about it?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 2, "creation_date": 1543416447, "post_id": 53520311, "comment_id": 93912766, "body": "Instead of painting a line edit yourself just create it (the object) in <code>QStyledItemDelegate::createEditor()</code> function."}, {"owner": {"reputation": 1, "user_id": 10492643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93afa93b22e62752e43740816e892b6c?s=128&d=identicon&r=PG&f=1", "display_name": "NecroDriver", "link": "https://stackoverflow.com/users/10492643/necrodriver"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1543455922, "post_id": 53520311, "comment_id": 93929750, "body": "if use QStyledItemDelegate::createEditor(),the QLineEdit will show when item set Qt::EditRole,but i  just want it show like QML&#39;s GridView.@vahancho"}], "owner": {"reputation": 1, "user_id": 10492643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93afa93b22e62752e43740816e892b6c?s=128&d=identicon&r=PG&f=1", "display_name": "NecroDriver", "link": "https://stackoverflow.com/users/10492643/necrodriver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543429571, "creation_date": 1543410846, "last_edit_date": 1543429571, "question_id": 53520311, "link": "https://stackoverflow.com/questions/53520311/how-to-draw-a-qlineedit-in-qtableviews-qstyleitemdelegate-using-the-paint-funct", "title": "How to draw a QLineEdit in QTableView&#39;s QStyleItemDelegate using the paint function? Is there a better way to do this?", "body": "<p>QStyleItemDelegate's paintEvent can't draw a QLineEdit. If I want to implement something like folder renaming, how to do??</p>\n"}, {"tags": ["c++", "json", "depth", "realsense"], "comments": [{"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1543411129, "post_id": 53520301, "comment_id": 93909337, "body": "Does the Intel SDK include a JSON lib? If not, get one first. <a href=\"https://github.com/Tencent/rapidjson\" rel=\"nofollow noreferrer\">RapidJSON</a> and <a href=\"https://github.com/nlohmann/json\" rel=\"nofollow noreferrer\">JSON for Modern C++</a> are two popular libs."}, {"owner": {"reputation": 81, "user_id": 10701770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306c1608a4243998945c4657bd8965fb?s=128&d=identicon&r=PG&f=1", "display_name": "Wouter61636", "link": "https://stackoverflow.com/users/10701770/wouter61636"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1543413082, "post_id": 53520301, "comment_id": 93910625, "body": "Yes, the JSON libs are provided on (<a href=\"https://github.com/IntelRealSense/librealsense/wiki/D400-Series-Visual-Presets\" rel=\"nofollow noreferrer\">github.com/IntelRealSense/librealsense/wiki/&hellip;</a>)"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1543413386, "post_id": 53520301, "comment_id": 93910816, "body": "Great, then show the code you&#39;re written to try to read the preset configuration as a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 81, "user_id": 10701770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306c1608a4243998945c4657bd8965fb?s=128&d=identicon&r=PG&f=1", "display_name": "Wouter61636", "link": "https://stackoverflow.com/users/10701770/wouter61636"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1543415809, "post_id": 53520301, "comment_id": 93912389, "body": "Well, i do like to see an example on how to do this since i have no clue.  From the rs_option.h headerfile i can find the following declerations:  /** \\brief For RS400 devices: provides optimized settings (presets) for specific types of usage. <i>/     typedef enum rs2_rs400_visual_preset     {         RS2_RS400_VISUAL_PRESET_REMOVE_IR_PATTERN,         RS2_RS400_VISUAL_PRESET_COUNT      } rs2_rs400_visual_preset;     const char</i> rs2_rs400_visual_preset_to_string(rs2_rs400_visual_preset preset);"}, {"owner": {"reputation": 81, "user_id": 10701770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306c1608a4243998945c4657bd8965fb?s=128&d=identicon&r=PG&f=1", "display_name": "Wouter61636", "link": "https://stackoverflow.com/users/10701770/wouter61636"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1543416557, "post_id": 53520301, "comment_id": 93912845, "body": "I am sorry, i am having some trouble with using enter and shift+enter while typing a comment and have reached my maximum number of edits."}, {"owner": {"reputation": 81, "user_id": 10701770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306c1608a4243998945c4657bd8965fb?s=128&d=identicon&r=PG&f=1", "display_name": "Wouter61636", "link": "https://stackoverflow.com/users/10701770/wouter61636"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1543416591, "post_id": 53520301, "comment_id": 93912866, "body": "Another code snippet i found in rs_advanced_mode.hpp reading a most promising decleration:  ` void load_json(const std::string&amp; json_content)         {             rs2_error* e = nullptr;             rs2_load_json(_dev.get(),                           json_content.data(),                           (unsigned int)json_content.size(),                           &amp;e);             rs2::error::handle(e);         } ` Can anyone explain on how to either use the pre set configurations of my previous comment or how to use the above described load_json function?"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1543425226, "post_id": 53520301, "comment_id": 93918388, "body": "Dont add it as comment. Edit your original question."}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 6656166, "user_type": "registered", "profile_image": "https://graph.facebook.com/683998024/picture?type=large", "display_name": "KyranF", "link": "https://stackoverflow.com/users/6656166/kyranf"}, "edited": false, "score": 0, "creation_date": 1568198300, "post_id": 53633791, "comment_id": 102196457, "body": "This is great, but I&#39;ve just tried this and it doesn&#39;t appear to be actually applying the JSON settings to the device. I can save/serialize the device&#39;s current settings nicely, but loading with various methods stills seems to fail silently.   <code>advanced_mode_dev.load_json(str);</code> appears to succeed but actually it doesn&#39;t apply to the device."}], "tags": [], "owner": {"reputation": 81, "user_id": 10701770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306c1608a4243998945c4657bd8965fb?s=128&d=identicon&r=PG&f=1", "display_name": "Wouter61636", "link": "https://stackoverflow.com/users/10701770/wouter61636"}, "is_accepted": true, "score": 3, "last_activity_date": 1544017546, "creation_date": 1544017546, "answer_id": 53633791, "question_id": 53520301, "link": "https://stackoverflow.com/questions/53520301/how-to-load-json-file-to-realsense-d435-camera-using-c-and-intel-api/53633791#53633791", "title": "how to load .JSON file to RealSense D435 camera using C++ and intel API", "body": "<p>I found out how to do it and here is the code snippet including some extra image retrieving code that has to be put in Main():</p>\n\n<pre><code>// Obtain a list of devices currently present on the system\ncontext ctx;\nauto devices = ctx.query_devices();\nsize_t device_count = devices.size();\nif (!device_count)\n{\n    cout &lt;&lt;\"No device detected. Is it plugged in?\\n\";\n    return EXIT_SUCCESS;\n}\n\n// Get the first connected device\nauto dev = devices[0];\n\n// Enter advanced mode\n   if (dev.is&lt;rs400::advanced_mode&gt;())\n   {\n       // Get the advanced mode functionality\n       auto advanced_mode_dev = dev.as&lt;rs400::advanced_mode&gt;();\n\n       // Load and configure .json file to device\n       ifstream t(\"./presets/ShortRangePreset.json\");\n       string str((istreambuf_iterator&lt;char&gt;(t)), istreambuf_iterator&lt;char&gt;());\n       advanced_mode_dev.load_json(str);\n   }\n   else\n   {\n       cout &lt;&lt; \"Current device doesn't support advanced-mode!\\n\";\n       return EXIT_FAILURE;\n   }\n\n//Contruct a pipeline which abstracts the device\n    rs2::pipeline pipe;\n    rs2::device selected_device = dev;\n    auto depth_sensor = selected_device.first&lt;rs2::depth_sensor&gt;();\n\n    //Create a configuration for configuring the pipeline with a non default profile\n    rs2::config cfg;\n\n    //Add desired streams to configuration\n    cfg.enable_stream(RS2_STREAM_INFRARED,  ImageWidth_px, ImageHeight_px, RS2_FORMAT_Y8, FrameRate);\n    cfg.enable_stream(RS2_STREAM_DEPTH,     ImageWidth_px, ImageHeight_px, RS2_FORMAT_Z16, FrameRate);\n\n    //Instruct pipeline to start streaming with the requested configuration\n    pipe.start(cfg);\n\n    // Camera warmup - dropping several first frames to let auto-exposure stabilize\n    rs2::frameset frames;\n    for(int i = 0; i &lt; 5; i++)\n    {\n        //Wait for all configured streams to produce a frame\n        frames = pipe.wait_for_frames();\n    }\n\n    bool quit = false;\n    char key;\n\n    while (!quit){\n\n        frames = pipe.wait_for_frames();\n\n        //Get each frame\n        rs2::frame          ir_frame    = frames.first(RS2_STREAM_INFRARED);\n        rs2::depth_frame    depth_frame = frames.get_depth_frame();\n\n        // Creating OpenCV matrix from IR image\n        Mat ir      (Size(ImageWidth_px, ImageHeight_px), CV_8UC1,  (void*)ir_frame.get_data(),     Mat::AUTO_STEP);\n        Mat depth   (Size(ImageWidth_px, ImageHeight_px), CV_16UC1, (void*)depth_frame.get_data(),  Mat::AUTO_STEP);\n\n        // etc the rest of your code on how you want to edit/process the images\n        }\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 10701770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306c1608a4243998945c4657bd8965fb?s=128&d=identicon&r=PG&f=1", "display_name": "Wouter61636", "link": "https://stackoverflow.com/users/10701770/wouter61636"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2845, "favorite_count": 2, "accepted_answer_id": 53633791, "answer_count": 1, "score": 5, "last_activity_date": 1544017546, "creation_date": 1543410796, "question_id": 53520301, "link": "https://stackoverflow.com/questions/53520301/how-to-load-json-file-to-realsense-d435-camera-using-c-and-intel-api", "title": "how to load .JSON file to RealSense D435 camera using C++ and intel API", "body": "<p>I'm trying to tune my depth camera (RealSense D435) to get better/different depth data. Therefore i want to experiment with the different pre sets from intel's adviced parameter configuration as explained in <a href=\"https://github.com/IntelRealSense/librealsense/wiki/D400-Series-Visual-Presets\" rel=\"noreferrer\">the intel SDK</a>. Intel advices to use the pre sets and to <strong>not</strong> try to tune and fiddle with the 50+ paramaters yourself.</p>\n\n<p>As much as i'd like to ignore that comment of intel, i am unable to even upload/read/process the  pre set configuration pre sets which are provided as a .JSON file (C++). Is anyone able to show a code snippet in which a .JSON file is succesfully used to change the advanced settings of the generated depth image of a  Realsense D400 series camera?</p>\n"}, {"tags": ["c++", "fstream"], "comments": [{"owner": {"reputation": 3, "user_id": 10681480, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RA-kDJrRdC8/AAAAAAAAAAI/AAAAAAAAAAc/kiRcU7ZdiSY/photo.jpg?sz=128", "display_name": "Lukas Ptakauskas", "link": "https://stackoverflow.com/users/10681480/lukas-ptakauskas"}, "edited": false, "score": 0, "creation_date": 1543409443, "post_id": 53519886, "comment_id": 93908307, "body": "to be more specific, how to say <code>ifsteam myFile Filename</code> I undertand that there may not be an option to open it too in the same line of code."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1543409521, "post_id": 53519886, "comment_id": 93908367, "body": "You can give the path directly to the constructor."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1543410323, "post_id": 53519886, "comment_id": 93908838, "body": "kudos for coding by remembering, I usually have to consult some documentation"}], "answers": [{"tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": true, "score": 5, "last_activity_date": 1543409542, "creation_date": 1543409542, "answer_id": 53519937, "question_id": 53519886, "link": "https://stackoverflow.com/questions/53519886/c-open-file-in-one-line/53519937#53519937", "title": "c++ open file in one line", "body": "<p>You can use the constructor to specify the filename:</p>\n\n<p><code>ifstream inputFile(\"data.txt\");</code></p>\n\n<p>See the details for <a href=\"https://en.cppreference.com/w/cpp/io/basic_ifstream/basic_ifstream\" rel=\"noreferrer\"><code>std::basic_ifstream (constructor)</code></a>.</p>\n\n<blockquote>\n  <p>explicit basic_ifstream( const char* filename,\n                  std::ios_base::openmode mode = ios_base::in );</p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>First, performs the same steps as the default constructor, then associates the stream with a file by calling rdbuf()->open(filename, mode | std::ios_base::in) (see std::basic_filebuf::open for the details on the effects of that call). If the open() call returns a null pointer, sets setstate(failbit)</p>\n</blockquote>\n"}], "owner": {"reputation": 3, "user_id": 10681480, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RA-kDJrRdC8/AAAAAAAAAAI/AAAAAAAAAAc/kiRcU7ZdiSY/photo.jpg?sz=128", "display_name": "Lukas Ptakauskas", "link": "https://stackoverflow.com/users/10681480/lukas-ptakauskas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 0, "accepted_answer_id": 53519937, "answer_count": 1, "score": -6, "last_activity_date": 1543409636, "creation_date": 1543409368, "last_edit_date": 1543409636, "question_id": 53519886, "link": "https://stackoverflow.com/questions/53519886/c-open-file-in-one-line", "title": "c++ open file in one line", "body": "<p>I've got these two lines of code</p>\n\n<pre><code>ifstream inputFile;\ninputFile.open(\"data.txt\");\n</code></pre>\n\n<p>I vaguely remember there being a way to do something similiar using one line of code instead. \nHow to do it in one line?</p>\n"}, {"tags": ["c++", "gcc", "language-lawyer", "c++17", "template-argument-deduction"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 2, "creation_date": 1543409167, "post_id": 53519699, "comment_id": 93908127, "body": "Clang won&#39;t compile this <code>B2 b21 { a };</code>"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 4, "creation_date": 1543409498, "post_id": 53519699, "comment_id": 93908348, "body": "I think that you have an imperfect understanding of what perfect forwarding means. Because your template argument is on the class, not the constructor, you are accepting r-value references, no forwarding references."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1543409814, "post_id": 53519699, "comment_id": 93908529, "body": "@AndyG: I think OP uses the wrong term, as there is the Template Argument Deduction with <code>T&amp;&amp;</code> (with <code>T</code> from class)."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1543409901, "post_id": 53519699, "comment_id": 93908585, "body": "To clarify OP&#39;s question: should <code>b21</code> be <code>B2&lt;A&amp;&gt;</code>, or should it not compile ?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1543410033, "post_id": 53519699, "comment_id": 93908670, "body": "<code>B1</code> and <code>B2</code> should behave the same."}, {"owner": {"reputation": 1889, "user_id": 7038446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38faf3b21f6b84c3d25269cf3919d8a?s=128&d=identicon&r=PG&f=1", "display_name": "felix", "link": "https://stackoverflow.com/users/7038446/felix"}, "edited": false, "score": 0, "creation_date": 1543410768, "post_id": 53519699, "comment_id": 93909102, "body": "<a href=\"https://stackoverflow.com/questions/47986284/perfect-forwarding-with-class-template-argument-deduction\">Possible duplicated</a>"}, {"owner": {"reputation": 951, "user_id": 10716984, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zp9Lq.jpg?s=128&g=1", "display_name": "plexando", "link": "https://stackoverflow.com/users/10716984/plexando"}, "edited": false, "score": 0, "creation_date": 1543503350, "post_id": 53519699, "comment_id": 93950360, "body": "For those looking for a way to implicitly deduce <code>b21</code> and <code>b22</code> as <code>B2&lt;A&amp;&gt;</code> and <code>B2&lt;A&gt;</code>, respectively (as done in the code above), cf. <a href=\"https://stackoverflow.com/questions/47591455/take-a-reference-if-lvalue-and-make-a-copy-if-rvalue-i-e-make-rvalue-persistent\">here</a>."}, {"owner": {"reputation": 17841, "user_id": 331785, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5348f77500c08a662088203ef1b4be27?s=128&d=identicon&r=PG", "display_name": "Baruch", "link": "https://stackoverflow.com/users/331785/baruch"}, "edited": false, "score": 0, "creation_date": 1599593692, "post_id": 53519699, "comment_id": 112819858, "body": "Shouldn&#39;t there be another line of output (&quot;cctor from 1&quot;) between those 2 lines?"}], "answers": [{"comments": [{"owner": {"reputation": 397, "user_id": 1262557, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/54d8b0841e29841c78ccf299a1553f29?s=128&d=identicon&r=PG", "display_name": "violet_white", "link": "https://stackoverflow.com/users/1262557/violet-white"}, "edited": false, "score": 0, "creation_date": 1543428694, "post_id": 53519952, "comment_id": 93920100, "body": "You wouldn&#39;t happen to have any idea if this has been reported to the project?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 397, "user_id": 1262557, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/54d8b0841e29841c78ccf299a1553f29?s=128&d=identicon&r=PG", "display_name": "violet_white", "link": "https://stackoverflow.com/users/1262557/violet-white"}, "edited": false, "score": 1, "creation_date": 1543428857, "post_id": 53519952, "comment_id": 93920170, "body": "@jaked122 - I gave the GCC bugzilla a quick search in an effort to complete the answer. And tried on the tip of the trunk that several online IDE&#39;s host (where it was reproduced). I&#39;d guess it isn&#39;t a known bug, but I can&#39;t confirm"}, {"owner": {"reputation": 951, "user_id": 10716984, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zp9Lq.jpg?s=128&g=1", "display_name": "plexando", "link": "https://stackoverflow.com/users/10716984/plexando"}, "edited": false, "score": 0, "creation_date": 1543490473, "post_id": 53519952, "comment_id": 93943030, "body": "Bug still present in latest snapshot (9.0.0 20181125 (experimental))."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 951, "user_id": 10716984, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zp9Lq.jpg?s=128&g=1", "display_name": "plexando", "link": "https://stackoverflow.com/users/10716984/plexando"}, "edited": false, "score": 0, "creation_date": 1543490739, "post_id": 53519952, "comment_id": 93943157, "body": "@plexando - The snapshot is from 2018 11 25 (I.e. Nov 25). The report in the comment above is from yesterday."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 10, "last_activity_date": 1543409596, "creation_date": 1543409596, "answer_id": 53519952, "question_id": 53519699, "link": "https://stackoverflow.com/questions/53519699/perfect-forwarding-in-constructors-c17/53519952#53519952", "title": "Perfect forwarding in constructors (C++17)", "body": "<p>It's a GCC bug. Forwarding references have a very clear cut definition:</p>\n\n<blockquote>\n  <p><strong>[temp.deduct.call]</strong> (emphasis mine)</p>\n  \n  <p><a href=\"https://timsong-cpp.github.io/cppwp/n4659/temp.deduct.call#3\" rel=\"noreferrer\">3</a> A <em>forwarding reference</em> is an rvalue reference to a\n  cv-unqualified template parameter <strong>that does not represent a template\n  parameter of a class template</strong> (during class template argument\n  deduction ([over.match.class.deduct])). If P is a forwarding reference\n  and the argument is an lvalue, the type \u201clvalue reference to A\u201d is\n  used in place of A for type deduction.</p>\n</blockquote>\n\n<p>In both cases <code>T</code> names a template parameter of the enclosing class during CTAD, so it should not produce a forwarding reference either way. The c'tor being defined inline or outside the class definition has no bearing on this.</p>\n"}, {"tags": [], "owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "is_accepted": false, "score": 7, "last_activity_date": 1543410719, "creation_date": 1543410719, "answer_id": 53520283, "question_id": 53519699, "link": "https://stackoverflow.com/questions/53519699/perfect-forwarding-in-constructors-c17/53520283#53520283", "title": "Perfect forwarding in constructors (C++17)", "body": "<p>It looks that GCC incorrectly treats <code>T&amp;&amp;</code> in an auto-generated deduction guide as a forwarding reference:</p>\n\n<pre><code>template &lt;typename T&gt;\nB2(T&amp;&amp; x) -&gt; B2&lt;T&gt;;\n</code></pre>\n\n<p>In this case <code>T&amp;&amp;</code> is a non-forwarding r-value reference, because it's a class parameter. Instead, GCC incorrectly deduces <code>T=A&amp;</code> parameter type and <code>B2&lt;T&gt;=B2&lt;A&amp;&gt;</code> class type, which collapses the reference type in the constructor, allowing the code to compile with an lvalue constructor argument:</p>\n\n<pre><code>constexpr B2(A&amp; x) noexcept;\n</code></pre>\n\n<p>Class template argument deduction makes no distinction between inline and and out-of-line definitions. In this particular case, <code>B2 b21 { a };</code> should fail.</p>\n"}], "owner": {"reputation": 951, "user_id": 10716984, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zp9Lq.jpg?s=128&g=1", "display_name": "plexando", "link": "https://stackoverflow.com/users/10716984/plexando"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1587, "favorite_count": 3, "accepted_answer_id": 53519952, "answer_count": 2, "score": 14, "last_activity_date": 1543427950, "creation_date": 1543408761, "last_edit_date": 1543427950, "question_id": 53519699, "link": "https://stackoverflow.com/questions/53519699/perfect-forwarding-in-constructors-c17", "title": "Perfect forwarding in constructors (C++17)", "body": "<p>Consider the following code</p>\n\n<pre><code>struct A {\n    A(int id) : id_ { id } {}\n\n    A(const A&amp; rhs) { std::cout &lt;&lt; \"cctor from \" +\n        std::to_string(rhs.id_) &lt;&lt; std::endl; }\n    A(A&amp;&amp; rhs) { std::cout &lt;&lt; \"mctor from \" +\n        std::to_string(rhs.id_) &lt;&lt; std::endl; }\n\n    int id_;\n};\n\ntemplate&lt;typename T&gt;\nstruct B1 {\n    constexpr B1(T&amp;&amp; x) noexcept : x_ { std::forward&lt;T&gt;(x) } {}\n\n    T x_;\n};\n\ntemplate&lt;typename T&gt;\nstruct B2 {\n    constexpr B2(T&amp;&amp; x) noexcept;\n\n    T x_;\n};\n\ntemplate&lt;typename T&gt;\nconstexpr\nB2&lt;T&gt;::B2(\n    T&amp;&amp; x\n) noexcept :\n    x_ { std::forward&lt;T&gt;(x) } {\n}\n\nint\nmain(\n) {\n    A a { 1 };\n\n    //B1 b11 { a }; // Not compiling\n    B1 b12 { A { 2 } };\n\n    B2 b21 { a };\n    B2 b22 { A { 3 } };\n\n    return 0;\n }\n</code></pre>\n\n<p>which yields</p>\n\n<pre><code>mctor from 2\nmctor from 3\n</code></pre>\n\n<p>So it basically looks as if the externally defined constructor perfectly forwards the value category of its argument while the inline-defined constructor does not.</p>\n\n<p>Is it that an externally defined constructor is handled like a function template (which perfectly forwards its arguments) or what's going on here?</p>\n\n<p>Links to the appropriate section of the standard would be welcome.</p>\n\n<p>I am using GCC 7.2.0.</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": true, "score": 2, "last_activity_date": 1543408656, "creation_date": 1543408656, "answer_id": 53519664, "question_id": 53519647, "link": "https://stackoverflow.com/questions/53519647/array-of-abstract-class-not-allowed/53519664#53519664", "title": "Array of abstract class not allowed", "body": "<p>Use a vector of (smart) pointers, for instance:</p>\n\n<pre><code>std::vector&lt;std::unique_ptr&lt;Exercise&gt;&gt; exercises(3);\n</code></pre>\n\n<p>Then you can use them:</p>\n\n<pre><code>exercises[0].reset(new MyExercice);\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 10607704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45b773acafd667f43d62866b80d3b634?s=128&d=identicon&r=PG&f=1", "display_name": "CrDS", "link": "https://stackoverflow.com/users/10607704/crds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 665, "favorite_count": 0, "closed_date": 1543408709, "accepted_answer_id": 53519664, "answer_count": 1, "score": 1, "last_activity_date": 1543408719, "creation_date": 1543408604, "last_edit_date": 1543408719, "question_id": 53519647, "link": "https://stackoverflow.com/questions/53519647/array-of-abstract-class-not-allowed", "closed_reason": "Duplicate", "title": "Array of abstract class not allowed", "body": "<p>I have an exercise system designed based on virtual functions. The Exercise class is an abstract class inherited by all other classes. </p>\n\n<p><img src=\"https://i.stack.imgur.com/NjPfw.png\" alt=\"UML Diagram\"></p>\n\n<pre><code>class Exercise\n{\npublic:\n    Exercise();\n    virtual void ExerciseName() = 0;\n    virtual void Height();\n    virtual void show() = 0;\n    virtual void Speed();\n    virtual void Weight();\n    ~Exercise();\n};\n</code></pre>\n\n<p>I would like to populate three sports (instances of the exercises) into an array. This is the code I have tried:</p>\n\n<pre><code>Exercise exercises[3];\n</code></pre>\n\n<p>This has the following error:\nError (active)  E0604   array of abstract class \"Exercise\" is not allowed:  OOP_2017_Q2 H:\\OOP_2017_Q2\\OOP_2017_Q2\\OOP_2017_Q2.cpp  15  </p>\n\n<p>How could I populate three exercises into an array, where the base classes uses pure virtual functions?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 1, "creation_date": 1543408388, "post_id": 53519505, "comment_id": 93907661, "body": "What if you use string values instead? I.e. <code>auto jsonValue = QJsonValue(&quot;0.1&quot;);</code>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 2, "creation_date": 1543408474, "post_id": 53519505, "comment_id": 93907714, "body": "@vahancho I think the output will be <code>&quot;Key&quot;: &quot;0.1&quot;</code> instead of <code>&quot;Key&quot;: 0.1</code>"}, {"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1543408600, "post_id": 53519505, "comment_id": 93907794, "body": "@eyllanesc, right. That&#39;s what I meant. When read this value, it can be converted to double. But I don&#39;t know whether OP is bound to particular JSON scheme."}, {"owner": {"reputation": 99, "user_id": 5606642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sa6d9.jpg?s=128&g=1", "display_name": "\u5f20\u94c1\u7537", "link": "https://stackoverflow.com/users/5606642/%e5%bc%a0%e9%93%81%e7%94%b7"}, "edited": false, "score": 0, "creation_date": 1543408693, "post_id": 53519505, "comment_id": 93907850, "body": "What is your Qt version? I am using Qt5.11.2 msvc x64, and I get 0.1 in debug and release."}, {"owner": {"reputation": 99, "user_id": 5606642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sa6d9.jpg?s=128&g=1", "display_name": "\u5f20\u94c1\u7537", "link": "https://stackoverflow.com/users/5606642/%e5%bc%a0%e9%93%81%e7%94%b7"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1543408810, "post_id": 53519505, "comment_id": 93907922, "body": "@eyllanesc std::cout"}, {"owner": {"reputation": 733, "user_id": 3840951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08ea58dbc2a5238bee0c168bc94b368?s=128&d=identicon&r=PG", "display_name": "Pedro LM", "link": "https://stackoverflow.com/users/3840951/pedro-lm"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1543408858, "post_id": 53519505, "comment_id": 93907945, "body": "If you already know why 0.1 becomes 0.10000000000000001 (i.e., the fraction 1/10 is impossible to represent in binary floating point), then surely you&#39;re already aware that any decimal stringification will necessarily be an approximation. @vahancho has the right idea: serialize your numbers as strings!"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 99, "user_id": 5606642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sa6d9.jpg?s=128&g=1", "display_name": "\u5f20\u94c1\u7537", "link": "https://stackoverflow.com/users/5606642/%e5%bc%a0%e9%93%81%e7%94%b7"}, "edited": false, "score": 0, "creation_date": 1543408935, "post_id": 53519505, "comment_id": 93907985, "body": "I just tested and as noted @\u5f20\u94c1\u7537 I get 0.1 :-)"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1543409375, "post_id": 53519505, "comment_id": 93908262, "body": "IMO this is bug in Qt (it tries to print value beyond <code>double</code> precision), check if it is not already reported."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "reply_to_user": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1543409515, "post_id": 53519505, "comment_id": 93908361, "body": "@TheQuantumPhysicist this is not a duplicate since it is different library. Here you have Qt, and the other is Jsoncpp."}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1543409550, "post_id": 53519505, "comment_id": 93908383, "body": "@MarekR This is a json issue, not a library issue. I asked about the exact same problem."}, {"owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1543409637, "post_id": 53519505, "comment_id": 93908436, "body": "@vahancho: yes, I need to send a double value, not a string."}, {"owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "edited": false, "score": 0, "creation_date": 1543409715, "post_id": 53519505, "comment_id": 93908476, "body": "Qt version is 5.6."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "reply_to_user": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1543409816, "post_id": 53519505, "comment_id": 93908534, "body": "@TheQuantumPhysicist can you explain why this is JSon issue and not library implementation issue? Note that Qt tries print value beyond precision of <code>double</code> type (it tires to print 17 significant digits), so it is clearly library bug."}, {"owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "reply_to_user": {"reputation": 733, "user_id": 3840951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08ea58dbc2a5238bee0c168bc94b368?s=128&d=identicon&r=PG", "display_name": "Pedro LM", "link": "https://stackoverflow.com/users/3840951/pedro-lm"}, "edited": false, "score": 0, "creation_date": 1543409903, "post_id": 53519505, "comment_id": 93908587, "body": "@PedroLM: it may be possible in Qt to use something like QByteArray::number(0.1, &#39;f&#39;, 4) and inject it in my QJsonObject. But I didn&#39;t find the solution yet."}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 2, "creation_date": 1543409909, "post_id": 53519505, "comment_id": 93908590, "body": "@MarekR Because according to the json standard, doubles are doubles and can&#39;t be interpreted otherwise. So there&#39;s no way around it. You may be lucky to find an implementation that deviates from there, but then that&#39;s not standard json."}, {"owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "reply_to_user": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1543410047, "post_id": 53519505, "comment_id": 93908677, "body": "@TheQuantumPhysicist: I really do not care about the standard actually. I just want my 0.1 to be serialized as 0.1. It seems actually that Qt 5.11 may take this into account though. Only problem is: I need to stick with 5.6."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "reply_to_user": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1543410140, "post_id": 53519505, "comment_id": 93908734, "body": "@TheQuantumPhysicist I don&#39;t get it <code>0.1</code> is a <code>double</code> too which will properly represent this value. It should not be represented as <code>0.10000000000000001</code> since it doesn&#39;t provide any extra information."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1543410528, "post_id": 53519505, "comment_id": 93908958, "body": "@Korchkidu Qt uses the standard for it returns the decimals, in the standard does not indicate the decimals of precision so a possible solution is to parse the QString that returns toJson () and eliminate those decimals."}, {"owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 2, "creation_date": 1543410625, "post_id": 53519505, "comment_id": 93909013, "body": "@MarekR: 0.1 cannot be represented using floating-point representation."}, {"owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1543410662, "post_id": 53519505, "comment_id": 93909043, "body": "@eyllanesc: yes, that may be a good solution."}, {"owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "reply_to_user": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1543410949, "post_id": 53519505, "comment_id": 93909218, "body": "@TheQuantumPhysicist: this is not a duplicate as it is specific to Qt. I want to find a solution to &quot;inject&quot; 0.1 in the final QJsonDocument."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1543415125, "post_id": 53519505, "comment_id": 93911976, "body": "@Korchkidu I know that OP knows that. My point is that parsing <code>0.1</code> and <code>0.10000000000000001</code> to <code>double</code> leads to exactly same representation. There is no point to print this value with such precision since it doesn&#39;t cray any extra information! That is why I&#39;m claiming it is Qt bug. When value is printed the outcome should be limited to something whne parsed will restore original <code>double</code> value. <code>0.1</code> is fulfilling this requirement."}, {"owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1543497685, "post_id": 53519505, "comment_id": 93946992, "body": "@MarekR: you are actually right. It is a Qt bug. It has been fixed from (at least) Qt 5.9."}], "owner": {"reputation": 4470, "user_id": 348388, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d4a70fc3ad40771fffc1ec0cc59604f3?s=128&d=identicon&r=PG", "display_name": "Korchkidu", "link": "https://stackoverflow.com/users/348388/korchkidu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 1, "closed_date": 1543410023, "answer_count": 0, "score": 2, "last_activity_date": 1543411249, "creation_date": 1543408135, "last_edit_date": 1543411249, "question_id": 53519505, "link": "https://stackoverflow.com/questions/53519505/set-decimals-for-qjsonvalue", "closed_reason": "Duplicate", "title": "Set decimals for QJsonValue", "body": "<p>If I do:</p>\n\n<pre><code>  auto jsonValue = QJsonValue(0.1);\n  auto jsonObj = QJsonObject();\n  jsonObj.insert(\"Key\", jsonValue);\n  QJsonDocument jsonDoc(jsonObj);    \n  auto json = jsonDoc.toJson();    \n  std::cout &lt;&lt; json.toStdString() &lt;&lt; std::endl;\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>{\n    \"Key\": 0.10000000000000001\n}\n</code></pre>\n\n<p>But I would like:</p>\n\n<pre><code>{\n    \"Key\": 0.1\n}\n</code></pre>\n\n<p>Is this at least possible with Qt?</p>\n\n<p>I use Qt 5.6.</p>\n\n<p>I works fine for Qt 5.9 and Qt 5.11. Not tested with 5.10 but it should also work hopefully.</p>\n\n<p>PS: I know why 0.1 becomes 0.10000000000000001</p>\n"}, {"tags": ["c++", "multidimensional-array", "boost"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1543408468, "post_id": 53519372, "comment_id": 93907709, "body": "I&#39;m confused about the use of the term &quot;dynamic&quot; in your title. It seems like the size of the array is known at compile time?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1543408567, "post_id": 53519372, "comment_id": 93907768, "body": "Wouldn&#39;t a <code>std::array</code> of <code>std::array</code> do what you need?"}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1543408581, "post_id": 53519372, "comment_id": 93907778, "body": "template arguments are compile-time expressions but you also seem to be talking about dynamic (runtime?) sizes. Please elaborate."}, {"owner": {"reputation": 87, "user_id": 9102494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25a53a44c4f1ec0cca08249ea0eae4e0?s=128&d=identicon&r=PG&f=1", "display_name": "razvanimal", "link": "https://stackoverflow.com/users/9102494/razvanimal"}, "edited": false, "score": 0, "creation_date": 1543409282, "post_id": 53519372, "comment_id": 93908210, "body": "Right, the dynamic part refers to the extents of the dimensions, I&#39;ll rephrase."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1543425660, "post_id": 53519372, "comment_id": 93918666, "body": "<a href=\"http://eigen.tuxfamily.org/index.php?title=Tensor_support\" rel=\"nofollow noreferrer\">eigen.tuxfamily.org/index.php?title=Tensor_support</a> (though it&#39;s probably a massive overkill)."}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 9102494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25a53a44c4f1ec0cca08249ea0eae4e0?s=128&d=identicon&r=PG&f=1", "display_name": "razvanimal", "link": "https://stackoverflow.com/users/9102494/razvanimal"}, "edited": false, "score": 0, "creation_date": 1543504209, "post_id": 53522893, "comment_id": 93950924, "body": "Although I&#39;ve decided to adopt a completely different approach due to usage reasons, this answers the original question. Short and precise, good stuff!"}], "tags": [], "owner": {"reputation": 1568, "user_id": 5526072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588896494e8fd23bb0092474a5cf958d?s=128&d=identicon&r=PG", "display_name": "jwimberley", "link": "https://stackoverflow.com/users/5526072/jwimberley"}, "is_accepted": true, "score": 2, "last_activity_date": 1543418948, "creation_date": 1543418948, "answer_id": 53522893, "question_id": 53519372, "link": "https://stackoverflow.com/questions/53519372/multidimensional-array-with-dynamic-extents-without-raw-pointers/53522893#53522893", "title": "Multidimensional array with dynamic extents (without raw pointers)", "body": "<p>Here are a few techniques that I think you could use:</p>\n\n<p><strong>Variadic constructor argument</strong></p>\n\n<p>Rather than having a separate constructor for each possible dimension, you could use variadic argument techniques to create a generic N-dimensional constructor. Something that is your friend here: <code>boost::extents</code> is not required for the constructor argument, but instead anything that meets the requirements of a <a href=\"https://www.boost.org/doc/libs/1_65_1/libs/utility/Collection.html\" rel=\"nofollow noreferrer\">Collection</a>. One example is just a plain STL or boost array:</p>\n\n<pre><code>template &lt;typename... DimSizes&gt;\nPixMat(DimSizes&amp;&amp;... sizes)\n : pixMat(boost::array&lt;std::size_t, sizeof...(DimSizes)&gt;{{ static_cast&lt;size_t&gt;(sizes)...}}) {\n}\n</code></pre>\n\n<p>This isn't the most polished implementation; in particular it doesn't place much of a requirement on DimSizes, which should really all be the same unsigned integer type (see <a href=\"https://stackoverflow.com/questions/3703658/specifying-one-type-for-all-arguments-passed-to-variadic-function-or-variadic-te\">this question</a> for possible improvements). Also (for simplicity) perfect forwarding isn't implemented, but that probably just requires wrapping <code>sizes</code> with <code>std::forward&lt;DimSizes&gt;(sizes)</code> in the constructor.\nYou can consult <a href=\"https://stackoverflow.com/questions/36131809/variable-number-of-constructor-parameters-depending-on-integer-template\">this stackoverflow post</a> for possible alternative implementations.</p>\n\n<p><strong>Static assertion / SFINAE</strong></p>\n\n<p>Your template base class has a 2D constructor and 3D constructor --- or if you follow the above, a template N-dimensional constructor --- regardless of the value of the actual template parameter. You could use static assertion or SFINAE so that only the the Dims-D dimensional constructor is compilable. This will convert run-time bugs into compilation errors:</p>\n\n<pre><code>template &lt;typename... DimSizes&gt;\nPixMat(DimSizes&amp;&amp;... sizes)\n : pixMat(boost::array&lt;std::size_t, sizeof...(DimSizes)&gt;{{ static_cast&lt;size_t&gt;(sizes)...}}) {\n    static_assert(sizeof...(DimSizes) == Dims);\n}\n</code></pre>\n\n<p><strong>Dimension sizes as templates</strong></p>\n\n<p>I think this is a possible though completely orthogonal solution. It's implementation would follow from the above without too much work, but to make this interoperable with the constructor argument based solution would require a lot of hard work (i.e. to make them part of the same class or class hierarchy).</p>\n\n<p><strong>Other libraries</strong></p>\n\n<p>You might want to take a look at Eigen, for example. It does a lot of the aforementioned hard work.</p>\n"}, {"comments": [{"owner": {"reputation": 87, "user_id": 9102494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25a53a44c4f1ec0cca08249ea0eae4e0?s=128&d=identicon&r=PG&f=1", "display_name": "razvanimal", "link": "https://stackoverflow.com/users/9102494/razvanimal"}, "edited": false, "score": 0, "creation_date": 1543504115, "post_id": 53523100, "comment_id": 93950860, "body": "Unfortunately, I&#39;m not at liberty to use C++17. Still +1 for the variadic template arguments unpacking."}, {"owner": {"reputation": 5184, "user_id": 6350078, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fcbd9246215586c3ff1b5c338570dd8d?s=128&d=identicon&r=PG&f=1", "display_name": "metalfox", "link": "https://stackoverflow.com/users/6350078/metalfox"}, "reply_to_user": {"reputation": 87, "user_id": 9102494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25a53a44c4f1ec0cca08249ea0eae4e0?s=128&d=identicon&r=PG&f=1", "display_name": "razvanimal", "link": "https://stackoverflow.com/users/9102494/razvanimal"}, "edited": false, "score": 0, "creation_date": 1543507063, "post_id": 53523100, "comment_id": 93952700, "body": "@razvanimal I have added an alternate version that doesn&#39;t need fold expressions."}], "tags": [], "owner": {"reputation": 5184, "user_id": 6350078, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fcbd9246215586c3ff1b5c338570dd8d?s=128&d=identicon&r=PG&f=1", "display_name": "metalfox", "link": "https://stackoverflow.com/users/6350078/metalfox"}, "is_accepted": false, "score": 2, "last_activity_date": 1543506914, "last_edit_date": 1543506914, "creation_date": 1543419561, "answer_id": 53523100, "question_id": 53519372, "link": "https://stackoverflow.com/questions/53519372/multidimensional-array-with-dynamic-extents-without-raw-pointers/53523100#53523100", "title": "Multidimensional array with dynamic extents (without raw pointers)", "body": "<p>If I understood you correctly, you want compile-time dimension, but run-time extents.</p>\n\n<p>I would use a design like this:</p>\n\n<pre><code>template &lt;typename T,std::size_t Dim&gt;\nclass mdvector\n{\nprivate:\n  std::vector&lt;T&gt; Data;\n  std::array&lt;std::size_t,Dim&gt; Extents;\n\nprivate:\n  std::size_t Offset(std::size_t const Sum) const\n    { return Sum; }\n\n  template &lt;typename... IndexType&gt;\n  std::size_t Offset(std::size_t const Sum,std::size_t const Index,IndexType const... Indices) const\n    { return Offset(Sum*Extents[Dim-sizeof...(Indices)-1u]+Index,Indices...); }\n\npublic:\n  template &lt;typename... IndexType,typename= std::enable_if_t&lt;sizeof...(IndexType)==Dim&gt;&gt;\n  mdvector(IndexType const... Indices):\n    Data((... * Indices)), // c++17 fold expression\n    Extents{Indices...} {}\n\n  template &lt;typename... IndexType,typename= std::enable_if_t&lt;sizeof...(IndexType)==Dim&gt;&gt;\n  T const &amp;operator()(IndexType const... Indices) const\n    { return Data[Offset(0u,Indices...)]; }\n\n  template &lt;typename... IndexType,typename= std::enable_if_t&lt;sizeof...(IndexType)==Dim&gt;&gt;\n  T &amp;operator()(IndexType const... Indices)\n    { return Data[Offset(0u,Indices...)]; }\n};\n</code></pre>\n\n<p>The data are stored in a <code>std::vector</code> while the extents make up an <code>std::array</code>.</p>\n\n<p>Since I assume you want multi-dimensional access I have used a given mapping via the recursive function <code>Offset</code>. You have quite freedom in this regard.</p>\n\n<p>Here's an example of use:</p>\n\n<pre><code>int main()\n{\nmdvector&lt;double,3u&gt; myvec(2u,3u,4u);\n\nfor (int i= 0; i&lt;2; ++i)\n  for (int j= 0; j&lt;3; ++j)\n    for (int k= 0; k&lt;4; ++k)\n      myvec(i,j,k)= i;\n\nfor (int k= 0; k&lt;4; ++k)\n  {\n  for (int i= 0; i&lt;2; ++i)\n    {\n    for (int j= 0; j&lt;3; ++j)\n      std::cout &lt;&lt; myvec(i,j,k) &lt;&lt; \"\\t\";\n    std::cout &lt;&lt; \"\\n\";\n    }\n  std::cout &lt;&lt; \"\\n\";\n  }\n}\n</code></pre>\n\n<p>Since the extents are dynamic, you can change them at runtime, for example:</p>\n\n<pre><code>template &lt;typename T,std::size_t Dim&gt;\ntemplate &lt;typename... IndexType,typename= std::enable_if_t&lt;sizeof...(IndexType)==Dim&gt;&gt;\nvoid mdvector&lt;T,Dim&gt;::Resize(IndexType const... Indices)\n  { Data.resize((... * Indices)); Extents= {Indices...}; }\n</code></pre>\n\n<p>If, on the other hand, you prefer the extents to be template parameters, they should stay fixed at runtime. In that case, you would include them in the class declaration:</p>\n\n<pre><code>template &lt;typename T,std::size_t... Indices&gt;\nclass mdvector { /* ... */};\n</code></pre>\n\n<p>but the implementation would be pretty much the same. Note that specifying the dimension would be unnecessary since you can get it with <code>sizeof...(Indices)</code>.</p>\n\n<hr>\n\n<p>The fold expression in the above code is not estrictly necessary. An equivalent outcome is achieved with:</p>\n\n<pre><code>static constexpr std::size_t Product()\n  { return 1u; }\n\ntemplate &lt;typename... IndexType&gt;\nstatic constexpr std::size_t Product(std::size_t const Index,IndexType const... Indices)\n  { return Index*Product(Indices...); }\n\ntemplate &lt;typename... IndexType,typename= std::enable_if_t&lt;sizeof...(IndexType)==Dim&gt;&gt;\nmdvector(IndexType const... Indices):\n  Data(Product(Indices...)), Extents{Indices...} {}\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 9102494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25a53a44c4f1ec0cca08249ea0eae4e0?s=128&d=identicon&r=PG&f=1", "display_name": "razvanimal", "link": "https://stackoverflow.com/users/9102494/razvanimal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 0, "accepted_answer_id": 53522893, "answer_count": 2, "score": 4, "last_activity_date": 1543506914, "creation_date": 1543407687, "last_edit_date": 1543409199, "question_id": 53519372, "link": "https://stackoverflow.com/questions/53519372/multidimensional-array-with-dynamic-extents-without-raw-pointers", "title": "Multidimensional array with dynamic extents (without raw pointers)", "body": "<p>The rationale behind said array is to emulate a 2D/3D pixel matrix.</p>\n\n<p>After doing a fair amount of research and reading, I reckon Boost.MultiArray might come in handy for this. However, I still have to create a neat wrapper on top of it to allow for less verbose coding.</p>\n\n<p>Ultimately, what I want to achieve is the following:</p>\n\n<p><code>PixMat&lt;u8, 3, {2, 4, 3}&gt; pixMat;</code></p>\n\n<p>or</p>\n\n<p><code>PixMat&lt;u8, 3&gt; pixMat(2,3,4);</code></p>\n\n<p>, which would basically create a 2x4x3 matrix of u8 values.</p>\n\n<p>What I've come up with so far is:</p>\n\n<pre><code>template &lt;typename T, int Dims&gt;\nclass PixMat {\npublic:\n    typedef typename boost::multi_array&lt;T, Dims&gt; PixMatType;\n    typedef typename PixMatType::index PixMatTypeIdx;\n    PixMat(int dim1Ext, int dim2Ext) : pixMat(PixMatType(boost::extents[dim1Ext][dim2Ext])) {}\n    PixMat(int dim1Ext, int dim2Ext, int dim3Ext) : pixMat(PixMatType(boost::extents[dim1Ext][dim2Ext][dim3Ext])) {}\n\nprivate:\n    PixMatType pixMat;\n};\n\ntemplate &lt;typename T&gt;\nclass Pix2DMat : PixMat&lt;T, 2&gt; {\npublic:\n    Pix2DMat(int dim1Ext, int dim2Ext) : PixMat&lt;DataType, 2&gt;(dim1Ext, dim2Ext) {}\n};\n\ntemplate &lt;typename T&gt;\nclass Pix3DMat : PixMat&lt;T, 3&gt; {\npublic:\n    Pix3DMat(int dim1Ext, int dim2Ext, int dim3Ext) : PixMat&lt;DataType, 3&gt;(dim1Ext, dim2Ext, dim3Ext) {}\n};\n</code></pre>\n\n<p>I'm not too keen on this solution. Normally, the matrix won't be either 2D or 3D, but still, I'd like a more generic solution.</p>\n\n<p>Questions:</p>\n\n<ol>\n<li>Is there a way to provide the extents of the dimensions as template arguments as well instead of via C-TOR?</li>\n<li>Is there a better way than inheritance to achieve this e.g. template specialization, variadic templates? But then how to deal with not duplicating the <code>typedef</code>s for boost all over the place?</li>\n</ol>\n"}, {"tags": ["c++", "parallel-processing", "synchronization", "openmp"], "comments": [{"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 1, "creation_date": 1543410006, "post_id": 53519354, "comment_id": 93908655, "body": "<code>net</code> is a pointer. In a parallel section, each thread has its own copy of <code>net</code>, however, they all point to the same object. Is <code>Network::evaluate</code> thread-safe?"}, {"owner": {"reputation": 58, "user_id": 8662003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba74d470738541e6015995e41157e5?s=128&d=identicon&r=PG&f=1", "display_name": "MrLebovsky", "link": "https://stackoverflow.com/users/8662003/mrlebovsky"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1543413633, "post_id": 53519354, "comment_id": 93910975, "body": "@DanielLangr yep that&#39;s stupid mistake sorry. Now I&#39;ve replaced Network * net = m_pNetwork ----&gt; Network  net = *m_pNetwork. New problem: sum values are the same each iterations."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 1, "creation_date": 1543415007, "post_id": 53519354, "comment_id": 93911892, "body": "No idea what these sum values are. However, note that now, <code>net</code> will be after parallel loop set to a single private <code>net</code> of the thread that run the last iteration. Is it what you want? (See <code>lastprivate</code> docs.)"}, {"owner": {"reputation": 58, "user_id": 8662003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba74d470738541e6015995e41157e5?s=128&d=identicon&r=PG&f=1", "display_name": "MrLebovsky", "link": "https://stackoverflow.com/users/8662003/mrlebovsky"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1543416328, "post_id": 53519354, "comment_id": 93912690, "body": "@DanielLangr same values without lastprivate clause too"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1543416696, "post_id": 53519354, "comment_id": 93912935, "body": "Programming by trying and observing whether it works isn&#39;t in my opinion the best approach. Read some good book about OpenMP, or its documentation, or some tutorials before using it."}, {"owner": {"reputation": 58, "user_id": 8662003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba74d470738541e6015995e41157e5?s=128&d=identicon&r=PG&f=1", "display_name": "MrLebovsky", "link": "https://stackoverflow.com/users/8662003/mrlebovsky"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1543421005, "post_id": 53519354, "comment_id": 93915937, "body": "@DanielLangr my problem now in a variable &quot;net&quot; declaration. With pointer declaration sequential algorithm worked true, now it works like parallel: same sum values all the times."}, {"owner": {"reputation": 1480, "user_id": 10450594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae4c6a0ca94b3094b25f18e66d8368ff?s=128&d=identicon&r=PG&f=1", "display_name": "Brice", "link": "https://stackoverflow.com/users/10450594/brice"}, "edited": false, "score": 0, "creation_date": 1543489828, "post_id": 53519354, "comment_id": 93942679, "body": "I have never seen a variable being both declared as <code>firstprivate</code> and <code>lastprivate</code> and this may very well not be legit... although I can&#39;t find a doc that explicitly allows or forbids it. <code>lastprivate</code> is in any case not much used, as the value copied back will be the one from the last thread to complete. Which thread that will be is something one usually does not control."}, {"owner": {"reputation": 1480, "user_id": 10450594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae4c6a0ca94b3094b25f18e66d8368ff?s=128&d=identicon&r=PG&f=1", "display_name": "Brice", "link": "https://stackoverflow.com/users/10450594/brice"}, "edited": false, "score": 0, "creation_date": 1543490072, "post_id": 53519354, "comment_id": 93942843, "body": "You don&#39;t need the <code>atomic</code> clause to increment <code>incorrectEntries</code> as it is declared with a <code>reduction</code> data-sharing attribute (i.e. there is a private copy of the variable in each thread, and all will be safely summed at the end)."}, {"owner": {"reputation": 530, "user_id": 2394541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9b9b9399b329591f7be92da1c5e442?s=128&d=identicon&r=PG", "display_name": "tim18", "link": "https://stackoverflow.com/users/2394541/tim18"}, "edited": false, "score": 0, "creation_date": 1543491377, "post_id": 53519354, "comment_id": 93943502, "body": "parallel firstprivate lastprivate should work, but is best avoided, if only to achieve expected performance.  For omp simd, firstprivate isn&#39;t available.  Intel&#39;s legacy directives from prior to omp simd used to support it but firstprivate lastprivate has been dropped on the way to requiring OpenMP standard usage."}], "owner": {"reputation": 58, "user_id": 8662003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba74d470738541e6015995e41157e5?s=128&d=identicon&r=PG&f=1", "display_name": "MrLebovsky", "link": "https://stackoverflow.com/users/8662003/mrlebovsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543414501, "creation_date": 1543407621, "last_edit_date": 1543414501, "question_id": 53519354, "link": "https://stackoverflow.com/questions/53519354/firstprivate-clause-in-openmp-does-not-work", "title": "firstprivate clause in OpenMP does not work", "body": "<p>I have a loop which operate with class objects and functions. Also it calculate several sum values. I've try to parallel it with OpenMP:</p>\n\n<pre><code>    Network  net = *m_pNetwork;\n    TrainingSet tran = trainingSet;\n    omp_set_num_threads(4);\n\n    #pragma omp parallel for reduction(+:MSE, incorrectEntries) firstprivate(tran, net) lastprivate(net) private(outputIdx)  \n    for (int i = 0; i &lt; tran.size(); i++)\n    {    \n        net-&gt;Evaluate(tran[i].m_inputs);\n        Backpropagate(tran[i].m_expectedOutputs);\n\n        // Check all outputs from neural network against desired values\n        bool resultCorrect = true;\n        for (outputIdx = 0; outputIdx &lt; net-&gt;m_numOutputs; outputIdx++)\n        {\n            if (net-&gt;m_clampedOutputs[outputIdx] != tran[i].m_expectedOutputs[outputIdx])\n            {\n                resultCorrect = false;\n            }\n            MSE += pow((net-&gt;m_outputNeurons[outputIdx] - tran[i].m_expectedOutputs[outputIdx]), 2);\n        }       \n        if (!resultCorrect)\n        {\n            //#pragma omp atomic\n            incorrectEntries++;\n        }\n    }\n\n    *m_pNetwork = net;\n</code></pre>\n\n<p>My problem is the sum values are the same each iterations. So what i've not properly done?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1543407542, "post_id": 53519313, "comment_id": 93907188, "body": "Convert the value to an unsigned integer big enough to hold a pointer, and then take its 1-complement."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1543410655, "post_id": 53519313, "comment_id": 93909039, "body": "<code>~</code> is the <a href=\"https://en.cppreference.com/w/cpp/language/operator_arithmetic#Bitwise_logic_operators\" rel=\"nofollow noreferrer\">bitwise NOT operator</a>"}], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 4, "last_activity_date": 1543407665, "creation_date": 1543407665, "answer_id": 53519365, "question_id": 53519313, "link": "https://stackoverflow.com/questions/53519313/whats-does-uintptr-tvalue-method-body-mean-c/53519365#53519365", "title": "What&#39;s does `~uintptr_t(value)` method body mean? C++", "body": "<p>First it does a conversion (a.k.a. a <em>cast</em>) of <code>value</code> to the type <code>uintptr_t</code>. Then it does a bitwise negation (complement) of the resulting value.</p>\n\n<p>The code in the function is basically equivalent to</p>\n\n<pre><code>uintptr_t temporary = value;\nreturn ~temporary;\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 5803829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f588ffe4b46b5a80f3c2bd9285a7cce?s=128&d=identicon&r=PG&f=1", "display_name": "ligang", "link": "https://stackoverflow.com/users/5803829/ligang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1543407665, "creation_date": 1543407475, "question_id": 53519313, "link": "https://stackoverflow.com/questions/53519313/whats-does-uintptr-tvalue-method-body-mean-c", "title": "What&#39;s does `~uintptr_t(value)` method body mean? C++", "body": "<pre><code>typedef uintptr_t disguised_ptr_t;\ninline disguised_ptr_t DISGUISE(id value) { return ~uintptr_t(value); }\n</code></pre>\n\n<p>I read objc runtime source code recently, above code confused me.</p>\n"}, {"tags": ["c++", "excel", "com", "msdn"], "answers": [{"tags": [], "owner": {"reputation": 129, "user_id": 7006773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d95055b92d1e4cc742776cbb33c9ac0b?s=128&d=identicon&r=PG&f=1", "display_name": "usmanharoon", "link": "https://stackoverflow.com/users/7006773/usmanharoon"}, "is_accepted": true, "score": 1, "last_activity_date": 1543921986, "creation_date": 1543921986, "answer_id": 53611685, "question_id": 53518913, "link": "https://stackoverflow.com/questions/53518913/suppress-delete-sheet-warning-in-excel-using-c/53611685#53611685", "title": "Suppress delete sheet warning in excel using c++", "body": "<p>I tried all the methods and came to conclusion.This one works fine and put display alerts off.</p>\n\n<p>Code snippet:</p>\n\n<pre><code>VARIANT vBool;\nvBool.vt=VT_BOOL;\nvBool.boolVal=FALSE;\n\nhr = AutoWrap(DISPATCH_PROPERTYPUT, NULL, _pXlApp, L\"DisplayAlerts\",1,vBool);\n</code></pre>\n\n<p>This method returns S_OK:)</p>\n"}], "owner": {"reputation": 129, "user_id": 7006773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d95055b92d1e4cc742776cbb33c9ac0b?s=128&d=identicon&r=PG&f=1", "display_name": "usmanharoon", "link": "https://stackoverflow.com/users/7006773/usmanharoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 53611685, "answer_count": 1, "score": 1, "last_activity_date": 1543921986, "creation_date": 1543406139, "last_edit_date": 1543465403, "question_id": 53518913, "link": "https://stackoverflow.com/questions/53518913/suppress-delete-sheet-warning-in-excel-using-c", "title": "Suppress delete sheet warning in excel using c++", "body": "<p>I am trying to delete Excel sheet via C++ code but randomly it fails. Here is the code:</p>\n\n<pre><code>HRESULT hr = AutoWrap(DISPATCH_METHOD, NULL, pXlSheet, L\"Delete\", 0);\n</code></pre>\n\n<p>This function returns <strong><em>S_OK</em></strong> even delete sheet failed but the sheet isn't deleted from the workbook.\nI suspect this fails because warning prompt appears.How to avoid warning prompt?\nyour suggestion is highly appreciated.<a href=\"https://i.stack.imgur.com/G8KjC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G8KjC.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "freertos"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 10716895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05e40fc9e3e31a02c596be60231bcb42?s=128&d=identicon&r=PG&f=1", "display_name": "Sundev Pabla", "link": "https://stackoverflow.com/users/10716895/sundev-pabla"}, "is_accepted": false, "score": 1, "last_activity_date": 1543423601, "creation_date": 1543423601, "answer_id": 53524311, "question_id": 53518903, "link": "https://stackoverflow.com/questions/53518903/cant-read-files-bigger-than-2kb-using-freertosfat/53524311#53524311", "title": "Can&#39;t read files bigger than 2Kb using FreeRTOS+FAT", "body": "<p>Ok, I have resolved my issue.  My apologies for blaming FreeRTOS+FAT, I will explain the issue below just in case others have the same issue.</p>\n\n<p>I had created a 1MB partition on my SD Card which I believed to be Fat16.  After trying various things I decided to reformat my sd card using the following command in Linux.</p>\n\n<p>sudo mkdosfs -F 16 /dev/sdc4</p>\n\n<p>linux  gave the following warning</p>\n\n<p>WARNING: Not enough clusters for a 16 bit FAT! The filesystem will be\nmisinterpreted as having a 12 bit FAT without mount option \"fat=16\".</p>\n\n<p>This prompted me to enable Fat12 support in the FreeRTOS+Fat config file and this fixed my issue.</p>\n"}], "owner": {"reputation": 11, "user_id": 10716895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05e40fc9e3e31a02c596be60231bcb42?s=128&d=identicon&r=PG&f=1", "display_name": "Sundev Pabla", "link": "https://stackoverflow.com/users/10716895/sundev-pabla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1543423601, "creation_date": 1543406117, "question_id": 53518903, "link": "https://stackoverflow.com/questions/53518903/cant-read-files-bigger-than-2kb-using-freertosfat", "title": "Can&#39;t read files bigger than 2Kb using FreeRTOS+FAT", "body": "<p>I am using FreeRTOS v 10.1.0 , in addition I have downloaded FreeRTOS+FAT from the labs area (160919 release)</p>\n\n<p>I am using an Altera Cyclone V evaluation board and have succesfully ran FreeRTOS projects on the board using the Demo project and the available port for my board as the basis for my own applications.</p>\n\n<p>I have also succesfully mounted a partion on my SD Card and read files from the SD Card and also written files to the SD Card. </p>\n\n<p>My problems begin when I try to read a file bigger than 2K. I am using the following ff_fread command to read from a file I have previous opened and I know to be 5777 bytes long:</p>\n\n<pre><code>ff_fread( &amp;byteBuffer[0],1,5777, pxSourceFile );\n</code></pre>\n\n<p>What I find is the byte buffer is repetedly populated with the same 2048 bytes, up to the maximum of 5777 bytes. So byteBuffer[0] to byteBuffer[2047] are what I expect but then this data is repeated.</p>\n\n<p>I have also tried to read the data in 512 byte chunks and also in 2048 byte chunks in case the issue was related to a sector boundary (512 byte sector) or a cluster boundary (4 sectors per cluster).</p>\n\n<p>My suspicion is that the issue is in FreeRTOS + Fat as opposed to the Altera code for interfacing with the SD Card. This is becasue when I put a break point in the following function I see that the FreeRTOS+Fat api does actually seem to jump back to the first sector after it has successfully read 4 sectors of data. So it would seem that the Altera Api is returning the data requested by FreeRTOS + FAT.</p>\n\n<pre><code>static int32_t prvReadSd( uint8_t pucDestination,\n                          uint32_t ulSectorNumber,\n                          uint32_t ulSectorCount,\n                          FF_Disk_t pxDisk )\n{\n    int32_t errorCode = alt_sdmmc_read(pucDestination,\n    ulSectorNumber * 512,\n    ulSectorCount * 512);\n\n    return errorCode\n}\n</code></pre>\n\n<p>Any insights anyone can offer into the issues I am having will be greatly appreciated.</p>\n"}, {"tags": ["c++", "datetime", "data-structures"], "answers": [{"comments": [{"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "reply_to_user": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 1, "creation_date": 1543433060, "post_id": 53518882, "comment_id": 93922194, "body": "@JimMischel it looks like a correct answer to me. <code>std::find(Date.begin(), Date.end(), DT);</code> will return a <code>list&lt;DateTime&gt;::iterator</code> which is not convertible to <code>list&lt;int&gt;::iterator</code>. Some further explanation in this answer would be nice."}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "reply_to_user": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1543437074, "post_id": 53518882, "comment_id": 93924034, "body": "@alterigel The edited question does answer the question. The original answer was ... ambiguous."}], "tags": [], "owner": {"reputation": 6588, "user_id": 10524386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe8a1950a1d7e1eccd4cff228c5420ea?s=128&d=identicon&r=PG", "display_name": "grapes", "link": "https://stackoverflow.com/users/10524386/grapes"}, "is_accepted": false, "score": 1, "last_activity_date": 1543437103, "last_edit_date": 1543437103, "creation_date": 1543406046, "answer_id": 53518882, "question_id": 53518802, "link": "https://stackoverflow.com/questions/53518802/finding-a-clash-for-the-inserted-data-based-on-time-and-date/53518882#53518882", "title": "Finding a clash for the inserted data based on time and date", "body": "<p>Use <code>list&lt;DateTime&gt;::iterator</code> instead of <code>list&lt;int&gt;</code></p>\n"}], "owner": {"reputation": 67, "user_id": 10607704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45b773acafd667f43d62866b80d3b634?s=128&d=identicon&r=PG&f=1", "display_name": "CrDS", "link": "https://stackoverflow.com/users/10607704/crds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1543437103, "creation_date": 1543405768, "question_id": 53518802, "link": "https://stackoverflow.com/questions/53518802/finding-a-clash-for-the-inserted-data-based-on-time-and-date", "title": "Finding a clash for the inserted data based on time and date", "body": "<p>I have a DateTime class that takes the day, month, year, hour and minute as input. </p>\n\n<p>I am trying to implement a timetable structure and am trying to implement a way to find a clash for the inserted data.</p>\n\n<p>This creates an instance of the class:</p>\n\n<pre><code>DateTime DT(18, 03, 2018, 12, 15);\n</code></pre>\n\n<p>I would then like to check if the instance exists in the timetable structure.</p>\n\n<pre><code>list &lt;DateTime&gt; Date;\nDate.push_front(DT);\n</code></pre>\n\n<p>This attempts to check if the data exists in the timetable:</p>\n\n<pre><code> list&lt;int&gt;::iterator iter = std::find(Date.begin(), Date.end(), DT);\n\n    if (Date.end() == iter)\n    {\n        std::cout &lt;&lt; \"item not found\" &lt;&lt; std::endl;\n    }\n    else\n    {\n        std::cout &lt;&lt; \"Collision at DateTime:\" &lt;&lt; DT &lt;&lt; std::endl;\n    }\n</code></pre>\n\n<p>However, I have an error with the std::find because:</p>\n\n<p>Error (active)  E0312   no suitable user-defined conversion from \"std::_List_iterator, std::_List_iter_types *>>>>\" to \"std::_List_iterator, std::_List_iter_types *>>>>\" exists </p>\n\n<p>How do I resolve this error to find a clash for the inserted data?</p>\n"}, {"tags": ["c++", "base", "derived", "this-pointer"], "comments": [{"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1543405402, "post_id": 53518567, "comment_id": 93905874, "body": "<code>this</code> points to instance of object not to &quot;type&quot;. Since you have two instances of objects <code>a</code> and <code>b</code> there are two different <code>this</code> values one for each object. I wonder why it is strange for you?"}, {"owner": {"reputation": 1034, "user_id": 4735781, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r78R2.jpg?s=128&g=1", "display_name": "eneski", "link": "https://stackoverflow.com/users/4735781/eneski"}, "edited": false, "score": 0, "creation_date": 1543405558, "post_id": 53518567, "comment_id": 93905984, "body": "What does &quot;base sub object&quot; mean?"}, {"owner": {"reputation": 37, "user_id": 2906818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce72b13d1543a658f54537518d25a8ff?s=128&d=identicon&r=PG&f=1", "display_name": "user2906818", "link": "https://stackoverflow.com/users/2906818/user2906818"}, "edited": false, "score": 0, "creation_date": 1543405757, "post_id": 53518567, "comment_id": 93906113, "body": "Base sub object means the base part of the derived object. what i don&#39;t understand is this* contains the objects address and why does it differ from the address when we print the object&#39;s address using &amp; operator?"}, {"owner": {"reputation": 1034, "user_id": 4735781, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r78R2.jpg?s=128&g=1", "display_name": "eneski", "link": "https://stackoverflow.com/users/4735781/eneski"}, "edited": false, "score": 0, "creation_date": 1543405849, "post_id": 53518567, "comment_id": 93906159, "body": "no it does not differ because of the &amp;, it differs because they are different objects."}, {"owner": {"reputation": 37, "user_id": 2906818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce72b13d1543a658f54537518d25a8ff?s=128&d=identicon&r=PG&f=1", "display_name": "user2906818", "link": "https://stackoverflow.com/users/2906818/user2906818"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1543406761, "post_id": 53518567, "comment_id": 93906707, "body": "@MarekR, If you observe the first output where we print both Base and Derived addresses inside constructors using this *, we have the same address values for both base and derived .We don&#39;t have two different this values for each object. we have same value for both objects. so i am confused at this point."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1543408967, "post_id": 53518567, "comment_id": 93908002, "body": "logs which You&#39;ve included says something else (last digit is different for for each object)."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1543409106, "post_id": 53518567, "comment_id": 93908087, "body": "FYI interesting things will happen when you will use multiple inheritance. This example should be clear and obvious."}, {"owner": {"reputation": 37, "user_id": 2906818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce72b13d1543a658f54537518d25a8ff?s=128&d=identicon&r=PG&f=1", "display_name": "user2906818", "link": "https://stackoverflow.com/users/2906818/user2906818"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1543409345, "post_id": 53518567, "comment_id": 93908246, "body": "@MarekR, sorry but I could still see the same value for both in the first case in the logs i added. This is the O/P i added in the first case.                               Base Address 0x7fff500e9bdf Deri Address 0x7fff500e9bdf"}], "answers": [{"tags": [], "owner": {"reputation": 1110, "user_id": 5778465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xnd4J.jpg?s=128&g=1", "display_name": "snake_style", "link": "https://stackoverflow.com/users/5778465/snake-style"}, "is_accepted": false, "score": 1, "last_activity_date": 1543405561, "creation_date": 1543405561, "answer_id": 53518721, "question_id": 53518567, "link": "https://stackoverflow.com/questions/53518567/difference-in-address-of-base-and-derived-objects-using-this-vs-using-operato/53518721#53518721", "title": "Difference in Address of base and derived objects using *this vs using &amp; operator", "body": "<p>You  have <strong>two</strong> objects: <strong>a</strong> and <strong>b</strong>:</p>\n\n<p>a with address  0x7fff82c696de</p>\n\n<p>b with address  0x7fff82c696df</p>\n"}, {"tags": [], "owner": {"reputation": 1147, "user_id": 8874817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40ae7c9690551846e59d73bb4ed01c7?s=128&d=identicon&r=PG&f=1", "display_name": "Detonar", "link": "https://stackoverflow.com/users/8874817/detonar"}, "is_accepted": false, "score": 1, "last_activity_date": 1543406174, "last_edit_date": 1543406174, "creation_date": 1543405728, "answer_id": 53518775, "question_id": 53518567, "link": "https://stackoverflow.com/questions/53518567/difference-in-address-of-base-and-derived-objects-using-this-vs-using-operato/53518775#53518775", "title": "Difference in Address of base and derived objects using *this vs using &amp; operator", "body": "<p>Why do you get what you see? well it's because <code>a != b</code>\nYou do create 2 objects:</p>\n\n<pre><code>A a;\nB b;\n</code></pre>\n\n<p>It clearifies if you add another parameter to your class A's constructor</p>\n\n<pre><code>class A\n{\n    public:\n     A(std::string name)\n     {\n         cout&lt;&lt;name&lt;&lt;\"'s Base Address \"&lt;&lt;this&lt;&lt;endl;\n     }\n};\n</code></pre>\n\n<p>and modify your <code>main</code> function a bit</p>\n\n<pre><code>int main()\n{\n    B b(\"b\");\n    A a(\"a\");\n   cout&lt;&lt;\"a: \"&lt;&lt;&amp;a&lt;&lt;endl&lt;&lt;\"b: \"&lt;&lt;&amp;b&lt;&lt;endl;\n\n}\n</code></pre>\n\n<p>Now your output will look like this</p>\n\n<pre><code>b's Base Address 0x7fff82c696df\nb's Deri Address 0x7fff82c696df\na's Base Address 0x7fff82c696de\na: 0x7fff82c696de\nb: 0x7fff82c696df\n</code></pre>\n\n<p>Now you can see that thr result of <code>&amp; operator</code>and <code>*this</code> are equal. You just have tow different objects with, of course, two different addresses.\nYou also see that for derived class <code>B</code>, <code>this</code> has the same value in <code>B</code>s and <code>A</code>s constructor.</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 2906818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce72b13d1543a658f54537518d25a8ff?s=128&d=identicon&r=PG&f=1", "display_name": "user2906818", "link": "https://stackoverflow.com/users/2906818/user2906818"}, "edited": false, "score": 0, "creation_date": 1543408269, "post_id": 53519073, "comment_id": 93907598, "body": "Thanks for the inputs. Regarding your comment                                     &quot;In the first case, the addresses printed are the same because you created one instance. It make sense to have the same address because of having only one single object&quot;    yes here we have only one instance which is derived instance but that also contains base sub object as well right. I mean to construct a derived object we have two things to do . One is construct a base subobject and then the remainig derived object . Both these objects put together makes a complete derived object."}, {"owner": {"reputation": 1034, "user_id": 4735781, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r78R2.jpg?s=128&g=1", "display_name": "eneski", "link": "https://stackoverflow.com/users/4735781/eneski"}, "reply_to_user": {"reputation": 37, "user_id": 2906818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce72b13d1543a658f54537518d25a8ff?s=128&d=identicon&r=PG&f=1", "display_name": "user2906818", "link": "https://stackoverflow.com/users/2906818/user2906818"}, "edited": false, "score": 0, "creation_date": 1543409471, "post_id": 53519073, "comment_id": 93908324, "body": "No, that is not right. When you create a derived class&#39;s object, you did not create the base class&#39;s object. You just created one object of the derived class. By the way, there is not such a terminology &quot;base sub object&quot;."}, {"owner": {"reputation": 37, "user_id": 2906818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce72b13d1543a658f54537518d25a8ff?s=128&d=identicon&r=PG&f=1", "display_name": "user2906818", "link": "https://stackoverflow.com/users/2906818/user2906818"}, "edited": false, "score": 0, "creation_date": 1543410017, "post_id": 53519073, "comment_id": 93908662, "body": "ok. May be I got this info from <a href=\"https://stackoverflow.com/questions/18451683/c-disambiguation-subobject-and-subclass-object\" title=\"c disambiguation subobject and subclass object\">stackoverflow.com/questions/18451683/&hellip;</a>"}, {"owner": {"reputation": 1034, "user_id": 4735781, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r78R2.jpg?s=128&g=1", "display_name": "eneski", "link": "https://stackoverflow.com/users/4735781/eneski"}, "reply_to_user": {"reputation": 37, "user_id": 2906818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce72b13d1543a658f54537518d25a8ff?s=128&d=identicon&r=PG&f=1", "display_name": "user2906818", "link": "https://stackoverflow.com/users/2906818/user2906818"}, "edited": false, "score": 0, "creation_date": 1543419728, "post_id": 53519073, "comment_id": 93915022, "body": "Alright, I got what you mean now and edited my answer. Please take a look."}], "tags": [], "owner": {"reputation": 1034, "user_id": 4735781, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r78R2.jpg?s=128&g=1", "display_name": "eneski", "link": "https://stackoverflow.com/users/4735781/eneski"}, "is_accepted": false, "score": 0, "last_activity_date": 1543419695, "last_edit_date": 1543419695, "creation_date": 1543406636, "answer_id": 53519073, "question_id": 53518567, "link": "https://stackoverflow.com/questions/53518567/difference-in-address-of-base-and-derived-objects-using-this-vs-using-operato/53519073#53519073", "title": "Difference in Address of base and derived objects using *this vs using &amp; operator", "body": "<p>I think the first thing to clarify for you is understanding difference between <strong>class</strong> vs <strong>object</strong>. A <strong>class</strong> is a blueprint whereas <strong>object</strong> is an instance of the class. </p>\n\n<p>So, if you don't create an instance of the class, then you have nothing on the memory.</p>\n\n<p>In the first case, the addresses printed are the same because you created one instance. It make sense to have the same address because of having only one single object.</p>\n\n<p>In the second case, the addresses are different because of having two different objects (two instances of the class are created) not because of using <code>&amp;</code>. So, the following code prints the same addresses.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass A\n{\npublic:\n    A() { std::cout &lt;&lt; \"Address with this pointer: \" &lt;&lt; this &lt;&lt; std::endl; }\n};\n\nint main()\n{\n    A a;\n    std::cout &lt;&lt; \"Address with &amp; operator: \" &lt;&lt; &amp;a &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><strong>Edit: Why represents the same address for sub-object</strong></p>\n\n<p>As I mentioned in the comments, I never heard the term <em>sub-object</em>. But I got the below definition from <a href=\"https://stackoverflow.com/a/18452270/4735781\">here</a>.</p>\n\n<p><strong>subobject:</strong> Any object that is stored within another object (array elements, base class objects and data member objects).</p>\n\n<p>An object naturally occupies a memory and any sub-object of the object needs to seat somewhere in that memory. \nThe <em>first created sub-object</em> (in terms of order of definition) gets the first portion of the memory, <em>second created sub-object</em> gets the second portion of the memory right after first object and so on.\nSo, <em>first created sub-object</em> has the <strong>same starting address</strong> with the object itself. In the following code, the fist created object is instance of <strong>Class A</strong> ( So A and C have the same address) just because <strong>Class A</strong> is inherited before than <strong>Class B</strong>. If you change <code>class C : public A,  public B</code> to <code>class C : public B,  public A</code>, then objects of class B and class C would be the same.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass A\n{\npublic:\n    A() { std::cout &lt;&lt; \"Address of Sub-Object A: \" &lt;&lt; this &lt;&lt; std::endl; }\n    int x;\n};\n\n\nclass B\n{\npublic:\n    B() { std::cout &lt;&lt; \"Address of Sub-Object B: \" &lt;&lt; this &lt;&lt; std::endl; }\n    int y;\n};\n\nclass C : public A,  public B {\npublic:\n    C() : A() , B() { std::cout &lt;&lt; \"Address of Object C:     \" &lt;&lt; this &lt;&lt; std::endl; }\n    int z;\n\n};\n\nint main()\n{\n  C c;\n}\n</code></pre>\n\n<p><strong>PS:</strong> if you think about composition rather than inheritance, then it might be more easier to understand.</p>\n"}], "owner": {"reputation": 37, "user_id": 2906818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce72b13d1543a658f54537518d25a8ff?s=128&d=identicon&r=PG&f=1", "display_name": "user2906818", "link": "https://stackoverflow.com/users/2906818/user2906818"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1543419695, "creation_date": 1543405080, "last_edit_date": 1543408829, "question_id": 53518567, "link": "https://stackoverflow.com/questions/53518567/difference-in-address-of-base-and-derived-objects-using-this-vs-using-operato", "title": "Difference in Address of base and derived objects using *this vs using &amp; operator", "body": "<p>Can someone try to explain me why i get a difference in address of base and derived object while using this pointer and &amp; operator. Below is my code</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass A\n{\n    public:\n     A()\n     {\n         cout&lt;&lt;\"Base Address \"&lt;&lt;this&lt;&lt;endl;\n     }\n};\nclass B:public A\n{\n    public:\n    B()\n    {\n        cout&lt;&lt;\"Deri Address \"&lt;&lt;this&lt;&lt;endl;\n    }\n};\nint main()\n{\n    B b;\n\n}\n\nThe O/P is \nBase Address 0x7fff500e9bdf\nDeri Address 0x7fff500e9bdf\n</code></pre>\n\n<p>Both are same.</p>\n\n<p>When i add two more statements in the main as shown below</p>\n\n<pre><code>#include &lt;iostream&gt;\n</code></pre>\n\n<p>using namespace std;</p>\n\n<pre><code>class A\n{\n    public:\n     A()\n     {\n         cout&lt;&lt;\"Base Address \"&lt;&lt;this&lt;&lt;endl;\n     }\n};\nclass B:public A\n{\n    public:\n    B()\n    {\n        cout&lt;&lt;\"Deri Address \"&lt;&lt;this&lt;&lt;endl;\n    }\n};\nint main()\n{\n    B b;\n    A a;\n   cout&lt;&lt;&amp;a&lt;&lt;endl&lt;&lt;&amp;b&lt;&lt;endl;\n\n}\n</code></pre>\n\n<p>The O/P is as shown below</p>\n\n<pre><code>Base Address 0x7fff82c696df\nDeri Address 0x7fff82c696df\nBase Address 0x7fff82c696de\n0x7fff82c696de\n0x7fff82c696df\n</code></pre>\n\n<p>Now I could clearly see the address differs</p>\n\n<p>a) What could be the reason for this difference<br>\nb) One more thing i wanted to know is if the base sub object in derived class is exactly same as the base object? I am confused about this because if we say in a base class if we have a variable x and if we have a derived class for this base class(non polymorphic case) now if we talk about the base sub object in derived, is it the same x present in base class is also present in the base sub object of derived class (i mean the variable with same address in both base and base sub object in derived) or we have a separate copy of x in both base and base sub object of derived(i mean the variable with different address)</p>\n\n<pre><code>Please clarify?\n</code></pre>\n"}, {"tags": ["c++", "c++11", "language-lawyer"], "comments": [{"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1543405938, "post_id": 53518562, "comment_id": 93906219, "body": "@Incomputable I double-checked and I think your &quot;possible duplicate&quot; was correct."}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1543406654, "post_id": 53518562, "comment_id": 93906650, "body": "You are not creating any temporary object, so nothing dangles here"}, {"owner": {"reputation": 1889, "user_id": 7038446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c38faf3b21f6b84c3d25269cf3919d8a?s=128&d=identicon&r=PG&f=1", "display_name": "felix", "link": "https://stackoverflow.com/users/7038446/felix"}, "edited": false, "score": 0, "creation_date": 1543407227, "post_id": 53518562, "comment_id": 93907007, "body": "Both <code>a</code> refer to the same object, whose life-time ends on leaving <code>main</code>. <code>b</code> refers to a sub-object of <code>a</code>, whose life-time also ends on leaving <code>main</code>. So no dangling reference."}, {"owner": {"reputation": 1186, "user_id": 2934305, "user_type": "registered", "profile_image": "https://graph.facebook.com/1425206215/picture?type=large", "display_name": "Andreas Pasternak", "link": "https://stackoverflow.com/users/2934305/andreas-pasternak"}, "edited": false, "score": 0, "creation_date": 1543409030, "post_id": 53518562, "comment_id": 93908034, "body": "I checked the documentation of <code>static_cast</code>. What does <b>downcast</b> mean exactly in this context?"}], "answers": [{"comments": [{"owner": {"reputation": 1186, "user_id": 2934305, "user_type": "registered", "profile_image": "https://graph.facebook.com/1425206215/picture?type=large", "display_name": "Andreas Pasternak", "link": "https://stackoverflow.com/users/2934305/andreas-pasternak"}, "edited": false, "score": 0, "creation_date": 1543409050, "post_id": 53519138, "comment_id": 93908051, "body": "Can you provide some sources?"}], "tags": [], "owner": {"reputation": 1571, "user_id": 2034218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/607f22adeb07d267b740a5441eb36d6d?s=128&d=identicon&r=PG", "display_name": "Tezirg", "link": "https://stackoverflow.com/users/2034218/tezirg"}, "is_accepted": false, "score": 0, "last_activity_date": 1543406897, "creation_date": 1543406897, "answer_id": 53519138, "question_id": 53518562, "link": "https://stackoverflow.com/questions/53518562/static-cast-dangling-reference-when-downcasting/53519138#53519138", "title": "static_cast dangling reference when downcasting", "body": "<p>A dangling reference is a reference to an object that no longer exists.\nIn your code sample, there is no problem as A exists within the same scope as B and therefore the reference is always valid.</p>\n\n<p>Now, take this modified example where delete the object A, after creating a reference to it. This is in fact a dangling reference and yields undefined behavior after object A is deleted.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass A {\npublic:\n  int m;\n};\nclass B : public A {};\n\nB&amp; f(A&amp; a) {\n  return static_cast&lt;B&amp;&gt;(a);\n}\n\nint main()\n{\n  A *a = new A();\n  a-&gt;m = 42;\n  B&amp; b = f(*a);\n  std::cout &lt;&lt; b.m &lt;&lt; std::endl; // Valid                                       \n  delete a; // Dangling reference created here                                \n  std::cout &lt;&lt; b.m &lt;&lt; std::endl; // Undefined behavior                          \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": true, "score": 2, "last_activity_date": 1543410028, "creation_date": 1543410028, "answer_id": 53520074, "question_id": 53518562, "link": "https://stackoverflow.com/questions/53518562/static-cast-dangling-reference-when-downcasting/53520074#53520074", "title": "static_cast dangling reference when downcasting", "body": "<p>It is undefined behaviour, but not because of a dangling reference. The act of casting an object using <code>static_cast</code> from a parent class to the child class when it is not actually that child is undefined behaviour:</p>\n\n<pre><code> B&amp; b = f(a); // Casts `A` type to `B` incorrectly\n</code></pre>\n\n<p>See the relevant standard quote <a href=\"https://stackoverflow.com/a/49981379/1294207\">here</a>. </p>\n"}], "owner": {"reputation": 1186, "user_id": 2934305, "user_type": "registered", "profile_image": "https://graph.facebook.com/1425206215/picture?type=large", "display_name": "Andreas Pasternak", "link": "https://stackoverflow.com/users/2934305/andreas-pasternak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "closed_date": 1543412880, "accepted_answer_id": 53520074, "answer_count": 2, "score": 0, "last_activity_date": 1543410028, "creation_date": 1543405057, "question_id": 53518562, "link": "https://stackoverflow.com/questions/53518562/static-cast-dangling-reference-when-downcasting", "closed_reason": "Duplicate", "title": "static_cast dangling reference when downcasting", "body": "<p>Is the following code correct or does it yield undefined behavior due to a dangling reference and why exactly is it correct:</p>\n\n<pre><code>class A {};\nclass B : public A {};\n\nB&amp; f(A&amp; a) {\n  // Dangling reference here?\n  return static_cast&lt;B&amp;&gt;(a);    \n}\n\nint main()\n{\n  A a;\n  B&amp; b = f(a);\n}\n</code></pre>\n"}, {"tags": ["c++", "std", "complex-numbers"], "comments": [{"owner": {"reputation": 5397, "user_id": 2193020, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/aa10d01a3d48851073bd61877a56b5a7?s=128&d=identicon&r=PG", "display_name": "hnefatl", "link": "https://stackoverflow.com/users/2193020/hnefatl"}, "edited": false, "score": 4, "creation_date": 1543404844, "post_id": 53518381, "comment_id": 93905573, "body": "In any question about performance, please include details of how you generated the inputs, how many experiments you performed, how you performed the timing, the times for each experiment etc."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 1, "creation_date": 1543407877, "post_id": 53518381, "comment_id": 93907367, "body": "Try <code>-ffast-math</code>?"}, {"owner": {"reputation": 53, "user_id": 10699700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/989d9c60463b8225381d1495895822a4?s=128&d=identicon&r=PG&f=1", "display_name": "ashkan_d13", "link": "https://stackoverflow.com/users/10699700/ashkan-d13"}, "edited": false, "score": 0, "creation_date": 1543421708, "post_id": 53518381, "comment_id": 93916394, "body": "Sample code added. I tested with some other compilers and got different results."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 2, "creation_date": 1543424377, "post_id": 53518381, "comment_id": 93917922, "body": "Your time measurement has a bug, instead of printing <code>tm</code>, you should print <code>clock()-tm</code>. And it would be sensible to add your measurement results to the question as well."}, {"owner": {"reputation": 53, "user_id": 10699700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/989d9c60463b8225381d1495895822a4?s=128&d=identicon&r=PG&f=1", "display_name": "ashkan_d13", "link": "https://stackoverflow.com/users/10699700/ashkan-d13"}, "edited": false, "score": 0, "creation_date": 1543426706, "post_id": 53518381, "comment_id": 93919202, "body": "Sorry, I fixed the code and added results."}], "answers": [{"tags": [], "owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "is_accepted": false, "score": 9, "last_activity_date": 1543404861, "creation_date": 1543404861, "answer_id": 53518513, "question_id": 53518381, "link": "https://stackoverflow.com/questions/53518381/stdabsstdcomplex-too-slow/53518513#53518513", "title": "std::abs(std::complex) too slow", "body": "<p>I believe the two are not to be taken as identical in the strict sense.</p>\n\n<p>From <a href=\"https://en.cppreference.com/w/cpp/numeric/complex/abs\" rel=\"noreferrer\">cppreference on <code>std::abs(std::complex)</code></a>:</p>\n\n<blockquote>\n  <p>Errors and special cases are handled as if the function is implemented as <code>std::hypot(std::real(z), std::imag(z))</code></p>\n</blockquote>\n\n<p>Also from <a href=\"https://en.cppreference.com/w/cpp/numeric/complex/norm\" rel=\"noreferrer\">cppreference on <code>std::norm(std::complex)</code></a>:</p>\n\n<blockquote>\n  <p>The norm calculated by this function is also known as field norm or absolute square.</p>\n  \n  <p>The Euclidean norm of a complex number is provided by <code>std::abs</code>, which is more costly to compute. In some situations, it may be replaced by <code>std::norm</code>, for example, if <code>abs(z1) &gt; abs(z2)</code> then <code>norm(z1) &gt; norm(z2)</code>. </p>\n</blockquote>\n\n<p>In short, there are cases where a different result is obtained from each function. Some of these may be found in <a href=\"https://en.cppreference.com/w/cpp/numeric/math/hypot\" rel=\"noreferrer\"><code>std::hypot</code></a>. There the notes also mention the following:</p>\n\n<blockquote>\n  <p><code>std::hypot(x, y)</code> is equivalent to <code>std::abs(std::complex&lt;double&gt;(x,y))</code></p>\n</blockquote>\n\n<p>In general the accuracy of the result may be different (due to the usual floating point mess), and it seems the functions were designed in such a way to be as accurate as possible.</p>\n"}, {"tags": [], "owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "is_accepted": false, "score": 5, "last_activity_date": 1543405919, "creation_date": 1543405919, "answer_id": 53518847, "question_id": 53518381, "link": "https://stackoverflow.com/questions/53518381/stdabsstdcomplex-too-slow/53518847#53518847", "title": "std::abs(std::complex) too slow", "body": "<p>The main reason is that <code>abs</code> handles underflow and overflow during intermediate computations.</p>\n\n<p>So, if <code>norm</code> under/overflows, your formula returns an incorrect/inaccurate result, while <code>abs</code> will return the correct one (so, for example, if your input numbers are in the range of 10<sup>200</sup>, then the result should be around 10<sup>200</sup> as well. But your formula will give you <code>inf</code>, or a floating point exception, because the intermediate <code>norm</code> is around 10<sup>400</sup>, which is out of range. Note, I've supposed IEEE-754 64-bit floating point here).</p>\n\n<p>Another reason is that <code>abs</code> may give a little bit more precise result.</p>\n\n<p>If you don't need to handle these cases, because your input numbers are \"well-behaved\" (and don't need the possible more precise result), feel free to use your formula.</p>\n"}], "owner": {"reputation": 53, "user_id": 10699700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/989d9c60463b8225381d1495895822a4?s=128&d=identicon&r=PG&f=1", "display_name": "ashkan_d13", "link": "https://stackoverflow.com/users/10699700/ashkan-d13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 727, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1543426541, "creation_date": 1543404402, "last_edit_date": 1543426541, "question_id": 53518381, "link": "https://stackoverflow.com/questions/53518381/stdabsstdcomplex-too-slow", "title": "std::abs(std::complex) too slow", "body": "<p>Why running <code>std::abs</code> over a big complex array is about 8 times slower than using <code>sqrt</code> and <code>norm</code>?</p>\n\n<pre><code>#include &lt;ctime&gt;\n#include &lt;cmath&gt;\n#include &lt;vector&gt;\n#include &lt;complex&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    typedef complex&lt;double&gt; compd;\n\n    vector&lt;compd&gt; arr(2e7);\n    for (compd&amp; c : arr)\n    {\n        c.real(rand());\n        c.imag(rand());\n    }\n\n    double sm = 0;\n    clock_t tm = clock();\n    for (const compd&amp; c : arr)\n    {\n        sm += abs(c);\n    }\n    cout &lt;&lt; sm &lt;&lt; ' ' &lt;&lt; clock() - tm &lt;&lt; endl; // 5.01554e+011 - 1640 ms\n\n    sm = 0;\n    tm = clock();\n    for (const compd&amp; c : arr)\n    {\n        sm += sqrt(norm(c));\n    }\n    cout &lt;&lt; sm &lt;&lt; ' ' &lt;&lt; clock() - tm &lt;&lt; endl; // 5.01554e+011 - 154\n\n    sm = 0;\n    tm = clock();\n    for (const compd&amp; c : arr)\n    {\n        sm += hypot(c.real(), c.imag());\n    }\n    cout &lt;&lt; sm &lt;&lt; ' ' &lt;&lt; clock() - tm &lt;&lt; endl; // 5.01554e+011 - 221\n}\n</code></pre>\n"}, {"tags": ["c++", "gcc", "glibc"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1543404889, "post_id": 53518353, "comment_id": 93905600, "body": "It will work until something requires a newer symbol than the ones provided by glibc-2.13."}, {"owner": {"reputation": 51, "user_id": 3271702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff437333bf57558805f07b8d1c36f56?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3271702/andre"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1543405638, "post_id": 53518353, "comment_id": 93906041, "body": "I tested some &quot;newer&quot; C++11 features as std::thread which could not be understood by the old compiler and that runs fine. I have no clue how to stress the binary with new symbols ..."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1543558725, "post_id": 53518353, "comment_id": 93970104, "body": "&quot;It does not accept the new libc&quot; how do you know that? Anyway it doesn&#39;t matter how your gcc was built. What matters is how you compile your binaries."}], "answers": [{"tags": [], "owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "is_accepted": false, "score": 0, "last_activity_date": 1543557949, "creation_date": 1543557949, "answer_id": 53552135, "question_id": 53518353, "link": "https://stackoverflow.com/questions/53518353/using-gcc-with-new-glibc-and-binutils-to-build-software-for-system-with-older-sy/53552135#53552135", "title": "Using GCC with new glibc and binutils to build software for system with older sysroot", "body": "<p>glibc 2.14 introduced the <code>memcpy@GLIBC_2.14</code> symbol, so pretty much all software compiled against glibc 2.20 will not work on glibc 2.13 because that symbol is missing there.  Ideally, you would build your new GCC against glibc 2.13, not glibc 2.20.  You claim that building GCC 4.8.5 against glibc 2.13 is not possible, but this is clearly not true in general.</p>\n\n<p>Some newer C++ features will work with the old system libstdc++ because they depend exclusively on templates (from header files) and none of the new code in libstdc++.</p>\n\n<p>You could also investigate how the hybrid linkage model works in Red Hat Developer Toolset.  It links the newer parts of libstdc++ statically, while relying on the system libstdc++ for the common, older parts.  This way, you get proper interoperability for things like exceptions <em>and</em> you do not have to install a newer libstdc++ on the target.</p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 3271702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff437333bf57558805f07b8d1c36f56?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3271702/andre"}, "is_accepted": true, "score": 0, "last_activity_date": 1579073525, "last_edit_date": 1579073525, "creation_date": 1578297405, "answer_id": 59608512, "question_id": 53518353, "link": "https://stackoverflow.com/questions/53518353/using-gcc-with-new-glibc-and-binutils-to-build-software-for-system-with-older-sy/59608512#59608512", "title": "Using GCC with new glibc and binutils to build software for system with older sysroot", "body": "<p>Good material for this could be here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/847179/multiple-glibc-libraries-on-a-single-host\">Multiple glibc libraries on a single host</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/35873558/glibc-vs-gcc-vs-binutils-compatibility\">Glibc vs GCC vs binutils compatibility</a></p>\n\n<p>My final solution is this:</p>\n\n<p>I built the GCC 4.8.5 as a cross compiler. I could not manage to build it with the older glibc2.13, only with version 2.20. It may be possible but in my case it did not work. Anyway, that is not a problem because I also built it with the sysroot-flag. Compiling new software depends completely on my old system, including C Runtime. I don't get a new C++ standard with this, but if you switch on compiler optimizations, I experienced better binary compression and performance.\nRegarding a new C++ standard, I could link a newer libstdc++ which came with my cross compiler using -l:libstdc++.so.6.0.19 as LDDFLAG. Therefore I only need to copy an additional libstdc++ on my target beside the old libstdc++.\nAfter having a look into the symbols used by the new lib using</p>\n\n<p><code>strings libstdc++.so.6.0.19 | grep GLIBC_</code></p>\n\n<p>you can observe that it doesn't depend on any newer symbols than GLIBC_2.4. It looks like I could never run into the problem of missing symbols.\nSo in my case I have luck using a new C++11 standard without having any changes in the rest of the system. If there are introduced new symbols you need to follow the above links in my post which are pretty informative. But I would never try that for myself. In my case, with the GCC 4.9.4, libstdc++.so.6.0.20 got symbols pointing to GLIBC_2.17. That could give me trouble as I am cross compiling with GLIBC_2.13.</p>\n"}], "owner": {"reputation": 51, "user_id": 3271702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff437333bf57558805f07b8d1c36f56?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3271702/andre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 605, "favorite_count": 0, "accepted_answer_id": 59608512, "answer_count": 2, "score": 2, "last_activity_date": 1579073525, "creation_date": 1543404311, "question_id": 53518353, "link": "https://stackoverflow.com/questions/53518353/using-gcc-with-new-glibc-and-binutils-to-build-software-for-system-with-older-sy", "title": "Using GCC with new glibc and binutils to build software for system with older sysroot", "body": "<p>I have a question since some months and I can't come to an answer with Google for a long time.</p>\n\n<p>Background:\nI am cross compiling software for arm based controllers which are running the linux distribution ptxdist. The complete linux image is built with a cross gcc (4.5.2) that was built against glibc-2.13 and binutils-2.21.\nThe c++ standard is quite old so I built a new toolchain which supports c++11 (gcc 4.8.5). It now is built against glibc-2.20 and binutils-2.24. I want to use that new compiler for my application software on the controller (not the complete image, just this one \"main\" binary) which is updated through a package management system.</p>\n\n<p>The software seems to run. I just need to set LD_LIBRARY_PATH pointing to libstdc++.so.0.19 instead of libstdc++.so.14 for the binary. It does not accept the new libc, which is libc-2.20 instead of libc-2.13, though.</p>\n\n<p>So binary uses libstdc++.so.0.19 and the rest of the system is unchanged.</p>\n\n<p>Question:\nWhy is this working?\nWhat risks could I expect running this software and should I anyway?\nFor example will the binary miss some functions of glibc-2.20 in future because it just gets glibc-2.13 on the target machine? Building gcc-4.8.5 against glibc-2.13 is not possible.</p>\n\n<p>I have read so far that it depends on changes inside the ABI:\n<a href=\"https://stackoverflow.com/questions/14271249/impact-on-upgrade-gcc-or-binutils\">Impact on upgrade gcc or binutils</a></p>\n\n<p>Here it is said that C Code is compatible if build by GCC4.1 to GCC 4.8.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "language-lawyer", "forward-declaration", "template-variables"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1543404078, "post_id": 53518260, "comment_id": 93905126, "body": "Can you show the actual code and what is in which file? Or is this exactly the code that fails with clang?"}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1543404203, "post_id": 53518260, "comment_id": 93905199, "body": "@MatthieuBrucher Nothing more than that, maybe you can add <code>int main(){}</code> if you don&#39;t like the undefined reference to main error."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1543404238, "post_id": 53518260, "comment_id": 93905222, "body": "Well, godbolt accepts the code, so that&#39;s why I&#39;m asking."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1543404335, "post_id": 53518260, "comment_id": 93905289, "body": "@MatthieuBrucher Because godblot does not perform the link phase."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1543404468, "post_id": 53518260, "comment_id": 93905362, "body": "@MatthieuBrucher You can see the error <a href=\"http://coliru.stacked-crooked.com/a/af8c33f258ab57c7\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1543404636, "post_id": 53518260, "comment_id": 93905457, "body": "Good point... I saw it while playing a little bit more. Still, there is no concrete symbol, so gcc is probably right."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1543404704, "post_id": 53518260, "comment_id": 93905492, "body": "@MatthieuBrucher What do you mean by <i>concrete symbol</i>?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1543404805, "post_id": 53518260, "comment_id": 93905546, "body": "The symbol itself, that should be &quot;exported&quot; (as the extern would imply), but then I suppose &quot;Unless a variable template was explicitly specialized or explicitly instantiated, it is implicitly instantiated when a specialization of the variable template is used.&quot; this would mean gcc should have created the symbol? it was used int he assignment and should have been created there, shouldn&#39;t it?"}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1543416877, "post_id": 53518260, "comment_id": 93913054, "body": "Seems <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=83342\" rel=\"nofollow noreferrer\">bug 83342</a>."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1543432198, "post_id": 53518260, "comment_id": 93921803, "body": "@xskxzr Thank you."}], "owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1543404741, "creation_date": 1543404011, "last_edit_date": 1543404741, "question_id": 53518260, "link": "https://stackoverflow.com/questions/53518260/is-this-method-to-forward-declare-template-variable-legal", "title": "Is this method to forward declare template variable legal?", "body": "<p>In the code bellow is listed example of forward declaration of constant template variables which compiles on both clang and gcc:</p>\n\n<pre><code>template&lt;class T&gt;\nextern const T value;\ntemplate&lt;class T&gt;\nconst T value= 0;\n\nauto test = value&lt;int&gt;;\n\ntemplate&lt;class T&gt;\nextern const T value2;\ntemplate&lt;class T&gt;\nconstexpr T value2 =0;\n\nauto test2 = value2&lt;int&gt;;\n\ntemplate&lt;class T&gt;\nextern const T value3;\ntemplate&lt;class T&gt;\ninline constexpr T value3 =0;\n\nauto test3 = value3&lt;int&gt;;\n</code></pre>\n\n<p>Nevertheless if I declare the variables non const, gcc produces a linker error:<code>undefined reference to value4&lt;int&gt;</code> and <code>undefined symbol value5&lt;int&gt;</code>, but clang accepts the code:</p>\n\n<pre><code>template&lt;class T&gt;\nextern T value4;\ntemplate&lt;class T&gt;\nT value4= 0;\n\nauto test4 = value4&lt;int&gt;; //gcc linker error\n\ntemplate&lt;class T&gt;\nextern T value5;\ntemplate&lt;class T&gt;\ninline T value5=0;\n\nauto test5 = value5&lt;int&gt;; //gcc linker error\n</code></pre>\n\n<p>Initially I was confident all those uses cases where standard compliant. But because gcc produces a linker error for the last two cases, I was wondering if any of these forward declarations were legal? Is gcc wrong or am I on a <em>no diagnostic required</em> error? May a forward declaration followed by an inline definition of template variables as <code>value3</code> or <code>value5</code> in multiple translation unit cause odr violation?</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/af8c33f258ab57c7\" rel=\"nofollow noreferrer\">Linking phase error demonstration</a></p>\n\n<hr>\n\n<p><sub> Note: In this <a href=\"https://stackoverflow.com/q/33197817/5632316\">answers to this questions</a> it seems they have overlooked the possibility to declare the variable as an extern const. </sub></p>\n"}]